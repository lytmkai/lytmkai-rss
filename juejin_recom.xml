<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€]]></title>    <link>https://juejin.cn/post/7577268271213183012</link>    <guid>https://juejin.cn/post/7577268271213183012</guid>    <pubDate>2025-11-27T11:35:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577268271213183012" data-draft-id="7577042546094899242" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€"/> <meta itemprop="keywords" content="AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-27T11:35:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠŠå¸¸ç”¨ Prompt åšæˆ Skill ä¹‹åï¼Œæˆ‘å’Œ Claude Code çš„é…åˆæ•ˆç‡ç›´æ¥ç¿»äº† 3 å€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T11:35:38.000Z" title="Thu Nov 27 2025 11:35:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1bd2b15c6be4c5cb7900bef6c5b96c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764848866&amp;x-signature=2VLnxWzYBrKeCaV1BMXHDaf8%2Bic%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ä¸ªçœŸå®æ•…äº‹</h2>
<p>å»å¹´10æœˆï¼Œæˆ‘æ‰‹é‡Œæœ‰ä¸ªReacté¡¹ç›®è¦é‡æ„ï¼Œ2000å¤šè¡Œçš„ä¸Šå¸ç±»ï¼Œçœ‹ç€å°±å¤´ç–¼ã€‚æ¯æ¬¡è®©Claude Codeå¸®æˆ‘ä¼˜åŒ–ä»£ç ï¼Œæˆ‘éƒ½è¦é‡å¤äº¤ä»£ä¸€éï¼š</p>
<ul>
<li>"è®°å¾—ç”¨TypeScriptä¸¥æ ¼æ¨¡å¼"</li>
<li>"APIè°ƒç”¨è¦åŠ é”™è¯¯å¤„ç†"</li>
<li>"ç»„ä»¶è¦ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™"</li>
</ul>
<p>å¤åˆ¶ç²˜è´´è¿™äº›è¦æ±‚ï¼Œå°‘è¯´ä¹Ÿå¾—ä¸¤ä¸‰åˆ†é’Ÿã€‚æ›´çƒ¦çš„æ˜¯ï¼ŒèŠäº†åå‡ è½®ä¹‹åï¼ŒClaude Codeç»å¸¸ä¼š"å¿˜è®°"æˆ‘æœ€åˆçš„è¦æ±‚ï¼Œåˆå¼€å§‹å†™å‡ºä¸ç¬¦åˆè§„èŒƒçš„ä»£ç ã€‚</p>
<p>ç›´åˆ°æˆ‘åœ¨æ–‡æ¡£é‡Œç¿»åˆ°äº†SkillåŠŸèƒ½ã€‚</p>
<p>è¯•äº†ä¸€å‘¨åï¼Œæˆ‘æŠŠé‚£äº›é‡å¤çš„è¦æ±‚å…¨å°è£…æˆäº†å‡ ä¸ªskillæ–‡ä»¶ã€‚ç°åœ¨åªè¦ä¸€å¥<code>@skill react-refactor</code>ï¼ŒClaude Codeç«‹åˆ»å°±çŸ¥é“è¯¥æ€ä¹ˆåšã€‚é‚£ä¸ª2000è¡Œçš„ç±»ï¼ŒåŸæœ¬ä¼°è®¡è¦èŠ±ä¸‰å¤©æ—¶é—´é‡æ„ï¼Œæœ€åä¸¤ä¸ªä¸‹åˆå°±æå®šäº†ã€‚</p>
<h2 data-id="heading-1">Skillåˆ°åº•æ˜¯ä»€ä¹ˆ</h2>
<p>è¯´ç™½äº†ï¼ŒSkillå°±æ˜¯ç»™Claude Codeè£…æŠ€èƒ½åŒ…ã€‚</p>
<p>ä½ åœ¨<code>.claude/skills/</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªmarkdownæ–‡ä»¶ï¼ŒæŠŠå¸¸ç”¨çš„æç¤ºè¯ã€å·¥ä½œæµç¨‹ã€ä»£ç è§„èŒƒå†™è¿›å»ã€‚éœ€è¦çš„æ—¶å€™ï¼Œä¸€å¥<code>@skill æŠ€èƒ½å</code>å°±èƒ½è°ƒç”¨ã€‚å°±åƒæ¸¸æˆé‡Œç»™è§’è‰²è£…å¤‡ä¸åŒæŠ€èƒ½ï¼Œéœ€è¦è¾“å‡ºçš„æ—¶å€™è£…è¾“å‡ºæŠ€èƒ½ï¼Œéœ€è¦å¦å…‹çš„æ—¶å€™è£…é˜²å¾¡æŠ€èƒ½ã€‚</p>
<p>æ¥çœ‹ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "Reactä»£ç å®¡æŸ¥ä¸“å®¶"
<span class="hljs-section">description: "ä¸“é—¨å®¡æŸ¥Reactä»£ç çš„è´¨é‡ã€æ€§èƒ½å’Œæœ€ä½³å®è·µ"
---</span>

<span class="hljs-section"># Reactä»£ç å®¡æŸ¥æµç¨‹</span>

ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„Reactä»£ç å®¡æŸ¥ä¸“å®¶ã€‚è¯·æŒ‰ä»¥ä¸‹æ ‡å‡†å®¡æŸ¥ä»£ç ï¼š

<span class="hljs-section">## å®¡æŸ¥é‡ç‚¹</span>
<span class="hljs-bullet">1.</span> <span class="hljs-strong">**ç»„ä»¶è®¾è®¡**</span>
<span class="hljs-bullet">   -</span> å•ä¸€èŒè´£åŸåˆ™
<span class="hljs-bullet">   -</span> Propsç±»å‹å®šä¹‰çš„å®Œæ•´æ€§
<span class="hljs-bullet">   -</span> ç»„ä»¶æ‹†åˆ†çš„åˆç†æ€§

<span class="hljs-bullet">2.</span> <span class="hljs-strong">**æ€§èƒ½ä¼˜åŒ–**</span>
<span class="hljs-bullet">   -</span> ä¸å¿…è¦çš„é‡æ¸²æŸ“
<span class="hljs-bullet">   -</span> useMemo/useCallbackçš„ä½¿ç”¨
<span class="hljs-bullet">   -</span> åˆ—è¡¨æ¸²æŸ“çš„keyå€¼

<span class="hljs-bullet">3.</span> <span class="hljs-strong">**ä»£ç è´¨é‡**</span>
<span class="hljs-bullet">   -</span> TypeScriptç±»å‹å®‰å…¨
<span class="hljs-bullet">   -</span> é”™è¯¯è¾¹ç•Œå¤„ç†
<span class="hljs-bullet">   -</span> å¯è®¿é—®æ€§ï¼ˆa11yï¼‰

<span class="hljs-section">## è¾“å‡ºæ ¼å¼</span>
<span class="hljs-bullet">-</span> é—®é¢˜åˆ—è¡¨ï¼ˆæŒ‰ä¸¥é‡ç¨‹åº¦æ’åºï¼‰
<span class="hljs-bullet">-</span> å…·ä½“çš„ä»£ç å»ºè®®
<span class="hljs-bullet">-</span> ä¼˜å…ˆçº§æ ‡æ³¨ï¼ˆP0/P1/P2ï¼‰
</code></pre>
<p>æŠŠè¿™ä¸ªæ–‡ä»¶ä¿å­˜ä¸º<code>.claude/skills/react-review.md</code>ï¼Œä»¥åå®¡æŸ¥Reactä»£ç æ—¶ï¼Œç›´æ¥<code>@skill react-review</code>å°±è¡Œã€‚Claude Codeä¼šä¸¥æ ¼æŒ‰ç…§ä½ å®šä¹‰çš„æ ‡å‡†æ¥å®¡æŸ¥ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆæ‰‹å†™æç¤ºè¯æ’‘ä¸ä½äº†</h2>
<p>æˆ‘ä¹‹å‰ä¹Ÿæ˜¯æç¤ºè¯å·¥ç¨‹å¸ˆï¼ŒNotioné‡Œå­˜äº†å‡ åæ¡ç²¾å¿ƒæ‰“ç£¨çš„æç¤ºè¯æ¨¡æ¿ã€‚ä½†ç”¨äº†å‡ ä¸ªæœˆåï¼Œå‘ç°è¿™ç©æ³•æœ‰ç¡¬ä¼¤ï¼š</p>
<p><strong>é‡å¤åŠ³åŠ¨å¤ªå¤š</strong>
æ¯æ¬¡éƒ½è¦ä»Notionå¤åˆ¶ç²˜è´´ï¼Œæœ‰æ—¶å€™è¿˜è¦æ ¹æ®å½“å‰é¡¹ç›®è°ƒæ•´å‡ ä¸ªè¯ã€‚ä¸€å¤©ä¸‹æ¥å…‰æ˜¯å¤åˆ¶ç²˜è´´æç¤ºè¯ï¼Œå°±è¦èŠ±åŠå°æ—¶ã€‚</p>
<p><strong>ç‰ˆæœ¬ç®¡ç†æ··ä¹±</strong>
ä»Šå¤©ç”¨çš„æç¤ºè¯å’Œä¸Šå‘¨çš„ä¸ä¸€æ ·ï¼Œæ•ˆæœä¹Ÿä¸ç¨³å®šã€‚æƒ³å›æº¯"ä¸Šæ¬¡é‚£ä¸ªå¥½ç”¨çš„ç‰ˆæœ¬"ï¼ŸæŠ±æ­‰ï¼Œæ‰¾ä¸åˆ°äº†ã€‚</p>
<p><strong>å›¢é˜Ÿåä½œæ˜¯ç¾éš¾</strong>
æˆ‘çš„å¥½æç¤ºè¯ï¼ŒåŒäº‹æƒ³ç”¨ï¼Ÿæ‰‹åŠ¨å‘å¾®ä¿¡ã€‚åŒäº‹æ”¹è¿›äº†ï¼Ÿåˆè¦æ‰‹åŠ¨åŒæ­¥å›æ¥ã€‚è¿™æ•ˆç‡è·ŸçŸ³å™¨æ—¶ä»£æ²¡åŒºåˆ«ã€‚</p>
<p><strong>AIä¼šé—å¿˜</strong>
é•¿å¯¹è¯é‡Œï¼ŒClaude Codeå¾ˆå®¹æ˜“å¿˜è®°ä½ æœ€åˆçš„è¦æ±‚ã€‚èŠåˆ°ç¬¬20è½®ï¼Œä½ å‘ç°å®ƒåˆåœ¨çŠ¯ä¹‹å‰è¯´è¿‡ä¸è¦çŠ¯çš„é”™è¯¯ã€‚</p>
<p>SkillæŠŠè¿™äº›é—®é¢˜ä¸€æ¬¡æ€§è§£å†³äº†ï¼š</p>
<ul>
<li>ç‰ˆæœ¬åŒ–ï¼šç”¨Gitç®¡ç†ï¼Œå›æº¯éšä¾¿</li>
<li>å¯å…±äº«ï¼šå›¢é˜Ÿä»“åº“ä¸€æ‹‰ï¼Œæ‰€æœ‰äººåŒæ­¥</li>
<li>å§‹ç»ˆç”Ÿæ•ˆï¼šä¸ä¼šå› ä¸ºå¯¹è¯å¤ªé•¿è€Œå¤±æ•ˆ</li>
</ul>
<h2 data-id="heading-3">æˆ‘çš„ç¬¬ä¸€ä¸ªSkillï¼šAPIæ¥å£ç”Ÿæˆå™¨</h2>
<p>é‚£ä¸ªç”µå•†é¡¹ç›®é‡Œï¼Œåç«¯ç»™æˆ‘æ‰”äº†ä¸ª100å¤šä¸ªæ¥å£çš„Swaggeræ–‡æ¡£ã€‚æ‰‹åŠ¨å¯¹æ¥çš„è¯ï¼Œä¸€ä¸ªæ¥å£è¦å†™ï¼š</p>
<ol>
<li>TypeScriptç±»å‹å®šä¹‰</li>
<li>axiosè¯·æ±‚å‡½æ•°</li>
<li>é”™è¯¯å¤„ç†é€»è¾‘</li>
<li>loadingçŠ¶æ€ç®¡ç†</li>
</ol>
<p>ç®—äº†ä¸€ä¸‹ï¼Œ100ä¸ªæ¥å£å·®ä¸å¤šè¦30ä¸ªå°æ—¶ã€‚</p>
<p>æˆ‘èŠ±äº†1ä¸ªå°æ—¶ï¼Œå†™äº†ä¸ª<code>api-generator</code>çš„skillï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "APIæ¥å£ä»£ç ç”Ÿæˆå™¨"
description: "æ ¹æ®æ¥å£æ–‡æ¡£ç”ŸæˆTSç±»å‹å®šä¹‰å’Œaxioså°è£…"
<span class="hljs-section">version: "1.3.0"
---</span>

<span class="hljs-section"># APIä»£ç ç”Ÿæˆä¸“å®¶</span>

ä½ æ˜¯ä¸€ä½å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ“…é•¿å‰åç«¯æ¥å£å¯¹æ¥ã€‚ä½ çš„ä»»åŠ¡æ˜¯æ ¹æ®APIæ–‡æ¡£ç”Ÿæˆé«˜è´¨é‡çš„TypeScriptä»£ç ã€‚

<span class="hljs-section">## ç”Ÿæˆå†…å®¹</span>

<span class="hljs-section">### 1. TypeScriptç±»å‹å®šä¹‰</span>
<span class="hljs-code">```typescript
// è¯·æ±‚å‚æ•°ç±»å‹
interface GetUserRequest {
  userId: string;
  includeDetails?: boolean;
}

// å“åº”æ•°æ®ç±»å‹
interface GetUserResponse {
  id: string;
  name: string;
  email: string;
  createdAt: string;
}
</span></code></pre>
<h3 data-id="heading-4">2. Axiosè¯·æ±‚å‡½æ•°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/request'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> getUserAPI = <span class="hljs-keyword">async</span> (
  <span class="hljs-attr">params</span>: <span class="hljs-title class_">GetUserRequest</span>
): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GetUserResponse</span>&gt; =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> request.<span class="hljs-property">get</span>&lt;<span class="hljs-title class_">GetUserResponse</span>&gt;(<span class="hljs-string">'/api/user'</span>, { params });
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:'</span>, error);
    <span class="hljs-keyword">throw</span> error;
  }
};
</code></pre>
<h3 data-id="heading-5">3. React Hookå°è£…ï¼ˆå¯é€‰ï¼‰</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useGetUser</span> = (<span class="hljs-params">userId: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> [data, setData] = useState&lt;<span class="hljs-title class_">GetUserResponse</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">true</span>);
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserAPI</span>({ userId });
        <span class="hljs-title function_">setData</span>(result);
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-title function_">setError</span>(err <span class="hljs-keyword">as</span> <span class="hljs-title class_">Error</span>);
      } <span class="hljs-keyword">finally</span> {
        <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>);
      }
    };
    <span class="hljs-title function_">fetchData</span>();
  }, [userId]);

  <span class="hljs-keyword">return</span> { data, loading, error };
};
</code></pre>
<h2 data-id="heading-6">ä»£ç è§„èŒƒ</h2>
<ul>
<li>å‘½åéµå¾ªé©¼å³°å‘½åæ³•</li>
<li>APIå‡½æ•°ä»¥<code>API</code>ç»“å°¾</li>
<li>Hookå‡½æ•°ä»¥<code>use</code>å¼€å¤´</li>
<li>æ‰€æœ‰å¼‚æ­¥å‡½æ•°éƒ½è¦æœ‰é”™è¯¯å¤„ç†</li>
<li>å¯¼å‡ºçš„ç±»å‹å’Œå‡½æ•°éƒ½è¦åŠ JSDocæ³¨é‡Š</li>
</ul>
<h2 data-id="heading-7">è¾“å‡ºæ ¼å¼</h2>
<ol>
<li>å…ˆè¾“å‡ºç±»å‹å®šä¹‰</li>
<li>å†è¾“å‡ºAPIå‡½æ•°</li>
<li>å¦‚æœæ˜¯å¸¸ç”¨æ¥å£ï¼Œå†ç”ŸæˆHookå°è£…</li>
<li>æœ€åç»™å‡ºä½¿ç”¨ç¤ºä¾‹</li>
</ol>
<pre><code class="hljs language-python" lang="python">
æœ‰äº†è¿™ä¸ªskillï¼Œå¯¹æ¥ä¸€ä¸ªæ¥å£ä»<span class="hljs-number">30</span>åˆ†é’Ÿç¼©çŸ­åˆ°äº†<span class="hljs-number">5</span>åˆ†é’Ÿã€‚<span class="hljs-number">100</span>ä¸ªæ¥å£ï¼Œå‰ååªèŠ±äº†ä¸¤å¤©æ—¶é—´å°±å…¨éƒ¨æå®šã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå›¢é˜Ÿé‡Œçš„æ–°äººä¹Ÿèƒ½ç”¨åŒæ ·çš„è§„èŒƒç”Ÿæˆä»£ç ï¼Œæ•´ä¸ªé¡¹ç›®çš„ä»£ç é£æ ¼é«˜åº¦ç»Ÿä¸€ã€‚

<span class="hljs-comment">## é«˜çº§ç©æ³•ï¼šè®©Skillé…åˆèµ·æ¥å¹²æ´»</span>

ç”¨ç†Ÿäº†ä¹‹åï¼Œæˆ‘å‘ç°å•ä¸ªskillè¿˜ä¸å¤Ÿã€‚çœŸå®çš„å¼€å‘åœºæ™¯å¾€å¾€éœ€è¦å¤šä¸ªskillé…åˆã€‚

æ¯”å¦‚æˆ‘é‡æ„è€ä»£ç æ—¶çš„æ ‡å‡†æµç¨‹ï¼š

```bash
<span class="hljs-comment"># ç¬¬1æ­¥ï¼šåˆ†æä»£ç é—®é¢˜</span>
<span class="hljs-meta">@skill code-analyzer src/legacy/UserService.ts</span>

<span class="hljs-comment"># ç¬¬2æ­¥ï¼šåˆ¶å®šé‡æ„æ–¹æ¡ˆ</span>
<span class="hljs-meta">@skill refactor-planner</span>

<span class="hljs-comment"># ç¬¬3æ­¥ï¼šç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼ˆé‡æ„å‰å¿…é¡»æœ‰æµ‹è¯•ä¿åº•ï¼‰</span>
<span class="hljs-meta">@skill test-generator</span>

<span class="hljs-comment"># ç¬¬4æ­¥ï¼šæ‰§è¡Œé‡æ„</span>
ï¼ˆæ‰‹åŠ¨é‡æ„æˆ–è®©Claude Codeè¾…åŠ©ï¼‰

<span class="hljs-comment"># ç¬¬5æ­¥ï¼šæœ€ç»ˆä»£ç å®¡æŸ¥</span>
<span class="hljs-meta">@skill code-reviewer</span>
</code></pre>
<p>è¿™å››ä¸ªskillä¾æ¬¡è°ƒç”¨ï¼Œå½¢æˆäº†å®Œæ•´çš„é‡æ„å·¥ä½œæµã€‚æˆ‘ç”šè‡³å†™äº†ä¸ªshellè„šæœ¬è‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªæµç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># refactor-workflow.sh</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” æ­¥éª¤1/4: åˆ†æä»£ç é—®é¢˜..."</span>
claude-code @skill code-analyzer <span class="hljs-variable">$1</span>

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“‹ æ­¥éª¤2/4: åˆ¶å®šé‡æ„æ–¹æ¡ˆ..."</span>
claude-code @skill refactor-planner

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ§ª æ­¥éª¤3/4: ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹..."</span>
claude-code @skill test-generator

<span class="hljs-built_in">read</span> -p <span class="hljs-string">"æ‰§è¡Œæµ‹è¯•å¹¶ç¡®è®¤é€šè¿‡åï¼ŒæŒ‰å›è½¦ç»§ç»­..."</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… æ­¥éª¤4/4: æœ€ç»ˆä»£ç å®¡æŸ¥..."</span>
claude-code @skill code-reviewer
</code></pre>
<p>ç”¨è¿™ä¸ªè„šæœ¬é‡æ„è¿‡ä¸€ä¸ª2000è¡Œçš„ä¸Šå¸ç±»ï¼Œæ‹†æˆäº†7ä¸ªèŒè´£æ¸…æ™°çš„å°ç±»ã€‚æµ‹è¯•è¦†ç›–ç‡ä»40%æå‡åˆ°85%ï¼Œæ•´ä¸ªè¿‡ç¨‹æ¯”æƒ³è±¡ä¸­é¡ºåˆ©å¾ˆå¤šã€‚</p>
<h2 data-id="heading-8">å›¢é˜Ÿå…±äº«ï¼šæŠŠSkillå½“ä½œåŸºç¡€è®¾æ–½</h2>
<p>æˆ‘ä»¬å›¢é˜Ÿç°åœ¨æŠŠskillå½“ä½œåŸºç¡€è®¾æ–½æ¥ç®¡ç†ã€‚åˆ›å»ºäº†ä¸€ä¸ªGitä»“åº“ä¸“é—¨å­˜æ”¾team-skillsï¼š</p>
<pre><code class="hljs language-bash" lang="bash">team-skills/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ react-review.md          <span class="hljs-comment"># Reactä»£ç å®¡æŸ¥</span>
â”‚   â”œâ”€â”€ vue-component-gen.md     <span class="hljs-comment"># Vueç»„ä»¶ç”Ÿæˆ</span>
â”‚   â””â”€â”€ css-optimizer.md         <span class="hljs-comment"># CSSæ€§èƒ½ä¼˜åŒ–</span>
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ api-design.md            <span class="hljs-comment"># APIè®¾è®¡è§„èŒƒ</span>
â”‚   â”œâ”€â”€ database-review.md       <span class="hljs-comment"># æ•°æ®åº“å®¡æŸ¥</span>
â”‚   â””â”€â”€ security-audit.md       <span class="hljs-comment"># å®‰å…¨å®¡è®¡</span>
â””â”€â”€ common/
    â”œâ”€â”€ code-cleaner.md          <span class="hljs-comment"># ä»£ç æ¸…ç†</span>
    â”œâ”€â”€ test-generator.md        <span class="hljs-comment"># æµ‹è¯•ç”Ÿæˆ</span>
    â””â”€â”€ commit-msg.md            <span class="hljs-comment"># Gitæäº¤ä¿¡æ¯ç”Ÿæˆ</span>
</code></pre>
<p>æ¯ä¸ªå¼€å‘è€…åœ¨æœ¬åœ°é¡¹ç›®é‡Œè½¯é“¾æ¥åˆ°è¿™ä¸ªä»“åº“ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸€æ¬¡æ€§é…ç½®</span>
git <span class="hljs-built_in">clone</span> git@github.com:your-team/team-skills.git ~/.team-skills
<span class="hljs-built_in">ln</span> -s ~/.team-skills/* .claude/skills/
</code></pre>
<p>å¥½å¤„ç«‹ç«¿è§å½±ï¼š</p>
<ul>
<li><strong>æ–°äººå‹å¥½</strong>ï¼šå…¥èŒç¬¬ä¸€å¤©å°±æœ‰å®Œæ•´çš„skillåº“ï¼Œç«‹åˆ»å°±èƒ½æŒ‰è§„èŒƒå†™ä»£ç </li>
<li><strong>è‡ªåŠ¨åŒæ­¥</strong>ï¼šå›¢é˜Ÿæ›´æ–°skillåï¼Œæ‰€æœ‰äººgit pullå°±èƒ½è·å–æœ€æ–°ç‰ˆæœ¬</li>
<li><strong>ä»£ç ä¸€è‡´</strong>ï¼šä¸ç®¡è°å†™çš„ä»£ç ï¼Œé£æ ¼éƒ½é«˜åº¦ç»Ÿä¸€</li>
</ul>
<p>ä¸Šä¸ªæœˆæ¥äº†ä¸ªå®ä¹ ç”Ÿï¼Œç¬¬äºŒå¤©å°±èƒ½å†™å‡ºç¬¦åˆå›¢é˜Ÿè§„èŒƒçš„ä»£ç ã€‚è¦åœ¨ä»¥å‰ï¼Œè‡³å°‘å¾—åŸ¹è®­ä¸€å‘¨ã€‚</p>
<h2 data-id="heading-9">Skillå’ŒCLAUDE.mdæ˜¯é»„é‡‘æ­æ¡£</h2>
<p>Skillæ›´å¼ºå¤§çš„ç©æ³•ï¼Œæ˜¯é…åˆé¡¹ç›®æ ¹ç›®å½•çš„<code>CLAUDE.md</code>ä¸€èµ·ç”¨ã€‚</p>
<p>åœ¨CLAUDE.mdé‡Œå®šä¹‰é¡¹ç›®å…¨å±€è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section"># é¡¹ç›®ä¸Šä¸‹æ–‡</span>

<span class="hljs-bullet">-</span> æŠ€æœ¯æ ˆï¼šReact 18 + TypeScript 5.0 + Vite 4
<span class="hljs-bullet">-</span> ä»£ç è§„èŒƒï¼šAirbnb ESLintè§„åˆ™
<span class="hljs-bullet">-</span> æäº¤è§„èŒƒï¼šConventional Commits
<span class="hljs-bullet">-</span> çŠ¶æ€ç®¡ç†ï¼šZustandï¼ˆç¦æ­¢ä½¿ç”¨Reduxï¼‰

<span class="hljs-section">## é‡è¦çº¦å®š</span>
<span class="hljs-bullet">-</span> æ‰€æœ‰ç»„ä»¶å¿…é¡»æœ‰å®Œæ•´çš„TypeScriptç±»å‹å®šä¹‰
<span class="hljs-bullet">-</span> APIè°ƒç”¨ç»Ÿä¸€ä½¿ç”¨ src/utils/request.ts å°è£…
<span class="hljs-bullet">-</span> ç»„ä»¶æ–‡ä»¶åä½¿ç”¨PascalCaseï¼ˆå¦‚UserProfile.tsxï¼‰
<span class="hljs-bullet">-</span> å·¥å…·å‡½æ•°æ–‡ä»¶åä½¿ç”¨camelCaseï¼ˆå¦‚formatDate.tsï¼‰

<span class="hljs-section">## ç›®å½•ç»“æ„</span>
src/
â”œâ”€â”€ components/    # å…¬å…±ç»„ä»¶
â”œâ”€â”€ pages/        # é¡µé¢ç»„ä»¶
â”œâ”€â”€ hooks/        # è‡ªå®šä¹‰Hooks
â”œâ”€â”€ utils/        # å·¥å…·å‡½æ•°
â”œâ”€â”€ services/     # APIæœåŠ¡
â””â”€â”€ stores/       # ZustandçŠ¶æ€ç®¡ç†
</code></pre>
<p>ç„¶ååœ¨skillé‡Œå¼•ç”¨è¿™äº›è§„åˆ™ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
<span class="hljs-section">title: "Reactç»„ä»¶ç”Ÿæˆå™¨"
---</span>

<span class="hljs-section"># ç»„ä»¶ç”ŸæˆæŒ‡ä»¤</span>

ä¸¥æ ¼æŒ‰ç…§CLAUDE.mdä¸­å®šä¹‰çš„æŠ€æœ¯æ ˆã€ç›®å½•ç»“æ„å’Œå‘½åè§„èŒƒç”ŸæˆReactç»„ä»¶ã€‚

ç”Ÿæˆçš„ç»„ä»¶å¿…é¡»ï¼š
<span class="hljs-bullet">-</span> ä½¿ç”¨TypeScript
<span class="hljs-bullet">-</span> ç¬¦åˆé¡¹ç›®çš„ESLintè§„åˆ™
<span class="hljs-bullet">-</span> æ”¾åœ¨æ­£ç¡®çš„ç›®å½•ä¸‹
<span class="hljs-bullet">-</span> ä½¿ç”¨é¡¹ç›®çº¦å®šçš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
</code></pre>
<p>è¿™æ ·skillä¼šè‡ªåŠ¨è¯»å–CLAUDE.mdçš„é…ç½®ï¼Œç”Ÿæˆçš„ä»£ç å®Œå…¨ç¬¦åˆé¡¹ç›®è§„èŒƒã€‚æ–°é¡¹ç›®å…‹éš†ä¸‹æ¥ï¼Œskillä¹Ÿèƒ½ç«‹åˆ»é€‚é…ã€‚</p>
<h2 data-id="heading-10">æˆ‘çš„5ä¸ªå¿…å¤‡Skill</h2>
<p>ç”¨äº†åŠå¹´ï¼Œæˆ‘çš„skillsç›®å½•é‡Œç§¯ç´¯äº†20å¤šä¸ªskillã€‚æŒ‘å‡ ä¸ªæœ€å¸¸ç”¨çš„åˆ†äº«ä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-11">1. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨ï¼ˆtest-gen.mdï¼‰</h3>
<p>å†™å®ŒåŠŸèƒ½ä»£ç åæœ€çƒ¦çš„å°±æ˜¯è¡¥æµ‹è¯•ã€‚è¿™ä¸ªskillèƒ½åˆ†æå‡½æ•°é€»è¾‘ï¼Œè‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ï¼ŒåŒ…æ‹¬è¾¹ç•Œæƒ…å†µå’Œå¼‚å¸¸åœºæ™¯ã€‚</p>
<p>æ•ˆæœï¼šæˆ‘çš„æµ‹è¯•è¦†ç›–ç‡ä»40%æå‡åˆ°85%ï¼ŒèŠ‚çœäº†è‡³å°‘ä¸€åŠçš„æµ‹è¯•ç¼–å†™æ—¶é—´ã€‚</p>
<h3 data-id="heading-12">2. Gitæäº¤ä¿¡æ¯ç”Ÿæˆå™¨ï¼ˆcommit-msg.mdï¼‰</h3>
<p>æ¯æ¬¡æäº¤éƒ½è¦æƒ³commit messageï¼ŒæŒºæµªè´¹è„‘ç»†èƒçš„ã€‚è¿™ä¸ªskillåˆ†ægit diffå†…å®¹ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆConventional Commitsè§„èŒƒçš„æäº¤ä¿¡æ¯ã€‚</p>
<p>ç¤ºä¾‹è¾“å‡ºï¼š</p>
<pre><code class="hljs language-diff" lang="diff">feat(user-auth): æ·»åŠ OAuth2.0ç™»å½•åŠŸèƒ½

<span class="hljs-deletion">- é›†æˆGoogleå’ŒGitHubç¬¬ä¸‰æ–¹ç™»å½•</span>
<span class="hljs-deletion">- æ·»åŠ JWT tokenåˆ·æ–°æœºåˆ¶</span>
<span class="hljs-deletion">- å®Œå–„ç”¨æˆ·æƒé™æ ¡éªŒä¸­é—´ä»¶</span>

Closes #123
</code></pre>
<p>è™½ç„¶åªæœ‰30è¡Œä»£ç ï¼Œä½†è¿™æ˜¯æˆ‘æ¯å¤©éƒ½è¦ç”¨çš„skillã€‚ç´¯è®¡èŠ‚çœçš„æ—¶é—´å·²ç»å¥½å‡ ä¸ªå°æ—¶äº†ã€‚</p>
<h3 data-id="heading-13">3. ä»£ç é‡æ„åŠ©æ‰‹ï¼ˆrefactor.mdï¼‰</h3>
<p>è€ä»£ç éœ€è¦ä¼˜åŒ–ä½†ä¸çŸ¥ä»ä½•ä¸‹æ‰‹æ—¶ï¼Œè¿™ä¸ªskillèƒ½ï¼š</p>
<ul>
<li>è¯†åˆ«ä»£ç åå‘³é“</li>
<li>ç»™å‡ºé‡æ„ä¼˜å…ˆçº§æ’åº</li>
<li>æä¾›step-by-stepé‡æ„è®¡åˆ’</li>
<li>ä¿è¯é‡æ„å‰ååŠŸèƒ½ä¸€è‡´</li>
</ul>
<p>é‚£ä¸ª2000è¡Œçš„ä¸Šå¸ç±»å°±æ˜¯é è¿™ä¸ªskillæå®šçš„ã€‚</p>
<h3 data-id="heading-14">4. å®‰å…¨å®¡æŸ¥ä¸“å®¶ï¼ˆsecurity-audit.mdï¼‰</h3>
<p>ä¸“é—¨æ£€æŸ¥ä»£ç å®‰å…¨é—®é¢˜ï¼š</p>
<ul>
<li>SQLæ³¨å…¥é£é™©</li>
<li>XSSæ”»å‡»é˜²æŠ¤</li>
<li>æ•æ„Ÿä¿¡æ¯æ³„éœ²</li>
<li>æƒé™æ ¡éªŒå®Œæ•´æ€§</li>
</ul>
<p>æœ‰æ¬¡å‡†å¤‡ä¸Šçº¿å‰ç”¨è¿™ä¸ªskillæ‰«äº†ä¸€éï¼Œå‘ç°3ä¸ªæ½œåœ¨çš„å®‰å…¨æ¼æ´ï¼Œå“å‡ºä¸€èº«å†·æ±—ã€‚</p>
<h3 data-id="heading-15">5. æ–‡æ¡£ç”Ÿæˆå™¨ï¼ˆdoc-gen.mdï¼‰</h3>
<p>é¡¹ç›®æ–‡æ¡£æ€»æ˜¯æ»åäºä»£ç ï¼Ÿè¿™ä¸ªskillèƒ½æ ¹æ®ä»£ç è‡ªåŠ¨ç”ŸæˆAPIæ–‡æ¡£ï¼Œæå–å‡½æ•°æ³¨é‡Šç”ŸæˆMarkdownï¼Œè¿˜èƒ½ç»´æŠ¤æ›´æ–°æ—¥å¿—ã€‚</p>
<p>æ–‡æ¡£æ›´æ–°æ—¶é—´ä»2å°æ—¶ç¼©çŸ­åˆ°10åˆ†é’Ÿï¼Œè€Œä¸”å†ä¹Ÿä¸ä¼šå‡ºç°"ä»£ç æ”¹äº†æ–‡æ¡£æ²¡æ”¹"çš„æƒ…å†µã€‚</p>
<h2 data-id="heading-16">å†™å¥½Skillçš„5ä¸ªæŠ€å·§</h2>
<p>åŠå¹´ä¸‹æ¥ï¼Œæˆ‘æ€»ç»“äº†å‡ ä¸ªç¼–å†™skillçš„ç»éªŒï¼š</p>
<h3 data-id="heading-17">1. Frontmatterè¦è®¤çœŸå†™</h3>
<p>è™½ç„¶çœ‹èµ·æ¥å¯æœ‰å¯æ— ï¼Œä½†titleå’Œdescriptionä¼šæ˜¾ç¤ºåœ¨skillåˆ—è¡¨é‡Œï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">---
title: "å…¨æ ˆä»£ç å®¡æŸ¥ä¸“å®¶"
description: "å®¡æŸ¥å‰åç«¯ä»£ç ï¼Œå…³æ³¨å®‰å…¨æ€§ã€æ€§èƒ½å’Œå¯ç»´æŠ¤æ€§"
version: "2.1.0"
<span class="hljs-section">tags: ["ä»£ç å®¡æŸ¥", "å®‰å…¨", "æ€§èƒ½"]
---</span>
</code></pre>
<p>versionå­—æ®µæ–¹ä¾¿ç‰ˆæœ¬ç®¡ç†ï¼Œtagsæ–¹ä¾¿åˆ†ç±»æŸ¥æ‰¾ã€‚</p>
<h3 data-id="heading-18">2. è§’è‰²å®šä¹‰è¦æ¸…æ™°</h3>
<p>"ä½ æ˜¯ä¸€ä½...ä¸“å®¶"è¿™ç§å¼€å¤´å¾ˆæœ‰ç”¨ï¼Œèƒ½è®©Claude Codeå¿«é€Ÿè¿›å…¥è§’è‰²ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ä½ æ˜¯ä¸€ä½æ‹¥æœ‰10å¹´ç»éªŒçš„å…¨æ ˆå·¥ç¨‹å¸ˆï¼Œæ“…é•¿ä»£ç å®¡æŸ¥å’Œå®‰å…¨å®¡è®¡ã€‚
</code></pre>
<p>æ¯”ç›´æ¥è¯´"è¯·å®¡æŸ¥ä»£ç "æ•ˆæœå¥½å¾ˆå¤šã€‚</p>
<h3 data-id="heading-19">3. ç”¨å¯¹æ¯”ç¤ºä¾‹è¯´æ˜</h3>
<p>ç”¨âœ…å’ŒâŒå¯¹æ¯”å¥½åä»£ç ï¼ŒClaude Codeç†è§£èµ·æ¥æ›´å‡†ç¡®ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">### SQLæ³¨å…¥é£é™©</span>

âŒ å±é™©å†™æ³•ï¼š
<span class="hljs-code">```javascript
const query = `SELECT * FROM users WHERE id = ${userId}`;
</span></code></pre>
<p>âœ… å®‰å…¨å†™æ³•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> query = <span class="hljs-string">'SELECT * FROM users WHERE id = ?'</span>;
db.<span class="hljs-title function_">query</span>(query, [userId]);
</code></pre>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## 4. è¾“å‡ºæ ¼å¼è¦å…·ä½“</span></span>

åˆ«è¯´"è¯·ç»™å‡ºå»ºè®®"ï¼Œè¦è¯´"æŒ‰ä»¥ä¸‹æ ¼å¼è¾“å‡º"ï¼š

```markdown
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># è¾“å‡ºæ ¼å¼</span></span>
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## ğŸ”´ ä¸¥é‡é—®é¢˜ï¼ˆå¿…é¡»ä¿®å¤ï¼‰</span></span>
- [æ–‡ä»¶å:è¡Œå·] é—®é¢˜æè¿°
- é£é™©è¯´æ˜
- ä¿®å¤å»ºè®®ï¼ˆé™„ä»£ç ç¤ºä¾‹ï¼‰
<span class="hljs-meta prompt_">
#</span><span class="bash"><span class="hljs-comment">## ğŸŸ¡ å»ºè®®æ”¹è¿›ï¼ˆæ¨èä¼˜åŒ–ï¼‰</span></span>
- [æ–‡ä»¶å:è¡Œå·] é—®é¢˜æè¿°
- æ”¹è¿›ç†ç”±
- ä¼˜åŒ–æ–¹æ¡ˆ
</code></pre>
<h3 data-id="heading-20">5. åŠ ä¸Šé”™è¯¯å¤„ç†è§„åˆ™</h3>
<p>å‘Šè¯‰AIé‡åˆ°é—®é¢˜æ€ä¹ˆåŠï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## é”™è¯¯å¤„ç†</span>

å¦‚æœé‡åˆ°ä»¥ä¸‹æƒ…å†µï¼š
<span class="hljs-bullet">-</span> ä»£ç è¯­æ³•é”™è¯¯ï¼šå…ˆæŒ‡å‡ºé”™è¯¯ä½ç½®ï¼Œä¸ç»§ç»­å®¡æŸ¥
<span class="hljs-bullet">-</span> æ–‡ä»¶æ— æ³•è®¿é—®ï¼šæç¤ºç”¨æˆ·æ£€æŸ¥è·¯å¾„
<span class="hljs-bullet">-</span> ä»£ç é‡è¿‡å¤§ï¼ˆ&gt;5000è¡Œï¼‰ï¼šå»ºè®®åˆ†æ‰¹å®¡æŸ¥
</code></pre>
<h2 data-id="heading-21">å¸¸è§é—®é¢˜</h2>
<h3 data-id="heading-22">Skillå¤ªå¤šè®°ä¸ä½åå­—ï¼Ÿ</h3>
<p>ç”¨å¥½å‘½åè§„èŒƒï¼š</p>
<ul>
<li><code>review-*</code>: ä»£ç å®¡æŸ¥ç±»</li>
<li><code>gen-*</code>: ä»£ç ç”Ÿæˆç±»</li>
<li><code>util-*</code>: å·¥å…·ç±»</li>
<li><code>fix-*</code>: é—®é¢˜ä¿®å¤ç±»</li>
</ul>
<p>æˆ‘çš„å‘½åï¼š<code>review-frontend.md</code>ã€<code>gen-api.md</code>ã€<code>util-commit.md</code></p>
<h3 data-id="heading-23">Skillè¾“å‡ºå¤ªé•¿çœ‹ä¸å®Œï¼Ÿ</h3>
<p>åœ¨skillé‡ŒåŠ ä¸Šç®€æ´æ¨¡å¼ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">é»˜è®¤ä½¿ç”¨è¯¦ç»†æ¨¡å¼ã€‚å¦‚æœç”¨æˆ·æ·»åŠ <span class="hljs-code">`--brief`</span>å‚æ•°ï¼Œè¾“å‡ºç®€æ´ç‰ˆï¼š
<span class="hljs-bullet">-</span> é—®é¢˜æ¸…å•ï¼ˆä¸€è¡Œä¸€ä¸ªï¼‰
<span class="hljs-bullet">-</span> ä¸¥é‡ç¨‹åº¦æ ‡æ³¨
<span class="hljs-bullet">-</span> å…³é”®ä¿®å¤å»ºè®®
</code></pre>
<h3 data-id="heading-24">Skillåœ¨ä¸åŒé¡¹ç›®ä¸­è¡¨ç°ä¸ä¸€è‡´ï¼Ÿ</h3>
<p>è®©skillä¸»åŠ¨è¯·æ±‚ä¸Šä¸‹æ–‡ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## åˆ†æå‰ç½®æ­¥éª¤</span>

å¼€å§‹å‰è¯·å…ˆï¼š
<span class="hljs-bullet">1.</span> è¯»å–package.jsonäº†è§£ä¾èµ–ç‰ˆæœ¬
<span class="hljs-bullet">2.</span> æ£€æŸ¥tsconfig.jsonäº†è§£TSé…ç½®
<span class="hljs-bullet">3.</span> æŸ¥çœ‹.eslintrcäº†è§£ä»£ç è§„èŒƒ
<span class="hljs-bullet">4.</span> æµè§ˆREADME.mdäº†è§£é¡¹ç›®æ¶æ„
</code></pre>
<h2 data-id="heading-25">æœ€åè¯´ä¸¤å¥</h2>
<p>ç”¨äº†åŠå¹´çš„skillåŠŸèƒ½ï¼Œæˆ‘çš„å¼€å‘æ•ˆç‡è‡³å°‘æå‡äº†40%ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¾ˆå¤šé‡å¤æ€§çš„è„‘åŠ›åŠ³åŠ¨è¢«è§£æ”¾å‡ºæ¥äº†ï¼Œæˆ‘å¯ä»¥æŠŠæ—¶é—´èŠ±åœ¨çœŸæ­£éœ€è¦æ€è€ƒçš„æ¶æ„è®¾è®¡å’Œä¸šåŠ¡é€»è¾‘ä¸Šã€‚</p>
<p>å¦‚æœä½ ç°åœ¨è¿˜åœ¨æ‰‹å†™æç¤ºè¯ï¼Œå»ºè®®ä½ ï¼š</p>
<ol>
<li><strong>ä»Šå¤©å°±å¼€å§‹</strong>ï¼šä»ä¸€ä¸ªç®€å•çš„skillå¼€å§‹ï¼Œæ¯”å¦‚ä»£ç å®¡æŸ¥æˆ–æµ‹è¯•ç”Ÿæˆ</li>
<li><strong>é€æ­¥å®Œå–„</strong>ï¼šæ¯æ¬¡ç”¨å®Œååæ€å“ªé‡Œå¯ä»¥æ”¹è¿›ï¼Œæ›´æ–°ç‰ˆæœ¬</li>
<li><strong>å›¢é˜Ÿå…±äº«</strong>ï¼šå¥½çš„skillå°±åƒå¥½çš„å·¥å…·åº“ï¼Œè¦åˆ†äº«å‡ºå»</li>
<li><strong>æŒç»­å­¦ä¹ </strong>ï¼šå…³æ³¨å®˜æ–¹æ–‡æ¡£æ›´æ–°ï¼Œæ–°åŠŸèƒ½å¯èƒ½ä¼šæ”¹å˜å†™æ³•</li>
</ol>
<p>æœ€ååˆ†äº«ä¸€ä¸ªå¿ƒå¾—ï¼š<strong>Skillçš„ä»·å€¼ä¸åœ¨äºæœ‰å¤šå¤æ‚ï¼Œè€Œåœ¨äºè§£å†³çœŸå®é—®é¢˜</strong>ã€‚æˆ‘é‚£ä¸ªæœ€ç®€å•çš„commit-msgç”Ÿæˆå™¨åªæœ‰30è¡Œï¼Œä½†æ¯å¤©éƒ½åœ¨ç”¨ï¼Œç´¯è®¡èŠ‚çœçš„æ—¶é—´å·²ç»å¥½å‡ ä¸ªå°æ—¶äº†ã€‚</p>
<p>ä»ç°åœ¨å¼€å§‹ï¼Œè¯•ç€æŠŠä½ æ¯å¤©é‡å¤è¾“å…¥çš„æç¤ºè¯æ•´ç†æˆskillå§ã€‚ä¸‰ä¸ªæœˆåï¼Œä½ ä¼šæ„Ÿè°¢ä»Šå¤©çš„è‡ªå·±ã€‚</p>
<p><strong>ç›¸å…³èµ„æº</strong></p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.claude.com%2Fdocs" target="_blank" title="https://code.claude.com/docs" ref="nofollow noopener noreferrer">Claude Codeå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.claude.com%2Fen%2Fdocs%2Fagents-and-tools%2Fagent-skills%2Fbest-practices" target="_blank" title="https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices" ref="nofollow noopener noreferrer">Skillæœ€ä½³å®è·µæŒ‡å—</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">ç¤¾åŒºSkillæ¨¡æ¿åº“</a></li>
</ul>
<blockquote>
<p>æœ¬æ–‡é¦–å‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2F" target="_blank" title="https://blog.betterlink.top/zh/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577228831137890347</link>    <guid>https://juejin.cn/post/7577228831137890347</guid>    <pubDate>2025-11-27T11:57:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831137890347" data-draft-id="7577215663968354346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ"/> <meta itemprop="keywords" content="Go,Vue.js"/> <meta itemprop="datePublished" content="2025-11-27T11:57:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T11:57:12.000Z" title="Thu Nov 27 2025 11:57:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">go-kratos-admin æŠ€æœ¯æ ˆæ·±åº¦è§£æï¼šä¸ºä»€ä¹ˆé€‰ Golang+Vue3 è¿™å¥—ç»„åˆï¼Ÿ</h2>
<p>ä¼ä¸šçº§ Admin ç³»ç»Ÿçš„æŠ€æœ¯é€‰å‹ï¼Œæ—¢è¦å…¼é¡¾<strong>é«˜æ€§èƒ½</strong>ä¸<strong>ç¨³å®šæ€§</strong>ï¼Œä¹Ÿè¦å¹³è¡¡<strong>å¼€å‘æ•ˆç‡</strong>ä¸<strong>å¯æ‰©å±•æ€§</strong>ã€‚go-kratos-admin ä½œä¸ºå¼€ç®±å³ç”¨çš„å…¨æ ˆ Admin è§£å†³æ–¹æ¡ˆï¼Œæœ€ç»ˆé€‰å®š <strong>Golang ç”Ÿæ€ï¼ˆåç«¯ï¼‰</strong> + <strong>Vue3 ç”Ÿæ€ï¼ˆå‰ç«¯ï¼‰</strong> çš„æŠ€æœ¯ç»„åˆï¼Œå¹¶éå¶ç„¶ â€”â€” è€Œæ˜¯ç²¾å‡†åŒ¹é…ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿæ ¸å¿ƒéœ€æ±‚çš„å¿…ç„¶é€‰æ‹©ã€‚æœ¬æ–‡å°†æ·±åº¦æ‹†è§£è¿™å¥—æŠ€æœ¯æ ˆçš„é€‰å‹é€»è¾‘ï¼Œä»¥åŠå®ƒå¦‚ä½•ä¸ºé¡¹ç›®èµ‹èƒ½ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åç«¯æŠ€æœ¯æ ˆï¼šGolang ç”Ÿæ€çš„ â€œç²¾å‡†ç‹™å‡»â€</h3>
<p>åç«¯æ˜¯ Admin ç³»ç»Ÿçš„ â€œéª¨æ¶â€ï¼Œéœ€è¦æ”¯æ’‘æƒé™æ§åˆ¶ã€å¤šç§Ÿæˆ·éš”ç¦»ã€é«˜å¹¶å‘è¯·æ±‚ç­‰æ ¸å¿ƒåœºæ™¯ã€‚go-kratos-admin é€‰æ‹©ä»¥ Golang ä¸ºåŸºç¡€ï¼Œæ­é… go-kratosã€entã€gormã€wireã€casbin ç­‰ç»„ä»¶ï¼Œæ­£æ˜¯ç„å‡†äº†ä¼ä¸šçº§ç³»ç»Ÿçš„ç—›ç‚¹ã€‚</p>
<h4 data-id="heading-2">1. æ ¸å¿ƒè¯­è¨€ï¼šä¸ºä»€ä¹ˆæ˜¯ Golang è€Œé Java/Node.jsï¼Ÿ</h4>
<p>ä¼ä¸šçº§ Admin ç³»ç»Ÿçœ‹ä¼¼ â€œä¸šåŠ¡é€»è¾‘ä¸ºä¸»â€ï¼Œå®åˆ™å¯¹<strong>æ€§èƒ½</strong>å’Œ<strong>èµ„æºå ç”¨</strong>æœ‰éšæ€§é«˜è¦æ±‚ï¼šæ¯”å¦‚æ‰¹é‡æ•°æ®å¯¼å‡ºã€é«˜é¢‘æƒé™æ ¡éªŒã€åˆ†å¸ƒå¼ç¼“å­˜æ“ä½œç­‰åœºæ™¯ï¼Œéƒ½éœ€è¦åç«¯å¿«é€Ÿå“åº”ã€‚</p>
<ul>
<li><strong>Golang çš„å¤©ç„¶ä¼˜åŠ¿</strong>ï¼šç¼–è¯‘å‹è¯­è¨€å¸¦æ¥çš„é«˜æ€§èƒ½ï¼ˆæ¯” Node.js å¿«æ•°å€ï¼‰ã€goroutine è½»é‡çº§å¹¶å‘æ¨¡å‹ï¼ˆè½»æ¾åº”å¯¹ä¸Šä¸‡å¹¶å‘è¯·æ±‚ï¼‰ã€æä½çš„å†…å­˜å ç”¨ï¼ˆéƒ¨ç½²æœåŠ¡å™¨æˆæœ¬æ›´ä½ï¼‰ï¼›</li>
<li><strong>å¯¹æ¯” Java</strong>ï¼šGolang ä»£ç æ›´ç®€æ´ï¼ˆå°‘ â€œæ ·æ¿ä»£ç â€ï¼‰ï¼Œç¼–è¯‘é€Ÿåº¦å¿«ï¼Œéƒ¨ç½²æ— éœ€ JVMï¼Œè¿ç»´æ›´è½»é‡åŒ–ï¼›</li>
<li><strong>å¯¹æ¯” Node.js</strong>ï¼šGolang æ—  â€œå›è°ƒåœ°ç‹±â€ï¼ŒåŒæ­¥ä»£ç ç¼–å†™æ›´ç¬¦åˆåç«¯å¼€å‘ä¹ æƒ¯ï¼Œä¸”åœ¨ CPU å¯†é›†å‹åœºæ™¯ï¼ˆå¦‚æ•°æ®è®¡ç®—ï¼‰ä¸­ä¼˜åŠ¿æ˜¾è‘—ã€‚</li>
</ul>
<p>å¯¹ go-kratos-admin è€Œè¨€ï¼ŒGolang æ—¢èƒ½æ”¯æ’‘å•ä½“æ¶æ„çš„å¿«é€Ÿå¼€å‘ï¼Œä¹Ÿèƒ½å¹³æ»‘æ‰©å±•åˆ°å¾®æœåŠ¡æ¶æ„ â€”â€” è¿™æ°å¥½åŒ¹é…äº†é¡¹ç›® â€œé€‚é…ä¸åŒè§„æ¨¡å›¢é˜Ÿâ€ çš„å®šä½ã€‚</p>
<h4 data-id="heading-3">2. æ¡†æ¶é€‰å‹ï¼šgo-kratos ä¸ºä½•æˆä¸ºé¦–é€‰ï¼Ÿ</h4>
<p>åç«¯æ¡†æ¶æ˜¯æŠ€æœ¯æ ˆçš„ â€œæ ¸å¿ƒæ¢çº½â€ï¼Œgo-kratos-admin é€‰æ‹©å­—èŠ‚è·³åŠ¨å¼€æºçš„ go-kratosï¼Œè€Œé Gin/Echo ç­‰è½»é‡æ¡†æ¶ï¼Œæ ¸å¿ƒåŸå› åœ¨äºï¼š</p>
<ul>
<li><strong>ä¼ä¸šçº§ç‰¹æ€§å†…ç½®</strong>ï¼škratos åŸç”Ÿæ”¯æŒæœåŠ¡å‘ç°ã€é…ç½®ä¸­å¿ƒã€é“¾è·¯è¿½è¸ªã€é™æµç†”æ–­ç­‰å¾®æœåŠ¡èƒ½åŠ›ï¼Œæ— éœ€å¼€å‘è€…é‡å¤é›†æˆï¼›</li>
<li><strong>æ ‡å‡†åŒ–è®¾è®¡</strong>ï¼šéµå¾ª RESTful + gRPC åŒåè®®è§„èŒƒï¼Œå‰åç«¯äº¤äº’æ›´æ¸…æ™°ï¼ŒåŒæ—¶æ”¯æŒåè®®è‡ªåŠ¨è½¬æ¢ï¼ˆæ¯”å¦‚å‰ç«¯ HTTP è¯·æ±‚è½¬åç«¯ gRPC è°ƒç”¨ï¼‰ï¼›</li>
<li><strong>ç”Ÿæ€é€‚é…æ€§</strong>ï¼šä¸ wireï¼ˆä¾èµ–æ³¨å…¥ï¼‰ã€entï¼ˆORMï¼‰ç­‰ Golang ç”Ÿæ€ç»„ä»¶æ— ç¼åä½œï¼Œé™ä½æŠ€æœ¯æ ˆæ•´åˆæˆæœ¬ã€‚</li>
</ul>
<p>å¯¹ Admin ç³»ç»Ÿæ¥è¯´ï¼Œkratos çš„ â€œå¾®æœåŠ¡åŸºå› â€ è®©é¡¹ç›®èƒ½ä»ä¸€å¼€å§‹å°±é¢„ç•™æ‰©å±•ç©ºé—´ â€”â€” æ¯”å¦‚åç»­æ‹†åˆ† â€œæƒé™æœåŠ¡â€â€œç§Ÿæˆ·æœåŠ¡â€ æ—¶ï¼Œæ— éœ€é‡æ„åº•å±‚æ¡†æ¶ã€‚</p>
<h4 data-id="heading-4">3. æ•°æ®å±‚ï¼šent ä¸ gorm çš„ â€œæŒ‰éœ€æ›¿æ¢â€ æ–¹æ¡ˆ</h4>
<p>æ•°æ®æ“ä½œæ˜¯ Admin ç³»ç»Ÿçš„æ ¸å¿ƒåœºæ™¯ï¼ˆå¦‚å¤šç§Ÿæˆ·æ•°æ®éš”ç¦»ã€å¤æ‚æ¡ä»¶æŸ¥è¯¢ã€ç®€å• CRUD æ“ä½œï¼‰ï¼Œé¡¹ç›®å¹¶æœªé‡‡ç”¨ â€œä¸»è¾…ç»“åˆâ€ çš„å›ºå®šæ¨¡å¼ï¼Œè€Œæ˜¯è®¾è®¡äº†<strong>å¯çµæ´»æ›¿æ¢çš„ ORM æ–¹æ¡ˆ</strong>â€”â€” å¼€å‘è€…å¯æ ¹æ®å…·ä½“ä¸šåŠ¡éœ€æ±‚ï¼Œåœ¨ ent å’Œ gorm ä¹‹é—´è‡ªä¸»é€‰æ‹©é€‚é…å·¥å…·ï¼Œæ— éœ€ä¿®æ”¹åº•å±‚æ¶æ„ã€‚</p>
<ul>
<li><strong>ent çš„é€‚ç”¨åœºæ™¯ä¸ä¼˜åŠ¿</strong>ï¼šæ›´é€‚åˆä¸šåŠ¡é€»è¾‘å¤æ‚ã€å…³è”æŸ¥è¯¢å¯†é›†çš„åœºæ™¯ã€‚ä½œä¸ºåŸºäºä»£ç ç”Ÿæˆçš„å¼ºç±»å‹ ORMï¼Œå®ƒåŸç”Ÿæ”¯æŒ GraphQL åè®®ï¼Œèƒ½é«˜æ•ˆå¤„ç†å¤šè¡¨æ·±åº¦å…³è”æŸ¥è¯¢ï¼ˆä¾‹å¦‚ â€œç”¨æˆ· - è§’è‰² - ç§Ÿæˆ· - éƒ¨é—¨â€ çš„å››çº§å…³è”æ•°æ®æ‹‰å–ï¼‰ï¼Œä¸”ç¼–è¯‘æœŸç±»å‹æ ¡éªŒå¯å‡å°‘æ•°æ®æ“ä½œé”™è¯¯ï¼ŒæŸ¥è¯¢æ€§èƒ½ä¹Ÿä¼˜äºä¼ ç»Ÿåå°„å‹ ORMã€‚å½“é¡¹ç›®éœ€è¦æ„å»ºç²¾ç»†åŒ–çš„æ•°æ®æƒé™é€»è¾‘ï¼ˆå¦‚ â€œæŒ‰ç§Ÿæˆ· + éƒ¨é—¨ + è§’è‰²ä¸‰é‡è¿‡æ»¤æ•°æ®â€ï¼‰æ—¶ï¼Œent çš„é“¾å¼æŸ¥è¯¢è¯­æ³•èƒ½è®©æ¡ä»¶æ‹¼æ¥æ›´æ¸…æ™°ã€å¯ç»´æŠ¤æ€§æ›´å¼ºã€‚</li>
<li><strong>gorm çš„é€‚ç”¨åœºæ™¯ä¸ä¼˜åŠ¿</strong>ï¼šæ›´é€‚åˆç®€å• CRUD æ“ä½œã€å¤šæ•°æ®åº“å…¼å®¹éœ€æ±‚æ˜ç¡®çš„åœºæ™¯ã€‚å®ƒå¯¹åŸºç¡€å¢åˆ æ”¹æŸ¥æ¥å£å°è£…æ›´ç®€æ´ï¼Œå¼€å‘è€…æ— éœ€å­¦ä¹ æ–°çš„è¯­æ³•å³å¯å¿«é€Ÿä¸Šæ‰‹ï¼›åŒæ—¶å…¼å®¹ MySQLã€PostgreSQLã€TiDBã€SQL Server ç­‰å›½å†…å¤–ä¸»æµæ•°æ®åº“ï¼Œå½“é¡¹ç›®éœ€è¦é€‚é…ä¸åŒå®¢æˆ·çš„æ•°æ®åº“ç¯å¢ƒï¼ˆå¦‚å›½å†…ä¼ä¸šå¸¸ç”¨çš„ MySQLã€æµ·å¤–å®¢æˆ·åå¥½çš„ PostgreSQLï¼‰æ—¶ï¼Œgorm çš„æ•°æ®åº“é©±åŠ¨ç”Ÿæ€èƒ½é™ä½é€‚é…æˆæœ¬ã€‚</li>
</ul>
<p>è¿™ç§ â€œå¯æ›¿æ¢â€ è®¾è®¡çš„æ ¸å¿ƒä»·å€¼åœ¨äº<strong>å¹³è¡¡å¼€å‘æ•ˆç‡ä¸ä¸šåŠ¡å¤æ‚åº¦</strong>ï¼šä¾‹å¦‚é¡¹ç›®åˆæœŸæ­å»º â€œç§Ÿæˆ·åŸºç¡€ä¿¡æ¯ç®¡ç†â€ æ¨¡å—æ—¶ï¼Œå¯é€‰ç”¨ gorm å¿«é€Ÿå®ç°ç§Ÿæˆ·åˆ›å»ºã€æŸ¥è¯¢ã€ç¦ç”¨ç­‰ç®€å•æ“ä½œï¼›å½“ä¸šåŠ¡æ‰©å±•åˆ° â€œç§Ÿæˆ· - ç”¨æˆ· - æƒé™çš„å…³è”ç»Ÿè®¡åˆ†æâ€ æ—¶ï¼Œå¯æ— ç¼åˆ‡æ¢ä¸º ent å¤„ç†å¤æ‚æŸ¥è¯¢é€»è¾‘ â€”â€” ä¸¤è€…å…±äº«ç»Ÿä¸€çš„æ•°æ®æ¨¡å‹å®šä¹‰ï¼Œæ— éœ€é‡æ„æ ¸å¿ƒä»£ç ï¼Œæ—¢æ»¡è¶³ä¸åŒé˜¶æ®µçš„éœ€æ±‚ï¼Œåˆé¿å…äº†å•ä¸€ ORM å·¥å…·çš„å±€é™æ€§ã€‚</p>
<h4 data-id="heading-5">4. å·¥ç¨‹åŒ–ï¼šwire ä¾èµ–æ³¨å…¥çš„ â€œè§£è€¦ä»·å€¼â€</h4>
<p>Admin ç³»ç»ŸåŠŸèƒ½è¶Šå¤æ‚ï¼Œæ¨¡å—é—´çš„ä¾èµ–å…³ç³»è¶Šå®¹æ˜“æ··ä¹±ã€‚go-kratos-admin å¼•å…¥ wire å®ç°ä¾èµ–æ³¨å…¥ï¼š</p>
<ul>
<li><strong>ä»£ç è§£è€¦</strong>ï¼šå°† â€œå¯¹è±¡åˆ›å»ºâ€ ä¸ â€œä¸šåŠ¡é€»è¾‘â€ åˆ†ç¦»ï¼Œæ¯”å¦‚æƒé™æ ¡éªŒæ¨¡å—æ— éœ€å…³å¿ƒæ•°æ®åº“è¿æ¥çš„åˆ›å»ºæ–¹å¼ï¼›</li>
<li><strong>å¯æµ‹è¯•æ€§æå‡</strong>ï¼šå•å…ƒæµ‹è¯•æ—¶å¯å¿«é€Ÿæ›¿æ¢ä¾èµ–ï¼ˆå¦‚ç”¨ mock æ•°æ®åº“æ›¿ä»£çœŸå®æ•°æ®åº“ï¼‰ï¼›</li>
<li><strong>æ‰©å±•æ€§å¢å¼º</strong>ï¼šæ–°å¢åŠŸèƒ½æ¨¡å—æ—¶ï¼Œæ— éœ€ä¿®æ”¹åŸæœ‰ä»£ç ï¼Œåªéœ€é…ç½®ä¾èµ–å…³ç³»å³å¯ã€‚</li>
</ul>
<p>å¯¹å›¢é˜Ÿåä½œè€Œè¨€ï¼Œwire è®©ä»£ç ç»“æ„æ›´æ¸…æ™°ï¼Œæ–°äººä¸Šæ‰‹æˆæœ¬æ›´ä½ã€‚</p>
<h3 data-id="heading-6">äºŒã€å‰ç«¯æŠ€æœ¯æ ˆï¼šVue3 ç”Ÿæ€çš„ â€œé«˜æ•ˆé€‚é…â€</h3>
<p>å‰ç«¯æ˜¯ Admin ç³»ç»Ÿçš„ â€œé—¨é¢â€ï¼Œéœ€è¦å…¼é¡¾<strong>äº¤äº’ä½“éªŒ</strong>ä¸<strong>å¼€å‘æ•ˆç‡</strong>ã€‚go-kratos-admin é€‰æ‹© Vue3 + TypeScript + Antdv + Vben Admin çš„ç»„åˆï¼Œæ­£æ˜¯ä¸ºäº†åŒ¹é…ä¼ä¸šçº§ç®¡ç†ç³»ç»Ÿçš„ UI/UX éœ€æ±‚ã€‚</p>
<h4 data-id="heading-7">1. æ ¸å¿ƒæ¡†æ¶ï¼šVue3 ä¸ºä½•ä¼˜äº Vue2/Reactï¼Ÿ</h4>
<p>Admin ç³»ç»Ÿä»¥è¡¨å•ã€è¡¨æ ¼ã€å¼¹çª—ç­‰ â€œç»„ä»¶åŒ–åœºæ™¯â€ ä¸ºä¸»ï¼ŒVue3 çš„ç‰¹æ€§å®Œç¾é€‚é…è¿™ç±»éœ€æ±‚ï¼š</p>
<ul>
<li><strong>ç»„åˆå¼ APIï¼ˆComposition APIï¼‰</strong>ï¼šå¤æ‚ç»„ä»¶ï¼ˆå¦‚å¤šæ¡ä»¶æŸ¥è¯¢è¡¨å•ï¼‰çš„é€»è¾‘å¯æ‹†åˆ†å¤ç”¨ï¼Œæ¯” Vue2 çš„ Options API æ›´æ˜“ç»´æŠ¤ï¼›</li>
<li><strong>æ€§èƒ½æå‡</strong>ï¼šVue3 çš„å“åº”å¼ç³»ç»ŸåŸºäº Proxy é‡æ„ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“å¼€é”€ï¼Œè¡¨æ ¼æ»šåŠ¨ã€å¤§æ•°æ®æ¸²æŸ“æ›´æµç•…ï¼›</li>
<li><strong>TypeScript å‹å¥½</strong>ï¼šåŸç”Ÿæ”¯æŒ TSï¼Œç±»å‹æç¤ºèƒ½å¤§å¹…é™ä½å‰ç«¯å¼€å‘çš„ Bug ç‡ï¼ˆæ¯”å¦‚æƒé™æŒ‰é’®çš„æ˜¾éšé€»è¾‘ï¼‰ã€‚</li>
</ul>
<p>å¯¹æ¯” Reactï¼ŒVue3 çš„ â€œæ¸è¿›å¼æ¡†æ¶â€ ç‰¹æ€§æ›´é€‚åˆ Admin ç³»ç»Ÿï¼šå¼€å‘è€…æ— éœ€å…¨ç›˜æ¥å— React çš„å‡½æ•°å¼ç†å¿µï¼Œå¯æŒ‰éœ€å¼•å…¥åŠŸèƒ½ï¼Œå­¦ä¹ æˆæœ¬æ›´ä½ã€‚</p>
<h4 data-id="heading-8">2. UI ç»„ä»¶åº“ï¼šAntdv + Vben Admin çš„ â€œä¼ä¸šçº§é€‚é…â€</h4>
<p>Admin ç³»ç»Ÿéœ€è¦å¤§é‡æˆç†Ÿçš„ UI ç»„ä»¶ï¼ˆå¦‚é«˜çº§è¡¨æ ¼ã€æƒé™æ ‘ã€å¤šç§Ÿæˆ·è¡¨å•ï¼‰ï¼Œé‡å¤é€ è½®å­ä¼šä¸¥é‡æ‹–æ…¢å¼€å‘è¿›åº¦ï¼š</p>
<ul>
<li><strong>Antdvï¼ˆAnt Design Vueï¼‰</strong>ï¼šé˜¿é‡Œå¼€æºçš„ä¼ä¸šçº§ç»„ä»¶åº“ï¼Œè¦†ç›– Admin ç³»ç»Ÿæ‰€éœ€çš„ 90% ç»„ä»¶ï¼ˆå¦‚ Tableã€Formã€Modalã€Treeï¼‰ï¼Œè®¾è®¡é£æ ¼ç¬¦åˆä¼ä¸šå®¡ç¾ï¼›</li>
<li><strong>Vben Admin</strong>ï¼šåŸºäº Vue3 + Antdv çš„å¼€ç®±å³ç”¨ Admin æ¨¡æ¿ï¼Œå†…ç½®äº†æƒé™è·¯ç”±ã€ä¸»é¢˜å®šåˆ¶ã€å›½é™…åŒ–ç­‰åŠŸèƒ½ï¼Œgo-kratos-admin ç›´æ¥å¤ç”¨å…¶åŸºç¡€æ¶æ„ï¼Œé¿å…ä»é›¶æ­å»ºå‰ç«¯æ¡†æ¶ã€‚</li>
</ul>
<p>è¿™ç§ç»„åˆè®©å‰ç«¯å¼€å‘èšç„¦äº â€œä¸šåŠ¡é€»è¾‘â€ è€Œé â€œåŸºç¡€ç»„ä»¶å¼€å‘â€â€”â€” æ¯”å¦‚å®ç° â€œå¤šç§Ÿæˆ·åˆ—è¡¨çš„é«˜çº§æœç´¢ + æ‰¹é‡æ“ä½œâ€ï¼Œåªéœ€åŸºäº Vben Admin çš„è¡¨æ ¼ç»„ä»¶äºŒæ¬¡å°è£…å³å¯ã€‚</p>
<h4 data-id="heading-9">3. ç±»å‹å®‰å…¨ï¼šTypeScript çš„ â€œä¿é©¾æŠ¤èˆªâ€</h4>
<p>Admin ç³»ç»Ÿæ¶‰åŠå¤§é‡æƒé™ã€æ•°æ®æ ¼å¼çš„æ ¡éªŒï¼ŒTypeScript çš„å¼•å…¥è§£å†³äº†å‰ç«¯çš„ â€œç±»å‹æ··ä¹±â€ é—®é¢˜ï¼š</p>
<ul>
<li><strong>æ¥å£ç±»å‹çº¦æŸ</strong>ï¼šå‰åç«¯æ¥å£é€šè¿‡ TS å®šä¹‰ç±»å‹ï¼Œé¿å…å› å‚æ•°æ ¼å¼é”™è¯¯å¯¼è‡´çš„ Bugï¼›</li>
<li><strong>ç»„ä»¶ props æ ¡éªŒ</strong>ï¼šæƒé™æŒ‰é’®ã€ç§Ÿæˆ·è¡¨å•ç­‰ç»„ä»¶çš„ props ç±»å‹æ˜ç¡®ï¼Œå›¢é˜Ÿåä½œæ—¶æ›´æ˜“ç†è§£ï¼›</li>
<li><strong>é‡æ„å®‰å…¨æ€§</strong>ï¼šä¿®æ”¹æƒé™é€»è¾‘æ—¶ï¼ŒTS ä¼šè‡ªåŠ¨æç¤ºç±»å‹é”™è¯¯ï¼Œé™ä½é‡æ„é£é™©ã€‚</li>
</ul>
<p>å¯¹ä¼ä¸šçº§é¡¹ç›®è€Œè¨€ï¼ŒTypeScript å¸¦æ¥çš„ â€œå¯ç»´æŠ¤æ€§æå‡â€ è¿œå¤§äºçŸ­æœŸçš„å¼€å‘æˆæœ¬å¢åŠ ã€‚</p>
<h3 data-id="heading-10">ä¸‰ã€Golang+Vue3 ç»„åˆï¼šä¼ä¸šçº§ Admin ç³»ç»Ÿçš„ â€œæœ€ä¼˜è§£â€</h3>
<p>åç«¯ Golang ç”Ÿæ€çš„ â€œé«˜æ€§èƒ½ + å¯æ‰©å±•â€ï¼Œä¸å‰ç«¯ Vue3 ç”Ÿæ€çš„ â€œé«˜æ•ˆå¼€å‘ + ä¼ä¸šçº§ç»„ä»¶â€ å½¢æˆäº’è¡¥ï¼Œæ°å¥½å‘½ä¸­ Admin ç³»ç»Ÿçš„æ ¸å¿ƒéœ€æ±‚ï¼š</p>
<h4 data-id="heading-11">1. æ€§èƒ½ä¸ä½“éªŒçš„å¹³è¡¡</h4>
<ul>
<li>åç«¯ Golang å¤„ç†é«˜å¹¶å‘è¯·æ±‚ï¼ˆå¦‚æ‰¹é‡æ•°æ®å¯¼å‡ºã€é«˜é¢‘æƒé™æ ¡éªŒï¼‰æ—¶ï¼Œå“åº”é€Ÿåº¦æ¯”ä¼ ç»Ÿ Node.js åç«¯å¿« 3-5 å€ï¼›</li>
<li>å‰ç«¯ Vue3 çš„è½»é‡åŒ–æ¸²æŸ“ï¼Œè®©è¡¨æ ¼æ»šåŠ¨ã€å¼¹çª—åˆ‡æ¢ç­‰äº¤äº’æ›´æµç•…ï¼Œç”¨æˆ·ä½“éªŒä¼˜äº Vue2 æˆ– React æ—§ç‰ˆé¡¹ç›®ã€‚</li>
</ul>
<h4 data-id="heading-12">2. å¼€å‘æ•ˆç‡ä¸æ‰©å±•æ€§çš„å¹³è¡¡</h4>
<ul>
<li>åç«¯ go-kratos + ent çš„ä»£ç ç”Ÿæˆèƒ½åŠ›ï¼Œå‰ç«¯ Vben Admin çš„æ¨¡æ¿å¤ç”¨ï¼Œè®©é¡¹ç›®èƒ½å¿«é€Ÿæ­å»ºæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚å¤šç§Ÿæˆ·ç®¡ç†ã€æƒé™ä½“ç³»ï¼‰ï¼›</li>
<li>å¾®æœåŠ¡æ¶æ„ï¼ˆkratosï¼‰+ ç»„ä»¶åŒ–å¼€å‘ï¼ˆVue3ï¼‰ï¼Œè®©é¡¹ç›®èƒ½éšä¼ä¸šè§„æ¨¡å¢é•¿å¹³æ»‘æ‰©å±• â€”â€” æ¯”å¦‚ä»å•ä½“æ¶æ„æ‹†åˆ†ä¸º â€œæƒé™æœåŠ¡ + ç§Ÿæˆ·æœåŠ¡ + ä¸šåŠ¡æœåŠ¡â€ã€‚</li>
</ul>
<h4 data-id="heading-13">3. ä¼ä¸šçº§éœ€æ±‚çš„ç²¾å‡†åŒ¹é…</h4>
<ul>
<li>å¤šç§Ÿæˆ·éš”ç¦»ï¼šGolang çš„ goroutine å¹¶å‘å¤„ç†ç§Ÿæˆ·è¯·æ±‚ï¼ŒVue3 çš„ç»„ä»¶åŒ–æ¸²æŸ“ç§Ÿæˆ·ä¸“å±ç•Œé¢ï¼›</li>
<li>æƒé™æ§åˆ¶ï¼šåç«¯ kratos çš„ä¸­é—´ä»¶æ ¡éªŒæ¥å£æƒé™ï¼Œå‰ç«¯ Vben Admin çš„è·¯ç”±å®ˆå«æ§åˆ¶é¡µé¢è®¿é—®ï¼›</li>
<li>è·¨å¹³å°éƒ¨ç½²ï¼šGolang ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶æ— éœ€ä¾èµ–è¿è¡Œæ—¶ï¼ŒVue3 æ‰“åŒ…åçš„é™æ€èµ„æºå¯éƒ¨ç½²åœ¨ä»»æ„æœåŠ¡å™¨ï¼Œé€‚é…ä¼ä¸šçš„ç§æœ‰åŒ–éƒ¨ç½²éœ€æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-14">å››ã€æ€»ç»“ï¼šæŠ€æœ¯æ ˆé€‰å‹çš„åº•å±‚é€»è¾‘</h3>
<p>go-kratos-admin é€‰æ‹© Golang+Vue3 ç»„åˆï¼Œæœ¬è´¨æ˜¯ <strong>â€œéœ€æ±‚é©±åŠ¨é€‰å‹â€</strong>ï¼š</p>
<ul>
<li>ä¼ä¸šçº§ Admin ç³»ç»Ÿéœ€è¦ â€œé«˜æ€§èƒ½ã€æ˜“æ‰©å±•ã€ä½æˆæœ¬ç»´æŠ¤â€ï¼ŒGolang ç”Ÿæ€å®Œç¾æ»¡è¶³åç«¯éœ€æ±‚ï¼›</li>
<li>å‰ç«¯éœ€è¦ â€œé«˜æ•ˆå¼€å‘ã€ç»„ä»¶ä¸°å¯Œã€äº¤äº’æµç•…â€ï¼ŒVue3 ç”Ÿæ€æ°å¥½é€‚é…è¿™äº›åœºæ™¯ã€‚</li>
</ul>
<p>è¿™å¥—æŠ€æœ¯æ ˆæ—¢ä¸æ˜¯ â€œè¿½æ–°â€ï¼Œä¹Ÿä¸æ˜¯ â€œä¿å®ˆâ€â€”â€” è€Œæ˜¯åœ¨ â€œæ»¡è¶³éœ€æ±‚â€ ä¸ â€œæŠ€æœ¯æˆç†Ÿåº¦â€ ä¹‹é—´æ‰¾åˆ°çš„æœ€ä½³å¹³è¡¡ç‚¹ã€‚å¯¹å¼€å‘è€…è€Œè¨€ï¼ŒåŸºäºè¿™å¥—æŠ€æœ¯æ ˆæ„å»º Admin ç³»ç»Ÿï¼Œæ—¢èƒ½å¿«é€Ÿè½åœ°ä¸šåŠ¡ï¼Œåˆèƒ½ä¸ºæœªæ¥çš„æ‰©å±•é¢„ç•™ç©ºé—´ï¼›å¯¹ä¼ä¸šè€Œè¨€ï¼Œè¿™å¥—ç»„åˆçš„è¿ç»´æˆæœ¬ä½ã€ç¨³å®šæ€§é«˜ï¼Œæ˜¯æ”¯æ’‘é•¿æœŸå‘å±•çš„å¯é é€‰æ‹©ã€‚</p>
<p>å¦‚æœä½ æ­£åœ¨æ­å»ºä¼ä¸šçº§ Admin ç³»ç»Ÿï¼Œgo-kratos-admin çš„æŠ€æœ¯æ ˆé€‰å‹æ€è·¯ï¼Œæˆ–è®¸èƒ½ä¸ºä½ æä¾›ä¸€ä»½æœ‰ä»·å€¼çš„å‚è€ƒã€‚</p>
<h3 data-id="heading-15">é¡¹ç›®ä»£ç </h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Ftx7do%2Fgo-kratos-admin" target="_blank" title="https://gitee.com/tx7do/go-kratos-admin" ref="nofollow noopener noreferrer">kratos-admin Gitee</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-kratos-admin" target="_blank" title="https://github.com/tx7do/go-kratos-admin" ref="nofollow noopener noreferrer">kratos-admin Github</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576608733612425242</link>    <guid>https://juejin.cn/post/7576608733612425242</guid>    <pubDate>2025-11-26T07:15:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576608733612425242" data-draft-id="7576236480114475058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-26T07:15:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‡³ç®€ç®€"/> <meta itemprop="url" content="https://juejin.cn/user/4212984286819384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ç§æ–°HTMLé¡µé¢è½¬æ¢æˆ PDF æŠ€æœ¯æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4212984286819384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‡³ç®€ç®€
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T07:15:49.000Z" title="Wed Nov 26 2025 07:15:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    115
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<blockquote>
<p>æœ¬æ–‡å°†æ·±å…¥è®²è§£å¦‚ä½•ä½¿ç”¨ snapdom å’Œ jsPDF å®ç°é«˜è´¨é‡çš„ HTML è½¬ PDF åŠŸèƒ½ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„æ¶ˆæ¯åˆ—è¡¨å¯¼å‡ºæ¡ˆä¾‹ï¼Œå¸¦ä½ æŒæ¡è¿™å¥—æ–¹æ¡ˆçš„æ ¸å¿ƒæŠ€æœ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆ HTML è½¬ PDF å¦‚æ­¤é‡è¦ï¼Ÿ</h3>
<p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œ<strong>HTML è½¬ PDF</strong> æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚åœºæ™¯ï¼š</p>
<ol>
<li><strong>å®¢æœç³»ç»Ÿ</strong>ï¼šå¯¼å‡ºèŠå¤©è®°å½•ç”¨äºå­˜æ¡£æˆ–æŠ•è¯‰å¤„ç†</li>
<li><strong>ç”µå•†å¹³å°</strong>ï¼šç”Ÿæˆè®¢å•è¯¦æƒ…ã€å‘ç¥¨ç­‰ PDF æ–‡æ¡£</li>
<li><strong>æŠ¥è¡¨ç³»ç»Ÿ</strong>ï¼šå°†å¯è§†åŒ–å›¾è¡¨å’Œæ•°æ®å¯¼å‡ºä¸º PDF æŠ¥å‘Š</li>
<li><strong>åœ¨çº¿æ–‡æ¡£</strong>ï¼šæ”¯æŒç”¨æˆ·å°†ç½‘é¡µå†…å®¹ç¦»çº¿ä¿å­˜</li>
<li><strong>åˆåŒç­¾ç½²</strong>ï¼šç”ŸæˆåˆåŒ PDF ç”¨äºç”µå­ç­¾å</li>
</ol>
<p>ç„¶è€Œï¼Œå®ç°ä¸€ä¸ª<strong>é«˜è´¨é‡</strong>çš„ HTML è½¬ PDF åŠŸèƒ½å¹¶ä¸ç®€å•ã€‚æˆ‘ä»¬é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>





























<table><thead><tr><th>æŒ‘æˆ˜</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>æ ·å¼è¿˜åŸ</strong></td><td>CSS æ ·å¼ã€å­—ä½“ã€æ¸å˜ç­‰èƒ½å¦å®Œç¾å‘ˆç°ï¼Ÿ</td></tr><tr><td><strong>åˆ†é¡µå¤„ç†</strong></td><td>é•¿å†…å®¹å¦‚ä½•æ™ºèƒ½åˆ†é¡µï¼Œé¿å…å†…å®¹è¢«æˆªæ–­ï¼Ÿ</td></tr><tr><td><strong>æ¸…æ™°åº¦</strong></td><td>å¯¼å‡ºçš„ PDF æ˜¯å¦è¶³å¤Ÿæ¸…æ™°ï¼Œå°¤å…¶åœ¨æ‰“å°æ—¶ï¼Ÿ</td></tr><tr><td><strong>æ€§èƒ½</strong></td><td>å¤§é‡å†…å®¹ï¼ˆå¦‚ 1000 æ¡æ¶ˆæ¯ï¼‰èƒ½å¦å¿«é€Ÿå¯¼å‡ºï¼Ÿ</td></tr><tr><td><strong>å…¼å®¹æ€§</strong></td><td>ä¸åŒæµè§ˆå™¨è¡¨ç°æ˜¯å¦ä¸€è‡´ï¼Ÿ</td></tr></tbody></table>
<p>ä¼ ç»Ÿçš„ <code>html2canvas</code> + <code>jsPDF</code> æ–¹æ¡ˆè™½ç„¶èƒ½ç”¨ï¼Œä½†åœ¨<strong>æ ·å¼è¿˜åŸåº¦</strong>å’Œ<strong>æˆªå›¾è´¨é‡</strong>ä¸Šå­˜åœ¨æ˜æ˜¾ä¸è¶³ã€‚</p>
<p>ä»Šå¤©ç¬”è€…ä»‹ç»ä¸€å¥—æ–°è§£å†³æ–¹æ¡ˆï¼š<strong>snapdom + jsPDF</strong>ã€‚</p>
<h2 data-id="heading-2">snapdom å’Œ jsPDF åŸºç¡€ç†è®ºçŸ¥è¯†</h2>
<h3 data-id="heading-3">snapdom æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzumerlab%2Fsnapdom" target="_blank" title="https://github.com/zumerlab/snapdom" ref="nofollow noopener noreferrer">SnapDOM</a> æ˜¯ä¸€ä¸ªç°ä»£åŒ–çš„ DOM æˆªå›¾åº“ï¼Œå®ƒçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">DOM Element â†’ <span class="hljs-selector-tag">Canvas</span>/PNG/SVG
</code></pre>
<h4 data-id="heading-4">æ ¸å¿ƒä¼˜åŠ¿</h4>
<ol>
<li><strong>é«˜ä¿çœŸæˆªå›¾</strong>ï¼šå®Œç¾è¿˜åŸ CSS æ ·å¼ï¼ŒåŒ…æ‹¬ flexboxã€gridã€æ¸å˜ã€é˜´å½±ç­‰</li>
<li><strong>å¤šç§è¾“å‡ºæ ¼å¼</strong>ï¼šæ”¯æŒ Canvasã€PNGã€SVG ç­‰å¤šç§æ ¼å¼</li>
<li><strong>é«˜æ¸…ç¼©æ”¾</strong>ï¼šé€šè¿‡ <code>scale</code> å‚æ•°å®ç° 2x/3x é«˜æ¸…æˆªå›¾</li>
<li><strong>ä½“ç§¯å°å·§</strong>ï¼šå‹ç¼©åä»… ~20KB</li>
</ol>
<h4 data-id="heading-5">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// è·å– DOM å…ƒç´ </span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.my-element'</span>);

<span class="hljs-comment">// æˆªå›¾</span>
<span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,      <span class="hljs-comment">// 2å€æ¸…æ™°åº¦</span>
  <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>  <span class="hljs-comment">// PNG è´¨é‡</span>
});

<span class="hljs-comment">// è¾“å‡ºæ–¹å¼</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toCanvas</span>();  <span class="hljs-comment">// Canvas å…ƒç´ </span>
<span class="hljs-keyword">const</span> imgEl = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>();      <span class="hljs-comment">// &lt;img&gt; å…ƒç´ ï¼Œsrc ä¸º data URL</span>
<span class="hljs-keyword">const</span> svgStr = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toSvg</span>();     <span class="hljs-comment">// SVG å­—ç¬¦ä¸²</span>
</code></pre>
<h4 data-id="heading-6">å…³é”®å‚æ•°è¯´æ˜</h4>























<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>scale</code></td><td>number</td><td>1</td><td>ç¼©æ”¾å€æ•°ï¼Œ2 è¡¨ç¤º 2 å€æ¸…æ™°åº¦</td></tr><tr><td><code>quality</code></td><td>number</td><td>0.92</td><td>å›¾ç‰‡è´¨é‡ï¼ŒèŒƒå›´ 0-1</td></tr></tbody></table>
<p>æ›´å¤šè¯¦ç»†å†…å®¹è¯·çœ‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fsnapdom.dev%2F%25E5%25AE%2598%25E6%2596%25B9%25E6%2596%2587%25E6%25A1%25A3" target="_blank" title="https://snapdom.dev/%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3" ref="nofollow noopener noreferrer">snapdom.dev/å®˜æ–¹æ–‡æ¡£</a></p>
<h3 data-id="heading-7">jsPDF æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fparallax%2FjsPDF" target="_blank" title="https://github.com/parallax/jsPDF" ref="nofollow noopener noreferrer">jsPDF</a> æ˜¯æœ€æµè¡Œçš„ JavaScript PDF ç”Ÿæˆåº“ï¼Œæ”¯æŒåœ¨æµè§ˆå™¨ç«¯ç›´æ¥åˆ›å»º PDF æ–‡ä»¶ã€‚</p>
<h4 data-id="heading-8">æ ¸å¿ƒç‰¹ç‚¹</h4>
<ol>
<li><strong>çº¯å‰ç«¯æ–¹æ¡ˆ</strong>ï¼šæ— éœ€æœåŠ¡ç«¯ï¼Œæµè§ˆå™¨ç›´æ¥ç”Ÿæˆ</li>
<li><strong>åŠŸèƒ½ä¸°å¯Œ</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾ç‰‡ã€è¡¨æ ¼ã€é“¾æ¥ç­‰</li>
<li><strong>å¤šç§å°ºå¯¸</strong>ï¼šA4ã€Letter ç­‰æ ‡å‡†çº¸å¼ æ ¼å¼</li>
<li><strong>æ’ä»¶ç”Ÿæ€</strong>ï¼šæ”¯æŒ AutoTable ç­‰æ‰©å±•æ’ä»¶</li>
</ol>
<h4 data-id="heading-9">åŸºç¡€ç”¨æ³•</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { jsPDF } <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>;

<span class="hljs-comment">// åˆ›å»º PDF å®ä¾‹</span>
<span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>({
  <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span>,  <span class="hljs-comment">// çºµå‘</span>
  <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>,               <span class="hljs-comment">// å•ä½ï¼šæ¯«ç±³</span>
  <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>,             <span class="hljs-comment">// A4 çº¸å¼ </span>
  <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>            <span class="hljs-comment">// å¯ç”¨å‹ç¼©</span>
});

<span class="hljs-comment">// æ·»åŠ å›¾ç‰‡</span>
pdf.<span class="hljs-title function_">addImage</span>(
  imageDataUrl,  <span class="hljs-comment">// Base64 å›¾ç‰‡æ•°æ®</span>
  <span class="hljs-string">'PNG'</span>,         <span class="hljs-comment">// å›¾ç‰‡æ ¼å¼</span>
  <span class="hljs-number">10</span>,            <span class="hljs-comment">// X åæ ‡ï¼ˆmmï¼‰</span>
  <span class="hljs-number">10</span>,            <span class="hljs-comment">// Y åæ ‡ï¼ˆmmï¼‰</span>
  <span class="hljs-number">190</span>,           <span class="hljs-comment">// å®½åº¦ï¼ˆmmï¼‰</span>
  <span class="hljs-number">100</span>            <span class="hljs-comment">// é«˜åº¦ï¼ˆmmï¼‰</span>
);

<span class="hljs-comment">// æ·»åŠ æ–°é¡µé¢</span>
pdf.<span class="hljs-title function_">addPage</span>();

<span class="hljs-comment">// ä¿å­˜æ–‡ä»¶</span>
pdf.<span class="hljs-title function_">save</span>(<span class="hljs-string">'output.pdf'</span>);
</code></pre>
<h4 data-id="heading-10">A4 å°ºå¯¸å¸¸é‡</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// A4 æ ‡å‡†å°ºå¯¸ï¼ˆå•ä½ï¼šmmï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_WIDTH_MM</span> = <span class="hljs-number">210</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_HEIGHT_MM</span> = <span class="hljs-number">297</span>;

<span class="hljs-comment">// é¡µé¢è¾¹è·</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MARGIN_MM</span> = <span class="hljs-number">10</span>;

<span class="hljs-comment">// å¯ç”¨å†…å®¹åŒºåŸŸ</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTENT_WIDTH_MM</span> = <span class="hljs-number">190</span>;   <span class="hljs-comment">// 210 - 10*2</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONTENT_HEIGHT_MM</span> = <span class="hljs-number">277</span>;  <span class="hljs-comment">// 297 - 10*2</span>
</code></pre>
<h3 data-id="heading-11">snapdom + jsPDF ç»„åˆçš„ä¼˜åŠ¿</h3>
<h2 data-id="heading-12"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6dfc5710dc44cb683e902ccef1c5c5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iez566A566A:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818465&amp;x-signature=BWGSg2sI1NPQ%2FnYMd6a7vmPLta0%3D" alt="image.png" loading="lazy"/></h2>
<h2 data-id="heading-13">æ¡ˆä¾‹è®²è¿°</h2>
<p>ç¬”è€…å†™ä¸€ä¸ªIMäº§å“ä¸­ MessageList æ¶ˆæ¯å¯¼å‡ºDEMOã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„<strong>å®¢æœæ¶ˆæ¯åˆ—è¡¨å¯¼å‡º</strong>æ¡ˆä¾‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨ snapdom + jsPDF å®ç° HTML è½¬ PDFã€‚</p>
<h3 data-id="heading-14">é¡¹ç›®ç»“æ„</h3>
<pre><code class="hljs language-bash" lang="bash">src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MessageList.tsx      <span class="hljs-comment"># æ¶ˆæ¯åˆ—è¡¨ç»„ä»¶</span>
â”‚   â””â”€â”€ MessageList.css      <span class="hljs-comment"># æ¶ˆæ¯åˆ—è¡¨æ ·å¼</span>
â”œâ”€â”€ services/
â”‚   â””â”€â”€ messageExportService.ts  <span class="hljs-comment"># PDF å¯¼å‡ºæœåŠ¡ï¼ˆæ ¸å¿ƒï¼‰</span>
â””â”€â”€ App.tsx
</code></pre>
<h3 data-id="heading-15">æ ¸å¿ƒæµç¨‹</h3>
<p>æ•´ä¸ªå¯¼å‡ºè¿‡ç¨‹åˆ†ä¸º <strong>4 ä¸ªæ­¥éª¤</strong>ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/23cb91cd191a4466b508c3f7776510fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Iez566A566A:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764818465&amp;x-signature=LAFXGjzfD5n437Fjlx5sc5FY44g%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-16">Step 1ï¼šDOM æˆªå›¾ï¼ˆsnapdomï¼‰</h3>
<p>ç¬¬ä¸€æ­¥ï¼Œä½¿ç”¨ snapdom å°†æ•´ä¸ªæ¶ˆæ¯åˆ—è¡¨ DOM è½¬æ¢ä¸ºé«˜æ¸… PNG å›¾ç‰‡ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// messageExportService.ts</span>

<span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// å›¾ç‰‡è´¨é‡é…ç½®</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">IMAGE_QUALITY</span> = <span class="hljs-number">0.95</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">IMAGE_FORMAT</span> = <span class="hljs-string">'image/png'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>;

<span class="hljs-comment">/**
 * å°† DOM å…ƒç´ è½¬æ¢ä¸ºå›¾ç‰‡
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">captureElementToImage</span>(<span class="hljs-params">
  element: HTMLElement,
  quality: <span class="hljs-built_in">number</span> = IMAGE_QUALITY
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å¼€å§‹æˆªå›¾...'</span>);

  <span class="hljs-comment">// ä¿å­˜åŸå§‹æ ·å¼</span>
  <span class="hljs-keyword">const</span> originalOverflow = element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span>;
  <span class="hljs-keyword">const</span> originalHeight = element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span>;
  <span class="hljs-keyword">const</span> originalMaxHeight = element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span>;

  <span class="hljs-comment">// ä¸´æ—¶è®¾ç½®æ ·å¼ï¼Œç¡®ä¿å®Œæ•´æˆªå›¾</span>
  element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = <span class="hljs-string">'visible'</span>;
  element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = <span class="hljs-string">'auto'</span>;
  element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span> = <span class="hljs-string">'none'</span>;

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ ¸å¿ƒï¼šä½¿ç”¨ snapdom è¿›è¡Œæˆªå›¾</span>
    <span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
      <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,        <span class="hljs-comment">// 2å€æ¸…æ™°åº¦</span>
      <span class="hljs-attr">quality</span>: quality
    });

    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ toPng()</span>
    <span class="hljs-keyword">const</span> imgElement = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>();
    <span class="hljs-keyword">const</span> dataUrl = imgElement.<span class="hljs-property">src</span>;

    <span class="hljs-comment">// éªŒè¯æ•°æ®æœ‰æ•ˆæ€§</span>
    <span class="hljs-keyword">if</span> (!dataUrl || dataUrl.<span class="hljs-property">length</span> &lt; <span class="hljs-number">100</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'toPng è¿”å›æ— æ•ˆï¼Œå°è¯• toCanvas...'</span>);
      <span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toCanvas</span>();
      <span class="hljs-keyword">return</span> canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-variable constant_">IMAGE_FORMAT</span>, quality);
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆªå›¾æˆåŠŸï¼Œå¤§å°:'</span>, (dataUrl.<span class="hljs-property">length</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'KB'</span>);
    <span class="hljs-keyword">return</span> dataUrl;

  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-comment">// æ¢å¤åŸå§‹æ ·å¼</span>
    element.<span class="hljs-property">style</span>.<span class="hljs-property">overflow</span> = originalOverflow;
    element.<span class="hljs-property">style</span>.<span class="hljs-property">height</span> = originalHeight;
    element.<span class="hljs-property">style</span>.<span class="hljs-property">maxHeight</span> = originalMaxHeight;
  }
}
</code></pre>
<p><strong>å…³é”®ç‚¹è§£æ</strong>ï¼š</p>
<ol>
<li><strong>ä¸´æ—¶ä¿®æ”¹æ ·å¼</strong>ï¼šå°† <code>overflow</code>ã€<code>height</code>ã€<code>maxHeight</code> ä¸´æ—¶è®¾ç½®ä¸ºå¯è§çŠ¶æ€ï¼Œç¡®ä¿æˆªå–å®Œæ•´å†…å®¹</li>
<li><strong>scale: 2</strong>ï¼š2 å€ç¼©æ”¾æé«˜æ¸…æ™°åº¦ï¼Œæ‰“å°æ—¶æ•ˆæœæ›´ä½³</li>
<li><strong>é™çº§å¤„ç†</strong>ï¼š<code>toPng()</code> å¤±è´¥æ—¶è‡ªåŠ¨å›é€€åˆ° <code>toCanvas()</code></li>
<li><strong>æ ·å¼æ¢å¤</strong>ï¼šæˆªå›¾å®Œæˆåæ¢å¤åŸå§‹æ ·å¼</li>
</ol>
<h3 data-id="heading-17">Step 2ï¼šå›¾ç‰‡åˆ†é¡µï¼ˆCanvasï¼‰</h3>
<p>é•¿å›¾ç‰‡éœ€è¦æŒ‰ç…§ A4 é¡µé¢é«˜åº¦è¿›è¡Œåˆ†å‰²ï¼Œè¿™æ˜¯æœ€å¤æ‚çš„ä¸€æ­¥ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°ºå¯¸å¸¸é‡</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_WIDTH_MM</span> = <span class="hljs-number">210</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">A4_HEIGHT_MM</span> = <span class="hljs-number">297</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_MARGIN_MM</span> = <span class="hljs-number">10</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span> = <span class="hljs-variable constant_">A4_WIDTH_MM</span> - <span class="hljs-variable constant_">PDF_MARGIN_MM</span> * <span class="hljs-number">2</span>;   <span class="hljs-comment">// 190mm</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PDF_CONTENT_HEIGHT_MM</span> = <span class="hljs-variable constant_">A4_HEIGHT_MM</span> - <span class="hljs-variable constant_">PDF_MARGIN_MM</span> * <span class="hljs-number">2</span>; <span class="hljs-comment">// 277mm</span>

<span class="hljs-comment">// 1mm = 3.7795275590551 åƒç´ ï¼ˆ96 DPIï¼‰</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MM_TO_PX</span> = <span class="hljs-number">3.7795275590551</span>;

<span class="hljs-comment">// åˆ†é¡µåçš„å›¾ç‰‡æ•°æ®</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">PageImageData</span> {
  <span class="hljs-attr">dataUrl</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;
}

<span class="hljs-comment">/**
 * å°†é•¿å›¾ç‰‡åˆ†å‰²æˆå¤šä¸ª A4 é¡µé¢
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">splitImageIntoPages</span>(<span class="hljs-params">
  imageDataUrl: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">PageImageData</span>[]&gt; {

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> img = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Image</span>();
    img.<span class="hljs-property">crossOrigin</span> = <span class="hljs-string">'anonymous'</span>;

    img.<span class="hljs-property">onload</span> = <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">pages</span>: <span class="hljs-title class_">PageImageData</span>[] = [];
      <span class="hljs-keyword">const</span> originalWidth = img.<span class="hljs-property">width</span>;
      <span class="hljs-keyword">const</span> originalHeight = img.<span class="hljs-property">height</span>;

      <span class="hljs-comment">// å°† A4 å†…å®¹åŒºåŸŸè½¬æ¢ä¸ºåƒç´ ï¼ˆè€ƒè™‘ scale=2ï¼‰</span>
      <span class="hljs-keyword">const</span> pageContentHeightPx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(
        <span class="hljs-variable constant_">PDF_CONTENT_HEIGHT_MM</span> * <span class="hljs-variable constant_">MM_TO_PX</span> * <span class="hljs-number">2</span>  <span class="hljs-comment">// scale=2</span>
      );
      <span class="hljs-keyword">const</span> pageContentWidthPx = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(
        <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span> * <span class="hljs-variable constant_">MM_TO_PX</span> * <span class="hljs-number">2</span>
      );

      <span class="hljs-comment">// è®¡ç®—ç¼©æ”¾æ¯”ä¾‹ï¼ˆå›¾ç‰‡å®½åº¦é€‚é…é¡µé¢å®½åº¦ï¼‰</span>
      <span class="hljs-keyword">const</span> widthScale = pageContentWidthPx / originalWidth;
      <span class="hljs-keyword">const</span> scaledHeight = originalHeight * widthScale;

      <span class="hljs-comment">// è®¡ç®—æ€»é¡µæ•°</span>
      <span class="hljs-keyword">const</span> totalPages = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">ceil</span>(scaledHeight / pageContentHeightPx);

      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åŸå§‹å°ºå¯¸: <span class="hljs-subst">${originalWidth}</span>x<span class="hljs-subst">${originalHeight}</span>px`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¼©æ”¾åé«˜åº¦: <span class="hljs-subst">${scaledHeight}</span>px, æ€»é¡µæ•°: <span class="hljs-subst">${totalPages}</span>`</span>);

      <span class="hljs-comment">// é€é¡µè£å‰ª</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> pageIndex = <span class="hljs-number">0</span>; pageIndex &lt; totalPages; pageIndex++) {
        <span class="hljs-keyword">const</span> startY = pageIndex * pageContentHeightPx;
        <span class="hljs-keyword">const</span> endY = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(startY + pageContentHeightPx, scaledHeight);
        <span class="hljs-keyword">const</span> currentPageHeight = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(endY - startY);

        <span class="hljs-comment">// è®¡ç®—æºå›¾ç‰‡å¯¹åº”çš„åŒºåŸŸ</span>
        <span class="hljs-keyword">const</span> sourceStartY = startY / widthScale;
        <span class="hljs-keyword">const</span> sourceHeight = currentPageHeight / widthScale;

        <span class="hljs-comment">// åˆ›å»ºæ–° Canvas</span>
        <span class="hljs-keyword">const</span> canvas = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>);
        <span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)!;

        canvas.<span class="hljs-property">width</span> = pageContentWidthPx;
        canvas.<span class="hljs-property">height</span> = currentPageHeight;

        <span class="hljs-comment">// é«˜è´¨é‡æ¸²æŸ“</span>
        ctx.<span class="hljs-property">imageSmoothingEnabled</span> = <span class="hljs-literal">true</span>;
        ctx.<span class="hljs-property">imageSmoothingQuality</span> = <span class="hljs-string">'high'</span>;

        <span class="hljs-comment">// ç»˜åˆ¶å½“å‰é¡µå†…å®¹</span>
        ctx.<span class="hljs-title function_">drawImage</span>(
          img,
          <span class="hljs-number">0</span>, sourceStartY,           <span class="hljs-comment">// æºå›¾ç‰‡èµ·å§‹ä½ç½®</span>
          originalWidth, sourceHeight, <span class="hljs-comment">// æºå›¾ç‰‡å°ºå¯¸</span>
          <span class="hljs-number">0</span>, <span class="hljs-number">0</span>,                        <span class="hljs-comment">// ç›®æ ‡èµ·å§‹ä½ç½®</span>
          pageContentWidthPx, currentPageHeight <span class="hljs-comment">// ç›®æ ‡å°ºå¯¸</span>
        );

        <span class="hljs-comment">// è½¬æ¢ä¸º data URL</span>
        <span class="hljs-keyword">const</span> pageDataUrl = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-variable constant_">IMAGE_FORMAT</span>, <span class="hljs-variable constant_">IMAGE_QUALITY</span>);

        pages.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">dataUrl</span>: pageDataUrl,
          <span class="hljs-attr">width</span>: pageContentWidthPx,
          <span class="hljs-attr">height</span>: currentPageHeight
        });

        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¬¬ <span class="hljs-subst">${pageIndex + <span class="hljs-number">1</span>}</span>/<span class="hljs-subst">${totalPages}</span> é¡µå¤„ç†å®Œæˆ`</span>);
      }

      <span class="hljs-title function_">resolve</span>(pages);
    };

    img.<span class="hljs-property">onerror</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å›¾ç‰‡åŠ è½½å¤±è´¥'</span>));
    img.<span class="hljs-property">src</span> = imageDataUrl;
  });
}
</code></pre>
<p><strong>åˆ†é¡µç®—æ³•å›¾è§£</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸå§‹é•¿å›¾ (å‡è®¾ <span class="hljs-number">5000px</span> é«˜)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">1</span>       â”‚  â”‚ <span class="hljs-number">1046px</span> (<span class="hljs-number">277mm</span> Ã— <span class="hljs-number">3.78</span> Ã— <span class="hljs-number">2</span>)
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">2</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">3</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                   â”‚ â”€â”
â”‚      Page <span class="hljs-number">4</span>       â”‚  â”‚ <span class="hljs-number">1046px</span>
â”‚                   â”‚ â”€â”˜
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Page <span class="hljs-number">5</span>       â”‚ â”€â”€ å‰©ä½™ <span class="hljs-number">816px</span>
â”‚                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-18">Step 3ï¼šåˆ›å»º PDFï¼ˆjsPDFï¼‰</h3>
<p>å°†åˆ†é¡µåçš„å›¾ç‰‡é€ä¸€æ·»åŠ åˆ° PDF ä¸­ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { jsPDF } <span class="hljs-keyword">from</span> <span class="hljs-string">'jspdf'</span>;

<span class="hljs-comment">/**
 * ä»åˆ†é¡µå›¾ç‰‡åˆ›å»º PDF
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createPdfFromPages</span>(<span class="hljs-params">pages: PageImageData[]</span>): jsPDF {
  <span class="hljs-keyword">const</span> pdf = <span class="hljs-keyword">new</span> <span class="hljs-title function_">jsPDF</span>({
    <span class="hljs-attr">orientation</span>: <span class="hljs-string">'portrait'</span>,
    <span class="hljs-attr">unit</span>: <span class="hljs-string">'mm'</span>,
    <span class="hljs-attr">format</span>: <span class="hljs-string">'a4'</span>,
    <span class="hljs-attr">compress</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// å¯ç”¨å‹ç¼©ï¼Œå‡å°æ–‡ä»¶ä½“ç§¯</span>
  });

  <span class="hljs-keyword">if</span> (pages.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'æ²¡æœ‰å¯æ·»åŠ çš„é¡µé¢'</span>);
  }

  pages.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">page, index</span>) =&gt;</span> {
    <span class="hljs-comment">// ç¬¬ä¸€é¡µç›´æ¥ç”¨ï¼Œåç»­éœ€è¦ addPage</span>
    <span class="hljs-keyword">if</span> (index &gt; <span class="hljs-number">0</span>) {
      pdf.<span class="hljs-title function_">addPage</span>();
    }

    <span class="hljs-comment">// åƒç´ è½¬æ¯«ç±³ï¼ˆè€ƒè™‘ scale=2ï¼‰</span>
    <span class="hljs-keyword">const</span> scaleFactor = <span class="hljs-number">2</span>;
    <span class="hljs-keyword">const</span> pageHeightMm = page.<span class="hljs-property">height</span> / <span class="hljs-variable constant_">MM_TO_PX</span> / scaleFactor;

    <span class="hljs-comment">// å›¾ç‰‡é€‚é…å†…å®¹åŒºåŸŸå®½åº¦</span>
    <span class="hljs-keyword">const</span> finalWidth = <span class="hljs-variable constant_">PDF_CONTENT_WIDTH_MM</span>;  <span class="hljs-comment">// 190mm</span>
    <span class="hljs-keyword">const</span> finalHeight = pageHeightMm;

    <span class="hljs-comment">// ä½ç½®ï¼šå·¦ä¸Šè§’å¯¹é½ï¼Œä¿ç•™ 10mm è¾¹è·</span>
    <span class="hljs-keyword">const</span> x = <span class="hljs-variable constant_">PDF_MARGIN_MM</span>;
    <span class="hljs-keyword">const</span> y = <span class="hljs-variable constant_">PDF_MARGIN_MM</span>;

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ·»åŠ ç¬¬ <span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span> é¡µ: <span class="hljs-subst">${finalWidth}</span>x<span class="hljs-subst">${finalHeight.toFixed(<span class="hljs-number">2</span>)}</span>mm`</span>);

    <span class="hljs-comment">// æ·»åŠ å›¾ç‰‡åˆ° PDF</span>
    pdf.<span class="hljs-title function_">addImage</span>(page.<span class="hljs-property">dataUrl</span>, <span class="hljs-string">'PNG'</span>, x, y, finalWidth, finalHeight);
  });

  <span class="hljs-keyword">return</span> pdf;
}
</code></pre>
<h3 data-id="heading-19">Step 4ï¼šä¸»å¯¼å‡ºå‡½æ•°</h3>
<p>å°†ä»¥ä¸Šæ­¥éª¤ä¸²è”èµ·æ¥ï¼Œæä¾›ç»Ÿä¸€çš„å¯¼å‡ºæ¥å£ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ExportConfig</span> {
  <span class="hljs-attr">targetSelector</span>: <span class="hljs-built_in">string</span>;   <span class="hljs-comment">// CSS é€‰æ‹©å™¨</span>
  filename?: <span class="hljs-built_in">string</span>;        <span class="hljs-comment">// æ–‡ä»¶å</span>
  quality?: <span class="hljs-built_in">number</span>;         <span class="hljs-comment">// å›¾ç‰‡è´¨é‡</span>
}

<span class="hljs-comment">/**
 * ä¸»å¯¼å‡ºå‡½æ•°
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">exportMessagesToPdf</span>(<span class="hljs-params">config: ExportConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
  <span class="hljs-keyword">const</span> {
    targetSelector,
    filename = <span class="hljs-string">'messages.pdf'</span>,
    quality = <span class="hljs-variable constant_">IMAGE_QUALITY</span>
  } = config;

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== å¼€å§‹å¯¼å‡º PDF ==='</span>);

  <span class="hljs-comment">// 1. è·å–ç›®æ ‡å…ƒç´ </span>
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(targetSelector) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLElement</span>;
  <span class="hljs-keyword">if</span> (!element) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`å…ƒç´ æœªæ‰¾åˆ°: <span class="hljs-subst">${targetSelector}</span>`</span>);
  }

  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å°ºå¯¸:'</span>, {
    <span class="hljs-attr">width</span>: element.<span class="hljs-property">offsetWidth</span>,
    <span class="hljs-attr">height</span>: element.<span class="hljs-property">scrollHeight</span>
  });

  <span class="hljs-comment">// 2. DOM æˆªå›¾</span>
  <span class="hljs-keyword">const</span> imageDataUrl = <span class="hljs-keyword">await</span> <span class="hljs-title function_">captureElementToImage</span>(element, quality);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æˆªå›¾å®Œæˆï¼Œå¤§å°:'</span>, (imageDataUrl.<span class="hljs-property">length</span> / <span class="hljs-number">1024</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>), <span class="hljs-string">'KB'</span>);

  <span class="hljs-comment">// 3. å›¾ç‰‡åˆ†é¡µ</span>
  <span class="hljs-keyword">const</span> pages = <span class="hljs-keyword">await</span> <span class="hljs-title function_">splitImageIntoPages</span>(imageDataUrl);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ†é¡µå®Œæˆï¼Œå…± <span class="hljs-subst">${pages.length}</span> é¡µ`</span>);

  <span class="hljs-comment">// 4. åˆ›å»º PDF</span>
  <span class="hljs-keyword">const</span> pdf = <span class="hljs-title function_">createPdfFromPages</span>(pages);

  <span class="hljs-comment">// 5. ä¿å­˜æ–‡ä»¶</span>
  pdf.<span class="hljs-title function_">save</span>(filename);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'=== å¯¼å‡ºå®Œæˆ ==='</span>);
}
</code></pre>
<h3 data-id="heading-20">åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h3>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// MessageList.tsx</span>

<span class="hljs-keyword">import</span> { exportMessagesToPdf } <span class="hljs-keyword">from</span> <span class="hljs-string">'../services/messageExportService'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">MessageList</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span> = <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> messageListRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isExporting, setIsExporting] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> handleExportToPdf = <span class="hljs-title function_">useCallback</span>(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-title function_">setIsExporting</span>(<span class="hljs-literal">true</span>);

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ç”Ÿæˆå¸¦æ—¶é—´æˆ³çš„æ–‡ä»¶å</span>
      <span class="hljs-keyword">const</span> timestamp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>().<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/[:.]/g</span>, <span class="hljs-string">'-'</span>);
      <span class="hljs-keyword">const</span> filename = <span class="hljs-string">`messages-<span class="hljs-subst">${timestamp}</span>.pdf`</span>;

      <span class="hljs-keyword">await</span> <span class="hljs-title function_">exportMessagesToPdf</span>({
        <span class="hljs-attr">targetSelector</span>: <span class="hljs-string">'.message-list-container'</span>,
        filename,
        <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>
      });

    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å¯¼å‡ºå¤±è´¥:'</span>, error);
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å¯¼å‡ºå¤±è´¥ï¼Œè¯·é‡è¯•'</span>);
    } <span class="hljs-keyword">finally</span> {
      <span class="hljs-title function_">setIsExporting</span>(<span class="hljs-literal">false</span>);
    }
  }, []);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list-container"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{messageListRef}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>æ¶ˆæ¯è®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
          <span class="hljs-attr">className</span>=<span class="hljs-string">"export-button"</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleExportToPdf}</span>
          <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isExporting}</span>
        &gt;</span>
          {isExporting ? 'å¯¼å‡ºä¸­...' : 'å¯¼å‡º PDF'}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"message-list"</span>&gt;</span>
        {messages.map(message =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">MessageItem</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{message.id}</span> <span class="hljs-attr">message</span>=<span class="hljs-string">{message}</span> /&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h3 data-id="heading-21">å®Œæ•´æ•ˆæœ</h3>
<p>è¿è¡Œé¡¹ç›®åï¼Œç‚¹å‡»ã€Œå¯¼å‡º PDFã€æŒ‰é’®ï¼š</p>
<ol>
<li>æ§åˆ¶å°æ˜¾ç¤ºè¯¦ç»†çš„å¯¼å‡ºæ—¥å¿—</li>
<li>è‡ªåŠ¨è®¡ç®—é¡µæ•°å¹¶åˆ†é¡µ</li>
<li>ç”Ÿæˆé«˜æ¸… PDF æ–‡ä»¶å¹¶è‡ªåŠ¨ä¸‹è½½</li>
</ol>

<pre><code class="hljs language-ini" lang="ini">=== å¼€å§‹å¯¼å‡º <span class="hljs-attr">PDF</span> ===
ç›®æ ‡é€‰æ‹©å™¨: .message-list-container
å…ƒç´ å°ºå¯¸: { width: 600, height: 8500 }
å¼€å§‹æˆªå›¾...
æˆªå›¾å®Œæˆï¼Œå¤§å°: 2847.65 KB
åˆ†é¡µå®Œæˆï¼Œå…± 8 é¡µ
æ·»åŠ ç¬¬ 1 é¡µ: 190x277.00mm
æ·»åŠ ç¬¬ 2 é¡µ: 190x277.00mm
...
æ·»åŠ ç¬¬ 8 é¡µ: <span class="hljs-attr">190x156.32mm</span>
=== å¯¼å‡ºå®Œæˆ ===
</code></pre>
<hr/>
<h2 data-id="heading-22">SnapDOM VS html2canvas</h2>
<p>ä¸ºä»€ä¹ˆé€‰æ‹© SnapDOM è€Œä¸æ˜¯æ›´æµè¡Œçš„ html2canvasï¼Ÿè®©æˆ‘ä»¬æ¥å¯¹æ¯”ä¸€ä¸‹ï¼š</p>
<h3 data-id="heading-23">è¯¦ç»†å¯¹æ¯”è¡¨</h3>




























































<table><thead><tr><th>å¯¹æ¯”ç»´åº¦</th><th>SnapDOM</th><th>html2canvas</th></tr></thead><tbody><tr><td><strong>æ ·å¼è¿˜åŸ</strong></td><td>â˜…â˜…â˜…â˜…â˜… æ¥è¿‘å®Œç¾</td><td>â˜…â˜…â˜…â˜†â˜† éƒ¨åˆ†æ ·å¼ä¸¢å¤±</td></tr><tr><td><strong>Flexbox/Grid</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ éƒ¨åˆ†é—®é¢˜</td></tr><tr><td><strong>æ¸å˜èƒŒæ™¯</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ å¯èƒ½å¤±çœŸ</td></tr><tr><td><strong>é˜´å½±æ•ˆæœ</strong></td><td>âœ… å®Œç¾æ”¯æŒ</td><td>âš ï¸ éƒ¨åˆ†ä¸¢å¤±</td></tr><tr><td><strong>è‡ªå®šä¹‰å­—ä½“</strong></td><td>âœ… æ”¯æŒ</td><td>âš ï¸ éœ€è¦é¢å¤–å¤„ç†</td></tr><tr><td><strong>SVG æ”¯æŒ</strong></td><td>âœ… åŸç”Ÿæ”¯æŒ</td><td>âš ï¸ æœ‰é™æ”¯æŒ</td></tr><tr><td><strong>è¾“å‡ºæ ¼å¼</strong></td><td>PNG/Canvas/SVG</td><td>Canvas/PNG</td></tr><tr><td><strong>åŒ…å¤§å°</strong></td><td>~20KB</td><td>~60KB</td></tr><tr><td><strong>ç»´æŠ¤çŠ¶æ€</strong></td><td>æ´»è·ƒæ›´æ–°</td><td>è¾ƒå°‘æ›´æ–°</td></tr><tr><td><strong>API è®¾è®¡</strong></td><td>ç°ä»£ Promise</td><td>å›è°ƒ + Promise</td></tr></tbody></table>
<h3 data-id="heading-24">ä»£ç å¯¹æ¯”</h3>
<p><strong>html2canvas æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> html2canvas <span class="hljs-keyword">from</span> <span class="hljs-string">'html2canvas'</span>;

<span class="hljs-comment">// éœ€è¦å¤„ç†å„ç§å…¼å®¹æ€§é—®é¢˜</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-keyword">await</span> <span class="hljs-title function_">html2canvas</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">useCORS</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">logging</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">allowTaint</span>: <span class="hljs-literal">true</span>,
  <span class="hljs-attr">foreignObjectRendering</span>: <span class="hljs-literal">true</span>,  <span class="hljs-comment">// å¯èƒ½ä¸ç”Ÿæ•ˆ</span>
  <span class="hljs-comment">// è¿˜éœ€è¦å¤„ç†å­—ä½“ã€SVG ç­‰é—®é¢˜...</span>
});

<span class="hljs-keyword">const</span> dataUrl = canvas.<span class="hljs-title function_">toDataURL</span>(<span class="hljs-string">'image/png'</span>);
</code></pre>
<p><strong>SnapDOM æ–¹å¼ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { snapdom } <span class="hljs-keyword">from</span> <span class="hljs-string">'@zumer/snapdom'</span>;

<span class="hljs-comment">// ç®€æ´çš„ APIï¼Œæ— éœ€é¢å¤–é…ç½®</span>
<span class="hljs-keyword">const</span> capture = <span class="hljs-keyword">await</span> <span class="hljs-title function_">snapdom</span>(element, {
  <span class="hljs-attr">scale</span>: <span class="hljs-number">2</span>,
  <span class="hljs-attr">quality</span>: <span class="hljs-number">0.95</span>
});

<span class="hljs-keyword">const</span> dataUrl = (<span class="hljs-keyword">await</span> capture.<span class="hljs-title function_">toPng</span>()).<span class="hljs-property">src</span>;
</code></pre>
<h3 data-id="heading-25">ä»€ä¹ˆæ—¶å€™é€‰æ‹© html2canvasï¼Ÿ</h3>
<p>è™½ç„¶ SnapDOM åœ¨å¤§å¤šæ•°åœºæ™¯ä¸‹æ›´ä¼˜ç§€ï¼Œä½† html2canvas åœ¨ä»¥ä¸‹æƒ…å†µå¯èƒ½æ›´é€‚åˆï¼š</p>
<ol>
<li><strong>é¡¹ç›®å·²åœ¨ä½¿ç”¨</strong>ï¼šè¿ç§»æˆæœ¬è¾ƒé«˜</li>
<li><strong>ç®€å•åœºæ™¯</strong>ï¼šåªéœ€æˆªå–ç®€å•æ–‡æœ¬ï¼Œæ— å¤æ‚æ ·å¼</li>
<li><strong>å›¢é˜Ÿç†Ÿæ‚‰åº¦</strong>ï¼šå›¢é˜Ÿå¯¹ html2canvas æ›´ç†Ÿæ‚‰</li>
</ol>
<h2 data-id="heading-26">æ€»ç»“</h2>
<h3 data-id="heading-27">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li><strong>SnapDOM</strong> æä¾›é«˜ä¿çœŸçš„ DOM æˆªå›¾èƒ½åŠ›ï¼Œé€šè¿‡ <code>scale: 2</code> å®ç° 2 å€æ¸…æ™°åº¦</li>
<li><strong>jsPDF</strong> æ˜¯å¼ºå¤§çš„ PDF ç”Ÿæˆåº“ï¼Œæ”¯æŒ A4 çº¸å¼ ã€å‹ç¼©ç­‰ç‰¹æ€§</li>
<li><strong>åˆ†é¡µç®—æ³•</strong> æ˜¯æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒéš¾ç‚¹ï¼Œéœ€è¦ç²¾ç¡®è®¡ç®—åƒç´ ä¸æ¯«ç±³çš„è½¬æ¢</li>
<li><strong>SnapDOM</strong> ç›¸æ¯” html2canvas åœ¨æ ·å¼è¿˜åŸåº¦ä¸Šæœ‰æ˜æ˜¾ä¼˜åŠ¿</li>
</ol>
<h3 data-id="heading-28">è¿›ä¸€æ­¥ä¼˜åŒ–æ–¹å‘</h3>





























<table><thead><tr><th>ä¼˜åŒ–ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>Web Worker</strong></td><td>å°†åˆ†é¡µè®¡ç®—æ”¾åˆ° Worker ä¸­ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</td></tr><tr><td><strong>åˆ†æ®µæˆªå›¾</strong></td><td>è¶…é•¿å†…å®¹åˆ†æ®µæˆªå›¾ï¼Œé¿å…å†…å­˜æº¢å‡º</td></tr><tr><td><strong>åŠ è½½æç¤º</strong></td><td>æ·»åŠ è¿›åº¦æ¡ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</td></tr><tr><td><strong>PDF å‹ç¼©</strong></td><td>ä½¿ç”¨ pdf-lib è¿›ä¸€æ­¥å‹ç¼© PDF ä½“ç§¯</td></tr><tr><td><strong>é¡µçœ‰é¡µè„š</strong></td><td>æ·»åŠ é¡µç ã€æ—¶é—´æˆ³ç­‰ä¿¡æ¯</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼]]></title>    <link>https://juejin.cn/post/7576580177662132234</link>    <guid>https://juejin.cn/post/7576580177662132234</guid>    <pubDate>2025-11-26T04:34:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576580177662132234" data-draft-id="7576646142315937833" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T04:34:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä½•"/> <meta itemprop="url" content="https://juejin.cn/user/588993963763405"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TRAE SOLOä¸­å›½ç‰ˆç»ˆäºæ¥äº†ï¼Œå®Œå…¨å…è´¹ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/588993963763405/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä½•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:34:27.000Z" title="Wed Nov 26 2025 04:34:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™æ˜¯è‹ä½•çš„ç¬¬ 454 ç¯‡åŸåˆ›ï¼</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è¿˜æ²¡ç§ƒé¡¶çš„è‹ä½•ã€‚</p>
<p>æ˜¨æ™šå¬äº† TRAE SOLO å›½å†…ç‰ˆä¸Šçº¿çš„å‘å¸ƒä¼šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79a52e09b1f24a669b6039c91d2450ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=0XY9x7d8iNF1Vlt%2BhvEfs9PoZBs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ—¶éš” 4 ä¸ªæœˆï¼Œå®ƒç»ˆäºæ¥äº†ã€‚</p>
<p>æˆ‘ä¹Ÿç¬¬ä¸€æ—¶é—´åšäº†ä¸‹ä½“éªŒï¼Œåšäº†å‡ ä¸ª caseï¼Œå½•äº†ä¸ªè§†é¢‘ç»™å¤§å®¶çœ‹çœ‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46ea2fc4cbe04f63a92a4f3b65840006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=tFRfXJgCl1EV6%2BCd0RqY8Btf6c0%3D" alt="wxv_4269304641676214281" loading="lazy"/></p>
<p>è¿½æº¯åˆ° 7 æœˆä»½ï¼Œé‚£æ—¶å€™å›½é™…ç‰ˆåˆšå¼€ Beta æµ‹è¯•ï¼Œå…¨ç½‘çˆ†ç«ï¼Œæ¿€æ´»ç çœŸæ˜¯ä¸€ç éš¾æ±‚ã€‚æˆ‘å½“æ—¶åºŸäº†å¾ˆå¤§åŠ²ï¼Œç¬¬ä¸€æ—¶é—´æŠ¢é²œä½“éªŒäº†ä¸€æŠŠï¼Œæ‰‹æ„Ÿç¡®å®æƒŠè‰³ï¼Œä¸ºæ­¤è¿˜ä¸“é—¨å†™è¿‡ä¸€ç¯‡æ–‡ç« åˆ†äº«ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7e3bfebe492740cab632a4b7a26e89d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=wh5d7TvihbfhjeQt6wosEvfCtrk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ˜¯ä»é‚£æ—¶èµ·ï¼Œæˆ‘å’Œ Trae ç®—æ˜¯ã€Œæ ã€ä¸Šäº†ï¼Œå…³ç³»å˜å¾—ç›¸å½“å¾®å¦™ã€‚</p>
<p>åæ¥æˆ‘è¿˜æˆäº†æ­¦æ±‰çš„ Trae Fellowï¼Œåœ¨æ­¦æ±‰æäº†ä¸€åœºé»‘å®¢æ¾ã€‚çœ‹ç€å¤§å®¶åœ¨ç°åœºç”¨å®ƒä» 0 åˆ° 1 æ„å»ºé¡¹ç›®ï¼Œæˆ‘æ˜¯çœŸåˆ‡æ„Ÿå—åˆ°äº†å·¥å…·å¸¦æ¥çš„å˜åŒ–ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/250626d7ed844bb0a57773ac8935e4ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=ZOAYXNR8s4WiRFhT3SGgg93OuTc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è‡³äºä¸ºå•¥æˆ‘ä¸€ç›´ç›¯ç€ Trae ä¸æ”¾ï¼Œåˆä¸ºå•¥è§‰å¾—è¿™æ¬¡å›½å†…ç‰ˆ SOLO æ¨¡å¼çš„å‘å¸ƒæ„ä¹‰éå‡¡ï¼Ÿ</p>
<p>ç†ç”±å…¶å®å¾ˆç®€å•ã€‚</p>
<p>è™½ç„¶ Cursor å¾ˆå¼ºï¼Œä½†ç½‘ç»œé—®é¢˜æŠŠå¤ªå¤šäººæŒ¡åœ¨é—¨å¤–äº†ã€‚æˆ‘ä»¬å¤ªç¼ºä¸€æ¬¾èƒ½çœŸæ­£å¯¹æ ‡ç”šè‡³è¶…è¶Š Cursorï¼ŒåŒæ—¶åˆæ²¡æœ‰ä»»ä½•ç½‘ç»œé—¨æ§›çš„ AI IDE äº†ã€‚</p>
<p>AI ç¼–ç¨‹ä¸è¯¥æ˜¯å°‘æ•°äººçš„ç‰¹æƒã€‚</p>
<p>è¦æƒ³è®©è¿™ç§å¼ºå¤§çš„ç”Ÿäº§åŠ›çœŸæ­£é“ºå¼€ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½ä½“ä¼šåˆ°å®ƒçš„å¼ºå¤§ï¼Œå°±å¾—æŠŠé—¨æ§›è¸©ç¢ã€‚</p>
<p>è¿™æ­£æ˜¯ Trae è¿™æ®µæ—¶é—´ä¸€ç›´åœ¨é»˜é»˜åšçš„äº‹ã€‚</p>
<p>11 æœˆ 25 æ—¥å‘å¸ƒçš„è¿™ä¸ªç‰ˆæœ¬ï¼Œç›´æ¥åŒæ­¥äº†å›½é™…ç‰ˆæœ€æ ¸å¿ƒçš„ SOLO Coder åŠŸèƒ½ï¼Œç”šè‡³åŒ…æ‹¬ Plan æ¨¡å¼ã€å¤šä»»åŠ¡å¹¶è¡Œè¿™äº›ç¡¬æ ¸èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87dc3653e8434bfe8a2e91642294e9b2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=qjd62r%2FZsZ1sX9yhB4UzN8vVVxk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>æœ€æœ€å…³é”®çš„æ˜¯ï¼Œå®ƒç›®å‰<strong>å®Œå…¨å…è´¹</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6be1518803bd41b898e9a6726b5372a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1HT2kZ9K6%2F3WlOMEsRiK2pbvqUY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¯ä»¥å®æ—¶è·Ÿéšï¼Œè¿˜ä¼šè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨é¡µé¢é¢„è§ˆï¼Œéå¸¸æ–¹ä¾¿ã€‚</p>
<p>è¿™å°±å¾ˆæœ‰æ„æ€äº†ã€‚ä»¥å‰æˆ‘ä»¬ç”¨ AI å†™ä»£ç ï¼Œæ€»æ„Ÿè§‰åƒæ˜¯åœ¨ã€Œå¼€ç›²ç›’ã€ã€‚ä½ ç»™ä¸ªæŒ‡ä»¤ï¼ŒAI é—·å¤´å†™ï¼Œå†™å‡ºæ¥èƒ½è·‘ç®—è¿æ°”å¥½ï¼Œä¸èƒ½è·‘ä½ å°±å¾—åœ¨é‚£å¯¹ç€ä¸€å †ä»£ç å¹²çªçœ¼ï¼Œå®Œå…¨ä¸çŸ¥é“å®ƒä¸­é—´ç»å†äº†ä»€ä¹ˆå¿ƒè·¯å†ç¨‹ã€‚</p>
<p>ä½† TRAE SOLO ä¸»æ‰“çš„æ¦‚å¿µå«ã€ŒResponsive Coding Agentã€ã€‚</p>
<p>åˆ«è¢«è¿™ä¸ªè‹±æ–‡å“åˆ°ï¼Œæˆ‘è‡ªå·±ä¸Šæ‰‹ç›˜äº†ä¸€ä¸‹ï¼Œè§‰å¾—ç”¨å¤§ç™½è¯è§£é‡Šå°±æ˜¯ï¼š<strong>å®ƒä¸å†æ˜¯ä¸ªåªä¼šæ‰§è¡Œå‘½ä»¤çš„æ­»æ¿å·¥å…·ï¼Œè€Œæ˜¯ä¸€ä¸ªèƒ½å’Œä½ ã€Œæœ‰å•†æœ‰é‡ã€çš„æ™ºèƒ½é˜Ÿå‹ã€‚</strong></p>
<p>å…·ä½“å¼ºåœ¨å“ªï¼Ÿæˆ‘æŒ‘å‡ ä¸ªå’±ä»¬å†™ä»£ç æ—¶æœ€æ„ŸåŒèº«å—çš„ç‚¹èŠèŠã€‚</p>
<p><strong>ç¬¬ä¸€ï¼Œå®ƒæ‡‚å¾—ã€Œå…ˆæ€è€ƒï¼Œå†åŠ¨æ‰‹ã€ã€‚</strong></p>
<p>ä»¥å‰çš„ AI æ˜¯æ€¥æ€§å­ï¼Œä½ éœ€æ±‚è¿˜æ²¡è¯´å®Œï¼Œå®ƒä»£ç å¯èƒ½å°±ç”Ÿæˆäº†ä¸€åŠã€‚ç»“æœå¾€å¾€æ˜¯æ–¹å‘é”™äº†ï¼Œè¿˜å¾—æ¨å€’é‡æ¥ã€‚</p>
<p>TRAE SOLO æœ‰ä¸ªÂ <strong>Plan æ¨¡å¼</strong>ã€‚å½“ä½ æŠ›å‡ºä¸€ä¸ªå¤æ‚éœ€æ±‚æ—¶ï¼Œå®ƒä¸ä¼šæ€¥ç€å†™ä»£ç ï¼Œè€Œæ˜¯å…ˆç»™ä½ åˆ—ä¸€ä¸ª To-Do Listï¼Œå‘Šè¯‰ä½ å®ƒå‡†å¤‡åˆ†å‡ æ­¥èµ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28279fd152f94235a5b404a7fd0ebd35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=CaOfEkZ3AKrNDfoJpmgRhfBExc4%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™å°±å¾ˆåƒå¸¦å¾’å¼Ÿäº†ã€‚</p>
<p>ä½ çœ‹äº†è®¡åˆ’ï¼Œè§‰å¾—æ²¡é—®é¢˜ï¼Œå®ƒå†å¼€å·¥ï¼›è§‰å¾—é€»è¾‘ä¸å¯¹ï¼Œç›´æ¥åœ¨è®¡åˆ’é˜¶æ®µå°±æŒ‡å‡ºæ¥ã€‚æŠŠé”™è¯¯æ‰¼æ€åœ¨å†™ä»£ç ä¹‹å‰ï¼Œè¿™æ‰æ˜¯æ­£ç»çš„å·¥ç¨‹æ€ç»´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/015f8615e6134b819e7066e3ad68231f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=6u1MWBujjCMpZQGfr90%2FAPtwnow%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬äºŒï¼Œå‘Šåˆ«é»‘ç›’ï¼Œä»£ç æ”¹äº†å“ªä¸€ç›®äº†ç„¶ã€‚</strong></p>
<p>è¿™æ¬¡æ–°å¢çš„ä»£ç å˜æ›´ï¼ˆÂ <strong>DiffView</strong>Â ï¼‰åŠŸèƒ½æˆ‘ä¸ªäººéå¸¸å–œæ¬¢ã€‚</p>
<p>ä»¥å‰ AI æ”¹ä»£ç ï¼Œç»å¸¸æŠŠå¥½çš„é€»è¾‘ä¹Ÿç»™æ”¹åäº†ã€‚ç°åœ¨ï¼Œå®ƒåšäº†å“ªäº›æ–°å¢ã€æ”¹äº†å“ªäº›é€»è¾‘ï¼Œéƒ½åœ¨ç•Œé¢ä¸Šæ¸…æ¸…æ¥šæ¥šåœ°å±•ç¤ºå‡ºæ¥ã€‚</p>
<p>ä½ å¯ä»¥å®æ—¶å®¡æŸ¥ï¼ˆCode Reviewï¼‰ï¼Œå°±åƒçœ‹åŒäº‹æäº¤çš„ä»£ç ä¸€æ ·ã€‚ä½ æ²¡ç‚¹å¤´ï¼Œå®ƒå°±ä¸æ•¢ä¹±åˆå¹¶ã€‚è¿™ç§ã€Œéšæ—¶å¯æŒæ§ã€çš„æ„Ÿè§‰ï¼Œæ‰æ˜¯æˆ‘ä»¬æ•¢åœ¨å®é™…é¡¹ç›®é‡Œç”¨ AI çš„åº•æ°”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e79022ae1ff423f9ac7e9215d1d81a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=LLKNsMavSOSm37mOd5xYhWNQB8A%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p><strong>ç¬¬ä¸‰ï¼Œè„‘å­å¥½ä½¿ï¼Œè¿˜æ‡‚å¾—ã€Œæ–­èˆç¦»ã€ã€‚</strong></p>
<p>åšå¤§é¡¹ç›®æœ€æ€• AI èŠç€èŠç€å°±ã€Œå¤±å¿†ã€ï¼Œæˆ–è€…å› ä¸ºä¸Šä¸‹æ–‡å¤ªé•¿å¼€å§‹èƒ¡è¨€ä¹±è¯­ã€‚</p>
<p>TRAE SOLO åœ¨è¿™å—åšå¾—æ¯”è¾ƒèªæ˜ã€‚å®ƒèƒ½æ”¯æŒæ£€ç´¢æµ·é‡çš„ä»£ç æ–‡ä»¶ï¼ˆæ®è¯´èƒ½æ‰›ä½ 10 ä¸‡ä¸ªæ–‡ä»¶ï¼‰ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæœ‰ä¸€å¥—è‡ªåŠ¨çš„ä¸Šä¸‹æ–‡å‹ç¼©æœºåˆ¶ã€‚</p>
<p>å½“å¯¹è¯å¤ªé•¿æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨è§¦å‘å‹ç¼©ï¼Œä¿ç•™æ ¸å¿ƒä¿¡æ¯ï¼›ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç‚¹ä¸€ä¸‹å‹ç¼©ï¼Œè®©å®ƒæŠŠæ²¡ç”¨çš„åºŸè¯æ¸…æ‰ã€‚è¿™æ ·æ—¢ä¿ç•™äº†å…³é”®è®°å¿†ï¼Œåˆä¸ä¼šè®©æ¨¡å‹è·‘åã€‚</p>
<p><strong>é™¤æ­¤ï¼Œå®ƒè¿˜èƒ½ã€Œåˆ†èº«ã€ã€‚</strong></p>
<p>è¿™ç©æ„å„¿æ”¯æŒå¤šä»»åŠ¡å¹¶è¡Œ sub agentã€‚ä½ å¯ä»¥å¼€ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»ä¿® Bugï¼ŒåŒæ—¶å¼€å¦ä¸€ä¸ªçº¿ç¨‹è®©å®ƒå»å†™æ–°åŠŸèƒ½çš„æ¥å£ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fca08f3fe2b84b6583cd6c0291dd9d3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=VW8Mrm4rK8LpYaLQ%2FgBVwi46z8g%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¸€ä¸ªäººå°±æ˜¯ä¸€æ”¯é˜Ÿä¼ï¼Œè¿™å›çœŸä¸æ˜¯è¯´è¯´è€Œå·²ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6242fa3c9ee3409abcd55bc373db269f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=2GrcV1KDXI%2FxENe6DFU1J6SVv98%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>è¿™äº›æ™ºèƒ½ä½“ä¹Ÿæ˜¯å¯ä»¥è‡ªå·±åˆ›å»ºçš„ï¼Œç‚¹ã€Œåˆ›å»ºæ™ºèƒ½ä½“ã€å°±èƒ½åˆ›å»ºäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b883d8c325084545954e87bf2212da84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=vQEIIt65AKol489Y236CkCZhRPg%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>åˆ›å»ºå¥½åå°±èƒ½çœ‹åˆ°è‡ªå·±æ‹¥æœ‰çš„æ™ºèƒ½ä½“äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8254192470f4ba191e26e935671b09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=1hw0UzJ%2Fcv6k%2BVmpNYAOapnHF%2F8%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ç›®å‰å›½å†…ç‰ˆæ”¯æŒäº†å›½å†…é¡¶å°–çš„ä»£ç æ¨¡å‹ï¼Œæ¯”å¦‚ Doubao-Seed-Codeã€Kimi K2ã€GLM 4.6 ç­‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05f521848b7e4e1eb4a80885117a8918~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=o51GEbXYwKRgRlBQiDJ2lGQZuyk%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ¨¡å‹ã€‚</p>
<p>åŒæ ·å†…ç½®ä¸å°‘ MCPã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bbbf2dcefc24e199bce02b606cf6c67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=lWbEPTx5ANz1qP1IDo6th5kPxLY%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>å¹¿åœºèƒ½æœç´ åˆ°éå¸¸å¤šå¥½ç”¨çš„ MCPï¼Œé…ç½®ä¹Ÿå¾ˆç®€å•ç›¸å¯¹ Cursor æ¥è¯´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c251ca0914e406b9c9844c0e9a4419e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuN5L2V:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764736467&amp;x-signature=yQ5TLllMOnxrVNqPixWLzzLjVD0%3D" alt="å›¾ç‰‡" loading="lazy"/><img src="" alt="" loading="lazy"/></p>
<p>ä½“éªŒä¸‹æ¥ï¼Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ã€Œé¡ºæ»‘ã€ã€‚æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿçš„ç„¦è™‘ï¼ŒåŠ ä¸Šè¿™ç§é€æ˜çš„åä½œæ¨¡å¼ï¼Œç¡®å®èƒ½è®©äººä¸“æ³¨äºåˆ›é€ æœ¬èº«ã€‚</p>
<p>è¯´å®è¯ï¼ŒTrae SOLO ç»™æˆ‘çš„æ„Ÿè§‰æ˜¯ã€Œç‘•ä¸æ©ç‘œã€ã€‚</p>
<p>å¦‚æœè¦å¹æ¯›æ±‚ç–µï¼Œå›½å†…åº•å±‚çš„ä»£ç æ¨¡å‹åœ¨å¤„ç†æåº¦å¤æ‚çš„æ·±å±‚é€»è¾‘æ—¶ï¼Œè·ç¦»å›½å¤–æœ€é¡¶å°–çš„æ¨¡å‹ç¡®å®è¿˜æœ‰ä¸€äº›æå‡ç©ºé—´ã€‚è¿™ç‚¹å’±ä»¬å¾—è®¤ï¼Œæ¨¡å‹èƒ½åŠ›çš„æ‰“ç£¨è¿˜éœ€è¦æ—¶é—´ã€‚</p>
<p>ä½† Trae å›¢é˜Ÿèªæ˜çš„åœ°æ–¹åœ¨äºï¼Œä»–ä»¬ç”¨æè‡´çš„äº§å“ç»†èŠ‚å¼¥è¡¥äº†è¿™ä¸€ç‚¹ã€‚</p>
<p>é‚£ç§è¡Œäº‘æµæ°´çš„äº¤äº’æ„Ÿï¼ŒDiffView å¸¦æ¥çš„æŒæ§æ„Ÿï¼Œä»¥åŠ Plan æ¨¡å¼ä¸‹çš„ã€Œå•†é‡ç€æ¥ã€ï¼Œè®©ä½ åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å¾€å¾€ä¼šå¿½ç•¥æ‰æ¨¡å‹æœ¬èº«çš„ä¸€ç‚¹å°ç‘•ç–µã€‚</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ‰“ç ´äº†é‚£å µæŠŠæ— æ•°äººæŒ¡åœ¨ AI ç¼–ç¨‹é—¨å¤–çš„ã€Œå¢™ã€ã€‚</p>
<p>ä¸ç”¨æŠ˜è…¾ç½‘ç»œï¼Œä¸ç”¨æ‹…å¿ƒè´¦å•ï¼Œæ‰“å¼€å°±èƒ½ç”¨ã€‚å¯¹äºå¤§å¤šæ•°æƒ³å°è¯• AI ç¼–ç¨‹çš„æœ‹å‹æ¥è¯´ï¼Œè¿™å°±å¤Ÿäº†ã€‚</p>
<p>å›½äº§ IDE èƒ½åšåˆ°è¿™ä¸ªç»†è…»ç¨‹åº¦ï¼Œå€¼å¾—ç»™ç‚¹æŒå£°ã€‚</p>
<p>å»è¯•è¯•å§ï¼Œä¹Ÿè®¸å®ƒå°±æ˜¯ä½ æœŸå¾…å·²ä¹…çš„é‚£ä¸ªã€Œç¼–ç¨‹æ­å­ã€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7576543407013232659</link>    <guid>https://juejin.cn/post/7576543407013232659</guid>    <pubDate>2025-11-26T00:39:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576543407013232659" data-draft-id="7571815573933408319" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ"/> <meta itemprop="keywords" content="Flutter,Android,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T00:39:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutterç¡çœ ä¸å†¥æƒ³æ•°æ®å¯è§†åŒ–ç¥å™¨ï¼šsleep_stage_chartæ’ä»¶å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T00:39:47.000Z" title="Wed Nov 26 2025 00:39:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>åœ¨å¥åº·ç±» App å¼€å‘ä¸­ï¼Œç¡çœ å‘¨æœŸåˆ†æå’Œå†¥æƒ³æ•°æ®å±•ç¤ºæ˜¯æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ã€‚ä¸€ä¸ªç›´è§‚ã€ç¾è§‚ä¸”äº¤äº’æµç•…çš„å¯è§†åŒ–å›¾è¡¨ï¼Œèƒ½æå¤§æå‡ç”¨æˆ·å¯¹å¥åº·æ•°æ®çš„ç†è§£å’Œä½¿ç”¨ä½“éªŒã€‚ä»Šå¤©ç»™å¤§å®¶æ¨èä¸€æ¬¾ä¸“ä¸º Flutter å¼€å‘è€…æ‰“é€ çš„å…¨èƒ½å‹å›¾è¡¨æ’ä»¶â€”â€”<strong>sleep_stage_chart</strong>ï¼Œå®ƒä¸ä»…èƒ½å®Œç¾å‘ˆç°ç¡çœ é˜¶æ®µæ•°æ®ï¼Œè¿˜æ”¯æŒå†¥æƒ³æ—¶é•¿å¯è§†åŒ–ï¼Œè·¨å¹³å°å…¼å®¹ä¸”é«˜åº¦å¯å®šåˆ¶ã€‚</p>
<h2 data-id="heading-0">1. ç®€ä»‹</h2>
<p><code>sleep_stage_chart</code>æ˜¯ä¸€æ¬¾ä¸“æ³¨äºç¡çœ é˜¶æ®µå’Œå†¥æƒ³æ•°æ®å¯è§†åŒ–çš„ Flutter æ’ä»¶ï¼Œå€Ÿé‰´äº† Apple Health åº”ç”¨çš„ä¼˜é›…è®¾è®¡é£æ ¼ï¼Œæä¾›äº†å¹³æ»‘çš„è¿‡æ¸¡æ•ˆæœå’Œä¸°å¯Œçš„äº¤äº’èƒ½åŠ›ã€‚è¯¥æ’ä»¶æ”¯æŒ Androidã€iOS å’Œ Windows ä¸‰å¤§å¹³å°ï¼Œèƒ½å¤Ÿæ»¡è¶³å¥åº·ç±» App å¯¹ç¡çœ å‘¨æœŸåˆ†æã€å†¥æƒ³æ—¶é•¿ç»Ÿè®¡ç­‰åœºæ™¯çš„å¯è§†åŒ–éœ€æ±‚ã€‚</p>
<h3 data-id="heading-1">1.1. ä¾‹å›¾</h3>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7b79258904c437ebbd0ad21222c3480~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764722387&amp;x-signature=j27zZH389EnntvmiOQ5T5xdwVVo%3D" alt="ç¡çœ å›¾" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b6c35ad686d4faab1d7fb8b59c205fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bmP5aSa5aSa:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764722387&amp;x-signature=Kp5YCWV4ao5d15cAckwkfDNzm%2Bo%3D" alt="å†¥æƒ³å›¾" loading="lazy"/></p>
<h3 data-id="heading-2">1.2. æ ¸å¿ƒåŠŸèƒ½</h3>
<p>è¯¥æ’ä»¶çš„åŠŸèƒ½è¦†ç›–äº†å¥åº·æ•°æ®å¯è§†åŒ–çš„æ ¸å¿ƒéœ€æ±‚ï¼ŒåŒæ—¶æä¾›äº†è¶³å¤Ÿçš„çµæ´»æ€§ï¼š</p>
<ul>
<li>ğŸ“Š <strong>åŒå›¾è¡¨æ”¯æŒ</strong>ï¼šåŒæ—¶å…¼å®¹ç¡çœ é˜¶æ®µå›¾ï¼ˆæµ…ç¡/æ·±ç¡/REM/æ¸…é†’çŠ¶æ€ï¼‰å’Œå†¥æƒ³æ—¶é•¿å›¾</li>
<li>ğŸ¨ <strong>æ·±åº¦å®šåˆ¶åŒ–</strong>ï¼šæ”¯æŒé¢œè‰²ã€æ ·å¼ã€å¸ƒå±€ã€ç½‘æ ¼çº¿ç­‰å…¨ç»´åº¦è‡ªå®šä¹‰</li>
<li>ğŸ“± <strong>è·¨å¹³å°å…¼å®¹</strong>ï¼šæ— ç¼è¿è¡Œäº Androidã€iOSã€Windows å¹³å°</li>
<li>ğŸ¤ <strong>äº¤äº’ä½“éªŒ</strong>ï¼šæ”¯æŒè§¦æ‘¸æ‹–æ‹½æŒ‡ç¤ºå™¨ï¼ŒæŸ¥çœ‹ä¸åŒæ—¶æ®µçš„è¯¦ç»†æ•°æ®</li>
<li>ğŸ• <strong>ç²¾å‡†æ—¶é—´å±•ç¤º</strong>ï¼šæ¸…æ™°å‘ˆç°æ—¶é—´èŒƒå›´ã€é˜¶æ®µæ—¶é•¿ï¼Œæ”¯æŒè‡ªå®šä¹‰æ—¶é—´æ ¼å¼åŒ–</li>
<li>ğŸ€ <strong>æ ·å¼æ‰©å±•</strong>ï¼šæ”¯æŒè‡ªå®šä¹‰åº•éƒ¨ç»„ä»¶ã€åœ†è§’ã€èƒŒæ™¯è‰²ç­‰å¤–è§‚å±æ€§</li>
<li>ğŸ“– <strong>å®Œå–„æ–‡æ¡£</strong>ï¼šæä¾›å®Œæ•´çš„ API è¯´æ˜å’Œå¯ç›´æ¥è¿è¡Œçš„ç¤ºä¾‹ä»£ç </li>
</ul>
<h2 data-id="heading-3">2. å¿«é€Ÿé›†æˆ</h2>
<p>åœ¨é¡¹ç›®çš„ <code>pubspec.yaml</code> æ–‡ä»¶ä¸­æ·»åŠ æ’ä»¶ä¾èµ–ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">dependencies:</span>
  <span class="hljs-attr">sleep_stage_chart:</span> <span class="hljs-string">^1.1.2</span>  <span class="hljs-comment"># å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬</span>
</code></pre>
<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">flutter pub get
</code></pre>
<h3 data-id="heading-4">2.1. åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<p>æ’ä»¶æä¾›äº†ä¸¤ç§æ ¸å¿ƒå›¾è¡¨åœºæ™¯ï¼šç¡çœ é˜¶æ®µå›¾å’Œå†¥æƒ³æ—¶é•¿å›¾ï¼Œä»¥ä¸‹æ˜¯æœ€ç®€å®ç°ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-5">ç¡çœ é˜¶æ®µå›¾</h4>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:sleep_stage_chart/sleep_stage_chart.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SleepChartDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-comment">// æ„é€ ç¡çœ æ•°æ®ï¼šåŒ…å«é˜¶æ®µç±»å‹ã€èµ·æ­¢æ—¶é—´ã€æè¿°ä¿¡æ¯</span>
    <span class="hljs-keyword">final</span> sleepData = [
      SleepStageDetails(
        model: SleepStageEnum.light,  <span class="hljs-comment">// æµ…ç¡</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">22</span>, <span class="hljs-number">30</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">30</span>),
        info: [<span class="hljs-string">'æµ…ç¡ï¼Œç¡çœ è´¨é‡è‰¯å¥½'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.deep,   <span class="hljs-comment">// æ·±ç¡</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">23</span>, <span class="hljs-number">30</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        info: [<span class="hljs-string">'æ·±ç¡ï¼Œèº«ä½“ä¿®å¤é˜¶æ®µ'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.rem,    <span class="hljs-comment">// REMç¡çœ ï¼ˆå¿«é€Ÿçœ¼åŠ¨ï¼‰</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">15</span>),
        info: [<span class="hljs-string">'REMç¡çœ ï¼Œå¤§è„‘æ´»è·ƒ'</span>],
      ),
      SleepStageDetails(
        model: SleepStageEnum.awake,  <span class="hljs-comment">// æ¸…é†’</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">0</span>),
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">30</span>),
        info: [<span class="hljs-string">'æ¸…é†’ï¼Œå‡†å¤‡èµ·åºŠ'</span>],
      ),
    ];

    <span class="hljs-keyword">return</span> Container(
      height: <span class="hljs-number">300</span>,
      margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
      child: SleepStageChart(
        details: sleepData,  <span class="hljs-comment">// ç¡çœ æ•°æ®ï¼ˆå¿…å¡«ï¼‰</span>
        startTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">22</span>, <span class="hljs-number">30</span>),  <span class="hljs-comment">// å¼€å§‹æ—¶é—´ï¼ˆå¿…å¡«ï¼‰</span>
        endTime: <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">30</span>),     <span class="hljs-comment">// ç»“æŸæ—¶é—´ï¼ˆå¿…å¡«ï¼‰</span>
        backgroundColor: Colors.white,            <span class="hljs-comment">// èƒŒæ™¯è‰²ï¼ˆå¿…å¡«ï¼‰</span>
        heightUnitRatio: <span class="hljs-number">1</span> / <span class="hljs-number">8</span>,                   <span class="hljs-comment">// é«˜åº¦æ¯”ä¾‹å•ä½</span>
        onIndicatorMoved: (stage) {               <span class="hljs-comment">// æŒ‡ç¤ºå™¨ç§»åŠ¨å›è°ƒ</span>
          <span class="hljs-built_in">print</span>(<span class="hljs-string">'å½“å‰é˜¶æ®µï¼š<span class="hljs-subst">${stage.model.name}</span>ï¼Œæ—¶é•¿ï¼š<span class="hljs-subst">${stage.duration}</span>åˆ†é’Ÿ'</span>);
        },
        bottomChild: <span class="hljs-keyword">const</span> [Text(<span class="hljs-string">'å…¥ç¡'</span>), Text(<span class="hljs-string">'èµ·åºŠ'</span>)],  <span class="hljs-comment">// åº•éƒ¨è‡ªå®šä¹‰æ–‡æœ¬</span>
        stageColors: {  <span class="hljs-comment">// è‡ªå®šä¹‰å„é˜¶æ®µé¢œè‰²</span>
          SleepStageEnum.light: Colors.blue.shade300,
          SleepStageEnum.deep: Colors.blue.shade700,
          SleepStageEnum.rem: Colors.teal.shade400,
          SleepStageEnum.awake: Colors.orange.shade300,
        },
      ),
    );
  }
}
</code></pre>
<h4 data-id="heading-6">å†¥æƒ³æ—¶é•¿å›¾</h4>
<p>å†¥æƒ³å›¾è¡¨é€šå¸¸éœ€è¦å±•ç¤ºå…¨å¤©æˆ–ç‰¹å®šæ—¶æ®µçš„å†¥æƒ³åˆ†å¸ƒï¼Œå¯é€šè¿‡ç»Ÿä¸€é¢œè‰²å’Œæ—¶é—´è½´é…ç½®å®ç°ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'package:sleep_stage_chart/sleep_stage_chart.dart'</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MeditationChartDemo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-built_in">DateTime</span> dayStart = <span class="hljs-built_in">DateTime</span>(<span class="hljs-number">2025</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);

  <span class="hljs-meta">@override</span>
  Widget build(BuildContext context) {
    <span class="hljs-keyword">return</span> Container(
      height: <span class="hljs-number">300</span>,
      margin: <span class="hljs-keyword">const</span> EdgeInsets.all(<span class="hljs-number">16</span>),
      child: SleepStageChart(
        details: [
          SleepStageDetails(
            model: SleepStageEnum.light,
            startTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(minutes: <span class="hljs-number">30</span>)),
            endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(minutes: <span class="hljs-number">75</span>)),
            info: [<span class="hljs-string">'æ™¨é—´å†¥æƒ³ï¼Œä¸“æ³¨å‘¼å¸'</span>],
          ),
          SleepStageDetails(
            model: SleepStageEnum.light,
            startTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(hours: <span class="hljs-number">19</span>)),
            endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(hours: <span class="hljs-number">20</span>, minutes: <span class="hljs-number">20</span>)),
            info: [<span class="hljs-string">'ç¡å‰å†¥æƒ³ï¼Œæ”¾æ¾èº«å¿ƒ'</span>],
          ),
        ],
        startTime: dayStart,
        endTime: dayStart.add(<span class="hljs-keyword">const</span> <span class="hljs-built_in">Duration</span>(days: <span class="hljs-number">1</span>)),
        backgroundColor: Colors.transparent,
        heightUnitRatio: <span class="hljs-number">1</span> / <span class="hljs-number">8</span>,
        allDayModel: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// å¼€å¯å…¨å¤©æ¨¡å¼</span>
        minuteInterval: <span class="hljs-number">360</span>,  <span class="hljs-comment">// æ—¶é—´è½´é—´éš”ï¼š6å°æ—¶</span>
        stageColors: <span class="hljs-keyword">const</span> {  <span class="hljs-comment">// ç»Ÿä¸€å†¥æƒ³é¢œè‰²</span>
          SleepStageEnum.light: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.deep: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.rem: Color(<span class="hljs-number">0xFF43CAC4</span>),
          SleepStageEnum.awake: Color(<span class="hljs-number">0xFF43CAC4</span>),
        },
        bottomChild: [<span class="hljs-string">'00:00'</span>, <span class="hljs-string">'06:00'</span>, <span class="hljs-string">'12:00'</span>, <span class="hljs-string">'18:00'</span>, <span class="hljs-string">'00:00'</span>]
            .map((time) =&gt; Text(time, style: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">12</span>)))
            .toList(),
        showVerticalLine: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºç«–çº¿åˆ†éš”</span>
        showHorizontalLine: <span class="hljs-keyword">false</span>,  <span class="hljs-comment">// éšè—æ¨ªçº¿</span>
        borderRadius: <span class="hljs-number">12</span>,  <span class="hljs-comment">// åœ†è§’ä¼˜åŒ–</span>
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-7">2.2. é«˜çº§å®šåˆ¶æŒ‡å—</h3>
<p><code>sleep_stage_chart</code>æä¾›äº†ä¸°å¯Œçš„å®šåˆ¶å±æ€§ï¼Œä»¥ä¸‹æ˜¯å¸¸è§åœºæ™¯çš„å®šåˆ¶æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-8">é¢œè‰²å®šåˆ¶</h4>
<p>é€šè¿‡ <code>stageColors</code> å±æ€§è‡ªå®šä¹‰å„ç¡çœ é˜¶æ®µçš„é¢œè‰²ï¼Œæ”¯æŒæ‰€æœ‰ <code>SleepStageEnum</code> ç±»å‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">stageColors: <span class="hljs-keyword">const</span> {
  SleepStageEnum.light: Color(<span class="hljs-number">0xFFE3F2FD</span>),  <span class="hljs-comment">// æµ…ç¡-æ·¡è“</span>
  SleepStageEnum.deep: Color(<span class="hljs-number">0xFF90CAF9</span>),   <span class="hljs-comment">// æ·±ç¡-ä¸­è“</span>
  SleepStageEnum.rem: Color(<span class="hljs-number">0xFF42A5F5</span>),    <span class="hljs-comment">// REM-æ·±è“</span>
  SleepStageEnum.awake: Color(<span class="hljs-number">0xFFFFE0B2</span>),  <span class="hljs-comment">// æ¸…é†’-æ·¡æ©™</span>
  SleepStageEnum.notWorn: Color(<span class="hljs-number">0xFFF5F5F5</span>),<span class="hljs-comment">// æœªä½©æˆ´-ç°è‰²</span>
  SleepStageEnum.unknown: Color(<span class="hljs-number">0xFFEEEEEE</span>),<span class="hljs-comment">// æœªçŸ¥-æµ…ç°</span>
},
</code></pre>
<h4 data-id="heading-9">ç½‘æ ¼çº¿å®šåˆ¶</h4>
<p>æ§åˆ¶ç½‘æ ¼çº¿çš„æ˜¾ç¤º/éšè—å’Œæ ·å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// æ¨ªçº¿æ ·å¼</span>
horizontalLineStyle: SleepStageChartLineStyle(
  width: <span class="hljs-number">1.0</span>,
  color: Colors.grey.shade200,
  space: <span class="hljs-number">2.0</span>,  <span class="hljs-comment">// è™šçº¿é—´éš”</span>
),
<span class="hljs-comment">// ç«–çº¿æ ·å¼</span>
verticalLineStyle: SleepStageChartLineStyle(
  width: <span class="hljs-number">1.0</span>,
  color: Colors.grey.shade200,
),
showHorizontalLine: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºæ¨ªçº¿</span>
showVerticalLine: <span class="hljs-keyword">true</span>,    <span class="hljs-comment">// æ˜¾ç¤ºç«–çº¿</span>
horizontalLineCount: <span class="hljs-number">6</span>,    <span class="hljs-comment">// æ¨ªçº¿æ•°é‡ï¼ˆåˆ†å‰²å›¾è¡¨é«˜åº¦ï¼‰</span>
</code></pre>
<h4 data-id="heading-10">æ—¶é—´æ ¼å¼åŒ–</h4>
<p>é€šè¿‡ <code>dateFormatter</code> è‡ªå®šä¹‰æ—¶é—´è½´çš„æ˜¾ç¤ºæ ¼å¼ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">dateFormatter: (<span class="hljs-built_in">DateTime</span> date) {
  <span class="hljs-comment">// è‡ªå®šä¹‰æ ¼å¼ï¼šå°æ—¶-åˆ†é’Ÿï¼ˆè¡¥é›¶ï¼‰</span>
  <span class="hljs-keyword">return</span> <span class="hljs-string">'<span class="hljs-subst">${date.hour.toString().padLeft(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>)}</span>:<span class="hljs-subst">${date.minute.toString().padLeft(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>)}</span>'</span>;
},
</code></pre>
<h4 data-id="heading-11">äº¤äº’æ§åˆ¶</h4>
<p>æ§åˆ¶æŒ‡ç¤ºå™¨çš„æ˜¾ç¤ºå’Œå›è°ƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart">hasIndicator: <span class="hljs-keyword">true</span>,  <span class="hljs-comment">// æ˜¾ç¤ºè§¦æ‘¸æŒ‡ç¤ºå™¨</span>
onIndicatorMoved: (SleepStageDetails stage) {
  <span class="hljs-comment">// æŒ‡ç¤ºå™¨ç§»åŠ¨æ—¶å›è°ƒï¼Œå¯ç”¨äºæ›´æ–°è¯¦æƒ…é¢æ¿</span>
  setState(() {
    _currentStage = stage;
    _currentDuration = <span class="hljs-string">'<span class="hljs-subst">${stage.duration}</span>åˆ†é’Ÿ'</span>;
    _currentInfo = stage.info.join(<span class="hljs-string">' '</span>);
  });
},
</code></pre>
<h2 data-id="heading-12">3. æ ¸å¿ƒ API å‚è€ƒ</h2>
<p>ä¸‹é¢æ˜¯æ ¸å¿ƒçš„apiå±æ€§åˆ—ä¸¾ï¼š</p>
<h3 data-id="heading-13">SleepStageChartï¼ˆä¸»ç»„ä»¶ï¼‰</h3>





































































































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>details</code></td><td>List</td><td>-</td><td>æ ¸å¿ƒæ•°æ®ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>startTime</code></td><td>DateTime</td><td>-</td><td>å¼€å§‹æ—¶é—´ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>endTime</code></td><td>DateTime</td><td>-</td><td>ç»“æŸæ—¶é—´ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>backgroundColor</code></td><td>Color</td><td>-</td><td>èƒŒæ™¯è‰²ï¼ˆå¿…å¡«ï¼‰</td></tr><tr><td><code>stageColors</code></td><td>Map&lt;SleepStageEnum, Color&gt;?</td><td>null</td><td>é˜¶æ®µé¢œè‰²æ˜ å°„</td></tr><tr><td><code>heightUnitRatio</code></td><td>double</td><td>-</td><td>é«˜åº¦æ¯”ä¾‹å•ä½</td></tr><tr><td><code>borderRadius</code></td><td>double</td><td>8.0</td><td>åœ†è§’åŠå¾„</td></tr><tr><td><code>showVerticalLine</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºç«–çº¿</td></tr><tr><td><code>showHorizontalLine</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºæ¨ªçº¿</td></tr><tr><td><code>hasIndicator</code></td><td>bool</td><td>true</td><td>æ˜¯å¦æ˜¾ç¤ºè§¦æ‘¸æŒ‡ç¤ºå™¨</td></tr><tr><td><code>onIndicatorMoved</code></td><td>void Function(SleepStageDetails)?</td><td>null</td><td>æŒ‡ç¤ºå™¨ç§»åŠ¨å›è°ƒ</td></tr><tr><td><code>allDayModel</code></td><td>bool</td><td>false</td><td>æ˜¯å¦å¼€å¯å…¨å¤©æ¨¡å¼</td></tr><tr><td><code>minuteInterval</code></td><td>int</td><td>360</td><td>å…¨å¤©æ¨¡å¼æ—¶é—´é—´éš”ï¼ˆåˆ†é’Ÿï¼‰</td></tr><tr><td><code>bottomChild</code></td><td>List</td><td>[]</td><td>åº•éƒ¨è‡ªå®šä¹‰ç»„ä»¶åˆ—è¡¨</td></tr><tr><td><code>dateFormatter</code></td><td>String Function(DateTime)?</td><td>null</td><td>æ—¶é—´æ ¼å¼åŒ–å‡½æ•°</td></tr></tbody></table>
<h3 data-id="heading-14">SleepStageDetailsï¼ˆæ•°æ®æ¨¡å‹ï¼‰</h3>



































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>model</code></td><td>SleepStageEnum</td><td>ç¡çœ /å†¥æƒ³é˜¶æ®µç±»å‹</td></tr><tr><td><code>startTime</code></td><td>DateTime</td><td>é˜¶æ®µå¼€å§‹æ—¶é—´</td></tr><tr><td><code>endTime</code></td><td>DateTime</td><td>é˜¶æ®µç»“æŸæ—¶é—´</td></tr><tr><td><code>info</code></td><td>List</td><td>é˜¶æ®µæè¿°ä¿¡æ¯</td></tr><tr><td><code>duration</code></td><td>int</td><td>æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼Œè‡ªåŠ¨è®¡ç®—ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-15">SleepStageEnumï¼ˆé˜¶æ®µæšä¸¾ï¼‰</h3>





























<table><thead><tr><th>æšä¸¾å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>light</code></td><td>æµ…ç¡/å†¥æƒ³</td></tr><tr><td><code>deep</code></td><td>æ·±ç¡</td></tr><tr><td><code>rem</code></td><td>REMç¡çœ </td></tr><tr><td><code>awake</code></td><td>æ¸…é†’</td></tr><tr><td><code>unknown</code></td><td>æœªçŸ¥çŠ¶æ€</td></tr></tbody></table>
<h2 data-id="heading-16">4. ç¤ºä¾‹Appé¡¹ç›®</h2>
<p>æ’ä»¶æä¾›äº†å®Œæ•´çš„ç¤ºä¾‹é¡¹ç›®ï¼Œå¯ç›´æ¥å…‹éš†æºç è¿è¡Œä½“éªŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†ä»“åº“</span>
git <span class="hljs-built_in">clone</span> https://github.com/wp993080086/sleep_stage_chart.git

<span class="hljs-comment"># è¿›å…¥ç¤ºä¾‹ç›®å½•</span>
<span class="hljs-built_in">cd</span> sleep_stage_chart/example

<span class="hljs-comment"># å®‰è£…ä¾èµ–å¹¶è¿è¡Œ</span>
flutter pub get
flutter run
</code></pre>
<p>ç¤ºä¾‹é¡¹ç›®åŒ…å«äº†ç¡çœ å›¾è¡¨ã€å†¥æƒ³å›¾è¡¨çš„å„ç§å®šåˆ¶åœºæ™¯ï¼Œå¯ç›´æ¥å‚è€ƒå¤ç”¨ã€‚</p>
<h2 data-id="heading-17">5. æ€»ç»“</h2>
<p>sleep_stage_chart æ˜¯ä¸€æ¬¾åŠŸèƒ½å…¨é¢ã€é«˜åº¦å¯å®šåˆ¶çš„ Flutter å¥åº·æ•°æ®å¯è§†åŒ–æ’ä»¶ï¼Œå‡­å€Ÿå…¶ä¼˜é›…çš„è®¾è®¡é£æ ¼ã€æµç•…çš„äº¤äº’ä½“éªŒå’Œè·¨å¹³å°å…¼å®¹æ€§ï¼Œèƒ½å¤Ÿå¿«é€Ÿæ»¡è¶³ç¡çœ å’Œå†¥æƒ³æ•°æ®çš„å¯è§†åŒ–éœ€æ±‚ã€‚æ— è®ºæ˜¯å¿«é€Ÿé›†æˆåŸºç¡€å›¾è¡¨ï¼Œè¿˜æ˜¯æ·±åº¦å®šåˆ¶ç¬¦åˆ App é£æ ¼çš„å¯è§†åŒ–æ•ˆæœï¼Œè¯¥æ’ä»¶éƒ½èƒ½æä¾›ç®€æ´é«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>ç¡çœ ç›‘æµ‹ç±» Appï¼šå±•ç¤ºæ·±ç¡ã€æµ…ç¡ã€REM ç¡çœ å‘¨æœŸåˆ†å¸ƒ</li>
<li>å†¥æƒ³ç±» Appï¼šç»Ÿè®¡æ¯æ—¥/æ¯å‘¨å†¥æƒ³æ—¶é•¿å’Œæ—¶æ®µåˆ†å¸ƒ</li>
<li>å¥åº·ç®¡ç† Appï¼šæ•´åˆç¡çœ ä¸å†¥æƒ³æ•°æ®çš„ç»¼åˆå¯è§†åŒ–</li>
<li>æ™ºèƒ½ç©¿æˆ´è®¾å¤‡é…å¥— Appï¼šåŒæ­¥è®¾å¤‡é‡‡é›†çš„ç¡çœ æ•°æ®å±•ç¤º</li>
</ul>
<p>å¦‚æœä½ çš„é¡¹ç›®ä¸­éœ€è¦å®ç°ç¡çœ å‘¨æœŸåˆ†ææˆ–å†¥æƒ³æ•°æ®å±•ç¤ºï¼Œä¸å¦¨è¯•è¯• sleep_stage_chartï¼Œè®©å¥åº·æ•°æ®å¯è§†åŒ–å¼€å‘æ›´é«˜æ•ˆï¼</p>
<p><strong>ç›¸å…³é“¾æ¥ï¼š</strong></p>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwp993080086%2Fsleep_stage_chart" target="_blank" title="https://github.com/wp993080086/sleep_stage_chart" ref="nofollow noopener noreferrer">GitHubä»“åº“</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwp993080086%2Fsleep_stage_chart%2Fblob%2Fmaster%2FREADME_zh.md" target="_blank" title="https://github.com/wp993080086/sleep_stage_chart/blob/master/README_zh.md" ref="nofollow noopener noreferrer">ä¸­æ–‡æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fsleep_stage_chart" target="_blank" title="https://pub.dev/packages/sleep_stage_chart" ref="nofollow noopener noreferrer">pub.devä»“åº“</a></p>
</li>
</ul>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7570923924365230143" target="_blank" title="https://juejin.cn/post/7570923924365230143">flutterå›¾ç‰‡é€‰æ‹©åº“multi_image_picker_pluså’Œimage_pickerçš„å¯¹æ¯”å’Œä½¿ç”¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7568136081302978623" target="_blank" title="https://juejin.cn/post/7568136081302978623">è§£é”flutterå¼¹çª—æ–°å§¿åŠ¿ï¼šdialog-flutter_smart_dialogæ’ä»¶è§£è¯»+æ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7559089440901545999" target="_blank" title="https://juejin.cn/post/7559089440901545999">flutter-åˆ‡æ¢çŠ¶æ€æ˜¾ç¤ºä¸åŒç»„ä»¶10ç§å®ç°æ–¹æ¡ˆå…¨è§£æ</a></li>
<li><a href="https://juejin.cn/post/7555079970491318308" target="_blank" title="https://juejin.cn/post/7555079970491318308">flutter-è¯¦è§£æ§åˆ¶ç»„ä»¶æ˜¾ç¤ºçš„ä¸¤ç§æ–¹å¼Offstageä¸Visibility</a></li>
<li><a href="https://juejin.cn/post/7535358416182788122" target="_blank" title="https://juejin.cn/post/7535358416182788122">flutter-ä½¿ç”¨AnimatedDefaultTextStyleå®ç°æ–‡æœ¬åŠ¨ç”»</a></li>
<li><a href="https://juejin.cn/post/7537339432291434496" target="_blank" title="https://juejin.cn/post/7537339432291434496">flutter-ä½¿ç”¨SafeAreaç»„ä»¶å¤„ç†å„æœºå‹çš„å®‰å…¨è·ç¦»</a></li>
<li><a href="https://juejin.cn/spost/7537593417099149321" target="_blank" title="https://juejin.cn/spost/7537593417099149321">flutter-å®ç°æ¸å˜è‰²è¾¹æ¡†èƒŒæ™¯ä»¥åŠæ¸å˜è‰²æ–‡å­—</a></li>
<li><a href="https://juejin.cn/post/7543474419240370185" target="_blank" title="https://juejin.cn/post/7543474419240370185">flutter-ä½¿ç”¨confettiåˆ¶ä½œç‚«é…·çº¸å±‘çˆ†ç‚¸ç²’å­åŠ¨ç”»</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576669556150403110</link>    <guid>https://juejin.cn/post/7576669556150403110</guid>    <pubDate>2025-11-26T06:38:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576669556150403110" data-draft-id="7576580177662640138" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,Nginx"/> <meta itemprop="datePublished" content="2025-11-26T06:38:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ´çªæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2538113306470631"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¢«å›½å¤–IPæŒç»­DDOSæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2538113306470631/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ´çªæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T06:38:20.000Z" title="Wed Nov 26 2025 06:38:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    58
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c801015fd006484384445c9421b6ec01~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5rSe56qd5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764811946&amp;x-signature=Tfoe1ntAgSUIr8tgkmb23oANSNE%3D" alt="logo.png" loading="lazy"/></p>
<p>æœ€è¿‘æŒç»­è¢«ä¸œå—äºšçš„å‡ ä¸ªIPæŒç»­æ”»å‡»ï¼Œæˆ‘ç”¨çš„æ˜¯é˜¿é‡Œäº‘çš„å…è´¹åº”ç”¨é˜²ç«å¢™ï¼Œä¸€ç›´æ²¡ä»€ä¹ˆå¥½åŠæ³•ã€‚ä»Šå¤©çœ‹åˆ°äº†å‡ ä¸ªå…è´¹çš„IPåº“ï¼Œä¸€ä¸‹å­å°±æƒ³åˆ°äº†å¦‚æœæˆ‘ç›´æ¥å±è”½è¿™äº›æ¥æºå›½å®¶çš„è®¿é—®ä¸å°±å¥½äº†ã€‚</p>
<p>åœ¨ç½‘ç«™è¿è¥ã€ç½‘ç»œå®‰å…¨æˆ–æµé‡ç®¡æ§åœºæ™¯ä¸­ï¼ŒæŒ‰å›½å®¶/åœ°åŒºé™åˆ¶IPè®¿é—®ï¼ˆå¦‚ä»…å…è®¸å›½å†…IPè®¿é—®ã€å±è”½ç‰¹å®šå›½å®¶IPï¼‰æ˜¯å¸¸è§éœ€æ±‚ã€‚å®ç°è¿™ä¸€éœ€æ±‚çš„æ ¸å¿ƒæ­¥éª¤æ˜¯ï¼šè·å–ç›®æ ‡å›½å®¶çš„IPæ®µ â†’ å°†IPæ®µé…ç½®åˆ° Nginx ä¸­ç”Ÿæ•ˆã€‚æœ¬æ–‡å°†è¯¦ç»†è®²è§£å¦‚ä½•é€šè¿‡Node.jsæˆ–Shellè„šæœ¬è·å–å›½å®¶IPæ®µï¼Œå¹¶ç»“åˆ Nginx çš„geoæ¨¡å—å®Œæˆé…ç½®ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é€‰æ‹© IP æ•°æ®æº</h2>
<p>è·å–å›½å®¶ IP æ®µçš„å‰ææ˜¯é€‰æ‹©å¯é çš„æ•°æ®æºï¼Œç›®å‰ä¸»æµå…è´¹/å•†ç”¨æ•°æ®æºåŒ…æ‹¬ï¼š</p>
<h3 data-id="heading-1">1. MaxMind GeoLite2</h3>
<p>MaxMind æ˜¯å…¨çƒçŸ¥åçš„ IP åœ°ç†ä¿¡æ¯æœåŠ¡å•†ï¼Œæä¾›å…è´¹çš„ GeoLite2 æ•°æ®åº“ï¼ˆéœ€æ³¨å†Œè´¦å·ï¼‰ï¼ŒåŒ…å« IPv4/IPv6 çš„å›½å®¶ / åœ°åŒºæ˜ å°„ï¼Œæ•°æ®ç²¾åº¦é«˜ä¸”æ›´æ–°åŠæ—¶ï¼ˆæ¯æœˆæ›´æ–°ï¼‰ã€‚</p>
<h3 data-id="heading-2">2. apnic</h3>
<p>apnicæä¾›å…è´¹å¯ç›´æ¥è·å–çš„IPä¿¡æ¯ï¼Œç›´æ¥ä¸‹è½½å°±èƒ½è·å–æœ€æ–°çš„IPæ•°æ®ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-3">3. å…¶ä»–</h3>
<ul>
<li>ip2regionï¼šå›½å†…å¼€æºçš„ IP å®šä½åº“ï¼Œæ”¯æŒå›½å®¶ / åŸå¸‚çº§æ˜ å°„ï¼Œæ•°æ®æ–‡ä»¶å°ï¼ˆçº¦ 10MBï¼‰ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ã€‚</li>
<li>17monipï¼ˆçº¯çœŸ IPï¼‰ï¼šå›½å†…å¸¸ç”¨çš„ IP åº“ï¼Œéœ€å®šæœŸä¸‹è½½æ›´æ–°åŒ…ã€‚</li>
<li>IP2Location LITEï¼šç±»ä¼¼ GeoLite2 çš„å…è´¹æ•°æ®åº“ï¼Œæä¾› CSV/MMDB æ ¼å¼ã€‚</li>
</ul>
<p>æœ¬æ–‡ä»¥apnicä¸ºä¾‹è®²è§£ï¼ˆå…¼å®¹æ€§å’Œæ˜“ç”¨æ€§æœ€ä¼˜ï¼‰ã€‚</p>
<h2 data-id="heading-4">äºŒã€è·å–å›½å®¶ IP æ®µçš„æ–¹æ³•</h2>
<h3 data-id="heading-5">æ–¹æ³• 1ï¼šä½¿ç”¨bashè„šæœ¬è·å–å¹¶å¤„ç†</h3>
<p>è¿™ç§æ–¹å¼é€‚åˆlinuxç³»ç»Ÿä¸‹çš„ç®€å•ä½¿ç”¨ï¼Œå…¼å®¹centosã€ubuntuç­‰ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-6">æ­¥éª¤ä¸€ï¼šè·å–æ•°æ®</h4>
<p>å¯ä»¥ä½¿ç”¨<code>wget</code>æˆ–è€…<code>curl</code>è¿™ç§å‘½ä»¤ç›´æ¥ä»è¿œç¨‹ä¸‹è½½è„šæœ¬ï¼Œè„šæœ¬åœ°å€å–æœ€æ–°æ•°æ®<code>http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest</code>ï¼Œè„šæœ¬å†…å®¹ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">wget -c -O /tmp http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest

curl -C - -o /tmp http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest
</code></pre>
<h3 data-id="heading-7">æ­¥éª¤äºŒï¼šå¤„ç†æ•°æ®</h3>
<p>å®˜æ–¹æä¾›çš„æ•°æ®é€šå¸¸éƒ½æ˜¯txtæ ¼å¼çš„ï¼Œé€è¡Œè¿›è¡Œæ’åˆ—çš„æ•°æ®ã€‚æˆ‘ä»¬è¦ä½¿ç”¨è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œè§£æï¼ŒæŠŠæˆ‘ä»¬éœ€è¦çš„æ•°æ®å•ç‹¬è·å–å‡ºæ¥ã€‚å¯ä»¥ä½¿ç”¨è„šæœ¬çš„<code>awk</code>å‘½ä»¤è¿›è¡Œå¤„ç†ã€‚</p>
<p><code>awk</code>çš„å‘½ä»¤æ ¼å¼:</p>
<pre><code class="hljs language-bash" lang="bash">awk [å‚æ•°] [å¤„ç†å†…å®¹] [æ“ä½œå¯¹è±¡]
</code></pre>
<h3 data-id="heading-8">å®Œæ•´è„šæœ¬</h3>
<p>æˆ‘ä»¬å‡è®¾è¦æŠŠæ•°æ®å¤„ç†æˆâ€œèµ·å§‹IP|æ•°é‡/å‰ç¼€é•¿åº¦|æ³¨å†Œæœºæ„|å›½å®¶ä»£ç â€çš„æ ¼å¼ï¼ŒæŒ‰ç…§è¿™ä¸ªé€»è¾‘ï¼Œå†åŠ ä¸Šé”™è¯¯å¤„ç†ï¼Œæˆ‘ä»¬è¾“å‡ºä»¥ä¸‹è„šæœ¬ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">set</span> -eu  <span class="hljs-comment"># ç§»é™¤ pipefailï¼Œå…¼å®¹ä½ç‰ˆæœ¬ Bashï¼Œä¿ç•™å…³é”®é”™è¯¯æ£€æŸ¥</span>

<span class="hljs-comment"># è„šæœ¬é…ç½®</span>
URL=<span class="hljs-string">"http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest"</span>
DOWNLOAD_DIR=<span class="hljs-string">"/root/apnic"</span>
DOWNLOAD_FILENAME=<span class="hljs-string">"delegated-apnic-latest"</span>
IPV4_OUTPUT_FILENAME=<span class="hljs-string">"apnic_ipv4.txt"</span>
IPV6_OUTPUT_FILENAME=<span class="hljs-string">"apnic_ipv6.txt"</span>

<span class="hljs-comment"># å¸®åŠ©ä¿¡æ¯</span>
<span class="hljs-function"><span class="hljs-title">show_help</span></span>() {
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ç”¨æ³•ï¼š<span class="hljs-variable">$0</span> --download-dir &lt;ä¸‹è½½ç›®å½•&gt; [--temp-dir &lt;ä¸´æ—¶ç›®å½•&gt;]"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"é€‰é¡¹ï¼š"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  --download-dir  å¯é€‰ï¼Œæ–‡ä»¶ä¸‹è½½ä¿å­˜ç›®å½•"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"  -h/--help       æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯"</span>
}

<span class="hljs-comment"># è§£æå‘½ä»¤è¡Œå‚æ•°</span>
<span class="hljs-function"><span class="hljs-title">parse_args</span></span>() {

    <span class="hljs-keyword">while</span> [[ <span class="hljs-variable">$#</span> -gt 0 ]]; <span class="hljs-keyword">do</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"<span class="hljs-variable">$1</span>"</span> <span class="hljs-keyword">in</span>
            --download-dir)
                DOWNLOAD_DIR=<span class="hljs-string">"<span class="hljs-variable">$2</span>"</span>
                <span class="hljs-built_in">shift</span> 2
                ;;
            -h|--<span class="hljs-built_in">help</span>)
                show_help
                <span class="hljs-built_in">exit</span> 0
                ;;
            *)
                <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæœªçŸ¥å‚æ•° <span class="hljs-variable">$1</span>"</span>
                show_help
                <span class="hljs-built_in">exit</span> 1
                ;;
        <span class="hljs-keyword">esac</span>
    <span class="hljs-keyword">done</span>
}

<span class="hljs-comment"># æ£€æŸ¥ä¾èµ–å·¥å…·ï¼ˆwget æˆ– curlï¼‰</span>
<span class="hljs-function"><span class="hljs-title">check_dependencies</span></span>() {
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">command</span> -v wget &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        DOWNLOAD_TOOL=<span class="hljs-string">"wget"</span>
    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">command</span> -v curl &amp;&gt; /dev/null; <span class="hljs-keyword">then</span>
        DOWNLOAD_TOOL=<span class="hljs-string">"curl"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæœªæ‰¾åˆ° wget æˆ– curlï¼Œè¯·å…ˆå®‰è£…å…¶ä¸­ä¸€ä¸ªå·¥å…·"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
}

<span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶ + æ ¡éªŒæ–‡ä»¶æœ‰æ•ˆæ€§</span>
<span class="hljs-function"><span class="hljs-title">download_file</span></span>() {
    <span class="hljs-built_in">local</span> download_path=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${DOWNLOAD_FILENAME}</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å¼€å§‹ä¸‹è½½æ–‡ä»¶ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"URL: <span class="hljs-variable">$URL</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¿å­˜è·¯å¾„: <span class="hljs-variable">$download_path</span>"</span>

    <span class="hljs-comment"># æ£€æŸ¥ä¸‹è½½ç›®å½•æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> [[ ! -d <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_DIR</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_DIR</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šæ— æ³•åˆ›å»ºä¿æŒç›®å½• <span class="hljs-variable">$DOWNLOAD_DIR</span>"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># ä¸‹è½½æ–‡ä»¶ï¼ˆæ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ <span class="hljs-string">"<span class="hljs-variable">$DOWNLOAD_TOOL</span>"</span> == <span class="hljs-string">"wget"</span> ]]; <span class="hljs-keyword">then</span>
        wget -c -O <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$URL</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šwget ä¸‹è½½å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼‰"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">else</span>
        curl -C - -o <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$URL</span>"</span> || {
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šcurl ä¸‹è½½å¤±è´¥ï¼ˆå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨å¼‚å¸¸ï¼‰"</span>
            <span class="hljs-built_in">exit</span> 1
        }
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># æ ¡éªŒä¸‹è½½æ–‡ä»¶æ˜¯å¦ä¸ºç©º</span>
    <span class="hljs-keyword">if</span> [[ ! -s <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯ï¼šä¸‹è½½çš„æ–‡ä»¶ä¸ºç©ºï¼Œè¯·æ£€æŸ¥ URL æˆ–ç½‘ç»œè¿æ¥"</span>
        <span class="hljs-built_in">rm</span> -f <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span>  <span class="hljs-comment"># åˆ é™¤ç©ºæ–‡ä»¶</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== æ–‡ä»¶ä¸‹è½½å®Œæˆï¼ˆå¤§å°ï¼š<span class="hljs-subst">$(du -sh <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> | awk '{print $1}')</span>ï¼‰==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"ä¸‹è½½æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$download_path</span>"</span>
    <span class="hljs-built_in">echo</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># è§£æå¹¶ç­›é€‰ IPv4/IPv6ï¼ˆå®¹é”™å¢å¼ºï¼‰</span>
<span class="hljs-function"><span class="hljs-title">parse_and_filter_ip</span></span>() {
    <span class="hljs-built_in">local</span> download_path=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${DOWNLOAD_FILENAME}</span>"</span>
    <span class="hljs-built_in">local</span> ipv4_output=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${IPV4_OUTPUT_FILENAME}</span>"</span>
    <span class="hljs-built_in">local</span> ipv6_output=<span class="hljs-string">"<span class="hljs-variable">${DOWNLOAD_DIR}</span>/<span class="hljs-variable">${IPV6_OUTPUT_FILENAME}</span>"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== å¼€å§‹è§£ææ–‡ä»¶ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æºæ–‡ä»¶: <span class="hljs-variable">$download_path</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è§£æç›®å½•: <span class="hljs-variable">$DOWNLOAD_DIR</span>"</span>

    <span class="hljs-comment"># æ¸…ç©ºè¾“å‡ºæ–‡ä»¶ï¼ˆé¿å…æ®‹ç•™æ—§æ•°æ®ï¼‰</span>
    &gt; <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span>
    &gt; <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span>

    <span class="hljs-comment"># ç­›é€‰è§„åˆ™ï¼š</span>
    <span class="hljs-comment"># 1. è·³è¿‡æ³¨é‡Šè¡Œï¼ˆä»¥ # å¼€å¤´ï¼‰å’Œç©ºè¡Œ</span>
    <span class="hljs-comment"># 2. ç¬¬ 3 åˆ—ï¼ˆtypeï¼‰ä¸º ipv4/ipv6 çš„è¡Œ</span>
    <span class="hljs-comment"># 3. è¾“å‡ºæ ¼å¼ï¼šèµ·å§‹IP|æ•°é‡/å‰ç¼€é•¿åº¦|æ³¨å†Œæœºæ„|å›½å®¶ä»£ç ï¼ˆå­—æ®µ 4|5|1|2ï¼‰</span>
    <span class="hljs-comment"># ç”¨ awk å¤„ç†ï¼Œå³ä½¿éƒ¨åˆ†è¡Œæ ¼å¼å¼‚å¸¸ä¹Ÿä¸ä¸­æ–­</span>
    awk -F <span class="hljs-string">'|'</span> <span class="hljs-string">'
        !/^#/ &amp;&amp; NF &gt;= 6 {  # åªå¤„ç†éæ³¨é‡Šè¡Œä¸”å­—æ®µæ•°â‰¥6çš„è¡Œ
            if ($3 == "ipv4") {
                print $4 "|" $5 "|" $1 "|" $2 &gt;&gt; "'</span><span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span><span class="hljs-string">'"
            } else if ($3 == "ipv6") {
                print $4 "|" $5 "|" $1 "|" $2 &gt;&gt; "'</span><span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span><span class="hljs-string">'"
            }
        }
    '</span> <span class="hljs-string">"<span class="hljs-variable">$download_path</span>"</span> || {
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šéƒ¨åˆ†è¡Œæ ¼å¼å¼‚å¸¸ï¼Œå·²è·³è¿‡"</span>
    }

    <span class="hljs-comment"># æ£€æŸ¥ç­›é€‰ç»“æœï¼ˆå…è®¸å…¶ä¸­ä¸€ç§IPç±»å‹ä¸ºç©ºï¼Œé¿å…è¯¯åˆ¤ï¼‰</span>
    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv4 ç­›é€‰å®Œæˆï¼Œè®°å½•æ•°ï¼š<span class="hljs-subst">$(wc -l &lt; <span class="hljs-string">"<span class="hljs-variable">$ipv4_output</span>"</span>)</span> è¡Œ"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šæœªç­›é€‰åˆ° IPv4 æ•°æ®ï¼ˆå¯èƒ½æ–‡ä»¶æ ¼å¼å˜æ›´æˆ–æ— ç›¸å…³è®°å½•ï¼‰"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-keyword">if</span> [[ -s <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span> ]]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv6 ç­›é€‰å®Œæˆï¼Œè®°å½•æ•°ï¼š<span class="hljs-subst">$(wc -l &lt; <span class="hljs-string">"<span class="hljs-variable">$ipv6_output</span>"</span>)</span> è¡Œ"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"è­¦å‘Šï¼šæœªç­›é€‰åˆ° IPv6 æ•°æ®ï¼ˆå¯èƒ½æ–‡ä»¶æ ¼å¼å˜æ›´æˆ–æ— ç›¸å…³è®°å½•ï¼‰"</span>
    <span class="hljs-keyword">fi</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== è§£æç­›é€‰å®Œæˆ ==="</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv4 æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$ipv4_output</span>"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"IPv6 æ–‡ä»¶è·¯å¾„: <span class="hljs-variable">$ipv6_output</span>"</span>
    <span class="hljs-built_in">echo</span>
    <span class="hljs-built_in">return</span> 0
}

<span class="hljs-comment"># ä¸»æµç¨‹</span>
<span class="hljs-function"><span class="hljs-title">main</span></span>() {
    parse_args <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
    check_dependencies
    download_file
    parse_and_filter_ip

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"=== ä»»åŠ¡å…¨éƒ¨å®Œæˆ ==="</span>
}

<span class="hljs-comment"># å¯åŠ¨è„šæœ¬</span>
main <span class="hljs-string">"<span class="hljs-variable">$@</span>"</span>
</code></pre>
<p>è„šæœ¬é¦–å…ˆè®¾ç½®é»˜è®¤å˜é‡ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤çš„å­˜å‚¨ä½ç½®æ˜¯<code>/root/apnic</code>ï¼Œç„¶åå†æŠŠæœ€æ–°æ•°æ®ä¸‹è½½åˆ°æ–‡ä»¶é‡Œï¼Œé€šè¿‡å‘½ä»¤ç­›é€‰æˆ‘ä»¬éœ€è¦çš„æ•°æ®åˆ†åˆ«å­˜åˆ°å¯¹åº”çš„æ–‡ä»¶ä¸­ã€‚</p>
<h3 data-id="heading-9">æ–¹æ³• 2ï¼šNode.jså¤„ç†æ•°æ®</h3>
<p>ä½¿ç”¨nodejsæ•´ä½“æµç¨‹è®¾è®¡ä¸Šå°±ä¸éœ€è¦ä¸´æ—¶å­˜å‚¨æ–‡ä»¶äº†ï¼Œæˆ‘ä»¬ç›´æ¥æ¯æ¬¡è·å–ä¹‹ååœ¨å†…å­˜ä¸­å°±å…¨éƒ¨å¤„ç†å®Œæˆã€‚æ•´ä½“å¤„ç†å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">'axios'</span>);
<span class="hljs-comment">// è¦å…è®¸é€šè¿‡çš„å›½å®¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ALLowList</span> = [<span class="hljs-string">'CN'</span>, <span class="hljs-string">'HK'</span>, <span class="hljs-string">'MO'</span>, <span class="hljs-string">'TW'</span>];

<span class="hljs-comment">// è·å–è¿œç¨‹æ•°æ®</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getApnicTxt</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'http://ftp.apnic.net/apnic/stats/apnic/delegated-apnic-latest'</span>);
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">data</span>;
}

<span class="hljs-comment">// apnic|BD|ipv4|103.132.248.0|1024|20190116|allocated</span>
<span class="hljs-comment">// apnic|ID|ipv6|2001:df0:f180::|48|20190718|assigned</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createIpRecord</span>(<span class="hljs-params">line, dot = <span class="hljs-string">'24'</span></span>) {
    <span class="hljs-keyword">const</span> parts = line.<span class="hljs-title function_">split</span>(<span class="hljs-string">'|'</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">ALLowList</span>.<span class="hljs-title function_">includes</span>(parts[<span class="hljs-number">1</span>])) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">`allow <span class="hljs-subst">${parts[<span class="hljs-number">3</span>]}</span>/<span class="hljs-subst">${dot}</span>; #<span class="hljs-subst">${parts[<span class="hljs-number">1</span>]}</span>`</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-string">`deny <span class="hljs-subst">${parts[<span class="hljs-number">3</span>]}</span>/<span class="hljs-subst">${dot}</span>; #<span class="hljs-subst">${parts[<span class="hljs-number">1</span>]}</span>`</span>;
}

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> txts = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getApnicTxt</span>();
    <span class="hljs-keyword">const</span> list = txts.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);
    <span class="hljs-keyword">const</span> ipv4list = [];
    <span class="hljs-keyword">const</span> ipv6list = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>; index &lt; list.<span class="hljs-property">length</span>; index++) {
        <span class="hljs-keyword">const</span> txt = list[index];
        <span class="hljs-keyword">if</span> (txt.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'|ipv4|'</span>)) {
            ipv4list.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">createIpRecord</span>(txt));
        }
        <span class="hljs-keyword">if</span> (txt.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'|ipv6|'</span>)) {
            ipv6list.<span class="hljs-title function_">push</span>(<span class="hljs-title function_">createIpRecord</span>(txt, <span class="hljs-string">'32'</span>));
        }
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ipv4list'</span>, ipv4list);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ipv4list'</span>, ipv6list);
}

<span class="hljs-title function_">main</span>();
</code></pre>
<p>è„šæœ¬ä¸­åŒæ ·æ˜¯å…ˆè·å–æœ€æ–°çš„æ•°æ®ï¼Œç„¶åç›´æ¥äº¤ç»™å¤„ç†å‡½æ•°è¿›è¡Œåˆ†æ‰¹å¤„ç†ã€‚è¿™é‡Œæˆ‘ä»¬å‡è®¾å¤„ç†çš„ç»“æœæ˜¯ç»™nginxä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥åœ¨ç»“æ„ä¸Šå¢åŠ <code>allow</code>å’Œ<code>deny</code>å‰ç¼€ï¼Œæ–¹ä¾¿åœ¨nginxä¸­ç›´æ¥ä½¿ç”¨ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€é…ç½®nginxæ–‡ä»¶</h2>
<h3 data-id="heading-11">æ–¹æ³•1ï¼šä½¿ç”¨<code>allow</code>è¿›è¡Œç®¡ç†</h3>
<p>è¿™ç§é…ç½®æ–¹å¼å…¼å®¹æ–°è€ç‰ˆæœ¬çš„nginxï¼Œåªéœ€è¦åœ¨nginxä¸­æå‰å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œæ¯æ¬¡æ›´æ–°é…ç½®æ–‡ä»¶å†…å®¹ä¹‹åé‡å¯nginxå°±èƒ½è¾¾åˆ°è‡ªåŠ¨å…è®¸å’Œæ‹’ç»æ¥æºå›½å®¶çš„è®¿é—®åœ°å€ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx">server {
Â  Â  listen 80;
Â  Â  listen [::]:80;
Â  Â  server_name your-domain.com;

Â  Â  # å¼•å…¥å…è®¸çš„IPç™½åå•
Â  Â  include /etc/nginx/conf.d/china-ipv4.conf;
Â  Â  include /etc/nginx/conf.d/china-ipv6.conf;

Â  Â  # å¯é€‰ï¼šæ”¾è¡Œæœ¬åœ°å›ç¯ï¼ˆé¿å…è‡ªå·±è¢«æ‹¦ï¼‰
Â  Â  allow 127.0.0.1;
Â  Â  allow ::1;

Â  Â  # æ‹’ç»æ‰€æœ‰æœªåŒ¹é…çš„è¯·æ±‚
Â  Â  deny all;

Â  Â  location / {
Â  Â  Â  Â  root /var/www/html;
Â  Â  Â  Â  index index.html;
Â  Â  Â  Â  # ä½ çš„å…¶ä»–é…ç½®...
Â  Â  }
}
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šé…ç½®å°±å¯ä»¥è¾¾åˆ°åªå…è®¸æˆ‘ä»¬éœ€è¦çš„è®¿é—®ï¼Œå…¶ä»–å›½å®¶è®¿é—®ä¸€å¾‹ç¦æ­¢ã€‚</p>
<h3 data-id="heading-12">æ–¹æ³•2ï¼šä½¿ç”¨geoæ¨¡å—</h3>
<p>Nginx é€šè¿‡geoæ¨¡å—ï¼ˆé»˜è®¤ç¼–è¯‘ï¼‰å®ç° IP æ®µçš„å¿«é€ŸåŒ¹é…ï¼Œè¯¥æ¨¡å—å°† IP æ®µåŠ è½½åˆ°å†…å­˜ä¸­ï¼ŒæŸ¥è¯¢æ•ˆç‡æé«˜ï¼ˆä¸å— IP æ®µæ•°é‡å½±å“ï¼‰ã€‚</p>
<pre><code class="hljs language-nginx" lang="nginx">http {
    # å®šä¹‰IPv4çš„å›½å®¶åŒ¹é…å˜é‡ï¼ˆ$is_cn_v4ï¼š1=ä¸­å›½IPï¼Œ0=éä¸­å›½IPï¼‰
    geo $is_cn_v4 {
        default 0;
        include /etc/nginx/conf.d/cn-ipv4.conf;  # å¼•å…¥ä¸­å›½IPv4æ®µæ–‡ä»¶
    }

    # å®šä¹‰IPv6çš„å›½å®¶åŒ¹é…å˜é‡ï¼ˆå¦‚éœ€æ”¯æŒIPv6ï¼‰
    geo $is_cn_v6 {
        default 0;
        include /etc/nginx/conf.d/cn-ipv6.conf;  # å¼•å…¥ä¸­å›½IPv6æ®µæ–‡ä»¶
    }

    # åˆå¹¶IPv4/IPv6çš„åŒ¹é…ç»“æœ
    map $scheme $is_cn {
        http $is_cn_v4;
        https $is_cn_v4;
        httpv6 $is_cn_v6;
        httpsv6 $is_cn_v6;
    }

    server {
      listen 80;
      listen [::]:80;
      server_name yourdomain.com;

      # éä¸­å›½IPè¿”å›403
      if ($is_cn != 1) {
          return 403;
      }

      # æ­£å¸¸ä¸šåŠ¡é…ç½®...
      location / {
          root /var/www/html;
          index index.html;
      }
  }
}
</code></pre>
<p>é€šè¿‡ä½¿ç”¨nginxçš„geoæ¨¡å—å¯ä»¥éå¸¸å¿«é€Ÿçš„è¯†åˆ«åˆ°ipå¯¹åº”çš„å›½å®¶ï¼Œç„¶ååœ¨å…·ä½“çš„è·¯ç”±ä¸­é€šè¿‡è‡ªåŠ¨ä¸€åˆ¤æ–­æ¥è¿”å›è‡ªå·±æƒ³è¦è¿”å›çš„å†…å®¹ã€‚åŒæ ·çš„ï¼Œé…ç½®æ–‡ä»¶æ›´æ–°ä¹‹åè¦é‡æ–°å¯åŠ¨nginxæœåŠ¡ã€‚</p>
<h3 data-id="heading-13">å…¶ä»–å‘½ä»¤</h3>
<p>æ£€æŸ¥nginxé…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®ã€‚</p>
<pre><code class="hljs">nginx -t
</code></pre>
<p>é‡æ–°å¯åŠ¨nginxã€‚</p>
<pre><code class="hljs">systemctl restart nginx
</code></pre>
<p>ä¸¥é‡IPåŒ¹é…çš„æ•ˆæœã€‚</p>
<pre><code class="hljs language-bash" lang="bash">curl -H <span class="hljs-string">"X-Forwarded-For: 8.8.8.8"</span> http://yourdomain.com  <span class="hljs-comment"># 8.8.8.8ä¸ºç¾å›½IP</span>
</code></pre>
<h2 data-id="heading-14">å››ã€æ³¨æ„äº‹é¡¹</h2>
<p>åœ¨å…·ä½“çš„ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜æœ‰ä¸€äº›æ˜¯éœ€è¦ç‰¹åˆ«æ³¨æ„çš„ï¼š</p>
<ol>
<li>geoå’Œallowçš„é…ç½®æ–‡ä»¶æ ¼å¼æ˜¯ä¸ä¸€æ ·çš„ã€‚</li>
<li>å¦‚æœä½¿ç”¨äº‘æœåŠ¡åšè½¬å‘ï¼Œæ¥æºipæ˜¯äº‘æœåŠ¡çš„åœ°å€ï¼Œéœ€è¦é¢å¤–å¢åŠ IPé€ä¼ çš„åŠŸèƒ½ã€‚</li>
<li>è¿œç¨‹åœ°å€çš„æ›´æ–°æ²¡é‚£ä¹ˆå¿«ï¼Œå¯ä»¥è®¾ç½®æ¯éš”ä¸€å‘¨æ¥å®šæ—¶æ›´æ–°ä¸€æ¬¡ã€‚æŒç»­è®¿é—®å¯èƒ½ä¼šè¢«å®˜æ–¹å°ç¦å“¦ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP]]></title>    <link>https://juejin.cn/post/7576555431943503882</link>    <guid>https://juejin.cn/post/7576555431943503882</guid>    <pubDate>2025-11-26T03:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576555431943503882" data-draft-id="7496341294567800883" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP"/> <meta itemprop="keywords" content="å‰ç«¯,Node.js,NestJS"/> <meta itemprop="datePublished" content="2025-11-26T03:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å­Ÿç¥¥_æˆéƒ½"/> <meta itemprop="url" content="https://juejin.cn/user/96412752684744"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ Nestjs åº•å±‚æ¦‚å¿µï¼ˆ1ï¼‰ï¼šä¾èµ–æ³¨å…¥å’Œé¢å‘åˆ‡é¢ç¼–ç¨‹ AOP
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/96412752684744/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å­Ÿç¥¥_æˆéƒ½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:04:24.000Z" title="Wed Nov 26 2025 03:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡ä¿è¯ç»å¯¹å¤§ç™½è¯ï¼ç®€å•æ˜“æ‡‚!</p>
<p>æœ€è¿‘è·Ÿä¸€ä¸ªå¥½å‹è®¨è®ºï¼Œä»–è¯´æƒ³å­¦ä¹  <code>node.js</code> åç«¯æ¡†æ¶ <code>nest.js</code>ï¼Œä½†å¯¹äº <code>nest.js</code> çš„ä¸‹é¢ç”¨æ³•ä¸€å¤´é›¾æ°´ï¼Œä¸ºä»€ä¹ˆè¦è¿™ä¹ˆç”¨å‘¢ï¼Ÿä»€ä¹ˆ <code>Contoller</code>, <code>Provider</code>ï¼Œæ€ä¹ˆè·Ÿä¸€èˆ¬çš„ <code>javascript</code> ä»£ç çš„ç”¨æ³•å®Œå…¨ä¸ä¸€æ ·å‘¢ï¼Ÿå¦‚ä¸‹çš„ <code>@Controller</code>,<code>@Injectable</code> ä½ ç†è§£æ˜¯ä»€ä¹ˆæ„æ€å—ï¼Ÿä¸ºä»€ä¹ˆè¦ç”¨è¿™æ ·çš„æ–¹å¼ç»„ç»‡ä»£ç å‘¢ï¼Ÿ</p>
<pre><code class="hljs language-Javascript" lang="Javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Cat</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./interfaces/cat.interface'</span>;


@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}

@<span class="hljs-title class_">Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsService</span> {
  private readonly <span class="hljs-attr">cats</span>: <span class="hljs-title class_">Cat</span>[] = [];

  <span class="hljs-title function_">create</span>(<span class="hljs-params">cat: Cat</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>.<span class="hljs-title function_">push</span>(cat);
  }

  <span class="hljs-title function_">findAll</span>(): <span class="hljs-title class_">Cat</span>[] {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">cats</span>;
  }
}

</code></pre>
<p>åŸºäºæ­¤ï¼Œæˆ‘å†™äº†è¿™ç¯‡æ–‡ç« ï¼Œå¸®åŠ©å¤§å®¶ä» 0 å¼€å§‹ï¼Œå±‚å±‚é€’è¿›åˆ°æ‰€æœ‰è¿™äº›è®©ä½ é™Œç”Ÿçš„ <code>nest.js</code> çš„æ¦‚å¿µï¼</p>
<h2 data-id="heading-1">ä»ç¼–ç¨‹èŒƒå¼è¯´èµ·</h2>
<p>ç¼–ç¨‹èŒƒå¼åœ¨ä¹‹å‰é¢è¯•ç»å¸¸è¢«é—®åˆ°äº†ï¼Œä»€ä¹ˆ <code>FP</code>(å‡½æ•°å¼ç¼–ç¨‹)ï¼Œ<code>RP</code>(å“åº”å¼ç¼–ç¨‹)ï¼Œ<code>FRP</code>ï¼ˆå‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œè¿˜æœ‰æˆ‘ä»¬ç†ŸçŸ¥çš„å¤§å…„å¼Ÿ <code>é¢ç›¸å¯¹è±¡ç¼–ç¨‹</code>ï¼Œç°åœ¨ <code>nest.js</code> åˆæ¥ä¸ª <code>AOP</code>ï¼ˆé¢ç›¸åˆ‡é¢ç¼–ç¨‹ï¼‰ï¼Œå±å®è®©äººè’™åœˆäº†ã€‚ã€‚ã€‚ã€‚å¤ªå¤šæ¦‚å¿µäº†ã€‚</p>
<p>åˆ«æ€¥ï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ¥ï¼</p>
<h3 data-id="heading-2">å‡½æ•°å¼ç¼–ç¨‹ - FP</h3>
<p>ç®€å•æ¥è¯´å°±æ˜¯è¦æ±‚ä½ ä½¿ç”¨çº¯å‡½æ•°ï¼Œä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Œå°±æ˜¯è¾“å…¥ä¸€å®šçš„æ—¶å€™è¾“å‡ºä¸€å®šï¼Œå°±æ˜¯ä¼ å…¥ç›¸åŒçš„å‚æ•°å¾—åˆ°ç›¸åŒçš„ç»“æœã€‚å°±è¿™ä¹ˆç®€å•ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b</span>) {
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<p>å¸¸è§æœ‰å‡ ç§æƒ…å†µä¼šå½±å“çº¯å‡½æ•°çš„çº¯å‡€ï¼Œæœ€å¸¸è§å°±æ˜¯ï¼š</p>
<ul>
<li>ä¿®æ”¹ä¼ å‚çš„å€¼ï¼Œæˆ–è€…å¼•ç”¨ï¼Œæˆ–è€…å…¨å±€çŠ¶æ€ï¼Œæ”¹ DOMï¼Œä¾‹å¦‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">a, b, c</span>) { 
     <span class="hljs-comment">// å‡è®¾ c ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼Œc çš„ xx å±æ€§è¢«ä¿®æ”¹</span>
     c.<span class="hljs-property">xx</span> = a + b; <span class="hljs-comment">// ä¿®æ”¹ä¼ å‚çš„å€¼</span>
     <span class="hljs-variable language_">window</span>.<span class="hljs-property">name</span> = a; <span class="hljs-comment">// ä¿®æ”¹å…¨å±€å˜é‡</span>
    sum = a + b;
    <span class="hljs-keyword">return</span> sum;
}
</code></pre>
<ul>
<li>åšä¸€äº› i/o æ“ä½œï¼Œä¾‹å¦‚ console.log, å†™æ–‡ä»¶ã€‚å¥½äº†æ¥ä¸‹é‡Œè¯´è¯´ <code>RP</code>(å“åº”å¼ç¼–ç¨‹)</li>
</ul>
<h3 data-id="heading-3">å“åº”å¼ç¼–ç¨‹ - RP</h3>
<p>ä¹Ÿèƒ½å¾ˆå¥½ç†è§£ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>å°±åƒâ€œExcel è¡¨æ ¼â€ï¼š<br/>
ä½ æ”¹äº† A1ï¼ŒB1 = A1 + 10 ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œè¿™å°±æ˜¯å…¸å‹çš„ RPã€‚</p>
<p>åœ¨ vue å’Œ react éƒ½éå¸¸å¸¸è§ï¼Œè·Ÿè¸ªä¸€ä¸ªå€¼å˜åŒ–ï¼Œç„¶åå¼•å‘å¦ä¸€äº›å€¼å˜åŒ–ã€‚</p>
<p>å®ƒå¼ºè°ƒï¼š</p>
<ul>
<li>æ•°æ®æ˜¯â€œæµâ€ï¼ˆstreamï¼‰</li>
<li>æ•°æ®å˜åŒ–ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°ä¾èµ–å®ƒçš„é€»è¾‘ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰</li>
<li>ä½ ä¸éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
</ul>
<h3 data-id="heading-4">å‡½æ•°å¼å“åº”å¼ç¼–ç¨‹ - FRP</h3>
<p>FRP æ˜¯â€œå‡½æ•°å¼ç¼–ç¨‹ + å“åº”å¼ç¼–ç¨‹â€çš„ç»“åˆã€‚æ¯”è¾ƒå…¸å‹çš„å°±æ˜¯ Rxjs çš„é£æ ¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘å¬ DOM çš„ input äº‹ä»¶</span>
<span class="hljs-keyword">const</span> input$ = <span class="hljs-title function_">fromEvent</span>(searchInput, <span class="hljs-string">'input'</span>); <span class="hljs-comment">// è¾“å…¥æ˜¯ä¸€ä¸ªâ€œæµâ€</span>

<span class="hljs-keyword">const</span> results$ = input$.<span class="hljs-title function_">pipe</span>(
  <span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>),  <span class="hljs-comment">// å‡½æ•°å¼è½¬æ¢</span>
);

results$.<span class="hljs-title function_">subscribe</span>(renderResults);
</code></pre>
<p>ç®€å•ç†è§£å°±æ˜¯å½“è§¦å‘ <code>DOM</code> çš„ <code>input</code> äº‹ä»¶è§¦å‘çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå€¼æ”¹å˜çš„æ—¶å€™ï¼Œè§¦å‘ results$ å€¼çš„æ”¹å˜ï¼Œè¿™å°±æ˜¯ <code>RP</code>ï¼ˆå“åº”å¼ç¼–ç¨‹ï¼‰ï¼Œç„¶ååœ¨ <code>input</code> äº‹ä»¶è§¦å‘å€¼æ”¹å˜çš„è¿‡ç¨‹ä¸­ï¼Œè¿˜æ‰§è¡Œäº† <code>map</code> æ–¹æ³•ï¼Œè¿™æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ‰€ä»¥ä¹Ÿç®— <code>FP</code> å‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
<h3 data-id="heading-5">OOP - é¢å‘å¯¹è±¡ç¼–ç¨‹</h3>
<p>é¡¾åæ€ä¹‰ï¼Œé¢ç›¸å¯¹è±¡å°±æ˜¯ä»¥å¯¹è±¡ä¸ºå¯¹è±¡ä¸ºå•ä½ï¼Œä¾‹å¦‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> {
  <span class="hljs-attr">name</span>: string;

  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name: string</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
  }

  <span class="hljs-title function_">bark</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> is barking!`</span>);
  }
}
</code></pre>
<p>ä½¿ç”¨åˆ°çš„æ•°æ®ï¼Œæœ€å¥½éƒ½å°è£…ä¸ºå¯¹è±¡ï¼Œå¦‚ä¸Šé¢ï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦ <code>new Dog()</code> è¿”å›æˆ‘ä»¬æ–°åˆ›é€ å‡ºæ¥çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯ class ä»…ä»…æ˜¯ä¸ªæ¨¡æ¿ã€‚å¯¹è±¡æ˜¯ç”±æ¨¡æ¿åˆ›é€ å‡ºæ¥çš„ã€‚</p>
<p>ç„¶åå°±æ˜¯é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯æœ€ç†Ÿæ‚‰çš„ä¸‰ä»¶å¥—ï¼Œå°è£…ï¼Œç»§æ‰¿ï¼Œå¤šæ€ã€‚é è¿™ä¸‰ä¸ªï¼Œé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ€ç»´æ¨¡å¼è®¤ä¸ºå¯ä»¥æ¨¡æ‹Ÿç°å®ä¸–ç•Œã€‚</p>
<p>å°è£…ï¼šå¾ˆç®€å•ï¼Œä¾‹å¦‚ <code>Dog</code> è¿™ä¸ªç±»ï¼ŒæŠŠè·Ÿ <code>Dog</code> ç›¸å…³çš„å±æ€§å’Œæ–¹æ³•éƒ½æ”¾åœ¨ä¸€ä¸ªç±»é‡Œå°±æ˜¯å°è£…ï¼Œä¾‹å¦‚æœ‰ name å±æ€§ï¼Œç‹—çš„åå­—ï¼Œä½ å¦‚æœæƒ³åŠ å…¶å®ƒå‚æ•°ï¼Œç»§ç»­æ‹“å±•å°±è¡Œäº†ï¼Œä¾‹å¦‚æ€§åˆ«ï¼Œå“ç§ã€‚å½“ç„¶å°è£…è¿˜æœ‰ä¸€äº›ç»†èŠ‚ï¼Œä¾‹å¦‚å°è£…ç§æœ‰å±æ€§ä»€ä¹ˆçš„ï¼Œè¿™äº›ç»†ææœ«èŠ‚ä¸ç”¨å¤ªåœ¨æ„ã€‚æˆ‘ä»¬ä¸»è¦æ˜¯ç®€å•ä»‹ç» OOP çš„æ€æƒ³ã€‚</p>
<p>ç»§æ‰¿ï¼šå¯ä»¥å°†åˆ«çš„ç±»çš„ä¸œè¥¿ç»§æ‰¿è¿‡æ¥ï¼Œä¾‹å¦‚, å¾ˆå¤šåŠ¨ç‰©éƒ½å¯ä»¥ç»§æ‰¿<code>Animal</code> è¿™ä¸ªç±»ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">public name: string</span>) {}

  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Some sound..."</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says meow~`</span>);
  }
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> {
  <span class="hljs-title function_">makeSound</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> says woof!`</span>);
  }
}

<span class="hljs-keyword">const</span> cat = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>(<span class="hljs-string">"Mimi"</span>);
<span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>(<span class="hljs-string">"Coco"</span>);

cat.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Mimi says meow~</span>
dog.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// Coco says woof!</span>

</code></pre>
<p>ä¸»è¦æ˜¯ä¸ºæˆ‘ä»¬æŠ½è±¡ä»£ç ç”¨çš„ï¼Œä¾‹å¦‚å…¬å…±éƒ¨åˆ†æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå­ç±»å•ç‹¬å®ç°ã€‚æ€æƒ³æ˜¯æŒºå¥½çš„ï¼Œå°±æ˜¯å®ç°èµ·æ¥æœ‰æ—¶å€™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå› ä¸ºåˆšå¼€å§‹è®¾è®¡çš„æ—¶å€™ï¼Œä¸å¤ªå®¹æ˜“ä¸€å¼€å§‹å°±èƒ½é¢„çŸ¥æœªæ¥éœ€è¦æŠ½è±¡å“ªäº›ã€‚</p>
<p>å¤šæ€ï¼šç®€å•æ¥è¯´å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸åŒå®ç°ï¼ŒJavascript ä¸­æ²¡æœ‰å¤šæ€ï¼Œæ›´å¤šåœ¨ typescript ä¸­å‡ºç°ï¼Œä¾‹å¦‚ç”¨é‡è½½å®ç°å¤šæ€ã€‚å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> {
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: number, <span class="hljs-attr">b</span>: number): number;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: string, <span class="hljs-attr">b</span>: string): string;
  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: any, <span class="hljs-attr">b</span>: any): any {
    <span class="hljs-keyword">return</span> a + b;
  }
}

<span class="hljs-keyword">const</span> calc = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-number">5</span>, <span class="hljs-number">10</span>));       <span class="hljs-comment">// 15</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(calc.<span class="hljs-title function_">add</span>(<span class="hljs-string">"foo"</span>, <span class="hljs-string">"bar"</span>)) <span class="hljs-comment">// foobar</span>
</code></pre>
<h2 data-id="heading-6">é¢ç›¸åˆ‡é¢ç¼–ç¨‹ - AOP</h2>
<p>ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§å°†ä»£ç æ³¨å…¥ç°æœ‰å‡½æ•°æˆ–å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ— éœ€ä¿®æ”¹ç›®æ ‡é€»è¾‘ã€‚è¿™å¥è¯å¤§å®¶çœ‹çœ‹å°±è¡Œäº†ï¼Œå¾ˆå®˜æ–¹ï¼Œæˆ‘ä»¬ç®€å•ç†è§£å°±æ˜¯ï¼š</p>
<p>æŠŠæ¨ªè·¨å¤šä¸ªåŠŸèƒ½çš„â€œé€šç”¨é€»è¾‘â€æŠ½å‡ºæ¥ï¼Œç»Ÿä¸€ç®¡ç†ï¼Œè€Œä¸æ˜¯åœ¨æ¯ä¸ªå‡½æ•°é‡Œé‡å¤å†™ã€‚</p>
<p>å¸¸è§å®ç°çš„æ–¹å¼ï¼Œå°±æ˜¯åœ¨å‡½æ•°å‰åï¼Œæ³¨å†Œä¸€ä¸ªé’©å­ï¼Œè¿™æ ·è¾¾åˆ°ä¸ä¿®æ”¹å½“å‰å‡½æ•°é€»è¾‘çš„ç›®çš„ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">logBefore</span>(<span class="hljs-params">fn</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...args</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Calling:"</span>, fn.<span class="hljs-property">name</span>, <span class="hljs-string">"args:"</span>, args);
    <span class="hljs-keyword">return</span> fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args);
  }
}
</code></pre>
<p>ä»¥ä¸Šæ–¹æ³•æ˜¯ä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">getUser</span> = logBefore(function getUser(id) {
  // åœ¨æ•°æ®åº“æœç´¢æ•°æ®è¿”å›
  return db.query(`SELECT * FROM users WHERE <span class="hljs-attr">id</span> = <span class="hljs-variable">${id}</span>`)<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™æ ·å…¶å®ƒå‡½æ•°éƒ½å¯ä»¥å…±äº«è¿™ä¸ª <code>logBefore</code> çš„é€»è¾‘ã€‚</p>
<p>å½“ç„¶å®é™…åœºæ™¯ï¼Œä¾‹å¦‚é‰´æƒï¼Œåœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•å‰ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰æƒé™ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä½¿ç”¨ <code>AOP</code> çš„åœºæ™¯ã€‚</p>
<h2 data-id="heading-7">AOP è·Ÿ nest.js å…³ç³»</h2>
<p>nest.js åé¢æˆ‘ä»¬ä¼šè®²ä¸€ä¸ªå¾ˆå…³é”®çš„æ¦‚å¿µï¼Œpipelineï¼Œæˆ‘ä»¬è¿™é‡Œå…ˆç®€å•ä»‹ç»ä¸€ä¸‹ï¼Œåé¢è¯¦ç»†è¯´ã€‚pipeline å°±æ˜¯å½“å®¢æˆ·ç«¯æ”¶åˆ°è¯·æ±‚åˆ°è¿”å›çš„è¿‡ç¨‹ã€‚</p>
<p>é¦–å…ˆ nest.js éœ€è¦æ³¨å†Œä¸€ä¸ª Controller æ¥å¤„ç†è¯·æ±‚,å¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

@<span class="hljs-title class_">Controller</span>(<span class="hljs-string">'cats'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CatsController</span> {
  @<span class="hljs-title class_">Get</span>()
  <span class="hljs-title function_">findAll</span>(): string {
    <span class="hljs-keyword">return</span> <span class="hljs-string">'This action returns all cats'</span>;
  }
}
</code></pre>
<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œget æ–¹æ³•è®¿é—®è·¯å¾„ <code>/cats</code> çš„æ—¶å€™ï¼Œè¿”å› 'This action returns all cats'ã€‚</p>
<p>ä½†å®é™…ä¸Šåˆ° <code>Controller</code> å¤„ç†æ•°æ®ä¹‹å‰ï¼Œè¿˜æœ‰è®¸å¤šæ­¥éª¤ã€‚</p>
<p>ä¾‹å¦‚åœ¨ nest.js ä¸­æœ‰ <code>Middleware</code>ï¼ˆä¸­é—´ä»¶ï¼‰ çš„æ¦‚å¿µï¼Œä¹Ÿæœ‰ <code>Guard</code>(å®ˆå«çš„æ¦‚å¿µ) ç­‰ç­‰æ¦‚å¿µï¼Œæˆ‘ä»¬è¿™é‡Œä¸ç»†è¯´ï¼Œåé¢æ–‡ç« ä¼šæœ‰ï¼Œè¿™é‡Œåªéœ€è¦è®°ä½ï¼šè¯·æ±‚æ¥äº†ä¹‹åï¼Œå…ˆåˆ° <code>Middleware</code> ç„¶ååˆ° <code>Guard</code>ã€‚ã€‚ã€‚å…œå…œè½¬è½¬å¥½å‡ å›æ‰èƒ½åˆ° <code>Controller</code>ã€‚</p>
<p>ä¹‹å‰æˆ‘ä»¬æåˆ°ï¼ŒAOP ä¸­çš„é¢å‘åˆ‡é¢ï¼Œä¸€ä¸ª <code>åˆ‡é¢</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥åŒ…è£…åˆ°å¦ä¸€ä¸ªå‡½æ•°ä¸Šï¼Œåœ¨è¿™ä¸ªå‡½æ•°è°ƒç”¨ä¹‹å‰æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŠŸèƒ½ã€‚</p>
<p>nest.js ä¸­çš„ <code>Middleware</code> å¯ä»¥æ‰“å°æ—¥å¿—ï¼Œæ˜¯ä¸æ˜¯åœ¨ä¸ç›´æ¥å½±å“  <code>Controller</code> é€»è¾‘çš„å‰æä¸‹ï¼Œå®ç°äº†ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç‹¬ç«‹çš„åŠŸèƒ½ï¼Œå› ä¸ºæ‰€æœ‰è·¯ç”±æ¥æ”¶çš„è¯·æ±‚éƒ½ä¼šç»è¿‡  <code>Middleware</code>ã€‚</p>
<p>ä»è¿™ä¸ªæ„ä¹‰ä¸Šè¯´ <code>Middleware</code>ï¼Œ<code>Guard</code> è¿™äº›æ¦‚å¿µæœ¬è´¨å°±æ˜¯ â€œåˆ‡é¢â€ã€‚</p>
<p>å¦‚æœä½ å¯¹node.js ï¼Œç»„ä»¶åº“ï¼Œå‰ç«¯åŠ¨ç”»æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è¿›ç¾¤äº¤æµã€‚è¿™æ˜¯æˆ‘ç»„ä»¶åº“æ•™ç¨‹å®˜ç½‘ã€‚æ„Ÿè°¢starï¼Œå†æ¬¡æ„Ÿè°¢ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.frontlight.tech%2F" target="_blank" title="https://www.frontlight.tech/" ref="nofollow noopener noreferrer">t-ui</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flio-mengxiang%2Ft-ui" target="_blank" title="https://github.com/lio-mengxiang/t-ui" ref="nofollow noopener noreferrer">github ç‚¹èµ</a></li>
</ul>
<h2 data-id="heading-8">ä¾èµ–æ³¨å…¥å’Œæ§åˆ¶åè½¬</h2>
<p>è¿™ä¸¤ä¸ªæ¦‚å¿µçœ‹èµ·æ¥æŒºå”¬äººçš„ï¼Œæ¯”è¾ƒé«˜å¤§ä¸Šã€‚æˆ‘ä»¬ç®€å•è§£é‡Šä¸€ä¸‹ï¼š</p>
<p>æˆ‘ä»¬ä»ä¸€ä¸ªç®€å•ä¾‹å­è¯´èµ·ï¼š</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªç±»å«è€ç‹ï¼Œä¸“æŒ‡é‚£äº›ä½åœ¨ç¾å¥³éš”å£çš„é“ä»”ä»¬ã€‚ä»–ä»¬å–œæ¬¢åŠ©äººä¸ºä¹ï¼Œé€å¤§å¸½å­ã€‚èƒ½åŠ›ä¸Šæ“…é•¿é€ƒè·‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'å¥³'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>();
    }
}
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>()); <span class="hljs-comment">// { hobby: ['å¥³', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
</code></pre>
<p>å¥½äº†ï¼Œè¿™ä¸ªPersonç±»ï¼Œæˆ‘ä»¬çœ‹çœ‹æœ‰å•¥ç¼ºç‚¹ï¼š</p>
<ul>
<li>æ¯æ¬¡åˆ›å»ºPersonç±»çš„å®ä¾‹ï¼Œéƒ½è¦ä¼ å…¥Hobbyç±»å’ŒSkillç±»ï¼Œä¹Ÿå°±æ˜¯å¯¹è¿™ä¸¤ä¸ªç±»éƒ½äº§ç”Ÿäº†ä¾èµ–ï¼Œå‡å¦‚æœ‰ä¸€å¤©æˆ‘ä»¬æƒ³åˆ›å»ºä¸åŒçš„è€ç‹ï¼Œæ¯”å¦‚æœ‰çš„è€ç‹å–œæ¬¢å°é²œè‚‰ï¼Œæœ‰çš„è€ç‹å–œæ¬¢è€è…Šè‚‰ï¼Œè¿™ä¸ªPersonç±»å†™æ­»äº†ï¼Œæ²¡æ³•å®šåˆ¶</li>
</ul>
<p>æœ‰åŒå­¦é©¬ä¸Šå°±ä¼šè¯´ï¼Œè¿™ä¸ªç®€å•å•Šï¼ŒHobbyå’ŒSkillå½“åšå‚æ•°ä¼ å…¥ä¸å°±è¡Œäº†ï¼Œæ˜¯çš„ï¼Œè¿™ä¸ªæ–¹æ³•ç¡®å®èƒ½è§£å†³é—®é¢˜ï¼Œå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Hobby</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">gender</span>){
        <span class="hljs-keyword">return</span> [gender, <span class="hljs-string">'åŠ©äººä¸ºä¹'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Skill</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">return</span> [<span class="hljs-string">'é€å¸½å­'</span>, <span class="hljs-string">'è·‘è·¯'</span>]
    }
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-attr">hobby</span>: <span class="hljs-title class_">Hobby</span>
    <span class="hljs-attr">skill</span>: <span class="hljs-title class_">Skill</span>
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby, skill</span>){
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span> = hobby;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">skill</span> = skill;
    }
}

<span class="hljs-comment">// { hobby: [â€™ç”·', 'åŠ©äººä¸ºä¹'], skill: ['é€å¸½å­', 'è·‘è·¯'] }</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Hobby</span>(<span class="hljs-string">'ç”·'</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">Skill</span>()); 
</code></pre>
<ul>
<li>ä½†æœ‰æ²¡æœ‰æ›´å¥½çš„åŠæ³•ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªç±»æˆ‘ä»¬ä¸ç”¨è‡ªå·±å»newï¼Œåƒä¸‹é¢è¿™æ ·ï¼Œç³»ç»Ÿå¸®æˆ‘ä»¬è‡ªåŠ¨å¯¼å…¥å‘¢ï¼Ÿ</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">hobby: Hobby, skill: Skill</span>){
  
    }
    <span class="hljs-title function_">hello</span>(<span class="hljs-params"/>){
        è¿™é‡Œç›´æ¥å°±å¯ä»¥ç”¨<span class="hljs-variable language_">this</span>.<span class="hljs-property">hobby</span>äº†
    }
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä½ new Personçš„æ—¶å€™ï¼Œhobbyå’Œskillå‚æ•°ï¼Œè‡ªåŠ¨å¸®ä½ å®ä¾‹åŒ–å¯¼å…¥ï¼Œè€Œä¸”ä½ è¿˜éœ€è¦new Personï¼Œèƒ½ä¸èƒ½ä¸new Person éƒ½æ˜¯è‡ªåŠ¨è°ƒç”¨å¹¶æŠŠå‚æ•°å¯¼å…¥ï¼Ÿ</p>
<ul>
<li>è¿™å°±å¼•ç”³å‡ºç¬¬ä¸€ä¸ªæ¦‚å¿µå°±æ§åˆ¶åè½¬ï¼Œä»¥å‰æˆ‘ä»¬éƒ½è¦è‡ªå·±ä¸»åŠ¨å»newï¼Œä»è€Œåˆ›å»ºå®ä¾‹ï¼Œç°åœ¨æ˜¯æŠŠåˆ›å»ºå®ä¾‹çš„ä»»åŠ¡äº¤ç»™äº†ä¸€ä¸ªå®¹å™¨ï¼ˆåé¢ä¼šå®ç°ï¼Œä½ å°±æ˜ç™½äº†ï¼Œç›¸å½“äºä¸€ä¸ªæŒæ§è€…ï¼Œæˆ–è€…è¯´é€ ç‰©ä¸»ï¼Œä¸“é—¨æ¥åˆ›å»ºå®ä¾‹çš„ï¼Œå¹¶ç®¡ç†ä¾èµ–å…³ç³»ï¼‰ï¼Œæ‰€ä»¥æ§åˆ¶æƒæ˜¯ä¸æ˜¯å°±åè½¬äº†ï¼Œä½ ä¸»åŠ¨çš„åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ï¼Œåè½¬ä¸ºå®¹å™¨åˆ›å»ºå®ä¾‹å’Œæ§åˆ¶ä¾èµ–ã€‚</li>
<li>å¯¹äºæ§åˆ¶åè½¬ï¼Œæœ€å¸¸ç”¨ä»¶çš„æ–¹å¼å«ä¾èµ–æ³¨å…¥ï¼Œæ„æ€æ˜¯å®¹å™¨åŠ¨æ€çš„å°†ä¾èµ–å…³ç³»æ³¨å…¥åˆ°ç»„ä»¶ä¸­ã€‚</li>
<li>æ§åˆ¶åè½¬å¯ä»¥é€šè¿‡ä¾èµ–æ³¨å…¥å®ç°ï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯ä¸€å›äº‹ã€‚</li>
</ul>
<p>åˆ°è¿™é‡Œï¼Œå…¶å®å¤§å®¶ä¹Ÿæ²¡è§‰å¾—ä¾èµ–æ³¨å…¥æœ‰å•¥æ¯›ç”¨å§ï¼ä¸‹é¢çš„è®²è§£ä¸€è¨€ä»¥è”½ä¹‹å°±æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬jså¯ä»¥æŠŠå‡½æ•°æˆ–è€…ç±»å½“å‚æ•°ä¼ å…¥å¦ä¸€ä¸ªç±»é‡Œï¼Œè¿™ç¡®å®è§£å†³äº†ä¹‹å‰è®²çš„å†™æ­»ä»£ç çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬ä¸ç”¨ä¾èµ–æ³¨å…¥ä¹Ÿèƒ½è§£å†³ä»£ç è€¦åˆçš„é—®é¢˜ï¼Œæ‰€ä»¥çœ‹èµ·æ¥æˆ‘ä»¬å¹¶ä¸æ˜¯é‚£ä¹ˆéœ€è¦ä¾èµ–æ³¨å…¥ã€‚</p>
<h2 data-id="heading-9">å°ç»“</h2>
<p>è¿™é‡Œç¬¬ä¸€ç¯‡ nest.js å†…å®¹å®Œæ¯•ï¼Œæ¥ä¸‹æ¥ä¼šè¯¦ç»†è§£é‡Šä¸Šæ–‡æåˆ°çš„ piplineï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªè¯·æ±‚ç»è¿‡ <code>nest.js</code> çš„å…¨è¿‡ç¨‹ï¼Œä»¥åŠè¿™äº›ç»è¿‡çš„è¿‡ç¨‹ä¸­ï¼Œç¢°åˆ°çš„æ ¸å¿ƒæ¦‚å¿µï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦]]></title>    <link>https://juejin.cn/post/7576609946190577700</link>    <guid>https://juejin.cn/post/7576609946190577700</guid>    <pubDate>2025-11-26T04:45:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576609946190577700" data-draft-id="7576575703167254534" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦"/> <meta itemprop="keywords" content="åç«¯,Go"/> <meta itemprop="datePublished" content="2025-11-26T04:45:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å–µä¸ªå’ª"/> <meta itemprop="url" content="https://juejin.cn/user/1350630784901262"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1350630784901262/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å–µä¸ªå’ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T04:45:44.000Z" title="Wed Nov 26 2025 04:45:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Go æ¥å£ä¸ä»£ç å¤ç”¨ï¼šæ›¿ä»£ç»§æ‰¿çš„è®¾è®¡å“²å­¦</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€</h3>
<p>Go æ˜¯ Google è®¾è®¡çš„ç±» C é™æ€ç±»å‹è¯­è¨€ï¼Œå…¼é¡¾åº•å±‚æ€§èƒ½ä¸å¼€å‘æ•ˆç‡ã€‚å®ƒå¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šçš„é¢å‘å¯¹è±¡ï¼ˆOOPï¼‰è¯­è¨€ â€”â€” æ²¡æœ‰ class å…³é”®å­—ï¼Œä¹Ÿä¸æ”¯æŒä¼ ç»Ÿçš„ â€œç»§æ‰¿â€ è¯­æ³•ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å®ç°</strong> å’Œ <strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼ŒGo èƒ½çµæ´»å®ç° OOP çš„æ ¸å¿ƒç‰¹æ€§ï¼ˆå¤šæ€ã€ä»£ç å¤ç”¨ï¼‰ï¼Œä¸”è®¾è®¡æ›´ç®€æ´ã€æ— ç»§æ‰¿å¸¦æ¥çš„è€¦åˆé—®é¢˜ã€‚
ä¸ C++ ç›¸æ¯”ï¼ŒGo çš„è®¾è®¡å“²å­¦æ˜¯ â€œ<strong>ç»„åˆä¼˜äºç»§æ‰¿</strong>â€ï¼šç”¨æ¥å£å®ç°å¤šæ€ï¼Œç”¨ç»“æ„ä½“åµŒå…¥å®ç°ä»£ç å¤ç”¨ï¼Œæ—¢é¿å…äº†ç»§æ‰¿çš„å¤æ‚è¯­æ³•ï¼Œåˆè§£å†³äº†å¤šé‡ç»§æ‰¿çš„æ­§ä¹‰é—®é¢˜ã€‚æœ¬æ–‡å°†é€šè¿‡ç±»æ¯” C++ çš„æ¥å£ / ç»§æ‰¿é€»è¾‘ï¼Œè¯¦è§£ Go å¦‚ä½•å®ç°ç±»ä¼¼æ•ˆæœã€‚</p>
<h3 data-id="heading-2">äºŒã€Go ä¸­çš„ â€œå•ä¸€å¤ç”¨â€ï¼ˆç±»ä¼¼å•ä¸€ç»§æ‰¿ï¼‰</h3>
<p>C++ çš„å•ä¸€ç»§æ‰¿æ ¸å¿ƒæ˜¯ â€œä¸€ä¸ªå­ç±»ç»§æ‰¿ä¸€ä¸ªçˆ¶ç±» / æ¥å£â€ï¼ŒGo ä¸­é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°ç±»ä¼¼æ•ˆæœï¼š<strong>ä»…ç”¨æ¥å£å®ç°å¤šæ€</strong>ï¼ˆæ— ä»£ç å¤ç”¨ï¼Œä»…çº¦æŸè¡Œä¸ºï¼‰ã€<strong>ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰+ æ¥å£</strong>ï¼ˆæ—¢æœ‰ä»£ç å¤ç”¨ï¼Œåˆæœ‰å¤šæ€ï¼‰ã€‚</p>
<h4 data-id="heading-3">2.1 ä»…é€šè¿‡æ¥å£å®ç°ï¼ˆéšå¼å¤šæ€ï¼‰</h4>
<p>C++ çš„æ¥å£æ˜¯ â€œçº¯è™šå‡½æ•°é›†åˆâ€ï¼Œå­ç±»éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿å¹¶å®ç°æ‰€æœ‰æ¥å£æ–¹æ³•ï¼›è€Œ Go çš„æ¥å£æ˜¯ â€œæ–¹æ³•ç­¾åé›†åˆâ€ï¼Œ<strong>æ— éœ€æ˜¾å¼å£°æ˜å®ç°</strong>â€”â€” åªè¦ç»“æ„ä½“å®ç°äº†æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå°±è‡ªåŠ¨æ»¡è¶³è¯¥æ¥å£ï¼Œè¿™å°±æ˜¯ â€œéšå¼å®ç°â€ï¼Œä¹Ÿæ˜¯ Go æ¥å£çš„æ ¸å¿ƒç‰¹æ€§ã€‚</p>
<h5 data-id="heading-4">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// C++ éœ€æ˜¾å¼å£°æ˜ç»§æ‰¿æ¥å£</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">IFruit</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> </span>= <span class="hljs-number">0</span>;
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>= <span class="hljs-number">0</span>;
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Apple</span> : <span class="hljs-keyword">public</span> IFruit { <span class="hljs-comment">// æ˜¾å¼ç»§æ‰¿</span>
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string name)</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-comment">/* å®ç° */</span> }
    <span class="hljs-function">std::string <span class="hljs-title">GetType</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"apple"</span>; }
};
</code></pre>
<h5 data-id="heading-5">Go å®ç°ä»£ç </h5>
<p>é¦–å…ˆå®šä¹‰æ¥å£ï¼ˆä»…çº¦æŸè¡Œä¸ºï¼Œæ— å®ç°ï¼‰ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// å®šä¹‰ Fruit æ¥å£ï¼šä»…å£°æ˜æ–¹æ³•ç­¾åï¼Œæ— å®ç°</span>
<span class="hljs-keyword">type</span> FruitType <span class="hljs-type">string</span> <span class="hljs-comment">// è¡¥å……ç±»å‹å®šä¹‰ï¼Œä½¿ä»£ç å¯è¿è¡Œ</span>
<span class="hljs-keyword">const</span> (
    BananaType FruitType = <span class="hljs-string">"banana"</span>
    AppleType  FruitType = <span class="hljs-string">"apple"</span>
)

<span class="hljs-keyword">type</span> Fruit <span class="hljs-keyword">interface</span> {
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    GetType() FruitType <span class="hljs-comment">// æ˜ç¡®ç±»å‹ï¼Œé¿å…æ­§ä¹‰</span>
}
</code></pre>
<p>å®šä¹‰ Banana ç»“æ„ä½“ï¼Œéšå¼å®ç° Fruit æ¥å£ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> Banana <span class="hljs-keyword">struct</span> {
    name   <span class="hljs-type">string</span>
    energy <span class="hljs-type">float32</span> <span class="hljs-comment">// è‡ªå®šä¹‰å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Banana å®ä¾‹</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBanana</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Banana {
    <span class="hljs-keyword">return</span> &amp;Banana{
        name:   name,
        energy: <span class="hljs-number">0</span>,
    }
}

<span class="hljs-comment">// å®ç° Fruit æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼ˆéšå¼æ»¡è¶³ Fruit æ¥å£ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetType() FruitType {
    <span class="hljs-keyword">return</span> BananaType
}

<span class="hljs-comment">// Banana è‡ªå®šä¹‰æ–¹æ³•ï¼ˆæ¥å£æœªçº¦æŸï¼Œä»…è‡ªèº«å¯ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> SetEnergy(energy <span class="hljs-type">float32</span>) {
    b.energy = energy
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Banana)</span></span> GetEnergy() <span class="hljs-type">float32</span> {
    <span class="hljs-keyword">return</span> b.energy
}
</code></pre>
<h5 data-id="heading-6">æ¥å£çš„ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼ˆä½“ç°å¤šæ€ï¼‰</h5>
<h6 data-id="heading-7">1. èµ‹å€¼ç»™æ¥å£å˜é‡ï¼šé€šè¿‡æ¥å£ç»Ÿä¸€è°ƒç”¨ï¼Œå±è”½å…·ä½“å®ç°</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">var</span> fruit Fruit <span class="hljs-comment">// æ¥å£å˜é‡</span>
fruit = NewBanana(<span class="hljs-string">"big banana"</span>) <span class="hljs-comment">// éšå¼è½¬æ¢ï¼Œæ— éœ€æ˜¾å¼å£°æ˜</span>
fmt.Println(fruit.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šbig bananaï¼ˆè°ƒç”¨ Banana çš„å®ç°ï¼‰</span>
fmt.Println(fruit.GetType()) <span class="hljs-comment">// è¾“å‡ºï¼šbanana</span>
</code></pre>
<h6 data-id="heading-8">2. ç›´æ¥ä½¿ç”¨ç»“æ„ä½“å®ä¾‹ï¼šå¯è°ƒç”¨æ¥å£æ–¹æ³• + è‡ªå®šä¹‰æ–¹æ³•</h6>
<pre><code class="hljs language-go" lang="go">banana := NewBanana(<span class="hljs-string">"little banana"</span>)
banana.SetEnergy(<span class="hljs-number">100</span>) <span class="hljs-comment">// è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•</span>
fmt.Println(banana.GetEnergy()) <span class="hljs-comment">// è¾“å‡ºï¼š100</span>
fmt.Println(banana.GetName()) <span class="hljs-comment">// è¾“å‡ºï¼šlittle bananaï¼ˆè°ƒç”¨æ¥å£æ–¹æ³•ï¼‰</span>
</code></pre>
<h6 data-id="heading-9">3. å·¥å‚æ–¹æ³•ç»Ÿä¸€åˆ›å»ºå®ä¾‹ï¼ˆå¢å¼ºå¤šæ€çµæ´»æ€§ï¼‰</h6>
<p>è¡¥å…… NewFruit å®ç°ï¼Œæ ¹æ®ç±»å‹åˆ›å»ºä¸åŒ Fruit å®ä¾‹ï¼š</p>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFruit</span><span class="hljs-params">(fruitType FruitType, name <span class="hljs-type">string</span>)</span></span> Fruit {
    <span class="hljs-keyword">switch</span> fruitType {
    <span class="hljs-keyword">case</span> BananaType:
        <span class="hljs-keyword">return</span> NewBanana(name)
    <span class="hljs-keyword">case</span> AppleType:
        <span class="hljs-keyword">return</span> NewApple(name) <span class="hljs-comment">// éœ€å®ç° Apple ç»“æ„ä½“ï¼ˆç±»ä¼¼ Bananaï¼‰</span>
    <span class="hljs-keyword">default</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
    }
}

<span class="hljs-comment">// ä½¿ç”¨å·¥å‚æ–¹æ³•</span>
apple := NewFruit(AppleType, <span class="hljs-string">"red apple"</span>)
banana := NewFruit(BananaType, <span class="hljs-string">"yellow banana"</span>)
fmt.Println(apple.GetName(), banana.GetName()) <span class="hljs-comment">// ç»Ÿä¸€è°ƒç”¨æ¥å£æ–¹æ³•`</span>
</code></pre>
<h4 data-id="heading-10">2.2 ç»“æ„ä½“ç»„åˆï¼ˆåµŒå…¥ï¼‰å®ç°ä»£ç å¤ç”¨ï¼ˆç±»ä¼¼åŸºç±»ç»§æ‰¿ï¼‰</h4>
<p>C++ ä¸­é€šè¿‡ â€œå­ç±»ç»§æ‰¿åŸºç±»â€ å¤ç”¨åŸºç±»ä»£ç ï¼ŒGo ä¸­é€šè¿‡ â€œç»“æ„ä½“åµŒå…¥â€ï¼ˆå°†ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºå¦ä¸€ä¸ªç»“æ„ä½“çš„åŒ¿åå­—æ®µï¼‰å®ç°ä»£ç å¤ç”¨ â€”â€” åµŒå…¥çš„ç»“æ„ä½“ï¼ˆç§°ä¸º â€œåµŒå…¥ç±»å‹â€ï¼‰çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¼šè¢«å¤–å±‚ç»“æ„ä½“ â€œç»§æ‰¿â€ï¼ˆå®é™…æ˜¯éšå¼ä»£ç†ï¼‰ï¼Œå¤–å±‚ç»“æ„ä½“å¯ç›´æ¥è°ƒç”¨ï¼Œä¹Ÿå¯è¦†ç›–è¿™äº›æ–¹æ³•ã€‚</p>
<h5 data-id="heading-11">ç±»æ¯” C++ ä¼ªä»£ç </h5>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åŸºç±»ï¼ˆå«éƒ¨åˆ†å®ç°ï¼‰</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">VehicleBase</span> : <span class="hljs-keyword">public</span> IVehicle {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetWheelCount</span><span class="hljs-params">(<span class="hljs-type">int</span> count)</span> <span class="hljs-keyword">override</span> </span>{ wheelCount = count; }
    <span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">GetWheelCount</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> wheelCount; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>; }
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> wheelCount;
};

<span class="hljs-comment">// å­ç±»ç»§æ‰¿åŸºç±»ï¼Œå¤ç”¨æ–¹æ³•å¹¶å¯è¦†ç›–</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Bus</span> : <span class="hljs-keyword">public</span> VehicleBase {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{ <span class="hljs-keyword">return</span> name; }
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SetName</span><span class="hljs-params">(std::string n)</span> <span class="hljs-keyword">override</span> </span>{ name = n; }
    <span class="hljs-function">std::string <span class="hljs-title">ToString</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> <span class="hljs-keyword">override</span> </span>{
        <span class="hljs-keyword">return</span> VehicleBase::<span class="hljs-built_in">ToString</span>() + <span class="hljs-string">"Bus -&gt; "</span> + name; <span class="hljs-comment">// è°ƒç”¨åŸºç±»æ–¹æ³•</span>
    }
<span class="hljs-keyword">private</span>:
    std::string name;
};
</code></pre>
<h5 data-id="heading-12">Go å®ç°ä»£ç </h5>
<h6 data-id="heading-13">1. å®šä¹‰æ¥å£ï¼ˆçº¦æŸæ ¸å¿ƒè¡Œä¸ºï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> VehicleType <span class="hljs-type">string</span>
<span class="hljs-keyword">const</span> (
    BusType VehicleType = <span class="hljs-string">"bus"</span>
)

<span class="hljs-keyword">type</span> Vehicle <span class="hljs-keyword">interface</span> {
    GetType() VehicleType
    GetName() <span class="hljs-type">string</span>
    SetName(name <span class="hljs-type">string</span>)
    SetWheelCount(count <span class="hljs-type">int</span>)
    GetWheelCount() <span class="hljs-type">int</span>
    ToString() <span class="hljs-type">string</span>
}
</code></pre>
<h6 data-id="heading-14">2. å®šä¹‰ â€œåµŒå…¥ç»“æ„ä½“â€ï¼ˆç±»ä¼¼åŸºç±»ï¼Œæä¾›é€šç”¨å®ç°ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// vehicleImpl æ˜¯é€šç”¨å®ç°ï¼Œä½œä¸ºåµŒå…¥ç±»å‹ä¾›å…¶ä»–ç»“æ„ä½“å¤ç”¨</span>
<span class="hljs-keyword">type</span> vehicleImpl <span class="hljs-keyword">struct</span> {
    wheelCount <span class="hljs-type">int</span> <span class="hljs-comment">// é€šç”¨å­—æ®µ</span>
}

<span class="hljs-comment">// é€šç”¨æ–¹æ³•å®ç°ï¼ˆä¾›åµŒå…¥è€…å¤ç”¨ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> SetWheelCount(count <span class="hljs-type">int</span>) {
    v.wheelCount = count
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> GetWheelCount() <span class="hljs-type">int</span> {
    <span class="hljs-keyword">return</span> v.wheelCount
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(v *vehicleImpl)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"vehicle -&gt; "</span>
}
</code></pre>
<h6 data-id="heading-15">3. å®šä¹‰å¤–å±‚ç»“æ„ä½“ï¼ˆåµŒå…¥ vehicleImplï¼Œå¤ç”¨ä»£ç ï¼‰ï¼š</h6>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Bus ç»“æ„ä½“é€šè¿‡åµŒå…¥ vehicleImplï¼Œå¤ç”¨å…¶æ–¹æ³•å’Œå­—æ®µ</span>
<span class="hljs-keyword">type</span> Bus <span class="hljs-keyword">struct</span> {
    vehicleImpl <span class="hljs-comment">// åŒ¿ååµŒå…¥ï¼ˆç»„åˆï¼‰ï¼Œæ— éœ€æ˜¾å¼è°ƒç”¨</span>
    name        <span class="hljs-type">string</span> <span class="hljs-comment">// è‡ªèº«å­—æ®µ</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Bus å®ä¾‹ï¼ˆéœ€åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewBus</span><span class="hljs-params">(name <span class="hljs-type">string</span>)</span></span> *Bus {
    <span class="hljs-keyword">return</span> &amp;Bus{
        name: name,
        vehicleImpl: vehicleImpl{ <span class="hljs-comment">// åˆå§‹åŒ–åµŒå…¥ç»“æ„ä½“</span>
            wheelCount: <span class="hljs-number">4</span>, <span class="hljs-comment">// å…¬äº¤è½¦é»˜è®¤4ä¸ªè½®å­</span>
        },
    }
}

<span class="hljs-comment">// å®ç° Vehicle æ¥å£çš„å‰©ä½™æ–¹æ³•ï¼ˆæœªè¢« vehicleImpl å®ç°çš„éƒ¨åˆ†ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetType() VehicleType {
    <span class="hljs-keyword">return</span> BusType
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> b.name
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> SetName(name <span class="hljs-type">string</span>) {
    b.name = name
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„ ToString æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(b *Bus)</span></span> ToString() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„è¢«è¦†ç›–æ–¹æ³•ï¼šb.vehicleImpl.ToString()</span>
    <span class="hljs-keyword">return</span> b.vehicleImpl.ToString() + fmt.Sprintf(<span class="hljs-string">"Bus -&gt; %s (wheels: %d)"</span>, b.GetName(), b.GetWheelCount())
}
</code></pre>
<h6 data-id="heading-16">æ ¸å¿ƒç‰¹æ€§è¯´æ˜</h6>
<ul>
<li>ä»£ç å¤ç”¨ï¼š<code>Bus</code> æ— éœ€é‡æ–°å®ç° <code>SetWheelCount</code>ã€<code>GetWheelCount</code>ï¼Œç›´æ¥å¤ç”¨ <code>vehicleImpl</code> çš„æ–¹æ³•ï¼›</li>
<li>æ–¹æ³•è¦†ç›–ï¼š<code>Bus</code> å®šä¹‰äº†ä¸ <code>vehicleImpl</code> åŒåçš„ <code>ToString</code> æ–¹æ³•ï¼Œä¼šè¦†ç›–åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•ï¼Œä¼˜å…ˆè°ƒç”¨å¤–å±‚æ–¹æ³•ï¼›</li>
<li>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•ï¼šé€šè¿‡ <code>b.vehicleImpl.ToString()</code> å¯è°ƒç”¨è¢«è¦†ç›–çš„åµŒå…¥ç»“æ„ä½“æ–¹æ³•ï¼›</li>
<li>å­—æ®µè®¿é—®ï¼šåµŒå…¥ç»“æ„ä½“çš„å­—æ®µå¯ç›´æ¥è®¿é—®ï¼ˆ<code>b.wheelCount</code>ï¼‰ï¼Œä¹Ÿå¯æ˜¾å¼è®¿é—®ï¼ˆ<code>b.vehicleImpl.wheelCount</code>ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-17">ä¸‰ã€Go ä¸­çš„ â€œå¤šç»„åˆâ€ï¼ˆç±»ä¼¼å¤šé‡ç»§æ‰¿ï¼‰</h3>
<p>C++ æ”¯æŒå¤šé‡ç»§æ‰¿ï¼ˆä¸€ä¸ªç±»ç»§æ‰¿å¤šä¸ªçˆ¶ç±»ï¼‰ï¼Œä½†å®¹æ˜“å¼•å‘ â€œè±å½¢ç»§æ‰¿â€ï¼ˆå¤šä¸ªçˆ¶ç±»ç»§æ‰¿è‡ªåŒä¸€åŸºç±»ï¼‰çš„æ­§ä¹‰é—®é¢˜ã€‚Go æœ¬èº«<strong>ä¸æ”¯æŒä¼ ç»Ÿå¤šé‡ç»§æ‰¿</strong>ï¼Œä½†é€šè¿‡ â€œå¤šåµŒå…¥â€ï¼ˆä¸€ä¸ªç»“æ„ä½“åµŒå…¥å¤šä¸ªç»“æ„ä½“ï¼‰ï¼Œå¯å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœ â€”â€” å¤ç”¨å¤šä¸ªåµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•å’Œå­—æ®µï¼Œä¸”æ— æ­§ä¹‰ã€‚</p>
<h4 data-id="heading-18">ç±»æ¯” C++ ä¼ªä»£ç </h4>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Father</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Mother</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>(); }
};

<span class="hljs-comment">// å¤šé‡ç»§æ‰¿ï¼šåŒæ—¶ç»§æ‰¿ Father å’Œ Mother</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Child</span> : <span class="hljs-keyword">public</span> Father, <span class="hljs-keyword">public</span> Mother {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">std::string <span class="hljs-title">GetName</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>; }
    <span class="hljs-function">std::string <span class="hljs-title">Say</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-comment">// æ˜¾å¼è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œé¿å…æ­§ä¹‰</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + <span class="hljs-built_in">GetName</span>() + <span class="hljs-string">", Father: "</span> + Father::<span class="hljs-built_in">Say</span>() + <span class="hljs-string">", Mother: "</span> + Mother::<span class="hljs-built_in">Say</span>();
    }
};
</code></pre>
<h4 data-id="heading-19">Go å®ç°ä»£ç ï¼ˆå¤šåµŒå…¥ç»“æ„ä½“ï¼‰</h4>
<h5 data-id="heading-20">1. å®šä¹‰ä¸¤ä¸ª â€œè¢«ç»„åˆâ€ çš„ç»“æ„ä½“ï¼ˆç±»ä¼¼çˆ¶ç±»ï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Father ç»“æ„ä½“ï¼ˆæä¾›ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Father <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewFather</span><span class="hljs-params">()</span></span> *Father {
    <span class="hljs-keyword">return</span> &amp;Father{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Tony"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(f *Father)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + f.GetName()
}

<span class="hljs-comment">// Mother ç»“æ„ä½“ï¼ˆæä¾›å¦ä¸€ç»„æ–¹æ³•ï¼‰</span>
<span class="hljs-keyword">type</span> Mother <span class="hljs-keyword">struct</span>{}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewMother</span><span class="hljs-params">()</span></span> *Mother {
    <span class="hljs-keyword">return</span> &amp;Mother{}
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Aurora"</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(m *Mother)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"I am "</span> + m.GetName()
}
</code></pre>
<h5 data-id="heading-21">2. å®šä¹‰ Child ç»“æ„ä½“ï¼ˆåµŒå…¥ Father å’Œ Motherï¼‰ï¼š</h5>
<pre><code class="hljs language-go" lang="go"><span class="hljs-comment">// Child åµŒå…¥ä¸¤ä¸ªç»“æ„ä½“ï¼Œå¤ç”¨å…¶æ–¹æ³•</span>
<span class="hljs-keyword">type</span> Child <span class="hljs-keyword">struct</span> {
    *Mother <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥ï¼ˆéœ€åˆå§‹åŒ–æŒ‡é’ˆï¼‰</span>
    *Father <span class="hljs-comment">// æŒ‡é’ˆåµŒå…¥</span>
}

<span class="hljs-comment">// æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ– Child åŠåµŒå…¥çš„ç»“æ„ä½“æŒ‡é’ˆ</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">NewChild</span><span class="hljs-params">()</span></span> *Child {
    <span class="hljs-keyword">return</span> &amp;Child{
        Mother: NewMother(), <span class="hljs-comment">// åˆå§‹åŒ– Mother æŒ‡é’ˆ</span>
        Father: NewFather(), <span class="hljs-comment">// åˆå§‹åŒ– Father æŒ‡é’ˆ</span>
    }
}

<span class="hljs-comment">// è¦†ç›–åµŒå…¥ç»“æ„ä½“çš„åŒåæ–¹æ³•ï¼ˆé¿å…è°ƒç”¨æ­§ä¹‰ï¼‰</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> GetName() <span class="hljs-type">string</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">"Jerry"</span>
}

<span class="hljs-comment">// è‡ªå®šä¹‰æ–¹æ³•ï¼Œæ˜¾å¼è°ƒç”¨åµŒå…¥ç»“æ„ä½“çš„æ–¹æ³•</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-params">(c *Child)</span></span> Say() <span class="hljs-type">string</span> {
    <span class="hljs-comment">// æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œè°ƒç”¨å…¶æ–¹æ³•ï¼ˆæ— æ­§ä¹‰ï¼‰</span>
    fatherSay := c.Father.Say()
    motherSay := c.Mother.Say()
    <span class="hljs-keyword">return</span> fmt.Sprintf(<span class="hljs-string">"I am %s. Father: %s, Mother: %s"</span>, c.GetName(), fatherSay, motherSay)
}
</code></pre>
<h5 data-id="heading-22">3. ä½¿ç”¨ç¤ºä¾‹ï¼š</h5>
<pre><code class="hljs language-go" lang="go">child := NewChild()
fmt.Println(child.Say())
<span class="hljs-comment">// è¾“å‡ºï¼šI am Jerry. Father: I am Tony, Mother: I am Aurora</span>
</code></pre>
<h5 data-id="heading-23">æ ¸å¿ƒè§„åˆ™ï¼ˆé¿å…æ­§ä¹‰ï¼‰</h5>
<ul>
<li><strong>åµŒå…¥æ–¹å¼</strong>ï¼šæ”¯æŒå€¼åµŒå…¥ï¼ˆ<code>Father</code>ï¼‰å’ŒæŒ‡é’ˆåµŒå…¥ï¼ˆ<code>*Mother</code>ï¼‰ï¼ŒæŒ‡é’ˆåµŒå…¥éœ€åœ¨æ„é€ æ—¶åˆå§‹åŒ–æŒ‡é’ˆï¼›</li>
<li><strong>åŒåæ–¹æ³•å¤„ç†</strong>ï¼šè‹¥å¤šä¸ªåµŒå…¥ç»“æ„ä½“æœ‰åŒåæ–¹æ³•ï¼Œå¤–å±‚ç»“æ„ä½“å¿…é¡»å®šä¹‰åŒåæ–¹æ³•è¦†ç›–ï¼ˆå¦åˆ™è°ƒç”¨æ—¶ä¼šç¼–è¯‘æŠ¥é”™ï¼Œæç¤ºæ­§ä¹‰ï¼‰ï¼›</li>
<li><strong>æ˜¾å¼è°ƒç”¨åµŒå…¥æ–¹æ³•</strong>ï¼šé€šè¿‡ <code>c.Father.Say()</code> æ˜¾å¼æŒ‡å®šåµŒå…¥ç»“æ„ä½“ï¼Œé¿å…æ­§ä¹‰ï¼Œè¿™æ˜¯ Go å¤„ç† â€œå¤šç»„åˆâ€ å†²çªçš„æ ¸å¿ƒæ–¹å¼ã€‚</li>
</ul>
<h3 data-id="heading-24">å››ã€Go ä¸ C++ æ ¸å¿ƒåŒºåˆ«æ€»ç»“</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>C++</th><th>Go</th></tr></thead><tbody><tr><td>æ¥å£å®ç°</td><td>æ˜¾å¼ç»§æ‰¿ï¼ˆ<code>public</code> æ¥å£ï¼‰</td><td>éšå¼å®ç°ï¼ˆæ— éœ€å£°æ˜ï¼Œå®ç°æ–¹æ³•å³æ»¡è¶³ï¼‰</td></tr><tr><td>ä»£ç å¤ç”¨</td><td>ç»§æ‰¿åŸºç±»</td><td>ç»“æ„ä½“åµŒå…¥ï¼ˆç»„åˆï¼‰</td></tr><tr><td>å¤šé‡ç»§æ‰¿</td><td>æ”¯æŒï¼ˆæ˜“å¼•å‘è±å½¢ç»§æ‰¿æ­§ä¹‰ï¼‰</td><td>ä¸æ”¯æŒï¼Œé€šè¿‡å¤šåµŒå…¥å®ç°å¤šç»„åˆï¼ˆæ— æ­§ä¹‰ï¼‰</td></tr><tr><td>æ–¹æ³•è¦†ç›–</td><td>éœ€ <code>override</code> å…³é”®å­—</td><td>åŒåæ–¹æ³•è‡ªåŠ¨è¦†ç›–ï¼ˆå¤–å±‚ä¼˜å…ˆï¼‰</td></tr><tr><td>æ ¸å¿ƒè®¾è®¡å“²å­¦</td><td>ç»§æ‰¿ä¼˜å…ˆ</td><td>ç»„åˆä¼˜äºç»§æ‰¿</td></tr></tbody></table>
<h3 data-id="heading-25">äº”ã€å®Œæ•´ä»£ç ä»“åº“</h3>
<p>æœ¬æ–‡æ‰€æœ‰å¯è¿è¡Œä»£ç å·²æ•´ç†è‡³ GitHubï¼ŒåŒ…å«æ¥å£ã€ç»„åˆã€å¤šç»„åˆçš„å®Œæ•´ç¤ºä¾‹ï¼Œå¯ç›´æ¥å…‹éš†è¿è¡Œï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftx7do%2Fgo-inheritance-example" target="_blank" title="https://github.com/tx7do/go-inheritance-example" ref="nofollow noopener noreferrer">github.com/tx7do/go-inâ€¦</a></p>
<h3 data-id="heading-26">å…­ã€æ€»ç»“</h3>
<p>Go æ²¡æœ‰ä¼ ç»Ÿ OOP çš„ â€œç±»â€ å’Œ â€œç»§æ‰¿â€ï¼Œä½†é€šè¿‡ <strong>æ¥å£çš„éšå¼å¤šæ€</strong> å’Œ <strong>ç»“æ„ä½“çš„ç»„åˆï¼ˆåµŒå…¥ï¼‰</strong>ï¼Œå®ç°äº†æ›´çµæ´»ã€ä½è€¦åˆçš„ä»£ç å¤ç”¨å’Œå¤šæ€ç‰¹æ€§ï¼š</p>
<ol>
<li>æ¥å£è´Ÿè´£ â€œçº¦æŸè¡Œä¸ºâ€ï¼Œéšå¼å®ç°è®©ä»£ç æ›´ç®€æ´ï¼Œæ”¯æŒå¤šæ€ï¼›</li>
<li>ç»“æ„ä½“åµŒå…¥è´Ÿè´£ â€œå¤ç”¨ä»£ç â€ï¼Œæ›¿ä»£ä¼ ç»Ÿç»§æ‰¿ï¼Œæ— è€¦åˆé—®é¢˜ï¼›</li>
<li>å¤šåµŒå…¥å®ç°ç±»ä¼¼ â€œå¤šé‡ç»§æ‰¿â€ çš„æ•ˆæœï¼Œä½†é€šè¿‡æ˜¾å¼è°ƒç”¨é¿å…æ­§ä¹‰ã€‚</li>
</ol>
<p>è¿™ç§è®¾è®¡æ—¢ä¿ç•™äº† OOP çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œåˆè§„é¿äº†ç»§æ‰¿å¸¦æ¥çš„å¤æ‚é—®é¢˜ï¼Œæ˜¯ Go ç®€æ´ã€é«˜æ•ˆçš„å…³é”®åŸå› ä¹‹ä¸€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?]]></title>    <link>https://juejin.cn/post/7576559408660234292</link>    <guid>https://juejin.cn/post/7576559408660234292</guid>    <pubDate>2025-11-26T06:50:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576559408660234292" data-draft-id="7576559408660152372" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-26T06:50:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘¨å°›å…ˆæ£®"/> <meta itemprop="url" content="https://juejin.cn/user/3562073402377933"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ½React 19äº†,ä»–åˆ°åº•å¸¦æ¥äº†ä»€ä¹ˆ?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3562073402377933/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘¨å°›å…ˆæ£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T06:50:42.000Z" title="Wed Nov 26 2025 06:50:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    25
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c865216d9814d28a29831d6cbc2def2~tplv-k3u1fbpfcp-jj-mark:3024:0:0:0:q75.awebp#?w=1920&amp;h=1080&amp;s=225936&amp;e=webp&amp;b=020e37" alt="src=http___pic1.win4000.com_wallpaper_2020-07-22_5f17fe7fe9959.jpg&amp;refer=http___pic1.win4000 (1).webp" loading="lazy"/></p>
<p>å¦‚æœä½ è¿˜åœ¨ React åº”ç”¨çš„ <code>useEffect</code>é‡Œå†™ <code>fetch</code>è¯·æ±‚ï¼Œé‚£ä½ å°±åšé”™äº†ã€‚æˆ‘ä»¬æ¯å¤©éƒ½å¬åˆ°è¿™ç§è¯´æ³•ã€‚ä½†æˆ‘ä»¬åº”è¯¥æ€ä¹ˆåšæ‰å¯¹å‘¢ï¼Ÿå¥½å§ï¼Œäº‹å®è¯æ˜ï¼ŒReact å›¢é˜Ÿå·²ç»æ¸…æ¥šåœ°å¬åˆ°äº†æˆ‘ä»¬çš„å£°éŸ³ã€‚React 19.2 ä¸ä»…ä»…æ˜¯ä¿®è¡¥å¼‚æ­¥é—®é¢˜â€”â€”å®ƒé€šè¿‡ <code>use()</code>ã€<code>&lt;Suspense&gt;</code>ã€<code>useTransition()</code>ä»¥åŠç°åœ¨çš„ View Transitionsï¼Œä»å¤´é‡å»ºäº†å¼‚æ­¥å¤„ç†æœºåˆ¶ã€‚è¿™äº›åŸºç¡€æ„å»ºå—å…±åŒå°†å¼‚æ­¥é€»è¾‘ä»ä¸€ä¸ª"å¿…è¦çš„éº»çƒ¦"è½¬å˜ä¸ºä¸€æµçš„æ¶æ„ç‰¹æ€§ã€‚è®©æˆ‘å¸¦ä½ äº†è§£ React çš„å¼‚æ­¥å™äº‹æ˜¯å¦‚ä½•å½»åº•æ”¹å˜çš„ï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆå¯¹ä½ çš„å›¢é˜Ÿå¾ˆé‡è¦ã€‚</p>
<p><strong>æ—§æ–¹å¼ï¼šuseEffect + isLoading</strong></p>
<p>è®©æˆ‘ä»¬ä»ä¸€ä¸ªå±•ç¤ºæ—§çš„ <code>useEffect</code>/ <code>fetch</code>ç»„åˆæ¨¡å¼çš„ä¾‹å­å¼€å§‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageData, setImageData] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [isPending, setIsPending] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">true</span>);
    <span class="hljs-title function_">fetchImage</span>(imageId).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
      <span class="hljs-title function_">setImageData</span>(data);
      <span class="hljs-title function_">setIsPending</span>(<span class="hljs-literal">false</span>);
    });
  }, [imageId]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setImageId((id) =&gt; id + 1)}&gt;Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      {isPending ? <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> : }
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>ï¼ˆè¿™é‡Œçš„ <code>fetchImage</code>åªæ˜¯ <code>fetch</code>çš„ä¸€ä¸ªåŒ…è£…å‡½æ•°ï¼Œä»¥ä¿æŒç¤ºä¾‹ç®€çŸ­ã€‚ï¼‰</p>
<p>è¿™ä¸ªæ¨¡å¼ç¡®å®èƒ½ç”¨ï¼Œä½†ä½ åšäº†å¾ˆå¤šé‡å¤æ€§çš„å·¥ä½œã€‚ä¾‹å¦‚ï¼Œä½ ç®¡ç†äº†ä¸‰ä¸ªçŠ¶æ€ï¼ˆ<code>imageId</code>, <code>imageData</code>, <code>isPending</code>ï¼‰ï¼Œè€Œå®é™…ä¸Šä½ åªæ˜¯æƒ³æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ã€‚åŠ è½½çŠ¶æ€é€»è¾‘æ˜¯æ‰‹åŠ¨çš„ï¼Œé”™è¯¯å¤„ç†ä¹Ÿå¸¸å¸¸æ˜¯äº‹åæ‰è€ƒè™‘ã€‚è€Œä¸”å¾ˆå¯èƒ½ï¼Œä½ çš„ä»£ç åº“ä¸­æ¯ä¸ªå¼‚æ­¥æ“ä½œçœ‹èµ·æ¥éƒ½ç•¥æœ‰ä¸åŒã€‚</p>
<p>æœ€ç³Ÿç³•çš„æ˜¯ï¼Œé‚£ä¸ª <code>useEffect</code>çš„ä¾èµ–æ•°ç»„æ˜¯ä¸ªéšæ‚£ã€‚æ¼æ‰ä¸€ä¸ªä¾èµ–é¡¹ï¼Œä½ ä¼šå¾—åˆ°è¿‡æ—¶çš„é—­åŒ…ï¼›åŒ…å«å¤ªå¤šä¾èµ–é¡¹ï¼Œåˆä¼šè§¦å‘æ— é™å¾ªç¯ã€‚è¿™æ˜¯æ— æ•°ç”Ÿäº§ç¯å¢ƒ bug çš„æ ¹æºã€‚</p>
<p>è¿™å¹¶ä¸ç†æƒ³ï¼Œè€å®è¯´ï¼Œç”¨è¿™ç§ä»£ç ä½ èƒ½åšåˆ°çš„æœ€å¥½ç¨‹åº¦å°±æ˜¯"ä¸æç ¸"ã€‚è€Œè¿™å¹¶ä¸æ˜¯ä½ æƒ³è¦ç¼–å†™çš„ä»£ç ç±»å‹ã€‚</p>
<p><strong>æ–°çš„å¼‚æ­¥åŸºç¡€æ„å»ºå—</strong></p>
<p>React 19.2 ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§å®Œå…¨ä¸åŒçš„æ–¹æ³•ã€‚æˆ‘ä»¬ä¸å†ç”¨ <code>useEffect</code>æ¥ç®¡ç† Promiseï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ <code>use()</code>å’Œ <code>&lt;Suspense&gt;</code>æ¥å¤„ç† Promiseã€‚</p>
<p><strong>æ ¸å¿ƒæ¨¡å¼ï¼šuse() + <code>&lt;Suspense&gt;</code></strong></p>
<p>ä¸‹é¢æ˜¯ä½¿ç”¨ React æ–°çš„ <code>use</code>Hook å’Œ <code>Suspense</code>ç»„ä»¶ç»„åˆé‡å†™çš„åŒä¸€ä¸ªç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { use, <span class="hljs-title class_">Suspense</span>, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Image</span>(<span class="hljs-params">{ imageDataPromise }</span>) {
  <span class="hljs-keyword">const</span> image = <span class="hljs-title function_">use</span>(imageDataPromise);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>{image.title}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>çœ‹çœ‹è¿™æœ‰å¤šç®€æ´ã€‚æ²¡æœ‰ <code>useEffect</code>ã€‚æ²¡æœ‰æ‰‹åŠ¨çš„ <code>isPending</code>çŠ¶æ€ã€‚çˆ¶ç»„ä»¶ä¸­æ²¡æœ‰æ¡ä»¶æ¸²æŸ“é€»è¾‘ã€‚æˆ‘ä»¬å­˜å‚¨çš„æ˜¯ä¸€ä¸ª Promise è€Œä¸æ˜¯æ•°æ®ï¼ŒReact ä¼šå¤„ç†å‰©ä¸‹çš„äº‹æƒ…ã€‚</p>
<p><strong>ä½†è¿™æ˜¯å¦‚ä½•å·¥ä½œçš„å‘¢ï¼Ÿ<code>&lt;Suspense&gt;</code>èƒŒåçš„é­”æ³•</strong></p>
<p>å½“ <code>&lt;Suspense&gt;</code>å°è¯•æ¸²æŸ“å…¶å­ç»„ä»¶æ—¶ï¼Œ<code>&lt;Image&gt;</code>ç»„ä»¶ä¼šè°ƒç”¨ <code>use(imageDataPromise)</code>ã€‚å¦‚æœé‚£ä¸ª Promise è¿˜æ²¡æœ‰è§£å†³ï¼Œ<code>use()</code>ä¼šç›´æ¥<em>æŠ›å‡º</em>è¿™ä¸ª Promiseã€‚æ˜¯çš„â€”â€”åƒæŠ›å‡ºå¼‚å¸¸ä¸€æ ·æŠ›å‡ºå®ƒã€‚</p>
<p>æˆ‘çŸ¥é“ä½ åœ¨æƒ³ä»€ä¹ˆï¼š"ç”¨å¼‚å¸¸æ¥æ§åˆ¶æµç¨‹ï¼Ÿè¿™å¤ªå¥‡æ€ªäº†ï¼"ä½†è¯·å¬æˆ‘è¯´ï¼Œå› ä¸ºè¿™å…¶å®éå¸¸å·§å¦™ã€‚</p>
<p>é‚£ä¸ªè¢«æŠ›å‡ºçš„ Promise ä¼šå‘ä¸Šå†’æ³¡ç©¿è¿‡ç»„ä»¶æ ‘ï¼Œç›´åˆ°è¢« <code>&lt;Suspense&gt;</code>æ•è·ã€‚<code>&lt;Suspense&gt;</code>äºæ˜¯çŸ¥é“ï¼š"å•Šï¼Œæˆ‘çš„å­ç»„ä»¶éœ€è¦ä»è¿™ä¸ª Promise è·å–æ•°æ®ã€‚æˆ‘ä¼šæ˜¾ç¤ºæˆ‘çš„åŠ è½½çŠ¶æ€ï¼ˆfallbackï¼‰ï¼Œå¹¶ç­‰å¾…è¿™ä¸ª Promise è§£å†³ã€‚"</p>
<p>å½“ Promise è§£å†³åï¼Œ<code>&lt;Suspense&gt;</code>ä¼šé‡æ–°æ¸²æŸ“å…¶å­ç»„ä»¶ï¼Œ<code>use()</code>è¿”å›æ•°æ®ï¼Œå›¾ç‰‡å°±æ˜¾ç¤ºå‡ºæ¥äº†ã€‚</p>
<p>è¿™æ¶ˆé™¤äº†åœ¨ç»„ä»¶æ ‘çš„æ¯ä¸ªå±‚çº§è¿›è¡Œæ¡ä»¶æ¸²æŸ“çš„éœ€è¦ã€‚åŠ è½½çŠ¶æ€å˜å¾—å£°æ˜å¼ï¼Œå› ä¸ºä½ å¯ä»¥ç”¨ <code>&lt;Suspense&gt;</code>åŒ…è£…å¼‚æ­¥ç»„ä»¶ï¼Œå¹¶å®šä¹‰åœ¨åŠ è½½æ—¶æ˜¾ç¤ºä»€ä¹ˆã€‚React ä¼šå¤„ç†æ—¶æœºã€‚</p>
<p><strong>æ›´æµç•…çš„äº¤äº’ï¼šuseTransition() + action</strong></p>
<p>ä½†æˆ‘ä»¬å¯ä»¥è®©å®ƒå˜å¾—æ›´å¥½ã€‚ç›®å‰ï¼Œå½“ä½ ç‚¹å‡» "Next Image" æ—¶ï¼ŒæŒ‰é’®åœ¨æ–°å›¾ç‰‡åŠ è½½æœŸé—´ä»ç„¶å¯ç‚¹å‡»ã€‚è¿™ä¸æ˜¯å¾ˆå¥½çš„ç”¨æˆ·ä½“éªŒï¼›ç”¨æˆ·å¯èƒ½ä¼šå¤šæ¬¡ç‚¹å‡»ï¼Œé€ æˆç«æ€æ¡ä»¶ã€‚React 19.2 å¼•å…¥äº† action props å’Œ <code>useTransition()</code>æ¥ä¼˜é›…åœ°å¤„ç†è¿™ç§æƒ…å†µï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ action, children }</span>) {
  <span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">action</span>();
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
        <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>åä¸º <code>action</code>çš„ prop æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ã€‚å®ƒåªæ˜¯ä¸€ä¸ªçº¦å®šï¼Œå‘Šè¯‰å…¶ä»–å¼€å‘è€…è¿™ä¸ªæŒ‰é’®ä¼šå°†å¤„ç†å™¨åŒ…è£…åœ¨ä¸€ä¸ªè¿‡æ¸¡ï¼ˆtransitionï¼‰ä¸­ã€‚</p>
<p><strong>View Transitionsï¼šGPU åŠ é€Ÿçš„æ¶¦è‰²</strong></p>
<p>æ—¢ç„¶æˆ‘ä»¬è°ˆåˆ°äº†å¼‚æ­¥çš„ UI éƒ¨åˆ†ï¼Œè®©æˆ‘ä»¬èŠèŠ View Transitionsã€‚React 19.2ï¼ˆåœ¨å®éªŒæ€§åˆ†æ”¯ä¸Šï¼‰æ·»åŠ äº†å¯¹æµè§ˆå™¨åŸç”Ÿ View Transitions API çš„æ”¯æŒã€‚è¿™è®©ä½ åœ¨å¼‚æ­¥å†…å®¹åŠ è½½æ—¶èƒ½è·å¾—å¦‚é»„æ²¹èˆ¬é¡ºæ»‘çš„ã€GPU åŠ é€Ÿçš„åŠ¨ç”»ã€‚è€Œä¸”åªéœ€è¦å‡ è¡Œä»£ç ã€‚</p>
<p>é¦–å…ˆï¼Œæ·»åŠ ä¸€äº› CSS åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@keyframes</span> fadeIn {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
}
<span class="hljs-keyword">@keyframes</span> fadeOut {
  <span class="hljs-selector-tag">from</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-selector-tag">to</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>; }
}
<span class="hljs-keyword">@keyframes</span> pulse {
  <span class="hljs-number">0%</span>, <span class="hljs-number">100%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>; }
  <span class="hljs-number">50%</span> { <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>; }
}

::<span class="hljs-built_in">view-transition-old</span>(image-container) {
  <span class="hljs-attribute">animation</span>: fadeOut <span class="hljs-number">0.3s</span> ease-out;
}
::<span class="hljs-built_in">view-transition-new</span>(image-container) {
  <span class="hljs-attribute">animation</span>: fadeIn <span class="hljs-number">0.3s</span> ease-in;
}
::<span class="hljs-built_in">view-transition-old</span>(button-pulse) {
  <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">0.3s</span> ease-in-out;
}
</code></pre>
<p>ç„¶åå°† View Transitions æ·»åŠ åˆ°ä½ çš„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { experimental_useViewTransition <span class="hljs-keyword">as</span> useViewTransition } <span class="hljs-keyword">from</span> <span class="hljs-string">"react"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Image</span>(<span class="hljs-params">{ imageDataPromise }</span>) {
  <span class="hljs-keyword">const</span> image = <span class="hljs-title function_">use</span>(imageDataPromise);
  <span class="hljs-keyword">return</span> ;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageSkeleton</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"image-skeleton"</span> /&gt;</span></span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">{ action, children, disabled }</span>) {
  <span class="hljs-keyword">const</span> [isPending, startTransition] = <span class="hljs-title function_">useTransition</span>();
  <span class="hljs-keyword">const</span> viewTransition = <span class="hljs-title function_">useViewTransition</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">onClick</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">startTransition</span>(<span class="hljs-keyword">async</span> () =&gt; {
      <span class="hljs-keyword">await</span> <span class="hljs-title function_">action</span>();
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...viewTransition</span>("<span class="hljs-attr">button-pulse</span>")}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{onClick}</span> <span class="hljs-attr">disabled</span>=<span class="hljs-string">{isPending}</span>&gt;</span>
        {children}
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ImageViewer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [imageId, setImageId] = <span class="hljs-title function_">useState</span>(<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> [imageDataPromise, setImageDataPromise] = <span class="hljs-title function_">useState</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">fetchImage</span>(<span class="hljs-number">1</span>));

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleNext</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> nextId = imageId + <span class="hljs-number">1</span>;
    <span class="hljs-title function_">setImageId</span>(nextId);
    <span class="hljs-title function_">setImageDataPromise</span>(<span class="hljs-title function_">fetchImage</span>(nextId));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">action</span>=<span class="hljs-string">{handleNext}</span>&gt;</span>Next Image<span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> {<span class="hljs-attr">...useViewTransition</span>("<span class="hljs-attr">image-container</span>")}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">{</span>&lt;<span class="hljs-attr">ImageSkeleton</span> /&gt;</span>}&gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">Image</span> <span class="hljs-attr">imageDataPromise</span>=<span class="hljs-string">{imageDataPromise}</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>å°±è¿™æ ·ã€‚æµè§ˆå™¨ä¼šè‡ªåŠ¨å¤„ç† GPU åŠ é€Ÿçš„è¿‡æ¸¡åŠ¨ç”»ã€‚ä½ çš„éª¨æ¶å±æ·¡å‡ºï¼Œä½ çš„å›¾ç‰‡æ·¡å…¥ï¼Œä½ çš„æŒ‰é’®åœ¨åŠ è½½æ—¶ä¼šè„‰åŠ¨ã€‚æ•ˆæœéå¸¸ä¸æ»‘ï¼Œè€Œä½ å‡ ä¹æ²¡å†™ä»€ä¹ˆä»£ç ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong> â€‹ ä½ éœ€è¦ React 19.2 å®éªŒç‰ˆæ‰èƒ½ä½¿ç”¨æ­¤åŠŸèƒ½ï¼š<code>npm install react@experimental react-dom@experimental</code></p>
<p><strong>è¿™å¯¹å‰ç«¯å›¢é˜Ÿä¸ºä½•é‡è¦</strong></p>
<p>è¿™äº›æ”¹å˜ä¸ä»…ä»…æ˜¯æ¸…ç† <code>useEffect</code>/ <code>fetch</code>çš„çƒ‚æ‘Šå­ã€‚å®ƒå…³ä¹æ„å»ºä¸€ä¸ªæ›´ä¼˜ç§€çš„ Reactï¼Œè¿™ä¸ª React ç»ˆäºæ‰¿è®¤å¼‚æ­¥æ˜¯ä¸€ç­‰å…¬æ°‘ã€‚</p>
<p>è¿™äº›æ¨¡å¼æ„å‘³ç€ä½ çš„å›¢é˜Ÿç¼–å†™çš„ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚æ¡†æ¶å¤„ç†äº†æ›´å¤šäº‹æƒ…ã€‚UI å“åº”æ›´è¿…æ·ï¼Œå› ä¸ºå®ƒæ˜¯æŒ‰éœ€æ›´æ–°çš„ã€‚ä½ æ­£åœ¨åˆ©ç”¨æ›´å¤šåº•å±‚æ¡†æ¶çš„èƒ½åŠ›ï¼Œä¸ºä½ çš„åº”ç”¨èµ‹äºˆå…·æœ‰æµç•…åŠ¨ç”»çš„ç°ä»£æ„Ÿã€‚</p>
<p>è¿™ä¸å†æ˜¯"ä½ çˆ·çˆ·è¾ˆçš„ React"äº†ï¼Œæ˜¯æ—¶å€™è®©å›¢é˜Ÿå¼€å§‹ä½¿ç”¨è¿™äº›æ–°å·¥å…·äº†ã€‚</p>
<p><strong>å…³é”®è¦ç‚¹</strong></p>
<ul>
<li>
<p>React 19.2 å¸¦æ¥äº†"æ— å¤„ä¸åœ¨çš„å¼‚æ­¥"ã€‚</p>
</li>
<li>
<p>è¿™äº›åŸºç¡€æ„å»ºå—ä½œä¸ºä¸€ä¸ªç³»ç»ŸååŒå·¥ä½œï¼š</p>
<ul>
<li><code>use()</code>ä» Promise ä¸­æå–æ•°æ®</li>
<li><code>&lt;Suspense&gt;</code>å£°æ˜å¼åœ°å¤„ç†åŠ è½½çŠ¶æ€</li>
<li><code>useTransition()</code>å…è´¹ä¸ºä½ æä¾›åŠ è½½æ ‡å¿—</li>
<li>View Transitions æ·»åŠ  GPU åŠ é€Ÿçš„æ¶¦è‰²</li>
</ul>
</li>
<li>
<p>æ—§æ–¹å¼ï¼ˆ<code>useEffect</code>å’Œ <code>fetch</code>ï¼‰å¯¹ React æ¥è¯´æ˜¯ä¸ªä¸¥é‡çš„ç—›ç‚¹ï¼Œä½†æˆ‘ä»¬æœ‰äº†å¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</li>
<li>
<p>React çš„å¼‚æ­¥åŸºç¡€æ„å»ºå—æ„å‘³ç€æ›´å°‘çš„ä»£ç ã€æ›´å°‘çš„ bug å’Œæ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚</p>
</li>
<li>
<p>ä½ çš„å›¢é˜Ÿå¯ä»¥æ›´ä¸“æ³¨äºæ„å»ºä½“éªŒï¼Œè€Œä¸æ˜¯æ”¯æ’‘å®ƒçš„åº•å±‚ç®¡é“ã€‚</p>
</li>
</ul>
<p><strong>é 19.2 çš„é€‰æ‹©ï¼šTanStack Query</strong></p>
<p>è¯è™½å¦‚æ­¤ï¼Œå¦‚æœä½ è¿˜æ²¡å‡†å¤‡å¥½å‡çº§åˆ° React 19.2ï¼Œæœ‰ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ¡ˆï¼šTanStack Queryï¼ˆå‰èº«ä¸º React Queryï¼‰ã€‚å®ƒé€‚ç”¨äºä»»ä½• React ç‰ˆæœ¬ï¼Œå¹¶ä¸ºä½ æä¾›è‡ªåŠ¨ç¼“å­˜ã€åå°é‡æ–°è·å–ã€ä¹è§‚æ›´æ–°ç­‰åŠŸèƒ½ã€‚å®ƒæ˜¯ä¸€ä¸ªä¹…ç»è€ƒéªŒçš„è§£å†³æ–¹æ¡ˆï¼Œè§£å†³äº†ä¸ React 19.2 å¼‚æ­¥åŸºç¡€æ„å»ºå—ç›¸åŒçš„é—®é¢˜ï¼Œåªæ˜¯ API ä¸åŒã€‚æœ‰å……åˆ†çš„ç†ç”±è¯´æ˜ä¸ºä»€ä¹ˆè¿™ä¹ˆå¤š React åº”ç”¨éƒ½å®‰è£…äº† <code>react-query</code>ã€‚</p>
<p><strong>ä¸‹ä¸€æ­¥ï¼šReact 19.2 å¼•é¢†çš„å‰ç«¯æœªæ¥</strong></p>
<p>React 19.2 å·²ç»å‘å¸ƒã€‚å®ƒæ˜¯ç¨³å®šçš„ã€‚ä½ åº”è¯¥å°†å…¶ç”¨äºç”Ÿäº§ç¯å¢ƒï¼ˆé™¤äº†ä»åœ¨å®Œå–„ä¸­çš„ View Transitionsï¼‰ã€‚</p>
<p>å¼‚æ­¥å˜é©å·²ç»åˆ°æ¥ã€‚React ç»ˆäºè§£å†³äº†å®ƒæœ€å¤§çš„ç—›ç‚¹ï¼Œæ¡†æ¶ä¹Ÿå› æ­¤å˜å¾—æ›´å¥½ã€‚</p>
<p>å¦‚æœä½ è¿˜æ²¡æœ‰æ¢ç´¢è¿‡ React 19.2ï¼Œç°åœ¨æ˜¯æ—¶å€™äº†ã€‚åœ¨ä¸€ä¸ªå‰¯é¡¹ç›®ä¸Šè¯•è¯• <code>use()</code>å’Œ <code>&lt;Suspense&gt;</code>ï¼Œçœ‹çœ‹å¼‚æ­¥é€»è¾‘å˜å¾—å¤šä¹ˆç®€å•ã€‚ä½ ä¼šæƒŠè®¶äºè‡ªå·±ä»¥å‰æ²¡æœ‰å®ƒæ˜¯æ€ä¹ˆè¿‡çš„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ]]></title>    <link>https://juejin.cn/post/7576821684251918379</link>    <guid>https://juejin.cn/post/7576821684251918379</guid>    <pubDate>2025-11-26T09:13:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684251918379" data-draft-id="7576575703166402566" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-26T09:13:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             å‰ç«¯ä¸‰å¤§æƒé™åœºæ™¯å…¨è§£æï¼šè®¾è®¡ã€å®ç°ã€å­˜å‚¨ä¸ä¼ä¸šçº§å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:13:00.000Z" title="Wed Nov 26 2025 09:13:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    38
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="arduino-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff}.hljs-subst,.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#434f54}.hljs-attribute,.hljs-doctag,.hljs-keyword,.hljs-name,.hljs-selector-tag{color:#00979d}.hljs-addition,.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-literal{color:#d35400}.hljs-link,.hljs-regexp,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-symbol,.hljs-template-variable,.hljs-variable{color:#00979d}.hljs-deletion,.hljs-quote,.hljs-selector-class,.hljs-selector-id,.hljs-string,.hljs-template-tag,.hljs-type{color:#005c5f}.hljs-section,.hljs-title{color:#800;font-weight:700}.hljs-comment{color:rgba(149,165,166,.8)}.hljs-meta-keyword{color:#728e00}.hljs-meta{color:#434f54}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-function{color:#728e00}.hljs-number{color:#8a7b52}</style><p>æƒé™æ§åˆ¶æ˜¯å‰ç«¯åº”ç”¨ï¼ˆå°¤å…¶æ˜¯ä¸­å¤§å‹ç³»ç»Ÿï¼‰çš„æ ¸å¿ƒå®‰å…¨ä¸ä½“éªŒä¿éšœï¼Œå®Œæ•´çš„æƒé™ä½“ç³»éœ€è¦†ç›–ã€Œè·¯ç”±æƒé™ã€é¡µé¢å…ƒç´ æƒé™ã€æ¥å£æƒé™ã€ä¸‰å¤§åœºæ™¯ã€‚æœ¬æ–‡ç»“åˆçœŸå®é¡¹ç›®è½åœ°ç»éªŒï¼Œç³»ç»Ÿæ¢³ç†å„åœºæ™¯çš„åº”ç”¨é€»è¾‘ã€å®ç°æ–¹æ¡ˆã€è®¾è®¡æ¨¡å¼ä¸å­˜å‚¨å®‰å…¨ï¼Œè¡¥å……ä¼ä¸šçº§å¼€å‘çš„å…³é”®ç»†èŠ‚ä¸é¿å‘è¦ç‚¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€è·¯ç”±æƒé™ï¼šé¡µé¢è®¿é—®çš„ â€œç¬¬ä¸€é“é—¨æ§›â€</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>è§’è‰²å·®å¼‚åŒ–è®¿é—®</strong>ï¼šä¼ä¸šåå°ä¸­ï¼Œç®¡ç†å‘˜å¯è®¿é—®ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®é¡µï¼Œè¿è¥ä»…èƒ½è®¿é—®è®¢å•ç®¡ç†ã€å•†å“ç®¡ç†é¡µã€‚</li>
<li><strong>SaaS å¤šç§Ÿæˆ·å®šåˆ¶</strong>ï¼šä¸åŒç§Ÿæˆ·ï¼ˆå®¢æˆ·ï¼‰å¼€é€šä¸åŒåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚ A ç§Ÿæˆ·æœ‰æŠ¥è¡¨åˆ†ææ¨¡å—ï¼ŒB ç§Ÿæˆ·æ— ï¼‰ï¼Œåç«¯æ ¹æ®ç§Ÿæˆ· ID è¿”å›å¯¹åº”è·¯ç”±ã€‚</li>
<li><strong>æƒé™åŠ¨æ€å˜æ›´</strong>ï¼šç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹ç”¨æˆ·è§’è‰²åï¼Œå‰ç«¯æ— éœ€é‡å¯åº”ç”¨ï¼Œå®æ—¶æ›´æ–°å¯è®¿é—®é¡µé¢ã€‚</li>
<li><strong>åˆ·æ–°ä¸¢å¤±ä¿®å¤</strong>ï¼šå•é¡µåº”ç”¨ï¼ˆSPAï¼‰åˆ·æ–°åï¼ŒåŠ¨æ€æ·»åŠ çš„è·¯ç”±ä¼šä¸¢å¤±ï¼Œéœ€é‡æ–°åŠ è½½è·¯ç”±é…ç½®ã€‚</li>
<li><strong>è·¯ç”±æ‡’åŠ è½½é€‚é…</strong>ï¼šå¤§å‹åº”ç”¨ä¸­ï¼Œè·¯ç”±ç»„ä»¶ä½“ç§¯å¤§ï¼Œéœ€ç»“åˆæƒé™é¢„æ ¡éªŒå®ç°æŒ‰éœ€åŠ è½½ï¼Œé¿å…æ— æ•ˆèµ„æºè¯·æ±‚ã€‚</li>
</ul>
<h3 data-id="heading-2">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰æ··åˆå¼è·¯ç”±é…ç½®ï¼ˆå‰ç«¯é¢„è®¾ + åç«¯è¿‡æ»¤ï¼‰</h4>
<p>çº¯åç«¯è¿”å›è·¯ç”±çµæ´»æ€§å·®ï¼Œçº¯å‰ç«¯é¢„è®¾è·¯ç”±éš¾ä»¥åº”å¯¹æƒé™å˜æ›´ï¼Œå®é™…é¡¹ç›®å¸¸ç”¨æ··åˆæ–¹æ¡ˆï¼š</p>
<ul>
<li>å‰ç«¯é¢„è®¾ã€ŒåŸºç¡€è·¯ç”±ã€ï¼ˆç™»å½•é¡µã€404 é¡µã€é¦–é¡µï¼‰å’Œã€Œæƒé™è·¯ç”±æ¨¡æ¿ã€ï¼ˆå« meta.permission æ ‡è¯†é¡µé¢æ‰€éœ€æƒé™ï¼‰ã€‚</li>
<li>ç™»å½•åï¼Œåç«¯è¿”å›ç”¨æˆ·ã€Œæƒé™æ ‡è¯†åˆ—è¡¨ã€ï¼Œå‰ç«¯è¿‡æ»¤å‡ºå¯è®¿é—®çš„æƒé™è·¯ç”±ï¼ŒåŠ¨æ€æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯é¢„è®¾è·¯ç”±æ¨¡æ¿</span>
<span class="hljs-keyword">const</span> asyncRoutes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/user-manage'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'UserManage'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/UserManage.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'user:manage'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç”¨æˆ·ç®¡ç†'</span> } <span class="hljs-comment">// é¡µé¢æ‰€éœ€æƒé™æ ‡è¯†</span>
  },
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/system-config'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'SystemConfig'</span>,
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'../views/SystemConfig.vue'</span>),
    <span class="hljs-attr">meta</span>: { <span class="hljs-attr">permission</span>: <span class="hljs-string">'system:config'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç³»ç»Ÿé…ç½®'</span> }
  }
];

<span class="hljs-comment">// ç”Ÿæˆå¯è®¿é—®è·¯ç”±ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">generateAccessibleRoutes</span> = (<span class="hljs-params">permissions</span>) =&gt; {
  <span class="hljs-keyword">return</span> asyncRoutes.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">route</span> =&gt;</span> {
    <span class="hljs-comment">// æ— æƒé™æ ‡è¯†çš„è·¯ç”±é»˜è®¤å¯è®¿é—®ï¼Œæœ‰æƒé™æ ‡è¯†éœ€åŒ¹é…ç”¨æˆ·æƒé™</span>
    <span class="hljs-keyword">return</span> !route.<span class="hljs-property">meta</span>?.<span class="hljs-property">permission</span> || permissions.<span class="hljs-title function_">includes</span>(route.<span class="hljs-property">meta</span>.<span class="hljs-property">permission</span>);
  });
};
</code></pre>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰è·¯ç”±å®ˆå«çš„ â€œè´£ä»»é“¾æ ¡éªŒâ€</h4>
<p>å°†ç™»å½•æ ¡éªŒã€æƒé™æ ¡éªŒã€åˆ·æ–°ä¿®å¤ç­‰é€»è¾‘æ‹†åˆ†ä¸ºç‹¬ç«‹å®ˆå«ï¼ŒæŒ‰é¡ºåºæ‰§è¡Œï¼Œé™ä½è€¦åˆï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">router.beforeEach(<span class="hljs-keyword">async</span> (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = localStorage.getItem(<span class="hljs-comment">'token');</span>
  <span class="hljs-keyword">const</span> userPermissions = store.getters.userPermissions;

  // <span class="hljs-number">1</span>. æœªç™»å½•æ‹¦æˆªï¼ˆè´£ä»»é“¾ç¬¬ä¸€ç¯ï¼‰
  <span class="hljs-keyword">if</span> (!token &amp;&amp; <span class="hljs-keyword">to</span>.path !== <span class="hljs-comment">'/login') {</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/login?redirect=' + to.fullPath); // è®°å½•è·³è½¬ç›®æ ‡ï¼Œç™»å½•åå›è·³</span>
  }

  // <span class="hljs-number">2</span>. å·²ç™»å½•ä½†æ— æƒé™è®¿é—®ï¼ˆè´£ä»»é“¾ç¬¬äºŒç¯ï¼‰
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">to</span>.meta.permission &amp;&amp; !userPermissions.includes(<span class="hljs-keyword">to</span>.meta.permission)) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-comment">'/403'); // è·³è½¬åˆ°è‡ªå®šä¹‰æ— æƒé™é¡µï¼Œæå‡ä½“éªŒ</span>
  }

  // <span class="hljs-number">3</span>. åˆ·æ–°ååŠ¨æ€è·¯ç”±ä¸¢å¤±ä¿®å¤ï¼ˆè´£ä»»é“¾ç¬¬ä¸‰ç¯ï¼‰
  <span class="hljs-keyword">if</span> (store.getters.accessRoutes.length === <span class="hljs-number">0</span> &amp;&amp; token) {
    <span class="hljs-keyword">const</span> accessibleRoutes = generateAccessibleRoutes(userPermissions);
    store.dispatch(<span class="hljs-comment">'setAccessRoutes', accessibleRoutes);</span>
    accessibleRoutes.forEach(route =&gt; router.addRoute(route));
    // é‡æ–°è§¦å‘è·¯ç”±è·³è½¬ï¼Œé¿å…ç©ºç™½é¡µ
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>({ ...<span class="hljs-keyword">to</span>, replace: <span class="hljs-literal">true</span> });
  }

  <span class="hljs-keyword">next</span>();
});
</code></pre>
<h4 data-id="heading-5">ï¼ˆ3ï¼‰è·¯ç”±ç‹¬äº«å®ˆå«å¢å¼º</h4>
<p>é’ˆå¯¹æ•æ„Ÿé¡µé¢ï¼ˆå¦‚è´¢åŠ¡å¯¹è´¦ã€ç”¨æˆ·æƒé™é…ç½®ï¼‰ï¼Œæ·»åŠ äºŒæ¬¡æ ¡éªŒï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">const</span> routes = [
  {
    path: <span class="hljs-comment">'/financial-reconciliation',</span>
    component: FinancialReconciliation,
    meta: { permission: <span class="hljs-comment">'financial:view' },</span>
    beforeEnter: (<span class="hljs-keyword">to</span>, <span class="hljs-keyword">from</span>, <span class="hljs-keyword">next</span>) =&gt; {
      // é¢å¤–æ ¡éªŒï¼šä»…å·¥ä½œæ—¶é—´å¯è®¿é—®
      <span class="hljs-keyword">const</span> hour = <span class="hljs-built_in">new</span> <span class="hljs-type">Date</span>().getHours();
      <span class="hljs-keyword">if</span> (hour &lt; <span class="hljs-number">9</span> || hour &gt; <span class="hljs-number">18</span>) {
        ElMessage.warning(<span class="hljs-comment">'ä»…å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰å¯è®¿é—®');</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">next</span>(<span class="hljs-keyword">from</span>.path);
      }
      <span class="hljs-keyword">next</span>();
    }
  }
];
</code></pre>
<h3 data-id="heading-6">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šè·¯ç”±å®ˆå«æŒ‰ â€œç™»å½•æ ¡éªŒâ†’æƒé™æ ¡éªŒâ†’åˆ·æ–°ä¿®å¤â€ çš„é¡ºåºæ‰§è¡Œï¼Œæ¯ä¸ªå®ˆå«è´Ÿè´£å•ä¸€èŒè´£ï¼Œå¯çµæ´»å¢åˆ è°ƒæ•´ã€‚</li>
<li><strong>ç­–ç•¥æ¨¡å¼</strong>ï¼šæ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆå¦‚ adminã€editorï¼‰åº”ç”¨ä¸åŒçš„è·¯ç”±è¿‡æ»¤ç­–ç•¥ï¼Œä¾‹å¦‚ç®¡ç†å‘˜ä¿ç•™æ‰€æœ‰æƒé™è·¯ç”±ï¼Œè¿è¥ä»…ä¿ç•™ä¸šåŠ¡ç›¸å…³è·¯ç”±ã€‚</li>
<li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>ï¼šæƒé™å˜æ›´æ—¶ï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™ï¼‰ï¼Œè§¦å‘è·¯ç”±é‡æ–°åŠ è½½äº‹ä»¶ï¼Œæ›´æ–°å¯è®¿é—®è·¯ç”±åˆ—è¡¨ã€‚</li>
</ul>
<h3 data-id="heading-7">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-8">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>è·¯ç”±é…ç½®ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œåˆ·æ–°åé‡æ–°è¯·æ±‚åç«¯è·å–ï¼Œé¿å… localStorage å­˜å‚¨æ•æ„Ÿè·¯ç”±è§„åˆ™ï¼ˆå¦‚æ¥å£åœ°å€ã€æƒé™æ ‡è¯†ï¼‰ã€‚</li>
<li>ç”¨æˆ·æƒé™æ ‡è¯†ï¼šé‡‡ç”¨ â€œlocalStorageï¼ˆæŒä¹…åŒ–ï¼‰+ Vuex/Piniaï¼ˆå†…å­˜è®¿é—®ï¼‰â€ åŒå­˜å‚¨ï¼ŒlocalStorage ç¡®ä¿åˆ·æ–°åä¸ä¸¢å¤±ï¼ŒVuex/Pinia æå‡è®¿é—®æ•ˆç‡ã€‚</li>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorage æˆ– sessionStorageï¼Œå»ºè®®è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 2 å°æ—¶ï¼‰ï¼Œé™ä½æ³„éœ²é£é™©ã€‚</li>
</ul>
<h4 data-id="heading-9">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>æƒé™æ ‡è¯†åŠ å¯†ï¼šå¯¹ localStorage ä¸­çš„æƒé™æ ‡è¯†åšç®€å•åŠ å¯†ï¼ˆå¦‚ Base64ï¼‰ï¼Œé¿å…æ˜æ–‡æ³„éœ²ï¼ˆè™½ä¸èƒ½é˜²ç ´è§£ï¼Œä½†èƒ½æå‡åŸºç¡€å®‰å…¨ï¼‰ã€‚</li>
<li>é˜² URL ç»•è¿‡ï¼šå³ä½¿å‰ç«¯éšè—è·¯ç”±ï¼Œç”¨æˆ·ç›´æ¥è¾“å…¥ URL è®¿é—®æ—¶ï¼Œåç«¯éœ€å¯¹ â€œé¡µé¢åˆå§‹åŒ–æ¥å£â€ åšæƒé™æ ¡éªŒï¼ˆå¦‚è®¿é—®<code>/system-config</code>æ—¶ï¼Œåç«¯æ ¡éªŒ<code>system:config</code>æƒé™ï¼‰ã€‚</li>
<li>æ•æ„Ÿè·¯ç”±éšè—ï¼šæ— æƒé™çš„è·¯ç”±ä¸æ·»åŠ åˆ°è·¯ç”±å®ä¾‹ï¼ŒåŒæ—¶åœ¨èœå•æ¸²æŸ“æ—¶è¿‡æ»¤ï¼Œé¿å…ç”¨æˆ·æ„ŸçŸ¥æœªæˆæƒåŠŸèƒ½ã€‚</li>
</ul>
<h2 data-id="heading-10">äºŒã€é¡µé¢å…ƒç´ æƒé™ï¼šç»†ç²’åº¦çš„ â€œåŠŸèƒ½å¯è§æ€§æ§åˆ¶â€</h2>
<h3 data-id="heading-11">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ“ä½œæƒé™å·®å¼‚åŒ–</strong>ï¼šåŒä¸€é¡µé¢ä¸­ï¼Œç®¡ç†å‘˜å¯çœ‹åˆ° â€œåˆ é™¤ç”¨æˆ·â€â€œæ‰¹é‡å¯¼å‡ºâ€ æŒ‰é’®ï¼Œæ™®é€šç”¨æˆ·ä»…èƒ½çœ‹åˆ° â€œæŸ¥çœ‹è¯¦æƒ…â€ æŒ‰é’®ã€‚</li>
<li><strong>æ•°æ®åˆ—æƒé™</strong>ï¼šè¡¨æ ¼ä¸­ï¼Œç®¡ç†å‘˜å¯æŸ¥çœ‹ â€œæ‰‹æœºå·â€â€œèº«ä»½è¯å·â€ åˆ—ï¼Œè¿è¥ä»…èƒ½æŸ¥çœ‹ â€œç”¨æˆ·åâ€â€œè®¢å•å·â€ åˆ—ã€‚</li>
<li><strong>å¤æ‚æƒé™ç»„åˆ</strong>ï¼šæŒ‰é’®æ˜¾ç¤ºéœ€æ»¡è¶³ â€œè§’è‰²ä¸º editor + æ‹¥æœ‰ order:edit æƒé™ + æ•°æ®å½’å±æœ¬éƒ¨é—¨â€ ç­‰å¤šæ¡ä»¶ç»„åˆã€‚</li>
<li><strong>ç°åº¦åŠŸèƒ½å‘å¸ƒ</strong>ï¼šæ–°åŠŸèƒ½ä¸Šçº¿æ—¶ï¼Œä»…å¯¹éƒ¨åˆ†ç”¨æˆ·ï¼ˆå¦‚å†…éƒ¨æµ‹è¯•è´¦å·ï¼‰æ˜¾ç¤ºå…¥å£ï¼Œé€æ­¥å…¨é‡å¼€æ”¾ã€‚</li>
<li><strong>æƒé™åŠ¨æ€æ›´æ–°</strong>ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œé¡µé¢å…ƒç´ å®æ—¶åˆ·æ–°ï¼ˆå¦‚ç«‹å³éšè— â€œåˆ é™¤â€ æŒ‰é’®ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-12">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-13">ï¼ˆ1ï¼‰æƒé™ä¸­å¿ƒå°è£…ï¼ˆè§£å†³ç¢ç‰‡åŒ–é—®é¢˜ï¼‰</h4>
<p>æ„å»ºå…¨å±€æƒé™ä¸­å¿ƒï¼Œç»Ÿä¸€ç®¡ç†æƒé™æ ¡éªŒé€»è¾‘ï¼Œé¿å…æ•£è½åœ¨å„ç»„ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// src/utils/permissionCenter.js</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PermissionCenter</span> {
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.permissions = []; <span class="hljs-comment">// æƒé™ç åˆ—è¡¨ï¼ˆå¦‚["user:add", "order:edit"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.roles = []; <span class="hljs-comment">// è§’è‰²åˆ—è¡¨ï¼ˆå¦‚["admin", "editor"]ï¼‰</span>
    <span class="hljs-keyword">this</span>.customRules = new Map(); <span class="hljs-comment">// è‡ªå®šä¹‰æƒé™è§„åˆ™ï¼ˆåº”å¯¹å¤æ‚åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">this</span>.cache = new Map(); <span class="hljs-comment">// æ ¡éªŒç»“æœç¼“å­˜ï¼Œæå‡æ€§èƒ½</span>
  }

  <span class="hljs-comment">// åˆå§‹åŒ–æƒé™æ•°æ®</span>
  <span class="hljs-keyword">init</span>(permissions, roles) {
    <span class="hljs-keyword">this</span>.permissions = permissions;
    <span class="hljs-keyword">this</span>.roles = roles;
    <span class="hljs-keyword">this</span>.cache.clear(); <span class="hljs-comment">// åˆå§‹åŒ–æ—¶æ¸…ç©ºç¼“å­˜</span>
  }

  <span class="hljs-comment">// åŸºç¡€æƒé™æ ¡éªŒï¼ˆæƒé™ç åŒ¹é…ï¼‰</span>
  hasPermission(code) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.cache.has(code)) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">get</span>(code);
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">this</span>.permissions.includes(code);
    <span class="hljs-keyword">this</span>.cache.<span class="hljs-keyword">set</span>(code, result); <span class="hljs-comment">// ç¼“å­˜æ ¡éªŒç»“æœ</span>
    <span class="hljs-keyword">return</span> result;
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  hasRole(role) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.roles.includes(role);
  }

  <span class="hljs-comment">// å¤æ‚è§„åˆ™æ ¡éªŒï¼ˆæ”¯æŒå¤šæ¡ä»¶ç»„åˆï¼‰</span>
  checkCustomRule(ruleName, ...args) {
    <span class="hljs-keyword">const</span> rule = <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">get</span>(ruleName);
    <span class="hljs-keyword">if</span> (!rule) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-keyword">return</span> rule(...args);
  }

  <span class="hljs-comment">// æ³¨å†Œè‡ªå®šä¹‰è§„åˆ™</span>
  registerCustomRule(ruleName, ruleFn) {
    <span class="hljs-keyword">this</span>.customRules.<span class="hljs-keyword">set</span>(ruleName, ruleFn);
  }

  <span class="hljs-comment">// æƒé™æ›´æ–°ï¼ˆè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ï¼‰</span>
  updatePermissions(permissions, roles) {
    <span class="hljs-keyword">this</span>.<span class="hljs-keyword">init</span>(permissions, roles);
    <span class="hljs-comment">// è§¦å‘Vueå“åº”å¼æ›´æ–°ï¼ˆéœ€ç»“åˆVuex/Piniaï¼‰</span>
    store.dispatch(<span class="hljs-string">'updateUserPermissions'</span>, { permissions, roles });
  }
}

export default new PermissionCenter();
</code></pre>
<h4 data-id="heading-14">ï¼ˆ2ï¼‰æŒ‡ä»¤ + ç»„ä»¶çš„åŒå±‚æ§åˆ¶</h4>
<ul>
<li><strong>å…¨å±€æŒ‡ä»¤ï¼ˆv-permï¼‰</strong> ï¼šè´Ÿè´£åŸºç¡€æƒé™æ ¡éªŒï¼Œå¿«é€Ÿéšè—æ— æƒé™å…ƒç´ ï¼š</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// æ³¨å†Œå…¨å±€æƒé™æŒ‡ä»¤
app.directive('perm', {
  mounted(el, binding) {
    const { value, arg } = binding<span class="hljs-comment">;</span>
    let <span class="hljs-attr">hasAccess</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>

    // æ”¯æŒæƒé™ç æ ¡éªŒï¼ˆ<span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>ï¼‰å’Œè‡ªå®šä¹‰è§„åˆ™æ ¡éªŒï¼ˆv-perm:rule=<span class="hljs-string">"xxx"</span>ï¼‰
    if (<span class="hljs-attr">arg</span> === <span class="hljs-string">'rule'</span>) {
      const { name, args } = value<span class="hljs-comment">;</span>
      <span class="hljs-attr">hasAccess</span> = permissionCenter.checkCustomRule(name, ...args)<span class="hljs-comment">;</span>
    } else {
      <span class="hljs-attr">hasAccess</span> = permissionCenter.hasPermission(value)<span class="hljs-comment">;</span>
    }

    // æ— æƒé™æ—¶ç§»é™¤å…ƒç´ ï¼ˆé¿å…ç”¨æˆ·é€šè¿‡DOMæ“ä½œæ˜¾ç¤ºï¼‰
    if (!hasAccess) {
      el.parentNode?.removeChild(el)<span class="hljs-comment">;</span>
    }
  },
  // æƒé™æ›´æ–°æ—¶é‡æ–°æ ¡éªŒï¼ˆå¦‚ç®¡ç†å‘˜ä¿®æ”¹æƒé™åï¼‰
  updated(el, binding) {
    // å¤ç”¨mountedé€»è¾‘ï¼Œé‡æ–°æ ¡éªŒæƒé™
    this.mounted(el, binding)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><strong>æƒé™ç»„ä»¶ï¼ˆPermissionWrapï¼‰</strong> ï¼šåº”å¯¹å¤æ‚åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆã€æƒé™å˜æ›´åˆ·æ–°ï¼‰ï¼š</li>
</ul>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- components/PermissionWrap.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">slot</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasAccess"</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { computed } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> permissionCenter <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/permissionCenter'</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-comment">// æƒé™ç ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">perm</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è§’è‰²ï¼ˆå•ä¸ªæˆ–æ•°ç»„ï¼‰</span>
  <span class="hljs-attr">role</span>: { <span class="hljs-attr">type</span>: [<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Array</span>], <span class="hljs-attr">default</span>: <span class="hljs-string">''</span> },
  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™</span>
  <span class="hljs-attr">customRule</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>, <span class="hljs-attr">default</span>: <span class="hljs-literal">null</span> }
});

<span class="hljs-comment">// æƒé™æ ¡éªŒé€»è¾‘</span>
<span class="hljs-keyword">const</span> hasAccess = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// æƒé™ç æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">perm</span>) {
    <span class="hljs-keyword">const</span> perms = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">perm</span>) ? props.<span class="hljs-property">perm</span> : [props.<span class="hljs-property">perm</span>];
    <span class="hljs-keyword">if</span> (!perms.<span class="hljs-title function_">every</span>(<span class="hljs-function"><span class="hljs-params">perm</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasPermission</span>(perm))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è§’è‰²æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">role</span>) {
    <span class="hljs-keyword">const</span> roles = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(props.<span class="hljs-property">role</span>) ? props.<span class="hljs-property">role</span> : [props.<span class="hljs-property">role</span>];
    <span class="hljs-keyword">if</span> (!roles.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">role</span> =&gt;</span> permissionCenter.<span class="hljs-title function_">hasRole</span>(role))) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒ</span>
  <span class="hljs-keyword">if</span> (props.<span class="hljs-property">customRule</span>) {
    <span class="hljs-keyword">const</span> { name, args } = props.<span class="hljs-property">customRule</span>;
    <span class="hljs-keyword">if</span> (!permissionCenter.<span class="hljs-title function_">checkCustomRule</span>(name, ...args)) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-15">ï¼ˆ3ï¼‰é¡µé¢ä¸­ä½¿ç”¨ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€æƒé™æŒ‰é’® --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-perm</span>=<span class="hljs-string">"user:delete"</span>&gt;</span>åˆ é™¤ç”¨æˆ·<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è§’è‰²+æƒé™ç»„åˆæ§åˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">perm</span>=<span class="hljs-string">"order:export"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"admin"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ‰¹é‡å¯¼å‡ºè®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- å¤æ‚è‡ªå®šä¹‰è§„åˆ™ï¼ˆä»…èƒ½æ“ä½œè‡ªå·±åˆ›å»ºçš„è®¢å•ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">PermissionWrap</span> <span class="hljs-attr">:custom-rule</span>=<span class="hljs-string">"{ name: 'canOperateOrder', args: [order] }"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"editOrder(order.id)"</span>&gt;</span>ç¼–è¾‘è®¢å•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">PermissionWrap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- è¡¨æ ¼åˆ—æƒé™ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"æ‰‹æœºå·"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"permissionCenter.hasPermission('user:view:phone')"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"scope"</span>&gt;</span>{{ scope.row.phone }}<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
</code></pre>
<h3 data-id="heading-16">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>è£…é¥°å™¨æ¨¡å¼</strong>ï¼šé€šè¿‡<code>v-perm</code>æŒ‡ä»¤æˆ–<code>PermissionWrap</code>ç»„ä»¶åŒ…è£…åŸæœ‰å…ƒç´ ï¼Œæ·»åŠ æƒé™æ§åˆ¶é€»è¾‘ï¼Œä¸ä¿®æ”¹å…ƒç´ æœ¬èº«ä»£ç ï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚</li>
<li><strong>ç»„åˆæ¨¡å¼</strong>ï¼šå°†åŸºç¡€æƒé™æ ¡éªŒã€è§’è‰²æ ¡éªŒã€è‡ªå®šä¹‰è§„åˆ™æ ¡éªŒç»„åˆä¸ºå¤æ‚æƒé™é€»è¾‘ï¼Œæ”¯æŒçµæ´»ç»„åˆä¸æ‰©å±•ã€‚</li>
<li><strong>å•ä¾‹æ¨¡å¼</strong>ï¼šæƒé™ä¸­å¿ƒï¼ˆPermissionCenterï¼‰é‡‡ç”¨å•ä¾‹è®¾è®¡ï¼Œç¡®ä¿å…¨åº”ç”¨æƒé™æ•°æ®ä¸€è‡´ï¼Œé¿å…é‡å¤åˆå§‹åŒ–ã€‚</li>
</ul>
<h3 data-id="heading-17">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-18">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>æƒé™ç  / è§’è‰²åˆ—è¡¨ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰+ localStorageï¼ˆæŒä¹…åŒ–ï¼‰ï¼Œä¸è·¯ç”±æƒé™å…±ç”¨å­˜å‚¨ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</li>
<li>è‡ªå®šä¹‰è§„åˆ™ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒå®ä¾‹ä¸­ï¼ˆå†…å­˜ï¼‰ï¼Œåˆå§‹åŒ–æ—¶æ³¨å†Œï¼Œæ— éœ€æŒä¹…åŒ–ã€‚</li>
<li>æ ¡éªŒç»“æœç¼“å­˜ï¼šå­˜å‚¨åœ¨æƒé™ä¸­å¿ƒçš„<code>cache</code>å±æ€§ï¼ˆå†…å­˜ï¼‰ï¼Œé¡µé¢åˆ·æ–°åæ¸…ç©ºï¼Œé¿å…ç¼“å­˜è¿‡æœŸã€‚</li>
</ul>
<h4 data-id="heading-19">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>é˜² DOM ç¯¡æ”¹ï¼šä»…ç”¨<code>v-if</code>éšè—å…ƒç´ ä¸å¤Ÿï¼Œéœ€ç”¨<code>el.remove()</code>å½»åº•ç§»é™¤ï¼Œé¿å…ç”¨æˆ·é€šè¿‡æµè§ˆå™¨æ§åˆ¶å°ä¿®æ”¹ DOM æ˜¾ç¤ºæ— æƒé™å…ƒç´ ã€‚</li>
<li>äºŒæ¬¡æ ¡éªŒï¼šæŒ‰é’®ç‚¹å‡»äº‹ä»¶ä¸­æ·»åŠ æƒé™äºŒæ¬¡æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡æ§åˆ¶å°è§¦å‘äº‹ä»¶ï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">const</span> handleDelete = (userId) =&gt; {
  <span class="hljs-keyword">if</span> (!permissionCenter.hasPermission(<span class="hljs-string">'user:delete'</span>)) {
    ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ— åˆ é™¤æƒé™'</span>);
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-comment">// æ‰§è¡Œåˆ é™¤é€»è¾‘</span>
};
</code></pre>
<ul>
<li>æƒé™æ›´æ–°åŒæ­¥ï¼šç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯è°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æƒé™æ•°æ®ï¼Œè§¦å‘å…ƒç´ é‡æ–°æ¸²æŸ“ã€‚</li>
</ul>
<h2 data-id="heading-20">ä¸‰ã€æ¥å£æƒé™ï¼šç³»ç»Ÿå®‰å…¨çš„ â€œæœ€åä¸€é“é˜²çº¿â€</h2>
<h3 data-id="heading-21">1. æ ¸å¿ƒåº”ç”¨åœºæ™¯</h3>
<ul>
<li><strong>æ•æ„Ÿæ“ä½œæ¥å£æ§åˆ¶</strong>ï¼š<code>/api/user/delete</code>ï¼ˆåˆ é™¤ç”¨æˆ·ï¼‰ã€<code>/api/order/update-status</code>ï¼ˆä¿®æ”¹è®¢å•çŠ¶æ€ï¼‰ç­‰é«˜å±æ¥å£ï¼Œä»…æˆæƒè§’è‰²å¯è°ƒç”¨ã€‚</li>
<li><strong>æ•°æ®èŒƒå›´æƒé™</strong>ï¼š<code>/api/order/list</code>æ¥å£ï¼Œç®¡ç†å‘˜è¿”å›æ‰€æœ‰è®¢å•ï¼Œæ™®é€šç”¨æˆ·ä»…è¿”å›è‡ªå·±åˆ›å»ºçš„è®¢å•ã€‚</li>
<li><strong>æ¥å£é¢‘ç‡é™åˆ¶</strong>ï¼šå…è´¹ç”¨æˆ·è°ƒç”¨<code>/api/search</code>æ¥å£æ¯åˆ†é’Ÿæœ€å¤š 10 æ¬¡ï¼Œä»˜è´¹ç”¨æˆ·æ— é™åˆ¶ã€‚</li>
<li><strong>æ¥å£ç‰ˆæœ¬æƒé™</strong>ï¼šæ–°ç‰ˆæœ¬æ¥å£ï¼ˆå¦‚<code>/api/v2/order</code>ï¼‰ä»…å¯¹å·²å‡çº§ç‰ˆæœ¬çš„ç§Ÿæˆ·å¼€æ”¾ã€‚</li>
<li><strong>Token å¤±æ•ˆ / æƒé™å˜æ›´å¤„ç†</strong>ï¼šToken è¿‡æœŸæˆ–æƒé™è¢«å›æ”¶æ—¶ï¼Œæ¥å£è¿”å› 403/401ï¼Œå‰ç«¯éœ€ä¼˜é›…å¤„ç†ï¼ˆå¦‚ç™»å‡ºã€åˆ·æ–° Tokenï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-22">2. ä¼ä¸šçº§å®ç°æ–¹å¼</h3>
<h4 data-id="heading-23">ï¼ˆ1ï¼‰è¯·æ±‚ / å“åº”æ‹¦æˆªå™¨çš„å…¨é“¾è·¯æ§åˆ¶</h4>
<ul>
<li><strong>è¯·æ±‚æ‹¦æˆªå™¨</strong>ï¼šæ·»åŠ  Tokenã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼š</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript">axios.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
  <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
    <span class="hljs-comment">// 1. æ·»åŠ Tokenï¼ˆé‰´æƒåŸºç¡€ï¼‰</span>
    <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>);
    <span class="hljs-keyword">if</span> (token) {
      config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>;
    }

    <span class="hljs-comment">// 2. æ¥å£æƒé™é¢„åˆ¤ï¼ˆå‡å°‘æ— æ•ˆè¯·æ±‚ï¼‰</span>
    <span class="hljs-keyword">const</span> { url, method } = config;
    <span class="hljs-comment">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆå¦‚"DELETE:/api/user/delete" â†’ "user:delete"ï¼‰</span>
    <span class="hljs-keyword">const</span> apiPerm = <span class="hljs-title function_">generateApiPermissionKey</span>(method, url);
    <span class="hljs-keyword">if</span> (apiPerm &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasPermission</span>(apiPerm)) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æ¥å£æƒé™ï¼š<span class="hljs-subst">${apiPerm}</span>`</span>));
    }

    <span class="hljs-comment">// 3. æ•°æ®èŒƒå›´å‚æ•°ï¼ˆé…åˆåç«¯è¿‡æ»¤ï¼‰</span>
    <span class="hljs-keyword">if</span> (url.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'/api/order/list'</span>) &amp;&amp; !permissionCenter.<span class="hljs-title function_">hasRole</span>(<span class="hljs-string">'admin'</span>)) {
      config.<span class="hljs-property">params</span> = { ...config.<span class="hljs-property">params</span>, <span class="hljs-attr">creatorId</span>: store.<span class="hljs-property">getters</span>.<span class="hljs-property">userId</span> };
    }

    <span class="hljs-comment">// 4. å¹‚ç­‰æ€§å¤„ç†ï¼ˆæ•æ„Ÿæ¥å£é˜²é‡å¤è°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">if</span> ([<span class="hljs-string">'POST'</span>, <span class="hljs-string">'PUT'</span>, <span class="hljs-string">'DELETE'</span>].<span class="hljs-title function_">includes</span>(method)) {
      config.<span class="hljs-property">headers</span>[<span class="hljs-string">'X-Request-Id'</span>] = <span class="hljs-title function_">uuidv4</span>();
    }

    <span class="hljs-keyword">return</span> config;
  },
  <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
);
</code></pre>
<ul>
<li><strong>å“åº”æ‹¦æˆªå™¨</strong>ï¼šå¤„ç†æƒé™å¼‚å¸¸ã€Token å¤±æ•ˆï¼š</li>
</ul>
<pre><code class="hljs language-go" lang="go">axios.interceptors.response.use(
  (response) =&gt; {
    <span class="hljs-comment">// ç¼“å­˜é¢‘ç¹è°ƒç”¨çš„éæ•æ„Ÿæ¥å£ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (response.config.url === <span class="hljs-string">'/api/user/info'</span> &amp;&amp; response.status === <span class="hljs-number">200</span>) {
      store.dispatch(<span class="hljs-string">'cacheUserInfo'</span>, response.data);
    }
    <span class="hljs-keyword">return</span> response;
  },
  (<span class="hljs-type">error</span>) =&gt; {
    <span class="hljs-keyword">const</span> { status, data } = <span class="hljs-type">error</span>.response || {};
    <span class="hljs-keyword">switch</span> (status) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
        <span class="hljs-comment">// Tokenå¤±æ•ˆï¼Œç™»å‡ºå¹¶è·³è½¬ç™»å½•é¡µ</span>
        ElMessage.<span class="hljs-type">error</span>(data.msg || <span class="hljs-string">'ç™»å½•å·²å¤±æ•ˆï¼Œè¯·é‡æ–°ç™»å½•'</span>);
        store.dispatch(<span class="hljs-string">'logout'</span>);
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
        <span class="hljs-comment">// åŒºåˆ†æ¥å£æƒé™ä¸è¶³å’Œæ•°æ®æƒé™ä¸è¶³</span>
        <span class="hljs-keyword">const</span> msg = data.msg || <span class="hljs-string">'æ— æ¥å£è®¿é—®æƒé™'</span>;
        ElMessage.<span class="hljs-type">error</span>(msg);
        <span class="hljs-comment">// æ•æ„Ÿæ“ä½œæƒé™ä¸è¶³ï¼Œå¯è®°å½•æ—¥å¿—</span>
        <span class="hljs-keyword">if</span> (msg.includes(<span class="hljs-string">'æ•æ„Ÿæ“ä½œ'</span>)) {
          reportPermissionError({ url: <span class="hljs-type">error</span>.config.url, msg });
        }
        <span class="hljs-keyword">break</span>;
      <span class="hljs-keyword">case</span> <span class="hljs-number">429</span>:
        ElMessage.<span class="hljs-type">error</span>(<span class="hljs-string">'æ¥å£è°ƒç”¨è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•'</span>);
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-keyword">return</span> Promise.reject(<span class="hljs-type">error</span>);
  }
);
</code></pre>
<h4 data-id="heading-24">ï¼ˆ2ï¼‰æ¥å£æƒé™æ ‡è¯†ç”Ÿæˆè§„åˆ™</h4>
<p>ç»Ÿä¸€æ¥å£ä¸æƒé™ç çš„æ˜ å°„å…³ç³»ï¼Œé¿å…æ··ä¹±ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç”Ÿæˆæ¥å£æƒé™æ ‡è¯†ï¼ˆmethod + æ¥å£è·¯å¾„ç®€åŒ–ï¼‰
const <span class="hljs-attr">generateApiPermissionKey</span> = (method, url) =&gt; {
  // ç¤ºä¾‹ï¼šDELETE /api/user/123 â†’ user:delete
  // ç¤ºä¾‹ï¼šGET /api/order/list â†’ order:list
  const <span class="hljs-attr">pathParts</span> = url.replace(/^/api//, <span class="hljs-string">''</span>).split(<span class="hljs-string">'/'</span>)<span class="hljs-comment">;</span>
  if (<span class="hljs-attr">pathParts.length</span> === <span class="hljs-number">0</span>) return <span class="hljs-string">''</span><span class="hljs-comment">;</span>
  const <span class="hljs-attr">resource</span> = pathParts[<span class="hljs-number">0</span>]<span class="hljs-comment">; // èµ„æºåï¼ˆuser/orderï¼‰</span>
  let <span class="hljs-attr">action</span> = method.toLowerCase()<span class="hljs-comment">; // æ“ä½œï¼ˆget/post/deleteï¼‰</span>
  // ç‰¹æ®Šæ˜ å°„ï¼šgetåˆ—è¡¨ â†’ listï¼Œgetè¯¦æƒ… â†’ view
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.includes(<span class="hljs-string">'list'</span>)) action = <span class="hljs-string">'list'</span><span class="hljs-comment">;</span>
  if (<span class="hljs-attr">method</span> === <span class="hljs-string">'GET'</span> &amp;&amp; pathParts.length &gt;= <span class="hljs-number">2</span> &amp;&amp; !isNaN(pathParts[<span class="hljs-number">1</span>])) action = <span class="hljs-string">'view'</span><span class="hljs-comment">;</span>
  return `${resource}:${action}`<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-25">3. è®¾è®¡æ¨¡å¼</h3>
<ul>
<li><strong>ä»£ç†æ¨¡å¼</strong>ï¼šè¯·æ±‚æ‹¦æˆªå™¨ä½œä¸ºæ¥å£è°ƒç”¨çš„ä»£ç†ï¼Œç»Ÿä¸€æ·»åŠ é‰´æƒä¿¡æ¯ã€æƒé™é¢„åˆ¤ã€æ•°æ®èŒƒå›´å‚æ•°ï¼Œä¸ä¿®æ”¹ä¸šåŠ¡è¯·æ±‚ä»£ç ã€‚</li>
<li><strong>è´£ä»»é“¾æ¨¡å¼</strong>ï¼šåç«¯æ¥å£æ ¡éªŒæŒ‰ â€œToken æ ¡éªŒâ†’æƒé™ç æ ¡éªŒâ†’æ•°æ®èŒƒå›´æ ¡éªŒâ†’é¢‘ç‡é™åˆ¶â€ çš„é¡ºåºæ‰§è¡Œï¼Œå‰ç«¯å“åº”æ‹¦æˆªå™¨æŒ‰ â€œ401 å¤„ç†â†’403 å¤„ç†â†’429 å¤„ç†â€ é¡ºåºå¤„ç†å¼‚å¸¸ã€‚</li>
<li><strong>ç¼“å­˜æ¨¡å¼</strong>ï¼šå¯¹éæ•æ„Ÿæ¥å£ç»“æœè¿›è¡Œç¼“å­˜ï¼Œå‡å°‘é‡å¤è¯·æ±‚ï¼Œæå‡æ€§èƒ½ï¼ˆéœ€åœ¨æƒé™å˜æ›´æ—¶æ¸…ç©ºç¼“å­˜ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">4. æƒé™å­˜å‚¨ä¸å®‰å…¨æ€§</h3>
<h4 data-id="heading-27">ï¼ˆ1ï¼‰å­˜å‚¨æ–¹æ¡ˆ</h4>
<ul>
<li>Tokenï¼šå­˜å‚¨åœ¨ localStorageï¼ˆæŒä¹…åŒ–ï¼‰æˆ– sessionStorageï¼ˆä¼šè¯çº§ï¼‰ï¼Œå»ºè®®è®¾ç½®<code>HttpOnly</code>å’Œ<code>Secure</code>å±æ€§ï¼ˆéœ€åç«¯é…åˆï¼‰ï¼Œé˜²æ­¢ XSS æ”»å‡»ã€‚</li>
<li>æ¥å£æƒé™æ ‡è¯†æ˜ å°„è§„åˆ™ï¼šå‰ç«¯é¢„è®¾ï¼ˆå¦‚<code>user:delete</code>å¯¹åº”<code>/api/user/delete</code>ï¼‰ï¼Œæ— éœ€æŒä¹…åŒ–ï¼Œç¡®ä¿ä¸åç«¯ä¸€è‡´ã€‚</li>
<li>æ¥å£ç¼“å­˜ï¼šå­˜å‚¨åœ¨ Vuex/Piniaï¼ˆå†…å­˜ï¼‰ï¼Œç¼“å­˜ key åŒ…å«ç”¨æˆ· ID å’Œæƒé™æ ‡è¯†ï¼Œé¿å…å¤šç”¨æˆ·æ•°æ®æ··æ·†ã€‚</li>
</ul>
<h4 data-id="heading-28">ï¼ˆ2ï¼‰å®‰å…¨æ€§ä¿éšœ</h4>
<ul>
<li>åç«¯ç»å¯¹æ ¡éªŒï¼šå‰ç«¯æƒé™é¢„åˆ¤ä»…ä¸ºä½“éªŒä¼˜åŒ–ï¼Œåç«¯å¿…é¡»å¯¹æ¯ä¸ªæ¥å£åšç‹¬ç«‹æƒé™æ ¡éªŒï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡ Postman ç­‰å·¥å…·ç»•è¿‡å‰ç«¯æ‹¦æˆªã€‚</li>
<li>Token åŠ å¯†ä¼ è¾“ï¼šæ‰€æœ‰æ¥å£é‡‡ç”¨ HTTPS åè®®ï¼ŒToken åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­åŠ å¯†ï¼Œé¿å…ä¸­é—´äººæ”»å‡»ã€‚</li>
<li>æ•æ„Ÿæ¥å£äºŒæ¬¡éªŒè¯ï¼šæ ¸å¿ƒæ¥å£ï¼ˆå¦‚åˆ é™¤ç”¨æˆ·ã€è½¬è´¦ï¼‰éœ€æ·»åŠ äºŒæ¬¡éªŒè¯ï¼ˆå¦‚è¾“å…¥å¯†ç ã€çŸ­ä¿¡éªŒè¯ç ï¼‰ï¼Œå³ä½¿æƒé™æ ¡éªŒé€šè¿‡ï¼Œä¹Ÿéœ€ç¡®è®¤æ“ä½œæ„å›¾ã€‚</li>
<li>æƒé™æ—¥å¿—è®°å½•ï¼šå‰ç«¯è°ƒç”¨æ•æ„Ÿæ¥å£æ—¶ï¼Œä¼ é€’æ“ä½œäººã€æ“ä½œæ—¶é—´ã€IP åœ°å€ç­‰ä¿¡æ¯ï¼Œåç«¯å­˜å‚¨æ—¥å¿—ï¼Œä¾¿äºå®‰å…¨è¿½æº¯ã€‚</li>
</ul>
<h2 data-id="heading-29">å››ã€é™è®¾è®¡çš„é¢å¤–å…³é”®è¦ç‚¹</h2>
<h3 data-id="heading-30">1. æƒé™å¯è§†åŒ–é…ç½®</h3>
<ul>
<li>ç®¡ç†å‘˜é€šè¿‡ç³»ç»Ÿåå°çš„ â€œæƒé™é…ç½®é¡µé¢â€ï¼Œå‹¾é€‰è§’è‰²å¯¹åº”çš„æƒé™ï¼ˆå¦‚ â€œç”¨æˆ·ç®¡ç†â€â†’â€œåˆ é™¤ç”¨æˆ·â€ï¼‰ï¼Œåç«¯å­˜å‚¨è§’è‰² - æƒé™æ˜ å°„å…³ç³»ã€‚</li>
<li>å‰ç«¯æ¸²æŸ“ â€œæƒé™æ ‘â€ï¼Œæ”¯æŒæŒ‰æ¨¡å—æŠ˜å  / å±•å¼€ï¼Œä¾¿äºç®¡ç†å‘˜æ“ä½œï¼›æ”¯æŒæ‰¹é‡åˆ†é…æƒé™ï¼ˆå¦‚ç»™ â€œè¿è¥â€ è§’è‰²åˆ†é…æ‰€æœ‰è®¢å•ç›¸å…³æƒé™ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-31">2. æƒé™åŠ¨æ€æ›´æ–°ä¸åŒæ­¥</h3>
<ul>
<li>ç®¡ç†å‘˜ä¿®æ”¹ç”¨æˆ·æƒé™åï¼Œå‰ç«¯é€šè¿‡ WebSocket æˆ–è½®è¯¢å®æ—¶è·å–æœ€æ–°æƒé™ï¼Œè°ƒç”¨<code>permissionCenter.updatePermissions</code>æ›´æ–°æ•°æ®ï¼Œæ— éœ€ç”¨æˆ·åˆ·æ–°é¡µé¢ã€‚</li>
<li>è·¨æ ‡ç­¾é¡µæƒé™åŒæ­¥ï¼šé€šè¿‡<code>localStorage</code>ç›‘å¬äº‹ä»¶ï¼Œä¸€ä¸ªæ ‡ç­¾é¡µä¿®æ”¹æƒé™åï¼Œå…¶ä»–æ ‡ç­¾é¡µè‡ªåŠ¨æ›´æ–°æƒé™çŠ¶æ€ã€‚</li>
</ul>
<h3 data-id="heading-32">3. è·¨ç«¯æƒé™ç»Ÿä¸€ç®¡ç†</h3>
<ul>
<li>è‹¥é¡¹ç›®åŒ…å« PC ç«¯ã€ç§»åŠ¨ç«¯ã€å°ç¨‹åºï¼Œè®¾è®¡ç»Ÿä¸€çš„æƒé™ä¸­å¿ƒï¼ˆåç«¯ï¼‰ï¼Œå„ç«¯å…±ç”¨ä¸€å¥—æƒé™ç å’Œè§’è‰²ä½“ç³»ï¼ˆå¦‚<code>user:delete</code>åœ¨æ‰€æœ‰ç«¯å«ä¹‰ä¸€è‡´ï¼‰ã€‚</li>
<li>å‰ç«¯å„ç«¯å¤ç”¨æƒé™æ ¡éªŒé€»è¾‘ï¼ˆå¦‚<code>permissionCenter</code>å·¥å…·ç±»ï¼‰ï¼Œç¡®ä¿æƒé™æ§åˆ¶è¡Œä¸ºä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-33">4. æ€§èƒ½ä¼˜åŒ–</h3>
<ul>
<li>æƒé™æ ¡éªŒç¼“å­˜ï¼šå¯¹é¢‘ç¹æ ¡éªŒçš„æƒé™ç ï¼ˆå¦‚è¡¨æ ¼åˆ—æƒé™ï¼‰è¿›è¡Œç¼“å­˜ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚</li>
<li>åŠ¨æ€è·¯ç”±æ‡’åŠ è½½ï¼šåŠ¨æ€æ·»åŠ çš„è·¯ç”±ç»„ä»¶é‡‡ç”¨æ‡’åŠ è½½ï¼ˆ<code>() =&gt; import('../views/xxx.vue')</code>ï¼‰ï¼Œå‡å°‘é¦–å±åŠ è½½æ—¶é—´ã€‚</li>
<li>æƒé™æ•°æ®æ‰¹é‡è¯·æ±‚ï¼šç™»å½•åä¸€æ¬¡æ€§è·å–ç”¨æˆ·è§’è‰²ã€æƒé™ç ã€è·¯ç”±é…ç½®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚åç«¯ã€‚</li>
</ul>
<h3 data-id="heading-34">5. ç°åº¦å‘å¸ƒä¸ A/B æµ‹è¯•</h3>
<ul>
<li>æƒé™ä¸­å¿ƒæ”¯æŒ â€œç°åº¦è§„åˆ™â€ï¼Œå¦‚ â€œç”¨æˆ· ID åœ¨ç™½åå•å†…â€â€œéƒ¨é—¨ä¸ºæµ‹è¯•éƒ¨â€ çš„ç”¨æˆ·å¯è®¿é—®æ–°åŠŸèƒ½è·¯ç”±å’ŒæŒ‰é’®ã€‚</li>
<li>é€šè¿‡æƒé™é…ç½®å®ç° A/B æµ‹è¯•ï¼Œç»™ä¸åŒç”¨æˆ·ç»„åˆ†é…ä¸åŒæƒé™ï¼ŒéªŒè¯åŠŸèƒ½æ•ˆæœåå…¨é‡å¼€æ”¾ã€‚</li>
</ul>
<h2 data-id="heading-35">äº”ã€æ€»ç»“</h2>
<h3 data-id="heading-36">1. æƒé™è®¾è®¡çš„ä¸‰å±‚é€»è¾‘</h3>
<ul>
<li>å‰ç«¯è·¯ç”±æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦è®¿é—®é¡µé¢â€ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒï¼Œå‡å°‘æ— æ•ˆè¯·æ±‚ã€‚</li>
<li>å‰ç«¯å…ƒç´ æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦çœ‹åˆ°åŠŸèƒ½â€ï¼Œéšè—æ— æƒé™å…ƒç´ ï¼Œé¿å…ç”¨æˆ·å›°æƒ‘ã€‚</li>
<li>åç«¯æ¥å£æƒé™ï¼šæ§åˆ¶ â€œèƒ½å¦æ‰§è¡Œæ“ä½œâ€ï¼Œæ˜¯å®‰å…¨æ ¸å¿ƒï¼Œå¿…é¡»ç»å¯¹å¯é ã€‚</li>
</ul>
<h3 data-id="heading-37">2. å®‰å…¨æ€§åŸåˆ™</h3>
<ul>
<li>å‰ç«¯æƒé™æ˜¯ â€œä½“éªŒå±‚â€ï¼Œä¸èƒ½æ›¿ä»£åç«¯æ ¡éªŒï¼›åç«¯æƒé™æ˜¯ â€œå®‰å…¨å±‚â€ï¼Œå¿…é¡»è¦†ç›–æ‰€æœ‰æ•æ„Ÿæ“ä½œã€‚</li>
<li>æ•æ„Ÿä¿¡æ¯ï¼ˆTokenã€æƒé™æ ‡è¯†ï¼‰éœ€åŠ å¯†å­˜å‚¨å’Œä¼ è¾“ï¼Œé˜²æ­¢æ³„éœ²ã€‚</li>
<li>æƒé™å˜æ›´éœ€å®æ—¶åŒæ­¥ï¼Œé¿å…æƒé™ä¸ä¸€è‡´å¯¼è‡´çš„å®‰å…¨éšæ‚£ã€‚</li>
</ul>
<h3 data-id="heading-38">3. å¯æ‰©å±•æ€§åŸåˆ™</h3>
<ul>
<li>é‡‡ç”¨è®¾è®¡æ¨¡å¼ï¼ˆå¦‚è´£ä»»é“¾ã€è£…é¥°å™¨ã€å•ä¾‹ï¼‰é™ä½ä»£ç è€¦åˆï¼Œä¾¿äºåæœŸæ‰©å±•æƒé™è§„åˆ™ã€‚</li>
<li>é¢„ç•™è‡ªå®šä¹‰æƒé™è§„åˆ™æ¥å£ï¼Œåº”å¯¹å¤æ‚ä¸šåŠ¡åœºæ™¯ï¼ˆå¦‚å¤šæ¡ä»¶ç»„åˆæƒé™ï¼‰ã€‚</li>
<li>æƒé™é…ç½®å¯è§†åŒ–ã€åŠ¨æ€åŒ–ï¼Œå‡å°‘å‰ç«¯å‘ç‰ˆé¢‘ç‡ï¼Œæå‡è¿è¥æ•ˆç‡ã€‚</li>
</ul>
<p>é¡¹ç›®ä¸­ï¼Œæƒé™è®¾è®¡å¹¶éä¸€æˆä¸å˜ï¼Œéœ€æ ¹æ®ä¸šåŠ¡è§„æ¨¡å’Œå®‰å…¨è¦æ±‚é€æ­¥è¿­ä»£ï¼šåˆæœŸå¯é‡‡ç”¨ â€œè§’è‰² + é™æ€æƒé™â€ï¼Œä¸­æœŸå¼•å…¥ â€œæƒé™ç  + åŠ¨æ€è·¯ç”±â€ï¼ŒåæœŸå‡çº§ä¸º â€œå¯è§†åŒ–é…ç½® + ç»†ç²’åº¦æ•°æ®æƒé™â€ï¼Œæœ€ç»ˆå®ç° â€œå®‰å…¨ã€çµæ´»ã€æ˜“ç»´æŠ¤â€ çš„æƒé™ä½“ç³»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7577215663968026666</link>    <guid>https://juejin.cn/post/7577215663968026666</guid>    <pubDate>2025-11-27T10:31:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663968026666" data-draft-id="7577204540417753151" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2025-11-27T10:31:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œåˆå¿ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/4081803083395527"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4081803083395527/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œåˆå¿ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:31:38.000Z" title="Thu Nov 27 2025 10:31:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç»Ÿä¿¡æ¡Œé¢æ“ä½œç³»ç»Ÿä¸“ä¸šç‰ˆV20ï¼ˆ1070ï¼‰<br/>
Linux uos 5.10.97-arm64-desktop</p>
</blockquote>
<h3 data-id="heading-0">uosåŸºç¡€ cupsd.conf æŸ¥çœ‹æ‰“å°æœåŠ¡çš„é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-c" lang="c">root@uos:/var/<span class="hljs-built_in">log</span>/cups<span class="hljs-meta"># cat /etc/cups/cupsd.conf </span>
#
# Configuration file <span class="hljs-keyword">for</span> the CUPS scheduler.  See <span class="hljs-string">"man cupsd.conf"</span> <span class="hljs-keyword">for</span> a
<span class="hljs-meta"># complete description of this file.</span>
#

# Log general information in error_log - change <span class="hljs-string">"warn"</span> to <span class="hljs-string">"debug"</span>
<span class="hljs-meta"># for troubleshooting...</span>
LogLevel warn
PageLogFormat

# Specifies the maximum size of the <span class="hljs-built_in">log</span> files before they are rotated.  The value <span class="hljs-string">"0"</span> disables <span class="hljs-built_in">log</span> rotation.
MaxLogSize <span class="hljs-number">0</span>

# Default error policy <span class="hljs-keyword">for</span> printers
ErrorPolicy retry-job

# Only listen <span class="hljs-keyword">for</span> connections from the local machine.
Listen localhost:<span class="hljs-number">631</span>
Listen /run/cups/cups.sock

# Show shared printers on the local network.
Browsing Yes
BrowseLocalProtocols dnssd

# Default authentication type, when authentication is required...
DefaultAuthType Basic

# Web interface setting...
WebInterface Yes

# Timeout after cupsd exits <span class="hljs-keyword">if</span> <span class="hljs-title function_">idle</span> <span class="hljs-params">(applied only <span class="hljs-keyword">if</span> cupsd runs on-demand - with -l)</span>
IdleExitTimeout 60

# Restrict access to the server...
&lt;Location /&gt;
  Order allow,deny
&lt;/Location&gt;

# Restrict access to the admin pages...
&lt;Location /admin&gt;
  Order allow,deny
&lt;/Location&gt;

# Restrict access to configuration files...
&lt;Location /admin/conf&gt;
  AuthType Default
  Require user @SYSTEM
  Order allow,deny
&lt;/Location&gt;

# Restrict access to <span class="hljs-built_in">log</span> files...
&lt;Location /admin/<span class="hljs-built_in">log</span>&gt;
  AuthType Default
  Require user @SYSTEM
  Order allow,deny
&lt;/Location&gt;

# Set the <span class="hljs-keyword">default</span> printer/job policies...
&lt;Policy <span class="hljs-keyword">default</span>&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit CUPS-Get-Document&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default CUPS-Get-Devices&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;

# Set the authenticated printer/job policies...
&lt;Policy authenticated&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    AuthType Default
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    AuthType Default
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;

# Set the kerberized printer/job policies...
&lt;Policy kerberos&gt;
  # Job/subscription privacy...
  JobPrivateAccess <span class="hljs-keyword">default</span>
  JobPrivateValues <span class="hljs-keyword">default</span>
  SubscriptionPrivateAccess <span class="hljs-keyword">default</span>
  SubscriptionPrivateValues <span class="hljs-keyword">default</span>

  # Job-related operations must be done by the owner or an administrator...
  &lt;Limit Create-Job Print-Job Print-URI Validate-Job&gt;
    AuthType Negotiate
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit Send-Document Send-URI Hold-Job Release-Job Restart-Job Purge-Jobs Set-Job-Attributes Create-Job-Subscription Renew-Subscription Cancel-Subscription Get-Notifications Reprocess-Job Cancel-Current-Job Suspend-Current-Job Resume-Job Cancel-My-Jobs Close-Job CUPS-Move-Job CUPS-Get-Document&gt;
    AuthType Negotiate
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All administration operations require an administrator to authenticate...
  &lt;Limit CUPS-Add-Modify-Printer CUPS-Delete-Printer CUPS-Add-Modify-Class CUPS-Delete-Class CUPS-Set-Default&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # All printer operations require a printer operator to authenticate...
  &lt;Limit Pause-Printer Resume-Printer Enable-Printer Disable-Printer Pause-Printer-After-Current-Job Hold-New-Jobs Release-Held-New-Jobs Deactivate-Printer Activate-Printer Restart-Printer Shutdown-Printer Startup-Printer Promote-Job Schedule-Job-After Cancel-Jobs CUPS-Accept-Jobs CUPS-Reject-Jobs&gt;
    AuthType Default
    Require user @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  # Only the owner or an administrator can cancel or authenticate a job...
  &lt;Limit Cancel-Job CUPS-Authenticate-Job&gt;
    AuthType Negotiate
    Require user @OWNER @SYSTEM
    Order deny,allow
  &lt;/Limit&gt;

  &lt;Limit All&gt;
    Order deny,allow
  &lt;/Limit&gt;
&lt;/Policy&gt;
root@uos:/var/<span class="hljs-built_in">log</span>/cups# 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576841976927567908</link>    <guid>https://juejin.cn/post/7576841976927567908</guid>    <pubDate>2025-11-26T08:25:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576841976927567908" data-draft-id="7576487832089804815" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜"/> <meta itemprop="keywords" content="Android,HTML"/> <meta itemprop="datePublished" content="2025-11-26T08:25:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ç™½"/> <meta itemprop="url" content="https://juejin.cn/user/2549135752044601"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”µå­ä¹¦é˜…è¯»å™¨ï¼šè§£æ EPUB åº•å±‚åŸç†ä¸å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2549135752044601/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ç™½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:25:44.000Z" title="Wed Nov 26 2025 08:25:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>å½“æˆ‘ä»¬æƒ³è¦å¼€å‘ä¸€ä¸ªç”µå­ä¹¦é˜…è¯»å™¨æ—¶ï¼Œä¸å¯é¿å…åœ°ä¼šé‡åˆ° EPUB æ ¼å¼ã€‚</p>
<p>å…¶å®ï¼ŒEPUB å¹¶ä¸å¤æ‚ï¼Œåªè¦æŒæ¡äº† XML è§£æå’Œ HTML å¤„ç†ï¼Œå°±èƒ½å¤Ÿå†™å‡ºä¸€ä¸ªé«˜æ€§èƒ½ã€è½»é‡çº§çš„è§£æå¼•æ“ã€‚</p>
<p>æˆ‘ä»¬å…ˆä»æœ€åŸºç¡€çš„è§£æå·¥å…·å¼€å§‹ã€‚</p>
<h2 data-id="heading-1">XmlPullParser</h2>
<p>EPUB çš„æ ¸å¿ƒå…ƒæ•°æ®æ–‡ä»¶ï¼ˆ<code>.opf</code>ï¼‰å’Œå®¹å™¨æè¿°æ–‡ä»¶ï¼ˆ<code>.xml</code>ï¼‰ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ XMLã€‚Android å®˜æ–¹æ¨èä½¿ç”¨ <code>XmlPullParser</code> æ¥è§£æå®ƒä»¬ã€‚</p>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Pull è§£æï¼Ÿ</h3>
<p>Pull è§£æå°±æ˜¯ä¸€è¡Œè¡Œå¾€ä¸‹è¯»å–ï¼Œè¿™ç§æ–¹å¼å†…å­˜å ç”¨ä½ã€‚</p>
<p>ä¸ä¹‹ç›¸å¯¹çš„æœ‰ DOM è§£æï¼Œå®ƒæ˜¯ä¸€æ¬¡æ€§å°†æ•´ä¸ªæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯å¿«ï¼Œä½†å¯¹å†…å­˜æåº¦ä¸å‹å¥½ã€‚</p>
<h3 data-id="heading-3">äº‹ä»¶å¾ªç¯</h3>
<p><code>XmlPullParser</code> çš„å·¥ä½œæ¨¡å¼å…¶å®å°±æ˜¯ä¸€ä¸ª while å¾ªç¯ï¼Œä¸æ–­å¤„ç†å½“å‰çš„<strong>äº‹ä»¶ç±»å‹</strong>ï¼š</p>
<ul>
<li><code>START_DOCUMENT</code>: å¼€å§‹</li>
<li><code>START_TAG</code>: è¯»åˆ°äº†å¼€å§‹æ ‡ç­¾</li>
<li><code>TEXT</code>: è¯»åˆ°äº†æ ‡ç­¾é‡Œçš„æ–‡å­—</li>
<li><code>END_TAG</code>: è¯»åˆ°äº†ç»“æŸæ ‡ç­¾</li>
<li><code>END_DOCUMENT</code>: ç»“æŸ</li>
</ul>
<h3 data-id="heading-4">å®æˆ˜</h3>
<p>äº†è§£å®Œä»¥ä¸Šå†…å®¹ï¼Œå°±å¯ä»¥å¼€å§‹è§£æä¸€æ®µ XML äº†ã€‚</p>
<p>ä»¥ä¸‹é¢è¿™æ®µ XML ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>å¼ ä¸‰<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">age</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span>
</code></pre>
<blockquote>
<p>ä½œä¸º <code>student_data.xml</code> æ–‡ä»¶å­˜æ”¾åœ¨ <code>app/src/main/assets</code> ç›®å½•ä¸‹ã€‚</p>
</blockquote>
<p>åœ¨ <code>MainActivity</code> ä¸­ä½¿ç”¨ <code>XmlPullParser</code> æ¥è§£æï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span>(<span class="hljs-keyword">var</span> name: String = <span class="hljs-string">""</span>, <span class="hljs-keyword">var</span> age: <span class="hljs-built_in">Int</span> = <span class="hljs-number">0</span>)

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseStudentXml</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Student? = withContext(Dispatchers.IO) { <span class="hljs-comment">// å°†è€—æ—¶æ“ä½œæ”¾åœ¨ IO çº¿ç¨‹ä¸­</span>
    <span class="hljs-comment">// åˆ›å»º Pull è§£æå™¨</span>
    <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
    <span class="hljs-keyword">var</span> student: Student? = <span class="hljs-literal">null</span>

    <span class="hljs-keyword">try</span> {
        parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
        <span class="hljs-keyword">var</span> eventType = parser.eventType

        <span class="hljs-keyword">var</span> currentName = <span class="hljs-string">""</span>
        <span class="hljs-keyword">var</span> currentAge = <span class="hljs-number">0</span>

        Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"å¼€å§‹è§£æ XML æ–‡æ¡£..."</span>)
        <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
            <span class="hljs-keyword">when</span> (eventType) {
                XmlPullParser.START_TAG -&gt; {
                    <span class="hljs-comment">// è·å–æ ‡ç­¾å</span>
                    <span class="hljs-keyword">when</span> (parser.name) {
                        <span class="hljs-string">"student"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ student"</span>)
                        }
                        <span class="hljs-comment">// è·å–æ ‡ç­¾å†…å®¹, å¹¶ç§»åˆ°æ ‡ç­¾æœ«ä½</span>
                        <span class="hljs-string">"name"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ name"</span>)
                            currentName = parser.nextText()
                        }
                        <span class="hljs-string">"age"</span> -&gt; {
                            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"é‡åˆ°æ ‡ç­¾ age"</span>)
                            currentAge = parser.nextText().toIntOrNull() ?: <span class="hljs-number">0</span>
                        }
                    }
                }
            }
            <span class="hljs-comment">// è·å–ä¸‹ä¸€ä¸ªäº‹ä»¶</span>
            eventType = parser.next()
        }

        student = Student(currentName, currentAge)
        Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£ææˆåŠŸ: <span class="hljs-variable">$student</span>"</span>)

    } <span class="hljs-keyword">catch</span> (e: Exception) {
        Log.e(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£æå¤±è´¥"</span>, e)
    } <span class="hljs-keyword">finally</span> {
        inputStream.close()
    }

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> student
}


<span class="hljs-comment">// è°ƒç”¨ç¤ºä¾‹</span>
lifecycleScope.launch {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"student_data.xml"</span>)
        <span class="hljs-keyword">val</span> student = parseStudentXml(inputStream)
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">å¼€å§‹è§£æ XML æ–‡æ¡£...
é‡åˆ°æ ‡ç­¾ student
é‡åˆ°æ ‡ç­¾ name
é‡åˆ°æ ‡ç­¾ age
è§£ææˆåŠŸ: Student(<span class="hljs-attr">name</span>=å¼ ä¸‰, age=<span class="hljs-number">18</span>)
</code></pre>
<h3 data-id="heading-5">nextText() é™·é˜±</h3>
<p><code>nextText()</code> ä¼šè¯»å–å½“å‰æ ‡ç­¾çš„å†…å®¹ï¼Œå¹¶ç§»åŠ¨åˆ°æ ‡ç­¾æœ«å°¾ <code>END_TAG</code>ã€‚</p>
<ul>
<li>
<p>å¦‚æœæ ‡ç­¾å†…å®¹æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå®ƒä¼šè¿”å›ç©ºä¸² ""ã€‚</p>
</li>
<li>
<p>å¦‚æœæ ‡ç­¾è¿˜åµŒå¥—äº†æ ‡ç­¾ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
</li>
</ul>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†ä¸Šè¿°çš„ XML å†…å®¹æ”¹ä¸ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">student</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>å¼ <span class="hljs-tag">&lt;<span class="hljs-name">br</span> /&gt;</span>ä¸‰
    <span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">age</span>&gt;</span>18<span class="hljs-tag">&lt;/<span class="hljs-name">age</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">student</span>&gt;</span>
</code></pre>
<p>æ­¤æ—¶è¿è¡Œç¨‹åºï¼Œä¼šæŠ¥é”™ï¼š</p>
<pre><code class="hljs language-less" lang="less">è§£æå¤±è´¥                                                        <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.xmlpull</span><span class="hljs-selector-class">.v1</span><span class="hljs-selector-class">.XmlPullParserException</span>: <span class="hljs-selector-tag">END_TAG</span> <span class="hljs-selector-tag">expected</span> (<span class="hljs-attribute">position</span>:START_TAG (empty) &lt;br&gt;<span class="hljs-variable">@2</span>:<span class="hljs-number">18</span> in java.io.InputStreamReader<span class="hljs-variable">@352bfed</span>) 
</code></pre>
<p>æ„æ€æ˜¯è¯´åœ¨æœŸæœ›æ‰¾åˆ°ä¸€ä¸ªç»“æŸæ ‡ç­¾æ—¶ï¼Œå´é‡åˆ°äº†ä¸€ä¸ªå¼€å§‹æ ‡ç­¾ <code>&lt;br</code>ã€‚ä½†æˆ‘ä»¬è®¤ä¸ºçš„ <code>&lt;br /&gt;</code> åªæ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œåº”è¯¥è¢«å½“ä½œæ–‡æœ¬å†…å®¹è¿›è¡Œå¤„ç†ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç† TEXT äº‹ä»¶ã€‚</p>
<blockquote>
<p>æ ‡ç­¾ä¹‹é—´çš„æ¢è¡Œç¬¦ä¹Ÿæ˜¯ä¸€ä¸ª TEXT äº‹ä»¶ã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ‰‹åŠ¨å¤„ç† TEXT äº‹ä»¶</h4>
<p>æ‰‹åŠ¨å¤„ç† <code>TEXT</code> äº‹ä»¶æ—¶ï¼Œä¸ºäº†è§£å†³ XML åµŒå¥—å¯¼è‡´çš„çŠ¶æ€ä¸¢å¤±é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥æ ˆæ¥ç»´æŠ¤çŠ¶æ€ã€‚æˆ‘ä»¬æ¨èä½¿ç”¨ <code>ArrayDeque</code> æ¥æ›¿æ¢ <code>Stack</code>ï¼Œæ€§èƒ½æ›´å¥½ã€‚</p>
<p>é€»è¾‘æµç¨‹ï¼š</p>
<ul>
<li>
<p><strong>START_TAG</strong>ï¼šå°†å½“å‰æ ‡ç­¾åå‹å…¥çŠ¶æ€æ ˆä¸­ã€‚</p>
</li>
<li>
<p><strong>TEXT</strong>ï¼šæ£€æŸ¥æ ˆé¡¶å…ƒç´ ï¼Œå¦‚æœæ˜¯ç›®æ ‡æ ‡ç­¾ï¼Œå°±æå–å¹¶æ‹¼æ¥æ–‡æœ¬ï¼›å¦‚æœæ˜¯ç›®æ ‡æ ‡ç­¾çš„å­æ ‡ç­¾ï¼Œæ ¹æ®ä¸šåŠ¡é€»è¾‘åˆ¤æ–­æ˜¯å¦éœ€è¦æå–ã€‚</p>
</li>
<li>
<p><strong>END_TAG</strong>ï¼šå¼¹å‡ºæ ˆé¡¶å…ƒç´ ï¼Œå›åˆ°æœ€è¿‘ä¸€å±‚çš„çˆ¶æ ‡ç­¾çš„çŠ¶æ€ã€‚</p>
</li>
</ul>
<p>ä»£ç å®ç°ï¼š<strong>åŸºäºæ ˆçš„çŠ¶æ€æœº</strong></p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseStudentXmlManual</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Student? =
    withContext(Dispatchers.IO) {
        <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
        <span class="hljs-keyword">var</span> student: Student? = <span class="hljs-literal">null</span>

        <span class="hljs-comment">// ç”¨ ArrayDeque ä»£æ›¿ Stack</span>
        <span class="hljs-keyword">val</span> stateStack = ArrayDeque&lt;String&gt;()

        <span class="hljs-keyword">try</span> {
            parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
            <span class="hljs-keyword">var</span> eventType = parser.eventType
            <span class="hljs-keyword">val</span> sbName = StringBuilder()
            <span class="hljs-keyword">var</span> age = <span class="hljs-number">0</span>

            <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
                <span class="hljs-keyword">when</span> (eventType) {
                    XmlPullParser.START_TAG -&gt; {
                        <span class="hljs-keyword">val</span> tagName = parser.name
                        <span class="hljs-comment">// å­˜å…¥æ–°çŠ¶æ€</span>
                        stateStack.addLast(tagName)
                    }

                    XmlPullParser.TEXT -&gt; {
                        <span class="hljs-comment">// è·å–å½“å‰æ–‡æœ¬å†…å®¹</span>
                        <span class="hljs-keyword">val</span> text = parser.text
                        <span class="hljs-keyword">if</span> (!text.isNullOrBlank()) {
                            <span class="hljs-comment">// æŸ¥çœ‹æ ˆé¡¶ï¼Œå†³å®šäº†å½“å‰æ–‡æœ¬å±äºè°</span>
                            <span class="hljs-keyword">if</span> (stateStack.isNotEmpty()) {
                                <span class="hljs-keyword">val</span> currentTag = stateStack.last() <span class="hljs-comment">// è·å–å½“å‰æ‰€å¤„çš„æœ€è¿‘ä¸€å±‚æ ‡ç­¾</span>

                                <span class="hljs-keyword">when</span> (currentTag) {
                                    <span class="hljs-string">"name"</span> -&gt; sbName.append(text.trim())
                                    <span class="hljs-string">"br"</span> -&gt; { <span class="hljs-comment">/* å¿½ç•¥ */</span>
                                    }

                                    <span class="hljs-string">"age"</span> -&gt; age = text.trim().toIntOrNull() ?: <span class="hljs-number">0</span>
                                }
                            }
                        }
                    }

                    XmlPullParser.END_TAG -&gt; {
                        <span class="hljs-comment">// æ¢å¤åˆ°ä¸Šä¸€ä¸ªçŠ¶æ€</span>
                        <span class="hljs-keyword">if</span> (stateStack.isNotEmpty()) {
                            stateStack.removeLast()
                        }
                    }
                }
                eventType = parser.next()
            }

            <span class="hljs-keyword">val</span> name: String = sbName.toString()
            student = Student(name, age)
            Log.d(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£ææˆåŠŸ: <span class="hljs-variable">$student</span>"</span>)

        } <span class="hljs-keyword">catch</span> (e: Exception) {
            Log.e(<span class="hljs-string">"XmlDemo"</span>, <span class="hljs-string">"è§£æå¤±è´¥"</span>, e)
        } <span class="hljs-keyword">finally</span> {
            inputStream.close()
        }

        <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> student
    }
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">è§£ææˆåŠŸ: Student(<span class="hljs-attr">name</span>=å¼ ä¸‰, age=<span class="hljs-number">18</span>)
</code></pre>
<h2 data-id="heading-7">Jsoup</h2>
<p>EPUB çš„æ­£æ–‡å†…å®¹å…¶å®å°±æ˜¯ç½‘é¡µï¼ˆXHTML/HTMLï¼‰ã€‚å¯¹äºè§£æ HTMLï¼Œæˆ‘ä»¬ä¸ä¼šå»ä½¿ç”¨ <code>XmlPullParser</code>ï¼Œå› ä¸ºå®ƒåµŒå¥—å¾ˆå¤æ‚ï¼Œå¹¶ä¸”æ ‡ç­¾å¸¸å¸¸ä¸é—­åˆã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ Jsoup æ¥è§£æã€‚</p>
<p>å®ƒèƒ½å°†æ‚ä¹±çš„ HTML ä¿®æ­£ä¸ºæ ‡å‡†çš„ DOM æ ‘ï¼Œå¹¶ä¸”æœ‰ç€ CSS é€‰æ‹©å™¨ï¼šå¯ä»¥åƒå†™ CSS æ ·å¼ä¸€æ ·æŸ¥æ‰¾å…ƒç´ ã€‚</p>
<h3 data-id="heading-8">CSS é€‰æ‹©å™¨</h3>
<p>æå–æ•°æ®éå¸¸å®¹æ˜“ï¼š</p>
<ul>
<li>
<p>é€‰å–æ‰€æœ‰ä¸€çº§æ ‡é¢˜ï¼š<code>doc.select("h1")</code>ã€‚</p>
</li>
<li>
<p>é€‰å–æ‰€æœ‰å¸¦å›¾ç‰‡è·¯å¾„çš„ img æ ‡ç­¾ï¼š<code>doc.select("img[src]")</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">å®æˆ˜</h3>
<p>å‡è®¾è¦è§£æå¦‚ä¸‹ HTML æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦æå–æ ‡é¢˜ã€ä½œè€…å’Œæ­£æ–‡å†…å®¹ï¼Œå»é™¤æ‰æ­£æ–‡ä¸­çš„å¹¿å‘Šã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Android æ€§èƒ½ä¼˜åŒ–å®æˆ˜ - æŠ€æœ¯å‘¨åˆŠ<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nav"</span>&gt;</span>é¦–é¡µ &gt; Android &gt; æ€§èƒ½ä¼˜åŒ–<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">article</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post-title"</span>&gt;</span>Android å†…å­˜ä¼˜åŒ–ï¼šä»å…¥é—¨åˆ°ç²¾é€š<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"meta-info"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ä½œè€…ï¼šAndroidä¸“å®¶<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>é˜…è¯»ï¼š1024<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">hr</span>&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"post-content"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                    åœ¨ Android å¼€å‘ä¸­ï¼Œ<span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>å†…å­˜æ³„æ¼<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span>æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad-banner"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å¹¿å‘Šï¼šç‚¹å‡»é¢†å–é«˜è–ªé¢è¯•é¢˜åº“ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>
                    ä½¿ç”¨ <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://square.github.io/leakcanary/"</span>&gt;</span>LeakCanary<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span> å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½ <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>Activity<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> å’Œ <span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>Fragment<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> çš„æ³„æ¼ç‚¹ã€‚
                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">article</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Copyright Â© 2022 æŠ€æœ¯åšå®¢<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p>é¦–å…ˆå¼•å…¥ä¾èµ–ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">dependencies {
    implementation(<span class="hljs-string">"org.jsoup:jsoup:1.21.2"</span>)
}
</code></pre>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Blog</span>(
    <span class="hljs-keyword">val</span> title: String,
    <span class="hljs-keyword">val</span> author: String,
    <span class="hljs-keyword">val</span> content: String,
)

<span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseHtmlContent</span><span class="hljs-params">(
    inputStream: <span class="hljs-type">InputStream</span>
)</span></span> = withContext(Dispatchers.IO) {
    <span class="hljs-comment">// è§£æ HTML ä¸º Document å¯¹è±¡</span>
    <span class="hljs-keyword">val</span> doc: Document = Jsoup.parse(inputStream, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">""</span>)

    <span class="hljs-comment">// æå–æ ‡é¢˜</span>
    <span class="hljs-keyword">val</span> title = doc.select(<span class="hljs-string">"h1.post-title"</span>).text()

    <span class="hljs-comment">// æå–ä½œè€…</span>
    <span class="hljs-keyword">val</span> author = doc.selectFirst(<span class="hljs-string">"div.meta-info"</span>)?.text()
            ?.substringAfter(<span class="hljs-string">"ä½œè€…ï¼š"</span>)
            ?.substringBefore(<span class="hljs-string">"é˜…è¯»ï¼š"</span>)
            ?.trim()
            ?: <span class="hljs-string">"æœªçŸ¥"</span>

    <span class="hljs-keyword">val</span> contentDiv = doc.select(<span class="hljs-string">"div.post-content"</span>)

    <span class="hljs-comment">// å…ˆå»é™¤å¹¿å‘ŠèŠ‚ç‚¹</span>
    contentDiv.select(<span class="hljs-string">".ad-banner"</span>).remove()

    <span class="hljs-comment">// è·å–å†…å®¹</span>
    <span class="hljs-keyword">val</span> content = contentDiv.text()

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Blog(title, author, content)
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
lifecycleScope.launch(Dispatchers.IO) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"blog.html"</span>)
        <span class="hljs-keyword">val</span> blog = parseHtmlContent(inputStream)
        Log.d(<span class="hljs-string">"EpubTest"</span>, <span class="hljs-string">"Blog: <span class="hljs-variable">$blog</span>"</span>)
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Blog: Blog(<span class="hljs-attr">title</span>=Android å†…å­˜ä¼˜åŒ–ï¼šä»å…¥é—¨åˆ°ç²¾é€š, author=Androidä¸“å®¶, content=åœ¨ Android å¼€å‘ä¸­ï¼Œå†…å­˜æ³„æ¼æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚ ä½¿ç”¨ LeakCanary å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½ Activity å’Œ Fragment çš„æ³„æ¼ç‚¹ã€‚ åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚)
</code></pre>
<h3 data-id="heading-10">DOM éå†ä¸èŠ‚ç‚¹æ“ä½œ</h3>
<p>ç›´æ¥ä½¿ç”¨ <code>text()</code>ï¼Œç¡®å®å¾ˆæ–¹ä¾¿ï¼Œå®ƒèƒ½è‡ªåŠ¨å¤„ç†æ¢è¡Œã€‚ä½†å®ƒä¹Ÿä¼šå°† <code>&lt;b&gt;</code>, <code>&lt;a&gt;</code> ç­‰æ ‡ç­¾å‰¥ç¦»ï¼Œå¯¼è‡´åŠ ç²—ã€æ–œä½“ç­‰æ ·å¼ä¹Ÿéƒ½ä¸¢å¤±äº†ã€‚</p>
<p>è¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨éå† DOM æ ‘æ¥æ‰‹åŠ¨å¤„ç†ç‰¹å®šæ ‡ç­¾ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseHtmlContent</span><span class="hljs-params">(
    inputStream: <span class="hljs-type">InputStream</span>
)</span></span> = withContext(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> doc: Document = Jsoup.parse(inputStream, <span class="hljs-string">"UTF-8"</span>, <span class="hljs-string">""</span>)
    <span class="hljs-keyword">val</span> title = doc.select(<span class="hljs-string">"h1.post-title"</span>).text()

    <span class="hljs-comment">// æå–ä½œè€…</span>
    <span class="hljs-keyword">val</span> author = doc.selectFirst(<span class="hljs-string">"div.meta-info"</span>)?.text()
        ?.substringAfter(<span class="hljs-string">"ä½œè€…ï¼š"</span>)
        ?.substringBefore(<span class="hljs-string">"é˜…è¯»ï¼š"</span>)
        ?.trim()
        ?: <span class="hljs-string">"æœªçŸ¥"</span>

    <span class="hljs-keyword">val</span> sbContent = StringBuilder()

    <span class="hljs-keyword">val</span> contentDiv = doc.select(<span class="hljs-string">"div.post-content"</span>).first()
    <span class="hljs-comment">// ç§»é™¤å¹¿å‘ŠèŠ‚ç‚¹</span>
    contentDiv?.select(<span class="hljs-string">".ad-banner"</span>)?.remove()

    contentDiv?.let {
        <span class="hljs-comment">// éå†å®¹å™¨çš„å­èŠ‚ç‚¹</span>
        <span class="hljs-keyword">for</span> (node <span class="hljs-keyword">in</span> it.childNodes()) {
            traverseNode(node, sbContent)
        }
    }
    <span class="hljs-keyword">val</span> content = sbContent.toString().trim()

    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> Blog(title, author, content)
}

<span class="hljs-comment">/**
 * é€’å½’éå†èŠ‚ç‚¹æ ‘
 */</span>
<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">traverseNode</span><span class="hljs-params">(
    node: <span class="hljs-type">Node</span>,
    sb: <span class="hljs-type">StringBuilder</span>
)</span></span> {
    <span class="hljs-keyword">when</span> (node) {
        <span class="hljs-comment">// çº¯æ–‡æœ¬èŠ‚ç‚¹</span>
        <span class="hljs-keyword">is</span> TextNode -&gt; {
            <span class="hljs-keyword">val</span> text = node.text().trim()
            <span class="hljs-keyword">if</span> (text.isNotBlank()) {
                sb.append(text)
            }
        }
        <span class="hljs-comment">// å…ƒç´ èŠ‚ç‚¹</span>
        <span class="hljs-keyword">is</span> Element -&gt; {
            <span class="hljs-keyword">when</span> (node.tagName()) {
                <span class="hljs-string">"p"</span> -&gt; { <span class="hljs-comment">// æ®µè½</span>
                    sb.append(<span class="hljs-string">"\n"</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                }

                <span class="hljs-string">"div"</span>, <span class="hljs-string">"span"</span> -&gt; { <span class="hljs-comment">// å®¹å™¨</span>
                    node.childNodes().forEach { traverseNode(it, sb) }
                }

                <span class="hljs-string">"b"</span>, <span class="hljs-string">"strong"</span> -&gt; {
                    sb.append(<span class="hljs-string">"[åŠ ç²—: "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-string">"i"</span>, <span class="hljs-string">"em"</span> -&gt; {
                    sb.append(<span class="hljs-string">"[æ–œä½“: "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-string">"a"</span> -&gt; {
                    <span class="hljs-keyword">val</span> href = node.attr(<span class="hljs-string">"href"</span>)
                    sb.append(<span class="hljs-string">"[é“¾æ¥(<span class="hljs-variable">$href</span>): "</span>)
                    node.childNodes().forEach { traverseNode(it, sb) }
                    sb.append(<span class="hljs-string">"]"</span>)
                }

                <span class="hljs-keyword">else</span> -&gt; {}
            }
        }
    }
}
</code></pre>
<p>è§£æå‡ºçš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-css" lang="css">åœ¨ Android å¼€å‘ä¸­ï¼Œ<span class="hljs-selector-attr">[åŠ ç²—: å†…å­˜æ³„æ¼]</span>æ˜¯å¯¼è‡´åº”ç”¨å¡é¡¿çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚
ä½¿ç”¨<span class="hljs-selector-attr">[é“¾æ¥(https://square.github.io/leakcanary/): LeakCanary]</span>å·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå®šä½<span class="hljs-selector-attr">[æ–œä½“: Activity]</span>å’Œ<span class="hljs-selector-attr">[æ–œä½“: Fragment]</span>çš„æ³„æ¼ç‚¹ã€‚
åªæœ‰æ·±å…¥ç†è§£ GC æœºåˆ¶ï¼Œæ‰èƒ½å†™å‡ºå¥å£®çš„ä»£ç ã€‚
</code></pre>
<blockquote>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ <code>SpannableStringBuilder</code> æ¥æ‹¼æ¥ç»“æœï¼Œæ¯”å¦‚é‡åˆ° <code>&lt;b&gt;</code> æ ‡ç­¾æ—¶åº”ç”¨ <code>StyleSpan(Typeface.BOLD)</code>ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥åœ¨ UI ç»„ä»¶ä¸­æ˜¾ç¤ºå¯Œæ–‡æœ¬æ•ˆæœã€‚</p>
</blockquote>
<h2 data-id="heading-11">EPUB çš„ç»„æˆ</h2>
<p>EPUB ç”µå­ä¹¦æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª ZIP å‹ç¼©åŒ…ï¼Œä½ å¯ä»¥å°†å…¶åç¼€æ”¹ä¸º .zip å¹¶è§£å‹ï¼ŒæŸ¥çœ‹å…¶ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">eBook</span>/
â”œâ”€â”€ <span class="hljs-selector-tag">META-INF</span>/
â”‚   â””â”€â”€ <span class="hljs-selector-tag">container</span><span class="hljs-selector-class">.xml</span>      (å…¥å£)
â”œâ”€â”€ <span class="hljs-selector-tag">OEBPS</span>/                 
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">content</span><span class="hljs-selector-class">.opf</span>        (æ ¸å¿ƒ)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">nav</span><span class="hljs-selector-class">.xhtml</span>          (å¯¼èˆª)  
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">toc</span><span class="hljs-selector-class">.ncx</span>            (ç›®å½•)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Styles</span>/            (æ ·å¼)
â”‚   â”œâ”€â”€ <span class="hljs-selector-tag">Text</span>/              (æ­£æ–‡)
â”‚   â””â”€â”€ <span class="hljs-selector-tag">Images</span>/            (å›¾ç‰‡)
â””â”€â”€ <span class="hljs-selector-tag">mimetype</span>               (èº«ä»½æ ‡è¯†)
</code></pre>
<h3 data-id="heading-12">å…³é”®æ–‡ä»¶ï¼šMETA-INF/container.xml</h3>
<p>å®ƒçš„ä½œç”¨æ˜¯å‘Šè¯‰æˆ‘ä»¬æ ¸å¿ƒæè¿°æ–‡ä»¶ï¼ˆ.opfï¼‰çš„ä½ç½®ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">container</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"1.0"</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:oasis:names:tc:opendocument:xmlns:container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">rootfiles</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">rootfile</span> <span class="hljs-attr">full-path</span>=<span class="hljs-string">"OEBPS/content.opf"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/oebps-package+xml"</span>/&gt;</span>
   <span class="hljs-tag">&lt;/<span class="hljs-name">rootfiles</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">container</span>&gt;</span>
</code></pre>
<p>æˆ‘ä»¬åªéœ€ä½¿ç”¨ <code>XmlPullParser</code> è¯»å– <code>full-path</code> å±æ€§ï¼Œå°±èƒ½æ‹¿åˆ°æ–‡ä»¶è·¯å¾„ "OEBPS/content.opf"ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">suspend</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseContainer</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: String? = withContext(Dispatchers.IO) {
    <span class="hljs-keyword">val</span> xmlPullParser = Xml.newPullParser()

    xmlPullParser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
    <span class="hljs-keyword">var</span> eventType = xmlPullParser.eventType

    <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
        <span class="hljs-keyword">when</span> (eventType) {
            XmlPullParser.START_TAG -&gt; {
                <span class="hljs-keyword">val</span> tagName = xmlPullParser.name
                <span class="hljs-keyword">if</span> (tagName == <span class="hljs-string">"rootfile"</span>) {
                    <span class="hljs-keyword">val</span> rootFilePath = xmlPullParser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"full-path"</span>)
                    Log.d(<span class="hljs-string">"ContainerRootFilePath"</span>, <span class="hljs-string">"rootFilePath: <span class="hljs-variable">$rootFilePath</span>"</span>)
                    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> rootFilePath
                }
            }
        }
        eventType = xmlPullParser.next()
    }
    <span class="hljs-keyword">return</span><span class="hljs-symbol">@withContext</span> <span class="hljs-literal">null</span>
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-bash" lang="bash">rootFilePath: OEBPS/content.opf
</code></pre>
<h3 data-id="heading-13">å…³é”®æ–‡ä»¶ï¼šopf æ–‡ä»¶</h3>
<p>OPF æ–‡ä»¶ä¹Ÿæ˜¯ä¸€ä¸ª XMLï¼Œå®ƒå­˜ç€ä¹¦ç±çš„é‡è¦ä¿¡æ¯ï¼š</p>
<ul>
<li><strong><code>&lt;metadata&gt;</code></strong>ï¼šå…ƒæ•°æ®ã€‚ä¹¦åã€ä½œè€…ã€æ ‡è¯†ç¬¦ã€ç®€ä»‹ã€è¯­è¨€ã€ç®€ä»‹ã€å‡ºç‰ˆç¤¾ã€åˆ†ç±»ã€å°é¢ç­‰ã€‚</li>
<li><strong><code>&lt;mainfest&gt;</code></strong>ï¼šèµ„æºæ¸…å•ã€‚ä¹¦ä¸­çš„æ‰€æœ‰æ–‡ä»¶éƒ½è¦åœ¨æ­¤è¿›è¡Œæ³¨å†Œï¼Œæ¯ä¸€é¡¹ï¼ˆ<code>item</code>ï¼‰éƒ½æœ‰ç€ <code>href</code>ã€<code>id</code>ã€<code>media-type</code>ã€‚</li>
<li><strong><code>spine</code></strong>ï¼šä¹¦è„Šã€‚å®ƒå¼•ç”¨äº†èµ„æºæ¸…å•é‡Œé¢çš„ idï¼Œå®šä¹‰äº†ä¹¦çš„é˜…è¯»é¡ºåºã€‚</li>
</ul>
<h4 data-id="heading-14">OPF ç¤ºä¾‹</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.idpf.org/2007/opf"</span> <span class="hljs-attr">unique-identifier</span>=<span class="hljs-string">"BookId"</span> <span class="hljs-attr">version</span>=<span class="hljs-string">"3.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">metadata</span> <span class="hljs-attr">xmlns:dc</span>=<span class="hljs-string">"http://purl.org/dc/elements/1.1/"</span> <span class="hljs-attr">xmlns:opf</span>=<span class="hljs-string">"http://www.idpf.org/2007/opf"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:title</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰ ç¬¬ä¸€å· Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">dc:title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:creator</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-2"</span>&gt;</span>ä¸ƒèœãªãª<span class="hljs-tag">&lt;/<span class="hljs-name">dc:creator</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:creator</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-3"</span>&gt;</span>Parum<span class="hljs-tag">&lt;/<span class="hljs-name">dc:creator</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span>&gt;</span>calibre:19525<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span>&gt;</span>uuid:77842cae-a0d7-4144-9f4d-9ca1a73b2129<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:identifier</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BookId"</span> <span class="hljs-attr">opf:scheme</span>=<span class="hljs-string">"UUID"</span>&gt;</span>urn:uuid:52746820-f83f-11ee-bf6c-08bfb888ec3a<span class="hljs-tag">&lt;/<span class="hljs-name">dc:identifier</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:source</span>&gt;</span>https://www.wenku8.cc/book/3103.htm<span class="hljs-tag">&lt;/<span class="hljs-name">dc:source</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:language</span>&gt;</span>zh<span class="hljs-tag">&lt;/<span class="hljs-name">dc:language</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:contributor</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-1"</span>&gt;</span>calibre (7.0.0) [https://calibre-ebook.com]<span class="hljs-tag">&lt;/<span class="hljs-name">dc:contributor</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:description</span>&gt;</span>åœ¨æŸä¸€æ‰€ä¹¡æ‘å›½ä¸­ï¼Œä¸€å¯¹ç”·å¥³å‘å½¼æ­¤ç«‹ä¸‹æ°¸æ’å‹æƒ…çš„èª“è¨€ã€‚
æœç€åŒä¸€ä¸ªæ¢¦æƒ³å‰è¿›ï¼Œæˆä¸ºå‘½è¿å…±åŒä½“çš„ä¸¤äººä¹‹é—´â”€â”€
å…³ç³»å¹¶æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„å‘å±•ï¼Œå°±è¿™ä¹ˆåº¦è¿‡äº†ä¸¤å¹´çš„å²æœˆâ€¦â€¦ï¼
è‡³ä»Šéƒ½è¿˜æ²¡è°ˆè¿‡åˆæ‹çš„ High å’–å¥³å­â”€â”€çŠ¬å†¢æ—¥è‘µï¼Œ
ä»¥åŠçƒ­çˆ±èŠ±å‰çš„æ¤ç‰©ç”·å­â”€â”€å¤ç›®æ‚ å®‡ï¼Œ
å°±ç®—å‡ä¸Šé«˜ä¸­äºŒå¹´çº§ï¼Œè¿˜æ˜¯ä¸€æ ·åœ¨åªæœ‰ä¸¤äººçš„å›­è‰ºç¤¾ä¸­ï¼Œå¹³å’Œåœ°å½“ç€æŒšå‹ã€‚
ç„¶è€Œè¿™æ—¶ï¼Œæ‚ å®‡è·Ÿåˆæ‹å¯¹è±¡é‡é€¢ï¼Œä½¿å¾—ä¸¤äººä¹‹é—´çš„å…³ç³»å¼€å§‹å¤±æ§ï¼Ÿ
ç©¶ç«Ÿã€Œå·²ç»æ‡‚å¾—æ‹æ…•ä¹‹å¿ƒã€çš„æ—¥è‘µï¼Œèƒ½ä¸èƒ½æ‘†è„±ã€Œç†æƒ³æŒšå‹ã€çš„èº«ä»½å‘¢ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">dc:description</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:publisher</span>&gt;</span>ç”µå‡»æ–‡åº“<span class="hljs-tag">&lt;/<span class="hljs-name">dc:publisher</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ ¡å›­<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>é’æ˜¥<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ‹çˆ±<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>åå®«<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dc:subject</span>&gt;</span>æ¬¢ä¹å‘<span class="hljs-tag">&lt;/<span class="hljs-name">dc:subject</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"title-type"</span>&gt;</span>main<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰ ç¬¬ä¸€å· Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"cover"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"img157909.jpg"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-1"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>bkp<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-2"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>aut<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-2"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>ä¸ƒèœãªãª<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-3"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"role"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"marc:relators"</span>&gt;</span>aut<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-3"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"file-as"</span>&gt;</span>Parum<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"belongs-to-collection"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"id-4"</span>&gt;</span>ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-4"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"collection-type"</span>&gt;</span>series<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">opf:meta</span> <span class="hljs-attr">refines</span>=<span class="hljs-string">"#id-4"</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"group-position"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-name">opf:meta</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">metadata</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">manifest</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/Cover.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Cover.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/chapter0.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chapter0.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/chapter1.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"chapter1.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Text/Credits.xhtml"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"Credits.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"nav"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"nav.xhtml"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/xhtml+xml"</span> <span class="hljs-attr">properties</span>=<span class="hljs-string">"nav"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"toc.ncx"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"ncxuks"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"application/x-dtbncx+xml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Styles/style.css"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"style.css"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"text/css"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Images/157909.jpg"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img157909.jpg"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"image/jpeg"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">item</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"Images/157910.jpg"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"img157910.jpg"</span> <span class="hljs-attr">media-type</span>=<span class="hljs-string">"image/jpeg"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">manifest</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">spine</span> <span class="hljs-attr">toc</span>=<span class="hljs-string">"ncxuks"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"Cover.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"chapter0.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"chapter1.xhtml"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">itemref</span> <span class="hljs-attr">idref</span>=<span class="hljs-string">"Credits.xhtml"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">spine</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">package</span>&gt;</span>
</code></pre>
<p>å®šä¹‰æ•°æ®ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/**
 * ä¹¦ç±å…ƒæ•°æ®
 */</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookMetadata</span>(
    <span class="hljs-keyword">val</span> title: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> authors: List&lt;String&gt; = emptyList(),
    <span class="hljs-keyword">val</span> description: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> language: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> cover: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> publisher: String = <span class="hljs-string">""</span>,
    <span class="hljs-keyword">val</span> categories: List&lt;String&gt; = emptyList(),
)

<span class="hljs-comment">/**
 * ä¹¦ç±ç›®å½•é¡ºåº
 */</span>
<span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BookSpineItem</span>(
    <span class="hljs-keyword">val</span> id: String,
    <span class="hljs-keyword">val</span> href: String,
    <span class="hljs-keyword">val</span> mediaType: String,
)

<span class="hljs-comment">// ä¸´æ—¶å­˜å‚¨ manifest æ•°æ®</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">data</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ManifestItem</span>(<span class="hljs-keyword">val</span> href: String, <span class="hljs-keyword">val</span> mediaType: String)
</code></pre>
<p>å› ä¸ºå…ƒæ•°æ®å°é¢å’Œä¹¦è„Šéƒ½ä½¿ç”¨äº† ID å¼•ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å…ˆè§£æ <code>Manifest</code>ï¼Œæ„å»ºå‡ºä¸€ä¸ªæ˜ å°„è¡¨ï¼Œå†æ¥è§£æ <code>Metadata</code> å’Œ <code>Spine</code>ï¼Œè¿™æ ·æ›´åŠ æ¸…æ™°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseOpf</span><span class="hljs-params">(inputStream: <span class="hljs-type">InputStream</span>)</span></span>: Pair&lt;BookMetadata, List&lt;BookSpineItem&gt;&gt; {
    <span class="hljs-keyword">val</span> parser = Xml.newPullParser()
    parser.setInput(inputStream, <span class="hljs-string">"UTF-8"</span>)
    <span class="hljs-comment">// å¼€å¯å‘½åç©ºé—´å¤„ç†ï¼Œè¿™æ · parser.name ä¼šè¿”å› "title" è€Œä¸æ˜¯ "dc:title"ï¼Œä¸åŒ…å« dc: å‰ç¼€</span>
    parser.setFeature(XmlPullParser.FEATURE_PROCESS_NAMESPACES, <span class="hljs-literal">true</span>)

    <span class="hljs-keyword">var</span> eventType = parser.eventType

    <span class="hljs-comment">// æ˜ å°„è¡¨ï¼šID -&gt; ManifestItem</span>
    <span class="hljs-keyword">val</span> manifestMap = mutableMapOf&lt;String, ManifestItem&gt;()

    <span class="hljs-comment">// ä¹¦ç±å…ƒæ•°æ®</span>
    <span class="hljs-keyword">var</span> title = <span class="hljs-string">""</span>
    <span class="hljs-keyword">val</span> authors = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">var</span> description = <span class="hljs-string">""</span>
    <span class="hljs-keyword">var</span> language = <span class="hljs-string">""</span>
    <span class="hljs-keyword">var</span> publisher = <span class="hljs-string">""</span>
    <span class="hljs-keyword">val</span> categories = mutableListOf&lt;String&gt;()
    <span class="hljs-keyword">var</span> coverId = <span class="hljs-string">""</span> <span class="hljs-comment">// å°é¢ ID</span>

    <span class="hljs-comment">// è„Šéª¨åˆ—è¡¨ï¼šåªå­˜ ID å¼•ç”¨ï¼Œç¨åè§£æ</span>
    <span class="hljs-keyword">val</span> spineIdRefs = mutableListOf&lt;String&gt;()

    <span class="hljs-keyword">while</span> (eventType != XmlPullParser.END_DOCUMENT) {
        <span class="hljs-keyword">when</span> (eventType) {
            XmlPullParser.START_TAG -&gt; {
                <span class="hljs-keyword">val</span> tagName = parser.name

                <span class="hljs-keyword">when</span> (tagName) {
                    <span class="hljs-comment">// å¤„ç†å…ƒæ•°æ® (Metadata)</span>
                    <span class="hljs-string">"title"</span> -&gt; title = safeNextText(parser)
                    <span class="hljs-string">"creator"</span> -&gt; authors.add(safeNextText(parser))
                    <span class="hljs-string">"description"</span> -&gt; description = safeNextText(parser)
                    <span class="hljs-string">"language"</span> -&gt; language = safeNextText(parser)
                    <span class="hljs-string">"publisher"</span> -&gt; publisher = safeNextText(parser)
                    <span class="hljs-string">"subject"</span> -&gt; categories.add(safeNextText(parser))

                    <span class="hljs-string">"meta"</span> -&gt; {
                        <span class="hljs-comment">// å¤„ç†å°é¢ï¼š&lt;meta name="cover" content="img157909.jpg"/&gt;</span>
                        <span class="hljs-keyword">val</span> nameAttr = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"name"</span>)
                        <span class="hljs-keyword">if</span> (nameAttr == <span class="hljs-string">"cover"</span>) {
                            coverId = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"content"</span>)
                        }
                    }

                    <span class="hljs-comment">// å¤„ç†æ¸…å• (Manifest)</span>
                    <span class="hljs-string">"item"</span> -&gt; {
                        <span class="hljs-comment">// &lt;item id="..." href="..." media-type="..."/&gt;</span>
                        <span class="hljs-keyword">val</span> id = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"id"</span>)
                        <span class="hljs-keyword">val</span> href = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"href"</span>)
                        <span class="hljs-keyword">val</span> mediaType = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"media-type"</span>)

                        <span class="hljs-keyword">if</span> (id != <span class="hljs-literal">null</span> &amp;&amp; href != <span class="hljs-literal">null</span> &amp;&amp; mediaType != <span class="hljs-literal">null</span>) {
                            manifestMap[id] = ManifestItem(href, mediaType)
                        }
                    }

                    <span class="hljs-comment">// --- 3. å¤„ç†è„Šéª¨ (Spine) ---</span>
                    <span class="hljs-string">"itemref"</span> -&gt; {
                        <span class="hljs-comment">// &lt;itemref idref="..."/&gt;</span>
                        <span class="hljs-keyword">val</span> idref = parser.getAttributeValue(<span class="hljs-literal">null</span>, <span class="hljs-string">"idref"</span>)
                        <span class="hljs-keyword">if</span> (idref != <span class="hljs-literal">null</span>) {
                            spineIdRefs.add(idref)
                        }
                    }
                }
            }
        }
        eventType = parser.next()
    }


    <span class="hljs-comment">// è§£æå°é¢è·¯å¾„ï¼šåˆ©ç”¨ coverId ä» manifestMap æŸ¥æ‰¾çœŸå®è·¯å¾„</span>
    <span class="hljs-keyword">val</span> finalCoverPath = coverId.let { id -&gt;
        manifestMap[id]?.href
    } ?: <span class="hljs-string">""</span>

    <span class="hljs-keyword">val</span> metadata = BookMetadata(
        title = title,
        authors = authors,
        description = description,
        language = language,
        cover = finalCoverPath, <span class="hljs-comment">// çœŸå®è·¯å¾„</span>
        publisher = publisher,
        categories = categories
    )

    <span class="hljs-keyword">val</span> bookSpineItems = spineIdRefs.mapNotNull { idref -&gt;
        <span class="hljs-keyword">val</span> item = manifestMap[idref]
        <span class="hljs-keyword">if</span> (item != <span class="hljs-literal">null</span>) {
            BookSpineItem(
                id = idref,
                href = item.href,
                mediaType = item.mediaType
            )
        } <span class="hljs-keyword">else</span> {
            Log.w(<span class="hljs-string">"OpfParser"</span>, <span class="hljs-string">"Spine item '<span class="hljs-variable">$idref</span>' not found in manifest."</span>)
            <span class="hljs-literal">null</span>
        }
    }

    <span class="hljs-keyword">return</span> Pair(metadata, bookSpineItems)
}

<span class="hljs-comment">// é˜²æ­¢ç©ºæ ‡ç­¾å¯¼è‡´å¼‚å¸¸</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">safeNextText</span><span class="hljs-params">(parser: <span class="hljs-type">XmlPullParser</span>)</span></span>: String {
    <span class="hljs-keyword">var</span> result = <span class="hljs-string">""</span>
    <span class="hljs-keyword">if</span> (parser.next() == XmlPullParser.TEXT) {
        result = parser.text
        parser.nextTag() <span class="hljs-comment">// ç§»è‡³ END_TAG</span>
    }
    <span class="hljs-keyword">return</span> result
}
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">lifecycleScope.launch(Dispatchers.IO) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">val</span> inputStream = assets.<span class="hljs-keyword">open</span>(<span class="hljs-string">"OEBPS/content.opf"</span>)

        <span class="hljs-keyword">val</span> (metadata, spine) = parseOpf(inputStream)

        println(<span class="hljs-string">"=== ä¹¦ç±ä¿¡æ¯ ==="</span>)
        println(<span class="hljs-string">"æ ‡é¢˜: <span class="hljs-subst">${metadata.title}</span>"</span>)
        println(<span class="hljs-string">"ä½œè€…: <span class="hljs-subst">${metadata.authors}</span>"</span>)
        println(<span class="hljs-string">"å°é¢è·¯å¾„: <span class="hljs-subst">${metadata.cover}</span>"</span>)
        println(<span class="hljs-string">"ç®€ä»‹: <span class="hljs-subst">${metadata.description.take(<span class="hljs-number">100</span>)}</span>..."</span>)

        println(<span class="hljs-string">"\n=== ç« èŠ‚åˆ—è¡¨ (Spine) ==="</span>)
        spine.forEach { item -&gt;
            println(<span class="hljs-string">"ID: <span class="hljs-subst">${item.id.padEnd(<span class="hljs-number">15</span>)}</span> | Type: <span class="hljs-subst">${item.mediaType.padEnd(<span class="hljs-number">25</span>)}</span> | Path: <span class="hljs-subst">${item.href}</span>"</span>)
        }
    } <span class="hljs-keyword">catch</span> (e: IOException) {
        e.printStackTrace()
    }
}
</code></pre>
<p>è¿è¡Œç»“æœï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">===</span> <span class="hljs-string">ä¹¦ç±ä¿¡æ¯</span> <span class="hljs-string">===</span>
<span class="hljs-string">æ ‡é¢˜:</span> <span class="hljs-string">ç”·å¥³ä¹‹é—´å­˜åœ¨çº¯å‹æƒ…å—ï¼Ÿï¼ˆä¸ï¼Œä¸å­˜åœ¨ï¼ï¼‰</span> <span class="hljs-string">ç¬¬ä¸€å·</span> <span class="hljs-string">Flag1.ä¸ç„¶åˆ°ä¸‰åå²è¿˜å•èº«å°±è·Ÿæˆ‘åœ¨ä¸€èµ·å§ï¼Ÿ</span>
<span class="hljs-string">ä½œè€…:</span> [<span class="hljs-string">ä¸ƒèœãªãª</span>, <span class="hljs-string">Parum</span>]
<span class="hljs-string">å°é¢è·¯å¾„:</span> <span class="hljs-string">Images/157909.jpg</span>
<span class="hljs-string">ç®€ä»‹:</span> <span class="hljs-string">åœ¨æŸä¸€æ‰€ä¹¡æ‘å›½ä¸­ï¼Œä¸€å¯¹ç”·å¥³å‘å½¼æ­¤ç«‹ä¸‹æ°¸æ’å‹æƒ…çš„èª“è¨€ã€‚</span>
<span class="hljs-string">æœç€åŒä¸€ä¸ªæ¢¦æƒ³å‰è¿›ï¼Œæˆä¸ºå‘½è¿å…±åŒä½“çš„ä¸¤äººä¹‹é—´â”€â”€</span>
<span class="hljs-string">å…³ç³»å¹¶æ²¡æœ‰ä»»ä½•ç‰¹åˆ«çš„å‘å±•ï¼Œå°±è¿™ä¹ˆåº¦è¿‡äº†ä¸¤å¹´çš„å²æœˆâ€¦â€¦ï¼</span>
<span class="hljs-string">è‡³ä»Šéƒ½è¿˜æ²¡è°ˆè¿‡åˆæ‹çš„</span> <span class="hljs-string">High</span> <span class="hljs-string">å’–å¥³å­â”€...</span>
<span class="hljs-string">===</span> <span class="hljs-string">ç« èŠ‚åˆ—è¡¨</span> <span class="hljs-string">(Spine)</span> <span class="hljs-string">===</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">Cover.xhtml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/Cover.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter0.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter0.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter1.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter1.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter2.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter2.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter3.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter3.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter4.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter4.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter5.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter5.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter6.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter6.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">chapter7.xhtml</span>  <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/chapter7.xhtml</span>
<span class="hljs-attr">ID:</span> <span class="hljs-string">Credits.xhtml</span>   <span class="hljs-string">|</span> <span class="hljs-attr">Type:</span> <span class="hljs-string">application/xhtml+xml</span>     <span class="hljs-string">|</span> <span class="hljs-attr">Path:</span> <span class="hljs-string">Text/Credits.xhtml</span>
</code></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>å…³äºè§£æçš„å†…å®¹å°±åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ EPUB é˜…è¯»å™¨çš„è§£ææµç¨‹ï¼š</p>
<ol>
<li>è·å– EPUB ç”µå­ä¹¦çš„ Uriã€‚</li>
<li>ä½¿ç”¨ <code>ZipInputStream</code> è¯»å–è¿™ä¸ªå‹ç¼©æ–‡ä»¶ï¼ˆèŠ‚çœç©ºé—´ï¼‰ã€‚</li>
<li>åœ¨ Zip æµä¸­æ‰¾åˆ° <code>META-INF/container.xml</code> æ–‡ä»¶ï¼Œè§£æå‡º <code>.opf</code> æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„ã€‚</li>
<li>ä» OPF æ–‡ä»¶ä¸­è§£æå‡ºä¹¦ç±å…ƒæ•°æ®ï¼Œä»¥åŠé˜…è¯»é¡ºåºï¼ˆä¹¦ç±ç›®å½•ï¼‰ã€‚</li>
<li>æœ€åï¼Œåœ¨æ¸²æŸ“å†…å®¹æ—¶ï¼Œæ ¹æ®è·¯å¾„æ‰¾åˆ°å†…å®¹æ–‡ä»¶ï¼Œä½¿ç”¨ <code>Jsoup</code> è§£æ HTML å³å¯ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®]]></title>    <link>https://juejin.cn/post/7576821684252016683</link>    <guid>https://juejin.cn/post/7576821684252016683</guid>    <pubDate>2025-11-26T09:24:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252016683" data-draft-id="7576841976927993892" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-26T09:24:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”³é˜³"/> <meta itemprop="url" content="https://juejin.cn/user/4353721775165486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Day 16ï¼š02. åŸºäº Tauri 2.0 å¼€å‘åå°ç®¡ç†ç³»ç»Ÿ-é¡¹ç›®åˆå§‹åŒ–é…ç½®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4353721775165486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”³é˜³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T09:24:52.000Z" title="Wed Nov 26 2025 09:24:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70c35e9c8d2f43f09a8c45c7858d7513~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=vVZYOE1xotETMxheo5tMCO8v%2FXg%3D" alt="image-20251126172101658" loading="lazy"/></p>
<h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>åœ¨å¼€å§‹å†™ä»£ç ä¹‹å‰ï¼Œæˆ‘å·²ç»å°†å®˜ç½‘ä¸Šçš„æ ¸å¿ƒæ¦‚å¿µå¤§è‡´æ‰«äº†ä¸€éï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Ftauri.app%2Fzh-cn%2Fconcept%2F%25EF%25BC%258C%25E8%25AF%25B4%25E5%25AE%259E%25E8%25AF%259D%25EF%25BC%258C%25E4%25B8%258D%25E7%259F%25A5%25E6%2589%2580%25E4%25BA%2591%25EF%25BC%258C%25E4%25B8%258E%25E6%2588%2591%25E4%25B9%258B%25E5%2589%258D%25E7%2586%259F%25E6%2582%2589%25E7%259A%2584" target="_blank" title="https://tauri.app/zh-cn/concept/%EF%BC%8C%E8%AF%B4%E5%AE%9E%E8%AF%9D%EF%BC%8C%E4%B8%8D%E7%9F%A5%E6%89%80%E4%BA%91%EF%BC%8C%E4%B8%8E%E6%88%91%E4%B9%8B%E5%89%8D%E7%86%9F%E6%82%89%E7%9A%84" ref="nofollow noopener noreferrer">tauri.app/zh-cn/conceâ€¦</a> <code>web</code> ç«¯ç›¸å·®ç”šè¿œï¼Œä¸è¿‡æˆ‘å¥½åƒæ‘¸åˆ°äº†ä¸€äº›é—¨è·¯ï¼Œä»¥ä¸‹éƒ½æ˜¯æˆ‘ä¸ªäººè§è§£ï¼Œå¯èƒ½æœ‰æ‰€åå·®ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚<code>Tauri</code> å¼€å‘çš„åº”ç”¨ç¨‹åºåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå‰ç«¯å’Œåç«¯ï¼Œå…¶å®æœ¬è´¨ä¸Šä¹Ÿæ˜¯ C/S æ¶æ„ã€‚å‰ç«¯å°±å’Œä¹‹å‰ <code>web</code> å¼€å‘ä¸€æ ·ï¼Œä½ å¯ä»¥é€‰æ‹©è‡ªå·±æ“…é•¿çš„ UI æ¡†æ¶ï¼Œè€Œåç«¯åˆ™æ˜¯åŸºäº <code>Rust</code> æ¥åšçš„ï¼Œå¯ä»¥å®Œæˆä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œç³»ç»Ÿè°ƒç”¨ç­‰ç­‰ã€‚æˆ‘çš„è„‘æµ·é‡Œç›®å‰ç»“æ„æ˜¯è¿™æ ·çš„ï¼Œå¯¹åº”ä»£ç çš„ç›®å½•ï¼Œå‰ç«¯å°±æ˜¯ <code>src</code> ä¸‹çš„ä»£ç ï¼Œåç«¯å°±æ˜¯ <code>src-tauri</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cb6e3236740745338f15aafefbba6ac2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=hwimUXiBU0In96rVZE4EX9B3l6w%3D" alt="image-20251126112339786" loading="lazy"/></p>
<p>çœ‹åˆ°è¿™å…¶å®å°±æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼ŒæŠŠ <code>Rust</code> æ¢æˆæˆ‘ä»¬ç†Ÿæ‚‰çš„ <code>Java</code>ï¼Œåˆå›åˆ°äº† <code>web</code> å¼€å‘çš„æ¨¡å¼äº†ã€‚å½“ç„¶å¦‚æœä½ æ„¿æ„æ·±å…¥å­¦ä¹  <code>Rust</code>ï¼Œå®Œå…¨ç”¨ <code>Rust</code> æ¥æ„å»ºæœåŠ¡ç«¯ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>æ‰€ä»¥æœ€åå®é™…ä¸Šæˆ‘çš„é¡¹ç›®å°±å˜æˆäº†è¿™æ ·ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d6d0b6d4eaa48878d653b986e55d88c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=n835ZsPkv2diTIKKQT99%2Bg01KA8%3D" alt="image-20251126113509775" loading="lazy"/></p>
<p>è¿™å°±å¾ˆç†Ÿæ‚‰äº†ï¼Œ<code>Tauri</code> ä¼¼ä¹åªæ˜¯ç®€å•çš„å¥—å£³äº†ã€‚åæ¥ä»”ç»†æƒ³æƒ³å¥½åƒä¹Ÿä¸æ˜¯ï¼Œç›¸æ¯”äº <code>Web</code> ç«¯å¤šäº†ä¸€äº›è®¿é—®ç³»ç»ŸåŸç”Ÿ <code>Api</code> çš„èƒ½åŠ›ã€‚</p>
<p>âœ… <strong>Vue3</strong>ï¼šå‰ç«¯å¼€å‘ä½“éªŒå¥½</p>
<p>âœ… <strong>Java åç«¯</strong>ï¼šæˆç†Ÿç¨³å®šï¼Œå¼€å‘æ•ˆç‡é«˜</p>
<p>âœ… <strong>Tauri</strong>ï¼šæä¾›æ¡Œé¢åº”ç”¨å¤–å£³ï¼Œæœªæ¥å¯æ‰©å±•ç³»ç»ŸåŠŸèƒ½</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯æ ˆé€‰æ‹©</h2>
<h3 data-id="heading-2">å‰ç«¯ï¼ˆTauriï¼‰ï¼š</h3>
<ul>
<li>Vue3 + TypeScript</li>
<li>UI ç»„ä»¶åº“ï¼šAnt Design  Vue</li>
<li>HTTP å®¢æˆ·ç«¯ï¼šaxios</li>
<li>çŠ¶æ€ç®¡ç†ï¼šPinia</li>
</ul>
<h3 data-id="heading-3">åç«¯ï¼ˆJavaï¼‰ï¼š</h3>
<ul>
<li>
<p>Spring Boot + Sa-Token</p>
</li>
<li>
<p>æ•°æ®åº“ï¼šPostgreSQL + MyBatis-Plus</p>
</li>
<li>
<p>API æ–‡æ¡£ï¼šSwagger</p>
</li>
<li>
<p>éƒ¨ç½²ï¼šDocker + äº‘æœåŠ¡å™¨</p>
</li>
</ul>
<blockquote>
<p>æˆªæ­¢ç›®å‰ 2025.11.26 æˆ‘ä¼šä½¿ç”¨å½“å‰æ‰€æœ‰æœ€æ–°ç¨³å®šç‰ˆæœ¬è¿›è¡Œå¼€å‘ã€‚æˆ‘å»ºè®®æ˜¯æˆ‘å½“å‰çš„æ–‡ç« ä½œä¸ºè¾…åŠ©ï¼Œä»¥å®˜æ–¹æ–‡æ¡£ä¸ºä¸»ï¼Œæˆ‘ä¼šåœ¨å…³é”®ä½ç½®ç»™å‡ºæ–‡æ¡£é“¾æ¥ã€‚</p>
</blockquote>
<h2 data-id="heading-4">ä¸‰ã€å®Œæˆå‰åç«¯æ•°æ®äº¤äº’</h2>
<h3 data-id="heading-5">3.1. ç›®å½•æœºæ„è§„åˆ’</h3>
<p>é¦–å…ˆå’Œå¸¸è§„ <code>Vue</code> é¡¹ç›®ä¸€æ ·ï¼Œè§„åˆ’å¥½æˆ‘ä»¬çš„ç›®å½•ç»“æ„ï¼Œå¤§è‡´å¦‚ä¸‹</p>
<pre><code class="hljs language-bash" lang="bash">src               
â”œâ”€ api            <span class="hljs-comment"># API æ¥å£   </span>
â”œâ”€ assets          <span class="hljs-comment"># é™æ€èµ„æº</span>
â”œâ”€ components       <span class="hljs-comment"># é€šç”¨ç»„ä»¶   </span>
â”œâ”€ layouts         <span class="hljs-comment"># å¸ƒå±€ç»„ä»¶     </span>
â”œâ”€ router          <span class="hljs-comment"># è·¯ç”±é…ç½®  </span>
â”œâ”€ stores      		 <span class="hljs-comment"># çŠ¶æ€ç®¡ç†(Pinia)  </span>
â”œâ”€ utils      		 <span class="hljs-comment"># å·¥å…·å‡½æ•° </span>
â”œâ”€ views     		 <span class="hljs-comment"># é¡µé¢ç»„ä»¶     </span>
â”œâ”€ App.vue        
â”œâ”€ main.ts        
â””â”€ vite-env.d.ts  

</code></pre>
<h3 data-id="heading-6">3.2. å®‰è£…æ•´åˆå¸¸ç”¨ä¾èµ–</h3>
<p>å®‰è£…æ‰€æœ‰ä¾èµ–</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Vue ç”Ÿæ€</span>
pnpm add vue-router@4 pinia pinia-plugin-persistedstate
<span class="hljs-comment"># UI ç»„ä»¶åº“ (Ant Design Vue)</span>
pnpm add ant-design-vue@4.x @ant-design/icons-vue
<span class="hljs-comment"># æ ·å¼é¢„å¤„ç†</span>
pnpm add install less 
<span class="hljs-comment"># HTTP å®¢æˆ·ç«¯</span>
pnpm add install axios
</code></pre>
<p>ä¸€é”®å®‰è£…æ‰€æœ‰</p>
<pre><code class="hljs language-bash" lang="bash">pnpm add vue-router@4 pinia pinia-plugin-persistedstate ant-design-vue@4.x @ant-design/icons-vue less  axios
</code></pre>
<h4 data-id="heading-7">3.2.1. æ•´åˆ Ant Design Vue</h4>
<blockquote>
<p>è¿™é‡Œæˆ‘å¸Œæœ›èƒ½å¤Ÿå®ç°è‡ªåŠ¨æŒ‰éœ€å¯¼å…¥ï¼Œå®˜æ–¹æ–‡æ¡£è¿™é‡Œå†™çš„ä¸å¤Ÿæ¸…æ¥šï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.antdv.com%2Fdocs%2Fvue%2Fgetting-started-cn%25E3%2580%2582%25E6%2588%2591%25E4%25BB%25AC%25E5%258F%25AF%25E4%25BB%25A5%25E5%2580%259F%25E5%258A%25A9" target="_blank" title="https://www.antdv.com/docs/vue/getting-started-cn%E3%80%82%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E5%80%9F%E5%8A%A9" ref="nofollow noopener noreferrer">www.antdv.com/docs/vue/geâ€¦</a> <code>unplugin-vue-components</code> å’Œ <code>unplugin-auto-import</code>è¿™ä¸¤æ¬¾æ’ä»¶æ¥å®Œæˆã€‚</p>
</blockquote>
<pre><code class="hljs language-bash" lang="bash">pnpm install -D unplugin-vue-components unplugin-auto-import
</code></pre>
<p>åœ¨æ’ä»¶çš„ <code>GitHub</code> ä»“åº“ä¸­å¯ä»¥çœ‹åˆ°æ˜¯æ”¯æŒçš„ï¼Œæ‰€ä»¥æ— éœ€æ‹…å¿ƒã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-auto-import" target="_blank" title="https://github.com/unplugin/unplugin-auto-import" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Funplugin%2Funplugin-vue-components" target="_blank" title="https://github.com/unplugin/unplugin-vue-components" ref="nofollow noopener noreferrer">github.com/unplugin/unâ€¦</a></p>
<p><strong>åœ¨ <code>vite.config.js</code> ä¸­é…ç½®æŒ‰éœ€å¼•å…¥ï¼š</strong></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { defineConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-auto-import/vite'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/vite'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AntDesignVueResolver</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'unplugin-vue-components/resolvers'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title class_">AutoImport</span>({
      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">AntDesignVueResolver</span>()],
    }),
    <span class="hljs-title class_">Components</span>({
      <span class="hljs-attr">resolvers</span>: [
        <span class="hljs-title class_">AntDesignVueResolver</span>({
           <span class="hljs-attr">importStyle</span>: <span class="hljs-string">'less'</span>, <span class="hljs-comment">// ä½¿ç”¨ less</span>
        }),
      ],
    }),
  ],
})
</code></pre>
<blockquote>
<p>è¿™é‡Œè¦æ³¨æ„ï¼Œ å¿…é¡»ç”¨ <code>less</code></p>
</blockquote>
<p>éšä¾¿æ‰¾ä¸€ä¸ªç»„ä»¶ï¼Œæµ‹è¯•ä¸€ä¸‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0834b46076024be48455c818b6b990ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=6%2FMVZNzjYD68VOeuynUf2SxCwIU%3D" alt="image-20251126153900116" loading="lazy"/></p>
<h4 data-id="heading-8">3.2.2. æ•´åˆ Vue Router</h4>
<p>æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Finstallation.html" target="_blank" title="https://router.vuejs.org/zh/installation.html" ref="nofollow noopener noreferrer">router.vuejs.org/zh/installaâ€¦</a></p>
<p>åˆ›å»ºè·¯ç”±å®ä¾‹ <code>router/index.js</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createRouter, createWebHashHistory } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HomeView.vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">AboutView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AboutView.vue'</span>

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>({
    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHashHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),
    <span class="hljs-attr">routes</span>: [
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span> },
        { <span class="hljs-attr">path</span>: <span class="hljs-string">'/about'</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutView</span> },
    ]
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router

</code></pre>
<blockquote>
<p>ä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œæˆ‘å®šä¹‰äº†ä¸¤ä¸ªé¡µé¢ç»„ä»¶ã€‚</p>
</blockquote>
<p><code>main.ts</code> ä¸­æ³¨å†Œè·¯ç”±</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./App.vue"</span>;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">'./router'</span>


<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">"#app"</span>);

</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
  &lt;h1&gt;Hello App!&lt;/h1&gt;
  &lt;p&gt;&lt;strong&gt;Current route path:&lt;/strong&gt; {{ $route.fullPath }}&lt;/p&gt;
  &lt;nav&gt;
    &lt;RouterLink to="/"&gt;Go to Home&lt;/RouterLink&gt;
    &lt;RouterLink to="/about"&gt;Go to About&lt;/RouterLink&gt;
  &lt;/nav&gt;
  &lt;main&gt;
    &lt;RouterView /&gt;
  &lt;/main&gt;
&lt;/template&gt;
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c8e06f1842ad4659a32549bc0cae73bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=25BdHKyoEbylpWLuWo%2B3MDabM1c%3D" alt="PixPin_2025-11-26_16-14-56.gif" loading="lazy"/></p>
<h4 data-id="heading-9">3.2.3. æ•´åˆ pinia &amp; pinia-plugin-persistedstate</h4>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpinia.vuejs.org%2Fzh%2Fintroduction.html" target="_blank" title="https://pinia.vuejs.org/zh/introduction.html" ref="nofollow noopener noreferrer">pinia.vuejs.org/zh/introducâ€¦</a></p>
<p><strong>æŒ‰æ¨¡å—åŒ–å®šä¹‰ store</strong>ï¼Œä»¥ä¸‹ä¸ºç›®å½•ç»“æ„</p>
<pre><code class="hljs">stores         
â”œâ”€ modules     
â”‚  â””â”€ user.ts  
â””â”€ index.ts    
</code></pre>
<ul>
<li>åˆ›å»º <code>src/stores/index.ts</code></li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<ul>
<li><code>main.ts</code> é‡Œå¼•å…¥</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">//main.ts</span>
...
<span class="hljs-comment">// å¼•å…¥ pinia</span>
<span class="hljs-keyword">import</span> store <span class="hljs-keyword">from</span> <span class="hljs-string">'./stores'</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>)
app.<span class="hljs-title function_">use</span>(store)
...
</code></pre>
<ul>
<li>modules: æŒ‰æ¨¡å—å®šä¹‰å¯¹åº”çš„ store, user.ts è¡¨ç¤ºç”¨æˆ·ç›¸å…³æ•°æ®å­˜å‚¨çš„ä»“åº“</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// user.ts</span>
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>

<span class="hljs-comment">// ä½ å¯ä»¥å¯¹ `defineStore()` çš„è¿”å›å€¼è¿›è¡Œä»»æ„å‘½åï¼Œä½†æœ€å¥½ä½¿ç”¨ store çš„åå­—ï¼ŒåŒæ—¶ä»¥ `use` å¼€å¤´ä¸”ä»¥ `Store` ç»“å°¾ã€‚(æ¯”å¦‚ `useUserStore`ï¼Œ`useCartStore`ï¼Œ`useProductStore`)</span>
<span class="hljs-comment">// ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä½ çš„åº”ç”¨ä¸­ Store çš„å”¯ä¸€ IDã€‚</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
})
</code></pre>
<blockquote>
<p><strong>åœ¨å¼•å…¥ pinia çš„æ—¶å€™åšä¸€äº›è°ƒæ•´ï¼Œä¸ç›´æ¥åœ¨ main.ts é‡Œå¼•å…¥ï¼Œè¿™æ ·åšçš„å¥½å¤„åœ¨äºï¼Œä¹‹åå¯¹äº pinia é›†æˆä¸€äº›æ’ä»¶ï¼Œæˆ–è€…åšä¸€äº›å…¶ä»–é…ç½®ï¼Œå¯ä»¥ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ç”¨å…¨éƒ¨å †ç§¯åœ¨ main.ts ä¸­</strong></p>
</blockquote>
<ul>
<li>ä½¿ç”¨ <code>pinia-plugin-persistedstate</code> æŒä¹…åŒ–</li>
</ul>
<p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpraz.codeberg.page%2Fpinia-plugin-persistedstate%2Fguide%2F%23usage" target="_blank" title="https://praz.codeberg.page/pinia-plugin-persistedstate/guide/#usage" ref="nofollow noopener noreferrer">praz.codeberg.page/pinia-plugiâ€¦</a></p>
<blockquote>
<p>åœ¨ <code>web</code> ç«¯çš„æ—¶å€™å¯ä»¥ç”¨ <code>LocalStorage</code>ã€<code>SessionStorage</code> ç­‰ï¼Œä½†æ˜¯æ¡Œé¢ç«¯æˆ‘å°±ä¸ç¡®å®šäº†ï¼Œæˆ‘å»æœäº†ä¸€ä¸‹ï¼Œæ®è¯´æ˜¯æ”¯æŒ <code>LocalStorage</code> çš„ï¼Œä½†æ˜¯æœ‰å±€é™æ€§ï¼Œæ¨èäº†ä¸€ä¸ª <code>Tauri Store</code>ï¼Œè¿™ä¸ªç­‰åˆ°å…·ä½“ä½¿ç”¨çš„æ—¶å€™å†å»ç ”ç©¶ï¼Œä»Šå¤©ä»»åŠ¡å°±æ˜¯å…ˆæ•´åˆä¸Šã€‚</p>
</blockquote>
<p>å°†æ’ä»¶æ·»åŠ åˆ° <code>pinia</code> å®ä¾‹ä¸Š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ./stores/index.ts</span>
<span class="hljs-keyword">import</span> { createPinia } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>
<span class="hljs-keyword">import</span> piniaPluginPersistedstate <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia-plugin-persistedstate'</span>

<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">createPinia</span>()

store.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> store
</code></pre>
<p>åªéœ€è¦åœ¨å®šä¹‰çš„ <code>store</code> é‡Œå¼€å¯é…ç½®å³å¯å®ŒæˆæŒä¹…åŒ–æ“ä½œ</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserInfoStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'userInfo'</span>, {
    <span class="hljs-comment">// å…¶ä»–é…ç½®...</span>
    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>   
})
</code></pre>
<blockquote>
<p>é»˜è®¤ä½¿ç”¨çš„å°±æ˜¯ <code>LocalStorage</code>ï¼Œè¿™é‡Œæˆ‘æš‚æ—¶ä¸æµ‹è¯•äº†ï¼Œç­‰åˆ°ç”¨çš„æ—¶å€™æ›¿æ¢ä¸º <code>Tauri Store</code> å†ç ”ç©¶ã€‚</p>
</blockquote>
<h4 data-id="heading-10">3.2.4. æ•´åˆ Axios</h4>
<p>å®šä¹‰è¯·æ±‚å®ä¾‹ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä»ä¹‹å‰é¡¹ç›®ä¸­æ‹·è´è¿‡æ¥çš„ï¼ŒåŸºæœ¬ä¸Šéƒ½å·®ä¸å¤šã€‚</p>
<p>åˆ›å»º <code>utils/request.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { message } <span class="hljs-keyword">from</span> <span class="hljs-string">'ant-design-vue'</span>
<span class="hljs-keyword">import</span> axios, { <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosInstance</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosRequestConfig</span>, <span class="hljs-keyword">type</span> <span class="hljs-title class_">AxiosResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>

<span class="hljs-keyword">type</span> <span class="hljs-title class_">RequestConfig</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt; = <span class="hljs-title class_">AxiosRequestConfig</span> &amp; {
    <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰©å±•è‡ªå®šä¹‰é…ç½®</span>
    mock?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä½¿ç”¨mockæ•°æ®</span>
    mockData?: T <span class="hljs-comment">// mockæ•°æ®</span>
    noErrorToast?: <span class="hljs-built_in">boolean</span> <span class="hljs-comment">// æ˜¯å¦ä¸æ˜¾ç¤ºé”™è¯¯æç¤º</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Request</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AxiosInstance</span> <span class="hljs-comment">// axioså®ä¾‹</span>

    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span> = axios.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">baseURL</span>: <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_APP_BASE_API</span>,
            <span class="hljs-attr">timeout</span>: <span class="hljs-number">180000</span>,
            <span class="hljs-attr">headers</span>: {
                <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json;charset=UTF-8'</span>,
            },
        })

        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupInterceptors</span>()
    }

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">setupInterceptors</span>(<span class="hljs-params"/>) {
        <span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> config,
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error),
        )

        <span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">instance</span>.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
            <span class="hljs-function">(<span class="hljs-params">response: AxiosResponse</span>) =&gt;</span> {
                <span class="hljs-comment">// ä¸šåŠ¡çŠ¶æ€ç å¤„ç†</span>
                <span class="hljs-keyword">if</span> (response.<span class="hljs-property">data</span>.<span class="hljs-property">code</span> !== <span class="hljs-number">200</span>) {
                    <span class="hljs-keyword">const</span> config = response.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span>
                    <span class="hljs-keyword">if</span> (!config.<span class="hljs-property">noErrorToast</span>) {
                        message.<span class="hljs-title function_">error</span>(response.<span class="hljs-property">data</span>.<span class="hljs-property">message</span> || <span class="hljs-string">'è¯·æ±‚å¤±è´¥'</span>)
                    }
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(response.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">data</span>
            },
            <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
                <span class="hljs-comment">// å¤„ç†mockæ•°æ®</span>
                <span class="hljs-keyword">if</span> (error.<span class="hljs-property">isMock</span>) {
                    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(error.<span class="hljs-property">data</span>)
                }
                <span class="hljs-keyword">const</span> config = error.<span class="hljs-property">config</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">RequestConfig</span> | <span class="hljs-literal">undefined</span>

                <span class="hljs-comment">// åªæœ‰é…ç½®äº†ä¸è·³è¿‡é”™è¯¯å¤„ç†æ—¶æ‰æ˜¾ç¤ºé”™è¯¯æç¤º</span>
                <span class="hljs-keyword">if</span> (!config?.<span class="hljs-property">noErrorToast</span>) {
                    <span class="hljs-keyword">let</span> msg = <span class="hljs-string">'è¯·æ±‚é”™è¯¯'</span>
                    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">response</span>) {
                        <span class="hljs-keyword">switch</span> (error.<span class="hljs-property">response</span>.<span class="hljs-property">status</span>) {
                            <span class="hljs-keyword">case</span> <span class="hljs-number">400</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚å‚æ•°é”™è¯¯'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                                msg = <span class="hljs-string">'æœªæˆæƒï¼Œè¯·ç™»å½•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">403</span>:
                                msg = <span class="hljs-string">'æ‹’ç»è®¿é—®'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
                                msg = <span class="hljs-string">'è¯·æ±‚èµ„æºä¸å­˜åœ¨'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
                                msg = <span class="hljs-string">'æœåŠ¡å™¨å¼‚å¸¸ï¼Œè¯·ç¨åå†è¯•'</span>
                                <span class="hljs-keyword">break</span>
                            <span class="hljs-attr">default</span>:
                                msg = error.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>?.<span class="hljs-property">message</span> || <span class="hljs-string">`æœåŠ¡å™¨é”™è¯¯: <span class="hljs-subst">${error.response.status}</span>`</span>
                        }
                    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">request</span>) {
                        msg = <span class="hljs-string">'è¯·æ±‚è¶…æ—¶æˆ–ç½‘ç»œå¼‚å¸¸'</span>
                    } <span class="hljs-keyword">else</span> {
                        msg = error.<span class="hljs-property">message</span> || <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>
                    }
                    message.<span class="hljs-title function_">error</span>(msg)
                }
                <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error)
            },
        )
    }

    <span class="hljs-comment">// å°è£…æ ¸å¿ƒè¯·æ±‚æ–¹æ³•</span>
    <span class="hljs-keyword">public</span> request&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">config</span>: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®ç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (config.<span class="hljs-property">mock</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(config.<span class="hljs-property">mockData</span> <span class="hljs-keyword">as</span> T)
        }

        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">instance</span>(config)
    }

    <span class="hljs-keyword">public</span> get&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'GET'</span>, url })
    }

    <span class="hljs-keyword">public</span> post&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> put&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'PUT'</span>, url, data })
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">delete</span>&lt;T = <span class="hljs-built_in">unknown</span>&gt;(<span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">unknown</span>, config?: <span class="hljs-title class_">RequestConfig</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">request</span>({ ...config, <span class="hljs-attr">method</span>: <span class="hljs-string">'DELETE'</span>, url, data })
    }
}

<span class="hljs-keyword">const</span> http = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Request</span>()

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> http

</code></pre>
<p>å®šä¹‰ä¸ªæ¥å£æµ‹è¯•ä¸€ä¸‹</p>
<p>åˆ›å»º <code>api/user.ts</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">'../utils/request'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> userApi = {
    <span class="hljs-comment">// è·å–ç”¨æˆ·åˆ—è¡¨</span>
    <span class="hljs-attr">getUserInfo</span>: <span class="hljs-function">() =&gt;</span>
        http.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/user/info'</span>),

}
</code></pre>
<p>åœ¨ <code>app.vue</code> ä¸­æµ‹è¯•</p>
<pre><code class="hljs language-vue" lang="vue">&lt;a-button type="primary" @click="getUserInfo"&gt;è·å–ç”¨æˆ·ä¿¡æ¯&lt;/a-button&gt;
</code></pre>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { userApi } <span class="hljs-keyword">from</span> <span class="hljs-string">'./api/user'</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = (<span class="hljs-params"/>) =&gt; {
  userApi.<span class="hljs-title function_">getUserInfo</span>()
}

&lt;/script&gt;
</code></pre>
<p>åœ¨åº”ç”¨çª—å£ç‚¹å‡»æŒ‰é’®ï¼ŒæŒ‰ <code>F12</code>ï¼Œçœ‹åˆ°è¯·æ±‚å‡ºå»äº†ï¼Œå³è¡¨ç¤ºæˆåŠŸäº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c94b2860a83481989b65ee375b7eab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55Sz6Ziz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764753891&amp;x-signature=9AHuJDg4NYLVweMEeAH43fnOW3Q%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">å››ã€æ€»ç»“</h2>
<p>åˆ°å¤´æ¥å‘ç°åˆå›åˆ°äº†ç†Ÿæ‚‰çš„é¢†åŸŸï¼Œå¦‚æœä½ ä¸æƒ³åšæˆæ¡Œé¢ç«¯ï¼Œç›´æ¥ä½¿ç”¨ vue è„šæ‰‹æ¶æ­å»ºé¡¹ç›®ï¼Œæ‰€æœ‰æ•´åˆæ­¥éª¤å‡ ä¹ä¸€æ¨¡ä¸€æ ·ã€‚ä»Šå¤©å°±å…ˆè¿™æ ·ï¼Œç°åœ¨æœ‰ä¸ªé—®é¢˜ï¼Œå…ˆåšå‰ç«¯ç”¨ <code>mock</code> æ•°æ®åšæ¥å£ï¼Œå®ŒæˆåŸºç¡€åŠŸèƒ½åï¼Œå†å¼€å‘æœåŠ¡ç«¯ï¼Œè¿˜æ˜¯ç›´æ¥åŒæ—¶è¿›è¡Œã€‚å¦‚æœæœ‰äººçœ‹åˆ°è¿™é‡Œï¼Œä½ å¸Œæœ›é‡‡ç”¨å“ªç§æ–¹å¼å‘¢ï¼Ÿæ¬¢è¿ç•™è¨€ã€‚</p>
<p><strong>åƒé‡Œä¹‹è¡Œï¼Œå§‹äºè¶³ä¸‹ã€‚ä½ çš„â€œä¸ªäººå…¬å¸â€ä»è¿™ç¬¬ä¸€ä¸ª2å°æ—¶å¼€å§‹ã€‚æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„è¿›å±•æˆ–é‡åˆ°çš„å¡ç‚¹ï¼Œæˆ‘ä¼šé€ä¸€æŸ¥çœ‹ï¼Œå°½å¯èƒ½çš„å¸®åŠ©è§£å†³ã€‚æˆ‘ä»¬ä¸‹ä¸€ç¯‡æ–‡ç« è§ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡]]></title>    <link>https://juejin.cn/post/7576646142315495465</link>    <guid>https://juejin.cn/post/7576646142315495465</guid>    <pubDate>2025-11-26T03:11:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576646142315495465" data-draft-id="7573486671296790570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡"/> <meta itemprop="keywords" content="å‰ç«¯,Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T03:11:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="let_code"/> <meta itemprop="url" content="https://juejin.cn/user/4265760847307678"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CopilotKit-ä¸æ»‘è¿æ¥agentå’Œåº”ç”¨-ç†è®ºç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4265760847307678/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    let_code
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:11:52.000Z" title="Wed Nov 26 2025 03:11:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body{overflow:hidden;line-height:1.75;font-size:15px;background-image:linear-gradient(90deg,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0),linear-gradient(1turn,rgba(72,42,10,.05) 5%,rgba(72,42,10,0) 0);background-size:20px 20px;background-position:50%;padding-top:0!important}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{position:relative;display:flex;border-bottom:5px solid #6d4e00;line-height:35px;letter-spacing:1px;font-size:25px;padding-left:25px;color:#664900;text-shadow:1px 1px 1px #8a6200;padding-bottom:0}.markdown-body h1:before{content:"";display:flex;position:absolute;left:0;top:3px;bottom:0;margin:auto;width:20px;height:20px;background-size:20px 20px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC")}.markdown-body h2{position:relative;padding:0 0 0 20px;font-size:20px;font-weight:700;color:#614500}.markdown-body h2:before{content:"";position:absolute;top:3px;bottom:0;left:0;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAQlBMVEVHcEwlRnqtZBj76q4lRnolRnolRnolRnolRnokRnr/gGtrVUeLXDBKTl+hYSHasW7Ik0zs0JG4dCvUdEE0SW+rYxrLQJfjAAAACnRSTlMA////0H/xUaMi5MCoTwAACfVJREFUeNrtnQl3qygUgJ9GXAqosfL//+pgmgXwXmRNJGdu55xO+6rx8+6I8O9fehmGriN93zdN07bVXdpW/ih/SbpuGP6dXbpOXv7z2i3S9ISck2eQOnAhMHG64VQQbmrAaM4B05GmipaGdB+m6BNQPBXzMYtKR3EPbB/RS5eY4g+lIW9WBqnySCvVMrzRpqqs0g9nwVg5p1KYlHEchRT5bftp+y3n6xlQDjAkABtrKULU9f377ev+4/1/NiT+URRiZRhrcZP6WLa/Gq005BORaqXsdYEuHPIP798ZxSyt6d5sVfxJESRCsvB32lfXwhRjnUBGmKXNoJQe04VIASJqRC/9G7yDsyQMiloYz+0pHYghEoPISAGgpDSvHsCoMwmA0mfjSG5UOsqah2RodkljzMkhZZdamiEDB8+Nsbk9T04yGNljDXGOZZ6u0+Tj9DuvbyNJBuPO0ABtLNPlJtfZJ4CNNCWJoY8gddwxNpm9YrHh9DEkBoeMud4Kma8XRZaYpBJOYvg59U9wOsblMvmGrzQe30dyqFZ1dxPfO0FT5BOdw989THVs4q1TFk+iN4PMu7CaLpd4EJOExNaJLE4d0xQKYpJ0cY5Ozcwwu6WOu2cs9TUYxPB4b4fvLRzTUXbT1HH7y0BnB0j6CAehkPFfFzd1TMsi6sU1/P4VM9NiISHBlYnBMR+kad075sXlmMehj1twnfTUqJH4GJfqIKte7S72emPnHbdiYHIB0e6ATjKq1UoTaFh6wBL2csMIVo9fH/v6QRHAgoxrOHQQxG/36tC1ODmGOeBGBRmXalgcdhDQ1xF1vI6a3DF2d4r7G1enOUgNOshlFq7qUCxrca9ldiCam7ilxRbP6JbOYsYtfLFmkcXEgLG1DN/6eroxHjqh5bh+Uw27e1oWVK7pN+AqwzUcq/UYTPw8nWufLFBHN2zcxLRYlmGPs6rA2Wy0uJe/E7TknbHIa1WH1bLA8DAj3JpxET+FCNCWZ5uNT6jxTPZK/1mXoCBeKlGLRT2lP69XN3XdqqCojKX1ZVda6iD2McjeXSHa0I+AHd2InGAJgjRVM6gOBfygDrarRJnho6eQBbrns+HkcNUCWtYClJa66qFgPbqqZEBTCOAgRqxCOhQBWpZeIC6QBq91hEoI5unTjsMsK9DCFigY9WNn19hgVCrELalrTw6WnYMYzjHhQ2/7G2xTx1HvwpzSe4cVi5ORQQwMW9+72FU5L4gGsa6Yu1RcDeIhs64Qs8izt0vGH+n9/IKaIlYpM2UqkYOrwwq5CgBjWpyGtxaonxe4KaJ3hx+7O0HaqVkxLBPj8FmBVmjNevIUFhUuDmMq5NDV9RwyPe/95IvxAhG7ymqxHGE5sZJL2kPLUhUinkXfrnFwGFwXD99djNLSFh/meXEb2B6Oyiwm0I7BC+OlTlOVPk9K8CIYzu5YHwKDTI6XAo5lz3WEqEXwQRKhh5cyLa6D81P4PXBw984as9YaGXHwx4Ba8rmOldUat/BHt9cQ38AaljnBdCJqs60OcXVDJZP//ZwSWtV9FpHNtgg22KuYx/U2tB5Mcp1TYOiphNhiFjgWeJ3DL2OZpuuUisIoUyzZEJ76I+LmyqWdv8LwnEiwMYczihjxeqtBsuFJSTg2oD1ETQx4v6D1VleSZW1xCwvAfVGWpQ069kgrQksAUW2rReYzsboIjSABuDQX0QJwB9cnZVgWVgE31vrklAJnEmVObykgYCk/VGX5OlpuKb5eiovUAvJ2tMstw0kIkNdpiSA91K6XA6K8CVCyr4PePhTo65q3DyX7OpTbSVk1PB62mhJ9HSpSqtKaESxsFRm0tLBVcvTV+vbBrLRK4hC7aitN9B0ZpX6vNMgjGIt5ZdmMv32KrmprD1afsPd4FEhThK0+WfTl3kpd482AGvG3jQdZK1+t8ireDswhofigRb3fxfI/4jj+xkffUX/1ccxxhEP9qyyBEH9Cx9vhf8TB7eiSpBHjZVSa4whQMJC1TqIR6q8RERtjOr2ID0yx3oYi0oAIvZCPz4eG64p3ObuREeOHUIR3MBVJwq9yll5P7KHdiPBOiOoRa/AjXz21J3k04l+i8OjErj4kaXWQiIVO/EvA+KLRAEnUVomtjPd6SvR3RLoeMT54nKFH1EqtkkEGFaQuTlSQrsxhRiOIt51S/Ho8B11+FUlwRaHnU4utEI38/mgSjRJ8PhWEtN6Z6WcncQOU4efjKoh3zfi7/+DfhPrwOZ9a/iYBiVJJxPlei3CqIDTYEqAPFow5/c71fAdVIwmo4n+cTIGbr2n9NULAE5ifcNNS63hvEOFk0wxYnICBBZ0I9xERBVILF0uggNdxuOkR4S6ngvgPmArzHv4KpMKGQFjQ+Rw6q9dC6R6dgZaJF7RVWIH0BTY9h+fz0ohHOyLuy+He/hN4GUR3/RxcBx2f76izarI9CaXmzRmhNQuSfIgJkva5GzN6HJbhQxCNsDGDSh56plmef6sg2eaXPsYBt5W+H6VE6omG6hOS1w4hiTWiThbJ1YO+RSO1vrpMlomf6nhQGz0m7qT6W04XOUHyzhZ4rkG+0hxL66oDW9mnPWyL3TMmssxyQUwr01CHX7b2OvUIaqS48TnMtAoEQTQixJeAlDfSiGmk/l8jpwIpTyFqOfeNIHWBooC036ERtUQp2tm/CKT5jjySbxTlvUVj2yhjvyWDVL3yfKRojXwLSEWUp7q0PBAKPp7m5YGoT3WH7wAZ1BeOywNZv3Gak/LIqriwxbQ5jaTcsEW1eb+FvoWo+zr5V/IUOvNtsapU2zJXSyj0xVB13sPfq0kkZA7dubIIKXIlJ8Cy7u+BN22RVcr+peOuxHdcBbA04FAVmEoEtO5vX55K4KVZS1QJvBBzU1rgUl8JapBNYIowLoZtD9NWRTWKqqe36L48BSz8QPH9epqqIDehlh2UuqocEmrdV7AvhuRoM74m80yeDIEX3ppreNN235FxV58DNjhswn5K8zK21+5ctjut6NmUIoy9tVvitnHr2VDM3ahtW8KQ/Vbsp9GGiWHfk8skyTSFz9/HdxhHe4uR/RxX/mG1SGXwypcDJNmCMfucZ/C1CuCQUbiBUDYbe7tiRkZX8GIat50d+wqR1fdN7ygGzrHrcN4kGFHK02cil5M6INgQVsvnNz77T5PqUFYJJInYmIBplJfP5On4eiOwYfhuCD44oLyYVs43rI1rk3H7usttzq8Qo3j84vavN9mOkAeuq8dHEd9NtCVKX51Oen+MM6IEYvz5StOehKLpIjD+nKU5AQWJpLizdB+1sb5LQvFRxbSJVGHmSdK/0WWaPguEYmcSJ68aWkK6rAw6jwSSCmrTWVHT96R7HwHANEgqybVJL+E2vE2q7Uu91Gr73SbbNUvZDtiOlCeIv4r/AI+0XUwz1lvcAAAAAElFTkSuQmCC");background-size:100% 100%;background-repeat:no-repeat;width:15px;height:15px;margin:auto}.markdown-body h3{width:100%;text-align:left;margin:20px 10px 0 0;font-size:18px;font-weight:700;display:inline-block;padding-left:10px;padding-bottom:0;border-left:5px solid #8f6600;color:#614500}.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;color:#a37400}.markdown-body h4{font-size:17px}.markdown-body h5,.markdown-body h6{display:flex;align-items:center}.markdown-body h5:after,.markdown-body h6:after{display:inline-block;border:2px solid #fff6e0;color:rgba(189,134,0,.5);border-radius:50%;text-align:center;margin-left:5px}.markdown-body h5{font-size:14px}.markdown-body h5:after{content:"5";width:15px;height:15px;line-height:15px;font-size:13px}.markdown-body h6{font-size:12px}.markdown-body h6:after{content:"6";width:13px;height:13px;line-height:13px;font-size:12px}.markdown-body p{color:#412c0c;letter-spacing:1px;font-weight:400;margin-bottom:16px}.markdown-body img{max-width:100%;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#755300;font-weight:400;border-bottom:1px solid #755300;font-weight:bolder;text-decoration:none}.markdown-body table{width:100%!important;margin:0;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border-spacing:0}.markdown-body table img{box-shadow:none}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body thead tr th{text-align:center}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;box-sizing:border-box;border:1px solid rgba(72,42,10,.1)}.markdown-body blockquote{position:relative;text-size-adjust:100%;line-height:25px;font-weight:400;border-radius:10px;font-style:normal;text-align:left;box-sizing:inherit;border:1px solid #ffd87a;background-color:rgba(189,134,0,.5);margin:20px 0;padding:20px}.markdown-body blockquote p{color:#fff6e0;letter-spacing:2px;margin:0}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;color:#cc9100;font-size:34px;font-weight:700}.markdown-body blockquote:before{content:"â";top:8px;left:5px}.markdown-body blockquote:after{content:"â";right:5px;bottom:-5px}.markdown-body strong{color:#c28a00;font-weight:bolder}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{color:#c28a00}.markdown-body em strong{font-style:normal;color:#c28a00;background-color:#8a6200}.markdown-body s{color:#c28a00}.markdown-body hr{border-top:1px solid #805b00}.markdown-body code,.markdown-body li code,.markdown-body p code{color:#996d00;background-color:rgba(130,98,0,.3)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit;color:#858585;font-family:bold;letter-spacing:1px}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection,.markdown-body img::selection{color:rgba(189,134,0,.5);background-color:#fff}.markdown-body a::selection,.markdown-body b::selection,.markdown-body del::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:transparent}.markdown-body pre&gt;code::selection{background-color:rgba(189,134,0,.5)}.markdown-body .math .math-inline::selection,.markdown-body blockquote::selection,.markdown-body ol::selection,.markdown-body p::selection,.markdown-body strong::selection,.markdown-body table::selection,.markdown-body ul::selection{background-color:rgba(189,134,0,.5)}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">CopilotKitæ˜¯ä»€ä¹ˆ</h2>
<p><code>CopilotKit</code> å°†åº”ç”¨çš„é€»è¾‘ã€çŠ¶æ€å’Œç”¨æˆ·ä¸Šä¸‹æ–‡è¿æ¥åˆ° <code>AI</code> ä»£ç†ã€‚æä¾›äº†æ„å»ºã€éƒ¨ç½²å’Œç›‘æ§ <code>AI</code> è¾…åŠ©åŠŸèƒ½çš„å·¥å…·ï¼Œè¿™äº›åŠŸèƒ½æ„Ÿè§‰ç›´è§‚ã€æœ‰ç”¨ä¸”æ·±åº¦é›†æˆã€‚</p>
<h2 data-id="heading-1">CopilotKitç‰¹ç‚¹</h2>
<ul>
<li><code>Generative UI</code>(ç”Ÿæˆå¼ UI)ï¼šä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç°<code>agent</code>çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</li>
<li><code>Human in the Loop</code>(äººæœºååŒ)ï¼šç”¨æˆ·å¯ä»¥åœ¨å…³é”®ç‚¹æŒ‡å¯¼<code>agent</code>ã€‚å®ç°æ›´å¯é çš„è¾“å‡ºã€‚</li>
<li><code>Shared State</code>(å…±äº«çŠ¶æ€)ï¼šagentå’Œåº”ç”¨çŠ¶æ€ä¿æŒåŒæ­¥ã€‚<code>agent</code>å¯ä»¥æŸ¥çœ‹åº”ç”¨ä¸­çš„æ‰€æœ‰çŠ¶æ€ï¼Œåº”ç”¨å¯ä»¥å®æ—¶å“åº”<code>agent</code>ã€‚</li>
</ul>
<h2 data-id="heading-2">CopilotKitå’ŒLangGraphçš„å…³ç³»</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adb67101b1754134b048eda4e40a8540~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=NOWH6B6nYzD30Eb%2BjSq1maA7XRM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">èŠå¤©ç»„ä»¶</h2>
<p>å‰ä¸‰ä¸ªç»„ä»¶ç”±<code>@copilotkit/react-ui</code>æä¾›ã€‚</p>
<ol>
<li><code>CopilotChat</code> ï¼šçµæ´»çš„èŠå¤©ç•Œé¢ç»„ä»¶ã€‚</li>
<li><code>CopilotSidebar</code> ï¼šå¯æŠ˜å å’Œæ‰©å±•çš„ä¾§è¾¹æ èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>CopilotPopup</code> ï¼š å¯ä»¥æ‰“å¼€å’Œå…³é—­çš„æµ®åŠ¨èŠå¤©ç»„ä»¶ã€‚</li>
<li><code>HeadLess UI</code> : æ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ã€‚
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">import</span> { useCopilotChat } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Role</span>, <span class="hljs-title class_">TextMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">CustomChatInterface</span>(<span class="hljs-params"/>) {
<span class="hljs-keyword">const</span> {
    visibleMessages,
    appendMessage,
    setMessages,
    deleteMessage,
    reloadMessages,
    stopGeneration,
    isLoading,
} = <span class="hljs-title function_">useCopilotChat</span>();

<span class="hljs-keyword">const</span> <span class="hljs-title function_">sendMessage</span> = (<span class="hljs-params">content: <span class="hljs-built_in">string</span></span>) =&gt; {
    <span class="hljs-title function_">appendMessage</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({ content, <span class="hljs-attr">role</span>: <span class="hljs-title class_">Role</span>.<span class="hljs-property">User</span> }));
};

<span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    {/* Implement your custom chat UI here */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-4">è®¾ç½®èŠå¤©ç»„ä»¶çš„æ ·å¼</h3>
<ul>
<li>æ ·å¼ï¼šä¸»è¦æ€è·¯æ˜¯é€šè¿‡<strong>æ ·å¼è¦†ç›–</strong>çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼çš„è®¾å®šã€‚æ”¯æŒé€šè¿‡csså˜é‡ã€cssç±»çš„æ–¹å¼è¿›è¡Œç»„ä»¶æ ·å¼å’Œå­—ä½“çš„å®šä¹‰ã€‚</li>
<li>å›¾æ ‡ï¼šé€šè¿‡ç»„ä»¶çš„<code>icons</code>å±æ€§è¿›è¡Œå®šä¹‰ã€‚</li>
<li>æ ‡ç­¾ï¼šé€šè¿‡ç»„ä»¶çš„<code>labels</code>å±æ€§è¿›è¡Œè‡ªå®šä¹‰ã€‚</li>
</ul>
<p>å…·ä½“ç±»åã€å˜é‡åã€iconså±æ€§ã€labelså±æ€§<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fcustom-look-and-feel%2Fcustomize-built-in-ui-components%23css-variables-easiest" target="_blank" title="https://docs.copilotkit.ai/langgraph/custom-look-and-feel/customize-built-in-ui-components#css-variables-easiest" ref="nofollow noopener noreferrer">å‚è€ƒè¿™é‡Œ</a></p>
<h3 data-id="heading-5">è‡ªå®šä¹‰å­ç»„ä»¶</h3>
<p>æ”¯æŒé€šè¿‡ç»„ä»¶çš„<code>props</code>å°†è‡ªå®šä¹‰çš„å­ç»„ä»¶ä¼ é€’è¿›å»ï¼Œä»è€Œå®ç°å­ç»„ä»¶çš„è‡ªå®šä¹‰ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { type <span class="hljs-title class_">AssistantMessageProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { useChatContext } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Markdown</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SparklesIcon</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@heroicons/react/24/outline"</span>;

<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotSidebar</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-ui"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">"@copilotkit/react-ui/styles.css"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">CustomAssistantMessage</span> = (<span class="hljs-params">props: AssistantMessageProps</span>) =&gt; {
  <span class="hljs-keyword">const</span> { icons } = <span class="hljs-title function_">useChatContext</span>();
  <span class="hljs-keyword">const</span> { message, isLoading, subComponent } = props;

  <span class="hljs-keyword">const</span> avatarStyles = <span class="hljs-string">"bg-zinc-400 border-zinc-500 shadow-lg min-h-10 min-w-10 rounded-full text-white flex items-center justify-center"</span>;
  <span class="hljs-keyword">const</span> messageStyles = <span class="hljs-string">"px-4 rounded-xl pt-2"</span>;

  <span class="hljs-keyword">const</span> avatar = <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{avatarStyles}</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">SparklesIcon</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"h-6 w-6"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"py-2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex items-start"</span>&gt;</span>
        {!subComponent &amp;&amp; avatar}
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{messageStyles}</span>&gt;</span>
          {message &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">Markdown</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{message.content</span> || ""} /&gt;</span> }
          {isLoading &amp;&amp; icons.spinnerIcon}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"my-2"</span>&gt;</span>{subComponent}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};


<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CopilotKit</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">CopilotSidebar</span> <span class="hljs-attr">AssistantMessage</span>=<span class="hljs-string">{CustomAssistantMessage}</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">CopilotKit</span>&gt;</span></span>
</code></pre>
<p>å­ç»„ä»¶åŒ…æ‹¬ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6f9933b815f4cb9b26dccbc18c95b94~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGV0X2NvZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764731511&amp;x-signature=zXAVBmOlJGjLy%2FfXYE3t%2FDo9a7A%3D" alt="image.png" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œmarkdownçš„æ¸²æŸ“é»˜è®¤ä½¿ç”¨<code>react-markdown</code>ã€‚æ”¯æŒé€šè¿‡<code>markdownTagRenderers</code>å±æ€§æ¥è‡ªå®šä¹‰markdownæ¸²æŸ“ç»„ä»¶ã€‚</p>
<h4 data-id="heading-6">Actions</h4>
<p>å…è®¸ LLM ä¸åº”ç”¨ç¨‹åºçš„åŠŸèƒ½äº¤äº’ã€‚å½“ LLM è°ƒç”¨ Action æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å¯è§†åŒ–å…¶æ‰§è¡Œå’Œç»“æœã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span> <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
<span class="hljs-keyword">import</span> { useCopilotAction } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Your custom components (examples - implement these in your app)</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">LoadingView</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./loading-view"</span>; <span class="hljs-comment">// Your loading component</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CalendarMeetingCardComponent</span>, type <span class="hljs-title class_">CalendarMeetingCardProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./calendar-meeting-card"</span>; <span class="hljs-comment">// Your meeting card component</span>
 
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">YourComponent</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">useCopilotAction</span>({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"showCalendarMeeting"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Displays calendar meeting information"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"date"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting date (YYYY-MM-DD)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"time"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Meeting time (HH:mm)"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>
      },
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"meetingName"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"Name of the meeting"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">false</span>
      }
    ],
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ status, args }</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> { date, time, meetingName } = args;
 
      <span class="hljs-keyword">if</span> (status === <span class="hljs-string">'inProgress'</span>) {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">LoadingView</span> /&gt;</span></span>; <span class="hljs-comment">// Your own component for loading state</span>
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-attr">meetingProps</span>: <span class="hljs-title class_">CalendarMeetingCardProps</span> = {
          <span class="hljs-attr">date</span>: date,
          time,
          meetingName
        };
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">CalendarMeetingCardComponent</span> {<span class="hljs-attr">...meetingProps</span>} /&gt;</span></span>;
      }
    },
  });
 
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>...<span class="hljs-tag">&lt;/&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-7">Agent State</h4>
<p><code>Agent State</code>ç»„ä»¶å…è®¸å¯è§†åŒ– <code>CoAgents</code> çš„å†…éƒ¨çŠ¶æ€å’Œè¿›åº¦ã€‚ä½¿ç”¨ <code>CoAgents</code> æ—¶ï¼Œå¯ä»¥æä¾›è‡ªå®šä¹‰ç»„ä»¶æ¥å‘ˆç°ä»£ç†çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-string">"use client"</span>; <span class="hljs-comment">// only necessary if you are using Next.js with the App Router.</span>
 
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Progress</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"./progress"</span>;

type <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">logs</span>: string[];
}

useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"basic_agent"</span>,
  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state, nodeName, status }</span>) =&gt;</span> {
    <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">logs</span> || state.<span class="hljs-property">logs</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    <span class="hljs-comment">// Progress is a component we are omitting from this example for brevity.</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Progress</span> <span class="hljs-attr">logs</span>=<span class="hljs-string">{state.logs}</span> /&gt;</span></span>; 
  },
});
</code></pre>
<h2 data-id="heading-8">å‰ç«¯å·¥å…·</h2>
<p>å‰ç«¯å·¥å…·æŒ‡çš„æ˜¯å‰ç«¯å®šä¹‰çš„å‡½æ•°å¯ä»¥è¢« agent è°ƒç”¨ã€‚å½“å‡½æ•°è¢« agent è°ƒç”¨æ—¶ï¼Œå‡½æ•°åœ¨å®¢æˆ·ç«¯æ‰§è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒï¼Œä»è€Œå®ç°agentå¯¹UIçš„æ§åˆ¶å’Œäººæœºäº¤äº’ã€‚</p>
<p>å‰ç«¯å·¥å…·å¯ä»¥è½»æ¾å®ç°ï¼š</p>
<ol>
<li>è¯»å–æˆ–ä¿®æ”¹ React ç»„ä»¶çŠ¶æ€</li>
<li>è®¿é—®æµè§ˆå™¨ APIï¼Œå¦‚ localStorageã€sessionStorage æˆ– cookie</li>
<li>è§¦å‘ UI æ›´æ–°æˆ–åŠ¨ç”»</li>
<li>ä¸ç¬¬ä¸‰æ–¹å‰ç«¯åº“äº¤äº’</li>
<li>æ‰§è¡Œéœ€è¦ç”¨æˆ·å³æ—¶æµè§ˆä¸Šä¸‹æ–‡çš„æ“ä½œ</li>
</ol>
<h3 data-id="heading-9">å®ç°</h3>
<h4 data-id="heading-10">1.åˆ›å»ºå‰ç«¯å·¥å…·</h4>
<p>éœ€è¦ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">//page.tsx </span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ name }) =&gt; {
      <span class="hljs-title function_">alert</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">${name}</span>!`</span>);
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h4 data-id="heading-11">2.ä¿®æ”¹ä»£ç†</h4>
<p>å®‰è£… CopilotKit SDK <code>npm install @copilotkit/sdk-js</code>ã€‚</p>
<p>è¦è®¿é—® CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œå¯ä»¥åœ¨ä»£ç†çš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿ CopilotKitState ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ä¹‹åï¼Œä»£ç†çš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</p>
<p>agentè°ƒç”¨å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h2 data-id="heading-12">Generative UI</h2>
<p>ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶å®æ—¶å‘ˆç° agent çš„çŠ¶æ€ã€è¿›åº¦ã€è¾“å‡ºå’Œå·¥å…·è°ƒç”¨ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼ä½¿ç”¨ç”Ÿæˆå¼UIï¼š</p>
<ol>
<li>åç«¯å·¥å…·ï¼šé€šè¿‡ç”Ÿæˆå¼UIç»„ä»¶æ¸²æŸ“å·¥å…·çš„è°ƒç”¨</li>
<li>å‰ç«¯å·¥å…·ï¼šä¸ºagentæä¾›å‰ç«¯å·¥å…·æ¥æ˜¾ç¤ºè‡ªå®šä¹‰ç»„ä»¶å¹¶ä¸”é©±åŠ¨UI</li>
<li>agent çŠ¶æ€ï¼šç”¨è‡ªå®šä¹‰ç»„ä»¶æ¥æ˜¾ç¤ºagentçš„çŠ¶æ€ã€è¿›åº¦å’Œè¾“å‡º</li>
</ol>
<h3 data-id="heading-13">åç«¯å·¥å…·</h3>
<p>å·¥å…·æ˜¯ LLM è°ƒç”¨é¢„å®šä¹‰çš„ï¼ˆé€šå¸¸æ˜¯ç¡®å®šæ€§å‡½æ•°ï¼‰çš„ä¸€ç§æ–¹å¼ã€‚CopilotKit å…è®¸åœ¨ UI ä¸­å°†è¿™äº›å·¥å…·å‘ˆç°ä¸ºè‡ªå®šä¹‰ç»„ä»¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºç”Ÿæˆå¼ UIã€‚</p>
<p>ç®€è€Œè¨€ä¹‹å°±æ˜¯å…è®¸æˆ‘ä»¬å‘ç”¨æˆ·å±•ç¤ºagentæ­£åœ¨æ‰§è¡Œçš„æ“ä½œï¼Œå°¤å…¶æ˜¯å½“æˆ‘ä»¬è°ƒç”¨å·¥å…·æ—¶ï¼Œå…è®¸å®Œå…¨è‡ªå®šä¹‰å·¥å…·åœ¨èŠå¤©ä¸­çš„å‘ˆç°æ–¹å¼ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">const</span> get_weather = <span class="hljs-title function_">tool</span>(
  <span class="hljs-function">(<span class="hljs-params">args</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`The weather for <span class="hljs-subst">${args.location}</span> is 70 degrees.`</span>;
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Get the weather for a given location."</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">location</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"The location to get weather for"</span>),
    }),
  }
);

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">temperature</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> });
  <span class="hljs-keyword">const</span> modelWithTools = model.<span class="hljs-title function_">bindTools</span>([get_weather]); 

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a helpful assistant."</span>),
    ...state.<span class="hljs-property">messages</span>,
  ], config);

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>å‰ç«¯é€šè¿‡<code>useCopilotAction</code>é’©å­åœ¨UIä¸­å‘ˆç°ï¼š</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx  </span>
<span class="hljs-keyword">import</span> { useRenderToolCall } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useRenderToolCall</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"get_weather"</span>,<span class="hljs-comment">// æ³¨æ„nameä¿æŒä¸€è‡´</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{status, args}</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"text-gray-500 mt-2"</span>&gt;</span>
          {status !== "complete" &amp;&amp; "Calling weather API..."}
          {status === "complete" &amp;&amp; `Called the weather API for ${args.location}.`}
        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><code>useDefaultTool</code> æ•è·æ‰€æœ‰æ²¡æœ‰ä¸“ç”¨æ¸²æŸ“å™¨çš„å·¥å…·ã€‚</p>
<pre><code class="hljs language-jsx" lang="jsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useDefaultTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useDefaultTool</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ name, args, status, result }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">color:</span> "<span class="hljs-attr">black</span>" }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>
            {status === "complete" ? "âœ“" : "â³"}
            {name}
          <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          {status === "complete" &amp;&amp; result &amp;&amp; (
            <span class="hljs-tag">&lt;<span class="hljs-name">pre</span>&gt;</span>{JSON.stringify(result, null, 2)}<span class="hljs-tag">&lt;/<span class="hljs-name">pre</span>&gt;</span>
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-14">å‰ç«¯å·¥å…·</h3>
<p>å®šä¹‰ LangGraph agent å¯ä»¥è°ƒç”¨çš„å®¢æˆ·ç«¯å‡½æ•°ï¼Œæ‰§è¡Œå®Œå…¨åœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸­è¿›è¡Œã€‚å½“agentè°ƒç”¨å‰ç«¯å·¥å…·æ—¶ï¼Œé€»è¾‘ä¼šåœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œä½¿agentå¯ä»¥ç›´æ¥è®¿é—®å‰ç«¯ç¯å¢ƒã€‚ä¸€èˆ¬åœ¨agentéœ€è¦å’Œå®¢æˆ·ç«¯äº¤äº’æ—¶ä½¿ç”¨ã€‚</p>
<p>ä½¿ç”¨ <code>useFrontendTool</code> é’©å­åˆ›å»ºä¸€ä¸ªå‰ç«¯å·¥å…·:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">// page.tsx</span>
<span class="hljs-keyword">import</span> { useFrontendTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Page</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-title function_">useFrontendTool</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sayHello"</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">"Say hello to the user"</span>,
    <span class="hljs-attr">parameters</span>: [
      {
        <span class="hljs-attr">name</span>: <span class="hljs-string">"name"</span>,
        <span class="hljs-attr">type</span>: <span class="hljs-string">"string"</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">"The name of the user to say hello to"</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    ],
    <span class="hljs-title function_">handler</span>(<span class="hljs-params">{ name }</span>) {
      <span class="hljs-comment">// Handler returns the result of the tool call</span>
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">currentURLPath</span>: <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>, <span class="hljs-attr">userName</span>: name };
    },
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ args }</span>) =&gt;</span> {
      <span class="hljs-comment">// Renders UI based on the data of the tool call</span>
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Hello, {args.name}!<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>You're currently on {window.location.href}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    },
  });

  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>agent è®¿é—®å‰ç«¯å·¥å…·ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-comment">//ç°åœ¨ï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-15">agent çŠ¶æ€</h3>
<p>æ‰€æœ‰ LangGraph agent éƒ½æ˜¯çŠ¶æ€åŒ–çš„ã€‚è¿™æ„å‘³ç€å½“ agent é€šè¿‡èŠ‚ç‚¹æ—¶ï¼Œä¸€ä¸ªçŠ¶æ€å¯¹è±¡ä¼šåœ¨å®ƒä»¬ä¹‹é—´ä¼ é€’ï¼Œä»¥ä¿æŒä¼šè¯çš„æ•´ä½“çŠ¶æ€ã€‚CopilotKit å…è®¸ä½¿ç”¨è‡ªå®šä¹‰ UI ç»„ä»¶(ç”Ÿæˆå¼ UI)åœ¨åº”ç”¨ç¨‹åºä¸­å‘ˆç°æ­¤çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">RunnableConfig</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/runnables"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { copilotkitEmitState, <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">Search</span> = {
  <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">searches</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-title class_">Search</span>[]&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">searches</span> = [
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Initial research"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Retrieving sources"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
    { <span class="hljs-attr">query</span>: <span class="hljs-string">"Forming an answer"</span>, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> },
  ];

  <span class="hljs-comment">// We can call copilotkit_emit_state to emit updated state</span>
  <span class="hljs-comment">// before a node finishes</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);

  <span class="hljs-comment">// Simulate state updates</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> search <span class="hljs-keyword">of</span> state.<span class="hljs-property">searches</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    search.<span class="hljs-property">done</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-comment">// We can also emit updates in a loop to simulate progress</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
  }

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>([
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({ <span class="hljs-attr">content</span>: <span class="hljs-string">"You are a helpful assistant."</span>}),
    ...state.<span class="hljs-property">messages</span>,
  ], config);
</code></pre>
<p>å‰ç«¯é€šè¿‡ <code>useCoAgentStateRender</code> åœ¨èŠå¤©ä¸­å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-comment">// For type safety, redefine the state of the agent. If you're using</span>
<span class="hljs-comment">// using LangGraph JS you can import the type here and share it.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-comment">// styles omitted for brevity</span>
  useCoAgentStateRender&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}{search.done ? "" : "..."}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    ),
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–è¿˜å…è®¸åœ¨èŠå¤©ä¹‹å¤–å‘ˆç°agentçš„çŠ¶æ€:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Define the state of the agent, should match the state of the agent in your LangGraph.</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">searches</span>: {
    <span class="hljs-attr">query</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">done</span>: <span class="hljs-built_in">boolean</span>;
  }[];
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>, <span class="hljs-comment">// the name the agent is served as</span>
  })

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      {/* ... */}
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-col gap-2 mt-4"</span>&gt;</span>
        {state.searches?.map((search, index) =&gt; (
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex flex-row"</span>&gt;</span>
            {search.done ? "âœ…" : "âŒ"} {search.query}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        ))}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )
}
</code></pre>
<h2 data-id="heading-16">Human in the Loop (HITL)</h2>
<p>ç”¨æˆ·ä¸ agent åä½œå¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
<p>ä¸»è¦æœ‰ä¸‰ç§æ–¹å¼å®ç°äººæœºäº¤äº’ï¼š</p>
<ol>
<li>åŸºäºä¸­æ–­</li>
<li>åŸºäºå‰ç«¯å·¥å…·</li>
<li>åŸºäºèŠ‚ç‚¹</li>
</ol>
<h3 data-id="heading-17">åŸºäºä¸­æ–­</h3>
<h4 data-id="heading-18">åŸºç¡€</h4>
<p>éœ€è¦ä¸€ä¸ªçŠ¶æ€å±æ€§æ¥å­˜å‚¨åç§°ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;
<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// This is the state of the agent.</span>
<span class="hljs-comment">// It inherits from the CopilotKitState properties from CopilotKit.</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>åœ¨LangGraph ä»£ç†ä¸­è°ƒç”¨ interruptï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// add the agent state definition from the previous step</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">agentName</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> agentName = state.<span class="hljs-property">agentName</span>
    ?? <span class="hljs-title function_">interrupt</span>(<span class="hljs-string">"Before we start, what would you like to call me?"</span>); 

    <span class="hljs-comment">// Tell the agent its name</span>
    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
        <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant named <span class="hljs-subst">${agentName}</span>...`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
        [systemMessage, ...state.<span class="hljs-property">messages</span>],
        config
    );

    <span class="hljs-keyword">return</span> {
        ...state,
        agentName,
        <span class="hljs-attr">messages</span>: response,
    };
}
</code></pre>
<p>å‰ç«¯ä½¿ç”¨ <code>useLangGraphInterrupt</code> é’©å­ï¼Œä¸ºç»ˆä¸­æ–­æä¾›ä¸€ä¸ªè¦æ¸²æŸ“çš„ç»„ä»¶ï¼Œç„¶åä½¿ç”¨ç”¨æˆ·çš„å“åº”è°ƒç”¨ resolveã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
<span class="hljs-comment">// ...</span>
<span class="hljs-comment">// styles omitted for brevity</span>
<span class="hljs-title function_">useLangGraphInterrupt</span>({
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{event.value}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
                e.preventDefault();
                resolve((e.target as HTMLFormElement).response.value);
            }}&gt;
                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
});
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h4 data-id="heading-19">é«˜çº§</h4>
<p>åœ¨ä»£ç†ä¸­å‘ˆç°å¤šä¸ªä¸­æ–­äº‹ä»¶æ—¶ï¼ŒUI ä¸­çš„å¤šä¸ª <code>useLangGraphInterrupt</code> é’©å­è°ƒç”¨ä¹‹é—´å¯èƒ½ä¼šå‘ç”Ÿå†²çªã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œé’©å­å¯ä»¥æ¥å—ä¸€ä¸ª <code>enabled</code> å‚æ•°ï¼Œè¯¥å‚æ•°å°†æœ‰æ¡ä»¶åœ°åº”ç”¨å®ƒï¼š</p>
<p>å®šä¹‰ä¸¤ä¸ªä¸åŒçš„ä¸­æ–­ï¼Œé€šè¿‡<code>type</code>è¿›è¡ŒåŒºåˆ†ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { interrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>; 
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SystemMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/messages"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;

<span class="hljs-comment">// ... your full state definition</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  state.<span class="hljs-property">approval</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"approval"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"please approve"</span> }); 

  <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">agentName</span>) {
    state.<span class="hljs-property">agentName</span> = <span class="hljs-keyword">await</span> <span class="hljs-title function_">interrupt</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">"ask"</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">"Before we start, what would you like to call me?"</span> }); 
  }

  <span class="hljs-comment">// Tell the agent its name</span>
  <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
    <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant...`</span>,
  });

  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span> }).<span class="hljs-title function_">invoke</span>(
    [systemMessage, ...state.<span class="hljs-property">messages</span>],
    config
  );

  <span class="hljs-keyword">return</span> {
    ...state,
    <span class="hljs-attr">messages</span>: response,
  };
}
</code></pre>
<p>å‰ç«¯å®šä¹‰å¤šä¸ªå¤„ç†ç¨‹åºï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 
<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ApproveComponent</span> = (<span class="hljs-params">{ content, onAnswer }: { content: <span class="hljs-built_in">string</span>; onAnswer: (approved: <span class="hljs-built_in">boolean</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Do you approve?<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(true)}&gt;Approve<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> onAnswer(false)}&gt;Reject<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">AskComponent</span> = (<span class="hljs-params">{ question, onAnswer }: { question: <span class="hljs-built_in">string</span>; onAnswer: (answer: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span> }</span>) =&gt; (
<span class="hljs-comment">// styles omitted for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{question}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">onSubmit</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
            e.preventDefault();
            onAnswer((e.target as HTMLFormElement).response.value);
        }}&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"response"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Enter your response"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>Submit<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// ...</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'ask'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AskComponent</span> <span class="hljs-attr">question</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">enabled</span>: <span class="hljs-function">(<span class="hljs-params">{ eventValue }</span>) =&gt;</span> eventValue.<span class="hljs-property">type</span> === <span class="hljs-string">'approval'</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ApproveComponent</span> <span class="hljs-attr">content</span>=<span class="hljs-string">{event.value.content}</span> <span class="hljs-attr">onAnswer</span>=<span class="hljs-string">{answer</span> =&gt;</span> resolve(answer)} /&gt;</span>
        )
    });

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>é€‰æ‹©è‡ªå®šä¹‰èŠå¤© UI æ—¶ï¼ŒæŸäº›æƒ…å†µå¯èƒ½éœ€è¦é¢„å¤„ç†ä¸­æ–­äº‹ä»¶çš„ä¼ å…¥å€¼ï¼Œç”šè‡³éœ€è¦å®Œå…¨è§£æå®ƒè€Œä¸æ˜¾ç¤ºå…¶ UIã€‚è¿™å¯ä»¥ä½¿ç”¨ <code>handeer</code> å±æ€§æ¥å®ç°ï¼Œè¯¥å±æ€§ä¸éœ€è¦è¿”å›ä¸€ä¸ª React ç»„ä»¶ã€‚ å¤„ç†ç¨‹åºçš„è¿”å›å€¼å°†ä½œä¸ºç»“æœå‚æ•°ä¼ é€’ç»™ render æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-comment">// We will assume an interrupt event in the following shape</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">Department</span> = <span class="hljs-string">'finance'</span> | <span class="hljs-string">'engineering'</span> | <span class="hljs-string">'admin'</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AuthorizationInterruptEvent</span> {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'auth'</span>,
    <span class="hljs-attr">accessDepartment</span>: <span class="hljs-title class_">Department</span>,
}

<span class="hljs-keyword">import</span> { useLangGraphInterrupt } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> [userEmail, setUserEmail] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">email</span>: <span class="hljs-string">'example@user.com'</span> })
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getUserByEmail</span>(<span class="hljs-params">email: <span class="hljs-built_in">string</span></span>): { <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">department</span>: <span class="hljs-title class_">Department</span> } {
        <span class="hljs-comment">// ... an implementation of user fetching</span>
    }

    <span class="hljs-comment">// ...</span>
    <span class="hljs-comment">// styles omitted for brevity</span>
    <span class="hljs-title function_">useLangGraphInterrupt</span>({
        <span class="hljs-attr">handler</span>: <span class="hljs-keyword">async</span> ({ result, event, resolve }) =&gt; {
            <span class="hljs-keyword">const</span> { department } = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserByEmail</span>(userEmail)
            <span class="hljs-keyword">if</span> (event.<span class="hljs-property">value</span>.<span class="hljs-property">accessDepartment</span> === department || department === <span class="hljs-string">'admin'</span>) {
                <span class="hljs-comment">// Following the resolution of the event, we will not proceed to the render method</span>
                <span class="hljs-title function_">resolve</span>({ <span class="hljs-attr">code</span>: <span class="hljs-string">'AUTH_BY_DEPARTMENT'</span> })
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">return</span> { department, userId }
        },
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ result, event, resolve }</span>) =&gt;</span> (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Request for {event.value.type}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Members from {result.department} department cannot access this information<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>You can request access from an administrator to continue.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'REQUEST_AUTH', data: { department: result.department, userId: result.userId } })}
                &gt;
                    Request Access
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                    <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resolve({ code: 'CANCEL' })}
                &gt;
                    Cancel
                <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
        )
    });
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* ... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
}
</code></pre>
<h3 data-id="heading-20">åŸºäºå‰ç«¯å·¥å…·</h3>
<p>å‰ç«¯å·¥å…·å¯ä»¥ç”¨åœ¨å¤šç§æ–¹å¼ä¸Šã€‚å…¶ä¸­ä¸€ç§æ–¹å¼æ˜¯æœ‰äººå·¥ä»‹å…¥çš„æµç¨‹ï¼Œå·¥å…·çš„å“åº”ç”±ç”¨æˆ·çš„å†³å®šæ¥æ§åˆ¶ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æ¨¡æ‹Ÿä¸€ä¸ªç”¨äºæ‰§è¡Œå‘½ä»¤çš„â€œæ‰¹å‡†â€æµç¨‹ã€‚é¦–å…ˆï¼Œä½¿ç”¨<code>useHumanInTheLoop</code>é’©å­æ¥åˆ›å»ºä¸€ä¸ªæç¤ºç”¨æˆ·æ‰¹å‡†çš„å·¥å…·ã€‚</p>
<p>è¦è®¿é—®ç”± CopilotKit æä¾›çš„å‰ç«¯å·¥å…·ï¼Œæ‚¨å¯ä»¥åœ¨agentçš„çŠ¶æ€å®šä¹‰ä¸­ç»§æ‰¿è‡ª CopilotKitState:</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">YourAgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">yourAdditionalProperty</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>, 
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">YourAgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">YourAgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>ç»ä¸Šè¿°æ“ä½œï¼Œagentçš„çŠ¶æ€å°†åŒ…æ‹¬ copilotkit å±æ€§ï¼Œå…¶ä¸­åŒ…å«å¯ä»¥è®¿é—®å’Œè°ƒç”¨çš„å‰ç«¯å·¥å…·ã€‚æ¥ä¸‹æ¥å°±å¯ä»¥è°ƒç”¨å‰ç«¯å·¥å…·æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.tsx</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">agentNode</span>(<span class="hljs-params">state: YourAgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">YourAgentState</span>&gt; {
    <span class="hljs-comment">// Access the tools from the copilotkit property</span>

    <span class="hljs-keyword">const</span> tools = state.<span class="hljs-property">copilotkit</span>?.<span class="hljs-property">actions</span>; 
    <span class="hljs-keyword">const</span> model = <span class="hljs-title class_">ChatOpenAI</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o'</span> }).<span class="hljs-title function_">bindTools</span>(tools);

    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-21">åŸºäºèŠ‚ç‚¹</h3>
<p>LangGraph å’Œ CopilotKit ç°åœ¨éƒ½ä¸é¼“åŠ±ä½¿ç”¨åŸºäºèŠ‚ç‚¹çš„ä¸­æ–­ã€‚ä» LangGraph 0.2.57 å¼€å§‹ï¼Œæ¨èçš„è®¾ç½®æ–­ç‚¹çš„æ–¹æ³•æ˜¯ä½¿ç”¨ interrupt å‡½æ•° ï¼Œå› ä¸ºå®ƒç®€åŒ–äº†äººæœºäº¤äº’æ¨¡å¼ã€‚</p>
<p>æƒ³è¦äº†è§£å¯ä»¥å‚è€ƒ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.copilotkit.ai%2Flanggraph%2Fhuman-in-the-loop%2Fnode-flow" target="_blank" title="https://docs.copilotkit.ai/langgraph/human-in-the-loop/node-flow" ref="nofollow noopener noreferrer">è¿™é‡Œ</a></p>
<h2 data-id="heading-22">çŠ¶æ€å…±äº«</h2>
<p>åœ¨ UI å’Œ LangGraph agent çŠ¶æ€ä¹‹é—´åˆ›å»ºåŒå‘è¿æ¥ã€‚</p>
<h3 data-id="heading-23">è¯»å–agentçŠ¶æ€</h3>
<p>ä¸ä»…å¯ä»¥åœ¨èŠå¤©ç•Œé¢ä¸­ä½¿ç”¨å®æ—¶ä»£ç†çŠ¶æ€ï¼Œè¿˜å¯ä»¥åœ¨åŸç”Ÿåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p>
<p>LangGraph æ˜¯æœ‰çŠ¶æ€çš„ã€‚åœ¨èŠ‚ç‚¹ä¹‹é—´è½¬æ¢æ—¶ï¼Œè¯¥çŠ¶æ€å°†æ›´æ–°å¹¶ä¼ é€’åˆ°ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å‡è®¾agentçŠ¶æ€å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
  <span class="hljs-comment">// If language is not defined, use a default value.</span>
  <span class="hljs-keyword">const</span> language = state.<span class="hljs-property">language</span> ?? <span class="hljs-string">'spanish'</span>

  <span class="hljs-comment">// ... add the rest of the node implementation and use the language variable</span>

  <span class="hljs-keyword">return</span> {
    <span class="hljs-comment">// ... add the rest of state to return</span>
    <span class="hljs-comment">// return the language to make it available for the next nodes &amp; frontend to read</span>
    language
  }
}
</code></pre>
<p>å‰ç«¯è°ƒç”¨ <code>useCoAgent</code> é’©å­ï¼Œä¼ é€’agentçš„åç§°ï¼Œå¹¶é€‰æ‹©æ€§åœ°æä¾›åˆå§‹çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//pages.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span> // [!code highlight]
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p><strong><code>useCoAgent</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°</strong></p>
<h4 data-id="heading-24">åœ¨èŠå¤©ä¸­æ¸²æŸ“ agent çŠ¶æ€</h4>
<p>å¯ä»¥ä½¿ç”¨ <code>useCoAgentStateRender</code> é’©å­ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ...</span>
  <span class="hljs-title function_">useCoAgentStateRender</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">language</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
    },
  });
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong><code>useCoAgentStateRender</code> ä¸­çš„çŠ¶æ€æ˜¯å“åº”å¼çš„ï¼Œå½“ä»£ç†çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ä¼šè‡ªåŠ¨æ›´æ–°ã€‚</strong></p>
<h3 data-id="heading-25">å†™å…¥agentçŠ¶æ€</h3>
<p>å‡è®¾ agent çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agebt.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">language</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>&gt;,
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p><code>useCoAgent</code> è¿”å›ä¸€ä¸ª <code>setState</code> å‡½æ•°ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¯¥å‡½æ•°æ¥æ›´æ–°ä»£ç†çŠ¶æ€ã€‚è°ƒç”¨è¿™ä¸ªå°†æ›´æ–°ä»£ç†çŠ¶æ€å¹¶è§¦å‘ä¾èµ–äºä»£ç†çŠ¶æ€çš„ä»»ä½•å†…å®¹çš„é‡æ–°æ¸²æŸ“ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>; 

<span class="hljs-comment">// Define the agent state type, should match the actual state of your agent</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
  <span class="hljs-attr">language</span>: <span class="hljs-string">"english"</span> | <span class="hljs-string">"spanish"</span>;
}

<span class="hljs-comment">// Example usage in a pseudo React component</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ 
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span> }); 
  };

  <span class="hljs-comment">// ...</span>

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// style excluded for brevity</span>
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Your main content<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Language: {state.language}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{toggleLanguage}</span>&gt;</span>Toggle Language<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-26">é«˜çº§ç”¨æ³•</h4>
<h5 data-id="heading-27">é‡æ–°è¿è¡Œagentï¼Œå¹¶æç¤ºæ›´æ”¹å†…å®¹</h5>
<p>æ–°çš„ agent çŠ¶æ€å°†åœ¨ä¸‹æ¬¡ agent è¿è¡Œæ—¶ä½¿ç”¨ã€‚å¦‚æœæ‚¨æƒ³æ‰‹åŠ¨é‡æ–°è¿è¡Œå®ƒï¼Œè¯·åœ¨<code>useCoAgent</code>é’©å­ä¸Šä½¿ç”¨<code>run</code>å‚æ•°ã€‚
agentå°†é‡æ–°è¿è¡Œï¼Œå®ƒä¸ä»…ä¼šè·å¾—æœ€æ–°çš„æ›´æ–°çŠ¶æ€ï¼Œè¿˜ä¼šè·å¾—å¯èƒ½å–å†³äºä»¥å‰çŠ¶æ€å’Œå½“å‰çŠ¶æ€ä¹‹é—´çš„æ•°æ®å¢é‡çš„æç¤º ã€‚</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/react-core"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">TextMessage</span>, <span class="hljs-title class_">MessageRole</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/runtime-client-gql"</span>;  

<span class="hljs-comment">// ...</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">YourMainContent</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { state, setState, run } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: { <span class="hljs-attr">language</span>: <span class="hljs-string">"spanish"</span> }  <span class="hljs-comment">// optionally provide an initial state</span>
  });

  <span class="hljs-comment">// setup to be called when some event in the app occurs</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleLanguage</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> newLanguage = state.<span class="hljs-property">language</span> === <span class="hljs-string">"english"</span> ? <span class="hljs-string">"spanish"</span> : <span class="hljs-string">"english"</span>;
    <span class="hljs-title function_">setState</span>({ <span class="hljs-attr">language</span>: newLanguage });

    <span class="hljs-comment">// re-run the agent and provide a hint about what's changed</span>
    <span class="hljs-title function_">run</span>(<span class="hljs-function">(<span class="hljs-params">{ previousState, currentState }</span>) =&gt;</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextMessage</span>({
        <span class="hljs-attr">role</span>: <span class="hljs-title class_">MessageRole</span>.<span class="hljs-property">User</span>,
        <span class="hljs-attr">content</span>: <span class="hljs-string">`the language has been updated to <span class="hljs-subst">${currentState.language}</span>`</span>,
      });
    });
  };

  <span class="hljs-keyword">return</span> (
    <span class="hljs-comment">// ...</span>
  );
}
</code></pre>
<h3 data-id="heading-28">agentçŠ¶æ€è¾“å…¥å’Œè¾“å‡º</h3>
<p>æœ‰äº›å±æ€§æ˜¯å†…éƒ¨å¤„ç†çš„ï¼Œè€Œå¦ä¸€äº›åˆ™æ˜¯ UI ä¼ é€’ç”¨æˆ·è¾“å…¥çš„æ–¹å¼ã€‚æ­¤å¤–ï¼Œæœ‰äº›çŠ¶æ€å±æ€§åŒ…å«å¤§é‡ä¿¡æ¯ã€‚åœ¨agentå’Œ UI ä¹‹é—´æ¥å›åŒæ­¥å®ƒä»¬å¯èƒ½æˆæœ¬é«˜æ˜‚ï¼Œè€Œä¸”å¯èƒ½æ²¡æœ‰å®é™…å¥½å¤„ã€‚</p>
<p>å‡è®¾çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
  ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
  <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;, <span class="hljs-comment">//æœŸæœ›LLMå›ç­”çš„é—®é¢˜</span>
  <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,<span class="hljs-comment">//LLMå›åº”çš„ç­”æ¡ˆ</span>
  <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,<span class="hljs-comment">//ç”¨äºLLMå›ç­”é—®é¢˜ï¼Œä¸åº”å‘ç”¨æˆ·åŒæ­¥</span>
})
</code></pre>
<p>agentå®šä¹‰è¾“å…¥è¾“å‡ºï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

  <span class="hljs-comment">// Divide the state to 3 parts</span>

  <span class="hljs-comment">// An input schema for inputs you are willing to accept from the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">InputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">question</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// Output schema for output you are willing to pass to the frontend</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">OutputAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">answer</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>&gt;,
  });

  <span class="hljs-comment">// The full schema, including the inputs, outputs and internal state ("resources" in our case)</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">OutputAnnotation</span>.<span class="hljs-property">spec</span>,
    ...<span class="hljs-title class_">InputAnnotation</span>.<span class="hljs-property">spec</span>,
    <span class="hljs-attr">resources</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,
  });

  <span class="hljs-comment">// Define a typed state that supports the entire</span>
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;

  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">answerNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>()

    <span class="hljs-keyword">const</span> systemMessage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>({
      <span class="hljs-attr">content</span>: <span class="hljs-string">`You are a helpful assistant. Answer the question: <span class="hljs-subst">${state.question}</span>.`</span>,
    });

    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> modelWithTools.<span class="hljs-title function_">invoke</span>(
      [systemMessage, ...state.<span class="hljs-property">messages</span>],
      config
    );

    <span class="hljs-comment">// ...add the rest of the agent implementation</span>
    <span class="hljs-comment">// extract the answer, which will be assigned to the state soon</span>
    <span class="hljs-keyword">const</span> answer = response.<span class="hljs-property">content</span>

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">messages</span>: response,
      <span class="hljs-comment">// include the answer in the returned state</span>
      answer,
    }
  }

  <span class="hljs-comment">// finally, before compiling the graph, we define the 3 state components</span>
  <span class="hljs-keyword">const</span> workflow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StateGraph</span>({
    <span class="hljs-attr">input</span>: <span class="hljs-title class_">InputAnnotation</span>,
    <span class="hljs-attr">output</span>: <span class="hljs-title class_">OutputAnnotation</span>,
    <span class="hljs-comment">// @ts-expect-error -- LangGraph does not expect a "full schema with internal properties".</span>
    <span class="hljs-attr">stateSchema</span>: <span class="hljs-title class_">AgentStateAnnotation</span>,
  })
    .<span class="hljs-title function_">addNode</span>(<span class="hljs-string">"answer_node"</span>, answerNode) <span class="hljs-comment">// add all the different nodes and edges and compile the graph</span>
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-variable constant_">START</span>, <span class="hljs-string">"answer_node"</span>)
    .<span class="hljs-title function_">addEdge</span>(<span class="hljs-string">"answer_node"</span>, <span class="hljs-variable constant_">END</span>)
  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> graph = workflow.<span class="hljs-title function_">compile</span>()
</code></pre>
<h3 data-id="heading-29">é¢„æµ‹çŠ¶æ€æ›´æ–°</h3>
<p>ä¸€ä¸ªLangGraph agentçš„çŠ¶æ€æ›´æ–°æ˜¯ä¸è¿ç»­çš„ï¼›ä»…åœ¨å›¾ä¸­çš„èŠ‚ç‚¹è½¬æ¢ä¹‹é—´è¿›è¡Œã€‚ä½†æ˜¯ï¼Œå›¾ä¸­å•ä¸ªèŠ‚ç‚¹è¿è¡Œå¾€å¾€éœ€è¦è®¸å¤šç§’ï¼Œå¹¶ä¸”åŒ…å«ç”¨æˆ·æ„Ÿå…´è¶£çš„å­æ­¥éª¤ã€‚</p>
<p>é¢„æµ‹çŠ¶æ€æ›´æ–°å¸®åŠ©æˆ‘ä»¬å‘ç”¨æˆ·å°½å¯èƒ½è¿ç»­çš„ååº” agent æ­£åœ¨æ‰§è¡Œçš„æ“ä½œã€‚</p>
<p>å½“ä½ çš„LangGraphä¸­çš„èŠ‚ç‚¹æ‰§è¡Œå®Œæ¯•æ—¶ï¼Œå…¶è¿”å›çš„çŠ¶æ€æˆä¸ºå”¯ä¸€çš„çœŸå®æ¥æºã€‚è™½ç„¶ä¸­é—´çŠ¶æ€æ›´æ–°å¯¹äºå®æ—¶åé¦ˆå¾ˆæœ‰å¸®åŠ©ï¼Œä½†ä»»ä½•ä½ æƒ³æŒä¹…åŒ–çš„æ›´æ”¹éƒ½å¿…é¡»æ˜ç¡®åœ°åŒ…å«åœ¨èŠ‚ç‚¹çš„æœ€ç»ˆè¿”å›çŠ¶æ€ä¸­ã€‚å¦åˆ™ï¼Œå®ƒä»¬å°†åœ¨èŠ‚ç‚¹å®Œæˆæ—¶è¢«è¦†ç›–ã€‚</p>
<p>åœ¨çŠ¶æ€ä¸­å®šä¹‰ä¸€ä¸ª <code>observed_steps</code> å­—æ®µï¼Œè¯¥å­—æ®µå°†åœ¨agentç¼–å†™æŠ¥å‘Šçš„ä¸åŒéƒ¨åˆ†æ—¶æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Annotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/langgraph"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CopilotKitStateAnnotation</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">AgentStateAnnotation</span> = <span class="hljs-title class_">Annotation</span>.<span class="hljs-title class_">Root</span>({
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-title class_">Annotation</span>&lt;<span class="hljs-built_in">string</span>[]&gt;,  <span class="hljs-comment">// Array of completed steps</span>
    ...<span class="hljs-title class_">CopilotKitStateAnnotation</span>.<span class="hljs-property">spec</span>,
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">AgentStateAnnotation</span>.<span class="hljs-property">State</span>;
</code></pre>
<p>æœ‰ä¸¤ç§å‘å‡ºçŠ¶æ€æ›´æ–°çš„æ–¹å¼ï¼šæ‰‹åŠ¨é¢„æµ‹å’ŒåŸºäºå·¥å…·çš„é¢„æµ‹ã€‚</p>
<h4 data-id="heading-30">æ‰‹åŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œå¯ä»¥é€æ­¥å‘å‡ºçŠ¶æ€æ›´æ–°ï¼Œä½œä¸ºæœ€ç»ˆçŠ¶æ€çš„é¢„æµ‹ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰§è¡Œä¸€ç³»åˆ—å¸¦æœ‰æ¯æ¬¡æ›´æ–°ä¹‹é—´ä¸€ç§’å»¶è¿Ÿçš„æ­¥éª¤æ¥æ¨¡æ‹Ÿä¸€ä¸ªé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitEmitState } <span class="hljs-keyword">from</span> <span class="hljs-string">"@copilotkit/sdk-js/langgraph"</span>; 
<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">chat_node</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>) {
    <span class="hljs-comment">// ...</span>

    <span class="hljs-comment">// Simulate executing steps one by one</span>
    <span class="hljs-keyword">const</span> steps = [
        <span class="hljs-string">"Analyzing input data..."</span>,
        <span class="hljs-string">"Identifying key patterns..."</span>,
        <span class="hljs-string">"Generating recommendations..."</span>,
        <span class="hljs-string">"Formatting final output..."</span>
    ];
    
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> step <span class="hljs-keyword">of</span> steps) {
        state.<span class="hljs-property">observed_steps</span> = [...(state.<span class="hljs-property">observed_steps</span> ?? []), step];
        <span class="hljs-title function_">copilotkitEmitState</span>(config, state);
        <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">1000</span>));
    }
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h4 data-id="heading-31">åŸºäºå·¥å…·é¢„æµ‹çŠ¶æ€æ›´æ–°</h4>
<p>å¯¹äºé•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œæ‚¨å¯ä»¥é…ç½® CopilotKit åœ¨æ‰§è¡Œç‰¹å®šå·¥å…·è°ƒç”¨æ—¶è‡ªåŠ¨é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†é…ç½® CopilotKit åœ¨ LLM è°ƒç”¨æ­¥éª¤è¿›åº¦å·¥å…·æ—¶é¢„æµ‹çŠ¶æ€æ›´æ–°ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">//agent.ts</span>
<span class="hljs-keyword">import</span> { copilotkitCustomizeConfig } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/sdk-js/langgraph'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">frontendActionsNode</span>(<span class="hljs-params">state: AgentState, config: RunnableConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AgentState</span>&gt; {
    <span class="hljs-keyword">const</span> modifiedConfig = <span class="hljs-title function_">copilotkitCustomizeConfig</span>(config, {
        <span class="hljs-attr">emitIntermediateState</span>: [
        {
            <span class="hljs-attr">stateKey</span>: <span class="hljs-string">"observed_steps"</span>,
            <span class="hljs-attr">tool</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">toolArgument</span>: <span class="hljs-string">"steps"</span>,
        },
        ],
    });

    <span class="hljs-keyword">const</span> stepProgress = <span class="hljs-title function_">tool</span>(
        <span class="hljs-keyword">async</span> (args) =&gt; args,
        {
            <span class="hljs-attr">name</span>: <span class="hljs-string">"StepProgressTool"</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-string">"Records progress by updating the steps array"</span>,
            <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
                <span class="hljs-attr">steps</span>: z.<span class="hljs-title function_">array</span>(z.<span class="hljs-title function_">string</span>()),
            }),
        }
    );

    <span class="hljs-keyword">const</span> model = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
        <span class="hljs-attr">model</span>: <span class="hljs-string">"gpt-4o"</span>,
    }).<span class="hljs-title function_">bindTools</span>([stepProgress]);

    <span class="hljs-keyword">const</span> system_message = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-string">"You are a task performer. Pretend doing tasks you are given, report the steps using StepProgressTool."</span>)
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>([system_message, ...state.<span class="hljs-property">messages</span>], modifiedConfig);


    <span class="hljs-keyword">if</span> (response.<span class="hljs-property">tool_calls</span>?.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">return</span> {
            <span class="hljs-attr">messages</span>: response;
            <span class="hljs-attr">observed_steps</span>: response.<span class="hljs-property">tool_calls</span>[<span class="hljs-number">0</span>].<span class="hljs-property">args</span>.<span class="hljs-property">steps</span>,
        }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">messages</span>: response };
}
</code></pre>
<p>è¿™äº›é¢„æµ‹å°†åœ¨ä»£ç†è¿è¡Œæ—¶å‘å‡ºï¼Œå…è®¸æ‚¨åœ¨ç¡®å®šæœ€ç»ˆçŠ¶æ€ä¹‹å‰è·Ÿè¸ªå…¶è¿›åº¦:</p>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-comment">//page.tsx</span>
<span class="hljs-keyword">import</span> { useCoAgent, useCoAgentStateRender } <span class="hljs-keyword">from</span> <span class="hljs-string">'@copilotkit/react-core'</span>;

<span class="hljs-comment">// ...</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">AgentState</span> = {
    <span class="hljs-attr">observed_steps</span>: <span class="hljs-built_in">string</span>[];
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">YourMainContent</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// Get access to both predicted and final states</span>
    <span class="hljs-keyword">const</span> { state } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({ <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span> });

    <span class="hljs-comment">// Add a state renderer to observe predictions</span>
    <span class="hljs-title function_">useCoAgentStateRender</span>({
        <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
        <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ state }</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (!state.<span class="hljs-property">observed_steps</span>?.<span class="hljs-property">length</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">return</span> (
                <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Current Progress:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
            );
        },
    });

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Agent Progress<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
            {state.observed_steps?.length &gt; 0 &amp;&amp; (
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>Final Steps:<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span>
                        {state.observed_steps.map((step, i) =&gt; (
                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{i}</span>&gt;</span>{step}<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                        ))}
                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    )
}
</code></pre>
<h2 data-id="heading-32">å­å›¾</h2>
<p>ä¸€ä¸ªå­å›¾ç®€å•åœ°æ˜¯ä½œä¸ºå¦ä¸€ä¸ªå›¾ä¸­çš„èŠ‚ç‚¹ä½¿ç”¨çš„å›¾ã€‚æŠŠå®ƒçœ‹ä½œæ˜¯LangGraphçš„å°è£…ï¼šæ¯ä¸ªå­å›¾æ˜¯ä¸€ä¸ªè‡ªåŒ…å«çš„å•å…ƒï¼Œå¯ä»¥ç»„åˆèµ·æ¥æ„å»ºæ›´å¤§ã€æ›´å¤æ‚çš„ç³»ç»Ÿã€‚</p>
<p>ä½¿ç”¨æ­¤åŠŸèƒ½ä¸éœ€è¦åœ¨agentç«¯æ‰§è¡Œé¢å¤–æ­¥éª¤ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯åœ¨ useCoAgent é’©å­ä¸­å¯ç”¨å­å›¾æµï¼š</p>
<pre><code class="hljs language-tsx" lang="tsx">  <span class="hljs-keyword">const</span> { state, nodeName } = useCoAgent&lt;<span class="hljs-title class_">AgentState</span>&gt;({
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sample_agent"</span>,
    <span class="hljs-attr">initialState</span>: <span class="hljs-variable constant_">INITIAL_STATE</span>,
    <span class="hljs-attr">config</span>: {
      <span class="hljs-attr">streamSubgraphs</span>: <span class="hljs-literal">true</span>, 
    }
  });
</code></pre>
<p>å­å›¾èŠ‚ç‚¹å°†ç…§å¸¸æµå¼ä¼ è¾“ï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨ <code>nodeName</code> å˜é‡æŸ¥çœ‹å“ªä¸ªå­å›¾æ­£åœ¨æµå¼ä¼ è¾“ã€‚æ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»å­å›¾ä½¿ç”¨ <code>interruptï¼ˆï¼‰</code>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ]]></title>    <link>https://juejin.cn/post/7576825095134986266</link>    <guid>https://juejin.cn/post/7576825095134986266</guid>    <pubDate>2025-11-26T05:57:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576825095134986266" data-draft-id="7576669556150190118" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-26T05:57:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±…ç„¶JuRan"/> <meta itemprop="url" content="https://juejin.cn/user/2524134427858205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹ç˜¦èº«æœ¯:é‡åŒ–ä¸è’¸é¦æŠ€æœ¯å…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134427858205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±…ç„¶JuRan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T05:57:07.000Z" title="Wed Nov 26 2025 05:57:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆè¦ç»™å¤§æ¨¡å‹"ç˜¦èº«"?</h2>
<p>åœ¨AIæŠ€æœ¯é£é€Ÿå‘å±•çš„ä»Šå¤©,å¤§è¯­è¨€æ¨¡å‹å·²ç»æˆä¸ºå„è¡Œå„ä¸šçš„å¾—åŠ›åŠ©æ‰‹ã€‚ä½†ä½ æ˜¯å¦çŸ¥é“,éƒ¨ç½²ä¸€ä¸ªå¤§æ¨¡å‹çš„æˆæœ¬æœ‰å¤šé«˜?</p>
<p>ä¸€ä¸ªåƒäº¿å‚æ•°çº§åˆ«çš„æ¨¡å‹,ä¸ä»…éœ€è¦å ç”¨å¤§é‡çš„å­˜å‚¨ç©ºé—´,åœ¨å®é™…è¿è¡Œæ—¶æ›´æ˜¯éœ€è¦æƒŠäººçš„è®¡ç®—èµ„æºã€‚å¯¹äºä¼ä¸šæ¥è¯´,è¿™æ„å‘³ç€é«˜æ˜‚çš„ç¡¬ä»¶æˆæœ¬å’Œè¿è¥å¼€æ”¯ã€‚å› æ­¤,å¦‚ä½•åœ¨ä¿æŒæ¨¡å‹æ€§èƒ½çš„åŒæ—¶é™ä½éƒ¨ç½²æˆæœ¬,æˆä¸ºäº†AIå·¥ç¨‹å¸ˆä»¬å¿…é¡»é¢å¯¹çš„æŒ‘æˆ˜ã€‚</p>
<p>ä»Šå¤©,æˆ‘ä»¬å°±æ¥èŠèŠå¤§æ¨¡å‹å‹ç¼©çš„ä¸¤å¤§ä¸»æµæŠ€æœ¯â€”â€”<strong>é‡åŒ–(Quantization)å’Œè’¸é¦(Distillation)</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ceb122be11df49e0b2e47cbda4123427~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=xUqEIgMf6B0xrbulchmQuih2GlY%3D" alt="å¤§æ¨¡å‹å‹ç¼©æŠ€æœ¯æ¦‚è§ˆ" loading="lazy"/></p>
<h2 data-id="heading-1">é‡åŒ–:ç”¨æ›´å°‘çš„ä½æ•°å­˜å‚¨å‚æ•°</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯é‡åŒ–?</h3>
<p>è¦ç†è§£é‡åŒ–,æˆ‘ä»¬é¦–å…ˆéœ€è¦çŸ¥é“:å¤§æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯ç”±æµ·é‡å‚æ•°ç»„æˆçš„ã€‚æ¯”å¦‚GPT-3,å°±åŒ…å«äº†1750äº¿ä¸ªå‚æ•°ã€‚æ¯ä¸ªå‚æ•°éƒ½æ˜¯ä¸€ä¸ªæ•°å€¼,è€Œè¿™äº›æ•°å€¼çš„å­˜å‚¨æ–¹å¼,ç›´æ¥å†³å®šäº†æ¨¡å‹å ç”¨çš„ç©ºé—´å¤§å°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52330fabeb214786abcfba009f5b1a54~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=pSf6HinPuv6%2BzRgb9BBfXvk51ew%3D" alt="é‡åŒ–åŸç†è§£é‡Š" loading="lazy"/></p>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªç®€å•çš„ä¾‹å­ã€‚å‡è®¾æŸä¸ªå‚æ•°çš„å€¼æ˜¯1.2768,ä¸ºäº†åœ¨è®¡ç®—æœºä¸­å­˜å‚¨è¿™ä¸ªç²¾ç¡®çš„æ•°å€¼,æˆ‘ä»¬éœ€è¦å¼€è¾Ÿä¸€å®šçš„å†…å­˜ç©ºé—´ã€‚ä½†å¦‚æœæˆ‘ä»¬åšä¸ª"å››èˆäº”å…¥",æŠŠå®ƒç®€åŒ–æˆ1æˆ–è€…1.28,æ‰€éœ€çš„å­˜å‚¨ç©ºé—´å°±ä¼šå¤§å¤§å‡å°‘ã€‚</p>
<p><strong>è¿™å°±æ˜¯é‡åŒ–çš„æ ¸å¿ƒæ€æƒ³â€”â€”é€šè¿‡é™ä½æ•°å€¼ç²¾åº¦æ¥èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚</strong></p>
<h3 data-id="heading-3">ä»Float32åˆ°INT8çš„è½¬å˜</h3>
<p>åœ¨æ·±åº¦å­¦ä¹ ä¸­,å‚æ•°é€šå¸¸ä»¥Float32çš„æ ¼å¼å­˜å‚¨,ä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå‚æ•°å ç”¨32ä¸ªbits(4ä¸ªå­—èŠ‚)çš„ç©ºé—´ã€‚ä½†é€šè¿‡é‡åŒ–æŠ€æœ¯,æˆ‘ä»¬å¯ä»¥å°†è¿™äº›å‚æ•°è½¬æ¢ä¸ºæ›´ä½ç²¾åº¦çš„æ•°æ®ç±»å‹:</p>
<ul>
<li>
<p><strong>Float32 â†’ Float16</strong>:ç©ºé—´å‡åŠ,æ¯ä¸ªå‚æ•°ä»…å 16ä¸ªbits</p>
</li>
<li>
<p><strong>Float32 â†’ INT8</strong>:ç©ºé—´å‹ç¼©è‡³1/4,æ¯ä¸ªå‚æ•°ä»…å 8ä¸ªbits</p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33d3fcb13a374856b9dcb900473adbce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=QQEPn3g8hMDSsGwBjZrtfFDWChg%3D" alt="æ•°æ®ç±»å‹è½¬æ¢ç¤ºæ„" loading="lazy"/></p>
<p>è¿™ç§è½¬æ¢å¸¦æ¥çš„å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„:</p>
<ol>
<li>
<p><strong>å¤§å¹…é™ä½å­˜å‚¨éœ€æ±‚</strong>:æ¨¡å‹æ–‡ä»¶å˜å°,æ›´å®¹æ˜“éƒ¨ç½²</p>
</li>
<li>
<p><strong>åŠ é€Ÿæ¨ç†é€Ÿåº¦</strong>:è®¡ç®—é‡å‡å°‘,å“åº”æ›´å¿«</p>
</li>
<li>
<p><strong>é™ä½æˆæœ¬</strong>:å¯¹ç¡¬ä»¶çš„è¦æ±‚å¤§å¹…ä¸‹é™</p>
</li>
</ol>
<p>ä½ å¯èƒ½ä¼šæ‹…å¿ƒ:ç²¾åº¦é™ä½äº†,æ¨¡å‹çš„å‡†ç¡®ç‡ä¼šä¸ä¼šå—å½±å“?</p>
<p>ç­”æ¡ˆæ˜¯:**å¦‚æœé‡åŒ–è¿‡ç¨‹æŠŠæ§å¾—å½“,æ¨¡å‹çš„å‡†ç¡®ç‡æ˜¯æœ‰ä¿éšœçš„ã€‚**è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆé‡åŒ–æˆä¸ºç›®å‰å¤§æ¨¡å‹å‹ç¼©æœ€å¸¸ç”¨çš„æ–¹æ³•ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-4">è’¸é¦:è®©å°æ¨¡å‹å­¦ä¼š"æ¨¡ä»¿"</h2>
<h3 data-id="heading-5">è’¸é¦çš„æœ¬è´¨æ˜¯ä»€ä¹ˆ?</h3>
<p>å¦‚æœè¯´é‡åŒ–æ˜¯"å‹ç¼©å‚æ•°",é‚£ä¹ˆè’¸é¦åˆ™æ˜¯å®Œå…¨ä¸åŒçš„æ€è·¯â€”â€”<strong>è®©ä¸€ä¸ªå°æ¨¡å‹å»æ¨¡ä»¿å¤§æ¨¡å‹çš„è¡Œä¸º</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad612a7432bc401ba6d549483e411cc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=Selr8ftFG1%2FKCdLwZulvF0z%2BAW0%3D" alt="æ¨¡å‹è’¸é¦åŸç†" loading="lazy"/></p>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯:æˆ‘ä»¬å·²ç»è®­ç»ƒå¥½äº†ä¸€ä¸ªåƒäº¿å‚æ•°çš„å¤§æ¨¡å‹,ä½†å®ƒå¤ªå¤§å¤ªé‡,éƒ¨ç½²æˆæœ¬å¤ªé«˜ã€‚è¿™æ—¶å€™,æˆ‘ä»¬å¯ä»¥æ„é€ ä¸€ä¸ªå°å¾—å¤šçš„æ¨¡å‹,ç„¶åè®©è¿™ä¸ª"å­¦ç”Ÿæ¨¡å‹"(Student Model)å»å­¦ä¹ "æ•™å¸ˆæ¨¡å‹"(Teacher Model)çš„è¡Œä¸ºã€‚</p>
<h3 data-id="heading-6">è’¸é¦æ˜¯å¦‚ä½•å·¥ä½œçš„?</h3>
<p>å…·ä½“æ¥è¯´,è’¸é¦çš„è¿‡ç¨‹æ˜¯è¿™æ ·çš„:</p>
<ol>
<li>
<p>ç»™å®šä¸€ä¸ªè¾“å…¥(æ¯”å¦‚ä¸€ä¸ªprompt)</p>
</li>
<li>
<p>å°†è¿™ä¸ªè¾“å…¥åŒæ—¶å–‚ç»™å¤§æ¨¡å‹å’Œå°æ¨¡å‹</p>
</li>
<li>
<p>è§‚å¯Ÿå¤§æ¨¡å‹çš„è¾“å‡º</p>
</li>
<li>
<p>è®­ç»ƒå°æ¨¡å‹,è®©å®ƒçš„è¾“å‡ºå°½å¯èƒ½æ¥è¿‘å¤§æ¨¡å‹çš„è¾“å‡º</p>
</li>
</ol>
<p><strong>å°±åƒå°å­©å­æ¨¡ä»¿å¤§äººä¸€æ ·,å¤§æ¨¡å‹åšä»€ä¹ˆ,å°æ¨¡å‹ä¹Ÿå­¦ç€åšä»€ä¹ˆã€‚</strong></p>
<p>é€šè¿‡è¿™ç§æ–¹å¼,å°æ¨¡å‹é€æ¸å­¦ä¼šäº†å¤§æ¨¡å‹çš„"è¡Œä¸ºæ¨¡å¼",æœ€ç»ˆèƒ½å¤Ÿåœ¨ä¿æŒç›¸ä¼¼æ€§èƒ½çš„åŒæ—¶,å¤§å¹…å‡å°‘æ¨¡å‹è§„æ¨¡å’Œè®¡ç®—å¼€é”€ã€‚</p>
<h3 data-id="heading-7">è’¸é¦åœ¨å®é™…ä¸­çš„åº”ç”¨</h3>
<p>è’¸é¦æŠ€æœ¯ä¸ä»…ç”¨äºæ¨¡å‹å‹ç¼©,åœ¨è®­ç»ƒæ–°æ¨¡å‹æ—¶ä¹Ÿç»å¸¸ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/795d7eabee8d40d7ac4381417456b8f3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764741427&amp;x-signature=yuPYq1MLtEck17Uwlt0MCoTUmKQ%3D" alt="è’¸é¦åº”ç”¨åœºæ™¯" loading="lazy"/></p>
<p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯:å¸‚é¢ä¸Šå¾ˆå¤šå¼€æºå¤§æ¨¡å‹,éƒ½æ˜¯é€šè¿‡"æ¨¡ä»¿"GPT-4è®­ç»ƒå‡ºæ¥çš„ã€‚å…·ä½“åšæ³•æ˜¯:</p>
<ol>
<li>
<p>æ”¶é›†GPT-4å¯¹å„ç§é—®é¢˜çš„å›å¤</p>
</li>
<li>
<p>å°†è¿™äº›è¾“å…¥-è¾“å‡ºå¯¹ä½œä¸ºè®­ç»ƒæ•°æ®</p>
</li>
<li>
<p>ç”¨è¿™äº›æ•°æ®è®­ç»ƒè‡ªå·±çš„æ¨¡å‹</p>
</li>
</ol>
<p>é€šè¿‡è¿™ç§æ–¹å¼,å¼€æºæ¨¡å‹èƒ½å¤Ÿé€æ­¥æ¥è¿‘GPT-4çš„è¡¨ç°,åŒæ—¶ä¿æŒæ›´ä½çš„éƒ¨ç½²æˆæœ¬ã€‚</p>
<h2 data-id="heading-8">é‡åŒ–vsè’¸é¦:è¯¥é€‰å“ªä¸€ä¸ª?</h2>
<p>è¿™ä¸¤ç§æŠ€æœ¯å„æœ‰ç‰¹ç‚¹,é€‚ç”¨äºä¸åŒåœºæ™¯:</p>
<p><strong>é‡åŒ–æŠ€æœ¯</strong>:</p>
<ul>
<li>
<p>ä¼˜åŠ¿:å®æ–½ç®€å•,ä¸éœ€è¦é‡æ–°è®­ç»ƒ,å‹ç¼©æ•ˆæœæ˜æ˜¾</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯:å·²æœ‰æ¨¡å‹çš„å¿«é€Ÿä¼˜åŒ–,å¯¹ç²¾åº¦è¦æ±‚ä¸æ˜¯ç‰¹åˆ«ä¸¥æ ¼çš„åº”ç”¨</p>
</li>
<li>
<p>ä¸»æµæ–¹æ³•:ç›®å‰å¤§æ¨¡å‹å‹ç¼©æœ€å¸¸ç”¨çš„æ‰‹æ®µ</p>
</li>
</ul>
<p><strong>è’¸é¦æŠ€æœ¯</strong>:</p>
<ul>
<li>
<p>ä¼˜åŠ¿:å¯ä»¥è·å¾—ä¸€ä¸ªå…¨æ–°çš„å°æ¨¡å‹,çµæ´»æ€§æ›´é«˜</p>
</li>
<li>
<p>é€‚ç”¨åœºæ™¯:éœ€è¦å¤§å¹…åº¦ç¼©å°æ¨¡å‹è§„æ¨¡,æˆ–è®­ç»ƒæ–°æ¨¡å‹æ—¶å€Ÿé‰´å¤§æ¨¡å‹èƒ½åŠ›</p>
</li>
<li>
<p>åº”ç”¨å¹¿æ³›:å¾ˆå¤šå¼€æºæ¨¡å‹éƒ½åŸºäºè’¸é¦æ€è·¯è®­ç»ƒ</p>
</li>
</ul>
<p>åœ¨å®é™…åº”ç”¨ä¸­,è¿™ä¸¤ç§æŠ€æœ¯ä¹Ÿå¯ä»¥ç»“åˆä½¿ç”¨,è¾¾åˆ°æ›´å¥½çš„å‹ç¼©æ•ˆæœã€‚</p>
<h2 data-id="heading-9">å…¶ä»–å‹ç¼©æŠ€æœ¯</h2>
<p>é™¤äº†é‡åŒ–å’Œè’¸é¦,è¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ¨¡å‹å‹ç¼©æŠ€æœ¯,æ¯”å¦‚<strong>å‰ªæ(Pruning)</strong>â€”â€”é€šè¿‡ç§»é™¤æ¨¡å‹ä¸­ä¸é‡è¦çš„å‚æ•°æˆ–è¿æ¥æ¥å‡å°æ¨¡å‹è§„æ¨¡ã€‚</p>
<p>ä½†åœ¨å¤§æ¨¡å‹é¢†åŸŸ,å‰ªæçš„å®ç”¨æ€§ç›¸å¯¹è¾ƒå¼±,é‡åŒ–å’Œè’¸é¦ä»ç„¶æ˜¯æœ€ä¸»æµã€æœ€å®ç”¨çš„ä¸¤ç§æ–¹æ³•ã€‚</p>
<h2 data-id="heading-10">å†™åœ¨æœ€å</h2>
<p>éšç€å¤§æ¨¡å‹åº”ç”¨çš„ä¸æ–­æ™®åŠ,æ¨¡å‹å‹ç¼©æŠ€æœ¯å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚æ— è®ºæ˜¯é‡åŒ–è¿˜æ˜¯è’¸é¦,å®ƒä»¬çš„ç›®æ ‡éƒ½æ˜¯åœ¨ä¿è¯æ¨¡å‹æ€§èƒ½çš„å‰æä¸‹,è®©AIæŠ€æœ¯æ›´åŠ "å¹³æ°‘åŒ–"â€”â€”é™ä½éƒ¨ç½²é—¨æ§›,è®©æ›´å¤šäººèƒ½å¤Ÿç”¨å¾—èµ·ã€ç”¨å¾—å¥½å¤§æ¨¡å‹ã€‚</p>
<p>å¯¹äºå¼€å‘è€…æ¥è¯´,ç†è§£è¿™äº›æŠ€æœ¯åŸç†,ä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°éƒ¨ç½²æ¨¡å‹,ä¹Ÿèƒ½åœ¨è®¾è®¡AIåº”ç”¨æ—¶åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯é€‰æ‹©ã€‚</p>
<p>ä½ åœ¨å®é™…é¡¹ç›®ä¸­ä½¿ç”¨è¿‡è¿™äº›æŠ€æœ¯å—?æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒ!</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576821684252475435</link>    <guid>https://juejin.cn/post/7576821684252475435</guid>    <pubDate>2025-11-26T12:36:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576821684252475435" data-draft-id="7576859345935089718" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ"/> <meta itemprop="keywords" content="Trae,Solo,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-11-26T12:36:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç»™ TRAE SOLO ä¸€å°æœåŠ¡å™¨ï¼Œå®ƒèƒ½å¹²ä»€ä¹ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T12:36:45.000Z" title="Wed Nov 26 2025 12:36:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰ä¸€é˜µå­åˆ·åˆ°ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„æ“ä½œï¼šæœ‰äººç›´æ¥æŠŠä¸€å°æœåŠ¡å™¨çš„æƒé™æ‰”ç»™äº† AIï¼Œå¹¶ç®€å•è¯´äº†å¥ç›®æ ‡ã€‚</p>
<p>ç„¶åï¼ŒAI å°±ä»é›¶å¼€å§‹å®‰è£…ç¯å¢ƒã€é…ä¾èµ–ï¼Œæ‹‰ä»“åº“ï¼Œå¯åŠ¨æœåŠ¡ï¼Œæœ€åæˆåŠŸå®Œæˆäº†å¯¹å¤–æœåŠ¡çš„æä¾›ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±å°è¯•ä¸‹è¿™ä¸ªæ€è·¯ï¼šè®© <code>TRAE SOLO</code> è‡ªè¡Œåœ¨è¿œç¨‹æœåŠ¡å™¨ä¸­æ­å»ºä¸€å¥— <code>MinerU</code> ç¯å¢ƒã€‚</p>
<h2 data-id="heading-0">MinerU</h2>
<p>é¦–å…ˆï¼Œç®€å•ä»‹ç»ä¸‹ <code>MinerU</code>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33f6d82478d04e299eb19d753a2feee7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=eyAcvMYv80Ko0lYxi894%2BhOMfN4%3D" alt="" loading="lazy"/></p>
<p><code>MinerU</code> æ˜¯ä¸€æ¬¾èƒ½å°†<strong>PDF/å›¾ç‰‡è½¬æ¢ä¸ºæœºå™¨å¯è¯»æ ¼å¼</strong>ï¼ˆä¾‹å¦‚ <code>markdown</code>ã€<code>JSON</code>ï¼‰çš„å·¥å…·ï¼Œè¯ç”Ÿäºä¸Šæµ·äººå·¥æ™ºèƒ½å®éªŒå®¤å‡ºå“å¤§æ¨¡å‹ <code>InternLM</code> çš„é¢„è®­ç»ƒè¿‡ç¨‹ä¸­ã€‚</p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>å¤šæ¨¡æ€æ–‡æ¡£è§£æ</strong>ï¼šæ”¯æŒå¤šç§æ–‡æ¡£ç±»å‹ï¼ŒåŒ…æ‹¬æ‰«æç‰ˆ PDF</li>
<li><strong>ç»“æ„åŒ–è¿˜åŸ</strong>ï¼šå¯è¯†åˆ«è¡¨æ ¼ã€å…¬å¼ã€åˆ†å­å¼ç­‰</li>
<li><strong>é«˜ä¿çœŸè¯­ä¹‰ç†è§£</strong>ï¼šåˆ©ç”¨å¸ƒå±€åˆ†æå’Œé˜…è¯»é¡ºåºæ¨ç†ï¼Œé¿å…ä¼ ç»Ÿ OCR æœºæ¢°è¯†åˆ«å¯¼è‡´çš„é€»è¾‘é”™ä¹±ã€‚</li>
<li><strong>æœ¬åœ°åŒ– &amp; å¼€æºå…è´¹</strong>ï¼šå…¨éƒ¨æ¨¡å‹å’Œä»£ç å¼€æºï¼Œå¯ç§æœ‰éƒ¨ç½²ï¼Œæ— éœ€è°ƒç”¨å¤–éƒ¨ APIï¼Œä¿éšœæ•°æ®éšç§ã€‚</li>
</ul>
<h2 data-id="heading-1">å…±ç»©ç®—åŠ›</h2>
<p>AI è¦éƒ¨ç½²çš„åº”ç”¨å·²ç»äº†è§£äº†ï¼Œç°åœ¨éœ€è¦ç»™ AI æ‰¾ä¸€ä¸ªå¯ä»¥æ“ä½œçš„æœåŠ¡å™¨ã€‚</p>
<p>æœ€è¿‘æˆ‘ä½¿ç”¨çš„ç®—åŠ›å¹³å°æ˜¯â€œå…±ç»©ç®—åŠ›â€ï¼Œ<code>RTX 4090</code> åªè¦ <code>1.68</code> å…ƒ/å°æ—¶ï¼Œè¿˜èƒ½æŒ‰æ¯«ç§’è®¡è´¹ã€è‡ªåŠ¨æ‰©å®¹ï¼Œéå¸¸ä¾¿äºæˆ‘æ ¹æ®ç ”ç©¶çš„æ¨¡å‹æŒ‘é€‰åˆé€‚çš„èŠ‚ç‚¹é…ç½®ã€‚</p>
<p>å°¤å…¶æ˜¯ç›®å‰ï¼Œå¹³å°è¿˜æœ‰ç¦åˆ©ï¼Œ<strong>æ³¨å†Œå°±é€ç®—åŠ›åˆ¸</strong>ã€‚</p>
<h2 data-id="heading-2">å®æ“è®°å½•</h2>
<h3 data-id="heading-3">èŠ‚ç‚¹å»ºç«‹</h3>
<p>æ³¨å†Œå¹¶ç™»å½•â€œå…±ç»©ç®—åŠ›â€å¹³å°ã€‚</p>
<p>åœ¨â€œäº‘ä¸»æœºâ€é¡µé¢é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/381d765e27df439a89ad4481f0287395~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=Rc4YtH5x9fML4ri8vP5vSZVT9jw%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©åˆé€‚çš„èŠ‚ç‚¹ç±»å‹åï¼Œé…ç½®ç›¸å…³é•œåƒã€å­˜å‚¨ç­‰ï¼Œæˆ‘è¿™é‡Œé…ç½®äº†â€œåŸºç¡€é•œåƒâ€ï¼Œç”±äºæ˜¯æµ‹è¯•æ­å»ºæ¨¡å‹ï¼Œæœªé…ç½®ç›¸å…³å­˜å‚¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/45720f1c6b0c433eb1630a9778577e87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=ZHXguh3rd2MYd2LyIXgx%2F%2FIF8wI%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ç§Ÿç”¨ï¼Œè´¦æˆ·ä½™é¢ä¸º 0ï¼Œä¼šè¦æ±‚å……å€¼ä¸€ä¸‹ï¼ˆ0.01å…ƒå³å¯ï¼‰ï¼Œç„¶åï¼Œéœ€è¦åœ¨ä¸ªäººä¸­å¿ƒå…³æ³¨ä¸‹å…¬ä¼—å·ï¼Œè¿™äº›æŒ‰ç…§é¡µé¢æç¤ºè¿›è¡Œå³å¯ã€‚</p>
<p>ç§Ÿç”¨æˆåŠŸåï¼Œä¼šåœ¨â€œæ§åˆ¶å°â€-â€œäº‘ä¸»æœºåˆ—è¡¨â€ä¸­çœ‹åˆ°ç§Ÿç”¨çš„èŠ‚ç‚¹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ced2f6fccc284a258c6b961f3df6fc34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=c53clo2VeJABljwf1KwMHtyaP8E%3D" alt="" loading="lazy"/></p>
<p>24G æ˜¾å­˜ã€63G å†…å­˜ï¼Œ1å°æ—¶ 1.68 å…ƒï¼Œå¹¶ä¸”æœ‰ç®—åŠ›åˆ¸æŠµæ‰£ï¼Œè¿˜å¾ˆåˆé€‚çš„ã€‚</p>
<h3 data-id="heading-4">è¿œç¨‹è¿æ¥</h3>
<p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œæˆ‘ä»¬å…ˆæ¥è°ƒæ•´ä¸‹ <code>SSH</code> è¿æ¥çš„å‘½ä»¤ï¼Œè®©å…¶æ”¯æŒç«¯å£æ˜ å°„ï¼Œæ–¹ä¾¿è®¿é—® demoã€‚</p>
<p>åœ¨ä¸Šä¸€æ­¥çš„â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­ï¼Œå¤åˆ¶å‡ºç™»å½•æŒ‡ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-css" lang="css">ssh root<span class="hljs-keyword">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å¢åŠ <strong>ç«¯å£æ˜ å°„å‚æ•°</strong>ã€‚</p>
<pre><code class="hljs language-java" lang="java">ssh -vvN -L <span class="hljs-number">7860</span>:<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">7860</span> root<span class="hljs-meta">@hdy1</span>.550c.cloud -p <span class="hljs-number">40002</span>
</code></pre>
<p>å…¶ä¸­ <code>7860</code> æ˜¯ <code>MinerU demo</code> çš„æœåŠ¡ç«¯å£ã€‚</p>
<p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œæˆ‘ä»¬æ‰“å¼€ <code>TRAE</code> è¿›è¡Œè¿œç¨‹è¿æ¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f9b703dfe8241f19585bdafa24cd984~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=M1BqQ%2FKJfoL%2FPVZAlOzkjla%2Fc70%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥ä¸Šé¢çš„æŒ‡ä»¤ï¼Œå›è½¦å³å¯ã€‚</p>
<p>æ­¤æ—¶ä¼šè¦æ±‚å½•å…¥å¯†ç ï¼Œå†æ¬¡ä»â€œäº‘ä¸»æœºåˆ—è¡¨â€-â€œSSHç™»å½•ä¿¡æ¯â€ä¸­å¤åˆ¶â€œç™»å½•å¯†ç â€å³å¯ã€‚</p>
<blockquote>
<p>å¦‚æœåŒä¸€åœ°å€è¿æ¥å¤šæ¬¡ï¼Œå¯èƒ½ä¼šåœ¨ SSH è¿æ¥ä¸­ç”Ÿæˆå¤šä¸ªç›¸åŒçš„ Hostï¼Œæ­¤æ—¶ä¼šå‡ºç°ç™»å½•å¤±è´¥çš„æƒ…å†µï¼Œæ‰‹åŠ¨åˆ é™¤é‡å¤çš„ Host å³å¯ã€‚</p>
</blockquote>
<p>æˆåŠŸè¿æ¥åï¼Œç»ˆç«¯ä¿¡æ¯å¦‚ä¸‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a9b28a6d3d742e1a8102d68ad591783~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=m8gIiVOKAC5gAOWKDOX9fEqEBFc%3D" alt="" loading="lazy"/></p>
<p>æ­£å¸¸æƒ…å†µä¸‹å¯ä»¥åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¿œç¨‹æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤äº†ã€‚</p>
<p>ä½†ä»Šå¤©ï¼Œæˆ‘ä»¬éƒ½äº¤ç»™ AIã€‚</p>
<h3 data-id="heading-5">ç¯å¢ƒéƒ¨ç½²</h3>
<p>å¼€å‘ç¯å¢ƒï¼šå›½é™…ç‰ˆ <code>SOLO Coder</code> æ™ºèƒ½ä½“ï¼Œæœªé€‰æ‹© <code>Plan</code> æ¨¡å¼ã€‚</p>
<p>ç›´æ¥åœ¨ <code>Chat</code> çª—å£å½•å…¥å¦‚ä¸‹æŒ‡ä»¤ï¼Œç­‰å¾…å®Œæˆã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<p>æŒ‡ä»¤éå¸¸ç®€å•ï¼Œè®© AI å‚è€ƒ <code>MinerU</code> å®˜æ–¹ä»“åº“æ–‡æ¡£ï¼Œè‡ªè¡Œå®Œæˆéƒ¨ç½²ã€‚</p>
<p>å› ä¸ºæ¨¡å‹ä¸‹è½½æ¶‰åŠåˆ° <code>HuggingFace</code> çš„ç½‘ç»œé—®é¢˜ï¼Œä¸€èˆ¬å„å¤§ç®—åŠ›ä¼ä¸šéƒ½ä¼šæä¾›é•œåƒå†…å®¹ï¼Œè¿™é‡ŒæŠŠâ€œå…±ç»©ç®—åŠ›â€çš„é•œåƒæ–‡æ¡£ä¹Ÿæ”¾ä¸Šäº†ã€‚</p>
<pre><code class="hljs language-ruby" lang="ruby">å‚è€ƒgithubæ–‡æ¡£<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/opendatalab</span><span class="hljs-regexp">/mineru?tab=readme-ov-file ï¼Œå¸®æˆ‘å®Œæˆmineruçš„å®‰è£…ï¼Œå¹¶å®Œæˆdemoå¯åŠ¨ã€‚
äº‘æœåŠ¡å™¨æ–‡æ¡£ï¼šhttps:/</span><span class="hljs-regexp">/www.gongjiyun.com/docs</span><span class="hljs-regexp">/server/introduction</span><span class="hljs-regexp">/rznmwsy13i4a8yktuyycoxyinmg/</span> 
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p>è¿‡ç¨‹å¾ˆæ¸…æ™°ï¼šå®‰è£…ä¾èµ–ã€ä¸‹è½½æ¨¡å‹ã€å¯åŠ¨Demoã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ed996c916d140cdb6e08f5c1fdf5da5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=zqHwEcUepdAd22Ase9gK8vIZOhs%3D" alt="" loading="lazy"/></p>
<p>åé¢è¿˜æœ‰è¯¦ç»†çš„å®‰è£…æ­¥éª¤ã€ç½‘ç»œåŠ é€Ÿä¸é•œåƒå»ºè®®ã€å¸¸ç”¨å‚æ•°ä¸ä¼˜åŒ–ã€é—®é¢˜æ’æŸ¥ã€åç»­å¯é€‰å¢å¼ºç­‰å†…å®¹ï¼Œä¾¿äºæˆ‘ä»¬å›é¡¾å®¡é˜…ã€‚</p>
<p><strong>SOLO æ¨¡å¼çš„å¥½å¤„å°±æ˜¯ä¸­é—´é‡åˆ°é—®é¢˜ï¼Œå®ƒå¯ä»¥è‡ªè¡Œè§£å†³</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a961e3db9aa7494f8246f58bcf74ae20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=xQkx4ScwbTogw%2Bfyg2KosdmFI84%3D" alt="" loading="lazy"/></p>
<p>æœ€åè¿˜ç»™å‡ºäº† demo çš„è®¿é—®æ–¹å¼ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad9688c470114572ba55130ceef88e8a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=BzTO%2FbDrygPDuRktGgBxwy02eHw%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œ<code>SOLO</code> å†…ç½®æµè§ˆå™¨å·²ç»å¸®æˆ‘æŠŠ demo æ‰“å¼€äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbb24fca4efe455ea6f1c14f79537ddb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=1diCpbeVDiDxzba0NULY8kS%2F6PU%3D" alt="" loading="lazy"/></p>
<p>è¿™é‡Œå¯ä»¥é€šè¿‡ <code>http://localhost:7860/</code> è®¿é—®åˆ°æœåŠ¡å™¨ï¼Œå°±æ˜¯å› ä¸ºâ€œè¿œç¨‹è¿æ¥â€ç« èŠ‚ä¸­çš„ SSH å‘½ä»¤ä¸­å¢åŠ äº†ç«¯å£æ˜ å°„ã€‚</p>
<h3 data-id="heading-6">è°ƒè¯•ä¼˜åŒ–</h3>
<p>ä¸Šé¢è·‘èµ·æ¥çš„ demoï¼Œä¸Šä¼ æµ‹è¯•çš„ PDF åï¼Œè½¬æ¢æŠ¥é”™ã€‚</p>
<p>ä¸ç€æ€¥ï¼Œæˆ‘ä»¬ç›´æ¥è®© <code>SOLO</code> å¸®å¿™ä¿®å¤ä¸‹ã€‚</p>
<p><strong>æŒ‡ä»¤</strong></p>
<pre><code class="hljs">demoä¸­ä¸Šä¼ åæŠ¥é”™ï¼Œè¯·å¸®æˆ‘ä¿®å¤
</code></pre>
<p><strong>è¿‡ç¨‹</strong></p>
<p><code>SOLO</code> å¯ä»¥ä»ç»ˆç«¯ä¸­è·å–é”™è¯¯ä¿¡æ¯ï¼Œå¿«é€Ÿå®šä½é—®é¢˜ï¼š</p>
<p>â€œä¸Šä¼ è§£ææ—¶æŠ¥é”™çš„æ ¹å› æ˜¯ Gradio å¤„ç†æµç¨‹åœ¨è§£ææ—¶å°è¯•è®¿é—® HuggingFace è·å–æ¨¡å‹å…ƒæ•°æ®ï¼Œå‡ºç° SSL é”™è¯¯å¯¼è‡´å‡½æ•°è¿”å› None ï¼Œæœ€ç»ˆè§¦å‘ TypeError: cannot unpack non-iterable NoneType object â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/147e903ead2f409eb39b6ffa8b9c95c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=NjQAkBUNiBJd0hRoLD75Qfim%2B1c%3D" alt="" loading="lazy"/></p>
<p><strong>ç»“æœ</strong></p>
<p>å†æ¬¡ä¸Šä¼  <code>PDF</code>ï¼Œå¯ä»¥çœ‹åˆ°æå–ç»“æœäº†ï¼Œå·²ç»å®Œæˆäº†ä»Šå¤©çš„æ—¢å®šç›®æ ‡äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2fad90c7e2c44072961045993260da4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764765405&amp;x-signature=nZEk2Y46KqYNQjC%2F79J7mgqmy%2FQ%3D" alt="" loading="lazy"/></p>
<p>ç”±äºæ¨¡å‹å‚æ•°æœªè°ƒä¼˜ï¼Œè¯†åˆ«ä¸­å­˜åœ¨äº›è®¸é—®é¢˜ï¼Œéæ­¤æ¬¡åˆ†äº«é‡ç‚¹ï¼Œæˆ‘ä»¬å°±ä¸å†è®¨è®ºäº†ã€‚</p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯éå¸¸é¡ºåˆ©çš„ï¼Œé™¤äº†æˆ‘ç¬¬ä¸€æ¬¡å¿˜è®°é…ç½®æ¨¡å‹é•œåƒä¸‹è½½å¯¼è‡´çš„å¤±è´¥ã€‚</p>
<p>ä¹‹å‰ä»¥ä¸º AI å¯ä»¥è‡ªå·± <code>SOLO</code> ä»£ç å°±å¾ˆé…·äº†ï¼Œæ²¡æƒ³åˆ°ï¼ŒAI éƒ½å·²ç»å¯ä»¥è‡ªå·±æŒæ§æœåŠ¡å™¨äº†ã€‚</p>
<p>ç»™ä¸ªç›®æ ‡ï¼Œå°±èƒ½ç›´æ¥ç­‰å¾…éªŒæ”¶ï¼Ÿé‚£åç»­æŠ€æœ¯éªŒè¯ã€ç¯å¢ƒæ­å»ºè„šæœ¬å²‚ä¸æ˜¯æ›´è½»æ¾äº†ã€‚</p>
<p>å½“éƒ¨ç½²ã€è°ƒè¯•ã€ä¼˜åŒ–ä¹Ÿèƒ½äº¤ç»™ AI è‡ªä¸»å®Œæˆåï¼Œå¼€å‘è€…å°±æœ‰äº†æ›´å¤šçš„æ—¶é—´å»æ€è€ƒâ€œåšä»€ä¹ˆâ€è€Œéâ€œæ€ä¹ˆåšâ€â€”â€”è¿™æˆ–è®¸æ‰æ˜¯æ™ºèƒ½æ—¶ä»£çš„ç”Ÿäº§åŠ›è·ƒè¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘]]></title>    <link>https://juejin.cn/post/7576827115967954979</link>    <guid>https://juejin.cn/post/7576827115967954979</guid>    <pubDate>2025-11-26T08:55:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115967954979" data-draft-id="7576676694784294946" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-26T08:55:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2634854380340008"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAG åˆ†å—ç­–ç•¥ï¼šä»åŸç†åˆ°å®æˆ˜ä¼˜åŒ–ï¼Œå–‚é¥­çº§æ•™ç¨‹ä¸å…è®¸ä½ è¸©å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2634854380340008/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:55:59.000Z" title="Wed Nov 26 2025 08:55:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¼•è¨€</h2>
<p>ä¸ºä»€ä¹ˆåŒæ ·æ˜¯åš RAGï¼Œæœ‰çš„æ•ˆæœæ‹”ç¾¤ï¼Œæœ‰çš„å´å·®å¼ºäººæ„ï¼Ÿåˆ†å—ï¼ˆChunkingï¼‰ç­–ç•¥å¯èƒ½æ˜¯é‚£ä¸ªè¢«ä½ å¿½ç•¥çš„å…³é”®ç¯èŠ‚ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯Chunkï¼Ÿ</h2>
<p>AIä¸­çš„åˆ†å—æ˜¯æŒ‡å°†å¤§å‹æ–‡æ¡£åˆ†å‰²æˆç§°ä¸ºâ€œchunkâ€çš„è¾ƒå°ç‰‡æ®µã€‚è¿™äº›ç‰‡æ®µå¯ä»¥æ˜¯æ®µè½ã€å¥å­ã€è¯ç»„æˆ–å—tokené™åˆ¶çš„ç‰‡æ®µï¼Œè¿™ä½¿å¾—æ¨¡å‹èƒ½æ›´è½»æ¾åœ°ä»…æœç´¢å’Œæ£€ç´¢æ‰€éœ€å†…å®¹ã€‚è¿™ç§åˆ†å—æŠ€æœ¯å¯¹äºä¼˜åŒ–æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<h2 data-id="heading-2">ä¸ºä»€ä¹ˆåœ¨RAGä¸­éœ€è¦Chunkï¼Ÿ</h2>
<p>åœ¨RAGä¸­ï¼Œæ£€ç´¢åˆ°æ­£ç¡®çš„ä¿¡æ¯æ˜¯å…³é”®ï¼Œä½†å½“çŸ¥è¯†åº“éå¸¸åºå¤§ï¼Œå¯èƒ½åŒ…å«æ•°ç™¾ä¸‡å­—æˆ–æ–‡æ¡£æ—¶ï¼Œä½¿ç”¨æœ‰æ•ˆçš„RAGåˆ†å—æŠ€æœ¯å¯¹äºä»è¿™ç±»å¤§å‹æ•°æ®é›†ä¸­é«˜æ•ˆæ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œå°±å˜å¾—è‡³å…³é‡è¦äº†ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä½ æœ‰ä¸€ä¸ªæœåŠ¡QPSè¾¾åˆ°åƒä¸‡çº§è¿˜è¦åœ¨30mså†…è¿”å›ç»“æœï¼Œè¿™æ—¶ä¸€å®šä¼šæä¸€ç»„æœ¬åœ°ç¼“å­˜çš„é›†ç¾¤ã€‚æŠŠä½ çš„æ•°æ®æŒ‰è§„åˆ™åˆå§‹åŒ–åˆ°ç¼“å­˜é‡Œï¼Œå°±æ˜¯å¯¹åº”çš„RAGçš„Chunkæ“ä½œã€‚</p>
<p>Chunkä¹Ÿæ˜¯RAG ETL Pipelineä¸­Transformç¯èŠ‚çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œå¯ä»¥æ¯”å–»æˆæˆ‘ä»¬åˆ‡è›‹ç³•ï¼Œåœ¨åˆ‡ä¹‹å‰å°±å·²ç»æƒ³å¥½è¦åˆ†å‡ å—äº†ã€‚è®©æˆ‘çœ‹çœ‹â€œåˆ‡è›‹ç³•ğŸ°â€æœ‰å‡ ç§æ‰‹æ³•ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-3">äºŒã€ä¸»æµRAGçš„åˆ†å—ç­–ç•¥è¯¦è§£</h2>
<h3 data-id="heading-4">2.1.å›ºå®šå¤§å°åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e717f4856f4b4d6b8c1e6d1233624a18~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=g2xtCDIgEz0NUrWeff8FwuFXQlU%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æ ¹æ®é¢„å®šä¹‰çš„å­—ç¬¦æ•°æˆ– token æ•°å°†æ–‡æœ¬åˆ†æˆç»Ÿä¸€çš„å—ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œå›ºå®šæ¯å— 500 tokensã€‚å¼•å…¥ â€œé‡å åŒºâ€ï¼ˆOverlapï¼‰æ¥ç¼“è§£ä¸Šä¸‹æ–‡æ–­è£‚é—®é¢˜ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å®ç°ç®€å•ï¼Œå¤„ç†é€Ÿåº¦å¿«ï¼Œä¸ä¾èµ–å¤æ‚æ¨¡å‹ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å¯èƒ½ç ´åè¯­ä¹‰å®Œæ•´æ€§ï¼ˆå¦‚æ‹†åˆ†å¥å­æˆ–æ®µè½ï¼‰ï¼Œå¯¹ç»“æ„å·®å¼‚å¤§çš„æ–‡æ¡£é€‚åº”æ€§å·®ã€‚</p>
<h3 data-id="heading-5">2.2.è¯­ä¹‰åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e691b1f6ab74899b57fedc35ac0bd2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=0PbrXc1dPP93Kudu%2F7nns4uu7GM%3D" alt="" loading="lazy"/></p>
<p>ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> æ ¹æ®æ–‡æœ¬çš„è¯­ä¹‰ç›¸ä¼¼åº¦è€Œéç‰©ç†ç»“æ„è¿›è¡Œåˆ†å—ï¼Œç¡®ä¿æ¯ä¸ª Chunk å†…éƒ¨ä¸»é¢˜é«˜åº¦ç›¸å…³ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> é€šå¸¸é€šè¿‡è®¡ç®—å¥å­ Embedding çš„ä½™å¼¦ç›¸ä¼¼åº¦ï¼Œå½“ç›¸ä¼¼åº¦ä½äºæŸä¸ªé˜ˆå€¼æ—¶è¿›è¡Œåˆ†å‰²ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> èƒ½åˆ›å»ºé€»è¾‘ä¸Šæœ€è¿è´¯çš„ Chunkï¼Œå¯¹åç»­æ£€ç´¢å’Œç”Ÿæˆè´¨é‡æå‡æ˜¾è‘—ã€‚ç‰¹åˆ«é€‚ç”¨äºå¤„ç†ä¸»é¢˜è·³è·ƒè¾ƒå¤šçš„æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> è®¡ç®—æˆæœ¬é«˜ï¼ˆéœ€è¦è°ƒç”¨ Embedding æ¨¡å‹ï¼‰ï¼Œå¤„ç†é€Ÿåº¦è¾ƒæ…¢ã€‚</p>
<h3 data-id="heading-6">2.3.åŸºäºé€’å½’åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/670c024dfd7c43b993949ac771409482~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=NF7aI%2ByLRo0r2qMx0qoUlOT3wV8%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> ä¸€ç§æ›´æ™ºèƒ½çš„ç»„åˆå¼ç­–ç•¥ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºå°è¯•å¤šç§åˆ†éš”ç¬¦è¿›è¡Œé€’å½’åˆ†å‰²ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œä¼˜å…ˆæŒ‰æ®µè½åˆ†å‰²ï¼Œå¦‚æœæ®µè½ä»è¿‡å¤§ï¼Œå†æŒ‰å¥å­åˆ†å‰²ï¼Œæœ€åæ‰æŒ‰å­—ç¬¦æ•°å¼ºåˆ¶åˆ†å‰²ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å°½å¯èƒ½ä¿ç•™é«˜çº§åˆ«çš„è¯­ä¹‰ç»“æ„ï¼ˆæ®µè½ &gt; å¥å­ &gt; ...ï¼‰ï¼Œé€‚åº”æ€§å¼ºï¼Œèƒ½å¤„ç†å¤šç§ç±»å‹æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å®ç°ç¨å¤æ‚ï¼Œæ€§èƒ½å¼€é”€é«˜äºçº¯å›ºå®šå¤§å°åˆ†å—ã€‚</p>
<h3 data-id="heading-7">2.4.åŸºäºæ–‡æ¡£çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0a97488467434bb7a0be391548c9780b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=%2BEmotgSPOZxQkpc1vpbZTKqazUE%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> åˆ©ç”¨æ–‡æ¡£æœ¬èº«çš„å…ƒæ•°æ®å’Œç»“æ„ä¿¡æ¯ï¼ˆå¦‚æ ‡é¢˜å±‚çº§ã€è¡¨æ ¼ã€å›¾ç‰‡è¯´æ˜ã€PDF é¡µç ç­‰ï¼‰è¿›è¡Œæ™ºèƒ½åˆ†å‰²ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œå°†ä¸€ä¸ªä¸€çº§æ ‡é¢˜ä¸‹çš„æ‰€æœ‰å†…å®¹ï¼ˆåŒ…æ‹¬å­æ ‡é¢˜å’Œæ®µè½ï¼‰ä½œä¸ºä¸€ä¸ªå¤§ Chunkï¼Œæˆ–è€…å°†æ¯ä¸ªè¡¨æ ¼å•ç‹¬ä½œä¸ºä¸€ä¸ª Chunkã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> å®Œç¾è´´åˆç‰¹å®šç±»å‹æ–‡æ¡£ï¼ˆå¦‚æ³•å¾‹åˆåŒã€å­¦æœ¯è®ºæ–‡ã€æŠ¥å‘Šï¼‰çš„é€»è¾‘ç»“æ„ï¼Œä¿¡æ¯ç»„ç»‡æ€§å¼ºã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> ä¾èµ–é«˜è´¨é‡çš„æ–‡æ¡£è§£æå’Œç»“æ„è¯†åˆ«ï¼Œé€šç”¨æ€§ç›¸å¯¹è¾ƒå¼±ã€‚</p>
<h3 data-id="heading-8">2.5.æ™ºèƒ½ä½“åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8593b21374bc4634a5f4eed20831a28f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=xz1Qm%2Bdn1fnEl31%2BxgY1bdrERc0%3D" alt="" loading="lazy"/></p>
<p>ï»¿</p>
<p>ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> è¿™æ˜¯ä¸€ç§æ›´å‰æ²¿çš„åŠ¨æ€ç­–ç•¥ï¼Œæ ¹æ® Agent å°†è¦æ‰§è¡Œçš„å…·ä½“ä»»åŠ¡æˆ–ç›®æ ‡æ¥å†³å®šå¦‚ä½•åˆ†å—ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> Agent ä¼šå…ˆç†è§£ä»»åŠ¡ï¼Œç„¶åè‡ªé€‚åº”åœ°ä»æ–‡æ¡£ä¸­æå–å’Œç»„ç»‡æœ€ç›¸å…³çš„ä¿¡æ¯å—ã€‚ä¾‹å¦‚ï¼Œä»»åŠ¡æ˜¯ â€œæ€»ç»“â€ï¼Œåˆ™å¯èƒ½æå–å…³é”®è®ºç‚¹ï¼›ä»»åŠ¡æ˜¯ â€œå›ç­”ç‰¹å®šé—®é¢˜â€ï¼Œåˆ™å¯èƒ½ç²¾å‡†å®šä½ç›¸å…³è¯æ®ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> çµæ´»æ€§å’Œé’ˆå¯¹æ€§æé«˜ï¼Œèƒ½æœ€å¤§åŒ–ä»»åŠ¡æ•ˆæœã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å®ç°å¤æ‚ï¼Œé€šå¸¸éœ€è¦å¼ºå¤§çš„è§„åˆ’å’Œæ¨ç†èƒ½åŠ›ï¼Œç›®å‰è¿˜ä¸æ™®åŠã€‚</p>
<h3 data-id="heading-9">2.6.åŸºäºå¥å­çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62a67aeda6ad49a59bd6f28bfa68daec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=mWfClsUnrnUw4UQKfLkYfblJJso%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> å°†æ–‡æœ¬åˆ†å‰²æˆå®Œæ•´çš„å¥å­ï¼Œç¡®ä¿æ¯ä¸ª Chunk éƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå®Œæ•´çš„æ€æƒ³ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä½¿ç”¨ NLP å·¥å…·ï¼ˆå¦‚ NLTK, SpaCyï¼‰è¯†åˆ«å¥å­è¾¹ç•Œï¼Œç„¶åå¯ä»¥å°†å‡ ä¸ªè¿ç»­çš„å¥å­ç»„åˆæˆä¸€ä¸ª Chunkã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> ä¿è¯äº†åŸºæœ¬çš„è¯­ä¹‰å•å…ƒå®Œæ•´ï¼Œé¿å…äº† â€œåŠå¥è¯â€ çš„é—®é¢˜ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> å¥å­é•¿åº¦å·®å¼‚ä»å¯èƒ½å¯¼è‡´ Chunk å¤§å°ä¸å‡ï¼›å¤šä¸ªå¥å­ç»„åˆæ—¶ï¼Œå¦‚ä½•ç¡®å®šæœ€ä½³ç»„åˆä»éœ€ç­–ç•¥ã€‚</p>
<h3 data-id="heading-10">2.7.åŸºäºæ®µè½çš„åˆ†å—ç­–ç•¥</h3>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbabf005b3df4b2aaa70477648bf3e05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=pomnwhwuKz%2FPfPicHwIalOihUM4%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<p>â€¢<strong>æ ¸å¿ƒæ€æƒ³ï¼š</strong> åŸºäºæ®µè½çš„åˆ†å—ï¼Œé€šè¿‡æç¤ºç¬¦æˆªå–ï¼Œå°†æ•´ä¸ªæ–‡æœ¬åˆ’åˆ†æˆå¤šä¸ªæ®µè½ã€‚è¿™ç§æ–¹å¼åŒæ ·é€‚åˆç»“æ„æ¸…æ™°çš„æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>å·¥ä½œæ–¹å¼ï¼š</strong> ä¾‹å¦‚ï¼Œä¿é™©æ¡æ¬¾ã€æ³•å¾‹ã€è®ºæ–‡ã€ABå®éªŒæŠ¥å‘Šç­‰æ–‡æ¡£ã€‚</p>
<p>â€¢<strong>ä¼˜ç‚¹ï¼š</strong> ä¼˜ç‚¹è‡ªç„¶åˆ†æ®µï¼Œè¯­ä¹‰å®Œæ•´ã€‚</p>
<p>â€¢<strong>ç¼ºç‚¹ï¼š</strong> ç¼ºç‚¹è‡ªç„¶æ˜¯æ®µè½é•¿åº¦ä¸ä¸€ï¼Œå¯èƒ½è¶…tokené™åˆ¶ã€‚</p>
<p>ï»¿</p>
<h3 data-id="heading-11">å…¶ä»–</h3>
<p>é™¤ä»¥ä¸Š7ç§å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå¤§ç¥ä»¬æ€»ç»“çš„åˆ‡å—æ–¹æ³•è®ºï¼Œå¦‚æŒ‰ç…§tokenã€æŒ‰ç…§å±‚çº§ï¼ŒæŒ‰ç…§excel sheeté¡µï¼ŒæŒ‰ç…§pdfé¡µç ç­‰ã€‚éƒ½æ˜¯é’ˆå¯¹ç‰¹å®šåœºæ™¯ã€‚ä¸‹é¢æˆ‘ç»“åˆ<strong>å®æˆ˜</strong>å’Œ<strong>ä¸­æ–‡</strong>çš„åˆ‡å—çš„æ–¹æ³•è®ºåšä¸€ä¸‹æ€»ç»“ã€‚</p>
<p>ï»¿</p>
<h2 data-id="heading-12">ä¸‰ã€åˆ†å—ç­–ç•¥çš„é€‰æ‹©ä¸å®æˆ˜ä¼˜åŒ–</h2>
<h3 data-id="heading-13">3.1. æ²¡æœ‰â€œä¸‡èƒ½â€çš„åˆ†å—ç­–ç•¥</h3>
<p>ç°å®ä¸­ä¸å­˜åœ¨ä¸€ç§â€œone-for-allâ€ çš„æ•°æ®è¯»å–å’Œåˆ†å—æ–¹æ³•ï¼Œç‰¹åˆ«åƒæ˜¯ PDF å’Œ Word è¿™ç±»å¤æ‚æ ¼å¼çš„æ–‡æ¡£ã€‚æ¯”è¾ƒæµè¡Œçš„æ–¹æ¡ˆæ˜¯å®ç”¨DeepDocï¼ˆOCRã€TSRã€DLRï¼‰ï¼Œæ‰€ä»¥å®é™…ä¸­åº”æ ¹æ®ä¸šåŠ¡ï¼Œåˆ¶ä½œä¸åŒçš„æ¨¡æ¿ã€‚é‚£ä¹ˆè¯„ä¼°Chunkçš„å‚æ•°å’ŒæŒ‡æ ‡æœ‰å“ªäº›å‘¢ï¼Ÿ æŒ‡æ ‡å°±æ˜¯<strong>Precisionå’ŒRecall</strong>ï¼Œè¯¦ç»†çœ‹è¡¨æ ¼ <strong>ï¼š</strong></p>

























<table><thead><tr><th>å‚æ•°</th><th>å‚è€ƒå€¼</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>chunk_size</td><td>512-1024</td><td>1.åˆ‡çš„è¶Šå°chunksæ•°è¶Šå¤šï¼Œæ‰€ä»¥chunk_sizeè·Ÿä½ çš„top-kå€¼æœ‰å…³ã€‚åœ¨ Recall å·®ä¸å¤šçš„æƒ…æ³ä¸‹ï¼Œå¯ä»¥é€‰Precision é«˜çš„ï¼Œæ¯”è¾ƒæœ‰æ•ˆç‡ã€‚ 2.å¦‚æœæ˜¯èƒ½åŠ›å¼·çš„å¤§æ¨¡å‹ï¼ŒPrecision ä½ä¸€é»ï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚ 3.å¦‚æœæ˜¯èƒ½åŠ›å¼±çš„å°æ¨¡å‹ï¼Œå®¹æ˜“è¢«å™ªå£°å½±å“ï¼ŒPrecision å¤ªä½ä¸å¥½ï¼Œå› æ­¤åˆ‡å—éœ€è¦è°ƒå°ã€‚ 4.ä¸ºä»€ä¹ˆé»˜è®¤å€¼æ˜¯512ï¼Ÿä¸ä¸»æµé¢„è®­ç»ƒè¯­è¨€æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£å¤§å°ï¼ˆå¦‚BERTçš„512ï¼‰ä¿æŒå…¼å®¹ã€‚</td></tr><tr><td>separator</td><td>/n</td><td>åˆ†éš”ç¬¦</td></tr><tr><td>overlap</td><td>10%-15%</td><td>é€šå¸¸é‡å å—é•¿åº¦åœ¨10%-20%ä¹‹é—´</td></tr></tbody></table>
<p>ï»¿</p>
<p>Chunkå‚æ•°ä¸æŒ‡æ ‡ï¼Œæˆ‘è®¾è®¡äº†ä¸¤å¥—ç­–ç•¥ï¼š512/10%å’Œ2500/25 ï¼ˆå•ä½tokenï¼‰</p>

















<table><thead><tr><th>é€šç”¨ç­–ç•¥ï¼ˆ512/10%ï¼‰</th><th>æœ€å¤§ä¸Šä¸‹æ–‡ç­–ç•¥ï¼ˆ2500/25ï¼‰</th></tr></thead><tbody><tr><td>chunk_sizeï¼š512ä¸ªtokenï¼Œçº¦450å¤šä¸ªæ±‰å­—æ˜¯ç›¸å¯¹ä¸­ç­‰çš„åˆ‡å—å¤§å°ã€‚è¿™ä¸ªå¤§å°è¶³ä»¥å®¹çº³å®Œæ•´çš„å‰§ç»„æˆ–æ®µè½ã€‚å¤§å¤šæƒ…å†µå¯ä»¥åœ¨â€œå‡†ç¡®ç‡â€ä¸â€œä¸Šä¸‹æ–‡å®Œæ•´æ€§â€ä¹‹é—´å–çš„å¹³è¡¡</td><td>chunk_sizeï¼š2500ä¸ªtokenç›¸å½“äº2000å¤šä¸ªæ±‰å­—ï¼Œå±äºéå¸¸å¤§çš„æ–‡æœ¬å—äº†ã€‚è¿™ä¸ªè®¾å®šçš„èƒŒåé€»è¾‘æ˜¯åˆ©ç”¨ç°åœ¨çš„å¤§æ¨¡å‹ï¼ˆGPT-5.1ã€gemini 3ï¼‰çš„è¶…å¤§tokenã€‚å½“ä»»åŠ¡æ˜¯è¿›è¡Œé•¿ç¯‡æ–‡ä»¶çš„æ·±åº¦æ€è€ƒæ¨ç†æ—¶ï¼Œå¯ä»¥æä¾›ä¸°å¯Œçš„ä¿¡æ¯ç»™åˆ°æ¨¡å‹ï¼Œä»è€Œè·å¾—è¾ƒé«˜çš„Precisionã€‚</td></tr><tr><td>overlapï¼š10%æ˜¯æ¯”è¾ƒä¸­åº¸è®¾å®šï¼Œæ˜¯ä¸šç•Œæ™®éçš„å»ºè®®ï¼Œèƒ½ç¼“è§£è¾¹ç•Œåˆ‡å‰²é—®é¢˜ã€‚</td><td>overlapï¼š10ä¸ªå·¦å³æ±‰å­—ï¼ŒåŸºæœ¬å¯ä»¥å¿½ç•¥äº†ï¼Œè¶…å¤§æ–‡æœ¬å—è¢«åˆ‡å‰²çš„å‡ ç‡ç›¸å¯¹è¾ƒå°ã€‚</td></tr></tbody></table>
<h3 data-id="heading-14">ï»¿</h3>
<h3 data-id="heading-15">3.2.Chunkç­–ç•¥çš„é€‰æ‹©</h3>
<p>æˆ‘çš„æ–¹æ³•è®ºï¼š<strong>æ®µè½åˆ†å—ï¼ˆParagraph Chunkingï¼‰ï¼Œå¥å­åˆ†å—ï¼ˆSemantic Chunkingï¼‰ï¼Œé€’å½’åˆ†å—ï¼ˆRecursive Chunkingï¼‰ï¼Œè¯­ä¹‰åˆ†å—ï¼ˆSemantic Chunkingï¼‰ã€‚</strong></p>
<p>ç°åœ¨çš„RAGæ¡†æ¶åŸºæœ¬éƒ½æ˜¯åŸºäºæ®µè½æˆ–å¥å­æ¥åˆ†å—ï¼Œä¹Ÿéƒ½éƒ½æ”¯æŒï¼ˆ\nã€‚ï¼›ï¼ï¼Ÿï¼‰çš„é€’å½’åˆ†å—ã€‚é‚£ä»è¿è¥ç”¨æˆ·è§’åº¦å‡ºå‘ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡åˆ‡çš„æ—¶å€™ï¼Œå¦‚ä½•å‚»ç“œå¼æ“ä½œå‘¢ï¼ŸRAGFlowäº¤å‡ºäº†ä¸€ä»½æ–¹æ¡ˆï¼Œçœ‹ä¸€ä¸‹å®ƒçš„åˆ†å—æ ¸å¿ƒç®—æ³•</p>
<p>ï»¿</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63a86ad1118a49449dcaf1d79b33dd69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764752159&amp;x-signature=dxXiwgAZLZHvrkAc%2BjYkTAJTjsQ%3D" alt="" loading="lazy"/></p>
<p>ï»¿ï»¿</p>
<h2 data-id="heading-16">å››ã€æ–¹æ³•è®ºæ€»ç»“</h2>
<p>å¦‚ä½•å¼€å§‹ï¼Ÿå¯ä»¥ä»512 tokens æ­é… 10-15%çš„é‡å ç‡å¼€å§‹ã€‚</p>
<p>å¦‚ä½•ä¼˜åŒ–ï¼Ÿè°ƒè¯•å‚æ•°ï¼Œå¤šä½¿ç”¨é€’å½’åˆ†å—å’Œå¥å­åˆ†å—ï¼Œè¯­ä¹‰åˆ†å—è¿˜æ˜¯ä¸å¤Ÿä¼˜ç§€ã€‚</p>
<p>å¦‚ä½•æµ‹è¯„ï¼Ÿä¸Šå· <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbrandonstarxel%2Fchunking_evaluation" target="_blank" title="https://github.com/brandonstarxel/chunking_evaluation" ref="nofollow noopener noreferrer">chunking_evaluation </a>ï»¿</p>
<p>æœ‰å’Œæ–¹æ³•è®ºï¼Ÿ ä¸Šå· <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2401.17043" target="_blank" title="https://arxiv.org/abs/2401.17043" ref="nofollow noopener noreferrer">CRUD-RAG</a> è®ºæ–‡æŒ‡å‡ºå¯¹äºåˆ›æ„ç”Ÿæˆå’Œä¿æŒæ–‡ç« è¿è´¯æ€§çš„ä»»åŠ¡ï¼Œåˆ‡åˆ†è¾ƒå¤§çš„å—è¡¨ç°ä¼šæ›´ä½³ã€‚æˆ‘ä»¬åœ¨</p>
<p>ï»¿<a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2309.15217.pdf" target="_blank" title="https://arxiv.org/pdf/2309.15217.pdf" ref="nofollow noopener noreferrer">RAGas</a>å®éªŒä¹Ÿå¾—åˆ°äº†ç›¸åŒçš„ç­”æ¡ˆã€‚</p>
<p>ï»¿</p>
<p>å¥½äº†ï¼Œä»¥ä¸Šæ˜¯æˆ‘ä»¬çš„å®è·µæ€»ç»“ï¼Œå¸Œæœ›èƒ½å¸®åˆ°å¤§å®¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7576827115967791139</link>    <guid>https://juejin.cn/post/7576827115967791139</guid>    <pubDate>2025-11-26T08:38:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576827115967791139" data-draft-id="7576661150684299279" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2025-11-26T08:38:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agentic æ—¶ä»£å¿…å¤‡æŠ€èƒ½ï¼šæ‰‹æŠŠæ‰‹ä¸º Dify åº”ç”¨æ„å»ºå…¨é“¾è·¯å¯è§‚æµ‹ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T08:38:32.000Z" title="Wed Nov 26 2025 08:38:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šè¨€åˆã€å¤ç¦</p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Dify æ˜¯æ—¶ä¸‹çƒ­é—¨çš„ä½ä»£ç  LLM åº”ç”¨å¼€å‘å¹³å°ï¼Œå…¶ä¸°å¯Œçš„æ¨¡å‹æ”¯æŒã€Prompt ç¼–æ’ã€RAG å¼•æ“ã€Workflow/Agent æ¡†æ¶ä»¥åŠæ’ä»¶ç”Ÿæ€å¤§å¤§ä¾¿åˆ©äº† Agentic åº”ç”¨çš„å¼€å‘ã€‚</p>
<p>ç”Ÿäº§çº§çš„ Agentic åº”ç”¨æ¶‰åŠå¤§é‡åŠ¨æ€å†…å®¹ï¼Œè¯¸å¦‚å†å²ä¼šè¯ã€è®°å¿†å¤„ç†ï¼Œå·¥å…·è°ƒç”¨ã€çŸ¥è¯†åº“å¬å›ï¼Œæ¨¡å‹ç”Ÿæˆï¼Œè„šæœ¬æ‰§è¡Œå’Œæµç¨‹æ§åˆ¶ç­‰ç¯èŠ‚ç»™ Agentic åº”ç”¨ç”Ÿæˆçš„æ•ˆæœå¸¦æ¥å¾ˆå¤§ä¸ç¡®å®šæ€§ã€‚å¯è§‚æµ‹æ€§è´¯ç©¿ Agentic åº”ç”¨å¼€å‘è°ƒè¯•ã€è¿ç»´è¿­ä»£çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä¸²è” Agentic åº”ç”¨æ‰§è¡Œå’Œä¸Šä¸‹æ¸¸ç³»ç»Ÿä¸­çš„å·¥å…·ã€æ¨¡å‹å’Œè°ƒç”¨æ–¹ï¼Œæ˜¯æ”¯æ’‘ Agentic åº”ç”¨ç”Ÿäº§è½åœ°çš„å…³é”®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c767555e86904128bcb30e84159e00ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=7QQ5BnNtSRW7YJlOXR3KFnAgI9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-1">Dify å¯è§‚æµ‹çš„ä¸¤ä¸ªè§†è§’ä¸¨å¼€å‘è€… &amp; è¿ç»´æ–¹</h3>
<p>å¯¹ Dify è¿™ç±»ä½ä»£ç å¹³å°çš„å¯è§‚æµ‹æ€§éœ€æ±‚ï¼Œæœ‰å¼€å‘è€…å’Œå¹³å°è¿ç»´ä¸¤ä¸ªè§†è§’ã€‚</p>
<p>Agentic åº”ç”¨å¼€å‘è€…ä½¿ç”¨ Dify SaaS æˆ–è‡ªéƒ¨ç½²çš„ Dify æœåŠ¡å¼€å‘ Workflow åº”ç”¨ï¼Œä¸“æ³¨äº Workflow çš„æ„å»ºï¼Œè§‚æµ‹çš„ä¸»ä½“æ˜¯ Dify å¹³å°ä¸Šè¿è¡Œçš„ä¸€ä¸ªä¸ª Workflow åº”ç”¨ã€‚å…³æ³¨ç‚¹åœ¨äº Workflow æ•´ä½“å’Œå…¶ä¸­ RAGã€Toolã€LLM ç­‰å„ä¸ªæ­¥éª¤çš„æ‰§è¡Œï¼Œå¼€å‘è€…ä¾èµ–å¯è§‚æµ‹æœåŠ¡ç›‘æµ‹å¤§æ¨¡å‹åº”ç”¨ç”Ÿæˆæ•ˆæœå’Œæ€§èƒ½ï¼Œè¿½è¸ªç”¨æˆ·å¤šè½®ä¼šè¯çš„äº¤äº’ä½“éªŒã€‚åœ¨ Agentic åº”ç”¨å¼€å‘æ„å»ºå’Œä¸Šçº¿åçš„è¿­ä»£ç»´æŠ¤é˜¶æ®µå¯è§‚æµ‹èƒ½åŠ›éƒ½æ˜¯ Agentic åº”ç”¨æŒç»­ä¼˜åŒ–çš„å…³é”®ã€‚</p>
<p>Dify å¹³å°è¿ç»´æ–¹å…³æ³¨ Dify é›†ç¾¤ä¸­ä»åŸºç¡€è®¾æ–½åˆ°å„ä¸ªç»„ä»¶çš„è´Ÿè½½å’Œå¼‚å¸¸æƒ…å†µï¼Œç®¡ç† Dify å’Œä¸Šä¸‹æ¸¸çš„æœåŠ¡å’Œä¾èµ–ï¼Œè§‚æµ‹çš„ä¸»ä½“æ˜¯ Dify é›†ç¾¤åŠå…¶ä¸Šä¸‹æ¸¸ä¾èµ–ã€‚Dify é›†ç¾¤åŒ…å«æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€ä»»åŠ¡é˜Ÿåˆ—ã€æ²™ç®±ç¯å¢ƒå’Œå­˜å‚¨æœåŠ¡ç­‰åå¤šä¸ªç»„ä»¶ï¼›åŒæ—¶è¿˜æ¶‰åŠè°ƒç”¨æ–¹ã€æ¨¡å‹æœåŠ¡ã€å·¥å…·è®¿é—®ã€å¤–éƒ¨çŸ¥è¯†åº“ç­‰ä¸Šä¸‹æ¸¸ä¾èµ–ã€‚è¯·æ±‚è¿‡ç¨‹çš„å…¨é“¾è·¯å¯è§‚æµ‹æ˜¯çº¿ä¸Šé—®é¢˜è¿½æº¯ï¼Œæ€§èƒ½ç“¶é¢ˆå®šä½çš„å…³é”®å·¥å…·ã€‚</p>
<h3 data-id="heading-2">Dify å¯è§‚æµ‹ç°çŠ¶ &amp; ç—›ç‚¹</h3>
<p>å¯è§‚æµ‹æ€§ä¸€ç›´æ˜¯ Dify ç¤¾åŒºæ´»è·ƒçš„è®®é¢˜ï¼Œç›®å‰ Dify åŸç”Ÿæ”¯æŒçš„å¯è§‚æµ‹èƒ½åŠ›ç”±ä¸‰ä¸ªæ–¹é¢ç»„æˆã€‚</p>
<p>å…¶ä¸€æ˜¯Â <strong>Dify å†…ç½®çš„åº”ç”¨ç›‘æ§èƒ½åŠ›</strong>ï¼Œæ•°æ®é‡‡è‡ª Dify æ‰§è¡Œå¼•æ“è¿è¡Œè¿‡ç¨‹ä¸­ç”Ÿæˆçš„æ‰§è¡Œæ˜ç»†è®°å½•ï¼Œå­˜å‚¨åœ¨ Dify æ•°æ®åº“å†…ã€‚å…¶ç‰¹ç‚¹æ˜¯å’Œ Dify è‡ªèº«çš„é›†æˆåº¦æœ€é«˜ï¼Œåœ¨å¼€å‘è°ƒè¯•é˜¶æ®µä½¿ç”¨éå¸¸æ–¹ä¾¿ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/776d30c9592a49b4801e8ec4e981b2a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Bvb6t4ibpQAQB1RtQXuSYA7dYBI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç„¶è€Œå†…ç½®çš„åº”ç”¨ç›‘æ§åœ¨åˆ†æèƒ½åŠ›å’Œæ€§èƒ½ä¸¤ä¸ªæ–¹é¢å­˜åœ¨ä¸è¶³ã€‚åœ¨åˆ†æèƒ½åŠ›ä¸Šï¼ŒWorkflow ä¸Šçº¿åå¯¹å…¶è§‚æµ‹æ•°æ®éœ€è¦å¤šç»´åº¦çš„èšåˆåˆ†ææˆ–äºŒæ¬¡åŠ å·¥ï¼Œé—®é¢˜æ’æŸ¥ä¹Ÿéœ€è¦å…³é”®å­—ã€æ—¶é—´èŒƒå›´ã€æ¨¡ç³ŠåŒ¹é…ã€é”™è¯¯ç±»å‹ç­‰å¤šç»´åº¦çš„æ£€ç´¢èƒ½åŠ›ï¼Œä½† Dify è‡ªå¸¦çš„ç›‘æ§åªèƒ½é€šè¿‡ä¼šè¯ ID å’Œç”¨æˆ· ID ç­‰æœ‰é™æ–¹å¼æ£€ç´¢ï¼Œä¸èƒ½æ»¡è¶³æ•°æ®åˆ†æå’Œé—®é¢˜æ’æŸ¥çš„éœ€è¦ã€‚åœ¨æ€§èƒ½ä¸Šï¼Œå—é™äºåœ¨ DB ä¸­è®°å½•æ‰§è¡Œæ—¥å¿—çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå†…ç½®åº”ç”¨ç›‘æ§åœ¨å¤§è§„æ¨¡åº”ç”¨çš„ç”Ÿäº§ç¯å¢ƒä¸‹æ€§èƒ½ä¸ä½³ï¼Œæ—¥å¿—æ•°æ®åŠ è½½è¾ƒæ…¢ç”šè‡³å¤§é‡çš„æ‰§è¡Œæ˜ç»†æ•°æ®ä¼šæ‹–æ…¢æ•°æ®åº“æ•´ä½“æ€§èƒ½ï¼Œéœ€è¦åœ¨åå° Celery ä»»åŠ¡ä¸­é…ç½®æ¸…ç†ä»»åŠ¡å‘¨æœŸæ€§æ¸…ç†æ—¥å¿—æ•°æ®ã€‚</p>
<p>å…¶äºŒæ˜¯Â <strong>Dify å®˜æ–¹é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨è¿½è¸ªæœåŠ¡</strong>ï¼ŒåŒ…æ‹¬<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a> / Langfuse å’Œ LangSmith ç­‰ã€‚æ•°æ®é‡‡è‡ª Dify ç‰¹æœ‰çš„ OpsTrace äº‹ä»¶æœºåˆ¶å’Œ Dify å¼•æ“ç”Ÿæˆçš„æ‰§è¡Œæ˜ç»†è®°å½•ï¼Œä¸»è¦é‡‡é›† Workflow/Agent å±‚é¢çš„å¤§æ¨¡å‹ã€å·¥å…·ã€çŸ¥è¯†åº“å¬å›ç­‰èŠ‚ç‚¹ä¿¡æ¯ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘äº‘ç›‘æ§</a>ä» Dify v1.6.0 èµ·ä¹Ÿé›†æˆäº† Dify å®˜æ–¹å¯è§‚æµ‹èƒ½åŠ›ï¼Œæä¾›å…¨æ‰˜ç®¡å…è¿ç»´çš„å¯è§‚æµ‹æœåŠ¡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7de98bd86d5c4172b97fdb9d68cf1d47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=W8qHsqwkBVrVXTVixPPMlOEtgQk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç¬¬ä¸‰æ–¹é›†æˆçš„è¿½è¸ªæœåŠ¡ç—›ç‚¹åœ¨äº<strong>æ•°æ®é‡‡é›†ç²’åº¦å—é™ä¸”ç¼ºå°‘å…¨é“¾è·¯è¿½è¸ªèƒ½åŠ›</strong>ã€‚Dify é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨è¿½è¸ªæœåŠ¡ä¸»è¦å…³æ³¨ Agentic åº”ç”¨å¼€å‘è€…è§†è§’ä¸‹çš„ Wrokflow æ‰§è¡Œæƒ…å†µï¼Œæ›´å¤šåœ°ç”¨äº Prompt è°ƒä¼˜ã€Wrokflow ä¼˜åŒ–ã€æ•°æ®åˆ†æç­‰åœºæ™¯ï¼Œä½†å¯¹äºè‡ªå»º Dify é›†ç¾¤æ—¶å¹³å°è¿ç»´æ–¹çš„é›†ç¾¤ç›‘æ§å’Œä¸Šä¸‹æ¸¸å…¨é“¾è·¯é—®é¢˜æ’æŸ¥èƒ½æä¾›çš„å¸®åŠ©å°±å¾ˆæœ‰é™ã€‚åŒæ—¶å—é™äº Dify çš„ OpsTrace æœºåˆ¶ï¼Œèƒ½å¤Ÿé‡‡é›†çš„æ•°æ®ç²’åº¦åœ¨ Workflow èŠ‚ç‚¹å±‚é¢ï¼Œå…¶ä»–æ›´ç»†ç²’åº¦çš„æ•°æ®æ”¯æŒèµ·æ¥æ¯”è¾ƒå›°éš¾ã€‚</p>
<p>å…¶ä¸‰æ˜¯å¯¹Â <strong>Dify é›†ç¾¤è‡ªèº«çš„å¯è§‚æµ‹æ€§</strong>ï¼Œé¢å‘ Dify é›†ç¾¤å„ç»„ä»¶åŠä¸Šä¸‹æ¸¸ä¾èµ–çš„å…¨é“¾è·¯å¯è§‚æµ‹ã€‚ç›®å‰ Dify åŸç”Ÿæ”¯æŒ Sentry å’Œ OpenTelemetry ä¸¤å¥—å¯è§‚æµ‹æ–¹å¼ã€‚ä¸¤è€…ä¸»è¦é‡‡é›† Flaskã€HTTPã€DBã€Redisã€Celery ç­‰æ¡†æ¶å±‚é¢çš„æ•°æ®ï¼Œå¯¹ Dify è‡ªèº«çš„å†…éƒ¨æ‰§è¡Œé€»è¾‘æœªåšåŸ‹ç‚¹ã€‚Sentry ç”±äºç›¸å¯¹å°é—­ï¼Œç›®å‰ç¤¾åŒº issue ä¸»è¦è½¬å‘æ›´å¼€æ”¾çš„ OTel ç”Ÿæ€ã€‚</p>
<p>åŸç”Ÿ OTel æ–¹å¼çš„ç—›ç‚¹åœ¨äº<strong>é‡‡é›†çš„æ•°æ®éå¸¸æœ‰é™ï¼Œæ— æ³•ä¸²è”ä¸Šä¸‹æ¸¸</strong>å®ç°å…¨é“¾è·¯è¿½è¸ªä¸”æ— æ³•ä¸ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®è”åŠ¨ã€‚åŸç”Ÿçš„ OTel åªæ”¯æŒå¯¹ Dify æ‰§è¡Œå¼•æ“å’Œ Celery ä»»åŠ¡ç»„ä»¶åŸ‹ç‚¹ï¼Œé‡‡é›†çš„ä¿¡æ¯å¹¶ä¸å®Œæ•´ï¼ŒåŒæ—¶ç”±äº Dify æ¶æ„å¤æ‚ä¸”å­˜åœ¨éƒ¨åˆ†è‡ªå®šä¹‰åè®®ï¼Œç¼ºå°‘å…¨é“¾è·¯å¯è§‚æµ‹ä»¥åŠå’Œ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®è”åŠ¨çš„èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-3">Dify å…¨æ™¯å¯è§‚æµ‹â€”â€”æŒ‘æˆ˜ä¸æ–¹æ¡ˆ</h2>
<p>é’ˆå¯¹ç°æœ‰å¯è§‚æµ‹æ–¹æ¡ˆçš„ç—›ç‚¹ï¼Œäº‘ç›‘æ§ä¸Šçº¿äº† Dify å…¨ç»„ä»¶æ— ä¾µå…¥æ¢é’ˆ + Dify å®˜æ–¹é›†æˆçš„åº”ç”¨è¿½è¸ªæœåŠ¡ç»„åˆçš„ Dify å…¨æ™¯å¯è§‚æµ‹è§£å†³æ–¹æ¡ˆï¼Œæ»¡è¶³ Dify Agentic åº”ç”¨å¼€å‘è€…å’Œ Dify å¹³å°ç»´æŠ¤è€…ä¸¤ä¸ªè§†è§’å¯¹å¯è§‚æµ‹æ€§çš„éœ€è¦ï¼Œå®ç°å¯¹æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€æ²™ç®±ç¯å¢ƒã€æ’ä»¶è¿è¡Œæ—¶ä»¥åŠ Workflow åº”ç”¨çš„å…¨æ–¹ä½ç›‘æ§ã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œå›  Dify æ¶æ„å¤æ‚è¿­ä»£è¿…é€Ÿï¼Œå…¨æ™¯å¯è§‚æµ‹çš„å®ç°é¢ä¸´å¤šé¡¹æŒ‘æˆ˜ï¼š</p>
<h3 data-id="heading-4">1. Dify ç»„ä»¶ä¼—å¤šï¼Œæ‰§è¡Œé“¾è·¯å¤æ‚</h3>
<p>Dify è¯·æ±‚ç»è¿‡ç½‘å…³å…¥å£ã€æ‰§è¡Œå¼•æ“ã€æ’ä»¶å¼•æ“ã€ä»£ç æ²™ç®±ã€æ’ä»¶è¿è¡Œæ—¶ç­‰å¤šä¸ªç»„ä»¶ï¼Œå…³è” Celery åå°ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ’ä»¶è¿è¡Œæ—¶å—æ’ä»¶å¼•æ“çš„ç§æœ‰åè®®ç®¡ç†ï¼Œé“¾è·¯å¤æ‚ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Fcms%3Fspm%3Da1z389.11499242.0.0.65452413vvcY0e%26utm_content%3Dg_1000408141" target="_blank" title="https://www.aliyun.com/product/cms?spm=a1z389.11499242.0.0.65452413vvcY0e&amp;utm_content=g_1000408141" ref="nofollow noopener noreferrer">äº‘ç›‘æ§</a>ä¸ºæ‰§è¡Œå¼•æ“ã€æ’ä»¶è¿è¡Œæä¾› Python æ¢é’ˆï¼Œé€šè¿‡å‡½æ•° Patch å®ç°é›¶ä»£ç æ”¹åŠ¨çš„æ— ä¾µå…¥åŸ‹ç‚¹ï¼›ä¸ºæ’ä»¶å¼•æ“å’Œä»£ç æ²™ç®±æä¾› Go æ¢é’ˆï¼Œé€šè¿‡ç¼–è¯‘æ—¶æ’æ¡©å®ç°æ— ä¾µå…¥æ³¨å…¥ï¼›ä¸º Nginx å’Œ Celery ä»»åŠ¡é˜Ÿåˆ—æä¾› OTel æ¢é’ˆçš„è§£å†³æ–¹æ¡ˆï¼›å¯¹äºç”Ÿå‘½å‘¨æœŸå—æ’ä»¶å¼•æ“ç®¡æ§çš„æ’ä»¶è¿è¡Œæ—¶ï¼Œé€šè¿‡ä»£ç æ’æ¡©æ”¹é€ æ’ä»¶æ‹‰èµ·æµç¨‹ï¼Œå¼•å…¥æ¢é’ˆæŒ‚è½½é€»è¾‘ã€‚æœ€ç»ˆå¯¹ Dify é›†ç¾¤å†…çš„å„ä¸ªç»„ä»¶ï¼Œåªéœ€é…ç½®ç¯å¢ƒå˜é‡å¹¶ä¿®æ”¹å¯åŠ¨å‘½ä»¤å³å¯å®ç°æ— ä¾µå…¥æ³¨å…¥ã€‚</p>
<h3 data-id="heading-5">2. Dify è¿­ä»£è¿…é€Ÿï¼Œä»£ç å˜åŠ¨é¢‘ç¹</h3>
<p>Dify ç¤¾åŒºå·²æœ‰ 1000+ è´¡çŒ®è€…ï¼Œç»å¸¸ä¸€å‘¨ç”šè‡³æ•°å¤©å‘å¸ƒä¸€ä¸ªç‰ˆæœ¬ã€‚Dify å®ç°çš„é¢‘ç¹å˜åŠ¨ç»™æ— ä¾µå…¥æ¢é’ˆçš„å®ç°å¸¦æ¥å¾ˆå¤§æŒ‘æˆ˜ï¼Œçº¯æ— ä¾µå…¥æ–¹å¼å¾ˆéš¾è·Ÿä¸Š Dify çš„å‘ç‰ˆèŠ‚å¥ã€‚</p>
<p>äº‘ç›‘æ§å›¢é˜Ÿå’Œç¤¾åŒºç§¯æåˆä½œï¼Œå¯¹æ¥å®˜æ–¹æä¾›çš„ç¬¬ä¸‰æ–¹é›†æˆæ–¹å¼ï¼Œå¯¹äº Dify å†…éƒ¨æ˜“å˜çš„ Workflow æ‰§è¡Œé€»è¾‘é‡‡ç”¨å®˜æ–¹æ–¹å¼ä¸ŠæŠ¥ï¼Œç”±ç¤¾åŒºç»´æŠ¤ç‰ˆæœ¬æ›´è¿­å¼•èµ·çš„æ”¹åŠ¨ã€‚åŒæ—¶åœ¨æ— ä¾µå…¥æ¢é’ˆä¸­å¯¹ Dify å†…éƒ¨æ–¹æ³•åšæœ€å°ä¾èµ–ï¼Œä»…å¤„ç†æ¡†æ¶å±‚é¢çš„åŸ‹ç‚¹å’Œä¸Šä¸‹æ–‡ä¼ é€’è¿‡ç¨‹ä¸­çš„æ–­é“¾é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">3. Dify å®˜æ–¹é›†æˆçš„ç›‘æµ‹å’Œ OTel ç”Ÿæ€éš¾ä»¥ä¸²è”</h3>
<p>Dify å®˜æ–¹é›†æˆçš„ç¬¬ä¸‰æ–¹åº”ç”¨ç›‘æ§æœåŠ¡ä½¿ç”¨ Dify è‡ªå®šä¹‰çš„ OpsTrace æœºåˆ¶ï¼Œé‡‡ç”¨å¼‚æ­¥åèšåˆçš„æ–¹å¼ä¸ŠæŠ¥è¿½è¸ªæ•°æ®ï¼Œè¿™å’Œæ ‡å‡†çš„ OTel å®ç°å­˜åœ¨è¾ƒå¤§å·®å¼‚ã€‚ç°æœ‰çš„é›†æˆæ–¹å¦‚ Langfuse ç­‰éƒ½æ— æ³•å®ç°å®˜æ–¹çš„åº”ç”¨è¿½è¸ªå’Œå…¨é“¾è·¯è¿½è¸ªç»“åˆã€‚</p>
<p>äº‘ç›‘æ§é‡‡ç”¨ OTel æ ¼å¼ä¸ŠæŠ¥æ•°æ®ï¼Œåœ¨ Dify å¼•æ“æŒ‚è½½æ¢é’ˆæ—¶å°† traceId ä¿¡æ¯é€ä¼ åˆ°åå°çš„ Celery ä»»åŠ¡ï¼Œé€šè¿‡ Trace Link æ–¹å¼å…³è” Dify å®˜æ–¹é›†æˆæ–¹å¼ä¸ŠæŠ¥çš„ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®å’Œæ— ä¾µå…¥æ¢é’ˆä¸ŠæŠ¥çš„å…¨é“¾è·¯è¿½è¸ªæ•°æ®ï¼Œå®ç°å…¨æ™¯å¯è§‚æµ‹ã€‚</p>
<h2 data-id="heading-7">äº‘ç›‘æ§å¯è§‚æµ‹é›†æˆ</h2>
<h3 data-id="heading-8">æ¥å…¥é€Ÿè§ˆ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/215a805636554690a9cb18dfec64518d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=lF5XO8gHh%2BBTw7jDXYCdTX3wo%2B0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>äº‘ç›‘æ§ç»™ Dify çš„å„ä¸ªç»„ä»¶éƒ½æä¾›äº†å¯è§‚æµ‹æ–¹æ¡ˆï¼Œå…¶ä¸­ Workflow åº”ç”¨æ— éœ€æŒ‚è½½æ¢é’ˆï¼Œåœ¨ Dify æ§åˆ¶å°ä¸Šä¸ºéœ€è¦ç›‘æ§çš„åº”ç”¨å¼€å¯è¿½è¸ªå³å¯ã€‚å…¶ä½™ç»„ä»¶éœ€è¦æŒ‚è½½æ¢é’ˆå®ç°ç›‘æ§ï¼Œå…¶ä¸­ API å’Œ Plugin-Daemon æ˜¯æ ¸å¿ƒçš„å·¥ä½œæµå’Œæ’ä»¶ç³»ç»Ÿæ‰§è¡Œå¼•æ“ï¼Œæ¨èä¼˜å…ˆæŒ‚è½½ã€‚Sandboxã€Workerã€Nginx æŒ‰éœ€å¯é€‰æŒ‚è½½ã€‚</p>
<h3 data-id="heading-9">ç‰ˆæœ¬è¦æ±‚</h3>
<h4 data-id="heading-10">Python æ¢é’ˆ</h4>
<p>ä½¿ç”¨æœ€æ–°ç‰ˆ Python æ¢é’ˆå³å¯ï¼ŒDify v1.x ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œå› ä¸ºåªé‡‡ HTTP/Flask/Redis/DB ç­‰æ¡†æ¶å±‚æ•°æ®ï¼Œæ‰€ä»¥ Python æ¢é’ˆå¯¹ Dify ç‰ˆæœ¬æ— å¼ºè¦æ±‚ã€‚Dify v1.8.0 ä»¥åçš„ç‰ˆæœ¬æ”¯æŒé€šè¿‡ Trace Link æ–¹å¼ä¸²è” Dify å®˜æ–¹é›†æˆä¸ŠæŠ¥çš„ Workflow æ‰§è¡Œæ˜ç»†æ•°æ®ã€‚</p>
<h4 data-id="heading-11">Go æ¢é’ˆ</h4>
<p>ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„ Go æ¢é’ˆå³å¯ï¼ŒDify v1.x ç‰ˆæœ¬éƒ½å¯ç”¨ï¼Œæä¾›å¯¹ dify-plugin-damon çš„ç›‘æ§ï¼ŒåŒæ—¶æ”¯æŒå¯¹æ’ä»¶ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç›‘æ§ã€‚</p>
<h4 data-id="heading-12">Dify åŸç”Ÿç›‘æ§</h4>
<p>ä» Dify v1.6.x å¼€å§‹é›†æˆï¼Œæ›´é«˜çš„ç‰ˆæœ¬åŠŸèƒ½æ›´å…¨ï¼Œæ¨èä½¿ç”¨è¾ƒæ–°çš„ç‰ˆæœ¬ã€‚æ›´æ–°è®°å½•å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79959323cae54e3b891b74c8eae1f537~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Jur6z0Yh7%2BbulM3k0z0xdmPt7Rk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-13">Opentelemetry æ’ä»¶</h4>
<p>æ¨èé¦–é€‰ Python æ¢é’ˆï¼Œé˜¿é‡Œäº‘ Python æ¢é’ˆæŒ‰ç…§ OTel æ ‡å‡†å®ç°ï¼Œå¹¶åœ¨æ¢é’ˆåŸºåº§å’Œæ•°æ®ä¸ŠæŠ¥ä¸Šåšäº†å¢å¼ºã€‚Dify çš„ Workerã€Nginx å¯ä»¥ä½¿ç”¨ OTel æ–¹æ¡ˆã€‚Dify ä» v1.3.0 å¼€å§‹æ”¯æŒ OTel é…ç½®ï¼Œä½†ä¸ŠæŠ¥ç«¯ç‚¹å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼Œä» Dify v1.7.0 ä»¥åæ”¯æŒä¸ŠæŠ¥åˆ°é˜¿é‡Œäº‘çš„äº‘ç›‘æ§2.0/ARMS åç«¯ã€‚</p>
<h3 data-id="heading-14">ç›‘æ§ Workflow åº”ç”¨</h3>
<p>ä½¿ç”¨ Dify å®˜æ–¹é›†æˆçš„äº‘ç›‘æ§å¯é‡‡é›† LLMã€Toolã€RAG ç­‰ Workflow å±‚é¢çš„ Trace æ•°æ®ï¼Œå³Â Dify å®˜æ–¹é›†æˆçš„ç›‘æ§é‡‡é›†å¤§æ¨¡å‹åº”ç”¨æ•°æ®ï¼Œä¸€ä¸ª Workflow å¯¹åº”ä¸€ä¸ªå¤§æ¨¡å‹åº”ç”¨ã€‚</p>
<p>é™äº Dify æ¡†æ¶ç‰¹æ€§ï¼ŒDify å®˜æ–¹é›†æˆçš„äº‘ç›‘æ§å’Œ Python æ¢é’ˆé‡‡é›†çš„ Trace æ— æ³•ç›´æ¥è”é€šï¼Œä½†å¯ä»¥é€šè¿‡ Trace Link æ–¹å¼å®ç°å¤§æ¨¡å‹åº”ç”¨å’Œå¾®æœåŠ¡åº”ç”¨çš„ç›¸å…³å…³è”ï¼Œé€šè¿‡ Python æ¢é’ˆå’Œ Dify åŸç”Ÿç›‘æ§ç»„åˆå®ç° API ç»„ä»¶çš„å¯è§‚æµ‹ã€‚</p>
<h4 data-id="heading-15">å‰ææ¡ä»¶</h4>
<p>Dify ç‰ˆæœ¬ &gt;= 1.6.0</p>
<h4 data-id="heading-16">æ­¥éª¤ä¸€ï¼šè·å–é˜¿é‡Œäº‘ Endpoint å’Œ License Key</h4>
<p>æ–¹å¼ä¸€ï¼‰äº‘ç›‘æ§ 2.0 ä¸” Dify ç‰ˆæœ¬ &gt;= 1.9.1 çš„ç”¨æˆ·æ¨èä½¿ç”¨äº‘ç›‘æ§ 2.0 çš„ä¸ŠæŠ¥ç«¯ç‚¹ï¼š</p>
<ol>
<li>
<p>ç™»å½•äº‘ç›‘æ§ 2.0 æ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»æ¥å…¥ä¸­å¿ƒã€‚</p>
</li>
<li>
<p>åœ¨åº”ç”¨ç›‘æ§&amp;é“¾è·¯è¿½è¸ªåŒºåŸŸå•å‡» Dify å¡ç‰‡ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„æ¥å…¥é¢æ¿ä¸­é€‰æ‹©æ•°æ®ä¸ŠæŠ¥åœ°åŸŸï¼Œç‚¹å‡»è·å– LicenseKeyã€‚</p>
</li>
<li>
<p>è®°å½•ç”Ÿæˆçš„ LicenseKey å’Œ Endpointã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/011914895a7f43a481eeb59208911244~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=5sgZL7sw%2BL1n7zfVPCSNciMmwDY%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.aliyun.com%2Fproduct%2Farms%3Fspm%3Da1z389.11499242.0.0.65452413yOc5rP%26utm_content%3Dg_1000408142" target="_blank" title="https://www.aliyun.com/product/arms?spm=a1z389.11499242.0.0.65452413yOc5rP&amp;utm_content=g_1000408142" ref="nofollow noopener noreferrer">ARMS</a> ç”¨æˆ·æˆ– Dify ç‰ˆæœ¬åœ¨ 1.6.0ï½1.9.0 çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ ARMS çš„ä¸ŠæŠ¥ç«¯ç‚¹ï¼Œæ•°æ®ä¹Ÿä¼šåœ¨äº‘ç›‘æ§ 2.0 ä¸ŠåŒæ­¥å‘ˆç°ï¼š</p>
<ol>
<li>
<p>ç™»å½• ARMS æ§åˆ¶å°ï¼Œåœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»æ¥å…¥ä¸­å¿ƒã€‚</p>
</li>
<li>
<p>åœ¨æœåŠ¡ç«¯åº”ç”¨åŒºåŸŸå•å‡» OpenTelemetry å¡ç‰‡ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„ OpenTelemetry é¢æ¿ä¸­é€‰æ‹©æ•°æ®ä¸ŠæŠ¥åœ°åŸŸï¼Œä¸ŠæŠ¥æ–¹å¼é€‰ gRPCã€‚</p>
</li>
<li>
<p>è®°å½•ç”Ÿæˆçš„ LicenseKey å’Œ Endpointï¼Œæ³¨æ„ Endpoint ä¸è¦å¸¦ç«¯å£å·ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8a65d3ea809046c68dc01bce25e87beb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ngyc0HDEgtyIbd6X9SIDm7t1PAE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-17">æ­¥éª¤äºŒï¼šé…ç½®åº”ç”¨æ€§èƒ½è¿½è¸ª</h4>
<ol>
<li>
<p>ç™»å½• Dify æ§åˆ¶å°ï¼Œå¹¶è¿›å…¥éœ€è¦ç›‘æ§çš„ Dify åº”ç”¨ã€‚</p>
</li>
<li>
<p>åœ¨å·¦ä¾§å¯¼èˆªæ å•å‡»ç›‘æµ‹ã€‚</p>
</li>
<li>
<p>å•å‡»è¿½è¸ªåº”ç”¨æ€§èƒ½ï¼Œç„¶ååœ¨äº‘ç›‘æ§åŒºåŸŸå•å‡»é…ç½®ã€‚</p>
</li>
<li>
<p>åœ¨å¼¹å‡ºçš„å¯¹è¯æ¡†ä¸­è¾“å…¥æ­¥éª¤ä¸€è·å–çš„ License Key å’Œ Endpointï¼Œå¹¶è‡ªå®šä¹‰ App Nameï¼ˆARMS æ§åˆ¶å°æ˜¾ç¤ºçš„åº”ç”¨åç§°ï¼‰ï¼Œç„¶åå•å‡»ä¿å­˜å¹¶å¯ç”¨ã€‚</p>
</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cca257e9687a4b918ff735379fd303be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=zVjRZp2rF5dYKphlJLX8YOZeNW8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-18">æ­¥éª¤ä¸‰ï¼šæŸ¥çœ‹ Dify åº”ç”¨ç›‘æ§æ•°æ®</h4>
<p>é…ç½®å®Œæ¯•ååœ¨ Dify æ§åˆ¶å°æˆ–é€šè¿‡ DifyÂ APIÂ å‘èµ·å‡ æ¬¡è¯·æ±‚ï¼Œç¨ç­‰ 1ï½2 åˆ†é’Ÿå³å¯ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°æŸ¥çœ‹ä¸ŠæŠ¥çš„æ•°æ®ã€‚</p>
<p>æ–¹å¼ä¸€ï¼šç›‘æ§ 2.0 ç”¨æˆ·åœ¨åº”ç”¨ä¸­å¿ƒ- AI åº”ç”¨å¯è§‚æµ‹å¤„æŸ¥çœ‹</p>
<p>æ–¹å¼äºŒï¼šARMS ç”¨æˆ·åœ¨ LLM åº”ç”¨ç›‘æ§å¤„æŸ¥çœ‹</p>
<p><strong>åº”ç”¨è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd080d6ce771403987e394600a9a815c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3%2FIocsqIkXxCtTSBkBENOQZbqYA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ç¤ºä¾‹ï¼š</strong></p>
<p>LLM èŠ‚ç‚¹ä¼šé‡‡é›†ç³»ç»Ÿ/ç”¨æˆ·æç¤ºè¯ã€æ¨¡å‹è¾“å‡ºã€æ¨¡å‹æä¾›å•†å’Œå‹å·ã€token ç”¨é‡ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7f92d57fa4d4e6199dc722af405b03b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=L9z4jQlm5i3zwFg4izFQgBYoaCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Retriever èŠ‚ç‚¹ä¼šé‡‡é›†æŸ¥è¯¢è¯­å¥ã€å¬å›ç‰‡æ®µã€å…³è”æ–‡æ¡£å…ƒæ•°æ®ã€embbeding è¯„åˆ†ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a351fc888844770bd172f54d4684fc3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Ki14WctZgV6Jg1QNN9mrV2qBCS0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Tool èŠ‚ç‚¹ä¼šé‡‡é›†å·¥å…·å‚æ•°å’Œè°ƒç”¨ç»“æœã€å·¥å…·æä¾›å•†å’Œæè¿°ç­‰ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95aa2c0ec49141068afccaa622b53a77~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3fbOgKrvscyWwujNEap0kbhh%2BhM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å…¶ä»–æµç¨‹èŠ‚ç‚¹ä¹Ÿéƒ½ä¼šé‡‡é›†èŠ‚ç‚¹çš„è¾“å…¥è¾“å‡ºã€ä¼šè¯ IDã€ç”¨æˆ· ID ç­‰å¿…è¦æ•°æ®ã€‚</p>
<p>æ¥å…¥å¯å‚è€ƒæ–‡æ¡£[3][4]ã€‚</p>
<h3 data-id="heading-19">ç›‘æ§æ‰§è¡Œå¼•æ“ API</h3>
<p>API æ˜¯ Dify æ‰§è¡Œå¼•æ“ã€‚ä½¿ç”¨ Python æ¢é’ˆå¯é‡‡é›† HTTP/Flask/Redis/DB ç­‰æ¡†æ¶å±‚é¢çš„ Trace æ•°æ®ï¼Œå¹¶å…³è”ä¸Šä¸‹æ¸¸è°ƒç”¨å®ç°å…¨é“¾è·¯è¿½è¸ªï¼Œå³Â Python æ¢é’ˆé‡‡é›†å¾®æœåŠ¡æ•°æ®ï¼ŒAPIÂ ç»„ä»¶å¯¹åº”ä¸€ä¸ªå¾®æœåŠ¡åº”ç”¨ã€‚</p>
<h4 data-id="heading-20">æ­¥éª¤ä¸€ï¼šå®‰è£… Python æ¢é’ˆ</h4>
<p>é¦–å…ˆéœ€è¦å¸è½½å†²çªçš„ OTel æ’ä»¶ï¼Œä¸‹è½½å¹¶å®‰è£… Python æ¢é’ˆã€‚</p>
<p>å¯åŠ¨è„šæœ¬å¼€å¤´æ”¹åŠ¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¡®ä¿pipç¯å¢ƒ</span>
pythonÂ -m ensurepip --upgrade

<span class="hljs-comment"># å¸è½½å†²çªçš„OTelæ’ä»¶</span>
pip3Â uninstall -y opentelemetry-instrumentation-celeryÂ \
Â  opentelemetry-instrumentation-flaskÂ \
Â  opentelemetry-instrumentation-redisÂ \
Â  opentelemetry-instrumentation-requestsÂ \
Â  opentelemetry-instrumentation-loggingÂ \
Â  opentelemetry-instrumentation-wsgiÂ \
Â  opentelemetry-instrumentation-fastapiÂ \
Â  opentelemetry-instrumentation-asgiÂ \
Â  opentelemetry-instrumentation-sqlalchemy

<span class="hljs-comment"># å®‰è£…Pythonæ¢é’ˆ</span>
pip3Â config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple/ &amp;&amp; pip3 config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com
pip3Â install aliyun-bootstrap &amp;&amp; aliyun-bootstrap -a install
</code></pre>
<p><strong>æç¤ºï¼š</strong></p>
<p>å¯ä»¥é€šè¿‡ Docker æ•°æ®å·æŒ‚è½½æ–¹å¼ç”¨ä¿®æ”¹åçš„å¯åŠ¨è„šæœ¬æ›¿æ¢åŸè„šæœ¬ï¼ˆä¿®æ”¹æºç å¹¶é‡æ‰“é•œåƒä¹Ÿå¯ä»¥ï¼‰ã€‚å³å°†ä¿®æ”¹åçš„è„šæœ¬ä½œä¸ºé…ç½®é¡¹æŒ‚è½½åˆ°å®¹å™¨ç›®å½•å†…ï¼Œå¹¶æŒ‡å®šå®¹å™¨ä»æ­¤è„šæœ¬å¯åŠ¨ã€‚ä¾‹å¦‚ï¼š</p>
<p>å°†ä¿®æ”¹åçš„è„šæœ¬ entrypoint.sh å­˜å‚¨ä¸ºé…ç½®é¡¹ï¼Œå¹¶æŒ‚è½½åˆ°å®¹å™¨ç›®å½• /app/api/dockerã€‚</p>
<p>æŒ‡å®šå¯åŠ¨å‘½ä»¤ï¼š["/bin/bash","/app/api/docker/entrypoint.sh"]</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16bf9c3ba8bd4cf7b74ebafe95bdb4c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=42kRrfGt9ddXNf9t4e7BRgpwsw4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-21">æ­¥éª¤äºŒï¼šä¿®æ”¹å¯åŠ¨å‘½ä»¤</h4>
<p>åœ¨å¯åŠ¨è„šæœ¬æœ€åçš„åº”ç”¨å¯åŠ¨éƒ¨åˆ†åšä¿®æ”¹ï¼Œä» aliyun-instrument å¯åŠ¨ï¼š</p>
<p>å¯åŠ¨è„šæœ¬æœ«å°¾æ”¹åŠ¨</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨aliyun-instrumentå¯åŠ¨</span>
<span class="hljs-built_in">exec</span>Â aliyun-instrument gunicorn \
Â  Â  Â  --<span class="hljs-built_in">bind</span>Â <span class="hljs-string">"<span class="hljs-variable">${DIFY_BIND_ADDRESS:-0.0.0.0}</span>:<span class="hljs-variable">${DIFY_PORT:-5001}</span>"</span>Â \
Â  Â  Â  --workersÂ <span class="hljs-variable">${SERVER_WORKER_AMOUNT:-1}</span>Â \
Â  Â  Â  --worker-classÂ <span class="hljs-variable">${SERVER_WORKER_CLASS:-gevent}</span>Â \
Â  Â  Â  --worker-connectionsÂ <span class="hljs-variable">${SERVER_WORKER_CONNECTIONS:-10}</span>Â \
Â  Â  Â  --<span class="hljs-built_in">timeout</span>Â <span class="hljs-variable">${GUNICORN_TIMEOUT:-200}</span>Â \
Â  Â  Â  app:app
</code></pre>
<p>åŒç†æ­¤æ­¥éª¤ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹é•œåƒæ‰“åŒ…è¿‡ç¨‹æˆ–é€šè¿‡æŒ‚è½½ K8S é…ç½®é¡¹å¹¶æ›¿æ¢ Dify å¯åŠ¨è„šæœ¬çš„æ–¹å¼å®ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b018a7ed8f24d9bb851032e19a02009~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=FlQs%2FuUGFyQ3JxrUIks7Fwl6q%2Fo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-22">æ­¥éª¤ä¸‰ï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>é…ç½®å¦‚ä¸‹ç¯å¢ƒå˜é‡ï¼Œåº”ç”¨åã€åœ°åŸŸå’Œ License Key æ ¹æ®å®é™…æƒ…å†µå¡«å†™ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/692375ca8b844b4e85ee655417062a39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ykq%2Fjxwpji54g7LfA268%2FzTBtHo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-23">æ­¥éª¤å››ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹Â APIÂ ç›‘æ§æ•°æ®</h4>
<p>è¿›å…¥åº”ç”¨ç›‘æ§åˆ—è¡¨å¯ä»¥çœ‹åˆ° dify-api åº”ç”¨ï¼Œåº”ç”¨è¯¦æƒ…ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e04c1d649e734abf9905b5e2d485d68d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=PICxuZzFy5C8A9EnijtD%2B%2FUTWLA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è°ƒç”¨é“¾ä¼šä¸²è”ä¸Šä¸‹æ¸¸è°ƒç”¨ä¿¡æ¯ï¼Œç¤ºä¾‹æ•°æ®ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a67eba21a02843b499e28167f2ab384e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=P9o%2BWMuxktAhAMG3loTJBZXVc9I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥å‚è€ƒæ–‡æ¡£[5]ï¼Œæ³¨æ„å¦‚æœç›´æ¥ä½¿ç”¨ ack-onepilot è‡ªåŠ¨æ³¨å…¥ï¼Œä¼šå­˜åœ¨ Dify è‡ªå¸¦çš„ OTel SDK å’Œ Python æ¢é’ˆå†²çªçš„é—®é¢˜ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨æ”¹å¯åŠ¨è„šæœ¬å¸è½½å†²çªçš„ OTel ä¾èµ–ã€‚</p>
<h3 data-id="heading-24">ç›‘æ§æ’ä»¶å¼•æ“ Dify-Plugin-Daemon</h3>
<p>Dify-Plugin-Daemon æ˜¯ Dify çš„æ’ä»¶ç®¡ç†å™¨ï¼ŒDify çš„ LLMã€æ’ä»¶ã€Agent ç­–ç•¥çš„æ‰§è¡Œéƒ½ä¾èµ– Plugin-Daemonã€‚Go Agent[2]æ”¯æŒç›‘æ§ Dify-Plugin-Daemonï¼Œæ¥å…¥ Go ç›‘æ§éœ€ä¿®æ”¹Dockerfileã€é‡æ–°ç¼–è¯‘é•œåƒåé…ç½®ç¯å¢ƒå˜é‡å¼€å¯ã€‚Plugin-Daemon çš„ Go æ¢é’ˆåŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨ä¸ºæ’ä»¶è¿è¡Œæ—¶æŒ‚è½½ Python æ¢é’ˆã€‚</p>
<h4 data-id="heading-25">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Dockerfile æ–‡ä»¶é‡æ–°ç¼–è¯‘å¯¹åº”é•œåƒ</h4>
<p>local.dockerfile ä¿®æ”¹ç¤ºä¾‹</p>
<p>DockerFile</p>
<pre><code class="hljs language-bash" lang="bash">FROM golang:1.23-alpine AS builder


ARG VERSION=unknown
<span class="hljs-comment"># copy project</span>
COPY . /app
<span class="hljs-comment"># set working directory</span>
WORKDIR /app
<span class="hljs-comment"># using goproxy if you have network issues</span>
<span class="hljs-comment"># ENV GOPROXY=https://goproxy.cn,direct</span>
<span class="hljs-comment"># download arms instgo</span>
RUN wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
RUNÂ <span class="hljs-built_in">chmod</span>Â 777 instgo
<span class="hljs-comment"># instgo build</span>
RUN INSTGO_EXTRA_RULES=<span class="hljs-string">"dify_python"</span>Â ./instgo go build \
Â  Â  -ldflagsÂ <span class="hljs-string">"\
Â  Â  -X 'github.com/langgenius/dify-plugin-daemon/internal/manifest.VersionX=<span class="hljs-variable">${VERSION}</span>' \
Â  Â  -X 'github.com/langgenius/dify-plugin-daemon/internal/manifest.BuildTimeX=<span class="hljs-subst">$(date -u +%Y-%m-%dT%H:%M:%S%z)</span>'"</span> \
Â  Â  -o /app/main cmd/server/main.go
<span class="hljs-comment"># copy entrypoint.sh</span>
COPY entrypoint.sh /app/entrypoint.sh
RUNÂ <span class="hljs-built_in">chmod</span>Â +x /app/entrypoint.sh
FROM ubuntu:24.04
WORKDIR /app
<span class="hljs-comment"># check build args</span>
ARG PLATFORM=<span class="hljs-built_in">local</span>
<span class="hljs-comment"># Install python3.12if PLATFORM is local</span>
RUN apt-get update &amp;&amp; DEBIAN_FRONTEND=noninteractive apt-get install -y curl python3.12 python3.12-venv python3.12-dev python3-pip ffmpeg build-essential \
Â  Â  &amp;&amp; apt-get clean \
Â  Â  &amp;&amp;Â <span class="hljs-built_in">rm</span>Â -rf /var/lib/apt/lists/* \
Â  Â  &amp;&amp; update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.12 1;
<span class="hljs-comment"># preload tiktoken</span>
ENV TIKTOKEN_CACHE_DIR=/app/.tiktoken
<span class="hljs-comment"># Install dify_plugin to speedup the environment setup, test uv and preload tiktoken</span>
RUNÂ <span class="hljs-built_in">mv</span>Â /usr/lib/python3.12/EXTERNALLY-MANAGED /usr/lib/python3.12/EXTERNALLY-MANAGED.bk \
Â  Â  &amp;&amp; python3 -m pip install uv \
Â  Â  &amp;&amp; uv pip install --system dify_plugin \
Â  Â  &amp;&amp; python3 -cÂ <span class="hljs-string">"from uv._find_uv import find_uv_bin;print(find_uv_bin());"</span>Â \
Â  Â  &amp;&amp; python3 -cÂ <span class="hljs-string">"import tiktoken; encodings = ['o200k_base', 'cl100k_base', 'p50k_base', 'r50k_base', 'p50k_edit', 'gpt2']; [tiktoken.get_encoding(encoding).special_tokens_set for encoding in encodings]"</span>
ENV UV_PATH=/usr/local/bin/uv
ENV PLATFORM=<span class="hljs-variable">$PLATFORM</span>
ENV GIN_MODE=release
COPY --from=builder /app/main /app/entrypoint.sh /app/
<span class="hljs-comment"># run the server, using sh as the entrypoint to avoid process being the root process</span>
<span class="hljs-comment"># and using bash to recycle resources</span>
CMD [<span class="hljs-string">"/bin/bash"</span>,Â <span class="hljs-string">"-c"</span>,Â <span class="hljs-string">"/app/entrypoint.sh"</span>]
</code></pre>
<p>æ³¨æ„ INSTGO_EXTRA_RULES é€‰é¡¹ä¼šå¼€å¯ Plugin è¿è¡Œæ—¶è‡ªåŠ¨ç›‘æµ‹åŠŸèƒ½ï¼Œå¦‚æœä¸éœ€è¦åœ¨ Plugin-Daemon å¯åŠ¨æ—¶æ‹‰èµ·å¯¹ Plugin æ¢é’ˆï¼Œå¯ä»¥å»é™¤ç¼–è¯‘æ–‡ä»¶ä¸­çš„<code>INSTGO_EXTRA_RULES="dify_python"ã€‚</code></p>
<h4 data-id="heading-26">æ­¥éª¤äºŒï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>æ–¹å¼ä¸€ï¼‰ECS ç¯å¢ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a14ec06f90f44155b0bd899e6ea1d2fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=E%2Bpeiy1kp2YXQZ2WRw5cbxrg4WI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰å®¹å™¨åŒ– ack-onepilot ç¯å¢ƒ</p>
<p>åœ¨ dify-plugin-daemon åº”ç”¨çš„ YAML é…ç½®ä¸­å°†ä»¥ä¸‹ labels æ·»åŠ åˆ° spec.template.metadata å±‚çº§ä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">labels:
Â  aliyun.com/app-language: golang
Â  armsPilotAutoEnable:Â <span class="hljs-string">'on'</span>
Â  armsPilotCreateAppName:Â <span class="hljs-string">"dify-daemon-plugin"</span>
</code></pre>
<h4 data-id="heading-27">æ­¥éª¤ä¸‰ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹Â dify-plugin-daemon ç›‘æ§</h4>
<p>åœ¨åº”ç”¨åˆ—è¡¨é¡µé¢è¿›å…¥ dify-plugin-daemon åº”ç”¨ï¼Œç›‘æ§è¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58ac56cd7ef24c119d2a7db118a59370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=IFOGvcgL99hkyGAlVsx1qAaPUIo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ac53088b9e66401c95422be50dfbd1ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=6hAhQq8xXNCOyOHZjOurjLYx4Po%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-28">æ­¥éª¤å››ï¼šæŸ¥çœ‹ Plugin ç›‘æ§</h4>
<p>æŒ‚è½½æ¢é’ˆåï¼ŒPlugin-Daemon ä¼šè‡ªåŠ¨æ‹‰èµ·æ’ä»¶è¿è¡Œæ—¶çš„æ¢é’ˆã€‚æ¯ä¸ªæ’ä»¶è¿è¡Œæ—¶å¯¹åº”ä¸€ä¸ªå¯è§‚æµ‹åº”ç”¨ï¼Œåº”ç”¨åä¸º {plugin_daemon_name}<em>plugin</em>{plugin_name}_{plugin_version}ã€‚ä¾‹å¦‚ï¼ŒPlugin-Daemon é…ç½®çš„åº”ç”¨åä¸º local-dify-plugin-daemonï¼Œå®‰è£…äº† tongyi çš„ version 0.0.53 æ’ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆåº”ç”¨ local-dify-plugin-daemon_plugin_tongyi_0.0.53ã€‚</p>
<p>æ’ä»¶ç›‘æ§æ¦‚è§ˆé¡µç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02763908464745ddba514613fadaad9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=67YjRhs2uZFciyoBgCzmMbcpyVE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-29">(å¯é€‰) ç›‘æ§ä»£ç æ²™ç®± Sandbox</h3>
<p>Sandbox æ˜¯ Dify ä»£ç æ²™ç®±å¼•æ“ï¼Œè´Ÿè´£æ‰§è¡Œ Workflow ä¸­çš„ Python/Node.js ä»£ç ã€‚Go æ¢é’ˆæ”¯æŒç›‘æ§ Sandboxï¼Œéœ€ä¿®æ”¹ Dockerfileã€é‡æ–°ç¼–è¯‘é•œåƒåé…ç½®ç¯å¢ƒå˜é‡å¼€å¯ã€‚</p>
<h4 data-id="heading-30">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Dockerfile æ–‡ä»¶é‡æ–°ç¼–è¯‘å¯¹åº”é•œåƒ</h4>
<p>ä¿®æ”¹ ./build/build_[amd64|arm64].sh æ–‡ä»¶ã€‚</p>
<p>a. æ·»åŠ  instgo ä¸‹è½½å‘½ä»¤ã€‚</p>
<p>ä¸‹è½½å‘½ä»¤ç¤ºä¾‹å¦‚ä¸‹ï¼Œå…¶ä»–åœ°åŸŸå’Œæ¶æ„çš„ä¸‹è½½å‘½ä»¤è¯·å‚è§ä¸‹è½½ instgoã€‚</p>
<p>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Finstgo-tool-introduction%255B%239b94bbe8a62ra%25EF%25BC%2589" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/instgo-tool-introduction%5B#9b94bbe8a62ra%EF%BC%89" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
<span class="hljs-built_in">chmod</span>Â 777Â instgo
</code></pre>
<p>b. åœ¨Â <code>go build</code>Â å‰æ·»åŠ Â <code>instgo</code>Â å‘½ä»¤ã€‚</p>
<p>ä»¥ amd64 ä¸ºä¾‹ï¼Œä¿®æ”¹ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">rm</span>Â -f internal/core/runner/python/python.so
<span class="hljs-built_in">rm</span>Â -f internal/core/runner/nodejs/nodejs.so
<span class="hljs-built_in">rm</span>Â -f /tmp/sandbox-python/python.so
<span class="hljs-built_in">rm</span>Â -f /tmp/sandbox-nodejs/nodejs.so
wgetÂ <span class="hljs-string">"http://arms-apm-cn-hangzhou.oss-cn-hangzhou.aliyuncs.com/instgo/instgo-linux-amd64"</span>Â -O instgo
<span class="hljs-built_in">chmod</span>Â 777 instgo
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building Python lib"</span>
CGO_ENABLED=1 GOOS=linux GOARCH=amd64 ./instgo go build -o internal/core/runner/python/python.so -buildmode=c-shared -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/lib/python/main.go &amp;&amp;
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building Nodejs lib"</span>Â &amp;&amp;
CGO_ENABLED=1 GOOS=linux GOARCH=amd64 ./instgo go build -o internal/core/runner/nodejs/nodejs.so -buildmode=c-shared -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/lib/nodejs/main.go &amp;&amp;
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building main"</span>Â &amp;&amp;
GOOS=linux GOARCH=amd64 ./instgo go build -o main -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/server/main.go
<span class="hljs-built_in">echo</span>Â <span class="hljs-string">"Building env"</span>
GOOS=linux GOARCH=amd64 ./instgo go build -oÂ <span class="hljs-built_in">env</span>Â -ldflags=<span class="hljs-string">"-s -w"</span>Â cmd/dependencies/init.go
</code></pre>
<h4 data-id="heading-31">æ­¥éª¤äºŒï¼šé…ç½®ç¯å¢ƒå˜é‡</h4>
<p>æ–¹å¼ä¸€ï¼‰æ—  ack-onepilot ç¯å¢ƒ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/636de4fea1ba4df388e678b033c1292b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=UMp4vE%2FC7Da%2BuYs0XwYfnohVztQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ–¹å¼äºŒï¼‰å®¹å™¨åŒ– ack-onepilot ç¯å¢ƒ</p>
<p>åœ¨ dify-plugin-daemon åº”ç”¨çš„ YAML é…ç½®ä¸­å°†ä»¥ä¸‹ labels æ·»åŠ åˆ° spec.template.metadata å±‚çº§ä¸‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">labels:
Â  aliyun.com/app-language: golang
Â  armsPilotAutoEnable:Â <span class="hljs-string">'on'</span>
Â  armsPilotCreateAppName:Â <span class="hljs-string">"dify-daemon-plugin"</span>
</code></pre>
<h3 data-id="heading-32">æ­¥éª¤ä¸‰ï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹ sandbox ç›‘æ§</h3>
<p>åœ¨åº”ç”¨åˆ—è¡¨é¡µé¢è¿›å…¥ dify-sandbox åº”ç”¨ï¼Œç›‘æ§è¯¦æƒ…å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae047344ee80435e904f9c0194e681f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Y6U4bD3OhAGluZix7Js7uiw8VRg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>è°ƒç”¨é“¾è¯¦æƒ…ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6fbaf52127eb4d2089932fa04bcdfd86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=MR5AIp%2FKsI%2BpBr%2BOASuV%2BNrUpHM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<blockquote>
<p><strong>å‚è€ƒæ–‡æ¡£ï¼š</strong></p>
<p>ç›‘æ§ Go åº”ç”¨</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fuser-guide%2Fmonitoring-the-golang-applications%2F" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/user-guide/monitoring-the-golang-applications/" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fuser-guide%2Fconnect-a-dify-application-to-arms-application-monitoring(%25E6%25AD%25A5%25E9%25AA%25A4%25E4%25BA%2594)" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/user-guide/connect-a-dify-application-to-arms-application-monitoring(%E6%AD%A5%E9%AA%A4%E4%BA%94)" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
</blockquote>
<h3 data-id="heading-33">(å¯é€‰) ç›‘æ§ä»»åŠ¡é˜Ÿåˆ— Worker</h3>
<p>Worker æ˜¯ Dify åå°ä»»åŠ¡ç»„ä»¶ï¼ŒçŸ¥è¯†åº“æ„å»ºå’Œå‘¨æœŸæ€§æ¸…ç†ä»»åŠ¡ä¾èµ– Worker æ‰§è¡Œã€‚æŒ‰æ™®é€š Python Celery åº”ç”¨æ–¹å¼æ¥å…¥å³å¯ã€‚è¿™é‡Œç»™å‡ºä½¿ç”¨ Dify å†…ç½®çš„ OTel æ’ä»¶ä¸ŠæŠ¥æ•°æ®çš„ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-34">æ­¥éª¤ä¸€ï¼šä¿®æ”¹ Worker ç¯å¢ƒå˜é‡</h4>
<p>OTel æ’ä»¶æ˜¯ Dify å†…ç½®åŠŸèƒ½ï¼Œç›´æ¥ä¿®æ”¹ç¯å¢ƒå˜é‡å³å¯ã€‚æ³¨æ„è¦æ±‚ Dify 1.7.0 ä»¥ä¸Šç‰ˆæœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b7e3f6587c64405b9a3a4c710f9b37e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=SiojLQfW6wPHik4GYNGkKQHEH6c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-35">æ­¥éª¤äºŒï¼šéƒ¨ç½²å¹¶æŸ¥çœ‹ Worker ç›‘æ§</h4>
<p>è¿›å…¥åº”ç”¨ç›‘æ§/ OpenTelemetry ç›‘æ§é¡µé¢æŸ¥çœ‹ä¸ŠæŠ¥çš„æ•°æ®ã€‚</p>
<p>Worker æ‰§è¡Œçš„åå°ä»»åŠ¡ Trace è¯¦æƒ…ç¤ºä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ec32342ce9dc4987ac13f0e10543d630~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=QuiZVT7nWh7SKNV%2FjlpyfAoRMyE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-36">(å¯é€‰) ç›‘æ§å…¥å£ç½‘å…³ Nginx</h3>
<p>Nginx æ˜¯ Dify çš„å…¥å£ç½‘å…³ï¼Œä¸€äº›è¶…æ—¶é—®é¢˜å’ŒçŸ¥è¯†åº“/æ’ä»¶/Workflow çš„æ–‡ä»¶ä¸Šä¼ é—®é¢˜å¯èƒ½å’Œ Nginx é…ç½®æœ‰å…³ã€‚</p>
<p>ç›´æ¥ä½¿ç”¨ Opentelemetry æ–¹å¼ä¸ŠæŠ¥å³å¯ï¼Œæ¨èä½¿ç”¨é¢„æ„å»ºçš„ Nginx-OTel é•œåƒæ–¹å¼ã€‚</p>
<h4 data-id="heading-37">æ­¥éª¤ä¸€ï¼šä¸‹è½½é¢„æ„å»º Docker é•œåƒ</h4>
<p>å‰å¾€ Docker å®˜ç½‘ï¼Œæœç´¢å¹¶æ‹‰å–å¸¦æœ‰ -otel åç¼€çš„ Nginx é•œåƒï¼ˆå¦‚ nginx:1.29.0-otelï¼‰ï¼Œé€šè¿‡æ ‡å‡†å®¹å™¨å¯åŠ¨æµç¨‹éƒ¨ç½²æœåŠ¡ã€‚</p>
<h4 data-id="heading-38">æ­¥éª¤äºŒï¼šè·å– gRPC æ¥å…¥ç‚¹å’Œé‰´æƒ Token ä¿¡æ¯</h4>
<p>ç™»å½•å¯è§‚æµ‹é“¾è·¯ OpenTelemetry ç‰ˆæ§åˆ¶å°ï¼Œåœ¨æ¥å…¥ä¸­å¿ƒé€‰å– OpenTelemetry å¡ç‰‡ï¼Œé€‰æ‹© gRPC åè®®ä¸ŠæŠ¥æ•°æ®ã€‚</p>
<p>è®°å½•æ¥å…¥ç‚¹å’Œé‰´æƒ Token å¤‡ç”¨ã€‚</p>
<p>åœ¨å¼€æºæ¡†æ¶åŒºåŸŸå•å‡»ï¼Œåœ¨å¼¹å‡ºçš„ OpenTelemetry é¢æ¿ä¸­é€‰æ‹©æ•°æ®éœ€è¦ä¸ŠæŠ¥çš„åœ°åŸŸã€‚</p>
<h4 data-id="heading-39">æ­¥éª¤ä¸‰ï¼šå¯ç”¨ Nginx OTel æ¨¡å—</h4>
<p>ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶ nginx.conf.templateï¼š</p>
<p>Nginx é…ç½®æ–‡ä»¶</p>
<pre><code class="hljs language-bash" lang="bash">load_module modules/ngx_otel_module.so;Â <span class="hljs-comment"># åŠ è½½ ngx_otel_module</span>
...
http {
Â  Â  ...

Â  Â  otel_exporter {
Â  Â  Â  Â  endpointÂ <span class="hljs-string">"<span class="hljs-variable">${GRPC_ENDPOINT}</span>"</span>;Â <span class="hljs-comment"># å‰ææ¡ä»¶ä¸­è·å–çš„ gRPC æ¥å…¥ç‚¹</span>
Â  Â  Â  Â  header AuthenticationÂ <span class="hljs-string">"<span class="hljs-variable">${GRPC_TOKEN}</span>"</span>;Â <span class="hljs-comment"># å‰ææ¡ä»¶ä¸­è·å–çš„é‰´æƒ Token</span>
Â  Â  }

Â  Â  otel_trace on; Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-comment"># å¼€å¯é“¾è·¯è¿½è¸ª</span>
Â  Â  otel_service_nameÂ <span class="hljs-variable">${SERVICE_NAME}</span>; Â <span class="hljs-comment"># åº”ç”¨å</span>
Â  Â  otel_trace_context propagate; Â  Â  Â  Â Â <span class="hljs-comment"># å‘ä¸‹æ¸¸æœåŠ¡æ³¨å…¥Traceä¸Šä¸‹æ–‡</span>
Â  Â  ...
}
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5227e4b9ca54920a9a9a53844bb74ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Bu5XRQk9cTA6X70IBB4c2SVgdwI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯å‚è€ƒæ–‡æ¡£[6]æ¥å…¥ Nginx ç›‘æ§ã€‚</p>
<h2 data-id="heading-40">å®è·µæŒ‡å—</h2>
<h3 data-id="heading-41">å…³è” LLM Trace å’Œå¾®æœåŠ¡ Trace=</h3>
<p>Dify çš„ Workflow æ‰§è¡Œæ•°æ®é€šè¿‡å®˜æ–¹é›†æˆæ–¹å¼ä¸ŠæŠ¥ Traceï¼Œè€Œ Dify-apiã€Dify-Workerã€Dify-Plugin-Daemon ç­‰åŸºç¡€è®¾æ–½é€šè¿‡æ— ä¾µå…¥æ¢é’ˆæŒ‰ OTel æ ‡å‡†ä¸ŠæŠ¥ Traceã€‚è¿™ä¸¤å¥—å‰²è£‚çš„ä½“ç³»æ— æ³•ç›´æ¥èåˆï¼Œé˜¿é‡Œäº‘æä¾›äº† Trace Link èƒ½åŠ›ï¼Œå°†åº”ç”¨å±‚å’ŒåŸºç¡€è®¾æ–½å±‚çš„ä¸¤æ¡ Trace ä¸²è”ã€‚</p>
<p><strong>ä» LLM Trace è·³è½¬å¾®æœåŠ¡ Traceï¼š</strong></p>
<p>è¿›å…¥ä¸€æ¡ LLM Trace çš„è¯¦æƒ…ï¼Œå¯ä»¥çœ‹åˆ°å®Œæ•´çš„ Workflow æ‰§è¡Œæ•°æ®ï¼Œä½†å¦‚ä½•æ‰¾åˆ°åŸºç¡€è®¾æ–½ç»„ä»¶çš„ span å’Œä¸Šä¸‹æ¸¸ä¸²è”æ•°æ®ï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24fafe96a69b49048838f757dfd418e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=jNXWyQ0AcuH5JH2Q%2BdjLK1JaWAg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€‰ä¸­ä¸€ä¸ª spanï¼Œåœ¨ span å³ä¾§çš„é™„åŠ ä¿¡æ¯é¢æ¿é€‰æ‹© Links æ ‡ç­¾é¡µï¼Œå¯ä»¥çœ‹åˆ°å’Œæ­¤ LLM Trace ç›¸å…³è”çš„åŸºç¡€è®¾æ–½ Trace çš„ä¿¡æ¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d5e80d4adcb42dca86b90a8ea68a61a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=6r%2Bm4DZN45tktcRh2ET4JwWyM%2Bc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»â€œæŸ¥è¯¢å…³è”çš„è°ƒç”¨é“¾â€ï¼Œå¯ä»¥ç›´æ¥è·³è½¬åˆ°å…³è”çš„åŸºç¡€è®¾æ–½ Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/305362d503c8496fb726565b9f31e53c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=%2BZGzsXOkfnHqkbPTcm4Ya%2BmIYA4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ä» å¾®æœåŠ¡ Trace è·³è½¬ LLM Traceï¼š</p>
<p>åœ¨åŸºç¡€è®¾æ–½çš„å¾®æœåŠ¡ Trace ä¸Šï¼Œå¯ä»¥çœ‹åˆ° nginxã€dify-apiã€dify-plugin-daemonã€dify-sandbox ç­‰å„ä¸ªç»„ä»¶çš„ Trace æ•°æ®ï¼Œæ˜¯å¦å¯ä»¥å°†å®ƒå…³è”åˆ° Dify å®˜æ–¹é›†æˆçš„ Trace æ•°æ®ä¸Šï¼Ÿ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8195d657974f3298a3aff0cd747a97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=gRdQvmhpAG93%2BZ4V285Hp8r2W3I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>ç‚¹å‡»è°ƒç”¨é“¾ä¸Šæ–¹çš„ç­›é€‰åŠŸèƒ½ï¼Œç”¨ span åç§°ç­›é€‰ï¼Œæ‰¾åˆ°åç§°ä¸º AdvancedChatAppRunner.run æˆ– WorkflowAppRunner.run çš„ spanã€‚ï¼ˆå–å†³äº Dify Workflow çš„ç±»å‹ï¼Œå¦‚æœè°ƒç”¨äº†å­ Workflow å¯èƒ½ä¼šæœ‰å¤šä¸ªè¿™æ ·çš„ spanï¼‰ã€‚</p>
<p>å¦‚æœå¯¹åº”çš„ Workflow å¼€å¯äº†äº‘ç›‘æ§è¿½è¸ªï¼Œåœ¨ span é™„åŠ ä¿¡æ¯çš„ Links é¡µç­¾å¯ä»¥çœ‹åˆ°å…³è”çš„ LLM Trace Idï¼Œç‚¹å‡»â€œæŸ¥è¯¢å…³è”çš„è°ƒç”¨é“¾â€å¯è·³è½¬åˆ°ç›¸åº” LLM Traceã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/990d1a3ed5c545f68a7fa98197d5aa49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=ift9PpxfUZAT232KQs506nz%2Bnp8%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-42">åˆ†ææ‰§è¡Œå¼•æ“å¼‚å¸¸æ ¹å› </h3>
<p>å·¥ä½œæµå±‚é¢çš„å¼‚å¸¸é€šå¸¸åœ¨ LLM Trace æˆ– Dify æ—¥å¿—è¿½è¸ªé‡Œå¯ä»¥çœ‹åˆ°ç›´è§‚çš„æŠ¥é”™ä¿¡æ¯ï¼Œä½†è¿˜æœ‰ä¸€ç±»é”™è¯¯æ˜¯åº•å±‚ Dify å¼•æ“çš„é…ç½®ä¸å½“æˆ–å†…éƒ¨ bug å¼•èµ·çš„ã€‚æ— ä¾µå…¥æ¢é’ˆæä¾›äº†å¯¹è¿™ç±»é”™è¯¯çš„å®šä½åˆ†æèƒ½åŠ›ã€‚</p>
<p>å¦‚å›¾çš„ç¤ºä¾‹åœºæ™¯ï¼Œåœ¨ Dify Workflow çš„æŸæ¬¡æ‰§è¡Œä¸­å‘ç°çŸ¥è¯†æ£€ç´¢çš„è¾“å‡ºæ€»æ˜¯ä¸ºç©ºï¼Œä½†æ˜¯ Dify æ§åˆ¶å°ä¸Šåˆæ²¡æœ‰æŠ¥é”™ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/786acfb4f8554128a091f809faaaab86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=h3c3W5FC1scrPu2m9g0ylyfCDCE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>æ­¤æ—¶ï¼Œå¯ä»¥æ ¹æ® Dify å¯¹è¯ IDã€ç”¨æˆ· ID ç­‰ä¿¡æ¯åœ¨äº‘ç›‘æ§ä¸Šå®šä½å¯¹åº”çš„ LLM Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5837c0bfdb804b0ba9e478a2666385a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=5wY53GrBvbzDjPFxn%2FhujFfWIs4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿›å…¥ä¼šè¯è¯¦æƒ…ï¼Œæ‰¾åˆ°å¯¹åº” Trace å’Œç›¸å…³ Spanï¼Œé¦–å…ˆå°è¯•åœ¨ Span è¯¦æƒ…ä¸­æŸ¥æ‰¾ç›¸å…³ä¿¡æ¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53f1b598bab8498bad1c3b84e8f897a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Lw1ZkBwcHL3SiYMEpylaOlIglQw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ª Case çš„é—®é¢˜ä¸åœ¨ Wrokflow å±‚é¢ï¼Œæ‰€ä»¥åªèƒ½è§‚å¯Ÿåˆ°è¾“å‡ºå¼‚å¸¸ï¼Œè¦å®šä½å…·ä½“åŸå› ï¼Œå¯ä»¥é€šè¿‡ä¸Šä¸€èŠ‚ä»‹ç»çš„ Links åŠŸèƒ½ï¼Œè·³è½¬åˆ°å¯¹åº”çš„ Dify infra å±‚ Traceï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84477c7605d54eb9a70998491736c6f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=FjjOpKOyqqXgq4HbHMHtImrhScs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥è§‚å¯Ÿåˆ° Trace ä¸Šå­˜åœ¨éƒ¨åˆ†é”™è¯¯ Spanï¼Œé€šè¿‡å¿«æ·ç­›é€‰ç›´æ¥å®šä½é”™è¯¯ Spanï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/320193f2edd744a1beb37b19071725dc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=Lz3FlEESb2EoNHvRTjfnJ22H9Kg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨é”™è¯¯ Span çš„ Details å’Œ Events ä¸­ï¼Œå¯ä»¥çœ‹åˆ°é”™è¯¯ä¿¡æ¯å’Œå¼‚å¸¸å †æ ˆã€‚å¹¶å®šä½åˆ°æ ¹å› æ˜¯ Weaviate å‘é‡å­˜å‚¨é…ç½®å¼•èµ·çš„é—®é¢˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a58664826c8b4ad4acc96f2ecc2feff2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=IhAli%2FHfPX46Qt3osBWPzoboM3w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-43">å®šä½æ’ä»¶æ…¢è°ƒç”¨</h3>
<p>Dify ç¤¾åŒºæä¾›äº†ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€ï¼Œä½†ç®¡ç†æ’ä»¶çš„ Dify-Plugin-Daemon å’Œæ’ä»¶è¿è¡Œæ—¶å´æ˜¯éš¾ä»¥å®šä½æ•…éšœçš„é»‘ç›’ã€‚åœ¨ Dify æ§åˆ¶å°ä¸Šèƒ½æ¸…æ™°åœ°çœ‹åˆ°å„ä¸ªå·¥ä½œæµèŠ‚ç‚¹çš„è¿è¡Œè®°å½•ï¼Œä½†å¯¹äºæµç¨‹èŠ‚ç‚¹ä¹‹ä¸‹ Dify infra è®¾æ–½çš„æ•…éšœå´æ— ä»åˆ†æã€‚ä¸€æ¬¡ Workflow è°ƒç”¨é“¾è·¯æ¶‰åŠ Nginxã€APIã€Plugin-Daemonã€Plugin è¿è¡Œæ—¶å’Œæ¨¡å‹ç½‘å…³ç­‰å¤šä¸ªç»„ä»¶ï¼Œé˜¿é‡Œäº‘äº‘ç›‘æ§æä¾›çš„å…¨é“¾è·¯è¿½è¸ªèƒ½åŠ›å¯ä»¥ä¸²è”ä¸Šä¸‹æ¸¸çš„å®Œæ•´é“¾è·¯ï¼Œå®šä½æ’ä»¶å†…çš„é”™æ…¢å¼‚å¸¸ã€‚</p>
<p>å¦‚å›¾ç¤ºä¾‹ä¸­â€œæŸ¥è¯¢ SLS æ—¥å¿—â€æ˜¯ä¸€ä¸ª Dify æ’ä»¶ï¼Œæ­£å¸¸è°ƒç”¨åªéœ€ 200 msï¼Œä½†åœ¨è¿™ä¸ª Trace ä¸­å´æœ‰ 5s å¤šçš„æ…¢è°ƒç”¨ã€‚ä»…çœ‹ LLM Trace æˆ– Dify æ‰§è¡Œæ—¥å¿—ï¼Œæ— æ³•åˆ¤æ–­æ…¢è¯·æ±‚æ˜¯å› ä¸º Dify-Api å¼•æ“ã€Dify-Plugin-Daemon æ’ä»¶å¼•æ“ã€Dify-Plugin è¿è¡Œæ—¶æˆ–è€… SLS æ—¥å¿—æœåŠ¡æœ¬èº«å¯¼è‡´çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/870192cf24ea4ab8a18159450602d410~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=HZiPR7WdfcJ7OZY7C99aiDiNC3o%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é€šè¿‡ Links æ‰¾åˆ°å…³è”çš„ Infra å±‚è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ° Trace è¯¦æƒ…ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08ea1a24080041efbb9aec94f0cf7d38~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=1nuEpsJiHfJ7s8%2BLmskoX3PO2Cc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Dify å¼•æ“ä¼šåšå¤§é‡ DB å’Œ Redis è®¿é—®ï¼Œæ’æŸ¥é DB/Redis ç±»é—®é¢˜æ—¶ï¼Œå¯ä»¥åœ¨ç»„ä»¶æ ‡ç­¾å¤„ç‚¹é€‰å¹¶æ»¤å» sqlalchemy å’Œ redis ç»„ä»¶çš„ Span ä»¥ä¾¿æ’æŸ¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e4d0b5cb3e743c29c6979fe32545e53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764751112&amp;x-signature=3iKdzKHNuo%2BPwycjp9FaXN%2FyUyg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¯ä»¥çœ‹åˆ° dify æ‰§è¡Œå¼•æ“ï¼ˆlocal-dify-apiï¼‰å‘èµ·äº†å¯¹ dify æ’ä»¶å¼•æ“ï¼ˆlocal-dify-plugin-daemonï¼‰çš„ POST è°ƒç”¨ï¼Œæ’ä»¶å¼•æ“è°ƒç”¨æ’ä»¶è¿è¡Œæ—¶ï¼ˆlocal-dify-plugin-daemon_plugin_cms_0.0.1ï¼‰å¹¶è½¬å‘è¯·æ±‚ç»™ SLS æœåŠ¡ç«¯å£ã€‚æ•´ä¸ªé“¾è·¯ä¸Šè€—æ—¶æœ€é•¿çš„æ˜¯ dify_plugin_executeï¼Œè¿™æ˜¯æ’ä»¶è¿è¡Œæ—¶å†…éƒ¨çš„å…¥å£æ–¹æ³•ï¼Œæˆ‘ä»¬æ­£æ˜¯åœ¨æ­¤å¤„æ³¨å…¥äº†æ•…éšœæ¨¡æ‹Ÿçš„æ…¢è°ƒç”¨ã€‚</p>
<p>æ¬¢è¿å¤§å®¶åŠ å…¥æˆ‘ä»¬çš„é’‰é’‰ç¾¤ï¼Œå…±åŒæ„å»ºæ›´å¥½çš„ Dify å…¨é“¾è·¯ç›‘æ§èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p>LoongSuite Python å¼€æºäº¤æµç¾¤ï¼š101925034286</p>
</li>
<li>
<p>LoongSuite Go Agent å¼€æºäº¤æµç¾¤ï¼š102565007776</p>
</li>
<li>
<p>ARMS å¤šè¯­è¨€åº”ç”¨ç›‘æ§äº§å“äº¤æµç¾¤ï¼š159215000379</p>
</li>
</ul>
<p><strong>å‚è€ƒï¼š</strong></p>
<p>[1] è·å– LicenseKey</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Fapi-arms-2019-08-08-describetracelicensekey-apps" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/api-arms-2019-08-08-describetracelicensekey-apps" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p>[2] ARMS åº”ç”¨ç›‘æ§æ”¯æŒçš„ Go ç»„ä»¶å’Œæ¡†æ¶</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Fapplication-monitoring%2Fdeveloper-reference%2Fgo-components-and-frameworks-supported-by-arms-application-monitoring" target="_blank" title="https://help.aliyun.com/zh/arms/application-monitoring/developer-reference/go-components-and-frameworks-supported-by-arms-application-monitoring" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/appâ€¦</a></p>
<p>[3] Dify å®˜æ–¹ç›‘æ§æ¥å…¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Farms%2Ftracing-analysis%2Funtitled-document-1750672984680" target="_blank" title="https://help.aliyun.com/zh/arms/tracing-analysis/untitled-document-1750672984680" ref="nofollow noopener noreferrer">help.aliyun.com/zh/arms/traâ€¦</a></p>
<p>[4]Â é›†æˆé˜¿é‡Œäº‘äº‘ç›‘æ§</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.dify.ai%2Fzh-hans%2Fguides%2Fmonitoring%2Fintegrate-external-ops-tools%2Fintegrate-aliyun" target="_blank" title="https://docs.dify.ai/zh-hans/guides/monitoring/integrate-external-ops-tools/integrate-aliyun" ref="nofollow noopener noreferrer">docs.dify.ai/zh-hans/guiâ€¦</a></p>
<p>[5] Dify Python æ¢é’ˆæ¥å…¥</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fcms%2Fcloudmonitor-2-0%2Fuser-guide%2Fmonitor-dify-applications" target="_blank" title="https://help.aliyun.com/zh/cms/cloudmonitor-2-0/user-guide/monitor-dify-applications" ref="nofollow noopener noreferrer">help.aliyun.com/zh/cms/clouâ€¦</a></p>
<p>[6]Â ä½¿ç”¨ OpenTelemetry å¯¹ Nginx è¿›è¡Œé“¾è·¯è¿½è¸ª</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fopentelemetry%2Fuser-guide%2Fuse-opentelemetry-to-perform-tracing-analysis-on-nginx" target="_blank" title="https://help.aliyun.com/zh/opentelemetry/user-guide/use-opentelemetry-to-perform-tracing-analysis-on-nginx" ref="nofollow noopener noreferrer">help.aliyun.com/zh/openteleâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾]]></title>    <link>https://juejin.cn/post/7576843726011301914</link>    <guid>https://juejin.cn/post/7576843726011301914</guid>    <pubDate>2025-11-26T10:01:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576843726011301914" data-draft-id="7576838095519105075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-26T10:01:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›å®¶è·¯ä¸Šç»•äº†å¼¯"/> <meta itemprop="url" content="https://juejin.cn/user/536217404587134"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/536217404587134/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›å®¶è·¯ä¸Šç»•äº†å¼¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T10:01:52.000Z" title="Wed Nov 26 2025 10:01:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    26
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ”¯ä»˜è¯·æ±‚å¹‚ç­‰æ€§è®¾è®¡ï¼šä»åŸç†åˆ°è½åœ°ï¼Œæœç»é‡å¤æ‰£æ¬¾</h2>
<p>æ”¯ä»˜åœºæ™¯ä¸­ï¼Œâ€œé‡å¤æ”¯ä»˜â€ æ˜¯æœ€è‡´å‘½çš„é—®é¢˜ä¹‹ä¸€ â€”â€” ç”¨æˆ·ç‚¹å‡»ä¸¤æ¬¡æ”¯ä»˜æŒ‰é’®ã€ç½‘ç»œå»¶è¿Ÿå¯¼è‡´ç³»ç»Ÿé‡è¯•ã€ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥ï¼Œéƒ½å¯èƒ½å¯¼è‡´ â€œä¸€ç¬”è®¢å•æ‰£ä¸¤æ¬¡æ¬¾â€ã€‚ä¸€æ—¦å‘ç”Ÿï¼Œä¸ä»…ä¼šå¼•å‘ç”¨æˆ·æŠ•è¯‰ï¼Œè¿˜å¯èƒ½é€ æˆèµ„é‡‘æŸå¤±ä¸åˆè§„é£é™©ã€‚è€Œè§£å†³è¿™ä¸€é—®é¢˜çš„æ ¸å¿ƒï¼Œå°±æ˜¯<strong>ä¿è¯æ”¯ä»˜è¯·æ±‚çš„å¹‚ç­‰æ€§</strong>ã€‚</p>
<p>æœ¬æ–‡ç»“åˆç”µå•†ã€é‡‘èæ”¯ä»˜çš„å®æˆ˜ç»éªŒï¼Œä» â€œä¸ºä»€ä¹ˆéœ€è¦å¹‚ç­‰æ€§â€â€œé‡å¤è¯·æ±‚çš„æ¥æºâ€â€œå…·ä½“å®ç°æ–¹æ¡ˆâ€ åˆ° â€œè½åœ°é¿å‘â€ï¼Œå®Œæ•´æ‹†è§£æ”¯ä»˜å¹‚ç­‰æ€§çš„è®¾è®¡é€»è¾‘ï¼Œæä¾›å¯ç›´æ¥å¤ç”¨çš„æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å…ˆææ‡‚ï¼šæ”¯ä»˜åœºæ™¯çš„å¹‚ç­‰æ€§æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<h4 data-id="heading-2">1. å¹‚ç­‰æ€§çš„å®šä¹‰</h4>
<p>åœ¨è®¡ç®—æœºé¢†åŸŸï¼Œå¹‚ç­‰æ€§æ˜¯æŒ‡ï¼š<strong>åŒä¸€æ“ä½œæ— è®ºæ‰§è¡Œå¤šå°‘æ¬¡ï¼Œæœ€ç»ˆç»“æœéƒ½æ˜¯ä¸€è‡´çš„</strong>ã€‚</p>
<p>å¯¹äºæ”¯ä»˜è¯·æ±‚ï¼Œå¹‚ç­‰æ€§çš„æ ¸å¿ƒè¦æ±‚æ˜¯ï¼š</p>
<ul>
<li>åŒä¸€ç¬”è®¢å•ï¼Œæ— è®ºç”¨æˆ·å‘èµ·å¤šå°‘æ¬¡æ”¯ä»˜è¯·æ±‚ï¼Œéƒ½åªæ‰£ä¸€æ¬¡æ¬¾ï¼›</li>
</ul>

<ul>
<li>åŒä¸€ç¬”æ”¯ä»˜å›è°ƒï¼Œæ— è®ºç¬¬ä¸‰æ–¹ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ï¼‰é‡å¤é€šçŸ¥å¤šå°‘æ¬¡ï¼Œéƒ½åªæ›´æ–°ä¸€æ¬¡è®¢å•çŠ¶æ€ï¼›</li>
</ul>

<ul>
<li>é‡å¤æ“ä½œä¸ä¼šäº§ç”Ÿé¢å¤–çš„ä¸šåŠ¡å½±å“ï¼ˆå¦‚é‡å¤ç”Ÿæˆæ”¯ä»˜è®°å½•ã€é‡å¤å‘é€æ‰£æ¬¾çŸ­ä¿¡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-3">2. ä¸ºä»€ä¹ˆæ”¯ä»˜åœºæ™¯å¿…é¡»ä¿è¯å¹‚ç­‰æ€§ï¼Ÿ</h4>
<p>æ”¯ä»˜çš„æ ¸å¿ƒæ˜¯ â€œèµ„é‡‘å®‰å…¨â€ï¼Œå¹‚ç­‰æ€§æ˜¯èµ„é‡‘å®‰å…¨çš„åº•çº¿ï¼š</p>
<ul>
<li>è‹¥ä¸ä¿è¯å¹‚ç­‰æ€§ï¼šç”¨æˆ·å› ç½‘ç»œå¡é¡¿é‡å¤ç‚¹å‡»æ”¯ä»˜ï¼Œå¯èƒ½å¯¼è‡´ â€œä¸€ç¬”è®¢å•æ‰£ä¸¤æ¬¡æ¬¾â€ï¼ˆèµ„æŸé£é™©ï¼‰ï¼›</li>
</ul>

<ul>
<li>è‹¥ä¸ä¿è¯å¹‚ç­‰æ€§ï¼šç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥ï¼Œå¯èƒ½å¯¼è‡´ â€œè®¢å•å·²æ”¯ä»˜ä½†é‡å¤å›è°ƒæ›´æ–°çŠ¶æ€â€ï¼ˆä¸šåŠ¡æ··ä¹±ï¼‰ï¼›</li>
</ul>

<ul>
<li>åˆè§„è¦æ±‚ï¼šé‡‘èæ”¯ä»˜åœºæ™¯éœ€æ»¡è¶³ â€œä¸€ç¬”äº¤æ˜“ä¸€æ¬¡æ¸…ç®—â€ï¼Œå¹‚ç­‰æ€§æ˜¯åˆè§„çš„åŸºç¡€ã€‚</li>
</ul>
<h3 data-id="heading-4">äºŒã€æ”¯ä»˜è¯·æ±‚é‡å¤çš„ 4 ä¸ªå¸¸è§åœºæ™¯</h3>
<p>åœ¨è®¾è®¡æ–¹æ¡ˆå‰ï¼Œå…ˆæ˜ç¡® â€œé‡å¤è¯·æ±‚ä»å“ªæ¥â€ï¼Œæ‰èƒ½é’ˆå¯¹æ€§è§£å†³ï¼š</p>






























<table><thead><tr><th>é‡å¤åœºæ™¯</th><th>å…·ä½“æè¿°</th><th>å…¸å‹æ¡ˆä¾‹</th></tr></thead><tbody><tr><td>ç”¨æˆ·é‡å¤æ“ä½œ</td><td>ç”¨æˆ·ç‚¹å‡»æ”¯ä»˜æŒ‰é’®åï¼Œå› é¡µé¢æ— å“åº”å†æ¬¡ç‚¹å‡»ï¼ˆæˆ–è¿ç»­ç‚¹å‡»ï¼‰</td><td>ç”µå•†ä¸‹å•åï¼Œç”¨æˆ·å¿«é€Ÿç‚¹å‡» â€œå¾®ä¿¡æ”¯ä»˜â€ æŒ‰é’® 3 æ¬¡</td></tr><tr><td>ç½‘ç»œå»¶è¿Ÿ / è¶…æ—¶é‡è¯•</td><td>æ”¯ä»˜è¯·æ±‚å‘é€åï¼Œå› ç½‘ç»œå»¶è¿Ÿæœªæ”¶åˆ°å“åº”ï¼Œå®¢æˆ·ç«¯ / æœåŠ¡ç«¯è§¦å‘é‡è¯•</td><td>ç§»åŠ¨ç«¯æ”¯ä»˜è¯·æ±‚è¶…æ—¶ï¼ŒAPP è‡ªåŠ¨é‡è¯• 2 æ¬¡</td></tr><tr><td>ç³»ç»Ÿæ•…éšœé‡å‘</td><td>æœåŠ¡ç«¯å¤„ç†æ”¯ä»˜æ—¶å®•æœºï¼Œé‡å¯åé‡æ–°æ¥æ”¶æœªå®Œæˆçš„è¯·æ±‚</td><td>æ”¯ä»˜æœåŠ¡å¤„ç†ä¸­æ•°æ®åº“å®•æœºï¼Œæ¢å¤åé‡æ”¾è¯·æ±‚</td></tr><tr><td>ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒé‡å¤é€šçŸ¥</td><td>å¾®ä¿¡æ”¯ä»˜ / æ”¯ä»˜å®çš„æ”¯ä»˜ç»“æœå›è°ƒï¼Œå› ç½‘ç»œæ³¢åŠ¨é‡å¤å‘é€</td><td>æ”¯ä»˜å®å›è°ƒé€šçŸ¥è¶…æ—¶ï¼Œé‡å¤å‘é€ 3 æ¬¡æ”¯ä»˜æˆåŠŸé€šçŸ¥</td></tr></tbody></table>
<p><strong>å…³é”®ç»“è®º</strong>ï¼šé‡å¤è¯·æ±‚æ— æ³•é¿å…ï¼ˆç”¨æˆ·æ“ä½œã€ç½‘ç»œã€ç³»ç»Ÿéƒ½å¯èƒ½å¯¼è‡´ï¼‰ï¼Œå¿…é¡»é€šè¿‡æŠ€æœ¯æ‰‹æ®µè®©é‡å¤è¯·æ±‚ â€œæ— å®³â€ã€‚</p>
<h3 data-id="heading-5">ä¸‰ã€æ ¸å¿ƒæ–¹æ¡ˆï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„ 5 ç§å®ç°æ–¹å¼ï¼ˆæŒ‰æ˜“è½åœ°æ’åºï¼‰</h3>
<p>æ”¯ä»˜å¹‚ç­‰æ€§çš„å®ç°æ ¸å¿ƒæ˜¯ â€œ<strong>å”¯ä¸€æ ‡è¯† + çŠ¶æ€æ ¡éªŒ</strong>â€â€”â€” ç”¨å”¯ä¸€æ ‡è¯†åŒºåˆ†è¯·æ±‚ï¼Œç”¨çŠ¶æ€æ ¡éªŒåˆ¤æ–­æ˜¯å¦å…è®¸æ‰§è¡Œï¼Œä»¥ä¸‹æ˜¯ 5 ç§ä¸»æµæ–¹æ¡ˆï¼Œè¦†ç›–ä¸åŒåœºæ™¯ï¼š</p>
<h4 data-id="heading-6">æ–¹æ¡ˆ 1ï¼šå”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰å·ï¼‰â€”â€” æœ€åŸºç¡€ã€æœ€å¸¸ç”¨</h4>
<h5 data-id="heading-7">åŸç†</h5>
<p>ç”¨<strong>å…¨å±€å”¯ä¸€çš„è®¢å•å·</strong>ä½œä¸ºå¹‚ç­‰æ ‡è¯†ï¼Œæ”¯ä»˜è¯·æ±‚å¿…é¡»æºå¸¦è¯¥è®¢å•å·ï¼ŒæœåŠ¡ç«¯é€šè¿‡è®¢å•å·åˆ¤æ–­æ˜¯å¦å·²å¤„ç†ï¼š</p>
<ol>
<li>ä¸‹å•æ—¶ç”Ÿæˆå”¯ä¸€è®¢å•å·ï¼ˆå¦‚ORDER202511210001ï¼‰ï¼Œå…³è”ç”¨æˆ·ã€é‡‘é¢ç­‰æ ¸å¿ƒä¿¡æ¯ï¼›</li>
</ol>

<ol start="2">
<li>ç”¨æˆ·æ”¯ä»˜æ—¶ï¼Œè¯·æ±‚æºå¸¦è¯¥è®¢å•å·ï¼›</li>
</ol>

<ol start="3">
<li>æœåŠ¡ç«¯æ¥æ”¶è¯·æ±‚åï¼Œå…ˆæŸ¥è¯¢ â€œè¯¥è®¢å•å·æ˜¯å¦å·²æ”¯ä»˜ / å¤„ç†ä¸­â€ï¼›</li>
</ol>

<ol start="4">
<li>è‹¥å·²å¤„ç†ï¼šç›´æ¥è¿”å›æˆåŠŸç»“æœï¼›è‹¥æœªå¤„ç†ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼›è‹¥å¤„ç†ä¸­ï¼šè¿”å› â€œå¤„ç†ä¸­â€ï¼ˆé¿å…å¹¶å‘é‡å¤ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-8">å®ç°æ­¥éª¤ï¼ˆJava+MySQLï¼‰</h5>
<ol>
<li><strong>è®¢å•è¡¨è®¾è®¡</strong>ï¼ˆæ ¸å¿ƒå­—æ®µï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_order` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰æ ‡è¯†ï¼‰'</span>,
  `user_id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç”¨æˆ·ID'</span>,
  `amount` <span class="hljs-type">decimal</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ”¯ä»˜é‡‘é¢'</span>,
  `status` tinyint <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ”¯ä»˜çŠ¶æ€ï¼š0=å¾…æ”¯ä»˜ï¼Œ1=æ”¯ä»˜ä¸­ï¼Œ2=å·²æ”¯ä»˜ï¼Œ3=æ”¯ä»˜å¤±è´¥'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  `update_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'æ›´æ–°æ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_order_no` (`order_no`) COMMENT <span class="hljs-string">'è®¢å•å·å”¯ä¸€ç´¢å¼•ï¼ˆç¡®ä¿å¹‚ç­‰ï¼‰'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜è®¢å•è¡¨'</span>;
</code></pre>
<ul>
<li>å…³é”®ï¼šorder_noåŠ å”¯ä¸€ç´¢å¼•ï¼Œé¿å…é‡å¤åˆ›å»ºè®¢å•ï¼›statuså­—æ®µç”¨äºçŠ¶æ€æ ¡éªŒã€‚</li>
</ul>
<ol start="2">
<li><strong>æœåŠ¡ç«¯æ”¯ä»˜æ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentOrderMapper orderMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PayGatewayClient payGateway; <span class="hljs-comment">// è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ç½‘å…³ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ï¼‰</span>
    
    <span class="hljs-comment">/**
     * æ”¯ä»˜æ¥å£ï¼ˆä¿è¯å¹‚ç­‰æ€§ï¼‰
     * <span class="hljs-doctag">@param</span> orderNo å”¯ä¸€è®¢å•å·ï¼ˆå¹‚ç­‰æ ‡è¯†ï¼‰
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@param</span> amount æ”¯ä»˜é‡‘é¢
     * <span class="hljs-doctag">@return</span> æ”¯ä»˜ç»“æœ
     */</span>
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO pay(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šæŸ¥è¯¢è®¢å•ï¼ˆé€šè¿‡å”¯ä¸€è®¢å•å·ï¼‰</span>
        PaymentOrder order = orderMapper.selectByOrderNo(orderNo);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šå·²å¤„ç†è¿‡ï¼Œç›´æ¥è¿”å›ç»“æœ</span>
            <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">2</span>) { <span class="hljs-comment">// å·²æ”¯ä»˜</span>
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">1</span>) { <span class="hljs-comment">// æ”¯ä»˜ä¸­</span>
                <span class="hljs-keyword">return</span> PaymentResultDTO.processing(<span class="hljs-string">"æ”¯ä»˜å¤„ç†ä¸­ï¼Œè¯·ç¨åæŸ¥è¯¢"</span>, orderNo);
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">3</span>) { <span class="hljs-comment">// æ”¯ä»˜å¤±è´¥ï¼Œå…è®¸é‡è¯•</span>
                <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
            }
        }
        <span class="hljs-comment">// æ­¥éª¤3ï¼šæœªå¤„ç†ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘</span>
        <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
    }
    
    <span class="hljs-comment">/**
     * æ ¸å¿ƒæ”¯ä»˜é€»è¾‘ï¼ˆæŠ½ç¦»å¤ç”¨ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> PaymentResultDTO processPayment(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šåˆ›å»ºè®¢å•ï¼ˆå”¯ä¸€ç´¢å¼•ä¿è¯ä¸ä¼šé‡å¤åˆ›å»ºï¼‰</span>
        PaymentOrder newOrder = new PaymentOrder();
        newOrder.setOrderNo(orderNo);
        newOrder.setUserId(userId);
        newOrder.setAmount(amount);
        newOrder.setStatus(<span class="hljs-number">1</span>); <span class="hljs-comment">// çŠ¶æ€è®¾ä¸ºâ€œæ”¯ä»˜ä¸­â€ï¼ˆé˜²æ­¢å¹¶å‘é‡å¤ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            orderMapper.insert(newOrder);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// å¹¶å‘åœºæ™¯ä¸‹ï¼Œå…¶ä»–çº¿ç¨‹å·²åˆ›å»ºè®¢å•ï¼Œç›´æ¥æŸ¥è¯¢è¿”å›</span>
            <span class="hljs-keyword">return</span> pay(orderNo, userId, amount);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ­¥éª¤2ï¼šè°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ç½‘å…³ï¼ˆå¦‚å¾®ä¿¡æ”¯ä»˜ç»Ÿä¸€ä¸‹å•æ¥å£ï¼‰</span>
            PayGatewayResponse gatewayResp = payGateway.unifiedOrder(orderNo, amount);
            <span class="hljs-keyword">if</span> (gatewayResp.isSuccess()) {
                <span class="hljs-comment">// æ­¥éª¤3ï¼šæ”¯ä»˜æˆåŠŸï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œå·²æ”¯ä»˜â€</span>
                orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">2</span>);
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// æ­¥éª¤4ï¼šæ”¯ä»˜å¤±è´¥ï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œæ”¯ä»˜å¤±è´¥â€</span>
                orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">3</span>);
                <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¤±è´¥ï¼š"</span> + gatewayResp.getMsg(), orderNo);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ­¥éª¤5ï¼šå¼‚å¸¸æƒ…å†µï¼Œæ›´æ–°çŠ¶æ€ä¸ºâ€œæ”¯ä»˜å¤±è´¥â€</span>
            orderMapper.updateStatusByOrderNo(orderNo, <span class="hljs-number">3</span>);
            log.error(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}"</span>, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-9">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå•ä½“åº”ç”¨ã€è®¢å•é©±åŠ¨çš„æ”¯ä»˜ï¼ˆå¦‚ç”µå•†è®¢å•æ”¯ä»˜ï¼‰ã€åŒæ­¥æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šå®ç°ç®€å•ï¼Œæ— é¢å¤–ä¾èµ–ï¼ˆä»…ç”¨è®¢å•è¡¨ï¼‰ï¼Œå…¼å®¹æ€§å¼ºï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šä¾èµ–è®¢å•å·çš„å”¯ä¸€æ€§ï¼Œè‹¥è®¢å•å·ç”Ÿæˆè§„åˆ™æ³„éœ²å¯èƒ½è¢«æ¶æ„åˆ©ç”¨ï¼ˆéœ€é…åˆç­¾åéªŒè¯ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-10">æ–¹æ¡ˆ 2ï¼šä»¤ç‰Œæœºåˆ¶ï¼ˆTokenï¼‰â€”â€” é€‚åˆå‰ç«¯é‡å¤æäº¤</h4>
<h5 data-id="heading-11">åŸç†</h5>
<p>é’ˆå¯¹ â€œç”¨æˆ·é‡å¤ç‚¹å‡»â€ åœºæ™¯ï¼Œé€šè¿‡ â€œé¢„ç”Ÿæˆä»¤ç‰Œâ€ æ§åˆ¶æ”¯ä»˜è¯·æ±‚çš„å”¯ä¸€æ€§ï¼š</p>
<ol>
<li>å‰ç«¯å‘èµ·æ”¯ä»˜å‰ï¼Œå…ˆè°ƒç”¨ â€œè·å–æ”¯ä»˜ä»¤ç‰Œâ€ æ¥å£ï¼ŒæœåŠ¡ç«¯ç”Ÿæˆå”¯ä¸€ Tokenï¼ˆå¦‚TOKEN_123456ï¼‰ï¼Œå­˜å…¥ Redisï¼ˆè®¾ç½® 15 åˆ†é’Ÿè¿‡æœŸï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>å‰ç«¯æºå¸¦è¯¥ Token å‘èµ·æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ol>

<ol start="3">
<li>æœåŠ¡ç«¯æ ¡éªŒ Tokenï¼šè‹¥ Token ä¸å­˜åœ¨ï¼ˆå·²ä½¿ç”¨ / è¿‡æœŸï¼‰ï¼Œæ‹’ç»è¯·æ±‚ï¼›è‹¥å­˜åœ¨ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘å¹¶åˆ é™¤ Tokenï¼ˆæˆ–æ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼‰ã€‚</li>
</ol>
<h5 data-id="heading-12">å®ç°æ­¥éª¤ï¼ˆJava+Redisï¼‰</h5>
<ol>
<li><strong>è·å–ä»¤ç‰Œæ¥å£</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@RestController</span>
<span class="hljs-meta">@RequestMapping(<span class="hljs-string">"/api/pay"</span>)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentController</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;
    <span class="hljs-keyword">private</span> static <span class="hljs-keyword">final</span> String TOKEN_PREFIX = <span class="hljs-string">"pay:token:"</span>;
    
    <span class="hljs-comment">/**
     * è·å–æ”¯ä»˜ä»¤ç‰Œï¼ˆå‰ç«¯æ”¯ä»˜å‰è°ƒç”¨ï¼‰
     * <span class="hljs-doctag">@param</span> userId ç”¨æˆ·ID
     * <span class="hljs-doctag">@return</span> å”¯ä¸€Token
     */</span>
    <span class="hljs-meta">@GetMapping(<span class="hljs-string">"/get-token"</span>)</span>
    <span class="hljs-keyword">public</span> ResultDTO getPayToken(<span class="hljs-built_in">Long</span> userId) {
        <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€Tokenï¼ˆUUID+ç”¨æˆ·IDï¼Œç¡®ä¿å”¯ä¸€æ€§ï¼‰</span>
        String token = <span class="hljs-string">"TOKEN_"</span> + UUID.randomUUID().toString().replace(<span class="hljs-string">"-"</span>, <span class="hljs-string">""</span>) + <span class="hljs-string">"_"</span> + userId;
        <span class="hljs-comment">// å­˜å…¥Redisï¼Œè¿‡æœŸæ—¶é—´15åˆ†é’Ÿï¼ˆé¿å…Tokené•¿æœŸæœ‰æ•ˆï¼‰</span>
        redisTemplate.opsForValue().<span class="hljs-keyword">set</span>(TOKEN_PREFIX + token, userId.toString(), <span class="hljs-number">15</span>, TimeUnit.MINUTES);
        <span class="hljs-keyword">return</span> ResultDTO.success(token);
    }
}
</code></pre>
<ol start="2">
<li><strong>æ”¯ä»˜æ¥å£ï¼ˆç»“åˆ Token æ ¡éªŒï¼‰</strong> ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> StringRedisTemplate redisTemplate;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOKEN_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"pay:token:"</span>;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO <span class="hljs-title function_">payWithToken</span><span class="hljs-params">(String token, String orderNo, Long userId, BigDecimal amount)</span> {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šTokenæ ¡éªŒï¼ˆæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">redisKey</span> <span class="hljs-operator">=</span> TOKEN_PREFIX + token;
        <span class="hljs-type">String</span> <span class="hljs-variable">redisUserId</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().get(redisKey);
        <span class="hljs-keyword">if</span> (redisUserId == <span class="hljs-literal">null</span> || !redisUserId.equals(userId.toString())) {
            <span class="hljs-comment">// Tokenä¸å­˜åœ¨/å·²ä½¿ç”¨/ç”¨æˆ·ä¸åŒ¹é…ï¼Œæ‹’ç»è¯·æ±‚</span>
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ— æ•ˆçš„æ”¯ä»˜è¯·æ±‚ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"</span>, orderNo);
        }
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šè®¢å•æ ¡éªŒï¼ˆåŒæ–¹æ¡ˆ1ï¼ŒåŒé‡ä¿éšœï¼‰</span>
        <span class="hljs-type">PaymentOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectByOrderNo(orderNo);
        <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span> &amp;&amp; order.getStatus() == <span class="hljs-number">2</span>) {
            <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ­¥éª¤3ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
            <span class="hljs-type">PaymentResultDTO</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> processPayment(orderNo, userId, amount);
            
            <span class="hljs-comment">// æ­¥éª¤4ï¼šæ”¯ä»˜å®Œæˆåï¼Œåˆ é™¤Tokenï¼ˆæ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼‰</span>
            redisTemplate.delete(redisKey);
            
            <span class="hljs-keyword">return</span> result;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// å¼‚å¸¸æ—¶ä¸åˆ é™¤Tokenï¼Œå…è®¸é‡è¯•ï¼ˆé¿å…å› ç³»ç»Ÿå¼‚å¸¸å¯¼è‡´æ— æ³•æ”¯ä»˜ï¼‰</span>
            log.error(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼ŒTokenï¼š{}ï¼Œè®¢å•å·ï¼š{}"</span>, token, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-13">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå‰ç«¯é‡å¤æäº¤ï¼ˆå¦‚æŒ‰é’®è¿ç»­ç‚¹å‡»ï¼‰ã€ç§»åŠ¨ç«¯æ”¯ä»˜ã€éœ€è¦é˜²æ­¢æ¶æ„è¯·æ±‚çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šToken ä¸€æ¬¡æ€§æœ‰æ•ˆï¼Œå®‰å…¨æ€§é«˜ï¼Œèƒ½æœ‰æ•ˆé˜²æ­¢æ—  Token çš„æ¶æ„æ”¯ä»˜è¯·æ±‚ï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¤šä¸€æ­¥ â€œè·å– Tokenâ€ æ¥å£è°ƒç”¨ï¼Œå¢åŠ å‰ç«¯å¼€å‘æˆæœ¬ï¼›ä¾èµ– Redisï¼ˆåˆ†å¸ƒå¼åœºæ™¯éœ€ Redis é›†ç¾¤ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-14">æ–¹æ¡ˆ 3ï¼šæ”¯ä»˜çŠ¶æ€æœºæ ¡éªŒ â€”â€” é˜²æ­¢çŠ¶æ€å›é€€</h4>
<h5 data-id="heading-15">åŸç†</h5>
<p>æ”¯ä»˜è®¢å•çš„çŠ¶æ€å˜æ›´éµå¾ªå›ºå®šæµç¨‹ï¼ˆå¦‚ â€œå¾…æ”¯ä»˜â†’æ”¯ä»˜ä¸­â†’å·²æ”¯ä»˜â€ï¼‰ï¼Œé€šè¿‡çŠ¶æ€æœºé™åˆ¶ â€œä¸å…è®¸çš„çŠ¶æ€å˜æ›´â€ï¼Œé¿å…é‡å¤å¤„ç†ï¼š</p>
<ul>
<li>çŠ¶æ€æµè½¬è§„åˆ™ï¼š0=å¾…æ”¯ä»˜ â†’ 1=æ”¯ä»˜ä¸­ â†’ 2=å·²æ”¯ä»˜ æˆ– 3=æ”¯ä»˜å¤±è´¥ï¼›</li>
</ul>

<ul>
<li>å¹‚ç­‰é€»è¾‘ï¼šè‹¥å½“å‰çŠ¶æ€æ˜¯ â€œå·²æ”¯ä»˜â€ æˆ– â€œæ”¯ä»˜ä¸­â€ï¼Œæ‹’ç»é‡å¤æ”¯ä»˜è¯·æ±‚ï¼›åªæœ‰ â€œå¾…æ”¯ä»˜â€ æˆ– â€œæ”¯ä»˜å¤±è´¥â€ çŠ¶æ€å…è®¸æ‰§è¡Œæ”¯ä»˜ã€‚</li>
</ul>
<h5 data-id="heading-16">å®ç°ç¤ºä¾‹ï¼ˆçŠ¶æ€æœºæ ¡éªŒï¼‰</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">/**
 * æ”¯ä»˜çŠ¶æ€æœºæ ¡éªŒï¼ˆå·¥å…·ç±»ï¼‰
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentStateMachine</span> {
    <span class="hljs-comment">// çŠ¶æ€æµè½¬è§„åˆ™ï¼škey=å½“å‰çŠ¶æ€ï¼Œvalue=å…è®¸æµè½¬çš„ç›®æ ‡çŠ¶æ€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;Integer, List&lt;Integer&gt;&gt; STATE_RULES = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
    
    <span class="hljs-keyword">static</span> {
        <span class="hljs-comment">// å¾…æ”¯ä»˜ï¼ˆ0ï¼‰å¯æµè½¬åˆ°ï¼šæ”¯ä»˜ä¸­ï¼ˆ1ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">0</span>, Collections.singletonList(<span class="hljs-number">1</span>));
        <span class="hljs-comment">// æ”¯ä»˜ä¸­ï¼ˆ1ï¼‰å¯æµè½¬åˆ°ï¼šå·²æ”¯ä»˜ï¼ˆ2ï¼‰ã€æ”¯ä»˜å¤±è´¥ï¼ˆ3ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">1</span>, Arrays.asList(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>));
        <span class="hljs-comment">// æ”¯ä»˜å¤±è´¥ï¼ˆ3ï¼‰å¯æµè½¬åˆ°ï¼šæ”¯ä»˜ä¸­ï¼ˆ1ï¼‰ï¼ˆå…è®¸é‡è¯•ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">3</span>, Collections.singletonList(<span class="hljs-number">1</span>));
        <span class="hljs-comment">// å·²æ”¯ä»˜ï¼ˆ2ï¼‰ä¸å¯æµè½¬åˆ°ä»»ä½•çŠ¶æ€ï¼ˆä¸å…è®¸é‡å¤æ”¯ä»˜ï¼‰</span>
        STATE_RULES.put(<span class="hljs-number">2</span>, Collections.emptyList());
    }
    
    <span class="hljs-comment">/**
     * æ ¡éªŒçŠ¶æ€æ˜¯å¦å…è®¸æµè½¬
     * <span class="hljs-doctag">@param</span> currentState å½“å‰çŠ¶æ€
     * <span class="hljs-doctag">@param</span> targetState ç›®æ ‡çŠ¶æ€
     * <span class="hljs-doctag">@return</span> true=å…è®¸ï¼Œfalse=ä¸å…è®¸
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkStateTransition</span><span class="hljs-params">(<span class="hljs-type">int</span> currentState, <span class="hljs-type">int</span> targetState)</span> {
        List&lt;Integer&gt; allowedStates = STATE_RULES.getOrDefault(currentState, Collections.emptyList());
        <span class="hljs-keyword">return</span> allowedStates.contains(targetState);
    }
}
<span class="hljs-comment">// æ”¯ä»˜æ¥å£ä¸­ä½¿ç”¨çŠ¶æ€æœºæ ¡éªŒ</span>
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> PaymentResultDTO <span class="hljs-title function_">payWithStateMachine</span><span class="hljs-params">(String orderNo, Long userId, BigDecimal amount)</span> {
    <span class="hljs-type">PaymentOrder</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> orderMapper.selectByOrderNo(orderNo);
    <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// çŠ¶æ€æœºæ ¡éªŒï¼šè‹¥å½“å‰çŠ¶æ€ä¸å…è®¸æµè½¬åˆ°â€œæ”¯ä»˜ä¸­â€ï¼Œç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (!PaymentStateMachine.checkStateTransition(order.getStatus(), <span class="hljs-number">1</span>)) {
            <span class="hljs-keyword">if</span> (order.getStatus() == <span class="hljs-number">2</span>) {
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"å½“å‰è®¢å•çŠ¶æ€ä¸å…è®¸æ”¯ä»˜"</span>, orderNo);
            }
        }
    }
    <span class="hljs-comment">// åç»­æ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
    <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
}
</code></pre>
<h5 data-id="heading-17">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚æ”¯ä»˜æµç¨‹ï¼ˆå¦‚åˆ†æœŸæ”¯ä»˜ã€é¢„æˆæƒæ”¯ä»˜ï¼‰ã€éœ€è¦ä¸¥æ ¼æ§åˆ¶çŠ¶æ€æµè½¬çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šçŠ¶æ€æ ¡éªŒä¸¥è°¨ï¼Œèƒ½é˜²æ­¢ â€œå·²æ”¯ä»˜è®¢å•é‡å¤æ”¯ä»˜â€â€œæ”¯ä»˜ä¸­è®¢å•è¢«é‡å¤å¤„ç†â€ï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šéœ€ç»´æŠ¤çŠ¶æ€æœºè§„åˆ™ï¼Œé€‚åˆçŠ¶æ€æµè½¬æ¸…æ™°çš„åœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-18">æ–¹æ¡ˆ 4ï¼šé˜²é‡è¡¨ â€”â€” åˆ†å¸ƒå¼åœºæ™¯çš„å¼ºä¸€è‡´æ€§ä¿éšœ</h4>
<h5 data-id="heading-19">åŸç†</h5>
<p>é’ˆå¯¹åˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¤šæœåŠ¡å®ä¾‹ï¼‰ï¼Œç”¨ â€œé˜²é‡è¡¨â€ è®°å½•å·²å¤„ç†çš„æ”¯ä»˜è¯·æ±‚ï¼Œé€šè¿‡æ•°æ®åº“å”¯ä¸€ç´¢å¼•ä¿è¯å¹‚ç­‰ï¼š</p>
<ol>
<li>é˜²é‡è¡¨ä»…å­˜å‚¨ â€œå¹‚ç­‰æ ‡è¯†â€ï¼ˆå¦‚è®¢å•å·ã€æ”¯ä»˜æµæ°´å·ï¼‰ï¼Œæ— å…¶ä»–ä¸šåŠ¡å­—æ®µï¼›</li>
</ol>

<ol start="2">
<li>æ”¯ä»˜è¯·æ±‚åˆ°è¾¾åï¼Œå…ˆå‘é˜²é‡è¡¨æ’å…¥å¹‚ç­‰æ ‡è¯†ï¼›</li>
</ol>

<ol start="3">
<li>è‹¥æ’å…¥æˆåŠŸï¼ˆæ— é‡å¤ï¼‰ï¼Œæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼›è‹¥æ’å…¥å¤±è´¥ï¼ˆå·²å­˜åœ¨ï¼‰ï¼Œç›´æ¥è¿”å›æˆåŠŸç»“æœã€‚</li>
</ol>
<h5 data-id="heading-20">å®ç°æ­¥éª¤</h5>
<ol>
<li><strong>é˜²é‡è¡¨è®¾è®¡</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_idempotent` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `idempotent_key` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å¹‚ç­‰æ ‡è¯†ï¼ˆè®¢å•å·/æ”¯ä»˜æµæ°´å·ï¼‰'</span>,
  `create_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'åˆ›å»ºæ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_idempotent_key` (`idempotent_key`) COMMENT <span class="hljs-string">'å¹‚ç­‰æ ‡è¯†å”¯ä¸€ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜é˜²é‡è¡¨'</span>;
</code></pre>
<ul>
<li>æ ¸å¿ƒï¼šidempotent_keyåŠ å”¯ä¸€ç´¢å¼•ï¼Œç¡®ä¿åŒä¸€æ ‡è¯†åªèƒ½æ’å…¥ä¸€æ¬¡ã€‚</li>
</ul>
<ol start="2">
<li><strong>åˆ†å¸ƒå¼æ”¯ä»˜æ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedPaymentService</span> {
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentIdempotentMapper idempotentMapper;
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> PaymentOrderMapper orderMapper;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> PaymentResultDTO distributedPay(String orderNo, <span class="hljs-built_in">Long</span> userId, BigDecimal amount) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šæ’å…¥é˜²é‡è¡¨ï¼ˆæ ¸å¿ƒå¹‚ç­‰é€»è¾‘ï¼‰</span>
        PaymentIdempotent idempotent = new PaymentIdempotent();
        idempotent.setIdempotentKey(orderNo); <span class="hljs-comment">// ç”¨è®¢å•å·ä½œä¸ºå¹‚ç­‰æ ‡è¯†</span>
        <span class="hljs-keyword">try</span> {
            idempotentMapper.insert(idempotent);
        } <span class="hljs-keyword">catch</span> (DuplicateKeyException e) {
            <span class="hljs-comment">// æ’å…¥å¤±è´¥ï¼Œè¯´æ˜å·²å¤„ç†è¿‡ï¼ŒæŸ¥è¯¢è®¢å•çŠ¶æ€è¿”å›</span>
            PaymentOrder order = orderMapper.selectByOrderNo(orderNo);
            <span class="hljs-keyword">if</span> (order != <span class="hljs-literal">null</span> &amp;&amp; order.getStatus() == <span class="hljs-number">2</span>) {
                <span class="hljs-keyword">return</span> PaymentResultDTO.success(<span class="hljs-string">"æ”¯ä»˜æˆåŠŸ"</span>, orderNo);
            }
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"è¯¥è®¢å•å·²æäº¤æ”¯ä»˜ï¼Œè¯·ç¨åæŸ¥è¯¢ç»“æœ"</span>, orderNo);
        }
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šæ‰§è¡Œæ”¯ä»˜é€»è¾‘ï¼ˆåŒæ–¹æ¡ˆ1ï¼‰</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> processPayment(orderNo, userId, amount);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// æ­¥éª¤3ï¼šæ”¯ä»˜å¤±è´¥ï¼Œåˆ é™¤é˜²é‡è¡¨è®°å½•ï¼ˆå…è®¸é‡è¯•ï¼‰</span>
            idempotentMapper.deleteByIdempotentKey(orderNo);
            log.error(<span class="hljs-string">"åˆ†å¸ƒå¼æ”¯ä»˜å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}"</span>, orderNo, e);
            <span class="hljs-keyword">return</span> PaymentResultDTO.fail(<span class="hljs-string">"æ”¯ä»˜å¼‚å¸¸ï¼Œè¯·é‡è¯•"</span>, orderNo);
        }
    }
}
</code></pre>
<h5 data-id="heading-21">é€‚ç”¨åœºæ™¯ä¸ä¼˜ç¼ºç‚¹</h5>
<ul>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿï¼ˆå¤šæœåŠ¡å®ä¾‹ï¼‰ã€é«˜å¹¶å‘æ”¯ä»˜ï¼ˆå¦‚ç§’æ€æ”¯ä»˜ï¼‰ã€éœ€è¦å¼ºä¸€è‡´æ€§çš„åœºæ™¯ï¼›</li>
</ul>

<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šä¸ä¾èµ–ç¼“å­˜ï¼Œæ•°æ®åº“å”¯ä¸€ç´¢å¼•ä¿è¯å¼ºä¸€è‡´æ€§ï¼Œé€‚åˆåˆ†å¸ƒå¼ç¯å¢ƒï¼›</li>
</ul>

<ul>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¤šä¸€å¼ é˜²é‡è¡¨ï¼Œå¢åŠ æ•°æ®åº“å­˜å‚¨æˆæœ¬ï¼›æ’å…¥åˆ é™¤æ“ä½œå¢åŠ æ•°æ®åº“å‹åŠ›ï¼ˆå¯é€šè¿‡åˆ†è¡¨ä¼˜åŒ–ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-22">æ–¹æ¡ˆ 5ï¼šç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒå¹‚ç­‰ â€”â€” å¤„ç†é‡å¤é€šçŸ¥</h4>
<h5 data-id="heading-23">åŸç†</h5>
<p>ç¬¬ä¸‰æ–¹æ”¯ä»˜å¹³å°ï¼ˆå¾®ä¿¡æ”¯ä»˜ã€æ”¯ä»˜å®ï¼‰çš„æ”¯ä»˜ç»“æœå›è°ƒå¯èƒ½é‡å¤å‘é€ï¼Œéœ€å•ç‹¬å¤„ç†å›è°ƒçš„å¹‚ç­‰æ€§ï¼š</p>
<ol>
<li>ç¬¬ä¸‰æ–¹å›è°ƒä¼šæºå¸¦å”¯ä¸€çš„ â€œæ”¯ä»˜æµæ°´å·â€ï¼ˆå¦‚å¾®ä¿¡çš„transaction_idã€æ”¯ä»˜å®çš„trade_noï¼‰ï¼›</li>
</ol>

<ol start="2">
<li>æœåŠ¡ç«¯æ¥æ”¶å›è°ƒåï¼Œå…ˆæ ¡éªŒè¯¥æµæ°´å·æ˜¯å¦å·²å¤„ç†ï¼›</li>
</ol>

<ol start="3">
<li>è‹¥å·²å¤„ç†ï¼šç›´æ¥è¿”å›ç¬¬ä¸‰æ–¹ â€œæˆåŠŸâ€ æ ‡è¯†ï¼ˆé¿å…ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥ï¼‰ï¼›è‹¥æœªå¤„ç†ï¼šæ›´æ–°è®¢å•çŠ¶æ€å¹¶è®°å½•æµæ°´å·ã€‚</li>
</ol>
<h5 data-id="heading-24">å®ç°æ­¥éª¤ï¼ˆä»¥å¾®ä¿¡æ”¯ä»˜å›è°ƒä¸ºä¾‹ï¼‰</h5>
<ol>
<li><strong>å›è°ƒè®°å½•è¡¨è®¾è®¡</strong>ï¼ˆå­˜å‚¨å·²å¤„ç†çš„å›è°ƒæµæ°´å·ï¼‰ï¼š</li>
</ol>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `payment_callback_record` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `third_party_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç¬¬ä¸‰æ–¹æ”¯ä»˜æµæ°´å·ï¼ˆå¦‚å¾®ä¿¡transaction_idï¼‰'</span>,
  `order_no` <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'å…³è”è®¢å•å·'</span>,
  `callback_time` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span> COMMENT <span class="hljs-string">'å›è°ƒæ—¶é—´'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`),
  <span class="hljs-keyword">UNIQUE</span> KEY `uk_third_party_no` (`third_party_no`) COMMENT <span class="hljs-string">'ç¬¬ä¸‰æ–¹æµæ°´å·å”¯ä¸€ç´¢å¼•'</span>
) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 COMMENT <span class="hljs-string">'æ”¯ä»˜å›è°ƒè®°å½•è¡¨'</span>;
</code></pre>
<ol start="2">
<li><strong>å¾®ä¿¡æ”¯ä»˜å›è°ƒæ¥å£å®ç°</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@RestController</span>
<span class="hljs-keyword">@RequestMapping</span>(<span class="hljs-string">"/api/pay/callback"</span>)
public class WechatPayCallbackController {
    <span class="hljs-keyword">@Autowired</span>
    private PaymentCallbackRecordMapper callbackMapper;
    <span class="hljs-keyword">@Autowired</span>
    private PaymentOrderMapper orderMapper;
    
    <span class="hljs-comment">/**
     * å¾®ä¿¡æ”¯ä»˜å›è°ƒæ¥å£ï¼ˆä¿è¯å¹‚ç­‰æ€§ï¼‰
     */</span>
    <span class="hljs-keyword">@PostMapping</span>(<span class="hljs-string">"/wechat"</span>)
    public String wechatPayCallback(<span class="hljs-keyword">@RequestBody</span> String xmlData) {
        <span class="hljs-comment">// æ­¥éª¤1ï¼šè§£æå¾®ä¿¡å›è°ƒæ•°æ®ï¼ˆè·å–transaction_idã€order_noã€result_codeç­‰ï¼‰</span>
        WechatCallbackDTO callbackDTO = <span class="hljs-built_in">parseWechatCallback</span>(xmlData);
        String thirdPartyNo = callbackDTO<span class="hljs-selector-class">.getTransactionId</span>(); <span class="hljs-comment">// ç¬¬ä¸‰æ–¹å”¯ä¸€æµæ°´å·</span>
        String orderNo = callbackDTO<span class="hljs-selector-class">.getOutTradeNo</span>(); <span class="hljs-comment">// å•†æˆ·è®¢å•å·</span>
        
        <span class="hljs-comment">// æ­¥éª¤2ï¼šæ ¡éªŒå›è°ƒæ˜¯å¦å·²å¤„ç†ï¼ˆå¹‚ç­‰æ ¸å¿ƒï¼‰</span>
        PaymentCallbackRecord record = callbackMapper<span class="hljs-selector-class">.selectByThirdPartyNo</span>(thirdPartyNo);
        if (record != null) {
            <span class="hljs-comment">// å·²å¤„ç†ï¼Œè¿”å›å¾®ä¿¡â€œæˆåŠŸâ€æ ‡è¯†ï¼ˆé¿å…é‡å¤å›è°ƒï¼‰</span>
            return <span class="hljs-built_in">buildWechatSuccessXml</span>();
        }
        
        <span class="hljs-comment">// æ­¥éª¤3ï¼šæ ¡éªŒæ”¯ä»˜ç»“æœï¼ˆä»…å¤„ç†æ”¯ä»˜æˆåŠŸçš„å›è°ƒï¼‰</span>
        if (!"SUCCESS".equals(callbackDTO.getResultCode())) {
            log<span class="hljs-selector-class">.error</span>("å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤±è´¥ï¼Œè®¢å•å·ï¼š{}ï¼ŒåŸå› ï¼š{}", orderNo, callbackDTO.getErrCodeDes());
            return <span class="hljs-built_in">buildWechatFailXml</span>("æ”¯ä»˜å¤±è´¥");
        }
        
        try {
            <span class="hljs-comment">// æ­¥éª¤4ï¼šæ›´æ–°è®¢å•çŠ¶æ€ä¸ºâ€œå·²æ”¯ä»˜â€</span>
            int updateCount = orderMapper<span class="hljs-selector-class">.updateStatusByOrderNo</span>(orderNo, <span class="hljs-number">2</span>);
            if (updateCount == <span class="hljs-number">0</span>) {
                log<span class="hljs-selector-class">.error</span>("è®¢å•ä¸å­˜åœ¨æˆ–å·²å¤„ç†ï¼Œè®¢å•å·ï¼š{}", orderNo);
                return <span class="hljs-built_in">buildWechatSuccessXml</span>(); <span class="hljs-comment">// ä»è¿”å›æˆåŠŸï¼Œé¿å…é‡å¤å›è°ƒ</span>
            }
            
            <span class="hljs-comment">// æ­¥éª¤5ï¼šè®°å½•å›è°ƒæµæ°´å·ï¼ˆæ ‡è®°ä¸ºå·²å¤„ç†ï¼‰</span>
            PaymentCallbackRecord newRecord = new <span class="hljs-built_in">PaymentCallbackRecord</span>();
            newRecord<span class="hljs-selector-class">.setThirdPartyNo</span>(thirdPartyNo);
            newRecord<span class="hljs-selector-class">.setOrderNo</span>(orderNo);
            callbackMapper<span class="hljs-selector-class">.insert</span>(newRecord);
            
            <span class="hljs-comment">// æ­¥éª¤6ï¼šè¿”å›æˆåŠŸæ ‡è¯†</span>
            return <span class="hljs-built_in">buildWechatSuccessXml</span>();
        } catch (Exception e) {
            log<span class="hljs-selector-class">.error</span>("å¾®ä¿¡æ”¯ä»˜å›è°ƒå¤„ç†å¼‚å¸¸ï¼Œè®¢å•å·ï¼š{}", orderNo, e);
            <span class="hljs-comment">// å›è°ƒå¤„ç†å¤±è´¥ï¼Œè¿”å›å¤±è´¥æ ‡è¯†ï¼Œå¾®ä¿¡ä¼šé‡è¯•ï¼ˆéœ€åšå¥½é‡è¯•æœºåˆ¶ï¼‰</span>
            return <span class="hljs-built_in">buildWechatFailXml</span>("å¤„ç†å¼‚å¸¸");
        }
    }
    
    <span class="hljs-comment">// å·¥å…·æ–¹æ³•ï¼šè§£æå¾®ä¿¡å›è°ƒXMLã€æ„å»ºè¿”å›XMLï¼ˆçœç•¥ï¼‰</span>
    private WechatCallbackDTO <span class="hljs-built_in">parseWechatCallback</span>(String xmlData) { <span class="hljs-comment">/* ... */</span> }
    private String <span class="hljs-built_in">buildWechatSuccessXml</span>() { <span class="hljs-comment">/* ... */</span> }
    private String <span class="hljs-built_in">buildWechatFailXml</span>(String msg) { <span class="hljs-comment">/* ... */</span> }
}
</code></pre>
<h5 data-id="heading-25">å…³é”®æ³¨æ„ç‚¹</h5>
<ul>
<li>å¿…é¡»ç”¨ç¬¬ä¸‰æ–¹æä¾›çš„ â€œå”¯ä¸€æµæ°´å·â€ ä½œä¸ºå¹‚ç­‰æ ‡è¯†ï¼Œè€Œéå•†æˆ·è®¢å•å·ï¼ˆé¿å…åŒä¸€è®¢å•å¤šæ¬¡æ”¯ä»˜çš„å›è°ƒå†²çªï¼‰ï¼›</li>
</ul>

<ul>
<li>å›è°ƒå¤„ç†æˆåŠŸåï¼Œæ— è®ºè®¢å•çŠ¶æ€æ˜¯å¦æ›´æ–°æˆåŠŸï¼Œéƒ½éœ€è¿”å›ç¬¬ä¸‰æ–¹ â€œæˆåŠŸâ€ æ ‡è¯†ï¼ˆå¦åˆ™ç¬¬ä¸‰æ–¹ä¼šæŒç»­é‡å¤å›è°ƒï¼‰ï¼›</li>
</ul>

<ul>
<li>å›è°ƒæ¥å£éœ€æ”¯æŒå¹‚ç­‰é‡è¯•ï¼ˆå¦‚è®¢å•ä¸å­˜åœ¨æ—¶ä»è¿”å›æˆåŠŸï¼Œé¿å…ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-26">å››ã€å®æˆ˜æ¡ˆä¾‹ï¼šç”µå•†æ”¯ä»˜å¹‚ç­‰æ€§å®Œæ•´æµç¨‹</h3>
<p>ç»“åˆä»¥ä¸Šæ–¹æ¡ˆï¼Œä»¥ç”µå•†æ”¯ä»˜ä¸ºä¾‹ï¼Œæ¢³ç†å®Œæ•´çš„å¹‚ç­‰æ€§ä¿éšœæµç¨‹ï¼š</p>
<ol>
<li><strong>ä¸‹å•é˜¶æ®µ</strong>ï¼šç”Ÿæˆå”¯ä¸€è®¢å•å·ORDER202511210001ï¼Œè®¢å•çŠ¶æ€è®¾ä¸º â€œå¾…æ”¯ä»˜â€ï¼›</li>
</ol>

<ol start="2">
<li><strong>å‰ç«¯æ”¯ä»˜å‰</strong>ï¼šè°ƒç”¨ â€œè·å– Tokenâ€ æ¥å£ï¼Œè·å– TokenTOKEN_XXXï¼›</li>
</ol>

<ol start="3">
<li><strong>æ”¯ä»˜è¯·æ±‚é˜¶æ®µ</strong>ï¼šå‰ç«¯æºå¸¦ Token + è®¢å•å·å‘èµ·æ”¯ä»˜ï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>Token æ ¡éªŒï¼ˆæ–¹æ¡ˆ 2ï¼‰â†’ è®¢å•çŠ¶æ€æ ¡éªŒï¼ˆæ–¹æ¡ˆ 3ï¼‰â†’ é˜²é‡è¡¨æ’å…¥ï¼ˆæ–¹æ¡ˆ 4ï¼‰â†’ è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜ï¼›</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>ç¬¬ä¸‰æ–¹å›è°ƒé˜¶æ®µ</strong>ï¼šå¾®ä¿¡æ”¯ä»˜å›è°ƒæºå¸¦transaction_idï¼ŒæœåŠ¡ç«¯æ‰§è¡Œï¼š</li>
</ol>
<ul>
<li>
<ul>
<li>å›è°ƒæµæ°´å·æ ¡éªŒï¼ˆæ–¹æ¡ˆ 5ï¼‰â†’ æ›´æ–°è®¢å•çŠ¶æ€â†’ è®°å½•å›è°ƒè®°å½•ï¼›</li>
</ul>
</li>
</ul>
<ol start="5">
<li><strong>é‡å¤è¯·æ±‚å¤„ç†</strong>ï¼šç”¨æˆ·é‡å¤ç‚¹å‡»æ”¯ä»˜æ—¶ï¼ŒæœåŠ¡ç«¯é€šè¿‡ Token / é˜²é‡è¡¨ / è®¢å•çŠ¶æ€ç›´æ¥è¿”å›ç»“æœï¼Œä¸é‡å¤æ‰£æ¬¾ã€‚</li>
</ol>
<h3 data-id="heading-27">äº”ã€é¿å‘æŒ‡å—ï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„ 6 ä¸ªå…³é”®æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>å¹‚ç­‰æ ‡è¯†å¿…é¡»å…¨å±€å”¯ä¸€</strong>ï¼šè®¢å•å·ã€Tokenã€ç¬¬ä¸‰æ–¹æµæ°´å·ç­‰å¹‚ç­‰æ ‡è¯†ï¼Œéœ€ä¿è¯å…¨å±€å”¯ä¸€ï¼ˆå¦‚è®¢å•å·ç”¨ â€œæ—¶é—´æˆ³ + éšæœºæ•° + ç”¨æˆ· IDâ€ ç”Ÿæˆï¼‰ï¼›</li>
</ol>

<ol start="2">
<li><strong>å¹¶å‘åœºæ™¯åŠ é”</strong>ï¼šé«˜å¹¶å‘æ”¯ä»˜æ—¶ï¼Œéœ€ç”¨åˆ†å¸ƒå¼é”ï¼ˆå¦‚ Redis é”ï¼‰é”å®šè®¢å•å·ï¼Œé¿å… â€œåŒæ—¶æ’å…¥é˜²é‡è¡¨â€ å¯¼è‡´çš„ DuplicateKeyException è¿‡å¤šï¼›</li>
</ol>

<ol start="3">
<li><strong>å¼‚å¸¸å¤„ç†éœ€è°¨æ…</strong>ï¼šæ”¯ä»˜å¤±è´¥ / ç³»ç»Ÿå¼‚å¸¸æ—¶ï¼Œéœ€é‡Šæ”¾å¹‚ç­‰æ ‡è¯†ï¼ˆå¦‚åˆ é™¤ Tokenã€é˜²é‡è¡¨è®°å½•ï¼‰ï¼Œå…è®¸ç”¨æˆ·é‡è¯•ï¼›</li>
</ol>

<ol start="4">
<li><strong>é¿å…çŠ¶æ€å›é€€</strong>ï¼šå·²æ”¯ä»˜çš„è®¢å•ä¸å…è®¸å†æ¬¡æ”¯ä»˜ï¼ˆçŠ¶æ€æœºé™åˆ¶ï¼‰ï¼Œé˜²æ­¢ â€œå·²æ”¯ä»˜è®¢å•é‡å¤æ‰£æ¬¾â€ï¼›</li>
</ol>

<ol start="5">
<li><strong>ç¬¬ä¸‰æ–¹å›è°ƒå¿…é¡»å¹‚ç­‰</strong>ï¼šç¬¬ä¸‰æ–¹å›è°ƒçš„å¹‚ç­‰æ€§ç‹¬ç«‹å¤„ç†ï¼Œä¸ä¾èµ–è®¢å•çŠ¶æ€ï¼ˆé¿å…åŒä¸€è®¢å•å¤šæ¬¡æ”¯ä»˜çš„å›è°ƒå†²çªï¼‰ï¼›</li>
</ol>

<ol start="6">
<li><strong>æ—¥å¿—ä¸ç›‘æ§</strong>ï¼šè®°å½•æ¯ç¬”æ”¯ä»˜çš„å¹‚ç­‰æ ¡éªŒç»“æœã€çŠ¶æ€å˜æ›´æ—¥å¿—ï¼Œç›‘æ§é‡å¤è¯·æ±‚æ¬¡æ•°ï¼Œå¼‚å¸¸æ—¶è§¦å‘å‘Šè­¦ï¼ˆå¦‚é‡å¤æ”¯ä»˜è¯·æ±‚çªå¢ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-28">å…­ã€æ–¹æ¡ˆé€‰å‹å»ºè®®</h3>



































<table><thead><tr><th>ä¸šåŠ¡åœºæ™¯</th><th>æ¨èæ–¹æ¡ˆç»„åˆ</th><th>æ ¸å¿ƒåŸå› </th></tr></thead><tbody><tr><td>ä¸­å°ç”µå•†ï¼ˆå•ä½“åº”ç”¨ï¼‰</td><td>å”¯ä¸€è®¢å•å·ï¼ˆæ–¹æ¡ˆ 1ï¼‰+ çŠ¶æ€æœºï¼ˆæ–¹æ¡ˆ 3ï¼‰</td><td>å®ç°ç®€å•ï¼Œæ— é¢å¤–ä¾èµ–ï¼Œæ»¡è¶³åŸºç¡€å¹‚ç­‰éœ€æ±‚</td></tr><tr><td>ç§»åŠ¨ç«¯æ”¯ä»˜ï¼ˆé˜²é‡å¤ç‚¹å‡»ï¼‰</td><td>ä»¤ç‰Œæœºåˆ¶ï¼ˆæ–¹æ¡ˆ 2ï¼‰+ å”¯ä¸€è®¢å•å·ï¼ˆæ–¹æ¡ˆ 1ï¼‰</td><td>Token é˜²æ­¢é‡å¤ç‚¹å‡»ï¼Œè®¢å•å·åŒé‡ä¿éšœ</td></tr><tr><td>åˆ†å¸ƒå¼ç”µå•†ï¼ˆå¤šæœåŠ¡ï¼‰</td><td>é˜²é‡è¡¨ï¼ˆæ–¹æ¡ˆ 4ï¼‰+ çŠ¶æ€æœºï¼ˆæ–¹æ¡ˆ 3ï¼‰</td><td>åˆ†å¸ƒå¼å¼ºä¸€è‡´æ€§ï¼Œæ”¯æŒé«˜å¹¶å‘</td></tr><tr><td>ç¬¬ä¸‰æ–¹æ”¯ä»˜å›è°ƒ</td><td>å›è°ƒæµæ°´å·æ ¡éªŒï¼ˆæ–¹æ¡ˆ 5ï¼‰</td><td>é’ˆå¯¹æ€§å¤„ç†ç¬¬ä¸‰æ–¹é‡å¤é€šçŸ¥</td></tr><tr><td>ç§’æ€æ”¯ä»˜ï¼ˆé«˜å¹¶å‘ï¼‰</td><td>é˜²é‡è¡¨ï¼ˆæ–¹æ¡ˆ 4ï¼‰+ Redis åˆ†å¸ƒå¼é”</td><td>å…¼é¡¾é«˜å¹¶å‘ä¸å¼ºä¸€è‡´æ€§</td></tr></tbody></table>
<h3 data-id="heading-29">æ€»ç»“ï¼šæ”¯ä»˜å¹‚ç­‰æ€§çš„æ ¸å¿ƒé€»è¾‘</h3>
<p>æ”¯ä»˜å¹‚ç­‰æ€§çš„æœ¬è´¨æ˜¯ â€œ<strong>ç”¨å”¯ä¸€æ ‡è¯†é”å®šæ“ä½œï¼Œç”¨çŠ¶æ€æ ¡éªŒæ§åˆ¶æµç¨‹</strong>â€â€”â€” æ— è®ºé‡å¤è¯·æ±‚æ¥è‡ªç”¨æˆ·ã€ç½‘ç»œè¿˜æ˜¯ç³»ç»Ÿï¼Œåªè¦é€šè¿‡ â€œå”¯ä¸€æ ‡è¯†åˆ¤æ–­æ˜¯å¦å·²å¤„ç†â€ï¼Œå°±èƒ½ä¿è¯ç»“æœä¸€è‡´ã€‚</p>
<p>è®¾è®¡æ—¶éœ€éµå¾ª â€œ<strong>ç®€å•ä¼˜å…ˆï¼Œå…¼é¡¾åœºæ™¯</strong>â€ï¼š</p>
<ul>
<li>ä¸­å°å›¢é˜Ÿ / å•ä½“åº”ç”¨ï¼šä¼˜å…ˆç”¨ â€œå”¯ä¸€è®¢å•å· + çŠ¶æ€æœºâ€ï¼Œä½æˆæœ¬è½åœ°ï¼›</li>
</ul>

<ul>
<li>åˆ†å¸ƒå¼ / é«˜å¹¶å‘åœºæ™¯ï¼šå åŠ  â€œé˜²é‡è¡¨ + åˆ†å¸ƒå¼é”â€ï¼Œä¿è¯å¼ºä¸€è‡´æ€§ï¼›</li>
</ul>

<ul>
<li>ç¬¬ä¸‰æ–¹å›è°ƒï¼šå•ç‹¬ç”¨ â€œç¬¬ä¸‰æ–¹æµæ°´å·â€ åšå¹‚ç­‰ï¼Œé¿å…é‡å¤é€šçŸ¥ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œæ”¯ä»˜å¹‚ç­‰æ€§æ˜¯èµ„é‡‘å®‰å…¨çš„åº•çº¿ï¼Œæ²¡æœ‰ â€œæœ€ä¼˜æ–¹æ¡ˆâ€ï¼Œåªæœ‰ â€œæœ€é€‚åˆä¸šåŠ¡åœºæ™¯çš„æ–¹æ¡ˆâ€â€”â€” ç»“åˆè‡ªèº«ä¸šåŠ¡è§„æ¨¡ã€æŠ€æœ¯æ¶æ„é€‰æ‹©ç»„åˆæ–¹æ¡ˆï¼ŒåŒæ—¶åšå¥½ç›‘æ§ä¸æ—¥å¿—ï¼Œæ‰èƒ½æœç»é‡å¤æ‰£æ¬¾ï¼Œä¿éšœç”¨æˆ·ä¸å¹³å°çš„èµ„é‡‘å®‰å…¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576556950331867136</link>    <guid>https://juejin.cn/post/7576556950331867136</guid>    <pubDate>2025-11-26T03:16:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576556950331867136" data-draft-id="7576559408659103796" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2025-11-26T03:16:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢å"/> <meta itemprop="url" content="https://juejin.cn/user/1292681403434270"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterä¹‹é˜¿é‡Œäº‘è§†é¢‘æ’­æ”¾å™¨æ”¯æŒ iOSæ¨¡æ‹Ÿå™¨è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1292681403434270/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-26T03:16:30.000Z" title="Wed Nov 26 2025 03:16:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-26
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    14
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é—®é¢˜æè¿°</h2>
<p>é¡¹ç›®ä¸­è¦åšè§†é¢‘æ’­æ”¾ï¼Œæ¥å…¥é˜¿é‡Œäº‘çš„ <code>flutter_aliplayer</code>åæ¨¡æ‹Ÿå™¨è·‘ä¸èµ·æ¥</p>
<pre><code class="hljs language-bash" lang="bash">Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilter</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterConfig</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPFilterOptions</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AVPPreloadTask</span>

Error (Xcode): Undefined symbol: _OBJC_CLASS_<span class="hljs-variable">$_AliMediaLoaderV2</span>

</code></pre>
<h3 data-id="heading-1">é—®é¢˜åŸå› </h3>
<p>AliPlayer SDK çš„ <code>AliyunPlayer.framework</code> åœ¨ iOS æ¨¡æ‹Ÿå™¨æ¶æ„ï¼ˆx86_64/arm64-simulatorï¼‰ä¸­ç¼ºå°‘ä»¥ä¸‹ç¬¦å·çš„å®ç°ï¼š</p>
<ul>
<li>
<p><code>AVPFilter</code>ã€<code>AVPFilterConfig</code>ã€<code>AVPFilterOptions</code> - è§†é¢‘æ»¤é•œç›¸å…³ç±»</p>
</li>
<li>
<p><code>AVPPreloadTask</code>ã€<code>AliMediaLoaderV2</code> - é¢„åŠ è½½åŠŸèƒ½ç›¸å…³ç±»</p>
</li>
</ul>
<p>è¿™äº›ç¬¦å·åœ¨çœŸæœºæ¶æ„ï¼ˆarm64ï¼‰ä¸­å­˜åœ¨ï¼Œä½†åœ¨æ¨¡æ‹Ÿå™¨æ¶æ„ä¸­ç¼ºå¤±ï¼Œå¯¼è‡´é“¾æ¥å¤±è´¥ã€‚</p>
<h2 data-id="heading-2">è§£å†³æ–¹æ¡ˆ</h2>
<p>é€šè¿‡åœ¨ <code>flutter_aliplayer</code> æ’ä»¶ä¸­æ·»åŠ æ¡ä»¶ç¼–è¯‘ï¼Œåœ¨æ¨¡æ‹Ÿå™¨ä¸Šä½¿ç”¨å­˜æ ¹å®ç°ï¼Œåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´å®ç°ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒæ€è·¯</h3>
<ol>
<li>
<p><strong><strong>æ¡ä»¶ç¼–è¯‘</strong></strong>ï¼šä½¿ç”¨ <code>#if TARGET_OS_SIMULATOR</code> åŒºåˆ†æ¨¡æ‹Ÿå™¨å’ŒçœŸæœº</p>
</li>
<li>
<p><strong><strong>å­˜æ ¹å®ç°</strong></strong>ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸Šæä¾›æœ€å°åŒ–å®ç°ï¼Œè¿”å›æ˜ç¡®çš„é”™è¯¯æç¤º</p>
</li>
<li>
<p><strong><strong>å®Œæ•´å®ç°</strong></strong>ï¼šåœ¨çœŸæœºä¸Šä½¿ç”¨å®Œæ•´çš„ AliPlayer SDK åŠŸèƒ½</p>
</li>
<li>
<p><strong><strong>ä¾èµ–ç®¡ç†</strong></strong>ï¼šé€šè¿‡ <code>dependency_overrides</code> ä½¿ç”¨ä¿®æ”¹åçš„æœ¬åœ°ç‰ˆæœ¬</p>
</li>
</ol>
<h2 data-id="heading-4">å®ç°ç»†èŠ‚</h2>
<h3 data-id="heading-5">1. ä¿®æ”¹ <code>FlutterAliMediaLoaderV2.m</code></h3>
<p>ä¸ºé¢„åŠ è½½ v2 åŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨å­˜æ ¹ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
#import "FlutterAliMediaLoaderV2.h"

#import &lt;TargetConditionals.h&gt;

#if TARGET_OS_SIMULATOR
// æ¨¡æ‹Ÿå™¨ç‰ˆæœ¬ï¼šè¿”å›é”™è¯¯ï¼Œä¸è°ƒç”¨ä»»ä½• AliPlayer API

- (void)handleMethodCall:(FlutterMethodCall*)call result:(FlutterResult)result {

Â  Â  result([FlutterError errorWithCode:@"AliPlayerPreloadV2Unavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"AliPlayer preload v2 is not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

}

  


#else

// çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

// ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

</code></pre>
<h3 data-id="heading-6">2. ä¿®æ”¹ AliPlayerFactory.m</h3>
<p>ä¸ºæ»¤é•œåŠŸèƒ½æ·»åŠ æ¨¡æ‹Ÿå™¨ä¿æŠ¤ï¼š</p>
<pre><code class="hljs language-objective-c" lang="objective-c">
- (void)setFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°æ»¤é•œåŠŸèƒ½

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

  


- (void)updateFilterConfig:(NSArray *)arr {

Â  Â  FlutterResult result = arr[1];

#if TARGET_OS_SIMULATOR

Â  Â  result([FlutterError errorWithCode:@"AliPlayerFilterUnavailable"

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  message:@"Video filter effects are not available on the iOS Simulator."

Â Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  details:nil]);

Â  Â  return;

#else

Â  Â  // çœŸæœºç‰ˆæœ¬ï¼šæ­£å¸¸å®ç°

Â  Â  // ... åŸæœ‰å®Œæ•´å®ç° ...

#endif

}

</code></pre>
<p>ä¿®æ”¹å®Œæ¯•åï¼Œå°±å¯ä»¥æ„‰å¿«çš„ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘å•¦ã€‚ä¸ªäººå¼€å‘ç›´æ¥æ”¾åœ¨æœ¬åœ°ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨å¼€å‘çš„æ—¶å€™å¼•ç”¨æœ¬åœ°<code>flutter_aliplayer</code>åŒ…ï¼ŒçœŸæœºä¸Šçº¿æ—¶ä½¿ç”¨é˜¿é‡Œäº‘çš„æ­£å¼åŒ…ã€‚å›¢é˜Ÿå¼€å‘æ—¶æœ€å¥½æŠŠä¿®æ”¹åçš„ä»£ç ä¸Šä¼ åˆ°è‡ªå·±å…¬å¸çš„git,ç„¶åé…ç½®æ‰“åŒ…è„šæœ¬ã€‚</p>
<h2 data-id="heading-7">é¡¹ç›®é…ç½®</h2>
<h3 data-id="heading-8">1. ä½¿ç”¨ Git ä»“åº“ç‰ˆæœ¬</h3>
<p>åœ¨ <code>pubspec.yaml</code> ä¸­é…ç½® <code>dependency_overrides</code>ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml">
<span class="hljs-attr">dependency_overrides:</span>

Â  <span class="hljs-attr">flutter_aliplayer:</span>

Â  Â  <span class="hljs-attr">git:</span>

Â  Â  Â  <span class="hljs-attr">url:</span> <span class="hljs-string">è‡ªå·±çš„.git</span>

</code></pre>
<h3 data-id="heading-9">2. æ„å»ºè„šæœ¬è‡ªåŠ¨åˆ‡æ¢</h3>
<p><code>build.sh</code> è„šæœ¬ä¼šåœ¨ä¸åŒåœºæ™¯è‡ªåŠ¨åˆ‡æ¢ä¾èµ–æºï¼š</p>
<ul>
<li>
<p>æ³¨é‡Šæ‰ git é…ç½®ï¼Œä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬</p>
</li>
<li>
<p>å–æ¶ˆæ³¨é‡Š git é…ç½®ï¼Œä½¿ç”¨åŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤çš„ç‰ˆæœ¬</p>
</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ³¨é‡Šæ‰ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ pub.dev ç‰ˆæœ¬</span>

comment_flutter_aliplayer_override

  


<span class="hljs-comment"># æ¢å¤ flutter_aliplayer git é…ç½®ï¼Œä½¿ç”¨ git ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</span>

uncomment_flutter_aliplayer_override

</code></pre>
<h3 data-id="heading-10">æ¨¡æ‹Ÿå™¨ä¸Šçš„é™åˆ¶</h3>
<p>åœ¨ iOS æ¨¡æ‹Ÿå™¨ä¸Šï¼Œè§†é¢‘æ’­æ”¾çš„åŠŸèƒ½ä¸å¯ç”¨ï¼Œä¿®æ”¹åªæ˜¯ä¸ºäº†å¼€å‘ä¸­æ–¹ä¾¿ä½¿ç”¨iOSæ¨¡æ‹Ÿå™¨ã€‚</p>
<h3 data-id="heading-11">ç¬¦å·æ£€æŸ¥</h3>
<p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ¡†æ¶ä¸­çš„ç¬¦å·ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># æ£€æŸ¥æ‰€æœ‰æ¶æ„</span>

lipo -info ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer

<span class="hljs-comment"># æ£€æŸ¥ x86_64 æ¶æ„ä¸­çš„ç¬¦å·</span>

lipo ios/Pods/AliPlayerSDK_iOS/AliyunPlayer.framework/AliyunPlayer -thin x86_64 -output /tmp/AliyunPlayer_x86_64

nm -gU /tmp/AliyunPlayer_x86_64 | grep AVPFilter

</code></pre>
<h3 data-id="heading-12">ä¾èµ–ç®¡ç†</h3>
<ul>
<li>
<p><strong><strong>å¼€å‘ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ git ä»“åº“ç‰ˆæœ¬ï¼ˆåŒ…å«æ¨¡æ‹Ÿå™¨ä¿®å¤ï¼‰</p>
</li>
<li>
<p><strong><strong>ç”Ÿäº§ç¯å¢ƒ</strong></strong>ï¼šä½¿ç”¨ pub.dev åŸå§‹ç‰ˆæœ¬ï¼ˆé¿å…æœ¬åœ°ä¿®æ”¹å½±å“ç”Ÿäº§æ„å»ºï¼‰</p>
</li>
</ul>
<h2 data-id="heading-13">æœªæ¥æ”¹è¿›</h2>
<p>å¦‚æœå“ªå¤©<code>AliPlayer SDK</code>å®˜æ–¹æä¾›äº†åŒ…å«å®Œæ•´æ¨¡æ‹Ÿå™¨æ”¯æŒçš„ç‰ˆæœ¬ï¼Œé‚£æœ€å¥½ä¸è¿‡ã€‚</p>
<h2 data-id="heading-14">ç›¸å…³æ–‡ä»¶</h2>
<ul>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/FlutterAliMediaLoaderV2.m</code> - é¢„åŠ è½½ v2 å®ç°</p>
</li>
<li>
<p><code>plugins/flutter_aliplayer/ios/Classes/AliPlayerFactory.m</code> - æ’­æ”¾å™¨å·¥å‚å®ç°</p>
</li>
<li>
<p><code>pubspec.yaml</code> - ä¾èµ–é…ç½®</p>
</li>
<li>
<p><code>build.sh</code> - æ„å»ºè„šæœ¬</p>
</li>
</ul>
<h2 data-id="heading-15">å‚è€ƒèµ„æ–™</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fvod%2Fdeveloper-reference" target="_blank" title="https://help.aliyun.com/zh/vod/developer-reference" ref="nofollow noopener noreferrer">AliPlayer SDK å®˜æ–¹æ–‡æ¡£</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.flutter.dev%2Fdevelopment%2Fplatform-integration%2Fplatform-channels" target="_blank" title="https://docs.flutter.dev/development/platform-integration/platform-channels" ref="nofollow noopener noreferrer">Flutter iOS å¹³å°ç‰¹å®šä»£ç </a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Farchive%2Fdocumentation%2FDeveloperTools%2FConceptual%2Fcross_development%2FUsing%2Fusing.html" target="_blank" title="https://developer.apple.com/library/archive/documentation/DeveloperTools/Conceptual/cross_development/Using/using.html" ref="nofollow noopener noreferrer">Objective-C æ¡ä»¶ç¼–è¯‘</a></p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°]]></title>    <link>https://juejin.cn/post/7577228831137660971</link>    <guid>https://juejin.cn/post/7577228831137660971</guid>    <pubDate>2025-11-27T10:55:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577228831137660971" data-draft-id="7577215663968124970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T10:55:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ç±»å‹è½¬æ¢çš„éšè”½é™·é˜±ï¼šå½“size_té‡è§è´Ÿæ•°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:55:19.000Z" title="Thu Nov 27 2025 10:55:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9d90ed9aea7445f7b7e461d158f6fb1d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56CB5LqL5ryr6LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764845718&amp;x-signature=WWe2r7BZJwc6tTMGSMR7AIoYtZE%3D" alt="4c1920f98b528d631ce91ff20a708bd6.png" loading="lazy"/></p>
<p>åœ¨C++å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å„ç§ç±»å‹è½¬æ¢çš„é—®é¢˜ï¼Œä½†æœ‰ä¸€ç§æƒ…å†µç‰¹åˆ«å®¹æ˜“å¯¼è‡´éš¾ä»¥å‘ç°çš„bugâ€”â€”é‚£å°±æ˜¯æ— ç¬¦å·ç±»å‹ä¸æœ‰ç¬¦å·ç±»å‹çš„æ··åˆè¿ç®—ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥æ·±å…¥æ¢è®¨è¿™ä¸ªçœ‹ä¼¼ç®€å•å´æš—è—ç„æœºçš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ä¸ªçœ‹ä¼¼æ— å®³çš„å¾ªç¯</h2>
<p>è€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼Œå®ƒçœ‹èµ·æ¥å®Œå…¨æ­£ç¡®ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">processPair</span><span class="hljs-params">(<span class="hljs-type">int</span> a, <span class="hljs-type">int</span> b)</span> </span>{
    std::cout &lt;&lt; <span class="hljs-string">"Processing: "</span> &lt;&lt; a &lt;&lt; <span class="hljs-string">" and "</span> &lt;&lt; b &lt;&lt; std::endl;
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    std::vector&lt;<span class="hljs-type">int</span>&gt; data = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    
    <span class="hljs-comment">// å¤„ç†ç›¸é‚»å…ƒç´ å¯¹</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
        <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å½“å‘é‡ä¸­æœ‰æ•°æ®æ—¶ï¼Œè¿™æ®µä»£ç è¿è¡Œå¾—å¾ˆå¥½ã€‚å®ƒä¼šè¾“å‡ºï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">Processing: 1 and 2</span>
<span class="hljs-section">Processing: 2 and 3</span>
<span class="hljs-section">Processing: 3 and 4</span>
<span class="hljs-section">Processing: 4 and 5</span>
</code></pre>
<p>ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬é¢å¯¹ä¸€ä¸ªç©ºå‘é‡æ—¶ï¼Œé—®é¢˜å°±å‡ºç°äº†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::vector&lt;<span class="hljs-type">int</span>&gt; empty_vec;  <span class="hljs-comment">// ç©ºå‘é‡</span>

<span class="hljs-comment">// åŒæ ·çš„ä»£ç ï¼Œä¸åŒçš„ç»“æœ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; empty_vec.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
    <span class="hljs-built_in">processPair</span>(empty_vec[i], empty_vec[i + <span class="hljs-number">1</span>]);
}
</code></pre>
<p><strong>æ€è€ƒä¸€ä¸‹ï¼šä½ æœŸæœ›è¿™ä¸ªå¾ªç¯æ‰§è¡Œå¤šå°‘æ¬¡ï¼Ÿ</strong></p>
<h2 data-id="heading-1">é—®é¢˜çš„æ ¹æºï¼šéšå¼ç±»å‹è½¬æ¢</h2>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ·±å…¥äº†è§£C++çš„ç±»å‹è½¬æ¢è§„åˆ™ã€‚</p>
<h3 data-id="heading-2">å¸¸ç”¨ç®—æœ¯è½¬æ¢ï¼ˆUsual Arithmetic Conversionsï¼‰</h3>
<p>åœ¨C++ä¸­ï¼Œå½“äºŒå…ƒæ“ä½œç¬¦ä¸¤è¾¹çš„æ“ä½œæ•°ç±»å‹ä¸åŒæ—¶ï¼Œç¼–è¯‘å™¨ä¼šæ‰§è¡Œ<strong>å¸¸ç”¨ç®—æœ¯è½¬æ¢</strong>ã€‚å…¶ä¸­ä¸€ä¸ªå…³é”®è§„åˆ™æ˜¯ï¼š</p>
<p><strong>å½“æœ‰ç¬¦å·ç±»å‹ä¸æ— ç¬¦å·ç±»å‹è¿›è¡Œè¿ç®—æ—¶ï¼Œæœ‰ç¬¦å·ç±»å‹ä¼šè¢«æå‡ä¸ºæ— ç¬¦å·ç±»å‹ã€‚</strong></p>
<p>è®©æˆ‘ä»¬åˆ†è§£é‚£ä¸ªé—®é¢˜è¡¨è¾¾å¼ï¼š<code>empty_vec.size() - 1</code></p>
<ol>
<li><code>empty_vec.size()</code> è¿”å› <code>size_t</code> ç±»å‹ï¼ˆæ— ç¬¦å·æ•´å‹ï¼‰</li>
<li><code>1</code> æ˜¯ <code>int</code> ç±»å‹ï¼ˆæœ‰ç¬¦å·æ•´å‹ï¼‰</li>
<li>æ ¹æ®è§„åˆ™ï¼Œ<code>1</code> è¢«è½¬æ¢ä¸º <code>size_t</code> ç±»å‹</li>
<li>è¡¨è¾¾å¼å˜ä¸ºï¼š<code>size_t_value - size_t(1)</code></li>
</ol>
<h3 data-id="heading-3">æ— ç¬¦å·æ•´æ•°çš„ä¸‹æº¢è¡Œä¸º</h3>
<p>å½“å®¹å™¨ä¸ºç©ºæ—¶ï¼š</p>
<ul>
<li><code>empty_vec.size()</code> = 0</li>
<li><code>size_t(0) - size_t(1)</code> å‘ç”Ÿä¸‹æº¢</li>
</ul>
<p>ç”±äº<code>size_t</code>æ˜¯æ— ç¬¦å·ç±»å‹ï¼Œå®ƒéµå¾ªæ¨¡ç®—æœ¯è§„åˆ™ï¼š</p>
<ul>
<li>ä¸‹æº¢ä¸ä¼šäº§ç”Ÿè´Ÿæ•°ï¼Œè€Œæ˜¯å›ç»•åˆ°è¯¥ç±»å‹çš„æœ€å¤§å€¼</li>
<li>åœ¨64ä½ç³»ç»Ÿä¸Šï¼Œ<code>0 - 1</code> å˜æˆäº† <code>18446744073709551615</code></li>
</ul>
<p>äºæ˜¯æˆ‘ä»¬çš„å¾ªç¯æ¡ä»¶å˜æˆäº†ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">18446744073709551615</span>; i++)
</code></pre>
<p>è¿™å°±å¯¼è‡´äº†ä¸€ä¸ªå‡ ä¹æ— é™å¾ªç¯ï¼</p>
<h2 data-id="heading-4">ä¸ºä»€ä¹ˆè¿™ä¸ªé—®é¢˜å¦‚æ­¤å±é™©ï¼Ÿ</h2>
<h3 data-id="heading-5">1. éšè”½æ€§æé«˜</h3>
<p>è¿™ç§bugåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½ä¸ä¼šå‡ºç°ï¼š</p>
<ul>
<li>åœ¨æµ‹è¯•ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¾ˆå°‘æµ‹è¯•ç©ºå®¹å™¨çš„æƒ…å†µ</li>
<li>åœ¨ä»£ç å®¡æŸ¥æ—¶ï¼Œè¿™æ ·çš„å¾ªç¯çœ‹èµ·æ¥å®Œå…¨æ­£å¸¸</li>
<li>åœ¨æœ‰æ•°æ®çš„æ­£å¸¸æƒ…å†µä¸‹ï¼Œä»£ç è¿è¡Œå®Œç¾</li>
</ul>
<h3 data-id="heading-6">2. åæœä¸¥é‡</h3>
<p>å½“é—®é¢˜çœŸçš„å‘ç”Ÿæ—¶ï¼š</p>
<ul>
<li>ç¨‹åºé™·å…¥æ­»å¾ªç¯ï¼Œæ¶ˆè€—å¤§é‡CPUèµ„æº</li>
<li>å¯èƒ½å¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨</li>
<li>åœ¨åµŒå…¥å¼æˆ–èµ„æºå—é™ç¯å¢ƒä¸­å¯èƒ½é€ æˆç³»ç»Ÿå´©æºƒ</li>
</ul>
<h3 data-id="heading-7">3. è°ƒè¯•å›°éš¾</h3>
<p>ç”±äºé—®é¢˜åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹å‡ºç°ï¼š</p>
<ul>
<li>éš¾ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­å¤ç°</li>
<li>æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶å¯èƒ½éå¸¸å¤§ï¼ˆå› ä¸ºå¾ªç¯æ¬¡æ•°æå¤šï¼‰</li>
<li>æ—¥å¿—è¾“å‡ºå¯èƒ½æ·¹æ²¡ç³»ç»Ÿ</li>
</ul>
<h2 data-id="heading-8">è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">æ–¹æ¡ˆ1ï¼šæ˜¾å¼æ£€æŸ¥è¾¹ç•Œ</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ˜ç¡®æ£€æŸ¥å®¹å™¨å¤§å°</span>
<span class="hljs-keyword">if</span> (!data.<span class="hljs-built_in">empty</span>() &amp;&amp; data.<span class="hljs-built_in">size</span>() &gt; <span class="hljs-number">1</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {
        <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
    }
}
</code></pre>
<p>è¿™æ˜¯æœ€å®‰å…¨çš„åšæ³•ï¼Œæ˜ç¡®è¡¨è¾¾äº†æˆ‘ä»¬çš„æ„å›¾ã€‚</p>
<h3 data-id="heading-10">æ–¹æ¡ˆ2ï¼šè°ƒæ•´å¾ªç¯æ¡ä»¶</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// é¿å…å‡æ³•æ“ä½œ</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i + <span class="hljs-number">1</span> &lt; data.<span class="hljs-built_in">size</span>(); i++) {
    <span class="hljs-built_in">processPair</span>(data[i], data[i + <span class="hljs-number">1</span>]);
}
</code></pre>
<p>è¿™ç§æ–¹æ³•é€šè¿‡è°ƒæ•´æ¯”è¾ƒé€»è¾‘æ¥é¿å…å‡æ³•æ“ä½œã€‚</p>
<h3 data-id="heading-11">æ–¹æ¡ˆ3ï¼šä½¿ç”¨è¿­ä»£å™¨</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨æ ‡å‡†åº“è¿­ä»£å™¨</span>
<span class="hljs-keyword">if</span> (data.<span class="hljs-built_in">size</span>() &gt;= <span class="hljs-number">2</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">auto</span> it = data.<span class="hljs-built_in">begin</span>(); it != std::<span class="hljs-built_in">prev</span>(data.<span class="hljs-built_in">end</span>()); ++it) {
        <span class="hljs-built_in">processPair</span>(*it, *(std::<span class="hljs-built_in">next</span>(it)));
    }
}
</code></pre>
<p>è¿­ä»£å™¨æ–¹å¼æ›´ç¬¦åˆC++çš„æƒ¯ç”¨æ³•ã€‚</p>
<h3 data-id="heading-12">æ–¹æ¡ˆ4ï¼šä½¿ç”¨æ ‡å‡†åº“ç®—æ³•</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨æ ‡å‡†åº“ç®—æ³•ï¼ˆå¦‚æœé€‚ç”¨ï¼‰</span>
std::<span class="hljs-built_in">adjacent_difference</span>(data.<span class="hljs-built_in">begin</span>(), data.<span class="hljs-built_in">end</span>(), 
                        std::<span class="hljs-built_in">ostream_iterator</span>&lt;<span class="hljs-type">int</span>&gt;(std::cout, <span class="hljs-string">" "</span>));
</code></pre>
<p>å¯¹äºæŸäº›åœºæ™¯ï¼Œæ ‡å‡†åº“å·²ç»æä¾›äº†ç°æˆçš„ç®—æ³•ã€‚</p>
<h2 data-id="heading-13">é˜²å¾¡æ€§ç¼–ç¨‹çš„æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-14">1. ä¿æŒç±»å‹ä¸€è‡´æ€§</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¥½ï¼šä½¿ç”¨ä¸€è‡´çš„size_tç±»å‹</span>
<span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-built_in">size</span>(); i++)

<span class="hljs-comment">// æ›´å¥½ï¼šå¦‚æœéœ€è¦å‡æ³•ï¼Œç¡®ä¿ç±»å‹ä¸€è‡´</span>
<span class="hljs-type">size_t</span> size = data.<span class="hljs-built_in">size</span>();
<span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-type">size_t</span> i = <span class="hljs-number">0</span>; i &lt; size - <span class="hljs-number">1</span>; i++)
}
</code></pre>
<h3 data-id="heading-15">2. å¯ç”¨ç¼–è¯‘å™¨è­¦å‘Š</h3>
<p>ç°ä»£ç¼–è¯‘å™¨å¯ä»¥æ£€æµ‹åˆ°å¾ˆå¤šç±»å‹è½¬æ¢é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">g++ -Wall -Wextra -Wsign-conversion -Wsign-compare program.cpp
</code></pre>
<p>å…³é”®è­¦å‘Šé€‰é¡¹ï¼š</p>
<ul>
<li><code>-Wsign-conversion</code>ï¼šè­¦å‘Šæœ‰ç¬¦å·/æ— ç¬¦å·è½¬æ¢</li>
<li><code>-Wsign-compare</code>ï¼šè­¦å‘Šæœ‰ç¬¦å·/æ— ç¬¦å·æ¯”è¾ƒ</li>
<li><code>-Wconversion</code>ï¼šè­¦å‘Šå¯èƒ½æ”¹å˜å€¼çš„éšå¼è½¬æ¢</li>
</ul>
<h3 data-id="heading-16">3. ä½¿ç”¨é™æ€åˆ†æå·¥å…·</h3>
<p>å·¥å…·å¦‚Clang-Tidyã€CPPCheckç­‰å¯ä»¥å¸®åŠ©å‘ç°è¿™ç±»é—®é¢˜ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clang-tidy -checks=<span class="hljs-string">'*'</span> program.cpp -- -std=c++17
</code></pre>
<h3 data-id="heading-17">4. å…¨é¢çš„è¾¹ç•Œæµ‹è¯•</h3>
<p>ç¡®ä¿æµ‹è¯•ç”¨ä¾‹è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-built_in">TEST</span>(ContainerTest, EmptyVector) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; empty_vec;
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(empty_vec));
}

<span class="hljs-built_in">TEST</span>(ContainerTest, SingleElement) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; single_vec{<span class="hljs-number">42</span>};
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(single_vec));
}

<span class="hljs-built_in">TEST</span>(ContainerTest, NormalCase) {
    std::vector&lt;<span class="hljs-type">int</span>&gt; normal_vec{<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    <span class="hljs-built_in">EXPECT_NO_THROW</span>(<span class="hljs-built_in">processContainer</span>(normal_vec));
}
</code></pre>
<h2 data-id="heading-18">æ›´å¹¿æ³›çš„é€‚ç”¨åœºæ™¯</h2>
<p>è¿™ä¸ªé—®é¢˜ä¸ä»…å‡ºç°åœ¨<code>std::vector</code>ä¸­ï¼Œè¿˜å‡ºç°åœ¨æ‰€æœ‰è¿”å›<code>size_t</code>çš„å®¹å™¨ä¸­ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">std::string str;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; str.<span class="hljs-built_in">length</span>() - <span class="hljs-number">1</span>; i++) {}  <span class="hljs-comment">// åŒæ ·çš„é—®é¢˜ï¼</span>

std::array&lt;<span class="hljs-type">int</span>, 5&gt; arr;
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.<span class="hljs-built_in">size</span>() - <span class="hljs-number">1</span>; i++) {}    <span class="hljs-comment">// è¿™é‡Œä¹Ÿæ˜¯ï¼</span>

<span class="hljs-comment">// ç”šè‡³è‡ªå®šä¹‰å®¹å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyContainer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{ <span class="hljs-keyword">return</span> data_size; }
    <span class="hljs-comment">// ...</span>
};
</code></pre>
<h2 data-id="heading-19">æ€»ç»“</h2>
<p>C++çš„ç±»å‹ç³»ç»Ÿè™½ç„¶å¼ºå¤§ï¼Œä½†ä¹Ÿå……æ»¡äº†é™·é˜±ã€‚æ— ç¬¦å·ç±»å‹ä¸æœ‰ç¬¦å·ç±»å‹çš„æ··åˆè¿ç®—å°±æ˜¯å…¶ä¸­ä¸€ä¸ªå…¸å‹çš„"å‘"ã€‚é€šè¿‡ç†è§£èƒŒåçš„è½¬æ¢è§„åˆ™ï¼Œå¹¶é‡‡ç”¨é˜²å¾¡æ€§ç¼–ç¨‹ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥é¿å…è¿™ç±»éšè”½çš„bugã€‚</p>
<p><strong>å…³é”®è¦ç‚¹ï¼š</strong></p>
<ul>
<li>è­¦æƒ•æ— ç¬¦å·ç±»å‹çš„å‡æ³•æ“ä½œ</li>
<li>ä¿æŒè¿ç®—ä¸­çš„ç±»å‹ä¸€è‡´æ€§</li>
<li>å¯ç”¨ç¼–è¯‘å™¨è­¦å‘Šå¹¶ä½¿ç”¨é™æ€åˆ†æå·¥å…·</li>
<li>å…¨é¢æµ‹è¯•è¾¹ç•Œæƒ…å†µ</li>
<li>ä¼˜å…ˆä½¿ç”¨æ ‡å‡†åº“ç®—æ³•å’Œè¿­ä»£å™¨</li>
</ul>
<p>è®°ä½ï¼šåœ¨C++ç¼–ç¨‹ä¸­ï¼Œæœ€å±é™©çš„bugå¾€å¾€è—åœ¨æœ€"æ˜æ˜¾"çš„ä»£ç é‡Œã€‚å¤šä¸€ä»½è°¨æ…ï¼Œå°‘ä¸€ä»½è°ƒè¯•çš„ç…ç†¬ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£]]></title>    <link>https://juejin.cn/post/7577204540417982527</link>    <guid>https://juejin.cn/post/7577204540417982527</guid>    <pubDate>2025-11-27T10:57:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417982527" data-draft-id="7577220965437751350" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T10:57:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C++ä¸­ä¸åŒç±»å‹çš„é»˜è®¤è½¬æ¢è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T10:57:40.000Z" title="Thu Nov 27 2025 10:57:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸ç†Ÿæ‚‰é»˜è®¤ç±»å‹è½¬æ¢ï¼ŒçœŸçš„å¾ˆå®¹æ˜“å†™å‡ºbugï¼ï¼ï¼</p>
</blockquote>
<p>åœ¨C++ä¸­ï¼Œç±»å‹è½¬æ¢æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µã€‚ä¸‹é¢è¯¦ç»†è®²è§£C++ä¸­å„ç§é»˜è®¤ç±»å‹è½¬æ¢çš„è§„åˆ™å’Œæœºåˆ¶ã€‚</p>
<h2 data-id="heading-0">1. ç®—æœ¯ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-1">æ•´å‹æå‡ (Integral Promotion)</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">char</span> c = <span class="hljs-string">'A'</span>;
<span class="hljs-type">short</span> s = <span class="hljs-number">100</span>;
<span class="hljs-type">int</span> i = c + s;  <span class="hljs-comment">// charå’Œshortéƒ½æå‡ä¸ºint</span>
</code></pre>
<h3 data-id="heading-2">ç®—æœ¯è½¬æ¢è§„åˆ™</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// è½¬æ¢ä¼˜å…ˆçº§ï¼šlong double &gt; double &gt; float &gt; unsigned long long &gt; long long &gt; </span>
<span class="hljs-comment">// unsigned long &gt; long &gt; unsigned int &gt; int</span>

<span class="hljs-type">int</span> i = <span class="hljs-number">10</span>;
<span class="hljs-type">double</span> d = <span class="hljs-number">3.14</span>;
<span class="hljs-type">double</span> result = i + d;  <span class="hljs-comment">// intè½¬æ¢ä¸ºdouble</span>

<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> u = <span class="hljs-number">100</span>;
<span class="hljs-type">int</span> j = <span class="hljs-number">-50</span>;
<span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> result2 = u + j;  <span class="hljs-comment">// intè½¬æ¢ä¸ºunsigned int</span>
</code></pre>
<h2 data-id="heading-3">2. æŒ‡é’ˆç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-4">éšå¼æŒ‡é’ˆè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// æ´¾ç”Ÿç±»æŒ‡é’ˆåˆ°åŸºç±»æŒ‡é’ˆ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {};

Derived d;
Base* bp = &amp;d;  <span class="hljs-comment">// éšå¼å‘ä¸Šè½¬æ¢</span>

<span class="hljs-comment">// æ•°ç»„åˆ°æŒ‡é’ˆé€€åŒ–</span>
<span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>];
<span class="hljs-type">int</span>* ptr = arr;  <span class="hljs-comment">// æ•°ç»„é€€åŒ–ä¸ºæŒ‡é’ˆ</span>

<span class="hljs-comment">// 0æˆ–nullptråˆ°æŒ‡é’ˆ</span>
<span class="hljs-type">int</span>* p1 = <span class="hljs-number">0</span>;
<span class="hljs-type">int</span>* p2 = <span class="hljs-literal">nullptr</span>;

<span class="hljs-comment">// ä»»æ„æŒ‡é’ˆåˆ°void*</span>
<span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;
<span class="hljs-type">void</span>* vp = &amp;x;
</code></pre>
<h2 data-id="heading-5">3. å¼•ç”¨ç±»å‹è½¬æ¢</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">virtual</span> <span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> </span>{ cout &lt;&lt; <span class="hljs-string">"Base"</span> &lt;&lt; endl; }
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> : <span class="hljs-keyword">public</span> Base {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">show</span><span class="hljs-params">()</span> <span class="hljs-keyword">override</span> </span>{ cout &lt;&lt; <span class="hljs-string">"Derived"</span> &lt;&lt; endl; }
};

Derived d;
Base&amp; br = d;  <span class="hljs-comment">// æ´¾ç”Ÿç±»å¼•ç”¨åˆ°åŸºç±»å¼•ç”¨</span>
br.<span class="hljs-built_in">show</span>();     <span class="hljs-comment">// è¾“å‡º: Derived (å¤šæ€)</span>
</code></pre>
<h2 data-id="heading-6">4. é™å®šç¬¦è½¬æ¢ (Qualification Conversions)</h2>
<h3 data-id="heading-7">constè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> x = <span class="hljs-number">10</span>;
<span class="hljs-type">const</span> <span class="hljs-type">int</span>* cp = &amp;x;     <span class="hljs-comment">// éconståˆ°const</span>
<span class="hljs-comment">// int* p = cp;         // é”™è¯¯: ä¸èƒ½å»æ‰consté™å®š</span>

<span class="hljs-type">const</span> <span class="hljs-type">int</span> y = <span class="hljs-number">20</span>;
<span class="hljs-comment">// int* p2 = &amp;y;        // é”™è¯¯: ä¸èƒ½å»æ‰consté™å®š</span>
<span class="hljs-type">const</span> <span class="hljs-type">int</span>* cp2 = &amp;y;    <span class="hljs-comment">// OK</span>
</code></pre>
<h3 data-id="heading-8">volatileè½¬æ¢</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">int</span> normal = <span class="hljs-number">10</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span> vi = <span class="hljs-number">20</span>;
<span class="hljs-keyword">volatile</span> <span class="hljs-type">int</span>* vp = &amp;normal;  <span class="hljs-comment">// évolatileåˆ°volatile</span>
<span class="hljs-comment">// int* p = &amp;vi;            // é”™è¯¯: ä¸èƒ½å»æ‰volatileé™å®š</span>
</code></pre>
<h2 data-id="heading-9">5. å¸ƒå°”è½¬æ¢</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä»¥ä¸‹æƒ…å†µä¼šéšå¼è½¬æ¢ä¸ºbool</span>
<span class="hljs-type">int</span>* ptr = <span class="hljs-literal">nullptr</span>;
<span class="hljs-keyword">if</span> (ptr) {  <span class="hljs-comment">// æŒ‡é’ˆåˆ°bool: nullptrâ†’false, å…¶ä»–â†’true</span>
    cout &lt;&lt; <span class="hljs-string">"Pointer is valid"</span> &lt;&lt; endl;
}

<span class="hljs-type">int</span> value = <span class="hljs-number">10</span>;
<span class="hljs-keyword">if</span> (value) {  <span class="hljs-comment">// ç®—æœ¯ç±»å‹åˆ°bool: 0â†’false, é0â†’true</span>
    cout &lt;&lt; <span class="hljs-string">"Value is non-zero"</span> &lt;&lt; endl;
}
</code></pre>
<h2 data-id="heading-10">6. ç”¨æˆ·å®šä¹‰ç±»å‹è½¬æ¢</h2>
<h3 data-id="heading-11">è½¬æ¢æ„é€ å‡½æ•°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyString</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">char</span>* str;
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// è½¬æ¢æ„é€ å‡½æ•°: const char* â†’ MyString</span>
    <span class="hljs-built_in">MyString</span>(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* s) {
        str = <span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-built_in">strlen</span>(s) + <span class="hljs-number">1</span>];
        <span class="hljs-built_in">strcpy</span>(str, s);
    }
    
    ~<span class="hljs-built_in">MyString</span>() { <span class="hljs-keyword">delete</span>[] str; }
};

MyString s = <span class="hljs-string">"Hello"</span>;  <span class="hljs-comment">// éšå¼è°ƒç”¨è½¬æ¢æ„é€ å‡½æ•°</span>
</code></pre>
<h3 data-id="heading-12">ç±»å‹è½¬æ¢è¿ç®—ç¬¦</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartBool</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">bool</span> value;
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">SmartBool</span>(<span class="hljs-type">bool</span> b) : <span class="hljs-built_in">value</span>(b) {}
    
    <span class="hljs-comment">// ç±»å‹è½¬æ¢è¿ç®—ç¬¦: SmartBool â†’ bool</span>
    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">bool</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        <span class="hljs-keyword">return</span> value;
    }
};

SmartBool sb = <span class="hljs-literal">true</span>;
<span class="hljs-keyword">if</span> (sb) {  <span class="hljs-comment">// éšå¼è°ƒç”¨operator bool()</span>
    cout &lt;&lt; <span class="hljs-string">"SmartBool is true"</span> &lt;&lt; endl;
}
</code></pre>
<h2 data-id="heading-13">7. æ ‡å‡†è½¬æ¢åºåˆ—</h2>
<p>C++ç¼–è¯‘å™¨ä¼šå°è¯•ä»¥ä¸‹æ ‡å‡†è½¬æ¢åºåˆ—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span> {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span> : <span class="hljs-keyword">public</span> A {};
<span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span> {};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(A a)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    B b;
    <span class="hljs-built_in">func</span>(b);  <span class="hljs-comment">// æ ‡å‡†è½¬æ¢: B â†’ A (æ´¾ç”Ÿç±»åˆ°åŸºç±»)</span>
    
    <span class="hljs-comment">// å¯èƒ½çš„è½¬æ¢åºåˆ—:</span>
    <span class="hljs-comment">// 1. ç²¾ç¡®åŒ¹é…</span>
    <span class="hljs-comment">// 2. æå‡è½¬æ¢</span>
    <span class="hljs-comment">// 3. æ ‡å‡†è½¬æ¢</span>
    <span class="hljs-comment">// 4. ç”¨æˆ·å®šä¹‰è½¬æ¢</span>
    <span class="hljs-comment">// 5. çœç•¥å·åŒ¹é…</span>
}
</code></pre>
<h2 data-id="heading-14">8. æ˜¾å¼æ§åˆ¶éšå¼è½¬æ¢</h2>
<h3 data-id="heading-15">explicitå…³é”®å­—</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ExplicitClass</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-keyword">explicit</span> <span class="hljs-title">ExplicitClass</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> </span>{}  <span class="hljs-comment">// ç¦æ­¢éšå¼è½¬æ¢</span>
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">test</span><span class="hljs-params">(ExplicitClass ec)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// ExplicitClass ec = 10;  // é”™è¯¯: ä¸èƒ½éšå¼è½¬æ¢</span>
    <span class="hljs-function">ExplicitClass <span class="hljs-title">ec</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;      <span class="hljs-comment">// OK: ç›´æ¥åˆå§‹åŒ–</span>
    <span class="hljs-built_in">test</span>(<span class="hljs-built_in">ExplicitClass</span>(<span class="hljs-number">10</span>));   <span class="hljs-comment">// OK: æ˜¾å¼è½¬æ¢</span>
}
</code></pre>
<h3 data-id="heading-16">åˆ é™¤è½¬æ¢å‡½æ•°</h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NoConvert</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">NoConvert</span>(<span class="hljs-type">int</span>) {}
    
    <span class="hljs-comment">// åˆ é™¤ä¸éœ€è¦çš„è½¬æ¢</span>
    <span class="hljs-built_in">NoConvert</span>(<span class="hljs-type">double</span>) = <span class="hljs-keyword">delete</span>;
    <span class="hljs-function"><span class="hljs-keyword">operator</span> <span class="hljs-title">bool</span><span class="hljs-params">()</span> </span>= <span class="hljs-keyword">delete</span>;
};

<span class="hljs-function">NoConvert <span class="hljs-title">nc</span><span class="hljs-params">(<span class="hljs-number">10</span>)</span></span>;    <span class="hljs-comment">// OK</span>
<span class="hljs-comment">// NoConvert nc(3.14); // é”™è¯¯: ä½¿ç”¨å·²åˆ é™¤çš„å‡½æ•°</span>
<span class="hljs-comment">// if (nc) {}         // é”™è¯¯: ä½¿ç”¨å·²åˆ é™¤çš„å‡½æ•°</span>
</code></pre>
<h2 data-id="heading-17">9. è½¬æ¢çš„ä¼˜å…ˆçº§å’Œæ­§ä¹‰</h2>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Ambiguous</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-built_in">Ambiguous</span>(<span class="hljs-type">int</span> x) {}
    <span class="hljs-built_in">Ambiguous</span>(<span class="hljs-type">double</span> x) {}
};

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">(Ambiguous a)</span> </span>{}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// func(10);     // æ­§ä¹‰: intå¯ä»¥è½¬æ¢ä¸ºintæˆ–double</span>
    <span class="hljs-built_in">func</span>(<span class="hljs-built_in">Ambiguous</span>(<span class="hljs-number">10</span>));  <span class="hljs-comment">// å¿…é¡»æ˜¾å¼æŒ‡å®š</span>
}
</code></pre>
<h2 data-id="heading-18">10. æœ€ä½³å®è·µå’Œæ³¨æ„äº‹é¡¹</h2>
<ol>
<li>
<p><strong>é¿å…æ„å¤–çš„éšå¼è½¬æ¢</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨explicité˜²æ­¢æ„å¤–çš„æ„é€ å‡½æ•°è½¬æ¢</span>
<span class="hljs-comment">// å°å¿ƒç®—æœ¯ç±»å‹è½¬æ¢çš„ç²¾åº¦æŸå¤±</span>
</code></pre>
</li>
<li>
<p><strong>æ³¨æ„ç¬¦å·æ€§å’Œå¤§å°</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> u = <span class="hljs-number">10</span>;
<span class="hljs-type">int</span> i = <span class="hljs-number">-5</span>;
<span class="hljs-keyword">if</span> (u &gt; i) {  <span class="hljs-comment">// iè½¬æ¢ä¸ºunsigned int, ç»“æœå¯èƒ½å‡ºä¹æ„æ–™</span>
    cout &lt;&lt; <span class="hljs-string">"Unexpected result!"</span> &lt;&lt; endl;
}
</code></pre>
</li>
<li>
<p><strong>ä½¿ç”¨static_castè¿›è¡Œæ˜¾å¼è½¬æ¢</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-type">double</span> d = <span class="hljs-number">3.14</span>;
<span class="hljs-type">int</span> i = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(d);  <span class="hljs-comment">// æ˜ç¡®çš„æ„å›¾</span>
</code></pre>
</li>
</ol>
<p>ç†è§£C++çš„ç±»å‹è½¬æ¢è§„åˆ™å¯¹äºç¼–å†™å®‰å…¨ã€é«˜æ•ˆçš„ä»£ç è‡³å…³é‡è¦ã€‚åœ¨å¯èƒ½äº§ç”Ÿæ­§ä¹‰æˆ–æ„å¤–è¡Œä¸ºçš„åœ°æ–¹ï¼Œå»ºè®®ä½¿ç”¨æ˜¾å¼è½¬æ¢æ¥æ˜ç¡®æ„å›¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·]]></title>    <link>https://juejin.cn/post/7577215663967420458</link>    <guid>https://juejin.cn/post/7577215663967420458</guid>    <pubDate>2025-11-27T09:02:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663967420458" data-draft-id="7577215663967387690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·"/> <meta itemprop="keywords" content="åç«¯,è¿œç¨‹å·¥ä½œ,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:02:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/64217584778579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025 å¹´ 8 æ¬¾æœ€ä½³è¿œç¨‹åä½œå·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/64217584778579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯¥ç”¨æˆ·å·²ä¸å­˜åœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:02:42.000Z" title="Thu Nov 27 2025 09:02:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç°åœ¨ä¸å°‘å¼€å‘å›¢é˜Ÿä¼šé€‰æ‹©è¿œç¨‹åŠå…¬ï¼Œä½†ä»–ä»¬çš„åä½œæ•ˆç‡é—®é¢˜ä¾ç„¶å­˜åœ¨ã€‚ä»‹ç»å‡ æ¬¾å¥½ç”¨çš„è¿œç¨‹åä½œå·¥å…·ï¼Œæå‡å¼€å‘æ•ˆç‡ã€‚</p>
<h3 data-id="heading-0">ç›´å‡»å¼€å‘æ ¸å¿ƒï¼šä»ç¯å¢ƒåˆ°ç¼–ç çš„æ— ç¼åä½œ</h3>
<p>å¯¹å¼€å‘è€…æ¥è¯´ï¼Œæœ€é«˜æ•ˆçš„åä½œï¼Œå°±æ˜¯èƒ½è®©å¤§å®¶åƒååœ¨åŒä¸€é—´åŠå…¬å®¤é‡Œä¸€æ ·ï¼Œé¢å¯¹åŒæ ·çš„ç¯å¢ƒã€åŒæ ·çš„ä»£ç ï¼Œé¡ºç•…åœ°æ²Ÿé€šã€‚ä¸‹é¢è¿™å‡ ä¸ªå·¥å…·ï¼Œå°±æ˜¯ä¸ºäº†å®ç°è¿™ä¸ªç›®æ ‡ã€‚</p>
<h4 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">ServBay</a>ï¼šå¯¹é½å›¢é˜Ÿå¼€å‘ç¯å¢ƒçš„é¢—ç²’åº¦</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/60d0fd44ddff4516b14577392afcfb47~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=ZGnJ4sejl1P6BFljDCOl6NOOJnM%3D" alt="" loading="lazy"/></p>
<p>â€œæˆ‘ç”µè„‘ä¸Šè·‘å¾—å¥½å¥½çš„å•Šï¼â€ è¿™å¥è¯ä½ è‚¯å®šä¸é™Œç”Ÿã€‚ä¸€ä¸ªå›¢é˜Ÿé‡Œï¼Œè€å¼ ç”¨ PHP 8.1ï¼Œè€æç”¨ 8.2ï¼Œè€å¤–çš„ Node.js è¿˜æ˜¯æ—§ç‰ˆæœ¬ï¼Œå…‰æ˜¯è§£å†³è¿™äº›ç¯å¢ƒå·®å¼‚å¸¦æ¥çš„ bugï¼Œå°±èƒ½è€—è´¹æ‰å¤§é‡æ—¶é—´ã€‚</p>
<p>ServBayå°±æ˜¯è§£å†³è¿™äº›é—®é¢˜è€Œå­˜åœ¨ã€‚</p>
<p>ServBay æœ¬èº«æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.servbay.com" target="_blank" title="https://www.servbay.com" ref="nofollow noopener noreferrer">æœ¬åœ° Web å¼€å‘ç¯å¢ƒé›†æˆå·¥å…·</a>ï¼Œæ”¯æŒ PHPã€Node.jsã€Pythonã€Goã€Java ç­‰å„ç§è¯­è¨€å’Œæ•°æ®åº“ã€‚ä½†å®ƒçœŸæ­£è®©æˆ‘è§‰å¾—æƒŠè‰³çš„ï¼Œæ˜¯å®ƒçš„å›¢é˜Ÿåä½œåŠŸèƒ½ã€‚</p>
<p>å®ƒé€šè¿‡ <code>.servbay.config</code> çš„é…ç½®æ–‡ä»¶ï¼ŒæŠŠå›¢é˜Ÿå¼€å‘ç¯å¢ƒä¸ä¸€è‡´è¿™ä¸ªéš¾é¢˜ç»™è§£å†³äº†ã€‚</p>
<p>é€šè¿‡ <code>.servbay.config</code> ï¼Œå›¢é˜Ÿè´Ÿè´£äººå¯ä»¥åœ¨è¿™ä¸ªæ–‡ä»¶é‡Œï¼Œç²¾ç¡®æŒ‡å®šé¡¹ç›®éœ€è¦ç”¨åˆ°çš„ Python ç‰ˆæœ¬ã€Node.js ç‰ˆæœ¬æˆ–è€…å…¶ä»–çš„è¯­è¨€ï¼Œç”šè‡³æ˜¯ Node.js åŒ…ç®¡ç†å™¨çš„ä»“åº“åœ°å€å’Œç¼“å­˜ç›®å½•ã€‚ç„¶åæŠŠè¿™ä¸ªæ–‡ä»¶éšä»£ç ä¸€èµ·æäº¤åˆ° Git ä»“åº“ã€‚</p>
<p>è¿™æ ·ä¸€æ¥ï¼Œå›¢é˜Ÿåä½œçš„ä½“éªŒå°±å®Œå…¨ä¸åŒäº†ï¼š</p>
<ul>
<li><strong>å‘Šåˆ«â€œæˆ‘è¿™å„¿æ²¡é—®é¢˜â€çš„é—®é¢˜</strong>ï¼šå›¢é˜Ÿé‡Œæ‰€æœ‰äººï¼Œåªè¦æ‹‰ä¸‹ä»£ç ï¼ŒServBay å°±ä¼šè‡ªåŠ¨æ ¹æ® <code>.servbay.config</code> æ–‡ä»¶æ¥åˆ‡æ¢å’Œé…ç½®ç¯å¢ƒã€‚ç¡®ä¿äº†ä»å¼€å‘ã€æµ‹è¯•åˆ°æœ€ç»ˆä¸Šçº¿ï¼Œç¯å¢ƒéƒ½æ˜¯é«˜åº¦ä¸€è‡´çš„ã€‚</li>
<li><strong>æ–°äººå…¥èŒé€Ÿåº¦å¿«åˆ°é£èµ·</strong>ï¼šæ–°äººæ¥äº†ï¼Œä¸ç”¨å†å¯¹ç€é•¿é•¿çš„æ–‡æ¡£æŠ˜è…¾åŠå¤©ç¯å¢ƒã€‚ç›´æ¥ç”¨å›¢é˜Ÿçš„ <code>.servbay.config</code> æ–‡ä»¶ï¼Œå‡ åˆ†é’Ÿå°±èƒ½æŠŠé¡¹ç›®è·‘èµ·æ¥ï¼Œé©¬ä¸Šå°±èƒ½æŠ•å…¥å·¥ä½œã€‚</li>
<li><strong>ç¯å¢ƒç®¡ç†ä¸å†æ˜¯æ•£è£…çš„</strong>ï¼šå›¢é˜Ÿçš„æŠ€æœ¯è´Ÿè´£äººå¯ä»¥ç»Ÿä¸€ç®¡ç†å’Œæ›´æ–°è¿™ä»½é…ç½®æ–‡ä»¶ã€‚æ¯”å¦‚é¡¹ç›®éœ€è¦å‡çº§è¯­è¨€ç‰ˆæœ¬ï¼Œåªéœ€è¦ä¿®æ”¹ä¸€ä¸‹æ–‡ä»¶ï¼Œå›¢é˜Ÿæˆå‘˜ä¸‹æ¬¡æ‹‰å–ä»£ç æ—¶ï¼Œç¯å¢ƒå°±è‡ªåŠ¨åŒæ­¥äº†ã€‚</li>
<li><strong>å¤§å®¶èƒ½æ›´ä¸“æ³¨äºå†™ä»£ç </strong>ï¼šç¯å¢ƒç»Ÿä¸€äº†ï¼Œå› ä¸ºç¯å¢ƒé—®é¢˜å¯¼è‡´çš„å†²çªå’Œé˜»å¡å°±å°‘äº†ã€‚å¼€å‘è€…å¯ä»¥æŠŠç²¾åŠ›éƒ½æ”¾åœ¨ä¸šåŠ¡é€»è¾‘ä¸Šï¼Œåä½œæ•ˆç‡è‡ªç„¶å°±é«˜äº†ã€‚</li>
</ul>
<p>ServBayçš„è¿™ä¸ªåŠŸèƒ½ï¼Œä¸ç®¡æ˜¯è¿œç¨‹å·¥ä½œè¿˜æ˜¯çº¿ä¸‹å·¥ä½œï¼Œéƒ½æ˜¯å¿…ä¸å¯å°‘çš„ã€‚</p>
<h4 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fcode.visualstudio.com%2Fblogs%2F2017%2F11%2F15%2Flive-share" target="_blank" title="https://code.visualstudio.com/blogs/2017/11/15/live-share" ref="nofollow noopener noreferrer">Live Share</a>ï¼šèº«ä¸´å…¶å¢ƒçš„è¿œç¨‹ç»“å¯¹ç¼–ç¨‹</h4>
<p>ç¯å¢ƒç»Ÿä¸€äº†ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯æ€ä¹ˆé«˜æ•ˆåœ°ä¸€èµ·å†™ä»£ç ã€‚Live Share æ˜¯ VS Code çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒèƒ½è®©å¼€å‘è€…æŠŠè‡ªå·±çš„ç¼–è¾‘å™¨åˆ†äº«ç»™é˜Ÿå‹ã€‚é˜Ÿå‹å¯ä»¥ç›´æ¥è¿›å…¥ä½ çš„ç¼–è¾‘å™¨ï¼Œå®æ—¶çœ‹åˆ°ä½ çš„ä»£ç ï¼Œå’Œä½ ä¸€èµ·ç¼–è¾‘ã€è°ƒè¯•ï¼Œç”šè‡³å…±äº«ä½ çš„ç»ˆç«¯ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹éå¸¸æµç•…ï¼Œå°±åƒä»–ååœ¨ä½ æ—è¾¹ä¸€æ ·ã€‚</p>
<h4 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGruntfuggly%2Ftodo-tree" target="_blank" title="https://github.com/Gruntfuggly/todo-tree" ref="nofollow noopener noreferrer">Todo Tree</a>ï¼šä»£ç ä¸­çš„å¼‚æ­¥å¤‡å¿˜å½•</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a26ca1444f1943dfbbc67e64c7920b8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=NU8X4%2BsTDrByAYEJ4UHcgKQQoMA%3D" alt="" loading="lazy"/></p>
<p>ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½éœ€è¦æ‹‰ç€äººå®æ—¶æ²Ÿé€šã€‚æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä»£ç é‡Œå‘ç°ä¸€ä¸ªå°bugï¼Œå¯ä»¥å…ˆè®°ä¸‹æ¥ã€‚Todo Tree è¿™ä¸ª VS Code æ’ä»¶å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚</p>
<p>å®ƒèƒ½æ‰«ææ•´ä¸ªé¡¹ç›®ä»£ç é‡Œçš„ <code>TODO</code>ã€<code>FIXME</code> ç­‰æ³¨é‡Šï¼Œå¹¶æŠŠå®ƒä»¬é›†ä¸­åœ¨ä¸€ä¸ªè§†å›¾é‡Œå±•ç¤ºã€‚è¿™æ ·ï¼Œåœ¨å†™ä»£ç æ—¶éšæ‰‹è®°ä¸‹çš„å¾…åŠäº‹é¡¹å°±ä¸ä¼šè¢«é—å¿˜ã€‚åœ¨ Code Review çš„æ—¶å€™ï¼Œå›¢é˜Ÿæˆå‘˜ä¹Ÿèƒ½æ¸…æ™°åœ°çœ‹åˆ°è¿˜æœ‰å“ªäº›åœ°æ–¹éœ€è¦å®Œå–„ï¼Œç®—æ˜¯ä¸€ç§è½»é‡çº§çš„ã€ä»£ç å±‚é¢çš„å¼‚æ­¥ååŒã€‚</p>
<h3 data-id="heading-4">ä»»åŠ¡ä¸é¡¹ç›®ç®¡ç†ï¼šä¸ºå¼€å‘æµç¨‹æœåŠ¡çš„éª¨æ¶</h3>
<p>ä»£ç å±‚é¢çš„åä½œç†é¡ºäº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹æ›´é«˜ä¸€å±‚çš„é¡¹ç›®ç®¡ç†ã€‚è¿™é‡Œçš„å·¥å…·é€‰æ‹©å¾ˆå¤šï¼Œå®ƒä»¬å„æœ‰ä¾§é‡ï¼Œé€‚åˆä¸åŒé£æ ¼çš„å›¢é˜Ÿã€‚</p>
<h4 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Flinear.app%2F" target="_blank" title="https://linear.app/" ref="nofollow noopener noreferrer">Linear</a>ï¼šè¿½æ±‚æè‡´é€Ÿåº¦çš„å¼€å‘è€…é¦–é€‰</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6efc5bc49bd460a9129b40d94ee8abf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=mpx0ELjmDCwjvnrh9rCDh6y%2BSGc%3D" alt="" loading="lazy"/></p>
<p>å¦‚æœä½ å—å¤Ÿäº† Jira çš„è‡ƒè‚¿å’Œå¡é¡¿ï¼ŒLinear ç»å¯¹èƒ½è®©ä½ çœ¼å‰ä¸€äº®ã€‚å®ƒçš„ç•Œé¢æç®€ã€å“åº”é£å¿«ï¼Œæ‰€æœ‰æ“ä½œåŸºæœ¬éƒ½èƒ½ç”¨é”®ç›˜å¿«æ·é”®å®Œæˆã€‚å®ƒå’Œ GitHub çš„é›†æˆåšå¾—éå¸¸å¥½ï¼Œä»£ç æäº¤èƒ½è‡ªåŠ¨æ›´æ–°ä»»åŠ¡çŠ¶æ€ã€‚ç”¨å®ƒæ¥ç®¡ç† Sprint å’Œ Bugï¼Œæ„Ÿè§‰å°±åƒåœ¨å†™ä»£ç ä¸€æ ·æµç•…ã€‚</p>
<h4 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Ftrello.com%2F" target="_blank" title="https://trello.com/" ref="nofollow noopener noreferrer">Trello</a>ï¼šç®€å•ç›´è§‚çš„çœ‹æ¿</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5098b3c992ad4b5fba1051bff91af2f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=Wt%2BA6I9g2NPJbKD7jn3Yjc%2FVMZ4%3D" alt="" loading="lazy"/></p>
<p>Trello å°±åƒä¸€å—ç™½æ¿å’Œä¸€å †ä¾¿åˆ©è´´ã€‚å®ƒçš„æ ¸å¿ƒå°±æ˜¯çœ‹æ¿ï¼ˆBoardï¼‰ã€åˆ—è¡¨ï¼ˆListï¼‰ã€å¡ç‰‡ï¼ˆCardï¼‰ã€‚æ“ä½œç®€å•ç›´è§‚ï¼Œå­¦ä¹ æˆæœ¬å‡ ä¹ä¸ºé›¶ã€‚éå¸¸é€‚åˆè§„æ¨¡ä¸å¤§ã€æµç¨‹ä¸å¤æ‚çš„å›¢é˜Ÿï¼Œæˆ–è€…ç”¨æ¥ç®¡ç†ä¸€äº›ä¸´æ—¶çš„ã€éæ ¸å¿ƒçš„é¡¹ç›®ã€‚</p>
<h4 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fmonday.com%2F" target="_blank" title="https://monday.com/" ref="nofollow noopener noreferrer">Monday</a>ï¼šé«˜åº¦å®šåˆ¶åŒ–çš„é¡¹ç›®å·¥å…·</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0440d1d54b241ecadfdfb76d7203582~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=eKuNsDDgmlt%2BZiEOt0QLhsuBVO0%3D" alt="" loading="lazy"/></p>
<p>Monday æ›´åƒä¸€ä¸ªå·¥ä½œæ“ä½œç³»ç»Ÿã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„åœ¨äºé«˜åº¦çš„å¯å®šåˆ¶æ€§ï¼Œä½ å¯ä»¥ç”¨å®ƒæ­å»ºå‡ºå„ç§å„æ ·çš„å·¥ä½œæµã€‚å®ƒçš„å„ç§è§†å›¾ï¼ˆæ—¶é—´çº¿ã€å›¾è¡¨ï¼‰éå¸¸ä¸°å¯Œï¼Œå¾ˆé€‚åˆéœ€è¦å‘ç®¡ç†å±‚æˆ–éæŠ€æœ¯åŒäº‹å±•ç¤ºé¡¹ç›®è¿›åº¦çš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.teamcamp.app%2F" target="_blank" title="https://www.teamcamp.app/" ref="nofollow noopener noreferrer">Teamcamp</a>ï¼šæ•´åˆä»£ç ä¸ä»»åŠ¡çš„ä¸€ä½“åŒ–å¹³å°</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2165b0336a7f46078001fccf541ec6e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=pEuhq67X8odcTA4RAeOJD1NQEms%3D" alt="" loading="lazy"/></p>
<p>Teamcamp çš„æ€è·¯æ˜¯æŠŠé¡¹ç›®ç®¡ç†å’Œä»£ç å·¥ä½œæµæ›´ç´§å¯†åœ°ç»“åˆèµ·æ¥ã€‚æ¯”å¦‚å®ƒçš„ä¸€ä¸ªç‰¹è‰²æ˜¯ Git æäº¤å¯ä»¥è‡ªåŠ¨æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼Œå‡å°‘äº†å¼€å‘è€…åœ¨ä»»åŠ¡æ¿å’Œä»£ç åº“ä¹‹é—´æ¥å›åˆ‡æ¢çš„æ‰‹åŠ¨æ“ä½œã€‚å¦‚æœæƒ³è¦ä»»åŠ¡çŠ¶æ€èƒ½å’Œä»£ç è¿›åº¦å¼ºç»‘å®šï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-9">æ—¶é—´ä¸æ•ˆç‡è¿½è¸ª</h3>
<h4 data-id="heading-10"><a href="https://link.juejin.cn?target=https%3A%2F%2Fclockify.me%2F" target="_blank" title="https://clockify.me/" ref="nofollow noopener noreferrer">Clockify</a>ï¼šç®€å•ç›´æ¥çš„æ—¶é—´è®°å½•å·¥å…·</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d2a9937d241449fdad7ef01d4d55e728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6K-l55So5oi35bey5LiN5a2Y5Zyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838962&amp;x-signature=nFqE9JzeCd1b%2Bys3iGW5rXQ%2FDMc%3D" alt="" loading="lazy"/></p>
<p>è¿œç¨‹å·¥ä½œï¼Œæœ‰æ—¶å€™éœ€è¦è®°å½•ä¸€ä¸‹è‡ªå·±åœ¨å„ä¸ªé¡¹ç›®ä¸ŠèŠ±äº†å¤šå°‘æ—¶é—´ï¼Œä»¥ä¾¿è¯„ä¼°å·¥ä½œé‡æˆ–è¿›è¡Œé¡¹ç›®å¤ç›˜ã€‚Clockify æ˜¯ä¸€ä¸ªå…è´¹åˆç®€å•çš„æ—¶é—´è¿½è¸ªå·¥å…·ã€‚å®ƒæ²¡ä»€ä¹ˆå­¦ä¹ æˆæœ¬ï¼Œå¯ä»¥æŒ‰é¡¹ç›®ã€æŒ‰ä»»åŠ¡æ¥è®°å½•æ—¶é—´ï¼Œä¹Ÿèƒ½ç”Ÿæˆç®€å•çš„æŠ¥è¡¨ã€‚å¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªä¸æ‰“æ‰°ã€ä¸å¤æ‚çš„å·¥å…·æ¥è®°å½•å·¥æ—¶ï¼Œå®ƒè¶³å¤Ÿäº†ã€‚</p>
<h3 data-id="heading-11">æ€»ç»“ä¸€ä¸‹</h3>
<p>ä¸€ä¸ªå¥½çš„è¿œç¨‹åä½œå·¥å…·æ ˆï¼Œæœ‰è‡ªå·±æ“…é•¿çš„é¢†åŸŸï¼š</p>
<ul>
<li>
<p><strong>ServBay</strong> è´Ÿè´£æ‰“å¥½åœ°åŸºï¼Œç»Ÿä¸€å¼€å‘ç¯å¢ƒã€‚</p>
</li>
<li>
<p><strong>Linearã€Trelloã€Mondayã€Teamcamp</strong> è´Ÿè´£æ­å»ºé¡¹ç›®ç®¡ç†çš„éª¨æ¶ï¼Œé£æ ¼å„å¼‚ï¼ŒæŒ‰éœ€ä½¿ç”¨ã€‚</p>
</li>
<li>
<p><strong>Live Share</strong> å’Œ <strong>Todo</strong> <strong>Tree</strong> è´Ÿè´£å¡«å……ä»£ç åä½œçš„è¡€è‚‰ï¼Œä¸€ä¸ªå®æ—¶ã€ä¸€ä¸ªå¼‚æ­¥ã€‚</p>
</li>
<li>
<p><strong>Clockify</strong> è´Ÿè´£æœ€åçš„åº¦é‡å’Œå¤ç›˜ã€‚</p>
</li>
</ul>
<p>å…ˆæŠŠåœ°åŸºæ‰“ç‰¢ï¼Œä¸Šå±‚çš„åä½œæ‰ä¼šäº‹åŠåŠŸå€ã€‚å¸Œæœ›è¿™äº›å·¥å…·èƒ½å¸®åˆ°ä½ å’Œä½ çš„å›¢é˜Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™]]></title>    <link>https://juejin.cn/post/7577204540417228863</link>    <guid>https://juejin.cn/post/7577204540417228863</guid>    <pubDate>2025-11-27T09:08:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417228863" data-draft-id="7577220965437079606" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2025-11-27T09:08:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Databend"/> <meta itemprop="url" content="https://juejin.cn/user/4477651847485534"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4477651847485534/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Databend
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:08:58.000Z" title="Thu Nov 27 2025 09:08:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•°æ®æ´ªæµå¥”æ¶Œï¼ŒAI æµªæ½®æ¾æ¹ƒã€‚å½“ Data ä¸ AI æ·±åº¦äº¤ç»‡ï¼Œå¦‚ä½•æ„å»ºé¢å‘æœªæ¥çš„æŠ€æœ¯æ ˆï¼Ÿå¦‚ä½•åŸºäºäºšé©¬é€Šäº‘ç§‘æŠ€æ„æ•°æ®åˆ†æä¸šåŠ¡ï¼Ÿ11æœˆ29æ—¥ã€Œå¦‚ä½•æ‰“é€ AIæ—¶ä»£çš„æ•°æ®åŸºçŸ³ | Databend Meetup ä¸Šæµ·ç«™ã€ åº”åŠ¿è€Œæ¥ï¼æˆ‘ä»¬åŠ›é‚€å¤šä½æ¥è‡ªæ˜æ˜Ÿå¼€æºé¡¹ç›®ä¸ä¸€çº¿å¤§å‚çš„èµ„æ·±ä¸“å®¶ï¼Œä¸ºæ‚¨å…¨æ™¯è§£ææ•°æ®å¹³å°æ¶æ„ã€AI åˆ›æ–°å®è·µä¸èŒä¸šå‘å±•è·¯å¾„ï¼Œå¼€å¯ä¸€åœºæ€æƒ³ä¸æŠ€æœ¯çš„ç¢°æ’ã€‚</p>
<p>æœ¬æ¬¡ Meetupï¼Œæˆ‘ä»¬è£å¹¸åœ°é‚€è¯·åˆ° Databend Labs è”åˆåˆ›å§‹äººå´ç‚³é”¡ã€æ²‰æµ¸å¼ç¿»è¯‘æŠ€æœ¯ä¸“å®¶é™ˆç¦ã€æ•°æ®å¹³å°æ¶æ„å¸ˆé‚µé”‹ã€å¹³å‡¯æ˜Ÿè¾°ï¼ˆTiDBï¼‰è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆåˆ˜æºã€Airwallex ç©ºä¸­äº‘æ±‡æ•°æ®åº“æ¶æ„å¸ˆèµµé£ç¥¥ï¼Œä»–ä»¬å°†å¸¦æ¥å…¼å…·æ·±åº¦ä¸å¹¿åº¦çš„å¹²è´§åˆ†äº«ï¼Œä¸ºæ‚¨å‘ˆç°ä¸€åœº Data + AI çš„å®è·µã€‚</p>
<h2 data-id="heading-0">æ´»åŠ¨ä¿¡æ¯</h2>
<p>â°Â æ´»åŠ¨æ—¶é—´ï¼š2025 å¹´Â 11 æœˆ 29 æ—¥ï¼ˆå‘¨å…­ï¼‰13:30 - 17:30</p>
<p>ğŸ“Â æ´»åŠ¨åœ°ç‚¹ï¼šä¸Šæµ·å¸‚é»„æµ¦åŒºä¸­æµ·å›½é™…ä¸­å¿ƒ A åº§ 21 æ¥¼Â </p>
<p>ğŸ”—Â æŠ¥åæ–¹å¼ï¼šï¼ˆæ‰«ææµ·æŠ¥äºŒç»´ç ï¼‰çº¿ä¸‹å‚ä¸é‡‡å–å®¡æ ¸åˆ¶ (100 äºº)</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/124728b4348f4bbd9806b0c14104e8e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839337&amp;x-signature=Yw%2FRhuOP3GIs7koFqUSbE3%2BHeUQ%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">æ´»åŠ¨äº®ç‚¹</h2>
<p>ä¸€çº¿å®æˆ˜ï¼šÂ å˜‰å®¾æ¥è‡ªä¸šå†…çŸ¥åä¼ä¸šåŠå¼€æºé¡¹ç›®ï¼Œåˆ†äº«å†…å®¹æºäºçœŸå®ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p>å…¨æ™¯è§†è§’ï¼šÂ è¦†ç›–ä»å¼€æºå·¥å…·ã€AI äº§å“åˆ°ä¼ä¸šçº§å¹³å°çš„å®Œæ•´äº§ä¸šé“¾è§†è§’ã€‚</p>
<p>æ·±åº¦äº’åŠ¨ï¼šÂ åœ†æ¡Œè®¨è®ºä¸äº¤æµç¯èŠ‚ï¼Œè®©æ‚¨æœ‰æœºä¼šä¸å˜‰å®¾ç›´æ¥å¯¹è¯ã€‚</p>
<p>é«˜ç«¯äººè„‰ï¼šÂ ç»“è¯†ä¼—å¤šå¯¹ Data å’Œ AI å……æ»¡çƒ­æƒ…çš„åŒé“ä¸­äººï¼Œæ‹“å±•ä¸“ä¸šäººè„‰åœˆã€‚</p>
<h2 data-id="heading-2">æ´»åŠ¨å‚ä¸å¥–åŠ±</h2>
<p>ğŸ ä¸°åšå‚ä¼šç¦åˆ©ï¼šDatabend ç¤¾åŒºä¸°å¯Œå‘¨è¾¹,å¦æœ‰æŠ€æœ¯èµ„æ–™ç­‰ä½ æ¥æ‹¿~</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b583891dbd246d0bdb544ec905eb85b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGF0YWJlbmQ=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839337&amp;x-signature=oMMykhkhFrk8VEEPQ3FZcL0s9mI%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h3 data-id="heading-3">ç«‹å³è¡ŒåŠ¨ï¼Œé”å®šå¸­ä½ï¼</h3>
<ul>
<li>æ´»åŠ¨ä¸»é¢˜ï¼š DATA AI Databend Meetup</li>
<li>æ´»åŠ¨å½¢å¼ï¼š çº¿ä¸‹åˆ†äº« + åœ†æ¡Œè®¨è®º + è‡ªç”±äº¤æµ</li>
</ul>
<p>æ— è®ºæ‚¨æ˜¯æ•°æ®å·¥ç¨‹å¸ˆã€AI å¼€å‘è€…ã€æŠ€æœ¯è´Ÿè´£äººï¼Œè¿˜æ˜¯å¯¹æ•°æ®æ™ºèƒ½å……æ»¡å¥½å¥‡çš„å­¦ä¹ è€…ï¼Œè¿™éƒ½å°†æ˜¯ä¸€åœºæ”¶è·æ»¡æ»¡çš„ç››ä¼šã€‚å¸­ä½æœ‰é™ï¼Œè¯·ç«‹å³æŠ¥åï¼Œä¸æˆ‘ä»¬ä¸€åŒç«™åœ¨æŠ€æœ¯æµªæ½®ä¹‹å·…ï¼Œå…±ç»˜ Data ä¸ AI çš„æœªæ¥å›¾æ™¯ï¼</p>
<h2 data-id="heading-4">å…³äº Databend</h2>
<p>Databend æ˜¯ä¸€æ¬¾ 100%Â RustÂ æ„å»ºã€é¢å‘å¯¹è±¡å­˜å‚¨è®¾è®¡çš„æ–°ä¸€ä»£å¼€æºäº‘åŸç”Ÿæ•°æ®ä»“åº“ï¼Œç»Ÿä¸€æ”¯æŒÂ BIÂ åˆ†æã€AI å‘é‡ã€å…¨æ–‡æ£€ç´¢åŠåœ°ç†ç©ºé—´åˆ†æç­‰å¤šæ¨¡æ€èƒ½åŠ›ã€‚æœŸå¾…æ‚¨çš„å…³æ³¨ï¼Œä¸€èµ·æ‰“é€ æ–°ä¸€ä»£å¼€æº AI + Data Cloudã€‚</p>
<p>ğŸ‘¨â€ğŸ’»â€Â Databend Cloudï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatabend.cn" target="_blank" title="https://databend.cn" ref="nofollow noopener noreferrer">databend.cn</a></p>
<p>ğŸ“–Â Databend æ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.databend.cn" target="_blank" title="https://docs.databend.cn" ref="nofollow noopener noreferrer">docs.databend.cn</a></p>
<p>ğŸ’»Â Wechatï¼šDatabend</p>
<p>âœ¨Â GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fdatabendlabs%2Fdatabend" target="_blank" title="https://github.com/databendlabs/databend" ref="nofollow noopener noreferrer">github.com/databendlabâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7577215663967535146</link>    <guid>https://juejin.cn/post/7577215663967535146</guid>    <pubDate>2025-11-27T09:10:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577215663967535146" data-draft-id="7577198193215094827" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:10:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ipa Guard é›†æˆåˆ° CICD æµç¨‹ï¼Œè®© iOS åŠ å›ºè¿›å…¥è‡ªåŠ¨åŒ–æ—¶ä»£çš„å®Œæ•´å·¥ç¨‹æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:10:13.000Z" title="Thu Nov 27 2025 09:10:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è®¸å¤šå›¢é˜Ÿä¸­ï¼ŒiOS åŠ å›ºå¾€å¾€æ˜¯æ„å»ºé“¾è·¯ä¸­è¢«å¿½ç•¥çš„ä¸€ç¯ã€‚
è¦ä¹ˆä¾èµ–äººå·¥æ“ä½œï¼Œè¦ä¹ˆèµ°ä¸“äººæ‰§è¡Œï¼Œå¯¼è‡´ï¼š</p>
<ul>
<li>æ··æ·†ç­–ç•¥ä¸ç»Ÿä¸€</li>
<li>æŸäº›æ¸ é“åŒ…å¿˜è®°åŠ å›º</li>
<li>æ‰‹å·¥æ“ä½œæ˜“å‡ºé”™</li>
<li>ä¸åŒæ„å»ºä¹‹é—´æ˜ å°„è¡¨ä¸ä¸€è‡´</li>
<li>å‘å¸ƒæµç¨‹ä¸å¯å®¡è®¡ã€ä¸å¯è¿½è¸ª</li>
<li>å®¡æ ¸å‰çš„åŠ å›ºæ­¥éª¤ä¸´æ—¶è¡¥æ•‘ã€å‹åŠ›å·¨å¤§</li>
</ul>
<p>è€Œéšç€ <strong>Ipa Guard CLI</strong> æ”¯æŒå‘½ä»¤è¡Œæ“ä½œã€æ”¯æŒç¬¦å·æ–‡ä»¶ã€å¯æ§æ··æ·†ç­–ç•¥ï¼ŒiOS åŠ å›ºç»ˆäºå¯ä»¥è¢«æ­£å¼çº³å…¥ <strong>CI/CD æµç¨‹</strong>ï¼Œå®ç°ï¼š</p>
<p>è‡ªåŠ¨åŠ å›º
è‡ªåŠ¨æµ‹è¯•
è‡ªåŠ¨é‡ç­¾
è‡ªåŠ¨ä¸Šä¼ 
è‡ªåŠ¨å½’æ¡£æ··æ·†æ˜ å°„è¡¨
å¯å›æ»šã€å¯å®¡è®¡ã€å¯è¿½è¸ª</p>
<p>æœ¬æ–‡å°†ä» DevOps å®è·µè§’åº¦ä»‹ç»å¦‚ä½•è®© <strong>Ipa Guard + CI/CD</strong> å½¢æˆå®Œæ•´é—­ç¯ï¼Œå¹¶ç»“åˆ MobSFã€kxsignã€Frida/Hopperã€KMS ç­‰å·¥å…·ç»™å‡ºæ•´å¥—è‡ªåŠ¨åŒ–æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦æŠŠ Ipa Guard é›†æˆåˆ° CI/CDï¼Ÿ</h2>
<h3 data-id="heading-1"><strong>1. æ¶ˆé™¤äººå·¥æ­¥éª¤ï¼Œé™ä½é£é™©</strong></h3>
<p>æ‰‹åŠ¨æ··æ·†å®¹æ˜“å‡ºé”™ï¼Œå°¤å…¶æ˜¯å¤šæ¸ é“ã€å¤šç‰ˆæœ¬ã€å¤šå›¢é˜Ÿã€‚</p>
<h3 data-id="heading-2"><strong>2. åŠ å›ºç­–ç•¥å¯æ§ã€å¯æ²»ç†</strong></h3>
<p>ä½¿ç”¨ sym.jsonï¼Œç¡®ä¿æ¯æ¬¡æ··æ·†ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-3"><strong>3. æ˜ å°„è¡¨è‡ªåŠ¨å½’æ¡£</strong></h3>
<p>ç”¨äºå´©æºƒç¬¦å·åŒ–ã€é—®é¢˜å›æº¯ä¸å®¡è®¡ã€‚</p>
<h3 data-id="heading-4"><strong>4. æ‹‰é½å¤šä¸ªç‰ˆæœ¬æµç¨‹</strong></h3>
<p>ä¸»åŒ…ã€æ¸ é“åŒ…ã€å“ç‰Œå®šåˆ¶åŒ…éƒ½å¯ç»Ÿä¸€å¤„ç†ã€‚</p>
<h3 data-id="heading-5"><strong>5. å½¢æˆå¯è¯å®çš„å®‰å…¨é“¾è·¯</strong></h3>
<p>å¯¹å¤–åˆè§„ä¸å†…éƒ¨å®¡è®¡æ›´å‹å¥½ã€‚</p>
<p>å› æ­¤ï¼ŒIpa Guard CLI çš„å‘½ä»¤è¡Œèƒ½åŠ›ä¸ºæ„å»ºæµæ°´çº¿å¥ å®šäº†æœ€ä½³åŸºç¡€ã€‚</p>
<hr/>
<h2 data-id="heading-6">äºŒã€CI/CD ä¸­éœ€è¦çš„å·¥å…·çŸ©é˜µï¼ˆå…¨é“¾è·¯è‡ªåŠ¨åŒ–ï¼‰</h2>























































<table><thead><tr><th>é˜¶æ®µ</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>é™æ€åˆ†æ</td><td>MobSFã€class-dump</td><td>è‡ªåŠ¨è¯†åˆ«æš´éœ²ç¬¦å·ï¼Œè¾…åŠ©ç”Ÿæˆç™½åå•</td></tr><tr><td>IPA è§£æ</td><td><strong>Ipa Guard CLI parse</strong></td><td>å¯¼å‡ºç¬¦å·æ–‡ä»¶ sym.json</td></tr><tr><td>ç­–ç•¥ç”Ÿæˆ</td><td>è‡ªå®šä¹‰è„šæœ¬</td><td>è‡ªåŠ¨åˆå¹¶ç™½åå•æˆ–ç­–ç•¥æ¨¡æ¿</td></tr><tr><td>IPA åŠ å›º</td><td><strong>Ipa Guard CLI protect</strong></td><td>è‡ªåŠ¨æ··æ·†ã€èµ„æºæ‰°åŠ¨ã€MD5 ä¿®æ”¹</td></tr><tr><td>é‡ç­¾å</td><td>kxsign</td><td>ç”Ÿæˆå¯å®‰è£… ipaï¼ˆDev / Adhoc / Releaseï¼‰</td></tr><tr><td>è‡ªåŠ¨æµ‹è¯•</td><td>XCTest / UI è‡ªåŠ¨åŒ– / çœŸæœºç»„</td><td>éªŒè¯åŠ å›ºåç¨³å®šæ€§</td></tr><tr><td>å®‰å…¨éªŒè¯</td><td>Fridaã€Hopper</td><td>è‡ªåŠ¨æ£€æŸ¥å…³é”®æ–¹æ³•æ˜¯å¦è¢«æ··æ·†</td></tr><tr><td>å½’æ¡£</td><td>KMS / S3 / å†…ç½‘æ–‡ä»¶åº“</td><td>ä¿å­˜æ˜ å°„è¡¨ã€äº§ç‰©ä¸å®¡è®¡æ—¥å¿—</td></tr><tr><td>åˆ†å‘</td><td>Fastlane / GitLab Runner / Jenkins</td><td>è‡ªåŠ¨ä¸Šä¼  TestFlight / å†…éƒ¨åˆ†å‘å¹³å°</td></tr></tbody></table>
<p>è¿™æ˜¯ä¸€å¥—å¯æ§ã€å¯ç»´æŠ¤çš„ iOS åŠ å›ºæµæ°´çº¿ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€Ipa Guard åœ¨ CI/CD ä¸­çš„å®Œæ•´é›†æˆæµç¨‹</h2>
<p>ä¸‹é¢ä»¥ Jenkins/GitLab CI ä¸ºä¾‹ä»‹ç»æµæ°´çº¿ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>â‘  Step 1ï¼šç”ŸæˆåŸºç¡€ IPA</strong></h2>
<p>æ¥è‡ªï¼š</p>
<ul>
<li>Xcode æ„å»ºï¼ˆä¸»åŒ…ï¼‰</li>
<li>å¤–åŒ…æäº¤çš„ IPA</li>
<li>æ¸ é“åŒ…</li>
<li>è‡ªåŠ¨æ„å»ºæµç¨‹</li>
</ul>
<p>å°† IPA å­˜æ”¾åˆ° <code>$WORKSPACE/app.ipa</code></p>
<hr/>
<h2 data-id="heading-9"><strong>â‘¡ Step 2ï¼šå¯¼å‡ºå¯æ··æ·†ç¬¦å·ï¼ˆè‡ªåŠ¨æ‰§è¡Œï¼‰</strong></h2>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p>CI å°†ç”Ÿæˆçš„ <code>sym.json</code> ä¸Šä¼ åˆ°ï¼š</p>
<ul>
<li>å†…ç½‘ä»“åº“</li>
<li>Git repo</li>
<li>æˆ–è€… KMS å­˜å‚¨</li>
</ul>
<p>ç”¨äºå®¡è®¡ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>â‘¢ Step 3ï¼šè‡ªåŠ¨ç¼–è¾‘ç¬¦å·ï¼ˆç­–ç•¥åˆå¹¶ï¼‰</strong></h2>
<p>é€šå¸¸åŒ…å«ä¸¤éƒ¨åˆ†ï¼š</p>
<h3 data-id="heading-11">1. é¡¹ç›®ä¸“å±ç™½åå•ï¼ˆå¦‚ MethodChannelã€JSBridge é»‘åå•ï¼‰</h3>
<p>ç”±å®‰å…¨å›¢é˜Ÿç»´æŠ¤ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs">whitelist.json
</code></pre>
<h3 data-id="heading-12">2. è‡ªåŠ¨ç”Ÿæˆçš„ sym.jsonï¼ˆæ¥è‡ª parseï¼‰</h3>
<p>è„šæœ¬è‡ªåŠ¨åˆå¹¶ä¸¤è€…ï¼Œå¾—åˆ°æœ€ç»ˆå¯æ··æ·†ç­–ç•¥ï¼š</p>
<pre><code class="hljs">merged_sym.json
</code></pre>
<hr/>
<h2 data-id="heading-13"><strong>â‘£ Step 4ï¼šæ‰§è¡Œ Ipa Guard æ··æ·†ï¼ˆCI æ ¸å¿ƒæ­¥éª¤ï¼‰</strong></h2>
<pre><code class="hljs language-bash" lang="bash">ipaguard_cli protect app.ipa \
  -c merged_sym.json \
  --email team@company.com \
  --image \
  --js \
  -o protected.ipa
</code></pre>
<p>CI è‡ªåŠ¨å®Œæˆï¼š</p>
<p>Swift/ObjC æ–¹æ³•ã€ç±»åæ··æ·†
å˜é‡åæ··æ·†
å›¾ç‰‡ã€èµ„æºæ–‡ä»¶åæ‰°åŠ¨
JSON/JS/H5 è·¯å¾„ä¿®æ”¹
MD5 ä¿®æ”¹
ç”Ÿæˆæ˜ å°„è¡¨ï¼ˆç”¨äºå›æ»šä¸ç¬¦å·åŒ–ï¼‰</p>
<p>æ‰€æœ‰ç»“æœè‡ªåŠ¨å¤‡ä»½ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>â‘¤ Step 5ï¼šè‡ªåŠ¨é‡ç­¾å</strong></h2>
<pre><code class="hljs language-arduino" lang="arduino">kxsign sign <span class="hljs-keyword">protected</span>.ipa \
  -c cert.p12 \
  -p $CERT_PASSWORD \
  -m profile.mobileprovision \
  -z <span class="hljs-type">signed</span>.ipa
</code></pre>
<p>å¯è‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>Dev æµ‹è¯•åŒ…</li>
<li>Adhoc å†…æµ‹åŒ…</li>
<li>Release æå®¡åŒ…</li>
<li>æ¸ é“ä¸“å±ç­¾ååŒ…</li>
</ul>
<p>CI ä¸‹å‘å¯¹åº”æ–‡ä»¶å³å¯ã€‚</p>
<hr/>
<h2 data-id="heading-15"><strong>â‘¥ Step 6ï¼šè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆå¯é€‰ä½†å¼ºçƒˆå»ºè®®ï¼‰</strong></h2>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>XCTest å•å…ƒæµ‹è¯•</li>
<li>XCUITest UI è‡ªåŠ¨åŒ–</li>
<li>çœŸæœºè‡ªåŠ¨åŒ–è·‘ä¸€éä¸»æµç¨‹</li>
<li>æˆ–è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹çœŸæœºé›†ç¾¤ï¼ˆå¦‚å†…éƒ¨è®¾å¤‡å†œåœºï¼‰</li>
</ul>
<p>é‡ç‚¹éªŒè¯ï¼š</p>
<ul>
<li>æ··æ·†åæ˜¯å¦å´©æºƒ</li>
<li>JS/H5 é¡µé¢æ˜¯å¦æ­£å¸¸</li>
<li>Flutter/RN æ˜¯å¦æ­£å¸¸åŠ è½½</li>
<li>SDKï¼ˆç™»å½•/æ”¯ä»˜ï¼‰æ˜¯å¦æ­£å¸¸</li>
</ul>
<hr/>
<h2 data-id="heading-16"><strong>â‘¦ Step 7ï¼šè‡ªåŠ¨é€†å‘éªŒè¯ï¼ˆå¯è‡ªåŠ¨æ‰§è¡Œï¼‰</strong></h2>
<h3 data-id="heading-17">1. class-dump åº”è¯¥å®Œå…¨çœ‹ä¸æ‡‚</h3>
<h3 data-id="heading-18">2. Frida Hook åº”è¯¥éš¾ä»¥ç›´æ¥å®šä½æ–¹æ³•åç§°</h3>
<h3 data-id="heading-19">3. Hopper ä¸­ç¬¦å·åº”è¯¥å…¨ä¹±ç </h3>
<p>è„šæœ¬è‡ªåŠ¨æ¯”å¯¹æ˜¯å¦å­˜åœ¨å¯è¯»ç¬¦å·ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">class</span>-dump <span class="hljs-type">signed</span>.ipa | grep <span class="hljs-string">"Controller"</span>
</code></pre>
<p>è‹¥è¾“å‡ºä¸ä¸ºç©º â†’ é˜»æ–­å‘å¸ƒ</p>
<hr/>
<h2 data-id="heading-20"><strong>â‘§ Step 8ï¼šä¿å­˜æ˜ å°„è¡¨ã€å®¡è®¡æ•°æ®</strong></h2>
<p>CI è‡ªåŠ¨å°†ï¼š</p>
<ul>
<li>æ˜ å°„è¡¨</li>
<li>sym.json</li>
<li>merged_sym.json</li>
<li>ipa äº§ç‰©</li>
<li>æ„å»ºå·ã€Git æäº¤</li>
<li>æ—¶é—´æˆ³ã€æ“ä½œæ—¥å¿—</li>
</ul>
<p>å½’æ¡£è‡³ï¼š</p>
<ul>
<li>å†…éƒ¨å¯¹è±¡å­˜å‚¨ï¼ˆS3ã€OSSã€COSï¼‰</li>
<li>KMS åŠ å¯†æœºåˆ¶</li>
<li>å†…éƒ¨ç¬¦å·åŒ–æœåŠ¡ï¼ˆSentry/Buglyï¼‰</li>
</ul>
<p>å®ç°å®Œæ•´å¯è¿½è¸ªæ²»ç†ä½“ç³»ã€‚</p>
<hr/>
<h2 data-id="heading-21"><strong>â‘¨ Step 9ï¼šè‡ªåŠ¨åˆ†å‘ / ä¸Šä¼ å®¡æ ¸</strong></h2>
<p>é€šè¿‡ Fastlaneï¼š</p>
<pre><code class="hljs">fastlane deliver
</code></pre>
<p>æˆ–å†…éƒ¨åˆ†å‘å¹³å°ï¼š</p>
<ul>
<li>è’²å…¬è‹±</li>
<li>è‡ªå»ºåˆ†å‘</li>
<li>Jenkins Artifacts</li>
</ul>
<p>ä»æ­¤ iOS åŠ å›ºæˆä¸ºæµæ°´çº¿è‡ªåŠ¨çš„ä¸€ç¯ã€‚</p>
<hr/>
<h2 data-id="heading-22">å››ã€Ipa Guard é›†æˆ CI/CD çš„æœ€ç»ˆæ•ˆæœ</h2>
<p>å½“è¿™å¥—æµç¨‹è·‘é€šåï¼Œä½ ä¼šè·å¾—ï¼š</p>
<h3 data-id="heading-23">è‡ªåŠ¨æ··æ·†</h3>
<h3 data-id="heading-24">è‡ªåŠ¨é‡ç­¾</h3>
<h3 data-id="heading-25">è‡ªåŠ¨æµ‹è¯•</h3>
<h3 data-id="heading-26">è‡ªåŠ¨å®¡è®¡</h3>
<h3 data-id="heading-27">è‡ªåŠ¨é€†å‘æ£€æµ‹</h3>
<h3 data-id="heading-28">è‡ªåŠ¨åˆ†å‘</h3>
<h3 data-id="heading-29">ç»“æ„æ¸…æ™°ã€å¯å›æ»š</h3>
<h3 data-id="heading-30">æœ‰æ˜ å°„è¡¨å¯ç¬¦å·åŒ–</h3>
<p>æ•´ä¸ª iOS åŠ å›ºä¸å†ä¾é äººå·¥ï¼Œè€Œæ˜¯ï¼š</p>
<p><strong>è‡ªåŠ¨åŒ–ã€å¯é‡å¤ã€å¯å®¡è®¡ã€å¯æ²»ç†ã€‚</strong></p>
<p>è¿™æ‰æ˜¯ç°ä»£ç§»åŠ¨å›¢é˜Ÿåº”è¯¥è¾¾åˆ°çš„å®‰å…¨æ°´å¹³ã€‚</p>
<hr/>
<h2 data-id="heading-31">äº”ã€æ€»ç»“ï¼šIpa Guard ä¸ CI/CD çš„ç»“åˆï¼Œæ˜¯å·¥ç¨‹ä½“ç³»å‡çº§çš„å…³é”®</h2>
<p>æœ€ç»ˆæ¨èç»„åˆå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-32"><strong>åˆ†æå±‚</strong></h3>
<p>MobSFã€class-dump</p>
<h3 data-id="heading-33"><strong>åŠ å›ºå±‚ï¼ˆæ ¸å¿ƒï¼‰</strong></h3>
<p>Ipa Guard CLI</p>
<ul>
<li>IPA æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>åŠ å›ºç­–ç•¥æ§åˆ¶</li>
</ul>
<h3 data-id="heading-34"><strong>éªŒè¯å±‚</strong></h3>
<p>kxsignã€Fridaã€Hopperã€è‡ªåŠ¨åŒ–æµ‹è¯•</p>
<h3 data-id="heading-35"><strong>æ²»ç†å±‚</strong></h3>
<p>KMSã€Sentry/Buglyã€GitLab/Jenkins å½’æ¡£</p>
<h3 data-id="heading-36"><strong>åˆ†å‘å±‚</strong></h3>
<p>Fastlaneã€Jenkinsã€å†…éƒ¨å¹³å°</p>
<p>é€šè¿‡è¿™å¥—é“¾è·¯ï¼ŒiOS åŠ å›ºæ‰èƒ½â€œå·¥ç¨‹åŒ–â€ï¼Œè€Œä¸æ˜¯â€œæ‰‹å·¥åŒ–â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£]]></title>    <link>https://juejin.cn/post/7577042851080880171</link>    <guid>https://juejin.cn/post/7577042851080880171</guid>    <pubDate>2025-11-27T09:14:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577042851080880171" data-draft-id="7576994308274307091" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-27T09:14:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Axios è¯·æ±‚å–æ¶ˆæœºåˆ¶è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:14:51.000Z" title="Thu Nov 27 2025 09:14:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Axiosæ˜¯å¦çœŸçš„æ”¯æŒå–æ¶ˆè¯·æ±‚å‘¢</h2>
<p>æ˜¯çš„ï¼Œ<strong>Axios å®Œå…¨æ”¯æŒå–æ¶ˆè¯·æ±‚</strong>ã€‚</p>
<p>Axios æä¾›äº†ä¸¤ç§ä¸»è¦çš„å–æ¶ˆè¯·æ±‚çš„æ–¹å¼ï¼š</p>
<ol>
<li><strong>ä½¿ç”¨Â <code>AbortController</code>Â (æ¨èï¼Œç°ä»£æµè§ˆå™¨å’Œ Node.js ç¯å¢ƒ)</strong></li>
<li><strong>ä½¿ç”¨Â <code>CancelToken</code>Â (æ—§ç‰ˆæ–¹å¼ï¼ŒAxios 0.22.0 ä¹‹å‰çš„ä¸»è¦æ–¹å¼ï¼Œç°åœ¨å·²åºŸå¼ƒä½†ä»å…¼å®¹)</strong></li>
</ol>
<hr/>
<h3 data-id="heading-1">1. ä½¿ç”¨Â <code>AbortController</code>Â (æ¨è)</h3>
<p><code>AbortController</code>Â æ˜¯ Web æ ‡å‡† APIï¼Œç”¨äºä¸­æ­¢ä¸€ä¸ªæˆ–å¤šä¸ª Web è¯·æ±‚ã€‚Axios ä» v0.22.0 å¼€å§‹æ”¯æŒå®ƒï¼Œå¹¶æ¨èä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª AbortController å®ä¾‹</span>
<span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
<span class="hljs-keyword">const</span> signal = controller.<span class="hljs-property">signal</span>; <span class="hljs-comment">// è·å– AbortSignal å¯¹è±¡</span>

<span class="hljs-comment">// 2. åœ¨ Axios è¯·æ±‚é…ç½®ä¸­ä¼ å…¥ signal</span>
axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>, { signal })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ:'</span>, response.<span class="hljs-property">data</span>);
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯æ˜¯å¦æ˜¯ç”±äºè¯·æ±‚å–æ¶ˆå¼•èµ·çš„</span>
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å‘ç”Ÿé”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);
    }
  });

<span class="hljs-comment">// 3. åœ¨éœ€è¦å–æ¶ˆè¯·æ±‚æ—¶è°ƒç”¨ controller.abort()</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæˆ–è€…ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®æ—¶</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  controller.<span class="hljs-title function_">abort</span>(); <span class="hljs-comment">// è¿™ä¼šè§¦å‘ signal ä¸Šçš„ abort äº‹ä»¶ï¼ŒAxios ä¼šæ•è·å¹¶å–æ¶ˆè¯·æ±‚</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å°è¯•å–æ¶ˆ'</span>);
}, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100ms åå–æ¶ˆè¯·æ±‚</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>æ˜¯ Web æ ‡å‡† APIï¼Œä¸ä»…é™äº Axiosï¼Œä¹Ÿå¯ä»¥ç”¨äºÂ <code>fetch</code>Â API æˆ–å…¶ä»–æ”¯æŒÂ <code>AbortSignal</code>Â çš„å¼‚æ­¥æ“ä½œã€‚</li>
<li>æ›´ç°ä»£ã€æ›´ç®€æ´çš„ API è®¾è®¡ã€‚</li>
<li>å¯ä»¥å–æ¶ˆå¤šä¸ªè¯·æ±‚ï¼ˆå°†åŒä¸€ä¸ªÂ <code>signal</code>Â ä¼ é€’ç»™å¤šä¸ªè¯·æ±‚ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">2. ä½¿ç”¨Â <code>CancelToken</code>Â (æ—§ç‰ˆï¼Œå·²åºŸå¼ƒä½†ä»å…¼å®¹)</h3>
<p><code>CancelToken</code>Â æ˜¯ Axios æ—©æœŸæä¾›çš„å–æ¶ˆè¯·æ±‚æœºåˆ¶ã€‚è™½ç„¶ç°åœ¨æ¨èä½¿ç”¨Â <code>AbortController</code>ï¼Œä½†å¦‚æœä½ åœ¨ä½¿ç”¨æ—§ç‰ˆæœ¬çš„ Axios æˆ–è€…éœ€è¦å…¼å®¹æ—§ä»£ç ï¼Œå®ƒä»ç„¶å¯ç”¨ã€‚</p>
<p><strong>ç¤ºä¾‹ä»£ç ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ª CancelToken.Source å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CancelToken</span> = axios.<span class="hljs-property">CancelToken</span>;
<span class="hljs-keyword">const</span> source = <span class="hljs-title class_">CancelToken</span>.<span class="hljs-title function_">source</span>(); <span class="hljs-comment">// source å¯¹è±¡åŒ…å« token å’Œ cancel æ–¹æ³•</span>

<span class="hljs-comment">// 2. åœ¨ Axios è¯·æ±‚é…ç½®ä¸­ä¼ å…¥ token</span>
axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/data'</span>, { <span class="hljs-attr">cancelToken</span>: source.<span class="hljs-property">token</span> })
  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚æˆåŠŸ:'</span>, response.<span class="hljs-property">data</span>);
  })
  .<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> {
    <span class="hljs-comment">// æ£€æŸ¥é”™è¯¯æ˜¯å¦æ˜¯ç”±äºè¯·æ±‚å–æ¶ˆå¼•èµ·çš„</span>
    <span class="hljs-keyword">if</span> (axios.<span class="hljs-title function_">isCancel</span>(error)) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚è¢«å–æ¶ˆ:'</span>, error.<span class="hljs-property">message</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å‘ç”Ÿé”™è¯¯:'</span>, error.<span class="hljs-property">message</span>);
    }
  });

<span class="hljs-comment">// 3. åœ¨éœ€è¦å–æ¶ˆè¯·æ±‚æ—¶è°ƒç”¨ source.cancel()</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œæˆ–è€…ç”¨æˆ·ç‚¹å‡»äº†å–æ¶ˆæŒ‰é’®æ—¶</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  source.<span class="hljs-title function_">cancel</span>(<span class="hljs-string">'ç”¨æˆ·å–æ¶ˆäº†è¯·æ±‚'</span>); <span class="hljs-comment">// ä¼ å…¥ä¸€ä¸ªå¯é€‰çš„æ¶ˆæ¯</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è¯·æ±‚å·²å°è¯•å–æ¶ˆ'</span>);
}, <span class="hljs-number">100</span>); <span class="hljs-comment">// 100ms åå–æ¶ˆè¯·æ±‚</span>
</code></pre>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<ul>
<li>åœ¨æ—§ç‰ˆæœ¬ Axios ä¸­å¹¿æ³›ä½¿ç”¨ã€‚</li>
</ul>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>Axios ç‰¹æœ‰çš„ APIï¼Œä¸é€‚ç”¨äºå…¶ä»– Web APIã€‚</li>
<li>å·²è¢«Â <code>AbortController</code>Â æ›¿ä»£ï¼Œæœªæ¥å¯èƒ½ä¸å†ç»´æŠ¤æˆ–æ¨èã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">ä½•æ—¶éœ€è¦å–æ¶ˆè¯·æ±‚ï¼Ÿ</h3>
<p>å–æ¶ˆè¯·æ±‚åœ¨å‰ç«¯å¼€å‘ä¸­éå¸¸æœ‰ç”¨ï¼Œå¸¸è§åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç»„ä»¶å¸è½½æ—¶</strong>ï¼šå½“ç”¨æˆ·åœ¨è¯·æ±‚å®Œæˆå‰åˆ‡æ¢é¡µé¢æˆ–ç»„ä»¶è¢«é”€æ¯æ—¶ï¼Œé¿å…å› è¯·æ±‚è¿”å›åå°è¯•æ›´æ–°å·²ä¸å­˜åœ¨çš„ç»„ä»¶çŠ¶æ€è€Œå¯¼è‡´çš„å†…å­˜æ³„æ¼æˆ–é”™è¯¯ã€‚</li>
<li><strong>ç”¨æˆ·æ“ä½œå–æ¶ˆ</strong>ï¼šä¾‹å¦‚ï¼Œç”¨æˆ·ç‚¹å‡»äº†â€œå–æ¶ˆä¸Šä¼ â€æŒ‰é’®ï¼Œæˆ–åœ¨æœç´¢æ¡†ä¸­å¿«é€Ÿè¾“å…¥æ—¶ï¼Œå–æ¶ˆä¹‹å‰çš„æ—§æœç´¢è¯·æ±‚ï¼Œåªä¿ç•™æœ€æ–°çš„è¯·æ±‚ã€‚</li>
<li><strong>é¿å…é‡å¤è¯·æ±‚</strong>ï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸ºäº†é˜²æ­¢ç”¨æˆ·å¤šæ¬¡ç‚¹å‡»æˆ–å¿«é€Ÿè§¦å‘æŸä¸ªæ“ä½œå¯¼è‡´å‘é€å¤šä¸ªç›¸åŒçš„è¯·æ±‚ï¼Œå¯ä»¥åœ¨æ–°è¯·æ±‚å‘å‡ºå‰å–æ¶ˆæ—§è¯·æ±‚ã€‚</li>
</ol>
<p>æ€»ä¹‹ï¼ŒAxios æä¾›äº†å¼ºå¤§ä¸”çµæ´»çš„è¯·æ±‚å–æ¶ˆæœºåˆ¶ï¼Œæ¨èåœ¨ç°ä»£é¡¹ç›®ä¸­ä½¿ç”¨Â <code>AbortController</code>ã€‚</p>
<h2 data-id="heading-4">è¿™ç§å–æ¶ˆæ˜¯å‰ç«¯æ‹’ç»æ¥æ”¶æ•°æ®è¿˜æ˜¯çœŸçš„åœæ­¢httpçš„è¯·æ±‚é“¾æ¥å‘¢ï¼Ÿ</h2>
<h3 data-id="heading-5">1. å®ƒæ˜¯å¦‚ä½•â€œçœŸå–æ¶ˆâ€çš„ï¼Ÿï¼ˆæµè§ˆå™¨å±‚é¢ï¼‰</h3>
<p>å½“ä½ è°ƒç”¨Â <code>controller.abort()</code>ï¼ˆæˆ–æ—§ç‰ˆçš„Â <code>cancelToken</code>ï¼‰æ—¶ï¼ŒAxios ä¼šè°ƒç”¨æµè§ˆå™¨åº•å±‚çš„ APIï¼ˆ<code>XMLHttpRequest.abort()</code>Â æˆ–Â <code>fetch</code>Â çš„ signal æœºåˆ¶ï¼‰ã€‚</p>
<p>è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li><strong>ç½‘ç»œè¿æ¥è¢«åˆ‡æ–­</strong>ï¼šæµè§ˆå™¨ä¼šç«‹å³å…³é—­ä¸æœåŠ¡å™¨çš„ TCP è¿æ¥ã€‚</li>
<li><strong>åœæ­¢æ¥æ”¶æ•°æ®</strong>ï¼šå¦‚æœæœåŠ¡å™¨æ­£åœ¨å‘é€ä¸€ä¸ªå¾ˆå¤§çš„å“åº”ï¼ˆæ¯”å¦‚ä¸‹è½½ä¸€ä¸ª 100MB çš„æ–‡ä»¶ï¼‰ï¼Œæµè§ˆå™¨ä¼šç«‹åˆ»åœæ­¢ä¸‹è½½ï¼Œ<strong>èŠ‚çœå¸¦å®½</strong>ã€‚</li>
<li><strong>Promise ç«‹å³ Reject</strong>ï¼šAxios çš„ Promise ä¼šç«‹åˆ»æŠ›å‡ºä¸€ä¸ªÂ <code>CanceledError</code>ï¼Œä½ çš„ä»£ç ä¼šç«‹åˆ»è¿›å…¥Â <code>.catch()</code>ï¼Œè€Œä¸éœ€è¦ç­‰å¾…æœåŠ¡å™¨å“åº”è¶…æ—¶ã€‚</li>
</ul>
<p><strong>å¯¹æ¯”ï¼š</strong> Â å¦‚æœä»…ä»…æ˜¯â€œå‰ç«¯ä¸äºˆæ¥æ”¶â€ï¼Œæµè§ˆå™¨ä¼šå‚»å‚»åœ°æŠŠ 100MB ä¸‹è½½å®Œï¼Œç„¶åä½ çš„ä»£ç å†æŠŠæ•°æ®æ‰”æ‰ã€‚<strong>Axios çš„å–æ¶ˆæ˜¯å‰è€…ï¼Œç›´æ¥ææ–­è¿æ¥ï¼ŒèŠ‚çœèµ„æºã€‚</strong></p>
<hr/>
<h3 data-id="heading-6">2. æœåŠ¡å™¨ç«¯å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆåç«¯å±‚é¢ï¼‰</h3>
<p>è¿™æ˜¯æœ€å®¹æ˜“äº§ç”Ÿè¯¯è§£çš„åœ°æ–¹ã€‚ <strong>â€œå‰ç«¯å–æ¶ˆäº†è¯·æ±‚â€å¹¶ä¸ä»£è¡¨â€œåç«¯æ’¤é”€äº†æ“ä½œâ€ã€‚</strong></p>
<ul>
<li>
<p><strong>è¯·æ±‚å·²å‘å‡º</strong>ï¼šåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå½“ä½ ç‚¹å‡»å–æ¶ˆæ—¶ï¼Œè¯·æ±‚æŒ‡ä»¤å·²ç»é€šè¿‡ç½‘ç»œå‘é€åˆ°äº†æœåŠ¡å™¨ã€‚</p>
</li>
<li>
<p><strong>æœåŠ¡å™¨æ­£åœ¨å¤„ç†</strong>ï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚åï¼Œå¼€å§‹æŸ¥è¯¢æ•°æ®åº“ã€è®¡ç®—æ•°æ®æˆ–å†™å…¥è®°å½•ã€‚</p>
</li>
<li>
<p><strong>è¿æ¥ä¸­æ–­</strong>ï¼šæ­¤æ—¶å‰ç«¯æ–­å¼€äº†è¿æ¥ã€‚</p>
<ul>
<li><strong>å¤§å¤šæ•°åç«¯æ¡†æ¶ï¼ˆå¦‚ Java Spring, Node Express, Python Flaskï¼‰</strong> ï¼šé€šå¸¸<strong>ä¸ä¼š</strong>è‡ªåŠ¨æ£€æµ‹è¿æ¥æ–­å¼€è€Œåœæ­¢ä¸šåŠ¡é€»è¾‘ã€‚å®ƒä»¬ä¼šç»§ç»­æŠŠæ´»å¹²å®Œï¼ˆæ¯”å¦‚æŠŠæ•°æ®å†™è¿›æ•°æ®åº“ï¼‰ï¼Œç„¶åè¯•å›¾æŠŠç»“æœè¿”å›ç»™å‰ç«¯ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šå½“æœåŠ¡å™¨è¯•å›¾è¿”å›ç»“æœæ—¶ï¼Œå‘ç°è¿æ¥å·²ç»æ²¡äº†ï¼ŒæœåŠ¡å™¨ä¼šæŠ¥é”™ï¼ˆå¦‚Â <code>Broken pipe</code>ï¼‰ï¼Œä½†ä¹‹å‰çš„ä¸šåŠ¡é€»è¾‘ï¼ˆå¦‚å†™åº“ï¼‰å¯èƒ½å·²ç»æ‰§è¡Œäº†ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ä¸¾ä¸ªä¾‹å­ï¼š</strong><br/>
ä½ åœ¨é¤å…ç‚¹äº†ä¸€é“èœï¼ˆ<strong>å‘é€è¯·æ±‚</strong>ï¼‰ã€‚<br/>
å¨å¸ˆå¼€å§‹åšèœï¼ˆ<strong>æœåŠ¡å™¨å¤„ç†</strong>ï¼‰ã€‚<br/>
ä½ çªç„¶æœ‰æ€¥äº‹èµ°äº†ï¼Œè·ŸæœåŠ¡å‘˜è¯´â€œæˆ‘ä¸è¦äº†â€ï¼ˆ<strong>å‰ç«¯å–æ¶ˆè¯·æ±‚</strong>ï¼‰ã€‚</p>
<ul>
<li><strong>å‰ç«¯è§†è§’</strong>ï¼šä½ èµ°äº†ï¼Œæ²¡åƒåˆ°èœï¼Œä¹Ÿæ²¡ä»˜é’±ï¼ˆèŠ‚çœäº†æ—¶é—´å’Œèµ„æºï¼‰ã€‚</li>
<li><strong>åç«¯è§†è§’</strong>ï¼šå¨å¸ˆå¯èƒ½å·²ç»æŠŠèœåšå¥½äº†ï¼Œå‘ç°æ²¡äººåƒï¼Œåªèƒ½å€’æ‰ã€‚<strong>ä½†èœç¡®å®è¢«åšå‡ºæ¥äº†ï¼ˆå‰¯ä½œç”¨å·²äº§ç”Ÿï¼‰ã€‚</strong></li>
</ul>
<hr/>
<h3 data-id="heading-7">3. æ€»ç»“ï¼šä¸‰ç§æƒ…å†µ</h3>
<p>æ ¹æ®å–æ¶ˆçš„æ—¶æœºä¸åŒï¼Œæ•ˆæœä¹Ÿä¸åŒï¼š</p>
<ol>
<li>
<p><strong>è¯·æ±‚è¿˜åœ¨æ’é˜Ÿï¼ˆæå°‘è§ï¼‰</strong> ï¼š</p>
<ul>
<li>æµè§ˆå™¨è¿˜æ²¡æ¥å¾—åŠæŠŠè¯·æ±‚å‘å‡ºå»ä½ å°±å–æ¶ˆäº†ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šæœåŠ¡å™¨å®Œå…¨ä¸çŸ¥é“æœ‰è¿™å›äº‹ï¼Œè¿™æ˜¯æœ€å½»åº•çš„å–æ¶ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>è¯·æ±‚åœ¨ä¼ è¾“ä¸­/æœåŠ¡å™¨å¤„ç†ä¸­ï¼ˆæœ€å¸¸è§ï¼‰</strong> ï¼š</p>
<ul>
<li>è¯·æ±‚å·²å‘ï¼ŒæœåŠ¡å™¨æ­£åœ¨ç®—ï¼Œå‰ç«¯å–æ¶ˆã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šå‰ç«¯æ–­å¼€è¿æ¥ï¼Œä¸å†ç­‰å¾…ã€‚æœåŠ¡å™¨å¯èƒ½è¿˜æ˜¯ä¼šæŠŠæ´»å¹²å®Œï¼Œä½†å‘ä¸å›æ¥ã€‚<strong>è¿™å¯¹å‰ç«¯æ¥è¯´æ˜¯çœŸå–æ¶ˆï¼ˆä¸å¡ç•Œé¢ã€ä¸è´¹æµé‡ï¼‰ï¼Œå¯¹åç«¯æ¥è¯´é€šå¸¸æ— æ³•æ’¤é”€å‰¯ä½œç”¨ã€‚</strong></li>
</ul>
</li>
<li>
<p><strong>å“åº”å·²åˆ°è¾¾æµè§ˆå™¨</strong>ï¼š</p>
<ul>
<li>æœåŠ¡å™¨æ•°æ®å·²ç»å‘å›æ¥äº†ï¼Œæµè§ˆå™¨åˆšæ”¶åˆ°ï¼Œä½ æ­£å¥½ç‚¹äº†å–æ¶ˆã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šè¿™æ—¶å€™å…¶å®å·²ç»æ™šäº†ï¼ŒAxios åªæ˜¯æŠ›ä¸ªé”™è®©ä½ å¿½ç•¥ç»“æœã€‚è¿™å°±å˜æˆäº†ä½ è¯´çš„â€œå‰ç«¯ä¸äºˆæ¥æ”¶â€ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-8">æ ¸å¿ƒå»ºè®®</h3>
<ul>
<li><strong>ç”¨äºä¼˜åŒ–ä½“éªŒ</strong>ï¼šAxios çš„å–æ¶ˆéå¸¸é€‚åˆç”¨äº<strong>æœç´¢æ¡†è”æƒ³</strong>ï¼ˆè¾“å…¥Â <code>a</code>Â å‘è¯·æ±‚ï¼Œç´§æ¥ç€è¾“å…¥Â <code>ab</code>ï¼Œæ­¤æ—¶å–æ¶ˆÂ <code>a</code>Â çš„è¯·æ±‚ï¼‰æˆ–<strong>åˆ‡æ¢ Tab</strong>ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢â€œæ—§æ•°æ®çš„å“åº”è¦†ç›–äº†æ–°æ•°æ®â€çš„ Bugï¼Œå¹¶èŠ‚çœå¸¦å®½ã€‚</li>
<li><strong>ä¸è¦ä¾èµ–å®ƒæ¥å›æ»šæ•°æ®</strong>ï¼šå¦‚æœä½ å‘çš„æ˜¯Â <code>POST</code>Â è¯·æ±‚ï¼ˆæ¯”å¦‚â€œä»˜æ¬¾â€ï¼‰ï¼Œåƒä¸‡ä¸è¦æŒ‡æœ›å‰ç«¯å–æ¶ˆå°±èƒ½é˜»æ­¢æœåŠ¡å™¨æ‰£æ¬¾ã€‚åç«¯å¿…é¡»è¦æœ‰å¹‚ç­‰æ€§è®¾è®¡æˆ–ä¸“é—¨çš„æ’¤é”€æ¥å£ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ]]></title>    <link>https://juejin.cn/post/7577189654488989746</link>    <guid>https://juejin.cn/post/7577189654488989746</guid>    <pubDate>2025-11-27T09:13:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654488989746" data-draft-id="7576968345876283419" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ"/> <meta itemprop="keywords" content="Flutter,å®¢æˆ·ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:13:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è€åˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/662360127965769"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ï¼š3.35ç¨³å®šï¼Œ3.38å‘å¸ƒ | 2025å¹´11æœˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/662360127965769/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è€åˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:13:45.000Z" title="Thu Nov 27 2025 09:13:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å“ˆå–½ï¼Œæˆ‘æ˜¯è€åˆ˜</strong></p>
<p>è€åˆ˜åšFlutterå¼€å‘å·®ä¸å¤š7å¹´äº†ï¼ŒæœŸé—´å¦‚ä½•é€‰æ‹©Flutterç‰ˆæœ¬æ˜¯è¢«é—®å¾—æœ€å¤šçš„é—®é¢˜ä¹‹ä¸€ã€‚</p>
<p>æ‰€ä»¥è€åˆ˜æ–°å¼€äº†ä¸€ä¸ªç³»åˆ—æ–‡ç« ï¼Œæ¯ä¸ªæœˆéƒ½ä¼šæ·±åº¦åˆ†ææœ€è¿‘çš„å‡ ä¸ªFlutterç‰ˆæœ¬ã€‚</p>
<ul>
<li>æä¾›å…·ä½“çš„ç‰ˆæœ¬é€‰æ‹©å»ºè®®</li>
<li>åˆ†äº«çœŸå®çš„ç”Ÿäº§ç¯å¢ƒç»éªŒ</li>
<li>ç»™å‡ºè¯¦ç»†çš„å‡çº§å’Œå›æ»šç­–ç•¥</li>
</ul>
<p>è®©ä½ åœ¨ç‰ˆæœ¬é€‰æ‹©ä¸Šä¸å†çº ç»“ï¼Œä¸å†è¸©å‘ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€Flutterç‰ˆæœ¬é€‰æ‹©ç­–ç•¥</h2>
<p>å¯¹äºæŠ€æœ¯æ¡†æ¶å’Œç‰ˆæœ¬çš„é€‰æ‹©ï¼Œä¸åº”è¯¥æ˜¯ç›²ç›®çš„é€‰æ‹©æœ€æ–°ç‰ˆï¼Œæˆ–è€…æ— è„‘çœ‹ç½‘ä¸Šåˆ«äººæ€ä¹ˆæ¨èï¼Œè€Œæ˜¯åº”è¯¥æœ‰è‡ªå·±çš„åˆ†ææ–¹æ³•ã€‚</p>
<p>æœ€æ–°çš„ç‰ˆæœ¬å¤§æ¦‚ç‡è§£å†³äº†ä¹‹å‰ç‰ˆæœ¬ä¸­æ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œä¼˜åŒ–äº†æ€§èƒ½ï¼Œæ·»åŠ äº†æ–°ç‰¹æ€§ã€‚</p>
<p>ä½†æ˜¯æœ€æ–°ç‰ˆæœ‰å¾ˆæœ‰å¯èƒ½å¼•å…¥æ–°çš„bugæˆ–è€…ç¼ºé™·ã€‚</p>
<p>é‚£ä¹ˆä½œä¸ºå¼€å‘è€…è¯¥å¦‚ä½•æƒè¡¡è¿™ä¸¤è€…çš„åˆ©å¼Šå‘¢ï¼Ÿ</p>
<p><strong>ç¬¬ä¸€ä¸ªæ³•åˆ™ï¼š2ä¸ªæœˆè§‚å¯ŸæœŸï¼Œåˆ«å½“å°ç™½é¼ </strong></p>
<p>æ–°ç‰ˆæœ¬å‘å¸ƒåçš„å‰2ä¸ªæœˆï¼Œå°±æ˜¯ä¸€åœºå¤§å‹çœŸäººå®éªŒã€‚</p>
<p>å¤§éƒ¨åˆ†ä¸¥é‡çš„bugåœ¨å‘å¸ƒåçš„ä¸€åˆ°ä¸¤ä¸ªæœˆéƒ½èƒ½è¢«çˆ†å‡ºæ¥ã€‚</p>
<p>æ‰€ä»¥èªæ˜çš„åšæ³•æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ç­‰2ä¸ªæœˆï¼Œçœ‹ç¤¾åŒºåé¦ˆï¼Œçœ‹bugåˆ—è¡¨ã€‚å¦‚æœè¿™æ®µæ—¶é—´æ²¡æœ‰ä»€ä¹ˆæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼Œé‚£ä¹ˆå¤§æ¦‚ç‡å°±æ˜¯æ¯”è¾ƒå®‰å…¨çš„ã€‚</p>
<p>ä¹Ÿå¯ä»¥çœ‹è€åˆ˜æ¯ä¸ªæœˆå‘å¸ƒçš„ã€ŠFlutterç‰ˆæœ¬é€‰æ‹©æŒ‡å—ã€‹ã€‚</p>
<p>è¿™å°±åƒä¹°è‚¡ç¥¨ä¸€æ ·ï¼Œä¸è¦è¿½é«˜ï¼Œè¦ç­‰è¿›å…¥ä½ä¼°åŒºé—´ã€‚</p>
<p><strong>ç¬¬äºŒä¸ªæ³•åˆ™ï¼šåˆ†ç¯å¢ƒæµ‹è¯•ï¼Œåˆ«ä¸€ä¸Šæ¥å°±all in</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/069712e44df847c2b90613ce4f1892c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=Wt%2BEWnIMdRIGP%2BqQor82AwplVoY%3D" alt="" loading="lazy"/></p>
<p><strong>å¼€å‘ç¯å¢ƒ â†’ æµ‹è¯•ç¯å¢ƒ â†’ ç”Ÿäº§ç¯å¢ƒ</strong></p>
<p>å¼€å‘ç¯å¢ƒç”¨æœ€æ–°ç‰ˆï¼Œè¸©å‘æˆ‘è®¤äº†ï¼Œåæ­£å½±å“ä¸äº†ç”¨æˆ·ã€‚</p>
<p>æµ‹è¯•ç¯å¢ƒç”¨ç»è¿‡å¼€å‘ç¯å¢ƒæ£€éªŒçš„ç‰ˆæœ¬ï¼Œå……åˆ†æµ‹è¯•ï¼Œè®°å½•é—®é¢˜ã€‚</p>
<p>ç”Ÿäº§ç¯å¢ƒç”¨ç¨³å®šç‰ˆï¼Œç”¨æˆ·è‡³ä¸Šï¼Œç¨³å®šå‹å€’ä¸€åˆ‡ã€‚</p>
<p>å‡çº§å‰é¢„ç•™è¶³å¤Ÿçš„æ—¶é—´çª—å£ï¼Œæ¯”å¦‚åœ¨å½“å‰å·²ç»å‘å¸ƒçš„ç‰ˆæœ¬ä¸Šåªå‡çº§Flutterç‰ˆæœ¬ï¼Œç„¶åå¿«é€Ÿå‘å¸ƒä¸€ä¸ªå°ç‰ˆæœ¬ã€‚</p>
<p>å¦‚æœå‘ç°é—®é¢˜å¯ä»¥å°½å¿«å›æ»šã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€Flutteræœ€è¿‘5ä¸ªç‰ˆæœ¬æ·±åº¦è§£æ</h2>
<h3 data-id="heading-2">1. ç‰ˆæœ¬åˆ—è¡¨</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/982928cab4c54c32982500ec2a44f651~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=c%2FykUfoOuFEtgx2urT4mSNiYU70%3D" alt="" loading="lazy"/></p>
<ol>
<li><strong>Flutter 3.38</strong> (æœ€æ–°) - 2025å¹´11æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.35</strong> - 2025å¹´8æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.32</strong> - 2025å¹´5æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.29</strong> - 2025å¹´2æœˆå‘å¸ƒ</li>
<li><strong>Flutter 3.27</strong> - 2024å¹´12æœˆå‘å¸ƒ</li>
</ol>
<h3 data-id="heading-3">2. å„ç‰ˆæœ¬é—®é¢˜åˆ†æä¸é£é™©è¯„ä¼°</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/feabfc3b870d4ad89cb56e5063093a86~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=SFsswHzu7MiIX%2FrTiNOT%2BVLOYRo%3D" alt="" loading="lazy"/></p>
<p><strong>Flutter 3.38 - åˆšå‘å¸ƒï¼Œè¿›å…¥è§‚å¯ŸæœŸ</strong></p>
<ul>
<li><strong>å·¥å…·é“¾å‡çº§</strong>ï¼šiOS å¼•å…¥ UIScene ç”Ÿå‘½å‘¨æœŸæ”¯æŒï¼Œæ—§å·¥ç¨‹éœ€æŒ‰æŒ‡å—è¿ç§»ï¼›Android é»˜è®¤ NDK å‡è‡³ r28ï¼Œæ»¡è¶³ Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹è¦æ±‚ã€‚</li>
<li><strong>æ¸²æŸ“ä¸æ€§èƒ½</strong>ï¼šWebä¸ç§»åŠ¨ç«¯æœ‰ä¼˜åŒ–ï¼Œå»ºè®®ç”¨çœŸæœºä¸çº¿ä¸Šæ•°æ®åšå¯¹æ¯”ã€‚</li>
<li><strong>ç”Ÿæ€é€‚é…</strong>ï¼šç¬¬ä¸‰æ–¹æ’ä»¶ä¸åº“é€šå¸¸éœ€è¦1â€“3å‘¨å®Œæˆé€‚é…ã€‚</li>
<li><strong>å»ºè®®</strong>ï¼šå»ºè®®ç­‰å¾…ä¸‰æ–¹åº“é€‚é…ï¼ŒåŒæ—¶è§‚å¯Ÿç¤¾ç¾¤åé¦ˆ</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šæ­¤ç‰ˆæœ¬æ”¯æŒäº†iOSç«¯çš„UISceneç”Ÿå‘½å‘¨æœŸè¿ç§»å’ŒAndroidç«¯çš„Google Play 16 KB é¡µé¢å¤§å°å…¼å®¹ï¼Œå› æ­¤å»ºè®®å¼€å‘è€…ä¿æŒå…³æ³¨ï¼Œæ—¶æœºæˆç†Ÿåå°½æ—©è¿›è¡Œé€‚é…ã€‚</p>
</blockquote>
<p><strong>Flutter 3.35 - å½“å‰æ¨èç‰ˆæœ¬</strong></p>
<ul>
<li><strong>ç¨³å®šæ€§æå‡</strong>ï¼šä¿®å¤äº†å‰æœŸç‰ˆæœ¬çš„ä¸»è¦é—®é¢˜</li>
<li><strong>æ–°åŠŸèƒ½</strong>ï¼šWebç«¯çƒ­é‡è½½ã€Widgeté¢„è§ˆç­‰åŠŸèƒ½é€æ­¥å®Œå–„</li>
<li><strong>ç¤¾åŒºè¯„ä»·</strong>ï¼šç¨³å®šç‰ˆæœ¬ï¼Œæ¨èå„ç§é¡¹ç›®ä½¿ç”¨</li>
</ul>
<p><strong>Flutter 3.32 - æ¸²æŸ“å¼•æ“è°ƒæ•´æœŸ</strong></p>
<ul>
<li><strong>æ¸²æŸ“åç«¯è°ƒæ•´</strong>ï¼šä»Vulkanå›é€€åˆ°OpenGLESï¼Œæ€§èƒ½æœ‰æ‰€å½±å“</li>
<li><strong>è®¾å¤‡å…¼å®¹æ€§</strong>ï¼šéƒ¨åˆ†è€æ—§è®¾å¤‡æ”¯æŒæœ‰é™</li>
<li><strong>è¿‡æ¸¡æœŸå»ºè®®</strong>ï¼šç­‰å¾…åç»­ç‰ˆæœ¬ç¨³å®šæ€§æå‡</li>
</ul>
<p><strong>Flutter 3.29 - å¯åŠ¨å’Œå†…å­˜ç®¡ç†éœ€å…³æ³¨</strong></p>
<ul>
<li><strong>åº”ç”¨å¯åŠ¨é—®é¢˜</strong>ï¼šéƒ¨åˆ†å¼€å‘è€…åé¦ˆå¯åŠ¨é˜¶æ®µå­˜åœ¨å´©æºƒç°è±¡</li>
<li><strong>å†…å­˜ç®¡ç†ä¼˜åŒ–</strong>ï¼šç›¸æ¯”æ—©æœŸç‰ˆæœ¬æœ‰æ‰€æ”¹è¿›ï¼Œä½†éœ€æŒç»­è§‚å¯Ÿ</li>
<li><strong>å»ºè®®</strong>ï¼šç”Ÿäº§ç¯å¢ƒå‡çº§å‰éœ€å……åˆ†æµ‹è¯•</li>
</ul>
<p><strong>Flutter 3.27 - é«˜é£é™©ç‰ˆæœ¬ï¼Œéœ€è°¨æ…è¯„ä¼°</strong></p>
<ul>
<li><strong>Impelleræ¸²æŸ“å¼•æ“ç¨³å®šæ€§é—®é¢˜</strong>ï¼šæ–°æ¸²æŸ“å¼•æ“åœ¨éƒ¨åˆ†è®¾å¤‡ä¸Šå­˜åœ¨é—®é¢˜
<ul>
<li>éƒ¨åˆ†Androidè®¾å¤‡å‡ºç°èŠ±å±ã€é»‘å±ç°è±¡ï¼Œå½±å“ç”¨æˆ·ä½“éªŒ</li>
<li>å¼€å‘ç¯å¢ƒæ¨¡æ‹Ÿå™¨æ€§èƒ½ä¸‹é™ï¼Œå½±å“å¼€å‘æ•ˆç‡</li>
<li>å¯é€šè¿‡ <code>--no-enable-impeller</code> å‚æ•°ç¦ç”¨æ–°æ¸²æŸ“å¼•æ“</li>
</ul>
</li>
<li><strong>ç¤¾åŒºåé¦ˆ</strong>ï¼šRedditç­‰å¹³å°æœ‰ç”¨æˆ·æŠ¥å‘Šè“å±å’Œå†»ç»“é—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-4">ä¸‰ã€ä¸åŒåœºæ™¯çš„ç‰ˆæœ¬é€‰æ‹©ç­–ç•¥</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9eca95582b2f4ff39eaa0d7e7cbaa185~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg56iL5bqP5ZGY6ICB5YiY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839625&amp;x-signature=3SROAOvuBn%2F%2FONUqcG3GcSLnrjw%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-5"><strong>ç”Ÿäº§ç¯å¢ƒï¼ˆæ±‚ç¨³ä¸æ±‚æ–°ï¼‰</strong></h4>
<ul>
<li><strong>é¦–é€‰</strong>ï¼šFlutter 3.35 - æ–°åŠŸèƒ½ä¸ç¨³å®šæ€§çš„å¹³è¡¡ç‚¹</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼šFlutter 3.38 - åˆšå‘å¸ƒï¼Œæš‚ä¸å»ºè®®ç›´æ¥ä¸Šç”Ÿäº§</li>
</ul>
<p><strong>ç†ç”±</strong>ï¼šç”¨æˆ·ä½“éªŒ &gt; å¼€å‘ä½“éªŒï¼Œç¨³å®šå‹å€’ä¸€åˆ‡</p>
<p><strong>3.35ç‰ˆæœ¬ç»è¿‡ä¸¤ä¸ªæœˆéªŒè¯æ²¡ä»€ä¹ˆå¤§é—®é¢˜ï¼Œ10æœˆä»½æå‡ä¸ºé¦–é€‰</strong></p>
<ul>
<li>å¦‚æœå¯¹ç¨³å®šæ€§æ²¡æœ‰æç«¯è¦æ±‚çš„Appå¯ä»¥è€ƒè™‘å‡çº§3.35ã€‚</li>
<li>å¦‚æœå¯¹ç¨³å®šæ€§è¦æ±‚å¾ˆé«˜ï¼Œå»ºè®®å†è§‚å¯Ÿä¸€ä¸ªæœˆã€‚</li>
</ul>
<h4 data-id="heading-6"><strong>å¼€å‘ç¯å¢ƒï¼ˆå¯ä»¥æ¿€è¿›ä¸€ç‚¹ï¼‰</strong></h4>
<ul>
<li><strong>æ¨è</strong>ï¼šFlutter 3.35 - ä½“éªŒæœ€æ–°åŠŸèƒ½ï¼Œå½“å‰æœ€ç¨³å®šçš„ç‰ˆæœ¬</li>
<li><strong>æ³¨æ„</strong>ï¼šéšæ—¶å‡†å¤‡å›æ»šï¼Œä¸è¦åœ¨deadlineå‰å‡çº§</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼š3.38ç‰ˆæœ¬å‘å¸ƒæ—¶é—´å¤ªçŸ­ï¼Œä¸‰æ–¹åº“é€‚é…ä¸å¤Ÿå……åˆ†ï¼Œæš‚æ—¶ä¸å»ºè®®è¿›å…¥å¼€å‘ç¯å¢ƒ</li>
</ul>
<h4 data-id="heading-7"><strong>æ–°é¡¹ç›®å¯åŠ¨</strong></h4>
<ul>
<li><strong>æœ€ä½³é€‰æ‹©</strong>ï¼šFlutter 3.35</li>
<li><strong>ä¼˜åŠ¿</strong>ï¼šé•¿æœŸæ”¯æŒã€ç¤¾åŒºæ´»è·ƒã€bugä¿®å¤åŠæ—¶</li>
<li><strong>è§‚å¯ŸæœŸ</strong>ï¼š3.38ç‰ˆæœ¬å‘å¸ƒæ—¶é—´å¤ªçŸ­ï¼Œä¸‰æ–¹åº“é€‚é…ä¸å¤Ÿå……åˆ†ï¼Œæš‚æ—¶ä¸å»ºè®®è¿›å…¥å¼€å‘ç¯å¢ƒ</li>
</ul>
<h3 data-id="heading-8">âš ï¸ <strong>éœ€è°¨æ…ä½¿ç”¨çš„ç‰ˆæœ¬</strong></h3>
<ul>
<li><strong>Flutter 3.38</strong>ï¼šåˆšå‘å¸ƒï¼Œå»ºè®®å…ˆåœ¨å¼€å‘ç¯å¢ƒéªŒè¯ï¼Œç­‰å¾…ç¤¾åŒºåé¦ˆ</li>
<li><strong>Flutter 3.32</strong>ï¼šæ¸²æŸ“å¼•æ“è°ƒæ•´æœŸï¼Œæ€§èƒ½æœ‰æ‰€å½±å“</li>
<li><strong>Flutter 3.29</strong>ï¼šå»ºè®®å……åˆ†æµ‹è¯•åå†ç”¨äºç”Ÿäº§ç¯å¢ƒ</li>
<li><strong>Flutter 3.27</strong>ï¼šImpelleræ¸²æŸ“å¼•æ“åœ¨éƒ¨åˆ†è®¾å¤‡ä¸Šå­˜åœ¨ç¨³å®šæ€§é—®é¢˜</li>
</ul>
<hr/>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>å½“å‰çš„ç°çŠ¶æ˜¯ï¼šå¤§å‚éƒ½åœ¨ç”¨"è¿‡æ—¶"ç‰ˆæœ¬ï¼Œè€Œå°å…¬å¸å´åœ¨è¿½æœ€æ–°ã€‚</p>
<p>åœ¨å®¢æˆ·ç«¯é¡¹ç›®ä¸­ï¼ŒåŸºç¡€æ¡†æ¶çš„ç‰ˆæœ¬é€‰æ‹©æ ¸å¿ƒåŸåˆ™æ˜¯ä¸è¦è¿½æ–°ï¼Œç•™ä¸¤ä¸ªæœˆå†·é™æœŸã€‚</p>
<p>"åœ¨è¿™ä¸ªå¿«é€Ÿè¿­ä»£çš„æ—¶ä»£ï¼Œæ‡‚å¾—æ…¢ä¸‹æ¥é€‰æ‹©ç¨³å®šç‰ˆæœ¬çš„å¼€å‘è€…ï¼Œæ‰æ˜¯çœŸæ­£çš„é«˜æ‰‹ã€‚"</p>
<blockquote>
<p>å¦‚æœçœ‹åˆ°è¿™é‡Œçš„åŒå­¦å¯¹å®¢æˆ·ç«¯æˆ–è€…Flutterå¼€å‘æ„Ÿå…´è¶£ï¼Œæ¬¢è¿è”ç³»è€åˆ˜ï¼Œæˆ‘ä»¬äº’ç›¸å­¦ä¹ ã€‚</p>
<p>ç§ä¿¡å…è´¹é¢†è€åˆ˜æ•´ç†çš„ã€ŠFlutterå¼€å‘æ‰‹å†Œã€‹ï¼Œè¦†ç›–90%åº”ç”¨å¼€å‘åœºæ™¯ã€‚</p>
<p>å¯ä»¥ä½œä¸ºFlutterå­¦ä¹ çš„çŸ¥è¯†åœ°å›¾ã€‚</p>
<p>â€”â€” laoliu_dev</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜]]></title>    <link>https://juejin.cn/post/7577050643203375154</link>    <guid>https://juejin.cn/post/7577050643203375154</guid>    <pubDate>2025-11-27T09:06:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577050643203375154" data-draft-id="7577031454586273819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜"/> <meta itemprop="keywords" content="åç«¯,åˆ†å¸ƒå¼"/> <meta itemprop="datePublished" content="2025-11-27T09:06:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¯å¤©è¿›æ­¥ä¸€ç‚¹_JL"/> <meta itemprop="url" content="https://juejin.cn/user/1161549994267080"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1161549994267080/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¯å¤©è¿›æ­¥ä¸€ç‚¹_JL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:06:06.000Z" title="Thu Nov 27 2025 09:06:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">äº‹åŠ¡ä¸æ¶ˆæ¯ä¸­é—´ä»¶ï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¯è§æ€§è¾¹ç•Œé—®é¢˜</h2>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜çš„æœ¬è´¨ï¼šæ—¶ç©ºé”™ä½çš„ä¸€è‡´æ€§å›°å¢ƒ</h3>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæˆ‘ä»¬å¸¸é‡åˆ°è¿™æ ·çš„åœºæ™¯ï¼šä¸€ä¸ªä¸šåŠ¡æ–¹æ³•æ—¢è¦ä¿®æ”¹æ•°æ®åº“çŠ¶æ€ï¼Œåˆè¦å‘é€æ¶ˆæ¯åˆ°MQè§¦å‘ä¸‹æ¸¸æœåŠ¡ã€‚è¡¨é¢çœ‹ï¼Œè¿™åªæ˜¯ç®€å•çš„"å†™DB+å‘æ¶ˆæ¯"ï¼Œä½†ç»†ç©¶å…¶æ‰§è¡Œæ—¶åºï¼Œéšè—ç€ä¸€ä¸ªè‡´å‘½é™·é˜±ã€æœ¬æ–‡ä»¥@Transactionalä¸ºä¾‹ã€‘ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
    userRepository.<span class="hljs-title function_">save</span>(user); <span class="hljs-comment">// 1. æ•°æ®åº“æ“ä½œ</span>
    mqProducer.<span class="hljs-title function_">sendUserCreatedEvent</span>(user.<span class="hljs-title function_">getId</span>()); <span class="hljs-comment">// 2. å‘é€MQæ¶ˆæ¯</span>
    ......
}
</code></pre>
<p><strong>é—®é¢˜æ ¸å¿ƒ</strong>ï¼šå½“äº‹åŠ¡å°šæœªæäº¤æ—¶ï¼ŒMQæ¶ˆæ¯å·²è¢«å‘å‡ºã€‚ä¸‹æ¸¸æ¶ˆè´¹è€…ç«‹å³å¤„ç†è¯¥æ¶ˆæ¯ï¼Œå°è¯•æŸ¥è¯¢åˆšåˆšåˆ›å»ºçš„ç”¨æˆ·æ•°æ®ï¼Œå´å› <strong>äº‹åŠ¡å°šæœªæäº¤</strong>è€ŒæŸ¥è¯¢ä¸åˆ°ï¼Œå¯¼è‡´ä¸šåŠ¡å¤±è´¥ã€‚</p>
<p>è¿™ä¸æ˜¯ç®€å•çš„ä»£ç bugï¼Œè€Œæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­<strong>æ—¶ç©ºé”™ä½</strong>çš„å…¸å‹è¡¨ç°â€”â€”äº‹åŠ¡è¾¹ç•Œä¸æ¶ˆæ¯ä¼ é€’åœ¨æ—¶é—´ç»´åº¦ä¸Šä¸åŒæ­¥ï¼Œé€ æˆæ•°æ®å¯è§æ€§ä¸ä¸€è‡´ã€‚æ­£å¦‚ç‰©ç†å­¦ä¸­çš„ç›¸å¯¹è®ºï¼Œä¸åŒå‚ç…§ç³»ï¼ˆæœåŠ¡ï¼‰å¯¹"ç°åœ¨"çš„å®šä¹‰å¹¶ä¸ç›¸åŒã€‚</p>
<h4 data-id="heading-2">1.1 äº‹åŠ¡æäº¤æ—¶æœºçš„è¿·æ€</h4>
<p>Springçš„<code>@Transactional</code>èƒŒåè¿ä½œæœºåˆ¶å¸¸è¢«è¯¯è§£ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/212bc1a115e94599bf4fe23bd04a1767~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5q-P5aSp6L-b5q2l5LiA54K5X0pM:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839166&amp;x-signature=2Q913JqQTWr59DU6UfyIMr8SynE%3D" alt="image.png" loading="lazy"/></p>
<p>å…³é”®æ´å¯Ÿï¼š<strong>äº‹åŠ¡æäº¤å‘ç”Ÿåœ¨æ–¹æ³•æ‰§è¡Œç»“æŸä¹‹å</strong>ï¼Œè€Œéæ•°æ®åº“æ“ä½œä¹‹åã€‚å½“<code>mqProducer.send()</code>æ‰§è¡Œæ—¶ï¼Œäº‹åŠ¡å°šæœªæäº¤ï¼Œæ•°æ®å¯¹å…¶ä»–è¿æ¥ä¸å¯è§ã€‚</p>
<h3 data-id="heading-3">äºŒã€å¦‚ä½•è¯†åˆ«è¿™ç§åœºæ™¯ï¼Ÿ</h3>
<p>åœ¨ä»£ç å®¡æŸ¥ä¸­ï¼Œè­¦æƒ•åŒæ—¶å‡ºç°çš„ä»¥ä¸‹æ¨¡å¼ï¼š</p>
<ul>
<li><code>@Transactional</code>æ³¨è§£çš„æ–¹æ³•å†…ç›´æ¥è°ƒç”¨MQå‘é€</li>
<li>äº‹åŠ¡æ–¹æ³•å†…è°ƒç”¨å¼‚æ­¥æ–¹æ³•(<code>@Async</code>)</li>
<li>äº‹åŠ¡æ–¹æ³•å†…è§¦å‘è¿œç¨‹æœåŠ¡è°ƒç”¨</li>
<li>äº‹åŠ¡æ–¹æ³•ä¸­æ“ä½œç¼“å­˜(å¦‚Redis)</li>
</ul>
<h3 data-id="heading-4">ä¸‰ã€è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-5">3.1 äº‹åŠ¡åŒæ­¥æœºåˆ¶ï¼šè®©æ¶ˆæ¯åœ¨æäº¤åå‘é€</h4>
<p>åˆ©ç”¨Springçš„<code>TransactionSynchronizationManager</code>æ³¨å†Œå›è°ƒï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeUserService</span> {
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
        userRepository.<span class="hljs-title function_">save</span>(user);
        
        <span class="hljs-comment">// æ³¨å†Œäº‹åŠ¡æäº¤åçš„å›è°ƒ</span>
        <span class="hljs-title class_">TransactionSynchronizationManager</span>.<span class="hljs-title function_">registerSynchronization</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionSynchronization</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">afterCommit</span>(<span class="hljs-params"/>) {
                    mqProducer.<span class="hljs-title function_">sendUserCreatedEvent</span>(user.<span class="hljs-title function_">getId</span>());
                }
            }
        );
    }
}
</code></pre>
<h4 data-id="heading-6">3.2 äº‹åŠ¡æ¶ˆæ¯è¡¨ï¼šæœ¬åœ°äº‹åŠ¡ä¸æ¶ˆæ¯çš„åŸå­æ€§</h4>
<p>å°†æ¶ˆæ¯ä½œä¸ºä¸šåŠ¡æ•°æ®çš„ä¸€éƒ¨åˆ†ï¼Œå†™å…¥åŒä¸€äº‹åŠ¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">User user</span>) {
    userRepository.<span class="hljs-title function_">save</span>(user);
    <span class="hljs-comment">// åŒä¸€äº‹åŠ¡ä¸­ä¿å­˜æ¶ˆæ¯</span>
    messageRepository.<span class="hljs-title function_">save</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutboxMessage</span>(<span class="hljs-string">"user.created"</span>, user.<span class="hljs-title function_">getId</span>()));
}

<span class="hljs-comment">// ç‹¬ç«‹çš„å®šæ—¶ä»»åŠ¡/ç›‘å¬å™¨</span>
<span class="hljs-meta">@Scheduled</span>(fixedDelay = <span class="hljs-number">1000</span>)
<span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">sendPendingMessages</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">OutboxMessage</span>&gt; messages = messageRepository.<span class="hljs-title function_">findPending</span>(<span class="hljs-number">100</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-title class_">OutboxMessage</span> message : messages) {
        <span class="hljs-keyword">if</span> (mqProducer.<span class="hljs-title function_">send</span>(message)) {
            message.<span class="hljs-title function_">setSent</span>(<span class="hljs-literal">true</span>);
        }
    }
}
</code></pre>
<p>ä¼˜åŠ¿ï¼šæœ¬åœ°äº‹åŠ¡ä¿è¯æ•°æ®ä¸æ¶ˆæ¯çš„ä¸€è‡´æ€§ï¼›</p>
<p>åŠ£åŠ¿ï¼šå¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦ï¼Œéœ€è¦å¤„ç†æ¶ˆæ¯è¡¨æ¸…ç†ã€é‡å¤å‘é€ç­‰é—®é¢˜ã€‚</p>
<h4 data-id="heading-7">3.3 äº‹ä»¶æº¯æºï¼šé‡æ„æ•°æ®ä¸äº‹ä»¶çš„å…³ç³»</h4>
<p>å°†äº‹ä»¶æœ¬èº«ä½œä¸ºé¦–è¦æ•°æ®å­˜å‚¨ï¼Œè€Œéå‰¯äº§å“ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">@Transactional
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">createUser</span>(<span class="hljs-params">User user</span>)</span> {
    <span class="hljs-comment">// åˆ›å»ºé¢†åŸŸäº‹ä»¶(æŒä¹…åŒ–)</span>
    UserCreatedEvent <span class="hljs-keyword">event</span> = <span class="hljs-keyword">new</span> UserCreatedEvent(user);
    eventRepository.save(<span class="hljs-keyword">event</span>);
    
    <span class="hljs-comment">// ä¸šåŠ¡æ•°æ®ä»äº‹ä»¶ä¸­æ´¾ç”Ÿ</span>
    userRepository.save(user);
}

<span class="hljs-comment">// äº‹ä»¶å¤„ç†å™¨(ç‹¬ç«‹äº‹åŠ¡)</span>
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">handleUserCreated</span>(<span class="hljs-params">UserCreatedEvent <span class="hljs-keyword">event</span></span>)</span> {
    mqProducer.send(<span class="hljs-keyword">event</span>);
}
</code></pre>
<p>è¿™ç§æ¨¡å¼å°†äº‹ä»¶æå‡ä¸ºä¸€ç­‰å…¬æ°‘ï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†æ—¶åºé—®é¢˜ï¼Œä½†éœ€è¦å¯¹é¢†åŸŸæ¨¡å‹è¿›è¡Œé‡æ„ã€‚</p>
<h3 data-id="heading-8">å››ã€æ¶æ„å±‚é¢çš„æ€è€ƒ</h3>
<h4 data-id="heading-9">4.1 æœ€ç»ˆä¸€è‡´æ€§ vs å¼ºä¸€è‡´æ€§</h4>
<p>è®¤è¯†åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¼ºä¸€è‡´æ€§çš„é«˜æ˜‚ä»£ä»·ï¼Œå¤§å¤šæ•°ä¸šåŠ¡åœºæ™¯å¯æ¥å—<strong>æœ€ç»ˆä¸€è‡´æ€§</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">public void handleUserCreatedEvent(String userId) {
    User <span class="hljs-attr">user</span> = null<span class="hljs-comment">;</span>
    int <span class="hljs-attr">retryCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
    // é‡è¯•æœºåˆ¶ï¼Œç­‰å¾…æ•°æ®å¯è§
    while (<span class="hljs-attr">user</span> == null &amp;&amp; retryCount &lt; <span class="hljs-number">5</span>) {
        <span class="hljs-attr">user</span> = userRepository.findById(userId).orElse(null)<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">user</span> == null) {
            Thread.sleep(100 * (long)Math.pow(2, retryCount))<span class="hljs-comment">; // æŒ‡æ•°é€€é¿</span>
            retryCount++<span class="hljs-comment">;</span>
        }
    }
    
    if (<span class="hljs-attr">user</span> == null) {
        // é‡è¯•å¤±è´¥ï¼Œè¿›å…¥æ­»ä¿¡é˜Ÿåˆ—æˆ–äººå·¥å¹²é¢„
        deadLetterService.handleUnresolvedEvent(userId)<span class="hljs-comment">;</span>
        return<span class="hljs-comment">;</span>
    }
    
    // æ­£å¸¸å¤„ç†
    processUser(user)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-10">4.2 äº‹åŠ¡è¾¹ç•Œè®¾è®¡åŸåˆ™</h4>
<ul>
<li><strong>å•ä¸€èŒè´£åŸåˆ™</strong>ï¼šäº‹åŠ¡æ–¹æ³•åº”åªè´Ÿè´£æ•°æ®ä¸€è‡´æ€§ï¼Œä¸æ··æ‚å¤–éƒ¨é€šä¿¡</li>
<li><strong>æœ€å°äº‹åŠ¡åŸåˆ™</strong>ï¼šäº‹åŠ¡èŒƒå›´åº”å½“å°½å¯èƒ½å°ï¼ŒåªåŒ…å«å¿…è¦çš„æ•°æ®åº“æ“ä½œ</li>
<li><strong>åˆ†å±‚æ˜ç¡®åŸåˆ™</strong>ï¼šå°†äº‹åŠ¡æ§åˆ¶ã€ä¸šåŠ¡é€»è¾‘ã€é›†æˆé€šä¿¡åˆ†å±‚å®ç°</li>
</ul>

<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼˜åŒ–åçš„åˆ†å±‚è®¾è®¡</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> TransactionalEventPublisher eventPublisher;
    
    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createUser</span><span class="hljs-params">(CreateUserCommand command)</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(command.getName(), command.getEmail());
        userRepository.save(user);
        
        <span class="hljs-comment">// ä»…å‘å¸ƒé¢†åŸŸäº‹ä»¶ï¼Œä¸å…³å¿ƒä¼ è¾“ç»†èŠ‚</span>
        eventPublisher.publishAfterCommit(<span class="hljs-keyword">new</span> <span class="hljs-title class_">UserCreatedEvent</span>(user.getId()));
    }
}

<span class="hljs-meta">@Component</span>
<span class="hljs-meta">@RequiredArgsConstructor</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">UserEventConsumer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UserRepository userRepository;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> EmailService emailService;
    
    <span class="hljs-meta">@TransactionalEventListener</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onUserCreated</span><span class="hljs-params">(UserCreatedEvent event)</span> {
        <span class="hljs-comment">// ä¿è¯åœ¨äº‹åŠ¡æäº¤åå¤„ç†</span>
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userRepository.findById(event.getUserId())
            .orElseThrow(() -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">EntityNotFoundException</span>(<span class="hljs-string">"User not found after TX commit"</span>));
        
        emailService.sendWelcomeEmail(user);
    }
}
</code></pre>
<h3 data-id="heading-11">äº”ã€è§„é¿</h3>
<p>å½“åœ¨äº‹åŠ¡æ–¹æ³•ä¸­æ¶‰åŠå¼‚æ­¥æ“ä½œæ—¶ï¼Œé—®è‡ªå·±ï¼š</p>
<ol>
<li><strong>æ—¶åºéªŒè¯</strong>ï¼šæˆ‘çš„MQæ¶ˆè´¹è€…æ˜¯å¦ä¾èµ–æ­¤äº‹åŠ¡ä¸­åˆ›å»º/ä¿®æ”¹çš„æ•°æ®ï¼Ÿ</li>
<li><strong>è¾¹ç•Œè¯†åˆ«</strong>ï¼šäº‹åŠ¡è¾¹ç•Œæ˜¯å¦æ°å¥½åŒ…è£¹äº†æ‰€æœ‰æ•°æ®æ“ä½œï¼Œä¸åŒ…å«é€šä¿¡é€»è¾‘ï¼Ÿ</li>
<li><strong>å›æ»šè€ƒé‡</strong>ï¼šè‹¥äº‹åŠ¡å›æ»šï¼Œå·²å‘é€çš„MQæ¶ˆæ¯å¦‚ä½•å¤„ç†ï¼Ÿ(è¡¥å¿æœºåˆ¶)</li>
<li><strong>é‡è¯•è®¾è®¡</strong>ï¼šæ¶ˆè´¹è€…æ˜¯å¦å…·å¤‡å¹‚ç­‰æ€§å’Œé‡è¯•èƒ½åŠ›ï¼Œåº”å¯¹çŸ­æš‚ä¸ä¸€è‡´ï¼Ÿ</li>
<li><strong>ç›‘æ§è¦†ç›–</strong>ï¼šæ˜¯å¦æœ‰ç›‘æ§èƒ½æ£€æµ‹åˆ°"æ¶ˆæ¯å…ˆäºæ•°æ®åˆ°è¾¾"çš„å¼‚å¸¸æƒ…å†µï¼Ÿ</li>
</ol>
<p>äº‹åŠ¡ä¸MQçš„åè°ƒé—®é¢˜ï¼Œæœ¬è´¨æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­æ—¶ç©ºå…³ç³»çš„æ˜ å°„ã€‚</p>
<p>é¿å…æ­¤é—®é¢˜ä¸åœ¨äºä½¿ç”¨æ›´å¤æ‚çš„æ¡†æ¶ï¼Œè€Œåœ¨äº<strong>æ·±åˆ»ç†è§£äº‹åŠ¡è¾¹ç•Œ</strong>ã€<strong>æ˜ç¡®ç³»ç»Ÿç»„ä»¶é—´çš„æ—¶åºä¾èµ–</strong>ï¼Œä»¥åŠ<strong>è®¾è®¡ç¬¦åˆç‰©ç†è§„å¾‹çš„æ¶æ„</strong>ã€‚</p>
<p>å½“ä½ ä¸‹æ¬¡åœ¨äº‹åŠ¡æ–¹æ³•ä¸­ç¼–å†™MQå‘é€ä»£ç æ—¶ï¼Œä¸å¦¨æš‚åœç‰‡åˆ»ï¼Œæ€è€ƒï¼šæ­¤åˆ»ï¼Œæˆ‘çš„æ•°æ®çš„ç¡®åˆ‡ä½ç½®æ˜¯ä»€ä¹ˆï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–]]></title>    <link>https://juejin.cn/post/7577189654488842290</link>    <guid>https://juejin.cn/post/7577189654488842290</guid>    <pubDate>2025-11-27T08:47:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654488842290" data-draft-id="7577189654488645682" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T08:47:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Drift_Dream"/> <meta itemprop="url" content="https://juejin.cn/user/3107677514241500"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3107677514241500/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Drift_Dream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:47:03.000Z" title="Thu Nov 27 2025 08:47:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ResizeObserverï¼šè½»æ¾ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–</h2>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ResizeObserverï¼Ÿ</h3>
<p>åœ¨å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦çŸ¥é“ä¸€ä¸ªå…ƒç´ çš„å°ºå¯¸æ˜¯å¦å‘ç”Ÿäº†å˜åŒ–ã€‚è¿‡å»ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ç›‘å¬windowçš„resizeäº‹ä»¶ï¼Œä½†è¿™åªèƒ½ç›‘å¬æµè§ˆå™¨çª—å£çš„å˜åŒ–ï¼Œæ— æ³•ç›‘å¬å…·ä½“å…ƒç´ çš„å˜åŒ–ã€‚ResizeObserveråº”è¿è€Œç”Ÿï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬ç›‘å¬ä»»æ„å…ƒç´ çš„å¤§å°å˜åŒ–ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼ŒResizeObserverå°±åƒæ˜¯ä¸€ä¸ª"å°ºå¯¸ç›‘è§†å™¨"ï¼Œå½“è¢«è§‚å¯Ÿçš„å…ƒç´ å°ºå¯¸å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä¼šç«‹å³é€šçŸ¥æˆ‘ä»¬ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦ResizeObserverï¼Ÿ</h3>
<p>åœ¨ResizeObserverå‡ºç°ä¹‹å‰ï¼Œæˆ‘ä»¬æƒ³è¦ç›‘å¬å…ƒç´ å°ºå¯¸å˜åŒ–é€šå¸¸æœ‰ä»¥ä¸‹å‡ ç§æ–¹æ³•ï¼š</p>
<ol>
<li><strong>window.resizeäº‹ä»¶</strong>ï¼šåªèƒ½ç›‘å¬çª—å£å˜åŒ–ï¼Œä¸èƒ½ç›‘å¬å…·ä½“å…ƒç´ </li>
<li><strong>è½®è¯¢æ£€æŸ¥</strong>ï¼šé€šè¿‡å®šæ—¶å™¨ä¸æ–­æ£€æŸ¥å…ƒç´ å°ºå¯¸ï¼Œæ€§èƒ½å·®</li>
<li><strong>MutationObserver</strong>ï¼šå¯ä»¥ç›‘å¬DOMå˜åŒ–ï¼Œä½†æ— æ³•ç›´æ¥ç›‘å¬å°ºå¯¸å˜åŒ–</li>
</ol>
<p>è¿™äº›æ–¹æ³•è¦ä¹ˆåŠŸèƒ½æœ‰é™ï¼Œè¦ä¹ˆæ€§èƒ½ä¸ä½³ã€‚ResizeObserverä¸“é—¨ä¸ºè§£å†³è¿™ä¸ªé—®é¢˜è€Œç”Ÿï¼Œå®ƒæä¾›äº†é«˜æ•ˆã€ç²¾å‡†çš„å…ƒç´ å°ºå¯¸ç›‘å¬èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-3">åŸºæœ¬ä½¿ç”¨æ–¹æ³•</h3>
<h4 data-id="heading-4">åˆ›å»ºResizeObserver</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºResizeObserverå®ä¾‹</span>
<span class="hljs-keyword">const</span> resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-comment">// entry.targetï¼šè¢«è§‚å¯Ÿçš„å…ƒç´ </span>
    <span class="hljs-comment">// entry.contentRectï¼šå…ƒç´ çš„å°ºå¯¸ä¿¡æ¯</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å°ºå¯¸å‘ç”Ÿå˜åŒ–:'</span>, entry.<span class="hljs-property">contentRect</span>);
  }
});
</code></pre>
<h4 data-id="heading-5">è§‚å¯Ÿå…ƒç´ </h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myElement'</span>);
resizeObserver.<span class="hljs-title function_">observe</span>(element);
</code></pre>
<h4 data-id="heading-6">åœæ­¢è§‚å¯Ÿ</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœæ­¢è§‚å¯Ÿç‰¹å®šå…ƒç´ </span>
resizeObserver.<span class="hljs-title function_">unobserve</span>(element);

<span class="hljs-comment">// åœæ­¢æ‰€æœ‰è§‚å¯Ÿå¹¶é”€æ¯å®ä¾‹</span>
resizeObserver.<span class="hljs-title function_">disconnect</span>();
</code></pre>
<h3 data-id="heading-7">å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>ResizeObserver<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-selector-class">.box</span> {
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">gap</span>: <span class="hljs-number">20px</span>;
    }
    <span class="hljs-selector-class">.resizeable</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">resize</span>: both;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">overflow</span>: auto;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">align-items</span>: center;
      <span class="hljs-attribute">justify-content</span>: center;
    }
    <span class="hljs-selector-class">.resizeable1</span> {
      <span class="hljs-attribute">background-color</span>: aquamarine;
    }
    <span class="hljs-selector-class">.resizeable2</span> {
      <span class="hljs-attribute">background-color</span>: blueviolet;
    }
    <span class="hljs-selector-class">.log</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">300px</span>;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">resize</span>: both;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">display</span>: flex;
      <span class="hljs-attribute">flex-direction</span>: column;
      <span class="hljs-attribute">justify-content</span>: space-around;
      <span class="hljs-attribute">align-items</span>: center;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizeable resizeable1"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"resizeable1"</span>&gt;</span>box1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizeable resizeable2"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"resizeable2"</span>&gt;</span>box2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"log"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text1"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text2"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> textNode1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".text1"</span>);
    <span class="hljs-keyword">const</span> textNode2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".text2"</span>);

    <span class="hljs-keyword">const</span> resizeNode1 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#resizeable1"</span>);
    <span class="hljs-keyword">const</span> resizeNode2 = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#resizeable2"</span>);

    <span class="hljs-keyword">const</span> nodeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(entry);
        <span class="hljs-keyword">const</span> { width, height } = entry.<span class="hljs-property">contentRect</span>;
        <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">target</span>.<span class="hljs-property">id</span> === <span class="hljs-string">"resizeable1"</span>) {
          textNode1.<span class="hljs-property">textContent</span> = <span class="hljs-string">`box1å½“å‰å°ºå¯¸ï¼š<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
            width
          )}</span> * <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(height)}</span> åƒç´ `</span>;
        } <span class="hljs-keyword">else</span> {
          textNode2.<span class="hljs-property">textContent</span> = <span class="hljs-string">`box2å½“å‰å°ºå¯¸ï¼š<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(
            width
          )}</span> * <span class="hljs-subst">${<span class="hljs-built_in">Math</span>.round(height)}</span> åƒç´ `</span>;
        }
      }
    });
    nodeObserver.<span class="hljs-title function_">observe</span>(resizeNode1);
    nodeObserver.<span class="hljs-title function_">observe</span>(resizeNode2);
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>

</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/12b3ca003d764be99aab9eb28c9d639a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838022&amp;x-signature=sofh2PB60pDRxQWbUIPTaXkLfxI%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-8">åœ¨Vue 3ä¸­çš„ä½¿ç”¨å®è·µ</h3>
<h4 data-id="heading-9">ç»„åˆå¼APIç”¨æ³•</h4>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-observer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"resizableElement"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizable-box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ResizeObserver ç®€å•ç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å®½åº¦: {{ width }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰é«˜åº¦: {{ height }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">const</span> resizableElement = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">const</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
<span class="hljs-keyword">let</span> <span class="hljs-attr">resizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
        width.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
        height.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>;
      }
    });

    resizeObserver.<span class="hljs-title function_">observe</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizeObserver) {
    resizeObserver.<span class="hljs-title function_">disconnect</span>();
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.resizable-box</span> {
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: auto;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-10">è‡ªå®šä¹‰Hookå°è£…</h4>
<p>ä¸ºäº†æ›´å¥½åœ°å¤ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°†ResizeObserverå°è£…æˆè‡ªå®šä¹‰Hookï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { onUnmounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useResizeObserver</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> width = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">const</span> height = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
  <span class="hljs-keyword">let</span> <span class="hljs-attr">resizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">observe</span> = (<span class="hljs-params">el: HTMLElement</span>) =&gt; {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
    resizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> entry <span class="hljs-keyword">of</span> entries) {
        width.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
        height.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">height</span>;
      }
    });
    resizeObserver.<span class="hljs-title function_">observe</span>(el);
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">unobserve</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
  };
  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (resizeObserver) {
      resizeObserver.<span class="hljs-title function_">disconnect</span>();
    }
  });
  <span class="hljs-keyword">return</span> {
    width,
    height,
    observe,
    unobserve,
  };
}

</code></pre>
<p>ä½¿ç”¨è‡ªå®šä¹‰Hook</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-observer"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"resizableElement"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resizable-box"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä½¿ç”¨é’©å­å‡½æ•°å®ç°çš„ ResizeObserver<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰å®½åº¦: {{ width }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å½“å‰é«˜åº¦: {{ height }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { onMounted, onUnmounted, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { useResizeObserver } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hook/useResizeObserver.ts"</span>;

<span class="hljs-keyword">const</span> { width, height, observe, unobserve } = <span class="hljs-title function_">useResizeObserver</span>();

<span class="hljs-keyword">const</span> resizableElement = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">observe</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (resizableElement.<span class="hljs-property">value</span>) {
    <span class="hljs-title function_">unobserve</span>(resizableElement.<span class="hljs-property">value</span>);
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.resizable-box</span> {
  <span class="hljs-attribute">resize</span>: both;
  <span class="hljs-attribute">overflow</span>: auto;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e0e0e0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">200px</span>;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">background-color</span>: aquamarine;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-11">Vue 3ä¸­ResizeObserverçš„å®é™…åº”ç”¨ï¼šå¯è°ƒæ•´å¸ƒå±€çš„ç®¡ç†åå°</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"demo-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- å¯è°ƒæ•´å®½åº¦çš„ä¾§è¾¹æ  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"sidebarRef"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span>
      <span class="hljs-attr">:style</span>=<span class="hljs-string">"{ width: sidebarWidth + 'px' }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar-content"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¯¼èˆªèœå•<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">a</span>
            <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in menuItems"</span>
            <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>
            <span class="hljs-attr">class</span>=<span class="hljs-string">"nav-item"</span>
            <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ active: activeMenu === item.id }"</span>
            @<span class="hljs-attr">click</span>=<span class="hljs-string">"activeMenu = item.id"</span>
          &gt;</span>
            {{ item.name }}
          <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- æ‹–æ‹½æŠŠæ‰‹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"resize-handle"</span> @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"startResize"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"mainRef"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-content"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content-header"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"toggleSidebar"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"toggle-btn"</span>&gt;</span>
          {{ isSidebarCollapsed ? "å±•å¼€ä¾§è¾¹æ " : "æŠ˜å ä¾§è¾¹æ " }}
        <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»è¦å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ˜¾ç¤ºå½“å‰å°ºå¯¸ä¿¡æ¯ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"size-info"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¾§è¾¹æ å®½åº¦: {{ sidebarWidth }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>ä¸»å†…å®¹åŒºåŸŸå®½åº¦: {{ mainContentWidth }}px<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-comment">//  ä¾§è¾¹æ çŠ¶æ€</span>
<span class="hljs-keyword">const</span> sidebarWidth = <span class="hljs-title function_">ref</span>(<span class="hljs-number">280</span>);
<span class="hljs-keyword">const</span> isSidebarCollapsed = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> activeMenu = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"dashboard"</span>);

<span class="hljs-comment">// å…ƒç´ å¼•ç”¨</span>
<span class="hljs-keyword">const</span> sidebarRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> mainRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

<span class="hljs-comment">// å°ºå¯¸æ•°æ®</span>
<span class="hljs-keyword">const</span> mainContentWidth = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);

<span class="hljs-comment">// èœå•æ•°æ®</span>
<span class="hljs-keyword">const</span> menuItems = [
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"dashboard"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ä»ªè¡¨ç›˜"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"users"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ç”¨æˆ·ç®¡ç†"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"orders"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"è®¢å•ç®¡ç†"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-string">"settings"</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">"ç³»ç»Ÿè®¾ç½®"</span> },
];

<span class="hljs-comment">// ç›‘å¬ä¸»å†…å®¹åŒºåŸŸå®½åº¦å˜åŒ–</span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">mainResizeObserver</span>: <span class="hljs-title class_">ResizeObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// ç›‘å¬ä¸»å†…å®¹åŒºåŸŸå®½åº¦</span>
  mainResizeObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ResizeObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> entry <span class="hljs-keyword">of</span> entries) {
      mainContentWidth.<span class="hljs-property">value</span> = entry.<span class="hljs-property">contentRect</span>.<span class="hljs-property">width</span>;
    }
  });

  <span class="hljs-keyword">if</span> (mainRef.<span class="hljs-property">value</span>) {
    mainResizeObserver.<span class="hljs-title function_">observe</span>(mainRef.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-comment">// åˆ‡æ¢ä¾§è¾¹æ æ˜¾ç¤º/éšè—</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">toggleSidebar</span> = (<span class="hljs-params"/>) =&gt; {
  isSidebarCollapsed.<span class="hljs-property">value</span> = !isSidebarCollapsed.<span class="hljs-property">value</span>;
  sidebarWidth.<span class="hljs-property">value</span> = isSidebarCollapsed.<span class="hljs-property">value</span> ? <span class="hljs-number">0</span> : <span class="hljs-number">280</span>;
};

<span class="hljs-comment">// å¼€å§‹è°ƒæ•´ä¾§è¾¹æ å®½åº¦</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">startResize</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-keyword">const</span> startX = e.<span class="hljs-property">clientX</span>;
  <span class="hljs-keyword">const</span> startWidth = sidebarWidth.<span class="hljs-property">value</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseMove</span> = (<span class="hljs-params">e: MouseEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> newWidth = startWidth + (e.<span class="hljs-property">clientX</span> - startX);
    <span class="hljs-comment">// é™åˆ¶æœ€å°å’Œæœ€å¤§å®½åº¦</span>
    <span class="hljs-keyword">if</span> (newWidth &gt;= <span class="hljs-number">200</span> &amp;&amp; newWidth &lt;= <span class="hljs-number">500</span>) {
      sidebarWidth.<span class="hljs-property">value</span> = newWidth;
      isSidebarCollapsed.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleMouseUp</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mousemove"</span>, handleMouseMove);
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
  };

  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mousemove"</span>, handleMouseMove);
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"mouseup"</span>, handleMouseUp);
};

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (mainResizeObserver) {
    mainResizeObserver.<span class="hljs-title function_">disconnect</span>();
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.demo-container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
}

<span class="hljs-selector-class">.sidebar</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2c3e50</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span> ease;
  <span class="hljs-attribute">min-width</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.sidebar-content</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.sidebar</span> <span class="hljs-selector-tag">h3</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#34495e</span>;
  <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">10px</span>;
}

<span class="hljs-selector-class">.nav-item</span> {
  <span class="hljs-attribute">display</span>: block;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#34495e</span>;
}

<span class="hljs-selector-class">.nav-item</span><span class="hljs-selector-class">.active</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.resize-handle</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#34495e</span>;
  <span class="hljs-attribute">cursor</span>: col-resize;
  <span class="hljs-attribute">transition</span>: background <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.resize-handle</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
}

<span class="hljs-selector-class">.main-content</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ecf0f1</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
}

<span class="hljs-selector-class">.content-header</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">15px</span>;
}

<span class="hljs-selector-class">.toggle-btn</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#3498db</span>;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.toggle-btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#2980b9</span>;
}

<span class="hljs-selector-class">.size-info</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
}

<span class="hljs-selector-class">.chart-container</span>,
<span class="hljs-selector-class">.table-container</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">4px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€]]></title>    <link>https://juejin.cn/post/7577016562252873779</link>    <guid>https://juejin.cn/post/7577016562252873779</guid>    <pubDate>2025-11-27T08:47:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252873779" data-draft-id="7576953459544916022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€"/> <meta itemprop="keywords" content="Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T08:47:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="jason_yang"/> <meta itemprop="url" content="https://juejin.cn/user/2972704795802653"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            vue3ä¸­createAppå¤šä¸ªå®ä¾‹å…±äº«çŠ¶æ€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2972704795802653/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    jason_yang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:47:28.000Z" title="Thu Nov 27 2025 08:47:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1.èƒŒæ™¯</h2>
<p>åœ¨ Vue 3 å¼€å‘ä¸­ï¼Œé€šå¸¸ä¸€ä¸ªåº”ç”¨åªéœ€è¦è°ƒç”¨ä¸€æ¬¡ <code>createApp()</code> åˆ›å»ºä¸€ä¸ªæ ¹åº”ç”¨å®ä¾‹ã€‚ä½†åœ¨æŸäº›ç‰¹å®šåœºæ™¯ä¸‹ï¼Œç¡®å®éœ€è¦åˆ›å»ºå¤šä¸ª Vue åº”ç”¨å®ä¾‹ï¼ˆå³å¤šæ¬¡è°ƒç”¨ <code>createApp</code>ï¼‰ã€‚è¿™äº›åœºæ™¯ä¸»è¦åŒ…æ‹¬ï¼š</p>
<h2 data-id="heading-1">2.åœºæ™¯</h2>
<h3 data-id="heading-2">1.åŠ¨æ€ç”Ÿæˆhtml</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
æ¯”å¦‚åœ¨ä½¿ç”¨googleåœ°å›¾çš„æ—¶å€™ï¼Œç‚¹å‡»å¼¹æ¡†ä½¿ç”¨ä¼ å…¥ä¸€ä¸ªhtmlå¼¹æ¡†å†…å®¹è¯¦æƒ…å†…å®¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96752d0b501d4d1d88e1c6604a7a50ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamFzb25feWFuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839137&amp;x-signature=NK%2FKgzo6IZCklM4TVPIw848jaE8%3D" alt="image.png" loading="lazy"/>
ä¸Šé¢å°±æ˜¯è°·æ­Œç‚¹å‡»æ—¶å€™æä¾›çš„å¼¹æ¡†å†…å®¹ï¼Œä½¿ç”¨<code>InfoWindow.open</code>è§¦å‘å¼¹æ¡†ï¼Œã€‚<code>infoWindow.setContent</code>æ’å…¥è‡ªå·±è¦æ˜¾ç¤ºçš„è¯¦æƒ…å†…å®¹ã€‚</p>
<p>è€åŠæ³•æ˜¯ç›´æ¥jquery æ’å„ç§domæ“ä½œã€‚ä½†ç°åœ¨éƒ½ç»„ä»¶åŒ–äº†å¦‚æœèƒ½å¤ç”¨ç°æœ‰çš„æ¶æ„å’Œæ ·å¼æ˜¯æœ€ç†æƒ³çš„ã€‚</p>
<h4 data-id="heading-3">æ–¹æ¡ˆ1 createApp</h4>
<p>è¿™æ—¶å€™å°±å¯ä»¥åˆ©ç”¨createAppåˆ›å»ºvueæ¥æ¸²æŸ“è¯¦æƒ…ï¼Œè¿™æ ·å°±å¯ä»¥å¤ç”¨ç³»ç»Ÿå·²ç»å¼€å‘å¥½çš„æ ·å¼çš„ç»“æ„ã€‚ï¼ˆç¼ºç‚¹é‡æ–°å®ä¾‹äº†ä¸€éæœ‰ä¸€å®šå¼€é”€ï¼‰</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-Js" lang="Js">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">StoreInfoWindow</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/StoreInfoWindow.vue'</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">infoWindow</span>: google.<span class="hljs-property">maps</span>.<span class="hljs-property">InfoWindow</span>
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">markerShowDetail</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">marker: google.maps.marker.AdvancedMarkerElement</span>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨æ¥å£æŸ¥è¯¢è¯¦æƒ…æ•°æ®</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: any = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getStoreInfo</span>(marker)
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span> &amp;&amp; res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>) {
        <span class="hljs-comment">// è¯¦æƒ…é¡µé¢æ˜¾ç¤º</span>
        <span class="hljs-keyword">const</span> storeDetail = res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>
        <span class="hljs-keyword">const</span> content = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>)
        infoWindow.<span class="hljs-title function_">setContent</span>(content)
        infoWindow.<span class="hljs-title function_">open</span>(map, marker)
        <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">StoreInfoWindow</span>, { <span class="hljs-attr">store</span>: xxx })
        app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>)
        app.<span class="hljs-title function_">mount</span>(content)
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-comment">// loading.value = false</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error fetching store info:'</span>, error)
    }
  }
</code></pre>
<h4 data-id="heading-4">æ–¹æ¡ˆ2 éšè—div</h4>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä¸ä½¿ç”¨createAppï¼Œç›´æ¥åœ¨ç°æœ‰sfcé¡µé¢é‡Œ æ’å…¥ä¸€ä¸ªéšè—çš„divï¼Œå†…å®¹æŠŠå†…å®¹æ¸²æŸ“åˆ°éšè—divï¼Œè°ƒç”¨<code>infoWindow.setContent</code>ä¼ å…¥dom</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">import</span> <span class="hljs-title class_">StoreInfoWindow</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./components/StoreInfoWindow.vue'</span>
  
 &lt;div <span class="hljs-keyword">class</span>=<span class="hljs-string">"hideDiv"</span>&gt;
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">StoreInfoWindow</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"storeInfoRef"</span> <span class="hljs-attr">:store</span>=<span class="hljs-string">"storeDetail"</span>  &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">StoreInfoWindow</span>&gt;</span></span>
    &lt;/div&gt;


  <span class="hljs-keyword">const</span> storeDetail = ref&lt;<span class="hljs-title class_">MapStore</span>&gt;()
  <span class="hljs-keyword">const</span> storeInfoRef = <span class="hljs-title function_">ref</span>()
  <span class="hljs-keyword">let</span> <span class="hljs-attr">infoWindow</span>: google.<span class="hljs-property">maps</span>.<span class="hljs-property">InfoWindow</span>
  
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">markerShowDetail</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">marker: google.maps.marker.AdvancedMarkerElement</span>) =&gt; {    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨æ¥å£æŸ¥è¯¢è¯¦æƒ…æ•°æ®</span>
      <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: any = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getStoreInfo</span>(marker)
      <span class="hljs-keyword">if</span> (res.<span class="hljs-property">data</span> &amp;&amp; res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>) {
        <span class="hljs-comment">// è¯¦æƒ…é¡µé¢æ˜¾ç¤º</span>
        storeDetail.<span class="hljs-property">value</span> = res.<span class="hljs-property">data</span>.<span class="hljs-property">row</span>
        <span class="hljs-keyword">if</span> (storeInfoRef.<span class="hljs-property">value</span>) {
          <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
            infoWindow.<span class="hljs-title function_">setContent</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)
            infoWindow.<span class="hljs-title function_">open</span>(map, marker)
          })
        }
      }
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error fetching store info:'</span>, error)
    }
  }
</code></pre>
<blockquote>
<p>ç”±äºä¸€ä¸ªdomèŠ‚ç‚¹ ä¸èƒ½åŒæ—¶æŒ‚åœ¨å¤šä¸ªä¸åŒèŠ‚ç‚¹ä¸‹ï¼Œæ‰€ä»¥ä¸Šé¢çš„infoWindow.setContent(storeInfoRef.value.$el) è®¾ç½®åï¼ŒhideDivçš„ä¸‹é¢çš„å†…å®¹ä¼šè¢«ç§»èµ°ã€‚æ‰€ä»¥å…³é—­æ—¶å€™éœ€è¦è¿˜åŸå›æ¥ã€‚é˜²æ­¢èŠ‚ç‚¹å¼•ç”¨ä¸¢å¤±ã€‚</p>
</blockquote>
<p>å…³é—­åï¼Œè¡¥å¿æ–¹æ³•</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">const</span> <span class="hljs-title function_">infoWindowClose</span> = (<span class="hljs-params"/>) =&gt; {
    infoWindow.<span class="hljs-title function_">close</span>()
    <span class="hljs-keyword">const</span> hideDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.hideDiv'</span>)
    <span class="hljs-keyword">if</span> (hideDiv) {
      <span class="hljs-keyword">if</span> (!hideDiv.<span class="hljs-title function_">contains</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)) {
        hideDiv.<span class="hljs-title function_">appendChild</span>(storeInfoRef.<span class="hljs-property">value</span>.<span class="hljs-property">$el</span>)
      }
    }
  }
</code></pre>
<h3 data-id="heading-5">2.å¾®å‰ç«¯æ¶æ„ï¼ˆMicro Frontendsï¼‰</h3>
<p>åœ¨å¾®å‰ç«¯æ¶æ„ä¸­ï¼Œä¸€ä¸ªé¡µé¢å¯èƒ½ç”±å¤šä¸ªç‹¬ç«‹çš„å­åº”ç”¨ç»„æˆï¼Œæ¯ä¸ªå­åº”ç”¨å¯èƒ½æ˜¯ç”±ä¸åŒçš„å›¢é˜Ÿå¼€å‘ã€ä½¿ç”¨ä¸åŒçš„æ¡†æ¶æˆ–ä¸åŒç‰ˆæœ¬çš„ Vueã€‚ä¸ºäº†éš”ç¦»ä½œç”¨åŸŸå’Œé¿å…å†²çªï¼Œæ¯ä¸ªå­åº”ç”¨åº”æ‹¥æœ‰è‡ªå·±çš„ Vue å®ä¾‹ã€‚</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-number">1</span><span class="hljs-comment">// å­åº”ç”¨ A</span>
2<span class="hljs-keyword">const</span> appA = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">AppA</span>);
3appA.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#micro-app-a'</span>);
<span class="hljs-number">4</span>
<span class="hljs-number">5</span><span class="hljs-comment">// å­åº”ç”¨ B</span>
6<span class="hljs-keyword">const</span> appB = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">AppB</span>);
7appB.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#micro-app-b'</span>);
</code></pre>
<blockquote>
<p>æ¯ä¸ªå­åº”ç”¨å¯ä»¥ç‹¬ç«‹æ³¨å†Œæ’ä»¶ã€å…¨å±€ç»„ä»¶ã€æŒ‡ä»¤ç­‰ï¼Œäº’ä¸å½±å“ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3.åœ¨åŒä¸€ä¸ªé¡µé¢åµŒå…¥å¤šä¸ªç‹¬ç«‹çš„ Vue åº”ç”¨</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
æ¯”å¦‚ä¸€ä¸ªä¼ ç»Ÿå¤šé¡µç½‘ç«™ï¼ˆé SPAï¼‰ä¸­ï¼ŒæŸäº›é¡µé¢åŒ…å«å¤šä¸ªåŠŸèƒ½æ¨¡å—ï¼ˆå¦‚å¯¼èˆªæ ã€ä¾§è¾¹è´­ç‰©è½¦ã€è¯„è®ºåŒºï¼‰ï¼Œå®ƒä»¬å½¼æ­¤é€»è¾‘ç‹¬ç«‹ï¼Œä¸éœ€è¦å…±äº«çŠ¶æ€ï¼Œä¹Ÿä¸éœ€è¦é€šä¿¡ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-Html" lang="Html"><span class="hljs-comment">&lt;!-- index.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"header-widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"cart-widget"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"comment-section"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">HeaderWidget</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./HeaderWidget.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CartWidget</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CartWidget.vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CommentSection</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./CommentSection.vue'</span>;

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">HeaderWidget</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#header-widget'</span>);
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">CartWidget</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#cart-widget'</span>);
<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">CommentSection</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#comment-section'</span>);
</code></pre>
<blockquote>
<p>æ¯ä¸ª widget æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ Vue åº”ç”¨ï¼Œå¯å•ç‹¬å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-7">4.æ’ä»¶æˆ–ç¬¬ä¸‰æ–¹åº“éœ€è¦éš”ç¦»çš„ Vue å®ä¾‹</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
å½“ä½ å¼€å‘ä¸€ä¸ª Vue æ’ä»¶ï¼ˆå¦‚ UI ç»„ä»¶åº“ä¸­çš„å¼¹çª—ã€é€šçŸ¥ç­‰ï¼‰ï¼Œè€Œè¯¥æ’ä»¶å†…éƒ¨éœ€è¦æ¸²æŸ“ Vue ç»„ä»¶æ—¶ï¼Œä¸ºé¿å…æ±¡æŸ“ä¸»åº”ç”¨çš„å…¨å±€é…ç½®ï¼ˆå¦‚å…¨å±€æŒ‡ä»¤ã€æ··å…¥ã€provide/inject ç­‰ï¼‰ï¼Œåº”åˆ›å»ºç‹¬ç«‹çš„ Vue å®ä¾‹ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼ˆå°è£…ä¸€ä¸ªå…¨å±€ Toast ç»„ä»¶ï¼‰ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-comment">// toast.js</span>
<span class="hljs-keyword">import</span> { createVNode, render } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">ToastComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./Toast.vue'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">showToast</span>(<span class="hljs-params">message</span>) {
  <span class="hljs-keyword">const</span> container = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(container);

  <span class="hljs-keyword">const</span> vm = <span class="hljs-title function_">createVNode</span>(<span class="hljs-title class_">ToastComponent</span>, { message });
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>({}); <span class="hljs-comment">// åˆ›å»ºå¹²å‡€å®ä¾‹</span>
  app.<span class="hljs-title function_">mount</span>(container);
  <span class="hljs-title function_">render</span>(vm, container);
}
</code></pre>
<blockquote>
<p>è¿™æ · Toast ä¸ä¼šç»§æ‰¿ä¸»åº”ç”¨çš„å…¨å±€é…ç½®ï¼Œæ›´å®‰å…¨å¯é ã€‚</p>
</blockquote>
<h3 data-id="heading-8">5.å•å…ƒæµ‹è¯•æˆ–å¤šå®ä¾‹æ²™ç®±ç¯å¢ƒ</h3>
<p><strong>è¯´æ˜</strong>ï¼š<br/>
åœ¨ç¼–å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œä¸ºé¿å…æµ‹è¯•ä¹‹é—´äº’ç›¸å¹²æ‰°ï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åº”ä½¿ç”¨ç‹¬ç«‹çš„ Vue åº”ç”¨å®ä¾‹ã€‚</p>
<p><strong>ç¤ºä¾‹</strong>ï¼ˆVitest / Jestï¼‰ï¼š</p>
<pre><code class="hljs language-Js" lang="Js"><span class="hljs-title function_">test</span>(<span class="hljs-string">'Component A works'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">ComponentA</span>);
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  app.<span class="hljs-title function_">mount</span>(div);
  <span class="hljs-comment">// ...æ–­è¨€</span>
  app.<span class="hljs-title function_">unmount</span>();
});

<span class="hljs-title function_">test</span>(<span class="hljs-string">'Component B works'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">ComponentB</span>); <span class="hljs-comment">// å…¨æ–°å®ä¾‹ï¼Œæ— æ±¡æŸ“</span>
  <span class="hljs-comment">// ...</span>
});
</code></pre>
<h2 data-id="heading-9">3.createApp æ„é€ æ–¹å¼</h2>
<p>æˆ‘ä»¬å¤ä¹ ä¸€ä¸‹ åˆ›å»ºçš„æ–¹å¼</p>
<h3 data-id="heading-10"><strong>1.ä¼ å…¥ SFCï¼ˆå•æ–‡ä»¶ç»„ä»¶ï¼‰ã€æœ€å¸¸ç”¨ã€‘</strong></h3>
<h4 data-id="heading-11">ä¼ å…¥ .vue æ–‡ä»¶ä½œä¸ºæ ¹ç»„ä»¶</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App.vue'</span>

<span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-12">å¸¦ root props çš„æ–¹å¼</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>, { <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello'</span> }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<p>SFC å†…ï¼š</p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>
})
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-13"><strong>2.ä¼ å…¥ Options API å¯¹è±¡ï¼ˆæ„é€ å¯¹è±¡ç»„ä»¶ï¼‰</strong></h3>
<p>ä¸ç”¨ SFCï¼Œç›´æ¥ä¼ ä¸€ä¸ªå¯¹è±¡ï¼š</p>
<h4 data-id="heading-14">ç›´æ¥ä¼ ç»„ä»¶å¯¹è±¡</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">msg</span>: <span class="hljs-string">'Hello'</span> }
  },
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;{{ msg }}&lt;/div&gt;`</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-15">å¸¦ root props</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'title'</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;h1&gt;{{ title }}&lt;/h1&gt;`</span>
}, {
  <span class="hljs-attr">title</span>: <span class="hljs-string">'Hello Props'</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h3 data-id="heading-16"><strong>3.ä¼ å…¥ Render Functionï¼ˆå‡½æ•°å¼åˆ›å»ºæ ¹ç»„ä»¶ï¼‰</strong></h3>
<h4 data-id="heading-17">ä½¿ç”¨ <code>h()</code> æ¸²æŸ“å‡½æ•°</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { createApp, h } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-title function_">createApp</span>({
  <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, <span class="hljs-string">'Hello from render'</span>)
  }
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-18">å¸¦ root props çš„ render å†™æ³•</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'msg'</span>],
  <span class="hljs-title function_">render</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">h</span>(<span class="hljs-string">'div'</span>, props.<span class="hljs-property">msg</span>)
  }
}, {
  <span class="hljs-attr">msg</span>: <span class="hljs-string">'Hello props'</span>
})
.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<hr/>
<h3 data-id="heading-19"><strong>4.ä¼ å…¥ Template å­—ç¬¦ä¸²ï¼ˆinline æ¨¡æ¿ï¼‰</strong></h3>
<p>é€‚ç”¨äºå¿«é€Ÿ demoï¼š</p>
<h4 data-id="heading-20">æ ¹ç»„ä»¶ç›´æ¥å†™ template å­—ç¬¦ä¸²</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;p&gt;Hello Template&lt;/p&gt;`</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h4 data-id="heading-21">root props + template</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">createApp</span>({
  <span class="hljs-attr">props</span>: [<span class="hljs-string">'text'</span>],
  <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;p&gt;{{ text }}&lt;/p&gt;`</span>
}, {
  <span class="hljs-attr">text</span>: <span class="hljs-string">'Hello!'</span>
}).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</code></pre>
<h2 data-id="heading-22">4.æ•°æ®å…±äº«é—®é¢˜</h2>
<p>ç”±äºä¸¤ä¸ªapp æ˜¯ç‹¬ç«‹çš„æ²™ç›’ï¼Œä½†æ˜¯æˆ‘ä»¬åˆéœ€è¦åŒæ­¥éƒ¨åˆ†æ•°æ®çŠ¶æ€</p>
<h3 data-id="heading-23">1.å…¨å±€å˜é‡ï¼ˆç®€å•åœºæ™¯ï¼Œä¸æ¨èå¤§å‹é¡¹ç›®ï¼‰</h3>
<p>é€šè¿‡æµè§ˆå™¨å…¨å±€å¯¹è±¡ï¼ˆ<code>window</code>ï¼‰å­˜å‚¨å…±äº«æ•°æ®ï¼Œåˆ©ç”¨ Vue çš„å“åº”å¼ APIï¼ˆ<code>ref</code>/<code>reactive</code>ï¼‰ä¿è¯æ•°æ®å˜æ›´èƒ½è§¦å‘è§†å›¾æ›´æ–°ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script&gt;
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;

  <span class="hljs-comment">// 1. å®šä¹‰å…¨å±€å…±äº«çš„å“åº”å¼æ•°æ®</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span> = <span class="hljs-title function_">ref</span>({
    <span class="hljs-attr">username</span>: <span class="hljs-string">'Vueå¼€å‘è€…'</span>,
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>
  });

  <span class="hljs-comment">// 2. åº”ç”¨å®ä¾‹1ï¼šä½¿ç”¨å…¨å±€å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> shared = <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; shared.<span class="hljs-property">value</span>.<span class="hljs-property">count</span>++;
      <span class="hljs-keyword">return</span> { shared, increment };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
      &lt;div&gt;
        &lt;h3&gt;åº”ç”¨1 - è®¡æ•°ï¼š{{ shared.count }}&lt;/h3&gt;
        &lt;button @click="increment"&gt;+1&lt;/button&gt;
      &lt;/div&gt;
    `</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// 3. åº”ç”¨å®ä¾‹2ï¼šå…±äº«åŒä¸€ä»½æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> shared = <span class="hljs-variable language_">window</span>.<span class="hljs-property">sharedState</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeName</span> = (<span class="hljs-params"/>) =&gt; shared.<span class="hljs-property">value</span>.<span class="hljs-property">username</span> = <span class="hljs-string">'æ–°åç§°'</span>;
      <span class="hljs-keyword">return</span> { shared, changeName };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
      &lt;div&gt;
        &lt;h3&gt;åº”ç”¨2 - ç”¨æˆ·åï¼š{{ shared.username }}&lt;/h3&gt;
        &lt;h3&gt;åº”ç”¨2 - åŒæ­¥è®¡æ•°ï¼š{{ shared.count }}&lt;/h3&gt;
        &lt;button @click="changeName"&gt;ä¿®æ”¹ç”¨æˆ·å&lt;/button&gt;
      &lt;/div&gt;
    `</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
&lt;/script&gt;
</code></pre>
<h3 data-id="heading-24">2.äº‹ä»¶æ€»çº¿</h3>
<p>é€šè¿‡ç¬¬ä¸‰æ–¹äº‹ä»¶åº“ï¼ˆå¦‚Â <code>mitt</code>ï¼‰å®ç°è·¨å®ä¾‹çš„ â€œå‘å¸ƒ - è®¢é˜…â€ é€šä¿¡ï¼Œé€‚ç”¨äºéœ€è¦<strong>è§¦å‘è¡Œä¸º / ä¼ é€’ä¸´æ—¶æ•°æ®</strong>çš„åœºæ™¯ï¼ˆè€ŒéæŒä¹…åŒ–å…±äº«çŠ¶æ€ï¼‰ã€‚</p>
<h4 data-id="heading-25">æ­¥éª¤ï¼š</h4>
<ol>
<li>å®‰è£…Â <code>mitt</code>ï¼ˆå·¥ç¨‹åŒ–é¡¹ç›®ï¼‰ï¼š<code>npm install mitt</code>ï¼›</li>
<li>åˆ›å»ºå…¨å±€äº‹ä»¶æ€»çº¿å®ä¾‹ï¼›</li>
<li>ä¸åŒåº”ç”¨å®ä¾‹é€šè¿‡Â <code>emit</code>Â å‘å¸ƒäº‹ä»¶ï¼Œ<code>on</code>Â ç›‘å¬äº‹ä»¶ä¼ é€’æ•°æ®ã€‚</li>
</ol>
<pre><code class="hljs language-js" lang="js">&lt;!-- <span class="hljs-variable constant_">CDN</span> æ–¹å¼ç¤ºä¾‹ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/vue@3/dist/vue.global.prod.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/mitt/dist/mitt.umd.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;
  <span class="hljs-comment">// 1. åˆ›å»ºå…¨å±€äº‹ä»¶æ€»çº¿</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span> = <span class="hljs-title function_">mitt</span>();

  <span class="hljs-comment">// åº”ç”¨1ï¼šå‘å¸ƒäº‹ä»¶ï¼ˆä¼ é€’æ•°æ®ï¼‰</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">sendCount</span> = (<span class="hljs-params"/>) =&gt; {
        count.<span class="hljs-property">value</span>++;
        <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶ï¼Œæºå¸¦æ•°æ®</span>
        <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'count-change'</span>, count.<span class="hljs-property">value</span>);
      };
      <span class="hljs-keyword">return</span> { count, sendCount };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;button @click="sendCount"&gt;åº”ç”¨1å‘é€è®¡æ•°&lt;/button&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// åº”ç”¨2ï¼šç›‘å¬äº‹ä»¶ï¼ˆæ¥æ”¶æ•°æ®ï¼‰</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> receiveCount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);
      <span class="hljs-comment">// ç›‘å¬äº‹ä»¶ï¼Œæ¥æ”¶æ•°æ®</span>
      <span class="hljs-variable language_">window</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'count-change'</span>, <span class="hljs-function">(<span class="hljs-params">val</span>) =&gt;</span> {
        receiveCount.<span class="hljs-property">value</span> = val;
      });
      <span class="hljs-keyword">return</span> { receiveCount };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨2æ¥æ”¶çš„è®¡æ•°ï¼š{{ receiveCount }}&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-26">3.Pinia/Vuex</h3>
<p>Piniaï¼ˆVue 3 å®˜æ–¹æ¨èï¼‰/ Vuex æ˜¯ä¸“é—¨çš„çŠ¶æ€ç®¡ç†åº“ï¼Œå¯åˆ›å»º<strong>å…¨å±€å…±äº«çš„çŠ¶æ€ä»“åº“</strong>ï¼Œå¤šä¸ªåº”ç”¨å®ä¾‹é€šè¿‡è®¿é—®åŒä¸€ä»“åº“å®ç°æ•°æ®å…±äº«ï¼ˆæœ€è§„èŒƒçš„æ–¹æ¡ˆï¼‰ã€‚</p>
<h4 data-id="heading-27">åˆ›å»ºå…¨å±€ Pinia</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/store/index.js</span>
<span class="hljs-keyword">import</span> { createPinia, defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'pinia'</span>;

<span class="hljs-comment">// 1. åˆ›å»ºå…¨å±€ Pinia å®ä¾‹ï¼ˆå”¯ä¸€ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>();

<span class="hljs-comment">// 2. å®šä¹‰å…±äº«ä»“åº“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useSharedStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">'shared'</span>, {
  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">message</span>: <span class="hljs-string">'Pinia å…±äº«æ•°æ®'</span>
  }),
  <span class="hljs-attr">actions</span>: {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;
    },
    <span class="hljs-title function_">updateMessage</span>(<span class="hljs-params">newMsg</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = newMsg;
    }
  }
});
</code></pre>
<h4 data-id="heading-28">å¤šä¸ªåº”ç”¨å®ä¾‹æŒ‚è½½åŒä¸€ Pinia å¹¶ä½¿ç”¨ä»“åº“</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// src/app1.jsï¼ˆåº”ç”¨å®ä¾‹1ï¼‰</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { pinia, useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App1</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App1.vue'</span>;

<span class="hljs-keyword">const</span> app1 = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App1</span>);
<span class="hljs-comment">// æŒ‚è½½å…¨å±€ Pinia å®ä¾‹</span>
app1.<span class="hljs-title function_">use</span>(pinia);
<span class="hljs-comment">// ç»„ä»¶å†…ä½¿ç”¨ä»“åº“</span>
<span class="hljs-comment">// App1.vue ä¸­ï¼š</span>
<span class="hljs-comment">// setup() { const store = useSharedStore(); store.increment(); }</span>
app1.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

<span class="hljs-comment">// src/app2.jsï¼ˆåº”ç”¨å®ä¾‹2ï¼‰</span>
<span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { pinia, useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App2</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App2.vue'</span>;

<span class="hljs-keyword">const</span> app2 = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App2</span>);
<span class="hljs-comment">// æŒ‚è½½åŒä¸€ä¸ª Pinia å®ä¾‹</span>
app2.<span class="hljs-title function_">use</span>(pinia);
<span class="hljs-comment">// App2.vue ä¸­å¯ç›´æ¥è®¿é—®åŒä¸€ä»½ä»“åº“æ•°æ®</span>
app2.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
</code></pre>
<h4 data-id="heading-29">ç»„ä»¶å†…ä½¿ç”¨ç¤ºä¾‹ï¼ˆApp1.vueï¼‰ï¼š</h4>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åº”ç”¨1 - {{ store.message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{{ store.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"store.increment"</span>&gt;</span>+1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useSharedStore</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-30">ç»„ä»¶å†…ä½¿ç”¨ç¤ºä¾‹ï¼ˆApp2.vueï¼‰ï¼š</h4>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>åº”ç”¨2 - {{ store.message }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>åŒæ­¥è®¡æ•°ï¼š{{ store.count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"store.updateMessage('åº”ç”¨2ä¿®æ”¹äº†æ¶ˆæ¯')"</span>&gt;</span>ä¿®æ”¹æ¶ˆæ¯<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useSharedStore } <span class="hljs-keyword">from</span> <span class="hljs-string">'./store'</span>;
<span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useSharedStore</span>();
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-31">4.å…±äº«å“åº”å¼å¯¹è±¡</h3>
<h4 data-id="heading-32">1. ésfcæ–¹å¼</h4>
<p>ç›´æ¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„å“åº”å¼å¯¹è±¡ï¼ˆ<code>ref</code>/<code>reactive</code>ï¼‰ï¼Œä½œä¸ºå¤šä¸ªåº”ç”¨å®ä¾‹çš„ â€œæ•°æ®æºâ€ï¼Œæœ¬è´¨æ˜¯å°†å“åº”å¼æ•°æ®æŠ½ç¦»åˆ°å®ä¾‹å¤–éƒ¨ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;script&gt;
  <span class="hljs-keyword">const</span> { createApp, ref } = <span class="hljs-title class_">Vue</span>;

  <span class="hljs-comment">// 1. æŠ½ç¦»å…±äº«çš„å“åº”å¼æ•°æ®ï¼ˆç‹¬ç«‹äºåº”ç”¨å®ä¾‹ï¼‰</span>
  <span class="hljs-keyword">const</span> sharedData = <span class="hljs-title function_">ref</span>({
    <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">text</span>: <span class="hljs-string">'å…±äº«å“åº”å¼æ•°æ®'</span>
  });

  <span class="hljs-comment">// åº”ç”¨1ï¼šä½¿ç”¨å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; sharedData.<span class="hljs-property">value</span>.<span class="hljs-property">count</span>++;
      <span class="hljs-keyword">return</span> { sharedData, increment };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨1ï¼š{{ sharedData.count }} &lt;button @click="increment"&gt;+1&lt;/button&gt;&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app1'</span>);

  <span class="hljs-comment">// åº”ç”¨2ï¼šä½¿ç”¨åŒä¸€ä»½å…±äº«æ•°æ®</span>
  <span class="hljs-title function_">createApp</span>({
    <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeText</span> = (<span class="hljs-params"/>) =&gt; sharedData.<span class="hljs-property">value</span>.<span class="hljs-property">text</span> = <span class="hljs-string">'åº”ç”¨2ä¿®æ”¹'</span>;
      <span class="hljs-keyword">return</span> { sharedData, changeText };
    },
    <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;åº”ç”¨2ï¼š{{ sharedData.text }} / {{ sharedData.count }} &lt;button @click="changeText"&gt;æ”¹æ–‡æœ¬&lt;/button&gt;&lt;/div&gt;`</span>
  }).<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app2'</span>);
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-33">2.sfcçš„æ–¹å¼</h4>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e477e7b7eb844fd8b509a983b12229b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgamFzb25feWFuZw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839137&amp;x-signature=stE2D8COLFf5zIUrdg314iPtls8%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Vue 3 å…±äº«Refç¤ºä¾‹<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- ä¸»åº”ç”¨ç»„ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-app"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>ä¸»åº”ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å…±äº«è®¡æ•°: {{ sharedCount }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ ‡é¢˜: {{ title }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"incrementCount"</span>&gt;</span>å¢åŠ è®¡æ•°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"changeTitle"</span>&gt;</span>ä¿®æ”¹æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åŠ¨æ€åˆ›å»ºçš„ç»„ä»¶å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dynamic-component"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
  <span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted, watch } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
  <span class="hljs-keyword">import</span> { createApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

  <span class="hljs-comment">// å­ç»„ä»¶å®šä¹‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">ChildComponent</span> = {
    <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div class="child-component"&gt;
      &lt;h3&gt;åŠ¨æ€åˆ›å»ºçš„å­ç»„ä»¶&lt;/h3&gt;
      &lt;p&gt;å…±äº«è®¡æ•°: {{ count }}&lt;/p&gt;
      &lt;p&gt;æ ‡é¢˜: {{ title }}&lt;/p&gt;
      &lt;button @click="decrementCount"&gt;å‡å°‘è®¡æ•°&lt;/button&gt;
      &lt;button @click="resetTitle"&gt;é‡ç½®æ ‡é¢˜&lt;/button&gt;
    &lt;/div&gt;
  `</span>,
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">count</span>: {
        <span class="hljs-comment">// è¿™é‡Œè¦ä¼ å…¥refç±»å‹</span>
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">title</span>: {
        <span class="hljs-comment">// è¿™é‡Œè¦ä¼ å…¥refç±»å‹</span>
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">onDecrement</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Function</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
      <span class="hljs-attr">onResetTitle</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Function</span>,
        <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>,
      },
    },
    <span class="hljs-attr">methods</span>: {
      <span class="hljs-title function_">decrementCount</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onDecrement</span>()
      },
      <span class="hljs-title function_">resetTitle</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onResetTitle</span>()
      },
    },
  }

  <span class="hljs-comment">// åˆ›å»ºå…±äº«çš„ref</span>
  <span class="hljs-keyword">const</span> sharedCount = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
  <span class="hljs-keyword">const</span> title = <span class="hljs-title function_">ref</span>(<span class="hljs-string">'Hello'</span>)
  <span class="hljs-keyword">let</span> dynamicApp = <span class="hljs-literal">null</span>

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">incrementCount</span> = (<span class="hljs-params"/>) =&gt; {
    sharedCount.<span class="hljs-property">value</span>++
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">decrementCount</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (sharedCount.<span class="hljs-property">value</span> &gt; <span class="hljs-number">0</span>) {
      sharedCount.<span class="hljs-property">value</span>--
    }
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">changeTitle</span> = (<span class="hljs-params"/>) =&gt; {
    title.<span class="hljs-property">value</span> = <span class="hljs-string">`æ ‡é¢˜å·²ä¿®æ”¹ <span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().toLocaleTimeString()}</span>`</span>
  }

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">resetTitle</span> = (<span class="hljs-params"/>) =&gt; {
    title.<span class="hljs-property">value</span> = <span class="hljs-string">'Hello'</span>
  }

  <span class="hljs-comment">// åŠ¨æ€åº”ç”¨çš„æ ¹ç»„ä»¶</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">DynamicRoot</span> = {
    <span class="hljs-attr">template</span>: <span class="hljs-string">'&lt;ChildComponent :count="count" :title="title" :on-decrement="onDecrement" :on-reset-title="onResetTitle" /&gt;'</span>,
    <span class="hljs-attr">components</span>: {
      <span class="hljs-title class_">ChildComponent</span>,
    },
    <span class="hljs-attr">props</span>: {
      <span class="hljs-attr">count</span>: <span class="hljs-title class_">Number</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,
      <span class="hljs-attr">onDecrement</span>: <span class="hljs-title class_">Function</span>,
      <span class="hljs-attr">onResetTitle</span>: <span class="hljs-title class_">Function</span>,
    },
  }

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ä½¿ç”¨createApp(App, props)çš„å†™æ³•åˆ›å»ºåŠ¨æ€åº”ç”¨</span>
    dynamicApp = <span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">DynamicRoot</span>, {
      <span class="hljs-attr">count</span>: sharedCount,
      <span class="hljs-attr">title</span>: title,
      <span class="hljs-attr">onDecrement</span>: decrementCount,
      <span class="hljs-attr">onResetTitle</span>: resetTitle,
    })

    <span class="hljs-comment">// æŒ‚è½½åˆ°DOM</span>
    dynamicApp.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#dynamic-component'</span>)
  })

  <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¸…ç†åŠ¨æ€åˆ›å»ºçš„åº”ç”¨</span>
    <span class="hljs-keyword">if</span> (dynamicApp) {
      dynamicApp.<span class="hljs-title function_">unmount</span>()
    }
  })
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
  <span class="hljs-selector-class">.container</span> {
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">font-family</span>: Arial, sans-serif;
  }

  <span class="hljs-selector-class">.main-app</span>,
  <span class="hljs-selector-class">.child-component</span> {
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#e0e0e0</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f9f9f9</span>;
  }

  <span class="hljs-selector-class">.child-component</span> {
    <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#007bff</span>;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f0f8ff</span>;
  }

  <span class="hljs-selector-tag">button</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#007bff</span>;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">border</span>: none;
    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
    <span class="hljs-attribute">margin</span>: <span class="hljs-number">5px</span>;
  }

  <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0056b3</span>;
  }

  <span class="hljs-selector-tag">h1</span>,
  <span class="hljs-selector-tag">h2</span>,
  <span class="hljs-selector-tag">h3</span> {
    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;
  }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<blockquote>
<p>æ³¨æ„ å­ç»„ä»¶éœ€è¦ä½¿ç”¨refç±»å‹ä½œä¸ºå‚æ•°ï¼Œå› ä¸ºæ˜¯æ ¹èŠ‚ç‚¹</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7577016562252890163</link>    <guid>https://juejin.cn/post/7577016562252890163</guid>    <pubDate>2025-11-27T08:49:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252890163" data-draft-id="7577031454585831451" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-27T08:49:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="_ç‘¶ç‘¶_"/> <meta itemprop="url" content="https://juejin.cn/user/3635454702002747"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ…è®°ä¸€ä¸‹ElementPlusä¸­çš„è™šæ‹ŸåŒ–è¡¨æ ¼ï¼ˆel-table-v2ï¼‰çš„ç®€å•ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3635454702002747/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    _ç‘¶ç‘¶_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:49:59.000Z" title="Thu Nov 27 2025 08:49:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">æˆ‘çš„éœ€æ±‚</h3>
<p>åŒæ—¶åœ¨ä¸€ä¸ªè¡¨æ ¼ä¸­æ˜¾ç¤º6ä¸ªç”šè‡³æ›´å¤šçš„ä¼ æ„Ÿå™¨æ•°æ®ï¼Œæ•°æ®é‡åœ¨æ¯ä¸ªä¼ æ„Ÿå™¨æ¯10ç§’1æ¡æ•°æ®ï¼Œä¸€èˆ¬è¯·æ±‚1å¤©çš„æ•°æ®ã€‚</p>
<p>ä»¥6ä¸ªä¼ æ„Ÿå™¨è®¡ç®—ä¸€ä¸‹æ•°æ®é‡ï¼š</p>
<p><code>6 * 24 * 60 * 6 = 51840</code></p>
<p>ä¸€æ¬¡åªèƒ½è¯·æ±‚åˆ°1ä¸ªä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯8640æ¡ï¼Œå½“æŸ¥è¯¢æ—¶é—´èŒƒå›´å˜åŒ–æ—¶ï¼Œå¾ªç¯è¯·æ±‚æ¥å£è·å–æ•°æ®ï¼Œå¹¶ä¸”éœ€è¦å¾ˆå¿«çš„æ¸²æŸ“å®Œæ¯•ã€‚</p>
<p>æ•ˆæœåƒè¿™æ ·</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caa8193045524e92941d241d6041b374~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgX-eRtueRtl8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838242&amp;x-signature=nA55nICdoid0l8aLZgY7OBv7SL0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">æˆ‘çš„ç»å†</h3>
<h4 data-id="heading-2">å…ˆä½¿ç”¨çš„ Tableï¼ˆel-tableï¼‰</h4>
<p>è°ƒç”¨ä¸€æ¬¡æ¥å£ååº”æ—¶é—´ï¼ˆæµè§ˆå™¨ç½‘ç»œçª—å£æŸ¥çœ‹ï¼‰çº¦åœ¨1-2så·¦å³ï¼Œä¸€æ¬¡æ¥å£çš„æ•°æ®ä½¿ç”¨<code>Table</code>æ¸²æŸ“ä¸€æ¬¡æ—¶é—´çº¦æ˜¯4så·¦å³ã€‚</p>
<h4 data-id="heading-3">æœ€å¼€å§‹çš„æƒ³æ³•</h4>
<p>æ–°æ·»åŠ ä¸€ä¸ªä¼ æ„Ÿå™¨çš„æ•°æ®ï¼Œæ¯ä¸€æ¬¡éœ€è¦é‡æ–°æ¸²æŸ“ä¸€æ¬¡æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å½“åˆ‡æ¢æŸ¥è¯¢æ—¶é—´åï¼Œå¾ªç¯è°ƒç”¨æ—¶ï¼Œé‡‡ç”¨çš„æ˜¯â€”â€”ç»™tableDataä¸­ç›´æ¥æ·»åŠ ã€‚è¿™ä¼šå¯¼è‡´åœ¨å¾ªç¯è°ƒå–æ•°æ®æ—¶ï¼Œæ¯è°ƒå–ä¸€æ¬¡å°±ä¼šé‡æ–°æ¸²æŸ“ä¸€æ¬¡ã€‚å‡ºç°æ¸²æŸ“å¡é¡¿é—®é¢˜ï¼Œ6ä¸ªæ¥å£è°ƒç”¨å®Œæ¯•ä¸”æ¸²æŸ“å®Œæˆï¼Œéœ€è¦20-30sçš„æ—¶é—´ï¼Œæ•°æ®é‡å¤§çš„æ—¶é—´ä¼šæ›´é•¿ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è¯•ä¸€ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;el-table v-loading=<span class="hljs-string">"loading"</span> element-loading-text=<span class="hljs-string">"æ•°æ®åŠ è½½ä¸­"</span>:data=<span class="hljs-string">"tableData"</span>
  height=<span class="hljs-string">"100%"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">:min-width</span>=<span class="hljs-string">"leftWidth"</span> <span class="hljs-attr">:fixed</span>=<span class="hljs-string">"index == 0"</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(column, index) in columns"</span>
    <span class="hljs-attr">:key</span>=<span class="hljs-string">"column.prop"</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">"column.label"</span> <span class="hljs-attr">:prop</span>=<span class="hljs-string">"column.prop"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span></span>
&lt;/el-table&gt;
Â·Â·Â·Â·Â·Â·
tableData.<span class="hljs-property">value</span> = tableData.<span class="hljs-property">value</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">return</span> {
      ...item,
      [<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>)]: <span class="hljs-title class_">Number</span>(res.<span class="hljs-property">data</span>.<span class="hljs-property">Data</span>[index].<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>)
    }
})
</code></pre>
<h4 data-id="heading-4">å¯¹æœ€å¼€å§‹çš„æƒ³æ³•ä¼˜åŒ–</h4>
<p>åœ¨å¾ªç¯è°ƒç”¨æ—¶ï¼Œè°ƒç”¨ä¸€æ¬¡æ¸²æŸ“ä¸€æ¬¡éå¸¸æ…¢ï¼Œç¬¬ä¸€æ¬¡ä¼˜åŒ–æ˜¯æ‹¿åˆ°æ‰€æœ‰çš„æ•°æ®ä¹‹åï¼Œå†å°†æ•°æ®æ·»åŠ è‡³tableDataï¼Œä¹‹ååŒæ„è¿›è¡Œæ¸²æŸ“ï¼Œè¿™ç§æ–¹å¼å¿«äº†ä¸€ç‚¹ï¼Œä½†æ²¡æœ‰å¤ªå¤§æ”¹å–„ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">buildTableFromAllData</span> = (<span class="hljs-params">allFetched: <span class="hljs-built_in">Array</span>&lt;any&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (allFetched.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// ç¬¬ä¸€æ­¥ï¼šæ„å»º columns</span>
  <span class="hljs-keyword">const</span> newColumns = [
    { <span class="hljs-attr">prop</span>: <span class="hljs-string">'time'</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">'æ—¶é—´'</span> }
  ];
  allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ device, gateway }</span>) =&gt;</span> {
    newColumns.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">prop</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>),
      <span class="hljs-attr">label</span>: sensor.<span class="hljs-property">name</span>
    });
  });

  <span class="hljs-comment">// ç¬¬äºŒæ­¥ï¼šå¯¹é½æ—¶é—´è½´ï¼ˆå‡è®¾æ‰€æœ‰è®¾å¤‡è¿”å›çš„æ—¶é—´ç‚¹ä¸€è‡´ï¼‰</span>
  <span class="hljs-keyword">const</span> firstData = allFetched[<span class="hljs-number">0</span>].<span class="hljs-property">rawData</span>;
  <span class="hljs-keyword">const</span> timeList = firstData.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title function_">dayjs</span>(item.<span class="hljs-property">time</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>));

  <span class="hljs-comment">// ç¬¬ä¸‰æ­¥ï¼šæ„å»º tableData è¡Œæ•°æ®</span>
  <span class="hljs-keyword">const</span> newTableData = timeList.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">time: string, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">row</span>: <span class="hljs-title class_">Record</span>&lt;string, any&gt; = { time };
    allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">_, colIndex</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = allFetched[colIndex].<span class="hljs-property">rawData</span>[index]?.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> formatted = value ? <span class="hljs-title class_">Number</span>(value).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>) : <span class="hljs-string">''</span>;
      row[<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(_.<span class="hljs-property">sensor</span>.<span class="hljs-property">id</span>)] = formatted;
    });
    <span class="hljs-keyword">return</span> row;
  });

  <span class="hljs-comment">// ç¬¬å››æ­¥ï¼šæ„å»º lineDataï¼ˆç”¨äºå›¾è¡¨ï¼‰</span>
  <span class="hljs-keyword">const</span> newLineData = allFetched.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fetched</span> =&gt;</span>
    fetched.<span class="hljs-property">rawData</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title class_">Number</span>(item.<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>))
  );

  <span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§èµ‹å€¼ï¼åªè§¦å‘ä¸€æ¬¡å“åº”å¼æ›´æ–°</span>
  columns.<span class="hljs-property">value</span> = newColumns;
  tableData.<span class="hljs-property">value</span> = newTableData;
};
</code></pre>
<h4 data-id="heading-5">è™šæ‹ŸåŒ–è¡¨æ ¼çš„æ¥è§¦</h4>
<p>åœ¨AIçš„å»ºè®®ä¸‹ä½¿ç”¨è™šæ‹ŸåŒ–è¡¨æ ¼ã€‚</p>
<p><code>ElementPlus</code>ä¸­çš„è¯´æ˜<code>é€šè¿‡è™šæ‹ŸåŒ–è¡¨æ ¼ç»„ä»¶ï¼Œè¶…å¤§æ•°æ®æ¸²æŸ“å°†ä¸å†æ˜¯ä¸€ä¸ªå¤´ç–¼çš„é—®é¢˜</code>ã€‚</p>
<p>ä½¿ç”¨è™šæ‹ŸåŒ–è¡¨æ ¼ä¹‹åï¼Œæ¸²æŸ“é€Ÿåº¦è‡³å°‘æå‡ä¸€åŠæ—¶é—´ä»¥ä¸Šã€‚</p>
<pre><code class="hljs language-js" lang="js">&lt;el-auto-resizer&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>=<span class="hljs-string">"{ height, width }"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-v2</span> <span class="hljs-attr">v-loading</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">element-loading-text</span>=<span class="hljs-string">"æ•°æ®åŠ è½½ä¸­"</span> <span class="hljs-attr">:columns</span>=<span class="hljs-string">"columns"</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"tableData"</span>
      <span class="hljs-attr">:width</span>=<span class="hljs-string">"width"</span> <span class="hljs-attr">:height</span>=<span class="hljs-string">"height"</span> <span class="hljs-attr">fixed</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
&lt;/el-auto-resizer&gt;
Â·Â·Â·Â·Â·Â·
<span class="hljs-keyword">const</span> <span class="hljs-title function_">buildTableFromAllData</span> = (<span class="hljs-params">allFetched: <span class="hljs-built_in">Array</span>&lt;any&gt;</span>) =&gt; {
  <span class="hljs-keyword">if</span> (allFetched.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

  <span class="hljs-keyword">const</span> <span class="hljs-attr">newColumns</span>: any[] = [
    {
      <span class="hljs-attr">key</span>: <span class="hljs-string">'time'</span>,
      <span class="hljs-attr">dataKey</span>: <span class="hljs-string">'time'</span>,
      <span class="hljs-attr">title</span>: <span class="hljs-string">'æ—¶é—´'</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> * <span class="hljs-title class_">Number</span>(ratio.<span class="hljs-property">value</span>),
      <span class="hljs-attr">fixed</span>: <span class="hljs-string">'left'</span>
    }
  ];

  allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">{ sensor }</span>) =&gt;</span> {
    newColumns.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">key</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(sensor.<span class="hljs-property">id</span>),
      <span class="hljs-attr">dataKey</span>: <span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(device.<span class="hljs-property">Deviceid</span>),
      <span class="hljs-attr">title</span>: sensor.<span class="hljs-property">name</span>,
      <span class="hljs-attr">width</span>: <span class="hljs-number">200</span> * <span class="hljs-title class_">Number</span>(ratio.<span class="hljs-property">value</span>)
    })
  });

  <span class="hljs-keyword">const</span> firstData = allFetched[<span class="hljs-number">0</span>].<span class="hljs-property">rawData</span>;
  <span class="hljs-keyword">const</span> timeList = firstData.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title function_">dayjs</span>(item.<span class="hljs-property">time</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">'YYYY-MM-DD HH:mm:ss'</span>));

  <span class="hljs-keyword">const</span> newTableData = timeList.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">time: string, index: number</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">row</span>: <span class="hljs-title class_">Record</span>&lt;string, any&gt; = { time };
    allFetched.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">_, colIndex</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> value = allFetched[colIndex].<span class="hljs-property">rawData</span>[index]?.<span class="hljs-property">data</span>;
      <span class="hljs-keyword">const</span> formatted = value ? <span class="hljs-title class_">Number</span>(value).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>) : <span class="hljs-string">''</span>;
      row[<span class="hljs-string">'data'</span> + <span class="hljs-title class_">String</span>(_.<span class="hljs-property">sensor</span>.<span class="hljs-property">id</span>)] = formatted;
    });
    <span class="hljs-keyword">return</span> row;
  });
  
  <span class="hljs-keyword">const</span> newLineData = allFetched.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fetched</span> =&gt;</span>
    fetched.<span class="hljs-property">rawData</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item: any</span>) =&gt;</span> <span class="hljs-title class_">Number</span>(item.<span class="hljs-property">data</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">3</span>))
  );

  <span class="hljs-comment">// âœ… ä¸€æ¬¡æ€§èµ‹å€¼ï¼åªè§¦å‘ä¸€æ¬¡å“åº”å¼æ›´æ–°</span>
  columns.<span class="hljs-property">value</span> = newColumns;
  tableData.<span class="hljs-property">value</span> = newTableData;
};
</code></pre>
<h4 data-id="heading-6">å…¶å®ƒé—®é¢˜</h4>
<h5 data-id="heading-7">é—®é¢˜</h5>
<p>å…¶å®ä»¥ä¸Šç”¨æ³•å·²ç»å®Œå…¨è§£å†³äº†æˆ‘çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ç”µè„‘æµè§ˆå™¨ä¸­ä½¿ç”¨æ— è¯¯ï¼Œä½†æ˜¯<code>ä¸€æ¢åˆ°æ‰‹æœºæµè§ˆå™¨æˆ–è€…å¹³æ¿æµè§ˆå™¨ä¸­ï¼Œè™šæ‹Ÿè¡¨æ ¼ç›´æ¥æ»‘ä¸åŠ¨</code>ï¼Œèƒ½çœ‹åˆ°æ»šåŠ¨æ¡ï¼Œä½†æ˜¯å°±æ˜¯æ»‘ä¸åŠ¨ï¼Œä»¥ä¸‹æ˜¯æˆ‘çš„è§£å†³å°è¯•è¿‡ç¨‹ã€‚</p>
<h5 data-id="heading-8">AIç»™çš„è§£å†³æ–¹æ¡ˆâ€”â€”æ·»åŠ CSS</h5>
<p>æŸ¥è¯¢åˆ°æ»šåŠ¨çš„å†…å®¹æ˜¯è¿™æ ·çš„<code>&lt;div class="el-vl__wrapper el-table-v2__body"</code>ï¼Œäºæ˜¯æˆ‘æ·»åŠ äº†ä¸‹é¢çš„æ ·å¼</p>
<pre><code class="hljs language-css" lang="css">:<span class="hljs-built_in">deep</span>(.el-table-v2__main .el-table-v2__body) {
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-y</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-x</span>: auto <span class="hljs-meta">!important</span>;
  touch-action: pan-x pan-y <span class="hljs-meta">!important</span>;
}
</code></pre>
<p>ç»“æœå°±æ˜¯æ²¡æœ‰ç»“æœï¼Œå¹¶æ²¡æœ‰è§£å†³æˆ‘çš„é—®é¢˜ã€‚</p>
<h5 data-id="heading-9">æœ€ç»ˆè§£å†³æ–¹æ¡ˆâ€”â€”è¿˜æ˜¯æ·»åŠ CSSï¼Œä½†ç•¥æœ‰ä¸åŒ</h5>
<p>åœ¨å®¡æŸ¥å…ƒç´ çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªä¸œè¥¿ï¼Œç¬¬äºŒè¡Œdivä¸­çš„<code>overflow: hidden;</code></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"el-vl__wrapper el-table-v2__body"</span> <span class="hljs-attr">role</span>=<span class="hljs-string">"rowgroup"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">""</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"position: relative; overflow: hidden; will-change: transform; direction: ltr; height: 1313.11px; width: 2143.33px;"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"height: 3000px; width: 2137.33px;"</span>&gt;</span>
    Â·Â·Â·Â·Â·Â·
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æ€ä¹ˆç»™bodyè®¾ç½®æ»šåŠ¨éƒ½æ²¡æœ‰ç”¨ï¼Œå› ä¸ºé‡Œé¢ç»™<code>hidden</code>äº†ï¼Œäºæ˜¯æ·»åŠ çš„CSSå˜æˆäº†è¿™æ ·</p>
<pre><code class="hljs language-css" lang="css">:<span class="hljs-built_in">deep</span>(.el-table-v2__main .el-table-v2__body) {
  -webkit-<span class="hljs-attribute">overflow</span>-scrolling: touch <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-y</span>: auto <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">overflow-x</span>: auto <span class="hljs-meta">!important</span>;
  touch-action: pan-x pan-y <span class="hljs-meta">!important</span>;
}
</code></pre>
<blockquote>
<p>OKï¼æˆåŠŸè§£å†³é—®é¢˜ï¼Œä»¥ä¸Šå°±æ˜¯è™šæ‹ŸåŒ–è¡¨æ ¼çš„æµ…ç”¨è¿‡ç¨‹ï¼Œå¾—ä¸‹æ¬¡æœ‰æœºä¼šå†æ·±å…¥ä½¿ç”¨ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šè¿‡<RouterView/>æ¥åˆ‡æ¢é¡µé¢ç»„ä»¶æ—¶ï¼Œtransitionå¦‚ä½•ç”Ÿæ•ˆï¼Ÿ]]></title>    <link>https://juejin.cn/post/7577204540417146943</link>    <guid>https://juejin.cn/post/7577204540417146943</guid>    <pubDate>2025-11-27T08:59:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417146943" data-draft-id="7576681897297920015" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šè¿‡&lt;RouterView/&gt;æ¥åˆ‡æ¢é¡µé¢ç»„ä»¶æ—¶ï¼Œtransitionå¦‚ä½•ç”Ÿæ•ˆï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js"/> <meta itemprop="datePublished" content="2025-11-27T08:59:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="saberxyL"/> <meta itemprop="url" content="https://juejin.cn/user/3942228504379243"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šè¿‡&lt;RouterView/&gt;æ¥åˆ‡æ¢é¡µé¢ç»„ä»¶æ—¶ï¼Œtransitionå¦‚ä½•ç”Ÿæ•ˆï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3942228504379243/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    saberxyL
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:59:31.000Z" title="Thu Nov 27 2025 08:59:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">åœºæ™¯</h3>
<p>åœ¨ä½¿ç”¨Vueæä¾›çš„<code>transition</code>ç»„ä»¶æ¥å®ç°é¡µé¢åˆ‡æ¢æ—¶çš„è¿‡æ¸¡æ•ˆæœæ—¶ï¼Œç›´æ¥ä½¿ç”¨äº†<code>transition</code>æ¥åŒ…è£¹è·¯ç”±ï¼Œç»“æœå‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œæ–°é¡µé¢è¿›å…¥æ—¶çš„åŠ¨ç”»æ•ˆæœæˆåŠŸå®ç°äº†ï¼Œè€Œæ—§é¡µé¢ç¦»å¼€çš„åŠ¨ç”»å´å¤±æ•ˆäº†ã€‚</p>
<p>å­é¡µé¢1ï¼š</p>
<pre><code class="hljs language-Page1.Vue" lang="Page1.Vue">&lt;template&gt;
    &lt;div class="page1"&gt;
        page1
    &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.page1 {
    width: 100%;
    height: 100%;
    border: 1px solid #000;
    background-color: pink;
    text-align: center;
    font-size: 50px;
}
&lt;/style&gt;
</code></pre>
<p>å­é¡µé¢2:</p>
<pre><code class="hljs language-Page2.vue" lang="Page2.vue">&lt;template&gt;
    &lt;div class="page2"&gt;
        page2
    &lt;/div&gt;
&lt;/template&gt;

&lt;style scoped&gt;
.page2 {
    width: 100%;
    height: 100%;
    background-color: blue;
    text-align: center;
    font-size: 50px;
}
&lt;/style&gt;
</code></pre>
<p>ä¸»é¡µé¢ï¼š</p>
<pre><code class="hljs language-App.vue" lang="App.vue">&lt;template&gt;
&lt;div class="container"&gt;
      &lt;div class="tabs"&gt;
    &lt;router-link to="/page1"&gt;page1&lt;/router-link&gt;
    &lt;router-link to="/page2"&gt;page2&lt;/router-link&gt;
  &lt;/div&gt;
  &lt;div class="page"&gt;
      &lt;transition name="fade" mode="out-in"&gt;
          &lt;/router-view&gt;
      &lt;/transition&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;/template&gt;

&lt;style&gt;
.container {
  margin: 0 auto;
  width: 800px;
  height: 600px;
  border: 1px solid #000;
}
.page {
  width: 100%;
  height: calc(100% - 60px);
}
.tabs {
  height: 40px;
  width: 200px;
  margin: 0 auto;
  background: green;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}
a {
  color: #fff;
  font-size: 20px;
}
.fade-enter-active {
  transition: all 0.5s ease-in-out;
}
.fade-enter-from {
  opacity: 0;
  transform: translateX(100%);
}
.fade-enter-to {
  opacity: 1;
  transform: translateX(0);
}
.fade-leave-active {
  transition: all 0.5s ease-in-out;
}
.fade-leave-from {
  opacity: 1;
  transform: translateX(0);
}
.fade-leave-to {
  opacity: 0;
  transform: translateX(-100%);
}
&lt;/style&gt;

</code></pre>
<p>é¡µé¢æ•ˆæœå¦‚ä¸‹ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/980b5ba1a5ef499686630ea997387dc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FiZXJ4eUw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839452&amp;x-signature=tU80UIBMZm6C9wYyKKGsc0ph%2FuI%3D" alt="" loading="lazy"/>
åˆ‡æ¢é¡µé¢
<code>.fade-enter</code>ç›¸å…³CSSæˆåŠŸæ‰§è¡Œï¼Œ<code>.fade-leave</code>ç›¸å…³CSSæ‰§è¡Œå¤±è´¥.ï¼ˆå¦‚å›¾ï¼‰
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7a6681024eaf4f12afc4766407dcb97a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FiZXJ4eUw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839452&amp;x-signature=I8Fkf02k0IkhwAntN%2F2sN3jYRyo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-1">è§£å†³æ–¹æ³•</h3>
<p>åæ¥æˆ‘ä»åˆ«äººé‚£è·å–åˆ°äº†è§£å†³æ–¹æ³•ï¼šç”¨ <code>RouterView</code> åŒ…è£¹ <code>Transition</code> é…åˆ <code>Component</code> å®ç°è¿‡æ¸¡æ•ˆæœã€‚</p>
<pre><code class="hljs language-vue" lang="vue">&lt;template&gt;
    &lt;router-view v-slot="{ Component }"&gt;
      &lt;transition&gt;
        &lt;component :is="Component" /&gt;
      &lt;/transition&gt;
    &lt;/router-view&gt;
&lt;template/&gt;
</code></pre>
<p>æ”¹ä¸ºè¿™æ ·å­åï¼Œæ— è®ºæ˜¯è¿›å…¥è¿˜æ˜¯é‡Œç¦»å¼€éƒ½èƒ½æ­£ç¡®æ‰§è¡Œäº†ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79bdcc035173466e885a59b6c78e6780~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgc2FiZXJ4eUw=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764839452&amp;x-signature=zae8qDK8WznCLSolSoGwJ8OHSIs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">åŸå› </h3>
<p>Vue3 å®˜æ–¹æ–‡æ¡£ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcn.vuejs.org%2Fguide%2Fbuilt-ins%2Ftransition.html" target="_blank" title="https://cn.vuejs.org/guide/built-ins/transition.html" ref="nofollow noopener noreferrer">Transition</a>ä¸€èŠ‚ä¸­ï¼Œç»™å‡ºäº†<code>transition</code>ç»„ä»¶çš„è§¦å‘æ¡ä»¶ï¼ˆæ»¡è¶³å…¶ä¸€ï¼‰ï¼š</p>
<ul>
<li>ç”±Â <code>v-if</code>Â æ‰€è§¦å‘çš„åˆ‡æ¢</li>
<li>ç”±Â <code>v-show</code>Â æ‰€è§¦å‘çš„åˆ‡æ¢</li>
<li>ç”±ç‰¹æ®Šå…ƒç´ Â <code>&lt;component&gt;</code>Â åˆ‡æ¢çš„åŠ¨æ€ç»„ä»¶</li>
<li>æ”¹å˜ç‰¹æ®Šçš„Â <code>key</code>Â å±æ€§</li>
</ul>
<p>æ„æ€å°±æ˜¯è¯´<code>&lt;transition&gt;</code>Â ç»„ä»¶è¦æ­£å¸¸å·¥ä½œï¼Œ<strong>åŒ…è£¹çš„å†…å®¹å¿…é¡»æ˜¯ â€œå¯å¤ç”¨â€ çš„å…ƒç´ æˆ–ç»„ä»¶</strong></p>
<h4 data-id="heading-3">é—®é¢˜æ ¹æºï¼š<code>router-view</code>Â æ˜¯ä¸€ä¸ª â€œåŠ¨æ€æ¸²æŸ“å‡ºå£â€</h4>
<p>å…¶å…³é”®åœ¨äº<code>router-view</code>æœ¬èº«ä¸å¯å¤ç”¨ï¼Œå®ƒçš„æ ¸å¿ƒè¡Œä¸ºå¦‚ä¸‹ï¼š</p>
<ul>
<li>å½“è·¯ç”±åˆ‡æ¢æ—¶ï¼Œ<strong>é”€æ¯æ—§ç»„ä»¶å®ä¾‹</strong>ï¼Œ<strong>åˆ›å»ºæ–°ç»„ä»¶å®ä¾‹</strong>ï¼›</li>
<li><code>router-view</code>Â æœ¬èº«ä¸ä¼š â€œæ›´æ–°â€ï¼Œè€Œæ˜¯ç›´æ¥æ›¿æ¢å†…éƒ¨çš„ç»„ä»¶å†…å®¹ã€‚</li>
</ul>
<p>å½“ç›´æ¥å†™Â <code>&lt;transition&gt;&lt;router-view /&gt;&lt;/transition&gt;</code>Â æ—¶ï¼Œè·¯ç”±æ›´æ–°ï¼Œ<code>transition</code>è¿˜æ²¡æœ‰æ¥å¾—åŠç»™æ—§ç»„ä»¶æ·»åŠ ç¦»å¼€çš„æ•ˆæœæ—¶ï¼Œæ—§çš„ç»„ä»¶å®ä¾‹å·²ç»é”€æ¯äº†ï¼Œè¿™æ—¶æ–°çš„ç»„ä»¶å®ä¾‹åˆ›å»ºï¼Œ<code>transition</code>èƒ½å¤Ÿæ­£å¸¸æ•è·åˆ°è¯¥ç»„ä»¶å®ä¾‹ã€‚è€Œè§£å†³æ–¹æ³•æ˜¯é€šè¿‡ä½œç”¨åŸŸæ’æ§½ <code>"v-slot={Component}"</code> ï¼ŒæŠŠå½“å‰è·¯ç”±å¯¹åº”çš„ç»„ä»¶å®ä¾‹æš´éœ²å‡ºæ¥, ç„¶åä½¿ç”¨ <code>component</code>æ¥åŠ¨æ€æ¸²æŸ“ï¼Œç”±äº <code>&lt;component&gt;</code>Â æœ¬èº«æ˜¯ä¸€ä¸ª â€œå¯å¤ç”¨â€ çš„å®¹å™¨ï¼Œå®ƒä¸ä¼šè¢«é”€æ¯ï¼Œåªæ˜¯æ”¹å˜å†…éƒ¨æ¸²æŸ“çš„ç»„ä»¶ã€‚å¯ä»¥è®©Â <code>&lt;transition&gt;</code>Â æ­£å¸¸ç›‘å¬ç»„ä»¶çš„ â€œç¦»å¼€â€ å’Œ â€œè¿›å…¥â€ï¼Œä»è€Œæ‰§è¡Œå®Œæ•´çš„è¿‡æ¸¡åŠ¨ç”»ã€‚</p>
<h3 data-id="heading-4">æ€»ç»“</h3>
<p>æ€»ä¹‹ï¼Œè·¯ç”±åˆ‡æ¢è¿‡æ¸¡åŠ¨ç”»çš„æ ¸å¿ƒæ˜¯è®©Â <code>&lt;transition&gt;</code>Â èƒ½æ­£å¸¸æ•è·ç»„ä»¶çš„ â€œç¦»å¼€â€ ä¸ â€œè¿›å…¥â€ çŠ¶æ€ï¼ˆæ»¡è¶³å®˜æ–¹ç»™å‡ºçš„è§¦å‘æ¡ä»¶ï¼‰ã€‚é¿å¼€ç›´æ¥åŒ…è£¹Â <code>&lt;router-view&gt;</code>Â çš„è¯¯åŒºï¼ŒåŒæ—¶å‘¢ä¹Ÿéœ€è¦æ³¨æ„æ ·å¼éš”ç¦»ã€åŠ¨ç”»æ‰§è¡Œé¡ºåºç­‰ç»†èŠ‚ï¼Œè¿™æ ·å°±èƒ½å®ç°å®Œæ•´çš„è·¯ç”±è¿‡æ¸¡æ•ˆæœã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidå¤šå±‚åµŒå¥—RecyclerViewæ»šåŠ¨]]></title>    <link>https://juejin.cn/post/7577226553285984291</link>    <guid>https://juejin.cn/post/7577226553285984291</guid>    <pubDate>2025-11-27T09:16:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577226553285984291" data-draft-id="7577226553285935139" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidå¤šå±‚åµŒå¥—RecyclerViewæ»šåŠ¨"/> <meta itemprop="keywords" content="Android,Kotlin,Java"/> <meta itemprop="datePublished" content="2025-11-27T09:16:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–¹ç™½ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidå¤šå±‚åµŒå¥—RecyclerViewæ»šåŠ¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–¹ç™½ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:16:07.000Z" title="Thu Nov 27 2025 09:16:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AndroidåµŒå¥—æ»šåŠ¨ç»ˆææŒ‡å—ï¼šä»Flingä¸­æ–­åˆ°ä¸æ»‘è”åŠ¨çš„å®ç°ä¹‹è·¯ï¼ˆå«å¤šå±‚åµŒå¥—æ‰©å±•ï¼‰</h2>
<p>åœ¨æ„å»ºå¤æ‚çš„Androidç•Œé¢æ—¶ï¼Œ<strong>RecyclerViewåµŒå¥—RecyclerView</strong>æ˜¯æ— æ³•å›é¿çš„ç»å…¸éš¾é¢˜ã€‚ç”¨æˆ·æœŸæœ›çš„æ˜¯ã€Œå¦‚ä¸èˆ¬é¡ºæ»‘ã€æµ‘ç„¶ä¸€ä½“ã€çš„æ»šåŠ¨ä½“éªŒï¼Œä½†ç°å®å¾€å¾€å……æ–¥ç€æ»‘åŠ¨å†²çªã€å¡é¡¿ä¸æ¼äººçš„ <strong>ã€ŒFlingä¸­æ–­ã€</strong>ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ä¸€ä¸ªçœŸå®çš„å¤æ‚é¦–é¡µåœºæ™¯ä¸ºä¾‹ï¼Œç³»ç»Ÿæ€§æ‹†è§£é—®é¢˜æ ¹æºï¼Œå¹¶é€šè¿‡<strong>è‡ªå®šä¹‰RecyclerView</strong>ä»æ ¹æºè§£å†³é—®é¢˜ï¼Œæœ€ç»ˆå®ç°ã€Œä¸€ä¸ªæ•´ä½“ã€çš„æ»šåŠ¨æ•ˆæœã€‚<strong>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™å¥—ã€Œæ‰˜ç®¡Fling+æ‰‹åŠ¨åˆ†å‘ã€çš„æ–¹æ¡ˆå…·å¤‡æå¼ºçš„æ‰©å±•æ€§ï¼Œå¯æ”¯æŒ3å±‚ã€4å±‚ç”šè‡³æ›´å¤šå±‚åµŒå¥—æ»šåŠ¨</strong>ï¼ˆå¦‚ã€Œå¤–å±‚åˆ—è¡¨â†’ViewPagerâ†’å†…å±‚åˆ—è¡¨â†’æ»šåŠ¨å­åˆ—è¡¨ã€ï¼‰ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜çš„æ ¹æºï¼šä¸ºä»€ä¹ˆå®˜æ–¹æ–¹æ¡ˆã€Œä¸å®Œç¾ã€ï¼Ÿ</h3>
<h4 data-id="heading-2">1.1 CoordinatorLayoutçš„å±€é™æ€§</h4>
<p><code>CoordinatorLayout + AppBarLayout</code>æ˜¯å®˜æ–¹æ¨èçš„åµŒå¥—æ»‘åŠ¨æ–¹æ¡ˆï¼Œèƒ½ä¼˜é›…å¤„ç†<strong>æ‹–æ‹½æ»‘åŠ¨</strong>ï¼ˆå¦‚å‘ä¸Šæ»šåŠ¨æ”¶èµ·AppBarã€å‘ä¸‹å±•å¼€ï¼‰ï¼Œä½†åœ¨ <strong>Flingï¼ˆæƒ¯æ€§æ»‘åŠ¨ï¼‰</strong> â€‹ æ—¶å­˜åœ¨è‡´å‘½ç¼ºé™·ï¼š</p>
<blockquote>
<p><strong>æƒ¯æ€§é€Ÿåº¦æ— æ³•è·¨Viewä¼ é€’</strong>â€‹</p>
<p>ç³»ç»Ÿçš„Flingæ˜¯ä¸€æ¬¡æ€§çš„åŠ¨ç”»ï¼Œä¸€æ—¦æŸä¸ªViewçš„Flingç»“æŸï¼Œå…¶é€Ÿåº¦ç«‹å³æ¶ˆå¤±ã€‚ä¸åŒViewé—´æ²¡æœ‰å¤©ç„¶çš„ã€Œé€Ÿåº¦æ¥åŠ›ã€æœºåˆ¶ï¼Œå¯¼è‡´æ»šåŠ¨ä½“éªŒè¢«ç¡¬ç”Ÿç”Ÿä¸­æ–­ã€‚</p>
</blockquote>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒçŸ›ç›¾ï¼šFlingä¸ºä½•éš¾ä»¥è·¨RecyclerViewä¼ é€’ï¼Ÿ</h4>
<p>è¦ç†è§£Flingä¸­æ–­çš„æœ¬è´¨ï¼Œéœ€å…ˆæ˜ç¡®ä¸¤ä¸ªå…³é”®äº‹å®ï¼š</p>
<ul>
<li><strong>ç³»ç»ŸFlingçš„ä¸€æ¬¡æ€§</strong>ï¼šç³»ç»Ÿå¯¹Flingçš„å¤„ç†æ˜¯ã€Œè§¦å‘å³æ‰§è¡Œå®Œæ¯•ã€ï¼ŒåŠ¨ç”»è¿‡ç¨‹ä¸­æ— æ³•ä¸­é€”å¹²é¢„æˆ–ä¼ é€’é€Ÿåº¦ï¼›</li>
<li><strong>æ— å¤©ç„¶é€Ÿåº¦æ¥åŠ›æœºåˆ¶</strong>ï¼šä¸åŒRecyclerViewä½œä¸ºç‹¬ç«‹Viewï¼Œæ²¡æœ‰å†…ç½®é€»è¾‘æ„ŸçŸ¥å½¼æ­¤çš„æ»šåŠ¨çŠ¶æ€å¹¶ä¼ é€’æƒ¯æ€§ã€‚</li>
</ul>
<p>è¿™å¯¼è‡´ï¼šå½“ç”¨æˆ·å¿«é€Ÿæ»‘åŠ¨å±å¹•æ—¶ï¼Œå¤´éƒ¨ï¼ˆå¦‚AppBarï¼‰çš„Flingç»“æŸåï¼Œä¸‹æ–¹åˆ—è¡¨çš„Flingæ— æ³•è‡ªåŠ¨æ¥ç»­ï¼Œç”¨æˆ·ä¼šæ˜æ˜¾æ„Ÿå—åˆ°ã€Œæ»šåŠ¨çªç„¶åœäº†ä¸€ä¸‹ã€ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç ´å±€ä¹‹é“ï¼šæ‰˜ç®¡Fling + æ‰‹åŠ¨åˆ†å‘ï¼Œå®ç°æ— ç¼æ»šåŠ¨</h3>
<p>é¢å¯¹å®˜æ–¹æ–¹æ¡ˆçš„å±€é™ï¼Œæˆ‘ä»¬éœ€è¦è·³å‡ºã€Œä¾èµ–ç³»ç»ŸFlingã€çš„æ€ç»´ï¼Œè½¬å‘<strong>ä¸»åŠ¨æ§åˆ¶æ»šåŠ¨æµç¨‹</strong>ï¼š</p>
<h4 data-id="heading-5">2.1 æ ¸å¿ƒç­–ç•¥ï¼šä»ã€Œè¢«åŠ¨å“åº”ã€åˆ°ã€Œä¸»åŠ¨æ‰˜ç®¡ã€</h4>
<p>é€šè¿‡ä¸¤ä¸ªå…³é”®åŠ¨ä½œæ‰“ç ´Flingä¸­æ–­å›°å±€ï¼š</p>
<ul>
<li><strong>æ‰˜ç®¡Fling</strong>ï¼šè‡ªè¡Œå®ç°æƒ¯æ€§æ»šåŠ¨çš„ç‰©ç†æ¨¡æ‹Ÿï¼ˆæ›¿ä»£ç³»ç»Ÿä¸€æ¬¡æ€§Flingï¼‰ï¼ŒæŒæ§æ¯å¸§æ»šåŠ¨çš„è·ç¦»ä¸é€Ÿåº¦ï¼›</li>
<li><strong>æ‰‹åŠ¨åˆ†å‘</strong>ï¼šåœ¨æ¯å¸§æ»šåŠ¨ä¸­ï¼ŒæŒ‰é¢„è®¾è§„åˆ™ï¼ˆå¦‚ä¸Šæ»‘å¤–éƒ¨ä¼˜å…ˆã€ä¸‹æ»‘å†…éƒ¨ä¼˜å…ˆï¼‰å°†æ»šåŠ¨è·ç¦»åˆ†é…ç»™ä¸åŒRecyclerViewã€‚</li>
</ul>
<h3 data-id="heading-6">ä¸‰ã€å›°å¢ƒï¼šç†æƒ³æ»šåŠ¨ä¸ã€ŒFlingä¸­æ–­ã€çš„ç°å®å†²çª</h3>
<h4 data-id="heading-7">3.1 ç›®æ ‡åœºæ™¯ï¼šå¤æ‚é¦–é¡µçš„å…¸å‹ç»“æ„</h4>
<p>æˆ‘ä»¬ä»¥ç”µå•†/èµ„è®¯ç±»Appçš„é¦–é¡µä¸ºä¾‹ï¼Œå…¶ç»“æ„æå…·ä»£è¡¨æ€§ï¼š</p>
<ul>
<li><strong>é¡¶éƒ¨Header</strong>ï¼šBannerã€é‡‘åˆšåŒºã€è¿è¥ä½ç­‰å›ºå®š/å¯æ»šåŠ¨åŒºåŸŸï¼›</li>
<li><strong>ä¸­éƒ¨å®¹å™¨</strong>ï¼šViewPagerï¼ˆå¤šTabåˆ‡æ¢ï¼‰ï¼›</li>
<li><strong>åº•éƒ¨åˆ—è¡¨</strong>ï¼šViewPageræ¯ä¸ªTabå¯¹åº”ä¸€ä¸ªã€Œæ— é™æ»šåŠ¨çš„æ¨èä¿¡æ¯æµRecyclerViewã€ã€‚</li>
</ul>
<p><strong>ç†æƒ³ä½“éªŒ</strong>ï¼šç”¨æˆ·ä¸€æ¬¡å¿«é€Ÿæ»‘åŠ¨ï¼Œæ•´ä¸ªé¡µé¢ï¼ˆä»Headeråˆ°ViewPagerå†…çš„åˆ—è¡¨ï¼‰åº”åƒã€Œå•ä¸€è¶…é•¿åˆ—è¡¨ã€ä¸€æ ·æƒ¯æ€§æ»šåŠ¨åˆ°åº•ï¼Œæ— ä»»ä½•ä¸­æ–­æ„Ÿã€‚</p>
<h4 data-id="heading-8">3.2 å®˜æ–¹æ–¹æ¡ˆçš„å°è¯•ä¸æŠ˜æˆŸ</h4>
<h5 data-id="heading-9">3.2.1 CoordinatorLayoutçš„ã€Œæ‹–æ‹½ä¼˜åŠ¿ã€</h5>
<p>é€šè¿‡XMLå¸ƒå±€ï¼Œ<code>CoordinatorLayout</code>å¯å®ç°æ‹–æ‹½æ—¶çš„æ— ç¼è¡”æ¥ï¼š</p>
<ul>
<li>å‘ä¸Šæ‹–æ‹½ â†’ AppBarå…ˆæ”¶èµ· â†’ Headerå®Œå…¨éšè—åï¼ŒViewPagerå†…çš„åˆ—è¡¨å¼€å§‹æ»šåŠ¨ï¼›</li>
<li>å‘ä¸‹æ‹–æ‹½ â†’ åˆ—è¡¨æ»šåˆ°é¡¶éƒ¨åï¼ŒAppBarå¼€å§‹å±•å¼€ã€‚</li>
</ul>
<h5 data-id="heading-10">3.2.2 è‡´å‘½ç¼ºé™·ï¼šFlingé€Ÿåº¦ã€Œæ–­æ¡£ã€</h5>
<p>å°½ç®¡æ‹–æ‹½ä½“éªŒæµç•…ï¼Œä½†<strong>Flingæ—¶æƒ¯æ€§é€Ÿåº¦æ— æ³•ä¼ é€’</strong>ï¼š</p>
<p>å½“ç”¨æˆ·å¿«é€Ÿä¸Šæ»‘è§¦å‘Flingï¼ŒAppBarçš„æ”¶èµ·åŠ¨ç”»ç»“æŸåï¼Œé€Ÿåº¦ç›´æ¥æ¶ˆå¤±ï¼Œä¸‹æ–¹çš„ViewPageråˆ—è¡¨ä¸ä¼šè‡ªåŠ¨æ¥ç»­æ»šåŠ¨ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°ã€Œåˆ—è¡¨çªç„¶åœä½ï¼Œéœ€å†æ¬¡æ»‘åŠ¨æ‰èƒ½ç»§ç»­ã€çš„å‰²è£‚æ„Ÿã€‚</p>
<h3 data-id="heading-11">å››ã€ç»ˆææ–¹æ¡ˆï¼šè‡ªå®šä¹‰åµŒå¥—RecyclerViewâ€”â€”æ€»æŒ‡æŒ¥å®˜çš„ã€Œæ‰˜ç®¡ä¸åˆ†å‘ã€</h3>
<p>è¦å½»åº•è§£å†³Flingä¸­æ–­ï¼Œéœ€è®©çˆ¶å®¹å™¨æˆä¸ºæ»šåŠ¨çš„ã€Œæ€»æŒ‡æŒ¥å®˜ã€ï¼Œå®Œå…¨æ¥ç®¡æ»‘åŠ¨äº‹ä»¶çš„åˆ†å‘æƒã€‚æˆ‘ä»¬è®¾è®¡çš„<strong>è‡ªå®šä¹‰çˆ¶RecyclerView</strong>ï¼Œæ ¸å¿ƒé€»è¾‘å›´ç»•ã€Œç²¾å‡†è·¯æƒåˆ†é…ã€ä¸ã€ŒFlingæ‰˜ç®¡ã€å±•å¼€ã€‚</p>
<h4 data-id="heading-12">4.1 ç­–ç•¥ä¸€ï¼šç²¾å‡†çš„æ‹–æ‹½ã€Œè·¯æƒã€åˆ†é…</h4>
<p>é€šè¿‡é‡å†™ <code>dispatchNestedPreScroll</code>å®šä¹‰æ¸…æ™°çš„æ»šåŠ¨ä¼˜å…ˆçº§è§„åˆ™ï¼Œç¡®ä¿æ‹–æ‹½è¿‡ç¨‹è¿è´¯å¦‚ã€Œæ¥åŠ›èµ›ã€ï¼š</p>

















<table><thead><tr><th>æ»‘åŠ¨æ–¹å‘</th><th>è·¯æƒåˆ†é…è§„åˆ™</th></tr></thead><tbody><tr><td><strong>ä¸Šæ»‘</strong>â€‹</td><td>å¤–éƒ¨çˆ¶RecyclerViewå…ˆæ»šåŠ¨ â†’ æ»‘åˆ°åº•åï¼Œå‰©ä½™æ»šåŠ¨è·ç¦»æ— ç¼åˆ†é…ç»™å†…éƒ¨å­RecyclerView</td></tr><tr><td><strong>ä¸‹æ»‘</strong>â€‹</td><td>å†…éƒ¨å­RecyclerViewå…ˆæ»šåŠ¨ â†’ æ»‘åˆ°é¡¶åï¼Œå¤–éƒ¨çˆ¶RecyclerViewå¼€å§‹æ¥ç®¡æ»šåŠ¨</td></tr></tbody></table>
<p><strong>å®ç°é€»è¾‘</strong>ï¼šåœ¨ <code>dispatchNestedPreScroll</code>ä¸­ï¼Œæ ¹æ®å½“å‰æ»‘åŠ¨æ–¹å‘å’Œå­Viewçš„æ»šåŠ¨è¾¹ç•Œï¼ˆå¦‚æ˜¯å¦æ»‘åˆ°åº•/é¡¶ï¼‰ï¼ŒåŠ¨æ€è°ƒæ•´ä¼ é€’ç»™å­Viewçš„æ»šåŠ¨è·ç¦» <code>consumed</code>ï¼Œç¡®ä¿ã€Œä¸€ä¸ªViewæ»šä¸åŠ¨äº†ï¼Œå¦ä¸€ä¸ªç«‹åˆ»è·Ÿä¸Šã€ã€‚</p>
<h4 data-id="heading-13">4.2 ç­–ç•¥äºŒï¼šåŒ–æ•´ä¸ºé›¶ï¼Œæ‰˜ç®¡Flingï¼ˆæ–¹æ¡ˆç²¾é«“ï¼‰</h4>
<p>Flingä¸­æ–­çš„æ ¸å¿ƒæ˜¯ã€Œç³»ç»Ÿä¸€æ¬¡æ€§åŠ¨ç”»æ— æ³•æ¥åŠ›ã€ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦<strong>å°†Flingæ‹†è§£ä¸ºè¿ç»­çš„æ‰‹åŠ¨æ»šåŠ¨å¸§</strong>ï¼Œå…·ä½“åˆ†ä¸‰æ­¥ï¼š</p>
<h5 data-id="heading-14">4.2.1 æ‹¦æˆªFlingï¼šå‘Šè¯‰ç³»ç»Ÿã€Œæˆ‘æ¥å¤„ç†ã€</h5>
<p>é‡å†™ <code>dispatchNestedPreFling</code>å¹¶è¿”å› <code>true</code>ï¼Œæ‹¦æˆªç³»ç»Ÿçš„é»˜è®¤Flingå¤„ç†ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dispatchNestedPreFling</span><span class="hljs-params">(velocityX: <span class="hljs-type">Float</span>, velocityY: <span class="hljs-type">Float</span>)</span></span>: <span class="hljs-built_in">Boolean</span> {
    <span class="hljs-comment">// æ‹¦æˆªFlingï¼Œåç»­ç”±è‡ªå®šä¹‰é€»è¾‘æ¥ç®¡</span>
    startCustomFling(velocityY) 
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span> 
}
</code></pre>
<h5 data-id="heading-15">4.2.2 å¯åŠ¨æ¨¡æ‹Ÿå™¨ï¼šç”¨OverScrollerè®¡ç®—æ¯å¸§ä½ç½®</h5>
<p>å€ŸåŠ© <code>OverScroller</code>æ¨¡æ‹Ÿç‰©ç†æ»šåŠ¨ï¼ˆç±»ä¼¼ã€Œè‡ªå®šä¹‰ç‰©ç†å¼•æ“ã€ï¼‰ï¼Œæ ¹æ®åˆå§‹Flingé€Ÿåº¦è®¡ç®—æœªæ¥æ¯å¸§çš„æ»šåŠ¨ä½ç½®ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> overScroller = OverScroller(context, customInterpolator)

<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">startCustomFling</span><span class="hljs-params">(initialVelocityY: <span class="hljs-type">Float</span>)</span></span> {
    <span class="hljs-comment">// ä¼ å…¥åˆå§‹é€Ÿåº¦ï¼ˆå¦‚ç”¨æˆ·å¿«é€Ÿä¸Šæ»‘çš„velocityYï¼‰ï¼ŒOverScrollerä¼šè‡ªåŠ¨è®¡ç®—æ»šåŠ¨è½¨è¿¹</span>
    overScroller.fling(
        <span class="hljs-number">0</span>, getCurrentScrollY(), <span class="hljs-comment">// èµ·å§‹ä½ç½®</span>
        <span class="hljs-number">0</span>, initialVelocityY,   <span class="hljs-comment">// åˆå§‹é€Ÿåº¦ï¼ˆxè½´æ— éœ€å¤„ç†ï¼Œèšç„¦å‚ç›´æ»šåŠ¨ï¼‰</span>
        <span class="hljs-built_in">Int</span>.MIN_VALUE, <span class="hljs-built_in">Int</span>.MAX_VALUE, <span class="hljs-comment">// æ»šåŠ¨èŒƒå›´ï¼ˆç†è®ºä¸Šæ— é™ï¼‰</span>
        <span class="hljs-number">0</span>, <span class="hljs-number">0</span>
    )
    <span class="hljs-comment">// è§¦å‘é‡ç»˜ï¼Œè¿›å…¥computeScrollå¾ªç¯</span>
    invalidate()
}
</code></pre>
<h5 data-id="heading-16">4.2.3 é€å¸§åˆ†å‘ï¼šæŒ‰è§„åˆ™åˆ†é…æ»šåŠ¨è·ç¦»</h5>
<p>é‡å†™ <code>computeScroll</code>æ–¹æ³•ï¼Œåœ¨æ¯å¸§åŠ¨ç”»ä¸­ï¼š</p>
<ol>
<li>æ£€æŸ¥ <code>OverScroller</code>æ˜¯å¦è¿˜æœ‰æœªå®Œæˆçš„æ»šåŠ¨ï¼›</li>
<li>è®¡ç®—å½“å‰å¸§éœ€æ»šåŠ¨çš„å¾®å°è·ç¦» <code>dy</code>ï¼›</li>
<li>æŒ‰ã€Œä¸Šæ»‘å¤–éƒ¨ä¼˜å…ˆã€ä¸‹æ»‘å†…éƒ¨ä¼˜å…ˆã€è§„åˆ™ï¼Œå°† <code>dy</code>åˆ†é…ç»™çˆ¶/å­RecyclerViewï¼›</li>
<li>è°ƒç”¨ <code>scrollBy(0, dy)</code>æ‰§è¡Œæ»šåŠ¨ï¼Œç›´è‡³Flingç»“æŸã€‚</li>
</ol>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">computeScroll</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">if</span> (overScroller.computeScrollOffset()) { <span class="hljs-comment">// æ»šåŠ¨æœªç»“æŸ</span>
        <span class="hljs-keyword">val</span> currentY = overScroller.currY
        <span class="hljs-keyword">val</span> dy = currentY - lastFlingY <span class="hljs-comment">// å½“å‰å¸§æ»šåŠ¨è·ç¦»</span>
        lastFlingY = currentY

        <span class="hljs-comment">// æŒ‰è§„åˆ™åˆ†å‘dyï¼šä¸Šæ»‘æ—¶çˆ¶RVå…ˆæ¶ˆè´¹ï¼Œå‰©ä½™ç»™å­RVï¼›ä¸‹æ»‘æ—¶ç›¸å</span>
        distributeScroll(dy, isUpward = dy &lt; <span class="hljs-number">0</span>) 

        invalidate() <span class="hljs-comment">// ç»§ç»­ä¸‹ä¸€å¸§</span>
    }
}
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼šåŸæœ¬ã€Œä¸€æ¬¡æ€§Flingã€è¢«è½¬åŒ–ä¸ºã€Œè¿ç»­å¯æ§çš„scrollByã€ï¼Œçˆ¶/å­RecyclerViewçš„æ»šåŠ¨æ— ç¼æ¥åŠ›ï¼Œå½»åº•æ¶ˆé™¤Flingä¸­æ–­ã€‚</p>
<h4 data-id="heading-17">4.3 è¿æ¥ï¼šfindViewWithTagâ€”â€”æ€»æŒ‡æŒ¥å®˜çš„ã€ŒGPSå®šä½ã€</h4>
<p>ã€Œæ€»æŒ‡æŒ¥å®˜ã€ï¼ˆçˆ¶RecyclerViewï¼‰éœ€ç²¾å‡†æ‰¾åˆ°ã€Œå£«å…µã€ï¼ˆå­RecyclerViewï¼‰ã€‚æˆ‘ä»¬é€šè¿‡<strong>Tagé“¾å¼æŸ¥æ‰¾</strong>å®ç°åŠ¨æ€å®šä½ï¼ˆé¿å…ç¡¬ç¼–ç IDï¼Œå¢å¼ºå¤ç”¨æ€§ï¼‰ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">fetchNestedChild</span><span class="hljs-params">()</span></span>: RecyclerView? {
    <span class="hljs-comment">// 1. æ‰¾åˆ°ViewPagerï¼ˆå‡è®¾Tagä¸º"main_viewpager"ï¼‰</span>
    <span class="hljs-keyword">val</span> viewPager = findViewWithTag&lt;ViewPager&gt;(<span class="hljs-string">"main_viewpager"</span>) ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    <span class="hljs-comment">// 2. è·å–å½“å‰æ˜¾ç¤ºçš„Fragmentï¼ˆéœ€ç»“åˆViewPageré€‚é…å™¨é€»è¾‘ï¼‰</span>
    <span class="hljs-keyword">val</span> adapter = viewPager.adapter <span class="hljs-keyword">as</span>? MainViewPagerAdapter ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    <span class="hljs-keyword">val</span> currentFragment = adapter.getCurrentFragment() ?: <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    <span class="hljs-comment">// 3. åœ¨Fragmentè§†å›¾ä¸­æ‰¾åˆ°å­RecyclerViewï¼ˆTagä¸º"inner_feed_rv"ï¼‰</span>
    <span class="hljs-keyword">return</span> currentFragment.view?.findViewWithTag&lt;RecyclerView&gt;(<span class="hljs-string">"inner_feed_rv"</span>)
}
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼šé€šè¿‡Tagè§£è€¦å¸ƒå±€å±‚çº§ï¼Œå³ä½¿ViewPagerçš„FragmentåŠ¨æ€åˆ‡æ¢ï¼Œä¹Ÿèƒ½å®æ—¶å®šä½å½“å‰æ´»è·ƒçš„å­RecyclerViewã€‚</p>
<h4 data-id="heading-18">4.4 çµé­‚ï¼šæ‰‹æ„Ÿçš„ç§˜å¯†â€”â€”äº”æ¬¡æ–¹ç¼“å‡ºæ’å€¼å™¨</h4>
<p>æ»šåŠ¨ã€Œæ‰‹æ„Ÿã€å†³å®šç”¨æˆ·ä½“éªŒçš„ä¸Šé™ã€‚æˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰æ’å€¼å™¨ï¼Œè®©Flingçš„å‡é€Ÿè¿‡ç¨‹æ›´æ¥è¿‘çœŸå®ç‰©ç†æ‘©æ“¦åŠ›ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">customInterpolator</span> <span class="hljs-operator">=</span> Interpolator { t -&gt;
    <span class="hljs-type">val</span> <span class="hljs-variable">adjustedT</span> <span class="hljs-operator">=</span> t - <span class="hljs-number">1.0f</span>
    adjustedT * adjustedT * adjustedT * adjustedT * adjustedT + <span class="hljs-number">1.0f</span> <span class="hljs-comment">// äº”æ¬¡æ–¹ç¼“å‡ºå…¬å¼</span>
}

<span class="hljs-comment">// åˆå§‹åŒ–OverScrolleræ—¶ä¼ å…¥æ’å€¼å™¨</span>
<span class="hljs-keyword">private</span> <span class="hljs-type">val</span> <span class="hljs-variable">overScroller</span> <span class="hljs-operator">=</span> OverScroller(context, customInterpolator)
</code></pre>
<p><strong>äº”æ¬¡æ–¹ç¼“å‡ºï¼ˆQuintic Ease-Outï¼‰çš„ç‰¹æ€§</strong>ï¼š</p>
<ul>
<li>é€Ÿåº¦æ›²çº¿ï¼šç¬é—´è¾¾åˆ°å³°å€¼ â†’ è¿…é€Ÿè¡°å‡ â†’ ç¼“æ…¢å½’é›¶ï¼›</li>
<li>ç‰©ç†æ„Ÿï¼šæ¥è¿‘ã€Œå¸¦æ‘©æ“¦åŠ›çš„æ»šåŠ¨ã€ï¼Œæ¯”ç³»ç»ŸåŸç”ŸæŒ‡æ•°è¡°å‡æ›´çµæ•ã€åŠ¨æ€æ„Ÿæ›´å¼ºï¼›</li>
<li>ä½“éªŒä¼˜åŒ–ï¼šé¿å…Flingã€Œæˆ›ç„¶è€Œæ­¢ã€çš„çªå…€æ„Ÿï¼Œæ»šåŠ¨ç»“æŸæ›´è‡ªç„¶ã€‚</li>
</ul>
<h3 data-id="heading-19">äº”ã€ã€å…³é”®æ‰©å±•ã€‘ä»2å±‚åˆ°Nå±‚ï¼šå¤šå±‚åµŒå¥—æ»šåŠ¨çš„å®ç°é€»è¾‘</h3>
<p>å‰æ–‡æ–¹æ¡ˆä»¥ã€Œ2å±‚åµŒå¥—ã€ï¼ˆçˆ¶RecyclerViewâ†’å­RecyclerViewï¼‰ä¸ºä¾‹ï¼Œä½†<strong>æ ¸å¿ƒè®¾è®¡å¤©ç„¶æ”¯æŒ3å±‚ã€4å±‚ç”šè‡³æ›´å¤šå±‚åµŒå¥—</strong>ã€‚å…³é”®åœ¨äºï¼š<strong>å°†ã€Œçˆ¶å­åˆ†å‘ã€æŠ½è±¡ä¸ºã€Œå±‚çº§é“¾åˆ†å‘ã€ï¼Œæ¯å±‚ä»…å…³æ³¨ã€Œè‡ªèº«ä¸ç›´æ¥å­Viewã€çš„äº¤äº’ï¼Œå½¢æˆé€’å½’å¼æ»šåŠ¨æ¥åŠ›</strong>ã€‚</p>
<h4 data-id="heading-20">5.1 å¤šå±‚åµŒå¥—çš„å…¸å‹åœºæ™¯</h4>
<p>ä¾‹å¦‚æŸèµ„è®¯Appçš„ã€Œä¸“é¢˜è¯¦æƒ…é¡µã€ï¼š</p>
<ul>
<li><strong>ç¬¬1å±‚</strong>ï¼šå¤–å±‚çºµå‘RecyclerViewï¼ˆåŒ…å«ä¸“é¢˜Headerã€ç®€ä»‹ã€ç« èŠ‚åˆ—è¡¨ï¼‰ï¼›</li>
<li><strong>ç¬¬2å±‚</strong>ï¼šç« èŠ‚åˆ—è¡¨ä¸­çš„Itemæ˜¯æ¨ªå‘RecyclerViewï¼ˆå±•ç¤ºè¯¥ç« èŠ‚çš„æ–‡ç« å¡ç‰‡ï¼‰ï¼›</li>
<li><strong>ç¬¬3å±‚</strong>ï¼šæ–‡ç« å¡ç‰‡ç‚¹å‡»åå±•å¼€ä¸ºçºµå‘RecyclerViewï¼ˆå±•ç¤ºæ–‡ç« è¯„è®ºæµï¼‰ï¼›</li>
<li><strong>ç¬¬4å±‚</strong>ï¼šè¯„è®ºæµä¸­å¯èƒ½åµŒå¥—æ¨ªå‘RecyclerViewï¼ˆå±•ç¤ºçƒ­é—¨å›å¤æ ‡ç­¾ï¼‰ã€‚</li>
</ul>
<p><strong>éœ€æ±‚</strong>ï¼šç”¨æˆ·å¿«é€Ÿä¸Šæ»‘æ—¶ï¼Œä»ç¬¬1å±‚Headeråˆ°ç¬¬4å±‚è¯„è®ºæµï¼Œéœ€åƒã€Œå•ä¸€é•¿åˆ—è¡¨ã€ä¸€æ ·æƒ¯æ€§æ»šåŠ¨åˆ°åº•ï¼Œæ— ä»»ä½•ä¸­æ–­ã€‚</p>
<h4 data-id="heading-21">5.2 æ‰©å±•æ ¸å¿ƒï¼šå±‚çº§é“¾åˆ†å‘ + é€’å½’è·¯æƒåˆ¤æ–­</h4>
<p>å¤šå±‚åµŒå¥—çš„å…³é”®æ˜¯<strong>è®©æ¯å±‚RecyclerViewéƒ½æˆä¸ºã€Œå±€éƒ¨æŒ‡æŒ¥å®˜ã€</strong>ï¼Œé€šè¿‡ã€Œé€’å½’åˆ¤æ–­æ»šåŠ¨è¾¹ç•Œã€å®ç°è·¨å±‚æ¥åŠ›ï¼š</p>
<h5 data-id="heading-22">5.2.1 æŠ½è±¡åˆ†å‘è§„åˆ™ï¼šæ¯å±‚ä»…éœ€å¤„ç†ã€Œè‡ªèº«ä¸ç›´æ¥å­Viewã€</h5>
<p>æ— è®ºå¤šå°‘å±‚ï¼Œæ¯å±‚RecyclerViewçš„åˆ†å‘é€»è¾‘å¯æŠ½è±¡ä¸ºï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">/** é€šç”¨æ»šåŠ¨åˆ†å‘é€»è¾‘ï¼šå½“å‰å±‚å…ˆæ¶ˆè´¹æ»šåŠ¨è·ç¦»ï¼Œå‰©ä½™ä¼ é€’ç»™ç›´æ¥å­View */</span>
<span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">dispatchScrollToChild</span><span class="hljs-params">(dy: <span class="hljs-type">Int</span>, isUpward: <span class="hljs-type">Boolean</span>)</span></span>: <span class="hljs-built_in">Int</span> {
    <span class="hljs-keyword">var</span> remainingDy = dy <span class="hljs-comment">// å‰©ä½™æœªæ¶ˆè´¹çš„æ»šåŠ¨è·ç¦»</span>
    <span class="hljs-comment">// 1. å½“å‰å±‚å…ˆåˆ¤æ–­æ˜¯å¦å¯æ»šåŠ¨ï¼ˆå¦‚æœªåˆ°é¡¶éƒ¨/åº•éƒ¨ï¼‰</span>
    <span class="hljs-keyword">val</span> currentConsumed = consumeSelfScroll(remainingDy, isUpward)
    remainingDy -= currentConsumed

    <span class="hljs-comment">// 2. è‹¥å½“å‰å±‚å·²æ»šä¸åŠ¨ï¼ˆremainingDyâ‰ 0ï¼‰ï¼Œåˆ™ä¼ é€’ç»™ç›´æ¥å­View</span>
    <span class="hljs-keyword">if</span> (remainingDy != <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">val</span> child = findDirectChildRecyclerView() <span class="hljs-comment">// æ‰¾ç›´æ¥å­RecyclerViewï¼ˆå¦‚ç¬¬2å±‚æ‰¾ç¬¬3å±‚ï¼‰</span>
        <span class="hljs-keyword">if</span> (child != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// é€’å½’è°ƒç”¨å­Viewçš„åˆ†å‘é€»è¾‘ï¼ˆå­Viewå¯èƒ½ç»§ç»­ä¼ é€’ç»™å®ƒçš„å­Viewï¼‰</span>
            remainingDy = child.dispatchScrollRecursive(remainingDy, isUpward)
        }
    }
    <span class="hljs-keyword">return</span> dy - remainingDy <span class="hljs-comment">// è¿”å›å½“å‰å±‚åŠå­Viewæ€»å…±æ¶ˆè´¹çš„è·ç¦»</span>
}
</code></pre>
<h5 data-id="heading-23">5.2.2 é€’å½’ç»ˆæ­¢æ¡ä»¶ï¼šæœ€å†…å±‚Viewæˆ–æ»šåŠ¨è¾¹ç•Œ</h5>
<p>é€’å½’åˆ†å‘ä¼šåœ¨ä¸¤ç§æƒ…å†µä¸‹ç»ˆæ­¢ï¼š</p>
<ul>
<li><strong>è§¦è¾¾æœ€å†…å±‚View</strong>ï¼šå¦‚ç¬¬4å±‚è¯„è®ºæµçš„RecyclerViewæ— åµŒå¥—å­Viewï¼Œç›´æ¥æ¶ˆè´¹å‰©ä½™æ»šåŠ¨è·ç¦»ï¼›</li>
<li><strong>æ»šåŠ¨åˆ°è¾¹ç•Œ</strong>ï¼šæŸå±‚Viewå·²æ»‘åˆ°é¡¶éƒ¨/åº•éƒ¨ï¼ˆå¦‚ç¬¬2å±‚æ¨ªå‘RecyclerViewæ»‘åˆ°æœ€å·¦/å³ï¼‰ï¼Œæ— æ³•ç»§ç»­æ¶ˆè´¹æ»šåŠ¨è·ç¦»ï¼Œæ­¤æ—¶æ»šåŠ¨åœæ­¢æˆ–åå‘ä¼ é€’ï¼ˆå¦‚ä¸‹æ»‘æ—¶ä»å†…å±‚å‘å¤–å±‚ä¼ é€’ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-24">5.2.3 Flingæ‰˜ç®¡çš„è·¨å±‚å»¶ç»­</h5>
<p>Flingçš„æ‰˜ç®¡é€»è¾‘åŒæ ·æ”¯æŒå¤šå±‚ï¼š</p>
<ul>
<li>æ¯å±‚RecyclerViewç»´æŠ¤è‡ªèº«çš„ <code>OverScroller</code>ï¼Œä½†æ ¹æ®ã€Œå±‚çº§ä¼˜å…ˆçº§ã€å†³å®šæ˜¯å¦æ¥ç®¡Flingï¼›</li>
<li>ä¾‹å¦‚ç¬¬1å±‚Flingæ—¶ï¼Œè‹¥ç¬¬1å±‚æœªæ»šåˆ°åº•ï¼Œåˆ™è‡ªèº«æ¶ˆè´¹Flingï¼›è‹¥å·²æ»šåˆ°åº•ï¼Œåˆ™å°†Flingé€Ÿåº¦ä¼ é€’ç»™ç¬¬2å±‚ï¼›ç¬¬2å±‚åŒç†ä¼ é€’ç»™ç¬¬3å±‚ï¼Œç›´è‡³æœ€å†…å±‚æ¶ˆè´¹å®Œæ¯•ã€‚</li>
</ul>
<h4 data-id="heading-25">5.3 å¤šå±‚åµŒå¥—çš„å…³é”®å®ç°ç»†èŠ‚</h4>
<h5 data-id="heading-26">5.3.1 åŠ¨æ€å±‚çº§æŸ¥æ‰¾ï¼šä»ã€Œå•å±‚GPSã€åˆ°ã€Œå±‚çº§é“¾GPSã€</h5>
<p>é€šè¿‡<strong>å±‚çº§Tagæ ‡è®°</strong>å®ç°ä»»æ„å±‚Viewçš„å®šä½ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>ç¬¬1å±‚RecyclerView Tagï¼š<code>"layer1_main_rv"</code></li>
<li>ç¬¬2å±‚æ¨ªå‘RecyclerView Tagï¼š<code>"layer2_horizontal_rv"</code></li>
<li>ç¬¬3å±‚è¯„è®ºæµRecyclerView Tagï¼š<code>"layer3_comment_rv"</code></li>
</ul>
<p>æŸ¥æ‰¾ç¬¬Nå±‚Viewæ—¶ï¼Œé€šè¿‡é“¾å¼Tagæ‹¼æ¥å®šä½ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">findLayerNChild</span><span class="hljs-params">(layerTagPrefix: <span class="hljs-type">String</span>)</span></span>: RecyclerView? {
    <span class="hljs-keyword">var</span> currentView: View = <span class="hljs-keyword">this</span>
    <span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">2.</span>.layerTagPrefix.last().digitToInt()) { <span class="hljs-comment">// ä»ç¬¬2å±‚å¼€å§‹é€’å½’æŸ¥æ‰¾</span>
        currentView = currentView.findViewWithTag(<span class="hljs-string">"<span class="hljs-subst">${layerTagPrefix}</span><span class="hljs-subst">${i}</span>"</span>) ?: <span class="hljs-keyword">break</span>
    }
    <span class="hljs-keyword">return</span> currentView <span class="hljs-keyword">as</span>? RecyclerView
}
</code></pre>
<h5 data-id="heading-27">5.3.2 æ€§èƒ½è€ƒé‡ï¼šé¿å…é€’å½’è¿‡æ·±å¯¼è‡´çš„å¡é¡¿</h5>
<p>å¤šå±‚é€’å½’å¯èƒ½å¢åŠ è®¡ç®—å¼€é”€ï¼Œéœ€é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ–ï¼š</p>
<ul>
<li><strong>ç¼“å­˜å­Viewå¼•ç”¨</strong>ï¼šå¯¹é¢‘ç¹è®¿é—®çš„å†…å±‚Viewï¼ˆå¦‚å½“å‰æ˜¾ç¤ºçš„ViewPager Tabå†…çš„RecyclerViewï¼‰ï¼Œç¼“å­˜å…¶å¼•ç”¨é¿å…é‡å¤æŸ¥æ‰¾ï¼›</li>
<li><strong>é™åˆ¶æœ€å¤§åµŒå¥—æ·±åº¦</strong>ï¼šå®é™…ä¸šåŠ¡ä¸­åµŒå¥—è¶…è¿‡4å±‚çš„æƒ…å†µæå°‘ï¼Œå¯é€šè¿‡é…ç½®é™åˆ¶æœ€å¤§é€’å½’æ·±åº¦ï¼Œé¿å…æ ˆæº¢å‡ºï¼›</li>
<li><strong>å¼‚æ­¥é¢„åŠ è½½è¾¹ç•Œ</strong>ï¼šæå‰è®¡ç®—å„å±‚Viewçš„æ»šåŠ¨è¾¹ç•Œï¼ˆå¦‚æ˜¯å¦å·²æ»‘åˆ°åº•ï¼‰ï¼Œå‡å°‘å®æ—¶é€’å½’åˆ¤æ–­çš„æ€§èƒ½æ¶ˆè€—ã€‚</li>
</ul>
<h3 data-id="heading-28">å…­ã€ç»“è®ºï¼šä»ã€Œç”¨è½®å­ã€åˆ°ã€Œé€ è½®å­ã€çš„å·¥ç¨‹æ™ºæ…§</h3>
<p>å½“å®˜æ–¹APIæ— æ³•æ»¡è¶³å¤æ‚åœºæ™¯éœ€æ±‚æ—¶ï¼Œæ·±å…¥åº•å±‚æ„å»ºè‡ªå®šä¹‰æ–¹æ¡ˆæ˜¯ä¸€ç§ã€Œé«˜çº§å·¥ç¨‹æƒè¡¡ã€ã€‚æœ¬æ–‡æ–¹æ¡ˆçš„æ ¸å¿ƒå¯ç¤ºï¼š</p>
<h4 data-id="heading-29">6.1 ç†è§£é—®é¢˜æœ¬è´¨æ˜¯åŸºç¡€</h4>
<p>CoordinatorLayoutçš„å±€é™ä¸åœ¨ã€Œæ‹–æ‹½ã€ï¼Œè€Œåœ¨ã€ŒFlingé€Ÿåº¦æ— æ³•è·¨Viewä¼ é€’ã€â€”â€”è¿™æ˜¯æ‰€æœ‰åµŒå¥—æ»šåŠ¨å¡é¡¿/ä¸­æ–­çš„èµ·ç‚¹ã€‚</p>
<h4 data-id="heading-30">6.2 é€‰æ‹©æ­£ç¡®çš„ã€Œæ”»åšé“è·¯ã€</h4>
<p>ä¸Šå±‚APIï¼ˆå¦‚CoordinatorLayoutï¼‰æ˜¯ã€Œé€šç”¨å·¥å…·ã€ï¼Œå¤æ‚ä¸šåŠ¡åœºæ™¯éœ€ã€Œå®šåˆ¶åŒ–æ­¦å™¨ã€ã€‚é€šè¿‡æ·±å…¥ <code>NestedScrolling</code>æœºåˆ¶ä¸äº‹ä»¶åˆ†å‘åº•å±‚ï¼Œæˆ‘ä»¬èƒ½æ„å»ºæ›´è´´åˆä¸šåŠ¡çš„æ»šåŠ¨è§„åˆ™ã€‚</p>
<h4 data-id="heading-31">6.3 æ‰©å±•æ€§ï¼šä»2å±‚åˆ°Nå±‚çš„æ ¸å¿ƒä»·å€¼</h4>
<p>æœ¬æ–‡æ–¹æ¡ˆçš„æœ€å¤§äº®ç‚¹å¹¶éä»…è§£å†³2å±‚åµŒå¥—ï¼Œè€Œæ˜¯æä¾›äº†<strong>ä¸€å¥—å¯æ‰©å±•çš„åµŒå¥—æ»šåŠ¨æ¡†æ¶</strong>ï¼šé€šè¿‡ã€Œå±‚çº§é“¾åˆ†å‘+é€’å½’è·¯æƒåˆ¤æ–­ã€ï¼Œæ”¯æŒ3å±‚ã€4å±‚ç”šè‡³æ›´å¤šå±‚åµŒå¥—ï¼Œæ»¡è¶³ç”µå•†é¦–é¡µã€èµ„è®¯ä¸“é¢˜é¡µç­‰è¶…å¤æ‚åœºæ™¯çš„æ— ç¼æ»šåŠ¨éœ€æ±‚ã€‚</p>
<h4 data-id="heading-32">6.4 ä¼˜é›…è§£å†³é—®é¢˜ï¼šåŠŸèƒ½ä¸ä½“éªŒçš„åŒé‡æ‰“ç£¨</h4>
<p>æˆ‘ä»¬ä¸ä»…é€šè¿‡ã€Œæ‰˜ç®¡Fling+æ‰‹åŠ¨åˆ†å‘ã€è§£å†³äº†Flingä¸­æ–­çš„åŠŸèƒ½é—®é¢˜ï¼Œæ›´é€šè¿‡<strong>äº”æ¬¡æ–¹æ’å€¼å™¨</strong>ä¼˜åŒ–äº†æ»šåŠ¨æ‰‹æ„Ÿï¼Œè®©ä½“éªŒä»ã€Œèƒ½ç”¨ã€å‡çº§ä¸ºã€Œå¥½ç”¨ã€ã€‚</p>
<h4 data-id="heading-33">æœ€ç»ˆæƒè¡¡ï¼šç‰ºç‰²100%ä¿çœŸï¼Œæ¢99%æµç•…ä¸100%è¿è´¯</h4>
<p>è¯¥æ–¹æ¡ˆè™½æœª100%å¤åˆ»ç³»ç»ŸFlingçš„ç‰©ç†ç²¾åº¦ï¼Œå´æ¢æ¥äº†å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸‹ã€Œå‡ ä¹æ— ä¸­æ–­ã€çš„æµç•…ä½“éªŒã€‚è¿™æ˜¯å·¥ç¨‹å®è·µä¸­ã€Œå–èˆä¸å¹³è¡¡ã€çš„å…¸èŒƒâ€”â€”<strong>ç”¨æˆ·çš„ã€Œè¿è´¯æ„Ÿã€æ¯”ã€Œç‰©ç†ç²¾åº¦ã€æ›´é‡è¦</strong>ã€‚</p>
<p>ä¸‹ä¸€æ¬¡é¢å¯¹æ£˜æ‰‹åµŒå¥—æ»šåŠ¨æ—¶ï¼Œä¸å¦¨æ€è€ƒï¼šé™¤äº†ä½¿ç”¨ç°æˆè½®å­ï¼Œæˆ‘ä»¬ä¹Ÿå¯é€‰æ‹©æˆä¸ºã€Œé€ è½®å­çš„äººã€â€”â€”æ¯•ç«Ÿï¼Œæè‡´çš„ç”¨æˆ·ä½“éªŒï¼Œå¾€å¾€è—åœ¨è‡ªå®šä¹‰çš„ç»†èŠ‚é‡Œï¼Œè€Œã€Œå¯æ‰©å±•çš„è‡ªå®šä¹‰æ–¹æ¡ˆã€ï¼Œæ›´èƒ½æ”¯æ’‘ä¸šåŠ¡çš„æ— é™å¯èƒ½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¯†ç ç®—æ³•çš„OIDæŸ¥é˜…]]></title>    <link>https://juejin.cn/post/7577189654489169970</link>    <guid>https://juejin.cn/post/7577189654489169970</guid>    <pubDate>2025-11-27T09:33:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577189654489169970" data-draft-id="7576968345876348955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¯†ç ç®—æ³•çš„OIDæŸ¥é˜…"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-11-27T09:33:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é³„é±¼å„¿"/> <meta itemprop="url" content="https://juejin.cn/user/3751996066103758"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¯†ç ç®—æ³•çš„OIDæŸ¥é˜…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3751996066103758/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é³„é±¼å„¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:33:51.000Z" title="Thu Nov 27 2025 09:33:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ä¸€ã€OID å‘½åç»“æ„</h3>
<h4 data-id="heading-1">1. çº¯æ¨¡å¼ï¼ˆPure Modeï¼‰</h4>
<p>ç›´æ¥å¯¹åŸå§‹æ¶ˆæ¯ç­¾åï¼ŒOID æ ¼å¼ä¸ºï¼š</p>
<pre><code class="hljs language-xml" lang="xml">id-slh-dsa-<span class="hljs-tag">&lt;<span class="hljs-name">hash-family</span>&gt;</span>-<span class="hljs-tag">&lt;<span class="hljs-name">security-level</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">variant</span>&gt;</span>
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><code>&lt;hash-family&gt;</code>ï¼š<code>sha2</code> æˆ– <code>shake</code></li>
<li><code>&lt;security-level&gt;</code>ï¼š<code>128</code>ã€<code>192</code>ã€<code>256</code></li>
<li><code>&lt;variant&gt;</code>ï¼š<code>s</code>ï¼ˆsmallï¼Œä¼˜åŒ–ç­¾åé•¿åº¦ï¼‰æˆ– <code>f</code>ï¼ˆfastï¼Œä¼˜åŒ–ç­¾å/å¯†é’¥ç”Ÿæˆé€Ÿåº¦ï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>id-slh-dsa-sha2-128s</code></li>
<li><code>id-slh-dsa-shake-256f</code></li>
</ul>
<p>è¿™äº› OID éš¶å±äº <code>nistAlgorithms(2.16.840.1.101.3.4.3)</code> ä¸‹çš„ <code>sigAlgs(20â€“31)</code> èŒƒå›´ã€‚</p>
<h4 data-id="heading-2">2. é¢„å“ˆå¸Œæ¨¡å¼ï¼ˆHashed Modeï¼‰</h4>
<p>å…ˆå¯¹æ¶ˆæ¯è¿›è¡ŒæŒ‡å®šå“ˆå¸Œï¼Œå†å¯¹æ‘˜è¦ç­¾åï¼ŒOID æ ¼å¼ä¸ºï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-built_in">id</span>-<span class="hljs-built_in">hash</span>-slh-dsa-&lt;<span class="hljs-built_in">hash</span>-family&gt;-&lt;security-level&gt;&lt;variant&gt;-<span class="hljs-keyword">with</span>-&lt;prehash-alg&gt;
</code></pre>
<p>å…¶ä¸­ <code>&lt;prehash-alg&gt;</code> å¿…é¡»ä¸å®‰å…¨çº§åˆ«åŒ¹é…ï¼š</p>
<ul>
<li>128 ä½å®‰å…¨ â†’ SHA-256 æˆ– SHAKE128</li>
<li>192 ä½å®‰å…¨ â†’ SHA-384 æˆ– SHAKE192</li>
<li>256 ä½å®‰å…¨ â†’ SHA-512 æˆ– SHAKE256</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<ul>
<li><code>id-hash-slh-dsa-sha2-128s-with-sha256</code></li>
<li><code>id-hash-slh-dsa-shake-256f-with-shake256</code></li>
</ul>
<p>è¿™äº› OID éš¶å±äº <code>nistAlgorithms.sigAlgs(2.16.840.1.101.3.4.3)</code> çš„ <code>35â€“46</code> èŒƒå›´ã€‚</p>
<hr/>
<h3 data-id="heading-3">äºŒã€å®Œæ•´ OID åˆ—è¡¨ï¼ˆæŒ‰å®‰å…¨çº§åˆ«åˆ†ç±»ï¼‰</h3>
<h4 data-id="heading-4">SLH-DSAç®—æ³•</h4>
<p>SLH-DSAï¼ˆStateless Hash-Based Digital Signature Algorithmï¼‰æ˜¯ NIST åœ¨ FIPS 205 æ ‡å‡†ä¸­æ­£å¼æ ‡å‡†åŒ–çš„åé‡å­æ•°å­—ç­¾åç®—æ³•ï¼Œå…¶ OIDï¼ˆå¯¹è±¡æ ‡è¯†ç¬¦ï¼‰ç”± <strong>NIST CSORï¼ˆComputer Security Objects Registryï¼‰</strong> åˆ†é…ï¼Œç”¨äºåœ¨ X.509 PKIã€CMS ç­‰å¯†ç åè®®ä¸­å”¯ä¸€æ ‡è¯†ä¸åŒå‚æ•°ç»„åˆå’Œå·¥ä½œæ¨¡å¼ã€‚</p>













































































































































































































<table><thead><tr><th>å®‰å…¨çº§åˆ«</th><th>æ¨¡å¼</th><th>å“ˆå¸Œå®¶æ—</th><th>å˜ä½“</th><th>OID åç§°</th><th>ç¤ºä¾‹ OIDï¼ˆåè¿›åˆ¶ç‚¹åˆ†æ ¼å¼ï¼‰</th></tr></thead><tbody><tr><td>128</td><td>Pure</td><td>sha2</td><td>s</td><td>id-slh-dsa-sha2-128s</td><td><code>2.16.840.1.101.3.4.3.20</code></td></tr><tr><td>128</td><td>Pure</td><td>sha2</td><td>f</td><td>id-slh-dsa-sha2-128f</td><td><code>2.16.840.1.101.3.4.3.21</code></td></tr><tr><td>128</td><td>Pure</td><td>shake</td><td>s</td><td>id-slh-dsa-shake-128s</td><td><code>2.16.840.1.101.3.4.3.22</code></td></tr><tr><td>128</td><td>Pure</td><td>shake</td><td>f</td><td>id-slh-dsa-shake-128f</td><td><code>2.16.840.1.101.3.4.3.23</code></td></tr><tr><td>192</td><td>Pure</td><td>sha2</td><td>s</td><td>id-slh-dsa-sha2-192s</td><td><code>2.16.840.1.101.3.4.3.24</code></td></tr><tr><td>192</td><td>Pure</td><td>sha2</td><td>f</td><td>id-slh-dsa-sha2-192f</td><td><code>2.16.840.1.101.3.4.3.25</code></td></tr><tr><td>192</td><td>Pure</td><td>shake</td><td>s</td><td>id-slh-dsa-shake-192s</td><td><code>2.16.840.1.101.3.4.3.26</code></td></tr><tr><td>192</td><td>Pure</td><td>shake</td><td>f</td><td>id-slh-dsa-shake-192f</td><td><code>2.16.840.1.101.3.4.3.27</code></td></tr><tr><td>256</td><td>Pure</td><td>sha2</td><td>s</td><td>id-slh-dsa-sha2-256s</td><td><code>2.16.840.1.101.3.4.3.28</code></td></tr><tr><td>256</td><td>Pure</td><td>sha2</td><td>f</td><td>id-slh-dsa-sha2-256f</td><td><code>2.16.840.1.101.3.4.3.29</code></td></tr><tr><td>256</td><td>Pure</td><td>shake</td><td>s</td><td>id-slh-dsa-shake-256s</td><td><code>2.16.840.1.101.3.4.3.30</code></td></tr><tr><td>256</td><td>Pure</td><td>shake</td><td>f</td><td>id-slh-dsa-shake-256f</td><td><code>2.16.840.1.101.3.4.3.31</code></td></tr><tr><td>128</td><td>Prehash</td><td>sha2</td><td>s</td><td>id-hash-slh-dsa-sha2-128s-with-sha256</td><td><code>2.16.840.1.101.3.4.3.35</code></td></tr><tr><td>128</td><td>Prehash</td><td>sha2</td><td>f</td><td>id-hash-slh-dsa-sha2-128f-with-sha256</td><td><code>2.16.840.1.101.3.4.3.36</code></td></tr><tr><td>128</td><td>Prehash</td><td>shake</td><td>s</td><td>id-hash-slh-dsa-shake-128s-with-shake128</td><td><code>2.16.840.1.101.3.4.3.37</code></td></tr><tr><td>128</td><td>Prehash</td><td>shake</td><td>f</td><td>id-hash-slh-dsa-shake-128f-with-shake128</td><td><code>2.16.840.1.101.3.4.3.38</code></td></tr><tr><td>192</td><td>Prehash</td><td>sha2</td><td>s</td><td>id-hash-slh-dsa-sha2-192s-with-sha384</td><td><code>2.16.840.1.101.3.4.3.39</code></td></tr><tr><td>192</td><td>Prehash</td><td>sha2</td><td>f</td><td>id-hash-slh-dsa-sha2-192f-with-sha384</td><td><code>2.16.840.1.101.3.4.3.40</code></td></tr><tr><td>192</td><td>Prehash</td><td>shake</td><td>s</td><td>id-hash-slh-dsa-shake-192s-with-shake192</td><td><code>2.16.840.1.101.3.4.3.41</code></td></tr><tr><td>192</td><td>Prehash</td><td>shake</td><td>f</td><td>id-hash-slh-dsa-shake-192f-with-shake192</td><td><code>2.16.840.1.101.3.4.3.42</code></td></tr><tr><td>256</td><td>Prehash</td><td>sha2</td><td>s</td><td>id-hash-slh-dsa-sha2-256s-with-sha512</td><td><code>2.16.840.1.101.3.4.3.43</code></td></tr><tr><td>256</td><td>Prehash</td><td>sha2</td><td>f</td><td>id-hash-slh-dsa-sha2-256f-with-sha512</td><td><code>2.16.840.1.101.3.4.3.44</code></td></tr><tr><td>256</td><td>Prehash</td><td>shake</td><td>s</td><td>id-hash-slh-dsa-shake-256s-with-shake256</td><td><code>2.16.840.1.101.3.4.3.45</code></td></tr><tr><td>256</td><td>Prehash</td><td>shake</td><td>f</td><td>id-hash-slh-dsa-shake-256f-with-shake256</td><td><code>2.16.840.1.101.3.4.3.46</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">ä¸‰ã€å‚è€ƒèµ„æ–™</h3>
<ul>
<li><strong>FIPS 205</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fnvlpubs.nist.gov%2Fnistpubs%2FFIPS%2FNIST.FIPS.205.pdf" target="_blank" title="https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.205.pdf" ref="nofollow noopener noreferrer">nvlpubs.nist.gov/nistpubs/FIâ€¦</a></li>
<li><strong>RFC 9814</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rfc-editor.org%2Frfc%2Frfc9814.html" target="_blank" title="https://www.rfc-editor.org/rfc/rfc9814.html" ref="nofollow noopener noreferrer">www.rfc-editor.org/rfc/rfc9814â€¦</a></li>
<li><strong>NIST CSOR Registry</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fcsrc.nist.gov%2Fprojects%2Fcomputer-security-objects-register" target="_blank" title="https://csrc.nist.gov/projects/computer-security-objects-register" ref="nofollow noopener noreferrer">csrc.nist.gov/projects/coâ€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcsrc.nist.gov%2Fprojects%2Fcomputer-security-objects-register%2Falgorithm-registration" target="_blank" title="https://csrc.nist.gov/projects/computer-security-objects-register/algorithm-registration" ref="nofollow noopener noreferrer">NIST CSOR</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜ eMMC å­˜å‚¨æ‰©å®¹ï¼šæ‰¾å› â€œæ¶ˆå¤±â€ ç©ºé—´çš„ç®€ä¾¿ä¹‹é“]]></title>    <link>https://juejin.cn/post/7577050643203588146</link>    <guid>https://juejin.cn/post/7577050643203588146</guid>    <pubDate>2025-11-27T09:29:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577050643203588146" data-draft-id="7577016562253103155" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ eMMC å­˜å‚¨æ‰©å®¹ï¼šæ‰¾å› â€œæ¶ˆå¤±â€ ç©ºé—´çš„ç®€ä¾¿ä¹‹é“"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2025-11-27T09:29:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆå…‰æŠ€æœ¯æ‚è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3323149076668138"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ eMMC å­˜å‚¨æ‰©å®¹ï¼šæ‰¾å› â€œæ¶ˆå¤±â€ ç©ºé—´çš„ç®€ä¾¿ä¹‹é“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3323149076668138/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆå…‰æŠ€æœ¯æ‚è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:29:12.000Z" title="Thu Nov 27 2025 09:29:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­ç§˜ eMMC å­˜å‚¨æ‰©å®¹ï¼šæ‰¾å› â€œæ¶ˆå¤±â€ ç©ºé—´çš„ç®€ä¾¿ä¹‹é“</h2>
<h3 data-id="heading-1">æ¦‚è¦</h3>
<p>åœ¨ä½¿ç”¨ç¼–è¯‘å¥½çš„å›ºä»¶çƒ§å†™ç³»ç»Ÿå¯åŠ¨åï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™æ ·çš„å›°æƒ‘ï¼šæ˜æ˜ç¡¬ä»¶ eMMC å­˜å‚¨ä¸º 32Gï¼Œå¯ç³»ç»Ÿæ˜¾ç¤ºçš„ç”¨æˆ·åˆ†åŒºå´ä»…æœ‰ 812Mã€‚å¸¸è§„ä¿®æ”¹å›ºä»¶åˆ†åŒºè¡¨æ¥è°ƒæ•´çš„æ–¹æ³•è¾ƒä¸ºç¹çï¼Œæœ¬æ–‡å°†å¸¦ä½ éªŒè¯ä¸€ç§æ›´ä¸ºç®€ä¾¿çš„æ–¹å¼ï¼Œè½»æ¾æ‰¾å›é‚£äº› â€œæ¶ˆå¤±â€ çš„ eMMC å­˜å‚¨ç©ºé—´ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åˆ†æ</h3>
<p>ç³»ç»Ÿå¯åŠ¨åï¼Œé€šè¿‡æ‰§è¡Œç›¸å…³å‘½ä»¤æŸ¥çœ‹åˆ†åŒºä¿¡æ¯ï¼Œèƒ½æ¸…æ™°äº†è§£å½“å‰ç³»ç»Ÿçš„å­˜å‚¨åˆ†é…çŠ¶å†µï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       812M  664M   91M  88% /
tmpfs           512K     0  512K   0% /dev
tmpfs           987M   19M  968M   2% /tmp
cgroup          987M     0  987M   0% /sys/fs/cgroup

<span class="hljs-comment"># lsblk</span>
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
mmcblk0      179:0    0 28.9G  0 disk 
â”œâ”€mmcblk0p1  179:1    0    4M  0 part 
â”œâ”€mmcblk0p2  179:2    0    4M  0 part 
â”œâ”€mmcblk0p3  179:3    0   64M  0 part 
â”œâ”€mmcblk0p4  179:4    0   64M  0 part 
â”œâ”€mmcblk0p5  179:5    0   32M  0 part 
â”œâ”€mmcblk0p6  179:6    0    6G  0 part /
â”œâ”€mmcblk0p7  179:7    0  128M  0 part 
â””â”€mmcblk0p8  179:8    0 22.6G  0 part 
mmcblk0boot0 179:32   0    4M  1 disk 
mmcblk0boot1 179:64   0    4M  1 disk 
zram0        254:0    0    0B  0 disk 
</code></pre>
<p>ä»ä¸Šè¿°ä¿¡æ¯å¯çŸ¥ï¼Œåˆ†åŒº<code>mmcblk0p6</code>è¢«æŒ‚è½½ä¸ºæ ¹åˆ†åŒºï¼Œè€Œæ‹¥æœ‰ 22.6G ç©ºé—´çš„<code>mmcblk0p8</code>å´å¤„äºé—²ç½®çŠ¶æ€ï¼Œè¿™ä¾¿æ˜¯å­˜å‚¨ç©ºé—´æœªè¢«å……åˆ†åˆ©ç”¨çš„ç—‡ç»“æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-3">è§£å†³è¿‡ç¨‹</h3>
<ol>
<li><strong>åˆæ¬¡æŒ‚è½½å°è¯•</strong>ï¼šå°è¯•æŒ‚è½½<code>mmcblk0p8</code>åˆ†åŒºåˆ°<code>/mnt/</code>ç›®å½•ï¼Œç„¶è€Œï¼Œæ‰§è¡Œ<code>df -h</code>å‘½ä»¤æŸ¥çœ‹æ—¶ï¼Œå´å‘ç°å¹¶æœªæ˜¾ç¤ºå…¶å®é™…å¤§å°ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">mount /dev/mmcblk0p8 /mnt/
<span class="hljs-built_in">df</span> -h
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       812M  664M   91M  88% /
tmpfs           512K     0  512K   0% /dev
tmpfs           987M   20M  967M   2% /tmp
cgroup          987M     0  987M   0% /sys/fs/cgroup
/dev/mmcblk0p8   23G   24K   21G   1% /mnt

<span class="hljs-comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       812M  664M   91M  88% /
tmpfs           512K     0  512K   0% /dev
tmpfs           987M   19M  968M   2% /tmp
cgroup          987M     0  987M   0% /sys/fs/cgroup
/dev/mmcblk0p8  4.0M  283K  3.5M   8% /mnt
</code></pre>
<ol>
<li><strong>æ ¼å¼åŒ–ä¸é‡æ–°æŒ‚è½½</strong>ï¼šä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œéœ€å…ˆå¯¹<code>/dev/mmcblk0p8</code>è¿›è¡Œæ ¼å¼åŒ–æ“ä½œã€‚æ ¼å¼åŒ–ä½¿ç”¨<code>mkfs.ext4</code>å‘½ä»¤ï¼Œæ­¤å‘½ä»¤å°†åœ¨è¯¥åˆ†åŒºåˆ›å»ºä¸€ä¸ª ext4 æ–‡ä»¶ç³»ç»Ÿï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># mkfs.ext4 /dev/mmcblk0p8</span>
mke2fs 1.46.5 (30 - Dec - 2021)
/dev/mmcblk0p8 contains a ext2 file system labelled <span class="hljs-string">'userdata'</span>
    last mounted on Wed Dec 20 16:54:25 2023
Proceed anyway? (y,N) y
Discarding device blocks: <span class="hljs-keyword">done</span>                            
Creating filesystem with 5926904 4k blocks and 1482752 inodes
Filesystem UUID: af5f8523 - e705 - 4b11 - 8615 - 7c28df16aecb
Superblock backups stored on blocks: 
    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, 
    4096000

Allocating group tables: <span class="hljs-keyword">done</span>                            
Writing inode tables: <span class="hljs-keyword">done</span>                            
Creating journal (32768 blocks): <span class="hljs-keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="hljs-keyword">done</span>  
</code></pre>
<p>æ ¼å¼åŒ–å®Œæˆåï¼Œå¸è½½ä¹‹å‰çš„æŒ‚è½½ç‚¹ï¼Œé‡æ–°æŒ‚è½½<code>/dev/mmcblk0p8</code>åˆ°<code>/mnt/</code>ã€‚æ­¤æ—¶å†æ¬¡æ‰§è¡Œ<code>df -h</code>å’Œ<code>lsblk</code>å‘½ä»¤æŸ¥çœ‹ï¼Œåˆ†åŒºå¤§å°å·²æ˜¾ç¤ºæ­£å¸¸ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># umount /mnt/</span>
<span class="hljs-comment"># mount /dev/mmcblk0p8 /mnt/</span>
<span class="hljs-comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       812M  664M   91M  88% /
tmpfs           512K     0  512K   0% /dev
tmpfs           987M   20M  967M   2% /tmp
cgroup          987M     0  987M   0% /sys/fs/cgroup
/dev/mmcblk0p8   23G   24K   21G   1% /mnt

<span class="hljs-comment"># lsblk </span>
NAME         MAJ:MIN RM  SIZE RO TYPE MOUNTPOINTS
mmcblk0      179:0    0 28.9G  0 disk 
â”œâ”€mmcblk0p1  179:1    0    4M  0 part 
â”œâ”€mmcblk0p2  179:2    0    4M  0 part 
â”œâ”€mmcblk0p3  179:3    0   64M  0 part 
â”œâ”€mmcblk0p4  179:4    0   64M  0 part 
â”œâ”€mmcblk0p5  179:5    0   32M  0 part 
â”œâ”€mmcblk0p6  179:6    0    6G  0 part /
â”œâ”€mmcblk0p7  179:7    0  128M  0 part 
â””â”€mmcblk0p8  179:8    0 22.6G  0 part /root
mmcblk0boot0 179:32   0    4M  1 disk 
mmcblk0boot1 179:64   0    4M  1 disk 
zram0        254:0    0    0B  0 disk
</code></pre>
<h3 data-id="heading-4">é…ç½®æ°¸ä¹…ç”Ÿæ•ˆ</h3>
<p>ä¸ºä½¿ä¸Šè¿°æŒ‚è½½é…ç½®åœ¨ç³»ç»Ÿé‡å¯åä¾ç„¶ç”Ÿæ•ˆï¼Œéœ€å¯¹<code>fstab</code>æ–‡ä»¶è¿›è¡Œç›¸åº”è®¾ç½®ã€‚</p>
<ol>
<li><strong>å¯¼å‡º fstab é…ç½®</strong>ï¼šé€šè¿‡æ‰§è¡Œ<code>block detect &gt; /etc/config/fstab</code>å‘½ä»¤ï¼Œå¯¼å‡ºå½“å‰ç³»ç»Ÿçš„<code>fstab</code>é…ç½®ä¿¡æ¯ã€‚æŸ¥çœ‹è¯¥æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># cat  /etc/config/fstab </span>
config <span class="hljs-string">'global'</span>
    option	anon_swap	<span class="hljs-string">'0'</span>
    option	anon_mount	<span class="hljs-string">'0'</span>
    option	auto_swap	<span class="hljs-string">'1'</span>
    option	auto_mount	<span class="hljs-string">'1'</span>
    option	delay_root	<span class="hljs-string">'5'</span>
    option	check_fs	<span class="hljs-string">'0'</span>

config<span class="hljs-string">'mount'</span>
    option	target	<span class="hljs-string">'/mnt'</span>
    option	uuid	<span class="hljs-string">'af5f8523 - e705 - 4b11 - 8615 - 7c28df16aecb'</span>
    option	enabled	<span class="hljs-string">'0'</span>
</code></pre>
<ol>
<li><strong>ä¿®æ”¹ fstab é…ç½®</strong>ï¼šå¯¹<code>/etc/config/fstab</code>æ–‡ä»¶å†…å®¹è¿›è¡Œä¿®æ”¹ï¼Œå°†æŒ‚è½½ç›®æ ‡è®¾ä¸º<code>/root</code>ï¼Œå¹¶å°†<code>enabled</code>é€‰é¡¹è®¾ä¸º<code>1</code>ï¼Œä½¿èƒ½ç³»ç»Ÿè‡ªåŠ¨æŒ‚è½½<code>mmcblk0p8</code>åˆ°<code>/root</code>ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash">config<span class="hljs-string">'mount'</span>
    option	target	<span class="hljs-string">'/root'</span>
    option	uuid	<span class="hljs-string">'af5f8523 - e705 - 4b11 - 8615 - 7c28df16aecb'</span>
    option	enabled	<span class="hljs-string">'1'</span>
</code></pre>
<ol>
<li><strong>éªŒè¯é…ç½®ç”Ÿæ•ˆ</strong>ï¼šé‡å¯ç³»ç»Ÿåï¼Œå†æ¬¡æ‰§è¡Œ<code>df -h</code>å‘½ä»¤æŸ¥çœ‹ï¼Œç¡®è®¤æŒ‚è½½é…ç½®å·²ç”Ÿæ•ˆï¼Œ<code>/dev/mmcblk0p8</code>åˆ†åŒºå·²æ­£ç¡®æŒ‚è½½åˆ°<code>/root</code>ç›®å½•ï¼Œä¸”ç©ºé—´å¤§å°æ˜¾ç¤ºæ­£å¸¸ï¼š</li>
</ol>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># df -h</span>
Filesystem      Size  Used Avail Use% Mounted on
/dev/root       812M  608M  147M  81% /
tmpfs           512K     0  512K   0% /dev
tmpfs           987M   18M  969M   2% /tmp
cgroup          987M     0  987M   0% /sys/fs/cgroup
/dev/mmcblk0p8   23G   57M   21G   1% /root
</code></pre>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œæˆ‘ä»¬æˆåŠŸåœ°ä»¥ä¸€ç§ç®€ä¾¿çš„æ–¹å¼æ‰¾å›äº† eMMC å­˜å‚¨ä¸­ â€œæ¶ˆå¤±â€ çš„ç©ºé—´ï¼Œå¹¶ä½¿å…¶é…ç½®åœ¨ç³»ç»Ÿé‡å¯åæŒç»­ç”Ÿæ•ˆï¼Œä¸ºç³»ç»Ÿå­˜å‚¨èµ„æºçš„å……åˆ†åˆ©ç”¨æä¾›äº†æœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚å¸Œæœ›æœ¬æ–‡èƒ½ä¸ºé‡åˆ°ç±»ä¼¼é—®é¢˜çš„å¼€å‘è€…å’ŒæŠ€æœ¯çˆ±å¥½è€…å¸¦æ¥å¸®åŠ©ã€‚</p>
<p><strong>ç›¸å…³æ ‡ç­¾</strong>ï¼š#eMMC å­˜å‚¨ #ç³»ç»Ÿåˆ†åŒº #æŒ‚è½½é…ç½® #Openwrt ç³»ç»Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LeanSpecï¼šä¸€ä¸ªè½»é‡çº§çš„ SDD æ¡†æ¶]]></title>    <link>https://juejin.cn/post/7577203946063020072</link>    <guid>https://juejin.cn/post/7577203946063020072</guid>    <pubDate>2025-11-27T09:39:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577203946063020072" data-draft-id="7577049352839315471" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LeanSpecï¼šä¸€ä¸ªè½»é‡çº§çš„ SDD æ¡†æ¶"/> <meta itemprop="keywords" content="GitHub,æ¶æ„,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-27T09:39:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MarvinZhang"/> <meta itemprop="url" content="https://juejin.cn/user/2348212566363197"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LeanSpecï¼šä¸€ä¸ªè½»é‡çº§çš„ SDD æ¡†æ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212566363197/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MarvinZhang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:39:17.000Z" title="Thu Nov 27 2025 09:39:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¹´å¹´åˆï¼Œæˆ‘è¢« Claude Sonnet 3.7 çš„ AI ç¼–ç¨‹èƒ½åŠ›æ·±æ·±éœ‡æ’¼ã€‚é‚£æ—¶ "Vibe Coding" è¿™ä¸ªè¯è¿˜æ²¡æµè¡Œèµ·æ¥ï¼Œä½†æˆ‘åšçš„æ­£æ˜¯è¿™ä»¶äº‹â€”â€”è®© AI ç”Ÿæˆä»£ç ï¼Œæˆ‘åªè´Ÿè´£å¼•å¯¼å¯¹è¯ã€‚æ„Ÿè§‰åƒé­”æ³•ä¸€æ ·ç¥å¥‡ã€‚ç›´åˆ°é—®é¢˜å¼€å§‹æµ®ç°ã€‚</p>
<p>å‡ å‘¨åï¼Œæˆ‘æ³¨æ„åˆ°ä¸€äº›è§„å¾‹ï¼šä»£ç å†—ä½™è¶Šæ¥è¶Šå¤šï¼Œå®ç°æ–¹å‘åç¦»äº†æœ€åˆçš„è®¾æƒ³ï¼ŒAI åœ¨ä¸åŒä¼šè¯ä¹‹é—´ä¸¢å¤±ä¸Šä¸‹æ–‡å¯¼è‡´è¿”å·¥ä¸æ–­å¢åŠ ã€‚èœœæœˆæœŸç»“æŸäº†ã€‚æˆ‘éœ€è¦ä¸€å¥—ç»“æ„åŒ–çš„æ–¹æ³•ï¼Œä½†åˆä¸æƒ³å¼•å…¥é‚£äº›æ‹–æ…¢å¼€å‘é€Ÿåº¦çš„é‡å‹æµç¨‹ã€‚</p>
<p>è¿™æ®µæ¢ç´¢ä¹‹æ—…è®©æˆ‘å…ˆåå°è¯•äº† Kiroã€Spec Kitã€OpenSpec ç­‰å·¥å…·ï¼Œæœ€ç»ˆä¿ƒä½¿æˆ‘å¼€å‘äº† <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcodervisor%2Flean-spec" target="_blank" title="https://github.com/codervisor/lean-spec" ref="nofollow noopener noreferrer">LeanSpec</a>â€”â€”ä¸€ä¸ªè½»é‡çº§çš„è§„æ ¼é©±åŠ¨å¼€å‘ï¼ˆSpec-Driven Developmentï¼ŒSDDï¼‰æ¡†æ¶ã€‚ä»Šå¤©å‘å¸ƒçš„ v0.2.7 ç‰ˆæœ¬ï¼Œæ˜¯ä¸‰å‘¨å†…çš„ç¬¬åä¸ªç‰ˆæœ¬ã€‚è¿™ç¯‡æ–‡ç« åˆ†äº«æˆ‘ä¸ºä»€ä¹ˆè¦åš LeanSpecã€å®ƒæœ‰ä»€ä¹ˆä¸åŒï¼Œä»¥åŠå¦‚ä½•å¿«é€Ÿä¸Šæ‰‹ã€‚</p>
<h2 data-id="heading-0">Vibe Coding çš„éšæ€§æˆæœ¬</h2>
<p>ğŸ“ <strong>Vibe Coding çš„é™·é˜±</strong></p>
<blockquote>
<p>AI ç¼–ç¨‹åŠ©æ‰‹çš„ç”Ÿäº§åŠ›æƒŠäººâ€”â€”ç›´åˆ°å®ƒä»¬å¼€å§‹å‡ºé—®é¢˜ã€‚ç¼ºä¹ç»“æ„åŒ–çš„ä¸Šä¸‹æ–‡ï¼ŒAI ä¼šç”Ÿæˆçœ‹ä¼¼åˆç†ä½†å‰åçŸ›ç›¾çš„ä»£ç ï¼Œå¯¼è‡´æŠ€æœ¯å€ºåŠ¡åœ¨æ¯ä¸ªä¼šè¯ä¸­ä¸æ–­ç´¯ç§¯ã€‚</p>
</blockquote>
<p>å¦‚æœä½ æ·±åº¦ä½¿ç”¨è¿‡ AI ç¼–ç¨‹å·¥å…·ï¼Œå¤§æ¦‚ç‡é‡åˆ°è¿‡è¿™äº›é—®é¢˜ï¼š</p>






























<table><thead><tr><th>ç—‡çŠ¶</th><th>æ ¹æœ¬åŸå› </th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>ä»£ç å†—ä½™</strong></td><td>AI ä¸è®°å¾—ä¹‹å‰çš„å®ç°</td><td>é‡å¤é€»è¾‘æ•£è½åœ¨å„å¤„</td></tr><tr><td><strong>æ„å›¾åç§»</strong></td><td>ä¸Šä¸‹æ–‡åœ¨ä¼šè¯é—´ä¸¢å¤±</td><td>åŠŸèƒ½ä¸ä½ çš„è®¾æƒ³æ¸è¡Œæ¸è¿œ</td></tr><tr><td><strong>è¿”å·¥å¢å¤š</strong></td><td>ç¼ºå°‘æŒä¹…çš„å•ä¸€ä¿¡æ¯æº</td><td>åå¤è§£é‡Šç›¸åŒçš„èƒŒæ™¯</td></tr><tr><td><strong>æ¶æ„ä¸ä¸€è‡´</strong></td><td>ç¼ºä¹ç»“æ„åŒ–æŒ‡å¯¼</td><td>ç»„ä»¶ä¹‹é—´æ— æ³•é¡ºç•…åä½œ</td></tr></tbody></table>
<p>ä¸šç•Œçš„è§£å†³æ–¹æ¡ˆæ˜¯ <strong>è§„æ ¼é©±åŠ¨å¼€å‘ï¼ˆSpec-Driven Developmentï¼ŒSDDï¼‰</strong>â€”â€”å…ˆå†™è§„æ ¼æ–‡æ¡£ï¼Œå†å†™ä»£ç ï¼Œä¸º AIï¼ˆå’Œäººç±»ï¼‰æä¾›æŒä¹…çš„ä¸Šä¸‹æ–‡ã€‚ä½†å½“æˆ‘è€ƒå¯Ÿç°æœ‰å·¥å…·æ—¶ï¼Œå‘ç°äº†ä¸€ä¸ªç©ºç™½åœ°å¸¦ã€‚</p>
<p>â„¹ï¸ <strong>å»¶ä¼¸é˜…è¯»</strong></p>
<blockquote>
<p>åˆšæ¥è§¦ SDDï¼Ÿå¯ä»¥å…ˆé˜…è¯»æˆ‘çš„åŸºç¡€æ–‡ç«  <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarvinzhang.dev%2Fzh%2Fblog%2Fspec-driven-development" target="_blank" title="https://marvinzhang.dev/zh/blog/spec-driven-development" ref="nofollow noopener noreferrer">è§„æ ¼é©±åŠ¨å¼€å‘ï¼šå¤æ‚åŠŸèƒ½çš„ç³»ç»ŸåŒ–æ–¹æ³•</a> äº†è§£æ–¹æ³•è®ºåŸºç¡€ï¼Œæˆ–è€…çœ‹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarvinzhang.dev%2Fzh%2Fblog%2Fsdd-tools-practices" target="_blank" title="https://marvinzhang.dev/zh/blog/sdd-tools-practices" ref="nofollow noopener noreferrer">2025 å¹´ SDD å·¥å…·å…¨æ™¯</a> äº†è§£ä¸šç•Œå·¥å…·çš„å…¨é¢å¯¹æ¯”ã€‚æƒ³ä¸å®‰è£…ä»»ä½•å·¥å…·å°±ä½“éªŒæ–¹æ³•è®ºï¼Ÿè¯•è¯• <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lean-spec.dev%2Fdocs%2Ftutorials%2Fsdd-without-toolkit" target="_blank" title="https://www.lean-spec.dev/docs/tutorials/sdd-without-toolkit" ref="nofollow noopener noreferrer">ä¸ç”¨å·¥å…·å®è·µ SDD</a> æ•™ç¨‹ã€‚</p>
</blockquote>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆè¦åš LeanSpec</h2>
<p>æˆ‘åœ¨ SDD é¢†åŸŸçš„æ¢ç´¢æ­ç¤ºäº†ä¸‰ç±»å·¥å…·ï¼Œæ¯ç±»éƒ½æœ‰ä¸é€‚åˆæˆ‘çš„åœ°æ–¹ï¼š</p>
<p><strong>å‚å•†é”å®š</strong>ï¼šKiroï¼ˆäºšé©¬é€Šçš„ SDD IDEï¼‰é›†æˆåº¦å¾ˆé«˜ï¼Œä½†è¦æ±‚æ”¾å¼ƒç°æœ‰å·¥ä½œæµã€‚æˆ‘å–œæ¬¢è‡ªå·±çš„å·¥å…·ç»„åˆï¼Œæ¢ IDE ä¸åœ¨è€ƒè™‘èŒƒå›´å†…ã€‚</p>
<p><strong>è®¤çŸ¥è´Ÿæ‹…è¿‡é‡</strong>ï¼šSpec Kit æä¾›äº†å®Œæ•´çš„ç»“æ„ï¼Œä½†å…¶ç¹å¤çš„æ ¼å¼å¸¦æ¥äº†å¾ˆå¤§çš„è®¤çŸ¥è´Ÿæ‹…ã€‚å³ä½¿æœ‰ AI è¾…åŠ©æ’°å†™ï¼Œç†è§£å’Œç»´æŠ¤è¿™äº›è§„æ ¼æ–‡æ¡£ä»ç„¶è€—è´¹å¤§é‡å¿ƒæ™ºèµ„æºï¼Œå¯¹äºç‹¬ç«‹å¼€å‘è€…å’Œå°å›¢é˜Ÿæ¥è¯´è¿‡äºæ²‰é‡ã€‚</p>
<p><strong>ç¼ºå°‘é¡¹ç›®ç®¡ç†</strong>ï¼šOpenSpec æœ€æ¥è¿‘æˆ‘ç†æƒ³ä¸­çš„æ ·å­â€”â€”è½»é‡ä¸”çµæ´»â€”â€”ä½†ç¼ºä¹è·¨é¡¹ç›®ç®¡ç†å‡ åä¸ªè§„æ ¼çš„èƒ½åŠ›ã€‚</p>
<p>æˆ‘æƒ³è¦çš„æ˜¯ï¼š<strong>ä¸€å¥—æ–¹æ³•è®ºï¼Œè€Œä¸åªæ˜¯ä¸€ä¸ªå·¥å…·</strong>ã€‚å°±åƒæ•æ·å¼€å‘ä¸€æ ·â€”â€”ä¸€ç»„äººäººå¯ä»¥é‡‡çº³çš„åŸåˆ™ï¼Œé…åˆä¸ç¢äº‹çš„è½»é‡å·¥å…·ã€‚</p>
<p>äºæ˜¯æˆ‘åšäº† LeanSpecã€‚ç„¶åç”¨ LeanSpec æ¥å¼€å‘ LeanSpecã€‚</p>
<h2 data-id="heading-2">ç¬¬ä¸€æ€§åŸç†ï¼šè®¾è®¡åŸºçŸ³</h2>
<p>LeanSpec ä¸åªæ˜¯å·¥å…·é“¾ï¼Œå®ƒå»ºç«‹åœ¨äº”æ¡ç¬¬ä¸€æ€§åŸç†ï¼ˆFirst Principlesï¼‰ä¹‹ä¸Šï¼ŒæŒ‡å¯¼æ¯ä¸€ä¸ªè®¾è®¡å†³ç­–ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4f5be651f69463fa882f85473fbc673~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFydmluWmhhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764841157&amp;x-signature=Zud9LpIYiu3frMHVyfrnyW0sItA%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸Šä¸‹æ–‡ç»æµï¼ˆContext Economyï¼‰</strong>ï¼šè§„æ ¼å¿…é¡»è£…è¿›å·¥ä½œè®°å¿†â€”â€”æ— è®ºäººè¿˜æ˜¯ AIã€‚ç›®æ ‡ 300 è¡Œä»¥å†…ã€‚å¦‚æœ 10 åˆ†é’Ÿè¯»ä¸å®Œï¼Œå°±å¤ªé•¿äº†ã€‚</p>
<p><strong>ä¿¡å™ªæ¯”æœ€å¤§åŒ–ï¼ˆSignal-to-Noiseï¼‰</strong>ï¼šæ¯ä¸€è¡Œéƒ½è¦æœåŠ¡äºå†³ç­–ã€‚æ²¡æœ‰æ ·æ¿æ–‡ä»¶ï¼Œæ²¡æœ‰å¡«å……å†…å®¹ï¼Œæ²¡æœ‰ä¸ºäº†å½¢å¼çš„å½¢å¼ã€‚</p>
<p><strong>æ„å›¾ä¼˜å…ˆäºå®ç°ï¼ˆIntent Over Implementationï¼‰</strong>ï¼šè®°å½• <em>ä¸ºä»€ä¹ˆ</em>ï¼Œè€Œä¸åªæ˜¯ <em>æ€ä¹ˆåš</em>ã€‚å®ç°ç»†èŠ‚ä¼šå˜ï¼Œæ„å›¾ä¸ä¼šã€‚</p>
<p><strong>å¼¥åˆé¸¿æ²Ÿï¼ˆBridge the Gapï¼‰</strong>ï¼šè§„æ ¼åŒæ—¶æœåŠ¡äºäººå’Œ AIã€‚ä»»ä½•ä¸€æ–¹çœ‹ä¸æ‡‚ï¼Œè¿™ä»½è§„æ ¼å°±æ˜¯å¤±è´¥çš„ã€‚</p>
<p><strong>æ¸è¿›æŠ«éœ²ï¼ˆProgressive Disclosureï¼‰</strong>ï¼šä»ç®€å•å¼€å§‹ï¼Œåªåœ¨æ„Ÿåˆ°ç—›ç‚¹æ—¶æ‰å¢åŠ ç»“æ„ã€‚ä¸åšé¢„è®¾çš„å¤æ‚ã€‚</p>
<p>è¿™äº›åŸåˆ™ä¸åªæ˜¯æ–‡æ¡£â€”â€”LeanSpec çš„ <code>validate</code> å‘½ä»¤ä¼šè‡ªåŠ¨æ£€æŸ¥è§„æ ¼æ˜¯å¦ç¬¦åˆå®ƒä»¬ã€‚</p>
<h2 data-id="heading-3">æ ¸å¿ƒåŠŸèƒ½</h2>
<h3 data-id="heading-4">Web UI å¯è§†åŒ–ç®¡ç†</h3>
<p>æˆ‘æœ€å…´å¥‹çš„åŠŸèƒ½ï¼š<code>lean-spec ui</code> å¯åŠ¨å®Œæ•´çš„ Web ç•Œé¢ï¼Œè®©ä½ å¯è§†åŒ–åœ°ç®¡ç†è§„æ ¼ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨ Web UI</span>
npx lean-spec ui
</code></pre>
<p>UI æä¾›çœ‹æ¿è§†å›¾ã€è§„æ ¼è¯¦æƒ…é¡µï¼ˆæ”¯æŒ Mermaid å›¾è¡¨æ¸²æŸ“ï¼‰å’Œä¾èµ–å…³ç³»å¯è§†åŒ–â€”â€”å…¨åœ¨æµè§ˆå™¨é‡Œå®Œæˆã€‚é€‚åˆè§„åˆ’ä¼šè®®æˆ–å®¡æŸ¥é¡¹ç›®çŠ¶æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e56971740b714a3984dca3debb4ecabc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFydmluWmhhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764841157&amp;x-signature=w0yLhPWCaDlyyy85Zc7tcIFpGao%3D" alt="LeanSpec çœ‹æ¿è§†å›¾" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea45798bdc5e4ddeaa572f14f1ef9a2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFydmluWmhhbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764841157&amp;x-signature=HfxMM9x%2BoCc5W3wLKA0KAuvpkFc%3D" alt="LeanSpec è§„æ ¼è¯¦æƒ…é¡µ" loading="lazy"/></p>
<h3 data-id="heading-5">ç¬¬ä¸€æ€§åŸç†æ ¡éªŒ</h3>
<p>LeanSpec ä¸åªå­˜å‚¨è§„æ ¼ï¼Œè¿˜ä¼šå¯¹ç…§ç¬¬ä¸€æ€§åŸç†è¿›è¡Œæ ¡éªŒï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ ¡éªŒè§„æ ¼æ˜¯å¦ç¬¦åˆç¬¬ä¸€æ€§åŸç†</span>
lean-spec validate

<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼š</span>
<span class="hljs-comment"># specs/045-user-auth/README.md</span>
<span class="hljs-comment">#   âš ï¸  warning  Spec exceeds 300 lines (342)  context-economy</span>
<span class="hljs-comment">#   âš ï¸  warning  Missing overview section      structure</span>
<span class="hljs-comment"># </span>
<span class="hljs-comment"># âœ– 2 warnings in 1 spec</span>
</code></pre>
<p>è¿™èƒ½ä¿æŒè§„æ ¼ç²¾ç®€æœ‰æ„ä¹‰ï¼Œé˜²æ­¢é‡å‹ SDD å·¥å…·å¸¸è§çš„è§„æ ¼è†¨èƒ€é—®é¢˜ã€‚</p>
<h3 data-id="heading-6">æ™ºèƒ½æœç´¢ä¸é¡¹ç›®ç®¡ç†</h3>
<p>æŸ¥æ‰¾ç›¸å…³è§„æ ¼ä¸åº”è¯¥éœ€è¦è®°ä½ç²¾ç¡®åç§°ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è·¨æ‰€æœ‰è§„æ ¼çš„è¯­ä¹‰æœç´¢</span>
lean-spec search <span class="hljs-string">"authentication flow"</span>

<span class="hljs-comment"># é«˜çº§æŸ¥è¯¢</span>
lean-spec search <span class="hljs-string">"status:in-progress tag:api"</span>
lean-spec search <span class="hljs-string">"created:&gt;2025-11-01"</span>
</code></pre>
<p>çœ‹æ¿è§†å›¾è®©é¡¹ç›®çŠ¶æ€ä¸€ç›®äº†ç„¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">lean-spec board

<span class="hljs-comment"># ğŸ“‹ LeanSpec Board</span>
<span class="hljs-comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment"># ğŸ“… Planned (12)     ğŸš§ In Progress (3)     âœ… Complete (47)</span>
<span class="hljs-comment"># â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
</code></pre>
<h3 data-id="heading-7">MCP Serverï¼šAI é›†æˆ</h3>
<p>LeanSpec å†…ç½® MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œè®© AI åŠ©æ‰‹å¯ä»¥ç›´æ¥ä¸ä½ çš„è§„æ ¼äº¤äº’ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"mcpServers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"leanspec"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"command"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npx"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"args"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"@leanspec/mcp"</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ”¯æŒ Claude Codeã€Cursorã€GitHub Copilot ç­‰ MCP å…¼å®¹å·¥å…·ã€‚AI ä»£ç†å¯ä»¥æœç´¢è§„æ ¼ã€è¯»å–ä¸Šä¸‹æ–‡ã€æ›´æ–°çŠ¶æ€â€”â€”å…¨éƒ¨é€šè¿‡ç¼–ç¨‹æ¥å£å®Œæˆã€‚</p>
<h3 data-id="heading-8">ç¤ºä¾‹é¡¹ç›®å¿«é€Ÿä¸Šæ‰‹</h3>
<p>åˆšæ¥è§¦ SDDï¼Ÿä»ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹å¼€å§‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ•™ç¨‹é¡¹ç›®</span>
npx lean-spec init --example dark-theme
</code></pre>
<p>æä¾›ä¸‰ä¸ªç¤ºä¾‹ï¼š<code>dark-theme</code>ã€<code>dashboard-widgets</code> å’Œ <code>api-refactor</code>â€”â€”åˆ†åˆ«æ¼”ç¤ºä¸åŒçš„ SDD æ¨¡å¼ã€‚</p>
<h2 data-id="heading-9">å¼€å‘å†ç¨‹ï¼šç”¨ LeanSpec å¼€å‘ LeanSpec</h2>
<p>è¿™ä¸ªé¡¹ç›®æœ€æœ‰æ„æ€çš„åœ°æ–¹åœ¨äºï¼šåˆç‰ˆå‘å¸ƒåï¼Œ<strong>LeanSpec å®Œå…¨ä½¿ç”¨ LeanSpec è‡ªèº«æ¥å¼€å‘</strong>ã€‚</p>






























<table><thead><tr><th>é‡Œç¨‹ç¢‘</th><th>æ—¥æœŸ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç¬¬ä¸€è¡Œä»£ç </td><td>2025 å¹´ 10 æœˆ 23 æ—¥</td><td>ä»åŸºç¡€çš„è§„æ ¼å¢åˆ æ”¹æŸ¥å¼€å§‹</td></tr><tr><td>v0.1.0ï¼ˆé¦–æ¬¡å‘å¸ƒï¼‰</td><td>2025 å¹´ 11 æœˆ 2 æ—¥</td><td>ä»é›¶åˆ°å‘å¸ƒä»…ç”¨ 10 å¤©</td></tr><tr><td>v0.2.0ï¼ˆç”Ÿäº§å°±ç»ªï¼‰</td><td>2025 å¹´ 11 æœˆ 10 æ—¥</td><td>ç¬¬ä¸€æ€§åŸç†æ ¡éªŒï¼Œå®Œæ•´ CLI</td></tr><tr><td>v0.2.7ï¼ˆå½“å‰ç‰ˆæœ¬ï¼‰</td><td>2025 å¹´ 11 æœˆ 26 æ—¥</td><td>24 å¤©å†…å‘å¸ƒ 10 ä¸ªç‰ˆæœ¬</td></tr></tbody></table>
<p>åœ¨ LeanSpec é¡¹ç›®å†…éƒ¨ï¼Œå·²ç»åˆ›å»ºäº†è¶…è¿‡ 120 ä¸ªè§„æ ¼â€”â€”æ¶µç›–åŠŸèƒ½å®ç°ã€æ¶æ„å†³ç­–ã€å¤ç›˜åæ€ï¼Œç”šè‡³è¥é”€ç­–ç•¥ã€‚åé¦ˆå¾ªç¯éå¸¸ç´§å‡‘ï¼šå‘ç°ç—›ç‚¹ â†’ å†™è§„æ ¼ â†’ å®ç° â†’ ç”¨çœŸå®åœºæ™¯éªŒè¯ã€‚</p>
<p>æˆ‘è¿˜æŠŠ LeanSpec åº”ç”¨åˆ°äº†å…¶ä»–é¡¹ç›®ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcrawlab-team%2Fcrawlab" target="_blank" title="https://github.com/crawlab-team/crawlab" ref="nofollow noopener noreferrer">Crawlab</a>ï¼ˆ12k+ starsï¼‰â€”â€” ç½‘ç»œçˆ¬è™«ç®¡ç†å¹³å°</li>
<li>è¿™ä¸ªåšå®¢ï¼ˆmarvinzhang.devï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcodervisor" target="_blank" title="https://github.com/codervisor" ref="nofollow noopener noreferrer">codervisor</a> ç»„ç»‡ä¸‹å³å°†å‘å¸ƒçš„æ–°é¡¹ç›®</li>
</ul>
<p>åœ¨æ‰€æœ‰é¡¹ç›®ä¸­ï¼Œè§„å¾‹éƒ½æ˜¯ä¸€è‡´çš„ï¼šè§„æ ¼æä¾›äº†è·¨ä¼šè¯å­˜ç»­çš„ä¸Šä¸‹æ–‡ï¼ŒAI èƒ½æŒç»­å¯¹é½æˆ‘çš„æ„å›¾ï¼Œæˆ‘èŠ±åœ¨åå¤è§£é‡Šä¸Šçš„æ—¶é—´å¤§å¹…å‡å°‘ã€‚</p>
<h2 data-id="heading-10">LeanSpec çš„ç‹¬ç‰¹ä¹‹å¤„</h2>
<p>å¦‚æœä½ è¯»è¿‡æˆ‘çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarvinzhang.dev%2Fzh%2Fblog%2Fsdd-tools-practices" target="_blank" title="https://marvinzhang.dev/zh/blog/sdd-tools-practices" ref="nofollow noopener noreferrer">SDD å·¥å…·åˆ†æ</a>ï¼Œå°±çŸ¥é“æˆ‘è¯„ä¼°è¿‡è¿™ä¸ªé¢†åŸŸçš„å…­ä¸ªä¸»è¦å·¥å…·ã€‚LeanSpec çš„å®šä½æ˜¯è¿™æ ·çš„ï¼š</p>








































<table><thead><tr><th>ç»´åº¦</th><th>é‡å‹å·¥å…·</th><th>LeanSpec</th></tr></thead><tbody><tr><td><strong>å­¦ä¹ æ›²çº¿</strong></td><td>æ•°å¤©åˆ°æ•°å‘¨</td><td>å‡ åˆ†é’Ÿ</td></tr><tr><td><strong>è§„æ ¼å¼€é”€</strong></td><td>å¤§é‡å‰æœŸå·¥ä½œ</td><td>è¾¹å†™è¾¹è¡¥</td></tr><tr><td><strong>Token æˆæœ¬</strong></td><td>é€šå¸¸ &gt;2,000</td><td>ç›®æ ‡ &lt;300 è¡Œ</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>ç»“æ„åˆšæ€§</td><td>é€‚åº”ä½ çš„å·¥ä½œæµ</td></tr><tr><td><strong>å‚å•†é”å®š</strong></td><td>å¸¸è§</td><td>ä¸å­˜åœ¨</td></tr><tr><td><strong>ç†å¿µ</strong></td><td>å·¥å…·ä¼˜å…ˆ</td><td>æ–¹æ³•è®ºä¼˜å…ˆ</td></tr></tbody></table>
<p>LeanSpec çš„ "Lean" æœ‰å¤šé‡å«ä¹‰ï¼š</p>
<ul>
<li><strong>æ–¹æ³•è®º</strong>ï¼šåƒæ•æ·ä¸€æ ·ï¼Œæ˜¯æ— è®ºå·¥å…·å¦‚ä½•éƒ½èƒ½é‡‡çº³çš„åŸåˆ™</li>
<li><strong>è®¤çŸ¥è´Ÿæ‹…</strong>ï¼šä½å¼€é”€ï¼Œå¿«é€Ÿä¸Šæ‰‹</li>
<li><strong>Token ç»æµ</strong>ï¼šè§„æ ¼ä¿æŒç²¾ç®€ï¼Œèƒ½è£…è¿› AI çš„ä¸Šä¸‹æ–‡çª—å£</li>
<li><strong>çµæ´»æ€§</strong>ï¼šé€‚åº”ä½ çš„å·¥ä½œæµï¼Œè€Œä¸æ˜¯åè¿‡æ¥</li>
</ul>
<h2 data-id="heading-11">å¿«é€Ÿä¸Šæ‰‹</h2>
<p>5 åˆ†é’Ÿå†…è¯•ç”¨ LeanSpecï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…¨å±€å®‰è£…</span>
npm install -g lean-spec

<span class="hljs-comment"># åœ¨é¡¹ç›®ä¸­åˆå§‹åŒ–</span>
lean-spec init

<span class="hljs-comment"># åˆ›å»ºç¬¬ä¸€ä¸ªè§„æ ¼</span>
lean-spec create user-authentication

<span class="hljs-comment"># å¯åŠ¨ Web UI</span>
lean-spec ui
</code></pre>
<p>æˆ–è€…è¯•è¯•ç¤ºä¾‹é¡¹ç›®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx lean-spec init --example dark-theme
</code></pre>
<p><strong>å·²ç»åœ¨ç”¨ Spec Kit æˆ– OpenSpecï¼Ÿ</strong> å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lean-spec.dev%2Fdocs%2Fguide%2Fmigration" target="_blank" title="https://www.lean-spec.dev/docs/guide/migration" ref="nofollow noopener noreferrer">è¿ç§»æŒ‡å—</a>â€”â€”è¿ç§»è¿‡ç¨‹å¾ˆé¡ºç•…ã€‚</p>
<h2 data-id="heading-12">æœªæ¥è§„åˆ’</h2>
<p>LeanSpec ä»åœ¨æ´»è·ƒè¿­ä»£ä¸­ã€‚å½“å‰å¼€å‘é‡ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li>VS Code æ’ä»¶ï¼Œå®ç°å†…è”è§„æ ¼ç®¡ç†ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.lean-spec.dev%2Fspecs%2F17" target="_blank" title="https://web.lean-spec.dev/specs/17" ref="nofollow noopener noreferrer">è§„æ ¼ 17</a>ï¼‰</li>
<li>AI èŠå¤©ç•Œé¢ï¼Œå®ç°äº¤äº’å¼è§„æ ¼è¾…åŠ©ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.lean-spec.dev%2Fspecs%2F94" target="_blank" title="https://web.lean-spec.dev/specs/94" ref="nofollow noopener noreferrer">è§„æ ¼ 94</a>ï¼‰</li>
<li>å…¨é¢çš„å›½é™…åŒ–æ”¯æŒï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.lean-spec.dev%2Fspecs%2F91" target="_blank" title="https://web.lean-spec.dev/specs/91" ref="nofollow noopener noreferrer">è§„æ ¼ 91</a>ï¼‰</li>
<li>GitHub å¤šé¡¹ç›®é›†æˆï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.lean-spec.dev%2Fspecs%2F98" target="_blank" title="https://web.lean-spec.dev/specs/98" ref="nofollow noopener noreferrer">è§„æ ¼ 98</a>ï¼‰</li>
</ul>
<p>æˆ‘åš LeanSpec æ˜¯ä¸ºäº†è§£å†³è‡ªå·±çš„é—®é¢˜â€”â€”Vibe Coding å¸¦æ¥çš„ä»£ç è´¨é‡ä¸‹é™ã€AI ä¼šè¯é—´çš„ä¸Šä¸‹æ–‡ä¸¢å¤±ã€é‡å‹ SDD å·¥å…·çš„è®¤çŸ¥è´Ÿæ‹…ã€‚å¦‚æœä½ ä¹Ÿé¢ä¸´ç±»ä¼¼çš„æŒ‘æˆ˜ï¼Œå¸Œæœ›å®ƒå¯¹ä½ åŒæ ·æœ‰å¸®åŠ©ã€‚</p>
<hr/>
<p><strong>é“¾æ¥ï¼š</strong></p>
<ul>
<li>ğŸ“¦ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcodervisor%2Flean-spec" target="_blank" title="https://github.com/codervisor/lean-spec" ref="nofollow noopener noreferrer">GitHub</a></li>
<li>ğŸ“š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.lean-spec.dev%2F" target="_blank" title="https://www.lean-spec.dev/" ref="nofollow noopener noreferrer">æ–‡æ¡£</a></li>
<li>ğŸ“Š <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Flean-spec" target="_blank" title="https://www.npmjs.com/package/lean-spec" ref="nofollow noopener noreferrer">npm åŒ…</a></li>
</ul>
<p>æœ‰é—®é¢˜ã€åé¦ˆæˆ–åŠŸèƒ½å»ºè®®ï¼Ÿæ¬¢è¿æ issue æˆ–å‘èµ· <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcodervisor%2Flean-spec%2Fdiscussions" target="_blank" title="https://github.com/codervisor/lean-spec/discussions" ref="nofollow noopener noreferrer">è®¨è®º</a>ã€‚æ¯ä¸€æ¡æˆ‘éƒ½ä¼šçœ‹ã€‚</p>
<hr/>
<p>ğŸ“ <strong>æœ¬æ–‡åŒæ­¥å‘å¸ƒäºæˆ‘çš„ä¸ªäººæŠ€æœ¯åšå®¢</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarvinzhang.dev%2Fzh%2Fblog%2Fintroducing-leanspec" target="_blank" title="https://marvinzhang.dev/zh/blog/introducing-leanspec" ref="nofollow noopener noreferrer">marvinzhang.dev</a></p>
<p>ğŸ”— <strong>å®Œæ•´æ–‡ç« é“¾æ¥ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarvinzhang.dev%2Fzh%2Fblog%2Fintroducing-leanspec" target="_blank" title="https://marvinzhang.dev/zh/blog/introducing-leanspec" ref="nofollow noopener noreferrer">marvinzhang.dev/zh/blog/intâ€¦</a></p>
<p>ğŸ’¬ <strong>æ¬¢è¿è®¿é—®æˆ‘çš„åšå®¢äº†è§£æ›´å¤šæŠ€æœ¯æ–‡ç« ï¼</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åœ¨ Windows ç¯å¢ƒå®Œæˆ iOS ä¸Šæ¶ï¼Œè·¨å¹³å°å‘å¸ƒä½“ç³»çš„è½åœ°å®è·µ]]></title>    <link>https://juejin.cn/post/7577204540417474623</link>    <guid>https://juejin.cn/post/7577204540417474623</guid>    <pubDate>2025-11-27T09:40:49.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417474623" data-draft-id="7577042851080994859" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åœ¨ Windows ç¯å¢ƒå®Œæˆ iOS ä¸Šæ¶ï¼Œè·¨å¹³å°å‘å¸ƒä½“ç³»çš„è½åœ°å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:40:49.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åœ¨ Windows ç¯å¢ƒå®Œæˆ iOS ä¸Šæ¶ï¼Œè·¨å¹³å°å‘å¸ƒä½“ç³»çš„è½åœ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:40:49.000Z" title="Thu Nov 27 2025 09:40:49 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è®¸å¤šå…¬å¸å†…éƒ¨ï¼ŒiOS ä¸Šæ¶å¸¸è¢«è¯¯è®¤ä¸ºæ˜¯â€œå¿…é¡»ä¾èµ– Mac æ‰èƒ½è¿›è¡Œçš„ä»»åŠ¡â€ã€‚
ä½†éšç€è·¨ç«¯é¡¹ç›®å¢å¤šï¼Œç”šè‡³æœ‰å›¢é˜Ÿå®Œå…¨ä»¥ Windows ä¸ºä¸»åŠ›å¼€å‘ç¯å¢ƒï¼Œâ€œæ²¡æœ‰ Mac å¯ä»¥ä¸Šæ¶å—ï¼Ÿâ€æˆä¸ºå®é™…å·¥ç¨‹ä¸­åå¤è¢«æåŠçš„é—®é¢˜ã€‚
ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼š<strong>åœ¨åˆè§„å’Œå·¥ç¨‹é“¾è·¯å…è®¸çš„å‰æä¸‹ï¼ŒiOS ä¸Šæ¶æµç¨‹å®Œå…¨å¯ä»¥åœ¨ Windows ç¯å¢ƒä¸­é¡ºåˆ©å®Œæˆã€‚</strong></p>
<p>æœ¬æ–‡ä»å®è·µè§’åº¦å¤ç›˜ä¸€ä¸ªå…¸å‹çš„ Windows ç¯å¢ƒä¸Šæ¶æ–¹æ¡ˆï¼Œé‡ç‚¹å…³æ³¨ï¼šæ„å»ºã€ç­¾åã€ä¸Šä¼ ã€åä½œã€å®¡æ ¸ç­‰ç¯èŠ‚å¦‚ä½•åœ¨æ—  Mac æ¡ä»¶ä¸‹ä¿æŒç¨³å®šæ€§å’Œå¯æ§æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€ä¸ºä»€ä¹ˆè®¸å¤šå›¢é˜Ÿé€‰æ‹©åœ¨ Windows ç¯å¢ƒå®Œæˆä¸Šæ¶ï¼Ÿ</strong></h2>
<p>Windows åœ¨ä¼ä¸šä¸­çš„æ™®åŠç‡æé«˜ï¼Œæ— è®ºæ˜¯å‰ç«¯å›¢é˜Ÿã€è·¨ç«¯å›¢é˜Ÿã€åç«¯å›¢é˜Ÿè¿˜æ˜¯æ¸¸æˆå›¢é˜Ÿï¼Œå¼€å‘æœºå¤§é‡ä½¿ç”¨ Windows æ˜¯äº‹å®ã€‚</p>
<p>åœ¨ä»¥ä¸‹åœºæ™¯ä¸­ï¼Œâ€œWindows ä¸Šæ¶â€éœ€æ±‚å°¤å…¶çªå‡ºï¼š</p>
<ul>
<li>å‰ç«¯ä¸»å¯¼çš„ Appï¼ˆHybridã€uni-appã€H5ï¼‰</li>
<li>å°å›¢é˜Ÿæ— é¢„ç®—è´­ä¹° Mac</li>
<li>æ¸¸æˆå›¢é˜Ÿä½¿ç”¨ Unity / Cocosï¼Œç¼–è¾‘å™¨æœ¬åœ°æ˜¯ Windows</li>
<li>ä¼ä¸š CI/CD åœ¨ Linux / Windows æœåŠ¡å™¨è¿è¡Œ</li>
<li>æµ·å¤–å›¢é˜Ÿåˆ†å¸ƒå¼åä½œï¼ŒMac æ•°é‡æœ‰é™</li>
</ul>
<p>å› æ­¤ï¼Œä¸€ä¸ªå¯åœ¨ Windows è‡ªç„¶è¿è¡Œçš„ä¸Šæ¶æ–¹æ¡ˆï¼Œèƒ½æ˜¾è‘—é™ä½æˆæœ¬å¹¶æå‡å·¥ç¨‹åä½œæ•ˆç‡ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€åœ¨ Windows ç¯å¢ƒä¸Šæ¶çš„å…³é”®æŒ‘æˆ˜</strong></h2>
<p>æ²¡æœ‰ Mac çš„å…³é”®éš¾ç‚¹å¹¶éç¼–ç ï¼Œè€Œæ˜¯ï¼š</p>
<ol>
<li><strong>è¯ä¹¦ç”Ÿæˆä¸ä¾èµ–é’¥åŒ™ä¸²åŠ©æ‰‹</strong></li>
<li><strong>æ„å»ºæ— éœ€æœ¬åœ° Xcode</strong></li>
<li><strong>ä¸Šä¼  IPA ä¸ä¾èµ– Transporter/Xcode Organizer</strong></li>
<li><strong>å›¢é˜Ÿåä½œä¸åˆ†å‘æµç¨‹éœ€å¯é‡å¤æ‰§è¡Œ</strong></li>
</ol>
<p>è§£å†³ä»¥ä¸Šå…³é”®ç‚¹ï¼ŒWindows ä¸Šæ¶è‡ªç„¶æˆç«‹ã€‚</p>
<hr/>
<h2 data-id="heading-2"><strong>ä¸‰ã€Windows ç¯å¢ƒçš„è¯ä¹¦ä¸ç­¾åç®¡ç†ï¼šè·¨å¹³å°å·¥å…·é“¾æˆä¸ºåŸºç¡€</strong></h2>
<p>ä¼ ç»Ÿæ–¹å¼ï¼š</p>
<ul>
<li>ä½¿ç”¨ Mac çš„é’¥åŒ™ä¸²åŠ©æ‰‹ç”Ÿæˆ CSR</li>
<li>åœ¨ Apple Developer ä¸­ä¸‹è½½è¯ä¹¦</li>
<li>ç”Ÿæˆ p12</li>
</ul>
<p>é—®é¢˜åœ¨äº Windows æ— æ³•ç›´æ¥å¤„ç†é’¥åŒ™ä¸²ä¸ Mac ç§é’¥æ ¼å¼ã€‚</p>
<p>ç°ä»£è§£å†³æ–¹å¼ä¾èµ–å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯åœ¨ Windows ç›´æ¥ç”Ÿæˆ iOS è¯ä¹¦ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/04bd5df26aed4b0ea353205414290b71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764841249&amp;x-signature=ikPHx6ZLjdVbQwQDzpA%2FbdPIuW0%3D" alt="è¯ä¹¦ç”Ÿæˆ" loading="lazy"/></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>Windows / Linux / macOS éƒ½èƒ½ç”Ÿæˆè¯ä¹¦</li>
<li>å›¢é˜Ÿåä½œä¸éœ€è¦åå¤å¯¼å‡º</li>
<li>å¤šè®¾å¤‡å…±äº«è¯ä¹¦ä¸å†å—é™</li>
</ul>
<p>è¿™æ˜¯æ•´ä¸ª Windows ä¸Šæ¶ä½“ç³»çš„â€œç¬¬ä¸€å—åŸºçŸ³â€ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>å››ã€æ„å»º IPAï¼šä¸åŒé¡¹ç›®ç±»å‹çš„ Windows è§£å†³æ–¹æ¡ˆ</strong></h2>
<p>æ„å»ºæ–¹å¼å–å†³äº App æŠ€æœ¯æ ˆã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>1. Web / Hybrid / uni-app é¡¹ç›®</strong></h3>
<p>æœ€å‹å¥½çš„ç±»å‹ã€‚</p>
<p>å› ä¸ºï¼š</p>
<ul>
<li>ä¸éœ€è¦æœ¬åœ° iOS åŸç”Ÿä»£ç ç¼–è¯‘</li>
<li>ä¸éœ€è¦ Xcode</li>
<li>äº‘ç«¯ç›´æ¥ç”Ÿæˆ ipa</li>
</ul>
<p>å¸¸è§æ–¹å¼ï¼š</p>
<ul>
<li>HBuilderX äº‘æ‰“åŒ…</li>
<li>Web é¡¹ç›® â†’ äº‘ç«¯ç¼–è¯‘ â†’ å¾—åˆ° ipa</li>
</ul>
<p>æ•´ä¸ªè¿‡ç¨‹å¯ä»¥å®Œå…¨åœ¨ Windows æ‰§è¡Œã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>2. Flutter / React Native é¡¹ç›®</strong></h3>
<p>æ„å»ºä»éœ€è¦ iOS ç¼–è¯‘é“¾ï¼Œå› æ­¤åœ¨ Windows ç¯å¢ƒé€šå¸¸é‡‡ç”¨ï¼š</p>
<ul>
<li>GitHub Actionsï¼ˆmacOS runnerï¼‰</li>
<li>Codemagic / Appcircle</li>
<li>å›¢é˜Ÿå…±äº«çš„äº‘æ„å»ºèŠ‚ç‚¹</li>
</ul>
<p>æ„å»ºæ­¥éª¤è‡ªåŠ¨åŒ–ï¼Œæœ€ç»ˆä»æµæ°´çº¿ä¸‹è½½ ipaï¼Œå³å¯è½¬å…¥ Windows ç«¯ç»§ç»­å¤„ç†ä¸Šä¼ ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>3. Unity / Cocos æ¸¸æˆé¡¹ç›®</strong></h3>
<p>æ¸¸æˆèµ„æºæ„å»ºåœ¨ Windows å®Œæˆï¼š</p>
<ul>
<li>åœ¨ Windows ç”Ÿæˆ Xcode å·¥ç¨‹</li>
<li>ä¸Šä¼ åˆ°äº‘ç«¯æ„å»ºï¼ˆCI/CDï¼‰</li>
<li>å¾—åˆ° ipa</li>
</ul>
<p>è¿™ç§æ–¹å¼åœ¨æ¸¸æˆå›¢é˜Ÿä¸­æœ€å¸¸è§ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>äº”ã€Windows ç¯å¢ƒçš„ä¸Šä¼ ç¯èŠ‚ï¼šçœŸæ­£å®ç°è·¨å¹³å°çš„å…³é”®</strong></h2>
<p>åœ¨ Windows ä¸Šï¼Œæœ€å¤§çªç ´ç‚¹æ˜¯ ipa ä¸Šä¼ ç¯èŠ‚ã€‚
ä¼ ç»Ÿå·¥å…·ï¼ˆTransporterã€Xcode Organizerï¼‰éƒ½éœ€è¦ macOSã€‚</p>
<p>ç°åœ¨çš„å·¥ç¨‹å®è·µæ˜¯ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°å‘½ä»¤è¡Œä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">appuploader_cli \
  -u ios@team.com \
  -p xxx-xxx-xxx-xxx \
  -c 2 \
  -f ./build/release.ipa
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å®Œæ•´æ”¯æŒ Windows å‘½ä»¤è¡Œ</li>
<li>æ— éœ€ Xcode</li>
<li>æ–°æ—§ä¸Šä¼ é€šé“å¯é€‰</li>
<li>é€‚ç”¨äº TF æµ‹è¯•ä¸æ­£å¼å‘å¸ƒ</li>
<li>æ”¯æŒè‡ªåŠ¨åŒ–é›†æˆå‘å±•åˆ° CI/CD</li>
</ul>
<p>è¿™æ„å‘³ç€å›¢é˜Ÿä¸å¿…å†ä¸ºâ€œä¸Šä¼ â€ç‰¹æ„é…ç½®ç‹¬ç«‹ Mac ç¯å¢ƒã€‚</p>
<p>å›¾å½¢åŒ–ç•Œé¢ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/881bd76652134b61803ca8348f3bcab7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWlvcGVuY29kZQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764841249&amp;x-signature=HNvp5cfZIf%2BvRfA4S%2FO%2FisgGJtM%3D" alt="ipaä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8"><strong>å…­ã€ä¸Šæ¶æäº¤ï¼šWindows ç¯å¢ƒä¸ App Store Connect çš„åä½œæ–¹å¼</strong></h2>
<p>ä¸Šä¼ æ„å»ºåï¼Œå‰©ä½™ä»»åŠ¡ä¸»è¦åœ¨ç½‘é¡µç«¯ App Store Connect æ‰§è¡Œï¼š</p>
<ul>
<li>é…ç½®æˆªå›¾ï¼ˆå¯åœ¨ Windows åˆ¶ä½œï¼‰</li>
<li>å¡«å†™æè¿°ã€å…³é”®è¯</li>
<li>è®¾ç½®æƒé™ä¸éšç§æ ‡ç­¾</li>
<li>ä¸Šä¼ é¢„è§ˆè§†é¢‘ï¼ˆå¯é€‰ï¼‰</li>
<li>å®¡æ ¸è¯´æ˜</li>
<li>æ·»åŠ æµ‹è¯•è´¦å·ï¼ˆå¦‚éœ€è¦ï¼‰</li>
</ul>
<p>è¿™äº›æ“ä½œå…¨éƒ¨é€šè¿‡æµè§ˆå™¨å®Œæˆï¼Œä¸ä¾èµ–ç³»ç»Ÿå¹³å°ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>ä¸ƒã€å®¡æ ¸é˜¶æ®µï¼šä¸ç³»ç»Ÿæ— å…³ï¼Œä½†ä¸æµç¨‹è´¨é‡å¼ºç›¸å…³</strong></h2>
<p>å®¡æ ¸æœ¬èº«ä¸ä¾èµ–æ“ä½œç³»ç»Ÿã€‚
çœŸæ­£å½±å“å®¡æ ¸çš„å¹¶ä¸æ˜¯â€œä½ ç”¨ Mac è¿˜æ˜¯ Windowsâ€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>åŠŸèƒ½ç¨³å®š</li>
<li>é¦–å±åŠ è½½é€Ÿåº¦</li>
<li>ç™»å½•æµç¨‹æ˜¯å¦å¯å¤ç°</li>
<li>æƒé™è¯´æ˜æ˜¯å¦æ¸…æ™°</li>
<li>éšç§æ ‡ç­¾æ˜¯å¦ä¸€è‡´</li>
<li>æœåŠ¡å™¨æ˜¯å¦èƒ½è®¿é—®</li>
<li>æˆªå›¾æ˜¯å¦çœŸå®</li>
<li>æäº¤æ˜¯å¦åŒ…å«è¶³å¤Ÿè¯´æ˜</li>
</ul>
<p>ä»¥ä¸‹æ‹’å®¡æœ€å¸¸è§ï¼š</p>
<ul>
<li>2.1ï¼šåŠŸèƒ½ä¸å¯ç”¨</li>
<li>4.2ï¼šå†…å®¹ä¸è¶³ / å£³åº”ç”¨</li>
<li>5.1.1ï¼šéšç§æƒé™æœªè¯´æ˜</li>
<li>4.3ï¼šé‡å¤ App</li>
<li>3.1ï¼šæ”¯ä»˜è¿è§„</li>
</ul>
<p>è¿™äº›é—®é¢˜ä¸æ“ä½œç³»ç»Ÿæ— å…³ï¼Œä¸ App è´¨é‡å’Œæäº¤å†…å®¹æœ‰å…³ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>å…«ã€Windows ä¸Šæ¶æ–¹æ¡ˆçš„ä¼˜åŠ¿ï¼šä¸æ˜¯æƒå®œï¼Œè€Œæ˜¯è¶‹åŠ¿</strong></h2>
<p>ç»è¿‡å¤šé¡¹ç›®å®è·µï¼ŒWindows ä¸Šæ¶æ–¹æ¡ˆä½“ç°å‡ºå‡ ä¸ªæ˜æ˜¾ä¼˜åŠ¿ï¼š</p>
<hr/>
<h3 data-id="heading-11"><strong>1. å›¢é˜Ÿä¸å†è¢«â€œå¿…é¡»æœ‰ Macâ€é™åˆ¶</strong></h3>
<p>å‰ç«¯å›¢é˜Ÿã€æµ‹è¯•å›¢é˜Ÿã€è¿è¥å›¢é˜Ÿä¸éœ€è¦ Macï¼Œå³å¯ç‹¬ç«‹å®Œæˆä¸Šæ¶æµç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>2. æ›´é€‚åˆè·¨å›½å›¢é˜Ÿä¸å¤šäººåä½œ</strong></h3>
<p>Windows ç¯å¢ƒæ™®åŠç‡é«˜ï¼Œå¤šäººå¯å¹¶è¡Œå¤„ç†ï¼š</p>
<ul>
<li>æ„å»ºè§¦å‘</li>
<li>ä¸Šä¼ </li>
<li>æ–‡æ¡ˆå‡†å¤‡</li>
<li>æˆªå›¾æ•´ç†</li>
<li>å®¡æ ¸æ²Ÿé€š</li>
</ul>
<p>å‡å°‘å¯¹â€œå”¯ä¸€ä¸€å° Macâ€çš„ä¾èµ–ã€‚</p>
<hr/>
<h3 data-id="heading-13"><strong>3. æ›´é€‚åˆ CI/CD è‡ªåŠ¨åŒ–</strong></h3>
<p>æœåŠ¡å™¨å¤šæ•°æ˜¯ Linux æˆ– Windowsï¼š</p>
<ul>
<li>äº‘æ„å»ºç”Ÿæˆ ipa</li>
<li>Windows / Linux CLI ä¸Šä¼ </li>
<li>è‡ªåŠ¨è§¦å‘ TF æµ‹è¯•</li>
<li>è‡ªåŠ¨é€šçŸ¥å›¢é˜Ÿ</li>
</ul>
<p>ä¸Šæ¶æµç¨‹å¯ä»¥é«˜åº¦è‡ªåŠ¨åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-14"><strong>4. æˆæœ¬æ›´ä½ï¼Œé£é™©æ›´ä½</strong></h3>
<p>ä¸éœ€è¦ç»´æŠ¤é¢å¤–ç¡¬ä»¶ã€ä¸éœ€è¦æ‰‹å·¥ä¸Šä¼ ï¼Œä¹Ÿæ— éœ€æ‹…å¿ƒ Mac ç³»ç»Ÿå‡çº§å¸¦æ¥çš„å…¼å®¹é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-15"><strong>åœ¨ Windows ä¸Šè¿›è¡Œ iOS ä¸Šæ¶ï¼Œä¸ä»…å¯è¡Œï¼Œè€Œä¸”æˆç†Ÿ</strong></h2>
<p>é€šè¿‡ä»¥ä¸‹ç»„åˆï¼š</p>
<ul>
<li><strong>è·¨ç³»ç»Ÿè¯ä¹¦ç®¡ç†</strong></li>
<li><strong>äº‘æ„å»ºç”Ÿæˆ ipa</strong></li>
<li><strong>Windows/Linux ä¸Šä¼  ipa</strong></li>
<li><strong>æµè§ˆå™¨å®Œæˆ App Store Connect æ“ä½œ</strong></li>
</ul>
<p>ä¸€ä¸ªå®Œæ•´çš„ iOS ä¸Šæ¶æµç¨‹å³å¯åœ¨ Windows ç¯å¢ƒé¡ºåˆ©å±•å¼€ã€‚</p>
<p>è¿™ä¸æ˜¯æƒå®œä¹‹è®¡ï¼Œè€Œæ˜¯ä¸€ç§é€‚åˆç°ä»£å¤šç«¯å›¢é˜Ÿçš„å¯æŒç»­ä¸Šæ¶ä½“ç³»ã€‚
å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.applicationloader.net%2Ftutorial%2Fzh%2F83%2F83.html" target="_blank" title="https://www.applicationloader.net/tutorial/zh/83/83.html" ref="nofollow noopener noreferrer">www.applicationloader.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[FiddleræŠ“åŒ…é…ç½®ä¸ä½¿ç”¨æ•™ç¨‹ï¼ŒHTTPHTTPSæŠ“åŒ…ã€ä»£ç†è®¾ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7577220965437358134</link>    <guid>https://juejin.cn/post/7577220965437358134</guid>    <pubDate>2025-11-27T09:43:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577220965437358134" data-draft-id="7577204540417540159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="FiddleræŠ“åŒ…é…ç½®ä¸ä½¿ç”¨æ•™ç¨‹ï¼ŒHTTPHTTPSæŠ“åŒ…ã€ä»£ç†è®¾ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:43:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            FiddleræŠ“åŒ…é…ç½®ä¸ä½¿ç”¨æ•™ç¨‹ï¼ŒHTTPHTTPSæŠ“åŒ…ã€ä»£ç†è®¾ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:43:51.000Z" title="Thu Nov 27 2025 09:43:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£è½¯ä»¶å¼€å‘ä¸­ï¼Œæ— è®ºæ˜¯å‰ç«¯è°ƒè¯•ã€ç§»åŠ¨ç«¯å¼€å‘ï¼Œè¿˜æ˜¯æ¥å£è”è°ƒä¸æ€§èƒ½ä¼˜åŒ–ï¼Œâ€œæŠ“åŒ…â€å‡ ä¹æ˜¯æ¯ä½å¼€å‘è€…ç»•ä¸å¼€çš„å…³é”®æŠ€èƒ½ã€‚
è€Œåœ¨æ‰€æœ‰æŠ“åŒ…å·¥å…·ä¸­ï¼Œ<strong>FiddleræŠ“åŒ…å·¥å…·</strong> ä»¥å…¶å¼ºå¤§çš„åŠŸèƒ½å’Œçµæ´»çš„é…ç½®èƒ½åŠ›ï¼Œæˆä¸ºä¸šå†…æœ€å—æ¬¢è¿çš„ç½‘ç»œè°ƒè¯•åˆ©å™¨ä¹‹ä¸€ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥å®æˆ˜è§’åº¦ï¼Œè¯¦ç»†ä»‹ç» <strong>Fiddlerä½¿ç”¨æ•™ç¨‹ã€ä»£ç†é…ç½®ã€HTTPSæŠ“åŒ…æŠ€å·§ã€è¯·æ±‚è°ƒè¯•ä¸å¸¸è§é—®é¢˜åˆ†æ</strong>ï¼Œå¸®åŠ©ä½ ä»å…¥é—¨åˆ°ç²¾é€šï¼ŒçœŸæ­£æŒæ¡è¿™æ¬¾å¼ºå¤§çš„ç½‘ç»œè°ƒè¯•å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€FiddleræŠ“åŒ…å·¥å…·æ¦‚è§ˆ</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸æ¨å‡ºçš„ä¸€æ¬¾ HTTP/HTTPS æŠ“åŒ…å’Œç½‘ç»œè°ƒè¯•å·¥å…·ã€‚
å®ƒé€šè¿‡å……å½“ç³»ç»Ÿä»£ç†æœåŠ¡å™¨çš„æ–¹å¼ï¼Œæ•è·è®¾å¤‡å‘å‡ºçš„ç½‘ç»œè¯·æ±‚ä¸å“åº”ï¼Œä»è€Œå¸®åŠ©å¼€å‘è€…ç›´è§‚æŸ¥çœ‹ã€ä¿®æ”¹å’Œåˆ†æç½‘ç»œé€šä¿¡æ•°æ®ã€‚</p>
<p>ç›¸è¾ƒäºå…¶ä»–å·¥å…·ï¼ˆå¦‚ Charlesã€Postmanã€Wiresharkï¼‰ï¼ŒFiddler çš„ä¼˜åŠ¿ä½“ç°åœ¨ï¼š</p>
<ul>
<li>å…è´¹ã€ç¨³å®šã€åŠŸèƒ½å…¨é¢ï¼›</li>
<li>æ”¯æŒå¤šç«¯æŠ“åŒ…ï¼ˆWebã€Appã€å°ç¨‹åºï¼‰ï¼›</li>
<li>å¯å®ç°æ–­ç‚¹è°ƒè¯•ã€è¯·æ±‚ä¿®æ”¹ã€Mock æ¥å£ï¼›</li>
<li>æ”¯æŒ HTTPS è§£å¯†ä¸æ€§èƒ½åˆ†æï¼›</li>
<li>å¯è‡ªå®šä¹‰è§„åˆ™ä¸è„šæœ¬æ‰©å±•ã€‚</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>Fiddler ä¸åªæ˜¯â€œæŠ“åŒ…å·¥å…·â€ï¼Œæ›´æ˜¯ä¸€æ¬¾â€œç½‘ç»œåˆ†æä¸æ¥å£è°ƒè¯•å¹³å°â€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸é…ç½®</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>Fiddler çš„å®‰è£…åŒ…ä½“ç§¯å°ï¼Œå®‰è£…è¿‡ç¨‹ç®€å•ã€‚
å®‰è£…å®Œæˆåï¼Œå¯åŠ¨è½¯ä»¶å³å¯è‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ã€‚</p>
<ul>
<li>å·¦ä¸‹è§’æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥æ˜¾ç¤º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†è®¾ç½®ï¼ˆç”µè„‘ä¸ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒFiddler ä»…æ•è·æœ¬æœºè¯·æ±‚ã€‚
è‹¥éœ€æŠ“å–æ‰‹æœºæˆ–å…¶ä»–è®¾å¤‡çš„è¯·æ±‚ï¼Œåˆ™éœ€å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•æ  <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•ç”µè„‘ IP åœ°å€å’Œç«¯å£å·ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘åœ¨åŒä¸€ Wi-Fi ç½‘ç»œï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£å·ï¼š8888</li>
</ul>
</li>
</ol>
<p>æ­¤æ—¶ï¼ŒFiddler å³å¯æ•è·ç§»åŠ¨ç«¯çš„ HTTP æµé‡ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>éšç€ HTTPS æ™®åŠï¼ŒFiddler éœ€è¦é€šè¿‡è¯ä¹¦è§£å¯†æ–¹å¼æŸ¥çœ‹åŠ å¯†æµé‡ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»» Fiddler æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥æŠ“å–ç§»åŠ¨ç«¯ HTTPS è¯·æ±‚ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨æ‰‹æœºä¿¡ä»»ã€‚</li>
</ul>
<p>å®Œæˆé…ç½®åï¼Œä½ å°†èƒ½æŸ¥çœ‹ HTTPS è¯·æ±‚çš„å®Œæ•´å†…å®¹ï¼ŒåŒ…æ‹¬å‚æ•°ä¸å“åº”ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddleræ ¸å¿ƒåŠŸèƒ½ä¸ä½¿ç”¨æŠ€å·§</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>Fiddler ä¼šè®°å½•ç³»ç»Ÿä¸­çš„æ‰€æœ‰è¯·æ±‚ï¼Œæ¯æ¡è¯·æ±‚éƒ½åŒ…å«ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹å¼ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰ï¼›</li>
<li>è¯·æ±‚è·¯å¾„ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ã€Cookie ä¸è¯·æ±‚ä½“ï¼›</li>
<li>å“åº”çŠ¶æ€ç ã€å“åº”ä½“ä¸æ—¶é—´æ¶ˆè€—ã€‚</li>
</ul>
<p>æŸæ¬¡è°ƒè¯•æ¥å£æ—¶ï¼Œå“åº”è¿”å›ç©º JSONã€‚
é€šè¿‡ Fiddler å‘ç°è¯·æ±‚å¤´ä¸­ <code>Content-Type</code> ç¼ºå¤±ï¼Œå¯¼è‡´åç«¯æœªæ­£ç¡®è§£æè¯·æ±‚ä½“ã€‚</p>
<p>çŸ­çŸ­å‡ ç§’å³å¯å®šä½é”™è¯¯æºã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ–­ç‚¹è°ƒè¯•ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler å¯åœ¨è¯·æ±‚å‘å‡ºå‰æˆ–å“åº”è¿”å›å‰æ‹¦æˆªæ•°æ®ï¼Œå…è®¸å¼€å‘è€…ä¿®æ”¹è¯·æ±‚æˆ–å“åº”å†…å®¹ã€‚</p>
<p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ¨¡æ‹Ÿæ¥å£è¿”å›é”™è¯¯ï¼ˆå¦‚ 500/403ï¼‰ï¼›</li>
<li>ä¿®æ”¹å‚æ•°æµ‹è¯•æ¥å£å®¹é”™ï¼›</li>
<li>å»¶è¿Ÿå“åº”éªŒè¯å‰ç«¯åŠ è½½é€»è¾‘ã€‚</li>
</ul>
<p>è¾“å…¥å‘½ä»¤ <code>bpu yourapi.com</code> å¯å¯¹æŒ‡å®šæ¥å£å¯ç”¨æ–­ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. æ¨¡æ‹Ÿæ¥å£å“åº”ï¼ˆAutoResponderï¼‰</strong></h3>
<p>Fiddler çš„ AutoResponder æ¨¡å—å¯ç”¨äº Mock æ¥å£æ•°æ®ã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ åŒ¹é…è§„åˆ™ï¼›</li>
<li>æŒ‡å®šæœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰è¿”å›å†…å®¹ï¼›</li>
<li>å¯ç”¨è§„åˆ™åï¼Œè¯·æ±‚å°†è‡ªåŠ¨è¿”å›æ¨¡æ‹Ÿå“åº”ã€‚</li>
</ol>
<p>å‰ç«¯å¯æ¨¡æ‹Ÿ <code>{ "code":200,"msg":"success" }</code>ï¼Œæ— éœ€åç«¯å³å¯å®Œæˆè°ƒè¯•ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—æ”¯æŒè‡ªå®šä¹‰æ„é€ ä¸é‡å‘è¯·æ±‚ã€‚</p>
<p><strong>å¸¸è§ç”¨é€”ï¼š</strong></p>
<ul>
<li>éªŒè¯æ¥å£ç­¾åï¼›</li>
<li>æµ‹è¯•å‚æ•°å˜åŒ–ï¼›</li>
<li>å¤ç°çº¿ä¸Š Bugã€‚</li>
</ul>
<p>å³é”®å†å²è¯·æ±‚ â†’ â€œReplay â†’ Reissue Requestâ€ å¯å¿«é€Ÿé‡æ”¾ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—å±•ç¤ºè¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼ˆDNS â†’ TCP â†’ TLS â†’ Server â†’ Downloadï¼‰ã€‚</p>
<p>é€šè¿‡æ—¶åºå›¾å¯åˆ†æï¼š</p>
<ul>
<li>å“ªä¸ªé˜¶æ®µè€—æ—¶æœ€é•¿ï¼›</li>
<li>è¯·æ±‚å»¶è¿Ÿæ˜¯å¦æ¥è‡ªç½‘ç»œæˆ–æœåŠ¡å™¨ï¼›</li>
<li>é¡µé¢åŠ è½½æ˜¯å¦è¢«èµ„æºé˜»å¡ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šå®šä½æ¥å£å»¶è¿Ÿé—®é¢˜</strong></h2>
<p>ä¸€æ¬¡ç§»åŠ¨ç«¯æ¥å£è¯·æ±‚ç»å¸¸è¶…æ—¶ã€‚
é€šè¿‡ Fiddler çš„ Timeline å‘ç° è¯·æ±‚é˜¶æ®µä¸­ <strong>TLS æ¡æ‰‹è€—æ—¶ 1.2 ç§’</strong>ï¼Œæ˜æ˜¾é«˜äºæ­£å¸¸èŒƒå›´ã€‚</p>
<p>è¿›ä¸€æ­¥æ’æŸ¥å‘ç°ï¼Œæµ‹è¯•ç¯å¢ƒçš„ HTTPS è¯ä¹¦é…ç½®é”™è¯¯ï¼Œå¯¼è‡´å¤šæ¬¡æ¡æ‰‹é‡è¯•ã€‚
ä¿®å¤è¯ä¹¦åï¼Œæ¥å£è€—æ—¶ä» 3.8 ç§’é™è‡³ 1.1 ç§’ã€‚</p>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€FiddleråŠŸèƒ½æ¨¡å—æ±‡æ€»</strong></h2>



































<table><thead><tr><th>æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰æ¡ä»¶è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦ç›®æ ‡æ¥å£è°ƒè¯•</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£è¿”å›</td><td>å‰åç«¯åˆ†ç¦»å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚</td><td>æµ‹è¯•å¼‚å¸¸ä¸å®‰å…¨éªŒè¯</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£æµ‹è¯•ä¸å¤ç°</td></tr><tr><td><strong>Timeline</strong></td><td>åˆ†ææ€§èƒ½ç“¶é¢ˆ</td><td>è¯·æ±‚ä¼˜åŒ–ä¸æ€§èƒ½è¯„ä¼°</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ç‰¹ç‚¹</th><th>é€‚ç”¨äººç¾¤</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€åŠŸèƒ½å…¨ã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•äººå‘˜</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢ç®€æ´ã€æ˜“ä¸Šæ‰‹</td><td>æ–°æ‰‹ç”¨æˆ·</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ çµæ´»</td><td>API æµ‹è¯•äººå‘˜</td></tr><tr><td><strong>Wireshark</strong></td><td>åº•å±‚ç½‘ç»œåˆ†æå¼º</td><td>å®‰å…¨ç ”ç©¶è€…</td></tr></tbody></table>
<p>Fiddler æ˜¯å¼€å‘è°ƒè¯•é˜¶æ®µæœ€å®ç”¨çš„ HTTP/HTTPS æŠ“åŒ…å·¥å…·ä¹‹ä¸€ï¼Œå…¼é¡¾å¯è§†åŒ–ã€æ˜“ç”¨æ€§ä¸çµæ´»æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³æ›´æŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†è®¾ç½®</strong> ä¸ <strong>HTTPS è°ƒè¯•æŠ€å·§</strong>ï¼Ÿæ¨èè®¿é—® <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a></strong></p>
<p>ä½ å°†æ‰¾åˆ°ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦å®‰è£…æŒ‡å—ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†è®¾ç½®ï¼›</li>
<li>Mock æ•°æ®ä¸æ€§èƒ½è°ƒè¯•å®ä¾‹ï¼›</li>
<li>å¸¸è§é”™è¯¯ä¸å®æˆ˜è§£å†³æ–¹æ¡ˆã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è‹¹æœAppä¸Šæ¶å…¨æµç¨‹æŒ‡å—ï¼šä»æ³¨å†Œåˆ°å®¡æ ¸é€šè¿‡ï¼Œä¸€æ–‡è¯»æ‡‚]]></title>    <link>https://juejin.cn/post/7577220965437390902</link>    <guid>https://juejin.cn/post/7577220965437390902</guid>    <pubDate>2025-11-27T09:46:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577220965437390902" data-draft-id="7577198193215307819" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è‹¹æœAppä¸Šæ¶å…¨æµç¨‹æŒ‡å—ï¼šä»æ³¨å†Œåˆ°å®¡æ ¸é€šè¿‡ï¼Œä¸€æ–‡è¯»æ‡‚"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-27T09:46:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è‹¹æœAppä¸Šæ¶å…¨æµç¨‹æŒ‡å—ï¼šä»æ³¨å†Œåˆ°å®¡æ ¸é€šè¿‡ï¼Œä¸€æ–‡è¯»æ‡‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:46:23.000Z" title="Thu Nov 27 2025 09:46:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‹¹æœ App ä¸Šæ¶å…¨æµç¨‹æŒ‡å—ï¼šä»æ³¨å†Œåˆ°å®¡æ ¸é€šè¿‡ï¼Œä¸€æ–‡è¯»æ‡‚</p>
<p>åœ¨ç§»åŠ¨åº”ç”¨å¸‚åœºä¸­ï¼Œè‹¹æœ App Store å‡­å€Ÿåºå¤§çš„ç”¨æˆ·åŸºæ•°ä¸é«˜ä»˜è´¹æ„æ„¿ï¼Œæˆä¸ºå¼€å‘è€…å¿…äº‰ä¹‹åœ°ã€‚ä½† App ä¸Šæ¶ç»éæ˜“äº‹ï¼Œä»æ³¨å†Œè´¦å·ã€å‡†å¤‡èµ„æ–™ï¼Œåˆ°æäº¤å®¡æ ¸ã€åº”å¯¹åé¦ˆï¼Œæ¯ä¸€ç¯èŠ‚éƒ½æš—è—æŒ‘æˆ˜ï¼Œç¨æœ‰å·®æ± å°±å¯èƒ½è¢«æ‹’ï¼Œè€—è´¹å¤§é‡æ—¶é—´ç²¾åŠ›ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¢³ç†è‹¹æœ App ä¸Šæ¶å…¨æµç¨‹ï¼Œå¸®å¼€å‘è€…é¡ºåˆ©é—¯å…³ï¼Œè®©ä¼˜è´¨ App å¿«é€Ÿè§¦è¾¾ç”¨æˆ·ã€‚</p>
<p><strong>ä¸€ã€å‰æœŸå‡†å¤‡ï¼šæ³¨å†Œè´¦å·ä¸è·å–èµ„è´¨</strong></p>
<p>ï¼ˆä¸€ï¼‰é€‰æ‹©å¼€å‘è€…è´¦å·ç±»å‹</p>
<p>è‹¹æœæä¾›ä¸ªäººã€å…¬å¸ã€ä¼ä¸šä¸‰ç±»å¼€å‘è€…è´¦å·ï¼ŒåŠŸèƒ½ä¸é€‚ç”¨åœºæ™¯å„å¼‚ï¼š</p>
<p>ä¸ªäººå¼€å‘è€…è´¦å·ï¼šå¹´è´¹ 99 ç¾å…ƒï¼Œé€‚åˆç‹¬ç«‹å¼€å‘è€…ã€‚æƒé™è¦†ç›– App Store ä¸Šæ¶ã€å¼€å‘æµ‹è¯•ï¼Œæ— å›¢é˜Ÿåä½œåŠŸèƒ½ï¼Œåº”ç”¨å½’å±ä¸ªäººã€‚</p>
<p>å…¬å¸å¼€å‘è€…è´¦å·ï¼šåŒæ ·å¹´è´¹ 99 ç¾å…ƒï¼Œé€‚ç”¨äºä¼ä¸šå›¢é˜Ÿã€‚éœ€æäº¤å…¬å¸èµ„è´¨è¯æ˜ï¼ˆè¥ä¸šæ‰§ç…§ç­‰ï¼‰ï¼Œæ”¯æŒå¤šäººåä½œå¼€å‘ï¼Œåº”ç”¨å½’å±å…¬å¸ï¼Œåˆ©äºå“ç‰Œå»ºè®¾ä¸å¸‚åœºæ¨å¹¿ã€‚</p>
<p>ä¼ä¸šå¼€å‘è€…è´¦å·ï¼šå¹´è´¹ 299 ç¾å…ƒï¼Œä¸»è¦ç”¨äºä¼ä¸šå†…éƒ¨åº”ç”¨åˆ†å‘ï¼Œæ— æ³•ä¸Šæ¶ App Storeã€‚é€‚åˆå¤§å‹ä¼ä¸šå®šåˆ¶å†…éƒ¨åŠå…¬ Appï¼Œä¿éšœæ•°æ®å®‰å…¨ä¸åº”ç”¨éšç§ã€‚</p>
<p>ï¼ˆäºŒï¼‰æ³¨å†Œå¼€å‘è€…è´¦å·</p>
<p>è®¿é—®è‹¹æœå¼€å‘è€…å®˜ç½‘ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.apple.com%2F%25EF%25BC%2589%25EF%25BC%258C%25E7%2582%25B9%25E5%2587%25BB" target="_blank" title="https://developer.apple.com/%EF%BC%89%EF%BC%8C%E7%82%B9%E5%87%BB" ref="nofollow noopener noreferrer">developer.apple.com/ï¼‰ï¼Œç‚¹å‡»</a> â€œJoin the Apple Developer Programâ€ï¼ŒæŒ‰æç¤ºå¡«å†™ä¸ªäºº / å…¬å¸ä¿¡æ¯ï¼Œå®Œæˆæ³¨å†Œæµç¨‹ã€‚</p>
<p>è‹¥ç”³è¯·å…¬å¸è´¦å·ï¼Œéœ€ç”³è¯·é‚“ç™½æ°ç ï¼ˆD-U-N-S Numberï¼‰ï¼Œè¿™æ˜¯å…¨çƒé€šç”¨çš„ä¼ä¸šèº«ä»½è¯†åˆ«ç¼–ç ã€‚ç”³è¯·è€—æ—¶ 1 - 2 å‘¨ï¼Œè·æ‰¹åè‹¹æœä¼šé‚®ä»¶é€šçŸ¥ï¼Œå»ºè®® 14 ä¸ªå·¥ä½œæ—¥åå†ä½¿ç”¨ï¼Œä»¥ä¾¿è‹¹æœåŒæ­¥æ•°æ®ã€‚</p>
<p>ï¼ˆä¸‰ï¼‰å‡†å¤‡ç›¸å…³èµ„è´¨æ–‡ä»¶</p>
<p>éšç§æ”¿ç­–ï¼šè‡ª 2018 å¹´ 10 æœˆèµ·ï¼Œæ‰€æœ‰æ–° App åŠæ›´æ–°ç‰ˆæœ¬å‡éœ€æä¾›éšç§æ”¿ç­–é“¾æ¥ï¼Œè¯¦ç»†è¯´æ˜å¦‚ä½•æ”¶é›†ã€ä½¿ç”¨ã€å­˜å‚¨ç”¨æˆ·æ•°æ®ï¼Œä¿éšœç”¨æˆ·çŸ¥æƒ…æƒä¸éšç§æƒã€‚</p>
<p>ç‰ˆæƒè¯æ˜ï¼šè‹¥ App ä½¿ç”¨ç¬¬ä¸‰æ–¹ç´ æï¼ˆå›¾ç‰‡ã€éŸ³ä¹ã€ä»£ç ç­‰ï¼‰ï¼Œéœ€è·å–åˆæ³•æˆæƒï¼Œå¤‡å¥½ç‰ˆæƒæ–‡ä»¶ï¼Œé¿å…ä¾µæƒçº çº·å¯¼è‡´ä¸Šæ¶å—é˜»ã€‚</p>
<p><strong>äºŒã€æŠ€æœ¯ç­¹å¤‡ï¼šåˆ›å»º App IDã€è¯ä¹¦ä¸æè¿°æ–‡ä»¶</strong></p>
<p>ï¼ˆä¸€ï¼‰åˆ›å»º App ID</p>
<p>ç™»å½•å¼€å‘è€…è´¦å·ï¼Œè¿›å…¥ â€œCertificates, Identifiers &amp; Profilesâ€ é¡µé¢ã€‚</p>
<p>ç‚¹å‡» â€œIdentifiersâ€ - â€œApp IDsâ€ï¼Œé€‰æ‹© â€œ+â€ åˆ›å»ºæ–° App IDã€‚æ ¼å¼ä¸º â€œcom.company.appnameâ€ï¼Œå…¶ä¸­ â€œcompanyâ€ ä¸ºå…¬å¸ç¼©å†™æˆ–è‡ªå®šä¹‰æ ‡è¯†ï¼Œâ€œappnameâ€ æ˜¯ App åç§°ï¼Œæ­¤ ID æ˜¯ App å”¯ä¸€æ ‡è¯†ï¼Œåç»­è¯ä¹¦ç”³è¯·ã€åº”ç”¨é…ç½®éƒ½éœ€ç”¨åˆ°ã€‚</p>
<p>ï¼ˆäºŒï¼‰ç”³è¯·è¯ä¹¦</p>
<p>æ‰“å¼€ Mac çš„é’¥åŒ™ä¸²è®¿é—®å·¥å…·ï¼Œä¾æ¬¡é€‰æ‹© â€œé’¥åŒ™ä¸²è®¿é—®â€ - â€œè¯ä¹¦åŠ©ç†â€ - â€œä»è¯ä¹¦é¢å‘æœºæ„è¯·æ±‚è¯ä¹¦â€ï¼ŒæŒ‰æç¤ºå¡«å†™ä¿¡æ¯ï¼Œç”Ÿæˆè¯ä¹¦ç­¾åè¯·æ±‚æ–‡ä»¶ï¼ˆ.certSigningRequestï¼‰ã€‚</p>
<p>è¿”å›å¼€å‘è€…è´¦å· â€œCertificatesâ€ é¡µé¢ï¼Œç‚¹å‡» â€œ+â€ï¼ŒæŒ‰è¯ä¹¦ç±»å‹ï¼ˆå¼€å‘è¯ä¹¦ç”¨äºçœŸæœºè°ƒè¯•ã€å‘å¸ƒè¯ä¹¦ç”¨äº App Store ä¸Šæ¶ã€æ¨é€è¯ä¹¦ç”¨äºæ¨é€é€šçŸ¥ï¼‰ä¸Šä¼ ä¸Šè¿°æ–‡ä»¶ï¼Œç”Ÿæˆå¹¶ä¸‹è½½å¯¹åº”è¯ä¹¦ã€‚å¼€å‘è¯ä¹¦å¯åœ¨å¤šå°è®¾å¤‡è°ƒè¯•ï¼Œå‘å¸ƒè¯ä¹¦åˆ™å…³è” App Store å‘å¸ƒã€‚</p>
<p>ï¼ˆä¸‰ï¼‰ç”Ÿæˆæè¿°æ–‡ä»¶</p>
<p>æè¿°æ–‡ä»¶å…³è”è¯ä¹¦ä¸ App IDï¼Œåœ¨å¼€å‘è€…è´¦å· â€œProfilesâ€ é¡µé¢ï¼Œç‚¹å‡» â€œ+â€ åˆ›å»ºã€‚</p>
<p>æŒ‰æç¤ºé€‰æ‹© App IDã€è¯ä¹¦ï¼Œé…ç½®è®¾å¤‡åˆ—è¡¨ï¼ˆå¼€å‘æè¿°æ–‡ä»¶éœ€æŒ‡å®šè°ƒè¯•è®¾å¤‡ï¼‰ï¼Œç”Ÿæˆå¹¶ä¸‹è½½æè¿°æ–‡ä»¶ã€‚</p>
<p><strong>ä¸‰ã€App ä¿¡æ¯é…ç½®ï¼šiTunes Connect è®¾ç½®</strong></p>
<p>ï¼ˆä¸€ï¼‰åŸºç¡€ä¿¡æ¯å¡«å†™</p>
<p>ç™»å½• iTunes Connectï¼Œç‚¹å‡» â€œæˆ‘çš„ Appâ€ - â€œ+â€ åˆ›å»ºæ–° Appï¼Œå¡«å†™ App åç§°ã€ä¸»è¦è¯­è¨€ã€Bundle IDï¼ˆä¸åˆ›å»º App ID æ—¶ä¸€è‡´ï¼‰ç­‰åŸºç¡€ä¿¡æ¯ã€‚</p>
<p>ä¸»æ ‡é¢˜ï¼šæ˜¾ç¤ºåœ¨ App Store çš„æœ¬åœ°åŒ–åç§°ï¼Œç®€æ´å±•ç° App åŠŸèƒ½ç‰¹æ€§ï¼Œé€‰å–é«˜çƒ­åº¦ç›¸å…³è¯æ±‡ï¼Œé¿å…ç«å“å“ç‰Œè¯ï¼Œåˆ©äºæœç´¢æ’åã€‚</p>
<p>å‰¯æ ‡é¢˜ï¼šå¯¹ App çš„ç®€è¦ä»‹ç»ï¼Œè¡¥å……ä¸»æ ‡é¢˜ï¼Œæ§åˆ¶åœ¨ 30 å­—ç¬¦å†…ï¼ŒåŒæ ·é¿å…ç«å“è¯ï¼Œå¢å¼ºå¸å¼•åŠ›ã€‚</p>
<p>ï¼ˆäºŒï¼‰éšç§æ”¿ç­–ä¸è¯¦ç»†æè¿°</p>
<p>åœ¨ â€œApp ä¿¡æ¯â€ é¡µé¢ï¼Œå¡«å…¥éšç§æ”¿ç­–ç½‘å€ï¼Œç¡®ä¿æ”¿ç­–å†…å®¹æ¸…æ™°ã€åˆæ³•åˆè§„ã€‚</p>
<p>åº”ç”¨æè¿°é™å®šåœ¨ 4000 å­—ç¬¦å†…ï¼Œè¯¦ç»†ä»‹ç» App ç‰¹è‰²åŠŸèƒ½ã€‚å»ºè®®å¼€ç¯‡å‰ä¸‰è¡Œçªå‡ºæ ¸å¿ƒä¼˜åŠ¿ï¼Œå¸å¼•ç”¨æˆ·ï¼Œä¸”æè¿°ä»…åœ¨ç‰ˆæœ¬æ›´æ–°æ—¶å¯ä¿®æ”¹ã€‚</p>
<p>ï¼ˆä¸‰ï¼‰å…³é”®è¯ä¸åº”ç”¨åˆ†çº§</p>
<p>å…³é”®è¯ï¼šåœ¨ â€œå…³é”®è¯â€ æ å¡«å†™ 100 å­—ç¬¦ï¼Œå°½é‡å†™æ»¡ï¼Œå°‘ç”¨é€—å·åˆ†éš”ï¼Œæå‡å…³é”®è¯è¦†ç›–åº¦ï¼Œå½±å“ App æœç´¢æ›å…‰ä¸åŸºç¡€æ’åã€‚</p>
<p>åº”ç”¨åˆ†çº§ï¼šå›ç­” 13 ä¸ªé—®é¢˜ï¼Œä¾ App å®é™…å†…å®¹ä¸åŠŸèƒ½ï¼Œç¡®å®šåˆ†çº§ï¼ˆ4 å²ä»¥ä¸Šã€9 å²ä»¥ä¸Šã€12 å²ä»¥ä¸Šã€17 å²ä»¥ä¸Šã€æ— åˆ†çº§ï¼‰ï¼Œæ— åˆ†çº§æ— æ³•ä¸Šæ¶é”€å”®ã€‚</p>
<p>ï¼ˆå››ï¼‰å±å¹•æˆªå›¾ä¸å›¾æ ‡ä¸Šä¼ </p>
<p>å‡†å¤‡å„ç‰ˆæœ¬å±å¹•æˆªå›¾ï¼Œå±•ç¤º App æ ¸å¿ƒåŠŸèƒ½ä¸ç•Œé¢è®¾è®¡ï¼Œé€‚é…ä¸åŒè®¾å¤‡å°ºå¯¸ã€‚</p>
<p>ä¸Šä¼  1024*1024 åƒç´ çš„å›¾æ ‡ï¼Œå›¾æ ‡è®¾è®¡ç®€æ´ã€é†’ç›®ï¼Œä¸å¾—æœ‰åœ†è§’ï¼Œç¬¦åˆè‹¹æœè®¾è®¡è§„èŒƒã€‚è‹¥ App æ”¯æŒé¢„å®šï¼Œå¯è®¾ç½®ç›¸å…³ä¿¡æ¯ï¼Œæå‰å¸å¼•ç”¨æˆ·å…³æ³¨ã€‚</p>
<p><strong>å››ã€æ‰“åŒ…ä¸Šä¼ ï¼šXcode é…ç½®ä¸æäº¤</strong></p>
<p>ï¼ˆä¸€ï¼‰Xcode é¡¹ç›®é…ç½®</p>
<p>æ‰“å¼€ Xcodeï¼Œç¡®ä¿å·²æ­£ç¡®å¯¼å…¥ç”³è¯·çš„è¯ä¹¦ä¸æè¿°æ–‡ä»¶ã€‚åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œé€‰æ‹© iOS device çœŸæœºï¼ˆéæ¨¡æ‹Ÿå™¨ï¼‰ä½œä¸ºè¿è¡Œç›®æ ‡ã€‚</p>
<p>è‹¥ App ä¸æ”¯æŒæ¨ªå±ï¼Œåœ¨ â€œGeneralâ€ é€‰é¡¹å–æ¶ˆ â€œLandscape Leftâ€ ä¸ â€œLandscape Rightâ€ å‹¾é€‰ï¼›æ£€æŸ¥ç‰ˆæœ¬å·ä¸æ„å»ºç‰ˆæœ¬å·ï¼Œé…ç½®å‘å¸ƒè¯ä¹¦ã€‚ç¡®ä¿é¡¹ç›®æ— é»„è‰²å¹å·ï¼ˆä»£è¡¨è¯ä¹¦ã€æè¿°æ–‡ä»¶æˆ– Bundle Identifier åŒ¹é…å¼‚å¸¸ï¼‰ï¼Œåˆ‡æ¢è‡³ release å‘å¸ƒæ¨¡å¼ï¼ˆdebug ç”¨äºæµ‹è¯•ï¼‰ã€‚</p>
<p>ï¼ˆäºŒï¼‰æ‰“åŒ…ä¸ä¸Šä¼ </p>
<p>é€‰æ‹© â€œXcodeâ€ - â€œProductâ€ - â€œArchiveâ€ æ‰“åŒ…é¡¹ç›®ã€‚å®Œæˆåï¼Œå¯é€‰æ‹©ç›´æ¥ä¸Šä¼ è‡³ App Storeï¼Œæˆ–å¯¼å‡º ipa æ–‡ä»¶ï¼ˆåŠ¡å¿…é€‰æ‹© â€œSave for iOS App Store Deploymentâ€ï¼‰ã€‚</p>
<p>è‹¥å¯¼å‡º ipaï¼Œå€ŸåŠ© Application Loader å·¥å…·ä¸Šä¼ ã€‚ç™»å½•åï¼ŒæŒ‰æç¤ºé€‰æ‹© ipa æ–‡ä»¶ï¼Œä¸Šä¼ è‡³ iTunes Connectã€‚</p>
<p>å¯¹äºæ²¡æœ‰ Mac ç”µè„‘çš„å¼€å‘è€…ï¼Œå¯ä»¥ä½¿ç”¨ AppUploader å·¥å…·åœ¨ Windowsã€Linux æˆ– Mac ç³»ç»Ÿä¸Šç›´æ¥ä¸Šä¼  IPA æ–‡ä»¶åˆ° App Storeï¼Œæ”¯æŒè¯ä¹¦ç”³è¯·å’Œç®¡ç†ï¼Œç®€åŒ–ä¸Šæ¶æµç¨‹ã€‚</p>
<p><strong>äº”ã€æäº¤å®¡æ ¸ï¼šApp Store Connect æ“ä½œ</strong></p>
<p>ï¼ˆä¸€ï¼‰åˆ›å»ºæ–° App ç‰ˆæœ¬</p>
<p>åœ¨ App Store Connect â€œæˆ‘çš„ Appâ€ é¡µé¢ï¼Œé€‰æ‹©å¯¹åº” Appï¼Œç‚¹å‡» â€œ+â€ åˆ›å»ºæ–°ç‰ˆæœ¬ï¼Œå¡«å†™ç‰ˆæœ¬å·ã€æ„å»ºç‰ˆæœ¬å·ç­‰ä¿¡æ¯ã€‚</p>
<p>ï¼ˆäºŒï¼‰é€‰æ‹©æ„å»ºç‰ˆæœ¬</p>
<p>æ‰§è¡Œ archive æ“ä½œåï¼Œç”Ÿæˆçš„ ipa ä¼šæ˜¾ç¤ºåœ¨æ„å»ºç‰ˆæœ¬åˆ—è¡¨ã€‚é€‰æ‹©å·²ä¸Šä¼ çš„æ„å»ºç‰ˆæœ¬å…³è”è‡³æ–°ç‰ˆæœ¬ã€‚</p>
<p>ï¼ˆä¸‰ï¼‰æäº¤å®¡æ ¸</p>
<p>ä»”ç»†æ ¸å¯¹ App å„é¡¹ä¿¡æ¯ï¼Œç¡®ä¿å‡†ç¡®æ— è¯¯ã€‚è‹¥ App éœ€ç™»å½•ä½¿ç”¨ï¼Œåœ¨åå°æä¾›æµ‹è¯•è´¦å·ï¼ˆè´¦å·æƒé™ã€æ•°æ®å®Œå¤‡ï¼Œæ–¹ä¾¿å®¡æ ¸äººå‘˜æµ‹è¯•ï¼‰ã€‚ç¡®è®¤æ— è¯¯åï¼Œæäº¤å®¡æ ¸ã€‚</p>
<p><strong>å…­ã€å®¡æ ¸åº”å¯¹ï¼šç­‰å¾…ç»“æœä¸å¤„ç†åé¦ˆ</strong></p>
<p>ï¼ˆä¸€ï¼‰å®¡æ ¸æ—¶é—´é¢„ä¼°</p>
<p>è‹¹æœå®¡æ ¸é€šå¸¸éœ€ 1 - 3 ä¸ªå·¥ä½œæ—¥ï¼Œå¤æ‚åº”ç”¨ã€æ•æ„Ÿå†…å®¹æˆ–æäº¤é«˜å³°æœŸï¼Œå®¡æ ¸æ—¶é•¿å¯èƒ½å»¶é•¿è‡³ 7 ä¸ªå·¥ä½œæ—¥ç”šè‡³æ›´ä¹…ã€‚å¼€å‘è€…å¯åœ¨ App Store Connect æŸ¥çœ‹å®¡æ ¸è¿›åº¦ã€‚</p>
<p>ï¼ˆäºŒï¼‰å¸¸è§å®¡æ ¸ä¸é€šè¿‡åŸå› åŠè§£å†³</p>
<p>åŠŸèƒ½é—®é¢˜ï¼šå¦‚ App å´©æºƒã€å¡é¡¿ã€å…³é”®åŠŸèƒ½æ— æ³•ä½¿ç”¨ï¼Œéœ€å…¨é¢æµ‹è¯•ä¿®å¤ï¼Œæäº¤æ–°ç‰ˆæœ¬å®¡æ ¸ã€‚</p>
<p>éšç§åˆè§„ï¼šæœªæŒ‰è§„å®šè·å–ç”¨æˆ·æƒé™ã€æ”¶é›†ä½¿ç”¨æ•°æ®ï¼Œæˆ–éšç§æ”¿ç­–ä¸å®Œå–„ï¼Œéœ€è°ƒæ•´éšç§ç­–ç•¥ï¼Œä¼˜åŒ–æ•°æ®å¤„ç†æµç¨‹ã€‚</p>
<p>ç•Œé¢è®¾è®¡ï¼šç•Œé¢å¸ƒå±€æ··ä¹±ã€ä¸éµå¾ªè‹¹æœè®¾è®¡è§„èŒƒï¼ˆå¦‚æŒ‰é’®æ ·å¼ã€äº¤äº’é€»è¾‘ï¼‰ï¼Œé‡æ–°è®¾è®¡ç•Œé¢ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<p>å†…å®¹ä¾µæƒï¼šä½¿ç”¨æœªç»æˆæƒç´ æã€å­˜åœ¨æŠ„è¢­å†…å®¹ï¼Œç«‹å³æ›¿æ¢ä¾µæƒç´ æï¼Œç¡®ä¿å†…å®¹åŸåˆ›åˆæ³•ã€‚</p>
<p>æè¿°ä¸ç¬¦ï¼šApp æè¿°ã€æˆªå›¾ä¸å®é™…åŠŸèƒ½ä¸ç¬¦ï¼Œä¿®æ”¹æè¿°ä¸æˆªå›¾ï¼ŒçœŸå®åæ˜  App ç‰¹æ€§ã€‚</p>
<p>æ¯ä¸ªå¼€å‘è€…è´¦å·æœ‰ä¸¤æ¬¡åŠ æ€¥å®¡æ ¸æœºä¼šï¼Œè‹¥é‡ç´§æ€¥æƒ…å†µï¼ˆå¦‚ä¿®å¤é‡å¤§å®‰å…¨æ¼æ´ï¼‰ï¼Œå¯ç”³è¯·åŠ æ€¥ï¼ŒåŠ å¿«å®¡æ ¸è¿›ç¨‹ã€‚</p>
<p><strong>ç»“è¯­</strong></p>
<p>è‹¹æœ App ä¸Šæ¶æ˜¯ä¸€åœºç²¾å¿ƒç­¹å¤‡çš„ â€œé—¯å…³ä¹‹æ—…â€ï¼Œä»è´¦å·æ³¨å†Œçš„ç»†è‡´è§„åˆ’ï¼Œåˆ°æŠ€æœ¯é…ç½®çš„ä¸¥è°¨æ“ä½œï¼Œå†åˆ°å®¡æ ¸åé¦ˆçš„çµæ´»åº”å¯¹ï¼Œæ¯ä¸€ç¯èŠ‚éƒ½è€ƒéªŒå¼€å‘è€…çš„è€å¿ƒä¸ä¸“ä¸šåº¦ã€‚ä½†åªè¦ä¸¥æ ¼éµå¾ªè‹¹æœå®¡æ ¸æŒ‡å—ï¼Œæ‰“ç£¨äº§å“è´¨é‡ï¼Œç²¾å¿ƒå‡†å¤‡ä¸Šæ¶èµ„æ–™ï¼Œå°±èƒ½æå‡ä¸Šæ¶æˆåŠŸç‡ï¼Œè®© App åœ¨ App Store çš„èˆå°ä¸Šå¤§æ”¾å¼‚å½©ï¼Œæ”¶è·æµ·é‡ç”¨æˆ·ä¸å•†ä¸šä»·å€¼ã€‚è‹¥ä½ æ­£ç­¹å¤‡ App ä¸Šæ¶ï¼Œä¸å¦¨å‚è€ƒè¿™ä»½æŒ‡å—ï¼Œæå‰å¸ƒå±€ã€ç¨³æ­¥æ¨è¿›ï¼ŒåŠ©åŠ›äº§å“é¡ºåˆ©ä¸Šçº¿ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ï¼šå­—èŠ‚ Go2Rust å·¥ç¨‹è½åœ°]]></title>    <link>https://juejin.cn/post/7577204540417556543</link>    <guid>https://juejin.cn/post/7577204540417556543</guid>    <pubDate>2025-11-27T09:52:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577204540417556543" data-draft-id="7577198193215291435" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ï¼šå­—èŠ‚ Go2Rust å·¥ç¨‹è½åœ°"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2025-11-27T09:52:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CloudWeGo"/> <meta itemprop="url" content="https://juejin.cn/user/3998273922407624"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ï¼šå­—èŠ‚ Go2Rust å·¥ç¨‹è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3998273922407624/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CloudWeGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:52:05.000Z" title="Thu Nov 27 2025 09:52:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äº‘åŸç”Ÿä¸é«˜æ€§èƒ½æœåŠ¡çš„å‘å±•è¶‹åŠ¿ä¸‹ï¼ŒGo é¡¹ç›®è¿ç§»åˆ° Rust é¡¹ç›®æˆä¸ºæå‡æ€§èƒ½å’Œç¨³å®šæ€§çš„æœ€é‡è¦ä¼˜åŒ–æ–¹å‘ï¼Œä½†ä¾èµ–å¤æ‚ã€æœ‰è¯­è¨€é—¨æ§›ç­‰é—®é¢˜é•¿æœŸåˆ¶çº¦ç€ Go2Rust çš„å¤§è§„æ¨¡è½åœ°ã€‚å­—èŠ‚è·³åŠ¨æœåŠ¡æ¡†æ¶å›¢é˜ŸåŸºäºå†…éƒ¨å¤§é‡è¿ç§»å®è·µï¼Œèåˆå¤§æ¨¡å‹èƒ½åŠ›ä¸å·¥ç¨‹ç»éªŒï¼Œæ¨å‡ºã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ï¼Œå°†è¿ç§»ä»â€œäººå·¥ä¸»å¯¼â€è½¬å˜ä¸ºâ€œæ ‡å‡†åŒ–æµç¨‹â€ï¼Œä¸ºéœ€è¦è¿›è¡Œ Go2Rust è¿ç§»çš„å›¢é˜Ÿæä¾›äº†ä¸€å¥—å¯è½åœ°çš„æŠ€æœ¯å‚è€ƒã€‚</p>
<p>æœ¬æ–‡åŸºäºå­—èŠ‚è·³åŠ¨æœåŠ¡æ¡†æ¶å›¢é˜Ÿç ”å‘å·¥ç¨‹å¸ˆèŒƒå¹¿å®‡åœ¨Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzg2MTc0Mjg2Mw%3D%3D%26mid%3D2247495370%26idx%3D1%26sn%3Dbf5a7b5e536b82a7c56bbec367d47200%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzg2MTc0Mjg2Mw==&amp;mid=2247495370&amp;idx=1&amp;sn=bf5a7b5e536b82a7c56bbec367d47200&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">CloudWeGo å››å‘¨å¹´æŠ€æœ¯æ²™é¾™</a>ä¸Šçš„æ¼”è®²å†…å®¹æ•´ç†ï¼Œè¯¦ç»†æ‹†è§£äº†ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼çš„è®¾è®¡é€»è¾‘ã€å®æ–½æ­¥éª¤ä¸å®è·µæˆæ•ˆã€‚</p>
<p>ç‚¹å‡»é“¾æ¥å¯æŸ¥çœ‹æœ¬æ¬¡åˆ†äº«å›æ”¾ğŸ‘‰ğŸ»<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2Fv7rRu7D" target="_blank" title="https://b23.tv/v7rRu7D" ref="nofollow noopener noreferrer">b23.tv/v7rRu7D</a></p>
<h2 data-id="heading-0">ä¸€ã€ä» Go åˆ° Rustï¼šä¸æ­¢äºæ€§èƒ½çš„è¿½æ±‚</h2>
<p>å­—èŠ‚è·³åŠ¨å†…éƒ¨çš„å¤šä¸ªé¡¹ç›®å®è·µå·²ç»è¯æ˜ï¼Œå°† Golang æœåŠ¡è¿ç§»è‡³ Rustï¼Œä¸ä»…èƒ½å¸¦æ¥æ˜¾è‘—çš„ CPU æ€§èƒ½æå‡ï¼Œè¿˜èƒ½æœ‰æ•ˆå¢å¼ºæœåŠ¡ç¨³å®šæ€§ã€é™ä½è¿ç»´æˆæœ¬ã€‚è¿™èƒŒåï¼Œæ˜¯ Rust è¯­è¨€æœ¬èº«åœ¨å†…å­˜å®‰å…¨å’Œé«˜å¹¶å‘å¤„ç†ä¸Šçš„ç‹¬ç‰¹ä¼˜åŠ¿ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f24e56f8c0847d3a210bbe76ed7c046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=JvdWAMNprNsInNhtmSv6r3YXeTw%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸ºäº†è®©æ›´å¤šä¸šåŠ¡å›¢é˜Ÿäº«å—åˆ°è¿ç§»å¸¦æ¥çš„çº¢åˆ©ï¼ŒæœåŠ¡æ¡†æ¶å›¢é˜Ÿæ¢ç´¢å‡ºä¸¤æ¡è·¯å¾„ï¼š</p>
<ul>
<li>
<p><strong>é—´æ¥ä¼˜åŒ–</strong>ï¼šè®© Golang æœåŠ¡æ— éœ€æ”¹é€ ä»£ç ï¼Œå³å¯é—´æ¥è·å¾— Rust çš„æ€§èƒ½ä¼˜åŠ¿ã€‚å…³äºROG æŠ€æœ¯å‰–æå’Œä¸šåŠ¡è½åœ°ï¼Œå¯ä»¥ç‚¹å‡»è§‚çœ‹è§†é¢‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fb23.tv%2F35jPPMg" target="_blank" title="https://b23.tv/35jPPMg" ref="nofollow noopener noreferrer">b23.tv/35jPPMg</a></p>
</li>
<li>
<p><strong>å®Œå…¨è¿ç§»</strong>ï¼šé€šè¿‡è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œå°†ä¸šåŠ¡ä»£ç å®Œå…¨è¿ç§»è‡³ Rustï¼Œå®ç°æ›´å½»åº•çš„æ€§èƒ½é£è·ƒã€‚</p>
</li>
</ul>
<p>ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ï¼Œæ­£æ˜¯ä¸ºå®ç°ç¬¬äºŒæ¡è·¯å¾„â€”â€”<strong>è§„æ¨¡åŒ–ã€ä½é—¨æ§›çš„å®Œå…¨è¿ç§»</strong>â€”â€”è€Œç”Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fc6b0bc4a6c4718bd25930d5d98af74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=AoNS0nOR0SJJ2sA%2B9bIJTgZWz2I%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€è¿ç§»é¢ä¸´çš„ä¸‰å¤§æŒ‘æˆ˜</h2>
<p>å°½ç®¡ Go2Rust çš„ä»·å€¼æ˜¾è€Œæ˜“è§ï¼Œä½†é•¿ä¹…ä»¥æ¥ï¼Œå¤§è§„æ¨¡è½åœ°å§‹ç»ˆé¢ä¸´ç€ä¸‰å¤§æŒ‘æˆ˜ï¼š</p>
<ul>
<li>
<p><strong>é™¡å³­çš„å­¦ä¹ æ›²çº¿</strong>ï¼šRust ç‹¬ç‰¹çš„æ‰€æœ‰æƒã€ç”Ÿå‘½å‘¨æœŸç­‰æ¦‚å¿µï¼Œå¯¹ä¹ æƒ¯äº† Golang çš„å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œæ— ç–‘æ˜¯ä¸€é“ä¸ä½çš„é—¨æ§›ã€‚è¿™ä½¿å¾—è®¸å¤šå›¢é˜Ÿåœ¨è¿ç§»é¢å‰æœ›è€Œå´æ­¥ã€‚</p>
</li>
<li>
<p><strong>å¤æ‚çš„ä¾èµ–é»‘æ´</strong>ï¼šä¸€ä¸ª Golang é¡¹ç›®ï¼Œå…¶ç›´æ¥å’Œé—´æ¥ä¾èµ–å¾€å¾€æ„æˆä¸€ä¸ªåºå¤§çš„ä¾èµ–æ ‘ã€‚ä¾èµ–çš„å±‚çº§è¶Šæ·±ï¼Œè¿ç§»çš„å¤æ‚åº¦å°±è¶Šé«˜ï¼Œç”šè‡³å‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚å¦‚ä½•æœ‰æ•ˆç®¡ç†å’Œè¿ç§»è¿™äº›ä¾èµ–ï¼Œæ˜¯ä¸€ä¸ªæ£˜æ‰‹çš„é—®é¢˜ã€‚</p>
</li>
<li>
<p><strong>ä¸å¯æ§çš„ç¿»è¯‘è´¨é‡</strong>ï¼šå•çº¯ä¾èµ–å¤§æ¨¡å‹è¿›è¡Œä»£ç ç¿»è¯‘ï¼Œç»“æœå¾€å¾€å……æ»¡ä¸ç¡®å®šæ€§ã€‚ç”Ÿæˆçš„â€œGo å‘³â€ Rust ä»£ç ï¼Œä¸ä»…é£æ ¼æ€ªå¼‚ï¼Œæ›´éš¾ä»¥æ»¡è¶³ç”Ÿäº§ç¯å¢ƒå¯¹ä»£ç è´¨é‡çš„ä¸¥è‹›è¦æ±‚ã€‚</p>
</li>
</ul>
<p>ä¸ºäº†è·¨è¶Šè¿™äº›é¸¿æ²Ÿï¼ŒæœåŠ¡æ¡†æ¶å›¢é˜Ÿçš„è¿ç§»æ¨¡å¼ä¹Ÿç»å†äº†æŒç»­çš„æ¼”è¿›ï¼šä»å®Œå…¨ä¾èµ–äººå·¥ç»éªŒçš„â€œä½œåŠå¼â€è¿ç§»ï¼Œåˆ°åˆ©ç”¨å·¥å…·è¾…åŠ©çš„â€œæ¸è¿›å¼â€ç¿»è¯‘ï¼Œå†åˆ°å¦‚ä»Šå°†è¿ç§»å‡çº§ä¸ºâ€œæ ‡å‡†åŒ–æµç¨‹â€çš„ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶ï¼šä¸‰æ­¥èµ°çš„æ ‡å‡†åŒ–è¿ç§»æµç¨‹</h2>
<p>ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶çš„æ ¸å¿ƒï¼Œæ˜¯å°†å¤æ‚ã€é«˜åº¦ä¾èµ–äººå·¥ç»éªŒçš„è¿ç§»è¿‡ç¨‹ï¼ŒæŠ½è±¡ã€å°è£…æˆä¸€ä¸ªæ ‡å‡†åŒ–çš„ä¸‰æ­¥æµç¨‹ã€‚å®ƒä»¥ IDE æ’ä»¶çš„å½¢å¼æä¾›æœåŠ¡ï¼Œæ¥æ”¶ç”¨æˆ·çš„ Golang é¡¹ç›®ï¼Œè¾“å‡ºä¸€ä¸ª 100% å¯ç¼–è¯‘ã€ä¿ç•™å®Œæ•´ä¸šåŠ¡é€»è¾‘çš„ Rust è„šæ‰‹æ¶ï¼Œå½»åº•å°†å·¥ç¨‹å¸ˆä»ç¹ççš„â€œä½“åŠ›æ´»â€ä¸­è§£æ”¾å‡ºæ¥ã€‚
è¿™å¥—æµç¨‹å®Œå…¨å¤åˆ»äº†èµ„æ·±å·¥ç¨‹å¸ˆè¿›è¡Œæ‰‹åŠ¨è¿ç§»æ—¶çš„å¿ƒæ™ºæ¨¡å‹ï¼Œåˆ†ä¸º<strong>ç¿»è¯‘å‰ã€ç¿»è¯‘ä¸­ã€ç¿»è¯‘å</strong>ä¸‰ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff537d63eac84ea192745a286d66a213~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=RWE6jLIdMBdq%2Fv9frJrJ1jDShfk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šç¿»è¯‘å‰ â€”â€” è¿ç­¹å¸·å¹„ï¼Œç»˜åˆ¶ç²¾å‡†è¿ç§»è“å›¾</h3>
<p>å¦‚åŒå»ºé€ å¤§æ¥¼å‰éœ€è¦æœ‰ç²¾ç¡®çš„æ–½å·¥å›¾çº¸ï¼Œã€ŒåŠç©ºã€åœ¨å¯åŠ¨ç¿»è¯‘å‰ï¼Œä¼šè¿›è¡Œä¸€æ¬¡å½»åº•çš„â€œé¡¹ç›®ä½“æ£€â€ï¼Œä¸ºåç»­çš„è‡ªåŠ¨åŒ–è¿ç§»ç»˜åˆ¶æ¸…æ™°çš„è·¯å¾„ã€‚</p>
<ul>
<li>
<p><strong>é¡¹ç›®æ·±åº¦ç†è§£æ–‡æ¡£</strong>ï¼šè‡ªåŠ¨è§£æé¡¹ç›®å¹¶ç”Ÿæˆå®Œæ•´çš„é¡¹ç›®æ¢³ç†æ–‡æ¡£ï¼Œæ¶µç›–æ•´ä½“æ¶æ„ã€æ¥å£å®šä¹‰ã€å‡½æ•°é€»è¾‘ã€ç»“æ„ä½“è®¾è®¡ç­‰ï¼Œè®©å·¥ç¨‹å¸ˆå¯¹é¡¹ç›®å…¨è²Œæœ‰å®è§‚çš„æŠŠæ¡ã€‚</p>
</li>
<li>
<p><strong>ä¾èµ–æ¢³ç†</strong>ï¼šç³»ç»Ÿæ€§åœ°æ¢³ç†é¡¹ç›®çš„ç›´æ¥ä¸é—´æ¥ä¾èµ–ï¼Œå¹¶æ™ºèƒ½æ ‡æ³¨å‡ºæ— éœ€ç¿»è¯‘çš„ä¾èµ–é¡¹ã€‚è¿™ä¸ä»…èƒ½ç²¾ç¡®è¯„ä¼°è¿ç§»çš„å·¥ä½œé‡ä¸éš¾åº¦ï¼Œä¹Ÿè®©è¿ç§»çš„èŒƒå›´å’Œè´¨é‡å˜å¾—æ¸…æ™°å¯æ§ã€‚</p>
</li>
<li>
<p><strong>æ¥å£æ¢³ç†åŠè§„åˆ’</strong>ï¼šå¯¹äºå¤æ‚çš„å¾®æœåŠ¡é¡¹ç›®ï¼Œå·¥å…·ä¼šè‡ªåŠ¨æå–ç›®æ ‡æ¥å£åŠå…¶å®Œæ•´çš„å‡½æ•°è°ƒç”¨é“¾ï¼Œå°†åºå¤§çš„ä¸šåŠ¡é€»è¾‘æ‹†è§£ä¸ºä¸€ä¸ªä¸ªå¯ä»¥ç‹¬ç«‹ç¼–è¯‘ã€éªŒè¯å’Œè¿è¡Œçš„å•å…ƒã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šç¿»è¯‘ä¸­ â€”â€” é»‘ç›’æ“ä½œï¼Œä»â€œç¥ä¼¼â€åˆ°â€œå½¢ä¼¼â€çš„ç²¾å‡†è½¬åŒ–</h3>
<p>å‡†å¤‡å·¥ä½œå°±ç»ªåï¼Œå·¥ç¨‹å¸ˆåªéœ€åœ¨ç†Ÿæ‚‰çš„ IDE ä¸­ä¸€é”®è§¦å‘ï¼Œå³å¯å¯åŠ¨ç¿»è¯‘ã€‚</p>
<ul>
<li>
<p><strong>åŸºç¡€æ˜ å°„ä¸</strong> <strong>IDE****æœé›†</strong>ï¼šé’ˆå¯¹ Kitex å¾®æœåŠ¡é¡¹ç›®ï¼Œè‡ªåŠ¨å®Œæˆä» Golang æ¡†æ¶åˆ° Rust æ¡†æ¶çš„åŸºç¡€ç»“æ„æ˜ å°„ï¼Œå¹¶è‡ªåŠ¨åŒ–æœé›†ä¸‹æ¸¸æœåŠ¡æ‰€ä¾èµ–çš„ IDL æ–‡ä»¶ï¼Œå…å»äº†å¤§é‡ç¹æ‚çš„æ‰‹åŠ¨æ¢³ç†ã€‚</p>
</li>
<li>
<p><strong>â€œæ„è¯‘â€è€Œéâ€œç›´è¯‘â€</strong>ï¼šè¿™æ˜¯ã€ŒåŠç©ºã€ç¿»è¯‘è´¨é‡çš„æ ¸å¿ƒä¿éšœã€‚å®ƒä»¥â€œèŠ‚ç‚¹â€ä¸ºåŸºæœ¬å•å…ƒï¼Œé‡‡ç”¨â€œæ„è¯‘â€çš„é€»è¾‘ï¼Œæ·±å…¥ç†è§£ Golang ä»£ç çš„ä¸šåŠ¡æ„å›¾ï¼Œç„¶åç”¨æœ€ç¬¦åˆ Rust è¯­è¨€ä¹ æƒ¯å’Œæœ€ä½³å®è·µçš„æ–¹å¼æ¥ç”Ÿæˆä»£ç ï¼Œä»æ ¹æœ¬ä¸Šé¿å…äº†ç”Ÿç¡¬ã€åˆ«æ‰­çš„â€œGo é£æ ¼ Rust ä»£ç â€ã€‚</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdc53925b96d49cd85bfe2fa58975446~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=CmHiKU5J5dvBlF4NzSDQz4cRjjw%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>æ™ºèƒ½åŒ–çš„ä¾èµ–å¤„ç†</strong>ï¼šé’ˆå¯¹ä¸åŒç±»å‹çš„ä¾èµ–ï¼Œã€ŒåŠç©ºã€é‡‡å–äº†ä¸åŒçš„å¤„ç†ç­–ç•¥ï¼š
<ul>
<li>
<p><strong>æœ¬åœ°ä¾èµ–</strong>ï¼šé€šè¿‡é€’å½’ç¿»è¯‘ç›´æ¥è¿ç§»ã€‚</p>
</li>
<li>
<p><strong>ä¸šåŠ¡</strong> <strong>SDK</strong>ï¼šæ ‡è®°ä¸ºé€’å½’ç¿»è¯‘åï¼Œç”Ÿæˆå¯¹åº”çš„ Rust ç‰ˆæœ¬ã€‚</p>
</li>
<li>
<p><strong>å†…éƒ¨åŸºç¡€ç»„ä»¶</strong>ï¼šå»ºç«‹ä¸“é—¨çš„çŸ¥è¯†åº“ï¼Œæ˜ å°„ Golang ç»„ä»¶åœ¨ Rust ä¸­çš„ç­‰æ•ˆå®ç°ä¸ç”¨æ³•ã€‚</p>
</li>
<li>
<p><strong>å¼€æºç»„ä»¶</strong>ï¼šä¼˜å…ˆè°ƒç”¨çŸ¥è¯†åº“ä¸­çš„æˆç†Ÿæ–¹æ¡ˆï¼Œå½“çŸ¥è¯†åº“ç¼ºå¤±æ—¶ï¼Œå†ç”±å¤§æ¨¡å‹è¿›è¡Œè¡¥å…¨ã€‚</p>
</li>
</ul>
</li>
</ul>
<p>é€šè¿‡è‡ªä¸‹è€Œä¸Šçš„é€’å½’ç¿»è¯‘é€»è¾‘ï¼Œä»æœ€åº•å±‚çš„å‡½æ•°å¼€å§‹ï¼Œé€ä¸ªèŠ‚ç‚¹å®Œæˆç¼–è¯‘å’Œç¿»è¯‘ï¼Œæœ€ç»ˆç¡®ä¿æ•´ä¸ªæ¥å£é“¾è·¯çš„å®Œæ•´æ€§ä¸å¯è¿è¡Œæ€§ã€‚</p>
<h3 data-id="heading-5">ç¬¬ä¸‰æ­¥ï¼šç¿»è¯‘å â€”â€” è‡ªåŠ¨ä¼˜åŒ–ä¸è¾…åŠ©æ ¡éªŒï¼Œå®ˆå¥½äº¤ä»˜è´¨é‡æœ€åä¸€å…³</h3>
<p>ç¿»è¯‘å®Œæˆä¸ç­‰äºå¤§åŠŸå‘Šæˆã€‚ä¸ºäº†ç¡®ä¿äº¤ä»˜çš„ä»£ç èƒ½ç›´æ¥è¿›å…¥ç”Ÿäº§ç¯å¢ƒï¼Œã€ŒåŠç©ºã€è¿˜æä¾›äº†ä¸€å¥—å®Œå–„çš„â€œå”®åæœåŠ¡â€ã€‚</p>
<ul>
<li><strong>åŸºäº LLM Agent é©±åŠ¨çš„ä»£ç è´¨é‡ä¼˜åŒ–</strong>ï¼šä¸€ä¸ªå†…ç½®çš„ Agent ä¼šè‡ªåŠ¨å°è¯•ç¼–è¯‘ç”Ÿæˆçš„ Rust ä»£ç ï¼Œæ™ºèƒ½è§£æç¼–è¯‘è¿‡ç¨‹ä¸­å‡ºç°çš„é”™è¯¯ï¼Œå¹¶è¿›è¡Œå¤šè½®è‡ªæˆ‘ä¿®å¤ã€‚å®è·µè¯æ˜ï¼Œè¿™èƒ½å°†ä»£ç çš„åˆå§‹ç¼–è¯‘é€šè¿‡ç‡ä»çº¦ 80%~90% æå‡è‡³ 100% å¯ç›´æ¥è¿è¡Œçš„çŠ¶æ€ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2feec11bfaba4d0a87cb87688d1b3c0c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=NctfKIJMaBY0TSVx1NmzSR%2BYNA4%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li><strong>IDE</strong> <strong>è¾…åŠ©æ ¡éªŒ</strong>ï¼šæä¾›ä¾¿æ·çš„ IDE æ ¡éªŒæ’ä»¶ï¼Œæ”¯æŒç¿»è¯‘åçš„ Rust ä»£ç ä¸åŸå§‹ Golang æºç çš„ä¸€é”®è·³è½¬ã€å¯¹æ¯”æŸ¥çœ‹ã€‚è¿™ä½¿å¾—å·¥ç¨‹å¸ˆå¯ä»¥åƒ Code Review ä¸€æ ·ï¼Œå¿«é€Ÿæ ¸å¯¹ä¸šåŠ¡é€»è¾‘çš„ä¸€è‡´æ€§ï¼Œç¡®ä¿è¿ç§»çš„å‡†ç¡®æ— è¯¯ã€‚</li>
</ul>
<p>å†…éƒ¨å®è·µè¡¨æ˜ï¼Œç»ã€ŒåŠç©ºã€å¤„ç†åçš„ä»£ç ï¼Œè´¨é‡å·²éå¸¸æ¥è¿‘èµ„æ·±å·¥ç¨‹å¸ˆæ‰‹åŠ¨ç¼–å†™çš„æ°´å¹³ï¼ŒçœŸæ­£å®ç°äº†é«˜è´¨é‡ã€ä½æˆæœ¬çš„è§„æ¨¡åŒ–è¿ç§»ã€‚</p>
<h2 data-id="heading-6">å››ã€æœªæ¥å±•æœ›ï¼šä¸æ­¢äºè¿ç§»ï¼Œæ›´é‡å¡‘ç ”å‘ä½“éªŒ</h2>
<p>ã€ŒåŠç©ºã€å¯Œè„šæ‰‹æ¶æ¨¡å¼çš„æ¨å‡ºï¼Œä»…ä»…æ˜¯ Go2Rust å·¥ç¨‹åŒ–æ¢ç´¢çš„ç¬¬ä¸€æ­¥ã€‚æœåŠ¡æ¡†æ¶å›¢é˜Ÿçš„ç›®æ ‡ï¼Œä¸æ­¢äºå®ç° 1:1 çš„ç²¾å‡†ç¿»è¯‘ï¼Œæ›´å¸Œæœ›å€Ÿæ­¤é‡å¡‘ Rust çš„ç ”å‘ä½“éªŒã€‚<strong>æˆªè‡³å‘ç¨¿å‰ï¼Œã€ŒåŠç©ºã€åœ¨å­—èŠ‚å†…éƒ¨å·²å®ç°ä¸‡è¡Œä»£ç  0 ç¼–è¯‘é”™è¯¯çš„ç¿»è¯‘äº¤ä»˜ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b624d1251b2d4ee2a416b498a6a98ef2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2xvdWRXZUdv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842029&amp;x-signature=h6d7CElNOsRFIT%2BrBcrAYmYOzGs%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>å¼•å…¥ Deep Research æ¶æ„</strong>ï¼šåœ¨æœªæ¥ï¼ŒæœåŠ¡æ¡†æ¶å›¢é˜Ÿå¸Œæœ›ã€ŒåŠç©ºã€ä¸ä»…èƒ½â€œç¿»è¯‘â€ä»£ç ï¼Œæ›´èƒ½â€œé‡æ„â€ä»£ç ã€‚å®ƒå°†èƒ½è‡ªåŠ¨å°†ç¿»è¯‘åçš„ä»£ç ï¼Œé‡æ„ä¸ºæ›´ç¬¦åˆ Rust æœ€ä½³å®è·µçš„å½¢æ€ï¼Œå……åˆ†é‡Šæ”¾ Rust è¯­è¨€çš„å¼ºå¤§æ½œåŠ›ã€‚</p>
</li>
<li>
<p><strong>æŒç»­æ¨å¹¿ä¼˜åŒ–</strong>ï¼šæœåŠ¡æ¡†æ¶å›¢é˜Ÿå°†æŒç»­æ‰©å¤§ã€ŒåŠç©ºã€çš„æ¨å¹¿èŒƒå›´ï¼Œç§¯ç´¯æ›´å¤šåœºæ™¯çš„è¿ç§»æ¡ˆä¾‹ï¼Œå¹¶å»ºç«‹ç”¨æˆ·åé¦ˆçš„é—­ç¯ã€‚é€šè¿‡åˆ†æç”¨æˆ·å¯¹ç¿»è¯‘ä»£ç çš„ä¿®æ”¹ï¼ŒæŒç»­ã€æ™ºèƒ½åœ°ä¼˜åŒ–ç¿»è¯‘æµç¨‹ä¸ä»£ç è´¨é‡ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§‚æµ‹äº‘ MCP Server æ¥å…¥å’Œä½¿ç”¨æœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7577229187896229923</link>    <guid>https://juejin.cn/post/7577229187896229923</guid>    <pubDate>2025-11-27T09:54:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577229187896229923" data-draft-id="7577202452799111168" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§‚æµ‹äº‘ MCP Server æ¥å…¥å’Œä½¿ç”¨æœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-27T09:54:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§‚æµ‹äº‘ MCP Server æ¥å…¥å’Œä½¿ç”¨æœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:54:44.000Z" title="Thu Nov 27 2025 09:54:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">MCP ä»‹ç»</h2>
<p>MCP Serverï¼Œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆModel Context Protocolï¼Œç®€ç§° MCPï¼‰ æ˜¯ä¸€ä¸ªå¼€æ”¾åè®®ï¼Œæ—¨åœ¨æ ‡å‡†åŒ–åº”ç”¨ç¨‹åºä¸ AI æ¨¡å‹ä¹‹é—´çš„å®‰å…¨è¿æ¥å’Œæ•°æ®æºè®¿é—®ã€‚å®ƒçš„æ ¸å¿ƒç›®æ ‡æ˜¯è®©å¼€å‘è€…èƒ½å¤Ÿé€šè¿‡ç»Ÿä¸€çš„â€œå·¥å…·â€å’Œâ€œèµ„æºâ€ï¼Œè½»æ¾åœ°ä¸ºæ¨¡å‹æä¾›ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼ˆå¦‚æ•°æ®ã€å†…å®¹ã€æ“ä½œï¼‰ï¼Œä»è€Œå¢å¼ºæ¨¡å‹èƒ½åŠ›ï¼Œè€Œæ— éœ€é‡æ–°è®­ç»ƒæ¨¡å‹ã€‚</p>
<p>åŸºäº MCP Server æ„å»ºçš„æœåŠ¡ï¼Œæœ€ç»ˆæä¾›ä¸€ä¸ªç»Ÿä¸€çš„å¤šæ¨¡å‹å¯è°ƒç”¨æ¥å£ã€‚è¯¥æœåŠ¡æ”¯æŒå¤šå®¢æˆ·ç«¯æ¥å…¥ï¼Œå¹¶é‡‡ç”¨ API Key é‰´æƒæœºåˆ¶ï¼Œä»¥æ­¤å®‰å…¨è®¿é—®è§‚æµ‹äº‘çš„å„é¡¹æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬ç›‘æ§å™¨ã€æ—¥å¿—ã€ä»ªè¡¨æ¿åŠ DQL æŸ¥è¯¢ã€‚</p>
<h2 data-id="heading-1">è§‚æµ‹äº‘</h2>
<p>è§‚æµ‹äº‘æ˜¯ä¸€æ¬¾ä¸“ä¸º IT å·¥ç¨‹å¸ˆæ‰“é€ çš„å…¨é“¾è·¯å¯è§‚æµ‹äº§å“ï¼Œå®ƒé›†æˆäº†åŸºç¡€è®¾æ–½ç›‘æ§ã€åº”ç”¨ç¨‹åºæ€§èƒ½ç›‘æ§å’Œæ—¥å¿—ç®¡ç†ï¼Œä¸ºæ•´ä¸ªæŠ€æœ¯æ ˆæä¾›å®æ—¶å¯è§‚å¯Ÿæ€§ã€‚è¿™æ¬¾äº§å“èƒ½å¤Ÿå¸®åŠ©å·¥ç¨‹å¸ˆå…¨é¢äº†è§£ç«¯åˆ°ç«¯çš„ç”¨æˆ·ä½“éªŒè¿½è¸ªï¼Œäº†è§£åº”ç”¨å†…å‡½æ•°çš„æ¯ä¸€æ¬¡è°ƒç”¨ï¼Œä»¥åŠå…¨é¢ç›‘æ§äº‘æ—¶ä»£çš„åŸºç¡€è®¾æ–½ã€‚æ­¤å¤–ï¼Œè§‚æµ‹äº‘è¿˜å…·å¤‡å¿«é€Ÿå‘ç°ç³»ç»Ÿå®‰å…¨é£é™©çš„èƒ½åŠ›ï¼Œä¸ºæ•°å­—åŒ–æ—¶ä»£æä¾›å®‰å…¨ä¿éšœã€‚</p>
<h3 data-id="heading-2">MCP Server æ¥å…¥</h3>
<p>æ­¤å¤„ä»¥é€šè¿‡ Cherry Studio æ¥å…¥æ–¹å¼ä¸ºä¾‹ã€‚</p>
<p>1ã€ä¸‹è½½Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.cherry-ai.com%2Fcherry-studio%2Fdownload" target="_blank" title="https://docs.cherry-ai.com/cherry-studio/download" ref="nofollow noopener noreferrer">MCP Server å®¢â¼¾ç«¯ Cherry Studio</a>ï¼Œé€‰æ‹©å¯¹åº”ç‰ˆæœ¬</p>
<p>2ã€æ‰“å¼€ Cherry Studioï¼Œç‚¹å‡»è®¾ç½®ï¼Œç‚¹å‡» MCPï¼Œç‚¹å‡»æ·»åŠ </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9afddf2307341adac35d517c7fdefd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=540dCJm75InFIAgJquAiCOr40io%3D" alt="" loading="lazy"/></p>
<p>æç¤ºï¼šå¦‚æœ mcp æœåŠ¡ä¸èƒ½å¼€å¯è¯·å®‰è£… UV Bun</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52cc4194aaaf4eafad8e0ce9c2bd6d8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=Q7on9f%2FjaYsfAajciYVnwAiNKjc%3D" alt="" loading="lazy"/></p>
<p>3ã€MCP Server è®¾ç½®</p>
<p>3.1 è®¾ç½® MCP æœåŠ¡å™¨åç§° ï¼ˆè¿™é‡Œä»¥å‘½å MCP æœåŠ¡å™¨ ä¸ºä¾‹ï¼‰ ç‚¹å‡»ç±»å‹é€‰æ‹© streamableHttp</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7505ee0cf2854edfaac0e6bf72f579cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=nyI1zNZVMTD%2F%2FlGZrrpzfvczAFY%3D" alt="" loading="lazy"/></p>
<p>3.2 é…ç½®URLä»¥åŠè¯·æ±‚å¤´</p>
<p>å®šä¹‰ URLï¼š<code>https://obsy-ai.guance.com/obsy_ai_mcp/mcp</code></p>
<p>è¯·æ±‚å¤´æ ¼å¼ä¸ºï¼š<code>Authorization=DF-API-KEY;Endpoint=SITE_KEY</code></p>
<p>é…ç½®è¯´æ˜</p>
<ul>
<li>æ¥â¼ä»¥Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.guance.com%2Fmanagement%2Fapi-key%2F" target="_blank" title="https://docs.guance.com/management/api-key/" ref="nofollow noopener noreferrer">API KEY</a>Â ä¸ºè®¤è¯â½…å¼ï¼Œæ¯â¼€æ¬¡è¯·æ±‚ä½¿â½¤è¯·æ±‚ä½“ Header ä¸­çš„Â <code>DF-API-KEY</code>Â çš„å€¼ä½œä¸ºæœ‰æ•ˆæ€§æ£€éªŒï¼Œä»¥åŠæœ¬æ¬¡è¯·æ±‚çš„â¼¯ä½œç©ºé—´é™å®šä¾æ®ï¼ˆå–æ­¤Â <code>DF-API-KEY</code>Â æ‰€å±çš„â¼¯ä½œç©ºé—´ï¼‰ï¼›</li>
<li>å½“å‰ MCP æœåŠ¡æ‰€å±•â½°çš„æ‰€æœ‰æ¥â¼éƒ½åªéœ€è¦æä¾›Â <code>API KEY</code>Â ï¼ˆHeaderï¼š<code>DF-API-KEY</code>ï¼‰ä½œä¸ºå‡­è¯ã€‚å¦‚æœå‡­æ®å­˜åœ¨ä¸”æœ‰æ•ˆï¼Œåˆ™è§†ä¸ºè®¤è¯é€šè¿‡ã€‚</li>
<li>MCP Endpoint é…ç½®å‚æ•°ä¸ºÂ <code>SITE_KEY</code>ï¼Œä¾‹å¦‚:Â <code>cn1</code>ã€‚å…·ä½“å¯¹åº” MAP å‚è€ƒå¦‚ä¸‹ï¼š</li>
</ul>

<pre><code class="hljs language-makefile" lang="makefile">SITE_KEY_MAP = {
    <span class="hljs-comment"># === ä¸­å›½åŒº SaaS éƒ¨ç½² ===</span>
    <span class="hljs-string">"cn1"</span>: <span class="hljs-string">"https://openapi.guance.com"</span>,        <span class="hljs-comment"># ä¸­å›½åŒº1ï¼ˆæ­å·ï¼‰â€”â€”é»˜è®¤</span>
    <span class="hljs-string">"cn2"</span>: <span class="hljs-string">"https://aws-openapi.guance.com"</span>,    <span class="hljs-comment"># ä¸­å›½åŒº2ï¼ˆå®å¤ï¼‰</span>
    <span class="hljs-string">"cn4"</span>: <span class="hljs-string">"https://cn4-openapi.guance.com"</span>,    <span class="hljs-comment"># ä¸­å›½åŒº4ï¼ˆå¹¿å·ï¼‰</span>
    <span class="hljs-string">"cn6"</span>: <span class="hljs-string">"https://cn6-openapi.guance.one"</span>,    <span class="hljs-comment"># ä¸­å›½åŒº6ï¼ˆé¦™æ¸¯ï¼‰</span>
    <span class="hljs-string">"us1"</span>: <span class="hljs-string">"https://us1-openapi.guance.com"</span>,    <span class="hljs-comment"># æµ·å¤–åŒº1ï¼ˆä¿„å‹’å†ˆï¼‰</span>
    <span class="hljs-string">"eu1"</span>: <span class="hljs-string">"https://eu1-openapi.guance.one"</span>,    <span class="hljs-comment"># æ¬§æ´²åŒº1ï¼ˆæ³•å…°å…‹ç¦ï¼‰</span>
    <span class="hljs-string">"ap1"</span>: <span class="hljs-string">"https://ap1-openapi.guance.one"</span>,    <span class="hljs-comment"># äºšå¤ªåŒº1ï¼ˆæ–°åŠ å¡ï¼‰</span>
    <span class="hljs-string">"za1"</span>: <span class="hljs-string">"https://za1-openapi.guance.com"</span>,    <span class="hljs-comment"># éæ´²åŒº1ï¼ˆå—éï¼‰</span>
    <span class="hljs-string">"id1"</span>: <span class="hljs-string">"https://id1-openapi.guance.com"</span>,    <span class="hljs-comment"># å°å°¼åŒº1ï¼ˆé›…åŠ è¾¾ï¼‰</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dbcc22e52568462cbac875f9e5a316f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=xe8XGc24NRuJx7%2BVQhBmC%2FdZz3k%3D" alt="" loading="lazy"/></p>
<p>4ã€é…ç½®å®Œ MCP æœåŠ¡åï¼Œç‚¹å‡»å¼€å¯æŒ‰é’®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cb406a27727428893ce0622ef0c6002~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=orDr%2B1iMVkJomzhSdzX82EZ4P0I%3D" alt="" loading="lazy"/></p>
<p>5ã€å›åˆ°â¾¸â»šï¼Œé€‰æ‹©è¯é¢˜æˆ–è€…åŠ©æ‰‹ä¸­ç‚¹å‡»å›¾æ ‡ï¼Œé€‰æ‹©åˆšåˆšåˆ›å»ºçš„ MCPï¼ˆè¿™é‡Œä»¥ MCP æœåŠ¡å™¨ä¸ºä¾‹ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc09c799693749588fc63da999690e97~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=lINfYWW0aG9wg5UWS3UP0rl7d80%3D" alt="" loading="lazy"/></p>
<p>6ã€éªŒè¯æ¶ˆæ¯å·²ç¡®è®¤æ˜¯å¦æ¥å…¥äº† MCP æœåŠ¡</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c643af2637ef42018e59c718e06d0354~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842083&amp;x-signature=qvKF2av9UiZDEAUtqmaQFRQB5DY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>å¤§æ¨¡å‹æ¥å…¥ MCP æœåŠ¡çš„å¥½å¤„ï¼š</p>
<ul>
<li>çªç ´è‡ªèº«å±€é™ï¼Œæ—¢èƒ½è·å–è®­ç»ƒæ•°æ®ä¹‹å¤–çš„å®æ—¶ä¿¡æ¯ï¼Œä¹Ÿèƒ½å®‰å…¨è°ƒå–ä¼ä¸šç§æœ‰æ•°æ®ï¼Œè¿˜èƒ½å¼¥è¡¥å¤æ‚æ“ä½œèƒ½åŠ›çŸ­æ¿ï¼›</li>
<li>è°ƒç”¨å·¥å…·æ›´é«˜æ•ˆï¼ŒMCP çš„ç»Ÿä¸€æ ‡å‡†çœå»é€ä¸ªé€‚é…ä¸åŒå·¥å…·æ¥å£çš„éº»çƒ¦ï¼Œè¿˜èƒ½ä¸²è”å¤šä¸ªå·¥å…·ååŒå®Œæˆå¤æ‚ä»»åŠ¡ï¼›</li>
<li>é™ä½å¼€å‘ä¸è¿ç»´æˆæœ¬ï¼Œå¼€å‘è€…æ— éœ€å…³æ³¨å·¥å…·åº•å±‚å·®å¼‚ï¼Œå¯èšç„¦ä¸šåŠ¡ï¼ŒåŒæ—¶å¤šå·¥å…·åä½œçš„é—®é¢˜ä¹Ÿèƒ½é€šè¿‡æ ‡å‡†åŒ–åè®®ç®€åŒ–ï¼›</li>
<li>ä¾¿äºæ­å»ºåº”ç”¨ç”Ÿæ€ï¼Œæ—¢èƒ½è½»æ¾æ¥å…¥ç°æœ‰å„ç±» MCP æœåŠ¡å¿«é€Ÿé€‚é…æ–°åœºæ™¯ï¼Œä¹Ÿèƒ½å°†è‡ªèº«ç‰¹è‰²èƒ½åŠ›å°è£…æˆ MCP æœåŠ¡ä¾›ä»–äººå¤ç”¨ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿ | æ˜é‡‘ä¸€å‘¨ 11.27]]></title>    <link>https://juejin.cn/post/7576968345876463643</link>    <guid>https://juejin.cn/post/7576968345876463643</guid>    <pubDate>2025-11-27T09:56:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576968345876463643" data-draft-id="7577189654488432690" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿ | æ˜é‡‘ä¸€å‘¨ 11.27"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-27T09:56:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘ä¸€å‘¨"/> <meta itemprop="url" content="https://juejin.cn/user/53218623894222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿ | æ˜é‡‘ä¸€å‘¨ 11.27
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/53218623894222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘ä¸€å‘¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T09:56:12.000Z" title="Thu Nov 27 2025 09:56:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><em>æœ¬æ–‡å­—æ•°1500+ ï¼Œé˜…è¯»æ—¶é—´å¤§çº¦éœ€è¦ 5åˆ†é’Ÿã€‚</em></p>
<blockquote>
<p>ã€æ˜é‡‘ä¸€å‘¨ã€‘æœ¬æœŸäº®ç‚¹ï¼š</p>
</blockquote>
<ul>
<li>
<p><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7573521516324896795" target="_blank" title="https://juejin.cn/post/7573521516324896795">åˆ«å†æ»¥ç”¨ Base64 äº†â€”â€”Blob æ‰æ˜¯å‰ç«¯å‡è´Ÿçš„æ­£ç¡®å§¿åŠ¿</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7574739133945675818" target="_blank" title="https://juejin.cn/post/7574739133945675818">è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7575017581036765222" target="_blank" title="https://juejin.cn/post/7575017581036765222">Spring é¡¹ç›®åˆ«å†ä¹±æ³¨å…¥ Service äº†ï¼ç”¨ Lambda å°è£…ä¸ªç»Ÿä¸€è°ƒç”¨ç»„ä»¶ï¼Œçˆ½åˆ°é£èµ·</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7573601651782385691" target="_blank" title="https://juejin.cn/post/7573601651782385691">Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7575438636331630643" target="_blank" title="https://juejin.cn/post/7575438636331630643">å›é¡¾ Flutter Flight Plans ï¼Œå…³äº Flutter çš„ç°çŠ¶å’Œå®˜æ–¹çƒ­é—¨é—®é¢˜è§£ç­”</a></p>
</li>
<li>
<p><a href="https://juejin.cn/post/7575107094800449542" target="_blank" title="https://juejin.cn/post/7575107094800449542">Doubao-Seed-Codeæ·±åº¦æµ‹è¯„:ä¸€å¼ è®¾è®¡ç¨¿ç”Ÿæˆå®Œæ•´ç½‘ç«™,è§†è§‰ç†è§£ç¼–ç¨‹æ¨¡å‹å…¨æµç¨‹å®æˆ˜</a></p>
</li>
</ul>
<blockquote>
<p><strong>ã€Œä¸Šæ¦œè§„åˆ™ã€</strong>ï¼šæ–‡ç« å‘å¸ƒæ—¶é—´åœ¨æœ¬æœŸã€Œæ˜é‡‘ä¸€å‘¨ã€å‘å¸ƒæ—¶é—´çš„å‰ä¸€å‘¨å†…ï¼›ä¸”ç¬¦åˆå„ä¸ªæ ç›®çš„å†…å®¹å®šä½å’Œè¦æ±‚ã€‚ å¦‚å‘ç°æ–‡ç« æœ‰æŠ„è¢­ã€æ´—ç¨¿ç­‰è¿åç¤¾åŒºè§„åˆ™çš„è¡Œä¸ºï¼Œå°†å–æ¶ˆå½“æœŸåŠåç»­ä¸Šæ¦œèµ„æ ¼ã€‚</p>
</blockquote>
<h2 data-id="heading-0">ä¸€å‘¨â€œé‡‘â€é€‰</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d5bf990a124e3a87cffb06443ad9ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842171&amp;x-signature=yPlZnnrwlE7vKrbs37Z848GW4Xw%3D" alt="æ˜é‡‘ä¸€å‘¨ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<p><em>å†…å®¹è¯„å®¡ä»¬ä¼šåœ¨è¿‡å»çš„ä¸€å‘¨å†…å¯¹ç¤¾åŒºæ·±åº¦æŠ€æœ¯å¥½æ–‡è¿›è¡ŒæŒ–æ˜å’Œç­›é€‰ï¼Œä¼˜è´¨çš„æŠ€æœ¯æ–‡ç« æœ‰æœºä¼šå‡ºç°åœ¨ä¸‹æ–¹æ¦œå•ä¸­ï¼Œæ’åä¸åˆ†å…ˆåã€‚</em></p>
<h3 data-id="heading-1">å‰ç«¯</h3>
<p><a href="https://juejin.cn/post/7573521516324732955" target="_blank" title="https://juejin.cn/post/7573521516324732955">å¤§éƒ¨åˆ†äººéƒ½é”™äº†ï¼è¿™æ‰æ˜¯chromeæ’ä»¶å¤šè„šæœ¬é€šä¿¡çš„æ­£ç¡®å§¿åŠ¿</a> <a href="https://juejin.cn/user/3035079961218551/posts" target="_blank" title="https://juejin.cn/user/3035079961218551/posts">@ä¸ä¸€æ ·çš„å°‘å¹´_</a></p>
<blockquote>
<p>Chrome æµè§ˆå™¨å…¶å®å°±æ˜¯æŠŠå„ç§å·¥ä½œåˆ†å¼€æ¥åšï¼Œè°è´Ÿè´£å•¥éƒ½å¾ˆæ¸…æ¥šã€‚<code>ä¸»è¿›ç¨‹</code>ç®¡å¤§å±€ï¼Œ<code>æ¸²æŸ“è¿›ç¨‹</code>è´Ÿè´£æŠŠç½‘é¡µå†…å®¹å±•ç¤ºå‡ºæ¥ï¼Œ<code>ç½‘ç»œè¿›ç¨‹</code>ä¸“é—¨ææ•°æ®ä¼ è¾“ï¼Œ<code>GPUè¿›ç¨‹</code>è®©åŠ¨ç”»å’Œè§†é¢‘æ›´æµç•…ï¼Œ<code>æ’ä»¶è¿›ç¨‹</code>åˆ™è®©ä½ è£…çš„å„ç§æ‰©å±•å„è‡ªç‹¬ç«‹è¿è¡Œã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7573521516324896795" target="_blank" title="https://juejin.cn/post/7573521516324896795">åˆ«å†æ»¥ç”¨ Base64 äº†â€”â€”Blob æ‰æ˜¯å‰ç«¯å‡è´Ÿçš„æ­£ç¡®å§¿åŠ¿</a> <a href="https://juejin.cn/user/193147068224126/posts" target="_blank" title="https://juejin.cn/user/193147068224126/posts">@404æ˜Ÿçƒçš„çŒ«</a></p>
<blockquote>
<p>Blob æœ€å¤§çš„ç‰¹ç‚¹æ˜¯<strong>çº¯å®¢æˆ·ç«¯ã€é›¶ç½‘ç»œ</strong>ï¼šæ•°æ®ä¸€æ—¦è¿›å…¥ Blobï¼Œå°±æ´»åœ¨å†…å­˜é‡Œï¼Œæ— éœ€ä¸Šä¼ æœåŠ¡å™¨å³å¯é¢„è§ˆã€ä¸‹è½½æˆ–è¿›ä¸€æ­¥åŠ å·¥ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7574739133945675818" target="_blank" title="https://juejin.cn/post/7574739133945675818">è½¬è½¬UIè‡ªåŠ¨åŒ–èµ°æŸ¥æ–¹æ¡ˆæ¢ç´¢</a> <a href="https://juejin.cn/user/606586148237431/posts" target="_blank" title="https://juejin.cn/user/606586148237431/posts">@è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ</a></p>
<blockquote>
<p>æ•´ä¸ªæ–¹æ¡ˆçš„æ ¸å¿ƒå…¶å®å°±åšäº†ä¸€ä»¶äº‹ï¼šæŠŠä¸¤ä¸ªçœ‹èµ·æ¥å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼ˆè®¾è®¡ç¨¿çš„JSONå’ŒHTMLçš„DOMæ ‘ï¼‰ï¼Œé€šè¿‡ä¸€ç³»åˆ—å½’ä¸€åŒ–å¤„ç†ï¼Œå˜æˆå¯ä»¥ç›´æ¥æ¯”å¯¹çš„åŒæ„æ•°æ®ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­æœ€å¤§çš„æ„Ÿå—æ˜¯ï¼Œ<strong>å‰ç«¯å¼€å‘å’ŒUIè®¾è®¡ä¹‹é—´çš„gapï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸¤å¥—ä¸åŒçš„æ¸²æŸ“è§„åˆ™åœ¨äº’ç›¸è¾ƒåŠ²ã€‚</strong></p>
</blockquote>
<p><a href="https://juejin.cn/post/7573588675638001679" target="_blank" title="https://juejin.cn/post/7573588675638001679"> npm scriptsçš„é«˜çº§ç©æ³•ï¼špreã€postå’Œ--ï¼Œä½ çœŸçš„ä¼šç”¨å—ï¼Ÿ</a> <a href="https://juejin.cn/user/3878732754331096/posts" target="_blank" title="https://juejin.cn/user/3878732754331096/posts"> @ErpanOmer</a></p>
<blockquote>
<p><code>npm scripts</code>ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªç®€å•çš„è„šæœ¬å¿«æ·æ–¹å¼ã€‚<strong>å®ƒæ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆWorkflowï¼‰çš„å®šä¹‰</strong>Â ã€‚<code>pre</code>å’Œ<code>post</code>ï¼Œå®šä¹‰äº†ä½ å·¥ä½œæµçš„<strong>æ‰§è¡Œé¡ºåº</strong>å’Œ<strong>ä¾èµ–</strong>ï¼Œä¿è¯äº†<strong>ä»£ç æ£€æŸ¥</strong>ç­‰åŠŸèƒ½ï¼Œè€Œ<code>--</code>æ˜¯ç¡®ä¿ä½ å·¥ä½œæµä¸­çš„<strong>è„šæœ¬å‚æ•°</strong>ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7574281453708214278" target="_blank" title="https://juejin.cn/post/7574281453708214278">Vueé«˜é˜¶ç»„ä»¶å·²è¿‡æ—¶ï¼Ÿè¿™3ç§æ–°æ–¹æ¡ˆè®©ä½ çš„ä»£ç æ›´ä¼˜é›…</a> <a href="https://juejin.cn/user/3940246036939358/posts" target="_blank" title="https://juejin.cn/user/3940246036939358/posts"> @è‰¯å±±æœ‰é£æ¥</a></p>
<blockquote>
<p>HOCåˆ°Composition APIï¼Œä¸ä»…ä»…æ˜¯APIçš„å˜åŒ–ï¼Œæ›´æ˜¯å¼€å‘æ€ç»´çš„å‡çº§ã€‚
HOCä»£è¡¨çš„ç»„ä»¶åŒ…è£…æ¨¡å¼å·²ç»æˆä¸ºè¿‡å»ï¼Œè€ŒåŸºäºå‡½æ•°çš„ç»„åˆæ¨¡å¼æ­£æ˜¯æœªæ¥ã€‚è¿™ç§è½¬å˜è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ æ¸…æ™°ã€å¯æµ‹è¯•ã€å¯ç»´æŠ¤ã€‚</p>
</blockquote>
<h3 data-id="heading-2">åç«¯</h3>
<p><a href="https://juejin.cn/post/7575017581036765222" target="_blank" title="https://juejin.cn/post/7575017581036765222">Spring é¡¹ç›®åˆ«å†ä¹±æ³¨å…¥ Service äº†ï¼ç”¨ Lambda å°è£…ä¸ªç»Ÿä¸€è°ƒç”¨ç»„ä»¶ï¼Œçˆ½åˆ°é£èµ·</a>  <a href="https://juejin.cn/user/995479086189514/posts" target="_blank" title="https://juejin.cn/user/995479086189514/posts">@åªä¼šå†™ä»£ç </a></p>
<blockquote>
<p>å…¶å®è¿™ç»„ä»¶å°±å¹²äº† 3 ä»¶äº‹ï¼š1.  ä½ ä¼ ä¸ª Lambdaï¼ˆæ¯”å¦‚UserService::queryUserï¼‰ï¼Œå®ƒå¸®ä½ æ‰¾åˆ°å¯¹åº”çš„ Service å®ä¾‹ï¼›2.  æŠŠæ‰¾åˆ°çš„å®ä¾‹å’Œæ–¹æ³•ç¼“å­˜èµ·æ¥ï¼Œä¸‹æ¬¡è°ƒç”¨æ›´å¿«ï¼›3.  ç»Ÿä¸€æ‰§è¡Œæ–¹æ³•ï¼Œé¡ºä¾¿æŠŠæ—¥å¿—ã€å¼‚å¸¸å¤„ç†éƒ½åŒ…äº†ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7573601651782385691" target="_blank" title="https://juejin.cn/post/7573601651782385691">Golang HTTPè¯·æ±‚è¶…æ—¶ä¸é‡è¯•ï¼šæ„å»ºé«˜å¯é ç½‘ç»œè¯·æ±‚ï½œå¾—ç‰©æŠ€æœ¯</a> <a href="https://juejin.cn/user/2392954206960247/posts" target="_blank" title="https://juejin.cn/user/2392954206960247/posts">@å¾—ç‰©æŠ€æœ¯</a></p>
<blockquote>
<p>HTTPè¯·æ±‚çœ‹ä¼¼ç®€å•ï¼Œä½†å®ƒè¿æ¥ç€æ•´ä¸ªç³»ç»Ÿçš„"è¡€ç®¡"ã€‚å¿½è§†è¶…æ—¶å’Œé‡è¯•ï¼Œå°±åƒåœ¨è¡€ç®¡ä¸Šç•™äº†ä¸ªç¼ºå£â€”â€”å¹³æ—¶æ²¡äº‹ï¼Œå‹åŠ›ä¸€æ¥å°±å¤§å‡ºè¡€ã€‚æ„å»ºé«˜å¯é çš„ç½‘ç»œè¯·æ±‚éœ€è¦åœ¨è¶…æ—¶æ§åˆ¶ã€é‡è¯•ç­–ç•¥ã€å¹‚ç­‰æ€§ä¿è¯å’Œæ€§èƒ½ä¼˜åŒ–ä¹‹é—´å–å¾—å¹³è¡¡ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Android</h3>
<p><a href="https://juejin.cn/post/7575438636331630643" target="_blank" title="https://juejin.cn/post/7575438636331630643">å›é¡¾ Flutter Flight Plans ï¼Œå…³äº Flutter çš„ç°çŠ¶å’Œå®˜æ–¹çƒ­é—¨é—®é¢˜è§£ç­”</a> <a href="https://juejin.cn/user/817692379985752/posts" target="_blank" title="https://juejin.cn/user/817692379985752/posts">@æ‹çŒ«deå°éƒ­</a></p>
<blockquote>
<p>åœ¨ Flutter å®˜æ–¹åˆšä¸¾è¡Œçš„ Flutter Flight Plans ç›´æ’­é‡Œï¼Œé™¤äº†å‘å¸ƒ <a href="https://juejin.cn/post/7571693273728696356" title="https://juejin.cn/post/7571693273728696356" target="_blank">Flutter 3.38</a> å’Œ <a href="https://juejin.cn/post/7571693273728942116" title="https://juejin.cn/post/7571693273728942116" target="_blank">Dart 3.10</a> ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰ä¸å°‘å€¼å¾—ä¸€èŠçš„å†…å®¹ï¼Œä¾‹å¦‚ä¼ä¸šçº§çš„ Flutter æ¡ˆä¾‹å±•ç¤ºï¼ŒFlutter + AI çš„åœºæ™¯ï¼Œ<strong>é‡ç‚¹è¿˜æœ‰é’ˆå¯¹å¤§é‡çƒ­é—¨é—®é¢˜çš„ Q&amp;Aï¼ˆå¤šçª—å£ã€GenUIã€PC\Web æ’ä»¶ï¼‰ ç­‰</strong>ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7573549302620258347" target="_blank" title="https://juejin.cn/post/7573549302620258347">Androidç³»ç»ŸBUGï¼šä¿®æ”¹çº¿ç¨‹åç›®æ ‡é”™ä¹±é—®é¢˜æ¢ç©¶</a> <a href="https://juejin.cn/user/4089838984502199/posts" target="_blank" title="https://juejin.cn/user/4089838984502199/posts">@å“ä¿®æ­¦K</a></p>
<blockquote>
<p>æ­¤æ¬¡çš„é—®é¢˜å‘ç”ŸåŸå› æ˜¯ ä¸‰æ–¹åœ°å›¾SDK é‡å†™äº†start()å‡½æ•°ï¼Œåˆå¤šæ¬¡è°ƒç”¨äº†startå‡½æ•°ï¼Œå¯¼è‡´æ»´æ»´çš„boosteræ’ä»¶æ·»åŠ çš„setNameé€»è¾‘ä¹Ÿè¢«å¤šæ¬¡è§¦å‘ï¼Œè€Œæ­¤æ—¶è°ƒç”¨setNameçš„çº¿ç¨‹<strong>åˆšå¥½æ˜¯ä¸»çº¿ç¨‹ï¼Œå› æ­¤æœ€ç»ˆå½±å“äº† ä¸»è¿›ç¨‹åç§°</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-4">äººå·¥æ™ºèƒ½</h3>
<p><a href="https://juejin.cn/post/7575107094800449542" target="_blank" title="https://juejin.cn/post/7575107094800449542">Doubao-Seed-Codeæ·±åº¦æµ‹è¯„:ä¸€å¼ è®¾è®¡ç¨¿ç”Ÿæˆå®Œæ•´ç½‘ç«™,è§†è§‰ç†è§£ç¼–ç¨‹æ¨¡å‹å…¨æµç¨‹å®æˆ˜</a> <a href="https://juejin.cn/user/1722263248317024/posts" target="_blank" title="https://juejin.cn/user/1722263248317024/posts">@Nturmoils</a></p>
<blockquote>
<p>å³ä½¿æœ‰äº›æ¨¡å‹é€šè¿‡MCPå·¥å…·è°ƒç”¨å®ç°äº†"çœ‹å›¾",ä½†æœ¬è´¨ä¸Šæ˜¯å…ˆæŠŠå›¾ç‰‡è½¬æˆæ–‡å­—æè¿°,å†äº¤ç»™æ¨¡å‹ç†è§£ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ä¿¡æ¯æŠ˜æŸéå¸¸å¤§,æ•ˆæœè¿œä¸åŠåŸç”ŸVLMèƒ½åŠ›ã€‚Doubao-Seed-Codeçš„è§†è§‰ç†è§£æ˜¯<strong>æ¨¡å‹è®­ç»ƒé˜¶æ®µå°±å†…ç½®çš„èƒ½åŠ›</strong>,å¯ä»¥ç›´æ¥"çœ‹æ‡‚"å›¾ç‰‡,è¯†åˆ«UIå¸ƒå±€ã€é…è‰²æ–¹æ¡ˆã€è®¾è®¡ç»†èŠ‚,ç„¶åç”Ÿæˆå¯¹åº”çš„ä»£ç ã€‚</p>
</blockquote>
<p><a href="https://juejin.cn/post/7574568258788851763" target="_blank" title="https://juejin.cn/post/7574568258788851763">å¦‚ä½•å®ç° Remote MCP-Server</a> <a href="https://juejin.cn/user/2137106333053912/posts" target="_blank" title="https://juejin.cn/user/2137106333053912/posts"> @è¢‹é¼ äº‘æ•°æ ˆUEDå›¢é˜Ÿ</a></p>
<blockquote>
<p>å¯¹äºå…¬å¸å†…éƒ¨çš„MCP-Server, ç”±äºéšç§æ€§é—®é¢˜ä¸èƒ½å‘å¸ƒä¸ºnpmåŒ…ï¼Œé‚£ä¹ˆå°±æ²¡æ³•ä»¥<code>npx</code>æˆ–è€…<code>uvx</code>ç­‰å½¢å¼å¿«é€Ÿçš„å…±äº«ä½¿ç”¨ã€‚æ‰€ä»¥åŸºæœ¬ä¼šä»¥STDIOç±»å‹çš„MCP-Serverè¿›è¡Œå¼€å‘ï¼Œåœ¨å†…éƒ¨è¿›è¡Œå…±äº«æ—¶åªèƒ½å°†å¯¹åº”æºæ–‡ä»¶æ‹‰å–æœ¬åœ°ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ç¤¾åŒºæ´»åŠ¨æ—¥å†</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c589decbd804477a753bfc1a3b8f5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5LiA5ZGo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764842171&amp;x-signature=5zQqoShbufXJ9vNoZqQINJnaMd0%3D" alt="æ˜é‡‘å®˜æ–¹ æ–‡ç« å¤´å›¾ 1303x734.jpg" loading="lazy"/></p>
<h4 data-id="heading-6">æ´»åŠ¨æ—¥å†</h4>

















<table><thead><tr><th>æ´»åŠ¨åç§°</th><th>æ´»åŠ¨æ—¶é—´</th><th/><th/></tr></thead><tbody><tr><td><a href="https://juejin.cn/post/7571751304625815598" target="_blank" title="https://juejin.cn/post/7571751304625815598">ğŸš€TRAE SOLO å®æˆ˜èµ›</a></td><td>2025å¹´11æœˆ13æ—¥-2025å¹´12æœˆ16æ—¥</td><td/><td/></tr></tbody></table>
<h2 data-id="heading-7">ğŸ“– æŠ•ç¨¿ä¸“åŒº</h2>
<blockquote>
<p>å¤§å®¶å¯ä»¥åœ¨è¯„è®ºåŒºæ¨èè®¤ä¸ºä¸é”™çš„æ–‡ç« ï¼Œå¹¶é™„ä¸Šé“¾æ¥å’Œæ¨èç†ç”±ï¼Œæœ‰æœºä¼šå‘ˆç°åœ¨ä¸‹ä¸€æœŸã€‚æ–‡ç« åˆ›å»ºæ—¥æœŸå¿…é¡»åœ¨ä¸‹æœŸæ˜é‡‘ä¸€å‘¨å‘å¸ƒå‰ä¸€å‘¨ä»¥å†…ï¼›å¯ä»¥æ¨èè‡ªå·±çš„æ–‡ç« ã€ä¹Ÿå¯ä»¥æ¨èä»–äººçš„æ–‡ç« ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¯¶ï¼Œè¿™ä¹ˆå¥½ç”¨çš„ mock ä½ æ€ä¹ˆä¸æ—©è¯´]]></title>    <link>https://juejin.cn/post/7577016562252644403</link>    <guid>https://juejin.cn/post/7577016562252644403</guid>    <pubDate>2025-11-27T08:09:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252644403" data-draft-id="7574726841543213094" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¯¶ï¼Œè¿™ä¹ˆå¥½ç”¨çš„ mock ä½ æ€ä¹ˆä¸æ—©è¯´"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-27T08:09:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="imoo"/> <meta itemprop="url" content="https://juejin.cn/user/2682464104364766"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¯¶ï¼Œè¿™ä¹ˆå¥½ç”¨çš„ mock ä½ æ€ä¹ˆä¸æ—©è¯´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464104364766/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    imoo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:09:50.000Z" title="Thu Nov 27 2025 08:09:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>è€æ¿ï¼šå°ç‹å•Šï¼Œä½  bug ç‡ä¹Ÿå¤ªé«˜äº†ï¼Œå¾—æƒ³æƒ³åŠæ³•ï¼Œä¸ç„¶æ‰£ä½ ç»©æ•ˆã€‚
å°ç‹çœ¼é‡Œé—ªè¿‡ä¸€åˆ†æ— å¥ˆäºŒåˆ†å¿ƒé…¸ä¸‰åˆ†è‹¦æ¶©å››åˆ†èº«ä¸ç”±å·±ï¼Œå¾ˆå¤šæ¡ä»¶ caseã€è¾¹ç¼˜ case éƒ½ä¸å¥½è§¦å‘ï¼Œå¾ˆéš¾è‡ªæµ‹å……åˆ†ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ–°æ‰‹å¼•å¯¼ï¼Œæ ‡è¯†ç”±åç«¯ä¸‹å‘ï¼Œç”³è¯·ä¸ªæ–°è´¦å·éå¸¸éº»çƒ¦</li>
<li>å„ç±»çŠ¶æ€çš„æµè½¬ï¼Œæ¯”å¦‚ xx ä»»åŠ¡å¤±è´¥ï¼Œä½†æ˜¯å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½èµ°ä¸åˆ°å¤±è´¥è·¯çº¿</li>
<li>ä½™é¢ä¸º 0 çš„æƒ…å†µä¸‹çš„å„ç§ caseï¼Œæµ‹è¯•è´¦å·å¾€å¾€éƒ½æ˜¯æ‹‰æ»¡çš„ä½™é¢</li>
<li>vip ä¸æ™®é€šç”¨æˆ·çš„å„ç§å·®å¼‚ç‚¹</li>
</ul>
<p>å¯¹è¿™ç±»çš„æƒ…å†µï¼Œå°±åªèƒ½ç›²å†™ï¼Œç„¶åæ‰‹åŠ¨åœ¨ä»£ç é‡Œæ”¹çŠ¶æ€æ¥å¤§è‡´çœ‹ä¸€ä¸‹æ•ˆæœï¼Œå°±å¾ˆéš¾æ¨¡æ‹Ÿå‡ºä¸€ä¸ªå®Œæ•´çš„æµç¨‹ï¼Œä¼šå‡º bug ä¹Ÿå±å®æ­£å¸¸ã€‚</p>
<p>æœ‰å¿ƒæ€¥çš„åŒå­¦å°±è¦è¯´äº†ï¼Œmock å‘€ï¼Œç”¨ mock å‘€ï¼</p>
<p>è¯è™½å¦‚æ­¤ï¼Œä½†æ˜¯è¦ä½¿ç”¨è¿™ä¸€å¥—ï¼Œä¸€æ˜¯ä½ éœ€è¦èµ·æœåŠ¡/å¼€ç¨‹åºã€å†™æ•°æ®ã€è¿è¡Œï¼Œè¿™ä¸€å¥—ä¸‹æ¥è¿˜æ˜¯æ¯”è¾ƒè´¹æ—¶é—´çš„ã€‚äºŒæ˜¯æ­¤ç±»é—®é¢˜ç»µç»µæ— ç»æœŸï¼Œæ¯æ¬¡éƒ½è¿™ä¹ˆæï¼Œæ—¶é—´æˆæœ¬ä¼šæ— é™ç´¯åŠ ã€‚</p>
<p>è€Œä¸”é¢‘ç¹è°ƒè¯•å¾€å¾€ä¼šå¼„è„ä»£ç ï¼Œå¾ˆå®¹æ˜“æäº¤ä¸Šä¸€äº›è°ƒè¯•æ•°æ®ï¼Œæœ‰æ²¡æœ‰æ›´ç®€å•å¥½ç”¨çš„æ–¹æ¡ˆå‘¢ï¼Ÿ</p>
<p>æœ‰çš„æœ‰çš„ï¼ˆæå‡º chromeï¼‰ï¼Œè¿™ä¹ˆç®€å•çš„æ–¹æ¡ˆè¿˜æœ‰ä¸€ä¸ªï¼Œé‚£å°±æ˜¯æˆ‘ä»¬å¸¸æ‰“äº¤é“çš„æ§åˆ¶å°äº†ã€‚</p>
<h2 data-id="heading-1">chrome ä¹‹æ›¿æ¢</h2>
<p>è¿™é‡Œä¸¾ä¸ªå®é™…ä¾‹å­å¸¦å¤§å®¶èµ°ä¸€éï¼Œæ¯”å¦‚æˆ‘æ˜¯æ˜é‡‘çš„å‰ç«¯ï¼Œæˆ‘æƒ³æµ‹è¯•ä¸€ä¸‹æ–‡ç« <strong>å®¡æ ¸ä¸­</strong>çš„æ ·å¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1a4208ee424d4a6d9f34ec4d219657ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=bsPP2tCMunltvJ9bVrceIFZ91C4%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯æ€»ä¸èƒ½å›å›éƒ½é‡æ–°å†™ä¸€ä¸ªå®¡æ ¸ä¸­çš„æ–‡ç« ä¾›è‡ªå·±æµ‹è¯•ï¼Œè´¹æ—¶è´¹åŠ›ã€‚å·²çŸ¥å®¡æ ¸ä¸­çš„çŠ¶æ€ç”±åç«¯ <code>dynamic</code> æ¥å£çš„ <code>audit_status</code>å†³å®šï¼Œè¯¥çŠ¶æ€ä¸º 1 æ—¶ä¼šå±•ç¤ºå®¡æ ¸ä¸­ï¼Œä¸º 0 æ—¶æ˜¯æ­£å¸¸ã€‚</p>
<p>å…ˆçœ‹ä¸€ä¸‹æœ€ç»ˆå®ç°çš„æ•ˆæœå§ï¼Œåªéœ€è¦ç®€å•çš„æ“ä½œå°±å¯ä»¥å¼€é—­ mockï¼Œè€Œä¸”ä¸ä¾µå…¥ä»£ç ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af229bbdedac4b569af5c0022b072034~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=F3px88llUPNi5OSGy9fJSsRemYo%3D" alt="20251121172420_rec_.gif" loading="lazy"/></p>
<p>OKï¼Œå†è¯´ä¸‹è¯¦ç»†ä½¿ç”¨æ­¥éª¤ï¼š</p>
<ol>
<li>åœ¨ç½‘ç»œä¸­æ‰¾åˆ°ç›®æ ‡æ¥å£
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c700ca4a136b48948efe5e20270cda42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=uvE5BnXYd3aCHH4LrZ83MbcuOQU%3D" alt="image.png" loading="lazy"/></li>
<li>å³é”®è¿›è¡Œæ›¿æ¢
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/267d38f35f7d47a9a4b87fff14401abc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=DuDOgdR4K0IrlBDUNlSxP7b9k7k%3D" alt="image.png" loading="lazy"/></li>
<li>å¦‚æœæ˜¯é¦–æ¬¡ä½¿ç”¨ï¼Œä¼šæœ‰ä¸ªæç¤ºï¼Œéœ€è¦ä½ é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹æ¥å­˜æ”¾æ•°æ®
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47999f2a2e7c4a0fb37405527d037a91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=TdQw5CLefKLlRQIFQk2lblbIEWU%3D" alt="image.png" loading="lazy"/></li>
<li>æ­¤æ—¶ä¼šè¿›å…¥åˆ°æ›¿æ¢çš„ç¼–è¾‘é¡µï¼Œè¯¥é¡µé¢å¯èƒ½ä¸ºåˆšæ‰è¯·æ±‚çš„å†…å®¹ï¼Œä¹Ÿæœ‰æ—¶å€™ä¸ºç©ºã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8c23b06a1154fb7a261644d0a59b8e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=vSjFXByznn%2F1qFpmd6mvjMRAfRo%3D" alt="image.png" loading="lazy"/>
å¦‚æœä¸ºç©ºçš„è¯ï¼Œå¯ä»¥å…ˆå»åˆšæ‰çš„å“åº”é‡Œå¤åˆ¶ï¼Œå†è´´è¿‡æ¥
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d18e0b123084d109e2ece1e98c90716~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=qUhMRh0QZWhnQq0lqvLdCsmz4ow%3D" alt="image.png" loading="lazy"/></li>
<li>æ¥ç€å°±å¯ä»¥è‡ªè¡Œä¿®æ”¹å“åº”çš„å†…å®¹äº†ï¼šè¿™é‡Œæˆ‘ä»¬æŠŠ<code>audit_status</code>ä»0æ”¹ä¸º1
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2e7d38c18f2484c885522087c6567e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=zcFKFJVp%2BhGsDyy4gDNVEZdY%2FOc%3D" alt="image.png" loading="lazy"/></li>
<li>ctrl s ä¿å­˜åï¼Œåˆ·æ–°é¡µé¢å³å¯çœ‹åˆ°æ•ˆæœ
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76949dd8c9f84a788d85e302467ba645~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaW1vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835790&amp;x-signature=K%2B9ivq1QlM1WL%2FDu4yqtzg3g24I%3D" alt="image.png" loading="lazy"/></li>
</ol>
<p>å¤§åŠŸå‘Šæˆï¼Œè™½ç„¶çœ‹èµ·æ¥æ­¥éª¤å¾ˆå¤šï¼Œä½†å¤§å¤šæ•°æƒ…å†µä¸‹å®é™…ä¸Š<strong>åªéœ€è¦å³é”®æ›¿æ¢ï¼Œç¼–è¾‘ä¿å­˜ä¸¤æ­¥å°±å®Œäº‹äº†</strong>ï¼Œæ—¢æ–¹ä¾¿å¯ç”¨ï¼Œåˆä¸ä¾µå…¥ä»£ç ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SurfaceControlViewHost å®ç°è·¨è¿›ç¨‹UIæ¸²æŸ“]]></title>    <link>https://juejin.cn/post/7577016562252595251</link>    <guid>https://juejin.cn/post/7577016562252595251</guid>    <pubDate>2025-11-27T08:06:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577016562252595251" data-draft-id="7576929700842881033" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SurfaceControlViewHost å®ç°è·¨è¿›ç¨‹UIæ¸²æŸ“"/> <meta itemprop="keywords" content="Android,è®¾è®¡"/> <meta itemprop="datePublished" content="2025-11-27T08:06:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="èœå°±å¤šå­¦"/> <meta itemprop="url" content="https://juejin.cn/user/2663485744614969"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SurfaceControlViewHost å®ç°è·¨è¿›ç¨‹UIæ¸²æŸ“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2663485744614969/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    èœå°±å¤šå­¦
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:06:52.000Z" title="Thu Nov 27 2025 08:06:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>åœ¨å­¦ä¹ photo pickeræ–‡æ¡£æ—¶ï¼Œçœ‹åˆ°äº†è¿™æ ·ä¸€ä¸ªæè¿°ï¼›å¯ä»¥é€šè¿‡ä¸€ç§æ–¹æ³•ï¼Œå°†å¦ä¸€ä¸ªè¿›ç¨‹çš„å¤æ‚é¡µé¢æ¸²æŸ“åˆ°å½“å‰é¡µé¢ä¸­ï¼Œå¹¶æ”¯æŒåšå¤æ‚äº¤äº’ï¼Œä¸”å…·å¤‡ä¸€å®šçš„å®‰å…¨æ€§å’Œéšç§æ€§ä¿æŠ¤ã€‚ç»“åˆä¹‹å‰é¡¹ç›®ä¸Šçš„ä¸€ä¸ªè¯‰æ±‚ï¼ˆç»™ç¬¬ä¸‰æ–¹ä¸šåŠ¡æš´éœ²ç™»é™†æŒ‰é’®ï¼Œä½†ä¸æƒ³è®©ä¸šåŠ¡æ–¹å¾—çŸ¥å®ç°ç»†èŠ‚ï¼Œé¿å…ä¸šåŠ¡æ–¹åå°è°ƒç”¨è¯¥æŒ‰é’®åå°å·å·ç™»é™†ï¼‰æ„Ÿè§‰å¯ä»¥ç”¨è¿™ç§æ–¹å¼å»å®ç°ï¼Œå› æ­¤å»äº†è§£ä¸‹ç»†èŠ‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50a3246520b04957b446dedec0536922~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5aSa5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835611&amp;x-signature=owV9h84ninqTt1Gjs33ljEHLISU%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">å®ç°æ•ˆæœ</h2>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/342a89d800f1480a8b468617d4823ebc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5aSa5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835611&amp;x-signature=wqrFWlcwTi%2FRsV3u80GNSO5%2BbRI%3D" alt="ç­‰.gif" loading="lazy"/></p>
<h2 data-id="heading-2">å®ç°æ–¹å¼ï¼š</h2>
<p>1ã€ä½¿ç”¨<strong>SurfaceControlViewHost + SurfaceView å®ç°</strong></p>
<p><strong>SurfaceViewåŸç†ï¼š</strong> æ ¸å¿ƒæ˜¯æŠŠä¸»è¿›ç¨‹çš„surfaceä¼ é€’ç»™å•ç‹¬çš„æ¸²æŸ“è¿›ç¨‹ï¼Œä»è€Œå®ç°è·¨è¿›ç¨‹æ¸²æŸ“çš„æ•ˆæœ</p>
<p><strong>SurfaceControlViewHostï¼š</strong> å¹¶æä¾›å°†æ¸²æŸ“è¿›ç¨‹çš„viewåµŒå…¥åˆ°ä¸»è¿›ç¨‹ä¸­</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d4ba132b918a4535851d47cfa2415b0d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5aSa5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835611&amp;x-signature=Btw7PslBogzrrjx4g%2BX7jKdgJ2I%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f2fbf0d10344e60aef0adaf72f600c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5aSa5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835611&amp;x-signature=P89LIe7AATJsaCkao8Ol%2FNWFkQ4%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">ä½¿ç”¨æ­¥éª¤</h2>
<p>å®¢æˆ·ç«¯ï¼ˆä¸»è¿›ç¨‹ï¼‰ï¼š</p>
<p>--åˆ›å»ºç”¨äºå±•ç¤ºå†…å®¹çš„ï¼ŒsurfaceViewï¼Œæä¾›host tokenç¡®å®šæ˜¯å…·ä½“å“ªä¸ªsurface Viewï¼Œæä¾›display IDï¼Œç”¨äºæ¸²æŸ“çš„ä¸€äº›åŸºç¡€ä¾èµ–ï¼ˆå­—ä½“å¤§å°ç­‰ï¼‰</p>
<p>--è·å–æœåŠ¡ç«¯è¿”å›çš„SurfacePackageï¼Œä¸surfaceViewç»‘å®š</p>
<p>--äº‹ä»¶é€šçŸ¥ï¼Œæ‰€æœ‰inputäº‹ä»¶ï¼Œé€šçŸ¥æœåŠ¡å™¨</p>
<p>æœåŠ¡ç«¯ï¼ˆæ¸²æŸ“è¿›ç¨‹ï¼‰ï¼š</p>
<p>--ä½¿ç”¨å®¢æˆ·ç«¯æä¾›çš„display IDã€hostToken åˆ›å»ºSurfaceControlViewHostï¼Œåˆ›å»ºè‡ªå®šä¹‰viewï¼Œè¿”å›SurfacePackageç»™å®¢æˆ·ç«¯</p>
<p>--æ¥æ”¶inputäº‹ä»¶ï¼Œä¼ é€’ç»™è‡ªå®šä¹‰view</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c2e3415585a04e6f8ec7a2beb5d35029~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6I-c5bCx5aSa5a2m:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835611&amp;x-signature=R2DUcRKqcMra8sMrksr2e%2B9qrc0%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//aidl</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">IRemoteRender</span> {
    <span class="hljs-comment">//å®¢æˆ·ç«¯æä¾›surfaceã€å¤§å°ã€display ä»æœåŠ¡ç«¯è·å– surfacePackage</span>
    SurfacePackage <span class="hljs-title function_">getSurfacePackage</span><span class="hljs-params">(<span class="hljs-type">int</span> displayId, IBinder hostToken, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span>;
    <span class="hljs-comment">//å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ä¼ é€’ äº‹ä»¶</span>
    <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTouch</span><span class="hljs-params">(in MotionEvent motionEvent)</span>;
}
 
<span class="hljs-comment">//æœåŠ¡ç«¯</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> IRemoteRender.<span class="hljs-type">Stub</span> <span class="hljs-variable">mBinder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IRemoteRender</span>.Stub() {
 
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> SurfaceControlViewHost.SurfacePackage <span class="hljs-title function_">getSurfacePackage</span><span class="hljs-params">(<span class="hljs-type">int</span> displayId, IBinder hostToken, <span class="hljs-type">int</span> width, <span class="hljs-type">int</span> height)</span> {
            Log.i(TAG, <span class="hljs-string">"getSurfacePackage, displayId="</span> + displayId + <span class="hljs-string">", hostToken="</span> + hostToken + <span class="hljs-string">", width="</span> + width + <span class="hljs-string">", height="</span> + height);
            <span class="hljs-keyword">final</span> SurfaceControlViewHost.SurfacePackage[] result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SurfaceControlViewHost</span>.SurfacePackage[<span class="hljs-number">1</span>];
            <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);
            mHandler.post(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    <span class="hljs-comment">// åˆ›å»ºSurfaceControlViewHost</span>
                    <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> getBaseContext();
                    <span class="hljs-type">Display</span> <span class="hljs-variable">display</span> <span class="hljs-operator">=</span> context.getSystemService(DisplayManager.class).getDisplay(displayId);
                    mSurfaceControlViewHost = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SurfaceControlViewHost</span>(context, display, hostToken);
                    createRootView(width,height);
                    <span class="hljs-comment">// å°†è§†å›¾é™„åŠ åˆ°SurfaceControlViewHost</span>
                    mSurfaceControlViewHost.setView(mRootView, width, height);
                    result[<span class="hljs-number">0</span>] = mSurfaceControlViewHost.getSurfacePackage();
                    latch.countDown();
                }
            });
 
            <span class="hljs-keyword">try</span> {
                latch.await(); <span class="hljs-comment">// ç­‰å¾…ä¸»çº¿ç¨‹å®Œæˆæ“ä½œ</span>
                <span class="hljs-keyword">return</span> result[<span class="hljs-number">0</span>];
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Log.i(TAG, <span class="hljs-string">"getSurfacePackage, e="</span> + e.getMessage());
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
 
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTouch</span><span class="hljs-params">(MotionEvent event)</span> <span class="hljs-keyword">throws</span> RemoteException {
            <span class="hljs-keyword">final</span> <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(<span class="hljs-number">1</span>);
            <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span>[] result = {<span class="hljs-literal">true</span>};
            mHandler.post(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Runnable</span>() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">run</span><span class="hljs-params">()</span> {
                    mRootView.dispatchTouchEvent(event);
                    latch.countDown();
                }
            });
            <span class="hljs-keyword">try</span> {
                latch.await(); <span class="hljs-comment">// ç­‰å¾…ä¸»çº¿ç¨‹å®Œæˆæ“ä½œ</span>
                <span class="hljs-keyword">return</span> result[<span class="hljs-number">0</span>];
            } <span class="hljs-keyword">catch</span> (InterruptedException e) {
                Log.i(TAG, <span class="hljs-string">"getSurfacePackage, e="</span> + e.getMessage());
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    };
 
 
<span class="hljs-comment">//å®¢æˆ·ç«¯</span>
      <span class="hljs-keyword">try</span> {
            <span class="hljs-type">IBinder</span> <span class="hljs-variable">hostToken</span> <span class="hljs-operator">=</span> mSurfaceView.getHostToken();
            SurfaceControlViewHost.<span class="hljs-type">SurfacePackage</span> <span class="hljs-variable">surfacePackage</span> <span class="hljs-operator">=</span> mRemoteRender.getSurfacePackage(<span class="hljs-number">0</span>, hostToken, <span class="hljs-number">1000</span>, <span class="hljs-number">2000</span>);
            mSurfaceView.setChildSurfacePackage(surfacePackage);
            mSurfaceView.setOnTouchListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>.OnTouchListener() {
                <span class="hljs-meta">@Override</span>
                <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">onTouch</span><span class="hljs-params">(View view, MotionEvent motionEvent)</span> {
 
                    <span class="hljs-keyword">try</span> {
                        <span class="hljs-keyword">return</span> mRemoteRender.onTouch(motionEvent);
                    } <span class="hljs-keyword">catch</span> (RemoteException e) {
                        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(e);
                    }
                }
            });
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            e.printStackTrace();
        }



</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­—èŠ‚è·³åŠ¨ï¼šApache Doris + AI ä¸€ç«™å¼èåˆæ•°æ®å¼•æ“çš„æ¢ç´¢ä¸å®è·µ]]></title>    <link>https://juejin.cn/post/7577049352838758415</link>    <guid>https://juejin.cn/post/7577049352838758415</guid>    <pubDate>2025-11-27T08:09:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577049352838758415" data-draft-id="7577049352838742031" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­—èŠ‚è·³åŠ¨ï¼šApache Doris + AI ä¸€ç«™å¼èåˆæ•°æ®å¼•æ“çš„æ¢ç´¢ä¸å®è·µ"/> <meta itemprop="keywords" content="æ•°æ®åº“,Apache"/> <meta itemprop="datePublished" content="2025-11-27T08:09:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­—èŠ‚è·³åŠ¨ï¼šApache Doris + AI ä¸€ç«™å¼èåˆæ•°æ®å¼•æ“çš„æ¢ç´¢ä¸å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:09:01.000Z" title="Thu Nov 27 2025 08:09:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éšç€äººå·¥æ™ºèƒ½æŠ€æœ¯åœ¨ä¸šåŠ¡ä¸­çš„æ¸—é€ï¼Œæˆ‘ä»¬é€æ¸æ„è¯†åˆ°ï¼šAI ä¸ä»…æ˜¯æå‡æ•ˆç‡çš„å·¥å…·ï¼Œæ›´æ˜¯é‡æ„æ•°æ®å¤„ç†ä¸æ¶ˆè´¹æ–¹å¼çš„æ ¸å¿ƒé©±åŠ¨åŠ›ã€‚åœ¨è¿™ä¸€èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬æ€è€ƒï¼š<strong>èƒ½å¦æ„å»ºä¸€æ¬¾ã€ŒAI + Dataã€ä¸€ç«™å¼èåˆçš„æ•°æ®å¼•æ“ï¼Ÿ</strong> å®ƒä¸ä»…èƒ½å¤Ÿç»Ÿä¸€å¤„ç†æ–‡æœ¬ã€éŸ³è§†é¢‘ç­‰éç»“æ„åŒ–æ•°æ®ä¸ä¼ ç»Ÿç»“æ„åŒ–æ•°æ®ï¼Œè¿˜èƒ½ä¸ºç®—æ³•å·¥ç¨‹å¸ˆæä¾›æµç•…çš„æ•°æ®å¼€å‘ä½“éªŒï¼Œå®ç°æ•°æ®å¤„ç†ä¸ AI æ¨¡å‹æ— ç¼è¡”æ¥ï¼Œå¹¶èƒ½ç¡®ä¿æ•°æ®å¤„ç†è´Ÿè½½ä¸åœ¨çº¿æœåŠ¡è´Ÿè½½å®Œå…¨éš”ç¦»ã€‚è¿™æ˜¯ 2024 å¹´æœ«å¯åŠ¨ DataMind é¡¹ç›®çš„åˆè¡·ã€‚</p>
<p><em>æœ¬æ–‡æ•´ç†è‡ªå­—èŠ‚è·³åŠ¨ DataMind è´Ÿè´£äººéƒ­æ³½æ™–åœ¨ Doris Summit 2025 ä¸­çš„æ¼”è®²å†…å®¹ï¼Œå¹¶ä»¥æ¼”è®²è€…ç¬¬ä¸€è§†è§’è¿›è¡Œå™è¿°ã€‚</em></p>
<h2 data-id="heading-0">ä¸€ã€DataMindï¼šDoris + AI ä¸€ç«™å¼èåˆæ•°æ®å¼•æ“</h2>
<p>åœ¨é¡¹ç›®å¯åŠ¨å‰ï¼Œæˆ‘ä»¬è¯„ä¼°äº†å¤šç§å¸‚é¢ä¸Šçš„å¼€æºæ–¹æ¡ˆï¼Œä½†æœªèƒ½æ‰¾åˆ°å®Œå…¨ç¬¦åˆ AI + Data å¼•æ“éœ€æ±‚çš„äº§å“ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†³å®šé€‰æ‹©ä¸€æ¬¾ä¼˜ç§€çš„ OLAP æ•°æ®åº“ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šèåˆå’Œå¢å¼º AI åŠŸèƒ½ã€‚Apache Doris å‡­å€Ÿå®Œå–„çš„åŠŸèƒ½ã€å“è¶Šçš„ OLAP æ€§èƒ½ã€ä¸°å¯Œçš„ç”Ÿæ€ä½“ç³»ã€æ´»è·ƒçš„ç¤¾åŒºæ°›å›´åŠè‰¯å¥½çš„äº§å“å£ç¢‘å¸å¼•äº†æˆ‘ä»¬çš„æ³¨æ„ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œ<strong>æˆ‘ä»¬äº†è§£åˆ°ç¤¾åŒºä¹Ÿåœ¨ç§¯ææ¢ç´¢ Doris ä¸ AI èƒ½åŠ›çš„ç»“åˆï¼Œå› æ­¤å†³å®šåœ¨ Apache Doris åŸºç¡€ä¸ŠäºŒæ¬¡å¼€å‘ï¼Œæ‰“é€ ä¸€ç«™å¼å¼•æ“â€”â€”DataMind</strong>ã€‚è¿™äº›èƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li>Hybrid Searchï¼šå°†åŸºäºæ–‡æœ¬ç›¸ä¼¼æ€§ã€è¯­ä¹‰ç›¸ä¼¼æ€§ã€ä¸šåŠ¡è§„åˆ™åŒ¹é…è¿™ä¸‰ç§èƒ½åŠ›é›†æˆè‡³ Doris ä¸­ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè¡¥é½äº†å‘é‡æ£€ç´¢åŠ Tablet-level BM25 èƒ½åŠ›ã€‚(<em>è¯¦è§ç« èŠ‚äºŒ</em>ï¼‰ã€‚</li>
<li>AI  Functionï¼šåŸºäº Doris è¡¥é½äº† AI_QUERY å’Œ TEXT_EMBEDDING ï¼Œå¹¶æ”¯æŒäº† Python UDFã€‚(<em>è¯¦è§ç« èŠ‚ä¸‰ï¼‰</em></li>
<li>GraphRAG ï¼šåœ¨åŸºäº Doris çš„ DataMind äº§å“ä¸Šæ„å»ºäº† GraphRAGï¼Œåº”ç”¨å±‚ç ”å‘å›¢é˜Ÿèƒ½å¤Ÿæ›´ä¾¿æ·åœ°æ¥å…¥æ–°çš„ AI èƒ½åŠ›ï¼Œç¼©çŸ­ç ”å‘å‘¨æœŸã€‚(<em>è¯¦è§ç« èŠ‚å››</em>ï¼‰</li>
</ul>
<blockquote>
<p><em>ç›®å‰ï¼Œæˆ‘ä»¬å·²å°†éƒ¨åˆ† AI èåˆçš„å®è·µæˆæœè´¡çŒ®ç»™å¼€æºç¤¾åŒºï¼Œå¤§å®¶å¯ä» <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.selectdb.com%2Fblog%2F1518" target="_blank" title="https://www.selectdb.com/blog/1518" ref="nofollow noopener noreferrer">Doris 4.0 ç‰ˆæœ¬</a></strong> ä¸­å…³æ³¨ã€‚</em></p>
</blockquote>
<p>è¿™äº›èƒ½åŠ›ä¸ä»…æ˜¯ Datamind çš„é‡è¦ç»„æˆï¼Œä¹Ÿæ˜¯æ„å»ºä¼ä¸šçº§ AI é—®æ•°å¹³å°å¥ å®šäº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚åæ–‡å°†é€ä¸€å±•å¼€å…¶è®¾è®¡æ€è·¯ã€å®ç°è·¯å¾„ä¸ä¼˜åŒ–å®è·µã€‚</p>
<h2 data-id="heading-1">äºŒã€Hybrid Search èƒ½åŠ›é›†æˆ</h2>
<p>AI åœºæ™¯ä¸‹å…¸å‹çš„æ··åˆæœç´¢çš„æ¶æ„å¯ä»¥æ¦‚æ‹¬ä¸ºä¸‰ç§æœç´¢æ–¹å¼ï¼šåŸºäº<strong>æ–‡æœ¬ç›¸ä¼¼æ€§ã€è¯­ä¹‰ç›¸ä¼¼æ€§ã€ä¸šåŠ¡è§„åˆ™</strong>çš„åŒ¹é…ã€‚è¿™ä¸‰è·¯çš„æœç´¢ç»“æœä¼šåœ¨åç«¯ç»Ÿä¸€æ’åºï¼Œæ’åºæ–¹æ³•ä¾èµ–è‡ªè®­ç»ƒçš„æ¨¡å‹ï¼Œåˆ†ä¸ºç²—æ’å’Œç²¾æ’ä¸¤ä¸ªé˜¶æ®µã€‚ç²—æ’æ¨¡å‹å¯æé«˜å¤„ç†æ€§èƒ½ï¼Œç²¾æ’æ¨¡å‹å®ç°æ›´ä¼˜çš„é‡æ’åºæ•ˆæœï¼Œå¹³è¡¡æ•´ä½“å¼€é”€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89e1235af247410fb830ea85de741d06~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=X4ZgM3jmIBI4pU0t57etnTM2u%2Bk%3D" alt="äºŒã€Hybrid Search èƒ½åŠ›é›†æˆ.PNG" loading="lazy"/></p>
<p>æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸‰ç±»æœç´¢èƒ½åŠ›é›†æˆè‡³åŸºäº Doris çš„ DataMind å¼•æ“ä¹‹ä¸­ï¼Œè®©ç”¨æˆ·åªéœ€å¯¼å…¥ä¸€ä»½æ•°æ®ï¼Œå¹¶åœ¨å®Œæˆå¿…è¦çš„å¤„ç†åŠç´¢å¼•æ„å»ºåï¼Œå³å¯ç›´æ¥ä¸Šçº¿æœåŠ¡ï¼Œæ— éœ€ä»‹å…¥å…¶ä»–ä¸‰æ–¹å·¥å…·ã€‚ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼Œå›¢é˜ŸåŸºäº Doris è¡¥å……äº†å‘é‡ç´¢å¼•å’Œ BM25 æ‰“åˆ†å‡½æ•°è¿™ä¸¤é¡¹æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<h3 data-id="heading-2">2.1 å‘é‡ç´¢å¼•</h3>
<p>æˆ‘ä»¬åŸºäº Faiss ï¼ˆFacebook å¼€æºçš„ AI ç›¸ä¼¼æ€§æœç´¢å·¥å…·ï¼‰å®ç°äº† <strong>HNSW ä¸ IVF_PQ ä¸¤ç§ ANN ç®—æ³•çš„å‘é‡ç´¢å¼•</strong>ã€‚HNSW åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šæ€§èƒ½è¡¨ç°æ›´ä¼˜ï¼Œä½†èµ„æºå¼€é”€è¾ƒå¤§ï¼› IVF_PQ åœ¨å¤§è§„æ¨¡æ•°æ®é›†ä¸Šï¼Œæˆæœ¬ä¸æ€§èƒ½è¡¨ç°æ›´åŠ å‡è¡¡ã€‚</p>
<p>å‘é‡ç´¢å¼•æ”¯æŒä¸å…¶ä»–ç´¢å¼•æ¡ä»¶ç»„åˆä½¿ç”¨ã€‚æ¯”å¦‚ï¼Œå¯å°†å€’æ’ç´¢å¼•çš„ç»“æœé€šè¿‡ Faiss æä¾› IDSelector æ¥å£ä¼ é€’åˆ°åº•å±‚ ANN ç®—æ³•å®ç°ä¸Šä»¥æ§åˆ¶æœç´¢è¿‡ç¨‹ã€‚åŸºæœ¬åŸç†æ˜¯ï¼šå€’æ’ç´¢å¼•é¦–å…ˆæ£€ç´¢åŒ¹é…è¡Œå·çš„ Bitmapï¼Œè¿™ä¸€ Bitmap è¢«ä¼ é€’ç»™ Faiss åº“ã€‚å½“è¿›è¡Œå‘é‡æœç´¢æ—¶ï¼ŒFaiss ä¼šå°†æœç´¢èŒƒå›´é™åˆ¶ï¼Œæœ€ç»ˆè¾“å‡º TopN è¡Œå·ç»“æœï¼Œä»£è¡¨èåˆåçš„ç»“æœé›†ã€‚å½“å€’æ’ç´¢å¼•åœ¨ç¬¬ä¸€é˜¶æ®µç­›é€‰å‡ºçš„æ•°æ®é‡è¾ƒå°‘æ—¶ï¼Œä¼šè·³è¿‡å‘é‡ç´¢å¼•è¿›è¡Œæš´åŠ›è®¡ç®—ï¼Œè¿™æ ·è€—æ—¶æ›´çŸ­ã€æ—¶é—´æ›´ç²¾å‡†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51e3afe07d1f4f98863742f7e9bd5692~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=nuUbO4lVqq%2FdBEaXAjtUiltgzoI%3D" alt="2.1 å‘é‡ç´¢å¼•.PNG" loading="lazy"/></p>
<h3 data-id="heading-3">2.2 Tablet-level BM25</h3>
<p>BM25 æ˜¯ä¸€ç§ç”¨äºä¿¡æ¯æ£€ç´¢çš„æ’åå‡½æ•°ï¼Œç”¨äºè¡¡é‡æŸ¥è¯¢ä¸æ–‡æ¡£çš„ç›¸å…³æ€§ã€‚å®ƒåŸºäºè¯é¢‘ï¼ˆtï¼‰å’Œæ–‡æ¡£é•¿åº¦è¿›è¡ŒåŠ æƒè®¡ç®—ï¼ŒåŒæ—¶è€ƒè™‘é€†æ–‡æ¡£é¢‘ç‡ï¼ˆIDFï¼‰ä»¥æƒ©ç½šå¸¸è§è¯ã€‚åœ¨æ•´ä¸ªå…¬å¼ä¸­ï¼Œéœ€é‡ç‚¹å…³æ³¨æ€»æ–‡æ¡£æ•° N å’Œæ–‡æ¡£é¢‘ç‡ DF ç­‰å…¨å±€ç»Ÿè®¡ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ç›´æ¥å½±å“å®ç°çš„éš¾åº¦ã€‚ï¼ˆ<em>æ›´å¤šä¿¡æ¯å¯è‡ªè¡Œæœç´¢æŸ¥é˜…</em>ï¼‰</p>
<p>åœ¨ Doris çš„è®¾è®¡ä¸­ï¼Œä¸€ä¸ª segment å¯¹åº”ä¸€ä¸ªå€’æ’ç´¢å¼•çš„è§£å†³æ–¹æ¡ˆï¼Œå› æ­¤åœ¨ segment çº§åˆ«å®æ–½ BM25 è¾ƒä¸ºç®€å•ï¼Œç³»ç»Ÿå¯ä»¥åŸºäºæ¯ä¸ª segment çš„ç»Ÿè®¡ä¿¡æ¯ï¼ˆå¦‚æ€»æ–‡æ¡£æ•° N å’Œæ–‡æ¡£é¢‘ç‡ DFï¼‰è®¡ç®—æ¯ä¸€è¡Œçš„å¾—åˆ†ã€‚ç„¶è€Œï¼Œåˆå¹¶å° segment å¯èƒ½å¯¼è‡´ç»Ÿè®¡ä¿¡æ¯å˜åŒ–ï¼Œä»è€Œå½±å“ BM25 å¾—åˆ†ï¼Œé€ æˆç”¨æˆ·è¯„åˆ†æ³¢åŠ¨ï¼Œè¿™åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¸å¯æ¥å—ã€‚</p>
<p><strong>ä¸ºäº†é¿å…æ­¤é—®é¢˜ï¼Œå›¢é˜Ÿå°† BM25 å…¬å¼æå‡è‡³ tablet çº§ï¼ˆtablet-levelï¼‰ã€‚æ‰€æœ‰å…¨å±€ç»Ÿè®¡ä¿¡æ¯ï¼ˆåŒ…æ‹¬ N å’Œ DFï¼‰éœ€åŸºäºæ•´ä¸ª tablet èšåˆï¼Œä»¥ä¿æŒå¾—åˆ†ç»“æœçš„ä¸€è‡´æ€§</strong>ã€‚</p>
<p>ä»¥ Merge on Write / Merge on Write ä¸ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba25609b4ffe480491cce8b1a02fd0b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=vPRZ9ImQQcXhkcRdzMJWxtnKcUw%3D" alt="2.2 Tablet-level BM25.png" loading="lazy"/></p>
<ol>
<li><strong>åœ¨ Scan ç®—å­åˆå§‹åŒ–é˜¶æ®µ</strong>ï¼šç³»ç»Ÿä¼šé¢„å…ˆæœç´¢ç”¨äº BM25 è®¡ç®—çš„ tablet çº§ ç»Ÿè®¡ä¿¡æ¯ã€‚æ¯ä¸ª segment ä¼šè¢«ä¾æ¬¡æ‰«æï¼Œå¹¶ä»¥æµå¼æ–¹å¼è¾“å‡ºæ•°æ®å—ã€‚</li>
<li><strong>æ•°æ®æ”¶é›†é˜¶æ®µ</strong>ï¼šåœ¨å¤„ç†æ¯ä¸ª segment ä¹‹å‰ï¼Œéœ€è®¡ç®—å®Œæ•´çš„ tablet çº§ç»Ÿè®¡ä¿¡æ¯ã€‚Scan ç®—å­åˆå§‹åŒ–æ—¶ï¼Œç³»ç»Ÿä½¿ç”¨ç›¸åº”æœç´¢æ¡ä»¶è®¿é—®æ¯ä¸ª segment çš„è§£å†³æ–¹æ¡ˆã€‚æ­¤è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ–‡ä»¶æ“ä½œã€æ•°æ®è¯»å–å’Œå†…å­˜å‘½ä¸­ç­‰ç»“æœæ„æˆæœç´¢ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚åŒæ—¶ï¼Œä¸æœç´¢ç›¸å…³çš„å¯¹è±¡ä¼šè¢«ç¼“å­˜ï¼Œä»¥é¿å…é‡å¤äº§ç”Ÿ IO å¼€é”€ã€‚</li>
<li><strong>ç´¢å¼•æŸ¥æ‰¾åŠæ•°æ®è¯»å–</strong>ï¼šå½“æ­£å¼è¿›å…¥æŸä¸ªç´¢å¼•åï¼Œç´¢å¼•æœç´¢å°†åŸºäºæ­¤å‰æ”¶é›†çš„ tablet çº§ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸ºå‘½ä¸­çš„æ¯ä¸€è¡Œè®¡ç®—åˆ†æ•°ã€‚æœ€ç»ˆï¼Œè®¡ç®—æ‰€å¾—çš„åˆ†æ•°é€šè¿‡è™šæ‹Ÿåˆ—çš„è¿­ä»£å™¨è¿”å›åˆ° segmentï¼Œéšæ•°æ®å—è¾“å‡ºã€‚</li>
</ol>
<h3 data-id="heading-4">2.3 æœç´¢æ¡†æ¶ä¼˜åŒ–</h3>
<p>åœ¨è¡¥å……äº†å‘é‡ç´¢å¼•å’Œ BM25 èƒ½åŠ›åï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªæ–°é—®é¢˜ï¼šåœ¨æ··åˆæœç´¢æ¡†æ¶ä¸­ï¼Œæ¶‰åŠçš„å‡½æ•°å¹¶éä¼ ç»Ÿæ„ä¹‰ä¸Šåœ¨è®¡ç®—å±‚åŸºäºè¾“å…¥ç›´æ¥è¿›è¡Œæ±‚å€¼ï¼Œè€Œæ˜¯å¿…é¡»åœ¨ç´¢å¼•æ£€ç´¢çš„è¿‡ç¨‹ä¸­è®¡ç®—å‡ºç»“æœï¼Œå› æ­¤éœ€è¦è®¾è®¡ä¸€å¥—ç‰¹æ®Šçš„æŠ•å½±ä¸‹æ¨æµç¨‹ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c4b3be839c643819beabf2fbc86f18c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=AWbapogl%2F3sDgq4dCDkUDG1d3w4%3D" alt="2.3 æœç´¢æ¡†æ¶ä¼˜åŒ–.png" loading="lazy"/></p>
<p>åœ¨æ‰§è¡Œè®¡åˆ’å±‚ï¼Œæˆ‘ä»¬å°†ç›¸å…³å‡½æ•°æ›¿æ¢ä¸ºè™šæ‹Ÿåˆ—ï¼Œå¹¶å°†è¿™äº›è™šæ‹Ÿåˆ—ä¸‹æ¨è‡³ OlapScanNodeã€‚OlapScanNode æºå¸¦è™šæ‹Ÿåˆ—çš„ä¿¡æ¯ï¼Œå°†å…¶ä¼ é€’åˆ°æ¥è¿‘ç´¢å¼•è®¡ç®—ä¸æŸ¥è¯¢å—å­˜å‚¨é€»è¾‘çš„æ‰§è¡Œè·¯å¾„ä¸­ã€‚</p>
<p>åœ¨ç´¢å¼•è®¡ç®—è¿‡ç¨‹ä¸­ï¼Œç³»ç»ŸåŸºäºè¿™äº›è™šæ‹Ÿåˆ—è®¡ç®—å‘é‡è·ç¦»åˆ†æ•°å’Œ BM25 ç›¸ä¼¼æ€§åˆ†æ•°ï¼Œå¹¶å°†ç»“æœå¡«å……å›å¯¹åº”çš„ blockã€‚æœ€ç»ˆï¼Œå¸¦æœ‰è™šæ‹Ÿåˆ—è®¡ç®—ç»“æœçš„ block ç”± Scan ç®—å­è¾“å‡ºï¼Œå¹¶ä¼ é€’è‡³ä¸‹æ¸¸ç®—å­ï¼Œä»¥è‡ªç„¶è¡”æ¥çš„æ‰§è¡Œè®¡åˆ’å®Œæˆæ•´ä¸ªæ£€ç´¢æµç¨‹ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€AI Function  è¡¥é½</h2>
<p>åœ¨ AI Function ä¸Šï¼Œä¸»è¦åŸºäº Doris è¡¥é½äº† AI_QUERY å’Œ TEXT_EMBEDDING ä¸¤ç§å‡½æ•°ã€‚</p>
<h3 data-id="heading-6">3.1 AI_QUERY</h3>
<p>è¯¥å‡½æ•°ç”¨äºè°ƒç”¨å¤§æ¨¡å‹å¹¶èƒ½è¾ƒå¥½åœ°å¤„ç†éç»“æ„åŒ–æ–‡æœ¬è¿™ç±»æ•°æ®ï¼Œ<strong>å°†å…¶è½¬åŒ–ä¸ºç»“æ„åŒ–æ•°æ®ï¼Œå†è¿›è¡Œä¼ ç»Ÿåˆ†æ</strong>ã€‚ä¾‹å¦‚ï¼Œå¯¹äºä¸€å¼ å®¢æˆ·è¯„ä»·è¡¨ï¼Œå¯ä»¥è®©å¤§æ¨¡å‹ä¸ºæ¯æ¡è¯„ä»·æ‰“åˆ†å¹¶åˆ†ç±»ï¼Œå¦‚å¥½è¯„è¾“å‡º 1ã€å·®è¯„è¾“å‡º 0ï¼Œé€šè¿‡ç»Ÿè®¡å³å¯å¾—å‡ºå¥½è¯„ä¸å·®è¯„çš„å¤§è‡´æ•°é‡ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">WITH</span> reviews <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> 
 AI_QUERY(<span class="hljs-string">'volcengine/Doubao-pro-128k-240628'</span>, concat(<span class="hljs-string">'åˆ¤æ–­è¿™æ¡äº§å“è¯„ä»·æ˜¯å¥½è¯„è¿˜æ˜¯å·®è¯„ï¼Œå¥½è¯„è¾“å‡º1ï¼Œå·®è¯„è¾“å‡º0ï¼š'</span>,  review_txt)) <span class="hljs-keyword">AS</span> review_type
<span class="hljs-keyword">FROM</span> customer_reviews
) <span class="hljs-keyword">SELECT</span> review_type, <span class="hljs-built_in">count</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">AS</span> cnt
<span class="hljs-keyword">FROM</span> reviews
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> review_type
</code></pre>
<h3 data-id="heading-7">3.2 TEXT_EMBEDDING</h3>
<p>è¯¥å‡½æ•°ä¸»è¦æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>æ•°æ®æ¸…æ´—é˜¶æ®µï¼šåœ¨ AI æ¸…æ´—è¿‡ç¨‹ä¸­ç”Ÿæˆå¯¹åº”å‘é‡å¹¶æ„å»ºå‘é‡ç´¢å¼•ã€‚</li>
<li>æ•°æ®æŸ¥è¯¢é˜¶æ®µï¼šæ­¤é˜¶æ®µæä¾›ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚ç¬¬ä¸€ç§æ˜¯ç”±ç”¨æˆ·çš„åº”ç”¨å±‚ä»£ç è‡ªè¡Œç”ŸæˆæŸ¥è¯¢å‘é‡ï¼Œå¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ SQL è¿›è¡Œæœç´¢ï¼Œè¯¥æ–¹å¼éœ€ä¼ å…¥è¾ƒé•¿çš„å‘é‡ float æ•°ç»„ï¼Œä¼šå¢åŠ ä¼˜åŒ–å™¨çš„è§£æå¼€é”€ã€‚ç¬¬äºŒç§æ–¹å¼æ˜¯<strong>ç›´æ¥è°ƒç”¨ TEXT_EMBEDDING å‡½æ•°</strong>ï¼Œå°†æŸ¥è¯¢æ–‡æœ¬ä¼ å…¥å¹¶æ‰§è¡Œæœç´¢ï¼Œè¿™ç§æ–¹æ³•æ›´ä¸ºä¾¿æ·ï¼Œä¸”æ€§èƒ½æ›´ä½³ã€‚</li>
</ul>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span> 
    content, 
    APPROX_COSINE_SIMILARITY(
        TEXT_EMBEDDING(<span class="hljs-string">'volcengine/Doubao-embedding-240715'</span>, <span class="hljs-string">'Doris Summit'</span>), 
        content_vec_col) <span class="hljs-keyword">AS</span> score
<span class="hljs-keyword">FROM</span> my_table 
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score
LIMIT <span class="hljs-number">7</span>;
</code></pre>
<h3 data-id="heading-8">3.3 Python UDF çš„å®ç°</h3>
<p>é™¤ä¸Šè¿°æ ‡å‡†å‡½æ•°å¤–ï¼Œ<strong>æˆ‘ä»¬åŸºäº Doris æ”¯æŒäº† Python UDFï¼Œä»¥æ»¡è¶³è‡ªéƒ¨ç½²æ¨¡å‹çš„éœ€æ±‚</strong>ï¼ŒåŒ…æ‹¬ Rerank æ¨¡å‹ã€Embedding æ¨¡å‹ã€ç”šè‡³å¤§æ¨¡å‹çš„è®¿é—®éœ€æ±‚ï¼Œä»¥åŠä¾èµ– Python åº“è¿›è¡Œéç»“æ„åŒ–æ•°æ®å¤„ç†çš„éœ€æ±‚åœºæ™¯ã€‚</p>
<p>Python UDF çš„æ ¸å¿ƒè®¾è®¡ä¸»è¦åŒ…å«å‡ ä¸ªå…³é”®ç‚¹ï¼š</p>
<ol>
<li><strong>å¤šè¿›ç¨‹æ¶æ„</strong>ï¼šæ—¨åœ¨è§£å†³ UDF ä¹‹é—´çš„éš”ç¦»é—®é¢˜ï¼Œé¿å… Python çš„å…¨å±€è§£é‡Šå™¨é”ï¼ˆGILï¼‰ã€‚æ¯ä¸ª Python UDF èƒ½é€šè¿‡è™šæ‹Ÿç¯å¢ƒï¼ˆvenvï¼‰å®ç°ä¾èµ–éš”ç¦»ã€‚</li>
<li><strong>ç”Ÿå‘½å‘¨æœŸç»‘å®š</strong>ï¼šæ‰§è¡Œ Python çš„å­è¿›ç¨‹ä¸ Doris çš„ pipeline task ç”Ÿå‘½å‘¨æœŸç»‘å®šã€‚å½“ä¸€ä¸ª pipeline task ç”Ÿæˆæ—¶ï¼Œç›¸åº”çš„å­è¿›ç¨‹ä¹Ÿä¼šè¢«åˆ›å»ºï¼Œå¹¶åœ¨ä»»åŠ¡ç»“æŸæ—¶è¿›è¡Œæ¸…ç†ã€‚è¿™ç§è®¾è®¡ä½¿å¾—å¹¶å‘æ¨¡å‹ä¸ Doris çš„è®¡ç®—å¼•æ“å¯†åˆ‡ç»“åˆï¼Œç”¨æˆ·åªéœ€è°ƒæ•´ Doris çš„å¹¶å‘å‚æ•°å³å¯ç®¡ç† Python UDF çš„æ‰§è¡Œå¹¶å‘ï¼Œç®€åŒ–äº†ç»´æŠ¤å·¥ä½œã€‚</li>
<li><strong>æ•°æ®ä¼ è¾“å’Œåºåˆ—åŒ–</strong>ï¼šä¸»è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€šè¿‡ç®¡é“è¿›è¡Œã€‚æ”¯æŒ Python åŸç”Ÿå¯¹è±¡è¾“å…¥è¾“å‡ºçš„ç‰ˆæœ¬é‡‡ç”¨ Python çš„ Marshal æœºåˆ¶è¿›è¡Œåºåˆ—åŒ–ã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6244bc643a4146d99cc95c21a40e04f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=C7aNVDYAc18be2hvHZG2Q75wFW4%3D" alt="3.3 Python UDF çš„å®ç°.png" loading="lazy"/></p>
<p>å¦‚ä¸‹æ–¹ä»£ç ç¤ºä¾‹ï¼Œ<strong>ç¤ºä¾‹ä¸­å±•ç¤ºäº†æ··åˆæœç´¢ï¼ˆå‘é‡+å…¨æ–‡æ£€ç´¢ï¼‰çš„åº”ç”¨</strong>ï¼Œä¸¤ä¸ªæ£€ç´¢é€šè¿‡ç”¨æˆ·è‡ªç ”çš„ Python UDF æ¨¡å‹è¿›è¡Œé‡æ’åºï¼Œæœ€ç»ˆä½¿ç”¨ Hybrid Search è¿›è¡Œæ•°æ®æ‘„å–ã€‚åœ¨ AI Function å’Œ Python UDF çš„åŠ æŒä¸‹ï¼Œç”¨æˆ·åªéœ€é€šè¿‡ä¸€æ¡ç®€å•çš„ SQL è¯­å¥å³å¯ä¸²è”æ•´ä¸ªä¸šåŠ¡æœç´¢æµç¨‹åŠæ•°æ®å¤„ç†æµç¨‹ï¼Œä½¿ç”¨ååˆ†ä¾¿æ·ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">FUNCTION</span> predict_class(<span class="hljs-keyword">ARRAY</span><span class="hljs-operator">&lt;</span><span class="hljs-type">FLOAT</span><span class="hljs-operator">&gt;</span>) <span class="hljs-keyword">RETURNS</span> <span class="hljs-type">INT</span> 
PROPERTIES ( 
    "file"<span class="hljs-operator">=</span>"https://cloud-storage/obj/datamind/pyudf.zip", 
    "symbol"<span class="hljs-operator">=</span>"predict_class", 
    "type"<span class="hljs-operator">=</span>"PYTHON_UDF" 
);
<span class="hljs-keyword">WITH</span> channel_1 <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> 
        content
    <span class="hljs-keyword">FROM</span> my_table 
    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 
        APPROX_COSINE_SIMILARITY(py_udf_embed(<span class="hljs-string">'Doris Summit'</span>), content_vec_col) <span class="hljs-keyword">DESC</span>
    LIMIT <span class="hljs-number">7</span>
), 
channel_2 <span class="hljs-keyword">AS</span> (
    <span class="hljs-keyword">SELECT</span> 
        content
    <span class="hljs-keyword">FROM</span> my_table
    <span class="hljs-keyword">WHERE</span> MATCH_ANY(content, <span class="hljs-string">'Doris Summit'</span>)
    <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> 
         BM25() <span class="hljs-keyword">DESC</span>
    LIMIT <span class="hljs-number">7</span>
)
<span class="hljs-keyword">SELECT</span> 
    content
<span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> content <span class="hljs-keyword">FROM</span> channel_1
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    <span class="hljs-keyword">SELECT</span> content <span class="hljs-keyword">FROM</span> channel_2
) t
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> py_udf_score(<span class="hljs-string">'Doris Summit'</span>, content) <span class="hljs-keyword">DESC</span>
LIMIT <span class="hljs-number">7</span>;
</code></pre>
<h2 data-id="heading-9">å››ã€GraphRAG on DataMind</h2>
<h3 data-id="heading-10">4.1 GraphRAG</h3>
<p>GraphRAG æ˜¯ä¸€ç§ç»“åˆå›¾æ•°æ®åº“ä¸ RAGï¼ˆRetrieval-Augmented Generationï¼‰æŠ€æœ¯ã€‚æ¨åŠ¨ DataMind é›†æˆ GraphRAG åŠŸèƒ½çš„åŸå› æ˜¯ï¼Œæˆ‘ä»¬åœ¨æ¨å¹¿ AI åŠŸèƒ½æ—¶å‘ç°å¤šä¸ªä¸šåŠ¡å›¢é˜Ÿå¯¹æ­¤æœ‰éœ€æ±‚ã€‚ä¸æ ‡å‡† RAG ç›¸æ¯”ï¼ŒGraphRAG çš„å®ç°è¿‡ç¨‹æ›´ä¸ºå¤æ‚ï¼Œéœ€è¦åœ¨åŸºç¡€ AI èƒ½åŠ›ä¸Šè¿›ä¸€æ­¥æ„å»ºã€‚</p>
<p><strong>æ„å»ºé˜¶æ®µ</strong>ï¼šè¯¥é˜¶æ®µçš„è¾“å…¥ä¸ºæ–‡æ¡£æˆ–åˆ†å‰²æˆçš„ç‰‡æ®µï¼ˆchunkï¼‰ã€‚åˆ©ç”¨å¤§æ¨¡å‹ï¼ˆAI Functionï¼‰è¿›è¡Œå®ä½“æŠ½å–â€”â€”ä»æ–‡æ¡£ä¸­æå–å‡ºå…³é”®ä¿¡æ¯ï¼Œå®ä½“ä¹‹é—´çš„å…³ç³»å¯ä»¥çœ‹ä½œæ˜¯å›¾ä¸­çš„è¾¹ï¼Œæ¯æ¡è¾¹å…·æœ‰ä¸€å®šçš„æƒé‡ï¼Œè¿™äº›æƒé‡ç”±å¤§æ¨¡å‹è‡ªåŠ¨è¯†åˆ«ï¼Œæå–çš„å®ä½“åŠå…¶æè¿°ç»è¿‡å‘é‡åŒ–åå­˜å‚¨ï¼Œä»¥æ„å»ºç´¢å¼•ã€‚</p>
<p>æ­¤å¤–ï¼Œå›¾ç»“æ„å’Œè¾¹çš„æè¿°ä¹Ÿä¼šå­˜å‚¨åœ¨ä¸€å¼ è¡¨ä¸­ã€‚åŸºäºè¯¥å›¾ï¼Œç³»ç»Ÿåˆ©ç”¨ Search å‘ç°ç®—æ³•ï¼ˆå¦‚ Lightingï¼‰è¿›è¡Œèšç±»ï¼Œå°†ç›¸ä¼¼çš„å®ä½“å½’ç±»ä¸ºä¸€ä¸ª Searchï¼Œå¹¶ç”Ÿæˆ Search æŠ¥å‘Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/09fcfbb2bf734cd1ad31663f37bbd5da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=2iLA29kVgA7QEKKukaxdXoRnGeU%3D" alt="4.1 GraphRAG.png" loading="lazy"/></p>
<p><strong>æŸ¥è¯¢é˜¶æ®µ</strong>ï¼šåœ¨æ£€ç´¢è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆå°† Query è½¬æ¢ä¸ºå‘é‡ï¼Œè¯¥å‘é‡ç”¨äº Search å®ä½“ï¼Œä»¥æ‰¾åˆ°ä¸ä¹‹ç›¸å…³çš„ Top-K å®ä½“ã€‚å¾—åˆ° TopK å®ä½“åï¼Œç³»ç»Ÿå°†å¬å›å®ƒä»¬ç›¸å…³çš„è¾¹ï¼Œè¿™äº›è¾¹åŒ…å«ä¸å®ä½“ç›¸å…³çš„æè¿°å’Œä¿¡æ¯ï¼Œä»¥åŠè¿™äº›å®ä½“å…³è”çš„æŠ¥å‘Šå’ŒåŸå§‹æ–‡æ¡£çš„ç‰‡æ®µã€‚åœ¨æœ‰é™çš„ä¸Šä¸‹æ–‡å†…ï¼Œç³»ç»Ÿä¼šæŒ‰ä¼˜å…ˆçº§æ‹¼æ¥ç›¸å…³å†…å®¹ï¼Œå½¢æˆæœ€ç»ˆä¸Šä¸‹æ–‡ï¼Œéšåå°†å…¶è¾“å…¥ AI ä»¥ç”Ÿæˆå›ç­”ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/17e123b45e604420958fccf888b5e47f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=NBsV%2FNSvJcEHqVnj3G8YE28AazY%3D" alt="4.1 GraphRAG-1.png" loading="lazy"/></p>
<h3 data-id="heading-11">4.2 GraphRAG on DataMind</h3>
<p>åŸºäº Apache Doris çš„ DataMind äº§å“ä¸Šå¦‚ä½•æ„å»º GraphRAG å‘¢ï¼Ÿæ•´ä½“è®¾è®¡åˆ†ä¸ºå¤šå±‚ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6a6905aa83840e2841c95e32569339b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=TzXNy7U%2BeetM%2FNX3wy1feBDQzh0%3D" alt="4.2 GraphRAG on DataMind.png" loading="lazy"/></p>
<p>æœ€åº•å±‚æ˜¯è¡¨ç»“æ„çš„è®¾è®¡ï¼ŒåŒ…æ‹¬å®ä½“è¡¨ã€Search è¡¨ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰çš„æºæ•°æ®è¡¨ç­‰ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œé€šè¿‡ä¸€ç³»åˆ—å‡½æ•°ï¼ŒåŒ…å«ç”¨äºæ–‡æ¡£åˆ‡åˆ†çš„å‡½æ•°ã€Leiden èšåˆå‡½æ•°ç­‰ç­‰ï¼Œæœ€åç»“åˆ ETL SQLã€Query SQL ç­‰ï¼Œå…±åŒå®ç° GraphRAG çš„æ„å»ºä¸æŸ¥è¯¢æµç¨‹ã€‚</p>
<p>ç”±äºåº•å±‚ SQL ç›¸å¯¹å¤æ‚ï¼Œå›¢é˜Ÿåœ¨è¿™äº› SQL ä¸Šå°è£…äº† Goã€Python ä¸ Java çš„ SDKï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ã€‚ç”¨æˆ·åªéœ€è°ƒç”¨å¦‚ build æˆ– import ç­‰æ¥å£å³å¯å®Œæˆæ•°æ®å¯¼å…¥ä¸æ„å»ºï¼Œå†é€šè¿‡ query æ¥å£å®ç°æŸ¥è¯¢èƒ½åŠ›ã€‚è¿™æ ·ä¸€æ¥ï¼Œåº”ç”¨å±‚ç ”å‘èƒ½å¤Ÿæ›´å¿«é€Ÿåœ°æ¥å…¥æ–°çš„ AI èƒ½åŠ›ã€‚åªéœ€ä½¿ç”¨ Apache Doris æ•°æ®åº“å¹¶ç»“åˆå›¢é˜Ÿæä¾›çš„ SDKï¼Œå³å¯ç›´æ¥å°†ä¸šåŠ¡æµç¨‹è·‘é€šå¹¶éªŒè¯æ•ˆæœã€‚</p>
<h2 data-id="heading-12">äº”ã€ä¼ä¸šçº§ AI é—®æ•° Datamind è½åœ°æ–¹æ¡ˆ</h2>
<p>ä¼ä¸šçº§ AI é—®æ•°æ˜¯å½“å‰è¡Œä¸šå†…è¾ƒä¸ºç»å…¸ä¸”çƒ­é—¨çš„æ¢ç´¢æ–¹å‘ã€‚è¡Œä¸šå†…æ™®éé‡‡ç”¨ NL2SQL ç›´æ¥æŸ¥è¯¢ Apache Doris ç­‰æ•°æ®åº“çš„æ¨¡å¼ã€‚é‚£ä¹ˆï¼Œå­—èŠ‚æ˜¯å¦‚ä½•è½åœ°çš„å‘¢ï¼Ÿ</p>
<h3 data-id="heading-13">5.1 ä¼ä¸š AI é—®æ•°ç†æƒ³æ¶æ„</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬åŸºäº Doris æ„å»ºäº†æ¹–ä»“ä¸€ä½“çš„æ•°æ®æ¶æ„ï¼Œä»¥æ•°æ®æ¹–ä¸ºä¸­å¿ƒï¼Œå¤–éƒ¨ä¸šåŠ¡ç³»ç»Ÿæˆ–ä¼ä¸šå†…éƒ¨ä¿¡æ¯ç³»ç»Ÿï¼ˆå¦‚ RDSã€API å–æ•°ï¼‰ï¼Œæ•°æ®ç»è¿‡ DTS ç­‰å·¥å…·æ‘„å…¥ï¼Œæœ€ç»ˆæ²‰æ·€åœ¨äº‘å­˜å‚¨ä¸­ï¼Œå‘ˆç°ä¸ºä¼ ç»Ÿ Hive çš„åŸç”Ÿ Parquet æ ¼å¼ã€‚éšåï¼Œæ•°æ®é€šè¿‡ Spark æˆ– Flink è¿›è¡Œ ETL æ¸…æ´—ï¼Œéµå¾ªæ ‡å‡†çš„ Lambda æ¶æ„ï¼Œæœ€ç»ˆç”Ÿæˆå¯ä¾›æ¶ˆè´¹çš„æ•°æ®ï¼Œå¹¶å­˜å‚¨è‡³ OLAP å¼•æ“ Apache Doris ä»¥å®ç°æŸ¥è¯¢åŠ é€Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4f4a678bfd8640d9bcd105a70e21235f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=y2yvM928aRWBRQrKvOFBtH6gkLo%3D" alt="5.1 ä¼ä¸š AI é—®æ•°ç†æƒ³æ¶æ„.png" loading="lazy"/></p>
<p>è‹¥è¦åˆ©ç”¨ AI è¿›è¡Œæ•°æ®æ¶ˆè´¹ï¼Œä»¥å®ç°ç±»ä¼¼ä¼ä¸šæ™ºèƒ½ä½“çš„åŠŸèƒ½ï¼Œå®ƒéœ€è¦è®¿é—®æ‰€æœ‰ä¼ä¸šä¿¡æ¯ç³»ç»Ÿçš„æ•°æ®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœŸæœ›çš„ç†æƒ³æ¶æ„å¤„ç†æµç¨‹åº”å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b5d47df3a47d4312beae1a2efa4be56c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=PhsnSFIRozhEAxsh2AGKEr08mZA%3D" alt="5.1 ä¼ä¸š AI é—®æ•°ç†æƒ³æ¶æ„-1.png" loading="lazy"/></p>
<p>å…·ä½“æµç¨‹ï¼šAI é—®æ•°åº”ç”¨é€šè¿‡ Data Agent è°ƒç”¨ NL2SQL è¿™ç±»å¤–éƒ¨å·¥å…·ï¼ŒData Agent é‡‡ç”¨ Plan Execute æˆ– React æ¨¡å‹è§„åˆ’æ‰§è¡Œè·¯å¾„ï¼Œéœ€è¦å…ƒæ•°æ®ä»¥åŠä¾æ®ä¸šåŠ¡è‡ªå®šä¹‰çš„è¯­ä¹‰æ¨¡å‹â€”â€”ç®€å•ç†è§£ä¸ºè¡¨å­—æ®µçš„æè¿°ï¼ŒåŸºäºè¿™äº›ä¿¡æ¯ï¼ŒData Agent ç”Ÿæˆå–æ•° SQLï¼Œå¹¶å‘ç»™ Apache Dorisï¼ˆå³ DataMindï¼‰ åŠ é€Ÿæ‰§è¡Œï¼Œæœ€ç»ˆå°†æ•°æ®è¿”å›åˆ° AI é—®æ•°åº”ç”¨å±‚ã€‚åœ¨è¿™å…¶ä¸­ï¼ŒApache Doris ä¸»è¦ä½œç”¨æ˜¯å°†æ¹–ä¸Šçš„æ•°æ®åŒæ­¥åˆ°å…¶å†…éƒ¨è¿›è¡ŒæŸ¥è¯¢åŠ é€Ÿã€‚</p>
<p>è€Œè¿™ç§ç†æƒ³å¤„ç†æ–¹å¼é¢ä¸´æ•°æ®å®‰å…¨æ€§åŠæŸ¥è¯¢å»¶è¿Ÿç­‰é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>æ•°æ®æ¹–ä¸­çš„æ•°æ®é‡åºå¤§ï¼Œå…¨éƒ¨åŒæ­¥åˆ° Apache Doris å¹¶ä¸ç°å®ï¼Œä¸”æ•æ„Ÿæ•°æ®ä¹Ÿä¸å®œå…¨é‡åŒæ­¥ã€‚</li>
<li>å½“æ•°æ®åŠ é€Ÿåˆ° DataMind åï¼ŒApache Doris çš„å†…è¡¨ä¸å¤–è¡¨å­˜åœ¨å·®å¼‚ã€‚åŠ é€Ÿä¼šå½±å“ SQL çš„ Catalog è¯­æ³•ï¼Œä¾‹å¦‚åŠ é€Ÿåï¼Œå¤–è¡¨çš„ Catalog åç§°ä¸º Hiveï¼Œå†…è¡¨åˆ™ä¸º Internalã€‚è¿™å¯¹ AI ç”Ÿæˆ SQL äº§ç”Ÿä¸€å®šå½±å“ï¼Œè¿«ä½¿ AI å¿…é¡»æ„ŸçŸ¥æ˜¯å¦å­˜åœ¨åŠ é€Ÿã€‚</li>
</ul>
<h3 data-id="heading-14">5.2 ä¼ä¸š AI é—®æ•°æœ€ç»ˆæ¶æ„</h3>
<p>ä¸ºè§£å†³ä¸Šè¿°é—®é¢˜ï¼Œæˆ‘ä»¬è¿›è¡Œäº†å¦‚ä¸‹ä¼˜åŒ–ï¼Œå…·ä½“æ”¹è¿›ä¸ºï¼š</p>
<ul>
<li><strong>æ”¹è¿› Data Agent æŸ¥è¯¢çš„è·¯ç”±æœºåˆ¶</strong>ï¼šç”¨æˆ·åªéœ€ä¹¦å†™åº“è¡¨åï¼Œç³»ç»Ÿå°†åœ¨ä¼˜åŒ–å™¨é˜¶æ®µè‡ªåŠ¨åˆ¤æ–­è·¯ç”±ã€è¡¥å…¨è¡¨åã€‚ç”¨æˆ·å¯¹äº Data Agent çš„ä½¿ç”¨ï¼Œåªéœ€ç†è§£æ•°æ®æ¹–ä¸­çš„ Schemaï¼Œæ— éœ€å…³æ³¨è¡¨æ˜¯å­˜å‚¨åœ¨æ•°æ®æ¹–è¿˜æ˜¯å·²åŠ é€Ÿè‡³ Apache Dorisã€‚</li>
<li><strong>æ•°æ®æ¹–æƒé™ç³»ç»Ÿçš„æ‰“é€š</strong>ï¼šæˆ‘ä»¬çš„æ•°æ®æ¹–æ‹¥æœ‰ç‹¬ç«‹çš„æƒé™ç®¡ç†ç³»ç»Ÿï¼Œæ§åˆ¶è¯»å†™è®¿é—®ã€‚å°†æ•°æ®åŠ é€Ÿè‡³ Apache Doris ç›¸å½“äºå¤åˆ¶ä¸€ä»½æ•°æ®ï¼Œå¯èƒ½å¯¼è‡´å®‰å…¨ç®¡æ§å¤±æ•ˆã€‚ä¸ºè§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬è®¾è®¡äº†æœºåˆ¶ï¼šå³ä½¿æ•°æ®åŒæ­¥è‡³ Apache Dorisï¼Œå…¶æƒé™ä»å— Triton æ•°æ®æ¹–æƒé™ç³»ç»Ÿç®¡æ§ï¼Œä¸”ä¸ Apache Doris çš„è´¦å·å¯†ç æ— å…³ã€‚è¿™ä¸€è®¾è®¡ç¡®ä¿åº”ç”¨å±‚åœ¨æ•°æ®æ¹–ä¸Šç”³è¯·çš„æƒé™ä¾ç„¶æœ‰æ•ˆï¼ŒåŠ é€Ÿåæ— éœ€é¢å¤–æƒé™ç”³è¯·ã€‚æ­¤å¤–ï¼Œè¿™ä¸€æœºåˆ¶ä¿è¯äº†å³ä½¿æ•°æ®åŒæ­¥åˆ° Apache Dorisï¼ŒæŒæœ‰å…¶è´¦å·å¯†ç çš„äººå‘˜ï¼ˆå¦‚ DBAï¼‰ï¼Œæœªç»åŸæ•°æ®æ¹–ç³»ç»Ÿç”³è¯·çš„æƒé™ä»æ— æ³•è®¿é—®ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/285b9583631d4edcb3385984dd2397ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=SF5KB6Q6rhENVCgFdRCUQFw2%2F3g%3D" alt="5.2 ä¼ä¸š AI é—®æ•°æœ€ç»ˆæ¶æ„.png" loading="lazy"/></p>
<h2 data-id="heading-15">å…­ã€ç»“æŸè¯­</h2>
<p>Doris + AI  ä¸€ç«™å¼èåˆæ•°æ®å¼•æ“ DataMind çš„å®ç°ï¼Œå·²åœ¨å­—èŠ‚å†…éƒ¨åº”ç”¨ä¸€æ®µæ—¶é—´ï¼Œå¹¶åœ¨æŒç»­æ¨å¹¿ä¹‹ä¸­ï¼Œå…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬æ™ºèƒ½ç®€å†æœç´¢ã€ByteRAG å¹³å°ã€CapCut å†…å®¹æ²»ç†ç­‰ã€‚ä¸”åœ¨ GraphRAG ä¸Šçº¿åï¼Œå›¢é˜Ÿä¸å¤šæ–¹å®¢æˆ·åˆä½œå®ç°äº†åœºæ™¯è½åœ°ï¼Œä¾‹å¦‚å¹¿å‘Šåœºæ™¯ã€ä»£ç æœç´¢çš„åœºæ™¯ï¼Œä»¥åŠè¿‘æœŸä¸šç•Œå…³æ³¨çš„ PRD2Code ç­‰ç ”å‘ææ•ˆåœºæ™¯ ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b6eaf3aaffb4547a9d65f846828601e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=zrrUhDp2OmFLsvzZ%2BnT7Gwe1cOE%3D" alt="å…­ã€ç»“æŸè¯­-1.png" loading="lazy"/>
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110d14815c8b486dbe50dde8abb3ca98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=13GCCMEdVlfD%2FhNnQmShhSsD4qg%3D" alt="å…­ã€ç»“æŸè¯­.png" loading="lazy"/></p>
<p>æœªæ¥ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨ DATA + AI ä¸Šç»§ç»­æ¢ç´¢ï¼Œæ­å»ºæ›´åŠ å®Œå–„çš„ä¼ä¸š AI é—®æ•°æ¶æ„ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬å°†ä¿æŒä¸ Doris å¼€æºç¤¾åŒºçš„ç´§å¯†è”ç³»ä¿æŒè”ç³»ï¼Œç§¯æå‚ä¸å…±å»ºå¹¶ä¸ºç¤¾åŒºæä¾›åé¦ˆã€‚</p>
<p>æ¬¢è¿æ›´å¤šçš„åŒä»åŠ å…¥ AI èƒ½åŠ›å…±åˆ›ä¸­æ¥ï¼Œå¯é€šè¿‡ä¸‹æ–¹äºŒç»´ç æ·»åŠ  Doris å°åŠ©æ‰‹ï¼Œå›å¤ã€AIã€‘å³å¯åŠ å…¥ AI ä¸“é¡¹äº¤æµç¾¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/88f9e91d41684893bdad7579c96f4fa4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835740&amp;x-signature=oh9r9BDgNGmrhstZ5EyTjxSWHng%3D" alt="Doris AI ä¸“é¡¹ç¾¤äºŒç»´ç " loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agent åè®®æ¼”è¿›ï¼šä» MCP åˆ° ACP çš„æ¶æ„å¯¹æ¯”ä¸æœªæ¥å±•æœ›]]></title>    <link>https://juejin.cn/post/7577031454585929755</link>    <guid>https://juejin.cn/post/7577031454585929755</guid>    <pubDate>2025-11-27T08:12:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577031454585929755" data-draft-id="7576918517238218802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agent åè®®æ¼”è¿›ï¼šä» MCP åˆ° ACP çš„æ¶æ„å¯¹æ¯”ä¸æœªæ¥å±•æœ›"/> <meta itemprop="keywords" content="MCP,Gemini,OpenAI"/> <meta itemprop="datePublished" content="2025-11-27T08:12:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é­é¦–"/> <meta itemprop="url" content="https://juejin.cn/user/3817931570691031"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agent åè®®æ¼”è¿›ï¼šä» MCP åˆ° ACP çš„æ¶æ„å¯¹æ¯”ä¸æœªæ¥å±•æœ›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3817931570691031/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é­é¦–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:12:52.000Z" title="Thu Nov 27 2025 08:12:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Multi-Agent åä½œçš„åŸºçŸ³ï¼šåè®®æ ‡å‡†åŒ–æ¢ç´¢ä¹‹è·¯</h2>
<blockquote>
<p>åŸºäº Google Gemini CLI å’Œ OpenAI Codex æºç çš„æ·±åº¦æŠ€æœ¯å‰–æ</p>
<p><strong>æºç ç‰ˆæœ¬è¯´æ˜</strong>
æœ¬æ–‡åŸºäºä»¥ä¸‹ç‰ˆæœ¬çš„æºç åˆ†æï¼š</p>
<ul>
<li><strong>Gemini CLI</strong>: v0.10.0-nightly (2025-10-13)</li>
<li><strong>Codex CLI</strong>: v0.2.0-alpha.2 (2025-11-25)</li>
<li><strong>MCP åè®®</strong>: 2025-06-18 è§„èŒƒ</li>
</ul>
</blockquote>
<h3 data-id="heading-1">æ‘˜è¦</h3>
<ul>
<li>éšç€ AI Agent çš„å¿«é€Ÿå‘å±•ï¼Œå¦‚ä½•è®©ä¸åŒçš„ Agent ä¹‹é—´é«˜æ•ˆåä½œã€å¦‚ä½•æ ‡å‡†åŒ– Agent ä¸å¤–éƒ¨å·¥å…·çš„äº¤äº’ï¼Œå·²æˆä¸ºä¸šç•Œå…³æ³¨çš„ç„¦ç‚¹ã€‚</li>
<li>æœ¬æ–‡é€šè¿‡æ·±å…¥åˆ†æ <strong>Google Gemini CLI</strong> å’Œ <strong>OpenAI Codex</strong> çš„æºç å®ç°ï¼Œå¯¹æ¯”ä¸¤å¤§ä¸»æµåè®®â€”â€”<strong>MCP (Model Context Protocol)</strong> å’Œ <strong>ACP (Agent Context Protocol)</strong> çš„è®¾è®¡ç†å¿µã€æŠ€æœ¯æ¶æ„å’Œåº”ç”¨åœºæ™¯ï¼Œå¹¶æ¢è®¨ AI Agent åè®®çš„æœªæ¥å‘å±•æ–¹å‘ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2">ä¸€ã€åè®®èƒŒæ™¯ï¼šä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†åŒ–ï¼Ÿ</h3>
<h4 data-id="heading-3">1.1 å½“å‰ AI Agent ç”Ÿæ€çš„ç—›ç‚¹</h4>
<p>åœ¨åè®®æ ‡å‡†åŒ–ä¹‹å‰ï¼ŒAI Agent é¢ä¸´ä»¥ä¸‹æ ¸å¿ƒæŒ‘æˆ˜ï¼š</p>






























<table><thead><tr><th>ç—›ç‚¹</th><th>æè¿°</th><th>å½±å“</th></tr></thead><tbody><tr><td><strong>å­¤å²›æ•ˆåº”</strong></td><td>æ¯ä¸ª Agent ä½¿ç”¨ç§æœ‰åè®®ï¼Œæ— æ³•äº’æ“ä½œ</td><td>æ— æ³•æ„å»º Multi-Agent ç³»ç»Ÿ</td></tr><tr><td><strong>å·¥å…·é›†æˆå›°éš¾</strong></td><td>æ¯ä¸ªå·¥å…·éœ€è¦ä¸ºä¸åŒ Agent é‡å¤å¼€å‘é€‚é…å™¨</td><td>å¼€å‘æˆæœ¬é«˜ï¼Œç”Ÿæ€ç¢ç‰‡åŒ–</td></tr><tr><td><strong>çŠ¶æ€ä¸å¯æ¢å¤</strong></td><td>ä¼šè¯çŠ¶æ€æ— æ³•æŒä¹…åŒ–æˆ–è·¨ç³»ç»Ÿä¼ é€’</td><td>ç”¨æˆ·ä½“éªŒå·®ï¼Œæ— æ³•é•¿æœŸä»»åŠ¡</td></tr><tr><td><strong>å®‰å…¨æ€§ç¼ºå¤±</strong></td><td>ç¼ºä¹ç»Ÿä¸€çš„æƒé™æ§åˆ¶å’Œå®¡è®¡æœºåˆ¶</td><td>ä¼ä¸šçº§éƒ¨ç½²å­˜åœ¨é£é™©</td></tr></tbody></table>
<h4 data-id="heading-4">1.2 åè®®æ ‡å‡†åŒ–çš„ä»·å€¼</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph before["æ ‡å‡†åŒ–å‰ï¼šN Ã— M é—®é¢˜"]
        A1["Agent1"] --&gt; T1A["Tool1 (é€‚é…å™¨ 1-1)"]
        A1 --&gt; T2A["Tool2 (é€‚é…å™¨ 1-2)"]
        A1 --&gt; T3A["Tool3 (é€‚é…å™¨ 1-3)"]

        A2["Agent2"] --&gt; T1B["Tool1 (é€‚é…å™¨ 2-1)"]
        A2 --&gt; T2B["Tool2 (é€‚é…å™¨ 2-2)"]
        A2 --&gt; T3B["Tool3 (é€‚é…å™¨ 2-3)"]

        style before fill:#ffebee,stroke:#c62828
    end

    subgraph after["æ ‡å‡†åŒ–åï¼šN + M é—®é¢˜"]
        Agent1["Agent1"] --&gt; Protocol["MCP/ACP åè®®å±‚"]
        Agent2["Agent2"] --&gt; Protocol
        Agent3["Agent3"] --&gt; Protocol

        Protocol --&gt; Tool1["Tool1"]
        Protocol --&gt; Tool2["Tool2"]
        Protocol --&gt; Tool3["Tool3"]

        style after fill:#e8f5e9,stroke:#2e7d32
        style Protocol fill:#fff3e0,stroke:#e65100
    end
</code></pre>
<p><strong>å¯¹æ¯”ç»“æœ</strong>:</p>
<ul>
<li><strong>æ ‡å‡†åŒ–å‰</strong>: éœ€è¦ <strong>N Ã— M</strong> ä¸ªé€‚é…å™¨ (æ¯ä¸ª Agent ä¸ºæ¯ä¸ª Tool å¼€å‘ä¸“ç”¨é€‚é…å™¨)</li>
<li><strong>æ ‡å‡†åŒ–å</strong>: ä»…éœ€ <strong>N + M</strong> ä¸ªé€‚é…å™¨ (Agent å®ç°åè®® + Tool å®ç°åè®®)</li>
</ul>
<hr/>
<h3 data-id="heading-5">äºŒã€MCP (Model Context Protocol) æ·±åº¦è§£æ</h3>
<h4 data-id="heading-6">2.1 MCP åè®®æ¦‚è¿°</h4>
<p><strong>MCP</strong> ç”± Anthropic æå‡ºï¼Œæ˜¯ä¸€ä¸ªä¸“æ³¨äº <strong>Agent ä¸å¤–éƒ¨å·¥å…·/èµ„æºäº¤äº’</strong> çš„æ ‡å‡†åè®®ã€‚</p>
<p><strong>æ ¸å¿ƒè®¾è®¡ç†å¿µ</strong>:</p>
<ul>
<li>ğŸ“¦ <strong>èµ„æºæŠ½è±¡</strong>: å°†å¤–éƒ¨ç³»ç»Ÿï¼ˆæ•°æ®åº“ã€APIã€æ–‡ä»¶ç³»ç»Ÿï¼‰æŠ½è±¡ä¸ºç»Ÿä¸€çš„ Resource</li>
<li>ğŸ”§ <strong>å·¥å…·è°ƒç”¨</strong>: æ ‡å‡†åŒ–çš„å·¥å…·å‘ç°ã€è°ƒç”¨å’Œå“åº”æµç¨‹</li>
<li>ğŸ”Œ <strong>ä¼ è¾“æ— å…³</strong>: æ”¯æŒ stdioã€SSEã€HTTP ç­‰å¤šç§ä¼ è¾“æ–¹å¼</li>
<li>ğŸ” <strong>æƒé™æ§åˆ¶</strong>: å†…ç½®çš„å·¥å…·æ‰§è¡Œå®¡æ‰¹æœºåˆ¶</li>
</ul>
<p><strong>åè®®ç‰ˆæœ¬</strong>: <code>2025-06-18</code> (æ¥æº: Codex <code>mcp-types/src/lib.rs</code>)</p>
<h4 data-id="heading-7">2.2 Gemini CLI çš„ MCP å®ç°æ¶æ„</h4>
<h5 data-id="heading-8"><strong>æ ¸å¿ƒç»„ä»¶</strong>:</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/src/tools/mcp-client.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpClient</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">client</span>: <span class="hljs-title class_">Client</span>;                    <span class="hljs-comment">// MCP SDK Client</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">transport</span>: <span class="hljs-title class_">Transport</span>;              <span class="hljs-comment">// ä¼ è¾“å±‚ (stdio/SSE/HTTP)</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">status</span>: <span class="hljs-title class_">MCPServerStatus</span>;           <span class="hljs-comment">// è¿æ¥çŠ¶æ€</span>

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">connect</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-comment">// 1. å»ºç«‹ä¼ è¾“è¿æ¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">transport</span> = <span class="hljs-title function_">createTransport</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">serverConfig</span>);

    <span class="hljs-comment">// 2. åˆå§‹åŒ– MCP Client</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'gemini-cli'</span>,
      <span class="hljs-attr">version</span>: <span class="hljs-string">'0.10.0'</span>
    }, {
      <span class="hljs-attr">capabilities</span>: {
        <span class="hljs-attr">roots</span>: { <span class="hljs-attr">listChanged</span>: <span class="hljs-literal">true</span> },
        <span class="hljs-attr">sampling</span>: {}
      }
    });

    <span class="hljs-comment">// 3. è¿æ¥åˆ° MCP Server</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">connect</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">transport</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">discover</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-comment">// å‘ç°å·¥å…·</span>
    <span class="hljs-keyword">const</span> tools = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">listTools</span>();

    <span class="hljs-comment">// å‘ç°èµ„æº</span>
    <span class="hljs-keyword">const</span> resources = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">listResources</span>();

    <span class="hljs-comment">// å‘ç° Prompts</span>
    <span class="hljs-keyword">const</span> prompts = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">listPrompts</span>();
  }
}
</code></pre>
<h5 data-id="heading-9"><strong>å·¥å…·è°ƒç”¨æµç¨‹</strong>:</h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/core/src/tools/mcp-tool.ts</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">DiscoveredMCPToolInvocation</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-attr">signal</span>: <span class="hljs-title class_">AbortSignal</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ToolResult</span>&gt; {
    <span class="hljs-comment">// 1. æ£€æŸ¥æ˜¯å¦éœ€è¦ç”¨æˆ·æ‰¹å‡†</span>
    <span class="hljs-keyword">const</span> confirmationDetails = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldConfirmExecute</span>(signal);
    <span class="hljs-keyword">if</span> (confirmationDetails) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">waitForUserApproval</span>(confirmationDetails);
    }

    <span class="hljs-comment">// 2. è°ƒç”¨ MCP Tool</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">functionCalls</span>: <span class="hljs-title class_">FunctionCall</span>[] = [{
      <span class="hljs-attr">name</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serverToolName</span>,
      <span class="hljs-attr">args</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">params</span>
    }];

    <span class="hljs-keyword">const</span> rawResponseParts = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">mcpTool</span>.<span class="hljs-title function_">callToolBatch</span>(
      functionCalls,
      signal
    );

    <span class="hljs-comment">// 3. å¤„ç†å“åº”</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseToolResponse</span>(rawResponseParts);
  }
}
</code></pre>
<h4 data-id="heading-10">2.3 Codex çš„ MCP å®ç°æ¶æ„</h4>
<h5 data-id="heading-11"><strong>æ ¸å¿ƒç»„ä»¶</strong> (åŸºäº Rust):</h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// codex-rs/core/src/mcp_connection_manager.rs</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">McpConnectionManager</span> {
    clients: HashMap&lt;<span class="hljs-type">String</span>, AsyncManagedClient&gt;,
    elicitation_requests: ElicitationRequestManager,
    tool_timeout: Duration,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">McpConnectionManager</span> {
    <span class="hljs-keyword">pub</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">connect_server</span>(
        &amp;<span class="hljs-keyword">self</span>,
        server_name: <span class="hljs-type">String</span>,
        config: McpServerConfig
    ) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
        <span class="hljs-comment">// 1. åˆ›å»º RmcpClient (Rust MCP Client)</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">client</span> = RmcpClient::<span class="hljs-title function_ invoke__">new</span>(
            Implementation {
                name: <span class="hljs-string">"codex"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
                version: <span class="hljs-built_in">env!</span>(<span class="hljs-string">"CARGO_PKG_VERSION"</span>).<span class="hljs-title function_ invoke__">to_string</span>(),
            },
            ClientCapabilities {
                roots: <span class="hljs-title function_ invoke__">Some</span>(RootsCapability { list_changed: <span class="hljs-literal">true</span> }),
                sampling: <span class="hljs-title function_ invoke__">Some</span>(SamplingCapability {}),
            },
        );

        <span class="hljs-comment">// 2. å»ºç«‹ä¼ è¾“è¿æ¥</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">transport</span> = <span class="hljs-keyword">match</span> &amp;config.transport {
            StdioTransport =&gt; <span class="hljs-title function_ invoke__">create_stdio_transport</span>(config),
            SseTransport =&gt; <span class="hljs-title function_ invoke__">create_sse_transport</span>(config),
        };

        <span class="hljs-keyword">await</span> client.<span class="hljs-title function_ invoke__">connect</span>(transport)?;

        <span class="hljs-comment">// 3. åˆ—ä¸¾å¹¶é™å®šå·¥å…·</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">tools</span> = client.<span class="hljs-title function_ invoke__">list_tools</span>().<span class="hljs-keyword">await</span>?;
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">qualified_tools</span> = <span class="hljs-keyword">self</span>.<span class="hljs-title function_ invoke__">qualify_tools</span>(server_name, tools);

        <span class="hljs-title function_ invoke__">Ok</span>(())
    }
}
</code></pre>
<h5 data-id="heading-12"><strong>å·¥å…·åç§°é™å®š (Fully Qualified Names)</strong>:</h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// codex-rs/core/src/mcp_connection_manager.rs</span>
<span class="hljs-keyword">const</span> MCP_TOOL_NAME_DELIMITER: &amp;<span class="hljs-type">str</span> = <span class="hljs-string">"__"</span>;
<span class="hljs-keyword">const</span> MAX_TOOL_NAME_LENGTH: <span class="hljs-type">usize</span> = <span class="hljs-number">64</span>;

<span class="hljs-keyword">fn</span> <span class="hljs-title function_">qualify_tools</span>(tools: <span class="hljs-type">Vec</span>&lt;ToolInfo&gt;) <span class="hljs-punctuation">-&gt;</span> HashMap&lt;<span class="hljs-type">String</span>, ToolInfo&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">qualified_tools</span> = HashMap::<span class="hljs-title function_ invoke__">new</span>();

    <span class="hljs-keyword">for</span> <span class="hljs-variable">tool</span> <span class="hljs-keyword">in</span> tools {
        <span class="hljs-comment">// æ ¼å¼: mcp__&lt;server_name&gt;__&lt;tool_name&gt;</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">qualified_name</span> = <span class="hljs-built_in">format!</span>(
            <span class="hljs-string">"mcp{}{}{}{}"</span>,
            MCP_TOOL_NAME_DELIMITER,
            tool.server_name,
            MCP_TOOL_NAME_DELIMITER,
            tool.tool_name
        );

        <span class="hljs-comment">// è¶…é•¿åˆ™ä½¿ç”¨ SHA1 æˆªæ–­</span>
        <span class="hljs-keyword">if</span> qualified_name.<span class="hljs-title function_ invoke__">len</span>() &gt; MAX_TOOL_NAME_LENGTH {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">hash</span> = sha1::Sha1::<span class="hljs-title function_ invoke__">digest</span>(qualified_name.<span class="hljs-title function_ invoke__">as_bytes</span>());
            qualified_name = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{}_{:x}"</span>,
                &amp;qualified_name[..<span class="hljs-number">48</span>],
                hash
            );
        }

        qualified_tools.<span class="hljs-title function_ invoke__">insert</span>(qualified_name, tool);
    }

    qualified_tools
}
</code></pre>
<h4 data-id="heading-13">2.4 MCP åè®®æ¶ˆæ¯ç¤ºä¾‹</h4>
<h5 data-id="heading-14"><strong>å·¥å…·åˆ—è¡¨è¯·æ±‚</strong>:</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/list"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-15"><strong>å·¥å…·åˆ—è¡¨å“åº”</strong>:</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"read_file"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Read contents of a file"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"inputSchema"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"object"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
            <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"string"</span> <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"required"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">"path"</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-16"><strong>å·¥å…·è°ƒç”¨è¯·æ±‚</strong>:</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"tools/call"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"read_file"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"arguments"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"/etc/hosts"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h5 data-id="heading-17"><strong>å·¥å…·è°ƒç”¨å“åº”</strong>:</h5>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"content"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"text"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"text"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"127.0.0.1 localhost\n::1 localhost"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"isError"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-18">ä¸‰ã€ACP (Agent Client Protocol) å®˜æ–¹æ ‡å‡†æ·±åº¦è§£æ</h3>
<h4 data-id="heading-19">3.1 ACP åè®®æ¦‚è¿°</h4>
<p><strong>ACP (Agent Client Protocol)</strong> æ˜¯ç”± <strong>Zed Industries</strong> åœ¨ <strong>2025 å¹´ 8 æœˆ</strong>æ­£å¼å‘å¸ƒçš„å¼€æ”¾æ ‡å‡†ï¼Œæ—¨åœ¨æ ‡å‡†åŒ–<strong>ä»£ç ç¼–è¾‘å™¨/IDE ä¸ AI ç¼–ç ä»£ç†ä¹‹é—´çš„é€šä¿¡</strong>ã€‚</p>
<blockquote>
<p>ğŸ“– <strong>å®˜æ–¹èµ„æº</strong></p>
<ul>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fagentclientprotocol.com%2F" target="_blank" title="https://agentclientprotocol.com/" ref="nofollow noopener noreferrer">agentclientprotocol.com/</a></li>
<li>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentclientprotocol%2Fagent-client-protocol" target="_blank" title="https://github.com/agentclientprotocol/agent-client-protocol" ref="nofollow noopener noreferrer">github.com/agentclientâ€¦</a></li>
<li>TypeScript SDKï¼š<code>@agentclientprotocol/sdk</code> (npm)</li>
<li>åè®®ç‰ˆæœ¬ï¼š<strong>Version 1</strong> (å½“å‰)</li>
</ul>
</blockquote>
<p><strong>æ ¸å¿ƒå®šä½</strong>:
ACP ç±»ä¼¼äº <strong>LSP (Language Server Protocol)</strong> åœ¨è¯­è¨€æœåŠ¡å™¨é¢†åŸŸçš„ä½œç”¨ï¼Œè§£å†³äº† Agent-Editor é›†æˆçš„ <strong>NÃ—M é—®é¢˜</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph before["ACP ä¹‹å‰ï¼šN Ã— M é›†æˆé—®é¢˜"]
        E1["Editor1"] --&gt; A1A["Agent1 (å®šåˆ¶é›†æˆ)"]
        E1 --&gt; A2A["Agent2 (å®šåˆ¶é›†æˆ)"]
        E1 --&gt; A3A["Agent3 (å®šåˆ¶é›†æˆ)"]

        E2["Editor2"] --&gt; A1B["Agent1 (é‡å¤å¼€å‘)"]
        E2 --&gt; A2B["Agent2 (é‡å¤å¼€å‘)"]

        style before fill:#ffebee,stroke:#c62828
    end

    subgraph after["ACP ä¹‹åï¼šN + M æ ‡å‡†åŒ–"]
        Editor1["Editor1"] --&gt; ACP["ACP åè®®å±‚"]
        Editor2["Editor2"] --&gt; ACP
        Editor3["Editor3"] --&gt; ACP

        ACP --&gt; Agent1["Agent1"]
        ACP --&gt; Agent2["Agent2"]
        ACP --&gt; Agent3["Agent3"]

        style after fill:#e8f5e9,stroke:#2e7d32
        style ACP fill:#e3f2fd,stroke:#1565c0
    end
</code></pre>
<p><strong>æ ¸å¿ƒè®¾è®¡ç†å¿µ</strong>:</p>
<ul>
<li>ğŸ“ <strong>æ ‡å‡†åŒ–é€šä¿¡</strong>: åŸºäº JSON-RPC 2.0ï¼Œä½¿ç”¨ stdio ä¼ è¾“</li>
<li>ğŸ”Œ <strong>å³æ’å³ç”¨</strong>: ä»»ä½•æ”¯æŒ ACP çš„ç¼–è¾‘å™¨éƒ½èƒ½ä½¿ç”¨ä»»ä½• ACP ä»£ç†</li>
<li>ğŸ¯ <strong>ä»£ç†è‡ªä¸»æ€§</strong>: ä»£ç†ä½œä¸ºç¼–è¾‘å™¨çš„å­è¿›ç¨‹è¿è¡Œï¼Œå¯è‡ªä¸»ä¿®æ”¹ä»£ç </li>
<li>ğŸ” <strong>æƒé™æ§åˆ¶</strong>: æ˜ç¡®çš„æƒé™è¯·æ±‚æœºåˆ¶ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€ç»ˆç«¯ç­‰ï¼‰</li>
<li>ğŸ”„ <strong>ä¼šè¯ç®¡ç†</strong>: æ”¯æŒä¼šè¯åˆ›å»ºã€åŠ è½½ã€çŠ¶æ€è¿½è¸ª</li>
<li>ğŸ“Š <strong>èƒ½åŠ›åå•†</strong>: åˆå§‹åŒ–æ—¶åå•†åŒæ–¹æ”¯æŒçš„åŠŸèƒ½</li>
</ul>
<h4 data-id="heading-20">3.2 ACP åè®®æ¶æ„</h4>
<h5 data-id="heading-21"><strong>é€šä¿¡æ¨¡å‹</strong></h5>
<p>ACP éµå¾ª <strong>JSON-RPC 2.0</strong> è§„èŒƒï¼Œå®šä¹‰äº†ä¸¤ç§æ¶ˆæ¯ç±»å‹ï¼š</p>




















<table><thead><tr><th>æ¶ˆæ¯ç±»å‹</th><th>æè¿°</th><th>æ˜¯å¦éœ€è¦å“åº”</th></tr></thead><tbody><tr><td><strong>Methods</strong></td><td>è¯·æ±‚-å“åº”å¯¹ï¼ŒæœŸæœ›è¿”å›ç»“æœæˆ–é”™è¯¯</td><td>âœ… æ˜¯</td></tr><tr><td><strong>Notifications</strong></td><td>å•å‘æ¶ˆæ¯ï¼Œç”¨äºäº‹ä»¶é€šçŸ¥</td><td>âŒ å¦</td></tr></tbody></table>
<h5 data-id="heading-22"><strong>è§’è‰²å®šä¹‰</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Agentï¼šä½¿ç”¨ç”Ÿæˆå¼ AI è‡ªä¸»ä¿®æ”¹ä»£ç çš„ç¨‹åº</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Agent</span> {
  <span class="hljs-comment">// === åŸºçº¿æ–¹æ³•ï¼ˆå¿…é¡»å®ç°ï¼‰ ===</span>
  <span class="hljs-title function_">initialize</span>(): <span class="hljs-title class_">InitializeResult</span>;           <span class="hljs-comment">// åˆå§‹åŒ–å’Œèƒ½åŠ›åå•†</span>
  authenticate?(): <span class="hljs-title class_">AuthResult</span>;              <span class="hljs-comment">// èº«ä»½éªŒè¯ï¼ˆå¯é€‰ï¼‰</span>
  <span class="hljs-string">'session/new'</span>(): <span class="hljs-title class_">SessionId</span>;              <span class="hljs-comment">// åˆ›å»ºæ–°ä¼šè¯</span>
  <span class="hljs-string">'session/prompt'</span>(<span class="hljs-attr">msg</span>: <span class="hljs-title class_">Message</span>): <span class="hljs-built_in">void</span>;    <span class="hljs-comment">// æ¥æ”¶ç”¨æˆ·æç¤ºè¯</span>

  <span class="hljs-comment">// === å¯é€‰æ–¹æ³• ===</span>
  <span class="hljs-string">'session/load'</span>?(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Session</span>;    <span class="hljs-comment">// åŠ è½½å·²æœ‰ä¼šè¯</span>
  <span class="hljs-string">'session/set_mode'</span>?(<span class="hljs-attr">mode</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// è®¾ç½®æ¨¡å¼ï¼ˆå¦‚ edit/chatï¼‰</span>

  <span class="hljs-comment">// === é€šçŸ¥ ===</span>
  <span class="hljs-string">'session/cancel'</span>(): <span class="hljs-built_in">void</span>;                <span class="hljs-comment">// å–æ¶ˆå½“å‰æ“ä½œ</span>
}

<span class="hljs-comment">// Clientï¼šæä¾›ç”¨æˆ·ç•Œé¢çš„ä»£ç ç¼–è¾‘å™¨/IDE</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Client</span> {
  <span class="hljs-comment">// === åŸºçº¿æ–¹æ³•ï¼ˆå¿…é¡»å®ç°ï¼‰ ===</span>
  <span class="hljs-string">'session/request_permission'</span>(<span class="hljs-attr">req</span>: <span class="hljs-title class_">PermissionRequest</span>): <span class="hljs-title class_">PermissionResult</span>;

  <span class="hljs-comment">// === å¯é€‰æ–¹æ³•ï¼ˆæ ¹æ®èƒ½åŠ›ï¼‰ ===</span>
  <span class="hljs-string">'fs/read_text_file'</span>?(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;
  <span class="hljs-string">'fs/write_text_file'</span>?(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">content</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;
  <span class="hljs-string">'terminal/create'</span>?(<span class="hljs-attr">cmd</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">TerminalId</span>;
  <span class="hljs-string">'terminal/output'</span>?(<span class="hljs-attr">id</span>: <span class="hljs-title class_">TerminalId</span>): <span class="hljs-title class_">TerminalOutput</span>;

  <span class="hljs-comment">// === é€šçŸ¥ ===</span>
  <span class="hljs-string">'session/update'</span>(<span class="hljs-attr">update</span>: <span class="hljs-title class_">SessionUpdate</span>): <span class="hljs-built_in">void</span>;  <span class="hljs-comment">// ä¼šè¯çŠ¶æ€æ›´æ–°</span>
}
</code></pre>
<h4 data-id="heading-23">3.3 ACP æ ¸å¿ƒæµç¨‹</h4>
<h5 data-id="heading-24"><strong>1. åˆå§‹åŒ–æµç¨‹</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Client â†’ Agent</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"initialize"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"protocolVersion"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"clientCapabilities"</span>: {
      <span class="hljs-string">"fs"</span>: {
        <span class="hljs-string">"readTextFile"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"writeTextFile"</span>: <span class="hljs-literal">true</span>
      },
      <span class="hljs-string">"terminal"</span>: <span class="hljs-literal">true</span>
    },
    <span class="hljs-string">"clientInfo"</span>: {
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"vscode"</span>,
      <span class="hljs-string">"title"</span>: <span class="hljs-string">"Visual Studio Code"</span>,
      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.95.0"</span>
    }
  }
}

<span class="hljs-comment">// Agent â†’ Client</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">0</span>,
  <span class="hljs-string">"result"</span>: {
    <span class="hljs-string">"protocolVersion"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-string">"agentCapabilities"</span>: {
      <span class="hljs-string">"loadSession"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">"promptCapabilities"</span>: {
        <span class="hljs-string">"image"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"audio"</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-string">"embeddedContext"</span>: <span class="hljs-literal">true</span>
      },
      <span class="hljs-string">"mcp"</span>: {
        <span class="hljs-string">"http"</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-string">"sse"</span>: <span class="hljs-literal">false</span>
      }
    },
    <span class="hljs-string">"agentInfo"</span>: {
      <span class="hljs-string">"name"</span>: <span class="hljs-string">"claude-agent"</span>,
      <span class="hljs-string">"title"</span>: <span class="hljs-string">"Claude Code Agent"</span>,
      <span class="hljs-string">"version"</span>: <span class="hljs-string">"1.0.0"</span>
    },
    <span class="hljs-string">"authMethods"</span>: []
  }
}
</code></pre>
<p><strong>å…³é”®è¦æ±‚</strong>:</p>
<ul>
<li>ğŸ”¢ <strong>åè®®ç‰ˆæœ¬åå•†</strong>: Client æä¾›æ”¯æŒçš„æœ€æ–°ç‰ˆæœ¬ï¼ŒAgent å“åº”é€‰å®šç‰ˆæœ¬</li>
<li>ğŸ›ï¸ <strong>èƒ½åŠ›å£°æ˜</strong>: åŒæ–¹æ˜ç¡®å£°æ˜æ”¯æŒçš„åŠŸèƒ½ï¼ˆæ–‡ä»¶ç³»ç»Ÿã€ç»ˆç«¯ã€MCP ç­‰ï¼‰</li>
<li>âš™ï¸ <strong>å‘åå…¼å®¹</strong>: æœªå£°æ˜çš„èƒ½åŠ›è§†ä¸ºä¸æ”¯æŒ</li>
</ul>
<h5 data-id="heading-25"><strong>2. ä¼šè¯ç®¡ç†æµç¨‹</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åˆ›å»ºæ–°ä¼šè¯</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"session/new"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"workspaceRoot"</span>: <span class="hljs-string">"/Users/pojian/code/project"</span>,
    <span class="hljs-string">"capabilities"</span>: {
      <span class="hljs-string">"edit"</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-string">"execute"</span>: <span class="hljs-literal">true</span>
    }
  }
}

<span class="hljs-comment">// å“åº”</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-string">"result"</span>: {
    <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-string">"state"</span>: <span class="hljs-string">"ready"</span>
  }
}
</code></pre>
<h5 data-id="heading-26"><strong>3. æç¤ºè¯äº¤äº’æµç¨‹</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Client â†’ Agent: å‘é€ç”¨æˆ·æç¤ºè¯</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">2</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"session/prompt"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-string">"message"</span>: {
      <span class="hljs-string">"parts"</span>: [
        {
          <span class="hljs-string">"kind"</span>: <span class="hljs-string">"text"</span>,
          <span class="hljs-string">"text"</span>: <span class="hljs-string">"é‡æ„è¿™ä¸ªå‡½æ•°ä»¥æé«˜æ€§èƒ½"</span>
        },
        {
          <span class="hljs-string">"kind"</span>: <span class="hljs-string">"resource_link"</span>,
          <span class="hljs-string">"uri"</span>: <span class="hljs-string">"file:///Users/pojian/code/project/src/utils.ts"</span>,
          <span class="hljs-string">"lineRange"</span>: { <span class="hljs-string">"start"</span>: <span class="hljs-number">10</span>, <span class="hljs-string">"end"</span>: <span class="hljs-number">25</span> }
        }
      ]
    }
  }
}

<span class="hljs-comment">// Agent â†’ Client: å®æ—¶çŠ¶æ€æ›´æ–°ï¼ˆé€šçŸ¥ï¼‰</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"session/update"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-string">"update"</span>: {
      <span class="hljs-string">"kind"</span>: <span class="hljs-string">"agent_message_chunk"</span>,
      <span class="hljs-string">"text"</span>: <span class="hljs-string">"æˆ‘æ¥åˆ†æè¿™ä¸ªå‡½æ•°çš„æ€§èƒ½ç“¶é¢ˆ..."</span>
    }
  }
}

<span class="hljs-comment">// Agent â†’ Client: è¯·æ±‚æƒé™</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"session/request_permission"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-string">"permission"</span>: {
      <span class="hljs-string">"kind"</span>: <span class="hljs-string">"file_write"</span>,
      <span class="hljs-string">"path"</span>: <span class="hljs-string">"/Users/pojian/code/project/src/utils.ts"</span>,
      <span class="hljs-string">"preview"</span>: <span class="hljs-string">"--- a/utils.ts\n+++ b/utils.ts\n..."</span>
    }
  }
}

<span class="hljs-comment">// Client â†’ Agent: æƒé™å“åº”</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"id"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-string">"result"</span>: {
    <span class="hljs-string">"granted"</span>: <span class="hljs-literal">true</span>
  }
}

<span class="hljs-comment">// Agent â†’ Client: å®ŒæˆçŠ¶æ€</span>
{
  <span class="hljs-string">"jsonrpc"</span>: <span class="hljs-string">"2.0"</span>,
  <span class="hljs-string">"method"</span>: <span class="hljs-string">"session/update"</span>,
  <span class="hljs-string">"params"</span>: {
    <span class="hljs-string">"sessionId"</span>: <span class="hljs-string">"sess_abc123"</span>,
    <span class="hljs-string">"update"</span>: {
      <span class="hljs-string">"kind"</span>: <span class="hljs-string">"state_change"</span>,
      <span class="hljs-string">"state"</span>: <span class="hljs-string">"completed"</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-27">3.4 ACP èƒ½åŠ›ç³»ç»Ÿ</h4>
<h5 data-id="heading-28"><strong>Client èƒ½åŠ›</strong></h5>





























<table><thead><tr><th>èƒ½åŠ›åŸŸ</th><th>èƒ½åŠ›</th><th>æè¿°</th><th>å…³è”æ–¹æ³•</th></tr></thead><tbody><tr><td><strong>æ–‡ä»¶ç³»ç»Ÿ</strong></td><td><code>fs.readTextFile</code></td><td>è¯»å–æ–‡æœ¬æ–‡ä»¶</td><td><code>fs/read_text_file</code></td></tr><tr><td/><td><code>fs.writeTextFile</code></td><td>å†™å…¥æ–‡æœ¬æ–‡ä»¶</td><td><code>fs/write_text_file</code></td></tr><tr><td><strong>ç»ˆç«¯</strong></td><td><code>terminal</code></td><td>æ‰§è¡Œå’Œç®¡ç† Shell å‘½ä»¤</td><td><code>terminal/*</code> å…¨ç³»åˆ—æ–¹æ³•</td></tr></tbody></table>
<h5 data-id="heading-29"><strong>Agent èƒ½åŠ›</strong></h5>








































<table><thead><tr><th>èƒ½åŠ›åŸŸ</th><th>èƒ½åŠ›</th><th>æè¿°</th></tr></thead><tbody><tr><td><strong>ä¼šè¯</strong></td><td><code>loadSession</code></td><td>æ”¯æŒåŠ è½½å·²æœ‰ä¼šè¯</td></tr><tr><td><strong>æç¤ºè¯</strong></td><td><code>image</code></td><td>æ”¯æŒå›¾åƒè¾“å…¥</td></tr><tr><td/><td><code>audio</code></td><td>æ”¯æŒéŸ³é¢‘è¾“å…¥</td></tr><tr><td/><td><code>embeddedContext</code></td><td>æ”¯æŒåµŒå…¥å¼ä¸Šä¸‹æ–‡èµ„æº</td></tr><tr><td><strong>MCP</strong></td><td><code>http</code></td><td>æ”¯æŒ HTTP ä¼ è¾“çš„ MCP æœåŠ¡å™¨</td></tr><tr><td/><td><code>sse</code></td><td>æ”¯æŒ SSE ä¼ è¾“çš„ MCP æœåŠ¡å™¨ï¼ˆå·²å¼ƒç”¨ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-30">3.5 ACP åè®®çº¦å®š</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å…³é”®çº¦å®š</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">ACP_CONVENTIONS</span> = {
  <span class="hljs-comment">// 1. è·¯å¾„è¦æ±‚</span>
  <span class="hljs-attr">filePaths</span>: <span class="hljs-string">"MUST be absolute"</span>,  <span class="hljs-comment">// æ‰€æœ‰æ–‡ä»¶è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„</span>

  <span class="hljs-comment">// 2. è¡Œå·çº¦å®š</span>
  <span class="hljs-attr">lineNumbers</span>: <span class="hljs-string">"1-based"</span>,  <span class="hljs-comment">// è¡Œå·ä» 1 å¼€å§‹</span>

  <span class="hljs-comment">// 3. æ–‡æœ¬æ ¼å¼</span>
  <span class="hljs-attr">textFormat</span>: <span class="hljs-string">"Markdown"</span>,  <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨ Markdown æ ¼å¼</span>

  <span class="hljs-comment">// 4. æ‰©å±•æœºåˆ¶</span>
  <span class="hljs-attr">customMethods</span>: <span class="hljs-string">"prefix with underscore (_method_name)"</span>,
  <span class="hljs-attr">customData</span>: <span class="hljs-string">"use _meta field"</span>,

  <span class="hljs-comment">// 5. é”™è¯¯å¤„ç†</span>
  <span class="hljs-attr">errorHandling</span>: <span class="hljs-string">"JSON-RPC 2.0 standard (code + message)"</span>
};
</code></pre>
<hr/>
<h3 data-id="heading-31">å››ã€A2A (Agent-to-Agent) æ·±åº¦å‰–æï¼šMulti-Agent ç³»ç»Ÿçš„æ¢ç´¢</h3>
<h4 data-id="heading-32">4.0 A2A æ¦‚è¿°ä¸è®¾è®¡å“²å­¦</h4>
<p><strong>A2A (Agent-to-Agent Protocol)</strong> æ˜¯ Google Gemini CLI å›¢é˜Ÿæå‡ºçš„å®éªŒæ€§åè®®ï¼Œä¸“æ³¨äºè§£å†³ <strong>Multi-Agent ç³»ç»Ÿ</strong>ä¸­çš„æ ¸å¿ƒæŒ‘æˆ˜ï¼šå¦‚ä½•è®©ä¸åŒçš„ Agent æ— ç¼åä½œã€çŠ¶æ€åŒæ­¥å’Œä»»åŠ¡ç¼–æ’ã€‚</p>
<blockquote>
<p>ğŸ¯ <strong>æ ¸å¿ƒä»·å€¼ä¸»å¼ </strong></p>
<p>è™½ç„¶ ACP è§£å†³äº† Editor â†” Agent çš„æ ‡å‡†åŒ–ï¼ŒMCP è§£å†³äº† Agent â†” Tools çš„æ ‡å‡†åŒ–ï¼Œä½† <strong>Agent â†” Agent</strong> çš„åä½œä»æ˜¯ç©ºç™½åœ°å¸¦ã€‚A2A æ­£æ˜¯ä¸ºå¡«è¡¥è¿™ä¸€ç©ºç™½è€Œç”Ÿã€‚</p>
</blockquote>
<h5 data-id="heading-33"><strong>A2A çš„ä¸‰å¤§è®¾è®¡æ”¯æŸ±</strong></h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A2A["A2A è®¾è®¡å“²å­¦"]

    A2A --&gt; P1["1ï¸âƒ£ Event-Driven Architecture&lt;br/&gt;äº‹ä»¶é©±åŠ¨"]
    A2A --&gt; P2["2ï¸âƒ£ Stateful Task Management&lt;br/&gt;æœ‰çŠ¶æ€ä»»åŠ¡ç®¡ç†"]
    A2A --&gt; P3["3ï¸âƒ£ HTTP + SSE Hybrid Transport&lt;br/&gt;æ··åˆä¼ è¾“"]

    P1 --&gt; P1A["é€šè¿‡ EventBus å®ç°æ¾è€¦åˆ"]
    P1 --&gt; P1B["Agent åªéœ€è®¢é˜…æ„Ÿå…´è¶£çš„äº‹ä»¶"]
    P1 --&gt; P1C["æ”¯æŒæµå¼å’Œå®æ—¶çŠ¶æ€æ›´æ–°"]

    P2 --&gt; P2A["ä»»åŠ¡å¯æŒä¹…åŒ–å’Œæ¢å¤"]
    P2 --&gt; P2B["å®Œæ•´çš„çŠ¶æ€è½¬æ¢å†å²"]
    P2 --&gt; P2C["æ”¯æŒé•¿æ—¶é—´è¿è¡Œçš„å¤æ‚ä»»åŠ¡"]

    P3 --&gt; P3A["HTTP ç”¨äº Request/Response"]
    P3 --&gt; P3B["SSE ç”¨äºå®æ—¶äº‹ä»¶æ¨é€"]
    P3 --&gt; P3C["å¤©ç„¶æ”¯æŒè·¨ç½‘ç»œçš„ Agent åä½œ"]

    style A2A fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    style P1 fill:#fff3e0,stroke:#e65100
    style P2 fill:#f3e5f5,stroke:#4a148c
    style P3 fill:#e8f5e9,stroke:#1b5e20
</code></pre>
<h5 data-id="heading-34"><strong>ä¸ºä»€ä¹ˆéœ€è¦ A2Aï¼Ÿ</strong></h5>






























<table><thead><tr><th>åœºæ™¯</th><th>ä¼ ç»Ÿæ–¹æ¡ˆçš„ç—›ç‚¹</th><th>A2A çš„è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td><strong>Multi-Agent åä½œ</strong></td><td>æ¯ä¸ª Agent ä½¿ç”¨ç§æœ‰ APIï¼Œæ— æ³•äº’æ“ä½œ</td><td>ç»Ÿä¸€çš„ AgentCard + Task API</td></tr><tr><td><strong>é•¿æ—¶é—´ä»»åŠ¡</strong></td><td>åŒæ­¥è°ƒç”¨æ˜“è¶…æ—¶ï¼ŒçŠ¶æ€æ— æ³•è¿½è¸ª</td><td>å¼‚æ­¥ Task + çŠ¶æ€æœºç®¡ç†</td></tr><tr><td><strong>å®æ—¶åé¦ˆ</strong></td><td>åªèƒ½è½®è¯¢æˆ–ç­‰å¾…æœ€ç»ˆç»“æœ</td><td>SSE æµå¼æ¨é€ä¸­é—´çŠ¶æ€</td></tr><tr><td><strong>Agent å‘ç°</strong></td><td>ç¡¬ç¼–ç  Agent åœ°å€å’Œèƒ½åŠ›</td><td>AgentCard åŠ¨æ€å‘ç°å’Œèƒ½åŠ›åå•†</td></tr></tbody></table>
<h4 data-id="heading-35">4.1 A2A æ ¸å¿ƒæ¶æ„ç»„ä»¶</h4>
<h5 data-id="heading-36"><strong>1. AgentCard - Agent èº«ä»½ä¸èƒ½åŠ›å£°æ˜</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/http/app.ts</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">agentCard</span>: <span class="hljs-title class_">AgentCard</span> = {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Gemini SDLC Agent'</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">'Code generation agent with streaming support'</span>,
  <span class="hljs-attr">url</span>: <span class="hljs-string">'http://localhost:41242/'</span>,
  <span class="hljs-attr">protocolVersion</span>: <span class="hljs-string">'0.3.0'</span>,

  <span class="hljs-attr">capabilities</span>: {
    <span class="hljs-attr">streaming</span>: <span class="hljs-literal">true</span>,              <span class="hljs-comment">// æ”¯æŒæµå¼è¾“å‡º</span>
    <span class="hljs-attr">pushNotifications</span>: <span class="hljs-literal">false</span>,     <span class="hljs-comment">// ä¸æ”¯æŒæ¨é€</span>
    <span class="hljs-attr">stateTransitionHistory</span>: <span class="hljs-literal">true</span>  <span class="hljs-comment">// æ”¯æŒçŠ¶æ€å†å²</span>
  },

  <span class="hljs-attr">skills</span>: [
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'code_generation'</span>,
      <span class="hljs-attr">name</span>: <span class="hljs-string">'Code Generation'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'Generate code from natural language'</span>,
      <span class="hljs-attr">tags</span>: [<span class="hljs-string">'code'</span>, <span class="hljs-string">'development'</span>],
      <span class="hljs-attr">inputModes</span>: [<span class="hljs-string">'text'</span>],
      <span class="hljs-attr">outputModes</span>: [<span class="hljs-string">'text'</span>],
      <span class="hljs-attr">examples</span>: [
        <span class="hljs-string">'Write a Python function to calculate fibonacci'</span>,
        <span class="hljs-string">'Create a REST API with authentication'</span>
      ]
    }
  ]
};
</code></pre>
<p><strong>AgentCard çš„å…³é”®å­—æ®µè§£æ</strong>:</p>








































<table><thead><tr><th>å­—æ®µ</th><th>ä½œç”¨</th><th>ç¤ºä¾‹å€¼</th></tr></thead><tbody><tr><td><code>name</code></td><td>Agent çš„å”¯ä¸€æ ‡è¯†ç¬¦</td><td>"Gemini SDLC Agent"</td></tr><tr><td><code>url</code></td><td>Agent çš„ HTTP ç«¯ç‚¹</td><td>"<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A41242%2F" target="_blank" title="http://localhost:41242/" ref="nofollow noopener noreferrer">http://localhost:41242/</a>"</td></tr><tr><td><code>protocolVersion</code></td><td>A2A åè®®ç‰ˆæœ¬</td><td>"0.3.0"</td></tr><tr><td><code>capabilities.streaming</code></td><td>æ˜¯å¦æ”¯æŒ SSE æµå¼è¾“å‡º</td><td><code>true</code></td></tr><tr><td><code>capabilities.stateTransitionHistory</code></td><td>æ˜¯å¦ä¿ç•™çŠ¶æ€å†å²</td><td><code>true</code></td></tr><tr><td><code>skills[]</code></td><td>Agent æ“…é•¿çš„æŠ€èƒ½åˆ—è¡¨</td><td>ä»£ç ç”Ÿæˆã€æµ‹è¯•ã€é‡æ„ç­‰</td></tr></tbody></table>
<h5 data-id="heading-37"><strong>2. ä»»åŠ¡çŠ¶æ€æœº - ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åŸºäº @a2a-js/sdk çš„ TaskState</span>
<span class="hljs-keyword">type</span> <span class="hljs-title class_">TaskState</span> =
  | <span class="hljs-string">'submitted'</span>       <span class="hljs-comment">// å·²æäº¤</span>
  | <span class="hljs-string">'working'</span>         <span class="hljs-comment">// æ‰§è¡Œä¸­</span>
  | <span class="hljs-string">'input-required'</span>  <span class="hljs-comment">// ç­‰å¾…è¾“å…¥</span>
  | <span class="hljs-string">'completed'</span>       <span class="hljs-comment">// å·²å®Œæˆ</span>
  | <span class="hljs-string">'failed'</span>          <span class="hljs-comment">// å¤±è´¥</span>
  | <span class="hljs-string">'canceled'</span>;       <span class="hljs-comment">// å–æ¶ˆ</span>

<span class="hljs-comment">// çŠ¶æ€è½¬æ¢æµç¨‹</span>
submitted â†’ working â†’ input-required â†’ working â†’ completed
                                    â†“
                                  failed
                                    â†“
                                 canceled
</code></pre>
<p><strong>çŠ¶æ€è½¬æ¢è¯¦è§£</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/types.ts</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TaskMetadata</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;                    <span class="hljs-comment">// ä»»åŠ¡å”¯ä¸€ ID</span>
  <span class="hljs-attr">contextId</span>: <span class="hljs-built_in">string</span>;             <span class="hljs-comment">// æ‰€å±ä¼šè¯ ID</span>
  <span class="hljs-attr">taskState</span>: <span class="hljs-title class_">TaskState</span>;          <span class="hljs-comment">// å½“å‰çŠ¶æ€</span>
  <span class="hljs-attr">model</span>: <span class="hljs-built_in">string</span>;                 <span class="hljs-comment">// ä½¿ç”¨çš„ LLM æ¨¡å‹</span>
  <span class="hljs-attr">mcpServers</span>: <span class="hljs-title class_">MCPServerInfo</span>[];   <span class="hljs-comment">// å¯ç”¨çš„ MCP æœåŠ¡å™¨åˆ—è¡¨</span>
  <span class="hljs-attr">availableTools</span>: <span class="hljs-title class_">ToolInfo</span>[];    <span class="hljs-comment">// å¯è°ƒç”¨çš„å·¥å…·åˆ—è¡¨</span>
}

<span class="hljs-comment">// çŠ¶æ€è½¬æ¢è§¦å‘å™¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> {
  <span class="hljs-title function_">setTaskState</span>(<span class="hljs-params">newState: TaskState</span>) {
    <span class="hljs-keyword">const</span> oldState = <span class="hljs-variable language_">this</span>.<span class="hljs-property">metadata</span>.<span class="hljs-property">taskState</span>;
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">metadata</span>.<span class="hljs-property">taskState</span> = newState;

    <span class="hljs-comment">// è®°å½•çŠ¶æ€å†å²ï¼ˆå¦‚æœå¼€å¯ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">capabilities</span>.<span class="hljs-property">stateTransitionHistory</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">stateHistory</span>.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">from</span>: oldState,
        <span class="hljs-attr">to</span>: newState,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
        <span class="hljs-attr">reason</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">transitionReason</span>
      });
    }

    <span class="hljs-comment">// è§¦å‘çŠ¶æ€å˜æ›´äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">publish</span>({
      <span class="hljs-attr">kind</span>: <span class="hljs-title class_">CoderAgentEvent</span>.<span class="hljs-property">StateChangeEvent</span>,
      <span class="hljs-attr">taskId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
      oldState,
      newState,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
    });
  }
}
</code></pre>
<p><strong>å…³é”®çŠ¶æ€è¯´æ˜</strong>:</p>















































<table><thead><tr><th>çŠ¶æ€</th><th>å«ä¹‰</th><th>å…¸å‹æŒç»­æ—¶é—´</th><th>ä¸‹ä¸€çŠ¶æ€</th></tr></thead><tbody><tr><td><code>submitted</code></td><td>ä»»åŠ¡å·²æäº¤ä½†æœªå¼€å§‹æ‰§è¡Œ</td><td>0-50ms</td><td><code>working</code></td></tr><tr><td><code>working</code></td><td>LLM æ­£åœ¨ç”Ÿæˆå“åº”æˆ–æ‰§è¡Œå·¥å…·è°ƒç”¨</td><td>æ•°ç§’åˆ°æ•°åˆ†é’Ÿ</td><td><code>input-required</code> / <code>completed</code> / <code>failed</code></td></tr><tr><td><code>input-required</code></td><td>ç­‰å¾…ç”¨æˆ·ç¡®è®¤å·¥å…·è°ƒç”¨æˆ–æä¾›é¢å¤–è¾“å…¥</td><td>å–å†³äºç”¨æˆ·</td><td><code>working</code> / <code>canceled</code></td></tr><tr><td><code>completed</code></td><td>ä»»åŠ¡æˆåŠŸå®Œæˆ</td><td>ç»ˆæ€</td><td>-</td></tr><tr><td><code>failed</code></td><td>ä»»åŠ¡æ‰§è¡Œå¤±è´¥</td><td>ç»ˆæ€</td><td>-</td></tr><tr><td><code>canceled</code></td><td>ç”¨æˆ·ä¸»åŠ¨å–æ¶ˆ</td><td>ç»ˆæ€</td><td>-</td></tr></tbody></table>
<h5 data-id="heading-38"><strong>3. EventBus - äº‹ä»¶é©±åŠ¨æ ¸å¿ƒ</strong></h5>
<p>A2A çš„ EventBus æ˜¯æ•´ä¸ªç³»ç»Ÿçš„ç¥ç»ä¸­æ¢ï¼Œè´Ÿè´£ï¼š</p>
<ul>
<li>ğŸ“¡ <strong>è§£è€¦ç»„ä»¶</strong>ï¼šAgentã€Taskã€Tool ä¹‹é—´é€šè¿‡äº‹ä»¶é€šä¿¡</li>
<li>ğŸ”„ <strong>æµå¼ä¼ è¾“</strong>ï¼šé€šè¿‡ SSE å®æ—¶æ¨é€äº‹ä»¶åˆ°å®¢æˆ·ç«¯</li>
<li>ğŸ“Š <strong>çŠ¶æ€è¿½è¸ª</strong>ï¼šæ‰€æœ‰çŠ¶æ€å˜åŒ–éƒ½é€šè¿‡äº‹ä»¶è®°å½•</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/agent/executor.ts</span>

<span class="hljs-comment">// EventBus äº‹ä»¶ç±»å‹å®šä¹‰</span>
<span class="hljs-keyword">enum</span> <span class="hljs-title class_">CoderAgentEvent</span> {
  <span class="hljs-title class_">ToolCallConfirmationEvent</span> = <span class="hljs-string">'tool-call-confirmation'</span>,  <span class="hljs-comment">// è¯·æ±‚å·¥å…·ç¡®è®¤</span>
  <span class="hljs-title class_">ToolCallUpdateEvent</span> = <span class="hljs-string">'tool-call-update'</span>,              <span class="hljs-comment">// å·¥å…·è°ƒç”¨çŠ¶æ€æ›´æ–°</span>
  <span class="hljs-title class_">TextContentEvent</span> = <span class="hljs-string">'text-content'</span>,                     <span class="hljs-comment">// LLM ç”Ÿæˆçš„æ–‡æœ¬</span>
  <span class="hljs-title class_">StateChangeEvent</span> = <span class="hljs-string">'state-change'</span>,                     <span class="hljs-comment">// ä»»åŠ¡çŠ¶æ€å˜æ›´</span>
  <span class="hljs-title class_">ThoughtEvent</span> = <span class="hljs-string">'thought'</span>,                              <span class="hljs-comment">// Agent çš„æ€è€ƒè¿‡ç¨‹</span>
}

<span class="hljs-comment">// EventBus å®ç°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ExecutionEventBus</span> {
  <span class="hljs-keyword">private</span> listeners = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">EventListener</span>&gt;&gt;();
  <span class="hljs-keyword">private</span> sseClients = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">SSEClient</span>&gt;();

  <span class="hljs-comment">// å‘å¸ƒäº‹ä»¶</span>
  <span class="hljs-title function_">publish</span>(<span class="hljs-params">event: CoderAgentMessage</span>) {
    <span class="hljs-comment">// 1. é€šçŸ¥æœ¬åœ°ç›‘å¬å™¨</span>
    <span class="hljs-keyword">const</span> listeners = <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(event.<span class="hljs-property">kind</span>) || <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    listeners.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">listener</span> =&gt;</span> <span class="hljs-title function_">listener</span>(event));

    <span class="hljs-comment">// 2. é€šè¿‡ SSE æ¨é€ç»™å®¢æˆ·ç«¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseClients</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">client</span> =&gt;</span> {
      client.<span class="hljs-title function_">send</span>({
        <span class="hljs-attr">event</span>: event.<span class="hljs-property">kind</span>,
        <span class="hljs-attr">data</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(event)
      });
    });

    <span class="hljs-comment">// 3. æŒä¹…åŒ–åˆ°æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">persistenceEnabled</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">saveEvent</span>(event);
    }
  }

  <span class="hljs-comment">// è®¢é˜…äº‹ä»¶</span>
  <span class="hljs-title function_">subscribe</span>(<span class="hljs-params">eventType: CoderAgentEvent, listener: EventListener</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">has</span>(eventType)) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">set</span>(eventType, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>());
    }
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">listeners</span>.<span class="hljs-title function_">get</span>(eventType)!.<span class="hljs-title function_">add</span>(listener);
  }

  <span class="hljs-comment">// æ·»åŠ  SSE å®¢æˆ·ç«¯</span>
  <span class="hljs-title function_">addSSEClient</span>(<span class="hljs-params">client: SSEClient</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sseClients</span>.<span class="hljs-title function_">add</span>(client);

    <span class="hljs-comment">// å‘é€å†å²äº‹ä»¶ï¼ˆå¦‚æœéœ€è¦ï¼‰</span>
    <span class="hljs-keyword">if</span> (client.<span class="hljs-property">wantsHistory</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">replayEvents</span>(client);
    }
  }
}
</code></pre>
<p><strong>EventBus æµå¼å·¥ä½œæµç¨‹</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph LLM["LLM Stream å¤„ç†æµç¨‹"]
        Stream["LLM Stream"] --&gt; Chunk1["Chunk 1"]
        Stream --&gt; Chunk2["Chunk 2"]
        Stream --&gt; Chunk3["Chunk 3"]
        Stream --&gt; ToolCall["Tool Call"]

        Chunk1 --&gt; Publish1["EventBus.publish(TextContent)"]
        Chunk2 --&gt; Publish1
        Chunk3 --&gt; Publish1
        ToolCall --&gt; Publish1

        Publish1 --&gt; Local["Local Listeners"]
        Publish1 --&gt; SSE["SSE Clients&lt;br/&gt;(å®æ—¶æ¨é€)"]
        Publish1 --&gt; Persist["Persistence Layer"]

        style LLM fill:#e3f2fd,stroke:#1565c0
    end

    subgraph Tool["Tool Execution å¤„ç†æµç¨‹"]
        ToolExec["Tool Execution"] --&gt; ConfReq["Confirmation Request"]
        ConfReq --&gt; Publish2["EventBus.publish()"]

        UserApproval["User Approval"] --&gt; SetState["setState(working)"]

        ToolResult["Tool Result"] --&gt; Publish3["EventBus.publish()"]

        style Tool fill:#fff3e0,stroke:#e65100
    end

    style Publish1 fill:#c8e6c9,stroke:#2e7d32
    style Publish2 fill:#c8e6c9,stroke:#2e7d32
    style Publish3 fill:#c8e6c9,stroke:#2e7d32
</code></pre>
<h5 data-id="heading-39"><strong>4. æ ¸å¿ƒæ‰§è¡Œå™¨ - ç¼–æ’å¼•æ“</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/agent/executor.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoderAgentExecutor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">AgentExecutor</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">execute</span>(<span class="hljs-params">requestContext: RequestContext, eventBus: ExecutionEventBus</span>) {
    <span class="hljs-keyword">const</span> { userMessage, task } = requestContext;

    <span class="hljs-comment">// 1. è·å–æˆ–åˆ›å»ºä»»åŠ¡</span>
    <span class="hljs-keyword">let</span> wrapper = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">get</span>(taskId) || <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createTask</span>(taskId);

    <span class="hljs-comment">// 2. è®¾ç½®çŠ¶æ€ä¸º working</span>
    wrapper.<span class="hljs-property">task</span>.<span class="hljs-title function_">setTaskState</span>(<span class="hljs-string">'working'</span>);
    eventBus.<span class="hljs-title function_">publish</span>({
      <span class="hljs-attr">kind</span>: <span class="hljs-string">'status-update'</span>,
      taskId,
      <span class="hljs-attr">status</span>: { <span class="hljs-attr">state</span>: <span class="hljs-string">'working'</span> },
      <span class="hljs-attr">final</span>: <span class="hljs-literal">false</span>
    });

    <span class="hljs-comment">// 3. è°ƒç”¨ LLM</span>
    <span class="hljs-keyword">const</span> agentEvents = wrapper.<span class="hljs-property">task</span>.<span class="hljs-property">geminiClient</span>.<span class="hljs-title function_">sendMessageStream</span>(
      userMessage.<span class="hljs-property">parts</span>,
      abortSignal
    );

    <span class="hljs-comment">// 4. å¤„ç† Agent å“åº”</span>
    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> event <span class="hljs-keyword">of</span> agentEvents) {
      <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-string">'tool_call_request'</span>) {
        <span class="hljs-comment">// è°ƒåº¦å·¥å…·æ‰§è¡Œ</span>
        <span class="hljs-keyword">await</span> wrapper.<span class="hljs-property">task</span>.<span class="hljs-title function_">scheduleToolCalls</span>(event.<span class="hljs-property">toolCalls</span>);
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (event.<span class="hljs-property">type</span> === <span class="hljs-string">'content'</span>) {
        <span class="hljs-comment">// å‘å¸ƒæ–‡æœ¬å†…å®¹</span>
        eventBus.<span class="hljs-title function_">publish</span>({
          <span class="hljs-attr">kind</span>: <span class="hljs-string">'status-update'</span>,
          <span class="hljs-attr">status</span>: {
            <span class="hljs-attr">state</span>: <span class="hljs-string">'working'</span>,
            <span class="hljs-attr">message</span>: { <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">kind</span>: <span class="hljs-string">'text'</span>, <span class="hljs-attr">text</span>: event.<span class="hljs-property">content</span> }] }
          }
        });
      }
    }

    <span class="hljs-comment">// 5. ç­‰å¾…å·¥å…·æ‰§è¡Œå®Œæˆ</span>
    <span class="hljs-keyword">await</span> wrapper.<span class="hljs-property">task</span>.<span class="hljs-title function_">waitForPendingTools</span>();

    <span class="hljs-comment">// 6. è®¾ç½®çŠ¶æ€ä¸º input-required</span>
    wrapper.<span class="hljs-property">task</span>.<span class="hljs-title function_">setTaskState</span>(<span class="hljs-string">'input-required'</span>);
    eventBus.<span class="hljs-title function_">publish</span>({
      <span class="hljs-attr">kind</span>: <span class="hljs-string">'status-update'</span>,
      <span class="hljs-attr">status</span>: { <span class="hljs-attr">state</span>: <span class="hljs-string">'input-required'</span> },
      <span class="hljs-attr">final</span>: <span class="hljs-literal">true</span>
    });
  }
}
</code></pre>
<p><strong>æ‰§è¡Œå™¨çš„æ ¸å¿ƒèŒè´£</strong>:</p>
<ol>
<li>ğŸ“ <strong>ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸç®¡ç†</strong>ï¼šä» submitted åˆ°ç»ˆæ€çš„å®Œæ•´æµç¨‹æ§åˆ¶</li>
<li>ğŸ”„ <strong>æµå¼å“åº”å¤„ç†</strong>ï¼šå®æ—¶å¤„ç† LLM çš„ streaming output</li>
<li>ğŸ› ï¸ <strong>å·¥å…·è°ƒåº¦ç¼–æ’</strong>ï¼šç®¡ç†å¹¶å‘çš„å·¥å…·è°ƒç”¨è¯·æ±‚</li>
<li>ğŸ“¡ <strong>äº‹ä»¶å‘å¸ƒ</strong>ï¼šå°†æ‰€æœ‰çŠ¶æ€å˜åŒ–é€šè¿‡ EventBus å¹¿æ’­</li>
<li>ğŸ’¾ <strong>çŠ¶æ€æŒä¹…åŒ–</strong>ï¼šæ”¯æŒä»»åŠ¡æš‚åœå’Œæ¢å¤</li>
</ol>
<h5 data-id="heading-40"><strong>5. Tool Scheduling - å·¥å…·è°ƒåº¦æœºåˆ¶</strong></h5>
<p>A2A çš„å·¥å…·è°ƒåº¦æ˜¯å…¶æ ¸å¿ƒèƒ½åŠ›ä¹‹ä¸€ï¼Œæ”¯æŒï¼š</p>
<ul>
<li>âš¡ <strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼šå¤šä¸ªå·¥å…·å¯ä»¥å¹¶è¡Œè°ƒç”¨</li>
<li>ğŸ”„ <strong>ä¾èµ–ç®¡ç†</strong>ï¼šè‡ªåŠ¨å¤„ç†å·¥å…·é—´çš„ä¾èµ–å…³ç³»</li>
<li>â¸ï¸ <strong>æš‚åœ/æ¢å¤</strong>ï¼šå¯ä»¥ä¸­æ–­å·¥å…·æ‰§è¡Œå¹¶ç¨åæ¢å¤</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/agent/task.ts</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> {
  <span class="hljs-keyword">private</span> pendingTools = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">ToolExecution</span>&gt;();
  <span class="hljs-keyword">private</span> <span class="hljs-attr">toolQueue</span>: <span class="hljs-title class_">ToolCall</span>[] = [];

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">scheduleToolCalls</span>(<span class="hljs-params">toolCalls: ToolCall[]</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> toolCall <span class="hljs-keyword">of</span> toolCalls) {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">execution</span>: <span class="hljs-title class_">ToolExecution</span> = {
        <span class="hljs-attr">id</span>: toolCall.<span class="hljs-property">id</span>,
        <span class="hljs-attr">toolName</span>: toolCall.<span class="hljs-property">name</span>,
        <span class="hljs-attr">args</span>: toolCall.<span class="hljs-property">arguments</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">'pending'</span>,
        <span class="hljs-attr">startTime</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">endTime</span>: <span class="hljs-literal">null</span>,
        <span class="hljs-attr">result</span>: <span class="hljs-literal">null</span>
      };

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingTools</span>.<span class="hljs-title function_">set</span>(toolCall.<span class="hljs-property">id</span>, execution);

      <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦éœ€è¦ç”¨æˆ·ç¡®è®¤</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">shouldConfirmTool</span>(toolCall.<span class="hljs-property">name</span>)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">publish</span>({
          <span class="hljs-attr">kind</span>: <span class="hljs-title class_">CoderAgentEvent</span>.<span class="hljs-property">ToolCallConfirmationEvent</span>,
          <span class="hljs-attr">taskId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
          <span class="hljs-attr">toolCall</span>: {
            <span class="hljs-attr">id</span>: toolCall.<span class="hljs-property">id</span>,
            <span class="hljs-attr">name</span>: toolCall.<span class="hljs-property">name</span>,
            <span class="hljs-attr">arguments</span>: toolCall.<span class="hljs-property">arguments</span>,
            <span class="hljs-attr">description</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getToolDescription</span>(toolCall.<span class="hljs-property">name</span>)
          }
        });
        execution.<span class="hljs-property">status</span> = <span class="hljs-string">'awaiting_confirmation'</span>;
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// è‡ªåŠ¨æ‰¹å‡†ï¼Œç«‹å³æ‰§è¡Œ</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">executeToolCall</span>(toolCall);
      }
    }
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeToolCall</span>(<span class="hljs-params">toolCall: ToolCall</span>) {
    <span class="hljs-keyword">const</span> execution = <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingTools</span>.<span class="hljs-title function_">get</span>(toolCall.<span class="hljs-property">id</span>)!;
    execution.<span class="hljs-property">status</span> = <span class="hljs-string">'running'</span>;
    execution.<span class="hljs-property">startTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

    <span class="hljs-comment">// å‘å¸ƒå¼€å§‹äº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">publish</span>({
      <span class="hljs-attr">kind</span>: <span class="hljs-title class_">CoderAgentEvent</span>.<span class="hljs-property">ToolCallUpdateEvent</span>,
      <span class="hljs-attr">taskId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
      <span class="hljs-attr">toolCallId</span>: toolCall.<span class="hljs-property">id</span>,
      <span class="hljs-attr">status</span>: <span class="hljs-string">'running'</span>
    });

    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨ MCP å·¥å…·</span>
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">mcpClient</span>.<span class="hljs-title function_">callTool</span>(
        toolCall.<span class="hljs-property">name</span>,
        toolCall.<span class="hljs-property">arguments</span>
      );

      execution.<span class="hljs-property">status</span> = <span class="hljs-string">'completed'</span>;
      execution.<span class="hljs-property">result</span> = result;
      execution.<span class="hljs-property">endTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

      <span class="hljs-comment">// å‘å¸ƒå®Œæˆäº‹ä»¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">publish</span>({
        <span class="hljs-attr">kind</span>: <span class="hljs-title class_">CoderAgentEvent</span>.<span class="hljs-property">ToolCallUpdateEvent</span>,
        <span class="hljs-attr">taskId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
        <span class="hljs-attr">toolCallId</span>: toolCall.<span class="hljs-property">id</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">'completed'</span>,
        <span class="hljs-attr">result</span>: result,
        <span class="hljs-attr">duration</span>: execution.<span class="hljs-property">endTime</span> - execution.<span class="hljs-property">startTime</span>
      });

      <span class="hljs-comment">// ä» pending ç§»é™¤</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingTools</span>.<span class="hljs-title function_">delete</span>(toolCall.<span class="hljs-property">id</span>);

    } <span class="hljs-keyword">catch</span> (error) {
      execution.<span class="hljs-property">status</span> = <span class="hljs-string">'failed'</span>;
      execution.<span class="hljs-property">error</span> = error.<span class="hljs-property">message</span>;
      execution.<span class="hljs-property">endTime</span> = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventBus</span>.<span class="hljs-title function_">publish</span>({
        <span class="hljs-attr">kind</span>: <span class="hljs-title class_">CoderAgentEvent</span>.<span class="hljs-property">ToolCallUpdateEvent</span>,
        <span class="hljs-attr">taskId</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>,
        <span class="hljs-attr">toolCallId</span>: toolCall.<span class="hljs-property">id</span>,
        <span class="hljs-attr">status</span>: <span class="hljs-string">'failed'</span>,
        <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span>
      });

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingTools</span>.<span class="hljs-title function_">delete</span>(toolCall.<span class="hljs-property">id</span>);
    }
  }

  <span class="hljs-comment">// ç­‰å¾…æ‰€æœ‰å¾…å¤„ç†çš„å·¥å…·å®Œæˆ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">waitForPendingTools</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; {
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">pendingTools</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">100</span>));
    }
  }
}
</code></pre>
<p><strong>å·¥å…·è°ƒåº¦æµç¨‹å›¾</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    LLM["LLM: I need to call tools A, B, C"] --&gt; Schedule["scheduleToolCalls([A, B, C])"]

    Schedule --&gt; ToolA["Tool A: Auto-approved"]
    Schedule --&gt; ToolB["Tool B: Needs confirmation"]
    Schedule --&gt; ToolC["Tool C: Auto-approved"]

    ToolA --&gt; ExecA["executeToolCall(A)"]
    ExecA --&gt; MCPA["MCP Server"]

    ToolB --&gt; ConfEvent["Publish ConfirmationEvent"]
    ConfEvent --&gt; WaitApproval["Wait for user approval"]
    WaitApproval --&gt; ExecB["executeToolCall(B)"]
    ExecB --&gt; MCPB["MCP Server"]

    ToolC --&gt; ExecC["executeToolCall(C)"]
    ExecC --&gt; MCPC["MCP Server"]

    MCPA --&gt; Complete["All tools completed"]
    MCPB --&gt; Complete
    MCPC --&gt; Complete

    Complete --&gt; Continue["LLM continues"]

    style LLM fill:#e1f5fe,stroke:#01579b
    style Schedule fill:#fff3e0,stroke:#e65100
    style ToolA fill:#c8e6c9,stroke:#2e7d32
    style ToolB fill:#ffcdd2,stroke:#c62828
    style ToolC fill:#c8e6c9,stroke:#2e7d32
    style Complete fill:#e1bee7,stroke:#6a1b9a
    style Continue fill:#e1f5fe,stroke:#01579b

    %% æ³¨é‡Šï¼šA å’Œ C å¹¶å‘æ‰§è¡Œï¼ŒB éœ€è¦ç­‰å¾…ç¡®è®¤
</code></pre>
<h4 data-id="heading-41">4.2 A2A ä¸ MCP çš„æ·±åº¦é›†æˆ</h4>
<p>A2A å¹¶éå­¤ç«‹åè®®ï¼Œå®ƒå·§å¦™åœ°å°† MCP æ•´åˆä¸ºåº•å±‚å·¥å…·å±‚ï¼Œå½¢æˆ<strong>ä¸¤å±‚åè®®æ ˆ</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    subgraph Layer3["Layer 3: Agent Orchestration (A2A)"]
        A3A["Agent discovery&lt;br/&gt;(AgentCard)"]
        A3B["Task management&lt;br/&gt;(TaskState)"]
        A3C["Event streaming&lt;br/&gt;(EventBus + SSE)"]

        style Layer3 fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    end

    subgraph Layer2["Layer 2: Tool Interface (MCP)"]
        A2A["Tool discovery&lt;br/&gt;(tools/list)"]
        A2B["Tool execution&lt;br/&gt;(tools/call)"]
        A2C["Resource access&lt;br/&gt;(resources/read)"]

        style Layer2 fill:#fff3e0,stroke:#e65100,stroke-width:2px
    end

    subgraph Layer1["Layer 1: Transport Layer"]
        A1A["JSON-RPC 2.0&lt;br/&gt;(for MCP)"]
        A1B["HTTP + SSE&lt;br/&gt;(for A2A)"]
        A1C["stdio / HTTP / SSE"]

        style Layer1 fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    end

    Layer3 --&gt; Layer2
    Layer2 --&gt; Layer1

    style A3A fill:#b3e5fc,stroke:#01579b
    style A3B fill:#b3e5fc,stroke:#01579b
    style A3C fill:#b3e5fc,stroke:#01579b
    style A2A fill:#ffe0b2,stroke:#e65100
    style A2B fill:#ffe0b2,stroke:#e65100
    style A2C fill:#ffe0b2,stroke:#e65100
</code></pre>
<p><strong>é›†æˆå®ç°ç»†èŠ‚</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// packages/a2a-server/src/agent/task.ts</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Task</span> {
  <span class="hljs-keyword">private</span> mcpClients = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">McpClient</span>&gt;();

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">initializeMCPServers</span>(<span class="hljs-params">serverConfigs: MCPServerConfig[]</span>) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> config <span class="hljs-keyword">of</span> serverConfigs) {
      <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">McpClient</span>(config);

      <span class="hljs-comment">// è¿æ¥åˆ° MCP Server</span>
      <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">connect</span>();

      <span class="hljs-comment">// è·å–å·¥å…·åˆ—è¡¨</span>
      <span class="hljs-keyword">const</span> tools = <span class="hljs-keyword">await</span> client.<span class="hljs-title function_">listTools</span>();

      <span class="hljs-comment">// æ³¨å†Œåˆ°ä»»åŠ¡çš„å¯ç”¨å·¥å…·</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> tool <span class="hljs-keyword">of</span> tools) {
        <span class="hljs-keyword">const</span> qualifiedName = <span class="hljs-string">`mcp__<span class="hljs-subst">${config.name}</span>__<span class="hljs-subst">${tool.name}</span>`</span>;
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">availableTools</span>.<span class="hljs-title function_">set</span>(qualifiedName, {
          <span class="hljs-attr">originalName</span>: tool.<span class="hljs-property">name</span>,
          <span class="hljs-attr">serverName</span>: config.<span class="hljs-property">name</span>,
          <span class="hljs-attr">description</span>: tool.<span class="hljs-property">description</span>,
          <span class="hljs-attr">parameterSchema</span>: tool.<span class="hljs-property">inputSchema</span>,
          <span class="hljs-attr">mcpClient</span>: client
        });
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">mcpClients</span>.<span class="hljs-title function_">set</span>(config.<span class="hljs-property">name</span>, client);
    }

    <span class="hljs-comment">// é€šçŸ¥ LLM å¯ç”¨çš„å·¥å…·åˆ—è¡¨ï¼ˆé€šè¿‡ Gemini Function Callingï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">geminiClient</span>.<span class="hljs-title function_">updateTools</span>(
      <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">availableTools</span>.<span class="hljs-title function_">values</span>()).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">tool</span> =&gt;</span> ({
        <span class="hljs-attr">name</span>: tool.<span class="hljs-property">originalName</span>,  <span class="hljs-comment">// Gemini çœ‹åˆ°çš„æ˜¯åŸå§‹åç§°</span>
        <span class="hljs-attr">description</span>: tool.<span class="hljs-property">description</span>,
        <span class="hljs-attr">parameters</span>: tool.<span class="hljs-property">parameterSchema</span>
      }))
    );
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">callTool</span>(<span class="hljs-attr">toolName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; {
    <span class="hljs-comment">// ä»qualified name è§£æ server å’Œ tool</span>
    <span class="hljs-keyword">const</span> [_, serverName, originalToolName] = toolName.<span class="hljs-title function_">split</span>(<span class="hljs-string">'__'</span>);

    <span class="hljs-keyword">const</span> toolInfo = <span class="hljs-variable language_">this</span>.<span class="hljs-property">availableTools</span>.<span class="hljs-title function_">get</span>(toolName);
    <span class="hljs-keyword">if</span> (!toolInfo) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Tool <span class="hljs-subst">${toolName}</span> not found`</span>);
    }

    <span class="hljs-comment">// è°ƒç”¨ MCP Server</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> toolInfo.<span class="hljs-property">mcpClient</span>.<span class="hljs-title function_">callTool</span>(
      originalToolName,
      args
    );

    <span class="hljs-keyword">return</span> result;
  }
}
</code></pre>
<p><strong>å·¥å…·åç§°è½¬æ¢ç­–ç•¥</strong>:</p>






























<table><thead><tr><th>å±‚çº§</th><th>å·¥å…·åç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>MCP Server</strong></td><td><code>read_file</code></td><td>MCP åŸç”Ÿå·¥å…·å</td></tr><tr><td><strong>A2A å†…éƒ¨å­˜å‚¨</strong></td><td><code>mcp__filesystem__read_file</code></td><td>å¸¦å‘½åç©ºé—´çš„é™å®šå</td></tr><tr><td><strong>Gemini LLM</strong></td><td><code>read_file</code></td><td>LLM çœ‹åˆ°çš„ç®€åŒ–åï¼ˆé€šè¿‡ description åŒºåˆ†ï¼‰</td></tr><tr><td><strong>ç”¨æˆ·ç•Œé¢</strong></td><td>"è¯»å–æ–‡ä»¶ (filesystem)"</td><td>ç”¨æˆ·å‹å¥½çš„æ˜¾ç¤ºå</td></tr></tbody></table>
<h4 data-id="heading-42">4.3 A2A å®æˆ˜æ¡ˆä¾‹ï¼šMulti-Agent åä½œç³»ç»Ÿ</h4>
<h5 data-id="heading-43"><strong>åœºæ™¯ï¼šAI é©±åŠ¨çš„å…¨æ ˆåº”ç”¨å¼€å‘</strong></h5>
<p>å‡è®¾æˆ‘ä»¬è¦å¼€å‘ä¸€ä¸ªåŒ…å«å‰ç«¯ã€åç«¯ã€æ•°æ®åº“çš„å®Œæ•´åº”ç”¨ã€‚ä¼ ç»Ÿæ–¹å¼æ˜¯å•ä¸ª Agent å®Œæˆæ‰€æœ‰å·¥ä½œï¼Œä½†ä½¿ç”¨ A2A å¯ä»¥è®©ä¸“ä¸š Agent åä½œï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createAgent, <span class="hljs-title class_">AgentOrchestrator</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@a2a-js/sdk'</span>;

<span class="hljs-comment">// 1. å®šä¹‰ä¸“ä¸š Agent å›¢é˜Ÿ</span>
<span class="hljs-keyword">const</span> agents = {
  <span class="hljs-comment">// å‰ç«¯ä¸“å®¶</span>
  <span class="hljs-attr">frontendAgent</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Frontend Specialist'</span>,
    <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://localhost:8001/api'</span>,
    <span class="hljs-attr">skills</span>: [<span class="hljs-string">'react'</span>, <span class="hljs-string">'typescript'</span>, <span class="hljs-string">'css'</span>, <span class="hljs-string">'ui-design'</span>]
  }),

  <span class="hljs-comment">// åç«¯ä¸“å®¶</span>
  <span class="hljs-attr">backendAgent</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Backend Specialist'</span>,
    <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://localhost:8002/api'</span>,
    <span class="hljs-attr">skills</span>: [<span class="hljs-string">'nodejs'</span>, <span class="hljs-string">'express'</span>, <span class="hljs-string">'api-design'</span>, <span class="hljs-string">'authentication'</span>]
  }),

  <span class="hljs-comment">// æ•°æ®åº“ä¸“å®¶</span>
  <span class="hljs-attr">databaseAgent</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'Database Specialist'</span>,
    <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://localhost:8003/api'</span>,
    <span class="hljs-attr">skills</span>: [<span class="hljs-string">'postgresql'</span>, <span class="hljs-string">'schema-design'</span>, <span class="hljs-string">'migrations'</span>, <span class="hljs-string">'optimization'</span>]
  }),

  <span class="hljs-comment">// æµ‹è¯•ä¸“å®¶</span>
  <span class="hljs-attr">testAgent</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'QA Specialist'</span>,
    <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://localhost:8004/api'</span>,
    <span class="hljs-attr">skills</span>: [<span class="hljs-string">'jest'</span>, <span class="hljs-string">'e2e-testing'</span>, <span class="hljs-string">'test-strategy'</span>]
  })
};

<span class="hljs-comment">// 2. åˆ›å»ºç¼–æ’å™¨</span>
<span class="hljs-keyword">const</span> orchestrator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentOrchestrator</span>(agents);

<span class="hljs-comment">// 3. å®šä¹‰å·¥ä½œæµ</span>
<span class="hljs-keyword">const</span> workflow = orchestrator.<span class="hljs-title function_">defineWorkflow</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'Build E-Commerce App'</span>,

  <span class="hljs-attr">steps</span>: [
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'design-schema'</span>,
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'databaseAgent'</span>,
      <span class="hljs-attr">task</span>: <span class="hljs-string">'è®¾è®¡ç”µå•†åº”ç”¨çš„æ•°æ®åº“ schemaï¼ŒåŒ…æ‹¬ç”¨æˆ·ã€äº§å“ã€è®¢å•è¡¨'</span>,
      <span class="hljs-attr">dependencies</span>: []
    },
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'create-migrations'</span>,
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'databaseAgent'</span>,
      <span class="hljs-attr">task</span>: <span class="hljs-string">'åˆ›å»ºæ•°æ®åº“è¿ç§»æ–‡ä»¶'</span>,
      <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'design-schema'</span>]
    },
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'build-api'</span>,
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'backendAgent'</span>,
      <span class="hljs-attr">task</span>: <span class="hljs-string">'åŸºäºæ•°æ®åº“ schema æ„å»º REST APIï¼ŒåŒ…æ‹¬ CRUD å’Œè®¤è¯'</span>,
      <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'design-schema'</span>],
      <span class="hljs-attr">inputs</span>: {
        <span class="hljs-attr">schema</span>: <span class="hljs-string">'{{ steps.design-schema.result.schema }}'</span>
      }
    },
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'build-frontend'</span>,
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'frontendAgent'</span>,
      <span class="hljs-attr">task</span>: <span class="hljs-string">'æ„å»º React å‰ç«¯ï¼Œè¿æ¥åˆ° API'</span>,
      <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'build-api'</span>],
      <span class="hljs-attr">inputs</span>: {
        <span class="hljs-attr">apiSpec</span>: <span class="hljs-string">'{{ steps.build-api.result.openapi }}'</span>
      }
    },
    {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'write-tests'</span>,
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'testAgent'</span>,
      <span class="hljs-attr">task</span>: <span class="hljs-string">'ç¼–å†™ç«¯åˆ°ç«¯æµ‹è¯•'</span>,
      <span class="hljs-attr">dependencies</span>: [<span class="hljs-string">'build-frontend'</span>, <span class="hljs-string">'build-api'</span>]
    }
  ]
});

<span class="hljs-comment">// 4. æ‰§è¡Œå·¥ä½œæµï¼ˆæ”¯æŒæµå¼ç›‘æ§ï¼‰</span>
<span class="hljs-keyword">const</span> execution = <span class="hljs-keyword">await</span> orchestrator.<span class="hljs-title function_">execute</span>(workflow);

<span class="hljs-comment">// 5. è®¢é˜…äº‹ä»¶ï¼Œå®æ—¶ç›‘æ§è¿›åº¦</span>
execution.<span class="hljs-title function_">on</span>(<span class="hljs-string">'step-started'</span>, <span class="hljs-function">(<span class="hljs-params">{ stepId, agent }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ¨ <span class="hljs-subst">${agent}</span> å¼€å§‹å·¥ä½œ: <span class="hljs-subst">${stepId}</span>`</span>);
});

execution.<span class="hljs-title function_">on</span>(<span class="hljs-string">'step-progress'</span>, <span class="hljs-function">(<span class="hljs-params">{ stepId, progress }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`â³ <span class="hljs-subst">${stepId}</span>: <span class="hljs-subst">${progress.message}</span>`</span>);
});

execution.<span class="hljs-title function_">on</span>(<span class="hljs-string">'step-completed'</span>, <span class="hljs-function">(<span class="hljs-params">{ stepId, result, duration }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`âœ… <span class="hljs-subst">${stepId}</span> å®Œæˆ (è€—æ—¶: <span class="hljs-subst">${duration}</span>ms)`</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`   è¾“å‡º: <span class="hljs-subst">${result.summary}</span>`</span>);
});

execution.<span class="hljs-title function_">on</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">(<span class="hljs-params">{ stepId, error }</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`âŒ <span class="hljs-subst">${stepId}</span> å¤±è´¥: <span class="hljs-subst">${error.message}</span>`</span>);
});

<span class="hljs-comment">// ç­‰å¾…å®Œæˆ</span>
<span class="hljs-keyword">const</span> finalResult = <span class="hljs-keyword">await</span> execution.<span class="hljs-title function_">complete</span>();

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ‰ å…¨æ ˆåº”ç”¨å¼€å‘å®Œæˆï¼'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ€»è€—æ—¶: <span class="hljs-subst">${finalResult.totalDuration}</span>ms`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ›å»ºçš„æ–‡ä»¶æ•°: <span class="hljs-subst">${finalResult.filesCreated}</span>`</span>);
</code></pre>
<p><strong>å·¥ä½œæµæ‰§è¡Œæ—¶é—´çº¿</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile">Time  Agent              Event
â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="hljs-section">00:00 DatabaseAgent     âœ¨ å¼€å§‹è®¾è®¡ schema</span>
<span class="hljs-section">00:05 DatabaseAgent       â³ æ­£åœ¨åˆ†æç”µå•†é¢†åŸŸæ¨¡å‹...</span>
<span class="hljs-section">00:15 DatabaseAgent       â³ ç”Ÿæˆç”¨æˆ·è¡¨ schema...</span>
<span class="hljs-section">00:25 DatabaseAgent       â³ ç”Ÿæˆäº§å“è¡¨ schema...</span>
<span class="hljs-section">00:35 DatabaseAgent     âœ… Schema è®¾è®¡å®Œæˆ</span>

<span class="hljs-section">00:35 DatabaseAgent     âœ¨ å¼€å§‹åˆ›å»ºè¿ç§»æ–‡ä»¶</span>
<span class="hljs-section">00:38 DatabaseAgent       â³ ç”Ÿæˆ SQL migration...</span>
<span class="hljs-section">00:42 DatabaseAgent     âœ… è¿ç§»æ–‡ä»¶åˆ›å»ºå®Œæˆ</span>

<span class="hljs-section">00:42 BackendAgent      âœ¨ å¼€å§‹æ„å»º API</span>
<span class="hljs-section">00:45 BackendAgent        â³ è®¾ç½® Express server...</span>
<span class="hljs-section">00:50 BackendAgent        â³ ç”Ÿæˆ CRUD endpoints...</span>
<span class="hljs-section">01:05 BackendAgent        â³ å®ç° JWT è®¤è¯...</span>
<span class="hljs-section">01:20 BackendAgent      âœ… API æ„å»ºå®Œæˆ</span>

<span class="hljs-section">01:20 FrontendAgent     âœ¨ å¼€å§‹æ„å»ºå‰ç«¯</span>
<span class="hljs-section">01:25 FrontendAgent       â³ åˆ›å»º React é¡¹ç›®ç»“æ„...</span>
<span class="hljs-section">01:35 FrontendAgent       â³ ç”Ÿæˆç»„ä»¶ä»£ç ...</span>
<span class="hljs-section">01:50 FrontendAgent       â³ é›†æˆ API client...</span>
<span class="hljs-section">02:10 FrontendAgent     âœ… å‰ç«¯æ„å»ºå®Œæˆ</span>

<span class="hljs-section">02:10 TestAgent         âœ¨ å¼€å§‹ç¼–å†™æµ‹è¯•</span>
<span class="hljs-section">02:15 TestAgent           â³ ç”Ÿæˆ E2E æµ‹è¯•åœºæ™¯...</span>
<span class="hljs-section">02:30 TestAgent           â³ ç¼–å†™æµ‹è¯•ä»£ç ...</span>
<span class="hljs-section">02:45 TestAgent         âœ… æµ‹è¯•å®Œæˆ</span>

ğŸ‰ å…¨æ ˆåº”ç”¨å¼€å‘å®Œæˆï¼
<span class="hljs-section">æ€»è€—æ—¶: 165ç§’</span>
<span class="hljs-section">åˆ›å»ºçš„æ–‡ä»¶æ•°: 47</span>
<span class="hljs-section">æµ‹è¯•é€šè¿‡ç‡: 100%</span>
</code></pre>
<h4 data-id="heading-44">4.4 A2A çš„æ ¸å¿ƒä¼˜åŠ¿</h4>
<p>ä¸å…¶ä»–åè®®ç›¸æ¯”ï¼ŒA2A åœ¨ä»¥ä¸‹æ–¹é¢å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ï¼š</p>













































<table><thead><tr><th>ä¼˜åŠ¿</th><th>å…·ä½“è¡¨ç°</th><th>å¯¹æ¯” ACP/MCP</th></tr></thead><tbody><tr><td><strong>ğŸ”„ çœŸæ­£çš„æµå¼ä½“éªŒ</strong></td><td>é€šè¿‡ SSE å®æ—¶æ¨é€ LLM ç”Ÿæˆçš„æ¯ä¸ª token</td><td>ACP ä¹Ÿæ”¯æŒæµå¼ï¼ŒMCP ä¸æ”¯æŒ</td></tr><tr><td><strong>ğŸ“Š å®Œæ•´çŠ¶æ€ç®¡ç†</strong></td><td>6 ç§çŠ¶æ€ + çŠ¶æ€è½¬æ¢å†å²</td><td>ACP æœ‰ä¼šè¯çŠ¶æ€ï¼ŒMCP æ— çŠ¶æ€</td></tr><tr><td><strong>ğŸ”Œ Multi-Agent æ”¯æŒ</strong></td><td>åŸç”Ÿæ”¯æŒ Agent å‘ç°å’Œåä½œ</td><td>ACP ä¸“æ³¨ Editor-Agentï¼ŒMCP æ— æ­¤æ¦‚å¿µ</td></tr><tr><td><strong>ğŸ› ï¸ MCP é›†æˆ</strong></td><td>æ— ç¼å¤ç”¨æ•´ä¸ª MCP ç”Ÿæ€çš„å·¥å…·</td><td>ACP ä¹Ÿæ”¯æŒ MCPï¼Œä½†æœªæ·±åº¦é›†æˆ</td></tr><tr><td><strong>âš¡ å¹¶å‘å·¥å…·è°ƒç”¨</strong></td><td>å¯åŒæ—¶æ‰§è¡Œå¤šä¸ªå·¥å…·ï¼Œå¤§å¹…æå‡æ•ˆç‡</td><td>MCP ä¹Ÿæ”¯æŒï¼Œä½†éœ€è¦è‡ªè¡Œå®ç°å¹¶å‘æ§åˆ¶</td></tr><tr><td><strong>ğŸ’¾ ä»»åŠ¡æŒä¹…åŒ–</strong></td><td>æ”¯æŒæš‚åœä»»åŠ¡ï¼Œç¨åä»æ–­ç‚¹æ¢å¤</td><td>ACP æ”¯æŒ session åŠ è½½ï¼ŒMCP æ— æ­¤èƒ½åŠ›</td></tr><tr><td><strong>ğŸ¯ äº‹ä»¶é©±åŠ¨æ¶æ„</strong></td><td>EventBus è§£è€¦ç»„ä»¶ï¼Œæ˜“äºæ‰©å±•</td><td>ACP ä½¿ç”¨é€šçŸ¥ï¼Œä½†æ²¡æœ‰ç»Ÿä¸€ EventBus</td></tr></tbody></table>
<p><strong>A2A çš„é€‚ç”¨åœºæ™¯</strong>:</p>
<p>âœ… <strong>æ¨èä½¿ç”¨ A2A</strong>:</p>
<ul>
<li>éœ€è¦å¤šä¸ª Agent åä½œå®Œæˆå¤æ‚ä»»åŠ¡</li>
<li>ä»»åŠ¡æ‰§è¡Œæ—¶é—´è¾ƒé•¿ï¼ˆ&gt;30ç§’ï¼‰ï¼Œéœ€è¦ä¸­é—´çŠ¶æ€åé¦ˆ</li>
<li>éœ€è¦æ”¯æŒä»»åŠ¡æš‚åœå’Œæ¢å¤</li>
<li>éœ€è¦å®Œæ•´çš„å®¡è®¡æ—¥å¿—å’ŒçŠ¶æ€å†å²</li>
<li>å¸Œæœ›å¤ç”¨ MCP ç”Ÿæ€çš„å·¥å…·</li>
</ul>
<p>âŒ <strong>ä¸æ¨èä½¿ç”¨ A2A</strong>:</p>
<ul>
<li>ç®€å•çš„å• Agent åœºæ™¯ï¼ˆç”¨ ACP æ›´è½»é‡ï¼‰</li>
<li>å¯¹æ€§èƒ½è¦æ±‚æé«˜çš„åœºæ™¯ï¼ˆRust å®ç°çš„ Codex æ›´å¿«ï¼‰</li>
<li>åªéœ€è¦å·¥å…·è°ƒç”¨ï¼Œä¸éœ€è¦ Agent åä½œï¼ˆç›´æ¥ç”¨ MCPï¼‰</li>
<li>ä½å»¶è¿Ÿè¦æ±‚ï¼ˆ&lt;100msï¼‰çš„å®æ—¶åœºæ™¯</li>
</ul>
<hr/>
<h4 data-id="heading-45">4.5 Codex çš„ SQ/EQ åè®®è®¾è®¡</h4>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>: Codex çš„å®ç°ä¸ ACP å®˜æ–¹æ ‡å‡†ä¹Ÿ<strong>ä¸åŒ</strong>ï¼Œé‡‡ç”¨äº†ç‹¬ç‰¹çš„ <strong>SQ/EQ (Submission Queue / Event Queue)</strong> æ¨¡å¼ã€‚</p>
</blockquote>
<p>Codex çš„åè®®è®¾è®¡ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// codex-rs/protocol/src/protocol.rs</span>

<span class="hljs-comment">/// Submission Queue - ç”¨æˆ·æäº¤çš„æ“ä½œ</span>
<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Submission</span> {
    <span class="hljs-keyword">pub</span> id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> op: Op,
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-meta">#[serde(tag = <span class="hljs-string">"type"</span>, rename_all = <span class="hljs-string">"snake_case"</span>)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Op</span> {
    <span class="hljs-comment">/// ç”¨æˆ·è¾“å…¥</span>
    UserTurn {
        items: <span class="hljs-type">Vec</span>&lt;UserInput&gt;,
        cwd: PathBuf,
        approval_policy: AskForApproval,
        sandbox_policy: SandboxPolicy,
        model: <span class="hljs-type">String</span>,
    },

    <span class="hljs-comment">/// ä¸­æ–­å½“å‰ä»»åŠ¡</span>
    Interrupt,

    <span class="hljs-comment">/// æ‰¹å‡†å·¥å…·æ‰§è¡Œ</span>
    ExecApproval {
        id: <span class="hljs-type">String</span>,
        decision: ReviewDecision,
    },

    <span class="hljs-comment">/// æ‰¹å‡†ä»£ç è¡¥ä¸</span>
    PatchApproval {
        id: <span class="hljs-type">String</span>,
        decision: ReviewDecision,
    },

    <span class="hljs-comment">/// è§£å†³ MCP æˆæƒè¯·æ±‚</span>
    ResolveElicitation {
        server_name: <span class="hljs-type">String</span>,
        request_id: RequestId,
        decision: ElicitationAction,
    },
}

<span class="hljs-comment">/// Event Queue - Agent å‘å‡ºçš„äº‹ä»¶</span>
<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Event</span> {
    <span class="hljs-keyword">pub</span> id: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> msg: EventMsg,
}

<span class="hljs-meta">#[derive(Debug, Clone, Serialize, Deserialize)]</span>
<span class="hljs-meta">#[serde(tag = <span class="hljs-string">"type"</span>, rename_all = <span class="hljs-string">"snake_case"</span>)]</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">EventMsg</span> {
    <span class="hljs-comment">/// Agent æ¶ˆæ¯</span>
    <span class="hljs-title function_ invoke__">AgentMessage</span>(AgentMessageEvent),

    <span class="hljs-comment">/// å·¥å…·è°ƒç”¨è¯·æ±‚</span>
    <span class="hljs-title function_ invoke__">ToolCall</span>(ToolCallEvent),

    <span class="hljs-comment">/// éœ€è¦æ‰¹å‡†æ‰§è¡Œ</span>
    <span class="hljs-title function_ invoke__">ExecApprovalRequest</span>(ExecApprovalRequestEvent),

    <span class="hljs-comment">/// éœ€è¦æ‰¹å‡†è¡¥ä¸</span>
    <span class="hljs-title function_ invoke__">ApplyPatchApprovalRequest</span>(ApplyPatchApprovalRequestEvent),

    <span class="hljs-comment">/// Turn å®Œæˆ</span>
    <span class="hljs-title function_ invoke__">TurnComplete</span>(TurnCompleteEvent),

    <span class="hljs-comment">/// Turn ä¸­æ­¢</span>
    <span class="hljs-title function_ invoke__">TurnAborted</span>(TurnAbortedEvent),
}
</code></pre>
<h4 data-id="heading-46">4.3 åè®®å…³ç³»æ¢³ç†ï¼šACP vs A2A vs Codex</h4>
<p>ä¸ºé¿å…æ··æ·†ï¼Œè¿™é‡Œæ˜ç¡®ä¸‰è€…çš„å®šä½å’Œå…³ç³»ï¼š</p>

































<table><thead><tr><th>åè®®/å®ç°</th><th>å®šä½</th><th>æ ‡å‡†åŒ–çŠ¶æ€</th><th>ä¸»è¦ç”¨é€”</th><th>å®ç°æ–¹</th></tr></thead><tbody><tr><td><strong>ACP (Agent Client Protocol)</strong></td><td>å®˜æ–¹æ ‡å‡†åè®®</td><td>âœ… å¼€æ”¾æ ‡å‡†</td><td>Editor â†” Agent é€šä¿¡</td><td>Zed Industries (2025-08)</td></tr><tr><td><strong>A2A (Agent-to-Agent)</strong></td><td>å®éªŒæ€§å®ç°</td><td>ğŸ”¬ éæ ‡å‡†</td><td>Agent â†” Agent åä½œ</td><td>Google Gemini CLI</td></tr><tr><td><strong>Codex SQ/EQ</strong></td><td>å®éªŒæ€§å®ç°</td><td>ğŸ”¬ éæ ‡å‡†</td><td>User â†” Agent äº¤äº’</td><td>OpenAI/ç¤¾åŒº</td></tr></tbody></table>
<h5 data-id="heading-47"><strong>å…³é”®åŒºåˆ«</strong></h5>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Official["å®˜æ–¹æ ‡å‡†"]
        MCP["MCP (Anthropic)&lt;br/&gt;Agent â†” Tools"]
        ACP["ACP (Zed)&lt;br/&gt;Editor â†” Agent"]

        style Official fill:#c8e6c9,stroke:#2e7d32,stroke-width:2px
        style MCP fill:#a5d6a7,stroke:#388e3c
        style ACP fill:#a5d6a7,stroke:#388e3c
    end

    subgraph Vendor["å‚å•†å®ç° (å®éªŒæ€§)"]
        A2A["A2A (Google)&lt;br/&gt;Agent â†” Agent"]
        Codex["Codex SQ/EQ (ç¤¾åŒº)&lt;br/&gt;User â†” Agent"]

        style Vendor fill:#fff3e0,stroke:#e65100,stroke-width:2px
        style A2A fill:#ffcc80,stroke:#f57c00
        style Codex fill:#ffcc80,stroke:#f57c00
    end
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ç§ç°è±¡ï¼Ÿ</strong></p>
<ol>
<li><strong>ACP å‘å¸ƒæ—¶é—´çº¿</strong>ï¼šACP åœ¨ 2025 å¹´ 8 æœˆæ‰æ­£å¼å‘å¸ƒï¼Œè€Œ Gemini CLI å’Œ Codex çš„å¼€å‘æ›´æ—©ï¼Œå½“æ—¶è¿˜æ²¡æœ‰ç»Ÿä¸€æ ‡å‡†</li>
<li><strong>ä¸åŒçš„å…³æ³¨ç‚¹</strong>ï¼š
<ul>
<li>ACP å…³æ³¨ <strong>ç¼–è¾‘å™¨é›†æˆ</strong>ï¼ˆç±»ä¼¼ LSPï¼‰</li>
<li>A2A å…³æ³¨ <strong>Agent ç¼–æ’</strong>ï¼ˆMulti-Agent ç³»ç»Ÿï¼‰</li>
<li>Codex SQ/EQ å…³æ³¨ <strong>ç”¨æˆ·ä½“éªŒ</strong>ï¼ˆå®¡æ‰¹æµç¨‹å’Œå®‰å…¨ï¼‰</li>
</ul>
</li>
<li><strong>æ¼”è¿›æ–¹å‘</strong>ï¼šé¢„è®¡æœªæ¥è¿™äº›å®ç°å¯èƒ½ä¼šå‘ ACP æ ‡å‡†é æ‹¢æˆ–äº’è¡¥</li>
</ol>
<p><strong>å¯¹å¼€å‘è€…çš„å»ºè®®</strong>ï¼š</p>
<ul>
<li>âœ… å¦‚æœå¼€å‘ç¼–è¾‘å™¨æ’ä»¶ï¼Œä¼˜å…ˆä½¿ç”¨ <strong>ACP å®˜æ–¹æ ‡å‡†</strong></li>
<li>ğŸ”¬ å¦‚æœç ”ç©¶ Multi-Agent ç³»ç»Ÿï¼Œå¯ä»¥å‚è€ƒ <strong>A2A çš„è®¾è®¡æ€è·¯</strong></li>
<li>ğŸ” å¦‚æœæ³¨é‡å®‰å…¨å®¡æ‰¹ï¼Œå¯ä»¥å€Ÿé‰´ <strong>Codex çš„ Approval æœºåˆ¶</strong></li>
</ul>
<hr/>
<h3 data-id="heading-48">äº”ã€æ ¸å¿ƒå·®å¼‚å¯¹æ¯”ï¼šACP vs MCP vs å„å®¶å®ç°</h3>
<h4 data-id="heading-49">5.1 åè®®å®šä½å¯¹æ¯”</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph AppLayer["åº”ç”¨å±‚ - A2A (Agent-to-Agent)"]
        App1["Gemini A2A Server"]
        App2["Agent åä½œç¼–æ’"]
        App3["ä»»åŠ¡çŠ¶æ€ç®¡ç†"]

        style AppLayer fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    end

    subgraph AgentLayer["Agentå±‚ - Codex SQ/EQ Protocol"]
        Agent1["Submission Queue&lt;br/&gt;(ç”¨æˆ· â†’ Agent)"]
        Agent2["Event Queue&lt;br/&gt;(Agent â†’ ç”¨æˆ·)"]
        Agent3["å®¡æ‰¹æµç¨‹ (Approval)"]

        style AgentLayer fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    end

    subgraph ToolLayer["å·¥å…·å±‚ - MCP (Model Context Protocol)"]
        Tool1["å·¥å…·å‘ç°ä¸è°ƒç”¨"]
        Tool2["èµ„æºè®¿é—®"]
        Tool3["Prompt ç®¡ç†"]

        style ToolLayer fill:#fff3e0,stroke:#e65100,stroke-width:2px
    end

    subgraph TransportLayer["ä¼ è¾“å±‚"]
        Trans1["stdio / SSE / HTTP / WebSocket"]

        style TransportLayer fill:#e8f5e9,stroke:#2e7d32,stroke-width:2px
    end

    AppLayer --&gt; AgentLayer
    AgentLayer --&gt; ToolLayer
    ToolLayer --&gt; TransportLayer

    style App1 fill:#b3e5fc,stroke:#01579b
    style App2 fill:#b3e5fc,stroke:#01579b
    style App3 fill:#b3e5fc,stroke:#01579b
    style Agent1 fill:#e1bee7,stroke:#6a1b9a
    style Agent2 fill:#e1bee7,stroke:#6a1b9a
    style Agent3 fill:#e1bee7,stroke:#6a1b9a
    style Tool1 fill:#ffe0b2,stroke:#e65100
    style Tool2 fill:#ffe0b2,stroke:#e65100
    style Tool3 fill:#ffe0b2,stroke:#e65100
</code></pre>
<h4 data-id="heading-50">5.2 è¯¦ç»†å¯¹æ¯”è¡¨</h4>


















































































<table><thead><tr><th>ç»´åº¦</th><th>MCP</th><th>ACP (å®˜æ–¹)</th><th>A2A (Gemini)</th><th>Codex SQ/EQ</th></tr></thead><tbody><tr><td><strong>åè®®ç›®æ ‡</strong></td><td>Agent â†” å·¥å…·/èµ„æº</td><td>Editor â†” Agent</td><td>Agent â†” Agent</td><td>ç”¨æˆ· â†” Agent</td></tr><tr><td><strong>å‘å¸ƒæ–¹</strong></td><td>Anthropic</td><td>Zed Industries</td><td>Google</td><td>OpenAI (ç¤¾åŒº)</td></tr><tr><td><strong>åè®®ç‰ˆæœ¬</strong></td><td>2025-06-18</td><td>Version 1 (2025-08)</td><td>0.3.0</td><td>v0.2.0-alpha</td></tr><tr><td><strong>é€šä¿¡æ¨¡å¼</strong></td><td>Request/Response</td><td>Request/Response + Notifications</td><td>Event-Driven (SSE)</td><td>Queue-Based</td></tr><tr><td><strong>çŠ¶æ€ç®¡ç†</strong></td><td>æ— çŠ¶æ€</td><td>æœ‰çŠ¶æ€ (ä¼šè¯)</td><td>æœ‰çŠ¶æ€ (ä»»åŠ¡)</td><td>æœ‰çŠ¶æ€ (ä¼šè¯)</td></tr><tr><td><strong>ä¼ è¾“æ–¹å¼</strong></td><td>stdio, SSE, HTTP</td><td>stdio (JSON-RPC)</td><td>HTTP + SSE</td><td>In-Process Channels</td></tr><tr><td><strong>æƒé™æ¨¡å‹</strong></td><td>Elicitation</td><td>Permission Request</td><td>Confirmation</td><td>Approval</td></tr><tr><td><strong>æµå¼æ”¯æŒ</strong></td><td>âŒ ä¸æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td><td>âœ… æ”¯æŒ</td></tr><tr><td><strong>è¯­è¨€ç»‘å®š</strong></td><td>TS, Rust, Python</td><td>TS, Go, Rust, Python</td><td>TypeScript</td><td>Rust + TS SDK</td></tr><tr><td><strong>æ ‡å‡†åŒ–ç¨‹åº¦</strong></td><td>âœ… å®˜æ–¹æ ‡å‡†</td><td>âœ… å®˜æ–¹æ ‡å‡†</td><td>ğŸ”¬ å®éªŒæ€§å®ç°</td><td>ğŸ”¬ å®éªŒæ€§å®ç°</td></tr></tbody></table>
<h4 data-id="heading-51">5.3 å·¥å…·è°ƒç”¨æµç¨‹å¯¹æ¯”</h4>
<h5 data-id="heading-52"><strong>MCP å·¥å…·è°ƒç”¨</strong> (åŒæ­¥):</h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">User</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Agent:</span> <span class="hljs-string">"è¯»å–æ–‡ä»¶ /etc/hosts"</span>
<span class="hljs-string">Agent</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">MCP Server:</span> <span class="hljs-string">tools/call</span> { <span class="hljs-attr">name:</span> <span class="hljs-string">"read_file"</span>, <span class="hljs-attr">args:</span> {<span class="hljs-string">...</span>} }
<span class="hljs-string">MCP</span> <span class="hljs-string">Server</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">Agent:</span> { <span class="hljs-attr">content:</span> [<span class="hljs-string">...</span>], <span class="hljs-attr">isError:</span> <span class="hljs-literal">false</span> }
<span class="hljs-string">Agent</span> <span class="hljs-string">â†’</span> <span class="hljs-attr">User:</span> <span class="hljs-string">"æ–‡ä»¶å†…å®¹å¦‚ä¸‹..."</span>
</code></pre>
<h5 data-id="heading-53"><strong>A2A å·¥å…·è°ƒç”¨</strong> (æµå¼):</h5>
<pre><code class="hljs language-css" lang="css">User â†’ Agent <span class="hljs-selector-tag">A</span>: <span class="hljs-string">"è¯»å–å¹¶åˆ†ææ–‡ä»¶"</span>
Agent A â†’ EventBus: { status: <span class="hljs-string">'working'</span>, message: <span class="hljs-string">"æ­£åœ¨è¯»å–..."</span> }
Agent <span class="hljs-selector-tag">A</span> â†’ Tool: <span class="hljs-built_in">read_file</span>(...)
Tool â†’ Agent A: (file content)
Agent A â†’ EventBus: { status: <span class="hljs-string">'working'</span>, message: <span class="hljs-string">"æ­£åœ¨åˆ†æ..."</span> }
Agent <span class="hljs-selector-tag">A</span> â†’ Agent <span class="hljs-selector-tag">B</span>: <span class="hljs-built_in">analyze</span>(content)  // å¯é€‰çš„ Multi-Agent
Agent B â†’ EventBus: { status: <span class="hljs-string">'working'</span>, message: <span class="hljs-string">"åˆ†æç»“æœ..."</span> }
EventBus â†’ User: (æµå¼å±•ç¤ºæ¯ä¸€æ­¥)
</code></pre>
<h5 data-id="heading-54"><strong>Codex SQ/EQ</strong> (å¼‚æ­¥é˜Ÿåˆ—):</h5>
<pre><code class="hljs language-css" lang="css">User â†’ SQ: Submission { op: UserTurn { text: <span class="hljs-string">"..."</span> } }
Agent â†’ EQ: Event { msg: AgentMessage { text: <span class="hljs-string">"æ­£åœ¨å¤„ç†..."</span> } }
Agent â†’ EQ: Event { msg: ToolCall { tool: <span class="hljs-string">"shell"</span>, cmd: <span class="hljs-string">"ls"</span> } }
Agent â†’ EQ: Event { msg: ExecApprovalRequest {...} }
User â†’ SQ: Submission { op: ExecApproval { decision: Allow } }
Agent â†’ EQ: Event { msg: ToolCallResult {...} }
Agent â†’ EQ: Event { msg: TurnComplete }
</code></pre>
<hr/>
<h3 data-id="heading-55">å…­ã€å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 data-id="heading-56">6.1 MCP å…¸å‹åœºæ™¯</h4>
<h5 data-id="heading-57"><strong>åœºæ™¯ 1: ç»Ÿä¸€çš„å¼€å‘å·¥å…·æ¥å…¥</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é…ç½®æ–‡ä»¶: ~/.gemini/settings.json</span>
{
  <span class="hljs-string">"mcpServers"</span>: {
    <span class="hljs-string">"github"</span>: {
      <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx"</span>,
      <span class="hljs-string">"args"</span>: [<span class="hljs-string">"-y"</span>, <span class="hljs-string">"@modelcontextprotocol/server-github"</span>],
      <span class="hljs-string">"env"</span>: {
        <span class="hljs-string">"GITHUB_TOKEN"</span>: <span class="hljs-string">"${GITHUB_TOKEN}"</span>
      }
    },
    <span class="hljs-string">"postgres"</span>: {
      <span class="hljs-string">"command"</span>: <span class="hljs-string">"uvx"</span>,
      <span class="hljs-string">"args"</span>: [<span class="hljs-string">"mcp-server-postgres"</span>],
      <span class="hljs-string">"env"</span>: {
        <span class="hljs-string">"DATABASE_URL"</span>: <span class="hljs-string">"postgresql://..."</span>
      }
    },
    <span class="hljs-string">"filesystem"</span>: {
      <span class="hljs-string">"command"</span>: <span class="hljs-string">"npx"</span>,
      <span class="hljs-string">"args"</span>: [<span class="hljs-string">"-y"</span>, <span class="hljs-string">"@modelcontextprotocol/server-filesystem"</span>, <span class="hljs-string">"/workspace"</span>]
    }
  }
}
</code></pre>
<p><strong>ä½¿ç”¨</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">$ gemini
&gt; @github List my open pull requests
&gt; @postgres Run query: SELECT * FROM <span class="hljs-built_in">users</span> WHERE active = <span class="hljs-literal">true</span>
&gt; @filesystem Read file package.json
</code></pre>
<h5 data-id="heading-58"><strong>åœºæ™¯ 2: ä¼ä¸šå†…éƒ¨å·¥å…·é›†æˆ</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è‡ªå®šä¹‰ MCP Server</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@modelcontextprotocol/sdk/server'</span>;

<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'company-internal-tools'</span>,
  <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>
});

server.<span class="hljs-title function_">setRequestHandler</span>(<span class="hljs-title class_">ListToolsRequestSchema</span>, <span class="hljs-keyword">async</span> () =&gt; ({
  <span class="hljs-attr">tools</span>: [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'query_jira'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'Query JIRA tickets'</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
        <span class="hljs-attr">properties</span>: {
          <span class="hljs-attr">jql</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> }
        }
      }
    },
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">'deploy_to_k8s'</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">'Deploy application to Kubernetes'</span>,
      <span class="hljs-attr">inputSchema</span>: {
        <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
        <span class="hljs-attr">properties</span>: {
          <span class="hljs-attr">namespace</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> },
          <span class="hljs-attr">image</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> }
        }
      }
    }
  ]
}));
</code></pre>
<h4 data-id="heading-59">6.2 ACP å…¸å‹åœºæ™¯ï¼ˆå®˜æ–¹æ ‡å‡†ï¼‰</h4>
<h5 data-id="heading-60"><strong>åœºæ™¯ 1: Multi-Agent åä½œå·¥ä½œæµ</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { createAgent } <span class="hljs-keyword">from</span> <span class="hljs-string">'@a2a-js/sdk'</span>;

<span class="hljs-comment">// Agent 1: ä»£ç ç”Ÿæˆä¸“å®¶</span>
<span class="hljs-keyword">const</span> codeGenAgent = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
  <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://gemini-a2a:41242'</span>
});

<span class="hljs-comment">// Agent 2: ä»£ç å®¡æŸ¥ä¸“å®¶</span>
<span class="hljs-keyword">const</span> codeReviewAgent = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
  <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://claude-a2a:3000'</span>
});

<span class="hljs-comment">// å·¥ä½œæµç¼–æ’</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">developFeature</span>(<span class="hljs-params">requirement: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// Step 1: ç”Ÿæˆä»£ç </span>
  <span class="hljs-keyword">const</span> codeTask = <span class="hljs-keyword">await</span> codeGenAgent.<span class="hljs-title function_">createTask</span>({
    <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">kind</span>: <span class="hljs-string">'text'</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">`å®ç°åŠŸèƒ½: <span class="hljs-subst">${requirement}</span>`</span> }]
    }
  });

  <span class="hljs-keyword">const</span> code = <span class="hljs-keyword">await</span> codeTask.<span class="hljs-title function_">waitForCompletion</span>();

  <span class="hljs-comment">// Step 2: å®¡æŸ¥ä»£ç </span>
  <span class="hljs-keyword">const</span> reviewTask = <span class="hljs-keyword">await</span> codeReviewAgent.<span class="hljs-title function_">createTask</span>({
    <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">parts</span>: [{
        <span class="hljs-attr">kind</span>: <span class="hljs-string">'text'</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">`å®¡æŸ¥ä»¥ä¸‹ä»£ç å¹¶æä¾›æ”¹è¿›å»ºè®®:\n<span class="hljs-subst">${code}</span>`</span>
      }]
    }
  });

  <span class="hljs-keyword">const</span> review = <span class="hljs-keyword">await</span> reviewTask.<span class="hljs-title function_">waitForCompletion</span>();

  <span class="hljs-comment">// Step 3: æ ¹æ®å®¡æŸ¥æ„è§æ”¹è¿›</span>
  <span class="hljs-keyword">const</span> improvedCodeTask = <span class="hljs-keyword">await</span> codeGenAgent.<span class="hljs-title function_">createTask</span>({
    <span class="hljs-attr">message</span>: {
      <span class="hljs-attr">parts</span>: [{
        <span class="hljs-attr">kind</span>: <span class="hljs-string">'text'</span>,
        <span class="hljs-attr">text</span>: <span class="hljs-string">`æ ¹æ®å®¡æŸ¥æ„è§æ”¹è¿›ä»£ç :\nå®¡æŸ¥æ„è§: <span class="hljs-subst">${review}</span>\nåŸä»£ç : <span class="hljs-subst">${code}</span>`</span>
      }]
    }
  });

  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> improvedCodeTask.<span class="hljs-title function_">waitForCompletion</span>();
}
</code></pre>
<h5 data-id="heading-61"><strong>åœºæ™¯ 2: Agent æœåŠ¡åŒ–éƒ¨ç½²</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å°† Gemini CLI éƒ¨ç½²ä¸º A2A æœåŠ¡</span>
<span class="hljs-keyword">import</span> { A2AExpressApp } <span class="hljs-keyword">from</span> <span class="hljs-string">'@a2a-js/sdk/server/express'</span>;
<span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">'express'</span>;

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();
<span class="hljs-keyword">const</span> a2aApp = <span class="hljs-keyword">new</span> <span class="hljs-title function_">A2AExpressApp</span>(requestHandler);

a2aApp.<span class="hljs-title function_">setupRoutes</span>(app, <span class="hljs-string">'/api'</span>);
app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">41242</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Gemini A2A Server running on http://localhost:41242'</span>);
});

<span class="hljs-comment">// ç°åœ¨å…¶ä»– Agent å¯ä»¥è°ƒç”¨</span>
<span class="hljs-keyword">const</span> geminiAgent = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({
  <span class="hljs-attr">agentUrl</span>: <span class="hljs-string">'http://localhost:41242/api'</span>
});
</code></pre>
<h4 data-id="heading-62">6.3 Codex SQ/EQ å…¸å‹åœºæ™¯</h4>
<h5 data-id="heading-63"><strong>åœºæ™¯ 1: ç»†ç²’åº¦çš„å®¡æ‰¹æ§åˆ¶</strong></h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// å®šä¹‰å®¡æ‰¹ç­–ç•¥</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">approval_policy</span> = AskForApproval::AskBeforeExecuting;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">sandbox_policy</span> = SandboxPolicy::Strict;

<span class="hljs-comment">// æäº¤ç”¨æˆ·è¾“å…¥</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">submission</span> = Submission {
    id: <span class="hljs-string">"sub-001"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    op: Op::UserTurn {
        items: <span class="hljs-built_in">vec!</span>[UserInput::<span class="hljs-title function_ invoke__">Text</span>(<span class="hljs-string">"åˆ é™¤æ‰€æœ‰æ—¥å¿—æ–‡ä»¶"</span>.<span class="hljs-title function_ invoke__">to_string</span>())],
        cwd: PathBuf::<span class="hljs-title function_ invoke__">from</span>(<span class="hljs-string">"/var/log"</span>),
        approval_policy,
        sandbox_policy,
        model: <span class="hljs-string">"gpt-4"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    }
};

<span class="hljs-comment">// Agent è¯·æ±‚æ‰¹å‡†</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">event</span> = Event {
    id: <span class="hljs-string">"evt-001"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    msg: EventMsg::<span class="hljs-title function_ invoke__">ExecApprovalRequest</span>(ExecApprovalRequestEvent {
        command: <span class="hljs-string">"rm -rf *.log"</span>,
        assessment: SandboxCommandAssessment {
            risk_level: SandboxRiskLevel::High,
            reason: <span class="hljs-string">"æ‰¹é‡åˆ é™¤æ“ä½œ"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        }
    })
};

<span class="hljs-comment">// ç”¨æˆ·æ‰¹å‡†æˆ–æ‹’ç»</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">approval</span> = Submission {
    id: <span class="hljs-string">"sub-002"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
    op: Op::ExecApproval {
        id: <span class="hljs-string">"evt-001"</span>.<span class="hljs-title function_ invoke__">to_string</span>(),
        decision: ReviewDecision::Approve,
    }
};
</code></pre>
<h5 data-id="heading-64"><strong>åœºæ™¯ 2: ä¼šè¯æ¢å¤</strong></h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä¿å­˜ä¼šè¯çŠ¶æ€</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conversation_id</span> = ConversationId::<span class="hljs-title function_ invoke__">new</span>();
conversation_manager.<span class="hljs-title function_ invoke__">save_state</span>(conversation_id, &amp;state).<span class="hljs-keyword">await</span>?;

<span class="hljs-comment">// ç¨åæ¢å¤</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">restored_state</span> = conversation_manager.<span class="hljs-title function_ invoke__">load_state</span>(conversation_id).<span class="hljs-keyword">await</span>?;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">conversation</span> = CodexConversation::<span class="hljs-title function_ invoke__">from_state</span>(restored_state)?;
</code></pre>
<hr/>
<h3 data-id="heading-65">ä¸ƒã€æŠ€æœ¯æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-66">7.1 å·¥å…·å‘½åå†²çª</h4>
<p><strong>é—®é¢˜</strong>: å¤šä¸ª MCP Server å¯èƒ½æä¾›åŒåå·¥å…·</p>
<p><strong>Gemini CLI è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ server_name ä½œä¸º namespace</span>
<span class="hljs-keyword">const</span> toolName = <span class="hljs-string">`<span class="hljs-subst">${serverName}</span>.<span class="hljs-subst">${originalToolName}</span>`</span>;
<span class="hljs-comment">// ä¾‹å¦‚: "github.create_issue", "gitlab.create_issue"</span>
</code></pre>
<p><strong>Codex è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨åŒä¸‹åˆ’çº¿åˆ†éš”ç¬¦ + SHA1 æˆªæ–­</span>
<span class="hljs-keyword">const</span> DELIMITER = <span class="hljs-string">"__"</span>;
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">qualified_name</span> = <span class="hljs-built_in">format!</span>(
    <span class="hljs-string">"mcp{}{}{}{}"</span>,
    DELIMITER, server_name, DELIMITER, tool_name
);

<span class="hljs-keyword">if</span> qualified_name.<span class="hljs-title function_ invoke__">len</span>() &gt; <span class="hljs-number">64</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">hash</span> = sha1::Sha1::<span class="hljs-title function_ invoke__">digest</span>(qualified_name);
    qualified_name = <span class="hljs-built_in">format!</span>(<span class="hljs-string">"{}_{:x}"</span>, &amp;qualified_name[..<span class="hljs-number">48</span>], hash);
}
<span class="hljs-comment">// ä¾‹å¦‚: "mcp__github__create_issue"</span>
</code></pre>
<h4 data-id="heading-67">7.2 æµå¼è¾“å‡ºçš„æŒ‘æˆ˜</h4>
<p><strong>é—®é¢˜</strong>: LLM ç”Ÿæˆæ˜¯æµå¼çš„ï¼Œä½†å·¥å…·è°ƒç”¨æ˜¯åŒæ­¥çš„</p>
<p><strong>A2A è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨ EventBus è§£è€¦</span>
<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> llmStream) {
  eventBus.<span class="hljs-title function_">publish</span>({
    <span class="hljs-attr">kind</span>: <span class="hljs-string">'status-update'</span>,
    <span class="hljs-attr">status</span>: {
      <span class="hljs-attr">message</span>: { <span class="hljs-attr">parts</span>: [{ <span class="hljs-attr">kind</span>: <span class="hljs-string">'text'</span>, <span class="hljs-attr">text</span>: chunk }] }
    },
    <span class="hljs-attr">final</span>: <span class="hljs-literal">false</span>  <span class="hljs-comment">// éæœ€ç»ˆçŠ¶æ€ï¼Œç»§ç»­æ¥æ”¶</span>
  });
}
</code></pre>
<p><strong>Codex è§£å†³æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨ AsyncIterator</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">send_message_stream</span>(
    &amp;<span class="hljs-keyword">self</span>,
    items: <span class="hljs-type">Vec</span>&lt;UserInput&gt;
) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-keyword">impl</span> <span class="hljs-title class_">Stream</span>&lt;Item = <span class="hljs-type">Result</span>&lt;Event&gt;&gt; {
    async_stream::stream! {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">response</span> = <span class="hljs-keyword">self</span>.llm_client.<span class="hljs-title function_ invoke__">chat</span>(items).<span class="hljs-keyword">await</span>?;
        <span class="hljs-keyword">for</span> <span class="hljs-title class_">await</span> chunk <span class="hljs-keyword">in</span> response.stream {
            <span class="hljs-keyword">yield</span> <span class="hljs-title function_ invoke__">Ok</span>(Event {
                msg: EventMsg::<span class="hljs-title function_ invoke__">AgentMessage</span>(chunk)
            });
        }
    }
}
</code></pre>
<h4 data-id="heading-68">7.3 å®‰å…¨æ€§å’Œæ²™ç®±</h4>
<p><strong>Codex çš„å¤šå±‚æ²™ç®±æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// 1. Execpolicy - å‘½ä»¤çº§åˆ«çš„ç­–ç•¥</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">ExecPolicy</span> {
    auto_approve: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,    <span class="hljs-comment">// è‡ªåŠ¨æ‰¹å‡†çš„å‘½ä»¤</span>
    always_deny: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,      <span class="hljs-comment">// å§‹ç»ˆæ‹’ç»çš„å‘½ä»¤</span>
    require_confirm: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">String</span>&gt;,  <span class="hljs-comment">// éœ€è¦ç¡®è®¤çš„å‘½ä»¤</span>
}

<span class="hljs-comment">// 2. Platform Sandbox - æ“ä½œç³»ç»Ÿçº§åˆ«çš„éš”ç¦»</span>
<span class="hljs-meta">#[cfg(target_os = <span class="hljs-string">"macos"</span>)]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">apply_seatbelt_sandbox</span>(cmd: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">profile</span> = <span class="hljs-string">"(version 1) (deny default) (allow network*) (allow file-read* /usr/bin)"</span>;
    <span class="hljs-title function_ invoke__">sandbox_exec</span>(cmd, profile)
}

<span class="hljs-meta">#[cfg(target_os = <span class="hljs-string">"linux"</span>)]</span>
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">apply_landlock_sandbox</span>(cmd: &amp;<span class="hljs-type">str</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
    landlock::Ruleset::<span class="hljs-title function_ invoke__">new</span>()
        .<span class="hljs-title function_ invoke__">allow_read</span>(<span class="hljs-string">"/usr/bin"</span>)
        .<span class="hljs-title function_ invoke__">allow_execute</span>(<span class="hljs-string">"/usr/bin"</span>)
        .<span class="hljs-title function_ invoke__">restrict_self</span>()?;
    <span class="hljs-title function_ invoke__">execute</span>(cmd)
}

<span class="hljs-comment">// 3. Network Isolation</span>
<span class="hljs-keyword">if</span> sandbox_policy == SandboxPolicy::Strict {
    env::<span class="hljs-title function_ invoke__">set_var</span>(<span class="hljs-string">"CODEX_SANDBOX_NETWORK_DISABLED"</span>, <span class="hljs-string">"1"</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-69">å…«ã€æ€§èƒ½å¯¹æ¯”</h3>
<h4 data-id="heading-70">8.1 è¿æ¥å»ºç«‹æ—¶é—´</h4>



































<table><thead><tr><th>å®ç°</th><th>ä¼ è¾“æ–¹å¼</th><th>å¹³å‡è€—æ—¶</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>Gemini MCP (TypeScript)</td><td>stdio</td><td>~150ms</td><td>Node.js å­è¿›ç¨‹å¯åŠ¨</td></tr><tr><td>Gemini MCP (TypeScript)</td><td>SSE</td><td>~80ms</td><td>HTTP è¿æ¥</td></tr><tr><td>Codex MCP (Rust)</td><td>stdio</td><td>~50ms</td><td>åŸç”Ÿè¿›ç¨‹å¯åŠ¨</td></tr><tr><td>Codex MCP (Rust)</td><td>SSE</td><td>~40ms</td><td>Tokio HTTP Client</td></tr></tbody></table>
<h4 data-id="heading-71">8.2 å·¥å…·è°ƒç”¨å»¶è¿Ÿ</h4>

























<table><thead><tr><th>åœºæ™¯</th><th>Gemini CLI</th><th>Codex CLI</th></tr></thead><tbody><tr><td>ç®€å•å·¥å…· (read_file)</td><td>~100ms</td><td>~30ms</td></tr><tr><td>å¤æ‚å·¥å…· (database query)</td><td>~500ms</td><td>~200ms</td></tr><tr><td>æ‰¹é‡å·¥å…·è°ƒç”¨ (10ä¸ª)</td><td>~1.5s</td><td>~600ms</td></tr></tbody></table>
<p><strong>æ€§èƒ½å·®å¼‚åŸå› </strong>:</p>
<ul>
<li>Rust çš„é›¶æˆæœ¬æŠ½è±¡å’Œç¼–è¯‘ä¼˜åŒ–</li>
<li>Tokio å¼‚æ­¥è¿è¡Œæ—¶çš„é«˜æ•ˆè°ƒåº¦</li>
<li>æ—  GC (Garbage Collection) çš„ç¡®å®šæ€§å»¶è¿Ÿ</li>
</ul>
<h4 data-id="heading-72">8.3 å†…å­˜å ç”¨</h4>























<table><thead><tr><th>å®ç°</th><th>ç©ºé—²å†…å­˜</th><th>å•ä¼šè¯å†…å­˜</th><th>10ä¼šè¯å†…å­˜</th></tr></thead><tbody><tr><td>Gemini CLI (Node.js)</td><td>~80MB</td><td>~150MB</td><td>~500MB</td></tr><tr><td>Codex CLI (Rust)</td><td>~5MB</td><td>~15MB</td><td>~80MB</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-73">ä¹ã€æœªæ¥å‘å±•æ–¹å‘</h3>
<h4 data-id="heading-74">9.1 åè®®èåˆè¶‹åŠ¿</h4>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph Layer4["Layer 4: Orchestration Layer"]
        L4A["Multi-Agent DAG ç¼–æ’"]
        L4B["åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦"]
        L4C["Agent Marketplace"]

        style Layer4 fill:#e8eaf6,stroke:#283593,stroke-width:2px
    end

    subgraph Layer3["Layer 3: Agent Communication (ACP++)"]
        L3A["ç»Ÿä¸€çš„ä»»åŠ¡çŠ¶æ€ç®¡ç†"]
        L3B["Agent å‘ç°ä¸æ³¨å†Œ"]
        L3C["æµå¼é€šä¿¡ + çŠ¶æ€æŒä¹…åŒ–"]

        style Layer3 fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    end

    subgraph Layer2["Layer 2: Tool &amp; Resource (MCP++)"]
        L2A["å·¥å…·å‘ç°ä¸è°ƒç”¨"]
        L2B["èµ„æºæŠ½è±¡ä¸è®¿é—®æ§åˆ¶"]
        L2C["Prompt åº“ç®¡ç†"]

        style Layer2 fill:#fff3e0,stroke:#e65100,stroke-width:2px
    end

    subgraph Layer1["Layer 1: Transport Layer"]
        L1A["gRPC / WebSocket / QUIC"]
        L1B["åŠ å¯†ä¼ è¾“ (TLS 1.3)"]

        style Layer1 fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    end

    Layer4 --&gt; Layer3
    Layer3 --&gt; Layer2
    Layer2 --&gt; Layer1

    style L4A fill:#c5cae9,stroke:#283593
    style L4B fill:#c5cae9,stroke:#283593
    style L4C fill:#c5cae9,stroke:#283593
    style L3A fill:#b3e5fc,stroke:#01579b
    style L3B fill:#b3e5fc,stroke:#01579b
    style L3C fill:#b3e5fc,stroke:#01579b
    style L2A fill:#ffe0b2,stroke:#e65100
    style L2B fill:#ffe0b2,stroke:#e65100
    style L2C fill:#ffe0b2,stroke:#e65100
</code></pre>
<h4 data-id="heading-75">9.2 å…³é”®æ¼”è¿›æ–¹å‘</h4>
<h5 data-id="heading-76"><strong>1. æ ‡å‡†åŒ–ç»„ç»‡æ¨åŠ¨</strong></h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># å¯èƒ½çš„æ ‡å‡†åŒ–è·¯å¾„</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">W3C</span> <span class="hljs-string">Web</span> <span class="hljs-string">Agent</span> <span class="hljs-string">Working</span> <span class="hljs-string">Group</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">å®šä¹‰</span> <span class="hljs-string">Web-native</span> <span class="hljs-string">Agent</span> <span class="hljs-string">Protocol</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">æµè§ˆå™¨åŸç”Ÿæ”¯æŒ</span> <span class="hljs-string">Agent</span> <span class="hljs-string">é€šä¿¡</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">IETF</span> <span class="hljs-string">RFC</span> <span class="hljs-string">ææ¡ˆ</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Agent</span> <span class="hljs-string">Communication</span> <span class="hljs-string">Protocol</span> <span class="hljs-string">(ACP)</span> <span class="hljs-string">RFC</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">ç±»ä¼¼</span> <span class="hljs-string">HTTP/2,</span> <span class="hljs-string">gRPC</span> <span class="hljs-string">çš„æ ‡å‡†åŒ–è¿›ç¨‹</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">Linux</span> <span class="hljs-string">Foundation</span> <span class="hljs-string">AI</span> <span class="hljs-string">&amp;</span> <span class="hljs-string">Data</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">MCP</span> <span class="hljs-string">Foundation</span> <span class="hljs-string">(ç±»ä¼¼</span> <span class="hljs-string">CNCF)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">å¼€æºå‚è€ƒå®ç°å’Œè®¤è¯ä½“ç³»</span>
</code></pre>
<h5 data-id="heading-77"><strong>2. æ€§èƒ½ä¼˜åŒ–</strong></h5>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// ä½¿ç”¨ gRPC æ›¿ä»£ JSON-RPC</span>
service AgentService {
  rpc <span class="hljs-title function_ invoke__">ExecuteTask</span>(TaskRequest) <span class="hljs-title function_ invoke__">returns</span> (stream TaskEvent);
  rpc <span class="hljs-title function_ invoke__">CallTool</span>(ToolCallRequest) <span class="hljs-title function_ invoke__">returns</span> (ToolCallResponse);
}

<span class="hljs-comment">// ä½¿ç”¨ Protocol Buffers æ›¿ä»£ JSON</span>
message TaskEvent {
  string task_id = <span class="hljs-number">1</span>;
  TaskState state = <span class="hljs-number">2</span>;
  oneof payload {
    AgentMessage message = <span class="hljs-number">3</span>;
    ToolCall tool_call = <span class="hljs-number">4</span>;
  }
}

<span class="hljs-comment">// æ€§èƒ½æå‡é¢„æœŸ</span>
<span class="hljs-comment">// - åºåˆ—åŒ–é€Ÿåº¦: 5-10x</span>
<span class="hljs-comment">// - ä¼ è¾“ä½“ç§¯: 30-50% å‡å°‘</span>
<span class="hljs-comment">// - ç±»å‹å®‰å…¨: ç¼–è¯‘æ—¶æ£€æŸ¥</span>
</code></pre>
<h5 data-id="heading-78"><strong>3. å®‰å…¨æ€§å¢å¼º</strong></h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Zero Trust Agent Network</span>
<span class="hljs-bullet">-</span> <span class="hljs-string">ç«¯åˆ°ç«¯åŠ å¯†</span> <span class="hljs-string">(E2EE)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Agent</span> <span class="hljs-string">é—´é€šä¿¡é»˜è®¤åŠ å¯†</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">å¯†é’¥è½®æ¢æœºåˆ¶</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">ç»†ç²’åº¦è®¿é—®æ§åˆ¶</span> <span class="hljs-string">(FGAC)</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">åŸºäº</span> <span class="hljs-string">RBAC</span> <span class="hljs-string">çš„å·¥å…·æƒé™</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">åŸºäº</span> <span class="hljs-string">ABAC</span> <span class="hljs-string">çš„èµ„æºè®¿é—®</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">å®¡è®¡ä¸åˆè§„</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">å®Œæ•´çš„è°ƒç”¨é“¾è¿½è¸ª</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">ç¬¦åˆ</span> <span class="hljs-string">SOC2</span> <span class="hljs-string">/</span> <span class="hljs-string">ISO27001</span>

<span class="hljs-bullet">-</span> <span class="hljs-string">æ²™ç®±å¢å¼º</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">WebAssembly</span> <span class="hljs-string">(WASI)</span> <span class="hljs-string">æ²™ç®±</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">å®¹å™¨çº§åˆ«éš”ç¦»</span> <span class="hljs-string">(Firecracker)</span>
</code></pre>
<h5 data-id="heading-79"><strong>4. å¯è§‚æµ‹æ€§</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// OpenTelemetry é›†æˆ</span>
<span class="hljs-keyword">import</span> { trace, context } <span class="hljs-keyword">from</span> <span class="hljs-string">'@opentelemetry/api'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">InstrumentedAgent</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">executeTask</span>(<span class="hljs-params">task: Task</span>) {
    <span class="hljs-keyword">const</span> span = trace.<span class="hljs-title function_">getTracer</span>(<span class="hljs-string">'agent'</span>).<span class="hljs-title function_">startSpan</span>(<span class="hljs-string">'execute_task'</span>, {
      <span class="hljs-attr">attributes</span>: {
        <span class="hljs-string">'task.id'</span>: task.<span class="hljs-property">id</span>,
        <span class="hljs-string">'agent.name'</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>,
        <span class="hljs-string">'agent.version'</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">version</span>
      }
    });

    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">executor</span>.<span class="hljs-title function_">execute</span>(task);
      span.<span class="hljs-title function_">setStatus</span>({ <span class="hljs-attr">code</span>: <span class="hljs-title class_">SpanStatusCode</span>.<span class="hljs-property">OK</span> });
      <span class="hljs-keyword">return</span> result;
    } <span class="hljs-keyword">catch</span> (error) {
      span.<span class="hljs-title function_">recordException</span>(error);
      span.<span class="hljs-title function_">setStatus</span>({ <span class="hljs-attr">code</span>: <span class="hljs-title class_">SpanStatusCode</span>.<span class="hljs-property">ERROR</span> });
      <span class="hljs-keyword">throw</span> error;
    } <span class="hljs-keyword">finally</span> {
      span.<span class="hljs-title function_">end</span>();
    }
  }
}

<span class="hljs-comment">// åˆ†å¸ƒå¼è¿½è¸ª</span>
<span class="hljs-title class_">User</span> â†’ <span class="hljs-title class_">Agent</span> A (<span class="hljs-attr">trace_id</span>: abc123, <span class="hljs-attr">span_id</span>: <span class="hljs-number">001</span>)
  â†’ <span class="hljs-variable constant_">MCP</span> <span class="hljs-title class_">Tool</span> <span class="hljs-number">1</span> (<span class="hljs-attr">trace_id</span>: abc123, <span class="hljs-attr">span_id</span>: <span class="hljs-number">002</span>)
  â†’ <span class="hljs-title class_">Agent</span> B (<span class="hljs-attr">trace_id</span>: abc123, <span class="hljs-attr">span_id</span>: <span class="hljs-number">003</span>)
    â†’ <span class="hljs-variable constant_">MCP</span> <span class="hljs-title class_">Tool</span> <span class="hljs-number">2</span> (<span class="hljs-attr">trace_id</span>: abc123, <span class="hljs-attr">span_id</span>: <span class="hljs-number">004</span>)
</code></pre>
<h5 data-id="heading-80"><strong>5. è·¨è¯­è¨€äº’æ“ä½œ</strong></h5>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           å¤šè¯­è¨€ SDK ç”Ÿæ€                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                          â”‚
â”‚  TypeScript  â”‚  @mcp/sdk, @acp/sdk                      â”‚
â”‚  Rust        â”‚  mcp-rs, acp-rs                          â”‚
â”‚  Python      â”‚  mcp-python, acp-python                  â”‚
â”‚  Go          â”‚  go-mcp, go-acp                          â”‚
â”‚  Java        â”‚  mcp-java, acp-java                      â”‚
â”‚                                                          â”‚
â”‚  å…±åŒç‰¹æ€§:                                               â”‚
â”‚  - Protocol Buffers å®šä¹‰                                â”‚
â”‚  - è‡ªåŠ¨ç”Ÿæˆä»£ç ç»‘å®š                                     â”‚
â”‚  - ç»Ÿä¸€çš„æµ‹è¯•å¥—ä»¶                                       â”‚
â”‚  - äº’æ“ä½œæ€§éªŒè¯                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h4 data-id="heading-81">9.3 åº”ç”¨åœºæ™¯å±•æœ›</h4>
<h5 data-id="heading-82"><strong>åœºæ™¯ 1: ä¼ä¸šçº§ AI Mesh</strong></h5>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># Agent æœåŠ¡ç½‘æ ¼</span>
<span class="hljs-attr">apiVersion:</span> <span class="hljs-string">v1</span>
<span class="hljs-attr">kind:</span> <span class="hljs-string">AgentMesh</span>
<span class="hljs-attr">metadata:</span>
  <span class="hljs-attr">name:</span> <span class="hljs-string">company-ai-mesh</span>
<span class="hljs-attr">spec:</span>
  <span class="hljs-attr">agents:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">code-gen-agent</span>
      <span class="hljs-attr">provider:</span> <span class="hljs-string">gemini</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span>
      <span class="hljs-attr">tools:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">github</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">gitlab</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">jira</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">code-review-agent</span>
      <span class="hljs-attr">provider:</span> <span class="hljs-string">claude</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">2</span>
      <span class="hljs-attr">tools:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">sonarqube</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">codecov</span>

    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">security-scan-agent</span>
      <span class="hljs-attr">provider:</span> <span class="hljs-string">codex</span>
      <span class="hljs-attr">replicas:</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">tools:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">snyk</span>
        <span class="hljs-bullet">-</span> <span class="hljs-string">trivy</span>

  <span class="hljs-attr">routing:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span> <span class="hljs-string">code_generation</span>
      <span class="hljs-attr">route:</span> <span class="hljs-string">code-gen-agent</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span> <span class="hljs-string">code_review</span>
      <span class="hljs-attr">route:</span> <span class="hljs-string">code-review-agent</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">match:</span> <span class="hljs-string">security_scan</span>
      <span class="hljs-attr">route:</span> <span class="hljs-string">security-scan-agent</span>
</code></pre>
<h5 data-id="heading-83"><strong>åœºæ™¯ 2: Personal AI Assistant Ecosystem</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¸ªäºº AI åŠ©æ‰‹ç¼–æ’</span>
<span class="hljs-keyword">const</span> personalAI = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AgentOrchestrator</span>({
  <span class="hljs-attr">agents</span>: {
    <span class="hljs-attr">calendar</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'http://calendar-agent:8080'</span> }),
    <span class="hljs-attr">email</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'http://email-agent:8081'</span> }),
    <span class="hljs-attr">task</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'http://task-agent:8082'</span> }),
    <span class="hljs-attr">research</span>: <span class="hljs-keyword">await</span> <span class="hljs-title function_">createAgent</span>({ <span class="hljs-attr">url</span>: <span class="hljs-string">'http://research-agent:8083'</span> })
  }
});

<span class="hljs-comment">// å¤æ‚ä»»åŠ¡ç¼–æ’</span>
<span class="hljs-keyword">await</span> personalAI.<span class="hljs-title function_">execute</span>({
  <span class="hljs-attr">task</span>: <span class="hljs-string">"å‡†å¤‡ä¸‹å‘¨çš„äº§å“å‘å¸ƒä¼š"</span>,
  <span class="hljs-attr">steps</span>: [
    {
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'calendar'</span>,
      <span class="hljs-attr">action</span>: <span class="hljs-string">'æ£€æŸ¥ä¸‹å‘¨æ—¥ç¨‹å¹¶é¢„å®šä¼šè®®å®¤'</span>
    },
    {
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'task'</span>,
      <span class="hljs-attr">action</span>: <span class="hljs-string">'åˆ›å»ºå‘å¸ƒä¼šä»»åŠ¡æ¸…å•'</span>
    },
    {
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'research'</span>,
      <span class="hljs-attr">action</span>: <span class="hljs-string">'è°ƒç ”ç«å“æœ€æ–°åŠ¨æ€'</span>,
      <span class="hljs-attr">depends_on</span>: [<span class="hljs-string">'task'</span>]
    },
    {
      <span class="hljs-attr">agent</span>: <span class="hljs-string">'email'</span>,
      <span class="hljs-attr">action</span>: <span class="hljs-string">'å‘é€ä¼šè®®é‚€è¯·ç»™ç›¸å…³äººå‘˜'</span>,
      <span class="hljs-attr">depends_on</span>: [<span class="hljs-string">'calendar'</span>, <span class="hljs-string">'research'</span>]
    }
  ]
});
</code></pre>
<hr/>
<h3 data-id="heading-84">åã€ç»™å¼€å‘è€…çš„å»ºè®®</h3>
<h4 data-id="heading-85">10.1 é€‰æ‹© MCP è¿˜æ˜¯ ACPï¼Ÿ</h4>



































<table><thead><tr><th>å¦‚æœä½ éœ€è¦...</th><th>æ¨èåè®®</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>ä¸º Agent æ·»åŠ å¤–éƒ¨å·¥å…·èƒ½åŠ›</td><td><strong>MCP</strong></td><td>æˆç†Ÿçš„å·¥å…·å‘ç°å’Œè°ƒç”¨æœºåˆ¶</td></tr><tr><td>æ„å»ºå¤š Agent åä½œç³»ç»Ÿ</td><td><strong>ACP/A2A</strong></td><td>åŸç”Ÿçš„ Agent é—´é€šä¿¡æ”¯æŒ</td></tr><tr><td>ä¼ä¸šçº§åˆè§„å’Œå®¡è®¡</td><td><strong>Codex SQ/EQ</strong></td><td>å®Œæ•´çš„å®¡æ‰¹æµç¨‹å’ŒçŠ¶æ€è¿½è¸ª</td></tr><tr><td>å¿«é€ŸåŸå‹å¼€å‘</td><td><strong>MCP</strong></td><td>ä¸°å¯Œçš„ç¤¾åŒºå·¥å…·å’Œç¤ºä¾‹</td></tr><tr><td>é«˜æ€§èƒ½ç”Ÿäº§ç¯å¢ƒ</td><td><strong>Codex (Rust)</strong></td><td>ä½å»¶è¿Ÿã€ä½å†…å­˜å ç”¨</td></tr></tbody></table>
<h4 data-id="heading-86">10.2 æœ€ä½³å®è·µ</h4>
<h5 data-id="heading-87"><strong>1. MCP Server å¼€å‘</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å¥½çš„å®è·µ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@modelcontextprotocol/sdk/server'</span>;

<span class="hljs-keyword">const</span> server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'my-tool-server'</span>,
  <span class="hljs-attr">version</span>: <span class="hljs-string">'1.0.0'</span>
});

<span class="hljs-comment">// æä¾›è¯¦ç»†çš„å·¥å…·æè¿°</span>
server.<span class="hljs-title function_">setRequestHandler</span>(<span class="hljs-title class_">ListToolsRequestSchema</span>, <span class="hljs-keyword">async</span> () =&gt; ({
  <span class="hljs-attr">tools</span>: [{
    <span class="hljs-attr">name</span>: <span class="hljs-string">'search_documents'</span>,
    <span class="hljs-attr">description</span>: <span class="hljs-string">'åœ¨æ–‡æ¡£åº“ä¸­æœç´¢ç›¸å…³å†…å®¹ã€‚æ”¯æŒå…¨æ–‡æœç´¢å’Œè¯­ä¹‰æœç´¢ã€‚'</span>,
    <span class="hljs-attr">inputSchema</span>: {
      <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
      <span class="hljs-attr">properties</span>: {
        <span class="hljs-attr">query</span>: {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
          <span class="hljs-attr">description</span>: <span class="hljs-string">'æœç´¢å…³é”®è¯æˆ–è‡ªç„¶è¯­è¨€é—®é¢˜'</span>
        },
        <span class="hljs-attr">mode</span>: {
          <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span>,
          <span class="hljs-attr">enum</span>: [<span class="hljs-string">'fulltext'</span>, <span class="hljs-string">'semantic'</span>],
          <span class="hljs-attr">default</span>: <span class="hljs-string">'semantic'</span>,
          <span class="hljs-attr">description</span>: <span class="hljs-string">'æœç´¢æ¨¡å¼'</span>
        }
      },
      <span class="hljs-attr">required</span>: [<span class="hljs-string">'query'</span>]
    }
  }]
}));

<span class="hljs-comment">// âŒ ä¸å¥½çš„å®è·µ</span>
<span class="hljs-keyword">const</span> badTools = [{
  <span class="hljs-attr">name</span>: <span class="hljs-string">'search'</span>,  <span class="hljs-comment">// åç§°è¿‡äºæ³›åŒ–</span>
  <span class="hljs-attr">description</span>: <span class="hljs-string">'æœç´¢'</span>,  <span class="hljs-comment">// æè¿°ä¸æ¸…æ™°</span>
  <span class="hljs-attr">inputSchema</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">'object'</span>,
    <span class="hljs-attr">properties</span>: {
      <span class="hljs-attr">q</span>: { <span class="hljs-attr">type</span>: <span class="hljs-string">'string'</span> }  <span class="hljs-comment">// å‚æ•°åä¸æ˜ç¡®</span>
    }
  }
}];
</code></pre>
<h5 data-id="heading-88"><strong>2. Agent å®‰å…¨è®¾è®¡</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å¥½çš„å®è·µ: æœ€å°æƒé™åŸåˆ™</span>
<span class="hljs-keyword">const</span> agentConfig = {
  <span class="hljs-attr">mcpServers</span>: {
    <span class="hljs-attr">filesystem</span>: {
      <span class="hljs-attr">command</span>: <span class="hljs-string">'npx'</span>,
      <span class="hljs-attr">args</span>: [<span class="hljs-string">'-y'</span>, <span class="hljs-string">'@mcp/server-filesystem'</span>, <span class="hljs-string">'/workspace/project'</span>],
      <span class="hljs-comment">// ä»…å…è®¸è®¿é—®é¡¹ç›®ç›®å½•</span>
      <span class="hljs-attr">env</span>: {
        <span class="hljs-attr">ALLOWED_PATHS</span>: <span class="hljs-string">'/workspace/project'</span>
      }
    }
  },
  <span class="hljs-attr">execPolicy</span>: {
    <span class="hljs-attr">autoApprove</span>: [
      <span class="hljs-string">'npm install'</span>,
      <span class="hljs-string">'git status'</span>,
      <span class="hljs-string">'git diff'</span>
    ],
    <span class="hljs-attr">alwaysDeny</span>: [
      <span class="hljs-string">'rm -rf /'</span>,
      <span class="hljs-string">'sudo *'</span>,
      <span class="hljs-string">'chmod 777 *'</span>
    ]
  }
};

<span class="hljs-comment">// âŒ ä¸å¥½çš„å®è·µ: è¿‡åº¦æƒé™</span>
<span class="hljs-keyword">const</span> badConfig = {
  <span class="hljs-attr">mcpServers</span>: {
    <span class="hljs-attr">filesystem</span>: {
      <span class="hljs-attr">args</span>: [<span class="hljs-string">'/'</span>],  <span class="hljs-comment">// å…è®¸è®¿é—®æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿ</span>
    }
  },
  <span class="hljs-attr">execPolicy</span>: {
    <span class="hljs-attr">autoApprove</span>: [<span class="hljs-string">'*'</span>]  <span class="hljs-comment">// è‡ªåŠ¨æ‰¹å‡†æ‰€æœ‰å‘½ä»¤</span>
  }
};
</code></pre>
<h5 data-id="heading-89"><strong>3. é”™è¯¯å¤„ç†å’Œé‡è¯•</strong></h5>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// âœ… å¥½çš„å®è·µ: æŒ‡æ•°é€€é¿é‡è¯•</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">callToolWithRetry</span>(<span class="hljs-params">
  tool: <span class="hljs-built_in">string</span>,
  params: <span class="hljs-built_in">any</span>,
  maxRetries = <span class="hljs-number">3</span>
</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">any</span>&gt; {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> attempt = <span class="hljs-number">0</span>; attempt &lt; maxRetries; attempt++) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> mcpClient.<span class="hljs-title function_">callTool</span>(tool, params);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">if</span> (attempt === maxRetries - <span class="hljs-number">1</span>) <span class="hljs-keyword">throw</span> error;

      <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isRetryable</span>(error)) {
        <span class="hljs-keyword">const</span> backoff = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-number">2</span>, attempt) * <span class="hljs-number">1000</span>;
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(backoff);
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-keyword">throw</span> error;
    }
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isRetryable</span>(<span class="hljs-params">error: <span class="hljs-built_in">Error</span></span>): <span class="hljs-built_in">boolean</span> {
  <span class="hljs-comment">// ç½‘ç»œé”™è¯¯ã€è¶…æ—¶ç­‰å¯é‡è¯•</span>
  <span class="hljs-keyword">return</span> error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ETIMEDOUT'</span>) ||
         error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'ECONNREFUSED'</span>);
}
</code></pre>
<hr/>
<h3 data-id="heading-90">åä¸€ã€æ€»ç»“</h3>
<h4 data-id="heading-91">11.1 æ ¸å¿ƒæ´å¯Ÿ</h4>
<ol>
<li><strong>MCP</strong> ä¸“æ³¨äº <strong>Agent â†” å·¥å…·/èµ„æº</strong> çš„æ ‡å‡†åŒ–ï¼Œç”± Anthropic ä¸»å¯¼</li>
<li><strong>ACP</strong> æ˜¯ <strong>Editor â†” Agent</strong> çš„å®˜æ–¹æ ‡å‡†ï¼Œç”± Zed Industries å‘å¸ƒï¼Œç±»ä¼¼äº LSP åœ¨è¯­è¨€æœåŠ¡å™¨é¢†åŸŸçš„ä½œç”¨</li>
<li><strong>A2A</strong> (Gemini å®ç°) ä¸“æ³¨äº <strong>Agent â†” Agent</strong> çš„äº’æ“ä½œï¼Œæ˜¯æ„å»º Multi-Agent ç³»ç»Ÿçš„æ¢ç´¢</li>
<li><strong>Codex SQ/EQ</strong> æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„ <strong>ç”¨æˆ· â†” Agent</strong> äº¤äº’æ¨¡å‹ï¼Œå¼ºè°ƒå®‰å…¨æ€§å’Œå¯æ§æ€§</li>
</ol>
<h4 data-id="heading-92">11.2 æŠ€æœ¯è¶‹åŠ¿</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-number">2024          </span><span class="hljs-number">2025          </span><span class="hljs-number">2026          </span><span class="hljs-number">2027</span>
  <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>
  <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">MCP</span> <span class="hljs-number">1.0</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">MCP++</span>      <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">Unified</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">W3C</span> <span class="hljs-string">Standard</span>
  <span class="hljs-string">â”‚</span>  <span class="hljs-string">å‘å¸ƒ</span>       <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">gRPC</span>     <span class="hljs-string">â”‚</span>  <span class="hljs-string">Protocol</span>   <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">æµè§ˆå™¨åŸç”Ÿ</span>
  <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">WebAssemblyâ”‚</span>            <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">ç¡¬ä»¶åŠ é€Ÿ</span>
  <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">A2A</span> <span class="hljs-number">0.3</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">A2A</span> <span class="hljs-number">1.0</span>    <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">Agent</span> <span class="hljs-string">Mesh</span> <span class="hljs-string">â”œâ”€</span> <span class="hljs-string">Edge</span> <span class="hljs-string">AI</span>
  <span class="hljs-string">â”‚</span>  <span class="hljs-string">å®éªŒ</span>       <span class="hljs-string">â”‚</span>  <span class="hljs-string">ç”Ÿäº§å¯ç”¨</span>   <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">K8s</span> <span class="hljs-string">é›†æˆ</span> <span class="hljs-string">â”‚</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">æœ¬åœ°ä¼˜å…ˆ</span>
  <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>             <span class="hljs-string">â”‚</span>
  <span class="hljs-string">â””â”€</span> <span class="hljs-string">ç¢ç‰‡åŒ–</span>     <span class="hljs-string">â””â”€</span> <span class="hljs-string">èåˆæœŸ</span>     <span class="hljs-string">â””â”€</span> <span class="hljs-string">æˆç†ŸæœŸ</span>     <span class="hljs-string">â””â”€</span> <span class="hljs-string">æ™®åŠæœŸ</span>
</code></pre>
<h4 data-id="heading-93">11.3 ç»™æœªæ¥çš„æ€è€ƒ</h4>
<blockquote>
<p><strong>"The future of AI is not just about smarter models, but about smarter collaboration between models."</strong></p>
<p>â€”â€” æœªæ¥çš„ AI ä¸ä»…ä»…æ˜¯æ›´æ™ºèƒ½çš„æ¨¡å‹ï¼Œè€Œæ˜¯æ¨¡å‹ä¹‹é—´æ›´æ™ºèƒ½çš„åä½œã€‚</p>
</blockquote>
<p>åè®®æ ‡å‡†åŒ–æ˜¯ AI Agent ä» <strong>å·¥å…·</strong> å‘ <strong>åŸºç¡€è®¾æ–½</strong> æ¼”è¿›çš„å…³é”®ä¸€æ­¥ã€‚å°±åƒ HTTP æˆå°±äº†äº’è”ç½‘ï¼ŒDocker æˆå°±äº†äº‘åŸç”Ÿï¼Œ<strong>MCP å’Œ ACP æ­£åœ¨æˆå°± AI Agent çš„ç”Ÿæ€ç³»ç»Ÿ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-94">å‚è€ƒèµ„æº</h3>
<h4 data-id="heading-95">å®˜æ–¹æ–‡æ¡£</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmodelcontextprotocol.io%2Fspecification" target="_blank" title="https://modelcontextprotocol.io/specification" ref="nofollow noopener noreferrer">Model Context Protocol (MCP) Specification</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fagentclientprotocol.com%2F" target="_blank" title="https://agentclientprotocol.com/" ref="nofollow noopener noreferrer">Agent Client Protocol (ACP) Official Site</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fagentclientprotocol.com%2Fprotocol%2Foverview" target="_blank" title="https://agentclientprotocol.com/protocol/overview" ref="nofollow noopener noreferrer">ACP Protocol Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle-gemini%2Fgemini-cli" target="_blank" title="https://github.com/google-gemini/gemini-cli" ref="nofollow noopener noreferrer">Gemini CLI Documentation</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fcodex" target="_blank" title="https://github.com/openai/codex" ref="nofollow noopener noreferrer">Codex CLI Documentation</a></li>
</ul>
<h4 data-id="heading-96">æºç ä»“åº“</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentclientprotocol%2Fagent-client-protocol" target="_blank" title="https://github.com/agentclientprotocol/agent-client-protocol" ref="nofollow noopener noreferrer">Agent Client Protocol</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fagentclientprotocol%2Ftypescript-sdk" target="_blank" title="https://github.com/agentclientprotocol/typescript-sdk" ref="nofollow noopener noreferrer">ACP TypeScript SDK</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fgoogle-gemini%2Fgemini-cli" target="_blank" title="https://github.com/google-gemini/gemini-cli" ref="nofollow noopener noreferrer">Gemini CLI</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenai%2Fcodex" target="_blank" title="https://github.com/openai/codex" ref="nofollow noopener noreferrer">Codex CLI</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Ftypescript-sdk" target="_blank" title="https://github.com/modelcontextprotocol/typescript-sdk" ref="nofollow noopener noreferrer">MCP TypeScript SDK</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fpython-sdk" target="_blank" title="https://github.com/modelcontextprotocol/python-sdk" ref="nofollow noopener noreferrer">MCP Python SDK</a></li>
</ul>
<h4 data-id="heading-97">ç¤¾åŒºèµ„æº</h4>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2Fservers" target="_blank" title="https://github.com/modelcontextprotocol/servers" ref="nofollow noopener noreferrer">MCP Servers Hub</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fpunkpeye%2Fawesome-mcp-servers" target="_blank" title="https://github.com/punkpeye/awesome-mcp-servers" ref="nofollow noopener noreferrer">Awesome MCP Servers</a></li>
</ul>
<p><strong>ä½œè€…</strong>ï¼šå‰ç«¯é¢†ç§€â€”â€”æ‚„æ‚„å­¦ä¹ ï¼ŒæƒŠè‰³æ‰€æœ‰äºº~</p>
<h3 data-id="heading-98"><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0756528722f34e8d940996215c1693af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6a2B6aaW:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764835972&amp;x-signature=owqb0Tvjt1v0MOVxKd02Ca%2FAlXo%3D" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-ç™½è‰²ç‰ˆ.png" loading="lazy"/></h3></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€TRAE SOLO å®æˆ˜å¹²è´§ï¼šä»é›¶åˆ°ä¸€éƒ¨ç½²å›½å†…ç‰ˆâ€œæ‹ç«‹å¾—â€åº”ç”¨çš„è¸©å‘é¿å‘æŒ‡å—ğŸ§£]]></title>    <link>https://juejin.cn/post/7577198193214750763</link>    <guid>https://juejin.cn/post/7577198193214750763</guid>    <pubDate>2025-11-27T08:28:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577198193214750763" data-draft-id="7576953459544424502" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€TRAE SOLO å®æˆ˜å¹²è´§ï¼šä»é›¶åˆ°ä¸€éƒ¨ç½²å›½å†…ç‰ˆâ€œæ‹ç«‹å¾—â€åº”ç”¨çš„è¸©å‘é¿å‘æŒ‡å—ğŸ§£"/> <meta itemprop="keywords" content="Trae"/> <meta itemprop="datePublished" content="2025-11-27T08:28:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å›´å·¾å“¥è§å°˜"/> <meta itemprop="url" content="https://juejin.cn/user/1222312659548446"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€TRAE SOLO å®æˆ˜å¹²è´§ï¼šä»é›¶åˆ°ä¸€éƒ¨ç½²å›½å†…ç‰ˆâ€œæ‹ç«‹å¾—â€åº”ç”¨çš„è¸©å‘é¿å‘æŒ‡å—ğŸ§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1222312659548446/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å›´å·¾å“¥è§å°˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:28:14.000Z" title="Thu Nov 27 2025 08:28:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    11
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸš€TRAE SOLO å®æˆ˜å¹²è´§ï¼šä»é›¶åˆ°ä¸€éƒ¨ç½²å›½å†…ç‰ˆâ€œæ‹ç«‹å¾—â€åº”ç”¨çš„è¸©å‘é¿å‘æŒ‡å—ğŸ§£</h2>
<p><strong>å¯¼è¯»ï¼š</strong> éšç€ TRAE SOLO 3.0 Code å·¥å…·åŠŸèƒ½çš„æ—¥ç›Šå¼ºå¤§ï¼Œå¿«é€Ÿæ„å»ºåº”ç”¨æˆä¸ºå¯èƒ½ã€‚ä»Šå¤©ï¼Œç»™å¤§å®¶åˆ†æé›¶åŸºç¡€å°ç™½å¦‚ä½•æ„å»ºå¦‚â€œæ‹ç«‹å¾—â€è¿™ç±»çƒ­é—¨äº§å“ï¼Œå¹¶åˆ†äº«æé«˜å¼€å‘çš„æ•ˆç‡çš„è§£å†³é—®é¢˜çš„å®æˆ˜ç­–ç•¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/29096b33051e451dbfc88fc84592ad24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=AZvgfqA6YT9MUD2Ac6i2MZcql6I%3D" alt="æˆªå±2025-11-27 15.23.18.png" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.bilibili.com%2Fvideo%2FBV1oRUzBZEPQ%2F%3Fspm_id_from%3D333.1387.homepage.video_card.click" target="_blank" title="https://www.bilibili.com/video/BV1oRUzBZEPQ/?spm_id_from=333.1387.homepage.video_card.click" ref="nofollow noopener noreferrer">TRAE SOLO Code 3.0 æ‹ç«‹å¾—å›½å†…ç‰ˆæœ¬å¼€å‘å®é™…æ¼”ç¤ºğŸ§£#TRAE 3.0 SOLOå‡ºé“ å¹¶ @trae #SOLOå·²å°±ä½ #TRAEå‘å¸ƒ ##TR</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Ftrae52utezgj.vercel.app%2F" target="_blank" title="https://trae52utezgj.vercel.app/" ref="nofollow noopener noreferrer">trae52utezgj.vercel.app/</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fba2220af8a4d4fb94f9fbdd56d2482~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=T9iAyggH2%2BdU2JQuBTy5hdswHsU%3D" alt="35.gif" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€éƒ¨åˆ†ï¼šå®æˆ˜ä¸­çš„â€œå››å¤§æ·±å‘â€ä¸é«˜æ•ˆé¿å‘æŒ‡å—</h3>
<p>åœ¨ TRAE  çš„å¼€å‘æµç¨‹ä¸­ï¼Œè®¸å¤šé—®é¢˜å¹¶éæŠ€æœ¯éš¾é¢˜ï¼Œè€Œæ˜¯å·¥å…·ç‰¹æ€§å’Œæ“ä½œé€»è¾‘å¸¦æ¥çš„é™åˆ¶ã€‚æŒæ¡ä»¥ä¸‹é¿å‘ç­–ç•¥ï¼Œèƒ½å¤§å¹…ç¼©çŸ­è¿­ä»£æ—¶é—´ï¼š</p>
<h4 data-id="heading-2">é™·é˜±ä¸€ï¼šåˆå§‹æ•ˆæœï¼Œä¸å°½äººæ„</h4>
<p>å½“å·¥å…·æ ¹æ®ä½ çš„åˆå§‹æç¤ºï¼ˆPromptï¼‰ç”Ÿæˆåˆæ­¥ç•Œé¢æ—¶ï¼Œå…¶ç¾è§‚åº¦å’Œç»†èŠ‚å¾€å¾€å’Œä½ çš„æç¤ºè¯å’ŒåŸå‹å›¾æ¯æ¯ç›¸å…³ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b52d4db733fc416ba1c7b4e8b4bcbd7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=Qd1zBl4i%2B%2BcBF2S2IEz72abjJBc%3D" alt="æˆªå±2025-11-27 10.46.43.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>é¿å‘æŒ‡å—ï¼ˆç­–ç•¥ï¼‰ï¼š</strong> <strong>ä¼˜åŒ–åŸå‹å’Œæç¤ºè¯æ˜¯å…³é”®</strong>ã€‚</p>
<ol>
<li>
<p><strong>åŸå‹åˆ¶èƒœï¼š</strong> æˆ‘ä¸ªäººçš„ç»éªŒæ€»ç»“æ˜¯ï¼Œåœ¨åˆ¶ä½œä»»ä½•äº§å“æ—¶ï¼Œ <strong>ä½ çš„åŸå‹ çš„ å›¾ç‰‡ è¶Š å¥½</strong> ï¼Œå·¥å…·å°±<strong>è¶Š èƒ½ å¤Ÿ å» è¿˜ åŸ ä½  çš„ è¿™ ä¸ª åŸå‹ å›¾ çš„ æ · å¼</strong>ã€‚é«˜å“è´¨çš„åŸå‹å’Œæç¤ºè¯æ˜¯é«˜æ•ˆè¿˜åŸçš„åŸºç¡€ã€‚</p>
</li>
<li>
<p><strong>å€ŸåŠ©å¤–éƒ¨å·¥å…·ï¼š</strong> å½“åˆå§‹æ•ˆæœä¸æ»¡æ„æ—¶ï¼Œåº”é‡æ–°åˆ¶ä½œå’Œä¼˜åŒ–æç¤ºã€‚æˆ‘ä¸€èˆ¬ä¸‹éƒ½æ˜¯<strong>å€ŸåŠ© Google Gemini</strong> æ¥ç”Ÿæˆä¸€æ®µæ›´ç²¾ç»†ã€æ›´å‡†ç¡®çš„æç¤ºï¼Œä»¥æ­¤æ¥ä¼˜åŒ–ç•Œé¢ã€‚</p>
</li>
</ol>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/316baf32d63a4db38b7c7c5eeccb3076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=fOG2TPF3N%2FUODw2ZVWFrIEfKM9M%3D" alt="æˆªå±2025-11-27 15.25.28.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">A</span> creamy beige retro instant camera on the <span class="hljs-attribute">left</span>, facing forward with <span class="hljs-selector-tag">a</span> reflection of <span class="hljs-selector-tag">a</span> girl in the lens. <span class="hljs-selector-tag">To</span> the <span class="hljs-attribute">right</span>, three scattered Polaroid photos of <span class="hljs-selector-tag">a</span> young Asian woman with long hair in playful selfie poses. The photos have handwritten text at the <span class="hljs-attribute">bottom</span> saying "MAY <span class="hljs-selector-tag">I</span> MEET YOU" and "<span class="hljs-number">2025</span>/<span class="hljs-number">11</span>/<span class="hljs-number">19</span>". Clean light gray <span class="hljs-attribute">background</span> with <span class="hljs-selector-tag">a</span> subtle white polka dot pattern. Soft studio lighting, <span class="hljs-number">3</span>D C4D render style, cute aesthetic, high detail, product photography vibe, soft shadows.

ä¸­æ–‡æç¤ºè¯åˆ†æ (ç”¨äºç†è§£æˆ–å›½å†… AI å·¥å…·):

ä¸»ä½“ï¼š å¥¶é»„è‰²çš„å¤å¤æ‹ç«‹å¾—ç›¸æœº (Creamy beige retro instant camera)ï¼Œé•œå¤´æœ‰åå…‰ç»†èŠ‚ (Reflection in lens)ã€‚

é…è§’ï¼š ä¸‰å¼ æ‹ç«‹å¾—ç…§ç‰‡ (Three Polaroid photos)ï¼Œæ•£è½åœ¨å³ä¾§ã€‚

äººç‰©å†…å®¹ï¼š äºšæ´²å¥³å­©è‡ªæ‹ (Asian girl selfies)ï¼Œé•¿å‘ï¼Œä¿çš®å§¿åŠ¿ã€‚

æ–‡å­—ï¼š ç…§ç‰‡åº•éƒ¨å†™ç€ <span class="hljs-string">"MAY I MEET YOU"</span> å’Œæ—¥æœŸã€‚

èƒŒæ™¯ï¼š æµ…ç°è‰²èƒŒæ™¯ï¼Œå¸¦ç™½è‰²æ³¢ç‚¹å›¾æ¡ˆ (Light gray background with white dots)ã€‚

é£æ ¼ï¼š C4D <span class="hljs-number">3</span>Dæ¸²æŸ“é£æ ¼ï¼Œç”µå•†äº§å“æ‘„å½±ï¼ŒæŸ”å…‰ï¼Œå¯çˆ±ï¼Œé«˜è´¨æ„Ÿã€‚

å…³é”®ç»†èŠ‚æ³¨æ„äº‹é¡¹ï¼š

å…³äºæ–‡å­—ï¼š ç›®å‰çš„ AIï¼ˆå¦‚ FLUX æˆ– Midjourney v6ï¼‰å·²ç»èƒ½æ¯”è¾ƒå‡†ç¡®åœ°ç”ŸæˆæŒ‡å®šçš„æ–‡å­—ï¼Œä½†æ—¥æœŸå’Œå…·ä½“å¥å­å¯èƒ½éœ€è¦æŠ½å¡å‡ æ¬¡æ‰èƒ½å®Œå…¨æ­£ç¡®ã€‚

å…³äºé¼ æ ‡æ‰‹åŠ¿ï¼š å›¾ä¸­å³ä¸‹è§’çš„ç…§ç‰‡ä¸Šæœ‰ä¸€ä¸ªç™½è‰²çš„â€œé¼ æ ‡æ‰‹å‹å…‰æ ‡â€ï¼Œè¿™æš—ç¤ºäº†è¿™å¯èƒ½æ˜¯ä¸€å¼  UI ç•Œé¢è®¾è®¡å›¾æˆ–è€…æ˜¯ä¸ºäº†å¢åŠ äº’åŠ¨æ„Ÿçš„è®¾è®¡ã€‚å¦‚æœåœ¨æç¤ºè¯ä¸­éœ€è¦è¿™ä¸ªç»†èŠ‚ï¼Œå¯ä»¥åŠ ä¸Š <span class="hljs-string">"a white cursor hand icon hovering over one photo"</span>ã€‚
</code></pre>
<h4 data-id="heading-3">é™·é˜±äºŒï¼šåŠŸèƒ½ç¼ºå¤±ä¸ç­‰å¾…å»¶è¿Ÿ</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b4f06b7789e42deac043a456a76de7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=laxzR2xJ4YlvO4Vp%2BDlxrifnG%2Bo%3D" alt="æˆªå±2025-11-27 15.56.44.png" loading="lazy"/></p>
<p>åœ¨åŠŸèƒ½å®Œå–„é˜¶æ®µï¼Œæˆ‘å‘ç°æ‰“é€ â€œæ‹ç«‹å¾—â€åº”ç”¨ç¼ºå°‘å¿…è¦çš„<strong>æ¸…é™¤åŠŸèƒ½</strong>å’Œ<strong>åˆ é™¤åŠŸèƒ½ <strong>ã€‚åŒæ—¶ï¼Œåœ¨è¦æ±‚å·¥å…·å¢åŠ åŠŸèƒ½æ—¶ï¼Œå®ƒâ€œæœ‰ çš„ æ—¶ å€™ å®ƒ å åº” çš„ æ—¶ å€™ æ¯” è¾ƒ æ…¢â€ï¼Œ</strong> â€œä¸èƒ½å¤Ÿç›´æ¥å¿«é€Ÿæ‰§è¡Œâ€</strong>ã€‚</p>
<ul>
<li>
<p><strong>é¿å‘æŒ‡å—ï¼ˆè§£å†³æ–¹æ¡ˆï¼‰ï¼š</strong></p>
<ol>
<li><strong>æ˜ç¡®è¦æ±‚å¢è¡¥ï¼š</strong> å¿…é¡»é€šè¿‡æç¤ºæ˜ç¡®è¦æ±‚å·¥å…·å¢è¡¥ç¼ºå¤±çš„åŠŸèƒ½ï¼Œä¾‹å¦‚è¦æ±‚å®ƒ<strong>å» å¢ åŠ  è¿™ ä¸ª æ¸… é™¤ çš„ åŠŸ èƒ½ å’Œ è¿™ ä¸ª åˆ  é™¤ çš„ åŠŸ èƒ½</strong>ã€‚</li>
<li><strong>é‡å¤æ“ä½œæ³•ï¼š</strong> é’ˆå¯¹å·¥å…·æ‰§è¡Œå»¶è¿Ÿçš„é—®é¢˜ï¼Œæˆ‘ä»¬çš„ç»éªŒæ˜¯ï¼Œéœ€è¦<strong>å¤š å» é‡ å¤ çš„ æ“ ä½œ ä¸€ ä¸‹</strong>ï¼Œè¿™æ ·å®ƒæ‰èƒ½æ¯”è¾ƒå¿«åœ°æ‰§è¡Œæˆ‘ä»¬çš„æƒ³æ³•ã€‚</li>
</ol>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7bb54b99bff4026aaa87d990b17ba4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=d3OAM2q03GbeEAqeHUBVRfR6a%2FY%3D" alt="æˆªå±2025-11-27 15.56.35.png" loading="lazy"/></p>
<h4 data-id="heading-4">é™·é˜±ä¸‰ï¼šå›½å†…ç‰ˆæœ¬éƒ¨ç½²åŠŸèƒ½ç¼ºå¤±</h4>
<p>å›½å†…ç‰ˆæœ¬çš„ TRAE  â€œç¼ºä¹ä¸€ä¸ªéƒ¨ç½²çš„ è¿™ä¸ª æŒ‰ é’®â€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å›½é™…ç‰ˆ TRAE æ¥ç»“åˆä½¿ç”¨ï¼Œä»è€Œå®Œæˆè‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9011bd3309e4b4c97391a7f88823e3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Zu05be-5ZOl6JCn5bCY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764838092&amp;x-signature=qtYGZBiSfaMAXXglAsHyjkkU32E%3D" alt="æˆªå±2025-11-27 16.19.10.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>é¿å‘æŒ‡å—ï¼ˆè§£å†³æ–¹æ¡ˆï¼‰ï¼š</strong> <strong>ç‰ˆæœ¬éƒ¨ç½²</strong>ã€‚</p>
<ul>
<li>ä½¿ç”¨<strong>å›½é™…ç‰ˆæœ¬</strong>çš„æµè§ˆå™¨ç•Œé¢å»å®Œæˆåº”ç”¨çš„éƒ¨ç½²ã€‚åœ¨å›½é™…ç‰ˆæœ¬ä¸­æ‰¾åˆ°éƒ¨ç½²æŒ‰é’®å¹¶ç‚¹å‡»ï¼Œæ‰èƒ½å°†åº”ç”¨çš„ç½‘å€ä¸Šä¼ ä¸Šå»ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šæ•ˆç‡å€å¢çš„ä¸ªäººç»éªŒæ€»ç»“ä¸æ€ç»´å‡çº§</h3>
<p>ä½¿ç”¨ TRAE SOLO ç»ä¸ä»…ä»…æ˜¯è¾“å…¥æç¤ºè¯ï¼Œæ›´é‡è¦çš„æ˜¯æ€ç»´æ¨¡å¼çš„è½¬å˜ã€‚</p>
<h4 data-id="heading-6">1. æ ¸å¿ƒçš„â€œå¹²è´§â€ï¼šé—®é¢˜çš„å®šä¹‰æ˜¯é‡ä¸­ä¹‹é‡</h4>
<p>å½“å‰ç¼–ç¨‹å·¥å…·çš„åŠŸèƒ½å·²ç»â€œæ¯”è¾ƒå¼ºå¤§â€ã€‚å› æ­¤ï¼Œ <strong>â€œä½  æœ€ éœ€ è¦ å» åš æ ¸ å¿ƒ çš„ äº‹ æƒ…â€</strong> ï¼Œä¸å†æ˜¯å…³æ³¨å¦‚ä½•ç¼–ç ï¼Œè€Œæ˜¯è¦**â€œå» å®Œ æˆ è¿™ ä¸ª æ ¸ å¿ƒ çš„ è§£ å†³â€ <strong>ï¼Œå³ï¼š</strong> â€œé—® é¡Œ çš„ å®š ä¹‰ å°± å¾ˆ é‡ è¦â€**ã€‚</p>
<ul>
<li><strong>æ€ç»´è½¬å˜ï¼š</strong> åº”å½“æ€è€ƒä½ åœ¨æ—¥å¸¸å·¥ä½œæˆ–ç”Ÿæ´»ä¸­é‡åˆ°äº†<strong>ä»€ä¹ˆæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ <strong>ï¼Œç„¶ååˆ©ç”¨è¿™äº›å·¥å…·æ¥è§£å†³</strong>ï¼Œä½  å® é™… å½“ ä¸­ çš„ é—® é¢˜</strong>ã€‚åªæœ‰æ˜ç¡®äº†è¦è§£å†³çš„é—®é¢˜ï¼Œå·¥å…·çš„æ ¸å¿ƒæ•ˆæœæ‰èƒ½æ›´å¥½åœ°å‘æŒ¥ã€‚</li>
</ul>
<h4 data-id="heading-7">2. ç”¨â€œæµç¨‹åŒ–ä½“ç³»â€æå‡å·¥ä½œæ•ˆç‡</h4>
<p>æˆ‘å»ºè®®é‡‡ç”¨<strong>ç¼–ç¨‹æ€ç»´æ¥æ€è€ƒé—®é¢˜</strong>ï¼Œå€ŸåŠ©æ—¥å¸¸å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜ï¼Œ<strong>å°†é‡å¤åŒ–çš„å·¥ä½œ</strong>åš æˆ è¿™ ç§ æµ ç¨‹ åŒ– çš„ è‡ª åŠ¨ åŒ–  ä½“ ç³»ã€‚è¿™ç§æµç¨‹åŒ–çš„ä½“ç³»èƒ½å¤Ÿè®©æ‚¨çš„å·¥ä½œæ•ˆç‡æœ‰æ›´å¤§çš„æå‡ã€‚</p>
<h4 data-id="heading-8">3. æˆæœ¬ä¼˜åŠ¿ä¸å…¥é—¨é€”å¾„</h4>
<p>å¯¹äºåˆå­¦è€…è€Œè¨€ï¼Œå›½å†…ç‰ˆæœ¬æä¾›äº†æä½³çš„å…¥é—¨æœºä¼šï¼š</p>
<ul>
<li><strong>å…è´¹ä¼˜åŠ¿ï¼š</strong> å›½å†…ç‰ˆæœ¬çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºå®ƒæ˜¯<strong>å… è´¹ ä½¿ ç”¨ è¿™ ä¸ª solo code  è¿™ä¸ª åŠŸ èƒ½</strong>ã€‚</li>
<li><strong>ä»˜è´¹å·®å¼‚ï¼š</strong> ç›¸æ¯”ä¹‹ä¸‹ï¼Œå¦‚æœæƒ³æ›´å¥½åœ°ä½¿ç”¨<strong>å›½é™…ç‰ˆæœ¬</strong>ï¼Œé€šå¸¸éœ€è¦<strong>æ”¯ ä»˜ ä¸€ å®š çš„ è´¹ ç”¨</strong>ã€‚</li>
<li><strong>æ€»ç»“ï¼š</strong> å› æ­¤ï¼Œ<strong>å›½å†…ç‰ˆæœ¬æ˜¯ä¸€ä¸ªâ€œæ¯” è¾ƒ å¥½ çš„  å…¥ é—¨ çš„  é€” å¾„â€</strong> ï¼Œå»ºè®®å¤§å®¶å¯ä»¥å»å®é™…å°è¯•ä¸€ä¸‹ã€‚</li>
</ul>
<h3 data-id="heading-9">ç»“è®º</h3>
<p>é€šè¿‡æŒæ¡åŸå‹æç¤ºè¯çš„ä¼˜åŒ–ã€åŠŸèƒ½è¿­ä»£ç­‰é‡å¤æ“ä½œæ³•ï¼Œä»¥åŠå›½é™…ç‰ˆæœ¬éƒ¨ç½²ç­–ç•¥ï¼Œæˆ‘ä»¬å¯ä»¥é«˜æ•ˆåœ°åˆ©ç”¨ TRAE SOLO Code 3.0 å®Œæˆåº”ç”¨å¼€å‘ã€‚ä½†æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼Œè¿˜æ˜¯åœ¨äºä»<strong>é—®é¢˜å®šä¹‰</strong>å‡ºå‘ï¼Œå°†ç¼–ç¨‹æ€ç»´èå…¥å·¥ä½œï¼ŒæŠŠé‡å¤æ€§ä»»åŠ¡è½¬åŒ–ä¸º<strong>æµç¨‹åŒ–ä½“ç³»</strong>ï¼Œè¿™æ‰æ˜¯çœŸæ­£å®ç°æ•ˆç‡å€å¢çš„æ„ä¹‰æ‰€åœ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[BBDownï¼šé«˜æ•ˆä¾¿æ·çš„å“”å“©å“”å“©è§†é¢‘ä¸‹è½½å·¥å…·]]></title>    <link>https://juejin.cn/post/7577042851080650795</link>    <guid>https://juejin.cn/post/7577042851080650795</guid>    <pubDate>2025-11-27T08:44:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577042851080650795" data-draft-id="7577042851080618027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="BBDownï¼šé«˜æ•ˆä¾¿æ·çš„å“”å“©å“”å“©è§†é¢‘ä¸‹è½½å·¥å…·"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC"/> <meta itemprop="datePublished" content="2025-11-27T08:44:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qife122"/> <meta itemprop="url" content="https://juejin.cn/user/1743174852185579"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            BBDownï¼šé«˜æ•ˆä¾¿æ·çš„å“”å“©å“”å“©è§†é¢‘ä¸‹è½½å·¥å…·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1743174852185579/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qife122
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:44:29.000Z" title="Thu Nov 27 2025 08:44:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">BBDownï¼šé«˜æ•ˆä¾¿æ·çš„å“”å“©å“”å“©è§†é¢‘ä¸‹è½½å·¥å…·</h2>
<h3 data-id="heading-1">é¡¹ç›®æè¿°</h3>
<p>BBDownæ˜¯ä¸€ä¸ªå…è´¹ä¸”ä¾¿æ·é«˜æ•ˆçš„å“”å“©å“”å“©ä¸‹è½½/è§£æè½¯ä»¶ï¼Œæ”¯æŒå‘½ä»¤è¡Œæ“ä½œå’ŒHTTP APIæœåŠ¡ã€‚è¯¥é¡¹ç›®é‡‡ç”¨C#å¼€å‘ï¼Œæä¾›å®Œæ•´çš„Bç«™è§†é¢‘è§£æå’Œä¸‹è½½è§£å†³æ–¹æ¡ˆï¼Œæ”¯æŒå¤šç§è§†é¢‘æ ¼å¼ã€å¤šçº¿ç¨‹ä¸‹è½½ã€å¼¹å¹•ä¸‹è½½ç­‰ä¸°å¯ŒåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-2">åŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>å¤šå¹³å°è§£æ</strong>ï¼šæ”¯æŒWebç«¯ã€TVç«¯ã€APPç«¯å’Œå›½é™…ç‰ˆAPIè§£ææ¨¡å¼</li>
<li><strong>å¤šç§ä¸‹è½½æ–¹å¼</strong>ï¼šæ”¯æŒæ™®é€šä¸‹è½½ã€aria2cä¸‹è½½å’Œå¤šçº¿ç¨‹ä¸‹è½½</li>
<li><strong>æ ¼å¼æ”¯æŒ</strong>ï¼šæ”¯æŒHEVCã€AV1ã€AVCç­‰å¤šç§è§†é¢‘ç¼–ç æ ¼å¼</li>
<li><strong>ç”»è´¨é€‰æ‹©</strong>ï¼šæä¾›ä¸°å¯Œçš„ç”»è´¨ä¼˜å…ˆçº§è®¾ç½®ï¼Œæ”¯æŒ8Kã€æœæ¯”è§†ç•Œç­‰é«˜æ¸…æ ¼å¼</li>
<li><strong>å¼¹å¹•å¤„ç†</strong>ï¼šæ”¯æŒXMLå’ŒASSæ ¼å¼çš„å¼¹å¹•ä¸‹è½½</li>
<li><strong>APIæœåŠ¡</strong>ï¼šå†…ç½®HTTPæœåŠ¡å™¨ï¼Œæä¾›å®Œæ•´çš„RESTful APIæ¥å£</li>
<li><strong>æ‰¹é‡ä¸‹è½½</strong>ï¼šæ”¯æŒæ”¶è—å¤¹ã€åˆé›†ã€ç³»åˆ—åˆ—è¡¨ç­‰æ‰¹é‡ä¸‹è½½åŠŸèƒ½</li>
<li><strong>äº¤äº’å¼é€‰æ‹©</strong>ï¼šæä¾›äº¤äº’å¼æ¸…æ™°åº¦é€‰æ‹©ç•Œé¢</li>
</ul>
<h3 data-id="heading-3">å®‰è£…æŒ‡å—</h3>
<h4 data-id="heading-4">é€šè¿‡Dotnet Toolå®‰è£…</h4>
<p>å¦‚æœä½ æœ¬åœ°æœ‰dotnetç¯å¢ƒï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤å³å¯å®‰è£…ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">dotnet tool install --global BBDown
</code></pre>
<h4 data-id="heading-5">æ›´æ–°BBDown</h4>
<pre><code class="hljs language-bash" lang="bash">dotnet tool update --global BBDown
</code></pre>
<h4 data-id="heading-6">ç³»ç»Ÿè¦æ±‚</h4>
<ul>
<li>.NETè¿è¡Œæ—¶ç¯å¢ƒ</li>
<li>æ··æµéœ€è¦å¤–éƒ¨ç¨‹åºï¼šffmpegæˆ–mp4box</li>
<li>æœæ¯”è§†ç•Œéœ€è¦ffmpeg 5.0ä»¥ä¸Šæˆ–æ–°ç‰ˆmp4box</li>
</ul>
<h4 data-id="heading-7">ä¸‹è½½åœ°å€</h4>
<ul>
<li>Releaseç‰ˆæœ¬ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnilaoda%2FBBDown%2Freleases" target="_blank" title="https://github.com/nilaoda/BBDown/releases" ref="nofollow noopener noreferrer">GitHub Releases</a></li>
<li>è‡ªåŠ¨æ„å»ºæµ‹è¯•ç‰ˆæœ¬ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnilaoda%2FBBDown%2Factions" target="_blank" title="https://github.com/nilaoda/BBDown/actions" ref="nofollow noopener noreferrer">GitHub Actions</a></li>
</ul>
<h3 data-id="heading-8">ä½¿ç”¨è¯´æ˜</h3>
<h4 data-id="heading-9">åŸºç¡€ä½¿ç”¨</h4>
<pre><code class="hljs language-bash" lang="bash">BBDown &lt;url&gt; [options]
</code></pre>
<h4 data-id="heading-10">å¸¸ç”¨å‚æ•°ç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä»…æ˜¾ç¤ºè§†é¢‘ä¿¡æ¯è€Œä¸ä¸‹è½½</span>
BBDown <span class="hljs-string">"BV1qt4y1X7TW"</span> --only-show-info

<span class="hljs-comment"># ä½¿ç”¨TVç«¯APIè§£æ</span>
BBDown <span class="hljs-string">"BV1qt4y1X7TW"</span> --use-tv-api

<span class="hljs-comment"># è®¾ç½®ç¼–ç ä¼˜å…ˆçº§</span>
BBDown <span class="hljs-string">"BV1qt4y1X7TW"</span> --encoding-priority <span class="hljs-string">"hevc,av1,avc"</span>

<span class="hljs-comment"># å¤šçº¿ç¨‹ä¸‹è½½</span>
BBDown <span class="hljs-string">"BV1qt4y1X7TW"</span> --multi-thread

<span class="hljs-comment"># ä½¿ç”¨aria2cä¸‹è½½</span>
BBDown <span class="hljs-string">"BV1qt4y1X7TW"</span> --use-aria2c
</code></pre>
<h4 data-id="heading-11">APIæœåŠ¡å™¨æ¨¡å¼</h4>
<p>å¯åŠ¨æœåŠ¡å™¨æ¨¡å¼åï¼ŒBBDownä¼šåœ¨æœ¬åœ°å¯åŠ¨HTTPæœåŠ¡ï¼Œæä¾›ä»¥ä¸‹APIæ¥å£ï¼š</p>
<h5 data-id="heading-12">è·å–ä»»åŠ¡åˆ—è¡¨</h5>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:58682/get-tasks/
</code></pre>
<h5 data-id="heading-13">æ·»åŠ ä¸‹è½½ä»»åŠ¡</h5>
<pre><code class="hljs language-bash" lang="bash">curl -X POST -H <span class="hljs-string">'Content-Type: application/json'</span> -d <span class="hljs-string">'{"Url": "BV1qt4y1X7TW"}'</span> http://localhost:58682/add-task
</code></pre>
<h5 data-id="heading-14">ä¸‹è½½åˆ°æŒ‡å®šç›®å½•</h5>
<pre><code class="hljs language-bash" lang="bash">curl -X POST -H <span class="hljs-string">'Content-Type: application/json'</span> -d <span class="hljs-string">'{"Url": "BV1qt4y1X7TW", "FilePattern": "/Downloads/&lt;videoTitle&gt;[&lt;dfn&gt;]"}'</span> http://localhost:58682/add-task
</code></pre>
<h3 data-id="heading-15">æ ¸å¿ƒä»£ç </h3>
<h4 data-id="heading-16">ä¸‹è½½ä»»åŠ¡ç®¡ç†</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DownloadTask</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Aid { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Url { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">default</span>!;
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">long</span> TaskCreateTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Title { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span>? Pic { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">long</span>? VideoPubTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">long</span>? TaskFinishTime { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> Progress { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> DownloadSpeed { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">double</span> TotalDownloadedBytes { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> IsSuccessful { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DownloadTaskCollection</span>
{
    <span class="hljs-keyword">public</span> List&lt;DownloadTask&gt; Running { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();
    <span class="hljs-keyword">public</span> List&lt;DownloadTask&gt; Finished { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-keyword">new</span>();
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DownloadTaskCollection</span>(<span class="hljs-params">List&lt;DownloadTask&gt; running, List&lt;DownloadTask&gt; finished</span>)</span>
    {
        Running = running;
        Finished = finished;
    }
}
</code></pre>
<h4 data-id="heading-17">å¤šçº¿ç¨‹ä¸‹è½½å®ç°</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BBDownDownloadUtil</span>
{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DownloadConfig</span>
    {
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> UseAria2c { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">string</span> Aria2cArgs { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-built_in">string</span>.Empty;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> ForceHttp { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">public</span> <span class="hljs-built_in">bool</span> MultiThread { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">public</span> DownloadTask? RelatedTask { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } = <span class="hljs-literal">null</span>;
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> Task <span class="hljs-title">RangeDownloadToTmpAsync</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> id, <span class="hljs-built_in">string</span> url, <span class="hljs-built_in">string</span> tmpName, 
        <span class="hljs-built_in">long</span> fromPosition, <span class="hljs-built_in">long</span>? toPosition, Action&lt;<span class="hljs-built_in">int</span>, <span class="hljs-built_in">long</span>, <span class="hljs-built_in">long</span>&gt; onProgress, 
        <span class="hljs-built_in">bool</span> failOnRangeNotSupported = <span class="hljs-literal">false</span></span>)</span>
    {
        <span class="hljs-comment">// å®ç°èŒƒå›´ä¸‹è½½å’Œè¿›åº¦å›è°ƒ</span>
        DateTimeOffset? lastTime = File.Exists(tmpName) ? 
            <span class="hljs-keyword">new</span> FileInfo(tmpName).LastWriteTimeUtc : <span class="hljs-literal">null</span>;
        
        <span class="hljs-keyword">using</span> <span class="hljs-keyword">var</span> fileStream = <span class="hljs-keyword">new</span> FileStream(tmpName, FileMode.OpenOrCreate);
        fileStream.Seek(<span class="hljs-number">0</span>, SeekOrigin.End);
        
        <span class="hljs-comment">// ä¸‹è½½é€»è¾‘å®ç°...</span>
    }
}
</code></pre>
<h4 data-id="heading-18">è§†é¢‘è§£æå™¨å·¥å‚</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">FetcherFactory</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> IFetcher <span class="hljs-title">CreateFetcher</span>(<span class="hljs-params"><span class="hljs-built_in">string</span> aidOri, <span class="hljs-built_in">bool</span> useIntlApi</span>)</span>
    {
        IFetcher fetcher = <span class="hljs-keyword">new</span> NormalInfoFetcher();
        
        <span class="hljs-keyword">if</span> (aidOri.StartsWith(<span class="hljs-string">"cheese"</span>))
        {
            fetcher = <span class="hljs-keyword">new</span> CheeseInfoFetcher();
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aidOri.StartsWith(<span class="hljs-string">"ep"</span>))
        {
            fetcher = useIntlApi ? 
                <span class="hljs-keyword">new</span> IntlBangumiInfoFetcher() : <span class="hljs-keyword">new</span> BangumiInfoFetcher();
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (aidOri.StartsWith(<span class="hljs-string">"mid"</span>))
        {
            fetcher = <span class="hljs-keyword">new</span> SpaceVideoFetcher();
        }
        <span class="hljs-comment">// æ›´å¤šè§£æå™¨ç±»å‹...</span>
        
        <span class="hljs-keyword">return</span> fetcher;
    }
}
</code></pre>
<h4 data-id="heading-19">è¿›åº¦æ¡æ˜¾ç¤º</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ProgressBar</span> : <span class="hljs-title">IDisposable</span>, <span class="hljs-title">IProgress</span>&lt;<span class="hljs-title">double</span>&gt;
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">int</span> blockCount = <span class="hljs-number">40</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> TimeSpan animationInterval = TimeSpan.FromSeconds(<span class="hljs-number">1.0</span> / <span class="hljs-number">8</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">const</span> <span class="hljs-built_in">string</span> animation = <span class="hljs-string">@"|/-\"</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Report</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> <span class="hljs-keyword">value</span></span>)</span>
    {
        <span class="hljs-comment">// ç¡®ä¿è¿›åº¦å€¼åœ¨0-1èŒƒå›´å†…</span>
        <span class="hljs-keyword">value</span> = Math.Max(<span class="hljs-number">0</span>, Math.Min(<span class="hljs-number">1</span>, <span class="hljs-keyword">value</span>));
        Interlocked.Exchange(<span class="hljs-keyword">ref</span> currentProgress, <span class="hljs-keyword">value</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Report</span>(<span class="hljs-params"><span class="hljs-built_in">double</span> <span class="hljs-keyword">value</span>, <span class="hljs-built_in">long</span> bytesCount</span>)</span>
    {
        <span class="hljs-keyword">value</span> = Math.Max(<span class="hljs-number">0</span>, Math.Min(<span class="hljs-number">1</span>, <span class="hljs-keyword">value</span>));
        Interlocked.Exchange(<span class="hljs-keyword">ref</span> currentProgress, <span class="hljs-keyword">value</span>);
        Interlocked.Exchange(<span class="hljs-keyword">ref</span> downloadedBytes, bytesCount);
    }
    
    <span class="hljs-comment">// è¿›åº¦æ˜¾ç¤ºå’Œé€Ÿåº¦è®¡ç®—å®ç°...</span>
}
</code></pre>
<h4 data-id="heading-20">é…ç½®æ–‡ä»¶è§£æ</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">internal</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title">BBDownConfigParser</span>
{
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">HandleConfig</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">string</span>&gt; newArgsList, RootCommand rootCommand</span>)</span>
    {
        <span class="hljs-keyword">try</span>
        {
            <span class="hljs-keyword">var</span> configPath = newArgsList.Contains(<span class="hljs-string">"--config-file"</span>)
                ? newArgsList.ElementAt(newArgsList.IndexOf(<span class="hljs-string">"--config-file"</span>) + <span class="hljs-number">1</span>)
                : Path.Combine(Program.APP_DIR, <span class="hljs-string">"BBDown.config"</span>);
                
            <span class="hljs-keyword">if</span> (File.Exists(configPath))
            {
                <span class="hljs-comment">// é…ç½®æ–‡ä»¶è¯»å–å’Œè§£æé€»è¾‘</span>
                <span class="hljs-keyword">var</span> configArgs = File
                    .ReadAllLines(configPath)
                    .Where(s =&gt; !<span class="hljs-built_in">string</span>.IsNullOrEmpty(s) &amp;&amp; !s.StartsWith(<span class="hljs-string">'#'</span>))
                    .SelectMany(s =&gt; ParseConfigLine(s));
                
                <span class="hljs-comment">// å‘½ä»¤è¡Œå‚æ•°ä¼˜å…ˆçº§ &gt; é…ç½®æ–‡ä»¶ä¼˜å…ˆçº§</span>
            }
        }
        <span class="hljs-keyword">catch</span> (Exception)
        {
            LogError(<span class="hljs-string">"é…ç½®æ–‡ä»¶è¯»å–å¼‚å¸¸ï¼Œå¿½ç•¥"</span>);
        }
    }
}
</code></pre>
<p>BBDowné¡¹ç›®æä¾›äº†å®Œæ•´çš„å“”å“©å“”å“©è§†é¢‘ä¸‹è½½è§£å†³æ–¹æ¡ˆï¼Œä»è§†é¢‘è§£æåˆ°ä¸‹è½½ç®¡ç†ï¼Œå†åˆ°è¿›åº¦è·Ÿè¸ªå’Œæ–‡ä»¶æ··æµï¼Œæ¯ä¸ªç¯èŠ‚éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡å’Œå®ç°ï¼Œç¡®ä¿äº†è½¯ä»¶çš„ç¨³å®šæ€§å’Œæ˜“ç”¨æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­ ArrayList çº¿ç¨‹å®‰å…¨é—®é¢˜]]></title>    <link>https://juejin.cn/post/7577049352838955023</link>    <guid>https://juejin.cn/post/7577049352838955023</guid>    <pubDate>2025-11-27T08:46:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7577049352838955023" data-draft-id="7577049352838905871" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­ ArrayList çº¿ç¨‹å®‰å…¨é—®é¢˜"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-27T08:46:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="uup"/> <meta itemprop="url" content="https://juejin.cn/user/4378706456356627"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­ ArrayList çº¿ç¨‹å®‰å…¨é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4378706456356627/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    uup
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-27T08:46:25.000Z" title="Thu Nov 27 2025 08:46:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-27
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Bug åœºæ™¯</h2>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªå¤šçº¿ç¨‹çš„ Java åº”ç”¨ç¨‹åºï¼Œè¯¥ç¨‹åºä¸­æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å¹¶ä¿®æ”¹ä¸€ä¸ªå…±äº«çš„<code>ArrayList</code>ã€‚ä¾‹å¦‚ï¼Œä½ æœ‰ä¸€ä¸ªè®¢å•å¤„ç†ç³»ç»Ÿï¼Œä¸åŒçš„çº¿ç¨‹è´Ÿè´£æ·»åŠ æ–°è®¢å•åˆ°è®¢å•åˆ—è¡¨ï¼ŒåŒæ—¶æœ‰å…¶ä»–çº¿ç¨‹å¯èƒ½ä¼šéå†è®¢å•åˆ—è¡¨è¿›è¡Œç»Ÿè®¡ç­‰æ“ä½œã€‚</p>
<h2 data-id="heading-1">äºŒã€ä»£ç ç¤ºä¾‹</h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ArrayListThreadBug</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Integer&gt; orderList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å¯åŠ¨æ·»åŠ è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                orderList.add(i);
            }
        });

        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>; i &lt; <span class="hljs-number">2000</span>; i++) {
                orderList.add(i);
            }
        });

        <span class="hljs-comment">// å¯åŠ¨éå†è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">traverseThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (Integer order : orderList) {
                System.out.println(order);
            }
        });

        addThread1.start();
        addThread2.start();
        traverseThread.start();
    }
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€é—®é¢˜æè¿°</h2>
<p>åœ¨è¿è¡Œä¸Šè¿°ä»£ç æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°<code>ConcurrentModificationException</code>å¼‚å¸¸ã€‚è¿™æ˜¯å› ä¸º<code>ArrayList</code>ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå½“å¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹å…¶è¿›è¡Œä¿®æ”¹å’Œéå†æ“ä½œæ—¶ï¼Œå°±å¯èƒ½å‡ºç°è¿™ç§é—®é¢˜ã€‚åœ¨éå†è¿‡ç¨‹ä¸­ï¼Œå¦‚æœå…¶ä»–çº¿ç¨‹ä¿®æ”¹äº†åˆ—è¡¨çš„ç»“æ„ï¼ˆä¾‹å¦‚æ·»åŠ æˆ–åˆ é™¤å…ƒç´ ï¼‰ï¼Œå°±ä¼šç ´åè¿­ä»£å™¨çš„ä¸€è‡´æ€§ï¼Œä»è€ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚</p>
<h2 data-id="heading-3">å››ã€è§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li><strong>ä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„é›†åˆç±»</strong>ï¼šå¯ä»¥å°†<code>ArrayList</code>æ›¿æ¢ä¸º<code>CopyOnWriteArrayList</code>ï¼Œå®ƒåœ¨ä¿®æ”¹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä»è€Œä¿è¯éå†æ“ä½œçš„çº¿ç¨‹å®‰å…¨æ€§ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.concurrent.CopyOnWriteArrayList;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyOnWriteArrayListExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Integer&gt; orderList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CopyOnWriteArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å¯åŠ¨æ·»åŠ è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                orderList.add(i);
            }
        });

        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>; i &lt; <span class="hljs-number">2000</span>; i++) {
                orderList.add(i);
            }
        });

        <span class="hljs-comment">// å¯åŠ¨éå†è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">traverseThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">for</span> (Integer order : orderList) {
                System.out.println(order);
            }
        });

        addThread1.start();
        addThread2.start();
        traverseThread.start();
    }
}
</code></pre>
<ol start="2">
<li><strong>ä½¿ç”¨åŒæ­¥æœºåˆ¶</strong>ï¼šé€šè¿‡<code>synchronized</code>å…³é”®å­—æ¥åŒæ­¥å¯¹<code>ArrayList</code>çš„è®¿é—®ï¼Œç¡®ä¿åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½ä¿®æ”¹æˆ–éå†åˆ—è¡¨ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SynchronizedArrayListExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> List&lt;Integer&gt; orderList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// å¯åŠ¨æ·»åŠ è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">synchronized</span> (lock) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">1000</span>; i++) {
                    orderList.add(i);
                }
            }
        });

        <span class="hljs-type">Thread</span> <span class="hljs-variable">addThread2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">synchronized</span> (lock) {
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>; i &lt; <span class="hljs-number">2000</span>; i++) {
                    orderList.add(i);
                }
            }
        });

        <span class="hljs-comment">// å¯åŠ¨éå†è®¢å•çº¿ç¨‹</span>
        <span class="hljs-type">Thread</span> <span class="hljs-variable">traverseThread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">synchronized</span> (lock) {
                <span class="hljs-keyword">for</span> (Integer order : orderList) {
                    System.out.println(order);
                }
            }
        });

        addThread1.start();
        addThread2.start();
        traverseThread.start();
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>