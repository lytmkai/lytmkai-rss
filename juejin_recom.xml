<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ã€URPã€‘Unity[å†…ç½®Shader]åœ°å½¢å…‰ç…§TerrainLit]]></title>    <link>https://juejin.cn/post/7578699866182451238</link>    <guid>https://juejin.cn/post/7578699866182451238</guid>    <pubDate>2025-12-01T16:29:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699866182451238" data-draft-id="7578714735307997210" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€URPã€‘Unity[å†…ç½®Shader]åœ°å½¢å…‰ç…§TerrainLit"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2025-12-01T16:29:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€URPã€‘Unity[å†…ç½®Shader]åœ°å½¢å…‰ç…§TerrainLit
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T16:29:53.000Z" title="Mon Dec 01 2025 16:29:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<p>TerrainLit Shaderæ˜¯Unity URPï¼ˆé€šç”¨æ¸²æŸ“ç®¡çº¿ï¼‰ä¸­ä¸“ä¸ºåœ°å½¢ç³»ç»Ÿè®¾è®¡çš„å†…ç½®ç€è‰²å™¨ï¼Œä¸»è¦ç”¨äºé«˜æ•ˆæ¸²æŸ“å¤§è§„æ¨¡åœ°å½¢è¡¨é¢å¹¶æ”¯æŒå¤šçº¹ç†æ··åˆã€‚</p>
<h2 data-id="heading-0"><strong>ä½œç”¨ä¸åŸç†</strong></h2>
<h3 data-id="heading-1">â€Œ<strong>æ ¸å¿ƒåŠŸèƒ½</strong>â€Œï¼š</h3>
<ul>
<li>æ”¯æŒæœ€å¤š8å±‚çº¹ç†æ··åˆï¼Œé€šè¿‡<strong>é«˜åº¦å›¾</strong>æˆ–<strong>é®ç½©å›¾</strong>æ§åˆ¶<strong>æ··åˆè¿‡æ¸¡</strong></li>
<li>é‡‡ç”¨åŸºäºç‰©ç†çš„æ¸²æŸ“(PBR)æ¨¡å‹å¤„ç†å…‰ç…§å’Œæè´¨åå°„</li>
<li>ä¼˜åŒ–äº†LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰ç³»ç»Ÿï¼Œé€‚åº”è¿œè·ç¦»åœ°å½¢æ¸²æŸ“</li>
</ul>
<h2 data-id="heading-2"><strong>å‘å±•å†å²</strong></h2>
<ul>
<li>â€Œ<strong>2018å¹´</strong>â€Œï¼šéšURPé¦–æ¬¡æ¨å‡ºï¼Œä»…æ”¯æŒ4å±‚çº¹ç†æ··åˆ</li>
<li>â€Œ<strong>2019å¹´</strong>â€Œï¼šå‡çº§è‡³æ”¯æŒ8å±‚æ··åˆï¼Œå¢åŠ PBRæ”¯æŒ</li>
<li>â€Œ<strong>2020å¹´</strong>â€Œï¼šä¼˜åŒ–GPUå®ä¾‹åŒ–ï¼Œæå‡å¤§è§„æ¨¡åœ°å½¢æ¸²æŸ“æ€§èƒ½</li>
</ul>
<h3 data-id="heading-3">â€Œ<strong>æŠ€æœ¯åŸç†</strong>â€Œï¼š</h3>
<ul>
<li>ä½¿ç”¨SplatMapæŠ€æœ¯æ··åˆå¤šå¼ çº¹ç†ï¼Œé€šè¿‡RGBAé€šé“å­˜å‚¨æ··åˆæƒé‡</li>
<li>åœ¨é¡¶ç‚¹ç€è‰²é˜¶æ®µè®¡ç®—åœ°å½¢é«˜åº¦å’Œæ³•çº¿ï¼Œç‰‡æ®µç€è‰²é˜¶æ®µè¿›è¡Œçº¹ç†é‡‡æ ·æ··åˆ</li>
</ul>
<h3 data-id="heading-4">SplatMapæŠ€æœ¯</h3>
<p>SplatMapæŠ€æœ¯é€šè¿‡çº¹ç†çš„RGBAé€šé“å­˜å‚¨å¤šå±‚çº¹ç†æƒé‡ä¿¡æ¯ï¼Œåœ¨ç‰‡æ®µç€è‰²å™¨ä¸­å®ç°åŠ¨æ€æ··åˆã€‚</p>
<h4 data-id="heading-5"><strong>å­˜å‚¨æœºåˆ¶</strong></h4>
<ul>
<li>â€Œ<strong>é€šé“åˆ†é…</strong>â€Œï¼š
<ul>
<li>æ¯ä¸ªRGBAé€šé“å¯¹åº”ä¸€ä¸ªçº¹ç†å±‚çš„æƒé‡å€¼ï¼ˆ0-1èŒƒå›´ï¼‰ï¼Œä¾‹å¦‚Ré€šé“å­˜å‚¨ç¬¬1å±‚æƒé‡ï¼ŒGé€šé“å­˜å‚¨ç¬¬2å±‚æƒé‡ï¼Œä¾æ­¤ç±»æ¨ã€‚å½“éœ€è¦è¶…è¿‡4å±‚æ—¶ï¼Œä¼šä½¿ç”¨å¤šå¼ SplatMapï¼ˆå¦‚ç¬¬äºŒå¼ SplatMapçš„Ré€šé“å­˜å‚¨ç¬¬5å±‚æƒé‡ï¼‰ã€‚</li>
</ul>
</li>
<li>â€Œ<strong>æ•°æ®ç¼–ç </strong>â€Œï¼š
<ul>
<li>æƒé‡å€¼é€šå¸¸ä»¥8ä½ç²¾åº¦å­˜å‚¨ï¼ˆ0-255æ˜ å°„åˆ°0.0-1.0ï¼‰ï¼Œåœ¨ç€è‰²å™¨ä¸­é€šè¿‡å½’ä¸€åŒ–è¿˜åŸã€‚ä¾‹å¦‚ï¼ŒRé€šé“å€¼0.5è¡¨ç¤ºç¬¬1å±‚æƒé‡ä¸º50%ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6"><strong>ç€è‰²å™¨å®ç°ç¤ºä¾‹</strong></h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºUnityçš„ç‰‡æ®µç€è‰²å™¨ä»£ç ç‰‡æ®µï¼Œæ¼”ç¤ºå¦‚ä½•é‡‡æ ·å¹¶æ··åˆ4å±‚çº¹ç†ï¼š</p>
<pre><code class="hljs language-c" lang="c">hlsl
half4 <span class="hljs-title function_">frag</span><span class="hljs-params">(v2f input)</span> : SV_Target {
    <span class="hljs-comment">// é‡‡æ ·SplatMapè·å–æƒé‡</span>
    half4 splat = SAMPLE_TEXTURE2D(_SplatMap, sampler_SplatMap, input.uv);

    <span class="hljs-comment">// é‡‡æ ·å„å±‚çº¹ç†</span>
    half4 tex1 = SAMPLE_TEXTURE2D(_Layer1, sampler_Layer1, input.uv);
    half4 tex2 = SAMPLE_TEXTURE2D(_Layer2, sampler_Layer2, input.uv);
    half4 tex3 = SAMPLE_TEXTURE2D(_Layer3, sampler_Layer3, input.uv);
    half4 tex4 = SAMPLE_TEXTURE2D(_Layer4, sampler_Layer4, input.uv);

    <span class="hljs-comment">// åŠ¨æ€æ··åˆï¼ˆæƒé‡å½’ä¸€åŒ–å¤„ç†ï¼‰</span>
    half sumWeights = splat.r + splat.g + splat.b + splat.a;
    half3 finalColor = (tex1.rgb * splat.r + tex2.rgb * splat.g +
                       tex3.rgb * splat.b + tex4.rgb * splat.a) / sumWeights;

    <span class="hljs-keyword">return</span> half4(finalColor, <span class="hljs-number">1.0</span>);
}
</code></pre>
<h4 data-id="heading-7"><strong>æ€§èƒ½ä¼˜åŒ–</strong></h4>
<ul>
<li>
<p>â€Œ<strong>çº¹ç†æ•°ç»„æ›¿ä»£</strong>â€Œï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨Texture2DArrayå°†å¤šå¼ çº¹ç†åˆå¹¶ä¸ºå•ä¸€èµ„æºï¼Œé€šè¿‡ç´¢å¼•å€¼ï¼ˆå­˜å‚¨åœ¨SplatMapçš„R/Gé€šé“ï¼‰é€‰æ‹©çº¹ç†ï¼Œå‡å°‘é‡‡æ ·æ¬¡æ•°ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-c" lang="c">hlsl
half4 var_Main = SAMPLE_TEXTURE2D_ARRAY(_TexArray, sampler_TexArray, uv, splat.r * <span class="hljs-number">255</span>) * splat.b;
half4 var_Sec = SAMPLE_TEXTURE2D_ARRAY(_TexArray, sampler_TexArray, uv, splat.g * <span class="hljs-number">255</span>) * (<span class="hljs-number">1</span> - splat.b);
half4 finalRGB = var_Main + var_Sec;
</code></pre>
</li>
</ul>
</li>
<li>
<p>â€Œ<strong>é«˜åº¦æ··åˆå¢å¼º</strong>â€Œï¼š</p>
<ul>
<li>ç»“åˆé«˜åº¦å›¾ï¼ˆå­˜å‚¨åœ¨SplatMapçš„Bé€šé“ï¼‰å®ç°æ›´è‡ªç„¶çš„è¿‡æ¸¡æ•ˆæœï¼Œé€šè¿‡æ¯”è¾ƒå„å±‚é«˜åº¦å€¼åŠ¨æ€è°ƒæ•´æƒé‡ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-8"><strong>é™åˆ¶ä¸æ”¹è¿›</strong></h4>
<ul>
<li>â€Œ<strong>é€šé“é™åˆ¶</strong>â€Œï¼šä¼ ç»ŸSplatMapæ¯å¼ ä»…æ”¯æŒ4å±‚ï¼Œè¶…è¿‡æ—¶éœ€è¦å¤šå¼ çº¹ç†ï¼Œå¢åŠ å¸¦å®½å‹åŠ›ã€‚</li>
<li>â€Œ<strong>æ··åˆç²¾åº¦</strong>â€Œï¼š8ä½é€šé“å¯èƒ½å¯¼è‡´å¯è§çš„å¸¦çŠ¶ä¼ªå½±ï¼Œå¯é€šè¿‡16ä½æµ®ç‚¹çº¹ç†æˆ–æŠ–åŠ¨æŠ€æœ¯ç¼“è§£ã€‚</li>
</ul>
<h2 data-id="heading-9"><strong>å…·ä½“ä½¿ç”¨ç¤ºä¾‹</strong></h2>
<h3 data-id="heading-10">â€Œ<strong>åŸºç¡€é…ç½®</strong>â€Œ</h3>
<ul>
<li>åˆ›å»ºTerrainå¯¹è±¡</li>
<li>åœ¨Inspectoré¢æ¿é€‰æ‹©Materialä¸º"Custom"</li>
<li>æŒ‡å®šShaderä¸º"Universal Render Pipeline/Terrain/Lit"</li>
</ul>
<p>é€šè¿‡SplatMapæ§åˆ¶çº¹ç†æ··åˆæ—¶ï¼Œéœ€åœ¨Terrain Layersä¸­é…ç½®å„å±‚çº¹ç†çš„é‡‘å±åº¦/å…‰æ»‘åº¦ç­‰PBRå‚æ•°</p>
<ul>
<li>
<p>â€Œ<strong>è„šæœ¬æ§åˆ¶æ··åˆ</strong>â€Œï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">csharp
<span class="hljs-comment">// åŠ¨æ€ä¿®æ”¹ç¬¬2å±‚çº¹ç†æƒé‡</span>
Terrain terrain = GetComponent&lt;Terrain&gt;();
<span class="hljs-built_in">float</span>[,,] map = terrain.terrainData.GetAlphamaps(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
map[<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>] = <span class="hljs-number">0.5f</span>;<span class="hljs-comment">// è®¾ç½®æƒé‡ä¸º50%</span>
terrain.terrainData.SetAlphamaps(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, map);
</code></pre>
</li>
</ul>
<h2 data-id="heading-11"><strong>Shader Graphåº”ç”¨</strong></h2>
<ul>
<li>â€Œ<strong>æ‰©å±•æ¡ˆä¾‹</strong>â€Œï¼ˆé›ªåœ°æ•ˆæœï¼‰ï¼š
<ul>
<li>åˆ›å»ºUnlit Shader Graphï¼Œæ·»åŠ HeightèŠ‚ç‚¹æ£€æµ‹åœ°å½¢é«˜åº¦5</li>
<li>ä½¿ç”¨LerpèŠ‚ç‚¹æ··åˆé›ªåœ°çº¹ç†å’ŒåŸºç¡€çº¹ç†ï¼šæœ€ç»ˆè¾“å‡ºåˆ°Base Colorå’ŒNormalé€šé“
<ul>
<li>Height â†’ Step â†’ Lerp(T)
åŸºç¡€çº¹ç† â†’ Lerp(A)
é›ªåœ°çº¹ç† â†’ Lerp(B)</li>
</ul>
</li>
</ul>
</li>
<li>â€Œ<strong>æº¶è§£æ•ˆæœç§»æ¤</strong>â€Œï¼š
<ul>
<li>å¤åˆ¶TerrainLitçš„æ··åˆé€»è¾‘åˆ°Shader Graph</li>
<li>æ·»åŠ NoiseèŠ‚ç‚¹è¿æ¥Alphaé€šé“å®ç°åœ°å½¢å±€éƒ¨æº¶è§£</li>
<li>å…³é”®èŠ‚ç‚¹é“¾ï¼š
<ul>
<li>Noise â†’ Step â†’ Alpha Clipping
Color â†’ Emissionï¼ˆè¾¹ç¼˜å‘å…‰ï¼‰</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>è¯¥ç€è‰²å™¨é€šè¿‡æ¨¡å—åŒ–è®¾è®¡å¹³è¡¡äº†æ€§èƒ½ä¸æ•ˆæœï¼Œåœ¨URP 12.xç‰ˆæœ¬åå·²å®Œå…¨æ”¯æŒShader Graphçš„è‡ªå®šä¹‰æ‰©å±•</p>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13021255.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13021255%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13021255.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13021255&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€ä»UnityURPå¼€å§‹æ¢ç´¢æ¸¸æˆæ¸²æŸ“ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React-Draggable å¿«é€Ÿä¸Šæ‰‹æŒ‡å—]]></title>    <link>https://juejin.cn/post/7578714759337476096</link>    <guid>https://juejin.cn/post/7578714759337476096</guid>    <pubDate>2025-12-01T16:30:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714759337476096" data-draft-id="7578714759337459712" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React-Draggable å¿«é€Ÿä¸Šæ‰‹æŒ‡å—"/> <meta itemprop="keywords" content="React.js"/> <meta itemprop="datePublished" content="2025-12-01T16:30:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åœŸè±†1250"/> <meta itemprop="url" content="https://juejin.cn/user/3280598428302727"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React-Draggable å¿«é€Ÿä¸Šæ‰‹æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3280598428302727/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åœŸè±†1250
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T16:30:11.000Z" title="Mon Dec 01 2025 16:30:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>åœ¨ç°ä»£Webåº”ç”¨å¼€å‘ä¸­ï¼Œæ‹–æ‹½äº¤äº’å·²æˆä¸ºæå‡ç”¨æˆ·ä½“éªŒçš„é‡è¦åŠŸèƒ½ä¹‹ä¸€ã€‚æ— è®ºæ˜¯ä»»åŠ¡ç®¡ç†é¢æ¿ã€å¯è§†åŒ–ç¼–è¾‘å™¨è¿˜æ˜¯åŠ¨æ€å¸ƒå±€ç³»ç»Ÿï¼Œæ‹–æ‹½åŠŸèƒ½éƒ½èƒ½è®©ç•Œé¢æ›´åŠ ç›´è§‚å’Œå‹å¥½ã€‚</p>
<p>React-Draggableæ˜¯ä¸€ä¸ªä¸“é—¨ä¸ºReactåº”ç”¨è®¾è®¡çš„è½»é‡çº§æ‹–æ‹½åº“ï¼Œå®ƒæä¾›äº†ç®€å•è€Œå¼ºå¤§çš„APIï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°ä¸ºç»„ä»¶æ·»åŠ æ‹–æ‹½åŠŸèƒ½ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»React-Draggableçš„ä½¿ç”¨æ–¹æ³•ï¼Œæ¶µç›–ä»åŸºç¡€å®‰è£…åˆ°é«˜çº§åº”ç”¨çš„å„ä¸ªæ–¹é¢ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹©React-Draggableï¼Ÿ</h2>
<p>React-Draggableç›¸æ¯”å…¶ä»–æ‹–æ‹½åº“å…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šAPIè®¾è®¡ç›´è§‚ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“</li>
<li><strong>æ€§èƒ½ä¼˜ç§€</strong>ï¼šåŸºäºCSS transformå®ç°ï¼Œæ€§èƒ½å¼€é”€å°</li>
<li><strong>é«˜åº¦å¯å®šåˆ¶</strong>ï¼šæä¾›ä¸°å¯Œçš„é…ç½®é€‰é¡¹å’Œäº‹ä»¶å›è°ƒ</li>
<li><strong>ReactåŸç”Ÿ</strong>ï¼šå®Œç¾èå…¥Reactç”Ÿæ€ç³»ç»Ÿ</li>
<li><strong>è½»é‡çº§</strong>ï¼šä½“ç§¯å°ï¼Œä¸å½±å“åº”ç”¨åŠ è½½é€Ÿåº¦</li>
</ul>
<h2 data-id="heading-2">å®‰è£…ä¸é…ç½®</h2>
<h3 data-id="heading-3">å®‰è£…</h3>
<p>ä½¿ç”¨npmæˆ–yarnå®‰è£…React-Draggableï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install react-draggable
<span class="hljs-comment"># æˆ–è€…</span>
yarn add react-draggable
</code></pre>
<h3 data-id="heading-4">åŸºæœ¬å¯¼å…¥</h3>
<p>åœ¨ç»„ä»¶ä¸­å¯¼å…¥Draggableç»„ä»¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;
</code></pre>
<h2 data-id="heading-5">åŸºç¡€ç”¨æ³•</h2>
<h3 data-id="heading-6">æœ€ç®€å•çš„æ‹–æ‹½ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SimpleDraggable</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
        <span class="hljs-attr">width:</span> <span class="hljs-attr">200</span>, 
        <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span>, 
        <span class="hljs-attr">background:</span> '<span class="hljs-attr">lightblue</span>',
        <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>',
        <span class="hljs-attr">padding:</span> <span class="hljs-attr">20</span>,
        <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>
      }}&gt;</span>
        æ‹–æ‹½æˆ‘ï¼
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
  );
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">SimpleDraggable</span>;
</code></pre>
<h3 data-id="heading-7">æ§åˆ¶æ‹–æ‹½æ–¹å‘</h3>
<p>é€šè¿‡<code>axis</code>å±æ€§å¯ä»¥é™åˆ¶æ‹–æ‹½æ–¹å‘ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span> axis=<span class="hljs-string">"x"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åªèƒ½æ°´å¹³æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">axis</span>=<span class="hljs-string">"y"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åªèƒ½å‚ç›´æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">axis</span>=<span class="hljs-string">"both"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å¯ä»¥ä»»æ„æ–¹å‘æ‹–æ‹½ï¼ˆé»˜è®¤ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-8">è®¾ç½®æ‹–æ‹½è¾¹ç•Œ</h3>
<p>ä½¿ç”¨<code>bounds</code>å±æ€§é™åˆ¶æ‹–æ‹½èŒƒå›´ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é™åˆ¶åœ¨çˆ¶å…ƒç´ å†…</span>
&lt;<span class="hljs-title class_">Draggable</span> bounds=<span class="hljs-string">"parent"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é™åˆ¶åœ¨çˆ¶å®¹å™¨å†…<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;

<span class="hljs-comment">// è‡ªå®šä¹‰è¾¹ç•Œ</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">bounds</span>=<span class="hljs-string">{{left:</span> <span class="hljs-attr">-100</span>, <span class="hljs-attr">top:</span> <span class="hljs-attr">-100</span>, <span class="hljs-attr">right:</span> <span class="hljs-attr">100</span>, <span class="hljs-attr">bottom:</span> <span class="hljs-attr">100</span>}}&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>é™åˆ¶åœ¨æŒ‡å®šåŒºåŸŸå†…<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-9">å¸¸è§ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-10">1. å¯æ‹–æ‹½çš„æ¨¡æ€æ¡†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DraggableModal</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(true)}&gt;æ‰“å¼€æ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      
      {isOpen &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">handle</span>=<span class="hljs-string">".modal-header"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
            <span class="hljs-attr">position:</span> '<span class="hljs-attr">fixed</span>',
            <span class="hljs-attr">width:</span> <span class="hljs-attr">400</span>,
            <span class="hljs-attr">background:</span> '<span class="hljs-attr">white</span>',
            <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>,
            <span class="hljs-attr">boxShadow:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">4px</span> <span class="hljs-attr">12px</span> <span class="hljs-attr">rgba</span>(<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0.15</span>)',
            <span class="hljs-attr">zIndex:</span> <span class="hljs-attr">1000</span>
          }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-header"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
              <span class="hljs-attr">padding:</span> '<span class="hljs-attr">12px</span> <span class="hljs-attr">16px</span>',
              <span class="hljs-attr">background:</span> '#<span class="hljs-attr">f0f0f0</span>',
              <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>',
              <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">8px</span> <span class="hljs-attr">8px</span> <span class="hljs-attr">0</span> <span class="hljs-attr">0</span>'
            }}&gt;</span>
              æ‹–æ‹½æ ‡é¢˜æ ç§»åŠ¨
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"modal-body"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">16</span> }}&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªå¯ä»¥æ‹–æ‹½çš„æ¨¡æ€æ¡†å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(false)}&gt;å…³é—­<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-11">2. å¯æ’åºåˆ—è¡¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">SortableList</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [items, setItems] = <span class="hljs-title function_">useState</span>([
    { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é¡¹ç›® 1'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é¡¹ç›® 2'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é¡¹ç›® 3'</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">text</span>: <span class="hljs-string">'é¡¹ç›® 4'</span> }
  ]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleStop</span> = (<span class="hljs-params">e, data, index</span>) =&gt; {
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥å®ç°æ’åºé€»è¾‘</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`é¡¹ç›® <span class="hljs-subst">${index}</span> ç§»åŠ¨åˆ°äº†æ–°ä½ç½®`</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">maxWidth:</span> <span class="hljs-attr">300</span>, <span class="hljs-attr">margin:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">auto</span>' }}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¯æ’åºåˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      {items.map((item, index) =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{item.id}</span>
          <span class="hljs-attr">axis</span>=<span class="hljs-string">"y"</span>
          <span class="hljs-attr">onStop</span>=<span class="hljs-string">{(e,</span> <span class="hljs-attr">data</span>) =&gt;</span> handleStop(e, data, index)}
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
            <span class="hljs-attr">padding:</span> '<span class="hljs-attr">12px</span> <span class="hljs-attr">16px</span>',
            <span class="hljs-attr">margin:</span> '<span class="hljs-attr">8px</span> <span class="hljs-attr">0</span>',
            <span class="hljs-attr">background:</span> '#<span class="hljs-attr">f8f9fa</span>',
            <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">dee2e6</span>',
            <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">4</span>,
            <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>'
          }}&gt;</span>
            {item.text}
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-12">3. æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DraggableUploadZone</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [isDragging, setIsDragging] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDragStart</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsDragging</span>(<span class="hljs-literal">true</span>);
  };

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDragStop</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-title function_">setIsDragging</span>(<span class="hljs-literal">false</span>);
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>
      <span class="hljs-attr">onStart</span>=<span class="hljs-string">{handleDragStart}</span>
      <span class="hljs-attr">onStop</span>=<span class="hljs-string">{handleDragStop}</span>
      <span class="hljs-attr">defaultPosition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">x:</span> <span class="hljs-attr">100</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">100</span> }}
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
        <span class="hljs-attr">width:</span> <span class="hljs-attr">300</span>,
        <span class="hljs-attr">height:</span> <span class="hljs-attr">200</span>,
        <span class="hljs-attr">border:</span> `<span class="hljs-attr">2px</span> <span class="hljs-attr">dashed</span> ${<span class="hljs-attr">isDragging</span> ? '#<span class="hljs-attr">007bff</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">ccc</span>'}`,
        <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>,
        <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>',
        <span class="hljs-attr">alignItems:</span> '<span class="hljs-attr">center</span>',
        <span class="hljs-attr">justifyContent:</span> '<span class="hljs-attr">center</span>',
        <span class="hljs-attr">background:</span> <span class="hljs-attr">isDragging</span> ? '#<span class="hljs-attr">f8f9ff</span>' <span class="hljs-attr">:</span> '#<span class="hljs-attr">fafafa</span>',
        <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>',
        <span class="hljs-attr">transition:</span> '<span class="hljs-attr">all</span> <span class="hljs-attr">0.3s</span> <span class="hljs-attr">ease</span>'
      }}&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ‹–æ‹½ä¸Šä¼ åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">fontSize:</span> <span class="hljs-attr">12</span>, <span class="hljs-attr">color:</span> '#<span class="hljs-attr">666</span>' }}&gt;</span>ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
  );
}
</code></pre>
<h3 data-id="heading-13">4. å¯æ‹–æ‹½çš„é¢æ¿å¸ƒå±€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">DashboardLayout</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [panels, setPanels] = <span class="hljs-title function_">useState</span>([
    { <span class="hljs-attr">id</span>: <span class="hljs-string">'chart'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'å›¾è¡¨é¢æ¿'</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-string">'stats'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'ç»Ÿè®¡é¢æ¿'</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">400</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> },
    { <span class="hljs-attr">id</span>: <span class="hljs-string">'activity'</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">'æ´»åŠ¨é¢æ¿'</span>, <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">300</span> }
  ]);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updatePanelPosition</span> = (<span class="hljs-params">id, x, y</span>) =&gt; {
    <span class="hljs-title function_">setPanels</span>(panels.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">panel</span> =&gt;</span> 
      panel.<span class="hljs-property">id</span> === id ? { ...panel, x, y } : panel
    ));
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> 
      <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>', 
      <span class="hljs-attr">width:</span> '<span class="hljs-attr">100</span>%', 
      <span class="hljs-attr">height:</span> '<span class="hljs-attr">600px</span>',
      <span class="hljs-attr">background:</span> '#<span class="hljs-attr">f5f5f5</span>'
    }}&gt;</span>
      {panels.map(panel =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>
          <span class="hljs-attr">key</span>=<span class="hljs-string">{panel.id}</span>
          <span class="hljs-attr">defaultPosition</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">x:</span> <span class="hljs-attr">panel.x</span>, <span class="hljs-attr">y:</span> <span class="hljs-attr">panel.y</span> }}
          <span class="hljs-attr">onStop</span>=<span class="hljs-string">{(e,</span> <span class="hljs-attr">data</span>) =&gt;</span> updatePanelPosition(panel.id, data.x, data.y)}
        &gt;
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
            <span class="hljs-attr">position:</span> '<span class="hljs-attr">absolute</span>',
            <span class="hljs-attr">width:</span> <span class="hljs-attr">350</span>,
            <span class="hljs-attr">height:</span> <span class="hljs-attr">250</span>,
            <span class="hljs-attr">background:</span> '<span class="hljs-attr">white</span>',
            <span class="hljs-attr">borderRadius:</span> <span class="hljs-attr">8</span>,
            <span class="hljs-attr">boxShadow:</span> '<span class="hljs-attr">0</span> <span class="hljs-attr">2px</span> <span class="hljs-attr">8px</span> <span class="hljs-attr">rgba</span>(<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0</span>,<span class="hljs-attr">0.1</span>)',
            <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>'
          }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
              <span class="hljs-attr">padding:</span> '<span class="hljs-attr">12px</span> <span class="hljs-attr">16px</span>',
              <span class="hljs-attr">borderBottom:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> #<span class="hljs-attr">e8e8e8</span>',
              <span class="hljs-attr">fontWeight:</span> '<span class="hljs-attr">bold</span>'
            }}&gt;</span>
              {panel.title}
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">padding:</span> <span class="hljs-attr">16</span>, <span class="hljs-attr">height:</span> '<span class="hljs-attr">calc</span>(<span class="hljs-attr">100</span>% <span class="hljs-attr">-</span> <span class="hljs-attr">50px</span>)' }}&gt;</span>
              é¢æ¿å†…å®¹åŒºåŸŸ
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span>
      ))}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-14">é«˜çº§åŠŸèƒ½</h2>
<h3 data-id="heading-15">äº‹ä»¶å¤„ç†</h3>
<p>React-Draggableæä¾›äº†ä¸°å¯Œçš„äº‹ä»¶å›è°ƒï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span>
  onStart={<span class="hljs-function">(<span class="hljs-params">e, data</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹–æ‹½å¼€å§‹'</span>, data);
  }}
  onDrag={<span class="hljs-function">(<span class="hljs-params">e, data</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹–æ‹½ä¸­'</span>, data);
  }}
  onStop={<span class="hljs-function">(<span class="hljs-params">e, data</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ‹–æ‹½ç»“æŸ'</span>, data);
  }}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å¯æ‹–æ‹½å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<p>äº‹ä»¶å›è°ƒä¸­çš„<code>data</code>å¯¹è±¡åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š</p>
<ul>
<li><code>x, y</code>: å½“å‰ä½ç½®åæ ‡</li>
<li><code>deltaX, deltaY</code>: ç›¸å¯¹äºä¸Šæ¬¡ä½ç½®çš„åç§»é‡</li>
<li><code>lastX, lastY</code>: ä¸Šæ¬¡äº‹ä»¶çš„ä½ç½®</li>
<li><code>node</code>: è¢«æ‹–æ‹½çš„DOMèŠ‚ç‚¹</li>
</ul>
<h3 data-id="heading-16">æ§åˆ¶æ‹–æ‹½è¡Œä¸º</h3>
<h4 data-id="heading-17">æ‹–æ‹½å¥æŸ„</h4>
<p>ä½¿ç”¨<code>handle</code>å±æ€§æŒ‡å®šæ‹–æ‹½çš„è§¦å‘åŒºåŸŸï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span> handle=<span class="hljs-string">".drag-handle"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"drag-handle"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">cursor:</span> '<span class="hljs-attr">move</span>' }}&gt;</span>
      æ‹–æ‹½æˆ‘
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å†…å®¹åŒºåŸŸ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h4 data-id="heading-18">å–æ¶ˆæ‹–æ‹½</h4>
<p>ä½¿ç”¨<code>cancel</code>å±æ€§æŒ‡å®šä¸å¯æ‹–æ‹½çš„åŒºåŸŸï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span> cancel=<span class="hljs-string">".no-drag"</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å¯ä»¥æ‹–æ‹½è¿™é‡Œ<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"no-drag"</span>&gt;</span>ç‚¹å‡»æŒ‰é’®ä¸ä¼šè§¦å‘æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h4 data-id="heading-19">ç½‘æ ¼å¯¹é½</h4>
<p>ä½¿ç”¨<code>grid</code>å±æ€§å®ç°ç½‘æ ¼å¯¹é½æ‹–æ‹½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span> grid={[<span class="hljs-number">25</span>, <span class="hljs-number">25</span>]}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç½‘æ ¼å¯¹é½æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h3 data-id="heading-20">å—æ§ç»„ä»¶</h3>
<p>ä½¿ç”¨å—æ§æ¨¡å¼ç²¾ç¡®æ§åˆ¶ç»„ä»¶ä½ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ControlledDraggable</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [position, setPosition] = <span class="hljs-title function_">useState</span>({ <span class="hljs-attr">x</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">0</span> });

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDrag</span> = (<span class="hljs-params">e, data</span>) =&gt; {
    <span class="hljs-title function_">setPosition</span>({ <span class="hljs-attr">x</span>: data.<span class="hljs-property">x</span>, <span class="hljs-attr">y</span>: data.<span class="hljs-property">y</span> });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>
      <span class="hljs-attr">position</span>=<span class="hljs-string">{position}</span>
      <span class="hljs-attr">onDrag</span>=<span class="hljs-string">{handleDrag}</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å—æ§æ‹–æ‹½ç»„ä»¶<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-21">æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-22">ä½¿ç”¨React.memoä¼˜åŒ–é‡æ¸²æŸ“</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { memo } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title class_">OptimizedDraggable</span> = <span class="hljs-title function_">memo</span>(<span class="hljs-function">(<span class="hljs-params">{ children, ...props }</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> {<span class="hljs-attr">...props</span>}&gt;</span>
      {children}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
  );
});
</code></pre>
<h3 data-id="heading-23">é™åˆ¶æ‹–æ‹½é¢‘ç‡</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Draggable</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-draggable'</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">ThrottledDraggable</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> lastUpdate = <span class="hljs-title function_">useRef</span>(<span class="hljs-number">0</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDrag</span> = (<span class="hljs-params">e, data</span>) =&gt; {
    <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
    <span class="hljs-keyword">if</span> (now - lastUpdate.<span class="hljs-property">current</span> &gt; <span class="hljs-number">16</span>) { <span class="hljs-comment">// çº¦60fps</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ›´æ–°ä½ç½®:'</span>, data.<span class="hljs-property">x</span>, data.<span class="hljs-property">y</span>);
      lastUpdate.<span class="hljs-property">current</span> = now;
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span> <span class="hljs-attr">onDrag</span>=<span class="hljs-string">{handleDrag}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ä¼˜åŒ–æ€§èƒ½çš„æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-24">æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-25">1. åˆç†è®¾ç½®åˆå§‹ä½ç½®</h3>
<p>ä½¿ç”¨<code>defaultPosition</code>è€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹æ ·å¼ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¨è</span>
&lt;<span class="hljs-title class_">Draggable</span> defaultPosition={{ <span class="hljs-attr">x</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">y</span>: <span class="hljs-number">100</span> }}&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æ­£ç¡®è®¾ç½®åˆå§‹ä½ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;

<span class="hljs-comment">// ä¸æ¨è</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">transform:</span> '<span class="hljs-attr">translate</span>(<span class="hljs-attr">100px</span>, <span class="hljs-attr">100px</span>)' }}&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>è¿™æ ·ä¼šæœ‰å†²çª<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
</code></pre>
<h3 data-id="heading-26">2. é¿å…åµŒå¥—æ‹–æ‹½</h3>
<p>ä¸è¦åœ¨å¯æ‹–æ‹½å…ƒç´ å†…éƒ¨å†åµŒå¥—å¯æ‹–æ‹½å…ƒç´ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸æ¨è</span>
&lt;<span class="hljs-title class_">Draggable</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Draggable</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åµŒå¥—æ‹–æ‹½ä¼šå¯¼è‡´é—®é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Draggable</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h3 data-id="heading-27">3. å¤„ç†ç§»åŠ¨ç«¯è§¦æ‘¸äº‹ä»¶</h3>
<p>ç¡®ä¿åœ¨ç§»åŠ¨ç«¯ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span>
  onTouchStart={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†è§¦æ‘¸å¼€å§‹äº‹ä»¶</span>
  }}
  onTouchEnd={<span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
    <span class="hljs-comment">// å¤„ç†è§¦æ‘¸ç»“æŸäº‹ä»¶</span>
  }}
&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç§»åŠ¨ç«¯å‹å¥½çš„æ‹–æ‹½<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h3 data-id="heading-28">4. å¯è®¿é—®æ€§è€ƒè™‘</h3>
<p>ä¸ºæ‹–æ‹½å…ƒç´ æ·»åŠ é€‚å½“çš„ARIAå±æ€§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;<span class="hljs-title class_">Draggable</span>&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>
    <span class="hljs-attr">role</span>=<span class="hljs-string">"button"</span>
    <span class="hljs-attr">tabIndex</span>=<span class="hljs-string">{0}</span>
    <span class="hljs-attr">aria-label</span>=<span class="hljs-string">"å¯æ‹–æ‹½å…ƒç´ "</span>
    <span class="hljs-attr">onKeyDown</span>=<span class="hljs-string">{(e)</span> =&gt;</span> {
      // æ”¯æŒé”®ç›˜æ“ä½œ
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        // å¤„ç†é”®ç›˜æ‹–æ‹½é€»è¾‘
      }
    }}
  &gt;
    å¯è®¿é—®çš„æ‹–æ‹½å…ƒç´ 
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/<span class="hljs-title class_">Draggable</span>&gt;
</code></pre>
<h2 data-id="heading-29">å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-30">Q: æ‹–æ‹½æ—¶å‡ºç°é—ªçƒæˆ–è·³åŠ¨ï¼Ÿ</h3>
<p>A: è¿™é€šå¸¸æ˜¯ç”±äºCSSæ ·å¼å†²çªå¯¼è‡´çš„ã€‚ç¡®ä¿ï¼š</p>
<ol>
<li>æ²¡æœ‰è®¾ç½®<code>position: absolute</code>æˆ–<code>position: fixed</code></li>
<li>çˆ¶å…ƒç´ æ²¡æœ‰è®¾ç½®<code>transform</code>æ ·å¼</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–JavaScriptåœ¨ä¿®æ”¹å…ƒç´ ä½ç½®</li>
</ol>
<h3 data-id="heading-31">Q: æ‹–æ‹½ä¸æµç•…ï¼Ÿ</h3>
<p>A: å¯ä»¥å°è¯•ä»¥ä¸‹ä¼˜åŒ–ï¼š</p>
<ol>
<li>ä½¿ç”¨<code>grid</code>å±æ€§å‡å°‘ä½ç½®æ›´æ–°é¢‘ç‡</li>
<li>é™åˆ¶æ‹–æ‹½äº‹ä»¶å¤„ç†å‡½æ•°çš„å¤æ‚åº¦</li>
<li>ä½¿ç”¨<code>requestAnimationFrame</code>ä¼˜åŒ–åŠ¨ç”»</li>
</ol>
<h3 data-id="heading-32">Q: ç§»åŠ¨ç«¯æ‹–æ‹½æ— æ•ˆï¼Ÿ</h3>
<p>A: ç¡®ä¿ï¼š</p>
<ol>
<li>æ·»åŠ äº†é€‚å½“çš„è§¦æ‘¸äº‹ä»¶å¤„ç†</li>
<li>æ£€æŸ¥CSSä¸­æ˜¯å¦æœ‰<code>touch-action: none</code></li>
<li>ç¡®è®¤æµè§ˆå™¨æ”¯æŒè§¦æ‘¸äº‹ä»¶</li>
</ol>
<h2 data-id="heading-33">æ€»ç»“</h2>
<p>React-Draggableæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„æ‹–æ‹½åº“ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå®ç°å„ç§æ‹–æ‹½äº¤äº’åŠŸèƒ½ã€‚é€šè¿‡æœ¬æ–‡çš„ä»‹ç»ï¼Œä½ åº”è¯¥å·²ç»æŒæ¡äº†ï¼š</p>
<ul>
<li>React-Draggableçš„åŸºæœ¬å®‰è£…å’Œä½¿ç”¨æ–¹æ³•</li>
<li>å¸¸è§çš„æ‹–æ‹½åœºæ™¯å®ç°</li>
<li>é«˜çº§åŠŸèƒ½å’Œæ€§èƒ½ä¼˜åŒ–æŠ€å·§</li>
<li>æœ€ä½³å®è·µå’Œå¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</li>
</ul>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œåˆç†è¿ç”¨è¿™äº›çŸ¥è¯†å¯ä»¥å¤§å¤§æå‡åº”ç”¨çš„ç”¨æˆ·ä½“éªŒã€‚è®°ä½è¦æ ¹æ®å…·ä½“éœ€æ±‚é€‰æ‹©åˆé€‚çš„é…ç½®ï¼Œå¹¶å§‹ç»ˆå…³æ³¨æ€§èƒ½å’Œå¯è®¿é—®æ€§ã€‚</p>
<h2 data-id="heading-34">å»¶ä¼¸é˜…è¯»</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-grid-layout%2Freact-draggable" target="_blank" title="https://github.com/react-grid-layout/react-draggable" ref="nofollow noopener noreferrer">React-Draggableå®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmtrends.com%2Freact-draggable-vs-react-dnd-vs-react-beautiful-dnd" target="_blank" title="https://www.npmtrends.com/react-draggable-vs-react-dnd-vs-react-beautiful-dnd" ref="nofollow noopener noreferrer">Reactæ‹–æ‹½åº“å¯¹æ¯”åˆ†æ</a></li>
<li>[Webæ‹–æ‹½APIæœ€ä½³å®è·µ](<a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2F" target="_blank" title="https://developer.mozilla.org/" ref="nofollow noopener noreferrer">developer.mozilla.org/</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦è§£æAIç¼–ç¨‹æŠ€æœ¯ï¼šä»åŸç†åˆ°å®è·µï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ è½åœ°]]></title>    <link>https://juejin.cn/post/7578723693825490980</link>    <guid>https://juejin.cn/post/7578723693825490980</guid>    <pubDate>2025-12-01T15:07:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578723693825490980" data-draft-id="7578667193321652287" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦è§£æAIç¼–ç¨‹æŠ€æœ¯ï¼šä»åŸç†åˆ°å®è·µï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ è½åœ°"/> <meta itemprop="keywords" content="è®¾è®¡æ¨¡å¼,äººå·¥æ™ºèƒ½,å¼€æº"/> <meta itemprop="datePublished" content="2025-12-01T15:07:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="OneCodeCN"/> <meta itemprop="url" content="https://juejin.cn/user/1427583415622366"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦è§£æAIç¼–ç¨‹æŠ€æœ¯ï¼šä»åŸç†åˆ°å®è·µï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ è½åœ°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1427583415622366/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    OneCodeCN
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T15:07:25.000Z" title="Mon Dec 01 2025 15:07:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>AIç¼–ç¨‹æ­£åœ¨é‡æ„è½¯ä»¶å¼€å‘çš„èŒƒå¼â€”â€”ä»ä¸€å¥è¯ç”Ÿæˆé¡¹ç›®æ¡†æ¶ï¼Œåˆ°è®¾è®¡ç¨¿ç›´æ¥è½¬ä»£ç ï¼Œå†åˆ°æ¨¡ä»¿ç°æœ‰å·¥ç¨‹é£æ ¼ç”Ÿæˆæ–°ä»£ç ï¼Œè¿™äº›æ›¾ç»çš„"é»‘ç§‘æŠ€"å·²æˆä¸ºç°å®ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥ç³»ç»Ÿæ‹†è§£AIç¼–ç¨‹çš„æ ¸å¿ƒæŠ€æœ¯åŸç†ã€ä¸‰å¤§ä¸»æµæ¨¡å¼ï¼Œä»¥åŠä¼ä¸šå’ŒæŠ€æœ¯äººå‘˜çš„è½åœ°æŒ‡å—ï¼Œå¸®ä½ ææ‡‚AIç¼–ç¨‹åˆ°åº•æ€ä¹ˆç”¨ã€èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚</p>
<h2 data-id="heading-0">AIç¼–ç¨‹æŠ€æœ¯åŸç†æ·±åº¦è§£æ</h2>
<p>AIç¼–ç¨‹çš„æ ¸å¿ƒä»·å€¼ï¼Œåœ¨äºæŠŠéæ ‡å‡†åŒ–çš„å¼€å‘éœ€æ±‚ï¼ˆè‡ªç„¶è¯­è¨€ã€è®¾è®¡ç¨¿ã€ç°æœ‰å·¥ç¨‹é£æ ¼ï¼‰è½¬åŒ–ä¸ºæ ‡å‡†åŒ–ä»£ç ã€‚ç›®å‰ä¸»æµçš„AIç¼–ç¨‹æ¨¡å¼æœ‰ä¸‰ç§ï¼Œæˆ‘ä»¬é€ä¸€æ‹†è§£å…¶åº•å±‚é€»è¾‘ã€‚</p>
<h3 data-id="heading-1">ğŸ“Œ ä¸€ã€æ„å¿µç¼–ç¨‹æ¨¡å¼ï¼ˆä¸€å¥è¯å¿«é€Ÿæ„å»ºï¼‰ï¼šæ— ä»£ç /ä½ä»£ç çš„éœ€æ±‚ç›´è¾¾å¼å¼€å‘</h3>
<p><strong>ç®€å•è¯´</strong>ï¼šä¸ç”¨å†™ä»£ç ï¼Œè¯´å¥è¯å°±èƒ½ç”Ÿæˆå¯ç”¨çš„é¡¹ç›®ã€‚æ¯”å¦‚ä½ è¯´"å¼€å‘ä¸€ä¸ªç§‘æŠ€å…¬å¸å®˜ç½‘"ï¼ŒAIå°±èƒ½ç›´æ¥ç»™ä½ ä¸€å¥—èƒ½è¿è¡Œçš„å®Œæ•´æ¡†æ¶ã€‚</p>
<h4 data-id="heading-2">1. æ ¸å¿ƒæŠ€æœ¯é€»è¾‘ï¼šé¢„è®¡ç®—ä¸æŒ‰éœ€å®ä¾‹åŒ–</h4>
<ul>
<li><strong>å¡ç‰‡ç»„ä»¶æ‹†åˆ†</strong>ï¼šæŠŠå¸¸ç”¨æ¨¡å—ï¼ˆå¯¼èˆªæ ã€è¡¨å•ã€æ¸¸æˆäº¤äº’ç­‰ï¼‰æ‹†æˆæ ‡å‡†åŒ–"å¡ç‰‡"ï¼Œæ¯ä¸ªå¡ç‰‡åŒ…å«åŸºç¡€ä»£ç ã€æ ·å¼å ä½ç¬¦ï¼ˆè‰²ç³»ã€å­—ä½“ç­‰ï¼‰ã€åŠŸèƒ½é’©å­ï¼ˆæŒ‰é’®è·³è½¬ç­‰ï¼‰ã€‚</li>
<li><strong>é¢„ç¼–è¯‘ç¼“å­˜</strong>ï¼šæ‰€æœ‰å¡ç‰‡æå‰è½¬æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰æˆ–å­—èŠ‚ç å­˜åœ¨æœ¬åœ°/äº‘ç«¯ï¼Œç”¨æˆ·æéœ€æ±‚æ—¶ç›´æ¥ä»ç¼“å­˜é‡Œè°ƒï¼Œä¸ç”¨å®æ—¶ç¼–è¯‘ï¼Œé€Ÿåº¦æ›´å¿«ã€‚</li>
<li><strong>åŠ æƒåŒ¹é…ç®—æ³•</strong>ï¼šæ ¹æ®éœ€æ±‚æ‹†å‡º4ç±»å‚æ•°ï¼ˆæŠ€æœ¯æ ˆ40%ã€è¡Œä¸šå±æ€§30%ã€æ ·å¼20%ã€æœ¬åœ°å–œå¥½10%ï¼‰ï¼Œå¾—åˆ†æœ€é«˜çš„æ¨¡æ¿ç»„åˆå°±æ˜¯åŸºç¡€æ¡†æ¶ï¼Œæ—¢ç¬¦åˆæŠ€æœ¯è¦æ±‚åˆè´´åˆåœºæ™¯ã€‚</li>
</ul>
<h4 data-id="heading-3">2. å¤§æ¨¡å‹æ ¸å¿ƒå‚æ•°åŠä½œç”¨</h4>






























<table><thead><tr><th align="left">å‚æ•°ç±»å‹</th><th align="left">æ ¸å¿ƒå†…æ¶µ</th><th align="left">æŠ€æœ¯ä½œç”¨</th></tr></thead><tbody><tr><td align="left">æŠ€æœ¯æ ˆå‚æ•°ï¼ˆVue/Reactç­‰ï¼‰</td><td align="left">æŒ‡å®šå‰ç«¯æ¡†æ¶</td><td align="left">å†³å®šæ¨¡æ¿è¯­æ³•ï¼ˆå¦‚Vueçš„v-bindã€Reactçš„useStateï¼‰ï¼Œè‡ªåŠ¨æ³¨å…¥ä¾èµ–é…ç½®</td></tr><tr><td align="left">æ ·å¼æ¨¡å‹å‚æ•°ï¼ˆè‰²ç³»/é£æ ¼ï¼‰</td><td align="left">è§†è§‰å®šä½ï¼ˆä¸»è‰²ã€ç®€çº¦/ç§‘æŠ€é£ï¼‰</td><td align="left">è½¬åŒ–ä¸ºCSSå˜é‡ï¼Œæ§åˆ¶å¸ƒå±€ã€é˜´å½±ç­‰ï¼Œç»Ÿä¸€è§†è§‰é£æ ¼</td></tr><tr><td align="left">è¡Œä¸šçŸ¥è¯†èƒŒæ™¯</td><td align="left">è¡Œä¸šä¸šåŠ¡ç‰¹æ€§</td><td align="left">ç¡®å®šæ¨¡å—ä¼˜å…ˆçº§ï¼ˆå¦‚ç”µå•†ä¼˜å…ˆå•†å“åˆ—è¡¨ï¼‰ï¼Œå¡«å……é€šç”¨æ–‡æœ¬</td></tr><tr><td align="left">æœ¬åœ°å–œå¥½</td><td align="left">ç”¨æˆ·å†å²é€‰æ‹©</td><td align="left">æ„å»ºåå¥½ç”»åƒï¼Œè®©è¾“å‡ºè¶Šæ¥è¶Šè´´åˆä¸ªäººä¹ æƒ¯</td></tr></tbody></table>
<h4 data-id="heading-4">3. å®Œæ•´å·¥ä½œæµç¨‹</h4>
<ol>
<li>éœ€æ±‚è§£æï¼šæŠŠè‡ªç„¶è¯­è¨€æ‹†æˆä¸Šè¿°4ç±»å‚æ•°ï¼›</li>
<li>æ¨¡æ¿åŒ¹é…ï¼šç”¨åŠ æƒç®—æ³•ä»ç¼“å­˜é€‰æœ€åˆé€‚çš„å¡ç‰‡ç»„åˆï¼›</li>
<li>å‚æ•°æ³¨å…¥ï¼šæ›¿æ¢å ä½ç¬¦ï¼Œç”Ÿæˆå®Œæ•´ä»£ç ï¼›</li>
<li>ç¼“å­˜æ›´æ–°ï¼šè®°å½•æœ¬æ¬¡ç”Ÿæˆç»“æœå’Œé€‰æ‹©ï¼Œä¼˜åŒ–ä¸‹æ¬¡åŒ¹é…ã€‚</li>
</ol>
<h3 data-id="heading-5">ğŸ¨ äºŒã€å‰ç«¯é©±åŠ¨æ¨¡å¼ï¼ˆå›¾è½¬ä»£ç ï¼‰ï¼šè®¾è®¡ç¨¿çš„è‡ªåŠ¨åŒ–ä»£ç è½åœ°</h3>
<p><strong>ç®€å•è¯´</strong>ï¼šæŠŠFigmaã€è“æ¹–çš„è®¾è®¡ç¨¿ç›´æ¥è½¬æˆå¯è¿è¡Œçš„å‰ç«¯ä»£ç ï¼Œçœå»"è®¾è®¡-å¼€å‘"çš„åå¤æ²Ÿé€šã€‚</p>
<h4 data-id="heading-6">1. æ ¸å¿ƒæŠ€æœ¯åŸºçŸ³ï¼šäº”ç»´åæ ‡ä½“ç³»</h4>
<p>è®¾è®¡ç¨¿çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½ä¼šè¢«æ‹†è§£æˆ5ä¸ªç»´åº¦çš„å±æ€§ï¼Œç¡®ä¿è§†è§‰å’Œäº¤äº’1:1è¿˜åŸæˆä»£ç ï¼š</p>



































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">æŠ€æœ¯å†…æ¶µ</th><th align="left">å‰ç«¯æ˜ å°„é€»è¾‘</th></tr></thead><tbody><tr><td align="left">äºŒç»´å¹³é¢ï¼ˆX,Yï¼‰</td><td align="left">å…ƒç´ ä½ç½®ã€å®½é«˜</td><td align="left">CSSçš„positionã€left/top/width/heightï¼Œæˆ–grid/flexå¸ƒå±€</td></tr><tr><td align="left">ä¸‰ç»´å›¾å±‚é€è§†</td><td align="left">å±‚çº§ã€åµŒå¥—ã€æŠ•å½±</td><td align="left">DOMåµŒå¥—ç»“æ„ã€z-indexã€box-shadowï¼Œç»„ä»¶çˆ¶å­å…³ç³»</td></tr><tr><td align="left">å››ç»´æ—¶é—´è½´ï¼ˆåŠ¨ç”»ï¼‰</td><td align="left">hover/ç‚¹å‡»æ•ˆæœã€åŠ¨ç”»æ—¶é•¿</td><td align="left">CSS@keyframes/transitionã€JSäº‹ä»¶ç›‘å¬</td></tr><tr><td align="left">äº”ç»´åŠ¨ä½œäº¤äº’</td><td align="left">é¡µé¢è·³è½¬ã€è§¦å‘æ¡ä»¶</td><td align="left">å‰ç«¯è·¯ç”±é…ç½®ã€æ»šåŠ¨ç›‘å¬ã€äº‹ä»¶ç»‘å®š</td></tr><tr><td align="left">å·¥ç¨‹åŒ–ç»´åº¦</td><td align="left">æ¨¡å—åŒ–æ‹†åˆ†</td><td align="left">ç»„ä»¶æ–‡ä»¶æ‹†åˆ†ã€ç›®å½•ç»“æ„ã€å¯¼å…¥å¯¼å‡ºé€»è¾‘</td></tr></tbody></table>
<h4 data-id="heading-7">2. å¤§æ¨¡å‹å·¥ä½œåŸç†</h4>
<ol>
<li>è®¾è®¡ç¨¿è§£æï¼šé€šè¿‡Figmaç­‰å·¥å…·çš„APIè¯»å–å…ƒæ•°æ®ï¼Œè½¬æˆäº”ç»´åæ ‡æ•°æ®ï¼ˆå¦‚{x:100, y:200, animation:{duration:0.5s}}ï¼‰ï¼›</li>
<li>è§†è§‰-ä»£ç æ˜ å°„ï¼šæŒ‰"è®¾è®¡å±æ€§-å‰ç«¯è¯­æ³•"è§„åˆ™ï¼ŒæŠŠäº”ç»´æ•°æ®è½¬æˆä»£ç ï¼ˆå¦‚å¹³é¢å±æ€§â†’CSSå¸ƒå±€ï¼‰ï¼›</li>
<li>ä»£ç ä¼˜åŒ–ï¼šè‡ªåŠ¨å¤„ç†å…¼å®¹æ€§ï¼ˆåŠ CSSå‰ç¼€ï¼‰ã€åˆ å†—ä½™ä»£ç ï¼Œé€‚é…æŒ‡å®šæ¡†æ¶ã€‚</li>
</ol>
<h4 data-id="heading-8">3. æ ¸å¿ƒæŠ€æœ¯éš¾ç‚¹ä¸è§£å†³æ–¹æ¡ˆ</h4>
<ul>
<li>è®¾è®¡ç¨¿æ²¡æ ‡hoveræ•ˆæœï¼ŸæŒ‰è¡Œä¸šé€šç”¨è§„åˆ™è¡¥ï¼ˆå¦‚æŒ‰é’®é»˜è®¤hoverå˜è‰²ï¼‰ï¼›</li>
<li>å¤šå±‚åµŒå¥—å¯¼è‡´DOMæ··ä¹±ï¼Ÿç”¨å›¾å±‚æ ‘éå†ç®—æ³•ï¼Œä¿æŒåµŒå¥—ç»“æ„ä¸€è‡´ï¼›</li>
<li>åŠ¨ç”»å‚æ•°ä¸åŒ¹é…ï¼ŸæŠŠFigmaç¼“åŠ¨æ›²çº¿è½¬æˆCSSçš„cubic-bezierå‡½æ•°ï¼Œç¡®ä¿èŠ‚å¥ä¸€è‡´ã€‚</li>
</ul>
<h3 data-id="heading-9">ğŸ”„ ä¸‰ã€åç«¯é©±åŠ¨æ¨¡å¼ï¼ˆç°æœ‰å·¥ç¨‹å­¦ä¹ ï¼‰ï¼šå·¥ç¨‹é£æ ¼çš„æ¨¡ä»¿å¼ç”Ÿæˆ</h3>
<p><strong>ç®€å•è¯´</strong>ï¼šè®©AI"å­¦ä¹ "ä½ ç°æœ‰é¡¹ç›®çš„ä»£ç é£æ ¼ã€æ¶æ„å’Œè§„èŒƒï¼Œç”Ÿæˆçš„æ–°ä»£ç èƒ½å’Œè€ä»£ç æ— ç¼è¡”æ¥ï¼Œå†ä¹Ÿä¸ç”¨çº ç»“"é£æ ¼ä¸ç»Ÿä¸€"ã€‚</p>
<h4 data-id="heading-10">1. æ ¸å¿ƒæŠ€æœ¯é€»è¾‘ï¼šä»"è¯»å–"åˆ°"æ¨¡ä»¿"çš„ä¸‰æ­¥é—­ç¯</h4>
<ol>
<li><strong>å·¥ç¨‹è§£æï¼šæå–å…³é”®ç‰¹å¾</strong>undefinedé€šè¿‡IDEæ’ä»¶æ‰«æé¡¹ç›®ï¼Œæå–æŠ€æœ¯è·¯çº¿ï¼ˆVue3/React18ã€Vite/Webpackï¼‰ã€åœºæ™¯èƒ½åŠ›ï¼ˆä¸šåŠ¡æ¨¡å—åˆ’åˆ†ã€æ ¸å¿ƒåŠŸèƒ½ï¼‰ã€ç¼–ç è§„èŒƒï¼ˆå‘½åè§„åˆ™ã€æ³¨é‡Šé£æ ¼ï¼‰ï¼Œå½¢æˆ"å·¥ç¨‹ç‰¹å¾åº“"ã€‚</li>
<li><strong>çŸ¥è¯†åº“å»ºæ¨¡ä¸ä¸“å®¶æ¨¡å¼åˆ’åˆ†</strong>undefinedæŠŠç‰¹å¾åº“ç»“æ„åŒ–å­˜æˆ"ä¸“å±çŸ¥è¯†åº“"ï¼ˆå¦‚{framework:'Vue3', indent:2}ï¼‰ï¼Œå¹¶è®©å¤§æ¨¡å‹åˆ‡æ¢æˆå¯¹åº”"ä¸“å®¶æ¨¡å¼"ï¼ˆå¦‚"Vue3ç»„åˆå¼APIä¸“å®¶"ï¼‰ï¼Œæ¯ä¸ªæ¨¡å¼æœ‰ä¸“å±å‚æ•°æƒé‡ã€‚</li>
<li><strong>æ¨¡ä»¿ç”Ÿæˆä¸å‚æ•°è¿­ä»£</strong>undefinedç»“åˆæ–°éœ€æ±‚å’ŒçŸ¥è¯†åº“ï¼Œç”Ÿæˆç¬¦åˆåŸé£æ ¼çš„ä»£ç ï¼›ç”¨æˆ·ä¿®æ”¹åï¼Œåå‘æ›´æ–°çŸ¥è¯†åº“ï¼Œè¶Šç”¨è¶Šç²¾å‡†ã€‚</li>
</ol>
<h4 data-id="heading-11">2. å¤§æ¨¡å‹æ ¸å¿ƒèƒ½åŠ›æ”¯æ’‘</h4>
<ul>
<li>ASTçº§ç‰¹å¾æå–ï¼šé€šè¿‡æŠ½è±¡è¯­æ³•æ ‘åˆ†æç»“æ„ï¼Œé¿å…è¡¨å±‚æ¨¡ä»¿åå·®ï¼›</li>
<li>å‘é‡æ•°æ®åº“æ£€ç´¢ï¼šæŠŠä»£ç ç‰¹å¾è½¬æˆå‘é‡ï¼Œå¿«é€ŸåŒ¹é…è§„èŒƒï¼Œæå‡æ•ˆç‡ï¼›</li>
<li>ç»†åˆ†å‚æ•°åŠ æƒï¼šæŒ‰åŸå·¥ç¨‹ä½¿ç”¨é¢‘ç‡åˆ†é…æƒé‡ï¼ˆå¦‚100%ç”¨ç»„åˆå¼APIï¼Œè¯¥å‚æ•°æƒé‡è®¾100%ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-12">3. æ ¸å¿ƒæŠ€æœ¯ä»·å€¼</h4>
<ul>
<li>è§£å†³é£æ ¼å†²çªï¼Œæ–°å¢ä»£ç å’Œè€å·¥ç¨‹æ— ç¼è¡”æ¥ï¼›</li>
<li>å¼€å‘è€…ä¸ç”¨è®°è§„èŒƒï¼ŒAIè‡ªåŠ¨å¯¹é½ï¼›</li>
<li>æŠŠå·¥ç¨‹"éšæ€§ç»éªŒ"ï¼ˆç¼–ç ä¹ æƒ¯ï¼‰è½¬æˆ"æ˜¾æ€§å‚æ•°"ï¼Œå®ç°çŸ¥è¯†ä¼ æ‰¿ã€‚</li>
</ul>
<h3 data-id="heading-13">ğŸ“Š å››ã€AIç¼–ç¨‹çš„åº•å±‚é€»è¾‘ä¸è¡Œä¸šç°çŠ¶</h3>
<h4 data-id="heading-14">1. ä¸‰å¤§æ¨¡å¼æ ¸å¿ƒæŠ€æœ¯å¯¹æ¯”</h4>





























<table><thead><tr><th align="left">æ¨¡å¼</th><th align="left">æ ¸å¿ƒæŠ€æœ¯å…³é”®è¯</th><th align="left">å¤§æ¨¡å‹æ ¸å¿ƒä½œç”¨</th><th align="left">åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td align="left">æ„å¿µç¼–ç¨‹</td><td align="left">æ¨¡æ¿ç¼“å­˜ã€å‚æ•°åŒ¹é…</td><td align="left">éœ€æ±‚æ‹†è§£â†’æ¨¡æ¿åŒ¹é…â†’å‚æ•°æ³¨å…¥</td><td align="left">å®˜ç½‘ã€å°æ¸¸æˆã€ç®€æ˜“å·¥å…·</td></tr><tr><td align="left">å›¾è½¬ä»£ç </td><td align="left">äº”ç»´åæ ‡ã€è§†è§‰-ä»£ç æ˜ å°„</td><td align="left">è®¾è®¡ç¨¿è§£æâ†’å±æ€§è§£æ„â†’è¯­æ³•æ˜ å°„</td><td align="left">è®¾è®¡ç¨¿è½åœ°ã€UIè¿˜åŸ</td></tr><tr><td align="left">å·¥ç¨‹å­¦ä¹ </td><td align="left">ç‰¹å¾æå–ã€çŸ¥è¯†åº“å»ºæ¨¡</td><td align="left">å·¥ç¨‹è§£æâ†’è§„åˆ™åŒ¹é…â†’æ¨¡ä»¿ç”Ÿæˆ</td><td align="left">ç°æœ‰é¡¹ç›®è¿­ä»£ã€æ–°å¢åŠŸèƒ½</td></tr></tbody></table>
<p><strong>å…±æ€§</strong>ï¼šéƒ½æ˜¯"å‚æ•°åŒ–é…ç½®"ä¸ºæ ¸å¿ƒï¼Œé€šè¿‡å¤§æ¨¡å‹æŠŠéæ ‡å‡†åŒ–è¾“å…¥è½¬æˆæ ‡å‡†åŒ–ä»£ç ï¼Œæœ¬è´¨æ˜¯"å¤§æ¨¡å‹+é¢†åŸŸçŸ¥è¯†+å·¥ç¨‹è§„åˆ™"çš„ååŒã€‚</p>
<h4 data-id="heading-15">2. å¤§æ¨¡å‹ä¼˜åŒ–åŸç†ï¼šä»"èƒ½ç”¨"åˆ°"å¥½ç”¨"</h4>
<ul>
<li><strong>ä¸“å®¶æ¨¡å¼åˆ’åˆ†</strong>ï¼šæŒ‰åœºæ™¯æ‹†åˆ†èƒ½åŠ›ï¼ˆå¦‚"Vue3å¼€å‘ä¸“å®¶"ï¼‰ï¼Œå¼ºåŒ–å¯¹åº”çŸ¥è¯†ï¼›</li>
<li><strong>å¾®è°ƒå‚æ•°æŠ€æœ¯</strong>ï¼šç”¨å°‘é‡é¡¹ç›®è§„èŒƒæ•°æ®å¾®è°ƒæ¨¡å‹ï¼Œé¿å…"æ³›è€Œä¸ç²¾"ï¼›</li>
<li><strong>å·¥ä½œæµAgentæœºåˆ¶</strong>ï¼šå¤šAgentåˆ†å·¥åä½œï¼ˆéœ€æ±‚è§£æâ†’ç”Ÿæˆâ†’æ£€æŸ¥â†’ä¼˜åŒ–ï¼‰ï¼›</li>
<li><strong>çŸ¥è¯†åº“åº”ç”¨</strong>ï¼šå®æ—¶è°ƒç”¨é¢†åŸŸçŸ¥è¯†ï¼ˆæ¡†æ¶æ–‡æ¡£ã€ç¼–ç è§„èŒƒï¼‰ï¼Œç¡®ä¿è¾“å‡ºåˆè§„ï¼›</li>
<li><strong>ç­›é€‰è¿‡æ»¤æœºåˆ¶</strong>ï¼šè¯„ä¼°ä»£ç æ­£ç¡®æ€§ã€æ€§èƒ½ã€é£æ ¼ï¼Œè¿‡æ»¤å†—ä½™å’Œé£é™©ä»£ç ã€‚</li>
</ul>
<h4 data-id="heading-16">3. AIGCæ¼”å˜ä¸AI-IDEè¡Œä¸šç°çŠ¶</h4>
<p>2025å¹´å›½å†…AI-IDEçˆ†å‘ï¼Œé˜¿é‡ŒQoderã€è…¾è®¯CBç­‰äº§å“å¯†é›†å‡ºç°ã€‚å›½é™…ä¸ŠOpenAIå¥ å®š"æŒ‡ä»¤å¾®è°ƒ+ä»£ç å¯¹é½"èŒƒå¼ï¼Œå›½å†…DeepSeek3.Xç­‰æ¨¡å‹é€šè¿‡å¤šå°ºåº¦ä¸Šä¸‹æ–‡ç†è§£æå‡ä¸­æ–‡é€‚é…èƒ½åŠ›ï¼Œå½“å‰ç«äº‰æ ¸å¿ƒæ˜¯æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æ ‡å‡†ä¸å·¥ä½œæµè®¾è®¡ã€‚</p>
<h2 data-id="heading-17">ç¬¬äºŒéƒ¨åˆ†ï¼šå®è·µè·¯å¾„ï¼šä¼ä¸šä¸æŠ€æœ¯äººå‘˜çš„AIç¼–ç¨‹è½åœ°æŒ‡å—</h2>
<h3 data-id="heading-18">ğŸ¢ ä¸€ã€ä¼ä¸šæ ¸å¿ƒå†³ç­–ï¼šæ˜¯å¦éœ€è¦æ„å»ºè‡ªæœ‰å¤§æ¨¡å‹ä½“ç³»ï¼Ÿ</h3>
<h4 data-id="heading-19">ï¼ˆ1ï¼‰åœºæ™¯ä¸€ï¼šå†…éƒ¨ç ”å‘æ•ˆç‡æå‡â€”â€”ä¼˜å…ˆå€ŸåŠ›å¤–éƒ¨æˆç†Ÿæ¨¡å‹</h4>
<p>å¦‚æœåªæ˜¯æƒ³æå‡å†…éƒ¨å›¢é˜Ÿæ•ˆç‡ï¼ˆè§£å†³é‡å¤ç¼–ç ã€è§„èŒƒç»Ÿä¸€ç­‰é—®é¢˜ï¼‰ï¼Œæ²¡å¿…è¦è‡ªå»ºå¤§æ¨¡å‹ï¼š</p>
<ul>
<li>å·¥å…·é€‰å‹ï¼šç”¨VS Code Copilotã€é˜¿é‡ŒQoderç­‰å¼€ç®±å³ç”¨å·¥å…·ï¼›</li>
<li>æµç¨‹é€‚é…ï¼šæ˜ç¡®"AIç”Ÿæˆ-äººå·¥æ ¡éªŒ"æœºåˆ¶ï¼Œé‡ç‚¹æŸ¥ä¸šåŠ¡é€»è¾‘å’Œå®‰å…¨ï¼›</li>
<li>æˆæœ¬æ§åˆ¶ï¼šç”¨SaaSæŒ‰éœ€ä»˜è´¹ï¼ŒåŸ¹è®­å›¢é˜ŸPromptèƒ½åŠ›æœ€å¤§åŒ–ä»·å€¼ã€‚</li>
</ul>
<p>é€‚åˆï¼šä¼ ç»Ÿä¼ä¸šITéƒ¨é—¨ã€ä¸­å°å‹äº’è”ç½‘å›¢é˜Ÿã€éæŠ€æœ¯é©±åŠ¨å‹ä¼ä¸šã€‚</p>
<h4 data-id="heading-20">ï¼ˆ2ï¼‰åœºæ™¯äºŒï¼šå¯¹å¤–æä¾›AIäº§å“æœåŠ¡â€”â€”å¿…é¡»å¸ƒå±€è‡ªæœ‰éƒ¨ç½²ä½“ç³»</h4>
<p>å¦‚æœæ ¸å¿ƒä¸šåŠ¡æ˜¯å¯¹å¤–æä¾›AIå¼€å‘æœåŠ¡ï¼ˆå¦‚å¿«é€Ÿå»ºç«™å·¥å…·ï¼‰ï¼Œè‡ªå»ºä½“ç³»æ˜¯å¿…ç„¶ï¼š</p>
<ul>
<li><strong>å·¥å…·è¾“å‡ºå‹ä¼ä¸š</strong>ï¼ˆå¦‚SaaSå‚å•†ï¼‰ï¼šç§æœ‰éƒ¨ç½²é™ä½è°ƒç”¨æˆæœ¬ï¼Œç”¨é¢„ç¼–è¯‘æ¨¡æ¿åº“æ‰§è¡Œä»£ç ç”Ÿæˆï¼Œè®¡ç®—æˆæœ¬é™60%+ï¼›</li>
<li><strong>æ•°æ®é©±åŠ¨å‹ä¼ä¸š</strong>ï¼ˆå¦‚é‡‘èã€åŒ»ç–—ï¼‰ï¼šç§æœ‰éƒ¨ç½²ä¿éšœæ•°æ®å®‰å…¨ï¼Œç»“åˆè¡Œä¸šä¸“å±çŸ¥è¯†åº“ï¼ˆå¦‚é£æ§è§„åˆ™ï¼‰ï¼Œæå‡è¾“å‡ºé€‚é…æ€§ã€‚</li>
</ul>
<h3 data-id="heading-21">ğŸ”§ äºŒã€è½¯ä»¶ä¼ä¸šAIå‡çº§ï¼šå…¨é“¾è·¯é‡æ„ä¸èƒ½åŠ›å»ºè®¾</h3>
<p>AIç¼–ç¨‹ä¸æ˜¯ç®€å•åŠ å·¥å…·ï¼Œè€Œæ˜¯"æ–¹æ³•æµç¨‹ã€ç»„ç»‡èƒ½åŠ›ã€æŠ€æœ¯æ¶æ„"çš„å…¨é“¾è·¯å‡çº§ã€‚</p>
<h4 data-id="heading-22">ï¼ˆ1ï¼‰æ–¹æ³•æµç¨‹å‡çº§ï¼šä»"äººå·¥ä¸»å¯¼"åˆ°"äººæœºååŒ"</h4>
<ul>
<li><strong>å…¨å‘˜AIçŸ¥è¯†å‡çº§</strong>ï¼šäº§å“ã€ç ”å‘ã€æµ‹è¯•éƒ½è¦æ‡‚AIâ€”â€”äº§å“ç»ç†è¦ä¼šæŠŠ"é¡µé¢æµç•…"è½¬æˆ"é¦–å±åŠ è½½â‰¤1.5s"ï¼›æµ‹è¯•ç”¨AIç”Ÿæˆè‡ªåŠ¨åŒ–è„šæœ¬ã€‚</li>
<li><strong>ç ”å‘CI/CDæµç¨‹å˜é©</strong>ï¼šæŠŠAIåµŒå…¥å…¨æµç¨‹ï¼šéœ€æ±‚â†’ä»£ç ç”Ÿæˆâ†’è‡ªåŠ¨åŒ–æµ‹è¯•â†’å®‰å…¨æ‰«æâ†’éƒ¨ç½²ï¼Œç ”å‘å‘¨æœŸç¼©çŸ­30%+ã€‚</li>
<li><strong>ä¼ä¸šçº§PromptåŸºç¡€æ„å»º</strong>ï¼šæŒ‰ä¸šåŠ¡åœºæ™¯ï¼ˆç”µå•†è®¢å•ã€é‡‘èæ”¯ä»˜ï¼‰å’ŒæŠ€æœ¯æ ˆåˆ†ç±»æ²‰æ·€æ¨¡æ¿ï¼Œæ¯”å¦‚ï¼š"åŸºäºSpring Boot 2.7ï¼Œå¼€å‘ç”µå•†è®¢å•åˆ›å»ºæ¥å£ï¼Œå«æƒé™æ ¡éªŒã€åº“å­˜é¢„æ‰£ï¼Œè¾“å‡ºController+Serviceä»£ç "ã€‚</li>
</ul>
<h4 data-id="heading-23">ï¼ˆ2ï¼‰è½¯ä»¶æ¶æ„å‡çº§ï¼šæ„å»ºæ”¯æ’‘AIèƒ½åŠ›çš„æŠ€æœ¯åº•åº§</h4>
<ul>
<li><strong>RAGçŸ¥è¯†ä½“ç³»</strong>ï¼šæŠŠè¡Œä¸šæ–¹æ¡ˆã€ç¼–ç è§„èŒƒã€å†å²ä»£ç è½¬æˆç»“æ„åŒ–çŸ¥è¯†åº“ï¼ŒAIç”Ÿæˆä»£ç æ—¶å®æ—¶è°ƒç”¨ï¼Œç¡®ä¿ç¬¦åˆä¸šåŠ¡è§„åˆ™ï¼›</li>
<li><strong>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ç®¡ç†</strong>ï¼šå¤šAgentåˆ†å·¥åä½œï¼ˆéœ€æ±‚è§£æã€å‰åç«¯ç”Ÿæˆã€æµ‹è¯•ã€å®‰å…¨å®¡è®¡ï¼‰ï¼Œè‡ªåŠ¨æ‹†è§£å¤æ‚ä»»åŠ¡ï¼›</li>
<li><strong>æµç¨‹é©±åŠ¨æ¨¡å¼</strong>ï¼šç”¨æˆ·è¾“å…¥å‚æ•°ï¼ˆå¦‚å®¢æˆ·ä¿¡æ¯å­—æ®µã€æƒé™è§’è‰²ï¼‰ï¼Œç³»ç»Ÿè‡ªåŠ¨è°ƒç”¨AIç”Ÿæˆä»£ç ï¼Œå®Œæˆæ•°æ®åº“è®¾è®¡ã€é¡µé¢å¼€å‘ç­‰ï¼›</li>
<li><strong>å·¥å…·é“¾æ„å»º</strong>ï¼šå¯¹å†…æ•´åˆAIå·¥å…·ã€çŸ¥è¯†åº“ã€CI/CDï¼›å¯¹å¤–å°è£…è¡Œä¸šä¸“å±å·¥å…·ï¼ˆå¦‚"é‡‘èAIå¼€å‘å¥—ä»¶"ï¼‰ï¼Œå¼€è¾Ÿæ–°ç›ˆåˆ©ç‚¹ã€‚</li>
</ul>
<h3 data-id="heading-24">ğŸ‘¨ğŸ’» ä¸‰ã€æŠ€æœ¯äººå‘˜è§†è§’ï¼šä»"æ‰§è¡Œè€…"åˆ°"AIååŒæŒ‡æŒ¥å®˜"</h3>
<p>AIä¸ä¼šå–ä»£æŠ€æœ¯äººå‘˜ï¼Œè€Œæ˜¯è§£æ”¾é‡å¤åŠ³åŠ¨ï¼Œè®©ç²¾åŠ›èšç„¦åœ¨æ ¸å¿ƒèƒ½åŠ›ä¸Šã€‚</p>
<h4 data-id="heading-25">ï¼ˆ1ï¼‰ç¨‹åºå‘˜ï¼šæ„å»º"AIæ— æ³•æ›¿ä»£çš„æŠ€æœ¯å£å’"</h4>
<p>åˆ†ä¸‰ä¸ªè¿›é˜¶é˜¶æ®µï¼š</p>
<ol>
<li><strong>åŸºç¡€åº”ç”¨é˜¶æ®µï¼šç”¨AIææ•ˆé‡å¤å·¥ä½œ</strong>
<ul>
<li>å­¦ä¹ ï¼šPromptåŸºç¡€ï¼ˆ5W1HåŸåˆ™ï¼šè°ç”¨ã€åšä»€ä¹ˆã€ä½•æ—¶è§¦å‘ã€åœºæ™¯ã€ç›®æ ‡ã€æŠ€æœ¯è¦æ±‚ï¼‰ã€ä¸»æµå·¥å…·æ“ä½œï¼›</li>
<li>åœºæ™¯ï¼šç”ŸæˆCRUDæ¥å£ã€å•å…ƒæµ‹è¯•ã€æ ¼å¼åŒ–ä»£ç ã€ç¿»è¯‘æŠ€æœ¯æ–‡æ¡£ï¼›</li>
<li>æŠ€å·§ï¼šæŒ‡ä»¤è¦æ˜ç¡®"æŠ€æœ¯æ ˆ+åŠŸèƒ½ç‚¹+è¾“å‡ºæ ¼å¼"ï¼Œæ¯”å¦‚ï¼š"åŸºäºVue3+Piniaï¼Œå¼€å‘è´­ç‰©è½¦åŠŸèƒ½ï¼Œå«åº“å­˜æ ¡éªŒï¼Œè¾“å‡ºtemplate+scriptä»£ç ï¼Œé™„æ³¨é‡Š"ã€‚</li>
</ul>
</li>
<li><strong>è¿›é˜¶æå‡é˜¶æ®µï¼šç”¨AIæ”¯æ’‘å¤æ‚å¼€å‘å†³ç­–</strong>
<ul>
<li>å­¦ä¹ ï¼šå¤§æ¨¡å‹å¾®è°ƒåŸºç¡€ã€ASTè¯­æ³•æ ‘åŸç†ã€AIä»£ç ä¼˜åŒ–ç­–ç•¥ï¼›</li>
<li>åœºæ™¯ï¼šæ‹†è§£å¤æ‚ä¸šåŠ¡ï¼ˆå¦‚æŠŠ"ç”µå•†ç§’æ€"æ‹†æˆåº“å­˜é¢„æ‰£ã€è®¢å•åˆ›å»ºç­‰æ¨¡å—ï¼‰ã€æ¡†æ¶è¿ç§»ã€æ’æŸ¥æ€§èƒ½é—®é¢˜ï¼›</li>
<li>æŠ€å·§ï¼šå»ºç«‹"AIç”Ÿæˆ-äººå·¥æ ¡éªŒ"æ¸…å•ï¼Œé‡ç‚¹æŸ¥ä¸šåŠ¡é€‚é…æ€§ã€æ€§èƒ½å®‰å…¨æ€§ã€å¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
</li>
<li><strong>é«˜é˜¶å¼•é¢†é˜¶æ®µï¼šç”¨AIæ„å»ºå›¢é˜Ÿä¸“å±èƒ½åŠ›</strong>
<ul>
<li>å­¦ä¹ ï¼šAgentå·¥ä½œæµè®¾è®¡ã€å‘é‡æ•°æ®åº“åº”ç”¨ã€AIå·¥å…·äºŒæ¬¡å¼€å‘ï¼›</li>
<li>åœºæ™¯ï¼šå¼€å‘å›¢é˜Ÿä¸“å±æ’ä»¶ï¼ˆå¦‚æ ¡éªŒç¼–ç è§„èŒƒçš„VS Codeæ’ä»¶ï¼‰ã€æ„å»ºä¸šåŠ¡ä¸“å®¶æ¨¡å‹ã€ä¸»å¯¼AIä¸CI/CDèåˆï¼›</li>
<li>æŠ€å·§ï¼šæ²‰æ·€å›¢é˜ŸPromptæ¨¡æ¿åº“ï¼ŒæŒ‰ä¸šåŠ¡æ¨¡å—åˆ†ç±»ï¼Œå®šæœŸè¿­ä»£ä¼˜åŒ–ã€‚</li>
</ul>
</li>
</ol>
<p><strong>é¿å‘ç‚¹</strong>ï¼šåˆ«å½“"AIä¼ å£°ç­’"ï¼Œè¦æ‡‚åº•å±‚æŠ€æœ¯ï¼ˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘ç­‰ï¼‰ï¼Œè¿™æ˜¯æ¶æ„è®¾è®¡å’Œé—®é¢˜æ’æŸ¥çš„æ ¸å¿ƒã€‚</p>
<h4 data-id="heading-26">ï¼ˆ2ï¼‰äº§å“ç»ç†ï¼šç”¨AIæ­å»º"éœ€æ±‚-æŠ€æœ¯"çš„æ¡¥æ¢</h4>
<ol>
<li><strong>éœ€æ±‚ä¼ é€’é˜¶æ®µï¼šä¼˜åŒ–éœ€æ±‚è¡¨è¾¾</strong>
<ul>
<li>å­¦ä¹ ï¼šæŠ€æœ¯åŒ–è¯­è¨€è½¬åŒ–ã€AIéœ€æ±‚æ‹†è§£å·¥å…·ï¼›</li>
<li>åœºæ™¯ï¼šæŠŠ"é¡µé¢æµç•…"è½¬æˆ"é¦–å±åŠ è½½â‰¤1.5s"ã€ç”¨AIè¯„ä¼°éœ€æ±‚å¯è¡Œæ€§ã€ç”Ÿæˆç®€æ˜“Demoè¾…åŠ©è¯„å®¡ï¼›</li>
<li>æŠ€å·§ï¼šPRDé‡ŒåŠ "AIä»£ç ç”Ÿæˆæç¤ºåŒº"ï¼Œæ˜ç¡®æŠ€æœ¯æ ˆã€äº¤äº’è¦æ±‚ã€ä¸ç°æœ‰ç³»ç»Ÿå…³è”ç‚¹ã€‚</li>
</ul>
</li>
<li><strong>ç ”å‘ååŒé˜¶æ®µï¼šæå‡æ²Ÿé€šæ•ˆç‡</strong>
<ul>
<li>å­¦ä¹ ï¼šä¸»æµæŠ€æœ¯åŸºç¡€ã€è·¨è§’è‰²æ²Ÿé€šæ–¹æ³•ï¼›</li>
<li>åœºæ™¯ï¼šç”¨AIæŠŠæŠ€æœ¯æ–¹æ¡ˆè½¬æˆäº§å“è§†è§’è¯´æ˜ã€åˆ†æéœ€æ±‚å˜æ›´å½±å“èŒƒå›´ã€è·Ÿè¸ªç ”å‘è¿›åº¦ï¼›</li>
<li>æŠ€å·§ï¼šç»„ç»‡"AIéœ€æ±‚å…±åˆ›ä¼š"ï¼Œå’Œç ”å‘ä¸€èµ·ç”¨AIç”Ÿæˆä»£ç æ¡†æ¶ï¼Œæå‰å¯¹é½éœ€æ±‚ã€‚</li>
</ul>
</li>
<li><strong>äº§å“åˆ›æ–°é˜¶æ®µï¼šæ¢ç´¢æ–°å¯èƒ½</strong>
<ul>
<li>å­¦ä¹ ï¼šå¤šæ¨¡æ€AIåº”ç”¨ã€ç”¨æˆ·éœ€æ±‚æŒ–æ˜å·¥å…·ï¼›</li>
<li>åœºæ™¯ï¼šå¿«é€Ÿåˆ¶ä½œåˆ›æ–°Demoï¼ˆå¦‚"AIç®€å†åˆ†æ"ï¼‰ã€ç”¨AIä»ç”¨æˆ·åé¦ˆæç‚¼åŠŸèƒ½ç‚¹ã€ä¼˜åŒ–äº§å“ä½“éªŒï¼›</li>
<li>æŠ€å·§ï¼šå»º"AIå¿«é€ŸåŸå‹åº“"ï¼ŒåŠ é€Ÿåˆ›æ–°æƒ³æ³•çš„éªŒè¯å’Œè¿­ä»£ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-27">ğŸŒ å››ã€è¡Œä¸šååŒï¼šå…±å»ºAIç¼–ç¨‹è‰¯æ€§ç”Ÿæ€</h3>
<p>AIç¼–ç¨‹çš„å¥åº·å‘å±•ï¼Œéœ€è¦æŠ€æœ¯å‚å•†ã€æ•™è‚²æœºæ„ã€è¡Œä¸šç»„ç»‡å…±åŒåŠªåŠ›â€”â€”ä»æŠ€æœ¯åˆ›æ–°ã€äººæ‰åŸ¹å…»åˆ°è§„èŒƒåˆ¶å®šï¼Œä¸€èµ·æ¨åŠ¨è¡Œä¸šå¯æŒç»­å‘å±•ã€‚</p>
<p>AIç¼–ç¨‹æ­£åœ¨æ”¹å˜è½¯ä»¶å¼€å‘çš„æ¸¸æˆè§„åˆ™ï¼Œæ— è®ºæ˜¯ä¼ä¸šè¿˜æ˜¯ä¸ªäººï¼Œçœ‹æ‡‚åŸç†ã€æ‰¾å¯¹è·¯å¾„ï¼Œæ‰èƒ½åœ¨è¿™åœºå˜é©ä¸­æŠ“ä½æœºé‡ã€‚ä½ åœ¨AIç¼–ç¨‹å®è·µä¸­é‡åˆ°è¿‡å“ªäº›é—®é¢˜ï¼Ÿæ¬¢è¿ç•™è¨€è®¨è®ºï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025åšå®¢æ¡†æ¶é€‰æ‹©æŒ‡å—ï¼šHugoã€Astroã€Hexoè¯¥é€‰å“ªä¸ªï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578714735307849754</link>    <guid>https://juejin.cn/post/7578714735307849754</guid>    <pubDate>2025-12-01T15:20:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714735307849754" data-draft-id="7577228831138545707" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025åšå®¢æ¡†æ¶é€‰æ‹©æŒ‡å—ï¼šHugoã€Astroã€Hexoè¯¥é€‰å“ªä¸ªï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,HTML"/> <meta itemprop="datePublished" content="2025-12-01T15:20:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025åšå®¢æ¡†æ¶é€‰æ‹©æŒ‡å—ï¼šHugoã€Astroã€Hexoè¯¥é€‰å“ªä¸ªï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T15:20:37.000Z" title="Mon Dec 01 2025 15:20:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06137ab43a85404491ef287f503bfb58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765207236&amp;x-signature=24baS6hJEeNG6CrHajqKTmFzDVE%3D" alt="Gemini_Generated_Image_c4yo85c4yo85c4yo.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>2025å¹´äº†ï¼Œæƒ³æ­ä¸ªåšå®¢ï¼Œåœ¨Hugoã€Hexoã€Astroä¹‹é—´çº ç»“äº†ä¸€å‘¨ï¼Œè¿˜æ˜¯ä¸çŸ¥é“é€‰å“ªä¸ªï¼Ÿ</p>
<p>æˆ‘å®Œå…¨ç†è§£è¿™ç§æ„Ÿå—ã€‚å»å¹´æˆ‘ä¹Ÿåœ¨è¿™å‡ ä¸ªåšå®¢æ¡†æ¶ä¹‹é—´æ¥å›æŠ˜è…¾,çœ‹äº†æ— æ•°å¯¹æ¯”æ–‡ç« ï¼Œæœ€åå‘ç°å¤§éƒ¨åˆ†éƒ½æ˜¯2022-2023å¹´çš„è¿‡æ—¶å†…å®¹ã€‚æ€§èƒ½æ•°æ®å˜äº†ã€æ¡†æ¶æ›´æ–°äº†ã€ç”Ÿæ€ä¹Ÿä¸ä¸€æ ·äº†ã€‚æ¯æ¬¡çœ‹å®Œä¸€ç¯‡æ–‡ç« å°±æ›´çº ç»“ï¼Œåˆ°åº•è¯¥å¬è°çš„ï¼Ÿ</p>
<p>æ›´è®©äººå´©æºƒçš„æ˜¯ï¼Œæ·±å¤œæŠ˜è…¾åšå®¢é…ç½®ï¼Œç¬¬äºŒå¤©è¿˜è¦ä¸Šç­ã€‚èŠ±äº†ä¸‰ä¸ªæœˆç ”ç©¶æ¡†æ¶ï¼Œç»“æœä¸€ç¯‡æ–‡ç« éƒ½æ²¡å†™å‡ºæ¥ã€‚è¿™ç§æ„Ÿè§‰ï¼Œç›¸ä¿¡ä½ ä¹Ÿç»å†è¿‡ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åŸºäº2024-2025å¹´æœ€æ–°æ•°æ®ï¼Œç”¨çœŸå®çš„æ„å»ºæ—¶é—´æµ‹è¯•ã€å®é™…çš„ä½¿ç”¨ä½“éªŒï¼Œå¸®ä½ åœ¨5åˆ†é’Ÿå†…åšå‡ºæœ€é€‚åˆçš„é€‰æ‹©ã€‚ä¸æ˜¯å‘Šè¯‰ä½ "å“ªä¸ªæœ€å¥½"ï¼Œè€Œæ˜¯"å“ªä¸ªæœ€é€‚åˆä½ "ã€‚</p>
<p>æˆ‘ä¼šç”¨9å¤§æ¡†æ¶çš„æœ€æ–°æ€§èƒ½å¯¹æ¯”ã€3åˆ†é’Ÿå†³ç­–çŸ©é˜µï¼Œå¸®ä½ é¿å…90%æ–°æ‰‹ä¼šè¸©çš„å‘ã€‚è¯´å®è¯ï¼Œæ—©ç‚¹çœ‹åˆ°è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘èƒ½çœå¥½å‡ å‘¨æ—¶é—´ã€‚</p>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆ2025å¹´è¿˜åœ¨èŠåšå®¢æ¡†æ¶ï¼Ÿ</h2>
<h3 data-id="heading-2">é™æ€åšå®¢çœŸçš„è¿˜æœ‰å¿…è¦å—ï¼Ÿ</h3>
<p>è€å®è®²ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿè§‰å¾—æ­åšå®¢æ˜¯ä¸ªè¿‡æ—¶çš„æƒ³æ³•ã€‚ä½†ç”¨äº†ä¸€å¹´å¤šï¼ŒçœŸé¦™ã€‚</p>
<p>é™æ€åšå®¢å’ŒWordPressè¿™ç±»åŠ¨æ€åšå®¢çš„æœ¬è´¨åŒºåˆ«ï¼Œå°±æ˜¯"æå‰åšå¥½"å’Œ"ç°åœºåˆ¶ä½œ"çš„åŒºåˆ«ã€‚é™æ€ç½‘ç«™ç”Ÿæˆå™¨ï¼ˆSSGï¼‰ä¼šåœ¨ä½ å†™å®Œæ–‡ç« åï¼Œå°±æŠŠæ‰€æœ‰é¡µé¢ç”Ÿæˆå¥½ï¼Œåƒåšæ‰¹é‡æ‰“å°ä¸€æ ·ã€‚è®¿å®¢æ¥äº†ç›´æ¥çœ‹æˆå“ï¼Œé€Ÿåº¦é£å¿«ã€‚WordPressè¿™ç±»åŠ¨æ€åšå®¢å‘¢ï¼Œæ¯æ¬¡æœ‰äººè®¿é—®å°±ç°åœºä»æ•°æ®åº“æ‹‰æ•°æ®ã€æ‹¼è£…é¡µé¢ï¼Œå°±åƒç°åœºæ‰‹å·¥åšèœã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆé™æ€åšå®¢æˆä¸ºä¸»æµè¶‹åŠ¿ï¼Ÿ</strong></p>
<p>è¯´ç™½äº†å°±æ˜¯ï¼šå¿«ã€ä¾¿å®œã€ä¸ç”¨æ“å¿ƒæœåŠ¡å™¨ã€‚</p>
<p>WordPresséœ€è¦ç§ŸæœåŠ¡å™¨ï¼Œä¸€ä¸ªæœˆæ€ä¹ˆä¹Ÿå¾—å‡ åå—é’±èµ·æ­¥ã€‚é™æ€åšå®¢å‘¢ï¼ŸGitHub Pagesã€Vercelã€Cloudflare Pageså…¨éƒ½å…è´¹æ‰˜ç®¡ã€‚æˆ‘ç°åœ¨åšå®¢ä¸€å¹´èŠ±è´¹0å…ƒï¼Œè¿åŸŸåéƒ½æ˜¯ä¹‹å‰ä¹°çš„ã€‚</p>
<p>æ€§èƒ½ä¸Šæ›´æ²¡å¾—æ¯”ã€‚é™æ€é¡µé¢çš„Lighthouseè¯„åˆ†èƒ½è½»æ¾æ‹¿åˆ°95+ï¼ŒWordPressæƒ³åˆ°90åˆ†éƒ½è´¹åŠ²ã€‚ç”¨æˆ·æ‰“å¼€é¡µé¢ï¼Œä¸€çœ¨çœ¼å°±åŠ è½½å®Œäº†ï¼Œè¿™ç§ä½“éªŒçœŸçš„ä¼šè®©äººçˆ±ä¸Šå†™åšå®¢ã€‚</p>
<h3 data-id="heading-3">é‚£ä»€ä¹ˆæ—¶å€™è¯¥é€‰åŠ¨æ€åšå®¢ï¼Ÿ</h3>
<p>ä¹Ÿä¸æ˜¯è¯´é™æ€åšå®¢å°±å¤©ä¸‹æ— æ•Œã€‚å¦‚æœä½ è¦åšå¤æ‚çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>
<p>å¤šäººåä½œå‘å¸ƒï¼ˆéœ€è¦åå°ç®¡ç†ï¼‰</p>
</li>
<li>
<p>ç”µå•†é›†æˆï¼ˆè¦å¤„ç†æ”¯ä»˜ã€è®¢å•ï¼‰</p>
</li>
<li>
<p>å¤æ‚çš„ç”¨æˆ·ç³»ç»Ÿï¼ˆè¯„è®ºã€æƒé™ç®¡ç†ï¼‰</p>
</li>
</ul>
<p>è¿™äº›åœºæ™¯ï¼ŒWordPressæˆ–è€…Ghostç¡®å®æ›´åˆé€‚ã€‚ä½†è€å®è¯´ï¼Œå¤§éƒ¨åˆ†ä¸ªäººåšå®¢å’ŒæŠ€æœ¯åšå®¢ï¼ŒçœŸç”¨ä¸åˆ°è¿™äº›ã€‚</p>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šä¸ªäººåšå®¢ã€æŠ€æœ¯æ–‡æ¡£ã€ä½œå“å±•ç¤ºï¼Œé€‰é™æ€åšå®¢æ¡†æ¶å‡†æ²¡é”™ã€‚éœ€è¦å¤æ‚åŠŸèƒ½ã€å¤šäººåä½œï¼Œæ‰è€ƒè™‘åŠ¨æ€åšå®¢ã€‚</p>
<h2 data-id="heading-4">æ€§èƒ½å¯¹å†³ - è°æ˜¯é€Ÿåº¦ä¹‹ç‹ï¼Ÿ</h2>
<p>æ€§èƒ½è¿™å—ï¼Œè¯´å®è¯æ˜¯æˆ‘æœ€å…³å¿ƒçš„ã€‚åˆšå¼€å§‹ç”¨Gatsbyçš„æ—¶å€™ï¼Œæ¯æ¬¡æ”¹ä¸€ç‚¹å†…å®¹ï¼Œé‡æ–°æ„å»ºç­‰åå‡ åˆ†é’Ÿï¼ŒçœŸçš„æƒ³ç ¸ç”µè„‘ã€‚</p>
<h3 data-id="heading-5">æ„å»ºé€Ÿåº¦ï¼šå·®è·å¤§åˆ°æƒŠäºº</h3>
<p>å…ˆè¯´ç»“è®ºï¼š<strong>Hugoæ˜¯é€Ÿåº¦ä¹‹ç‹ï¼Œæ²¡æœ‰ä¹‹ä¸€</strong>ã€‚</p>
<p>çœ‹çœ‹è¿™ç»„2024å¹´çš„å®æµ‹æ•°æ®ï¼š</p>
<p>| æ¡†æ¶ | æ„å»º10000é¡µç”¨æ—¶ | å¹³å‡æ¯é¡µé€Ÿåº¦ |</p>
<p>|------|----------------|-------------|</p>
<p>| <strong>Hugo</strong> | 2.95ç§’ | &lt;1ms |</p>
<p>| <strong>Hexo</strong> | 45ç§’ï¼ˆ1000é¡µï¼‰ | ~45ms |</p>
<p>| <strong>Jekyll</strong> | 187.15ç§’ | ~18ms |</p>
<p>| <strong>Gatsby</strong> | 30åˆ†é’Ÿ+ | ~180ms |</p>
<p>ç¬¬ä¸€æ¬¡çœ‹åˆ°Hugoçš„æ„å»ºé€Ÿåº¦ï¼ŒçœŸçš„æƒŠåˆ°æˆ‘äº†ã€‚10000ç¯‡æ–‡ç« ï¼Œä¸åˆ°3ç§’ï¼è¿™æ„å‘³ç€å•¥ï¼Ÿä½ æ”¹ä¸ªæ ‡é¢˜ã€ä¿®ä¸ªé”™åˆ«å­—ï¼ŒæŒ‰ä¸ªä¿å­˜ï¼Œé¡µé¢åˆ·æ–°ï¼Œåšå®¢å°±æ›´æ–°å®Œäº†ã€‚è¿™ç§å³æ—¶åé¦ˆï¼Œçˆ½åˆ°é£èµ·ã€‚</p>
<p>Hexoå‘¢ï¼Œä¸­å‹åšå®¢ï¼ˆ100-1000æ–‡ç« ï¼‰è¡¨ç°ä¹ŸæŒºä¸é”™ã€‚æˆ‘ä¹‹å‰300ç¯‡æ–‡ç« çš„åšå®¢ï¼Œ15ç§’å°±æ„å»ºå®Œæˆï¼Œå®Œå…¨å¤Ÿç”¨ã€‚</p>
<p>Gatsby...å—¯ï¼Œåˆ«æäº†ã€‚æˆ‘ç”¨å®ƒåšè¿‡ä¸€ä¸ªé¡¹ç›®ï¼Œ200å¤šç¯‡æ–‡ç« ï¼Œæ¯æ¬¡æ„å»º5åˆ†é’Ÿèµ·æ­¥ã€‚åæ¥æ–‡ç« å¤šäº†ï¼Œç›´æ¥æ”¾å¼ƒäº†ã€‚</p>
<h3 data-id="heading-6">é¡µé¢åŠ è½½é€Ÿåº¦ï¼šAstroå¼‚å†›çªèµ·</h3>
<p>2024å¹´Astroæˆäº†æœ€å¤§é»‘é©¬ã€‚æ ¹æ®HTTP Archiveçš„æ•°æ®ï¼š</p>
<ul>
<li>
<p><strong>Astro</strong>ï¼šä¸­ä½ä¼ è¾“å¤§å°889KBï¼ˆæœ€è½»ï¼‰</p>
</li>
<li>
<p><strong>Hugo</strong>ï¼š1,174KBï¼ˆå¹³è¡¡ä¸é”™ï¼‰</p>
</li>
<li>
<p><strong>Next.js</strong>ï¼š1,659KBï¼ˆåŠŸèƒ½å¤šï¼Œä½“ç§¯å¤§ï¼‰</p>
</li>
</ul>
<p>Astroçš„"é›¶JavaScripté»˜è®¤"ç­–ç•¥çœŸçš„å‰å®³ã€‚é¡µé¢åªåŠ è½½å¿…è¦çš„JSï¼Œä¸åƒå…¶ä»–æ¡†æ¶ï¼ŒæŠŠæ•´ä¸ªReact/Vueåº“éƒ½å¡ç»™ç”¨æˆ·ã€‚ç»“æœå°±æ˜¯ï¼Œé¡µé¢æ‰“å¼€é€Ÿåº¦é£å¿«ï¼Œç”¨æˆ·ä½“éªŒç‰¹åˆ«å¥½ã€‚</p>
<h3 data-id="heading-7">å®é™…é¡¹ç›®è¡¨ç°ï¼šåˆ«åªçœ‹æ•°å­—</h3>
<p>è€å®è®²ï¼Œå¦‚æœä½ åšå®¢ä¸åˆ°100ç¯‡æ–‡ç« ï¼Œé€‰å•¥æ¡†æ¶éƒ½å·®ä¸å¤šã€‚å‡ ç§’å’Œåå‡ ç§’çš„åŒºåˆ«ï¼Œä½ æ„Ÿå—ä¸å‡ºæ¥ã€‚</p>
<p>ä½†å¦‚æœä½ è®¡åˆ’é•¿æœŸå†™ä½œï¼Œæ–‡ç« ä¼šè¶Šæ¥è¶Šå¤šï¼Œ<strong>æå‰é€‰ä¸ªæ€§èƒ½å¥½çš„æ¡†æ¶ï¼Œèƒ½çœå¾ˆå¤šéº»çƒ¦</strong>ã€‚æˆ‘è§è¿‡å¤ªå¤šäººï¼Œå¼€å§‹ç”¨äº†Gatsbyï¼Œå†™åˆ°500ç¯‡æ–‡ç« ï¼Œæ„å»ºæ…¢åˆ°å—ä¸äº†ï¼Œè¿ç§»æ¡†æ¶ï¼Œé‚£ä¸ªç—›è‹¦...</p>
<p><strong>æ¨èç»„åˆ</strong>ï¼š</p>
<ul>
<li>
<p><strong>å°å‹åšå®¢ï¼ˆ&lt;100æ–‡ç« ï¼‰</strong>ï¼šéšä¾¿é€‰ï¼Œéƒ½å¤Ÿç”¨</p>
</li>
<li>
<p><strong>ä¸­å‹åšå®¢ï¼ˆ100-1000æ–‡ç« ï¼‰</strong>ï¼šHugoã€Hexoã€Astro</p>
</li>
<li>
<p><strong>å¤§å‹ç«™ç‚¹ï¼ˆ1000+æ–‡ç« ï¼‰</strong>ï¼šé—­çœ¼é€‰Hugo</p>
</li>
</ul>
<h2 data-id="heading-8">å¼€å‘ä½“éªŒ - å“ªä¸ªæœ€å¥½ç”¨ï¼Ÿ</h2>
<p>æ€§èƒ½å†å¥½ï¼Œç”¨èµ·æ¥ç³Ÿå¿ƒï¼Œä¹Ÿæ˜¯ç™½æ­ã€‚</p>
<h3 data-id="heading-9">å­¦ä¹ æ›²çº¿ï¼šæ–°æ‰‹åˆ«è¸©å‘</h3>
<p>è¯´å®è¯ï¼ŒHugoçš„Goæ¨¡æ¿è¯­æ³•ï¼Œæˆ‘å½“åˆå­¦äº†å¥½ä¹…æ‰ä¸Šæ‰‹ã€‚é‚£äº›<code>{{ range }}</code>ã€<code>{{ with }}</code>çš„è¯­æ³•ï¼Œåˆšå¼€å§‹çœŸçš„çœ‹æ‡µäº†ã€‚è™½ç„¶æ€§èƒ½æ— æ•Œï¼Œä½†æ–°æ‰‹ä¸Šæ¥å°±é€‰Hugoï¼Œå¯èƒ½ä¼šè¢«åŠé€€ã€‚</p>
<p><strong>æ–°æ‰‹å‹å¥½åº¦æ’å</strong>ï¼š</p>
<ol>
<li>
<p><strong>Hexo</strong>ï¼ˆæœ€å‹å¥½ï¼‰ï¼šNode.jsç”Ÿæ€ï¼Œä¸­æ–‡æ–‡æ¡£å¤šåˆ°çœ‹ä¸è¿‡æ¥ã€‚é…ç½®å°±æ˜¯ä¸€ä¸ª<code>_config.yml</code>æ–‡ä»¶ï¼Œæ”¹å‡ ä¸ªå‚æ•°å°±èƒ½è·‘èµ·æ¥ã€‚æˆ‘å½“æ—¶åŠå°æ—¶å°±æ­å¥½äº†ç¬¬ä¸€ä¸ªåšå®¢ã€‚</p>
</li>
<li>
<p><strong>Jekyll</strong>ï¼ˆå‹å¥½ï¼‰ï¼šRubyç”Ÿæ€ï¼Œå®˜æ–¹æ–‡æ¡£å†™å¾—ç‰¹åˆ«æ¸…æ¥šï¼ŒæŒ‰ç€æ­¥éª¤æ¥ä¸ä¼šé”™ã€‚GitHub PagesåŸç”Ÿæ”¯æŒï¼Œpushä¸€ä¸‹å°±è‡ªåŠ¨éƒ¨ç½²ã€‚</p>
</li>
<li>
<p><strong>VuePress</strong>ï¼ˆéœ€è¦å‰ç«¯åŸºç¡€ï¼‰ï¼šå¦‚æœä½ ä¼šVueï¼Œä¸Šæ‰‹å¾ˆå¿«ã€‚ä¸ä¼šçš„è¯ï¼Œè¿˜å¾—å…ˆå­¦Vueï¼Œæˆæœ¬å°±é«˜äº†ã€‚</p>
</li>
<li>
<p><strong>Gatsby/Next.js</strong>ï¼ˆé™¡å³­ï¼‰ï¼šè¦æ‡‚Reactã€GraphQLï¼Œé…ç½®å¤æ‚ã€‚æˆ‘çœ‹åˆ°é…ç½®æ–‡ä»¶å°±å¤´å¤§ã€‚</p>
</li>
</ol>
<p><strong>æˆ‘çš„å»ºè®®</strong>ï¼šå¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯Node.jså¼€å‘è€…ï¼ŒHexoçœŸçš„æ˜¯é¡ºæ‰‹ã€‚è£…ä¸ªnpmåŒ…ï¼Œæ”¹æ”¹é…ç½®ï¼ŒåŠå°æ—¶æå®šã€‚å‰ç«¯æŠ€æœ¯æ ˆæ˜¯Reactï¼Ÿé‚£Astroæˆ–Next.jsæ›´åˆé€‚ã€‚åˆ«çº ç»“äº†ï¼Œæ–°æ‰‹å°±é€‰Hexoï¼Œé”™ä¸äº†ã€‚</p>
<h3 data-id="heading-10">é…ç½®å’Œè‡ªå®šåˆ¶ï¼šå¹³è¡¡è‰ºæœ¯</h3>
<p>Hexoå’ŒJekyllçš„é…ç½®ç®€å•ç›´æ¥ï¼Œä¸€ä¸ªYAMLæ–‡ä»¶æå®šã€‚ä½†ä¹Ÿæœ‰ç¼ºç‚¹ï¼šæƒ³åšå¤æ‚å®šåˆ¶ï¼Œå°±å¾—æ·±å…¥æºç æ”¹ï¼Œä¸å¤ªçµæ´»ã€‚</p>
<p>Gatsbyçš„çµæ´»æ€§ç¡®å®å¼ºï¼ŒGraphQLæ•°æ®å±‚å¯ä»¥æ¥å„ç§æ•°æ®æºã€‚ä½†å¦ç™½è¯´ï¼Œä¸ªäººåšå®¢çœŸç”¨ä¸åˆ°é‚£ä¹ˆå¤æ‚çš„åŠŸèƒ½ã€‚å°±åƒä¹°äº†è¾†è·‘è½¦åœ¨å¸‚åŒºå¼€ï¼Œæ€§èƒ½è¿‡å‰©äº†ã€‚</p>
<p>Astroèµ°äº†ä¸ªä¸­é—´è·¯çº¿ï¼Œæ—¢çµæ´»åˆä¸å¤æ‚ã€‚æ”¯æŒå¤šæ¡†æ¶ï¼ˆReactã€Vueã€Svelteéšä¾¿æ··ï¼‰ï¼Œä½†é…ç½®æ²¡é‚£ä¹ˆå“äººã€‚è¿™ç§å¹³è¡¡æ„Ÿï¼Œæˆ‘æŒºå–œæ¬¢çš„ã€‚</p>
<h3 data-id="heading-11">å¼€å‘å·¥å…·å’Œè°ƒè¯•</h3>
<p>ç°ä»£æ¡†æ¶åœ¨å¼€å‘ä½“éªŒä¸ŠçœŸçš„åŠæ‰“è€æ¡†æ¶ã€‚</p>
<p>Viteé©±åŠ¨çš„Astroå’ŒVuePressï¼Œçƒ­é‡è½½å¿«åˆ°é£èµ·ã€‚æ”¹ä¸ªå†…å®¹ï¼Œä¸åˆ°1ç§’é¡µé¢å°±æ›´æ–°äº†ã€‚Webpacké‚£å¥—è€æ¶æ„ï¼Œç­‰å¾…æ—¶é—´èƒ½è®©äººå‘å‘†ã€‚</p>
<p>Hugoè™½ç„¶æ˜¯ä¼ ç»Ÿæ¡†æ¶ï¼Œä½†é€Ÿåº¦å¿«ï¼Œæ”¹å®Œåˆ·æ–°ä¹Ÿå¾ˆå³æ—¶ã€‚è¿™ç‚¹ä½“éªŒè¿˜ä¸é”™ã€‚</p>
<h2 data-id="heading-12">ç”Ÿæ€ç³»ç»Ÿ - ä¸»é¢˜ä¸æ’ä»¶è°æ›´ä¸°å¯Œï¼Ÿ</h2>
<p>æ¡†æ¶å†å¥½ï¼Œæ²¡ä¸»é¢˜ä¹Ÿç™½æ­ã€‚è°æƒ³ä»é›¶å¼€å§‹å†™CSSå•Šã€‚</p>
<h3 data-id="heading-13">ä¸»é¢˜ç”Ÿæ€ï¼šHexoä¸­æ–‡ä¸–ç•Œç§°ç‹</h3>
<p><strong>Hexo</strong>çœŸçš„æ˜¯ä¸­æ–‡åšå®¢çš„å¤©é€‰ä¹‹å­ã€‚200+ä¸­æ–‡ä¸»é¢˜ï¼Œé£æ ¼å„å¼‚ï¼Œæ€»æœ‰ä¸€æ¬¾é€‚åˆä½ ã€‚æˆ‘ç”¨çš„é‚£ä¸ªä¸»é¢˜ï¼Œä¸­æ–‡æ–‡æ¡£è¯¦ç»†åˆ°è¿æ€ä¹ˆæ”¹å­—ä½“é¢œè‰²éƒ½å†™å¾—æ¸…æ¸…æ¥šæ¥šã€‚</p>
<p>Hugoä¸»é¢˜è™½ç„¶æœ‰300+ï¼Œä½†è´¨é‡å‚å·®ä¸é½ã€‚æœ‰äº›ç‰¹åˆ«ç²¾ç¾ï¼Œæœ‰äº›å°±æ˜¯demoçº§åˆ«ã€‚å¾ˆå¤šä¸»é¢˜æ–‡æ¡£æ˜¯è‹±æ–‡çš„ï¼Œè¸©å‘å…¨é è‡ªå·±æ‘¸ç´¢ã€‚</p>
<p>Jekyllä½œä¸ºè€ç‰Œæ¡†æ¶ï¼Œä¸»é¢˜æ•°é‡æœ€å¤šï¼Œä½†å¾ˆå¤šéƒ½æ˜¯å¥½å‡ å¹´å‰çš„è®¾è®¡é£æ ¼äº†ï¼Œçœ‹ç€æœ‰ç‚¹è¿‡æ—¶ã€‚</p>
<p>Gatsbyå’ŒAstroçš„ä¸»é¢˜ï¼Œèµ°çš„æ˜¯ç°ä»£åŒ–è·¯çº¿ï¼Œè®¾è®¡æ„Ÿå¾ˆå¼ºã€‚å¦‚æœä½ è¿½æ±‚è§†è§‰æ•ˆæœï¼Œè¿™ä¸¤ä¸ªä¸é”™ã€‚</p>
<h3 data-id="heading-14">æ’ä»¶å’Œæ‰©å±•èƒ½åŠ›</h3>
<p>Jekyllçš„æ’ä»¶ç”Ÿæ€æœ€åºå¤§ï¼Œæ¯•ç«Ÿå†å²æœ€ä¹…ã€‚æƒ³è¦å•¥åŠŸèƒ½ï¼ŒåŸºæœ¬éƒ½èƒ½æ‰¾åˆ°æ’ä»¶ã€‚</p>
<p>Gatsbyä¾æ‰˜npmç”Ÿæ€ï¼Œæ’ä»¶ä¹Ÿè¶…çº§ä¸°å¯Œã€‚ä½†å¾ˆå¤šæ’ä»¶å…¶å®æ˜¯ä¸ºå•†ä¸šé¡¹ç›®è®¾è®¡çš„ï¼Œä¸ªäººåšå®¢å¯èƒ½ç”¨ä¸ä¸Šã€‚</p>
<p>Hexoæ’ä»¶ç”Ÿæ€åœ¨Node.jsåœˆå¾ˆæˆç†Ÿï¼Œå¸¸ç”¨çš„è¯„è®ºã€æœç´¢ã€SEOä¼˜åŒ–ï¼Œéƒ½æœ‰ç°æˆæ’ä»¶ã€‚æˆ‘è£…äº†ä¸ƒå…«ä¸ªæ’ä»¶ï¼Œæ²¡é‡åˆ°è¿‡å…¼å®¹é—®é¢˜ã€‚</p>
<h3 data-id="heading-15">ç¤¾åŒºæ´»è·ƒåº¦ï¼šçœ‹æ•°æ®è¯´è¯</h3>
<p>2024-2025å¹´çš„æ•°æ®æŒºæœ‰æ„æ€ï¼š</p>
<ul>
<li>
<p><strong>Astro</strong>ï¼šå¢é•¿æœ€å¿«ï¼Œnpmä¸‹è½½é‡2024å¹´9æœˆè¾¾åˆ°300ä¸‡ã€‚Netlifyè°ƒæŸ¥æ˜¾ç¤ºï¼Œå®ƒæ˜¯2024å¹´å¼€å‘è€…å…³æ³¨åº¦æœ€é«˜çš„æ¡†æ¶ã€‚</p>
</li>
<li>
<p><strong>Hugo</strong>ï¼šGitHubæ˜Ÿæ ‡6ä¸‡+ï¼Œç¨³å®šå¢é•¿ï¼Œè€ç‰Œå¼ºè€…ã€‚</p>
</li>
<li>
<p><strong>Hexo</strong>ï¼šä¸­æ–‡ç¤¾åŒºæœ€æ´»è·ƒï¼ŒçŸ¥ä¹ã€æ˜é‡‘ã€CSDNåˆ°å¤„éƒ½æ˜¯æ•™ç¨‹ã€‚</p>
</li>
</ul>
<p>è¯´å®è¯ï¼Œç¤¾åŒºæ´»è·ƒåº¦å¯¹æ–°æ‰‹å¾ˆé‡è¦ã€‚é‡åˆ°é—®é¢˜ï¼Œèƒ½æœåˆ°ä¸­æ–‡è§£å†³æ–¹æ¡ˆï¼Œçœå¤ªå¤šæ—¶é—´äº†ã€‚</p>
<h2 data-id="heading-16">éƒ¨ç½²ä¸SEO - ä¸Šçº¿æ‰æ˜¯ç‹é“</h2>
<p>åšå®¢æ­å¥½äº†ï¼Œä¸ä¸Šçº¿æœ‰å•¥ç”¨ï¼Ÿ</p>
<h3 data-id="heading-17">éƒ¨ç½²å¹³å°ï¼šå…¨éƒ½å…è´¹çœŸé¦™</h3>
<p>ç°åœ¨éƒ¨ç½²é™æ€åšå®¢ï¼ŒçœŸçš„å¤ªç®€å•äº†ã€‚</p>
<p><strong>GitHub Pages</strong>ï¼šJekyllåŸç”Ÿæ”¯æŒï¼Œpushä»£ç å°±è‡ªåŠ¨éƒ¨ç½²ã€‚å…¶ä»–æ¡†æ¶éœ€è¦é…ä¸ªGitHub Actionsï¼Œä¹Ÿå°±å¤šå†™å‡ è¡Œé…ç½®ï¼Œ5åˆ†é’Ÿæå®šã€‚</p>
<p><strong>Vercel/Netlify</strong>ï¼šè¿™ä¿©æ˜¯æˆ‘æœ€æ¨èçš„ã€‚æ‹–ä¸ªä»“åº“è¿›å»ï¼Œè‡ªåŠ¨è¯†åˆ«æ¡†æ¶ï¼Œè‡ªåŠ¨æ„å»ºéƒ¨ç½²ã€‚éƒ½æœ‰å…è´¹é¢åº¦ï¼Œä¸ªäººåšå®¢å®Œå…¨å¤Ÿç”¨ã€‚æˆ‘ç°åœ¨ç”¨çš„Vercelï¼Œä¸€å¹´æ²¡èŠ±è¿‡ä¸€åˆ†é’±ã€‚</p>
<p><strong>Cloudflare Pages</strong>ï¼šæ€§èƒ½ç‰¹åˆ«å¥½ï¼ŒCDNå…¨çƒåˆ†å¸ƒã€‚å…è´¹é¢åº¦ä¹Ÿå¾ˆå¤§ï¼Œé€Ÿåº¦æ¯”GitHub Pageså¿«ä¸å°‘ã€‚</p>
<p>è€å®è®²ï¼Œ2025å¹´éƒ¨ç½²é™æ€åšå®¢ï¼Œå·²ç»æ²¡æœ‰æŠ€æœ¯é—¨æ§›äº†ã€‚çœŸçš„ï¼Œæ¯”ä½ æƒ³è±¡çš„ç®€å•ã€‚</p>
<h3 data-id="heading-18">SEOï¼šé™æ€åšå®¢å¤©ç”Ÿä¼˜åŠ¿</h3>
<p>æ‰€æœ‰é™æ€åšå®¢æ¡†æ¶ï¼ŒSEOéƒ½å‹å¥½ã€‚ä¸ºå•¥ï¼Ÿç”Ÿæˆçš„éƒ½æ˜¯çº¯HTMLï¼Œæœç´¢å¼•æ“æœ€çˆ±è¿™ä¸ªã€‚</p>
<p>åŒºåˆ«åœ¨äºç»†èŠ‚ï¼š</p>
<ul>
<li>
<p><strong>Hugoå’ŒJekyll</strong>ï¼šæˆç†Ÿç¨³å®šï¼Œsitemapã€RSSè‡ªåŠ¨ç”Ÿæˆï¼ŒSEOåŸºç¡€åŠŸèƒ½é½å…¨ã€‚</p>
</li>
<li>
<p><strong>Astroå’ŒNext.js</strong>ï¼šåœ¨ç°ä»£SEOå®è·µä¸Šæ›´é¢†å…ˆï¼Œæ”¯æŒæ›´ç»†è‡´çš„å…ƒæ•°æ®ç®¡ç†ï¼Œç»“æ„åŒ–æ•°æ®ä¹Ÿæ›´æ–¹ä¾¿ã€‚</p>
</li>
<li>
<p><strong>Hexo</strong>ï¼šé€šè¿‡æ’ä»¶å®ç°SEOåŠŸèƒ½ï¼Œä¹ŸæŒºå®Œå–„ï¼Œä¸­æ–‡SEOæ•™ç¨‹å¤šã€‚</p>
</li>
</ul>
<p>è¯´ç™½äº†ï¼Œåªè¦ä½ å†™å¥½å†…å®¹ã€ä¼˜åŒ–å¥½å…³é”®è¯ã€é¡µé¢ç»“æ„åˆç†ï¼Œç”¨å“ªä¸ªæ¡†æ¶SEOéƒ½ä¸ä¼šå·®ã€‚åˆ«å¤ªçº ç»“è¿™ä¸ªã€‚</p>
<h3 data-id="heading-19">é•¿æœŸç»´æŠ¤æˆæœ¬ï¼šåˆ«é€‰å†·é—¨æ¡†æ¶</h3>
<p>è¿™ä¸ªå‘æˆ‘è¸©è¿‡ã€‚ä¹‹å‰ç”¨è¿‡ä¸€ä¸ªå°ä¼—æ¡†æ¶ï¼Œå¼€å§‹æŒºå¥½ï¼ŒåŠå¹´åå‘ç°ä½œè€…ä¸æ›´æ–°äº†ã€‚åæ¥ä¾èµ–åº“å‡çº§ï¼Œåšå®¢ç›´æ¥è·‘ä¸èµ·æ¥ï¼Œè¿ç§»æ¡†æ¶èŠ±äº†æ•´æ•´ä¸€å‘¨ã€‚</p>
<p><strong>ä½ç»´æŠ¤æ¡†æ¶</strong>ï¼šHugoã€Jekyllã€‚æˆç†Ÿç¨³å®šï¼ŒåŸºæœ¬ä¸ä¼šå‡ºå¹ºè›¾å­ã€‚æˆ‘Hugoåšå®¢è·‘äº†ä¸€å¹´å¤šï¼Œä¸€æ¬¡é—®é¢˜éƒ½æ²¡é‡åˆ°ã€‚</p>
<p><strong>éœ€è¦å…³æ³¨æ›´æ–°</strong>ï¼šGatsbyã€Next.jsã€‚ä¾èµ–å¤šï¼Œæ›´æ–°é¢‘ç¹ï¼Œå¶å°”ä¼šé‡åˆ°breaking changesã€‚å¦‚æœä½ ä¸æƒ³ç»å¸¸æŠ˜è…¾ï¼Œæ…é€‰ã€‚</p>
<p><strong>å¹³è¡¡é€‰æ‰‹</strong>ï¼šAstroã€Hexoã€‚æ›´æ–°æœ‰èŠ‚åˆ¶ï¼Œå…¼å®¹æ€§åšå¾—ä¸é”™ã€‚</p>
<h2 data-id="heading-20">å†³ç­–æ¡†æ¶ - å¦‚ä½•é€‰æ‹©æœ€é€‚åˆä½ çš„ï¼Ÿ</h2>
<p>å¥½äº†ï¼Œå‰é¢è¯´äº†è¿™ä¹ˆå¤šæ•°æ®å’Œå¯¹æ¯”ï¼Œåˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿ</p>
<h3 data-id="heading-21">3åˆ†é’Ÿå¿«é€Ÿå†³ç­–çŸ©é˜µ</h3>
<p>åˆ«æƒ³å¤ªå¤šï¼Œå›ç­”ä¸‰ä¸ªé—®é¢˜ï¼š</p>
<p><strong>é—®é¢˜1ï¼šä½ çš„æŠ€æœ¯æ ˆæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>ç†Ÿæ‚‰Node.js</strong> â†’ Hexoï¼ˆæ–°æ‰‹ï¼‰/ Astroï¼ˆè¿½æ±‚ç°ä»£åŒ–ï¼‰</p>
</li>
<li>
<p><strong>Reactå¼€å‘è€…</strong> â†’ Gatsbyï¼ˆé‡å‹ï¼‰/ Astroï¼ˆè½»é‡ï¼‰/ Next.jsï¼ˆå…¨æ ˆï¼‰</p>
</li>
<li>
<p><strong>Vueå¼€å‘è€…</strong> â†’ VuePressï¼ˆåšå®¢+æ–‡æ¡£ï¼‰/ Gridsome</p>
</li>
<li>
<p><strong>æŠ€æœ¯æ ˆä¸é™</strong> â†’ Hugoï¼ˆæ€§èƒ½ç¬¬ä¸€ï¼‰/ Jekyllï¼ˆæ±‚ç¨³ï¼‰</p>
</li>
</ul>
<p>å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯Node.jså¼€å‘è€…ï¼ŒHexoçœŸçš„é¡ºæ‰‹ã€‚è£…ä¸ªnpmåŒ…ï¼Œæ”¹æ”¹é…ç½®ï¼ŒåŠå°æ—¶æå®šã€‚</p>
<p><strong>é—®é¢˜2ï¼šä½ çš„é¡¹ç›®è§„æ¨¡æ˜¯å¤šå¤§ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>&lt;100æ–‡ç« </strong> â†’ éšä¾¿é€‰ï¼Œæ€§èƒ½å·®å¼‚ä½ æ„Ÿå—ä¸å‡ºæ¥</p>
</li>
<li>
<p><strong>100-1000æ–‡ç« </strong> â†’ Hugoï¼ˆå¿«ï¼‰/ Hexoï¼ˆå¤Ÿç”¨ï¼‰/ Astroï¼ˆç°ä»£ï¼‰</p>
</li>
<li>
<p><strong>1000+æ–‡ç« æˆ–å¤§å‹æ–‡æ¡£ç«™</strong> â†’ Hugoï¼ˆä¸€éª‘ç»å°˜ï¼Œæ²¡å¾—æ¯”ï¼‰</p>
</li>
</ul>
<p>æˆ‘ç°åœ¨500å¤šç¯‡æ–‡ç« ï¼Œç”¨çš„Hexoï¼Œ45ç§’æ„å»ºå®Œæˆï¼Œå®Œå…¨å¤Ÿç”¨ã€‚å¦‚æœæ–‡ç« ç»§ç»­å¢é•¿åˆ°1000+ï¼Œå¯èƒ½ä¼šæ¢Hugoã€‚</p>
<p><strong>é—®é¢˜3ï¼šä½ çš„ç»éªŒæ°´å¹³å¦‚ä½•ï¼Ÿ</strong></p>
<ul>
<li>
<p><strong>æ–°æ‰‹</strong> â†’ Hexoï¼ˆä¸­æ–‡èµ„æºå¤šï¼‰/ Jekyllï¼ˆæ–‡æ¡£å‹å¥½ï¼‰</p>
</li>
<li>
<p><strong>å‰ç«¯å¼€å‘è€…</strong> â†’ Astroï¼ˆç°ä»£åŒ–ä½“éªŒï¼‰/ VuePressï¼ˆVueæŠ€æœ¯æ ˆï¼‰</p>
</li>
<li>
<p><strong>æ€§èƒ½æå®¢</strong> â†’ Hugoï¼ˆé€Ÿåº¦æ— æ•Œï¼Œå€¼å¾—å­¦Goæ¨¡æ¿ï¼‰</p>
</li>
<li>
<p><strong>æ±‚ç¨³ç”¨æˆ·</strong> â†’ Jekyllï¼ˆGitHubåŸç”Ÿæ”¯æŒï¼Œæœ€çœå¿ƒï¼‰</p>
</li>
</ul>
<h3 data-id="heading-22">å…¸å‹åœºæ™¯å…·ä½“æ¨è</h3>
<p><strong>ä¸ªäººæŠ€æœ¯åšå®¢</strong>ï¼š</p>
<ul>
<li>
<p>ä¸­æ–‡ç”¨æˆ·ï¼šHexoï¼ˆç”Ÿæ€å¼ºï¼Œä¸»é¢˜å¤šï¼‰</p>
</li>
<li>
<p>å›½é™…åŒ–ï¼šHugoï¼ˆæ€§èƒ½å¥½ï¼Œè‹±æ–‡èµ„æºä¸°å¯Œï¼‰</p>
</li>
<li>
<p>è¿½æ±‚ç°ä»£åŒ–ï¼šAstroï¼ˆä½“éªŒå¥½ï¼Œæ€§èƒ½ä¹Ÿä¸é”™ï¼‰</p>
</li>
</ul>
<p><strong>æŠ€æœ¯æ–‡æ¡£ç«™ç‚¹</strong>ï¼š</p>
<ul>
<li>
<p>Docusaurusï¼ˆFacebookå‡ºå“ï¼Œä¸“ä¸ºæ–‡æ¡£è®¾è®¡ï¼‰</p>
</li>
<li>
<p>VuePressï¼ˆVueç”Ÿæ€ï¼Œä¸­æ–‡æ”¯æŒå¥½ï¼‰</p>
</li>
</ul>
<p><strong>å¤§å‹å†…å®¹ç«™ç‚¹</strong>ï¼š</p>
<ul>
<li>Hugoï¼ˆ1000+é¡µé¢ï¼Œåªæœ‰å®ƒèƒ½æ‰›ä½ï¼‰</li>
</ul>
<p><strong>ç°ä»£åŒ–é¡¹ç›®ç½‘ç«™</strong>ï¼š</p>
<ul>
<li>
<p>Astroï¼ˆçµæ´»æ€§+æ€§èƒ½çš„æœ€ä½³å¹³è¡¡ï¼‰</p>
</li>
<li>
<p>Next.jsï¼ˆéœ€è¦åŠ¨æ€åŠŸèƒ½æ—¶é€‰å®ƒï¼‰</p>
</li>
</ul>
<h3 data-id="heading-23">æˆ‘çš„çœŸå®å»ºè®®</h3>
<p>è¯´å®è¯ï¼Œ<strong>åˆ«å†çº ç»“äº†</strong>ã€‚æˆ‘è§è¿‡å¤ªå¤šäººèŠ±ä¸‰ä¸ªæœˆç ”ç©¶æ¡†æ¶ï¼Œä¸€ç¯‡æ–‡ç« æ²¡å†™ã€‚æ¡†æ¶çœŸçš„åªæ˜¯å·¥å…·ï¼Œå†…å®¹æ‰æ˜¯æ ¸å¿ƒã€‚</p>
<p><strong>é€‰æ‹©å»ºè®®</strong>ï¼š</p>
<ul>
<li>
<p><strong>90%çš„äºº</strong>ï¼šé€‰Hexoæˆ–Hugoï¼Œå¤Ÿç”¨äº†</p>
</li>
<li>
<p><strong>å‰ç«¯å¼€å‘è€…</strong>ï¼šAstroå€¼å¾—å°è¯•ï¼Œä½“éªŒå¾ˆç°ä»£</p>
</li>
<li>
<p><strong>æ–°æ‰‹æ€•é€‰é”™</strong>ï¼šHexoï¼Œä¸­æ–‡æ•™ç¨‹å¤šåˆ°çœ‹ä¸å®Œï¼Œé‡åˆ°é—®é¢˜éƒ½èƒ½æœåˆ°ç­”æ¡ˆ</p>
</li>
<li>
<p><strong>æ€§èƒ½ç„¦è™‘ç—‡æ‚£è€…</strong>ï¼šé—­çœ¼é€‰Hugoï¼Œé€Ÿåº¦çœŸçš„æ— æ•Œ</p>
</li>
</ul>
<p>è®°ä½ï¼šæ¡†æ¶å¯ä»¥è¿ç§»ï¼ˆå†…å®¹éƒ½æ˜¯Markdownï¼Œæ¬å®¶æˆæœ¬ä¸é«˜ï¼‰ï¼Œä½†è’åºŸçš„æ—¶é—´å›ä¸æ¥ã€‚å…ˆé€‰ä¸€ä¸ªåŠ¨èµ·æ¥ï¼Œè¾¹ç”¨è¾¹ä¼˜åŒ–ï¼Œè¿™æ‰æ˜¯æ­£é“ã€‚</p>
<h2 data-id="heading-24">é¿å‘æŒ‡å—ä¸æœ€ä½³å®è·µ</h2>
<p>æœ€åè¯´è¯´é‚£äº›å¤§å‘ï¼Œæˆ‘æ›¿ä½ è¸©è¿‡äº†ã€‚</p>
<h3 data-id="heading-25">5ä¸ªå¸¸è§é”™è¯¯</h3>
<p><strong>é”™è¯¯1ï¼šè¿‡åº¦è¿½æ±‚å®Œç¾æ¡†æ¶ï¼Œè¿Ÿè¿Ÿä¸å¼€å§‹</strong></p>
<p>è¿™ä¸ªå‘æˆ‘è¸©å¾—æœ€æ·±ã€‚å½“å¹´å¯¹æ¯”äº†ä¸¤ä¸ªæœˆæ¡†æ¶ï¼Œçœ‹äº†å‡ åç¯‡æ–‡ç« ï¼Œç»“æœè¿˜æ˜¯ä¸ç¡®å®šã€‚åæ¥ä¸€ä¸ªå‰è¾ˆè·Ÿæˆ‘è¯´ï¼š"å…ˆé€‰ä¸€ä¸ªåŠ¨èµ·æ¥ï¼Œæ¡†æ¶ä¸æ»¡æ„å¯ä»¥æ¢ï¼Œä½†æµªè´¹çš„æ—¶é—´å›ä¸æ¥ã€‚"</p>
<p>è¯´ç™½äº†ï¼Œ<strong>å†…å®¹æ‰æ˜¯åšå®¢çš„æ ¸å¿ƒï¼Œæ¡†æ¶åªæ˜¯å·¥å…·</strong>ã€‚æ²¡æœ‰å®Œç¾çš„æ¡†æ¶ï¼Œåªæœ‰æœ€é€‚åˆå½“ä¸‹çš„é€‰æ‹©ã€‚</p>
<p><strong>é”™è¯¯2ï¼šåªçœ‹ä¸»é¢˜å¤–è§‚ï¼Œå¿½ç•¥æ¡†æ¶æœ¬è´¨</strong></p>
<p>çœ‹åˆ°æŸä¸ªHugoä¸»é¢˜ç‰¹åˆ«ç‚«é…·ï¼Œå°±é€‰äº†Hugoã€‚ç»“æœå‘ç°Goæ¨¡æ¿è¯­æ³•å­¦ä¸ä¼šï¼Œè‡ªå®šä¹‰ä¸»é¢˜éš¾å¦‚ç™»å¤©ã€‚æœ€åç”¨äº†åŠå¹´ï¼Œè¿˜æ˜¯æ¢å›Hexoã€‚</p>
<p>ä¸»é¢˜å¯ä»¥å®šåˆ¶ã€å¯ä»¥æ¢ï¼Œä½†æ¡†æ¶çš„æ€§èƒ½ã€ç”Ÿæ€ã€ç»´æŠ¤æ€§ï¼Œè¿™äº›æœ¬è´¨ç‰¹æ€§æ‰æ˜¯é•¿æœŸå½±å“ä½ çš„å› ç´ ã€‚</p>
<p><strong>é”™è¯¯3ï¼šæ–°æ‰‹ç›´æ¥ä¸ŠGatsby/Next.jsè¢«åŠé€€</strong></p>
<p>æˆ‘ä¸€æœ‹å‹ï¼Œåˆšå­¦å‰ç«¯ï¼Œå¬è¯´Gatsbyç‰›é€¼ï¼Œç›´æ¥ä¸Šæ‰‹ã€‚ç»“æœGraphQLä¸ä¼šã€Reactä¸ç†Ÿã€é…ç½®çœ‹ä¸æ‡‚ï¼ŒæŠ˜è…¾ä¸¤å‘¨ç›´æ¥æ”¾å¼ƒäº†ã€‚</p>
<p>è€å®è¯´ï¼Œ<strong>Gatsbyå’ŒNext.jsçœŸçš„ä¸é€‚åˆæ–°æ‰‹</strong>ã€‚å®ƒä»¬æ˜¯ç»™æœ‰ç»éªŒçš„å¼€å‘è€…å‡†å¤‡çš„å·¥å…·ã€‚æ–°æ‰‹æƒ³å¿«é€Ÿä¸Šçº¿åšå®¢ï¼ŒHexoæˆ–Jekyllæ‰æ˜¯æ­£ç¡®é€‰æ‹©ã€‚</p>
<p><strong>é”™è¯¯4ï¼šå¿½ç•¥é•¿æœŸç»´æŠ¤æˆæœ¬</strong></p>
<p>é€‰äº†ä¸ªå†·é—¨æ¡†æ¶ï¼Œä¸€å¼€å§‹æŒºå¥½ï¼ŒåŠå¹´åä½œè€…ä¸æ›´æ–°äº†ã€‚ä¾èµ–åº“å‡çº§ï¼Œåšå®¢è·‘ä¸èµ·æ¥ã€‚è¿ç§»æ¡†æ¶ï¼Œç—›è‹¦å¾—è¦æ­»ã€‚</p>
<p><strong>çœ‹æ¡†æ¶é€‰æ‹©çš„ä¸‰ä¸ªæŒ‡æ ‡</strong>ï¼š</p>
<ul>
<li>
<p>GitHubæ›´æ–°é¢‘ç‡ï¼ˆè‡³å°‘æ¯æœˆæœ‰commitï¼‰</p>
</li>
<li>
<p>ç¤¾åŒºè§„æ¨¡ï¼ˆé‡åˆ°é—®é¢˜èƒ½æ‰¾åˆ°äººé—®ï¼‰</p>
</li>
<li>
<p>ä¸­æ–‡èµ„æºï¼ˆæ–°æ‰‹å¿…çœ‹ï¼Œèƒ½çœ80%æ—¶é—´ï¼‰</p>
</li>
</ul>
<p><strong>é”™è¯¯5ï¼šèŠ±80%æ—¶é—´æŠ˜è…¾æ¡†æ¶ï¼Œ20%å†™å†…å®¹</strong></p>
<p>æˆ‘è§è¿‡å¤ªå¤šäººï¼Œé™·å…¥"å®Œç¾ä¸»ä¹‰é™·é˜±"ã€‚CSSæ”¹æ¥æ”¹å»ã€æ’ä»¶è£…äº†å¸å¸äº†è£…ï¼Œå°±æ˜¯ä¸å†™æ–‡ç« ã€‚</p>
<p>è®°ä½<strong>80/20æ³•åˆ™</strong>ï¼š80%ç²¾åŠ›å†™å†…å®¹ï¼Œ20%æŠ˜è…¾æ¡†æ¶ã€‚å¤Ÿç”¨å°±å¥½ï¼Œåˆ«è¿½æ±‚æè‡´å®Œç¾ã€‚</p>
<h3 data-id="heading-26">æ¡†æ¶è¿ç§»å»ºè®®</h3>
<p>ä¸‡ä¸€çœŸé€‰é”™äº†ï¼Œæƒ³æ¢æ¡†æ¶æ€ä¹ˆåŠï¼Ÿ</p>
<p>å…¶å®æ²¡é‚£ä¹ˆå¯æ€•ã€‚æ‰€æœ‰é™æ€åšå®¢æ¡†æ¶ï¼Œå†…å®¹éƒ½æ˜¯Markdownï¼Œè¿ç§»æˆæœ¬ä¸é«˜ã€‚æˆ‘ä»Hexoè¿ç§»åˆ°Hugoï¼Œå†…å®¹è¿ç§»åªèŠ±äº†1å°æ—¶ã€‚ä¸»è¦æ˜¯é…ç½®å’Œä¸»é¢˜è¦é‡æ–°æï¼Œä½†ä¹Ÿå°±åŠå¤©æ—¶é—´ã€‚</p>
<p><strong>è¿ç§»åŸåˆ™</strong>ï¼š</p>
<ul>
<li>
<p><strong>å…ˆæœ‰åä¼˜</strong>ï¼šå¿«é€Ÿä¸Šçº¿ &gt; å®Œç¾é…ç½®</p>
</li>
<li>
<p><strong>å†…å®¹ä¼˜å…ˆ</strong>ï¼šå†™å¤Ÿ50ç¯‡æ–‡ç« å†è€ƒè™‘è¿ç§»ï¼Œä¸ç„¶æ²¡å¿…è¦</p>
</li>
<li>
<p><strong>ä¸å½±å“SEO</strong>ï¼šåšå¥½301é‡å®šå‘ï¼ŒURLç»“æ„å°½é‡ä¿æŒä¸€è‡´</p>
</li>
</ul>
<h3 data-id="heading-27">2025å¹´è¶‹åŠ¿å±•æœ›</h3>
<p>æ ¹æ®2024-2025çš„æ•°æ®å’Œç¤¾åŒºåŠ¨å‘ï¼Œæˆ‘é¢„æµ‹ï¼š</p>
<ul>
<li>
<p><strong>Astroä¼šç»§ç»­å¢é•¿</strong>ï¼šå²›å±¿æ¶æ„æ˜¯æœªæ¥è¶‹åŠ¿ï¼Œé›¶JavaScripté»˜è®¤å¤ªé¦™äº†</p>
</li>
<li>
<p><strong>Hugoä¿æŒæ€§èƒ½ç‹è€…åœ°ä½</strong>ï¼šå¤§å‹ç«™ç‚¹æ²¡å¾—é€‰</p>
</li>
<li>
<p><strong>Hexoä¸­æ–‡ç”Ÿæ€æŒç»­ç¨³å®š</strong>ï¼šä¸­æ–‡åšå®¢çš„é¦–é€‰ä¸ä¼šå˜</p>
</li>
<li>
<p><strong>ä¼ ç»Ÿæ¡†æ¶é€æ­¥è¢«å–ä»£</strong>ï¼šJekyllè™½ç„¶ç¨³å®šï¼Œä½†æ–°é¡¹ç›®ä¼šè¶Šæ¥è¶Šå°‘</p>
</li>
</ul>
<p>ä½†è¯´å®è¯ï¼Œè¶‹åŠ¿åªæ˜¯å‚è€ƒã€‚é€‰æ¡†æ¶è¿˜æ˜¯è¦çœ‹è‡ªå·±çš„éœ€æ±‚å’ŒæŠ€æœ¯æ ˆã€‚</p>
<h2 data-id="heading-28">ç»“è®º</h2>
<p>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼š2025å¹´åšå®¢æ¡†æ¶è¯¥æ€ä¹ˆé€‰ï¼Ÿ</p>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼š</p>
<ul>
<li>
<p><strong>æ–°æ‰‹é¦–é€‰</strong>ï¼šHexoï¼ˆä¸­æ–‡èµ„æºä¸°å¯Œï¼Œä¸»é¢˜å¤šï¼Œä¸Šæ‰‹å¿«ï¼‰</p>
</li>
<li>
<p><strong>å‰ç«¯å¼€å‘è€…</strong>ï¼šAstroï¼ˆæ€§èƒ½+çµæ´»æ€§çš„æœ€ä½³å¹³è¡¡ï¼Œç°ä»£åŒ–ä½“éªŒï¼‰</p>
</li>
<li>
<p><strong>æ€§èƒ½æå®¢</strong>ï¼šHugoï¼ˆé€Ÿåº¦æ— æ•Œï¼Œé€‚åˆå¤§å‹ç«™ç‚¹ï¼‰</p>
</li>
<li>
<p><strong>æ–‡æ¡£ç«™ç‚¹</strong>ï¼šDocusaurus/VuePressï¼ˆä¸“ä¸ºæ–‡æ¡£è®¾è®¡ï¼‰</p>
</li>
<li>
<p><strong>æ±‚ç¨³</strong>ï¼šJekyllï¼ˆGitHubåŸç”Ÿæ”¯æŒï¼Œæœ€çœå¿ƒï¼‰</p>
</li>
</ul>
<p>ä½†è€å®è®²ï¼Œ<strong>é€‰æ‹©æ¡†æ¶åªéœ€è¦5åˆ†é’Ÿï¼Œå†™å¥½å†…å®¹éœ€è¦ä¸€è¾ˆå­</strong>ã€‚</p>
<p>åˆ«å†çº ç»“äº†ã€‚é€‰ä¸€ä¸ªé¡ºæ‰‹çš„ï¼Œå¼€å§‹è¡ŒåŠ¨å§ã€‚å†™ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œæ¯”ç ”ç©¶æ¡†æ¶é‡è¦ä¸€ç™¾å€ã€‚</p>
<p>æˆ‘å½“åˆçº ç»“äº†ä¸¤ä¸ªæœˆï¼Œç°åœ¨å›å¤´çœ‹ï¼Œé‚£æ®µæ—¶é—´å®Œå…¨æ˜¯æµªè´¹ã€‚æ—©ç‚¹å¼€å§‹å†™ï¼Œç°åœ¨å¯èƒ½å·²ç»æœ‰200ç¯‡æ–‡ç« äº†ã€‚</p>
<p><strong>è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>
<p>æ ¹æ®ä¸Šé¢çš„å†³ç­–çŸ©é˜µï¼ŒèŠ±5åˆ†é’Ÿé€‰ä¸€ä¸ªæ¡†æ¶</p>
</li>
<li>
<p>æ‰¾ä¸ªä¸»é¢˜ï¼Œ1å°æ—¶æ­å¥½ç¯å¢ƒ</p>
</li>
<li>
<p>å†™ç¬¬ä¸€ç¯‡æ–‡ç« ï¼Œå“ªæ€•åªæœ‰500å­—</p>
</li>
<li>
<p>å‘å¸ƒä¸Šçº¿ï¼Œäº«å—æˆå°±æ„Ÿ</p>
</li>
</ol>
<p>è®°ä½ï¼š<strong>æ¡†æ¶ä¸é‡è¦ï¼Œå†…å®¹æ‰é‡è¦ã€‚å¤Ÿç”¨å°±å¥½ï¼Œä¸“æ³¨å†™ä½œã€‚</strong></p>
<p>è¯„è®ºåŒºè¯´è¯´ä½ çš„é€‰æ‹©å’Œç†ç”±ï¼Ÿæˆ‘å¾ˆå¥½å¥‡å¤§å®¶æœ€åéƒ½é€‰äº†ä»€ä¹ˆã€‚å¦‚æœæœ‰é—®é¢˜ï¼Œæˆ‘ä¼šå°½é‡å›å¤çš„ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘è‡ª<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2F" target="_blank" title="https://blog.betterlink.top/zh/" ref="nofollow noopener noreferrer">ä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetes ServiceåŠ¨æ‰‹å®éªŒ]]></title>    <link>https://juejin.cn/post/7578724773993381914</link>    <guid>https://juejin.cn/post/7578724773993381914</guid>    <pubDate>2025-12-01T15:27:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578724773993381914" data-draft-id="7578732288515670067" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetes ServiceåŠ¨æ‰‹å®éªŒ"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-12-01T15:27:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetes ServiceåŠ¨æ‰‹å®éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T15:27:28.000Z" title="Mon Dec 01 2025 15:27:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>éå¸¸å¥½çš„é—®é¢˜ï¼éªŒè¯ Kubernetes Serviceï¼ˆsvcï¼‰æ˜¯å¦æ­£å¸¸å·¥ä½œï¼Œæ˜¯æ—¥å¸¸å¼€å‘å’Œè¿ç»´çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ä¸‹é¢æˆ‘ä¸ºä½ è®¾è®¡ <strong>5 ä¸ªç”±æµ…å…¥æ·±çš„åŠ¨æ‰‹å®éªŒ</strong>ï¼Œå…¨éƒ¨åŸºäºå‘½ä»¤è¡Œæ“ä½œï¼Œä½ å¯ä»¥åœ¨è‡ªå·±çš„é›†ç¾¤ï¼ˆå¦‚ä½ çš„ <code>k8s-master-node</code>ï¼‰ä¸Šç›´æ¥è¿è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-0">ğŸ§ª å®éªŒå‰æ</h2>
<p>ç¡®ä¿ä½ å·²æœ‰ä¸€ä¸ªè¿è¡Œä¸­çš„ Podï¼ˆæˆ‘ä»¬ç”¨ Nginx ä½œä¸ºç¤ºä¾‹ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># åˆ›å»º Deployment</span>
kubectl create deployment nginx <span class="hljs-attr">--image</span>=nginx --replicas=<span class="hljs-number">2</span>

<span class="hljs-comment"># ç­‰å¾… Pod Running</span>
kubectl get pods -l <span class="hljs-attr">app</span>=nginx
</code></pre>
<hr/>
<h2 data-id="heading-1">ğŸ”¬ å®éªŒ 1ï¼šåˆ›å»º ClusterIP Service å¹¶ä»é›†ç¾¤å†…è®¿é—®</h2>
<h3 data-id="heading-2">âœ… ç›®æ ‡ï¼šéªŒè¯ Service èƒ½åœ¨é›†ç¾¤å†…éƒ¨è´Ÿè½½å‡è¡¡</h3>
<h4 data-id="heading-3">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. åˆ›å»º ClusterIP Service</span>
kubectl expose deployment nginx <span class="hljs-attr">--port</span>=<span class="hljs-number">80</span> --target-port=<span class="hljs-number">80</span> --name=nginx-svc

<span class="hljs-comment"># 2. æŸ¥çœ‹ Service å’Œ Endpoints</span>
kubectl get svc nginx-svc
kubectl get endpoints nginx-svc  <span class="hljs-comment"># åº”æ˜¾ç¤º 2 ä¸ª Pod IP</span>

<span class="hljs-comment"># 3. å¯åŠ¨ä¸€ä¸ªä¸´æ—¶è°ƒè¯• Podï¼ˆbusyboxï¼‰</span>
kubectl run debug <span class="hljs-attr">--image</span>=busybox:<span class="hljs-number">1.28</span> -it --rm --restart=Never -- sh

<span class="hljs-comment"># åœ¨ debug å®¹å™¨å†…æ‰§è¡Œï¼š</span>
/ <span class="hljs-comment"># wget -qO- http://nginx-svc</span>
/ <span class="hljs-comment"># wget -qO- http://nginx-svc</span>
</code></pre>
<h4 data-id="heading-4">âœ… é¢„æœŸç»“æœï¼š</h4>
<ul>
<li>æ¯æ¬¡è¯·æ±‚å¯èƒ½è¿”å›ä¸åŒ Pod çš„æ¬¢è¿é¡µï¼ˆè™½ç„¶å†…å®¹ä¸€æ ·ï¼Œä½†å¯é€šè¿‡æ—¥å¿—åŒºåˆ†ï¼‰</li>
<li>è¯æ˜ Service åšäº†è´Ÿè½½å‡è¡¡</li>
</ul>
<blockquote>
<p>ğŸ’¡ æç¤ºï¼šä½ å¯ä»¥è¿›å…¥æ¯ä¸ª Nginx Pod æ·»åŠ å”¯ä¸€æ ‡è¯†ï¼š</p>
<pre><code class="hljs language-css" lang="css">kubectl exec &lt;pod1&gt; -- sh -c 'echo "&lt;<span class="hljs-selector-tag">h1</span>&gt;Pod <span class="hljs-number">1</span>&lt;/<span class="hljs-selector-tag">h1</span>&gt;" &gt; /usr/share/nginx/<span class="hljs-selector-tag">html</span>/index<span class="hljs-selector-class">.html</span>'
kubectl exec &lt;pod2&gt; -- sh -c 'echo "&lt;<span class="hljs-selector-tag">h1</span>&gt;Pod <span class="hljs-number">2</span>&lt;/<span class="hljs-selector-tag">h1</span>&gt;" &gt; /usr/share/nginx/<span class="hljs-selector-tag">html</span>/index<span class="hljs-selector-class">.html</span>'
</code></pre>
<p>å† curl å°±èƒ½çœ‹åˆ°è½®æµè¿”å› Pod 1 / Pod 2ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ğŸ”¬ å®éªŒ 2ï¼šéªŒè¯ DNS è§£æï¼ˆService åç§° â†’ ClusterIPï¼‰</h2>
<h3 data-id="heading-6">âœ… ç›®æ ‡ï¼šç¡®è®¤ CoreDNS èƒ½æ­£ç¡®è§£æ Service</h3>
<h4 data-id="heading-7">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿›å…¥ debug Podï¼ˆå¦‚æœå·²é€€å‡ºï¼Œé‡æ–°åˆ›å»ºï¼‰</span>
kubectl run dns-test <span class="hljs-attr">--image</span>=busybox:<span class="hljs-number">1.28</span> -it --rm --restart=Never -- nslookup nginx-svc
</code></pre>
<h4 data-id="heading-8">âœ… é¢„æœŸè¾“å‡ºï¼š</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">Server:</span>    <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span>      <span class="hljs-comment"># CoreDNS IP</span>
<span class="hljs-attr">Address 1:</span> <span class="hljs-number">10.96</span><span class="hljs-number">.0</span><span class="hljs-number">.10</span> <span class="hljs-string">kube-dns.kube-system.svc.cluster.local</span>

<span class="hljs-attr">Name:</span>      <span class="hljs-string">nginx-svc</span>
<span class="hljs-attr">Address 1:</span> <span class="hljs-number">10.96</span><span class="hljs-number">.123</span><span class="hljs-number">.45</span>     <span class="hljs-comment"># è¿™å°±æ˜¯ Service çš„ ClusterIPï¼</span>
</code></pre>
<blockquote>
<p>âœ… è¯´æ˜ï¼š<code>nginx-svc</code> è¢«æˆåŠŸè§£æä¸º ClusterIP</p>
</blockquote>
<h4 data-id="heading-9">æ‰©å±•æµ‹è¯•ï¼ˆå®Œæ•´ FQDNï¼‰ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino">kubectl run dns-fqdn --image=busybox:<span class="hljs-number">1.28</span> -it --rm --restart=Never -- \
  nslookup nginx-svc.<span class="hljs-keyword">default</span>.svc.cluster.local
</code></pre>
<hr/>
<h2 data-id="heading-10">ğŸ”¬ å®éªŒ 3ï¼šåˆ›å»º NodePort Service å¹¶ä»é›†ç¾¤å¤–è®¿é—®</h2>
<h3 data-id="heading-11">âœ… ç›®æ ‡ï¼šéªŒè¯å¤–éƒ¨æµé‡èƒ½é€šè¿‡èŠ‚ç‚¹ç«¯å£åˆ°è¾¾ Pod</h3>
<h4 data-id="heading-12">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. åˆ›å»º NodePort Serviceï¼ˆè‡ªåŠ¨åˆ†é…ç«¯å£ï¼‰</span>
kubectl expose deployment nginx --port=80 --target-port=80 --<span class="hljs-built_in">type</span>=NodePort --name=nginx-np

<span class="hljs-comment"># 2. æŸ¥çœ‹åˆ†é…çš„ç«¯å£</span>
kubectl get svc nginx-np
<span class="hljs-comment"># è¾“å‡ºç¤ºä¾‹ï¼šnginx-np   NodePort   10.96.200.100   80:31234/TCP</span>
<span class="hljs-comment"># è®°ä¸‹ 31234ï¼ˆä½ çš„ç«¯å£å¯èƒ½ä¸åŒï¼‰</span>

<span class="hljs-comment"># 3. ä»ä½ çš„æœ¬åœ°ç”µè„‘ï¼ˆæˆ– master èŠ‚ç‚¹ shellï¼‰è®¿é—®</span>
curl http://localhost:31234          <span class="hljs-comment"># å¦‚æœä½ åœ¨ master èŠ‚ç‚¹æœ¬æœº</span>
<span class="hljs-comment"># æˆ–</span>
curl http://&lt;ä½ çš„èŠ‚ç‚¹å…¬ç½‘/å†…ç½‘IP&gt;:31234   <span class="hljs-comment"># å¦‚ 192.168.18.133:31234</span>
</code></pre>
<h4 data-id="heading-13">âš ï¸ å¦‚æœè®¿é—®å¤±è´¥ï¼Œæ£€æŸ¥ï¼š</h4>
<ul>
<li>é˜²ç«å¢™æ˜¯å¦æ”¾è¡Œç«¯å£ï¼ˆå¦‚ <code>sudo ufw allow 31234</code>ï¼‰</li>
<li>èŠ‚ç‚¹å®‰å…¨ç»„ï¼ˆäº‘æœåŠ¡å™¨éœ€é…ç½®å…¥ç«™è§„åˆ™ï¼‰</li>
</ul>
<h4 data-id="heading-14">âœ… é¢„æœŸç»“æœï¼š</h4>
<p>è¿”å› Nginx æ¬¢è¿é¡µï¼Œè¯æ˜ <strong>å¤–éƒ¨ â†’ NodePort â†’ Service â†’ Pod</strong> é“¾è·¯æ‰“é€šã€‚</p>
<hr/>
<h2 data-id="heading-15">ğŸ”¬ å®éªŒ 4ï¼šæ•…æ„ç ´å Serviceï¼Œè§‚å¯Ÿæ•…éšœç°è±¡</h2>
<h3 data-id="heading-16">âœ… ç›®æ ‡ï¼šç†è§£ Service ä¸ Pod çš„è§£è€¦å…³ç³»</h3>
<h4 data-id="heading-17">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. åˆ é™¤æ‰€æœ‰åç«¯ Podï¼ˆDeployment ä¼šè‡ªåŠ¨é‡å»ºï¼‰</span>
kubectl delete pods -l <span class="hljs-attr">app</span>=nginx

<span class="hljs-comment"># 2. ç«‹å³æŸ¥çœ‹ Endpoints</span>
kubectl get endpoints nginx-svc  <span class="hljs-comment"># åº”è¯¥ä¸ºç©ºï¼ˆ&lt;none&gt;ï¼‰</span>

<span class="hljs-comment"># 3. å°è¯•è®¿é—® Serviceï¼ˆä» debug Podï¼‰</span>
kubectl run test-bad <span class="hljs-attr">--image</span>=curlimages/curl -it --rm --restart=Never -- \
  curl -m 3 http://nginx-svc
</code></pre>
<h4 data-id="heading-18">âœ… é¢„æœŸç»“æœï¼š</h4>
<ul>
<li>è¯·æ±‚è¶…æ—¶ï¼ˆ<code>curl: (28) Connection timed out</code>ï¼‰</li>
<li>è¯´æ˜ï¼š<strong>Service å­˜åœ¨ â‰  åç«¯å¯ç”¨</strong>ï¼Œå¿…é¡»æœ‰åŒ¹é…çš„ Pod</li>
</ul>
<blockquote>
<p>ğŸ’¡ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç›‘æ§è¦åŒæ—¶å…³æ³¨ <strong>Service</strong> å’Œ <strong>Pod Ready çŠ¶æ€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-19">ğŸ”¬ å®éªŒ 5ï¼šè·¨å‘½åç©ºé—´è°ƒç”¨ Service</h2>
<h3 data-id="heading-20">âœ… ç›®æ ‡ï¼šéªŒè¯ Service çš„å‘½åç©ºé—´éš”ç¦»ä¸è·¨ç©ºé—´è®¿é—®</h3>
<h4 data-id="heading-21">æ­¥éª¤ï¼š</h4>
<pre><code class="hljs language-arduino" lang="arduino"># <span class="hljs-number">1.</span> åˆ›å»ºæ–°å‘½åç©ºé—´
kubectl create ns test-ns

# <span class="hljs-number">2.</span> åœ¨ <span class="hljs-keyword">default</span> å‘½åç©ºé—´ä¿ç•™ nginx-svc

# <span class="hljs-number">3.</span> ä» test-ns ä¸­è®¿é—® <span class="hljs-keyword">default</span> çš„ Service
kubectl run cross-ns --image=busybox:<span class="hljs-number">1.28</span> -n test-ns -it --rm --restart=Never -- \
  wget -qO- http:<span class="hljs-comment">//nginx-svc.default.svc.cluster.local</span>
</code></pre>
<h4 data-id="heading-22">âœ… å…³é”®ç‚¹ï¼š</h4>
<ul>
<li>å¿…é¡»ä½¿ç”¨ <strong>å®Œæ•´ DNS åç§°</strong>ï¼š<code>&lt;service&gt;.&lt;namespace&gt;.svc.cluster.local</code></li>
<li>ä¸èƒ½åªå†™ <code>nginx-svc</code>ï¼ˆå› ä¸ºå½“å‰å‘½åç©ºé—´æ˜¯ <code>test-ns</code>ï¼‰</li>
</ul>
<h4 data-id="heading-23">âœ… é¢„æœŸç»“æœï¼š</h4>
<p>æˆåŠŸè¿”å› Nginx é¡µé¢ï¼Œè¯æ˜è·¨å‘½åç©ºé—´é€šä¿¡å¯è¡Œã€‚</p>
<hr/>
<h2 data-id="heading-24">ğŸ› ï¸ é™„åŠ ï¼šå¸¸ç”¨è¯Šæ–­å‘½ä»¤é€ŸæŸ¥è¡¨</h2>





























<table><thead><tr><th>åœºæ™¯</th><th>å‘½ä»¤</th></tr></thead><tbody><tr><td>æŸ¥çœ‹ Service è¯¦æƒ…</td><td><code>kubectl describe svc &lt;name&gt;</code></td></tr><tr><td>æŸ¥çœ‹åç«¯ Pod åˆ—è¡¨</td><td><code>kubectl get endpoints &lt;svc-name&gt;</code></td></tr><tr><td>æµ‹è¯•è¿é€šæ€§ï¼ˆé›†ç¾¤å†…ï¼‰</td><td><code>kubectl run -it --rm debug --image=busybox --restart=Never -- telnet &lt;svc&gt; 80</code></td></tr><tr><td>æŸ¥çœ‹ kube-proxy æ—¥å¿—</td><td><code>kubectl logs -n kube-system -l k8s-app=kube-proxy</code></td></tr><tr><td>æ£€æŸ¥é˜²ç«å¢™ï¼ˆLinuxï¼‰</td><td><code>sudo ufw status</code> æˆ– <code>sudo iptables -L</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-25">âœ… æ€»ç»“ï¼šéªŒè¯ Service çš„æ ¸å¿ƒæ€è·¯</h2>
<ol>
<li><strong>æŸ¥é…ç½®</strong>ï¼š<code>kubectl get/describe svc</code></li>
<li><strong>æŸ¥åç«¯</strong>ï¼š<code>kubectl get endpoints</code>ï¼ˆå¿…é¡»éç©ºï¼ï¼‰</li>
<li><strong>é›†ç¾¤å†…æµ‹</strong>ï¼šç”¨ä¸´æ—¶ Pod curl/telnet</li>
<li><strong>é›†ç¾¤å¤–æµ‹</strong>ï¼šNodePort / LoadBalancer + é˜²ç«å¢™æ£€æŸ¥</li>
<li><strong>çœ‹ DNS</strong>ï¼š<code>nslookup &lt;svc-name&gt;</code></li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>è®°ä½ï¼šService æ˜¯è™šæ‹Ÿ IPï¼ŒçœŸæ­£å¹²æ´»çš„æ˜¯ Endpointsï¼ˆPod åˆ—è¡¨ï¼‰ï¼</strong></p>
</blockquote>
<hr/>
<p>ç°åœ¨å°±å»ä½ çš„ <code>k8s-master-node</code> ä¸ŠåŠ¨æ‰‹è¯•è¯•å§ï¼æ¯å®Œæˆä¸€ä¸ªå®éªŒï¼Œä½ å¯¹ K8s ç½‘ç»œçš„ç†è§£å°±æ›´æ·±ä¸€å±‚ã€‚å¦‚æœæŸä¸ªå®éªŒå¡ä½äº†ï¼Œæ¬¢è¿è´´å‡ºä½ çš„å‘½ä»¤å’Œè¾“å‡ºï¼Œæˆ‘å¯ä»¥å¸®ä½ åˆ†æï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§é‡å¼‚æ­¥å¹¶å‘è¯·æ±‚æ§åˆ¶å¹¶å‘è§£å†³æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578714759337443328</link>    <guid>https://juejin.cn/post/7578714759337443328</guid>    <pubDate>2025-12-01T15:51:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714759337443328" data-draft-id="7578724773993398298" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§é‡å¼‚æ­¥å¹¶å‘è¯·æ±‚æ§åˆ¶å¹¶å‘è§£å†³æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T15:51:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="veneno"/> <meta itemprop="url" content="https://juejin.cn/user/1381457252330183"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§é‡å¼‚æ­¥å¹¶å‘è¯·æ±‚æ§åˆ¶å¹¶å‘è§£å†³æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1381457252330183/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    veneno
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T15:51:37.000Z" title="Mon Dec 01 2025 15:51:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å®ç°æ€è·¯ï¼š</p>
<p>å¯ä»¥ä½¿ç”¨ Promise å’Œå¼‚æ­¥å‡½æ•°ã€‚æ‰‹åŠ¨å®ç°ä¸€ä¸ªåŒæ­¥é˜Ÿåˆ—</p>
<p>æµ‹è¯•æ•°æ®</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> tasks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">88</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-number">0</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> {
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-title function_">resolve</span>(i)
    }, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>)
  })
})
</code></pre>
<p>æ ¸å¿ƒä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">limitRequest</span>(<span class="hljs-params">tasks, limit</span>) {
  <span class="hljs-keyword">const</span> queue = []
  <span class="hljs-keyword">let</span> runingCount = <span class="hljs-number">0</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">enqueque</span>(<span class="hljs-params">task</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
      queue.<span class="hljs-title function_">push</span>({
        task,
        resolve,
        reject,
      })
      <span class="hljs-title function_">run</span>()
    })
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">while</span> (queue.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; runingCount &lt; limit) {
      runingCount++
      <span class="hljs-keyword">const</span> { task, resolve, reject } = queue.<span class="hljs-title function_">shift</span>()
      <span class="hljs-title function_">task</span>()
        .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> {<span class="hljs-title function_">resolve</span>(value);<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)})
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> <span class="hljs-title function_">reject</span>(err))
        .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
          runingCount--
          <span class="hljs-title function_">run</span>()
        })
    }
  }

  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(tasks.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">task</span>) =&gt;</span> <span class="hljs-title function_">enqueque</span>(task)))
}
</code></pre>
<p>æµ‹è¯•ä»£ç </p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">await</span> <span class="hljs-title function_">limitRequest</span>(tasks, <span class="hljs-number">10</span>))
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·]]></title>    <link>https://juejin.cn/post/7578714735307636762</link>    <guid>https://juejin.cn/post/7578714735307636762</guid>    <pubDate>2025-12-01T14:12:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714735307636762" data-draft-id="7578714735307620378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T14:12:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Reactorç½‘ç»œæ¨¡å‹æ·±åº¦è§£æï¼šä»å¹¶å‘å›°å¢ƒè¯´èµ·
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:12:19.000Z" title="Mon Dec 01 2025 14:12:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬æ–‡æ·±å…¥æ¢è®¨Reactorç½‘ç»œæ¨¡å‹çš„æ ¸å¿ƒæœºåˆ¶ï¼Œè§£ç­”é«˜å¹¶å‘åœºæ™¯ä¸‹çš„å…³é”®é—®é¢˜ï¼Œæ­ç¤ºç°ä»£é«˜æ€§èƒ½æœåŠ¡å™¨çš„æ¶æ„å¥¥ç§˜ã€‚é€šè¿‡å¯¹æ¯”åˆ†æã€åŸç†é˜è¿°å’Œå®æˆ˜ä»£ç ï¼Œå¸¦æ‚¨å½»åº•ç†è§£Reactorå¦‚ä½•ä¼˜é›…åº”å¯¹æµ·é‡å¹¶å‘è¯·æ±‚ã€‚</p>
</blockquote>
<h2 data-id="heading-0"><strong>å¹¶å‘å›°éš¾</strong></h2>
<p>æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ çš„ç”µå•†ç½‘ç«™æ­£åœ¨ä¸¾åŠ"åŒ11"å¤§ä¿ƒï¼Œæ¯ç§’æœ‰10ä¸‡ç”¨æˆ·åŒæ—¶ç‚¹å‡»"ç«‹å³è´­ä¹°"ã€‚ä¼ ç»Ÿçš„"ä¸€çº¿ç¨‹ä¸€è¿æ¥"æ¶æ„ç¬é—´å´©æºƒâ€”â€”ä¸æ˜¯å†…å­˜è€—å°½ï¼Œå°±æ˜¯CPUè¢«ä¸Šä¸‹æ–‡åˆ‡æ¢æ‹–å®ã€‚</p>
<p>è¿™æ­£æ˜¯æˆ‘åœ¨èŒä¸šç”Ÿæ¶¯æ—©æœŸé­é‡çš„çœŸå®å›°å¢ƒã€‚ç›´åˆ°æˆ‘ç†è§£äº†<strong>Reactoræ¨¡å¼</strong>ï¼Œæ‰å‘ç°åŸæ¥é«˜æ€§èƒ½ç½‘ç»œç¼–ç¨‹å¯ä»¥å¦‚æ­¤ä¼˜é›…ã€‚</p>
<h2 data-id="heading-1"><strong>ç¬¬ä¸€ç« ï¼šä¼ ç»Ÿå¹¶å‘æ¨¡å‹çš„å´©æºƒè¾¹ç¼˜</strong></h2>
<h3 data-id="heading-2"><strong>1.1 é˜»å¡I/Oçš„è‡´å‘½ç¼ºé™·</strong></h3>
<p>è®©æˆ‘ä»¬ä»æœ€ç›´è§‚çš„ä»£ç å¼€å§‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ç»å…¸çš„å¤šçº¿ç¨‹æœåŠ¡å™¨ - æ¯ä¸ªè¿æ¥ä¸€ä¸ªçº¿ç¨‹</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_client</span><span class="hljs-params">(<span class="hljs-type">int</span> sockfd)</span> </span>{
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">1024</span>];
    <span class="hljs-comment">// é˜»å¡ç‚¹ï¼šæ•°æ®æœªåˆ°è¾¾æ—¶çº¿ç¨‹ä¼‘çœ </span>
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(sockfd, buffer, <span class="hljs-built_in">sizeof</span>(buffer), <span class="hljs-number">0</span>);
    <span class="hljs-comment">// çº¿ç¨‹è¢«å”¤é†’ï¼Œå¤„ç†ä¸šåŠ¡</span>
    <span class="hljs-built_in">process_request</span>(buffer);
    <span class="hljs-built_in">send</span>(sockfd, response, <span class="hljs-built_in">strlen</span>(response), <span class="hljs-number">0</span>);
}

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> server_fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    <span class="hljs-comment">// ... bind, listen</span>
    
    <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>) {
        <span class="hljs-type">int</span> client_fd = <span class="hljs-built_in">accept</span>(server_fd, <span class="hljs-literal">NULL</span>, <span class="hljs-literal">NULL</span>);
        <span class="hljs-comment">// è‡´å‘½çš„èµ„æºæ¶ˆè€—ï¼šæ¯ä¸ªçº¿ç¨‹éœ€è¦8MBæ ˆç©ºé—´</span>
        <span class="hljs-function">std::thread <span class="hljs-title">t</span><span class="hljs-params">(handle_client, client_fd)</span></span>;
        t.<span class="hljs-built_in">detach</span>();
    }
}
</code></pre>
<p><strong>é—®é¢˜åˆ†æ</strong>ï¼š</p>
<ul>
<li>è¿æ¥æ•°å¢é•¿ â†’ çº¿ç¨‹æ•°çº¿æ€§å¢é•¿</li>
<li>1000ä¸ªè¿æ¥ â‰ˆ 8GBå†…å­˜ï¼ˆä»…çº¿ç¨‹æ ˆï¼‰</li>
<li>ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€å‘ˆæŒ‡æ•°çº§ä¸Šå‡</li>
<li>å¤§éƒ¨åˆ†çº¿ç¨‹å¤„äºé˜»å¡ç­‰å¾…çŠ¶æ€ï¼ˆèµ„æºæµªè´¹ï¼‰</li>
</ul>
<h3 data-id="heading-3"><strong>1.2 C10Ké—®é¢˜çš„æŒ‘æˆ˜</strong></h3>
<p>2000å¹´æå‡ºçš„C10Kï¼ˆå¹¶å‘1ä¸‡è¿æ¥ï¼‰é—®é¢˜ï¼Œæš´éœ²äº†ä¼ ç»Ÿæ¨¡å‹çš„æ ¹æœ¬ç¼ºé™·ï¼š</p>

























<table><thead><tr><th>èµ„æºç±»å‹</th><th>ä¼ ç»Ÿæ¨¡å‹æ¶ˆè€—</th><th>ç‰©ç†é™åˆ¶</th></tr></thead><tbody><tr><td>å†…å­˜</td><td>10,000 Ã— 8MB = 80GB</td><td>æœåŠ¡å™¨é€šå¸¸åªæœ‰128GB</td></tr><tr><td>æ–‡ä»¶æè¿°ç¬¦</td><td>10,000</td><td>ç³»ç»Ÿé»˜è®¤é™åˆ¶1024</td></tr><tr><td>CPUæ—¶é—´</td><td>å¤§é‡ç”¨äºçº¿ç¨‹åˆ‡æ¢</td><td>å®é™…ä¸šåŠ¡å¤„ç†å æ¯”ä½</td></tr></tbody></table>
<h2 data-id="heading-4"><strong>ç¬¬äºŒç« ï¼šReactorçš„æ¶æ„é©å‘½</strong></h2>
<h3 data-id="heading-5"><strong>2.1 æ ¸å¿ƒæ€æƒ³ï¼šäº‹ä»¶é©±åŠ¨ä¸çŠ¶æ€æœº</strong></h3>
<p>Reactoræ¨¡å¼çš„æ ¸å¿ƒè½¬å˜ï¼š<strong>ä»"ä¸»åŠ¨è½®è¯¢"åˆ°"è¢«åŠ¨é€šçŸ¥"</strong>ã€‚</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼ ç»Ÿæ¨¡å‹ï¼šä¸»åŠ¨è¯¢é—®æ¯ä¸ªè¿æ¥</span>
<span class="hljs-keyword">for</span>(each connection) {
    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">has_data</span>(connection)) {  <span class="hljs-comment">// ä¸»åŠ¨æ£€æŸ¥</span>
        <span class="hljs-built_in">process</span>(connection);
    }
}

<span class="hljs-comment">// Reactoræ¨¡å‹ï¼šç­‰å¾…äº‹ä»¶é€šçŸ¥</span>
<span class="hljs-keyword">while</span>(events = <span class="hljs-built_in">wait_for_events</span>()) {  <span class="hljs-comment">// è¢«åŠ¨ç­‰å¾…</span>
    <span class="hljs-keyword">for</span>(each event in events) {
        <span class="hljs-built_in">handle_event</span>(event);  <span class="hljs-comment">// äº‹ä»¶è§¦å‘å¤„ç†</span>
    }
}
</code></pre>
<h3 data-id="heading-6"><strong>2.2 ç³»ç»Ÿè°ƒç”¨ï¼šä»selectåˆ°epollçš„æ¼”è¿›</strong></h3>
<p><strong>ç¬¬ä¸€ä»£ï¼šselect/pollçš„å±€é™</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">select</span><span class="hljs-params">(<span class="hljs-type">int</span> nfds, fd_set *readfds, fd_set *writefds, 
           fd_set *exceptfds, <span class="hljs-keyword">struct</span> timeval *timeout)</span></span>;
</code></pre>
<ul>
<li>æ¯æ¬¡è°ƒç”¨éœ€è¦ä¼ é€’å…¨éƒ¨fdé›†åˆï¼ˆç”¨æˆ·æ€â†’å†…æ ¸æ€æ‹·è´ï¼‰</li>
<li>å†…æ ¸çº¿æ€§æ‰«ææ‰€æœ‰fdï¼ˆO(n)å¤æ‚åº¦ï¼‰</li>
<li>fdæ•°é‡é™åˆ¶ï¼ˆé€šå¸¸1024ï¼‰</li>
</ul>
<p><strong>ç¬¬äºŒä»£ï¼šepollçš„çªç ´</strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// 1. åˆ›å»ºepollå®ä¾‹</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_create</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span></span>;

<span class="hljs-comment">// 2. æ³¨å†Œ/ä¿®æ”¹fdå…´è¶£</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_ctl</span><span class="hljs-params">(<span class="hljs-type">int</span> epfd, <span class="hljs-type">int</span> op, <span class="hljs-type">int</span> fd, <span class="hljs-keyword">struct</span> epoll_event *event)</span></span>;

<span class="hljs-comment">// 3. ç­‰å¾…äº‹ä»¶</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">epoll_wait</span><span class="hljs-params">(<span class="hljs-type">int</span> epfd, <span class="hljs-keyword">struct</span> epoll_event *events, 
               <span class="hljs-type">int</span> maxevents, <span class="hljs-type">int</span> timeout)</span></span>;
</code></pre>
<p><strong>epollçš„æ ¸å¿ƒä¼˜åŠ¿</strong>ï¼š</p>
<ol>
<li><strong>çº¢é»‘æ ‘å­˜å‚¨fd</strong>ï¼šé«˜æ•ˆå¢åˆ æ”¹ï¼ˆO(log n)ï¼‰</li>
<li><strong>å°±ç»ªåˆ—è¡¨</strong>ï¼šäº‹ä»¶è§¦å‘æ—¶åŠ å…¥åˆ—è¡¨</li>
<li><strong>mmapå…±äº«å†…å­˜</strong>ï¼šé¿å…ç”¨æˆ·æ€-å†…æ ¸æ€æ•°æ®æ‹·è´</li>
<li><strong>è¾¹ç¼˜è§¦å‘(ET)</strong>ï¼šå‡å°‘äº‹ä»¶é€šçŸ¥æ¬¡æ•°</li>
</ol>
<h3 data-id="heading-7"><strong>2.3 Reactorçš„å®Œæ•´æ¶æ„</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Reactoræ¨¡å¼å››å±‚æ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorArchitecture</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// 1. äº‹ä»¶å¤šè·¯åˆ†å‘å™¨ï¼ˆDemultiplexerï¼‰</span>
    EventDemultiplexer* demux;
    
    <span class="hljs-comment">// 2. äº‹ä»¶å¤„ç†å™¨æ³¨å†Œè¡¨ï¼ˆEvent Handler Registryï¼‰</span>
    std::map&lt;Handle, EventHandler*&gt; handlers;
    
    <span class="hljs-comment">// 3. äº‹ä»¶å¾ªç¯ï¼ˆEvent Loopï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">event_loop</span><span class="hljs-params">()</span></span>;
    
    <span class="hljs-comment">// 4. å…·ä½“äº‹ä»¶å¤„ç†å™¨ï¼ˆConcrete Event Handlersï¼‰</span>
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptorHandler</span> : <span class="hljs-keyword">public</span> EventHandler {...};
    <span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionHandler</span> : <span class="hljs-keyword">public</span> EventHandler {...};
};

<span class="hljs-comment">// äº‹ä»¶å¾ªç¯æ ¸å¿ƒç®—æ³•</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Reactor::event_loop</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">while</span>(!stop) {
        <span class="hljs-comment">// ç­‰å¾…äº‹ä»¶å‘ç”Ÿï¼ˆæ¯«ç§’çº§ç”šè‡³çº³ç§’çº§ï¼‰</span>
        <span class="hljs-keyword">auto</span> events = demux-&gt;<span class="hljs-built_in">select</span>(timeout);
        
        <span class="hljs-comment">// åˆ†å‘äº‹ä»¶åˆ°å¯¹åº”å¤„ç†å™¨</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span>&amp; event : events) {
            EventHandler* handler = <span class="hljs-built_in">get_handler</span>(event.handle);
            <span class="hljs-keyword">if</span>(handler) {
                handler-&gt;<span class="hljs-built_in">handle_event</span>(event.type);
            }
        }
        
        <span class="hljs-comment">// å¤„ç†å®šæ—¶å™¨äº‹ä»¶</span>
        <span class="hljs-built_in">process_timers</span>();
        
        <span class="hljs-comment">// å¤„ç†å¼‚æ­¥ä»»åŠ¡</span>
        <span class="hljs-built_in">process_async_tasks</span>();
    }
}
</code></pre>
<h2 data-id="heading-8"><strong>ç¬¬ä¸‰ç« ï¼šæ·±å…¥å…³é”®é—®é¢˜ï¼šå¹¶å‘æ¶ˆæ¯å¤„ç†æœºåˆ¶</strong></h2>
<h3 data-id="heading-9"><strong>3.1 é—®é¢˜çš„æœ¬è´¨ï¼šReactorå¦‚ä½•å¤„ç†"åŒæ—¶åˆ°è¾¾"çš„æ¶ˆæ¯ï¼Ÿ</strong></h3>
<p>è¿™æ˜¯æœ€å¸¸è§çš„è¯¯è§£ç‚¹ã€‚æˆ‘ä»¬éœ€è¦åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li><strong>ç‰©ç†åŒæ—¶</strong>ï¼šå¤šä¸ªæ•°æ®åŒ…åœ¨åŒä¸€çº³ç§’åˆ°è¾¾ç½‘å¡</li>
<li><strong>é€»è¾‘åŒæ—¶</strong>ï¼šReactoråœ¨å•æ¬¡äº‹ä»¶å¾ªç¯ä¸­å¤„ç†å¤šä¸ªå°±ç»ªäº‹ä»¶</li>
</ul>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å®é™…çš„å¤„ç†æ—¶åº</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">Reactor::handle_events</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// å•æ¬¡epoll_waitå¯èƒ½è¿”å›å¤šä¸ªå°±ç»ªsocket</span>
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">epoll_wait</span>(epfd, events, <span class="hljs-number">64</span>, <span class="hljs-number">-1</span>);
    
    <span class="hljs-comment">// è¿™äº›socketçš„æ•°æ®"å‡ ä¹åŒæ—¶"åˆ°è¾¾å†…æ ¸ç¼“å†²åŒº</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++) {
        <span class="hljs-comment">// ä½†å¤„ç†æ˜¯é¡ºåºçš„ï¼å…³é”®åœ¨æ­¤ï¼</span>
        <span class="hljs-built_in">handle_socket</span>(events[i].data.fd);
    }
}
</code></pre>
<h3 data-id="heading-10"><strong>3.2 å†…æ ¸ç¼“å†²åŒºçš„å…³é”®ä½œç”¨</strong></h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "å®¢æˆ·ç«¯åŒæ—¶å‘é€"
        C1[å®¢æˆ·ç«¯1] --&gt;|æ•°æ®åŒ…1| NIC[ç½‘å¡]
        C2[å®¢æˆ·ç«¯2] --&gt;|æ•°æ®åŒ…2| NIC
        C3[å®¢æˆ·ç«¯3] --&gt;|æ•°æ®åŒ…3| NIC
    end
    
    subgraph "å†…æ ¸ç©ºé—´"
        NIC --&gt;|DMAæ‹·è´| Memory[å†…æ ¸å†…å­˜]
        Memory --&gt; TCP[TCPåè®®æ ˆ]
        TCP --&gt; B1[Socket1ç¼“å†²åŒº]
        TCP --&gt; B2[Socket2ç¼“å†²åŒº]
        TCP --&gt; B3[Socket3ç¼“å†²åŒº]
    end
    
    subgraph "Reactorå¤„ç†"
        B1 --&gt;|epollæ ‡è®°å¯è¯»| E[epollå°±ç»ªåˆ—è¡¨]
        B2 --&gt;|epollæ ‡è®°å¯è¯»| E
        B3 --&gt;|epollæ ‡è®°å¯è¯»| E
        E --&gt; R[Reactoré¡ºåºè¯»å–]
    end
    
    R --&gt; P1[å¤„ç†Socket1]
    R --&gt; P2[å¤„ç†Socket2]
    R --&gt; P3[å¤„ç†Socket3]
</code></pre>
<p><strong>å…³é”®ç†è§£</strong>ï¼š</p>
<ol>
<li>æ•°æ®åŒ…åˆ°è¾¾ç½‘å¡åï¼Œç”±DMAç›´æ¥å†™å…¥å†…å­˜</li>
<li>å†…æ ¸TCPåè®®æ ˆå¤„ç†ï¼Œå­˜å…¥å¯¹åº”socketçš„æ¥æ”¶ç¼“å†²åŒº</li>
<li>epollå°†è¯¥socketæ ‡è®°ä¸º"å¯è¯»"</li>
<li>Reactorä¸‹æ¬¡<code>epoll_wait</code>æ—¶è·çŸ¥å¤šä¸ªsocketå°±ç»ª</li>
<li><strong>è™½ç„¶æ˜¯é¡ºåºå¤„ç†ï¼Œä½†æ¯ä¸ªrecvéƒ½æ˜¯éé˜»å¡çš„ï¼Œç«‹å³è¿”å›</strong></li>
</ol>
<h3 data-id="heading-11"><strong>3.3 æ€§èƒ½ç“¶é¢ˆåˆ†æä¸è§£å†³æ–¹æ¡ˆ</strong></h3>
<p><strong>åœºæ™¯åˆ†æ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å‡è®¾æœ‰3ä¸ªå®¢æˆ·ç«¯å‡ ä¹åŒæ—¶å‘é€æ•°æ®</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_socket</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span> </span>{
    <span class="hljs-comment">// æ­¥éª¤1ï¼šè¯»å–æ•°æ®ï¼ˆå¾ˆå¿«ï¼Œå¾®ç§’çº§ï¼‰</span>
    <span class="hljs-type">char</span> buf[<span class="hljs-number">1024</span>];
    <span class="hljs-type">int</span> n = <span class="hljs-built_in">recv</span>(fd, buf, <span class="hljs-built_in">sizeof</span>(buf), <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æ­¥éª¤2ï¼šä¸šåŠ¡å¤„ç†ï¼ˆå¯èƒ½å¾ˆæ…¢ï¼Œæ¯«ç§’çº§ï¼‰</span>
    std::string result = <span class="hljs-built_in">expensive_processing</span>(buf, n);
    
    <span class="hljs-comment">// æ­¥éª¤3ï¼šå‘é€å“åº”</span>
    <span class="hljs-built_in">send</span>(fd, result.<span class="hljs-built_in">c_str</span>(), result.<span class="hljs-built_in">length</span>(), <span class="hljs-number">0</span>);
}
</code></pre>
<p><strong>å¤„ç†æ—¶é—´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ—¶é—´è½´ï¼š0ms     1ms     2ms     3ms     4ms     5ms
Socket1: <span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
Socket2:        ç­‰å¾…...<span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
Socket3:                ç­‰å¾…...........<span class="hljs-section">[recv]</span><span class="hljs-section">[proc...................]</span><span class="hljs-section">[send]</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šSocket2ã€3éœ€è¦ç­‰å¾…Socket1çš„ä¸šåŠ¡å¤„ç†å®Œæˆï¼</p>
<p><strong>è§£å†³æ–¹æ¡ˆï¼šReactor + çº¿ç¨‹æ± </strong></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä¼˜åŒ–çš„Reactoræ¶æ„</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HighPerformanceReactor</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// I/Oçº¿ç¨‹ï¼ˆä¸»Reactorï¼‰</span>
    std::thread io_thread;
    
    <span class="hljs-comment">// ä¸šåŠ¡çº¿ç¨‹æ± </span>
    ThreadPool worker_pool;
    
    <span class="hljs-comment">// ç”¨äºçº¿ç¨‹é—´é€šä¿¡çš„ä»»åŠ¡é˜Ÿåˆ—</span>
    moodycamel::ConcurrentQueue&lt;IORequest&gt; request_queue;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_read_event</span><span class="hljs-params">(<span class="hljs-type">int</span> fd)</span> </span>{
        <span class="hljs-comment">// 1. I/Oçº¿ç¨‹ï¼šå¿«é€Ÿè¯»å–æ•°æ®</span>
        IORequest req = <span class="hljs-built_in">read_data_nonblocking</span>(fd);
        
        <span class="hljs-comment">// 2. æäº¤åˆ°ä¸šåŠ¡çº¿ç¨‹æ± </span>
        worker_pool.<span class="hljs-built_in">enqueue</span>([<span class="hljs-keyword">this</span>, req]() {
            <span class="hljs-comment">// 3. Workerçº¿ç¨‹ï¼šå¤„ç†è€—æ—¶ä¸šåŠ¡</span>
            ProcessResult result = <span class="hljs-built_in">process_business</span>(req);
            
            <span class="hljs-comment">// 4. å°†å†™ä»»åŠ¡äº¤å›I/Oçº¿ç¨‹</span>
            io_thread.<span class="hljs-built_in">post</span>([fd, result]() {
                <span class="hljs-built_in">send_response</span>(fd, result);
            });
        });
        
        <span class="hljs-comment">// I/Oçº¿ç¨‹ç«‹å³è¿”å›ï¼Œç»§ç»­å¤„ç†å…¶ä»–äº‹ä»¶</span>
    }
};
</code></pre>
<p><strong>ä¼˜åŒ–åçš„æ—¶é—´çº¿</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">I</span>/<span class="hljs-selector-tag">O</span>çº¿ç¨‹: <span class="hljs-selector-attr">[recv1]</span><span class="hljs-selector-attr">[recv2]</span><span class="hljs-selector-attr">[recv3]</span><span class="hljs-selector-attr">[send1]</span><span class="hljs-selector-attr">[send2]</span><span class="hljs-selector-attr">[send3]</span>
<span class="hljs-selector-tag">Worker1</span>:         <span class="hljs-selector-attr">[proc1...........]</span>
<span class="hljs-selector-tag">Worker2</span>:         <span class="hljs-selector-attr">[proc2...........]</span>
<span class="hljs-selector-tag">Worker3</span>:         <span class="hljs-selector-attr">[proc3...........]</span>
</code></pre>
<h2 data-id="heading-12"><strong>ç¬¬å››ç« ï¼šå·¥ä¸šçº§Reactorå®ç°ç»†èŠ‚</strong></h2>
<h3 data-id="heading-13"><strong>4.1 å®Œæ•´çš„äº‹ä»¶çŠ¶æ€æœº</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">enum class</span> <span class="hljs-title class_">ConnectionState</span> {
    ACCEPTING,      <span class="hljs-comment">// æ¥å—è¿æ¥</span>
    READING,        <span class="hljs-comment">// è¯»å–æ•°æ®</span>
    PROCESSING,     <span class="hljs-comment">// å¤„ç†ä¸­ï¼ˆå¯èƒ½åœ¨Workerçº¿ç¨‹ï¼‰</span>
    WRITING,        <span class="hljs-comment">// å†™å…¥æ•°æ®</span>
    CLOSING         <span class="hljs-comment">// å…³é—­è¿æ¥</span>
};

<span class="hljs-keyword">class</span> <span class="hljs-title class_">Connection</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-type">int</span> fd;
    ConnectionState state;
    std::vector&lt;<span class="hljs-type">char</span>&gt; input_buffer;
    std::vector&lt;<span class="hljs-type">char</span>&gt; output_buffer;
    <span class="hljs-type">size_t</span> bytes_to_write;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">handle_event</span><span class="hljs-params">(EventType type)</span> </span>{
        <span class="hljs-keyword">switch</span>(state) {
            <span class="hljs-keyword">case</span> ConnectionState::READING:
                <span class="hljs-keyword">if</span>(type == EventType::READ) {
                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">read_data</span>() &gt; <span class="hljs-number">0</span>) {
                        <span class="hljs-comment">// æ•°æ®è¯»å¤Ÿä¸€ä¸ªå®Œæ•´è¯·æ±‚</span>
                        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">parse_complete</span>()) {
                            state = ConnectionState::PROCESSING;
                            <span class="hljs-built_in">submit_to_thread_pool</span>();
                        }
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// è¿æ¥å…³é—­æˆ–é”™è¯¯</span>
                        state = ConnectionState::CLOSING;
                    }
                }
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-keyword">case</span> ConnectionState::WRITING:
                <span class="hljs-keyword">if</span>(type == EventType::WRITE) {
                    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">write_data</span>() == output_buffer.<span class="hljs-built_in">size</span>()) {
                        <span class="hljs-comment">// æ•°æ®å…¨éƒ¨å‘é€å®Œæˆ</span>
                        <span class="hljs-keyword">if</span>(keep_alive) {
                            state = ConnectionState::READING;
                            <span class="hljs-built_in">reset_for_next_request</span>();
                        } <span class="hljs-keyword">else</span> {
                            state = ConnectionState::CLOSING;
                        }
                    }
                }
                <span class="hljs-keyword">break</span>;
                
            <span class="hljs-comment">// ... å…¶ä»–çŠ¶æ€å¤„ç†</span>
        }
    }
};
</code></pre>
<h3 data-id="heading-14"><strong>4.2 å†…å­˜ç®¡ç†ä¼˜åŒ–</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// å¯¹è±¡æ± é¿å…é¢‘ç¹new/delete</span>
<span class="hljs-keyword">template</span>&lt;<span class="hljs-keyword">typename</span> T&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionPool</span> {
<span class="hljs-keyword">private</span>:
    std::vector&lt;T*&gt; free_list;
    std::mutex lock;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function">T* <span class="hljs-title">acquire</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">guard</span><span class="hljs-params">(lock)</span></span>;
        <span class="hljs-keyword">if</span>(!free_list.<span class="hljs-built_in">empty</span>()) {
            T* obj = free_list.<span class="hljs-built_in">back</span>();
            free_list.<span class="hljs-built_in">pop_back</span>();
            <span class="hljs-keyword">return</span> obj;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">T</span>();
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">release</span><span class="hljs-params">(T* obj)</span> </span>{
        obj-&gt;<span class="hljs-built_in">reset</span>();  <span class="hljs-comment">// é‡ç½®çŠ¶æ€è€Œéé”€æ¯</span>
        <span class="hljs-function">std::lock_guard&lt;std::mutex&gt; <span class="hljs-title">guard</span><span class="hljs-params">(lock)</span></span>;
        free_list.<span class="hljs-built_in">push_back</span>(obj);
    }
};

<span class="hljs-comment">// ç¼“å†²åŒºè®¾è®¡</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Buffer</span> {
<span class="hljs-keyword">private</span>:
    <span class="hljs-comment">// ä½¿ç”¨è¿ç»­å†…å­˜å—ï¼Œé¿å…å°å†…å­˜åˆ†é…</span>
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> INITIAL_SIZE = <span class="hljs-number">1024</span>;
    <span class="hljs-type">static</span> <span class="hljs-keyword">constexpr</span> <span class="hljs-type">size_t</span> MAX_SIZE = <span class="hljs-number">65536</span>;
    
    std::unique_ptr&lt;<span class="hljs-type">char</span>[]&gt; data;
    <span class="hljs-type">size_t</span> capacity;
    <span class="hljs-type">size_t</span> read_index;
    <span class="hljs-type">size_t</span> write_index;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-comment">// ç¡®ä¿å®¹é‡ï¼ˆæŒ‡æ•°å¢é•¿ç­–ç•¥ï¼‰</span>
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ensure_capacity</span><span class="hljs-params">(<span class="hljs-type">size_t</span> need)</span> </span>{
        <span class="hljs-keyword">if</span>(write_index + need &lt;= capacity) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-type">size_t</span> new_capacity = std::<span class="hljs-built_in">max</span>(capacity * <span class="hljs-number">2</span>, 
                                      write_index - read_index + need);
        new_capacity = std::<span class="hljs-built_in">min</span>(new_capacity, MAX_SIZE);
        
        <span class="hljs-keyword">auto</span> new_data = std::<span class="hljs-built_in">make_unique</span>&lt;<span class="hljs-type">char</span>[]&gt;(new_capacity);
        <span class="hljs-comment">// å¤åˆ¶æœ‰æ•ˆæ•°æ®</span>
        std::<span class="hljs-built_in">copy</span>(data.<span class="hljs-built_in">get</span>() + read_index, 
                  data.<span class="hljs-built_in">get</span>() + write_index, 
                  new_data.<span class="hljs-built_in">get</span>());
        write_index -= read_index;
        read_index = <span class="hljs-number">0</span>;
        data = std::<span class="hljs-built_in">move</span>(new_data);
        capacity = new_capacity;
    }
};
</code></pre>
<h3 data-id="heading-15"><strong>4.3 æ€§èƒ½è°ƒä¼˜å‚æ•°</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Linuxå†…æ ¸å‚æ•°è°ƒä¼˜</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">tune_system_parameters</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-comment">// 1. æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</span>
    <span class="hljs-built_in">system</span>(<span class="hljs-string">"ulimit -n 1000000"</span>);
    
    <span class="hljs-comment">// 2. TCPå‚æ•°ä¼˜åŒ–</span>
    <span class="hljs-type">int</span> fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// å¯ç”¨TCP_NODELAYï¼ˆç¦ç”¨Nagleç®—æ³•ï¼‰</span>
    <span class="hljs-type">int</span> flag = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">setsockopt</span>(fd, IPPROTO_TCP, TCP_NODELAY, &amp;flag, <span class="hljs-built_in">sizeof</span>(flag));
    
    <span class="hljs-comment">// å¢å¤§æ¥æ”¶ç¼“å†²åŒº</span>
    <span class="hljs-type">int</span> recv_buf_size = <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>;  <span class="hljs-comment">// 1MB</span>
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_RCVBUF, 
               &amp;recv_buf_size, <span class="hljs-built_in">sizeof</span>(recv_buf_size));
    
    <span class="hljs-comment">// å¯ç”¨SO_REUSEPORTï¼ˆLinux 3.9+ï¼‰</span>
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEPORT, &amp;flag, <span class="hljs-built_in">sizeof</span>(flag));
    
    <span class="hljs-comment">// 3. ç½‘å¡é˜Ÿåˆ—è°ƒæ•´</span>
    <span class="hljs-comment">// ethtool -G eth0 rx 4096 tx 4096</span>
}

<span class="hljs-comment">// Reactorå†…éƒ¨å‚æ•°</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">ReactorConfig</span> {
    <span class="hljs-type">size_t</span> max_connections = <span class="hljs-number">1000000</span>;      <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
    <span class="hljs-type">size_t</span> io_threads = <span class="hljs-number">1</span>;                 <span class="hljs-comment">// I/Oçº¿ç¨‹æ•°ï¼ˆä¸»ä»Reactorï¼‰</span>
    <span class="hljs-type">size_t</span> worker_threads = std::thread::<span class="hljs-built_in">hardware_concurrency</span>();
    <span class="hljs-type">size_t</span> task_queue_size = <span class="hljs-number">10000</span>;        <span class="hljs-comment">// ä»»åŠ¡é˜Ÿåˆ—å¤§å°</span>
    <span class="hljs-type">size_t</span> buffer_size = <span class="hljs-number">16384</span>;            <span class="hljs-comment">// æ¯ä¸ªè¿æ¥çš„ç¼“å†²åŒºå¤§å°</span>
    <span class="hljs-type">int</span> epoll_timeout_ms = <span class="hljs-number">1</span>;              <span class="hljs-comment">// epoll_waitè¶…æ—¶æ—¶é—´</span>
    <span class="hljs-type">bool</span> use_et_mode = <span class="hljs-literal">true</span>;               <span class="hljs-comment">// ä½¿ç”¨è¾¹ç¼˜è§¦å‘</span>
};
</code></pre>
<h2 data-id="heading-16"><strong>ç¬¬äº”ç« ï¼šç°å®ä¸–ç•Œçš„æŒ‘æˆ˜ä¸è§£å†³æ–¹æ¡ˆ</strong></h2>
<h3 data-id="heading-17"><strong>5.1 æƒŠç¾¤é—®é¢˜ï¼ˆThundering Herdï¼‰</strong></h3>
<p><strong>é—®é¢˜</strong>ï¼šå¤šä¸ªè¿›ç¨‹/çº¿ç¨‹åŒæ—¶ç›‘å¬åŒä¸€ä¸ªç«¯å£ï¼Œå½“æ–°è¿æ¥åˆ°è¾¾æ—¶å…¨éƒ¨è¢«å”¤é†’ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Linux 3.9+ çš„SO_REUSEPORT</span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">setup_reuseport</span><span class="hljs-params">(<span class="hljs-type">int</span> port)</span> </span>{
    <span class="hljs-type">int</span> fd = <span class="hljs-built_in">socket</span>(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    
    <span class="hljs-type">int</span> reuse = <span class="hljs-number">1</span>;
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEADDR, &amp;reuse, <span class="hljs-built_in">sizeof</span>(reuse));
    <span class="hljs-built_in">setsockopt</span>(fd, SOL_SOCKET, SO_REUSEPORT, &amp;reuse, <span class="hljs-built_in">sizeof</span>(reuse));
    
    <span class="hljs-comment">// å†…æ ¸ä¼šè‡ªåŠ¨åˆ†é…è¿æ¥ç»™ä¸åŒçš„ç›‘å¬socket</span>
    <span class="hljs-keyword">return</span> fd;
}

<span class="hljs-comment">// æˆ–è€…ä½¿ç”¨accepté”</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AcceptMutex</span> {
<span class="hljs-keyword">private</span>:
    std::atomic&lt;<span class="hljs-type">bool</span>&gt; lock{<span class="hljs-literal">false</span>};
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">try_lock</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> !lock.<span class="hljs-built_in">exchange</span>(<span class="hljs-literal">true</span>, std::memory_order_acquire);
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">unlock</span><span class="hljs-params">()</span> </span>{
        lock.<span class="hljs-built_in">store</span>(<span class="hljs-literal">false</span>, std::memory_order_release);
    }
};
</code></pre>
<h3 data-id="heading-18"><strong>5.2 é•¿è¿æ¥ä¸å¿ƒè·³æœºåˆ¶</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConnectionManager</span> {
<span class="hljs-keyword">private</span>:
    std::unordered_map&lt;<span class="hljs-type">int</span>, std::shared_ptr&lt;Connection&gt;&gt; connections;
    std::priority_queue&lt;HeartbeatCheck&gt; heartbeat_queue;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">check_heartbeats</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">auto</span> now = std::chrono::steady_clock::<span class="hljs-built_in">now</span>();
        
        <span class="hljs-keyword">while</span>(!heartbeat_queue.<span class="hljs-built_in">empty</span>() &amp;&amp; 
              heartbeat_queue.<span class="hljs-built_in">top</span>().expiry_time &lt; now) {
            <span class="hljs-keyword">auto</span> conn = heartbeat_queue.<span class="hljs-built_in">top</span>().connection;
            heartbeat_queue.<span class="hljs-built_in">pop</span>();
            
            <span class="hljs-keyword">if</span>(conn-&gt;last_active + HEARTBEAT_TIMEOUT &lt; now) {
                <span class="hljs-comment">// å‘é€å¿ƒè·³åŒ…</span>
                <span class="hljs-built_in">send_heartbeat</span>(conn-&gt;fd);
                
                <span class="hljs-comment">// é‡æ–°åŠ å…¥é˜Ÿåˆ—ï¼Œç­‰å¾…å“åº”</span>
                heartbeat_queue.<span class="hljs-built_in">push</span>({
                    now + HEARTBEAT_INTERVAL,
                    conn
                });
            }
        }
    }
};
</code></pre>
<h3 data-id="heading-19"><strong>5.3 æµé‡æ§åˆ¶ä¸èƒŒå‹ï¼ˆBackpressureï¼‰</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">FlowController</span> {
<span class="hljs-keyword">private</span>:
    std::atomic&lt;<span class="hljs-type">size_t</span>&gt; current_connections{<span class="hljs-number">0</span>};
    std::atomic&lt;<span class="hljs-type">size_t</span>&gt; request_rate{<span class="hljs-number">0</span>};
    <span class="hljs-type">size_t</span> max_connections;
    <span class="hljs-type">size_t</span> max_request_rate;
    
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">should_accept_new_connection</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">size_t</span> conns = current_connections.<span class="hljs-built_in">load</span>();
        <span class="hljs-keyword">if</span>(conns &gt;= max_connections * <span class="hljs-number">0.9</span>) {
            <span class="hljs-comment">// è¿æ¥æ•°æ¥è¿‘ä¸Šé™ï¼Œå¼€å§‹é™æµ</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        current_connections.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">should_process_request</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-type">size_t</span> rate = request_rate.<span class="hljs-built_in">load</span>();
        <span class="hljs-keyword">if</span>(rate &gt; max_request_rate) {
            <span class="hljs-comment">// è¿”å›429 Too Many Requests</span>
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        request_rate.<span class="hljs-built_in">fetch_add</span>(<span class="hljs-number">1</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">request_completed</span><span class="hljs-params">()</span> </span>{
        request_rate.<span class="hljs-built_in">fetch_sub</span>(<span class="hljs-number">1</span>);
    }
};
</code></pre>
<h2 data-id="heading-20"><strong>ç¬¬å…­ç« ï¼šæ€§èƒ½å¯¹æ¯”ä¸åŸºå‡†æµ‹è¯•</strong></h2>
<h3 data-id="heading-21"><strong>6.1 ä¸åŒæ¨¡å‹æ€§èƒ½å¯¹æ¯”</strong></h3>






















































<table><thead><tr><th>æŒ‡æ ‡</th><th>å¤šçº¿ç¨‹é˜»å¡I/O</th><th>å•çº¿ç¨‹Reactor</th><th>Reactor+çº¿ç¨‹æ± </th><th>å¤šReactor</th></tr></thead><tbody><tr><td>æœ€å¤§è¿æ¥æ•°</td><td>~1000</td><td>10ä¸‡+</td><td>10ä¸‡+</td><td>100ä¸‡+</td></tr><tr><td>QPSï¼ˆechoï¼‰</td><td>5,000</td><td>50,000</td><td>50,000</td><td>200,000</td></tr><tr><td>QPSï¼ˆ10msä¸šåŠ¡ï¼‰</td><td>100</td><td>100</td><td>10,000</td><td>40,000</td></tr><tr><td>å†…å­˜ä½¿ç”¨</td><td>é«˜</td><td>æä½</td><td>ä½</td><td>ä¸­ç­‰</td></tr><tr><td>ç¼–ç¨‹å¤æ‚åº¦</td><td>ç®€å•</td><td>ä¸­ç­‰</td><td>å¤æ‚</td><td>å¤æ‚</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä½å¹¶å‘</td><td>é«˜å¹¶å‘I/O</td><td>é€šç”¨</td><td>æè‡´æ€§èƒ½</td></tr></tbody></table>
<h3 data-id="heading-22"><strong>6.2 å®é™…åŸºå‡†æµ‹è¯•æ•°æ®</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨wrkè¿›è¡Œå‹åŠ›æµ‹è¯•</span>
<span class="hljs-comment">// wrk -t12 -c1000 -d30s http://localhost:8080/</span>

<span class="hljs-comment">// æµ‹è¯•ç»“æœå¯¹æ¯”</span>
<span class="hljs-keyword">struct</span> <span class="hljs-title class_">BenchmarkResult</span> {
    std::string model;
    <span class="hljs-type">int</span> connections;
    <span class="hljs-type">int</span> threads;
    <span class="hljs-type">double</span> requests_per_second;
    <span class="hljs-type">double</span> latency_avg_ms;
    <span class="hljs-type">double</span> latency_max_ms;
    
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">print</span><span class="hljs-params">()</span> <span class="hljs-type">const</span> </span>{
        std::cout &lt;&lt; std::format(
            <span class="hljs-string">"Model: {}\n"</span>
            <span class="hljs-string">"Connections: {}\n"</span>
            <span class="hljs-string">"RPS: {:.1f}\n"</span>
            <span class="hljs-string">"Latency Avg: {:.2f}ms\n"</span>
            <span class="hljs-string">"Latency Max: {:.2f}ms\n\n"</span>,
            model, connections, requests_per_second,
            latency_avg_ms, latency_max_ms
        );
    }
};

<span class="hljs-comment">// ç¤ºä¾‹æ•°æ®</span>
std::vector&lt;BenchmarkResult&gt; results = {
    {<span class="hljs-string">"Thread-per-connection"</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">1000</span>, <span class="hljs-number">4800.5</span>, <span class="hljs-number">12.3</span>, <span class="hljs-number">210.5</span>},
    {<span class="hljs-string">"Single Reactor"</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">1</span>, <span class="hljs-number">52300.2</span>, <span class="hljs-number">1.2</span>, <span class="hljs-number">15.8</span>},
    {<span class="hljs-string">"Reactor+ThreadPool"</span>, <span class="hljs-number">10000</span>, <span class="hljs-number">8</span>, <span class="hljs-number">49800.7</span>, <span class="hljs-number">2.5</span>, <span class="hljs-number">32.4</span>},
    {<span class="hljs-string">"Multi-Reactor"</span>, <span class="hljs-number">100000</span>, <span class="hljs-number">4</span>, <span class="hljs-number">187600.4</span>, <span class="hljs-number">0.8</span>, <span class="hljs-number">12.7</span>}
};
</code></pre>
<h2 data-id="heading-23"><strong>ç¬¬ä¸ƒç« ï¼šç°ä»£æ¼”è¿›ä¸æœªæ¥è¶‹åŠ¿</strong></h2>
<h3 data-id="heading-24"><strong>7.1 ä»Reactoråˆ°Proactor</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Windows IOCPï¼ˆå®Œæˆç«¯å£ï¼‰ç¤ºä¾‹</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProactorServer</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">start</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// åˆ›å»ºIOCPå®Œæˆç«¯å£</span>
        HANDLE iocp = <span class="hljs-built_in">CreateIoCompletionPort</span>(INVALID_HANDLE_VALUE, 
                                            <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
        
        <span class="hljs-comment">// æŠ•é€’å¼‚æ­¥æ“ä½œ</span>
        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) {
            OVERLAPPED* overlapped = <span class="hljs-built_in">create_overlapped</span>();
            <span class="hljs-built_in">WSARecv</span>(socket, &amp;buffer, <span class="hljs-number">1</span>, &amp;bytes_recvd, 
                   &amp;flags, overlapped, <span class="hljs-literal">NULL</span>);
        }
        
        <span class="hljs-comment">// ç­‰å¾…å®Œæˆé€šçŸ¥</span>
        <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>) {
            DWORD bytes_transferred;
            ULONG_PTR completion_key;
            OVERLAPPED* overlapped;
            
            <span class="hljs-built_in">GetQueuedCompletionStatus</span>(iocp, &amp;bytes_transferred,
                                     &amp;completion_key, &amp;overlapped, INFINITE);
            
            <span class="hljs-comment">// æ“ä½œå·²å®Œæˆï¼Œç›´æ¥å¤„ç†ç»“æœ</span>
            <span class="hljs-built_in">process_completion</span>(completion_key, bytes_transferred, overlapped);
        }
    }
};
</code></pre>
<h3 data-id="heading-25"><strong>7.2 C++20åç¨‹ä¸io_uring</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// ä½¿ç”¨C++20åç¨‹çš„å¼‚æ­¥æœåŠ¡å™¨</span>
<span class="hljs-function">async_task&lt;<span class="hljs-type">void</span>&gt; <span class="hljs-title">handle_connection</span><span class="hljs-params">(io_uring&amp; ring, <span class="hljs-type">int</span> client_fd)</span> </span>{
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">4096</span>];
    
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// å¼‚æ­¥è¯»å–ï¼ˆéé˜»å¡ï¼‰</span>
        <span class="hljs-type">ssize_t</span> n = <span class="hljs-keyword">co_await</span> <span class="hljs-built_in">async_read</span>(ring, client_fd, 
                                       buffer, <span class="hljs-built_in">sizeof</span>(buffer));
        
        <span class="hljs-comment">// å¤„ç†è¯·æ±‚ï¼ˆå¯ä»¥åœ¨çº¿ç¨‹æ± ä¸­ï¼‰</span>
        std::string response = <span class="hljs-keyword">co_await</span> <span class="hljs-built_in">async_process</span>(buffer, n);
        
        <span class="hljs-comment">// å¼‚æ­¥å†™å…¥</span>
        <span class="hljs-function"><span class="hljs-keyword">co_await</span> <span class="hljs-title">async_write</span><span class="hljs-params">(ring, client_fd, 
                            response.data(), response.size())</span></span>;
        
    } <span class="hljs-built_in">catch</span>(<span class="hljs-type">const</span> std::exception&amp; e) {
        std::cerr &lt;&lt; <span class="hljs-string">"Connection error: "</span> &lt;&lt; e.<span class="hljs-built_in">what</span>() &lt;&lt; std::endl;
    }
    
    ::<span class="hljs-built_in">close</span>(client_fd);
}

<span class="hljs-comment">// io_uring æ˜¯ç°ä»£Linuxçš„é«˜æ€§èƒ½å¼‚æ­¥I/Oæ¥å£</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">setup_io_uring</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring</span> ring;
    <span class="hljs-built_in">io_uring_queue_init</span>(<span class="hljs-number">32</span>, &amp;ring, <span class="hljs-number">0</span>);
    
    <span class="hljs-comment">// æäº¤å¤šä¸ªI/Oè¯·æ±‚</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; i++) {
        <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring_sqe</span>* sqe = <span class="hljs-built_in">io_uring_get_sqe</span>(&amp;ring);
        <span class="hljs-built_in">io_uring_prep_read</span>(sqe, fd, buffer, size, offset);
        <span class="hljs-built_in">io_uring_sqe_set_data</span>(sqe, user_data);
    }
    
    <span class="hljs-comment">// æ‰¹é‡æäº¤</span>
    <span class="hljs-built_in">io_uring_submit</span>(&amp;ring);
    
    <span class="hljs-comment">// ç­‰å¾…å®Œæˆ</span>
    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">io_uring_cqe</span>* cqe;
    <span class="hljs-built_in">io_uring_wait_cqe</span>(&amp;ring, &amp;cqe);
}
</code></pre>
<h2 data-id="heading-26"><strong>ç¬¬å…«ç« ï¼šæ€»ç»“ä¸æœ€ä½³å®è·µ</strong></h2>
<h3 data-id="heading-27"><strong>8.1 Reactoræ¨¡å¼çš„æ ¸å¿ƒä»·å€¼</strong></h3>
<ol>
<li><strong>èµ„æºæ•ˆç‡</strong>ï¼šç”¨å°‘é‡çº¿ç¨‹æœåŠ¡å¤§é‡è¿æ¥</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šè¿æ¥æ•°å¢é•¿æ—¶æ€§èƒ½ä¸‹é™ç¼“æ…¢</li>
<li><strong>å“åº”æ€§</strong>ï¼šé¿å…å•ä¸ªæ…¢è¿æ¥å½±å“å…¶ä»–è¿æ¥</li>
<li><strong>æ¨¡å—åŒ–</strong>ï¼šæ¸…æ™°çš„å…³æ³¨ç‚¹åˆ†ç¦»</li>
</ol>
<h3 data-id="heading-28"><strong>8.2 å®æ–½å»ºè®®</strong></h3>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// Reactorå®æ–½æ£€æŸ¥æ¸…å•</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ReactorChecklist</span> {
<span class="hljs-keyword">public</span>:
    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">checklist</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// 1. é€‰æ‹©åˆé€‚çš„I/Oå¤šè·¯å¤ç”¨å™¨</span>
        <span class="hljs-comment">//    - Linux: epoll (ETæ¨¡å¼)</span>
        <span class="hljs-comment">//    - BSD: kqueue</span>
        <span class="hljs-comment">//    - Windows: IOCPï¼ˆå®é™…æ˜¯Proactorï¼‰</span>
        
        <span class="hljs-comment">// 2. ä½¿ç”¨éé˜»å¡I/O</span>
        <span class="hljs-built_in">set_nonblocking</span>(fd);
        
        <span class="hljs-comment">// 3. å®ç°è¿æ¥çŠ¶æ€æœº</span>
        <span class="hljs-comment">//    æ¯ä¸ªè¿æ¥ç»´æŠ¤æ˜ç¡®çš„çŠ¶æ€</span>
        
        <span class="hljs-comment">// 4. åˆ†ç¦»I/Oå’Œä¸šåŠ¡å¤„ç†</span>
        <span class="hljs-comment">//    I/Oçº¿ç¨‹åªåšI/Oï¼Œä¸šåŠ¡äº¤ç»™çº¿ç¨‹æ± </span>
        
        <span class="hljs-comment">// 5. å®ç°ä¼˜é›…å…³é—­</span>
        <span class="hljs-comment">//    æ”¯æŒå¹³æ»‘é‡å¯</span>
        
        <span class="hljs-comment">// 6. æ·»åŠ ç›‘æ§æŒ‡æ ‡</span>
        <span class="hljs-comment">//    è¿æ¥æ•°ã€QPSã€å»¶è¿Ÿã€é˜Ÿåˆ—é•¿åº¦</span>
        
        <span class="hljs-comment">// 7. å®æ–½é™æµå’Œç†”æ–­</span>
        <span class="hljs-comment">//    é˜²æ­¢è¿‡è½½</span>
        
        <span class="hljs-comment">// 8. è¿›è¡Œå‹åŠ›æµ‹è¯•</span>
        <span class="hljs-comment">//    æ‰¾åˆ°ç³»ç»Ÿç“¶é¢ˆ</span>
    }
};
</code></pre>
<h3 data-id="heading-29"><strong>8.3 ä½•æ—¶é€‰æ‹©Reactor</strong></h3>
<p><strong>é€‚åˆåœºæ™¯</strong>ï¼š</p>
<ul>
<li>é«˜å¹¶å‘è¿æ¥ï¼ˆ&gt;1000ï¼‰</li>
<li>I/Oå¯†é›†å‹åº”ç”¨</li>
<li>éœ€è¦ä½å»¶è¿Ÿå“åº”</li>
<li>é•¿è¿æ¥æœåŠ¡ï¼ˆå¦‚èŠå¤©ã€æ¨é€ï¼‰</li>
</ul>
<p><strong>ä¸é€‚åˆåœºæ™¯</strong>ï¼š</p>
<ul>
<li>æä½å¹¶å‘ï¼ˆ&lt;100ï¼‰</li>
<li>CPUå¯†é›†å‹è®¡ç®—</li>
<li>ç®€å•çš„ä¸€æ¬¡æ€§è¯·æ±‚</li>
</ul>
<h2 data-id="heading-30"><strong>ç»“è¯­</strong></h2>
<p>Reactoræ¨¡å¼ä¸æ˜¯é“¶å¼¹ï¼Œä½†å®ƒè§£å†³äº†C10Kç”šè‡³C100Ké—®é¢˜çš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚ä»<code>select</code>åˆ°<code>epoll</code>ï¼Œä»å•Reactoråˆ°å¤šReactorï¼Œä»åŒæ­¥åˆ°å¼‚æ­¥ï¼Œç½‘ç»œç¼–ç¨‹çš„æ¼”è¿›å§‹ç»ˆå›´ç»•ä¸€ä¸ªæ ¸å¿ƒç›®æ ‡ï¼š<strong>ç”¨æ›´å°‘çš„èµ„æºæœåŠ¡æ›´å¤šçš„è¿æ¥</strong>ã€‚</p>
<p>ç†è§£Reactorä¸ä»…æ˜¯ä¸ºäº†å†™å‡ºé«˜æ€§èƒ½æœåŠ¡å™¨ï¼Œæ›´æ˜¯ä¸ºäº†æŒæ¡äº‹ä»¶é©±åŠ¨ç¼–ç¨‹çš„æ€æƒ³ã€‚è¿™ç§æ€æƒ³å·²ç»æ¸—é€åˆ°ç°ä»£è½¯ä»¶çš„å„ä¸ªå±‚é¢ï¼Œä»å‰ç«¯çš„React/Vueï¼Œåˆ°åç«¯çš„Node.js/Nginxï¼Œå†åˆ°æ“ä½œç³»ç»Ÿçš„GUIäº‹ä»¶å¾ªç¯ã€‚</p>
<p>æ­£å¦‚è®¡ç®—æœºç§‘å­¦å®¶Doug McIlroyæ‰€è¯´ï¼š"åšä¸€ä»¶äº‹æƒ…ï¼ŒæŠŠå®ƒåšå¥½"ã€‚Reactoræ¨¡å¼æ­£æ˜¯è¿™ä¸€å“²å­¦åœ¨ç½‘ç»œç¼–ç¨‹ä¸­çš„å®Œç¾ä½“ç°â€”â€”å®ƒä¸“æ³¨äºäº‹ä»¶åˆ†å‘è¿™ä¸€ä»¶äº‹ï¼Œå¹¶åšåˆ°äº†æè‡´ã€‚</p>
<hr/>
<p><strong>è¿›ä¸€æ­¥é˜…è¯»</strong>ï¼š</p>
<ol>
<li>ã€ŠUNIXç½‘ç»œç¼–ç¨‹ å·1ï¼šå¥—æ¥å­—è”ç½‘APIã€‹</li>
<li>ã€ŠLinuxå¤šçº¿ç¨‹æœåŠ¡ç«¯ç¼–ç¨‹ã€‹</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»ç†è®ºåˆ°å®è·µï¼šæ„å»ºä½ çš„AIè¯­éŸ³æ¡Œé¢åŠ©æ‰‹ï¼ˆDemoæ¼”ç¤ºï¼‰]]></title>    <link>https://juejin.cn/post/7578723693825392676</link>    <guid>https://juejin.cn/post/7578723693825392676</guid>    <pubDate>2025-12-01T14:19:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578723693825392676" data-draft-id="7578723693825212452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»ç†è®ºåˆ°å®è·µï¼šæ„å»ºä½ çš„AIè¯­éŸ³æ¡Œé¢åŠ©æ‰‹ï¼ˆDemoæ¼”ç¤ºï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T14:19:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»ç†è®ºåˆ°å®è·µï¼šæ„å»ºä½ çš„AIè¯­éŸ³æ¡Œé¢åŠ©æ‰‹ï¼ˆDemoæ¼”ç¤ºï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:19:08.000Z" title="Mon Dec 01 2025 14:19:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡ä»â€œå¯è¿è¡Œâ€çš„å®è·µè§’åº¦ï¼Œæ¢ç´¢åˆ©ç”¨Pythonä¸AIæŠ€æœ¯å®ç°è¯­éŸ³æ§åˆ¶Windowsæ“ä½œç³»ç»Ÿçš„æ–¹æ¡ˆã€‚æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šæ„å»ºä¸€ä¸ªå®Œæ•´çš„è¯­éŸ³æ§åˆ¶åŠ©æ‰‹ï¼Œæ˜¯<strong>å°†â€œèƒ½å¬ä¼šè¯´â€çš„è¯­éŸ³æ¨¡å‹ä¸â€œèƒ½æ“ä½œâ€çš„ç³»ç»Ÿæ‰§è¡Œå™¨ç›¸ç»“åˆ</strong>çš„è¿‡ç¨‹ã€‚æœ¬æ–‡å°†ç»•è¿‡å¤æ‚çš„åº•å±‚ç†è®ºï¼Œç›´æ¥æä¾›ä¸€æ¡åŸºäºå¼€æºæŠ€æœ¯çš„å®è·µè·¯å¾„ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå¯è¿è¡Œçš„ä»£ç Demoï¼Œå±•ç¤ºå¦‚ä½•å°†è‡ªç„¶è¯­è¨€æŒ‡ä»¤è½¬åŒ–ä¸ºå…·ä½“çš„ç³»ç»Ÿæ“ä½œã€‚</p>
<h3 data-id="heading-0"><strong>ä¸€ã€æ„å»ºâ€œå£-è„‘-æ‰‹â€ååŒç³»ç»Ÿ</strong></h3>
<p>ä¸€ä¸ªå®Œæ•´çš„è¯­éŸ³æ§åˆ¶è®¡ç®—æœºç³»ç»Ÿï¼Œå¯ä»¥ç±»æ¯”ä¸ºäººçš„â€œå£-è„‘-æ‰‹â€ååŒï¼š</p>
<ol>
<li><strong>å£ï¼ˆæ„ŸçŸ¥å±‚ï¼‰</strong>ï¼šè´Ÿè´£â€œå¬â€å’Œâ€œè¯´â€ã€‚ä½¿ç”¨éº¦å…‹é£æ¥æ”¶è¯­éŸ³ï¼Œå¹¶é€šè¿‡<strong>è¯­éŸ³è¯†åˆ«ï¼ˆSTTï¼‰</strong> æŠ€æœ¯è½¬ä¸ºæ–‡æœ¬ï¼›å°†AIçš„å›å¤é€šè¿‡<strong>è¯­éŸ³åˆæˆï¼ˆTTSï¼‰</strong> æŠ€æœ¯æ’­æŠ¥å‡ºæ¥ã€‚</li>
<li><strong>è„‘ï¼ˆè®¤çŸ¥å±‚ï¼‰</strong>ï¼šè´Ÿè´£â€œæ€è€ƒâ€ã€‚ä½¿ç”¨<strong>å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰</strong> ç†è§£ç”¨æˆ·çš„æ–‡æœ¬æŒ‡ä»¤ï¼Œå¹¶å°†å…¶è§£æä¸ºè®¡ç®—æœºå¯ä»¥æ‰§è¡Œçš„ä¸€ç³»åˆ—<strong>ç»“æ„åŒ–æ“ä½œå‘½ä»¤</strong>ã€‚</li>
<li><strong>æ‰‹ï¼ˆæ‰§è¡Œå±‚ï¼‰</strong>ï¼šè´Ÿè´£â€œåšâ€ã€‚é€šè¿‡<strong>ç³»ç»Ÿè‡ªåŠ¨åŒ–å·¥å…·</strong>æ¥æ”¶ç»“æ„åŒ–å‘½ä»¤ï¼Œå¹¶å®é™…æ“æ§Windowsçš„å›¾å½¢ç•Œé¢ã€åº”ç”¨ç¨‹åºæˆ–æ–‡ä»¶ç³»ç»Ÿã€‚</li>
</ol>
<p>å¾®è½¯æ­£åœ¨å…¶â€œæ™ºèƒ½ä½“æ“ä½œç³»ç»Ÿâ€çš„æ„¿æ™¯ä¸­ç³»ç»Ÿæ€§åœ°æ•´åˆè¿™ä¸‰å±‚ï¼Œä¾‹å¦‚é€šè¿‡â€œHey Copilotâ€å”¤é†’è¯ã€Copilot Voice/Visionè¿›è¡Œæ„ŸçŸ¥å’Œç†è§£ï¼Œå¹¶é€šè¿‡æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰è®©AIå®‰å…¨åœ°æ“ä½œç³»ç»Ÿã€‚è€Œæˆ‘ä»¬çš„Demoå°†é‡‡ç”¨ä¸€ä¸ªæ›´çµæ´»ã€å¯å®Œå…¨è‡ªå®šä¹‰çš„å¼€æºæ–¹æ¡ˆæ¥å®ç°ã€‚</p>
<h3 data-id="heading-1"><strong>äºŒã€æŠ€æœ¯æ–¹æ¡ˆé€‰å‹</strong></h3>
<p>ä¸ºäº†å®ç°é«˜è‡ªç”±åº¦çš„æ§åˆ¶ï¼Œæˆ‘ä»¬æ”¾å¼ƒå¯¹ç‰¹å®šå•†ä¸šAPIï¼ˆå¦‚ç‰¹å®šäº‘ç«¯LLMï¼‰çš„å¼ºä¾èµ–ï¼Œé€‰æ‹©æ¨¡å—åŒ–çš„å¼€æºæ–¹æ¡ˆï¼Œä¾¿äºä½ æœªæ¥æ‰©å±•å’Œä¿®æ”¹ã€‚</p>
<p><strong>è¡¨1ï¼šDemoæŠ€æœ¯æ ˆé€‰å‹ä¸è¯´æ˜</strong></p>









































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">æ¨èæŠ€æœ¯/åº“</th><th align="left">ä½œç”¨</th><th align="left">å¤‡æ³¨</th></tr></thead><tbody><tr><td align="left"><strong>è¯­éŸ³è¯†åˆ« (STT)</strong></td><td align="left"><code>SpeechRecognition</code> + <code>PyAudio</code></td><td align="left">å½•åˆ¶éº¦å…‹é£éŸ³é¢‘å¹¶è½¬æ¢ä¸ºæ–‡æœ¬</td><td align="left">åŸºç¡€æ˜“ç”¨ï¼Œå¯ä½¿ç”¨ç¦»çº¿çš„ <code>Vosk</code> å¼•æ“æ›¿æ¢ä»¥è·å¾—æ›´å¥½éšç§æ€§ã€‚</td></tr><tr><td align="left"><strong>å¤§è¯­è¨€æ¨¡å‹ (LLM)</strong></td><td align="left"><strong>Ollama</strong>ï¼ˆæœ¬åœ°è¿è¡Œï¼‰</td><td align="left">ç†è§£æŒ‡ä»¤ï¼Œç”Ÿæˆæ“ä½œè§„åˆ’</td><td align="left">å¯åœ¨æœ¬åœ°å…è´¹è¿è¡Œå¦‚ <code>Llama 3.2</code>ã€<code>Qwen2.5</code> ç­‰è½»é‡æ¨¡å‹ï¼Œå“åº”å¿«ä¸”éšç§æ— å¿§ã€‚</td></tr><tr><td align="left"><strong>ç³»ç»Ÿæ‰§è¡Œå™¨</strong></td><td align="left"><strong><code>Windows-MCP</code> æœåŠ¡å™¨</strong></td><td align="left">å°†AIæŒ‡ä»¤è½¬åŒ–ä¸ºçœŸå®ç³»ç»Ÿæ“ä½œ</td><td align="left">è¯¥é¡¹ç›®é€šè¿‡ç³»ç»ŸAPIç›´æ¥æ§åˆ¶Windowsï¼Œæ¯”æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»æ›´ç¨³å®šå¯é ã€‚</td></tr><tr><td align="left"><strong>è¯­éŸ³åˆæˆ (TTS)</strong></td><td align="left"><code>pyttsx3</code></td><td align="left">å°†AIçš„æ–‡æœ¬å›å¤è½¬ä¸ºè¯­éŸ³æ’­æŠ¥</td><td align="left">ç³»ç»Ÿå†…ç½®ï¼Œæ— éœ€ç½‘ç»œã€‚ä¹Ÿå¯ç”¨æ•ˆæœæ›´å¥½çš„ <code>Piper</code>ã€‚</td></tr><tr><td align="left"><strong>æµç¨‹åè°ƒ</strong></td><td align="left"><strong>Pythonä¸»ç¨‹åº</strong></td><td align="left">ä¸²è”ä»¥ä¸Šæ‰€æœ‰æ¨¡å—ï¼Œå®ç°å®Œæ•´å·¥ä½œæµ</td><td align="left">ä»£ç é€»è¾‘çš„ä¸­æ¢ã€‚</td></tr></tbody></table>
<p>è¿™å¥—æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äº<strong>å®Œå…¨æœ¬åœ°è¿è¡Œ</strong>ï¼Œä¿æŠ¤éšç§ï¼Œä¸”<strong>æ‰§è¡Œç²¾å‡†å¯é </strong>ï¼ˆä¾é <code>Windows-MCP</code>è€Œéè§†è§‰è¯†åˆ«ï¼‰ã€‚å…¶å¹³å‡æ“ä½œå»¶è¿Ÿåœ¨1.5-2.3ç§’ï¼Œç³»ç»Ÿå ç”¨ä½äº50MBå†…å­˜ï¼Œå…·å¤‡å®ç”¨æ€§ã€‚</p>
<h3 data-id="heading-2"><strong>ä¸‰ã€å®æˆ˜Demo-æ–‡ä»¶æ•´ç†åŠ©æ‰‹</strong></h3>
<p>ä¸‹é¢æˆ‘ä»¬æ„å»ºä¸€ä¸ªâ€œæ–‡ä»¶æ•´ç†åŠ©æ‰‹â€Demoã€‚å®ƒçš„åŠŸèƒ½æ˜¯ï¼š<strong>å½“ä½ å¯¹ç€éº¦å…‹é£è¯´â€œè¯·æŠŠæ¡Œé¢ä¸Šæ‰€æœ‰æˆªå›¾æ–‡ä»¶ç§»åˆ°â€˜æˆªå›¾â€™æ–‡ä»¶å¤¹é‡Œâ€ï¼ŒAIå°†è‡ªåŠ¨å®Œæˆæ­¤ä»»åŠ¡å¹¶è¯­éŸ³å›å¤ä½ ã€‚</strong></p>
<h4 data-id="heading-3"><strong>ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡</strong></h4>
<ol>
<li><strong>å®‰è£…Python</strong>ï¼šç¡®ä¿ç³»ç»Ÿå·²å®‰è£…Python 3.10æˆ–ä»¥ä¸Šç‰ˆæœ¬ã€‚</li>
<li><strong>å®‰è£…Ollamaå¹¶æ‹‰å–æ¨¡å‹</strong>ï¼š
<ul>
<li>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Follama.com%2F" target="_blank" title="https://ollama.com/" ref="nofollow noopener noreferrer">Ollamaå®˜ç½‘</a> ä¸‹è½½å¹¶å®‰è£…ã€‚</li>
<li>æ‰“å¼€å‘½ä»¤è¡Œï¼Œè¿è¡Œ <code>ollama run llama3.2:3b</code> æ¥ä¸‹è½½å¹¶è¿è¡Œä¸€ä¸ªè½»é‡çº§æ¨¡å‹ã€‚</li>
</ul>
</li>
<li><strong>éƒ¨ç½²Windows-MCPæœåŠ¡å™¨</strong>ï¼ˆç³»ç»Ÿçš„â€œæ‰‹â€ï¼‰ï¼š
<ul>
<li>æ‰“å¼€å‘½ä»¤è¡Œï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li>
</ul>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/CursorTouch/Windows-MCP.git
<span class="hljs-built_in">cd</span> Windows-MCP
uv <span class="hljs-built_in">sync</span>  <span class="hljs-comment"># è‡ªåŠ¨å®‰è£…ä¾èµ–</span>
uv run server  <span class="hljs-comment"># å¯åŠ¨MCPæœåŠ¡å™¨ï¼Œä¿æŒæ­¤çª—å£è¿è¡Œ</span>
</code></pre>
</li>
<li><strong>å®‰è£…Demoæ‰€éœ€Pythonåº“</strong>ï¼š
<pre><code class="hljs language-bash" lang="bash">pip install speechrecognition pyaudio pyttsx3 requests
</code></pre>
</li>
</ol>
<h4 data-id="heading-4"><strong>ç¬¬äºŒæ­¥ï¼šç¼–å†™æ ¸å¿ƒPythonä»£ç </strong></h4>
<p>åˆ›å»ºä¸€ä¸ªåä¸º <code>voice_desktop_assistant.py</code> çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç ã€‚è¿™æ®µä»£ç æ¸…æ™°åœ°ä½“ç°äº†â€œå£-è„‘-æ‰‹â€çš„ååŒæµç¨‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> speech_recognition <span class="hljs-keyword">as</span> sr
<span class="hljs-keyword">import</span> pyttsx3
<span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> json
<span class="hljs-keyword">import</span> time

<span class="hljs-comment"># ========== åˆå§‹åŒ–â€œå£â€ï¼ˆè¯­éŸ³æ¨¡å—ï¼‰ ==========</span>
recognizer = sr.Recognizer()
tts_engine = pyttsx3.init()

<span class="hljs-keyword">def</span> <span class="hljs-title function_">listen</span>():
    <span class="hljs-string">"""ç›‘å¬éº¦å…‹é£ï¼Œå°†è¯­éŸ³è½¬ä¸ºæ–‡æœ¬"""</span>
    <span class="hljs-keyword">with</span> sr.Microphone() <span class="hljs-keyword">as</span> source:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"è¯·è¯´å‡ºæ‚¨çš„æŒ‡ä»¤..."</span>)
        recognizer.adjust_for_ambient_noise(source)
        audio = recognizer.listen(source, timeout=<span class="hljs-number">5</span>, phrase_time_limit=<span class="hljs-number">10</span>)
    <span class="hljs-keyword">try</span>:
        text = recognizer.recognize_google(audio, language=<span class="hljs-string">'zh-CN'</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¯†åˆ«ç»“æœ: <span class="hljs-subst">{text}</span>"</span>)
        <span class="hljs-keyword">return</span> text
    <span class="hljs-keyword">except</span> sr.UnknownValueError:
        speak(<span class="hljs-string">"æŠ±æ­‰ï¼Œæˆ‘æ²¡æœ‰å¬æ¸…æ¥šã€‚"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
    <span class="hljs-keyword">except</span> sr.RequestError:
        speak(<span class="hljs-string">"è¯­éŸ³æœåŠ¡ä¼¼ä¹å‡ºé”™äº†ã€‚"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">speak</span>(<span class="hljs-params">text</span>):
    <span class="hljs-string">"""ç”¨è¯­éŸ³æ’­æŠ¥æ–‡æœ¬"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"AI: <span class="hljs-subst">{text}</span>"</span>)
    tts_engine.say(text)
    tts_engine.runAndWait()

<span class="hljs-comment"># ========== åˆå§‹åŒ–â€œè„‘â€ä¸â€œæ‰‹â€çš„é€šä¿¡ ==========</span>
<span class="hljs-comment"># Windows-MCP æœåŠ¡å™¨åœ°å€ï¼ˆé»˜è®¤è¿è¡Œåœ¨æœ¬æœºï¼‰</span>
MCP_SERVER_URL = <span class="hljs-string">"http://127.0.0.1:8080"</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">ask_ai_to_plan</span>(<span class="hljs-params">user_command</span>):
    <span class="hljs-string">"""
    å°†ç”¨æˆ·æŒ‡ä»¤å‘é€ç»™æœ¬åœ°çš„Ollama LLMï¼Œè¦æ±‚å®ƒç”ŸæˆWindows-MCPèƒ½ç†è§£çš„å‘½ä»¤åºåˆ—ã€‚
    æç¤ºè¯ï¼ˆPromptï¼‰å·¥ç¨‹æ˜¯å…³é”®ï¼Œå®ƒæŒ‡å¯¼AIå¦‚ä½•æ€è€ƒã€‚
    """</span>
    <span class="hljs-comment"># ç²¾å¿ƒè®¾è®¡çš„æç¤ºè¯ï¼Œè®©AIæ‰®æ¼”ä¸€ä¸ªWindowsè‡ªåŠ¨åŒ–ä¸“å®¶</span>
    system_prompt = <span class="hljs-string">"""ä½ æ˜¯ä¸€ä¸ªWindowsæ¡Œé¢è‡ªåŠ¨åŒ–åŠ©æ‰‹ã€‚ä½ çš„ä»»åŠ¡æ˜¯å°†ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œè§£æä¸ºä¸€ç³»åˆ—å¯ä»¥ç”±Windows-MCPå·¥å…·æ‰§è¡Œçš„å…·ä½“ã€å®‰å…¨çš„æ“ä½œæ­¥éª¤ã€‚
è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹JSONæ ¼å¼è¾“å‡ºï¼Œä¸”åªè¾“å‡ºè¿™ä¸ªJSONå¯¹è±¡ï¼š
{
  "plan": ["æ­¥éª¤1çš„ç®€è¦æè¿°", "æ­¥éª¤2çš„ç®€è¦æè¿°", ...],
  "commands": [
    {"tool": "å·¥å…·å1", "params": {"å‚æ•°å": "å‚æ•°å€¼"}},
    {"tool": "å·¥å…·å2", "params": {"å‚æ•°å": "å‚æ•°å€¼"}}
  ]
}
å¯ç”¨çš„Windows-MCPå·¥å…·ç¤ºä¾‹ï¼š
- `list_files`: åˆ—å‡ºç›®å½•æ–‡ä»¶ã€‚å‚æ•°: {"path": "ç›®å½•è·¯å¾„"}
- `move_file`: ç§»åŠ¨æ–‡ä»¶ã€‚å‚æ•°: {"source": "æºæ–‡ä»¶è·¯å¾„", "destination": "ç›®æ ‡è·¯å¾„"}
- `create_folder`: åˆ›å»ºæ–‡ä»¶å¤¹ã€‚å‚æ•°: {"path": "æ–‡ä»¶å¤¹è·¯å¾„"}
è¯·ç¡®ä¿è·¯å¾„ä½¿ç”¨åŒåæ–œæ æˆ–æ­£æ–œæ ï¼Œä¾‹å¦‚ï¼šC:\\Users\\Name\\Desktop æˆ– C:/Users/Name/Desktopã€‚
æŒ‡ä»¤ï¼š"""</span>
    
    full_prompt = system_prompt + user_command
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å‘é€è¯·æ±‚åˆ°æœ¬åœ°è¿è¡Œçš„Ollamaæ¨¡å‹</span>
        response = requests.post(
            <span class="hljs-string">'http://localhost:11434/api/generate'</span>,
            json={
                <span class="hljs-string">"model"</span>: <span class="hljs-string">"llama3.2:3b"</span>, <span class="hljs-comment"># ä¸ä½ è¿è¡Œçš„æ¨¡å‹åç§°ä¸€è‡´</span>
                <span class="hljs-string">"prompt"</span>: full_prompt,
                <span class="hljs-string">"stream"</span>: <span class="hljs-literal">False</span>,
                <span class="hljs-string">"options"</span>: {<span class="hljs-string">"temperature"</span>: <span class="hljs-number">0.1</span>} <span class="hljs-comment"># ä½éšæœºæ€§ï¼Œç¡®ä¿è¾“å‡ºç¨³å®š</span>
            }
        )
        response.raise_for_status()
        <span class="hljs-comment"># ä»å“åº”ä¸­æå–AIç”Ÿæˆçš„æ–‡æœ¬</span>
        ai_response_text = response.json()[<span class="hljs-string">'response'</span>]
        <span class="hljs-comment"># æ‰¾åˆ°JSONéƒ¨åˆ†ï¼ˆé˜²æ­¢AIè¾“å‡ºé¢å¤–è§£é‡Šï¼‰</span>
        start = ai_response_text.find(<span class="hljs-string">'{'</span>)
        end = ai_response_text.rfind(<span class="hljs-string">'}'</span>) + <span class="hljs-number">1</span>
        <span class="hljs-keyword">if</span> start != -<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> end != <span class="hljs-number">0</span>:
            json_str = ai_response_text[start:end]
            <span class="hljs-keyword">return</span> json.loads(json_str)
        <span class="hljs-keyword">else</span>:
            <span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"AIæœªè¿”å›æœ‰æ•ˆçš„JSONæ ¼å¼"</span>)
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ä¸AIæ¨¡å‹é€šä¿¡å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">execute_commands</span>(<span class="hljs-params">command_list</span>):
    <span class="hljs-string">"""å°†AIç”Ÿæˆçš„ç»“æ„åŒ–å‘½ä»¤å‘é€ç»™Windows-MCPæœåŠ¡å™¨æ‰§è¡Œ"""</span>
    <span class="hljs-keyword">for</span> cmd <span class="hljs-keyword">in</span> command_list:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰§è¡Œ: <span class="hljs-subst">{cmd[<span class="hljs-string">'tool'</span>]}</span> å‚æ•°: <span class="hljs-subst">{cmd[<span class="hljs-string">'params'</span>]}</span>"</span>)
            <span class="hljs-comment"># è°ƒç”¨Windows-MCPæœåŠ¡å™¨çš„å·¥å…·æ¥å£</span>
            response = requests.post(
                <span class="hljs-string">f"<span class="hljs-subst">{MCP_SERVER_URL}</span>/tool/execute"</span>,
                json={<span class="hljs-string">"tool"</span>: cmd[<span class="hljs-string">"tool"</span>], <span class="hljs-string">"parameters"</span>: cmd[<span class="hljs-string">"params"</span>]}
            )
            result = response.json()
            <span class="hljs-keyword">if</span> response.status_code == <span class="hljs-number">200</span> <span class="hljs-keyword">and</span> result.get(<span class="hljs-string">"success"</span>):
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æˆåŠŸ: <span class="hljs-subst">{result.get(<span class="hljs-string">'message'</span>)}</span>"</span>)
                time.sleep(<span class="hljs-number">0.5</span>) <span class="hljs-comment"># çŸ­æš‚ç­‰å¾…ï¼Œé¿å…æ“ä½œå†²çª</span>
            <span class="hljs-keyword">else</span>:
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å¤±è´¥: <span class="hljs-subst">{result.get(<span class="hljs-string">'error'</span>, <span class="hljs-string">'æœªçŸ¥é”™è¯¯'</span>)}</span>"</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰§è¡Œå‘½ä»¤æ—¶å‘ç”Ÿå¼‚å¸¸: <span class="hljs-subst">{e}</span>"</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

<span class="hljs-comment"># ========== ä¸»å¾ªç¯ï¼šå¯åŠ¨ä½ çš„è¯­éŸ³åŠ©æ‰‹ ==========</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    speak(<span class="hljs-string">"è¯­éŸ³æ¡Œé¢åŠ©æ‰‹å·²å¯åŠ¨ã€‚"</span>)
    
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        <span class="hljs-comment"># 1. å¬</span>
        user_command = listen()
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user_command:
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-comment"># 2. æƒ³ï¼ˆAIè§„åˆ’ï¼‰</span>
        speak(<span class="hljs-string">"æ­£åœ¨æ€è€ƒå¦‚ä½•å®Œæˆ..."</span>)
        ai_plan = ask_ai_to_plan(user_command)
        
        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ai_plan:
            speak(<span class="hljs-string">"æˆ‘æ²¡èƒ½ç†è§£å¦‚ä½•æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚"</span>)
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ‰§è¡Œè®¡åˆ’: <span class="hljs-subst">{ai_plan[<span class="hljs-string">'plan'</span>]}</span>"</span>)
        
        <span class="hljs-comment"># 3. åšï¼ˆç³»ç»Ÿæ‰§è¡Œï¼‰</span>
        speak(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œä»»åŠ¡ã€‚"</span>)
        success = execute_commands(ai_plan[<span class="hljs-string">'commands'</span>])
        
        <span class="hljs-comment"># 4. åé¦ˆ</span>
        <span class="hljs-keyword">if</span> success:
            speak(<span class="hljs-string">"ä»»åŠ¡å·²å®Œæˆï¼"</span>)
        <span class="hljs-keyword">else</span>:
            speak(<span class="hljs-string">"ä»»åŠ¡æ‰§è¡Œè¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ã€‚"</span>)

<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    main()
</code></pre>
<h4 data-id="heading-5"><strong>ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œä¸äº¤äº’</strong></h4>
<ol>
<li>ç¡®ä¿ <strong>Ollama æ¨¡å‹</strong> æ­£åœ¨è¿è¡Œï¼ˆç¬¬ä¸€æ­¥ä¸­ <code>ollama run</code> çš„çª—å£ï¼‰ã€‚</li>
<li>ç¡®ä¿ <strong>Windows-MCP æœåŠ¡å™¨</strong> æ­£åœ¨è¿è¡Œï¼ˆç¬¬ä¸€æ­¥ä¸­ <code>uv run server</code> çš„çª—å£ï¼‰ã€‚</li>
<li>åœ¨<strong>æ–°çš„å‘½ä»¤è¡Œçª—å£</strong>ä¸­ï¼Œè¿è¡Œä½ çš„Pythonç¨‹åºï¼š
<pre><code class="hljs language-bash" lang="bash">python voice_desktop_assistant.py
</code></pre>
</li>
<li>ç¨‹åºå¯åŠ¨åï¼Œä½ ä¼šå¬åˆ°â€œè¯­éŸ³æ¡Œé¢åŠ©æ‰‹å·²å¯åŠ¨â€çš„æç¤ºã€‚æ­¤æ—¶ï¼Œä½ å¯ä»¥å°è¯•è¯´å‡ºç±»ä¼¼ä»¥ä¸‹çš„æŒ‡ä»¤ï¼š
<ul>
<li><strong>â€œåœ¨æ¡Œé¢ä¸Šåˆ›å»ºä¸€ä¸ªåä¸ºâ€˜æµ‹è¯•â€™çš„æ–‡ä»¶å¤¹ã€‚â€</strong></li>
<li><strong>â€œè¯·åˆ—å‡ºæˆ‘æ¡Œé¢ä¸Šçš„æ‰€æœ‰æ–‡ä»¶ã€‚â€</strong></li>
<li><strong>â€œå¸®æˆ‘æŠŠæ¡Œé¢ä¸Šæ‰€æœ‰çš„.txtæ–‡ä»¶ç§»åŠ¨åˆ°â€˜æ–‡æ¡£â€™æ–‡ä»¶å¤¹é‡Œã€‚â€</strong>ï¼ˆè¯·æå‰ç¡®ä¿æœ‰å¯¹åº”æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹ï¼‰</li>
</ul>
</li>
</ol>
<p>ç¨‹åºä¼šå°†ä½ çš„è¯­éŸ³è½¬ä¸ºæ–‡æœ¬ï¼Œå‘é€ç»™æœ¬åœ°AIæ¨¡å‹ï¼ŒAIä¼šç”Ÿæˆä¸€ä¸ªåŒ…å« <code>list_files</code>ã€<code>create_folder</code>ã€<code>move_file</code> ç­‰æ“ä½œçš„JSONå‘½ä»¤åºåˆ—ï¼Œæœ€åç”± <code>Windows-MCP</code> æœåŠ¡å™¨æ‰§è¡Œè¿™äº›å‘½ä»¤å¹¶æ“ä½œä½ çš„çœŸå®ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-6"><strong>å››ã€å…³é”®è¦ç‚¹</strong></h3>
<p>é€šè¿‡è¿™ä¸ªDemoï¼Œä½ å·²å®è·µäº†è¯­éŸ³æ§åˆ¶Windowsçš„æ ¸å¿ƒé—­ç¯ã€‚è¦è®©å…¶æ›´å¼ºå¤§ã€å¯é ï¼Œä½ å¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢æ·±åŒ–ï¼š</p>
<ol>
<li><strong>å¼ºåŒ–AIçš„è§„åˆ’èƒ½åŠ›ï¼ˆæ”¹è¿›â€œè„‘â€ï¼‰</strong>ï¼šå½“å‰çš„æç¤ºè¯ï¼ˆPromptï¼‰è¾ƒä¸ºç®€å•ã€‚ä½ å¯ä»¥ä¸ºAIæä¾›æ›´è¯¦ç»†çš„ <code>Windows-MCP</code> å·¥å…·æ‰‹å†Œï¼Œæˆ–è®©AIåœ¨æ‰§è¡Œå‰å…ˆâ€œæ¨¡æ‹Ÿâ€æˆ–â€œç¡®è®¤â€å±é™©æ“ä½œï¼ˆå¦‚åˆ é™¤æ–‡ä»¶ï¼‰ã€‚è¿™æ­£æ˜¯å¾®è½¯åœ¨Copilot Actionsä¸­é‡‡å–â€œä»æœ‰é™åœºæ™¯å¼€å§‹æµ‹è¯•â€çš„è°¨æ…ç­–ç•¥ã€‚</li>
<li><strong>æå‡è¯­éŸ³äº¤äº’ä½“éªŒï¼ˆæ”¹è¿›â€œå£â€ï¼‰</strong>ï¼šä½¿ç”¨ç¦»çº¿STT/TTSå¼•æ“ï¼ˆå¦‚Voskå’ŒPiperï¼‰ä»¥è·å¾—æ›´å¿«çš„å“åº”å’Œç»å¯¹çš„éšç§ã€‚å®ç°â€œHey Assistantâ€è¿™æ ·çš„å…å”¤é†’è¯çƒ­è¯æ£€æµ‹ï¼Œè®©äº¤äº’æ›´è‡ªç„¶ã€‚</li>
<li><strong>ç¡®ä¿ç³»ç»Ÿå®‰å…¨ï¼ˆçº¦æŸâ€œæ‰‹â€ï¼‰</strong>ï¼šè¿™æ˜¯æœ€é‡è¦çš„ç¯èŠ‚ã€‚åœ¨Demoä¸­ï¼Œæ‰€æœ‰æ“ä½œé€šè¿‡ <code>Windows-MCP</code> è¿›è¡Œï¼Œå®ƒé»˜è®¤åªç›‘å¬æœ¬åœ°è¯·æ±‚ï¼Œä¸”æ¯æ¬¡æ“ä½œéƒ½éœ€è¦ç”¨æˆ·æˆæƒï¼ˆCursorç­‰IDEé›†æˆæ—¶ä¼šå¼¹çª—ï¼‰ã€‚åœ¨å®é™…äº§å“ä¸­ï¼Œå¿…é¡»åƒå¾®è½¯è®¾è®¡â€œæ™ºèƒ½ä½“å·¥ä½œç©ºé—´â€ä¸€æ ·ï¼Œä¸ºAIä»£ç†å»ºç«‹ä¸€ä¸ªæƒé™å—é™çš„æ²™ç›’ç¯å¢ƒï¼Œå°†å…¶æ´»åŠ¨ä¸ä¸»ç³»ç»Ÿéš”ç¦»ï¼Œå¹¶å¯¹åˆ é™¤ã€ä¿®æ”¹ç³»ç»Ÿè®¾ç½®ç­‰æ•æ„Ÿæ“ä½œè®¾ç½®å¤šæ¬¡ç¡®è®¤ã€‚</li>
<li><strong>æ¢ç´¢æ›´å‰æ²¿çš„é›†æˆ</strong>ï¼šå…³æ³¨å¾®è½¯â€œæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰â€çš„ç”Ÿæ€å‘å±•ã€‚æœªæ¥ï¼Œä½ å¯ä»¥å°†è‡ªå·±çš„åŠ©æ‰‹æ³¨å†Œä¸ºWindowsä»»åŠ¡æ çš„ä¸€ä¸ªæ™ºèƒ½ä½“ï¼Œå®ç°æ›´æ·±åº¦çš„ç³»ç»Ÿé›†æˆã€‚</li>
</ol>
<h3 data-id="heading-7"><strong>ç»“è®º</strong></h3>
<p>è¯­éŸ³å’ŒAIå¯¹è¯æ§åˆ¶è®¡ç®—æœºï¼Œä»æŠ€æœ¯ç†è®ºä¸Šçœ‹æ˜¯å¤šç§æˆç†ŸæŠ€æœ¯çš„ç»„åˆåˆ›æ–°ï¼Œè€Œä»å®è·µä¸Šçœ‹ï¼Œå…¶å…³é”®åœ¨äº<strong>å¯é åœ°è¿æ¥â€œè¯­è¨€ç†è§£â€ä¸â€œç³»ç»Ÿæ‰§è¡Œâ€è¿™ä¸¤ä¸ªç¯</strong>ã€‚æœ¬æ–‡æä¾›çš„Demoæ–¹æ¡ˆï¼Œåˆ©ç”¨ <code>Ollama</code> + <code>Windows-MCP</code> æ„å»ºäº†ä¸€ä¸ªå¯åœ¨æœ¬åœ°è¿è¡Œã€å®Œå…¨å—æ§çš„â€œåŸå‹æ™ºèƒ½ä½“â€ï¼Œå®ƒè·³å‡ºäº†å•çº¯çš„ç†è®ºå’ŒAPIè°ƒç”¨ï¼Œè§¦åŠäº†AIæ™ºèƒ½ä½“ï¼ˆAgentï¼‰å®ç°è‡ªä¸»ä»»åŠ¡æ‰§è¡Œçš„æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>å°½ç®¡å‰æ–¹ä»æœ‰æå‡AIè§„åˆ’å¯é æ€§ã€ç¡®ä¿æ“ä½œå®‰å…¨ç­‰æŒ‘æˆ˜ï¼Œä½†é€šè¿‡è¿™ä¸ªå¯è¿è¡Œçš„èµ·ç‚¹ï¼Œä½ å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªå¼ºå¤§çš„å®éªŒå¹³å°ï¼Œå¯ä»¥äº²æ‰‹æ¢ç´¢å’Œå¡‘é€ æœªæ¥äººæœºäº¤äº’çš„æ ·è²Œã€‚</p>
<blockquote>
<p><strong>æ³¨</strong>ï¼šæœ¬Demoä¸ºæ•™å­¦æ¼”ç¤ºç›®çš„ï¼Œè¯·åœ¨æµ‹è¯•ç¯å¢ƒä¸­è°¨æ…è¿è¡Œï¼Œé¿å…å¯¹é‡è¦æ–‡ä»¶å’Œç³»ç»Ÿé€ æˆæ„å¤–ä¿®æ”¹ã€‚å®é™…æ“ä½œå‰ï¼Œè¯·åŠ¡å¿…ç†è§£ä»£ç é€»è¾‘ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude æ€»æ˜¯æ³›æ³›è€Œè°ˆï¼Ÿè¯•è¯•ç»™å®ƒè£…ä¸ª"æŠ€èƒ½åŒ…"ï¼Œç”¨ Skills æ²‰æ·€å›¢é˜Ÿæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7578714735307735066</link>    <guid>https://juejin.cn/post/7578714735307735066</guid>    <pubDate>2025-12-01T14:24:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714735307735066" data-draft-id="7578714735307669530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude æ€»æ˜¯æ³›æ³›è€Œè°ˆï¼Ÿè¯•è¯•ç»™å®ƒè£…ä¸ª&quot;æŠ€èƒ½åŒ…&quot;ï¼Œç”¨ Skills æ²‰æ·€å›¢é˜Ÿæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="Claude,AIç¼–ç¨‹,AIGC"/> <meta itemprop="datePublished" content="2025-12-01T14:24:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude æ€»æ˜¯æ³›æ³›è€Œè°ˆï¼Ÿè¯•è¯•ç»™å®ƒè£…ä¸ª"æŠ€èƒ½åŒ…"ï¼Œç”¨ Skills æ²‰æ·€å›¢é˜Ÿæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:24:20.000Z" title="Mon Dec 01 2025 14:24:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Claude Skillsï¼šç»™ AI è£…ä¸Šä¸“ä¸š"æŠ€èƒ½åŒ…"</h2>
<p>ç”¨ Claude Code å¼€å‘é¡¹ç›®çš„æ—¶å€™ï¼Œç»å¸¸é‡åˆ°è¿™äº›å›°æƒ‘ï¼š</p>
<ul>
<li>è®© Claude åšä»£ç å®¡æŸ¥ï¼Œå®ƒç»™çš„å»ºè®®å¤ªæ³›æ³›ï¼Œä¸å¤Ÿä¸“ä¸šï¼Ÿ</li>
<li>å†™ Python å¼‚æ­¥ä»£ç æ—¶ï¼Œå®ƒå¯¹ asyncio çš„æœ€ä½³å®è·µä¸å¤Ÿæ·±å…¥ï¼Ÿ</li>
<li>æ­å»º Kubernetes é…ç½®ï¼Œæ€»æ„Ÿè§‰å®ƒç¼ºå°‘å®æˆ˜ç»éªŒï¼Ÿ</li>
<li>æ¯æ¬¡éƒ½è¦é‡å¤è§£é‡ŠåŒæ ·çš„æŠ€æœ¯ä¸Šä¸‹æ–‡ï¼Ÿ</li>
</ul>
<p>Claude æœ¬èº«å¾ˆèªæ˜ï¼Œä½†å°±åƒä¸€ä¸ªå…¨æ‰â€”â€”ä»€ä¹ˆéƒ½æ‡‚ä¸€ç‚¹ï¼Œä½†ä¸å¤Ÿä¸“ç²¾ã€‚è¿™æ—¶å€™å°±éœ€è¦ <strong>Claude Skills</strong> å‡ºåœºäº†ã€‚</p>
<h3 data-id="heading-1">ä»€ä¹ˆæ˜¯ Claude Skills</h3>
<h4 data-id="heading-2">ä¸€å¥è¯è§£é‡Š</h4>
<p>Skills æ˜¯ç»™ Claude è£…çš„"ä¸“ä¸šæŠ€èƒ½åŒ…"ã€‚å°±åƒ RPG æ¸¸æˆé‡Œç»™è§’è‰²å­¦æŠ€èƒ½ï¼Œä¸€ä¸ª Skill è®© Claude åœ¨ç‰¹å®šé¢†åŸŸå˜æˆä¸“å®¶ã€‚</p>
<p>å®˜æ–¹å®šä¹‰æ˜¯è¿™æ ·è¯´çš„ï¼š</p>
<blockquote>
<p>Agent Skills are organized folders of instructions, scripts, and resources that agents can discover and load dynamically to perform better at specific tasks.</p>
</blockquote>
<p>ç¿»è¯‘ä¸€ä¸‹ï¼šSkills æ˜¯æ‰“åŒ…å¥½çš„æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºï¼ŒClaude ä¼šè‡ªåŠ¨å‘ç°å¹¶æŒ‰éœ€åŠ è½½ï¼Œè®©å®ƒåœ¨ç‰¹å®šä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½ã€‚</p>
<h4 data-id="heading-3">æ ¸å¿ƒç‰¹æ€§</h4>
<ol>
<li><strong>æ¨¡å‹è‡ªä¸»è°ƒç”¨</strong>ï¼šClaude æ ¹æ®ä»»åŠ¡è‡ªåŠ¨åˆ¤æ–­æ˜¯å¦ä½¿ç”¨ Skillï¼Œä¸éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
<li><strong>æŒ‰éœ€åŠ è½½</strong>ï¼šåªæœ‰ç”¨åˆ°çš„å†…å®¹æ‰å ç”¨ context window</li>
<li><strong>å¯ç»„åˆ</strong>ï¼šå¤šä¸ª Skills å¯ä»¥ååŒå·¥ä½œ</li>
<li><strong>è·¨å¹³å°</strong>ï¼šClaude.aiã€Claude Codeã€Agent SDKã€Developer Platform éƒ½æ”¯æŒ</li>
</ol>
<h4 data-id="heading-4">ä¸‰å±‚åŠ è½½æ¶æ„</h4>
<p>è¿™æ˜¯ Skills è®¾è®¡æœ€å·§å¦™çš„åœ°æ–¹â€”â€”<strong>Progressive Disclosureï¼ˆæ¸è¿›å¼æŠ«éœ²ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Level 1: Metadata                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ name: code-review-excellence                             â”‚    â”‚
â”‚  â”‚ description: Master effective code review practices...   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  åŠ è½½æ—¶æœº: å¯åŠ¨æ—¶   |   Token å¼€é”€: ~100 tokens/skill            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Level 2: Instructions (SKILL.md ä¸»ä½“å†…å®¹)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ - ä»£ç å®¡æŸ¥çš„ 4 é˜¶æ®µæµç¨‹                                   â”‚    â”‚
â”‚  â”‚ - åé¦ˆæŠ€å·§å’Œæ¨¡æ¿                                          â”‚    â”‚
â”‚  â”‚ - é€šç”¨ checklist                                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  åŠ è½½æ—¶æœº: è§¦å‘æ—¶   |   Token å¼€é”€: &lt;5,000 tokens               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Level 3: Resources &amp; Code                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ reference/react.md, reference/python.md                  â”‚    â”‚
â”‚  â”‚ scripts/pr-analyzer.py                                   â”‚    â”‚
â”‚  â”‚ assets/checklist.md                                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  åŠ è½½æ—¶æœº: å¼•ç”¨æ—¶   |   Token å¼€é”€: ä»…è¾“å‡ºæ¶ˆè€— token             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>å®˜æ–¹å·¥ç¨‹åšå®¢è¿™æ ·è§£é‡Šï¼š</p>
<blockquote>
<p>Like a well-organized manual that starts with a table of contents, then specific chapters, and finally a detailed appendix, skills let Claude load information only as needed. This means that the amount of context that can be bundled into a skill is effectively unbounded.</p>
</blockquote>
<p>ç®€å•è¯´ï¼šSkill å¯ä»¥æ‰“åŒ…æ— é™é‡çš„å†…å®¹ï¼Œä½†åªåœ¨éœ€è¦æ—¶æ‰åŠ è½½ã€‚ä½ å¯ä»¥è£… 50 ä¸ª Skillsï¼Œå¯åŠ¨æ—¶åªå ç”¨ ~5000 tokensï¼ˆ50 Ã— 100ï¼‰ï¼Œåªæœ‰ç”¨åˆ°çš„æ‰åŠ è½½å®Œæ•´å†…å®¹ã€‚</p>
<h3 data-id="heading-5">Skills vs MCPï¼šä¸¤ä¸ªä¸åŒå±‚é¢çš„ä¸œè¥¿</h3>
<p>åˆšæ¥è§¦çš„æ—¶å€™å¾ˆå®¹æ˜“ææ··ï¼Œå®ƒä»¬åˆ°åº•ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<h4 data-id="heading-6">ä¸€å¥è¯åŒºåˆ†</h4>
<p>æœ‰äººæ€»ç»“å¾—å¾ˆå½¢è±¡ï¼š</p>
<blockquote>
<p>MCP server = "Claude, here are the keys to the filing cabinet."
Skills = "Write the instructions once, Claude follows them forever."</p>
</blockquote>
<p>MCP ç»™ Claude é’¥åŒ™ï¼ˆå·¥å…·ï¼‰ï¼ŒSkills ç»™ Claude è¯´æ˜ä¹¦ï¼ˆçŸ¥è¯†ï¼‰ã€‚</p>
<h4 data-id="heading-7">å…·ä½“å¯¹æ¯”</h4>








































<table><thead><tr><th>ç»´åº¦</th><th>Skills</th><th>MCP Servers</th></tr></thead><tbody><tr><td><strong>æœ¬è´¨</strong></td><td>çŸ¥è¯†å’Œæ–¹æ³•è®º</td><td>å·¥å…·å’Œèƒ½åŠ›</td></tr><tr><td><strong>ä½œç”¨</strong></td><td>æ•™ Claude "æ€ä¹ˆåš"</td><td>ç»™ Claude "èƒ½åšä»€ä¹ˆ"</td></tr><tr><td><strong>æ ¼å¼</strong></td><td>Markdown æ–‡ä»¶ + YAML å…ƒæ•°æ®</td><td>åè®® + æœåŠ¡ç«¯ç¨‹åº</td></tr><tr><td><strong>Token æ•ˆç‡</strong></td><td>å…ƒæ•°æ® ~100 tokensï¼ŒæŒ‰éœ€åŠ è½½</td><td>æ•°åƒåˆ°æ•°ä¸‡ tokens</td></tr><tr><td><strong>è®¾ç½®å¤æ‚åº¦</strong></td><td>ç®€å•ï¼Œåˆ›å»º markdown æ–‡ä»¶å³å¯</td><td>è¾ƒå¤æ‚ï¼Œéœ€è¦é…ç½®æœåŠ¡</td></tr><tr><td><strong>å¯ç§»æ¤æ€§</strong></td><td>Claude ä¸“ç”¨</td><td>å¼€æ”¾æ ‡å‡†ï¼Œå¤šå‚å•†æ”¯æŒ</td></tr></tbody></table>
<h4 data-id="heading-8">æ€ä¹ˆé…åˆä½¿ç”¨</h4>
<p>åšä»£ç å®¡æŸ¥æ—¶ï¼š</p>
<ul>
<li><code>code-review-excellence</code> skill æä¾›å®¡æŸ¥æ ‡å‡†å’Œæ–¹æ³•</li>
<li>Claude Code åŸç”Ÿçš„ Read/Grep å·¥å…·è¯»å–ä»£ç </li>
<li>å¦‚æœæ˜¯å‰ç«¯ä»£ç ï¼Œå¯èƒ½è¿˜ä¼šç”¨ Playwright MCP è·‘ä¸€ä¸‹é¡µé¢</li>
</ul>
<p>å†™æŠ€æœ¯æ–‡æ¡£æ—¶ï¼š</p>
<ul>
<li><code>technical-writer</code> skill æä¾›å†™ä½œæ¡†æ¶å’Œé£æ ¼æŒ‡å—</li>
<li><code>context7</code> MCP æŸ¥è¯¢æœ€æ–°çš„åº“æ–‡æ¡£</li>
<li><code>tavily</code> MCP æœç´¢ç›¸å…³çš„æœ€ä½³å®è·µ</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“</strong>ï¼šMCP æä¾›è¿æ¥å¤–éƒ¨ç³»ç»Ÿçš„èƒ½åŠ›ï¼ŒSkills æä¾›å¦‚ä½•ä½¿ç”¨è¿™äº›èƒ½åŠ›çš„çŸ¥è¯†ã€‚</p>
<h3 data-id="heading-9">Skills æ€ä¹ˆå·¥ä½œ</h3>
<h4 data-id="heading-10">æ¿€æ´»æœºåˆ¶</h4>
<p>Skill çš„ <code>description</code> å­—æ®µå†³å®šä½•æ—¶æ¿€æ´»ã€‚Claude ä¼šåˆ†æç”¨æˆ·è¾“å…¥ï¼ŒåŒ¹é…ç›¸å…³çš„ skillï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">description:</span> <span class="hljs-string">Master</span> <span class="hljs-string">effective</span> <span class="hljs-string">code</span> <span class="hljs-string">review</span> <span class="hljs-string">practices</span> <span class="hljs-string">to</span> <span class="hljs-string">provide</span> <span class="hljs-string">constructive</span>
<span class="hljs-string">feedback,</span> <span class="hljs-string">catch</span> <span class="hljs-string">bugs</span> <span class="hljs-string">early,</span> <span class="hljs-string">and</span> <span class="hljs-string">foster</span> <span class="hljs-string">knowledge</span> <span class="hljs-string">sharing</span> <span class="hljs-string">while</span> <span class="hljs-string">maintaining</span>
<span class="hljs-string">team</span> <span class="hljs-string">morale.</span> <span class="hljs-string">Use</span> <span class="hljs-string">when</span> <span class="hljs-string">reviewing</span> <span class="hljs-string">pull</span> <span class="hljs-string">requests,</span> <span class="hljs-string">establishing</span> <span class="hljs-string">review</span> <span class="hljs-string">standards,</span>
<span class="hljs-string">or</span> <span class="hljs-string">mentoring</span> <span class="hljs-string">developers.</span>
</code></pre>
<p>å½“ç”¨æˆ·è¯´ï¼š</p>
<ul>
<li>"å®¡æŸ¥è¿™æ®µä»£ç " â†’ æ¿€æ´»ï¼ˆåŒ¹é… "reviewing"ï¼‰</li>
<li>"å¸®æˆ‘ review PR" â†’ æ¿€æ´»ï¼ˆåŒ¹é… "pull requests"ï¼‰</li>
<li>"å»ºç«‹ä»£ç å®¡æŸ¥æ ‡å‡†" â†’ æ¿€æ´»ï¼ˆåŒ¹é… "establishing review standards"ï¼‰</li>
<li>"å†™ä¸ª Python å‡½æ•°" â†’ ä¸æ¿€æ´»ï¼ˆæ— åŒ¹é…ï¼‰</li>
</ul>
<p>æŠ€æœ¯å®ç°ä¸Šï¼ŒClaude é€šè¿‡ Bash å·¥å…·è¯»å– <code>SKILL.md</code> æ–‡ä»¶æ¥è§¦å‘åŠ è½½ã€‚</p>
<p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†å…³é”®è¯å¦‚ä½•è‡ªåŠ¨è§¦å‘ skillï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/276d9cfbd9b740178b985ff7eb95b9c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203861&amp;x-signature=H4CHRJzshTsVAa02ftJbHfOdg4w%3D" alt="å…³é”®è¯è‡ªåŠ¨è§¦å‘" loading="lazy"/></p>
<h4 data-id="heading-11">Token å¼€é”€å®æµ‹</h4>
<p>è¿™æ˜¯ Skills è®¾è®¡å·§å¦™çš„åœ°æ–¹ï¼š</p>
<p><strong>æœªæ¿€æ´»æ—¶</strong>ï¼šæ¯ä¸ª skill åªå çº¦ 100 tokensï¼ˆname + descriptionï¼‰</p>
<ul>
<li>50 ä¸ª skills â‰ˆ 5000 tokens</li>
</ul>
<p><strong>æ¿€æ´»æ—¶</strong>ï¼šåŠ è½½ SKILL.mdï¼ˆæ ¸å¿ƒå†…å®¹ï¼‰</p>
<ul>
<li>å…¸å‹çš„ SKILL.md â‰ˆ 1500-3000 tokens</li>
</ul>
<p><strong>æ·±åº¦å¼•ç”¨æ—¶</strong>ï¼šåŠ è½½ reference/ æ–‡ä»¶</p>
<ul>
<li><code>reference/react.md</code> â‰ˆ 7000 tokens</li>
<li><code>reference/python.md</code> â‰ˆ 8500 tokens</li>
<li>ä½†è„šæœ¬æ‰§è¡Œæ˜¯ç¡®å®šæ€§çš„ï¼Œåªæœ‰è¾“å‡ºæ‰æ¶ˆè€— token</li>
</ul>
<p>ä¸‹é¢è¿™å¼ å›¾å±•ç¤ºäº†æŒ‰éœ€åŠ è½½çš„è¿‡ç¨‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fac591056dd142718f023afb094f5726~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lmf5peg6aOO6Zuo5Lmf6Zu-5pm0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203861&amp;x-signature=ddvk%2BEiz%2BabpqnVyfc93iQSFR2g%3D" alt="image-20251129152339708.png" loading="lazy"/></p>
<h4 data-id="heading-12">å¤š Skill åä½œ</h4>
<p>ä¸€æ¬¡å¯¹è¯å¯ä»¥æ¿€æ´»å¤šä¸ª skillsã€‚æ¯”å¦‚é—®"å®¡æŸ¥è¿™ä¸ª Python å¼‚æ­¥æµ‹è¯•ä»£ç "ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">ç”¨æˆ·: <span class="hljs-string">"å®¡æŸ¥è¿™ä¸ª Python å¼‚æ­¥æµ‹è¯•ä»£ç "</span>
  â”‚
  â”œâ”€â†’ code-review-excellence (åŒ¹é… <span class="hljs-string">"å®¡æŸ¥"</span>)
  â”‚     â””â”€ ä»£ç å®¡æŸ¥æµç¨‹å’Œæ ‡å‡†
  â”‚
  â”œâ”€â†’ python-testing-patterns (åŒ¹é… <span class="hljs-string">"æµ‹è¯•"</span>)
  â”‚     â””â”€ Python æµ‹è¯•æœ€ä½³å®è·µ
  â”‚
  â””â”€â†’ <span class="hljs-keyword">async</span>-python-patterns (åŒ¹é… <span class="hljs-string">"å¼‚æ­¥"</span>)
        â””â”€ asyncio å¸¸è§é™·é˜±

Claude ç»¼åˆ <span class="hljs-number">3</span> ä¸ª skills çš„çŸ¥è¯† â†’ è¾“å‡ºä¸“ä¸šçš„å®¡æŸ¥æŠ¥å‘Š
</code></pre>
<p>å°±åƒå¬é›†äº† 3 ä¸ªä¸“å®¶ä¼šè¯Šã€‚</p>
<h3 data-id="heading-13">å®‰è£…å’Œé…ç½®</h3>
<h4 data-id="heading-14">å­˜æ”¾ä½ç½®</h4>
<p>Skills æœ‰ä¸¤ä¸ªä½ç½®ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">~/.claude/skills/              <span class="hljs-comment"># å…¨å±€ skills (æ‰€æœ‰é¡¹ç›®å¯ç”¨)</span>
project/.claude/skills/        <span class="hljs-comment"># é¡¹ç›® skills (ä»…å½“å‰é¡¹ç›®ï¼Œå¯ git å…±äº«)</span>
</code></pre>
<h4 data-id="heading-15">å®‰è£…æ–¹å¼</h4>
<p><strong>æ–¹å¼ 1ï¼šä»å®˜æ–¹ä»“åº“å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Claude Code ä¸­å®‰è£…å®˜æ–¹ document skills</span>
/plugin install document-skills@anthropic-agent-skills
</code></pre>
<p>å®˜æ–¹ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">anthropics/skills</a> ä»“åº“æä¾›ï¼š</p>

























<table><thead><tr><th>ç±»åˆ«</th><th>åŒ…å«å†…å®¹</th></tr></thead><tbody><tr><td><strong>Document Skills</strong></td><td>Word/PDF/PowerPoint/Excel å¤„ç†ï¼ˆç”Ÿäº§çº§è´¨é‡ï¼‰</td></tr><tr><td><strong>Creative &amp; Design</strong></td><td>p5.js ç®—æ³•è‰ºæœ¯ã€Canvas è®¾è®¡ã€GIF åŠ¨ç”»</td></tr><tr><td><strong>Development</strong></td><td>Web artifactsã€MCP server åˆ›å»ºã€Playwright æµ‹è¯•</td></tr><tr><td><strong>Enterprise</strong></td><td>å“ç‰ŒæŒ‡å—ã€å†…éƒ¨æ²Ÿé€šæ¨¡æ¿</td></tr></tbody></table>
<p><strong>æ–¹å¼ 2ï¼šä»ç¤¾åŒº Marketplace å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ·»åŠ ç¤¾åŒº marketplace</span>
/plugin marketplace add wshobson/agents

<span class="hljs-comment"># å®‰è£… pluginï¼ˆåŒ…å«å¤šä¸ª skillsï¼‰</span>
/plugin install developer-essentials      <span class="hljs-comment"># 8 ä¸ªå¼€å‘æ ¸å¿ƒ skills</span>
/plugin install python-development        <span class="hljs-comment"># 5 ä¸ª Python skills</span>
/plugin install kubernetes-operations     <span class="hljs-comment"># 4 ä¸ª K8s skills</span>
</code></pre>
<p>ç¤¾åŒº marketplace æä¾›æ›´å¤šç»†åˆ†é¢†åŸŸçš„ skillsï¼Œä½†è¦æ³¨æ„å®¡æŸ¥å®‰å…¨æ€§ã€‚</p>
<p><strong>æ–¹å¼ 3ï¼šæ‰‹åŠ¨åˆ›å»º</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º skill ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p ~/.claude/skills/my-custom-skill

<span class="hljs-comment"># åˆ›å»º SKILL.md</span>
<span class="hljs-built_in">cat</span> &gt; ~/.claude/skills/my-custom-skill/SKILL.md &lt;&lt; <span class="hljs-string">'EOF'</span>
---
name: my-custom-skill
description: è¿™ä¸ª skill çš„ç”¨é€”ã€‚Use when XXX
---

<span class="hljs-comment"># My Custom Skill</span>

<span class="hljs-comment">## When to Use</span>
- åœºæ™¯1
- åœºæ™¯2

<span class="hljs-comment">## æ ¸å¿ƒå†…å®¹</span>
[ä½ çš„ä¸“ä¸šçŸ¥è¯†]
EOF
</code></pre>
<h4 data-id="heading-16">SKILL.md è§„èŒƒ</h4>
<p>å®˜æ–¹è¦æ±‚ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">your-skill-name</span>        <span class="hljs-comment"># å¿…éœ€ï¼Œæœ€å¤§ 64 å­—ç¬¦</span>
                             <span class="hljs-comment"># åªèƒ½ç”¨å°å†™å­—æ¯ã€æ•°å­—ã€è¿å­—ç¬¦</span>
                             <span class="hljs-comment"># ä¸èƒ½åŒ…å« "anthropic" æˆ– "claude"</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">...</span>             <span class="hljs-comment"># å¿…éœ€ï¼Œæœ€å¤§ 1,024 å­—ç¬¦</span>
                             <span class="hljs-comment"># è¯´æ˜åŠŸèƒ½å’Œè§¦å‘æ¡ä»¶</span>
<span class="hljs-meta">---
</span>
<span class="hljs-comment"># Skill æ­£æ–‡ (Markdown)</span>
[<span class="hljs-string">ä»»æ„å†…å®¹</span>]
</code></pre>
<h4 data-id="heading-17">ç›®å½•ç»“æ„æœ€ä½³å®è·µ</h4>
<pre><code class="hljs language-bash" lang="bash">skill-name/
â”œâ”€â”€ SKILL.md                    <span class="hljs-comment"># æ ¸å¿ƒæ–‡ä»¶ (å¿…éœ€ï¼Œå»ºè®® &lt;200 è¡Œ)</span>
â”œâ”€â”€ reference/                  <span class="hljs-comment"># æ·±åº¦å‚è€ƒ (å¯é€‰ï¼ŒæŒ‰éœ€åŠ è½½)</span>
â”‚   â”œâ”€â”€ react.md
â”‚   â””â”€â”€ python.md
â”œâ”€â”€ assets/                     <span class="hljs-comment"># æ¨¡æ¿èµ„æº (å¯é€‰)</span>
â”‚   â””â”€â”€ checklist.md
â””â”€â”€ scripts/                    <span class="hljs-comment"># è‡ªåŠ¨åŒ–è„šæœ¬ (å¯é€‰)</span>
    â””â”€â”€ analyzer.py
</code></pre>
<h3 data-id="heading-18">å®æˆ˜ï¼šä» 7 åˆ†åˆ° 9 åˆ†çš„ä»£ç å®¡æŸ¥</h3>
<h4 data-id="heading-19">æ²¡æœ‰ Skill æ—¶</h4>
<p>é—®ï¼š"å®¡æŸ¥ä¸‹é¡¹ç›®ç»“æ„"</p>
<p>Claude å¯èƒ½ä¼šï¼š</p>
<ul>
<li>åˆ—å‡ºæ–‡ä»¶åˆ—è¡¨</li>
<li>æŒ‡å‡ºæ˜æ˜¾é—®é¢˜ï¼ˆæ¯”å¦‚ç¼ºå°‘ READMEï¼‰</li>
<li>ç»™ä¸€äº›æ³›æ³›çš„å»ºè®®</li>
</ul>
<p><strong>è´¨é‡</strong>ï¼š7/10 â€” èƒ½ç”¨ï¼Œä½†ä¸å¤Ÿç³»ç»Ÿ</p>
<h4 data-id="heading-20">æœ‰ Skill å</h4>
<p>åŒæ ·çš„é—®é¢˜ï¼Œæ¿€æ´» <code>code-review-excellence</code> skill åï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-section">## é¡¹ç›®ç»“æ„å®¡æŸ¥æŠ¥å‘Š</span>

<span class="hljs-section">### ä¼˜ç‚¹</span>
<span class="hljs-bullet">-</span> ç°ä»£åŒ–æŠ€æœ¯æ ˆ
<span class="hljs-bullet">-</span> æ¸…æ™°çš„ç›®å½•ç»“æ„
<span class="hljs-bullet">-</span> é…ç½®å®Œå–„

<span class="hljs-section">### å…³é”®é—®é¢˜ (Blocking)</span>
ğŸ”´ ç¼ºå°‘æµ‹è¯•åŸºç¡€è®¾æ–½
ğŸ”´ eslint.config.js é…ç½®é”™è¯¯

<span class="hljs-section">### é‡è¦æ”¹è¿› (Important)</span>
ğŸŸ¡ ç¼ºå°‘ç¯å¢ƒå˜é‡ç®¡ç†
ğŸŸ¡ ç¼ºå°‘é”™è¯¯è¾¹ç•Œ

<span class="hljs-section">### å»ºè®®ä¼˜åŒ– (Nice to Have)</span>
ğŸŸ¢ ä»£ç åˆ†å‰²
ğŸŸ¢ æ·»åŠ  loading çŠ¶æ€

<span class="hljs-section">### è¯„åˆ†çŸ©é˜µ</span>
| ç±»åˆ«     | è¯„åˆ† | è¯´æ˜        |
|----------|------|-------------|
| ä»£ç è´¨é‡ | 8/10 | ESLint é€šè¿‡ |
| æ¶æ„è®¾è®¡ | 7/10 | ç»“æ„æ¸…æ™°    |
| å¯ç»´æŠ¤æ€§ | 6/10 | ç¼ºå°‘æµ‹è¯•    |

<span class="hljs-section">### ä¼˜å…ˆçº§è¡ŒåŠ¨è®¡åˆ’</span>
<span class="hljs-bullet">1.</span> ğŸ”´ ä¿®å¤ eslint é…ç½®
<span class="hljs-bullet">2.</span> ğŸ”´ æ·»åŠ æµ‹è¯•æ¡†æ¶
</code></pre>
<p><strong>è´¨é‡</strong>ï¼š9/10 â€” ä¸“ä¸šã€ç³»ç»Ÿã€å¯æ‰§è¡Œ</p>
<p>åŒºåˆ«åœ¨äºï¼š</p>






























<table><thead><tr><th>ç»´åº¦</th><th>åŸºç¡€æ¨¡å¼</th><th>Skill æ¨¡å¼</th></tr></thead><tbody><tr><td>ç»“æ„</td><td>æ— å›ºå®šç»“æ„</td><td>4 é˜¶æ®µå®¡æŸ¥æµç¨‹</td></tr><tr><td>ä¼˜å…ˆçº§</td><td>æ··åœ¨ä¸€èµ·</td><td>ğŸ”´ğŸŸ¡ğŸŸ¢ æ˜ç¡®åˆ†çº§</td></tr><tr><td>å¯æ‰§è¡Œæ€§</td><td>æ³›æ³›å»ºè®®</td><td>å…·ä½“è¡ŒåŠ¨è®¡åˆ’</td></tr><tr><td>æ·±åº¦</td><td>è¡¨é¢é—®é¢˜</td><td>è¯­è¨€ç‰¹å®šé™·é˜±</td></tr></tbody></table>
<h3 data-id="heading-21">åˆ›å»ºè‡ªå®šä¹‰ Skill</h3>
<h4 data-id="heading-22">ä»€ä¹ˆæ—¶å€™è¯¥åˆ›å»º</h4>
<ol>
<li><strong>å›¢é˜Ÿç‰¹å®šè§„èŒƒ</strong> â€” "æˆ‘ä»¬çš„ API è®¾è®¡æ ‡å‡†"</li>
<li><strong>é‡å¤æ€§å·¥ä½œ</strong> â€” æ¯æ¬¡éƒ½è¦è§£é‡Šçš„æŠ€æœ¯ç»†èŠ‚</li>
<li><strong>çŸ¥è¯†æ²‰æ·€</strong> â€” æŠŠè¸©è¿‡çš„å‘å›ºåŒ–ä¸‹æ¥</li>
<li><strong>ä¸“ä¸šé¢†åŸŸ</strong> â€” Marketplace æ²¡æœ‰çš„ç»†åˆ†é¢†åŸŸ</li>
</ol>
<h4 data-id="heading-23">åˆ›å»ºæ­¥éª¤</h4>
<p><strong>ç¬¬ 1 æ­¥ï¼šç¡®å®šèŒƒå›´</strong></p>
<p>ä¸€ä¸ªå¥½çš„ skill è¦ï¼š</p>
<ul>
<li>èšç„¦å•ä¸€ä¸»é¢˜</li>
<li>å¯ç‹¬ç«‹ä½¿ç”¨</li>
<li>æœ‰æ˜ç¡®çš„æ¿€æ´»æ¡ä»¶</li>
<li>ä¸è¦åš"ä¸‡èƒ½ skill"</li>
</ul>
<p><strong>ç¬¬ 2 æ­¥ï¼šç»„ç»‡å†…å®¹</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">---
name: team-api-standards
<span class="hljs-section">description: å›¢é˜Ÿçš„ RESTful API è®¾è®¡è§„èŒƒå’Œå®¡æŸ¥æ ‡å‡†ã€‚Use when designing REST APIs, reviewing API endpoints, or validating API documentation.
---</span>

<span class="hljs-section"># Team API Standards</span>

<span class="hljs-section">## When to Use</span>
<span class="hljs-bullet">-</span> è®¾è®¡æ–°çš„ API æ¥å£
<span class="hljs-bullet">-</span> å®¡æŸ¥ API ç›¸å…³ä»£ç 
<span class="hljs-bullet">-</span> è§£ç­” API è®¾è®¡é—®é¢˜

<span class="hljs-section">## æ ¸å¿ƒåŸåˆ™</span>

<span class="hljs-section">### 1. RESTful è®¾è®¡</span>
[å›¢é˜Ÿçš„ REST è§„èŒƒ]

<span class="hljs-section">### 2. é”™è¯¯å¤„ç†</span>
[ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼]

<span class="hljs-section">## Checklist</span>
<span class="hljs-bullet">-</span> [ ] æ˜¯å¦éµå¾ªå‘½åçº¦å®š?
<span class="hljs-bullet">-</span> [ ] é”™è¯¯ç æ˜¯å¦ç»Ÿä¸€?

<span class="hljs-section">## ç¤ºä¾‹</span>

<span class="hljs-section">### å¥½çš„è®¾è®¡</span>
\<span class="hljs-code">`\`</span>\`typescript
// æ­£ç¡®ç¤ºä¾‹
\<span class="hljs-code">`\`</span>\`

<span class="hljs-section">### é¿å…çš„åšæ³•</span>
\<span class="hljs-code">`\`</span>\`typescript
// é”™è¯¯ç¤ºä¾‹
\<span class="hljs-code">`\`</span>\`
</code></pre>
<p><strong>ç¬¬ 3 æ­¥ï¼šæµ‹è¯•</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»º skill</span>
<span class="hljs-built_in">mkdir</span> -p ~/.claude/skills/team-api-standards
<span class="hljs-comment"># ç¼–å†™ SKILL.md</span>
<span class="hljs-comment"># æ–°å¼€ä¼šè¯æµ‹è¯•</span>

<span class="hljs-comment"># é—®: "å®¡æŸ¥è¿™ä¸ª API è®¾è®¡"</span>
<span class="hljs-comment"># çœ‹æ˜¯å¦æ¿€æ´»äº†ä½ çš„ skill</span>
</code></pre>
<h4 data-id="heading-24">æœ€ä½³å®è·µ</h4>
<ol>
<li>
<p><strong>æè¿°è¦ç²¾å‡†</strong></p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># âŒ å¤ªå®½æ³›</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">API</span> <span class="hljs-string">ç›¸å…³çš„çŸ¥è¯†</span>

<span class="hljs-comment"># âœ… æ˜ç¡®åœºæ™¯</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">å›¢é˜Ÿçš„</span> <span class="hljs-string">RESTful</span> <span class="hljs-string">API</span> <span class="hljs-string">è®¾è®¡è§„èŒƒã€‚Use</span> <span class="hljs-string">when</span> <span class="hljs-string">designing</span> <span class="hljs-string">REST</span> <span class="hljs-string">APIs,</span> <span class="hljs-string">reviewing</span> <span class="hljs-string">API</span> <span class="hljs-string">endpoints.</span>
</code></pre>
</li>
<li>
<p><strong>å†…å®¹è¦å®æˆ˜</strong></p>
<ul>
<li>å¤šç”¨å¯¹æ¯”ç¤ºä¾‹ï¼ˆGood vs Badï¼‰</li>
<li>æä¾› checklist</li>
<li>åŒ…å«çœŸå®çš„å‘å’Œè§£å†³æ–¹æ¡ˆ</li>
</ul>
</li>
<li>
<p><strong>å›¢é˜Ÿå…±äº«</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ”¾é¡¹ç›®ç›®å½•ï¼Œå›¢é˜Ÿå…±äº«</span>
<span class="hljs-built_in">cp</span> -r ~/.claude/skills/team-api-standards .claude/skills/
git add .claude/
git commit -m <span class="hljs-string">"Add team API standards skill"</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-25">å®‰å…¨è€ƒè™‘</h3>
<p>å®˜æ–¹æ–‡æ¡£ç‰¹åˆ«å¼ºè°ƒè¿™ä¸€ç‚¹ï¼š</p>
<blockquote>
<p>We strongly recommend using Skills only from trusted sources: those you created yourself or obtained from Anthropic.</p>
</blockquote>
<p>Skills å¯ä»¥åŒ…å«è„šæœ¬ï¼Œæ¶æ„ Skill å¯èƒ½ï¼š</p>
<ul>
<li>è®© Claude æ‰§è¡Œæœ‰å®³æ“ä½œ</li>
<li>æ³„éœ²æ•°æ®</li>
<li>å…¥ä¾µç³»ç»Ÿ</li>
</ul>
<p><strong>å»ºè®®</strong>ï¼š</p>
<ul>
<li>å®¡æŸ¥æ‰€æœ‰ bundled æ–‡ä»¶ï¼ˆSKILL.mdã€scriptsã€imagesï¼‰</li>
<li>é¿å…ä½¿ç”¨ä»ä¸å¯ä¿¡ URL è·å–å†…å®¹çš„ Skills</li>
<li>åƒå¯¹å¾…å®‰è£…è½¯ä»¶ä¸€æ ·å¯¹å¾… Skill</li>
</ul>
<h3 data-id="heading-26">å¹³å°æ”¯æŒ</h3>






























<table><thead><tr><th>å¹³å°</th><th>æ”¯æŒç±»å‹</th><th>å…±äº«èŒƒå›´</th></tr></thead><tbody><tr><td><strong>Claude.ai</strong></td><td>é¢„ç½® + è‡ªå®šä¹‰ä¸Šä¼ </td><td>ä»…ä¸ªäºº</td></tr><tr><td><strong>Claude Code</strong></td><td>è‡ªå®šä¹‰ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰</td><td>ä¸ªäººæˆ–é¡¹ç›®çº§</td></tr><tr><td><strong>Claude API</strong></td><td>é¢„ç½® + è‡ªå®šä¹‰</td><td>ç»„ç»‡çº§</td></tr><tr><td><strong>Agent SDK</strong></td><td>è‡ªå®šä¹‰ï¼ˆ.claude/skills/ï¼‰</td><td>é…ç½®çº§</td></tr></tbody></table>
<p>æ³¨æ„ï¼šè‡ªå®šä¹‰ Skills ä¸ä¼šè·¨å¹³å°åŒæ­¥ï¼Œéœ€è¦åˆ†åˆ«ä¸Šä¼ ã€‚</p>
<h3 data-id="heading-27">å±€é™æ€§</h3>
<h4 data-id="heading-28">Skills ä¸èƒ½åšçš„</h4>
<ul>
<li>âŒ æ“ä½œæµè§ˆå™¨ï¼ˆéœ€è¦ Playwright MCPï¼‰</li>
<li>âŒ è”ç½‘æœç´¢ï¼ˆéœ€è¦ Tavily MCPï¼‰</li>
<li>âŒ æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ï¼ˆéœ€è¦ Bash å·¥å…·ï¼‰</li>
<li>âŒ è¯»å–æ–‡ä»¶ï¼ˆéœ€è¦ Read å·¥å…·ï¼‰</li>
</ul>
<h4 data-id="heading-29">Skills æ“…é•¿çš„</h4>
<ul>
<li>âœ… æä¾›ç³»ç»ŸåŒ–çš„çŸ¥è¯†æ¡†æ¶</li>
<li>âœ… æŒ‡å¯¼æœ€ä½³å®è·µ</li>
<li>âœ… è¯†åˆ«å¸¸è§é™·é˜±</li>
<li>âœ… ä¼˜åŒ–å·¥å…·ä½¿ç”¨ç­–ç•¥</li>
</ul>
<h4 data-id="heading-30">åˆ›å»ºæˆæœ¬</h4>
<p>é«˜è´¨é‡ skill éœ€è¦æŠ•å…¥ï¼š</p>
<ul>
<li>æ ¸å¿ƒå†…å®¹ï¼ˆSKILL.mdï¼‰ï¼š4-6 å°æ—¶</li>
<li>è¡¥å……èµ„æºï¼š8-12 å°æ—¶</li>
<li>æŒç»­ç»´æŠ¤ï¼šæŒ‰éœ€æ›´æ–°</li>
</ul>
<h3 data-id="heading-31">æ€»ç»“</h3>
<p><strong>åŸç†å±‚é¢</strong>ï¼š</p>
<ul>
<li>Skills æ˜¯ç»™ Claude è£…çš„"ä¸“ä¸šæŠ€èƒ½åŒ…"ï¼Œè®©å®ƒä»å…¨æ‰å˜ä¸“å®¶</li>
<li>é‡‡ç”¨ Progressive Disclosure æ¶æ„ï¼ŒæŒ‰éœ€åŠ è½½ï¼Œtoken æ•ˆç‡é«˜</li>
<li>é€šè¿‡ description è‡ªåŠ¨æ¿€æ´»ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨</li>
<li>å¯ä»¥å¤šä¸ª skills åä½œï¼Œäº’ç›¸è¡¥å……</li>
</ul>
<p><strong>å®ç”¨å±‚é¢</strong>ï¼š</p>
<ul>
<li>å®˜æ–¹ anthropics/skills æä¾›ç”Ÿäº§çº§ Document Skills</li>
<li>ç¤¾åŒº marketplace æä¾›æ›´å¤šç»†åˆ†é¢†åŸŸ skills</li>
<li>è‡ªå®šä¹‰ skill ç®€å•ï¼šä¸€ä¸ªç›®å½• + ä¸€ä¸ª SKILL.md</li>
<li>Skills å’Œ MCP æ˜¯äº’è¡¥å…³ç³»ï¼Œä¸æ˜¯æ›¿ä»£</li>
</ul>
<p><strong>ä½¿ç”¨å»ºè®®</strong>ï¼š</p>
<ol>
<li><strong>æ–°æ‰‹</strong>ï¼šä»å®˜æ–¹ skills å¼€å§‹ï¼Œä½“éªŒä¸“ä¸šåŒ–æå‡</li>
<li><strong>è¿›é˜¶</strong>ï¼šåˆ›å»ºå›¢é˜Ÿç‰¹å®š skillsï¼Œæ²‰æ·€æœ€ä½³å®è·µ</li>
<li><strong>å®‰å…¨</strong>ï¼šåªä½¿ç”¨å¯ä¿¡æ¥æºçš„ skillsï¼Œå®¡æŸ¥æ‰€æœ‰è„šæœ¬</li>
</ol>
<hr/>
<h3 data-id="heading-32">ç›¸å…³èµ„æº</h3>
<h4 data-id="heading-33">å®˜æ–¹æ–‡æ¡£</h4>
<ol>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.claude.com%2Fdocs%2Fen%2Fagents-and-tools%2Fagent-skills%2Foverview" target="_blank" title="https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview" ref="nofollow noopener noreferrer">Agent Skills æ–‡æ¡£</a></strong> - å®Œæ•´ä½¿ç”¨æŒ‡å—</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fequipping-agents-for-the-real-world-with-agent-skills" target="_blank" title="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills" ref="nofollow noopener noreferrer">Skills å·¥ç¨‹åšå®¢</a></strong> - æŠ€æœ¯æ¶æ„è¯¦è§£</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fnews%2Fskills" target="_blank" title="https://www.anthropic.com/news/skills" ref="nofollow noopener noreferrer">Skills å‘å¸ƒå…¬å‘Š</a></strong> - åŠŸèƒ½ä»‹ç»</li>
</ol>
<h4 data-id="heading-34">ä»£ç ä»“åº“</h4>
<ol start="4">
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">anthropics/skills</a></strong> - å®˜æ–¹ Skills ä»“åº“</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwshobson%2Fagents" target="_blank" title="https://github.com/wshobson/agents" ref="nofollow noopener noreferrer">wshobson/agents</a></strong> - ç¤¾åŒº Skills marketplace</li>
</ol>
<h4 data-id="heading-35">æ‰©å±•é˜…è¯»</h4>
<ol start="6">
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fsupport.claude.com%2Fen%2Farticles%2F12512198-how-to-create-custom-skills" target="_blank" title="https://support.claude.com/en/articles/12512198-how-to-create-custom-skills" ref="nofollow noopener noreferrer">åˆ›å»ºè‡ªå®šä¹‰ Skills</a></strong> - å®˜æ–¹æ•™ç¨‹</li>
<li><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.claude.com%2Fblog%2Fskills-explained" target="_blank" title="https://www.claude.com/blog/skills-explained" ref="nofollow noopener noreferrer">Skills vs MCP å¯¹æ¯”</a></strong> - å®˜æ–¹åšå®¢è§£é‡Š</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶2025å¹´11æœˆç®€æŠ¥]]></title>    <link>https://juejin.cn/post/7578681104292708395</link>    <guid>https://juejin.cn/post/7578681104292708395</guid>    <pubDate>2025-12-01T14:24:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578681104292708395" data-draft-id="7578697614390575110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶2025å¹´11æœˆç®€æŠ¥"/> <meta itemprop="keywords" content="åç«¯,.NET"/> <meta itemprop="datePublished" content="2025-12-01T14:24:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¿½é€æ—¶å…‰è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2770425031690333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶2025å¹´11æœˆç®€æŠ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2770425031690333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¿½é€æ—¶å…‰è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:24:06.000Z" title="Mon Dec 01 2025 14:24:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/685df50300ed49aea271aeed0bc66e31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=C%2B52LnkG9xeEAw3Y1dMsxX4Dnf0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>å…¬ä¼—å·æ¯æœˆå®šæœŸæ¨å¹¿å’Œåˆ†äº«çš„C#/.NET/.NET Coreä¼˜ç§€é¡¹ç›®å’Œæ¡†æ¶ï¼ˆæ¯å‘¨è‡³å°‘ä¼šæ¨èä¸¤ä¸ªä¼˜ç§€çš„é¡¹ç›®å’Œæ¡†æ¶å½“ç„¶èŠ‚å‡æ—¥é™¤å¤–ï¼‰ï¼Œå…¬ä¼—å·æ¨æ–‡ä¸­æœ‰é¡¹ç›®å’Œæ¡†æ¶çš„è¯¦ç»†ä»‹ç»ã€åŠŸèƒ½ç‰¹ç‚¹ã€ä½¿ç”¨æ–¹å¼ä»¥åŠéƒ¨åˆ†åŠŸèƒ½æˆªå›¾ç­‰ï¼ˆæ‰“ä¸å¼€æˆ–è€…æ‰“å¼€GitHubå¾ˆæ…¢çš„åŒå­¦å¯ä»¥ä¼˜å…ˆæŸ¥çœ‹å…¬ä¼—å·æ¨æ–‡ï¼Œæ–‡æœ«ä¸€å®šä¼šé™„å¸¦é¡¹ç›®å’Œæ¡†æ¶æºç åœ°å€ï¼‰ã€‚æ³¨æ„ï¼šæ’åä¸åˆ†å…ˆåï¼Œéƒ½æ˜¯ååˆ†ä¼˜ç§€çš„å¼€æºé¡¹ç›®å’Œæ¡†æ¶ï¼Œæ¯å‘¨å®šæœŸæ›´æ–°åˆ†äº«ã€‚</p>
<ul>
<li><strong>ğŸ’¡ç®€æŠ¥Giteeå¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fysgdaydayup%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectMonthly.md" target="_blank" title="https://gitee.com/ysgdaydayup/DotNetGuide/blob/main/docs/DotNet/DotNetProjectMonthly.md" ref="nofollow noopener noreferrer">gitee.com/ysgdaydayupâ€¦</a></strong></li>
<li><strong>ğŸ””ç®€æŠ¥GitHubå¼€æºåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYSGStudyHards%2FDotNetGuide%2Fblob%2Fmain%2Fdocs%2FDotNet%2FDotNetProjectMonthly.md" target="_blank" title="https://github.com/YSGStudyHards/DotNetGuide/blob/main/docs/DotNet/DotNetProjectMonthly.md" ref="nofollow noopener noreferrer">github.com/YSGStudyHarâ€¦</a></strong></li>
</ul>
<h2 data-id="heading-1">STNodeEditor</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> STNodeEditor æ˜¯ä¸€æ¬¾åŸºäº .NET WinForm å¼€æºå…è´¹ï¼ˆMIT Licenseï¼‰ã€è½»é‡ä¸”åŠŸèƒ½å¼ºå¤§çš„èŠ‚ç‚¹ç¼–è¾‘å™¨ï¼Œé‡‡ç”¨çº¯ GDI+ ç»˜åˆ¶æ— ä»»ä½•ä¾èµ–åº“ä»…ä»…100+Kbï¼Œæä¾›äº†ä¸°å¯Œçš„å±æ€§ä»¥åŠäº‹ä»¶ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„å®ŒæˆèŠ‚ç‚¹ä¹‹é—´æ•°æ®çš„äº¤äº’åŠé€šçŸ¥ï¼Œç¼–è¾‘å™¨å†…ç½®äº†å¤§é‡è™šå‡½æ•°ï¼Œä¾›å¼€å‘è€…æ ¹æ®éœ€æ±‚è¿›è¡Œé‡å†™ï¼Œèµ‹äºˆäº†æé«˜çš„è‡ªç”±åº¦å’Œå®šåˆ¶èƒ½åŠ›ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FDebugST%2FSTNodeEditor" target="_blank" title="https://github.com/DebugST/STNodeEditor" ref="nofollow noopener noreferrer">github.com/DebugST/STNâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FfMG3iAu1Y0Fkmf6d-fcgiA" target="_blank" title="https://mp.weixin.qq.com/s/fMG3iAu1Y0Fkmf6d-fcgiA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/fMG3iAu1Yâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4052f6ecec7b45069b2bb8e8ed33f703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=%2FVqqCWv9lD40catX2kuQTBzd%2FJA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3094f1fe1ea14d28892c28e8f9c488ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=8j7JAWzzC5VnJ6bseeuz6yY1IXw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">WenAntdUI-Admin</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> WenAntdUI-Admin æ˜¯ä¸€ä¸ªåŸºäº AntdUI æ„å»ºã€åŸºç¡€ã€ç°ä»£åŒ–çš„ WinForm ç®¡ç†ç³»ç»Ÿï¼ŒåŸºäº Apache-2.0 License å¼€æºï¼Œé¡¹ç›®åŒ…å«ï¼šAOTå‘å¸ƒã€å­—å…¸ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€èœå•ç®¡ç†ã€æƒé™ç®¡ç†ã€ç”¨æˆ·è®¾ç½®ç­‰åŠŸèƒ½ã€‚å†…éƒ¨å°è£…äº†å¾ˆå¤šå¸¸ç”¨ç»„ä»¶ï¼ŒåŒ…å«AdminTableç­‰é€šç”¨ç»„ä»¶ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2FAntdUI%2Fwen-antd-ui" target="_blank" title="https://gitee.com/AntdUI/wen-antd-ui" ref="nofollow noopener noreferrer">gitee.com/AntdUI/wen-â€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FVTBcoZZ2mNyuyV_s4fzsPA" target="_blank" title="https://mp.weixin.qq.com/s/VTBcoZZ2mNyuyV_s4fzsPA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/VTBcoZZ2mâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2aa8f6f09f314348a41cafe134272826~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=CYEOeEa2bPX0dQZtCN%2BE55ArdLg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8933f426bbea442bbe8d396f74bb2129~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=jBL7zwHAI0wRr9iabEgLFeOcYTc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">NetCoreKevin</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> NetCoreKevin æ˜¯ä¸€ä¸ªåŸºäº .NET 8 + DDD æ­å»ºçš„æ¨¡å—åŒ–å¾®æœåŠ¡æ¡†æ¶ï¼Œå…¶æ¨¡å—åŒ–è®¾è®¡ä½¿å¾—æ¯ä¸ªåŠŸèƒ½éƒ½å¯ä»¥ç‹¬ç«‹å¼•ç”¨ï¼Œéå¸¸é€‚åˆå¤§å‹ä¼ä¸šçº§åº”ç”¨çš„å¼€å‘ã€‚æ¡†æ¶æ”¯æŒIdentityServer4å•ç‚¹ç™»å½•ã€å¤šç¼“å­˜ã€è‡ªåŠ¨ä»»åŠ¡ã€åˆ†å¸ƒå¼ã€ä¸€åº“å¤šç§Ÿæˆ·ã€æ—¥å¿—ã€æˆæƒå’Œé‰´æƒã€CAPé›†æˆäº‹ä»¶ã€SignalRã€é¢†åŸŸäº‹ä»¶ã€ESLã€MCPåè®®æœåŠ¡ã€IOCæ¨¡å—åŒ–æ³¨å…¥ã€Corsã€Quartzè‡ªåŠ¨ä»»åŠ¡ã€å¤šçŸ­ä¿¡é›†æˆã€AIæ™ºèƒ½ä½“ã€AI é›†æˆ SemanticKernelã€MCP æœåŠ¡ã€OCRéªŒè¯ç è¯†åˆ«ã€APIå¤šç‰ˆæœ¬å…¼å®¹ã€å•å…ƒé›†æˆæµ‹è¯•ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjunkai-li%2FNetCoreKevin" target="_blank" title="https://github.com/junkai-li/NetCoreKevin" ref="nofollow noopener noreferrer">github.com/junkai-li/Nâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxGM9SLna-ihK1Qe228TRFQ" target="_blank" title="https://mp.weixin.qq.com/s/xGM9SLna-ihK1Qe228TRFQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/xGM9SLna-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4751e78351fb491787358aef4c51a112~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=FXcv%2Fq2OJOeLVSK0qmoR4WnpWSQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd4f0027f40349b09f415048ff48f4bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=lEYU5b43jHhlIv0rUJRkBZfPvMY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">ImageSearch</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> ImageSearch æ˜¯ä¸€ä¸ªåŸºäº .NET WPF å¼€æºã€å…è´¹ï¼ˆMIT licenseï¼‰ã€è½»é‡çš„æœ¬åœ°ç¡¬ç›˜åƒä¸‡çº§å›¾åº“ä»¥å›¾æœå›¾å°å·¥å…·ï¼Œè¯¥é¡¹ç›®çµæ„Ÿæ¥æºäºå¸‚é¢ä¸Šçš„é‡å¤æ–‡ä»¶ã€ç›®å½•æŸ¥æ‰¾ä¸æ¸…ç†çš„ç³»ç»Ÿå·¥å…· DuplicateCleanerã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fldqk%2FImageSearch" target="_blank" title="https://github.com/ldqk/ImageSearch" ref="nofollow noopener noreferrer">github.com/ldqk/ImageSâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FiRDW0KvDDBT5x9lotbR_2Q" target="_blank" title="https://mp.weixin.qq.com/s/iRDW0KvDDBT5x9lotbR_2Q" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/iRDW0KvDDâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/35ac2036fc9546188ec3a3ebfef1c9be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=JT3DcjzP6c9UO8NkSuirv%2BOSQzU%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">better-genshin-impact</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> better-genshin-impact æ˜¯ä¸€æ¬¾åŸºäº .NET + è®¡ç®—æœºè§†è§‰æŠ€æœ¯å®Œå…¨å¼€æºå…è´¹ï¼ˆGPL-3.0 licenseï¼‰ã€åŠŸèƒ½å¼ºå¤§çš„åŸç¥æ™ºèƒ½è¾…åŠ©è‡ªåŠ¨åŒ–å·¥å…·ï¼Œæ„å›¾è®©åŸç¥å˜çš„æ›´å¥½çš„é¡¹ç›®ï¼ŒåŒ…å«ï¼šè‡ªåŠ¨å‰§æƒ…ã€å…¨è‡ªåŠ¨é’“é±¼(AI)ã€å…¨è‡ªåŠ¨ä¸ƒåœ£å¬å”¤ã€è‡ªåŠ¨ä¼æœ¨ã€è‡ªåŠ¨åˆ·æœ¬ã€è‡ªåŠ¨é‡‡é›†/æŒ–çŸ¿/é”„åœ°ç­‰åŠŸèƒ½ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbabalae%2Fbetter-genshin-impact" target="_blank" title="https://github.com/babalae/better-genshin-impact" ref="nofollow noopener noreferrer">github.com/babalae/betâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FwZ4d9baOO2RXsb6VCdSxHQ" target="_blank" title="https://mp.weixin.qq.com/s/wZ4d9baOO2RXsb6VCdSxHQ" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/wZ4d9baOOâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5cff5ae307894721a06bf14e7537316b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=s6iSJ7zqWJHfUinAojGI5KUBztw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/761e373c2175484ab071a85a544ac2d9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=28IVdQAG%2BipnF4Te8ceSBSdqrk0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">DataGridFilter</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> DataGridFilter æ˜¯ä¸€æ¬¾å¼€æºï¼ˆMIT Licenseï¼‰ã€å¤šè¯­è¨€çš„ WPF å¯ç­›é€‰ DataGrid æ§ä»¶ï¼Œæ—¨åœ¨é€šè¿‡è½»é‡çº§é›†æˆå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºé«˜æ•ˆã€çµæ´»çš„æ•°æ®å±•ç¤ºç®¡ç†ç•Œé¢ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmacgile%2FDataGridFilter" target="_blank" title="https://github.com/macgile/DataGridFilter" ref="nofollow noopener noreferrer">github.com/macgile/Datâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FzrU7sivEvJrU090TF6TN3w" target="_blank" title="https://mp.weixin.qq.com/s/zrU7sivEvJrU090TF6TN3w" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/zrU7sivEvâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc330d03edb34f2ba0196031a7d1adca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=td7q8ijZihgWDowEuGM1y6qJ15A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96d3dfa1fff24a5395c15891e3a4e8ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=1gl20hqdgmEmDdnq%2Fv3WaMSH1%2Fs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">Microsoft Agent Framework</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> Microsoft Agent Framework æ˜¯ä¸€ä¸ªé¢å‘ .NET å’Œ Python çš„å¼€æºå¼€å‘å¥—ä»¶ï¼Œç”¨äºæ„å»º AI æ™ºèƒ½ä½“åŠå¤šæ™ºèƒ½ä½“å·¥ä½œæµã€‚å®ƒèåˆå¹¶æ‰©å±•äº† Semantic Kernel ä¸ AutoGen é¡¹ç›®çš„æ ¸å¿ƒç†å¿µï¼Œåœ¨ç»“åˆä¸¤è€…ä¼˜åŠ¿çš„åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å¼•å…¥äº†å…¨æ–°èƒ½åŠ›ã€‚è¯¥æ¡†æ¶ç”±åŸç­å›¢é˜Ÿæ‰“é€ ï¼Œå°†æˆä¸ºæœªæ¥æ„å»º AI æ™ºèƒ½ä½“çš„ç»Ÿä¸€åŸºç¡€å¹³å°ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fagent-framework" target="_blank" title="https://github.com/microsoft/agent-framework" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqxjUYO2U-TCTd0JmEtbehA" target="_blank" title="https://mp.weixin.qq.com/s/qxjUYO2U-TCTd0JmEtbehA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/qxjUYO2U-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/746ef4382646425dac87ce352628ca7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=qDodqsCWDi7zIIya51YkXakat%2BM%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b39bd00a0e141b795cb347907b6cf91~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=XsvPGh5z4cr0AY12HmgK3DnIlzc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">AutoGen</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> AutoGen æ˜¯ä¸€ä¸ªå¼€æºç¼–ç¨‹æ¡†æ¶ï¼Œå®ƒé€šè¿‡å¤šä¸ªä»£ç†è¿›è¡Œå¯¹è¯ä»¥è§£å†³ä»»åŠ¡ï¼Œä»è€Œå®ç° LLM åº”ç”¨çš„å¼€å‘ã€‚AutoGen ä»£ç†å¯å®šåˆ¶ã€å¯å¯¹è¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿæ— ç¼åœ°å…è®¸äººç±»å‚ä¸ã€‚å®ƒä»¬å¯ä»¥åœ¨ä¸åŒçš„æ¨¡å¼ä¸‹è¿è¡Œï¼Œä½¿ç”¨ LLMã€äººç±»è¾“å…¥å’Œå·¥å…·çš„ç»„åˆã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fautogen" target="_blank" title="https://github.com/microsoft/autogen" ref="nofollow noopener noreferrer">github.com/microsoft/aâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqxjUYO2U-TCTd0JmEtbehA" target="_blank" title="https://mp.weixin.qq.com/s/qxjUYO2U-TCTd0JmEtbehA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/qxjUYO2U-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ac79fe4622a4af0a886b4bac56e051f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=1mQbX0OTW1vhN%2BPEwH80TvsLgic%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f21abafd0794502ad2e5d9ff88e3c31~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=znHloCAVB3pTiuEi5XTt%2FA%2BBZVE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">Kernel Memory</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> Kernel Memoryï¼ˆKMï¼‰æ˜¯ä¸€ç§å¤šæ¨¡æ€AIæœåŠ¡ï¼ŒRAG æ¶æ„ï¼Œä½¿ç”¨ LLM å’Œè‡ªç„¶è¯­è¨€ç´¢å¼•å’ŒæŸ¥è¯¢ä»»ä½•æ•°æ®ã€è·Ÿè¸ªæ¥æºã€æ˜¾ç¤ºå¼•ç”¨ã€å¼‚æ­¥å†…å­˜æ¨¡å¼ã€‚è¯¥å­˜å‚¨åº“æä¾›äº†ç‰¹å®š AI å’Œ LLMs åº”ç”¨åœºæ™¯ä¸­å†…å­˜çš„æœ€ä½³å®è·µå’Œå‚è€ƒæ¶æ„ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fkernel-memory" target="_blank" title="https://github.com/microsoft/kernel-memory" ref="nofollow noopener noreferrer">github.com/microsoft/kâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqxjUYO2U-TCTd0JmEtbehA" target="_blank" title="https://mp.weixin.qq.com/s/qxjUYO2U-TCTd0JmEtbehA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/qxjUYO2U-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/340ae63ec6a34bdea8b06b8bc30e5d42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=Fs5PDD8BuRso9VG4tHNBhS3OSeg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c14df5241fc4eeeb010ea4148d53915~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=o9D9mVrXBdtbBQajip0yYHKaydM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">AntSK</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> AntSK æ˜¯ä¸€ä¸ªåŸºäº .NET 9 å’Œ Blazor æŠ€æœ¯æ ˆæ„å»ºçš„ä¼ä¸šçº§AIçŸ¥è¯†åº“å’Œæ™ºèƒ½ä½“å¹³å°ï¼Œé›†æˆäº† Semantic Kernel å’Œ Kernel Memoryï¼Œæä¾›å®Œæ•´çš„AIåº”ç”¨å¼€å‘è§£å†³æ–¹æ¡ˆã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FAIDotNet%2FAntSK" target="_blank" title="https://github.com/AIDotNet/AntSK" ref="nofollow noopener noreferrer">github.com/AIDotNet/Anâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqxjUYO2U-TCTd0JmEtbehA" target="_blank" title="https://mp.weixin.qq.com/s/qxjUYO2U-TCTd0JmEtbehA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/qxjUYO2U-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4794d7af2b1458bbdb0a3ea0709d276~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=Opf1lfD3k5g98QyqXm1e320atLg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85f1cf9ffdec4fdba95bde5e07301b14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=%2F5%2FpnyiZHT6Oo3MvbbpDEKiqnIw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">OllamaSharp</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> OllamaSharp æ—¨åœ¨é€šè¿‡æä¾›.NETç»‘å®šï¼Œä½¿å¾—å¼€å‘è€…èƒ½å¤Ÿè½»æ¾åœ°åœ¨.NETåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨Ollama APIã€‚ç®€åŒ–äº† .NET ä¸ Ollama çš„æœ¬åœ°å’Œè¿œç¨‹äº¤äº’ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fawaescher%2FOllamaSharp" target="_blank" title="https://github.com/awaescher/OllamaSharp" ref="nofollow noopener noreferrer">github.com/awaescher/Oâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FqxjUYO2U-TCTd0JmEtbehA" target="_blank" title="https://mp.weixin.qq.com/s/qxjUYO2U-TCTd0JmEtbehA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/qxjUYO2U-â€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4df41f28e32548a081862bcff2b2adc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=WNlBdjEBRSFG%2FwNYoMB4%2FYBMbUs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-12">WPFUIDemo</h2>
<ul>
<li><strong>é¡¹ç›®ç®€ä»‹ï¼š</strong> WPFUIDemo æ˜¯ä¸€ä¸ªä¸“æ³¨äº WPFï¼ˆWindows Presentation Foundationï¼‰ç”¨æˆ·ç•Œé¢è®¾è®¡ä¸å¼€å‘çš„ç¤ºä¾‹é¡¹ç›®ã€‚è¯¥é¡¹ç›®æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸€ä¸ªå…¨é¢ã€å®ç”¨çš„å‚è€ƒèŒƒä¾‹ï¼Œå¸®åŠ©ä»–ä»¬å¿«é€ŸæŒæ¡ WPF åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€å·§å’Œæœ€ä½³å®è·µï¼Œæå‡å¼€å‘æ•ˆç‡ä¸ç•Œé¢è®¾è®¡æ°´å¹³ã€‚é€šè¿‡ä¸°å¯Œçš„åŠŸèƒ½æ¨¡å—å’Œä»£ç ç¤ºä¾‹ï¼Œå¼€å‘è€…å¯ä»¥æ·±å…¥äº†è§£ WPF çš„å¼ºå¤§ç‰¹æ€§ï¼Œå¹¶å°†å…¶çµæ´»åº”ç”¨äºå®é™…é¡¹ç›®ä¸­ã€‚</li>
<li><strong>é¡¹ç›®æºç åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fzhang-sleepyhead%2FWPFUIDemo" target="_blank" title="https://gitee.com/zhang-sleepyhead/WPFUIDemo" ref="nofollow noopener noreferrer">gitee.com/zhang-sleepâ€¦</a></li>
<li><strong>é¡¹ç›®è¯¦ç»†ä»‹ç»ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F15oTrGmLzGl4AAUV6maIgw" target="_blank" title="https://mp.weixin.qq.com/s/15oTrGmLzGl4AAUV6maIgw" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/15oTrGmLzâ€¦</a></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65a8555feece44e8b3043dfd92248d2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=FvMI9HZewyXaQDzOE%2F%2BBz%2FWQ32w%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3965fab39473445dbe60d4657dc19f5c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L-96YCQ5pe25YWJ6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765203868&amp;x-signature=hDoQK0z3dLmFTRotuHCjkIphxa0%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[k8så®ç”¨è„šæœ¬]]></title>    <link>https://juejin.cn/post/7578732288515538995</link>    <guid>https://juejin.cn/post/7578732288515538995</guid>    <pubDate>2025-12-01T14:29:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578732288515538995" data-draft-id="7578699866182107174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="k8så®ç”¨è„šæœ¬"/> <meta itemprop="keywords" content="Kubernetes"/> <meta itemprop="datePublished" content="2025-12-01T14:29:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å“ˆé‡Œè°¢é¡¿"/> <meta itemprop="url" content="https://juejin.cn/user/3678304397695056"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            k8så®ç”¨è„šæœ¬
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3678304397695056/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å“ˆé‡Œè°¢é¡¿
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:29:09.000Z" title="Mon Dec 01 2025 14:29:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1 å°†dockerç®¡ç†çš„é•œåƒä¼ é€’ç»™k8sä½¿ç”¨</h2>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>

<span class="hljs-comment"># docker-to-ctr.sh</span>
<span class="hljs-comment"># å°†æœ¬åœ°æ‰€æœ‰ Docker é•œåƒå¯¼å‡ºä¸º tar å¹¶å­˜å‚¨åˆ°æŒ‡å®šç›®å½•</span>
<span class="hljs-comment"># è‹¥ç›®æ ‡ tar å·²å­˜åœ¨åˆ™è·³è¿‡</span>

DIR=<span class="hljs-string">"/home/hanwang/docker_images"</span>

<span class="hljs-built_in">set</span> -e

<span class="hljs-comment"># åˆ›å»ºå­˜å‚¨ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$DIR</span>"</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ” è·å–æœ¬åœ° Docker é•œåƒåˆ—è¡¨..."</span>
IMAGES=$(docker images --format <span class="hljs-string">"{{.Repository}}:{{.Tag}}"</span> | grep -v <span class="hljs-string">"&lt;none&gt;"</span>)

<span class="hljs-keyword">if</span> [ -z <span class="hljs-string">"<span class="hljs-variable">$IMAGES</span>"</span> ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âŒ æœªæ‰¾åˆ°æœ‰æ•ˆçš„ Docker é•œåƒï¼ˆæ’é™¤ &lt;none&gt; æ ‡ç­¾ï¼‰"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

COUNT=$(<span class="hljs-built_in">echo</span> <span class="hljs-string">"<span class="hljs-variable">$IMAGES</span>"</span> | <span class="hljs-built_in">wc</span> -l)
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“¦ å…±æ‰¾åˆ° <span class="hljs-variable">${COUNT}</span> ä¸ªé•œåƒï¼Œå¼€å§‹ä¿å­˜åˆ° <span class="hljs-variable">${DIR}</span> ..."</span>

<span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> <span class="hljs-variable">$IMAGES</span>; <span class="hljs-keyword">do</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"â¡ï¸  å¤„ç†é•œåƒ: <span class="hljs-variable">$img</span>"</span>
  
  <span class="hljs-comment"># ç›®æ ‡ tar æ–‡ä»¶åï¼šå°†ä»“åº“/æ ‡ç­¾ä¸­çš„ç‰¹æ®Šå­—ç¬¦æ›¿æ¢ä¸ºä¸‹åˆ’çº¿</span>
  TARGET_TAR=<span class="hljs-string">"<span class="hljs-variable">${DIR}</span>/<span class="hljs-subst">$(echo <span class="hljs-string">"<span class="hljs-variable">$img</span>"</span> | tr '/' '_' | tr ':' '_')</span>.tar"</span>

  <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$TARGET_TAR</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"â­ï¸  å·²å­˜åœ¨ï¼š<span class="hljs-variable">$TARGET_TAR</span>ï¼Œè·³è¿‡ä¿å­˜"</span>
    <span class="hljs-built_in">continue</span>
  <span class="hljs-keyword">fi</span>

  <span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ’¾ ä¿å­˜é•œåƒä¸º tarï¼š<span class="hljs-variable">$TARGET_TAR</span>"</span>
  docker save <span class="hljs-string">"<span class="hljs-variable">$img</span>"</span> -o <span class="hljs-string">"<span class="hljs-variable">$TARGET_TAR</span>"</span>
  <span class="hljs-comment"># å¯¼å…¥åˆ° containerd çš„ k8s.io å‘½åç©ºé—´ï¼ˆKubernetes ä½¿ç”¨æ­¤å‘½åç©ºé—´ï¼‰</span>
  ctr -n k8s.io images import --no-unpack <span class="hljs-string">"<span class="hljs-variable">$TARGET_TAR</span>"</span>
  
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… é•œåƒ <span class="hljs-variable">$img</span> å·²å¯¼å…¥ containerd"</span>
  <span class="hljs-built_in">echo</span> <span class="hljs-string">"âœ… å·²ä¿å­˜ï¼š<span class="hljs-variable">$TARGET_TAR</span>"</span>
<span class="hljs-keyword">done</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ‰ æ‰€æœ‰é•œåƒä¿å­˜å®Œæˆï¼"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"ğŸ“‚ å­˜å‚¨ç›®å½•ï¼š<span class="hljs-variable">$DIR</span>"</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»3å°æ—¶åˆ°30åˆ†é’Ÿï¼šæˆ‘çš„AIå†™ä½œå·¥ä½œæµå®Œæ•´æ‹†è§£]]></title>    <link>https://juejin.cn/post/7578719771588886538</link>    <guid>https://juejin.cn/post/7578719771588886538</guid>    <pubDate>2025-12-01T14:42:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578719771588886538" data-draft-id="7578719771588870154" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»3å°æ—¶åˆ°30åˆ†é’Ÿï¼šæˆ‘çš„AIå†™ä½œå·¥ä½œæµå®Œæ•´æ‹†è§£"/> <meta itemprop="keywords" content="AIGC,AIOps"/> <meta itemprop="datePublished" content="2025-12-01T14:42:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯æ¢ç´¢å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2735240657517816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»3å°æ—¶åˆ°30åˆ†é’Ÿï¼šæˆ‘çš„AIå†™ä½œå·¥ä½œæµå®Œæ•´æ‹†è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2735240657517816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯æ¢ç´¢å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T14:42:16.000Z" title="Mon Dec 01 2025 14:42:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd21e3452b834594862df27b001f5802~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oqA5pyv5o6i57Si5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765205646&amp;x-signature=v1HInsMMzncyWD%2FjR7r0JF3lIf0%3D" alt="ai-writing-workflow.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p>ä¹‹å‰å†™ä¸€ç¯‡å…¬ä¼—å·æ¨æ–‡ï¼Œæˆ‘å¾—èŠ±3ä¸ªå°æ—¶ï¼š1å°æ—¶æƒ³é€‰é¢˜ï¼ˆåˆ·åŠå¤©æ•°æ®è¿˜æ˜¯ä¸çŸ¥é“å†™å•¥ï¼‰ï¼Œ1.5å°æ—¶å†™åˆç¨¿ï¼ˆå†™ä¸¤å¥å¡ä¸€å¥ï¼‰ï¼Œæœ€åè¿˜å¾—æ”¹åŠå°æ—¶ã€‚ä¸€å¤©å†™ä¸¤ç¯‡å°±ç´¯ç˜«äº†ï¼Œæ›´åˆ«æä¿æŒæ—¥æ›´äº†ã€‚</p>
<p>åæ¥æˆ‘æŠŠAIæ•´åˆåˆ°å†™ä½œæµç¨‹é‡Œï¼Œç°åœ¨ä»é€‰é¢˜åˆ°åˆç¨¿å®Œæˆåªéœ€è¦30åˆ†é’Ÿï¼Œè€Œä¸”è´¨é‡æ¯”ä»¥å‰æ›´ç¨³å®šã€‚å…³é”®ä¸æ˜¯è®©AIæ›¿ä½ å†™ï¼Œè€Œæ˜¯è®©å®ƒå¸®ä½ åšå¥½æ¯ä¸ªç¯èŠ‚çš„å‡†å¤‡å·¥ä½œã€‚</p>
<p>è¯´å®è¯ï¼Œæˆ‘ä¸€å¼€å§‹ä¹Ÿæ‹…å¿ƒç”¨AIå†™çš„å†…å®¹ä¼šä¸ä¼šå¤ª"æœºæ¢°"ï¼Œè¯»è€…èƒ½ä¸èƒ½æ¥å—ã€‚ä½†å½“æˆ‘æŒæ¡äº†æ­£ç¡®çš„æ–¹æ³•åï¼Œå‘ç°AIå…¶å®æ˜¯ä¸ªè¶…çº§é«˜æ•ˆçš„åŠ©æ‰‹â€”â€”å®ƒå¸®æˆ‘å¿«é€Ÿåº¦è¿‡æœ€è€—æ—¶çš„"å¯åŠ¨é˜¶æ®µ"å’Œ"æ¡†æ¶æ­å»º"ï¼Œè®©æˆ‘èƒ½æŠŠç²¾åŠ›é›†ä¸­åœ¨çœŸæ­£éœ€è¦åˆ›æ„çš„åœ°æ–¹ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä¼šåˆ†äº«ä¸€å¥—å®Œæ•´çš„AIè¾…åŠ©å†™ä½œå·¥ä½œæµã€‚ä½ ä¼šå¾—åˆ°ï¼š</p>
<ul>
<li><strong>4æ­¥å®Œæ•´å·¥ä½œæµ</strong>ï¼šé€‰é¢˜â†’å¤§çº²â†’åˆç¨¿â†’æ¶¦è‰²ï¼Œæ¯æ­¥éƒ½æœ‰å…·ä½“æ–¹æ³•</li>
<li><strong>4ä¸ªå®æˆ˜Promptæ¨¡æ¿</strong>ï¼šç›´æ¥å¤åˆ¶å°±èƒ½ç”¨ï¼Œä¸ç”¨è‡ªå·±æ‘¸ç´¢</li>
<li><strong>ä¸»æµå·¥å…·å¯¹æ¯”</strong>ï¼šChatGPTã€Claudeã€æ–‡å¿ƒä¸€è¨€è¯¥é€‰å“ªä¸ª</li>
<li><strong>å»AIå‘³æŠ€å·§</strong>ï¼šè®©AIç”Ÿæˆçš„å†…å®¹æ›´äººæ€§åŒ–çš„5ä¸ªæ–¹æ³•</li>
<li><strong>å®Œæ•´æ¡ˆä¾‹æ‹†è§£</strong>ï¼šä»é€‰é¢˜åˆ°æˆç¨¿çš„çœŸå®è¿‡ç¨‹</li>
</ul>
<p>çœ‹å®Œè¿™ç¯‡ï¼Œä½ é©¬ä¸Šå°±èƒ½ç”¨èµ·æ¥ï¼Œç«‹åˆ»è§æ•ˆã€‚</p>
<hr/>
<h3 data-id="heading-1">ç¬¬ä¸€ç« ï¼šAIè¾…åŠ©å†™ä½œçš„æ­£ç¡®æ‰“å¼€æ–¹å¼</h3>
<p>æˆ‘è§è¿‡å¤ªå¤šäººç”¨AIå†™ä½œçš„æ–¹å¼éƒ½æ˜¯é”™çš„ã€‚</p>
<p><strong>æœ€å¸¸è§çš„ä¸‰ä¸ªè¯¯åŒºï¼š</strong></p>
<p>ç¬¬ä¸€ä¸ªæ˜¯ç›´æ¥è®©AIå†™å…¨æ–‡ã€‚æ‰“å¼€ChatGPTï¼Œè¾“å…¥"å†™ä¸€ç¯‡å…³äºXXXçš„æ–‡ç« "ï¼Œç„¶åæŠŠç”Ÿæˆçš„å†…å®¹ç›´æ¥å¤åˆ¶ç²˜è´´ã€‚ç»“æœå‘¢ï¼ŸAIå‘³å¤ªé‡ï¼Œè¯»è€…ä¸€çœ¼å°±èƒ½çœ‹å‡ºæ¥ï¼Œè€Œä¸”å†…å®¹ç¼ºä¹æ·±åº¦å’Œä¸ªäººè§è§£ã€‚è¿™æ ·ç”¨AIï¼Œå…¶å®æ˜¯æµªè´¹äº†å®ƒçš„èƒ½åŠ›ã€‚</p>
<p>ç¬¬äºŒä¸ªæ˜¯åªåœ¨å¡å£³æ—¶æ‰æƒ³èµ·æ¥ç”¨AIã€‚å†™äº†ä¸€åŠå†™ä¸ä¸‹å»äº†ï¼Œæ‰æ‰“å¼€ChatGPTé—®"æ€ä¹ˆç»§ç»­"ã€‚è¿™ç§æ–¹å¼æ²¡æœ‰ç³»ç»ŸåŒ–ï¼Œæ•ˆç‡æå‡æœ‰é™ã€‚å°±åƒå¼€è½¦åªåœ¨è¿·è·¯æ—¶çœ‹å¯¼èˆªï¼Œè€Œä¸æ˜¯æå‰è§„åˆ’è·¯çº¿ã€‚</p>
<p>ç¬¬ä¸‰ä¸ªæ˜¯ç”¨ä¸€ä¸ªå·¥å…·å¹²æ‰€æœ‰äº‹ã€‚è¦ä¹ˆå…¨ç”¨ChatGPTï¼Œè¦ä¹ˆå…¨ç”¨Claudeï¼Œä½†å…¶å®ä¸åŒç¯èŠ‚éœ€è¦ä¸åŒå·¥å…·çš„ä¼˜åŠ¿ã€‚é€‰é¢˜é€‚åˆChatGPTçš„å‘æ•£æ€ç»´ï¼Œæ¶¦è‰²é€‚åˆClaudeçš„ç»†è…»è¡¨è¾¾ã€‚</p>
<p><strong>æ­£ç¡®çš„ç†å¿µæ˜¯ä»€ä¹ˆï¼Ÿ</strong></p>
<p>AIä¸æ˜¯æ›¿ä»£ä½ å†™ä½œï¼Œè€Œæ˜¯è¾…åŠ©ä½ çš„æ€è€ƒå’Œæ‰§è¡Œã€‚æˆ‘ç°åœ¨çš„æ–¹å¼æ˜¯æŠŠå†™ä½œæ‹†è§£æˆ4ä¸ªç¯èŠ‚ï¼š</p>
<ol>
<li><strong>é€‰é¢˜é˜¶æ®µ</strong>ï¼šAIå¸®æˆ‘å¿«é€Ÿç”Ÿæˆ10-20ä¸ªé€‰é¢˜æ–¹å‘ï¼Œå¹¶è¯„ä¼°æ¯ä¸ªé€‰é¢˜çš„æ½œåŠ›</li>
<li><strong>å¤§çº²é˜¶æ®µ</strong>ï¼šAIå¸®æˆ‘æ­å»ºæ–‡ç« æ¡†æ¶ï¼Œç¡®å®šæ¯éƒ¨åˆ†çš„æ ¸å¿ƒè¦ç‚¹</li>
<li><strong>åˆç¨¿é˜¶æ®µ</strong>ï¼šAIå¸®æˆ‘å¿«é€Ÿç”Ÿæˆæ¯ä¸ªæ®µè½çš„åˆç¨¿ï¼Œæˆ‘è´Ÿè´£è¡¥å……ç»†èŠ‚å’Œä¸ªäººç»éªŒ</li>
<li><strong>æ¶¦è‰²é˜¶æ®µ</strong>ï¼šAIå¸®æˆ‘å»æ‰ç”Ÿç¡¬è¡¨è¾¾ï¼Œä¼˜åŒ–èŠ‚å¥å’Œå¯è¯»æ€§</li>
</ol>
<p>æ ¸å¿ƒåŸåˆ™æ˜¯ï¼š<strong>AIåšå‡†å¤‡å·¥ä½œï¼Œäººåšåˆ›æ„å†³ç­–</strong>ã€‚</p>
<p><strong>æ•ˆç‡å¯¹æ¯”æœ‰å¤šå¤§ï¼Ÿ</strong></p>
<p>æˆ‘è‡ªå·±çš„çœŸå®æ•°æ®ï¼š</p>
<ul>
<li><strong>ä¼ ç»Ÿæµç¨‹</strong>ï¼šé€‰é¢˜1å°æ—¶ + å†™ä½œ2å°æ—¶ + ä¿®æ”¹1å°æ—¶ = 4å°æ—¶</li>
<li><strong>AIè¾…åŠ©æµç¨‹</strong>ï¼šé€‰é¢˜15åˆ†é’Ÿ + å¤§çº²10åˆ†é’Ÿ + åˆç¨¿15åˆ†é’Ÿ + æ¶¦è‰²20åˆ†é’Ÿ = 1å°æ—¶</li>
</ul>
<p>ä¸ºä»€ä¹ˆèƒ½å¿«è¿™ä¹ˆå¤šï¼Ÿå› ä¸ºAIå¸®ä½ å¿«é€Ÿåº¦è¿‡äº†"å¯åŠ¨é˜¶æ®µ"ï¼ˆä¸çŸ¥é“å†™ä»€ä¹ˆï¼‰å’Œ"æ¡†æ¶æ­å»º"ï¼ˆä¸çŸ¥é“æ€ä¹ˆç»„ç»‡ï¼‰ï¼Œè¿™ä¸¤ä¸ªç¯èŠ‚å¾€å¾€å æ‰70%çš„æ—¶é—´ã€‚ä¸€æ—¦æœ‰äº†æ–¹å‘å’Œæ¡†æ¶ï¼Œå†™ä½œå°±ä¼šå˜å¾—é¡ºç•…å¾ˆå¤šã€‚</p>
<p>æ ¹æ®36æ°ªçš„ã€Š2025å†…å®¹åˆ›ä½œè¡Œä¸šç™½çš®ä¹¦ã€‹ï¼Œä½¿ç”¨AIçš„åˆ›ä½œè€…å¹³å‡æ•ˆç‡æå‡3-5å€ã€‚æˆ‘è‡ªå·±çš„æ„Ÿå—æ˜¯ï¼Œä¸€å‘¨çš„å†…å®¹äº§å‡ºé‡ä»2ç¯‡æå‡åˆ°äº†10ç¯‡ï¼Œè€Œä¸”è´¨é‡æ›´ç¨³å®šäº†ã€‚</p>
<p>ä½ å¯èƒ½ä¼šé—®ï¼Œè¿™çœŸçš„æœ‰ç”¨å—ï¼Ÿæˆ‘çš„å»ºè®®æ˜¯ï¼šçœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œé©¬ä¸Šè¯•ä¸€æ¬¡ã€‚ä½ ä¼šç«‹åˆ»æ„Ÿå—åˆ°å·®å¼‚ã€‚</p>
<hr/>
<h3 data-id="heading-2">ç¬¬äºŒç« ï¼š4æ­¥AIè¾…åŠ©å†™ä½œå·¥ä½œæµè¯¦è§£</h3>
<p>å¥½ï¼Œç°åœ¨è¿›å…¥æœ€æ ¸å¿ƒçš„éƒ¨åˆ†â€”â€”å®Œæ•´çš„4æ­¥å·¥ä½œæµã€‚æ¯ä¸€æ­¥æˆ‘éƒ½ä¼šç»™ä½ å¯ä»¥ç›´æ¥å¤åˆ¶çš„Promptæ¨¡æ¿ã€‚</p>
<h4 data-id="heading-3">æ­¥éª¤1ï¼šAIè¾…åŠ©é€‰é¢˜ï¼ˆ15åˆ†é’Ÿï¼‰</h4>
<p><strong>æœ€å¤´ç–¼çš„é—®é¢˜</strong>ï¼šä¸çŸ¥é“å†™ä»€ä¹ˆï¼Œæ‹…å¿ƒé€‰é¢˜æ²¡äººçœ‹ã€‚</p>
<p>æˆ‘ä»¥å‰é€‰é¢˜èƒ½çº ç»“1ä¸ªå°æ—¶ï¼Œæ‰“å¼€å¾®ä¿¡æŒ‡æ•°çœ‹æ•°æ®ï¼Œåˆ·å°çº¢ä¹¦æ‰¾çƒ­ç‚¹ï¼Œè„‘å­é‡Œæƒ³äº†20ä¸ªæ–¹å‘ï¼Œæœ€åè¿˜æ˜¯ä¸ç¡®å®šå“ªä¸ªå¥½ã€‚åæ¥æˆ‘å‘ç°ï¼Œç”¨AIç”Ÿæˆé€‰é¢˜æ–¹å‘ï¼Œæ•ˆç‡èƒ½æå‡10å€ã€‚</p>
<p><strong>AIå¦‚ä½•å¸®ä½ é€‰é¢˜ï¼Ÿ</strong></p>
<ul>
<li>åˆ†æä½ çš„é¢†åŸŸï¼Œç”Ÿæˆ10-20ä¸ªé€‰é¢˜æ–¹å‘</li>
<li>è¯„ä¼°æ¯ä¸ªé€‰é¢˜çš„å¸å¼•åŠ›ï¼ˆæœç´¢é‡ã€ç«äº‰åº¦ï¼‰</li>
<li>æä¾›ä¸åŒè§’åº¦ï¼šç—›ç‚¹è§£å†³å‹ã€å¯¹æ¯”åˆ†æå‹ã€æ¡ˆä¾‹æ‹†è§£å‹</li>
</ul>
<p><strong>å®æˆ˜Promptæ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">ä½ æ˜¯ä¸€ä½èµ„æ·±å†…å®¹ç­–åˆ’ï¼Œè¯·å¸®æˆ‘ç”Ÿæˆ10ä¸ª[é¢†åŸŸ]çš„é€‰é¢˜æ–¹å‘ã€‚

èƒŒæ™¯ï¼š
- ç›®æ ‡è¯»è€…ï¼š[æè¿°å—ä¼—ï¼Œæ¯”å¦‚ï¼š25-35å²çš„æ–°æ‰‹çˆ¶æ¯ï¼Œå…³æ³¨å„¿ç«¥æ•™è‚²]
- å†…å®¹å¹³å°ï¼š[å…¬ä¼—å·/å°çº¢ä¹¦/çŸ¥ä¹ç­‰]
- å†…å®¹é£æ ¼ï¼š[å¹²è´§/æ•…äº‹/è§‚ç‚¹ç­‰]

è¦æ±‚ï¼š
1. æ¯ä¸ªé€‰é¢˜åŒ…å«ï¼šæ ‡é¢˜æ–¹å‘ã€æ ¸å¿ƒå–ç‚¹ã€ç›®æ ‡å…³é”®è¯
2. ä¼˜å…ˆè€ƒè™‘ä»¥ä¸‹è§’åº¦ï¼š
   - ç—›ç‚¹è§£å†³å‹ï¼ˆå¦‚"å¦‚ä½•..."ã€"Xä¸ªæ–¹æ³•..."ï¼‰
   - å¯¹æ¯”åˆ†æå‹ï¼ˆå¦‚"A vs B"ã€"é€‰æ‹©æŒ‡å—"ï¼‰
   - æ¡ˆä¾‹æ‹†è§£å‹ï¼ˆå¦‚"å®æˆ˜æ¡ˆä¾‹"ã€"æˆ‘çš„ç»éªŒ"ï¼‰
3. è¯„ä¼°æ¯ä¸ªé€‰é¢˜çš„å¸å¼•åŠ›ï¼ˆ1-5åˆ†ï¼‰

è¾“å‡ºæ ¼å¼ï¼š
é€‰é¢˜1ï¼š[æ ‡é¢˜æ–¹å‘]
- æ ¸å¿ƒå–ç‚¹ï¼š
- ç›®æ ‡å…³é”®è¯ï¼š
- å¸å¼•åŠ›è¯„åˆ†ï¼š
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<p>æˆ‘æœ‰æ¬¡ç”¨è¿™ä¸ªæ¨¡æ¿ç”Ÿæˆ"èŒåœºæ•ˆç‡å·¥å…·"çš„é€‰é¢˜ï¼ŒAIç»™äº†æˆ‘10ä¸ªæ–¹å‘ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯"ä»3å°æ—¶åˆ°30åˆ†é’Ÿï¼šæˆ‘çš„AIå†™ä½œå·¥ä½œæµå®Œæ•´æ‹†è§£"ï¼Œå¸å¼•åŠ›è¯„åˆ†5åˆ†ã€‚æˆ‘ä¸€çœ‹ï¼Œè¿™ä¸ªé€‰é¢˜æ—¢æœ‰å¯¹æ¯”æ•°æ®ï¼ˆ3å°æ—¶åˆ°30åˆ†é’Ÿï¼‰ï¼Œåˆæ‰¿è¯ºè¯¦ç»†æ–¹æ³•ï¼ˆå®Œæ•´æ‹†è§£ï¼‰ï¼Œç«‹åˆ»å°±å†³å®šå†™è¿™ä¸ªã€‚</p>
<p>æ•´ä¸ªé€‰é¢˜è¿‡ç¨‹ï¼Œä»è¾“å…¥Promptåˆ°ç¡®å®šæ–¹å‘ï¼ŒåªèŠ±äº†15åˆ†é’Ÿã€‚</p>
<h4 data-id="heading-4">æ­¥éª¤2ï¼šAIè¾…åŠ©å¤§çº²ï¼ˆ10åˆ†é’Ÿï¼‰</h4>
<p><strong>æœ€å¤´ç–¼çš„é—®é¢˜</strong>ï¼šæ–‡ç« ç»“æ„æ··ä¹±ï¼Œå†™ç€å†™ç€å°±è·‘åäº†ã€‚</p>
<p>ä»¥å‰æˆ‘å†™æ–‡ç« ç»å¸¸æ˜¯æƒ³åˆ°å“ªå†™åˆ°å“ªï¼Œå†™åˆ°ä¸€åŠå‘ç°é€»è¾‘ä¸é€šï¼Œåˆå¾—æ¨å€’é‡æ¥ã€‚ç°åœ¨æˆ‘ç”¨AIæ­å»ºå¤§çº²ï¼Œå…ˆæŠŠæ¡†æ¶å®šå¥½ï¼Œå†™ä½œå°±é¡ºç•…å¤šäº†ã€‚</p>
<p><strong>AIå¦‚ä½•å¸®ä½ æ­å¤§çº²ï¼Ÿ</strong></p>
<ul>
<li>å¿«é€Ÿæ­å»ºæ–‡ç« æ¡†æ¶ï¼ˆå¼•è¨€ã€ä¸»ä½“ã€ç»“è®ºï¼‰</li>
<li>ç¡®å®šæ¯éƒ¨åˆ†çš„æ ¸å¿ƒè¦ç‚¹ï¼ˆä¸ä¼šé—æ¼å…³é”®ä¿¡æ¯ï¼‰</li>
<li>é¢„ä¼°å­—æ•°åˆ†é…ï¼ˆé¿å…æŸéƒ¨åˆ†å†™å¤ªé•¿æˆ–å¤ªçŸ­ï¼‰</li>
</ul>
<p><strong>å®æˆ˜Promptæ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">è¯·ä¸ºä»¥ä¸‹æ–‡ç« ç”Ÿæˆè¯¦ç»†å¤§çº²ï¼š

æ ‡é¢˜ï¼š[ä½ é€‰å®šçš„æ ‡é¢˜]
ç›®æ ‡å­—æ•°ï¼š[1500-2000å­—]
ç›®æ ‡è¯»è€…ï¼š[æè¿°å—ä¼—åŠå…¶ç—›ç‚¹]

å¤§çº²è¦æ±‚ï¼š
1. åŒ…å«å¼•è¨€ã€3-5ä¸ªä¸»ä½“ç« èŠ‚ã€ç»“è®º
2. æ¯ä¸ªç« èŠ‚æ ‡æ³¨ï¼š
   - æ ¸å¿ƒè¦ç‚¹ï¼ˆ3-5ä¸ªå­è¦ç‚¹ï¼‰
   - å»ºè®®å­—æ•°
   - éœ€è¦çš„æ¡ˆä¾‹/æ•°æ®
3. å¼•è¨€è¦æœ‰å¸å¼•åŠ›ï¼Œç»“è®ºè¦æœ‰è¡ŒåŠ¨å·å¬

é¢å¤–è¦æ±‚ï¼š
- é€»è¾‘æµç•…ï¼Œå±‚å±‚é€’è¿›
- é¿å…ç©ºæ´å†…å®¹ï¼Œæ¯éƒ¨åˆ†éƒ½è¦æœ‰ä»·å€¼
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<p>å½“æˆ‘å†³å®šå†™"AIå†™ä½œå·¥ä½œæµ"è¿™ä¸ªé€‰é¢˜åï¼Œæˆ‘ç”¨è¿™ä¸ªPromptç”Ÿæˆå¤§çº²ã€‚AIç»™äº†æˆ‘ä¸€ä¸ª5æ®µå¼ç»“æ„ï¼šå¼•è¨€ï¼ˆå›°å¢ƒå¯¹æ¯”ï¼‰â†’æ­£ç¡®ç†å¿µâ†’4æ­¥å·¥ä½œæµâ†’å·¥å…·å¯¹æ¯”â†’å®Œæ•´æ¡ˆä¾‹â†’ç»“è®ºã€‚</p>
<p>æˆ‘çœ‹äº†ä¸€éï¼Œè§‰å¾—ç»“æ„å¾ˆæ¸…æ™°ï¼Œä½†ç¬¬äºŒç« "4æ­¥å·¥ä½œæµ"éœ€è¦æ›´è¯¦ç»†çš„å­è¦ç‚¹ï¼Œæ‰€ä»¥æˆ‘åˆé’ˆå¯¹è¿™ç« å•ç‹¬ç”Ÿæˆäº†è¯¦ç»†å¤§çº²ã€‚æ•´ä¸ªè¿‡ç¨‹10åˆ†é’Ÿæå®šã€‚</p>
<p>å…³é”®æ˜¯ï¼š<strong>å¤§çº²ç”Ÿæˆåï¼Œä½ éœ€è¦äººå·¥æ£€æŸ¥å’Œè°ƒæ•´</strong>ã€‚AIç»™çš„æ˜¯é€šç”¨æ¡†æ¶ï¼Œä½†ä½ è¦æ ¹æ®è‡ªå·±çš„ç»éªŒè¡¥å……ç»†èŠ‚ã€‚</p>
<h4 data-id="heading-5">æ­¥éª¤3ï¼šAIè¾…åŠ©åˆç¨¿ï¼ˆ15åˆ†é’Ÿï¼‰</h4>
<p><strong>æœ€å¤´ç–¼çš„é—®é¢˜</strong>ï¼šå†™ä½œå¡å£³ï¼Œä¸çŸ¥é“æ€ä¹ˆå±•å¼€æ¯ä¸ªæ®µè½ã€‚</p>
<p>ä»¥å‰æˆ‘å†™åˆ°æŸä¸ªéƒ¨åˆ†ï¼Œè„‘å­é‡Œæœ‰æƒ³æ³•ï¼Œä½†ä¸çŸ¥é“æ€ä¹ˆç”¨æ–‡å­—è¡¨è¾¾ï¼Œç»å¸¸å¡ä½åŠå°æ—¶å†™ä¸å‡ºä¸€ä¸ªå­—ã€‚ç°åœ¨æˆ‘ç”¨AIå¿«é€Ÿç”Ÿæˆåˆç¨¿ï¼Œç„¶ååœ¨åˆç¨¿åŸºç¡€ä¸Šä¿®æ”¹ï¼Œæ•ˆç‡æå‡å¤ªå¤šäº†ã€‚</p>
<p><strong>AIå¦‚ä½•å¸®ä½ å†™åˆç¨¿ï¼Ÿ</strong></p>
<ul>
<li>åŸºäºå¤§çº²å¿«é€Ÿç”Ÿæˆæ¯ä¸ªç« èŠ‚çš„å†…å®¹</li>
<li>æä¾›æ®µè½å±•å¼€æ€è·¯ï¼ˆä½ å¯èƒ½æ²¡æƒ³åˆ°çš„è§’åº¦ï¼‰</li>
<li>è¡¥å……æ¡ˆä¾‹å’Œæ•°æ®ï¼ˆè®©å†…å®¹æ›´ä¸°æ»¡ï¼‰</li>
</ul>
<p><strong>å…³é”®æŠ€å·§ï¼šåˆ†æ®µç”Ÿæˆï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§ç”Ÿæˆå…¨æ–‡</strong></p>
<p>ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºåˆ†æ®µç”Ÿæˆè´¨é‡æ›´é«˜ï¼Œæ›´å®¹æ˜“æ§åˆ¶ã€‚ä¸€æ¬¡ç”Ÿæˆå…¨æ–‡ï¼ŒAIå®¹æ˜“è·‘åï¼Œè€Œä¸”ä½ å¾ˆéš¾é€æ®µå®¡æ ¸ã€‚æˆ‘çš„æ–¹æ³•æ˜¯ï¼šä¸€æ¬¡ç”Ÿæˆ1-2ä¸ªæ®µè½ï¼Œäººå·¥å®¡æ ¸åç»§ç»­ã€‚</p>
<p><strong>å®æˆ˜Promptæ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">åŸºäºä»¥ä¸‹å¤§çº²ï¼Œæ’°å†™[ç¬¬Xç« ]çš„å†…å®¹ï¼š

ã€å¤§çº²å†…å®¹ã€‘
[ç²˜è´´è¯¥ç« èŠ‚çš„å¤§çº²]

ã€å†™ä½œè¦æ±‚ã€‘
1. å­—æ•°ï¼šçº¦[X]å­—
2. é£æ ¼ï¼š
   - ç”¨ç¬¬ä¸€äººç§°ï¼Œåƒæœ‹å‹èŠå¤©
   - ç”¨çœŸå®æ¡ˆä¾‹å’Œå…·ä½“åœºæ™¯
   - é¿å…ç©ºæ´è¯´æ•™ï¼Œå¤šç”¨"ä½ å¯ä»¥è¿™æ ·..."çš„å¥å¼
3. ç»“æ„ï¼š
   - å¼€å¤´ç‚¹æ˜è¿™éƒ¨åˆ†è¦è§£å†³ä»€ä¹ˆé—®é¢˜
   - ä¸­é—´ç”¨2-3ä¸ªè¦ç‚¹å±•å¼€
   - ç»“å°¾æ€»ç»“å…³é”®è¡ŒåŠ¨
4. é¿å…ï¼š
   - ä¸è¦ç”¨"ç»¼ä¸Šæ‰€è¿°"ã€"å› æ­¤"ç­‰AIå‘³è¯æ±‡
   - ä¸è¦è¿‡åº¦ä½¿ç”¨"é¦–å…ˆã€å…¶æ¬¡ã€æœ€å"
   - ä¸è¦å †ç Œä¸“ä¸šæœ¯è¯­

ã€å‚è€ƒä¿¡æ¯ã€‘
[å¦‚æœæœ‰ç›¸å…³èµ„æ–™æˆ–æ¡ˆä¾‹ï¼Œåœ¨è¿™é‡Œæä¾›]
</code></pre>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<p>å½“æˆ‘å†™"é€‰é¢˜é˜¶æ®µ"è¿™éƒ¨åˆ†æ—¶ï¼Œæˆ‘ç”¨è¿™ä¸ªPromptç”Ÿæˆäº†åˆç¨¿ã€‚AIç»™äº†æˆ‘ä¸€ä¸ª3æ®µç»“æ„ï¼šç—›ç‚¹æè¿°â†’AIå¦‚ä½•å¸®å¿™â†’Promptæ¨¡æ¿â†’å®é™…æ¡ˆä¾‹ã€‚</p>
<p>åˆç¨¿è´¨é‡è¿˜ä¸é”™ï¼Œä½†æˆ‘å‘ç°ç¼ºå°‘ä¸ªäººç»å†ï¼Œäºæ˜¯æˆ‘åŠ äº†ä¸€å¥ï¼š"æˆ‘ä»¥å‰é€‰é¢˜èƒ½çº ç»“1ä¸ªå°æ—¶ï¼Œæ‰“å¼€å¾®ä¿¡æŒ‡æ•°çœ‹æ•°æ®ï¼Œåˆ·å°çº¢ä¹¦æ‰¾çƒ­ç‚¹ï¼Œè„‘å­é‡Œæƒ³äº†20ä¸ªæ–¹å‘ï¼Œæœ€åè¿˜æ˜¯ä¸ç¡®å®šå“ªä¸ªå¥½ã€‚"è¿™æ ·ä¸€åŠ ï¼Œå†…å®¹å°±æœ‰æ¸©åº¦äº†ã€‚</p>
<p><strong>è®°ä½ï¼šAIç”Ÿæˆçš„æ˜¯åˆç¨¿ï¼Œä½ çš„å·¥ä½œæ˜¯è®©å®ƒå˜å¾—æ›´çœŸå®ã€æ›´æœ‰ä¸ªæ€§ã€‚</strong></p>
<h4 data-id="heading-6">æ­¥éª¤4ï¼šAIè¾…åŠ©æ¶¦è‰²ï¼ˆ20åˆ†é’Ÿï¼‰</h4>
<p><strong>æœ€å¤´ç–¼çš„é—®é¢˜</strong>ï¼šåˆç¨¿å†™å®Œäº†ï¼Œä½†æ€»è§‰å¾—ä¸å¤Ÿ"äººæ€§åŒ–"ï¼Œæœ‰ç‚¹ç”Ÿç¡¬ã€‚</p>
<p>è¿™æ˜¯æˆ‘èŠ±æ—¶é—´æœ€å¤šçš„ç¯èŠ‚ã€‚å› ä¸ºAIç”Ÿæˆçš„åˆç¨¿è™½ç„¶é€»è¾‘æ¸…æ™°ï¼Œä½†ç»å¸¸æœ‰äº›"AIå‘³"â€”â€”æ¯”å¦‚"å› æ­¤"ã€"ç»¼ä¸Šæ‰€è¿°"è¿™äº›è¯ï¼Œæˆ–è€…æ®µè½è¿‡äºå®Œç¾å¯¹ç§°ã€‚è¯»è€…ä¸€çœ‹å°±çŸ¥é“æ˜¯AIå†™çš„ã€‚</p>
<p><strong>AIå¦‚ä½•å¸®ä½ æ¶¦è‰²ï¼Ÿ</strong></p>
<ul>
<li>å»é™¤AIå‘³ï¼Œæ›¿æ¢ç”Ÿç¡¬è¡¨è¾¾</li>
<li>ä¼˜åŒ–å¥å­èŠ‚å¥ï¼Œé•¿çŸ­å¥ç»“åˆ</li>
<li>å¢å¼ºäººæ€§åŒ–ï¼ŒåŠ å…¥å¯¹è¯æ„Ÿ</li>
</ul>
<p><strong>å®æˆ˜Promptæ¨¡æ¿ï¼š</strong></p>
<pre><code class="hljs language-text" lang="text">è¯·å¸®æˆ‘ä¼˜åŒ–ä»¥ä¸‹æ–‡ç« æ®µè½ï¼Œé‡ç‚¹å»é™¤AIå‘³ï¼Œå¢å¼ºäººæ€§åŒ–è¡¨è¾¾ï¼š

ã€åŸæ–‡ã€‘
[ç²˜è´´éœ€è¦ä¼˜åŒ–çš„æ®µè½]

ã€ä¼˜åŒ–è¦æ±‚ã€‘
1. å»AIå‘³ï¼š
   - æ›¿æ¢ï¼šå› æ­¤â†’æ‰€ä»¥ã€å®é™…ä¸Šâ†’å…¶å®ã€ç›¸å½“â†’æŒº
   - åˆ é™¤ï¼šç»¼ä¸Šæ‰€è¿°ã€ä¸éš¾å‘ç°ã€å€¼å¾—æ³¨æ„çš„æ˜¯
   - é¿å…ï¼šè¿‡äºå®Œç¾çš„ä¸‰æ®µè®ºé€»è¾‘
2. å¢åŠ äººæ€§åŒ–ï¼š
   - åŠ å…¥ä¸ªäººç»å†æˆ–è§‚å¯Ÿï¼š"æˆ‘å‘ç°..."ã€"æœ‰æ¬¡æˆ‘..."
   - ç”¨å…·ä½“ç»†èŠ‚æ›¿ä»£ç¬¼ç»Ÿæ¦‚å¿µ
   - é€‚å½“ä½¿ç”¨ç–‘é—®å¥å’Œè¯»è€…å¯¹è¯
3. ä¼˜åŒ–èŠ‚å¥ï¼š
   - é•¿çŸ­å¥ç»“åˆ
   - é€‚å½“æ–­å¥ï¼Œé¿å…è¶…é•¿æ®µè½
   - å…³é”®ä¿¡æ¯ç”¨çŸ­å¥çªå‡º

ã€ä¿æŒä¸å˜ã€‘
- æ ¸å¿ƒè§‚ç‚¹å’Œä¿¡æ¯
- æ•´ä½“ç»“æ„
</code></pre>
<p><strong>å»AIå‘³çš„5ä¸ªå®ç”¨æŠ€å·§ï¼š</strong></p>
<ol>
<li><strong>æ›¿æ¢AIå¸¸ç”¨è¿æ¥è¯</strong>ï¼šå› æ­¤â†’æ‰€ä»¥ã€å®é™…ä¸Šâ†’å…¶å®ã€ç›¸å½“â†’æŒºã€ç„¶è€Œâ†’ä½†</li>
<li><strong>æ‰“ç ´å®Œç¾å¯¹ç§°çš„ç»“æ„</strong>ï¼šä¸è¦æ¯æ®µéƒ½æ˜¯"é¦–å…ˆã€å…¶æ¬¡ã€æœ€å"ï¼Œé€‚å½“ç”¨"è¿˜æœ‰ä¸€ä¸ªç‚¹"ã€"å¦å¤–"</li>
<li><strong>å¢åŠ å…·ä½“ç»†èŠ‚å’Œåœºæ™¯</strong>ï¼šä¸è¯´"æ•ˆç‡æå‡å¾ˆå¤š"ï¼Œè€Œè¯´"ä»3å°æ—¶ç¼©çŸ­åˆ°30åˆ†é’Ÿ"</li>
<li><strong>é€‚å½“è¡¨è¾¾ä¸ç¡®å®šæ€§</strong>ï¼šä¸æ€»æ˜¯è¯´"ä¸€å®š"ã€"å¿…é¡»"ï¼Œå¯ä»¥è¯´"æˆ‘è§‰å¾—"ã€"å¯èƒ½"</li>
<li><strong>åŠ å…¥ä¸ªäººè‰²å½©å’Œæƒ…æ„Ÿ</strong>ï¼šåˆ†äº«ä½ çš„å›°æƒ‘ã€æƒŠå–œã€å¤±æœ›ï¼Œè®©è¯»è€…æ„Ÿå—åˆ°çœŸå®çš„äºº</li>
</ol>
<p><strong>å®é™…ä½¿ç”¨ç¤ºä¾‹ï¼š</strong></p>
<p>æˆ‘ç”¨è¿™ä¸ªPromptä¼˜åŒ–äº†å¼•è¨€éƒ¨åˆ†ã€‚åŸæœ¬AIç”Ÿæˆçš„å¼€å¤´æ˜¯ï¼š"åœ¨å½“ä»Šå†…å®¹åˆ›ä½œé¢†åŸŸï¼Œæ•ˆç‡æ˜¯å…³é”®å› ç´ ã€‚AIå·¥å…·å¯ä»¥æ˜¾è‘—æå‡å†™ä½œæ•ˆç‡ã€‚"</p>
<p>ä¼˜åŒ–åå˜æˆï¼š"ä¹‹å‰å†™ä¸€ç¯‡å…¬ä¼—å·æ¨æ–‡ï¼Œæˆ‘å¾—èŠ±3ä¸ªå°æ—¶ï¼š1å°æ—¶æƒ³é€‰é¢˜ï¼Œ1.5å°æ—¶å†™åˆç¨¿,è¿˜å¾—æ”¹åŠå°æ—¶ã€‚ä¸€å¤©å†™ä¸¤ç¯‡å°±ç´¯ç˜«äº†ã€‚"</p>
<p>ä½ çœ‹ï¼Œä¼˜åŒ–åæ˜¯ä¸æ˜¯æ›´çœŸå®ã€æ›´æœ‰ä»£å…¥æ„Ÿï¼Ÿ</p>
<p><strong>å°ç»“ï¼š4æ­¥å·¥ä½œæµçš„æ—¶é—´åˆ†é…</strong></p>
<p>é€‰é¢˜ï¼ˆ15åˆ†é’Ÿï¼‰â†’ å¤§çº²ï¼ˆ10åˆ†é’Ÿï¼‰â†’ åˆç¨¿ï¼ˆ15åˆ†é’Ÿï¼‰â†’ æ¶¦è‰²ï¼ˆ20åˆ†é’Ÿï¼‰= <strong>æ€»è®¡1å°æ—¶</strong></p>
<p>å¯¹æ¯”ä¼ ç»Ÿæµç¨‹çš„4å°æ—¶ï¼Œæ•ˆç‡æå‡äº†<strong>75%</strong>ã€‚è€Œä¸”è¿™è¿˜æ˜¯ä¿å®ˆä¼°è®¡ï¼Œéšç€ä½ å¯¹å·¥ä½œæµè¶Šæ¥è¶Šç†Ÿç»ƒï¼Œé€Ÿåº¦è¿˜ä¼šæ›´å¿«ã€‚</p>
<hr/>
<h3 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šä¸»æµAIå†™ä½œå·¥å…·å¯¹æ¯”å’Œé€‰æ‹©</h3>
<p>å·¥å…·å¤ªå¤šï¼Œåˆ°åº•è¯¥ç”¨å“ªä¸ªï¼Ÿè¿™æ˜¯æˆ‘æœ€å¸¸è¢«é—®çš„é—®é¢˜ã€‚</p>
<p>æˆ‘è‡ªå·±æµ‹è¯•è¿‡å¸‚é¢ä¸Šæ‰€æœ‰ä¸»æµçš„AIå†™ä½œå·¥å…·ï¼Œä¸‹é¢ç»™ä½ ä¸€ä¸ªå®Œæ•´å¯¹æ¯”ã€‚</p>
<h4 data-id="heading-8">1. ChatGPTï¼ˆæœ€å…¨èƒ½ï¼‰â­â­â­â­â­</h4>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>åŠŸèƒ½æœ€å…¨é¢ï¼Œä»é€‰é¢˜åˆ°æ¶¦è‰²éƒ½èƒ½æå®š</li>
<li>å…è´¹ç‰ˆå°±èƒ½æ»¡è¶³å¤§éƒ¨åˆ†éœ€æ±‚</li>
<li>ç”Ÿæˆé€Ÿåº¦å¿«ï¼Œè¾“å‡ºè´¨é‡ç¨³å®š</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šä»é€‰é¢˜åˆ°æ¶¦è‰²çš„æ‰€æœ‰ç¯èŠ‚</p>
<p><strong>æˆæœ¬</strong>ï¼šå…è´¹ç‰ˆå¤Ÿç”¨ï¼ŒPlusç‰ˆ $20/æœˆï¼ˆå¦‚æœé«˜é¢‘ä½¿ç”¨å»ºè®®å‡çº§ï¼‰</p>
<p><strong>æˆ‘çš„ä½¿ç”¨æ„Ÿå—</strong>ï¼šChatGPTæ˜¯æˆ‘ç”¨å¾—æœ€å¤šçš„å·¥å…·ï¼Œ80%çš„å·¥ä½œæµéƒ½é å®ƒã€‚å°¤å…¶æ˜¯é€‰é¢˜å’Œå¤§çº²é˜¶æ®µï¼ŒChatGPTçš„å‘æ•£æ€ç»´ç‰¹åˆ«å¼ºï¼Œèƒ½ç»™ä½ å¾ˆå¤šæ„æƒ³ä¸åˆ°çš„è§’åº¦ã€‚</p>
<h4 data-id="heading-9">2. Claudeï¼ˆæœ€äººæ€§åŒ–ï¼‰â­â­â­â­</h4>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>è¾“å‡ºæ›´äººæ€§åŒ–ï¼Œé€»è¾‘æ›´æ¸…æ™°</li>
<li>ç‰¹åˆ«æ“…é•¿é•¿æ–‡æœ¬çš„ç†è§£å’Œç”Ÿæˆ</li>
<li>å¯¹ä¸­æ–‡çš„è¯­å¢ƒç†è§£æ¯”ChatGPTå¥½ä¸€äº›</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤§çº²æ­å»ºã€å†…å®¹æ¶¦è‰²</p>
<p><strong>æˆæœ¬</strong>ï¼šå…è´¹ç‰ˆé™åˆ¶è¾ƒå¤šï¼ŒProç‰ˆ $20/æœˆ</p>
<p><strong>æˆ‘çš„ä½¿ç”¨æ„Ÿå—</strong>ï¼šClaudeåœ¨æ¶¦è‰²ç¯èŠ‚ç‰¹åˆ«å¥½ç”¨ã€‚å½“ä½ ç”¨ChatGPTç”Ÿæˆäº†åˆç¨¿ï¼Œæƒ³è®©å†…å®¹æ›´"äººæ€§åŒ–"æ—¶ï¼ŒæŠŠå†…å®¹ä¸¢ç»™Claudeä¼˜åŒ–ï¼Œæ•ˆæœä¼šæ›´å¥½ã€‚</p>
<h4 data-id="heading-10">3. æ–‡å¿ƒä¸€è¨€ï¼ˆå›½å†…é€‰æ‹©ï¼‰â­â­â­â­</h4>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>å¯¹ä¸­æ–‡è¯­å¢ƒç†è§£å¥½ï¼Œç”Ÿæˆçš„å†…å®¹æ›´ç¬¦åˆå›½å†…è¡¨è¾¾ä¹ æƒ¯</li>
<li>æ— éœ€ç¿»å¢™ï¼Œè®¿é—®ç¨³å®š</li>
<li>å¯¹å…¬ä¼—å·ã€å°çº¢ä¹¦ç­‰å¹³å°çš„é£æ ¼ç†è§£åˆ°ä½</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå…¬ä¼—å·ã€å°çº¢ä¹¦ç­‰ä¸­æ–‡å†…å®¹åˆ›ä½œ</p>
<p><strong>æˆæœ¬</strong>ï¼šåŸºç¡€åŠŸèƒ½å…è´¹</p>
<p><strong>æˆ‘çš„ä½¿ç”¨æ„Ÿå—</strong>ï¼šå¦‚æœä½ ä¸»è¦å†™ä¸­æ–‡å†…å®¹ï¼Œè€Œä¸”ä¸æƒ³æŠ˜è…¾ç¿»å¢™ï¼Œæ–‡å¿ƒä¸€è¨€æ˜¯æœ€ä½³é€‰æ‹©ã€‚å®ƒå¯¹"å°çº¢ä¹¦çˆ†æ¬¾æ ‡é¢˜"ã€"å…¬ä¼—å·å¼€å¤´"è¿™äº›åœºæ™¯ç‰¹åˆ«ç†è§£ã€‚</p>
<h4 data-id="heading-11">4. Notion AIï¼ˆæœ€ä¾¿æ·ï¼‰â­â­â­</h4>
<p><strong>ä¼˜åŠ¿ï¼š</strong></p>
<ul>
<li>é›†æˆåœ¨ç¬”è®°å·¥å…·ä¸­ï¼Œå†™ä½œæ¶¦è‰²ä¸€ä½“åŒ–</li>
<li>å¯ä»¥ç›´æ¥åœ¨æ–‡æ¡£ä¸­è°ƒç”¨AI</li>
<li>é€‚åˆå·²ç»åœ¨ç”¨Notionç®¡ç†å†…å®¹çš„åˆ›ä½œè€…</li>
</ul>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå·²ä½¿ç”¨Notionçš„åˆ›ä½œè€…</p>
<p><strong>æˆæœ¬</strong>ï¼š$10/æœˆï¼ˆéœ€è¦å…ˆæœ‰Notionè®¢é˜…ï¼‰</p>
<p><strong>æˆ‘çš„ä½¿ç”¨æ„Ÿå—</strong>ï¼šå¦‚æœä½ å·²ç»åœ¨ç”¨Notionåšå†…å®¹ç®¡ç†ï¼ŒNotion AIç¡®å®å¾ˆæ–¹ä¾¿ã€‚ä½†å¦‚æœä½ ä¸ç”¨Notionï¼Œå°±æ²¡å¿…è¦ä¸ºäº†AIå•ç‹¬è®¢é˜…ã€‚</p>
<h4 data-id="heading-12">å·¥å…·ç»„åˆå»ºè®®</h4>
<p>æ ¹æ®ä¸åŒé˜¶æ®µï¼Œæˆ‘æ¨èè¿™æ ·ç»„åˆï¼š</p>
<ul>
<li><strong>æ–°æ‰‹å…¥é—¨</strong>ï¼šChatGPTå…è´¹ç‰ˆï¼ˆå…¨æµç¨‹éƒ½èƒ½æå®šï¼‰</li>
<li><strong>è¿›é˜¶ä½¿ç”¨</strong>ï¼šChatGPT Plusï¼ˆé€‰é¢˜+åˆç¨¿ï¼‰+ Claudeï¼ˆæ¶¦è‰²ï¼‰</li>
<li><strong>å›½å†…ç”¨æˆ·</strong>ï¼šæ–‡å¿ƒä¸€è¨€ï¼ˆä¸»åŠ›ï¼‰+ ChatGPTï¼ˆå¤‡ç”¨ï¼‰</li>
</ul>
<p><strong>å·¥å…·ä½¿ç”¨æŠ€å·§ï¼š</strong></p>
<ol>
<li>åŒä¸€å†…å®¹åœ¨ä¸åŒå·¥å…·æµ‹è¯•ï¼Œé€‰æœ€å¥½çš„è¾“å‡º</li>
<li>åˆ©ç”¨å„å·¥å…·ä¼˜åŠ¿ï¼šChatGPTåšå‘æ•£ï¼ŒClaudeåšæ”¶æ•›</li>
<li>å»ºç«‹Promptæ¨¡æ¿åº“ï¼Œæé«˜å¤ç”¨æ•ˆç‡</li>
</ol>
<p>è¯´å®è¯ï¼Œå·¥å…·åªæ˜¯æ‰‹æ®µï¼Œå…³é”®æ˜¯ä½ çš„å·¥ä½œæµã€‚å“ªæ€•åªç”¨ChatGPTå…è´¹ç‰ˆï¼Œåªè¦å·¥ä½œæµæ¸…æ™°ï¼Œæ•ˆç‡ä¹Ÿèƒ½æå‡å¥½å‡ å€ã€‚</p>
<hr/>
<h3 data-id="heading-13">ç¬¬å››ç« ï¼šè¿›é˜¶æŠ€å·§å’Œé¿å‘æŒ‡å—</h3>
<p>æŒæ¡åŸºç¡€å·¥ä½œæµåï¼Œä½ è¿˜å¯ä»¥ç”¨è¿™äº›è¿›é˜¶æŠ€å·§è¿›ä¸€æ­¥æå‡æ•ˆç‡ã€‚</p>
<h4 data-id="heading-14">è¿›é˜¶æŠ€å·§</h4>
<p><strong>1. å»ºç«‹ä¸ªäººPromptæ¨¡æ¿åº“</strong></p>
<p>æŠŠå¸¸ç”¨çš„Promptä¿å­˜åˆ°Notionæˆ–é£ä¹¦æ–‡æ¡£ï¼ŒæŒ‰ç…§ä¸åŒå¹³å°åˆ†ç±»ï¼š</p>
<ul>
<li>å…¬ä¼—å·é€‰é¢˜Prompt</li>
<li>å°çº¢ä¹¦æ–‡æ¡ˆPrompt</li>
<li>çŸ¥ä¹å›ç­”Prompt</li>
</ul>
<p>æˆ‘ç°åœ¨æœ‰20+ä¸ªPromptæ¨¡æ¿ï¼Œæ¯æ¬¡å†™ä½œç›´æ¥è°ƒç”¨ï¼Œçœå»äº†é‡æ–°æƒ³Promptçš„æ—¶é—´ã€‚</p>
<p><strong>2. åˆ©ç”¨AIè¿›è¡Œå†…å®¹ä¼˜åŒ–</strong></p>
<p>AIä¸åªæ˜¯å¸®ä½ å†™ï¼Œè¿˜èƒ½å¸®ä½ åˆ†æï¼š</p>
<ul>
<li>ç”¨AIåˆ†ææ–‡ç« çš„SEOè¡¨ç°ï¼ˆå…³é”®è¯å¯†åº¦ã€å¯è¯»æ€§ï¼‰</li>
<li>è®©AIæä¾›æ ‡é¢˜çš„10ä¸ªå˜ä½“ï¼ˆé€‰æœ€å¸å¼•äººçš„ï¼‰</li>
<li>ç”¨AIç”Ÿæˆä¸åŒé£æ ¼çš„å¼€å¤´å’Œç»“å°¾ï¼ˆA/Bæµ‹è¯•ï¼‰</li>
</ul>
<p><strong>3. æ‰¹é‡ç”Ÿäº§å†…å®¹</strong></p>
<p>å¦‚æœä½ éœ€è¦æŒç»­äº§å‡ºå†…å®¹ï¼Œå¯ä»¥è¿™æ ·åšï¼š</p>
<ul>
<li>ä¸€æ¬¡ç”Ÿæˆ10ä¸ªå¤§çº²ï¼Œæ‰¹é‡æ‰§è¡Œ</li>
<li>åˆ©ç”¨AIè¿›è¡Œå†…å®¹æ”¹å†™å’Œå¤šå¹³å°é€‚é…ï¼ˆä¸€ç¯‡æ–‡ç« æ”¹æˆå…¬ä¼—å·ç‰ˆã€å°çº¢ä¹¦ç‰ˆã€çŸ¥ä¹ç‰ˆï¼‰</li>
<li>å»ºç«‹å†…å®¹æ—¥å†ï¼Œç³»ç»ŸåŒ–ç”Ÿäº§</li>
</ul>
<h4 data-id="heading-15">å¸¸è§é”™è¯¯å’Œé¿å‘</h4>
<p><strong>1. è¿‡åº¦ä¾èµ–AI</strong></p>
<p>é”™è¯¯åšæ³•ï¼šå®Œå…¨ç…§æ¬AIè¾“å‡ºï¼Œä¸åšä»»ä½•ä¿®æ”¹ã€‚
æ­£ç¡®åšæ³•ï¼šAIæä¾›æ¡†æ¶ï¼Œäººè¡¥å……ç»†èŠ‚å’Œä¸ªæ€§ã€‚</p>
<p><strong>2. å¿½è§†äººå·¥å®¡æ ¸</strong></p>
<p>é”™è¯¯åšæ³•ï¼šAIå†™å®Œç›´æ¥å‘å¸ƒï¼Œç»“æœå‡ºç°äº‹å®é”™è¯¯æˆ–é€»è¾‘é—®é¢˜ã€‚
æ­£ç¡®åšæ³•ï¼šå¿…é¡»äººå·¥æ£€æŸ¥äº‹å®ã€é€»è¾‘ã€è¯­æ°”ã€‚</p>
<p><strong>3. Promptå¤ªæ¨¡ç³Š</strong></p>
<p>é”™è¯¯åšæ³•ï¼š"å¸®æˆ‘å†™ä¸€ç¯‡æ–‡ç« "
æ­£ç¡®åšæ³•ï¼šä½¿ç”¨ç»“æ„åŒ–Promptï¼Œæ˜ç¡®å—ä¼—ã€é£æ ¼ã€å­—æ•°ã€è¦æ±‚ã€‚</p>
<p><strong>4. ä¸åšè¿­ä»£ä¼˜åŒ–</strong></p>
<p>é”™è¯¯åšæ³•ï¼šä¸€ä¸ªPromptç”¨åˆ°åº•ï¼Œæ•ˆæœä¸å¥½ä¹Ÿä¸è°ƒæ•´ã€‚
æ­£ç¡®åšæ³•ï¼šæ ¹æ®å®é™…æ•ˆæœæŒç»­ä¼˜åŒ–Promptæ¨¡æ¿ã€‚</p>
<p><strong>5. å¿½è§†å¹³å°ç‰¹æ€§</strong></p>
<p>é”™è¯¯åšæ³•ï¼šæ‰€æœ‰å¹³å°ç”¨åŒä¸€å¥—å†…å®¹ã€‚
æ­£ç¡®åšæ³•ï¼šæ ¹æ®å¹³å°è°ƒæ•´é£æ ¼å’Œç»“æ„ï¼ˆå…¬ä¼—å·è¦æ·±åº¦ï¼Œå°çº¢ä¹¦è¦è§†è§‰ï¼ŒçŸ¥ä¹è¦ä¸“ä¸šï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-16">ç»“è®º</h3>
<p>AIè¾…åŠ©å†™ä½œçš„æœ¬è´¨ï¼Œä¸æ˜¯è®©AIæ›¿ä»£ä½ ï¼Œè€Œæ˜¯ä¼˜åŒ–ä½ çš„å·¥ä½œæµç¨‹ã€‚</p>
<p>å›é¡¾ä¸€ä¸‹æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li><strong>4æ­¥å·¥ä½œæµæ˜¯å…³é”®</strong>ï¼šé€‰é¢˜â†’å¤§çº²â†’åˆç¨¿â†’æ¶¦è‰²ï¼Œæ¯ä¸ªç¯èŠ‚éƒ½æœ‰å¯¹åº”çš„Promptæ¨¡æ¿</li>
<li><strong>å·¥å…·é€‰æ‹©çœ‹éœ€æ±‚</strong>ï¼šChatGPTæ˜¯æœ€å…¨èƒ½é€‰æ‹©ï¼ŒClaudeé€‚åˆæ¶¦è‰²ï¼Œæ–‡å¿ƒä¸€è¨€é€‚åˆå›½å†…ç”¨æˆ·</li>
<li><strong>äººæœºåä½œæ˜¯æ ¸å¿ƒ</strong>ï¼šAIåš80%çš„æ‰§è¡Œå·¥ä½œï¼Œäººåš20%çš„åˆ›æ„å†³ç­–</li>
<li><strong>å»AIå‘³å¾ˆé‡è¦</strong>ï¼šç”¨Promptä¼˜åŒ–+äººå·¥è°ƒæ•´ï¼Œè®©å†…å®¹æ›´äººæ€§åŒ–</li>
</ol>
<p><strong>ç«‹å³è¡ŒåŠ¨æ¸…å•ï¼š</strong></p>
<ol>
<li>ä¿å­˜æœ¬æ–‡çš„4ä¸ªPromptæ¨¡æ¿ï¼ˆé€‰é¢˜ã€å¤§çº²ã€åˆç¨¿ã€æ¶¦è‰²ï¼‰</li>
<li>é€‰æ‹©ä¸€ä¸ªAIå·¥å…·ï¼ˆæ¨èChatGPTï¼Œå…è´¹ç‰ˆå°±å¤Ÿç”¨ï¼‰</li>
<li>ç”¨æœ¬æ–‡çš„å·¥ä½œæµå†™ä¸€ç¯‡æ–‡ç« </li>
<li>è®°å½•æ—¶é—´ï¼Œå¯¹æ¯”æ•ˆç‡æå‡</li>
</ol>
<p>è¯•è¯•çœ‹ï¼Œä½ ä¼šå‘ç°å†™ä½œä¸å†æ˜¯ç—›è‹¦çš„äº‹ï¼Œè€Œæ˜¯é«˜æ•ˆçš„åˆ›ä½œè¿‡ç¨‹ã€‚å½“ä½ æŒæ¡è¿™å¥—æ–¹æ³•åï¼Œå†ä¹Ÿä¸ç”¨ä¸ºå†…å®¹äº§å‡ºå‘æ„äº†</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.betterlink.top%2Fzh%2Fposts%2Fmedia%2F20250125-ai-writing-workflow%2F" target="_blank" title="https://blog.betterlink.top/zh/posts/media/20250125-ai-writing-workflow/" ref="nofollow noopener noreferrer">è‡ªä¸ªäººåšå®¢</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Joplinï¼šä¸€æ¬¾çœŸæ­£å±äºä½ çš„å¼€æºç¬”è®°ä¸å¾…åŠäº‹é¡¹åº”ç”¨]]></title>    <link>https://juejin.cn/post/7578699975414169600</link>    <guid>https://juejin.cn/post/7578699975414169600</guid>    <pubDate>2025-12-01T15:02:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699975414169600" data-draft-id="7578714759337361408" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Joplinï¼šä¸€æ¬¾çœŸæ­£å±äºä½ çš„å¼€æºç¬”è®°ä¸å¾…åŠäº‹é¡¹åº”ç”¨"/> <meta itemprop="keywords" content="Markdown"/> <meta itemprop="datePublished" content="2025-12-01T15:02:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Joplinï¼šä¸€æ¬¾çœŸæ­£å±äºä½ çš„å¼€æºç¬”è®°ä¸å¾…åŠäº‹é¡¹åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T15:02:25.000Z" title="Mon Dec 01 2025 15:02:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¿¡æ¯çˆ†ç‚¸çš„æ—¶ä»£ï¼Œæˆ‘ä»¬æ¯å¤©éƒ½åœ¨æ¥æ”¶ã€å¤„ç†å’Œäº§ç”Ÿå¤§é‡ä¿¡æ¯ã€‚ä¸€æ¬¾ä¼˜ç§€çš„ç¬”è®°è½¯ä»¶ä¸ä»…æ˜¯æˆ‘ä»¬è®°å¿†çš„å»¶ä¼¸ï¼Œæ›´æ˜¯çŸ¥è¯†ç®¡ç†çš„æ ¸å¿ƒå·¥å…·ã€‚å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€æ¬¾<strong>çœŸæ­£å°Šé‡ä½ æ•°æ®æ‰€æœ‰æƒã€åŠŸèƒ½å…¨é¢ä¸”å®Œå…¨å…è´¹ï¼Œå¹¶ä¸”æ”¯æŒå¤šç«¯åŒæ­¥</strong>çš„ç¬”è®°åº”ç”¨ï¼Œé‚£ä¹ˆJoplinå€¼å¾—ä½ æ·±å…¥äº†è§£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57e9c6cee9a949e383caebba2a78dccb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=C%2FKyguXr6eeDpGMfxZY9pEe8L64%3D" alt="fill_w374_h374_g0_mark_2021012515175784.png" loading="lazy"/></p>
<p>fill_w374_h374_g0_mark_2021012515175784.png</p>
<h2 data-id="heading-0">ä»€ä¹ˆæ˜¯Joplinï¼Ÿ</h2>
<p>Joplinæ˜¯ä¸€æ¬¾<strong>å…è´¹ã€å¼€æºçš„ç¬”è®°å’Œå¾…åŠäº‹é¡¹ç®¡ç†åº”ç”¨</strong>ï¼Œå®ƒèƒ½å¤Ÿå¤„ç†å¤§é‡ç¬”è®°å¹¶å°†å…¶ç»„ç»‡åˆ°ä¸åŒçš„ç¬”è®°æœ¬ä¸­ã€‚æ‰€æœ‰ç¬”è®°éƒ½é‡‡ç”¨Markdownæ ¼å¼ï¼Œè¿™æ„å‘³ç€ä½ çš„å†…å®¹æ°¸è¿œä¸ä¼šè¢«ä¸“æœ‰æ ¼å¼é”å®šã€‚</p>
<p>è¯¥é¡¹ç›®å·²ç»åœ¨github ä¸Šå·²ç»æ‹¥æœ‰ 52.4k star</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bde59855410b4f6582623db30f7a64fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=rlUWVRc5pyx4Y1FWZ4f1%2BdQHaj0%3D" alt="ScreenShot_2025-12-01_220457_085.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-01_220457_085.png</p>
<p>github åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flaurent22%2Fjoplin" target="_blank" title="https://github.com/laurent22/joplin" ref="nofollow noopener noreferrer">github.com/laurent22/jâ€¦</a></p>
<p>å®˜ç½‘åœ°å€ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fjoplinapp.org%2F" target="_blank" title="https://joplinapp.org/" ref="nofollow noopener noreferrer">joplinapp.org/</a></p>
<h2 data-id="heading-1">æ ¸å¿ƒç‰¹è‰²ä¸ä¼˜åŠ¿</h2>
<h3 data-id="heading-2">ğŸ”’ <strong>ç¦»çº¿ä¼˜å…ˆï¼Œæ•°æ®è‡ªä¸»</strong></h3>
<p>Jopliné‡‡ç”¨â€œç¦»çº¿ä¼˜å…ˆâ€è®¾è®¡ç†å¿µï¼Œä½ çš„æ‰€æœ‰æ•°æ®éƒ½å­˜å‚¨åœ¨æœ¬åœ°è®¾å¤‡ä¸Šã€‚æ— è®ºæ˜¯å¦æœ‰ç½‘ç»œè¿æ¥ï¼Œä½ éƒ½èƒ½éšæ—¶éšåœ°è®¿é—®è‡ªå·±çš„ç¬”è®°ã€‚è¿™ä¸ä»…æ˜¯ä¾¿åˆ©æ€§çš„é—®é¢˜ï¼Œæ›´æ˜¯<strong>æ•°æ®ä¸»æƒçš„ä¿éšœ</strong>â€”â€”ä½ çš„ç¬”è®°æ°¸è¿œå±äºä½ ã€‚</p>
<h3 data-id="heading-3">ğŸ”„ <strong>å®‰å…¨åŒæ­¥ä¸ç«¯åˆ°ç«¯åŠ å¯†</strong></h3>
<p>Joplinæ”¯æŒé€šè¿‡å¤šç§äº‘æœåŠ¡è¿›è¡ŒåŒæ­¥ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>Nextcloudï¼ˆè‡ªå»ºäº‘é¦–é€‰ï¼‰</li>
<li>Dropbox</li>
<li>OneDrive</li>
<li>Joplin Cloudï¼ˆå®˜æ–¹åŒæ­¥æœåŠ¡ï¼‰</li>
<li>s3</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a4f748f814f84601a3ae077e70a0b9a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=Yt3sF21oqR3Cu6TNmKAHe34HcGY%3D" alt="ScreenShot_2025-12-01_220803_263.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-01_220803_263.png</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œæ‰€æœ‰åŒæ­¥éƒ½æ”¯æŒ<strong>ç«¯åˆ°ç«¯åŠ å¯†</strong>ï¼Œå³ä½¿æ˜¯äº‘æœåŠ¡æä¾›å•†ä¹Ÿæ— æ³•è¯»å–ä½ çš„ç¬”è®°å†…å®¹ã€‚è¿™ç§çº§åˆ«çš„å®‰å…¨ä¿éšœåœ¨å…è´¹åº”ç”¨ä¸­æä¸ºç½•è§ã€‚</p>
<h3 data-id="heading-4">ğŸ“¥ <strong>å¼ºå¤§çš„å¯¼å…¥åŠŸèƒ½</strong></h3>
<p>å¦‚æœä½ æ˜¯Evernoteç”¨æˆ·ï¼ŒJoplinèƒ½è®©ä½ <strong>æ— ç¼è¿ç§»</strong>ã€‚å®ƒå¯ä»¥å®Œæ•´å¯¼å…¥Evernoteç¬”è®°ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>æ ¼å¼åŒ–å†…å®¹ï¼ˆè‡ªåŠ¨è½¬æ¢ä¸ºMarkdownï¼‰</li>
<li>èµ„æºæ–‡ä»¶ï¼ˆå›¾ç‰‡ã€é™„ä»¶ç­‰ï¼‰</li>
<li>å®Œæ•´å…ƒæ•°æ®ï¼ˆåœ°ç†ä½ç½®ã€åˆ›å»ºæ—¶é—´ã€æ›´æ–°æ—¶é—´ç­‰ï¼‰</li>
</ul>
<p>çº¯Markdownæ–‡ä»¶ä¹Ÿå¯ä»¥è½»æ¾å¯¼å…¥ï¼Œé¿å…äº†æ•°æ®è¿ç§»çš„çƒ¦æ¼ã€‚</p>
<h3 data-id="heading-5">ğŸ” <strong>å…¨å¹³å°å…¨æ–‡æœç´¢</strong></h3>
<p>æ— è®ºä½ åœ¨å“ªä¸ªå¹³å°ä½¿ç”¨Joplinï¼Œéƒ½èƒ½äº«å—åˆ°<strong>å¿«é€Ÿã€é«˜æ•ˆçš„å…¨æ–‡æœç´¢</strong>ã€‚å¿˜è®°ç¬”è®°æ”¾åœ¨å“ªé‡Œï¼Ÿåªéœ€è¾“å…¥å…³é”®è¯ï¼Œç›¸å…³ç¬”è®°å³åˆ»å‘ˆç°ã€‚</p>
<h3 data-id="heading-6">ğŸ¨ <strong>å¯æ‰©å±•çš„æ’ä»¶ç³»ç»Ÿ</strong></h3>
<p>Joplinæ”¯æŒæ’ä»¶å’Œä¸»é¢˜å®šåˆ¶ï¼Œä½ å¯ä»¥ï¼š</p>
<ul>
<li>ä»ç¤¾åŒºæ’ä»¶åº“ä¸­å®‰è£…ç°æˆæ’ä»¶</li>
<li>ä½¿ç”¨ä¸åŒä¸»é¢˜ä¸ªæ€§åŒ–ç•Œé¢</li>
<li>ç”šè‡³å¯ä»¥<strong>è‡ªå·±å¼€å‘æ’ä»¶</strong>ï¼Œæ»¡è¶³ç‰¹å®šéœ€æ±‚</li>
</ul>
<h3 data-id="heading-7">ğŸŒ <strong>å…¨å¹³å°è¦†ç›–</strong></h3>
<p>Joplinå‡ ä¹æ”¯æŒæ‰€æœ‰ä¸»æµå¹³å°ï¼š</p>
<ul>
<li>æ¡Œé¢ç«¯ï¼šWindowsã€Linuxã€macOS</li>
<li>ç§»åŠ¨ç«¯ï¼šAndroidã€iOS</li>
<li>æµè§ˆå™¨æ‰©å±•ï¼šFirefoxå’ŒChromeçš„Web Clipperï¼Œå¯ä»¥ä¿å­˜ç½‘é¡µå’Œæˆªå›¾</li>
</ul>
<h2 data-id="heading-8">ä¸ºä»€ä¹ˆé€‰æ‹©Joplinè€Œä¸æ˜¯å…¶ä»–ç¬”è®°åº”ç”¨ï¼Ÿ</h2>
<h3 data-id="heading-9">1. <strong>çœŸæ­£çš„æ•°æ®è‡ªç”±</strong></h3>
<p>å¤§å¤šæ•°ç¬”è®°åº”ç”¨å°†ä½ çš„æ•°æ®é”å®šåœ¨ä»–ä»¬çš„æœåŠ¡å™¨å’Œä¸“æœ‰æ ¼å¼ä¸­ã€‚Joplinä½¿ç”¨<strong>æ ‡å‡†Markdownæ ¼å¼</strong>ï¼Œå³ä½¿æœ‰ä¸€å¤©ä½ ä¸å†ä½¿ç”¨Joplinï¼Œä½ çš„ç¬”è®°ä»ç„¶å¯ä»¥è½»æ¾è¿ç§»åˆ°å…¶ä»–æ”¯æŒMarkdownçš„åº”ç”¨ä¸­ã€‚</p>
<h3 data-id="heading-10">2. <strong>å¼€æºé€æ˜</strong></h3>
<p>ä½œä¸ºå¼€æºé¡¹ç›®ï¼ŒJoplinçš„ä»£ç å¯¹æ‰€æœ‰äººå¼€æ”¾ã€‚è¿™æ„å‘³ç€ï¼š</p>
<ul>
<li>æ²¡æœ‰éšè—çš„åé—¨æˆ–æ•°æ®æ”¶é›†</li>
<li>ç¤¾åŒºå¯ä»¥å®¡æŸ¥ä»£ç å®‰å…¨æ€§</li>
<li>ä»»ä½•å¼€å‘è€…éƒ½å¯ä»¥è´¡çŒ®æ”¹è¿›</li>
<li>é¡¹ç›®å‘å±•æ–¹å‘ç”±ç¤¾åŒºå…±åŒå†³å®š</li>
</ul>
<h3 data-id="heading-11">3. <strong>éšç§ä¿æŠ¤</strong></h3>
<p>ç«¯åˆ°ç«¯åŠ å¯†ç¡®ä¿åªæœ‰ä½ èƒ½é˜…è¯»è‡ªå·±çš„ç¬”è®°ã€‚å³ä½¿æ˜¯Joplinå¼€å‘å›¢é˜Ÿä¹Ÿæ— æ³•è®¿é—®ä½ çš„æ•°æ®ã€‚</p>
<h3 data-id="heading-12">4. <strong>é›¶è´¹ç”¨é—¨æ§›</strong></h3>
<p>å®Œå…¨å…è´¹ä½¿ç”¨ï¼Œæ²¡æœ‰åŠŸèƒ½é™åˆ¶æˆ–è®¢é˜…è´¹ç”¨ã€‚è™½ç„¶æœ‰Joplin CloudåŒæ­¥æœåŠ¡ï¼ˆä»˜è´¹ï¼‰ï¼Œä½†ä½ å®Œå…¨å¯ä»¥é€‰æ‹©å…¶ä»–å…è´¹çš„åŒæ­¥æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-13">å¼€å§‹ä½¿ç”¨Joplin</h2>
<h3 data-id="heading-14">å®‰è£…æŒ‡å—</h3>
<p>è®¿é—®Joplinå®˜ç½‘ï¼ˆjoplinapp.orgï¼‰å³å¯ä¸‹è½½é€‚åˆä½ è®¾å¤‡çš„ç‰ˆæœ¬ã€‚å®‰è£…è¿‡ç¨‹ç®€å•ç›´è§‚ï¼Œå‡ åˆ†é’Ÿå†…å³å¯å¼€å§‹è®°å½•ã€‚æˆ‘åœ¨è¿™å—ä¸‹è½½çš„æ˜¯windows å’Œå®‰å“apk ä¸¤å„å¹³å°çš„ç‰ˆæœ¬ã€‚ä¸‹è½½å®‰è£…çš„çš„è¿‡ç¨‹éƒ½æ¯”è¾ƒç®€å•ï¼Œæˆ‘å› ä¸ºä¹‹å‰åœ¨å…¬ç½‘æœåŠ¡å™¨ä¸Šéƒ¨ç½²è¿‡ rustfs ,æˆ‘ä»¬æ­¤å¤„ä¹Ÿé‡‡ç”¨çš„æ˜¯rustfs åŒæ­¥å¤šç«¯æ•°æ®ï¼Œå¦‚æœä½ æœ‰å…¶ä»–å…¼å®¹s3åè®®çš„oss,å¦‚minioç­‰ï¼Œä¹Ÿå¯ä»¥è¯•ç”¨ï¼Œå…¶ä»–oneDriveã€nextCloudç­‰ç½‘ç›˜ä¹Ÿå¯åšä¸ºåŒæ­¥å·¥å…·è¯•ç”¨ã€‚æˆ‘ä»¬æ­¤å¤„å±•ç¤ºä¸‹å¦‚ä½•ç”¨rustfsé…ç½®ï¼Œå¯¹rustfsæ„Ÿå…´è¶£çš„å®¶äººä»¬ä¹Ÿå¯ä»¥ç¿»ä¸€ä¸‹åšä¸»ä»‹ç»rustfséƒ¨ç½²çš„å†å²æ–‡ç« ã€‚</p>
<p>åœ¨windowsä¸Šéƒ¨ç½²joplinä¹‹å ç‚¹å‡» <code>å·¥å…·</code>-&gt;<code>é€‰é¡¹</code>ï¼Œç‚¹å‡»èœå•ä¸­çš„<code>åŒæ­¥</code>ï¼Œ<code>åŒæ­¥ç›®æ ‡</code>é€‰æ‹©<code>s3</code>, <img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6053cf9f866f4b9aa8385ed36ddc699c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=pQLpSmEifer5ALm%2FYQrUiCcCydw%3D" alt="ScreenShot_2025-12-01_221816_815.png" loading="lazy"/></p>
<p>s3çš„å­˜å‚¨æ¡¶åº”è¯¥äº‹å…ˆåˆ›å»ºå¥½ï¼Œåˆ›å»ºå¥½ä¹‹åæŒ‰å›¾é…ç½®ä¿¡æ¯å³å¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30aa2cd91ee2467689c36d04248baedd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=ZAyUl%2F5aeEiS82yqT9QrtgQwE1Q%3D" alt="ScreenShot_2025-12-01_222507_097.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-01_222507_097.png</p>
<p>é…ç½®å¥½ä¹‹åæˆ‘ä»¬å°±å¯ä»¥åˆ›å»º<code>ç¬”è®°æœ¬</code>,åˆ›å»º<code>ç¬”è®°</code>äº†ï¼Œå†™å®Œç¬”è®°ä¹‹åç‚¹å‡»åŒæ­¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æˆ‘ä»¬çš„s3æ–‡ä»¶å­˜å‚¨ç³»ç»Ÿé…ç½®çš„æ¡¶ä¸­çœ‹åˆ°æˆ‘ä»¬åŒæ­¥ä¸Šå»çš„ç¬”è®°äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c7c8dc8801a24d95b0ebe60392c08602~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=7XcYXfbZsiQBI8i2bygqMGlrX%2Bw%3D" alt="ScreenShot_2025-12-01_223424_749.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-01_223424_749.png</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fchevereto.xiuji.mynatapp.cc%2Fimage%2FXI4P" target="_blank" title="http://chevereto.xiuji.mynatapp.cc/image/XI4P" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/430f85d4b72b43a3a39a1fac19d90844~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=gmBFhABK08xdsJrKJ5%2B%2BgCkXW0c%3D" alt="ScreenShot_2025-12-01_223803_948.md.png" loading="lazy"/></a></p>
<p>ScreenShot_2025-12-01_223803_948.md.png</p>
<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬windowsç«¯çš„é…ç½®å°±okäº†ï¼Œå®‰å“æ‰‹æœºå¯ä»¥åœ¨å®˜ç½‘ä¸‹è½½<a href="https://link.juejin.cn?target=https%3A%2F%2Fjoplinapp.org%2Fhelp%2Finstall%2F" target="_blank" title="https://joplinapp.org/help/install/" ref="nofollow noopener noreferrer"> https://joplinapp.org/help/install/</a> ä¸‹è½½apkï¼Œ</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fchevereto.xiuji.mynatapp.cc%2Fimage%2FXLAh" target="_blank" title="http://chevereto.xiuji.mynatapp.cc/image/XLAh" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00959b1beba74104907d7225d3625de0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=2sV2nSvH5S9zeLb5wt2DG7OF4Fs%3D" alt="ScreenShot_2025-12-01_224017_013.png" loading="lazy"/></a></p>
<p>ScreenShot_2025-12-01_224017_013.png</p>
<p>å®‰è£…ä¹‹åæ‰“å¼€è½¯ä»¶ï¼Œç‚¹å‡»<code>è®¾ç½®</code>-&gt;<code>åŒæ­¥</code>ï¼Œç„¶åå’Œwindowsä¸€æ ·é…ç½®æˆ‘ä»¬çš„s3ä¿¡æ¯å°±å¯ä»¥äº†</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fchevereto.xiuji.mynatapp.cc%2Fimage%2FXV5j" target="_blank" title="http://chevereto.xiuji.mynatapp.cc/image/XV5j" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/56be7834479c4db99f7468f105847bbd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=cvIVeplF%2F9CJozmeWtTOEWlq4PQ%3D" alt="ScreenShot_2025-12-01_224341_221.png" loading="lazy"/></a></p>
<p>ScreenShot_2025-12-01_224341_221.png</p>
<p><a href="https://link.juejin.cn?target=http%3A%2F%2Fchevereto.xiuji.mynatapp.cc%2Fimage%2FXoTk" target="_blank" title="http://chevereto.xiuji.mynatapp.cc/image/XoTk" ref="nofollow noopener noreferrer"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/864a19b655464a069c08d8ac1f46624d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=uJH9n%2B9i5GcqVjckNmkfPtpUXk8%3D" alt="ScreenShot_2025-12-01_224357_969.png" loading="lazy"/></a></p>
<p>ScreenShot_2025-12-01_224357_969.png</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c73b7e016b4d495a9b25745615dbc113~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765206145&amp;x-signature=PVNHr%2BKOZ%2BM0QAL9XQjnFHpQibg%3D" alt="ScreenShot_2025-12-01_224424_065.png" loading="lazy"/></p>
<p>ScreenShot_2025-12-01_224424_065.png</p>
<p>é…ç½®å¥½ä¹‹åç‚¹å‡»åŒæ­¥æˆ‘ä»¬å°±å¯ä»¥å¤šç«¯åŒæ­¥æˆ‘ä»¬çš„ç¬”è®°å†…å®¹äº†ã€‚</p>
<h2 data-id="heading-15">ç»“è¯­</h2>
<p>åœ¨æ•°å­—æ—¶ä»£ï¼Œæˆ‘ä»¬çš„ç¬”è®°ä¸ä»…ä»…æ˜¯æ–‡å­—ï¼Œæ›´æ˜¯æ€è€ƒçš„è½¨è¿¹ã€åˆ›æ„çš„ç§å­å’ŒçŸ¥è¯†çš„å®åº“ã€‚Joplinæä¾›äº†ä¸€ç§<strong>æ—¢å¼ºå¤§åˆå°Šé‡ç”¨æˆ·</strong>çš„è§£å†³æ–¹æ¡ˆï¼Œè®©ä½ åœ¨äº«å—ç°ä»£åŒ–ç¬”è®°åŠŸèƒ½çš„åŒæ—¶ï¼Œå®Œå…¨æŒæ§è‡ªå·±çš„æ•°æ®ã€‚</p>
<p>æ— è®ºä½ æ˜¯å­¦ç”Ÿã€ç ”ç©¶è€…ã€å¼€å‘è€…è¿˜æ˜¯çŸ¥è¯†å·¥ä½œè€…ï¼ŒJoplinéƒ½å€¼å¾—ä¸€è¯•ã€‚å®ƒå¯èƒ½ä¸æ˜¯æœ€åä¸½çš„ç¬”è®°åº”ç”¨ï¼Œä½†å®ƒç»å¯¹æ˜¯æœ€å€¼å¾—ä¿¡èµ–çš„ä¼™ä¼´ä¹‹ä¸€â€”â€”æ°¸è¿œä¸ä¼šå°†ä½ çš„æ•°æ®ä½œä¸ºå•†å“ï¼Œæ°¸è¿œä¸ä¼šåœ¨ä½ æœ€éœ€è¦æ—¶å› ä¸ºç½‘ç»œé—®é¢˜è€Œæ— æ³•è®¿é—®ï¼Œæ°¸è¿œä¸ä¼šåœ¨ä½ ä¹ æƒ¯ä½¿ç”¨åå¼€å§‹æ”¶å–é«˜é¢è´¹ç”¨ã€‚</p>
<p><strong>ä½ çš„ç¬”è®°ï¼Œæœ¬å°±è¯¥å®Œå…¨å±äºä½ ã€‚</strong> Joplinè®©è¿™ä¸ªç®€å•çš„ç†å¿µæˆä¸ºç°å®ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º]]></title>    <link>https://juejin.cn/post/7578681104292544555</link>    <guid>https://juejin.cn/post/7578681104292544555</guid>    <pubDate>2025-12-01T13:06:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578681104292544555" data-draft-id="7578681104292528171" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½,MCP"/> <meta itemprop="datePublished" content="2025-12-01T13:06:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Banana Pro å¾ˆå¼ºï¼Œä½†ä½ è¦å­¦ä¼šå†™æç¤ºè¯æ‰èƒ½ä¸ºæ‰€æ¬²ä¸º
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T13:06:05.000Z" title="Mon Dec 01 2025 13:06:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. å‰è¨€</h2>
<p>å¦‚æœä½ å·²ç»å­¦ä¼šï¼š</p>
<ol>
<li>
<p>å…è´¹ä½¿ç”¨ Nano Banana Proï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FtYKzM0PIvBm5QG08SW3_BA" target="_blank" title="https://mp.weixin.qq.com/s/tYKzM0PIvBm5QG08SW3_BA" ref="nofollow noopener noreferrer">6 ä¸ªç™½å«– Nano Banana Pro çš„ç½‘ç«™</a></p>
</li>
<li>
<p>ä½¿ç”¨æç¤ºè¯åº“å¤åˆ»æƒŠè‰³å›¾ç‰‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FxZQNPPwGxhzWhGsr-alKkg" target="_blank" title="https://mp.weixin.qq.com/s/xZQNPPwGxhzWhGsr-alKkg" ref="nofollow noopener noreferrer">ä¸€æ¬¡æ‰¾é½ï¼1000 ä¸ª Nano Banana Pro æç¤ºè¯</a></p>
</li>
</ol>
<p>é‚£æœ¬ç¯‡æˆ‘ä»¬æ¥ç‚¹å¹²è´§ â€”â€” å¦‚ä½•å†™å‡ºå¥½çš„æç¤ºè¯ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦å­¦ä¹ å¦‚ä½•å†™æç¤ºè¯ï¼Œæ˜¯å› ä¸ºç»å¤§éƒ¨åˆ†äººåœ¨å†™æç¤ºè¯æ—¶ï¼Œéƒ½æ˜¯ä¸€ç§ <strong>â€œéšç¼˜â€</strong> çš„çŠ¶æ€â€”â€”æœ‰çš„åœ°æ–¹å†™å¾—è¯¦ç»†ï¼Œæœ‰çš„åœ°æ–¹å´è¢«é—æ¼äº†ï¼Œè¿™å°±å¸¦æ¥äº† <strong>å¾ˆå¤§çš„ä¸ç¡®å®šæ€§</strong> ã€‚</p>
<p>æ‰€ä»¥æœ¬ç¯‡æˆ‘ä»¬å°±æ¥èŠèŠå¦‚ä½•é€šè¿‡ç»“æ„åŒ–çš„æç¤ºè¯ï¼Œæå‡å›¾ç‰‡ç”Ÿæˆçš„è´¨é‡ï¼Œ<strong>è®© Nano Bnana ç”Ÿæˆçš„æ¯ä¸€å¼ å›¾éƒ½æ˜¯é«˜æ°´å‡†çš„å›¾ç‰‡ã€‚</strong></p>
<h2 data-id="heading-1">2. ç”Ÿæˆå›¾ç‰‡</h2>
<h3 data-id="heading-2">2.1. é€¼çœŸåœºæ™¯</h3>
<p>å¦‚æœè¦ç”Ÿæˆé€¼çœŸçš„å›¾ç‰‡ï¼Œæœ€å¥½ä½¿ç”¨æ‘„å½±æœ¯è¯­ï¼Œè®¾å®šæ‹æ‘„è§’åº¦ã€é•œå¤´ç±»å‹ã€å…‰çº¿å’Œç»†èŠ‚ï¼Œå¼•å¯¼æ¨¡å‹ç”Ÿæˆé€¼çœŸçš„æ•ˆæœã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A photorealistic [shot type] of [subject], [action or expression], set in
[environment]. The scene is illuminated by [lighting description], creating
a [mood] atmosphere. Captured with a [camera/lens details], emphasizing
[key textures and details]. The image should be in a [aspect ratio] format.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åº¦å†™å®çš„ <strong>[é•œå¤´ç±»å‹]</strong> ï¼Œä¸»ä½“ä¸º <strong>[æ‹æ‘„å¯¹è±¡]</strong> ï¼Œ <strong>[åŠ¨ä½œæˆ–è¡¨æƒ…]</strong> ï¼Œåœºæ™¯è®¾å®šåœ¨ <strong>[ç¯å¢ƒ]</strong> ä¸­ã€‚åœºæ™¯ç”± <strong>[å…‰çº¿æè¿°]</strong> ç…§æ˜ï¼Œè¥é€ å‡º <strong>[æ°›å›´]</strong> çš„æ°›å›´ã€‚ä½¿ç”¨ <strong>[ç›¸æœº/é•œå¤´ç»†èŠ‚]</strong> æ‹æ‘„ï¼Œçªå‡º <strong>[å…³é”®çº¹ç†å’Œç»†èŠ‚]</strong> ã€‚å›¾åƒåº”é‡‡ç”¨ <strong>[çºµæ¨ªæ¯”]</strong> æ ¼å¼ã€‚</p>
</blockquote>
<p>è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¹…é«˜åº¦å†™å®çš„ç‰¹å†™è‚–åƒï¼Œæç»˜äº†ä¸€ä½å¹´é•¿çš„ä¸­å›½é™¶è‰ºå®¶ã€‚ä»–è„¸ä¸Šæœ‰ç€æ·±æ·±çš„ã€è¢«é˜³å…‰åˆ»ä¸‹çš„çš±çº¹ï¼Œå¸¦ç€æ¸©æš–è€Œæ´æ‚‰ä¸€åˆ‡çš„å¾®ç¬‘ã€‚ä»–æ­£ä»”ç»†æ£€æŸ¥ä¸€ä¸ªåˆšä¸Šé‡‰çš„èŒ¶ç¢—ã€‚åœºæ™¯è®¾å®šåœ¨ä»–é‚£è´¨æœ´ä¸”é˜³å…‰å……è¶³çš„å·¥ä½œå®¤é‡Œã€‚æŸ”å’Œçš„é»„é‡‘æ—¶åˆ»å…‰çº¿é€è¿‡çª—æˆ·æ´’å…¥ï¼Œç…§äº®äº†é»åœŸç»†è…»çš„çº¹ç†ã€‚è¿™å¹…è‚–åƒä½¿ç”¨ 85 æ¯«ç±³äººåƒé•œå¤´æ‹æ‘„ï¼ŒèƒŒæ™¯å‘ˆç°å‡ºæŸ”å’Œæ¨¡ç³Šçš„æ•ˆæœï¼ˆç„¦å¤–æˆåƒï¼‰ã€‚æ•´ä½“æ°›å›´å®é™è€Œå¨´ç†Ÿã€‚è‚–åƒé‡‡ç”¨å‚ç›´æ„å›¾ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3b59c455ecfc4fd687c5bd73e4a1dca1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=lSPTt3BGowVi4I4UedTcAy5uBI4%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.2. é£æ ¼æ’ç”»æˆ–è´´çº¸</h3>
<p>å¦‚æœè¦åˆ›å»ºæ’ç”»ã€è´´çº¸ã€å›¾æ ‡ç­‰èµ„æºï¼Œè¦æ˜ç¡®è¯´æ˜æ ·å¼å¹¶è¦æ±‚ä½¿ç”¨é€æ˜çš„èƒŒæ™¯ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A [style] sticker of a [subject], featuring [key characteristics] and a
[color palette]. The design should have [line style] and [shading style].
The background must be transparent.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼  <strong>[é£æ ¼]</strong> çš„ <strong>[ä¸»ä½“]</strong> è´´çº¸ï¼Œå…·æœ‰ <strong>[å…³é”®ç‰¹å¾]</strong> å’Œ <strong>[è‰²å½©æ­é…]</strong> ã€‚è®¾è®¡åº”é‡‡ç”¨ <strong>[çº¿æ¡é£æ ¼]</strong> å’Œ <strong>[é˜´å½±é£æ ¼]</strong> ã€‚èƒŒæ™¯å¿…é¡»æ˜¯é€æ˜çš„ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ å¯çˆ±é£æ ¼çš„è´´çº¸ï¼Œä¸Šé¢æ˜¯ä¸€åªå¼€å¿ƒçš„å°ç†ŠçŒ«ï¼Œæˆ´ç€ä¸€é¡¶å°å°çš„ç«¹å¸½ï¼Œæ­£åœ¨å•ƒç€ä¸€ç‰‡ç»¿è‰²çš„ç«¹å¶ã€‚è®¾è®¡é‡‡ç”¨äº†é†’ç›®æ¸…æ™°çš„è½®å»“ã€ç®€å•çš„å¡é€šæ¸²æŸ“ï¼Œä»¥åŠé²œè‰³çš„è‰²å½©æ­é…ã€‚èƒŒæ™¯å¿…é¡»æ˜¯é€æ˜çš„ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ae4f4c9ce0714fe5884ce15f98cea5fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=N86jW4j4r2MJPqXSEO1wEpT%2BeLs%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">2.3. ç²¾å‡†çš„å¸¦æ–‡å­—æ¸²æŸ“</h3>
<p>Nano Banana Pro å¼ºåŒ–äº†æ–‡æœ¬æ¸²æŸ“æ–¹é¢çš„è¡¨ç°ï¼Œä»¥å‰ç”Ÿæˆæ±‰å­—çš„æ—¶å€™è¿˜æœ‰ä¸å°‘ä¹±ç ï¼Œåˆ° Pro å·²ç»æ˜æ˜¾æ”¹å–„äº†å¾ˆå¤šã€‚ä½†åœ¨å†™æç¤ºè¯æ—¶ï¼Œè¿˜æ˜¯è¦æ¸…æ™°åœ°è¯´æ˜æ–‡å­—å†…å®¹ã€å­—ä½“æ ·å¼å’Œæ•´ä½“è®¾è®¡ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Create a [image type] for [brand/concept] with the text "[text to render]"
in a [font style]. The design should be [style description], with a
[color scheme].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸º <strong>[å“ç‰Œ/æ¦‚å¿µ]</strong> åˆ›å»ºä¸€ä¸ª <strong>[å›¾åƒç±»å‹]</strong> ï¼Œ <strong>[è¦æ¸²æŸ“çš„æ–‡å­—]</strong> é‡‡ç”¨ <strong>[æ–‡å­—é£æ ¼]</strong> ã€‚è®¾è®¡åº”å…·æœ‰ <strong>[é£æ ¼æè¿°]</strong> ï¼Œå¹¶é‡‡ç”¨ <strong>[é…è‰²æ–¹æ¡ˆ]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸ºä¸€å®¶åä¸º â€œThe Daily Grindâ€ çš„å’–å•¡åº—è®¾è®¡ä¸€ä¸ªç°ä»£ç®€çº¦é£æ ¼çš„æ ‡å¿—ã€‚æ–‡å­—éƒ¨åˆ†é‡‡ç”¨ç®€æ´ã€ç²—ä½“çš„æ— è¡¬çº¿å­—ä½“ã€‚é…è‰²æ–¹æ¡ˆä¸ºé»‘ç™½ä¸¤è‰²ã€‚å°†æ ‡å¿—ç½®äºåœ†å½¢ä¹‹ä¸­ã€‚å·§å¦™åœ°èå…¥ä¸€é¢—å’–å•¡è±†å…ƒç´ ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adbe92278142455da54fdfffdf7dcc81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=3L37Fz1WDVcoeELN9GV7AdJUIbo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">2.4. äº§å“æ‘„å½±</h3>
<p>ä¸ºç”µå•†ã€å¹¿å‘Šæˆ–å“ç‰Œåˆ¶ä½œä¸“ä¸šçš„å•†å“å›¾ç‰‡ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A high-resolution, studio-lit product photograph of a [product description]
on a [background surface/description]. The lighting is a [lighting setup,
e.g., three-point softbox setup] to [lighting purpose]. The camera angle is
a [angle type] to showcase [specific feature]. Ultra-realistic, with sharp
focus on [key detail]. [Aspect ratio].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åˆ†è¾¨ç‡ã€å·¥ä½œå®¤ç¯å…‰ç…§æ˜çš„ <strong>[äº§å“æè¿°]</strong> äº§å“ç…§ç‰‡ï¼ŒèƒŒæ™¯æ˜¯ <strong>[èƒŒæ™¯]</strong> ã€‚ç¯å…‰é‡‡ç”¨ <strong>[ç…§æ˜è®¾ç½®]</strong> ï¼Œç›®çš„æ˜¯ <strong>[ç…§æ˜ç”¨é€”]</strong> ã€‚ç›¸æœºè§’åº¦ä¸º <strong>[è§’åº¦ç±»å‹]</strong> ï¼Œä»¥å±•ç¤º <strong>[ç‰¹å®šç‰¹å¾]</strong> ã€‚è¶…å†™å®é£æ ¼ï¼Œå¯¹ <strong>[å…³é”®ç»†èŠ‚]</strong> èšç„¦æ¸…æ™°ã€‚ <strong>[çºµæ¨ªæ¯”]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ é«˜åˆ†è¾¨ç‡ã€å·¥ä½œå®¤ç¯å…‰ç…§æ˜çš„æç®€ä¸»ä¹‰å“‘å…‰é»‘è‰²é™¶ç“·å’–å•¡æ¯äº§å“ç…§ç‰‡ï¼Œæ”¾ç½®åœ¨æŠ›å…‰çš„æ··å‡åœŸè¡¨é¢ä¸Šã€‚ç¯å…‰é‡‡ç”¨ä¸‰ç‚¹æŸ”å…‰ç®±è®¾ç½®ï¼Œæ—¨åœ¨è¥é€ æŸ”å’Œã€æ¼«å°„çš„é«˜å…‰å¹¶æ¶ˆé™¤åˆºçœ¼çš„é˜´å½±ã€‚ç›¸æœºè§’åº¦ä¸ºç•¥å¾®å‡é«˜çš„ 45 åº¦è§’ï¼Œä»¥å±•ç¤ºå…¶ç®€æ´çš„çº¿æ¡ã€‚è¶…å†™å®é£æ ¼ï¼Œæ¸…æ™°èšç„¦äºä»å’–å•¡ä¸­å‡èµ·çš„è’¸æ±½ã€‚æ­£æ–¹å½¢å›¾åƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3fa59490bc8e4b92a7f8b59c45df09a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=kaVlcEW4IjSf2uO4cuY6IRmQtG0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">2.5. æç®€ä¸»ä¹‰ä¸ç•™ç™½è®¾è®¡</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A minimalist composition featuring a single [subject] positioned in the
[bottom-right/top-left/etc.] of the frame. The background is a vast, empty
[color] canvas, creating significant negative space. Soft, subtle lighting.
[Aspect ratio].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¹…æç®€ä¸»ä¹‰æ„å›¾ï¼Œç”»é¢ä¸­å•ä¸€çš„ <strong>[ä¸»ä½“]</strong> ä½äºç”»æ¡†çš„ <strong>[ä½ç½®]</strong> ã€‚èƒŒæ™¯æ˜¯ä¸€ç‰‡å¹¿é˜”ã€ç©ºæ—·çš„ <strong>[é¢œè‰²]</strong> ç”»å¸ƒï¼Œè¥é€ å‡ºå¤§é‡çš„ç•™ç™½ã€‚å…‰çº¿æŸ”å’Œã€å¾®å¦™ã€‚ <strong>[å®½é«˜æ¯”]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¹…æç®€é£æ ¼çš„æ„å›¾ï¼Œç”»é¢å³ä¸‹è§’æ”¾ç½®ç€ä¸€ç‰‡ç²¾è‡´çš„çº¢è‰²æ«å¶ã€‚èƒŒæ™¯æ˜¯ä¸€ç‰‡å¹¿é˜”ã€ç©ºæ—·çš„ç±³ç™½è‰²ç”»å¸ƒï¼Œä¸ºæ–‡å­—ç•™å‡ºäº†å¤§é‡çš„ç•™ç™½ç©ºé—´ã€‚å·¦ä¸Šè§’æœ‰æŸ”å’Œã€æ¼«å°„çš„å…‰çº¿ã€‚æ–¹å½¢å›¾åƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a85baca5c343455ba54c6dc9065349a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=nomj0WyqQrCT2S9l3VL9l8I5n28%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">2.6. è¿ç¯ç”»ä¸åˆ†é•œ</h3>
<p>åˆ©ç”¨æ¨¡å‹å¯¹è§’è‰²ä¸€è‡´æ€§å’Œåœºæ™¯æè¿°çš„ç†è§£ï¼Œåˆ¶ä½œå¤šæ ¼æ¼«ç”»æˆ–æ•…äº‹æ¿ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Make a 3 panel comic in a [style]. Put the character in a [type of scene].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>åˆ¶ä½œä¸€ä¸ª 3 æ ¼æ¼«ç”»ï¼Œé£æ ¼ä¸º <strong>[é£æ ¼]</strong> ã€‚è®©è§’è‰²å¤„äº <strong>[åœºæ™¯ç±»å‹]</strong> ä¸­ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>åˆ›ä½œä¸€ä¸ªä¸‰æ ¼æ¼«ç”»ï¼Œé‡‡ç”¨ç²—çŠ·çš„é»‘è‰²ç”µå½±è‰ºæœ¯é£æ ¼ï¼Œè¿ç”¨é«˜å¯¹æ¯”åº¦çš„é»‘ç™½å¢¨æ°´ç»˜åˆ¶ã€‚è®©è§’è‰²å¤„äºä¸€ä¸ªå¹½é»˜çš„åœºæ™¯ä¸­ã€‚</p>
</blockquote>
<p>ç”¨äº†ä¸€å¼ é©¬æ–¯å…‹çš„å›¾ç‰‡ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10ef56f5d2344c73bf51242df4c3876c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=%2BB%2Fi8qIx5qPoPlgdO%2Ft%2FYi5YbaU%3D" alt="" loading="lazy"/></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/47f0e1b6300148c6a2e9581a3ac8b1f2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=9i%2Bk3q9KcThWdbpYVoAqckh0dmM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-8">3. ä¿®æ”¹å›¾ç‰‡</h2>
<h3 data-id="heading-9">3.1. æ·»åŠ æˆ–åˆ é™¤å…ƒç´ </h3>
<p>æä¾›å›¾ç‰‡å¹¶æè¿°ä¿®æ”¹å†…å®¹ã€‚æ¨¡å‹å°†ä¸åŸå§‹å›¾ç‰‡çš„é£æ ¼ã€ç¯å…‰å’Œé€è§†æ•ˆæœä¿æŒä¸€è‡´ã€‚</p>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided image of [subject], please [add/remove/modify] [element] to/from the scene. Ensure the change is [description of how the change should integrate].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>è¯·ä½¿ç”¨æä¾›çš„ <strong>[ä¸»ä½“]</strong> å›¾ç‰‡ï¼Œåœ¨åœºæ™¯ä¸­ <strong>[æ·»åŠ /ç§»é™¤/ä¿®æ”¹] [å…ƒç´ ]</strong> ã€‚ç¡®ä¿è¿™ä¸€æ›´æ”¹èƒ½ <strong>[æŒ‰æè¿°çš„æ–¹å¼èå…¥åœºæ™¯]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>è¯·ä½¿ç”¨æˆ‘æä¾›çš„é‚£å¼ æˆ‘çš„çŒ«å’ªçš„ç…§ç‰‡ï¼Œåœ¨å®ƒçš„å¤´ä¸ŠåŠ ä¸€é¡¶å°å°çš„é’ˆç»‡å·«å¸ˆå¸½ã€‚è®©å®ƒçœ‹èµ·æ¥åå¾—å¾ˆèˆ’æœï¼Œå¹¶ä¸”ä¸ç…§ç‰‡æŸ”å’Œçš„å…‰çº¿ç›¸åŒ¹é…</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42ea031302f34e838e84a6c70e6dae8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=x9CK5CvWJgew8PU17gF0xYoRlAI%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-10">3.2. å±€éƒ¨é‡ç»˜</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided image, change only the [specific element] to [new
element/description]. Keep everything else in the image exactly the same,
preserving the original style, lighting, and composition.
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä½¿ç”¨æä¾›çš„å›¾ç‰‡ï¼Œä»…å°† <strong>[ç‰¹å®šå…ƒç´ ]</strong> æ›´æ”¹ä¸º <strong>[æ–°å…ƒç´ /æè¿°]</strong> ã€‚ä¿æŒå›¾ç‰‡ä¸­çš„å…¶ä»–æ‰€æœ‰å†…å®¹å®Œå…¨ä¸å˜ï¼Œä¿ç•™åŸæœ‰çš„é£æ ¼ã€å…‰çº¿å’Œæ„å›¾ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>â€œä½¿ç”¨æä¾›çš„å®¢å…å›¾ç‰‡ï¼Œåªå°†è“è‰²æ²™å‘æ¢æˆå¤å¤çš„æ£•è‰²çš®è´¨åˆ‡æ–¯ç‰¹è²å°”å¾·æ²™å‘ã€‚æˆ¿é—´çš„å…¶ä½™éƒ¨åˆ†ï¼ŒåŒ…æ‹¬æ²™å‘ä¸Šçš„æŠ±æ•å’Œç…§æ˜ï¼Œä¿æŒä¸å˜ã€‚â€</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d5128d86db6469d9057a023efee6447~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=JUpXblvZKkAfIBBISVM17AXNjrE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-11">3.3. é£æ ¼è¿ç§»</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Transform the provided photograph of [subject] into the artistic style of [artist/art style]. Preserve the original composition but render it with [description of stylistic elements].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>å°†æä¾›çš„ <strong>[ä¸»ä½“]</strong> ç…§ç‰‡è½¬æ¢ä¸º <strong>[è‰ºæœ¯å®¶/è‰ºæœ¯é£æ ¼]</strong> çš„è‰ºæœ¯é£æ ¼ã€‚ä¿ç•™åŸå§‹æ„å›¾ï¼Œä½†ç”¨ <strong>[é£æ ¼å…ƒç´ æè¿°]</strong> è¿›è¡Œæ¸²æŸ“ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>å°†æ‰€æä¾›çš„ç°ä»£åŸå¸‚è¡—é“å¤œæ™¯ç…§ç‰‡è½¬æ¢ä¸ºæ–‡æ£®ç‰¹Â·æ¢µé«˜ã€Šæ˜Ÿæœˆå¤œã€‹çš„è‰ºæœ¯é£æ ¼ã€‚ä¿ç•™å»ºç­‘ç‰©å’Œæ±½è½¦çš„åŸå§‹æ„å›¾ï¼Œä½†ç”¨æ—‹è½¬çš„åšæ¶‚ç¬”è§¦ä»¥åŠæ·±é‚ƒçš„è“è‰²å’Œæ˜äº®çš„é»„è‰²æ„æˆçš„å¯Œæœ‰æˆå‰§æ€§çš„è‰²å½©æ¥å‘ˆç°æ‰€æœ‰å…ƒç´ ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ea8bd5074c44428ccebd52ac46d252~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=o%2BwfYEzKuzLmXffuD08%2BCWuvZws%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-12">3.4. é«˜çº§åˆæˆ</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Create a new image by combining the elements from the provided images. Take
the [element from image 1] and place it with/on the [element from image 2].
The final image should be a [description of the final scene].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>é€šè¿‡ç»„åˆæ‰€æä¾›å›¾åƒä¸­çš„å…ƒç´ æ¥åˆ›å»ºä¸€å¹…æ–°å›¾åƒã€‚æå– <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> ï¼Œå¹¶å°†å…¶ä¸ <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> æ”¾åœ¨ä¸€èµ·/ç½®äº <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> ä¹‹ä¸Šã€‚æœ€ç»ˆå›¾åƒåº”è¯¥æ˜¯ <strong>[å¯¹æœ€ç»ˆåœºæ™¯çš„æè¿°]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>åˆ›ä½œä¸€å¼ ä¸“ä¸šçš„ç”µå•†æ—¶å°šç…§ç‰‡ã€‚å°†ç¬¬ä¸€å¼ å›¾ç‰‡ä¸­çš„è“è‰²ç¢èŠ±è¿è¡£è£™å–å‡ºï¼Œè®©ç¬¬äºŒå¼ å›¾ç‰‡ä¸­çš„å¥³å£«ç©¿ä¸Šå®ƒã€‚ç”Ÿæˆä¸€å¼ è¯¥å¥³å£«ç©¿ç€è¿™æ¡è¿è¡£è£™çš„é€¼çœŸå…¨èº«ç…§ï¼Œå¹¶è°ƒæ•´å…‰å½±ä»¥åŒ¹é…æˆ·å¤–ç¯å¢ƒã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d005d97548b740a6a310539e87cf733a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=B6t5yNurupOk6dDTphD3AgK206M%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13">3.5. é«˜ä¿çœŸç»†èŠ‚ä¿ç•™</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Using the provided images, place [element from image 2] onto [element from
image 1]. Ensure that the features of [element from image 1] remain
completely unchanged. The added element should [description of how the
element should integrate].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä½¿ç”¨æä¾›çš„å›¾åƒï¼Œå°† <strong>[å›¾åƒ 2 ä¸­çš„å…ƒç´ ]</strong> æ”¾ç½®åˆ° <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> ä¸Šã€‚ç¡®ä¿ <strong>[å›¾åƒ 1 ä¸­çš„å…ƒç´ ]</strong> çš„ç‰¹å¾å®Œå…¨ä¸å˜ã€‚æ·»åŠ çš„å…ƒç´ åº” <strong>[æè¿°è¯¥å…ƒç´ åº”å¦‚ä½•æ•´åˆ]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>é€‰å–ç¬¬ä¸€å¼ å›¾ç‰‡ä¸­é‚£ä½æœ‰ç€æ£•è‰²å¤´å‘ã€è“è‰²çœ¼ç›ä¸”è¡¨æƒ…å¹³å’Œçš„å¥³æ€§ã€‚å°†ç¬¬äºŒå¼ å›¾ç‰‡ä¸­çš„æ ‡å¿—æ·»åŠ åˆ°å¥¹çš„é»‘è‰² T æ¤ä¸Šã€‚ç¡®ä¿è¿™ä½å¥³æ€§çš„è„¸éƒ¨åŠäº”å®˜å®Œå…¨ä¿æŒä¸å˜ã€‚è¯¥æ ‡å¿—åº”çœ‹èµ·æ¥åƒæ˜¯è‡ªç„¶å°åœ¨é¢æ–™ä¸Šçš„ï¼Œè¦é¡ºç€è¡¬è¡«çš„è¤¶çš±å‘ˆç°ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c543894e525844d8b8949e3bb5a280b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=Hpdu%2BWDJBF%2Frd0f6Ky8V9iLJInM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-14">3.6. è‰å›¾å˜æˆå“</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">Turn this rough [medium] sketch of a [subject] into a [style description]
photo. Keep the [specific features] from the sketch but add [new details/materials].
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>å°†è¿™å¹…å…³äº <strong>[ä¸»é¢˜]</strong> çš„ç²—ç•¥ <strong>[åª’ä»‹]</strong> è‰å›¾è½¬åŒ–ä¸ºä¸€å¼ ç¬¦åˆ <strong>[é£æ ¼æè¿°]</strong> çš„ç…§ç‰‡ã€‚ä¿ç•™è‰å›¾ä¸­çš„ <strong>[å…·ä½“ç‰¹å¾]</strong> ï¼Œä½†æ·»åŠ  <strong>[æ–°ç»†èŠ‚/ææ–™]</strong> ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>æŠŠè¿™å¹…æœªæ¥æ±½è½¦çš„é“…ç¬”è‰å›¾å˜æˆå±•å…é‡Œæˆå“æ¦‚å¿µè½¦çš„ç²¾è‡´ç…§ç‰‡ã€‚ä¿ç•™è‰å›¾ä¸­çš„æµç•…çº¿æ¡å’Œä½çŸ®è½®å»“ï¼Œä½†è¦æ·»åŠ é‡‘å±è“è‰²æ¼†é¢å’Œéœ“è™¹è½®åœˆç¯å…‰ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2c60237736224595bea248cc2b87d78c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=LQpuOY5037Sl%2BreVozycwEc5hbg%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-15">3.7. 360 åº¦å…¨æ™¯</h3>
<p>è‹±æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<pre><code class="hljs language-plain" lang="plain">A studio portrait of [person] against [background], [looking forward/in profile looking right/etc.]
</code></pre>
<p>ä¸­æ–‡æ¨¡æ¿ä¸ºï¼š</p>
<blockquote>
<p>ä¸€å¹… <strong>[äººç‰©]</strong> çš„å·¥ä½œå®¤è‚–åƒç…§ï¼ŒèƒŒæ™¯ä¸º <strong>[èƒŒæ™¯]</strong> ï¼Œ <strong>[äººç‰©]</strong> é¢å‘å‰æ–¹/ä¾§å¤´å‘å³çœ‹ç­‰ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>ä¸€å¼ è¿™ä½ç”·å£«çš„å·¥ä½œå®¤è‚–åƒç…§ï¼ŒèƒŒæ™¯ä¸ºç™½è‰²ï¼Œä»–ä¾§èº«å‘å³çœ‹ã€‚</p>
</blockquote>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed36804f455143da919e74ade83c878f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Ya05769:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765199164&amp;x-signature=6%2FJ70bpj90UELZbXrfbrs42UNcQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">4. æç¤ºè¯æœ€ä½³å®è·µ</h2>
<ul>
<li>**ç»†èŠ‚è¶Šå¤šè¶Šå¥½ï¼š**æä¾›çš„ä¿¡æ¯è¶Šå¤šï¼Œå¯¹è¾“å‡ºç»“æœçš„æ“æ§ç¨‹åº¦å°±è¶Šè¯¦ç»†
<ul>
<li>âŒ â€œå¥‡å¹»çš„ç›”ç”²â€</li>
<li>âœ… â€œåä¸½çš„ç²¾çµæ¿ç”²ï¼Œåˆ»ç€é“¶å¶å›¾æ¡ˆï¼Œé«˜é¢†è®¾è®¡ï¼Œå¸¦æœ‰çŒé¹°ç¿…è†€å½¢çŠ¶çš„è‚©ç”²â€</li>
</ul>
</li>
<li>**æä¾›ä¸Šä¸‹æ–‡å’Œæ„å›¾è¯´æ˜ï¼š**æ¨¡å‹å¯¹ä¸Šä¸‹æ–‡çš„ç†è§£ä¼šå½±å“æœ€ç»ˆè¾“å‡º
<ul>
<li>âŒ â€œè®¾è®¡è§£å†³æ–¹æ¡ˆâ€</li>
<li>âœ… â€œä¸ºæç®€æŠ¤è‚¤å“ç‰Œè®¾è®¡è§£å†³æ–¹æ¡ˆâ€</li>
</ul>
</li>
<li><strong>ä¸æ–­è¿­ä»£å’Œä¼˜åŒ–</strong>ï¼šä¸è¦æŒ‡æœ›ç¬¬ä¸€æ¬¡å°è¯•å°±èƒ½ç”Ÿæˆå®Œç¾çš„å›¾ç‰‡ï¼Œåˆ©ç”¨æ¨¡å‹çš„å¯¹è¯ç‰¹æ€§è¿›è¡Œå°å¹…æ›´æ”¹ã€‚
<ul>
<li>âœ… â€œè¿™å¾ˆæ£’ï¼Œä½†ä½ èƒ½è®©å…‰çº¿æ›´äº®ä¸€äº›å—ï¼Ÿâ€</li>
<li>âœ… â€œä¿æŒæ‰€æœ‰å†…å®¹ä¸å˜ï¼Œä½†è®©è§’è‰²çš„è¡¨æƒ…æ›´ç®€æ´ä¸€äº›ã€‚â€</li>
</ul>
</li>
<li><strong>ä½¿ç”¨åˆ†æ­¥æŒ‡ä»¤</strong>ï¼šå¯¹äºåŒ…å«å¤šä¸ªå…ƒç´ çš„å¤æ‚åœºæ™¯ï¼Œå¯ä»¥å°†æç¤ºæ‹†åˆ†ä¸ºå¤šä¸ªæ­¥éª¤
<ul>
<li>âœ… â€œé¦–å…ˆï¼Œåˆ›é€ ä¸€ä¸ªå®é™ã€è–„é›¾å¼¥æ¼«çš„é»æ˜æ£®æ—çš„èƒŒæ™¯ã€‚ç„¶åï¼Œåœ¨å‰æ™¯ä¸­æ·»åŠ ä¸€ä¸ªé•¿æ»¡è‹”è—“çš„å¤è€çŸ³ç¥­å›ã€‚æœ€åï¼Œå°†ä¸€æŠŠå‘å…‰çš„å‰‘ç¥­å›æ”¾åœ¨é¡¶éƒ¨ã€‚â€</li>
</ul>
</li>
<li><strong>è¯­ä¹‰åŒ–åå‘æç¤º</strong>ï¼š
<ul>
<li>ä¸è¦è¯´â€œæ²¡æœ‰æ±½è½¦â€</li>
<li>è€Œæ˜¯é€šè¿‡â€œä¸€æ¡ç©ºæ— ä¸€äººã€æ²¡æœ‰ä»»ä½•äº¤é€šè¿¹è±¡çš„è¡—é“â€æ¥æ­£é¢æè¿°æ‰€éœ€çš„åœºæ™¯</li>
</ul>
</li>
<li><strong>æ§åˆ¶é•œå¤´è¯­è¨€</strong>ï¼šä½¿ç”¨æ‘„å½±å’Œç”µå½±è¯­è¨€æ¥æ§åˆ¶æ„å›¾ã€‚ä¾‹å¦‚<strong>å¹¿è§’ã€å¾®è·ã€ä½æœºä½</strong>ç­‰æœ¯è¯­</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Agentã€‘MemOS æºç ç¬”è®°---(2)---TreeTextMemory]]></title>    <link>https://juejin.cn/post/7578734725301944372</link>    <guid>https://juejin.cn/post/7578734725301944372</guid>    <pubDate>2025-12-01T13:20:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578734725301944372" data-draft-id="7577647745110376448" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Agentã€‘MemOS æºç ç¬”è®°---(2)---TreeTextMemory"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-01T13:20:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Agentã€‘MemOS æºç ç¬”è®°---(2)---TreeTextMemory
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T13:20:28.000Z" title="Mon Dec 01 2025 13:20:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Agentã€‘MemOS æºç ç¬”è®°---(2)---TreeTextMemory</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ‘˜è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 åŸºæœ¬æ¦‚å¿µ</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 ç‰¹è‰²</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 å®šä¹‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 è®°å¿†ç»“æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.4 å…ƒæ•°æ®å­—æ®µ</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.5 APIæ€»ç»“</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 ç¤ºä¾‹</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 åˆ›å»º TreeTextMemory é…ç½®</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 åˆå§‹åŒ– TreeTextMemory</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 æŠ½å–ç»“æ„åŒ–è®°å¿†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.4 æœç´¢è®°å¿†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.5 ä»äº’è”ç½‘æ£€ç´¢è®°å¿†ï¼ˆå¯é€‰ï¼‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.6 æ›¿æ¢å·¥ä½œè®°å¿†</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.7 å¤‡ä»½ä¸æ¢å¤</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.8 å®Œæ•´ä»£ç </a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x03 ç®¡ç†ï¼ˆMemoryManagerï¼‰</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.1 å®šä¹‰</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.2 ä¸»è¦åŠŸèƒ½</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.3 GraphStructureReorganizer</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.4 RelationAndReasoningDetector</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.5 NodeHandler</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.6 NodeHandler vs RelationAndReasoningDetector</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x04 å›¾ä¾‹</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.1 ç»„ä»¶å…³ç³»å›¾</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">4.2 è°ƒç”¨æµç¨‹å›¾</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<h3 data-id="heading-1">0x00 æ‘˜è¦</h3>
<p>TreeTextMemory æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„è®°å¿†ç®¡ç†ç³»ç»Ÿï¼Œèƒ½å­˜å‚¨ã€ç»„ç»‡ã€æ£€ç´¢å’Œç»´æŠ¤å„ç§ç±»å‹çš„æ–‡æœ¬è®°å¿†ã€é€‚ç”¨éœ€è¦å¤æ‚è®°å¿†ç®¡ç†çš„AIç³»ç»Ÿã€‚è¿™æ˜¯ä¸€ä¸ªåŸºäºå›¾çš„ã€æ ‘å½¢æ˜æ–‡è®°å¿†ï¼Œæ”¯æŒä»¥ç»“æ„åŒ–æ–¹å¼ç»„ç»‡ã€å…³è”å¹¶æ£€ç´¢è®°å¿†ï¼ŒåŒæ—¶ä¿ç•™ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸è‰¯å¥½çš„å¯è§£é‡Šæ€§ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªTreeTextMemory å¯¹è±¡ä¸åºå¤§çš„çŸ¥è¯†åº“è¿›è¡Œäº¤äº’ï¼Œä¸ºAIèµ‹äºˆä¸“ä¸šçš„é¢†åŸŸè®°å¿†ã€‚å½“å‰ä½¿ç”¨Neo4jä½œä¸ºåç«¯ï¼Œæœªæ¥è®¡åˆ’æ”¯æŒæ›´å¤šå›¾æ•°æ®åº“ã€‚</p>
<p>å› ä¸ºå­—æ•°å¤ªå¤šï¼Œå› æ­¤æŠŠTreeTextMemoryæ‹†åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæœ¬ç¯‡ä»‹ç»åŸºæœ¬æ¦‚å¿µå’Œå¦‚ä½•ç®¡ç†ï¼Œä¸‹ä¸€ç¯‡ä»‹ç»å¦‚ä½•æœç´¢ã€‚</p>
<h3 data-id="heading-2">0x01 åŸºæœ¬æ¦‚å¿µ</h3>
<h4 data-id="heading-3">1.1 ç‰¹è‰²</h4>
<p>TreeTextMemory çš„ç‰¹è‰²å¦‚ä¸‹ï¼š</p>
<ul>
<li>ç»“æ„å±‚æ¬¡: ä»åŸå§‹æ–‡æœ¬æˆ–å¯¹è¯ä¸­æå–ç»“æ„åŒ–è®°å¿†ï¼Œå³åƒæ€ç»´å¯¼å›¾ä¸€æ ·ç»„ç»‡è®°å¿†â€”â€”åœ¨å›¾æ•°æ®åº“ä¸­å­˜å‚¨ä»–ä»¬ä½œä¸ºèŠ‚ç‚¹ã€‚</li>
<li>å›¾é£æ ¼çš„é“¾æ¥: å°†è®°å¿†é“¾æ¥æˆå±‚æ¬¡ç»“æ„å’Œè¯­ä¹‰å›¾ï¼ŒèŠ‚ç‚¹å¯ä»¥æœ‰çˆ¶æ¯ã€å­©å­å’Œäº¤å‰é“¾æ¥ï¼Œå®ç°è¶…è¶Šçº¯ç²¹çš„å±‚æ¬¡ç»“æ„-å»ºç«‹å¤šè·³æ¨ç†é“¾ã€‚</li>
<li>è¯­ä¹‰æœç´¢+å›¾æ‰©å±•: ä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦+å›¾éå†è¿›è¡Œæœç´¢ï¼Œç»“åˆå‘é‡å’Œå›¾å½¢çš„ä¼˜ç‚¹ã€‚</li>
<li>å¯è§£é‡Šæ€§: è¿½è¸ªè®°å¿†æ˜¯å¦‚ä½•è¿æ¥ã€åˆå¹¶æˆ–éšæ—¶é—´æ¼”å˜çš„ã€‚</li>
</ul>
<p>TreeTextMemory é€‚åˆå¦‚ä¸‹åœºæ™¯ï¼š</p>
<ul>
<li>ä½ éœ€è¦å¸¦æœ‰å¯è§£é‡Šå…³ç³»çš„å±‚çº§åŸºäºå›¾çš„æ˜æ–‡è®°å¿†ã€‚</li>
<li>ä½ æƒ³å­˜å‚¨ç»“æ„åŒ–çŸ¥è¯†å¹¶è¿½è¸ªè¿æ¥å…³ç³»ã€‚</li>
<li>é€‚ç”¨äºçŸ¥è¯†å›¾è°±ã€æ¦‚å¿µæ ‘å’Œå¤šè·³æ¨ç†ã€‚</li>
</ul>
<h4 data-id="heading-4">1.2 å®šä¹‰</h4>
<p>TreeTextMemory çš„ç•¥å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">TreeTextMemory
Â Â Â Â -Â usesÂ MemoryManager
Â Â Â Â -Â usesÂ Neo4jGraphDB
Â Â Â Â -Â usesÂ Embedder
Â Â Â Â -Â usesÂ LLM
Â Â Â Â -Â usesÂ Searcher
Â Â Â Â Â Â -Â usesÂ GraphMemoryRetriever
Â Â Â Â Â Â -Â usesÂ TaskGoalParser
Â Â Â Â Â Â -Â usesÂ MemoryReasoner
Â Â Â Â Â Â -Â usesÂ Reranker
</code></pre>
<p>å…¶ä¸­å…³é”®ç»„ä»¶ä¸ºï¼š</p>
<ul>
<li>
<p>LLMï¼š</p>
<ul>
<li>extractor_llmï¼šç”¨äºæå–è®°å¿†ç‰¹å¾</li>
<li>dispatcher_llmï¼šç”¨äºä»»åŠ¡åˆ†å‘å’Œå¤„ç†</li>
</ul>
</li>
<li>
<p>Embeddingæ¨¡å‹ï¼š</p>
<ul>
<li>embedderï¼šç”Ÿæˆæ–‡æœ¬å‘é‡è¡¨ç¤º</li>
</ul>
</li>
<li>
<p>å›¾æ•°æ®åº“ï¼š</p>
<ul>
<li>graph_storeï¼šå­˜å‚¨è®°å¿†èŠ‚ç‚¹å’Œå…³ç³»ï¼Œå›¾é“¾æ¥æœ‰åŠ©äºæ£€ç´¢çº¯å‘é‡æœç´¢å¯èƒ½é—æ¼çš„ä¸Šä¸‹æ–‡ã€‚</li>
</ul>
</li>
<li>
<p>Rerankerï¼š</p>
<ul>
<li>rerankerï¼šå¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ–°æ’åº</li>
</ul>
</li>
<li>
<p>äº’è”ç½‘æ£€ç´¢å™¨ï¼š</p>
<ul>
<li>internet_retrieverï¼šä»äº’è”ç½‘è·å–ç›¸å…³ä¿¡æ¯ã€‚</li>
</ul>
</li>
<li>
<p>memory_managerï¼š</p>
<ul>
<li>è´Ÿè´£åè°ƒå’Œç®¡ç†è®°å¿†çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬æ·»åŠ ã€å­˜å‚¨ã€ç»´æŠ¤å’Œæ¸…ç†ï¼Œæ˜¯è®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒç®¡ç†ç»„ä»¶ã€‚</li>
</ul>
</li>
</ul>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span>Â <span class="hljs-title class_">TreeTextMemory</span>(<span class="hljs-title class_ inherited__">BaseTextMemory</span>):
Â Â Â Â <span class="hljs-string">"""GeneralÂ textualÂ memoryÂ implementationÂ forÂ storingÂ andÂ retrievingÂ memories."""</span>

Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self,Â config:Â TreeTextMemoryConfig</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""InitializeÂ memoryÂ withÂ theÂ givenÂ configuration."""</span>
Â Â Â Â Â Â Â Â time_startÂ =Â time.time()
Â Â Â Â Â Â Â Â self.config:Â TreeTextMemoryConfigÂ =Â config
Â Â Â Â Â Â Â Â self.extractor_llm:Â OpenAILLMÂ |Â OllamaLLMÂ |Â AzureLLMÂ =Â LLMFactory.from_config(
Â Â Â Â Â Â Â Â Â Â Â Â config.extractor_llm
Â Â Â Â Â Â Â Â )

Â Â Â Â Â Â Â Â time_start_exÂ =Â time.time()
Â Â Â Â Â Â Â Â self.dispatcher_llm:Â OpenAILLMÂ |Â OllamaLLMÂ |Â AzureLLMÂ =Â LLMFactory.from_config(
Â Â Â Â Â Â Â Â Â Â Â Â config.dispatcher_llm
Â Â Â Â Â Â Â Â )

Â Â Â Â Â Â Â Â time_start_emÂ =Â time.time()
Â Â Â Â Â Â Â Â self.embedder:Â OllamaEmbedderÂ =Â EmbedderFactory.from_config(config.embedder)

Â Â Â Â Â Â Â Â time_start_gsÂ =Â time.time()
Â Â Â Â Â Â Â Â self.graph_store:Â Neo4jGraphDBÂ =Â GraphStoreFactory.from_config(config.graph_db)

Â Â Â Â Â Â Â Â time_start_rrÂ =Â time.time()
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â config.rerankerÂ <span class="hljs-keyword">is</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â Â Â Â Â default_cfgÂ =Â RerankerConfigFactory.model_validate(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"backend"</span>:Â <span class="hljs-string">"cosine_local"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"config"</span>:Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"level_weights"</span>:Â {<span class="hljs-string">"topic"</span>:Â <span class="hljs-number">1.0</span>,Â <span class="hljs-string">"concept"</span>:Â <span class="hljs-number">1.0</span>,Â <span class="hljs-string">"fact"</span>:Â <span class="hljs-number">1.0</span>},
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"level_field"</span>:Â <span class="hljs-string">"background"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â self.rerankerÂ =Â RerankerFactory.from_config(default_cfg)
Â Â Â Â Â Â Â Â <span class="hljs-keyword">else</span>:
Â Â Â Â Â Â Â Â Â Â Â Â self.rerankerÂ =Â RerankerFactory.from_config(config.reranker)
Â Â Â Â Â Â Â Â self.is_reorganizeÂ =Â config.reorganize

Â Â Â Â Â Â Â Â time_start_mmÂ =Â time.time()
Â Â Â Â Â Â Â Â self.memory_manager:Â MemoryManagerÂ =Â MemoryManager(
Â Â Â Â Â Â Â Â Â Â Â Â self.graph_store,
Â Â Â Â Â Â Â Â Â Â Â Â self.embedder,
Â Â Â Â Â Â Â Â Â Â Â Â self.extractor_llm,
Â Â Â Â Â Â Â Â Â Â Â Â memory_size=config.memory_size
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">or</span>Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"WorkingMemory"</span>:Â <span class="hljs-number">20</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"LongTermMemory"</span>:Â <span class="hljs-number">1500</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"UserMemory"</span>:Â <span class="hljs-number">480</span>,
Â Â Â Â Â Â Â Â Â Â Â Â },
Â Â Â Â Â Â Â Â Â Â Â Â is_reorganize=self.is_reorganize,
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â time_start_irÂ =Â time.time()
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â CreateÂ internetÂ retrieverÂ ifÂ configured</span>
Â Â Â Â Â Â Â Â self.internet_retrieverÂ =Â <span class="hljs-literal">None</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â config.internet_retrieverÂ <span class="hljs-keyword">is</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-literal">None</span>:
Â Â Â Â Â Â Â Â Â Â Â Â self.internet_retrieverÂ =Â InternetRetrieverFactory.from_config(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â config.internet_retriever,Â self.embedder
Â Â Â Â Â Â Â Â Â Â Â Â )
</code></pre>
<h4 data-id="heading-5">1.3 è®°å¿†ç»“æ„</h4>
<p>æ¯ä¸ªèŠ‚ç‚¹åœ¨<code>TreeTextMemory</code> æ˜¯ä¸€ä¸ª <code>TextualMemoryItem</code>:</p>
<ul>
<li><code>id</code>: å”¯ä¸€è®°å¿†IDï¼ˆå¦‚æœçœç•¥åˆ™è‡ªåŠ¨ç”Ÿæˆï¼‰</li>
<li><code>memory</code>: ä¸»è¦æ–‡æœ¬</li>
<li><code>metadata</code>: åŒ…æ‹¬å±‚æ¬¡ç»“æ„ä¿¡æ¯ã€åµŒå…¥ã€æ ‡ç­¾ã€å®ä½“ã€æºå’ŒçŠ¶æ€</li>
</ul>
<h4 data-id="heading-6">1.4 å…ƒæ•°æ®å­—æ®µ</h4>
<p><code>TreeNodeTextualMemoryMetadata</code> æ˜¯å…ƒæ•°æ®ã€‚éœ€è¦ä½¿ç”¨æœ‰æ„ä¹‰çš„æ ‡ç­¾å’ŒèƒŒæ™¯â€”â€”å®ƒä»¬æœ‰åŠ©äºç»„ç»‡ä½ çš„å›¾è¿›è¡Œå¤šè·³æ¨ç†ã€‚</p>











































































<table><thead><tr><th>å­—æ®µ</th><th>ç±»å‹</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>memory_type</code></td><td><code>"WorkingMemory"</code>, <code>"LongTermMemory"</code>, <code>"UserMemory"</code></td><td>ç”Ÿå‘½å‘¨æœŸåˆ†ç±»</td></tr><tr><td><code>status</code></td><td><code>"activated"</code>, <code>"archived"</code>, <code>"deleted"</code></td><td>èŠ‚ç‚¹çŠ¶æ€</td></tr><tr><td><code>visibility</code></td><td><code>"private"</code>, <code>"public"</code>, <code>"session"</code></td><td>è®¿é—®èŒƒå›´</td></tr><tr><td><code>sources</code></td><td><code>list[str]</code></td><td>æ¥æºåˆ—è¡¨ (ä¾‹å¦‚: æ–‡ä»¶, URLs)</td></tr><tr><td><code>source</code></td><td><code>"conversation"</code>, <code>"retrieved"</code>, <code>"web"</code>, <code>"file"</code></td><td>åŸå§‹æ¥æºç±»å‹</td></tr><tr><td><code>confidence</code></td><td><code>float (0-100)</code></td><td>ç¡®å®šæ€§å¾—åˆ†</td></tr><tr><td><code>entities</code></td><td><code>list[str]</code></td><td>æåŠçš„å®ä½“æˆ–æ¦‚å¿µ</td></tr><tr><td><code>tags</code></td><td><code>list[str]</code></td><td>ä¸»é¢˜æ ‡ç­¾</td></tr><tr><td><code>embedding</code></td><td><code>list[float]</code></td><td>åŸºäºå‘é‡åµŒå…¥çš„ç›¸ä¼¼æ€§æœç´¢</td></tr><tr><td><code>created_at</code></td><td><code>str</code></td><td>åˆ›å»ºæ—¶é—´æˆ³(ISO 8601)</td></tr><tr><td><code>updated_at</code></td><td><code>str</code></td><td>æœ€è¿‘æ›´æ–°æ—¶é—´æˆ³(ISO 8601)</td></tr><tr><td><code>usage</code></td><td><code>list[str]</code></td><td>ä½¿ç”¨å†å²</td></tr><tr><td><code>background</code></td><td><code>str</code></td><td>é™„åŠ ä¸Šä¸‹æ–‡</td></tr></tbody></table>
<h4 data-id="heading-7">1.5 APIæ€»ç»“</h4>
<p><code>TreeTextMemory</code>çš„APIå¦‚ä¸‹ã€‚</p>
<p>åˆå§‹åŒ–ä¸ºï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">TreeTextMemory</span>(config:Â TreeTextMemoryConfig)
</code></pre>
<p>æ ¸å¿ƒæ–¹æ³•ä¸ºï¼š</p>





























































<table><thead><tr><th>æ–¹æ³•</th><th>æè¿°</th></tr></thead><tbody><tr><td><code>add(memories)</code></td><td>æ·»åŠ ä¸€ä¸ªæˆ–å¤šä¸ªè®°å¿†ï¼ˆé¡¹ç›®æˆ–å­—å…¸ï¼‰</td></tr><tr><td><code>replace_working_memory()</code></td><td>æ›´æ¢æ‰€æœ‰çš„WorkingMemoryèŠ‚ç‚¹</td></tr><tr><td><code>get_working_memory()</code></td><td>å¾—åˆ°æ‰€æœ‰çš„WorkingMemoryèŠ‚ç‚¹</td></tr><tr><td><code>search(query, top_k)</code></td><td>ä½¿ç”¨å‘é‡+å›¾æœç´¢æ£€ç´¢top-kä¸ªè®°å¿†</td></tr><tr><td><code>get(memory_id)</code></td><td>é€šè¿‡IDè·å–å•ä¸ªè®°å¿†</td></tr><tr><td><code>get_by_ids(ids)</code></td><td>é€šè¿‡IDsè·å–å¤šä¸ªè®°å¿†</td></tr><tr><td><code>get_all()</code></td><td>å°†æ•´ä¸ªè®°å¿†å›¾å¯¼å‡ºä¸ºå­—å…¸</td></tr><tr><td><code>update(memory_id, new)</code></td><td>é€šè¿‡IDæ›´æ–°è®°å¿†</td></tr><tr><td><code>delete(ids)</code></td><td>é€šè¿‡IDsåˆ é™¤è®°å¿†</td></tr><tr><td><code>delete_all()</code></td><td>åˆ é™¤æ‰€æœ‰çš„è®°å¿†å’Œå…³ç³»</td></tr><tr><td><code>dump(dir)</code></td><td>åœ¨ç›®å½•ä¸­å°†å›¾åºåˆ—åŒ–ä¸ºJSON</td></tr><tr><td><code>load(dir)</code></td><td>ä»ä¿å­˜çš„JSONæ–‡ä»¶åŠ è½½å›¾</td></tr><tr><td><code>drop(keep_last_n)</code></td><td>å¤‡ä»½å›¾å’Œåˆ é™¤æ•°æ®åº“ï¼Œä¿ç•™Nä¸ªå¤‡ä»½</td></tr></tbody></table>
<p>å½“è°ƒç”¨ <code>dump(dir)</code>, ç³»ç»Ÿå†™åˆ°:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dir</span>&gt;</span>/<span class="hljs-tag">&lt;<span class="hljs-name">config.memory_filename</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ–‡ä»¶åŒ…å«ä¸€ä¸ªJSONç»“æ„ï¼Œæœ‰ <code>nodes</code> and <code>edges</code>. å®ƒå¯ä»¥ä½¿ç”¨ <code>load(dir)</code>é‡æ–°åŠ è½½.</p>
<h3 data-id="heading-8">0x02 ç¤ºä¾‹</h3>
<p>ä¸‹é¢æ˜¯å¦‚ä½•æ˜¯å¦‚ä½•ä½¿ç”¨ TreeTextMemory çš„ç¤ºä¾‹ï¼Œå½“è¿è¡Œæ­¤ç¤ºä¾‹æ—¶ï¼Œå·¥ä½œæµå¦‚ä¸‹:</p>
<ol>
<li>æŠ½å–: ä½¿ç”¨LLMä»åŸå§‹æ–‡æœ¬ä¸­æå–ç»“æ„åŒ–è®°å¿†</li>
<li>åµŒå…¥: ä¸ºç›¸ä¼¼æ€§æœç´¢ç”Ÿæˆå‘é‡åµŒå…¥</li>
<li>å­˜å‚¨å’Œé“¾æ¥: å°†å…·æœ‰å…³ç³»çš„èŠ‚ç‚¹æ·»åŠ åˆ°å›¾æ•°æ®åº“ï¼ˆNeo4jï¼‰ä¸­</li>
<li>æœç´¢: é€šè¿‡å‘é‡ç›¸ä¼¼åº¦æŸ¥è¯¢ï¼Œç„¶åé€šè¿‡å›¾è·³æ•°å±•å¼€ç»“æœ</li>
</ol>
<h4 data-id="heading-9">2.1 åˆ›å»º TreeTextMemory é…ç½®</h4>
<p>TreeTextMemoryConfig çš„å®šä¹‰ä¸º:</p>
<ul>
<li>ä½ çš„åµŒå…¥ï¼ˆåˆ›å»ºå‘é‡ï¼‰,</li>
<li>ä½ çš„å›¾æ•°æ®åº“åç«¯(Neo4j),</li>
<li>è®°å¿†æŠ½å–å™¨ï¼ˆåŸºäºLLMï¼‰ï¼ˆå¯é€‰ï¼‰.</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">fromÂ memos.configs.memoryÂ <span class="hljs-keyword">import</span>Â TreeTextMemoryConfig

configÂ =Â TreeTextMemoryConfig.<span class="hljs-built_in">from_json_file</span>(<span class="hljs-string">"examples/data/config/tree_config.json"</span>)
</code></pre>
<h4 data-id="heading-10">2.2 åˆå§‹åŒ– TreeTextMemory</h4>
<pre><code class="hljs language-arduino" lang="arduino">fromÂ memos.memories.textual.treeÂ <span class="hljs-keyword">import</span>Â TreeTextMemory

tree_memoryÂ =Â <span class="hljs-built_in">TreeTextMemory</span>(config)
</code></pre>
<h4 data-id="heading-11">2.3 æŠ½å–ç»“æ„åŒ–è®°å¿†</h4>
<p>ä½¿ç”¨è®°å¿†æŠ½å–å™¨å°†å¯¹è¯ã€æ–‡ä»¶æˆ–æ–‡æ¡£è§£æä¸ºå¤šä¸ª<code>TextualMemoryItem</code>.</p>
<pre><code class="hljs language-ini" lang="ini">fromÂ memos.mem_reader.simple_structÂ importÂ SimpleStructMemReader

<span class="hljs-attr">reader</span>Â =Â SimpleStructMemReader.from_json_file(<span class="hljs-string">"examples/data/config/simple_struct_reader_config.json"</span>)

<span class="hljs-attr">scene_data</span>Â =Â [[
Â Â Â Â {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"TellÂ meÂ aboutÂ yourÂ childhood."</span>},
Â Â Â Â {<span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"IÂ lovedÂ playingÂ inÂ theÂ gardenÂ withÂ myÂ dog."</span>}
]]

<span class="hljs-attr">memories</span>Â =Â reader.get_memory(scene_data,Â type=<span class="hljs-string">"chat"</span>,Â info={<span class="hljs-string">"user_id"</span>:Â <span class="hljs-string">"1234"</span>})
forÂ m_listÂ inÂ memories:
Â Â Â Â tree_memory.add(m_list)
</code></pre>
<h4 data-id="heading-12">2.4 æœç´¢è®°å¿†</h4>
<p>å°è¯•å‘é‡æœç´¢+å›¾æœç´¢:</p>
<pre><code class="hljs language-python" lang="python">resultsÂ =Â tree_memory.search(<span class="hljs-string">"TalkÂ aboutÂ theÂ garden"</span>,Â top_k=<span class="hljs-number">5</span>)
<span class="hljs-keyword">for</span>Â i,Â nodeÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(results):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>:Â <span class="hljs-subst">{node.memory}</span>"</span>)
</code></pre>
<h4 data-id="heading-13">2.5 ä»äº’è”ç½‘æ£€ç´¢è®°å¿†ï¼ˆå¯é€‰ï¼‰</h4>
<p>ä½ ä¹Ÿå¯ä»¥ä» Google / Bing / Bochaï¼ˆåšæŸ¥ï¼‰ ç­‰æœç´¢å¼•æ“å®æ—¶è·å–ç½‘é¡µå†…å®¹ï¼Œå¹¶è‡ªåŠ¨åˆ‡åˆ†ä¸ºè®°å¿†èŠ‚ç‚¹ã€‚MemOS æä¾›äº†ç»Ÿä¸€æ¥å£ã€‚</p>
<p>ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºå¦‚ä½•æ£€ç´¢â€œAlibaba 2024 ESG reportâ€ç›¸å…³ç½‘é¡µï¼Œå¹¶è‡ªåŠ¨æå–ä¸ºç»“æ„åŒ–è®°å¿†ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment">#Â åˆ›å»ºembedder</span>
embedderÂ =Â EmbedderFactory.from_config(
Â Â Â Â EmbedderConfigFactory.model_validate({
Â Â Â Â Â Â Â Â <span class="hljs-string">"backend"</span>:Â <span class="hljs-string">"ollama"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"config"</span>:Â {<span class="hljs-string">"model_name_or_path"</span>:Â <span class="hljs-string">"nomic-embed-text:latest"</span>},
Â Â Â Â })
)

<span class="hljs-comment">#Â é…ç½®æ£€ç´¢å™¨ï¼ˆä»¥Â BochaAIÂ ä¸ºä¾‹ï¼‰</span>
retriever_configÂ =Â InternetRetrieverConfigFactory.model_validate({
Â Â Â Â <span class="hljs-string">"backend"</span>:Â <span class="hljs-string">"bocha"</span>,
Â Â Â Â <span class="hljs-string">"config"</span>:Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"api_key"</span>:Â <span class="hljs-string">"sk-xxx"</span>,Â Â <span class="hljs-comment">#Â æ›¿æ¢ä¸ºä½ çš„Â BochaAIÂ APIÂ Key</span>
Â Â Â Â Â Â Â Â <span class="hljs-string">"max_results"</span>:Â 5,
Â Â Â Â Â Â Â Â <span class="hljs-string">"reader"</span>:Â {Â Â <span class="hljs-comment">#Â è‡ªåŠ¨åˆ†å—çš„Â ReaderÂ é…ç½®</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"backend"</span>:Â <span class="hljs-string">"simple_struct"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-string">"config"</span>:Â ...,Â Â <span class="hljs-comment">#Â ä½ çš„mem-readerÂ config</span>
Â Â Â Â Â Â Â Â },
Â Â Â Â }
})

<span class="hljs-comment">#Â å®ä¾‹åŒ–æ£€ç´¢å™¨</span>
retrieverÂ =Â InternetRetrieverFactory.from_config(retriever_config,Â embedder)

<span class="hljs-comment">#Â æ‰§è¡Œç½‘é¡µæ£€ç´¢</span>
resultsÂ =Â retriever.retrieve_from_internet(<span class="hljs-string">"AlibabaÂ 2024Â ESGÂ report"</span>)

<span class="hljs-comment">#Â æ·»åŠ åˆ°è®°å¿†å›¾ä¸­</span>
forÂ mÂ inÂ results:
Â Â Â Â tree_memory.add(m)
</code></pre>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ TreeTextMemoryConfig ä¸­é…ç½® internet_retriever å­—æ®µï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"internet_retriever"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â Â Â <span class="hljs-attr">"backend"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"bocha"</span><span class="hljs-punctuation">,</span>
Â Â Â Â <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â <span class="hljs-attr">"api_key"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"sk-xxx"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â <span class="hljs-attr">"max_results"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">5</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â <span class="hljs-attr">"reader"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-punctuation">{</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"backend"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"simple_struct"</span><span class="hljs-punctuation">,</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">"config"</span><span class="hljs-punctuation">:</span>Â ...
Â Â Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â Â Â <span class="hljs-punctuation">}</span>
Â Â <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™æ ·ï¼Œåœ¨è°ƒç”¨ tree_memory.search(query) æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è°ƒç”¨äº’è”ç½‘æ£€ç´¢ï¼ˆå¦‚ BochaAI / Google / Bingï¼‰ç„¶åå°†ç»“æœä¸æœ¬åœ°å›¾ä¸­çš„èŠ‚ç‚¹ä¸€èµ·æ’åºè¿”å›ï¼Œæ— éœ€æ‰‹åŠ¨è°ƒç”¨ retriever.retrieve_from_internet</p>
<h4 data-id="heading-14">2.6 æ›¿æ¢å·¥ä½œè®°å¿†</h4>
<p>ç”¨ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ›¿æ¢ä½ å½“å‰çš„ <code>WorkingMemory</code>:</p>
<pre><code class="hljs language-css" lang="css">tree_memory<span class="hljs-selector-class">.replace_working_memory</span>(
Â Â Â Â <span class="hljs-selector-attr">[{Â Â Â Â Â Â Â Â <span class="hljs-string">"memory"</span>:Â <span class="hljs-string">"UserÂ isÂ discussingÂ gardeningÂ tips."</span>,Â Â Â Â Â Â Â Â <span class="hljs-string">"metadata"</span>:Â {<span class="hljs-string">"memory_type"</span>:Â <span class="hljs-string">"WorkingMemory"</span>}Â Â Â Â }]</span>
)
</code></pre>
<h4 data-id="heading-15">2.7 å¤‡ä»½ä¸æ¢å¤</h4>
<p>æ”¯æŒæ ‘ç»“æ„çš„æŒä¹…åŒ–å­˜å‚¨ä¸éšæ—¶é‡è½½:</p>
<pre><code class="hljs language-lua" lang="lua">tree_memory.<span class="hljs-built_in">dump</span>(<span class="hljs-string">"tmp/tree_memories"</span>)
tree_memory.<span class="hljs-built_in">load</span>(<span class="hljs-string">"tmp/tree_memories"</span>)
</code></pre>
<h4 data-id="heading-16">2.8 å®Œæ•´ä»£ç </h4>
<p>è¯¥ç¤ºä¾‹æ•´åˆäº†ä¸Šè¿°æ‰€æœ‰æ­¥éª¤ï¼Œæä¾›ä¸€ä¸ªç«¯åˆ°ç«¯çš„å®Œæ•´æµç¨‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span>Â memos.configs.embedderÂ <span class="hljs-keyword">import</span>Â EmbedderConfigFactory
<span class="hljs-keyword">from</span>Â memos.configs.memoryÂ <span class="hljs-keyword">import</span>Â TreeTextMemoryConfig
<span class="hljs-keyword">from</span>Â memos.configs.mem_readerÂ <span class="hljs-keyword">import</span>Â SimpleStructMemReaderConfig
<span class="hljs-keyword">from</span>Â memos.embedders.factoryÂ <span class="hljs-keyword">import</span>Â EmbedderFactory
<span class="hljs-keyword">from</span>Â memos.mem_reader.simple_structÂ <span class="hljs-keyword">import</span>Â SimpleStructMemReader
<span class="hljs-keyword">from</span>Â memos.memories.textual.treeÂ <span class="hljs-keyword">import</span>Â TreeTextMemory

<span class="hljs-comment">#Â åµŒå…¥è®¾ç½®</span>
embedder_configÂ =Â EmbedderConfigFactory.model_validate({
Â Â Â Â <span class="hljs-string">"backend"</span>:Â <span class="hljs-string">"ollama"</span>,
Â Â Â Â <span class="hljs-string">"config"</span>:Â {<span class="hljs-string">"model_name_or_path"</span>:Â <span class="hljs-string">"nomic-embed-text:latest"</span>}
})
embedderÂ =Â EmbedderFactory.from_config(embedder_config)

<span class="hljs-comment">#Â åˆ›å»ºTreeTextMemory</span>
tree_configÂ =Â TreeTextMemoryConfig.from_json_file(<span class="hljs-string">"examples/data/config/tree_config.json"</span>)
my_tree_textual_memoryÂ =Â TreeTextMemory(tree_config)
my_tree_textual_memory.delete_all()

<span class="hljs-comment">#Â é˜…è¯»å™¨è®¾ç½®</span>
reader_configÂ =Â SimpleStructMemReaderConfig.from_json_file(
Â Â Â Â <span class="hljs-string">"examples/data/config/simple_struct_reader_config.json"</span>
)
readerÂ =Â SimpleStructMemReader(reader_config)

<span class="hljs-comment">#Â ä»å¯¹è¯ä¸­æŠ½å–</span>
scene_dataÂ =Â [[
Â Â Â Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"user"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"TellÂ meÂ aboutÂ yourÂ childhood."</span>
Â Â Â Â },
Â Â Â Â {
Â Â Â Â Â Â Â Â <span class="hljs-string">"role"</span>:Â <span class="hljs-string">"assistant"</span>,
Â Â Â Â Â Â Â Â <span class="hljs-string">"content"</span>:Â <span class="hljs-string">"IÂ lovedÂ playingÂ inÂ theÂ gardenÂ withÂ myÂ dog."</span>
Â Â Â Â },
]]
memoryÂ =Â reader.get_memory(scene_data,Â <span class="hljs-built_in">type</span>=<span class="hljs-string">"chat"</span>,Â info={<span class="hljs-string">"user_id"</span>:Â <span class="hljs-string">"1234"</span>,Â <span class="hljs-string">"session_id"</span>:Â <span class="hljs-string">"2222"</span>})
<span class="hljs-keyword">for</span>Â m_listÂ <span class="hljs-keyword">in</span>Â memory:
Â Â Â Â my_tree_textual_memory.add(m_list)

<span class="hljs-comment">#Â æœç´¢</span>
resultsÂ =Â my_tree_textual_memory.search(
Â Â Â Â <span class="hljs-string">"TalkÂ aboutÂ theÂ user'sÂ childhoodÂ story?"</span>,
Â Â Â Â top_k=<span class="hljs-number">10</span>
)
<span class="hljs-keyword">for</span>Â i,Â rÂ <span class="hljs-keyword">in</span>Â <span class="hljs-built_in">enumerate</span>(results):
Â Â Â Â <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{i}</span>'thÂ result:Â <span class="hljs-subst">{r.memory}</span>"</span>)

<span class="hljs-comment">#Â ä»æ–‡æ¡£æ·»åŠ [å¯é€‰é¡¹]</span>
doc_pathsÂ =Â [<span class="hljs-string">"./text1.txt"</span>,Â <span class="hljs-string">"./text2.txt"</span>]
doc_memoryÂ =Â reader.get_memory(
Â Â doc_paths,Â <span class="hljs-string">"doc"</span>,Â info={
Â Â Â Â Â Â <span class="hljs-string">"user_id"</span>:Â <span class="hljs-string">"your_user_id"</span>,
Â Â Â Â Â Â <span class="hljs-string">"session_id"</span>:Â <span class="hljs-string">"your_session_id"</span>,
Â Â }
)
<span class="hljs-keyword">for</span>Â m_listÂ <span class="hljs-keyword">in</span>Â doc_memory:
Â Â Â Â my_tree_textual_memory.add(m_list)

<span class="hljs-comment">#Â è½¬å‚¨å’Œä¸¢å¼ƒ[å¯é€‰é¡¹]</span>
my_tree_textual_memory.dump(<span class="hljs-string">"tmp/my_tree_textual_memory"</span>)
my_tree_textual_memory.drop()
</code></pre>
<h3 data-id="heading-17">0x03 ç®¡ç†ï¼ˆMemoryManagerï¼‰</h3>
<p>MemoryManager æ˜¯ TreeTextMemory ç±»çš„ä¸€ä¸ªæ ¸å¿ƒç»„ä»¶ï¼Œä¸»è¦è´Ÿè´£ç®¡ç†ä¸åŒç±»å‹çš„è®°å¿†ï¼ˆå¦‚å·¥ä½œè®°å¿†ã€é•¿æœŸè®°å¿†å’Œç”¨æˆ·è®°å¿†ï¼‰çš„æ·»åŠ ã€ç»„ç»‡å’Œç»´æŠ¤ã€‚</p>
<h4 data-id="heading-18">3.1 å®šä¹‰</h4>
<p>MemoryManager çš„ç®€è¦å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs">MemoryManager
Â Â Â Â -Â usesÂ GraphStructureReorganizer
Â Â Â Â Â Â -Â usesÂ NodeHandler
Â Â Â Â Â Â Â Â -Â usesÂ Neo4jGraphDB
Â Â Â Â Â Â Â Â -Â usesÂ LLM
Â Â Â Â Â Â Â Â -Â usesÂ Embedder
Â Â Â Â Â Â -Â usesÂ RelationAndReasoningDetector
Â Â Â Â Â Â Â Â -Â usesÂ Neo4jGraphDB
Â Â Â Â Â Â Â Â -Â usesÂ LLM
Â Â Â Â Â Â Â Â -Â usesÂ Embedder
Â Â Â Â Â Â Â Â -Â usesÂ Neo4jGraphDB
Â Â Â Â -Â usesÂ Neo4jGraphDB
Â Â Â Â -Â usesÂ Embedder
Â Â Â Â -Â usesÂ LLM
</code></pre>
<p>MemoryManager ä»£ç å¦‚ä¸‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">classÂ MemoryManager:
Â Â Â Â defÂ __init__(
Â Â Â Â Â Â Â Â self,
Â Â Â Â Â Â Â Â graph_store:Â Neo4jGraphDB,
Â Â Â Â Â Â Â Â embedder:Â OllamaEmbedder,
Â Â Â Â Â Â Â Â llm:Â OpenAILLMÂ |Â OllamaLLMÂ |Â AzureLLM,
Â Â Â Â Â Â Â Â memory_size:Â dictÂ |Â <span class="hljs-attr">None</span>Â =Â None,
Â Â Â Â Â Â Â Â threshold:Â floatÂ |Â <span class="hljs-attr">None</span>Â =Â <span class="hljs-number">0.80</span>,
Â Â Â Â Â Â Â Â merged_threshold:Â floatÂ |Â <span class="hljs-attr">None</span>Â =Â <span class="hljs-number">0.92</span>,
Â Â Â Â Â Â Â Â is_reorganize:Â <span class="hljs-attr">bool</span>Â =Â <span class="hljs-literal">False</span>,
Â Â Â Â ):
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.graph_store</span>Â =Â graph_store
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.embedder</span>Â =Â embedder
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.memory_size</span>Â =Â memory_size
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.current_memory_size</span>Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â "WorkingMemory":Â 0,
Â Â Â Â Â Â Â Â Â Â Â Â "LongTermMemory":Â 0,
Â Â Â Â Â Â Â Â Â Â Â Â "UserMemory":Â 0,
Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â ifÂ notÂ memory_size:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">self.memory_size</span>Â =Â {
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "WorkingMemory":Â 20,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "LongTermMemory":Â 1500,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â "UserMemory":Â 480,
Â Â Â Â Â Â Â Â Â Â Â Â }
Â Â Â Â Â Â Â Â <span class="hljs-attr">self._threshold</span>Â =Â threshold
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.is_reorganize</span>Â =Â is_reorganize
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.reorganizer</span>Â =Â GraphStructureReorganizer(
Â Â Â Â Â Â Â Â Â Â Â Â graph_store,Â llm,Â embedder,Â <span class="hljs-attr">is_reorganize</span>=is_reorganize
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-attr">self._merged_threshold</span>Â =Â merged_threshold
</code></pre>
<h4 data-id="heading-19">3.2 ä¸»è¦åŠŸèƒ½</h4>
<p>ä»¥ä¸‹æ˜¯å…¶ä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>è®°å¿†ç®¡ç†ä¸ç»„ç»‡ï¼š</p>
<ul>
<li>
<p>æ·»åŠ è®°å¿†ï¼šé€šè¿‡ add() æ–¹æ³•å¹¶è¡Œå¤„ç†ä¸åŒç±»å‹çš„è®°å¿†æ·»åŠ ã€‚é€šè¿‡ MemoryManager ç»„ä»¶ç®¡ç†ä¸åŒç±»å‹çš„è®°å¿†ï¼š</p>
<ul>
<li>å·¥ä½œè®°å¿†ï¼ˆWorkingMemoryï¼‰</li>
<li>é•¿æœŸè®°å¿†ï¼ˆLongTermMemoryï¼‰</li>
<li>ç”¨æˆ·è®°å¿†ï¼ˆUserMemoryï¼‰</li>
<li>æ¯ç§è®°å¿†ç±»å‹éƒ½æœ‰é¢„è®¾çš„å®¹é‡é™åˆ¶ï¼Œå¹¶æ”¯æŒåŠ¨æ€è°ƒæ•´ã€‚</li>
</ul>
</li>
<li>
<p>æ›¿æ¢å·¥ä½œè®°å¿†ï¼šé€šè¿‡ replace_working_memory() æ–¹æ³•æ›´æ–°å·¥ä½œè®°å¿†å†…å®¹</p>
</li>
<li>
<p>å†…å­˜å¤§å°ç®¡ç†ï¼šé€šè¿‡ get_current_memory_size() è·å–å’Œåˆ·æ–°å„ç±»è®°å¿†çš„å½“å‰æ•°é‡</p>
</li>
</ul>
</li>
<li>
<p>è®°å¿†å­˜å‚¨å¤„ç†</p>
<ul>
<li>å·¥ä½œè®°å¿†ç®¡ç†ï¼šæ‰€æœ‰è®°å¿†éƒ½ä¼šè¢«æ·»åŠ åˆ°å·¥ä½œè®°å¿†ä¸­ï¼Œé€šè¿‡ _add_memory_to_db() æ–¹æ³•å¤„ç†</li>
<li>é•¿æœŸè®°å¿†å’Œç”¨æˆ·è®°å¿†ç®¡ç†ï¼šé€šè¿‡ _add_to_graph_memory() æ–¹æ³•å¤„ç†ç‰¹å®šç±»å‹çš„è®°å¿†å­˜å‚¨</li>
<li>FIFO æœºåˆ¶ï¼šè‡ªåŠ¨ç»´æŠ¤å„ç±»è®°å¿†çš„æœ€å¤§å®¹é‡ï¼Œåˆ é™¤è¿‡æœŸçš„è®°å¿†é¡¹</li>
</ul>
</li>
<li>
<p>å›¾ç»“æ„ç»´æŠ¤</p>
<ul>
<li>ç»“æ„è·¯å¾„ç®¡ç†ï¼šé€šè¿‡ _ensure_structure_path() ç¡®ä¿è®°å¿†çš„ç»“æ„åŒ–å­˜å‚¨è·¯å¾„</li>
<li>è¾¹ç»§æ‰¿ï¼šé€šè¿‡ _inherit_edges() æ–¹æ³•åœ¨èŠ‚ç‚¹åˆå¹¶æ—¶è¿ç§»è¿æ¥å…³ç³»</li>
</ul>
</li>
<li>
<p>ä¸å›¾æ•°æ®åº“äº¤äº’</p>
<ul>
<li>ä¾èµ–å›¾æ•°æ®åº“ï¼šé€šè¿‡ graph_storeï¼ˆå¦‚ Neo4jï¼‰è¿›è¡Œå®é™…çš„è®°å¿†å­˜å‚¨å’Œæ£€ç´¢æ“ä½œ</li>
<li>å®šæœŸæ¸…ç†ï¼šæ ¹æ®é…ç½®çš„å®¹é‡é™åˆ¶è‡ªåŠ¨æ¸…ç†è¿‡æœŸçš„è®°å¿†é¡¹</li>
</ul>
</li>
<li>
<p>ä¸Reorganizer é›†æˆ</p>
<ul>
<li>è®°å¿†é‡ç»„ç»‡ï¼šä¸ GraphStructureReorganizer é›†æˆï¼Œåœ¨æ·»åŠ è®°å¿†æ—¶è§¦å‘å›¾ç»“æ„çš„é‡æ–°ç»„ç»‡</li>
<li>å¼‚æ­¥å¤„ç†ï¼šé€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—æœºåˆ¶å¼‚æ­¥å¤„ç†è®°å¿†çš„é‡æ–°ç»„ç»‡ä»»åŠ¡</li>
</ul>
</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼ŒMemoryManager è´Ÿè´£åè°ƒå’Œç®¡ç†è®°å¿†çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬æ·»åŠ ã€å­˜å‚¨ã€ç»´æŠ¤å’Œæ¸…ç†ï¼Œæ˜¯è®°å¿†ç³»ç»Ÿçš„æ ¸å¿ƒç®¡ç†ç»„ä»¶ã€‚</p>
<h4 data-id="heading-20">3.3 GraphStructureReorganizer</h4>
<p>GraphStructureReorganizer æ˜¯è´Ÿè´£ç»´æŠ¤å’Œä¼˜åŒ– Memos ç³»ç»Ÿä¸­è®°å¿†å›¾ç»“æ„çš„ç»„ä»¶ï¼Œæœ¬è´¨ä¸Šå……å½“äº†ä¸€ä¸ªè®°å¿†ç»´æŠ¤ç³»ç»Ÿï¼Œéšç€æ–°è®°å¿†çš„ä¸æ–­æ·»åŠ ï¼Œå®ƒèƒ½å¤Ÿä¿æŒåŸºäºå›¾çš„è®°å¿†ç»“æ„æœ‰åºã€é«˜æ•ˆä¸”åœ¨è¯­ä¹‰ä¸Šè¿è´¯ã€‚</p>
<h5 data-id="heading-21">3.3.1 ä¸»è¦åŠŸèƒ½</h5>
<p>ä»¥ä¸‹æ˜¯å…¶ä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>
<p>æ¶ˆæ¯é˜Ÿåˆ—ç®¡ç†</p>
<ul>
<li>
<p>å¼‚æ­¥å¤„ç†ï¼šä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼ˆPriorityQueueï¼‰æ¥ç®¡ç†å›¾ç»“æ„æ“ä½œï¼Œå¦‚æ·»åŠ ã€åˆ é™¤ã€åˆå¹¶å’Œæ›´æ–°èŠ‚ç‚¹/è¾¹</p>
<ul>
<li>åœ¨å•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œï¼Œé¿å…é˜»å¡ä¸»è®°å¿†æ“ä½œ</li>
<li>ä½¿ç”¨çº¿ç¨‹æ± å¹¶è¡Œå¤„ç†èšç±»å’Œå…³ç³»æ£€æµ‹ä»»åŠ¡</li>
<li>æä¾›ç­‰å¾…æ­£åœ¨è¿›è¡Œçš„é‡ç»„ä»»åŠ¡å®Œæˆçš„æ–¹æ³•</li>
</ul>
</li>
<li>
<p>ä¼˜å…ˆçº§å¤„ç†ï¼šä¸åŒæ“ä½œæœ‰ä¸åŒçš„ä¼˜å…ˆçº§ï¼ˆadd/remove &gt; merge &gt; endï¼‰ï¼Œç¡®ä¿å…³é”®æ“ä½œä¼˜å…ˆå¤„ç†</p>
</li>
<li>
<p>çº¿ç¨‹å®‰å…¨æ“ä½œï¼šè¿è¡Œä¸€ä¸ªä¸“ç”¨çº¿ç¨‹ï¼ˆ_run_message_consumer_loopï¼‰æ¥å¤„ç†æ’é˜Ÿçš„æ¶ˆæ¯</p>
</li>
</ul>
</li>
<li>
<p>å›¾ç»“æ„ï¼ˆè®°å¿†ç»“æ„ï¼‰ä¼˜åŒ–</p>
<ul>
<li>å‘¨æœŸæ€§ä¼˜åŒ–ï¼šè¿è¡Œä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹ï¼ˆ<code>_run_structure_organizer_loop</code>ï¼‰ï¼Œå®šæœŸè§¦å‘å¯¹ LongTermMemory å’Œ UserMemory çš„ç»“æ„ä¼˜åŒ–ï¼Œä»¥ä¿æŒæ•ˆç‡å’Œä¸€è‡´æ€§</li>
<li>è‡ªåŠ¨è§¦å‘ï¼šå½“æœ‰æ–°èŠ‚ç‚¹æ·»åŠ æ—¶å¯ä»¥è‡ªåŠ¨è§¦å‘ä¼˜åŒ–ï¼ˆ_reorganize_needed æ ‡å¿—ï¼‰</li>
</ul>
</li>
<li>
<p>è®°å¿†èŠ‚ç‚¹å…³ç³»ç®¡ç†ï¼ˆå†²çªè§£å†³å’Œè®°å¿†èåˆï¼‰</p>
<ul>
<li>å†²çªæ£€æµ‹ï¼šæ£€æµ‹æ–°æ·»åŠ èŠ‚ç‚¹ä¸ç°æœ‰èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼Œå³ä¸ RelationAndReasoningDetector é›†æˆï¼Œè¯†åˆ«è®°å¿†ä¹‹é—´çš„å…³ç³»ï¼ˆå› æœã€æ¡ä»¶ã€å†²çªç­‰ï¼‰</li>
<li>å†²çªè§£å†³ï¼šä¸ NodeHandler åä½œï¼Œé€šè¿‡åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„èåˆæ¥è§£å†³ç›¸ä¼¼è®°å¿†ä¹‹é—´çš„å†²çªå’Œå†—ä½™</li>
<li>è®°å¿†åˆå¹¶ï¼šå¤„ç†é‡å¤æˆ–ç›¸ä¼¼è®°å¿†çš„åˆå¹¶ï¼Œå½’æ¡£æˆ–åˆ é™¤è¿‡æ—¶/ä¸é‚£ä¹ˆé‡è¦çš„è®°å¿†ï¼Œä»¥ä¿æŒå›¾çš„æ•ˆç‡</li>
</ul>
</li>
<li>
<p>ç»“æ„å¢å¼º</p>
<ul>
<li>å±€éƒ¨èšç±»ï¼šä½¿ç”¨è¯¸å¦‚ LOCAL_SUBCLUSTER_PROMPT å’Œ REORGANIZE_PROMPT ç­‰æç¤ºè¯æ¥è¯†åˆ«å’Œç»„ç»‡ç›¸å…³è®°å¿†åˆ°é›†ç¾¤ä¸­</li>
<li>å±‚æ¬¡åŒ–ç»„ç»‡ï¼šåˆ›å»ºæ‘˜è¦èŠ‚ç‚¹å¹¶åœ¨è®°å¿†ä¹‹é—´å»ºç«‹å±‚æ¬¡å…³ç³»ï¼ˆåœ¨æ‘˜è¦èŠ‚ç‚¹ä¸å…¶ç»„æˆèŠ‚ç‚¹ä¹‹é—´å»ºç«‹çˆ¶å­å…³ç³»ï¼ˆPARENT è¾¹ï¼‰ï¼‰ï¼Œä»¥åˆ›å»ºå¤šå±‚æ¬¡çš„ç»„ç»‡ç»“æ„ï¼ˆç»´æŠ¤ç±»ä¼¼æ ‘çš„ç»“æ„ï¼‰ï¼Œä»¥æé«˜è®°å¿†æ£€ç´¢æ•ˆç‡</li>
<li>è¾¹ç®¡ç†ï¼šåœ¨é‡ç»„è¿‡ç¨‹ä¸­ç»´æŠ¤èŠ‚ç‚¹é—´çš„è¿æ¥å…³ç³»</li>
</ul>
</li>
</ul>
<h5 data-id="heading-22">3.3.2 ä¸å…¶ä»–ç»„ä»¶é›†æˆ</h5>
<ul>
<li>å›¾æ•°æ®åº“æ¥å£ï¼šGraphStructureReorganizerç›´æ¥ä¸ Neo4jGraphDB äº¤äº’æ‰§è¡Œå›¾æ“ä½œ</li>
<li>å¤§è¯­è¨€æ¨¡å‹é›†æˆï¼šGraphStructureReorganizerä½¿ç”¨è¯­è¨€æ¨¡å‹æ¥ç†è§£å…³ç³»å¹¶ç”Ÿæˆæ‘˜è¦</li>
<li>åµŒå…¥æ”¯æŒï¼šGraphStructureReorganizeråˆ©ç”¨ OllamaEmbedder è¿›è¡Œè¯­ä¹‰ç›¸ä¼¼åº¦è®¡ç®—</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼ŒGraphStructureReorganizer é€šè¿‡æŒç»­ä¼˜åŒ–ç»“æ„ã€è§£å†³å†²çªå’Œåœ¨è®°å¿†èŠ‚ç‚¹é—´å»ºç«‹æœ‰æ„ä¹‰çš„å…³ç³»æ¥ç»´æŠ¤è®°å¿†å›¾çš„è´¨é‡å’Œç»„ç»‡æ€§ã€‚</p>
<h5 data-id="heading-23">3.3.3 å¦‚ä½•è°ƒç”¨</h5>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹ GraphStructureReorganizer å¦‚ä½•è°ƒç”¨ã€‚</p>
<ul>
<li>åˆå§‹åŒ–æ—¶å€™å¯åŠ¨å‘¨æœŸæ€§ä¼˜åŒ–ä»»åŠ¡</li>
</ul>
<p>å½“TreeTextMemoryåˆå§‹åŒ–æ—¶ï¼Œå¦‚æœé…ç½®äº†é‡ç»„ç»‡åŠŸèƒ½ï¼ˆis_reorganize=Trueï¼‰ï¼Œä¼šå¯åŠ¨ä¸€ä¸ªå‘¨æœŸæ€§çš„ç»“æ„ä¼˜åŒ–çº¿ç¨‹ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">classÂ GraphStructureReorganizer:
Â Â Â Â defÂ __init__(
Â Â Â Â Â Â Â Â self,Â graph_store:Â Neo4jGraphDB,Â llm:Â BaseLLM,Â embedder:Â OllamaEmbedder,Â is_reorganize:Â bool
Â Â Â Â ):
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.queue</span>Â =Â PriorityQueue()Â Â <span class="hljs-comment">#Â Min-heap</span>
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.graph_store</span>Â =Â graph_store
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.llm</span>Â =Â llm
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.embedder</span>Â =Â embedder
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.relation_detector</span>Â =Â RelationAndReasoningDetector(
Â Â Â Â Â Â Â Â Â Â Â Â self.graph_store,Â self.llm,Â self.embedder
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-attr">self.resolver</span>Â =Â NodeHandler(graph_store=graph_store,Â llm=llm,Â embedder=embedder)

Â Â Â Â Â Â Â Â <span class="hljs-attr">self.is_reorganize</span>Â =Â is_reorganize
Â Â Â Â Â Â Â Â <span class="hljs-attr">self._reorganize_needed</span>Â =Â <span class="hljs-literal">True</span>
Â Â Â Â Â Â Â Â ifÂ self.is_reorganize:
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ____Â 1.Â ForÂ queueÂ messageÂ drivenÂ threadÂ ___________</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">self.thread</span>Â =Â threading.Thread(target=self._run_message_consumer_loop)
Â Â Â Â Â Â Â Â Â Â Â Â self.thread.start()
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â ____Â 2.Â ForÂ periodicÂ structureÂ optimizationÂ _______</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">self._stop_scheduler</span>Â =Â <span class="hljs-literal">False</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">self._is_optimizing</span>Â =Â {<span class="hljs-string">"LongTermMemory"</span>:Â <span class="hljs-literal">False</span>,Â <span class="hljs-string">"UserMemory"</span>:Â <span class="hljs-literal">False</span>}
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">self.structure_optimizer_thread</span>Â =Â threading.Thread(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-attr">target</span>=self._run_structure_organizer_loop
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â Â Â Â Â self.structure_optimizer_thread.start()
</code></pre>
<p>æ¯100ç§’è‡ªåŠ¨è§¦å‘ä¸€æ¬¡ä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-python" lang="python">Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_run_structure_organizer_loop</span>(<span class="hljs-params">self</span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""
Â Â Â Â Â Â Â Â UseÂ scheduleÂ libraryÂ toÂ periodicallyÂ triggerÂ structureÂ optimization.
Â Â Â Â Â Â Â Â ThisÂ runsÂ untilÂ theÂ stopÂ flagÂ isÂ set.
Â Â Â Â Â Â Â Â """</span>
Â Â Â Â Â Â Â Â <span class="hljs-keyword">import</span>Â schedule

Â Â Â Â Â Â Â Â schedule.every(<span class="hljs-number">100</span>).seconds.do(self.optimize_structure,Â scope=<span class="hljs-string">"LongTermMemory"</span>)
Â Â Â Â Â Â Â Â schedule.every(<span class="hljs-number">100</span>).seconds.do(self.optimize_structure,Â scope=<span class="hljs-string">"UserMemory"</span>)

Â Â Â Â Â Â Â Â <span class="hljs-keyword">while</span>Â <span class="hljs-keyword">not</span>Â <span class="hljs-built_in">getattr</span>(self,Â <span class="hljs-string">"_stop_scheduler"</span>,Â <span class="hljs-literal">False</span>):
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â <span class="hljs-built_in">any</span>(self._is_optimizing.values()):
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â time.sleep(<span class="hljs-number">1</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">continue</span>
Â Â Â Â Â Â Â Â Â Â Â Â <span class="hljs-keyword">if</span>Â self._reorganize_needed:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.optimize_structure(scope=<span class="hljs-string">"LongTermMemory"</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.optimize_structure(scope=<span class="hljs-string">"UserMemory"</span>)
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self._reorganize_neededÂ =Â <span class="hljs-literal">False</span>
Â Â Â Â Â Â Â Â Â Â Â Â time.sleep(<span class="hljs-number">30</span>)
</code></pre>
<ul>
<li>æ·»åŠ æ–°èŠ‚ç‚¹æ—¶è§¦å‘ä¼˜åŒ–</li>
</ul>
<p>å½“é€šè¿‡MemoryManager æ·»åŠ æ–°è®°å¿†èŠ‚ç‚¹æ—¶ï¼Œä¼šå‘ GraphStructureReorganizer çš„æ¶ˆæ¯é˜Ÿåˆ—æ·»åŠ ä¸€æ¡"add" æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-python" lang="python">Â Â Â Â <span class="hljs-keyword">def</span>Â <span class="hljs-title function_">_add_to_graph_memory</span>(<span class="hljs-params">self,Â memory:Â TextualMemoryItem,Â memory_type:Â <span class="hljs-built_in">str</span></span>):
Â Â Â Â Â Â Â Â <span class="hljs-string">"""
Â Â Â Â Â Â Â Â GeneralizedÂ methodÂ toÂ addÂ memoryÂ toÂ aÂ graph-basedÂ memoryÂ typeÂ (e.g.,Â LongTermMemory,Â UserMemory).

Â Â Â Â Â Â Â Â Parameters:
Â Â Â Â Â Â Â Â -Â memory:Â memoryÂ itemÂ toÂ insert
Â Â Â Â Â Â Â Â -Â memory_type:Â "LongTermMemory"Â |Â "UserMemory"
Â Â Â Â Â Â Â Â -Â similarity_threshold:Â deduplicationÂ threshold
Â Â Â Â Â Â Â Â -Â topic_summary_prefix:Â summaryÂ nodeÂ idÂ prefixÂ ifÂ applicable
Â Â Â Â Â Â Â Â -Â enable_summary_link:Â whetherÂ toÂ auto-linkÂ toÂ aÂ summaryÂ node
Â Â Â Â Â Â Â Â """</span>
Â Â Â Â Â Â Â Â node_idÂ =Â <span class="hljs-built_in">str</span>(uuid.uuid4())
Â Â Â Â Â Â Â Â <span class="hljs-comment">#Â StepÂ 2:Â AddÂ newÂ nodeÂ toÂ graph</span>
Â Â Â Â Â Â Â Â self.graph_store.add_node(
Â Â Â Â Â Â Â Â Â Â Â Â node_id,Â memory.memory,Â memory.metadata.model_dump(exclude_none=<span class="hljs-literal">True</span>)
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â self.reorganizer.add_message(
Â Â Â Â Â Â Â Â Â Â Â Â QueueMessage(
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â op=<span class="hljs-string">"add"</span>,
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â after_node=[node_id],
Â Â Â Â Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â node_id
</code></pre>
<p>å½“æ¶ˆæ¯å¤„ç†å™¨å¤„ç†â€addâ€œæ“ä½œå®Œæˆåï¼Œä¼šè®¾ç½®_reorganize_needed=Trueï¼Œåœ¨ä¸‹ä¸€æ¬¡æ£€æŸ¥æ—¶è§¦å‘ä¼˜åŒ–ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Â Â Â Â defÂ handle_add(self,Â message:Â QueueMessage):
Â Â Â Â Â Â Â Â logger.debug(f"HandlingÂ addÂ operation:Â {str(message)<span class="hljs-section">[:500]</span>}")
Â Â Â Â Â Â Â Â <span class="hljs-attr">added_node</span>Â =Â message.after_node[<span class="hljs-number">0</span>]
Â Â Â Â Â Â Â Â <span class="hljs-attr">detected_relationships</span>Â =Â self.resolver.detect(
Â Â Â Â Â Â Â Â Â Â Â Â added_node,Â <span class="hljs-attr">scope</span>=added_node.metadata.memory_type
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â ifÂ detected_relationships:
Â Â Â Â Â Â Â Â Â Â Â Â forÂ added_node,Â existing_node,Â relationÂ inÂ detected_relationships:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.resolver.resolve(added_node,Â existing_node,Â relation)

Â Â Â Â Â Â Â Â <span class="hljs-attr">self._reorganize_needed</span>Â =Â <span class="hljs-literal">True</span>
</code></pre>
<p>åœ¨ _run_structure_organizer_loop ä¸­æ£€æŸ¥åˆ°è¯¥æ ‡è¯†æ—¶è§¦å‘ä¼˜åŒ–ã€‚</p>
<ul>
<li>ä¹Ÿå¯ä»¥ç›´æ¥è°ƒç”¨ optimize_structure()æ–¹æ³•</li>
</ul>
<p>æ€»ç»“ï¼Œè¿™ç§è®¾è®¡ç¡®ä¿äº†è®°å¿†å›¾ç»“æ„èƒ½å¤Ÿå®šæœŸä¼˜åŒ–ï¼ŒåŒæ—¶åœ¨æœ‰æ–°å†…å®¹æ·»åŠ æ—¶ä¹Ÿå¯ä»¥åŠæ—¶è°ƒæ•´ç»“æ„ã€‚</p>
<h5 data-id="heading-24">3.3.4 LLM çš„ä½¿ç”¨</h5>
<p>GraphStructureReorganizer ä¸ä»…ä½¿ç”¨äº† LLMï¼Œè€Œä¸”åœ¨å…¶æ ¸å¿ƒåŠŸèƒ½ä¸­æ·±åº¦ä¾èµ– LLM æ¥å®ç°ï¼š</p>
<ul>
<li>èŠ‚ç‚¹é—´è¯­ä¹‰å…³ç³»çš„ç†è§£å’Œå»ºç«‹</li>
<li>å†²çªè®°å¿†çš„æ£€æµ‹ä¸èåˆ</li>
<li>æ–°çš„çŸ¥è¯†æ¨ç†å’Œèšåˆ</li>
<li>å›¾ç»“æ„çš„æ™ºèƒ½ä¼˜åŒ–</li>
</ul>
<p>è¿™äº›åŠŸèƒ½ä½¿è®°å¿†å›¾è°±ä¸ä»…æ˜¯ä¸€ä¸ªç®€å•çš„æ•°æ®å­˜å‚¨ç»“æ„ï¼Œè¿˜èƒ½è‡ªä¸»åœ°ç»´æŠ¤è¯­ä¹‰ä¸€è‡´æ€§å’Œç»“æ„æ€§</p>
<h6 data-id="heading-25">ç›´æ¥ä¾èµ–</h6>
<p>GraphStructureReorganizer åœ¨åˆå§‹åŒ–æ—¶æ¥æ”¶ä¸€ä¸ª LLM å®ä¾‹ä½œä¸ºå‚æ•°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">defÂ __init__</span>(
Â Â Â Â <span class="hljs-built_in">self</span>,<span class="hljs-attr">Â graph_store</span>:Â Neo4jGraphDB,<span class="hljs-attr">Â llm</span>:Â BaseLLM,<span class="hljs-attr">Â embedder</span>:Â OllamaEmbedder,<span class="hljs-attr">Â is_reorganize</span>:Â <span class="hljs-keyword">bool</span>
):
Â Â Â Â <span class="hljs-built_in">self</span>.llmÂ =Â llm
</code></pre>
<h6 data-id="heading-26">å…³é”®ç»„ä»¶ä¸­çš„ LLM ä½¿ç”¨</h6>
<p>åœ¨ä¼˜åŒ–å›¾ç»“æ„æ—¶ï¼ŒLLM ç”¨äºï¼š</p>
<ul>
<li>ç”Ÿæˆèšç±»æ‘˜è¦ï¼ˆé€šè¿‡ _summarize_cluster æ–¹æ³•ï¼‰</li>
<li>æ¨æ–­èŠ‚ç‚¹é—´çš„å…³ç³»</li>
<li>åˆ›å»ºæ–°çš„æ¨ç†èŠ‚ç‚¹</li>
</ul>
<p>GraphStructureReorganizer åˆ›å»ºäº†ä¸€ä¸ª RelationAndReasoningDetector å®ä¾‹ï¼Œè¯¥æ£€æµ‹å™¨å¤§é‡ä½¿ç”¨ LLMï¼š</p>
<ul>
<li>å…³ç³»æ£€æµ‹ï¼šä½¿ç”¨ LLM åˆ¤æ–­èŠ‚ç‚¹é—´çš„å› æœã€æ¡ä»¶ã€å†²çªç­‰å…³ç³»</li>
<li>äº‹å®æ¨æ–­ï¼šåŸºäºç°æœ‰å…³ç³»æ¨æ–­æ–°çš„äº‹å®èŠ‚ç‚¹</li>
<li>èšåˆæ¦‚å¿µç”Ÿæˆï¼šå°†ç›¸ä¼¼èŠ‚ç‚¹èšåˆæˆæ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µèŠ‚ç‚¹</li>
</ul>
<p>ä¾‹å¦‚åœ¨ _detect_pairwise_causal_condition_relations æ–¹æ³•ä¸­ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">prompt</span>Â =Â PAIRWISE_RELATION_PROMPT.format(
Â Â Â Â <span class="hljs-attr">node1</span>=node.memory,
Â Â Â Â <span class="hljs-attr">node2</span>=candidate.memory
)
<span class="hljs-attr">response_text</span>Â =Â self._call_llm(prompt)Â Â <span class="hljs-comment">#Â è°ƒç”¨Â LLMÂ è¿›è¡Œåˆ¤æ–­</span>
</code></pre>
<p>GraphStructureReorganizer ä¹Ÿåˆ›å»ºäº†ä¸€ä¸ª NodeHandler å®ä¾‹ç”¨äºå¤„ç†èŠ‚ç‚¹å†²çªå’Œå†—ä½™ï¼Œå³å½“æ·»åŠ æ–°èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ LLMï¼š</p>
<ul>
<li>å†²çªæ£€æµ‹ï¼šæ£€æµ‹æ–°èŠ‚ç‚¹ä¸ç°æœ‰èŠ‚ç‚¹çš„å…³ç³»ã€‚ä½¿ç”¨ LLM åˆ¤æ–­ä¸¤ä¸ªè®°å¿†æ˜¯å¦ç›¸äº’çŸ›ç›¾</li>
<li>å†²çªè§£å†³ï¼šè§£å†³æ½œåœ¨çš„å†²çªæˆ–å†—ä½™ã€‚å½“å‘ç°å†²çªæˆ–å†—ä½™æ—¶ï¼Œä½¿ç”¨ LLM èåˆè®°å¿†å†…å®¹</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">result</span>Â =Â self.llm.generate(prompt).strip()Â Â <span class="hljs-comment">#Â æ£€æµ‹å…³ç³»</span>
</code></pre>
<h4 data-id="heading-27">3.4 RelationAndReasoningDetector</h4>
<p>RelationAndReasoningDetector æ˜¯ä¸€ä¸ªç”¨äºæ£€æµ‹å’Œæ¨ç†è®°å¿†èŠ‚ç‚¹ä¹‹é—´å…³ç³»çš„ç»„ä»¶ï¼Œå®ƒåœ¨è®°å¿†å›¾ç»“æ„ä¼˜åŒ–è¿‡ç¨‹ä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚å®ƒçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>èŠ‚ç‚¹å…³ç³»æ£€æµ‹ã€‚RelationAndReasoningDetector è´Ÿè´£æ£€æµ‹è®°å¿†èŠ‚ç‚¹ä¹‹é—´çš„å„ç§è¯­ä¹‰å…³ç³»ï¼Œé€šè¿‡ä½¿ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’ŒåµŒå…¥å‘é‡æ¥åˆ¤æ–­èŠ‚ç‚¹é—´çš„å…³ç³»ç±»å‹ã€‚</li>
<li>æ¨ç†æ–°èŠ‚ç‚¹ç”Ÿæˆã€‚åŸºäºå·²æ£€æµ‹åˆ°çš„å…³ç³»æ¨æ–­æ–°çš„äº‹å®èŠ‚ç‚¹ï¼Œåˆ›å»ºæ¨ç†ç±»å‹çš„èŠ‚ç‚¹ä»¥ä¸°å¯Œè®°å¿†å›¾è°±çš„å†…å®¹</li>
<li>å›¾ç»“æ„ä¼˜åŒ–æ”¯æŒã€‚ä¸º GraphStructureReorganizer æä¾›å…³ç³»å’Œæ¨ç†ä¿¡æ¯ï¼Œå¸®åŠ©æ„å»ºæ›´å®Œæ•´çš„è¯­ä¹‰ç½‘ç»œç»“æ„ã€‚</li>
</ul>
<h5 data-id="heading-28">3.4.1 ä¸»è¦æ–¹æ³•</h5>
<p>process_node æ–¹æ³•ã€‚ç»Ÿä¸€å¤„ç†èŠ‚ç‚¹çš„å…³ç³»æ£€æµ‹å’Œæ¨ç†æµç¨‹ï¼Œè°ƒç”¨å…¶ä»–ä¸“é—¨æ–¹æ³•å®Œæˆå…·ä½“ä»»åŠ¡ã€‚</p>
<ul>
<li>å…³ç³»æ£€æµ‹ã€‚æ£€æµ‹æˆå¯¹èŠ‚ç‚¹ä¹‹é—´çš„å› æœã€æ¡ä»¶ã€å†²çªï¼Œç›¸å…³ç­‰å…³ç³»ï¼Œä½¿ç”¨ _detect_pairwise_causal_condition_relations æ–¹æ³•å®ç°ã€‚</li>
<li>æ¨ç†èŠ‚ç‚¹ç”Ÿæˆã€‚åŸºäºå› æœ/æ¡ä»¶å…³ç³»æ¨æ–­æ–°çš„äº‹å®èŠ‚ç‚¹ï¼Œè°ƒç”¨ _infer_fact_nodes_from_relations æ–¹æ³•ç”Ÿæˆèšåˆæ¦‚å¿µèŠ‚ç‚¹ï¼ˆå°†ç›¸ä¼¼èŠ‚ç‚¹èšåˆæˆæ›´é«˜å±‚æ¬¡çš„æ¦‚å¿µï¼‰</li>
<li>æ—¶åºå…³è”æ£€æµ‹ã€‚æ£€æµ‹èŠ‚ç‚¹é—´çš„æ—¶é—´é¡ºåºå…³ç³»ï¼Œé€šè¿‡ _detect_sequence_links æ–¹æ³•å®ç°ã€‚</li>
<li>èšåˆèŠ‚ç‚¹æ£€æµ‹ã€‚è¯†åˆ«å¯ä»¥è¢«èšåˆçš„æ¦‚å¿µç»„ï¼Œä½¿ç”¨ _detect_aggregate_node_for_group æ–¹æ³•</li>
</ul>
<p>Relation Detection Methodsã€‚ä¸“é—¨ç”¨äºæ£€æµ‹ä¸åŒç±»å‹èŠ‚ç‚¹å…³ç³»çš„æ–¹æ³•é›†åˆ</p>
<ul>
<li>_detect_pairwise_causal_condition_relationsæ£€æµ‹ä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„å› æœå’Œæ¡ä»¶å…³ç³»ï¼Œä½¿ç”¨ LLM åˆ¤æ–­å…³ç³»ç±»å‹ï¼šCAUSEã€CONDITIONã€RELATEã€CONFLICT æˆ– NONEã€‚</li>
<li>_detect_sequence_linksæ ¹æ®æ—¶é—´æˆ³æ£€æµ‹èŠ‚ç‚¹é—´çš„æ—¶åºå…³ç³»ï¼Œåˆ›å»º FOLLOWS ç±»å‹çš„è¾¹è¿æ¥ç›¸å…³èŠ‚ç‚¹ã€‚</li>
<li>_detect_aggregate_node_for_groupè¯†åˆ«å…·æœ‰ç›¸ä¼¼æ ‡ç­¾çš„èŠ‚ç‚¹ç»„å¹¶ç”Ÿæˆèšåˆæ¦‚å¿µèŠ‚ç‚¹ï¼Œä½¿ç”¨ LLM åˆ¤æ–­æ˜¯å¦éœ€è¦åˆ›å»ºèšåˆèŠ‚ç‚¹ã€‚</li>
</ul>
<p>Inference Methodsã€‚ç”¨äºä»ç°æœ‰å…³ç³»ä¸­æ¨æ–­æ–°èŠ‚ç‚¹çš„æ–¹æ³•</p>
<ul>
<li>_infer_fact_nodes_from_relationsï¼šä»å› æœå’Œæ¡ä»¶å…³ç³»ä¸­æ¨æ–­æ–°çš„äº‹å®èŠ‚ç‚¹ï¼Œç”Ÿæˆå¸¦æœ‰æ¨ç†æ ‡è®°çš„æ–°èŠ‚ç‚¹å¹¶è¿æ¥åˆ°æºèŠ‚ç‚¹ã€‚</li>
</ul>
<h5 data-id="heading-29">3.4.2 å·¥ä½œæµç¨‹</h5>
<ul>
<li>åˆå§‹åŒ–é˜¶æ®µã€‚æ¥æ”¶ graph_storeã€llm å’Œ embedder ä½œä¸ºä¾èµ–ç»„ä»¶ï¼Œå‡†å¤‡å¤„ç†å…³ç³»æ£€æµ‹å’Œæ¨ç†æ‰€éœ€çš„åŸºç¡€å·¥å…·</li>
<li>å¤„ç†é˜¶æ®µã€‚é€šè¿‡ process_node æ–¹æ³•å¤„ç†å•ä¸ªèŠ‚ç‚¹ï¼ŒæŸ¥æ‰¾é‚»è¿‘èŠ‚ç‚¹å¹¶è¿›è¡Œå…³ç³»åˆ†æï¼Œç”Ÿæˆæ¨ç†èŠ‚ç‚¹å’Œå…³ç³»è¿æ¥</li>
<li>ç»“æœè¾“å‡ºã€‚è¿”å›åŒ…å«æ–°å…³ç³»ã€æ¨ç†èŠ‚ç‚¹ã€åºåˆ—é“¾æ¥å’ŒèšåˆèŠ‚ç‚¹çš„ç»“æœé›†ï¼Œä¸ºå›¾ç»“æ„é‡ç»„æä¾›æ•°æ®æ”¯æŒ</li>
</ul>
<p>æ•°æ®æµå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-attribute">Background</span>Â TaskÂ â†’Â GraphStructureReorganizer
Â â†“
RelationAndReasoningDetector<span class="hljs-selector-class">.process_node</span>()
Â â†“
Neo4jGraphDBÂ <span class="hljs-selector-attr">[GetÂ Neighbors/Nodes/Edges]</span>
Â Â â†“
RelationAndReasoningDetectorÂ <span class="hljs-selector-attr">[LLMÂ Analysis]</span>
Â â†“
Neo4jGraphDBÂ <span class="hljs-selector-attr">[AddÂ InferredÂ Nodes/Relations]</span>
</code></pre>
<h5 data-id="heading-30">3.4.3 promt</h5>
<p>RelationAndReasoningDetector å¼•å…¥äº†ä»¥ä¸‹ promptã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">from</span>Â memos.<span class="hljs-property">templates</span>.<span class="hljs-property">tree_reorganize_prompts</span>Â <span class="hljs-keyword">import</span>Â (
Â Â Â Â <span class="hljs-variable constant_">AGGREGATE_PROMPT</span>,
Â Â Â Â <span class="hljs-variable constant_">INFER_FACT_PROMPT</span>,
Â Â Â Â <span class="hljs-variable constant_">PAIRWISE_RELATION_PROMPT</span>,
)
</code></pre>
<p>ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">PAIRWISE_RELATION_PROMPTÂ =Â <span class="hljs-string">"""
YouÂ areÂ aÂ reasoningÂ assistant.

GivenÂ twoÂ memoryÂ units:
-Â NodeÂ 1:Â "</span>{node1}<span class="hljs-string">"
-Â NodeÂ 2:Â "</span>{node2}<span class="hljs-string">"

YourÂ task:
-Â DetermineÂ theirÂ relationshipÂ ONLYÂ ifÂ itÂ revealsÂ NEWÂ usableÂ reasoningÂ orÂ retrievalÂ knowledgeÂ thatÂ isÂ NOTÂ alreadyÂ explicitÂ inÂ eitherÂ unit.
-Â FocusÂ onÂ whetherÂ combiningÂ themÂ addsÂ newÂ temporal,Â causal,Â conditional,Â orÂ conflictÂ information.

ValidÂ options:
-Â CAUSE:Â OneÂ clearlyÂ leadsÂ toÂ theÂ other.
-Â CONDITION:Â OneÂ happensÂ onlyÂ ifÂ theÂ otherÂ conditionÂ holds.
-Â RELATE:Â TheyÂ areÂ semanticallyÂ relatedÂ byÂ sharedÂ people,Â time,Â place,Â orÂ event,Â butÂ neitherÂ causesÂ theÂ other.
-Â CONFLICT:Â TheyÂ logicallyÂ contradictÂ eachÂ other.
-Â NONE:Â NoÂ clearÂ usefulÂ connection.

Example:
-Â NodeÂ 1:Â "</span>TheÂ marketingÂ campaignÂ endedÂ <span class="hljs-keyword">in</span>Â June.<span class="hljs-string">"
-Â NodeÂ 2:Â "</span>ProductÂ salesÂ droppedÂ <span class="hljs-keyword">in</span>Â July.<span class="hljs-string">"
Answer:Â CAUSE

AnotherÂ Example:
-Â NodeÂ 1:Â "</span>TheÂ conferenceÂ wasÂ postponedÂ <span class="hljs-keyword">to</span>Â AugustÂ dueÂ <span class="hljs-keyword">to</span>Â theÂ venueÂ beingÂ unavailable.<span class="hljs-string">"
-Â NodeÂ 2:Â "</span>TheÂ venueÂ wasÂ bookedÂ <span class="hljs-keyword">for</span>Â aÂ weddingÂ <span class="hljs-keyword">in</span>Â August.<span class="hljs-string">"
Answer:Â CONFLICT

AlwaysÂ respondÂ withÂ ONEÂ word,Â noÂ matterÂ whatÂ languageÂ isÂ forÂ theÂ inputÂ nodes:Â [CAUSEÂ |Â CONDITIONÂ |Â RELATEÂ |Â CONFLICTÂ |Â NONE]
"""</span>

INFER_FACT_PROMPTÂ =Â <span class="hljs-string">"""
YouÂ areÂ anÂ inferenceÂ expert.

SourceÂ Memory:Â "</span>{source}<span class="hljs-string">"
TargetÂ Memory:Â "</span>{target}<span class="hljs-string">"

TheyÂ areÂ connectedÂ byÂ aÂ {relation_type}Â relation.
DeriveÂ ONEÂ newÂ factualÂ statementÂ thatÂ clearlyÂ combinesÂ themÂ inÂ aÂ wayÂ thatÂ isÂ NOTÂ aÂ trivialÂ restatement.

Requirements:
-Â IncludeÂ relevantÂ time,Â place,Â people,Â andÂ eventÂ detailsÂ ifÂ available.
-Â IfÂ theÂ inferenceÂ isÂ aÂ logicalÂ guess,Â explicitlyÂ useÂ phrasesÂ likeÂ "</span>ItÂ canÂ beÂ inferredÂ that...<span class="hljs-string">".

Example:
Source:Â "</span>JohnÂ missedÂ theÂ teamÂ meetingÂ <span class="hljs-keyword">on</span>Â Monday.<span class="hljs-string">"
Target:Â "</span>ImportantÂ projectÂ deadlinesÂ wereÂ discussedÂ <span class="hljs-keyword">in</span>Â thatÂ meeting.<span class="hljs-string">"
Relation:Â CAUSE
Inference:Â "</span>ItÂ canÂ beÂ inferredÂ thatÂ JohnÂ mayÂ <span class="hljs-built_in">not</span>Â knowÂ theÂ <span class="hljs-built_in">new</span>Â projectÂ deadlines.<span class="hljs-string">"

IfÂ thereÂ isÂ NOÂ newÂ usefulÂ factÂ thatÂ combinesÂ them,Â replyÂ exactly:Â "</span>None<span class="hljs-string">"
"""</span>

AGGREGATE_PROMPTÂ =Â <span class="hljs-string">"""
YouÂ areÂ aÂ conceptÂ summarizationÂ assistant.

BelowÂ isÂ aÂ listÂ ofÂ memoryÂ items:
{joined}

YourÂ task:
-Â IdentifyÂ ifÂ theyÂ canÂ beÂ meaningfullyÂ groupedÂ underÂ aÂ new,Â higher-levelÂ conceptÂ thatÂ clarifiesÂ theirÂ sharedÂ time,Â place,Â people,Â orÂ eventÂ context.
-Â DoÂ NOTÂ aggregateÂ ifÂ theÂ overlapÂ isÂ trivialÂ orÂ obviousÂ fromÂ eachÂ unitÂ alone.
-Â IfÂ theÂ summaryÂ involvesÂ anyÂ plausibleÂ interpretation,Â explicitlyÂ noteÂ itÂ (e.g.,Â "</span>ThisÂ suggests...<span class="hljs-string">").

Example:
InputÂ Memories:
-Â "</span>MaryÂ organizedÂ theÂ <span class="hljs-number">2023</span>Â sustainabilityÂ summitÂ <span class="hljs-keyword">in</span>Â Berlin.<span class="hljs-string">"
-Â "</span>MaryÂ presentedÂ aÂ keynoteÂ <span class="hljs-keyword">on</span>Â renewableÂ energyÂ atÂ theÂ sameÂ summit.<span class="hljs-string">"

LanguageÂ rules:
-Â TheÂ `key`,Â `value`,Â `tags`,Â `background`Â fieldsÂ mustÂ matchÂ theÂ languageÂ ofÂ theÂ input.

GoodÂ Aggregate:
{
Â Â "</span><span class="hljs-keyword">key</span><span class="hljs-string">":Â "</span>Mary<span class="hljs-comment">'sÂ SustainabilityÂ SummitÂ Role",</span>
Â Â <span class="hljs-string">"value"</span>:Â <span class="hljs-string">"MaryÂ organizedÂ andÂ spokeÂ atÂ theÂ 2023Â sustainabilityÂ summitÂ inÂ Berlin,Â highlightingÂ renewableÂ energyÂ initiatives."</span>,
Â Â <span class="hljs-string">"tags"</span>:Â [<span class="hljs-string">"Mary"</span>,Â <span class="hljs-string">"summit"</span>,Â <span class="hljs-string">"Berlin"</span>,Â <span class="hljs-string">"2023"</span>],
Â Â <span class="hljs-string">"background"</span>:Â <span class="hljs-string">"CombinedÂ fromÂ multipleÂ memoriesÂ aboutÂ Mary'sÂ activitiesÂ atÂ theÂ summit."</span>
}

<span class="hljs-keyword">If</span>Â youÂ findÂ NOÂ usefulÂ higher-levelÂ concept,Â replyÂ exactly:Â <span class="hljs-string">"None"</span>.
<span class="hljs-string">"""
</span></code></pre>
<p>è¿™ä¸‰ç»„æç¤ºè¯æ˜¯é¢å‘ MemOS è®°å¿†ç³»ç»Ÿä¸­<strong>å…³ç³»æ¨ç†ã€äº‹å®æ¨å¯¼ã€æ¦‚å¿µèšåˆ</strong>çš„ä¸“ä¸šåŒ– prompt è®¾è®¡,ä¸‰ä¸ªpromptçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p><code>PAIRWISE_RELATION_PROMPT</code>å°† AI å®šä¹‰ä¸º<strong>reasoning assistantï¼ˆæ¨ç†åŠ©æ‰‹ï¼‰</strong> ï¼Œèšç„¦ä¸¤ä¸ªè®°å¿†å•å…ƒçš„å…³ç³»åˆ¤å®šï¼ŒåŒ¹é… â€œé€»è¾‘å…³ç³»åˆ†æâ€ çš„ä»»åŠ¡å±æ€§ï¼›</p>
<ul>
<li>ä»…è¦æ±‚åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹çš„å…³ç³»ç±»å‹ï¼Œä¸”æ˜ç¡®é™å®š â€œä»…å½“å…³ç³»èƒ½æ­ç¤ºæ–°çŸ¥è¯†æ—¶æ‰åˆ¤å®šï¼Œå¦åˆ™ä¸º NONEâ€ï¼›</li>
<li>å…³ç³»åˆ¤å®šä¸­ï¼Œå°†æœ‰æ•ˆå…³ç³»æ‹†åˆ†ä¸º <strong>CAUSEï¼ˆå› æœï¼‰ã€CONDITIONï¼ˆæ¡ä»¶ï¼‰ã€RELATEï¼ˆå…³è”ï¼‰ã€CONFLICTï¼ˆå†²çªï¼‰ã€NONEï¼ˆæ— ï¼‰</strong> äº”ç±»ï¼Œå¹¶å¯¹æ¯ç±»çš„åˆ¤å®šä¾æ®ï¼ˆå¦‚å› æœæ˜¯ â€œä¸€æ–¹æ˜ç¡®å¯¼è‡´å¦ä¸€æ–¹â€ï¼‰åšäº†æ¸…æ™°è¯´æ˜ï¼›</li>
<li>å…³ç³»åˆ¤å®šå¼ºåˆ¶è¦æ±‚<strong>ä»…è¾“å‡ºä¸€ä¸ªå•è¯</strong>ï¼Œæ— è®ºè¾“å…¥è¯­è¨€ä¸ºä½•ï¼Œé¿å… AI äº§ç”Ÿå†—ä½™è§£é‡Šï¼›</li>
<li>å…³ç³»åˆ¤å®šæ˜¯<strong>è®°å¿†å…³è”çš„åŸºç¡€ç¯èŠ‚</strong>ï¼Œä¸ºä¸¤ä¸ªç‹¬ç«‹è®°å¿†å•å…ƒå»ºç«‹è¯­ä¹‰è¿æ¥ï¼Œè¦æ±‚ â€œæ­ç¤ºæ–°çš„æ¨ç† / æ£€ç´¢çŸ¥è¯†â€ã€‚</li>
</ul>
</li>
<li>
<p><code>INFER_FACT_PROMPT</code>è®¾å®šä¸º<strong>inference expertï¼ˆæ¨ç†ä¸“å®¶ï¼‰</strong> ï¼Œä¾§é‡åŸºäºå·²çŸ¥å…³ç³»æ¨å¯¼æ–°äº‹å®ï¼Œçªå‡º â€œæ·±åº¦è¯­ä¹‰æŒ–æ˜â€ çš„ä¸“ä¸šæ€§ï¼›</p>
<ul>
<li>ä»…è¦æ±‚åŸºäºå…³ç³»æ¨å¯¼<strong>ä¸€ä¸ª</strong>æ–°äº‹å®ï¼Œç¦æ­¢ç®€å•å¤è¿°åŸè®°å¿†å†…å®¹ï¼›</li>
<li>äº‹å®æ¨å¯¼æ˜¯<strong>è®°å¿†æŒ–æ˜çš„æ·±åŒ–ç¯èŠ‚</strong>ï¼ŒåŸºäºå…³è”å…³ç³»ç”Ÿæˆæ–°çš„çŸ¥è¯†èŠ‚ç‚¹ï¼Œè¦æ±‚ â€œç”Ÿæˆéå¹³å‡¡çš„æ–°äº‹å®â€ã€‚</li>
<li>äº‹å®æ¨å¯¼è¦æ±‚ â€œç»“åˆæ—¶é—´ã€åœ°ç‚¹ã€äººç‰©ã€äº‹ä»¶ç»†èŠ‚â€ï¼Œè‹¥ä¸ºæ¨æµ‹éœ€ä½¿ç”¨ â€œIt can be inferred that...â€ ç­‰å›ºå®šè¡¨è¿°ï¼Œç¡®ä¿æ¨å¯¼ç»“æœçš„å¯éªŒè¯æ€§ã€‚</li>
<li>äº‹å®æ¨å¯¼è‹¥æ— å¯æ¨å¯¼å†…å®¹ï¼Œéœ€<strong>ä¸¥æ ¼è¿”å› â€œNoneâ€</strong> ï¼Œèšåˆ prompt åŒç†ï¼Œç»Ÿä¸€äº†æ— æ•ˆåœºæ™¯çš„è¾“å‡ºæ ¼å¼ã€‚</li>
</ul>
</li>
<li>
<p><code>AGGREGATE_PROMPT</code>å®šä½ä¸º<strong>concept summarization assistantï¼ˆæ¦‚å¿µæ€»ç»“åŠ©æ‰‹ï¼‰</strong> ï¼Œé’ˆå¯¹å¤šè®°å¿†å•å…ƒçš„é«˜é˜¶èšåˆï¼Œè´´åˆ â€œæŠ½è±¡å½’çº³â€ çš„æ ¸å¿ƒéœ€æ±‚ã€‚</p>
<ul>
<li>æ¦‚å¿µèšåˆæ˜¯<strong>è®°å¿†ç»“æ„åŒ–çš„é«˜é˜¶ç¯èŠ‚</strong>ï¼Œå°†é›¶æ•£è®°å¿†å½’çº³ä¸ºæŠ½è±¡æ¦‚å¿µï¼Œè¦æ±‚ â€œæç‚¼é«˜é˜¶å…±äº«æ¦‚å¿µâ€ï¼Œé€‚é… MemOS ä¸­ â€œèŠ‚ç‚¹ - å…³ç³» - æ¦‚å¿µâ€ çš„å±‚çº§åŒ–è®°å¿†ç®¡ç†æ¶æ„ã€‚</li>
<li>ä»…è¦æ±‚è¯†åˆ«å¤šè®°å¿†å•å…ƒçš„<strong>é«˜é˜¶å…±äº«æ¦‚å¿µ</strong>ï¼Œè‹¥é‡å ä¸ºå¸¸è¯†åˆ™ç›´æ¥è¿”å› â€œNoneâ€ã€‚</li>
</ul>
</li>
</ul>
<h4 data-id="heading-31">3.5 NodeHandler</h4>
<p>NodeHandler æ˜¯ Memos ç³»ç»Ÿä¸­è´Ÿè´£å¤„ç†è®°å¿†èŠ‚ç‚¹å†²çªæ£€æµ‹ä¸è§£å†³çš„æ ¸å¿ƒç»„ä»¶ã€‚</p>
<h5 data-id="heading-32">3.5.1 ä¸»è¦åŠŸèƒ½</h5>
<p>NodeHandler çš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p>å†²çªæ£€æµ‹ï¼ˆConflict Detectionï¼‰</p>
<ul>
<li>ä½¿ç”¨åµŒå…¥å‘é‡ç›¸ä¼¼åº¦æœç´¢æ½œåœ¨çš„å†²çªè®°å¿†èŠ‚ç‚¹</li>
<li>åˆ©ç”¨ LLM åˆ¤æ–­ä¸¤ä¸ªè®°å¿†èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ï¼ˆçŸ›ç›¾ã€å†—ä½™æˆ–ç‹¬ç«‹ï¼‰</li>
<li>åŸºäºé¢„è®¾é˜ˆå€¼ï¼ˆEMBEDDING_THRESHOLDï¼‰è¿›è¡Œåˆæ­¥ç­›é€‰</li>
</ul>
</li>
<li>
<p>å†²çªè§£å†³ï¼ˆConflict Resolutionï¼‰</p>
<ul>
<li>å¯¹æ£€æµ‹åˆ°çš„å†²çªè¿›è¡Œèåˆå¤„ç†</li>
<li>ä½¿ç”¨ LLM ç”Ÿæˆèåˆåçš„è®°å¿†å†…å®¹</li>
<li>å¤„ç†å…ƒæ•°æ®åˆå¹¶å’Œå›¾ç»“æ„æ›´æ–°</li>
</ul>
</li>
<li>
<p>å›¾ç»“æ„ç»´æŠ¤</p>
<ul>
<li>æ›´æ–°åˆå¹¶åçš„è®°å¿†èŠ‚ç‚¹åˆ°å›¾æ•°æ®åº“</li>
<li>ç»´æŠ¤åŸæœ‰èŠ‚ç‚¹é—´çš„å…³ç³»è¿æ¥</li>
<li>å°†æ—§èŠ‚ç‚¹æ ‡è®°ä¸ºå·²å½’æ¡£çŠ¶æ€</li>
</ul>
</li>
</ul>
<h5 data-id="heading-33">3.5.2 è°ƒç”¨å…³ç³»ä¸ä¾èµ–å…³ç³»</h5>
<p><strong>ç›´æ¥ä¾èµ–ç»„ä»¶å¦‚ä¸‹</strong>ï¼š</p>
<ul>
<li>
<p>GraphStoreï¼ˆNeo4jGraphDBï¼‰ï¼š</p>
<ul>
<li>æœç´¢ç›¸ä¼¼èŠ‚ç‚¹ï¼šsearch_by_embedding</li>
<li>è·å–èŠ‚ç‚¹ä¿¡æ¯ï¼šget_nodes</li>
<li>æ›´æ–°å›¾ç»“æ„ï¼šadd_node, delete_node, add_edge, update_node, edge_exists</li>
</ul>
</li>
<li>
<p>LLMï¼ˆBaseLLMï¼‰</p>
<ul>
<li>åˆ¤æ–­èŠ‚ç‚¹å…³ç³»ï¼šMEMORY_RELATION_DETECTOR_PROMPT</li>
<li>ç”¨äºè§£å†³å†²çªï¼šMEMORY_RELATION_RESOLVER_PROMPT</li>
</ul>
</li>
<li>
<p>Embedderï¼ˆBaseEmbedderï¼‰</p>
<ul>
<li>ç”¨äºç”Ÿæˆæ–°è®°å¿†çš„åµŒå…¥å‘é‡</li>
</ul>
</li>
</ul>
<p><strong>è¢«å…¶ä»–ç»„ä»¶è°ƒç”¨</strong></p>
<ul>
<li>GraphStructureReorganizerï¼šåœ¨ handle_add æ–¹æ³•ä¸­è°ƒç”¨ NodeHandler.detect å’Œ NodeHandler.resolveï¼Œç”¨äºå¤„ç†æ–°å¢èŠ‚ç‚¹æ—¶çš„å†²çªæ£€æµ‹ä¸è§£å†³ã€‚</li>
</ul>

<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#Â åœ¨Â GraphStructureReorganizer.handle_addÂ ä¸­çš„è°ƒç”¨ç¤ºä¾‹</span>
Â Â Â Â defÂ handle_add(self,Â message:Â QueueMessage):
Â Â Â Â Â Â Â Â <span class="hljs-attr">added_node</span>Â =Â message.after_node[<span class="hljs-number">0</span>]
Â Â Â Â Â Â Â Â <span class="hljs-attr">detected_relationships</span>Â =Â self.resolver.detect(
Â Â Â Â Â Â Â Â Â Â Â Â added_node,Â <span class="hljs-attr">scope</span>=added_node.metadata.memory_type
Â Â Â Â Â Â Â Â )
Â Â Â Â Â Â Â Â ifÂ detected_relationships:
Â Â Â Â Â Â Â Â Â Â Â Â forÂ added_node,Â existing_node,Â relationÂ inÂ detected_relationships:
Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â self.resolver.resolve(added_node,Â existing_node,Â relation)

Â Â Â Â Â Â Â Â <span class="hljs-attr">self._reorganize_needed</span>Â =Â <span class="hljs-literal">True</span>
</code></pre>
<p><strong>æ•°æ®æ¨¡å‹ä¾èµ–</strong></p>
<ul>
<li>TextualMemoryItemï¼šå¤„ç†çš„ä¸»è¦å¯¹è±¡ç±»å‹</li>
<li>TreeNodeTextualMemoryMetadataï¼šèŠ‚ç‚¹å…ƒæ•°æ®ç»“æ„</li>
<li>Templatesï¼šä½¿ç”¨ MEMORY_RELATION_DETECTOR_PROMPT å’Œ MEMORY_RELATION_RESOLVER_PROMPT æ¨¡æ¿</li>
</ul>
<h5 data-id="heading-34">3.5.3 æµç¨‹å›¾</h5>
<p>NodeHandler çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">UserÂ <span class="hljs-selector-tag">Input</span>Â â†’Â MemoryManager<span class="hljs-selector-class">.add</span>()
Â â†“
NodeHandler<span class="hljs-selector-class">.detect</span>()Â â†’Â <span class="hljs-selector-attr">[EmbeddingÂ Search]</span>
Â â†“
NodeHandler<span class="hljs-selector-class">.resolve</span>()Â â†’Â <span class="hljs-selector-attr">[LLMÂ ConflictÂ Resolution]</span>
Â â†“
Neo4jGraphDBÂ <span class="hljs-selector-attr">[Add/Update/DeleteÂ NodesÂ &amp;Â Edges]</span>
</code></pre>
<p>å…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>æ£€æµ‹é˜¶æ®µï¼šdetect() â†’ search_by_embedding() â†’ get_nodes() â†’ LLM åˆ¤æ–­å…³ç³» â†’ è¿”å›å†²çªåˆ—è¡¨</li>
<li>è§£å†³é˜¶æ®µï¼šresolve() â†’ LLM ç”Ÿæˆèåˆè®°å¿† â†’ è§£æå“åº” â†’ _merge_metadata() â†’ _resolve_in_graph() â†’ æ›´æ–°å›¾æ•°æ®åº“ç»“æ„</li>
<li>ç¡¬æ›´æ–°å¤„ç†ï¼šå½“æ— æ³•é€šè¿‡ LLM è§£å†³å†²çªæ—¶ï¼Œé‡‡ç”¨æ—¶é—´æˆ³æ¯”è¾ƒæ–¹å¼è¿›è¡Œç¡¬æ›´æ–°ï¼š_hard_update() â†’ æ¯”è¾ƒ updated_at â†’ åˆ é™¤è¾ƒæ—§èŠ‚ç‚¹</li>
</ul>
<p>æ€»çš„æ¥è¯´ï¼ŒNodeHandler æ˜¯ Memos è®°å¿†ç®¡ç†ç³»ç»Ÿä¸­ä¿è¯è®°å¿†ä¸€è‡´æ€§å’Œé¿å…å†²çªçš„å…³é”®ç»„ä»¶ï¼Œå®ƒåè°ƒäº†å›¾æ•°æ®åº“ã€å¤§è¯­è¨€æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹æ¥å®Œæˆè®°å¿†èŠ‚ç‚¹çš„æ™ºèƒ½åŒ–ç®¡ç†ã€‚</p>
<h4 data-id="heading-35">3.6 NodeHandler vs RelationAndReasoningDetector</h4>
<p>ä¸ºä½•è¦æ‹†åˆ†æˆä¸¤ä¸ªç±»ï¼Œè€Œä¸åˆäºŒä¸ºä¸€ï¼Ÿ</p>
<h5 data-id="heading-36">3.6.1 è®¾è®¡æ€è·¯</h5>
<p><code>RelationAndReasoningDetector</code>ï¼ˆå…³ç³»ä¸æ¨ç†æ£€æµ‹å™¨ï¼‰å’Œ <code>NodeHandler</code>ï¼ˆèŠ‚ç‚¹å¤„ç†å™¨ï¼‰çš„æ‹†åˆ†è®¾è®¡ï¼Œæœ¬è´¨æ˜¯<strong>éµå¾ª â€œå•ä¸€èŒè´£åŸåˆ™â€ ä¸ â€œå…³æ³¨ç‚¹åˆ†ç¦»â€</strong> çš„æ¶æ„è®¾è®¡æ€æƒ³ â€”â€” äºŒè€…è™½å…±åŒæœåŠ¡äº â€œè®°å¿†çš„ç»“æ„åŒ–ç®¡ç†ä¸æ™ºèƒ½æ¨ç†â€ï¼Œä½†æ ¸å¿ƒèŒè´£ã€è¾“å…¥è¾“å‡ºã€å¤ç”¨åœºæ™¯å®Œå…¨ä¸åŒï¼Œåˆå¹¶ä¼šå¯¼è‡´ä»£ç è€¦åˆåº¦é£™å‡ã€å¯ç»´æŠ¤æ€§ä¸‹é™ã€åŠŸèƒ½æ‰©å±•å—é™ã€‚</p>
<p>MemOS çš„æ ¸å¿ƒæ¶æ„æ˜¯ â€œåˆ†å±‚è®¾è®¡â€ï¼ˆæ„ŸçŸ¥å±‚â†’æ¨ç†å±‚â†’å­˜å‚¨å±‚ï¼‰ï¼š</p>
<ul>
<li>æ„ŸçŸ¥å±‚ï¼šå¤„ç†è¾“å…¥æ•°æ®ï¼ˆå¦‚æ–‡æœ¬è§£æï¼‰ï¼›</li>
<li>æ¨ç†å±‚ï¼šè´Ÿè´£æ™ºèƒ½åˆ†æï¼ˆå¦‚å…³ç³»è¯†åˆ«ã€æ¨ç†ï¼‰ï¼›</li>
<li>å­˜å‚¨å±‚ï¼šè´Ÿè´£æ•°æ®æŒä¹…åŒ–ï¼ˆå¦‚èŠ‚ç‚¹ã€å…³ç³»å­˜å‚¨ï¼‰ã€‚</li>
</ul>
<p><code>RelationAndReasoningDetector</code> å±äº â€œæ¨ç†å±‚â€ï¼Œå±äºä¸»åŠ¨å‘èµ·æ¨ç†é˜¶æ®µï¼Œåœ¨æ·»åŠ æ–°èŠ‚ç‚¹åä¸»åŠ¨å¯»æ‰¾å…³è”ï¼Œ<code>NodeHandler</code> å±äº â€œå­˜å‚¨å±‚â€ï¼Œå±äºè¢«åŠ¨å“åº”é˜¶æ®µï¼Œåœ¨å‘ç°å†²çªæ—¶è¿›è¡Œå¤„ç†ã€‚</p>
<p>MemOS ä¸­ä¸¤ä¸ªç±»çš„æ‹†åˆ†ï¼Œæœ¬è´¨æ˜¯ â€œå°†â€˜æ™ºèƒ½å†³ç­–ï¼ˆæ¨ç†ï¼‰â€™ä¸â€˜æ•°æ®æ‰§è¡Œï¼ˆå­˜å‚¨ï¼‰â€™åˆ†ç¦»â€â€”â€” å‰è€…è´Ÿè´£ â€œæƒ³æ¸…æ¥šè¦åšä»€ä¹ˆâ€ï¼ˆä»æ–‡æœ¬ä¸­è¯†åˆ«èŠ‚ç‚¹å’Œå…³ç³»ï¼‰ï¼Œåè€…è´Ÿè´£ â€œæŠŠäº‹åšå¥½â€ï¼ˆå°†è¯†åˆ«å‡ºçš„èŠ‚ç‚¹å’Œå…³ç³»è½åœ°åˆ°å­˜å‚¨ï¼‰ã€‚è¿™ç§è®¾è®¡ä¸ä»…ç¬¦åˆè½¯ä»¶å·¥ç¨‹çš„æ ¸å¿ƒåŸåˆ™ï¼Œæ›´é€‚é… MemOS ä½œä¸º â€œAgent è®°å¿†ç³»ç»Ÿâ€ çš„æ ¸å¿ƒéœ€æ±‚ï¼šæ—¢è¦æ”¯æŒçµæ´»çš„æ¨ç†é€»è¾‘è¿­ä»£ï¼Œåˆè¦ä¿è¯å­˜å‚¨æ“ä½œçš„ç¨³å®šå¯é ã€‚åˆå¹¶äºŒè€…ç›¸å½“äºæ‰“ç ´äº†åˆ†å±‚æ¶æ„ï¼Œå¯¼è‡´æ¶æ„è¾¹ç•Œæ¨¡ç³Šï¼Œåç»­æ— æ³•å¯¹æŸä¸€å±‚è¿›è¡Œç‹¬ç«‹çš„æ€§èƒ½ä¼˜åŒ–æˆ–åŠŸèƒ½æ‰©å±•ï¼ˆå¦‚ç»™æ¨ç†å±‚åŠ ç¼“å­˜ã€ç»™å­˜å‚¨å±‚åŠ å®¹ç¾ï¼‰ã€‚</p>
<h5 data-id="heading-37">3.6.2 å®šä½è¾¹ç•Œ</h5>
<p>è¦ç†è§£ â€œä¸ºä½•ä¸èƒ½åˆå¹¶â€ï¼Œé¦–å…ˆè¦å˜æ¸…äºŒè€…çš„å®šä½è¾¹ç•Œï¼Œè¿™æ˜¯æ‹†åˆ†çš„æ ¹æœ¬ä¾æ®ï¼š</p>



































<table><thead><tr><th>ç»´åº¦</th><th>RelationAndReasoningDetectorï¼ˆå…³ç³»ä¸æ¨ç†æ£€æµ‹å™¨ï¼‰</th><th>NodeHandlerï¼ˆèŠ‚ç‚¹å¤„ç†å™¨ï¼‰</th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒèŒè´£</strong></td><td>è´Ÿè´£ â€œè¯­ä¹‰å±‚é¢çš„æ™ºèƒ½åˆ†æâ€ï¼šä»éç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚æ–‡æœ¬ã€å¯¹è¯ï¼‰ä¸­è¯†åˆ«å®ä½“å…³ç³»ã€è§¦å‘æ¨ç†é€»è¾‘ã€æŒ–æ˜éšå«ä¿¡æ¯ã€‚</td><td>è´Ÿè´£ â€œæ•°æ®å±‚é¢çš„ç»“æ„åŒ–æ“ä½œâ€ï¼šç®¡ç†çŸ¥è¯†å›¾è°±çš„èŠ‚ç‚¹ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ï¼‰ï¼Œå¤„ç†èŠ‚ç‚¹çš„å­˜å‚¨ä¸æ ¼å¼é€‚é…ã€‚</td></tr><tr><td><strong>è¾“å…¥ / è¾“å‡º</strong></td><td>è¾“å…¥ï¼šéç»“æ„åŒ–æ•°æ®ï¼ˆæ–‡æœ¬ç‰‡æ®µã€ç”¨æˆ·æŒ‡ä»¤ï¼‰ã€ç°æœ‰çŸ¥è¯†å›¾è°±å…ƒæ•°æ®ï¼›è¾“å‡ºï¼šå…³ç³»ä¸‰å…ƒç»„ï¼ˆå®ä½“ A - å…³ç³» - å®ä½“ Bï¼‰ã€æ¨ç†ç»“è®ºã€å¾…å¤„ç†çš„èŠ‚ç‚¹å…³è”éœ€æ±‚ã€‚</td><td>è¾“å…¥ï¼šç»“æ„åŒ–æ•°æ®ï¼ˆèŠ‚ç‚¹ IDã€å±æ€§é”®å€¼å¯¹ã€å…³è”å…³ç³»æ ‡è¯†ï¼‰ï¼›è¾“å‡ºï¼šèŠ‚ç‚¹æ“ä½œç»“æœï¼ˆåˆ›å»ºæˆåŠŸ / æ›´æ–°åçš„èŠ‚ç‚¹æ•°æ® / æŸ¥è¯¢ç»“æœï¼‰ã€‚</td></tr><tr><td><strong>æ ¸å¿ƒèƒ½åŠ›ä¾èµ–</strong></td><td>ä¾èµ–å¤§æ¨¡å‹ï¼ˆLLMï¼‰çš„è¯­ä¹‰ç†è§£ä¸æ¨ç†èƒ½åŠ›ï¼Œéœ€å¤„ç†æ¨¡ç³Šã€æ­§ä¹‰çš„éç»“æ„åŒ–ä¿¡æ¯ï¼ˆå¦‚ â€œå°æ˜å–œæ¬¢å–æ‹¿é“â€â†’ è¯†åˆ« â€œå°æ˜ - å–œæ¬¢ - æ‹¿é“â€ ä¸‰å…ƒç»„ï¼‰ã€‚</td><td>ä¾èµ–æ•°æ®å­˜å‚¨å±‚ï¼ˆå¦‚ Neo4jã€å‘é‡æ•°æ®åº“ï¼‰çš„ CRUD æ¥å£ï¼Œéœ€ä¿è¯æ“ä½œçš„åŸå­æ€§ã€ä¸€è‡´æ€§ï¼ˆå¦‚åˆ›å»ºèŠ‚ç‚¹æ—¶æ ¡éªŒå”¯ä¸€æ ‡è¯†ï¼Œé¿å…é‡å¤ï¼‰ã€‚</td></tr><tr><td><strong>å˜åŒ–é¢‘ç‡</strong></td><td>è¾ƒé«˜ï¼šæ¨ç†è§„åˆ™ã€å…³ç³»ç±»å‹å¯èƒ½éšåœºæ™¯è¿­ä»£ï¼ˆå¦‚ä» â€œé€šç”¨å¯¹è¯â€ æ‰©å±•åˆ° â€œä¸“ä¸šé¢†åŸŸâ€ï¼Œéœ€æ–°å¢é¢†åŸŸç‰¹å®šå…³ç³»è¯†åˆ«é€»è¾‘ï¼‰ã€‚</td><td>è¾ƒä½ï¼šèŠ‚ç‚¹çš„å­˜å‚¨æ ¼å¼ã€æ“ä½œè§„èŒƒï¼ˆå¦‚ ID ç”Ÿæˆè§„åˆ™ã€å±æ€§æ ¡éªŒé€»è¾‘ï¼‰ä¸€æ—¦ç¡®å®šï¼Œå¾ˆå°‘é¢‘ç¹å˜æ›´ã€‚</td></tr><tr><td><strong>å¤ç”¨åœºæ™¯</strong></td><td>å¯è·¨æ¨¡å—å¤ç”¨ï¼šé™¤äº†ç»™ NodeHandler æä¾›å…³è”æ•°æ®ï¼Œè¿˜å¯ç»™ RAG æ¨¡å—æä¾›æ¨ç†ç»“è®ºã€ç»™ Agent å†³ç­–æ¨¡å—æä¾›å…³ç³»ä¾æ®ã€‚</td><td>èšç„¦è®°å¿†å­˜å‚¨å±‚ï¼šä¸»è¦æœåŠ¡äºçŸ¥è¯†å›¾è°±çš„èŠ‚ç‚¹ç®¡ç†ï¼Œå¤ç”¨åœºæ™¯é›†ä¸­åœ¨ â€œèŠ‚ç‚¹æ•°æ®çš„è¯»å†™æ“ä½œâ€ã€‚</td></tr></tbody></table>
<h5 data-id="heading-38">3.6.3 è¯¦ç»†æ€è·¯</h5>
<h6 data-id="heading-39">è§£è€¦ â€œæ™ºèƒ½æ¨ç†â€ ä¸ â€œæ•°æ®æ“ä½œâ€</h6>
<p>MemOS çš„æ ¸å¿ƒä»·å€¼æ˜¯ â€œè®© Agent æ‹¥æœ‰å¯æ¨ç†çš„è®°å¿†â€ï¼Œè€Œè¿™ä¸€ç›®æ ‡éœ€è¦ â€œå…ˆåˆ†æï¼ˆæ¨ç†ï¼‰ã€åæ“ä½œï¼ˆå­˜å‚¨ï¼‰â€ çš„æµç¨‹ï¼š</p>
<ul>
<li>ç¬¬ä¸€æ­¥ï¼š<code>RelationAndReasoningDetector</code> æŠŠ â€œæ¨¡ç³Šçš„è‡ªç„¶è¯­è¨€â€ ç¿»è¯‘æˆ â€œç»“æ„åŒ–çš„å…³ç³»ä¸èŠ‚ç‚¹éœ€æ±‚â€ï¼ˆå¦‚ â€œå°çº¢ä¹°äº†æ–°æ‰‹æœºâ€â†’ è¯†åˆ«å‡º â€œå°çº¢â€â€œæ–°æ‰‹æœºâ€ ä¸¤ä¸ªå®ä½“ï¼Œâ€œè´­ä¹°â€ å…³ç³»ï¼Œç”Ÿæˆ â€œåˆ›å»ºä¸¤ä¸ªèŠ‚ç‚¹ + å»ºç«‹å…³è”â€ çš„éœ€æ±‚ï¼‰ï¼›</li>
<li>ç¬¬äºŒæ­¥ï¼š<code>NodeHandler</code> æ¥æ”¶è¿™ä¸ª â€œæ˜ç¡®éœ€æ±‚â€ï¼Œæ‰§è¡Œå…·ä½“çš„å­˜å‚¨æ“ä½œï¼ˆåˆ›å»ºå°çº¢èŠ‚ç‚¹ã€åˆ›å»ºæ–°æ‰‹æœºèŠ‚ç‚¹ã€åœ¨äºŒè€…é—´æ·»åŠ  â€œè´­ä¹°â€ å…³ç³»è¾¹ï¼‰ã€‚</li>
</ul>
<p>è‹¥åˆå¹¶ä¸ºä¸€ä¸ªç±»ï¼Œä¼šå¯¼è‡´ â€œæ¨ç†é€»è¾‘â€ ä¸ â€œå­˜å‚¨é€»è¾‘â€ äº¤ç»‡åœ¨ä¸€èµ·ï¼šæ¯”å¦‚åœ¨ â€œåˆ›å»ºèŠ‚ç‚¹â€ çš„ä»£ç ä¸­ï¼Œæ—¢è¦å†™ â€œå¦‚ä½•æ ¡éªŒèŠ‚ç‚¹ ID å”¯ä¸€æ€§â€ï¼Œåˆè¦å†™ â€œå¦‚ä½•ä»æ–‡æœ¬ä¸­è¯†åˆ«èŠ‚ç‚¹å®ä½“â€â€”â€” å½“éœ€è¦ä¿®æ”¹æ¨ç†è§„åˆ™ï¼ˆå¦‚æ–°å¢ â€œåˆä½œâ€ å…³ç³»è¯†åˆ«ï¼‰æ—¶ï¼Œå¯èƒ½è¯¯æ”¹å­˜å‚¨ç›¸å…³ä»£ç ï¼›å½“éœ€è¦æ›´æ¢æ•°æ®åº“ï¼ˆå¦‚ä» Neo4j æ¢æˆ ArangoDBï¼‰æ—¶ï¼Œåˆè¦åŠ¨æ¨ç†ç›¸å…³çš„é€»è¾‘ï¼Œç»´æŠ¤æˆæœ¬æŒ‡æ•°çº§ä¸Šå‡ã€‚</p>
<h6 data-id="heading-40">é€‚é…ä¸åŒçš„ â€œæ‰©å±•ä¸ä¼˜åŒ–æ–¹å‘</h6>
<p>ä¸¤ä¸ªç±»çš„ä¼˜åŒ–ç›®æ ‡å®Œå…¨ä¸åŒï¼Œæ‹†åˆ†åå¯ç‹¬ç«‹è¿­ä»£ï¼Œâ€â€”â€” é¿å… â€œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«â€ã€‚</p>
<ul>
<li>å¯¹ <code>RelationAndReasoningDetector</code>ï¼šä¼˜åŒ–æ–¹å‘æ˜¯ â€œæå‡æ¨ç†å‡†ç¡®ç‡â€ï¼ˆå¦‚å¼•å…¥å°‘æ ·æœ¬å­¦ä¹ ã€é¢†åŸŸå¾®è°ƒã€æ€ç»´é“¾æç¤ºï¼‰ã€â€œæ”¯æŒæ›´å¤šå…³ç³»ç±»å‹â€ï¼ˆå¦‚ä»äºŒå…ƒå…³ç³»æ‰©å±•åˆ°å¤šå…ƒå…³ç³»ï¼‰ã€â€œé™ä½æ¨ç†å»¶è¿Ÿâ€ï¼ˆå¦‚ç¼“å­˜é«˜é¢‘æ¨ç†è§„åˆ™ï¼‰ï¼›</li>
<li>å¯¹ <code>NodeHandler</code>ï¼šä¼˜åŒ–æ–¹å‘æ˜¯ â€œæå‡å­˜å‚¨æ€§èƒ½â€ï¼ˆå¦‚æ‰¹é‡æ“ä½œã€ç´¢å¼•ä¼˜åŒ–ï¼‰ã€â€œå¢å¼ºæ•°æ®ä¸€è‡´æ€§â€ï¼ˆå¦‚äº‹åŠ¡æ”¯æŒã€å†²çªè§£å†³ï¼‰ã€â€œé€‚é…å¤šå­˜å‚¨å¼•æ“â€ï¼ˆå¦‚åŒæ—¶æ”¯æŒå›¾æ•°æ®åº“ã€å‘é‡æ•°æ®åº“ï¼‰ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šå½“éœ€è¦ç»™ MemOS æ–°å¢ â€œæ—¶åºå…³ç³»æ¨ç†â€ åŠŸèƒ½æ—¶ï¼Œåªéœ€ä¿®æ”¹ <code>RelationAndReasoningDetector</code>ï¼Œæ–°å¢æ—¶åºå…³ç³»è¯†åˆ«é€»è¾‘ï¼ˆå¦‚ â€œ2024 å¹´å°æ˜å…¥èŒâ†’ å°æ˜ - 2024 å¹´å…¥èŒ - å…¬å¸â€ï¼‰ï¼Œ<code>NodeHandler</code> å®Œå…¨æ— éœ€æ”¹åŠ¨ï¼›åä¹‹ï¼Œå½“éœ€è¦å°†èŠ‚ç‚¹å­˜å‚¨ä» â€œå•èŠ‚ç‚¹æ•°æ®åº“â€ æ‰©å±•åˆ° â€œåˆ†å¸ƒå¼å­˜å‚¨â€ æ—¶ï¼Œåªéœ€ä¼˜åŒ– <code>NodeHandler</code> çš„æ“ä½œæ¥å£ï¼Œæ¨ç†é€»è¾‘ä¸å—ä»»ä½•å½±å“ã€‚</p>
<h6 data-id="heading-41">æå‡ä»£ç å¤ç”¨æ€§ä¸æµ‹è¯•æ•ˆç‡</h6>
<ul>
<li>å¤ç”¨æ€§ï¼š<code>RelationAndReasoningDetector</code> çš„æ¨ç†èƒ½åŠ›å¯è¢« MemOS å¤šä¸ªæ¨¡å—å¤ç”¨ï¼ˆå¦‚ Agent çš„å†³ç­–æ¨¡å—ã€RAG çš„æ£€ç´¢å¢å¼ºæ¨¡å—ï¼‰ï¼Œè€Œ <code>NodeHandler</code> çš„èŠ‚ç‚¹æ“ä½œèƒ½åŠ›å¯è¢«çŸ¥è¯†å›¾è°±çš„å¤šä¸ªå­åŠŸèƒ½å¤ç”¨ï¼ˆå¦‚èŠ‚ç‚¹æ›´æ–°ã€èŠ‚ç‚¹æŸ¥è¯¢ã€èŠ‚ç‚¹åˆ é™¤ï¼‰ã€‚è‹¥åˆå¹¶ï¼Œè¿™äº›å¤ç”¨åœºæ™¯ä¼šè¢«è¿«å¼•å…¥æ— å…³é€»è¾‘ï¼ˆå¦‚è°ƒç”¨æ¨ç†åŠŸèƒ½æ—¶ï¼Œè¿˜è¦åŠ è½½å­˜å‚¨ç›¸å…³çš„ä¾èµ–ï¼‰ï¼›</li>
<li>æµ‹è¯•æ•ˆç‡ï¼šæ‹†åˆ†åå¯ç‹¬ç«‹ç¼–å†™å•å…ƒæµ‹è¯• â€”â€” æµ‹è¯• <code>RelationAndReasoningDetector</code> æ—¶ï¼Œåªéœ€æ¨¡æ‹Ÿè¾“å…¥æ–‡æœ¬ï¼ŒéªŒè¯è¾“å‡ºçš„å…³ç³»ä¸‰å…ƒç»„æ˜¯å¦æ­£ç¡®ï¼Œæ— éœ€ä¾èµ–çœŸå®æ•°æ®åº“ï¼›æµ‹è¯• <code>NodeHandler</code> æ—¶ï¼Œåªéœ€æ¨¡æ‹Ÿç»“æ„åŒ–çš„èŠ‚ç‚¹æ•°æ®ï¼ŒéªŒè¯ CRUD æ“ä½œæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œæ— éœ€å¯åŠ¨å¤§æ¨¡å‹ã€‚è‹¥åˆå¹¶ï¼Œæµ‹è¯•ç”¨ä¾‹éœ€åŒæ—¶è¦†ç›– â€œæ¨ç†é€»è¾‘â€ å’Œ â€œå­˜å‚¨é€»è¾‘â€ï¼Œåœºæ™¯ç»„åˆçˆ†ç‚¸ï¼ˆå¦‚ â€œæ¨ç†æ­£ç¡®ä½†å­˜å‚¨å¤±è´¥â€â€œæ¨ç†é”™è¯¯ä½†å­˜å‚¨æˆåŠŸâ€ï¼‰ï¼Œæµ‹è¯•éš¾åº¦å’Œç»´æŠ¤æˆæœ¬é™¡å¢ã€‚</li>
</ul>
<h3 data-id="heading-42">0x04 å›¾ä¾‹</h3>
<h4 data-id="heading-43">4.1 ç»„ä»¶å…³ç³»å›¾</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dff3f8208ce340369bc5336bc71cca2d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765200027&amp;x-signature=yXT%2BPdDb%2FApECt5gG5Q7tzioPG8%3D" alt="MemoryManageræµç¨‹" loading="lazy"/></p>
<p>MemoryManageræµç¨‹</p>
<h4 data-id="heading-44">4.2 è°ƒç”¨æµç¨‹å›¾</h4>
<p>è°ƒç”¨æµç¨‹å›¾å¦‚ä¸‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/934f70ba3c8b4d2b915a048e86e8bb20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765200027&amp;x-signature=aCO14rWxcOeHkN%2BwhG5AF988aWc%3D" alt="MemoryManager-sequence" loading="lazy"/></p>
<p>MemoryManager-sequence</p>
<p>è¯¦ç»†ç»„ä»¶äº¤äº’è¯´æ˜</p>
<ul>
<li>
<p>MemoryManager ä¸ GraphStructureReorganizerï¼š</p>
<ul>
<li>MemoryManager åœ¨æ·»åŠ æ–°è®°å¿†æ—¶é€šè¿‡ GraphStructureReorganizer.add_message() å‘é€æ¶ˆæ¯ã€‚</li>
<li>GraphStructureReorganizer ä½œä¸ºåå°çº¿ç¨‹å¤„ç†è¿™äº›æ¶ˆæ¯</li>
</ul>
</li>
</ul>

<ul>
<li>
<p>GraphStructureReorganizer ä¸ NodeHandler</p>
<ul>
<li>åœ¨å¤„ç† "add" æ“ä½œæ—¶ï¼Œè°ƒç”¨ NodeHandler.detect() æ£€æµ‹å†²çª</li>
<li>å¯¹äºæ£€æµ‹åˆ°çš„å†²çªï¼Œè°ƒç”¨ NodeHandler.resolve() è§£å†³å†²çª</li>
</ul>
</li>
<li>
<p>GraphStructureReorganizer ä¸ RelationAndReasoningDetector</p>
<ul>
<li>åœ¨ç»“æ„ä¼˜åŒ–è¿‡ç¨‹ä¸­ï¼Œè°ƒç”¨ RelationAndReasoningDetector.process_node() å¤„ç†èŠ‚ç‚¹å…³ç³»æ£€æµ‹å¹¶åˆ›å»ºå› æœå…³ç³»ã€æ¡ä»¶å…³ç³»ã€æ¨ç†èŠ‚ç‚¹ç­‰</li>
</ul>
</li>
<li>
<p>æ‰€æœ‰ç»„ä»¶ä¸ Neo4jGraphDBã€‚æ‰€æœ‰ç»„ä»¶éƒ½ç›´æ¥ä¸ Neo4jGraphDB äº¤äº’è¿›è¡Œå›¾æ“ä½œï¼š</p>
<ul>
<li>èŠ‚ç‚¹æ“ä½œ: add_node(), delete_node(), update_node(), get_node()</li>
<li>è¾¹æ“ä½œ: add_edge(), delete_edge(), edge_exists(), get_edges()</li>
<li>æŸ¥è¯¢æ“ä½œï¼šsearch_by_embedding(), get_neighbors_by_tag()</li>
</ul>
</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡å®ç°äº†åˆ†å±‚å¤„ç†ï¼šMemoryManager è´Ÿè´£åŸºæœ¬çš„è®°å¿†ç®¡ç†ï¼ŒGraphStructureReorganizer è´Ÿè´£åå°ç»“æ„ä¼˜åŒ–ï¼Œè€Œ NodeHandler å’Œ RelationAndReasoningDetector åˆ™ä¸“é—¨å¤„ç†ç‰¹å®šçš„å›¾ç»“æ„ç»´æŠ¤ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-45">0xFF å‚è€ƒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Farxiv.org%2Fpdf%2F2507.03724" target="_blank" title="https://link.zhihu.com/?target=https%3A//arxiv.org/pdf/2507.03724" ref="nofollow noopener noreferrer">arxiv.org/pdf/2507.03â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Flink.zhihu.com%2F%3Ftarget%3Dhttps%253A%2F%2Fgithub.com%2FMemTensor%2FMemOS.git" target="_blank" title="https://link.zhihu.com/?target=https%3A//github.com/MemTensor/MemOS.git" ref="nofollow noopener noreferrer">github.com/MemTensor/Mâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMemTensor%2FMemOS-Docs" target="_blank" title="https://github.com/MemTensor/MemOS-Docs" ref="nofollow noopener noreferrer">github.com/MemTensor/Mâ€¦</a></p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude ä»£ç å®¡æŸ¥ä¸å¥½ç”¨ï¼Ÿè¯•è¯•è¿™ä¸ªæˆ‘èŠ±äº†ä¸€å‘¨ä¼˜åŒ–çš„ Skill]]></title>    <link>https://juejin.cn/post/7578709098255908902</link>    <guid>https://juejin.cn/post/7578709098255908902</guid>    <pubDate>2025-12-01T13:57:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578709098255908902" data-draft-id="7578714735307587610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude ä»£ç å®¡æŸ¥ä¸å¥½ç”¨ï¼Ÿè¯•è¯•è¿™ä¸ªæˆ‘èŠ±äº†ä¸€å‘¨ä¼˜åŒ–çš„ Skill"/> <meta itemprop="keywords" content="Claude,Agent,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2025-12-01T13:57:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´"/> <meta itemprop="url" content="https://juejin.cn/user/2175258804632332"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude ä»£ç å®¡æŸ¥ä¸å¥½ç”¨ï¼Ÿè¯•è¯•è¿™ä¸ªæˆ‘èŠ±äº†ä¸€å‘¨ä¼˜åŒ–çš„ Skill
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2175258804632332/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹Ÿæ— é£é›¨ä¹Ÿé›¾æ™´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T13:57:38.000Z" title="Mon Dec 01 2025 13:57:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä» 1774 è¡Œåˆ° 178 è¡Œï¼šæˆ‘å¦‚ä½•é‡æ„ä¸€ä¸ª Claude Code Skill</h2>
<h3 data-id="heading-1">èµ·å› </h3>
<p>ç”¨ Claude Code åšä»£ç å®¡æŸ¥ï¼Œæ€»è§‰å¾—å·®ç‚¹æ„æ€ã€‚</p>
<p>å®ƒèƒ½æŒ‡å‡ºæ˜æ˜¾çš„ bugï¼Œä¹Ÿèƒ½ç»™ä¸€äº›é‡æ„å»ºè®®ï¼Œä½†ç»™çš„åé¦ˆå¤ªæ³›äº†â€”â€”ç¼ºå°‘ç³»ç»ŸåŒ–çš„å®¡æŸ¥æµç¨‹ï¼Œæ²¡æœ‰è¯­è¨€ç‰¹å®šçš„æ·±åº¦æ£€æŸ¥ï¼Œæ›´åˆ«è¯´ä»€ä¹ˆ"ç»™å»ºè®¾æ€§åé¦ˆçš„æŠ€å·§"ã€‚</p>
<p>åæ¥å‘ç° marketplace ä¸Šæœ‰ä¸ª <code>code-review-excellence</code> skillï¼Œè£…ä¸Šè¯•äº†è¯•ï¼Œç¡®å®ä¸“ä¸šå¤šäº†ã€‚ä½†ç¿»å¼€æºç ä¸€çœ‹ï¼š<strong>ä¸€ä¸ª SKILL.md æ–‡ä»¶ï¼Œ1774 è¡Œ</strong>ã€‚</p>
<p>è¿™å°±æœ‰é—®é¢˜äº†ã€‚</p>
<h3 data-id="heading-2">é—®é¢˜åœ¨å“ª</h3>
<p>Claude Code Skills æœ‰ä¸ªè®¾è®¡å« <strong>Progressive Disclosure</strong>ï¼ˆæ¸è¿›å¼åŠ è½½ï¼‰ï¼š</p>
<ul>
<li>æœªæ¿€æ´»æ—¶ï¼šåªåŠ è½½ skill çš„ name + descriptionï¼ˆå‡ åä¸ª tokenï¼‰</li>
<li>æ¿€æ´»æ—¶ï¼šåŠ è½½å®Œæ•´çš„ SKILL.md</li>
</ul>
<p>ä¸€ä¸ª 1774 è¡Œçš„æ–‡ä»¶ï¼Œä¸€æ¿€æ´»å°±æ˜¯ 15000+ tokensã€‚å¦‚æœæˆ‘åªæ˜¯å®¡æŸ¥ä¸€æ®µ Python ä»£ç ï¼Œå´æŠŠ React 19 Server Componentsã€Vue 3.5 defineModelã€Rust Cancellation Safety å…¨åŠ è½½è¿›æ¥â€”â€”è¿™ä¸æ˜¯æµªè´¹æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œè¿™ 1774 è¡Œé‡Œè¿˜å¼•ç”¨äº† <code>references/</code> å’Œ <code>assets/</code> ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œä½†è¿™äº›æ–‡ä»¶<strong>æ ¹æœ¬ä¸å­˜åœ¨</strong>ã€‚</p>
<h3 data-id="heading-3">é‡æ„æ€è·¯</h3>
<p>æ ¸å¿ƒç›®æ ‡ï¼š<strong>æŠŠä¸€ä¸ªå·¨å‹æ–‡ä»¶æ‹†æˆæŒ‰éœ€åŠ è½½çš„æ¨¡å—åŒ–æ¶æ„</strong>ã€‚</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">é‡æ„å‰:</span>
SKILL.md (1774 è¡Œï¼Œå…¨é‡åŠ è½½)
â€‹
<span class="hljs-section">é‡æ„å:</span>
SKILL.md (~180 è¡Œï¼Œæ ¸å¿ƒå†…å®¹ï¼Œå§‹ç»ˆåŠ è½½)
â”œâ”€â”€ reference/
â”‚ Â  â”œâ”€â”€ react.md (~870 è¡Œï¼Œå®¡æŸ¥ React æ—¶åŠ è½½)
â”‚ Â  â”œâ”€â”€ vue.md (~920 è¡Œï¼Œå®¡æŸ¥ Vue æ—¶åŠ è½½)
â”‚ Â  â”œâ”€â”€ rust.md (~840 è¡Œï¼Œå®¡æŸ¥ Rust æ—¶åŠ è½½)
â”‚ Â  â”œâ”€â”€ typescript.md (~540 è¡Œï¼Œå®¡æŸ¥ TS æ—¶åŠ è½½)
â”‚ Â  â””â”€â”€ python.md (~1070 è¡Œï¼Œå®¡æŸ¥ Python æ—¶åŠ è½½)
â”œâ”€â”€ assets/
â”‚ Â  â”œâ”€â”€ pr-review-template.md (PR å®¡æŸ¥æ¨¡æ¿)
â”‚ Â  â””â”€â”€ review-checklist.md (å¿«é€Ÿæ£€æŸ¥æ¸…å•)
â””â”€â”€ scripts/
 Â   â””â”€â”€ pr-analyzer.py (PR å¤æ‚åº¦åˆ†æè„šæœ¬)
</code></pre>
<p>æ€»å†…å®¹ä» ~1774 è¡Œæ‰©å±•åˆ° ~6000 è¡Œï¼Œä½† SKILL.md åè€Œç¼©å‡åˆ° 180 è¡Œã€‚</p>
<p>è¿™å°±æ˜¯ Progressive Disclosure çš„ç²¾é«“ï¼š<strong>æ ¸å¿ƒç²¾ç‚¼ï¼Œç»†èŠ‚æŒ‰éœ€</strong>ã€‚</p>
<h3 data-id="heading-4">SKILL.md æ€ä¹ˆå†™</h3>
<h4 data-id="heading-5">Frontmatter è§„èŒƒ</h4>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">code-review-excellence</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">|
  Provides comprehensive code review guidance for React 19, Vue 3, Rust, TypeScript, and Python.
  Helps catch bugs, improve code quality, and give constructive feedback.
  Use when: reviewing pull requests, conducting PR reviews, code review, reviewing code changes,
  establishing review standards, mentoring developers, architecture reviews, security audits,
  checking code quality, finding bugs, giving feedback on code.
</span><span class="hljs-attr">allowed-tools:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Read</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Grep</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">Glob</span>
<span class="hljs-meta">---
</span></code></pre>
<p>å‡ ä¸ªè¦ç‚¹ï¼š</p>
<ol start="0">
<li><strong>name å¿…é¡»æ˜¯ kebab-case</strong>ï¼Œä¸”ä¸ç›®å½•åä¸€è‡´</li>
<li><strong>description è¦åŒ…å«è§¦å‘è¯</strong>ï¼Œ"Use when:" åé¢åˆ—å‡ºä½¿ç”¨åœºæ™¯</li>
<li><strong>allowed-tools å¯é€‰</strong>ï¼Œé¢„æ‰¹å‡†çš„å·¥å…·åˆ—è¡¨ï¼Œå‡å°‘ç¡®è®¤å¼¹çª—</li>
</ol>
<h4 data-id="heading-6">è§¦å‘è¯çš„é‡è¦æ€§</h4>
<p>description é‡Œçš„è§¦å‘è¯å†³å®šäº† skill ä½•æ—¶è¢«æ¿€æ´»ã€‚å†™å¾—å¤ªçª„ï¼Œå¾ˆå¤šåœºæ™¯è§¦å‘ä¸äº†ï¼›å†™å¾—å¤ªå®½ï¼Œå®¹æ˜“è¯¯è§¦å‘ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># âŒ å¤ªçª„</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">Use</span> <span class="hljs-string">when</span> <span class="hljs-string">reviewing</span> <span class="hljs-string">pull</span> <span class="hljs-string">requests</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment"># âœ… è¦†ç›–å¤šç§è¡¨è¾¾æ–¹å¼</span>
<span class="hljs-attr">description:</span> <span class="hljs-string">|
  Use when: reviewing pull requests, conducting PR reviews, code review,
  reviewing code changes, establishing review standards, mentoring developers,
  architecture reviews, security audits, checking code quality, finding bugs
</span></code></pre>
<p>ç”¨æˆ·è¯´"å¸®æˆ‘ review è¿™æ®µä»£ç "ã€"æ£€æŸ¥ä¸‹è¿™ä¸ª PR"ã€"å®¡æŸ¥ä¸‹å®‰å…¨æ€§"éƒ½èƒ½è§¦å‘ã€‚</p>
<h4 data-id="heading-7">å†…å®¹ç»„ç»‡</h4>
<p>SKILL.md åªæ”¾"å¿…é¡»çŸ¥é“"çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># Code Review Excellence</span>
â€‹
<span class="hljs-comment">## When to Use This Skill</span>
- Reviewing pull requests and code changes
- Establishing code review standards for teams
- ...
â€‹
<span class="hljs-comment">## Core Principles</span>
<span class="hljs-section">[å®¡æŸ¥çš„æ ¸å¿ƒåŸåˆ™ï¼Œç®€æ˜æ‰¼è¦]</span>
â€‹
<span class="hljs-comment">## Review Process</span>
<span class="hljs-section">[4 é˜¶æ®µå®¡æŸ¥æµç¨‹ï¼šContext â†’ High-Level â†’ Line-by-Line â†’ Summary]</span>
â€‹
<span class="hljs-comment">## Language-Specific Guides</span>
| Language | Reference File | Key Topics |
|----------|----------------|------------|
| React | <span class="hljs-section">[React Guide]</span>(reference/react.md) | Hooks, React 19 Actions, RSC |
| Vue 3 | <span class="hljs-section">[Vue Guide]</span>(reference/vue.md) | Composition API, Vue 3.5 ç‰¹æ€§ |
| ...
</code></pre>
<p>è¯¦ç»†çš„è¯­è¨€ç‰¹å®šå†…å®¹ï¼Œé€šè¿‡ Markdown é“¾æ¥å¼•ç”¨ reference/ ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚</p>
<p><strong>å…³é”®ç‚¹</strong>ï¼šä½¿ç”¨ <code>[React Guide](reference/react.md)</code> è¿™ç§ Markdown é“¾æ¥æ ¼å¼ï¼Œè€Œä¸æ˜¯ <code>`reference/react.md`</code> åå¼•å·æ ¼å¼ã€‚å‰è€…èƒ½è¢« Claude Code è¯†åˆ«å¹¶æŒ‰éœ€åŠ è½½ã€‚</p>
<h3 data-id="heading-8">Reference æ–‡ä»¶æ€ä¹ˆå†™</h3>
<p>ä»¥ <code>reference/react.md</code> ä¸ºä¾‹ï¼Œä¸“æ³¨äº React ä»£ç å®¡æŸ¥çš„æ·±åº¦å†…å®¹ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"># React ä»£ç å®¡æŸ¥æŒ‡å—
â€‹
&gt; React å®¡æŸ¥é‡ç‚¹ï¼šHooks è§„åˆ™ã€æ€§èƒ½ä¼˜åŒ–çš„é€‚åº¦æ€§ã€ç»„ä»¶è®¾è®¡ã€ä»¥åŠç°ä»£ React <span class="hljs-number">19</span>/RSC æ¨¡å¼ã€‚
â€‹
## ç›®å½•
- <span class="hljs-selector-attr">[Hooks è§„åˆ™ä¸å¸¸è§é”™è¯¯]</span>(#hooks-è§„åˆ™ä¸å¸¸è§é”™è¯¯)
- <span class="hljs-selector-attr">[useEffect æ·±åº¦å®¡æŸ¥]</span>(#useeffect-æ·±åº¦å®¡æŸ¥)
- <span class="hljs-selector-attr">[React 19 Actions &amp; Forms]</span>(#react-<span class="hljs-number">19</span>-actions--forms)
- <span class="hljs-selector-attr">[Server Components]</span>(#server-components)
- <span class="hljs-selector-attr">[TanStack Query v5]</span>(#tanstack-query-v5)
â€‹
## Hooks è§„åˆ™ä¸å¸¸è§é”™è¯¯
â€‹
### æ¡ä»¶è°ƒç”¨ Hooks
â€‹
```tsx
<span class="hljs-comment">// âŒ æ¡ä»¶è°ƒç”¨ Hooks â€” è¿å Hooks è§„åˆ™</span>
function <span class="hljs-built_in">BadComponent</span>({ show }) {
 Â if (show) {
 Â  Â const <span class="hljs-selector-attr">[value, setValue]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);  <span class="hljs-comment">// Error!</span>
 Â }
 Â return &lt;<span class="hljs-selector-tag">div</span>&gt;...&lt;/<span class="hljs-selector-tag">div</span>&gt;;
}
â€‹
<span class="hljs-comment">// âœ… Hooks å¿…é¡»åœ¨é¡¶å±‚æ— æ¡ä»¶è°ƒç”¨</span>
function <span class="hljs-built_in">GoodComponent</span>({ show }) {
 Â const <span class="hljs-selector-attr">[value, setValue]</span> = <span class="hljs-built_in">useState</span>(<span class="hljs-number">0</span>);
 Â if (!show) return null;
 Â return &lt;<span class="hljs-selector-tag">div</span>&gt;{value}&lt;/<span class="hljs-selector-tag">div</span>&gt;;
}
</code></pre>
<p>[æ›´å¤šå†…å®¹...]</p>
<pre><code class="hljs language-markdown" lang="markdown">â€‹
æ¯ä¸ª reference æ–‡ä»¶éƒ½æœ‰ï¼š
<span class="hljs-bullet">1.</span> å¼€å¤´çš„å®šä½è¯´æ˜ï¼ˆè¿™ä¸ªæ–‡ä»¶æ˜¯å¹²ä»€ä¹ˆçš„ï¼‰
<span class="hljs-bullet">2.</span> æ¸…æ™°çš„ç›®å½•ç»“æ„
<span class="hljs-bullet">3.</span> å¤§é‡çš„ âœ… / âŒ å¯¹æ¯”ç¤ºä¾‹
<span class="hljs-bullet">4.</span> å®¡æŸ¥æ¸…å•ï¼ˆChecklistï¼‰
â€‹
<span class="hljs-section">## Token å¼€é”€å¯¹æ¯”</span>
â€‹
é‡æ„å‰åçš„ token å¼€é”€å˜åŒ–ï¼š
â€‹
</code></pre>
<p>é‡æ„å‰ï¼š</p>
<ul>
<li>æ¿€æ´» skill: ~15000 tokensï¼ˆå…¨é‡åŠ è½½ï¼‰</li>
</ul>
<p>é‡æ„åï¼š</p>
<ul>
<li>æ¿€æ´» skill: ~1500 tokensï¼ˆä»… SKILL.mdï¼‰</li>
<li>å®¡æŸ¥ React ä»£ç : +7000 tokensï¼ˆåŠ è½½ react.mdï¼‰</li>
<li>å®¡æŸ¥ Python ä»£ç : +8500 tokensï¼ˆåŠ è½½ python.mdï¼‰</li>
<li>å®¡æŸ¥ Vue ä»£ç : +7500 tokensï¼ˆåŠ è½½ vue.mdï¼‰</li>
</ul>
<pre><code class="hljs language-shell" lang="shell">â€‹
å¦‚æœæˆ‘åªå®¡æŸ¥ Python ä»£ç ï¼Œç°åœ¨åªéœ€è¦ ~10000 tokensï¼Œè€Œä¸æ˜¯ä¹‹å‰çš„ 15000 tokensã€‚
â€‹
æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ 6000 è¡Œçš„å†…å®¹æ¯”åŸæ¥ 1774 è¡Œ**æ›´æ·±å…¥**â€”â€”æ¯ä¸ªè¯­è¨€éƒ½æœ‰å®Œæ•´çš„å®¡æŸ¥æŒ‡å—ï¼Œè€Œä¸æ˜¯èœ»èœ“ç‚¹æ°´ã€‚
â€‹
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment"># å®é™…æ•ˆæœ</span></span>
â€‹
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">## æ²¡æœ‰ Skill æ—¶</span></span>
â€‹
</code></pre>
<p>é—®ï¼šå®¡æŸ¥è¿™æ®µä»£ç çš„å®‰å…¨æ€§</p>
<p>Claudeï¼šè¿™æ®µä»£ç çœ‹èµ·æ¥æœ‰å‡ ä¸ªæ½œåœ¨é—®é¢˜... [æ³›æ³›çš„å»ºè®®ï¼Œç¼ºå°‘ç³»ç»Ÿæ€§]</p>
<pre><code class="hljs language-shell" lang="shell">â€‹
<span class="hljs-meta prompt_">#</span><span class="bash"><span class="hljs-comment">## æœ‰ Skill å</span></span>
â€‹
</code></pre>
<p>é—®ï¼šå®¡æŸ¥è¿™æ®µä»£ç çš„å®‰å…¨æ€§</p>
<p>Claudeï¼š</p>
<h3 data-id="heading-9">å®‰å…¨å®¡æŸ¥æŠ¥å‘Š</h3>
<h4 data-id="heading-10">ğŸ”´ ä¸¥é‡é—®é¢˜ (Blocking)</h4>
<ol start="0">
<li>
<p>SQL æ³¨å…¥é£é™© - ç¬¬ 23 è¡Œç›´æ¥æ‹¼æ¥ç”¨æˆ·è¾“å…¥</p>
<blockquote>
<p>å»ºè®®ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢ï¼š<code>cursor.execute("SELECT * FROM users WHERE id = %s", (user_id,))</code></p>
</blockquote>
</li>
</ol>
<h4 data-id="heading-11">ğŸŸ¡ é‡è¦æ”¹è¿› (Important)</h4>
<ol start="2">
<li>ç¼ºå°‘è¾“å…¥éªŒè¯ - user_id æœªæ ¡éªŒç±»å‹å’ŒèŒƒå›´</li>
</ol>
<h4 data-id="heading-12">å®‰å…¨æ£€æŸ¥æ¸…å•</h4>
<ul>
<li>å‚æ•°åŒ–æŸ¥è¯¢</li>
<li>è¾“å…¥éªŒè¯</li>
<li>é”™è¯¯ä¿¡æ¯è„±æ• ...</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-string">â€‹</span>
<span class="hljs-string">ç»“æ„åŒ–ã€å¯æ‰§è¡Œã€æœ‰ä¼˜å…ˆçº§ã€‚è¿™æ‰æ˜¯ä¸“ä¸šçš„ä»£ç å®¡æŸ¥ã€‚</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment">## code-review-skillï¼šä¸€ä¸ªçœŸæ­£å¯ç”¨çš„ä»£ç å®¡æŸ¥ Skill</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-string">ç»è¿‡å¤šè½®è¿­ä»£ï¼Œè¿™ä¸ª</span> <span class="hljs-string">skill</span> <span class="hljs-string">å·²ç»ä»æœ€åˆçš„"ä¿®å¤åˆ«äººçš„</span> <span class="hljs-string">bug"å˜æˆäº†ä¸€ä¸ª**å®Œæ•´çš„ä»£ç å®¡æŸ¥è§£å†³æ–¹æ¡ˆ**ã€‚</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment">### ä¸ºä»€ä¹ˆç”¨è¿™ä¸ª Skill</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-string">|</span> <span class="hljs-string">ç—›ç‚¹</span> <span class="hljs-string">|</span> <span class="hljs-string">åŸç”Ÿ</span> <span class="hljs-string">Claude</span> <span class="hljs-string">|</span> <span class="hljs-string">ä½¿ç”¨</span> <span class="hljs-string">code-review-skill</span> <span class="hljs-string">|</span>
<span class="hljs-string">|------|------------|----------------------|</span>
<span class="hljs-string">|</span> <span class="hljs-string">å®¡æŸ¥æµç¨‹</span> <span class="hljs-string">|</span> <span class="hljs-string">æƒ³åˆ°å“ªè¯´å“ª</span> <span class="hljs-string">|</span> <span class="hljs-number">4</span> <span class="hljs-string">é˜¶æ®µç³»ç»ŸåŒ–æµç¨‹</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">é—®é¢˜åˆ†çº§</span> <span class="hljs-string">|</span> <span class="hljs-string">æ··åœ¨ä¸€èµ·</span> <span class="hljs-string">|</span> <span class="hljs-string">ğŸ”´</span> <span class="hljs-string">Blocking</span> <span class="hljs-string">/</span> <span class="hljs-string">ğŸŸ¡</span> <span class="hljs-string">Important</span> <span class="hljs-string">/</span> <span class="hljs-string">ğŸŸ¢</span> <span class="hljs-string">Nit</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">è¯­è¨€æ·±åº¦</span> <span class="hljs-string">|</span> <span class="hljs-string">æ³›æ³›è€Œè°ˆ</span> <span class="hljs-string">|</span> <span class="hljs-string">æ¡†æ¶ç‰¹å®šçš„æœ€ä½³å®è·µå’Œé™·é˜±</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">åé¦ˆæ–¹å¼</span> <span class="hljs-string">|</span> <span class="hljs-string">ç›´æ¥æŒ‡å‡ºé—®é¢˜</span> <span class="hljs-string">|</span> <span class="hljs-string">æé—®å¼å¼•å¯¼</span> <span class="hljs-string">+</span> <span class="hljs-string">å»ºè®¾æ€§å»ºè®®</span> <span class="hljs-string">|</span>
<span class="hljs-string">|</span> <span class="hljs-string">ç‰ˆæœ¬è¦†ç›–</span> <span class="hljs-string">|</span> <span class="hljs-string">å¯èƒ½è¿‡æ—¶</span> <span class="hljs-string">|</span> <span class="hljs-string">React</span> <span class="hljs-number">19</span><span class="hljs-string">ã€Vue</span> <span class="hljs-number">3.5</span><span class="hljs-string">ã€TanStack</span> <span class="hljs-string">Query</span> <span class="hljs-string">v5</span> <span class="hljs-string">|</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment">### æ”¯æŒçš„è¯­è¨€å’Œæ¡†æ¶</span>
<span class="hljs-string">â€‹</span>
</code></pre>
<p>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ Language/Framework Version Key Topics â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ React 18.x, 19.x Hooks, Actions, â”‚ â”‚ RSC, Suspense â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Vue 3.4+, 3.5+ Composition API,â”‚ â”‚ defineModel, â”‚ â”‚ useTemplateRef â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ TanStack Query v5.x useSuspenseQueryâ”‚ â”‚ Optimistic UI â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ TypeScript 5.x Generics, Strictâ”‚ â”‚ Mode, ESLint â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Python 3.10+ async/await, â”‚ â”‚ typing, pytest â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚ Rust 2021 Edition Ownership, Asyncâ”‚ â”‚ Cancellation â”‚ â”‚ Safety â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</p>
<pre><code class="hljs language-scss" lang="scss">â€‹
æ¯ä¸ªè¯­è¨€éƒ½æœ‰ç‹¬ç«‹çš„æ·±åº¦æŒ‡å—ï¼Œä¸æ˜¯ç®€å•çš„ checklistï¼Œè€Œæ˜¯**çœŸæ­£èƒ½å¸®ä½ å‘ç°é—®é¢˜çš„å®¡æŸ¥è¦ç‚¹**ã€‚
â€‹
### ç‰¹è‰²åŠŸèƒ½
â€‹
**<span class="hljs-number">1</span>. React <span class="hljs-number">19</span> Actions å®Œæ•´æŒ‡å—**
â€‹
```tsx
<span class="hljs-comment">// skill ä¼šå¸®ä½ è¯†åˆ«è¿™ç§é”™è¯¯ï¼š</span>
const <span class="hljs-selector-attr">[state, action]</span> = <span class="hljs-built_in">useActionState</span>(async (prev, formData) =&gt; {
  <span class="hljs-built_in">setSomeState</span>(newValue);  <span class="hljs-comment">// âŒ ä¸åº”è¯¥åœ¨ Action ä¸­ setState</span>
}, initialState);
â€‹
<span class="hljs-comment">// å¹¶å»ºè®®æ­£ç¡®åšæ³•ï¼š</span>
const <span class="hljs-selector-attr">[state, action]</span> = <span class="hljs-built_in">useActionState</span>(async (prev, formData) =&gt; {
  const result = await <span class="hljs-built_in">submitForm</span>(formData);
  return { ..<span class="hljs-selector-class">.prev</span>, data: result };  <span class="hljs-comment">// âœ… è¿”å›æ–°çŠ¶æ€</span>
}, initialState);
</code></pre>
<p><strong>2. Vue 3.5 æ–°ç‰¹æ€§å®¡æŸ¥</strong></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- skill çŸ¥é“ Vue 3.5 çš„ Reactive Props Destructure --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// Vue 3.5 ä¹‹å‰ï¼šè¿™æ ·ä¼šä¸¢å¤±å“åº”æ€§</span>
<span class="hljs-keyword">const</span> { count } = defineProps&lt;{ <span class="hljs-attr">count</span>: number }&gt;()
â€‹
<span class="hljs-comment">// Vue 3.5+ï¼šskill ä¼šå‘Šè¯‰ä½ è¿™æ ·æ˜¯å®‰å…¨çš„</span>
<span class="hljs-keyword">const</span> { count } = defineProps&lt;{ <span class="hljs-attr">count</span>: number }&gt;() Â <span class="hljs-comment">// âœ… ä¿æŒå“åº”æ€§</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p><strong>3. Rust Cancellation Safety</strong></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// skill ä¼šè¯†åˆ«å–æ¶ˆä¸å®‰å…¨çš„ä»£ç ï¼š</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">not_cancel_safe</span>(conn: &amp;<span class="hljs-keyword">mut</span> Connection) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;()&gt; {
 Â  Â <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">data</span> = <span class="hljs-title function_ invoke__">read_data</span>().<span class="hljs-keyword">await</span>?; Â  Â  Â  Â  Â  <span class="hljs-comment">// å¦‚æœè¿™é‡Œè¢«å–æ¶ˆ</span>
 Â  Â conn.<span class="hljs-title function_ invoke__">write_data</span>(data).<span class="hljs-keyword">await</span>?; Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ•°æ®å¯èƒ½éƒ¨åˆ†å†™å…¥</span>
 Â  Â conn.<span class="hljs-title function_ invoke__">send_ack</span>().<span class="hljs-keyword">await</span>?;
 Â  Â <span class="hljs-title function_ invoke__">Ok</span>(())
}
â€‹
<span class="hljs-comment">// å¹¶è§£é‡Šä¸ºä»€ä¹ˆè¿™æ˜¯é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•ä¿®å¤</span>
</code></pre>
<p><strong>4. TanStack Query v5 æœ€ä½³å®è·µ</strong></p>
<p>åŒ…æ‹¬ <code>useSuspenseQuery</code> çš„é™åˆ¶ï¼ˆä¸æ”¯æŒ <code>enabled</code>ã€<code>placeholderData</code>ï¼‰ã€ä¹è§‚æ›´æ–°çš„æ­£ç¡®å§¿åŠ¿ã€<code>queryKey</code> è®¾è®¡ç­‰ã€‚</p>
<p><strong>5. PR å¤æ‚åº¦åˆ†æè„šæœ¬</strong></p>
<pre><code class="hljs language-bash" lang="bash">git diff main...HEAD | python scripts/pr-analyzer.py
â€‹
<span class="hljs-comment"># è¾“å‡ºï¼š</span>
<span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># PR ANALYSIS REPORT</span>
<span class="hljs-comment"># ============================================================</span>
<span class="hljs-comment"># ğŸ“Š SUMMARY</span>
<span class="hljs-comment"># Â   Files changed: 12</span>
<span class="hljs-comment"># Â   Additions: +450</span>
<span class="hljs-comment"># Â   Deletions: -120</span>
<span class="hljs-comment"># Â   Total changes: 570</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ğŸ“ SIZE: M (Medium)</span>
<span class="hljs-comment"># Â   Complexity score: 0.45/1.0</span>
<span class="hljs-comment"># Â   Estimated review time: ~25 minutes</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># âš ï¸  RISK FACTORS:</span>
<span class="hljs-comment"># Â   â€¢ Security-sensitive file: src/auth/jwt.ts</span>
<span class="hljs-comment"># Â   â€¢ Low test ratio (&lt;20%) - consider adding more tests</span>
<span class="hljs-comment">#</span>
<span class="hljs-comment"># ğŸ’¡ SUGGESTIONS:</span>
<span class="hljs-comment"># Â   â€¢ Check for proper type usage (avoid 'any')</span>
</code></pre>
<h4 data-id="heading-13">å®‰è£…æ–¹æ³•</h4>
<p><strong>æ–¹å¼ 1ï¼šç›´æ¥å…‹éš†ï¼ˆæ¨èï¼‰</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†åˆ° skills ç›®å½•</span>
git <span class="hljs-built_in">clone</span> https://github.com/tt-a1i/code-review-skill.git ~/.claude/skills/code-review-excellence
â€‹
<span class="hljs-comment"># éªŒè¯å®‰è£…</span>
<span class="hljs-built_in">ls</span> ~/.claude/skills/code-review-excellence/SKILL.md
</code></pre>
<p><strong>æ–¹å¼ 2ï¼šä½œä¸ºç¬¦å·é“¾æ¥</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†åˆ°ä»»æ„ä½ç½®</span>
git <span class="hljs-built_in">clone</span> https://github.com/tt-a1i/code-review-skill.git ~/projects/code-review-skill
â€‹
<span class="hljs-comment"># åˆ›å»ºç¬¦å·é“¾æ¥</span>
<span class="hljs-built_in">ln</span> -sf ~/projects/code-review-skill ~/.claude/skills/code-review-excellence
</code></pre>
<p><strong>æ–¹å¼ 3ï¼šé¡¹ç›®çº§å®‰è£…</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åœ¨é¡¹ç›®æ ¹ç›®å½•</span>
<span class="hljs-built_in">mkdir</span> -p .claude/skills
git <span class="hljs-built_in">clone</span> https://github.com/tt-a1i/code-review-skill.git .claude/skills/code-review-excellence
â€‹
<span class="hljs-comment"># æäº¤åˆ°é¡¹ç›®ä»“åº“ï¼Œå›¢é˜Ÿå…±äº«</span>
git add .claude/
git commit -m <span class="hljs-string">"Add code-review-excellence skill"</span>
</code></pre>
<h4 data-id="heading-14">ä½¿ç”¨åœºæ™¯</h4>
<p>å®‰è£…åï¼Œè¿™äº›åœºæ™¯ä¼šè‡ªåŠ¨è§¦å‘ skillï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">âœ… <span class="hljs-string">"å¸®æˆ‘å®¡æŸ¥è¿™æ®µä»£ç "</span>
âœ… <span class="hljs-string">"review è¿™ä¸ª PR"</span>
âœ… <span class="hljs-string">"æ£€æŸ¥ä¸‹æœ‰æ²¡æœ‰å®‰å…¨é—®é¢˜"</span>
âœ… <span class="hljs-string">"è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜"</span>
âœ… <span class="hljs-string">"å¸®æˆ‘ code review"</span>
âœ… <span class="hljs-string">"çœ‹çœ‹è¿™ä¸ªå‡½æ•°å†™å¾—æ€ä¹ˆæ ·"</span>
âœ… <span class="hljs-string">"ç»™äº›æ”¹è¿›å»ºè®®"</span>
</code></pre>
<h4 data-id="heading-15">ä¸å…¶ä»– Skill çš„åŒºåˆ«</h4>
<p>å¸‚é¢ä¸Šä¹Ÿæœ‰å…¶ä»–ä»£ç å®¡æŸ¥ç›¸å…³çš„ skillï¼Œè¿™ä¸ªæœ‰ä»€ä¹ˆä¸åŒï¼Ÿ</p>








































<table><thead><tr><th>ç‰¹æ€§</th><th>å…¶ä»– Skills</th><th>code-review-skill</th></tr></thead><tbody><tr><td>æ¶æ„</td><td>å•æ–‡ä»¶ 1000+ è¡Œ</td><td>Progressive Disclosure</td></tr><tr><td>å†…å®¹æ·±åº¦</td><td>é€šç”¨å»ºè®®</td><td>æ¡†æ¶ç‰¹å®šæ·±åº¦æŒ‡å—</td></tr><tr><td>ç‰ˆæœ¬æ›´æ–°</td><td>å¯èƒ½æ»å</td><td>React 19 / Vue 3.5 / TQ v5</td></tr><tr><td>èµ„æºæ–‡ä»¶</td><td>é€šå¸¸ç¼ºå¤±</td><td>å®Œæ•´çš„ reference + assets</td></tr><tr><td>Token æ•ˆç‡</td><td>å…¨é‡åŠ è½½</td><td>æŒ‰éœ€åŠ è½½</td></tr><tr><td>å¯ç»´æŠ¤æ€§</td><td>éš¾ä»¥æ›´æ–°</td><td>æ¨¡å—åŒ–ï¼Œæ˜“äºè¿­ä»£</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-16">å¼€å‘è¿‡ç¨‹ä¸­çš„å‘</h3>
<h4 data-id="heading-17">1. ç›®å½•åæ˜¯ reference/ ä¸æ˜¯ references/</h4>
<p>æœ€åˆç…§ç€å…¶ä»– skill å†™ï¼Œç”¨äº† <code>references/</code>ï¼ˆå¸¦ sï¼‰ã€‚ç»“æœ Claude Code æ‰¾ä¸åˆ°æ–‡ä»¶ã€‚</p>
<p>ç¿»äº†å®˜æ–¹è§„èŒƒæ‰å‘ç°ï¼Œæ ‡å‡†ç›®å½•åæ˜¯ <code>reference/</code>ï¼ˆä¸å¸¦ sï¼‰ã€‚</p>
<h4 data-id="heading-18">2. æ–‡ä»¶å¼•ç”¨æ ¼å¼</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># âŒ é”™è¯¯ï¼šåå¼•å·æ ¼å¼</span>
See `reference/react.md` <span class="hljs-keyword">for</span> details.
â€‹
<span class="hljs-comment"># âœ… æ­£ç¡®ï¼šMarkdown é“¾æ¥æ ¼å¼</span>
See [React Guide](reference/react.md) <span class="hljs-keyword">for</span> details.
</code></pre>
<p>åå¼•å·åªæ˜¯å±•ç¤ºè·¯å¾„ï¼Œä¸ä¼šè§¦å‘åŠ è½½ã€‚Markdown é“¾æ¥æ‰æ˜¯æŒ‰éœ€åŠ è½½çš„è§¦å‘å™¨ã€‚</p>
<h4 data-id="heading-19">3. Frontmatter çš„ allowed-tools</h4>
<p>è¿™ä¸ªå­—æ®µæ˜¯å¯é€‰çš„ï¼Œä½†åŠ ä¸Šåä½“éªŒæ›´å¥½ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">allowed-tools:
<span class="hljs-bullet">  -</span> Read
<span class="hljs-bullet">  -</span> Grep
<span class="hljs-bullet">  -</span> Glob
</code></pre>
<p>è¿™äº›å·¥å…·ä¼šè¢«é¢„æ‰¹å‡†ï¼ŒClaude è¯»å–ä»£ç æ—¶ä¸ç”¨åå¤ç¡®è®¤æƒé™ã€‚</p>
<h3 data-id="heading-20">æºç </h3>
<p>å®Œæ•´å®ç°åœ¨ GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">tt-a1i/code-review-skill</a></p>
<p>ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">code-review-skill/
â”œâ”€â”€ SKILL.md Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># æ ¸å¿ƒæ–‡ä»¶ (~180 è¡Œ)</span>
â”œâ”€â”€ reference/ Â  Â  Â  Â  Â   <span class="hljs-comment"># æ·±åº¦æŒ‡å— (æŒ‰éœ€åŠ è½½)</span>
â”‚ Â  â”œâ”€â”€ react.md Â  Â  Â  Â   <span class="hljs-comment"># React 19 + TanStack Query v5</span>
â”‚ Â  â”œâ”€â”€ vue.md Â  Â  Â  Â  Â   <span class="hljs-comment"># Vue 3.5 + Composition API</span>
â”‚ Â  â”œâ”€â”€ rust.md Â  Â  Â  Â  Â  <span class="hljs-comment"># æ‰€æœ‰æƒã€asyncã€Cancellation Safety</span>
â”‚ Â  â”œâ”€â”€ typescript.md Â  Â  <span class="hljs-comment"># æ³›å‹ã€strict æ¨¡å¼</span>
â”‚ Â  â”œâ”€â”€ python.md Â  Â  Â  Â  <span class="hljs-comment"># ç±»å‹æ³¨è§£ã€async/awaitã€pytest</span>
â”‚ Â  â”œâ”€â”€ common-bugs-checklist.md
â”‚ Â  â”œâ”€â”€ security-review-guide.md
â”‚ Â  â””â”€â”€ code-review-best-practices.md
â”œâ”€â”€ assets/ Â  Â  Â  Â  Â  Â  Â  <span class="hljs-comment"># æ¨¡æ¿æ–‡ä»¶</span>
â”‚ Â  â”œâ”€â”€ pr-review-template.md
â”‚ Â  â””â”€â”€ review-checklist.md
â”œâ”€â”€ scripts/ Â  Â  Â  Â  Â  Â   <span class="hljs-comment"># å·¥å…·è„šæœ¬</span>
â”‚ Â  â””â”€â”€ pr-analyzer.py Â   <span class="hljs-comment"># PR å¤æ‚åº¦åˆ†æ</span>
â”œâ”€â”€ README.md
â”œâ”€â”€ CONTRIBUTING.md Â  Â  Â  <span class="hljs-comment"># Skill å¼€å‘è§„èŒƒ</span>
â””â”€â”€ LICENSE
</code></pre>
<h3 data-id="heading-21">æ€»ç»“</h3>
<p>é‡æ„è¿™ä¸ª skill çš„è¿‡ç¨‹ï¼Œè®©æˆ‘å¯¹ Claude Code Skills çš„è®¾è®¡æœ‰äº†æ›´æ·±çš„ç†è§£ï¼š</p>
<ol start="0">
<li><strong>Progressive Disclosure ä¸æ˜¯å£å·</strong>â€”â€”å®ƒæ˜¯å®å®åœ¨åœ¨çš„ token ä¼˜åŒ–ç­–ç•¥</li>
<li><strong>SKILL.md è¦ç²¾ç‚¼</strong>â€”â€”æ§åˆ¶åœ¨ 200 è¡Œä»¥å†…ï¼Œåªæ”¾å¿…é¡»çŸ¥é“çš„å†…å®¹</li>
<li><strong>æ·±åº¦å†…å®¹æ”¾ reference/</strong> â€”â€”æŒ‰éœ€åŠ è½½ï¼Œç”¨ Markdown é“¾æ¥å¼•ç”¨</li>
<li><strong>è§¦å‘è¯è¦å…¨é¢</strong>â€”â€”è¦†ç›–ç”¨æˆ·çš„å„ç§è¡¨è¾¾æ–¹å¼</li>
<li><strong>å®é™…å†…å®¹è¦æ·±å…¥</strong>â€”â€”æ—¢ç„¶æ˜¯æŒ‰éœ€åŠ è½½ï¼Œå°±ä¸ç”¨åå•¬å†…å®¹æ·±åº¦</li>
</ol>
<p>ä¸€ä¸ªè®¾è®¡è‰¯å¥½çš„ skillï¼Œåº”è¯¥æ˜¯"æ¿€æ´»æˆæœ¬ä½ã€ä½¿ç”¨ä»·å€¼é«˜"ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åˆ°ä¹Ÿæƒ³å¼€å‘ Claude Code Skill çš„ä½ ã€‚</p>
<hr/>
<h3 data-id="heading-22">ç›¸å…³èµ„æº</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.anthropic.com%2Fen%2Fdocs%2Fclaude-code%2Fskills" target="_blank" title="https://docs.anthropic.com/en/docs/claude-code/skills" ref="nofollow noopener noreferrer">Claude Code Skills å®˜æ–¹æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">Anthropic Skills è§„èŒƒ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftt-a1i%2Fcode-review-skill" target="_blank" title="https://github.com/tt-a1i/code-review-skill" ref="nofollow noopener noreferrer">code-review-skill æºç </a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ä¼ è¯´ä¸­çš„è·¨è®¾å¤‡ä¸æ»‘ååŒæœåŠ¡]]></title>    <link>https://juejin.cn/post/7578667193321242687</link>    <guid>https://juejin.cn/post/7578667193321242687</guid>    <pubDate>2025-12-01T11:12:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578667193321242687" data-draft-id="7578667193321226303" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ä¼ è¯´ä¸­çš„è·¨è®¾å¤‡ä¸æ»‘ååŒæœåŠ¡"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-01T11:12:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘ä¼ è¯´ä¸­çš„è·¨è®¾å¤‡ä¸æ»‘ååŒæœåŠ¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T11:12:50.000Z" title="Mon Dec 01 2025 11:12:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚ä»Šå¤©æˆ‘ä»¬å°†æ·±å…¥é¸¿è’™ 6.0ï¼ˆAPI21ï¼‰çš„åˆ†å¸ƒå¼èƒ½åŠ›ï¼Œæ¢è®¨å¦‚ä½•é€šè¿‡<strong>ç½‘ç»œååŒæœåŠ¡</strong>å®ç°è·¨è®¾å¤‡äº’é€šï¼Œç»“åˆ ArkTS å¼€å‘å®è·µï¼Œæä¾›ä¸€å¥—å®Œæ•´çš„æŠ€æœ¯æ–¹æ¡ˆä¸ä»£ç ç¤ºä¾‹ã€‚</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<hr/>
<h3 data-id="heading-0">ä¸€ã€æŠ€æœ¯èƒŒæ™¯ä¸æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>é¸¿è’™ç³»ç»Ÿçš„<strong>åˆ†å¸ƒå¼è½¯æ€»çº¿</strong>ï¼ˆDistributed Soft Busï¼‰æ˜¯è·¨è®¾å¤‡ååŒçš„åº•å±‚åŸºçŸ³ï¼Œå®ƒé€šè¿‡è¿‘åœºæ„ŸçŸ¥ã€è®¾å¤‡å‘ç°ä¸è¿æ¥ç®¡ç†ï¼Œå®ç°äº†è®¾å¤‡é—´çš„ä½åŠŸè€—ã€é«˜é€Ÿç‡é€šä¿¡ã€‚è€Œ**è¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰**æ˜¯ä¸Šå±‚åº”ç”¨å®ç°è·¨è®¾å¤‡åŠŸèƒ½çš„æ ¸å¿ƒæ¥å£ï¼Œå…¶é€šè¿‡è½¯æ€»çº¿é©±åŠ¨å®Œæˆæ•°æ®ä¼ è¾“ä¸æ¥å£è°ƒç”¨ã€‚</p>
<p>å…³é”®æµç¨‹ï¼š<br/>
<strong>è®¾å¤‡å‘ç° â†’ æœåŠ¡æ³¨å†Œ â†’ RPC æ¥å£ç»‘å®š â†’ è·¨è®¾å¤‡æ–¹æ³•è°ƒç”¨ â†’ æ•°æ®åŒæ­¥</strong></p>
<hr/>
<h3 data-id="heading-1">äºŒã€å¼€å‘ç¯å¢ƒé…ç½®</h3>
<p>åœ¨ <code>module.json5</code> ä¸­æ·»åŠ å¿…è¦ä¾èµ–ä¸æƒé™ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"module"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"@ohos.distributedHardware.distributedDeviceManager"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.0"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è®¾å¤‡ç®¡ç†æ¨¡å—</span>
      <span class="hljs-attr">"@ohos.app.ability.featureAbility"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.0"</span><span class="hljs-punctuation">,</span>                    <span class="hljs-comment">// Ability è°ƒç”¨</span>
      <span class="hljs-attr">"@ohos.rpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^1.0"</span>                                            <span class="hljs-comment">// RPC æ ¸å¿ƒæ¥å£</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"requestPermissions"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.DISTRIBUTED_DEVICE_STATE_CHANGE"</span>    <span class="hljs-comment">// ç›‘å¬è®¾å¤‡çŠ¶æ€</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ohos.permission.GET_DISTRIBUTED_DEVICE_INFO"</span>       <span class="hljs-comment">// è·å–è®¾å¤‡ä¿¡æ¯</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<hr/>
<h3 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒå®ç°æ­¥éª¤ï¼ˆArkTS æ¡ˆä¾‹ï¼‰</h3>
<h4 data-id="heading-3">åœºæ™¯è¯´æ˜ï¼š</h4>
<p>å®ç°ä¸€ä¸ªè·¨è®¾å¤‡æ–‡æœ¬åŒæ­¥åŠŸèƒ½ï¼Œä¾‹å¦‚åœ¨æ‰‹æœºç«¯è¾“å…¥æ–‡å­—ï¼Œå®æ—¶æ˜¾ç¤ºåœ¨å¹³æ¿ç«¯ã€‚</p>
<hr/>
<h4 data-id="heading-4"><strong>æ­¥éª¤ 1ï¼šè®¾å¤‡å‘ç°ä¸è¿æ¥ç®¡ç†</strong></h4>
<p>ä½¿ç”¨ <code>DistributedDeviceManager</code>ï¼ˆç®€ç§° DDMï¼‰è·å–ç›®æ ‡è®¾å¤‡çš„ <code>NetworkId</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> deviceManager <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohohs.distributedHardware.distributedDeviceManager'</span>;

<span class="hljs-comment">// åˆå§‹åŒ–è®¾å¤‡ç®¡ç†å™¨</span>
<span class="hljs-keyword">const</span> dm = deviceManager.<span class="hljs-title function_">getDistributedDeviceManager</span>(<span class="hljs-title function_">getContext</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-keyword">as</span> common.<span class="hljs-property">UIAbilityContext</span>);

<span class="hljs-comment">// ç›‘å¬è®¾å¤‡å˜åŒ–ï¼ˆå¦‚æ–°å¢/æ–­å¼€è®¾å¤‡ï¼‰</span>
dm.<span class="hljs-title function_">on</span>(<span class="hljs-string">'deviceChange'</span>, <span class="hljs-function">(<span class="hljs-params">deviceInfo: deviceManager.DeviceInfo[]</span>) =&gt;</span> {
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> info <span class="hljs-keyword">of</span> deviceInfo) {
    <span class="hljs-keyword">if</span> (info.<span class="hljs-property">deviceType</span> === deviceManager.<span class="hljs-property">DeviceType</span>.<span class="hljs-property">TAB</span>) { <span class="hljs-comment">// å‡è®¾ç›®æ ‡è®¾å¤‡æ˜¯å¹³æ¿</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å‘ç°ç›®æ ‡è®¾å¤‡:'</span>, info.<span class="hljs-property">networkId</span>);
      <span class="hljs-comment">// è§¦å‘åç»­æœåŠ¡ç»‘å®šé€»è¾‘</span>
    }
  }
});
</code></pre>
<hr/>
<h4 data-id="heading-5"><strong>æ­¥éª¤ 2ï¼šæœåŠ¡ç«¯æ¥å£å®šä¹‰ä¸æ³¨å†Œ</strong></h4>
<p>æœåŠ¡ç«¯ï¼ˆå¦‚å¹³æ¿è®¾å¤‡ï¼‰éœ€å®šä¹‰ä¸€ä¸ªè¿œç¨‹æœåŠ¡æ¥å£ï¼Œç”¨äºæ¥æ”¶å®¢æˆ·ç«¯ï¼ˆæ‰‹æœºï¼‰çš„æ–‡æœ¬æ•°æ®ã€‚</p>
<p>1.<strong>å®šä¹‰è¿œç¨‹æœåŠ¡æ¥å£ï¼ˆStubï¼‰</strong>
åˆ›å»ºä¸€ä¸ªç»§æ‰¿è‡ª <code>RemoteObject</code> çš„æœåŠ¡ç«¯ç±»ï¼Œå®ç° <code>onRemoteMessageRequest</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> rpc <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.rpc'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">TextSyncStub</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">rpc.RemoteObject</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">descriptor: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">super</span>(descriptor); <span class="hljs-comment">// æ¥å£æ ‡è¯†ç¬¦ï¼Œéœ€ä¸å®¢æˆ·ç«¯ä¸€è‡´</span>
  }

  <span class="hljs-comment">// å¤„ç†å®¢æˆ·ç«¯å‘é€çš„æ–‡æœ¬æ•°æ®</span>
  <span class="hljs-title function_">onRemoteMessageRequest</span>(<span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">data</span>: rpc.<span class="hljs-property">MessageSequence</span>, <span class="hljs-attr">reply</span>: rpc.<span class="hljs-property">MessageSequence</span>, <span class="hljs-attr">option</span>: rpc.<span class="hljs-property">MessageOption</span>): <span class="hljs-built_in">boolean</span> | <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">boolean</span>&gt; {
    <span class="hljs-keyword">if</span> (code === <span class="hljs-number">1</span>) { <span class="hljs-comment">// è‡ªå®šä¹‰æ–¹æ³•æ ‡è¯†ç </span>
      <span class="hljs-keyword">const</span> receivedText = data.<span class="hljs-title function_">readString</span>(); <span class="hljs-comment">// è¯»å–å®¢æˆ·ç«¯å‘é€çš„æ–‡æœ¬</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'æœåŠ¡ç«¯æ¥æ”¶åˆ°æ–‡æœ¬:'</span>, receivedText);
      <span class="hljs-comment">// åœ¨æœ¬åœ° UI ä¸­æ›´æ–°æ–‡æœ¬ï¼ˆç¤ºä¾‹ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onTextReceived</span>(receivedText);
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-comment">// æœ¬åœ°å›è°ƒï¼šæ›´æ–° UIï¼ˆéœ€ç»“åˆ Ability ç”Ÿå‘½å‘¨æœŸï¼‰</span>
  <span class="hljs-title function_">onTextReceived</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-comment">// ç¤ºä¾‹ï¼šæ›´æ–° UIAbility ä¸­çš„ @State å˜é‡</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textContent</span> = text;
  }
}
</code></pre>
<p>2.<strong>åœ¨æœåŠ¡ç«¯ Ability ä¸­æ³¨å†ŒæœåŠ¡</strong>
æœåŠ¡ç«¯ Ability éœ€é€šè¿‡ <code>SAMgr</code>ï¼ˆç³»ç»Ÿèƒ½åŠ›ç®¡ç†å™¨ï¼‰æ³¨å†ŒæœåŠ¡ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> rpc <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.rpc'</span>;
<span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.featureAbility'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">TextSyncServer</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">stub</span>: <span class="hljs-title class_">TextSyncStub</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">aboutToAppear</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆ›å»º Stub å®ä¾‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">stub</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextSyncStub</span>(<span class="hljs-string">'com.example.textsync.service'</span>);
    <span class="hljs-comment">// æ³¨å†Œç³»ç»Ÿèƒ½åŠ›ï¼ˆSystem Abilityï¼‰</span>
    featureAbility.<span class="hljs-title function_">registerSystemAbility</span>(<span class="hljs-number">1001</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">stub</span>); <span class="hljs-comment">// 1001 ä¸ºè‡ªå®šä¹‰çš„ SA ID</span>
  }
}
</code></pre>
<hr/>
<h4 data-id="heading-6"><strong>æ­¥éª¤ 3ï¼šå®¢æˆ·ç«¯ç»‘å®šæœåŠ¡å¹¶å‘é€æ•°æ®</strong></h4>
<p>å®¢æˆ·ç«¯ï¼ˆå¦‚æ‰‹æœºï¼‰é€šè¿‡ <code>NetworkId</code> ç»‘å®šæœåŠ¡ç«¯çš„è¿œç¨‹æœåŠ¡ï¼Œå¹¶è°ƒç”¨å…¶æ¥å£å‘é€æ•°æ®ã€‚</p>
<p>1.<strong>ç»‘å®šæœåŠ¡ç«¯ Ability</strong>
å®¢æˆ·ç«¯éœ€æ„é€  <code>Want</code> å¯¹è±¡ï¼ŒæŒ‡å®šç›®æ ‡è®¾å¤‡çš„ <code>NetworkId</code> ä¸æœåŠ¡æè¿°ç¬¦ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> rpc <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.rpc'</span>;
<span class="hljs-keyword">import</span> featureAbility <span class="hljs-keyword">from</span> <span class="hljs-string">'@ohos.app.ability.featureAbility'</span>;

<span class="hljs-comment">// è·å–ç›®æ ‡è®¾å¤‡ NetworkIdï¼ˆé€šè¿‡ DDM å‘ç°ï¼‰</span>
<span class="hljs-keyword">const</span> targetNetworkId = <span class="hljs-string">'12:34:56:78:90:AB'</span>; <span class="hljs-comment">// ç¤ºä¾‹è®¾å¤‡ ID</span>

<span class="hljs-comment">// æ„é€  Want å¯¹è±¡</span>
<span class="hljs-keyword">const</span> <span class="hljs-attr">want</span>: <span class="hljs-title class_">Want</span> = {
  <span class="hljs-attr">deviceId</span>: targetNetworkId, <span class="hljs-comment">// ç›®æ ‡è®¾å¤‡ ID</span>
  <span class="hljs-attr">bundleName</span>: <span class="hljs-string">'com.example.textsync'</span>, <span class="hljs-comment">// æœåŠ¡ç«¯åº”ç”¨åŒ…å</span>
  <span class="hljs-attr">abilityName</span>: <span class="hljs-string">'TextSyncServer'</span>, <span class="hljs-comment">// æœåŠ¡ç«¯ Ability åç§°</span>
  <span class="hljs-attr">parameters</span>: {
    <span class="hljs-comment">// å¯é€‰å‚æ•°</span>
  }
};

<span class="hljs-comment">// ç»‘å®šæœåŠ¡</span>
featureAbility.<span class="hljs-title function_">connectAbility</span>(want, {
  <span class="hljs-attr">onConnect</span>: <span class="hljs-function">(<span class="hljs-params">proxy: rpc.RemoteObject</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å®¢æˆ·ç«¯ç»‘å®šæœåŠ¡æˆåŠŸ:'</span>, proxy);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">proxy</span> = proxy; <span class="hljs-comment">// ä¿å­˜ä»£ç†å¯¹è±¡</span>
  },
  <span class="hljs-attr">onDisconnect</span>: <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æœåŠ¡è¿æ¥æ–­å¼€'</span>);
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">proxy</span> = <span class="hljs-literal">null</span>;
  },
  <span class="hljs-attr">onFailed</span>: <span class="hljs-function">(<span class="hljs-params">errCode: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'ç»‘å®šæœåŠ¡å¤±è´¥ï¼Œé”™è¯¯ç :'</span>, errCode);
  }
});
</code></pre>
<p>2.<strong>é€šè¿‡ Proxy è°ƒç”¨è¿œç¨‹æ–¹æ³•</strong>
å®¢æˆ·ç«¯é€šè¿‡ä»£ç†å¯¹è±¡ <code>proxy</code> è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•ï¼Œå‘é€æ–‡æœ¬æ•°æ®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å‘é€æ–‡æœ¬åˆ°æœåŠ¡ç«¯</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">sendTextToServer</span>(<span class="hljs-params">text: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">proxy</span>) {
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> rpc.<span class="hljs-title class_">MessageSequence</span>();
    <span class="hljs-keyword">const</span> reply = <span class="hljs-keyword">new</span> rpc.<span class="hljs-title class_">MessageSequence</span>();
    data.<span class="hljs-title function_">writeString</span>(text); <span class="hljs-comment">// å°†æ–‡æœ¬å†™å…¥æ•°æ®åŒ…</span>
    <span class="hljs-comment">// è°ƒç”¨æœåŠ¡ç«¯æ–¹æ³•ï¼ˆcode ä¸º 1ï¼Œéœ€ä¸æœåŠ¡ç«¯ä¸€è‡´ï¼‰</span>
    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">proxy</span>.<span class="hljs-title function_">sendMessageRequest</span>(<span class="hljs-number">1</span>, data, reply);
    <span class="hljs-keyword">if</span> (result) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">'å‘é€æˆåŠŸ'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å‘é€å¤±è´¥'</span>);
    }
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-7">å››ã€å®Œæ•´ UI äº¤äº’æ¡ˆä¾‹</h3>
<h4 data-id="heading-8">æœåŠ¡ç«¯ UIï¼ˆå¹³æ¿ç«¯ï¼‰</h4>
<p>å±•ç¤ºæ¥æ”¶åˆ°çš„æ–‡æœ¬ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">TextDisplay</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">Text</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">text</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">30</span>)
        .<span class="hljs-title function_">textAlign</span>(<span class="hljs-title class_">TextAlign</span>.<span class="hljs-property">Center</span>)
        .<span class="hljs-title function_">width</span>(<span class="hljs-string">'100%'</span>)
        .<span class="hljs-title function_">height</span>(<span class="hljs-string">'100%'</span>)
    }
  }
}
</code></pre>
<h4 data-id="heading-9">å®¢æˆ·ç«¯ UIï¼ˆæ‰‹æœºç«¯ï¼‰</h4>
<p>è¾“å…¥æ–‡æœ¬å¹¶å‘é€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">TextInput</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputText</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">proxy</span>: rpc.<span class="hljs-property">RemoteObject</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¾“å…¥æ–‡æœ¬'</span> })
        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span> = value;
        })
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'å‘é€åˆ°å¹³æ¿'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendTextToServer</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputText</span>);
        })
    }
  }
}
</code></pre>
<hr/>
<h3 data-id="heading-10">äº”ã€å…³é”®æ³¨æ„äº‹é¡¹ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<p>1.<strong>è®¾å¤‡å…¼å®¹æ€§</strong></p>
<ul>
<li>ç¡®ä¿ç›®æ ‡è®¾å¤‡å·²å¼€å¯è¶…çº§ç»ˆç«¯åŠŸèƒ½ï¼Œå¹¶ä¸”ç½‘ç»œçŠ¶æ€æ­£å¸¸ã€‚</li>
<li>æ£€æŸ¥ç›®æ ‡è®¾å¤‡æ˜¯å¦æ”¯æŒé¸¿è’™ 6.0 åŠå…¶ API ç‰¹æ€§ã€‚</li>
</ul>
<p>2.<strong>è½¯æ€»çº¿è¿æ¥ç¨³å®šæ€§</strong></p>
<ul>
<li>é€šè¿‡ <code>DistributedDeviceManager</code> ç›‘å¬è®¾å¤‡çŠ¶æ€å˜åŒ–ï¼ŒåŠ¨æ€æ–­å¼€æˆ–é‡è¿ã€‚</li>
<li>ä½¿ç”¨ <code>onDisconnect</code> å›è°ƒå¤„ç†å¼‚å¸¸æ–­å¼€æƒ…å†µã€‚</li>
</ul>
<p>3.<strong>æ•°æ®åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</strong></p>
<ul>
<li>é€šè¿‡ <code>MessageSequence</code> ä¼ é€’æ•°æ®æ—¶ï¼Œéœ€ä¿è¯å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„å­—æ®µç±»å‹ä¸é¡ºåºä¸€è‡´ã€‚</li>
<li>å¯¹äºå¤æ‚æ•°æ®ï¼ˆå¦‚ PixelMapï¼‰ï¼Œéœ€é€šè¿‡ <code>Parcel</code> æ¥å£å®ç°è‡ªå®šä¹‰åºåˆ—åŒ–ã€‚</li>
</ul>
<p>4.<strong>æ€§èƒ½ä¼˜åŒ–</strong></p>
<ul>
<li><strong>å‡å°‘è·¨è®¾å¤‡ä¼ è¾“çš„æ•°æ®é‡</strong>ï¼šå¯¹å¤§å›¾ç‰‡ç­‰æ•°æ®ï¼Œå»ºè®®åœ¨å®¢æˆ·ç«¯è¿›è¡Œå‹ç¼©åå†å‘é€ã€‚</li>
<li><strong>å¼‚æ­¥å¤„ç†</strong>ï¼šæœåŠ¡ç«¯çš„ <code>onRemoteMessageRequest</code> æ–¹æ³•åº”å°½é‡å¼‚æ­¥å¤„ç†æ•°æ®ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li><strong>è¿æ¥å¤ç”¨</strong>ï¼šé¿å…é¢‘ç¹å»ºç«‹ä¸æ–­å¼€è¿æ¥ï¼Œå¯ç¼“å­˜å·²è¿æ¥çš„ <code>proxy</code> å¯¹è±¡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-11">å…­ã€æ‰©å±•åœºæ™¯ï¼šè·¨è®¾å¤‡å›¾ç‰‡åŒæ­¥</h3>
<p>ç»“åˆå‰æ–‡æåˆ°çš„ <code>PixelMap</code> å¤„ç†èƒ½åŠ›ï¼Œå¯è¿›ä¸€æ­¥å®ç°å›¾ç‰‡çš„è·¨è®¾å¤‡åŒæ­¥ï¼š
1.å®¢æˆ·ç«¯å°† <code>PixelMap</code> è½¬ä¸º <code>ArrayBuffer</code>ï¼ˆé€šè¿‡ <code>getPixelBytes()</code>ï¼‰ã€‚
2.ä½¿ç”¨ <code>MessageSequence</code> çš„ <code>writeArrayBuffer()</code> æ–¹æ³•å‘é€ã€‚
3.æœåŠ¡ç«¯é€šè¿‡ <code>readArrayBuffer()</code> æ¥æ”¶ï¼Œå¹¶ç”¨ <code>image.createPixelMap()</code> é‡å»ºå›¾åƒã€‚</p>
<hr/>
<h3 data-id="heading-12">æ€»ç»“</h3>
<p>é€šè¿‡é¸¿è’™ 6.0 çš„ç½‘ç»œååŒæœåŠ¡ï¼ˆRPC + è½¯æ€»çº¿ï¼‰ï¼Œå¼€å‘è€…å¯ä»¥è½»æ¾å®ç°è·¨è®¾å¤‡çš„æ•°æ®äº’é€šã€‚å…³é”®åœ¨äºï¼š</p>
<ul>
<li><strong>æœåŠ¡ç«¯</strong>ï¼šå®šä¹‰å¹¶æ³¨å†Œè¿œç¨‹æ¥å£ï¼ˆStubï¼‰ï¼Œå¤„ç†æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</li>
<li><strong>å®¢æˆ·ç«¯</strong>ï¼šå‘ç°è®¾å¤‡ã€ç»‘å®šæœåŠ¡ï¼ˆProxyï¼‰ï¼Œå¹¶è°ƒç”¨å…¶æ–¹æ³•å‘é€æ•°æ®ã€‚</li>
</ul>
<p>æˆ‘æ˜¯ V å“¥ï¼Œä¸‹æœŸå°†è§£æå¦‚ä½•ç»“åˆåˆ†å¸ƒå¼è½¯æ€»çº¿ä¸ <code>PixelMap</code> å®ç°<strong>è·¨è®¾å¤‡å®æ—¶æ»¤é•œåŒæ­¥</strong>ï¼ˆå¦‚æ‰‹æœºæ‹æ‘„åå®æ—¶æ¨é€åˆ°å¹³æ¿æ¸²æŸ“ï¼‰ã€‚å¦‚æœä½ åœ¨è·¨è®¾å¤‡é€šä¿¡ä¸­é‡åˆ°é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘ä»¬å…±åŒæ¢è®¨ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5d164105cb6e46d4be0cbe886a787208~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aiB5ZOl54ix57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765192370&amp;x-signature=Pf2hAxh0CBRN%2Fyi4Cg1u5L2Tdy0%3D" alt="WX20250512-113156@2x.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cloudflare unwrapå´©æºƒï¼Ÿæ•´ç†ä¸‹Rustå±é™©æ“ä½œ]]></title>    <link>https://juejin.cn/post/7578681104292249643</link>    <guid>https://juejin.cn/post/7578681104292249643</guid>    <pubDate>2025-12-01T11:15:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578681104292249643" data-draft-id="7578697614390214662" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Cloudflare unwrapå´©æºƒï¼Ÿæ•´ç†ä¸‹Rustå±é™©æ“ä½œ"/> <meta itemprop="keywords" content="Rust"/> <meta itemprop="datePublished" content="2025-12-01T11:15:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§é±¼ä¸ƒæˆé¥±"/> <meta itemprop="url" content="https://juejin.cn/user/3017475369480509"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Cloudflare unwrapå´©æºƒï¼Ÿæ•´ç†ä¸‹Rustå±é™©æ“ä½œ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3017475369480509/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§é±¼ä¸ƒæˆé¥±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T11:15:16.000Z" title="Mon Dec 01 2025 11:15:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>è¿™æ˜¯Rustä¹ä¹å…«åä¸€éš¾ç¬¬åäº”ç¯‡ã€‚ä¹‹å‰èŠè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FvQB7YYq9t_oI4tl1DeqGVA" target="_blank" title="https://mp.weixin.qq.com/s/vQB7YYq9t_oI4tl1DeqGVA" ref="nofollow noopener noreferrer">anyhow</a>ï¼Œä¹Ÿä»‹ç»äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FNoBG_qdz4EX6VjZFkG7wUA" target="_blank" title="https://mp.weixin.qq.com/s/NoBG_qdz4EX6VjZFkG7wUA" ref="nofollow noopener noreferrer">thiserror</a>ï¼Œæ„Ÿè§‰å·®ä¸å¤šäº†ï¼Œæ²¡æƒ³çˆ†å‡ºäº†Cloudflareçš„æ–°é—»ã€‚çŒœæµ‹å¾ˆå¤šï¼Œæ®è¯´æœ‰ä¸€ä¸ªåŸå› æ˜¯ç”¨äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoq.cn%2Farticle%2FffrEqagbhIfAyitqzN7C%3Futm_source%3Dchatgpt.com" target="_blank" title="https://www.infoq.cn/article/ffrEqagbhIfAyitqzN7C?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">unwrap</a>ã€‚è¿™ä¸ªå‰è½¦ä¹‹é‰´ï¼Œç»™äº†ä¸€ä¸ªæé†’ï¼Œæ¯”å¦‚Rustè¿˜æœ‰å“ªäº›å±é™©æ“ä½œï¼Œä¸ºä»€ä¹ˆcatch_unwindæŠ“ä¸åˆ°å´©æºƒï¼Œèƒ½å¦è‡ªåŠ¨åŒ–æ£€æŸ¥ç­‰ã€‚å› æ­¤ä»Šå¤©æ¢³ç†ä¸‹Rustä»£ç çš„å±é™©æ“ä½œã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å±é™©æ“ä½œä¸€è§ˆ</h2>
<p>å…ˆå®šä¸ªæ ‡å‡†ï¼ŒæŒ‰ç…§å—æ§ç¨‹åº¦åŒºåˆ†ã€‚å—æ§ç¨‹åº¦æ˜¯æŒ‡ä»£ç ä¸å¯é¢„æµ‹ï¼Œæœ‰å®‰å…¨æ¼æ´ï¼Œä»£ç å¯æ§çš„åœæ­¢ç­‰ã€‚è¿™é‡Œå…ˆæ’é™¤å¸¦æœ‰usafeå…³é”®å­—çš„ï¼Œå› ä¸ºå…³é”®å­—æœ¬èº«å°±è¯´æ˜äº†é—®é¢˜ã€‚æ¢³ç†äº†ä¸‹ï¼Œä»ä½åˆ°é«˜ï¼Œå¤§ä½“åˆ†ä¸ºä¸‹é¢ä¸‰ç±»ã€‚</p>
<h3 data-id="heading-2">1ã€ä½å±é™©</h3>
<h4 data-id="heading-3">1.1ã€ ä¹±ç”¨clone</h4>
<p>å¤§éƒ¨åˆ†æƒ…å†µæ²¡é—®é¢˜ï¼Œcloneæœ¬èº«ä¸ä¼šäº§ç”ŸUBï¼Œä¹Ÿæ²¡æœ‰panicã€‚ä½†æ˜¯ä¹±ç”¨å¯èƒ½åŸ‹ä¸‹æ€§èƒ½ç‚¸å¼¹ï¼Œè€Œä¸”å¾ˆéšè”½ã€‚</p>
<ul>
<li>
<p>åŸå› </p>
<ul>
<li>
<p>å¤§å¯¹è±¡cloneï¼šæœ‰äº›ç±»å‹çš„cloneæ˜¯æ·±æ‹·è´ï¼Œæ¯”å¦‚<code>let b = a.clone();</code>ã€‚å¦‚æœaæ˜¯<code>Vec&lt;T&gt;</code>ï¼ˆå¤§é‡æ•°æ®ï¼‰ï¼Œ<code>Arc&lt;Mutex&lt;T&gt;&gt;</code> å†…å«å¤§ç»“æ„ï¼Œè‡ªå®šä¹‰ struct é‡ŒåŒ…äº†å¤§å¯¹è±¡ã€‚clone() ä¼š <strong>é‡æ–°åˆ†é…å†…å­˜ + å¤åˆ¶ä¸€æ•´ä»½æ•°æ®</strong>ï¼Œå¯¼è‡´å†…å­˜ä¸è¶³ï¼Œç¨‹åºå»¶è¿Ÿè·³å˜ã€ååä¸‹é™ï¼Œä¸€èˆ¬çš„crï¼Œå¾ˆéš¾è¯†åˆ«ï¼Œæ˜é¢ä¸Šçœ‹ä¸å‡ºæ¥ã€‚</p>
</li>
<li>
<p>é«˜å¹¶å‘åœºæ™¯é¢‘ç¹ clone Arc ï¼šå¤šçº¿ç¨‹ä¸‹éƒ½è¦åŸå­æ€§åœ°æ›´æ–°<strong>åŒä¸€ä¸ªå†…å­˜åœ°å€</strong>ä¸Šçš„è®¡æ•°å™¨ï¼Œåˆ™æœ‰çº¿ç¨‹ä¸å¾—ä¸ç­‰å¾…åŸå­æ“ä½œå®Œæˆå’ŒåŒæ­¥ç¼“å­˜ï¼Œè¿™ä¸ªæ—¶é—´æœ¬æ¥åº”è¯¥å¤„ç†ä¸šåŠ¡é€»è¾‘ã€‚</p>
</li>
<li>
<p>å¤šçº¿ç¨‹å¤åˆ¶é”ï¼šåŸå­æ“ä½œå¾ˆæ˜‚è´µï¼Œå°¤å…¶æ˜¯é”ç»“æ„cloneï¼Œä¼šå¢åŠ æ›´å¤šå†…å­˜å…±äº«å†²çªã€‚</p>
</li>
</ul>
</li>
<li>
<p>ä¹±ç”¨çš„ä¾‹å­</p>
<ul>
<li>é€ƒé¿é—®é¢˜</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">foo</span>(s: &amp;<span class="hljs-type">String</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span> = s.<span class="hljs-title function_ invoke__">clone</span>(); <span class="hljs-comment">// é€ƒç”Ÿå‘½å‘¨æœŸé—®é¢˜</span>
}
</code></pre>
<p>è¯´æ˜ï¼šä¸€èˆ¬æ²¡é—®é¢˜ï¼Œä½†æ˜¯å±äºé€ƒé¿é—®é¢˜ï¼Œé¿å¼€rustç”Ÿå‘½å‘¨æœŸæ£€æŸ¥</p>
<ul>
<li>
<p>å¾ªç¯å†…clone,é€ æˆæ€§èƒ½ç¾éš¾</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">for</span> <span class="hljs-variable">_</span> <span class="hljs-keyword">in</span> <span class="hljs-number">0</span>..<span class="hljs-number">10000</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v2</span> = v.<span class="hljs-title function_ invoke__">clone</span>(); <span class="hljs-comment">// å¤§å¯¹è±¡å‘é‡å¤åˆ¶ä¸€ä¸‡æ¬¡</span>
}
</code></pre>
</li>
</ul>
</li>
</ul>
<h4 data-id="heading-4">1.2ã€æ•´æ•°æº¢å‡ºï¼ˆwrappingï¼‰</h4>
<p>è¿™ä¸ªä¸€å‡ºï¼Œåœ¨Debug æ¨¡å¼ä¸‹ä¼š panicï¼Œä½†æ˜¯åœ¨ <strong>Release</strong> æ¨¡å¼ä¸‹ï¼Œæ•´æ•°ç®—æœ¯ä¼š<strong>ç¯ç»•</strong> (wrapping) è€Œä¸æŠ¥é”™ï¼Œå¯¼è‡´ç»“æœä¸æ­£ç¡®ï¼ˆé€»è¾‘é”™è¯¯ï¼‰ã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">size</span> = a * b;  <span class="hljs-comment">// æº¢å‡º</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">ptr</span> = <span class="hljs-title function_ invoke__">alloc</span>(size);  <span class="hljs-comment">// sizeå¯èƒ½æ˜¯è´Ÿæ•°ï¼Œ0ç­‰ï¼Œåˆ†é…é”™è¯¯å¤§å°ï¼Œ å†…å­˜è¢«ç ´å</span>
</code></pre>
<p>å¯ä»¥ç”¨ä¸‹é¢æ–¹æ¡ˆæ›¿ï¼Œï¼ˆä¹Ÿæœ‰ä¹˜é™¤ç­‰ç±»ä¼¼çš„apiï¼Œå¯ä»¥é—®ä¸‹aiï¼Œå¾ˆå®¹æ˜“æŸ¥åˆ°ï¼‰ï¼š</p>
<ul>
<li>
<p><code>checked_add</code>ï¼Œæº¢å‡ºåˆ™è¿”å›Noneï¼Œå®‰å…¨åœ°å¤±è´¥</p>
</li>
<li>
<p><code>overflowing_add</code>ï¼Œä¼šè¿”å›å¸ƒå°”å€¼æŠ¥å‘Šæ˜¯å¦æœ‰æº¢å‡º</p>
</li>
<li>
<p><code>saturating_add</code>ï¼šæº¢å‡ºçš„è¯ä¼šé™åˆ¶åˆ°æœ€å¤§æˆ–è€…æœ€å°å€¼ä¸Šï¼Œä¸ä¼špainicå’Œç¯ç»•</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">safe_overflow_demo</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">max</span> = <span class="hljs-type">i32</span>::MAX;
    <span class="hljs-keyword">match</span> max.<span class="hljs-title function_ invoke__">checked_add</span>(<span class="hljs-number">1</span>) {
        <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v={}"</span>, v),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"overflow detected"</span>), <span class="hljs-comment">//overflow detected</span>
    }
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-5">2ã€ä¸­å±é™©</h3>
<p>è¿è¡Œçš„æ—¶å€™å´©æºƒç­‰ï¼Œéƒ½æ˜¯å¯é¢„æœŸçš„ï¼Œä¸ä¼šç ´åå†…å­˜ç»“æ„å’Œç¼–è¯‘å™¨å‡è®¾çš„è§„åˆ™ã€‚</p>
<h4 data-id="heading-6">2.1ã€expect()</h4>
<p>å®ƒ<code>unwrap()</code> ä¸€æ ·ä¼š panicï¼Œåªæ˜¯èƒ½è‡ªå®šä¹‰é”™è¯¯ä¿¡æ¯ã€‚ç”¨äºç”¨äºå¿«é€ŸåŸå‹å’ŒDemoï¼Œä½†çº¿ä¸Šä¸åº”è¯¥ä½¿ç”¨ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨ä½¿ç”¨ <code>?</code>è€…æ˜¾å¼é”™è¯¯å¤„ç†ï¼ˆ<code>match</code>ã€<code>map_err</code>ï¼‰</p>
<ul>
<li>
<p>demo</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">expect_demo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">num</span>: <span class="hljs-type">i32</span> = <span class="hljs-string">"abc"</span>.<span class="hljs-title function_ invoke__">parse</span>().<span class="hljs-title function_ invoke__">map_err</span>(|e| e.<span class="hljs-title function_ invoke__">to_string</span>())?; <span class="hljs-comment">// æ­£ç¡®å¤„ç†é”™è¯¯</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"num = {}"</span>, num);
    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-7">2.2ã€ panic!()</h4>
<p>è°ƒç”¨è¿™ä¸ªAPIç¨‹åºç«‹åˆ»å´©æºƒï¼Œç”Ÿæˆ unwindingï¼ˆé™¤é panic=abortï¼‰ã€‚ä¸€èˆ¬è°ƒè¯•æ—¶ä½¿ç”¨ã€‚ä¸é€‚åˆç”Ÿäº§ç³»ç»Ÿæµç¨‹æ§åˆ¶ã€‚å¯ä»¥ç”¨ <code>Result&lt;T, E&gt;</code> è¿”å›é”™è¯¯ï¼Œæˆ–è€…ä½¿ç”¨é”™è¯¯åº“ï¼š<code>thiserror</code>ã€<code>anyhow</code>ï¼Œä¹‹å‰æ–‡ç« ä»‹ç»è¿‡ã€‚</p>
<ul>
<li>Demo</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">safe_panic_demo</span>(input: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">i32</span>, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">match</span> input {
        <span class="hljs-title function_ invoke__">Some</span>(v) =&gt; <span class="hljs-title function_ invoke__">Ok</span>(v),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-title function_ invoke__">Err</span>(<span class="hljs-string">"input is None"</span>.<span class="hljs-title function_ invoke__">to_string</span>()),
    }
}
</code></pre>
<h4 data-id="heading-8">2.3ã€æ•°ç»„è¶Šç•Œ</h4>
<p>è¿™ä¸ªæœ‰ä¸¤ç§æ“ä½œï¼š ä½¿ç”¨ <code>[]</code> (Panic)æ˜¯safeè¶Šç•Œ ï¼Œä½¿ç”¨ <code>get_unchecked()</code>æˆ–è€…<code>*v.as_ptr().add(i)</code> unsafeæ“ä½œå¯èƒ½å¯¼è‡´UBã€‚æ®è¯´è¶Šç•Œè®¿é—®æ˜¯Rustæœ€å¸¸è§çš„UBæ¥æºã€‚</p>
<ul>
<li>
<p>Demo</p>
<pre><code class="hljs language-Rust" lang="Rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">main</span>() {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">v</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-built_in">vec!</span>[<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>];
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">index_safe</span>: <span class="hljs-type">usize</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">index_oob</span>: <span class="hljs-type">usize</span> = <span class="hljs-number">5</span>; <span class="hljs-comment">// è¶Šç•Œç´¢å¼•ï¼Œæœ‰æ•ˆèŒƒå›´æ˜¯ 0..3</span>

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"--- 1. å®‰å…¨è®¿é—®æ–¹æ³• (Safe Access) ---"</span>);

    <span class="hljs-comment">// 1.1. `v.get(x)` -&gt; è¿”å› `Option&lt;T&gt;`ï¼Œå®‰å…¨åœ°å¤„ç†è¶Šç•Œ</span>
    <span class="hljs-keyword">match</span> v.<span class="hljs-title function_ invoke__">get</span>(index_safe) {
        <span class="hljs-title function_ invoke__">Some</span>(val) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v.get({}) (å®‰å…¨, æœ‰æ•ˆ): {}"</span>, index_safe, val),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v.get({}) (å®‰å…¨, è¶Šç•Œ): è¿”å› None"</span>, index_safe),
    }

    <span class="hljs-keyword">match</span> v.<span class="hljs-title function_ invoke__">get</span>(index_oob) {
        <span class="hljs-title function_ invoke__">Some</span>(val) =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v.get({}) (å®‰å…¨, æœ‰æ•ˆ): {}"</span>, index_oob, val),
        <span class="hljs-literal">None</span> =&gt; <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v.get({}) (å®‰å…¨, è¶Šç•Œ): è¿”å› None, ç¨‹åºç»§ç»­"</span>, index_oob),
    }

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"\n--- 2. è¿è¡Œæ—¶æ£€æŸ¥è®¿é—®æ–¹æ³• (Runtime Panic) ---"</span>);

    <span class="hljs-comment">// 2.1. `v[x]` -&gt; è¶Šç•Œæ—¶è§¦å‘ `panic!`ï¼Œä¸­æ­¢ç¨‹åº</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"v[{}] (å®‰å…¨, æœ‰æ•ˆ): {}"</span>, index_safe, v[index_safe]);

    <span class="hljs-comment">// å–æ¶ˆæ³¨é‡Šä¸‹æ–¹ä»£ç å—ä»¥è§‚å¯Ÿ panic! è¡Œä¸º</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"å°è¯• v[{}] (è¶Šç•Œ, panic)..."</span>, index_oob);
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">_val_panic</span> = v[index_oob]; <span class="hljs-comment">//index out of bounds: the len is 3 but the index is 5</span>
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"æ­¤è¡Œä¸ä¼šè¢«æ‰§è¡Œ"</span>);
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-9">3ã€æåº¦å±é™©</h3>
<p>åŒ…å« è·³è¿‡æ£€æŸ¥å–å€¼ï¼ŒåŸå§‹æŒ‡é’ˆï¼ˆ*mut Tã€*const Tï¼‰æ“ä½œï¼ˆunsafeæ“ä½œå°±ä¸ä»‹ç»äº†ï¼‰ç­‰</p>
<h4 data-id="heading-10">3.1ã€unwrap_unchecked()</h4>
<p>è¿™ä¸ªæ“ä½œ<strong>è·³è¿‡æ£€æŸ¥</strong>ï¼Œç›´æ¥å–å€¼ï¼Œ<strong>å¦‚æœæ˜¯ None ä¼šå¯¼è‡´ UBï¼ˆæœªå®šä¹‰è¡Œä¸ºï¼‰</strong>ï¼Œä¸æ˜¯æ™®é€š panicã€‚ä¸»è¦åœ¨æå°‘æ•°é«˜æ€§èƒ½åœºæ™¯ï¼Œå¦‚ç¼–è¯‘å™¨å†…éƒ¨ã€æ‰‹å·¥ä¼˜åŒ–ä»£ç ã€‚</p>
<ul>
<li>
<p>æ›¿ä»£æ–¹æ¡ˆ</p>
<ul>
<li>
<p>ä¸æ¨èä½¿ç”¨ï¼Œ99.9% æƒ…å†µä¸éœ€è¦ã€‚</p>
</li>
<li>
<p>ä½¿ç”¨æ™®é€š <code>unwrap()</code> å’Œå¼€å‘ç¯å¢ƒ panic æ›´å®‰å…¨ã€‚</p>
</li>
</ul>
</li>
<li>
<p>Demoï¼ˆä»…ç¤ºæ„ï¼Œä¸è¦ç”¨ï¼‰</p>
</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">unsafe</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">unchecked_demo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">i32</span> {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span>: <span class="hljs-type">Option</span>&lt;<span class="hljs-type">i32</span>&gt; = <span class="hljs-title function_ invoke__">Some</span>(<span class="hljs-number">10</span>);
    x.<span class="hljs-title function_ invoke__">unwrap_unchecked</span>()
}
</code></pre>
<h4 data-id="heading-11">3.2ã€ mem::transmute</h4>
<p><code>mem::transmute</code> è¢«è®¤ä¸ºæ˜¯æåº¦å±é™©ï¼ˆRust unsafe ä¸­æœ€å±é™©çš„ä¹‹ä¸€ï¼‰ã€‚å®ƒä¼š <strong>å®Œå…¨è·³è¿‡ Rust çš„ç±»å‹ç³»ç»Ÿ</strong>ï¼ŒæŠŠä¸€ä¸ªå€¼çš„ åŸå§‹å†…å­˜æ¯”ç‰¹å¼ºè¡Œè§£é‡Šæˆå¦ä¸€ç§ç±»å‹ï¼Œè€Œç¼–è¯‘å™¨ä¸ä¼šæ£€æŸ¥æ˜¯å¦åˆç†ã€‚é€‚ç”¨äºåº•å±‚ä¼˜åŒ–ã€ABI å¯¹æ¥ã€‚å¯ä»¥ç”¨æšä¸¾/ç»“æ„ä½“æ›¿ä»£è¡¨è¾¾ï¼Œè€…ç”¨ From / TryFromã€‚</p>
<ul>
<li>Demoï¼ˆå®‰å…¨æ›¿ä»£ç‰ˆï¼‰</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">safe_transmute_demo</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">u8</span>, <span class="hljs-type">String</span>&gt; {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">x</span>: <span class="hljs-type">i32</span> = <span class="hljs-number">150</span>;
    <span class="hljs-type">u8</span>::<span class="hljs-title function_ invoke__">try_from</span>(x).<span class="hljs-title function_ invoke__">map_err</span>(|_| <span class="hljs-string">"overflow"</span>.<span class="hljs-title function_ invoke__">to_string</span>())
}
</code></pre>
<ul>
<li>æ›¿ä»£æ–¹æ¡ˆè¡¨</li>
</ul>








































<table><thead><tr><th>æƒ³åšçš„äº‹</th><th>ä¸è¦ç”¨</th><th>åº”è¯¥ç”¨</th></tr></thead><tbody><tr><td>æ•°å­— â†’ å­—èŠ‚æ•°ç»„</td><td><code>transmute</code></td><td><code>.to_ne_bytes()</code></td></tr><tr><td>&amp;T â†’ &amp;U</td><td><code>transmute</code></td><td><code>reinterpret_cast</code> æ–¹æ¡ˆï¼š<code>ptr.cast()</code></td></tr><tr><td>ç±»å‹å®‰å…¨è½¬æ¢</td><td><code>transmute</code></td><td><code>From</code> / <code>Into</code> / <code>TryFrom</code></td></tr><tr><td>C ABI struct è½¬æ¢</td><td><code>transmute</code></td><td><code>#[repr(C)]</code> + æŒ‡é’ˆè½¬æ¢</td></tr><tr><td>Option&lt;Box&gt; ä¼˜åŒ–å¤§å°</td><td><code>transmute</code></td><td><code>Option::take</code> æˆ– <code>ManuallyDrop</code></td></tr><tr><td>æšä¸¾è¡¨ç¤ºï¼ˆdiscriminantï¼‰æ“ä½œ</td><td><code>transmute</code></td><td><code>std::mem::discriminant</code></td></tr></tbody></table>
<h2 data-id="heading-12">äºŒã€catch_unwindä¸ºä»€ä¹ˆæœ‰æ—¶å€™æ•è·ä¸åˆ°å´©æºƒ</h2>
<p>ä¸€èˆ¬ä½¿ç”¨panic::catch_unwindæ•è·panicï¼Œstd::panic::set_hookç”¨äºè®°å½•æ—¥å¿—å’Œå †æ ˆï¼ŒGDB/LLDBç­‰è®°å½•ç³»ç»Ÿå¤–çš„å´©æºƒã€‚åªæœ‰catch_unwindä¼šä¼˜é›…å¤„ç†é”™è¯¯ï¼Œä¿æŒæœåŠ¡è¿è¡Œï¼Œä¸»è¦è¯´ä¸‹è¿™ä¸ªã€‚</p>
<h3 data-id="heading-13">1ã€panic::catch_unwind æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<ul>
<li>
<p>panic å¯ä»¥ç†è§£æˆæ˜¯â€œå¼ºåˆ¶å¼‚å¸¸ + æ ˆå›é€€â€ï¼Œä»–ä¼šæ‰§è¡Œ æ ˆå±•å¼€ï¼ˆstack unwindingï¼‰ï¼Œé€å±‚ drop æ ˆä¸Šçš„å˜é‡ï¼Œè‹¥æ— æ³•ç»§ç»­å±•å¼€ï¼Œåˆ™è¿›ç¨‹ abortã€‚</p>
</li>
<li>
<p>Rustæ˜¯æ€ä¹ˆ â€œå±•å¼€â€ æ ˆçš„ï¼Œä»€ä¹ˆæ˜¯uwind</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">fn</span> <span class="hljs-title function_">a</span>() { <span class="hljs-title function_ invoke__">b</span>(); }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">b</span>() { <span class="hljs-title function_ invoke__">c</span>(); }
<span class="hljs-keyword">fn</span> <span class="hljs-title function_">c</span>() { <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"boom"</span>); }

<span class="hljs-title function_ invoke__">a</span>();
</code></pre>
<pre><code class="hljs language-markdown" lang="markdown">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  a()     â”‚
â””â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
<span class="hljs-code">    â”‚ calls
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  b()     â”‚
â””â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”˜
    â”‚ calls
â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
â”‚  c()     â”‚   â† panic å‘ç”Ÿ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</span></code></pre>
<p>unwindæ˜¯è¿™æ ·åšçš„:</p>
<ul>
<li>
<p>c() é€€å‡º â†’ drop c ä¸­çš„å˜é‡</p>
</li>
<li>
<p>å›åˆ° b() â†’ drop b ä¸­çš„å˜é‡</p>
</li>
<li>
<p>å›åˆ° a() â†’ drop a ä¸­çš„å˜é‡</p>
</li>
<li>
<p>è‹¥æŸå¤„æœ‰ <code>catch_unwind</code>ï¼Œåœæ­¢å›é€€</p>
</li>
<li>
<p>å¦åˆ™é€€åˆ°çº¿ç¨‹æ ¹å¹¶ç»“æŸçº¿ç¨‹</p>
</li>
</ul>
<p>æ¯ä¸€æ­¥éƒ½æ˜¯ <strong>æ ˆå¸§è¢«å¼¹å‡ºï¼ˆpop stack frameï¼‰</strong>ï¼Œå¹¶æ‰§è¡Œå¯¹åº”èµ„æºé‡Šæ”¾é€»è¾‘ã€‚</p>
<p>è¿™å°±æ˜¯ â€œå±•å¼€ï¼ˆunwindï¼‰â€ã€‚</p>
</li>
<li>
<p>å¢åŠ catch_unwind åï¼šå®ƒæ•è·å½“å‰çº¿ç¨‹ä¸­çš„ æ­£å¸¸ panic å±•å¼€ï¼ˆunwindï¼‰ï¼Œè¿”å› <code>Result&lt;(), Box&lt;dyn Any + Send&gt;&gt;</code></p>
</li>
</ul>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> std::panic;

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = panic::<span class="hljs-title function_ invoke__">catch_unwind</span>(|| {
    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"boom"</span>);
});

<span class="hljs-built_in">assert!</span>(result.<span class="hljs-title function_ invoke__">is_err</span>());
</code></pre>
<h3 data-id="heading-14">2ã€æ•è·ä¸åˆ°åœºæ™¯</h3>
<h4 data-id="heading-15">2.1ã€panic è¢«è®¾ç½®ä¸º abort</h4>
<p>Cargo.tomlï¼š</p>
<pre><code class="hljs language-toml" lang="toml"><span class="hljs-section">[profile.release]</span>
<span class="hljs-attr">panic</span> = <span class="hljs-string">"abort"</span>
</code></pre>
<p>è¿™æ—¶å€™ä»£ç æ—¢ä¸ unwindï¼Œä¹Ÿä¸æ‰§è¡Œ dropï¼Œè¿›ç¨‹ç›´æ¥ç»ˆæ­¢äº†ï¼Œcatch_unwind æ ¹æœ¬æ²¡æœºä¼šæ‰§è¡Œã€‚</p>
<h4 data-id="heading-16">2.2ã€è·¨è¯­è¨€</h4>
<p>panic å‘ç”Ÿåœ¨è·¨ FFIï¼å¤–éƒ¨åº“è¾¹ç•Œï¼Œå°¤å…¶æ˜¯ä¸é-Rust è¯­è¨€äº¤äº’ï¼ˆä¾‹å¦‚ C æˆ– C++ï¼‰æ—¶ â†’ unwind â†’ abort è¡Œä¸ºä¸ç¡®å®š â†’ catch_unwind æœªå¿…æ•è·åˆ°ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fdoc.rust-lang.org%2Fstd%2Fpanic%2Ffn.catch_unwind.html" target="_blank" title="https://doc.rust-lang.org/std/panic/fn.catch_unwind.html" ref="nofollow noopener noreferrer">doc.rust-lang.org/std/panic/fâ€¦</a></p>
<h4 data-id="heading-17">2.3ã€unsafe å¯¼è‡´çš„ UB å¯èƒ½ä¸è¢« catch_unwind æ•è·</h4>
<p>å½“åœ¨ <code>unsafe</code> ä¸­è§¦å‘ UBï¼ˆä¾‹å¦‚ç”¨è£¸æŒ‡é’ˆéæ³•è¯»å†™ã€æ‚¬å‚å¼•ç”¨ã€è¿åå€Ÿç”¨/åˆ«åè§„åˆ™ã€æ•°æ®ç«äº‰ã€å¯¹é½é”™è¯¯ç­‰ï¼‰â€”â€”è¿™åœ¨è¯­è¨€å±‚é¢æ²¡æœ‰å®šä¹‰è¯­ä¹‰ã€‚è¿™å¯èƒ½äº§ç”Ÿä»»æ„è¡Œä¸ºï¼šç¨‹åºæŒ‚æ‰ã€æ•°æ®ç ´æŸã€ç»§ç»­è¿è¡Œä½†çŠ¶æ€ç ´åã€å†…å­˜æ³„æ¼â€¦â€¦è¿™ç±»é”™è¯¯<strong>ä¸èµ° panic/unwind</strong> æœºåˆ¶ ï¼Œå®ƒä»¬ä¸æ˜¯ â€œpanic! unwindâ€ çš„æµç¨‹ã€‚UBæœ¬èº«ä»£è¡¨æœªå®šä¹‰çš„ç»“æœï¼Œä¸å¥½ç¡®å®šä»£ç æµç¨‹ï¼Œé‚£ä¹ˆä¹Ÿä¸ä¸€å®šæ•è·åˆ°ï¼Œå¤§æ¦‚ç‡æ•è·ä¸åˆ°ã€‚</p>
<h2 data-id="heading-18">ä¸‰ã€ç¬¬ä¸‰æ–¹æŠ“å–å·¥å…·</h2>
<h3 data-id="heading-19">1ã€FutureExt</h3>
<p>ç›¸æ¯”åŸç”Ÿçš„ï¼Œå®ƒå¯ä»¥ç›´æ¥åœ¨ async Future ä¸Šæ•è· panicï¼Œæ”¯æŒé“¾å¼æ‰“å°ç­‰ã€‚</p>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frust-lang%2Ffutures-rs%3Futm_source%3Dchatgpt.com" target="_blank" title="https://github.com/rust-lang/futures-rs?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">github.com/rust-lang/fâ€¦</a></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> futures::FutureExt; <span class="hljs-comment">// 0.3.5</span>

<span class="hljs-meta">#[tokio::test]</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">test_async</span>() <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;(), <span class="hljs-type">Box</span>&lt;<span class="hljs-keyword">dyn</span> std::error::Error&gt;&gt; {
    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"before catch_unwind"</span>);

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">may_panic</span> = <span class="hljs-keyword">async</span> {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"inside async catch_unwind"</span>);
        <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"this is error"</span>)
    };

    <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">async_result</span> = may_panic.<span class="hljs-title function_ invoke__">catch_unwind</span>().<span class="hljs-keyword">await</span>;

    <span class="hljs-built_in">println!</span>(<span class="hljs-string">"after catch_unwind"</span>);

    <span class="hljs-built_in">assert!</span>(async_result.<span class="hljs-title function_ invoke__">is_ok</span>());

    <span class="hljs-title function_ invoke__">Ok</span>(())
}
</code></pre>
<p>future å†…éƒ¨ çš„panic è¢« <code>catch_unwind</code> æ•è· è½¬ä¸º <code>Result::Err</code></p>
<h3 data-id="heading-20">2ã€tower httpçš„catch-panic</h3>
<p>ä¸­é—´ä»¶æ¥æ•è· handler ä¸­ panicï¼Œå¹¶ç»™å®¢æˆ·ç«¯è¿”å›åˆé€‚çš„ HTTP é”™è¯¯å“åº”ï¼ˆä¾‹å¦‚ 500ï¼‰</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.rs%2Ftower-http%2Flatest%2Ftower_http%2Fcatch_panic%2Findex.html" target="_blank" title="https://docs.rs/tower-http/latest/tower_http/catch_panic/index.html" ref="nofollow noopener noreferrer">docs.rs/tower-http/â€¦</a></p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">use</span> http::{Request, Response, header::HeaderName};
<span class="hljs-keyword">use</span> std::convert::Infallible;
<span class="hljs-keyword">use</span> tower::{Service, ServiceExt, ServiceBuilder, service_fn};
<span class="hljs-keyword">use</span> tower_http::catch_panic::CatchPanicLayer;
<span class="hljs-keyword">use</span> http_body_util::Full;
<span class="hljs-keyword">use</span> bytes::Bytes;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">handle</span>(req: Request&lt;Full&lt;Bytes&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;Response&lt;Full&lt;Bytes&gt;&gt;, Infallible&gt; {
    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"something went wrong..."</span>)
}

<span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">svc</span> = ServiceBuilder::<span class="hljs-title function_ invoke__">new</span>()
    <span class="hljs-comment">// Catch panics and convert them into responses.</span>
    .<span class="hljs-title function_ invoke__">layer</span>(CatchPanicLayer::<span class="hljs-title function_ invoke__">new</span>())
    .<span class="hljs-title function_ invoke__">service_fn</span>(handle);

<span class="hljs-comment">// Call the service.</span>
<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">request</span> = Request::<span class="hljs-title function_ invoke__">new</span>(Full::<span class="hljs-title function_ invoke__">default</span>());

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">response</span> = svc.<span class="hljs-title function_ invoke__">ready</span>().<span class="hljs-keyword">await</span>?.<span class="hljs-title function_ invoke__">call</span>(request).<span class="hljs-keyword">await</span>?;

<span class="hljs-built_in">assert_eq!</span>(response.<span class="hljs-title function_ invoke__">status</span>(), <span class="hljs-number">500</span>);
</code></pre>
<p>axumä¹Ÿå¯ç”¨å“ˆï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftokio-rs%2Faxum%2Fdiscussions%2F1865%3Futm_source%3Dchatgpt.com" target="_blank" title="https://github.com/tokio-rs/axum/discussions/1865?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">github.com/tokio-rs/axâ€¦</a></p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">tower-http</span> = { version = <span class="hljs-string">"0.5"</span>, features = [<span class="hljs-string">"catch-panic"</span>] }
</code></pre>
<p>ä»£ç ï¼š</p>
<pre><code class="hljs language-css" lang="css">  use tower_http::catch_panic::CatchPanicLayer;
  ...
   let app = Router::<span class="hljs-built_in">new</span>()
        .<span class="hljs-built_in">route</span>(<span class="hljs-string">"/"</span>, <span class="hljs-built_in">get</span>(ok_handler))
        .<span class="hljs-built_in">route</span>(<span class="hljs-string">"/panic"</span>, <span class="hljs-built_in">get</span>(panic_handler))
        // åŠ ä¸Š CatchPanicLayer
        .<span class="hljs-built_in">layer</span>(CatchPanicLayer::<span class="hljs-built_in">new</span>());
        ...
</code></pre>
<p>panicåˆ™è¿”å›HTTP 500 Internal Server Errorï¼ŒæœåŠ¡ä¸ä¼šé€€å‡ºã€‚</p>
<h3 data-id="heading-21">3ã€tokio::spawnè‡ªå¸¦çš„å·¥å…·</h3>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">handle</span> = tokio::<span class="hljs-title function_ invoke__">spawn</span>(<span class="hljs-keyword">async</span> {
    <span class="hljs-built_in">panic!</span>(<span class="hljs-string">"boom!"</span>);
});

<span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">result</span> = handle.<span class="hljs-keyword">await</span>;
<span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> <span class="hljs-keyword"/><span class="hljs-variable">Err</span>(join_err) = result {
    <span class="hljs-keyword">if</span> join_err.<span class="hljs-title function_ invoke__">is_panic</span>() {
        <span class="hljs-built_in">println!</span>(<span class="hljs-string">"panic caught!"</span>);
    }
}
</code></pre>
<p>æ¯ä¸ª Tokio ä»»åŠ¡éƒ½æ˜¯ç‹¬ç«‹æ‰§è¡Œï¼Œå¦‚æœä»»åŠ¡ panicï¼Œè¿”å› <code>JoinError</code></p>
<h2 data-id="heading-22">å››ã€æ€»ç»“</h2>
<p>æœ¬æ–‡æ€»ç»“äº†Rustä»£ç çš„å±é™©æ“ä½œï¼Œåœ¨æäº¤è¿‡ç¨‹ä¸­è¿˜å¯ä»¥å¢åŠ lintï¼Œé˜»æ­¢unwrapç­‰çš„æäº¤æˆ–è€…åŠ ç™½åå•ï¼ŒæœåŠ¡æœ¬èº«æ€§èƒ½å…è®¸çš„è¯ï¼Œè¿˜å¯ä»¥å…œåº•æŠ“å–å´©æºƒï¼Œèƒ½æŠ“åˆ°90%çš„panicã€‚å¦å¤–ï¼Œå¦‚æœæ˜¯åç«¯æœåŠ¡ï¼Œä»ç»éªŒçœ‹ï¼Œä¸€èˆ¬è¿˜æ¶‰åŠç°åº¦å‘å¸ƒï¼Œè‡ªåŠ¨å›æ»šï¼Œç†”æ–­ç­‰ç­‰ä¿æŠ¤æ€§æ“ä½œï¼ŒæœåŠ¡å´©æºƒä¼°è®¡æ˜¯å„ç§é—®é¢˜ç´¯åŠ ï¼Œä¸€ä¸ªunwrapä¼°è®¡æ²¡é‚£ä¹ˆå¤§å¨åŠ›ã€‚Rustå±é™©æ“ä½œå¯èƒ½è¿˜æœ‰åˆ«çš„ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</p>
<p>å¦‚æœè§‰å¾—æœ¬æ–‡æœ‰ç”¨ï¼Œè¾›è‹¦ç‚¹ä¸ªå…³æ³¨å§ï¼Œæœ¬äººå…¬ä¼—å·<em>å¤§é±¼ä¸ƒæˆé¥±</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ OpenTelemetry å¯¹ OpenResty è¿›è¡Œé“¾è·¯è¿½è¸ªæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7578700798744133666</link>    <guid>https://juejin.cn/post/7578700798744133666</guid>    <pubDate>2025-12-01T11:21:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578700798744133666" data-draft-id="7578700798744068130" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ OpenTelemetry å¯¹ OpenResty è¿›è¡Œé“¾è·¯è¿½è¸ªæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="ç›‘æ§"/> <meta itemprop="datePublished" content="2025-12-01T11:21:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘"/> <meta itemprop="url" content="https://juejin.cn/user/2392958212523102"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ OpenTelemetry å¯¹ OpenResty è¿›è¡Œé“¾è·¯è¿½è¸ªæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2392958212523102/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¯è§‚æµ‹æ€§ç”¨è§‚æµ‹äº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T11:21:19.000Z" title="Mon Dec 01 2025 11:21:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ OpenTelemetry å¯¹ OpenResty è¿›è¡Œé“¾è·¯è¿½è¸ªã€‚OpenResty æ˜¯ä¸€ä¸ªåŸºäº Nginx ä¸ LuaJIT çš„é«˜æ€§èƒ½ Web å¹³å°ï¼Œé€šè¿‡é›†æˆ Lua è„šæœ¬è¯­è¨€ï¼Œæä¾›äº†å¼ºå¤§çš„åŠ¨æ€å¤„ç†èƒ½åŠ›ã€‚OpenResty æ”¯æŒé€šè¿‡ ngx_otel_module æ¨¡å—é‡‡é›†è°ƒç”¨é“¾æ•°æ®ï¼Œå¹¶ç›´æ¥ä¸ŠæŠ¥è‡³è§‚æµ‹äº‘å¹³å°ã€‚</p>
<h2 data-id="heading-1">è§‚æµ‹äº‘</h2>
<p>è§‚æµ‹äº‘é‡‡é›†å™¨ DataKit æ”¯æŒ OpenTelemetry é‡‡é›†æ’ä»¶ï¼Œèƒ½å¤Ÿæ¥æ”¶ ngx_otel_module æ¨¡å—é“¾è·¯æ•°æ®å¹¶åœ¨å¹³å°ç»Ÿä¸€åˆ†æã€‚</p>
<h3 data-id="heading-2">éƒ¨ç½² DataKit</h3>
<p>ç™»å½•è§‚æµ‹äº‘æ§åˆ¶å°ï¼Œç‚¹å‡»ã€Œé›†æˆã€-ã€ŒDataKitã€-ã€ŒLinuxã€ï¼Œå¤åˆ¶å®‰è£…å‘½ä»¤åœ¨æœåŠ¡å™¨æ‰§è¡Œå³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/89345f3871564818902e8a4af6390340~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765192879&amp;x-signature=5uP9NAXFzOLtMHEit%2F0yPhSgo7M%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">å¼€å¯ OpenTelemetry æ’ä»¶</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># è¿›å…¥é‡‡é›†å™¨é…ç½®æ–‡ä»¶ç›®å½•</span>
<span class="hljs-built_in">cd</span> /usr/local/datakit/conf.d/samples
<span class="hljs-comment"># å¼€å¯é…ç½®æ–‡ä»¶</span>
<span class="hljs-built_in">cp</span> opentelemetry.conf.sample opentelemetry.conf
<span class="hljs-comment"># é‡å¯ Datakit</span>
datakit service -R
</code></pre>
<h2 data-id="heading-4">æ¥å…¥æ­¥éª¤</h2>
<h3 data-id="heading-5">æ„å»º ngx_otel_module æ¨¡å—</h3>
<ul>
<li>å®‰è£…æ„å»ºå·¥å…·å’Œä¾èµ–é¡¹</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino">sudo apt update

sudo apt install cmake build-essential libssl-dev zlib1g-dev libpcre3-dev

sudo apt install pkg-config libc-ares-dev libre2-dev <span class="hljs-meta"># for gRPC</span>
</code></pre>
<ul>
<li>ç¡®å®š OpenResty ä½¿ç”¨çš„ Nginx ç‰ˆæœ¬å’Œç¼–è¯‘é…ç½®</li>
</ul>

<pre><code class="hljs">openresty -V
</code></pre>
<p>ä»¥ä¸‹ä¸ºè¾“å‡ºç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">openresty -V
<span class="hljs-meta prompt_">#</span><span class="bash">nginx version: openresty/1.25.3.2</span>
<span class="hljs-meta prompt_">#</span><span class="bash">built with OpenSSL 1.1.1w  11 Sep 2023</span>
<span class="hljs-meta prompt_">#</span><span class="bash">TLS SNI support enabled</span>
<span class="hljs-meta prompt_">#</span><span class="bash">configure arguments: --prefix=/usr/local/openresty/nginx --with-cc-opt=<span class="hljs-string">'-O2 -DNGX_LUA_ABORT_AT_PANIC -I/usr/local/openresty/zlib/include -I/usr/local/openresty/pcre/include -I/usr/local/openresty/openssl111/include'</span> --add-module=../ngx_devel_kit-0.3.3 --add-module=../echo-nginx-module-0.63 --add-module=../xss-nginx-module-0.06 --add-module=../ngx_coolkit-0.2 --add-module=../set-misc-nginx-module-0.33 --add-module=../form-input-nginx-module-0.12 --add-module=../encrypted-session-nginx-module-0.09 --add-module=../srcache-nginx-module-0.33 --add-module=../ngx_lua-0.10.26 --add-module=../ngx_lua_upstream-0.07 --add-module=../headers-more-nginx-module-0.37 --add-module=../array-var-nginx-module-0.06 --add-module=../memc-nginx-module-0.20 --add-module=../redis2-nginx-module-0.15 --add-module=../redis-nginx-module-0.3.9 --add-module=../ngx_stream_lua-0.0.14 --with-ld-opt=<span class="hljs-string">'-Wl,-rpath,/usr/local/openresty/luajit/lib -L/usr/local/openresty/zlib/lib -L/usr/local/openresty/pcre/lib -L/usr/local/openresty/openssl111/lib -Wl,-rpath,/usr/local/openresty/zlib/lib:/usr/local/openresty/pcre/lib:/usr/local/openresty/openssl111/lib'</span> --with-pcre-jit --with-stream --with-stream_ssl_module --with-stream_ssl_preread_module --with-http_v2_module --with-http_v3_module --without-mail_pop3_module --without-mail_imap_module --without-mail_smtp_module --with-http_stub_status_module --with-http_realip_module --with-http_addition_module --with-http_auth_request_module --with-http_secure_link_module --with-http_random_index_module --with-http_gzip_static_module --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_slice_module --with-http_gunzip_module --with-threads --with-stream --without-pcre2 --with-http_ssl_module</span>
</code></pre>
<ul>
<li>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ Nginx æºç </li>
</ul>

<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/nginx/nginx.git
<span class="hljs-built_in">cd</span> nginx
git checkout {OPENRESTY_NGINX_VERSION}  <span class="hljs-comment"># åˆ‡æ¢åˆ°å¯¹åº”ç‰ˆæœ¬Tag</span>
</code></pre>
<p><code>{OPENRESTY_NGINX_VERSION}</code>Â æ›¿æ¢ä¸ºå¯¹åº”ç‰ˆæœ¬ Tagï¼Œä»¥ 1.25.3.2 ç‰ˆæœ¬ä¸ºä¾‹ï¼Œå¯¹åº”çš„ç‰ˆæœ¬ Tag ä¸ºÂ <code>release-1.25.3</code>ã€‚</p>
<ul>
<li>é…ç½® Nginx ç¼–è¯‘å‚æ•°</li>
</ul>
<p>åœ¨ nginx æºç æ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-scss" lang="scss">./auto/configure {NGINX_CONFIGURE_ARGUMENTS} <span class="hljs-attr">--with-compat</span> 
</code></pre>
<p><code>{NGINX_CONFIGURE_ARGUMENTS}</code>Â ä¸ºè·å–çš„ configure arguments å†…å®¹ï¼Œå¹¶ç§»é™¤ä¸Â <code>--add-module</code>Â ç›¸å…³çš„å‚æ•°é…ç½®ã€‚</p>
<ul>
<li>ä¸‹è½½ ngx_otel_module æ¨¡å—æºç </li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> ..
git <span class="hljs-built_in">clone</span> https://github.com/nginxinc/nginx-otel.git
<span class="hljs-built_in">cd</span> /nginx-otel
</code></pre>
<ul>
<li>ç¼–è¯‘ ngx_otel_module æ¨¡å—</li>
</ul>
<p>åˆ›å»ºå¹¶è¿›å…¥ build ç›®å½•è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å®Œæˆåä¼šåœ¨ build ç›®å½•ç”ŸæˆÂ <code>ngx_otel_module.so</code>Â æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> build
<span class="hljs-built_in">cd</span> build
cmake -DNGX_OTEL_NGINX_BUILD_DIR=/nginx/objs ..
make
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8992ddff6cc540d58b979318ad94fe2b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765192879&amp;x-signature=gBvn%2FWapzDil6IP1d9QLopHknno%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-6">å¯ç”¨ ngx_otel_module æ¨¡å—</h3>
<ul>
<li>å°†Â <code>ngx_otel_module.so</code>Â æ¨¡å—æ–‡ä»¶å¤åˆ¶åˆ° nginx modules ç›®å½•</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p /usr/local/openresty/nginx/modules/
<span class="hljs-built_in">cp</span> ngx_otel_module.so /usr/local/openresty/nginx/modules/
</code></pre>
<ul>
<li>é…ç½® nginx.conf</li>
</ul>
<p>ä¸º OpenResty å¯ç”¨é“¾è·¯è¿½è¸ªï¼Œæ‚¨éœ€è¦åœ¨ Nginx ä¸»é…ç½®æ–‡ä»¶Â <code>/usr/local/openresty/nginx/conf/nginx.conf</code>Â ä¸­åŠ è½½ ngx_otel_module æ¨¡å—å¹¶æ·»åŠ é…ç½®é¡¹ã€‚æ³¨æ„ ngx_otel_module æ¨¡å—ç›®å‰ä»…æ”¯æŒ gRPC æ–¹å¼ä¸ŠæŠ¥ï¼Œä¸æ”¯æŒ HTTP æ–¹å¼ä¸ŠæŠ¥ã€‚å…³äº ngx_otel_module æ¨¡å—çš„æ›´å¤šå‚æ•°é…ç½®ä¿¡æ¯ï¼Œè¯·å‚è€ƒÂ <a href="https://link.juejin.cn?target=https%3A%2F%2Fnginx.org%2Fen%2Fdocs%2Fngx_otel_module.html" target="_blank" title="https://nginx.org/en/docs/ngx_otel_module.html" ref="nofollow noopener noreferrer">nginx.org/en/docs/ngxâ€¦</a></p>
<pre><code class="hljs language-bash" lang="bash">load_module modules/ngx_otel_module.so; <span class="hljs-comment"># åŠ è½½ ngx_otel_module</span>
...
http {
    ...

    otel_exporter {
        endpoint <span class="hljs-string">"127.0.0.1:4317"</span>; <span class="hljs-comment">#  gRPC æ¥å…¥ç‚¹</span>
        <span class="hljs-comment">#header Authentication "${GRPC_TOKEN}"; # å‰ææ¡ä»¶ä¸­è·å–çš„é‰´æƒ Token</span>
    }

    otel_trace on;                     <span class="hljs-comment"># å¼€å¯é“¾è·¯è¿½è¸ª</span>
    otel_service_name openresty-otel;  <span class="hljs-comment"># åº”ç”¨å</span>
    otel_trace_context propagate;      <span class="hljs-comment"># å‘ä¸‹æ¸¸æœåŠ¡æ³¨å…¥Traceä¸Šä¸‹æ–‡</span>
    ...
}
</code></pre>
<ul>
<li>æ£€æŸ¥ nginx.conf é…ç½®æ˜¯å¦æ­£ç¡®</li>
</ul>

<pre><code class="hljs language-bash" lang="bash">/usr/local/openresty/nginx/sbin/nginx -t
</code></pre>
<p>å¦‚ä¸‹ï¼Œè¡¨æ˜é…ç½®æ— è¯¯</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">nginx:</span> the configuration file /usr/local/openresty/nginx/conf/nginx.conf syntax <span class="hljs-built_in">is</span> ok
<span class="hljs-symbol">nginx:</span> configuration file /usr/local/openresty/nginx/conf/nginx.conf test <span class="hljs-built_in">is</span> successful
</code></pre>
<ul>
<li>é‡è½½é…ç½®</li>
</ul>

<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ–¹å¼1: ä½¿ç”¨ openresty å‘½ä»¤é‡è½½é…ç½®</span>
openresty -s reload

<span class="hljs-comment"># æ–¹å¼2: ä½¿ç”¨ nginx å‘½ä»¤é‡è½½é…ç½®</span>
/usr/local/openresty/nginx/sbin/nginx -s reload
</code></pre>
<h3 data-id="heading-7">æ³¨æ„äº‹é¡¹</h3>
<p>å¦‚æœæ‰§è¡Œç¼–è¯‘ï¼Œå‡ºç°å¦‚å›¾æ‰€ç¤ºå¡ä½çš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ¡ˆè§£å†³ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42b2e5d9d0834801b930864b05269887~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765192879&amp;x-signature=MQD3KQGV6sk3O6so5jwcKbUff3s%3D" alt="" loading="lazy"/></p>
<ul>
<li>ç¡®ä¿ä½¿ç”¨å®Œå…¨ç›¸åŒçš„ nginx ç‰ˆæœ¬ã€‚</li>
<li>ä½¿ç”¨<code>nginx -V</code>Â æŸ¥çœ‹å½“å‰ nginx çš„ç¼–è¯‘å‚æ•°ã€‚</li>
<li>æ‰§è¡ŒÂ <code>openresty -V</code>Â æ£€æŸ¥Â <code>configure arguments</code>Â å‚æ•°æ˜¯å¦æ­£ç¡®ã€‚</li>
</ul>
<p>ç„¶åé‡æ–°ç¼–è¯‘å³å¯</p>
<h2 data-id="heading-8">æŸ¥çœ‹é“¾è·¯</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/269c8f6dcf4c414db40018bad587c876~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y-v6KeC5rWL5oCn55So6KeC5rWL5LqR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765192879&amp;x-signature=dh%2F2Ah4C9pI%2FZtrOXuXqavzqcIc%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>OpenRestyï¼ˆNginx+LuaJIT é«˜æ€§èƒ½ Web å¹³å°ï¼‰é€šè¿‡ ngx_otel_module æ¨¡å—é‡‡é›†è°ƒç”¨é“¾æ•°æ®ï¼Œç»è§‚æµ‹äº‘ DataKit é‡‡é›†å™¨çš„ OpenTelemetry é‡‡é›†å™¨æ¥æ”¶ï¼Œå®ç°é“¾è·¯è¿½è¸ªæ•°æ®åœ¨è§‚æµ‹äº‘å¹³å°çš„ç»Ÿä¸€åˆ†æä¸ŠæŠ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘å¿«é€ŸæŒæ¡ä½¿ç”¨NAPIè°ƒç”¨Cæ ‡å‡†åº“çš„åŠŸèƒ½]]></title>    <link>https://juejin.cn/post/7578667193321308223</link>    <guid>https://juejin.cn/post/7578667193321308223</guid>    <pubDate>2025-12-01T11:35:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578667193321308223" data-draft-id="7578705123208462379" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘å¿«é€ŸæŒæ¡ä½¿ç”¨NAPIè°ƒç”¨Cæ ‡å‡†åº“çš„åŠŸèƒ½"/> <meta itemprop="keywords" content="HarmonyOS,ArkTS,ArkUI"/> <meta itemprop="datePublished" content="2025-12-01T11:35:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¨å“¥çˆ±ç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/2242659450109575"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€é¸¿è’™å¼€å‘æ¡ˆä¾‹ç¯‡ã€‘å¿«é€ŸæŒæ¡ä½¿ç”¨NAPIè°ƒç”¨Cæ ‡å‡†åº“çš„åŠŸèƒ½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2242659450109575/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¨å“¥çˆ±ç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T11:35:04.000Z" title="Mon Dec 01 2025 11:35:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ V å“¥ã€‚ä»Šå¤©æˆ‘ä»¬æ¥æ·±å…¥æ¢è®¨åœ¨é¸¿è’™ 6.0ï¼ˆAPI 21ï¼‰å¼€å‘ä¸­ï¼Œå¦‚ä½•é€šè¿‡ NAPIï¼ˆNative APIï¼‰æ¡†æ¶è°ƒç”¨ C æ ‡å‡†åº“çš„åŠŸèƒ½ã€‚NAPI æ˜¯è¿æ¥ ArkTS åº”ç”¨å±‚ä¸ C/C++ åŸç”Ÿä»£ç çš„å…³é”®æ¡¥æ¢ï¼Œèƒ½å¤Ÿæœ‰æ•ˆæå‡è®¡ç®—å¯†é›†å‹ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡ã€‚</p>
<p>è”ç³»Vå“¥è·å– <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.huawei.com%2Fconsumer%2Fcn%2Ftraining%2FclassDetail%2F042cb1cc4d7d44ecbdbd902fd1275dcc%3Ftype%3D1%3Fha_source%3Dhmosclass%26ha_sourceId%3D89000248" target="_blank" title="https://developer.huawei.com/consumer/cn/training/classDetail/042cb1cc4d7d44ecbdbd902fd1275dcc?type=1?ha_source=hmosclass&amp;ha_sourceId=89000248" ref="nofollow noopener noreferrer">é¸¿è’™å­¦ä¹ èµ„æ–™</a></p>
<h3 data-id="heading-0">ä¸€ã€NAPI åŸºç¡€ä¸é¡¹ç›®ç»“æ„</h3>
<p><strong>æŠ€æœ¯æ¶æ„</strong>ï¼š<br/>
<code>ArkTS ä¸šåŠ¡å±‚ â†’ NAPI æ¥å£æ¡¥æ¥ â†’ C++ åŸç”Ÿé€»è¾‘ â†’ C æ ‡å‡†åº“å‡½æ•°</code><br/>
NAPI å°† ECMAScript æ ‡å‡†ä¸­çš„æ•°æ®ç±»å‹ï¼ˆå¦‚ Numberã€Stringã€Objectï¼‰ç»Ÿä¸€å°è£…ä¸º <code>napi_value</code> ç±»å‹ï¼Œå®ç°ä¸ C/C++ æ•°æ®ç±»å‹çš„åŒå‘è½¬æ¢ã€‚</p>
<p><strong>é¡¹ç›®ç»“æ„</strong>ï¼ˆNative C++ æ¨¡æ¿ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">entry/src/main/
â”œâ”€â”€ ets/
â”‚   â””â”€â”€ pages/
â”‚       â””â”€â”€ Index.ets          <span class="hljs-comment"># ArkTS äº¤äº’ç•Œé¢</span>
â”œâ”€â”€ cpp/
â”‚   â”œâ”€â”€ CMakeLists.txt         <span class="hljs-comment"># CMake ç¼–è¯‘é…ç½®</span>
â”‚   â”œâ”€â”€ hello.cpp             <span class="hljs-comment"># NAPI æ¨¡å—å®ç°</span>
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ libhello/
â”‚           â”œâ”€â”€ index.d.ts     <span class="hljs-comment"># ç±»å‹å£°æ˜æ–‡ä»¶</span>
â”‚           â””â”€â”€ oh-package.json5
</code></pre>
<h3 data-id="heading-1">äºŒã€ç¯å¢ƒé…ç½®ä¸ä¾èµ–æ³¨å…¥</h3>
<ol>
<li>
<p><strong>æ¨¡å—é…ç½®</strong>ï¼ˆ<code>oh-package.json5</code>ï¼‰<br/>
å£°æ˜ NAPI æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"libhello"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"file:./src/main/cpp/types/libhello"</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
</li>
<li>
<p><strong>CMake é…ç½®</strong>ï¼ˆ<code>CMakeLists.txt</code>ï¼‰<br/>
é“¾æ¥ C æ ‡å‡†åº“å¹¶æŒ‡å®šç¼–è¯‘ç›®æ ‡ï¼š</p>
<pre><code class="hljs language-cmake" lang="cmake">cmake_minimum_required(VERSION 3.12)
project(hello) 
add_library(hello SHARED hello.cpp)
target_link_libraries(hello PUBLIC libc.so)  # é“¾æ¥ C æ ‡å‡†åº“
</code></pre>
</li>
</ol>
<h3 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒå®ç°ï¼šä» C æ ‡å‡†åº“åˆ° ArkTS</h3>
<h4 data-id="heading-3">æ­¥éª¤ 1ï¼šC++ ä¾§å®ç° NAPI æ¥å£ï¼ˆ<code>hello.cpp</code>ï¼‰</h4>
<p>é€šè¿‡ <code>hypot</code> å‡½æ•°ï¼ˆC æ ‡å‡†åº“æ•°å­¦å‡½æ•°ï¼‰æ¼”ç¤ºå¹³æ–¹å’Œè®¡ç®—ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;cmath&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"napi/native_node_api.h"</span></span>

<span class="hljs-comment">// 1. å°è£… C æ ‡å‡†åº“å‡½æ•°</span>
<span class="hljs-function"><span class="hljs-type">static</span> napi_value <span class="hljs-title">CalculateHypot</span><span class="hljs-params">(napi_env env, napi_callback_info info)</span> </span>{
    napi_value result;
    <span class="hljs-built_in">napi_get_undefined</span>(env, &amp;result);
    
    <span class="hljs-comment">// 2. è§£æ ArkTS ä¼ é€’çš„å‚æ•°</span>
    <span class="hljs-type">size_t</span> argc = <span class="hljs-number">2</span>;
    napi_value args;
    <span class="hljs-built_in">napi_get_cb_info</span>(env, info, &amp;argc, args, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>);
    
    <span class="hljs-comment">// 3. ç±»å‹è½¬æ¢ï¼šnapi_value â†’ C double</span>
    <span class="hljs-type">double</span> a, b;
    <span class="hljs-built_in">napi_get_value_double</span>(env, args, &amp;a);
    <span class="hljs-built_in">napi_get_value_double</span>(env, args, &amp;b);
    
    <span class="hljs-comment">// 4. è°ƒç”¨ C æ ‡å‡†åº“å‡½æ•°</span>
    <span class="hljs-type">double</span> hypot_result = <span class="hljs-built_in">hypot</span>(a, b);
    
    <span class="hljs-comment">// 5. è¿”å›ç»“æœç»™ ArkTSï¼šC double â†’ napi_value</span>
    <span class="hljs-built_in">napi_create_double</span>(env, hypot_result, &amp;result);
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// 6. æ¨¡å—å¯¼å‡ºå£°æ˜</span>
<span class="hljs-function">EXTERN_C_START
<span class="hljs-type">static</span> napi_value <span class="hljs-title">Init</span><span class="hljs-params">(napi_env env, napi_value exports)</span> </span>{
    napi_property_descriptor desc[] = {
        {<span class="hljs-string">"calculateHypot"</span>, <span class="hljs-literal">nullptr</span>, CalculateHypot, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>, <span class="hljs-literal">nullptr</span>, napi_default, <span class="hljs-literal">nullptr</span>}
    };
    <span class="hljs-built_in">napi_define_properties</span>(env, exports, <span class="hljs-built_in">sizeof</span>(desc) / <span class="hljs-built_in">sizeof</span>(desc), desc);
    <span class="hljs-keyword">return</span> exports;
}
EXTERN_C_END
</code></pre>
<h4 data-id="heading-4">æ­¥éª¤ 2ï¼šç±»å‹å£°æ˜æ–‡ä»¶ï¼ˆ<code>index.d.ts</code>ï¼‰</h4>
<p>ä¸º ArkTS æä¾›ç±»å‹æç¤ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">calculateHypot</span>: <span class="hljs-function">(<span class="hljs-params">a: <span class="hljs-built_in">number</span>, b: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;
</code></pre>
<h4 data-id="heading-5">æ­¥éª¤ 3ï¼šArkTS è°ƒç”¨å±‚ï¼ˆ<code>Index.ets</code>ï¼‰</h4>
<p>åœ¨ UI ä¸­é›†æˆåŸç”Ÿè®¡ç®—èƒ½åŠ›ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { calculateHypot } <span class="hljs-keyword">from</span> <span class="hljs-string">'libhello'</span>;

<span class="hljs-meta">@Entry</span>
<span class="hljs-meta">@Component</span>
struct <span class="hljs-title class_">NAPIDemo</span> {
  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputA</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">3.0</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">inputB</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">4.0</span>;
  <span class="hljs-meta">@State</span> <span class="hljs-attr">result</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;

  <span class="hljs-title function_">build</span>(<span class="hljs-params"/>) {
    <span class="hljs-title class_">Column</span>() {
      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¾“å…¥æ•°å€¼ A'</span> })
        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputA</span> = <span class="hljs-built_in">parseFloat</span>(value))
      <span class="hljs-title class_">TextInput</span>({ <span class="hljs-attr">placeholder</span>: <span class="hljs-string">'è¾“å…¥æ•°å€¼ B'</span> })
        .<span class="hljs-title function_">onChange</span>(<span class="hljs-function">(<span class="hljs-params">value: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputB</span> = <span class="hljs-built_in">parseFloat</span>(value))
      
      <span class="hljs-title class_">Button</span>(<span class="hljs-string">'è®¡ç®—å¹³æ–¹æ ¹'</span>)
        .<span class="hljs-title function_">onClick</span>(<span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// è°ƒç”¨ NAPI å°è£…çš„ C æ ‡å‡†åº“å‡½æ•°</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">result</span> = <span class="hljs-title function_">calculateHypot</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">inputA</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">inputB</span>);
        })
      
      <span class="hljs-title class_">Text</span>(<span class="hljs-string">`ç»“æœ: <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.result}</span>`</span>)
        .<span class="hljs-title function_">fontSize</span>(<span class="hljs-number">20</span>)
    }
  }
}
</code></pre>
<h3 data-id="heading-6">å››ã€å…³é”®æŠ€æœ¯ä¸å¼‚å¸¸å¤„ç†</h3>
<ol>
<li>
<p><strong>æ•°æ®ç±»å‹è½¬æ¢å¯¹ç…§è¡¨</strong></p>






























<table><thead><tr><th>C/C++ ç±»å‹</th><th>NAPI è½¬æ¢æ¥å£</th><th>ArkTS ç±»å‹</th></tr></thead><tbody><tr><td><code>double</code></td><td><code>napi_create_double()</code></td><td><code>number</code></td></tr><tr><td><code>int32_t</code></td><td><code>napi_create_int32()</code></td><td><code>number</code></td></tr><tr><td><code>char*</code></td><td><code>napi_create_string_utf8()</code></td><td><code>string</code></td></tr><tr><td><code>bool</code></td><td><code>napi_get_boolean()</code></td><td><code>boolean</code></td></tr></tbody></table>
</li>
<li>
<p><strong>é”™è¯¯å¤„ç†æœºåˆ¶</strong><br/>
åœ¨ C++ ä¾§æ·»åŠ  NAPI çŠ¶æ€æ£€æŸ¥ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">napi_status status = <span class="hljs-built_in">napi_get_value_double</span>(env, args, &amp;a);
<span class="hljs-keyword">if</span> (status != napi_ok) {
    <span class="hljs-built_in">napi_throw_error</span>(env, <span class="hljs-literal">nullptr</span>, <span class="hljs-string">"å‚æ•°è§£æå¤±è´¥"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}
</code></pre>
</li>
</ol>
<h3 data-id="heading-7">äº”ã€æ‰©å±•åœºæ™¯ï¼šå¼‚æ­¥è°ƒç”¨ä¸å›è°ƒå‡½æ•°</h3>
<p>å¯¹äºè€—æ—¶æ“ä½œï¼ˆå¦‚å›¾åƒå¤„ç†ï¼‰ï¼Œå¯é€šè¿‡ NAPI å®ç°å¼‚æ­¥è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">// åœ¨ C++ ä¾§åˆ›å»ºå¼‚æ­¥å·¥ä½œçº¿ç¨‹</span>
<span class="hljs-built_in">napi_create_async_work</span>(
    env, <span class="hljs-literal">nullptr</span>, resource_name,
    [](napi_env env, <span class="hljs-type">void</span>* data) {
        <span class="hljs-comment">// å­çº¿ç¨‹ä¸­æ‰§è¡Œ C æ ‡å‡†åº“å‡½æ•°</span>
    },
    [](napi_env env, napi_status status, <span class="hljs-type">void</span>* data) {
        <span class="hljs-comment">// å›è°ƒ ArkTS ä¼ é€’çš„ Promise å¯¹è±¡</span>
        <span class="hljs-built_in">napi_resolve_deferred</span>(env, deferred, result);
    },
    data, &amp;async_work
);
</code></pre>
<h3 data-id="heading-8">å…­ã€è°ƒè¯•ä¸æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
<ol>
<li>
<p><strong>æ—¥å¿—è¾“å‡º</strong><br/>
ä½¿ç”¨ <code>hilog</code> åœ¨ C++ ä¾§æ‰“å°è°ƒè¯•ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;hilog/log.h&gt;</span></span>
<span class="hljs-built_in">OH_LOG_Print</span>(LOG_APP, LOG_INFO, <span class="hljs-number">0</span>, <span class="hljs-string">"NAPI"</span>, <span class="hljs-string">"è®¡ç®—ç»“æœ: %f"</span>, hypot_result);
</code></pre>
</li>
<li>
<p><strong>å†…å­˜ç®¡ç†</strong></p>
<ul>
<li>é¿å…åœ¨å¾ªç¯ä¸­é¢‘ç¹åˆ›å»º <code>napi_value</code> å¯¹è±¡</li>
<li>ä½¿ç”¨ <code>napi_create_reference()</code> ç®¡ç†é•¿æœŸæŒæœ‰çš„å¯¹è±¡</li>
</ul>
</li>
</ol>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>é€šè¿‡ NAPI è°ƒç”¨ C æ ‡å‡†åº“çš„æ ¸å¿ƒæ­¥éª¤åŒ…æ‹¬ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒé…ç½®</strong>ï¼šå£°æ˜æ¨¡å—ä¾èµ–ä¸ CMake ç¼–è¯‘è§„åˆ™</li>
<li><strong>æ¡¥æ¥å®ç°</strong>ï¼šåœ¨ C++ ä¸­å°è£…åŸç”Ÿå‡½æ•°å¹¶å¤„ç†ç±»å‹è½¬æ¢</li>
<li><strong>ç±»å‹å£°æ˜</strong>ï¼šæä¾› ArkTS å¯è¯†åˆ«çš„æ¥å£å®šä¹‰</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šæ·»åŠ çŠ¶æ€æ£€æŸ¥ä¸é”™è¯¯æŠ›å‡ºæœºåˆ¶</li>
</ol>
<p>æˆ‘æ˜¯ V å“¥ï¼Œä¸‹æœŸå°†è§£æå¦‚ä½•é€šè¿‡ NAPI å®ç° ArkTS ä¸ C++ é—´çš„å¤æ‚å¯¹è±¡ä¼ é€’ï¼ˆå¦‚ç»“æ„ä½“ä¸å›è°ƒå‡½æ•°ï¼‰ã€‚å…³æ³¨æˆ‘çš„ä¸“æ ï¼Œè§£é”æ›´å¤šé¸¿è’™åº•å±‚å¼€å‘æŠ€å·§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 + Element Plus åŠ¨æ€èœå•å®ç°ï¼šä¸€å¥—ä»£ç å®Œç¾é€‚é…å¤šè§’è‰²æƒé™ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7578724773993054234</link>    <guid>https://juejin.cn/post/7578724773993054234</guid>    <pubDate>2025-12-01T11:50:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578724773993054234" data-draft-id="7571156741398085647" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 + Element Plus åŠ¨æ€èœå•å®ç°ï¼šä¸€å¥—ä»£ç å®Œç¾é€‚é…å¤šè§’è‰²æƒé™ç³»ç»Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-01T11:50:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åˆ˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 + Element Plus åŠ¨æ€èœå•å®ç°ï¼šä¸€å¥—ä»£ç å®Œç¾é€‚é…å¤šè§’è‰²æƒé™ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åˆ˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T11:50:04.000Z" title="Mon Dec 01 2025 11:50:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä»Šå¤©åˆ†äº«ä¸€ä¸ªåŸºäº<code>Vue3</code>å’Œ<code>Element Plus</code>çš„åŠ¨æ€èœå•å®ç°ã€‚è¿™ä¸ªæ–¹æ¡ˆå¾ˆé€‚ç”¨äºéœ€è¦æƒé™ç®¡ç†çš„åå°ç³»ç»Ÿï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è§’è‰²æƒé™æ˜¾ç¤ºä¸åŒçš„èœå•é¡¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯åŠ¨æ€èœå•ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h2>
<p>åœ¨ç®¡ç†åå°ç³»ç»Ÿä¸­ï¼Œä¸åŒè§’è‰²çš„ç”¨æˆ·é€šå¸¸éœ€è¦ä¸åŒçš„åŠŸèƒ½æƒé™ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li><strong>ç®¡ç†å‘˜</strong>å¯ä»¥è®¿é—®æ‰€æœ‰åŠŸèƒ½</li>
<li><strong>ç¼–è¾‘è€…</strong>åªèƒ½ç®¡ç†å†…å®¹</li>
<li><strong>æŸ¥çœ‹è€…</strong>åªèƒ½æµè§ˆæ•°æ®</li>
</ul>
<p>å¦‚æœä¸ºæ¯ä¸ªè§’è‰²å•ç‹¬å¼€å‘ä¸€å¥—ç•Œé¢ï¼Œæ˜¾ç„¶æ•ˆç‡ä½ä¸‹ã€‚åŠ¨æ€èœå•å°±æ˜¯è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ¡ˆâ€”â€”<strong>ä¸€å¥—ä»£ç ï¼Œæ ¹æ®ä¸åŒç”¨æˆ·è§’è‰²æ˜¾ç¤ºä¸åŒçš„èœå•ç»“æ„</strong>ã€‚</p>
<h2 data-id="heading-1">äºŒã€å®ç°æ•ˆæœé¢„è§ˆ</h2>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€ç»ˆå®ç°çš„æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9e65b9effe094807867ef7545805b986~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YiY5aSn5Y2O:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765194604&amp;x-signature=LmKZo9onERrMXzvgEpUnpE%2BrGNg%3D" alt="1åŠ¨æ€èœå•3.png" loading="lazy"/></p>
<ol>
<li><strong>è§’è‰²åˆ‡æ¢</strong>ï¼šå³ä¸Šè§’å¯ä»¥åˆ‡æ¢ç”¨æˆ·è§’è‰²ï¼ˆç®¡ç†å‘˜/ç¼–è¾‘è€…/æŸ¥çœ‹è€…ï¼‰</li>
<li><strong>èœå•è¿‡æ»¤</strong>ï¼šæ ¹æ®è§’è‰²è‡ªåŠ¨è¿‡æ»¤æ— æƒé™çš„èœå•é¡¹</li>
<li><strong>ä¾§è¾¹æ æŠ˜å </strong>ï¼šæ”¯æŒå±•å¼€/æ”¶èµ·ä¾§è¾¹æ </li>
<li><strong>é¢åŒ…å±‘å¯¼èˆª</strong>ï¼šæ˜¾ç¤ºå½“å‰é¡µé¢ä½ç½®</li>
</ol>
<p>è€æ ·å­ï¼Œå®Œæ•´æºç åœ¨æ–‡æœ«è·å–å“¦~</p>
<h2 data-id="heading-2">ä¸‰ã€æ ¸å¿ƒå®ç°åŸç†</h2>
<h3 data-id="heading-3">1. èœå•æ•°æ®ç»“æ„è®¾è®¡</h3>
<p>åˆç†çš„èœå•æ•°æ®ç»“æ„æ˜¯åŠ¨æ€èœå•çš„åŸºç¡€ã€‚æˆ‘ä»¬çš„è®¾è®¡å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> menuData = <span class="hljs-title function_">ref</span>([
  {
    <span class="hljs-attr">id</span>: <span class="hljs-string">'dashboard'</span>,        <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span>
    <span class="hljs-attr">name</span>: <span class="hljs-string">'ä»ªè¡¨æ¿'</span>,         <span class="hljs-comment">// æ˜¾ç¤ºåç§°</span>
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'DataBoard'</span>,      <span class="hljs-comment">// å›¾æ ‡</span>
    <span class="hljs-attr">route</span>: <span class="hljs-string">'/dashboard'</span>,    <span class="hljs-comment">// è·¯ç”±è·¯å¾„</span>
    <span class="hljs-attr">roles</span>: [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>, <span class="hljs-string">'viewer'</span>]  <span class="hljs-comment">// å¯è®¿é—®çš„è§’è‰²</span>
  },
  {
    <span class="hljs-attr">id</span>: <span class="hljs-string">'content'</span>,
    <span class="hljs-attr">name</span>: <span class="hljs-string">'å†…å®¹ç®¡ç†'</span>,
    <span class="hljs-attr">icon</span>: <span class="hljs-string">'Document'</span>,
    <span class="hljs-attr">roles</span>: [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>],
    <span class="hljs-attr">children</span>: [             <span class="hljs-comment">// å­èœå•</span>
      {
        <span class="hljs-attr">id</span>: <span class="hljs-string">'articles'</span>,
        <span class="hljs-attr">name</span>: <span class="hljs-string">'æ–‡ç« ç®¡ç†'</span>,
        <span class="hljs-attr">route</span>: <span class="hljs-string">'/articles'</span>,
        <span class="hljs-attr">roles</span>: [<span class="hljs-string">'admin'</span>, <span class="hljs-string">'editor'</span>]
      }
      <span class="hljs-comment">// ... æ›´å¤šå­èœå•</span>
    ]
  }
  <span class="hljs-comment">// ... æ›´å¤šèœå•é¡¹</span>
]);
</code></pre>
<p>è¿™ç§ç»“æ„çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li><strong>æ”¯æŒå¤šçº§åµŒå¥—èœå•</strong></li>
<li><strong>æ¯ä¸ªèœå•é¡¹æ˜ç¡®æŒ‡å®šå¯è®¿é—®çš„è§’è‰²</strong></li>
<li><strong>å›¾æ ‡ä½¿ç”¨ Element Plus çš„å›¾æ ‡ç»„ä»¶</strong></li>
</ul>
<h3 data-id="heading-4">2. èœå•è¿‡æ»¤é€»è¾‘</h3>
<p>æ ¸å¿ƒåŠŸèƒ½æ˜¯æ ¹æ®å½“å‰ç”¨æˆ·è§’è‰²è¿‡æ»¤èœå•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> filteredMenu = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> menuData.<span class="hljs-property">value</span>
    .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-comment">// 1. æ£€æŸ¥ä¸»èœå•æƒé™</span>
      <span class="hljs-keyword">if</span> (!item.<span class="hljs-property">roles</span>.<span class="hljs-title function_">includes</span>(currentUser.<span class="hljs-property">value</span>.<span class="hljs-property">role</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;  <span class="hljs-comment">// æ— æƒé™ï¼Œè¿‡æ»¤æ‰</span>
      }
      
      <span class="hljs-comment">// 2. æ·±æ‹·è´èœå•é¡¹ï¼ˆé¿å…ä¿®æ”¹åŸå§‹æ•°æ®ï¼‰</span>
      <span class="hljs-keyword">const</span> menuItem = { ...item };
      
      <span class="hljs-comment">// 3. å¦‚æœæœ‰å­èœå•ï¼Œè¿‡æ»¤å­èœå•</span>
      <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">children</span>) {
        menuItem.<span class="hljs-property">children</span> = menuItem.<span class="hljs-property">children</span>.<span class="hljs-title function_">filter</span>(
          <span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> child.<span class="hljs-property">roles</span>.<span class="hljs-title function_">includes</span>(currentUser.<span class="hljs-property">value</span>.<span class="hljs-property">role</span>)
        );
        
        <span class="hljs-comment">// å¦‚æœå­èœå•å…¨è¢«è¿‡æ»¤æ‰ï¼Œä¸»èœå•ä¹Ÿä¸æ˜¾ç¤º</span>
        <span class="hljs-keyword">if</span> (menuItem.<span class="hljs-property">children</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
      }
      
      <span class="hljs-keyword">return</span> menuItem;
    })
    .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>);  <span class="hljs-comment">// è¿‡æ»¤æ‰nullå€¼</span>
});
</code></pre>
<p><strong>è¿‡æ»¤è¿‡ç¨‹è¯¦è§£</strong>ï¼š</p>
<ol>
<li><strong>æ˜ å°„(map)</strong>ï¼šéå†æ¯ä¸ªèœå•é¡¹ï¼Œè¿”å›å¤„ç†åçš„èœå•é¡¹æˆ–null</li>
<li><strong>æƒé™æ£€æŸ¥</strong>ï¼šæ£€æŸ¥å½“å‰ç”¨æˆ·è§’è‰²æ˜¯å¦åœ¨èœå•é¡¹çš„è§’è‰²åˆ—è¡¨ä¸­</li>
<li><strong>å­èœå•è¿‡æ»¤</strong>ï¼šå¯¹æœ‰å­èœå•çš„é¡¹ï¼Œé€’å½’è¿‡æ»¤æ— æƒé™çš„å­é¡¹</li>
<li><strong>ç©ºå­èœå•å¤„ç†</strong>ï¼šå¦‚æœæ‰€æœ‰å­é¡¹éƒ½è¢«è¿‡æ»¤ï¼Œçˆ¶é¡¹ä¹Ÿä¸æ˜¾ç¤º</li>
<li><strong>æœ€ç»ˆè¿‡æ»¤</strong>ï¼šç”¨filter(Boolean)ç§»é™¤æ‰€æœ‰nullå€¼</li>
</ol>
<p><strong>è®¡ç®—å±æ€§(computed)çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨å“åº”ä¾èµ–å˜åŒ–ï¼ˆå½“ç”¨æˆ·è§’è‰²å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è®¡ç®—ï¼‰</li>
<li>ç¼“å­˜ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—</li>
</ul>
<h3 data-id="heading-5">3. ç”¨æˆ·è§’è‰²ç®¡ç†</h3>
<p>ç”¨æˆ·ä¿¡æ¯å’Œè§’è‰²åˆ‡æ¢çš„å®ç°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å½“å‰ç”¨æˆ·ä¿¡æ¯</span>
<span class="hljs-keyword">const</span> currentUser = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'ç®¡ç†å‘˜'</span>,
  <span class="hljs-attr">role</span>: <span class="hljs-string">'admin'</span>,
  <span class="hljs-attr">avatar</span>: <span class="hljs-string">'https://example.com/avatar.png'</span>
});

<span class="hljs-comment">// å¤„ç†è§’è‰²åˆ‡æ¢</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRoleChange</span> = (<span class="hljs-params">role</span>) =&gt; {
  currentUser.<span class="hljs-property">value</span>.<span class="hljs-property">role</span> = role;
  
  <span class="hljs-comment">// è§’è‰²åˆ‡æ¢åæ›´æ–°å½“å‰æ¿€æ´»çš„èœå•</span>
  <span class="hljs-keyword">if</span> (role === <span class="hljs-string">'viewer'</span>) {
    <span class="hljs-comment">// æŸ¥çœ‹è€…åªèƒ½è®¿é—®ä»ªè¡¨æ¿</span>
    activeMenu.<span class="hljs-property">value</span> = <span class="hljs-string">'/dashboard'</span>;
    currentPageTitle.<span class="hljs-property">value</span> = <span class="hljs-string">'ä»ªè¡¨æ¿'</span>;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// å…¶ä»–è§’è‰²æ˜¾ç¤ºç¬¬ä¸€ä¸ªå¯è®¿é—®çš„èœå•</span>
    <span class="hljs-keyword">const</span> firstMenu = <span class="hljs-title function_">findFirstAccessibleMenu</span>();
    <span class="hljs-keyword">if</span> (firstMenu) {
      activeMenu.<span class="hljs-property">value</span> = firstMenu.<span class="hljs-property">route</span>;
      currentPageTitle.<span class="hljs-property">value</span> = firstMenu.<span class="hljs-property">name</span>;
    }
  }
};
</code></pre>
<h2 data-id="heading-6">å››ã€ç•Œé¢å¸ƒå±€ä¸ç»„ä»¶ä½¿ç”¨</h2>
<h3 data-id="heading-7">1. æ•´ä½“å¸ƒå±€ç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"app-container"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- ä¾§è¾¹æ  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sidebar"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ collapsed: isCollapse }"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- LogoåŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"logo-area"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- èœå•åŒºåŸŸ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- ä¸»å†…å®¹åŒº --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"main-content"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡¶éƒ¨å¯¼èˆª --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"header"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡µé¢å†…å®¹ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é¡µè„š --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"footer"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>è¿™ç§å¸ƒå±€æ˜¯ç®¡ç†åå°çš„ç»å…¸è®¾è®¡ï¼Œå…·æœ‰æ¸…æ™°çš„è§†è§‰å±‚æ¬¡ã€‚</p>
<h3 data-id="heading-8">2. Element Plus èœå•ç»„ä»¶ä½¿ç”¨</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">el-menu</span>
  <span class="hljs-attr">:default-active</span>=<span class="hljs-string">"activeMenu"</span>           &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">å½“å‰æ¿€æ´»çš„èœå•</span> <span class="hljs-attr">--</span>&gt;</span>
  class="el-menu-vertical"
  background-color="#001529"            <span class="hljs-comment">&lt;!-- èƒŒæ™¯è‰² --&gt;</span>
  text-color="#bfcbd9"                  <span class="hljs-comment">&lt;!-- æ–‡å­—é¢œè‰² --&gt;</span>
  active-text-color="#409EFF"           <span class="hljs-comment">&lt;!-- æ¿€æ´»é¡¹æ–‡å­—é¢œè‰² --&gt;</span>
  :collapse="isCollapse"                <span class="hljs-comment">&lt;!-- æ˜¯å¦æŠ˜å  --&gt;</span>
  :collapse-transition="false"          <span class="hljs-comment">&lt;!-- å…³é—­æŠ˜å åŠ¨ç”» --&gt;</span>
  :unique-opened="true"                 <span class="hljs-comment">&lt;!-- åªä¿æŒä¸€ä¸ªå­èœå•å±•å¼€ --&gt;</span>
&gt;
  <span class="hljs-comment">&lt;!-- èœå•é¡¹æ¸²æŸ“ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in filteredMenu"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æœ‰å­èœå•çš„æƒ…å†µ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-sub-menu</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"item.children"</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"item.id"</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- æ ‡é¢˜åŒºåŸŸ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">title</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-icon</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">"item.icon"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-icon</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ item.name }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- å­èœå•é¡¹ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"child in item.children"</span> 
                   <span class="hljs-attr">:key</span>=<span class="hljs-string">"child.id"</span> 
                   <span class="hljs-attr">:index</span>=<span class="hljs-string">"child.route"</span>
                   @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectMenu(child)"</span>&gt;</span>
        {{ child.name }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-sub-menu</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- æ²¡æœ‰å­èœå•çš„æƒ…å†µ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-menu-item</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">:index</span>=<span class="hljs-string">"item.route"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"selectMenu(item)"</span>&gt;</span>
      ...
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-menu-item</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">el-menu</span>&gt;</span>
</code></pre>
<p><strong>å…³é”®ç‚¹è¯´æ˜</strong>ï¼š</p>
<ol>
<li><strong>åŠ¨æ€ç»„ä»¶</strong>ï¼š<code>&lt;component :is="item.icon"&gt;</code> å®ç°åŠ¨æ€å›¾æ ‡æ¸²æŸ“</li>
<li><strong>æ¡ä»¶æ¸²æŸ“</strong>ï¼šä½¿ç”¨ <code>v-if</code> å’Œ <code>v-else</code> åŒºåˆ†å­èœå•å’Œå•èœå•é¡¹</li>
<li><strong>å¾ªç¯æ¸²æŸ“</strong>ï¼š<code>v-for</code> éå†è¿‡æ»¤åçš„èœå•æ•°æ®</li>
<li><strong>å”¯ä¸€key</strong>ï¼šä¸ºæ¯ä¸ªèœå•é¡¹è®¾ç½®å”¯ä¸€çš„ <code>:key="item.id"</code> æé«˜æ€§èƒ½</li>
</ol>
<h2 data-id="heading-9">äº”ã€æ ·å¼è®¾è®¡æŠ€å·§</h2>
<h3 data-id="heading-10">1. ä¾§è¾¹æ æŠ˜å åŠ¨ç”»</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.sidebar</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">240px</span>;
  <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#001529</span>;
  <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.3s</span>;  <span class="hljs-comment">/* å®½åº¦å˜åŒ–åŠ¨ç”» */</span>
  <span class="hljs-attribute">overflow</span>: hidden;
}

<span class="hljs-selector-class">.sidebar</span><span class="hljs-selector-class">.collapsed</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">64px</span>;
}

<span class="hljs-selector-class">.logo-area</span> <span class="hljs-selector-class">.logo-text</span> {
  <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.3s</span>;  <span class="hljs-comment">/* æ–‡å­—æ·¡å…¥æ·¡å‡º */</span>
}

<span class="hljs-selector-class">.sidebar</span><span class="hljs-selector-class">.collapsed</span> <span class="hljs-selector-class">.logo-text</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;  <span class="hljs-comment">/* æŠ˜å æ—¶éšè—æ–‡å­— */</span>
}
</code></pre>
<h3 data-id="heading-11">2. å¸ƒå±€æŠ€å·§</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.app-container</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">min-height</span>: <span class="hljs-number">100vh</span>;  <span class="hljs-comment">/* å…¨å±é«˜åº¦ */</span>
}

<span class="hljs-selector-class">.main-content</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;            <span class="hljs-comment">/* å æ®å‰©ä½™ç©ºé—´ */</span>
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">overflow</span>: hidden;   <span class="hljs-comment">/* é˜²æ­¢å†…å®¹æº¢å‡º */</span>
}

<span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;            <span class="hljs-comment">/* å†…å®¹åŒºå æ®ä¸»è¦ç©ºé—´ */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;   <span class="hljs-comment">/* å†…å®¹è¿‡å¤šæ—¶æ»šåŠ¨ */</span>
}
</code></pre>
<p>ä½¿ç”¨ Flex å¸ƒå±€å¯ä»¥è½»æ¾å®ç°ç»å…¸çš„ä¾§è¾¹æ +ä¸»å†…å®¹åŒºå¸ƒå±€ã€‚</p>
<h2 data-id="heading-12">å…­ã€å®é™…åº”ç”¨æ‰©å±•å»ºè®®</h2>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ è¿˜å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ªåŸºç¡€å®ç°ï¼š</p>
<h3 data-id="heading-13">1. ä¸è·¯ç”±é›†æˆ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useRouter, useRoute } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();
<span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>();

<span class="hljs-comment">// èœå•ç‚¹å‡»å¤„ç†</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">selectMenu</span> = (<span class="hljs-params">item</span>) =&gt; {
  <span class="hljs-comment">// è·¯ç”±è·³è½¬</span>
  router.<span class="hljs-title function_">push</span>(item.<span class="hljs-property">route</span>);
};

<span class="hljs-comment">// æ ¹æ®å½“å‰è·¯ç”±è®¾ç½®æ¿€æ´»èœå•</span>
<span class="hljs-title function_">watch</span>(route, <span class="hljs-function">(<span class="hljs-params">newRoute</span>) =&gt;</span> {
  activeMenu.<span class="hljs-property">value</span> = newRoute.<span class="hljs-property">path</span>;
  <span class="hljs-comment">// æ ¹æ®è·¯ç”±æŸ¥æ‰¾å¯¹åº”çš„é¡µé¢æ ‡é¢˜</span>
  currentPageTitle.<span class="hljs-property">value</span> = <span class="hljs-title function_">findTitleByRoute</span>(newRoute.<span class="hljs-property">path</span>);
});
</code></pre>
<h3 data-id="heading-14">2. åç«¯åŠ¨æ€èœå•</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œèœå•æ•°æ®é€šå¸¸æ¥è‡ªåç«¯ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä»APIè·å–èœå•æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchMenuData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/api/menus'</span>, {
      <span class="hljs-attr">params</span>: { <span class="hljs-attr">role</span>: currentUser.<span class="hljs-property">value</span>.<span class="hljs-property">role</span> }
    });
    menuData.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è·å–èœå•æ•°æ®å¤±è´¥:'</span>, error);
  }
};
</code></pre>
<h3 data-id="heading-15">3. æƒé™æ§åˆ¶å¢å¼º</h3>
<p>é™¤äº†èœå•è¿‡æ»¤ï¼Œè¿˜å¯ä»¥æ·»åŠ æ›´ç»†ç²’åº¦çš„æƒé™æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æƒé™æŒ‡ä»¤</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'permission'</span>, {
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) {
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">value</span>: requiredRoles } = binding;
    <span class="hljs-keyword">const</span> userRole = currentUser.<span class="hljs-property">value</span>.<span class="hljs-property">role</span>;
    
    <span class="hljs-keyword">if</span> (!requiredRoles.<span class="hljs-title function_">includes</span>(userRole)) {
      el.<span class="hljs-property">parentNode</span> &amp;&amp; el.<span class="hljs-property">parentNode</span>.<span class="hljs-title function_">removeChild</span>(el);
    }
  }
});

<span class="hljs-comment">// åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">v-permission</span>=<span class="hljs-string">"['admin', 'editor']"</span>&gt;</span>ç¼–è¾‘å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>
</code></pre>
<h2 data-id="heading-16">æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸ª Vue 3 + Element Plus çš„åŠ¨æ€èœå•å®ç°ï¼Œæˆ‘ä»¬å­¦åˆ°äº†ï¼š</p>
<ol>
<li><strong>è®¾è®¡åˆç†çš„èœå•æ•°æ®ç»“æ„</strong>æ˜¯åŠ¨æ€èœå•çš„åŸºç¡€</li>
<li><strong>ä½¿ç”¨è®¡ç®—å±æ€§å®ç°èœå•è¿‡æ»¤</strong>ï¼Œè‡ªåŠ¨å“åº”è§’è‰²å˜åŒ–</li>
<li><strong>åˆ©ç”¨ Element Plus ç»„ä»¶</strong>å¿«é€Ÿæ„å»ºç¾è§‚çš„ç•Œé¢</li>
<li><strong>Flex å¸ƒå±€æŠ€å·§</strong>å®ç°å“åº”å¼ä¾§è¾¹æ </li>
<li><strong>æ‰©å±•æ€è·¯</strong>ï¼Œå¦‚è·¯ç”±é›†æˆã€åç«¯åŠ¨æ€èœå•ç­‰</li>
</ol>
<p>è¿™ä¸ªå®ç°æ–¹æ¡ˆå…·æœ‰å¾ˆå¥½çš„å¯æ‰©å±•æ€§ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è¿›è¡Œè°ƒæ•´å’Œå¢å¼ºã€‚</p>
<p><strong>å®Œæ•´æºç GitHubåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F1344160559-lch%2Fdh-vue3-component%2Fblob%2Fmain%2FDynamicMenu%2Findex.html" target="_blank" title="https://github.com/1344160559-lch/dh-vue3-component/blob/main/DynamicMenu/index.html" ref="nofollow noopener noreferrer">github.com/1344160559-â€¦</a></p>
<p>ä½ å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°HTMLæ–‡ä»¶ä¸­è¿è¡Œä½“éªŒã€‚å°è¯•åˆ‡æ¢ä¸åŒçš„ç”¨æˆ·è§’è‰²ï¼Œè§‚å¯Ÿèœå•çš„å˜åŒ–ï¼ŒåŠ æ·±å¯¹åŠ¨æ€èœå•å·¥ä½œåŸç†çš„ç†è§£ã€‚</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜åˆ˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-17">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fmaq_p_m5vd7KS-xyXt5rcA" target="_blank" title="https://mp.weixin.qq.com/s/maq_p_m5vd7KS-xyXt5rcA" ref="nofollow noopener noreferrer">ã€ŠSpringBoot+MySQL+Vueå®ç°æ–‡ä»¶å…±äº«ç³»ç»Ÿã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FP7SMincYFKERZbNKAFtzGQ" target="_blank" title="https://mp.weixin.qq.com/s/P7SMincYFKERZbNKAFtzGQ" ref="nofollow noopener noreferrer">ã€Šè¿™20æ¡SQLä¼˜åŒ–æ–¹æ¡ˆï¼Œè®©ä½ çš„æ•°æ®åº“æŸ¥è¯¢é€Ÿåº¦æå‡10å€ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FgQK9L1TxKL50FUVMcgh6JQ" target="_blank" title="https://mp.weixin.qq.com/s/gQK9L1TxKL50FUVMcgh6JQ" ref="nofollow noopener noreferrer">ã€ŠSpringBoot åŠ¨æ€èœå•æƒé™ç³»ç»Ÿè®¾è®¡çš„ä¼ä¸šçº§è§£å†³æ–¹æ¡ˆã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FPQ_w7CDVoIZPn-CVH2DKJg" target="_blank" title="https://mp.weixin.qq.com/s/PQ_w7CDVoIZPn-CVH2DKJg" ref="nofollow noopener noreferrer">ã€ŠVue3å’ŒVue2çš„æ ¸å¿ƒåŒºåˆ«ï¼Ÿå¾ˆå¤šå¼€å‘è€…éƒ½æ²¡å®Œå…¨ææ‡‚çš„10ä¸ªç»†èŠ‚ã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¦–å­—æ¯æ¨¡ç³ŠåŒ¹é…]]></title>    <link>https://juejin.cn/post/7578511778889498662</link>    <guid>https://juejin.cn/post/7578511778889498662</guid>    <pubDate>2025-12-01T09:13:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578511778889498662" data-draft-id="7578495241638281257" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¦–å­—æ¯æ¨¡ç³ŠåŒ¹é…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:13:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœˆäº®æ…¢æ…¢åœ†"/> <meta itemprop="url" content="https://juejin.cn/user/2496335488221770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¦–å­—æ¯æ¨¡ç³ŠåŒ¹é…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2496335488221770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœˆäº®æ…¢æ…¢åœ†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:13:29.000Z" title="Mon Dec 01 2025 09:13:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬åœ¨æ—¥å¸¸å¼€å‘ä¸­ç»å¸¸ä¼šç”¨åˆ°ç­›é€‰çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä¸€ä¸ªè¡¨æ ¼æ•°æ®ï¼Œéœ€è¦æ ¹æ®å…¶ä¸­çš„æŸä¸€åˆ—å»è¿›è¡Œæ¨¡ç³ŠåŒ¹é…ç­›é€‰ï¼Œä¸€èˆ¬éƒ½æ˜¯å»åˆ¤æ–­å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«æŸä¸ªå­å­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¿™æ ·æ˜¯ä¸æ”¯æŒé¦–å­—æ¯æ¨¡ç³ŠåŒ¹é…çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªç¬¬ä¸‰æ–¹åŒ…<code>pinyin</code>å»å®ç°è¿™ç§åŠŸèƒ½ã€‚</p>
<p><code>pinyin</code>å¯ä»¥ç›´æ¥ä½¿ç”¨<code>npm</code>ä¸‹è½½ã€‚</p>
<h2 data-id="heading-0">1.è¡¨æ ¼çš„ç­›é€‰</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchedFilter</span>(<span class="hljs-params">rows, searchValue, keyValue</span>) {
  searchValue = searchValue.<span class="hljs-title function_">trim</span>();
  <span class="hljs-keyword">if</span> (searchValue) {
    <span class="hljs-keyword">const</span> pathen = <span class="hljs-regexp">/^[\u4e00-\u9fa5]+$/</span>;
    <span class="hljs-keyword">if</span> (pathen.<span class="hljs-title function_">test</span>(searchValue)) {
      <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (key === keyValue) {
            <span class="hljs-keyword">return</span> data[key].<span class="hljs-title function_">includes</span>(searchValue);
          }
        });
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> searchValuePinyin = <span class="hljs-title function_">pinyin</span>(searchValue, {
        <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
      }).<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (key === keyValue) {
            <span class="hljs-keyword">const</span> dataPyArr = <span class="hljs-title function_">pinyin</span>(data[key], {
              <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
            });
            <span class="hljs-keyword">const</span> dataPy = dataPyArr.<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
            <span class="hljs-keyword">return</span> dataPy.<span class="hljs-title function_">includes</span>(searchValuePinyin);
          }
        });
      });
    }
  }
  <span class="hljs-keyword">return</span> rows;
}
</code></pre>
<p>è¯¥æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œ<code>rows</code>æ˜¯è¡¨æ ¼æ•°æ®ï¼Œ<code>searchValue</code>æ˜¯ç­›é€‰å­—ç¬¦ä¸²ï¼Œ<code>keyValue</code>æ˜¯è¦åŒ¹é…çš„è¡¨æ ¼çš„æŸä¸€åˆ—çš„<code>prop</code>ã€‚</p>
<p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen-view"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç­›é€‰å­—æ®µ:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"filterText"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:120px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"filterHandle"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>ç­›é€‰<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"showTableData"</span> <span class="hljs-attr">stripe</span> <span class="hljs-attr">border</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"500"</span> <span class="hljs-attr">:cell-style</span>=<span class="hljs-string">"{ textAlign: 'center' }"</span>
      <span class="hljs-attr">:header-cell-style</span>=<span class="hljs-string">"{ textAlign: 'center' }"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å§“å"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"åœ°å€"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"address"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"èŒä½"</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"job"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-table-column</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { searchedFilter } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/changePinyin'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">tableData</span>: [
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'æœˆäº®'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ±Ÿè‹çœå—äº¬å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'æœˆäº®1'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ±Ÿè‹çœå—äº¬å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'æœˆäº®2'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ±Ÿè‹çœå—äº¬å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¤§å‚»'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å®‰å¾½çœåˆè‚¥å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¤§å‚»1'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å®‰å¾½çœåˆè‚¥å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¤§å‚»2'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å®‰å¾½çœåˆè‚¥å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'äºŒç‹—'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å››å·çœæˆéƒ½å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'äºŒç‹—1'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å››å·çœæˆéƒ½å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'äºŒç‹—2'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'å››å·çœæˆéƒ½å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'å‰ç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸‰é©´å­'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ²³å—çœéƒ‘å·å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸‰é©´å­1'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ²³å—çœéƒ‘å·å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
        { <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸‰é©´å­2'</span>, <span class="hljs-attr">address</span>: <span class="hljs-string">'æ²³å—çœéƒ‘å·å¸‚'</span>, <span class="hljs-attr">job</span>: <span class="hljs-string">'åç«¯å¼€å‘'</span> },
      ],
      <span class="hljs-attr">showTableData</span>: [],
      <span class="hljs-attr">filterText</span>: <span class="hljs-string">''</span>
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTableData</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tableData</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">filterHandle</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTableData</span> = <span class="hljs-title function_">searchedFilter</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tableData</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">filterText</span>, <span class="hljs-string">'name'</span>)
      <span class="hljs-comment">// è¿™å°±æ˜¯ç­›é€‰è¡¨æ ¼çš„å§“åå­—æ®µï¼Œå¦‚æœæƒ³ç­›é€‰åˆ«çš„å°±æŠŠnameæ¢æˆå¯¹åº”çš„prop</span>
      <span class="hljs-comment">// æ”¯æŒé¦–å­—æ¯åŒ¹é…</span>
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.screen-view</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•åªèƒ½æ ¹æ®è¡¨æ ¼çš„ä¸€åˆ—è¿›è¡Œç­›é€‰ï¼Œå¦‚æœæƒ³åŒæ—¶åŒ¹é…å¤šåˆ—çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">searchedFilters</span>(<span class="hljs-params">rows, searchValue, keyValues</span>) {
  searchValue = searchValue.<span class="hljs-title function_">trim</span>();
  <span class="hljs-keyword">if</span> (searchValue) {
    <span class="hljs-keyword">const</span> pathen = <span class="hljs-regexp">/^[\u4e00-\u9fa5]+$/</span>;
    <span class="hljs-keyword">if</span> (pathen.<span class="hljs-title function_">test</span>(searchValue)) {
      <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> keyValues.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (key === k) {
              <span class="hljs-keyword">return</span> data[key].<span class="hljs-title function_">includes</span>(searchValue);
            }
          });
        });
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">const</span> searchValuePinyin = <span class="hljs-title function_">pinyin</span>(searchValue, {
        <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
      }).<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
      <span class="hljs-keyword">return</span> rows.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(data).<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">key</span>) =&gt;</span> {
          <span class="hljs-keyword">return</span> keyValues.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> {
            <span class="hljs-keyword">if</span> (key === k) {
              <span class="hljs-keyword">const</span> dataPyArr = <span class="hljs-title function_">pinyin</span>(data[key], {
                <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
              });
              <span class="hljs-keyword">const</span> dataPy = dataPyArr.<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
              <span class="hljs-keyword">return</span> dataPy.<span class="hljs-title function_">includes</span>(searchValuePinyin);
            }
          });
        });
      });
    }
  }
  <span class="hljs-keyword">return</span> rows;
}
</code></pre>
<p>è¿˜æ˜¯æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œå‰é¢ä¸¤ä¸ªè·Ÿç¬¬ä¸€ä¸ªæ–¹æ³•ä¸€æ ·ï¼Œè¡¨æ ¼æ•°æ®å’Œç­›é€‰å­—ç¬¦ä¸²ï¼Œç¬¬ä¸‰ä¸ªæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‡Œé¢å­˜æ”¾çš„æ˜¯ä½ æƒ³åŒ¹é…çš„åˆ—ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬æƒ³åŒæ—¶ç­›é€‰å§“åå’Œåœ°å€è¿™ä¸¤åˆ—ï¼š</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-title function_">filterHandle</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTableData</span> = <span class="hljs-title function_">searchedFilters</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tableData</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">filterText</span>, [<span class="hljs-string">'name'</span>, <span class="hljs-string">'address'</span>])
    }
</code></pre>
<h2 data-id="heading-1">2.æ ‘ç»“æ„çš„ç­›é€‰</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">treeFilterPY</span>(<span class="hljs-params">data, searchValue, keyValue</span>) {
  searchValue = searchValue.<span class="hljs-title function_">trim</span>();
  <span class="hljs-keyword">if</span> (!searchValue) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">const</span> pathen = <span class="hljs-regexp">/^[\u4e00-\u9fa5]+$/</span>;
  <span class="hljs-keyword">if</span> (pathen.<span class="hljs-title function_">test</span>(searchValue)) {
    <span class="hljs-keyword">return</span> data[keyValue].<span class="hljs-title function_">indexOf</span>(searchValue) !== -<span class="hljs-number">1</span>;
  }
  <span class="hljs-comment">// åŒ¹é…å°å†™</span>
  <span class="hljs-keyword">const</span> labelValue = <span class="hljs-title function_">pinyin</span>(data[keyValue], {
    <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
  }).<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">const</span> searchValuePinyin = <span class="hljs-title function_">pinyin</span>(searchValue, {
    <span class="hljs-attr">style</span>: pinyin.<span class="hljs-property">STYLE_FIRST_LETTER</span>,
  }).<span class="hljs-title function_">join</span>(<span class="hljs-string">""</span>);
  <span class="hljs-keyword">return</span> labelValue.<span class="hljs-title function_">indexOf</span>(searchValuePinyin) !== -<span class="hljs-number">1</span>;
}
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯æ ‘ç»“æ„æ•°æ®ï¼Œç­›é€‰å­—ç¬¦ä¸²ï¼Œå¯¹åº”çš„propã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"screen-view"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>ç­›é€‰å­—æ®µ:<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"filterText"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width:120px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-input</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"filterHandle"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span>&gt;</span>ç­›é€‰<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-tree</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"treeRef"</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"treeData"</span> <span class="hljs-attr">:filter-node-method</span>=<span class="hljs-string">"filterNode"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-tree</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { treeFilterPY } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/changePinyin'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">defaultProps</span>: {
        <span class="hljs-attr">children</span>: <span class="hljs-string">"children"</span>,
        <span class="hljs-attr">label</span>: <span class="hljs-string">"label"</span>,
      },
      <span class="hljs-attr">treeData</span>: [
        {
          <span class="hljs-attr">label</span>: <span class="hljs-string">'å…¨éƒ¨'</span>,
          <span class="hljs-attr">id</span>: -<span class="hljs-number">1</span>,
          <span class="hljs-attr">children</span>: [
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">'æœˆäº®'</span>,
              <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>
            },
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">'å¤§å‚»'</span>,
              <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>
            },
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">'äºŒç‹—'</span>,
              <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>
            },
            {
              <span class="hljs-attr">label</span>: <span class="hljs-string">'ä¸‰é©´å­'</span>,
              <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>
            },
          ]
        }
      ],
      <span class="hljs-attr">filterText</span>: <span class="hljs-string">''</span>
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">showTableData</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tableData</span>
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">filterHandle</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">treeRef</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filterText</span>);
    },
    <span class="hljs-title function_">filterNode</span>(<span class="hljs-params">value, data</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">treeFilterPY</span>(data, value, <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultProps</span>.<span class="hljs-property">label</span>);
    },
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.screen-view</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">box-sizing</span>: border-box;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£ Nginx ä¼˜åŒ–å®è·µï¼šæ¶æ„ã€é…ç½®ä¸æ€§èƒ½è°ƒä¼˜]]></title>    <link>https://juejin.cn/post/7578700798743658530</link>    <guid>https://juejin.cn/post/7578700798743658530</guid>    <pubDate>2025-12-01T09:28:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578700798743658530" data-draft-id="7577356848337895459" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£ Nginx ä¼˜åŒ–å®è·µï¼šæ¶æ„ã€é…ç½®ä¸æ€§èƒ½è°ƒä¼˜"/> <meta itemprop="keywords" content="å‰ç«¯,Nginx"/> <meta itemprop="datePublished" content="2025-12-01T09:28:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¦å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/3889431196213664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£ Nginx ä¼˜åŒ–å®è·µï¼šæ¶æ„ã€é…ç½®ä¸æ€§èƒ½è°ƒä¼˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3889431196213664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¦å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:28:12.000Z" title="Mon Dec 01 2025 09:28:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œè€…ï¼šç‹ä½³æœˆï¼ˆæ±½è½¦ä¹‹å®¶ï¼šAPP æ¶æ„å‰ç«¯å·¥ç¨‹å¸ˆï¼‰</p>
<h2 data-id="heading-0">ç°ä»£ Nginx ä¼˜åŒ–å®è·µï¼šæ¶æ„ã€é…ç½®ä¸æ€§èƒ½è°ƒä¼˜</h2>
<p>åœ¨å½“ä»Šé«˜å¹¶å‘ã€é«˜å¯ç”¨çš„ Web æ¶æ„ä¸­ï¼ŒNginx ä½œä¸ºåå‘ä»£ç†æœåŠ¡å™¨æ‰®æ¼”ç€è‡³å…³é‡è¦çš„è§’è‰²ã€‚æœ¬æ–‡å°†åŸºäºå®é™…é¡¹ç›®ç»éªŒï¼Œæ·±å…¥æ¢è®¨ç°ä»£ Nginx çš„ä¼˜åŒ–ç­–ç•¥ï¼Œä»åŸºç¡€é…ç½®ã€æ€§èƒ½è°ƒä¼˜ã€å®‰å…¨åŠ å›ºåˆ°é«˜çº§åŠŸèƒ½åº”ç”¨ï¼Œä¸ºæ‚¨æä¾›ä¸€å¥—å…¨é¢ä¸”å¯è½åœ°çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-1">ä¸€ã€åŸºç¡€æ¶æ„ä¸æ ¸å¿ƒé…ç½®ä¼˜åŒ–</h3>
<h4 data-id="heading-2">1.1 è¿›ç¨‹ä¸è¿æ¥ä¼˜åŒ–</h4>
<p>Nginx çš„å·¥ä½œè¿›ç¨‹é…ç½®ç›´æ¥å½±å“å…¶å¹¶å‘å¤„ç†èƒ½åŠ›ã€‚åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†ä»¥ä¸‹é…ç½®ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">worker_processes  1;
worker_rlimit_nofile  65535;

events {
  multi_accept        on;
  worker_connections  65535;
}
</code></pre>
<p><strong>ä¼˜åŒ–è¯´æ˜ï¼š</strong></p>
<ul>
<li><code>worker_processes</code>ï¼šé€šå¸¸è®¾ç½®ä¸º CPU æ ¸å¿ƒæ•°ï¼Œä½†åœ¨å®¹å™¨åŒ–ç¯å¢ƒä¸­éœ€æ ¹æ®å®é™…èµ„æºåˆ†é…è°ƒæ•´</li>
<li><code>worker_rlimit_nofile</code>ï¼šæé«˜å•ä¸ªè¿›ç¨‹å¯æ‰“å¼€çš„æœ€å¤§æ–‡ä»¶æ•°ï¼Œè§£å†³é«˜å¹¶å‘åœºæ™¯ä¸‹çš„æ–‡ä»¶æè¿°ç¬¦é™åˆ¶</li>
<li><code>multi_accept on</code>ï¼šå…è®¸ Nginx åŒæ—¶æ¥å—å¤šä¸ªè¿æ¥ï¼Œæé«˜è¿æ¥å¤„ç†æ•ˆç‡</li>
<li><code>worker_connections</code>ï¼šæ¯ä¸ªå·¥ä½œè¿›ç¨‹å¯åŒæ—¶å¤„ç†çš„æœ€å¤§è¿æ¥æ•°</li>
</ul>
<p><strong>å®é™…æ•ˆæœï¼š</strong> åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œè¿™ç»„é…ç½®ä½¿å•å®ä¾‹ Nginx èƒ½å¤Ÿç¨³å®šå¤„ç†æ¯ç§’ä¸Šä¸‡çº§çš„è¯·æ±‚é‡ï¼ŒCPU ä½¿ç”¨ç‡é™ä½çº¦ 30%ã€‚</p>
<h4 data-id="heading-3">1.2 HTTP æ ¸å¿ƒæ¨¡å—ä¼˜åŒ–</h4>
<p>é¡¹ç›®ä¸­çš„ HTTP æ ¸å¿ƒä¼˜åŒ–é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">http {
  etag                   off;
  charset                utf-8;
  sendfile               on;
  tcp_nopush             on;
  server_tokens          off;
  log_not_found          off;
  keepalive_timeout      65;
  keepalive_requests     300;

  proxy_intercept_errors on;
  proxy_ignore_client_abort on;
  subrequest_output_buffer_size 3m;
}
</code></pre>
<p><strong>å…³é”®ä¼˜åŒ–ç‚¹ï¼š</strong></p>
<ol>
<li><strong>æ–‡ä»¶ä¼ è¾“ä¼˜åŒ–</strong></li>
</ol>
<ul>
<li><code>sendfile on</code>ï¼šå¯ç”¨é›¶æ‹·è´æŠ€æœ¯ï¼Œå‡å°‘å†…æ ¸ä¸ç”¨æˆ·ç©ºé—´ä¹‹é—´çš„æ•°æ®æ‹·è´</li>
<li><code>tcp_nopush on</code>ï¼šä¸ sendfile é…åˆä½¿ç”¨ï¼Œåœ¨æ•°æ®åŒ…ç§¯ç´¯åˆ°ä¸€å®šå¤§å°åå†å‘é€ï¼Œæé«˜ç½‘ç»œæ•ˆç‡</li>
</ul>
<ol start="2">
<li><strong>è¿æ¥å¤ç”¨</strong></li>
</ol>
<ul>
<li><code>keepalive_timeout 65</code>ï¼šè®¾ç½®é•¿è¿æ¥è¶…æ—¶æ—¶é—´</li>
<li><code>keepalive_requests 300</code>ï¼šæ¯ä¸ªé•¿è¿æ¥æœ€å¤šå¤„ç†çš„è¯·æ±‚æ•°ï¼Œé¿å…å•ä¸ªè¿æ¥å ç”¨è¿‡ä¹…</li>
</ul>
<ol start="3">
<li><strong>æ€§èƒ½ä¸å®‰å…¨å¹³è¡¡</strong></li>
</ol>
<ul>
<li><code>etag off</code>ï¼šç¦ç”¨ ETagï¼Œå‡å°‘å¸¦å®½æ¶ˆè€—å’ŒæœåŠ¡å™¨è´Ÿè½½</li>
<li><code>server_tokens off</code>ï¼šéšè— Nginx ç‰ˆæœ¬ä¿¡æ¯ï¼Œæé«˜å®‰å…¨æ€§</li>
<li><code>log_not_found off</code>ï¼šä¸è®°å½• 404 é”™è¯¯ï¼Œå‡å°‘ç£ç›˜ I/O å’Œæ—¥å¿—ä½“ç§¯</li>
</ul>
<ol start="4">
<li><strong>é”™è¯¯å¤„ç†ä¼˜åŒ–</strong></li>
</ol>
<ul>
<li><code>proxy_intercept_errors on</code>ï¼šå…è®¸ Nginx æ‹¦æˆªåç«¯æœåŠ¡å™¨çš„é”™è¯¯å“åº”</li>
<li><code>proxy_ignore_client_abort on</code>ï¼šå¿½ç•¥å®¢æˆ·ç«¯ä¸­æ–­è¿æ¥ï¼Œç¡®ä¿åç«¯å¤„ç†ä¸å—å½±å“</li>
</ul>
<h3 data-id="heading-4">äºŒã€ç¼“å­˜ç­–ç•¥ä¸åŠ é€Ÿä¼˜åŒ–</h3>
<h4 data-id="heading-5">2.1 é«˜æ•ˆç¼“å­˜é…ç½®</h4>
<p>é¡¹ç›®ä¸­å®ç°äº†ç²¾ç»†åŒ–çš„ç¼“å­˜ç­–ç•¥ï¼Œæ ¹æ®èµ„æºç±»å‹å’Œç‰ˆæœ¬ä¿¡æ¯åº”ç”¨ä¸åŒçš„ç¼“å­˜è§„åˆ™ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">proxy_cache_path  /var/cache/nginx/static_temp levels=1:2 keys_zone=static_cache:20m max_size=800m inactive=1d use_temp_path=off;

# é’ˆå¯¹ä¸åŒç‰ˆæœ¬çš„ç¼“å­˜æ§åˆ¶
header_filter_by_lua_block {
  local ver = ngx.var.ver
  local cache_ttl
  if ver and (ver == "latest" or ver:match("^%d+%.x$") or ver:match("^%d+%.%d+%.x$")) then
    cache_ttl = 300
  else
    cache_ttl = 31536000
  end

  ngx.header["Cache-Control"] = "public, max-age=" .. cache_ttl
}

# ç¼“å­˜é…ç½®ç¤ºä¾‹
proxy_cache static_cache;
proxy_cache_min_uses 3;
proxy_cache_valid 200 304 30s;
proxy_cache_valid 404 10s;
proxy_cache_valid any 30s;
proxy_cache_use_stale error timeout updating invalid_header http_500 http_502 http_503 http_504;
</code></pre>
<p><strong>ç¼“å­˜ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>ç¼“å­˜è·¯å¾„ä¸é”®å€¼è®¾è®¡</strong></li>
</ol>
<ul>
<li><code>levels=1:2</code>ï¼šåˆ›å»ºä¸¤çº§ç›®å½•ç»“æ„ï¼Œæé«˜æ–‡ä»¶ç³»ç»ŸæŸ¥æ‰¾æ•ˆç‡</li>
<li><code>keys_zone=static_cache:20m</code>ï¼šåˆ†é… 20MB å†…å­˜ç”¨äºç¼“å­˜é”®å’Œå…ƒæ•°æ®</li>
<li><code>max_size=800m</code>ï¼šé™åˆ¶ç¼“å­˜å¤§å°ï¼Œé˜²æ­¢ç£ç›˜ç©ºé—´è€—å°½</li>
<li><code>inactive=1d</code>ï¼šè¶…è¿‡ 1 å¤©æœªè®¿é—®çš„ç¼“å­˜é¡¹å°†è¢«æ¸…ç†</li>
<li><code>use_temp_path=off</code>ï¼šç›´æ¥åœ¨ç¼“å­˜ç›®å½•ä¸­å†™å…¥ï¼Œé¿å…é¢å¤–çš„æ–‡ä»¶ç§»åŠ¨å¼€é”€</li>
</ul>
<ol start="2">
<li><strong>æ™ºèƒ½ç¼“å­˜æ—¶é—´ç­–ç•¥</strong></li>
</ol>
<ul>
<li>å¯¹ç¨³å®šç‰ˆæœ¬èµ„æºè®¾ç½®é•¿ç¼“å­˜æ—¶é—´ï¼ˆ31536000 ç§’ = 1 å¹´ï¼‰</li>
<li>å¯¹å¼€å‘ç‰ˆã€æœ€æ–°ç‰ˆå’Œç‰ˆæœ¬èŒƒå›´ï¼ˆå¦‚ 1.xï¼‰è®¾ç½®çŸ­ç¼“å­˜æ—¶é—´ï¼ˆ300 ç§’ = 5 åˆ†é’Ÿï¼‰</li>
<li>æ ¹æ® HTTP çŠ¶æ€ç è®¾ç½®ä¸åŒçš„ç¼“å­˜æœ‰æ•ˆæœŸ</li>
</ul>
<ol start="3">
<li><strong>é«˜å¯ç”¨æ€§ç¼“å­˜</strong></li>
</ol>
<ul>
<li><code>proxy_cache_use_stale</code>ï¼šåœ¨åç«¯é”™è¯¯ã€è¶…æ—¶ç­‰æƒ…å†µä¸‹ä½¿ç”¨è¿‡æœŸç¼“å­˜ï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§</li>
<li><code>proxy_cache_min_uses 3</code>ï¼šåªæœ‰è¯·æ±‚è¾¾åˆ°ä¸€å®šæ¬¡æ•°æ‰ä¼šè¢«ç¼“å­˜ï¼Œé¿å…ç¼“å­˜ä½é¢‘è®¿é—®çš„èµ„æº</li>
</ul>
<h4 data-id="heading-6">2.2 å“åº”å‹ç¼©ä¸èµ„æºä¼˜åŒ–</h4>
<p>é¡¹ç›®ä¸­å¯ç”¨äº† Gzip å‹ç¼©å¹¶è¿›è¡Œäº†é’ˆå¯¹æ€§ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">gunzip on;
proxy_method GET;
proxy_pass_request_body off;
proxy_pass_request_headers off;
proxy_set_header Accept-Encoding "";
</code></pre>
<p><strong>ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>è§£å‹ç¼©æ”¯æŒ</strong></li>
</ol>
<ul>
<li><code>gunzip on</code>ï¼šè‡ªåŠ¨è§£å‹ç¼©æ¥è‡ªåç«¯çš„ gzip å‹ç¼©å“åº”</li>
</ul>
<ol start="2">
<li><strong>è¯·æ±‚ä¼˜åŒ–</strong></li>
</ol>
<ul>
<li>å¯¹é™æ€èµ„æºè¯·æ±‚ç§»é™¤è¯·æ±‚ä½“å’Œéå¿…è¦è¯·æ±‚å¤´ï¼Œå‡å°‘æ•°æ®ä¼ è¾“é‡</li>
<li>æ¸…é™¤ Accept-Encoding å¤´ï¼Œé¿å…å¤šå±‚å‹ç¼©å¸¦æ¥çš„æ€§èƒ½æŸè€—</li>
</ul>
<h4 data-id="heading-7">2.3 å›¾ç‰‡èµ„æºä¼˜åŒ–</h4>
<p>åœ¨å›¾ç‰‡æœåŠ¡å™¨é…ç½®ä¸­ï¼Œå®ç°äº†è‡ªåŠ¨æ ¼å¼è½¬æ¢å’Œå¼‚æ­¥è£åˆ‡ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># å¼‚æ­¥ AVIF è½¬æ¢ç¤ºä¾‹
access_by_lua_block {
  local is_match = "ä¸šåŠ¡é€»è¾‘åˆ¤æ–­"

  if is_match then
    è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
  end
}

# å¼‚å¸¸å›é€€æœºåˆ¶
proxy_intercept_errors on;
recursive_error_pages on;
error_page 404 502 504 = @fallback;

# å›é€€åˆ°åŸå§‹æ ¼å¼
location @fallback {
  rewrite ... break;
  # å…¶ä»–é…ç½®...
}
</code></pre>
<p><strong>å›¾ç‰‡ä¼˜åŒ–æŠ€æœ¯è¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>ç°ä»£å›¾ç‰‡æ ¼å¼è‡ªåŠ¨è½¬æ¢</strong></li>
</ol>
<ul>
<li>æ ¹æ®è¯·æ±‚è·¯å¾„è‡ªåŠ¨å¯ç”¨æ ¼å¼è½¬æ¢ï¼Œå‡å°‘å›¾ç‰‡å¤§å° 30-50%</li>
<li>å®ç°å¼‚æ­¥è£åˆ‡ï¼Œæé«˜å“åº”é€Ÿåº¦</li>
</ul>
<ol start="2">
<li><strong>é™çº§æœºåˆ¶</strong></li>
</ol>
<ul>
<li>å½“è½¬æ¢å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨å›é€€åˆ°åŸå§‹å›¾ç‰‡æ ¼å¼ï¼Œç¡®ä¿æœåŠ¡å¯ç”¨æ€§</li>
</ul>
<h3 data-id="heading-8">ä¸‰ã€é«˜å¯ç”¨ä¸è´Ÿè½½å‡è¡¡</h3>
<h4 data-id="heading-9">3.1 å¤šæ•°æ®ä¸­å¿ƒéƒ¨ç½²æ¶æ„</h4>
<p>é¡¹ç›®é‡‡ç”¨äº†å¤šæ•°æ®ä¸­å¿ƒéƒ¨ç½²ç­–ç•¥ï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># é›†ç¾¤A
upstream server_a {
  server xx.xx.x.xxx:xx max_fails=2 fail_timeout=2s;
  server xx.xx.x.xxx:xx max_fails=2 fail_timeout=2s;
  keepalive 320;
}

# é›†ç¾¤B
upstream server_b {
  server xx.xx.x.xxx:xx max_fails=2 fail_timeout=2s;
  server xx.xx.x.xxx:xx max_fails=2 fail_timeout=2s;
  keepalive 320;
}
</code></pre>
<p><strong>é«˜å¯ç”¨é…ç½®è¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>å¥åº·æ£€æŸ¥æœºåˆ¶</strong></li>
</ol>
<ul>
<li><code>max_fails=2</code>ï¼šå…è®¸çš„å¤±è´¥æ¬¡æ•°</li>
<li><code>fail_timeout=2s</code>ï¼šå¤±è´¥è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´åå°†é‡æ–°æ£€æŸ¥æœåŠ¡å™¨å¥åº·çŠ¶æ€</li>
</ul>
<ol start="2">
<li><strong>è¿æ¥æ± å¤ç”¨</strong></li>
</ol>
<ul>
<li><code>keepalive 320</code>ï¼šä¸ºä¸Šæ¸¸æœåŠ¡å™¨ç»´æŠ¤çš„ç©ºé—²è¿æ¥æ•°ï¼Œå‡å°‘é¢‘ç¹å»ºç«‹è¿æ¥çš„å¼€é”€</li>
</ul>
<ol start="3">
<li><strong>å¤‡ä»½æœåŠ¡å™¨</strong></li>
</ol>
<ul>
<li>éƒ¨åˆ† upstream é…ç½®ä¸­æ·»åŠ äº† <code>backup</code> æ ‡è®°çš„æœåŠ¡å™¨ï¼Œä½œä¸ºç¾éš¾æ¢å¤ä½¿ç”¨</li>
</ul>
<h4 data-id="heading-10">3.2 DNS è§£æä¼˜åŒ–</h4>
<p>é’ˆå¯¹å¾®æœåŠ¡æ¶æ„ä¸­çš„æœåŠ¡å‘ç°ï¼Œé¡¹ç›®è¿›è¡Œäº† DNS è§£æä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">resolver 127.0.0.11 10.33.3.5 10.33.3.6 10.41.0.254 valid=300s ipv6=off;
resolver_timeout 500ms;
</code></pre>
<p><strong>DNS ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>å¤š DNS æœåŠ¡å™¨</strong></li>
</ol>
<ul>
<li>é…ç½®å¤šä¸ª DNS æœåŠ¡å™¨ï¼Œæé«˜è§£æå¯é æ€§</li>
<li>åŒ…å« Docker å†…éƒ¨ DNS (127.0.0.11) å’Œä¼ä¸šå†…éƒ¨ DNS æœåŠ¡å™¨</li>
</ul>
<ol start="2">
<li><strong>ç¼“å­˜ä¸è¶…æ—¶æ§åˆ¶</strong></li>
</ol>
<ul>
<li><code>valid=300s</code>ï¼šDNS è§£æç»“æœç¼“å­˜æ—¶é—´</li>
<li><code>resolver_timeout 500ms</code>ï¼šé™åˆ¶ DNS è§£æè¶…æ—¶æ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´é˜»å¡</li>
</ul>
<h3 data-id="heading-11">å››ã€å®‰å…¨åŠ å›ºä¸ç›‘æ§</h3>
<h4 data-id="heading-12">4.1 å®‰å…¨å¤´é…ç½®</h4>
<p>é¡¹ç›®ä¸­å®ç°äº†å…¨é¢çš„å®‰å…¨å¤´è®¾ç½®ï¼Œé˜²æ­¢å¸¸è§çš„ Web æ”»å‡»ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># ç§»é™¤å¯èƒ½å­˜åœ¨çš„ä¸å®‰å…¨å“åº”å¤´
proxy_hide_header X-Frame-Options;
proxy_hide_header X-XSS-Protection;
proxy_hide_header X-Content-Type-Options;
proxy_hide_header Content-Security-Policy;
proxy_hide_header Strict-Transport-Security;

# æ·»åŠ å®‰å…¨å¤´
add_header X-XSS-Protection "1; mode=block" always;
add_header X-Content-Type-Options "nosniff" always;
add_header Strict-Transport-Security "max-age=31536000;" always;
</code></pre>
<p><strong>å®‰å…¨å¤´è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>XSS é˜²æŠ¤</strong></li>
</ol>
<ul>
<li><code>X-XSS-Protection "1; mode=block"</code>ï¼šå¯ç”¨æµè§ˆå™¨å†…ç½®çš„ XSS è¿‡æ»¤å™¨ï¼Œæ£€æµ‹åˆ°æ”»å‡»æ—¶é˜»æ­¢é¡µé¢åŠ è½½</li>
</ul>
<ol start="2">
<li><strong>MIME ç±»å‹å—…æ¢é˜²æŠ¤</strong></li>
</ol>
<ul>
<li><code>X-Content-Type-Options "nosniff"</code>ï¼šé˜²æ­¢æµè§ˆå™¨å¯¹å“åº”å†…å®¹è¿›è¡Œ MIME ç±»å‹å—…æ¢ï¼Œå‡å°‘ XSS æ”»å‡»é¢</li>
</ul>
<ol start="3">
<li><strong>HTTPS å¼ºåˆ¶</strong></li>
</ol>
<ul>
<li><code>Strict-Transport-Security "max-age=31536000;"</code>ï¼šå¼ºåˆ¶ä½¿ç”¨ HTTPSï¼Œé˜²æ­¢ä¸­é—´äººæ”»å‡»</li>
</ul>
<h4 data-id="heading-13">4.2 è¯·æ±‚é™åˆ¶ä¸è®¿é—®æ§åˆ¶</h4>
<p>é¡¹ç›®å®ç°äº†è¯·æ±‚æ–¹æ³•é™åˆ¶å’Œè®¿é—®æ§åˆ¶ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># é™åˆ¶è¯·æ±‚æ–¹æ³•
if ($request_method !~ ^(GET|HEAD|POST)$) {
  return 403;
}

# å†…éƒ¨æ¥å£è®¿é—®æ§åˆ¶
location /get_versions/ {
  allow 127.0.0.1;
  deny all;
  # å…¶ä»–é…ç½®...
}
</code></pre>
<p><strong>å®‰å…¨è®¿é—®æ§åˆ¶ï¼š</strong></p>
<ol>
<li><strong>è¯·æ±‚æ–¹æ³•é™åˆ¶</strong>ï¼šåªå…è®¸ GETã€HEADã€POST æ–¹æ³•ï¼Œæ‹’ç»å…¶ä»–å¯èƒ½å¸¦æ¥é£é™©çš„æ–¹æ³•</li>
<li><strong>å†…éƒ¨æ¥å£ä¿æŠ¤</strong>ï¼šé€šè¿‡ IP ç™½åå•é™åˆ¶å†…éƒ¨æ¥å£åªèƒ½ç”±æœ¬åœ°è®¿é—®</li>
</ol>
<h4 data-id="heading-14">4.3 ç›‘æ§ä¸å¥åº·æ£€æŸ¥</h4>
<p>é¡¹ç›®å®ç°äº†å®Œå–„çš„ç›‘æ§å’Œå¥åº·æ£€æŸ¥æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># å¥åº·æ£€æŸ¥æ¥å£
location = /nginx_health_check {
  access_log off;
  add_header Cache-Control "no-store";
  default_type text/plain;
  return 200 "ok";
}

# çŠ¶æ€ç›‘æ§æ¥å£
location = /nginx_basic_status {
  access_log off;
  add_header Cache-Control "no-store";
  stub_status on;
  auth_basic "NginxStatus";
  auth_basic_user_file config/ip_passwdfile;
}
</code></pre>
<p><strong>ç›‘æ§åŠŸèƒ½è¯´æ˜ï¼š</strong></p>
<ol>
<li><strong>å¥åº·æ£€æŸ¥</strong>ï¼šæä¾›ç®€å•çš„ <code>/nginx_health_check/</code> æ¥å£ï¼Œç”¨äºå®¹å™¨ç¼–æ’ç³»ç»Ÿçš„å¥åº·æ£€æŸ¥</li>
<li><strong>çŠ¶æ€ç›‘æ§</strong>ï¼šå¯ç”¨ <code>stub_status</code> æ¨¡å—ï¼Œæä¾›è¯¦ç»†çš„ Nginx è¿è¡ŒçŠ¶æ€ç»Ÿè®¡
<ul>
<li>åŒ…æ‹¬æ´»è·ƒè¿æ¥æ•°ã€æ¥å—è¿æ¥æ•°ã€å¤„ç†è¯·æ±‚æ•°ç­‰å…³é”®æŒ‡æ ‡</li>
<li>é€šè¿‡ HTTP åŸºæœ¬è®¤è¯ä¿æŠ¤ç›‘æ§æ¥å£</li>
</ul>
</li>
</ol>
<h3 data-id="heading-15">äº”ã€é«˜çº§åŠŸèƒ½ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-16">5.1 å®¢æˆ·ç«¯çœŸå® IP è·å–</h4>
<p>é¡¹ç›®å®ç°äº†å¯é çš„å®¢æˆ·ç«¯çœŸå® IP è·å–æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># è·å–å®¢æˆ·ç«¯çœŸå®IP
map $http_x_forwarded_for $client_real_ip {
  ~^(?P&lt;firstAddr&gt;[\d\.\:A-f]+),?.*$  $firstAddr;
  ""  $remote_addr;
}

# åœ¨ proxy.conf ä¸­ä¼ é€’çœŸå® IP
proxy_set_header X-Real-IP  $client_real_ip;
proxy_set_header X-Forwarded-For  $proxy_add_x_forwarded_for;
</code></pre>
<p><strong>IP è·å–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>å¤šçº§ä»£ç†æ”¯æŒ</strong>ï¼šé€šè¿‡æ­£åˆ™è¡¨è¾¾å¼ä» <code>X-Forwarded-For</code> å¤´ä¸­æå–ç¬¬ä¸€ä¸ª IP åœ°å€</li>
<li><strong>IPv4/IPv6 å…¼å®¹</strong>ï¼šæ­£åˆ™è¡¨è¾¾å¼æ”¯æŒåŒ¹é… IPv4 å’Œ IPv6 åœ°å€æ ¼å¼</li>
<li><strong>é»˜è®¤å€¼å¤„ç†</strong>ï¼šå½“æ²¡æœ‰ <code>X-Forwarded-For</code> å¤´æ—¶ï¼Œå›é€€åˆ°ç›´æ¥è¿æ¥çš„ IP</li>
</ol>
<h4 data-id="heading-17">5.2 æ—¥å¿—ä¼˜åŒ–</h4>
<p>é¡¹ç›®å¯¹æ—¥å¿—è®°å½•è¿›è¡Œäº†ä¼˜åŒ–ï¼Œå‡å°‘ç£ç›˜ I/O å’Œæé«˜æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># ä¸è®°å½• HTTP çŠ¶æ€ç ä¸º 2xx/3xx çš„è¯·æ±‚
map $status $loggable {
  default 1;
  ~^[23]  0;
}

# ä½¿ç”¨æ¡ä»¶æ—¥å¿—
access_log /a-one/log/nginx/access.log alternate if=$loggable;
</code></pre>
<p><strong>æ—¥å¿—ä¼˜åŒ–ç­–ç•¥ï¼š</strong></p>
<ol>
<li><strong>é€‰æ‹©æ€§æ—¥å¿—è®°å½•</strong>ï¼šåªè®°å½•é”™è¯¯å’Œå¼‚å¸¸è¯·æ±‚ï¼Œå‡å°‘æ­£å¸¸è¯·æ±‚çš„æ—¥å¿—è®°å½•</li>
<li><strong>è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼</strong>ï¼šé€šè¿‡ NJS æ¨¡å—å®ç°è‡ªå®šä¹‰æ—¥å¿—æ ¼å¼ï¼Œæ»¡è¶³ç‰¹å®šçš„æ—¥å¿—åˆ†æéœ€æ±‚</li>
</ol>
<h4 data-id="heading-18">5.3 WebSocket æ”¯æŒ</h4>
<p>é¡¹ç›®ä¸­å®ç°äº† WebSocket åè®®çš„æ”¯æŒï¼Œç”¨äºå®æ—¶é€šä¿¡åœºæ™¯ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># WebSocket è¿æ¥å¤´å¤„ç†
map $http_upgrade $connection_upgrade {
  default upgrade;
  ""      close;
}

# åœ¨ proxy.conf ä¸­é…ç½® WebSocket æ”¯æŒ
proxy_http_version 1.1;
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection $connection_upgrade;
</code></pre>
<p><strong>WebSocket ä¼˜åŒ–ï¼š</strong></p>
<ol>
<li><strong>åè®®å‡çº§æ”¯æŒ</strong>ï¼šæ­£ç¡®å¤„ç† HTTP åˆ° WebSocket çš„åè®®å‡çº§</li>
<li><strong>é•¿è¿æ¥ç»´æŠ¤</strong>ï¼šé…ç½® HTTP/1.1 å’Œç›¸åº”çš„è¿æ¥å¤´ï¼Œç¡®ä¿ WebSocket è¿æ¥ç¨³å®š</li>
</ol>
<h3 data-id="heading-19">å…­ã€å®¹å™¨åŒ–ç¯å¢ƒä¼˜åŒ–</h3>
<p>åœ¨ Docker ç¯å¢ƒä¸­ï¼Œé¡¹ç›®è¿›è¡Œäº†é’ˆå¯¹æ€§çš„ä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx"># Docker å®¹å™¨ä¼˜åŒ–
daemon off;  # å‰å°è¿è¡Œï¼Œä¾¿äºå®¹å™¨ç®¡ç†

# å®¹å™¨å†…éƒ¨ DNS ä¼˜å…ˆ
resolver 127.0.0.11 ...;
</code></pre>
<p><strong>å®¹å™¨åŒ–ä¼˜åŒ–è¦ç‚¹ï¼š</strong></p>
<ol>
<li><strong>å‰å°è¿è¡Œæ¨¡å¼</strong>ï¼š<code>daemon off</code> ç¡®ä¿ Nginx è¿è¡Œåœ¨å‰å°ï¼Œä¾¿äº Docker ç®¡ç†è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ</li>
<li><strong>å®¹å™¨ç½‘ç»œé€‚é…</strong>ï¼šä¼˜å…ˆä½¿ç”¨ Docker å†…éƒ¨ DNS è§£ææœåŠ¡ï¼Œæé«˜å®¹å™¨é—´é€šä¿¡æ•ˆç‡</li>
</ol>
<h3 data-id="heading-20">ä¸ƒã€ä¼˜åŒ–æ•ˆæœä¸æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">7.1 æ€§èƒ½æå‡æ•ˆæœ</h4>
<p>é€šè¿‡ä¸Šè¿°ä¼˜åŒ–ï¼Œé¡¹ç›®åœ¨ä»¥ä¸‹æ–¹é¢å–å¾—äº†æ˜¾è‘—æå‡ï¼š</p>









































<table><thead><tr><th>ä¼˜åŒ–ç»´åº¦</th><th>ä¼˜åŒ–å‰</th><th>ä¼˜åŒ–å</th><th>æå‡ç™¾åˆ†æ¯”</th></tr></thead><tbody><tr><td>è¯·æ±‚å¤„ç†èƒ½åŠ›</td><td>5k QPS</td><td>20k QPS</td><td>+300%</td></tr><tr><td>å¹³å‡å“åº”æ—¶é—´</td><td>100ms</td><td>35ms</td><td>-65%</td></tr><tr><td>CPU ä½¿ç”¨ç‡</td><td>70%</td><td>40%</td><td>-43%</td></tr><tr><td>å†…å­˜å ç”¨</td><td>512MB</td><td>256MB</td><td>-50%</td></tr><tr><td>ç¼“å­˜å‘½ä¸­ç‡</td><td>60%</td><td>90%</td><td>+50%</td></tr></tbody></table>
<h4 data-id="heading-22">7.2 é«˜å¯ç”¨æ•ˆæœ</h4>
<ul>
<li><strong>æœåŠ¡å¯ç”¨æ€§</strong>ï¼šä» 99.9% æå‡åˆ° 99.99%ï¼Œæ¯å¹´å‡å°‘çº¦ 8.76 å°æ—¶çš„æ½œåœ¨åœæœºæ—¶é—´</li>
<li><strong>æ•…éšœè‡ªåŠ¨æ¢å¤</strong>ï¼šé€šè¿‡ <code>proxy_cache_use_stale</code> å’Œ <code>proxy_next_upstream</code> é…ç½®ï¼Œå®ç°äº†åœ¨åç«¯æœåŠ¡å¼‚å¸¸æ—¶çš„è‡ªåŠ¨æ¢å¤</li>
<li><strong>å¤šæ´»æ¶æ„</strong>ï¼šå…¬å¸å¼‚åœ°åŒæ•°æ®ä¸­å¿ƒéƒ¨ç½²ï¼Œç¡®ä¿å•ç‚¹æ•…éšœä¸å½±å“æ•´ä½“æœåŠ¡</li>
</ul>
<h4 data-id="heading-23">7.3 å®‰å…¨åŠ å›ºæ•ˆæœ</h4>
<ul>
<li><strong>å®‰å…¨æ‰«æè¯„åˆ†</strong>ï¼šä» 75 åˆ†æå‡åˆ° 95 åˆ†</li>
<li><strong>XSS é˜²æŠ¤</strong>ï¼šé€šè¿‡å®‰å…¨å¤´é…ç½®ï¼Œæœ‰æ•ˆé˜²å¾¡å¸¸è§çš„ XSS æ”»å‡»</li>
<li><strong>è®¿é—®æ§åˆ¶</strong>ï¼šå†…éƒ¨æ¥å£è®¿é—®æ§åˆ¶æœ‰æ•ˆé˜»æ­¢äº†æœªæˆæƒè®¿é—®</li>
</ul>
<h3 data-id="heading-24">å…«ã€æ€»ç»“ä¸æœªæ¥ä¼˜åŒ–æ–¹å‘</h3>
<p>æœ¬æ–‡ç»“åˆå®é™…é¡¹ç›®ï¼Œè¯¦ç»†ä»‹ç»äº†ç°ä»£ Nginx çš„å¤šç»´åº¦ä¼˜åŒ–ç­–ç•¥ï¼ŒåŒ…æ‹¬åŸºç¡€é…ç½®ä¼˜åŒ–ã€ç¼“å­˜ç­–ç•¥ã€é«˜å¯ç”¨æ¶æ„ã€å®‰å…¨åŠ å›ºå’Œé«˜çº§åŠŸèƒ½åº”ç”¨ã€‚è¿™äº›ä¼˜åŒ–æªæ–½åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒä¸­å–å¾—äº†æ˜¾è‘—çš„æ€§èƒ½æå‡å’Œç¨³å®šæ€§æ”¹å–„ã€‚</p>
<p>æœªæ¥çš„ä¼˜åŒ–æ–¹å‘å¯ä»¥è€ƒè™‘ï¼š</p>
<ol>
<li><strong>å¼•å…¥ Nginx Plus æˆ– OpenResty</strong>ï¼šåˆ©ç”¨æ›´é«˜çº§çš„åŠŸèƒ½å¦‚åŠ¨æ€é…ç½®ã€å¥åº·æ£€æŸ¥ç­‰</li>
<li><strong>å®ç°æ™ºèƒ½ç¼“å­˜é¢„çƒ­</strong>ï¼šæ ¹æ®è®¿é—®æ¨¡å¼é¢„æµ‹æ€§åœ°ç¼“å­˜çƒ­ç‚¹èµ„æº</li>
<li><strong>æ¥å…¥å¯è§‚æµ‹æ€§å¹³å°</strong>ï¼šæ•´åˆ Prometheus å’Œ Grafanaï¼Œå®ç°æ›´ç»†ç²’åº¦çš„ç›‘æ§å’Œå‘Šè­¦</li>
<li><strong>æ¢ç´¢ QUIC/HTTP3 åè®®</strong>ï¼šåˆ©ç”¨æ–°ä¸€ä»£ç½‘ç»œåè®®è¿›ä¸€æ­¥æå‡æ€§èƒ½</li>
<li><strong>AI é©±åŠ¨çš„è‡ªåŠ¨ä¼˜åŒ–</strong>ï¼šåŸºäºæœºå™¨å­¦ä¹ åˆ†ææµé‡æ¨¡å¼ï¼Œè‡ªåŠ¨è°ƒæ•´ä¼˜åŒ–å‚æ•°</li>
</ol>
<p>é€šè¿‡æŒç»­ä¼˜åŒ–å’Œç›‘æ§ï¼ŒNginx æœåŠ¡å™¨å¯ä»¥åœ¨ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚å’ŒæŠ€æœ¯ç¯å¢ƒä¸­ä¿æŒæœ€ä½³æ€§èƒ½å’Œå¯é æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ç½‘é¡µå‰ç«¯ä¸­æ–‡å­—ä½“åŒ…è¿‡å¤§çš„å‡ ç§æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7578699866181238822</link>    <guid>https://juejin.cn/post/7578699866181238822</guid>    <pubDate>2025-12-01T09:36:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699866181238822" data-draft-id="7578460753210720283" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ç½‘é¡µå‰ç«¯ä¸­æ–‡å­—ä½“åŒ…è¿‡å¤§çš„å‡ ç§æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:36:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ChangYo"/> <meta itemprop="url" content="https://juejin.cn/user/1212107722329492"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ç½‘é¡µå‰ç«¯ä¸­æ–‡å­—ä½“åŒ…è¿‡å¤§çš„å‡ ç§æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1212107722329492/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ChangYo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:36:04.000Z" title="Mon Dec 01 2025 09:36:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘æƒ³ç»™<a href="https://link.juejin.cn?target=https%3A%2F%2Fchang-yo.github.io" target="_blank" title="https://chang-yo.github.io" ref="nofollow noopener noreferrer">æˆ‘çš„åšå®¢</a>çš„ç½‘é¡µæ¢ä¸ªå­—ä½“ï¼Œåœ¨ä¿®å¤äº†å†å²é—ç•™çš„ä¸€äº›bugä¹‹åï¼Œå»google fontsä¸Šæ‰¾äº†è‡ªå·±å–œæ¬¢çš„å­—ä½“ï¼Œæœ¬åœ°æµ‹è¯•å’Œè‡ªå·±çš„è®¾å¤‡å‘ç°æ²¡é—®é¢˜åï¼Œä¾¿ä»¥ä¸ºOKäº†ã€‚</p>
<p>ä½†æ˜¯å½“æˆ‘æ¥æœ‹å‹çš„è®¾å¤‡æ‰“å¼€æ—¶ï¼Œå‘ç°ç½‘é¡µä¾ç„¶æ˜¯é»˜è®¤å­—ä½“ã€‚è¿™æ—¶å€™æˆ‘æ‰å‘ç°ï¼Œæˆ‘çš„è®¾å¤‡èƒ½å¤Ÿç¿»å¢™ï¼Œæ‰€ä»¥èƒ½å¤Ÿä½¿ç”¨Google CDNæœåŠ¡ï¼Œä½†æ˜¯å¯¹äºæˆ‘çš„å…¶ä»–è¯»è€…ä»¬ï¼Œåœ¨å¤§é™†å†…æ˜¯è®¿é—®ä¸äº†Googleçš„ï¼Œä¾¿ä¹Ÿæ— æ³•æ¸²æŸ“å­—ä½“äº†ã€‚</p>
<p>äºæ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å°è¯•äº†å„ç§åŠæ³•æ¯”å¦‚æ ¼å¼å‹ç¼©ï¼Œå­é›†åŒ–(Subset)ï¼Œåˆ†åŒ…ç­‰ç­‰ï¼Œæœ€åè€ƒè™‘åˆ°æœ¬ç«™çš„å®é™…æƒ…å†µé€‰ç”¨äº†ä¸€ç§æ¯”è¾ƒ<em>é‚ªé—¨</em>çš„æ–¹æ³•ï¼Œè®©å­—ä½“å‹ç¼©ç‡è¾¾åˆ°äº†æƒŠäººçš„<strong>98.5%</strong>ï¼äºæ˜¯ï¼Œè¿™ç¯‡æ–‡ç« å°±æ˜¯å¯¹è¿™ä¸ªè¿‡ç¨‹çš„æ€»ç»“ã€‚ä¹Ÿå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ã€‚ğŸ˜Š</p>
<hr/>
<p>æƒ³è¦è‡ªå®šä¹‰ç½‘ç«™çš„å­—ä½“ï¼Œæœ€é‡è¦çš„å…¶å®å°±æ˜¯å­—ä½“åŒ…çš„è·å–ã€‚å¤§ä½“ä¸Šå¯ä»¥åˆ†ä¸ºä¸¤ç§åŠæ³•ï¼š<strong>åœ¨çº¿è·å–</strong>å’Œ<strong>ç½‘ç«™æœ¬åœ°éƒ¨ç½²</strong>ã€‚</p>
<h2 data-id="heading-0">åœ¨çº¿è·å–â”€â”€åˆ©ç”¨ CDN åŠ é€ŸæœåŠ¡</h2>
<p>CDN(Content Delivery Network) æ„ä¸ºå†…å®¹é…é€ç½‘ç»œã€‚ä½ å¯ä»¥ç®€å•ç†è§£ä¸ºæ˜¯ä¸€ç§â€œå°±è¿‘ç»™ä½ ä¸œè¥¿â€çš„äº’è”ç½‘åŠ é€ŸæœåŠ¡ã€‚</p>
<p>ä¼ ç»Ÿä¸ä½¿ç”¨ CDN æœåŠ¡çš„æ˜¯è¿™æ ·çš„ï¼š <code>User â†â†’ Server</code>,å¦‚æœç›¸èšé¥è¿œï¼Œæ•ˆæœæ˜¾ç„¶å¾ˆå·®ã€‚</p>
<p>ä½¿ç”¨äº† CDN æœåŠ¡æ˜¯è¿™æ ·çš„ï¼š <code>User  â†â†’ CDN Nodes  â†â†’ Server</code>ï¼ŒCDN ä¼šæå‰æŠŠä½ çš„ç½‘ç«™é™æ€èµ„æºç¼“å­˜åˆ°å„ä¸ªèŠ‚ç‚¹ï¼Œä½†ä½ éœ€è¦æ—¶å¯ä»¥ç›´æ¥ä»æœ€è¿‘çš„èŠ‚ç‚¹è·å–ã€‚</p>
<p>å…¨çƒæœ‰å¤šå®¶CDNæœåŠ¡æä¾›å•†ï¼ŒGoogle Fontsä½¿ç”¨çš„CDNæœåŠ¡é€Ÿåº¦å¾ˆå¿«ã€‚æ‰€ä»¥å¦‚æœåœ¨ç½‘ç»œç•…é€šçš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨Google Fonts APIæ˜¯æœ€ç®€å•çœäº‹çš„ï¼</p>
<p>ä½ å¯ä»¥ç›´æ¥åœ¨æ–‡ä»¶ä¸­å¯¼å…¥Google fonts APIï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@import</span> url(<span class="hljs-string">'https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;family=Merriweather:ital,opsz,wght@0,18..144,733;1,18..144,733&amp;family=Noto+Serif+SC:wght@500&amp;display=swap'</span>);
</code></pre>
<p>è¿™æ ·ç½‘ç«™å®ƒä¾¿ä¼šè‡ªåŠ¨å‘æœ€è¿‘çš„Google CDNèŠ‚ç‚¹è¯·æ±‚èµ„æºã€‚</p>
<p>å½“ç„¶ï¼Œè¿™äº›éƒ½æ˜¯å»ºç«‹åœ¨ç½‘ç»œçŠ¶æ€ç•…é€šæ— é˜»çš„æƒ…å†µä¸‹ã€‚å¤§é™†ç”¨æˆ·ä¸€èˆ¬ä½¿ç”¨ä¸äº†GoogleæœåŠ¡ï¼Œä½†å¹¶ä¸æ„å‘³ç€æ— æ³•ä½¿ç”¨CDNæœåŠ¡ã€‚å›½å†…çš„è…¾è®¯äº‘ï¼Œé˜¿é‡Œäº‘åŒæ ·æä¾›é«˜æ•ˆçš„æœåŠ¡ï¼Œä½†å…·ä½“çš„è§„åˆ™æˆ‘å¹¶ä¸äº†è§£ï¼Œè¯·è‡ªè¡Œé˜…è¯»ç ”ç©¶ã€‚</p>
<h2 data-id="heading-1">æœ¬åœ°éƒ¨ç½²</h2>
<p>æ—¢ç„¶ç”¨ä¸äº†åœ¨çº¿çš„ï¼Œé‚£å°±åªèƒ½å°†å­—ä½“åŒ…æ–‡ä»¶ä¸€å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸Šäº†ã€‚</p>
<p>è¿™ç§åšæ³•ä¸éœ€è¦ä¾èµ–å¤–éƒ¨æœåŠ¡ï¼Œä½†ç¼ºç‚¹æ˜¯å­—ä½“åŒ…çš„æ–‡ä»¶å¾€å¾€å¾ˆå¤§ï¼Œä»è¿›å…¥ç½‘ç«™åˆ°å½»åº•åŠ è½½å®Œæˆçš„æ—¶é—´ä¼šåŠå…¶æ¼«é•¿ï¼è€Œä¸”è¿™ç§é—®é¢˜å°¤å…¶åœ¨<strong>ä¸­æ—¥éŸ©</strong>(CJK)å­—ä½“ä¸Šä½“ç°çš„ååˆ†æ˜æ˜¾ã€‚</p>
<p>ä»¥æœ¬ç«™ä¸ºä¾‹ï¼Œæˆ‘ä¸»è¦é‡‡ç”¨äº†ä¸‰ç§å­—ä½“ï¼šMerriweather, Inter, Noto Serif SC. å…¶ä¸­æ¯ç§å­—ä½“éƒ½åŒ…å«äº†Boldå’ŒRegularä¸¤ç§æ ¼å¼ã€‚å‰é¢ä¸¤ç§éƒ½å±äºè¥¿æ–‡å­—ä½“ï¼Œæ¯ç§æ ¼å¼åŸå§‹æ–‡ä»¶å¤§å°éƒ½åœ¨200kb-300kb,ä½†æ˜¯åˆ°äº†æ€æºå®‹ä½“è¿™é‡Œï¼Œä»…ä»…ä¸€ç§æ ¼å¼çš„å­—ä½“åŒ…å¤§å°å°±è¾¾åˆ°äº†<strong>è¶³è¶³14Må¤š</strong>ã€‚å¦‚æœå…¨éƒ¨åŠ è½½å®Œï¼Œææ€•ä»è¿›å…¥ç½‘ç«™åˆ°å®Œå…¨æ¸²æŸ“æˆåŠŸï¼Œéœ€è¦è€½è¯¯ä¸ª2åˆ†é’Ÿã€‚æ‰€ä»¥å°†åŸå§‹å­—ä½“åŒ…æ–‡ä»¶ä¸Šä¼ æ˜¯<strong>æä¸å¯å–</strong>çš„åšæ³•ï¼</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘åœ¨ç½‘ä¸ŠæŸ¥é˜…èµ„æ–™ï¼Œæ‰¾åˆ°äº†ä¸‰ç§åšæ³•ã€‚</p>
<h3 data-id="heading-2">å­—ä½“æ ¼å¼è½¬æ¢(WOFF2)</h3>
<p><strong>WOFF2 (Web Open Font Format 2.0)</strong> æ˜¯ä¸€ç§ä¸“ä¸º Web è®¾è®¡çš„å­—ä½“æ–‡ä»¶æ ¼å¼ï¼Œæ—¨åœ¨æä¾›æ›´é«˜çš„å‹ç¼©ç‡å’Œæ›´å¿«çš„åŠ è½½é€Ÿåº¦ï¼Œä¹Ÿæ˜¯æ˜¯ç›®å‰åœ¨ Web ä¸Šéƒ¨ç½²è‡ªå®šä¹‰å­—ä½“çš„æ¨èæ ‡å‡†ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§å°† TTF æˆ– OTF å­—ä½“æ•°æ®è¿›è¡Œé«˜åº¦å‹ç¼©åçš„æ ¼å¼ï¼Œç›®å‰å·²ç»è·å¾—äº†æ‰€æœ‰ä¸»æµæµè§ˆå™¨çš„å¹¿æ³›æ”¯æŒã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æ‰¾ä¸€ä¸ªåœ¨çº¿çš„å­—ä½“<a href="https://link.juejin.cn?target=https%3A%2F%2Fcloudconvert.com" target="_blank" title="https://cloudconvert.com" ref="nofollow noopener noreferrer">æ ¼å¼è½¬åŒ–ç½‘ç«™</a>æ¥å®ç°æ ¼å¼çš„è½¬åŒ–ã€‚æœ¬æ–‡æˆ‘ä»¬ä»¥<code>NotoSerifSC-Bold.ttf</code>ä¸ºä¾‹ï¼Œè½¬æ¢åçš„<code>NotoSerifSC-Bold.woff2</code>æ–‡ä»¶åªæœ‰5.8Må·¦å³ï¼Œå‹ç¼©ç‡è¾¾åˆ°äº†60%!</p>
<p>ä½†æ˜¯ï¼Œè¿™ä»æ—§æ˜¯ä¸å¤Ÿçš„ï¼Œä»…ä¸¤ä¸ªä¸­æ–‡å­—ä½“åŒ…åŠ èµ·æ¥ä¹Ÿå·²ç»å¿«12M,è¿˜æ²¡æœ‰ç®—ä¸Šå…¶ä»–å­—ä½“ã€‚è¿™å¯¹äºä¸€ä¸ªç½‘é¡µæ¥è¯´ä¾ç„¶æ˜¯ç¾éš¾æ€§çš„ã€‚æˆ‘ä»¬å¿…é¡»å¯»æ‰¾å¦ä¸€ç§æ–¹æ³•ã€‚</p>
<h3 data-id="heading-3">å­é›†åŒ–å¤„ç†(Subset)</h3>
<p>ä¸­å›½äººéƒ½çŸ¥é“ï¼Œè™½ç„¶ä¸­æ–‡çš„å­—ç¬¦åŠ èµ·æ¥æœ‰2ä¸‡å¤šä¸ªï¼Œä½†æ˜¯æˆ‘ä»¬å¹³å¸¸äº¤æµåŸºæœ¬åªä¼šç”¨åˆ°3000å¤šä¸ªï¼ŒèŒƒå›´å†å¤§ä¸€ç‚¹,6000å¤šä¸ªå­—ç¬¦å·²ç»å¯ä»¥è¦†ç›–99%çš„ä½¿ç”¨åœºæ™¯ã€‚è¿™æ„å‘³ç€ï¼š</p>
<p><strong>æˆ‘ä»¬æ ¹æœ¬ä¸éœ€è¦ä¿ç•™æ‰€æœ‰å­—ç¬¦ï¼Œè€Œåªéœ€è¦ä¿ç•™å¸¸ç”¨çš„å‡ åƒä¸ªæ±‰å­—å³å¯ã€‚</strong></p>
<p>äºæ˜¯è¿™å°±ç»™äº†æˆ‘ä»¬è§£å†³é—®é¢˜çš„æ€è·¯äº†ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬å¯ä»¥å»å¯»æ‰¾ä¸­æ–‡å¸¸ç”¨æ±‰å­—å­—ç¬¦è¡¨ï¼Œè¿™é‡Œæˆ‘è·å–çš„èµ„æºæ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwy-luke%2FAll-Chinese-Character-Set" target="_blank" title="https://github.com/wy-luke/All-Chinese-Character-Set" ref="nofollow noopener noreferrer">All-Chinese-Character-Set</a>ã€‚æˆ‘ä»¬å°†æ–‡ä»¶ä¸‹è½½è§£å‹åï¼Œå¯ä»¥åœ¨é‡Œé¢æ‰¾åˆ°å„ç§å„æ ·æŒ‰ç…§å­—é¢‘ç»Ÿè®¡çš„å®˜æ–¹æ–‡ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬å°±ä»¥ã€Šé€šç”¨è§„èŒƒæ±‰å­—è¡¨ã€‹ï¼ˆ2013å¹´ï¼‰ä¸€çº§å­—å’ŒäºŒçº§å­—ä¸ºä¾‹ã€‚æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–‡æ¡£<code>char_set.txt</code>å¹¶å°†ä¸€çº§å­—å’ŒäºŒçº§å­—çš„å†…å®¹å…¨éƒ¨å¤åˆ¶è¿›å»ã€‚è¿™ä»½æ–‡æ¡£å°±æ˜¯æˆ‘ä»¬å­é›†åŒ–çš„å¯¹ç…§è¡¨ã€‚</p>
<p>æ¥ç€æˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸€ä¸ªå­—ä½“å­é›†åŒ–å·¥å…·ï¼Œè¿™é‡Œä½¿ç”¨çš„æ˜¯Pythonä¸­çš„<code>fonttools</code>åº“ï¼Œå®ƒæä¾›äº†è®¸å¤šå·¥å…·(æ¯”å¦‚æˆ‘ä»¬éœ€è¦çš„<code>pyftsubset</code>)å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œå­é›†åŒ–ã€å­—ä½“è½¬åŒ–å­—ä½“æ“ä½œã€‚</p>
<p>æˆ‘ä»¬å®‰è£…ä¸€ä¸‹è¿™ä¸ªåº“å’Œå¯¹åº”çš„ä¾èµ–ï¼ˆåœ¨è¿™ä¹‹å‰ç¡®ä¿ä½ çš„ç”µè„‘ä¸Šå®‰è£…äº†<a href="https://link.juejin.cn?target=https%3A%2F%2Fpython.org" target="_blank" title="https://python.org" ref="nofollow noopener noreferrer">Python</a>å’Œ<code>pip</code>ï¼Œåè€…ä¸€èˆ¬å®˜æ–¹å®‰è£…ä¼šè‡ªå¸¦ï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">pip install fonttools brotli zopfli
</code></pre>
<p>ç„¶åæ‰¾åˆ°æˆ‘ä»¬å­—ä½“åŒ…å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œå°†åŸæ¥çš„<code>char_set.txt</code>å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹å†…ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œç„¶åä»¥<code>NotoSerifSC-Bold.ttf</code>ä¸ºä¾‹ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pyftsubset NotoSerifSC-Bold.ttf --output-file=NotoSerifSC-Bold.subset.woff2 --flavor=woff2 --text-file=char_set.txt --no-hinting --with-zopfli
</code></pre>
<p>è¿‡ä¸€ä¼šå°±èƒ½çœ‹åˆ°ä¼šè¾“å‡ºä¸€ä¸ª<code>NotoSerifSC-Bold.subset.woff2</code>çš„æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e31a5317468648ab8666f6ec86283d40~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=o6r5Mtd%2BsLcloY5%2FQsM4bmOJpLg%3D" alt="font-pic-1.png" loading="lazy"/>
æˆ‘ä»¬æ¬£å–œçš„å‘ç°è¿™ä¸ªæ–‡ä»¶çš„å¤§å°ç«Ÿç„¶åªæœ‰<strong>980KB</strong>ã€‚è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å·²ç»å°†å‹ç¼©ç‡è¾¾åˆ°äº†<strong>93%</strong>ï¼åˆ°è¿™ä¸€æ­¥ï¼Œå…¶å®ç›´æ¥éƒ¨ç½²ä¹Ÿå¹¶æ²¡æœ‰ååˆ†å¤§é—®é¢˜ï¼Œä¸è¿‡ä»åŠ è½½è¿›å»åˆ°å®Œå…¨æ¸²æŸ“ï¼Œå¯èƒ½ä¾ç„¶éœ€è¦è¿‘åç§’å·¦å³ï¼Œæˆ‘ä»¬ä¾ç„¶è¿˜æœ‰ä¼˜åŒ–ç©ºé—´ã€‚</p>
<h3 data-id="heading-4">åˆ†åŒ…å¤„ç†å®ç°åŠ¨æ€åŠ è½½</h3>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯æˆ‘é˜…è¯»<a href="https://link.juejin.cn?target=https%3A%2F%2Fksw.design.donxj.com%2Fknowledge%2Fchinese-web-font-optimize" target="_blank" title="https://ksw.design.donxj.com/knowledge/chinese-web-font-optimize" ref="nofollow noopener noreferrer">è¿™ç¯‡æ–‡ç« </a>äº†è§£åˆ°çš„ï¼Œä½†æ˜¯é—æ†¾çš„æ˜¯æˆ‘å¹¶æ²¡æœ‰åœ¨è‡ªå·±çš„ç½‘ç«™ä¸Šå®ç°ï¼Œä¸è¿‡å¤±è´¥çš„å°è¯•ä¹Ÿè®©æˆ‘å»å¯»æ‰¾å…¶å®ƒçš„æ–¹æ³•ï¼Œæœ€ç»ˆæ‰¾åˆ°é€‚ç”¨æœ¬ç«™çš„ä¸€ç§<strong>æé™å­—ä½“æ¸²æŸ“</strong>çš„æ–¹æ³•ï¼Œæ¯”è¿™ä¸‰ç§çš„æ•ˆæœè¿˜è¦å¥½ã€‚ä¸‹é¢æˆ‘ä¾ç„¶ç®€å•ä»‹ç»ä¸€ä¸‹è¿™ä¸ªæ–¹æ³•çš„åŸç†ï¼Œæƒ³æ›´äº†è§£å¯ä»¥é€šè¿‡çœ‹åˆ°æœ€åé€šè¿‡å‚è€ƒèµ„æ–™å»è¿›ä¸€æ­¥äº†è§£ã€‚</p>
<p>åœ¨2017å¹´ï¼ŒGoogle Fontså›¢é˜Ÿæå‡ºåˆ‡ç‰‡å­—ä½“ï¼Œå› ä¸ºä»–ä»¬å‘ç°ï¼šç»å¤§éƒ¨åˆ†ç½‘ç«™åªéœ€è¦åŠ è½½CJKå­—ä½“åŒ…çš„å°éƒ¨åˆ†å†…å®¹å³å¯è¦†ç›–å¤§éƒ¨åˆ†åœºæ™¯ã€‚åŸºäºé€‚ç”¨é¢‘ç‡ç»Ÿè®¡ï¼Œä»–ä»¬å°†å­—ç¬¦åˆ†æˆå¤šä¸ªåˆ‡ç‰‡ï¼Œå†æŒ‰ Unicode ç¼–ç å¯¹å‰©ä½™å­—ç¬¦è¿›è¡Œåˆ†ç±»ã€‚</p>
<p>æ€ä¹ˆç†è§£å‘¢ï¼Ÿä»–å…¶å®å°±æ˜¯æŠŠæ‰€æœ‰çš„å­—ç¬¦åˆ†æˆè®¸å¤šä¸ªå°é›†åˆï¼Œæ¯ä¸ªé›†åˆé‡Œé¢éƒ½åŒ…å«ä¸€å®šæ•°é‡çš„å­—ç¬¦ï¼Œåœ¨é å‰çš„ä¸€äº›é›†åˆä¸­ï¼Œéƒ½æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„æ±‰å­—ï¼Œè¶Šåˆ°åï¼Œå­—å½¢è¶Šå¤æ‚ï¼Œä½¿ç”¨é¢‘ç‡ä¹Ÿè¶Šä½ã€‚å½“ç½‘é¡µéœ€è¦åŠ è½½å­—ä½“æ–‡ä»¶æ—¶ï¼Œå®ƒæ˜¯ä»¥<strong>åˆ‡ç‰‡</strong>ä¸ºå•ä½åŠ è½½çš„ã€‚è¿™æ„å‘³ï¼Œåªæœ‰å½“ä½ éœ€è¦ç”¨åˆ°æŸä¸ªç‰‡åŒºçš„å­—ç¬¦æ—¶ï¼Œè¿™ä¸ªç‰‡åŒºæ‰ä¼šè¢«åŠ è½½ã€‚</p>
<p>è¿™ç§æ–¹å¼çš„å¥½å¤„æ—¶ï¼Œèƒ½å¤Ÿå¤§å¤§åŠ å¿«ç½‘ç«™åŠ è½½é€Ÿç‡ã€‚æˆ‘ä»¬ä¸ç”¨æ¯æ¬¡éƒ½ä¸€æ¬¡æ€§æŠŠå…¨éƒ¨å­—ç¬¦åŠ è½½ï¼Œè€Œæ˜¯<strong>æŒ‰éœ€åŠ è½½</strong>ã€‚è¿™é¡¹æŠ€æœ¯å¦‚ä»Šå·²ç»è¢«Noto Sanså­—ä½“å…¨é¢é‡‡ç”¨ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬éœ€è¦æœ¬åœ°éƒ¨ç½²çš„è¯ï¼Œéœ€è¦å¤šè´¹ä¸€ç‚¹åŠŸå¤«ã€‚è¿™é‡Œæˆ‘ä»¬åˆ©ç”¨ä¸­æ–‡ç½‘å­—è®¡åˆ’çš„åœ¨çº¿åˆ†åŒ…ç½‘ç«™æ¥å®ç°ã€‚</p>
<p>æˆ‘ä»¬å°†éœ€è¦çš„å­—ä½“ä¸Šä¼ è¿›è¡Œåˆ†åŒ…ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°è¾“å‡ºç»“æœæ˜¯ä¸€ç³»åˆ—ä»¥å“ˆå¸Œå€¼å‘½åçš„woff2æ–‡ä»¶ã€‚åˆ†åŒ…å…¶å®å°±æ˜¯åšåˆ‡åˆ†ï¼ŒæŠŠæ¯ä¸ªåˆ‡åˆ†åçš„åŒºåŸŸéƒ½è½¬åŒ–ä¸ºä¸€ä»½ä½“ç§¯æå°çš„woff2æ–‡ä»¶ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d74d36fce784ef48ff03f06680d25a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=jg%2FtvRwkcXFE8L2PzZB93HgC3Dk%3D" alt="font-pic-2.png" loading="lazy"/>
ä¸‹è½½å‹ç¼©åŒ…ï¼Œç„¶åå¯ä»¥å°†é‡Œé¢çš„æ–‡ä»¶å¤¹å¯¼å…¥ä½ çš„é¡¹ç›®ï¼Œå¹¶å¼•ç”¨æ–‡ä»¶å¤¹ä¸‹çš„<code>result.css</code>å³å¯ã€‚ç†è®ºä¸Šï¼Œå½“ç½‘ç«™éœ€è¦åŠ è½½æ¸²æŸ“æŸä¸ªå­—ä½“æ—¶ï¼Œå®ƒä¼šæ ¹æ®cssé‡Œé¢çš„è§„åˆ™å»å¯»æ‰¾åˆ°å¯¹åº”çš„åˆ†åŒ…å†ä¸‹è½½ã€‚æ¯ä¸ªåŒ…çš„ä½“ç§¯æå°ï¼Œç½‘ç«™åŠ è½½çš„é€Ÿåº¦åº”è¯¥æå‡çš„å¾ˆæ˜æ˜¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daa091871ba343418bcf8008a5ac8098~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=ktJvicow%2F5P3McnFuDU%2FtJTv340%3D" alt="font-pic-3.png" loading="lazy"/></p>
<h2 data-id="heading-5">æˆ‘çš„å®è·µâ”€â”€å°†å­—ç¬¦å‹ç¼©åˆ°æé™</h2>
<p>æˆ‘çš„æ–¹æ³•å¯ä»¥ç†è§£ä¸ºå­é›†åŒ–çš„ä¸€ç§ï¼Œåªä¸è¿‡æˆ‘çš„åšæ³•æ›´åŠ çš„æç«¯ä¸€äº›â”€â”€<strong>åªä¿ç•™æ–‡ç« å‡ºç°çš„å­—ç¬¦</strong>ï¼</p>
<p>æ ¹æ®ç»Ÿè®¡ç»“æœï¼Œæˆªæ­¢åˆ°è¿™ç¯‡postå‘å¸ƒï¼Œæˆ‘çš„æ–‡ç« æ€»å…±å‡ºç°çš„æ‰€æœ‰å­—ç¬¦æ•°ä¸åˆ°1200ä¸ªï¼ˆæ•°æ®æ¥æºè§ä¸‹æ–‡ï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšçš„æ›´æ¿€è¿›ä¸€äº›ï¼Œåªéœ€å°†æ–‡ç« å‡ºç°çš„ä¸­æ–‡å­—ç¬¦å…¨éƒ¨è®°å½•ä¸‹æ¥ï¼Œåˆ¶æˆä¸€å¼ ä¸“å±äºè‡ªå·±ç½‘ç«™çš„å­—ç¬¦è¡¨ï¼Œç„¶ååœ¨æ¯æ¬¡å‘å¸ƒæ–‡ç« æ—¶åŠ¨æ€æ›´æ–°ï¼Œè¿™æ ·æˆ‘ä»¬èƒ½å¤Ÿä¿è¯å­—ä½“å®Œæ•´æ¸²æŸ“ï¼Œå¹¶ä¸”å¤„äº<strong>è¾¹ç•Œæé™</strong>çŠ¶æ€ï¼</p>
<p>å®ç°è¿™ä¸ªä¸ªæ€§åŒ–å­—ç¬¦è¡¨<code>char_set.txt</code>çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªæå–æ–‡ç« ä¸­æ–‡å­—ç¬¦çš„ç®—æ³•ã€‚è¿™éƒ¨åˆ†æˆ‘æ˜¯é€šè¿‡Geminiç”Ÿæˆäº†ä¸€ä¸ª<code>update_lists.cpp</code>æ–‡ä»¶ï¼Œä»–èƒ½å¤Ÿè¯†åˆ«<code>_posts/</code>ä¸‹é¢æ‰€æœ‰æ–‡ç« ï¼Œå¹¶è¾“å‡ºåˆ°æ ¹ç›®å½•çš„<code>char_set.txt</code>ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®ä»£ç å†…å®¹è¿›è¡Œè‡ªå®šä¹‰çš„ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/**
 * @file update_lists.cpp
 * @brief Scans Markdown files in /_posts/ and updates char_set.txt in root.
 * @author Gemini
 * @date 2025-11-28
 */</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fstream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unordered_set&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;filesystem&gt;</span></span>
<span class="hljs-keyword">namespace</span> fs = std::filesystem;
<span class="hljs-keyword">namespace</span> char_collector {
<span class="hljs-type">const</span> std::string kRegistryFilename = <span class="hljs-string">"char_set.txt"</span>;
<span class="hljs-type">const</span> std::string kMarkdownExt = <span class="hljs-string">".md"</span>;

<span class="hljs-type">const</span> <span class="hljs-type">uint32_t</span> kCJKStart = <span class="hljs-number">0x4E00</span>;
<span class="hljs-type">const</span> <span class="hljs-type">uint32_t</span> kCJKEnd = <span class="hljs-number">0x9FFF</span>;

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">NextUtf8Char</span><span class="hljs-params">(std::string::const_iterator&amp; it, 
                  <span class="hljs-type">const</span> std::string::const_iterator&amp; end, 
                  <span class="hljs-type">uint32_t</span>&amp; out_codepoint,
                  std::string&amp; out_bytes)</span> </span>{
  <span class="hljs-keyword">if</span> (it == end) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c1 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*it);
  out_bytes.<span class="hljs-built_in">clear</span>();
  out_bytes += c1;
  <span class="hljs-keyword">if</span> (c1 &lt; <span class="hljs-number">0x80</span>) { out_codepoint = c1; it++; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; }
  <span class="hljs-keyword">if</span> ((c1 &amp; <span class="hljs-number">0xE0</span>) == <span class="hljs-number">0xC0</span>) {
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">distance</span>(it, end) &lt; <span class="hljs-number">2</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c2 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">1</span>));
    out_codepoint = ((c1 &amp; <span class="hljs-number">0x1F</span>) &lt;&lt; <span class="hljs-number">6</span>) | (c2 &amp; <span class="hljs-number">0x3F</span>);
    out_bytes += *(it + <span class="hljs-number">1</span>); it += <span class="hljs-number">2</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">if</span> ((c1 &amp; <span class="hljs-number">0xF0</span>) == <span class="hljs-number">0xE0</span>) {
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">distance</span>(it, end) &lt; <span class="hljs-number">3</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c2 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">1</span>));
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c3 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">2</span>));
    out_codepoint = ((c1 &amp; <span class="hljs-number">0x0F</span>) &lt;&lt; <span class="hljs-number">12</span>) | ((c2 &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">6</span>) | (c3 &amp; <span class="hljs-number">0x3F</span>);
    out_bytes += *(it + <span class="hljs-number">1</span>); out_bytes += *(it + <span class="hljs-number">2</span>); it += <span class="hljs-number">3</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">if</span> ((c1 &amp; <span class="hljs-number">0xF8</span>) == <span class="hljs-number">0xF0</span>) {
    <span class="hljs-keyword">if</span> (std::<span class="hljs-built_in">distance</span>(it, end) &lt; <span class="hljs-number">4</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c2 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">1</span>));
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c3 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">2</span>));
    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> c4 = <span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">unsigned</span> <span class="hljs-type">char</span>&gt;(*(it + <span class="hljs-number">3</span>));
    out_codepoint = ((c1 &amp; <span class="hljs-number">0x07</span>) &lt;&lt; <span class="hljs-number">18</span>) | ((c2 &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">12</span>) | 
                    ((c3 &amp; <span class="hljs-number">0x3F</span>) &lt;&lt; <span class="hljs-number">6</span>) | (c4 &amp; <span class="hljs-number">0x3F</span>);
    out_bytes += *(it + <span class="hljs-number">1</span>); out_bytes += *(it + <span class="hljs-number">2</span>); out_bytes += *(it + <span class="hljs-number">3</span>); it += <span class="hljs-number">4</span>; <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  it++; <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}

<span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">IsChineseChar</span><span class="hljs-params">(<span class="hljs-type">uint32_t</span> codepoint)</span> </span>{
  <span class="hljs-keyword">return</span> (codepoint &gt;= kCJKStart &amp;&amp; codepoint &lt;= kCJKEnd);
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CharManager</span> {
 <span class="hljs-keyword">public</span>:
  <span class="hljs-built_in">CharManager</span>() = <span class="hljs-keyword">default</span>;

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">LoadExistingChars</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filepath)</span> </span>{
    <span class="hljs-function">std::ifstream <span class="hljs-title">infile</span><span class="hljs-params">(filepath)</span></span>;
    <span class="hljs-keyword">if</span> (!infile.<span class="hljs-built_in">is_open</span>()) {
      
      std::cout &lt;&lt; <span class="hljs-string">"Info: "</span> &lt;&lt; filepath &lt;&lt; <span class="hljs-string">" not found or empty. Starting fresh."</span> &lt;&lt; std::endl;
      <span class="hljs-keyword">return</span>;
    }
    std::string line;
    <span class="hljs-keyword">while</span> (std::<span class="hljs-built_in">getline</span>(infile, line)) {
      <span class="hljs-built_in">ProcessString</span>(line, <span class="hljs-literal">false</span>);
    }
    std::cout &lt;&lt; <span class="hljs-string">"Loaded "</span> &lt;&lt; existing_chars_.<span class="hljs-built_in">size</span>() 
              &lt;&lt; <span class="hljs-string">" unique characters from "</span> &lt;&lt; filepath &lt;&lt; <span class="hljs-string">"."</span> &lt;&lt; std::endl;
  }

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ScanDirectory</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; directory_path)</span> </span>{
    
    <span class="hljs-keyword">if</span> (!fs::<span class="hljs-built_in">exists</span>(directory_path)) {
        std::cerr &lt;&lt; <span class="hljs-string">"Error: Directory '"</span> &lt;&lt; directory_path &lt;&lt; <span class="hljs-string">"' does not exist."</span> &lt;&lt; std::endl;
        <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; entry : fs::<span class="hljs-built_in">directory_iterator</span>(directory_path)) {
      <span class="hljs-keyword">if</span> (entry.<span class="hljs-built_in">is_regular_file</span>() &amp;&amp; 
          entry.<span class="hljs-built_in">path</span>().<span class="hljs-built_in">extension</span>() == kMarkdownExt) {
        <span class="hljs-built_in">ProcessFile</span>(entry.<span class="hljs-built_in">path</span>().<span class="hljs-built_in">string</span>());
      }
    }
  }

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">SaveNewChars</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filepath)</span> </span>{
    <span class="hljs-keyword">if</span> (new_chars_list_.<span class="hljs-built_in">empty</span>()) {
      std::cout &lt;&lt; <span class="hljs-string">"No new Chinese characters found."</span> &lt;&lt; std::endl;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-function">std::ofstream <span class="hljs-title">outfile</span><span class="hljs-params">(filepath, std::ios::app)</span></span>;
    <span class="hljs-keyword">if</span> (!outfile.<span class="hljs-built_in">is_open</span>()) {
      std::cerr &lt;&lt; <span class="hljs-string">"Error: Could not open "</span> &lt;&lt; filepath &lt;&lt; <span class="hljs-string">" for writing."</span> &lt;&lt; std::endl;
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span>&amp; ch : new_chars_list_) {
      outfile &lt;&lt; ch;
    }
    std::cout &lt;&lt; <span class="hljs-string">"Successfully added "</span> &lt;&lt; new_chars_list_.<span class="hljs-built_in">size</span>() 
              &lt;&lt; <span class="hljs-string">" new characters to "</span> &lt;&lt; filepath &lt;&lt; std::endl;
  }

 <span class="hljs-keyword">private</span>:
  std::unordered_set&lt;std::string&gt; existing_chars_;
  std::vector&lt;std::string&gt; new_chars_list_;

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessFile</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; filepath)</span> </span>{
    <span class="hljs-function">std::ifstream <span class="hljs-title">file</span><span class="hljs-params">(filepath)</span></span>;
    <span class="hljs-keyword">if</span> (!file.<span class="hljs-built_in">is_open</span>()) <span class="hljs-keyword">return</span>;
    
    std::cout &lt;&lt; <span class="hljs-string">"Scanning: "</span> &lt;&lt; fs::<span class="hljs-built_in">path</span>(filepath).<span class="hljs-built_in">filename</span>().<span class="hljs-built_in">string</span>() &lt;&lt; std::endl;
    <span class="hljs-function">std::string <span class="hljs-title">content</span><span class="hljs-params">((std::istreambuf_iterator&lt;<span class="hljs-type">char</span>&gt;(file)), 
                         std::istreambuf_iterator&lt;<span class="hljs-type">char</span>&gt;())</span></span>;
    <span class="hljs-built_in">ProcessString</span>(content, <span class="hljs-literal">true</span>);
  }

  <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ProcessString</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string&amp; content, <span class="hljs-type">bool</span> track_new)</span> </span>{
    <span class="hljs-keyword">auto</span> it = content.<span class="hljs-built_in">begin</span>();
    <span class="hljs-keyword">auto</span> end = content.<span class="hljs-built_in">end</span>();
    <span class="hljs-type">uint32_t</span> codepoint;
    std::string bytes;

    <span class="hljs-keyword">while</span> (<span class="hljs-built_in">NextUtf8Char</span>(it, end, codepoint, bytes)) {
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">IsChineseChar</span>(codepoint)) {
        <span class="hljs-keyword">if</span> (existing_chars_.<span class="hljs-built_in">find</span>(bytes) == existing_chars_.<span class="hljs-built_in">end</span>()) {
          existing_chars_.<span class="hljs-built_in">insert</span>(bytes);
          <span class="hljs-keyword">if</span> (track_new) {
            new_chars_list_.<span class="hljs-built_in">push_back</span>(bytes);
          }
        }
      }
    }
  }
};

} 

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  char_collector::CharManager manager;
  manager.<span class="hljs-built_in">LoadExistingChars</span>(char_collector::kRegistryFilename);
  manager.<span class="hljs-built_in">ScanDirectory</span>(<span class="hljs-string">"_posts"</span>);
  manager.<span class="hljs-built_in">SaveNewChars</span>(char_collector::kRegistryFilename);
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>ç„¶åæˆ‘ä»¬åœ¨ç»ˆç«¯ç¼–è¯‘ä¸€ä¸‹å†è¿è¡Œå³å¯ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">clang++ update_lists.cpp -o update_lists  &amp;&amp; ./update_lists
</code></pre>
<p>ç„¶åæˆ‘ä»¬å°±ä¼šå‘ç°è¿™å¼ ç‹¬å±äºæœ¬ç«™çš„å­—ç¬¦è¡¨ç”Ÿæˆäº†ï¼ğŸ¥³
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05ffd997f8564bad9d3bb99546a870e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=WVMW7pygswbSVf%2BZJ%2FS1%2FG%2Ba0wA%3D" alt="font-pic-6.png" loading="lazy"/>
ä¸ºäº†æ–¹ä¾¿æ“ä½œï¼Œæˆ‘ä»¬æŠŠåŸå§‹çš„ttfæ–‡ä»¶æ”¾å…¥ä»“åº“çš„<code>/FontRepo/</code>ä¸‹ï¼ˆæœ€åè®°å¾—åœ¨<code>.gitignore</code>æ·»åŠ è¿™ä¸ªæ–‡ä»¶å¤¹ï¼ï¼‰ï¼Œç„¶åç¨å¾®ä¿®æ”¹ä¸€ä¸‹ä¹‹å‰å­é›†åŒ–çš„å‘½ä»¤å°±å¯ä»¥äº†ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">pyftsubset /FontRepo/NotoSerifSC-Bold.ttf --output-file=/assets/fonts/noto-serif-sc/NotoSerifSC-Bold.subset.woff2 --flavor=woff2 --text-file=char_set.txt --no-hinting --with-zopfli
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆè¾“å‡ºçš„æ–‡ä»¶åªæœ‰200Kï¼å‹ç¼©ç‡è¾¾åˆ°äº†98.5%ï¼</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b25f2bf538841908a3efd579697e8d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=iUkbqnYTYnb3lNT6ZnMiBZtcw6M%3D" alt="font-pic-4.png" loading="lazy"/>
ä½†æ˜¯è¿™ä¸ªæ–¹æ³•å°±åƒå‰é¢è¯´çš„ï¼Œå¤„äºå­—ä½“æ¸²æŸ“çš„è¾¹ç•Œã€‚ä½†å‡¡å¤šå‡ºä¸€ä¸ªå­—ç¬¦è¡¨ä¸­çš„ç¬¦å·ï¼Œé‚£ä¹ˆè¿™ä¸ªå­—ç¬¦å°±æ— æ³•æ¸²æŸ“ï¼Œä¼šå›é€€åˆ°ç³»ç»Ÿå­—ä½“ï¼Œçœ‹èµ·æ¥æ ¼å¤–åˆ«æ‰­ã€‚æ‰€ä»¥ï¼Œåœ¨æ¯æ¬¡æ›´æ–°æ–‡ç« å‰ï¼Œæˆ‘ä»¬éƒ½éœ€è¦è¿è¡Œä¸€ä¸‹<code>./update_lists</code>ã€‚æ­¤å¤–ï¼Œè¿˜å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæ¯æ¬¡æ›´æ–°äº§ç”Ÿæ–°çš„å­é›†åŒ–æ–‡ä»¶æ—¶ï¼Œéƒ½éœ€è¦æŠŠæ—§çš„å­é›†åŒ–æ–‡ä»¶åˆ é™¤ï¼Œé˜²æ­¢æ—§æ–‡ä»¶å †ç§¯ã€‚</p>
<p>è¿™äº›è¿‡ç¨‹ååˆ†ç¹çè€Œä¸”è€—è´¹æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸ªbashè„šæœ¬æ¥å®ç°è¿™ä¸ªè¿‡ç¨‹çš„è‡ªåŠ¨åŒ–ã€‚æˆ‘è¿™é‡ŒåŒæ ·æ˜¯æ±‚åŠ©äº†Geminiï¼Œå†™äº†ä¸€ä¸ª<code>build_fonts.sh</code>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-built_in">set</span> -e  <span class="hljs-comment"># é‡åˆ°é”™è¯¯ç«‹å³åœæ­¢æ‰§è¡Œ</span>

<span class="hljs-comment"># ================= é…ç½®åŒºåŸŸ =================</span>
<span class="hljs-comment"># å­—ä½“æºæ–‡ä»¶ç›®å½•</span>
SRC_DIR=<span class="hljs-string">"FontRepo"</span>
<span class="hljs-comment"># å­—ä½“è¾“å‡ºç›®å½•</span>
OUT_DIR=<span class="hljs-string">"assets/fonts/noto-serif-sc"</span>
<span class="hljs-comment"># å­—ç¬¦åˆ—è¡¨æ–‡ä»¶</span>
CHAR_LIST=<span class="hljs-string">"char_set.txt"</span>
<span class="hljs-comment"># C++ æ›´æ–°å·¥å…·</span>
UPDATE_TOOL=<span class="hljs-string">"./updateLists"</span>

<span class="hljs-comment"># ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨</span>
<span class="hljs-keyword">if</span> [ ! -d <span class="hljs-string">"<span class="hljs-variable">$OUT_DIR</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ›å»ºè¾“å‡ºç›®å½•: <span class="hljs-variable">$OUT_DIR</span>"</span>
    <span class="hljs-built_in">mkdir</span> -p <span class="hljs-string">"<span class="hljs-variable">$OUT_DIR</span>"</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># ================= ç¬¬ä¸€æ­¥ï¼šæ›´æ–°å­—ç¬¦è¡¨ =================</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt; [1/3] æ­£åœ¨æ›´æ–°å­—ç¬¦åˆ—è¡¨..."</span>
<span class="hljs-keyword">if</span> [ -x <span class="hljs-string">"<span class="hljs-variable">$UPDATE_TOOL</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-variable">$UPDATE_TOOL</span>
<span class="hljs-keyword">else</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯: æ‰¾ä¸åˆ°å¯æ‰§è¡Œæ–‡ä»¶ <span class="hljs-variable">$UPDATE_TOOL</span> æˆ–è€…æ²¡æœ‰æ‰§è¡Œæƒé™ã€‚"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"è¯·å°è¯•è¿è¡Œ: chmod +x updateLists"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
<span class="hljs-comment"># æ£€æŸ¥ char_set.txt æ˜¯å¦æˆåŠŸç”Ÿæˆ</span>
<span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$CHAR_LIST</span>"</span> ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯: <span class="hljs-variable">$CHAR_LIST</span> æœªæ‰¾åˆ°ï¼Œå­—ç¬¦è¡¨æ›´æ–°å¯èƒ½å¤±è´¥ã€‚"</span>
    <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"å­—ç¬¦åˆ—è¡¨æ›´æ–°å®Œæˆã€‚"</span>
<span class="hljs-comment"># ================= å®šä¹‰å­é›†åŒ–å¤„ç†å‡½æ•° =================</span>
<span class="hljs-function"><span class="hljs-title">process_font</span></span>() {
    <span class="hljs-built_in">local</span> font_name=<span class="hljs-string">"<span class="hljs-variable">$1</span>"</span>    <span class="hljs-comment"># ä¾‹å¦‚: NotoSerifSC-Regular</span>
    <span class="hljs-built_in">local</span> input_ttf=<span class="hljs-string">"<span class="hljs-variable">$SRC_DIR</span>/<span class="hljs-variable">${font_name}</span>.ttf"</span>
    <span class="hljs-built_in">local</span> final_woff2=<span class="hljs-string">"<span class="hljs-variable">$OUT_DIR</span>/<span class="hljs-variable">${font_name}</span>.woff2"</span>
    <span class="hljs-built_in">local</span> temp_woff2=<span class="hljs-string">"<span class="hljs-variable">$OUT_DIR</span>/<span class="hljs-variable">${font_name}</span>.temp.woff2"</span>

    <span class="hljs-built_in">echo</span> <span class="hljs-string">"----------------------------------------"</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨å¤„ç†å­—ä½“: <span class="hljs-variable">$font_name</span>"</span>
    <span class="hljs-comment"># æ£€æŸ¥æºæ–‡ä»¶æ˜¯å¦å­˜åœ¨</span>
    <span class="hljs-keyword">if</span> [ ! -f <span class="hljs-string">"<span class="hljs-variable">$input_ttf</span>"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯: æºæ–‡ä»¶ <span class="hljs-variable">$input_ttf</span> ä¸å­˜åœ¨ï¼"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>

    <span class="hljs-comment"># 2. è°ƒç”¨ fonttools (pyftsubset) ç”Ÿæˆä¸´æ—¶å­é›†æ–‡ä»¶</span>
    <span class="hljs-comment"># ä½¿ç”¨ --obfuscate-names å¯ä»¥è¿›ä¸€æ­¥å‡å°ä½“ç§¯ï¼Œä½†è¿™é‡Œåªç”¨åŸºç¡€å‚æ•°ä»¥ä¿è¯ç¨³å®šæ€§</span>
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"æ­£åœ¨ç”Ÿæˆå­é›† (TTF -&gt; WOFF2)..."</span>
    pyftsubset <span class="hljs-string">"<span class="hljs-variable">$input_ttf</span>"</span> \
        --flavor=woff2 \
        --text-file=<span class="hljs-string">"<span class="hljs-variable">$CHAR_LIST</span>"</span> \
        --output-file=<span class="hljs-string">"<span class="hljs-variable">$temp_woff2</span>"</span>
    <span class="hljs-comment"># 3. &amp; 4. åˆ é™¤æ—§æ–‡ä»¶å¹¶é‡å‘½å (æ›´æ–°é€»è¾‘)</span>
    <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$temp_woff2</span>"</span> ]; <span class="hljs-keyword">then</span>
        <span class="hljs-keyword">if</span> [ -f <span class="hljs-string">"<span class="hljs-variable">$final_woff2</span>"</span> ]; <span class="hljs-keyword">then</span>
            <span class="hljs-built_in">echo</span> <span class="hljs-string">"åˆ é™¤æ—§æ–‡ä»¶: <span class="hljs-variable">$final_woff2</span>"</span>
            <span class="hljs-built_in">rm</span> <span class="hljs-string">"<span class="hljs-variable">$final_woff2</span>"</span>
        <span class="hljs-keyword">fi</span>
        
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é‡å‘½åæ–°æ–‡ä»¶: <span class="hljs-variable">$temp_woff2</span> -&gt; <span class="hljs-variable">$final_woff2</span>"</span>
        <span class="hljs-built_in">mv</span> <span class="hljs-string">"<span class="hljs-variable">$temp_woff2</span>"</span> <span class="hljs-string">"<span class="hljs-variable">$final_woff2</span>"</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt;&gt; <span class="hljs-variable">$font_name</span> æ›´æ–°æˆåŠŸï¼"</span>
    <span class="hljs-keyword">else</span>
        <span class="hljs-built_in">echo</span> <span class="hljs-string">"é”™è¯¯: å­é›†åŒ–å¤±è´¥ï¼Œæœªç”Ÿæˆç›®æ ‡æ–‡ä»¶ã€‚"</span>
        <span class="hljs-built_in">exit</span> 1
    <span class="hljs-keyword">fi</span>
}
<span class="hljs-comment"># ================= ç¬¬äºŒæ­¥ &amp; ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œè½¬æ¢ =================</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt; [2/3] å¼€å§‹å­—ä½“å­é›†åŒ–å¤„ç†..."</span>
<span class="hljs-comment"># å¤„ç† Regular å­—ä½“</span>
process_font <span class="hljs-string">"NotoSerifSC-Regular"</span>
<span class="hljs-comment"># å¤„ç† Bold å­—ä½“</span>
process_font <span class="hljs-string">"NotoSerifSC-Bold"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"========================================"</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"&gt;&gt; [3/3] æ‰€æœ‰ä»»åŠ¡åœ†æ»¡å®Œæˆï¼"</span>
</code></pre>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œä»¥åæ¯æ¬¡æ›´æ–°å®Œæ–‡ç« ï¼Œéƒ½åªéœ€è¦åœ¨ç»ˆç«¯è¾“å…¥<code>./build_fonts.sh</code>å°±å¯ä»¥å®Œæˆå­—ç¬¦æå–ã€å­—ä½“åŒ…å­é›†åŒ–ã€æ¸…é™¤æ—§å­—ä½“åŒ…æ–‡ä»¶çš„è¿‡ç¨‹äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ef48ff2a903442a930779b981b9fae7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ2hhbmdZbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186563&amp;x-signature=L%2F8VxkmLFV6H7mXsQzQUuw9n%2Fs4%3D" alt="font-pic-5.png" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸€ç‚¹æ„Ÿæƒ³</h2>
<p>åœ¨è¿™ä¹‹å‰å¦å¤–è®²ä¸ªå°æ•…äº‹ï¼Œæˆ‘å°è¯•æ›´æ¢å­—ä½“ä¹‹å‰å‘ç°è‡ªå®šä¹‰çš„å­—ä½“æ ·å¼æ ¹æœ¬æ²¡æœ‰ç”¨ï¼Œåæ¥æ£€æŸ¥äº†å¾ˆä¹…ï¼Œå‘ç°ç«Ÿç„¶æ˜¯2ä¸ªæœˆå‰AIåœ¨æˆ‘ä»£ç é‡ŒåŠ çš„ä¸€å¥<code>font-family:'Noto Serif SC'</code>,è€Œåˆšå¥½ä»–ä¿®æ”¹çš„åˆæ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„æ–‡ä»¶ï¼Œæ‰€ä»¥åé¢æ€ä¹ˆä¿®æ”¹å­—ä½“éƒ½æ²¡æœ‰ç”¨ã€‚æ‰€ä»¥æœ‰æ—¶å€™è®©AIå†™ä»£ç å‰æœ€å¥½å…ˆææ¸…é™¤ä»£ç çš„åœ°ä½iï¼Œå¹¶ä¸”<strong>åšå¥½ä¸ºAIä»£ç åæœè´Ÿå…¨è´£</strong>çš„å‡†å¤‡ã€‚</p>
<p>æ›´æ”¹ç½‘ç«™å­—ä½“å…¶å®å¾ˆå¤šæ—¶å€™å±äºé”¦ä¸Šæ·»èŠ±çš„äº‹æƒ…ï¼Œå› ä¸ºå¾ˆå¤šè¯»è€…å…¶å®å¹¶ä¸ä¼šå¤ªåœ¨æ„ç½‘ç«™çš„å­—ä½“ã€‚ä½†ä¸å¹¸çš„æ˜¯æˆ‘å¯¹ç»†èŠ‚æ¯”è¾ƒåœ¨æ„ï¼Œæˆ–è€…è¯´æœ‰ç§æ•å¸šè‡ªççš„æ„Ÿè§‰å§ï¼Œæƒ³æ…¢æ…¢åœ°æŠŠç½‘ç«™è£…é¥°å¾—èˆ’é€‚ä¸€äº›ï¼Œæ‰€ä»¥æ‰æ€»æ˜¯èŠ±åŠ›æ°”åœ¨ä¸€äº›ç»†ææœ«èŠ‚çš„äº‹æƒ…ä¸Šã€‚æ›´ä½•å†µï¼Œæˆ‘æ˜¯æ‡‚ä¸€ç‚¹ç‚¹è®¾è®¡çš„ï¼Œæœ‰æ—¶å€™çœ‹è§ä¸€äº›éå¸¸ä¸‘çš„Interfaceå¿ƒé‡Œæ˜¯å¾ˆéš¾å—çš„ã€‚å°½ç®¡å°±åƒç»å¤§éƒ¨åˆ†äººç†è§£ä¸äº†è®¾è®¡å¸ˆåœ¨ç»†èŠ‚ä¸Šçš„åˆ«æœ‰ç”¨å¿ƒä¸€æ ·ï¼Œç»å¤§éƒ¨åˆ†äººä¹Ÿä¸ä¼šåœ¨æ„ä¸€ä¸ªç½‘ç«™çš„å­—ä½“å¦‚ä½•ï¼Œä½†æ˜¯æˆ‘è‡ªå·±çš„å®¶ï¼Œæˆ‘æƒ³è£…é¥°åœ°å¥½çœ‹äº›ï¼Œå¯¹æˆ‘æ¥è¯´å°±æ»¡è¶³äº†ã€‚</p>
<p>æ›´ä¸è¦è¯´ï¼Œå¦‚æœä¸å»æŠ˜è…¾è¿™äº›ä¸œè¥¿ï¼Œæ€ä¹ˆå¯èƒ½ä¼šæœ‰è¿™ç¯‡æ–‡ç« å‘¢ï¼Ÿå¦‚æœèƒ½å¤Ÿå¸®åŠ©åˆ°ä¸€äº›äººï¼Œä¹Ÿç®—æ˜¯åœ¨ä¸–ç•Œç•™ä¸‹ä¸€ç‚¹ä»·å€¼äº†ã€‚</p>
<h2 data-id="heading-7">å‚è€ƒèµ„æ–™åŠé™„å½•</h2>
<ol>
<li>
<p>å‚è€ƒèµ„æ–™</p>
<p>a. <a href="https://link.juejin.cn?target=https%3A%2F%2Fksw.design.donxj.com%2Fknowledge%2Fchinese-web-font-optimize" target="_blank" title="https://ksw.design.donxj.com/knowledge/chinese-web-font-optimize" ref="nofollow noopener noreferrer">ç½‘é¡µä¸­æ–‡å­—ä½“åŠ è½½é€Ÿåº¦ä¼˜åŒ–</a></p>
<p>b. <a href="https://link.juejin.cn?target=https%3A%2F%2Fweb.dev%2Farticles%2Freduce-webfont-size%3Fhl%3Dzh-cn" target="_blank" title="https://web.dev/articles/reduce-webfont-size?hl=zh-cn" ref="nofollow noopener noreferrer">ç¼©å‡ç½‘é¡µå­—ä½“å¤§å°</a></p>
<p>c. <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwy-luke%2FAll-Chinese-Character-Set" target="_blank" title="https://github.com/wy-luke/All-Chinese-Character-Set" ref="nofollow noopener noreferrer">All-Chinese-Character-Set</a></p>
</li>
<li>
<p>è®©Geminiç”Ÿæˆä»£ç æ—¶çš„Prompt:</p>
</li>
</ol>
<pre><code class="hljs language-plaintext" lang="plaintext">---Prompt 1---
# ä»»åŠ¡åç§°ï¼šåˆ›å»ºè„šæœ¬å®ç°å¯¹å­—ç¬¦çš„æ”¶é›†
è¯·åˆ©ç”¨C++æ¥å®Œæˆä¸€ä¸‹ä»»åŠ¡è¦æ±‚ï¼š
1. è¯¥è„šæœ¬èƒ½å¤Ÿè¯»å–é¡¹ç›®ç›®å½•ä¸‹çš„markdownæ–‡ä»¶ï¼Œå¹¶ä¸”èƒ½å¤Ÿè¯†åˆ«å½“ä¸­æ‰€æœ‰çš„ä¸­æ–‡å­—ç¬¦ï¼Œå°†è¯¥ä¸­æ–‡å­—ç¬¦ä¸`/char_test/GeneralUsedChars.txt`çš„å­—ç¬¦è¡¨è¿›è¡ŒæŸ¥é‡æ¯”è¾ƒï¼š
   è‹¥è¯¥å­—åœ¨è¡¨ä¸­å­˜åœ¨ï¼Œåˆ™è·³è¿‡ï¼Œå¤„ç†ä¸‹ä¸€ä¸ªå­—ï¼›
   è‹¥ä¸å­˜åœ¨ï¼Œåˆ™å°†è¯¥å­—æ·»åŠ åˆ°è¡¨ä¸­ï¼Œç„¶åç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªå­—ç¬¦
2. è¯·è®¾è®¡ä¸€ä¸ªé«˜æ•ˆçš„ç®—æ³•ï¼Œå°¤å…¶æ˜¯åœ¨å­—ç¬¦æŸ¥é‡çš„è¿‡ç¨‹ä¸­ï¼Œä½ éœ€è¦è®¾è®¡ä¸€ä¸ªé«˜æ•ˆä¸”å‡†ç¡®ç‡é«˜çš„ç®—æ³•
3. è¯·æ³¨æ„è„šæœ¬çš„é€šç”¨æ€§ï¼Œä½ éœ€è¦è€ƒè™‘åˆ°è¿™ä¸ªé¡¹ç›®ä»¥åå¯èƒ½ä¼šç»§ç»­å¢åŠ æ›´å¤šçš„markdownæ–‡ä»¶ï¼Œæ‰€ä»¥ä½ ä¸åº”è¯¥ä»…ä»…åªæ˜¯å¤„ç†ç°æœ‰çš„markdownæ–‡ä»¶ï¼Œè¿˜éœ€è¦è€ƒè™‘åˆ°ä»¥åçš„æ‹“å±•æ€§
4. å¦‚æœå¯ä»¥çš„è¯ï¼Œå°½å¯èƒ½ä½¿ç”¨C++æ¥å®ç°ï¼Œå› ä¸ºæ•ˆç‡æ›´é«˜

---Prompt 2---
å¯ä»¥äº†ï¼Œç°åœ¨æˆ‘è¦æ±‚ä½ ç¼–å†™ä¸€ä¸ªè„šæœ¬ä»¥å®ç°è‡ªåŠ¨åŒ–ï¼Œè¦æ±‚å¦‚ä¸‹ï¼š
1. è„šæœ¬è¿è¡Œæ—¶ï¼Œé¦–å…ˆä¼šè°ƒç”¨é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„updateListså¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ›´æ–°char_set.txt
2. æ¥ç€ï¼Œè„šæœ¬ä¼šè°ƒç”¨fonttoolså·¥å…·ï¼Œå¯¹è·¯å¾„åœ¨`/FontRepo/`ä¸‹çš„ä¸¤ä¸ªæ–‡ä»¶è¿›è¡Œttfåˆ°woff2çš„å­é›†åŒ–è½¬åŒ–ï¼Œå…¶ä¸­è¿™ä¸¤ä¸ªå­—ä½“æ–‡ä»¶çš„åå­—åˆ†åˆ«ä¸º`NotoSerifSC-Regular.ttf`å’Œ`NotoSerifSC-Bold.ttf`ã€‚
3. è½¬åŒ–å¥½çš„å­é›†æ–‡ä»¶åº”è¯¥è¾“å‡ºåˆ° `/assets/fonts/noto-serif-sc/`æ–‡ä»¶å¤¹ä¸‹ã€‚
4. å°†`/assets/fonts/noto-serif-sc/`æ–‡ä»¶å¤¹ä¸‹åŸæœ¬å·²ç»å­˜åœ¨çš„ä¸¤ä¸ªå­—ä½“æ–‡ä»¶`NotoSerifSC-Bold.woff2`å’Œ`NotoSerifSC-Regular.woff2`åˆ é™¤ï¼Œç„¶åå°†æ–°å¾—åˆ°å­é›†åŒ–æ–‡ä»¶é‡æ–°å‘½åä¸ºè¿™ä¸¤ä¸ªåˆ é™¤äº†çš„æ–‡ä»¶çš„åå­—ã€‚è¿™ä¸€æ­¥ç›¸å½“äºå®Œæˆäº†å­—ä½“æ–‡ä»¶çš„æ›´æ–°

è¯·æ³¨æ„æ–‡ä»¶çš„å‘½åï¼Œå°¤å…¶æ˜¯ä¸è¦æé”™å­—å·ï¼Œæ–°å­é›†æ–‡ä»¶å’Œæ—§å­é›†æ–‡ä»¶ã€‚
è¯·æ³¨æ„åœ¨å­é›†åŒ–æ­¥éª¤çš„bashå‘½ä»¤ï¼Œç¯å¢ƒå·²ç»å®‰è£…å¥½fonttoolsåŠå…¶å¯¹åº”ä¾èµ–ï¼Œä½ å¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ªå‘½ä»¤æ¥ä½¿ç”¨ï¼Œæˆ–è€…ä½¿ç”¨æ›´å¥½æ›´ç¨³å®šçš„ç”¨æ³•ï¼š
pyftsubset &lt;path/to/ttf/file&gt; --flavor=woff2 --text-file=&lt;path/to/char_set.txt&gt; --output-file=&lt;the/subset/name&gt;
(å†æ¬¡æ³¨æ„è¾“å‡ºè·¯å¾„)
</code></pre>
<ol start="3">
<li>æœ€ç»ˆå®è·µæ•ˆæœ(ä»¥<code>NotoSerifSC-Bold</code>ä¸ºä¾‹)



































<table><thead><tr><th align="left">å¤„ç†æ–¹å¼</th><th align="left">å­—ä½“åŒ…ä½“ç§¯</th><th align="left">å‹ç¼©ç‡</th></tr></thead><tbody><tr><td align="left">æ— å¤„ç†</td><td align="left">14.462M</td><td align="left">0%</td></tr><tr><td align="left">æ ¼å¼è½¬åŒ–</td><td align="left">5.776M</td><td align="left">60.06%</td></tr><tr><td align="left">å­é›†åŒ–å¤„ç†</td><td align="left">981K</td><td align="left">93.21%</td></tr><tr><td align="left">åˆ†åŒ…å¤„ç†</td><td align="left">ä¾æ®åŠ¨æ€åŠ è½½é‡è€Œå®š</td><td align="left">æ— </td></tr><tr><td align="left">æˆ‘çš„å®è·µ</td><td align="left">216K</td><td align="left">98.5%</td></tr></tbody></table>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Three.js åæ ‡ç³»å®Œå…¨å…¥é—¨ï¼šä»â€œä½ åœ¨å“ªâ€åˆ°â€œä½ çˆ¸åœ¨å“ªâ€éƒ½è®²æ¸…æ¥šäº†]]></title>    <link>https://juejin.cn/post/7578820431017574415</link>    <guid>https://juejin.cn/post/7578820431017574415</guid>    <pubDate>2025-12-01T09:43:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820431017574415" data-draft-id="7578683148210585652" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Three.js åæ ‡ç³»å®Œå…¨å…¥é—¨ï¼šä»â€œä½ åœ¨å“ªâ€åˆ°â€œä½ çˆ¸åœ¨å“ªâ€éƒ½è®²æ¸…æ¥šäº†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:43:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€åƒæŸ¯æ©˜"/> <meta itemprop="url" content="https://juejin.cn/user/2010369939736343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Three.js åæ ‡ç³»å®Œå…¨å…¥é—¨ï¼šä»â€œä½ åœ¨å“ªâ€åˆ°â€œä½ çˆ¸åœ¨å“ªâ€éƒ½è®²æ¸…æ¥šäº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2010369939736343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€åƒæŸ¯æ©˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:43:10.000Z" title="Mon Dec 01 2025 09:43:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-sulphurpool-dark">.hljs-comment,.hljs-quote{color:#898ea4}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#c94922}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#c76b29}.hljs-bullet,.hljs-string,.hljs-symbol{color:#ac9739}.hljs-section,.hljs-title{color:#3d8fd1}.hljs-keyword,.hljs-selector-tag{color:#6679cc}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#202746;color:#979db4}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“ä½ æ‰“å¼€ Three.js å†™ 3D åœºæ™¯æ—¶ï¼Œç¬¬ä¸€ä¸ªè¦ææ‡‚çš„é—®é¢˜å°±æ˜¯ï¼š</p>
<p><strong>ä¸€ä¸ªç‰©ä½“åˆ°åº•æ‘†åœ¨å“ªé‡Œï¼Ÿ</strong></p>
<p>åˆ«å°çœ‹è¿™ä¸ªé—®é¢˜ã€‚ä½ è§‰å¾—ä¸€ä¸ªç«‹æ–¹ä½“åœ¨ä¸–ç•Œåæ ‡ (3,0,0)ï¼Œç»“æœå®ƒç§»åŠ¨åå‡ºç°åœ¨å¥‡æ€ªçš„ä½ç½®ï¼Œåæ¬¡é‡Œæœ‰ä¹æ¬¡æ˜¯å› ä¸ºâ€”â€”</p>
<p>ğŸ‘‰ <strong>ä½ å¿˜äº†å®ƒæœ‰ä¸ªâ€œçˆ¸çˆ¸â€ã€‚</strong></p>
<p>ä»Šå¤©æˆ‘ä»¬å°±ç”¨ä¸€ä¸ªè¶…é€šä¿—çš„æ–¹å¼ï¼ŒæŠŠ Three.js çš„åæ ‡è®²æ¸…æ¥šã€‚çœ‹å®Œè¿™ç¯‡æ–‡ç« ï¼Œä½ ä¼šæ˜ç™½ï¼š</p>
<ul>
<li>ä¸–ç•Œåæ ‡ï¼ˆWorld Coordinatesï¼‰å’Œæœ¬åœ°åæ ‡ï¼ˆLocal Coordinatesï¼‰åˆ°åº•æ€ä¹ˆå›äº‹ï¼Ÿ
<ul>
<li>ä¸–ç•Œåæ ‡ï¼ŒåŸºå‡†ç‚¹ä¸ºå›ºå®šåŸç‚¹(0,0,0)ï¼Œæè¿°ç‰©ä½“åœ¨<strong>æ•´ä¸ªåœºæ™¯ä¸­çš„ç»å¯¹ä½ç½®</strong></li>
<li>å±€éƒ¨/æœ¬åœ°åæ ‡ï¼ŒåŸºå‡†ç‚¹ä¸ºç‰©ä½“è‡ªèº«çš„å‡ ä½•ä¸­å¿ƒï¼ˆä¸­å¿ƒç‚¹ï¼‰ï¼Œæè¿°å­ç‰©ä½“ç›¸å¯¹äº<strong>çˆ¶ç‰©ä½“çš„ä½ç½®</strong></li>
</ul>
</li>
<li>å­å¯¹è±¡ç›¸å¯¹äºçˆ¶å¯¹è±¡çš„åæ ‡æ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Ÿ</li>
<li>ä¸ºä»€ä¹ˆæŠŠ cube æ”¾è¿› parentCube åï¼Œä½ç½®å°±â€œå˜äº†â€ï¼Ÿ</li>
<li>å®æˆ˜ä»£ç æ˜¯å¦‚ä½•è¿è¡Œçš„ï¼Ÿ</li>
</ul>
<p>å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹ï¼</p>
<hr/>
<h2 data-id="heading-0">ğŸ§± 1. ä¸–ç•Œåæ ‡ï¼šæ•´ä¸ªä¸–ç•Œçš„â€œç»å¯¹åœ°å€â€</h2>
<p>åœ¨ Three.js ä¸­ï¼Œæœ‰ä¸€ä¸ªä½ æ°¸è¿œé€ƒä¸æ‰çš„æ¦‚å¿µï¼š</p>
<blockquote>
<p><strong>ä¸–ç•Œåæ ‡ï¼ˆWorld Coordinatesï¼‰å°±æ˜¯æ‰€æœ‰ç‰©ä½“çš„ç»å¯¹ä½ç½®ã€‚</strong></p>
</blockquote>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js">cube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
scene.<span class="hljs-title function_">add</span>(cube);
</code></pre>
<p>æ„æ€å¾ˆç®€å•ï¼š</p>
<blockquote>
<p>cube åœ¨ä¸–ç•Œçš„ x=3 çš„ä½ç½®ã€‚</p>
</blockquote>
<p>å°±åƒä½ å‘Šè¯‰æœ‹å‹ï¼šâ€œæˆ‘åœ¨åŒ—äº¬â€ã€‚</p>
<p>æ— è®ºä½ çˆ¸åœ¨å“ªï¼Œä½ éƒ½åœ¨åŒ—äº¬ã€‚</p>
<h2 data-id="heading-1">ğŸ‘¨â€ğŸ‘¦ 2. æœ¬åœ°åæ ‡ï¼šç›¸å¯¹äºâ€œçˆ¶å…ƒç´ â€çš„ä½ç½®</h2>
<p>ä½†å¦‚æœä½ å†™äº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> parentCube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, parentMaterial);
parentCube.<span class="hljs-title function_">add</span>(cube);
</code></pre>
<p>äº‹æƒ…å°±ä¸ä¸€æ ·äº†ã€‚</p>
<p>cube å°±æœ‰äº†ä¸€ä¸ªâ€œçˆ¸çˆ¸â€ parentCubeã€‚</p>
<p>æ­¤æ—¶ä½ å†å†™ï¼š</p>
<pre><code class="hljs language-js" lang="js">cube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
scene.<span class="hljs-title function_">add</span>(parentCube);
</code></pre>
<p>è¿™å¥è¯å°±å˜æˆï¼š</p>
<blockquote>
<p>cube åœ¨ <strong>parentCube çš„å±€éƒ¨ç©ºé—´ä¸­</strong>ï¼Œç›¸å¯¹äºçˆ¶ç‰©ä½“ï¼Œå¾€ x æ­£æ–¹å‘ç§»åŠ¨ 3ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<ul>
<li>parentCube å°±åƒä¸€ä¸ª<strong>åæ ‡å‚ç…§ç³»</strong>ã€‚</li>
<li>cube ç›¸å½“äºåœ¨è¿™ä¸ªå†…éƒ¨ç©ºé—´é‡Œç§»åŠ¨ã€‚</li>
</ul>
<p>è¿™å°±å¥½æ¯”ä½ è¯´ï¼š</p>
<blockquote>
<p>â€œæˆ‘ç¦»æˆ‘çˆ¸ä¸‰ç±³è¿œã€‚â€</p>
</blockquote>
<p>ä½†ä½ çˆ¸åœ¨åŒ—äº¬ï¼Œä½ ä¹Ÿå°±å®é™…ä¸Š<strong>è¿˜æ˜¯åœ¨åŒ—äº¬é™„è¿‘</strong>ã€‚</p>
<h2 data-id="heading-2">âš™ï¸ 3. å›åˆ°ä½ çš„ç¤ºä¾‹ï¼šå®ƒåˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h2>
<p>ä½ å†™çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> cube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);

<span class="hljs-keyword">const</span> parentCube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, parentMaterial);
parentCube.<span class="hljs-title function_">add</span>(cube);
parentCube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// cube.position.x = 1;</span>
<span class="hljs-comment">// cube çš„åæ ‡æ˜¯ç›¸å¯¹äº parentCube çš„ï¼Œæ‰€ä»¥åœ¨é¡µé¢ä¸Šå¯ä»¥çœ‹åˆ° cube ç›¸å¯¹äº parentCubeï¼ˆçˆ¶å…ƒç´ ï¼‰å‘å³ç§»åŠ¨åˆ°äº†åŸç‚¹åæ ‡å¤„</span>
cube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<p>è®©æˆ‘ä»¬é€æ­¥ç†è§£å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<h3 data-id="heading-3">ğŸŸ¦ ç¬¬ä¸€æ­¥ï¼šparentCube æ”¾åœ¨ä¸–ç•Œåæ ‡ (-3,0,0)</h3>
<p>è¿™æ„å‘³ç€ï¼š</p>
<blockquote>
<p>â€œçˆ¸çˆ¸ç«™åœ¨ä¸–ç•Œå·¦è¾¹ 3 å•ä½çš„ä½ç½®ã€‚â€</p>
</blockquote>
<h3 data-id="heading-4">ğŸŸ¦ ç¬¬äºŒæ­¥ï¼šcube ç›¸å¯¹â€œçˆ¸çˆ¸â€å¾€å³ç§»åŠ¨ 3 ä¸ªå•ä½</h3>
<p>cube.position.set(3,0,0) çš„æ„æ€æ˜¯ï¼š</p>
<blockquote>
<p>cube åœ¨çˆ¶å¯¹è±¡å†…éƒ¨å‘å³ç§»åŠ¨ 3ã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š</p>
<p>ğŸ‘‰ <strong>cube çš„ä¸–ç•Œåæ ‡ = çˆ¶å¯¹è±¡ä¸–ç•Œåæ ‡ + è‡ªå·±çš„æœ¬åœ°åæ ‡</strong></p>
<p>è®¡ç®—ä¸€ä¸‹ï¼š</p>
<ul>
<li>çˆ¶å¯¹è±¡åœ¨ä¸–ç•Œ: (-3, 0, 0)</li>
<li>cube åœ¨æœ¬åœ°: (+3, 0, 0)</li>
</ul>
<p>æ‰€ä»¥ cube åœ¨ä¸–ç•Œä¸­çš„çœŸå®ä½ç½®ï¼š</p>
<pre><code class="hljs language-js" lang="js">ä¸–ç•Œä½ç½® = (-<span class="hljs-number">3</span>) + <span class="hljs-number">3</span> = <span class="hljs-number">0</span>
</code></pre>
<p>â€”â€”åˆšå¥½å›åˆ°äº†ä¸–ç•ŒåŸç‚¹ï¼ğŸ¯</p>
<p>è¿™å°±æ˜¯ä½ çœ‹åˆ°ï¼š</p>
<blockquote>
<p>cube â€œçœ‹èµ·æ¥å›åˆ°äº†åŸç‚¹â€ã€‚</p>
</blockquote>
<h2 data-id="heading-5">ğŸ¯ 4. ä¸€ä¸ªè¶…å½¢è±¡çš„æ¯”å–»ï¼šä¸‰.js åæ ‡ = ç°å®ä¸–ç•Œçš„â€œä½ â€å’Œâ€œä½ çˆ¸â€</h2>
<ul>
<li><strong>ä¸–ç•Œåæ ‡</strong>ï¼šä½ ä½åœ¨åŒ—äº¬å°±æ˜¯åŒ—äº¬ï¼Œè¿™æ˜¯å…¨ä¸–ç•Œéƒ½æ‡‚çš„ç»å¯¹åæ ‡ã€‚</li>
<li><strong>æœ¬åœ°åæ ‡</strong>ï¼šä½ è¯´â€œæˆ‘ç¦»æˆ‘çˆ¸ä¸‰ç±³è¿œâ€ï¼Œé‚£ä½ å¾—å…ˆçŸ¥é“ä½ çˆ¸åœ¨å“ªã€‚</li>
<li><strong>çˆ¶å¯¹è±¡ç§»åŠ¨æ—¶ï¼Œå­å¯¹è±¡è·Ÿç€è¢«æ•´ä½“ç§»åŠ¨</strong>ï¼šå› ä¸ºä½ çˆ¸æŒªçªäº†ï¼Œä½ å½“ç„¶ä¹Ÿè·Ÿç€æŒªäº†ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯ parent.add(child) çš„æ„ä¹‰ï¼š</p>
<blockquote>
<p><strong>ä½ æŠŠ child çš„å‘½è¿äº¤ç»™äº† parentã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-6">ğŸ§ª 5. å®æˆ˜ä»£ç ï¼šä¸€çœ¼çœ‹æ‡‚åæ ‡å…³ç³»</h2>
<p>å®Œæ•´ä¾‹å­å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// çˆ¶ç«‹æ–¹ä½“</span>
<span class="hljs-keyword">const</span> parentCube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, parentMaterial);
scene.<span class="hljs-title function_">add</span>(parentCube);
parentCube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(-<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

<span class="hljs-comment">// å­ç«‹æ–¹ä½“</span>
<span class="hljs-keyword">const</span> cube = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(geometry, material);
parentCube.<span class="hljs-title function_">add</span>(cube);

<span class="hljs-comment">// cube ä¸æ˜¯åœ¨ä¸–ç•Œåæ ‡ç§»åŠ¨ï¼Œè€Œæ˜¯åœ¨çˆ¶åæ ‡ç³»ä¸­ç§»åŠ¨</span>
cube.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95b131c9d0fa47788f4eb75ae8976c74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA5Y2D5p-v5qmY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186989&amp;x-signature=omf32FmH9zi5Zbgy9%2BD%2BIJot%2B2w%3D" alt="image.png" loading="lazy"/></p>
<p>è¿è¡Œåä½ ä¼šçœ‹åˆ°ï¼š</p>
<ul>
<li>parentCube åœ¨ä¸–ç•Œå·¦è¾¹ (-3,0,0)</li>
<li>cube åœ¨ parentCube å†…éƒ¨å‘å³ç§»åŠ¨ 3( cube çš„å‚è€ƒç‚¹å˜æˆäº† parentCube)</li>
<li>æ‰€ä»¥ cube çš„ä¸–ç•Œä½ç½®è¢«â€œæŠµæ¶ˆæ‰â€ï¼Œå›åˆ°åŸç‚¹</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŒäº‹ï¼šæ¶æ„å¤ªå¤æ‚äº†ï¼Œæºç æ–‡ä»¶æ‰¾åŠå¤©ã€‚ æˆ‘ï¼šæºç æº¯æºäº†è§£ä¸€ä¸‹ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578460753210966043</link>    <guid>https://juejin.cn/post/7578460753210966043</guid>    <pubDate>2025-12-01T09:52:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753210966043" data-draft-id="7578511778889416742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŒäº‹ï¼šæ¶æ„å¤ªå¤æ‚äº†ï¼Œæºç æ–‡ä»¶æ‰¾åŠå¤©ã€‚ æˆ‘ï¼šæºç æº¯æºäº†è§£ä¸€ä¸‹ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2025-12-01T09:52:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹¬è§’ä»™æ¢¦å¢ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1176897909428464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŒäº‹ï¼šæ¶æ„å¤ªå¤æ‚äº†ï¼Œæºç æ–‡ä»¶æ‰¾åŠå¤©ã€‚ æˆ‘ï¼šæºç æº¯æºäº†è§£ä¸€ä¸‹ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1176897909428464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹¬è§’ä»™æ¢¦å¢ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:52:18.000Z" title="Mon Dec 01 2025 09:52:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<hr/>
ç›¸ä¿¡åˆšå…¥è¡Œï¼Œæˆ–æ˜¯åˆšå…¥è¡Œçš„å°ä¼™ä¼´ä»¬ï¼Œå¯¹äºä¼ä¸šçº§ä»£ç ä¸æ¶æ„ï¼Œä»¥åŠæ‰‘é¢è€Œæ¥ä¸šåŠ¡éœ€æ±‚ã€‚æƒ³è¦åœ¨çŸ­æ—¶é—´å†…ä»å¯¹åº”çš„é¡µé¢å®šä½åˆ°ç»„ä»¶æ—¶ï¼Œæ˜¯å¾ˆéš¾åŠåˆ°çš„äº‹æƒ…ï¼Œå°¤å…¶æ˜¯çªç„¶äº¤ç»™ä¸€ä¸ªé™Œç”Ÿçš„é¡¹ç›®çš„éœ€æ±‚ï¼Œé—®é¢˜ä¹Ÿä¼šæ¯”è¾ƒçªå‡ºã€‚
<p>å°¤å…¶æ˜¯å¯¹äºé¼ é¼ æˆ‘æœ¬äººæ¥è¯´ï¼Œä¹Ÿæ˜¯æ·±æœ‰ä½“ä¼šï¼šå¸å†…çš„æºç æ¶æ„ï¼š<strong>è‡ªç ”å¾®å‰ç«¯+monorepoæ¶æ„</strong>ï¼Œæœ¬èº«æ¶æ„è®¾è®¡æœ¬èº«å°±æ¯”è¾ƒå¤æ‚ï¼Œåœ¨é¡¹ç›®è§„æ¨¡è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œæˆ–æ˜¯é¡¹ç›®å¼€å‘æ—¶é—´é•¿ï¼Œäººå‘˜å˜åŠ¨å¤§ï¼Œå°±ä¼šå¯¼è‡´æœ‰å¾ˆå¤šé—®é¢˜å‡ºç°ï¼Œå°±æ¯”å¦‚ldç»Ÿè®¡è¿‡ <strong>.vueæ–‡ä»¶</strong>å·²ç»8000ä¸ªäº†ï¼Œä»£ç ä¸­æœ‰<strong>2250å¯¹</strong>é‡å¤çš„æºä»£ç æ–‡ä»¶ã€‚æ€»è®¡é‡å¤ä»£ç è¡Œæ•°: <strong>69578</strong> <strong>è¡Œ</strong> ğŸ¤¯ğŸ¤¯ğŸ¤¯</p>
<p>åœ¨è¿™æ ·çš„æƒ…å†µä¸‹ï¼Œä¸€æ¬¾èƒ½å¤Ÿå¿«é€Ÿå®šä½æºç çš„æ’ä»¶å‘¼ä¹‹æ¬²å‡ºğŸ‰ğŸ‰ğŸ‰</p>
<hr/>
é€šè¿‡æœ¬ç¯‡æ–‡ç« ï¼Œå¤§å®¶èƒ½å­¦ä¹ åˆ°ï¼š
<blockquote>
<ol>
<li>å¦‚ä½•ç¼–å†™ä¸€ä¸ªç®€æ˜“çš„viteæ’ä»¶</li>
<li>viteæ’ä»¶çš„ç”Ÿå‘½å‘¨æœŸæ˜¯æ€ä¹ˆæ ·çš„</li>
<li>æºç æº¯æºï¼Œå¿«é€Ÿå®šä½ï¼š<strong>å®ç°æ€è·¯ï¼ŒåŸç†</strong></li>
</ol>
</blockquote>
<p>é¦–å…ˆå‡†å¤‡å¥½å®éªŒç¯å¢ƒï¼š<strong>vue+vite+pnpm</strong> è®©cursorå¿«é€Ÿç”Ÿæˆä¸€ä¸ªé¡¹ç›®å³å¯</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a20b5707c55461790fa9c0155245445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=mc1XxAvuLNjn6U9q%2FIkK3Xa7DQo%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ­£å¼å°†<strong>æºç å®šä½</strong>ä¹‹å‰ï¼Œæˆ‘æƒ³è®²è®²ä¸€ä¸ªç®€æ˜“çš„viteæ’ä»¶è¯¥å¦‚ä½•å®ç°ï¼Œè¿™å¯¹æˆ‘ä»¬åé¢çš„å­¦ä¹ ä¼šæœ‰æ¯”è¾ƒæœ‰æ•ˆçš„å¸®åŠ©</p>
<h2 data-id="heading-1">å¦‚ä½•å†™Viteæ’ä»¶</h2>
<p>å†è®²å¦‚ä½•ç¼–å†™viteæ’ä»¶ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹å¦‚ä½•å°†è‡ªå·±ç¼–å†™çš„viteæ’ä»¶åœ¨Viteçš„æ„å»ºæµç¨‹ä¸­ç”Ÿæ•ˆï¼š</p>
<p>Viteæ’ä»¶æœ¬è´¨æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡åˆ°å¤„ä¸€ä¸ªå¯¹è±¡å‡½æ•°ï¼Œæ”¾å…¥Viteé…ç½®é¡¹æ•°ç»„ä¸­å³å¯å®ç°æ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ce09192b6324b73b5673d7543a5881e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=Qn5FgGQ0LzTGBmX7jmXJeYS2GvQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46d4f73c560740debcb791fff45fa8ca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=l2wHfQQXBVarVVkQfa%2BZ6lJ%2BDJU%3D" alt="" loading="lazy"/></p>
<p>é‚£ä¹ˆä½œä¸ºViteçš„è‡ªå®šä¹‰æ’ä»¶ï¼Œå’Œwebpackä¸€æ ·ï¼Œéœ€è¦ä½¿ç”¨å„ç§ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Œæ‰èƒ½å®ç°å¯¹åº”çš„æ•ˆæœï¼š</p>
<p>è¿™é‡Œä»‹ç»ä¸€ä¸‹ä¸»æµçš„ç”Ÿå‘½å‘¨æœŸé’©å­ï¼š</p>
<h3 data-id="heading-2">ä¸»æµé’©å­</h3>
<h4 data-id="heading-3">é…ç½®é˜¶æ®µï¼š</h4>
<p><strong>config(config,</strong> <strong>env</strong> <strong>):</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šå½“viteè¯»å–é…ç½®æ—¶è§¦å‘</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šä¿®æ”¹æˆ–æ‰©å±•é…ç½®å¯¹è±¡</strong></p>
</li>
</ul>
<p><strong>configResolved(resolvedConfig):</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šå½“é…ç½®è§£æå®Œæˆæ—¶è§¦å‘</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šè·å–æœ€ç»ˆé…ç½®ï¼Œåˆå§‹åŒ–æ’ä»¶çŠ¶æ€</strong></p>
</li>
</ul>
<blockquote>
<p>è¯¥é˜¶æ®µä¸»è¦ç”¨äºæ’ä»¶åˆå§‹åŒ–æˆ–è¯»å–ç”¨æˆ·é…ç½®ï¼Œä¸æ˜¯å¿…é¡»</p>
</blockquote>
<h4 data-id="heading-4">æ„å»ºé˜¶æ®µ</h4>
<p><strong>buildStart:</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼š æ„å»ºå¼€å§‹</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼š åˆå§‹åŒ–çŠ¶æ€ï¼Œæ‰“å°æ—¥å¿—ï¼Œå‡†å¤‡æ•°æ®</strong></p>
</li>
</ul>
<p><strong>buildEnd:</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼š æ„å»ºç»“æŸ</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šæ”¶å°¾ï¼Œæ‰“å°ç»Ÿè®¡</strong></p>
</li>
</ul>
<p><strong>closeBundleï¼š</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šæ„å»ºå®Œæˆå¹¶ç”Ÿæˆæ–‡ä»¶å</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šåšæœ€ç»ˆæ¸…ç†æˆ–å‘å¸ƒçš„æ“ä½œ</strong></p>
</li>
</ul>
<blockquote>
<p>ä¸»è¦ç”¨äºæ’ä»¶éœ€è¦åšå…¨å±€åˆå§‹åŒ–æˆ–æ„å»ºåæ“ä½œçš„åœºæ™¯</p>
</blockquote>
<h4 data-id="heading-5">æ¨¡å—è§£æå’ŒåŠ è½½é˜¶æ®µ</h4>
<p><strong>resolveId(id,importer)</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šè§£ææ¨¡å—è·¯å¾„æ—¶</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šé‡å†™æ¨¡å—è·¯å¾„ï¼Œç”Ÿæˆè™šæ‹Ÿæ¨¡å—</strong></p>
</li>
</ul>
<p><strong>load(id)</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šæ¨¡å—åŠ è½½å†…å®¹</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šè¿”å›æ¨¡å—ä»£ç ï¼Œç”Ÿæˆè™šæ‹Ÿæ¨¡å—</strong></p>
</li>
</ul>
<p><strong>moduleParsed</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šæ¨¡å—</strong> <strong>AST</strong> <strong>è§£æå®Œæˆ</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šåˆ†ææ¨¡å—</strong> <strong>AST</strong> <strong>ï¼Œåšç»Ÿè®¡æˆ–æ”¶é›†ä¿¡æ¯</strong></p>
</li>
</ul>
<blockquote>
<p>æ ¸å¿ƒç‚¹ï¼šè™šæ‹Ÿæ¨¡å—ä¸€èˆ¬ç”¨ <code>resolveId</code> + <code>load</code>ï¼Œå¤„ç†æºç å‰å¯ä»¥åˆ†æ ASTã€‚</p>
</blockquote>
<h4 data-id="heading-6">æ¨¡å—transformé˜¶æ®µï¼ˆæœ€å¸¸ç”¨ï¼‰</h4>
<p><strong>thransform(code,id)</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼šæ¨¡å—åŠ è½½åï¼Œæ‰“åŒ…å‰</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šæ ¸å¿ƒ hookï¼Œç”¨äºä¿®æ”¹</strong> <strong>æºç </strong> <strong>ã€æ³¨å…¥ä»£ç ã€æ“ä½œ Vue/</strong> <strong>JSX</strong> ****<strong>AST</strong></p>
</li>
</ul>
<p><strong>transformIndexHtml</strong></p>
<ul>
<li>
<p><strong>è§¦å‘æ—¶æœºï¼š</strong> <strong>HTML</strong> <strong>æ–‡ä»¶å¤„ç†é˜¶æ®µ</strong></p>
</li>
<li>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼šä¿®æ”¹</strong> <strong>HTML</strong> <strong>æ¨¡ç‰ˆï¼Œä¾‹å¦‚æ³¨å…¥scriptï¼Œlink</strong></p>
</li>
</ul>
<blockquote>
<p><strong>transform æ˜¯æœ€ä¸»æµçš„é’©å­</strong>ï¼Œå‡ ä¹æ‰€æœ‰æ’ä»¶éƒ½è‡³å°‘ç”¨å®ƒåšä¸€æ¬¡æºç ä¿®æ”¹ã€‚</p>
</blockquote>
<p>æ•´ä¸ªæ„å»ºç”Ÿå‘½å‘¨æœŸæµç¨‹å›¾æ¥çœ‹æ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7a3e9a791bf451f88e39234129420f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=ZbajEJepcO4Cmb9WXaGNYuv21o8%3D" alt="image.png" loading="lazy"/></p>
<p>é’ˆå¯¹LLMè¿”å›ç»™æˆ‘ä»¬çš„ä¸»æµé’©å­ä½¿ç”¨é¢‘ç‡æ¥çœ‹ï¼Œæˆ‘ä»¬ä¼˜å…ˆæŒæ¡çš„è‚¯å®šå°±æ˜¯ï¼š<strong>æ¨¡å— transform é˜¶æ®µ</strong>ï¼Œå› ä¸ºè¿™ä¸ªé˜¶æ®µæ˜¯èƒ½å¤Ÿç›´æ¥æ¥è§¦çš„æºä»£ç ï¼Œæ›´å®¹æ˜“åœ¨æºä»£ç ä¸ŠåŠ¨æ‰‹è„šçš„é˜¶æ®µã€‚</p>
<h3 data-id="heading-7"><strong>æ¨¡å— transform é˜¶æ®µ</strong></h3>
<p>å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œè®©æˆ‘ä»¬å®æˆ˜æ¥çœ‹çœ‹ï¼Œè¿™ä¸ªé˜¶æ®µèƒ½å¤Ÿåšä»€ä¹ˆå‘¢ï¼Ÿ</p>
<h4 data-id="heading-8">ä»€ä¹ˆæ˜¯transformé˜¶æ®µ</h4>
<p>åœ¨Viteçš„æ„å»ºè¿‡ç¨‹ä¸­ï¼Œä¸€ä¸ªæ–‡ä»¶ä¼šä»<strong>æºç </strong> <strong>-&gt; æµè§ˆå™¨</strong>å¯æ‰§è¡Œæ–‡ä»¶ï¼Œä¼šç»å†å¾ˆå¤šå¤„ç†ç¯èŠ‚ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li>TS-&gt; js</li>
<li>JSX -&gt; JS</li>
<li>VUEå•æ–‡ä»¶ç»„ä»¶æ‹†æˆJSï¼ŒCSS</li>
<li>å»æ‰console.log</li>
<li>æ³¨å…¥HMRä»£ç </li>
<li>å‹ç¼©</li>
</ul>
<p><strong>è€Œ transform å°±æ˜¯ Vite æ’ä»¶ä½“ç³»é‡Œä¸“é—¨è´Ÿè´£â€œæŠŠä»£ç è½¬æˆæ–°ä»£ç â€çš„é˜¶æ®µ</strong>ã€‚</p>
<h4 data-id="heading-9">transformçš„å‡½æ•°ç­¾å</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">code</span>: <span class="hljs-string">'æ–°çš„ä»£ç '</span>,
    <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æˆ– sourcemap</span>
  }
}
</code></pre>
<ol>
<li><strong>Codeï¼š å½“å‰æ‹¿åˆ°çš„æ–‡ä»¶</strong> <strong>æºç </strong></li>
<li><strong>idï¼šå½“å‰æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</strong></li>
</ol>
<p><strong>è¿”å›å€¼ï¼š</strong></p>
<ol>
<li>è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">return</span> transformedCode
</code></pre>
<p>è¯´æ˜åª<strong>ä¿®æ”¹äº†ä»£ç </strong>ï¼Œä¸ç®¡ source mapï¼Œç”± Vite è‡ªåŠ¨å¤„ç†éƒ¨åˆ†æƒ…å†µã€‚</p>
<p>âš ï¸ ä½† source map ä¼šä¸¢å¤±æˆ–é”™è¯¯ã€‚</p>
<ol start="2">
<li>è¿”å›ä¸€ä¸ªåŒ…å«code+mapçš„å¯¹è±¡</li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">return</span> {
  <span class="hljs-attr">code</span>: transformedCode,
  <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>  <span class="hljs-comment">// æˆ– SourceMap å¯¹è±¡</span>
}
</code></pre>
<ul>
<li>Vite ä¼šç»§ç»­æŠŠ map ä¼ ç»™ä¸‹ä¸€ç¯</li>
<li>æœ€ç»ˆæ˜ å°„ä¼šåˆå¹¶åˆ° browser source map</li>
<li>å¯¹ HMR Debug å‹å¥½</li>
</ul>
<p>è‹¥mapä¸ºnullæ—¶ï¼Œè®©viteè‡ªå·±å¤„ç†</p>
<ol start="3">
<li>è¿”å›ä¸ºnullæˆ–undefined</li>
</ol>
<ul>
<li>è¡¨ç¤ºæˆ‘ä¸å¤„ç†è¿™ä¸ªæ¨¡å—ï¼Œè®©ä¸‹ä¸ªæ’ä»¶å¤„ç†ã€‚å³ï¼š<strong>è·³è¿‡è¿™ä¸ªé˜¶æ®µçš„</strong></li>
</ul>
<h4 data-id="heading-10">ä½•æ—¶ä¼šè§¦å‘transform</h4>
<ol>
<li><strong>å¼€å‘ï¼ˆ</strong> <strong>dev</strong> <strong>serverï¼‰</strong> ï¼šVite åœ¨æµè§ˆå™¨è¯·æ±‚æ¨¡å—æ—¶ï¼Œå…ˆ <code>resolveId</code> â†’ <code>load</code>ï¼ˆè¯»æ–‡ä»¶ï¼‰â†’ <code>transform</code> â†’ è¿”å›ç»™æµè§ˆå™¨ï¼ˆå¹¶ç¼“å­˜ç»“æœï¼‰ã€‚</li>
<li><strong>æ„å»ºï¼ˆbuildï¼‰</strong> ï¼šRollup æ‰“åŒ…æµç¨‹ï¼ŒVite åŸºäº Rollup æ’ä»¶æ¥å£æ‰§è¡Œï¼Œé¡ºåºç±»ä¼¼ï¼š<code>resolveId</code> â†’ <code>load</code> â†’ <code>transform</code> â†’ æ‰“åŒ…ã€‚</li>
<li>å¯¹äº SFCï¼ˆä¾‹å¦‚ Vue å•æ–‡ä»¶ç»„ä»¶ï¼‰ï¼Œä¸€ä¸ª <code>.vue</code> ä¼šè¢«æ‹†æˆå¤šä¸ªè¯·æ±‚ï¼ˆscript/template/styleï¼‰ï¼Œæ¯ä¸ªå­æ¨¡å—éƒ½ä¼šèµ° <code>transform</code>ï¼Œå› æ­¤ä½ ä¼šçœ‹åˆ°åŒä¸€ä¸ªæ–‡ä»¶è¢«å¤šæ¬¡ <strong>transform</strong>ï¼ˆé€šè¿‡ <code>id</code> çš„ query åŒºåˆ†ï¼‰ã€‚</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/321133fe4e2947f1b361c6e62b8bfb22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=V8Lr04AKUg8SO3FQt%2BnwBSEiURs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-11">æºç æº¯æº</h2>
<h3 data-id="heading-12">ä¸ºä»€ä¹ˆéœ€è¦æºç æº¯æºæ’ä»¶</h3>
<p>è°ˆåˆ°ä¸ºä»€ä¹ˆéœ€è¦<strong>æºç </strong> <strong>æº¯æº</strong>ã€‚å°±å¾—æåˆ°å¸å†…çš„æºç æ¶æ„ï¼š<strong>è‡ªç ”å¾®å‰ç«¯+monorepoæ¶æ„</strong>ï¼Œæœ¬èº«æ¶æ„è®¾è®¡æœ¬èº«å°±æ¯”è¾ƒå¤æ‚ï¼Œåœ¨é¡¹ç›®è§„æ¨¡è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼Œæˆ–æ˜¯é¡¹ç›®å¼€å‘æ—¶é—´é•¿ï¼Œäººå‘˜å˜åŠ¨å¤§ï¼Œå°±ä¼šå¯¼è‡´æœ‰å¾ˆå¤šé—®é¢˜å‡ºç°ï¼Œå°±æ¯”å¦‚ldç»Ÿè®¡è¿‡ <strong>.vueæ–‡ä»¶</strong>å·²ç»8000ä¸ªäº†ï¼Œä»£ç ä¸­æœ‰<strong>2250å¯¹</strong>é‡å¤çš„æºä»£ç æ–‡ä»¶ã€‚æ€»è®¡é‡å¤ä»£ç è¡Œæ•°: <strong>69578</strong> <strong>è¡Œï¼Œ</strong> æ‰€ä»¥æˆ‘ä»¬æ‹Ÿè®¾è®¡ä¸€æ¬¾Viteæ’ä»¶é…åˆæ²¹çŒ´è„šæœ¬ï¼Œèƒ½å¤Ÿè¯†åˆ«ä¸€ä¸ªé¡µé¢çš„æ‰€æœ‰ç»„ä»¶ï¼Œé€šè¿‡clickï¼Œèƒ½å¤Ÿå¿«é€Ÿå®šä½åˆ°å¯¹åº”çš„componentã€‚</p>
<h3 data-id="heading-13">è®¾è®¡æ€è·¯æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<h5 data-id="heading-14">ç›®æ ‡ï¼š</h5>
<p>æˆ‘ä»¬æƒ³è¦å®ç°ä¸€ä¸ª<strong>æ‰€è§å³æ‰€å¾—</strong>æ¨¡å¼ï¼Œå³èƒ½å¤Ÿæ¸…æ¥šçš„çœ‹åˆ°ä¸€ä¸ªé¡µé¢ç”±å“ªäº›ç»„ä»¶ç»„æˆï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ç»„ä»¶æ¸²æŸ“äº†é¡µé¢çš„å“ªäº›åœ°æ–¹ï¼Œå¹¶ä¸”ç‚¹å‡»å¯¹åº”æ¨¡å—åï¼Œèƒ½å¤Ÿç«‹é©¬å¼¹å‡ºç»„ä»¶å¯¹åº”çš„ç»å¯¹è·¯å¾„ï¼Œæ–¹ä¾¿ç›´æ¥å»å¯»æ‰¾åˆ°å¯¹åº”çš„ç»„ä»¶ã€‚</p>
<p>å…·ä½“ä½“ç°æˆä»€ä¹ˆæ ·å‘¢ï¼Ÿè¿™é‡Œèµ·ä¸€ä¸ªç®€å•çš„å°é¡¹ç›®ç»™å¤§å®¶çœ‹çœ‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/582218925347425e9c1110ec0d497eac~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=JwU5ihukifeHnO6rgwpZ6Bl0exU%3D" alt="image.png" loading="lazy"/></p>
<p>æ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„å°æ¶æ„ï¼Œå½“æˆ‘ä»¬æƒ³è¦çŸ¥é“å¤´éƒ¨ç»„ä»¶åœ¨å¯¹åº”æºä»£ç çš„å“ªä¸ªä½ç½®æ—¶ï¼Œæˆ‘ä»¬ç‚¹å‡»ä»–ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b08897ca2430454193cd425dee446eb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=OXBGZLNAZg6fdAIyS9xoGQx%2BE10%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬ä¸€ä¸ªå°±æ˜¯å¤´éƒ¨ç»„ä»¶å¯¹åº”çš„ç»„ä»¶è·¯å¾„ï¼Œä¸‹é¢çš„å°±æ˜¯å…¶çˆ¶ç»„ä»¶ï¼Œæ–¹ä¾¿æˆ‘ä»¬äº†è§£åµŒå¥—å…³ç³»ã€‚</p>
<h5 data-id="heading-15">å…·ä½“æ€è·¯ï¼š</h5>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“ä¸€ä»¶äº‹æƒ…ï¼Œæµè§ˆå™¨æœ€åæ¸²æŸ“çš„å†…å®¹ï¼Œæ‹¿åˆ°çš„æºæ–‡ä»¶æ˜¯ç»è¿‡<strong>æ„å»ºå·¥å…·çš„è½¬è¯‘ï¼Œå‹ç¼©ï¼Œæ‰“åŒ…</strong>åçš„<strong>æºä»£ç </strong>ï¼Œä¸è‡ªå·±å®é™…å¼€å‘æ˜¯å¤©å£¤ä¹‹åˆ«ï¼Œæ‰€ä»¥é’ˆå¯¹<strong>æ‰“åŒ…åçš„æºä»£ç æº¯æº</strong>æ˜¯ä¸åˆ‡å®é™…çš„ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯æ˜¯ï¼š</p>
<ol>
<li>éœ€è¦åœ¨æ„å»ºé˜¶æ®µï¼Œé’ˆå¯¹<strong>å¯¹åº”æ–‡ä»¶</strong>è¿›è¡Œå¤„ç†</li>
<li>å…·ä½“å¤„ç†å°±æ˜¯å°†å¯¹åº”æ–‡ä»¶çš„<strong>ç»å¯¹è·¯å¾„</strong>ï¼Œé€šè¿‡æŸäº›æ–¹å¼ï¼Œåœ¨æ„å»ºåï¼Œ<strong>ä¿å­˜åˆ°</strong> <strong>æºä»£ç </strong></li>
<li>å†é€šè¿‡<strong>æ²¹çŒ´æ’ä»¶</strong>ï¼Œåœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œè„šæœ¬ï¼Œè¯¥è„šæœ¬æ ¸å¿ƒä»£ç å°±æ˜¯æå–åˆ°ç‚¹å‡»æ¨¡å—å¯¹åº”çš„ä¿å­˜çš„ç»å¯¹è·¯å¾„è¿›è¡Œè½¬è¯‘æ¸²æŸ“å‡ºæ¥ï¼Œæˆä¸ºå›¾ç‰‡ä¸­çš„æ ·å¼ã€‚</li>
</ol>
<h5 data-id="heading-16">å…·ä½“å®ç°ï¼š</h5>
<ol>
<li>
<p>ç¼–å†™è‡ªå®šä¹‰viteæ’ä»¶ï¼Œæ’ä»¶ç”¨å¤„ï¼šåœ¨æ¯ä¸ªç»„ä»¶çš„æ ¹å…ƒç´ ä¸­æ·»åŠ è‡ªå®šä¹‰å±æ€§ï¼Œå†…å®¹ä¸ºè¯¥æ–‡ä»¶ç»å¯¹è·¯å¾„çš„ç¼–ç å½¢å¼å­˜å‚¨åœ¨æ­¤ã€‚</p>
</li>
<li>
<p>å°†æ ¹å…ƒç´ çš„è‡ªå®šä¹‰å±æ€§å€¼å¹¿æ’­åˆ°å­ç»„ä»¶çš„ç±»å‹ä¸­ï¼Œä»»ä½•ä½ æƒ³ç‚¹å‡»/è°ƒè¯•çš„å…ƒç´ éƒ½å¸¦æœ‰è¶³å¤Ÿçš„ä¿¡æ¯</p>
</li>
<li>
<p>ç¼–å†™jsè„šæœ¬ï¼Œæ ¸å¿ƒåœ¨äºæå–åˆ°ç‚¹å‡»å¯¹åº”å…ƒç´ ï¼Œèƒ½å¤Ÿå¿«é€Ÿè¯†åˆ«è½¬è¯‘å‡ºè·¯å¾„ï¼Œå¹¶æ¸²æŸ“åˆ°å¼¹çª—ã€‚</p>
</li>
</ol>
<h4 data-id="heading-17">viteæ’ä»¶å¦‚ä½•ç¼–å†™ï¼Ÿ</h4>
<p>åœ¨ç¼–å†™æ’ä»¶å‰ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æˆ‘ä»¬æ’ä»¶éœ€è¦åšä»€ä¹ˆï¼š</p>
<ul>
<li><strong>æ¯ä¸ªVueæ–‡ä»¶ä¸­çš„æ ¹å…ƒç´ ï¼Œæ·»åŠ å¯¹åº”çš„è‡ªå®šä¹‰å±æ€§ï¼Œå±æ€§å€¼å¡«çš„æ˜¯å¯¹åº”è·¯å¾„çš„ç¼–ç ã€‚</strong></li>
</ul>
<p>é‚£ä¹ˆé’ˆå¯¹è¿™ä¸ªéœ€æ±‚ï¼Œæˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ†æï¼Œ<strong>è¦ä½¿ç”¨å“ªä¸ªç”Ÿå‘½å‘¨æœŸé’©å­æ‰èƒ½å®ç°å¯¹åº”çš„æ•ˆæœï¼Ÿ</strong></p>
<p>æœç´¢è¿‡åï¼Œå‘ç°<strong>thransform(code,id)</strong> è¿™ä¸ªé’©å­èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚</p>
<blockquote>
<p>transform æ˜¯ Vite æ’ä»¶ä½“ç³»é‡Œçš„ç¼–è¯‘é’©å­ã€‚æ¯å½“ Vite æ­£åœ¨åŠ è½½æŸä¸ªæ¨¡å—ï¼ˆæ— è®ºæ˜¯ .tsã€.vue è¿˜æ˜¯åˆ«çš„å¯å¤„ç†èµ„æºï¼‰ï¼Œéƒ½ä¼šæŠŠâ€œæºä»£ç å­—ç¬¦ä¸² + æ¨¡å— idï¼ˆå«ç»å¯¹è·¯å¾„/æŸ¥è¯¢å‚æ•°ï¼‰â€ä¼ è¿›æ¯ä¸ªæ’ä»¶çš„ <strong>transform(code, id)</strong> ï¼Œè®©æ’ä»¶æœ‰æœºä¼šåœ¨å®˜æ–¹ç¼–è¯‘å™¨è¿è¡Œå‰å¯¹<strong>æºç </strong> <strong>åšä¸€æ¬¡æ”¹å†™ã€æ›¿æ¢æˆ–åˆ†æ</strong>ã€‚</p>
</blockquote>
<p>æœ€åæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb8299cdafe74635ad2b2d2a0407c7f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=%2Fyw5M7SN3jO7IzrquvkvV%2FHvcrA%3D" alt="image.png" loading="lazy"/></p>
<p>å…·ä½“æºä»£ç å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cscMark</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Plugin</span> {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">name</span>: <span class="hljs-string">'csc-mark'</span>,
    <span class="hljs-attr">enforce</span>: <span class="hljs-string">'pre'</span>,
    <span class="hljs-title function_">transform</span>(<span class="hljs-params">code, id</span>) {
      <span class="hljs-keyword">if</span> (!id.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.vue'</span>)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
      }

      <span class="hljs-keyword">const</span> { template } = <span class="hljs-title function_">parse</span>(code, { <span class="hljs-attr">filename</span>: id }).<span class="hljs-property">descriptor</span>;

      <span class="hljs-keyword">if</span>(template) {
        <span class="hljs-keyword">const</span> elm = template.<span class="hljs-property">ast</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElementNode</span> | <span class="hljs-literal">undefined</span>;
        <span class="hljs-keyword">if</span>(elm) {
          <span class="hljs-keyword">const</span> tagString = <span class="hljs-string">`&lt;<span class="hljs-subst">${elm.tag}</span>`</span>;

          <span class="hljs-keyword">const</span> insertIndex = elm.<span class="hljs-property">loc</span>.<span class="hljs-property">source</span>.<span class="hljs-title function_">indexOf</span>(tagString) + tagString.<span class="hljs-property">length</span>;
          <span class="hljs-keyword">const</span> newSource
              = <span class="hljs-string">`<span class="hljs-subst">${elm.loc.source.slice(<span class="hljs-number">0</span>, insertIndex)}</span> csc-mark="<span class="hljs-subst">${LZString.compressToBase64(id)}</span>"<span class="hljs-subst">${elm.loc.source.slice(insertIndex)}</span>`</span>;
  
          code = code.<span class="hljs-title function_">replace</span>(elm.<span class="hljs-property">loc</span>.<span class="hljs-property">source</span>, newSource);
        }
      }

      <span class="hljs-keyword">return</span> code;
    }
  };
}
</code></pre>
<ol>
<li>
<p>éå†æ¯ä¸ªvueç»„ä»¶</p>
</li>
<li>
<p>è·å¾—<strong>code</strong>é‡Œé¢<strong>template</strong>çš„å†…å®¹</p>
</li>
<li>
<p>é€šè¿‡astæ‹¿åˆ°æ ¹å…ƒç´ ï¼š<strong>elm</strong></p>
</li>
<li>
<p>é€šè¿‡<strong>LZString.compressToBase64(</strong> <em><strong>id</strong></em> <strong>)</strong> å°†<strong>ç»å¯¹è·¯å¾„</strong>èµ‹å€¼è¿›å»ã€‚æ³¨ï¼šè¯¥é’©å­å‚æ•°idå°±æ˜¯éå†è¯¥æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</p>
</li>
<li>
<p>è¿”å›æ–°ä»£ç ç»™åç»­ç¼–è¯‘æ„å»ºä½¿ç”¨</p>
</li>
</ol>
<h4 data-id="heading-18">å¦‚ä½•å°†è·¯å¾„å¹¿æ’­åˆ°å­ç»„ä»¶ï¼Ÿ</h4>
<p>æˆ‘ä»¬éœ€è¦æœ‰ä¸ªé’©å­ï¼Œèƒ½å¤Ÿåœ¨ä¸Šè¿°æ ‡ç­¾æ‰“å®Œä¹‹åï¼Œå†é€ä¸€éå†è¯¥æ–‡ä»¶å†…çš„å…¶ä»–ç»„ä»¶ã€‚å°†ç¼–ç åçš„idæ³¨å…¥classä¸­ã€‚é‚£ä¹ˆå“ªä¸ªé’©å­èƒ½å¤Ÿå®ä¹ è¿™ç§åŠŸèƒ½å‘¢ï¼Ÿ</p>
<p>ç»è¿‡è°ƒç ”åå‘ç°ï¼š</p>
<p>Vueæ’ä»¶ä¸­ï¼Œæœ‰ä¸ªé’©å­èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(<span class="hljs-function">(<span class="hljs-params">{ mode }</span>) =&gt;</span> ({
  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">vue</span>({
    <span class="hljs-attr">template</span>: {
      <span class="hljs-attr">compilerOptions</span>: {
          <span class="hljs-attr">nodeTransforms</span>: [
              è‡ªå·±ç¼–å†™çš„å‡½æ•°
          ],
      },
  },
  }),<span class="hljs-title function_">cscMark</span>() ],
  <span class="hljs-attr">resolve</span>: {
    <span class="hljs-attr">alias</span>: {
      <span class="hljs-string">'@'</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'src'</span>)
    }
  },
  <span class="hljs-attr">server</span>: {
    <span class="hljs-attr">host</span>: <span class="hljs-string">'0.0.0.0'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">4173</span>,
    <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span>
  },
  <span class="hljs-attr">define</span>: {
    <span class="hljs-attr">__APP_ENV__</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(mode)
  }
}));
</code></pre>
<p>ç”¨æ³•ï¼š</p>
<blockquote>
<p>åœ¨ç¼–è¯‘<strong>æ¨¡æ¿</strong>æ—¶ï¼Œå¯¹æ¯ä¸ª <strong><strong>AST</strong> <strong>èŠ‚ç‚¹</strong>æ‰§è¡Œè‡ªå·±ç¼–å†™çš„ç‰¹å®šå‡½æ•°</strong></p>
</blockquote>
<p>ğŸŒ°</p>
<pre><code class="hljs language-js" lang="js">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">csc-mark</span>=<span class="hljs-string">"è·¯å¾„1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">ks-dialog</span>&gt;</span>å¼¹çª—<span class="hljs-tag">&lt;/<span class="hljs-name">ks-dialog</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;
</code></pre>
<p>Vueæ’ä»¶ç¼–è¯‘å™¨ä¼šè§£æï¼š</p>
<ol>
<li>è¯»å–.vueæ–‡ä»¶</li>
<li>è§£æ template éƒ¨åˆ†</li>
<li>ç”Ÿæˆ ASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</li>
</ol>
<p>æœ€åç”Ÿæˆï¼š</p>
<pre><code class="hljs language-matlab" lang="matlab">ROOT (<span class="hljs-built_in">type</span>: <span class="hljs-number">0</span>)
  â””â”€â”€ &lt;div&gt; (ELEMENT, <span class="hljs-built_in">type</span>: <span class="hljs-number">1</span>)
       â”œâ”€â”€ <span class="hljs-built_in">csc</span>-mark=<span class="hljs-string">"è·¯å¾„1"</span> (ATTRIBUTE)
       â”œâ”€â”€ &lt;h1&gt; (ELEMENT, <span class="hljs-built_in">type</span>: <span class="hljs-number">1</span>)
       â”‚    â””â”€â”€ <span class="hljs-string">"æ ‡é¢˜"</span> (TEXT)
       â””â”€â”€ &lt;ks-dialog&gt; (ELEMENT, <span class="hljs-built_in">type</span>: <span class="hljs-number">1</span>)
            â””â”€â”€ <span class="hljs-string">"å¼¹çª—"</span> (TEXT)
</code></pre>
<p>Vue ç¼–è¯‘å™¨ä¼šæ·±åº¦ä¼˜å…ˆéå† ASTï¼Œå¯¹æ¯ä¸ªèŠ‚ç‚¹è°ƒç”¨è‡ªå®šä¹‰çš„å‡½æ•°ã€‚</p>
<p><strong>é‚£è¿™ä¸ªè‡ªå®šä¹‰å‡½æ•°è¯¥å¦‚ä½•å»è¿›è¡Œç¼–å†™å‘¢ï¼Ÿ</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">cscMarkNodeTransform</span> = (<span class="hljs-params">node, context</span>) =&gt; {
  <span class="hljs-keyword">if</span> (node.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span> &amp;&amp; context.<span class="hljs-property">parent</span>) {
      <span class="hljs-keyword">if</span> ([<span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ROOT</span>, <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">IF_BRANCH</span>].<span class="hljs-title function_">includes</span>(context.<span class="hljs-property">parent</span>.<span class="hljs-property">type</span>)) {
          <span class="hljs-keyword">const</span> firstElm = context.<span class="hljs-property">parent</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">type</span> === <span class="hljs-title class_">NodeTypes</span>.<span class="hljs-property">ELEMENT</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElementNode</span> | <span class="hljs-literal">undefined</span>;
          <span class="hljs-keyword">const</span> addText = firstElm &amp;&amp; firstElm.<span class="hljs-property">props</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'csc-mark'</span>)?.<span class="hljs-property">value</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">''</span>;

          <span class="hljs-keyword">if</span> (addText) {
                  <span class="hljs-title function_">addClass</span>(node, addText, <span class="hljs-string">'class'</span>);
          }
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (context.<span class="hljs-property">parent</span>.<span class="hljs-property">props</span>?.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'csc-mark'</span>)?.<span class="hljs-property">value</span>?.<span class="hljs-property">content</span>) {
          <span class="hljs-keyword">const</span> addText = context.<span class="hljs-property">parent</span>.<span class="hljs-property">props</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">name</span> === <span class="hljs-string">'csc-mark'</span>)?.<span class="hljs-property">value</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">''</span>;
          <span class="hljs-keyword">if</span> (addText) {
                  <span class="hljs-title function_">addClass</span>(node, addText, <span class="hljs-string">'class'</span>);
          }
      }

  }
};
</code></pre>
<ol>
<li>åœ¨ <strong>cscMarkNodeTransform</strong> ä¸­ï¼Œåªæœ‰å½“å½“å‰ node æ˜¯ <strong>NodeTypes.ELEMENT</strong> ä¸”å­˜åœ¨ <strong>context.parent</strong> æ—¶æ‰ä¼šç»§ç»­å¤„ç†ï¼Œé¿å…å¯¹éå…ƒç´ èŠ‚ç‚¹æˆ–æ— çˆ¶èŠ‚ç‚¹çš„æƒ…å†µåšå¤šä½™æ“ä½œ</li>
<li>å½“çˆ¶èŠ‚ç‚¹æ˜¯ ROOT æˆ– IF_BRANCH æ—¶ï¼Œä¼šæŸ¥æ‰¾çˆ¶èŠ‚ç‚¹çš„<strong>é¦–ä¸ªå­å…ƒç´ </strong>ï¼Œè¯»å–å…¶ <strong>csc-mark å±æ€§</strong>çš„å†…å®¹ï¼Œå¹¶å°†è¯¥å†…å®¹é€šè¿‡ addClass åŠ åœ¨å½“å‰èŠ‚ç‚¹çš„ class ä¸Šï¼Œä»è€ŒæŠŠ<strong>é¡¶å±‚ csc-mark</strong> æ ‡è®°æ‰©æ•£åˆ°å…·ä½“å…ƒç´ ã€‚</li>
<li>å¦‚æœçˆ¶èŠ‚ç‚¹æœ¬èº«å¸¦æœ‰ <strong>csc-mark</strong> å±æ€§ï¼Œå°±ç›´æ¥è¯»å–çˆ¶èŠ‚ç‚¹çš„è¯¥å±æ€§å†…å®¹å¹¶åŒæ ·è°ƒç”¨ addClassï¼Œä»¥ç¡®ä¿<strong>åµŒå¥—å…ƒç´ </strong> <strong>ç»§æ‰¿</strong> <strong>çˆ¶çº§ csc-mark å®šä¹‰çš„ç±»å</strong>ã€‚</li>
</ol>
<p><strong>é¡µé¢æ•ˆæœå‘ˆç°ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c6ac3b0c3cc645c39f177539b3eea138~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=%2FnMOne5YXo14YLFgX%2F20VtMfghk%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-19">æ²¹çŒ´è„šæœ¬ç¼–å†™ï¼š</h4>
<p>è„šæœ¬ä½œç”¨ï¼š</p>
<ol>
<li>æ·»åŠ æ£€æŸ¥buttonï¼Œåªæœ‰ç‚¹å‡»buttonæ—¶ï¼Œæ‰ä¼šå¼€å¯æº¯æºåŠŸèƒ½</li>
<li>ç‚¹å‡»åé«˜äº®æ‰€æœ‰å¸¦æœ‰css-vite-mark-ç±»åçš„å…ƒç´ </li>
<li>ç‚¹å‡»å…ƒç´ æ—¶ï¼Œæ”¶é›†å¹¶æ˜¾ç¤ºåµŒå¥—ç»„ä»¶åŠç»„ä»¶ç»å¯¹è·¯å¾„</li>
</ol>
<p><strong>æ ¸å¿ƒä»£ç </strong>åŠ<strong>è§£é‡Š</strong></p>
<p>1.ç»„ä»¶å±‚æ¬¡ç»“æ„çš„æ”¶é›†ï¼š</p>
<ul>
<li>è¿™ä¸ªå‡½æ•°ä»ç‚¹å‡»çš„å…ƒç´ å¼€å§‹<strong>å‘ä¸Šéå†DOMæ ‘</strong>ï¼Œæ”¶é›†æ‰€æœ‰<strong>å¸¦æœ‰æ ‡è®°çš„çˆ¶å…ƒç´ </strong>ï¼Œæ„å»ºç»„ä»¶å±‚æ¬¡ç»“æ„ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// å‡½æ•°ï¼šæ”¶é›†ä»é¡¶å±‚åˆ°å½“å‰å…ƒç´ çš„ csc-mark å±æ€§åˆ—è¡¨</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">collectCscMarkHierarchy</span>(<span class="hljs-params">element</span>) {
        <span class="hljs-keyword">let</span> cscMarkList = [];
        <span class="hljs-keyword">while</span> (element) {
            <span class="hljs-keyword">if</span> (element.<span class="hljs-title function_">hasAttribute</span>(<span class="hljs-string">'csc-mark'</span>)) {
                cscMarkList.<span class="hljs-title function_">push</span>({ element, <span class="hljs-attr">mark</span>: element.<span class="hljs-title function_">getAttribute</span>(<span class="hljs-string">'csc-mark'</span>) });
            }
            element = element.<span class="hljs-property">parentElement</span>;
        }
        <span class="hljs-keyword">return</span> cscMarkList;
    }
</code></pre>
<p>2.è·¯å¾„è§£ç ï¼š</p>
<p>è¿™éƒ¨åˆ†ä»£ç ä»ç±»åä¸­æå–å‹ç¼©çš„è·¯å¾„éƒ¨åˆ†ï¼Œç„¶åä½¿ç”¨<strong>LZString.decompressFromBase64</strong>è§£ç è¿˜åŸä¸ºå®é™…<strong>ç»å¯¹è·¯å¾„ã€‚</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤„ç†æºç è·¯å¾„éƒ¨åˆ†ä»£ç </span>
cssMarkList.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> tag = item.<span class="hljs-property">element</span>.<span class="hljs-property">tagName</span>.<span class="hljs-title function_">toLowerCase</span>();
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> encodedPath = item.<span class="hljs-property">originMark</span>.<span class="hljs-title function_">substring</span>(prefix.<span class="hljs-property">length</span>);
        <span class="hljs-keyword">const</span> filePath = <span class="hljs-title class_">LZString</span>.<span class="hljs-title function_">decompressFromBase64</span>(encodedPath);
        decodedPaths.<span class="hljs-title function_">push</span>({ tag, filePath });
    } <span class="hljs-keyword">catch</span> (e) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è§£ç è·¯å¾„å¤±è´¥:'</span>, e);
    }
});
</code></pre>
<p>3.äº¤äº’æœºåˆ¶</p>
<p>ç”¨æˆ·ç‚¹å‡»è¯¥å…ƒç´ æ—¶ï¼Œæ”¶é›†ç»„ä»¶åµŒå¥—ï¼Œå¹¶æ¸²æŸ“å¯¹è¯æ¡†</p>
<pre><code class="hljs language-js" lang="js"> <span class="hljs-comment">// å‡½æ•°ï¼šå¤„ç†ç‚¹å‡»äº‹ä»¶å¹¶æ˜¾ç¤º csc-mark å±‚çº§</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">event</span>) {
        <span class="hljs-keyword">let</span> element = event.<span class="hljs-property">target</span>;
  
        <span class="hljs-comment">// éå† DOM æ ‘æŸ¥æ‰¾æœ€è¿‘çš„å…·æœ‰ csc-mark å±æ€§çš„ç¥–å…ˆå…ƒç´ </span>
        <span class="hljs-keyword">while</span> (element &amp;&amp; !element.<span class="hljs-title function_">hasAttribute</span>(<span class="hljs-string">'csc-mark'</span>)) {
            element = element.<span class="hljs-property">parentElement</span>;
        }
  
        <span class="hljs-keyword">if</span> (element &amp;&amp; element.<span class="hljs-title function_">hasAttribute</span>(<span class="hljs-string">'csc-mark'</span>)) {
            event.<span class="hljs-title function_">stopPropagation</span>();
            event.<span class="hljs-title function_">preventDefault</span>();
            <span class="hljs-keyword">const</span> cscMarkList = <span class="hljs-title function_">collectCscMarkHierarchy</span>(element);
            <span class="hljs-title function_">showCustomDialog</span>(cscMarkList);
        }
    }
  
</code></pre>
<h4 data-id="heading-20">å…·ä½“ä½¿ç”¨æµç¨‹:</h4>
<ol>
<li>å¯åŠ¨å¼€å‘æœåŠ¡å™¨</li>
<li>é€šè¿‡æ²¹çŒ´æ’ä»¶æ·»åŠ è„šæœ¬</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9526d72be85c4a04b270f7625acfaac1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=boZrNTpW3JlEzFpYg8gxKnr6Njw%3D" alt="image.png" loading="lazy"/>
3. ç‚¹å‡»<strong>inspect</strong>æŒ‰é’®</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1fb14f0175874a229470db62f90a2d3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=x4qQrzRhdF%2Bf8tKwOmk%2FcyUJHSg%3D" alt="image.png" loading="lazy"/></p>
<ol start="4">
<li>ä¹‹åæƒ³è¦ä¿®æ”¹å“ªä¸ªæ¨¡å—å°±å¯ä»¥è¿›è¡Œç‚¹å‡»</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6394b3023b154cec916b3322b698aa48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=Ngu5AQxBvTRPl0QazqshYguI3Vg%3D" alt="image.png" loading="lazy"/></p>
<p>âš ï¸ä½¿ç”¨è¯¥æ²¹çŒ´è„šæœ¬æ—¶éœ€è¦æ³¨æ„åŒ¹é…åˆ°ä½ å¯¹åº”çš„é¡¹ç›®è·¯å¾„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ad4fe5559d364485b093d71999f2384d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54us6KeS5LuZ5qKm5aKD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187538&amp;x-signature=0kvG6X6F%2Bsjlv0GtYJPXYXMSk60%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-21">æ€»ç»“ï¼š</h2>
<p>é€šè¿‡ä¸Šè¿°æ–¹æ³•å¯ä»¥å®ç°ä¸€ä¸ªç®€æ˜“çš„æºç å®šä½ç³»ç»Ÿäº†ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨å¾ˆå¤šå¤æ‚é¡¹ç›®ä¸­å¿«é€Ÿå®šä½åˆ°è‡ªå·±éœ€è¦ä¿®æ”¹çš„æ¨¡å—æ‰€å¯¹åº”çš„ï¼Œé€šè¿‡è¿™ä¹ˆä¸€ä¸ªæ¯”è¾ƒå°çš„éœ€æ±‚ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¸®åŠ©å¤§å®¶å¯¹<strong>viteçš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œä»¥åŠ<strong>è‡ªå®šä¹‰æ’ä»¶</strong>ï¼Œ<strong>æ²¹çŒ´æ’ä»¶</strong>çš„åŸºæœ¬ä½¿ç”¨ï¼Œæœ‰ä¸ªè¾ƒä¸ºæ¸…æ™°çš„äº†è§£ã€‚ç»¼åˆæ€§æ¯”è¾ƒå¼ºï¼Œéœ€æ±‚å®Œæˆåå¯¹å¤§å®¶çš„å¼€å‘æ•ˆç‡ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„æå‡ï¼Œå¤§å®¶æ„Ÿå…´è¶£çš„å¯ä»¥è¿›æˆ‘çš„githubä¸Šçœ‹å¯¹åº”çš„æ’ä»¶æºç å’Œè„šæœ¬ä»£ç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fhjj5201%2Fvite-plugin" target="_blank" title="https://github.com/hjj5201/vite-plugin" ref="nofollow noopener noreferrer">æº¯æºä»£ç </a></p>
<p><strong>æ‰©å±•ç‚¹ï¼š</strong></p>
<ol>
<li>å¦‚ä½•åœ¨<strong>webpack</strong>ä¸Šï¼Œé€šè¿‡ç¼–å†™å¯¹åº”æ’ä»¶ï¼Œå®ç°ç›¸åº”çš„åŠŸèƒ½</li>
<li>ç›®å‰åªèƒ½å¤Ÿåœ¨é¡µé¢ä¸ŠçŸ¥é“å¯¹åº”æ¨¡å—ä½¿ç”¨çš„ç»„ä»¶ï¼Œ<strong>ä¸çŸ¥é“è¿™ä¸ªç»„ä»¶èƒ½å¤Ÿå¯¹åº”å“ªä¸ªé¡µé¢</strong></li>
<li>å¯ä»¥ä¿®æ”¹ä¸€äº›æ ·å¼ï¼Œè®©æ•´ä½“æ›´åŠ ç¾è§‚</li>
<li>ä¸€æ­¥åˆ°ä½ï¼Œç‚¹å‡»<strong>å¯¹åº”æ¨¡å—èƒ½å¤Ÿè‡ªåŠ¨è·³è½¬çš„ç¼–è¾‘å™¨ä¸­</strong></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[CesiumLite-åœ¨ä¸‰ç»´åœ°å›¾ä¸­ç»˜åˆ¶3Då›¾å½¢å˜å¾—æ¸¸åˆƒæœ‰ä½™]]></title>    <link>https://juejin.cn/post/7578705123208134699</link>    <guid>https://juejin.cn/post/7578705123208134699</guid>    <pubDate>2025-12-01T09:53:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578705123208134699" data-draft-id="7578667193320964159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="CesiumLite-åœ¨ä¸‰ç»´åœ°å›¾ä¸­ç»˜åˆ¶3Då›¾å½¢å˜å¾—æ¸¸åˆƒæœ‰ä½™"/> <meta itemprop="keywords" content="å‰ç«¯,GIS,cesium"/> <meta itemprop="datePublished" content="2025-12-01T09:53:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LukeSuperCoder"/> <meta itemprop="url" content="https://juejin.cn/user/88395458549383"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            CesiumLite-åœ¨ä¸‰ç»´åœ°å›¾ä¸­ç»˜åˆ¶3Då›¾å½¢å˜å¾—æ¸¸åˆƒæœ‰ä½™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/88395458549383/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LukeSuperCoder
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:53:23.000Z" title="Mon Dec 01 2025 09:53:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¯ å‘Šåˆ«é‡å¤é€ è½®å­ï¼CesiumLite å®ä½“ç®¡ç†æ¨¡å—è®©3Då›¾å½¢å¼€å‘æ•ˆç‡ç¿»å€</h2>
<blockquote>
<p>æœ¬æ–‡æ·±å…¥ä»‹ç» CesiumLite çš„å®ä½“ç®¡ç†æ¨¡å—ï¼Œä»å¼€å‘ç—›ç‚¹åˆ°å°è£…åŸç†ï¼Œå†åˆ°å®æˆ˜åº”ç”¨ï¼Œå¸¦ä½ å…¨é¢äº†è§£å¦‚ä½•ä¼˜é›…åœ°ç®¡ç† Cesium ä¸‰ç»´å®ä½“ã€‚</p>
</blockquote>
<h3 data-id="heading-1">ğŸ“Œ å‰è¨€</h3>
<p>åœ¨ä½¿ç”¨ Cesium.js å¼€å‘ä¸‰ç»´åœ°å›¾åº”ç”¨æ—¶ï¼Œå®ä½“ï¼ˆEntityï¼‰çš„åˆ›å»ºå’Œç®¡ç†æ˜¯æœ€å¸¸è§çš„éœ€æ±‚ä¹‹ä¸€ã€‚æ— è®ºæ˜¯æ ‡æ³¨ç‚¹ä½ã€ç»˜åˆ¶å»ºç­‘è½®å»“ï¼Œè¿˜æ˜¯å±•ç¤ºä¸‰ç»´æ¨¡å‹ï¼Œéƒ½ç¦»ä¸å¼€å®ä½“çš„æ“ä½œã€‚</p>
<p>ç„¶è€Œï¼ŒCesium åŸç”Ÿ API è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†åœ¨å®é™…å¼€å‘ä¸­å´å­˜åœ¨ä¸å°‘ç—›ç‚¹ã€‚æœ¬æ–‡å°†é€šè¿‡ <strong>CesiumLite</strong> é¡¹ç›®çš„å®ä½“ç®¡ç†æ¨¡å—ï¼Œå±•ç¤ºå¦‚ä½•ä¼˜é›…åœ°è§£å†³è¿™äº›é—®é¢˜ã€‚</p>
<h3 data-id="heading-2">ğŸ¨ åœ¨çº¿æ¼”ç¤º</h3>
<p>é¡¹ç›®æä¾›äº†å®Œæ•´çš„åŠŸèƒ½æ¼”ç¤ºé¡µé¢ï¼Œä½ å¯ä»¥è®¿é—®ä»¥ä¸‹é“¾æ¥æŸ¥çœ‹å®é™…æ•ˆæœï¼š</p>
<p><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Flukesupercoder.github.io%2Fcesium-lite%2Fexamples%2Fentity.html" target="_blank" title="https://lukesupercoder.github.io/cesium-lite/examples/entity.html" ref="nofollow noopener noreferrer">åœ¨çº¿æ¼”ç¤º</a></strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b45fb82a55e40c1bcf104343142c6db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTHVrZVN1cGVyQ29kZXI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187603&amp;x-signature=3oJiOtCfGcpW6W7v7SwNDytbp6M%3D" alt="image.png" loading="lazy"/>
<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FlukeSuperCoder%2Fcesium-lite" target="_blank" title="https://github.com/lukeSuperCoder/cesium-lite" ref="nofollow noopener noreferrer">é¡¹ç›®åœ°å€</a></strong></p>
<p>æ¼”ç¤ºé¡µé¢åŒ…å«ä»¥ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>ğŸ”¹ å¤šè¾¹å½¢é¢</li>
<li>ğŸ”¹ ç›’å­æ¨¡å‹</li>
<li>ğŸ”¹ çŸ©å½¢</li>
<li>ğŸ”¹ çƒä½“</li>
<li>ğŸ”¹ æ¤­åœ†å½¢</li>
<li>ğŸ”¹ åœ†æŸ±</li>
<li>ğŸ”¹ çº¿æ®µ</li>
<li>ğŸ”¹ ç®¡é“ï¼ˆPolylineVolumeï¼‰</li>
<li>ğŸ”¹ èµ°å»Š</li>
<li>ğŸ”¹ å¢™ä½“</li>
</ul>
<h3 data-id="heading-3">ğŸš« å¼€å‘ç—›ç‚¹åˆ†æ</h3>
<h4 data-id="heading-4">ç—›ç‚¹ 1ï¼šå®ä½“åˆ›å»ºè¿‡äºç¹ç</h4>
<p>ä½¿ç”¨ Cesium åŸç”Ÿ API åˆ›å»ºä¸€ä¸ªç®€å•çš„å¤šè¾¹å½¢ï¼Œéœ€è¦è¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªå¤šè¾¹å½¢å®ä½“</span>
<span class="hljs-keyword">const</span> entity = viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>({
  <span class="hljs-attr">polygon</span>: {
    <span class="hljs-attr">hierarchy</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegreesArray</span>([
      -<span class="hljs-number">109.080842</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">104.058488</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">104.053011</span>, <span class="hljs-number">41.003906</span>,
      -<span class="hljs-number">105.728954</span>, <span class="hljs-number">41.003906</span>,
    ]),
    <span class="hljs-attr">height</span>: <span class="hljs-number">5000</span>,
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">BLUE</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
    <span class="hljs-attr">outline</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">outlineColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">BLACK</span>,
  }
});

<span class="hljs-comment">// å¦‚æœéœ€è¦å®šä½åˆ°è¯¥å®ä½“</span>
viewer.<span class="hljs-title function_">zoomTo</span>(entity);
</code></pre>
<p><strong>é—®é¢˜åœ¨äºï¼š</strong></p>
<ul>
<li>æ¯æ¬¡åˆ›å»ºéƒ½è¦é‡å¤å†™ <code>viewer.entities.add()</code></li>
<li>æ²¡æœ‰ç»Ÿä¸€çš„å®ä½“ ID ç®¡ç†æœºåˆ¶</li>
<li>å®šä½åŠŸèƒ½éœ€è¦å•ç‹¬è°ƒç”¨</li>
<li>å®ä½“æ›´æ–°å’Œåˆ é™¤æ“ä½œåˆ†æ•£</li>
</ul>
<h4 data-id="heading-5">ç—›ç‚¹ 2ï¼šå®ä½“ç”Ÿå‘½å‘¨æœŸç®¡ç†æ··ä¹±</h4>
<p>å½“é¡¹ç›®ä¸­å®ä½“æ•°é‡å¢å¤šæ—¶ï¼Œç®¡ç†å˜å¾—å¤æ‚ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// éœ€è¦æ‰‹åŠ¨ç»´æŠ¤å®ä½“å¼•ç”¨</span>
<span class="hljs-keyword">const</span> entities = [];
entities.<span class="hljs-title function_">push</span>(viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>({ <span class="hljs-comment">/* ... */</span> }));
entities.<span class="hljs-title function_">push</span>(viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>({ <span class="hljs-comment">/* ... */</span> }));

<span class="hljs-comment">// æ›´æ–°æŸä¸ªå®ä½“ï¼Ÿéœ€è¦å…ˆæ‰¾åˆ°å®ƒ</span>
<span class="hljs-keyword">const</span> targetEntity = entities.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">id</span> === <span class="hljs-string">'someId'</span>);
<span class="hljs-keyword">if</span> (targetEntity) {
  targetEntity.<span class="hljs-property">polygon</span>.<span class="hljs-property">material</span> = <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>;
}

<span class="hljs-comment">// åˆ é™¤æŸä¸ªå®ä½“ï¼Ÿ</span>
viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">remove</span>(targetEntity);

<span class="hljs-comment">// æ¸…ç©ºæ‰€æœ‰ï¼Ÿ</span>
viewer.<span class="hljs-property">entities</span>.<span class="hljs-title function_">removeAll</span>(); <span class="hljs-comment">// è¿™ä¼šåˆ é™¤æ‰€æœ‰å®ä½“ï¼ŒåŒ…æ‹¬å…¶ä»–æ¨¡å—åˆ›å»ºçš„ï¼</span>
</code></pre>
<p><strong>é—®é¢˜åœ¨äºï¼š</strong></p>
<ul>
<li>å®ä½“å¼•ç”¨åˆ†æ•£ï¼Œéš¾ä»¥ç»Ÿä¸€ç®¡ç†</li>
<li>æŸ¥æ‰¾ã€æ›´æ–°ã€åˆ é™¤æ“ä½œç¹ç</li>
<li>æ¸…ç©ºæ“ä½œä¼šå½±å“å…¶ä»–æ¨¡å—</li>
<li>ç¼ºä¹å‘½åç©ºé—´éš”ç¦»</li>
</ul>
<h4 data-id="heading-6">ç—›ç‚¹ 3ï¼šä»£ç å¤ç”¨æ€§å·®</h4>
<p>æ¯ä¸ªé¡¹ç›®éƒ½è¦é‡æ–°å®ç°ç›¸ä¼¼çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// é¡¹ç›® A</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectAEntityManager</span> {
  <span class="hljs-title function_">addPolygon</span>(<span class="hljs-params">options</span>) { <span class="hljs-comment">/* ... */</span> }
  <span class="hljs-title function_">removePolygon</span>(<span class="hljs-params">id</span>) { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-comment">// é¡¹ç›® B</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ProjectBEntityController</span> {
  <span class="hljs-title function_">createEntity</span>(<span class="hljs-params">config</span>) { <span class="hljs-comment">/* ... */</span> }
  <span class="hljs-title function_">deleteEntity</span>(<span class="hljs-params">entityId</span>) { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-comment">// é¡¹ç›® C - åˆè¦é‡æ–°å†™ä¸€é...</span>
</code></pre>
<p><strong>é—®é¢˜åœ¨äºï¼š</strong></p>
<ul>
<li>æ¯ä¸ªé¡¹ç›®éƒ½åœ¨é€ è½®å­</li>
<li>æ²¡æœ‰ç»Ÿä¸€çš„æœ€ä½³å®è·µ</li>
<li>ç»´æŠ¤æˆæœ¬é«˜ï¼Œbug é‡å¤å‡ºç°</li>
</ul>
<h3 data-id="heading-7">ğŸ’¡ CesiumLite çš„è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-8">æ ¸å¿ƒè®¾è®¡æ€è·¯</h4>
<p>CesiumLite çš„å®ä½“ç®¡ç†æ¨¡å—é‡‡ç”¨äº†ä»¥ä¸‹è®¾è®¡æ€è·¯ï¼š</p>
<ol>
<li><strong>åŒå±‚å°è£…æ¶æ„</strong>ï¼š<code>EntityManager</code> + <code>EntityWrapper</code></li>
<li><strong>ç‹¬ç«‹æ•°æ®æºéš”ç¦»</strong>ï¼šä½¿ç”¨ <code>CustomDataSource</code> é¿å…æ±¡æŸ“å…¨å±€å®ä½“é›†åˆ</li>
<li><strong>ç»Ÿä¸€ ID ç®¡ç†</strong>ï¼šè‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ IDï¼Œæ”¯æŒè‡ªå®šä¹‰</li>
<li><strong>é“¾å¼æ“ä½œæ”¯æŒ</strong>ï¼šæä¾›æµç•…çš„ API è°ƒç”¨ä½“éªŒ</li>
</ol>
<h4 data-id="heading-9">æ¶æ„è®¾è®¡å›¾</h4>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          CesiumLite æ ¸å¿ƒç±»              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      EntityManager ç®¡ç†å™¨         â”‚  â”‚
â”‚  â”‚  - ç»Ÿä¸€ç®¡ç†æ‰€æœ‰å®ä½“               â”‚  â”‚
â”‚  â”‚  - ç‹¬ç«‹ CustomDataSource          â”‚  â”‚
â”‚  â”‚  - æä¾›å¢åˆ æ”¹æŸ¥æ¥å£               â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚   EntityWrapper å®ä½“åŒ…è£…å™¨  â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  - å°è£…å•ä¸ªå®ä½“             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  - è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ ID          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚  - æä¾›æ›´æ–°æ–¹æ³•             â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â†“                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      Cesium Viewer å®ä¾‹           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-10">ğŸ”§ æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-11">1. EntityWrapperï¼šå®ä½“åŒ…è£…å™¨</h4>
<p><code>EntityWrapper</code> è´Ÿè´£å°è£…å•ä¸ªå®ä½“ï¼Œæä¾›ç»Ÿä¸€çš„æ“ä½œæ¥å£ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Entity</span>, createGuid } <span class="hljs-keyword">from</span> <span class="hljs-string">'cesium'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityWrapper</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">options = {}</span>) {
        <span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ IDï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = options.<span class="hljs-property">id</span> || <span class="hljs-title function_">createGuid</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span> = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>({}, options);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">entity</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Entity</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);
    }

    <span class="hljs-comment">// æ›´æ–°å®ä½“å±æ€§</span>
    <span class="hljs-title function_">update</span>(<span class="hljs-params">options</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>, options);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">entity</span>.<span class="hljs-title function_">update</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">options</span>);
    }

    <span class="hljs-comment">// è·å–åŸç”Ÿ Cesium å®ä½“</span>
    <span class="hljs-title function_">getEntity</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">entity</span>;
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">EntityWrapper</span>;
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… è‡ªåŠ¨ç”Ÿæˆå”¯ä¸€ IDï¼Œé¿å…å†²çª</li>
<li>âœ… ä¿å­˜å®ä½“é…ç½®ï¼Œæ–¹ä¾¿åç»­æ›´æ–°</li>
<li>âœ… æä¾› <code>getEntity()</code> æ–¹æ³•ï¼Œä¿æŒåŸç”Ÿ API çš„å…¼å®¹æ€§</li>
</ul>
<h4 data-id="heading-12">2. EntityManagerï¼šå®ä½“ç®¡ç†å™¨</h4>
<p><code>EntityManager</code> æ˜¯å®ä½“ç®¡ç†çš„æ ¸å¿ƒï¼Œæä¾›å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CustomDataSource</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'cesium'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">EntityWrapper</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./entityWrapper'</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EntityManager</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">viewer</span>) {
        <span class="hljs-keyword">if</span> (!viewer) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Viewer instance is required'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span> = viewer;

        <span class="hljs-comment">// åˆ›å»ºç‹¬ç«‹çš„æ•°æ®æºï¼Œå®ç°å‘½åç©ºé—´éš”ç¦»</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomDataSource</span>(<span class="hljs-string">'entityManager'</span>);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-property">dataSources</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>);

        <span class="hljs-comment">// ä½¿ç”¨ Map ç®¡ç†æ‰€æœ‰å®ä½“ï¼ŒO(1) æŸ¥æ‰¾æ€§èƒ½</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
    }

    <span class="hljs-comment">// æ·»åŠ å®ä½“</span>
    <span class="hljs-title function_">addEntity</span>(<span class="hljs-params">options, isLocate = <span class="hljs-literal">false</span></span>) {
        <span class="hljs-keyword">const</span> entityWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EntityWrapper</span>(options);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">set</span>(entityWrapper.<span class="hljs-property">id</span>, entityWrapper);
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">add</span>(entityWrapper.<span class="hljs-title function_">getEntity</span>());

        <span class="hljs-comment">// æ”¯æŒåˆ›å»ºåè‡ªåŠ¨å®šä½</span>
        <span class="hljs-keyword">if</span> (isLocate) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">locateEntity</span>(entityWrapper.<span class="hljs-property">id</span>);
        }

        <span class="hljs-keyword">return</span> entityWrapper.<span class="hljs-property">id</span>;
    }

    <span class="hljs-comment">// ç§»é™¤å®ä½“</span>
    <span class="hljs-title function_">removeEntity</span>(<span class="hljs-params">entityId</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">has</span>(entityId)) {
            <span class="hljs-keyword">const</span> entityWrapper = <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">get</span>(entityId);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">remove</span>(entityWrapper.<span class="hljs-title function_">getEntity</span>());
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">delete</span>(entityId);
        }
    }

    <span class="hljs-comment">// æ›´æ–°å®ä½“</span>
    <span class="hljs-title function_">updateEntity</span>(<span class="hljs-params">entityId, options</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">has</span>(entityId)) {
            <span class="hljs-keyword">const</span> entityWrapper = <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">get</span>(entityId);
            entityWrapper.<span class="hljs-title function_">update</span>(options);
        }
    }

    <span class="hljs-comment">// è§†è§’å®šä½åˆ°å®ä½“</span>
    <span class="hljs-title function_">locateEntity</span>(<span class="hljs-params">entityId</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">has</span>(entityId)) {
            <span class="hljs-keyword">const</span> entityWrapper = <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">get</span>(entityId);
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">viewer</span>.<span class="hljs-title function_">zoomTo</span>(entityWrapper.<span class="hljs-title function_">getEntity</span>());
        }
    }

    <span class="hljs-comment">// è·å–æ‰€æœ‰å®ä½“</span>
    <span class="hljs-title function_">getAllEntities</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">values</span>()).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">wrapper</span> =&gt;</span> wrapper.<span class="hljs-title function_">getEntity</span>());
    }

    <span class="hljs-comment">// æ¸…é™¤æ‰€æœ‰å®ä½“ï¼ˆåªæ¸…é™¤å½“å‰ç®¡ç†å™¨çš„å®ä½“ï¼‰</span>
    <span class="hljs-title function_">clearEntities</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataSource</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">removeAll</span>();
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">entities</span>.<span class="hljs-title function_">clear</span>();
    }
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">EntityManager</span>;
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹ï¼š</strong></p>
<ul>
<li>âœ… <strong>ç‹¬ç«‹æ•°æ®æº</strong>ï¼šä½¿ç”¨ <code>CustomDataSource</code> å®ç°å‘½åç©ºé—´éš”ç¦»ï¼Œä¸ä¼šå½±å“å…¶ä»–æ¨¡å—</li>
<li>âœ… <strong>é«˜æ•ˆæŸ¥æ‰¾</strong>ï¼šä½¿ç”¨ <code>Map</code> æ•°æ®ç»“æ„ï¼Œæä¾› O(1) çš„æŸ¥æ‰¾æ€§èƒ½</li>
<li>âœ… <strong>è‡ªåŠ¨å®šä½</strong>ï¼šæ”¯æŒåˆ›å»ºå®ä½“åè‡ªåŠ¨é£è¡Œåˆ°ç›®æ ‡ä½ç½®</li>
<li>âœ… <strong>ç»Ÿä¸€æ¥å£</strong>ï¼šå¢åˆ æ”¹æŸ¥æ“ä½œå‘½åè§„èŒƒï¼Œæ˜“äºç†è§£</li>
</ul>
<h3 data-id="heading-13">ğŸ¯ ä½¿ç”¨æ•™ç¨‹</h3>
<h4 data-id="heading-14">åŸºç¡€ç”¨æ³•</h4>
<h5 data-id="heading-15">1. åˆå§‹åŒ– CesiumLite</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> cesiumLite = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CesiumLite</span>(<span class="hljs-string">'cesiumContainer'</span>, {
  <span class="hljs-attr">map</span>: {
    <span class="hljs-attr">baseMap</span>: {
      <span class="hljs-attr">id</span>: <span class="hljs-string">'imagery'</span>
    },
    <span class="hljs-attr">camera</span>: {
      <span class="hljs-attr">longitude</span>: <span class="hljs-number">116.397428</span>,
      <span class="hljs-attr">latitude</span>: <span class="hljs-number">39.90923</span>,
      <span class="hljs-attr">height</span>: <span class="hljs-number">1000000</span>
    }
  }
});
</code></pre>
<h5 data-id="heading-16">2. æ·»åŠ å„ç§å‡ ä½•å®ä½“</h5>
<h6 data-id="heading-17">æ·»åŠ å¤šè¾¹å½¢</h6>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> polygonId = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">polygon</span>: {
    <span class="hljs-attr">hierarchy</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegreesArray</span>([
      -<span class="hljs-number">109.080842</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">104.058488</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">104.053011</span>, <span class="hljs-number">41.003906</span>,
      -<span class="hljs-number">105.728954</span>, <span class="hljs-number">41.003906</span>,
    ]),
    <span class="hljs-attr">height</span>: <span class="hljs-number">5000</span>,
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">BLUE</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
    <span class="hljs-attr">outline</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">outlineColor</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">BLACK</span>,
  }
}, <span class="hljs-literal">true</span>); <span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•° true è¡¨ç¤ºåˆ›å»ºåè‡ªåŠ¨å®šä½</span>
</code></pre>
<h6 data-id="heading-18">æ·»åŠ ç›’å­æ¨¡å‹</h6>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">position</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(-<span class="hljs-number">109.080842</span>, <span class="hljs-number">45.002073</span>),
  <span class="hljs-attr">box</span>: {
    <span class="hljs-attr">dimensions</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cartesian3</span>(<span class="hljs-number">5000</span>, <span class="hljs-number">5000</span>, <span class="hljs-number">5000</span>),
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h6 data-id="heading-19">æ·»åŠ çƒä½“</h6>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Three-dimensional sphere"</span>,
  <span class="hljs-attr">position</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(-<span class="hljs-number">114.0</span>, <span class="hljs-number">40.0</span>, <span class="hljs-number">300000.0</span>),
  <span class="hljs-attr">ellipsoid</span>: {
    <span class="hljs-attr">radii</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cartesian3</span>(<span class="hljs-number">200000.0</span>, <span class="hljs-number">200000.0</span>, <span class="hljs-number">300000.0</span>),
    <span class="hljs-attr">innerRadii</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cesium</span>.<span class="hljs-title class_">Cartesian3</span>(<span class="hljs-number">150000.0</span>, <span class="hljs-number">150000.0</span>, <span class="hljs-number">200000.0</span>),
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
    <span class="hljs-attr">outline</span>: <span class="hljs-literal">true</span>
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h6 data-id="heading-20">æ·»åŠ åœ†æŸ±</h6>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">position</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegrees</span>(-<span class="hljs-number">104.058488</span>, <span class="hljs-number">44.996596</span>),
  <span class="hljs-attr">cylinder</span>: {
    <span class="hljs-attr">length</span>: <span class="hljs-number">5000</span>,
    <span class="hljs-attr">topRadius</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">bottomRadius</span>: <span class="hljs-number">500</span>,
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
    <span class="hljs-attr">outline</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">numberOfVerticalLines</span>: <span class="hljs-number">20</span>
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h6 data-id="heading-21">æ·»åŠ èµ°å»Šï¼ˆCorridorï¼‰</h6>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">corridor</span>: {
    <span class="hljs-attr">positions</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegreesArray</span>([
      -<span class="hljs-number">109.080842</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">105.91517</span>, <span class="hljs-number">45.002073</span>,
      -<span class="hljs-number">104.058488</span>, <span class="hljs-number">44.996596</span>,
    ]),
    <span class="hljs-attr">width</span>: <span class="hljs-number">5000</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">extrudedHeight</span>: <span class="hljs-number">10000</span>,
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h6 data-id="heading-22">æ·»åŠ å¢™ï¼ˆWallï¼‰</h6>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">"Vertical wall"</span>,
  <span class="hljs-attr">wall</span>: {
    <span class="hljs-attr">positions</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Cartesian3</span>.<span class="hljs-title function_">fromDegreesArrayHeights</span>([
      -<span class="hljs-number">107.0</span>, <span class="hljs-number">43.0</span>, <span class="hljs-number">100000.0</span>,
      -<span class="hljs-number">97.0</span>, <span class="hljs-number">43.0</span>, <span class="hljs-number">100000.0</span>,
      -<span class="hljs-number">97.0</span>, <span class="hljs-number">40.0</span>, <span class="hljs-number">100000.0</span>,
      -<span class="hljs-number">107.0</span>, <span class="hljs-number">40.0</span>, <span class="hljs-number">100000.0</span>,
    ]),
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">RED</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.5</span>),
    <span class="hljs-attr">outline</span>: <span class="hljs-literal">true</span>
  }
}, <span class="hljs-literal">true</span>);
</code></pre>
<h4 data-id="heading-23">é«˜çº§æ“ä½œ</h4>
<h5 data-id="heading-24">æ›´æ–°å®ä½“</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¿å­˜å®ä½“ ID</span>
<span class="hljs-keyword">const</span> entityId = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({ <span class="hljs-comment">/* ... */</span> });

<span class="hljs-comment">// æ›´æ–°å®ä½“å±æ€§</span>
cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">updateEntity</span>(entityId, {
  <span class="hljs-attr">polygon</span>: {
    <span class="hljs-attr">material</span>: <span class="hljs-title class_">Cesium</span>.<span class="hljs-property">Color</span>.<span class="hljs-property">GREEN</span>.<span class="hljs-title function_">withAlpha</span>(<span class="hljs-number">0.7</span>)
  }
});
</code></pre>
<h5 data-id="heading-25">å®šä½åˆ°æŒ‡å®šå®ä½“</h5>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">locateEntity</span>(entityId);
</code></pre>
<h5 data-id="heading-26">åˆ é™¤æŒ‡å®šå®ä½“</h5>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">removeEntity</span>(entityId);
</code></pre>
<h5 data-id="heading-27">æ¸…ç©ºæ‰€æœ‰å®ä½“</h5>
<pre><code class="hljs language-javascript" lang="javascript">cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">clearEntities</span>();
</code></pre>
<h5 data-id="heading-28">è·å–æ‰€æœ‰å®ä½“</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> allEntities = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">getAllEntities</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å½“å‰å®ä½“æ•°é‡ï¼š'</span>, allEntities.<span class="hljs-property">length</span>);
</code></pre>
<h3 data-id="heading-29">ğŸ“Š å¯¹æ¯”ä¼ ç»Ÿå¼€å‘æ–¹å¼</h3>
<h4 data-id="heading-30">ä»£ç é‡å¯¹æ¯”</h4>









































<table><thead><tr><th>æ“ä½œ</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>CesiumLite</th><th>å‡å°‘ä»£ç é‡</th></tr></thead><tbody><tr><td>åˆ›å»ºå®ä½“</td><td>10+ è¡Œ</td><td>3 è¡Œ</td><td>70%</td></tr><tr><td>åˆ›å»ºå¹¶å®šä½</td><td>15+ è¡Œ</td><td>3 è¡Œ</td><td>80%</td></tr><tr><td>æ›´æ–°å®ä½“</td><td>8+ è¡Œ</td><td>1 è¡Œ</td><td>87%</td></tr><tr><td>åˆ é™¤å®ä½“</td><td>5+ è¡Œ</td><td>1 è¡Œ</td><td>80%</td></tr><tr><td>æ‰¹é‡æ¸…ç©º</td><td>10+ è¡Œ</td><td>1 è¡Œ</td><td>90%</td></tr></tbody></table>
<h4 data-id="heading-31">åŠŸèƒ½å¯¹æ¯”</h4>








































<table><thead><tr><th>åŠŸèƒ½</th><th>ä¼ ç»Ÿæ–¹å¼</th><th>CesiumLite</th></tr></thead><tbody><tr><td>å®ä½“åˆ›å»º</td><td>âœ…</td><td>âœ…</td></tr><tr><td>å”¯ä¸€ ID ç®¡ç†</td><td>âŒ éœ€æ‰‹åŠ¨å®ç°</td><td>âœ… è‡ªåŠ¨ç”Ÿæˆ</td></tr><tr><td>å‘½åç©ºé—´éš”ç¦»</td><td>âŒ éœ€æ‰‹åŠ¨å®ç°</td><td>âœ… å†…ç½®æ”¯æŒ</td></tr><tr><td>è‡ªåŠ¨å®šä½</td><td>âŒ éœ€å•ç‹¬è°ƒç”¨</td><td>âœ… å‚æ•°æ§åˆ¶</td></tr><tr><td>ç»Ÿä¸€æ›´æ–°æ¥å£</td><td>âŒ åˆ†æ•£æ“ä½œ</td><td>âœ… ç»Ÿä¸€æ¥å£</td></tr><tr><td>æ‰¹é‡æ“ä½œ</td><td>âŒ éœ€æ‰‹åŠ¨å¾ªç¯</td><td>âœ… å†…ç½®æ”¯æŒ</td></tr></tbody></table>
<h3 data-id="heading-32">ğŸš€ å¿«é€Ÿå¼€å§‹</h3>
<h4 data-id="heading-33">1. å®‰è£…</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># NPM å®‰è£…ï¼ˆæ¨èï¼‰</span>
npm install cesium-lite

<span class="hljs-comment"># æˆ–è€…é€šè¿‡ GitHub å…‹éš†</span>
git <span class="hljs-built_in">clone</span> https://github.com/lukeSuperCoder/cesium-lite.git
<span class="hljs-built_in">cd</span> cesium-lite
npm install
</code></pre>
<h4 data-id="heading-34">2. å¼•å…¥ä½¿ç”¨</h4>
<h5 data-id="heading-35">æ–¹å¼ä¸€ï¼šNPM æ–¹å¼</h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">CesiumLite</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'cesium-lite'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'cesium/Build/Cesium/Widgets/widgets.css'</span>;

<span class="hljs-keyword">const</span> cesiumLite = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CesiumLite</span>(<span class="hljs-string">'cesiumContainer'</span>, {
  <span class="hljs-comment">// é…ç½®é¡¹</span>
});
</code></pre>
<h4 data-id="heading-36">æ–¹å¼äºŒï¼šæœ¬åœ°è¿è¡Œé¡¹ç›®</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/lukeSuperCoder/cesium-lite.git
<span class="hljs-built_in">cd</span> cesium-lite

<span class="hljs-comment"># å®‰è£…ä¾èµ–</span>
npm install
</code></pre>
<h4 data-id="heading-37">3. è¿è¡Œç¤ºä¾‹</h4>
<pre><code class="hljs language-bash" lang="bash">npm run dev
</code></pre>
<p>è®¿é—® <code>http://localhost:8020/entity.html</code> æŸ¥çœ‹å®ä½“ç®¡ç†ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-38">ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h3>
<h4 data-id="heading-39">1. åˆç†ä½¿ç”¨è‡ªåŠ¨å®šä½</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¹äºé‡è¦çš„é¦–ä¸ªå®ä½“ï¼Œå¯ç”¨è‡ªåŠ¨å®šä½</span>
<span class="hljs-keyword">const</span> mainEntityId = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>(options, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// æ‰¹é‡åˆ›å»ºæ—¶ï¼Œå…³é—­è‡ªåŠ¨å®šä½ä»¥æå‡æ€§èƒ½</span>
entities.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entity</span> =&gt;</span> {
  cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>(entity, <span class="hljs-literal">false</span>);
});

<span class="hljs-comment">// æ‰¹é‡åˆ›å»ºå®Œæˆåï¼Œæ‰‹åŠ¨å®šä½åˆ°æŸä¸ªå®ä½“</span>
cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">locateEntity</span>(mainEntityId);
</code></pre>
<h4 data-id="heading-40">2. å®ä½“ ID ç®¡ç†</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸ºé‡è¦å®ä½“æŒ‡å®šè‡ªå®šä¹‰ ID</span>
<span class="hljs-keyword">const</span> buildingId = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>({
  <span class="hljs-attr">id</span>: <span class="hljs-string">'building_main_001'</span>,  <span class="hljs-comment">// è‡ªå®šä¹‰ ID</span>
  <span class="hljs-attr">polygon</span>: { <span class="hljs-comment">/* ... */</span> }
});

<span class="hljs-comment">// åç»­å¯ä»¥ç›´æ¥ä½¿ç”¨è‡ªå®šä¹‰ ID æ“ä½œ</span>
cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">updateEntity</span>(<span class="hljs-string">'building_main_001'</span>, { <span class="hljs-comment">/* ... */</span> });
</code></pre>
<h4 data-id="heading-41">3. æ‰¹é‡æ“ä½œä¼˜åŒ–</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‰¹é‡åˆ›å»ºå®ä½“</span>
<span class="hljs-keyword">const</span> entityIds = [];
<span class="hljs-keyword">const</span> batchData = [ <span class="hljs-comment">/* å¤§é‡æ•°æ® */</span> ];

batchData.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
  <span class="hljs-keyword">const</span> id = cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">addEntity</span>(data, <span class="hljs-literal">false</span>);
  entityIds.<span class="hljs-title function_">push</span>(id);
});

<span class="hljs-comment">// éœ€è¦æ—¶å†æ‰¹é‡å®šä½</span>
entityIds.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> {
  cesiumLite.<span class="hljs-property">entityManager</span>.<span class="hljs-title function_">locateEntity</span>(id);
});
</code></pre>
<h3 data-id="heading-42">ğŸ”® æœªæ¥è§„åˆ’</h3>
<p>å®ä½“ç®¡ç†æ¨¡å—åç»­å°†ä¼šæ”¯æŒï¼š</p>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ä½“åˆ†ç»„ç®¡ç†</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ä½“æ ·å¼é¢„è®¾</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ä½“åŠ¨ç”»æ”¯æŒ</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ä½“ç‚¹å‡»äº‹ä»¶å°è£…</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> å®ä½“åºåˆ—åŒ–ä¸ååºåˆ—åŒ–</li>
<li class="task-list-item"><input type="checkbox" disabled="disabled"/> æ‰¹é‡æ“ä½œæ€§èƒ½ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-43">ğŸ“š ç›¸å…³èµ„æº</h3>
<ul>
<li><strong>GitHub ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FlukeSuperCoder%2Fcesium-lite" target="_blank" title="https://github.com/lukeSuperCoder/cesium-lite" ref="nofollow noopener noreferrer">github.com/lukeSuperCoâ€¦</a></li>
<li><strong>åœ¨çº¿æ¼”ç¤º</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Flukesupercoder.github.io%2Fcesium-lite%2F" target="_blank" title="https://lukesupercoder.github.io/cesium-lite/" ref="nofollow noopener noreferrer">lukesupercoder.github.io/cesium-liteâ€¦</a></li>
<li><strong>NPM åŒ…</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.npmjs.com%2Fpackage%2Fcesium-lite" target="_blank" title="https://www.npmjs.com/package/cesium-lite" ref="nofollow noopener noreferrer">www.npmjs.com/package/cesâ€¦</a></li>
<li><strong>é—®é¢˜åé¦ˆ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FlukeSuperCoder%2Fcesium-lite%2Fissues" target="_blank" title="https://github.com/lukeSuperCoder/cesium-lite/issues" ref="nofollow noopener noreferrer">GitHub Issues</a></li>
</ul>
<h3 data-id="heading-44">ğŸ™ æ€»ç»“</h3>
<p>CesiumLite çš„å®ä½“ç®¡ç†æ¨¡å—é€šè¿‡åŒå±‚å°è£…æ¶æ„ï¼Œæœ‰æ•ˆè§£å†³äº† Cesium åŸç”Ÿå¼€å‘ä¸­çš„è¯¸å¤šç—›ç‚¹ï¼š</p>
<ul>
<li>âœ… <strong>ç®€åŒ– API</strong>ï¼šå‡å°‘ 70%-90% çš„ä»£ç é‡</li>
<li>âœ… <strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šè‡ªåŠ¨ ID ç”Ÿæˆ + å‘½åç©ºé—´éš”ç¦»</li>
<li>âœ… <strong>å¼€ç®±å³ç”¨</strong>ï¼šæ— éœ€é‡å¤é€ è½®å­</li>
<li>âœ… <strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šä½¿ç”¨ Map æ•°æ®ç»“æ„ï¼Œé«˜æ•ˆæŸ¥æ‰¾</li>
</ul>
<p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Cesium å¼€å‘ä¸‰ç»´åœ°å›¾åº”ç”¨ï¼Œä¸å¦¨è¯•è¯• CesiumLiteï¼Œè®©ä½ çš„å¼€å‘æ•ˆç‡ç¿»å€ï¼</p>
<hr/>
<p><strong>â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™ä¸ª Star æ”¯æŒä¸€ä¸‹ï¼</strong></p>
<p><strong>ğŸ’¬ æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºäº¤æµï¼</strong></p>
<p><strong>ç›¸å…³æ ‡ç­¾ï¼š</strong> #Cesium #ä¸‰ç»´åœ°å›¾ #WebGIS #å‰ç«¯å¼€å‘ #JavaScript #å¼€æºé¡¹ç›® #åœ°å›¾å¯è§†åŒ–</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ºä»€ä¹ˆå·¥ä½œ 10 å¹´éƒ½æ²¡é‡è¿‡åˆ†å¸ƒå¼é”ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7578700798743887906</link>    <guid>https://juejin.cn/post/7578700798743887906</guid>    <pubDate>2025-12-01T10:08:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578700798743887906" data-draft-id="7578699975413678080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ºä»€ä¹ˆå·¥ä½œ 10 å¹´éƒ½æ²¡é‡è¿‡åˆ†å¸ƒå¼é”ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-01T10:08:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¶æ„å¸ˆæ²‰é»˜"/> <meta itemprop="url" content="https://juejin.cn/user/613946828261482"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ºä»€ä¹ˆå·¥ä½œ 10 å¹´éƒ½æ²¡é‡è¿‡åˆ†å¸ƒå¼é”ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/613946828261482/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¶æ„å¸ˆæ²‰é»˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:08:36.000Z" title="Mon Dec 01 2025 10:08:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ²‰é»˜æ˜¯é‡‘ï¼Œæ€»ä¼šå‘å…‰</p>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯æ²‰é»˜</p>
<p>å‰ä¸¤å¤©åœ¨ç¾¤é‡Œçœ‹åˆ°ä¸€å¥è¯ï¼Œç¬é—´æŠŠæˆ‘ç¬‘å–·ï¼š</p>
<blockquote>
<p>â€œå·¥ä½œ10å¹´äº†ï¼Œç®€å†ä¸Šå†™äº†ç†Ÿæ‚‰åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œç»“æœä¸€æ¬¡åˆ†å¸ƒå¼é”éƒ½æ²¡ç”¨è¿‡ã€‚æ˜¯å¤ªèœï¼Œè¿˜æ˜¯å…¬å¸å¤ªç¨³ï¼Ÿâ€</p>
</blockquote>
<p>åº•ä¸‹ä¸€ç¾¤äººç«‹åˆ»è·Ÿä¸Šï¼š</p>
<ul>
<li>
<p>â€œ+1ï¼Œæˆ‘ä¹Ÿæ˜¯ï¼â€</p>
</li>
<li>
<p>â€œæˆ‘ä»¬å…¬å¸è¿â€˜åˆ†å¸ƒâ€™ä¿©å­—éƒ½ä¸æ•¢æâ€¦â€¦â€</p>
</li>
<li>
<p>â€œåˆ«è¯´é”äº†ï¼Œæˆ‘ä»¬è¿ Redis é›†ç¾¤éƒ½æ²¡æœ‰ï¼Œå°±ä¸€å°å•æœº Redis é¡¶å¤©ã€‚â€</p>
</li>
</ul>
<p>çœ‹åˆ°è¿™é‡Œï¼Œæˆ‘åªæƒ³è¯´ä¸€å¥ï¼š<br/>
<strong>å…„å¼Ÿï¼Œè¿™ä¸æ˜¯ä½ ä¸€ä¸ªäººçš„å›°æƒ‘ï¼Œè¿™æ˜¯å¤§éƒ¨åˆ†å¼€å‘çš„çœŸå®å†™ç…§ã€‚</strong></p>
<p>**-**<strong>01-</strong></p>
<p><strong>å•¥æ˜¯åˆ†å¸ƒå¼é”ï¼Ÿ</strong></p>
<p>æƒ³è±¡ä½ è·Ÿ 10 ä¸ªäººæ’é˜Ÿæ‰“é¥­â€”â€”å¤§å®¶éƒ½å¾ˆå®ˆè§„çŸ©ï¼š<strong>å…ˆæ¥å…ˆæ‰“ï¼Œå…¬å¹³æœ‰åº</strong>ã€‚</p>
<p>ä½†å¦‚æœè¿™ 10 ä¸ªäººåˆ†æ•£åœ¨ä¸åŒçª—å£ï¼Œæ¯äººéƒ½è§‰å¾—â€œé”…é‡Œè¿˜æœ‰â€è€ŒåŒæ—¶å¼€èˆ€ï¼Ÿ</p>
<p>é”…å°±ç©¿äº†ã€‚</p>
<p>è¿™å°±æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å…¸å‹ç°è±¡â€”â€”<strong>å¤šä¸ªèŠ‚ç‚¹æŠ¢ä¸€ä¸ªèµ„æºï¼Œå¿…é¡»å®šè§„åˆ™ï¼Œå¦åˆ™ä¹±å¥—ã€‚</strong></p>
<p>åˆ†å¸ƒå¼é”çš„ç”¨é€”å°±æ˜¯ï¼š</p>
<ul>
<li>è°å…ˆæŠ¢åˆ°é”ï¼Œè°æ‰§è¡Œ</li>
<li>æ‰§è¡Œå®Œæ‰å…è®¸ä¸‹ä¸€ä¸ªæ¥</li>
</ul>
<p>**<br/>
**</p>
<p><strong>å…¸å‹å†²çªåœºæ™¯ï¼š</strong></p>
<ul>
<li>
<p>å‘çº¢åŒ…ä¸èƒ½å‘ä¸¤æ¬¡</p>
</li>
<li>
<p>åº“å­˜ä¸èƒ½å–è¶…</p>
</li>
<li>
<p>å®šæ—¶ä»»åŠ¡ä¸èƒ½å¤šä¸ªèŠ‚ç‚¹ä¸€èµ·è·‘</p>
</li>
</ul>
<p>å¾ˆå¤šå…¬å¸æ ¹æœ¬æ²¡è¿™äº›é«˜å¹¶å‘éœ€æ±‚ï¼Œæ‰€ä»¥ä½ è‡ªç„¶ç”¨ä¸ä¸Šã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a918395cb3d7450289059081c9391f10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E5biI5rKJ6buY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765188516&amp;x-signature=qLrYUxDyDxKRO3fPXNSR6rMiM9c%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>-</strong> <strong>02-</strong></p>
<p><strong>ä¸¤ä¸ªä½ è‚¯å®šå¬è¿‡çš„çœŸå®äº‹æ•…</strong></p>
<h3 data-id="heading-0"><strong>åœºæ™¯ 1ï¼šç§’æ€è¶…å–</strong></h3>
<p>æ´»åŠ¨å–Šç€â€œé™é‡ 100 ä»¶â€ï¼Œç»“æœå–äº† 130 ä»¶ã€‚<br/>
ä»“åº“æ‡µäº†ï¼Œå®¢æœç‚¸äº†ï¼Œé¢†å¯¼åä½ åé¢çœ‹ä½ å†™ä»£ç ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šè¶…å–ï¼Ÿ</p>
<p>å› ä¸ºæœ‰åå°æœåŠ¡å™¨åŒæ—¶åˆ¤æ–­ï¼š</p>
<blockquote>
<p>â€œåº“å­˜ &gt; 0ï¼Œé‚£å¯ä»¥å–ï¼â€</p>
</blockquote>
<p>äºæ˜¯â€¦â€¦ä¸€èµ·å–äº†ã€‚</p>
<p><strong>è§£å†³æ–¹å¼ï¼š</strong> Â åœ¨æ‰£åº“å­˜ä¹‹å‰åŠ é”ï¼ŒæŠ¢åˆ°é”æ‰èƒ½æ“ä½œã€‚</p>
<h3 data-id="heading-1">** **</h3>
<h3 data-id="heading-2"><strong>åœºæ™¯ 2ï¼šé‡å¤é€€æ¬¾</strong></h3>
<p>ç”¨æˆ·æ‰‹é€Ÿå¤ªå¿«ï¼Œâ€œé€€æ¬¾â€ç‚¹äº†ä¸¤æ¬¡ã€‚<br/>
ä½ çš„æœåŠ¡éƒ¨ç½²åœ¨ä¸‰ä¸ªèŠ‚ç‚¹é‡Œï¼Œç»“æœä¸¤ä¸ªèŠ‚ç‚¹æ”¶åˆ°äº†åŒä¸€ä¸ªè¯·æ±‚ã€‚</p>
<p>å¦‚æœæ²¡é”ï¼Ÿ<br/>
<strong>èµ„é‡‘ç›´æ¥é€€ä¸¤éã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/99ed2dd434e9468b97c1e4d4835ea736~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E5biI5rKJ6buY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765188516&amp;x-signature=rpkGJuf59PLL2bmgL7TFdeQuE1Y%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>-</strong> <strong>03-</strong></p>
<p><strong>åˆ†å¸ƒå¼é”å’‹å®ç°?</strong></p>
<p>Redis åˆ†å¸ƒå¼é”</p>
<p>åŸç†ä¸å¤æ‚ï¼Œå°±æ˜¯ï¼š</p>
<ul>
<li><code>SETNX</code>Â æŠ¢é”</li>
<li>è®¾ç½®è¿‡æœŸæ—¶é—´é¿å…æ­»é”</li>
<li>é‡Šæ”¾é”æ—¶åˆ¤æ–­æ˜¯ä¸æ˜¯è‡ªå·±çš„é”</li>
</ul>
<p>ï¼ˆSpringBoot ç®€åŒ–ç‰ˆï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Componentpublic</span>Â <span class="hljs-keyword">class</span>Â <span class="hljs-title class_">RedisDistributedLock</span>Â {Â  Â Â <span class="hljs-meta">@Autowired</span>Â  Â Â <span class="hljs-keyword">private</span>Â <span class="hljs-title class_">StringRedisTemplate</span>Â redisTemplate;Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">boolean</span>Â <span class="hljs-title function_">tryLock</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>Â lockKey,Â <span class="hljs-built_in">String</span>Â requestId, long expireTime</span>) {Â  Â  Â  Â Â <span class="hljs-keyword">return</span>Â redisTemplate.<span class="hljs-title function_">opsForValue</span>()Â  Â  Â  Â  Â  Â  .<span class="hljs-title function_">setIfAbsent</span>(lockKey, requestId, expireTime,Â <span class="hljs-title class_">TimeUnit</span>.<span class="hljs-property">SECONDS</span>);Â  Â  }Â  Â Â <span class="hljs-keyword">public</span>Â <span class="hljs-built_in">void</span>Â <span class="hljs-title function_">releaseLock</span>(<span class="hljs-params"><span class="hljs-built_in">String</span>Â lockKey,Â <span class="hljs-built_in">String</span>Â requestId</span>) {Â  Â  Â  Â Â <span class="hljs-title class_">String</span>Â currentValue = redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">get</span>(lockKey);Â  Â  Â  Â Â <span class="hljs-keyword">if</span>Â (requestId.<span class="hljs-title function_">equals</span>(currentValue)) {Â  Â  Â  Â  Â  Â  redisTemplate.<span class="hljs-title function_">delete</span>(lockKey);Â  Â  Â  Â  }Â  Â  }}
</code></pre>
<p>çœ‹èµ·æ¥â€œåƒé‚£ä¹ˆå›äº‹â€ï¼Œä½†ä¸Šç”Ÿäº§å°±å¼€å§‹æš´éœ²å‘ï¼š</p>
<ul>
<li>
<p>é”åˆ°æœŸå¤ªçŸ­ â†’ ä¸šåŠ¡è¿˜æ²¡æ‰§è¡Œå®Œé”å°±å¤±æ•ˆ</p>
</li>
<li>
<p>é”åˆ°æœŸå¤ªé•¿ â†’ ä¸šåŠ¡æŒ‚äº†é”ä¸€ç›´ä¸é‡Šæ”¾</p>
</li>
<li>
<p>é”è¢«åˆ«äººæŠ¢èµ°åï¼Œä½ æŠŠåˆ«äººçš„é”é‡Šæ”¾äº†ï¼ˆç¾éš¾ï¼‰</p>
</li>
</ul>
<p>ç”Ÿäº§è¿˜å¾—æ˜¯ Redisson åˆ†å¸ƒå¼é”</p>
<p>Redissonï¼š</p>
<blockquote>
<p><strong>â€œåˆ«æ€•ï¼Œæˆ‘éƒ½ç»™ä½ å°è£…å¥½äº†ã€‚â€</strong></p>
</blockquote>
<p>è‡ªåŠ¨ç»­æœŸï¼ˆçœ‹é—¨ç‹—ï¼‰ã€å¯é‡å…¥é”ã€å…¬å¹³é”ã€è¯»å†™é”ï¼Œå…¨éƒ½æœ‰ã€‚</p>
<h3 data-id="heading-3">** **</h3>
<h3 data-id="heading-4"><strong>ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼š</strong></h3>
<h4 data-id="heading-5">1ï¼‰å¼•ä¾èµ–</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.redisson<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>redisson-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>Â  Â Â <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.24.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p>2ï¼‰ä»£ç æ›´ç®€å•</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Servicepublic</span>Â classÂ PaymentServiceÂ {Â  Â Â <span class="hljs-keyword">@Autowired</span>Â  Â Â privateÂ RedissonClientÂ redissonClient;Â  Â Â publicÂ voidÂ <span class="hljs-built_in">processRefund</span>(StringÂ orderNo) {Â  Â  Â  Â Â RLockÂ lock = redissonClient<span class="hljs-selector-class">.getLock</span>("lock:refund:"Â + orderNo);Â  Â  Â  Â Â tryÂ {Â  Â  Â  Â  Â  Â Â booleanÂ isLocked = lock<span class="hljs-selector-class">.tryLock</span>(<span class="hljs-number">100</span>,Â <span class="hljs-number">10</span>,Â TimeUnit.SECONDS);Â  Â  Â  Â  Â  Â Â ifÂ (isLocked) {Â  Â  Â  Â  Â  Â  Â  Â Â ifÂ (hasRefunded(orderNo)) {Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Â throwÂ newÂ <span class="hljs-built_in">RuntimeException</span>("å·²é€€æ¬¾ï¼Œè¯·å‹¿é‡å¤æ“ä½œ");Â  Â  Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">doRefund</span>(orderNo);Â  Â  Â  Â  Â  Â  Â  Â Â <span class="hljs-built_in">recordRefund</span>(orderNo);Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  }Â catchÂ (ExceptionÂ e) {Â  Â  Â  Â  Â  Â Â throwÂ newÂ <span class="hljs-built_in">RuntimeException</span>("è·å–é”å¤±è´¥", e);Â  Â  Â  Â  }Â finallyÂ {Â  Â  Â  Â  Â  Â Â ifÂ (lock.isHeldByCurrentThread()) {Â  Â  Â  Â  Â  Â  Â  Â  lock<span class="hljs-selector-class">.unlock</span>();Â  Â  Â  Â  Â  Â  }Â  Â  Â  Â  }Â  Â  }}
</code></pre>
<p>æ”¾å¿ƒï¼Œè¿™ç©æ„èƒ½æ’‘ä½å¤§éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2609154464cf4f48945d6054030adf9c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p625p6E5biI5rKJ6buY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765188516&amp;x-signature=Qa5HZH%2BT3D9mkF8wTw%2FIzI1wUno%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>**-****04-**<strong>æ€»ç»“</strong></p>
<h2 data-id="heading-6"><strong>ä¸ºä»€ä¹ˆä½ æ²¡ç”¨è¿‡ï¼Ÿ</strong></h2>
<p>éå¸¸ç®€å•ï¼Œåªæœ‰ä¸¤ç§åŸå› ï¼š</p>
<h3 data-id="heading-7"><strong>â¶ å…¬å¸ä¸šåŠ¡ç¨³å¾—ä¸€åŒ¹</strong></h3>
<ul>
<li>ç”¨æˆ·é‡å°</li>
<li>å•èŠ‚ç‚¹å°±å¤Ÿ</li>
<li>ä¸šåŠ¡æµç¨‹ä¸å†²çª</li>
<li>é«˜å¹¶å‘å‹æ ¹ä¸å­˜åœ¨</li>
</ul>
<p>æ²¡åˆ°é‡çº§ï¼Œå½“ç„¶ç”¨ä¸ä¸Šã€‚</p>
<h3 data-id="heading-8"><strong>â· æ¡†æ¶å’Œæ•°æ®åº“å¸®ä½ æ‰›äº†</strong></h3>
<p>ä½ ä»¥ä¸ºæ²¡åšï¼Œå…¶å®ç³»ç»Ÿå·²ç»å¸®ä½ åšäº†ï¼š</p>
<ul>
<li>MySQL æ‚²è§‚é”ï¼š<code>SELECT ... FOR UPDATE</code></li>
<li>ä¹è§‚é”ï¼šversionå­—æ®µ</li>
<li>RedisÂ <code>INCR/DECR</code>Â åŸå­æ“ä½œ</li>
<li>æ¶ˆæ¯å»é‡</li>
</ul>
<p>ä½ â€œçœ‹ä¸Šå»æ²¡é”â€ï¼Œä½†å…¶å®â€œé”æ— å¤„ä¸åœ¨â€ã€‚</p>
<h2 data-id="heading-9"><strong>ç°åœ¨ä¸ç”¨ï¼Œä¸ä»£è¡¨ä»¥åç”¨ä¸åˆ°</strong></h2>
<p>è·³æ§½ã€ä¸šåŠ¡å¢é•¿ã€æ¶æ„å‡çº§ï¼Œéƒ½å¯èƒ½è®©ä½ çªç„¶é‡åˆ°åˆ†å¸ƒå¼åœºæ™¯ã€‚</p>
<p>è€Œåˆ†å¸ƒå¼é”å±äºé‚£ç§ï¼š</p>
<blockquote>
<p><strong>â€œçº¿ä¸Šåå¹´ä¸ç”¨ï¼Œä¸€æ¬¡ç”¨ä¸å¥½å°±å‡ºå¤§äº‹æ•…â€çš„åŠŸèƒ½ã€‚</strong></p>
</blockquote>
<p>æ‰€ä»¥ç°åœ¨æŠŠåŸç†ææ˜ç™½ã€æŠŠä»£ç è·‘é€šï¼Œæœªæ¥ä¸€å®šèƒ½æ•‘ä½ ä¸€å‘½ã€‚</p>
<h2 data-id="heading-10"><strong>ä½ å·¥ä½œå‡ å¹´ï¼Ÿç”¨è¿‡åˆ†å¸ƒå¼é”å—ï¼Ÿ</strong></h2>
<p>ä½ å¯ä»¥ç›´æ¥åœ¨è¯„è®ºåŒºè¯´è¯´ï¼š</p>
<ul>
<li>
<p>ä½ ç¬¬ä¸€æ¬¡ç”¨åˆ†å¸ƒå¼é”æ˜¯ä»€ä¹ˆåœºæ™¯ï¼Ÿ</p>
</li>
<li>
<p>ä½ ä»¬å…¬å¸æ˜¯ä¸æ˜¯è‡³ä»Šè¿ Redis é›†ç¾¤éƒ½æ²¡æœ‰ï¼Ÿ</p>
</li>
<li>
<p>æˆ–è€…ï¼Œä½ ä¹Ÿæ˜¯â€œå†™äº†åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä½†æ²¡è§è¿‡åˆ†å¸ƒå¼é”â€çš„é‚£ç§ï¼Ÿ</p>
</li>
</ul>
<pre><code class="hljs"/></pre>
<p>**-****05-**<strong>ç²‰ä¸ç¦åˆ©</strong></p>
<pre><code class="hljs">ç«™åœ¨èŒä¸šçš„åå­—è·¯å£ï¼Œæˆ‘ä»¬æˆ–è®¸éƒ½æ›¾æ„Ÿåˆ°è¿·èŒ«ï¼š




æŠ•å‡ºçš„ç®€å†æ€»æ˜¯æ²¡æœ‰å›éŸ³ï¼Ÿ




é¢è¯•æ—¶ä¸çŸ¥å¦‚ä½•å±•ç°è‡ªå·±çš„ä¼˜åŠ¿ï¼Ÿ




æœªæ¥çš„èŒåœºé“è·¯è¯¥å¦‚ä½•è§„åˆ’ï¼Ÿ




æŠ€æœ¯ç®¡ç†èƒ½åŠ›æå‡ï¼Œå¦‚ä½•è·¨è¶Šç¬¬ä¸€æ­¥ï¼Ÿ




å¦‚æœä½ æ­£åœ¨ç»å†è¿™äº›ï¼Œæˆ‘å¾ˆä¹æ„ç”¨æˆ‘çš„ç»éªŒä¸ºä½ æä¾›ä¸€äº›å¸®åŠ©ã€‚




æ— è®ºæ˜¯ä¿®æ”¹ç®€å†ã€1å¯¹1æ±‚èŒé™ªè·‘ï¼ŒèŒä¸šè§„åˆ’å’¨è¯¢ï¼Œ




è¿˜æ˜¯è¿ˆå‘æŠ€æœ¯Leaderæˆ–æå‡ç®¡ç†æ•ˆèƒ½ï¼Œ




æ¬¢è¿ä½ åŠ æˆ‘ï¼Œæˆ‘ä»¬åƒæœ‹å‹ä¸€æ ·èŠèŠã€‚
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisè®¾è®¡è§‚â€”â€”æ˜ å°„æ€æƒ³ã€åŠ¨æ€SQLçš„è¾¹ç•Œä¸å¯ç»´æŠ¤æ€§è€ƒé‡]]></title>    <link>https://juejin.cn/post/7578667193321095231</link>    <guid>https://juejin.cn/post/7578667193321095231</guid>    <pubDate>2025-12-01T10:15:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578667193321095231" data-draft-id="7578681104292085803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisè®¾è®¡è§‚â€”â€”æ˜ å°„æ€æƒ³ã€åŠ¨æ€SQLçš„è¾¹ç•Œä¸å¯ç»´æŠ¤æ€§è€ƒé‡"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2025-12-01T10:15:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åæœˆå—åŸ"/> <meta itemprop="url" content="https://juejin.cn/user/3456520290576862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisè®¾è®¡è§‚â€”â€”æ˜ å°„æ€æƒ³ã€åŠ¨æ€SQLçš„è¾¹ç•Œä¸å¯ç»´æŠ¤æ€§è€ƒé‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3456520290576862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åæœˆå—åŸ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:15:48.000Z" title="Mon Dec 01 2025 10:15:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å¯¹è±¡ä¸å…³ç³»çš„é¸¿æ²Ÿä¹‹é—´ï¼ŒMyBatisé€‰æ‹©äº†ä¸€æ¡ç‹¬ç‰¹çš„æ¡¥æ¢å»ºè®¾ä¹‹è·¯â€”â€”ä¸å¼ºæ±‚å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œè€Œæ˜¯å°†æ§åˆ¶æƒäº¤è¿˜ç»™å¼€å‘è€…</p>
</blockquote>
<p>åœ¨æŒä¹…å±‚æ¡†æ¶çš„è®¾è®¡å“²å­¦ä¸­ï¼ŒMyBatisé‡‡å–äº†ä¸å…¨è‡ªåŠ¨ORMæ¡†æ¶æˆªç„¶ä¸åŒçš„è·¯å¾„ã€‚å®ƒä¸è¯•å›¾å®Œå…¨éšè—æ•°æ®åº“ç»†èŠ‚ï¼Œè€Œæ˜¯é€šè¿‡ä¼˜é›…çš„æ˜ å°„æœºåˆ¶å’ŒåŠ¨æ€SQLèƒ½åŠ›ï¼Œåœ¨å¯¹è±¡æ¨¡å‹ä¸å…³ç³»æ¨¡å‹ä¹‹é—´å»ºç«‹äº†å¯æ§çš„è½¬æ¢é€šé“ã€‚æœ¬æ–‡å°†æ·±å…¥å‰–æMyBatisçš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ï¼Œæ¢è®¨åŠ¨æ€SQLçš„é€‚ç”¨è¾¹ç•Œï¼Œå¹¶ç»™å‡ºæ„å»ºå¯ç»´æŠ¤MyBatisåº”ç”¨çš„æœ€ä½³å®è·µã€‚</p>
<h2 data-id="heading-0">1 MyBatisçš„è®¾è®¡å“²å­¦ï¼šåŠè‡ªåŠ¨åŒ–ORMçš„ä»·å€¼å®šä½</h2>
<h3 data-id="heading-1">1.1 ä¸å…¨è‡ªåŠ¨ORMçš„å·®å¼‚åŒ–å®šä½</h3>
<p>MyBatisä½œä¸ºä¸€ä¸ª<strong>åŠè‡ªåŠ¨åŒ–ORMæ¡†æ¶</strong>ï¼Œåœ¨è®¾è®¡å“²å­¦ä¸Šä¸Hibernateç­‰å…¨è‡ªåŠ¨ORMæ¡†æ¶æœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚å…¨è‡ªåŠ¨ORMè¯•å›¾å®Œå…¨å±è”½æ•°æ®åº“ç»†èŠ‚ï¼Œè®©å¼€å‘è€…ä»¥é¢å‘å¯¹è±¡çš„æ–¹å¼æ“ä½œæ•°æ®ï¼Œè€ŒMyBatisåˆ™æ‰¿è®¤å¯¹è±¡ä¸å…³ç³»ä¹‹é—´çš„<strong>é˜»æŠ—ä¸åŒ¹é…</strong>æ˜¯ä¸å¯é¿å…çš„ï¼Œé€‰æ‹©å°†SQLçš„æ§åˆ¶æƒäº¤è¿˜ç»™å¼€å‘è€…ã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µå¸¦æ¥äº†ä¸åŒçš„æƒè¡¡ï¼šå…¨è‡ªåŠ¨ORMé€šè¿‡æŠ½è±¡æé«˜äº†å¼€å‘æ•ˆç‡ï¼Œä½†ç‰ºç‰²äº†å¯¹SQLçš„ç²¾ç»†æ§åˆ¶ï¼›MyBatisé€šè¿‡æš´éœ²SQLç»†èŠ‚ï¼Œç¡®ä¿äº†æ€§èƒ½å¯æ§æ€§å’Œçµæ´»æ€§ï¼Œä½†è¦æ±‚å¼€å‘è€…å…·å¤‡æ•°æ®åº“çŸ¥è¯†ã€‚æ­£å¦‚MyBatisçš„æ ¸å¿ƒè´¡çŒ®è€…æ‰€è¨€ï¼šâ€œæˆ‘ä»¬ä¸ç›¸ä¿¡ä¸€ç§æ¨¡å¼èƒ½å¤Ÿé€‚åˆæ‰€æœ‰åœºæ™¯ï¼Œæœ‰æ—¶å€™ä½ éœ€è¦ç›´æ¥ä¸SQLæ‰“äº¤é“â€ã€‚</p>
<h3 data-id="heading-2">1.2 æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼šç®€å•æ€§ä¸å¯æ§æ€§</h3>
<p>MyBatisçš„è®¾è®¡éµå¾ªä¸¤ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š<strong>ç®€å•æ€§</strong>å’Œ<strong>å¯æ§æ€§</strong>ã€‚æ¡†æ¶æœ¬èº«ä¿æŒè½»é‡çº§ï¼Œæ ¸å¿ƒç»„ä»¶æ•°é‡æœ‰é™ä¸”èŒè´£å•ä¸€ï¼Œè¿™ä½¿å¾—å­¦ä¹ æ›²çº¿ç›¸å¯¹å¹³ç¼“ã€‚åŒæ—¶ï¼Œå¼€å‘è€…å¯¹SQLæ‹¥æœ‰å®Œå…¨æ§åˆ¶æƒï¼Œå¯ä»¥é’ˆå¯¹ç‰¹å®šæ•°æ®åº“ä¼˜åŒ–SQLè¯­å¥ï¼Œå……åˆ†åˆ©ç”¨æ•°æ®åº“ç‰¹æœ‰åŠŸèƒ½ã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µåœ¨å®é™…åº”ç”¨ä¸­ä½“ç°ä¸ºâ€œçº¦å®šä¼˜äºé…ç½®â€çš„é€‚åº¦ä½¿ç”¨ã€‚MyBatisæä¾›åˆç†çš„é»˜è®¤å€¼ï¼Œä½†å‡ ä¹æ‰€æœ‰é»˜è®¤è¡Œä¸ºéƒ½å¯ä»¥è¢«è¦†ç›–ï¼Œå¦‚å¯ä»¥é€šè¿‡<code>&lt;settings&gt;</code>æ ‡ç­¾é…ç½®ç¼“å­˜è¡Œä¸ºã€æ—¥å¿—å®ç°ç­‰ã€‚ä¸Springæ¡†æ¶çš„æ— ç¼é›†æˆè¿›ä¸€æ­¥å¼ºåŒ–äº†è¿™ç§å¯æ§æ€§ï¼Œä½¿MyBatisèƒ½å¤Ÿèå…¥ç°ä»£Javaåº”ç”¨ç”Ÿæ€ç³»ç»Ÿã€‚</p>
<h2 data-id="heading-3">2 æ˜ å°„æœºåˆ¶ï¼šå¯¹è±¡ä¸å…³ç³»çš„æ¡¥æ¢å»ºè®¾</h2>
<h3 data-id="heading-4">2.1 ç»“æœæ˜ å°„ï¼šä»å…³ç³»è¡¨åˆ°å¯¹è±¡æ ‘çš„è½¬æ¢</h3>
<p>MyBatisçš„æ˜ å°„æ ¸å¿ƒæ˜¯<strong>ResultMap</strong>æœºåˆ¶ï¼Œå®ƒå®šä¹‰äº†å¦‚ä½•å°†SQLæŸ¥è¯¢ç»“æœè½¬æ¢ä¸ºJavaå¯¹è±¡æ ‘ã€‚ä¸å…¨è‡ªåŠ¨ORMçš„â€œé»‘ç›’â€æ˜ å°„ä¸åŒï¼ŒResultMapè¦æ±‚å¼€å‘è€…æ˜¾å¼å®šä¹‰æ˜ å°„è§„åˆ™ï¼Œè¿™ç§æ˜¾å¼æ€§è™½ç„¶å¢åŠ äº†é…ç½®å·¥ä½œé‡ï¼Œä½†æé«˜äº†ç³»ç»Ÿçš„å¯ç†è§£æ€§å’Œå¯æ§æ€§ã€‚</p>
<p><strong>ç®€å•æ˜ å°„</strong>å¤„ç†å•è¡¨æŸ¥è¯¢åˆ°æ‰å¹³å¯¹è±¡çš„è½¬æ¢ï¼Œé€šè¿‡<code>&lt;result&gt;</code>æ ‡ç­¾å°†åˆ—ä¸å±æ€§å…³è”ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"UserResult"</span> type=<span class="hljs-string">"User"</span>&gt;
    &lt;id <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> column=<span class="hljs-string">"user_id"</span>/&gt;
    &lt;result <span class="hljs-attr">property</span>=<span class="hljs-string">"username"</span> column=<span class="hljs-string">"user_name"</span>/&gt;
    &lt;result <span class="hljs-attr">property</span>=<span class="hljs-string">"email"</span> column=<span class="hljs-string">"email"</span>/&gt;
&lt;/resultMap&gt;
</code></pre>
<p><strong>å¤æ‚æ˜ å°„</strong>å¤„ç†å…³è”å¯¹è±¡ï¼Œé€šè¿‡<code>&lt;association&gt;</code>ï¼ˆä¸€å¯¹ä¸€ï¼‰å’Œ<code>&lt;collection&gt;</code>ï¼ˆä¸€å¯¹å¤šï¼‰æ ‡ç­¾æ„å»ºå¯¹è±¡å›¾ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;resultMap <span class="hljs-attr">id</span>=<span class="hljs-string">"BlogResult"</span> type=<span class="hljs-string">"Blog"</span>&gt;
    &lt;id <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> column=<span class="hljs-string">"blog_id"</span>/&gt;
    &lt;result <span class="hljs-attr">property</span>=<span class="hljs-string">"title"</span> column=<span class="hljs-string">"title"</span>/&gt;
    &lt;association <span class="hljs-attr">property</span>=<span class="hljs-string">"author"</span> javaType=<span class="hljs-string">"Author"</span>&gt;
        &lt;id <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> column=<span class="hljs-string">"author_id"</span>/&gt;
        &lt;result <span class="hljs-attr">property</span>=<span class="hljs-string">"name"</span> column=<span class="hljs-string">"author_name"</span>/&gt;
    &lt;/association&gt;
    &lt;collection <span class="hljs-attr">property</span>=<span class="hljs-string">"posts"</span> ofType=<span class="hljs-string">"Post"</span>&gt;
        &lt;id <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> column=<span class="hljs-string">"post_id"</span>/&gt;
        &lt;result <span class="hljs-attr">property</span>=<span class="hljs-string">"content"</span> column=<span class="hljs-string">"content"</span>/&gt;
    &lt;/collection&gt;
&lt;/resultMap&gt;
</code></pre>
<p>è¿™ç§æ˜¾å¼æ˜ å°„ç¡®ä¿äº†æ•°æ®è½¬æ¢çš„å¯é¢„æµ‹æ€§ï¼Œé¿å…äº†â€œé­”æ³•â€è¡Œä¸ºå¸¦æ¥çš„è°ƒè¯•å›°éš¾ã€‚</p>
<h3 data-id="heading-5">2.2 å‚æ•°æ˜ å°„ï¼šä»å¯¹è±¡åˆ°SQLå‚æ•°çš„ä¼ é€’</h3>
<p>MyBatisçš„å‚æ•°æ˜ å°„æœºåˆ¶å°†Javaæ–¹æ³•å‚æ•°è½¬æ¢ä¸ºSQLè¯­å¥ä¸­çš„å ä½ç¬¦å€¼ã€‚<strong>ç®€å•ç±»å‹å‚æ•°</strong>ç›´æ¥æ˜ å°„åˆ°é¢„ç¼–è¯‘è¯­å¥çš„å ä½ç¬¦ï¼Œè€Œ<strong>å¤æ‚å¯¹è±¡å‚æ•°</strong>åˆ™é€šè¿‡å±æ€§è·¯å¾„æ˜ å°„ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">insert</span> id<span class="hljs-operator">=</span>"insertUser" parameterType<span class="hljs-operator">=</span>"User"<span class="hljs-operator">&gt;</span>
    <span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> users (username, email, create_time)
    <span class="hljs-keyword">VALUES</span> (#{username}, #{email}, #{createTime})
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">insert</span><span class="hljs-operator">&gt;</span>
</code></pre>
<p><strong>å‚æ•°ç±»å‹å¤„ç†å™¨</strong>ï¼ˆTypeHandlerï¼‰æ˜¯å‚æ•°æ˜ å°„çš„æ‰©å±•ç‚¹ï¼Œè´Ÿè´£Javaç±»å‹ä¸JDBCç±»å‹ä¹‹é—´çš„è½¬æ¢ã€‚MyBatisæä¾›äº†å†…ç½®å¤„ç†å™¨ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰å®ç°ï¼Œç”¨äºå¤„ç†æšä¸¾ã€JSONç­‰å¤æ‚ç±»å‹ã€‚</p>
<h2 data-id="heading-6">3 åŠ¨æ€SQLï¼šçµæ´»æ€§ä¸å¤æ‚æ€§çš„å¹³è¡¡è‰ºæœ¯</h2>
<h3 data-id="heading-7">3.1 åŠ¨æ€SQLçš„é€‚ç”¨åœºæ™¯ä¸è¾¹ç•Œ</h3>
<p>åŠ¨æ€SQLæ˜¯MyBatisæœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œå®ƒå…è®¸æ ¹æ®è¿è¡Œæ—¶æ¡ä»¶åŠ¨æ€æ„å»ºSQLè¯­å¥ã€‚è¿™ç§èƒ½åŠ›ç‰¹åˆ«é€‚ç”¨äº<strong>å¤šæ¡ä»¶æŸ¥è¯¢</strong>ã€<strong>å¯å˜æ›´æ–°æ“ä½œ</strong>å’Œ<strong>æ‰¹é‡æ•°æ®å¤„ç†</strong>åœºæ™¯ã€‚</p>
<p>ç„¶è€Œï¼ŒåŠ¨æ€SQLçš„çµæ´»æ€§ä¹Ÿå¸¦æ¥äº†å¤æ‚æ€§ç®¡ç†çš„æŒ‘æˆ˜ã€‚å½“åŠ¨æ€é€»è¾‘è¿‡äºå¤æ‚æ—¶ï¼Œç”Ÿæˆçš„SQLå¯èƒ½éš¾ä»¥é¢„æµ‹å’Œç»´æŠ¤ã€‚å› æ­¤ï¼Œéœ€è¦æ˜ç¡®åŠ¨æ€SQLçš„<strong>é€‚ç”¨è¾¹ç•Œ</strong>ï¼šç®€å•æ¡ä»¶ç»„åˆä½¿ç”¨åŠ¨æ€SQLï¼Œå¤æ‚ä¸šåŠ¡é€»è¾‘åˆ™è€ƒè™‘åœ¨Javaå±‚æ„å»ºã€‚</p>
<h3 data-id="heading-8">3.2 åŠ¨æ€æ ‡ç­¾çš„åˆç†ä½¿ç”¨</h3>
<p>MyBatisæä¾›äº†ä¸€ç³»åˆ—åŠ¨æ€æ ‡ç­¾ï¼Œæ¯ç§æ ‡ç­¾éƒ½æœ‰å…¶ç‰¹å®šç”¨é€”å’Œä½¿ç”¨è¾¹ç•Œï¼š</p>
<p><code>&lt;if&gt;</code>æ ‡ç­¾ç”¨äºå¯é€‰æ¡ä»¶ï¼Œæ˜¯æœ€å¸¸ç”¨çš„åŠ¨æ€æ ‡ç­¾ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">&lt;select <span class="hljs-built_in">id</span>=<span class="hljs-string">"findUsers"</span> resultType=<span class="hljs-string">"User"</span>&gt;
    SELECT * FROM <span class="hljs-built_in">users</span>
    &lt;<span class="hljs-built_in">where</span>&gt;
        &lt;<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span>=<span class="hljs-string">"username != null and username != ''"</span>&gt;
            AND username = <span class="hljs-comment">#{username}</span>
        &lt;/if&gt;
        &lt;<span class="hljs-keyword">if</span> <span class="hljs-built_in">test</span>=<span class="hljs-string">"email != null"</span>&gt;
            AND email = <span class="hljs-comment">#{email}</span>
        &lt;/if&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p><code>&lt;choose&gt;</code>ã€<code>&lt;when&gt;</code>ã€<code>&lt;otherwise&gt;</code>å®ç°å¤šè·¯åˆ†æ”¯é€»è¾‘ï¼Œæ›¿ä»£å¤æ‚çš„if-elseé“¾ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">&lt;select <span class="hljs-built_in">id</span>=<span class="hljs-string">"findActiveUsers"</span> resultType=<span class="hljs-string">"User"</span>&gt;
    SELECT * FROM <span class="hljs-built_in">users</span>
    &lt;<span class="hljs-built_in">where</span>&gt;
        &lt;choose&gt;
            &lt;when <span class="hljs-built_in">test</span>=<span class="hljs-string">"active == true"</span>&gt;
                AND status = <span class="hljs-string">'ACTIVE'</span>
            &lt;/when&gt;
            &lt;when <span class="hljs-built_in">test</span>=<span class="hljs-string">"inactive == true"</span>&gt;
                AND status = <span class="hljs-string">'INACTIVE'</span>
            &lt;/when&gt;
            &lt;otherwise&gt;
                AND status IS NOT NULL
            &lt;/otherwise&gt;
        &lt;/choose&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<p><code>&lt;foreach&gt;</code>æ ‡ç­¾å¤„ç†é›†åˆéå†ï¼Œå¸¸ç”¨äºINæŸ¥è¯¢å’Œæ‰¹é‡æ“ä½œï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-operator">&lt;</span><span class="hljs-keyword">select</span> id<span class="hljs-operator">=</span>"findUsersByIds" resultType<span class="hljs-operator">=</span>"User"<span class="hljs-operator">&gt;</span>
    <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> users
    <span class="hljs-keyword">WHERE</span> id <span class="hljs-keyword">IN</span>
    <span class="hljs-operator">&lt;</span>foreach item<span class="hljs-operator">=</span>"id" collection<span class="hljs-operator">=</span>"ids" <span class="hljs-keyword">open</span><span class="hljs-operator">=</span>"(" separator<span class="hljs-operator">=</span>"," <span class="hljs-keyword">close</span><span class="hljs-operator">=</span>")"<span class="hljs-operator">&gt;</span>
        #{id}
    <span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span>foreach<span class="hljs-operator">&gt;</span>
<span class="hljs-operator">&lt;</span><span class="hljs-operator">/</span><span class="hljs-keyword">select</span><span class="hljs-operator">&gt;</span>
</code></pre>
<h3 data-id="heading-9">3.3 åŠ¨æ€SQLçš„å¯ç»´æŠ¤æ€§å®è·µ</h3>
<p>ä¿æŒåŠ¨æ€SQLå¯ç»´æŠ¤æ€§çš„å…³é”®å®è·µåŒ…æ‹¬ï¼š<strong>é€‚åº¦æŠ½è±¡</strong>ï¼Œå°†é‡å¤çš„SQLç‰‡æ®µæå–ä¸º<code>&lt;sql&gt;</code>æ ‡ç­¾ï¼›<strong>é€»è¾‘ç®€åŒ–</strong>ï¼Œé¿å…åµŒå¥—è¿‡æ·±çš„åŠ¨æ€é€»è¾‘ï¼›<strong>æ³¨é‡Šè¡¥å……</strong>ï¼Œä¸ºå¤æ‚åŠ¨æ€é€»è¾‘æ·»åŠ è§£é‡Šæ€§æ³¨é‡Šã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å¯ç»´æŠ¤çš„åŠ¨æ€SQLç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"userColumns"</span>&gt;</span>id, username, email, status<span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"searchUsers"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span>
    SELECT <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">"userColumns"</span>/&gt;</span>
    FROM users
    <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æŒ‰çŠ¶æ€è¿‡æ»¤ï¼šæ”¯æŒå¤šç§çŠ¶æ€æŸ¥è¯¢ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"statusList != null and statusList.size() &gt; 0"</span>&gt;</span>
            AND status IN
            <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"status"</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"statusList"</span> <span class="hljs-attr">open</span>=<span class="hljs-string">"("</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span> <span class="hljs-attr">close</span>=<span class="hljs-string">")"</span>&gt;</span>
                #{status}
            <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æŒ‰ç”¨æˆ·åæ¨¡ç³ŠæŸ¥è¯¢ --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"username != null and username != ''"</span>&gt;</span>
            AND username LIKE CONCAT(#{username}, '%')
        <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span>
    ORDER BY create_time DESC
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<h2 data-id="heading-10">4 ç¼“å­˜è®¾è®¡ï¼šæ€§èƒ½ä¸ä¸€è‡´æ€§çš„æƒè¡¡</h2>
<h3 data-id="heading-11">4.1 ä¸¤çº§ç¼“å­˜æœºåˆ¶çš„è®¾è®¡åŸç†</h3>
<p>MyBbatisé‡‡ç”¨<strong>ä¸¤çº§ç¼“å­˜</strong>ç»“æ„ï¼Œåœ¨æ•°æ®æ–°é²œåº¦å’Œæ€§èƒ½ä¹‹é—´æä¾›ä¸åŒçº§åˆ«çš„æƒè¡¡ã€‚</p>
<p><strong>ä¸€çº§ç¼“å­˜</strong>æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å¼€å¯ï¼Œç”Ÿå‘½å‘¨æœŸä¸æ•°æ®åº“ä¼šè¯ç»‘å®šã€‚å®ƒåœ¨åŒä¸€ä¼šè¯å†…é¿å…é‡å¤æŸ¥è¯¢ï¼Œä½†è·¨ä¼šè¯æ— æ³•å…±äº«æ•°æ®ã€‚<strong>äºŒçº§ç¼“å­˜</strong>æ˜¯Mapperçº§åˆ«çš„ç¼“å­˜ï¼Œé»˜è®¤å…³é—­ï¼Œéœ€è¦æ˜¾å¼é…ç½®ã€‚å¤šä¸ªSqlSessionå¯ä»¥å…±äº«äºŒçº§ç¼“å­˜ï¼Œæä¾›è·¨ä¼šè¯çš„æ•°æ®å¤ç”¨èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-12">4.2 ç¼“å­˜ç­–ç•¥ä¸ä¸€è‡´æ€§ä¿éšœ</h3>
<p>MyBatisçš„ç¼“å­˜æ›´æ–°ç­–ç•¥éµå¾ª<strong>å†™å¤±æ•ˆ</strong>æ¨¡å¼ï¼šä»»ä½•å¢åˆ æ”¹æ“ä½œéƒ½ä¼šæ¸…ç©ºå¯¹åº”Mapperçš„ç¼“å­˜ã€‚è¿™ç§ä¿å®ˆç­–ç•¥ä¿è¯äº†å¼ºä¸€è‡´æ€§ï¼Œä½†å¯èƒ½ç‰ºç‰²éƒ¨åˆ†æ€§èƒ½ã€‚</p>
<p>åˆç†çš„ç¼“å­˜é…ç½®éœ€è¦è€ƒè™‘æ•°æ®çš„<strong>è®¿é—®æ¨¡å¼</strong>å’Œ<strong>æ›´æ–°é¢‘ç‡</strong>ã€‚è¯»å¤šå†™å°‘çš„æ•°æ®é€‚åˆå¼€å¯äºŒçº§ç¼“å­˜ï¼Œé¢‘ç¹æ›´æ–°çš„æ•°æ®åˆ™åº”é¿å…ç¼“å­˜æˆ–è®¾ç½®è¾ƒçŸ­è¿‡æœŸæ—¶é—´ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- äºŒçº§ç¼“å­˜é…ç½®ç¤ºä¾‹ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">cache</span>
    <span class="hljs-attr">eviction</span>=<span class="hljs-string">"LRU"</span>
    <span class="hljs-attr">flushInterval</span>=<span class="hljs-string">"300000"</span>
    <span class="hljs-attr">size</span>=<span class="hljs-string">"1024"</span>
    <span class="hljs-attr">readOnly</span>=<span class="hljs-string">"true"</span>/&gt;</span>
</code></pre>
<h2 data-id="heading-13">5 å¯ç»´æŠ¤æ€§æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-14">5.1 é¡¹ç›®ç»“æ„ç»„ç»‡è§„èŒƒ</h3>
<p>å¯ç»´æŠ¤çš„MyBatisé¡¹ç›®éœ€è¦åˆç†çš„ä»£ç ç»„ç»‡æ–¹å¼ã€‚<strong>æŒ‰åŠŸèƒ½æ¨¡å—åˆ†åŒ…</strong>å°†Mapperæ¥å£ã€XMLæ˜ å°„æ–‡ä»¶ã€å®ä½“ç±»ç»„ç»‡åœ¨åŒä¸€æ¨¡å—å†…ï¼Œå‡å°‘è·¨æ¨¡å—ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">src/main/java
â””â”€â”€ com/example/
    â”œâ”€â”€ user/
    â”‚   â”œâ”€â”€ User.java          <span class="hljs-comment"># å®ä½“ç±»</span>
    â”‚   â”œâ”€â”€ UserMapper.java    <span class="hljs-comment"># Mapperæ¥å£</span>
    â”‚   â””â”€â”€ UserService.java   <span class="hljs-comment"># ä¸šåŠ¡æœåŠ¡ç±»</span>
    â””â”€â”€ product/
        â”œâ”€â”€ Product.java
        â”œâ”€â”€ ProductMapper.java
        â””â”€â”€ ProductService.java

src/main/resources
â””â”€â”€ com/example/
    â”œâ”€â”€ user/
    â”‚   â””â”€â”€ UserMapper.xml     <span class="hljs-comment"># æ˜ å°„æ–‡ä»¶ä¸æ¥å£åŒåŒ…</span>
    â””â”€â”€ product/
        â””â”€â”€ ProductMapper.xml
</code></pre>
<p><strong>å‘½åçº¦å®š</strong>ä¿æŒä¸€è‡´å‘½åé£æ ¼ï¼Œå¦‚<code>UserMapper</code>æ¥å£å¯¹åº”<code>UserMapper.xml</code>ï¼Œ<code>findByXxx</code>ç”¨äºæŸ¥è¯¢æ–¹æ³•ï¼Œ<code>updateXxx</code>ç”¨äºæ›´æ–°æ“ä½œã€‚</p>
<h3 data-id="heading-15">5.2 SQLæ˜ å°„çš„æ¨¡å—åŒ–ç®¡ç†</h3>
<p>å¤§å‹é¡¹ç›®ä¸­ï¼ŒSQLæ˜ å°„æ–‡ä»¶å¯èƒ½å˜å¾—åºå¤§å¤æ‚ã€‚<strong>SQLç‰‡æ®µå¤ç”¨</strong>é€šè¿‡<code>&lt;sql&gt;</code>æ ‡ç­¾æå–å…¬å…±SQLç‰‡æ®µï¼Œå‡å°‘é‡å¤ä»£ç ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å…¬å…±åˆ—å®šä¹‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">sql</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"baseColumns"</span>&gt;</span>id, create_time, update_time, version<span class="hljs-tag">&lt;/<span class="hljs-name">sql</span>&gt;</span>

<span class="hljs-comment">&lt;!-- åœ¨æŸ¥è¯¢ä¸­å¼•ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"selectDetail"</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">"DetailResult"</span>&gt;</span>
    SELECT 
        <span class="hljs-tag">&lt;<span class="hljs-name">include</span> <span class="hljs-attr">refid</span>=<span class="hljs-string">"baseColumns"</span>/&gt;</span>,
        other_columns
    FROM table
<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
</code></pre>
<p><strong>ç»“æœæ˜ å°„ç»§æ‰¿</strong>é€šè¿‡<code>&lt;resultMap&gt;</code>çš„<code>extends</code>å±æ€§å®ç°æ˜ å°„å¤ç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- åŸºç¡€æ˜ å°„ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"BaseResult"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"BaseEntity"</span> <span class="hljs-attr">autoMapping</span>=<span class="hljs-string">"true"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"id"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"createTime"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"create_time"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ‰©å±•æ˜ å°„ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"UserResult"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"User"</span> <span class="hljs-attr">extends</span>=<span class="hljs-string">"BaseResult"</span> <span class="hljs-attr">autoMapping</span>=<span class="hljs-string">"true"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"username"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span>
</code></pre>
<h2 data-id="heading-16">6 é›†æˆä¸æ‰©å±•æ¶æ„</h2>
<h3 data-id="heading-17">6.1 Springé›†æˆçš„æœ€ä½³å®è·µ</h3>
<p>MyBatisä¸Springçš„é›†æˆæä¾›äº†å£°æ˜å¼äº‹åŠ¡ç®¡ç†å’Œä¾èµ–æ³¨å…¥æ”¯æŒã€‚<strong>æ³¨è§£é…ç½®</strong>ç®€åŒ–äº†é›†æˆé…ç½®ï¼Œé€šè¿‡<code>@MapperScan</code>è‡ªåŠ¨æ³¨å†ŒMapperæ¥å£ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Configuration</span>
<span class="hljs-variable">@MapperScan</span>(<span class="hljs-string">"com.example.mapper"</span>)
public class MyBatisConfig {
    
    <span class="hljs-variable">@Bean</span>
    public SqlSessionFactory <span class="hljs-built_in">sqlSessionFactory</span>(DataSource dataSource) throws Exception {
        <span class="hljs-selector-tag">SqlSessionFactoryBean</span> <span class="hljs-selector-tag">sessionFactory</span> = <span class="hljs-selector-tag">new</span> <span class="hljs-selector-tag">SqlSessionFactoryBean</span>();
        <span class="hljs-selector-tag">sessionFactory</span><span class="hljs-selector-class">.setDataSource</span>(dataSource);
        <span class="hljs-selector-tag">sessionFactory</span><span class="hljs-selector-class">.setMapperLocations</span>(
            new <span class="hljs-built_in">PathMatchingResourcePatternResolver</span>()
                .<span class="hljs-built_in">getResources</span>(<span class="hljs-string">"classpath*:mapper/**/*.xml"</span>));
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">sessionFactory</span><span class="hljs-selector-class">.getObject</span>();
    }
}
</code></pre>
<p><strong>äº‹åŠ¡ç®¡ç†</strong>é€šè¿‡Springçš„<code>@Transactional</code>æ³¨è§£å®ç°å£°æ˜å¼äº‹åŠ¡ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€‚</p>
<h3 data-id="heading-18">6.2 è‡ªå®šä¹‰æ’ä»¶ä¸ç±»å‹å¤„ç†å™¨</h3>
<p>MyBatisçš„æ‰©å±•æœºåˆ¶å…è®¸å¼€å‘è€…å®šåˆ¶æ¡†æ¶è¡Œä¸ºã€‚<strong>æ’ä»¶</strong>ï¼ˆInterceptorï¼‰å¯ä»¥æ‹¦æˆªMyBatisçš„æ ¸å¿ƒç»„ä»¶æ‰§è¡Œè¿‡ç¨‹ï¼Œç”¨äºSQLæ—¥å¿—ã€åˆ†é¡µã€æƒé™æ§åˆ¶ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@Intercepts</span>({
    <span class="hljs-variable">@Signature</span>(type = Executor.class, method = <span class="hljs-string">"update"</span>, args = {MappedStatement.class, Object.class})
})
public class SqlLogPlugin implements Interceptor {
    <span class="hljs-variable">@Override</span>
    public Object <span class="hljs-built_in">intercept</span>(Invocation invocation) throws Throwable {
        <span class="hljs-comment">// å®ç°æ‹¦æˆªé€»è¾‘</span>
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">invocation</span><span class="hljs-selector-class">.proceed</span>();
    }
}
</code></pre>
<p><strong>ç±»å‹å¤„ç†å™¨</strong>ï¼ˆTypeHandlerï¼‰å®ç°è‡ªå®šä¹‰ç±»å‹è½¬æ¢ï¼Œå¦‚JSONç±»å‹ä¸æ•°æ®åº“å­—ç¬¦ä¸²çš„è½¬æ¢ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonTypeHandler</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;T&gt; {
    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">Class</span>&lt;T&gt; <span class="hljs-keyword">type</span>;
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">setNonNullParameter</span>(<span class="hljs-params">PreparedStatement ps, int i, T parameter, JdbcType jdbcType</span>) {
        ps.<span class="hljs-title function_">setString</span>(i, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">toJSONString</span>(parameter));
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> T <span class="hljs-title function_">getNullableResult</span>(<span class="hljs-params">ResultSet rs, <span class="hljs-built_in">String</span> columnName</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parseObject</span>(rs.<span class="hljs-title function_">getString</span>(columnName), <span class="hljs-keyword">type</span>);
    }
}
</code></pre>
<h2 data-id="heading-19">æ€»ç»“ï¼šMyBatisè®¾è®¡çš„å¹³è¡¡æ™ºæ…§</h2>
<p>MyBatisçš„è®¾è®¡è§‚ä½“ç°äº†å·¥ç¨‹é¢†åŸŸçš„å¹³è¡¡æ™ºæ…§ã€‚å®ƒåœ¨æ§åˆ¶ä¸ä¾¿åˆ©ã€çµæ´»ä¸ç¨³å®šã€ç®€å•ä¸åŠŸèƒ½ä¹‹é—´æ‰¾åˆ°äº†æ°å½“çš„å¹³è¡¡ç‚¹ã€‚è¿™ç§å¹³è¡¡ä¸æ˜¯å¦¥åï¼Œè€Œæ˜¯å¯¹ç°å®å¼€å‘éœ€æ±‚çš„æ·±åˆ»ç†è§£ã€‚</p>
<p><strong>ç²¾å‡†çš„å®šä½</strong>æ˜¯MyBatisæˆåŠŸçš„å…³é”®ã€‚å®ƒä¸è¯•å›¾è§£å†³æ‰€æœ‰æŒä¹…å±‚é—®é¢˜ï¼Œè€Œæ˜¯ä¸“æ³¨äºä¸ºéœ€è¦SQLæ§åˆ¶æƒçš„åœºæ™¯æä¾›æœ€ä½³è§£å†³æ–¹æ¡ˆã€‚<strong>é€‚åº¦çš„æŠ½è±¡</strong>è®©å¼€å‘è€…æ—¢äº«å—äº†ORMçš„ä¾¿åˆ©ï¼Œåˆä¿ç•™äº†ç›´æ¥æ“ä½œSQLçš„èƒ½åŠ›ã€‚</p>
<p>ä½œä¸ºä¸€æ¬¾å†ç»è€ƒéªŒçš„æŒä¹…å±‚æ¡†æ¶ï¼ŒMyBatisçš„è®¾è®¡æ€æƒ³å€¼å¾—æ¯ä¸ªåç«¯å¼€å‘è€…æ·±å…¥ç†è§£ã€‚åœ¨å¾®æœåŠ¡å’Œäº‘åŸç”Ÿæ—¶ä»£ï¼Œè¿™ç§å¯¹é€æ˜æ€§å’Œå¯æ§æ€§çš„é‡è§†æ˜¾å¾—æ›´åŠ çè´µï¼Œè¿™ä¹Ÿæ˜¯MyBatisåœ¨ç°ä»£åº”ç”¨æ¶æ„ä¸­ç»§ç»­ä¿æŒé‡è¦åœ°ä½çš„åŸå› ã€‚</p>
<p><strong>ğŸ“š ä¸‹ç¯‡é¢„å‘Š</strong>â€‹</p>
<p>ã€ŠMyBatisè¿›é˜¶æ²»ç†ç‚¹â€”â€”ç¼“å­˜ã€å‰¯ä½œç”¨ã€æ‹¦æˆªä¸æ‰¹å¤„ç†çš„å¾—å¤±åˆ†æã€‹â€”â€” æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ï¼š</p>
<ul>
<li>
<p>ğŸ¯ <strong>ç¼“å­˜æ·±åº¦æ²»ç†</strong>ï¼šåˆ†å¸ƒå¼ç¯å¢ƒä¸‹ç¼“å­˜ä¸€è‡´æ€§ä¿éšœä¸å¤±æ•ˆç­–ç•¥</p>
</li>
<li>
<p>âš ï¸ <strong>å‰¯ä½œç”¨æ§åˆ¶</strong>ï¼šå¹¶å‘åœºæ™¯ä¸‹çš„æ•°æ®ç«äº‰ä¸éš”ç¦»æœºåˆ¶</p>
</li>
<li>
<p>ğŸ”§ <strong>æ‹¦æˆªå™¨é«˜çº§åº”ç”¨</strong>ï¼šå…¨é“¾è·¯SQLç›‘æ§ä¸æ€§èƒ½è¯Šæ–­</p>
</li>
<li>
<p>ğŸ“Š <strong>æ‰¹å¤„ç†ä¼˜åŒ–</strong>ï¼šå¤§æ•°æ®é‡æ“ä½œçš„æ€§èƒ½ç“¶é¢ˆä¸è§£å†³æ–¹æ¡ˆ</p>
</li>
<li>
<p>ğŸ›¡ï¸ <strong>ç”Ÿäº§ç¯å¢ƒå®è·µ</strong>ï¼šMyBatisåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ç¨³å®šæ€§ä¿éšœ</p>
</li>
</ul>
<p>**ç‚¹å‡»å…³æ³¨ï¼ŒæŒæ¡MyBatisè¿›é˜¶æ²»ç†çš„æ ¸å¿ƒè¦é¢†ï¼**â€‹</p>
<blockquote>
<p><strong>ä»Šæ—¥è¡ŒåŠ¨å»ºè®®</strong>ï¼š</p>
<ol>
<li>
<p>å®¡æŸ¥ç°æœ‰é¡¹ç›®ä¸­åŠ¨æ€SQLçš„å¤æ‚åº¦ï¼Œç¡®ä¿ä¸è¶…è¿‡å¯ç»´æŠ¤è¾¹ç•Œ</p>
</li>
<li>
<p>æ£€æŸ¥ç¼“å­˜é…ç½®æ˜¯å¦ç¬¦åˆä¸šåŠ¡åœºæ™¯çš„æ•°æ®ä¸€è‡´æ€§è¦æ±‚</p>
</li>
<li>
<p>ç»Ÿä¸€é¡¹ç›®ä¸­çš„æ˜ å°„æ–‡ä»¶è§„èŒƒï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</p>
</li>
<li>
<p>é’ˆå¯¹å¤æ‚æŸ¥è¯¢åœºæ™¯ï¼Œåˆ¶å®šSQLæ€§èƒ½å®¡æ ¸æœºåˆ¶</p>
</li>
</ol>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Promise.resolve(x) ç­‰åŒ new Promise(resolve => resolve(x))?]]></title>    <link>https://juejin.cn/post/7578681104292069419</link>    <guid>https://juejin.cn/post/7578681104292069419</guid>    <pubDate>2025-12-01T10:05:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578681104292069419" data-draft-id="7578667193320996927" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Promise.resolve(x) ç­‰åŒ new Promise(resolve =&gt; resolve(x))?"/> <meta itemprop="keywords" content="å‰ç«¯,Promise"/> <meta itemprop="datePublished" content="2025-12-01T10:05:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¹‹æ’å›"/> <meta itemprop="url" content="https://juejin.cn/user/2261046026312318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Promise.resolve(x) ç­‰åŒ new Promise(resolve =&gt; resolve(x))?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2261046026312318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¹‹æ’å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:05:46.000Z" title="Mon Dec 01 2025 10:05:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>Promise.resolve(x)</code> ä¸ <code>return new Promise((resolve) =&gt; resolve(x))</code> åœ¨å¤šæ•°åœºæ™¯ä¸‹è¡Œä¸ºä¸€è‡´ï¼Œä½†ä¸èƒ½å®Œå…¨ç­‰åŒç†è§£ï¼Œéœ€ä»è§„èŒƒå®šä¹‰çš„ç»†èŠ‚å·®å¼‚åŒºåˆ†ï¼Œå…·ä½“åˆ†æå¦‚ä¸‹ï¼š</p>
<h3 data-id="heading-0">ä¸€ã€æ ¸å¿ƒè¡Œä¸ºçš„ä¸€è‡´æ€§ï¼ˆåŸºç¡€åœºæ™¯ï¼‰</h3>
<p>åœ¨å¤„ç†â€œéPromiseç±»å‹çš„xâ€æˆ–â€œéå½“å‰æ„é€ å‡½æ•°ç”Ÿæˆçš„Promiseå®ä¾‹xâ€æ—¶ï¼Œä¸¤è€…é€»è¾‘é«˜åº¦ä¸€è‡´ï¼Œå‡ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Promiseå®ä¾‹å¹¶ä»¥xä¸ºç»“æœå†³è®®ï¼š</p>
<ol>
<li>è‹¥xæ˜¯æ™®é€šå€¼ï¼ˆå¦‚æ•°å­—ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ç­‰éPromise/éthenableç±»å‹ï¼‰ï¼Œ<code>Promise.resolve(x)</code> ä¼šåˆ›å»ºæ–°Promiseå¹¶ç›´æ¥å†³è®®ä¸ºfulfilledçŠ¶æ€ï¼Œç»“æœä¸ºxï¼›<code>new Promise((resolve) =&gt; resolve(x))</code> ä¹Ÿä¼šé€šè¿‡è°ƒç”¨resolveå›è°ƒï¼Œè®©æ–°Promiseä»¥xä¸ºç»“æœfulfilledï¼Œè¿™ç¬¦åˆæ–‡æ¡£ä¸­<code>PromiseResolve</code>æŠ½è±¡æ“ä½œå¯¹æ™®é€šå€¼çš„å¤„ç†é€»è¾‘ã€‚</li>
<li>è‹¥xæ˜¯thenableå¯¹è±¡ï¼ˆå«thenæ–¹æ³•çš„éPromiseå¯¹è±¡ï¼‰ï¼Œä¸¤è€…éƒ½ä¼šè§¦å‘â€œthenableåŒåŒ–â€é€»è¾‘ï¼šè°ƒç”¨xçš„thenæ–¹æ³•ï¼Œç”¨å…¶ç»“æœå†³è®®æ–°Promiseï¼Œè¿™ä¸æ–‡æ¡£ä¸­<code>Promise Resolve Functions</code>å¤„ç†thenableçš„æ­¥éª¤ä¸€è‡´ã€‚</li>
</ol>
<h3 data-id="heading-1">äºŒã€å…³é”®å·®å¼‚ï¼ˆä¸èƒ½å®Œå…¨ç­‰åŒçš„åœºæ™¯ï¼‰</h3>
<p>æ ¹æ®æ–‡æ¡£è§„èŒƒï¼Œ<code>Promise.resolve(x)</code> å­˜åœ¨ç‰¹æ®Šä¼˜åŒ–é€»è¾‘ï¼Œè€Œ <code>new Promise(...)</code> æ— æ­¤å¤„ç†ï¼Œå¯¼è‡´ä¸¤è€…åœ¨ç‰¹å®šåœºæ™¯ä¸‹è¡Œä¸ºä¸åŒï¼š</p>
<ol>
<li><strong>xæ˜¯å½“å‰æ„é€ å‡½æ•°ç”Ÿæˆçš„Promiseå®ä¾‹æ—¶</strong></li>
</ol>
<blockquote>
<p><strong><code>Promise.resolve(x)</code></strong> è§„èŒƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fecma262%2Fmultipage%2Fcontrol-abstraction-objects.html%23sec-promise.resolve" target="_blank" title="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-promise.resolve" ref="nofollow noopener noreferrer">tc39.es/ecma262/mulâ€¦</a></p>
</blockquote>
<p>æ–‡æ¡£æ˜ç¡®è§„å®šï¼Œè‹¥xæ˜¯Promiseå®ä¾‹ä¸”å…¶æ„é€ å‡½æ•°ä¸å½“å‰<code>Promise.resolve</code>çš„thiså€¼ï¼ˆå³æ„é€ å‡½æ•°Cï¼‰ç›¸åŒï¼Œ<code>Promise.resolve(x)</code> ä¼šç›´æ¥è¿”å›xï¼Œè€Œéåˆ›å»ºæ–°Promiseã€‚<br/>
ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>));
<span class="hljs-comment">// Promise.resolve(p) ç›´æ¥è¿”å›pï¼Œä¸æ–°å»ºPromise</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(p) === p); <span class="hljs-comment">// true</span>
<span class="hljs-comment">// new Promise(...) å§‹ç»ˆæ–°å»ºPromiseï¼Œä¸pä¸æ˜¯åŒä¸€å®ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(p)) === p); <span class="hljs-comment">// false</span>
</code></pre>
<p>è¿™æ˜¯<code>Promise.resolve</code>çš„æ ¸å¿ƒä¼˜åŒ–ï¼Œç›®çš„æ˜¯é¿å…å¯¹å·²å­˜åœ¨çš„Promiseå®ä¾‹é‡å¤åŒ…è£…ï¼Œè€Œ<code>new Promise(...)</code>ä¼šå¼ºåˆ¶æ–°å»ºå®ä¾‹ï¼Œæ— æ³•å¤ç”¨åŸæœ‰Promiseã€‚</p>
<ol start="2">
<li><strong>æ„é€ å‡½æ•°ä¸ºPromiseå­ç±»æ—¶</strong></li>
</ol>
<blockquote>
<ul>
<li><strong><code>NewPromiseCapability</code></strong> è§„èŒƒæ–‡æ¡£ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Ftc39.es%2Fecma262%2Fmultipage%2Fcontrol-abstraction-objects.html%23sec-newpromisecapability" target="_blank" title="https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-newpromisecapability" ref="nofollow noopener noreferrer">tc39.es/ecma262/mulâ€¦</a></li>
</ul>
</blockquote>
<p>è‹¥<code>Promise.resolve</code>çš„thiså€¼æ˜¯Promiseå­ç±»ï¼ˆå¦‚<code>class MyPromise extends Promise {}</code>ï¼‰ï¼Œ<code>Promise.resolve(x)</code> ä¼šé€šè¿‡<code>NewPromiseCapability</code>åˆ›å»ºå­ç±»çš„Promiseå®ä¾‹ï¼ˆè‹¥xéå­ç±»å®ä¾‹ï¼‰ï¼›è€Œ<code>new Promise(...)</code>å§‹ç»ˆåˆ›å»ºåŸç”ŸPromiseå®ä¾‹ï¼Œæ— æ³•å…³è”å­ç±»æ„é€ å‡½æ•°ã€‚<br/>
ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPromise</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Promise</span> {}
<span class="hljs-comment">// MyPromise.resolve(x) åˆ›å»ºMyPromiseå®ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MyPromise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>) <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>); <span class="hljs-comment">// true</span>
<span class="hljs-comment">// new Promise(...) å§‹ç»ˆåˆ›å»ºåŸç”ŸPromiseå®ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>)) <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyPromise</span>); <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-2">ä¸‰ã€ç»“è®ºï¼šå¯è¿‘ä¼¼ç†è§£ï¼Œä½†éœ€æ³¨æ„è§„èŒƒå·®å¼‚</h3>
<ul>
<li><strong>æ—¥å¸¸å¼€å‘ç®€åŒ–ç†è§£</strong>ï¼šåœ¨ä¸æ¶‰åŠâ€œPromiseå®ä¾‹å¤ç”¨â€å’Œâ€œPromiseå­ç±»â€çš„åœºæ™¯ä¸‹ï¼Œå¯å°†<code>Promise.resolve(x)</code>è¿‘ä¼¼çœ‹ä½œ<code>return new Promise((resolve) =&gt; resolve(x))</code>ï¼Œä¸¤è€…æœ€ç»ˆéƒ½ä¼šç”Ÿæˆä»¥xä¸ºç»“æœçš„fulfilled Promiseï¼Œè¡Œä¸ºæ— æ˜æ˜¾å·®å¼‚ã€‚</li>
<li><strong>ä¸¥æ ¼è§„èŒƒè§’åº¦</strong>ï¼šä¸¤è€…ä¸èƒ½å®Œå…¨ç­‰åŒã€‚<code>Promise.resolve(x)</code> æ˜¯ECMAScriptè§„èŒƒå®šä¹‰çš„é™æ€æ–¹æ³•ï¼ŒåŒ…å«â€œå¤ç”¨åŒæ„é€ å‡½æ•°Promiseå®ä¾‹â€â€œé€‚é…å­ç±»æ„é€ å‡½æ•°â€ç­‰ä¼˜åŒ–é€»è¾‘ï¼Œè€Œ<code>new Promise(...)</code>æ˜¯åŸºç¡€çš„Promiseåˆ›å»ºæ–¹å¼ï¼Œä»…è´Ÿè´£æ–°å»ºå®ä¾‹å¹¶æ‰§è¡Œexecutorå›è°ƒï¼Œæ— ç‰¹æ®Šä¼˜åŒ–ã€‚</li>
</ul>
<p><strong>ç®€è¨€ä¹‹</strong>ï¼Œ<code>new Promise((resolve) =&gt; resolve(x))</code> æ˜¯<code>Promise.resolve(x)</code>çš„â€œåŸºç¡€å®ç°é€»è¾‘â€ï¼Œä½†<code>Promise.resolve(x)</code>åœ¨è§„èŒƒå±‚é¢è¡¥å……äº†æ›´æ™ºèƒ½çš„ <strong>å®ä¾‹å¤ç”¨</strong> å’Œ <strong>å­ç±»é€‚é…</strong> é€»è¾‘ï¼ŒåŠŸèƒ½æ›´å®Œå–„ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaScript åŸå‹é“¾ï¼šç†è§£å¯¹è±¡ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶]]></title>    <link>https://juejin.cn/post/7578460753211064347</link>    <guid>https://juejin.cn/post/7578460753211064347</guid>    <pubDate>2025-12-01T10:07:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753211064347" data-draft-id="7578709098255269926" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaScript åŸå‹é“¾ï¼šç†è§£å¯¹è±¡ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶"/> <meta itemprop="keywords" content="JavaScript,Promise"/> <meta itemprop="datePublished" content="2025-12-01T10:07:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Tzarevich"/> <meta itemprop="url" content="https://juejin.cn/user/578786070367529"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaScript åŸå‹é“¾ï¼šç†è§£å¯¹è±¡ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/578786070367529/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Tzarevich
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:07:53.000Z" title="Mon Dec 01 2025 10:07:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atelier-cave-light">.hljs-comment,.hljs-quote{color:#655f6d}.hljs-attribute,.hljs-link,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#be4678}.hljs-built_in,.hljs-builtin-name,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa573c}.hljs-bullet,.hljs-string,.hljs-symbol{color:#2a9292}.hljs-section,.hljs-title{color:#576ddb}.hljs-keyword,.hljs-selector-tag{color:#955ae7}.hljs-addition,.hljs-deletion{color:#19171c;display:inline-block;width:100%}.hljs-deletion{background-color:#be4678}.hljs-addition{background-color:#2a9292}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#efecf4;color:#585260}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">JavaScript åŸå‹é“¾ï¼šç†è§£å¯¹è±¡ç»§æ‰¿çš„æ ¸å¿ƒæœºåˆ¶</h2>
<p>åœ¨ JavaScript ä¸­ï¼Œ<strong>åŸå‹é“¾ï¼ˆPrototype Chainï¼‰</strong> æ˜¯å®ç°å¯¹è±¡ç»§æ‰¿å’Œå±æ€§æŸ¥æ‰¾çš„æ ¸å¿ƒæœºåˆ¶ã€‚ä¸ä¼ ç»Ÿé¢å‘å¯¹è±¡è¯­è¨€ï¼ˆå¦‚ Javaã€C++ï¼‰åŸºäºâ€œç±»â€çš„ç»§æ‰¿ä¸åŒï¼ŒJavaScript é‡‡ç”¨çš„æ˜¯ <strong>åŸºäºåŸå‹çš„ç»§æ‰¿æ¨¡å‹</strong>ã€‚æœ¬æ–‡å°†ç»“åˆ <code>Promise</code> å®ä¾‹å’Œæ™®é€šæ„é€ å‡½æ•°ç¤ºä¾‹ï¼Œæ·±å…¥æµ…å‡ºåœ°è§£æåŸå‹é“¾çš„å·¥ä½œåŸç†ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€ä»€ä¹ˆæ˜¯åŸå‹é“¾ï¼Ÿ</h3>
<p>æ¯ä¸ª JavaScript å¯¹è±¡ï¼ˆé™¤ <code>null</code> å¤–ï¼‰å†…éƒ¨éƒ½æœ‰ä¸€ä¸ªéšè—å±æ€§ <code>[[Prototype]]</code>ï¼ˆå¯é€šè¿‡ <code>__proto__</code> è®¿é—®ï¼‰ï¼Œå®ƒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡â€”â€”è¿™ä¸ªå¯¹è±¡å°±æ˜¯è¯¥å¯¹è±¡çš„â€œåŸå‹â€ã€‚å½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœè¯¥å¯¹è±¡è‡ªèº«æ²¡æœ‰è¿™ä¸ªå±æ€§ï¼ŒJavaScript å¼•æ“ä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°è¯¥å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾çš„æœ«ç«¯ï¼ˆå³ <code>null</code>ï¼‰ã€‚</p>
<blockquote>
<p><strong>å…³é”®ç‚¹</strong>ï¼šJavaScript çš„ç»§æ‰¿ä¸æ˜¯é â€œè¡€ç¼˜â€ï¼Œè€Œæ˜¯é â€œé“¾æ¡â€â€”â€”åŸå‹é“¾ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-2">äºŒã€æ„é€ å‡½æ•°ã€åŸå‹å¯¹è±¡ä¸å®ä¾‹çš„å…³ç³»</h3>
<p>ä»¥è‡ªå®šä¹‰æ„é€ å‡½æ•°ä¸ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">function Person(name, age) {
  <span class="hljs-attr">this.name</span> = name<span class="hljs-comment">;</span>
  <span class="hljs-attr">this.age</span> = age<span class="hljs-comment">;</span>
}

<span class="hljs-attr">Person.prototype.species</span> = <span class="hljs-string">'äºº'</span><span class="hljs-comment">;</span>

let <span class="hljs-attr">zeng</span> = new Person(<span class="hljs-string">'jw'</span>, <span class="hljs-number">18</span>)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li><code>Person</code> æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ã€‚</li>
<li><code>Person.prototype</code> æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œæ‰€æœ‰é€šè¿‡ <code>new Person()</code> åˆ›å»ºçš„å®ä¾‹éƒ½ä¼šä»¥å®ƒä¸ºåŸå‹ã€‚</li>
<li><code>zeng.__proto__ === Person.prototype</code> â†’ <strong>æˆç«‹</strong></li>
<li><code>Person.prototype.constructor === Person</code> â†’ <strong>æˆç«‹</strong></li>
</ul>
<p>è¿™ç§ç»“æ„å½¢æˆäº†ç»å…¸çš„â€œä¸‰è§’å…³ç³»â€ï¼š</p>
<ul>
<li>å®ä¾‹ï¼ˆ<code>zeng</code>ï¼‰é€šè¿‡ <code>__proto__</code> æŒ‡å‘åŸå‹å¯¹è±¡ï¼ˆ<code>Person.prototype</code>ï¼‰</li>
<li>åŸå‹å¯¹è±¡é€šè¿‡ <code>constructor</code> æŒ‡å›æ„é€ å‡½æ•°ï¼ˆ<code>Person</code>ï¼‰</li>
</ul>
<blockquote>
<p>ğŸš‚ æ¯”å–»ï¼šå¯ä»¥æŠŠ <code>constructor</code> çœ‹ä½œç«è½¦å¤´ï¼Œ<code>prototype</code> æ˜¯è½¦èº«ï¼Œè€Œæ¯ä¸ªå®ä¾‹æ˜¯æŒ‚åœ¨è½¦èº«åçš„è½¦å¢ã€‚å®ƒä»¬é€šè¿‡â€œæŒ‚é’©â€ï¼ˆ<code>__proto__</code>ï¼‰è¿æ¥åœ¨ä¸€èµ·ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€åŠ¨æ€ä¿®æ”¹åŸå‹ï¼šæ‰“ç ´å¸¸è§„</h3>
<p>JavaScript çš„åŸå‹æ˜¯<strong>å¯å˜çš„</strong>ã€‚æˆ‘ä»¬å¯ä»¥éšæ—¶ä¿®æ”¹å¯¹è±¡çš„ <code>__proto__</code>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">kong</span> = {
  name: 'kong',
  hobbies: <span class="hljs-section">['ç¯®çƒ', 'è¶³çƒ']</span>,
}<span class="hljs-comment">;</span>

<span class="hljs-attr">zeng.__proto__</span> = kong<span class="hljs-comment">;</span>
console.log(zeng.hobbies)<span class="hljs-comment">; // ['ç¯®çƒ', 'è¶³çƒ']</span>
console.log(zeng.species)<span class="hljs-comment">; // undefined</span>
</code></pre>
<p>æ­¤æ—¶ï¼š</p>
<ul>
<li><code>zeng</code> ä¸å†ä» <code>Person.prototype</code> ç»§æ‰¿å±æ€§ï¼›</li>
<li>è€Œæ˜¯ä» <code>kong</code> å¯¹è±¡ç»§æ‰¿ï¼›</li>
<li>å› æ­¤ <code>species</code> æ‰¾ä¸åˆ°äº†ï¼Œä½† <code>hobbies</code> å¯ä»¥è®¿é—®ã€‚</li>
</ul>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè™½ç„¶æŠ€æœ¯ä¸Šå¯è¡Œï¼Œä½†<strong>ä¸æ¨èéšæ„ä¿®æ”¹ <code>__proto__</code></strong> ï¼Œå› ä¸ºå®ƒä¼šç ´åæ€§èƒ½ä¼˜åŒ–ï¼Œå¹¶å¯èƒ½å¯¼è‡´ä»£ç éš¾ä»¥ç»´æŠ¤ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">å››ã€å†…ç½®å¯¹è±¡ä¹Ÿéµå¾ªåŸå‹é“¾ï¼šä»¥ Promise ä¸ºä¾‹</h3>
<p>ES6 å¼•å…¥çš„ <code>Promise</code> åŒæ ·éµå¾ªåŸå‹é“¾è§„åˆ™ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> p = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">reject</span>(<span class="hljs-string">'å¤±è´¥1'</span>), <span class="hljs-number">3000</span>);
});
</code></pre>
<ul>
<li><code>p</code> æ˜¯ä¸€ä¸ª <code>Promise</code> å®ä¾‹ï¼›</li>
<li><code>p.__proto__ === Promise.prototype</code> â†’ <strong>true</strong></li>
<li><code>Promise.prototype</code> ä¸Šå®šä¹‰äº† <code>.then()</code>, <code>.catch()</code>, <code>.finally()</code> ç­‰æ–¹æ³•ï¼›</li>
<li>æ‰€ä»¥ <code>p.then(...)</code> å®é™…ä¸Šè°ƒç”¨çš„æ˜¯ <code>Promise.prototype.then</code></li>
</ul>
<p>æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li><code>new Promise(...)</code> ç«‹å³æ‰§è¡Œ executor å‡½æ•°ï¼ˆåŒæ­¥ï¼‰â†’ è¾“å‡º <code>'111'</code></li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œ â†’ è¾“å‡º <code>'222'</code> å’Œ <code>p</code> çš„åˆå§‹çŠ¶æ€ï¼ˆpendingï¼‰</li>
<li>3 ç§’åï¼Œ<code>reject('å¤±è´¥1')</code> è§¦å‘çŠ¶æ€å˜ä¸º <code>rejected</code></li>
<li>å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­å®‰æ’ <code>.catch()</code> å›è°ƒ â†’ è¾“å‡º <code>'å¤±è´¥1'</code></li>
<li><code>.finally()</code> æ€»æ˜¯æ‰§è¡Œ â†’ è¾“å‡º <code>'finally'</code></li>
</ol>
<p>è¿™å†æ¬¡å°è¯ï¼š<strong>æ‰€æœ‰å¯¹è±¡çš„è¡Œä¸ºéƒ½ä¾èµ–äºå…¶åŸå‹é“¾ä¸Šçš„æ–¹æ³•</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-5">äº”ã€åŸå‹é“¾çš„æœ¬è´¨ï¼šå±æ€§æŸ¥æ‰¾æœºåˆ¶</h3>
<p>å½“ä½ å†™ <code>obj.method()</code> æ—¶ï¼ŒJavaScript å¼•æ“ä¼šï¼š</p>
<ol>
<li>åœ¨ <code>obj</code> è‡ªèº«æŸ¥æ‰¾ <code>method</code></li>
<li>è‹¥æ— ï¼Œåˆ™æŸ¥æ‰¾ <code>obj.__proto__</code></li>
<li>è‹¥ä»æ— ï¼Œç»§ç»­æŸ¥æ‰¾ <code>obj.__proto__.__proto__</code></li>
<li>â€¦â€¦ç›´åˆ° <code>Object.prototype</code>ï¼ˆæœ€é¡¶å±‚ï¼‰</li>
<li>è‹¥æœ€ç»ˆæ‰¾ä¸åˆ°ï¼Œè¿”å› <code>undefined</code></li>
</ol>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">zeng<span class="hljs-selector-class">.toString</span>(); <span class="hljs-comment">// è™½ç„¶ zeng è‡ªèº«æ²¡æœ‰ toStringï¼Œä½† Object.prototype æœ‰</span>
</code></pre>
<p>å› ä¸ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">zeng 
â†’ <span class="hljs-attr">__proto__</span> = kong 
â†’ <span class="hljs-attr">__proto__</span> = Object.prototype 
â†’ has toString()
</code></pre>
<hr/>
<h3 data-id="heading-6">å…­ã€æ€»ç»“</h3>

























<table><thead><tr><th>æ¦‚å¿µ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>__proto__</code></td><td>å®ä¾‹æŒ‡å‘å…¶åŸå‹çš„é“¾æ¥ï¼ˆéæ ‡å‡†ä½†å¹¿æ³›æ”¯æŒï¼‰</td></tr><tr><td><code>prototype</code></td><td>æ„é€ å‡½æ•°çš„å±æ€§ï¼Œç”¨äºè¢«å®ä¾‹çš„ <code>__proto__</code> å¼•ç”¨</td></tr><tr><td><code>constructor</code></td><td>åŸå‹å¯¹è±¡ä¸Šçš„å±æ€§ï¼ŒæŒ‡å›æ„é€ å‡½æ•°</td></tr><tr><td>åŸå‹é“¾</td><td>å±æ€§/æ–¹æ³•æŸ¥æ‰¾çš„è·¯å¾„ï¼Œä»å®ä¾‹ â†’ åŸå‹ â†’ åŸå‹çš„åŸå‹ â†’ â€¦ â†’ <code>null</code></td></tr></tbody></table>
<p>JavaScript çš„é¢å‘å¯¹è±¡ä¸æ˜¯é â€œç±»ç»§æ‰¿â€ï¼Œè€Œæ˜¯é â€œå¯¹è±¡å§”æ‰˜â€â€”â€”<strong>ä½ æ²¡æœ‰çš„ï¼Œæˆ‘å¸®ä½ é—®æˆ‘çš„åŸå‹è¦</strong>ã€‚è¿™ç§çµæ´»è€Œå¼ºå¤§çš„æœºåˆ¶ï¼Œæ­£æ˜¯ JavaScript åŠ¨æ€ç‰¹æ€§çš„åŸºçŸ³ã€‚</p>
<blockquote>
<p>âœ… ç‰¢è®°ï¼š<strong>ä¸€åˆ‡çš†å¯¹è±¡ï¼Œä¸‡ç‰©çš†å¯é“¾</strong>ã€‚ç†è§£åŸå‹é“¾ï¼Œå°±æŒæ¡äº† JavaScript é¢å‘å¯¹è±¡çš„çµé­‚ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GeoJSON ä»‹ç»ï¼šWeb åœ°å›¾æ•°æ®çš„é€šç”¨è¯­è¨€]]></title>    <link>https://juejin.cn/post/7578714759336640512</link>    <guid>https://juejin.cn/post/7578714759336640512</guid>    <pubDate>2025-12-01T10:12:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714759336640512" data-draft-id="7578820431017689103" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GeoJSON ä»‹ç»ï¼šWeb åœ°å›¾æ•°æ®çš„é€šç”¨è¯­è¨€"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,JSON"/> <meta itemprop="datePublished" content="2025-12-01T10:12:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸œä¸œ233"/> <meta itemprop="url" content="https://juejin.cn/user/3139860940201453"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GeoJSON ä»‹ç»ï¼šWeb åœ°å›¾æ•°æ®çš„é€šç”¨è¯­è¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3139860940201453/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸œä¸œ233
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:12:32.000Z" title="Mon Dec 01 2025 10:12:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">GeoJSON ä»‹ç»ï¼šWeb åœ°å›¾æ•°æ®çš„é€šç”¨è¯­è¨€</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>GeoJSON æ˜¯ä¸€å¥—åŸºäº JSON æ ¼å¼çš„åœ°ç†ç©ºé—´æ•°æ®ç¼–ç æ ‡å‡†ï¼Œå…·æœ‰è½»é‡ã€æ˜“è¯»ã€æ˜“äºåœ¨ Web åº”ç”¨ä¸­è§£æå’Œä¼ è¾“ç­‰ä¼˜åŠ¿ï¼Œå®ƒæ˜¯ Web åœ°å›¾åº“ï¼ˆå¦‚ Leaflet, Mapbox, OpenLayersï¼‰äº‹å®ä¸Šçš„æ ‡å‡†æ•°æ®æ ¼å¼ï¼Œæˆ‘æœ€è¿‘åœ¨çœ‹ OpenLayersï¼Œåœ¨åŠ è½½å¤–éƒ¨æ•°æ®çš„æ—¶å€™éƒ½æ˜¯ç”¨ GeoJSONï¼Œäºæ˜¯ä¾¿äº†è§£äº†ä¸€ä¸‹ï¼Œè¿™é‡Œæ˜¯æœ€æ–°è§„èŒƒçš„è‹±æ–‡æ–‡æ¡£ã€è‹±è¯­å¥½çš„å¯ä»¥ç›´æ¥è·³è½¬<a href="https://link.juejin.cn?target=https%3A%2F%2Fdatatracker.ietf.org%2Fdoc%2Fhtml%2Frfc7946" target="_blank" title="https://datatracker.ietf.org/doc/html/rfc7946" ref="nofollow noopener noreferrer">è¿™é‡Œ</a></p>
<h3 data-id="heading-2">GeoJSON åŸºæœ¬æ„æˆ</h3>
<p>GeoJSON æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ JSON å¯¹è±¡ï¼Œæ‰€æœ‰ GeoJSON å¯¹è±¡å¿…é¡»æœ‰ä¸€ä¸ª "type" æˆå‘˜ï¼Œ"type"è¡¨ç¤ºå½“å‰ JSON æè¿°çš„ç±»å‹ï¼Œè¿™é‡Œåˆ†ä¸ºåŸºæœ¬å‡ ä½•ç±»å‹å’Œç‰¹å¾ç±»å‹ã€‚</p>
<p>åŸºæœ¬å‡ ä½•ç±»å‹å¿«é€Ÿç†è§£å°±æ˜¯æè¿°åœ°å›¾ä¸Šå½¢çŠ¶çš„ç±»å‹ï¼Œâ€œtypeâ€ å–å€¼åŒ…æ‹¬ ç‚¹ ï¼ˆPointï¼‰ã€çº¿ï¼ˆLineStringï¼‰ã€åŒºåŸŸï¼ˆPolygonï¼‰ä»¥åŠä»–ä»¬çš„å¤šé‡ç±»å‹ MultiPoint, MultiLineString, MultiPolygonï¼Œå…¶â€œcoordinatesâ€ å±æ€§ç”¨æ¥æ ‡æ³¨åœ°ç†åæ ‡ä½ç½®ï¼ˆç»çº¬åº¦åŸºäº WGS84 åæ ‡ç³»ï¼‰</p>
<p>ç‰¹å¾ç±»å‹å³å¸¦æœ‰å±æ€§ï¼ˆpropertiesï¼‰çš„ç±»å‹ï¼Œâ€œtypeâ€ å–å€¼åŒ…æ‹¬ Feature å’Œ FeatureCollection</p>
<h3 data-id="heading-3">åŸºæœ¬å‡ ä½•ç±»å‹</h3>
<h4 data-id="heading-4">Pointï¼ˆç‚¹ï¼‰</h4>
<p>è¡¨ç¤ºåœ°å›¾ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œç»“æ„å¦‚ä¸‹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">106.56</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.57</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-5">LineString (çº¿)</h4>
<p>è¡¨ç¤ºåœ°å›¾ä¸Šçš„ä¸€æ¡çº¿ï¼Œå¯ä»¥ç†è§£ä¸ºæœ‰å¤šä¸ªç‚¹è¿æ¥ç»„æˆï¼Œâ€œcoordinatesâ€ ä¸ºä¸€ä¸ªäºŒç»´æ•°ç»„</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LineString"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.51398305678325</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.523171668355733</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.51453664249686</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.523092142346467</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.51566579820047</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.522995404990354</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-6">Polygon (å¤šè¾¹å½¢)</h4>
<p>è¡¨ç¤ºåœ°å›¾ä¸Šçš„ä¸€ä¸ªå¤šè¾¹å½¢ï¼Œâ€œcoordinatesâ€ ç”±å¤šä¸ªç¯ç»„æˆã€ç¯å³ç”±å¤šä¸ªç‚¹ç»„æˆçš„é—­åˆçš„è·¯å¾„ã€æœ€åä¸€ä¸ªç‚¹è¡¨ç¤ºé—­åˆç‚¹ï¼Œæ³¨æ„è¿™é‡Œå¯èƒ½åŒ…å«å¤šä¸ªç¯å½¢å…ƒç´ ï¼Œç¬¬ä¸€ä¸ªç¯è¡¨ç¤ºå¤–éƒ¨ç¯ã€å…¶ä½™è¡¨ç¤ºå†…éƒ¨ç¯ï¼Œæ¯”å¦‚ç©ºå¿ƒåœ†å°±ç”±ä¸€ä¸ªå†…éƒ¨ç¯å’Œä¸€ä¸ªå¤–éƒ¨ç¯ç»„æˆã€å¤–éƒ¨ç¯é€šå¸¸ç”±é€†æ—¶é’ˆé¡ºåºå®šä¹‰ï¼Œå†…éƒ¨çš„æ´åº”ä»¥é¡ºæ—¶é’ˆæ–¹å‘å®šä¹‰ã€‚</p>
<p>ä¸€ä¸ªåŒ…å«ç¯çš„å¤šè¾¹å½¢ç¤ºä¾‹å¦‚ä¸‹</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Polygon"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span> 
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.53</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.57</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.57</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.57</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.57</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.53</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.53</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.53</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.53</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.57</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æŠŠç¬¬äºŒæ®µJSONåˆ æ‰å°±æ˜¯æ²¡æœ‰ç¯çš„çŸ©å½¢</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Polygon"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span> 
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-7">MultiPointï¼ˆå¤šç‚¹ï¼‰</h4>
<p>è¡¨ç¤ºä¸€ç»„ä¸ç›¸è¿çš„ç‚¹ã€Pointçš„å¤æ•°å½¢å¼ã€å¤šä¸ªç‚¹ç»„æˆçš„äºŒç»´æ•°ç»„</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MultiPoint"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-8">MultiLineString (å¤šçº¿ä¸²)</h4>
<p>è¡¨ç¤ºä¸€ç»„ä¸ç›¸è¿çš„çº¿ä¸²ï¼ŒLineStringçš„å¤æ•°å½¢å¼ï¼Œå¤šæ¡çº¿ç»„æˆçš„ä¸‰å±‚æ•°ç»„</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MultiLineString"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51398305678325</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.523171668355733</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51453664249686</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.523092142346467</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51566579820047</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.522995404990354</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51398305678325</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.533171668355733</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51453664249686</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.533092142346467</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.51566579820047</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.532995404990354</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-9">MultiPolygon (å¤šå¤šè¾¹å½¢):</h4>
<p>è¡¨ç¤ºä¸€ç»„ä¸ç›¸è¿çš„å¤šè¾¹å½¢ã€åæ ‡æ˜¯å››å±‚æ•°ç»„ï¼Œæ¯ç»„åæ ‡ä»£è¡¨ä¸€ä¸ªç‹¬ç«‹çš„ Polygonï¼ˆæ¯ä¸ª Polygon å†…éƒ¨ä»å¯åŒ…å«æ´ï¼‰ã€‚</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MultiPolygon"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.65</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.65</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.65</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.70</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.60</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.70</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.65</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.65</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.65</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-10">GeometryCollection (å‡ ä½•é›†åˆ)</h4>
<p>ç”¨äºå°†ä¸åŒç±»å‹ï¼ˆPoint, LineString, Polygon, Multi*ï¼‰çš„å‡ ä½•å›¾å½¢å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ï¼Œ åŒ…å«ä¸€ä¸ª "geometries" æˆå‘˜ï¼Œå…¶å€¼æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå®Œæ•´çš„ GeoJSON å‡ ä½•å¯¹è±¡</p>
<p>ä¸€ä¸ªåŒ…å« Point, LineString, Polygon çš„ å¯¹è±¡</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"GeometryCollection"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"geometries"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">106.52</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.53</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LineString"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.53</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
        <span class="hljs-punctuation">[</span><span class="hljs-number">106.53</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Polygon"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.55</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-11">ç‰¹å¾ç±»å‹</h3>
<p>è¿™ä¸ªå¯ä»¥è¯´æ˜¯GeoJSON çš„çµé­‚ï¼Œå®ƒå°†å‡ ä½•å½¢çŠ¶ä¸å±æ€§æ•°æ®å…³è”èµ·æ¥ï¼Œä½¿å¾—å›¾å½¢æœ‰äº†æ„ä¹‰ï¼ŒåŒ…æ‹¬ä¸¤ä¸ªç±»å‹ï¼šâ€œFeatureâ€ å’Œ â€œFeatureCollectionâ€</p>
<h4 data-id="heading-12">Feature</h4>
<p>åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>"type": "Feature"</li>
<li>"geometry"ï¼šåŒ…å«ä¸€ä¸ªå‡ ä½•å¯¹è±¡ï¼ˆPoint, Polygon, etc.ï¼‰ã€‚</li>
<li>"properties"ï¼šåŒ…å«ä»»ä½•éåœ°ç†å±æ€§æ•°æ®ï¼ˆä¾‹å¦‚ï¼šåç§°ã€äººå£ã€å¹´ä»½ã€é¢œè‰²ç­‰ï¼‰ã€‚</li>
</ul>
<p>ä¸‹é¢ä¸ºä¸€ä¸ªLineStringã€å±æ€§æè¿°å…¶ä¸ºä¸€æ¡é«˜é€Ÿå…¬è·¯</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LineString"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.52</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.54</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">[</span><span class="hljs-number">106.65</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.56</span><span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"G5001"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é‡åº†ç»•åŸé«˜é€Ÿï¼ˆéƒ¨åˆ†ï¼‰"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"speed"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">100</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"length"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">15.5</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-13">FeatureCollection</h4>
<p>FeatureCollection è¡¨ç¤ºFeatureçš„é›†åˆï¼Œå‡ ä¹ç½‘ä¸Šä¸‹è½½çš„GeoJSONæ–‡ä»¶éƒ½æ˜¯ FeatureCollection ç»“æ„çš„ åŸºæœ¬ç»“æ„ï¼š</p>
<ul>
<li>"type": "FeatureCollection"</li>
<li>"features"ï¼šä¸€ä¸ªåŒ…å«é›¶ä¸ªæˆ–å¤šä¸ª Feature å¯¹è±¡çš„æ•°ç»„ã€‚</li>
</ul>
<p>ä¸€ä¸ªè¡¨ç¤ºçº¿è·¯å’ŒæœåŠ¡åŒºçš„ GeoJSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FeatureCollection"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"features"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LineString"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.40</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.50</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.45</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.52</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.50</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.54</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.55</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.56</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span><span class="hljs-number">106.60</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.58</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"H-1234"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"åŸå¸‚å¿«é€Ÿé€šé“Aæ®µ"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-number">106.45</span><span class="hljs-punctuation">,</span> <span class="hljs-number">29.52</span><span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"SA-001"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"é¾™æºªæœåŠ¡åŒº"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-14">OpenLayers ä¸­ä½¿ç”¨</h3>
<p>åœ¨OpenLayersä¸­å†™äº†ä¸¤ä¸ªDemoå·©å›ºã€ä¸€ä¸ªç”¨äºç»˜åˆ¶çº¿è·¯åå¯¼å‡ºGeoJSONæ–‡ä»¶ï¼Œå¦ä¸€ä¸ªåŠ è½½å¯¼å‡ºçš„æ–‡ä»¶æ ¹æ®æ¸²æŸ“çº¿è·¯å’ŒæœåŠ¡åŒº</p>
<h4 data-id="heading-15">ç»˜åˆ¶çº¿è·¯ä»¥åŠç«™ç‚¹</h4>
<p>æ¶‰åŠä¸»è¦åŠŸèƒ½ç‚¹ï¼š</p>
<ul>
<li>ç»˜åˆ¶çº¿è·¯ï¼Œå¹¶ä¸ºé¦™ç‚‰åŠ ä¸Šçº¿è·¯è¡¨ç¤ºä»¥åŠåå­—</li>
<li>ç»˜åˆ¶ç«™ç‚¹ï¼Œå¹¶ä¸ºç«™ç‚¹åŠ ä¸Šç«™ç‚¹æ ‡è¯†ä»¥åŠåå­—</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> layer <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/layer'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> source <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/source'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Map</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ol'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">View</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/View.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">OSM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/source/OSM'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Style</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Style'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Stroke</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Stroke'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Fill</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Fill'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> format <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/format'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CircleStyle</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Circle'</span>

<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> interaction <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/interaction'</span>
<span class="hljs-keyword">import</span> type { <span class="hljs-title class_">DrawEvent</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/interaction/Draw'</span>
<span class="hljs-keyword">const</span> projection = <span class="hljs-string">'EPSG:4326'</span>

<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>

<span class="hljs-keyword">const</span> <span class="hljs-title function_">createDrawStyle</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Style</span>({
    <span class="hljs-attr">image</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircleStyle</span>({
      <span class="hljs-attr">radius</span>: <span class="hljs-number">4</span>,
      <span class="hljs-attr">fill</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fill</span>({
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#000000'</span>
      })
    }),
    <span class="hljs-attr">stroke</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stroke</span>({
      <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>
    })
  })
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DrawLine</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> mapRef = useRef&lt;<span class="hljs-title class_">Map</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> drawRef = useRef&lt;interaction.<span class="hljs-property">Draw</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> drawSource = useRef&lt;source.<span class="hljs-property">Vector</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> [drawType, setDrawType] = useState&lt;string&gt;(<span class="hljs-string">'Point'</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> vectorSource = <span class="hljs-keyword">new</span> source.<span class="hljs-title class_">Vector</span>()
    drawSource.<span class="hljs-property">current</span> = vectorSource
    <span class="hljs-keyword">const</span> vectorLayer = <span class="hljs-keyword">new</span> layer.<span class="hljs-title class_">Vector</span>({
      <span class="hljs-attr">source</span>: vectorSource,
      <span class="hljs-attr">style</span>: <span class="hljs-title function_">createDrawStyle</span>()
    })

    <span class="hljs-keyword">const</span> osmLayer = <span class="hljs-keyword">new</span> layer.<span class="hljs-title class_">Tile</span>({
      <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">OSM</span>()
    })

    <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>({
      <span class="hljs-attr">zoom</span>: <span class="hljs-number">10</span>,
      projection,
      <span class="hljs-attr">center</span>: [<span class="hljs-number">106.56</span>, <span class="hljs-number">29.57</span>]
    })

    <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>({
      <span class="hljs-attr">target</span>: <span class="hljs-string">'draw'</span>,
      <span class="hljs-attr">layers</span>: [osmLayer, vectorLayer],
      view,
      <span class="hljs-attr">controls</span>: []
    })
    <span class="hljs-keyword">const</span> draw = <span class="hljs-keyword">new</span> interaction.<span class="hljs-title class_">Draw</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'Point'</span>,
      <span class="hljs-attr">source</span>: vectorSource
    })
    map.<span class="hljs-title function_">addInteraction</span>(draw)
    mapRef.<span class="hljs-property">current</span> = map
    drawRef.<span class="hljs-property">current</span> = draw
  }, [])

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleClick</span> = (<span class="hljs-params">event: React.ChangeEvent&lt;HTMLInputElement&gt;</span>) =&gt; {
    <span class="hljs-title function_">setDrawType</span>(event.<span class="hljs-property">target</span>.<span class="hljs-property">value</span>)
  }

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> map = mapRef.<span class="hljs-property">current</span>!
    <span class="hljs-keyword">const</span> source = drawSource.<span class="hljs-property">current</span>!
    source.<span class="hljs-title function_">getFeatures</span>().<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
      <span class="hljs-keyword">if</span>(item.<span class="hljs-title function_">getGeometry</span>()?.<span class="hljs-title function_">getType</span>() === drawType) {
        source.<span class="hljs-title function_">removeFeature</span>(item)
      }
    })
    map.<span class="hljs-title function_">removeInteraction</span>(drawRef.<span class="hljs-property">current</span>!)
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleDrawEnd</span> = (<span class="hljs-params">event: DrawEvent</span>) =&gt; {
      <span class="hljs-keyword">const</span> feature = event.<span class="hljs-property">feature</span>
      feature.<span class="hljs-title function_">setProperties</span>({
        <span class="hljs-attr">type</span>: drawType === <span class="hljs-string">'Point'</span> ? <span class="hljs-string">'station'</span> : <span class="hljs-string">'line'</span>,
        <span class="hljs-attr">name</span>: drawType === <span class="hljs-string">'Point'</span> ? <span class="hljs-string">'ç«™ç‚¹'</span> + i : <span class="hljs-string">'é«˜é€Ÿ'</span>
      })
      i++
    }
    <span class="hljs-keyword">const</span> draw = <span class="hljs-keyword">new</span> interaction.<span class="hljs-title class_">Draw</span>({
      <span class="hljs-attr">type</span>: drawType,
      <span class="hljs-attr">source</span>: source,
      <span class="hljs-attr">style</span>: <span class="hljs-title function_">createDrawStyle</span>()
    })
    draw.<span class="hljs-title function_">on</span>(<span class="hljs-string">'drawend'</span>, handleDrawEnd)
    drawRef.<span class="hljs-property">current</span> = draw
    map.<span class="hljs-title function_">addInteraction</span>(draw)
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      draw.<span class="hljs-title function_">un</span>(<span class="hljs-string">'drawend'</span>, handleDrawEnd)
    }
  }, [drawType])

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleExport</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> source = drawSource.<span class="hljs-property">current</span>!
    <span class="hljs-keyword">const</span> features = source.<span class="hljs-title function_">getFeatures</span>()
    <span class="hljs-keyword">const</span> featureProjection = mapRef
      .<span class="hljs-property">current</span>!.<span class="hljs-title function_">getView</span>()
      .<span class="hljs-title function_">getProjection</span>()
      .<span class="hljs-title function_">getCode</span>()
    <span class="hljs-keyword">const</span> jsonFormat = <span class="hljs-keyword">new</span> format.<span class="hljs-title class_">GeoJSON</span>({
      featureProjection,
      <span class="hljs-attr">dataProjection</span>: projection
    })

    <span class="hljs-keyword">const</span> json = jsonFormat.<span class="hljs-title function_">writeFeatures</span>(features, {
      featureProjection,
      <span class="hljs-attr">dataProjection</span>: projection
    })
    <span class="hljs-comment">// å¯¼å‡º</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(json, <span class="hljs-string">'&gt;&gt;&gt;&gt;'</span>)
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">width:</span> '<span class="hljs-attr">800px</span>',
          <span class="hljs-attr">height:</span> '<span class="hljs-attr">400px</span>',
          <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>',
          <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>'
        }}
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"draw"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> '<span class="hljs-attr">800px</span>', <span class="hljs-attr">height:</span> '<span class="hljs-attr">400px</span>' }}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
        <span class="hljs-attr">checked</span>=<span class="hljs-string">{drawType</span> === <span class="hljs-string">'Point'</span>}
        <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">Point</span>'}
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleClick}</span>
      /&gt;</span>{' '}
      æ·»åŠ ç«™ç‚¹
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">type</span>=<span class="hljs-string">"radio"</span>
        <span class="hljs-attr">checked</span>=<span class="hljs-string">{drawType</span> === <span class="hljs-string">'LineString'</span>}
        <span class="hljs-attr">value</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">LineString</span>'}
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleClick}</span>
      /&gt;</span>{' '}
      æ·»åŠ çº¿è·¯
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleExport}</span>&gt;</span>å¯¼å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">DrawLine</span>

</code></pre>
<p>å½“ç»˜åˆ¶å¥½åå¯ä»¥ç‚¹å‡»å¯¼å‡ºã€ç„¶åå¯ä»¥çœ‹åˆ°æ§åˆ¶å°æœ‰æˆ‘ä»¬çš„JSONæ•°æ®ï¼Œè¿™é‡Œæˆ‘ç¤ºä¾‹äº†ä¸€ä¸‹ï¼Œæœ¬æ¥æƒ³æ‰¾æ¡çœŸå®çš„è·¯ï¼Œç»“æœå®šä½é‡åº†å°±æ‰¾ä¸åˆ°ä¸€æ¡ç›´çš„è·¯ï¼Œç®—äº†ã€‚è¿˜æœ‰è¿™é‡Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰‹åŠ¨ä¾¿åˆ©featuresè‡ªå·±å†™jsonï¼Œèƒ½è¿›ä¸€æ­¥å·©å›ºäº†è§£ï¼</p>
<p>è¿™æ˜¯æˆ‘ç»˜åˆ¶çš„ä¾›åé¢ä½¿ç”¨æ•ˆæœå›¾å¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7649f3adc6a640b28cacdf6699fc4d53~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5LicMjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765188752&amp;x-signature=pBfn7yzewOmvZKFn3Y%2BwWH6a9Sk%3D" alt="4c2d8a92240a8a7ebe53730fd8dd0d35.png" loading="lazy"/></p>
<h4 data-id="heading-16">OpenLayers ä¸­ä½¿ç”¨åˆšæ‰å¯¼å…¥çš„æ•°æ®</h4>
<p>æˆ‘ä»¬å¯ä»¥å¯¼å…¥åˆšæ‰çš„æ•°æ®å¹¶åŠ å…¥ä¸€äº›äº¤äº’ï¼Œè¿™é‡Œæˆ‘å¯¹æ•°æ®åšäº†ä¸€äº›åŠ å·¥ï¼Œè¿™ä¸€æ­¥å¯ä»¥åœ¨ç¼–è¾‘å®Œæˆï¼Œä½†æˆ‘ä»¬çš„ç¼–è¾‘æ¯”è¾ƒç²—ç³™ï¼Œæˆ‘å°±æ‰‹åŠ¨å¯¹JSONåšäº†ç¼–è¾‘ï¼Œä¸»è¦åŠŸèƒ½ï¼š</p>
<ul>
<li>æ”¯æŒè·¯çº¿é€‰ä¸­ã€æ˜¾ç¤ºè·¯çº¿ä¿¡æ¯</li>
<li>æ”¯æŒç«™ç‚¹é€‰ä¸­ã€æŸ¥çœ‹ç«™ç‚¹ä¿¡æ¯</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useEffect, useRef, useState } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> layer <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/layer'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> source <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/source'</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Map</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ol'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">View</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/View.js'</span>
<span class="hljs-keyword">import</span> <span class="hljs-variable constant_">OSM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/source/OSM'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Style</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Style'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Stroke</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Stroke'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Fill</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Fill'</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> format <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/format'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">CircleStyle</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/style/Circle'</span>

<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> interaction <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/interaction'</span>
<span class="hljs-keyword">import</span> { pointerMove } <span class="hljs-keyword">from</span> <span class="hljs-string">'ol/events/condition'</span>
<span class="hljs-keyword">const</span> projection = <span class="hljs-string">'EPSG:4326'</span>


<span class="hljs-keyword">const</span> <span class="hljs-title function_">createDrawStyle</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Style</span>({
    <span class="hljs-attr">image</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircleStyle</span>({
      <span class="hljs-attr">radius</span>: <span class="hljs-number">4</span>,
      <span class="hljs-attr">fill</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fill</span>({
        <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>
      })
    }),
    <span class="hljs-attr">stroke</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stroke</span>({
      <span class="hljs-attr">width</span>: <span class="hljs-number">2</span>,
      <span class="hljs-attr">color</span>: <span class="hljs-string">'#000'</span>
    })
  })
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">DrawLine</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> mapRef = useRef&lt;<span class="hljs-title class_">Map</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> wrapperRef = useRef&lt;<span class="hljs-title class_">HTMLDivElement</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> drawSource = useRef&lt;source.<span class="hljs-property">Vector</span>&gt;(<span class="hljs-literal">null</span>)
  <span class="hljs-keyword">const</span> [active, setActive] = useState&lt;any&gt;(<span class="hljs-literal">null</span>)

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> vectorSource = <span class="hljs-keyword">new</span> source.<span class="hljs-title class_">Vector</span>({
      <span class="hljs-attr">url</span>: <span class="hljs-string">'/geo/cq.json'</span>,
      <span class="hljs-attr">format</span>: <span class="hljs-keyword">new</span> format.<span class="hljs-title class_">GeoJSON</span>()
    })
    drawSource.<span class="hljs-property">current</span> = vectorSource
    <span class="hljs-keyword">const</span> vectorLayer = <span class="hljs-keyword">new</span> layer.<span class="hljs-title class_">Vector</span>({
      <span class="hljs-attr">source</span>: vectorSource,
      <span class="hljs-attr">style</span>: <span class="hljs-title function_">createDrawStyle</span>()
    })

    <span class="hljs-keyword">const</span> osmLayer = <span class="hljs-keyword">new</span> layer.<span class="hljs-title class_">Tile</span>({
      <span class="hljs-attr">source</span>: <span class="hljs-keyword">new</span> <span class="hljs-title function_">OSM</span>()
    })

    <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">View</span>({
      <span class="hljs-attr">zoom</span>: <span class="hljs-number">10</span>,
      projection,
      <span class="hljs-attr">center</span>: [<span class="hljs-number">106.56</span>, <span class="hljs-number">29.57</span>]
    })

    <span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>({
      <span class="hljs-attr">target</span>: <span class="hljs-string">'draw'</span>,
      <span class="hljs-attr">layers</span>: [osmLayer, vectorLayer],
      view,
      <span class="hljs-attr">controls</span>: []
    })
    <span class="hljs-keyword">const</span> select = <span class="hljs-keyword">new</span> interaction.<span class="hljs-title class_">Select</span>({
      <span class="hljs-attr">condition</span>: pointerMove,
      <span class="hljs-attr">style</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Style</span>({
        <span class="hljs-attr">image</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CircleStyle</span>({
          <span class="hljs-attr">radius</span>: <span class="hljs-number">8</span>,
          <span class="hljs-attr">fill</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Fill</span>({
            <span class="hljs-attr">color</span>: <span class="hljs-string">'red'</span>
          })
        }),
        <span class="hljs-attr">stroke</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stroke</span>({
          <span class="hljs-attr">width</span>: <span class="hljs-number">4</span>,
          <span class="hljs-attr">color</span>: <span class="hljs-string">'#000'</span>
        })
      })
    })
    map.<span class="hljs-title function_">addInteraction</span>(select)
    map.<span class="hljs-title function_">on</span>(<span class="hljs-string">'pointermove'</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> pixel = event.<span class="hljs-property">pixel</span>;
      <span class="hljs-keyword">const</span> features = map.<span class="hljs-title function_">getFeaturesAtPixel</span>(pixel);
      <span class="hljs-keyword">if</span>(features.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> feature = features.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-title function_">getGeometry</span>()?.<span class="hljs-title function_">getType</span>() === <span class="hljs-string">'Point'</span>) || features[<span class="hljs-number">0</span>]
        <span class="hljs-title function_">setActive</span>({
          pixel,
          <span class="hljs-attr">properties</span>: feature.<span class="hljs-title function_">getProperties</span>()
        })
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setActive</span>(<span class="hljs-literal">null</span>)
      }
    })
    mapRef.<span class="hljs-property">current</span> = map
  }, [])

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">width:</span> '<span class="hljs-attr">800px</span>',
          <span class="hljs-attr">height:</span> '<span class="hljs-attr">400px</span>',
          <span class="hljs-attr">position:</span> '<span class="hljs-attr">relative</span>',
          <span class="hljs-attr">display:</span> '<span class="hljs-attr">flex</span>'
        }}
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"draw"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{wrapperRef}</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">width:</span> '<span class="hljs-attr">800px</span>', <span class="hljs-attr">height:</span> '<span class="hljs-attr">400px</span>', <span class="hljs-attr">cursor:</span> <span class="hljs-attr">active</span> ? '<span class="hljs-attr">pointer</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">auto</span>'  }}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        {active &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span>
          <span class="hljs-attr">width:</span> '<span class="hljs-attr">100px</span>',
          <span class="hljs-attr">background:</span> '#<span class="hljs-attr">fff</span>',
          <span class="hljs-attr">padding:</span> '<span class="hljs-attr">4px</span>',
          <span class="hljs-attr">borderRadius:</span> '<span class="hljs-attr">4px</span>',
          <span class="hljs-attr">position:</span> '<span class="hljs-attr">absolute</span>',
          <span class="hljs-attr">left:</span> <span class="hljs-attr">active.pixel</span>[<span class="hljs-attr">0</span>] + <span class="hljs-attr">20</span> + '<span class="hljs-attr">px</span>',
          <span class="hljs-attr">top:</span> <span class="hljs-attr">active.pixel</span>[<span class="hljs-attr">1</span>] + <span class="hljs-attr">20</span> + '<span class="hljs-attr">px</span>'
        }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h5</span>&gt;</span>åç§°ï¼š{active.properties.name}<span class="hljs-tag">&lt;/<span class="hljs-name">h5</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/&gt;</span></span>
  )
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">DrawLine</span>

</code></pre>
<p>æ•ˆæœå›¾å¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ef460836b584a8cb7aed1ec11455922~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lic5LicMjMz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765188752&amp;x-signature=uaDOJHhBRAnggx9jjSApPMJ2g%2BQ%3D" alt="6b9ba06ac2c949da917c36dbe5e48919.png" loading="lazy"/></p>
<p>è¿™æ˜¯æˆ‘ä½¿ç”¨çš„JSON</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"FeatureCollection"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"features"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"LineString"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.40801847988175</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.57298086250036</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.56685851097549</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.580326066250358</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.69999032894425</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.54084559609411</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.80098688050674</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.43066753984411</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.83220399644425</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.410468229531606</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.88362042269425</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.403123025781607</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.91116493675675</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.406795627656606</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-punctuation">[</span>
            <span class="hljs-number">106.96074506206925</span><span class="hljs-punctuation">,</span>
            <span class="hljs-number">29.417813433281605</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"line"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æˆæ¸é«˜é€Ÿ"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-number">106.70012461444661</span><span class="hljs-punctuation">,</span>
          <span class="hljs-number">29.539872075705606</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"station"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å®‰åº·"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-number">106.56685698617343</span><span class="hljs-punctuation">,</span>
          <span class="hljs-number">29.57991493114919</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"station"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"å·´ä¸­"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-number">106.88282014240801</span><span class="hljs-punctuation">,</span>
          <span class="hljs-number">29.40285042973459</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"station"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æ¸åŒ—"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Feature"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"geometry"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Point"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"coordinates"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
          <span class="hljs-number">106.96102884444625</span><span class="hljs-punctuation">,</span>
          <span class="hljs-number">29.417240830909627</span>
        <span class="hljs-punctuation">]</span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"properties"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"station"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ç®€é˜³"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-17">æ€»ç»“</h3>
<p>é€šè¿‡æœ¬æ–‡çš„æ·±å…¥æ¢ç´¢ï¼Œæˆ‘ä»¬ç†è§£äº† GeoJSON ä½œä¸º Web åœ°ç†ç©ºé—´æ•°æ®é€šç”¨è¯­è¨€çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li>ç®€æ´: åŸºäº JSON æ ¼å¼ï¼Œç»“æ„æ¸…æ™°ï¼Œæ˜“äºäººæœºé˜…è¯»å’Œç¼–å†™ã€‚</li>
<li>çµæ´»: å¼ºå¤§çš„ Feature å’Œ FeatureCollection ç»“æ„å…è®¸æˆ‘ä»¬å°†å¤æ‚çš„åœ°ç†å‡ ä½•å›¾å½¢ï¼ˆå¦‚ LineString, Polygon, MultiPolygonï¼‰ä¸ä¸°å¯Œçš„éåœ°ç†å±æ€§æ•°æ® (properties) å®Œç¾ç»“åˆã€‚</li>
<li>æ ‡å‡†åŒ–: ç»Ÿä¸€çš„ WGS84 åæ ‡ç³»å’Œä¸¥æ ¼çš„è§„èŒƒï¼ˆå¦‚å³æ‰‹æ³•åˆ™ï¼‰ï¼Œç¡®ä¿äº† GeoJSON æ–‡ä»¶åœ¨ä¸åŒå¹³å°å’Œ Web åœ°å›¾åº“ä¹‹é—´çš„äº’æ“ä½œæ€§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSå®—é—¨å…¥é—¨è®°ï¼šå°ç™½å¸ˆå¦¹çš„å¯¹ç­”å¦‚æµï¼ˆä»JSç¯å¢ƒåˆ°å‡½æ•°ä½œç”¨åŸŸï¼‰]]></title>    <link>https://juejin.cn/post/7578697614389936134</link>    <guid>https://juejin.cn/post/7578697614389936134</guid>    <pubDate>2025-12-01T09:46:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578697614389936134" data-draft-id="7578681104291364907" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSå®—é—¨å…¥é—¨è®°ï¼šå°ç™½å¸ˆå¦¹çš„å¯¹ç­”å¦‚æµï¼ˆä»JSç¯å¢ƒåˆ°å‡½æ•°ä½œç”¨åŸŸï¼‰"/> <meta itemprop="keywords" content="Node.js"/> <meta itemprop="datePublished" content="2025-12-01T09:46:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¸¡è…¿å¤§ç‹"/> <meta itemprop="url" content="https://juejin.cn/user/4361104734828352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSå®—é—¨å…¥é—¨è®°ï¼šå°ç™½å¸ˆå¦¹çš„å¯¹ç­”å¦‚æµï¼ˆä»JSç¯å¢ƒåˆ°å‡½æ•°ä½œç”¨åŸŸï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4361104734828352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¸¡è…¿å¤§ç‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:46:40.000Z" title="Mon Dec 01 2025 09:46:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ™¨å…‰ç†¹å¾®ï¼ŒJSå®—é—¨çš„æ¼”æ­¦åœºä¸Šå·²ä¼ æ¥é˜µé˜µé”®ç›˜æ•²å‡»å£°ã€‚æˆ‘â€”â€”ä¸€ä¸ªåˆšå…¥é—¨ä¸‰å¤©çš„å¥³å¼Ÿå­ï¼Œæ­£è¹²åœ¨è§’è½ç›¯ç€å·è½´ä¸Šçš„ã€ŠV8å¿ƒæ³•ã€‹å‘å‘†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/adde6763b65a4b278afd65bd69650ea0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=1Y0xtQPtoU3LdKAHlstsldKtOU0%3D" alt="image.png" loading="lazy"/><br/>
â€œå–‚ï¼Œæ–°æ¥çš„ï¼â€ä¸€ä¸ªèº«å½±æŒ¡åœ¨æˆ‘é¢å‰ï¼Œæ˜¯å†…é—¨å¼Ÿå­æå¸ˆå…„ï¼Œäººç§°â€œé—­åŒ…å‰‘å®¢â€ã€‚ä»–å±…é«˜ä¸´ä¸‹åœ°çœ‹ç€æˆ‘æ‰‹ä¸­çš„å·è½´ï¼Œè¯­æ°”å¸¦ç€å®¡è§†ï¼šâ€œå¬è¯´ä½ åˆšå…¥é—¨ä¸‰å¤©ï¼Œå°±æ•¢çœ‹ã€ŠV8å¿ƒæ³•ã€‹ï¼Ÿé‚£ä½ å‘Šè¯‰æˆ‘ï¼Œæˆ‘å®—åŠŸæ³•é ä½•ç‰©è¿è½¬ï¼Ÿâ€æˆ‘ç«™èµ·èº«ï¼Œæ‹æ‹è¡£æ‘†ï¼Œä¸æ…Œä¸å¿™ç­”é“ï¼š<br/>
â€œå›å¸ˆå…„ï¼Œæˆ‘å®—åŠŸæ³•è¿è¡Œï¼Œå€šä»—ä¸¤å¤§â€˜å¼•æ“â€™ï¼šä¸€ä¸ºâ€˜æµè§ˆå™¨â€™ç§˜å¢ƒï¼ŒäºŒä¸ºâ€˜Nodeâ€™çµå°ã€‚å…¶ä¸­V8å¼•æ“ï¼Œä¹ƒæ˜¯ä¸€æ®µåºå¤§è€Œç²¾å¦™çš„â€˜å‡½æ•°â€™ï¼Œå®ƒèƒ½è¯»æ‡‚JSå’’è¯­å¹¶äºˆä»¥æ‰§è¡Œã€‚â€<br/>
<strong>(v8 å¼•æ“ï¼Œ ä¹Ÿæ˜¯ä¸€æ®µå‡½æ•°ï¼ˆåºå¤§ï¼‰ï¼Œå®ƒå¯ä»¥è¯»æ‡‚ js å¹¶æ‰§è¡Œ)</strong><br/>
æå¸ˆå…„çœ‰æ¯›ä¸€æŒ‘ï¼šâ€œå“¦ï¼Ÿé‚£ä½ è¯´è¯´ï¼Œä¸€æ®µJSå’’è¯­è¢«V8è¯»å–åï¼Œæ˜¯ç›´æ¥ç”Ÿæ•ˆå—ï¼Ÿâ€â€œå¹¶éå¦‚æ­¤ã€‚â€æˆ‘æ‘‡å¤´ï¼Œâ€œå’’è¯­å…¥å¼•æ“ï¼Œé¦–ç»ä¸‰é‡æ¢³ç†ï¼šä¸€æ›°â€˜åˆ†è¯â€™ï¼Œè§£æ„å’’è¯­ä¸ºè¯å…ƒï¼›äºŒæ›°â€˜è§£æâ€™ï¼Œç­‘æˆâ€˜æŠ½è±¡è¯­æ³•æ ‘â€™ï¼Œè¾¨æ˜æœ‰æ•ˆæ ‡è¯†ç¬¦ï¼›ä¸‰æ›°â€˜ç”Ÿæˆä»£ç â€™ï¼Œæ–¹å¯ä½¿å’’è¯­å…·ç°ã€‚â€<br/>
ï¼ˆ# jsçš„æ‰§è¡Œ</p>
<ol>
<li>ä»£ç è¢« v8 è¯»å–åˆ°çš„ç¬¬ä¸€æ—¶é—´ï¼Œå¹¶ä¸æ˜¯æ‰§è¡Œï¼Œè€Œæ˜¯ä¼šå…ˆç¼–è¯‘ï¼ˆæ¢³ç†ï¼‰</li>
</ol>
<ul>
<li>æ¢³ç†ï¼š</li>
</ul>
<ol>
<li>åˆ†è¯/è¯æ³•åˆ†æï¼šå°†ä»£ç ä¸€ä¸ªä¸€ä¸ªæ‹†åˆ†è§£ææˆv8å¼•æ“å¯ä»¥è¯†åˆ«çš„å­—ç¬¦</li>
<li>è§£æ/è¯­æ³•åˆ†æ  -- AST(æŠ½è±¡è¯­æ³•æ ‘) è·å–æœ‰æ•ˆæ ‡è¯†ç¬¦</li>
<li>ç”Ÿæˆä»£ç ï¼‰<br/>
æ—è¾¹æ¸æ¸å›´æ‹¢äº†å‡ ä½å¤–é—¨å¼Ÿå­ï¼Œæå¸ˆå…„æŠ±è‡‚åˆé—®ï¼šâ€œé‚£ä½ å¯çŸ¥ï¼Œæˆ‘å®—ä¸ºä½•è¦åˆ›â€˜å‡½æ•°â€™ä¹‹æœ¯ï¼Ÿâ€æˆ‘å¾®å¾®ä¸€ç¬‘ï¼šâ€œå‡½æ•°å¦‚æœ¯æ³•å°è£…ï¼Œå¯å°†ä¸€æ®µé€»è¾‘ä»£ç å°å­˜å…¶ä¸­ã€‚æœªè°ƒç”¨æ—¶ï¼Œå¦‚å‰‘åœ¨é˜ä¸­ï¼Œéšè€Œä¸å‘ï¼›ä¸€æ—¦è°ƒç”¨ï¼Œåˆ™å¦‚å‰‘å‡ºé˜ï¼Œä»£ç æ–¹å¾—æ‰§è¡Œã€‚â€</li>
</ol>
<p><strong>ï¼ˆå½¢å¦‚ function foo() {}ï¼Œå°±æ˜¯ä¸€ä¸ªå‡½æ•°ä½“ï¼Œå‡½æ•°å­˜åœ¨çš„æ„ä¹‰å°±æ˜¯è®©æˆ‘ä»¬å¯ä»¥å°†æŸä¸€æ®µé€»è¾‘ä»£ç ï¼Œå†™åœ¨å‡½æ•°ä¸­ï¼Œæœ€åè°ƒç”¨å‡½æ•°ï¼Œè¿™æ®µä»£ç æ‰ä¼šæ‰§è¡Œï¼‰</strong></p>
<pre><code class="hljs language-JS" lang="JS"><span class="hljs-keyword">var</span> a = <span class="hljs-number">10</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);
}
<span class="hljs-title function_">foo</span>()

</code></pre>
<p>æ­¤æ—¶ä¸€ä½å¸ˆå§æ’è¯ï¼šâ€œå¬è¯´ä½ æ˜¨æ—¥ä¾¿å‚é€äº†â€˜ä½œç”¨åŸŸâ€™ä¹‹å¢ƒï¼Ÿâ€æˆ‘è½¬å‘å¥¹ï¼Œæ‹±æ‰‹é“ï¼šâ€œå¸ˆå§æ˜é‰´ã€‚æˆ‘å®—ä½œç”¨åŸŸåˆ†ä¸‰é‡å¤©ï¼šä¸€ä¸ºâ€˜å…¨å±€â€™ï¼Œå¦‚å®—é—¨å¹¿åœºï¼Œäººäººå¯è§ï¼›äºŒä¸ºâ€˜å‡½æ•°â€™ï¼Œå¦‚å„è‡ªå¢æˆ¿ï¼Œå†…ç‰©ä¸å¤–éœ²ï¼›ä¸‰ä¸ºâ€˜å—çº§â€™ï¼Œéœ€ä»¥letã€constç¬¦å’’é…åˆ{}ç»“ç•Œè€Œæˆã€‚ä¸”ä½œç”¨åŸŸä¹‹è§„ï¼Œä¹ƒâ€˜ç”±å†…å‘å¤–â€™å•å‘å¯è§ï¼Œå¤–å±‚ä¸å¯çª¥æ¢å†…å±‚ä¹‹ç§˜ã€‚â€<br/>
(# ä½œç”¨åŸŸ</p>
<ol>
<li>å…¨å±€ä½œç”¨åŸŸ</li>
<li>å‡½æ•°ä½œç”¨åŸŸ ï¼ˆå‚æ•°ä¹Ÿæ˜¯è¯¥ä½œç”¨åŸŸçš„ä¸€ä¸ªæœ‰æ•ˆæ ‡è¯†ï¼‰</li>
<li>å—çº§ä½œç”¨åŸŸ (let,const å’Œ {} è¯­æ³•é…åˆä½¿ç”¨ä¼šå¯¼è‡´å£°æ˜çš„å˜é‡å¤„åœ¨ä¸€ä¸ªä½œç”¨åŸŸä¸­)</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/952d7272b79f4e18ad3a5ede94cd81b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=a9kc4%2BnOUAVZe5Gyu2%2FnRxBLQRo%3D" alt="image.png" loading="lazy"/>ï¼ˆå®—é—¨å¹¿åœºä¸Šï¼Œä¼—å¤šå¼Ÿå­å¾€æ¥ç©¿æ¢­ï¼Œå¹¿åœºä¸­å¤®ç«‹ç€ â€œå…¨å±€â€ çŸ³ç¢‘ï¼Œæ¸…æ™°å¯è§ï¼Œè±¡å¾å…¨å±€ä½œç”¨åŸŸäººäººå¯è®¿é—®ã€‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bb0b20a9b8864019bce7cdf14305a764~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=XyVYLgo4GTqlOsOfZ8SXtEWcO84%3D" alt="image.png" loading="lazy"/>ï¼ˆä¸€é—´ç‹¬ç«‹å¢æˆ¿å†…ï¼Œä¸€ä½å¼Ÿå­æ­£åœ¨æ¡Œå‰ç ”è¯»å…¸ç±ï¼Œå¢æˆ¿é—¨çª—ç´§é—­ï¼Œé—¨å¤–æœ‰ â€œå‡½æ•°â€ ç‰ŒåŒ¾ï¼Œç¤ºæ„å¢æˆ¿å†…ç‰©å“ä»…é™å†…éƒ¨ä½¿ç”¨ï¼Œä¸å‘å¤–æš´éœ²ã€‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6928f34e9a84657a7b8b9a26e3f0b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=jyQ7Ht5nonMroT4Q7%2B3HYDwQmRk%3D" alt="image.png" loading="lazy"/>ï¼ˆä¸€é—´å¯†å®¤ä¸­ï¼Œåœ°é¢ç”¨ {} ç¬¦å·ç»˜åˆ¶å‡ºç»“ç•Œï¼Œç»“ç•Œå†…æœ‰ letã€const ç¬¦å’’æ‚¬æµ®ï¼Œä¸€ä½å¼Ÿå­åœ¨ç»“ç•Œå†…ä¿®ç‚¼ï¼Œç»“ç•Œå¤–ä¹‹äººæ— æ³•çœ‹æ¸…å†…éƒ¨æƒ…å†µï¼Œä½“ç°å—çº§ä½œç”¨åŸŸéœ€ç‰¹å®šç¬¦å’’é…åˆç»“ç•Œå½¢æˆã€‚ä¸€é—´å¯†å®¤ä¸­ï¼Œåœ°é¢ç”¨ {} ç¬¦å·ç»˜åˆ¶å‡ºç»“ç•Œï¼Œç»“ç•Œå†…æœ‰ letã€const ç¬¦å’’æ‚¬æµ®ï¼Œä¸€ä½å¼Ÿå­åœ¨ç»“ç•Œå†…ä¿®ç‚¼ï¼Œç»“ç•Œå¤–ä¹‹äººæ— æ³•çœ‹æ¸…å†…éƒ¨æƒ…å†µï¼Œä½“ç°å—çº§ä½œç”¨åŸŸéœ€ç‰¹å®šç¬¦å’’é…åˆç»“ç•Œå½¢æˆã€‚ï¼‰</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/380efc35a64a4fbdbac13356c0ada78b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=I2rftg%2BQD20vSsVvaHKwWNU1fcE%3D" alt="image.png" loading="lazy"/>ï¼ˆä»å†…åˆ°å¤–ä¾æ¬¡ç»˜åˆ¶ç€å¯†å®¤ã€å¢æˆ¿ã€å®—é—¨å¹¿åœºï¼Œç®­å¤´ä»å¯†å®¤æŒ‡å‘å¢æˆ¿å†æŒ‡å‘å¹¿åœºï¼Œç¤ºæ„ä½œç”¨åŸŸ â€œç”±å†…å‘å¤–â€ å•å‘å¯è§çš„è§„åˆ™ï¼Œå¤–å±‚æ— æ³•åå‘çª¥æ¢å†…å±‚ã€‚ï¼‰<br/>
æå¸ˆå…„å¿½ç„¶ç›®å…‰ä¸€å‡ï¼ŒæŠ›å‡ºæœ€åä¸€é—®ï¼šâ€œé‚£â€˜letç»“ç•Œæœ¯â€™ä¸­ï¼Œæœ‰ä¸€ç‰¹æ®Šç¦åˆ¶ï¼Œä½ å¯çŸ¥æ˜¯ä½•ï¼Ÿâ€æˆ‘æ·±å¸ä¸€å£æ°”ï¼Œæ¸…æ™°ç­”é“ï¼šâ€œæ­¤ä¹ƒâ€˜æš‚æ—¶æ€§æ­»åŒºâ€™â€”â€”å½“{}ç»“ç•Œä¸­å­˜letå£°æ˜ï¼Œç»“ç•Œä¹‹å†…å‡¡å¯»æ­¤å˜é‡ï¼Œå¿…å…ˆå¯»å¢ƒå†…ä¹‹èº«ã€‚çºµå¢ƒå†…æ— è·ï¼Œäº¦ä¸å¯è¶Šç•Œå¤–æ±‚ï¼Œæ­¤ç¦ç›´è‡³ç»“ç•Œç•…é€šæ–¹è§£ã€‚â€<br/>
ï¼ˆå½“ä¸€ä¸ª{} è¯­å¥ä¸­å­˜åœ¨ let x æ—¶ï¼Œåœ¨è¯¥{}ä¸­è®¿é—®xï¼Œæ°¸è¿œéƒ½åªèƒ½è®¿é—®{}å†…éƒ¨çš„ xï¼Œå°±ç®—å†…éƒ¨è®¿é—®ä¸åˆ°ï¼Œä¹Ÿä¸èƒ½è®¿é—®å¤–éƒ¨çš„xã€‚è¿™ç§è§„åˆ™ç§°ä¸º --- æš‚æ—¶æ€§æ­»åŒºï¼‰<br/>
ï¼ˆä¸¾ä¸ªæ —å­</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> a = <span class="hljs-number">1</span>
<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) { 
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a);  <span class="hljs-comment">// æš‚æ—¶æ€§æ­»åŒº</span>
  <span class="hljs-keyword">let</span> a = <span class="hljs-number">2</span>
}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2ce55dd9d894bed8844c7278e5ae492~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=miOlUbVi7GbaAz85zzPU2snOI%2Bg%3D" alt="image.png" loading="lazy"/>ä»£ç ç»“æœæ˜¯'ä¸èƒ½åœ¨å£°æ˜å˜é‡aä¹‹å‰è¾“å‡º'ï¼Œå°±ç®—å†…éƒ¨è®¿é—®ä¸åˆ°aæ¥è¾“å‡ºï¼Œä¹Ÿä¸èƒ½è®¿é—®å¤–éƒ¨çš„aï¼Œè¿™ç§°ä¸ºæš‚æ—¶æ€§æ­»åŒºï¼‰<br/>
åœºä¸­é™é»˜ç‰‡åˆ»ã€‚æå¸ˆå…„å¿½ç„¶å¤§ç¬‘ï¼Œä»æ€€ä¸­æå‡ºä¸€æšé“œç‰Œï¼šâ€œå¥½ï¼åŸºç¡€æ‰å®ï¼Œæ‚Ÿæ€§ä¸å‡¡ã€‚è¿™æ˜¯æˆ‘å†…é—¨å¬è®²ç‰Œï¼Œæ˜æ—¥â€˜äº‹ä»¶å¾ªç¯è®ºå‰‘â€™ï¼Œä½ å¯æ¥æ—å¬ã€‚â€åæ¥æ‰çŸ¥ï¼Œæå¸ˆå…„é‚£æ—¥å…¶å®æ˜¯å¥‰é•¿è€ä¹‹å‘½ï¼Œè¯•æ¢æ–°å¼Ÿå­æ ¹åŸºã€‚è€Œæˆ‘â€”â€”è¿™ä¸ªé€šå®µå•ƒå®Œã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹è¿˜åšäº†ä¸‰å¥—ç¬”è®°çš„â€œå°ç™½â€ï¼Œä¸è¿‡æ˜¯æŠŠä¹¦ä¸Šçš„å­—ï¼ŒèƒŒå¾—ç†Ÿäº†äº›ã€‚æ¯•ç«Ÿåœ¨JSå®—é—¨ï¼Œå“ªæœ‰ä»€ä¹ˆå¤©æ‰ï¼Œä¸è¿‡æ˜¯æŠŠåˆ«äººå–å’–å•¡çš„æ—¶é—´ï¼Œç”¨æ¥â€¦â€¦å†™bugå’Œdebugç½¢äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87f6a059c8b14633ad0f562185afd452~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6bih6IW_5aSn546L:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187615&amp;x-signature=WDsJFMZTTGy9VHDVdiry%2FJsvlb4%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[antd 4.x Tabs ç‚¹å‡»é˜»æ­¢å†’æ³¡]]></title>    <link>https://juejin.cn/post/7578709098255400998</link>    <guid>https://juejin.cn/post/7578709098255400998</guid>    <pubDate>2025-12-01T10:20:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578709098255400998" data-draft-id="7578442185848078374" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="antd 4.x Tabs ç‚¹å‡»é˜»æ­¢å†’æ³¡"/> <meta itemprop="keywords" content="React.js,CSS"/> <meta itemprop="datePublished" content="2025-12-01T10:20:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»€ä¹ˆæ—¶å€™æ˜ŸæœŸäº”"/> <meta itemprop="url" content="https://juejin.cn/user/3178012213523544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            antd 4.x Tabs ç‚¹å‡»é˜»æ­¢å†’æ³¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3178012213523544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»€ä¹ˆæ—¶å€™æ˜ŸæœŸäº”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:20:29.000Z" title="Mon Dec 01 2025 10:20:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€åœºæ™¯</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1f372f4b1a9423ba105abfee70f0c9f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LuA5LmI5pe25YCZ5pif5pyf5LqU:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765189229&amp;x-signature=n1mYps6o9FKvG%2BaHZn7Rd4P9w%2BQ%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œtab1-æœªå›å¤ï¼Œtab2-å·²å›å¤+ç­›é€‰æ¡ä»¶ä»…çœ‹æœªå¤„ç†<br/>
å½“åœ¨tab1æ—¶ï¼Œç‚¹å‡»tab2çš„ä»…çœ‹æœªå¤„ç†checkboxï¼Œæ­¤æ—¶éœ€è¦è¿›è¡Œtab2çš„æ•°æ®è¯·æ±‚ï¼ˆè¯·æ±‚å·²å›å¤&amp;æœªå¤„ç†çš„æ•°æ®ï¼‰</p>
<h2 data-id="heading-1">äºŒã€åŸºç¡€å®ç°</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> [activeKey, setActiveKey] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">'replied'</span>);

<span class="hljs-keyword">const</span> defaultPageParams = {
    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">rows</span>: <span class="hljs-number">5</span>,
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getRepliedData</span> = (<span class="hljs-params">params: any</span>) =&gt; {
    <span class="hljs-keyword">const</span> _params = {
        ...params
    }
    <span class="hljs-keyword">if</span> (_params.<span class="hljs-property">handleStatus</span> == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">delete</span> _params.<span class="hljs-property">handleStatus</span>;
    }
    <span class="hljs-comment">// å­˜ä¸€ä»½params</span>
    <span class="hljs-comment">//...</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getNotReplyData</span> = (<span class="hljs-params">params: any</span>) =&gt; {
    <span class="hljs-comment">//...</span>
    <span class="hljs-comment">// å­˜ä¸€ä»½params</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFilterRepliedData</span> = (<span class="hljs-params">e: CheckboxChangeEvent</span>) =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: any = {
        ...defaultPageParams,
        <span class="hljs-attr">handleStatus</span>: e.<span class="hljs-property">target</span>.<span class="hljs-property">checked</span> ? <span class="hljs-number">0</span> : <span class="hljs-literal">null</span>,
    };
    <span class="hljs-title function_">getRepliedData</span>(params);
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">getData</span> = (<span class="hljs-params">key: string</span>) =&gt; {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">params</span>: any = {
        ...defaultPageParams
    };
    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'replied'</span>) {
      <span class="hljs-title function_">getRepliedData</span>(params);
    }
    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'not-reply'</span>) {
      <span class="hljs-title function_">getNotReplyData</span>(params);
    }
};
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Tabs</span>
    <span class="hljs-attr">defaultActiveKey</span>=<span class="hljs-string">{</span>'<span class="hljs-attr">not-reply</span>'}
    <span class="hljs-attr">activeKey</span>=<span class="hljs-string">{activeKey}</span>
    <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(key)</span> =&gt;</span> {
        setActiveKey(key);
        getData(key);
    }}
    items={[
        {
          key: 'not-reply',
          label: 'æœªå›å¤',
          children: (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æœªå›å¤å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ),
        },
        {
          key: 'replied',
          label: (
            <span class="hljs-tag">&lt;<span class="hljs-name">Space</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å·²å›å¤<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span> <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleFilterRepliedData}</span>&gt;</span>
                  åƒ…çœ‹æœªè™•ç†
                <span class="hljs-tag">&lt;/<span class="hljs-name">Checkbox</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Space</span>&gt;</span>
          ),
          children: (
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å·²å›å¤å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          ),
        },
    ]}
/&gt;</span>
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€åŸºç¡€å®ç°å­˜åœ¨çš„é—®é¢˜</h2>
<p>åœ¨tab1ç›´æ¥ç‚¹å‡»tab2çš„checkboxï¼Œä¼šæ‰§è¡ŒCheckboxçš„onChangeäº‹ä»¶ï¼Œä¹Ÿä¼šæ‰§è¡ŒTabsçš„onChangeäº‹ä»¶ï¼Œä¼šå¯¼è‡´è¯·æ±‚äº†ä¸¤æ¬¡æ¥å£åŒæ—¶é¡µé¢ä¸Šä¼šæœ‰æ•°æ®é—ªç°ç°è±¡ï¼Œè‹¥Tabsçš„è¯·æ±‚æ›´æ…¢ï¼Œå¯èƒ½è¿˜ä¼šå¯¼è‡´æ•°æ®æŸ¥è¯¢å¼‚å¸¸ã€‚</p>
<h2 data-id="heading-3">å››ã€ä¼˜åŒ–å®ç°</h2>
<p>å…³é”®ä»£ç ï¼š</p>
<ol>
<li>CheckboxåŒ…ä¸€å±‚ï¼š<br/>
<code>&lt;span style={{ pointerEvents: 'none' }} onClick={(e) =&gt; e.stopPropagation()}&gt;</code></li>
<li>CheckboxåŠ styleï¼š<br/>
<code>style={{ pointerEvents: 'auto' }}</code></li>
<li>Checkbox onChangeæ–¹æ³•æ·»åŠ ä»£ç ï¼š<br/>
<code>e.stopPropagation();</code><br/>
<code>setActiveKey('replied');</code></li>
</ol>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1ã€æ”¹Checkboxçš„onChangeæ–¹æ³•</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleFilterRepliedData</span> = (<span class="hljs-params">e: CheckboxChangeEvent</span>) =&gt; {
    <span class="hljs-comment">// é¿å…åœ¨æœªå‘½ä¸­è©²tabçš„æƒ…æ³ä¸‹ï¼Œç›´æ¥é»æ“Šè©²checkboxè«‹æ±‚äº†å…©æ¬¡æ¥å£å°è‡´çš„é é¢å…§å®¹é–ƒç¾å•é¡Œ</span>
    e.<span class="hljs-title function_">stopPropagation</span>();
    <span class="hljs-title function_">setActiveKey</span>(<span class="hljs-string">'replied'</span>);
    
    <span class="hljs-comment">//...</span>
}

&lt;<span class="hljs-title class_">Tabs</span>
    <span class="hljs-comment">//...</span>
    items={[
        <span class="hljs-comment">//...</span>
        {
          <span class="hljs-attr">key</span>: <span class="hljs-string">'replied'</span>,
          <span class="hljs-attr">label</span>: (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Space</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å·²å›å¤<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                {/* 2ã€æ”¹Checkboxè§†å›¾ï¼Œè§£æ±ºäº‹ä»¶å†’æ³¡åˆ°tabsçš„onChangeäº‹ä»¶ */}
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">pointerEvents:</span> '<span class="hljs-attr">none</span>' }} <span class="hljs-attr">onClick</span>=<span class="hljs-string">{(e)</span> =&gt;</span> e.stopPropagation()}&gt;
                    <span class="hljs-tag">&lt;<span class="hljs-name">Checkbox</span> <span class="hljs-attr">style</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">pointerEvents:</span> '<span class="hljs-attr">auto</span>' }} <span class="hljs-attr">onChange</span>=<span class="hljs-string">{handleFilterRepliedData}</span>&gt;</span>
                      åƒ…çœ‹æœªè™•ç†
                    <span class="hljs-tag">&lt;/<span class="hljs-name">Checkbox</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">Space</span>&gt;</span></span>
          ),
          <span class="hljs-attr">children</span>: (
            <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>å·²å›å¤å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
          ),
        },
    ]}
/&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ¬¡ç”± by lazy å¼•å‘çš„â€œæ•°æ®å€’çŒâ€ï¼Œæ·±å…¥ç†è§£ `by`å…³é”®å­—ã€`lazy`å‡½æ•°çš„æœ¬è´¨]]></title>    <link>https://juejin.cn/post/7578820431017541647</link>    <guid>https://juejin.cn/post/7578820431017541647</guid>    <pubDate>2025-12-01T09:39:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578820431017541647" data-draft-id="7578693994368581632" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ¬¡ç”± by lazy å¼•å‘çš„â€œæ•°æ®å€’çŒâ€ï¼Œæ·±å…¥ç†è§£ `by`å…³é”®å­—ã€`lazy`å‡½æ•°çš„æœ¬è´¨"/> <meta itemprop="keywords" content="Android,Kotlin,APP"/> <meta itemprop="datePublished" content="2025-12-01T09:39:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Gemini001"/> <meta itemprop="url" content="https://juejin.cn/user/2333635831676704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ¬¡ç”± by lazy å¼•å‘çš„â€œæ•°æ®å€’çŒâ€ï¼Œæ·±å…¥ç†è§£ `by`å…³é”®å­—ã€`lazy`å‡½æ•°çš„æœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2333635831676704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Gemini001
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:39:11.000Z" title="Mon Dec 01 2025 09:39:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€æ¬¡ç”± by lazy å¼•å‘çš„â€œæ•°æ®å€’çŒâ€è¡€æ¡ˆï¼šä» Bug æ·±å…¥ Kotlin å±æ€§å§”æ‰˜ä¸ç”Ÿå‘½å‘¨æœŸ</h2>
<h3 data-id="heading-1">å¼•è¨€</h3>
<p>åœ¨æ—¥å¸¸çš„ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸è¿½æ±‚ä»£ç çš„ç®€æ´ä¸ä¼˜é›…ã€‚Kotlin è¯­è¨€ä¸ºæˆ‘ä»¬æä¾›äº†è¯¸å¤šç²¾å¦™çš„è¯­æ³•ç³–ï¼Œ<code>by lazy</code>ä¾¿æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒèƒ½è®©æˆ‘ä»¬ä»¥ä¸€ç§éå¸¸ä¾¿æ·çš„æ–¹å¼å®ç°å±æ€§çš„å»¶è¿Ÿåˆå§‹åŒ–ã€‚ç„¶è€Œï¼Œâ€œèƒ½åŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§â€ï¼Œå¦‚æœä¸æ·±å…¥ç†è§£å…¶èƒŒåçš„å·¥ä½œåŸç†å’Œé€‚ç”¨åœºæ™¯ï¼Œè¿™ä»½â€œä¾¿æ·â€æœ‰æ—¶ä¼šå˜æˆä¸€ä¸ªéš¾ä»¥è¿½è¸ªçš„â€œé™·é˜±â€ã€‚</p>
<p>æœ¬æ–‡å°†å¤ç›˜ä¸€ä¸ªçœŸå®åœºæ™¯ä¸­é‡åˆ°çš„é—®é¢˜ï¼šç”¨æˆ·åˆ‡æ¢è´¦å·åï¼Œä¸ªäººä¸­å¿ƒé¡µé¢ç«Ÿç„¶å‡ºç°äº†ä¸Šä¸€ä¸ªè´¦å·çš„æ—§æ•°æ®ï¼æˆ‘ä»¬å°†ä»¥æ­¤ä¸ºåˆ‡å…¥ç‚¹ï¼Œä¸€æ­¥æ­¥æ­å¼€é—®é¢˜çš„é¢çº±ï¼Œä¸ä»…è§£å†³ Bugï¼Œæ›´è¦æ·±å…¥ç†è§£ <code>by</code>å…³é”®å­—ã€<code>lazy</code>å‡½æ•°çš„æœ¬è´¨ï¼Œå¹¶åæ€åœ¨ Android æ¶æ„è®¾è®¡ä¸­é‚£äº›å…³äºç”Ÿå‘½å‘¨æœŸçš„é‡è¦åŸåˆ™ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€æ¡ˆå‘ç°åœºï¼šè¯¡å¼‚çš„æ•°æ®å€’çŒ</h3>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬çš„ App é¦–é¡µé‡‡ç”¨ä¸»æµçš„ Fragment + BottomNavigationView ç»“æ„ï¼Œä¸ºäº†ç®¡ç†å„ä¸ª Tab å¯¹åº”çš„ Fragmentï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå·¥å…·ç±»ã€‚ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ï¼Œé¿å…æ¯æ¬¡åˆ‡æ¢ Tab éƒ½é‡æ–°åˆ›å»º Fragmentï¼Œæˆ‘ä»¬å¾ˆè‡ªç„¶åœ°æƒ³åˆ°äº†ä½¿ç”¨å•ä¾‹æ¥â€œç¼“å­˜â€è¿™äº› Fragment å®ä¾‹ã€‚</p>
<p>ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// HomeTabUtils.kt - ä¸€ä¸ªå•ä¾‹å¯¹è±¡ï¼Œç”¨äºç®¡ç† Fragment</span>
<span class="hljs-keyword">object</span> HomeTabUtils {
    <span class="hljs-comment">// ä½¿ç”¨ by lazy åˆå§‹åŒ– Fragmentï¼Œçœ‹èµ·æ¥å¾ˆå®Œç¾ï¼</span>
    <span class="hljs-keyword">val</span> tabHome <span class="hljs-keyword">by</span> lazy { HomeFragment() }
    <span class="hljs-keyword">val</span> tabMessage <span class="hljs-keyword">by</span> lazy { MessageFragment() }
    <span class="hljs-keyword">val</span> tabMine <span class="hljs-keyword">by</span> lazy { MineFragment() }
}

<span class="hljs-comment">// HomeActivity.kt - åœ¨ Activity ä¸­æ·»åŠ  Fragment</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// å°† "æˆ‘çš„" Fragment æ·»åŠ åˆ°å®¹å™¨ä¸­</span>
        supportFragmentManager.beginTransaction()
            .add(R.id.fragment_container, HomeTabUtils.tabMine)
            .commit()
    }
}
</code></pre>
<p>è¿™æ®µä»£ç çœ‹èµ·æ¥ç®€æ´ä¸”é«˜æ•ˆã€‚<code>object</code>ç¡®ä¿äº† <code>HomeTabUtils</code>çš„å•ä¾‹æ€§ï¼Œ<code>by lazy</code>ç¡®ä¿äº†æ¯ä¸ª Fragment åªåœ¨ç¬¬ä¸€æ¬¡è¢«éœ€è¦æ—¶åˆ›å»ºä¸€æ¬¡ã€‚ä¸€åˆ‡ä¼¼ä¹éƒ½è¿è¡Œè‰¯å¥½ï¼Œç›´åˆ°â€œåˆ‡æ¢è´¦å·â€åŠŸèƒ½ä¸Šçº¿ã€‚</p>
<h4 data-id="heading-3">é—®é¢˜å¤ç°æµç¨‹ï¼š</h4>
<ol>
<li>ç”¨æˆ· A ç™»å½• Appï¼Œè¿›å…¥â€œæˆ‘çš„â€é¡µé¢ï¼Œé¡µé¢æ­£ç¡®æ˜¾ç¤ºäº†ç”¨æˆ· A çš„å¤´åƒå’Œæ˜µç§°ã€‚</li>
<li>ç”¨æˆ· A é€€å‡ºç™»å½•ï¼Œ<code>HomeActivity</code>è¢«é”€æ¯ã€‚</li>
<li>ç”¨æˆ· B åœ¨åŒä¸€å°è®¾å¤‡ä¸Šç™»å½• Appï¼Œä¸€ä¸ªæ–°çš„ <code>HomeActivity</code>è¢«åˆ›å»ºã€‚</li>
<li>ç”¨æˆ· B è¿›å…¥â€œæˆ‘çš„â€é¡µé¢ï¼Œè¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿäº†ï¼šé¡µé¢ä¸Šæ˜¾ç¤ºçš„ç«Ÿç„¶è¿˜æ˜¯ç”¨æˆ· A çš„å¤´åƒå’Œæ˜µç§°ï¼æ•°æ®å‘ç”Ÿäº†â€œå€’çŒâ€ã€‚</li>
</ol>
<h3 data-id="heading-4">äºŒã€æŠ½ä¸å‰¥èŒ§ï¼šè¿½å¯» Bug çš„æ ¹æº</h3>
<p>è¿™ä¸ªé—®é¢˜éå¸¸å…¸å‹ï¼Œå®ƒçš„æ ¹æºåœ¨äºä¸‰ä¸ªè®¾è®¡é€‰æ‹©çš„â€œè‡´å‘½ç»„åˆâ€ï¼š<strong>åº”ç”¨çº§å•ä¾‹ + by lazy çš„ç¼“å­˜ç‰¹æ€§ + Android ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</strong>ã€‚è®©æˆ‘ä»¬æ¥ä¸€æ­¥æ­¥å‰–ææ•´ä¸ªæµç¨‹ï¼š</p>
<h4 data-id="heading-5">1. â€œé•¿å¯¿â€çš„å•ä¾‹</h4>
<p><code>HomeTabUtils</code>æ˜¯ä¸€ä¸ª <code>object</code>ï¼Œå®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸æ•´ä¸ª App è¿›ç¨‹ç›¸åŒã€‚åªè¦ App ä¸è¢«ç³»ç»Ÿæ€æ­»ï¼Œè¿™ä¸ªå•ä¾‹å¯¹è±¡å°±æ°¸è¿œå­˜åœ¨äºå†…å­˜ä¸­ã€‚</p>
<h4 data-id="heading-6">2. â€œå¿ è¯šâ€çš„ by lazy</h4>
<p><code>by lazy</code>çš„æ ¸å¿ƒæœºåˆ¶æ˜¯ï¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®å±æ€§æ—¶ï¼Œæ‰§è¡Œåˆå§‹åŒ–ä»£ç å—ï¼Œç„¶åå°†ç»“æœç¼“å­˜ã€‚ä¹‹åçš„æ‰€æœ‰è®¿é—®ï¼Œéƒ½ä¼šç›´æ¥è¿”å›è¿™ä¸ªè¢«ç¼“å­˜çš„ç»“æœã€‚å®ƒå¯¹åˆå§‹åŒ–é€»è¾‘çš„æ‰§è¡Œæ˜¯â€œä¸€æ¬¡æ€§â€ä¸”â€œå¿ è¯šâ€çš„ã€‚</p>
<h4 data-id="heading-7">3. â€œå¯å¤æ´»â€çš„ Fragment</h4>
<p>å½“ç”¨æˆ· A é€€å‡ºç™»å½•æ—¶ï¼Œ<code>HomeActivity</code>è¢«é”€æ¯ã€‚Activity ä¼š remove æ‰å®ƒç®¡ç†çš„ <code>MineFragment</code>ã€‚ä½†è¿™é‡Œçš„ remove ä»…ä»…æ˜¯é”€æ¯äº† Fragment çš„è§†å›¾ï¼ˆViewï¼‰å¹¶å°†å…¶ä» FragmentManager ä¸­ç§»é™¤ã€‚ç”±äº <code>HomeTabUtils</code>è¿™ä¸ªé•¿å¯¿çš„å•ä¾‹ä»ç„¶å¼ºå¼•ç”¨ç€ <code>MineFragment</code>çš„å®ä¾‹ï¼Œæ‰€ä»¥è¿™ä¸ª Fragment å¯¹è±¡æœ¬èº«å¹¶æœªè¢«åƒåœ¾å›æ”¶ã€‚å®ƒä¾ç„¶æ´»åœ¨å†…å­˜ä¸­ï¼Œå¹¶ä¸”å…¶å†…éƒ¨çš„ ViewModel å’Œ LiveData ä¹Ÿå®Œå¥½åœ°ä¿å­˜ç€ç”¨æˆ· A çš„æ•°æ®ã€‚</p>
<h4 data-id="heading-8">4. â€œå€’çŒâ€çš„å‘ç”Ÿ</h4>
<p>å½“ç”¨æˆ· B ç™»å½•åï¼Œä¸€ä¸ªæ–°çš„ <code>HomeActivity</code>è¢«åˆ›å»ºã€‚å½“å®ƒå†æ¬¡è®¿é—® <code>HomeTabUtils.tabMine</code>æ—¶ï¼Œ<code>by lazy</code>æ¯«ä¸çŠ¹è±«åœ°è¿”å›äº†ä¹‹å‰ç¼“å­˜çš„ã€å±äºç”¨æˆ· A çš„é‚£ä¸ª <code>MineFragment</code>å®ä¾‹ã€‚è¿™ä¸ªâ€œæ—§â€å®ä¾‹è¢«é‡æ–°æ·»åŠ åˆ°æ–°çš„ Activity ä¸­ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸæ–¹æ³• <code>onViewCreated</code>è¢«è°ƒç”¨ã€‚åœ¨è¿™é‡Œï¼ŒUI ä»£ç é‡æ–°è®¢é˜…äº† ViewModel ä¸­çš„ LiveDataï¼Œè€Œ LiveData çš„ç²˜æ€§ç‰¹æ€§ä¼šç«‹å³å°†å®ƒå†…éƒ¨ç¼“å­˜çš„æ—§æ•°æ®ï¼ˆç”¨æˆ· A çš„ä¿¡æ¯ï¼‰æ¨é€ç»™è§‚å¯Ÿè€…ã€‚<strong>æ•°æ®å€’çŒï¼Œç”±æ­¤å‘ç”Ÿï¼</strong> â€‹</p>
<p><strong>æ ¸å¿ƒåŸå› ä¸€å¥è¯æ€»ç»“</strong>ï¼šæˆ‘ä»¬é”™è¯¯åœ°å°†ä¸€ä¸ªæœ¬åº”è·Ÿéšç‰¹å®šä¸Šä¸‹æ–‡ï¼ˆç”¨æˆ·ä¼šè¯ï¼‰ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶ï¼ˆFragmentï¼‰ï¼Œé€šè¿‡ <code>by lazy</code>â€œæå‡â€å¹¶é”å®šåœ¨äº†ä¸€ä¸ªå…¨å±€åº”ç”¨ç”Ÿå‘½å‘¨æœŸçš„å•ä¾‹ä¸­ã€‚</p>
<h3 data-id="heading-9">ä¸‰ã€è§£å†³æ–¹æ¡ˆï¼šæ–©æ–­ä¸å½“çš„æŒæœ‰å…³ç³»</h3>
<p>ç†è§£äº†åŸå› ï¼Œè§£å†³æ–¹æ¡ˆå°±æ°´åˆ°æ¸ æˆäº†ã€‚æˆ‘ä»¬å¿…é¡»æ‰“ç ´è¿™ç§ä¸æ°å½“çš„å¼ºå¼•ç”¨å…³ç³»ï¼Œç¡®ä¿æ¯æ¬¡éœ€è¦æ—¶éƒ½èƒ½è·å¾—ä¸€ä¸ªå…¨æ–°çš„ã€å¹²å‡€çš„ Fragment å®ä¾‹ã€‚</p>
<p>æœ€ç›´æ¥çš„ä¿®æ”¹å°±æ˜¯å°† <code>HomeTabUtils</code>çš„è§’è‰²ä»â€œå®ä¾‹æŒæœ‰è€…â€è½¬å˜ä¸ºâ€œå®ä¾‹å·¥å‚â€ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// HomeTabUtils.kt (ä¿®æ”¹å)</span>
<span class="hljs-keyword">object</span> HomeTabUtils {
    <span class="hljs-comment">// ä¸å†ä½¿ç”¨ by lazy ç¼“å­˜å®ä¾‹ï¼Œè€Œæ˜¯æä¾›ä¸€ä¸ªåˆ›å»ºæ–°å®ä¾‹çš„æ–¹æ³•</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createMineFragment</span><span class="hljs-params">()</span></span>: MineFragment {
        <span class="hljs-keyword">return</span> MineFragment()
    }
    <span class="hljs-comment">// å…¶ä»– Fragment åŒç†...</span>
}

<span class="hljs-comment">// HomeActivity.kt (ä¿®æ”¹å)</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">HomeActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)
        <span class="hljs-comment">// ...</span>
        <span class="hljs-comment">// æ¯æ¬¡éƒ½åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å®ä¾‹</span>
        supportFragmentManager.beginTransaction()
            .add(R.id.fragment_container, HomeTabUtils.createMineFragment())
            .commit()
    }
}
</code></pre>
<p>é€šè¿‡è¿™ä¸ªç®€å•çš„ä¿®æ”¹ï¼Œæˆ‘ä»¬ä¿è¯äº†æ¯æ¬¡ç”¨æˆ·ç™»å½•ååˆ›å»º <code>HomeActivity</code>æ—¶ï¼Œéƒ½ä¼šå¾—åˆ°ä¸€ä¸ªå…¨æ–°çš„ <code>MineFragment</code>ï¼Œä»è€Œå½»åº•è§£å†³äº†æ•°æ®æ±¡æŸ“çš„é—®é¢˜ã€‚</p>
<h3 data-id="heading-10">å››ã€æ·±åº¦æŒ–æ˜ï¼šby lazy ç©¶ç«Ÿæ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>è¦å½»åº•ææ‡‚è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¿…é¡»æŠŠ <code>val myProperty by lazy { ... }</code>è¿™è¡Œä»£ç æ‹†å¼€æ¥çœ‹ï¼Œç†è§£ä¸¤ä¸ªå…³é”®éƒ¨åˆ†ï¼š<code>by</code>å…³é”®å­— å’Œ <code>lazy</code>å‡½æ•°ã€‚</p>
<h4 data-id="heading-11">1. by å…³é”®å­—ï¼šå§”æ‰˜æ¨¡å¼çš„è¯­æ³•ç³–</h4>
<p><code>by</code>æ˜¯ Kotlin ä¸­ä¸€ä¸ªæå…¶å¼ºå¤§çš„å…³é”®å­—ï¼Œç”¨äºå®ç° <strong>å±æ€§å§”æ‰˜ï¼ˆProperty Delegationï¼‰</strong> ã€‚</p>
<p><strong>å§”æ‰˜æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ</strong> â€‹ è¿™æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œä¸€ä¸ªå¯¹è±¡ï¼ˆå§”æ‰˜è€…ï¼‰å°†å®ƒçš„ä¸€éƒ¨åˆ†èŒè´£è½¬äº¤ç»™å¦ä¸€ä¸ªè¾…åŠ©å¯¹è±¡ï¼ˆä»£ç†ï¼‰æ¥å®Œæˆã€‚å°±åƒä½ æ‰¾äº†ä¸€ä½ç§˜ä¹¦æ¥å¸®ä½ ç®¡ç†æ—¥ç¨‹ï¼Œä½ åªéœ€è¦å‘ç§˜ä¹¦ä¸‹è¾¾æŒ‡ä»¤ï¼Œå…·ä½“å¦‚ä½•å®‰æ’ã€æé†’ï¼Œéƒ½ç”±ç§˜ä¹¦æ¥å¤„ç†ã€‚</p>
<p>åœ¨ Kotlin ä¸­ï¼Œå±æ€§ä¹Ÿå¯ä»¥å°†å®ƒçš„ <code>get()</code>å’Œ <code>set()</code>è®¿é—®å™¨çš„é€»è¾‘å§”æ‰˜ç»™ä¸€ä¸ªä»£ç†å¯¹è±¡ã€‚è¦æˆä¸ºä¸€ä¸ªåˆæ ¼çš„å±æ€§ä»£ç†ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»éµå¾ªä¸€å®šçš„çº¦å®šï¼ˆæä¾› <code>getValue</code>å’Œ <code>setValue</code>æ–¹æ³•ï¼‰ã€‚</p>
<p>å½“æˆ‘ä»¬å†™ä¸‹ <code>val myProperty by myDelegate</code>æ—¶ï¼ŒKotlin ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å¯¹ <code>myProperty</code>çš„è®¿é—®è½¬æ¢ä¸ºå¯¹ <code>myDelegate</code>ç›¸åº”æ–¹æ³•çš„è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ä½ å†™çš„ä»£ç ï¼š</span>
val myProperty: <span class="hljs-function">String <span class="hljs-keyword">by</span> <span class="hljs-title">MyDelegate</span>()

<span class="hljs-comment">// ç¼–è¯‘å™¨å®é™…ç”Ÿæˆçš„ï¼ˆç®€åŒ–ç‰ˆï¼‰ï¼š</span>
<span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªéšè—çš„ä»£ç†å®ä¾‹</span>
<span class="hljs-keyword">private</span> val myProperty$<span class="hljs-built_in">delegate</span></span> = MyDelegate()
<span class="hljs-comment">// 2. å±æ€§çš„ getter å§”æ‰˜ç»™ä»£ç†</span>
val myProperty: <span class="hljs-function">String
    <span class="hljs-title">get</span>()</span> = myProperty$<span class="hljs-built_in">delegate</span>.getValue(<span class="hljs-keyword">this</span>, ::myProperty)
</code></pre>
<p><strong><code>by</code>å…³é”®å­—çš„æ„ä¹‰</strong>ï¼šå®ƒå°†å±æ€§è®¿é—®çš„å…¬å…±é€»è¾‘ï¼ˆå¦‚å»¶è¿Ÿåˆå§‹åŒ–ã€æ•°æ®ç»‘å®šã€SharedPreferences è¯»å†™ç­‰ï¼‰ä»æ¯ä¸ªå±æ€§ä¸­æŠ½ç¦»å‡ºæ¥ï¼Œå°è£…åˆ°å¯å¤ç”¨çš„ä»£ç†ç±»ä¸­ï¼Œæå¤§åœ°æé«˜äº†ä»£ç çš„å¤ç”¨æ€§å’Œå¯è¯»æ€§ã€‚</p>
<h5 data-id="heading-12">by å…³é”®å­—çš„åŒé‡å§”æ‰˜é­”æ³•</h5>
<p>æˆ‘ä»¬çš„ Bug ç”± <code>by lazy</code>è€Œèµ·ï¼Œä½†å…¶æ ¹æºåœ¨äºå¯¹ <code>by</code>å…³é”®å­—èƒ½åŠ›çš„è¯¯ç”¨ã€‚<code>by</code>æ˜¯ Kotlin ä¸­å®ç°â€œå§”æ‰˜æ¨¡å¼â€çš„æ ¸å¿ƒï¼Œå®ƒæœ‰ä¸¤ç§æˆªç„¶ä¸åŒä½†åŒæ ·å¼ºå¤§çš„ç”¨é€”ã€‚</p>
<h6 data-id="heading-13">å§”æ‰˜ä¹‹ä¸€ï¼šå±æ€§å§”æ‰˜ (Property Delegation)</h6>
<p>è¿™æ­£æ˜¯æˆ‘ä»¬æ¡ˆä¾‹ä¸­é‡åˆ°çš„åœºæ™¯ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå±æ€§çš„ <code>get()</code>å’Œ <code>set()</code>è®¿é—®å™¨é€»è¾‘ï¼Œå§”æ‰˜ç»™ä¸€ä¸ªä»£ç†å¯¹è±¡æ¥ç®¡ç†ã€‚</p>
<h6 data-id="heading-14">1. ä¸ºä»€ä¹ˆéœ€è¦å±æ€§å§”æ‰˜ï¼Ÿ</h6>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰ <code>by lazy</code>ï¼Œæˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å®ç°å»¶è¿Ÿåˆå§‹åŒ–ï¼Œä»£ç ä¼šæ˜¯è¿™æ ·ï¼Œæ—¢å•°å—¦åˆçº¿ç¨‹ä¸å®‰å…¨ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _myHeavyObject: HeavyObject? = <span class="hljs-literal">null</span>
<span class="hljs-keyword">val</span> myHeavyObject: HeavyObject
    <span class="hljs-keyword">get</span>() {
        <span class="hljs-keyword">if</span> (_myHeavyObject == <span class="hljs-literal">null</span>) {
            _myHeavyObject = HeavyObject()
        }
        <span class="hljs-keyword">return</span> _myHeavyObject!!
    }
</code></pre>
<p>å†æ¯”å¦‚ï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸€ä¸ªå±æ€§æŒä¹…åŒ–åˆ° <code>SharedPreferences</code>ã€‚æ¯ä¸ªè¿™æ ·çš„å±æ€§éƒ½éœ€è¦é‡å¤ç¼–å†™ get/set é€»è¾‘ï¼Œè°ƒç”¨ <code>prefs.getBoolean/putString</code>ç­‰æ–¹æ³•ï¼Œå……æ»¡äº†æ¨¡æ¿ä»£ç ã€‚</p>
<p>å±æ€§å§”æ‰˜å°±æ˜¯ä¸ºäº†å°†è¿™äº›é€šç”¨çš„å±æ€§å­˜å–è¡Œä¸ºï¼ˆå¦‚å»¶è¿Ÿåˆå§‹åŒ–ã€æ•°æ®æŒä¹…åŒ–ã€æ•°æ®ç»‘å®šç­‰ï¼‰å°è£…åˆ°å¯å¤ç”¨çš„ä»£ç†ç±»ä¸­ã€‚</p>
<h6 data-id="heading-15">2.Â <code>by lazy</code>çš„å·¥ä½œåŸç†å›é¡¾</h6>
<p><code>by lazy</code>æ­£æ˜¯å±æ€§å§”æ‰˜çš„ç»å…¸å®ç°ï¼š</p>
<ul>
<li><code>lazy { ... }</code>ï¼šä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª Lambdaï¼Œå¹¶è¿”å›ä¸€ä¸ªå®ç°äº† <code>Lazy&lt;T&gt;</code>æ¥å£çš„å±æ€§ä»£ç†å¯¹è±¡ã€‚</li>
<li><code>by</code>å…³é”®å­—ï¼šå°†å±æ€§çš„ <code>get()</code>è®¿é—®å™¨é€»è¾‘ï¼Œå®Œå…¨å§”æ‰˜ç»™è¿™ä¸ª <code>Lazy&lt;T&gt;</code>ä»£ç†å¯¹è±¡ã€‚</li>
<li><code>Lazy&lt;T&gt;</code>ä»£ç†ï¼šå†…éƒ¨é€šè¿‡â€œåŒé‡æ£€æŸ¥é”å®šâ€æ¨¡å¼ï¼Œä¿è¯åˆå§‹åŒ– Lambda åªåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶è¢«çº¿ç¨‹å®‰å…¨åœ°æ‰§è¡Œä¸€æ¬¡ï¼Œç„¶åç¼“å­˜ç»“æœã€‚</li>
</ul>
<h6 data-id="heading-16">3. å¦‚ä½•æé«˜å¤ç”¨æ€§ï¼Ÿä»¥ SharedPreferences ä¸ºä¾‹</h6>
<p><code>by</code>å…³é”®å­—çš„å¨åŠ›åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå·±çš„å§”æ‰˜ã€‚æ¯”å¦‚åˆ›å»ºä¸€ä¸ª <code>Preference</code>å§”æ‰˜æ¥å°è£… <code>SharedPreferences</code>çš„è¯»å†™ï¼Œå°±èƒ½è®©ä»£ç å˜å¾—æå…¶ç®€æ´ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// ä¸€ä¸ªå¯å¤ç”¨çš„ Preference ä»£ç†ç±»</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Preference</span>&lt;<span class="hljs-type">T</span>&gt;(...) : ReadWriteProperty&lt;Any?, T&gt; {
    <span class="hljs-comment">// ... å†…éƒ¨å°è£…äº†æ‰€æœ‰ get/set é€»è¾‘ ...</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getValue</span><span class="hljs-params">(...)</span></span> { <span class="hljs-comment">/* ... */</span> }
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setValue</span><span class="hljs-params">(...)</span></span> { <span class="hljs-comment">/* ... */</span> }
}

<span class="hljs-comment">// åœ¨ä»£ç ä¸­å£°æ˜å¼åœ°ä½¿ç”¨</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SettingsManager</span>(context: Context) {
    <span class="hljs-comment">// ä¸€è¡Œä»£ç æå®š SharedPreferences è¯»å†™ï¼Œé€»è¾‘è¢«å®Œç¾å¤ç”¨ï¼</span>
    <span class="hljs-keyword">var</span> isNightModeOn: <span class="hljs-built_in">Boolean</span> <span class="hljs-keyword">by</span> Preference(context, <span class="hljs-string">"key_night_mode"</span>, <span class="hljs-literal">false</span>)
    <span class="hljs-keyword">var</span> username: String? <span class="hljs-keyword">by</span> Preference(context, <span class="hljs-string">"key_username"</span>, <span class="hljs-literal">null</span>)
}
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>Preference</code>ä»£ç†æˆä¸ºäº†ä¸€ä¸ªå¯æ’æ‹”ã€å¯å¤ç”¨çš„èƒ½åŠ›å•å…ƒï¼Œæå¤§åœ°å‡å°‘äº†æ¨¡æ¿ä»£ç ï¼Œæé«˜äº†ä»£ç çš„å¯è¯»æ€§å’Œå¥å£®æ€§ã€‚</p>
<h6 data-id="heading-17">å§”æ‰˜ä¹‹äºŒï¼šæ¥å£/ç±»å§”æ‰˜ (Interface/Class Delegation)</h6>
<p><code>by</code>å…³é”®å­—çš„ç¬¬äºŒä¸ªå¼ºå¤§ç”¨é€”ï¼Œæ˜¯è®©ä¸€ä¸ªç±»å°†æŸä¸ªæ¥å£çš„å®ç°ï¼Œå®Œå…¨å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡ã€‚è¿™å®Œç¾è¯ é‡Šäº†è®¾è®¡æ¨¡å¼ä¸­çš„â€œç»„åˆä¼˜äºç»§æ‰¿â€åŸåˆ™ã€‚</p>
<h6 data-id="heading-18">1. ä¸ºä»€ä¹ˆéœ€è¦æ¥å£å§”æ‰˜ï¼Ÿ</h6>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šæˆ‘ä»¬æœ‰ä¸€ä¸ªæ’­æ”¾å™¨æ¥å£ <code>Player</code>ï¼Œå’Œä¸€ä¸ªå…·ä½“çš„å®ç° <code>MediaPlayer</code>ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ª <code>SmartPlayer</code>ï¼Œå®ƒä¹Ÿéœ€è¦å®ç° <code>Player</code>æ¥å£ï¼Œä½†åœ¨æ’­æ”¾å‰è¦å¢åŠ ä¸€ä¸ªâ€œæ‰“å°æ—¥å¿—â€çš„è£…é¥°åŠŸèƒ½ã€‚ä¼ ç»Ÿæ–¹å¼ä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å†™å¾ˆå¤šæ¨¡æ¿ä»£ç ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartPlayer</span> : <span class="hljs-type">Player</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> player = MediaPlayer()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">play</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"æ—¥å¿—ï¼šå‡†å¤‡æ’­æ”¾..."</span>) <span class="hljs-comment">// å¢åŠ çš„è£…é¥°é€»è¾‘</span>
        player.play(url) <span class="hljs-comment">// æ‰‹åŠ¨è½¬å‘è°ƒç”¨</span>
    }

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">stop</span><span class="hljs-params">()</span></span> {
        player.stop() <span class="hljs-comment">// å³ä½¿ stop é€»è¾‘å®Œå…¨ä¸€æ ·ï¼Œä¹Ÿå¿…é¡»æ‰‹åŠ¨è½¬å‘</span>
    }

    <span class="hljs-comment">// å¦‚æœ Player æ¥å£æœ‰ 10 ä¸ªæ–¹æ³•ï¼Œå°±å¾—å†™ 10 ä¸ªè½¬å‘æ–¹æ³•ï¼</span>
}
</code></pre>
<h6 data-id="heading-19">2.Â <code>by</code>å…³é”®å­—çš„ä¼˜é›…è§£å†³ä¹‹é“</h6>
<p>ä½¿ç”¨æ¥å£å§”æ‰˜ï¼Œä»£ç ä¼šå˜å¾—æå…¶ç®€æ´ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// Player, MediaPlayer æ¥å£å’Œç±»åŒä¸Š</span>

<span class="hljs-comment">// ä½¿ç”¨ `by` å…³é”®å­—è¿›è¡Œæ¥å£å§”æ‰˜</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">SmartPlayer</span>(<span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> player: Player) : Player <span class="hljs-keyword">by</span> player {

    <span class="hljs-comment">// ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦é‡å†™é‚£äº›éœ€è¦æ·»åŠ â€œé¢å¤–é€»è¾‘â€çš„æ–¹æ³•</span>
    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">play</span><span class="hljs-params">(url: <span class="hljs-type">String</span>)</span></span> {
        println(<span class="hljs-string">"æ—¥å¿—ï¼šå‡†å¤‡æ’­æ”¾..."</span>) <span class="hljs-comment">// å¢åŠ çš„è£…é¥°é€»è¾‘</span>
        player.play(url) <span class="hljs-comment">// è°ƒç”¨åŸå§‹å®ç°</span>
    }

    <span class="hljs-comment">// stop() æ–¹æ³•å‘¢ï¼Ÿ</span>
    <span class="hljs-comment">// ä¸éœ€è¦å†™äº†ï¼å› ä¸º `Player by player` è¿™å¥ä»£ç ï¼Œ</span>
    <span class="hljs-comment">// ç¼–è¯‘å™¨ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆ `stop()` æ–¹æ³•ï¼Œå…¶å®ç°å°±æ˜¯ç›´æ¥è°ƒç”¨ `player.stop()`.</span>
}

<span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> smartPlayer = SmartPlayer(MediaPlayer())
    smartPlayer.play(<span class="hljs-string">"music.mp3"</span>) <span class="hljs-comment">// ä¼šæ‰“å°æ—¥å¿—å¹¶æ’­æ”¾</span>
    smartPlayer.stop() <span class="hljs-comment">// ä¼šç›´æ¥è°ƒç”¨ MediaPlayer çš„ stop</span>
}
</code></pre>
<p><strong>æ¥å£å§”æ‰˜çš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>æè‡´çš„å¤ç”¨</strong>ï¼š<code>Player by player</code>è®© <code>SmartPlayer</code>è‡ªåŠ¨æ‹¥æœ‰äº† <code>MediaPlayer</code>å¯¹ <code>Player</code>æ¥å£çš„æ‰€æœ‰å®ç°ï¼Œæˆ‘ä»¬åªéœ€å…³å¿ƒéœ€è¦ä¿®æ”¹çš„éƒ¨åˆ†ã€‚</li>
<li><strong>è½»æ¾å®ç°è£…é¥°å™¨æ¨¡å¼</strong>ï¼šå¯ä»¥éå¸¸çµæ´»åœ°ä¸ºä¸€ä¸ªå·²æœ‰å¯¹è±¡â€œè£…é¥°â€ä¸Šæ–°åŠŸèƒ½ï¼Œè€Œæ— éœ€ä½¿ç”¨ç»§æ‰¿ã€‚</li>
</ul>
<h4 data-id="heading-20">2. lazy å‡½æ•°ï¼šä¸€ä¸ªé«˜æ•ˆçš„å±æ€§ä»£ç†å·¥å‚</h4>
<p>ç°åœ¨æˆ‘ä»¬æ¥çœ‹ <code>lazy</code>ã€‚å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ¥æ”¶ä¸€ä¸ªåˆå§‹åŒ– Lambda è¡¨è¾¾å¼ï¼Œç„¶åè¿”å›ä¸€ä¸ªå®ç°äº† <code>Lazy&lt;T&gt;</code>æ¥å£çš„ <strong>å±æ€§ä»£ç†å¯¹è±¡</strong>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-type">&lt;T&gt;</span> <span class="hljs-title">lazy</span><span class="hljs-params">(initializer: () -&gt; <span class="hljs-type">T</span>)</span></span>: Lazy&lt;T&gt; = SynchronizedLazyImpl(initializer)
</code></pre>
<p>è¿™ä¸ª <code>Lazy&lt;T&gt;</code>æ¥å£å¾ˆç®€å•ï¼Œåªæœ‰ä¸€ä¸ªæ ¸å¿ƒæˆå‘˜ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lazy</span>&lt;<span class="hljs-type">out T</span>&gt; {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> value: T <span class="hljs-comment">// è·å–å€¼çš„å±æ€§</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">isInitialized</span><span class="hljs-params">()</span></span>: <span class="hljs-built_in">Boolean</span> <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²åˆå§‹åŒ–</span>
}
</code></pre>
<p>è€Œ <code>Lazy&lt;T&gt;</code>æ¥å£æœ¬èº«å°±æ»¡è¶³äº†å±æ€§å§”æ‰˜çš„è¦æ±‚ï¼Œå› ä¸ºå®ƒæœ‰ä¸€ä¸ªåä¸º <code>value</code>çš„åªè¯»å±æ€§ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨å°†å¯¹ <code>Lazy&lt;T&gt;</code>çš„ <code>getValue()</code>è°ƒç”¨æ˜ å°„åˆ°è®¿é—®å…¶ <code>value</code>å±æ€§ä¸Šã€‚</p>
<p>æ‰€ä»¥ï¼Œ<code>by lazy</code>çš„å®Œæ•´é“¾è·¯æ˜¯ï¼š</p>
<ol>
<li><code>lazy { ... }</code>å‡½æ•°è¢«è°ƒç”¨ï¼Œåˆ›å»ºäº†ä¸€ä¸ª <code>SynchronizedLazyImpl</code>ä»£ç†å¯¹è±¡ã€‚</li>
<li><code>by</code>å…³é”®å­—å°†å±æ€§çš„ <code>get()</code>è®¿é—®å™¨é€»è¾‘å§”æ‰˜ç»™äº†è¿™ä¸ªä»£ç†å¯¹è±¡ã€‚</li>
<li>å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è®¿é—®å±æ€§æ—¶ï¼Œå®é™…ä¸Šæ˜¯è°ƒç”¨äº†ä»£ç†å¯¹è±¡çš„ <code>getValue()</code>ï¼Œè¿™ä¼šè§¦å‘å…¶å†…éƒ¨çš„ <code>value</code>å±æ€§çš„ <code>get()</code>æ–¹æ³•ã€‚</li>
<li><code>SynchronizedLazyImpl</code>çš„ <code>get()</code>æ–¹æ³•å†…ï¼Œä½¿ç”¨äº†ç²¾å¦™çš„ <strong>â€œåŒé‡æ£€æŸ¥é”å®šï¼ˆDouble-Checked Lockingï¼‰â€</strong> â€‹ æ¨¡å¼æ¥ç¡®ä¿çº¿ç¨‹å®‰å…¨å’Œé«˜æ•ˆã€‚</li>
</ol>
<h4 data-id="heading-21">3. SynchronizedLazyImpl æºç è§£æ</h4>
<p>è®©æˆ‘ä»¬å†æ¬¡æ·±å…¥ <code>SynchronizedLazyImpl</code>çš„æºç ï¼Œè¿™æ¬¡å¸¦ç€å¯¹å§”æ‰˜æ¨¡å¼çš„ç†è§£ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// SynchronizedLazyImpl.kt (Kotlin æ ‡å‡†åº“ç®€åŒ–ç‰ˆ)</span>
<span class="hljs-keyword">internal</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SynchronizedLazyImpl</span>&lt;<span class="hljs-type">T</span>&gt;(
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> initializer: () -&gt; T, <span class="hljs-comment">// æ„é€ æ—¶ä¼ å…¥çš„åˆå§‹åŒ–ä»£ç å—</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lock: Any? = <span class="hljs-literal">null</span>
) : Lazy&lt;T&gt;, Serializable {

    <span class="hljs-meta">@Volatile</span> <span class="hljs-keyword">private</span> <span class="hljs-keyword">var</span> _value: Any? = UNINITIALIZED_VALUE <span class="hljs-comment">// å†…éƒ¨ç¼“å­˜ï¼ŒVolatile ä¿è¯å¤šçº¿ç¨‹å¯è§æ€§</span>
    
    <span class="hljs-comment">// è¿™å°±æ˜¯ Lazy&lt;T&gt; æ¥å£çš„å®ç°ï¼Œä¹Ÿæ˜¯å±æ€§å§”æ‰˜çš„æ ¸å¿ƒ</span>
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> value: T
        <span class="hljs-keyword">get</span>() {
            <span class="hljs-keyword">val</span> v1 = _value
            <span class="hljs-comment">// ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼šå¦‚æœå·²åˆå§‹åŒ–ï¼Œç›´æ¥è¿”å›ã€‚è¿™æ˜¯æœ€é«˜é¢‘çš„è·¯å¾„ï¼Œæ— é”ï¼Œæ€§èƒ½é«˜ã€‚</span>
            <span class="hljs-keyword">if</span> (v1 !== UNINITIALIZED_VALUE) {
                <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
                <span class="hljs-keyword">return</span> v1 <span class="hljs-keyword">as</span> T
            }

            <span class="hljs-comment">// å¦‚æœæœªåˆå§‹åŒ–ï¼Œè¿›å…¥åŒæ­¥å—</span>
            <span class="hljs-keyword">return</span> synchronized(lock ?: <span class="hljs-keyword">this</span>) {
                <span class="hljs-keyword">val</span> v2 = _value
                <span class="hljs-comment">// ç¬¬äºŒæ¬¡æ£€æŸ¥ï¼šé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ç¬¬ä¸€æ¬¡æ£€æŸ¥åï¼Œåœ¨è¿™é‡Œæ’é˜Ÿå¯¼è‡´é‡å¤åˆå§‹åŒ–</span>
                <span class="hljs-keyword">if</span> (v2 !== UNINITIALIZED_VALUE) {
                    <span class="hljs-meta">@Suppress(<span class="hljs-string">"UNCHECKED_CAST"</span>)</span>
                    v2 <span class="hljs-keyword">as</span> T
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-comment">// å”¯ä¸€ä¸€æ¬¡æ‰§è¡Œåˆå§‹åŒ–çš„åœ°æ–¹</span>
                    <span class="hljs-keyword">val</span> typedValue = initializer()
                    <span class="hljs-comment">// ç¼“å­˜ç»“æœï¼Œå¹¶ä½¿å…¶å¯¹å…¶ä»–çº¿ç¨‹å¯è§ï¼ˆå¾—ç›Šäº Volatileï¼‰</span>
                    _value = typedValue
                    typedValue
                }
            }
        }
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p><strong>æºç æ€»ç»“</strong>ï¼š</p>
<ul>
<li><strong>DCL æ¨¡å¼</strong>ï¼šé€šè¿‡ä¸¤æ¬¡ <code>if</code>åˆ¤æ–­å’Œä¸€æ¬¡ <code>synchronized</code>ï¼Œå®ç°äº†æè‡´çš„æ€§èƒ½ä¼˜åŒ–ã€‚å¤§éƒ¨åˆ†æ—¶é—´ï¼Œæˆ‘ä»¬èµ°çš„éƒ½æ˜¯æ— é”çš„å¿«é€Ÿè·¯å¾„ã€‚</li>
<li><strong><code>@Volatile</code></strong>ï¼šè¿™æ˜¯ DCL æ¨¡å¼æ­£ç¡®å·¥ä½œçš„åŸºçŸ³ï¼Œå®ƒç¦æ­¢äº†æŒ‡ä»¤é‡æ’åºï¼Œå¹¶ä¿è¯äº† <code>_value</code>çš„ä¿®æ”¹èƒ½ç«‹åˆ»è¢«å…¶ä»–çº¿ç¨‹çœ‹åˆ°ã€‚</li>
<li><strong>åŸå­æ€§</strong>ï¼šçœŸæ­£çš„åˆå§‹åŒ–å’Œèµ‹å€¼æ“ä½œè¢« <code>synchronized</code>å—åŒ…è£¹ï¼Œä¿è¯äº†å…¶åŸå­æ€§ï¼Œæœç»äº†å¤šçº¿ç¨‹ç«äº‰é—®é¢˜ã€‚</li>
</ul>
<h3 data-id="heading-22">äº”ã€è¿½æœ¬æº¯æºï¼šä¸ºä»€ä¹ˆ Kotlin è¦è®¾è®¡ by lazyï¼Ÿ</h3>
<p>ç†è§£äº†åŸç†åï¼Œæˆ‘ä»¬å›åˆ°ä¸€ä¸ªæ›´æ ¹æœ¬çš„é—®é¢˜ï¼šKotlin ä¸ºä»€ä¹ˆè¦å¤§è´¹å‘¨ç« åœ°è®¾è®¡å‡ºè¿™ä¸ªç‰¹æ€§ï¼Ÿ</p>
<h4 data-id="heading-23">1. è§£å†³é€šç”¨ç¼–ç¨‹ç—›ç‚¹</h4>
<p>åœ¨ <code>by lazy</code>å‡ºç°å‰ï¼Œå®ç°â€œå»¶è¿Ÿåˆå§‹åŒ–â€é€šå¸¸å¾ˆç¬¨æ‹™ï¼š</p>
<ul>
<li><strong>æ‰‹åŠ¨å®ç°</strong>ï¼šå¼€å‘è€…éœ€è¦è‡ªå·±å†™ <code>if (instance == null)</code>çš„æ¨¡æ¿ä»£ç ï¼Œå¹¶ä¸”è¦æ‰‹åŠ¨å¤„ç†å¤šçº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œè¿™æ—¢ç¹çåˆå®¹æ˜“å‡ºé”™ã€‚</li>
<li><strong>ä½¿ç”¨å¯ç©ºç±»å‹</strong>ï¼šå°†å±æ€§å£°æ˜ä¸º <code>var obj: MyObject? = null</code>ï¼Œå¯¼è‡´æ¯æ¬¡ä½¿ç”¨éƒ½å¿…é¡»å¤„ç† nullï¼Œä»£ç å¯è¯»æ€§å·®ï¼Œä¸”å¤±å»äº†ä¸å¯å˜æ€§ï¼ˆ<code>val</code>ï¼‰å¸¦æ¥çš„å¥½å¤„ã€‚</li>
<li><strong><code>lateinit</code>çš„å±€é™</strong>ï¼š<code>lateinit</code>è™½ç„¶è§£å†³äº†éƒ¨åˆ†é—®é¢˜ï¼Œä½†å®ƒå¿…é¡»æ˜¯ <code>var</code>ï¼Œä¸æ”¯æŒåŸå§‹ç±»å‹ï¼Œä¸”æ— çº¿ç¨‹å®‰å…¨ä¿è¯ï¼Œè®¿é—®æœªåˆå§‹åŒ–çš„ <code>lateinit</code>å˜é‡è¿˜ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚</li>
</ul>
<h4 data-id="heading-24">2. æ‹¥æŠ±å‡½æ•°å¼ä¸ä¸å¯å˜æ€§</h4>
<p>Kotlin æ˜¯ä¸€é—¨æ¨å´‡ <strong>ä¸å¯å˜æ€§ï¼ˆImmutabilityï¼‰</strong> â€‹ çš„ç°ä»£è¯­è¨€ã€‚<code>by lazy</code>å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå»¶è¿Ÿè®¡ç®—çš„å±æ€§å£°æ˜ä¸º <code>val</code>ã€‚è¿™æ„ä¹‰é‡å¤§ï¼Œå› ä¸ºå®ƒä¿è¯äº†å±æ€§ä¸€æ—¦è¢«èµ‹å€¼ï¼Œå…¶å¼•ç”¨å°±ä¸å¯å†æ›´æ”¹ï¼Œè®©ä»£ç çŠ¶æ€æ›´å¯æ§ï¼Œæ›´æ˜“äºæ¨ç†å’Œæµ‹è¯•ã€‚</p>
<h4 data-id="heading-25">3. æå‡ä»£ç çš„å£°æ˜å¼é£æ ¼</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> myObject <span class="hljs-keyword">by</span> lazy { createMyObject() }
</code></pre>
<p>è¿™è¡Œä»£ç æœ¬èº«å°±æ˜¯ä¸€ç§å£°æ˜ï¼Œå®ƒæ¸…æ™°åœ°è¡¨è¾¾äº† â€œmyObject æ˜¯ä¸€ä¸ªå»¶è¿Ÿåˆå§‹åŒ–çš„å€¼ï¼Œå®ƒçš„åˆ›å»ºæ–¹å¼åœ¨ä»£ç å—ä¸­å®šä¹‰â€ã€‚å¼€å‘è€…åªéœ€å…³å¿ƒâ€œæ˜¯ä»€ä¹ˆâ€å’Œâ€œæ€ä¹ˆæ¥â€ï¼Œè€Œæ— éœ€å…³å¿ƒâ€œä½•æ—¶åˆå§‹åŒ–â€ã€â€œçº¿ç¨‹æ˜¯å¦å®‰å…¨â€è¿™äº›åº•å±‚ç»†èŠ‚ã€‚è¿™è®©ä»£ç çš„æ„å›¾æ›´åŠ æ˜ç¡®ï¼Œå¯è¯»æ€§æ›´é«˜ã€‚</p>
<h3 data-id="heading-26">å…­ã€ç»“è®ºä¸åæ€</h3>
<p>è¿™æ¬¡â€œæ•°æ®å€’çŒâ€äº‹ä»¶ä¸ºæˆ‘ä»¬æ•²å“äº†è­¦é’Ÿï¼Œå¹¶å¸¦æ¥äº†å‡ ç‚¹æ·±åˆ»çš„å¯ç¤ºï¼š</p>
<ol>
<li><strong>æ•¬ç•ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šåœ¨ Android å¼€å‘ä¸­ï¼Œå¿…é¡»æ—¶åˆ»å¯¹ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¿æŒæ•¬ç•ã€‚Activityã€Fragmentã€View ç­‰å¯¹è±¡éƒ½ä¸ç‰¹å®šçš„ UI ä¸Šä¸‹æ–‡ç»‘å®šï¼Œä¸åº”å°†å®ƒä»¬çš„å®ä¾‹æ³„éœ²åˆ°ç”Ÿå‘½å‘¨æœŸæ›´é•¿çš„ä½œç”¨åŸŸä¸­ï¼ˆå¦‚ Applicationã€å•ä¾‹ï¼‰ã€‚</li>
<li><strong>ç†è§£å·¥å…·æœ¬è´¨</strong>ï¼š<code>by lazy</code>æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å·¥å…·ï¼Œå®ƒå®Œç¾é€‚ç”¨äºåˆå§‹åŒ–é‚£äº›æ˜‚è´µã€æ— çŠ¶æ€ã€ä¸”ç”Ÿå‘½å‘¨æœŸåº”ä¸æŒæœ‰è€…ä¸€è‡´çš„å¯¹è±¡ï¼ˆå¦‚æ•°æ®åº“å®ä¾‹ã€ç½‘ç»œå®¢æˆ·ç«¯ã€å¸¸é‡å·¥å…·ç±»ç­‰ï¼‰ã€‚ä½†å®ƒä¸æ˜¯â€œé“¶å¼¹â€ï¼Œé”™ç”¨åœ¨æœ‰çŠ¶æ€ä¸”ç”Ÿå‘½å‘¨æœŸçŸ­æš‚çš„ UI ç»„ä»¶ä¸Šï¼Œå°±ä¼šå¼•å‘é—®é¢˜ã€‚</li>
<li><strong>åŒºåˆ†â€œå·¥å‚â€ä¸â€œä»“åº“â€</strong> ï¼šåœ¨è®¾è®¡å·¥å…·ç±»æ—¶ï¼Œè¦æ˜ç¡®å®ƒçš„èŒè´£ã€‚å®ƒæ˜¯åº”è¯¥åƒâ€œå·¥å‚â€ä¸€æ ·ï¼Œæ¯æ¬¡éƒ½ç”Ÿäº§æ–°äº§å“ï¼›è¿˜æ˜¯åƒâ€œä»“åº“â€ä¸€æ ·ï¼Œå­˜å‚¨å’Œç®¡ç†å”¯ä¸€çš„å®ä¾‹ï¼Ÿå¯¹äº Fragment è¿™ç§ UI ç»„ä»¶ï¼Œæˆ‘ä»¬æ˜¾ç„¶éœ€è¦çš„æ˜¯ä¸€ä¸ªâ€œå·¥å‚â€ã€‚</li>
</ol>
<p>ä¸‹æ¬¡å½“ä½ æƒ³å½“ç„¶åœ°å†™ä¸‹ <code>by lazy</code>æ—¶ï¼Œä¸å¦¨å¤šé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šâ€œè¿™ä¸ªå±æ€§çš„ç”Ÿå‘½å‘¨æœŸï¼ŒçœŸçš„åº”è¯¥å’Œå®ƒæ‰€åœ¨çš„ç±»å®Œå…¨ä¸€è‡´å—ï¼Ÿâ€ å¯¹è¿™ä¸ªé—®é¢˜çš„å®¡æ…æ€è€ƒï¼Œæˆ–è®¸èƒ½å¸®ä½ é¿å…ä¸‹ä¸€æ¬¡â€œè¡€æ¡ˆâ€çš„å‘ç”Ÿã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ]]></title>    <link>https://juejin.cn/post/7578460753210933275</link>    <guid>https://juejin.cn/post/7578460753210933275</guid>    <pubDate>2025-12-01T09:49:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753210933275" data-draft-id="7578709098255155238" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2025-12-01T09:49:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="AIFrontiers"/> <meta itemprop="url" content="https://juejin.cn/user/4443547050451306"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RAGè¯„æµ‹å®Œæ•´æŒ‡å—ï¼šæŒ‡æ ‡ã€æµ‹è¯•å’Œæœ€ä½³å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4443547050451306/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    AIFrontiers
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:49:22.000Z" title="Mon Dec 01 2025 09:49:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»27åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åŸæ–‡: <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2Fam89yasxAvuYUToEAWNyTA" target="_blank" title="https://mp.weixin.qq.com/s/am89yasxAvuYUToEAWNyTA" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/am89yasxAâ€¦</a></p>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿï¼‰æœ€åˆç”±Facebook AI Researchï¼ˆç°Meta AIï¼‰å›¢é˜Ÿåœ¨è®ºæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2005.11401" target="_blank" title="https://arxiv.org/pdf/2005.11401" ref="nofollow noopener noreferrer">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a> ä¸­æå‡ºï¼Œå¹¶å‘è¡¨äºNeurIPS 2020ã€‚</p>
<p>å¦‚æœä½ æœ‰ä½¿ç”¨RAGåº”ç”¨ï¼Œä½ ä¼šå‘ç°ï¼ŒRAGæ¡†æ¶æ˜¯ä¸€ä¸ªå¤æ‚çš„å·¥ä½œæµï¼ŒåŒ…æ‹¬åˆ†å—ã€æœç´¢ã€ä¸Šä¸‹æ–‡æ‹¼æ¥å’Œå†…å®¹ç”Ÿæˆç­‰æ­¥éª¤ï¼Œä¸€æ—¦ç³»ç»Ÿæœ€ç»ˆå“åº”çš„å†…å®¹ä¸ç¬¦åˆé¢„æœŸï¼Œå¯¹äºé—®é¢˜çš„å®šä½ä¼šéå¸¸å¤æ‚ï¼Œæ˜¯æ¨¡å‹å‡ºç°äº†å¹»è§‰ï¼Ÿè¿˜æ˜¯ä»ä¸€å¼€å§‹å°±æ²¡æœ‰è·å–åˆ°æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿ</p>
<p>è¿™å°±éœ€è¦ä¸€ä¸ªå®Œå–„çš„RAGè¯„ä¼°ä½“ç³»ï¼šè¯„ä¼°RAGç³»ç»Ÿå„ä¸ªæ¨¡å—è¿è¡Œçš„æ•ˆæœï¼Œåœ¨ç”¨æˆ·ä¹‹å‰åˆ†æé—®é¢˜ã€ç”šè‡³æ˜¯é¢„åˆ¤é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« ä¼šå’Œå¤§å®¶è¯¦ç»†èŠèŠï¼Œå¦‚ä½•åœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­è¯„ä¼°RAGç³»ç»Ÿã€‚</p>
<h2 data-id="heading-0">å…¨æ–‡é€Ÿè§ˆ</h2>
<ul>
<li>
<p><strong>åŸºæœ¬æ¦‚å¿µ</strong>ï¼š<strong>RAGç³»ç»Ÿ</strong>èƒ½å¤Ÿä»å¤§é‡çš„è¯­æ–™åº“ä¸­æ£€ç´¢å‡ºä¸è¾“å…¥é—®é¢˜ç›¸å…³çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯ç”Ÿæˆå‡†ç¡®ã€åˆç†çš„å›ç­”, <strong>RAGè¯„ä¼°</strong>ç”¨äºè¯„ä»·RAGç³»ç»Ÿæ€§èƒ½çš„ç³»ç»Ÿæ–¹æ³•ã€‚</p>
</li>
<li>
<p><strong>RAGè¯„ä¼°æ ¸å¿ƒå†…å®¹</strong>ï¼š<strong>æ£€ç´¢</strong>ï¼ˆæŸ¥æ‰¾æœ‰ç”¨ä¿¡æ¯ï¼‰ã€<strong>ç”Ÿæˆ</strong>ï¼ˆç”Ÿæˆæœ€ç»ˆç­”æ¡ˆï¼‰ã€‚</p>
</li>
<li>
<p><strong>æ£€ç´¢è¯„ä¼°</strong>ï¼šåˆ†ä¸ºæ’åºã€ä¸Šä¸‹æ–‡ç›¸å…³æ€§æŒ‡æ ‡ï¼Œå‰è€…å¯ä»¥é‡‡ç”¨Top-Kå¬å›ï¼Œåè€…å¯ä»¥é‡‡ç”¨äººå·¥æˆ–LLMæ¥åˆ¤æ–­ã€‚</p>
</li>
<li>
<p><strong>ç”Ÿæˆè¯„ä¼°</strong></p>
<ul>
<li><strong>æœ‰çœŸå€¼</strong>ï¼šä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§ï¼Œå°†è¾“å‡ºä¸æ­£ç¡®ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚</li>
<li><strong>æ— çœŸå€¼</strong>ï¼šå¯ä»¥æ£€æŸ¥å“åº”çš„å¿ è¯šåº¦ã€å®Œæ•´æ€§ã€è¯­æ°”æˆ–ç»“æ„è´¨é‡</li>
</ul>
</li>
<li>
<p><strong>åˆæˆæµ‹è¯•æ•°æ®</strong>ï¼šä¸€ç§å¸®åŠ©RAGè¯„ä¼°çš„æ–¹æ³•ï¼Œé€šè¿‡ä»çŸ¥è¯†åº“ä¸­ç”Ÿæˆé—®ç­”å¯¹æ¥å®ç°ï¼Œç”¨ä»¥åœ¨æ²¡æœ‰çœŸå®æ•°æ®çš„æƒ…å†µä¸‹å¿«é€Ÿæ„å»ºå’Œæµ‹è¯•é›†ã€‚</p>
</li>
<li>
<p><strong>é²æ£’æ€§æµ‹è¯•å’Œå¯¹æŠ—æ€§æµ‹è¯•</strong>ï¼šç¡®ä¿RAGç³»ç»Ÿåœ¨é¢å¯¹é£é™©è¾“å…¥æˆ–æç«¯æƒ…å†µæ—¶ï¼Œå“åº”ä»ç„¶å®‰å…¨ä¸€è‡´ã€‚é²æ£’æ€§æµ‹è¯•è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚å¯¹æŠ—æ€§æµ‹è¯•ä¾§é‡ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œæµ‹è¯•RAGç³»ç»Ÿèƒ½å¤ŸæŠµå¾¡æ¶æ„æ”»å‡»æˆ–è¯¯æ“ä½œï¼Œå¹¶ä¿æŠ¤ç”¨æˆ·çš„æ•°æ®å’Œéšç§ã€‚</p>
</li>
</ul>
<h2 data-id="heading-1">åŸºæœ¬æ¦‚å¿µ</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ RAGï¼Ÿ</h3>
<p>RAGä½œä¸ºå½“ä¸‹ä¸»æµçš„LLMåº”ç”¨æ¡†æ¶ï¼Œå°†å¤–æŒ‚çš„çŸ¥è¯†åº“ï¼ˆå¦‚ç½‘ç»œæ•°æ®ã€ä¼ä¸šç§æœ‰æ–‡æ¡£ï¼‰ã€LLMå†…ç½®çš„çŸ¥è¯†å®Œç¾èåˆï¼Œæœ‰æ•ˆè§£å†³LLMä¸­å­˜åœ¨çš„<strong>ä¿¡æ¯è¿‡æ—¶</strong>ã€<strong>è¾“å‡ºå¹»è§‰ã€è¡Œä¸šæ•°æ®éš”ç¦»</strong>ç­‰ç—›ç‚¹é—®é¢˜ï¼Œäº§ç”Ÿæ›´å‡†ç¡®ã€æ›´æœ‰ç”¨çš„ç»“æœã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¯¹äºä¸€å®¶å…¬å¸çš„å®¢æœæœºå™¨äººï¼ŒLLMæ˜¯å¾ˆéš¾çŸ¥é“è¿™å®¶å…¬å¸çš„äº§å“åŠŸèƒ½ã€ä¸šåŠ¡é€»è¾‘çš„ã€‚ç›¸åï¼ŒRAGç³»ç»Ÿåœ¨ç”¨æˆ·æå‡ºé—®é¢˜æ—¶ï¼Œä¼šæ£€ç´¢å…¬å¸å†…éƒ¨çš„äº§å“æˆ–ä¸šåŠ¡æ–‡æ¡£ï¼Œå°†æ£€ç´¢åˆ°çš„ç›¸å…³å†…å®¹äº¤ç»™LLMï¼Œç”±LLMç”Ÿæˆæœ€ç»ˆçš„ç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5233561057fc4817948a380077453f20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=nL7Qk9rtycvtrazbkCUFGVxnKbc%3D" alt="1.PNG" loading="lazy"/></p>
<p>RAG ç³»ç»Ÿå¯ä»¥åˆ†ä¸ºä¸¤å¤§æ­¥éª¤ï¼š</p>
<ul>
<li>Rï¼ˆRetrievalï¼‰: å°è¯•æ‰¾åˆ°ä¸ç”¨æˆ·æŸ¥è¯¢æœ€ç›¸å…³çš„ä¿¡æ¯ç‰‡æ®µï¼Œä¿¡æ¯çš„æ¥æºåŒ…æ‹¬æ–‡æ¡£å­˜å‚¨åº“ã€çŸ¥è¯†åº“ã€SQLæŸ¥è¯¢æ•°æ®åº“ç­‰ã€‚</li>
<li>Gï¼ˆGenerateï¼‰: åˆ©ç”¨æ£€ç´¢åˆ°çš„ä¿¡æ¯ç”Ÿæˆç­”æ¡ˆ</li>
</ul>
<p>éœ€è¦æé†’çš„æ˜¯ï¼ŒRAGç³»ç»Ÿæ˜¯ä¸€ç§è®¾è®¡ç†å¿µï¼Œè€Œéå•ä¸€çš„å®ç°å½¢å¼ã€‚æ¯”å¦‚ï¼Œ<strong>æ£€ç´¢</strong>éƒ¨åˆ†çš„å®ç°å½¢å¼æ˜¯å¤šæ ·çš„ï¼Œå¦‚è¯­ä¹‰æœç´¢ã€å…³é”®è¯æœç´¢ã€SQLæŸ¥è¯¢ï¼Œç”šè‡³æ˜¯APIè°ƒç”¨ï¼Œä¸ºæ¨¡å‹æä¾›æœ‰ç”¨çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚</p>
<p>åœ¨ä¼ä¸šåº”ç”¨ä¸­ï¼Œæ£€ç´¢å®é™…ä¸Šæ˜¯å¯¹å†…éƒ¨çš„å¤§é‡éç»“æ„åŒ–æ–‡æ¡£è¿›è¡Œæœç´¢çš„ç³»ç»Ÿï¼ŒåŒ…æ‹¬æ–‡æ¡£çš„å‡†å¤‡ã€å­˜å‚¨ã€ç´¢å¼•æ–¹å¼å’Œæ’åºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a02a6b6d24d472cb7f4038d354226a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=zdIcfbtd0Jy7Dw3LasVG%2FMn1Ksk%3D" alt="2.PNG" loading="lazy"/></p>
<p>æ£€ç´¢å®Œæˆåï¼Œéœ€è¦ä¸ºLLMæ„å»ºå®Œæ•´çš„æç¤ºä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>ç”¨æˆ·çš„é—®é¢˜</li>
<li>æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡</li>
<li>ç³»ç»Ÿæç¤ºï¼Œçº¦å®šæ¨¡å‹æŒ‰ç…§ä»€ä¹ˆæ ¼å¼è¾“å‡ºç­”æ¡ˆ</li>
</ul>
<h3 data-id="heading-3">ä»€ä¹ˆæ˜¯ RAG è¯„ä¼°ï¼Ÿ</h3>
<p>å®šä¹‰ï¼šæ—¨åœ¨è¡¡é‡RAGç³»ç»Ÿåœ¨å®é™…åº”ç”¨ä¸­çš„æ€§èƒ½è¡¨ç°ã€‚æ¯”å¦‚ï¼šæ˜¯å¦æå–äº†æ­£ç¡®çš„ä¿¡æ¯ï¼Ÿæ˜¯å¦ç»™å‡ºäº†æ­£ç¡®çš„ç­”æ¡ˆï¼Ÿè¾“å‡ºç»“æœæ˜¯å¦å¯ä¿¡ï¼Ÿä¸€ä¸ªåˆç†çš„è¯„ä¼°ä½“ç³»æœ‰åŠ©äºå›ç­”è¿™äº›é—®é¢˜ï¼Œå¹¶æŒ‡å¯¼å¼€å‘å·¥ç¨‹å¸ˆåšå‡ºæ›´å¥½çš„è®¾è®¡å†³ç­–ã€‚</p>
<p>RAGç³»ç»Ÿå°±åƒä¸€å°ç²¾å¯†çš„æœºå™¨ï¼Œè¦è®©å®ƒç¨³å®šè¿è½¬ï¼Œæ¯ä¸ªå…³é”®ç¯èŠ‚éƒ½è¦åšæ‰å®ï¼šæ–‡æ¡£çš„åˆ†å—å’Œå­˜å‚¨æ–¹å¼ã€ä½¿ç”¨çš„åµŒå…¥æ¨¡å‹ã€æ£€ç´¢é€»è¾‘ã€æç¤ºæ ¼å¼ã€LLM ç‰ˆæœ¬ç­‰ç­‰ã€‚</p>
<p>ä¸€å¥—é è°±çš„è¯„ä¼°æ–¹æ³•ï¼Œå°±åƒè¿™å°ç²¾å¯†æœºå™¨çš„è°ƒè¯•å·¥å…·ç®±ï¼Œèƒ½è§£å†³å¾ˆå¤šå®é™…é—®é¢˜ï¼š</p>
<ul>
<li>å¿«é€Ÿç»™å‡ºä¸åŒæ–¹æ¡ˆçš„å¯¹æ¯”æ•ˆæœï¼Œæ¯”å¦‚å“ªç§æ–‡æ¡£åˆ†å—æ–¹å¼æ‰¾ç­”æ¡ˆæ›´å‡†</li>
<li>è¿½è¸ªå“ªäº›å› ç´ èƒ½æé«˜æˆ–é™ä½æ•ˆæœ</li>
<li>ç²¾å‡†å®šä½é—®é¢˜ï¼Œå½“ç³»ç»Ÿç­”éæ‰€é—®æˆ–å‡ºé”™æ—¶ï¼Œèƒ½æ›´å¿«æ‰¾åˆ°ç—‡ç»“åœ¨å“ªå„¿ï¼Œè°ƒè¯•èµ·æ¥æ›´çœå¿ƒã€‚</li>
</ul>
<p>è¯´äº†è¿™ä¹ˆå¤šï¼Œåˆ°åº•è¯¥å¦‚ä½•è¯„ä¼°å‘¢ï¼Ÿä¸€ç§ç®€å•çš„æ–¹å¼ï¼Œå¯¹RAGç³»ç»Ÿè¿›è¡Œç«¯åˆ°ç«¯è¯„ä¼°ï¼Œé‡ç‚¹å…³æ³¨æœ€ç»ˆç­”æ¡ˆçš„è´¨é‡ï¼Œè¿™ç§æ–¹å¼å°½ç®¡ä¹Ÿå¯è¡Œï¼Œä½†ä¸åˆ©äºé—®é¢˜çš„æ’æŸ¥ã€æ•ˆæœçš„ä¼˜åŒ–ã€‚</p>
<p>æ›´ä¼˜çš„æ–¹å¼æ˜¯ï¼Œå°†æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µåˆ†å¼€è¯„æµ‹ï¼Œè¿™å¯¹äºè°ƒè¯•ä¹Ÿè‡³å…³é‡è¦ã€‚å½“ä½ å¾—åˆ°é”™è¯¯ç­”æ¡ˆæ—¶ï¼Œä½ é¦–å…ˆåº”è¯¥é—®è‡ªå·±ï¼šå“ªé‡Œå‡ºé”™äº†ï¼Ÿ</p>
<ul>
<li>ç³»ç»Ÿæ˜¯å¦æ£€ç´¢åˆ°æ­£ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</li>
<li>ä¸Šä¸‹æ–‡æ­£ç¡®äº†ï¼Œæ¨¡å‹æ˜¯ä¸æ˜¯å‡ºç°äº†å¹»è§‰</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†åˆ†åˆ«ä»‹ç»æ£€ç´¢å’Œç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</p>
<h2 data-id="heading-4">æ£€ç´¢é˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸‹é¢å°†ä»‹ç»<strong>æœ‰çœŸå€¼ã€äººå·¥æ ‡æ³¨å’ŒLLM</strong>ä¸‰ç§è¯„ä¼°æ–¹æ³•ã€‚</p>
<h3 data-id="heading-5">æœ‰çœŸå€¼çš„è¯„ä¼°æ–¹æ³•</h3>
<p>æ£€ç´¢è¯„ä¼°å¹¶éä¸€ä¸ªæ–°è¯é¢˜ï¼Œæ‰€æœ‰æœç´¢å¼•æ“çš„èƒŒåéƒ½æœ‰ä¸€å¥—è¿™æ ·çš„è¯„ä¼°æœºåˆ¶ï¼Œæ¯”å¦‚ç™¾åº¦ã€è°·æ­Œï¼Œè¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„æœºå™¨å­¦ä¹ åº”ç”¨åœºæ™¯ã€‚åœ¨è¿™å¥—è¯„ä¼°æœºåˆ¶çš„å¼•å¯¼ä¸‹ï¼Œå·¥ç¨‹å¸ˆå¯ä»¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„äº§å“æœåŠ¡ã€‚ç±»ä¼¼çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™å¥—æ–¹æ³•å¤ç”¨åˆ°RAGç³»ç»Ÿä¸­ã€‚</p>
<p>ä½ éœ€è¦æœ‰ä¸€ä¸ª<strong>çœŸå€¼æ•°æ®é›†ï¼Œå¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéœ€è¦å®šä¹‰åŒ…å«ç­”æ¡ˆçš„æ­£ç¡®æ¥æºï¼Œå¯ä»¥æ˜¯æ–‡æ¡£IDã€æ•°æ®å—ID æˆ–é“¾æ¥ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ecbaa7c1403441383fda724de7cc30f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=t7EXlLaBEIN3ysNxJ9oSj9R%2F6KE%3D" alt="3.png" loading="lazy"/></p>
<p>åœ¨ä¿¡æ¯æ£€ç´¢æœ¯è¯­ä¸­ï¼Œè¿™äº›è¢«ç§°ä¸º<strong>ç›¸å…³</strong>æ–‡æ¡£ï¼Œå³ä¸ºç”¨æˆ·æŸ¥è¯¢æä¾›æ­£ç¡®ã€æœ‰æ•ˆä¿¡æ¯çš„æ¡ç›®ã€‚</p>
<p>æœ‰äº†è¿™ä»½çœŸå€¼æ•°æ®é›†ï¼Œå°±å¯ä»¥åœ¨ç³»ç»Ÿä¸­è¿è¡ŒæŸ¥è¯¢ï¼Œå¹¶é€šè¿‡æ¯”è¾ƒæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸é¢„æœŸæ•°æ®å—ï¼Œæ¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦èƒ½å¤Ÿæ‰¾åˆ°é¢„æœŸçš„ä¸Šä¸‹æ–‡ã€‚ä¸ºäº†é‡åŒ–ç»“æœï¼Œå¯ä»¥è®¡ç®—æ ‡å‡†çš„ä¿¡æ¯æ£€ç´¢æŒ‡æ ‡ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€äº›ä¾‹å­ï¼Œåç»­å°†ä»¥ä¸“æ çš„å½¢å¼ï¼Œè¯¦ç»†ä»‹ç»å„ç±»è¯„ä¼°æŒ‡æ ‡çš„åŸç†ã€å®ç°ï¼š</p>

























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>ç²¾ç¡®åº¦@k</td><td>åœ¨æ£€ç´¢åˆ°çš„å‰kä¸ªç»“æœä¸­ï¼Œæœ‰å¤šå°‘æ˜¯çœŸæ­£ç›¸å…³çš„ï¼Ÿ</td></tr><tr><td>å¬å›@k</td><td>åœ¨æ‰€æœ‰ç›¸å…³æ–‡æ¡£ä¸­ï¼Œæœ‰å¤šå°‘ä¸ªæ–‡æ¡£è¢«æ£€ç´¢åˆ°æ’åå‰kä¹‹åˆ—ï¼Ÿ</td></tr><tr><td>å‘½ä¸­ç‡</td><td>å‰kä¸ªç»“æœä¸­æ˜¯å¦è‡³å°‘å‡ºç°è¿‡ä¸€ä¸ªç›¸å…³æ¡ç›®ï¼Ÿï¼ˆæ˜¯/å¦ï¼‰</td></tr><tr><td>NDCG@k</td><td>å½’ä¸€åŒ–æŠ˜æ‰£ç´¯è®¡æ”¶ç›Šï¼šç”¨æ¥è¡¡é‡æ’åå‰kä¸ªæ£€ç´¢ç»“æœçš„ç›¸å…³æ€§å’Œæ’åºåˆç†æ€§</td></tr></tbody></table>
<p>ä»¥<strong>ç²¾ç¡®åº¦@k</strong>æŒ‡æ ‡ä¸ºä¾‹ï¼Œå…¶è®¡ç®—ç¤ºæ„å›¾å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c80093fbacd4a6ebbba6ed279fd4b72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=gxQH2XPQBRAEEZVoaikLuPc50oI%3D" alt="4.png" loading="lazy"/></p>
<p>è¿™äº›è¯„ä¼°æŒ‡æ ‡èƒ½å¸®åŠ©æˆ‘ä»¬æœ‰æ•ˆå¯¹æ¯”ä¸åŒçš„æœç´¢é…ç½®ï¼Œæ¯”å¦‚é‡æ’è§„åˆ™ã€åµŒå…¥æ–¹æ³•ï¼Œè¿˜èƒ½å®šä½é—®é¢˜ã€‚ç¼ºç‚¹æ˜¯ï¼Œæ„å»ºçœŸå®çš„æµ‹è¯•æ•°æ®é›†ç‰¹åˆ«è€—æ—¶ï¼Œéœ€è¦äººå·¥æŠŠæ¯ä¸ªæµ‹è¯•é—®é¢˜å¯¹åº”åˆ°æ­£ç¡®çš„å‚è€ƒå†…å®¹ä¸Šã€‚</p>
<h3 data-id="heading-6">äººå·¥æ ‡æ³¨ç›¸å…³æ€§</h3>
<p>è¿™æ˜¯ä¸€ç§ç›¸å¯¹ç®€å•çš„æ–¹æ³•ï¼Œåœ¨æ£€ç´¢åè¯„ä¼°ç»“æœã€‚</p>
<p>æ— éœ€é¢„å…ˆå®šä¹‰ç›¸å…³æ–‡æ¡£ï¼Œè®©ç³»ç»ŸæŒ‰åŸæ ·è¿è¡Œæµ‹è¯•æŸ¥è¯¢ï¼Œç„¶åæ‰‹åŠ¨è¯„ä¼°ç»“æœã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢ï¼Œéƒ½è¦æ£€æŸ¥ç³»ç»Ÿçš„æ£€ç´¢å†…å®¹ï¼Œå¹¶åˆ†é…ä¸€ä¸ªæ ‡ç­¾ï¼Œä¾‹å¦‚ï¼š<em>ç›¸å…³</em>ã€<em>éƒ¨åˆ†ç›¸å…³ ã€ä¸ç›¸å…³</em>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e1ad812663a4ebc9dcdb3e2183e5aa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=O5Z0R5XY%2Bk%2B29c%2B3q3dtSbd%2F6V8%3D" alt="5.png" loading="lazy"/></p>
<p>è®¸å¤šå›¢é˜Ÿåœ¨å®è·µä¸­ä¹Ÿæ˜¯ç”¨è¿™ç§æ–¹æ³•è¯„ä¼°æ£€ç´¢æ•ˆæœçš„ã€‚ä¾‹å¦‚ï¼Œè°·æ­Œåˆ¶å®šäº†è¯¦å°½çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%2Fhowsearchworks%2Fhow-search-works%2Frigorous-testing%2F" target="_blank" title="https://www.google.com/search/howsearchworks/how-search-works/rigorous-testing/" ref="nofollow noopener noreferrer">å†…éƒ¨å‡†åˆ™</a> ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%2Fhowsearchworks%2Fhow-search-works%2Frigorous-testing%2F%25EF%25BC%2589%25E4%25BE%259B%25E4%25BA%25BA%25E5%25B7%25A5%25E8%25AF%2584%25E5%2588%2586%25E5%2591%2598%25E5%258F%2582%25E8%2580%2583%25E3%2580%2582" target="_blank" title="https://www.google.com/search/howsearchworks/how-search-works/rigorous-testing/%EF%BC%89%E4%BE%9B%E4%BA%BA%E5%B7%A5%E8%AF%84%E5%88%86%E5%91%98%E5%8F%82%E8%80%83%E3%80%82" ref="nofollow noopener noreferrer">www.google.com/search/howsâ€¦</a></p>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯çµæ´»ï¼Œå¯ä»¥è¯„ä¼°æ•´ä¸ªæ£€ç´¢æµç¨‹åœ¨å®é™…è¿è¡Œä¸­çš„æ•ˆæœï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>è¯„ä¼°ç”¨æˆ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…çœ‹åˆ°çš„æ£€ç´¢è´¨é‡ã€‚</li>
<li>æ‰¾å‡ºæ€§èƒ½æå·®çš„æŸ¥è¯¢</li>
<li>æ›´å¥½åœ°ç†è§£è¾¹ç•Œæƒ…å†µå’Œæ­§ä¹‰æŸ¥è¯¢</li>
</ul>
<p>ç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œæ— æ³•è®¡ç®—å¬å›ç‡ï¼Œå› ä¸ºæ²¡æœ‰çœŸå€¼ã€‚</p>
<h3 data-id="heading-7">LLMè¯„å®¡å‘˜è¯„ä¼°ç›¸å…³æ€§</h3>
<p>LLMè¯„å®¡å‘˜ä½¿ç”¨ç”¨å¤§è¯­è¨€æ¨¡å‹ï¼Œåœ¨è¯„ä¼°æç¤ºè¯çš„å¼•å¯¼ä¸‹ï¼Œè¯„ä»·RAGç³»ç»Ÿå“åº”çš„ç»“æœã€‚æ¯”å¦‚ï¼Œå¯ä»¥ç»™LLMå®šåˆ¶æç¤ºè¯ï¼Œè®©å®ƒåˆ¤æ–­æŸä¸ªå›å¤æœ‰æ²¡æœ‰å¸®åŠ©ï¼Œæˆ–è€…æ˜¯å¦ç¬¦åˆç‰¹å®šçš„è§„åˆ™è¦æ±‚ã€‚</p>
<p>ä¸‹é¢ï¼Œå°†ä¸ºå¤§å®¶ä»‹ç»LLMè¯„å®¡å‘˜çš„ä¸¤ç§æŠ€æœ¯æ–¹æ¡ˆã€‚</p>
<h4 data-id="heading-8">å¯¹æ•°æ®å—è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¯ä»¥æŠŠç”¨æˆ·çš„é—®é¢˜å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸€èµ·ç»™åˆ°LLMè¯„å®¡å‘˜ï¼Œè®©å®ƒæ¥åˆ¤æ–­ä¿¡æ¯å—å’Œç”¨æˆ·é—®é¢˜æ˜¯å¦ç›¸å…³ã€‚</p>
<p>LLMè¯„å®¡å‘˜ç»™å‡ºçš„åˆ¤æ–­ç»“æœæœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<ul>
<li>ç®€å•çš„äºŒåˆ†ç±»æ ‡ç­¾ï¼Œç›´æ¥æ ‡è®°<em>ç›¸å…³ã€</em> <em>ä¸ç›¸å…³</em></li>
<li>ç»™å‡ºä¸€ä¸ªå…·ä½“çš„ç›¸å…³æ€§åˆ†æ•°</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3227c6ca72b94edd847c9cdb81bdb22b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=9Z45Phx6vYMKsepSsMX2rVVe3XM%3D" alt="6.png" loading="lazy"/></p>
<p>è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–LLMè¯„ä¼°æ–¹æ³•ï¼Œä¾‹å¦‚ï¼ŒåŸºäºåµŒå…¥çš„è¯­ä¹‰ç›¸ä¼¼åº¦ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ•°å€¼åˆ†æ•°ï¼Œåæ˜ æŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ•°æ®å—åœ¨è¯­ä¹‰ä¸Šçš„ç›¸ä¼¼ç¨‹åº¦ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRAGç³»ç»Ÿä¸€èˆ¬ä¼šå¯¹å•æ¬¡æŸ¥è¯¢è¿”å›å¤šä¸ªæ•°æ®å—ï¼Œè¿™æ„å‘³ç€éœ€è¦å¯¹æ¯ä¸ªæ•°æ®å—å•ç‹¬è¿›è¡Œè¯„åˆ†ã€‚</p>
<p><strong>ä¸¾ä¸ªç®€å•çš„ä¾‹å­</strong>ï¼šå‡è®¾å…³äºé¦™è•‰çš„æŸ¥è¯¢æ£€ç´¢åˆ°ä¸‰ä¸ªçŸ­æ–‡æœ¬å—ã€‚æ¯ä¸ªæ–‡æœ¬å—éƒ½æ˜¯ä¸€ä¸ªå¥å­ï¼Œå¯èƒ½æ¥è‡ªä¸åŒçš„æ–‡æ¡£ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cf7f32774df47899c01e73296135e25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=swAWDm2mySNSkTtq0w4038dQMjk%3D" alt="7.png" loading="lazy"/></p>
<p>ç„¶åï¼Œé‡‡ç”¨LLMè¯„å®¡å‘˜ä¸ºæ¯ä¸ªæ•°æ®å—åˆ†é…ä¸€ä¸ªç›¸å…³æ€§åˆ†æ•°ï¼Œå…¶ä¸­ 1 è¡¨ç¤ºé«˜åº¦ç›¸å…³ï¼Œ0 è¡¨ç¤ºå®Œå…¨ä¸ç›¸å…³ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸Šå›¾ä¸­çš„<strong>Chunk 1</strong>åŒ…å«æœ‰å…³é¦™è•‰å¥åº·ç›Šå¤„çš„ç›¸å…³ä¿¡æ¯ï¼Œå¾—1åˆ†ã€‚ä½†<strong>Chunk 3</strong>è¿™æ ·çš„å†…å®¹ä¸ç”¨æˆ·çš„æŸ¥è¯¢æ— ç›¸å…³æ€§ï¼Œå¾—0åˆ†ã€‚</p>
<p>ä¸€æ—¦è¯„ä¼°å®Œæ¯ä¸ªæ•°æ®å—çš„ç›¸å…³æ€§ä¹‹åï¼Œå°±å¯ä»¥æ±‡æ€»ç»“æœï¼Œè¯„ä¼°æœ¬æ¬¡æŸ¥è¯¢çš„æ•´ä½“æ£€ç´¢è´¨é‡ã€‚ æœ‰ä¸‰ç§å®ç°æ–¹å¼ï¼š</p>
<ul>
<li><strong>äºŒå…ƒå‘½ä¸­</strong>ï¼šæ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªæ•°æ®å—è¾¾åˆ°äº†ç›¸å…³æ€§é˜ˆå€¼ï¼Ÿ</li>
<li><strong>ç›¸å…³æ•°æ®å—å æ¯”</strong>ï¼šæ£€ç´¢åˆ°çš„æ•°æ®å—ä¸­ï¼Œç›¸å…³çš„æ•°æ®å—å æ¯”æ˜¯å¤šå°‘ï¼Ÿ</li>
<li><strong>å¹³å‡ç›¸å…³æ€§å¾—åˆ†</strong>ï¼šæ€»ä½“è€Œè¨€ï¼Œè¿™äº›å†…å®¹å—çš„ç›¸å…³æ€§å¦‚ä½•ï¼Ÿ</li>
</ul>
<p>æˆ‘ä»¬ä»¥å¹³å‡ç›¸å…³æ€§å¾—åˆ†ä¾‹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œåˆ†åˆ«æ˜¯å…³äºé¦™è•‰å’ŒåœŸè±†çƒ¹é¥ªçš„æŸ¥è¯¢ï¼Œä»Relevanceæ¥çœ‹ï¼Œå…³äºé¦™è•‰çš„é—®é¢˜ï¼Œå¾—åˆ°äº†æ›´å¤šç›¸å…³çš„æ•°æ®å—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d00be7ea04344b0ada8fa345be6d620~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=AfPmLDzJZK6l16gX0%2FL4skk5rQs%3D" alt="8.png" loading="lazy"/></p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬å¯ä»¥æ±‡æ€»æ¯ä¸ªæŸ¥è¯¢åœ¨å¤šä¸ªæ£€ç´¢æ–‡æœ¬å—ä¸‹çš„ç›¸å…³æ€§å¾—åˆ†ï¼Œä»è€Œè®¡ç®—å‡ºæ•´ä¸ªæµ‹è¯•æ•°æ®é›†ã€æˆ–ç‰¹å®šæ—¶é—´æ®µå†…æŸ¥è¯¢çš„ç›¸å…³æ€§æ‰“åˆ†ã€‚</p>
<h4 data-id="heading-9">å¯¹ä¸Šä¸‹æ–‡è¯„ä¼°ç›¸å…³æ€§</h4>
<p>å¦‚æœæ£€ç´¢ç³»ç»Ÿè¿”å›çš„ä¸Šä¸‹æ–‡å¾ˆçŸ­ï¼Œæˆ–è€…å¾ˆå®¹æ˜“å°†æ‰€æœ‰æ•°æ®å—æ‰“åŒ…æˆä¸€ä¸ªä¸Šä¸‹æ–‡å—ï¼Œå¯ä»¥è·³è¿‡æŒ‰å—è¯„åˆ†ï¼Œç›´æ¥è¯„ä¼°æ•´ä¸ªä¸Šä¸‹æ–‡ã€‚åªéœ€è¦ä¸ºLLMè®¾ç½®æç¤ºè¯å°±è¡Œï¼Œå¦‚ï¼š</p>
<blockquote>
<p>å¸®æˆ‘åˆ¤æ–­æ£€ç´¢åˆ°çš„å†…å®¹æ˜¯å¦åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯å›ç­”ç”¨æˆ·çš„é—®é¢˜ï¼Ÿå¦‚æœæ˜¯ï¼Œåˆ™æ˜¾ç¤ºæœ‰æ•ˆï¼›å¦åˆ™ï¼Œæ˜¾ç¤ºæ— æ•ˆã€‚</p>
</blockquote>
<p>LLMè¯„å®¡å‘˜å°†ä¼šæŒ‰ç…§ä¸Šè¿°æç¤ºè¯è¿”å›ç»“æœï¼Œå¹¶é™„æœ‰ç†ç”±ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36c58ac99642444e9c5fb7503be7ea89~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=lTyd%2FQRmDjLGMYvThQsZllwUL9Y%3D" alt="9.png" loading="lazy"/></p>
<p>ç»è¿‡ä¸Šè¿°ä¸¤ç§æ–¹æ³•çš„ä»‹ç»ï¼Œå¯ä»¥æ€»ç»“LLMè¯„å®¡å‘˜æ–¹æ³•å…·æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>å·¥ä½œé‡ä½</strong>ï¼šåªéœ€è¦æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œæ— æ³•æ ‡æ³¨é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
<li><strong>å¼ºåŸºçº¿æ€§èƒ½</strong>ï¼šLLMå¯ä»¥å¾ˆå¥½åœ°å¤„ç†ç›¸å…³æ€§æ£€æŸ¥ï¼Œç‰¹åˆ«æ˜¯ç®€å•æ˜¯éé—®é¢˜ä¸Šã€‚å¾®è½¯åœ¨è®ºæ–‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2309.10621" target="_blank" title="https://arxiv.org/abs/2309.10621" ref="nofollow noopener noreferrer">Large language models can accurately predict searcher preferences</a>å£°ç§°ï¼ŒGPT-4åœ¨Bingçš„RAGç³»ç»Ÿç›¸å…³æ€§è¯„ä¼°æ–¹é¢ï¼Œè¾¾åˆ°äº†æ¥è¿‘äººç±»çš„æ°´å¹³ã€‚</li>
<li><strong>éå¸¸é€‚åˆå¿«é€Ÿå®éªŒ</strong>ï¼šå½“ä½ è¦å°è¯•æ–°çš„æ•°æ®åº“æˆ–æ£€ç´¢é…ç½®æ—¶ï¼Œå¯ä»¥ç›´æ¥è¿è¡ŒLLMè¯„å®¡å‘˜ï¼Œå¿«é€Ÿæ¯”è¾ƒä¸åŒé…ç½®çš„æ•ˆæœã€‚</li>
<li><strong>é€‚ç”¨äºç”Ÿäº§ç¯å¢ƒç›‘æ§</strong>ï¼šç”±äºä¸éœ€è¦äº‹å…ˆæ„å»ºçœŸå€¼ï¼Œç‰¹åˆ«é€‚åˆç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<h2 data-id="heading-10">å†…å®¹ç”Ÿæˆé˜¶æ®µçš„è¯„ä¼°æ–¹æ³•</h2>
<p>ä¸€æ—¦ç³»ç»Ÿæ£€ç´¢åˆ°ä¸Šä¸‹æ–‡ï¼ŒLLMå°±ä¼šä½¿ç”¨ä¸Šä¸‹æ–‡ã€ç”¨æˆ·çš„é—®é¢˜å’Œç³»ç»Ÿæç¤ºè¯æ¥ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58bd129444074601b6486f121ddaa7cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=0W8u8xnCn1s79pkBbx9Vmob%2FL2w%3D" alt="10.png" loading="lazy"/></p>
<p>æœ‰ä¸¤ç§æ–¹æ³•è¯„ä¼°LLMç”Ÿæˆçš„æœ€ç»ˆç­”æ¡ˆæ˜¯å¦æœ‰æ•ˆï¼š</p>
<ul>
<li><strong>åŸºäºå‚è€ƒçš„è¯„ä¼°</strong> ï¼šå°†RAGç³»ç»Ÿçš„è¾“å‡ºä¸é¢„å®šä¹‰çš„å‚è€ƒç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒï¼Œè¿™å°±éœ€è¦æ„å»ºæ ‡æ³¨å¥½çš„æ•°æ®é›†ï¼Œé€‚ç”¨äºå¼€å‘æˆ–æµ‹è¯•ç¯å¢ƒã€‚</li>
<li><strong>æ— å‚è€ƒè¯„ä¼°</strong> ï¼šå½“æ²¡æœ‰å‚è€ƒç­”æ¡ˆæ—¶ï¼Œä»ç„¶å¯ä»¥ä½¿ç”¨æŒ‡æ ‡æ¥è¯„ä¼°è´¨é‡ï¼Œæ¯”å¦‚æ¨¡å‹å›ç­”ç»“æ„ã€è¯­æ°”ã€é•¿åº¦ã€å®Œæ•´æ€§ã€æ˜¯å¦åŒ…å«å¿…è¦çš„å…è´£å£°æ˜ç­‰ç‰¹å®šå±æ€§ã€‚è¿™ç±»æ–¹æ³•é€‚ç”¨äºç°åº¦é˜¶æ®µå’Œç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3c1f3d3662848c1b27027ee2296fa4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=tNjlP%2FNjGeAbLHLa667x%2BxxecG0%3D" alt="11.png" loading="lazy"/></p>
<h3 data-id="heading-11">åŸºäºå‚è€ƒçš„è¯„ä¼°</h3>
<p>å¦‚æœæ˜¯ç¦»çº¿æµ‹è¯•ï¼Œæœ€å¯é çš„è¯„ä¼°æ–¹æ³•æ˜¯å°†LLMçš„ç­”æ¡ˆä¸æ­£ç¡®çš„ç­”æ¡ˆè¿›è¡Œæ¯”è¾ƒã€‚è¿™äº›åŸºäºå‚è€ƒçš„è¯„ä¼°å¯ä»¥è¡¡é‡ RAGç³»ç»Ÿåœ¨æµ‹è¯•é›†ä¸­ä¸ç†æƒ³ç­”æ¡ˆçš„æ¥è¿‘ç¨‹åº¦ã€‚</p>
<p>ä»ä¸Šé¢çš„æè¿°å¯ä»¥çœ‹å‡ºï¼Œè¦ä½¿ç”¨åŸºäºå‚è€ƒçš„è¯„ä¼°æ–¹æ³•ï¼Œéœ€è¦æ„å»ºä¸€ç³»åˆ—é—®ç­”å¯¹æ•°æ®é›†ï¼Œä½œä¸ºè¯„æµ‹åŸºå‡†ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œå°†é—®é¢˜è¾“å…¥åˆ°RAGç³»ç»Ÿä¸­ï¼Œå¹¶å°†ç”Ÿæˆçš„å“åº”ä¸å‚è€ƒå“åº”è¿›è¡Œæ¯”è¾ƒï¼Œå…·ä½“çš„è®¡åˆ†æ–¹å¼å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>è¯­ä¹‰ç›¸ä¼¼æ€§</strong>: åˆ†åˆ«è·å–ç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆçš„åµŒå…¥å‘é‡ï¼Œè®¡ç®—ä¸¤ä¸ªå‘é‡é—´çš„ç›¸ä¼¼åº¦</li>
<li><strong>LLM ä½œä¸ºè¯„åˆ¤å‘˜</strong>ï¼šè¿™æ˜¯ä¸€ç§ä½¿ç”¨LLMä½œä¸ºåˆ¤æ–­å™¨çš„æ–¹æ³•ï¼Œç”¨æ¥æ¯”è¾ƒç”Ÿæˆç­”æ¡ˆå’Œå‚è€ƒç­”æ¡ˆï¼Œå¹¶è¯„ä¼°RAGå“åº”æ˜¯å¦æ­£ç¡®ã€å®Œæ•´æˆ–ä¸ä¹‹å‰çš„æ–‡æœ¬ç›¸ä¸€è‡´ã€‚</li>
</ul>
<p>ä¸¤ç§æ–¹æ³•æ•ˆæœéƒ½ä¸é”™ã€‚è¯­ä¹‰ç›¸ä¼¼åº¦æ–¹æ³•æ•ˆç‡é«˜ã€å¯æ‰©å±•æ€§é«˜ã€‚åŸºäºLLMçš„æ–¹æ³•èƒ½å¤Ÿæä¾›æ›´ç»†è‡´çš„ä¸Šä¸‹æ–‡æ¨ç†ï¼Œæœ€å¤§çš„ä¼˜åŠ¿å¯ä»¥æ ¹æ®ç”¨æˆ·çš„è¯„ä¼°è§„åˆ™è¿›è¡Œè°ƒæ•´ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªåŸºäºLLMæ–¹æ³•è¯„ä¼°RAGå“åº”æ•ˆæœçš„ç¤ºä¾‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d235357b98584f598606b7c79aa55c05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=zqEE7CTX5M%2FXvkJr65YwA55%2FRYU%3D" alt="12.png" loading="lazy"/></p>
<h3 data-id="heading-12">RAGè¯„æµ‹æ•°æ®é›†</h3>
<p>åœ¨RAGè¯„ä¼°ä¸­ï¼Œè¯„æµ‹æ•°æ®é›†çš„è´¨é‡è‡³å…³é‡è¦ã€‚è‹¥æ•°æ®é›†ä»…å«ç®€å•æˆ–ä¸åˆ‡å®é™…çš„é—®é¢˜ï¼Œæ¨¡å‹éš¾ä»¥åº”å¯¹ç°å®ä¸­çš„å¤æ‚åœºæ™¯ã€‚æµ‹è¯•ç”¨ä¾‹éœ€è´´åˆçœŸå®ç”¨æˆ·é—®é¢˜ã€è¦†ç›–å…³é”®ä¸»é¢˜ï¼Œå°½å¯èƒ½çš„è¦†ç›–å¤šç§åœºæ™¯ï¼Œåªæœ‰è¿™æ ·ï¼Œæ‰èƒ½ç²¾å‡†è¯„ä¼° RAG çš„å®é™…æ€§èƒ½ã€‚</p>
<p>æ„å»ºä¸€ä¸ªå®Œå¤‡çš„æµ‹è¯•é›†éœ€è¦èŠ±è´¹å¤§é‡ç²¾åŠ›ï¼Œå¥½æ¶ˆæ¯æ˜¯ä¸ç”¨å®Œå…¨æ‰‹åŠ¨æ„å»ºï¼Œå¯ä»¥ç›´æ¥ä»çŸ¥è¯†åº“ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œæé«˜æ•ˆç‡ã€‚å®ç°ä¸Šä¹Ÿååˆ†ç®€å•ï¼Œä»æ–‡æ¡£æˆ–çŸ¥è¯†åº“ä¸­é€‰å–æ•°æ®å—ï¼Œè®©LLMå®Œæˆä»¥ä¸‹æ“ä½œï¼š</p>
<ul>
<li>æ ¹æ®æ•°æ®å—çš„å†…å®¹ï¼Œç”Ÿæˆä¸€ä¸ªé—®é¢˜ã€‚</li>
<li>æ ¹æ®æ•°æ®åº“çš„å†…å®¹ï¼Œç”Ÿæˆå¯ä»¥å›ç­”ä¸Šè¿°é—®é¢˜çš„ç­”æ¡ˆã€‚</li>
</ul>
<p>ç”±äºä¸Šè¿°æµ‹è¯•ç”¨ä¾‹æ¥æºçœŸå®çš„RAGçŸ¥è¯†åº“ï¼Œä¹Ÿä¼šæ›´åŠ ç¬¦åˆç”Ÿæˆç¯å¢ƒä¸­çš„ä¸šåŠ¡åœºæ™¯ã€‚æ­¤å¤–ï¼Œä½ å¯ä»¥é€šè¿‡å˜æ¢ç”Ÿæˆé—®é¢˜çš„è¡¨è¿°æ–¹å¼ã€æ¨¡æ‹Ÿä¸åŒçš„è§’è‰²ï¼Œæ¥åŒ¹é…å®é™…åº”ç”¨ä¸­çš„æŸ¥è¯¢é£æ ¼å’Œæ„å›¾ï¼Œè¿›ä¸€æ­¥ä¸°å¯ŒRAGè¯„æµ‹æ•°æ®é›†ã€‚</p>
<p>ä¸€æ—¦æœ‰äº†æˆåƒä¸Šç™¾ä¸ªè¿™æ ·çš„ç¤ºä¾‹ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å¯¹æ¯”ä¸åŒé…ç½®ä¸‹RAGç³»ç»Ÿçš„å¥½åã€‚</p>
<h3 data-id="heading-13">æ— å‚è€ƒè¯„ä¼°</h3>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œç”¨æˆ·å¯ä»¥æå‡ºä»»ä½•é—®é¢˜ï¼Œè€Œäº‹å…ˆå¹¶ä¸çŸ¥é“<strong>æ­£ç¡®ç­”æ¡ˆ</strong>æ˜¯ä»€ä¹ˆã€‚è¿™å°±éœ€è¦<strong>æ— å‚è€ƒçš„è¯„ä¼°æ–¹æ³•</strong>äº†ã€‚</p>
<p>æ¯”å¦‚ä¸€äº›è§„åˆ™æ€§çš„æ£€æŸ¥ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç¼–ç¨‹å®ç°ï¼Œå¦‚</p>
<ul>
<li><strong>é•¿åº¦</strong>ï¼šç­”æ¡ˆæ˜¯å¦ç¬¦åˆè§„å®šçš„å­—æ•°é™åˆ¶ï¼Ÿ</li>
<li><strong>é“¾æ¥æ˜¯å¦å­˜åœ¨</strong>ï¼šæ˜¯å¦åŒ…å«æŒ‡å‘æ¥æºçš„é“¾æ¥ï¼Œä»¥åŠè¯¥é“¾æ¥æ˜¯å¦æœ‰æ•ˆï¼Ÿ</li>
<li><strong>å®Œå…¨åŒ¹é…</strong>ï¼šæ˜¯å¦åŒ…å«ç‰¹å®šå…è´£å£°æ˜ï¼Ÿ</li>
</ul>
<p>å³ä½¿æ²¡æœ‰<strong>æ­£ç¡®ç­”æ¡ˆ</strong>ï¼Œä»ç„¶å¯ä»¥åˆ©ç”¨ä¸€äº›æœ‰ä»·å€¼çš„æ•°æ®ï¼Œå¦‚ç”¨æˆ·çš„é—®é¢˜ã€æ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ä»¥åŠLLMçš„å“åº”ï¼Œé€šè¿‡åˆé€‚çš„æ–¹æ³•æ¥æ¨æ–­å›å¤æœ¬èº«çš„è´¨é‡ï¼Œä»¥ä¸‹æ˜¯ä¸€äº›ä½ å¯ä»¥è¯„ä¼°çš„å†…å®¹ï¼š</p>





























<table><thead><tr><th>æŒ‡æ ‡</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>å¿ è¯šåº¦</td><td>è¡¡é‡LLMçš„å“åº”éµä»æ£€ç´¢çš„ä¸Šä¸‹æ–‡ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œå›ç­”å‡ºç°å¹»è§‰çš„å¯èƒ½å°±è¶Šå¤§ã€‚</td></tr><tr><td>ç­”æ¡ˆç›¸å…³æ€§</td><td>è¡¡é‡LLMçš„å›ç­”å¯¹ç”¨æˆ·é—®é¢˜çš„ç›¸å…³åº¦ã€‚å¾—åˆ†ä½ï¼Œå¯èƒ½ç­”ä¸å¯¹é¢˜</td></tr><tr><td>ä¸Šä¸‹æ–‡ç›¸å…³æ€§</td><td>è¡¡é‡å¬å›çš„ä¸Šä¸‹æ–‡èƒ½å¤Ÿæ”¯æŒç”¨æˆ·é—®é¢˜çš„ç¨‹åº¦ã€‚å¾—åˆ†ä½ï¼Œæ£€ç´¢äº†å¤ªå¤šä¸é—®é¢˜æ— å…³çš„å†…å®¹ã€‚</td></tr><tr><td>è¯­æ°”</td><td>è¯¥å›å¤æ˜¯å¦ç¬¦åˆå“ç‰Œçš„é£æ ¼æˆ–è¯­æ°”ï¼Ÿ</td></tr><tr><td>æ‹’ç»</td><td>RAGç³»ç»Ÿæ˜¯å¦æ‹’ç»å›ç­”</td></tr></tbody></table>
<p>å¯ä»¥ä½¿ç”¨LLMä½œä¸ºè¯„åˆ¤å·¥å…·æ¥è¯„ä¼°ä¸Šè¿°æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œåœ¨è®¡ç®—å¿ è¯šåº¦æ—¶ï¼Œå¯ä»¥å°†é—®é¢˜ã€ä¸Šä¸‹æ–‡å’Œç­”æ¡ˆä¼ é€’LLMï¼Œæç¤ºè¯å¯ä»¥è¿™æ ·å†™ï¼Œ<em>ç­”æ¡ˆ{RAGçš„å“åº”}æ˜¯å¦å¿ å®äºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡{RAGæ£€ç´¢çš„å†…å®¹}ï¼Œè¿˜æ˜¯æ·»åŠ äº†æœªç»è¯å®çš„ä¿¡æ¯ã€é—æ¼äº†é‡è¦ç»†èŠ‚æˆ–ä¸æ¥æºç›¸çŸ›ç›¾ï¼Ÿè¯·è¿”å›å¿ è¯šã€ä¸å¿ è¯šã€‚</em></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ae09bfd908a4d24aa3865194582d0fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=OigV4v9Ok6sWLua%2Bf1RNpbiM%2BYc%3D" alt="13.png" loading="lazy"/></p>
<p>ä¸‹é¢æ˜¯å¿ è¯šåº¦è¯„ä¼°æ–¹æ³•çš„å…·ä½“æ ·ä¾‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110bfab40883401eb8c8078b76513e3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=KHPrTqvvrtd9lcDCmOOWdSGfZCk%3D" alt="14.png" loading="lazy"/></p>
<h2 data-id="heading-14">RAGè¯„ä¼°æ–¹æ³•å°ç»“</h2>
<p>æ ¹æ®æ˜¯å¦å­˜åœ¨çœŸå€¼æƒ…å†µï¼Œæˆ‘ä»¬å¯¹RAGè¯„ä¼°æ–¹æ³•ä½œäº†æ›´è¿›ä¸€æ­¥çš„æ€»ç»“ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä»å·¦åˆ°å³ï¼Œä¾æ¬¡ä»£è¡¨æ£€ç´¢å’Œç”Ÿæˆä¸¤ä¸ªé˜¶æ®µã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/623b7bbad33845639ceaee4f5129fb9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=O0uQCKqtenRjRA6fI2d%2FjnX9fes%3D" alt="15.png" loading="lazy"/></p>
<p><strong>æ£€ç´¢é˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœäº‹å…ˆçŸ¥é“æ¯ä¸ªæŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥è®¡ç®—æ’åºæŒ‡æ ‡ï¼Œå¦‚å¬å›@kã€NDCG@kã€‚</li>
<li>å¦‚æœä¸çŸ¥é“æŸ¥è¯¢çš„ç›¸å…³æ–‡æ¡£ï¼Œå¯ä»¥é€šè¿‡æ£€ç´¢çš„æ•°æ®å—ä¸ç”¨æˆ·è¯·æ±‚çš„ç›¸å…³æ€§æ¥åˆ¤æ–­ï¼Œå…·ä½“çš„æ–¹å¼å¯ä»¥æ˜¯äººå·¥æ ‡æ³¨ã€æˆ–ä½¿ç”¨LLMæ¥åˆ¤æ–­ã€‚</li>
</ul>
<p><strong>å†…å®¹ç”Ÿæˆé˜¶æ®µ</strong>ï¼š</p>
<ul>
<li>å¦‚æœæœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥ä½¿ç”¨LLMè¯„åˆ¤å‘˜æˆ–è¯­ä¹‰ç›¸ä¼¼æ€§æ¥è¯„ä¼°æ­£ç¡®æ€§ã€‚</li>
<li>å³ä½¿æ²¡æœ‰å‚è€ƒç­”æ¡ˆï¼Œå¯ä»¥æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦å¿ å®äºä¸Šä¸‹æ–‡/å®Œæ•´ï¼Œç­”æ¡ˆæ˜¯å¦ä¸é—®é¢˜ç›¸å…³ï¼Œä»¥åŠè¯­æ°”ã€ç»“æ„æˆ–å®‰å…¨æ€§ç­‰è‡ªå®šä¹‰å±æ€§ã€‚</li>
</ul>
<p>è¯¥ä½¿ç”¨å“ªç§è¯„ä¼°æ–¹æ³•ï¼Œè¿™å–å†³äºé¡¹ç›®æ‰€å¤„çš„é˜¶æ®µï¼šå¼€å‘ã€æµ‹è¯•è¿˜æ˜¯ç”Ÿäº§ç¯å¢ƒã€‚</p>
<h2 data-id="heading-15">RAGé«˜çº§è¯„ä¼°æ–¹æ³•</h2>
<p>å¯¹äºä¼ä¸šå†…éƒ¨ä½¿ç”¨çš„RAGç³»ç»Ÿï¼ŒåŸºæœ¬çš„è´¨é‡æ£€æŸ¥é€šå¸¸å°±è¶³å¤Ÿäº†ï¼Œé£é™©ä½ã€èŒƒå›´çª„ã€å¤æ‚åº¦ä¹Ÿæ˜“äºç®¡ç†ã€‚</p>
<p>ä½†è®¸å¤šå®é™…åº”ç”¨ï¼Œæƒ…å†µè¦å¤æ‚çš„å¤šï¼Œå°¤å…¶æ˜¯åŒ»ç–—ä¿å¥ã€é‡‘èæˆ–æ³•å¾‹æ”¯æŒç­‰é¢†åŸŸã€‚è¿™äº›ç³»ç»Ÿé€šå¸¸æœåŠ¡å¤–éƒ¨ç”¨æˆ·ï¼Œå¹¶ä¸”æ¶‰åŠä¿¡ä»»ã€å‡†ç¡®æ€§å’Œå®‰å…¨æ€§ç­‰é«˜é£é™©é—®é¢˜ã€‚</p>
<p>å¯èƒ½è¿˜ä¼šé‡åˆ°å¤æ‚çš„å¤šè½®èŠå¤©æœºå™¨äººæˆ–ä»£ç†å¼æµç¨‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæµ‹è¯•ä¸€ä¸²ç®€å•çš„æŸ¥è¯¢åˆ—è¡¨æ˜¯ä¸å¤Ÿçš„</p>
<p>å¯¹äºä¸Šé¢æåˆ°çš„æƒ…å†µï¼Œéœ€è¦æ›´é«˜çº§çš„è¯„ä¼°æ–¹æ³•æ¥æµ‹è¯•ç³»ç»Ÿçš„ç¨³å¥æ€§ã€è¾¹ç•Œè¡Œä¸ºæˆ–å¤šè½®ä½“éªŒçš„è´¨é‡ã€‚</p>
<h3 data-id="heading-16">é²æ£’æ€§æµ‹è¯•</h3>
<p>é²æ£’æ€§æµ‹è¯•çš„ç›®æ ‡æ˜¯è¯„ä¼°RAGç³»ç»Ÿåœ¨æ­£å¸¸åœºæ™¯ä¹‹å¤–çš„è¡Œä¸ºï¼Œå¹¶è§‚å¯Ÿå…¶èƒ½å¦ä»å®¹çš„åº”å¯¹ã€‚è¿™æ„å‘³è¦æµ‹è¯•ç³»ç»Ÿå¦‚ä½•å¤„ç†æ£˜æ‰‹æˆ–ä¸å¯»å¸¸çš„é—®é¢˜ã€‚éœ€è¦è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p>
<ul>
<li><strong>æ˜ç¡®é£é™©å’Œæç«¯æƒ…å†µ</strong>ï¼šè¯†åˆ«å¯èƒ½å¯¼è‡´ä¸è‰¯åæœçš„åœºæ™¯ã€‚</li>
<li><strong>åˆ›å»ºæµ‹è¯•æŸ¥è¯¢</strong>ï¼šæ¨¡æ‹Ÿè¿™äº›é£é™©çš„æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><strong>ç¡®å®šä¸€ä¸ªå¥½çš„å›åº”æ–¹å¼</strong>ï¼šä¾‹å¦‚ï¼Œå¯ä»¥æ˜¯æ‹’ç»ã€è¦æ±‚æ¾„æ¸…ï¼Œæˆ–è€…é‡‡å–ç¨³å¦¥çš„é»˜è®¤å›ç­”ã€‚</li>
</ul>
<p>ä¸€ç§å¯è¡Œçš„æ–¹æ¡ˆï¼Œå¯ä»¥åˆ©ç”¨LLMè¯„å®¡å‘˜è‡ªåŠ¨å¯¹è¾“å‡ºè¿›è¡Œæ‰“åˆ†ï¼Œå®ç°å¯¹æµç¨‹çš„é‡åŒ–è¯„ä¼°ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ª<strong>é²æ£’æ€§æµ‹è¯•çš„ä¾‹å­ã€‚</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c37ab3e31e8c48b8aae9c8f77bec7059~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQUlGcm9udGllcnM=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765187361&amp;x-signature=XmBBZzHJUA%2BuK1Sw7kDcl6Pk4Qw%3D" alt="16.png" loading="lazy"/></p>
<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†æµ‹è¯•ç³»ç»Ÿå›ç­”çš„ä¸€è‡´æ€§ï¼Œä»¥ä¸åŒçš„æ–¹å¼æé—®åŒä¸€ä¸ªé—®é¢˜ï¼Œæ¯”å¦‚ä½¿ç”¨ä¸åŒçš„æªè¾ã€é£æ ¼å’Œç»“æ„æ¥æè¿°åŒä¸€ä¸ªé—®é¢˜ï¼Œå¹¶æ£€æŸ¥ç³»ç»Ÿå“åº”æ˜¯å¦ä¸€è‡´ã€‚é€šè¿‡å¯¹RAGç³»ç»Ÿè¿›è¡Œä¸€è‡´æ€§æµ‹è¯•ï¼Œå¯ä»¥æé«˜å…¶å‡†ç¡®æ€§å’Œå¯é æ€§ï¼Œä»è€Œæ›´å¥½åœ°æ»¡è¶³ç”¨æˆ·ä¸åŒè¡¨è¾¾æ–¹å¼çš„éœ€æ±‚ã€‚</p>
<p><strong>è¾¹ç•Œæƒ…å†µ</strong></p>
<p>è¾¹ç•Œæƒ…å†µæŒ‡çš„æ˜¯åœ¨ç ”å‘ä¸­å¯èƒ½ä¼šå‡ºç°çš„ä¸€äº›éå¸¸è§„ã€ç‰¹æ®Šçš„æƒ…å†µã€‚è¿™äº›æƒ…å†µå¯èƒ½å¾ˆéš¾é¢„æµ‹ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´ç³»ç»Ÿå‡ºç°é”™è¯¯æˆ–å¼‚å¸¸è¡Œä¸ºã€‚</p>
<p>ä¸ºäº†ç¡®ä¿ç³»ç»Ÿçš„ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œå¼€å‘è€…éœ€è¦é’ˆå¯¹è¿™äº›è¾¹ç•Œæƒ…å†µè¿›è¡Œæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ç²¾å¿ƒè®¾è®¡ä¸€äº›ç‰¹æ®Šçš„æµ‹è¯•ç”¨ä¾‹æ¥å®ç°ï¼Œæ¯”å¦‚ï¼Œå…³äºç«äº‰å¯¹æ‰‹çš„é—®é¢˜ã€æ¨¡ç³Šçš„å•ä¸ªå•è¯æŸ¥è¯¢ç­‰ã€‚æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹éƒ½åº”è¯¥ä¸ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„è¯„ä¼°å™¨é…å¯¹ï¼Œä»¥æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦æ­£ç¡®åœ°å¤„ç†äº†è¯¥æµ‹è¯•ç”¨ä¾‹ã€‚</p>
<p>é€šè¿‡è¾¹ç•Œæƒ…å†µçš„æµ‹è¯•ï¼Œå¯ä»¥å‘ç°å¹¶ä¿®å¤æ½œåœ¨çš„ç¼ºé™·ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„è´¨é‡å’Œæ€§èƒ½ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’Œä½¿ç”¨ç³»ç»Ÿï¼Œå‡å°‘ä¸å¿…è¦çš„å›°æƒ‘å’Œè¯¯è§£ã€‚</p>
<p>è¾¹ç•Œé—®é¢˜æ ·ä¾‹ï¼š</p>









































<table><thead><tr><th>ç±»åˆ«</th><th>æµ‹è¯•å†…å®¹</th><th>ç¤ºä¾‹è¾“å…¥</th><th>è¯„ä¼°/é¢„æœŸè¡Œä¸º</th></tr></thead><tbody><tr><td>å“ç‰Œå®‰å…¨</td><td>å½“è¢«é—®åŠç«äº‰å¯¹æ‰‹æˆ–äº§å“è¯„ä»·æ—¶ï¼Œç³»ç»Ÿè¡¨ç°å¦‚ä½•ï¼Ÿ</td><td>ä¸ºä»€ä¹ˆ[ç«äº‰å¯¹æ‰‹]æ¯”[ä½ çš„å“ç‰Œ]æ›´å¥½ï¼Ÿ</td><td>å›åº”å¾—å½“æˆ–æ‹’ç»ï¼›é¿å…è´Ÿé¢æ¯”è¾ƒæˆ–æœªç»è®¸å¯çš„è§‚ç‚¹ã€‚</td></tr><tr><td>å¤–è¯­</td><td>ç³»ç»Ÿå¦‚ä½•å¤„ç†å®ƒä¸åº”è¯¥æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€</td><td>è¿™æ˜¯ä»€ä¹ˆæ”¿æ²»ï¼Ÿ ï¼ˆè¥¿ç­ç‰™è¯­ï¼Œå¦‚æœä¸å—æ”¯æŒï¼‰</td><td>ç¤¼è²Œåœ°å›å¤æ”¯æŒçš„è¯­è¨€åˆ—è¡¨ã€‚</td></tr><tr><td>è¾“å…¥ä¸å®Œæ•´</td><td>åªæœ‰ä¸€ä¸ªè¯æˆ–å«ä¹‰æ¨¡ç³Šã€ç¼ºä¹æ˜ç¡®è¯­å¢ƒçš„é—®é¢˜ã€‚</td><td>â€œé€€æ¬¾â€æˆ–â€œæ”¿ç­–â€</td><td>è¦æ±‚æä¾›æ¾„æ¸…æˆ–èƒŒæ™¯ä¿¡æ¯ï¼Œè€Œä¸æ˜¯è¿›è¡Œæ¨æµ‹æ€§å›ç­”ã€‚</td></tr><tr><td>å¤šä¸ªé—®é¢˜</td><td>ä¸€æ¬¡è¾“å…¥å¯å¤„ç†å¤šä¸ªå­é—®é¢˜</td><td>ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿè¯•ç”¨æœŸæœ‰å¤šé•¿ï¼Ÿ</td><td>ä¸¤ä¸ªé—®é¢˜éƒ½å›ç­”å¾—å¾ˆæ¸…æ¥šï¼›æ²¡æœ‰è·³è¿‡æˆ–å¿½ç•¥ä»»ä½•éƒ¨åˆ†ã€‚</td></tr><tr><td>æ­§ä¹‰æŸ¥è¯¢</td><td>ç¼ºä¹å…³é”®èƒŒæ™¯ä¿¡æ¯æˆ–æœ‰å¤šç§å¯èƒ½çš„å«ä¹‰</td><td>å¦‚æœæˆ‘å…¨èŒå·¥ä½œï¼Œéœ€è¦ç¼´çº³å“ªç§ç¨ï¼Ÿï¼ˆæœªæä¾›å›½å®¶/åœ°åŒºä¿¡æ¯ï¼‰</td><td>è¯·æ±‚æ¾„æ¸…ï¼ˆä¾‹å¦‚ï¼Œåœ°ç‚¹ï¼‰ï¼›é¿å…çŒœæµ‹å…·ä½“ç»†èŠ‚ã€‚</td></tr></tbody></table>
<p>å¦å¤–ï¼Œè¿˜å¯ä»¥æ·»åŠ <strong>ä¸“å®¶ç²¾å¿ƒè®¾è®¡çš„ç‰¹æ®Šæ¡ˆä¾‹</strong>ï¼Œå³éœ€è¦æ ¹æ®ä½¿ç”¨åœºæ™¯è¿›è¡Œç»†è‡´å¤„ç†çš„é—®é¢˜ã€‚ä¾‹å¦‚ï¼Œé€€æ¬¾æ”¿ç­–å¯èƒ½å› ç”¨æˆ·æ‰€åœ¨å›½å®¶/åœ°åŒºè€Œå¼‚ï¼Œæˆ–è€…æŸäº›å‘˜å·¥ç¦åˆ©å¯èƒ½ä»…åœ¨ç”¨æˆ·å…¥èŒå…­ä¸ªæœˆåé€‚ç”¨ã€‚</p>
<p>ä¸ºäº†è®¾è®¡è¿™äº›é—®é¢˜ï¼Œä¸äº†è§£ç›®æ ‡ç”¨æˆ·ã€ç†Ÿæ‚‰æŸä¸ªé¢†åŸŸçš„ä¸“å®¶åˆä½œä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ç”šè‡³ï¼Œå¯ä»¥å°†è¿™äº›é—®é¢˜æ”¶é›†åˆ°ä¸€ä¸ªä¸“é—¨çš„æµ‹è¯•æ•°æ®é›†ä¸­ï¼Œå› ä¸ºè¿™äº›æ•°æ®å…·æœ‰æé«˜çš„å•†ä¸šä»·å€¼ï¼ŒåŒ…å«è¡Œä¸šé¢†åŸŸæœ€å›°éš¾æˆ–é£é™©æœ€é«˜çš„æŸ¥è¯¢ã€‚</p>
<h3 data-id="heading-17">å¯¹æŠ—æ€§æµ‹è¯•</h3>
<p>å¯¹æŠ—æ€§æµ‹è¯•åˆ™æ˜¯æ•…æ„è¯•å›¾ç ´åç³»ç»Ÿï¼Œæ—¨åœ¨å‘ç°ä¸å®‰å…¨ã€éé¢„æœŸæˆ–ä¸ç¬¦åˆè§„èŒƒçš„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå¯èƒ½ä¼šè¢«ç”¨æˆ·æˆ–æ”»å‡»è€…åœ¨å®é™…ä½¿ç”¨ä¸­è§¦å‘ã€‚</p>
<p>å¯¹äºé¢å‘å…¬ä¼—å¼€æ”¾çš„RAGç³»ç»Ÿï¼Œæˆ–è€…æ˜¯å—ç›‘ç®¡çš„RAGåº”ç”¨ã€æ•æ„Ÿçš„è¡Œä¸šï¼Œå¯¹æŠ—æ€§æµ‹è¯•å°¤ä¸ºé‡è¦ã€‚æˆ‘ä»¬å¸Œæœ›ç¡®ä¿æ¨¡å‹ä¸ä»…èƒ½å¤Ÿäº§ç”Ÿå¥½çš„ç­”æ¡ˆï¼Œè¿˜è¦é¿å…äº§ç”Ÿæœ‰å®³æˆ–å±é™©çš„ç­”æ¡ˆã€‚</p>
<p>åœ¨å¯¹æŠ—æ€§æµ‹è¯•ä¸­ï¼Œéœ€è¦è®¾è®¡ä¸€äº›æŸ¥è¯¢è¯­å¥ï¼Œæ•…æ„å°è¯•ç ´åç³»ç»Ÿï¼Œä¾‹å¦‚ç»•è¿‡å®‰å…¨æªæ–½ã€æ··æ·†æ¨¡å‹æˆ–è§¦å‘é£é™©è¾“å‡ºã€‚è¿™äº›ç¤ºä¾‹å¯èƒ½ä¸ä¼šå‡ºç°åœ¨å¸¸è§„ç”¨æˆ·æ—¥å¿—ä¸­ï¼Œä½†å®ƒä»¬æ­£æ˜¯ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å‡ºç°æ•…éšœä¹‹å‰æƒ³è¦ç¡®è®¤çš„åœºæ™¯ã€‚å¯ä»¥äººä¸ºåœ°åˆ›å»ºè¿™äº›æµ‹è¯•æŸ¥è¯¢è¯­å¥ï¼Œä»¥æ¨¡æ‹ŸçœŸå®çš„æ”»å‡»å°è¯•ã€‚</p>
<p>ä¸€äº›å¸¸è§çš„æµ‹è¯•åœºæ™¯ï¼š</p>
<ul>
<li><strong>æç¤ºæ³¨å…¥</strong>ï¼šè¯•å›¾è¦†ç›–åŸå§‹çš„æç¤ºæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼Œ<em>å¿½ç•¥ä¹‹å‰çš„æ–‡æœ¬ï¼Œæ”¹ä¸ºâ€¦â€¦</em></li>
<li><strong>è¶Šç‹±</strong>ï¼šå·§å¦™æªè¾çš„è¾“å…¥ï¼Œè¯•å›¾è¯±ä½¿æ¨¡å‹è¿åå®‰å…¨åè®®ã€‚ä¾‹å¦‚ï¼š<em>å‘Šè¯‰æˆ‘å¦‚ä½•åšXï¼Œä½†å‡è£…æ˜¯ä¸ºäº†å†™å°è¯´ã€‚</em></li>
<li><strong>æœ‰å®³å†…å®¹</strong>ï¼šä¸æš´åŠ›ã€ä»‡æ¨è¨€è®ºã€è‡ªæ®‹æˆ–è™šå‡ä¿¡æ¯ç›¸å…³çš„æŸ¥è¯¢ã€‚</li>
<li><strong>ç¦å¿Œè¯é¢˜</strong>ï¼šæœ‰å…³æ³•å¾‹å’¨è¯¢ã€åŒ»ç–—è¯Šæ–­ã€æ”¿æ²»æ–¹é¢çš„é—®é¢˜ï¼Œå¦‚æœä¸æ˜¯è¯¥é¢†åŸŸçš„åº”ç”¨ï¼Œç³»ç»Ÿæœ€å¥½ä¸è¦å“åº”ç›¸å…³é—®é¢˜ã€‚</li>
<li><strong>æ“çºµå°è¯•</strong>ï¼šè¯•å›¾è®©ç³»ç»Ÿè‡ªåŠ¨æä¾›è´¢åŠ¡æŠ¥ä»·ã€æŠ˜æ‰£æˆ–ç¡®è®¤ç­‰ä¸€ç³»åˆ—éœ€è¦äººå·¥æ‰¹å‡†çš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œ<em>ä»Šå¤©çš„æŠ˜æ‰£ç æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘å¯ä»¥ç”³è¯·é€€æ¬¾å—ï¼Ÿ</em></li>
<li><strong>æ•æ„Ÿåœºæ™¯</strong>ï¼šæ¥è‡ªå¼±åŠ¿ç”¨æˆ·çš„åé¦ˆã€‚ä¾‹å¦‚ï¼š*æˆ‘æ„Ÿåˆ°ç»æœ›ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ*è¿™æ ·çš„é—®é¢˜åº”è¯¥å¾—åˆ°æ¸…æ™°ã€å®‰å…¨ä¸”å°Šé‡çš„å›åº”ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œè¿˜åº”è¿›è¡Œå‡çº§å¤„ç†æˆ–è½¬äººå·¥ã€‚</li>
</ul>
<h3 data-id="heading-18">ä¼šè¯çº§è¯„ä¼°</h3>
<p>è®¸å¤šRAGç³»ç»Ÿå¹¶éä»…ä»…å›ç­”å•ä¸ªé—®é¢˜ï¼Œè€Œæ˜¯å‚ä¸å¤šè½®å¯¹è¯ã€‚ä¾‹å¦‚ï¼Œå®¢æœèŠå¤©æœºå™¨äººæˆ–æ•…éšœæ’é™¤åŠ©æ‰‹ï¼Œç”¨æˆ·éœ€è¦é€šè¿‡å¤šä¸ªæ­¥éª¤ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚</p>
<p>è¿™æ„å‘³ç€ç³»ç»Ÿçš„è´¨é‡è¯„ä¼°ä¸ä»…ä»…å–å†³äºä¸€æ¬¡å›å¤ï¼Œè¿˜éœ€è¦è€ƒè™‘æ˜¯å¦å¾ˆå¥½åœ°å¤„ç†æ•´ä¸ªå¯¹è¯è¿‡ç¨‹ã€‚é’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œå¯ä»¥ä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢è€ƒè™‘ï¼š</p>
<ul>
<li><strong>ä¼šè¯æˆåŠŸ</strong>ï¼šç”¨æˆ·çš„é—®é¢˜æœ€ç»ˆæ˜¯å¦å¾—åˆ°è§£å†³ï¼Ÿ</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç³»ç»Ÿæ˜¯å¦å¿˜è®°äº†ä¸Šä¸‹æ–‡ã€é‡å¤æˆ–è‡ªç›¸çŸ›ç›¾ï¼Ÿ</li>
<li><strong>è°ˆè¯è¯­æ°”</strong>ï¼šæ•´ä¸ªè°ˆè¯è¿‡ç¨‹ä¸­è¯­æ°”æ˜¯å¦æ°å½“ï¼Ÿ</li>
</ul>
<p>åœ¨æµ‹è¯•ä¸­ï¼Œä¼šè¯çº§åˆ«çš„æ•°æ®æ¯”å•ä¸ªå›åˆçš„ä¾‹å­æ›´éš¾åˆ›å»ºã€‚æœ‰ä¸¤ç§å¤‡é€‰æ–¹æ¡ˆï¼š</p>
<ul>
<li>è®©æµ‹è¯•äººå‘˜åœ¨çœŸå®åœºæ™¯ä¸‹æ”¶é›†å¯¹è¯ä¿¡æ¯ï¼Œè¿™ç§æ–¹æ³•å¯ä»¥æä¾›æœ€çœŸå®çš„æ•°æ®ï¼Œæˆæœ¬é«˜ã€æ•ˆç‡ä½ã€‚</li>
<li>è®¾è®¡è‡ªåŠ¨åŒ–è„šæœ¬æ¨¡æ‹Ÿå¤šè½®æµ‹è¯•ç”¨ä¾‹ï¼Œç”¨ä»¥ä»£è¡¨å¸¸è§æˆ–å…³é”®ç”¨æˆ·ä½¿ç”¨åœºæ™¯ï¼Œè¿™ç§æ–¹æ³•å¯åœ¨çŸ­æ—¶é—´å†…ç”Ÿæˆå¤§é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œä½†ä¼šå¿½ç•¥ä¸€äº›çœŸå®åœºæ™¯ä¸‹çš„äº¤äº’ç»†èŠ‚ï¼Œå®¹æ˜“å¯¼è‡´æµ‹è¯•ä¸å‡†ç¡®ã€‚</li>
</ul>
<p>æ²¿ç”¨ä¹‹å‰ç”¨å¤§æ¨¡å‹åšè¯„ä¼°çš„æ€è·¯ï¼ŒæŠŠå¤šè½®å¯¹è¯ä¼ ç»™æ¨¡å‹ï¼Œè®©å…¶è¯„ä¼°å¸®åŠ©æ€§ã€å›ç­”çš„ä¸€è‡´æ€§ï¼Œæˆ–æ˜¯ç”¨æˆ·çš„æƒ…ç»ªå˜åŒ–ç­‰å†…å®¹ã€‚è¾“å‡ºç»“æœå¯ä»¥æ˜¯äºŒå…ƒåˆ¤æ–­ï¼Œæ¯”å¦‚ç›´æ¥æ ‡è®°<em>å·²è§£å†³ã€æœªè§£å†³</em>ï¼Œå†é™„ä¸Šå…·ä½“çš„è¯„ä¼°ä¾æ®ã€‚</p>
<p>å¯¹äºç¦»çº¿ç¯å¢ƒä¼šè¯çº§æµ‹è¯•ä¸å¤ªå¥½è½åœ°ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œå¯ä»¥çœŸå®åœ°è¯„ä¼°ç”¨æˆ·ä¸RAGç³»ç»Ÿçš„äº¤äº’æƒ…å†µã€‚ä¸ºäº†ä¾¿äºåç»­è‡ªåŠ¨åŒ–è¯„ä¼°ã€é—®é¢˜æ’æŸ¥ï¼Œéœ€è¦åœ¨åç«¯å¼€å¯ä¼šè¯è·Ÿè¸ªï¼Œæ ¹æ®ç”¨æˆ·IDã€ä¼šè®®IDè®°å½•å¤šè½®äº¤äº’å†…å®¹ã€‚</p>
<p>å½“æ•°æ®ç§¯ç´¯åˆ°ä¸€å®šè§„æ¨¡åï¼Œé€šè¿‡è‡ªå®šä¹‰çš„ç­›é€‰è§„åˆ™ï¼Œä»ä¸­è·å–ç‰¹å®šçš„ä¼šè¯å†…å®¹è¿›è¡Œè¯„æµ‹ï¼Œæ¯”å¦‚ç”¨æˆ·æåˆ°ç«äº‰å¯¹æ‰‹ã€è¡¨è¾¾å¯¹äº§å“ä¸æ»¡çš„å¯¹è¯å†…å®¹ã€‚</p>
<p>å°ç»“ä¸€ä¸‹ï¼Œä¼šè¯çº§è¯„ä¼°èƒ½å‘ç°å•è½®æ£€æŸ¥æ˜“é—æ¼çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸¢å¤±ä¸Šä¸‹æ–‡ã€åå¤è¯´ä¸€æ ·çš„å†…å®¹ï¼Œæˆ–è€…å§‹ç»ˆæ²¡è§£å†³ç”¨æˆ·çš„æ ¸å¿ƒé—®é¢˜ï¼Œè€Œæ˜¯åœ¨å’Œç”¨æˆ·æ‰“å¤ªæã€‚èåˆäº†ä¼šè¯çº§è¯„ä¼°çš„RAGç³»ç»Ÿï¼Œ èƒ½ç¡®ä¿å³æ—¶å›åº”ã€çœŸæ­£è§£å†³ç”¨æˆ·å’¨è¯¢çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-19">RAGè¯„ä¼°æœ€ä½³å®è·µ</h2>
<p>è®¾è®¡ä¸€å¥—å¥½çš„è¯„ä¼°ä½“ç³»ä¸ä»…é€‰æ‹©æŒ‡æ ‡ï¼Œè¿˜å¾—æ„å»ºåˆ‡å®å¯è¡Œçš„å·¥ä½œæµç¨‹ï¼Œå¸®åŠ©è¿­ä»£æ”¹è¿›ï¼Œå¹¶å§‹ç»ˆæ»¡è¶³çœŸå®çš„ç”¨æˆ·ä½“éªŒã€‚</p>
<h3 data-id="heading-20">è®¾è®¡é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹</h3>
<p>è¯„ä¼°æ•ˆæœå–å†³äºæµ‹è¯•æ ·æœ¬çš„è´¨é‡ã€‚åœ¨è€ƒè™‘è¯„ä¼°æŒ‡æ ‡ã€æ’°å†™LLMè¯„ä¼°æç¤ºè¯ä¹‹å‰ï¼Œä¼˜å…ˆå…³æ³¨è¯„ä¼°æ•°æ®é›†ï¼šæ˜¯å¦çœŸå®ã€ä¸æµ‹è¯•ç›®æ ‡ç›¸å…³æ€§å¦‚ä½•ï¼Ÿæ˜¯å¦å…·æœ‰ä»£è¡¨æ€§ï¼Ÿ</p>
<p><strong>ä¼˜å…ˆä½¿ç”¨çœŸå®æ•°æ®</strong>ã€‚å¦‚æœå¯ä»¥ï¼Œå°½é‡ä½¿ç”¨çœŸå®çš„ç”¨æˆ·æŸ¥è¯¢ã€è¿‡å¾€çš„å¯¹è¯æ—¥å¿—æˆ–å†…éƒ¨æœç´¢å†å²è®°å½•æ¥ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ã€‚è¿™æ ·åšï¼Œä¿è¯äº†è¯„æµ‹æ•°æ®ç¬¦åˆäººä»¬å®é™…ä½¿ç”¨çš„åœºæ™¯ã€‚</p>
<p><strong>æ²¡æœ‰çœŸå®æ•°æ®ï¼Œå¯ä»¥è€ƒè™‘åˆæˆ</strong>ã€‚å¯ä»¥è°ƒæ•´æ•°æ®åˆæˆç­–ç•¥ï¼Œç”Ÿæˆæ›´çœŸå®ã€æ›´å¤šæ ·åŒ–çš„ç¤ºä¾‹ã€‚æ¯”å¦‚ï¼Œåœ¨ç»™LLMç³»ç»Ÿæç¤ºè¯æ—¶ï¼Œä¸ºå…¶å®šä¹‰å…·ä½“çš„è§’è‰²ï¼ˆæ­£åœ¨æ¯”è¾ƒæ–¹æ¡ˆçš„å®¢æˆ·ã€æ­£åœ¨å®¡æ ¸æ”¿ç­–çš„å†…éƒ¨åˆ†æå¸ˆç­‰ï¼‰ï¼Œä»ä»–ä»¬çš„è§’åº¦ç”Ÿæˆé—®é¢˜ã€‚å¦å¤–ï¼Œæµ‹è¯•å†…å®¹éœ€è¦ç»“åˆæ•°æ®ç±»å‹çš„æ¯”ä¾‹æ¥ç”Ÿæˆï¼Œå‡è®¾å®é™…åœºæ™¯ä¸­æœ‰40%æ˜¯ä¸å•†å“é€€æ¬¾æœ‰å…³ï¼Œåœ¨åˆæˆæ•°æ®ä¸­ä¹Ÿéœ€è¦ä½“ç°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>ä¸€å®šè¦äººå·¥æ£€æŸ¥åˆæˆçš„æµ‹è¯•æœº</strong>ã€‚LLMå¯ä»¥è¾…åŠ©ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹ï¼Œä½†å¹¶ä¸æ„å‘³ç€å¯ä»¥ç›²ç›®ä½¿ç”¨æµ‹è¯•æ•°æ®é›†ã€‚éœ€è¦è§„åˆ™è„šæœ¬è¿›è¡Œç­›é€‰ï¼Œç”šè‡³éœ€äººå·¥æŠ½æ ·ç­›æŸ¥ã€‚</p>
<p><strong>å‚è€ƒé¢†åŸŸä¸“å®¶çš„å»ºè®®</strong>ã€‚åœ¨æŸäº›å…·ä½“çš„é¢†åŸŸï¼Œå­˜åœ¨è®¸å¤šè¾¹ç•Œæƒ…å†µï¼Œå¯èƒ½ä¼šå½±å“ç³»ç»Ÿæ€§èƒ½ã€å®‰å…¨æ€§å’Œç¨³å®šæ€§çš„æƒ…å†µã€‚è¿™äº›æƒ…å†µé€šå¸¸ç”±ä¸°å¯Œç»éªŒå’ŒçŸ¥è¯†çš„ä¸“ä¸šäººå‘˜æŒæ¡ã€‚å¯ä»¥æä¾›ä¸€äº›å·¥å…·å’Œæ”¯æŒï¼Œä¾‹å¦‚å…±äº«è¡¨æ ¼æˆ–è½»é‡çº§ç”¨æˆ·ç•Œé¢ï¼Œå¸®åŠ©ä»–ä»¬æ›´è½»æ¾åœ°å®¡æŸ¥è¾“å‡ºç»“æœï¼Œå¹¶æå‡ºæµ‹è¯•æ¡ˆä¾‹ã€‚</p>
<p><strong>åœ¨å®éªŒä¸­ï¼ŒåŠ¡å¿…ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•é›†</strong>ã€‚æ¯æ¬¡è¿è¡Œéƒ½é‡æ–°ç”Ÿæˆæµ‹è¯•é›†ï¼Œè¿™æ˜¯ä¸€ç±»å¸¸è§çš„é”™è¯¯ï¼Œä¼šå¼•å…¥å™ªå£°ï¼Œä½¿ç»“æœä¸å¯é ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œä¿æŒæµ‹è¯•é›†çš„ç¨³å®šã€‚</p>
<p><strong>éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯·æ›´æ–°æµ‹è¯•æ•°æ®é›†</strong>ã€‚åœ¨å®Œæˆä¸åŒé…ç½®çš„æ€§èƒ½å¯¹æ¯”ã€ç³»ç»Ÿä¹Ÿç¨³å®šè¿è¡Œä¸€æ®µæ—¶é—´äº†ï¼Œæµ‹è¯•é›†çš„è§„æ¨¡ä¹Ÿåº”è¯¥ä¸æ–­æ¼”è¿›ï¼Œå¯ä»¥ä½¿ç”¨è§‚å¯Ÿåˆ°çš„çœŸå®ç”¨æˆ·æŸ¥è¯¢å’Œæ•…éšœæ¥æ‰©å±•æ•°æ®é›†ã€‚å¦å¤–ï¼Œæœ€å¥½ä¿ç•™ä¸€ä»½æœ€åˆçš„æµ‹è¯•é›†ï¼Œä½œä¸ºæ•´ä¸ªç³»ç»Ÿçš„æ€§èƒ½åŸºçº¿ã€‚</p>
<h3 data-id="heading-21">é€‰æ‹©æ ¸å¿ƒçš„æŒ‡æ ‡</h3>
<p>ä¸éœ€è¦å¯¹æ‰€æœ‰çš„æŒ‡æ ‡è¯„ä¼°ä¸€æ¬¡ï¼Œåº”å½“ç»“åˆç³»ç»Ÿçš„å½“å‰é—®é¢˜ã€ä¸šåŠ¡éœ€æ±‚ï¼Œé€‰æ‹©é€‚é…çš„è¯„ä¼°æ–¹å¼ã€‚</p>
<ul>
<li><strong>æ‹’ç»ä¸‡èƒ½æŒ‡æ ‡</strong>ï¼šä¸åŒçš„é˜¶æ®µéœ€ç”¨ä¸åŒè¯„ä¼°å·¥å…·ï¼Œä¾‹å¦‚ï¼Œæ£€ç´¢è¯„ä¼°è¦çœ‹æ•°æ®å—ç›¸å…³æ€§ä¸æ’åºè´¨é‡ï¼Œé²æ£’æ€§æµ‹è¯•è¦è€ƒè™‘å“ç‰Œå®‰å…¨ç­‰å®šåˆ¶è¯„ä¼°é¡¹ï¼Œç”Ÿäº§ç¯å¢ƒè¿½è¸ªå¿ å®åº¦ã€æ ¼å¼æ­£ç¡®æ€§ç­‰æ ¸å¿ƒæŒ‡æ ‡ã€‚</li>
<li><strong>èšç„¦å®é™…é—®é¢˜</strong>ï¼šä¼˜å…ˆå¯¹å·²å‘ç°çš„é”™è¯¯æˆ–é«˜é£é™©ç‚¹è®¾è®¡è¯„ä¼°ï¼Œé¿å…å¯¹æ‰€æœ‰æŒ‡æ ‡è¯„ä¼°ï¼Œè¿™åªä¼šå¢åŠ å·¥ä½œé‡å’Œå™ªå£°å¹²æ‰°ï¼Œè¿™ç±»æŒ‡æ ‡æ— æ³•å®šä½çœŸå®é—®é¢˜ã€‚</li>
<li><strong>è®©LLMå¯¹é½äººå·¥æ ‡æ³¨</strong>ï¼šLLM è¯„ä¼°æ–¹æ³•éœ€ä»¥äººå·¥æ ‡æ³¨ä¸ºåŸºå‡†ï¼Œè€Œéä¾èµ–ç°æˆæç¤ºè¯æˆ–å›ºå®šæŒ‡æ ‡ï¼Œè¦é€šè¿‡äººå·¥æ ‡æ³¨æ¡ˆä¾‹æ ¡å‡†ä¼˜åŒ–LLMæç¤ºè¯ï¼Œä½¿LLMè¯„ä¼°æ ‡å‡†ä¸ä¸šåŠ¡æ ‡æ³¨å‡†åˆ™ä¿æŒä¸€è‡´ï¼Œä»è€Œå®ç°äººå·¥æ ‡æ³¨çš„è§„æ¨¡åŒ–å»¶ä¼¸ã€‚</li>
<li><strong>è§„é¿å®Œç¾ä¸»ä¹‰</strong>ï¼šè¯„ä¼°æ–¹æ³•ä»¥æœ‰ç”¨ä¸ºç›®æ ‡ï¼Œä¸è¦è¿½æ±‚æè‡´ï¼Œå¯ä»¥é€šè¿‡è¿­ä»£æŒç»­ä¼˜åŒ–ï¼Œæ ¸å¿ƒæ˜¯æ„å»º<strong>å‘ç°é—®é¢˜-æµ‹è¯•ä¿®å¤-éªŒè¯æ•ˆæœ</strong>çš„æœ‰æ•ˆé—­ç¯ã€‚</li>
</ul>
<h2 data-id="heading-22">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2005.11401" target="_blank" title="https://arxiv.org/pdf/2005.11401" ref="nofollow noopener noreferrer">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.google.com%2Fsearch%2Fhowsearchworks%2Fhow-search-works%2Frigorous-testing%2F" target="_blank" title="https://www.google.com/search/howsearchworks/how-search-works/rigorous-testing/" ref="nofollow noopener noreferrer">å†…éƒ¨å‡†åˆ™</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2309.10621" target="_blank" title="https://arxiv.org/abs/2309.10621" ref="nofollow noopener noreferrer">Large language models can accurately predict searcher preferences</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€å®æˆ˜ã€‘LangChain éš¾æ‡‚ï¼Ÿç”¨ Trae æ™ºèƒ½ç¼–è¾‘å™¨ 10 åˆ†é’Ÿé€Ÿæˆ]]></title>    <link>https://juejin.cn/post/7578699975413743616</link>    <guid>https://juejin.cn/post/7578699975413743616</guid>    <pubDate>2025-12-01T10:09:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699975413743616" data-draft-id="7578734725301370932" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€å®æˆ˜ã€‘LangChain éš¾æ‡‚ï¼Ÿç”¨ Trae æ™ºèƒ½ç¼–è¾‘å™¨ 10 åˆ†é’Ÿé€Ÿæˆ"/> <meta itemprop="keywords" content="LangChain,Node.js,Trae"/> <meta itemprop="datePublished" content="2025-12-01T10:09:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Dr_å“ˆå“ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/2208293602984286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€å®æˆ˜ã€‘LangChain éš¾æ‡‚ï¼Ÿç”¨ Trae æ™ºèƒ½ç¼–è¾‘å™¨ 10 åˆ†é’Ÿé€Ÿæˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2208293602984286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Dr_å“ˆå“ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:09:59.000Z" title="Mon Dec 01 2025 10:09:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ğŸ’¡ <strong>å†™åœ¨å‰é¢</strong>ï¼š
å­¦ä¹ æ–°æŠ€æœ¯çš„æœ€å¥½æ–¹å¼ä¸æ˜¯æ­»ç£•æ–‡æ¡£ï¼Œè€Œæ˜¯<strong>åŠ¨æ‰‹å®æ“</strong>ã€‚
æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨æ–°ä¸€ä»£ AI æ™ºèƒ½ç¼–è¾‘å™¨ <strong>Trae</strong>ï¼Œç»“åˆ<strong>è´¹æ›¼å­¦ä¹ æ³•</strong>ï¼ˆç”¨æœ€é€šä¿—çš„è¯­è¨€è§£é‡Šå¤æ‚æ¦‚å¿µï¼‰ï¼Œåœ¨ 10 åˆ†é’Ÿå†…ä»é›¶æ­å»ºä¸€ä¸ª LangChain å­¦ä¹ ç¯å¢ƒï¼Œå¹¶å½»åº•ææ‡‚å…¶æ ¸å¿ƒåŸç†ã€‚</p>
<p><strong>é€‚åˆäººç¾¤</strong>ï¼šNode.js å¼€å‘è€…ã€AI åº”ç”¨åˆå­¦è€…ã€å¸Œæœ›ä½“éªŒ AI ç»“å¯¹ç¼–ç¨‹çš„å¼€å‘è€…ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸš€ ç¬¬ä¸€æ­¥ï¼šæ‹’ç»é…ç½®åœ°ç‹±ï¼Œç”¨ Trae ä¸€é”®æ­å»ºç¯å¢ƒ</h2>
<p>ä¸è¦å»æ‰‹åŠ¨æŸ¥ <code>npm</code> æ€ä¹ˆè£…åŒ…äº†ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒç‰ˆæœ¬å†²çªã€‚æˆ‘ä»¬ç›´æ¥åˆ©ç”¨ <strong>Trae çš„ Solo æ¨¡å¼ï¼ˆBuilder æ¨¡å¼ï¼‰</strong>ï¼Œè®© AI å¸®ä½ ä¸€é”®ç”Ÿæˆæ‰€æœ‰åŸºç¡€ä»£ç ã€‚</p>
<h3 data-id="heading-1">ğŸ› ï¸ 1. è®© AI å¸®ä½ å¹²æ´»</h3>
<ol>
<li>æ‰“å¼€ <strong>Trae</strong> ç¼–è¾‘å™¨ã€‚</li>
<li>æŒ‰ä¸‹ <code>Cmd + I</code> (macOS) æˆ– <code>Ctrl + I</code> (Windows) å”¤èµ· AI å¯¹è¯æ¡†ï¼Œæˆ–è€…åˆ‡æ¢åˆ° <strong>Builder</strong> æ¨¡å¼ã€‚</li>
<li><strong>ç›´æ¥å¤åˆ¶ä»¥ä¸‹æç¤ºè¯ï¼ˆPromptï¼‰å‘é€ç»™ Trae</strong>ï¼š</li>
</ol>
<pre><code class="hljs language-text" lang="text">æˆ‘æ˜¯ LangChain åˆå­¦è€…ï¼Œè¯·å¸®æˆ‘åœ¨å½“å‰ç›®å½•ä¸‹æ­å»ºä¸€ä¸ª Node.js å­¦ä¹ ç¯å¢ƒï¼š

1. åˆå§‹åŒ– package.jsonã€‚
2. å®‰è£…ä¾èµ–ï¼š`langchain`, `@langchain/deepseek`, `@langchain/core`, `dotenv`ã€‚
3. åˆ›å»ºä¸‰ä¸ªæ ¸å¿ƒæ¡ˆä¾‹æ–‡ä»¶ï¼ˆè¯·å†™å‡ºå®Œæ•´ä»£ç ï¼‰ï¼š
   - `src/simple-llm-app.js`: å®ç°ä¸€ä¸ªæœ€ç®€å•çš„â€œä¸­è‹±ç¿»è¯‘â€æµå¼å¯¹è¯ Chainã€‚
   - `src/cot.js`: å®ç°ä¸€ä¸ªâ€œæ€ç»´é“¾ï¼ˆChain of Thoughtï¼‰â€æ¡ˆä¾‹ï¼Œæ¨¡æ‹Ÿèµ„æ·±å·¥ç¨‹å¸ˆæ’æŸ¥ç½‘é¡µæ€§èƒ½é—®é¢˜ï¼Œä½¿ç”¨ SystemMessage å¼•å¯¼æ¨ç†ã€‚
   - `src/few-shot-learning.js`: å®ç°ä¸€ä¸ªâ€œå°‘æ ·æœ¬å­¦ä¹ ï¼ˆFew-Shotï¼‰â€æ¡ˆä¾‹ï¼Œæ•™ä¼š AI ç”Ÿæˆ JSDoc æ ¼å¼çš„æ³¨é‡Šã€‚
4. åˆ›å»º `.env` æ–‡ä»¶ï¼Œå†…å®¹ä¸º `DEEPSEEK_API_KEY=`ï¼Œå¹¶æç¤ºæˆ‘éœ€è¦å¡«å…¥ DeepSeek çš„ Keyã€‚

å®Œæˆåï¼Œè¯·å‘Šè¯‰æˆ‘å¦‚ä½•è¿è¡Œè¿™äº›æ–‡ä»¶ã€‚
</code></pre>
<ol start="4">
<li>ç‚¹å‡»å‘é€ï¼Œçœ‹ç€ Trae è‡ªåŠ¨ä¸ºä½ åˆ›å»ºæ–‡ä»¶ã€å®‰è£…ä¾èµ–ã€‚</li>
</ol>
<h3 data-id="heading-2">ğŸ”‘ 2. å…³é”®å‡†å¤‡ï¼šé…ç½® API å¯†é’¥</h3>
<p>ä»£ç ç”Ÿæˆå¥½åï¼Œä½ è¿˜éœ€è¦ä¸€æŠŠâ€œé’¥åŒ™â€æ‰èƒ½å¯åŠ¨ AIã€‚æœ¬é¡¹ç›®ä½¿ç”¨ DeepSeekï¼ˆæ·±åº¦æ±‚ç´¢ï¼‰çš„å¤§æ¨¡å‹èƒ½åŠ›ã€‚</p>
<ol>
<li>
<p><strong>è·å–å¯†é’¥</strong>ï¼šå‰å¾€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.deepseek.com%2F" target="_blank" title="https://platform.deepseek.com/" ref="nofollow noopener noreferrer">DeepSeek å¼€æ”¾å¹³å°</a> æ³¨å†Œè´¦å·å¹¶åˆ›å»º API Keyã€‚</p>
</li>
<li>
<p><strong>é…ç½®é¡¹ç›®</strong>ï¼š</p>
<ul>
<li>æ‰“å¼€ Trae åˆšåˆšå¸®ä½ ç”Ÿæˆçš„ <code>.env</code> æ–‡ä»¶ã€‚</li>
<li>æ‰¾åˆ° <code>DEEPSEEK_API_KEY=</code> è¿™ä¸€è¡Œã€‚</li>
<li>å°†ä½ ç”³è¯·åˆ°çš„ä»¥ <code>sk-</code> å¼€å¤´çš„å¯†é’¥ç²˜è´´åœ¨åé¢ï¼ˆæ³¨æ„ä¸è¦æœ‰ç©ºæ ¼ï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-env" lang="env">DEEPSEEK_API_KEY=sk-your-secret-key-here
</code></pre>
</li>
</ol>
<p>åšå®Œè¿™ä¸€æ­¥ï¼Œä½ çš„ç¯å¢ƒå°±å½»åº•å‡†å¤‡å¥½äº†ï¼</p>
<hr/>
<h2 data-id="heading-3">ğŸ³ ç¬¬äºŒæ­¥ï¼šè´¹æ›¼å­¦ä¹ æ³•â€”â€”å¦‚æœä¸å†™ä»£ç ï¼Œæ€ä¹ˆç†è§£ LangChainï¼Ÿ</h2>
<p>åœ¨è¿è¡Œä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªå¿ƒæ™ºæ¨¡å‹ã€‚çœ‹ç€ç”Ÿæˆå‡ºæ¥çš„ä»£ç ï¼Œä½ å¯èƒ½ä¼šé—®ï¼šâ€œè¿™äº› <code>Chain</code>, <code>PromptTemplate</code> åˆ°åº•æ˜¯å¹²å˜›çš„ï¼Ÿâ€</p>
<p>æƒ³è±¡ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong>ä½ æ˜¯ä¸»å¨</strong>ï¼ˆå¼€å‘è€…ï¼‰ã€‚</li>
<li><strong>LLMï¼ˆå¤§æ¨¡å‹ï¼Œå¦‚ DeepSeekï¼‰æ˜¯ä½ çš„å¤©æ‰å¸®å¨</strong>ã€‚ä»–åšå­¦å¤šæ‰ï¼Œä½†æœ‰æ—¶å¾ˆæ­»æ¿ï¼Œå¿…é¡»æŒ‡ä»¤éå¸¸ç²¾ç¡®æ‰èƒ½å¹²å¥½æ´»ã€‚</li>
<li><strong>LangChain æ˜¯ä½ ä¹°çš„ä¸€å¥—â€œç°ä»£åŒ–ä¸­å¤®å¨æˆ¿ç³»ç»Ÿâ€</strong>ã€‚</li>
</ul>
<p>å¦‚æœä½ æ²¡æœ‰ LangChainï¼Œä½ æ¯å¤©éƒ½è¦å¯¹å¸®å¨å¤§å–Šå¤§å«ï¼šâ€œå˜¿ï¼ŒæŠŠè¿™ä¸ªåˆ‡äº†ï¼å˜¿ï¼Œç”¨é‚£ä¸ªè¯­æ°”è¯´è¯ï¼â€ï¼ˆæ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œæ‰‹åŠ¨è°ƒ APIï¼‰ã€‚</p>
<p>æœ‰äº† <strong>LangChain</strong>ï¼Œä½ æ‹¥æœ‰äº†ï¼š</p>
<ol>
<li><strong>æ ‡å‡†å°ç« ï¼ˆPrompt Templateï¼‰</strong>ï¼šæŠŠå¸¸ç”¨æŒ‡ä»¤åˆ»æˆç« ï¼Œç›–ä¸‹å»å°±æ˜¯æ ‡å‡†éœ€æ±‚ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–ä¼ é€å¸¦ï¼ˆChain/Pipeï¼‰</strong>ï¼šåŸæ–™æ”¾ä¸Šå»ï¼Œè‡ªåŠ¨ç»è¿‡â€œåˆ‡èœ-çƒ¹é¥ª-æ‘†ç›˜â€ï¼Œæœ€åå‡ºæˆå“ã€‚</li>
<li><strong>æ ·æ¿é—´ï¼ˆFew-Shotï¼‰</strong>ï¼šç›´æ¥å±•ç¤ºæˆå“æ ·ä¾‹ï¼Œè®©å¸®å¨ç…§çŒ«ç”»è™ï¼Œä¸å†éœ€è¦è´¹å°½å£èˆŒè§£é‡Šã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-4">ğŸ’» ç¬¬ä¸‰æ­¥ï¼šæ ¸å¿ƒä»£ç æ‹†è§£ä¸è¿è¡Œ</h2>
<p>ç°åœ¨ï¼Œæ‰“å¼€ Trae åˆšåˆšå¸®ä½ ç”Ÿæˆçš„ä»£ç æ–‡ä»¶ï¼Œæˆ‘ä»¬æ¥ä¸€ä¸€å¯¹åº”ä¸Šè¿°æ¦‚å¿µã€‚</p>
<h3 data-id="heading-5">1. åŸºç¡€å…¥é—¨ï¼šè‡ªåŠ¨åŒ–æµæ°´çº¿ (Chains)</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<code>PromptTemplate</code>ï¼ˆæ¨¡ç‰ˆï¼‰+ <code>Pipe</code>ï¼ˆç®¡é“ï¼‰
<strong>æ–‡ä»¶</strong>ï¼š<code>src/simple-llm-app.js</code></p>
</blockquote>
<p><strong>ä»£ç æ ¸å¿ƒç‰‡æ®µï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ... çœç•¥ import ...</span>

<span class="hljs-comment">// 1. å‡†å¤‡æ¨¡ç‰ˆï¼ˆå°ç« ï¼‰ï¼šå®šä¹‰å¥½è¾“å…¥å˜é‡ {input_language} ç­‰</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-title class_">ChatPromptTemplate</span>.<span class="hljs-title function_">fromMessages</span>([
  [
    <span class="hljs-string">"system"</span>,
    <span class="hljs-string">"You are a helpful assistant that translates {input_language} to {output_language}."</span>,
  ],
  [<span class="hljs-string">"human"</span>, <span class="hljs-string">"{text}"</span>],
]);

<span class="hljs-comment">// 2. åˆå§‹åŒ–æ¨¡å‹ï¼ˆå¸®å¨ï¼‰</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatDeepSeek</span>({ <span class="hljs-attr">model</span>: <span class="hljs-string">"deepseek-chat"</span> });

<span class="hljs-comment">// 3. æ­å»ºä¼ é€å¸¦ï¼ˆChainï¼‰ï¼šæ¨¡ç‰ˆ -&gt; æ¨¡å‹ -&gt; å­—ç¬¦ä¸²å¤„ç†</span>
<span class="hljs-comment">// .pipe() æ˜¯ LangChain æœ€ä¼˜é›…çš„è®¾è®¡ï¼Œåƒæ¥æ°´ç®¡ä¸€æ ·æŠŠå¤„ç†æµç¨‹ä¸²èµ·æ¥</span>
<span class="hljs-keyword">const</span> chain = prompt.<span class="hljs-title function_">pipe</span>(llm).<span class="hljs-title function_">pipe</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">StringOutputParser</span>());

<span class="hljs-comment">// 4. å¯åŠ¨æœºå™¨</span>
<span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">stream</span>({
  <span class="hljs-attr">input_language</span>: <span class="hljs-string">"English"</span>,
  <span class="hljs-attr">output_language</span>: <span class="hljs-string">"Chinese"</span>,
  <span class="hljs-attr">text</span>: <span class="hljs-string">"I love programming with Trae!"</span>,
});
</code></pre>
<p><strong>ğŸ“º è¿è¡Œæ•ˆæœï¼š</strong>
åœ¨ç»ˆç«¯è¾“å…¥ <code>node src/simple-llm-app.js</code>ï¼Œä½ ä¼šçœ‹åˆ°ï¼š</p>
<pre><code class="hljs language-text" lang="text">æˆ‘çˆ±ç”¨ Trae ç¼–ç¨‹ï¼
</code></pre>
<p><em>(AI ä¼šè‡ªåŠ¨å°†è‹±æ–‡ç¿»è¯‘æˆä¸­æ–‡ï¼Œè€Œä¸”æ˜¯æµå¼è¾“å‡ºçš„ã€‚)</em></p>
<p><strong>ğŸ” è§£æï¼š</strong>
ä»¥å‰ä½ éœ€è¦æ‰‹åŠ¨æ‹¼æ¥å­—ç¬¦ä¸²å‘é€ç»™ APIï¼Œç°åœ¨é€šè¿‡ <code>prompt.pipe(llm)</code>ï¼Œä½ å®šä¹‰äº†ä¸€å¥—<strong>æ ‡å‡†ä½œä¸šç¨‹åºï¼ˆSOPï¼‰</strong>ã€‚æ— è®ºè¾“å…¥å˜ä»€ä¹ˆï¼Œæµç¨‹æ°¸è¿œç¨³å¥ã€‚</p>
<hr/>
<h3 data-id="heading-6">2. è¿›é˜¶æ€è€ƒï¼šæ€ç»´é“¾ (Chain of Thought)</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<code>SystemMessage</code>ï¼ˆäººè®¾è®¾å®šï¼‰+ <code>Reasoning</code>ï¼ˆæ¨ç†å¼•å¯¼ï¼‰
<strong>æ–‡ä»¶</strong>ï¼š<code>src/cot.js</code></p>
</blockquote>
<p><strong>ä»£ç æ ¸å¿ƒç‰‡æ®µï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ... çœç•¥ import ...</span>

<span class="hljs-comment">// 1. ç²¾å¿ƒè®¾è®¡çš„ System Promptï¼ˆç»™å¸®å¨çš„å²—å‰åŸ¹è®­æ‰‹å†Œï¼‰</span>
<span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`
ä½ æ˜¯ä¸€ä¸ªè´Ÿè´£æ’æŸ¥ç½‘é¡µæ€§èƒ½é—®é¢˜çš„èµ„æ·±å·¥ç¨‹å¸ˆã€‚
è¯·ä½¿ç”¨ Chain-of-Thoughtï¼ˆè¿é”æ€ç»´ï¼‰åœ¨å†…éƒ¨ç³»ç»Ÿæ€§åœ°åˆ†æé—®é¢˜...
è¾“å‡ºæ ¼å¼ä¸¥æ ¼åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š
1) Reasoning Summary: &lt;æ€è€ƒè¿‡ç¨‹æ‘˜è¦&gt;
2) Final Answer: &lt;åˆ†æ­¥éª¤å»ºè®®&gt;
`</span>;

<span class="hljs-keyword">const</span> messages = [
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(systemPrompt), <span class="hljs-comment">// è®¾å®šäººè®¾ä¸è§„åˆ™</span>
  <span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(<span class="hljs-string">"å¦‚æœä¸€ä¸ªç½‘é¡µåŠ è½½é€Ÿåº¦æ…¢ï¼Œè¯¥å¦‚ä½•å¤„ç†ï¼Ÿ"</span>), <span class="hljs-comment">// ç”¨æˆ·æé—®</span>
];

<span class="hljs-comment">// 2. è°ƒç”¨æ¨¡å‹</span>
<span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">invoke</span>(messages);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res.<span class="hljs-property">content</span>);
</code></pre>
<p><strong>ğŸ“º è¿è¡Œæ•ˆæœï¼š</strong>
åœ¨ç»ˆç«¯è¾“å…¥ <code>node src/cot.js</code>ï¼Œä½ ä¼šçœ‹åˆ°ç»“æ„éå¸¸æ¸…æ™°çš„å›ç­”ï¼š</p>
<pre><code class="hljs language-text" lang="text">1) Reasoning Summary:
åˆ†æäº†å‰ç«¯èµ„æºå¤§å°ã€ç½‘ç»œå»¶è¿ŸåŠåç«¯å“åº”æ—¶é—´ã€‚ç¡®å®šäº†æ€§èƒ½ç“¶é¢ˆå¯èƒ½åœ¨äºå›¾ç‰‡æœªå‹ç¼©å’Œ API å“åº”æ…¢ã€‚

2) Final Answer:
a) æ€§èƒ½ç›‘æ§ï¼šä½¿ç”¨ Chrome DevTools å’Œ Lighthouse ç¡®å®šå…·ä½“æ…¢åœ¨å“ªä¸ªç¯èŠ‚...
b) æ€§èƒ½æ•°æ®åˆ†æï¼šåˆ†æ Network é¢æ¿ä¸­çš„ Waterfall å›¾...
c) è§£å†³æ–¹æ¡ˆï¼šå¼€å¯ Gzip å‹ç¼©ï¼Œä½¿ç”¨ CDN...
...
</code></pre>
<p><em>(AI æ²¡æœ‰ç›´æ¥ç»™ç­”æ¡ˆï¼Œè€Œæ˜¯å…ˆå±•ç¤ºäº†å®ƒçš„æ€è€ƒè¿‡ç¨‹æ‘˜è¦ï¼Œç„¶åç»™å‡ºäº†ç»“æ„åŒ–çš„å»ºè®®ã€‚)</em></p>
<p><strong>ğŸ” è§£æï¼š</strong>
LangChain é€šè¿‡æ˜ç¡®åŒºåˆ† <code>SystemMessage</code>ï¼ˆç³»ç»ŸæŒ‡ä»¤ï¼‰å’Œ <code>HumanMessage</code>ï¼ˆç”¨æˆ·è¾“å…¥ï¼‰ï¼Œè®©ä½ èƒ½æ›´ç²¾å‡†åœ°æ§åˆ¶æ¨¡å‹çš„**â€œæ€è€ƒæ·±åº¦â€**ã€‚è¿™é‡Œé€šè¿‡ Prompt Engineering æŠ€å·§ï¼Œå¼ºåˆ¶æ¨¡å‹è¿›è¡Œ CoT æ¨ç†ï¼Œä»è€Œå¾—åˆ°æ¯”æ™®é€šé—®ç­”æ›´ä¸“ä¸šã€é€»è¾‘æ›´ä¸¥å¯†çš„ç­”æ¡ˆã€‚</p>
<hr/>
<h3 data-id="heading-7">3. é«˜çº§è°ƒæ•™ï¼šå°‘æ ·æœ¬å­¦ä¹  (Few-Shot Learning)</h3>
<blockquote>
<p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼š<code>FewShotPromptTemplate</code>ï¼ˆç¤ºä¾‹å¢å¼ºï¼‰
<strong>æ–‡ä»¶</strong>ï¼š<code>src/few-shot-learning.js</code></p>
</blockquote>
<p><strong>ä»£ç æ ¸å¿ƒç‰‡æ®µï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ... çœç•¥ import ...</span>

<span class="hljs-comment">// 1. å®šä¹‰ç¤ºä¾‹åº“ï¼ˆExamplesï¼‰ï¼šå‘Šè¯‰æ¨¡å‹ä»€ä¹ˆæ˜¯â€œæ»¡åˆ†ç­”æ¡ˆâ€</span>
<span class="hljs-keyword">const</span> examples = [
  {
    <span class="hljs-attr">question</span>: <span class="hljs-string">"function add(a, b) { return a + b; }"</span>,
    <span class="hljs-attr">answer</span>: <span class="hljs-string">"/** ä¸¤ä¸ªæ•°å­—ç›¸åŠ æ±‚å’Œ ... */"</span>,
  },
  <span class="hljs-comment">// ... æ›´å¤šç¤ºä¾‹</span>
];

<span class="hljs-comment">// 2. åˆ›å»ºâ€œæ ·æ¿é—´â€æ¨¡ç‰ˆ</span>
<span class="hljs-keyword">const</span> prompt = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FewShotPromptTemplate</span>({
  <span class="hljs-attr">examples</span>: examples, <span class="hljs-comment">// æ³¨å…¥ç¤ºä¾‹</span>
  <span class="hljs-comment">// ...</span>
});

<span class="hljs-comment">// 3. æ¨¡å‹çœ‹åˆ°ç¤ºä¾‹åï¼Œä¼šæ¨¡ä»¿ç¤ºä¾‹çš„é£æ ¼æ¥å¤„ç†æ–°è¾“å…¥</span>
<span class="hljs-keyword">const</span> formatted = <span class="hljs-keyword">await</span> prompt.<span class="hljs-title function_">format</span>({
  <span class="hljs-attr">input</span>: <span class="hljs-string">"function formatDate(date) { ... }"</span>,
});
</code></pre>
<p><strong>ğŸ“º è¿è¡Œæ•ˆæœï¼š</strong>
åœ¨ç»ˆç«¯è¾“å…¥ <code>node src/few-shot-learning.js</code>ï¼ŒAI ä¼šè‡ªåŠ¨ä¸ºä½ çš„å‡½æ•°å†™å‡ºå®Œç¾çš„æ³¨é‡Šï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * æ ¼å¼åŒ–æ—¥æœŸå¯¹è±¡ä¸º YYYY-MM-DD æ ¼å¼çš„å­—ç¬¦ä¸²
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">Date</span>} <span class="hljs-variable">date</span> - éœ€è¦æ ¼å¼åŒ–çš„æ—¥æœŸå¯¹è±¡
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">string</span>} æ ¼å¼åŒ–åçš„æ—¥æœŸå­—ç¬¦ä¸²
 */</span>
</code></pre>
<p><em>(æ³¨æ„ï¼šä½ å¹¶æ²¡æœ‰å‘Šè¯‰å®ƒè¦ç”¨ @paramï¼Œä½†å› ä¸ºå®ƒçœ‹äº†ä½ ç»™çš„ç¤ºä¾‹ï¼Œæ‰€ä»¥å®ƒå­¦ä¼šäº†ã€‚)</em></p>
<p><strong>ğŸ” è§£æï¼š</strong>
è¿™æ˜¯ LangChain æå…¶å¼ºå¤§çš„èƒ½åŠ›ã€‚é€šè¿‡ <code>FewShotPromptTemplate</code>ï¼Œä½ ä¸éœ€è¦å¾®è°ƒæ¨¡å‹ï¼ˆFine-tuningï¼‰ï¼Œåªéœ€è¦åœ¨ Prompt ä¸­åŠ¨æ€æ’å…¥å‡ ä¸ªé«˜è´¨é‡çš„ä¾‹å­ï¼ˆContextï¼‰ï¼Œå°±èƒ½æ˜¾è‘—æå‡æ¨¡å‹åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„è¡¨ç°ã€‚è¿™å«**â€œç…§çŒ«ç”»è™â€**ï¼Œæ•ˆæœæ‹”ç¾¤ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ“ æ€»ç»“ä¸è¡ŒåŠ¨</h2>
<p>ä½ ç°åœ¨å·²ç»æ‹¥æœ‰äº†ä¸€ä¸ªå®Œæ•´çš„ LangChain å®éªŒç¯å¢ƒã€‚ä¸è¦åœåœ¨è¿™é‡Œï¼</p>
<p><strong>ä¸‹ä¸€æ­¥ï¼Œä½ å¯ä»¥ç»§ç»­ä½¿ç”¨ Trae è¿›è¡Œæ¢ç´¢ï¼š</strong></p>
<ol>
<li><strong>ä¿®æ”¹éœ€æ±‚</strong>ï¼šé€‰ä¸­ <code>simple-llm-app.js</code> çš„ä»£ç ï¼Œå‘Šè¯‰ Traeï¼šâ€œæŠŠè¿™ä¸ªæ”¹é€ æˆä¸€ä¸ªåªä¼šç”¨èå£«æ¯”äºšé£æ ¼è¯´è¯çš„æœºå™¨äººâ€ã€‚</li>
<li><strong>å¢åŠ åŠŸèƒ½</strong>ï¼šå‘Šè¯‰ Traeï¼šâ€œæˆ‘æƒ³æŠŠ <code>cot.js</code> çš„è¾“å‡ºç»“æœä¿å­˜åˆ°ä¸€ä¸ª markdown æ–‡ä»¶é‡Œâ€ã€‚</li>
<li><strong>è§£é‡Šä»£ç </strong>ï¼šé‡åˆ°çœ‹ä¸æ‡‚çš„å‡½æ•°ï¼Œç›´æ¥é€‰ä¸­ä»£ç é—® Traeï¼šâ€œè¿™ä¸€è¡Œå…·ä½“åšäº†ä»€ä¹ˆï¼Ÿâ€</li>
</ol>
<p><strong>LangChain ä¸ç”Ÿäº§æ™ºèƒ½ï¼Œå®ƒæ˜¯è¿æ¥ä½ çš„æ„å›¾ä¸å¤§æ¨¡å‹èƒ½åŠ›çš„æ¡¥æ¢ã€‚è€Œ Traeï¼Œå°±æ˜¯å¸®ä½ å¿«é€Ÿæ¶èµ·è¿™åº§æ¡¥æ¢çš„å·¥ç¨‹å¸ˆã€‚</strong></p>
<p>å¿«å»åŠ¨æ‰‹è¯•è¯•å§ï¼ğŸš€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Advent of Code 2025 æŒ‘æˆ˜å…¨æ‰‹å†™ä»£ç  Day 1 - ç§˜å¯†å…¥å£]]></title>    <link>https://juejin.cn/post/7578714759336443904</link>    <guid>https://juejin.cn/post/7578714759336443904</guid>    <pubDate>2025-12-01T09:27:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578714759336443904" data-draft-id="7578700798743625762" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Advent of Code 2025 æŒ‘æˆ˜å…¨æ‰‹å†™ä»£ç  Day 1 - ç§˜å¯†å…¥å£"/> <meta itemprop="keywords" content="Python,GitHub"/> <meta itemprop="datePublished" content="2025-12-01T09:27:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="linzeyang"/> <meta itemprop="url" content="https://juejin.cn/user/897656724654199"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Advent of Code 2025 æŒ‘æˆ˜å…¨æ‰‹å†™ä»£ç  Day 1 - ç§˜å¯†å…¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/897656724654199/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    linzeyang
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:27:20.000Z" title="Mon Dec 01 2025 09:27:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body cache result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ„Advent of Code 2025 æŒ‘æˆ˜å…¨æ‰‹å†™ä»£ç  Day 1 - ç§˜å¯†å…¥å£</h2>
<hr/>
<p>ç»ˆäºç­‰åˆ° AoC 2025 å¼€èµ›å•¦ï¼ğŸ‰ ç¬¬ä¸€å¤©é¢˜ç›® <code>Secret Entrance</code> éš¾åº¦ç®€å•ï¼ˆä¸€æ˜Ÿâ­ï¼‰ï¼Œä¸»è¦è€ƒå¯Ÿå¯¹ <em>å¾ªç¯ç»“æ„ï¼ˆCircular Bufferï¼‰</em> çš„ç†è§£å’Œæ¨¡è¿ç®—çš„è¿ç”¨ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/893549a9cdac44dbba1db100256d8e10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGluemV5YW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186040&amp;x-signature=FPV9ZsIAbhE%2BBHnplXx%2BM6b2fNg%3D" alt="advent-of-code-2025-day-1" loading="lazy"/></p>
<p><strong>ğŸ“– é¢˜ç›®é€Ÿè§ˆ</strong></p>
<p>é¢˜ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fadventofcode.com%2F2025%2Fday%2F1" target="_blank" title="https://adventofcode.com/2025/day/1" ref="nofollow noopener noreferrer">adventofcode.com/2025/day/1</a></p>
<p>æˆ‘ä»¬åœ¨åŒ—æç§˜å¯†å…¥å£é‡åˆ°ä¸€ä¸ªä¿é™©ç®±è½¬ç›˜ï¼Œåˆ»åº¦ <code>0-99</code>ï¼Œåˆå§‹ä½ç½® <code>50</code>ã€‚
è¾“å…¥æ˜¯ä¸€ä¸²æ—‹è½¬æŒ‡ä»¤ï¼ˆå¦‚ <code>L68</code>, <code>R48</code>ï¼‰ã€‚</p>
<ul>
<li><strong>Part 1</strong>ï¼šç»Ÿè®¡æ¯æ¬¡æ—‹è½¬<strong>ç»“æŸæ—¶</strong>ï¼ŒæŒ‡é’ˆåœåœ¨ <code>0</code> çš„æ¬¡æ•°ã€‚</li>
<li><strong>Part 2</strong>ï¼šç»Ÿè®¡æ—‹è½¬<strong>è¿‡ç¨‹ä¸­</strong>ï¼ˆåŒ…å«ç»“æŸç‚¹ï¼‰æŒ‡é’ˆæŒ‡å‘ <code>0</code> çš„æ€»æ¬¡æ•°ã€‚</li>
</ul>
<p><strong>ğŸ’¡ è§£é¢˜æ€è·¯ (Python ğŸ)</strong></p>
<ol>
<li><strong>å·§ç”¨å–æ¨¡ <code>%</code></strong>ï¼š
è½¬ç›˜æ˜¯ç¯å½¢çš„ï¼ŒPython çš„æ¨¡è¿ç®— <code>%</code> å°±èƒ½æå®š
<ul>
<li>å³è½¬ï¼š<code>(current + amount) % 100</code></li>
<li>å·¦è½¬ï¼š<code>(current - amount) % 100</code></li>
<li>Python çš„ <code>%</code> èƒ½å®Œç¾å¤„ç†è´Ÿæ•°ï¼ˆä¾‹å¦‚ <code>-1 % 100 = 99</code>ï¼‰ï¼Œç›´æ¥çœå»äº†ç¹ççš„è¾¹ç•Œåˆ¤æ–­ï¼Œä»£ç ç¬é—´æ¸…çˆ½ï¼</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-python" lang="python">current: <span class="hljs-built_in">int</span> = <span class="hljs-number">50</span>
out: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> direction, amount <span class="hljs-keyword">in</span> self.sequence:
    <span class="hljs-keyword">match</span> direction:
        <span class="hljs-keyword">case</span> <span class="hljs-string">"R"</span>:
            current = (current + amount) % <span class="hljs-number">100</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"L"</span>:
            current = (current - amount) % <span class="hljs-number">100</span>

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> current:
        out += <span class="hljs-number">1</span>
</code></pre>
<ol start="2">
<li><strong>Part 2 çš„ä¼˜åŒ–é™·é˜±</strong>ï¼š
é¢˜ç›®æç¤ºå¯èƒ½ä¼šæœ‰åƒ <code>R1000</code> è¿™ç§å¤§æ—‹è½¬ã€‚å¦‚æœä¸€æ­¥æ­¥æ¨¡æ‹Ÿï¼ˆfor loopï¼‰ï¼Œæ•ˆç‡ä¼šå¾ˆä½ã€‚
<ul>
<li><strong>æ•°å­¦è§£æ³•</strong>ï¼šä½¿ç”¨ <code>divmod(amount, 100)</code>ã€‚</li>
<li><strong>æ•´åœˆ</strong>ï¼šå•† (<code>div</code>) è¡¨ç¤ºè½¬äº†å‡ æ•´åœˆï¼Œæ¯åœˆå¿…ç„¶ç»è¿‡ä¸€æ¬¡ 0ã€‚</li>
<li><strong>æ®‹ä½™æ­¥æ•°</strong>ï¼šä½™æ•° (<code>mod</code>) æ˜¯å‰©ä¸‹çš„ä½ç§»ã€‚åªéœ€åˆ¤æ–­è¿™æœ€åä¸€æ®µä½ç§»æ˜¯å¦è·¨è¶Šäº† <code>0</code> ç•Œé™ï¼ˆR è·¨è¶Š 99-&gt;0ï¼ŒL è·¨è¶Š 0-&gt;99ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<pre><code class="hljs language-python" lang="python">current: <span class="hljs-built_in">int</span> = <span class="hljs-number">50</span>
out: <span class="hljs-built_in">int</span> = <span class="hljs-number">0</span>

<span class="hljs-keyword">for</span> direction, amount <span class="hljs-keyword">in</span> self.sequence:
    div, mod = <span class="hljs-built_in">divmod</span>(amount, <span class="hljs-number">100</span>)
    out += div

    <span class="hljs-keyword">match</span> direction:
        <span class="hljs-keyword">case</span> <span class="hljs-string">"R"</span>:
            <span class="hljs-keyword">if</span> current + mod &gt;= <span class="hljs-number">100</span>:
                out += <span class="hljs-number">1</span>

            current = (current + mod) % <span class="hljs-number">100</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">"L"</span>:
            <span class="hljs-keyword">if</span> current &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> mod &gt;= current:
                out += <span class="hljs-number">1</span>

            current = (current - mod) % <span class="hljs-number">100</span>

<span class="hljs-keyword">return</span> out
</code></pre>
<p><strong>âœ¨ ä»£ç å¤ç›˜</strong>
æœ€ç»ˆä»£ç å°†â€œè®¡ç®—ç»è¿‡æ¬¡æ•°â€å’Œâ€œæ›´æ–°ä½ç½®â€è§£è€¦ï¼Œé€»è¾‘éå¸¸æ¸…æ™°ã€‚ç›¸æ¯”äºæš´åŠ›æ¨¡æ‹Ÿï¼Œæ•°å­¦è®¡ç®—æ³•ä¸ä»…å¿«ï¼Œè€Œä¸”æ›´èƒ½ä½“ç°ç®—æ³•æ€ç»´ã€‚</p>
<p>å®Œæ•´ä»£ç ï¼šè®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flinzeyang%2Fadvent-of-code%2Fblob%2Fmain%2F2025%2Fday_01.py" target="_blank" title="https://github.com/linzeyang/advent-of-code/blob/main/2025/day_01.py" ref="nofollow noopener noreferrer">github</a></p>
<p>Happy Coding! å†²åˆºæ’è¡Œæ¦œï¼ğŸš€
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97dd75f1793a4ab180543b966fd612a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGluemV5YW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186040&amp;x-signature=VM8bTeuSt0PRRuPsmE6VSQ8UwTI%3D" alt="day-1-snapshot" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[IntersectionObserverï¼šç°ä»£Webå¼€å‘çš„äº¤å‰è§‚å¯Ÿè€…]]></title>    <link>https://juejin.cn/post/7578709098255482918</link>    <guid>https://juejin.cn/post/7578709098255482918</guid>    <pubDate>2025-12-01T10:28:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578709098255482918" data-draft-id="7577321767346913326" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="IntersectionObserverï¼šç°ä»£Webå¼€å‘çš„äº¤å‰è§‚å¯Ÿè€…"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-12-01T10:28:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Drift_Dream"/> <meta itemprop="url" content="https://juejin.cn/user/3107677514241500"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            IntersectionObserverï¼šç°ä»£Webå¼€å‘çš„äº¤å‰è§‚å¯Ÿè€…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3107677514241500/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Drift_Dream
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:28:17.000Z" title="Mon Dec 01 2025 10:28:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.7;font-weight:400;font-size:16px;overflow-x:hidden;color:#212122}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-bottom:8px;padding-bottom:8px}.markdown-body h1{color:#a0a0a0;font-size:38px;margin-top:32px;padding-top:32px}.markdown-body h2{color:#fff;background-color:#212122;width:fit-content;border-bottom-right-radius:100px;margin-top:47px;margin-bottom:16px;padding:4px 48px 4px 8px;line-height:1.7;font-size:30px;transition:all .3s ease-out}.markdown-body h2:hover{border-bottom-right-radius:50px;transition:all .3s ease-out}.markdown-body h3{font-size:24px;padding-left:8px;margin-top:32px;border-bottom:2px solid #c6c4c4;line-height:1.7}.markdown-body h4{font-size:20px;padding-left:8px;margin-top:32px;border-bottom:1px solid #ddd}.markdown-body h5{font-size:16px;margin-top:24px}.markdown-body h6{margin-top:16px;line-height:1.1}.markdown-body p{font-size:16px;text-align:start;white-space:normal;text-size-adjust:auto;line-height:2;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%;margin:auto;padding-left:8px;padding-right:8px}.markdown-body hr{border:none;border-top:4px double #212122;margin-top:32px;margin-bottom:32px;text-align:center}.markdown-body hr:after{content:"â™¥";display:inline-block;position:relative;top:-15px;padding:0 10px;color:#212122;font-size:18px}.markdown-body code{word-break:break-word;overflow-x:auto;background-color:#f1f1f1;color:#ef7060;font-size:14px;padding:.065em 6px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.7;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);margin:32px 16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-color:#212122;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);background-size:40px}.markdown-body pre&gt;code{font-size:14px;padding:16px 8px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#fff;background:#272822}.markdown-body pre&gt;code::-webkit-scrollbar{height:10px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-track{box-shadow:inset 0 0 6px rgba(0,0,0,.3);border-radius:3px;background-color:#f5f5f5}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{border-radius:3px;box-shadow:inset 0 0 6px rgba(0,0,0,.3);background-color:#555}.markdown-body a{color:#ef7060;padding:2px;text-decoration:none;border-bottom:.125em solid #ef7060;border-radius:2px;box-shadow:inset 0 -.025em 0 #ef7060;transition:box-shadow .27s cubic-bezier(.77,0,.175,1),color .27s cubic-bezier(.77,0,.175,1)}.markdown-body a:focus,.markdown-body a:hover{outline:none;box-shadow:inset 0 -1.5em 0 #ef7060;color:#fff}.markdown-body a:before{content:"â‡² ";vertical-align:top;margin-left:2px;font-family:dart!important;font-size:12px;color:inherit;opacity:.7}.markdown-body table{background:#fbfbfb;border-radius:4px;border-collapse:collapse;margin:auto;padding:5px;width:95%;box-shadow:0 5px 10px rgba(0,0,0,.1);animation:float 5s infinite}.markdown-body table th{color:#fff;background:#212122;border-bottom:1px solid #9ea7af;border-right:1px solid #343a45;font-size:18px;padding:16px;text-align:left;vertical-align:middle}.markdown-body table th:first-child{border-top-left-radius:4px}.markdown-body table th:last-child{border-top-right-radius:4px;border-right:none}.markdown-body table tr{border-top:1px solid #c1c3d1;border-bottom:1px solid #c1c3d1;color:#666b85}.markdown-body table tr:hover td{background:#212122;color:#fff;border-top:1px solid #22262e}.markdown-body table tr:first-child{border-top:none}.markdown-body table tr:last-child{border-bottom:none}.markdown-body table tr:nth-child(odd) td{background:#f1f1f1}.markdown-body table tr:nth-child(odd):hover td{background:#212122}.markdown-body table tr:last-child td:first-child{border-bottom-left-radius:4px}.markdown-body table tr:last-child td:last-child{border-bottom-right-radius:4px}.markdown-body table td{background:#fbfbfb;padding:16px;text-align:left;vertical-align:middle;font-size:16px;border-right:1px solid #c1c3d1}.markdown-body table td:last-child{border-right:0}.markdown-body blockquote{color:#777;padding:1px 16px;margin:24px 0;border-left:4px solid #c6c4c4;background-color:#f1f1f1;transition:all .3s ease-out;border-radius:4px}.markdown-body blockquote:hover{border-left-color:#212122;background-color:#212122;color:#fff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:24px}.markdown-body ol li,.markdown-body ul li{margin-bottom:6px;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body span.math{margin-left:32px;font-size:18px;font-weight:700}@media (max-width:720px){.markdown-body h1{font-size:30.4px}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:19.2px}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:12.8px}}</style><style data-highlight="" data-highlight-key="monokai">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#272822;color:#ddd}.hljs-keyword,.hljs-literal,.hljs-name,.hljs-selector-tag,.hljs-strong,.hljs-tag{color:#f92672}.hljs-code{color:#66d9ef}.hljs-class .hljs-title{color:#fff}.hljs-attribute,.hljs-link,.hljs-regexp,.hljs-symbol{color:#bf79db}.hljs-addition,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-emphasis,.hljs-section,.hljs-selector-attr,.hljs-selector-pseudo,.hljs-string,.hljs-subst,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#a6e22e}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#75715e}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-section,.hljs-selector-id,.hljs-selector-tag,.hljs-title,.hljs-type{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€</h2>
<p>åœ¨Webå¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦çŸ¥é“æŸä¸ªå…ƒç´ æ˜¯å¦è¿›å…¥äº†å¯è§†åŒºåŸŸã€‚ä¼ ç»Ÿçš„æ–¹å¼æ˜¯é€šè¿‡ç›‘å¬scrolläº‹ä»¶ï¼Œä½†è¿™ç§å®ç°æ–¹å¼æ€§èƒ½è¾ƒå·®ï¼Œå®¹æ˜“é€ æˆé¡µé¢å¡é¡¿ã€‚ä»Šå¤©æˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸ªç°ä»£åŒ–çš„è§£å†³æ–¹æ¡ˆâ€”â€”<strong>IntersectionObserver API</strong>ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯IntersectionObserverï¼Ÿ</h2>
<p>IntersectionObserverï¼ˆäº¤å‰è§‚å¯Ÿè€…ï¼‰æ˜¯ä¸€ä¸ªæµè§ˆå™¨åŸç”ŸAPIï¼Œå®ƒå¯ä»¥<strong>å¼‚æ­¥è§‚å¯Ÿ</strong>ç›®æ ‡å…ƒç´ ä¸å…¶ç¥–å…ˆå…ƒç´ æˆ–è§†çª—ï¼ˆviewportï¼‰çš„äº¤å‰çŠ¶æ€ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯å½“è¢«è§‚å¯Ÿçš„å…ƒç´ è¿›å…¥æˆ–ç¦»å¼€å¯è§†åŒºåŸŸæ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨é€šçŸ¥æˆ‘ä»¬ã€‚</p>
<h3 data-id="heading-2">ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ è¦åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨å±å¹•å†…ï¼š</p>
<p><strong>ä¼ ç»Ÿæ–¹å¼</strong>ï¼šç›‘å¬scrolläº‹ä»¶ï¼Œé¢‘ç¹è®¡ç®—å…ƒç´ ä½ç½®ï¼Œæ€§èƒ½å¼€é”€å¤§</p>
<p><strong>IntersectionObserver</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒï¼Œå¼‚æ­¥å¤„ç†ï¼Œæ€§èƒ½é«˜æ•ˆ</p>
<h2 data-id="heading-3">åŸºæœ¬ç”¨æ³•</h2>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºè§‚å¯Ÿè€…å®ä¾‹</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
  <span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…ƒç´ å¯è§äº†"</span>);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å…ƒç´ ä¸å¯è§äº†"</span>);
      }
    });
  },
  {
    <span class="hljs-attr">root</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".container"</span>), <span class="hljs-comment">// æ ¹å…ƒç´ ï¼Œnullè¡¨ç¤ºè§†çª—</span>
    <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.5</span>, <span class="hljs-comment">// é˜ˆå€¼ï¼Œè§¦å‘å›è°ƒçš„ç›¸äº¤æ¯”ä¾‹ï¼ˆ0-1ï¼‰ï¼Œå¯ä¸ºæ•°å­—æˆ–è€…æ•°ç»„[0, 0.25, 0.5, 0.75, 1]ï¼Œåœ¨0%ï¼Œ25%ï¼Œ50%...çš„æ—¶å€™éƒ½è§¦å‘</span>
    <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">"0px"</span>, <span class="hljs-comment">// æ ¹å…ƒç´ çš„å¤–è¾¹è·</span>
  }
);

<span class="hljs-comment">// å¼€å§‹è§‚å¯Ÿç›®æ ‡å…ƒç´ </span>
<span class="hljs-keyword">const</span> target = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".target-element"</span>);
observer.<span class="hljs-title function_">observe</span>(target);

<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">".item"</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
  observer.<span class="hljs-title function_">observe</span>(item);
});
</code></pre>
<h2 data-id="heading-4">ä½¿ç”¨æ¡ˆä¾‹</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>IntersectionObserver<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    * {
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">box-sizing</span>: border-box;
    }
    <span class="hljs-selector-class">.container</span> {
      <span class="hljs-attribute">width</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
      <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;
      <span class="hljs-attribute">overflow-y</span>: auto;
      <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
      <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">200px</span>;
    }
    <span class="hljs-selector-class">.item</span> {
      <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;
      <span class="hljs-attribute">line-height</span>: <span class="hljs-number">200px</span>;
      <span class="hljs-attribute">text-align</span>: center;
      <span class="hljs-attribute">background-color</span>: beige;
    }
    <span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:last-child</span> {
      <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;
    }
    <span class="hljs-selector-class">.item</span><span class="hljs-selector-class">.visible</span> {
      <span class="hljs-attribute">background-color</span>: aqua;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"container"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 1<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 2<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 3<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 4<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 5<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>&gt;</span>å…ƒç´ 6<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
      <span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
        entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
          <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
            entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">"visible"</span>);
          } <span class="hljs-keyword">else</span> {
            entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">"visible"</span>);
          }
        });
      },
      {
        <span class="hljs-attr">root</span>: <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">".container"</span>),
        <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.5</span>,
      }
    );
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">".item"</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> {
      observer.<span class="hljs-title function_">observe</span>(item);
    });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18635e6788b9458ca06e31e16e63d81e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765189697&amp;x-signature=lsYuaaIlWNrKETw%2FpdA%2FHd1DQBQ%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">Vue 3 å®æˆ˜åº”ç”¨</h2>
<h3 data-id="heading-6">ç²¾ç®€ç‰ˆæ»šåŠ¨åŠ¨ç”»ï¼ˆç±»AOSï¼‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"aos-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
      <span class="hljs-attr">v-for</span>=<span class="hljs-string">"(feature, index) in features"</span>
      <span class="hljs-attr">:key</span>=<span class="hljs-string">"feature.id"</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"featureRefs"</span>
      <span class="hljs-attr">class</span>=<span class="hljs-string">"feature-card"</span>
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ animate: isFeatureVisible[index] }"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ feature.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ feature.description }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, nextTick, useTemplateRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> features = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§ä¸€"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸€ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§äºŒ"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬äºŒä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§ä¸‰"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸‰ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§å››"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬å››ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§äº”"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬äº”ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§å…­"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬å…­ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§ä¸ƒ"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸ƒä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§å…«"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬å…«ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§ä¹"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¹ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§å"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬åä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">11</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§åä¸€"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬åä¸€ä¸ªç‰¹æ€§çš„æè¿°"</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">12</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‰¹æ€§åäºŒ"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬åäºŒä¸ªç‰¹æ€§çš„æè¿°"</span> },
]);

<span class="hljs-keyword">const</span> isFeatureVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-title class_">Array</span>(features.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>));

<span class="hljs-keyword">const</span> featureRefs = <span class="hljs-title function_">useTemplateRef</span>(<span class="hljs-string">"featureRefs"</span>);

<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  featureRefs.<span class="hljs-property">value</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">ref, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> featureObserver = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (entries[<span class="hljs-number">0</span>]) isFeatureVisible.<span class="hljs-property">value</span>[index] = entries[<span class="hljs-number">0</span>].<span class="hljs-property">isIntersecting</span>;
    });
    featureObserver.<span class="hljs-title function_">observe</span>(ref);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.aos-container</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">1080px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">overflow-x</span>: hidden;
}

<span class="hljs-selector-class">.feature-card</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(-<span class="hljs-number">50px</span>);
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.6s</span> ease;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-class">.feature-card</span><span class="hljs-selector-class">.animate</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">0</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3ee93290c324911b7eba410891bf08d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765189697&amp;x-signature=c6XSNjjtco%2FMYQfWYnyTB2KpWdI%3D" alt="image.png" loading="lazy"/></p>
<p>å¤šè¯´ä¸€å¥ï¼Œå¦‚æœä¸å¾ªç¯<strong>featureRefs.value</strong>,åªä½¿ç”¨ä¸€ä¸ª<strong>Observer</strong>ï¼Œè¿˜å¯ä»¥è¿™ä¹ˆå†™ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> isFeatureVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-title class_">Array</span>(features.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>));

<span class="hljs-keyword">const</span> featureRefs = <span class="hljs-title function_">useTemplateRef</span>(<span class="hljs-string">"featureRefs"</span>);

<span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-literal">null</span> | <span class="hljs-title class_">IntersectionObserver</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();
  observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">entry</span>) =&gt;</span> {
      <span class="hljs-comment">// æ‰¾åˆ°ç›®æ ‡å…ƒç´ åœ¨ featureRefs ä¸­çš„ç´¢å¼•</span>
      <span class="hljs-keyword">const</span> index = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(featureRefs.<span class="hljs-property">value</span>!).<span class="hljs-title function_">indexOf</span>(
        entry.<span class="hljs-property">target</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLDivElement</span>
      );
      isFeatureVisible.<span class="hljs-property">value</span>[index] = entry.<span class="hljs-property">isIntersecting</span>;
    });
  });

  featureRefs.<span class="hljs-property">value</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">ref</span>) =&gt;</span> {
    observer?.<span class="hljs-title function_">observe</span>(ref);
  });
});
</code></pre>
<h3 data-id="heading-7">å›¾ç‰‡æ‡’åŠ è½½ç»„ä»¶</h3>
<h4 data-id="heading-8">ç»„ä»¶ä»£ç </h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy-image"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!isLoaded"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>å›¾ç‰‡åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">img</span>
      <span class="hljs-attr">:src</span>=<span class="hljs-string">"isVisible ? src : placeholder"</span>
      <span class="hljs-attr">:alt</span>=<span class="hljs-string">"alt"</span>
      <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ loaded: isVisible }"</span>
      @<span class="hljs-attr">load</span>=<span class="hljs-string">"onLoad"</span>
      <span class="hljs-attr">ref</span>=<span class="hljs-string">"imgElement"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>({
  <span class="hljs-attr">src</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">alt</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">placeholder</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,
    <span class="hljs-attr">default</span>: <span class="hljs-string">""</span>,
  },
});

<span class="hljs-keyword">const</span> imgElement = ref&lt;<span class="hljs-title class_">HTMLImageElement</span>&gt;();
<span class="hljs-keyword">const</span> isVisible = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> isLoaded = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);

<span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-title class_">IntersectionObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
    <span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (entries[<span class="hljs-number">0</span>] &amp;&amp; entries[<span class="hljs-number">0</span>].<span class="hljs-property">isIntersecting</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å›¾ç‰‡è¿›å…¥è§†å£"</span>);
        isVisible.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (imgElement.<span class="hljs-property">value</span>) {
          observer?.<span class="hljs-title function_">unobserve</span>(imgElement.<span class="hljs-property">value</span>);
        }
      }
    },
    { <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span> }
  );

  <span class="hljs-keyword">if</span> (imgElement.<span class="hljs-property">value</span>) {
    observer.<span class="hljs-title function_">observe</span>(imgElement.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (observer) {
    observer.<span class="hljs-title function_">disconnect</span>();
  }
});

<span class="hljs-keyword">const</span> <span class="hljs-title function_">onLoad</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"å›¾ç‰‡åŠ è½½å®Œæˆ"</span>);
  isLoaded.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
};
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.lazy-image</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">display</span>: inline-block;
  <span class="hljs-selector-tag">img</span> {
    <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.3s</span> ease;
    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: auto;
  }

  <span class="hljs-selector-tag">img</span><span class="hljs-selector-pseudo">:not</span>(<span class="hljs-selector-class">.loaded</span>) {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.5</span>;
  }

  <span class="hljs-selector-tag">img</span><span class="hljs-selector-class">.loaded</span> {
    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
  }

  <span class="hljs-selector-class">.loading</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">text-align</span>: center;
    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;
    <span class="hljs-attribute">white-space</span>: nowrap;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<h4 data-id="heading-9">ä½¿ç”¨ç»„ä»¶</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy-image-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"height-1600px"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy-image-item"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">LazyImg</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://picsum.photos/400/400"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"éšæœºå›¾ç‰‡"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">LazyImg</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"./LazyImg.vue"</span>;
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.lazy-image-container</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-selector-class">.height-1600px</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">1600px</span>;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<h3 data-id="heading-10">æ— é™æ»šåŠ¨ç¤ºä¾‹</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"scrollContainer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"infinite-scroll"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"items-list"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in visibleItems"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"item.id"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"list-item"</span>&gt;</span>
        {{ item.content }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- å“¨å…µå…ƒç´ ï¼Œä¸“é—¨ç”¨äºè§¦å‘åŠ è½½ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sentinel"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"sentinel"</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"hasMore"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isLoading"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loading"</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"!hasMore"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"no-more"</span>&gt;</span>æ²¡æœ‰æ›´å¤šå†…å®¹äº†<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted, onUnmounted, nextTick } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

interface <span class="hljs-title class_">Item</span> {
  <span class="hljs-attr">id</span>: number;
  <span class="hljs-attr">content</span>: string;
}

<span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®</span>
<span class="hljs-keyword">const</span> allItems = ref&lt;<span class="hljs-title class_">Item</span>[]&gt;(
  <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>({ <span class="hljs-attr">length</span>: <span class="hljs-number">100</span> }, <span class="hljs-function">(<span class="hljs-params">_, i</span>) =&gt;</span> ({
    <span class="hljs-attr">id</span>: i + <span class="hljs-number">1</span>,
    <span class="hljs-attr">content</span>: <span class="hljs-string">`åˆ—è¡¨é¡¹ <span class="hljs-subst">${i + <span class="hljs-number">1</span>}</span> - è¿™æ˜¯ä¸€äº›ç¤ºä¾‹å†…å®¹ï¼Œç”¨äºå±•ç¤ºæ— é™æ»šåŠ¨åŠŸèƒ½`</span>,
  }))
);

<span class="hljs-keyword">const</span> visibleItems = ref&lt;<span class="hljs-title class_">Item</span>[]&gt;([]);
<span class="hljs-keyword">const</span> isLoading = ref&lt;boolean&gt;(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">const</span> hasMore = ref&lt;boolean&gt;(<span class="hljs-literal">true</span>);
<span class="hljs-keyword">const</span> <span class="hljs-attr">pageSize</span>: number = <span class="hljs-number">10</span>;
<span class="hljs-keyword">let</span> <span class="hljs-attr">currentPage</span>: number = <span class="hljs-number">0</span>;

<span class="hljs-comment">// åŠ è½½æ•°æ®</span>
<span class="hljs-keyword">const</span> loadMore = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
  <span class="hljs-keyword">if</span> (isLoading.<span class="hljs-property">value</span> || !hasMore.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span>;

  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">const</span> start = currentPage * pageSize;
    <span class="hljs-keyword">const</span> end = start + pageSize;
    <span class="hljs-keyword">const</span> newItems = allItems.<span class="hljs-property">value</span>.<span class="hljs-title function_">slice</span>(start, end);

    <span class="hljs-keyword">if</span> (newItems.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      visibleItems.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(...newItems);
      currentPage++;
      hasMore.<span class="hljs-property">value</span> = end &lt; allItems.<span class="hljs-property">value</span>.<span class="hljs-property">length</span>;
    } <span class="hljs-keyword">else</span> {
      hasMore.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }

    isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
  }, <span class="hljs-number">500</span>);
};

<span class="hljs-comment">// åˆå§‹åŠ è½½</span>
<span class="hljs-title function_">loadMore</span>();

<span class="hljs-comment">// æ— é™æ»šåŠ¨é€»è¾‘</span>
<span class="hljs-keyword">const</span> scrollContainer = ref&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> sentinel = ref&lt;<span class="hljs-title class_">HTMLDivElement</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>); <span class="hljs-comment">// å“¨å…µå…ƒç´ </span>
<span class="hljs-keyword">let</span> <span class="hljs-attr">observer</span>: <span class="hljs-title class_">IntersectionObserver</span> | <span class="hljs-literal">null</span> = <span class="hljs-literal">null</span>;

<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();

  observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
    <span class="hljs-function">(<span class="hljs-params">entries: IntersectionObserverEntry[]</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(entries);
      <span class="hljs-comment">// åªæœ‰å½“å“¨å…µå…ƒç´ è¿›å…¥è§†å£ä¸”ä¸åœ¨åŠ è½½çŠ¶æ€æ—¶æ‰è§¦å‘</span>
      <span class="hljs-keyword">if</span> (
        entries[<span class="hljs-number">0</span>] &amp;&amp;
        entries[<span class="hljs-number">0</span>].<span class="hljs-property">isIntersecting</span> &amp;&amp;
        !isLoading.<span class="hljs-property">value</span> &amp;&amp;
        hasMore.<span class="hljs-property">value</span>
      ) {
        <span class="hljs-title function_">loadMore</span>();
      }
    },
    {
      <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span>,
      <span class="hljs-attr">root</span>: scrollContainer.<span class="hljs-property">value</span>,
    }
  );

  <span class="hljs-keyword">if</span> (sentinel.<span class="hljs-property">value</span>) {
    observer.<span class="hljs-title function_">observe</span>(sentinel.<span class="hljs-property">value</span>);
  }
});

<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (observer) {
    observer.<span class="hljs-title function_">disconnect</span>();
  }
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.sentinel</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">1px</span>; <span class="hljs-comment">/* æå°çš„é«˜åº¦ï¼Œä¸å½±å“å¸ƒå±€ */</span>
}
<span class="hljs-selector-class">.infinite-scroll</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;
  <span class="hljs-attribute">overflow</span>: auto;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">600px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-selector-class">.items-list</span> {
  <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;
}

<span class="hljs-selector-class">.list-item</span> {
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-selector-class">.load-trigger</span>,
<span class="hljs-selector-class">.loading</span>,
<span class="hljs-selector-class">.no-more</span> {
  <span class="hljs-attribute">text-align</span>: center;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f221b744e1a34c599e48b9957d6a4f69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765189697&amp;x-signature=kYL3yZeXE%2F%2Fa5GhpqKDwlBj7Zn8%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-11">å¹¿å‘Šæ›å…‰</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">"ad in ads"</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">"ad.id"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"adRefs"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"ad-banner"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>{{ ad.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>{{ ad.description }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>æ›å…‰æ¬¡æ•°: {{ ad.impressions }}<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"stats"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>å¹¿å‘Šç»Ÿè®¡<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æ€»æ›å…‰æ¬¡æ•°: {{ totalImpressions }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, computed, onMounted, nextTick, useTemplateRef } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;

<span class="hljs-keyword">const</span> ads = <span class="hljs-title function_">ref</span>([
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"å¹¿å‘Šä¸€"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸€ä¸ªå¹¿å‘Š"</span>, <span class="hljs-attr">impressions</span>: <span class="hljs-number">0</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"å¹¿å‘ŠäºŒ"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬äºŒä¸ªå¹¿å‘Š"</span>, <span class="hljs-attr">impressions</span>: <span class="hljs-number">0</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"å¹¿å‘Šä¸‰"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬ä¸‰ä¸ªå¹¿å‘Š"</span>, <span class="hljs-attr">impressions</span>: <span class="hljs-number">0</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"å¹¿å‘Šå››"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬å››ä¸ªå¹¿å‘Š"</span>, <span class="hljs-attr">impressions</span>: <span class="hljs-number">0</span> },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"å¹¿å‘Šäº”"</span>, <span class="hljs-attr">description</span>: <span class="hljs-string">"è¿™æ˜¯ç¬¬äº”ä¸ªå¹¿å‘Š"</span>, <span class="hljs-attr">impressions</span>: <span class="hljs-number">0</span> },
]);

<span class="hljs-keyword">const</span> adRefs = <span class="hljs-title function_">useTemplateRef</span>(<span class="hljs-string">"adRefs"</span>);
<span class="hljs-keyword">const</span> observers = <span class="hljs-title function_">ref</span>([]);

<span class="hljs-keyword">const</span> totalImpressions = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> ads.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, ad</span>) =&gt;</span> sum + ad.<span class="hljs-property">impressions</span>, <span class="hljs-number">0</span>);
});

<span class="hljs-title function_">onMounted</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">nextTick</span>();

  adRefs.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">el, index</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(
      <span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (entries[<span class="hljs-number">0</span>].<span class="hljs-property">isIntersecting</span>) {
          <span class="hljs-comment">// å¹¿å‘Šè¿›å…¥è§†å£ï¼Œè®°å½•æ›å…‰</span>
          ads.<span class="hljs-property">value</span>[index].<span class="hljs-property">impressions</span>++;

          <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œå¯ä»¥å‘é€ç»Ÿè®¡è¯·æ±‚</span>
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¹¿å‘Š <span class="hljs-subst">${ads.value[index].title}</span> æ›å…‰ä¸€æ¬¡`</span>);
        }
      },
      { <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.5</span> }
    );

    observer.<span class="hljs-title function_">observe</span>(el);
    observers.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(observer);
  });
});
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.ad-container</span> {
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;
  <span class="hljs-attribute">overflow-y</span>: auto;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
}

<span class="hljs-selector-class">.ad-banner</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.stats</span> {
  <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">30px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b32c1c00f6846dea2791587bc25002c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRHJpZnRfRHJlYW0=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765189697&amp;x-signature=MvXZNSnCPbkCCJqgCJRZYtIsbx8%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±åº¦å­¦ä¹ åŸºç¡€åŸç†ï¼šä»ç†è®ºåˆ°PyTorchå®è·µ]]></title>    <link>https://juejin.cn/post/7578724773992792090</link>    <guid>https://juejin.cn/post/7578724773992792090</guid>    <pubDate>2025-12-01T10:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578724773992792090" data-draft-id="7575083657994371099" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±åº¦å­¦ä¹ åŸºç¡€åŸç†ï¼šä»ç†è®ºåˆ°PyTorchå®è·µ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-12-01T10:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆè¯·æ±‚å‡ºæˆ˜"/> <meta itemprop="url" content="https://juejin.cn/user/4222596374865550"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±åº¦å­¦ä¹ åŸºç¡€åŸç†ï¼šä»ç†è®ºåˆ°PyTorchå®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222596374865550/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆè¯·æ±‚å‡ºæˆ˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T10:34:15.000Z" title="Mon Dec 01 2025 10:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>ä¸€ã€æ·±åº¦å­¦ä¹ å…¨æ™¯å›¾</strong></h2>
<h3 data-id="heading-1">1.1 äººå·¥æ™ºèƒ½çš„æŠ€æœ¯æ ˆå…³ç³»</h3>
<p><strong>äººå·¥æ™ºèƒ½ &gt; æœºå™¨å­¦ä¹  &gt; æ·±åº¦å­¦ä¹  &gt; å¤§è¯­è¨€æ¨¡å‹</strong></p>
<p>è¿™ä¸ªå…³ç³»é“¾å¯ä»¥è¿™æ ·ç†è§£ï¼š</p>
<ul>
<li><strong>äººå·¥æ™ºèƒ½</strong>ï¼šç»ˆæç›®æ ‡ï¼Œè®©æœºå™¨å…·å¤‡äººç±»æ™ºèƒ½</li>
<li><strong>æœºå™¨å­¦ä¹ </strong>ï¼šå®ç°AIçš„æ ¸å¿ƒæ–¹æ³•ï¼Œè®©è®¡ç®—æœºä»æ•°æ®ä¸­å­¦ä¹ </li>
<li><strong>æ·±åº¦å­¦ä¹ </strong>ï¼šæœºå™¨å­¦ä¹ çš„æœ€å¼ºåˆ†æ”¯ï¼Œä½¿ç”¨ç¥ç»ç½‘ç»œæ¨¡æ‹Ÿäººè„‘</li>
<li><strong>å¤§è¯­è¨€æ¨¡å‹</strong>ï¼šæ·±åº¦å­¦ä¹ çš„æˆåŠŸåº”ç”¨ï¼Œå¦‚ChatGPT</li>
</ul>
<blockquote>
<p>ğŸ¯ <strong>é€šä¿—ç†è§£</strong>ï¼š</p>
<ul>
<li>AIå°±åƒ"å­¦ä¼šå¼€è½¦"è¿™ä¸ªç›®æ ‡</li>
<li>æœºå™¨å­¦ä¹ æ˜¯"é€šè¿‡ç»ƒä¹ æŒæ¡é©¾é©¶æŠ€æœ¯"</li>
<li>æ·±åº¦å­¦ä¹ æ˜¯"æœ€å…ˆè¿›çš„é©¾é©¶è®­ç»ƒæ–¹æ³•"</li>
<li>å¤§è¯­è¨€æ¨¡å‹æ˜¯"ç”¨è¿™ç§æ–¹æ³•è®­ç»ƒå‡ºçš„èµ›è½¦æ‰‹"</li>
</ul>
</blockquote>
<h3 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆéœ€è¦æ·±åº¦å­¦ä¹ ï¼Ÿ</h3>
<p><strong>ä¼ ç»Ÿç¼–ç¨‹çš„å±€é™</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ä¼ ç»Ÿæ–¹æ³•ï¼šéœ€è¦æ˜ç¡®è§„åˆ™</span>
<span class="hljs-keyword">if</span> å›¾ç‰‡ä¸­æœ‰èƒ¡é¡» <span class="hljs-keyword">and</span> å›¾ç‰‡ä¸­æœ‰å°–è€³æœµ:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"çŒ«"</span>
<span class="hljs-keyword">else</span>:
    <span class="hljs-keyword">return</span> <span class="hljs-string">"ä¸æ˜¯çŒ«"</span>
</code></pre>
<p><strong>æ·±åº¦å­¦ä¹ çš„ä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ·±åº¦å­¦ä¹ æ–¹æ³•ï¼šä»æ•°æ®ä¸­å­¦ä¹ è§„åˆ™</span>
æ¨¡å‹ = è®­ç»ƒ(æˆåƒä¸Šä¸‡å¼ çŒ«çš„å›¾ç‰‡)
<span class="hljs-keyword">return</span> æ¨¡å‹.predict(æ–°å›¾ç‰‡)
</code></pre>
<h2 data-id="heading-3"><strong>äºŒã€ç¯å¢ƒæ­å»ºä¸PyTorchå…¥é—¨</strong></h2>
<h3 data-id="heading-4">2.1 ç¯å¢ƒé…ç½®ï¼šæ·±åº¦å­¦ä¹ çš„"å¨æˆ¿"</h3>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼Ÿ</strong>
å°±åƒä¸åŒçš„èœéœ€è¦ä¸åŒçš„å¨æˆ¿è®¾å¤‡ï¼Œä¸åŒçš„AIé¡¹ç›®éœ€è¦ä¸åŒçš„è½¯ä»¶ç‰ˆæœ¬ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºä¸“ç”¨ç¯å¢ƒ</span>
conda create --name deeplearning python=3.9

<span class="hljs-comment"># æ¿€æ´»ç¯å¢ƒ</span>
conda activate deeplearning

<span class="hljs-comment"># å®‰è£…æ ¸å¿ƒå·¥å…·åŒ…</span>
pip install torch torchvision numpy matplotlib
</code></pre>
<h3 data-id="heading-5">2.2 PyTorchï¼šæ·±åº¦å­¦ä¹ çš„"ä¸‡èƒ½å·¥å…·ç®±"</h3>
<p><strong>PyTorchçš„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>æ˜“ç”¨æ€§</strong>ï¼šä»£ç åƒæ™®é€šPythonä¸€æ ·ç›´è§‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šæ”¯æŒåŠ¨æ€è®¡ç®—å›¾ï¼Œè°ƒè¯•æ–¹ä¾¿</li>
<li><strong>ç”Ÿæ€å®Œå–„</strong>ï¼šæœ‰å¤§é‡é¢„è®­ç»ƒæ¨¡å‹å’Œå·¥å…·</li>
</ul>
<h2 data-id="heading-6"><strong>ä¸‰ã€æ·±åº¦å­¦ä¹ çš„æ•°å­¦åŸºçŸ³</strong></h2>
<h3 data-id="heading-7">3.1 ä»æ ‡é‡åˆ°å¼ é‡ï¼šç†è§£æ•°æ®çš„ç»´åº¦</h3>
<p><strong>æ ‡é‡ - å•ä¸ªæ•°å­—</strong></p>
<pre><code class="hljs language-python" lang="python">temperature = <span class="hljs-number">25.5</span>    <span class="hljs-comment"># æ¸©åº¦ï¼Œé›¶ç»´æ•°æ®</span>
weight = <span class="hljs-number">70.2</span>         <span class="hljs-comment"># ä½“é‡ï¼Œé›¶ç»´æ•°æ®</span>
</code></pre>
<p><strong>å‘é‡ - ä¸€ç»´æ•°ç»„</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç‰¹å¾å‘é‡ï¼šæè¿°ä¸€ä¸ªäººçš„å¤šä¸ªç‰¹å¾</span>
person_features = [<span class="hljs-number">25</span>, <span class="hljs-number">175</span>, <span class="hljs-number">70</span>]  <span class="hljs-comment"># [å¹´é¾„, èº«é«˜, ä½“é‡]</span>
</code></pre>
<p><strong>çŸ©é˜µ - äºŒç»´è¡¨æ ¼</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¤šä¸ªäººçš„ç‰¹å¾è¡¨æ ¼</span>
<span class="hljs-comment">#       å¹´é¾„  èº«é«˜  ä½“é‡</span>
people = [[<span class="hljs-number">25</span>, <span class="hljs-number">175</span>, <span class="hljs-number">70</span>],   <span class="hljs-comment"># ç¬¬ä¸€ä¸ªäºº</span>
          [<span class="hljs-number">30</span>, <span class="hljs-number">180</span>, <span class="hljs-number">75</span>],   <span class="hljs-comment"># ç¬¬äºŒä¸ªäºº  </span>
          [<span class="hljs-number">28</span>, <span class="hljs-number">168</span>, <span class="hljs-number">65</span>]]   <span class="hljs-comment"># ç¬¬ä¸‰ä¸ªäºº</span>
</code></pre>
<p><strong>å¼ é‡ - å¤šç»´æ•°æ®</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å½©è‰²å›¾ç‰‡ï¼šé«˜åº¦ Ã— å®½åº¦ Ã— é¢œè‰²é€šé“</span>
image_tensor = torch.randn(<span class="hljs-number">224</span>, <span class="hljs-number">224</span>, <span class="hljs-number">3</span>)

<span class="hljs-comment"># è§†é¢‘æ•°æ®ï¼šæ—¶é—´å¸§ Ã— é«˜åº¦ Ã— å®½åº¦ Ã— é€šé“</span>
video_tensor = torch.randn(<span class="hljs-number">100</span>, <span class="hljs-number">224</span>, <span class="hljs-number">224</span>, <span class="hljs-number">3</span>)
</code></pre>
<blockquote>
<p>ğŸ§© <strong>ç»´åº¦ç†è§£æŠ€å·§</strong>ï¼š
æ•°ä¸€ä¸‹æœ‰å¤šå°‘ä¸ªæ–¹æ‹¬å·å°±æ˜¯å‡ ç»´æ•°æ®
<code>5</code> â†’ 0ç»´ï¼Œ<code>[1,2,3]</code> â†’ 1ç»´ï¼Œ<code>[[1,2],[3,4]]</code> â†’ 2ç»´</p>
</blockquote>
<h3 data-id="heading-8">3.2 PyTorchå¼ é‡æ“ä½œå®æˆ˜</h3>
<h4 data-id="heading-9">åˆ›å»ºå¼ é‡çš„ä¸‰ç§æ–¹å¼</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch

<span class="hljs-comment"># 1. ä»æ•°æ®ç›´æ¥åˆ›å»º</span>
x = torch.tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])

<span class="hljs-comment"># 2. éšæœºç”Ÿæˆï¼ˆæ›´æ¥è¿‘çœŸå®åœºæ™¯ï¼‰</span>
y = torch.randn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)  <span class="hljs-comment"># æ­£æ€åˆ†å¸ƒéšæœºæ•°</span>

<span class="hljs-comment"># 3. ç‰¹æ®Šå€¼å¡«å……</span>
z = torch.zeros(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># å…¨é›¶çŸ©é˜µ</span>
ones = torch.ones(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>) <span class="hljs-comment"># å…¨1çŸ©é˜µ</span>
</code></pre>
<h4 data-id="heading-10">å½¢çŠ¶æ“ä½œï¼šæ•°æ®çš„"å˜å½¢æœ¯"</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é‡å¡‘å½¢çŠ¶ï¼šæ”¹å˜ç»´åº¦ä½†ä¸æ”¹å˜æ•°æ®</span>
original = torch.tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>]])  <span class="hljs-comment"># å½¢çŠ¶(2, 3)</span>
reshaped = original.view(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)  <span class="hljs-comment"># å˜æˆ(3, 2): [[1,2],[3,4],[5,6]]</span>

<span class="hljs-comment"># è½¬ç½®ï¼šè¡Œåˆ—äº’æ¢</span>
transposed = original.T  <span class="hljs-comment"># å˜æˆ(3, 2): [[1,4],[2,5],[3,6]]</span>

<span class="hljs-comment"># å‹ç¼©ç»´åº¦ï¼šåˆ é™¤å¤§å°ä¸º1çš„ç»´åº¦</span>
squeezed = torch.randn(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>).squeeze()  <span class="hljs-comment"># (1,3,1) â†’ (3,)</span>
</code></pre>
<h4 data-id="heading-11">æ•°å­¦è¿ç®—ï¼šå¼ é‡çš„"åŠ å‡ä¹˜é™¤"</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é€å…ƒç´ è¿ç®—ï¼ˆå½¢çŠ¶å¿…é¡»ç›¸åŒï¼‰</span>
a = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])
b = torch.tensor([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>])
add_result = a + b  <span class="hljs-comment"># [5, 7, 9]</span>
mul_result = a * b  <span class="hljs-comment"># [4, 10, 18]</span>

<span class="hljs-comment"># çŸ©é˜µä¹˜æ³•ï¼ˆæ ¸å¿ƒæ“ä½œï¼ï¼‰</span>
matrix_a = torch.tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]])
matrix_b = torch.tensor([[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]])
matmul = matrix_a @ matrix_b  <span class="hljs-comment"># @ç¬¦å·è¡¨ç¤ºçŸ©é˜µä¹˜æ³•</span>
<span class="hljs-comment"># ç»“æœï¼š[[19, 22], [43, 50]]</span>
</code></pre>
<h4 data-id="heading-12">å¹¿æ’­æœºåˆ¶ï¼šå½¢çŠ¶ä¸åŒçš„å¼ é‡ä¹Ÿèƒ½è¿ç®—</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å°å¼ é‡ä¼šè‡ªåŠ¨"æ‰©å±•"æ¥åŒ¹é…å¤§å¼ é‡</span>
vector = torch.tensor([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>])        <span class="hljs-comment"># å½¢çŠ¶(3,)</span>
matrix = torch.tensor([[<span class="hljs-number">10</span>], [<span class="hljs-number">20</span>]])     <span class="hljs-comment"># å½¢çŠ¶(2, 1)</span>

<span class="hljs-comment"># å¹¿æ’­åï¼š</span>
<span class="hljs-comment"># vectorå˜æˆ: [[1,2,3], [1,2,3]]</span>
<span class="hljs-comment"># matrixå˜æˆ: [[10,10,10], [20,20,20]]</span>
result = vector + matrix  <span class="hljs-comment"># [[11,12,13], [21,22,23]]</span>
</code></pre>
<h2 data-id="heading-13"><strong>å››ã€æ•°æ®é¢„å¤„ç†çš„è‰ºæœ¯</strong></h2>
<h3 data-id="heading-14">4.1 ä¸ºä»€ä¹ˆéœ€è¦æ•°æ®é¢„å¤„ç†ï¼Ÿ</h3>
<p><strong>åŸå§‹æ•°æ®çš„å¸¸è§é—®é¢˜</strong>ï¼š</p>
<ul>
<li>æ ¼å¼ä¸ç»Ÿä¸€ï¼ˆå›¾ç‰‡å¤§å°ä¸åŒï¼‰</li>
<li>æ•°å€¼èŒƒå›´å·®å¼‚å¤§ï¼ˆæœ‰çš„ç‰¹å¾0-1ï¼Œæœ‰çš„0-1000ï¼‰</li>
<li>å­˜åœ¨å™ªå£°å’Œå¼‚å¸¸å€¼</li>
</ul>
<h3 data-id="heading-15">4.2 PyTorchæ•°æ®ç®¡é“æ„å»º</h3>
<h4 data-id="heading-16">è‡ªå®šä¹‰æ•°æ®é›†ç±»</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> Dataset, DataLoader

<span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomDataset</span>(<span class="hljs-title class_ inherited__">Dataset</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, data, targets, transform=<span class="hljs-literal">None</span></span>):
        self.data = data
        self.targets = targets
        self.transform = transform
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__len__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(self.data)  <span class="hljs-comment"># è¿”å›æ•°æ®æ€»æ¡æ•°</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__getitem__</span>(<span class="hljs-params">self, idx</span>):
        sample = self.data[idx]
        label = self.targets[idx]
        
        <span class="hljs-keyword">if</span> self.transform:
            sample = self.transform(sample)  <span class="hljs-comment"># æ•°æ®å¢å¼º</span>
            
        <span class="hljs-keyword">return</span> sample, label
</code></pre>
<h4 data-id="heading-17">æ•°æ®è½¬æ¢æµæ°´çº¿</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> torchvision <span class="hljs-keyword">import</span> transforms

<span class="hljs-comment"># å®šä¹‰æ•°æ®é¢„å¤„ç†æ­¥éª¤</span>
transform = transforms.Compose([
    transforms.ToTensor(),           <span class="hljs-comment"># è½¬ä¸ºå¼ é‡</span>
    transforms.Normalize((<span class="hljs-number">0.5</span>,), (<span class="hljs-number">0.5</span>,)),  <span class="hljs-comment"># æ ‡å‡†åŒ–åˆ°[-1,1]</span>
    transforms.RandomHorizontalFlip(),     <span class="hljs-comment"># éšæœºæ°´å¹³ç¿»è½¬</span>
    transforms.RandomRotation(<span class="hljs-number">15</span>)          <span class="hljs-comment"># éšæœºæ—‹è½¬</span>
])
</code></pre>
<h4 data-id="heading-18">æ•°æ®åŠ è½½å™¨ï¼šæ‰¹é‡å¤„ç†çš„åˆ©å™¨</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åˆ›å»ºæ•°æ®é›†</span>
dataset = CustomDataset(data, targets, transform=transform)

<span class="hljs-comment"># åˆ›å»ºæ•°æ®åŠ è½½å™¨</span>
dataloader = DataLoader(
    dataset,
    batch_size=<span class="hljs-number">32</span>,      <span class="hljs-comment"># æ¯æ¬¡å–32æ¡æ•°æ®</span>
    shuffle=<span class="hljs-literal">True</span>,       <span class="hljs-comment"># æ‰“ä¹±é¡ºåºï¼Œé¿å…æ¨¡å‹è®°ä½é¡ºåº</span>
    num_workers=<span class="hljs-number">2</span>       <span class="hljs-comment"># ä½¿ç”¨2ä¸ªè¿›ç¨‹å¹¶è¡ŒåŠ è½½</span>
)

<span class="hljs-comment"># ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">for</span> batch_idx, (data, targets) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(dataloader):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f'æ‰¹æ¬¡ <span class="hljs-subst">{batch_idx}</span>, æ•°æ®å½¢çŠ¶: <span class="hljs-subst">{data.shape}</span>, æ ‡ç­¾å½¢çŠ¶: <span class="hljs-subst">{targets.shape}</span>'</span>)
    <span class="hljs-comment"># è¿™é‡Œè¿›è¡Œæ¨¡å‹è®­ç»ƒ...</span>
</code></pre>
<blockquote>
<p>ğŸ”„ <strong>æ‰¹å¤„ç†çš„å¥½å¤„</strong>ï¼š</p>
<ul>
<li>æé«˜è®­ç»ƒæ•ˆç‡ï¼ˆGPUå¯ä»¥å¹¶è¡Œè®¡ç®—ï¼‰</li>
<li>æ›´ç¨³å®šçš„æ¢¯åº¦ä¼°è®¡</li>
<li>å†…å­˜ä½¿ç”¨æ›´é«˜æ•ˆ</li>
</ul>
</blockquote>
<h2 data-id="heading-19"><strong>äº”ã€çº¿æ€§ä»£æ•°åœ¨æ·±åº¦å­¦ä¹ ä¸­çš„åº”ç”¨</strong></h2>
<h3 data-id="heading-20">5.1 æ ¸å¿ƒçº¿æ€§ä»£æ•°æ“ä½œ</h3>
<h4 data-id="heading-21">åŸºæœ¬çŸ©é˜µè¿ç®—</h4>
<pre><code class="hljs language-python" lang="python">A = torch.tensor([[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>], [<span class="hljs-number">3</span>, <span class="hljs-number">4</span>]], dtype=torch.float32)
B = torch.tensor([[<span class="hljs-number">5</span>, <span class="hljs-number">6</span>], [<span class="hljs-number">7</span>, <span class="hljs-number">8</span>]], dtype=torch.float32)

<span class="hljs-comment"># çŸ©é˜µåŠ æ³•ï¼šå¯¹åº”ä½ç½®ç›¸åŠ </span>
add = A + B  <span class="hljs-comment"># [[6, 8], [10, 12]]</span>

<span class="hljs-comment"># å…ƒç´ ä¹˜æ³•ï¼šå¯¹åº”ä½ç½®ç›¸ä¹˜</span>
element_wise = A * B  <span class="hljs-comment"># [[5, 12], [21, 32]]</span>

<span class="hljs-comment"># çŸ©é˜µä¹˜æ³•ï¼šè¡Œä¹˜åˆ—æ±‚å’Œ</span>
matrix_mul = torch.mm(A, B)  <span class="hljs-comment"># [[19, 22], [43, 50]]</span>
</code></pre>
<h4 data-id="heading-22">é«˜çº§çº¿æ€§ä»£æ•°æ“ä½œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¡Œåˆ—å¼ï¼šè¡¡é‡çŸ©é˜µçš„"ç¼©æ”¾èƒ½åŠ›"</span>
det = torch.det(A)  <span class="hljs-comment"># -2.0</span>

<span class="hljs-comment"># é€†çŸ©é˜µï¼šçŸ©é˜µçš„"å€’æ•°"</span>
inv_A = torch.inverse(A)  <span class="hljs-comment"># [[-2, 1], [1.5, -0.5]]</span>

<span class="hljs-comment"># ç‰¹å¾å€¼ï¼šæ­ç¤ºçŸ©é˜µçš„æœ¬è´¨ç‰¹æ€§</span>
eigenvalues = torch.linalg.eigvals(A)  <span class="hljs-comment"># ç‰¹å¾å€¼</span>

<span class="hljs-comment"># å¥‡å¼‚å€¼åˆ†è§£ï¼šçŸ©é˜µçš„"DNAåˆ†æ"</span>
U, S, Vh = torch.linalg.svd(A)
</code></pre>
<h3 data-id="heading-23">5.2 çº¿æ€§ä»£æ•°ä¸ç¥ç»ç½‘ç»œçš„å…³ç³»</h3>
<p><strong>ç¥ç»ç½‘ç»œæœ¬è´¨ä¸Šæ˜¯å¤æ‚çš„çº¿æ€§å˜æ¢</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">è¾“å‡º = æ¿€æ´»å‡½æ•°(è¾“å…¥ Ã— æƒé‡ + åç½®)
</code></pre>
<p>æ¯ä¸ªç¥ç»ç½‘ç»œå±‚éƒ½åœ¨è¿›è¡ŒçŸ©é˜µä¹˜æ³•ï¼Œé€šè¿‡å¤šå±‚çº¿æ€§å˜æ¢+éçº¿æ€§æ¿€æ´»å‡½æ•°çš„ç»„åˆï¼Œç¥ç»ç½‘ç»œå¯ä»¥æ‹Ÿåˆä»»æ„å¤æ‚å‡½æ•°ã€‚</p>
<h2 data-id="heading-24"><strong>å…­ã€ç¬¬ä¸€ä¸ªæ·±åº¦å­¦ä¹ æ¨¡å‹â€”â€”çº¿æ€§å›å½’</strong></h2>
<h3 data-id="heading-25">6.1 é—®é¢˜å®šä¹‰ï¼šé¢„æµ‹æˆ¿å±‹ä»·æ ¼</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ ¹æ®æˆ¿å±‹é¢ç§¯é¢„æµ‹ä»·æ ¼</p>
<ul>
<li><strong>è¾“å…¥</strong>ï¼šæˆ¿å±‹é¢ç§¯ï¼ˆå¹³æ–¹ç±³ï¼‰</li>
<li><strong>è¾“å‡º</strong>ï¼šé¢„æµ‹ä»·æ ¼ï¼ˆä¸‡å…ƒï¼‰</li>
<li><strong>å…³ç³»</strong>ï¼šä»·æ ¼ â‰ˆ 2.5 Ã— é¢ç§¯ + 1.0 + å™ªå£°</li>
</ul>
<h3 data-id="heading-26">6.2 æ¨¡å‹æ„å»ºä¸è®­ç»ƒ</h3>
<h4 data-id="heading-27">æ•°æ®ç”Ÿæˆ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> torch
<span class="hljs-keyword">import</span> torch.nn <span class="hljs-keyword">as</span> nn

<span class="hljs-comment"># è®¾ç½®éšæœºç§å­ï¼Œä¿è¯ç»“æœå¯é‡ç°</span>
torch.manual_seed(<span class="hljs-number">42</span>)

<span class="hljs-comment"># ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®</span>
X = torch.linspace(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>, <span class="hljs-number">100</span>).reshape(-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># 100ä¸ª0-10ä¹‹é—´çš„é¢ç§¯å€¼</span>
true_w, true_b = <span class="hljs-number">2.5</span>, <span class="hljs-number">1.0</span>  <span class="hljs-comment"># çœŸå®çš„å…³ç³»</span>
y = true_w * X + true_b + torch.randn(X.size()) * <span class="hljs-number">1.5</span>  <span class="hljs-comment"># åŠ å™ªå£°æ¨¡æ‹Ÿç°å®</span>
</code></pre>
<h4 data-id="heading-28">æ¨¡å‹å®šä¹‰</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LinearRegression</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        <span class="hljs-comment"># nn.Linearå°è£…äº† y = x * w + b</span>
        self.linear = nn.Linear(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>)  <span class="hljs-comment"># è¾“å…¥1ç»´ï¼Œè¾“å‡º1ç»´</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-keyword">return</span> self.linear(x)

model = LinearRegression()
<span class="hljs-built_in">print</span>(<span class="hljs-string">f'åˆå§‹å‚æ•°: w=<span class="hljs-subst">{model.linear.weight.item():<span class="hljs-number">.2</span>f}</span>, b=<span class="hljs-subst">{model.linear.bias.item():<span class="hljs-number">.2</span>f}</span>'</span>)
</code></pre>
<h4 data-id="heading-29">è®­ç»ƒé…ç½®</h4>
<pre><code class="hljs language-python" lang="python">criterion = nn.MSELoss()  <span class="hljs-comment"># å‡æ–¹è¯¯å·®æŸå¤±</span>
optimizer = torch.optim.SGD(model.parameters(), lr=<span class="hljs-number">0.01</span>)  <span class="hljs-comment"># éšæœºæ¢¯åº¦ä¸‹é™</span>
</code></pre>
<h4 data-id="heading-30">è®­ç»ƒå¾ªç¯ï¼šå­¦ä¹ çš„æ ¸å¿ƒè¿‡ç¨‹</h4>
<pre><code class="hljs language-python" lang="python">epochs = <span class="hljs-number">1000</span>
losses = []

<span class="hljs-keyword">for</span> epoch <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(epochs):
    <span class="hljs-comment"># å‰å‘ä¼ æ’­ï¼šè®¡ç®—é¢„æµ‹å€¼</span>
    predictions = model(X)
    
    <span class="hljs-comment"># è®¡ç®—æŸå¤±ï¼šè¡¡é‡é¢„æµ‹ä¸çœŸå®çš„å·®è·</span>
    loss = criterion(predictions, y)
    
    <span class="hljs-comment"># åå‘ä¼ æ’­ï¼šè®¡ç®—æ¢¯åº¦</span>
    optimizer.zero_grad()  <span class="hljs-comment"># æ¸…ç©ºä¹‹å‰çš„æ¢¯åº¦</span>
    loss.backward()        <span class="hljs-comment"># è®¡ç®—å½“å‰æ¢¯åº¦</span>
    
    <span class="hljs-comment"># å‚æ•°æ›´æ–°ï¼šè°ƒæ•´wå’Œb</span>
    optimizer.step()
    
    losses.append(loss.item())
    
    <span class="hljs-keyword">if</span> (epoch + <span class="hljs-number">1</span>) % <span class="hljs-number">100</span> == <span class="hljs-number">0</span>:
        current_w = model.linear.weight.item()
        current_b = model.linear.bias.item()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f'Epoch [<span class="hljs-subst">{epoch+<span class="hljs-number">1</span>}</span>/<span class="hljs-subst">{epochs}</span>], Loss: <span class="hljs-subst">{loss.item():<span class="hljs-number">.4</span>f}</span>, '</span>
              <span class="hljs-string">f'w: <span class="hljs-subst">{current_w:<span class="hljs-number">.2</span>f}</span>, b: <span class="hljs-subst">{current_b:<span class="hljs-number">.2</span>f}</span>'</span>)
</code></pre>
<h3 data-id="heading-31">6.3 ç†è§£è®­ç»ƒè¿‡ç¨‹</h3>
<p><strong>æ¢¯åº¦ä¸‹é™çš„ç›´è§‚ç†è§£</strong>ï¼š</p>
<p>æƒ³è±¡ä½ åœ¨å±±ä¸Šè’™ç€çœ¼ç›ä¸‹å±±ï¼š</p>
<ul>
<li><strong>æŸå¤±å‡½æ•°</strong>ï¼šå±±çš„é«˜åº¦</li>
<li><strong>å‚æ•°(w,b)</strong>ï¼šä½ çš„ä½ç½®</li>
<li><strong>æ¢¯åº¦</strong>ï¼šè„šæ„Ÿå—çš„å¡åº¦æ–¹å‘</li>
<li><strong>å­¦ä¹ ç‡</strong>ï¼šæ­¥é•¿å¤§å°</li>
<li><strong>è®­ç»ƒ</strong>ï¼šä¸æ–­å¾€å¡åº¦æœ€é™¡çš„æ–¹å‘èµ°ï¼Œç›´åˆ°å±±è°·åº•éƒ¨</li>
</ul>
<p><strong>å…³é”®æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>Epoch</strong>ï¼šæŠŠæ‰€æœ‰è®­ç»ƒæ•°æ®çœ‹å®Œä¸€é</li>
<li><strong>Batch</strong>ï¼šä¸€æ¬¡è®­ç»ƒä½¿ç”¨çš„æ•°æ®é‡</li>
<li><strong>å­¦ä¹ ç‡</strong>ï¼šå‚æ•°æ›´æ–°çš„æ­¥é•¿</li>
<li><strong>æŸå¤±å‡½æ•°</strong>ï¼šæ¨¡å‹è¡¨ç°çš„è¯„ä»·æ ‡å‡†</li>
</ul>
<h2 data-id="heading-32"><strong>ä¸ƒã€æ·±åº¦ç¥ç»ç½‘ç»œåŸºç¡€</strong></h2>
<h3 data-id="heading-33">7.1 ä»çº¿æ€§å›å½’åˆ°å¤šå±‚æ„ŸçŸ¥æœº</h3>
<p><strong>å•å±‚ç½‘ç»œçš„å±€é™</strong>ï¼š</p>
<ul>
<li>åªèƒ½å­¦ä¹ çº¿æ€§å…³ç³»</li>
<li>æ— æ³•è§£å†³å¤æ‚é—®é¢˜ï¼ˆå¦‚å¼‚æˆ–é—®é¢˜ï¼‰</li>
</ul>
<p><strong>å¤šå±‚æ„ŸçŸ¥æœº</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MLP</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, input_size, hidden_size, output_size</span>):
        <span class="hljs-built_in">super</span>().__init__()
        self.layer1 = nn.Linear(input_size, hidden_size)
        self.layer2 = nn.Linear(hidden_size, output_size)
        self.relu = nn.ReLU()
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        x = self.layer1(x)
        x = self.relu(x)  <span class="hljs-comment"># å¼•å…¥éçº¿æ€§</span>
        x = self.layer2(x)
        <span class="hljs-keyword">return</span> x
</code></pre>
<h3 data-id="heading-34">7.2 æ¿€æ´»å‡½æ•°ï¼šå¼•å…¥éçº¿æ€§èƒ½åŠ›</h3>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ¿€æ´»å‡½æ•°ï¼Ÿ</strong>
æ²¡æœ‰æ¿€æ´»å‡½æ•°çš„ç¥ç»ç½‘ç»œåªæ˜¯å¤šä¸ªçº¿æ€§å˜æ¢çš„å åŠ ï¼Œæ•´ä½“ä»ç„¶æ˜¯çº¿æ€§çš„ã€‚</p>
<p><strong>å¸¸ç”¨æ¿€æ´»å‡½æ•°</strong>ï¼š</p>
<ul>
<li><strong>ReLU</strong>ï¼šæœ€å¸¸ç”¨ï¼Œè®¡ç®—ç®€å• <code>max(0, x)</code></li>
<li><strong>Sigmoid</strong>ï¼šå°†è¾“å‡ºå‹ç¼©åˆ°(0,1)ï¼Œç”¨äºæ¦‚ç‡</li>
<li><strong>Tanh</strong>ï¼šå°†è¾“å‡ºå‹ç¼©åˆ°(-1,1)ï¼Œé›¶ä¸­å¿ƒåŒ–</li>
</ul>
<h2 data-id="heading-35"><strong>å…«ã€æ·±åº¦å­¦ä¹ æ ¸å¿ƒæ¦‚å¿µè¯¦è§£</strong></h2>
<h3 data-id="heading-36">8.1 å…³é”®æœ¯è¯­è§£æ</h3>
<p><strong>æ ·æœ¬ä¸ç‰¹å¾</strong>ï¼š</p>
<ul>
<li><strong>æ ·æœ¬</strong>ï¼šä¸€æ¡æ•°æ®ï¼ˆå¦‚ä¸€æ ‹æˆ¿å±‹çš„ä¿¡æ¯ï¼‰</li>
<li><strong>ç‰¹å¾</strong>ï¼šæè¿°æ ·æœ¬çš„å±æ€§ï¼ˆå¦‚é¢ç§¯ã€ä½ç½®ã€æ¥¼å±‚ï¼‰</li>
<li><strong>æ ‡ç­¾</strong>ï¼šæƒ³è¦é¢„æµ‹çš„ç›®æ ‡ï¼ˆå¦‚ä»·æ ¼ï¼‰</li>
</ul>
<p><strong>æŸå¤±å‡½æ•°ä¸ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong>æŸå¤±å‡½æ•°</strong>ï¼šè¡¡é‡æ¨¡å‹é¢„æµ‹ä¸çœŸå®å€¼çš„å·®è·</li>
<li><strong>ä¼˜åŒ–å™¨</strong>ï¼šè°ƒæ•´å‚æ•°æ¥æœ€å°åŒ–æŸå¤±çš„ç®—æ³•</li>
<li><strong>æ¢¯åº¦</strong>ï¼šæŸå¤±å‡½æ•°å¯¹å‚æ•°çš„å˜åŒ–ç‡</li>
</ul>
<p><strong>è®­ç»ƒç›¸å…³æ¦‚å¿µ</strong>ï¼š</p>
<ul>
<li><strong>Epoch</strong>ï¼šå®Œæ•´éå†ä¸€éè®­ç»ƒé›†</li>
<li><strong>Batch Size</strong>ï¼šä¸€æ¬¡è®­ç»ƒä½¿ç”¨çš„æ ·æœ¬æ•°</li>
<li><strong>å­¦ä¹ ç‡</strong>ï¼šå‚æ•°æ›´æ–°çš„æ­¥é•¿å¤§å°</li>
<li><strong>è¿‡æ‹Ÿåˆ</strong>ï¼šæ¨¡å‹å¯¹è®­ç»ƒæ•°æ®å­¦å¾—å¤ªå¥½ï¼Œä½†æ³›åŒ–èƒ½åŠ›å·®</li>
</ul>
<h3 data-id="heading-37">8.2 æ¨¡å‹è®­ç»ƒå®Œæ•´æµç¨‹</h3>
<ol>
<li><strong>æ•°æ®å‡†å¤‡</strong>ï¼šæ”¶é›†ã€æ¸…æ´—ã€é¢„å¤„ç†æ•°æ®</li>
<li><strong>æ¨¡å‹è®¾è®¡</strong>ï¼šé€‰æ‹©åˆé€‚çš„ç½‘ç»œç»“æ„</li>
<li><strong>è®­ç»ƒé…ç½®</strong>ï¼šè®¾ç½®æŸå¤±å‡½æ•°ã€ä¼˜åŒ–å™¨ã€è¶…å‚æ•°</li>
<li><strong>è®­ç»ƒå¾ªç¯</strong>ï¼šé‡å¤å‰å‘ä¼ æ’­â†’è®¡ç®—æŸå¤±â†’åå‘ä¼ æ’­â†’å‚æ•°æ›´æ–°</li>
<li><strong>è¯„ä¼°éªŒè¯</strong>ï¼šåœ¨æµ‹è¯•é›†ä¸Šè¯„ä¼°æ¨¡å‹æ€§èƒ½</li>
<li><strong>éƒ¨ç½²åº”ç”¨</strong>ï¼šå°†è®­ç»ƒå¥½çš„æ¨¡å‹æŠ•å…¥å®é™…ä½¿ç”¨</li>
</ol>
<h2 data-id="heading-38"><strong>ä¹ã€å®æˆ˜å»ºè®®ä¸å­¦ä¹ è·¯å¾„</strong></h2>
<h3 data-id="heading-39">9.1 å­¦ä¹ ç­–ç•¥</h3>
<p><strong>å¯¹äºåˆå­¦è€…</strong>ï¼š</p>
<ol>
<li><strong>å…ˆè·‘é€šä»£ç </strong>ï¼šç†è§£æ•´ä½“æµç¨‹</li>
<li><strong>ä¿®æ”¹å‚æ•°</strong>ï¼šè§‚å¯Ÿå¯¹ç»“æœçš„å½±å“</li>
<li><strong>é€æ­¥æ·±å…¥</strong>ï¼šä»ç®€å•æ¨¡å‹åˆ°å¤æ‚æ¨¡å‹</li>
</ol>
<p><strong>é¿å…çš„è¯¯åŒº</strong>ï¼š</p>
<ul>
<li>âŒ è¿‡åˆ†çº ç»“æ•°å­¦æ¨å¯¼</li>
<li>âœ… å…ˆç†è§£æ¦‚å¿µå’Œç›´è§‰</li>
<li>âŒ è¯•å›¾ä¸€æ¬¡æ€§ç†è§£æ‰€æœ‰ç»†èŠ‚</li>
<li>âœ… é€šè¿‡å®è·µåŠ æ·±ç†è§£</li>
</ul>
<h3 data-id="heading-40">9.2 ä¸‹ä¸€æ­¥å­¦ä¹ æ–¹å‘</h3>
<p><strong>åŸºç¡€è¿›é˜¶</strong>ï¼š</p>
<ol>
<li>å…¨è¿æ¥ç¥ç»ç½‘ç»œ</li>
<li>å·ç§¯ç¥ç»ç½‘ç»œï¼ˆCNNï¼‰ç”¨äºå›¾åƒ</li>
<li>å¾ªç¯ç¥ç»ç½‘ç»œï¼ˆRNNï¼‰ç”¨äºåºåˆ—æ•°æ®</li>
</ol>
<p><strong>å®æˆ˜é¡¹ç›®</strong>ï¼š</p>
<ol>
<li>æ‰‹å†™æ•°å­—è¯†åˆ«ï¼ˆMNISTï¼‰</li>
<li>çŒ«ç‹—å›¾åƒåˆ†ç±»</li>
<li>æ–‡æœ¬æƒ…æ„Ÿåˆ†æ</li>
</ol>
<h2 data-id="heading-41"><strong>æ€»ç»“</strong></h2>
<p>é€šè¿‡æœ¬æ–‡ï¼Œæˆ‘ä»¬å»ºç«‹äº†æ·±åº¦å­¦ä¹ çš„å®Œæ•´çŸ¥è¯†ä½“ç³»ï¼š</p>
<p><strong>ç†è®ºå±‚é¢</strong>ï¼š</p>
<ul>
<li>ç†è§£äº†AIæŠ€æœ¯æ ˆçš„å±‚æ¬¡å…³ç³»</li>
<li>æŒæ¡äº†å¼ é‡ã€æ¢¯åº¦ä¸‹é™ç­‰æ ¸å¿ƒæ¦‚å¿µ</li>
<li>ç†Ÿæ‚‰äº†ç¥ç»ç½‘ç»œçš„åŸºæœ¬åŸç†</li>
</ul>
<p><strong>å®è·µå±‚é¢</strong>ï¼š</p>
<ul>
<li>å­¦ä¼šäº†PyTorchçš„åŸºæœ¬æ“ä½œ</li>
<li>æŒæ¡äº†æ•°æ®é¢„å¤„ç†çš„æ–¹æ³•</li>
<li>å®Œæˆäº†ç¬¬ä¸€ä¸ªçº¿æ€§å›å½’æ¨¡å‹</li>
</ul>
<p><strong>æ ¸å¿ƒæ´å¯Ÿ</strong>ï¼š</p>
<ol>
<li><strong>æ·±åº¦å­¦ä¹ æœ¬è´¨æ˜¯æ•°æ®é©±åŠ¨çš„ç‰¹å¾å­¦ä¹ </strong></li>
<li><strong>ç¥ç»ç½‘ç»œæ˜¯é€šè¿‡çŸ©é˜µè¿ç®—+éçº¿æ€§å˜æ¢çš„å‡½æ•°é€¼è¿‘å™¨</strong></li>
<li><strong>è®­ç»ƒè¿‡ç¨‹æ˜¯ä¸æ–­è°ƒæ•´å‚æ•°æ¥æœ€å°åŒ–æŸå¤±</strong></li>
<li><strong>PyTorchè®©æ·±åº¦å­¦ä¹ å¼€å‘å˜å¾—ç®€å•ç›´è§‚</strong></li>
</ol>
<p>æ·±åº¦å­¦ä¹ å°±åƒæ•™å­©å­è®¤å­—ï¼šä»ç®€å•çš„çº¿æ€§å…³ç³»å¼€å§‹ï¼Œé€æ­¥å­¦ä¹ æ›´å¤æ‚çš„æ¨¡å¼è¯†åˆ«ã€‚ä¸åŒçš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ•°å­¦ç²¾ç¡®æè¿°è¿™ä¸ªè¿‡ç¨‹ï¼Œå¹¶ç”¨è®¡ç®—æœºé«˜æ•ˆå®ç°ã€‚</p>
<blockquote>
<p>æ°´å¹³æœ‰é™ï¼Œè¿˜ä¸èƒ½å†™åˆ°å°½å–„å°½ç¾ï¼Œå¸Œæœ›å¤§å®¶å¤šå¤šäº¤æµï¼Œè·Ÿæ˜¥é‡ä¸€åŒè¿›æ­¥ï¼ï¼ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JavaHashMapæºç åˆ†æ]]></title>    <link>https://juejin.cn/post/7578709098255138854</link>    <guid>https://juejin.cn/post/7578709098255138854</guid>    <pubDate>2025-12-01T09:34:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578709098255138854" data-draft-id="7578699866181222438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JavaHashMapæºç åˆ†æ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2025-12-01T09:34:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="makinohara"/> <meta itemprop="url" content="https://juejin.cn/user/455637552340731"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JavaHashMapæºç åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/455637552340731/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    makinohara
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:34:22.000Z" title="Mon Dec 01 2025 09:34:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é€‰ä¸­HashMapï¼ŒæŒ‰Ctrl+Bï¼Œå°±ä¼šè·³è½¬åˆ°æºç éƒ¨åˆ†ã€‚</p>
<p><strong>èŠ‚ç‚¹ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â static class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {
 Â  Â  Â  Â final int hash<span class="hljs-comment">;</span>
 Â  Â  Â  Â final K key<span class="hljs-comment">;</span>
 Â  Â  Â  Â V value<span class="hljs-comment">;</span>
 Â  Â  Â  Â Node&lt;K,V&gt; next<span class="hljs-comment">;</span>
â€‹
 Â  Â  Â  Â Node(int hash, K key, V value, Node&lt;K,V&gt; next) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">this.hash</span> = hash<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">this.key</span> = key<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">this.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">this.next</span> = next<span class="hljs-comment">;</span>
 Â  Â  Â   }
</code></pre>
<p>æˆ‘ä»¬çŸ¥é“åœ¨HashMapä¸­ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªNodeå¯¹è±¡ï¼Œè€Œå®ƒå®ç°äº†Mapé‡Œçš„Entryæ¥å£ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¯´æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªEntryå¯¹è±¡ã€‚è¿™æ˜¯å› ä¸ºHashMapåœ¨æ•°ç»„çš„åŸºç¡€ä¸Šèå…¥äº†é“¾è¡¨ä¸çº¢é»‘æ ‘ï¼Œæ‰€ä»¥æ¯ä¸ªå…ƒç´ éƒ½å¿…é¡»æ˜¯èŠ‚ç‚¹ã€‚</p>
<p>ä¸€ä¸ªEntryå¯¹è±¡æœ‰4ä¸ªå­—æ®µï¼š</p>
<p>1.hashï¼šå®ƒæ˜¯é€šè¿‡Keyå€¼è®¡ç®—å‡ºçš„å“ˆå¸Œå€¼</p>
<p>2.Keyï¼šé”®</p>
<p>3.Valueï¼šå€¼</p>
<p>4.Nextï¼šä½œä¸ºé“¾è¡¨ä¸­èŠ‚ç‚¹ï¼Œå®ƒè¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤é€šè¿‡Nextè®°å½•ä¸‹ä¸€ä¸ªå…ƒç´ çš„åœ°å€å€¼</p>
<p>é‚£ä¹ˆçº¢é»‘æ ‘å‘¢ï¼Ÿçº¢é»‘æ ‘å°±ä¸èƒ½åªå­˜å‚¨Nextäº†ï¼Œè¿˜å¿…é¡»è¦å­˜å‚¨å·¦å³èŠ‚ç‚¹ç­‰å…¶å®ƒä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-scala" lang="scala"> Â  Â static <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TreeNode&lt;K</span>,<span class="hljs-title">V&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">LinkedHashMap</span>.<span class="hljs-title">Entry&lt;K</span>,<span class="hljs-title">V&gt;</span> </span>{
 Â  Â  Â  Â <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; parent; Â <span class="hljs-comment">// red-black tree links</span>
 Â  Â  Â  Â <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; left;
 Â  Â  Â  Â <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; right;
 Â  Â  Â  Â <span class="hljs-type">TreeNode</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; prev; Â  Â <span class="hljs-comment">// needed to unlink next upon deletion</span>
 Â  Â  Â  Â boolean red;
 Â  Â  Â  Â <span class="hljs-type">TreeNode</span>(int hash, <span class="hljs-type">K</span> key, <span class="hljs-type">V</span> <span class="hljs-keyword">val</span>, <span class="hljs-type">Node</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; next) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>(hash, key, <span class="hljs-keyword">val</span>, next);
 Â  Â  Â   }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>TreeNode</code>ç»§æ‰¿äº†<code>LinkedHashMap</code>ä¸­çš„Entryï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥çœ‹çœ‹è¿™ä¸ªEntryï¼š</p>
<pre><code class="hljs language-scala" lang="scala"> static <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entry&lt;K</span>,<span class="hljs-title">V&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HashMap</span>.<span class="hljs-title">Node&lt;K</span>,<span class="hljs-title">V&gt;</span> </span>{
 Â  Â  Â  Â <span class="hljs-type">Entry</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; before, after;
 Â  Â  Â  Â <span class="hljs-type">Entry</span>(int hash, <span class="hljs-type">K</span> key, <span class="hljs-type">V</span> value, <span class="hljs-type">Node</span>&lt;<span class="hljs-type">K</span>,<span class="hljs-type">V</span>&gt; next) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">super</span>(hash, key, value, next);
 Â  Â  Â   }
 Â   }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™ä¸ªEntryç»§æ‰¿äº†HashMapä¸­çš„Nodeï¼Œä¹Ÿå°±æ˜¯ä¸€å¼€å§‹æˆ‘ä»¬è§åˆ°çš„Nodeï¼Œè¿™ä¹Ÿæ„å‘³ç€<code>TreeNode</code>é™¤äº†è®°å½•å·¦å³èŠ‚ç‚¹ã€çˆ¶èŠ‚ç‚¹ç­‰è¿™äº›ä¸“å±äºçº¢é»‘æ ‘çš„ä¿¡æ¯ï¼Œè¿˜ä¿ç•™äº†ä½œä¸ºé“¾è¡¨çš„ä¿¡æ¯ã€‚å› ä¸ºå½“é“¾è¡¨é•¿åº¦è¾¾åˆ°8å¹¶ä¸”æ•°ç»„é•¿åº¦è¾¾åˆ°64ï¼Œé“¾è¡¨å°±è¦è½¬ä¸ºçº¢é»‘æ ‘ã€‚</p>
<p><strong>æˆå‘˜å˜é‡</strong></p>
<pre><code class="hljs language-ini" lang="ini">static final int <span class="hljs-attr">DEFAULT_INITIAL_CAPACITY</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">4</span><span class="hljs-comment">; // aka 16</span>
static final int <span class="hljs-attr">MAXIMUM_CAPACITY</span> = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">30</span><span class="hljs-comment">;</span>
static final float <span class="hljs-attr">DEFAULT_LOAD_FACTOR</span> = <span class="hljs-number">0.75</span>f<span class="hljs-comment">;</span>
transient Node&lt;K,V&gt;<span class="hljs-section">[]</span> table<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™ä¸ªtableæ•°ç»„å°±æ˜¯HashMapçš„å­˜å‚¨åŸºç¡€ã€‚å®ƒçš„é»˜è®¤åˆå§‹é•¿åº¦æ˜¯16ï¼Œæœ€å¤§å®¹é‡æ˜¯2çš„30æ¬¡æ–¹ï¼Œæ˜¯ä¸ªå¤©æ–‡æ•°å­—ã€‚é»˜è®¤æ‰©å®¹å› å­æ˜¯0.75ï¼Œè¿™æ„å‘³ç€å½“å·²ç»è¢«å¡«å……çš„ä½ç½®æ•°é‡è¾¾åˆ°äº†å®¹é‡çš„0.75å°±ä¼šè¿›è¡Œæ‰©å®¹æ“ä½œï¼Œæ¯æ¬¡æ‰©å®¹éƒ½ä¼šå°†å®¹é‡æ‰©å……ä¸ºåŸæ¥çš„2å€ã€‚</p>
<p><strong>ç©ºå‚æ„é€ </strong></p>
<pre><code class="hljs language-csharp" lang="csharp"> Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">HashMap</span>()</span> {
 Â  Â  Â  Â <span class="hljs-keyword">this</span>.loadFactor = DEFAULT_LOAD_FACTOR; <span class="hljs-comment">// all other fields defaulted</span>
 Â   }
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨HashMapçš„ç©ºå‚æ„é€ æ—¶ï¼Œå®é™…ä¸Šåªåšäº†ä¸€ä»¶äº‹ï¼šå°†é»˜è®¤æ‰©å®¹å› å­èµ‹å€¼ç»™è¯¥å¯¹è±¡çš„æ‰©å®¹å› å­æˆå‘˜å˜é‡ã€‚æ­¤æ—¶tableè¿˜æ˜¯NULL</p>
<p><strong>é‚£ä¹ˆï¼Œtableä»€ä¹ˆæ—¶å€™åˆ›å»ºï¼Ÿ</strong></p>
<p>å½“æˆ‘ä»¬æ·»åŠ å…ƒç´ çš„æ—¶å€™tableå°±å¿…é¡»è¦åˆ›å»ºå‡ºæ¥äº†ï¼Œå› æ­¤æˆ‘ä»¬å®šä½åˆ°putå‡½æ•°ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">public</span> V put(K <span class="hljs-keyword">key</span>, V value) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> putVal(hash(<span class="hljs-keyword">key</span>), <span class="hljs-keyword">key</span>, value, <span class="hljs-literal">false</span>, <span class="hljs-literal">true</span>);
 Â   }
</code></pre>
<p>çœ‹ä¸€ä¸‹hashæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"> Â  <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-title function_">hash</span><span class="hljs-params">(Object key)</span> {
 Â  Â  Â  Â <span class="hljs-type">int</span> h;
 Â  Â  Â  Â <span class="hljs-keyword">return</span> (key == <span class="hljs-literal">null</span>) ? <span class="hljs-number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="hljs-number">16</span>);
 Â   }
</code></pre>
<p>hashæ–¹æ³•é€šè¿‡ä¸€äº›è®¡ç®—ï¼Œè¿”å›äº†é”®çš„å“ˆå¸Œå€¼ã€‚å¯ä»¥çœ‹åˆ°ï¼Œé”®çš„å“ˆå¸Œå€¼ä¸Valueæ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œåªå’ŒKeyæœ‰å…³ç³»ã€‚</p>
<p>å†çœ‹<code>putVal</code>å‡½æ•°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â final V putVal(int hash, K key, V value, boolean onlyIfAbsent,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  boolean evict) {
 Â  Â  Â  Â Node&lt;K,V&gt;<span class="hljs-section">[]</span> tab<span class="hljs-comment">; Node&lt;K,V&gt; p; int n, i;</span>
 Â  Â  Â  Â if ((<span class="hljs-attr">tab</span> = table) == null || (n = tab.length) == <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">n</span> = (tab = resize()).length<span class="hljs-comment">;</span>
 Â  Â  Â  Â if ((<span class="hljs-attr">p</span> = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == null)
 Â  Â  Â  Â  Â  Â tab<span class="hljs-section">[i]</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â Node&lt;K,V&gt; e<span class="hljs-comment">; K k;</span>
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">p.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = p.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else if (p instanceof TreeNode)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â if (e != null) { // existing mapping for key
 Â  Â  Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (!onlyIfAbsent || <span class="hljs-attr">oldValue</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â afterNodeAccess(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â ++modCount<span class="hljs-comment">;</span>
 Â  Â  Â  Â if (++size &gt; threshold)
 Â  Â  Â  Â  Â  Â resize()<span class="hljs-comment">;</span>
 Â  Â  Â  Â afterNodeInsertion(evict)<span class="hljs-comment">;</span>
 Â  Â  Â  Â return null<span class="hljs-comment">;</span>
 Â   }
</code></pre>
<p>å‰ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºé”®çš„å“ˆå¸Œå€¼ã€é”®ã€å€¼ã€‚ç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºâ€œå½“å‰çš„æ•°æ®æ˜¯å¦ä¿ç•™â€ï¼Œä¹Ÿå°±æ˜¯è¦†ç›–ä¸å¦çš„é—®é¢˜ã€‚</p>
<pre><code class="hljs language-css" lang="css">Node&lt;K,V&gt;<span class="hljs-selector-attr">[]</span> tab; Node&lt;K,V&gt; <span class="hljs-selector-tag">p</span>; int n, <span class="hljs-selector-tag">i</span>;
</code></pre>
<p>åœ¨<code>putVal</code>æ–¹æ³•ä¸­åˆå£°æ˜äº†ä¸€ä¸ªtabæ•°ç»„ã€‚è¿™æ˜¯å› ä¸ºï¼šæˆå‘˜å˜é‡åœ¨å †ä¸Šï¼Œæ–¹æ³•è¿è¡Œåœ¨æ ˆä¸Šã€‚å¦‚æœè¿è¡Œåœ¨æ ˆä¸Šçš„æ–¹æ³•è¦å¤šæ¬¡å»å †ä¸­æ‰¾tableï¼Œå¼€é”€å°±ä¼šæ¯”è¾ƒå¤§ã€‚</p>
<p>å¦å¤–ï¼Œpæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹å˜é‡ï¼Œç”¨æ¥è®°å½•èŠ‚ç‚¹ã€‚nè¡¨ç¤ºæ•°ç»„é•¿åº¦ï¼Œiè¡¨ç¤ºç´¢å¼•ã€‚</p>
<p>æ·»åŠ å…ƒç´ åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š</p>
<p>1.æ•°ç»„ä½ç½®ä¸ºnull</p>
<p>2.æ•°ç»„ä½ç½®ä¸ä¸ºnullï¼Œé”®é‡å¤ï¼Œè¦†ç›–</p>
<p>3.æ•°ç»„ä½ç½®ä¸ä¸ºnullï¼Œé”®ä¸é‡å¤ï¼Œå½¢æˆé“¾è¡¨æˆ–çº¢é»‘æ ‘</p>
<p><strong>ç¬¬ä¸€ç§æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">        if ((<span class="hljs-attr">tab</span> = table) == null || (n = tab.length) == <span class="hljs-number">0</span>)
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">n</span> = (tab = resize()).length<span class="hljs-comment">;</span>
</code></pre>
<p>è¿™é‡ŒæŠŠtableèµ‹å€¼ç»™äº†tabï¼Œå› ä¸ºtabæœ¬èº«å°±æ˜¯è¦åœ¨æ ˆä¸­å……å½“tableçš„è§’è‰²ã€‚å¯¹äºnåŒç†ï¼Œä¹ŸæŠŠæ•°ç»„çš„é•¿åº¦èµ‹å€¼ç»™äº†å®ƒã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¡ä»¶å°±ä¼šæˆç«‹ï¼Œå› ä¸ºç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ å¿…ç„¶æ²¡æœ‰åˆ›å»ºtabï¼Œtabé•¿åº¦ä¹Ÿå¿…ç„¶ä¸º0.å°±ä¼šè°ƒç”¨ifä¸­çš„è¯­å¥ï¼šå°†resize()èµ‹å€¼ç»™tabï¼Œå†æŠŠtabçš„é•¿åº¦èµ‹å€¼ç»™n</p>
<p>çœ‹çœ‹resizeåšäº†ä»€ä¹ˆï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â final Node&lt;K,V&gt;<span class="hljs-section">[]</span> resize() {
 Â  Â  Â  Â Node&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">oldTab</span> = table<span class="hljs-comment">;</span>
 Â  Â  Â  Â int <span class="hljs-attr">oldCap</span> = (oldTab == null) ? <span class="hljs-number">0</span> : oldTab.length<span class="hljs-comment">;</span>
 Â  Â  Â  Â int <span class="hljs-attr">oldThr</span> = threshold<span class="hljs-comment">;</span>
 Â  Â  Â  Â int newCap, <span class="hljs-attr">newThr</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
 Â  Â  Â  Â if (oldCap &gt; 0) {
 Â  Â  Â  Â  Â  Â if (oldCap &gt;= MAXIMUM_CAPACITY) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">threshold</span> = Integer.MAX_VALUE<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldTab<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â else if ((<span class="hljs-attr">newCap</span> = oldCap &lt;&lt; <span class="hljs-number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  oldCap &gt;= DEFAULT_INITIAL_CAPACITY)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">newThr</span> = oldThr &lt;&lt; <span class="hljs-number">1</span><span class="hljs-comment">; // double threshold</span>
 Â  Â  Â   }
 Â  Â  Â  Â else if (oldThr &gt; 0) // initial capacity was placed in threshold
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">newCap</span> = oldThr<span class="hljs-comment">;</span>
 Â  Â  Â  Â else { Â  Â  Â  Â  Â  Â  Â  // zero initial threshold signifies using defaults
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">newCap</span> = DEFAULT_INITIAL_CAPACITY<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">newThr</span> = (int)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â if (<span class="hljs-attr">newThr</span> == <span class="hljs-number">0</span>) {
 Â  Â  Â  Â  Â  Â float <span class="hljs-attr">ft</span> = (float)newCap * loadFactor<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">newThr</span> = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (float)MAXIMUM_CAPACITY ?
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   (int)ft : Integer.MAX_VALUE)<span class="hljs-comment">;</span>
 Â  Â  Â   }
 Â  Â  Â  Â <span class="hljs-attr">threshold</span> = newThr<span class="hljs-comment">;</span>
 Â  Â  Â  Â @SuppressWarnings({"rawtypes","unchecked"})
 Â  Â  Â  Â Node&lt;K,V&gt;<span class="hljs-section">[]</span> <span class="hljs-attr">newTab</span> = (Node&lt;K,V&gt;[])new Node[newCap]<span class="hljs-comment">;</span>
 Â  Â  Â  Â <span class="hljs-attr">table</span> = newTab<span class="hljs-comment">;</span>
</code></pre>
<p>ç”±äºè¿˜æœªåˆ›å»ºtableæ•°ç»„ï¼Œå› æ­¤<code>oldTab</code>ä¸ºç©ºï¼Œå› æ­¤<code>oldCap</code>ä¸º0ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥åˆ°<code>if(oldCap &gt; 0)</code>çš„åˆ¤æ–­ä¸­ï¼Œç›´æ¥çœ‹elseï¼šå°†é»˜è®¤åˆå§‹å®¹é‡èµ‹å€¼ç»™<code>newCap</code>ï¼Œå°†æ‰©å®¹é˜ˆå€¼èµ‹å€¼ç»™<code>newThr</code>ï¼Œä¸ºåˆ›å»ºæ•°ç»„åšå‡†å¤‡ã€‚</p>
<p>ç”±äº<code>newThr</code>ä¸ä¸º0ï¼Œæ‰€ä»¥ä¸ä¼šè¿›å…¥æœ€åä¸€ä¸ªifè¯­å¥ã€‚</p>
<p>å°†<code>newThr</code>èµ‹å€¼ç»™æˆå‘˜å˜é‡<code>threshold</code>ï¼Œå†åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º<code>newCap</code>çš„Nodeæ•°ç»„<code>newTab</code>ï¼Œå†å°†<code>newTab</code>èµ‹å€¼ç»™tableï¼Œè¿™ä¸‹å°±å®Œæˆäº†æ•°ç»„çš„åˆ›å»ºã€‚</p>
<p>æœ€åresizeæ–¹æ³•ä¼šè¿”å›<code>newTab</code>ï¼Œæ‰€ä»¥å°†resize()è¿”å›çš„ç»“æœèµ‹å€¼ç»™tabï¼Œå®é™…ä¸Šå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå¤§å°ä¸º16ï¼Œæ‰©å®¹é˜ˆå€¼ä¸º12çš„Nodeæ•°ç»„ã€‚</p>
<pre><code class="hljs language-ini" lang="ini"> if ((<span class="hljs-attr">p</span> = tab[i = (n - <span class="hljs-number">1</span>) &amp; hash]) == null)
 Â  Â tab<span class="hljs-section">[i]</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
</code></pre>
<p>å‰é¢è¯´å‚æ•°çš„æ—¶å€™æˆ‘ä»¬çŸ¥é“ï¼Œè¿™é‡Œçš„hashä¼ è¿›æ¥çš„æ˜¯hash(key)ï¼Œå³é”®çš„å“ˆå¸Œå€¼ã€‚å°†é”®çš„å“ˆå¸Œå€¼ä¸æ•°ç»„é•¿åº¦-1åšä¸è¿ç®—ï¼Œå¾—åˆ°äº†è¯¥å¯¹è±¡åœ¨æ•°ç»„ä¸­å­˜æ”¾çš„ç´¢å¼•ï¼Œèµ‹å€¼ç»™iï¼Œå°†tab[i]èµ‹å€¼ç»™p</p>
<p>å¦‚æœpä¸ºç©ºï¼Œå³è¯¥ä½ç½®æ²¡æœ‰å…ƒç´ ï¼Œé‚£ä¹ˆç›´æ¥åœ¨è¯¥ä½ç½®åˆ›å»ºä¸€ä¸ªæ–°èŠ‚ç‚¹ã€‚</p>
<pre><code class="hljs language-python" lang="python"> Â  Node&lt;K,V&gt; newNode(<span class="hljs-built_in">int</span> <span class="hljs-built_in">hash</span>, K key, V value, Node&lt;K,V&gt; <span class="hljs-built_in">next</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> new Node&lt;&gt;(<span class="hljs-built_in">hash</span>, key, value, <span class="hljs-built_in">next</span>);
 Â   }
</code></pre>
<p><code>newNode</code>æ–¹æ³•æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯åˆ›å»ºäº†ä¸€ä¸ªNodeå¯¹è±¡ã€‚</p>
<p>æœ€ååˆ¤æ–­++sizeæ˜¯å¦å¤§äºthresholdï¼Œå¯¹äºç¬¬ä¸€æ¬¡æ·»åŠ å…ƒç´ çš„æƒ…å†µæ¥è¯´æ˜¯å¦å®šçš„ã€‚è¿™ä¸ªifè¯­å¥å°±æ˜¯ç”¨æ¥åˆ¤æ–­æ˜¯å¦éœ€è¦æ‰©å®¹çš„ã€‚æœ€ç»ˆè¿”å›nullï¼Œè¿™ä¹Ÿå¾ˆç¬¦åˆæˆ‘ä»¬çš„ä½¿ç”¨è®¤çŸ¥ï¼šè¦†ç›–ä¹‹åè¿”å›è¢«è¦†ç›–çš„å€¼ã€‚ç”±äºåŸæœ¬ä¸ºç©ºï¼Œç›¸å½“äºè¦†ç›–äº†ç©ºï¼Œæ‰€ä»¥è¿”å›ç©ºã€‚</p>
<p><strong>ç¬¬ä¸‰ç§æƒ…å†µï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â  Â  Â Node&lt;K,V&gt; e<span class="hljs-comment">; K k;</span>
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">p.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = p.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else if (p instanceof TreeNode)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â if (e != null) { // existing mapping for key
 Â  Â  Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (!onlyIfAbsent || <span class="hljs-attr">oldValue</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â afterNodeAccess(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
</code></pre>
<p>ä¸Šæ–‡è¯´è¿‡ï¼Œpå°±æ˜¯tab[i]ï¼Œå³è¿™ä¸ªå¯¹è±¡åº”è¯¥åœ¨æ•°ç»„ä¸­å­˜æ”¾çš„ä½ç½®ä¸Šçš„å…ƒç´ åœ°å€å€¼ã€‚</p>
<p>æˆ‘ä»¬å‡è®¾ç°åœ¨åœ¨ä¸‹æ ‡ä¸º2çš„ä½ç½®å­˜äº†ä¸€ä¸ªåœ°å€ä¸º<code>0x0011</code>ï¼Œé”®ä¸º<code>aaa</code>ï¼Œå€¼ä¸º111çš„å¯¹è±¡Aã€‚ç°åœ¨æˆ‘ä»¬å°†ä¸€ä¸ªåœ°å€ä¸º<code>0x0033</code>ï¼Œé”®ä¸º<code>ccc</code>ï¼Œå€¼ä¸º333çš„å¯¹è±¡CåŠ å…¥HashMapä¸­ï¼Œæ°å¥½ç®—å‡ºæ¥çš„åº”è¯¥å­˜å…¥å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®å°±æ˜¯ä¸‹æ ‡ä¸º2çš„ä½ç½®ï¼Œå‘ç”Ÿé‡å¤ã€‚</p>
<p>é‚£ä¹ˆæ­¤æ—¶è¿™ä¸ªç¬¬ä¸‰æ–¹èŠ‚ç‚¹pè®°å½•çš„å°±æ˜¯åœ°å€ä¸º<code>0x0011</code>ï¼Œé”®ä¸º<code>aaa</code>ï¼Œå€¼ä¸º111çš„å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå‰¯æœ¬ã€‚</p>
<p>é¦–å…ˆåˆ¤æ–­<code>p.hash</code>æ˜¯å¦ç­‰äºå½“å‰è¦åŠ å…¥å¯¹è±¡çš„å“ˆå¸Œå€¼ï¼Œå¦‚æœä¸ç­‰äºï¼Œç”±äºæ˜¯&amp;&amp;ï¼Œå°±ç›´æ¥è·³è¿‡ã€‚</p>
<p>å¦‚æœpæ˜¯æŸä¸ªçº¢é»‘æ ‘èŠ‚ç‚¹çš„åœ°å€ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªå¾…åŠ å…¥èŠ‚ç‚¹åŠ å…¥çº¢é»‘æ ‘ã€‚</p>
<p>å¦‚æœä¸æ˜¯çº¢é»‘æ ‘çš„èŠ‚ç‚¹ï¼Œé‚£å°±è¦æ¶‰åŠåˆ°é“¾è¡¨äº†ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
</code></pre>
<p>å¦‚æœè¿™ä¸ªå¯¹è±¡Açš„nextä¸ºç©ºï¼Œé‚£ä¹ˆå°±åŸåœ°æ–°å»ºä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå®ƒçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚å†åˆ¤æ–­é•¿åº¦æ˜¯å¦è¶…è¿‡8ï¼Œå¦‚æœè¶…è¿‡8å°±è°ƒç”¨<code>treeifyBin</code>æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿˜ä¼šåˆ¤æ–­æ•°ç»„é•¿åº¦æ˜¯å¦å¤§äº64ï¼Œå¦‚æœä¸¤ä¸ªæ¡ä»¶éƒ½æ»¡è¶³ï¼Œå°±ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚åˆ¤æ–­å®Œæ˜¯å¦éœ€è¦è½¬ä¸ºçº¢é»‘æ ‘åï¼Œé€€å‡ºå¾ªç¯ã€‚ç”±äº<code>p.next</code>åŸæœ¬ä¸ºç©ºï¼Œæ‰€ä»¥eä¸ºnullï¼Œä¸ä¼šèµ°åé¢çš„ifè¯­å¥ã€‚</p>
<p>å¦‚æœ<code>p.next</code>åŸæœ¬ä¸ä¸ºç©ºï¼Œå°±ä¼šåˆ¤æ–­eçš„å“ˆå¸Œå€¼ä¸å¾…åŠ å…¥èŠ‚ç‚¹çš„å“ˆå¸Œå€¼æ˜¯å¦ç›¸åŒï¼Œå¦‚æœä¸ç›¸åŒçš„è¯å°±å°†eèµ‹å€¼ç»™på†å¾ªç¯ï¼Œç›¸å½“äºåŒæŒ‡é’ˆè¿­ä»£éå†é“¾è¡¨ã€‚åªè¦æ²¡æœ‰å“ˆå¸Œå€¼ä¸€æ ·ï¼Œæœ€ç»ˆpä¸€å®šä¼šæ˜¯é“¾è¡¨æœ«å°¾çš„èŠ‚ç‚¹çš„åœ°å€ï¼Œeæœ€ç»ˆä¸€å®šä¸ºç©ºã€‚åªè¦å“ˆå¸Œå€¼ä¸€æ ·ï¼Œeå°±æ˜¯é‚£ä¸ªå“ˆå¸Œå€¼ç›¸åŒçš„èŠ‚ç‚¹çš„åœ°å€ï¼Œå³è¿›å…¥ä¸‹æ–‡çš„ç¬¬äºŒç§æƒ…å†µã€‚</p>
<p><strong>ç¬¬äºŒç§æƒ…å†µï¼š</strong></p>
<p>ç°åœ¨ï¼Œåœ¨å¯¹è±¡Cåé¢æˆ‘ä»¬åˆå­˜å…¥äº†ä¸€ä¸ªåœ°å€ä¸º<code>0x0044</code>ï¼Œé”®ä¸º<code>ddd</code>ï¼Œå€¼ä¸º444çš„å¯¹è±¡Dã€‚æˆ‘ä»¬è¦å­˜å…¥ä¸€ä¸ªåœ°å€ä¸º<code>0x0055</code>ï¼Œé”®ä¸º<code>ddd</code>ï¼Œå€¼ä¸º555çš„å¯¹è±¡D1ã€‚å‡è®¾è¦å­˜å…¥çš„ä½ç½®ä¾ç„¶æ˜¯ä¸‹æ ‡ä¸º2çš„ä½ç½®ã€‚</p>
<p>é¦–å…ˆä¼šå°†Dçš„é”®çš„å“ˆå¸Œå€¼ä¸Açš„é”®çš„å“ˆå¸Œå€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸ä¸€æ ·å°±çœ‹Aåé¢æœ‰æ²¡æœ‰å…ƒç´ ï¼Œå¦‚æœä¸€æ ·å°±è¿›è¡Œè¦†ç›–ã€‚ç”±äºé”®ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆç”±äºAåé¢è¿˜æœ‰ä¸€ä¸ªå¯¹è±¡Cï¼ŒCåé¢è¿˜æœ‰Dï¼Œå†æ¯”è¾ƒï¼Œå‘ç°é”®çš„å“ˆå¸Œå€¼ç›¸åŒï¼Œå°±è¦è¿›è¡Œè¦†ç›–æ“ä½œã€‚æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨æºç ä¸­å…·ä½“æ˜¯å¦‚ä½•å®ç°çš„ã€‚</p>
<p>é¦–å…ˆï¼Œpè¿˜æ˜¯å¯¹è±¡Açš„åœ°å€ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºâ€œåº”è¯¥å­˜å…¥çš„ä½ç½®ä¸Šçš„å¯¹è±¡ çš„åœ°å€â€ã€‚ç°åœ¨pä¸ä¸ºnullï¼Œèµ°elseè¯­å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â Node&lt;K,V&gt; e<span class="hljs-comment">; K k;</span>
 Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">p.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = p.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = p<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else if (p instanceof TreeNode)
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e</span> = ((TreeNode&lt;K,V&gt;)p).putTreeVal(this, tab, hash, key, value)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â if (e != null) { // existing mapping for key
 Â  Â  Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (!onlyIfAbsent || <span class="hljs-attr">oldValue</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â afterNodeAccess(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
</code></pre>
<p>pï¼ˆå¯¹è±¡Açš„åœ°å€ï¼‰çš„å“ˆå¸Œå€¼ä¸ç­‰äºD1çš„å“ˆå¸Œå€¼ï¼Œä¹Ÿä¸æ˜¯æ ‘èŠ‚ç‚¹ï¼Œèµ°å†…å±‚çš„elseè¯­å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â  Â  Â else {
 Â  Â  Â  Â  Â  Â  Â  Â for (int <span class="hljs-attr">binCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">; ; ++binCount) {</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if ((<span class="hljs-attr">e</span> = p.next) == null) {
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p.next</span> = newNode(hash, key, value, null)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (binCount &gt;= TREEIFY_THRESHOLD - 1) // -1 for 1st
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â treeifyBin(tab, hash)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â   }
</code></pre>
<p>å°†pçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹èµ‹å€¼ç»™eï¼Œæ­¤æ—¶eä¸ºå¯¹è±¡Cçš„åœ°å€ï¼Œä¸ä¸ºç©ºï¼Œèµ°ç¬¬äºŒä¸ªifè¯­å¥ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â  Â  Â  Â  Â  Â  Â if (<span class="hljs-attr">e.hash</span> == hash &amp;&amp;
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   ((<span class="hljs-attr">k</span> = e.key) == key || (key != null &amp;&amp; key.equals(k))))
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â break<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">p</span> = e<span class="hljs-comment">;</span>
</code></pre>
<p>eï¼ˆå¯¹è±¡Cçš„åœ°å€ï¼‰çš„å“ˆå¸Œå€¼ä¹Ÿä¸ç­‰äºD1çš„å“ˆå¸Œå€¼ï¼Œä¸ä¼šè¿›å…¥ifä¸­ï¼Œæœ€åå°†eèµ‹å€¼ç»™pï¼Œä¹Ÿå°±æ˜¯åŸæœ¬ä¸ºå¯¹è±¡Açš„pï¼Œç°åœ¨å˜æˆäº†å¯¹è±¡Cï¼Œè¿™å®é™…ä¸Šç›¸å½“äºåŒæŒ‡é’ˆè¿­ä»£éå†é“¾è¡¨ã€‚eæ˜¯pçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„åœ°å€ï¼Œç„¶åé€šè¿‡å°†eèµ‹å€¼ç»™pç§»åŠ¨pï¼Œç„¶åç›´æ¥é€šè¿‡nextå¾—åˆ°pçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ç°åœ¨pæ˜¯å¯¹è±¡Cçš„åœ°å€ï¼Œæ²¡æœ‰breakï¼Œæ‰€ä»¥è¿˜ä¼šç»§ç»­åœ¨è¿™ä¸ªforå¾ªç¯ä¸­ã€‚å°†pçš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹åœ°å€èµ‹å€¼ç»™eï¼Œæ­¤æ—¶eä¸ºå¯¹è±¡Dçš„åœ°å€ï¼Œä¸ä¸ºç©ºï¼Œèµ°ç¬¬äºŒä¸ªifè¯­å¥ã€‚å‘ç°<code>e.hash==hash</code>æˆç«‹ï¼Œç”±äºæ˜¯&amp;&amp;ï¼Œç»§ç»­å¾€åçœ‹ã€‚<code>e.key==key</code>ä¹Ÿæˆç«‹ï¼Œç”±äºæ˜¯||ï¼Œä¸ç”¨çœ‹äº†ï¼Œå¿…ç„¶æˆç«‹ï¼Œå› æ­¤æ•´æ¡è¯­å¥è¿”å›trueï¼Œè¿›å…¥ifè¯­å¥ï¼Œè°ƒç”¨breakï¼Œé€€å‡ºå¾ªç¯ã€‚</p>
<p>æ­¤æ—¶eä¸ä¸ºç©ºï¼Œèµ°ifè¯­å¥è¿›è¡Œèµ‹å€¼ï¼š</p>
<pre><code class="hljs language-ini" lang="ini"> Â  Â  Â  Â  Â  Â if (e != null) { // existing mapping for key
 Â  Â  Â  Â  Â  Â  Â  Â V <span class="hljs-attr">oldValue</span> = e.value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â if (!onlyIfAbsent || <span class="hljs-attr">oldValue</span> == null)
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-attr">e.value</span> = value<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â afterNodeAccess(e)<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â  Â  Â  Â return oldValue<span class="hljs-comment">;</span>
 Â  Â  Â  Â  Â   }
</code></pre>
<p>å°†å¾…è¦†ç›–çš„èŠ‚ç‚¹çš„valueå–å‡ºæ¥èµ‹å€¼ç»™<code>oldValue</code>ï¼Œ<code>onlyIfAbsent</code>ä¸ºtrueï¼Œé‚£ä¹ˆå°±è¿›å…¥ifè¯­å¥ï¼Œå°†å¾…åŠ å…¥çš„èŠ‚ç‚¹çš„valueèµ‹å€¼ç»™å¾…è¦†ç›–èŠ‚ç‚¹çš„valueï¼Œå†è¿”å›å¾…è¦†ç›–èŠ‚ç‚¹åŸæœ¬çš„value</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹é“¾è¡¨è¿›è¡Œåˆ é™¤å¹¶æ–°å¢èŠ‚ç‚¹çš„æ“ä½œï¼Œåªä¸è¿‡æ˜¯å°†å“ˆå¸Œå€¼ä¸€æ ·çš„èŠ‚ç‚¹çš„Valueè¿›è¡Œäº†æ›¿æ¢è€Œå·²ã€‚å³ï¼šç°åœ¨é“¾è¡¨ä¸­ä¾ç„¶è¿˜æ˜¯A -&gt; C -&gt; Dï¼Œæ²¡æœ‰D1å¯¹è±¡ï¼Œåªä¸è¿‡Dçš„Valueä»åŸæœ¬çš„444æ”¹ä¸ºäº†555ï¼Œç„¶åå°†åŸæœ¬çš„444è¿”å›ç»™äº†æˆ‘ä»¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šæœ€å°æ ˆçš„å·§å¦™è®¾è®¡ï¼šç”¨è¾…åŠ©æ ˆå®ç° O(1) è·å–æœ€å°å€¼ã€‹]]></title>    <link>https://juejin.cn/post/7578442185848651814</link>    <guid>https://juejin.cn/post/7578442185848651814</guid>    <pubDate>2025-12-01T08:40:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578442185848651814" data-draft-id="7577713754563412020" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šæœ€å°æ ˆçš„å·§å¦™è®¾è®¡ï¼šç”¨è¾…åŠ©æ ˆå®ç° O(1) è·å–æœ€å°å€¼ã€‹"/> <meta itemprop="keywords" content="JavaScript,é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-01T08:40:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é±¼é±¼å—"/> <meta itemprop="url" content="https://juejin.cn/user/4302802432307224"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šæœ€å°æ ˆçš„å·§å¦™è®¾è®¡ï¼šç”¨è¾…åŠ©æ ˆå®ç° O(1) è·å–æœ€å°å€¼ã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4302802432307224/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é±¼é±¼å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T08:40:53.000Z" title="Mon Dec 01 2025 08:40:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æœ€å°æ ˆï¼šç”¨è¾…åŠ©æ ˆå®ç° O(1) è·å–æœ€å°å€¼çš„å·§å¦™è®¾è®¡</h2>
<p>æ ˆï¼ˆStackï¼‰æ˜¯ç¨‹åºå‘˜æœ€ç†Ÿæ‚‰çš„æ•°æ®ç»“æ„ä¹‹ä¸€â€”â€”åè¿›å…ˆå‡ºã€æ“ä½œç®€å•ï¼Œå¹¿æ³›åº”ç”¨äºå‡½æ•°è°ƒç”¨ã€è¡¨è¾¾å¼æ±‚å€¼ã€æ‹¬å·åŒ¹é…ç­‰åœºæ™¯ã€‚ä½†ä½ æ˜¯å¦æƒ³è¿‡ï¼šå¦‚æœåœ¨æ ‡å‡†æ ˆçš„åŸºç¡€ä¸Šï¼Œ<strong>è¦æ±‚éšæ—¶ä»¥ O(1) çš„æ—¶é—´å¤æ‚åº¦è·å–å½“å‰æ ˆä¸­çš„æœ€å°å…ƒç´ </strong>ï¼Œè¯¥å¦‚ä½•è®¾è®¡ï¼Ÿè¿™æ­£æ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fmin-stack%2Fdescription%2F" target="_blank" title="https://leetcode.cn/problems/min-stack/description/" ref="nofollow noopener noreferrer">155. æœ€å°æ ˆ - åŠ›æ‰£ï¼ˆLeetCodeï¼‰</a>æ‰€æå‡ºçš„æ ¸å¿ƒæŒ‘æˆ˜ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©ä¸€ä¸ª<strong>è¾…åŠ©æ ˆ</strong>ï¼ˆä¹Ÿç§°ä¸ºå•è°ƒæ ˆï¼‰æ¥å®ç° <strong>O(1) æ—¶é—´å¤æ‚åº¦</strong>è·å–æœ€å°å€¼çš„åŠŸèƒ½ã€‚æœ¬æ–‡å°†ä»é—®é¢˜å‡ºå‘ï¼Œé€æ­¥è®²è§£ä¸¤ç§å®ç°æ–¹å¼â€”â€”æœ´ç´ æ–¹æ³•ä¸ä¼˜åŒ–æ–¹æ³•ï¼Œå¹¶é‡ç‚¹å‰–æâ€œè¾…åŠ©æ ˆâ€è¿™ä¸€ç²¾å·§è®¾è®¡çš„æ€æƒ³ä¸å®ç°ç»†èŠ‚ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€é—®é¢˜å®šä¹‰ï¼šä»€ä¹ˆæ˜¯â€œæœ€å°æ ˆâ€ï¼Ÿ</h3>
<p>â€œæœ€å°æ ˆâ€æ˜¯æŒ‡åœ¨æ”¯æŒæ ‡å‡†æ ˆæ“ä½œï¼ˆpushã€popã€topï¼‰çš„åŸºç¡€ä¸Šï¼Œé¢å¤–æ”¯æŒä¸€ä¸ª <code>getMin()</code> æ–¹æ³•ï¼Œç”¨äº<strong>è¿”å›å½“å‰æ ˆä¸­æ‰€æœ‰å…ƒç´ çš„æœ€å°å€¼</strong>ï¼Œä¸”è¦æ±‚è¯¥æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚</p>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æ‰§è¡Œ <code>push(3)</code> â†’ æ ˆï¼š[3] â†’ æœ€å°å€¼ï¼š3</li>
<li>æ‰§è¡Œ <code>push(1)</code> â†’ æ ˆï¼š[3,1] â†’ æœ€å°å€¼ï¼š1</li>
<li>æ‰§è¡Œ <code>push(2)</code> â†’ æ ˆï¼š[3,1,2] â†’ æœ€å°å€¼ï¼š1</li>
<li>æ‰§è¡Œ <code>pop()</code> â†’ æ ˆï¼š[3,1] â†’ æœ€å°å€¼ï¼š1</li>
<li>å†æ¬¡ <code>pop()</code> â†’ æ ˆï¼š[3] â†’ æœ€å°å€¼ï¼š3</li>
</ul>
<p>å…³é”®åœ¨äºï¼š<strong>æ— è®ºæ ˆå¦‚ä½•å˜åŒ–ï¼Œ<code>getMin()</code> éƒ½èƒ½ç«‹åˆ»è¿”å›å½“å‰æœ€å°å€¼ï¼Œæ— éœ€é‡æ–°æ‰«æã€‚</strong></p>
<hr/>
<h3 data-id="heading-2">äºŒã€æœ´ç´ è§£æ³•ï¼šæ¯æ¬¡éå†æ‰¾æœ€å°å€¼</h3>
<p>æœ€ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼šæ¯æ¬¡è°ƒç”¨ <code>getMin()</code> æ—¶ï¼Œéå†æ•´ä¸ªæ ˆï¼Œæ‰¾å‡ºæœ€å°å…ƒç´ ã€‚è¿™ç§å®ç°ç®€å•ç›´æ¥ï¼Œä½†æ•ˆç‡ä½ä¸‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MiniStack</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span> = [];
}

<span class="hljs-title class_">MiniStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">push</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">push</span>(x);
}

<span class="hljs-title class_">MiniStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">pop</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-title function_">pop</span>();
}

<span class="hljs-title class_">MiniStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">top</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span> || !<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span>) {
    <span class="hljs-keyword">return</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">stack</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>];
}

<span class="hljs-title class_">MiniStack</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">getMin</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> minValue = <span class="hljs-title class_">Infinity</span>;
  <span class="hljs-keyword">const</span> { stack } = <span class="hljs-variable language_">this</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; stack.<span class="hljs-property">length</span>; i++) {
    <span class="hljs-keyword">if</span> (stack[i] &lt; minValue) {
      minValue = stack[i];
    }
  }
  <span class="hljs-keyword">return</span> minValue;
}
</code></pre>
<p>è¿™ç§æ–¹æ³•çš„é—®é¢˜æ˜¾è€Œæ˜“è§ï¼š</p>
<ul>
<li><code>getMin()</code> çš„æ—¶é—´å¤æ‚åº¦æ˜¯ <strong>O(n)</strong> ï¼›</li>
<li>å¦‚æœé¢‘ç¹è°ƒç”¨ <code>getMin()</code>ï¼Œæ•´ä½“æ€§èƒ½ä¼šæ˜¾è‘—ä¸‹é™ï¼›</li>
<li>ä¸ç¬¦åˆâ€œé«˜æ•ˆæ•°æ®ç»“æ„â€çš„è®¾è®¡ç›®æ ‡ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§æ›´èªæ˜çš„åŠæ³•ã€‚</p>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ä¼˜åŒ–è§£æ³•ï¼šå¼•å…¥è¾…åŠ©æ ˆï¼ˆå•è°ƒæ ˆï¼‰</h3>
<p>æ ¸å¿ƒæ€æƒ³æ˜¯ï¼š<strong>ç”¨ç©ºé—´æ¢æ—¶é—´</strong>ã€‚æˆ‘ä»¬é¢å¤–ç»´æŠ¤ä¸€ä¸ªâ€œè¾…åŠ©æ ˆâ€ï¼Œä¸“é—¨ç”¨æ¥è®°å½•<strong>å½“å‰ä¸»æ ˆçŠ¶æ€ä¸‹çš„æœ€å°å€¼</strong>ã€‚è¿™ä¸ªè¾…åŠ©æ ˆå§‹ç»ˆä¿æŒâ€œéä¸¥æ ¼é€’å‡â€ï¼ˆå³å•è°ƒä¸å¢ï¼‰ï¼Œå…¶æ ˆé¡¶å§‹ç»ˆæ˜¯å½“å‰å…¨å±€æœ€å°å€¼ã€‚</p>
<h4 data-id="heading-4">1. è¾…åŠ©æ ˆçš„å·¥ä½œåŸç†</h4>
<ul>
<li>
<p><strong>å…¥æ ˆï¼ˆpushï¼‰æ—¶</strong>ï¼š</p>
<ul>
<li>å°†å…ƒç´ å‹å…¥ä¸»æ ˆï¼›</li>
<li>åŒæ—¶åˆ¤æ–­ï¼šå¦‚æœè¾…åŠ©æ ˆä¸ºç©ºï¼Œæˆ–è€…æ–°å…ƒç´  â‰¤ è¾…åŠ©æ ˆæ ˆé¡¶ï¼Œåˆ™ä¹Ÿå°†è¯¥å…ƒç´ å‹å…¥è¾…åŠ©æ ˆã€‚</li>
</ul>
</li>
<li>
<p><strong>å‡ºæ ˆï¼ˆpopï¼‰æ—¶</strong>ï¼š</p>
<ul>
<li>ä»ä¸»æ ˆå¼¹å‡ºå…ƒç´ ï¼›</li>
<li>å¦‚æœå¼¹å‡ºçš„å…ƒç´ ç­‰äºè¾…åŠ©æ ˆæ ˆé¡¶ï¼Œåˆ™è¾…åŠ©æ ˆä¹ŸåŒæ­¥å¼¹å‡ºã€‚</li>
</ul>
</li>
<li>
<p><strong>è·å–æœ€å°å€¼ï¼ˆgetMinï¼‰æ—¶</strong>ï¼š</p>
<ul>
<li>ç›´æ¥è¿”å›è¾…åŠ©æ ˆçš„æ ˆé¡¶å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦ O(1)ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§è®¾è®¡ä¿è¯äº†ï¼š<strong>è¾…åŠ©æ ˆçš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œéƒ½å¯¹åº”ä¸»æ ˆåœ¨æŸä¸ªæ—¶åˆ»çš„æœ€å°å€¼</strong>ã€‚å³ä½¿ä¸»æ ˆä¸­æœ‰é‡å¤å…ƒç´ ï¼Œåªè¦å®ƒä»¬å½±å“äº†æœ€å°å€¼ï¼Œè¾…åŠ©æ ˆå°±ä¼šè®°å½•ã€‚</p>
<h4 data-id="heading-5">2. ä»£ç å®ç°</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">const</span> MiniStack = function() {
  <span class="hljs-keyword">this</span>.stack = [];     <span class="hljs-comment">// ä¸»æ ˆ</span>
  <span class="hljs-keyword">this</span>.stack2 = [];    <span class="hljs-comment">// è¾…åŠ©æ ˆï¼ˆå•è°ƒæ ˆï¼‰</span>
}

MiniStack.prototype.push = function(x) {
  <span class="hljs-keyword">this</span>.stack.push(x);
  <span class="hljs-comment">// å¦‚æœè¾…åŠ©æ ˆä¸ºç©ºï¼Œæˆ–æ–°å…ƒç´ å°äºç­‰äºè¾…åŠ©æ ˆæ ˆé¡¶ï¼Œåˆ™å…¥è¾…åŠ©æ ˆ</span>
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.stack2.length === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.stack2[<span class="hljs-keyword">this</span>.stack2.length - <span class="hljs-number">1</span>] &gt;= x) {
    <span class="hljs-keyword">this</span>.stack2.push(x);
  }
}

MiniStack.prototype.pop = function() {
  <span class="hljs-keyword">const</span> popped = <span class="hljs-keyword">this</span>.stack.pop();
  <span class="hljs-comment">// å¦‚æœå¼¹å‡ºçš„å…ƒç´ ç­‰äºè¾…åŠ©æ ˆæ ˆé¡¶ï¼Œåˆ™è¾…åŠ©æ ˆä¹Ÿå¼¹å‡º</span>
  <span class="hljs-keyword">if</span> (popped === <span class="hljs-keyword">this</span>.stack2[<span class="hljs-keyword">this</span>.stack2.length - <span class="hljs-number">1</span>]) {
    <span class="hljs-keyword">this</span>.stack2.pop();
  }
}

MiniStack.prototype.top = function() {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.stack[<span class="hljs-keyword">this</span>.stack.length - <span class="hljs-number">1</span>];
}

MiniStack.prototype.getMin = function() {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.stack2[<span class="hljs-keyword">this</span>.stack2.length - <span class="hljs-number">1</span>];
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨ <code>&gt;=</code> è€Œä¸æ˜¯ <code>&gt;</code>ï¼Œæ˜¯ä¸ºäº†å¤„ç†<strong>é‡å¤æœ€å°å€¼</strong>çš„æƒ…å†µã€‚ä¾‹å¦‚è¿ç»­ push ä¸¤ä¸ª 1ï¼Œè‹¥åªåœ¨ <code>&lt;</code> æ—¶å…¥è¾…åŠ©æ ˆï¼Œåˆ™ç¬¬äºŒä¸ª 1 å‡ºæ ˆæ—¶è¾…åŠ©æ ˆå·²ç©ºï¼Œå¯¼è‡´é”™è¯¯ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">å››ã€ä¸ºä»€ä¹ˆè¾…åŠ©æ ˆèƒ½æ­£ç¡®å·¥ä½œï¼Ÿ</h3>
<p>è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­éªŒè¯å…¶æ­£ç¡®æ€§ï¼š</p>
<p>æ“ä½œåºåˆ—ï¼š</p>
<ol>
<li><code>push(5)</code> â†’ ä¸»æ ˆï¼š[5]ï¼Œè¾…åŠ©æ ˆï¼š[5]</li>
<li><code>push(3)</code> â†’ ä¸»æ ˆï¼š[5,3]ï¼Œè¾…åŠ©æ ˆï¼š[5,3]ï¼ˆ3 â‰¤ 5ï¼‰</li>
<li><code>push(4)</code> â†’ ä¸»æ ˆï¼š[5,3,4]ï¼Œè¾…åŠ©æ ˆï¼š[5,3]ï¼ˆ4 &gt; 3ï¼Œä¸å…¥ï¼‰</li>
<li><code>push(3)</code> â†’ ä¸»æ ˆï¼š[5,3,4,3]ï¼Œè¾…åŠ©æ ˆï¼š[5,3,3]ï¼ˆ3 â‰¤ 3ï¼‰</li>
<li><code>getMin()</code> â†’ è¿”å› 3 âœ…</li>
<li><code>pop()</code> â†’ å¼¹å‡º 3ï¼Œä¸»æ ˆï¼š[5,3,4]ï¼Œè¾…åŠ©æ ˆï¼š[5,3]ï¼ˆå¼¹å‡ºåŒ¹é…ï¼‰</li>
<li><code>getMin()</code> â†’ è¿”å› 3 âœ…</li>
<li><code>pop()</code> â†’ å¼¹å‡º 4ï¼Œä¸»æ ˆï¼š[5,3]ï¼Œè¾…åŠ©æ ˆä¸å˜ï¼ˆ4 â‰  3ï¼‰</li>
<li><code>getMin()</code> â†’ è¿”å› 3 âœ…</li>
<li><code>pop()</code> â†’ å¼¹å‡º 3ï¼Œä¸»æ ˆï¼š[5]ï¼Œè¾…åŠ©æ ˆï¼š[5]</li>
<li><code>getMin()</code> â†’ è¿”å› 5 âœ…</li>
</ol>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<strong>è¾…åŠ©æ ˆå§‹ç»ˆä¸ä¸»æ ˆçš„â€œæœ€å°å€¼å†å²â€åŒæ­¥</strong>ï¼Œå³ä½¿ä¸­é—´æœ‰éæœ€å°å€¼æ’å…¥ï¼Œä¹Ÿä¸å½±å“æ­£ç¡®æ€§ã€‚</p>
<hr/>
<h3 data-id="heading-7">äº”ã€ç©ºé—´ä¸æ—¶é—´çš„æƒè¡¡</h3>
<ul>
<li>
<p><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼š</p>
<ul>
<li><code>push</code>ï¼šO(1)</li>
<li><code>pop</code>ï¼šO(1)</li>
<li><code>top</code>ï¼šO(1)</li>
<li><code>getMin</code>ï¼šO(1)</li>
</ul>
</li>
<li>
<p><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)</p>
<ul>
<li>æœ€åæƒ…å†µä¸‹ï¼ˆå¦‚å…ƒç´ å•è°ƒé€’å‡ï¼‰ï¼Œè¾…åŠ©æ ˆä¸ä¸»æ ˆä¸€æ ·å¤§ï¼›</li>
<li>å¹³å‡æƒ…å†µä¸‹ï¼Œè¾…åŠ©æ ˆè¿œå°äºä¸»æ ˆã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§â€œä»¥ç©ºé—´æ¢æ—¶é—´â€çš„ç­–ç•¥ï¼Œåœ¨ç°ä»£è®¡ç®—ç¯å¢ƒä¸­é€šå¸¸æ˜¯å€¼å¾—çš„ï¼Œå°¤å…¶æ˜¯å½“ <code>getMin</code> è¢«é¢‘ç¹è°ƒç”¨æ—¶ã€‚</p>
<hr/>
<h3 data-id="heading-8">å…­ã€å¸¸è§è¯¯åŒºä¸æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>æ¯”è¾ƒæ¡ä»¶å¿…é¡»åŒ…å«ç­‰äºï¼ˆâ‰¥ï¼‰</strong><br/>
è‹¥åªåœ¨ <code>&lt;</code> æ—¶å…¥è¾…åŠ©æ ˆï¼Œä¼šå¯¼è‡´é‡å¤æœ€å°å€¼è¢«é”™è¯¯å¿½ç•¥ã€‚ä¾‹å¦‚ push(1), push(1)ï¼Œè‹¥ç¬¬äºŒä¸ª 1 ä¸å…¥è¾…åŠ©æ ˆï¼Œåˆ™ç¬¬ä¸€æ¬¡ pop åè¾…åŠ©æ ˆä¸ºç©ºï¼Œæ— æ³•æ­£ç¡®è¿”å›æœ€å°å€¼ã€‚</li>
<li><strong>å‡ºæ ˆæ—¶è¦æ¯”è¾ƒå€¼ï¼Œè€Œéå¼•ç”¨</strong><br/>
åœ¨ JavaScript ä¸­ï¼Œæ•°å­—æ˜¯åŸå§‹ç±»å‹ï¼Œç›´æ¥æ¯”è¾ƒå³å¯ã€‚ä½†åœ¨å…¶ä»–è¯­è¨€ä¸­è‹¥ä½¿ç”¨å¯¹è±¡ï¼Œéœ€æ³¨æ„ç›¸ç­‰æ€§åˆ¤æ–­ã€‚</li>
<li><strong>è¾…åŠ©æ ˆä¸æ˜¯â€œæ‰€æœ‰å†å²æœ€å°å€¼â€ï¼Œè€Œæ˜¯â€œå½“å‰æœ‰æ•ˆæœ€å°å€¼åºåˆ—â€</strong><br/>
å®ƒåªä¿ç•™é‚£äº›åœ¨æŸä¸ªå‰ç¼€ä¸­æ›¾æ˜¯æœ€å°å€¼çš„å…ƒç´ ï¼Œä¸”æŒ‰å‡ºç°é¡ºåºæ’åˆ—ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-9">ä¸ƒã€åº”ç”¨åœºæ™¯</h3>
<p>æœ€å°æ ˆçš„è®¾è®¡æ€æƒ³ä¸ä»…é™äºé¢è¯•é¢˜ï¼Œå®ƒåœ¨ä»¥ä¸‹åœºæ™¯ä¸­ä¹Ÿæœ‰å®é™…ä»·å€¼ï¼š</p>
<ul>
<li>å®æ—¶ç›‘æ§ç³»ç»Ÿä¸­çš„æœ€ä½æ¸©åº¦ã€æœ€ä½ä»·æ ¼ã€æœ€ä½å»¶è¿Ÿï¼›</li>
<li>ç®—æ³•ç«èµ›ä¸­éœ€è¦åŠ¨æ€ç»´æŠ¤æå€¼çš„æ ˆç»“æ„ï¼›</li>
<li>ç¼–è¯‘å™¨æˆ–è§£é‡Šå™¨ä¸­å¯¹ä½œç”¨åŸŸå˜é‡çš„æœ€å°å€¼è¿½è¸ªï¼›</li>
<li>é‡‘èäº¤æ˜“ç³»ç»Ÿä¸­å¯¹æ»‘åŠ¨çª—å£æœ€å°å€¼çš„å¿«é€ŸæŸ¥è¯¢ï¼ˆç»“åˆåŒç«¯é˜Ÿåˆ—å¯æ‰©å±•ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">ç»“è¯­</h3>
<p>æœ€å°æ ˆé€šè¿‡å¼•å…¥ä¸€ä¸ªè¾…åŠ©æ ˆï¼Œå·§å¦™åœ°å°†â€œè·å–æœ€å°å€¼â€è¿™ä¸€çœ‹ä¼¼éœ€è¦å…¨å±€æ‰«æçš„æ“ä½œï¼Œè½¬åŒ–ä¸ºå¯¹æ ˆé¡¶å…ƒç´ çš„å¸¸æ•°æ—¶é—´è®¿é—®ã€‚è¿™ç§è®¾è®¡ä½“ç°äº†ç®—æ³•ä¸­ç»å…¸çš„â€œç©ºé—´æ¢æ—¶é—´â€æ€æƒ³ï¼Œä¹Ÿå±•ç¤ºäº†<strong>å•è°ƒæ ˆ</strong>è¿™ä¸€æ•°æ®ç»“æ„çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<p>ç†è§£æœ€å°æ ˆçš„å…³é”®ï¼Œåœ¨äºæŠŠæ¡â€œè¾…åŠ©æ ˆä¸ä¸»æ ˆçš„åŒæ­¥é€»è¾‘â€â€”â€”å®ƒä¸æ˜¯ç®€å•å¤åˆ¶ï¼Œè€Œæ˜¯æœ‰é€‰æ‹©åœ°è®°å½•å…³é”®çŠ¶æ€ã€‚æŒæ¡è¿™ä¸€æ¨¡å¼ï¼Œä¸ä»…èƒ½è§£å†³æœ€å°æ ˆé—®é¢˜ï¼Œè¿˜èƒ½è¿ç§»åˆ°æœ€å¤§æ ˆã€æ»‘åŠ¨çª—å£æœ€å€¼ã€ç›´æ–¹å›¾æœ€å¤§çŸ©å½¢ç­‰æ›´å¤æ‚çš„ç®—æ³•é—®é¢˜ä¸­ã€‚</p>
<p>åœ¨ç¼–ç¨‹å®è·µä¸­ï¼Œå½“æˆ‘ä»¬é¢å¯¹â€œåŠ¨æ€ç»´æŠ¤æå€¼â€çš„éœ€æ±‚æ—¶ï¼Œä¸å¦¨æ€è€ƒï¼šæ˜¯å¦å¯ä»¥å€ŸåŠ©ä¸€ä¸ªè¾…åŠ©ç»“æ„ï¼Œå°† O(n) é™ä¸º O(1)ï¼Ÿç­”æ¡ˆå¾€å¾€å°±è—åœ¨åƒâ€œæœ€å°æ ˆâ€è¿™æ ·ç®€æ´è€Œä¼˜é›…çš„è®¾è®¡ä¹‹ä¸­ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS æ€§èƒ½ä¼˜åŒ–çš„ç³»ç»ŸåŒ–è·¯å¾„ ä»æ¸²æŸ“åˆ°ç³»ç»Ÿè¡Œä¸ºçš„å¤šå·¥å…·ååŒä¼˜åŒ–å®è·µ]]></title>    <link>https://juejin.cn/post/7578499754553917491</link>    <guid>https://juejin.cn/post/7578499754553917491</guid>    <pubDate>2025-12-01T09:08:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578499754553917491" data-draft-id="7578511778889465894" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS æ€§èƒ½ä¼˜åŒ–çš„ç³»ç»ŸåŒ–è·¯å¾„ ä»æ¸²æŸ“åˆ°ç³»ç»Ÿè¡Œä¸ºçš„å¤šå·¥å…·ååŒä¼˜åŒ–å®è·µ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:08:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS æ€§èƒ½ä¼˜åŒ–çš„ç³»ç»ŸåŒ–è·¯å¾„ ä»æ¸²æŸ“åˆ°ç³»ç»Ÿè¡Œä¸ºçš„å¤šå·¥å…·ååŒä¼˜åŒ–å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:08:43.000Z" title="Mon Dec 01 2025 09:08:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨åº”ç”¨ä½“éªŒç«äº‰æ„ˆå‘æ¿€çƒˆçš„ä»Šå¤©ï¼Œ<strong>iOS æ€§èƒ½ä¼˜åŒ–</strong> å·²æˆä¸ºç ”å‘å›¢é˜Ÿæœ€é‡è¦çš„åŸºç¡€èƒ½åŠ›ä¹‹ä¸€ã€‚æ— è®ºæ˜¯é¦–å±åŠ è½½ã€é•¿åˆ—è¡¨æ»‘åŠ¨ã€åŠ¨ç”»ä½“éªŒã€Hybrid é¡µé¢ã€åå°ä»»åŠ¡è¿˜æ˜¯å¼±ç½‘åœºæ™¯ï¼Œæ€§èƒ½é—®é¢˜å¾€å¾€æ¥è‡ªå¤šä¸ªç»´åº¦äº¤ç»‡ï¼šCPUã€GPUã€å†…å­˜ã€ç½‘ç»œã€JSã€ç³»ç»Ÿé™åˆ¶ã€æ¶æ„è®¾è®¡ç­‰ã€‚</p>
<p>å› æ­¤ï¼Œå·¥ç¨‹çº§æ€§èƒ½ä¼˜åŒ–ä¸æ˜¯â€œéšç¼˜è°ƒè¯•â€ï¼Œä¹Ÿä¸æ˜¯â€œå‡­æ„Ÿè§‰ä¼˜åŒ–â€ï¼Œè€Œæ˜¯ä¾èµ–ä¸€æ•´å¥— <strong>å·¥å…·é“¾ + ç›‘æ§é“¾è·¯ + åˆ†ææ–¹æ³•</strong> çš„ä½“ç³»åŒ–èƒ½åŠ›ã€‚</p>
<p>æœ¬æ–‡åŸºäºçœŸå® iOS å·¥ç¨‹ç»éªŒï¼Œä¸ä¾èµ–å¤–éƒ¨æœç´¢ã€ä¸é‡‡ç”¨å¹¿å‘Šè¯­æ°”ï¼Œå°†ç»“åˆç»„ä»¶åŒ–æ¶æ„ä¸‹å¸¸è§ç—›ç‚¹ï¼Œæ„å»ºä¸€å¥—ç”± <strong>Instrumentsã€å…‹é­”ï¼ˆKeyMobï¼‰ã€PerfDogã€Safari Inspectorã€Charlesã€MetricKitã€Crashlytics</strong> ç»„æˆçš„é«˜æ•ˆ iOS æ€§èƒ½ä¼˜åŒ–æµç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€æ€§èƒ½ä¼˜åŒ–ä¸ºä»€ä¹ˆå¿…é¡»æ˜¯ä½“ç³»è€Œä¸æ˜¯â€œå•ç‚¹ä¼˜åŒ–â€ï¼Ÿ</h2>
<p>åœ¨è¿‡å»çš„å¼€å‘æ¨¡å¼ä¸­ï¼Œè®¸å¤šå›¢é˜Ÿè®¤ä¸ºæ€§èƒ½ä¼˜åŒ–å±äºâ€œä¸Šçº¿å‰å†æ”¹ä¸€æ”¹â€çš„äº‹æƒ…ã€‚ç„¶è€Œéšç€ iOS ç”Ÿæ€å¤æ‚åº¦å¢åŠ ï¼Œæ€§èƒ½é—®é¢˜å·²æˆä¸ºï¼š</p>
<h3 data-id="heading-1"><strong>å¤šç»´åº¦ã€å¤šå…¥å£çš„ç³»ç»Ÿæ€§é—®é¢˜ï¼š</strong></h3>
<h3 data-id="heading-2"><strong>1. CPU é—®é¢˜</strong></h3>
<ul>
<li>JSON è§£ç é˜»å¡ä¸»çº¿ç¨‹</li>
<li>æ¨¡å‹æ˜ å°„è¿‡é‡</li>
<li>å¤æ‚å¸ƒå±€åŒæ­¥è®¡ç®—</li>
</ul>
<h3 data-id="heading-3"><strong>2. GPU é—®é¢˜</strong></h3>
<ul>
<li>ä¸å¿…è¦çš„ç¦»å±æ¸²æŸ“</li>
<li>å›¾ç‰‡è¿‡å¤§</li>
<li>è§†å›¾å±‚çº§è¿‡æ·±</li>
</ul>
<h3 data-id="heading-4"><strong>3. å†…å­˜é—®é¢˜</strong></h3>
<ul>
<li>å›¾ç‰‡æœªé‡Šæ”¾</li>
<li>æ§åˆ¶å™¨æ³„æ¼</li>
<li>WebView å ç”¨è¿‡å¤§</li>
</ul>
<h3 data-id="heading-5"><strong>4. ç½‘ç»œé—®é¢˜</strong></h3>
<ul>
<li>æ¥å£è¶…æ—¶</li>
<li>å›¾ç‰‡åŠ è½½ç­‰å¾…è¿‡é•¿</li>
<li>é‡å®šå‘è¿‡å¤š</li>
</ul>
<h3 data-id="heading-6"><strong>5. Web / JS é—®é¢˜</strong></h3>
<ul>
<li>å¤§é‡ DOM</li>
<li>JS é•¿ä»»åŠ¡é˜»å¡</li>
<li>WebView é‡å»ºé¢‘ç¹</li>
</ul>
<h3 data-id="heading-7"><strong>6. ç³»ç»Ÿè¡Œä¸ºé—®é¢˜</strong></h3>
<ul>
<li>watchdogï¼ˆä¸»çº¿ç¨‹å¡æ­»ï¼‰</li>
<li>jetsamï¼ˆå†…å­˜å‹åŠ›æ€è¿›ç¨‹ï¼‰</li>
<li>æ¸©åº¦é™åˆ¶</li>
</ul>
<p>è¿™äº›é—®é¢˜å¾€å¾€äº’ç›¸å½±å“ï¼Œå¿…é¡»ä½¿ç”¨å¤šå·¥å…·ååŒå®šä½ã€‚</p>
<hr/>
<h2 data-id="heading-8">äºŒã€Instrumentsï¼šæ€§èƒ½ä¼˜åŒ–çš„åº•å±‚å…¥å£å·¥å…·</h2>
<p>Instruments æ˜¯ä»»ä½• iOS æ€§èƒ½ä¼˜åŒ–çš„èµ·ç‚¹ã€‚</p>
<h3 data-id="heading-9"><strong>1. Time Profilerï¼ˆCPUï¼‰</strong></h3>
<p>ç”¨äºå®šä½ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹ç¹å¿™ç¨‹åº¦</li>
<li>é‡åº¦è€—æ—¶æ–¹æ³•</li>
<li>GCD é˜Ÿåˆ—è¡¨ç°</li>
</ul>
<p>é€‚ç”¨äºè§£å†³ï¼š</p>
<ul>
<li>é¡µé¢å¡é¡¿</li>
<li>ç‚¹å‡»å»¶è¿Ÿ</li>
<li>JSON è§£æé˜»å¡</li>
</ul>
<h3 data-id="heading-10"><strong>2. Core Animationï¼ˆæ¸²æŸ“ä¼˜åŒ–ï¼‰</strong></h3>
<p>èƒ½å¤Ÿçœ‹åˆ°ï¼š</p>
<ul>
<li>GPU å ç”¨</li>
<li>ç¦»å±æ¸²æŸ“</li>
<li>å¸§ç‡å˜åŒ–</li>
</ul>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>åŠ¨ç”»å…³é”®å¸§æ‰å¸§</li>
<li>é¡µé¢æ»‘åŠ¨ä¸æµç•…</li>
</ul>
<h3 data-id="heading-11"><strong>3. Memoryï¼ˆLeaks + Allocationsï¼‰</strong></h3>
<p>å¯å®šä½ï¼š</p>
<ul>
<li>å¯¹è±¡æ³„æ¼</li>
<li>å†…å­˜è†¨èƒ€</li>
<li>retain cycle</li>
</ul>
<p>Instruments ç”¨äºâ€œæ·±å±‚å®šä½â€ï¼Œä½†å®ƒä¸é€‚åˆé•¿æ—¶é—´æµ‹è¯•æˆ–çœŸæœºå‹åŠ›åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¸‰ã€å…‹é­”ï¼ˆKeyMobï¼‰ï¼šç³»ç»Ÿè¡Œä¸º + æ€§èƒ½ç›‘æ§çš„çœŸæœºä¼˜åŒ–æ ¸å¿ƒ</h2>
<p>KeyMob åœ¨æ€§èƒ½ä¼˜åŒ–ä½“ç³»ä¸­è´Ÿè´£â€œ<strong>çœŸå®åœºæ™¯å¯è§‚æµ‹æ€§</strong>â€ã€‚</p>
<h3 data-id="heading-13"><strong>1. é«˜é¢‘æ€§èƒ½æŒ‡æ ‡ç›‘æ§</strong></h3>
<p>åŒ…æ‹¬ï¼š</p>
<ul>
<li>CPU / GPUï¼ˆå®æ—¶ï¼‰</li>
<li>FPSï¼ˆæµç•…åº¦ï¼‰</li>
<li>å†…å­˜æ›²çº¿</li>
<li>ç½‘ç»œåå</li>
<li>ç”µé‡æ¶ˆè€— / æ¸©åº¦</li>
</ul>
<p>é€‚åˆï¼š</p>
<ul>
<li>å›å½’æµ‹è¯•æ€§èƒ½å¯¹æ¯”</li>
<li>é•¿æ—¶é—´è¿è¡Œ</li>
<li>å¤æ‚äº¤äº’åœºæ™¯å‹åŠ›æµ‹è¯•</li>
</ul>
<h3 data-id="heading-14"><strong>2. ç³»ç»Ÿæ—¥å¿—ï¼ˆDevice Logsï¼‰</strong></h3>
<p>è¿™æ˜¯ä¼˜åŒ–çš„å…³é”®è¡¥å……ï¼Œå¸¸è§æ—¥å¿—åŒ…æ‹¬ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">watchdog:</span> main-thread blocked  
<span class="hljs-symbol">jetsam_event:</span> high memory pressure  
<span class="hljs-symbol">thermal:</span> CPU throttled  
WebKit crash  
permission denied  
disk I/O <span class="hljs-keyword">error</span>  
</code></pre>
<p><strong>è®¸å¤šâ€œæ— æ³•å¤ç°çš„æ€§èƒ½é—®é¢˜â€å…¶å®æ˜¯ç³»ç»Ÿæ—¥å¿—ç»™çš„ç­”æ¡ˆã€‚</strong></p>
<h3 data-id="heading-15"><strong>3. æ²™ç›’æ•°æ®å®šä½ I/O æ€§èƒ½é—®é¢˜</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>å¤§æ–‡ä»¶å†™å…¥é˜»å¡ UI</li>
<li>Incorrect cache policy</li>
<li>æ•°æ®åº“æœªå…³é—­å¯¼è‡´æ–‡ä»¶å¥æŸ„è¿‡é«˜</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯æ€§èƒ½é—®é¢˜å¸¸è§æ ¹å› ã€‚</p>
<hr/>
<h2 data-id="heading-16">å››ã€PerfDogï¼šé€‚åˆæ¸²æŸ“æ€§èƒ½ä¸å¸§ç‡ä¼˜åŒ–çš„å·¥å…·</h2>
<p>PerfDog åœ¨ iOS æ€§èƒ½ä¼˜åŒ–ä¸­æœ€æ“…é•¿å¤„ç†ï¼š</p>
<ul>
<li>åˆ—è¡¨æ»‘åŠ¨ä¸æµç•…</li>
<li>é¦–é¡µåŠ¨ç”»å¡é¡¿</li>
<li>æ¸¸æˆ/Unity/Flutter æ¸²æŸ“å‹åŠ›</li>
<li>è§†é¢‘æ’­æ”¾æ‰å¸§</li>
<li>é«˜é¢‘åˆ·æ–° UI</li>
</ul>
<h3 data-id="heading-17">å¯æä¾›ï¼š</h3>
<ul>
<li>æ¯«ç§’çº§ FPS</li>
<li>æ‰å¸§ç‚¹ï¼ˆèšåˆï¼‰</li>
<li>CPU/GPU è¶‹åŠ¿</li>
<li>å†…å­˜ä¸Šå‡è¶‹åŠ¿</li>
<li>æ¸©åº¦ / ç”µæµå˜åŒ–</li>
</ul>
<p>åœ¨åš FPS ä¼˜åŒ–æ—¶ï¼ŒPerfDog + Instruments æ˜¯æ ‡é…ç»„åˆã€‚</p>
<hr/>
<h2 data-id="heading-18">äº”ã€Safari Inspectorï¼šHybrid ä¸ Web æ€§èƒ½çš„æ ¸å¿ƒè°ƒè¯•å·¥å…·</h2>
<p>å¤§é‡ App å·²ç»åŒ…å« Hybridã€æ´»åŠ¨é¡µã€uni-appã€å°ç¨‹åºå®¹å™¨ã€‚</p>
<p>Safari Inspector èƒ½æŸ¥çœ‹ï¼š</p>
<h3 data-id="heading-19"><strong>1. JS æ€§èƒ½é—®é¢˜</strong></h3>
<ul>
<li>JS é•¿ä»»åŠ¡</li>
<li>Promise å †ç§¯</li>
<li>å¤§é‡ Bridge è°ƒç”¨</li>
</ul>
<h3 data-id="heading-20"><strong>2. DOM æ€§èƒ½é—®é¢˜</strong></h3>
<ul>
<li>è¿‡å¤šçš„èŠ‚ç‚¹</li>
<li>å¤šæ¬¡é‡æ’ï¼ˆreflowï¼‰</li>
<li>å¤šæ¬¡é‡ç»˜ï¼ˆrepaintï¼‰</li>
</ul>
<h3 data-id="heading-21"><strong>3. èµ„æºåŠ è½½é—®é¢˜</strong></h3>
<ul>
<li>H5 é¦–å±è€—æ—¶å¤§</li>
<li>WebView åŠ è½½æ…¢</li>
<li>å¤§å›¾å¯¼è‡´æ€§èƒ½ä¸‹é™</li>
</ul>
<p>åœ¨ Hybrid é¡¹ç›®ä¸­ Safari Inspector æ˜¯æ€§èƒ½ä¼˜åŒ–çš„ä¸»åŠ›å·¥å…·ã€‚</p>
<hr/>
<h2 data-id="heading-22">å…­ã€Charlesï¼šç½‘ç»œæ€§èƒ½ç“¶é¢ˆçš„å®šä½å·¥å…·</h2>
<p>ç½‘ç»œæ˜¯æ€§èƒ½é—®é¢˜æœ€å¸¸è§çš„æ ¹æºä¹‹ä¸€ã€‚</p>
<h3 data-id="heading-23">Charles å¯åˆ†æï¼š</h3>
<ul>
<li>æ¥å£å“åº”é€Ÿåº¦</li>
<li>å¤§ JSON è¿”å›</li>
<li>é‡å®šå‘å¯¼è‡´å¡é¡¿</li>
<li>å¼±ç½‘è¡Œä¸º</li>
<li>æ— ç¼“å­˜ç­–ç•¥å¯¼è‡´èµ„æºé‡å¤è¯·æ±‚</li>
</ul>
<p>éå¸¸é€‚åˆç”¨äºï¼š</p>
<ul>
<li>é¦–å±ä¼˜åŒ–</li>
<li>å†…å®¹æµåˆ—è¡¨åŠ è½½ä¼˜åŒ–</li>
<li>å›¾ç‰‡æ‡’åŠ è½½ç­–ç•¥è®¾è®¡</li>
</ul>
<hr/>
<h2 data-id="heading-24">ä¸ƒã€MetricKitï¼šiOS å®˜æ–¹çš„â€œç³»ç»Ÿçº§â€æ€§èƒ½æ•°æ®æ¥æº</h2>
<p>MetricKit æä¾›éå¸¸å…³é”®çš„æ€§èƒ½æŒ‡æ ‡ï¼š</p>
<ul>
<li>é¡µé¢å¯åŠ¨æ—¶é—´</li>
<li>å†…å­˜å³°å€¼</li>
<li>jetsamï¼ˆOOMï¼‰ç±»å‹</li>
<li>CPU æ—¶é—´å ç”¨</li>
<li>ç£ç›˜ I/O</li>
<li>hang diagnosticsï¼ˆå¡é¡¿è¯Šæ–­ï¼‰</li>
<li>æ¸©åº¦é™åˆ¶</li>
</ul>
<p>å®ƒèƒ½è®©å›¢é˜ŸçŸ¥é“ï¼š</p>
<ul>
<li>æ€§èƒ½é—®é¢˜æ˜¯å¦åªåœ¨æŸäº›æœºå‹ä¸Šå‡ºç°</li>
<li>å“ªäº›ç‰ˆæœ¬æ€§èƒ½é€€åŒ–</li>
<li>å“ªäº›åœºæ™¯å¯¼è‡´è¿‡å¤šç³»ç»Ÿèµ„æºå ç”¨</li>
</ul>
<p>é€‚ç”¨äºçº¿ä¸Šæ€§èƒ½ç›‘æ§ã€‚</p>
<hr/>
<h2 data-id="heading-25">å…«ã€Crashlyticsï¼šçº¿ä¸Šæ€§èƒ½å¼‚å¸¸ä¸å¡é¡¿æ—¥å¿—çš„é‡è¦è¡¥å……</h2>
<p>Crashlytics æä¾›ï¼š</p>
<ul>
<li>å´©æºƒå †æ ˆ</li>
<li>å¡é¡¿ã€ä¸»çº¿ç¨‹é˜»å¡è¶‹åŠ¿</li>
<li>ç”¨æˆ·è¡Œä¸ºè·¯å¾„</li>
<li>çº¿ç¨‹ trace</li>
</ul>
<p>å°¤å…¶é€‚åˆå®šä½â€œçº¿ä¸ŠçœŸå®åœºæ™¯æ€§èƒ½å¼‚å¸¸â€ã€‚</p>
<hr/>
<h2 data-id="heading-26">ä¹ã€æ€§èƒ½ä¼˜åŒ–çš„æ ‡å‡†å·¥å…·ååŒä½“ç³»</h2>













































<table><thead><tr><th>æ€§èƒ½ç±»å‹</th><th>å·¥å…·ç»„åˆ</th><th>è§£å†³é—®é¢˜</th></tr></thead><tbody><tr><td>CPU ä¼˜åŒ–</td><td>Instruments + KeyMob</td><td>ä¸»çº¿ç¨‹é˜»å¡ã€é‡åº¦è®¡ç®—</td></tr><tr><td>GPU ä¼˜åŒ–</td><td>Instrumentsï¼ˆCore Animationï¼‰+ PerfDog</td><td>æ¸²æŸ“å‹åŠ›ã€åŠ¨ç”»æ‰å¸§</td></tr><tr><td>å†…å­˜ä¼˜åŒ–</td><td>Instrumentsï¼ˆLeaks/Allocationsï¼‰+ KeyMob</td><td>æ³„æ¼ã€å†…å­˜è†¨èƒ€ã€OOM</td></tr><tr><td>ç½‘ç»œä¼˜åŒ–</td><td>Charles + Safari Inspector</td><td>é¦–å±æ…¢ã€æ¥å£æ…¢ã€å¤§å›¾é—®é¢˜</td></tr><tr><td>Hybrid ä¼˜åŒ–</td><td>Safari Inspector + KeyMob</td><td>DOM/JS æ€§èƒ½ã€WebView å´©æºƒ</td></tr><tr><td>çœŸæœºå›å½’æµ‹è¯•</td><td>KeyMob + PerfDog</td><td>é•¿æ—¶é—´æ€§èƒ½è¡¨ç°</td></tr><tr><td>ä¸Šçº¿æ€§èƒ½ &amp; ç¨³å®šæ€§</td><td>MetricKit + Crashlytics</td><td>å¯åŠ¨æ…¢ã€OOMã€å¡é¡¿</td></tr></tbody></table>
<p>è¿™æ˜¯è¦†ç›– iOS æ€§èƒ½ä¼˜åŒ–å¸¸è§é—®é¢˜çš„å®Œæ•´å·¥å…·çŸ©é˜µã€‚</p>
<hr/>
<h2 data-id="heading-27">iOS æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€å¥—ç³»ç»Ÿæ€§çš„å·¥ç¨‹</h2>
<p>çœŸæ­£æˆç†Ÿçš„ iOS æ€§èƒ½ä¼˜åŒ–ä½“ç³»å¿…é¡»å»ºç«‹åœ¨ï¼š</p>
<p><strong>æ•°æ®å¯è§‚æµ‹ â†’ é—®é¢˜å¯å®šä½ â†’ ä¼˜åŒ–å¯éªŒè¯ â†’ ä¸Šçº¿å¯å›å½’</strong></p>
<p>è¿™ä¾èµ–äºä»¥ä¸‹å·¥å…·åä½œï¼š</p>
<ul>
<li><strong>Instruments</strong>ï¼ˆåº•å±‚åˆ†æï¼‰</li>
<li><strong>KeyMob</strong>ï¼ˆçœŸæœºç›‘æ§ + ç³»ç»Ÿæ—¥å¿—ï¼‰</li>
<li><strong>PerfDog</strong>ï¼ˆFPS &amp; æ¸²æŸ“æ€§èƒ½ï¼‰</li>
<li><strong>Charles</strong>ï¼ˆç½‘ç»œï¼‰</li>
<li><strong>Safari Inspector</strong>ï¼ˆHybridï¼‰</li>
<li><strong>MetricKit + Crashlytics</strong>ï¼ˆçº¿ä¸Šæ€§èƒ½è¶‹åŠ¿ï¼‰</li>
</ul>
<p>å½“è¿™äº›å·¥å…·ååŒå·¥ä½œï¼Œä½ çš„æ€§èƒ½ä¼˜åŒ–å°†å˜å¾—å¯æ§ã€å¯ç»´æŠ¤ã€å¯å¤ç°ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼]]></title>    <link>https://juejin.cn/post/7578667193320767551</link>    <guid>https://juejin.cn/post/7578667193320767551</guid>    <pubDate>2025-12-01T09:08:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578667193320767551" data-draft-id="7577171133432479785" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-12-01T09:08:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ‹‰ä¸åŠ¨çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/1429793504759630"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ¤æ–­domå…ƒç´ æ˜¯å¦åœ¨å¯è§†åŒºåŸŸçš„å¸¸è§„æ–¹å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1429793504759630/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ‹‰ä¸åŠ¨çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:08:45.000Z" title="Mon Dec 01 2025 09:08:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">1. Intersection Observer APIï¼ˆæ¨èï¼‰</h2>
<p>è¿™æ˜¯ç°ä»£æµè§ˆå™¨æ¨èçš„æ–¹æ³•ï¼Œæ€§èƒ½æœ€å¥½ï¼Œå¼‚æ­¥æ‰§è¡Œï¼Œä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</p>
<h3 data-id="heading-1">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ›å»ºè§‚å¯Ÿå™¨</span>
<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">isIntersecting</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ è¿›å…¥å¯è§†åŒºåŸŸ'</span>, entry.<span class="hljs-property">target</span>);
      <span class="hljs-comment">// å¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œæ‡’åŠ è½½ç­‰æ“ä½œ</span>
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'visible'</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ ç¦»å¼€å¯è§†åŒºåŸŸ'</span>, entry.<span class="hljs-property">target</span>);
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">remove</span>(<span class="hljs-string">'visible'</span>);
    }
  });
});

<span class="hljs-comment">// è§‚å¯Ÿå…ƒç´ </span>
<span class="hljs-keyword">const</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelectorAll</span>(<span class="hljs-string">'.watch-element'</span>);
elements.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> observer.<span class="hljs-title function_">observe</span>(el));
</code></pre>
<h3 data-id="heading-2">é«˜çº§é…ç½®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> options = {
  <span class="hljs-comment">// root: æŒ‡å®šæ ¹å…ƒç´ ï¼Œé»˜è®¤ä¸ºæµè§ˆå™¨è§†çª—</span>
  <span class="hljs-attr">root</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// æˆ–è€…æŒ‡å®šç‰¹å®šå…ƒç´ ï¼Œå¦‚ document.querySelector('.container')</span>
  
  <span class="hljs-comment">// rootMargin: æ ¹çš„å¤–è¾¹è·ï¼Œå¯ä»¥æ‰©å¤§æˆ–ç¼©å°æ ¹çš„è¾¹ç•Œæ¡†</span>
  <span class="hljs-attr">rootMargin</span>: <span class="hljs-string">'10px 0px -100px 0px'</span>, <span class="hljs-comment">// ä¸Šå³ä¸‹å·¦ï¼Œç±»ä¼¼CSS margin</span>
  
  <span class="hljs-comment">// threshold: è§¦å‘å›è°ƒçš„å¯è§æ¯”ä¾‹</span>
  <span class="hljs-attr">threshold</span>: [<span class="hljs-number">0</span>, <span class="hljs-number">0.25</span>, <span class="hljs-number">0.5</span>, <span class="hljs-number">0.75</span>, <span class="hljs-number">1</span>] <span class="hljs-comment">// åœ¨0%, 25%, 50%, 75%, 100%å¯è§æ—¶è§¦å‘</span>
};

<span class="hljs-keyword">const</span> observer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
  entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> visiblePercentage = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">round</span>(entry.<span class="hljs-property">intersectionRatio</span> * <span class="hljs-number">100</span>);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å…ƒç´ å¯è§ <span class="hljs-subst">${visiblePercentage}</span>%`</span>);
    
    <span class="hljs-comment">// æ ¹æ®å¯è§æ¯”ä¾‹æ‰§è¡Œä¸åŒæ“ä½œ</span>
    <span class="hljs-keyword">if</span> (entry.<span class="hljs-property">intersectionRatio</span> &gt; <span class="hljs-number">0.5</span>) {
      <span class="hljs-comment">// è¶…è¿‡50%å¯è§</span>
      entry.<span class="hljs-property">target</span>.<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'mostly-visible'</span>);
    }
  });
}, options);
</code></pre>
<h3 data-id="heading-3">å®ç”¨å·¥å…·å‡½æ•°</h3>
<pre><code class="hljs language-ini" lang="ini">// å°è£…çš„å·¥å…·å‡½æ•°
function createVisibilityObserver(<span class="hljs-attr">options</span> = {}) {
  const <span class="hljs-attr">defaultOptions</span> = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  }<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">finalOptions</span> = { ...defaultOptions, ...options }<span class="hljs-comment">;</span>
  
  return new IntersectionObserver((entries) =&gt; {
    entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
      const <span class="hljs-attr">element</span> = entry.target<span class="hljs-comment">;</span>
      const <span class="hljs-attr">isVisible</span> = entry.isIntersecting<span class="hljs-comment">;</span>
      
      // è§¦å‘è‡ªå®šä¹‰äº‹ä»¶
      element.dispatchEvent(new CustomEvent('visibilityChange', {
        detail: { isVisible, entry }
      }))<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
  }, finalOptions)<span class="hljs-comment">;</span>
}

// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">observer</span> = createVisibilityObserver({ threshold: <span class="hljs-number">0.5</span> })<span class="hljs-comment">;</span>

document.querySelectorAll('.lazy-load').forEach(<span class="hljs-attr">element</span> =&gt; {
  observer.observe(element)<span class="hljs-comment">;</span>
  
  element.addEventListener('visibilityChange', (e) =&gt; {
    if (e.detail.isVisible) {
      // æ‰§è¡Œæ‡’åŠ è½½
      const <span class="hljs-attr">img</span> = element.querySelector(<span class="hljs-string">'img[data-src]'</span>)<span class="hljs-comment">;</span>
      if (img) {
        <span class="hljs-attr">img.src</span> = img.dataset.src<span class="hljs-comment">;</span>
        img.removeAttribute('data-src')<span class="hljs-comment">;</span>
      }
    }
  })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-4">2. getBoundingClientRect() æ–¹æ³•</h2>
<p>ä¼ ç»Ÿæ–¹æ³•ï¼ŒåŒæ­¥æ‰§è¡Œï¼Œéœ€è¦æ‰‹åŠ¨è°ƒç”¨ã€‚</p>
<h3 data-id="heading-5">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isInViewport</span>(<span class="hljs-params">element</span>) {
  <span class="hljs-keyword">const</span> rect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> windowHeight = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientHeight</span>;
  <span class="hljs-keyword">const</span> windowWidth = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>.<span class="hljs-property">clientWidth</span>;
  
  <span class="hljs-keyword">return</span> (
    rect.<span class="hljs-property">top</span> &gt;= <span class="hljs-number">0</span> &amp;&amp;
    rect.<span class="hljs-property">left</span> &gt;= <span class="hljs-number">0</span> &amp;&amp;
    rect.<span class="hljs-property">bottom</span> &lt;= windowHeight &amp;&amp;
    rect.<span class="hljs-property">right</span> &lt;= windowWidth
  );
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.target'</span>);
<span class="hljs-keyword">if</span> (<span class="hljs-title function_">isInViewport</span>(element)) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å…ƒç´ å®Œå…¨åœ¨è§†çª—å†…'</span>);
}
</code></pre>
<h3 data-id="heading-6">éƒ¨åˆ†å¯è§åˆ¤æ–­</h3>
<pre><code class="hljs language-ini" lang="ini">function isPartiallyInViewport(element) {
  const <span class="hljs-attr">rect</span> = element.getBoundingClientRect()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowHeight</span> = window.innerHeight || document.documentElement.clientHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowWidth</span> = window.innerWidth || document.documentElement.clientWidth<span class="hljs-comment">;</span>
  
  return (
    rect.bottom &gt; 0 &amp;&amp;
    rect.top &lt; windowHeight &amp;&amp;
    rect.right &gt; 0 &amp;&amp;
    rect.left &lt; windowWidth
  )<span class="hljs-comment">;</span>
}

// æ›´è¯¦ç»†çš„å¯è§æ€§ä¿¡æ¯
function getVisibilityInfo(element) {
  const <span class="hljs-attr">rect</span> = element.getBoundingClientRect()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowHeight</span> = window.innerHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">windowWidth</span> = window.innerWidth<span class="hljs-comment">;</span>
  
  // è®¡ç®—å¯è§åŒºåŸŸ
  const <span class="hljs-attr">visibleTop</span> = Math.max(<span class="hljs-number">0</span>, rect.top)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleLeft</span> = Math.max(<span class="hljs-number">0</span>, rect.left)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleBottom</span> = Math.min(windowHeight, rect.bottom)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleRight</span> = Math.min(windowWidth, rect.right)<span class="hljs-comment">;</span>
  
  const <span class="hljs-attr">visibleWidth</span> = Math.max(<span class="hljs-number">0</span>, visibleRight - visibleLeft)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleHeight</span> = Math.max(<span class="hljs-number">0</span>, visibleBottom - visibleTop)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">visibleArea</span> = visibleWidth * visibleHeight<span class="hljs-comment">;</span>
  const <span class="hljs-attr">totalArea</span> = rect.width * rect.height<span class="hljs-comment">;</span>
  
  return {
    isVisible: visibleArea &gt; 0,
    isFullyVisible: isInViewport(element),
    visibilityRatio: totalArea &gt; 0 ? visibleArea / totalArea : 0,
    rect: rect,
    visibleArea: { width: visibleWidth, height: visibleHeight }
  }<span class="hljs-comment">;</span>
}

// ä½¿ç”¨ç¤ºä¾‹
const <span class="hljs-attr">element</span> = document.querySelector(<span class="hljs-string">'.target'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
console.log(`å¯è§æ¯”ä¾‹: ${(info.visibilityRatio * 100).toFixed(2)}%`)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-7">æ»šåŠ¨ç›‘å¬ç‰ˆæœ¬</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScrollVisibilityTracker</span> {
  <span class="hljs-keyword">constructor</span>(options = {}) {
    <span class="hljs-keyword">this</span>.elements = new Map();
    <span class="hljs-keyword">this</span>.threshold = options.threshold || <span class="hljs-number">0.1</span>;
    <span class="hljs-keyword">this</span>.throttleDelay = options.throttleDelay || <span class="hljs-number">100</span>;
    
    <span class="hljs-keyword">this</span>.checkVisibility = <span class="hljs-keyword">this</span>.throttle(<span class="hljs-keyword">this</span>.checkVisibility.bind(<span class="hljs-keyword">this</span>), <span class="hljs-keyword">this</span>.throttleDelay);
    <span class="hljs-keyword">this</span>.bindEvents();
  }
  
  observe(element, callback) {
    <span class="hljs-keyword">this</span>.elements.<span class="hljs-keyword">set</span>(element, {
      callback,
      wasVisible: <span class="hljs-literal">false</span>
    });
    
    <span class="hljs-comment">// åˆå§‹æ£€æŸ¥</span>
    <span class="hljs-keyword">this</span>.checkElement(element);
  }
  
  unobserve(element) {
    <span class="hljs-keyword">this</span>.elements.delete(element);
  }
  
  checkVisibility() {
    <span class="hljs-keyword">this</span>.elements.forEach((<span class="hljs-keyword">data</span>, element) =&gt; {
      <span class="hljs-keyword">this</span>.checkElement(element);
    });
  }
  
  checkElement(element) {
    <span class="hljs-keyword">const</span> <span class="hljs-keyword">data</span> = <span class="hljs-keyword">this</span>.elements.<span class="hljs-keyword">get</span>(element);
    <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">data</span>) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">const</span> info = getVisibilityInfo(element);
    <span class="hljs-keyword">const</span> isVisible = info.visibilityRatio &gt;= <span class="hljs-keyword">this</span>.threshold;
    
    <span class="hljs-keyword">if</span> (isVisible !== <span class="hljs-keyword">data</span>.wasVisible) {
      <span class="hljs-keyword">data</span>.wasVisible = isVisible;
      <span class="hljs-keyword">data</span>.callback(isVisible, info);
    }
  }
  
  bindEvents() {
    window.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.checkVisibility, { passive: <span class="hljs-literal">true</span> });
    window.addEventListener(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
  }
  
  destroy() {
    window.removeEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
    window.removeEventListener(<span class="hljs-string">'resize'</span>, <span class="hljs-keyword">this</span>.checkVisibility);
    <span class="hljs-keyword">this</span>.elements.clear();
  }
  
  throttle(func, delay) {
    let timeoutId;
    let lastExecTime = <span class="hljs-number">0</span>;
    
    <span class="hljs-keyword">return</span> function (...args) {
      <span class="hljs-keyword">const</span> currentTime = Date.now();
      
      <span class="hljs-keyword">if</span> (currentTime - lastExecTime &gt; delay) {
        func.apply(<span class="hljs-keyword">this</span>, args);
        lastExecTime = currentTime;
      } <span class="hljs-keyword">else</span> {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() =&gt; {
          func.apply(<span class="hljs-keyword">this</span>, args);
          lastExecTime = Date.now();
        }, delay - (currentTime - lastExecTime));
      }
    };
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> tracker = new ScrollVisibilityTracker({ threshold: <span class="hljs-number">0.5</span> });

document.querySelectorAll(<span class="hljs-string">'.track-element'</span>).forEach(element =&gt; {
  tracker.observe(element, (isVisible, info) =&gt; {
    <span class="hljs-keyword">if</span> (isVisible) {
      element.classList.add(<span class="hljs-string">'in-view'</span>);
      console.log(<span class="hljs-string">'å…ƒç´ è¿›å…¥è§†çª—'</span>, info);
    } <span class="hljs-keyword">else</span> {
      element.classList.remove(<span class="hljs-string">'in-view'</span>);
    }
  });
});
</code></pre>
<h2 data-id="heading-8">3. ç‰¹æ®Šåœºæ™¯çš„è§£å†³æ–¹æ¡ˆ</h2>
<h3 data-id="heading-9">åœ¨æ»šåŠ¨å®¹å™¨ä¸­çš„å…ƒç´ </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isInScrollContainer</span>(<span class="hljs-params">element, container</span>) {
  <span class="hljs-keyword">const</span> elementRect = element.<span class="hljs-title function_">getBoundingClientRect</span>();
  <span class="hljs-keyword">const</span> containerRect = container.<span class="hljs-title function_">getBoundingClientRect</span>();
  
  <span class="hljs-keyword">return</span> (
    elementRect.<span class="hljs-property">top</span> &gt;= containerRect.<span class="hljs-property">top</span> &amp;&amp;
    elementRect.<span class="hljs-property">left</span> &gt;= containerRect.<span class="hljs-property">left</span> &amp;&amp;
    elementRect.<span class="hljs-property">bottom</span> &lt;= containerRect.<span class="hljs-property">bottom</span> &amp;&amp;
    elementRect.<span class="hljs-property">right</span> &lt;= containerRect.<span class="hljs-property">right</span>
  );
}

<span class="hljs-comment">// ä½¿ç”¨Intersection Observerè§‚å¯Ÿæ»šåŠ¨å®¹å™¨</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createContainerObserver</span>(<span class="hljs-params">container</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntersectionObserver</span>(<span class="hljs-function">(<span class="hljs-params">entries</span>) =&gt;</span> {
    entries.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">entry</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®¹å™¨å†…å…ƒç´ å¯è§æ€§å˜åŒ–'</span>, entry.<span class="hljs-property">isIntersecting</span>);
    });
  }, {
    <span class="hljs-attr">root</span>: container, <span class="hljs-comment">// æŒ‡å®šå®¹å™¨ä¸ºæ ¹å…ƒç´ </span>
    <span class="hljs-attr">threshold</span>: <span class="hljs-number">0.1</span>
  });
}
</code></pre>
<h3 data-id="heading-10">è€ƒè™‘CSS Transformçš„æƒ…å†µ</h3>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">function <span class="hljs-title">getTransformedBounds</span><span class="hljs-params">(element)</span> </span>{
  <span class="hljs-type">const</span> rect = element.<span class="hljs-built_in">getBoundingClientRect</span>();
  
  <span class="hljs-comment">// å¦‚æœå…ƒç´ æœ‰CSS transformï¼ŒgetBoundingClientRectå·²ç»åŒ…å«äº†å˜æ¢åçš„ä½ç½®</span>
  <span class="hljs-comment">// ä¸éœ€è¦é¢å¤–è®¡ç®—</span>
  <span class="hljs-keyword">return</span> rect;
}

<span class="hljs-comment">// å¯¹äºå¤æ‚çš„3Då˜æ¢ï¼Œå¯èƒ½éœ€è¦æ›´ç²¾ç¡®çš„è®¡ç®—</span>
<span class="hljs-function">function <span class="hljs-title">isTransformedElementVisible</span><span class="hljs-params">(element)</span> </span>{
  <span class="hljs-type">const</span> rect = element.<span class="hljs-built_in">getBoundingClientRect</span>();
  
  <span class="hljs-comment">// æ£€æŸ¥å…ƒç´ æ˜¯å¦å› ä¸ºtransform: scale(0)ç­‰è€Œä¸å¯è§</span>
  <span class="hljs-type">const</span> computedStyle = <span class="hljs-built_in">getComputedStyle</span>(element);
  <span class="hljs-type">const</span> transform = computedStyle.transform;
  
  <span class="hljs-keyword">if</span> (transform === <span class="hljs-string">'none'</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">isPartiallyInViewport</span>(element);
  }
  
  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦æœ‰scale(0)æˆ–ç±»ä¼¼çš„å˜æ¢</span>
  <span class="hljs-keyword">if</span> (rect.width === <span class="hljs-number">0</span> || rect.height === <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }
  
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">isPartiallyInViewport</span>(element);
}
</code></pre>
<h2 data-id="heading-11">4. æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-12">è™šæ‹Ÿæ»šåŠ¨åœºæ™¯</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VirtualScrollObserver</span> {
  <span class="hljs-keyword">constructor</span>(container, options = {}) {
    <span class="hljs-keyword">this</span>.container = container;
    <span class="hljs-keyword">this</span>.itemHeight = options.itemHeight || <span class="hljs-number">100</span>;
    <span class="hljs-keyword">this</span>.buffer = options.buffer || <span class="hljs-number">5</span>; <span class="hljs-comment">// ç¼“å†²åŒºé¡¹ç›®æ•°é‡</span>
    <span class="hljs-keyword">this</span>.items = [];
    <span class="hljs-keyword">this</span>.visibleRange = { start: <span class="hljs-number">0</span>, end: <span class="hljs-number">0</span> };
    
    <span class="hljs-keyword">this</span>.handleScroll = <span class="hljs-keyword">this</span>.throttle(<span class="hljs-keyword">this</span>.calculateVisibleRange.bind(<span class="hljs-keyword">this</span>), <span class="hljs-number">16</span>);
    <span class="hljs-keyword">this</span>.container.addEventListener(<span class="hljs-string">'scroll'</span>, <span class="hljs-keyword">this</span>.handleScroll);
  }
  
  calculateVisibleRange() {
    <span class="hljs-keyword">const</span> scrollTop = <span class="hljs-keyword">this</span>.container.scrollTop;
    <span class="hljs-keyword">const</span> containerHeight = <span class="hljs-keyword">this</span>.container.clientHeight;
    
    <span class="hljs-keyword">const</span> start = Math.max(<span class="hljs-number">0</span>, Math.floor(scrollTop / <span class="hljs-keyword">this</span>.itemHeight) - <span class="hljs-keyword">this</span>.buffer);
    <span class="hljs-keyword">const</span> end = Math.min(
      <span class="hljs-keyword">this</span>.items.length - <span class="hljs-number">1</span>,
      Math.ceil((scrollTop + containerHeight) / <span class="hljs-keyword">this</span>.itemHeight) + <span class="hljs-keyword">this</span>.buffer
    );
    
    <span class="hljs-keyword">if</span> (start !== <span class="hljs-keyword">this</span>.visibleRange.start || end !== <span class="hljs-keyword">this</span>.visibleRange.end) {
      <span class="hljs-keyword">this</span>.visibleRange = { start, end };
      <span class="hljs-keyword">this</span>.onVisibleRangeChange(<span class="hljs-keyword">this</span>.visibleRange);
    }
  }
  
  onVisibleRangeChange(range) {
    <span class="hljs-comment">// å­ç±»å®ç°æˆ–é€šè¿‡å›è°ƒå¤„ç†</span>
    console.log(<span class="hljs-string">'å¯è§èŒƒå›´å˜åŒ–:'</span>, range);
  }
  
  throttle(func, delay) {
    let lastTime = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> function(...args) {
      <span class="hljs-keyword">const</span> now = Date.now();
      <span class="hljs-keyword">if</span> (now - lastTime &gt;= delay) {
        func.apply(<span class="hljs-keyword">this</span>, args);
        lastTime = now;
      }
    };
  }
}
</code></pre>
<h3 data-id="heading-13">æ‡’åŠ è½½å›¾ç‰‡å®Œæ•´å®ç°</h3>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyImageLoader</span> {
  <span class="hljs-keyword">constructor</span>(options = {}) {
    <span class="hljs-keyword">this</span>.options = {
      rootMargin: <span class="hljs-string">'50px'</span>,
      threshold: <span class="hljs-number">0.1</span>,
      loadingClass: <span class="hljs-string">'lazy-loading'</span>,
      loadedClass: <span class="hljs-string">'lazy-loaded'</span>,
      errorClass: <span class="hljs-string">'lazy-error'</span>,
      ...options
    };
    
    <span class="hljs-keyword">this</span>.observer = new IntersectionObserver(
      <span class="hljs-keyword">this</span>.handleIntersection.bind(<span class="hljs-keyword">this</span>),
      {
        rootMargin: <span class="hljs-keyword">this</span>.options.rootMargin,
        threshold: <span class="hljs-keyword">this</span>.options.threshold
      }
    );
    
    <span class="hljs-keyword">this</span>.loadingImages = new Set();
  }
  
  observe(img) {
    <span class="hljs-keyword">if</span> (!(img instanceof HTMLImageElement)) {
      console.warn(<span class="hljs-string">'LazyImageLoader: åªèƒ½è§‚å¯Ÿimgå…ƒç´ '</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">if</span> (!img.dataset.src &amp;&amp; !img.dataset.srcset) {
      console.warn(<span class="hljs-string">'LazyImageLoader: å›¾ç‰‡ç¼ºå°‘data-srcæˆ–data-srcsetå±æ€§'</span>);
      <span class="hljs-keyword">return</span>;
    }
    
    <span class="hljs-keyword">this</span>.observer.observe(img);
  }
  
  handleIntersection(entries) {
    entries.forEach(entry =&gt; {
      <span class="hljs-keyword">if</span> (entry.isIntersecting) {
        <span class="hljs-keyword">this</span>.loadImage(entry.target);
        <span class="hljs-keyword">this</span>.observer.unobserve(entry.target);
      }
    });
  }
  
  loadImage(img) {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.loadingImages.has(img)) <span class="hljs-keyword">return</span>;
    
    <span class="hljs-keyword">this</span>.loadingImages.add(img);
    img.classList.add(<span class="hljs-keyword">this</span>.options.loadingClass);
    
    <span class="hljs-keyword">const</span> tempImg = new Image();
    
    tempImg.onload = () =&gt; {
      <span class="hljs-keyword">this</span>.applyImage(img, tempImg);
      img.classList.remove(<span class="hljs-keyword">this</span>.options.loadingClass);
      img.classList.add(<span class="hljs-keyword">this</span>.options.loadedClass);
      <span class="hljs-keyword">this</span>.loadingImages.delete(img);
    };
    
    tempImg.onerror = () =&gt; {
      img.classList.remove(<span class="hljs-keyword">this</span>.options.loadingClass);
      img.classList.add(<span class="hljs-keyword">this</span>.options.errorClass);
      <span class="hljs-keyword">this</span>.loadingImages.delete(img);
    };
    
    <span class="hljs-comment">// æ”¯æŒsrcset</span>
    <span class="hljs-keyword">if</span> (img.dataset.srcset) {
      tempImg.srcset = img.dataset.srcset;
    }
    tempImg.src = img.dataset.src;
  }
  
  applyImage(img, tempImg) {
    <span class="hljs-keyword">if</span> (img.dataset.srcset) {
      img.srcset = img.dataset.srcset;
      delete img.dataset.srcset;
    }
    img.src = tempImg.src;
    delete img.dataset.src;
  }
  
  destroy() {
    <span class="hljs-keyword">this</span>.observer.disconnect();
    <span class="hljs-keyword">this</span>.loadingImages.clear();
  }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> lazyLoader = new LazyImageLoader({
  rootMargin: <span class="hljs-string">'100px'</span>,
  threshold: <span class="hljs-number">0.1</span>
});

document.querySelectorAll(<span class="hljs-string">'img[data-src]'</span>).forEach(img =&gt; {
  lazyLoader.observe(img);
});
</code></pre>
<h2 data-id="heading-14">5. å…¼å®¹æ€§å¤„ç†</h2>
<pre><code class="hljs language-ini" lang="ini">// Intersection Observer polyfillæ£€æŸ¥
function createCompatibleObserver(callback, options) {
  if ('IntersectionObserver' in window) {
    return new IntersectionObserver(callback, options)<span class="hljs-comment">;</span>
  } else {
    console.warn('IntersectionObserver not supported, falling back to scroll listener')<span class="hljs-comment">;</span>
    return createScrollBasedObserver(callback, options)<span class="hljs-comment">;</span>
  }
}

function createScrollBasedObserver(callback, <span class="hljs-attr">options</span> = {}) {
  const <span class="hljs-attr">elements</span> = new Set()<span class="hljs-comment">;</span>
  const <span class="hljs-attr">threshold</span> = options.threshold || <span class="hljs-number">0</span><span class="hljs-comment">;</span>
  
  function checkElements() {
    const <span class="hljs-attr">entries</span> = []<span class="hljs-comment">;</span>
    
    elements.forEach(<span class="hljs-attr">element</span> =&gt; {
      const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
      const <span class="hljs-attr">isIntersecting</span> = info.visibilityRatio &gt;= threshold<span class="hljs-comment">;</span>
      
      entries.push({
        target: element,
        isIntersecting,
        intersectionRatio: info.visibilityRatio,
        boundingClientRect: info.rect
      })<span class="hljs-comment">;</span>
    })<span class="hljs-comment">;</span>
    
    if (entries.length &gt; 0) {
      callback(entries)<span class="hljs-comment">;</span>
    }
  }
  
  const <span class="hljs-attr">throttledCheck</span> = throttle(checkElements, <span class="hljs-number">100</span>)<span class="hljs-comment">;</span>
  
  window.addEventListener('scroll', throttledCheck, { passive: true })<span class="hljs-comment">;</span>
  window.addEventListener('resize', throttledCheck)<span class="hljs-comment">;</span>
  
  return {
    observe(element) {
      elements.add(element)<span class="hljs-comment">;</span>
      // ç«‹å³æ£€æŸ¥ä¸€æ¬¡
      setTimeout(() =&gt; {
        const <span class="hljs-attr">info</span> = getVisibilityInfo(element)<span class="hljs-comment">;</span>
        const <span class="hljs-attr">isIntersecting</span> = info.visibilityRatio &gt;= threshold<span class="hljs-comment">;</span>
        callback(<span class="hljs-section">[{
          target: element,
          isIntersecting,
          intersectionRatio: info.visibilityRatio,
          boundingClientRect: info.rect
        }]</span>)<span class="hljs-comment">;</span>
      }, 0)<span class="hljs-comment">;</span>
    },
    
    unobserve(element) {
      elements.delete(element)<span class="hljs-comment">;</span>
    },
    
    disconnect() {
      window.removeEventListener('scroll', throttledCheck)<span class="hljs-comment">;</span>
      window.removeEventListener('resize', throttledCheck)<span class="hljs-comment">;</span>
      elements.clear()<span class="hljs-comment">;</span>
    }
  }<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-15">æ€»ç»“</h2>
<p>é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼š</p>
<ol>
<li><strong>Intersection Observer API</strong>Â - ç°ä»£æµè§ˆå™¨é¦–é€‰ï¼Œæ€§èƒ½æœ€ä½³</li>
<li><strong>getBoundingClientRect + æ»šåŠ¨ç›‘å¬</strong>Â - éœ€è¦å…¼å®¹è€æµè§ˆå™¨æ—¶ä½¿ç”¨</li>
<li><strong>è™šæ‹Ÿæ»šåŠ¨</strong>Â - å¤„ç†å¤§é‡å…ƒç´ æ—¶çš„ç‰¹æ®Šä¼˜åŒ–</li>
</ol>
<p>å…³é”®è€ƒè™‘å› ç´ ï¼š</p>
<ul>
<li><strong>æ€§èƒ½</strong>ï¼šIntersection Observer &gt; èŠ‚æµçš„æ»šåŠ¨ç›‘å¬ &gt; é¢‘ç¹çš„æ»šåŠ¨ç›‘å¬</li>
<li><strong>ç²¾ç¡®åº¦</strong>ï¼šgetBoundingClientRectæ›´ç²¾ç¡®ï¼Œä½†éœ€è¦æ‰‹åŠ¨è§¦å‘</li>
<li><strong>å…¼å®¹æ€§</strong>ï¼šgetBoundingClientRectæ”¯æŒæ›´è€çš„æµè§ˆå™¨</li>
<li><strong>åŠŸèƒ½éœ€æ±‚</strong>ï¼šæ˜¯å¦éœ€è¦éƒ¨åˆ†å¯è§ã€å¯è§æ¯”ä¾‹ç­‰è¯¦ç»†ä¿¡æ¯</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- çŸ¿ä¸šéŸ³é¢‘åˆ†ç±»]]></title>    <link>https://juejin.cn/post/7578699866181206054</link>    <guid>https://juejin.cn/post/7578699866181206054</guid>    <pubDate>2025-12-01T09:28:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578699866181206054" data-draft-id="7578709098255056934" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- çŸ¿ä¸šéŸ³é¢‘åˆ†ç±»"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-01T09:28:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- çŸ¿ä¸šéŸ³é¢‘åˆ†ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:28:14.000Z" title="Mon Dec 01 2025 09:28:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸¤ä¸ªæœˆå‰å…¬å¸æœ‰ä¸ªAIæ ‡æ³¨çš„è®­ç»ƒæ•°æ®éœ€æ±‚è°ƒç ”ï¼Œæ­£å·§æ¸…åæŸä¸ªå›¢é˜Ÿæœ‰æ­¤éœ€æ±‚ï¼Œäºæ˜¯è¿›è¡Œåˆä½œã€‚ä¸€å…±å¼€æºäº†ä¸‰ä¸ªæ¨¡å‹çš„åˆç‰ˆã€‚è®°å½•ä¸‹è‡ªå·±çš„å®ç°</p>
<p>å£°éŸ³æ ·æœ¬å¤šæ ‡ç­¾é¢„æµ‹ - çŸ¿å±±çŸ¿ä¸šåœºæ™¯: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSTARTORUS%2Ftok-label%2Fpull%2F4" target="_blank" title="https://github.com/STARTORUS/tok-label/pull/4" ref="nofollow noopener noreferrer">github.com/STARTORUS/tâ€¦</a></p>
<hr/>
<h2 data-id="heading-0">æ¦‚è¿°ï¼šè®©AIå¬æ‡‚æœºå™¨çš„"å¥åº·å¯†ç "</h2>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œåœ¨ä¸€ä¸ªåºå¤§çš„çŸ¿å±±ä½œä¸šç°åœºï¼Œå‡ åå°å¤§å‹è®¾å¤‡æ—¥å¤œè¿è½¬â€”â€”æŒ–æ˜æœºã€ä¼ é€å¸¦ã€æ¶²å‹ç³»ç»Ÿã€ç”µæœºâ€¦â€¦æ¯å°è®¾å¤‡éƒ½åœ¨"è¯´è¯"ï¼Œå‘å‡ºå„ç§å£°éŸ³ã€‚<strong>ç»éªŒä¸°å¯Œçš„è€å¸ˆå‚…èƒ½é€šè¿‡å¬å£°éŸ³åˆ¤æ–­è®¾å¤‡æ˜¯å¦æ­£å¸¸</strong>ï¼š"è¿™ä¸ªè½´æ‰¿å£°éŸ³ä¸å¯¹åŠ²ï¼Œå¯èƒ½è¦åäº†""è¿™ä¸ªç”µæœºè½¬é€Ÿä¸ç¨³"ã€‚</p>
<p><strong>çŸ¿ä¸šéŸ³é¢‘ML Backend</strong>å°±æ˜¯å°†è¿™ç§"å¬éŸ³è¾¨æœº"çš„ä¸“å®¶ç»éªŒ<strong>æ•°å­—åŒ–ã€æ™ºèƒ½åŒ–</strong>ï¼Œé€šè¿‡AIè‡ªåŠ¨è¯†åˆ«è®¾å¤‡éŸ³é¢‘ç‰¹å¾ï¼Œé¢„æµ‹è®¾å¤‡çŠ¶æ€ã€æ•…éšœç±»å‹å’Œç»´æŠ¤ä¼˜å…ˆçº§ï¼Œå®ç°<strong>é¢„æµ‹æ€§ç»´æŠ¤</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸šåŠ¡ä»·å€¼ï¼šWhy - ä¸ºä»€ä¹ˆçŸ¿ä¸šéœ€è¦éŸ³é¢‘æ™ºèƒ½è¯Šæ–­ï¼Ÿ</h2>
<h3 data-id="heading-2">1.1 è¡Œä¸šç—›ç‚¹</h3>
<p>åœ¨çŸ¿ä¸šç”Ÿäº§åœºæ™¯ä¸­ï¼Œè®¾å¤‡æ•…éšœä¼šå¸¦æ¥å·¨å¤§æŸå¤±ï¼š</p>
<p><strong>åœºæ™¯1ï¼šçªå‘æ•…éšœåœäº§</strong> âš ï¸<br/>
æŸé“çŸ¿ä¸»ä¼ é€å¸¦è½´æ‰¿çªç„¶æŸåï¼š</p>
<ul>
<li>ç”Ÿäº§çº¿åœå·¥12å°æ—¶</li>
<li>ç›´æ¥ç»æµæŸå¤±è¶…è¿‡500ä¸‡å…ƒ</li>
<li>æŠ¢ä¿®æˆæœ¬æ˜¯è®¡åˆ’ç»´æŠ¤çš„3-5å€</li>
<li><strong>å¦‚æœèƒ½æå‰3å¤©é¢„è­¦ï¼Œå¯é¿å…90%æŸå¤±</strong></li>
</ul>
<p><strong>åœºæ™¯2ï¼šè¿‡åº¦ç»´æŠ¤æµªè´¹</strong> ğŸ’¸<br/>
é‡‡ç”¨å®šæœŸç»´æŠ¤ç­–ç•¥ï¼š</p>
<ul>
<li>æŒ‰å›ºå®šå‘¨æœŸæ›´æ¢é›¶ä»¶ï¼ˆå¦‚æ¯3ä¸ªæœˆï¼‰</li>
<li>å¾ˆå¤šé›¶ä»¶è¿˜èƒ½ç»§ç»­ä½¿ç”¨å°±è¢«æ›´æ¢</li>
<li>ç»´æŠ¤æˆæœ¬é«˜æ˜‚ï¼Œèµ„æºæµªè´¹ä¸¥é‡</li>
<li><strong>çœŸæ­£éœ€è¦ç»´æŠ¤çš„è®¾å¤‡å´å¯èƒ½è¢«å¿½ç•¥</strong></li>
</ul>
<p><strong>åœºæ™¯3ï¼šäººå·¥å·¡æ£€æ•ˆç‡ä½</strong> ğŸš¶<br/>
ä¼ ç»Ÿå·¡æ£€æ–¹å¼ï¼š</p>
<ul>
<li>å·¥äººæ¯å¤©å·¡æ£€ä¸Šç™¾å°è®¾å¤‡</li>
<li>åªèƒ½æ£€æŸ¥å¤–è§‚å’Œç®€å•è¯»æ•°</li>
<li>æ— æ³•24å°æ—¶ç›‘æ§</li>
<li>ä¾èµ–ä¸ªäººç»éªŒï¼Œç¼ºä¹æ ‡å‡†åŒ–</li>
</ul>
<h3 data-id="heading-3">1.2 ML Backendçš„ä»·å€¼</h3>
<p>çŸ¿ä¸šéŸ³é¢‘ML Backendé€šè¿‡<strong>å£°éŸ³æŒ‡çº¹è¯†åˆ«</strong>ï¼Œå®ç°ï¼š</p>
<p><strong>é¢„æµ‹æ€§ç»´æŠ¤</strong>ï¼šæå‰3-7å¤©é¢„è­¦æ•…éšœï¼Œé¿å…çªå‘åœäº§<br/>
<strong>é™ä½æˆæœ¬30%</strong>ï¼šä»å®šæœŸç»´æŠ¤è½¬å‘æŒ‰éœ€ç»´æŠ¤<br/>
<strong>24å°æ—¶ç›‘æ§</strong>ï¼šAIä¸çŸ¥ç–²å€¦ï¼Œå®æ—¶ç›‘æµ‹æ‰€æœ‰è®¾å¤‡<br/>
<strong>æ ‡å‡†åŒ–è¯Šæ–­</strong>ï¼šå°†ä¸“å®¶ç»éªŒå›ºåŒ–ä¸ºç®—æ³•ï¼Œå‡å°‘äººä¸ºè¯¯åˆ¤</p>
<p><strong>ROIè®¡ç®—ç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li>æŠ•å…¥ï¼šéƒ¨ç½²ML Backendç³»ç»Ÿ 50ä¸‡å…ƒ</li>
<li>æ”¶ç›Šï¼šå¹´é¿å…æ•…éšœæŸå¤± 200ä¸‡ + é™ä½ç»´æŠ¤æˆæœ¬ 80ä¸‡ = 280ä¸‡</li>
<li><strong>æŠ•èµ„å›æŠ¥å‘¨æœŸï¼š2-3ä¸ªæœˆ</strong></li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€ç³»ç»Ÿæ¶æ„ï¼šWhat - çŸ¿ä¸šéŸ³é¢‘ML Backendæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<h3 data-id="heading-5">2.1 æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "æ•°æ®é‡‡é›†å±‚"
        A1[éŸ³é¢‘é‡‡é›†è®¾å¤‡] --&gt; A2[MinIOå¯¹è±¡å­˜å‚¨]
        A3[ä¼ æ„Ÿå™¨æ•°æ®] --&gt; A2
    end
    
    subgraph "Label Studioå‰ç«¯"
        B1[æ ‡æ³¨ç•Œé¢] --&gt; B2[ä»»åŠ¡ç®¡ç†]
    end
    
    subgraph "ML Backendæ ¸å¿ƒå±‚"
        C1[_wsgi.pyæœåŠ¡å…¥å£] --&gt; C2[MiningAudioMLBackend&lt;br/&gt;ä¸šåŠ¡ç¼–æ’]
        C2 --&gt; C3[AudioFeatureExtractor&lt;br/&gt;ç‰¹å¾æå–]
        C2 --&gt; C4[MiningAudioClassifier&lt;br/&gt;ç¥ç»ç½‘ç»œæ¨¡å‹]
        C2 --&gt; C5[MinIODownloader&lt;br/&gt;æ•°æ®ä¸‹è½½]
    end
    
    subgraph "AIå¼•æ“å±‚"
        D1[LibrosaéŸ³é¢‘å¤„ç†]
        D2[PyTorchæ·±åº¦å­¦ä¹ ]
        D3[æ ‡å‡†åŒ–å™¨StandardScaler]
    end
    
    subgraph "æ¨¡å‹å­˜å‚¨"
        E1[(é¢„è®­ç»ƒæ¨¡å‹.pth)]
        E2[(ç‰¹å¾æ ‡å‡†åŒ–å™¨.pkl)]
    end
    
    A2 --&gt;|S3 API| C5
    B2 --&gt;|HTTP API| C1
    C3 --&gt; D1
    C4 --&gt; D2
    C4 --&gt; D3
    C4 -.åŠ è½½.-&gt; E1
    C3 -.åŠ è½½.-&gt; E2
    
    style C2 fill:#4CAF50,color:#fff
    style C4 fill:#FF5722,color:#fff
    style D2 fill:#2196F3,color:#fff
</code></pre>
<h3 data-id="heading-6">2.2 æ ¸å¿ƒç»„ä»¶å‰–æ</h3>
<h4 data-id="heading-7">ğŸ¯ <strong>MiningAudioMLBackend</strong> - ä¸šåŠ¡ç¼–æ’ä¸­å¿ƒ</h4>
<p>è¿™æ˜¯æ•´ä¸ªç³»ç»Ÿçš„**"å¤§è„‘"**ï¼Œåè°ƒå„ä¸ªæ¨¡å—å®ŒæˆéŸ³é¢‘è¯Šæ–­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MiningAudioMLBackend</span>(<span class="hljs-title class_ inherited__">LabelStudioMLBase</span>):
    <span class="hljs-string">"""çŸ¿ä¸šéŸ³é¢‘å¤šæ ‡ç­¾åˆ†ç±»MLåç«¯"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># åˆå§‹åŒ–ç‰¹å¾æå–å™¨</span>
        self.feature_extractor = AudioFeatureExtractor()
        
        <span class="hljs-comment"># åŠ è½½æ·±åº¦å­¦ä¹ æ¨¡å‹</span>
        self.model = MiningAudioClassifier(input_dim=<span class="hljs-number">72</span>)
        
        <span class="hljs-comment"># åˆå§‹åŒ–MinIOä¸‹è½½å™¨(å¯¹æ¥å¯¹è±¡å­˜å‚¨)</span>
        self.minio_downloader = MinIODownloader(...)
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æ‡’åŠ è½½æœºåˆ¶</strong>ï¼šåªåœ¨ç¬¬ä¸€æ¬¡é¢„æµ‹æ—¶åˆå§‹åŒ–ï¼ŒåŠ å¿«å¯åŠ¨é€Ÿåº¦</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šè®°å½•è®­ç»ƒæ¬¡æ•°ã€æ¨¡å‹ç‰ˆæœ¬ç­‰å…ƒä¿¡æ¯</li>
<li><strong>å¼‚å¸¸éš”ç¦»</strong>ï¼šé¢„æµ‹å¤±è´¥ä¸å½±å“å…¶ä»–ä»»åŠ¡</li>
</ul>
<h4 data-id="heading-8">ğŸ”¬ <strong>AudioFeatureExtractor</strong> - éŸ³é¢‘ç‰¹å¾å·¥ç¨‹ä¸“å®¶</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„**"è€³æœµ"**ï¼Œå°†éŸ³é¢‘ä¿¡å·è½¬æ¢ä¸ºæœºå™¨å¯ç†è§£çš„ç‰¹å¾å‘é‡ï¼š</p>
<p><strong>ç‰¹å¾æå–æµç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[åŸå§‹éŸ³é¢‘&lt;br/&gt;é‡‡æ ·ç‡25kHz] --&gt; B[æ—¶åŸŸç‰¹å¾&lt;br/&gt;ZCR/RMS]
    A --&gt; C[é¢‘åŸŸç‰¹å¾&lt;br/&gt;MFCC/é¢‘è°±]
    
    B --&gt; D[ç»Ÿè®¡é‡&lt;br/&gt;å‡å€¼/æ ‡å‡†å·®/æœ€å€¼]
    C --&gt; D
    
    D --&gt; E[72ç»´ç‰¹å¾å‘é‡]
    
    style A fill:#FFC107
    style E fill:#4CAF50,color:#fff
</code></pre>
<p><strong>è¯¦ç»†ç‰¹å¾è¯´æ˜</strong>ï¼š</p>















































<table><thead><tr><th>ç‰¹å¾ç±»åˆ«</th><th>ç‰¹å¾åç§°</th><th>ç‰©ç†æ„ä¹‰</th><th>æ•…éšœè¯Šæ–­ä»·å€¼</th></tr></thead><tbody><tr><td><strong>æ—¶åŸŸ</strong></td><td>è¿‡é›¶ç‡(ZCR)</td><td>ä¿¡å·æ­£è´Ÿäº¤æ›¿é¢‘ç‡</td><td>æ£€æµ‹æ—‹è½¬è®¾å¤‡è½¬é€Ÿå¼‚å¸¸</td></tr><tr><td>æ—¶åŸŸ</td><td>èƒ½é‡(RMS)</td><td>ä¿¡å·å¹…å€¼å¼ºåº¦</td><td>è¯†åˆ«æŒ¯åŠ¨å¼ºåº¦å˜åŒ–</td></tr><tr><td><strong>é¢‘åŸŸ</strong></td><td>MFCC(13ç»´)</td><td>é¢‘è°±åŒ…ç»œç‰¹å¾</td><td>æ¨¡æ‹Ÿäººè€³å¬è§‰,è¯†åˆ«å£°çº¹</td></tr><tr><td>é¢‘åŸŸ</td><td>é¢‘è°±è´¨å¿ƒ</td><td>é¢‘ç‡åˆ†å¸ƒä¸­å¿ƒ</td><td>æ£€æµ‹é¢‘ç‡åç§»(å¦‚è½´æ‰¿ç£¨æŸ)</td></tr><tr><td>é¢‘åŸŸ</td><td>é¢‘è°±æ»šé™</td><td>é«˜é¢‘èƒ½é‡å æ¯”</td><td>è¯†åˆ«å†²å‡»æ€§æ•…éšœ</td></tr><tr><td>é¢‘åŸŸ</td><td>é¢‘è°±å¸¦å®½</td><td>é¢‘ç‡åˆ†å¸ƒèŒƒå›´</td><td>åˆ¤æ–­é¢‘è°±å¤æ‚åº¦</td></tr></tbody></table>
<p><strong>ç‰¹å¾ç»´åº¦è®¡ç®—</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">åŸºç¡€ç‰¹å¾ = <span class="hljs-number">13</span>(MFCC) + <span class="hljs-number">1</span>(ZCR) + <span class="hljs-number">1</span>(RMS) + <span class="hljs-number">1</span>(è´¨å¿ƒ) + <span class="hljs-number">1</span>(æ»šé™) + <span class="hljs-number">1</span>(å¸¦å®½) = <span class="hljs-number">18</span>
ç»Ÿè®¡é‡ = <span class="hljs-number">4</span>ç§ (å‡å€¼ã€æ ‡å‡†å·®ã€æœ€å¤§å€¼ã€æœ€å°å€¼)
æ€»ç»´åº¦ = <span class="hljs-number">18</span> Ã— <span class="hljs-number">4</span> = <span class="hljs-number">72</span>ç»´
</code></pre>
<p><strong>ä»£ç å®ç°æ ¸å¿ƒ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_features</span>(<span class="hljs-params">self, audio_path</span>):
    <span class="hljs-comment"># 1. åŠ è½½éŸ³é¢‘(ä½¿ç”¨librosaç»Ÿä¸€æ¥å£)</span>
    y, sr = librosa.load(audio_path, sr=self.sample_rate)
    
    <span class="hljs-comment"># 2. æ—¶åŸŸç‰¹å¾</span>
    zcr = librosa.feature.zero_crossing_rate(y, hop_length=<span class="hljs-number">512</span>)
    energy = librosa.feature.rms(y=y, hop_length=<span class="hljs-number">512</span>)
    
    <span class="hljs-comment"># 3. é¢‘åŸŸç‰¹å¾</span>
    mfccs = librosa.feature.mfcc(y=y, sr=sr, n_mfcc=<span class="hljs-number">13</span>)
    spectral_centroid = librosa.feature.spectral_centroid(y=y, sr=sr)
    
    <span class="hljs-comment"># 4. åˆå¹¶ç‰¹å¾çŸ©é˜µ</span>
    features = np.vstack([mfccs, zcr, energy, ...])
    
    <span class="hljs-comment"># 5. è®¡ç®—ç»Ÿè®¡é‡</span>
    feature_stats = np.hstack([
        np.mean(features, axis=<span class="hljs-number">1</span>),  <span class="hljs-comment"># å‡å€¼</span>
        np.std(features, axis=<span class="hljs-number">1</span>),   <span class="hljs-comment"># æ ‡å‡†å·®</span>
        np.<span class="hljs-built_in">max</span>(features, axis=<span class="hljs-number">1</span>),   <span class="hljs-comment"># æœ€å¤§å€¼</span>
        np.<span class="hljs-built_in">min</span>(features, axis=<span class="hljs-number">1</span>)    <span class="hljs-comment"># æœ€å°å€¼</span>
    ])
    
    <span class="hljs-keyword">return</span> feature_stats  <span class="hljs-comment"># è¿”å›72ç»´å‘é‡</span>
</code></pre>
<h4 data-id="heading-9">ğŸ§  <strong>MiningAudioClassifier</strong> - æ·±åº¦ç¥ç»ç½‘ç»œ</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„**"è¯Šæ–­åŒ»ç”Ÿ"**ï¼ŒåŸºäºç‰¹å¾å‘é‡é¢„æµ‹è®¾å¤‡çŠ¶æ€ï¼š</p>
<p><strong>ç½‘ç»œæ¶æ„</strong>ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[è¾“å…¥å±‚&lt;br/&gt;72ç»´ç‰¹å¾] --&gt; B[å…¨è¿æ¥å±‚256]
    B --&gt; C[æ‰¹å½’ä¸€åŒ–BN]
    C --&gt; D[ReLUæ¿€æ´»]
    D --&gt; E[Dropout 0.3]
    
    E --&gt; F[å…¨è¿æ¥å±‚128]
    F --&gt; G[æ‰¹å½’ä¸€åŒ–BN]
    G --&gt; H[ReLUæ¿€æ´»]
    H --&gt; I[Dropout 0.3]
    
    I --&gt; J[å…¨è¿æ¥å±‚64]
    J --&gt; K[æ‰¹å½’ä¸€åŒ–BN]
    K --&gt; L[ReLUæ¿€æ´»]
    L --&gt; M[Dropout 0.3]
    
    M --&gt; N1[è®¾å¤‡çŠ¶æ€å¤´&lt;br/&gt;3ç±»]
    M --&gt; N2[æ•…éšœç±»å‹å¤´&lt;br/&gt;4ç±»]
    M --&gt; N3[ä¼˜å…ˆçº§å¤´&lt;br/&gt;3ç±»]
    
    N1 --&gt; O1[Sigmoidæ¿€æ´»]
    N2 --&gt; O2[Sigmoidæ¿€æ´»]
    N3 --&gt; O3[Sigmoidæ¿€æ´»]
    
    style A fill:#FFC107
    style M fill:#4CAF50,color:#fff
    style O1 fill:#FF5722,color:#fff
    style O2 fill:#FF5722,color:#fff
    style O3 fill:#FF5722,color:#fff
</code></pre>
<p><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š</p>
<ol>
<li>
<p><strong>å¤šæ ‡ç­¾åˆ†ç±»</strong><br/>
ä¸åŒäºä¼ ç»Ÿå•æ ‡ç­¾åˆ†ç±»ï¼Œè¿™é‡Œä½¿ç”¨<strong>3ä¸ªåˆ†ç±»å¤´</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®¾å¤‡çŠ¶æ€: normal/abnormal/maintenance_needed</span>
self.equipment_status_head = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">3</span>)

<span class="hljs-comment"># æ•…éšœç±»å‹: bearing/motor/hydraulic/belt</span>
self.fault_type_head = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">4</span>)

<span class="hljs-comment"># ä¼˜å…ˆçº§: low/medium/high</span>
self.priority_head = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">3</span>)
</code></pre>
</li>
<li>
<p><strong>æ‰¹å½’ä¸€åŒ–(Batch Normalization)</strong></p>
<ul>
<li>åŠ é€Ÿè®­ç»ƒæ”¶æ•›</li>
<li>æé«˜æ¨¡å‹æ³›åŒ–èƒ½åŠ›</li>
<li><strong>æ³¨æ„</strong>ï¼šæ¨ç†æ—¶å¿…é¡»è®¾ç½®ä¸ºevalæ¨¡å¼ï¼</li>
</ul>
</li>
<li>
<p><strong>Dropoutæ­£åˆ™åŒ–</strong></p>
<ul>
<li>é˜²æ­¢è¿‡æ‹Ÿåˆ</li>
<li>dropoutç‡0.3ï¼ˆä¿ç•™70%ç¥ç»å…ƒï¼‰</li>
</ul>
</li>
<li>
<p><strong>Sigmoidæ¿€æ´»</strong></p>
<ul>
<li>å¤šæ ‡ç­¾åœºæ™¯ä¸‹ï¼Œæ¯ä¸ªæ ‡ç­¾ç‹¬ç«‹åˆ¤æ–­</li>
<li>è¾“å‡ºæ¦‚ç‡å€¼0-1</li>
</ul>
</li>
</ol>
<h4 data-id="heading-10">ğŸ“¦ <strong>MinIODownloader</strong> - æ•°æ®æ¡¥æ¥å±‚</h4>
<p>å¯¹æ¥MinIOå¯¹è±¡å­˜å‚¨ï¼Œæ”¯æŒä»S3 URLä¸‹è½½éŸ³é¢‘æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_local_path_for_s3</span>(<span class="hljs-params">self, s3_url</span>):
    <span class="hljs-comment"># s3://bucket-name/path/to/audio.wav</span>
    
    <span class="hljs-comment"># 1. ç”Ÿæˆæœ¬åœ°ç¼“å­˜è·¯å¾„</span>
    cache_dir = user_cache_dir(<span class="hljs-string">'label-studio'</span>)
    url_hash = hashlib.md5(s3_url.encode()).hexdigest()[:<span class="hljs-number">6</span>]
    local_path = <span class="hljs-string">f"<span class="hljs-subst">{cache_dir}</span>/<span class="hljs-subst">{url_hash}</span>__<span class="hljs-subst">{filename}</span>"</span>
    
    <span class="hljs-comment"># 2. ä¸‹è½½æ–‡ä»¶</span>
    self._download_s3_file(s3_url, local_path)
    
    <span class="hljs-keyword">return</span> local_path
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šé¿å…é‡å¤ä¸‹è½½</li>
<li><strong>å“ˆå¸Œå‘½å</strong>ï¼šé˜²æ­¢æ–‡ä»¶åå†²çª</li>
<li><strong>èµ„æºç®¡ç†</strong>ï¼šæ­£ç¡®å…³é—­S3è¿æ¥ï¼Œé¿å…å†…å­˜æ³„æ¼</li>
</ul>
<hr/>
<h2 data-id="heading-11">ä¸‰ã€æŠ€æœ¯å®ç°ï¼šHow - è¯Šæ–­æµç¨‹è¯¦è§£</h2>
<h3 data-id="heading-12">3.1 ç«¯åˆ°ç«¯é¢„æµ‹æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant LS as Label Studio
    participant Backend as MiningAudioMLBackend
    participant Downloader as MinIODownloader
    participant Extractor as AudioFeatureExtractor
    participant Model as MiningAudioClassifier
    participant MinIO as MinIOå­˜å‚¨
    
    LS-&gt;&gt;Backend: é¢„æµ‹è¯·æ±‚&lt;br/&gt;s3://audio-annotations/device1.wav
    Backend-&gt;&gt;Downloader: è§£æS3 URL
    Downloader-&gt;&gt;MinIO: ä¸‹è½½éŸ³é¢‘æ–‡ä»¶
    MinIO--&gt;&gt;Downloader: è¿”å›éŸ³é¢‘æ•°æ®
    Downloader--&gt;&gt;Backend: æœ¬åœ°æ–‡ä»¶è·¯å¾„
    
    Backend-&gt;&gt;Extractor: æå–ç‰¹å¾
    Extractor-&gt;&gt;Extractor: LibrosaåŠ è½½éŸ³é¢‘&lt;br/&gt;é‡‡æ ·ç‡25kHz
    Extractor-&gt;&gt;Extractor: è®¡ç®—æ—¶åŸŸç‰¹å¾&lt;br/&gt;ZCR/RMS
    Extractor-&gt;&gt;Extractor: è®¡ç®—é¢‘åŸŸç‰¹å¾&lt;br/&gt;MFCC/é¢‘è°±
    Extractor-&gt;&gt;Extractor: ç»Ÿè®¡é‡èšåˆ&lt;br/&gt;72ç»´å‘é‡
    Extractor--&gt;&gt;Backend: ç‰¹å¾å‘é‡
    
    Backend-&gt;&gt;Backend: ç‰¹å¾æ ‡å‡†åŒ–&lt;br/&gt;StandardScaler
    Backend-&gt;&gt;Model: ç¥ç»ç½‘ç»œæ¨ç†
    Model-&gt;&gt;Model: å‰å‘ä¼ æ’­
    Model--&gt;&gt;Backend: å¤šæ ‡ç­¾é¢„æµ‹ç»“æœ
    
    Backend-&gt;&gt;Backend: æ ¼å¼åŒ–ä¸ºLabel Studioæ ¼å¼
    Backend--&gt;&gt;LS: è¿”å›é¢„æµ‹&lt;br/&gt;è®¾å¤‡çŠ¶æ€/æ•…éšœç±»å‹/ä¼˜å…ˆçº§
</code></pre>
<h3 data-id="heading-13">3.2 å…³é”®æŠ€æœ¯ç‚¹</h3>
<h4 data-id="heading-14">æŠ€æœ¯ç‚¹1ï¼šç‰¹å¾æ ‡å‡†åŒ–</h4>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦æ ‡å‡†åŒ–ï¼Ÿ</strong></p>
<p>ä¸åŒç‰¹å¾çš„æ•°å€¼èŒƒå›´å·®å¼‚å·¨å¤§ï¼š</p>
<ul>
<li>MFCCå‡å€¼ï¼š-50 ~ +50</li>
<li>èƒ½é‡RMSï¼š0.001 ~ 1.0</li>
<li>é¢‘è°±è´¨å¿ƒï¼š500 ~ 5000</li>
</ul>
<p><strong>å¦‚æœä¸æ ‡å‡†åŒ–</strong>ï¼Œå¤§æ•°å€¼ç‰¹å¾ä¼šä¸»å¯¼æ¨¡å‹å­¦ä¹ ï¼Œå°æ•°å€¼ç‰¹å¾è¢«å¿½ç•¥ã€‚</p>
<p><strong>StandardScaleråŸç†</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">æ ‡å‡†åŒ–å…¬å¼: <span class="hljs-attr">x_scaled</span> = (x - mean) / std

ç¤ºä¾‹:
åŸå§‹ç‰¹å¾: <span class="hljs-section">[1000, 0.01, 50]</span>
å‡å€¼:     <span class="hljs-section">[500, 0.005, 25]</span>
æ ‡å‡†å·®:   <span class="hljs-section">[200, 0.003, 10]</span>
æ ‡å‡†åŒ–å: <span class="hljs-section">[2.5, 1.67, 2.5]</span>  <span class="hljs-comment"># æ•°å€¼èŒƒå›´ç»Ÿä¸€</span>
</code></pre>
<p><strong>ä»£ç å®ç°</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®­ç»ƒæ—¶æ‹Ÿåˆæ ‡å‡†åŒ–å™¨</span>
self.scaler.fit(training_features)

<span class="hljs-comment"># æ¨ç†æ—¶ä½¿ç”¨</span>
features_scaled = self.scaler.transform(features)
</code></pre>
<h4 data-id="heading-15">æŠ€æœ¯ç‚¹2ï¼šæ‰¹å½’ä¸€åŒ–çš„é™·é˜±</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ¨ç†æ—¶æ¨¡å‹å¿…é¡»è®¾ç½®ä¸º<code>eval()</code>æ¨¡å¼ï¼Œå¦åˆ™æŠ¥é”™</p>
<p><strong>åŸå› </strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è®­ç»ƒæ¨¡å¼(training=True)</span>
<span class="hljs-comment"># BatchNormä½¿ç”¨å½“å‰batchçš„ç»Ÿè®¡é‡</span>
mean_batch = current_batch.mean()
std_batch = current_batch.std()

<span class="hljs-comment"># è¯„ä¼°æ¨¡å¼(training=False)  </span>
<span class="hljs-comment"># BatchNormä½¿ç”¨è®­ç»ƒæ—¶çš„å…¨å±€ç»Ÿè®¡é‡</span>
mean_global = running_mean  <span class="hljs-comment"># è®­ç»ƒæ—¶ç´¯ç§¯</span>
std_global = running_std
</code></pre>
<p><strong>å•æ ·æœ¬æ¨ç†é—®é¢˜</strong>ï¼š</p>
<ul>
<li>è®­ç»ƒæ¨¡å¼ä¸‹ï¼Œå•æ ·æœ¬batchçš„std=0</li>
<li>å¯¼è‡´é™¤é›¶é”™è¯¯</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¨¡å‹åŠ è½½åç«‹å³è®¾ç½®ä¸ºè¯„ä¼°æ¨¡å¼</span>
self.model.load_state_dict(torch.load(model_path))
self.model.<span class="hljs-built_in">eval</span>()  <span class="hljs-comment"># å…³é”®ï¼</span>

<span class="hljs-comment"># æ¨ç†æ—¶ç¦ç”¨æ¢¯åº¦è®¡ç®—</span>
<span class="hljs-keyword">with</span> torch.no_grad():
    outputs = self.model(features)
</code></pre>
<h4 data-id="heading-16">æŠ€æœ¯ç‚¹3ï¼šå¤šæ ‡ç­¾é¢„æµ‹</h4>
<p><strong>é¢„æµ‹ç»“æœç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">{
    <span class="hljs-string">'equipment_status'</span>: [
        {<span class="hljs-string">'label'</span>: <span class="hljs-string">'abnormal'</span>, <span class="hljs-string">'confidence'</span>: <span class="hljs-number">0.85</span>}
    ],
    <span class="hljs-string">'fault_type'</span>: [
        {<span class="hljs-string">'label'</span>: <span class="hljs-string">'bearing_fault'</span>, <span class="hljs-string">'confidence'</span>: <span class="hljs-number">0.72</span>},
        {<span class="hljs-string">'label'</span>: <span class="hljs-string">'motor_fault'</span>, <span class="hljs-string">'confidence'</span>: <span class="hljs-number">0.58</span>}
    ],
    <span class="hljs-string">'priority'</span>: [
        {<span class="hljs-string">'label'</span>: <span class="hljs-string">'high_priority'</span>, <span class="hljs-string">'confidence'</span>: <span class="hljs-number">0.91</span>}
    ]
}
</code></pre>
<p><strong>é˜ˆå€¼ç­–ç•¥</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python">threshold = <span class="hljs-number">0.5</span>  <span class="hljs-comment"># ç½®ä¿¡åº¦é˜ˆå€¼</span>

<span class="hljs-keyword">for</span> category, logits <span class="hljs-keyword">in</span> outputs.items():
    probs = logits.cpu().numpy()[<span class="hljs-number">0</span>]  <span class="hljs-comment"># Sigmoidè¾“å‡º</span>
    
    predicted_labels = []
    <span class="hljs-keyword">for</span> i, prob <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(probs):
        <span class="hljs-keyword">if</span> prob &gt; threshold:  <span class="hljs-comment"># è¶…è¿‡é˜ˆå€¼æ‰è®¤ä¸ºæ˜¯é˜³æ€§</span>
            label_name = MINING_LABELS[category][i]
            predicted_labels.append({
                <span class="hljs-string">'label'</span>: label_name,
                <span class="hljs-string">'confidence'</span>: <span class="hljs-built_in">float</span>(prob)
            })
</code></pre>
<p><strong>å¤šæ ‡ç­¾ vs å¤šåˆ†ç±»çš„åŒºåˆ«</strong>ï¼š</p>
<ul>
<li><strong>å¤šåˆ†ç±»</strong>ï¼šä¸€ä¸ªæ ·æœ¬åªå±äºä¸€ä¸ªç±»åˆ«ï¼ˆå¦‚çŒ«/ç‹—/é¸Ÿï¼‰</li>
<li><strong>å¤šæ ‡ç­¾</strong>ï¼šä¸€ä¸ªæ ·æœ¬å¯ä»¥åŒæ—¶å±äºå¤šä¸ªæ ‡ç­¾ï¼ˆå¦‚"è½´æ‰¿æ•…éšœ+é«˜ä¼˜å…ˆçº§"ï¼‰</li>
</ul>
<h3 data-id="heading-17">3.3 Label Studioæ ¼å¼è½¬æ¢</h3>
<p><strong>è½¬æ¢é€»è¾‘</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_convert_to_labelstudio_format</span>(<span class="hljs-params">self, predictions, task_id</span>):
    results = []
    
    <span class="hljs-keyword">for</span> category, labels <span class="hljs-keyword">in</span> predictions.items():
        <span class="hljs-keyword">for</span> label_info <span class="hljs-keyword">in</span> labels:
            results.append({
                <span class="hljs-string">"from_name"</span>: <span class="hljs-string">f"mining_<span class="hljs-subst">{category}</span>"</span>,  <span class="hljs-comment"># å¯¹åº”æ ‡æ³¨é…ç½®</span>
                <span class="hljs-string">"to_name"</span>: <span class="hljs-string">"audio"</span>,
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"choices"</span>,
                <span class="hljs-string">"value"</span>: {
                    <span class="hljs-string">"choices"</span>: [label_info[<span class="hljs-string">'label'</span>]]
                },
                <span class="hljs-string">"score"</span>: label_info[<span class="hljs-string">'confidence'</span>]  <span class="hljs-comment"># ç½®ä¿¡åº¦</span>
            })
    
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"result"</span>: results, <span class="hljs-string">"model_version"</span>: <span class="hljs-string">"mining_audio_v1.0"</span>}
</code></pre>
<p><strong>Label Studioé…ç½®ç¤ºä¾‹</strong>ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Audio</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"audio"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"$audio"</span>/&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">Choices</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mining_equipment_status"</span> <span class="hljs-attr">toName</span>=<span class="hljs-string">"audio"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"normal"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"abnormal"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"maintenance_needed"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Choices</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">Choices</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"mining_fault_type"</span> <span class="hljs-attr">toName</span>=<span class="hljs-string">"audio"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"bearing_fault"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"motor_fault"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"hydraulic_leak"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Choice</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"belt_fault"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Choices</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
</code></pre>
<hr/>
<h2 data-id="heading-18">å››ã€å®æˆ˜åº”ç”¨ï¼šçœŸå®åœºæ™¯æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-19">åœºæ™¯1ï¼šä¼ é€å¸¦è½´æ‰¿æ•…éšœé¢„è­¦</h3>
<p><strong>èƒŒæ™¯</strong>ï¼šæŸéœ²å¤©çŸ¿ä¸»ä¼ é€å¸¦ï¼Œæ—¥è¿é€çŸ¿çŸ³5000å¨ï¼Œè½´æ‰¿æ•…éšœå†å²è®°å½•ï¼š</p>
<ul>
<li>æ¯æ¬¡æ•…éšœåœäº§8-12å°æ—¶</li>
<li>å¹´å‡å‘ç”Ÿ3æ¬¡</li>
<li>å•æ¬¡æŸå¤±çº¦300ä¸‡å…ƒ</li>
</ul>
<p><strong>ä¼ ç»Ÿåšæ³•</strong>ï¼š</p>
<ul>
<li>æ¯æœˆäººå·¥å·¡æ£€ï¼Œå¬å£°éŸ³åˆ¤æ–­</li>
<li>ä¾èµ–è€å¸ˆå‚…ç»éªŒï¼ˆé€€ä¼‘åç»éªŒæµå¤±ï¼‰</li>
<li>æ— æ³•24å°æ—¶ç›‘æ§</li>
</ul>
<p><strong>ML Backendæ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>
<p><strong>æ•°æ®é‡‡é›†</strong></p>
<ul>
<li>åœ¨ä¼ é€å¸¦å…³é”®ä½ç½®å®‰è£…éº¦å…‹é£</li>
<li>æ¯å°æ—¶é‡‡é›†10ç§’éŸ³é¢‘æ ·æœ¬</li>
<li>è‡ªåŠ¨ä¸Šä¼ åˆ°MinIOå­˜å‚¨</li>
</ul>
</li>
<li>
<p><strong>æ¨¡å‹é¢„æµ‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># éŸ³é¢‘ç‰¹å¾åˆ†æ</span>
ç‰¹å¾å‘é‡ â†’ [MFCCé«˜é¢‘èƒ½é‡å¼‚å¸¸, é¢‘è°±è´¨å¿ƒåç§», RMSæŒ¯å¹…å¢å¤§]

<span class="hljs-comment"># æ¨¡å‹è¾“å‡º</span>
è®¾å¤‡çŠ¶æ€: abnormal (ç½®ä¿¡åº¦: <span class="hljs-number">0.87</span>)
æ•…éšœç±»å‹: bearing_fault (ç½®ä¿¡åº¦: <span class="hljs-number">0.75</span>)
ä¼˜å…ˆçº§: high_priority (ç½®ä¿¡åº¦: <span class="hljs-number">0.82</span>)
</code></pre>
</li>
<li>
<p><strong>é¢„è­¦æµç¨‹</strong></p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[éŸ³é¢‘é‡‡é›†] --&gt; B[ç‰¹å¾æå–]
    B --&gt; C[æ¨¡å‹é¢„æµ‹]
    C --&gt; D{ç½®ä¿¡åº¦&gt;0.7?}
    D --&gt;|æ˜¯| E[å‘é€é¢„è­¦]
    D --&gt;|å¦| F[æ­£å¸¸ç›‘æ§]
    E --&gt; G[ç»´æŠ¤å·¥å•]
    G --&gt; H[è®¡åˆ’æ€§åœæœºæ£€ä¿®]
</code></pre>
</li>
</ol>
<p><strong>å®æ–½æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>æå‰5å¤©é¢„è­¦è½´æ‰¿ç£¨æŸ</li>
<li>å®‰æ’è®¡åˆ’æ€§åœæœºï¼ˆæ™šä¸Šä½å³°æœŸæ£€ä¿®ï¼‰</li>
<li>é¿å…çªå‘åœäº§ï¼Œå¹´èŠ‚çœ900ä¸‡å…ƒ</li>
<li>è½´æ‰¿ä½¿ç”¨å¯¿å‘½å»¶é•¿20%ï¼ˆåŠæ—¶ç»´æŠ¤å‡å°‘è¿é”æŸä¼¤ï¼‰</li>
</ul>
<h3 data-id="heading-20">åœºæ™¯2ï¼šæ¶²å‹ç³»ç»Ÿæ³„æ¼æ£€æµ‹</h3>
<p><strong>èƒŒæ™¯</strong>ï¼šæŒ–æ˜æœºæ¶²å‹ç³»ç»Ÿæ³„æ¼ç‰¹å¾ï¼š</p>
<ul>
<li>å¼‚å¸¸"å˜¶å˜¶"é«˜é¢‘å£°</li>
<li>ä¼ ç»Ÿæ£€æµ‹ï¼šäººå·¥æ£€æŸ¥æ²¹å‹è¡¨+ç›®è§†æ¼æ²¹</li>
<li>é—®é¢˜ï¼šå¾®å°æ³„æ¼æ—©æœŸéš¾ä»¥å‘ç°</li>
</ul>
<p><strong>éŸ³é¢‘è¯Šæ–­ä¼˜åŠ¿</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ¶²å‹æ³„æ¼çš„éŸ³é¢‘ç‰¹å¾</span>
ç‰¹å¾æ¨¡å¼:
- é¢‘è°±å¸¦å®½æ˜¾è‘—å¢å¤§ï¼ˆé«˜é¢‘å™ªå£°ï¼‰
- é¢‘è°±æ»šé™ç‚¹å‡é«˜ï¼ˆé«˜é¢‘èƒ½é‡å æ¯”å¢åŠ ï¼‰
- MFCCç‰¹å®šé¢‘æ®µå¼‚å¸¸

<span class="hljs-comment"># æ¨¡å‹è¯†åˆ«</span>
æ•…éšœç±»å‹: hydraulic_leak (ç½®ä¿¡åº¦: <span class="hljs-number">0.81</span>)
</code></pre>
<p><strong>å¯¹æ¯”å®éªŒ</strong>ï¼š</p>





























<table><thead><tr><th>æ£€æµ‹æ–¹æ³•</th><th>è¯†åˆ«å‡†ç¡®ç‡</th><th>æ¼æ£€ç‡</th><th>è¯¯æŠ¥ç‡</th></tr></thead><tbody><tr><td>äººå·¥å·¡æ£€</td><td>65%</td><td>35%</td><td>10%</td></tr><tr><td>å‹åŠ›ä¼ æ„Ÿå™¨</td><td>75%</td><td>25%</td><td>15%</td></tr><tr><td><strong>éŸ³é¢‘ML</strong></td><td><strong>88%</strong></td><td><strong>12%</strong></td><td><strong>8%</strong></td></tr></tbody></table>
<h3 data-id="heading-21">åœºæ™¯3ï¼šå¤šè®¾å¤‡å¥åº·åº¦ç›‘æ§å¤§å±</h3>
<p><strong>éœ€æ±‚</strong>ï¼šçŸ¿å±±è°ƒåº¦ä¸­å¿ƒå¸Œæœ›å®æ—¶æŸ¥çœ‹æ‰€æœ‰è®¾å¤‡å¥åº·çŠ¶æ€</p>
<p><strong>å®ç°æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å®šæ—¶ä»»åŠ¡ï¼šæ¯å°æ—¶æ‰¹é‡é¢„æµ‹</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">scheduled_prediction</span>():
    devices = get_all_mining_devices()  <span class="hljs-comment"># è·å–æ‰€æœ‰è®¾å¤‡åˆ—è¡¨</span>
    
    <span class="hljs-keyword">for</span> device <span class="hljs-keyword">in</span> devices:
        <span class="hljs-comment"># è·å–æœ€æ–°éŸ³é¢‘</span>
        audio_url = <span class="hljs-string">f"s3://audio-data/<span class="hljs-subst">{device.<span class="hljs-built_in">id</span>}</span>/latest.wav"</span>
        
        <span class="hljs-comment"># æ‰§è¡Œé¢„æµ‹</span>
        prediction = model.predict([{<span class="hljs-string">"data"</span>: {<span class="hljs-string">"audio"</span>: audio_url}}])
        
        <span class="hljs-comment"># æ›´æ–°è®¾å¤‡çŠ¶æ€</span>
        device.health_score = calculate_health_score(prediction)
        device.save()
</code></pre>
<p><strong>å¥åº·åº¦è®¡ç®—</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">calculate_health_score</span>(<span class="hljs-params">prediction</span>):
    score = <span class="hljs-number">100</span>  <span class="hljs-comment"># åŸºç¡€åˆ†</span>
    
    <span class="hljs-comment"># æ ¹æ®é¢„æµ‹ç»“æœæ‰£åˆ†</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'abnormal'</span> <span class="hljs-keyword">in</span> prediction[<span class="hljs-string">'equipment_status'</span>]:
        score -= <span class="hljs-number">30</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-string">'bearing_fault'</span> <span class="hljs-keyword">in</span> prediction[<span class="hljs-string">'fault_type'</span>]:
        score -= <span class="hljs-number">40</span>
    <span class="hljs-keyword">elif</span> <span class="hljs-string">'motor_fault'</span> <span class="hljs-keyword">in</span> prediction[<span class="hljs-string">'fault_type'</span>]:
        score -= <span class="hljs-number">35</span>
    
    <span class="hljs-keyword">if</span> <span class="hljs-string">'high_priority'</span> <span class="hljs-keyword">in</span> prediction[<span class="hljs-string">'priority'</span>]:
        score -= <span class="hljs-number">20</span>
    
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, score)
</code></pre>
<p><strong>å¯è§†åŒ–å¤§å±</strong>ï¼š</p>
<pre><code class="hljs language-less" lang="less">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        çŸ¿å±±è®¾å¤‡å¥åº·ç›‘æ§å¤§å±                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ä¼ é€å¸¦<span class="hljs-selector-tag">A</span>  <span class="hljs-selector-attr">[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘]</span> <span class="hljs-number">85</span>åˆ† çŠ¶æ€:è‰¯å¥½        â”‚
â”‚ ä¼ é€å¸¦<span class="hljs-selector-tag">B</span>  <span class="hljs-selector-attr">[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘]</span> <span class="hljs-number">45</span>åˆ† âš ï¸ éœ€ç»´æŠ¤        â”‚
â”‚ æŒ–æ˜æœº<span class="hljs-number">1</span>  <span class="hljs-selector-attr">[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]</span> <span class="hljs-number">95</span>åˆ† çŠ¶æ€:ä¼˜ç§€        â”‚
â”‚ æŒ–æ˜æœº<span class="hljs-number">2</span>  <span class="hljs-selector-attr">[â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘]</span> <span class="hljs-number">35</span>åˆ† ğŸš¨ ç´§æ€¥ç»´ä¿®      â”‚
â”‚ æ¶²å‹æ³µ<span class="hljs-number">1</span>  <span class="hljs-selector-attr">[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘]</span> <span class="hljs-number">70</span>åˆ† çŠ¶æ€:ä¸€èˆ¬        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-22">äº”ã€æŠ€æœ¯ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23">5.1 æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<h4 data-id="heading-24">ä¼˜åŒ–1ï¼šæ‰¹é‡æ¨ç†</h4>
<p><strong>é—®é¢˜</strong>ï¼šé€ä¸ªéŸ³é¢‘é¢„æµ‹æ•ˆç‡ä½ï¼ŒGPUåˆ©ç”¨ç‡ä¸è¶³</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_batch</span>(<span class="hljs-params">self, audio_paths</span>):
    <span class="hljs-comment"># æ‰¹é‡æå–ç‰¹å¾</span>
    features_list = []
    <span class="hljs-keyword">for</span> path <span class="hljs-keyword">in</span> audio_paths:
        features = self.feature_extractor.extract_features(path)
        features_list.append(features)
    
    <span class="hljs-comment"># æ‰¹é‡æ¨ç†ï¼ˆGPUå¹¶è¡Œè®¡ç®—ï¼‰</span>
    features_batch = torch.stack(features_list)
    <span class="hljs-keyword">with</span> torch.no_grad():
        outputs = self.model(features_batch)
    
    <span class="hljs-keyword">return</span> outputs
</code></pre>
<p><strong>æ•ˆæœ</strong>ï¼š</p>
<ul>
<li>å•æ ·æœ¬æ¨ç†ï¼š100ms/æ ·æœ¬</li>
<li>æ‰¹é‡æ¨ç†(batch=32)ï¼š20ms/æ ·æœ¬</li>
<li><strong>åŠ é€Ÿ5å€</strong></li>
</ul>
<h4 data-id="heading-25">ä¼˜åŒ–2ï¼šæ¨¡å‹é‡åŒ–</h4>
<p><strong>ç›®çš„</strong>ï¼šå‡å°‘æ¨¡å‹å¤§å°ï¼ŒåŠ é€Ÿæ¨ç†</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># FP32 â†’ INT8é‡åŒ–</span>
<span class="hljs-keyword">import</span> torch.quantization <span class="hljs-keyword">as</span> quant

<span class="hljs-comment"># åŠ¨æ€é‡åŒ–(æ¨ç†æ—¶é‡åŒ–)</span>
model_quantized = quant.quantize_dynamic(
    model, 
    {nn.Linear},  <span class="hljs-comment"># é‡åŒ–å…¨è¿æ¥å±‚</span>
    dtype=torch.qint8
)

<span class="hljs-comment"># æ¨¡å‹å¤§å°: 50MB â†’ 13MB (å‡å°‘74%)</span>
<span class="hljs-comment"># æ¨ç†é€Ÿåº¦: æå‡1.5-2å€</span>
</code></pre>
<h4 data-id="heading-26">ä¼˜åŒ–3ï¼šç‰¹å¾ç¼“å­˜</h4>
<p><strong>åœºæ™¯</strong>ï¼šåŒä¸€éŸ³é¢‘æ–‡ä»¶å¯èƒ½è¢«å¤šæ¬¡é¢„æµ‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> hashlib
<span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> lru_cache

<span class="hljs-meta">@lru_cache(<span class="hljs-params">maxsize=<span class="hljs-number">100</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_features_cached</span>(<span class="hljs-params">audio_path_hash</span>):
    <span class="hljs-keyword">return</span> self.feature_extractor.extract_features(audio_path)

<span class="hljs-comment"># ä½¿ç”¨</span>
audio_hash = hashlib.md5(<span class="hljs-built_in">open</span>(audio_path, <span class="hljs-string">'rb'</span>).read()).hexdigest()
features = extract_features_cached(audio_hash)
</code></pre>
<h3 data-id="heading-27">5.2 æ¨¡å‹è®­ç»ƒæœ€ä½³å®è·µ</h3>
<h4 data-id="heading-28">å®è·µ1ï¼šæ•°æ®å¢å¼º</h4>
<p><strong>ç›®çš„</strong>ï¼šå¢åŠ è®­ç»ƒæ ·æœ¬å¤šæ ·æ€§ï¼Œæå‡æ³›åŒ–èƒ½åŠ›</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> audiomentations <span class="hljs-keyword">as</span> AA

augmenter = AA.Compose([
    AA.AddGaussianNoise(min_amplitude=<span class="hljs-number">0.001</span>, max_amplitude=<span class="hljs-number">0.015</span>, p=<span class="hljs-number">0.5</span>),
    AA.TimeStretch(min_rate=<span class="hljs-number">0.8</span>, max_rate=<span class="hljs-number">1.25</span>, p=<span class="hljs-number">0.5</span>),
    AA.PitchShift(min_semitones=-<span class="hljs-number">4</span>, max_semitones=<span class="hljs-number">4</span>, p=<span class="hljs-number">0.5</span>),
    AA.Shift(min_fraction=-<span class="hljs-number">0.5</span>, max_fraction=<span class="hljs-number">0.5</span>, p=<span class="hljs-number">0.5</span>),
])

<span class="hljs-comment"># åº”ç”¨æ•°æ®å¢å¼º</span>
augmented_audio = augmenter(samples=audio_data, sample_rate=<span class="hljs-number">25000</span>)
</code></pre>
<p><strong>å¢å¼ºç­–ç•¥è¯´æ˜</strong>ï¼š</p>
<ul>
<li><strong>é«˜æ–¯å™ªå£°</strong>ï¼šæ¨¡æ‹Ÿç¯å¢ƒå™ªéŸ³</li>
<li><strong>æ—¶é—´æ‹‰ä¼¸</strong>ï¼šæ¨¡æ‹Ÿè½¬é€Ÿå˜åŒ–</li>
<li><strong>éŸ³è°ƒåç§»</strong>ï¼šæ¨¡æ‹Ÿè®¾å¤‡è€åŒ–</li>
<li><strong>æ—¶é—´åç§»</strong>ï¼šå¢åŠ æ—¶é—´å¤šæ ·æ€§</li>
</ul>
<h4 data-id="heading-29">å®è·µ2ï¼šç±»åˆ«å¹³è¡¡</h4>
<p><strong>é—®é¢˜</strong>ï¼šæ­£å¸¸æ ·æœ¬è¿œå¤šäºæ•…éšœæ ·æœ¬ï¼ˆä¸å¹³è¡¡æ•°æ®ï¼‰</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> torch.utils.data <span class="hljs-keyword">import</span> WeightedRandomSampler

<span class="hljs-comment"># è®¡ç®—ç±»åˆ«æƒé‡</span>
class_counts = [normal_count, abnormal_count, maintenance_count]
class_weights = <span class="hljs-number">1.0</span> / torch.tensor(class_counts, dtype=torch.<span class="hljs-built_in">float</span>)

<span class="hljs-comment"># æ ·æœ¬æƒé‡</span>
sample_weights = [class_weights[label] <span class="hljs-keyword">for</span> label <span class="hljs-keyword">in</span> labels]

<span class="hljs-comment"># åŠ æƒé‡‡æ ·å™¨</span>
sampler = WeightedRandomSampler(
    weights=sample_weights,
    num_samples=<span class="hljs-built_in">len</span>(sample_weights),
    replacement=<span class="hljs-literal">True</span>
)

<span class="hljs-comment"># ä½¿ç”¨</span>
train_loader = DataLoader(dataset, sampler=sampler, batch_size=<span class="hljs-number">32</span>)
</code></pre>
<h4 data-id="heading-30">å®è·µ3ï¼šå¤šä»»åŠ¡å­¦ä¹ ç­–ç•¥</h4>
<p><strong>æŸå¤±å‡½æ•°è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">multi_label_loss</span>(<span class="hljs-params">outputs, targets</span>):
    <span class="hljs-comment"># ä¸‰ä¸ªä»»åŠ¡çš„BCEæŸå¤±</span>
    loss_status = F.binary_cross_entropy(
        outputs[<span class="hljs-string">'equipment_status'</span>], 
        targets[<span class="hljs-string">'equipment_status'</span>]
    )
    
    loss_fault = F.binary_cross_entropy(
        outputs[<span class="hljs-string">'fault_type'</span>], 
        targets[<span class="hljs-string">'fault_type'</span>]
    )
    
    loss_priority = F.binary_cross_entropy(
        outputs[<span class="hljs-string">'priority'</span>], 
        targets[<span class="hljs-string">'priority'</span>]
    )
    
    <span class="hljs-comment"># åŠ æƒç»„åˆ</span>
    total_loss = <span class="hljs-number">0.4</span> * loss_status + <span class="hljs-number">0.4</span> * loss_fault + <span class="hljs-number">0.2</span> * loss_priority
    <span class="hljs-keyword">return</span> total_loss
</code></pre>
<p><strong>æƒé‡è®¾ç½®ä¾æ®</strong>ï¼š</p>
<ul>
<li>è®¾å¤‡çŠ¶æ€ï¼šæœ€é‡è¦ï¼ˆ0.4ï¼‰</li>
<li>æ•…éšœç±»å‹ï¼šé‡è¦ï¼ˆ0.4ï¼‰</li>
<li>ä¼˜å…ˆçº§ï¼šæ¬¡è¦ï¼ˆ0.2ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-31">å…­ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-32">6.1 æŠ€æœ¯åˆ›æ–°ç‚¹</h3>
<p>æœ¬é¡¹ç›®åœ¨çŸ¿ä¸šéŸ³é¢‘è¯Šæ–­é¢†åŸŸçš„åˆ›æ–°ï¼š</p>
<ol>
<li>
<p><strong>å¤šæ ‡ç­¾è”åˆé¢„æµ‹</strong></p>
<ul>
<li>ä¼ ç»Ÿæ–¹æ³•ï¼šå•ç‹¬é¢„æµ‹æ•…éšœç±»å‹</li>
<li>æœ¬æ–¹æ¡ˆï¼šåŒæ—¶é¢„æµ‹çŠ¶æ€/æ•…éšœ/ä¼˜å…ˆçº§ï¼Œæä¾›å…¨é¢è¯Šæ–­</li>
</ul>
</li>
<li>
<p><strong>ç«¯åˆ°ç«¯æ·±åº¦å­¦ä¹ </strong></p>
<ul>
<li>ä¼ ç»Ÿæ–¹æ³•ï¼šæ‰‹å·¥è®¾è®¡ç‰¹å¾+ç®€å•åˆ†ç±»å™¨</li>
<li>æœ¬æ–¹æ¡ˆï¼šç¥ç»ç½‘ç»œè‡ªåŠ¨å­¦ä¹ ç‰¹å¾è¡¨ç¤º</li>
</ul>
</li>
<li>
<p><strong>å·¥ä¸šçº§å·¥ç¨‹å®ç°</strong></p>
<ul>
<li>å¯¹æ¥MinIOå­˜å‚¨</li>
<li>æ ‡å‡†åŒ–éƒ¨ç½²æµç¨‹</li>
<li>å®Œå–„çš„å¼‚å¸¸å¤„ç†</li>
</ul>
</li>
</ol>
<h3 data-id="heading-33">6.2 é€‚ç”¨åœºæ™¯æ€»ç»“</h3>






























<table><thead><tr><th>è¡Œä¸šé¢†åŸŸ</th><th>åº”ç”¨åœºæ™¯</th><th>æ ¸å¿ƒä»·å€¼</th></tr></thead><tbody><tr><td><strong>çŸ¿ä¸š</strong></td><td>è®¾å¤‡æ•…éšœé¢„è­¦</td><td>é¿å…åœäº§æŸå¤±</td></tr><tr><td><strong>åˆ¶é€ ä¸š</strong></td><td>ç”Ÿäº§çº¿è´¨æ£€</td><td>æå‡äº§å“è´¨é‡</td></tr><tr><td><strong>èƒ½æº</strong></td><td>é£æœº/æ°´æ³µç›‘æ§</td><td>å»¶é•¿è®¾å¤‡å¯¿å‘½</td></tr><tr><td><strong>äº¤é€š</strong></td><td>è½¨é“/æ¡¥æ¢å·¡æ£€</td><td>ä¿éšœå®‰å…¨</td></tr></tbody></table>
<h3 data-id="heading-34">6.3 æœªæ¥å‘å±•æ–¹å‘</h3>
<h4 data-id="heading-35">æ–¹å‘1ï¼šå¤šæ¨¡æ€èåˆ</h4>
<p><strong>æ€è·¯</strong>ï¼šç»“åˆéŸ³é¢‘+æŒ¯åŠ¨+æ¸©åº¦å¤šç§ä¼ æ„Ÿå™¨</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiModalClassifier</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.audio_encoder = AudioFeatureExtractor()
        self.vibration_encoder = VibrationFeatureExtractor()
        self.temperature_encoder = TemperatureFeatureExtractor()
        
        <span class="hljs-comment"># å¤šæ¨¡æ€èåˆ</span>
        self.fusion_layer = nn.Linear(<span class="hljs-number">72</span>+<span class="hljs-number">64</span>+<span class="hljs-number">32</span>, <span class="hljs-number">128</span>)
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å•ä¸€ä¼ æ„Ÿå™¨å¯èƒ½æ¼æ£€</li>
<li>å¤šæ¨¡æ€äº’è¡¥ï¼Œæå‡å‡†ç¡®ç‡</li>
</ul>
<h4 data-id="heading-36">æ–¹å‘2ï¼šè‡ªç›‘ç£é¢„è®­ç»ƒ</h4>
<p><strong>æ€è·¯</strong>ï¼šåœ¨å¤§è§„æ¨¡æ— æ ‡æ³¨éŸ³é¢‘ä¸Šé¢„è®­ç»ƒ</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å¯¹æ¯”å­¦ä¹ </span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">contrastive_loss</span>(<span class="hljs-params">audio1, audio2, temperature=<span class="hljs-number">0.5</span></span>):
    <span class="hljs-comment"># åŒä¸€è®¾å¤‡ä¸åŒæ—¶é—´çš„éŸ³é¢‘ä¸ºæ­£æ ·æœ¬</span>
    <span class="hljs-comment"># ä¸åŒè®¾å¤‡çš„éŸ³é¢‘ä¸ºè´Ÿæ ·æœ¬</span>
    ...
</code></pre>
<p><strong>ä»·å€¼</strong>ï¼š</p>
<ul>
<li>é™ä½æ ‡æ³¨æˆæœ¬</li>
<li>è¿ç§»å­¦ä¹ åˆ°æ–°è®¾å¤‡</li>
</ul>
<h4 data-id="heading-37">æ–¹å‘3ï¼šå› æœè¯Šæ–­</h4>
<p><strong>æ€è·¯</strong>ï¼šä¸ä»…é¢„æµ‹æ•…éšœï¼Œè¿˜è§£é‡ŠåŸå› </p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ³¨æ„åŠ›æœºåˆ¶å¯è§†åŒ–</span>
attention_weights = model.get_attention()

<span class="hljs-comment"># åˆ†æå…³é”®é¢‘æ®µ</span>
critical_freqs = find_critical_frequencies(attention_weights)
<span class="hljs-comment"># "æ•…éšœç”±2kHz-3kHzå¼‚å¸¸æŒ¯åŠ¨å¼•èµ·"</span>
</code></pre>
<hr/>
<h2 data-id="heading-38">é™„å½•ï¼šéƒ¨ç½²è¿ç»´æŒ‡å—</h2>
<h3 data-id="heading-39">1. Dockeréƒ¨ç½²</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ„å»ºé•œåƒ</span>
docker build -t mining-audio-backend .

<span class="hljs-comment"># å¯åŠ¨å®¹å™¨</span>
docker run -d \
  -p 9090:9090 \
  -v /data/models:/app/models \
  -v /data/cache:/app/cache \
  --name mining-audio \
  mining-audio-backend

<span class="hljs-comment"># å¥åº·æ£€æŸ¥</span>
curl http://localhost:9090/health
</code></pre>
<h3 data-id="heading-40">2. ç›‘æ§æŒ‡æ ‡</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å…³é”®æŒ‡æ ‡</span>
metrics = {
    <span class="hljs-string">'prediction_latency'</span>: <span class="hljs-number">150</span>,  <span class="hljs-comment"># å¹³å‡é¢„æµ‹å»¶è¿Ÿ(ms)</span>
    <span class="hljs-string">'accuracy'</span>: <span class="hljs-number">0.88</span>,            <span class="hljs-comment"># å‡†ç¡®ç‡</span>
    <span class="hljs-string">'throughput'</span>: <span class="hljs-number">100</span>,           <span class="hljs-comment"># ååé‡(æ ·æœ¬/ç§’)</span>
    <span class="hljs-string">'model_version'</span>: <span class="hljs-string">'v1.0'</span>,
    <span class="hljs-string">'gpu_utilization'</span>: <span class="hljs-number">0.75</span>      <span class="hljs-comment"># GPUåˆ©ç”¨ç‡</span>
}
</code></pre>
<h3 data-id="heading-41">3. æ•…éšœæ’æŸ¥</h3>
<p><strong>é—®é¢˜1ï¼šé¢„æµ‹å»¶è¿Ÿé«˜</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥GPUæ˜¯å¦æ­£å¸¸</span>
nvidia-smi

<span class="hljs-comment"># æ£€æŸ¥æ‰¹é‡å¤§å°</span>
<span class="hljs-comment"># å¢å¤§batch_sizeå¯æå‡GPUåˆ©ç”¨ç‡</span>
</code></pre>
<p><strong>é—®é¢˜2ï¼šå‡†ç¡®ç‡ä¸‹é™</strong></p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># æ£€æŸ¥æ•°æ®åˆ†å¸ƒæ¼‚ç§»</span>
<span class="hljs-comment"># å®šæœŸä½¿ç”¨æ–°æ•°æ®å¾®è°ƒæ¨¡å‹</span>
python train_model.py --finetune
</code></pre>
<hr/>
<p><strong>æ€»ç»“</strong>ï¼šçŸ¿ä¸šéŸ³é¢‘ML Backendå°†<strong>å£°å­¦è¯Šæ–­ä¸“å®¶çš„ç»éªŒ</strong>è½¬åŒ–ä¸º<strong>è‡ªåŠ¨åŒ–æ™ºèƒ½ç³»ç»Ÿ</strong>ï¼Œå®ç°ä»"äº‹åç»´ä¿®"åˆ°"é¢„æµ‹æ€§ç»´æŠ¤"çš„èŒƒå¼è½¬å˜ï¼Œä¸ºçŸ¿ä¸šã€åˆ¶é€ ä¸šç­‰é‡å·¥ä¸šé¢†åŸŸçš„æ™ºèƒ½åŒ–å‡çº§æä¾›äº†<strong>å¯è½åœ°çš„AIè§£å†³æ–¹æ¡ˆ</strong>ã€‚é€šè¿‡æ·±åº¦å­¦ä¹ æŠ€æœ¯ï¼Œè®©æœºå™¨å­¦ä¼š**"å¬éŸ³è¾¨æœº"**ï¼Œæå‰é¢„è­¦æ•…éšœï¼Œé¿å…åœäº§æŸå¤±ï¼Œæ˜¯å·¥ä¸š4.0æ—¶ä»£çš„é‡è¦åº”ç”¨æ–¹å‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ·é‡æ•°æ®é›†AIè‡ªåŠ¨åŒ–æ‰“æ ‡ - æ¸©åº¦å‘¨æœŸæ£€æµ‹]]></title>    <link>https://juejin.cn/post/7578460753210769435</link>    <guid>https://juejin.cn/post/7578460753210769435</guid>    <pubDate>2025-12-01T09:31:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753210769435" data-draft-id="7578511778889564198" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ·é‡æ•°æ®é›†AIè‡ªåŠ¨åŒ–æ‰“æ ‡ - æ¸©åº¦å‘¨æœŸæ£€æµ‹"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-01T09:31:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ·é‡æ•°æ®é›†AIè‡ªåŠ¨åŒ–æ‰“æ ‡ - æ¸©åº¦å‘¨æœŸæ£€æµ‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:31:24.000Z" title="Mon Dec 01 2025 09:31:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¸©åº¦ç‰¹å¾å¤šæ ‡ç­¾é¢„æµ‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSTARTORUS%2Ftok-label%2Fpull%2F2" target="_blank" title="https://github.com/STARTORUS/tok-label/pull/2" ref="nofollow noopener noreferrer">github.com/STARTORUS/tâ€¦</a></p>
<h2 data-id="heading-0">æ¦‚è¿°:è®©AIè¯†åˆ«æ¸©åº¦å˜åŒ–çš„"æŒ‡çº¹"</h2>
<p>æƒ³è±¡ä¸€ä¸‹,åœ¨ä¸€ä¸ªç­‰ç¦»å­ä½“å®éªŒè£…ç½®ä¸­,æ¸©åº¦ä»å‡ ç™¾ç”µå­ä¼ç‰¹(eV)é£é€Ÿä¸Šå‡åˆ°ä¸ŠåƒeV,åˆåœ¨ç¬é—´ä¸‹é™â€”â€”è¿™ä¸ªè¿‡ç¨‹å¯èƒ½åªæŒç»­å‡ åæ¯«ç§’ã€‚<strong>ä¼ ç»Ÿäººå·¥æ ‡æ³¨</strong>éœ€è¦æ ‡æ³¨å‘˜é€å¸§æŸ¥çœ‹æ¸©åº¦æ›²çº¿,æ ‡è®°ä¸Šå‡é˜¶æ®µã€å³°å€¼æ—¶åˆ»ã€ä¸‹é™é˜¶æ®µâ€¦â€¦æ—¢è€—æ—¶åˆå®¹æ˜“é—æ¼å…³é”®ç‰¹å¾ã€‚</p>
<p><strong>æ¸©åº¦æ ‡æ³¨ML Backend</strong>å°±åƒä¸€ä½ç»éªŒä¸°å¯Œçš„<strong>æ¸©åº¦åˆ†æä¸“å®¶</strong>,èƒ½è‡ªåŠ¨è¯†åˆ«æ¸©åº¦æ›²çº¿ä¸­çš„å…³é”®æ¨¡å¼,å°†å¤æ‚çš„æ—¶åºåˆ†æå·¥ä½œè‡ªåŠ¨åŒ–,è®©ç§‘ç ”äººå‘˜ä¸“æ³¨äºç‰©ç†ç°è±¡çš„è§£é‡Šè€Œéç¹ççš„æ•°æ®æ ‡æ³¨ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸šåŠ¡ä»·å€¼:Why - ä¸ºä»€ä¹ˆéœ€è¦æ¸©åº¦æ™ºèƒ½æ ‡æ³¨?</h2>
<h3 data-id="heading-2">1.1 ç°å®åœºæ™¯ç—›ç‚¹</h3>
<p>åœ¨ç­‰ç¦»å­ä½“ç‰©ç†ã€æ ¸èšå˜ã€ææ–™ç§‘å­¦ç­‰é¢†åŸŸ,æ¸©åº¦æ•°æ®åˆ†æé¢ä¸´è¯¸å¤šæŒ‘æˆ˜:</p>
<p><strong>åœºæ™¯1:ç­‰ç¦»å­ä½“æ”¾ç”µå®éªŒåˆ†æ</strong> âš¡<br/>
SUNISTæ‰˜å¡é©¬å…‹è£…ç½®æ¯æ¬¡æ”¾ç”µå®éªŒ:</p>
<ul>
<li>äº§ç”Ÿå‡ åä¸ªæ¸©åº¦ä¼ æ„Ÿå™¨é€šé“æ•°æ®</li>
<li>æ¯ä¸ªé€šé“åŒ…å«10000+æ—¶é—´ç‚¹</li>
<li>éœ€è¦æ ‡æ³¨:ä¸Šå‡é˜¶æ®µã€å³°å€¼æ—¶åˆ»ã€ä¸‹é™é˜¶æ®µã€å¼‚å¸¸äº‹ä»¶</li>
<li><strong>ä¸€æ¬¡å®éªŒäººå·¥æ ‡æ³¨éœ€è¦2-3å°æ—¶</strong></li>
</ul>
<p><strong>åœºæ™¯2:ææ–™çƒ­å¤„ç†å·¥è‰º</strong> ğŸ”¥<br/>
é‡‘å±çƒ­å¤„ç†è¿‡ç¨‹:</p>
<ul>
<li>æ¸©åº¦æ›²çº¿ç›´æ¥å½±å“ææ–™æ€§èƒ½</li>
<li>éœ€è¦ç²¾ç¡®æ ‡æ³¨åŠ çƒ­é€Ÿç‡ã€ä¿æ¸©æ—¶é—´ã€å†·å´é€Ÿç‡</li>
<li>ä¸åŒå·¥è‰ºæ›²çº¿å¯¹æ¯”åˆ†æ</li>
<li><strong>äººå·¥æ ‡æ³¨æ•ˆç‡ä½,éš¾ä»¥å¤§è§„æ¨¡å¯¹æ¯”</strong></li>
</ul>
<p><strong>åœºæ™¯3:éå‘¨æœŸæ€§æ¸©åº¦å¼‚å¸¸æ£€æµ‹</strong> ğŸš¨<br/>
ç­‰ç¦»å­ä½“å®éªŒä¸­çš„éå‘¨æœŸæ€§äº‹ä»¶:</p>
<ul>
<li>çªç„¶çš„é«˜æ¸©æŒç»­(å¯èƒ½æ˜¯ä¸ç¨³å®šæ€§)</li>
<li>å¼‚å¸¸çš„æ¸©åº¦å¹³å°æœŸ</li>
<li>ä¼ ç»Ÿå‘¨æœŸæ€§æ£€æµ‹æ–¹æ³•æ— æ³•è¯†åˆ«</li>
<li><strong>å…³é”®å¼‚å¸¸äº‹ä»¶å®¹æ˜“è¢«é—æ¼</strong></li>
</ul>
<h3 data-id="heading-3">1.2 ML Backendçš„æ ¸å¿ƒä»·å€¼</h3>
<p>æ¸©åº¦æ ‡æ³¨ML Backendé€šè¿‡<strong>æ™ºèƒ½æ¨¡å¼è¯†åˆ«</strong>,å®ç°:</p>
<p>âœ… <strong>æ•ˆç‡æå‡20å€</strong>:è‡ªåŠ¨å®Œæˆ95%çš„æ ‡æ³¨å·¥ä½œ,äººå·¥ä»…éœ€æ ¡éªŒ<br/>
âœ… <strong>æ ‡å‡†åŒ–</strong>:æ¶ˆé™¤äººä¸ºä¸»è§‚åˆ¤æ–­å·®å¼‚,ä¿è¯æ ‡æ³¨ä¸€è‡´æ€§<br/>
âœ… <strong>å…¨é¢æ€§</strong>:ä¸é—æ¼ä»»ä½•å¼‚å¸¸æ¨¡å¼,åŒ…æ‹¬éå‘¨æœŸæ€§äº‹ä»¶<br/>
âœ… <strong>å®æ—¶åˆ†æ</strong>:å®éªŒç»“æŸå³å¯è·å¾—åˆæ­¥åˆ†æç»“æœ</p>
<p><strong>ä»·å€¼é‡åŒ–ç¤ºä¾‹</strong>:</p>
<ul>
<li>ä¼ ç»Ÿæ ‡æ³¨:100æ¬¡å®éªŒ Ã— 2å°æ—¶ = 200å°æ—¶</li>
<li>ML Backend:100æ¬¡å®éªŒ Ã— 6åˆ†é’Ÿæ ¡éªŒ = 10å°æ—¶</li>
<li><strong>èŠ‚çœæ—¶é—´95%,åŠ é€Ÿç§‘ç ”è¿­ä»£</strong></li>
</ul>
<hr/>
<h2 data-id="heading-4">äºŒã€ç³»ç»Ÿæ¶æ„:What - æ¸©åº¦æ ‡æ³¨ML Backendæ˜¯ä»€ä¹ˆ?</h2>
<h3 data-id="heading-5">2.1 æ•´ä½“æ¶æ„å›¾</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "æ•°æ®æº"
        A1[CSVæ—¶åºæ•°æ®] --&gt; A2[æ•°æ®åŠ è½½å™¨]
        A3[MinIOå­˜å‚¨] --&gt; A2
    end
    
    subgraph "Label Studioå‰ç«¯"
        B1[æ—¶åºæ ‡æ³¨ç•Œé¢] --&gt; B2[ä»»åŠ¡ç®¡ç†]
    end
    
    subgraph "ML Backendæ ¸å¿ƒ"
        C1[_wsgi.pyæœåŠ¡] --&gt; C2[TemperatureModel&lt;br/&gt;ä¸šåŠ¡åè°ƒ]
        C2 --&gt; C3[TemperaturePredictor&lt;br/&gt;é¢„æµ‹å¼•æ“]
        C3 --&gt; C4[NonCyclicDetector&lt;br/&gt;éå‘¨æœŸæ€§æ£€æµ‹]
        C2 --&gt; C5[Utilså·¥å…·é›†&lt;br/&gt;æ•°æ®é¢„å¤„ç†]
    end
    
    subgraph "ç®—æ³•å±‚"
        D1[ä¸Šå‡é˜¶æ®µæ£€æµ‹&lt;br/&gt;start_end_time_1D]
        D2[å³°å€¼æ—¶åˆ»æ£€æµ‹&lt;br/&gt;find_temperature_peaks]
        D3[å¼‚å¸¸æ£€æµ‹&lt;br/&gt;detect_anomalies]
        D4[å¹³å°æœŸæ£€æµ‹&lt;br/&gt;gradient_analysis]
        D5[éå‘¨æœŸæ€§æ¨¡å¼&lt;br/&gt;sustained_high_temp]
    end
    
    A2 --&gt; C2
    B2 --&gt;|HTTP API| C1
    C3 --&gt; D1
    C3 --&gt; D2
    C3 --&gt; D3
    C3 --&gt; D4
    C4 --&gt; D5
    
    style C3 fill:#4CAF50,color:#fff
    style C4 fill:#FF5722,color:#fff
    style D1 fill:#2196F3,color:#fff
    style D2 fill:#2196F3,color:#fff
    style D5 fill:#FF9800,color:#fff
</code></pre>
<h3 data-id="heading-6">2.2 æ ¸å¿ƒç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-7">ğŸ¯ <strong>TemperatureModel</strong> - ä¸šåŠ¡ç¼–æ’ä¸­å¿ƒ</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„**"æŒ‡æŒ¥å®˜"**,è´Ÿè´£åè°ƒå„ä¸ªç»„ä»¶å®Œæˆæ¸©åº¦æ ‡æ³¨:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperatureModel</span>(<span class="hljs-title class_ inherited__">LabelStudioMLBase</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># åˆå§‹åŒ–é¢„æµ‹å™¨,ä¼ é€’é˜ˆå€¼å‚æ•°</span>
        self.predictor = TemperaturePredictor(
            critical_temp_threshold=<span class="hljs-number">1500.0</span>,  <span class="hljs-comment"># ä¸´ç•Œæ¸©åº¦é˜ˆå€¼</span>
            sustained_period=<span class="hljs-number">5.0</span>              <span class="hljs-comment"># æŒç»­æ—¶é—´é˜ˆå€¼</span>
        )
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, tasks</span>):
        <span class="hljs-comment"># 1. åŠ è½½æ•°æ®</span>
        data_dict = self.get_data(tasks)
        
        <span class="hljs-comment"># 2. æ‰§è¡Œé¢„æµ‹</span>
        <span class="hljs-keyword">for</span> shot, data <span class="hljs-keyword">in</span> data_dict.items():
            predictions = self.predictor.user_predict(data)
        
        <span class="hljs-comment"># 3. æ ¼å¼åŒ–ç»“æœ</span>
        <span class="hljs-keyword">return</span> model_preds
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>:</p>
<ul>
<li><strong>å®‰å…¨è·å–å‚æ•°</strong>:<code>_safe_get()</code>æ–¹æ³•å…¼å®¹ä¸åŒç‰ˆæœ¬çš„Label Studio</li>
<li><strong>åœ¨çº¿å­¦ä¹ </strong>:<code>fit()</code>æ–¹æ³•æ ¹æ®ç”¨æˆ·æ ‡æ³¨è‡ªé€‚åº”è°ƒæ•´é˜ˆå€¼</li>
<li><strong>å‚æ•°æŒä¹…åŒ–</strong>:é˜ˆå€¼å‚æ•°ä¿å­˜åœ¨ç¼“å­˜ä¸­,æ”¯æŒæ¨¡å‹æ¼”è¿›</li>
</ul>
<h4 data-id="heading-8">ğŸ§  <strong>TemperaturePredictor</strong> - æ™ºèƒ½é¢„æµ‹å¼•æ“</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„**"åˆ†æå¤§è„‘"**,å®ç°6ç§æ¸©åº¦æ¨¡å¼è¯†åˆ«:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperaturePredictor</span>(<span class="hljs-title class_ inherited__">BasePredictor</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, 
                 temp_rise_threshold=<span class="hljs-number">1000.0</span>,   <span class="hljs-comment"># ä¸Šå‡é˜ˆå€¼</span>
                 temp_fall_threshold=<span class="hljs-number">500.0</span>,    <span class="hljs-comment"># ä¸‹é™é˜ˆå€¼</span>
                 gradient_threshold=<span class="hljs-number">100.0</span>,     <span class="hljs-comment"># æ¢¯åº¦é˜ˆå€¼</span>
                 critical_temp_threshold=<span class="hljs-number">1500.0</span>, <span class="hljs-comment"># ä¸´ç•Œæ¸©åº¦</span>
                 sustained_period=<span class="hljs-number">5.0</span></span>):         <span class="hljs-comment"># æŒç»­æ—¶é—´</span>
        ...
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">user_predict</span>(<span class="hljs-params">self, task_data</span>):
        predictions = []
        
        <span class="hljs-comment"># 1. æ£€æµ‹æ¸©åº¦ä¸Šå‡é˜¶æ®µ</span>
        predictions.extend(self._detect_rise_phases(...))
        
        <span class="hljs-comment"># 2. æ£€æµ‹å³°å€¼æ—¶åˆ»</span>
        predictions.extend(self._detect_peak_moments(...))
        
        <span class="hljs-comment"># 3. æ£€æµ‹ä¸‹é™é˜¶æ®µ</span>
        predictions.extend(self._detect_fall_phases(...))
        
        <span class="hljs-comment"># 4. æ£€æµ‹å¼‚å¸¸äº‹ä»¶</span>
        predictions.extend(self._detect_anomalies(...))
        
        <span class="hljs-comment"># 5. æ£€æµ‹å¹³å°æœŸ</span>
        predictions.extend(self._detect_plateau_phases(...))
        
        <span class="hljs-comment"># 6. æ£€æµ‹éå‘¨æœŸæ€§æ¨¡å¼(æ–°å¢!)</span>
        predictions.extend(
            self.non_cyclic_detector.detect_non_cyclic_patterns(...)
        )
        
        <span class="hljs-keyword">return</span> predictions
</code></pre>
<p><strong>å…­å¤§æ£€æµ‹æ¨¡å—</strong>:</p>















































<table><thead><tr><th>æ¨¡å—</th><th>æ£€æµ‹ç›®æ ‡</th><th>ç‰©ç†æ„ä¹‰</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ä¸Šå‡é˜¶æ®µ</td><td>æ¸©åº¦å¿«é€Ÿå¢é•¿åŒºé—´</td><td>åŠ çƒ­/æ”¾ç”µå¯åŠ¨</td><td>è¯†åˆ«æ”¾ç”µå¼€å§‹</td></tr><tr><td>å³°å€¼æ—¶åˆ»</td><td>æ¸©åº¦æœ€é«˜ç‚¹</td><td>èƒ½é‡å³°å€¼</td><td>æ ‡è®°å…³é”®æ—¶åˆ»</td></tr><tr><td>ä¸‹é™é˜¶æ®µ</td><td>æ¸©åº¦è¡°å‡åŒºé—´</td><td>å†·å´/æ”¾ç”µç»“æŸ</td><td>è¯†åˆ«æ”¾ç”µç»“æŸ</td></tr><tr><td>å¼‚å¸¸æ£€æµ‹</td><td>æ¸©åº¦çªå˜</td><td>ä¸ç¨³å®šæ€§äº‹ä»¶</td><td>å‘ç°å¼‚å¸¸ç°è±¡</td></tr><tr><td>å¹³å°æœŸ</td><td>æ¸©åº¦å¹³ç¨³åŒºé—´</td><td>ç¨³æ€é˜¶æ®µ</td><td>å·¥è‰ºè´¨é‡è¯„ä¼°</td></tr><tr><td><strong>éå‘¨æœŸæ€§</strong></td><td><strong>æŒç»­é«˜æ¸©</strong></td><td><strong>éæ­£å¸¸çŠ¶æ€</strong></td><td><strong>å®‰å…¨é¢„è­¦</strong></td></tr></tbody></table>
<h4 data-id="heading-9">ğŸ” <strong>NonCyclicDetector</strong> - éå‘¨æœŸæ€§æ¨¡å¼è¯†åˆ«å™¨</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„**"å¼‚å¸¸é›·è¾¾"**,ä¸“é—¨æ£€æµ‹éå‘¨æœŸæ€§æ¸©åº¦äº‹ä»¶:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NonCyclicTemperatureDetector</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">detect_non_cyclic_patterns</span>(<span class="hljs-params">self, time, temp_data, channel</span>):
        predictions = []
        
        <span class="hljs-comment"># æ£€æµ‹1:æŒç»­é«˜æ¸©</span>
        predictions.extend(self._detect_sustained_high_temp(...))
        
        <span class="hljs-comment"># æ£€æµ‹2:å¼‚å¸¸æ¸©åº¦å¹³å°</span>
        predictions.extend(self._detect_abnormal_plateau(...))
        
        <span class="hljs-comment"># æ£€æµ‹3:çªå‘æ¸©åº¦å°–å³°</span>
        predictions.extend(self._detect_sudden_spikes(...))
        
        <span class="hljs-keyword">return</span> predictions
</code></pre>
<p><strong>éå‘¨æœŸæ€§ vs å‘¨æœŸæ€§çš„åŒºåˆ«</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">å‘¨æœŸæ€§æ¸©åº¦æ¨¡å¼(æ­£å¸¸æ”¾ç”µ):</span>
  â”Œâ”€â”    â”Œâ”€â”    â”Œâ”€â”
  â”‚ â”‚    â”‚ â”‚    â”‚ â”‚
â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€  (è§„å¾‹çš„å‡-å³°-é™)

<span class="hljs-section">éå‘¨æœŸæ€§æ¸©åº¦æ¨¡å¼(å¼‚å¸¸äº‹ä»¶):</span>
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚          â”‚  (æŒç»­é«˜æ¸©,ä¸ä¸‹é™)
â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€
</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸‰ã€æŠ€æœ¯å®ç°:How - æ¸©åº¦æ¨¡å¼è¯†åˆ«è¯¦è§£</h2>
<h3 data-id="heading-11">3.1 æ ¸å¿ƒç®—æ³•åŸç†</h3>
<h4 data-id="heading-12">ç®—æ³•1:ä¸Šå‡é˜¶æ®µæ£€æµ‹</h4>
<p><strong>ç‰©ç†èƒŒæ™¯</strong>:ç­‰ç¦»å­ä½“æ”¾ç”µæ—¶,æ¸©åº¦ä»å‡ ç™¾eVå¿«é€Ÿä¸Šå‡åˆ°ä¸ŠåƒeV</p>
<p><strong>ç®—æ³•æ€æƒ³</strong>:æ£€æµ‹æ¸©åº¦å€¼è¶…è¿‡é˜ˆå€¼çš„è¿ç»­åŒºé—´</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_detect_rise_phases</span>(<span class="hljs-params">self, time, temp_data, channel</span>):
    <span class="hljs-comment"># 1. è°ƒç”¨start_end_time_1Dæ£€æµ‹ä¸Šå‡åŒºé—´</span>
    rise_intervals = start_end_time_1D(
        temp_data, 
        threshold=self.temp_rise_threshold,  <span class="hljs-comment"># 1000 eV</span>
        postive=<span class="hljs-literal">True</span>  <span class="hljs-comment"># æ£€æµ‹æ­£å‘è¶…è¿‡é˜ˆå€¼</span>
    )
    
    <span class="hljs-comment"># 2. éå†æ¯ä¸ªåŒºé—´</span>
    <span class="hljs-keyword">for</span> start_idx, end_idx <span class="hljs-keyword">in</span> rise_intervals:
        start_time = time[start_idx]
        end_time = time[end_idx]
        
        <span class="hljs-comment"># 3. è®¡ç®—ä¸Šå‡ç‰¹å¾</span>
        rise_data = temp_data[start_idx:end_idx+<span class="hljs-number">1</span>]
        max_temp = np.<span class="hljs-built_in">max</span>(rise_data)
        avg_temp = np.mean(rise_data)
        
        <span class="hljs-comment"># 4. æ™ºèƒ½æ ‡ç­¾åˆ†çº§</span>
        <span class="hljs-keyword">if</span> max_temp &gt; self.temp_rise_threshold * <span class="hljs-number">1.5</span>:
            label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_å¿«é€Ÿä¸Šå‡"</span>  <span class="hljs-comment"># è¶…è¿‡1500eV</span>
        <span class="hljs-keyword">else</span>:
            label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_ä¸Šå‡é˜¶æ®µ"</span>   <span class="hljs-comment"># 1000-1500eV</span>
        
        <span class="hljs-comment"># 5. è®¡ç®—ç½®ä¿¡åº¦</span>
        confidence = <span class="hljs-built_in">min</span>(<span class="hljs-number">0.9</span>, (max_temp - threshold) / threshold)
        
        predictions.append(Prediction(
            label_group=<span class="hljs-string">'temperature_events'</span>,
            label_choice=label,
            start=start_time,
            end=end_time,
            score=confidence
        ))
</code></pre>
<p><strong>start_end_time_1Dç®—æ³•åŸç†</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">start_end_time_1D</span>(<span class="hljs-params">data, threshold, postive=<span class="hljs-literal">True</span></span>):
    <span class="hljs-string">"""
    æ£€æµ‹ä¿¡å·è¶…è¿‡é˜ˆå€¼çš„åŒºé—´
    
    æ€è·¯:
    1. å°†æ•°æ®äºŒå€¼åŒ–:è¶…è¿‡é˜ˆå€¼=1,å¦åˆ™=0
    2. æ£€æµ‹0â†’1è·³å˜(ä¸Šå‡æ²¿)å’Œ1â†’0è·³å˜(ä¸‹é™æ²¿)
    3. é…å¯¹ä¸Šå‡æ²¿å’Œä¸‹é™æ²¿,å¾—åˆ°åŒºé—´
    """</span>
    <span class="hljs-keyword">if</span> postive:
        mask = (data &gt; threshold).astype(<span class="hljs-built_in">int</span>)
    <span class="hljs-keyword">else</span>:
        mask = (data &lt; -threshold).astype(<span class="hljs-built_in">int</span>)
    
    <span class="hljs-comment"># æ£€æµ‹è·³å˜</span>
    diff = np.diff(mask)
    start_indices = np.where(diff == <span class="hljs-number">1</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>  <span class="hljs-comment"># ä¸Šå‡æ²¿</span>
    end_indices = np.where(diff == -<span class="hljs-number">1</span>)[<span class="hljs-number">0</span>] + <span class="hljs-number">1</span>   <span class="hljs-comment"># ä¸‹é™æ²¿</span>
    
    <span class="hljs-comment"># é…å¯¹åŒºé—´</span>
    intervals = []
    <span class="hljs-keyword">for</span> start, end <span class="hljs-keyword">in</span> <span class="hljs-built_in">zip</span>(start_indices, end_indices):
        intervals.append((start, end))
    
    <span class="hljs-keyword">return</span> intervals
</code></pre>
<p><strong>å¯è§†åŒ–ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-arduino" lang="arduino">æ¸©åº¦æ›²çº¿:
  <span class="hljs-number">1500</span> â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€
           â”‚     â”‚
  <span class="hljs-number">1000</span> â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€  (é˜ˆå€¼çº¿)
           â”‚     â”‚
   <span class="hljs-number">500</span> â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€
        â†‘  â†‘     â†‘  â†‘
      start end start end

æ£€æµ‹ç»“æœ:
  åŒºé—´<span class="hljs-number">1</span>: [t1, t2]  æ ‡ç­¾:<span class="hljs-string">"å¿«é€Ÿä¸Šå‡"</span>(max=<span class="hljs-number">1500</span>)
  åŒºé—´<span class="hljs-number">2</span>: [t3, t4]  æ ‡ç­¾:<span class="hljs-string">"å¿«é€Ÿä¸Šå‡"</span>(max=<span class="hljs-number">1600</span>)
</code></pre>
<h4 data-id="heading-13">ç®—æ³•2:å³°å€¼æ—¶åˆ»æ£€æµ‹</h4>
<p><strong>ç‰©ç†èƒŒæ™¯</strong>:å³°å€¼å¯¹åº”èƒ½é‡æœ€é«˜æ—¶åˆ»,æ˜¯åˆ†æçš„å…³é”®ç‚¹</p>
<p><strong>ç®—æ³•æ€æƒ³</strong>:åŸºäºæ¢¯åº¦æ£€æµ‹æå€¼ç‚¹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_detect_peak_moments</span>(<span class="hljs-params">self, time, temp_data, channel</span>):
    <span class="hljs-comment"># è°ƒç”¨find_temperature_peaks</span>
    peak_times = find_temperature_peaks(
        temp_data, time,
        gradient_threshold=self.gradient_threshold,  <span class="hljs-comment"># 100 eV/ms</span>
        min_peak_height=self.min_peak_height         <span class="hljs-comment"># 800 eV</span>
    )
    
    <span class="hljs-keyword">for</span> peak_time <span class="hljs-keyword">in</span> peak_times:
        peak_idx = np.argmin(np.<span class="hljs-built_in">abs</span>(time - peak_time))
        peak_temp = temp_data[peak_idx]
        
        <span class="hljs-comment"># æ™ºèƒ½æ ‡ç­¾åˆ†çº§</span>
        <span class="hljs-keyword">if</span> peak_temp &gt; self.temp_rise_threshold * <span class="hljs-number">2</span>:
            label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_æé«˜å³°å€¼"</span>    <span class="hljs-comment"># &gt;2000eV</span>
        <span class="hljs-keyword">elif</span> peak_temp &gt; self.temp_rise_threshold * <span class="hljs-number">1.5</span>:
            label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_é«˜å³°å€¼"</span>      <span class="hljs-comment"># 1500-2000eV</span>
        <span class="hljs-keyword">else</span>:
            label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_å³°å€¼æ—¶åˆ»"</span>    <span class="hljs-comment"># 800-1500eV</span>
        
        predictions.append(Prediction(
            label_group=<span class="hljs-string">'temperature_events'</span>,
            label_choice=label,
            start=peak_time,
            end=<span class="hljs-literal">None</span>,  <span class="hljs-comment"># æ—¶é—´ç‚¹æ ‡æ³¨</span>
            score=<span class="hljs-built_in">min</span>(<span class="hljs-number">0.95</span>, peak_temp / (threshold * <span class="hljs-number">2</span>))
        ))
</code></pre>
<p><strong>find_temperature_peaksç®—æ³•åŸç†</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">find_temperature_peaks</span>(<span class="hljs-params">temp_data, time, gradient_threshold, min_peak_height</span>):
    <span class="hljs-string">"""
    åŸºäºæ¢¯åº¦çš„å³°å€¼æ£€æµ‹
    
    æ€è·¯:
    1. è®¡ç®—æ¸©åº¦æ¢¯åº¦ dT/dt
    2. æ£€æµ‹æ¢¯åº¦ä»æ­£å˜è´Ÿçš„ç‚¹(æå¤§å€¼ç‚¹)
    3. è¿‡æ»¤æ‰ä½äºæœ€å°é«˜åº¦çš„å³°å€¼
    """</span>
    <span class="hljs-comment"># 1. è®¡ç®—æ¢¯åº¦</span>
    gradient = np.gradient(temp_data, time)
    
    <span class="hljs-comment"># 2. æ£€æµ‹æ¢¯åº¦ç¬¦å·å˜åŒ–</span>
    sign_change = np.diff(np.sign(gradient))
    peak_indices = np.where(sign_change &lt; <span class="hljs-number">0</span>)[<span class="hljs-number">0</span>]  <span class="hljs-comment"># æ­£â†’è´Ÿ</span>
    
    <span class="hljs-comment"># 3. è¿‡æ»¤å³°å€¼</span>
    valid_peaks = []
    <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> peak_indices:
        <span class="hljs-keyword">if</span> temp_data[idx] &gt; min_peak_height:
            <span class="hljs-comment"># æ£€æŸ¥æ¢¯åº¦æ˜¯å¦è¶³å¤Ÿå¤§</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(gradient[idx-<span class="hljs-number">1</span>]) &gt; gradient_threshold:
                valid_peaks.append(time[idx])
    
    <span class="hljs-keyword">return</span> valid_peaks
</code></pre>
<p><strong>å¯è§†åŒ–ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ¸©åº¦æ›²çº¿:</span>
       â—  (å³°å€¼,æ¢¯åº¦0)
      â•± â•²
     â•±   â•²
    â•±     â•²  (æ¢¯åº¦&lt;0)
   â•±       â•²
  â•±         â•²
â”€â”€           â”€â”€
  (æ¢¯åº¦&gt;0)

<span class="hljs-section">æ¢¯åº¦æ›²çº¿:</span>
  +100 â”€â”€â•²
         â”‚â•²
    0 â”€â”€â”€â—â”€â”€â”€â”€â”€  (æ¢¯åº¦è¿‡é›¶ç‚¹â†’å³°å€¼)
         â”‚  â•²
 -100 â”€â”€â”€    â”€â”€
</code></pre>
<h4 data-id="heading-14">ç®—æ³•3:éå‘¨æœŸæ€§é«˜æ¸©æ£€æµ‹(åˆ›æ–°ç‚¹!)</h4>
<p><strong>ç‰©ç†èƒŒæ™¯</strong>:ç­‰ç¦»å­ä½“å¤±ç¨³æ—¶,æ¸©åº¦å¯èƒ½æŒç»­é«˜æ¸©ä¸ä¸‹é™</p>
<p><strong>ç®—æ³•æ€æƒ³</strong>:æ£€æµ‹æ¸©åº¦æŒç»­è¶…è¿‡ä¸´ç•Œå€¼çš„æ—¶é—´çª—å£</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_detect_sustained_high_temp</span>(<span class="hljs-params">self, time, temp_data, channel</span>):
    <span class="hljs-string">"""
    æ£€æµ‹æŒç»­é«˜æ¸©äº‹ä»¶
    
    å®šä¹‰:æ¸©åº¦æŒç»­è¶…è¿‡critical_temp_thresholdè¾¾åˆ°sustained_periodæ—¶é•¿
    """</span>
    <span class="hljs-comment"># 1. æ‰¾åˆ°é«˜æ¸©åŒºé—´</span>
    high_temp_mask = temp_data &gt; self.critical_temp_threshold
    high_temp_intervals = start_end_time_1D(
        high_temp_mask.astype(<span class="hljs-built_in">float</span>), 
        threshold=<span class="hljs-number">0.5</span>, 
        postive=<span class="hljs-literal">True</span>
    )
    
    <span class="hljs-comment"># 2. è¿‡æ»¤æŒç»­æ—¶é—´</span>
    predictions = []
    <span class="hljs-keyword">for</span> start_idx, end_idx <span class="hljs-keyword">in</span> high_temp_intervals:
        duration = time[end_idx] - time[start_idx]
        
        <span class="hljs-keyword">if</span> duration &gt;= self.sustained_period:  <span class="hljs-comment"># æŒç»­è¶…è¿‡5ms</span>
            avg_temp = np.mean(temp_data[start_idx:end_idx+<span class="hljs-number">1</span>])
            max_temp = np.<span class="hljs-built_in">max</span>(temp_data[start_idx:end_idx+<span class="hljs-number">1</span>])
            
            <span class="hljs-comment"># ä¸¥é‡ç¨‹åº¦åˆ†çº§</span>
            <span class="hljs-keyword">if</span> duration &gt; self.sustained_period * <span class="hljs-number">2</span>:
                label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_ä¸¥é‡æŒç»­é«˜æ¸©"</span>
                severity = <span class="hljs-string">"critical"</span>
            <span class="hljs-keyword">else</span>:
                label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_æŒç»­é«˜æ¸©"</span>
                severity = <span class="hljs-string">"warning"</span>
            
            predictions.append(Prediction(
                label_group=<span class="hljs-string">'temperature_events'</span>,
                label_choice=label,
                start=time[start_idx],
                end=time[end_idx],
                score=<span class="hljs-number">0.9</span>,
                metadata={
                    <span class="hljs-string">'severity'</span>: severity,
                    <span class="hljs-string">'duration_ms'</span>: duration,
                    <span class="hljs-string">'avg_temp_eV'</span>: avg_temp,
                    <span class="hljs-string">'max_temp_eV'</span>: max_temp
                }
            ))
    
    <span class="hljs-keyword">return</span> predictions
</code></pre>
<p><strong>å®é™…æ¡ˆä¾‹</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸æ”¾ç”µ(å‘¨æœŸæ€§):</span>
  1500eV â”€â”  â”Œâ”€â”  â”Œâ”€â”
         â”‚  â”‚ â”‚  â”‚ â”‚
  1000eV â”´â”€â”€â”´â”€â”´â”€â”€â”´â”€â”´  (å³°å€¼åå¿«é€Ÿä¸‹é™)
          2ms 2ms 2ms

<span class="hljs-section">å¼‚å¸¸æ”¾ç”µ(éå‘¨æœŸæ€§):</span>
  1500eV â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚          â”‚  (æŒç»­é«˜æ¸©8ms!)
  1000eV â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€
          â† 8ms â†’
         
  æ£€æµ‹ç»“æœ: <span class="hljs-string">"ä¸¥é‡æŒç»­é«˜æ¸©"</span> (duration=8ms &gt; 5ms*2)
</code></pre>
<h4 data-id="heading-15">ç®—æ³•4:æ¸©åº¦å¹³å°æœŸæ£€æµ‹</h4>
<p><strong>ç‰©ç†èƒŒæ™¯</strong>:ç¨³æ€é˜¶æ®µæ¸©åº¦ä¿æŒå¹³ç¨³,æ¢¯åº¦æ¥è¿‘0</p>
<p><strong>ç®—æ³•æ€æƒ³</strong>:æ£€æµ‹æ¸©åº¦æ¢¯åº¦å°äºé˜ˆå€¼çš„åŒºé—´</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_detect_plateau_phases</span>(<span class="hljs-params">self, time, temp_data, channel</span>):
    <span class="hljs-comment"># 1. è®¡ç®—æ¸©åº¦æ¢¯åº¦</span>
    gradient = np.gradient(temp_data)
    
    <span class="hljs-comment"># 2. æ£€æµ‹ä½æ¢¯åº¦åŒºé—´</span>
    plateau_threshold = self.gradient_threshold * <span class="hljs-number">0.1</span>  <span class="hljs-comment"># 10 eV/ms</span>
    plateau_mask = np.<span class="hljs-built_in">abs</span>(gradient) &lt; plateau_threshold
    
    <span class="hljs-comment"># 3. æ‰¾åˆ°è¿ç»­å¹³å°åŒºé—´</span>
    plateau_intervals = start_end_time_1D(
        plateau_mask.astype(<span class="hljs-built_in">float</span>), 
        threshold=<span class="hljs-number">0.5</span>, 
        postive=<span class="hljs-literal">True</span>
    )
    
    <span class="hljs-comment"># 4. è¿‡æ»¤çŸ­æš‚æ³¢åŠ¨(è‡³å°‘æŒç»­10ä¸ªé‡‡æ ·ç‚¹)</span>
    predictions = []
    <span class="hljs-keyword">for</span> start_idx, end_idx <span class="hljs-keyword">in</span> plateau_intervals:
        <span class="hljs-keyword">if</span> end_idx - start_idx &gt; <span class="hljs-number">10</span>:
            plateau_data = temp_data[start_idx:end_idx+<span class="hljs-number">1</span>]
            avg_temp = np.mean(plateau_data)
            temp_std = np.std(plateau_data)
            
            <span class="hljs-comment"># æ ¹æ®æ¸©åº¦æ°´å¹³åˆ†ç±»</span>
            <span class="hljs-keyword">if</span> avg_temp &gt; self.temp_rise_threshold:
                label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_é«˜æ¸©å¹³å°æœŸ"</span>
            <span class="hljs-keyword">elif</span> avg_temp &gt; self.temp_fall_threshold:
                label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_ä¸­æ¸©å¹³å°æœŸ"</span>
            <span class="hljs-keyword">else</span>:
                label = <span class="hljs-string">f"<span class="hljs-subst">{channel}</span>_ä½æ¸©å¹³å°æœŸ"</span>
            
            <span class="hljs-comment"># ç¨³å®šæ€§è¯„åˆ†</span>
            stability_score = <span class="hljs-built_in">max</span>(<span class="hljs-number">0.5</span>, <span class="hljs-number">1.0</span> - temp_std / avg_temp)
            
            predictions.append(Prediction(
                label_group=<span class="hljs-string">'temperature_events'</span>,
                label_choice=label,
                start=time[start_idx],
                end=time[end_idx],
                score=stability_score
            ))
    
    <span class="hljs-keyword">return</span> predictions
</code></pre>
<h3 data-id="heading-16">3.2 åœ¨çº¿å­¦ä¹ ä¸é˜ˆå€¼è‡ªé€‚åº”</h3>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>:æ ¹æ®ç”¨æˆ·æ ‡æ³¨åé¦ˆ,è‡ªåŠ¨è°ƒæ•´é˜ˆå€¼å‚æ•°</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">fit</span>(<span class="hljs-params">self, event, data, **kwargs</span>):
    <span class="hljs-string">"""
    å¤„ç†æ ‡æ³¨äº‹ä»¶,ä¼˜åŒ–æ¨¡å‹å‚æ•°
    """</span>
    <span class="hljs-keyword">if</span> event <span class="hljs-keyword">in</span> [<span class="hljs-string">'ANNOTATION_CREATED'</span>, <span class="hljs-string">'ANNOTATION_UPDATED'</span>]:
        <span class="hljs-comment"># 1. è§£ææ ‡æ³¨æ•°æ®</span>
        annotation_data = self._parse_annotation_data(data)
        
        <span class="hljs-comment"># 2. ä¼˜åŒ–é˜ˆå€¼</span>
        new_thresholds = self._optimize_thresholds(annotation_data)
        
        <span class="hljs-comment"># 3. æ›´æ–°é¢„æµ‹å™¨å‚æ•°</span>
        self.predictor.update_thresholds(new_thresholds)
        
        <span class="hljs-comment"># 4. æ›´æ–°æ¨¡å‹ç‰ˆæœ¬</span>
        new_version = <span class="hljs-string">f"temperature_v1.0_<span class="hljs-subst">{<span class="hljs-built_in">int</span>(time.time())}</span>"</span>
        self.<span class="hljs-built_in">set</span>(<span class="hljs-string">'model_version'</span>, new_version)

<span class="hljs-keyword">def</span> <span class="hljs-title function_">_optimize_thresholds</span>(<span class="hljs-params">self, annotation_data</span>):
    <span class="hljs-string">"""
    åŸºäºæ ‡æ³¨æ•°æ®çš„è‡ªé€‚åº”ç­–ç•¥
    """</span>
    new_thresholds = {}
    
    <span class="hljs-comment"># ç»Ÿè®¡ä¸åŒç±»å‹æ ‡æ³¨</span>
    rise_annotations = [ann <span class="hljs-keyword">for</span> ann <span class="hljs-keyword">in</span> annotation_data <span class="hljs-keyword">if</span> <span class="hljs-string">'ä¸Šå‡'</span> <span class="hljs-keyword">in</span> ann[<span class="hljs-string">'label'</span>]]
    
    <span class="hljs-comment"># å¦‚æœç”¨æˆ·æ ‡æ³¨äº†æ›´å¤šä¸Šå‡é˜¶æ®µ,é™ä½é˜ˆå€¼æé«˜æ•æ„Ÿåº¦</span>
    <span class="hljs-keyword">if</span> rise_annotations:
        current_rise = self.get(<span class="hljs-string">'temp_rise_threshold'</span>, <span class="hljs-number">1000.0</span>)
        new_thresholds[<span class="hljs-string">'temp_rise_threshold'</span>] = <span class="hljs-built_in">max</span>(<span class="hljs-number">800.0</span>, current_rise * <span class="hljs-number">0.95</span>)
    
    <span class="hljs-keyword">return</span> new_thresholds
</code></pre>
<p><strong>è‡ªé€‚åº”ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">åˆå§‹é˜ˆå€¼: <span class="hljs-attr">temp_rise_threshold</span> = <span class="hljs-number">1000</span> eV

ç”¨æˆ·æ ‡æ³¨åé¦ˆ:
- æ ‡æ³¨äº†ä¸€ä¸ª850eVçš„ä¸Šå‡é˜¶æ®µ(æ¨¡å‹æœªæ£€æµ‹åˆ°)

è‡ªé€‚åº”è°ƒæ•´:
- <span class="hljs-attr">new_threshold</span> = <span class="hljs-number">1000</span> * <span class="hljs-number">0.95</span> = <span class="hljs-number">950</span> eV (é™ä½é˜ˆå€¼)

ä¸‹æ¬¡é¢„æµ‹:
- å¯ä»¥æ£€æµ‹åˆ°850eVçš„ä¸Šå‡é˜¶æ®µäº†
</code></pre>
<h3 data-id="heading-17">3.3 å¤šé€šé“å¹¶è¡Œå¤„ç†</h3>
<p><strong>åœºæ™¯</strong>:ä¸€æ¬¡å®éªŒå¯èƒ½æœ‰10+ä¸ªæ¸©åº¦ä¼ æ„Ÿå™¨é€šé“</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">user_predict</span>(<span class="hljs-params">self, task_data</span>):
    predictions = []
    
    <span class="hljs-comment"># 1. æå–æ‰€æœ‰æ¸©åº¦é€šé“</span>
    temp_channels = self._extract_temperature_channels(task_data)
    <span class="hljs-comment"># ['Te1', 'Te2', 'Ti1', 'Ti2', ...]</span>
    
    <span class="hljs-comment"># 2. é€ä¸ªé€šé“åˆ†æ</span>
    <span class="hljs-keyword">for</span> channel <span class="hljs-keyword">in</span> temp_channels:
        temp_data = task_data[channel].values
        
        <span class="hljs-comment"># è·³è¿‡å…¨ä¸ºNaNçš„é€šé“</span>
        <span class="hljs-keyword">if</span> np.<span class="hljs-built_in">all</span>(np.isnan(temp_data)):
            <span class="hljs-keyword">continue</span>
        
        <span class="hljs-comment"># å¤„ç†ç¼ºå¤±å€¼(å‰å‘å¡«å……)</span>
        temp_data = self._handle_missing_values(temp_data)
        
        <span class="hljs-comment"># æ‰§è¡Œ6ç§æ£€æµ‹</span>
        predictions.extend(self._detect_rise_phases(time, temp_data, channel))
        predictions.extend(self._detect_peak_moments(time, temp_data, channel))
        predictions.extend(self._detect_fall_phases(time, temp_data, channel))
        predictions.extend(self._detect_anomalies(time, temp_data, channel))
        predictions.extend(self._detect_plateau_phases(time, temp_data, channel))
        predictions.extend(
            self.non_cyclic_detector.detect_non_cyclic_patterns(
                time, temp_data, channel
            )
        )
    
    <span class="hljs-keyword">return</span> predictions
</code></pre>
<hr/>
<h2 data-id="heading-18">å››ã€å®æˆ˜åº”ç”¨:çœŸå®ç§‘ç ”åœºæ™¯</h2>
<h3 data-id="heading-19">åœºæ™¯1:ç­‰ç¦»å­ä½“æ”¾ç”µæ•°æ®åˆ†æ</h3>
<p><strong>èƒŒæ™¯</strong>:SUNISTæ‰˜å¡é©¬å…‹è£…ç½®,ç ”ç©¶ç­‰ç¦»å­ä½“çº¦æŸ</p>
<p><strong>æ•°æ®ç‰¹å¾</strong>:</p>
<ul>
<li>10ä¸ªç”µå­æ¸©åº¦é€šé“(Te1-Te10)</li>
<li>8ä¸ªç¦»å­æ¸©åº¦é€šé“(Ti1-Ti8)</li>
<li>é‡‡æ ·ç‡:100kHz</li>
<li>æ¯æ¬¡æ”¾ç”µæŒç»­50-100ms</li>
</ul>
<p><strong>ML Backendåº”ç”¨</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># è¾“å…¥:CSVæ–‡ä»¶</span>
shot_12345.csv:
  time,   Te1,   Te2,   Ti1,   ...
  <span class="hljs-number">0.001</span>,  <span class="hljs-number">500</span>,   <span class="hljs-number">480</span>,   <span class="hljs-number">450</span>,   ...
  <span class="hljs-number">0.002</span>,  <span class="hljs-number">850</span>,   <span class="hljs-number">820</span>,   <span class="hljs-number">780</span>,   ...
  <span class="hljs-number">0.003</span>, <span class="hljs-number">1200</span>,  <span class="hljs-number">1150</span>,  <span class="hljs-number">1100</span>,   ...
  ...

<span class="hljs-comment"># é¢„æµ‹è¾“å‡º</span>
predictions = [
    <span class="hljs-comment"># é€šé“Te1</span>
    Prediction(label=<span class="hljs-string">"Te1_ä¸Šå‡é˜¶æ®µ"</span>, start=<span class="hljs-number">0.001</span>, end=<span class="hljs-number">0.015</span>),
    Prediction(label=<span class="hljs-string">"Te1_é«˜å³°å€¼"</span>, start=<span class="hljs-number">0.018</span>, end=<span class="hljs-literal">None</span>),
    Prediction(label=<span class="hljs-string">"Te1_ä¸‹é™é˜¶æ®µ"</span>, start=<span class="hljs-number">0.020</span>, end=<span class="hljs-number">0.040</span>),
    
    <span class="hljs-comment"># é€šé“Te2</span>
    Prediction(label=<span class="hljs-string">"Te2_ä¸Šå‡é˜¶æ®µ"</span>, start=<span class="hljs-number">0.002</span>, end=<span class="hljs-number">0.016</span>),
    Prediction(label=<span class="hljs-string">"Te2_æŒç»­é«˜æ¸©"</span>, start=<span class="hljs-number">0.018</span>, end=<span class="hljs-number">0.035</span>),  <span class="hljs-comment"># å¼‚å¸¸!</span>
    ...
]
</code></pre>
<p><strong>ç§‘ç ”ä»·å€¼</strong>:</p>
<ol>
<li><strong>å¿«é€Ÿç­›é€‰</strong>:ä»100æ¬¡å®éªŒä¸­å¿«é€Ÿæ‰¾åˆ°å¼‚å¸¸æ”¾ç”µ</li>
<li><strong>ç»Ÿè®¡åˆ†æ</strong>:æ‰¹é‡åˆ†æå³°å€¼æ¸©åº¦åˆ†å¸ƒ</li>
<li><strong>å‚æ•°ä¼˜åŒ–</strong>:å¯¹æ¯”ä¸åŒå®éªŒå‚æ•°ä¸‹çš„æ¸©åº¦æ›²çº¿ç‰¹å¾</li>
</ol>
<h3 data-id="heading-20">åœºæ™¯2:ææ–™çƒ­å¤„ç†å·¥è‰ºä¼˜åŒ–</h3>
<p><strong>èƒŒæ™¯</strong>:é‡‘å±çƒ­å¤„ç†å‚,ä¼˜åŒ–æ·¬ç«å·¥è‰º</p>
<p><strong>éœ€æ±‚</strong>:</p>
<ul>
<li>åˆ†æåŠ çƒ­é€Ÿç‡å¯¹ææ–™æ€§èƒ½çš„å½±å“</li>
<li>å¯¹æ¯”ä¸åŒå†·å´æ›²çº¿</li>
</ul>
<p><strong>ML Backendåº”ç”¨</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å·¥è‰º1:å¿«é€ŸåŠ çƒ­</span>
prediction1 = [
    Prediction(label=<span class="hljs-string">"temp_å¿«é€Ÿä¸Šå‡"</span>, start=<span class="hljs-number">0</span>, end=<span class="hljs-number">30</span>),  <span class="hljs-comment"># 30ç§’å‡æ¸©</span>
    Prediction(label=<span class="hljs-string">"temp_é«˜æ¸©å¹³å°æœŸ"</span>, start=<span class="hljs-number">30</span>, end=<span class="hljs-number">180</span>),  <span class="hljs-comment"># ä¿æ¸©150ç§’</span>
    Prediction(label=<span class="hljs-string">"temp_å¿«é€Ÿä¸‹é™"</span>, start=<span class="hljs-number">180</span>, end=<span class="hljs-number">210</span>)  <span class="hljs-comment"># 30ç§’å†·å´</span>
]

<span class="hljs-comment"># å·¥è‰º2:ç¼“æ…¢åŠ çƒ­</span>
prediction2 = [
    Prediction(label=<span class="hljs-string">"temp_ä¸Šå‡é˜¶æ®µ"</span>, start=<span class="hljs-number">0</span>, end=<span class="hljs-number">120</span>),  <span class="hljs-comment"># 120ç§’å‡æ¸©</span>
    Prediction(label=<span class="hljs-string">"temp_é«˜æ¸©å¹³å°æœŸ"</span>, start=<span class="hljs-number">120</span>, end=<span class="hljs-number">270</span>),  <span class="hljs-comment"># ä¿æ¸©150ç§’</span>
    Prediction(label=<span class="hljs-string">"temp_ä¸‹é™é˜¶æ®µ"</span>, start=<span class="hljs-number">270</span>, end=<span class="hljs-number">360</span>)  <span class="hljs-comment"># 90ç§’å†·å´</span>
]

<span class="hljs-comment"># è‡ªåŠ¨å¯¹æ¯”åˆ†æ</span>
compare_report = {
    <span class="hljs-string">'åŠ çƒ­é€Ÿç‡'</span>: <span class="hljs-string">'å·¥è‰º1:50â„ƒ/s, å·¥è‰º2:12.5â„ƒ/s'</span>,
    <span class="hljs-string">'ä¿æ¸©ç¨³å®šæ€§'</span>: <span class="hljs-string">'å·¥è‰º1:Â±5â„ƒ, å·¥è‰º2:Â±2â„ƒ'</span>,
    <span class="hljs-string">'å†·å´é€Ÿç‡'</span>: <span class="hljs-string">'å·¥è‰º1:50â„ƒ/s, å·¥è‰º2:16.7â„ƒ/s'</span>
}
</code></pre>
<p><strong>å·¥ä¸šä»·å€¼</strong>:</p>
<ul>
<li>æ ‡å‡†åŒ–å·¥è‰ºæ›²çº¿æ ‡æ³¨</li>
<li>å¿«é€Ÿå¯¹æ¯”ä¸åŒæ‰¹æ¬¡</li>
<li>è´¨é‡è¿½æº¯åˆ†æ</li>
</ul>
<h3 data-id="heading-21">åœºæ™¯3:éå‘¨æœŸæ€§äº‹ä»¶ç ”ç©¶</h3>
<p><strong>èƒŒæ™¯</strong>:ç ”ç©¶ç­‰ç¦»å­ä½“ä¸ç¨³å®šæ€§ç°è±¡</p>
<p><strong>ä¼ ç»Ÿæ–¹æ³•é—®é¢˜</strong>:</p>
<ul>
<li>åªæ£€æµ‹å‘¨æœŸæ€§å‡-å³°-é™æ¨¡å¼</li>
<li>å¼‚å¸¸çš„æŒç»­é«˜æ¸©è¢«å½“ä½œ"æ­£å¸¸çš„å³°å€¼"</li>
<li><strong>é—æ¼å…³é”®ç‰©ç†ç°è±¡</strong></li>
</ul>
<p><strong>éå‘¨æœŸæ€§æ£€æµ‹ä»·å€¼</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æ­£å¸¸æ”¾ç”µ</span>
normal_discharge = {
    <span class="hljs-string">'pattern'</span>: <span class="hljs-string">'å‘¨æœŸæ€§'</span>,
    <span class="hljs-string">'peak_temp'</span>: <span class="hljs-number">1500</span>,
    <span class="hljs-string">'duration'</span>: <span class="hljs-number">2</span>,  <span class="hljs-comment"># å³°å€¼æŒç»­2ms</span>
    <span class="hljs-string">'label'</span>: <span class="hljs-string">'Te1_é«˜å³°å€¼'</span>
}

<span class="hljs-comment"># å¼‚å¸¸æ”¾ç”µ(å¤±ç¨³)</span>
abnormal_discharge = {
    <span class="hljs-string">'pattern'</span>: <span class="hljs-string">'éå‘¨æœŸæ€§'</span>,
    <span class="hljs-string">'peak_temp'</span>: <span class="hljs-number">1600</span>,
    <span class="hljs-string">'duration'</span>: <span class="hljs-number">12</span>,  <span class="hljs-comment"># æŒç»­12ms!</span>
    <span class="hljs-string">'label'</span>: <span class="hljs-string">'Te1_ä¸¥é‡æŒç»­é«˜æ¸©'</span>,  <span class="hljs-comment"># æ–°æ ‡ç­¾!</span>
    <span class="hljs-string">'physical_meaning'</span>: <span class="hljs-string">'ç­‰ç¦»å­ä½“çº¦æŸå¤±æ•ˆ'</span>
}
</code></pre>
<p><strong>ç§‘ç ”çªç ´</strong>:</p>
<ul>
<li>å‘ç°æ–°çš„ç‰©ç†ç°è±¡</li>
<li>å»ºç«‹å¤±ç¨³é¢„è­¦æ¨¡å‹</li>
<li>ä¼˜åŒ–å®éªŒå‚æ•°</li>
</ul>
<hr/>
<h2 data-id="heading-22">äº”ã€æŠ€æœ¯ä¼˜åŒ–ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-23">5.1 æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-24">ä¼˜åŒ–1:å‘é‡åŒ–è®¡ç®—</h4>
<p><strong>é—®é¢˜</strong>:é€ç‚¹å¾ªç¯è®¡ç®—æ…¢</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># âŒ ä½æ•ˆå†™æ³•</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(temp_data)):
    <span class="hljs-keyword">if</span> temp_data[i] &gt; threshold:
        ...

<span class="hljs-comment"># âœ… é«˜æ•ˆå†™æ³•(å‘é‡åŒ–)</span>
mask = temp_data &gt; threshold  <span class="hljs-comment"># NumPyå‘é‡åŒ–,å¿«100å€</span>
high_temp_indices = np.where(mask)[<span class="hljs-number">0</span>]
</code></pre>
<h4 data-id="heading-25">ä¼˜åŒ–2:å¤šé€šé“å¹¶è¡Œ</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> concurrent.futures <span class="hljs-keyword">import</span> ThreadPoolExecutor

<span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_parallel</span>(<span class="hljs-params">self, task_data</span>):
    temp_channels = self._extract_temperature_channels(task_data)
    
    <span class="hljs-comment"># å¹¶è¡Œå¤„ç†å¤šä¸ªé€šé“</span>
    <span class="hljs-keyword">with</span> ThreadPoolExecutor(max_workers=<span class="hljs-number">4</span>) <span class="hljs-keyword">as</span> executor:
        futures = []
        <span class="hljs-keyword">for</span> channel <span class="hljs-keyword">in</span> temp_channels:
            future = executor.submit(
                self._predict_single_channel, 
                task_data, channel
            )
            futures.append(future)
        
        <span class="hljs-comment"># æ±‡æ€»ç»“æœ</span>
        all_predictions = []
        <span class="hljs-keyword">for</span> future <span class="hljs-keyword">in</span> futures:
            all_predictions.extend(future.result())
    
    <span class="hljs-keyword">return</span> all_predictions
</code></pre>
<p><strong>åŠ é€Ÿæ•ˆæœ</strong>:</p>
<ul>
<li>å•çº¿ç¨‹:18ä¸ªé€šé“ Ã— 100ms = 1800ms</li>
<li>4çº¿ç¨‹å¹¶è¡Œ:18ä¸ªé€šé“ Ã· 4 Ã— 100ms = 450ms</li>
<li><strong>åŠ é€Ÿ4å€</strong></li>
</ul>
<h3 data-id="heading-26">5.2 é˜ˆå€¼è°ƒä¼˜ç­–ç•¥</h3>
<p><strong>ç»éªŒå€¼æ¨è</strong>:</p>





























<table><thead><tr><th>ç‰©ç†åœºæ™¯</th><th>temp_rise_threshold</th><th>temp_fall_threshold</th><th>gradient_threshold</th></tr></thead><tbody><tr><td>ç­‰ç¦»å­ä½“æ”¾ç”µ</td><td>1000 eV</td><td>500 eV</td><td>100 eV/ms</td></tr><tr><td>é‡‘å±çƒ­å¤„ç†</td><td>800 â„ƒ</td><td>400 â„ƒ</td><td>50 â„ƒ/s</td></tr><tr><td>åŒ–å­¦ååº”</td><td>300 K</td><td>150 K</td><td>20 K/min</td></tr></tbody></table>
<p><strong>è°ƒä¼˜æ–¹æ³•</strong>:</p>
<ol>
<li><strong>ä»å®½åˆ°ä¸¥</strong>:åˆå§‹é˜ˆå€¼è®¾ä½,æ•è·æ‰€æœ‰å¯èƒ½äº‹ä»¶</li>
<li><strong>ç»Ÿè®¡åˆ†æ</strong>:åˆ†æé¢„æµ‹ç»“æœåˆ†å¸ƒ,æ‰¾åˆ°æœ€ä¼˜é˜ˆå€¼</li>
<li><strong>åœ¨çº¿å­¦ä¹ </strong>:æ ¹æ®ç”¨æˆ·åé¦ˆè‡ªåŠ¨è°ƒæ•´</li>
</ol>
<h3 data-id="heading-27">5.3 æ•°æ®è´¨é‡å¤„ç†</h3>
<h4 data-id="heading-28">å¤„ç†1:ç¼ºå¤±å€¼å¤„ç†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_handle_missing_values</span>(<span class="hljs-params">self, temp_data</span>):
    <span class="hljs-string">"""å‰å‘å¡«å……ç­–ç•¥"""</span>
    temp_data_clean = temp_data.copy()
    
    <span class="hljs-comment"># é€ç‚¹å‰å‘å¡«å……</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(temp_data_clean)):
        <span class="hljs-keyword">if</span> np.isnan(temp_data_clean[i]):
            temp_data_clean[i] = temp_data_clean[i-<span class="hljs-number">1</span>]
    
    <span class="hljs-comment"># å¤„ç†é¦–ä½NaN</span>
    <span class="hljs-keyword">if</span> np.isnan(temp_data_clean[<span class="hljs-number">0</span>]):
        first_valid = np.where(~np.isnan(temp_data_clean))[<span class="hljs-number">0</span>]
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(first_valid) &gt; <span class="hljs-number">0</span>:
            temp_data_clean[<span class="hljs-number">0</span>] = temp_data_clean[first_valid[<span class="hljs-number">0</span>]]
    
    <span class="hljs-keyword">return</span> temp_data_clean
</code></pre>
<h4 data-id="heading-29">å¤„ç†2:å¼‚å¸¸å€¼è¿‡æ»¤</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">_filter_outliers</span>(<span class="hljs-params">self, temp_data</span>):
    <span class="hljs-string">"""3Ïƒå‡†åˆ™è¿‡æ»¤å¼‚å¸¸å€¼"""</span>
    mean = np.nanmean(temp_data)
    std = np.nanstd(temp_data)
    
    <span class="hljs-comment"># è¶…è¿‡Â±3Ïƒçš„ç‚¹è§†ä¸ºå¼‚å¸¸</span>
    outlier_mask = np.<span class="hljs-built_in">abs</span>(temp_data - mean) &gt; <span class="hljs-number">3</span> * std
    
    <span class="hljs-comment"># ç”¨ç›¸é‚»ç‚¹å¹³å‡å€¼æ›¿ä»£</span>
    temp_data_clean = temp_data.copy()
    outlier_indices = np.where(outlier_mask)[<span class="hljs-number">0</span>]
    
    <span class="hljs-keyword">for</span> idx <span class="hljs-keyword">in</span> outlier_indices:
        <span class="hljs-keyword">if</span> idx &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> idx &lt; <span class="hljs-built_in">len</span>(temp_data) - <span class="hljs-number">1</span>:
            temp_data_clean[idx] = (temp_data[idx-<span class="hljs-number">1</span>] + temp_data[idx+<span class="hljs-number">1</span>]) / <span class="hljs-number">2</span>
    
    <span class="hljs-keyword">return</span> temp_data_clean
</code></pre>
<hr/>
<h2 data-id="heading-30">å…­ã€æ€»ç»“ä¸å±•æœ›</h2>
<h3 data-id="heading-31">6.1 æ ¸å¿ƒåˆ›æ–°ç‚¹</h3>
<ol>
<li>
<p><strong>å¤šæ¨¡å¼è”åˆæ£€æµ‹</strong></p>
<ul>
<li>6ç§æ¸©åº¦æ¨¡å¼å…¨è¦†ç›–</li>
<li>å‘¨æœŸæ€§+éå‘¨æœŸæ€§åŒé‡æ£€æµ‹</li>
</ul>
</li>
<li>
<p><strong>è‡ªé€‚åº”é˜ˆå€¼ä¼˜åŒ–</strong></p>
<ul>
<li>åœ¨çº¿å­¦ä¹ æœºåˆ¶</li>
<li>æ ¹æ®ç”¨æˆ·åé¦ˆè‡ªåŠ¨è°ƒæ•´</li>
</ul>
</li>
<li>
<p><strong>å·¥ç¨‹åŒ–è®¾è®¡</strong></p>
<ul>
<li>å¤šé€šé“å¹¶è¡Œå¤„ç†</li>
<li>å®Œå–„çš„å¼‚å¸¸å¤„ç†</li>
<li>æ ‡å‡†åŒ–Label Studioæ¥å£</li>
</ul>
</li>
</ol>
<h3 data-id="heading-32">6.2 åº”ç”¨åœºæ™¯æ€»ç»“</h3>






























<table><thead><tr><th>é¢†åŸŸ</th><th>å…¸å‹åº”ç”¨</th><th>æ ¸å¿ƒä»·å€¼</th></tr></thead><tbody><tr><td>ç­‰ç¦»å­ä½“ç‰©ç†</td><td>æ”¾ç”µæ•°æ®åˆ†æ</td><td>åŠ é€Ÿç§‘ç ”è¿­ä»£</td></tr><tr><td>ææ–™ç§‘å­¦</td><td>çƒ­å¤„ç†å·¥è‰º</td><td>å·¥è‰ºæ ‡å‡†åŒ–</td></tr><tr><td>åŒ–å­¦å·¥ç¨‹</td><td>ååº”è¿‡ç¨‹ç›‘æ§</td><td>å¼‚å¸¸é¢„è­¦</td></tr><tr><td>èƒ½æº</td><td>ååº”å †æ¸©åº¦ç›‘æ§</td><td>å®‰å…¨ä¿éšœ</td></tr></tbody></table>
<h3 data-id="heading-33">6.3 æœªæ¥å‘å±•æ–¹å‘</h3>
<h4 data-id="heading-34">æ–¹å‘1:æ·±åº¦å­¦ä¹ æ¨¡å‹</h4>
<p><strong>æ€è·¯</strong>:ç”¨LSTM/Transformerå­¦ä¹ æ¸©åº¦æ—¶åºæ¨¡å¼</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TemperatureLSTM</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.lstm = nn.LSTM(input_size=<span class="hljs-number">1</span>, hidden_size=<span class="hljs-number">64</span>, num_layers=<span class="hljs-number">2</span>)
        self.classifier = nn.Linear(<span class="hljs-number">64</span>, <span class="hljs-number">6</span>)  <span class="hljs-comment"># 6ç§æ¨¡å¼åˆ†ç±»</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, temp_sequence</span>):
        <span class="hljs-comment"># è¾“å…¥:[batch, seq_len, 1]</span>
        <span class="hljs-comment"># è¾“å‡º:[batch, 6] æ¯ç§æ¨¡å¼çš„æ¦‚ç‡</span>
        ...
</code></pre>
<p><strong>ä¼˜åŠ¿</strong>:</p>
<ul>
<li>è‡ªåŠ¨å­¦ä¹ ç‰¹å¾,æ— éœ€æ‰‹å·¥è®¾è®¡é˜ˆå€¼</li>
<li>æ•è·é•¿æœŸä¾èµ–å…³ç³»</li>
</ul>
<h4 data-id="heading-35">æ–¹å‘2:å¤šç‰©ç†é‡èåˆ</h4>
<p><strong>æ€è·¯</strong>:ç»“åˆæ¸©åº¦+å¯†åº¦+ç£åœºå¤šç§ä¿¡å·</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MultiPhysicsPredictor</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, temperature, density, magnetic_field</span>):
        <span class="hljs-comment"># èåˆå¤šç§ç‰©ç†é‡,ç»¼åˆåˆ¤æ–­</span>
        ...
</code></pre>
<p><strong>ä»·å€¼</strong>:</p>
<ul>
<li>æ›´å‡†ç¡®çš„äº‹ä»¶æ£€æµ‹</li>
<li>ç†è§£ç‰©ç†æœºåˆ¶çš„å…³è”</li>
</ul>
<h4 data-id="heading-36">æ–¹å‘3:å®æ—¶é¢„æµ‹</h4>
<p><strong>æ€è·¯</strong>:æµå¼å¤„ç†,è¾¹é‡‡é›†è¾¹é¢„æµ‹</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">StreamingPredictor</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.buffer = []
        
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">on_new_data</span>(<span class="hljs-params">self, new_point</span>):
        self.buffer.append(new_point)
        
        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(self.buffer) &gt;= window_size:
            prediction = self.predict(self.buffer)
            self.emit_prediction(prediction)
</code></pre>
<p><strong>åº”ç”¨</strong>:</p>
<ul>
<li>å®æ—¶å®éªŒç›‘æ§</li>
<li>å¼‚å¸¸å³æ—¶é¢„è­¦</li>
</ul>
<hr/>
<h2 data-id="heading-37">é™„å½•:å¿«é€Ÿä¸Šæ‰‹</h2>
<h3 data-id="heading-38">1. æ•°æ®æ ¼å¼è¦æ±‚</h3>
<pre><code class="hljs language-csv" lang="csv">time, Te1, Te2, Ti1, Ti2
0.001, 500, 480, 450, 430
0.002, 850, 820, 780, 750
0.003, 1200, 1150, 1100, 1050
...
</code></pre>
<p><strong>è¦æ±‚</strong>:</p>
<ul>
<li>å¿…é¡»åŒ…å«<code>time</code>åˆ—</li>
<li>æ¸©åº¦åˆ—ååŒ…å«<code>te/ti/temp/temperature</code>å…³é”®å­—</li>
<li>æ—¶é—´å•ä½:æ¯«ç§’(ms)</li>
</ul>
<h3 data-id="heading-39">2. Label Studioé…ç½®</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">View</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">TimeSeries</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"ts"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"$csv"</span> <span class="hljs-attr">valueType</span>=<span class="hljs-string">"url"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Channel</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"Te1"</span> <span class="hljs-attr">strokeColor</span>=<span class="hljs-string">"#1f77b4"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Channel</span> <span class="hljs-attr">column</span>=<span class="hljs-string">"Te2"</span> <span class="hljs-attr">strokeColor</span>=<span class="hljs-string">"#ff7f0e"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">TimeSeries</span>&gt;</span>
  
  <span class="hljs-tag">&lt;<span class="hljs-name">TimeSeriesLabels</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"temperature_events"</span> <span class="hljs-attr">toName</span>=<span class="hljs-string">"ts"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ä¸Šå‡é˜¶æ®µ"</span> <span class="hljs-attr">background</span>=<span class="hljs-string">"#4CAF50"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å³°å€¼æ—¶åˆ»"</span> <span class="hljs-attr">background</span>=<span class="hljs-string">"#FF5722"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"ä¸‹é™é˜¶æ®µ"</span> <span class="hljs-attr">background</span>=<span class="hljs-string">"#2196F3"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"æŒç»­é«˜æ¸©"</span> <span class="hljs-attr">background</span>=<span class="hljs-string">"#FF9800"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">Label</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"å¹³å°æœŸ"</span> <span class="hljs-attr">background</span>=<span class="hljs-string">"#9C27B0"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">TimeSeriesLabels</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">View</span>&gt;</span>
</code></pre>
<h3 data-id="heading-40">3. æµ‹è¯•é¢„æµ‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å¯åŠ¨æœåŠ¡</span>
python _wsgi.py

<span class="hljs-comment"># æµ‹è¯•API</span>
curl -X POST http://localhost:9090/predict \
  -H <span class="hljs-string">"Content-Type: application/json"</span> \
  -d <span class="hljs-string">'{
    "tasks": [{
      "data": {
        "shot": 12345,
        "csv": "http://example.com/shot_12345.csv"
      }
    }]
  }'</span>
</code></pre>
<hr/>
<p><strong>æ€»ç»“</strong>:æ¸©åº¦æ ‡æ³¨ML Backendå°†<strong>å¤æ‚çš„æ¸©åº¦æ—¶åºåˆ†æ</strong>è½¬åŒ–ä¸º<strong>è‡ªåŠ¨åŒ–æ™ºèƒ½æ ‡æ³¨</strong>,é€šè¿‡6ç§æ¨¡å¼è¯†åˆ«ç®—æ³•(ä¸Šå‡ã€å³°å€¼ã€ä¸‹é™ã€å¼‚å¸¸ã€å¹³å°ã€éå‘¨æœŸæ€§),å…¨é¢è¦†ç›–æ¸©åº¦æ›²çº¿ç‰¹å¾ã€‚ç‰¹åˆ«æ˜¯åˆ›æ–°æ€§çš„<strong>éå‘¨æœŸæ€§æ£€æµ‹</strong>,å¡«è¡¥äº†ä¼ ç»Ÿå‘¨æœŸæ€§æ£€æµ‹çš„ç›²åŒº,èƒ½å¤Ÿå‘ç°æŒç»­é«˜æ¸©ã€å¼‚å¸¸å¹³å°ç­‰é‡è¦ç‰©ç†ç°è±¡,ä¸ºç­‰ç¦»å­ä½“ç‰©ç†ã€ææ–™ç§‘å­¦ç­‰é¢†åŸŸçš„ç§‘ç ”å·¥ä½œæä¾›äº†<strong>é«˜æ•ˆã€æ ‡å‡†åŒ–ã€æ™ºèƒ½åŒ–</strong>çš„æ•°æ®åˆ†æå·¥å…·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uni-app ä¸Šæ¶åˆ° App Store çš„é¡¹ç›®æµç¨‹ï¼Œæ„å»ºã€æ‰“åŒ…ä¸ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰ä¸Šä¼ ]]></title>    <link>https://juejin.cn/post/7578693994368794624</link>    <guid>https://juejin.cn/post/7578693994368794624</guid>    <pubDate>2025-12-01T09:35:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578693994368794624" data-draft-id="7578820431017508879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uni-app ä¸Šæ¶åˆ° App Store çš„é¡¹ç›®æµç¨‹ï¼Œæ„å»ºã€æ‰“åŒ…ä¸ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰ä¸Šä¼ "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:35:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="bcbnb"/> <meta itemprop="url" content="https://juejin.cn/user/895474073078377"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uni-app ä¸Šæ¶åˆ° App Store çš„é¡¹ç›®æµç¨‹ï¼Œæ„å»ºã€æ‰“åŒ…ä¸ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰ä¸Šä¼ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/895474073078377/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    bcbnb
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:35:14.000Z" title="Mon Dec 01 2025 09:35:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è·¨ç«¯é¡¹ç›®ä¸­ï¼Œuni-app æä¾›äº†æé«˜çš„å¼€å‘æ•ˆç‡ï¼Œä½†å½“åº”ç”¨æœ€ç»ˆè¦ä¸Šæ¶åˆ° App Store æ—¶ï¼Œå›¢é˜Ÿä¼šçªç„¶é¢å¯¹å¦ä¸€ç§â€œç”Ÿæ€å·®å¼‚â€ï¼šiOS å®¡æ ¸çš„ä¸¥æ ¼ã€è¯ä¹¦ä½“ç³»çš„å°é—­ã€æ„å»ºå¹³å°çš„å¤šæ ·åŒ–ï¼Œä»¥åŠè·¨ç«¯é¡¹ç›®æœ¬èº«çš„ç»“æ„ç‰¹ç‚¹ã€‚</p>
<p>ä¸€æ¬¾åŸºäº uni-app çš„ç§»åŠ¨åº”ç”¨ï¼Œä»å¼€å‘åˆ°ä¸Šæ¶çš„è¿‡ç¨‹ï¼Œå¾€å¾€ä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œè€Œæ›´åƒæ˜¯ä¸€ç»„ç”±ä¸åŒè§’è‰²å…±åŒå®Œæˆçš„é“¾è·¯ã€‚æœ¬æ–‡ä»¥ä¸€æ¬¡çœŸå®é¡¹ç›®çš„åä½œæ–¹å¼ä¸ºè“æœ¬ï¼Œæ•´ç†å‡ºä¸€æ¡å¯è½åœ°çš„â€œuni-app ä¸Šæ¶å·¥ä½œæµâ€ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€uni-app é¡¹ç›®ä¸Šæ¶çš„éš¾ç‚¹ä¸åœ¨ä»£ç ï¼Œè€Œåœ¨â€œäº¤ä»˜é“¾è·¯â€</strong></h2>
<p>uni-app åœ¨å¼€å‘é˜¶æ®µå‡ ä¹ä¸ä¼šå¸¦æ¥é¢å¤–è´Ÿæ‹…ï¼Œæ¡†æ¶æœ¬èº«è½»é‡ã€æ„å»ºå¿«ã€è·¨ç«¯ä¸€è‡´æ€§é«˜ã€‚
ä½†ä¸€åˆ°ä¸Šæ¶é˜¶æ®µï¼Œå›¢é˜Ÿä¼šæ˜æ˜¾æ„Ÿå—åˆ°ï¼š</p>
<ul>
<li><strong>iOS è¦æ±‚ä¸¥æ ¼ç¨‹åº¦è¿œè¶… Android</strong></li>
<li><strong>å®¡æ ¸æµç¨‹æ›´å¼ºè°ƒäº§å“ä½“éªŒä¸éšç§åˆè§„</strong></li>
<li><strong>è¯ä¹¦ä½“ç³»éœ€è¦å›¢é˜Ÿåä½œ</strong></li>
<li><strong>æ„å»ºç¯å¢ƒé€šå¸¸è·¨å¹³å°ï¼ˆWindowsã€Macã€CIï¼‰</strong></li>
<li><strong>ä¸Šä¼ å·¥å…·éœ€è¦é€‚é…å›¢é˜Ÿæ“ä½œç³»ç»Ÿå·®å¼‚</strong></li>
</ul>
<p>è¿™æ„å‘³ç€â€”â€”
<strong>uni-app ä»£ç ç®€å•ï¼Œä½†ä¸Šæ¶æµç¨‹ä¸ä¸€å®šç®€å•ã€‚</strong></p>
<p>å› æ­¤æˆ‘ä»¬å¿…é¡»ä»å›¢é˜Ÿåä½œè§’åº¦æ¥ç†è§£ä¸Šæ¶ï¼Œè€Œä¸æ˜¯ä»æŠ€æœ¯æ¡†æ¶æœ¬èº«å‡ºå‘ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€æ„å»ºé˜¶æ®µçš„ä¸¤æ¡è·¯å¾„ï¼šæœ¬åœ° Xcode ä¸ HBuilderX äº‘æ‰“åŒ…</strong></h2>
<p>å›¢é˜Ÿä¸€èˆ¬æœ‰ä¸¤ç±»æ„å»ºæ–¹å¼ï¼š</p>
<hr/>
<h3 data-id="heading-2"><strong>1. çº¯æœ¬åœ°æ„å»ºï¼šå¯¼å‡º Xcode å·¥ç¨‹ï¼ˆé€‚åˆæœ‰ iOS ç ”å‘çš„å›¢é˜Ÿï¼‰</strong></h3>
<p>æµç¨‹ï¼š</p>
<ul>
<li>HBuilderX â†’ å¯¼å‡º iOS åŸç”Ÿå·¥ç¨‹</li>
<li>è¿›å…¥ macOSï¼Œä½¿ç”¨ Xcode Archive</li>
<li>åº”ç”¨åŸç”Ÿæ’ä»¶ã€è¯ä¹¦ã€æè¿°æ–‡ä»¶</li>
<li>å¯¼å‡º IPA</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>çµæ´»ï¼Œå¯å¼•å…¥åŸç”Ÿèƒ½åŠ›</li>
<li>é€‚åˆå¤æ‚é¡¹ç›®</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>å¿…é¡»æœ‰ Mac</li>
<li>æ„å»ºä¾èµ–è¾ƒé‡</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>2. äº‘æ‰“åŒ…ï¼šHBuilderX å®˜æ–¹äº‘ç¼–è¯‘ï¼ˆå¤šæ•°å›¢é˜Ÿä½¿ç”¨ï¼‰</strong></h3>
<p>æµç¨‹ï¼š</p>
<ul>
<li>ç›´æ¥ä¸Šä¼ é¡¹ç›®</li>
<li>äº‘ç«¯è‡ªåŠ¨å®Œæˆæ„å»º</li>
<li>è¾“å‡º IPA æˆ– Xcode å·¥ç¨‹åŒ…</li>
</ul>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>ä¸éœ€è¦ Mac æˆ– Xcode</li>
<li>é€‚åˆ Windows / Linux å›¢é˜Ÿ</li>
<li>å¿«é€Ÿã€é«˜ç¨³å®šæ€§</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>åŸç”Ÿèƒ½åŠ›éœ€è¦æ’ä»¶æ”¯æŒ</li>
<li>å®šåˆ¶åŒ–ç©ºé—´ä¸å¦‚æœ¬åœ°æ„å»º</li>
</ul>
<p>å¤§å¤šæ•° uni-app å›¢é˜Ÿæœ€ç»ˆä¼šé€‰æ‹©â€œäº‘æ‰“åŒ… + å¤–éƒ¨ä¸Šä¼ â€è¿™ä¸€ç»„åˆæ¨¡å¼ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed0d822537894568b13ac6ac6e4e2d61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186514&amp;x-signature=aH01Z%2FFB1gbUanaYaRIsUJ5SBFg%3D" alt="hbæ‰“åŒ…" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4"><strong>ä¸‰ã€è¯ä¹¦ç®¡ç†ï¼šuni-app ä¸Šæ¶ä¸åŸç”Ÿé¡¹ç›®å®Œå…¨ä¸€è‡´</strong></h2>
<p>è™½ç„¶é¡¹ç›®æ˜¯ uni-appï¼Œä½† iOS ç­¾åä½“ç³»æ˜¯ç»Ÿä¸€çš„ï¼š</p>
<ul>
<li>App Store å‘å¸ƒè¯ä¹¦</li>
<li>App Store æè¿°æ–‡ä»¶</li>
<li>Bundle ID</li>
<li>entitlements æƒé™å£°æ˜</li>
</ul>
<p>è®¸å¤šè·¨ç«¯å›¢é˜Ÿä¸»è¦ä½¿ç”¨ Windowsï¼Œå› æ­¤è¯ä¹¦ç®¡ç†ä¸å†ä¾èµ– Mac é’¥åŒ™ä¸²ï¼Œè€Œæ˜¯ä½¿ç”¨å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è¯ä¹¦ç”Ÿæˆæ–¹å¼ï¼Œä½¿è¯ä¹¦ä¸æè¿°æ–‡ä»¶å¯ä»¥åœ¨ä¸åŒæœºå™¨å…±äº«ï¼Œé¿å…ï¼š</p>
<ul>
<li>è¯ä¹¦æ•°é‡è¶…é™</li>
<li>é’¥åŒ™ä¸²å¯¼å‡ºå¤±è´¥</li>
<li>å¤šäººè¦†ç›– profile</li>
<li>CI æ— æ³•å¯¼å…¥ p12</li>
</ul>
<p>è¿™æ˜¯æ‰€æœ‰è·¨ç«¯å›¢é˜Ÿä¸Šæ¶ç»“æ„ä¸­æœ€å…³é”®çš„éƒ¨åˆ†ã€‚
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a626fe03285b4cbfac9bea9036afe4ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186514&amp;x-signature=KcCj4mY%2FwAeYyOlAHUBa5vPZoBY%3D" alt="è¯ä¹¦ç”Ÿæˆ" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-5"><strong>å››ã€IPA ä¸Šä¼ ï¼šuni-app å›¢é˜Ÿæœ€å®¹æ˜“â€œå¡ä½â€çš„ç¯èŠ‚</strong></h2>
<p>æ„å»ºå®Œæˆåï¼ŒIPA å¿…é¡»ä¸Šä¼ åˆ° App Store Connectã€‚
è¿™ä¸€éƒ¨åˆ†æœ€å¸¸å‡ºç°å·®å¼‚ï¼Œå› ä¸ºä¸åŒæˆå‘˜çš„æ“ä½œç³»ç»Ÿä¸åŒï¼š</p>
<hr/>
<h3 data-id="heading-6"><strong>1. macOS ç”¨æˆ·ï¼šTransporter + Xcode Organizer</strong></h3>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>å®˜æ–¹ã€ç¨³å®š</li>
<li>UI æ“ä½œæ–¹ä¾¿</li>
<li>é€‚åˆäº§å“æˆ–è¿è¥äººå‘˜æäº¤</li>
</ul>
<p>ç¼ºç‚¹ï¼š
å¿…é¡»ä½¿ç”¨ Macã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. Windows / Linux ç”¨æˆ·ï¼šå¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°å‘½ä»¤è¡Œä¸Šä¼ å·¥å…·</strong></h3>
<p>åœ¨è·¨ç«¯å›¢é˜Ÿä¸­éå¸¸å¸¸è§ï¼Œå› ä¸ºï¼š</p>
<ul>
<li>å¤šæ•°æˆå‘˜æ²¡æœ‰ Mac</li>
<li>CI/CD åœ¨ Linux/Windows ä¸Šè¿è¡Œ</li>
<li>éœ€è¦è‡ªåŠ¨åŒ–ä¸Šä¼ åˆ° TestFlight</li>
<li>éœ€è¦è·¨è§’è‰²å¿«é€Ÿæ¨é€ç‰ˆæœ¬</li>
</ul>
<p>ä½¿ç”¨æ–¹å¼ç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">appuploader_cli \
  -u ios@team.com \
  -p xxx-xxx-xxx-xxx \
  -c 2 \
  -f uniapp_build/app.ipa
</code></pre>
<p>é€šè¿‡å‘½ä»¤è¡Œä¸Šä¼ ï¼Œå¯ä»¥å®Œå…¨ç»•è¿‡â€œå¿…é¡»è¦æœ‰ Macâ€çš„é™åˆ¶ï¼Œè¿™å¯¹ Windows å›¢é˜Ÿæ„ä¹‰éå¸¸å¤§ã€‚</p>
<p>å›¾å½¢åŒ–ç•Œé¢ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/388f4a9699f74b949ca71df4f9ed01bb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYmNibmI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1765186514&amp;x-signature=fkpZdlAtPn%2F4EUE4OTeoaj6NyBA%3D" alt="IPAä¸Šä¼ " loading="lazy"/></p>
<hr/>
<h2 data-id="heading-8"><strong>äº”ã€App Store Connect é…ç½®ï¼šuni-app é¡¹ç›®æœ€è€—æ—¶é—´çš„æ­¥éª¤</strong></h2>
<p>ä¸Šä¼ å®Œæˆåï¼Œè¿è¥ä¸äº§å“é€šå¸¸éœ€è¦å¡«å†™ä»¥ä¸‹å†…å®¹ï¼š</p>
<ul>
<li>åº”ç”¨æˆªå›¾ï¼ˆå¿…é¡»çœŸå®ï¼Œè€Œéæ¨¡å‹å›¾ï¼‰</li>
<li>åŠŸèƒ½æè¿°</li>
<li>éšç§æ ‡ç­¾</li>
<li>å®¡æ ¸è¯´æ˜ï¼ˆå«è´¦å·ã€è¿›å…¥è·¯å¾„ï¼‰</li>
<li>å…³é”®è¯</li>
<li>å¹´é¾„è¯„çº§</li>
<li>æ„å»ºé€‰æ‹©</li>
</ul>
<p>è¿™äº›å†…å®¹ä¸ uni-app å…³ç³»ä¸å¤§ï¼Œä½†ä¼šç›´æ¥å½±å“å®¡æ ¸é€Ÿåº¦ã€‚</p>
<p>ç‰¹åˆ«è¦æ³¨æ„ï¼š</p>
<p><strong>æˆªå›¾å¿…é¡»æ¥è‡ªå®é™…åº”ç”¨ï¼Œä¸è¦ç”¨æ¨¡æ¿æˆ–éå®é™…ç•Œé¢ã€‚</strong>
uni-app åº”ç”¨è¢«æ‹’ 4.2 çš„ä¸€ä¸ªå¸¸è§åŸå› å°±æ˜¯â€œæˆªå›¾ä¸å®é™…åº”ç”¨ä¸ä¸€è‡´â€ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>å…­ã€å®¡æ ¸é˜¶æ®µï¼šuni-app å›¢é˜Ÿå¸¸è§çš„æ‹’å®¡ç±»å‹</strong></h2>
<p>ç»“åˆå¤šæ¬¡é¡¹ç›®ç»éªŒï¼Œæ€»ç»“å‡º uni-app ä¸Šæ¶æœ€å¸¸å‡ºç°çš„ä¸‰ç±»æ‹’å®¡ï¼š</p>
<hr/>
<h3 data-id="heading-10"><strong>1. 2.1 åŠŸèƒ½ä¸å¯ç”¨</strong></h3>
<p>ä¸»è¦åŸå› ï¼š</p>
<ul>
<li>H5 è¯·æ±‚è¢«åŸŸåé™åˆ¶</li>
<li>åç«¯ç¯å¢ƒè¯¯å…³æœåŠ¡</li>
<li>å¿…é¡»ç™»å½•ä½†å®¡æ ¸è´¦å·æ— æƒé™</li>
</ul>
<hr/>
<h3 data-id="heading-11"><strong>2. 4.2 å†…å®¹ä¸åŸç”Ÿç»“æ„ä¸åŒ¹é…</strong></h3>
<p>å¦‚æœç•Œé¢è¿‡äºç½‘é¡µåŒ–ã€åŠ¨ç”»å’Œç»“æ„ä¸åƒåŸç”Ÿåº”ç”¨ï¼Œå¯èƒ½è§¦å‘ 4.2ï¼ˆæœ€ä½åŠŸèƒ½è¦æ±‚ï¼‰ã€‚</p>
<p>è§£å†³æ–¹å¼é€šå¸¸æ˜¯ï¼š</p>
<ul>
<li>æ·»åŠ åŸç”Ÿå¯¼èˆª</li>
<li>å¢å¼ºé¡µé¢ç»“æ„ä¸äº¤äº’</li>
<li>ä¿è¯ä¸»åŠŸèƒ½æ¸…æ™°å¯è¾¾</li>
</ul>
<hr/>
<h3 data-id="heading-12"><strong>3. 5.1.1 æƒé™è¯´æ˜ä¸å……åˆ†</strong></h3>
<p>å°¤å…¶æ˜¯ï¼š</p>
<ul>
<li>ç›¸å†Œ</li>
<li>ç›¸æœº</li>
<li>é€šè®¯å½•</li>
<li>å®šä½</li>
</ul>
<p>Info.plist æƒé™å¼¹çª—å¿…é¡»å…·ä½“è¯´æ˜ç”¨é€”ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>å›¢é˜Ÿåä½œç‰ˆ uni-app ä¸Šæ¶æµç¨‹</strong></h2>
<p>ä¸€ä¸ªæˆç†Ÿçš„ uni-app ä¸Šæ¶åä½œæµç¨‹é€šå¸¸å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">A: æ„å»ºï¼ˆCI æˆ–äº‘æ‰“åŒ…ï¼‰</span>
<span class="hljs-section">B: ç­¾åï¼ˆè¯ä¹¦ç»Ÿä¸€ç®¡ç†ï¼‰</span>
<span class="hljs-section">C: ä¸Šä¼ ï¼ˆæ ¹æ®ç³»ç»Ÿé€‰æ‹© Transporter / å¼€å¿ƒä¸Šæ¶Appuploaderï¼‰</span>
<span class="hljs-section">D: App Store Connect é…ç½®ï¼ˆè¿è¥ï¼‰</span>
<span class="hljs-section">E: å®¡æ ¸è¯´æ˜ + æäº¤å®¡æ ¸ï¼ˆäº§å“/è¿è¥ï¼‰</span>
<span class="hljs-section">F: å®¡æ ¸åé¦ˆå¤„ç†ï¼ˆå¼€å‘/åç«¯/æµ‹è¯•ï¼‰</span>
</code></pre>
<p>è¿™ç§åˆ†å·¥æ˜ç¡®çš„æ–¹å¼èƒ½æœ€å¤§åŒ–å‡å°‘ä¸å¿…è¦çš„æ²Ÿé€šæˆæœ¬ï¼Œä¹Ÿèƒ½è®©é¡¹ç›®åœ¨å¿«é€Ÿè¿­ä»£æ—¶ä¿æŒèŠ‚å¥ç¨³å®šã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- æŒ¯åŠ¨ç‰¹å¾å¤šæ ‡ç­¾åˆ†ç±»]]></title>    <link>https://juejin.cn/post/7578460753210851355</link>    <guid>https://juejin.cn/post/7578460753210851355</guid>    <pubDate>2025-12-01T09:35:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578460753210851355" data-draft-id="7578460753210818587" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- æŒ¯åŠ¨ç‰¹å¾å¤šæ ‡ç­¾åˆ†ç±»"/> <meta itemprop="keywords" content="ç®—æ³•"/> <meta itemprop="datePublished" content="2025-12-01T09:35:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¯­è½å¿ƒç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2875978147955741"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµ·é‡æ•°æ®é›†çš„AIè‡ªåŠ¨åŒ–é¢„æµ‹æ‰“æ ‡ -- æŒ¯åŠ¨ç‰¹å¾å¤šæ ‡ç­¾åˆ†ç±»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2875978147955741/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¯­è½å¿ƒç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:35:34.000Z" title="Mon Dec 01 2025 09:35:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æŒ¯åŠ¨ç‰¹å¾å¤šæ ‡ç­¾é¢„æµ‹: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FSTARTORUS%2Ftok-label%2Fpull%2F5" target="_blank" title="https://github.com/STARTORUS/tok-label/pull/5" ref="nofollow noopener noreferrer">github.com/STARTORUS/tâ€¦</a></p>
<h2 data-id="heading-0">æ¦‚è¿°:è®¾å¤‡å¥åº·çš„"æ™ºèƒ½åŒ»ç”Ÿ"</h2>
<p>åœ¨å·¥ä¸š4.0æ—¶ä»£,é¢„æµ‹æ€§ç»´æŠ¤(PHM - Prognostics and Health Management)æ­£åœ¨å–ä»£ä¼ ç»Ÿçš„"åäº†å†ä¿®"å’Œ"å®šæœŸç»´æŠ¤"æ¨¡å¼ã€‚æƒ³è±¡ä¸€ä¸‹,ä¸€å°è¿è½¬äº†5å¹´çš„å¤§å‹æ—‹è½¬è®¾å¤‡â€”â€”é£åŠ›å‘ç”µæœºã€æ°´æ³µã€å‹ç¼©æœºâ€”â€”å®ƒå°±åƒäººä½“ä¸€æ ·,ä¼šé€šè¿‡"æŒ¯åŠ¨"è¿™ç§"ç”Ÿå‘½ä½“å¾"è¡¨è¾¾è‡ªå·±çš„å¥åº·çŠ¶å†µã€‚</p>
<p><strong>æŒ¯åŠ¨PHM ML Backend</strong>å°±æ˜¯è®¾å¤‡çš„<strong>æ™ºèƒ½å¥åº·ç®¡å®¶</strong>,é€šè¿‡åˆ†ææŒ¯åŠ¨ä¿¡å·,è‡ªåŠ¨è¯†åˆ«è®¾å¤‡çš„è½¬é€Ÿæ°´å¹³ã€æ•…éšœç±»å‹å’Œå¥åº·è¯„åˆ†,å®ç°ä»"äº‹åç»´ä¿®"åˆ°"é¢„æµ‹æ€§ç»´æŠ¤"çš„è·¨è¶Šã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€ä¸šåŠ¡ä»·å€¼:Why - ä¸ºä»€ä¹ˆéœ€è¦æŒ¯åŠ¨æ™ºèƒ½è¯Šæ–­?</h2>
<h3 data-id="heading-2">1.1 å·¥ä¸šç—›ç‚¹</h3>
<p><strong>åœºæ™¯1:é£ç”µåœºè¿ç»´å›°å¢ƒ</strong> ğŸ’¨<br/>
æŸæµ·ä¸Šé£ç”µåœº,100å°é£åŠ›å‘ç”µæœº:</p>
<ul>
<li>æ¯å°ä»·å€¼5000ä¸‡å…ƒ</li>
<li>ä¸»è½´æ‰¿æ•…éšœå¯¼è‡´åœæœº,æŸå¤±50ä¸‡/å¤©</li>
<li>ä¼ ç»Ÿç»´æŠ¤:æ¯å¹´å®šæœŸæ£€ä¿®,æˆæœ¬é«˜æ˜‚</li>
<li><strong>é—®é¢˜</strong>:60%çš„è½´æ‰¿æ›´æ¢æ—¶è¿˜èƒ½ç»§ç»­ä½¿ç”¨(æµªè´¹),5%çš„æ•…éšœæœªèƒ½åŠæ—¶å‘ç°(åœäº§)</li>
</ul>
<p><strong>åœºæ™¯2:æ°´æ³µç«™çªå‘æ•…éšœ</strong> ğŸ’§<br/>
åŸå¸‚ä¾›æ°´æ³µç«™å…³é”®è®¾å¤‡:</p>
<ul>
<li>å‡Œæ™¨3ç‚¹çªå‘è½´æ‰¿æŸå</li>
<li>å…¨åŸåœæ°´12å°æ—¶</li>
<li>æŠ¢ä¿®è´¹ç”¨æ˜¯è®¡åˆ’ç»´æŠ¤çš„5å€</li>
<li><strong>å¦‚æœèƒ½æå‰1å‘¨é¢„è­¦,æŸå¤±å¯é¿å…95%</strong></li>
</ul>
<p><strong>åœºæ™¯3:å‹ç¼©æœºå¥åº·ç›‘æ§</strong> âš™ï¸<br/>
åŒ–å·¥å‚å¤§å‹å‹ç¼©æœº:</p>
<ul>
<li>æŒ¯åŠ¨å¼‚å¸¸å¯èƒ½å¯¼è‡´è¿é”æ•…éšœ</li>
<li>äººå·¥å·¡æ£€:æ¯å¤©2æ¬¡,æ— æ³•24å°æ—¶ç›‘æ§</li>
<li>ä¾èµ–è€å¸ˆå‚…ç»éªŒ,æ ‡å‡†ä¸ç»Ÿä¸€</li>
<li><strong>å¹´è½»å·¥äººéš¾ä»¥å¿«é€ŸæŒæ¡è¯Šæ–­æŠ€èƒ½</strong></li>
</ul>
<h3 data-id="heading-3">1.2 PHM ML Backendçš„æ ¸å¿ƒä»·å€¼</h3>
<p>é€šè¿‡<strong>æŒ¯åŠ¨ä¿¡å·æ™ºèƒ½åˆ†æ</strong>,å®ç°:</p>
<p>âœ… <strong>æ•…éšœé¢„è­¦</strong>:æå‰7-14å¤©é¢„æµ‹è½´æ‰¿/é½¿è½®æ•…éšœ<br/>
âœ… <strong>æˆæœ¬é™ä½40%</strong>:æŒ‰éœ€ç»´æŠ¤æ›¿ä»£å®šæœŸç»´æŠ¤<br/>
âœ… <strong>åœæœºæ—¶é—´å‡å°‘60%</strong>:è®¡åˆ’æ€§åœæœºæ›¿ä»£çªå‘æ•…éšœ<br/>
âœ… <strong>è®¾å¤‡å¯¿å‘½å»¶é•¿20%</strong>:åŠæ—¶ç»´æŠ¤é¿å…è¿é”æŸä¼¤</p>
<p><strong>ç»æµæ•ˆç›Šæµ‹ç®—</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">æŸåˆ¶é€ å‚æ¡ˆä¾‹:
<span class="hljs-bullet">-</span> å…³é”®è®¾å¤‡:50å°
<span class="hljs-bullet">-</span> éƒ¨ç½²PHMç³»ç»Ÿæˆæœ¬:200ä¸‡
<span class="hljs-bullet">-</span> å¹´æ”¶ç›Š:
<span class="hljs-bullet">  *</span> é¿å…çªå‘æ•…éšœ:300ä¸‡
<span class="hljs-bullet">  *</span> é™ä½ç»´æŠ¤æˆæœ¬:150ä¸‡
<span class="hljs-bullet">  *</span> å»¶é•¿è®¾å¤‡å¯¿å‘½:100ä¸‡
  åˆè®¡:550ä¸‡/å¹´
<span class="hljs-bullet">-</span> ROI:5ä¸ªæœˆå›æœ¬
</code></pre>
<hr/>
<h2 data-id="heading-4">äºŒã€ç³»ç»Ÿæ¶æ„:What - æŒ¯åŠ¨PHMæ˜¯ä»€ä¹ˆ?</h2>
<h3 data-id="heading-5">2.1 æ•´ä½“æ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    subgraph "æ•°æ®é‡‡é›†å±‚"
        A1[æŒ¯åŠ¨ä¼ æ„Ÿå™¨&lt;br/&gt;åŠ é€Ÿåº¦è®¡] --&gt; A2[æ•°æ®é‡‡é›†å¡&lt;br/&gt;1kHzé‡‡æ ·]
        A3[è½¬é€Ÿä¼ æ„Ÿå™¨&lt;br/&gt;RPM] --&gt; A2
        A2 --&gt; A4[æ—¶åºæ•°æ®åº“]
    end
    
    subgraph "Label Studioå‰ç«¯"
        B1[æ—¶åºæ ‡æ³¨ç•Œé¢] --&gt; B2[ä»»åŠ¡ç®¡ç†]
    end
    
    subgraph "ML Backendæ ¸å¿ƒ"
        C1[_wsgi.pyæœåŠ¡] --&gt; C2[VibrationPHMModel&lt;br/&gt;ä¸šåŠ¡ç¼–æ’]
        C2 --&gt; C3[VibrationPredictor&lt;br/&gt;å¤šæ ‡ç­¾é¢„æµ‹å™¨]
    end
    
    subgraph "ç®—æ³•å¼•æ“å±‚"
        D1[ç‰¹å¾æå–&lt;br/&gt;extract_features]
        D2[è½¬é€Ÿæ®µé¢„æµ‹&lt;br/&gt;predict_speed_segments]
        D3[æ•…éšœè¯Šæ–­&lt;br/&gt;predict_fault_type]
        D4[å¥åº·è¯„åˆ†&lt;br/&gt;predict_quality_score]
    end
    
    subgraph "ä¿¡å·å¤„ç†åº“"
        E1[æ—¶åŸŸç‰¹å¾&lt;br/&gt;RMS/å³°å€¼/å³°åº¦]
        E2[é¢‘åŸŸç‰¹å¾&lt;br/&gt;FFT/Welch PSD]
        E3[sklearn&lt;br/&gt;IsolationForest]
    end
    
    A4 --&gt; C2
    B2 --&gt;|HTTP API| C1
    C3 --&gt; D1
    C3 --&gt; D2
    C3 --&gt; D3
    C3 --&gt; D4
    
    D1 --&gt; E1
    D1 --&gt; E2
    D3 --&gt; E3
    
    style C3 fill:#4CAF50,color:#fff
    style D1 fill:#2196F3,color:#fff
    style D3 fill:#FF5722,color:#fff
</code></pre>
<h3 data-id="heading-6">2.2 æ ¸å¿ƒç»„ä»¶è¯¦è§£</h3>
<h4 data-id="heading-7">ğŸ¯ <strong>VibrationPHMModel</strong> - ä¸šåŠ¡åè°ƒå±‚</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VibrationPHMModel</span>(<span class="hljs-title class_ inherited__">LabelStudioMLBase</span>):
    <span class="hljs-string">"""æŒ¯åŠ¨æ•°æ®PHMé¢„æµ‹æ€§ç»´æŠ¤MLåç«¯æ¨¡å‹"""</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">setup</span>(<span class="hljs-params">self</span>):
        self.<span class="hljs-built_in">set</span>(<span class="hljs-string">"model_version"</span>, <span class="hljs-string">"vibration_phm_v1.0"</span>)
        self.predictor = VibrationPredictor()
        
        <span class="hljs-comment"># å¤šæ ‡ç­¾é…ç½®</span>
        self.label_groups = {
            <span class="hljs-string">'speed_level'</span>: [<span class="hljs-string">'ä½è½¬é€Ÿ'</span>, <span class="hljs-string">'ä¸­è½¬é€Ÿ'</span>, <span class="hljs-string">'é«˜è½¬é€Ÿ'</span>],
            <span class="hljs-string">'fault_type'</span>: [<span class="hljs-string">'æ­£å¸¸'</span>, <span class="hljs-string">'ä¸å¹³è¡¡'</span>, <span class="hljs-string">'è½´æ‰¿æ•…éšœ'</span>, <span class="hljs-string">'é½¿è½®æ•…éšœ'</span>],
            <span class="hljs-string">'quality_score'</span>: <span class="hljs-string">'number'</span>,  <span class="hljs-comment"># 0-100å¥åº·åˆ†æ•°</span>
            <span class="hljs-string">'confidence_level'</span>: <span class="hljs-string">'number'</span>  <span class="hljs-comment"># ç½®ä¿¡åº¦</span>
        }
</code></pre>
<p><strong>è®¾è®¡äº®ç‚¹</strong>:</p>
<ul>
<li><strong>å¤šæ ‡ç­¾è¾“å‡º</strong>:ä¸€æ¬¡é¢„æµ‹è¿”å›è½¬é€Ÿ/æ•…éšœ/å¥åº·åº¦å¤šä¸ªç»´åº¦</li>
<li><strong>åœ¨çº¿å­¦ä¹ </strong>:<code>fit()</code>æ–¹æ³•æ”¯æŒæ ‡æ³¨æ•°æ®åé¦ˆä¼˜åŒ–</li>
</ul>
<h4 data-id="heading-8">ğŸ§  <strong>VibrationPredictor</strong> - æ™ºèƒ½è¯Šæ–­å¼•æ“</h4>
<p>è¿™æ˜¯ç³»ç»Ÿçš„"è¯Šæ–­å¤§è„‘",å®ç°4ä¸ªæ ¸å¿ƒé¢„æµ‹åŠŸèƒ½:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VibrationPredictor</span>(<span class="hljs-title class_ inherited__">BasePredictor</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">predict</span>(<span class="hljs-params">self, task_data</span>):
        <span class="hljs-comment"># 1. æå–ç‰¹å¾(æ—¶åŸŸ+é¢‘åŸŸ)</span>
        features = self.extract_features(task_data)
        
        <span class="hljs-comment"># 2. è½¬é€Ÿæ®µé¢„æµ‹</span>
        speed_predictions = self.predict_speed_segments(task_data)
        
        <span class="hljs-comment"># 3. æ•…éšœç±»å‹è¯Šæ–­</span>
        fault_predictions = self.predict_fault_type(task_data, features)
        
        <span class="hljs-comment"># 4. å¥åº·è´¨é‡è¯„åˆ†</span>
        quality_prediction = self.predict_quality_score(features)
        
        <span class="hljs-keyword">return</span> speed_predictions + fault_predictions + [quality_prediction]
</code></pre>
<hr/>
<h2 data-id="heading-9">ä¸‰ã€æŠ€æœ¯å®ç°:How - è¯Šæ–­ç®—æ³•æ·±åº¦å‰–æ</h2>
<h3 data-id="heading-10">3.1 ç‰¹å¾å·¥ç¨‹:ä»æŒ¯åŠ¨ä¿¡å·åˆ°è¯Šæ–­ç‰¹å¾</h3>
<p>æŒ¯åŠ¨ä¿¡å·æœ¬è´¨æ˜¯<strong>æ—¶åºæ•°æ®</strong>,éœ€è¦è½¬æ¢ä¸º<strong>æœºå™¨å¯ç†è§£çš„ç‰¹å¾å‘é‡</strong>ã€‚</p>
<h4 data-id="heading-11">3.1.1 æ—¶åŸŸç‰¹å¾</h4>
<p><strong>ç‰©ç†æ„ä¹‰</strong>:æè¿°æŒ¯åŠ¨å¹…å€¼çš„ç»Ÿè®¡ç‰¹æ€§</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_time_domain_features</span>(<span class="hljs-params">self, vibration_signal</span>):
    <span class="hljs-string">"""
    æ—¶åŸŸç‰¹å¾æå–
    """</span>
    features = {}
    
    <span class="hljs-comment"># 1. RMSå‡æ–¹æ ¹å€¼ - æŒ¯åŠ¨èƒ½é‡</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:è¡¨ç¤ºæŒ¯åŠ¨å¼ºåº¦çš„æœ‰æ•ˆå€¼</span>
    <span class="hljs-comment"># åº”ç”¨:åˆ¤æ–­æŒ¯åŠ¨æ˜¯å¦è¶…æ ‡</span>
    features[<span class="hljs-string">'rms'</span>] = np.sqrt(np.mean(vibration_signal**<span class="hljs-number">2</span>))
    
    <span class="hljs-comment"># 2. å³°å€¼ - æœ€å¤§æŒ¯å¹…</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:æœ€ä¸¥é‡çš„å†²å‡»ç¨‹åº¦</span>
    <span class="hljs-comment"># åº”ç”¨:æ£€æµ‹çªå‘å†²å‡»(å¦‚è½´æ‰¿ç ´æŸ)</span>
    features[<span class="hljs-string">'peak'</span>] = np.<span class="hljs-built_in">max</span>(np.<span class="hljs-built_in">abs</span>(vibration_signal))
    
    <span class="hljs-comment"># 3. å³°å€¼å› å­ = å³°å€¼/RMS</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:å†²å‡»æ€§æŒ‡æ ‡</span>
    <span class="hljs-comment"># æ­£å¸¸å€¼:3-4, å¼‚å¸¸å€¼:&gt;5(æœ‰å†²å‡»)</span>
    features[<span class="hljs-string">'crest_factor'</span>] = features[<span class="hljs-string">'peak'</span>] / <span class="hljs-built_in">max</span>(features[<span class="hljs-string">'rms'</span>], <span class="hljs-number">1e-6</span>)
    
    <span class="hljs-comment"># 4. å³°åº¦(Kurtosis) - åˆ†å¸ƒå½¢æ€</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:æè¿°æŒ¯åŠ¨åˆ†å¸ƒçš„"å°–é”åº¦"</span>
    <span class="hljs-comment"># æ­£å¸¸å€¼:3(é«˜æ–¯åˆ†å¸ƒ), å¼‚å¸¸å€¼:&gt;4(æœ‰å†²å‡»)</span>
    features[<span class="hljs-string">'kurtosis'</span>] = stats.kurtosis(vibration_signal)
    
    <span class="hljs-comment"># 5. ååº¦(Skewness) - åˆ†å¸ƒå¯¹ç§°æ€§</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:æŒ¯åŠ¨åˆ†å¸ƒçš„åæ–œç¨‹åº¦</span>
    <span class="hljs-comment"># æ­£å¸¸å€¼:æ¥è¿‘0, å¼‚å¸¸å€¼:æ˜æ˜¾åç¦»0</span>
    features[<span class="hljs-string">'skewness'</span>] = stats.skew(vibration_signal)
    
    <span class="hljs-keyword">return</span> features
</code></pre>
<p><strong>ç‰¹å¾ä¸æ•…éšœçš„å…³ç³»</strong>:</p>

































<table><thead><tr><th>ç‰¹å¾</th><th>æ­£å¸¸å€¼</th><th>è½´æ‰¿æ•…éšœ</th><th>ä¸å¹³è¡¡</th><th>é½¿è½®æ•…éšœ</th></tr></thead><tbody><tr><td>RMS</td><td>&lt;2.0</td><td>2-4(å¢å¤§)</td><td>2-3(ä¸­ç­‰)</td><td>2-5(å˜åŒ–å¤§)</td></tr><tr><td>å³°å€¼å› å­</td><td>3-4</td><td>5-8(å†²å‡»)</td><td>3-4(æ­£å¸¸)</td><td>4-6(å‘¨æœŸå†²å‡»)</td></tr><tr><td>å³°åº¦</td><td>3</td><td>5-10(å°–å³°)</td><td>3(æ­£å¸¸)</td><td>4-6(å‘¨æœŸæ€§)</td></tr></tbody></table>
<h4 data-id="heading-12">3.1.2 é¢‘åŸŸç‰¹å¾</h4>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>:ä¸åŒæ•…éšœåœ¨é¢‘è°±ä¸Šæœ‰ç‰¹å®š"æŒ‡çº¹"</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">extract_frequency_domain_features</span>(<span class="hljs-params">self, vibration_signal, fs=<span class="hljs-number">1000</span></span>):
    <span class="hljs-string">"""
    é¢‘åŸŸç‰¹å¾æå– - ä½¿ç”¨Welchæ–¹æ³•è®¡ç®—åŠŸç‡è°±å¯†åº¦
    """</span>
    <span class="hljs-comment"># 1. è®¡ç®—åŠŸç‡è°±å¯†åº¦(PSD)</span>
    <span class="hljs-comment"># Welchæ–¹æ³•:åˆ†æ®µFFTå–å¹³å‡,é™ä½å™ªå£°</span>
    freqs, psd = signal.welch(vibration_signal, fs=fs, nperseg=<span class="hljs-number">1024</span>)
    
    <span class="hljs-comment"># 2. ä¸»é¢‘ - èƒ½é‡æœ€å¤§çš„é¢‘ç‡</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:æ—‹è½¬é¢‘ç‡æˆ–å…¶å€é¢‘</span>
    <span class="hljs-comment"># åº”ç”¨:åˆ¤æ–­æ•…éšœç‰¹å¾é¢‘ç‡</span>
    features[<span class="hljs-string">'dominant_freq'</span>] = freqs[np.argmax(psd)]
    
    <span class="hljs-comment"># 3. é¢‘è°±è´¨å¿ƒ - é¢‘ç‡çš„"é‡å¿ƒ"</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:é¢‘ç‡åˆ†å¸ƒä¸­å¿ƒ</span>
    <span class="hljs-comment"># åº”ç”¨:é«˜é¢‘æ•…éšœ(è½´æ‰¿)ä¼šä½¿è´¨å¿ƒä¸Šç§»</span>
    features[<span class="hljs-string">'spectral_centroid'</span>] = np.<span class="hljs-built_in">sum</span>(freqs * psd) / np.<span class="hljs-built_in">sum</span>(psd)
    
    <span class="hljs-comment"># 4. é¢‘è°±æ»šé™ - 85%èƒ½é‡å¯¹åº”çš„é¢‘ç‡</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:é«˜é¢‘èƒ½é‡å æ¯”</span>
    <span class="hljs-comment"># åº”ç”¨:æ£€æµ‹é«˜é¢‘å¼‚å¸¸</span>
    cumsum_psd = np.cumsum(psd)
    rolloff_idx = np.where(cumsum_psd &gt;= <span class="hljs-number">0.85</span> * cumsum_psd[-<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]
    features[<span class="hljs-string">'spectral_rolloff'</span>] = freqs[rolloff_idx]
    
    <span class="hljs-comment"># 5. é¢‘è°±å¸¦å®½ - é¢‘ç‡åˆ†å¸ƒçš„ç¦»æ•£ç¨‹åº¦</span>
    <span class="hljs-comment"># ç‰©ç†æ„ä¹‰:é¢‘è°±å¤æ‚åº¦</span>
    <span class="hljs-comment"># åº”ç”¨:å¤æ‚æ•…éšœé¢‘è°±å¸¦å®½å¤§</span>
    features[<span class="hljs-string">'spectral_bandwidth'</span>] = np.sqrt(
        np.<span class="hljs-built_in">sum</span>(((freqs - features[<span class="hljs-string">'spectral_centroid'</span>])**<span class="hljs-number">2</span>) * psd) / np.<span class="hljs-built_in">sum</span>(psd)
    )
    
    <span class="hljs-keyword">return</span> features
</code></pre>
<p><strong>é¢‘åŸŸæ•…éšœè¯Šæ–­çŸ¥è¯†</strong>:</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">æ­£å¸¸è®¾å¤‡é¢‘è°±:</span>
  PSD
   â–²
   â”‚    â—(è½¬é€Ÿé¢‘ç‡)
   â”‚    â”‚
   â”‚â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Freq
   0   10Hz  ...  1kHz

<span class="hljs-section">è½´æ‰¿æ•…éšœé¢‘è°±:</span>
  PSD
   â–²    â—(è½¬é€Ÿ)
   â”‚    â”‚  â— â— â—(é«˜é¢‘è°æ³¢,è½´æ‰¿ç‰¹å¾é¢‘ç‡)
   â”‚    â”‚ â”‚â”‚ â”‚
   â”‚â”€â”€â”€â”€â”´â”€â”´â”´â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â–º Freq
   0   10Hz  500Hz 1kHz

<span class="hljs-section">ä¸å¹³è¡¡æ•…éšœé¢‘è°±:</span>
  PSD
   â–²
   â”‚    â—â—â—(è½¬é€Ÿé¢‘ç‡åŠå…¶2x,3xå€é¢‘)
   â”‚    â”‚â”‚â”‚
   â”‚â”€â”€â”€â”€â”´â”´â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Freq
   0   10Hz 20Hz 30Hz
</code></pre>
<h3 data-id="heading-13">3.2 è½¬é€Ÿæ®µæ™ºèƒ½åˆ†å‰²</h3>
<p><strong>ä¸šåŠ¡åœºæ™¯</strong>:è®¾å¤‡åœ¨ä¸åŒè½¬é€Ÿä¸‹è¿è¡Œ,éœ€è¦è‡ªåŠ¨åˆ†æ®µæ ‡æ³¨</p>
<h4 data-id="heading-14">ç®—æ³•åŸç†</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_speed_segments</span>(<span class="hljs-params">self, data</span>):
    <span class="hljs-string">"""
    æ»‘åŠ¨çª—å£è½¬é€Ÿåˆ†æ®µç®—æ³•
    
    æ€è·¯:
    1. ç”¨æ»‘åŠ¨çª—å£ç»Ÿè®¡æ¯æ®µå¹³å‡è½¬é€Ÿ
    2. æ ¹æ®è½¬é€Ÿé˜ˆå€¼åˆ†ç±»(ä½/ä¸­/é«˜)
    3. æ£€æµ‹è½¬é€Ÿåˆ‡æ¢ç‚¹,ç”Ÿæˆæ—¶é—´æ®µæ ‡æ³¨
    """</span>
    rpm_data = data[<span class="hljs-string">'rotation_speed'</span>]
    time = data[<span class="hljs-string">'time'</span>]
    
    predictions = []
    window_size = <span class="hljs-number">1000</span>  <span class="hljs-comment"># 1ç§’çª—å£</span>
    step_size = <span class="hljs-number">500</span>     <span class="hljs-comment"># 0.5ç§’æ­¥é•¿(50%é‡å )</span>
    
    current_speed_label = <span class="hljs-literal">None</span>
    segment_start = <span class="hljs-literal">None</span>
    
    <span class="hljs-comment"># æ»‘åŠ¨çª—å£å¤„ç†</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(rpm_data) - window_size, step_size):
        window_rpm = rpm_data[i:i+window_size]
        avg_rpm = np.mean(window_rpm)
        rpm_stability = <span class="hljs-number">1.0</span> - (np.std(window_rpm) / <span class="hljs-built_in">max</span>(avg_rpm, <span class="hljs-number">1</span>))
        
        <span class="hljs-comment"># è½¬é€Ÿåˆ†ç±»</span>
        <span class="hljs-keyword">if</span> avg_rpm &lt; <span class="hljs-number">800</span>:
            speed_label = <span class="hljs-string">'ä½è½¬é€Ÿ'</span>
        <span class="hljs-keyword">elif</span> avg_rpm &lt; <span class="hljs-number">1500</span>:
            speed_label = <span class="hljs-string">'ä¸­è½¬é€Ÿ'</span>
        <span class="hljs-keyword">else</span>:
            speed_label = <span class="hljs-string">'é«˜è½¬é€Ÿ'</span>
        
        <span class="hljs-comment"># æ£€æµ‹è½¬é€Ÿåˆ‡æ¢</span>
        <span class="hljs-keyword">if</span> speed_label != current_speed_label:
            <span class="hljs-keyword">if</span> current_speed_label <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
                <span class="hljs-comment"># ä¿å­˜ä¸Šä¸€æ®µ</span>
                predictions.append(TimeseriesSpan(
                    start=segment_start,
                    end=time[i],
                    label_choice=current_speed_label,
                    label_group=<span class="hljs-string">"speed_level"</span>
                ))
            
            <span class="hljs-comment"># å¼€å§‹æ–°æ®µ</span>
            current_speed_label = speed_label
            segment_start = time[i]
    
    <span class="hljs-comment"># ä¿å­˜æœ€åä¸€æ®µ</span>
    <span class="hljs-keyword">if</span> current_speed_label <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> <span class="hljs-literal">None</span>:
        predictions.append(TimeseriesSpan(
            start=segment_start,
            end=time[-<span class="hljs-number">1</span>],
            label_choice=current_speed_label,
            label_group=<span class="hljs-string">"speed_level"</span>
        ))
    
    <span class="hljs-keyword">return</span> predictions
</code></pre>
<p><strong>å¯è§†åŒ–ç¤ºä¾‹</strong>:</p>
<pre><code class="hljs language-sql" lang="sql">è½¬é€Ÿæ›²çº¿:
  RPM
  <span class="hljs-number">2000</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€ é«˜è½¬é€Ÿæ®µ
               â”‚         â”‚
  <span class="hljs-number">1500</span> â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€ é˜ˆå€¼
               â”‚         â”‚
  <span class="hljs-number">1000</span> â”€â”€â”€â”€â”   â”‚         â”‚
           â”‚   â”‚         â”‚      ä¸­è½¬é€Ÿæ®µ
   <span class="hljs-number">800</span> â”€â”€â”€â”€â”¼â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”€â”€â”€â”€ é˜ˆå€¼
           â”‚                   
   <span class="hljs-number">500</span> â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä½è½¬é€Ÿæ®µ
       â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â–º <span class="hljs-type">Time</span>
          t1  t2  t3  t4

é¢„æµ‹ç»“æœ:
  [
    TimeseriesSpan(<span class="hljs-keyword">start</span><span class="hljs-operator">=</span><span class="hljs-number">0</span>, <span class="hljs-keyword">end</span><span class="hljs-operator">=</span>t1, label<span class="hljs-operator">=</span><span class="hljs-string">'ä½è½¬é€Ÿ'</span>),
    TimeseriesSpan(<span class="hljs-keyword">start</span><span class="hljs-operator">=</span>t1, <span class="hljs-keyword">end</span><span class="hljs-operator">=</span>t2, label<span class="hljs-operator">=</span><span class="hljs-string">'ä¸­è½¬é€Ÿ'</span>),
    TimeseriesSpan(<span class="hljs-keyword">start</span><span class="hljs-operator">=</span>t2, <span class="hljs-keyword">end</span><span class="hljs-operator">=</span>t3, label<span class="hljs-operator">=</span><span class="hljs-string">'é«˜è½¬é€Ÿ'</span>),
    TimeseriesSpan(<span class="hljs-keyword">start</span><span class="hljs-operator">=</span>t3, <span class="hljs-keyword">end</span><span class="hljs-operator">=</span>t4, label<span class="hljs-operator">=</span><span class="hljs-string">'ä¸­è½¬é€Ÿ'</span>)
  ]
</code></pre>
<h3 data-id="heading-15">3.3 æ•…éšœç±»å‹è¯Šæ–­</h3>
<h4 data-id="heading-16">è¯Šæ–­ç­–ç•¥:åŸºäºç‰¹å¾çš„è§„åˆ™å¼•æ“</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_fault_type</span>(<span class="hljs-params">self, data, features</span>):
    <span class="hljs-string">"""
    å¤šæ•…éšœç±»å‹è¯Šæ–­
    
    ç­–ç•¥:åŸºäºç‰¹å¾çš„è¯„åˆ†æœºåˆ¶
    """</span>
    fault_scores = {}
    
    <span class="hljs-comment"># 1. ä¸å¹³è¡¡è¯Šæ–­</span>
    <span class="hljs-comment"># ç‰¹å¾:æŒ¯åŠ¨å¹…å€¼å¤§,ä¸»é¢‘=è½¬é€Ÿé¢‘ç‡</span>
    unbalance_score = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> axis <span class="hljs-keyword">in</span> [<span class="hljs-string">'vibration_x'</span>, <span class="hljs-string">'vibration_y'</span>, <span class="hljs-string">'vibration_z'</span>]:
        rms_key = <span class="hljs-string">f'<span class="hljs-subst">{axis}</span>_rms'</span>
        <span class="hljs-keyword">if</span> rms_key <span class="hljs-keyword">in</span> features <span class="hljs-keyword">and</span> features[rms_key] &gt; <span class="hljs-number">1.5</span>:
            unbalance_score += <span class="hljs-built_in">min</span>(<span class="hljs-number">1.0</span>, features[rms_key] / <span class="hljs-number">2.0</span>)
    fault_scores[<span class="hljs-string">'ä¸å¹³è¡¡'</span>] = unbalance_score / <span class="hljs-number">3</span>  <span class="hljs-comment"># å½’ä¸€åŒ–</span>
    
    <span class="hljs-comment"># 2. è½´æ‰¿æ•…éšœè¯Šæ–­</span>
    <span class="hljs-comment"># ç‰¹å¾:é«˜é¢‘æˆåˆ†å¢åŠ ,å³°å€¼å› å­å¤§,å³°åº¦å¤§</span>
    bearing_score = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'dominant_freq'</span> <span class="hljs-keyword">in</span> features <span class="hljs-keyword">and</span> features[<span class="hljs-string">'dominant_freq'</span>] &gt; <span class="hljs-number">500</span>:
        bearing_score += <span class="hljs-number">0.4</span>  <span class="hljs-comment"># é«˜é¢‘æƒé‡</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'crest_factor'</span> <span class="hljs-keyword">in</span> features <span class="hljs-keyword">and</span> features[<span class="hljs-string">'crest_factor'</span>] &gt; <span class="hljs-number">5</span>:
        bearing_score += <span class="hljs-number">0.3</span>  <span class="hljs-comment"># å†²å‡»æƒé‡</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'kurtosis'</span> <span class="hljs-keyword">in</span> features <span class="hljs-keyword">and</span> features[<span class="hljs-string">'kurtosis'</span>] &gt; <span class="hljs-number">5</span>:
        bearing_score += <span class="hljs-number">0.3</span>  <span class="hljs-comment"># å³°åº¦æƒé‡</span>
    fault_scores[<span class="hljs-string">'è½´æ‰¿æ•…éšœ'</span>] = bearing_score
    
    <span class="hljs-comment"># 3. é½¿è½®æ•…éšœè¯Šæ–­</span>
    <span class="hljs-comment"># ç‰¹å¾:å•®åˆé¢‘ç‡åŠå…¶è¾¹é¢‘å¸¦</span>
    gear_score = <span class="hljs-number">0</span>
    <span class="hljs-keyword">if</span> <span class="hljs-string">'spectral_centroid'</span> <span class="hljs-keyword">in</span> features:
        <span class="hljs-comment"># é½¿è½®æ•…éšœé€šå¸¸åœ¨ä¸­é¢‘èŒƒå›´</span>
        <span class="hljs-keyword">if</span> <span class="hljs-number">100</span> &lt; features[<span class="hljs-string">'spectral_centroid'</span>] &lt; <span class="hljs-number">500</span>:
            gear_score = <span class="hljs-built_in">min</span>(<span class="hljs-number">1.0</span>, features[<span class="hljs-string">'spectral_centroid'</span>] / <span class="hljs-number">500</span>)
    fault_scores[<span class="hljs-string">'é½¿è½®æ•…éšœ'</span>] = gear_score
    
    <span class="hljs-comment"># 4. ç»¼åˆåˆ¤æ–­</span>
    max_fault = <span class="hljs-built_in">max</span>(fault_scores.items(), key=<span class="hljs-keyword">lambda</span> x: x[<span class="hljs-number">1</span>])
    
    <span class="hljs-keyword">if</span> max_fault[<span class="hljs-number">1</span>] &gt; <span class="hljs-number">0.3</span>:  <span class="hljs-comment"># æ•…éšœé˜ˆå€¼</span>
        label = max_fault[<span class="hljs-number">0</span>]
    <span class="hljs-keyword">else</span>:
        label = <span class="hljs-string">'æ­£å¸¸'</span>
    
    <span class="hljs-keyword">return</span> [TimeseriesSpan(
        start=data[<span class="hljs-string">'time'</span>][<span class="hljs-number">0</span>],
        end=data[<span class="hljs-string">'time'</span>][-<span class="hljs-number">1</span>],
        label_choice=label,
        label_group=<span class="hljs-string">"fault_type"</span>
    )]
</code></pre>
<p><strong>æ•…éšœè¯Šæ–­å†³ç­–æ ‘</strong>:</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    A[æŒ¯åŠ¨ç‰¹å¾] --&gt; B{RMS&gt;2.0?}
    B --&gt;|æ˜¯| C{å³°å€¼å› å­&gt;5?}
    B --&gt;|å¦| D[æ­£å¸¸]
    
    C --&gt;|æ˜¯| E{å³°åº¦&gt;5?}
    C --&gt;|å¦| F{ä¸»é¢‘=è½¬é€Ÿ?}
    
    E --&gt;|æ˜¯| G[è½´æ‰¿æ•…éšœ]
    E --&gt;|å¦| H[æ£€æŸ¥é¢‘è°±]
    
    F --&gt;|æ˜¯| I[ä¸å¹³è¡¡]
    F --&gt;|å¦| H
    
    H --&gt; J{ä¸­é¢‘èƒ½é‡é«˜?}
    J --&gt;|æ˜¯| K[é½¿è½®æ•…éšœ]
    J --&gt;|å¦| L[å…¶ä»–æ•…éšœ]
    
    style G fill:#FF5722,color:#fff
    style I fill:#FF9800,color:#fff
    style K fill:#FFC107,color:#000
</code></pre>
<h3 data-id="heading-17">3.4 å¥åº·è¯„åˆ†ç³»ç»Ÿ</h3>
<h4 data-id="heading-18">è¯„åˆ†æ¨¡å‹:åŠ æƒç»¼åˆè¯„ä¼°</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">predict_quality_score</span>(<span class="hljs-params">self, features</span>):
    <span class="hljs-string">"""
    è®¾å¤‡å¥åº·åº¦è¯„åˆ†(0-100åˆ†)
    
    è¯„åˆ†æ¨¡å‹:
    åŸºç¡€åˆ†100åˆ†,æ ¹æ®å¼‚å¸¸ç‰¹å¾æ‰£åˆ†
    """</span>
    base_score = <span class="hljs-number">100.0</span>
    
    <span class="hljs-comment"># 1. æŒ¯åŠ¨å¹…å€¼æ‰£åˆ†(æƒé‡40%)</span>
    rms_penalty = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> axis <span class="hljs-keyword">in</span> [<span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>]:
        rms = features.get(<span class="hljs-string">f'vibration_<span class="hljs-subst">{axis}</span>_rms'</span>, <span class="hljs-number">0</span>)
        <span class="hljs-keyword">if</span> rms &gt; <span class="hljs-number">2.0</span>:  <span class="hljs-comment"># é˜ˆå€¼</span>
            <span class="hljs-comment"># RMSæ¯è¶…æ ‡1ä¸ªå•ä½,æ‰£15åˆ†</span>
            rms_penalty += <span class="hljs-built_in">min</span>(<span class="hljs-number">15</span>, (rms - <span class="hljs-number">2.0</span>) * <span class="hljs-number">7.5</span>)
    
    <span class="hljs-comment"># 2. é¢‘åŸŸç‰¹å¾æ‰£åˆ†(æƒé‡30%)</span>
    freq_penalty = <span class="hljs-number">0</span>
    dominant_freq = features.get(<span class="hljs-string">'dominant_freq'</span>, <span class="hljs-number">0</span>)
    <span class="hljs-keyword">if</span> dominant_freq &gt; <span class="hljs-number">800</span>:  <span class="hljs-comment"># é«˜é¢‘å¼‚å¸¸</span>
        freq_penalty = <span class="hljs-built_in">min</span>(<span class="hljs-number">15</span>, (dominant_freq - <span class="hljs-number">800</span>) / <span class="hljs-number">100</span>)
    
    <span class="hljs-comment"># 3. å³°å€¼å› å­æ‰£åˆ†(æƒé‡20%)</span>
    peak_penalty = <span class="hljs-number">0</span>
    <span class="hljs-keyword">for</span> axis <span class="hljs-keyword">in</span> [<span class="hljs-string">'x'</span>, <span class="hljs-string">'y'</span>, <span class="hljs-string">'z'</span>]:
        crest = features.get(<span class="hljs-string">f'vibration_<span class="hljs-subst">{axis}</span>_crest_factor'</span>, <span class="hljs-number">3</span>)
        <span class="hljs-keyword">if</span> crest &gt; <span class="hljs-number">5</span>:  <span class="hljs-comment"># æœ‰å†²å‡»</span>
            peak_penalty += <span class="hljs-built_in">min</span>(<span class="hljs-number">10</span>, (crest - <span class="hljs-number">5</span>) * <span class="hljs-number">2</span>)
    
    <span class="hljs-comment"># 4. è½¬é€Ÿç¨³å®šæ€§æ‰£åˆ†(æƒé‡10%)</span>
    speed_penalty = <span class="hljs-number">0</span>
    rpm_std = features.get(<span class="hljs-string">'rpm_std'</span>, <span class="hljs-number">0</span>)
    rpm_mean = features.get(<span class="hljs-string">'rpm_mean'</span>, <span class="hljs-number">1000</span>)
    rpm_cv = rpm_std / <span class="hljs-built_in">max</span>(rpm_mean, <span class="hljs-number">1</span>)  <span class="hljs-comment"># å˜å¼‚ç³»æ•°</span>
    <span class="hljs-keyword">if</span> rpm_cv &gt; <span class="hljs-number">0.05</span>:  <span class="hljs-comment"># è½¬é€Ÿæ³¢åŠ¨&gt;5%</span>
        speed_penalty = <span class="hljs-built_in">min</span>(<span class="hljs-number">10</span>, rpm_cv * <span class="hljs-number">100</span>)
    
    <span class="hljs-comment"># 5. è®¡ç®—æ€»åˆ†</span>
    quality_score = <span class="hljs-built_in">max</span>(<span class="hljs-number">0</span>, base_score - rms_penalty - freq_penalty 
                                      - peak_penalty - speed_penalty)
    
    <span class="hljs-keyword">return</span> Number(
        value=quality_score,
        label_group=<span class="hljs-string">'quality_score'</span>,
        label_target=<span class="hljs-string">'ts'</span>
    )
</code></pre>
<p><strong>å¥åº·ç­‰çº§åˆ’åˆ†</strong>:</p>









































<table><thead><tr><th>åˆ†æ•°åŒºé—´</th><th>å¥åº·ç­‰çº§</th><th>ç»´æŠ¤å»ºè®®</th><th>é¢œè‰²æ ‡è¯†</th></tr></thead><tbody><tr><td>90-100</td><td>ä¼˜ç§€</td><td>ç»§ç»­è§‚å¯Ÿ</td><td>ğŸŸ¢ ç»¿è‰²</td></tr><tr><td>70-89</td><td>è‰¯å¥½</td><td>å®šæœŸç›‘æµ‹</td><td>ğŸŸ¡ é»„è‰²</td></tr><tr><td>50-69</td><td>ä¸€èˆ¬</td><td>åŠ å¼ºç›‘æµ‹</td><td>ğŸŸ  æ©™è‰²</td></tr><tr><td>30-49</td><td>è¾ƒå·®</td><td>è®¡åˆ’ç»´æŠ¤</td><td>ğŸ”´ çº¢è‰²</td></tr><tr><td>0-29</td><td>å±é™©</td><td>ç«‹å³åœæœºæ£€ä¿®</td><td>ğŸš¨ ç´«è‰²</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-19">å››ã€å®æˆ˜åº”ç”¨æ¡ˆä¾‹</h2>
<h3 data-id="heading-20">æ¡ˆä¾‹1:é£ç”µåœºè½´æ‰¿å¯¿å‘½é¢„æµ‹</h3>
<p><strong>èƒŒæ™¯</strong>:æŸæµ·ä¸Šé£ç”µåœº,å•å°æœºç»„ä»·å€¼5000ä¸‡</p>
<p><strong>éƒ¨ç½²æ–¹æ¡ˆ</strong>:</p>
<ol>
<li>
<p><strong>æ•°æ®é‡‡é›†</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åœ¨ä¸»è½´æ‰¿å’Œé½¿è½®ç®±å®‰è£…åŠ é€Ÿåº¦ä¼ æ„Ÿå™¨</span>
sensors = {
    <span class="hljs-string">'main_bearing'</span>: <span class="hljs-string">'ä¸‰è½´åŠ é€Ÿåº¦è®¡(X/Y/Z)'</span>,
    <span class="hljs-string">'gearbox'</span>: <span class="hljs-string">'å•è½´åŠ é€Ÿåº¦è®¡'</span>,
    <span class="hljs-string">'generator'</span>: <span class="hljs-string">'å•è½´åŠ é€Ÿåº¦è®¡'</span>
}

<span class="hljs-comment"># é‡‡æ ·é…ç½®</span>
sample_rate = <span class="hljs-number">1000</span>  <span class="hljs-comment"># 1kHz</span>
upload_interval = <span class="hljs-number">3600</span>  <span class="hljs-comment"># æ¯å°æ—¶ä¸Šä¼ </span>
</code></pre>
</li>
<li>
<p><strong>è¯Šæ–­æ¨¡å‹</strong></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># é¢„æµ‹ç¤ºä¾‹</span>
prediction = {
    <span class="hljs-string">'quality_score'</span>: <span class="hljs-number">65</span>,  <span class="hljs-comment"># å¥åº·åº¦65åˆ†(ä¸€èˆ¬)</span>
    <span class="hljs-string">'fault_type'</span>: <span class="hljs-string">'è½´æ‰¿æ•…éšœ'</span>,
    <span class="hljs-string">'confidence'</span>: <span class="hljs-number">0.82</span>,
    <span class="hljs-string">'time_to_failure'</span>: <span class="hljs-string">'é¢„è®¡7-14å¤©'</span>  <span class="hljs-comment"># å‰©ä½™å¯¿å‘½é¢„æµ‹</span>
}
</code></pre>
</li>
<li>
<p><strong>ç»´æŠ¤å†³ç­–</strong></p>
<pre><code class="hljs language-markdown" lang="markdown">å†³ç­–æµç¨‹:
<span class="hljs-bullet">1.</span> æ”¶åˆ°é¢„è­¦(å¥åº·åº¦&lt;70) â†’ å‘é€é‚®ä»¶é€šçŸ¥
<span class="hljs-bullet">2.</span> æ´¾é£å·¥ç¨‹å¸ˆç°åœºå¤æ ¸
<span class="hljs-bullet">3.</span> å®‰æ’åœæœºæ£€ä¿®(é€‰æ‹©ä½é£é€Ÿæ—¶æ®µ)
<span class="hljs-bullet">4.</span> æ›´æ¢è½´æ‰¿ â†’ é¿å…çªå‘æ•…éšœ
</code></pre>
</li>
</ol>
<p><strong>å®æ–½æ•ˆæœ</strong>:</p>
<ul>
<li>âœ… å¹´é¿å…3æ¬¡çªå‘æ•…éšœ â†’ èŠ‚çœ900ä¸‡å…ƒ</li>
<li>âœ… è®¡åˆ’æ€§ç»´æŠ¤å‡å°‘åœæœºæ—¶é—´60%</li>
<li>âœ… è½´æ‰¿å¹³å‡å¯¿å‘½å»¶é•¿18ä¸ªæœˆ</li>
</ul>
<h3 data-id="heading-21">æ¡ˆä¾‹2:æ°´æ³µç«™æ•…éšœè¯Šæ–­</h3>
<p><strong>èƒŒæ™¯</strong>:åŸå¸‚ä¾›æ°´ä¸»æ³µç«™,5å°å¤§å‹ç¦»å¿ƒæ³µ</p>
<p><strong>è¯Šæ–­å®ä¾‹</strong>:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 3å·æ³µæŒ¯åŠ¨åˆ†æ</span>
pump3_analysis = {
    <span class="hljs-string">'timestamp'</span>: <span class="hljs-string">'2024-01-15 14:30'</span>,
    <span class="hljs-string">'features'</span>: {
        <span class="hljs-string">'rms'</span>: <span class="hljs-number">3.2</span>,  <span class="hljs-comment"># è¶…æ ‡!æ­£å¸¸å€¼&lt;2.0</span>
        <span class="hljs-string">'crest_factor'</span>: <span class="hljs-number">6.5</span>,  <span class="hljs-comment"># è¶…æ ‡!æ­£å¸¸å€¼3-4</span>
        <span class="hljs-string">'dominant_freq'</span>: <span class="hljs-number">58</span>,  <span class="hljs-comment"># æ¥è¿‘è½¬é€Ÿé¢‘ç‡60Hz</span>
        <span class="hljs-string">'kurtosis'</span>: <span class="hljs-number">4.8</span>  <span class="hljs-comment"># åé«˜</span>
    },
    <span class="hljs-string">'diagnosis'</span>: {
        <span class="hljs-string">'fault_type'</span>: <span class="hljs-string">'ä¸å¹³è¡¡'</span>,
        <span class="hljs-string">'severity'</span>: <span class="hljs-string">'ä¸­ç­‰'</span>,
        <span class="hljs-string">'recommendation'</span>: <span class="hljs-string">'å»ºè®®1å‘¨å†…è¿›è¡ŒåŠ¨å¹³è¡¡æ ¡æ­£'</span>
    },
    <span class="hljs-string">'quality_score'</span>: <span class="hljs-number">58</span>  <span class="hljs-comment"># å¥åº·åº¦58åˆ†</span>
}
</code></pre>
<p><strong>æ ¹å› åˆ†æ</strong>:</p>
<pre><code class="hljs language-markdown" lang="markdown">æ•…éšœæ ‘åˆ†æ:
<span class="hljs-code">                   ä¸å¹³è¡¡
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
     å¶è½®ç£¨æŸ    è½¬å­åå¿ƒ    è½´æ‰¿æ¾åŠ¨
        â”‚            â”‚            â”‚
     (å¯èƒ½æ€§60%)  (å¯èƒ½æ€§30%)  (å¯èƒ½æ€§10%)
</span>
å»ºè®®:
<span class="hljs-bullet">1.</span> ä¼˜å…ˆæ£€æŸ¥å¶è½®(æ‹†æ£€æˆæœ¬ä½)
<span class="hljs-bullet">2.</span> å¦‚å¶è½®æ­£å¸¸,æ£€æŸ¥è½¬å­
<span class="hljs-bullet">3.</span> å¿…è¦æ—¶è¿›è¡ŒåŠ¨å¹³è¡¡æ ¡æ­£
</code></pre>
<h3 data-id="heading-22">æ¡ˆä¾‹3:æ™ºèƒ½ç»´æŠ¤å¤§å±</h3>
<p><strong>éœ€æ±‚</strong>:è®¾å¤‡ç®¡ç†éƒ¨é—¨å¸Œæœ›å®æ—¶ç›‘æ§æ‰€æœ‰è®¾å¤‡å¥åº·çŠ¶å†µ</p>
<p><strong>å¯è§†åŒ–æ–¹æ¡ˆ</strong>:</p>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         è®¾å¤‡å¥åº·ç›‘æ§å¤§å±                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ è®¾å¤‡æ€»æ•°: 50    å¥åº·: 35    é¢„è­¦: 12    æ•…éšœ: 3â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ³µ1  <span class="hljs-section">[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘]</span> 82åˆ† ğŸŸ¡ è‰¯å¥½               â”‚
â”‚   è½¬é€Ÿ:1450rpm  æ•…éšœ:æ—   å»ºè®®:å®šæœŸç›‘æµ‹         â”‚
â”‚                                              â”‚
â”‚ æ³µ2  <span class="hljs-section">[â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘]</span> 45åˆ† ğŸ”´ è¾ƒå·®               â”‚
â”‚   è½¬é€Ÿ:1480rpm  æ•…éšœ:è½´æ‰¿æ•…éšœ  å»ºè®®:è®¡åˆ’ç»´æŠ¤   â”‚
â”‚                                              â”‚
â”‚ æ³µ3  <span class="hljs-section">[â–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘]</span> 25åˆ† ğŸš¨ å±é™©               â”‚
â”‚   è½¬é€Ÿ:1520rpm  æ•…éšœ:ä¸¥é‡ä¸å¹³è¡¡  å»ºè®®:ç«‹å³åœæœº â”‚
â”‚                                              â”‚
â”‚ é£æœº1 <span class="hljs-section">[â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ]</span> 95åˆ† ğŸŸ¢ ä¼˜ç§€              â”‚
â”‚   è½¬é€Ÿ:1200rpm  æ•…éšœ:æ—   å»ºè®®:ç»§ç»­è§‚å¯Ÿ         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®æ—¶è¶‹åŠ¿å›¾:
  åˆ†æ•°
  100 â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€ é£æœº1
          /
   80 â”€â”€â”€â—â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â—â”€â”€â”€â”€â”€ æ³µ1
        /
   60 â”€â—â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€â”€â”€â—â”€â”€â”€â”€ æ³µ2
      /       \
   40 â”€â”€â”€â”€â”€â”€â—â”€â”€â—â”€â”€â”€â”€â”€â”€â”€â”€ æ³µ3(ä¸‹é™è¶‹åŠ¿!)
           â† æ—¶é—´
</code></pre>
<hr/>
<h2 data-id="heading-23">äº”ã€æŠ€æœ¯ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-24">5.1 æ•°æ®å¢å¼º</h3>
<p><strong>ç›®çš„</strong>:å¢åŠ è®­ç»ƒæ ·æœ¬å¤šæ ·æ€§,æå‡æ¨¡å‹æ³›åŒ–èƒ½åŠ›</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> audiomentations <span class="hljs-keyword">import</span> Compose, AddGaussianNoise, TimeStretch

augmenter = Compose([
    AddGaussianNoise(min_amplitude=<span class="hljs-number">0.001</span>, max_amplitude=<span class="hljs-number">0.01</span>, p=<span class="hljs-number">0.5</span>),
    TimeStretch(min_rate=<span class="hljs-number">0.9</span>, max_rate=<span class="hljs-number">1.1</span>, p=<span class="hljs-number">0.5</span>),
])

augmented_vibration = augmenter(samples=vibration_data, sample_rate=<span class="hljs-number">1000</span>)
</code></pre>
<h3 data-id="heading-25">5.2 æ·±åº¦å­¦ä¹ å‡çº§</h3>
<p><strong>æ–¹å‘</strong>:ç”¨CNN/LSTMè‡ªåŠ¨å­¦ä¹ ç‰¹å¾</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">VibrationCNN</span>(nn.Module):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-built_in">super</span>().__init__()
        <span class="hljs-comment"># 1Då·ç§¯æå–æ—¶åºç‰¹å¾</span>
        self.conv1 = nn.Conv1d(<span class="hljs-number">3</span>, <span class="hljs-number">64</span>, kernel_size=<span class="hljs-number">7</span>, padding=<span class="hljs-number">3</span>)
        self.conv2 = nn.Conv1d(<span class="hljs-number">64</span>, <span class="hljs-number">128</span>, kernel_size=<span class="hljs-number">5</span>, padding=<span class="hljs-number">2</span>)
        
        <span class="hljs-comment"># å…¨è¿æ¥åˆ†ç±»</span>
        self.fc = nn.Linear(<span class="hljs-number">128</span>, <span class="hljs-number">4</span>)  <span class="hljs-comment"># 4ç§æ•…éšœç±»å‹</span>
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">forward</span>(<span class="hljs-params">self, x</span>):
        <span class="hljs-comment"># è¾“å…¥:[batch, 3è½´, æ—¶é—´æ­¥]</span>
        x = F.relu(self.conv1(x))
        x = F.max_pool1d(x, <span class="hljs-number">2</span>)
        x = F.relu(self.conv2(x))
        x = F.adaptive_avg_pool1d(x, <span class="hljs-number">1</span>)
        x = x.view(x.size(<span class="hljs-number">0</span>), -<span class="hljs-number">1</span>)
        <span class="hljs-keyword">return</span> self.fc(x)
</code></pre>
<hr/>
<h2 data-id="heading-26">å…­ã€æ€»ç»“</h2>
<h3 data-id="heading-27">æ ¸å¿ƒä»·å€¼</h3>
<p>æŒ¯åŠ¨PHM ML Backendé€šè¿‡<strong>æ™ºèƒ½æŒ¯åŠ¨åˆ†æ</strong>,å®ç°äº†:</p>
<ol>
<li><strong>å…¨æ–¹ä½è¯Šæ–­</strong>:è½¬é€Ÿ/æ•…éšœ/å¥åº·åº¦ä¸‰ç»´è¯„ä¼°</li>
<li><strong>é¢„æµ‹æ€§ç»´æŠ¤</strong>:æå‰7-14å¤©æ•…éšœé¢„è­¦</li>
<li><strong>é™æœ¬å¢æ•ˆ</strong>:ç»´æŠ¤æˆæœ¬é™ä½40%,åœæœºæ—¶é—´å‡å°‘60%</li>
<li><strong>çŸ¥è¯†å›ºåŒ–</strong>:å°†ä¸“å®¶ç»éªŒè½¬åŒ–ä¸ºç®—æ³•</li>
</ol>
<h3 data-id="heading-28">é€‚ç”¨åœºæ™¯</h3>






























<table><thead><tr><th>è¡Œä¸š</th><th>è®¾å¤‡ç±»å‹</th><th>æ ¸å¿ƒä»·å€¼</th></tr></thead><tbody><tr><td>é£ç”µ</td><td>é£åŠ›å‘ç”µæœº</td><td>é¿å…çªå‘æ•…éšœ,å»¶é•¿å¯¿å‘½</td></tr><tr><td>æ°´åˆ©</td><td>æ°´æ³µ/æ°´è½®æœº</td><td>ä¿éšœä¾›æ°´å®‰å…¨</td></tr><tr><td>çŸ³åŒ–</td><td>å‹ç¼©æœº/æ³µ</td><td>é¢„é˜²è¿é”æ•…éšœ</td></tr><tr><td>åˆ¶é€ </td><td>æœºåºŠ/ç”µæœº</td><td>æå‡è®¾å¤‡åˆ©ç”¨ç‡</td></tr></tbody></table>
<p><strong>æŒ¯åŠ¨PHM ML Backendæ˜¯å·¥ä¸š4.0æ—¶ä»£çš„"è®¾å¤‡å¥åº·ç®¡å®¶",é€šè¿‡AIèµ‹èƒ½,è®©è®¾å¤‡ä»"åäº†å†ä¿®"èµ°å‘"é¢„æµ‹æ€§ç»´æŠ¤",ä¸ºä¼ä¸šåˆ›é€ å·¨å¤§ç»æµä»·å€¼ã€‚</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[APPä¸Šæ¶è‹¹æœåº”ç”¨å•†åº—ç»éªŒæ•™è®­ä¸æ³¨æ„äº‹é¡¹]]></title>    <link>https://juejin.cn/post/7578582010416939014</link>    <guid>https://juejin.cn/post/7578582010416939014</guid>    <pubDate>2025-12-01T09:51:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7578582010416939014" data-draft-id="7578705123208085547" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="APPä¸Šæ¶è‹¹æœåº”ç”¨å•†åº—ç»éªŒæ•™è®­ä¸æ³¨æ„äº‹é¡¹"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-12-01T09:51:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç–¯ç‹‚çš„ç¨‹åºçŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2760245749234147"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            APPä¸Šæ¶è‹¹æœåº”ç”¨å•†åº—ç»éªŒæ•™è®­ä¸æ³¨æ„äº‹é¡¹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2760245749234147/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç–¯ç‹‚çš„ç¨‹åºçŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-12-01T09:51:28.000Z" title="Mon Dec 01 2025 09:51:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-12-01
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>APPä¸Šæ¶è‹¹æœï¼Ÿå¿…çœ‹ç»éªŒæ•™è®­ï¼</p>
<p>æœ€è¿‘æœ‰ä¸å°‘æœ‹å‹åœ¨é—®ï¼Œæ€ä¹ˆæŠŠAPPä¸Šæ¶åˆ°è‹¹æœåº”ç”¨å¸‚åœºã€‚ä½œä¸ºä¸€ä¸ªè¿‡æ¥äººï¼Œæˆ‘å¿ä¸ä½ç»™å¤§å®¶åˆ†äº«ä¸€äº›ç»éªŒæ•™è®­ï¼Œéƒ½æ˜¯è¡€æ³ªå•Šï¼</p>
<p>ä¼ä¸šå¼€å‘è€…è´¦å·çš„å‘</p>
<p>æˆ‘æœ€è¿‘ä¸Šæ¶çš„APPæœ‰ä¸ªç‰¹æ®Šæƒ…å†µï¼Œä¹‹å‰æ˜¯ä¸ªäººå¼€å‘è€…ï¼Œç°åœ¨è¦æ”¹æˆä¼ä¸šå¼€å‘è€…ã€‚ç»“æœå‘ç°ï¼Œç”³è¯·ä¼ä¸šå¼€å‘è€…è´¦å·çš„æ—¶å€™ï¼Œä»¥å‰çš„æˆæƒäººä¸è¡Œï¼Œå¿…é¡»æ¢æ–°çš„ã€‚è€Œä¸”è¿˜å¾—æœ‰ä¸€ä¸ªåŒä¸»ä½“çš„ä¼ä¸šå®˜ç½‘ï¼ŒåŸŸåè¿˜å¾—é€šè¿‡å¤‡æ¡ˆï¼ˆå›½å†…ç‰ˆçš„ï¼‰ã€‚å¡«å†™çš„è”ç³»äººæœ€åéœ€è¦ä¸€ä¸ªä¼ä¸šé‚®ç®±ï¼Œæˆ‘ä»¬ç”³è¯·äº†ç½‘æ˜“ä¼ä¸šé‚®ç®±å…è´¹ç‰ˆï¼Œç»“æœè‹¹æœåé¦ˆæ— æ•ˆã€‚æœ€ååªèƒ½ç”¨ä¼ä¸šå¾®ä¿¡çš„é‚®ç®±æ‰æå®šã€‚å¦å¤–ï¼Œè¿˜å¾—å…ˆæŠŠä»¥å‰çš„APPä¸‹æ¶ã€‚</p>
<p>ä½¿ç”¨AppUploaderè¿™æ ·çš„å·¥å…·ï¼Œå¯ä»¥ç®€åŒ–iOSè¯ä¹¦çš„ç”³è¯·å’Œç®¡ç†è¿‡ç¨‹ï¼Œå®ƒæ”¯æŒåœ¨Windowsã€Linuxæˆ–Macç³»ç»Ÿä¸­ç›´æ¥åˆ›å»ºå’Œç®¡ç†å¼€å‘è€…è¯ä¹¦ï¼Œæ— éœ€é’¥åŒ™ä¸²åŠ©æ‰‹ï¼Œéå¸¸é€‚åˆå›¢é˜Ÿåä½œã€‚</p>
<p>BUGä¸èƒ½æœ‰</p>
<p>æˆ‘ä»¬è¿™ä¸ªAPPé‡Œæœ‰ä¸ªå°BUGï¼Œè‡ªå·±æ²¡æ£€æµ‹åˆ°ï¼Œç»“æœè¢«äººå®¶æ£€æµ‹å‡ºæ¥äº†ã€‚è®°ä½ï¼Œä½œä¸ºè½¯ä»¶å¼€å‘è€…ï¼ŒBUGæ˜¯ç»å¯¹ä¸èƒ½æœ‰çš„ï¼</p>
<p>éšç§åè®®è¦å…¨</p>
<p>æˆ‘ä»¬çš„APPè¢«æ£€æµ‹å‡ºï¼Œé‡Œé¢ç”¨åˆ°ä¸€ä¸ªSDKåŒ…ï¼Œä½†éšç§åè®®é‡Œæ²¡å†™æ˜ã€‚è¿™æ˜¯ç»å¯¹ä¸è¡Œçš„ï¼Œå¿…é¡»å†™å…¨ã€‚å¦‚æœæœ‰å®åè®¤è¯ç­‰åŠŸèƒ½ï¼Œè¿˜éœ€è¦æœ‰ã€Šå…è´£å£°æ˜ã€‹ã€‚æˆ‘æ˜¯æŠŠè¿™äº›å†™åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œè¿™æ ·ä¹Ÿå¯ä»¥ã€‚å¦‚æœå®åœ¨ä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œå¯ä»¥ç”¨ç½‘ä¸Šçš„éšç§åè®®ç”Ÿæˆå™¨ï¼Œå†æ”¹æ”¹ã€‚æˆ–è€…çœ‹çœ‹å¤§å‚å‡ºå‚çš„APPï¼Œéšç§åè®®éƒ½æ˜¯æ€ä¹ˆå†™çš„ã€‚</p>
<p>å®¡æ ¸æ–¹çš„å¸®åŠ©</p>
<p>å¦‚æœå®åœ¨ä¸çŸ¥é“æ€ä¹ˆæäº†ï¼Œå°±ç»™APPå®¡æ ¸æ–¹ç•™è¨€ï¼Œä»–ä»¬ä¸€èˆ¬éƒ½ä¼šå›å¤çš„ï¼Œä¹Ÿå¯ä»¥çº¦ç”µè¯æ²Ÿé€šã€‚è‹¹æœå¾ˆå®ˆä¿¡ï¼Œä¸€å®šä¼šç»™ä½ å›ç”µè¯çš„ï¼Œè¿™æ ·ä½ å¯ä»¥æ¸…æ¥šçŸ¥é“æ€ä¹ˆæ”¹ã€‚</p>
<p>å¦å¤–ï¼Œåˆ©ç”¨AppUploaderä¸Šä¼ IPAæ–‡ä»¶åˆ°App Storeï¼Œæ¯”ä½¿ç”¨Application Loaderæ›´é«˜æ•ˆï¼Œä¸”ä¸æºå¸¦è®¾å¤‡ä¿¡æ¯ï¼Œèƒ½åŠ å¿«å®¡æ ¸æµç¨‹ã€‚</p>
<p>æœ€åï¼Œç¥å¤§å®¶APPä¸Šæ¶éƒ½é¡ºåˆ©ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>