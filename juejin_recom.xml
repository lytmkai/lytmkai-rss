<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[æ•™ç¨‹ï¼šå¦‚ä½•ä¿®æ”¹ Docker å®¹å™¨ bisheng-frontend ä¸­çš„é™æ€æ–‡ä»¶]]></title>    <link>https://juejin.cn/post/7575488180980465664</link>    <guid>https://juejin.cn/post/7575488180980465664</guid>    <pubDate>2025-11-24T01:54:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575488180980465664" data-draft-id="7575644469711110163" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•™ç¨‹ï¼šå¦‚ä½•ä¿®æ”¹ Docker å®¹å™¨ bisheng-frontend ä¸­çš„é™æ€æ–‡ä»¶"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-24T01:54:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="éä¼˜ç§€ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/3984285870341288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•™ç¨‹ï¼šå¦‚ä½•ä¿®æ”¹ Docker å®¹å™¨ bisheng-frontend ä¸­çš„é™æ€æ–‡ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3984285870341288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    éä¼˜ç§€ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T01:54:50.000Z" title="Mon Nov 24 2025 01:54:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ•™ç¨‹å°†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li><strong>æ•™ç¨‹ç›®æ ‡</strong>ï¼šæ˜ç¡®è¯´æ˜æœ¬æ•™ç¨‹å°†æ•™ä¼šä½ ä»€ä¹ˆã€‚</li>
<li><strong>å‰ææ¡ä»¶</strong>ï¼šåˆ—å‡ºæ‰§è¡Œæœ¬æ•™ç¨‹æ‰€éœ€çš„ç¯å¢ƒå’Œå·¥å…·ã€‚</li>
<li><strong>æ“ä½œæ­¥éª¤</strong>ï¼š
<ul>
<li><strong>æ­¥éª¤ä¸€ï¼šè¿›å…¥å®¹å™¨å¹¶å®šä½æ–‡ä»¶</strong></li>
<li><strong>æ­¥éª¤äºŒï¼šå°†å®¹å™¨å†…æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°</strong></li>
<li><strong>æ­¥éª¤ä¸‰ï¼šåœ¨æœ¬åœ°ä¿®æ”¹æ–‡ä»¶</strong></li>
<li><strong>æ­¥éª¤å››ï¼šé‡æ–°åˆ›å»ºå®¹å™¨å¹¶æŒ‚è½½ä¿®æ”¹åçš„æ–‡ä»¶</strong></li>
</ul>
</li>
<li><strong>æ€»ç»“</strong>ï¼šç®€è¦å›é¡¾æ•´ä¸ªæµç¨‹ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-0">æ•™ç¨‹ï¼šå¦‚ä½•ä¿®æ”¹ Docker å®¹å™¨ <code>bisheng-frontend</code> ä¸­çš„é™æ€æ–‡ä»¶</h3>
<h4 data-id="heading-1">ä¸€ã€æ•™ç¨‹ç›®æ ‡</h4>
<p>æœ¬æ•™ç¨‹å°†æŒ‡å¯¼ä½ å¦‚ä½•å®‰å…¨åœ°ä¿®æ”¹è¿è¡Œä¸­çš„ <code>bisheng-frontend</code> Docker å®¹å™¨å†…çš„é™æ€æ–‡ä»¶ï¼ˆå¦‚å›¾ç‰‡ã€SVG ç­‰ï¼‰ã€‚æˆ‘ä»¬å°†é‡‡ç”¨â€œ<strong>å¤åˆ¶æ–‡ä»¶ -&gt; æœ¬åœ°ä¿®æ”¹ -&gt; æŒ‚è½½é‡å¯</strong>â€çš„æœ€ä½³å®è·µï¼Œä»¥é¿å…ç›´æ¥åœ¨å®¹å™¨å†…ä¿®æ”¹å¸¦æ¥çš„é£é™©ã€‚</p>
<h4 data-id="heading-2">äºŒã€å‰ææ¡ä»¶</h4>
<ol>
<li>å·²å®‰è£… Docker å¹¶èƒ½æ­£å¸¸è¿è¡Œã€‚</li>
<li>å·²å®‰è£… <code>docker-compose</code> (å¦‚æœä½ çš„æœåŠ¡æ˜¯é€šè¿‡ <code>docker-compose</code> å¯åŠ¨çš„)ã€‚</li>
<li>å…·æœ‰å®¿ä¸»æœºçš„å‘½ä»¤è¡Œè®¿é—®æƒé™ï¼Œå¹¶æ‹¥æœ‰ <code>sudo</code> æƒé™ï¼ˆç”¨äºåˆ›å»ºç›®å½•å’Œä¿®æ”¹æƒé™ï¼‰ã€‚</li>
<li>ç¡®è®¤ <code>bisheng-frontend</code> å®¹å™¨æ­£åœ¨è¿è¡Œï¼š
<pre><code class="hljs language-bash" lang="bash">docker ps | grep bisheng-frontend
</code></pre>
</li>
</ol>
<hr/>
<h4 data-id="heading-3">ä¸‰ã€æ“ä½œæ­¥éª¤</h4>
<h5 data-id="heading-4">æ­¥éª¤ä¸€ï¼šè¿›å…¥å®¹å™¨å¹¶å®šä½ç›®æ ‡æ–‡ä»¶</h5>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è¿›å…¥å®¹å™¨å†…éƒ¨ï¼Œæ‰¾åˆ°éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶çš„å…·ä½“è·¯å¾„ã€‚</p>
<ol>
<li>
<p><strong>è¿›å…¥ <code>bisheng-frontend</code> å®¹å™¨çš„äº¤äº’å¼ç»ˆç«¯</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">exec</span> -it bisheng-frontend /bin/bash
</code></pre>
<ul>
<li><code>-it</code>: åˆ›å»ºä¸€ä¸ªäº¤äº’å¼çš„ TTY ç»ˆç«¯ã€‚</li>
<li><code>bisheng-frontend</code>: å®¹å™¨åç§°ã€‚</li>
<li><code>/bin/bash</code>: è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</li>
</ul>
</li>
<li>
<p><strong>åœ¨å®¹å™¨å†…æœç´¢éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶</strong>ï¼š
ä¾‹å¦‚ï¼Œæˆ‘ä»¬è¦æœç´¢æ‰€æœ‰å›¾ç‰‡æ–‡ä»¶ï¼ˆ<code>.png</code>, <code>.jpg</code>, <code>.svg</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">find / -name <span class="hljs-string">"*.png"</span> -o -name <span class="hljs-string">"*.jpg"</span> -o -name <span class="hljs-string">"*.svg"</span> 2&gt;/dev/null
</code></pre>
<ul>
<li><code>2&gt;/dev/null</code>: å°†æ— å…³çš„æƒé™é”™è¯¯ä¿¡æ¯ä¸¢å¼ƒï¼Œä½¿è¾“å‡ºæ›´å¹²å‡€ã€‚</li>
</ul>
</li>
<li>
<p><strong>è®°å½•æ–‡ä»¶è·¯å¾„</strong>ï¼š
ä»æœç´¢ç»“æœä¸­ï¼Œæ‰¾åˆ°ä½ éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ï¼Œå¹¶è®°ä¸‹å®ƒçš„å®Œæ•´è·¯å¾„ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>/usr/share/nginx/html/platform/assets/male-technologist-CcgkZdXy.png</code></li>
<li><code>/usr/share/nginx/html/platform/assets/analysis.svg</code></li>
</ul>
</li>
<li>
<p><strong>é€€å‡ºå®¹å™¨</strong>ï¼š
å®Œæˆæ–‡ä»¶å®šä½åï¼Œé€€å‡ºå®¹å™¨ç»ˆç«¯ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">exit</span>
</code></pre>
</li>
</ol>
<h5 data-id="heading-5">æ­¥éª¤äºŒï¼šå°†å®¹å™¨å†…çš„æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°å®¿ä¸»æœº</h5>
<p>ä¸ºäº†å®‰å…¨åœ°ä¿®æ”¹ï¼Œæˆ‘ä»¬å°†å®¹å™¨å†…çš„æ•´ä¸ªé™æ€æ–‡ä»¶ç›®å½•å¤åˆ¶åˆ°æœ¬åœ°ã€‚</p>
<ol>
<li>
<p><strong>åœ¨å®¿ä¸»æœºä¸Šåˆ›å»ºä¸€ä¸ªæœ¬åœ°ç›®å½•</strong>ï¼Œç”¨äºå­˜æ”¾ä»å®¹å™¨ä¸­å¤åˆ¶å‡ºæ¥çš„æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> -p /opt/bisheng-main/local-frontend
</code></pre>
<ul>
<li><code>-p</code>: ç¡®ä¿çˆ¶ç›®å½•å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä¸€å¹¶åˆ›å»ºã€‚</li>
</ul>
</li>
<li>
<p><strong>ï¼ˆå¯é€‰ï¼‰ä¿®æ”¹æœ¬åœ°ç›®å½•æƒé™</strong>ï¼š
ä¸ºäº†ç¡®ä¿ä½ å½“å‰çš„ç”¨æˆ·æœ‰æƒé™è¯»å†™è¯¥ç›®å½•ï¼Œå¯ä»¥ä¿®æ”¹å…¶æƒé™ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å°†ç›®å½•æ‰€æœ‰è€…æ”¹ä¸ºå½“å‰ç”¨æˆ·ï¼ˆæ¨èï¼‰</span>
sudo <span class="hljs-built_in">chown</span> -R <span class="hljs-variable">$USER</span>:<span class="hljs-variable">$USER</span> /opt/bisheng-main/local-frontend

<span class="hljs-comment"># æˆ–è€…ï¼Œç»™äºˆæ›´å®½æ¾çš„æƒé™ï¼ˆä¸æ¨èï¼Œä½†ç®€å•ï¼‰</span>
<span class="hljs-comment"># sudo chmod -R 775 /opt/bisheng-main/local-frontend</span>
</code></pre>
</li>
<li>
<p><strong>å°†å®¹å™¨å†…çš„æ–‡ä»¶ç›®å½•å¤åˆ¶åˆ°æœ¬åœ°</strong>ï¼š
æ ¹æ®æ­¥éª¤ä¸€æ‰¾åˆ°çš„è·¯å¾„ï¼Œæˆ‘ä»¬å¤åˆ¶å…¶ä¸Šçº§ç›®å½•ï¼ˆä¾‹å¦‚ <code>/usr/share/nginx/html</code>ï¼‰åˆ°æœ¬åœ°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">docker <span class="hljs-built_in">cp</span> bisheng-frontend:/usr/share/nginx/html /opt/bisheng-main/local-frontend
</code></pre>
<ul>
<li>è¿™æ¡å‘½ä»¤ä¼šå°†å®¹å™¨å†…çš„ <code>/usr/share/nginx/html</code> ç›®å½•åŠå…¶æ‰€æœ‰å†…å®¹ï¼Œå¤åˆ¶åˆ°æœ¬åœ°çš„ <code>/opt/bisheng-main/local-frontend/</code> ç›®å½•ä¸‹ã€‚å¤åˆ¶å®Œæˆåï¼Œæœ¬åœ°è·¯å¾„ä¼šæ˜¯ <code>/opt/bisheng-main/local-frontend/html/...</code>ã€‚</li>
</ul>
</li>
<li>
<p><strong>éªŒè¯æ–‡ä»¶æ˜¯å¦å¤åˆ¶æˆåŠŸ</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">ls</span> -l /opt/bisheng-main/local-frontend/html/platform/assets/
</code></pre>
<p>ä½ åº”è¯¥èƒ½çœ‹åˆ°ä½ ä¹‹å‰åœ¨å®¹å™¨å†…æ‰¾åˆ°çš„é‚£äº›æ–‡ä»¶ã€‚</p>
</li>
</ol>
<h5 data-id="heading-6">æ­¥éª¤ä¸‰ï¼šåœ¨æœ¬åœ°ä¿®æ”¹æ–‡ä»¶</h5>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨æœ¬åœ°å¯¹æ–‡ä»¶è¿›è¡Œä»»æ„ä¿®æ”¹ã€‚</p>
<ol>
<li><strong>ä½¿ç”¨ä½ å–œæ¬¢çš„ç¼–è¾‘å™¨æˆ–å·¥å…·</strong>ï¼Œæ‰¾åˆ°æœ¬åœ°å¯¹åº”çš„æ–‡ä»¶å¹¶è¿›è¡Œä¿®æ”¹æˆ–æ›¿æ¢ã€‚
<ul>
<li>æœ¬åœ°æ–‡ä»¶è·¯å¾„ç¤ºä¾‹ï¼š<code>/opt/bisheng-main/local-frontend/html/platform/assets/male-technologist-CcgkZdXy.png</code></li>
<li><strong>é‡è¦</strong>ï¼šä¿®æ”¹åçš„æ–‡ä»¶è¯·åŠ¡å¿…ä¿æŒä¸åŸæ–‡ä»¶<strong>ç›¸åŒçš„æ–‡ä»¶å</strong>ã€‚</li>
</ul>
</li>
</ol>
<h5 data-id="heading-7">æ­¥éª¤å››ï¼šé‡æ–°åˆ›å»ºå®¹å™¨å¹¶æŒ‚è½½ä¿®æ”¹åçš„æ–‡ä»¶</h5>
<p>è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ã€‚æˆ‘ä»¬å°†åœæ­¢å¹¶åˆ é™¤æ—§å®¹å™¨ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ï¼Œå¹¶ä½¿ç”¨ Docker çš„å·æŒ‚è½½åŠŸèƒ½ï¼Œå°†æˆ‘ä»¬ä¿®æ”¹å¥½çš„æœ¬åœ°ç›®å½•æŒ‚è½½åˆ°å®¹å™¨å†…ï¼Œä»è€Œè¦†ç›–åŸæœ‰çš„æ–‡ä»¶ã€‚</p>
<ol>
<li>
<p><strong>åœæ­¢å¹¶åˆ é™¤æ­£åœ¨è¿è¡Œçš„ <code>bisheng-frontend</code> å®¹å™¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker stop bisheng-frontend
docker <span class="hljs-built_in">rm</span> bisheng-frontend
</code></pre>
<ul>
<li>æ³¨æ„ï¼šè¿™ä¼šçŸ­æš‚ä¸­æ–­ä½ çš„ <code>bisheng-frontend</code> æœåŠ¡ã€‚</li>
</ul>
</li>
<li>
<p><strong>ï¼ˆé‡è¦ï¼‰ç¡®è®¤å®¹å™¨çš„ç½‘ç»œ</strong>ï¼š
ä¸ºäº†ç¡®ä¿æ–°å®¹å™¨èƒ½å’Œå…¶ä»–æœåŠ¡ï¼ˆå¦‚ <code>bisheng-backend</code>ï¼‰é€šä¿¡ï¼Œéœ€è¦ä½¿ç”¨æ­£ç¡®çš„ç½‘ç»œã€‚</p>
<ul>
<li>
<p><strong>å¦‚æœä½ ä½¿ç”¨ <code>docker-compose</code></strong>ï¼šé€šå¸¸ä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®šç½‘ç»œï¼Œ<code>docker-compose</code> ä¼šè‡ªåŠ¨ç®¡ç†ã€‚</p>
</li>
<li>
<p><strong>å¦‚æœä½ æ‰‹åŠ¨è¿è¡Œå®¹å™¨</strong>ï¼š</p>
</li>
<li>
<p>a.  åˆ—å‡ºæ‰€æœ‰ç½‘ç»œï¼š
<code>bash       docker network ls       </code></p>
<p>b.  æ‰¾åˆ° <code>bisheng-frontend</code> ä¹‹å‰è¿æ¥çš„ç½‘ç»œï¼ˆé€šå¸¸æ˜¯ <code>bisheng_default</code> æˆ– <code>docker_default</code>ï¼‰ã€‚ä½ å¯ä»¥é€šè¿‡æ£€æŸ¥å“ªä¸ªç½‘ç»œåŒ…å« <code>bisheng-backend</code> æ¥ç¡®è®¤ï¼š
<code>bash       docker network inspect docker_default | grep "bisheng-backend"       </code></p>
<p>c.  è®°ä¸‹æ­£ç¡®çš„ç½‘ç»œåç§°ï¼Œä¾‹å¦‚ <code>bisheng_default</code>ã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>é‡æ–°å¯åŠ¨å®¹å™¨ï¼Œå¹¶æŒ‚è½½æœ¬åœ°ä¿®æ”¹åçš„ç›®å½•</strong>ï¼š
ä½¿ç”¨ <code>docker run</code> å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°å®¹å™¨ã€‚<strong>å…³é”®åœ¨äº <code>-v</code> (volume) å‚æ•°</strong>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name bisheng-frontend \
  --network bisheng_default \  <span class="hljs-comment"># æ›¿æ¢ä¸ºä½ åœ¨ä¸Šä¸€æ­¥ç¡®è®¤çš„ç½‘ç»œåç§°</span>
  -p 3001:3001 \
  -v /opt/bisheng-main/local-frontend/html/platform/assets:/usr/share/nginx/html/platform/assets \
  cr.dataelem.com/dataelement/bisheng-frontend:latest
</code></pre>
<ul>
<li><code>-v /local/path:/container/path</code>: è¿™æ˜¯å·æŒ‚è½½å‘½ä»¤ã€‚å®ƒå°†æœ¬åœ°çš„ <code>/opt/bisheng-main/local-frontend/html/platform/assets</code> ç›®å½•ï¼ŒæŒ‚è½½åˆ°å®¹å™¨å†…çš„ <code>/usr/share/nginx/html/platform/assets</code> ç›®å½•ã€‚å®¹å™¨è¿è¡Œæ—¶ï¼Œä¼šä¼˜å…ˆè¯»å–æŒ‚è½½ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œä»è€Œå®ç°äº†æ–‡ä»¶æ›¿æ¢ã€‚</li>
<li><strong>è·¯å¾„æ˜ å°„æŠ€å·§</strong>ï¼šå°½é‡è®©æœ¬åœ°æŒ‚è½½çš„ç›®å½•ç»“æ„ä¸å®¹å™¨å†…çš„ç›®å½•ç»“æ„ä¿æŒä¸€è‡´ï¼Œè¿™æ ·ä¸æ˜“å‡ºé”™ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ£€æŸ¥å®¹å™¨æ˜¯å¦æˆåŠŸå¯åŠ¨</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker ps | grep bisheng-frontend
</code></pre>
<p>å¦‚æœèƒ½çœ‹åˆ° <code>bisheng-frontend</code> å¹¶ä¸”çŠ¶æ€ä¸º <code>Up</code>ï¼Œåˆ™è¡¨ç¤ºå¯åŠ¨æˆåŠŸã€‚</p>
</li>
<li>
<p><strong>éªŒè¯ä¿®æ”¹</strong>ï¼š
æ‰“å¼€æµè§ˆå™¨æˆ–ä½¿ç”¨ <code>curl</code> è®¿é—®ä½ çš„åº”ç”¨ï¼ŒæŸ¥çœ‹ç›¸åº”çš„å›¾ç‰‡æˆ–é™æ€èµ„æºæ˜¯å¦å·²ç»æ›´æ–°ä¸ºä½ ä¿®æ”¹åçš„ç‰ˆæœ¬ã€‚</p>
</li>
</ol>
<hr/>
<h4 data-id="heading-8">å››ã€æ€»ç»“</h4>
<p>é€šè¿‡ä»¥ä¸Šæ­¥éª¤ï¼Œä½ å·²ç»æˆåŠŸåœ°ä¿®æ”¹äº† <code>bisheng-frontend</code> å®¹å™¨ä¸­çš„é™æ€æ–‡ä»¶ã€‚è¿™ç§â€œå¤åˆ¶-ä¿®æ”¹-æŒ‚è½½â€çš„æ–¹æ³•æ˜¯ Docker ç¯å¢ƒä¸‹æ›´æ–°å®¹å™¨å†…å®¹çš„æ ‡å‡†æ“ä½œæµç¨‹ï¼Œå®ƒå®‰å…¨ã€å¯é ä¸”æ˜“äºç®¡ç†ã€‚</p>
<p>å¦‚æœä½ æœªæ¥è¿˜éœ€è¦ä¿®æ”¹å…¶ä»–æ–‡ä»¶ï¼Œåªéœ€é‡å¤<strong>æ­¥éª¤ä¸‰</strong>å’Œ<strong>æ­¥éª¤å››</strong>å³å¯ï¼Œæ— éœ€å†é‡æ–°å¤åˆ¶æ•´ä¸ªç›®å½•ï¼ˆé™¤éå®¹å™¨å†…çš„åŸå§‹æ–‡ä»¶åˆå‘ç”Ÿäº†å˜åŒ–ï¼‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…¨é‡å¾®è°ƒ vs LoRA:ä¸€ç¯‡æ–‡ç« å½»åº•ææ‡‚å‚æ•°é«˜æ•ˆå¾®è°ƒ]]></title>    <link>https://juejin.cn/post/7576307259385643035</link>    <guid>https://juejin.cn/post/7576307259385643035</guid>    <pubDate>2025-11-25T07:05:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576307259385643035" data-draft-id="7576470438579847194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…¨é‡å¾®è°ƒ vs LoRA:ä¸€ç¯‡æ–‡ç« å½»åº•ææ‡‚å‚æ•°é«˜æ•ˆå¾®è°ƒ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T07:05:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±…ç„¶JuRan"/> <meta itemprop="url" content="https://juejin.cn/user/2524134427858205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…¨é‡å¾®è°ƒ vs LoRA:ä¸€ç¯‡æ–‡ç« å½»åº•ææ‡‚å‚æ•°é«˜æ•ˆå¾®è°ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134427858205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±…ç„¶JuRan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:05:37.000Z" title="Tue Nov 25 2025 07:05:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€:å¾®è°ƒå¾ˆé‡è¦,ä½†æˆæœ¬èƒ½é™96%å—?</h2>
<p>å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹(å¦‚Llamaã€Qwen)æ—¶,å¸¸å¸¸å‘ç°å®ƒåœ¨æŸäº›ä»»åŠ¡ä¸Šè¡¨ç°ä¸å¤Ÿå¥½ã€‚è¿™æ—¶å€™,**å¾®è°ƒ(Fine-tuning)**å°±æˆäº†æå‡æ¨¡å‹èƒ½åŠ›çš„å…³é”®æ‰‹æ®µã€‚</p>
<p>ä½†é—®é¢˜æ¥äº†:å¾®è°ƒä¸€ä¸ª70Bå‚æ•°çš„æ¨¡å‹,å¯èƒ½éœ€è¦æ•°ç™¾GBæ˜¾å­˜å’Œæ•°ä¸‡å…ƒæˆæœ¬ã€‚æœ‰æ²¡æœ‰æ›´ç»æµçš„æ–¹æ³•?</p>
<p>ä»Šå¤©æˆ‘ä»¬è¦è®²çš„<strong>LoRA(Low-Rank Adaptation)æŠ€æœ¯,èƒ½è®©ä½ ç”¨ä¸åˆ°4%çš„èµ„æº</strong>å®Œæˆå¾®è°ƒ,æ•ˆæœè¿˜ä¸å·®!è¿™æ˜¯æ€ä¹ˆåšåˆ°çš„?è®©æˆ‘ä»¬ä»å¾®è°ƒçš„æœ¬è´¨è¯´èµ·ã€‚</p>
<h2 data-id="heading-1">ğŸ¯ å¾®è°ƒçš„æœ¬è´¨:æ”¹å˜å‚æ•°</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯å¾®è°ƒ?</h3>
<p>ç®€å•æ¥è¯´,å¾®è°ƒå°±æ˜¯:</p>
<ul>
<li>
<p><strong>å‘ç°</strong>æ¨¡å‹åœ¨æŸæ–¹é¢èƒ½åŠ›ä¸è¶³</p>
</li>
<li>
<p><strong>é€šè¿‡è®­ç»ƒ</strong>æ›´æ–°æ¨¡å‹å‚æ•°</p>
</li>
<li>
<p><strong>å¾—åˆ°</strong>èƒ½åŠ›æå‡çš„æ–°æ¨¡å‹</p>
</li>
</ul>
<h3 data-id="heading-3">å‚æ•°æ˜¯ä»€ä¹ˆ?</h3>
<p>å¤§æ¨¡å‹èƒŒåæ˜¯<strong>æ•°åäº¿ã€æ•°ç™¾äº¿çš„å‚æ•°</strong>(æœ¬è´¨ä¸Šå°±æ˜¯å¾ˆå¤šæ•°å­—)ã€‚è¿™äº›å‚æ•°é€šå¸¸ç»„ç»‡æˆçŸ©é˜µå½¢å¼:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">åŸå§‹å‚æ•°çŸ©é˜µ:
[0.1  0.2  0.3]
[0.4  0.5  0.6]
[0.7  0.8  0.9]
</code></pre>
<p>å¾®è°ƒå,è¿™äº›æ•°å­—ä¼šå‘ç”Ÿå˜åŒ–:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">æ–°å‚æ•°çŸ©é˜µ:
[0.2  0.1  0.4]  â† 0.1å˜æˆäº†0.2
[0.3  0.6  0.5]
[0.8  0.7  1.0]
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒæ´å¯Ÿ:æ”¹åŠ¨é‡æ‰æ˜¯å…³é”®!</h3>
<p>æˆ‘ä»¬å¯ä»¥æ¢ä¸ªè§’åº¦çœ‹è¿™ä¸ªè¿‡ç¨‹:</p>
<p><strong>æ–°å‚æ•° = åŸå‚æ•° + æ”¹åŠ¨é‡Î”</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">0.2 = 0.1 + 0.1
0.1 = 0.2 - 0.1
</code></pre>
<p><strong>æ‰€ä»¥,å¾®è°ƒçš„æœ¬è´¨å°±æ˜¯å­¦ä¹ è¿™ä¸ª"æ”¹åŠ¨é‡Î”"!</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bc2638667f80416e8f29752c2c6914c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764659136&amp;x-signature=51CXR97NN5PMNPcZeMSoOV1MhnE%3D" alt="å¾®è°ƒæœ¬è´¨æ‰‹ç»˜å›¾" loading="lazy"/></p>
<h2 data-id="heading-5">ğŸ“š å…¨é‡å¾®è°ƒ:æœ€ç›´æ¥ä½†æœ€"è´µ"çš„æ–¹æ³•</h2>
<p>å…¨é‡å¾®è°ƒ(Full Fine-tuning)å°±æ˜¯:æŠŠæ¨¡å‹çš„<strong>æ¯ä¸€ä¸ªå‚æ•°</strong>éƒ½é€šè¿‡è®­ç»ƒæ¥æ›´æ–°ã€‚</p>
<h3 data-id="heading-6">èµ„æºæ¶ˆè€—æœ‰å¤šææ€–?</h3>
<p>å‡è®¾æˆ‘ä»¬è¦å¾®è°ƒä¸€ä¸ª<strong>100äº¿å‚æ•°</strong>çš„æ¨¡å‹:</p>
<ul>
<li>
<p>éœ€è¦å­¦ä¹ <strong>100äº¿ä¸ªæ•°å­—</strong></p>
</li>
<li>
<p>æ˜¾å­˜å ç”¨:<strong>æ•°ç™¾GB</strong>(å‚æ•° + æ¢¯åº¦ + ä¼˜åŒ–å™¨çŠ¶æ€)</p>
</li>
<li>
<p>è®­ç»ƒæ—¶é—´:<strong>æ•°å¤©åˆ°æ•°å‘¨</strong></p>
</li>
<li>
<p>æˆæœ¬:<strong>æ•°ä¸‡å…ƒèµ·æ­¥</strong></p>
</li>
</ul>
<p>**é—®é¢˜:**è¿™å¯¹ä¸ªäººå¼€å‘è€…å’Œå°å›¢é˜Ÿæ¥è¯´,å‡ ä¹ä¸å¯èƒ½!</p>
<h2 data-id="heading-7">ğŸ’¡ LoRAçš„çµæ„Ÿ:å•°å—¦çš„å¼ ä¸‰</h2>
<p>åœ¨ä»‹ç»LoRAä¹‹å‰,è®©æˆ‘ä»¬å¬ä¸€ä¸ªæ•…äº‹:</p>
<blockquote>
<p>å¼ ä¸‰æ¥åˆ°ä»»åŠ¡:å†™ä¸€ç¯‡2000å­—çš„æ–‡ç« ã€‚</p>
<p>ä½†å¼ ä¸‰è¿™ä¸ªäººç‰¹åˆ«å•°å—¦,å†™å‡ºæ¥çš„2000å­—æ–‡ç« é‡Œ:</p>
<ul>
<li>
<p>æœ‰å¤§é‡é‡å¤å†…å®¹</p>
</li>
<li>
<p>è¡¨è¾¾ä¸å¤Ÿç®€æ´</p>
</li>
<li>
<p><strong>å®é™…ä¿¡æ¯å¯èƒ½åªéœ€è¦200å­—å°±èƒ½è¯´æ¸…æ¥š!</strong></p>
</li>
</ul>
</blockquote>
<p>è¿™å°±å¼•å‡ºä¸€ä¸ªé—®é¢˜:<strong>å¾®è°ƒå­¦åˆ°çš„æ•°äº¿å‚æ•°,æ˜¯ä¸æ˜¯ä¹Ÿå­˜åœ¨å¤§é‡å†—ä½™?</strong></p>
<p>å¦‚æœä¸€ä¸ªçŸ©é˜µçœ‹èµ·æ¥æœ‰å¾ˆå¤šå‚æ•°,ä½†å®é™…ä¿¡æ¯é‡å¾ˆå°‘,é‚£æˆ‘ä»¬èŠ±è¿™ä¹ˆå¤šèµ„æºå»å­¦ä¹ å®ƒ,æ˜¯ä¸æ˜¯ä¸€ç§æµªè´¹?</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/26cb94f1b60045a1a87102b397e28f7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764659136&amp;x-signature=TE6%2FsxsciTUdtcNveJV5SW1Chjs%3D" alt="å‚æ•°å†—ä½™æ€§æ‰‹ç»˜å›¾" loading="lazy"/></p>
<h3 data-id="heading-8">å‚æ•°å†—ä½™çš„ä¾‹å­</h3>
<p>çœ‹è¿™ä¸ª3Ã—3çš„çŸ©é˜µ:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">[1  2  3]
[1  2  3]  â† å’Œç¬¬ä¸€è¡Œå®Œå…¨ä¸€æ ·!
[1  2  3]  â† è¿˜æ˜¯ä¸€æ ·!
</code></pre>
<p>å®é™…ä¸Š,æˆ‘ä»¬åªéœ€è¦çŸ¥é“ç¬¬ä¸€è¡Œ<code>[1 2 3]</code>,å…¶ä»–ä¸¤è¡Œéƒ½æ˜¯å†—ä½™çš„ã€‚</p>
<p>å†çœ‹å¦ä¸€ä¸ª:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">[1  1  2]
[2  2  4]  â† ç¬¬ä¸€è¡Œæ¯ä¸ªæ•°Ã—2
[4  4  8]  â† ç¬¬ä¸€è¡Œæ¯ä¸ªæ•°Ã—4
</code></pre>
<p>æœ‰ä»·å€¼çš„å¯èƒ½å°±ç¬¬ä¸€è¡Œ,å…¶ä»–è¡Œéƒ½èƒ½æ¨å¯¼å‡ºæ¥!</p>
<h2 data-id="heading-9">ğŸ­ å¾®è°ƒçš„æ‚–è®º:æˆ‘ä»¬"å¸Œæœ›"å‚æ•°å†—ä½™!</h2>
<p>è¿™é‡Œæœ‰ä¸ªæœ‰è¶£çš„åè½¬:<strong>ä»å¾®è°ƒçš„æœ¬è´¨æ¥çœ‹,æˆ‘ä»¬ç¡®å®å¸Œæœ›æ”¹åŠ¨é‡çš„ä¿¡æ¯æ˜¯æœ‰é™çš„!</strong></p>
<h3 data-id="heading-10">ä¸ºä»€ä¹ˆ?</h3>
<p>å¾®è°ƒçš„ç›®æ ‡æ˜¯:</p>
<ol>
<li>
<p>âœ… <strong>å¢å¼ºæŸæ–¹é¢èƒ½åŠ›</strong>(æ¯”å¦‚æ³•å¾‹é—®ç­”)</p>
</li>
<li>
<p>âœ… <strong>ä¿ç•™å…¶ä»–èƒ½åŠ›</strong>(é€šç”¨æ¨ç†ã€æ•°å­¦ã€ç¼–ç¨‹...)</p>
</li>
</ol>
<p>å¦‚æœæ”¹åŠ¨å¤ªå¤§,ä¼šå¯¼è‡´ä»€ä¹ˆ?<strong>ç¾éš¾æ€§é—å¿˜(Catastrophic Forgetting)</strong>!</p>
<blockquote>
<p>æ¯”å¦‚ä½ å¾®è°ƒä¸€ä¸ªæ¨¡å‹åšåŒ»ç–—é—®ç­”,è®­ç»ƒè¿‡åº¦å:</p>
<ul>
<li>
<p>âœ… åŒ»ç–—é—®ç­”èƒ½åŠ›æå‡äº†</p>
</li>
<li>
<p>âŒ ä½†æ•°å­¦èƒ½åŠ›ã€ç¼–ç¨‹èƒ½åŠ›å¯èƒ½å¤§å¹…ä¸‹é™!</p>
</li>
</ul>
</blockquote>
<p>æ‰€ä»¥,<strong>å¥½çš„å¾®è°ƒåº”è¯¥æ˜¯"æ”¹åŠ¨æœ‰é™,å½±å“ç²¾å‡†"</strong>ã€‚è¿™æ­£æ˜¯LoRAçš„ç†è®ºåŸºç¡€!</p>
<h2 data-id="heading-11">âœ¨ LoRAçš„é­”æ³•:çŸ©é˜µåˆ†è§£</h2>
<p>æ—¢ç„¶æ”¹åŠ¨é‡Î”çš„ä¿¡æ¯æ˜¯æœ‰é™çš„,æœ‰æ²¡æœ‰åŠæ³•ç”¨<strong>æ›´å°‘çš„å‚æ•°</strong>æ¥è¡¨ç¤ºå®ƒ?</p>
<p>ç­”æ¡ˆæ˜¯:<strong>çŸ©é˜µåˆ†è§£!</strong></p>
<h3 data-id="heading-12">æ ¸å¿ƒå…¬å¼</h3>
<p>å‡è®¾æˆ‘ä»¬è¦å­¦ä¹ ä¸€ä¸ª100Ã—100çš„æ”¹åŠ¨çŸ©é˜µW(åŒ…å«1ä¸‡ä¸ªå‚æ•°)ã€‚</p>
<p>**LoRAåšæ³•:**ä¸ç›´æ¥å­¦ä¹ W,è€Œæ˜¯å­¦ä¹ ä¸¤ä¸ªå°çŸ©é˜µAå’ŒB:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">W â‰ˆ A Ã— B

W: 100Ã—100 (1ä¸‡å‚æ•°)
A: 100Ã—2  (200å‚æ•°)
B: 2Ã—100  (200å‚æ•°)

æ€»å…±: 400å‚æ•° = 1ä¸‡å‚æ•°çš„4%!
</code></pre>
<h3 data-id="heading-13">ä¸ºä»€ä¹ˆå¯ä»¥è¿™æ ·?</h3>
<p>è¿™æ¥è‡ªçº¿æ€§ä»£æ•°çš„ä¸€ä¸ªæ€§è´¨:å¦‚æœä¸€ä¸ªçŸ©é˜µçš„<strong>ä¿¡æ¯é‡æœ‰é™</strong>(ç§©è¾ƒä½),å®ƒå¯ä»¥è¢«è¿‘ä¼¼åˆ†è§£ä¸ºä¸¤ä¸ªå°çŸ©é˜µçš„ä¹˜ç§¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9460adc9308643b2b8d12c6fd852680c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764659136&amp;x-signature=J5JQRNTRn7ygN5Fdg7in6U%2B3pFg%3D" alt="LoRAçŸ©é˜µåˆ†è§£æ‰‹ç»˜å›¾" loading="lazy"/></p>
<h3 data-id="heading-14">å®é™…ä¾‹å­</h3>
<p>**ç›®æ ‡:**å­¦ä¹ 1ä¸‡ä¸ªå‚æ•°çš„çŸ©é˜µW</p>
<p><strong>å…¨é‡å¾®è°ƒ:</strong></p>
<ul>
<li>
<p>éœ€è¦å­¦ä¹ 1ä¸‡ä¸ªæ•°å­—</p>
</li>
<li>
<p>æ˜¾å­˜å ç”¨å·¨å¤§</p>
</li>
</ul>
<p><strong>LoRA(Rank=2):</strong></p>
<ul>
<li>
<p>å­¦ä¹ çŸ©é˜µA(200å‚æ•°) + çŸ©é˜µB(200å‚æ•°)</p>
</li>
<li>
<p>æ€»å…±400å‚æ•°</p>
</li>
<li>
<p><strong>å‚æ•°é‡å‡å°‘96%!</strong></p>
</li>
</ul>
<p><strong>LoRA(Rank=1):</strong></p>
<ul>
<li>
<p>å­¦ä¹ çŸ©é˜µA(100å‚æ•°) + çŸ©é˜µB(100å‚æ•°)</p>
</li>
<li>
<p>æ€»å…±200å‚æ•°</p>
</li>
<li>
<p><strong>å‚æ•°é‡å‡å°‘98%!</strong></p>
</li>
</ul>
<h2 data-id="heading-15">ğŸšï¸ Rankå‚æ•°:æ§åˆ¶ä¿¡æ¯é‡çš„å¼€å…³</h2>
<p>åœ¨LoRAä¸­,**Rank(ç§©)**æ˜¯ä¸€ä¸ªå…³é”®è¶…å‚æ•°,å®ƒå†³å®šäº†åˆ†è§£åçŸ©é˜µçš„"ä¸­é—´ç»´åº¦"ã€‚</p>
<h3 data-id="heading-16">Rankçš„å«ä¹‰</h3>
<ul>
<li>
<p><strong>Rankè¶Šå°</strong>:è®¤ä¸ºä¿¡æ¯é‡è¶Šå°‘,å‚æ•°æ›´å°‘,æ›´çœèµ„æº</p>
</li>
<li>
<p><strong>Rankè¶Šå¤§</strong>:è®¤ä¸ºä¿¡æ¯é‡è¶Šå¤š,å‚æ•°æ›´å¤š,æ›´æ¥è¿‘å…¨é‡å¾®è°ƒ</p>
</li>
</ul>
<h3 data-id="heading-17">å‚æ•°é‡å¯¹æ¯”</h3>
<p>ä»¥100Ã—100çš„çŸ©é˜µä¸ºä¾‹:</p>








































<table><thead><tr><th>Rank</th><th>AçŸ©é˜µå¤§å°</th><th>BçŸ©é˜µå¤§å°</th><th>æ€»å‚æ•°</th><th>å æ¯”</th></tr></thead><tbody><tr><td>1</td><td>100Ã—1</td><td>1Ã—100</td><td>200</td><td>2%</td></tr><tr><td>2</td><td>100Ã—2</td><td>2Ã—100</td><td>400</td><td>4%</td></tr><tr><td>8</td><td>100Ã—8</td><td>8Ã—100</td><td>1600</td><td>16%</td></tr><tr><td>32</td><td>100Ã—32</td><td>32Ã—100</td><td>6400</td><td>64%</td></tr></tbody></table>
<h3 data-id="heading-18">å®è·µä¸­å¦‚ä½•é€‰æ‹©?</h3>
<p>åœ¨å¤§æ¨¡å‹å¾®è°ƒä¸­,Ranké€šå¸¸é€‰æ‹©<strong>8ã€16ã€32</strong>:</p>
<ul>
<li>
<p>âœ… æ—¢èƒ½ä¿è¯æ•ˆæœ</p>
</li>
<li>
<p>âœ… åˆèƒ½å¤§å¹…èŠ‚çœèµ„æº</p>
</li>
<li>
<p>âœ… å¤§æ¨¡å‹å‚æ•°å¤š,å³ä½¿Rank=32,å æ¯”ä¹Ÿå¾ˆå°</p>
</li>
</ul>
<p>**æ¡ˆä¾‹:**70Bæ¨¡å‹å¾®è°ƒ</p>
<ul>
<li>
<p>å…¨é‡å¾®è°ƒ:éœ€è¦æ›´æ–°700äº¿å‚æ•°</p>
</li>
<li>
<p>LoRA(Rank=16):å¯èƒ½åªéœ€è¦æ›´æ–°<strong>å‡ äº¿å‚æ•°</strong></p>
</li>
<li>
<p><strong>å‚æ•°é‡å‡å°‘90%ä»¥ä¸Š!</strong></p>
</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/972a51f7e4fb4daea896a32214abfdc9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764659136&amp;x-signature=DaaOSZIRPwF2yXBVBavrQmmnP3E%3D" alt="Rankå‚æ•°é€‰æ‹©æ‰‹ç»˜å›¾" loading="lazy"/></p>
<h2 data-id="heading-19">âš–ï¸ å…¨é‡å¾®è°ƒ vs LoRA:ç»ˆæå¯¹æ¯”</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e02fa1db62e645d382ea6e977a13be7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764659136&amp;x-signature=9x9m%2BKrYtIYN%2F%2F6FrihtWgT44X4%3D" alt="å…¨é‡å¾®è°ƒvs LoRAå¯¹æ¯”å›¾" loading="lazy"/></p>
<h3 data-id="heading-20">å¯¹æ¯”è¡¨æ ¼</h3>








































<table><thead><tr><th>ç»´åº¦</th><th>å…¨é‡å¾®è°ƒ</th><th>LoRA</th></tr></thead><tbody><tr><td><strong>è®­ç»ƒå‚æ•°é‡</strong></td><td>100%</td><td>2%-16%</td></tr><tr><td><strong>æ˜¾å­˜å ç”¨</strong></td><td>æé«˜(æ•°ç™¾GB)</td><td>ä½(å‡ åGB)</td></tr><tr><td><strong>è®­ç»ƒæ—¶é—´</strong></td><td>æ•°å¤©åˆ°æ•°å‘¨</td><td>æ•°å°æ—¶åˆ°ä¸€å¤©</td></tr><tr><td><strong>è®­ç»ƒæˆæœ¬</strong></td><td>$æ•°ä¸‡</td><td>$æ•°ç™¾åˆ°æ•°åƒ</td></tr><tr><td><strong>çµæ´»æ€§</strong></td><td>ä½(æ¨¡å‹å›ºå®š)</td><td>é«˜(å¯åˆ‡æ¢å¤šä¸ªLoRA)</td></tr><tr><td><strong>æ•ˆæœ</strong></td><td>æœ€ä¼˜</td><td>æ¥è¿‘å…¨é‡å¾®è°ƒ(90-95%)</td></tr></tbody></table>
<h3 data-id="heading-21">å®é™…æ¡ˆä¾‹:Llama-70Bå¾®è°ƒ</h3>
<p>**åœºæ™¯:**åœ¨ç‰¹å®šé¢†åŸŸæ•°æ®ä¸Šå¾®è°ƒLlama-70B</p>
<p><strong>å…¨é‡å¾®è°ƒ:</strong></p>
<ul>
<li>
<p>GPU:8Ã—A100(80GB)</p>
</li>
<li>
<p>è®­ç»ƒæ—¶é—´:7å¤©</p>
</li>
<li>
<p>æˆæœ¬:çº¦$15,000</p>
</li>
<li>
<p>å­˜å‚¨:æ¨¡å‹å‰¯æœ¬140GB</p>
</li>
</ul>
<p><strong>LoRA(Rank=16):</strong></p>
<ul>
<li>
<p>GPU:2Ã—A100(80GB)å³å¯</p>
</li>
<li>
<p>è®­ç»ƒæ—¶é—´:1å¤©</p>
</li>
<li>
<p>æˆæœ¬:çº¦$1,000</p>
</li>
<li>
<p>å­˜å‚¨:LoRAæƒé‡ä»…<strong>å‡ ç™¾MB</strong></p>
</li>
</ul>
<p><strong>æˆæœ¬é™ä½93%,æ—¶é—´ç¼©çŸ­85%!</strong></p>
<h2 data-id="heading-22">ğŸ¯ å®æˆ˜å»ºè®®:ä»€ä¹ˆæ—¶å€™ç”¨å“ªä¸ª?</h2>
<h3 data-id="heading-23">é€‰æ‹©å…¨é‡å¾®è°ƒçš„åœºæ™¯</h3>
<p>âœ… <strong>é¢„ç®—å……è¶³</strong>:æœ‰è¶³å¤Ÿçš„GPUèµ„æºå’Œæ—¶é—´<br/>
âœ… <strong>å¤§å¹…æ”¹å˜æ¨¡å‹</strong>:éœ€è¦åœ¨å…¨æ–°é¢†åŸŸé‡è®­ç»ƒ<br/>
âœ… <strong>è¿½æ±‚æè‡´æ•ˆæœ</strong>:å¯¹æ€§èƒ½è¦æ±‚æé«˜<br/>
âœ… <strong>æ•°æ®é‡å·¨å¤§</strong>:æœ‰æ•°ç™¾ä¸‡æ¡é«˜è´¨é‡è®­ç»ƒæ•°æ®</p>
<h3 data-id="heading-24">é€‰æ‹©LoRAçš„åœºæ™¯</h3>
<p>âœ… <strong>èµ„æºæœ‰é™</strong>:ä¸ªäººå¼€å‘è€…ã€å°å›¢é˜Ÿ<br/>
âœ… <strong>å¿«é€Ÿè¿­ä»£</strong>:éœ€è¦é¢‘ç¹å®éªŒå’Œè°ƒæ•´<br/>
âœ… <strong>å‚ç›´é¢†åŸŸå®šåˆ¶</strong>:åªéœ€å¢å¼ºç‰¹å®šèƒ½åŠ›<br/>
âœ… <strong>å¤šä»»åŠ¡åˆ‡æ¢</strong>:éœ€è¦åŒä¸€æ¨¡å‹æ”¯æŒå¤šä¸ªåœºæ™¯</p>
<h3 data-id="heading-25">LoRAçš„é¢å¤–ä¼˜åŠ¿:æŠ€èƒ½åŒ…åˆ‡æ¢</h3>
<p>LoRAè¿˜æœ‰ä¸€ä¸ªå·¨å¤§ä¼˜åŠ¿:<strong>å¯æ’æ‹”å¼æŠ€èƒ½åŒ…</strong>!</p>
<pre><code class="hljs language-plaintext" lang="plaintext">åŸºç¡€æ¨¡å‹ + LoRA_A(æ³•å¾‹) = æ³•å¾‹åŠ©æ‰‹
åŸºç¡€æ¨¡å‹ + LoRA_B(åŒ»ç–—) = åŒ»ç–—åŠ©æ‰‹
åŸºç¡€æ¨¡å‹ + LoRA_C(é‡‘è) = é‡‘èåŠ©æ‰‹
</code></pre>
<ul>
<li>
<p>åªéœ€å­˜å‚¨ä¸€ä¸ªåŸºç¡€æ¨¡å‹</p>
</li>
<li>
<p>ä¸ºä¸åŒä»»åŠ¡è®­ç»ƒå¤šä¸ªLoRA</p>
</li>
<li>
<p>æ¯ä¸ªLoRAåªæœ‰å‡ ç™¾MB</p>
</li>
<li>
<p>å¯ä»¥å¿«é€Ÿåˆ‡æ¢"æŠ€èƒ½"</p>
</li>
</ul>
<p><strong>è¿™åœ¨å¤šç§Ÿæˆ·åœºæ™¯ä¸‹ç‰¹åˆ«æœ‰ç”¨!</strong></p>
<h2 data-id="heading-26">ğŸ“ æ€»ç»“:LoRAè®©å¾®è°ƒå¹³æ°‘åŒ–</h2>
<h3 data-id="heading-27">æ ¸å¿ƒè¦ç‚¹å›é¡¾</h3>
<ol>
<li>
<p><strong>å¾®è°ƒæœ¬è´¨</strong>:å­¦ä¹ å‚æ•°çš„æ”¹åŠ¨é‡Î”</p>
</li>
<li>
<p><strong>å…¨é‡å¾®è°ƒ</strong>:å­¦ä¹ æ‰€æœ‰å‚æ•°,èµ„æºæ¶ˆè€—å¤§</p>
</li>
<li>
<p><strong>LoRAçµæ„Ÿ</strong>:å‚æ•°æ”¹åŠ¨å­˜åœ¨å†—ä½™æ€§</p>
</li>
<li>
<p><strong>å¾®è°ƒæ‚–è®º</strong>:æˆ‘ä»¬å¸Œæœ›æ”¹åŠ¨æœ‰é™,é¿å…é—å¿˜</p>
</li>
<li>
<p><strong>çŸ©é˜µåˆ†è§£</strong>:ç”¨ä¸¤ä¸ªå°çŸ©é˜µè¿‘ä¼¼å¤§çŸ©é˜µ</p>
</li>
<li>
<p><strong>Rankå‚æ•°</strong>:æ§åˆ¶ä¿¡æ¯é‡å’Œå‚æ•°é‡çš„å¹³è¡¡</p>
</li>
<li>
<p><strong>èµ„æºèŠ‚çœ</strong>:å¯é™ä½90%ä»¥ä¸Šçš„æˆæœ¬</p>
</li>
</ol>
<h3 data-id="heading-28">LoRAçš„æ„ä¹‰</h3>
<p>åœ¨LoRAä¹‹å‰,å¾®è°ƒå¤§æ¨¡å‹æ˜¯<strong>å¤§å‚çš„ä¸“åˆ©</strong>:</p>
<ul>
<li>
<p>éœ€è¦æ•°åå¼ A100</p>
</li>
<li>
<p>éœ€è¦ä¸“ä¸šå·¥ç¨‹å›¢é˜Ÿ</p>
</li>
<li>
<p>æˆæœ¬åŠ¨è¾„æ•°ä¸‡ç¾å…ƒ</p>
</li>
</ul>
<p><strong>LoRAçš„å‡ºç°,è®©ä¸ªäººå¼€å‘è€…ä¹Ÿèƒ½è´Ÿæ‹…å¾—èµ·å¤§æ¨¡å‹å¾®è°ƒ!</strong></p>
<h3 data-id="heading-29">æœªæ¥è¶‹åŠ¿</h3>
<p>LoRAåªæ˜¯**å‚æ•°é«˜æ•ˆå¾®è°ƒ(PEFT)**æŠ€æœ¯çš„ä¸€ç§,è¿˜æœ‰:</p>
<ul>
<li>
<p><strong>QLoRA</strong>:ç»“åˆé‡åŒ–,è¿›ä¸€æ­¥é™ä½æ˜¾å­˜</p>
</li>
<li>
<p><strong>AdaLoRA</strong>:è‡ªé€‚åº”è°ƒæ•´ä¸åŒå±‚çš„Rank</p>
</li>
<li>
<p><strong>LoRA+</strong>:æ”¹è¿›åˆå§‹åŒ–ç­–ç•¥,æ•ˆæœæ›´å¥½</p>
</li>
</ul>
<p><strong>å¾®è°ƒçš„é—¨æ§›ä¼šè¶Šæ¥è¶Šä½,æˆæœ¬ä¼šè¶Šæ¥è¶Šä½!</strong></p>
<hr/>
<p><strong>ä½ å°è¯•è¿‡LoRAå¾®è°ƒå—?æ•ˆæœå¦‚ä½•?æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒ!</strong> ğŸ’¬</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¢å•äº‹ä»¶æ¶ˆè´¹è€…è¿ç§»æ–¹æ¡ˆ - å¹‚ç­‰æ€§ä¸å¯é æ€§è®¾è®¡]]></title>    <link>https://juejin.cn/post/7576212547235987499</link>    <guid>https://juejin.cn/post/7576212547235987499</guid>    <pubDate>2025-11-25T07:10:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576212547235987499" data-draft-id="7576276707331276806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¢å•äº‹ä»¶æ¶ˆè´¹è€…è¿ç§»æ–¹æ¡ˆ - å¹‚ç­‰æ€§ä¸å¯é æ€§è®¾è®¡"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:10:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="qwepoilkjasd"/> <meta itemprop="url" content="https://juejin.cn/user/318221180214507"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¢å•äº‹ä»¶æ¶ˆè´¹è€…è¿ç§»æ–¹æ¡ˆ - å¹‚ç­‰æ€§ä¸å¯é æ€§è®¾è®¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/318221180214507/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    qwepoilkjasd
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:10:28.000Z" title="Tue Nov 25 2025 07:10:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®¢å•äº‹ä»¶æ¶ˆè´¹è€…è¿ç§»æ–¹æ¡ˆ - å¹‚ç­‰æ€§ä¸å¯é æ€§è®¾è®¡</h2>
<h3 data-id="heading-1">1. æ•´ä½“æ¶æ„è®¾è®¡</h3>
<h4 data-id="heading-2">1.1 å¹‚ç­‰æ€§å±‚æ¬¡</h4>
<ul>
<li><strong>æ¶ˆæ¯å¹‚ç­‰</strong>: é˜²æ­¢åŒä¸€æ¶ˆæ¯è¢«é‡å¤æ¶ˆè´¹</li>
<li><strong>ä¸šåŠ¡å¹‚ç­‰</strong>: é˜²æ­¢åŒä¸€ä¸šåŠ¡æ“ä½œè¢«é‡å¤æ‰§è¡Œ</li>
<li><strong>çŠ¶æ€æœºå¹‚ç­‰</strong>: é˜²æ­¢çŠ¶æ€æœºé‡å¤æµè½¬</li>
</ul>
<h4 data-id="heading-3">1.2 æ ¸å¿ƒç»„ä»¶</h4>
<ul>
<li>å¹‚ç­‰è¡¨(idempotent_record)</li>
<li>åˆ†å¸ƒå¼é”</li>
<li>äº‹åŠ¡ç®¡ç†</li>
<li>é‡è¯•æœºåˆ¶</li>
<li>å…œåº•è¡¥å¿</li>
</ul>
<hr/>
<h3 data-id="heading-4">2. æ•°æ®åº“è®¾è®¡</h3>
<h4 data-id="heading-5">2.1 å¹‚ç­‰è®°å½•è¡¨</h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">CREATE</span> <span class="hljs-selector-tag">TABLE</span> `<span class="hljs-selector-tag">idempotent_record</span>` (
  <span class="hljs-built_in">`id`</span> <span class="hljs-built_in">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> NULL AUTO_INCREMENT,
  <span class="hljs-built_in">`biz_id`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'ä¸šåŠ¡ID(è®¢å•ID)'</span>,
  <span class="hljs-built_in">`event_type`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'äº‹ä»¶ç±»å‹'</span>,
  <span class="hljs-built_in">`message_id`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">128</span>) <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'æ¶ˆæ¯ID'</span>,
  <span class="hljs-built_in">`idempotent_key`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">256</span>) <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'å¹‚ç­‰é”®'</span>,
  <span class="hljs-built_in">`status`</span> <span class="hljs-built_in">TINYINT</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> NULL DEFAULT <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'å¤„ç†çŠ¶æ€:0-å¤„ç†ä¸­,1-æˆåŠŸ,2-å¤±è´¥'</span>,
  <span class="hljs-built_in">`retry_count`</span> <span class="hljs-built_in">INT</span>(<span class="hljs-number">11</span>) DEFAULT <span class="hljs-number">0</span> COMMENT <span class="hljs-string">'é‡è¯•æ¬¡æ•°'</span>,
  <span class="hljs-built_in">`error_msg`</span> TEXT COMMENT <span class="hljs-string">'é”™è¯¯ä¿¡æ¯'</span>,
  <span class="hljs-built_in">`request_data`</span> TEXT COMMENT <span class="hljs-string">'è¯·æ±‚æ•°æ®'</span>,
  <span class="hljs-built_in">`response_data`</span> TEXT COMMENT <span class="hljs-string">'å“åº”æ•°æ®'</span>,
  <span class="hljs-built_in">`created_time`</span> DATETIME <span class="hljs-keyword">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP,
  <span class="hljs-built_in">`updated_time`</span> DATETIME <span class="hljs-keyword">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  <span class="hljs-built_in">`expired_time`</span> DATETIME <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'è¿‡æœŸæ—¶é—´'</span>,
  PRIMARY KEY (<span class="hljs-built_in">`id`</span>),
  UNIQUE KEY <span class="hljs-built_in">`uk_idempotent_key`</span> (<span class="hljs-built_in">`idempotent_key`</span>),
  KEY <span class="hljs-built_in">`idx_biz_id`</span> (<span class="hljs-built_in">`biz_id`</span>),
  KEY <span class="hljs-built_in">`idx_message_id`</span> (<span class="hljs-built_in">`message_id`</span>),
  KEY <span class="hljs-built_in">`idx_status_retry`</span> (<span class="hljs-built_in">`status`</span>, <span class="hljs-built_in">`retry_count`</span>),
  KEY <span class="hljs-built_in">`idx_expired_time`</span> (<span class="hljs-built_in">`expired_time`</span>)
) <span class="hljs-selector-tag">ENGINE</span>=<span class="hljs-selector-tag">InnoDB</span> <span class="hljs-selector-tag">DEFAULT</span> <span class="hljs-selector-tag">CHARSET</span>=<span class="hljs-selector-tag">utf8mb4</span> <span class="hljs-selector-tag">COMMENT</span>='å¹‚ç­‰è®°å½•è¡¨';
â€‹
<span class="hljs-selector-tag">--</span> çŠ¶æ€æœºæµè½¬è®°å½•è¡¨(å¯é€‰,ç”¨äºå®¡è®¡å’Œå…œåº•)
<span class="hljs-selector-tag">CREATE</span> <span class="hljs-selector-tag">TABLE</span> `<span class="hljs-selector-tag">state_machine_transition_log</span>` (
  <span class="hljs-built_in">`id`</span> <span class="hljs-built_in">BIGINT</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> NULL AUTO_INCREMENT,
  <span class="hljs-built_in">`biz_id`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> NULL,
  <span class="hljs-built_in">`event_type`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">NOT</span> NULL,
  <span class="hljs-built_in">`from_state`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> NULL,
  <span class="hljs-built_in">`to_state`</span> <span class="hljs-built_in">VARCHAR</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">NOT</span> NULL,
  <span class="hljs-built_in">`transition_result`</span> <span class="hljs-built_in">TINYINT</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> NULL COMMENT <span class="hljs-string">'0-å¤±è´¥,1-æˆåŠŸ'</span>,
  <span class="hljs-built_in">`error_msg`</span> TEXT,
  <span class="hljs-built_in">`created_time`</span> DATETIME <span class="hljs-keyword">NOT</span> NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (<span class="hljs-built_in">`id`</span>),
  KEY <span class="hljs-built_in">`idx_biz_id`</span> (<span class="hljs-built_in">`biz_id`</span>),
  KEY <span class="hljs-built_in">`idx_created_time`</span> (<span class="hljs-built_in">`created_time`</span>)
) <span class="hljs-selector-tag">ENGINE</span>=<span class="hljs-selector-tag">InnoDB</span> <span class="hljs-selector-tag">DEFAULT</span> <span class="hljs-selector-tag">CHARSET</span>=<span class="hljs-selector-tag">utf8mb4</span>;
</code></pre>
<hr/>
<h3 data-id="heading-6">3. æ ¸å¿ƒä»£ç å®ç°</h3>
<h4 data-id="heading-7">3.1 å¹‚ç­‰æ€§æ³¨è§£</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.annotation;
â€‹
<span class="hljs-keyword">import</span> java.lang.annotation.*;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
â€‹
<span class="hljs-meta">@Target(ElementType.METHOD)</span>
<span class="hljs-meta">@Retention(RetentionPolicy.RUNTIME)</span>
<span class="hljs-meta">@Documented</span>
<span class="hljs-keyword">public</span> <span class="hljs-meta">@interface</span> Idempotent {
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¹‚ç­‰é”®SpELè¡¨è¾¾å¼
 Â  Â  */</span>
 Â  Â String <span class="hljs-title function_">key</span><span class="hljs-params">()</span>;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è¿‡æœŸæ—¶é—´
 Â  Â  */</span>
 Â  Â <span class="hljs-type">long</span> <span class="hljs-title function_">expireTime</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">7</span>;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ—¶é—´å•ä½
 Â  Â  */</span>
 Â  Â TimeUnit <span class="hljs-title function_">timeUnit</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> TimeUnit.DAYS;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ˜¯å¦éœ€è¦åˆ†å¸ƒå¼é”
 Â  Â  */</span>
 Â  Â <span class="hljs-type">boolean</span> <span class="hljs-title function_">needLock</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-literal">true</span>;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * é”è¶…æ—¶æ—¶é—´(ç§’)
 Â  Â  */</span>
 Â  Â <span class="hljs-type">int</span> <span class="hljs-title function_">lockTimeout</span><span class="hljs-params">()</span> <span class="hljs-keyword">default</span> <span class="hljs-number">10</span>;
}
</code></pre>
<h4 data-id="heading-8">3.2 å¹‚ç­‰è®°å½•å®ä½“</h4>
<pre><code class="hljs language-arduino" lang="arduino">package com.example.userorder.entity;
â€‹
<span class="hljs-keyword">import</span> lombok.Data;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
â€‹
@Data
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentRecord</span> {
 Â  Â <span class="hljs-keyword">private</span> Long id;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> bizId;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> eventType;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> messageId;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> idempotentKey;
 Â  Â <span class="hljs-keyword">private</span> Integer status; <span class="hljs-comment">// 0-å¤„ç†ä¸­, 1-æˆåŠŸ, 2-å¤±è´¥</span>
 Â  Â <span class="hljs-keyword">private</span> Integer retryCount;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> errorMsg;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> requestData;
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> responseData;
 Â  Â <span class="hljs-keyword">private</span> LocalDateTime createdTime;
 Â  Â <span class="hljs-keyword">private</span> LocalDateTime updatedTime;
 Â  Â <span class="hljs-keyword">private</span> LocalDateTime expiredTime;
 Â  Â 
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">Status</span> {
 Â  Â  Â  Â <span class="hljs-built_in">PROCESSING</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"å¤„ç†ä¸­"</span>),
 Â  Â  Â  Â <span class="hljs-built_in">SUCCESS</span>(<span class="hljs-number">1</span>, <span class="hljs-string">"æˆåŠŸ"</span>),
 Â  Â  Â  Â <span class="hljs-built_in">FAILED</span>(<span class="hljs-number">2</span>, <span class="hljs-string">"å¤±è´¥"</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> code;
 Â  Â  Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> desc;
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-built_in">Status</span>(<span class="hljs-type">int</span> code, <span class="hljs-type">String</span> desc) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.code = code;
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">this</span>.desc = desc;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title">getCode</span><span class="hljs-params">()</span> </span>{
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> code;
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h4 data-id="heading-9">3.3 å¹‚ç­‰æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.service;
â€‹
<span class="hljs-keyword">import</span> com.example.userorder.entity.IdempotentRecord;
<span class="hljs-keyword">import</span> com.example.userorder.mapper.IdempotentRecordMapper;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentService</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> IdempotentRecordMapper idempotentRecordMapper;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ£€æŸ¥æ˜¯å¦å·²å¤„ç†(å¹‚ç­‰æ£€æŸ¥)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> IdempotentRecord <span class="hljs-title function_">checkIdempotent</span><span class="hljs-params">(String idempotentKey)</span> {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> idempotentRecordMapper.selectByIdempotentKey(idempotentKey);
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * åˆ›å»ºå¹‚ç­‰è®°å½•(å¤„ç†ä¸­çŠ¶æ€)
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">createProcessingRecord</span><span class="hljs-params">(String bizId, String eventType, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String messageId, String idempotentKey,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  String requestData, <span class="hljs-type">long</span> expireTime, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  TimeUnit timeUnit)</span> {
 Â  Â  Â  Â <span class="hljs-type">IdempotentRecord</span> <span class="hljs-variable">record</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdempotentRecord</span>();
 Â  Â  Â  Â record.setBizId(bizId);
 Â  Â  Â  Â record.setEventType(eventType);
 Â  Â  Â  Â record.setMessageId(messageId);
 Â  Â  Â  Â record.setIdempotentKey(idempotentKey);
 Â  Â  Â  Â record.setStatus(IdempotentRecord.Status.PROCESSING.getCode());
 Â  Â  Â  Â record.setRetryCount(<span class="hljs-number">0</span>);
 Â  Â  Â  Â record.setRequestData(requestData);
 Â  Â  Â  Â record.setExpiredTime(LocalDateTime.now().plusSeconds(timeUnit.toSeconds(expireTime)));
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-type">int</span> <span class="hljs-variable">rows</span> <span class="hljs-operator">=</span> idempotentRecordMapper.insert(record);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> rows &gt; <span class="hljs-number">0</span>;
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å”¯ä¸€é”®å†²çª,è¯´æ˜å·²ç»æœ‰è®°å½•åœ¨å¤„ç†</span>
 Â  Â  Â  Â  Â  Â log.warn(<span class="hljs-string">"åˆ›å»ºå¹‚ç­‰è®°å½•å¤±è´¥,å¯èƒ½å·²å­˜åœ¨: {}"</span>, idempotentKey, e);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ›´æ–°ä¸ºæˆåŠŸçŠ¶æ€
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateSuccess</span><span class="hljs-params">(String idempotentKey, String responseData)</span> {
 Â  Â  Â  Â idempotentRecordMapper.updateStatus(
 Â  Â  Â  Â  Â  Â idempotentKey, 
 Â  Â  Â  Â  Â  Â IdempotentRecord.Status.SUCCESS.getCode(),
 Â  Â  Â  Â  Â  Â <span class="hljs-literal">null</span>,
 Â  Â  Â  Â  Â  Â responseData
 Â  Â  Â   );
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ›´æ–°ä¸ºå¤±è´¥çŠ¶æ€
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFailed</span><span class="hljs-params">(String idempotentKey, String errorMsg, <span class="hljs-type">int</span> retryCount)</span> {
 Â  Â  Â  Â idempotentRecordMapper.updateStatus(
 Â  Â  Â  Â  Â  Â idempotentKey,
 Â  Â  Â  Â  Â  Â IdempotentRecord.Status.FAILED.getCode(),
 Â  Â  Â  Â  Â  Â errorMsg,
 Â  Â  Â  Â  Â  Â <span class="hljs-literal">null</span>
 Â  Â  Â   );
 Â  Â  Â  Â idempotentRecordMapper.incrementRetryCount(idempotentKey, retryCount);
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¸…ç†è¿‡æœŸè®°å½•
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">cleanExpiredRecords</span><span class="hljs-params">()</span> {
 Â  Â  Â  Â <span class="hljs-keyword">return</span> idempotentRecordMapper.deleteExpired(LocalDateTime.now());
 Â   }
}
</code></pre>
<h4 data-id="heading-10">3.4 åˆ†å¸ƒå¼é”æœåŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.service;
â€‹
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.data.redis.core.StringRedisTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.util.UUID;
<span class="hljs-keyword">import</span> java.util.concurrent.TimeUnit;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DistributedLockService</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> StringRedisTemplate stringRedisTemplate;
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">LOCK_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"idempotent:lock:"</span>;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å°è¯•è·å–é”
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> String <span class="hljs-title function_">tryLock</span><span class="hljs-params">(String key, <span class="hljs-type">long</span> timeout, TimeUnit unit)</span> {
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> LOCK_PREFIX + key;
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> UUID.randomUUID().toString();
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-type">Boolean</span> <span class="hljs-variable">success</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue()
 Â  Â  Â  Â  Â   .setIfAbsent(lockKey, lockValue, timeout, unit);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (Boolean.TRUE.equals(success)) {
 Â  Â  Â  Â  Â  Â log.debug(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> lockValue;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â log.warn(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”å¤±è´¥: {}"</span>, lockKey);
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * é‡Šæ”¾é”
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">unlock</span><span class="hljs-params">(String key, String lockValue)</span> {
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">lockKey</span> <span class="hljs-operator">=</span> LOCK_PREFIX + key;
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">currentValue</span> <span class="hljs-operator">=</span> stringRedisTemplate.opsForValue().get(lockKey);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (lockValue != <span class="hljs-literal">null</span> &amp;&amp; lockValue.equals(currentValue)) {
 Â  Â  Â  Â  Â  Â stringRedisTemplate.delete(lockKey);
 Â  Â  Â  Â  Â  Â log.debug(<span class="hljs-string">"é‡Šæ”¾åˆ†å¸ƒå¼é”æˆåŠŸ: {}"</span>, lockKey);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h4 data-id="heading-11">3.5 å¹‚ç­‰åˆ‡é¢</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.aspect;
â€‹
<span class="hljs-keyword">import</span> com.example.userorder.annotation.Idempotent;
<span class="hljs-keyword">import</span> com.example.userorder.entity.IdempotentRecord;
<span class="hljs-keyword">import</span> com.example.userorder.exception.IdempotentException;
<span class="hljs-keyword">import</span> com.example.userorder.service.DistributedLockService;
<span class="hljs-keyword">import</span> com.example.userorder.service.IdempotentService;
<span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Around;
<span class="hljs-keyword">import</span> org.aspectj.lang.annotation.Aspect;
<span class="hljs-keyword">import</span> org.aspectj.lang.reflect.MethodSignature;
<span class="hljs-keyword">import</span> org.springframework.core.LocalVariableTableParameterNameDiscoverer;
<span class="hljs-keyword">import</span> org.springframework.expression.EvaluationContext;
<span class="hljs-keyword">import</span> org.springframework.expression.Expression;
<span class="hljs-keyword">import</span> org.springframework.expression.ExpressionParser;
<span class="hljs-keyword">import</span> org.springframework.expression.spel.standard.SpelExpressionParser;
<span class="hljs-keyword">import</span> org.springframework.expression.spel.support.StandardEvaluationContext;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.lang.reflect.Method;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Aspect</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdempotentAspect</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> IdempotentService idempotentService;
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> DistributedLockService lockService;
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> ObjectMapper objectMapper;
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">ExpressionParser</span> <span class="hljs-variable">parser</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SpelExpressionParser</span>();
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">LocalVariableTableParameterNameDiscoverer</span> <span class="hljs-variable">discoverer</span> <span class="hljs-operator">=</span> 
 Â  Â  Â  Â <span class="hljs-keyword">new</span> <span class="hljs-title class_">LocalVariableTableParameterNameDiscoverer</span>();
 Â  Â 
 Â  Â <span class="hljs-meta">@Around("@annotation(com.example.userorder.annotation.Idempotent)")</span>
 Â  Â <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">around</span><span class="hljs-params">(ProceedingJoinPoint point)</span> <span class="hljs-keyword">throws</span> Throwable {
 Â  Â  Â  Â <span class="hljs-type">MethodSignature</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> (MethodSignature) point.getSignature();
 Â  Â  Â  Â <span class="hljs-type">Method</span> <span class="hljs-variable">method</span> <span class="hljs-operator">=</span> signature.getMethod();
 Â  Â  Â  Â <span class="hljs-type">Idempotent</span> <span class="hljs-variable">idempotent</span> <span class="hljs-operator">=</span> method.getAnnotation(Idempotent.class);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// è§£æå¹‚ç­‰é”®</span>
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">idempotentKey</span> <span class="hljs-operator">=</span> parseKey(idempotent.key(), method, point.getArgs());
 Â  Â  Â  Â log.info(<span class="hljs-string">"å¹‚ç­‰å¤„ç†å¼€å§‹, key: {}"</span>, idempotentKey);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// å¹‚ç­‰æ£€æŸ¥</span>
 Â  Â  Â  Â <span class="hljs-type">IdempotentRecord</span> <span class="hljs-variable">existRecord</span> <span class="hljs-operator">=</span> idempotentService.checkIdempotent(idempotentKey);
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (existRecord != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> handleExistRecord(existRecord, idempotentKey);
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// éœ€è¦åˆ†å¸ƒå¼é”</span>
 Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">lockValue</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (idempotent.needLock()) {
 Â  Â  Â  Â  Â  Â lockValue = lockService.tryLock(idempotentKey, 
 Â  Â  Â  Â  Â  Â  Â  Â idempotent.lockTimeout(), java.util.concurrent.TimeUnit.SECONDS);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (lockValue == <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdempotentException</span>(<span class="hljs-string">"è·å–åˆ†å¸ƒå¼é”å¤±è´¥,è¯·ç¨åé‡è¯•: "</span> + idempotentKey);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åŒé‡æ£€æŸ¥</span>
 Â  Â  Â  Â  Â  Â existRecord = idempotentService.checkIdempotent(idempotentKey);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (existRecord != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â lockService.unlock(idempotentKey, lockValue);
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> handleExistRecord(existRecord, idempotentKey);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// åˆ›å»ºå¤„ç†ä¸­è®°å½•</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">requestData</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(point.getArgs());
 Â  Â  Â  Â  Â  Â <span class="hljs-type">boolean</span> <span class="hljs-variable">created</span> <span class="hljs-operator">=</span> idempotentService.createProcessingRecord(
 Â  Â  Â  Â  Â  Â  Â  Â extractBizId(point.getArgs()),
 Â  Â  Â  Â  Â  Â  Â  Â extractEventType(point.getArgs()),
 Â  Â  Â  Â  Â  Â  Â  Â extractMessageId(point.getArgs()),
 Â  Â  Â  Â  Â  Â  Â  Â idempotentKey,
 Â  Â  Â  Â  Â  Â  Â  Â requestData,
 Â  Â  Â  Â  Â  Â  Â  Â idempotent.expireTime(),
 Â  Â  Â  Â  Â  Â  Â  Â idempotent.timeUnit()
 Â  Â  Â  Â  Â   );
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (!created) {
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdempotentException</span>(<span class="hljs-string">"åˆ›å»ºå¹‚ç­‰è®°å½•å¤±è´¥: "</span> + idempotentKey);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰§è¡Œä¸šåŠ¡é€»è¾‘</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> point.proceed();
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°ä¸ºæˆåŠŸ</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-type">String</span> <span class="hljs-variable">responseData</span> <span class="hljs-operator">=</span> objectMapper.writeValueAsString(result);
 Â  Â  Â  Â  Â  Â idempotentService.updateSuccess(idempotentKey, responseData);
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"å¹‚ç­‰å¤„ç†æˆåŠŸ, key: {}"</span>, idempotentKey);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> result;
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°ä¸ºå¤±è´¥</span>
 Â  Â  Â  Â  Â  Â idempotentService.updateFailed(idempotentKey, e.getMessage(), <span class="hljs-number">0</span>);
 Â  Â  Â  Â  Â  Â log.error(<span class="hljs-string">"å¹‚ç­‰å¤„ç†å¤±è´¥, key: {}"</span>, idempotentKey, e);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> e;
 Â  Â  Â   } <span class="hljs-keyword">finally</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (lockValue != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â  Â  Â lockService.unlock(idempotentKey, lockValue);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">handleExistRecord</span><span class="hljs-params">(IdempotentRecord record, String key)</span> {
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (record.getStatus().equals(IdempotentRecord.Status.SUCCESS.getCode())) {
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"æ¶ˆæ¯å·²æˆåŠŸå¤„ç†,è·³è¿‡: {}"</span>, key);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è¿”å›ä¹‹å‰çš„ç»“æœæˆ–è€…è¿”å›å¹‚ç­‰æ ‡è¯†</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span> parseResponse(record.getResponseData());
 Â  Â  Â   } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (record.getStatus().equals(IdempotentRecord.Status.PROCESSING.getCode())) {
 Â  Â  Â  Â  Â  Â log.warn(<span class="hljs-string">"æ¶ˆæ¯æ­£åœ¨å¤„ç†ä¸­,è¯·å‹¿é‡å¤æäº¤: {}"</span>, key);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdempotentException</span>(<span class="hljs-string">"æ¶ˆæ¯æ­£åœ¨å¤„ç†ä¸­: "</span> + key);
 Â  Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â  Â  Â log.warn(<span class="hljs-string">"æ¶ˆæ¯ä¹‹å‰å¤„ç†å¤±è´¥,å°†é‡æ–°å¤„ç†: {}"</span>, key);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¯ä»¥é€‰æ‹©é‡æ–°å¤„ç†æˆ–æŠ›å¼‚å¸¸</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IdempotentException</span>(<span class="hljs-string">"æ¶ˆæ¯ä¹‹å‰å¤„ç†å¤±è´¥: "</span> + key);
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> String <span class="hljs-title function_">parseKey</span><span class="hljs-params">(String keyExpression, Method method, Object[] args)</span> {
 Â  Â  Â  Â String[] paraNameArr = discoverer.getParameterNames(method);
 Â  Â  Â  Â <span class="hljs-type">EvaluationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StandardEvaluationContext</span>();
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (paraNameArr != <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; paraNameArr.length; i++) {
 Â  Â  Â  Â  Â  Â  Â  Â context.setVariable(paraNameArr[i], args[i]);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-type">Expression</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> parser.parseExpression(keyExpression);
 Â  Â  Â  Â <span class="hljs-keyword">return</span> expression.getValue(context, String.class);
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractBizId</span><span class="hljs-params">(Object[] args)</span> {
 Â  Â  Â  Â <span class="hljs-comment">// ä»å‚æ•°ä¸­æå–ä¸šåŠ¡ID(è®¢å•ID)</span>
 Â  Â  Â  Â <span class="hljs-comment">// è¿™é‡Œéœ€è¦æ ¹æ®å®é™…å‚æ•°ç»“æ„å®ç°</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°æå–é€»è¾‘</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractEventType</span><span class="hljs-params">(Object[] args)</span> {
 Â  Â  Â  Â <span class="hljs-comment">// ä»å‚æ•°ä¸­æå–äº‹ä»¶ç±»å‹</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°æå–é€»è¾‘</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> String <span class="hljs-title function_">extractMessageId</span><span class="hljs-params">(Object[] args)</span> {
 Â  Â  Â  Â <span class="hljs-comment">// ä»å‚æ•°ä¸­æå–æ¶ˆæ¯ID</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>; <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°æå–é€»è¾‘</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> Object <span class="hljs-title function_">parseResponse</span><span class="hljs-params">(String responseData)</span> {
 Â  Â  Â  Â <span class="hljs-comment">// è§£æå“åº”æ•°æ®</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
 Â   }
}
</code></pre>
<h4 data-id="heading-12">3.6 æ–°çš„æ¶ˆè´¹è€…å®ç°</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">consumer</span>;
â€‹
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Idempotent</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">dto</span>.<span class="hljs-property">OrderEventDTO</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">service</span>.<span class="hljs-property">OrderEventHandlerService</span>;
<span class="hljs-keyword">import</span> com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">service</span>.<span class="hljs-property">OrderStateMachineService</span>;
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">apache</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">clients</span>.<span class="hljs-property">consumer</span>.<span class="hljs-property">ConsumerRecord</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">KafkaListener</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">support</span>.<span class="hljs-property">Acknowledgment</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">transaction</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Transactional</span>;
<span class="hljs-keyword">import</span> javax.<span class="hljs-property">annotation</span>.<span class="hljs-property">Resource</span>;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserOrderEventStrategyConsumer</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderEventHandlerService</span> eventHandlerService;
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderStateMachineService</span> stateMachineService;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¶ˆè´¹è®¢å•äº‹ä»¶
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@KafkaListener</span>(
 Â  Â  Â  Â topics = <span class="hljs-string">"${kafka.topic.order-events}"</span>,
 Â  Â  Â  Â groupId = <span class="hljs-string">"${kafka.group.user-order}"</span>,
 Â  Â  Â  Â containerFactory = <span class="hljs-string">"kafkaListenerContainerFactory"</span>
 Â   )
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">consumeOrderEvent</span>(<span class="hljs-params">ConsumerRecord&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; record, 
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â Acknowledgment ack</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ¥æ”¶è®¢å•äº‹ä»¶: offset={}, key={}, value={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â record.<span class="hljs-title function_">offset</span>(), record.<span class="hljs-title function_">key</span>(), record.<span class="hljs-title function_">value</span>());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è§£æäº‹ä»¶</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title class_">OrderEventDTO</span> event = <span class="hljs-title function_">parseEvent</span>(record.<span class="hljs-title function_">value</span>());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¤„ç†äº‹ä»¶(å¸¦å¹‚ç­‰)</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">processEventWithIdempotent</span>(event);
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ‰‹åŠ¨æäº¤offset</span>
 Â  Â  Â  Â  Â  Â ack.<span class="hljs-title function_">acknowledge</span>();
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è®¢å•äº‹ä»¶å¤„ç†æˆåŠŸ: orderId={}, eventType={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getOrderId</span>(), event.<span class="hljs-title function_">getEventType</span>());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è®¢å•äº‹ä»¶å¤„ç†å¤±è´¥: offset={}"</span>, record.<span class="hljs-title function_">offset</span>(), e);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// ä¸æäº¤offset,ç­‰å¾…é‡è¯•</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¯ä»¥æ ¹æ®å¼‚å¸¸ç±»å‹å†³å®šæ˜¯å¦éœ€è¦äººå·¥ä»‹å…¥</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"äº‹ä»¶å¤„ç†å¤±è´¥"</span>, e);
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¸¦å¹‚ç­‰çš„äº‹ä»¶å¤„ç†
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Idempotent</span>(
 Â  Â  Â  Â key = <span class="hljs-string">"'order:event:' + #event.orderId + ':' + #event.eventType + ':' + #event.messageId"</span>,
 Â  Â  Â  Â expireTime = <span class="hljs-number">7</span>,
 Â  Â  Â  Â timeUnit = java.<span class="hljs-property">util</span>.<span class="hljs-property">concurrent</span>.<span class="hljs-property">TimeUnit</span>.<span class="hljs-property">DAYS</span>,
 Â  Â  Â  Â needLock = <span class="hljs-literal">true</span>,
 Â  Â  Â  Â lockTimeout = <span class="hljs-number">10</span>
 Â   )
 Â  Â <span class="hljs-meta">@Transactional</span>(rollbackFor = <span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">processEventWithIdempotent</span>(<span class="hljs-params">OrderEventDTO event</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// 1. ä¸šåŠ¡å¤„ç†(æ–°é€»è¾‘)</span>
 Â  Â  Â  Â eventHandlerService.<span class="hljs-title function_">handleEvent</span>(event);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// 2. è°ƒç”¨è€çš„çŠ¶æ€æœºæ¥å£(ä¿æŒå…¼å®¹)</span>
 Â  Â  Â  Â <span class="hljs-title function_">fireStateMachine</span>(event);
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è§¦å‘çŠ¶æ€æœºæµè½¬(è°ƒç”¨è€æ¥å£)
 Â  Â  */</span>
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">fireStateMachine</span>(<span class="hljs-params">OrderEventDTO event</span>) {
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// çŠ¶æ€æœºæœ¬èº«åº”è¯¥æœ‰å¹‚ç­‰ä¿æŠ¤</span>
 Â  Â  Â  Â  Â  Â stateMachineService.<span class="hljs-title function_">fireEvent</span>(
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getOrderId</span>(), 
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getEventType</span>(),
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getEventData</span>()
 Â  Â  Â  Â  Â   );
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬æˆåŠŸ: orderId={}, event={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getOrderId</span>(), event.<span class="hljs-title function_">getEventType</span>());
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬å¤±è´¥: orderId={}, event={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â event.<span class="hljs-title function_">getOrderId</span>(), event.<span class="hljs-title function_">getEventType</span>(), e);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è®°å½•çŠ¶æ€æœºæµè½¬å¤±è´¥,ä½†ä¸å½±å“ä¸šåŠ¡å¤„ç†</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¯ä»¥é€šè¿‡è¡¥å¿ä»»åŠ¡é‡è¯•</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> e;
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-title class_">OrderEventDTO</span> <span class="hljs-title function_">parseEvent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> eventJson</span>) {
 Â  Â  Â  Â <span class="hljs-comment">// è§£æJSON</span>
 Â  Â  Â  Â <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°JSONè§£æ</span>
 Â   }
}
</code></pre>
<h4 data-id="heading-13">3.7 äº‹ä»¶å¤„ç†æœåŠ¡</h4>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">package</span> com.example.userorder.service;
â€‹
<span class="hljs-keyword">import</span> com.example.userorder.dto.OrderEventDTO;
<span class="hljs-keyword">import</span> com.example.userorder.strategy.OrderEventStrategy;
<span class="hljs-keyword">import</span> com.example.userorder.strategy.OrderEventStrategyFactory;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.<span class="hljs-keyword">annotation</span>.Transactional;
<span class="hljs-keyword">import</span> javax.<span class="hljs-keyword">annotation</span>.Resource;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderEventHandlerService</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> OrderEventStrategyFactory strategyFactory;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * å¤„ç†è®¢å•äº‹ä»¶
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Transactional(rollbackFor = Exception.class)</span>
 Â  Â <span class="hljs-keyword">public</span> void handleEvent(OrderEventDTO event) {
 Â  Â  Â  Â log.info(<span class="hljs-string">"å¼€å§‹å¤„ç†è®¢å•äº‹ä»¶: orderId={}, eventType={}"</span>, 
 Â  Â  Â  Â  Â  Â event.getOrderId(), event.getEventType());
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// è·å–å¯¹åº”çš„å¤„ç†ç­–ç•¥</span>
 Â  Â  Â  Â OrderEventStrategy strategy = strategyFactory.getStrategy(event.getEventType());
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (strategy == <span class="hljs-literal">null</span>) {
 Â  Â  Â  Â  Â  Â log.warn(<span class="hljs-string">"æœªæ‰¾åˆ°äº‹ä»¶å¤„ç†ç­–ç•¥: eventType={}"</span>, event.getEventType());
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">return</span>;
 Â  Â  Â   }
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// æ‰§è¡Œç­–ç•¥</span>
 Â  Â  Â  Â strategy.handle(event);
 Â  Â  Â  Â 
 Â  Â  Â  Â log.info(<span class="hljs-string">"è®¢å•äº‹ä»¶å¤„ç†å®Œæˆ: orderId={}, eventType={}"</span>, 
 Â  Â  Â  Â  Â  Â event.getOrderId(), event.getEventType());
 Â   }
}
</code></pre>
<h4 data-id="heading-14">3.8 çŠ¶æ€æœºæœåŠ¡æ¥å£(è°ƒç”¨è€ç³»ç»Ÿ)</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">service</span>;
â€‹
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Service</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">transaction</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Transactional</span>;
â€‹
<span class="hljs-comment">/**
 * çŠ¶æ€æœºæœåŠ¡ - è°ƒç”¨è€çš„ordersç³»ç»Ÿçš„çŠ¶æ€æœºæ¥å£
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderStateMachineService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">// è¿™é‡Œæ³¨å…¥è€ç³»ç»Ÿçš„çŠ¶æ€æœºæœåŠ¡(é€šè¿‡RPC/HTTP/Dubboç­‰)</span>
 Â  Â <span class="hljs-comment">// @Resource</span>
 Â  Â <span class="hljs-comment">// private OldOrderStateMachineService oldStateMachineService;</span>
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * è§¦å‘çŠ¶æ€æœºäº‹ä»¶
 Â  Â  * æ³¨æ„:è€çš„çŠ¶æ€æœºåº”è¯¥è‡ªå·±å®ç°äº†å¹‚ç­‰
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Transactional</span>(rollbackFor = <span class="hljs-title class_">Exception</span>.<span class="hljs-property">class</span>)
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">fireEvent</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> orderId, <span class="hljs-built_in">String</span> eventType, <span class="hljs-built_in">Object</span> eventData</span>) {
 Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è°ƒç”¨è€çŠ¶æ€æœºæ¥å£: orderId={}, eventType={}"</span>, orderId, eventType);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è°ƒç”¨è€ç³»ç»Ÿçš„çŠ¶æ€æœºæ¥å£</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// oldStateMachineService.fireEvent(orderId, eventType, eventData);</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æˆ–è€…é€šè¿‡HTTPè°ƒç”¨</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// restTemplate.postForObject(url, request, Response.class);</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"è€çŠ¶æ€æœºè°ƒç”¨æˆåŠŸ: orderId={}, eventType={}"</span>, orderId, eventType);
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è€çŠ¶æ€æœºè°ƒç”¨å¤±è´¥: orderId={}, eventType={}"</span>, orderId, eventType, e);
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬å¤±è´¥"</span>, e);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<hr/>
<h3 data-id="heading-15">4. é‡è¯•æœºåˆ¶</h3>
<h4 data-id="heading-16">4.1 æ¶ˆè´¹è€…é‡è¯•é…ç½®</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">config</span>;
â€‹
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Bean</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">context</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Configuration</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">config</span>.<span class="hljs-property">ConcurrentKafkaListenerContainerFactory</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">core</span>.<span class="hljs-property">ConsumerFactory</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">kafka</span>.<span class="hljs-property">listener</span>.<span class="hljs-property">ContainerProperties</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">retry</span>.<span class="hljs-property">backoff</span>.<span class="hljs-property">ExponentialBackOffPolicy</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">retry</span>.<span class="hljs-property">policy</span>.<span class="hljs-property">SimpleRetryPolicy</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">retry</span>.<span class="hljs-property">support</span>.<span class="hljs-property">RetryTemplate</span>;
â€‹
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">KafkaConsumerConfig</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Bean</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">ConcurrentKafkaListenerContainerFactory</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; 
 Â  Â  Â  Â <span class="hljs-title function_">kafkaListenerContainerFactory</span>(<span class="hljs-params">ConsumerFactory&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">String</span>&gt; consumerFactory</span>) {
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-title class_">ConcurrentKafkaListenerContainerFactory</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">String</span>&gt; factory = 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentKafkaListenerContainerFactory</span>&lt;&gt;();
 Â  Â  Â  Â factory.<span class="hljs-title function_">setConsumerFactory</span>(consumerFactory);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// æ‰‹åŠ¨æäº¤offset</span>
 Â  Â  Â  Â factory.<span class="hljs-title function_">getContainerProperties</span>().<span class="hljs-title function_">setAckMode</span>(<span class="hljs-title class_">ContainerProperties</span>.<span class="hljs-property">AckMode</span>.<span class="hljs-property">MANUAL</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// é…ç½®é‡è¯•</span>
 Â  Â  Â  Â factory.<span class="hljs-title function_">setCommonErrorHandler</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultErrorHandler</span>((record, exception) -&gt; {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°: offset={}, exception={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â record.<span class="hljs-title function_">offset</span>(), exception.<span class="hljs-title function_">getMessage</span>());
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å‘é€åˆ°æ­»ä¿¡é˜Ÿåˆ—æˆ–è®°å½•åˆ°æ•°æ®åº“</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// sendToDeadLetterQueue(record);</span>
 Â  Â  Â   }, <span class="hljs-keyword">new</span> <span class="hljs-title class_">FixedBackOff</span>(1000L, 3L))); <span class="hljs-comment">// 1ç§’é—´éš”,é‡è¯•3æ¬¡</span>
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">return</span> factory;
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * ä¸šåŠ¡é‡è¯•æ¨¡æ¿
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Bean</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-title class_">RetryTemplate</span> <span class="hljs-title function_">retryTemplate</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-title class_">RetryTemplate</span> retryTemplate = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RetryTemplate</span>();
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// é‡è¯•ç­–ç•¥: æœ€å¤šé‡è¯•3æ¬¡</span>
 Â  Â  Â  Â <span class="hljs-title class_">SimpleRetryPolicy</span> retryPolicy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleRetryPolicy</span>();
 Â  Â  Â  Â retryPolicy.<span class="hljs-title function_">setMaxAttempts</span>(<span class="hljs-number">3</span>);
 Â  Â  Â  Â retryTemplate.<span class="hljs-title function_">setRetryPolicy</span>(retryPolicy);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-comment">// é€€é¿ç­–ç•¥: æŒ‡æ•°é€€é¿</span>
 Â  Â  Â  Â <span class="hljs-title class_">ExponentialBackOffPolicy</span> backOffPolicy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExponentialBackOffPolicy</span>();
 Â  Â  Â  Â backOffPolicy.<span class="hljs-title function_">setInitialInterval</span>(1000L); <span class="hljs-comment">// åˆå§‹1ç§’</span>
 Â  Â  Â  Â backOffPolicy.<span class="hljs-title function_">setMaxInterval</span>(10000L); <span class="hljs-comment">// æœ€å¤§10ç§’</span>
 Â  Â  Â  Â backOffPolicy.<span class="hljs-title function_">setMultiplier</span>(<span class="hljs-number">2.0</span>); <span class="hljs-comment">// æ¯æ¬¡ç¿»å€</span>
 Â  Â  Â  Â retryTemplate.<span class="hljs-title function_">setBackOffPolicy</span>(backOffPolicy);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">return</span> retryTemplate;
 Â   }
}
</code></pre>
<h4 data-id="heading-17">4.2 å¼‚æ­¥é‡è¯•ä»»åŠ¡</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.task;
â€‹
<span class="hljs-keyword">import</span> com.example.userorder.entity.IdempotentRecord;
<span class="hljs-keyword">import</span> com.example.userorder.mapper.IdempotentRecordMapper;
<span class="hljs-keyword">import</span> com.example.userorder.service.OrderEventHandlerService;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Scheduled;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.time.LocalDateTime;
<span class="hljs-keyword">import</span> java.util.List;
â€‹
<span class="hljs-comment">/**
 * å¤±è´¥æ¶ˆæ¯é‡è¯•ä»»åŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FailedMessageRetryTask</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> IdempotentRecordMapper idempotentRecordMapper;
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> OrderEventHandlerService eventHandlerService;
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_RETRY_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¯5åˆ†é’Ÿæ‰«æå¤±è´¥çš„æ¶ˆæ¯è¿›è¡Œé‡è¯•
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Scheduled(cron = "0 */5 * * * ?")</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">retryFailedMessages</span><span class="hljs-params">()</span> {
 Â  Â  Â  Â log.info(<span class="hljs-string">"å¼€å§‹æ‰«æå¤±è´¥æ¶ˆæ¯è¿›è¡Œé‡è¯•"</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æŸ¥è¯¢å¤±è´¥ä¸”æœªè¶…è¿‡æœ€å¤§é‡è¯•æ¬¡æ•°çš„è®°å½•</span>
 Â  Â  Â  Â  Â  Â List&lt;IdempotentRecord&gt; failedRecords = 
 Â  Â  Â  Â  Â  Â  Â  Â idempotentRecordMapper.selectFailedRecords(MAX_RETRY_COUNT, <span class="hljs-number">100</span>);
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"æŸ¥è¯¢åˆ°{}æ¡å¤±è´¥æ¶ˆæ¯å¾…é‡è¯•"</span>, failedRecords.size());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (IdempotentRecord record : failedRecords) {
 Â  Â  Â  Â  Â  Â  Â  Â retryRecord(record);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â log.error(<span class="hljs-string">"å¤±è´¥æ¶ˆæ¯é‡è¯•ä»»åŠ¡å¼‚å¸¸"</span>, e);
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">retryRecord</span><span class="hljs-params">(IdempotentRecord record)</span> {
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"é‡è¯•å¤±è´¥æ¶ˆæ¯: bizId={}, eventType={}, retryCount={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â record.getBizId(), record.getEventType(), record.getRetryCount());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// è§£æè¯·æ±‚æ•°æ®å¹¶é‡æ–°å¤„ç†</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// OrderEventDTO event = parseRequestData(record.getRequestData());</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// eventHandlerService.handleEvent(event);</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ›´æ–°ä¸ºæˆåŠŸ</span>
 Â  Â  Â  Â  Â  Â idempotentRecordMapper.updateStatus(
 Â  Â  Â  Â  Â  Â  Â  Â record.getIdempotentKey(),
 Â  Â  Â  Â  Â  Â  Â  Â IdempotentRecord.Status.SUCCESS.getCode(),
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-literal">null</span>,
 Â  Â  Â  Â  Â  Â  Â  Â <span class="hljs-literal">null</span>
 Â  Â  Â  Â  Â   );
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"å¤±è´¥æ¶ˆæ¯é‡è¯•æˆåŠŸ: bizId={}"</span>, record.getBizId());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â log.error(<span class="hljs-string">"å¤±è´¥æ¶ˆæ¯é‡è¯•å¤±è´¥: bizId={}"</span>, record.getBizId(), e);
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¢åŠ é‡è¯•æ¬¡æ•°</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-type">int</span> <span class="hljs-variable">newRetryCount</span> <span class="hljs-operator">=</span> record.getRetryCount() + <span class="hljs-number">1</span>;
 Â  Â  Â  Â  Â  Â idempotentRecordMapper.incrementRetryCount(
 Â  Â  Â  Â  Â  Â  Â  Â record.getIdempotentKey(), 
 Â  Â  Â  Â  Â  Â  Â  Â newRetryCount
 Â  Â  Â  Â  Â   );
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœè¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°,å‘é€å‘Šè­¦</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">if</span> (newRetryCount &gt;= MAX_RETRY_COUNT) {
 Â  Â  Â  Â  Â  Â  Â  Â sendAlert(record);
 Â  Â  Â  Â  Â   }
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sendAlert</span><span class="hljs-params">(IdempotentRecord record)</span> {
 Â  Â  Â  Â log.error(<span class="hljs-string">"æ¶ˆæ¯é‡è¯•è¾¾åˆ°æœ€å¤§æ¬¡æ•°,éœ€è¦äººå·¥ä»‹å…¥: bizId={}, eventType={}"</span>, 
 Â  Â  Â  Â  Â  Â record.getBizId(), record.getEventType());
 Â  Â  Â  Â <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å‘é€å‘Šè­¦(é’‰é’‰/é‚®ä»¶/çŸ­ä¿¡ç­‰)</span>
 Â   }
}
</code></pre>
<hr/>
<h3 data-id="heading-18">5. å…œåº•å¤„ç†</h3>
<h4 data-id="heading-19">5.1 çŠ¶æ€æœºæµè½¬å…œåº•</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.userorder.task;
â€‹
<span class="hljs-keyword">import</span> com.example.userorder.entity.IdempotentRecord;
<span class="hljs-keyword">import</span> com.example.userorder.mapper.IdempotentRecordMapper;
<span class="hljs-keyword">import</span> com.example.userorder.service.OrderStateMachineService;
<span class="hljs-keyword">import</span> lombok.extern.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.scheduling.annotation.Scheduled;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
<span class="hljs-keyword">import</span> javax.annotation.Resource;
<span class="hljs-keyword">import</span> java.util.List;
â€‹
<span class="hljs-comment">/**
 * çŠ¶æ€æœºæµè½¬å…œåº•ä»»åŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StateMachineCompensationTask</span> {
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> IdempotentRecordMapper idempotentRecordMapper;
 Â  Â 
 Â  Â <span class="hljs-meta">@Resource</span>
 Â  Â <span class="hljs-keyword">private</span> OrderStateMachineService stateMachineService;
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¯å°æ—¶æ£€æŸ¥ä¸€æ¬¡ä¸šåŠ¡å¤„ç†æˆåŠŸä½†çŠ¶æ€æœºå¯èƒ½æœªæµè½¬çš„æƒ…å†µ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Scheduled(cron = "0 0 * * * ?")</span>
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compensateStateMachine</span><span class="hljs-params">()</span> {
 Â  Â  Â  Â log.info(<span class="hljs-string">"å¼€å§‹æ‰§è¡ŒçŠ¶æ€æœºæµè½¬å…œåº•ä»»åŠ¡"</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æŸ¥è¯¢ä¸šåŠ¡å¤„ç†æˆåŠŸçš„è®°å½•</span>
 Â  Â  Â  Â  Â  Â List&lt;IdempotentRecord&gt; successRecords = 
 Â  Â  Â  Â  Â  Â  Â  Â idempotentRecordMapper.selectSuccessRecords(<span class="hljs-number">100</span>);
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-keyword">for</span> (IdempotentRecord record : successRecords) {
 Â  Â  Â  Â  Â  Â  Â  Â compensateRecord(record);
 Â  Â  Â  Â  Â   }
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬å…œåº•ä»»åŠ¡å®Œæˆ"</span>);
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â log.error(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬å…œåº•ä»»åŠ¡å¼‚å¸¸"</span>, e);
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">compensateRecord</span><span class="hljs-params">(IdempotentRecord record)</span> {
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// æ£€æŸ¥çŠ¶æ€æœºæ˜¯å¦å·²æµè½¬</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å¦‚æœæœªæµè½¬,é‡æ–°è§¦å‘</span>
 Â  Â  Â  Â  Â  Â log.info(<span class="hljs-string">"æ£€æŸ¥å¹¶è¡¥å¿çŠ¶æ€æœºæµè½¬: bizId={}, eventType={}"</span>, 
 Â  Â  Â  Â  Â  Â  Â  Â record.getBizId(), record.getEventType());
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°çŠ¶æ€æ£€æŸ¥å’Œè¡¥å¿é€»è¾‘</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 1. æŸ¥è¯¢å½“å‰è®¢å•çŠ¶æ€</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 2. åˆ¤æ–­æ˜¯å¦éœ€è¦è§¦å‘çŠ¶æ€æœº</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 3. å¦‚æœéœ€è¦,é‡æ–°è°ƒç”¨çŠ¶æ€æœºæ¥å£</span>
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (Exception e) {
 Â  Â  Â  Â  Â  Â log.error(<span class="hljs-string">"çŠ¶æ€æœºè¡¥å¿å¤±è´¥: bizId={}"</span>, record.getBizId(), e);
 Â  Â  Â   }
 Â   }
}
</code></pre>
<h4 data-id="heading-20">5.2 æ•°æ®ä¸€è‡´æ€§æ ¡éªŒ</h4>
<pre><code class="hljs language-typescript" lang="typescript">package com.<span class="hljs-property">example</span>.<span class="hljs-property">userorder</span>.<span class="hljs-property">task</span>;
â€‹
<span class="hljs-keyword">import</span> lombok.<span class="hljs-property">extern</span>.<span class="hljs-property">slf4j</span>.<span class="hljs-property">Slf4j</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">scheduling</span>.<span class="hljs-property">annotation</span>.<span class="hljs-property">Scheduled</span>;
<span class="hljs-keyword">import</span> org.<span class="hljs-property">springframework</span>.<span class="hljs-property">stereotype</span>.<span class="hljs-property">Component</span>;
<span class="hljs-keyword">import</span> javax.<span class="hljs-property">annotation</span>.<span class="hljs-property">Resource</span>;
â€‹
<span class="hljs-comment">/**
 * æ•°æ®ä¸€è‡´æ€§æ ¡éªŒä»»åŠ¡
 */</span>
<span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataConsistencyCheckTask</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œæ•°æ®ä¸€è‡´æ€§æ ¡éªŒ
 Â  Â  */</span>
 Â  Â <span class="hljs-meta">@Scheduled</span>(cron = <span class="hljs-string">"0 0 2 * * ?"</span>)
 Â  Â <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">checkConsistency</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"å¼€å§‹æ‰§è¡Œæ•°æ®ä¸€è‡´æ€§æ ¡éªŒ"</span>);
 Â  Â  Â  Â 
 Â  Â  Â  Â <span class="hljs-keyword">try</span> {
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 1. å¯¹æ¯”æ–°è€ç³»ç»Ÿçš„è®¢å•çŠ¶æ€</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">checkOrderStatus</span>();
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 2. æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„äº‹ä»¶</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">checkMissingEvents</span>();
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// 3. æ£€æŸ¥çŠ¶æ€æœºçŠ¶æ€æ˜¯å¦ä¸€è‡´</span>
 Â  Â  Â  Â  Â  Â <span class="hljs-title function_">checkStateMachineStatus</span>();
 Â  Â  Â  Â  Â  Â 
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">info</span>(<span class="hljs-string">"æ•°æ®ä¸€è‡´æ€§æ ¡éªŒå®Œæˆ"</span>);
 Â  Â  Â   } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-title function_">error</span>(<span class="hljs-string">"æ•°æ®ä¸€è‡´æ€§æ ¡éªŒå¼‚å¸¸"</span>, e);
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">checkOrderStatus</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°è®¢å•çŠ¶æ€å¯¹æ¯”</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">checkMissingEvents</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°äº‹ä»¶é—æ¼æ£€æŸ¥</span>
 Â   }
 Â  Â 
 Â  Â <span class="hljs-keyword">private</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">checkStateMachineStatus</span>(<span class="hljs-params"/>) {
 Â  Â  Â  Â <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> å®ç°çŠ¶æ€æœºçŠ¶æ€æ£€æŸ¥</span>
 Â   }
}
</code></pre>
<hr/>
<h3 data-id="heading-21">6. Mapperæ¥å£</h3>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">package</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.userorder</span><span class="hljs-selector-class">.mapper</span>;
â€‹
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">com</span><span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.userorder</span><span class="hljs-selector-class">.entity</span><span class="hljs-selector-class">.IdempotentRecord</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">org</span><span class="hljs-selector-class">.apache</span><span class="hljs-selector-class">.ibatis</span><span class="hljs-selector-class">.annotations</span>.*;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.time</span><span class="hljs-selector-class">.LocalDateTime</span>;
<span class="hljs-selector-tag">import</span> <span class="hljs-selector-tag">java</span><span class="hljs-selector-class">.util</span><span class="hljs-selector-class">.List</span>;
â€‹
@<span class="hljs-selector-tag">Mapper</span>
<span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">interface</span> <span class="hljs-selector-tag">IdempotentRecordMapper</span> {
 Â  Â 
 Â  Â <span class="hljs-variable">@Select</span>(<span class="hljs-string">"SELECT * FROM idempotent_record WHERE idempotent_key = #{idempotentKey}"</span>)
 Â  Â IdempotentRecord <span class="hljs-built_in">selectByIdempotentKey</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"idempotentKey"</span>) String idempotentKey);
 Â  Â 
 Â  Â <span class="hljs-variable">@Insert</span>(<span class="hljs-string">"INSERT INTO idempotent_record (biz_id, event_type, message_id, "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"idempotent_key, status, retry_count, request_data, expired_time) "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"VALUES (#{bizId}, #{eventType}, #{messageId}, #{idempotentKey}, "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"#{status}, #{retryCount}, #{requestData}, #{expiredTime})"</span>)
 Â  Â <span class="hljs-variable">@Options</span>(useGeneratedKeys = true, keyProperty = <span class="hljs-string">"id"</span>)
 Â  Â int <span class="hljs-built_in">insert</span>(IdempotentRecord record);
 Â  Â 
 Â  Â <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE idempotent_record SET status = #{status}, "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"error_msg = #{errorMsg}, response_data = #{responseData}, "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"updated_time = NOW() WHERE idempotent_key = #{idempotentKey}"</span>)
 Â  Â int <span class="hljs-built_in">updateStatus</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"idempotentKey"</span>) String idempotentKey,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Param</span>(<span class="hljs-string">"status"</span>) Integer status,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Param</span>(<span class="hljs-string">"errorMsg"</span>) String errorMsg,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Param</span>(<span class="hljs-string">"responseData"</span>) String responseData);
 Â  Â 
 Â  Â <span class="hljs-variable">@Update</span>(<span class="hljs-string">"UPDATE idempotent_record SET retry_count = #{retryCount}, "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"updated_time = NOW() WHERE idempotent_key = #{idempotentKey}"</span>)
 Â  Â int <span class="hljs-built_in">incrementRetryCount</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"idempotentKey"</span>) String idempotentKey,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Param</span>(<span class="hljs-string">"retryCount"</span>) Integer retryCount);
 Â  Â 
 Â  Â <span class="hljs-variable">@Select</span>(<span class="hljs-string">"SELECT * FROM idempotent_record WHERE status = 2 "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"AND retry_count &lt; #{maxRetryCount} "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"AND updated_time &lt; DATE_SUB(NOW(), INTERVAL 5 MINUTE) "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"LIMIT #{limit}"</span>)
 Â  Â List&lt;IdempotentRecord&gt; <span class="hljs-built_in">selectFailedRecords</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"maxRetryCount"</span>) Integer maxRetryCount,
 Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="hljs-variable">@Param</span>(<span class="hljs-string">"limit"</span>) Integer limit);
 Â  Â 
 Â  Â <span class="hljs-variable">@Select</span>(<span class="hljs-string">"SELECT * FROM idempotent_record WHERE status = 1 "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"AND created_time &gt; DATE_SUB(NOW(), INTERVAL 1 HOUR) "</span> +
 Â  Â  Â  Â  Â  Â <span class="hljs-string">"LIMIT #{limit}"</span>)
 Â  Â List&lt;IdempotentRecord&gt; <span class="hljs-built_in">selectSuccessRecords</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"limit"</span>) Integer limit);
 Â  Â 
 Â  Â <span class="hljs-variable">@Delete</span>(<span class="hljs-string">"DELETE FROM idempotent_record WHERE expired_time &lt; #{now}"</span>)
 Â  Â int <span class="hljs-built_in">deleteExpired</span>(<span class="hljs-variable">@Param</span>(<span class="hljs-string">"now"</span>) LocalDateTime now);
}
</code></pre>
<hr/>
<h3 data-id="heading-22">7. é…ç½®æ–‡ä»¶</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># application.yml</span>
<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">kafka:</span>
 Â   <span class="hljs-attr">bootstrap-servers:</span> <span class="hljs-string">localhost:9092</span>
 Â   <span class="hljs-attr">consumer:</span>
 Â  Â   <span class="hljs-attr">group-id:</span> <span class="hljs-string">user-order-consumer</span>
 Â  Â   <span class="hljs-attr">auto-offset-reset:</span> <span class="hljs-string">earliest</span>
 Â  Â   <span class="hljs-attr">enable-auto-commit:</span> <span class="hljs-literal">false</span> Â <span class="hljs-comment"># æ‰‹åŠ¨æäº¤</span>
 Â  Â   <span class="hljs-attr">key-deserializer:</span> <span class="hljs-string">org.apache.kafka.common.serialization.StringDeserializer</span>
 Â  Â   <span class="hljs-attr">value-deserializer:</span> <span class="hljs-string">org.apache.kafka.common.serialization.StringDeserializer</span>
 Â  Â   <span class="hljs-attr">max-poll-records:</span> <span class="hljs-number">10</span>
 Â  Â   <span class="hljs-attr">properties:</span>
 Â  Â  Â   <span class="hljs-attr">session.timeout.ms:</span> <span class="hljs-number">30000</span>
 Â  Â  Â   <span class="hljs-attr">max.poll.interval.ms:</span> <span class="hljs-number">300000</span>
 Â  Â 
  <span class="hljs-attr">redis:</span>
 Â   <span class="hljs-attr">host:</span> <span class="hljs-string">localhost</span>
 Â   <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
 Â   <span class="hljs-attr">database:</span> <span class="hljs-number">0</span>
 Â   <span class="hljs-attr">timeout:</span> <span class="hljs-number">3000</span>
 Â   <span class="hljs-attr">jedis:</span>
 Â  Â   <span class="hljs-attr">pool:</span>
 Â  Â  Â   <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
 Â  Â  Â   <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
 Â  Â  Â   <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>
<span class="hljs-string">â€‹</span>
  <span class="hljs-attr">datasource:</span>
 Â   <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/user_order?useUnicode=true&amp;characterEncoding=utf8</span>
 Â   <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
 Â   <span class="hljs-attr">password:</span> <span class="hljs-string">password</span>
 Â   <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
 Â  Â 
  <span class="hljs-attr">task:</span>
 Â   <span class="hljs-attr">scheduling:</span>
 Â  Â   <span class="hljs-attr">pool:</span>
 Â  Â  Â   <span class="hljs-attr">size:</span> <span class="hljs-number">5</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-attr">kafka:</span>
  <span class="hljs-attr">topic:</span>
 Â   <span class="hljs-attr">order-events:</span> <span class="hljs-string">order-events-topic</span>
  <span class="hljs-attr">group:</span>
 Â   <span class="hljs-attr">user-order:</span> <span class="hljs-string">user-order-consumer-group</span>
<span class="hljs-string">â€‹</span>
<span class="hljs-comment"># å¹‚ç­‰é…ç½®</span>
<span class="hljs-attr">idempotent:</span>
  <span class="hljs-attr">default-expire-days:</span> <span class="hljs-number">7</span>
  <span class="hljs-attr">lock-timeout-seconds:</span> <span class="hljs-number">10</span>
  <span class="hljs-attr">clean-expired-cron:</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">3</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> <span class="hljs-string">?</span> Â <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨3ç‚¹æ¸…ç†è¿‡æœŸè®°å½•</span>
</code></pre>
<hr/>
<h3 data-id="heading-23">8. è¿ç§»æ­¥éª¤</h3>
<h4 data-id="heading-24">8.1 å‡†å¤‡é˜¶æ®µ</h4>
<ol start="0">
<li><strong>åˆ›å»ºå¹‚ç­‰è¡¨</strong>: æ‰§è¡ŒSQLåˆ›å»º <code>idempotent_record</code> è¡¨</li>
<li><strong>éƒ¨ç½²æ–°æœåŠ¡</strong>: éƒ¨ç½² <code>user-order</code> æœåŠ¡ä½†ä¸å¯åŠ¨æ¶ˆè´¹</li>
<li><strong>é…ç½®ç°åº¦</strong>: é…ç½®æµé‡ç°åº¦è§„åˆ™</li>
</ol>
<h4 data-id="heading-25">8.2 ç°åº¦é˜¶æ®µ</h4>
<ol start="0">
<li><strong>å¯åŠ¨æ–°æ¶ˆè´¹è€…</strong>: ä½¿ç”¨ä¸åŒçš„æ¶ˆè´¹è€…ç»„å¹¶è¡Œæ¶ˆè´¹</li>
<li><strong>ç›‘æ§å¯¹æ¯”</strong>: å¯¹æ¯”æ–°è€ç³»ç»Ÿå¤„ç†ç»“æœ</li>
<li><strong>ä¿®å¤é—®é¢˜</strong>: å‘ç°é—®é¢˜åŠæ—¶ä¿®å¤</li>
</ol>
<h4 data-id="heading-26">8.3 åˆ‡æ¢é˜¶æ®µ</h4>
<ol start="0">
<li><strong>åœæ­¢è€æ¶ˆè´¹è€…</strong>: åœæ­¢ <code>orders</code> çš„ <code>OrderEventTransparentBroadcastConsumer</code></li>
<li><strong>å…¨é‡åˆ‡æ¢</strong>: æ–°æ¶ˆè´¹è€…æ¥ç®¡æ‰€æœ‰æµé‡</li>
<li><strong>ç›‘æ§å‘Šè­¦</strong>: åŠ å¼ºç›‘æ§å’Œå‘Šè­¦</li>
</ol>
<h4 data-id="heading-27">8.4 æ”¶å°¾é˜¶æ®µ</h4>
<ol start="0">
<li><strong>æ•°æ®æ ¡éªŒ</strong>: æ‰§è¡Œæ•°æ®ä¸€è‡´æ€§æ ¡éªŒ</li>
<li><strong>ä¸‹çº¿è€ä»£ç </strong>: ç¡®è®¤æ— è¯¯åä¸‹çº¿è€ä»£ç </li>
<li><strong>æ–‡æ¡£æ›´æ–°</strong>: æ›´æ–°ç›¸å…³æ–‡æ¡£</li>
</ol>
<hr/>
<h3 data-id="heading-28">9. ç›‘æ§å‘Šè­¦</h3>
<h4 data-id="heading-29">9.1 ç›‘æ§æŒ‡æ ‡</h4>
<ul>
<li>æ¶ˆæ¯æ¶ˆè´¹å»¶è¿Ÿ</li>
<li>æ¶ˆæ¯æ¶ˆè´¹TPS</li>
<li>å¹‚ç­‰æ‹¦æˆªç‡</li>
<li>å¤±è´¥é‡è¯•æ¬¡æ•°</li>
<li>çŠ¶æ€æœºæµè½¬æˆåŠŸç‡</li>
</ul>
<h4 data-id="heading-30">9.2 å‘Šè­¦è§„åˆ™</h4>
<pre><code class="hljs language-arduino" lang="arduino">package com.example.userorder.monitor;
â€‹
<span class="hljs-keyword">import</span> lombok.<span class="hljs-keyword">extern</span>.slf4j.Slf4j;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;
â€‹
@Slf4j
@Component
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MonitorService</span> {
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * æ¶ˆè´¹å»¶è¿Ÿå‘Šè­¦
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">alertConsumerLag</span><span class="hljs-params">(<span class="hljs-type">String</span> topic, <span class="hljs-type">long</span> lag)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (lag &gt; <span class="hljs-number">10000</span>) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"æ¶ˆè´¹å»¶è¿Ÿè¿‡é«˜: topic={}, lag={}"</span>, topic, lag);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * é‡è¯•æ¬¡æ•°å‘Šè­¦
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">alertRetryCount</span><span class="hljs-params">(<span class="hljs-type">String</span> bizId, <span class="hljs-type">int</span> retryCount)</span> </span>{
 Â  Â  Â  Â <span class="hljs-keyword">if</span> (retryCount &gt; <span class="hljs-number">3</span>) {
 Â  Â  Â  Â  Â  Â log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"é‡è¯•æ¬¡æ•°è¿‡å¤š: bizId={}, retryCount={}"</span>, bizId, retryCount);
 Â  Â  Â  Â  Â  Â <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
 Â  Â  Â   }
 Â   }
 Â  Â 
 Â  Â <span class="hljs-comment">/**
 Â  Â  * çŠ¶æ€æœºæµè½¬å¤±è´¥å‘Šè­¦
 Â  Â  */</span>
 Â  Â <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">alertStateMachineFailed</span><span class="hljs-params">(<span class="hljs-type">String</span> orderId, <span class="hljs-type">String</span> event)</span> </span>{
 Â  Â  Â  Â log.<span class="hljs-built_in">error</span>(<span class="hljs-string">"çŠ¶æ€æœºæµè½¬å¤±è´¥: orderId={}, event={}"</span>, orderId, event);
 Â  Â  Â  Â <span class="hljs-comment">// å‘é€å‘Šè­¦</span>
 Â   }
}
</code></pre>
<hr/>
<h3 data-id="heading-31">10. æ€»ç»“</h3>
<h4 data-id="heading-32">10.1 å¹‚ç­‰ä¿è¯</h4>
<p>âœ… <strong>æ¶ˆæ¯å¹‚ç­‰</strong>: é€šè¿‡å”¯ä¸€çº¦æŸçš„å¹‚ç­‰è¡¨ + åˆ†å¸ƒå¼é” âœ… <strong>ä¸šåŠ¡å¹‚ç­‰</strong>: é€šè¿‡äº‹åŠ¡ + å¹‚ç­‰è®°å½•çŠ¶æ€ âœ… <strong>çŠ¶æ€æœºå¹‚ç­‰</strong>: è°ƒç”¨è€æ¥å£,è€æ¥å£è‡ªèº«ä¿è¯å¹‚ç­‰</p>
<h4 data-id="heading-33">10.2 å¯é æ€§ä¿è¯</h4>
<p>âœ… <strong>é‡è¯•æœºåˆ¶</strong>: Kafkaé‡è¯• + æ•°æ®åº“è®°å½•é‡è¯• + å®šæ—¶ä»»åŠ¡é‡è¯• âœ… <strong>å…œåº•è¡¥å¿</strong>: å®šæ—¶ä»»åŠ¡æ£€æŸ¥å¹¶è¡¥å¿å¤±è´¥çš„æµè½¬ âœ… <strong>ç›‘æ§å‘Šè­¦</strong>: å¤šç»´åº¦ç›‘æ§ + åŠæ—¶å‘Šè­¦</p>
<h4 data-id="heading-34">10.3 æ³¨æ„äº‹é¡¹</h4>
<p>âš ï¸ å¹‚ç­‰é”®è®¾è®¡è¦åˆç†,åŒ…å«è®¢å•ID+äº‹ä»¶ç±»å‹+æ¶ˆæ¯ID âš ï¸ åˆ†å¸ƒå¼é”è¶…æ—¶æ—¶é—´è¦å¤§äºä¸šåŠ¡å¤„ç†æ—¶é—´ âš ï¸ é‡è¯•æ¬¡æ•°è¦åˆç†,é¿å…æ— é™é‡è¯• âš ï¸ å®šæœŸæ¸…ç†è¿‡æœŸçš„å¹‚ç­‰è®°å½• âš ï¸ ç°åº¦æœŸé—´è¦åšå¥½æ•°æ®å¯¹æ¯”å’Œç›‘æ§</p>
<hr/>
<h3 data-id="heading-35">11. æ‰©å±•ä¼˜åŒ–</h3>
<h4 data-id="heading-36">11.1 æ€§èƒ½ä¼˜åŒ–</h4>
<ul>
<li>å¹‚ç­‰è¡¨åˆ†åº“åˆ†è¡¨</li>
<li>Redisç¼“å­˜çƒ­ç‚¹å¹‚ç­‰é”®</li>
<li>å¼‚æ­¥å¤„ç†éæ ¸å¿ƒé€»è¾‘</li>
</ul>
<h4 data-id="heading-37">11.2 åŠŸèƒ½å¢å¼º</h4>
<ul>
<li>æ”¯æŒæ¶ˆæ¯å»¶è¿Ÿæ¶ˆè´¹</li>
<li>æ”¯æŒæ¶ˆæ¯ä¼˜å…ˆçº§</li>
<li>æ”¯æŒåŠ¨æ€è·¯ç”±ç­–ç•¥</li>
</ul>
<hr/>
<p><strong>å®Œæ•´æ–¹æ¡ˆå·²ç¼–å†™å®Œæˆ,åŒ…å«:</strong></p>
<ul>
<li>æ•°æ®åº“è®¾è®¡</li>
<li>å®Œæ•´ä»£ç å®ç°</li>
<li>é‡è¯•æœºåˆ¶</li>
<li>å…œåº•å¤„ç†</li>
<li>ç›‘æ§å‘Šè­¦</li>
<li>è¿ç§»æ­¥éª¤</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‹ç¼©ç‡æå‡ 48%ï¼Œè¯¦è§£ Apache Doris å­˜å‚¨å‹ç¼©ä¼˜åŒ–ä¹‹é“ï½œDeep Dive]]></title>    <link>https://juejin.cn/post/7576378563575185423</link>    <guid>https://juejin.cn/post/7576378563575185423</guid>    <pubDate>2025-11-25T07:21:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563575185423" data-draft-id="7576378563575136271" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‹ç¼©ç‡æå‡ 48%ï¼Œè¯¦è§£ Apache Doris å­˜å‚¨å‹ç¼©ä¼˜åŒ–ä¹‹é“ï½œDeep Dive"/> <meta itemprop="keywords" content="GitHub,æ•°æ®åº“,å¼€æº"/> <meta itemprop="datePublished" content="2025-11-25T07:21:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SelectDB"/> <meta itemprop="url" content="https://juejin.cn/user/3189021726222904"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‹ç¼©ç‡æå‡ 48%ï¼Œè¯¦è§£ Apache Doris å­˜å‚¨å‹ç¼©ä¼˜åŒ–ä¹‹é“ï½œDeep Dive
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3189021726222904/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SelectDB
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:21:19.000Z" title="Tue Nov 25 2025 07:21:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦</strong></p>
<p>æœ¬æ–‡åŸºäº ClickBench æ•°æ®é›†ï¼Œå±•ç¤ºäº† Apache Doris å¦‚ä½•é€šè¿‡é€‰æ‹©å‹ç¼©ç®—æ³•ã€è°ƒæ•´æ•°æ®é¡µå¤§å°ä¸åˆ†æ¡¶æ•°ã€ä¼˜åŒ–ç¼–ç ç­–ç•¥ä»¥åŠæ”¹è¿›æ•°æ®æ’åºæ¥æå‡å‹ç¼©æ•ˆç‡ã€‚æœ€ç»ˆï¼Œç›¸åŒæ•°æ®é›†çš„å‹ç¼©ç©ºé—´ä» 16.08 GB é™è‡³ 8.2 GBï¼Œå‹ç¼©ç‡æå‡ 48.6%ã€‚é€šè¿‡åˆç†çš„è°ƒæ•´ä¸ä¼˜åŒ–ï¼ŒDoris æˆåŠŸåœ¨ä¿æŒæŸ¥è¯¢æ€§èƒ½çš„åŒæ—¶æ˜¾è‘—é™ä½äº†å­˜å‚¨æˆæœ¬ã€‚</p>
<hr/>
<p>åœ¨åˆ†æå‹æ•°æ®åº“ä¸­ï¼Œåˆ—å¼å­˜å‚¨æ˜¯å‹ç¼©å’ŒæŸ¥è¯¢æ€§èƒ½çš„æ ¸å¿ƒåŸºç¡€ã€‚å®ƒæŒ‰åˆ—ç»„ç»‡æ•°æ®ï¼ŒåŒä¸€åˆ—å€¼ç±»å‹ä¸€è‡´ä¸”åˆ†å¸ƒç›¸ä¼¼ï¼Œä¸ºç¼–ç ä¸å‹ç¼©ç®—æ³•æä¾›æé«˜ç©ºé—´å±€éƒ¨æ€§å’Œå¯é¢„æµ‹æ€§ã€‚å½“å­˜å‚¨çš„å€¼å˜åŒ–è¾ƒå°æˆ–é‡å¤é¢‘ç¹æ—¶ï¼Œåˆ—å¼å¸ƒå±€èƒ½å¤Ÿå‡å°‘å†—ä½™å­˜å‚¨ï¼Œå¹¶æå‡å‘é‡åŒ–æ‰«æçš„ CPU æ•ˆç‡ã€‚</p>
<p>Apache Doris ä½œä¸ºä¸€æ¬¾å…¸å‹çš„åˆ—å¼å­˜å‚¨å¼•æ“ï¼Œå¯ç‹¬ç«‹å­˜å‚¨æ¯ä¸€åˆ—æ•°æ®ã€‚å¯¼å…¥æ—¶ï¼Œæ¯åˆ—æ•°æ®å†™å…¥è¿‘ä¼¼å›ºå®šå¤§å°çš„æ•°æ®é¡µï¼Œç»è¿‡ç¼–ç å’Œå‹ç¼©å¤„ç†ï¼Œä»¥å®ç°æ›´ç´§å‡‘çš„å­˜å‚¨ã€‚åœ¨ Doris ä¸­ï¼Œæ•°æ®çš„å‹ç¼©å’Œè§£å‹å‡ä»¥æ•°æ®é¡µä¸ºå•ä½ï¼Œå‹ç¼©ç®—æ³•çš„ä¸Šä¸‹æ–‡é™åˆ¶åœ¨å•ä¸ªæ•°æ®é¡µå†…ã€‚å› æ­¤ï¼Œ<strong>æ•°æ®é¡µå¤§å°ã€ç¼–ç æ–¹å¼åŠå‹ç¼©ç®—æ³•éƒ½ç›´æ¥å½±å“æœ€ç»ˆçš„å‹ç¼©æ•ˆç‡å’ŒæŸ¥è¯¢æ€§èƒ½ã€‚</strong></p>
<p>åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œ<strong>æˆ‘ä»¬å°†ç»“åˆåŸºäº ClickBench æ•°æ®é›†ï¼Œè¾ƒä¸ºç›´è§‚çš„å±•ç¤º  Apache Doris åœ¨å­˜å‚¨å‹ç¼©æ–¹é¢çš„ä¼˜åŒ–æ€è€ƒåŠæ”¹è¿›ç­–ç•¥ã€‚</strong> ä½¿è¯»è€…äº†è§£å¦‚ä½•é€šè¿‡æ•°æ®é¡µå¤§å°ä¸åˆ†æ¡¶æ•°è°ƒæ•´ã€ç¼–ç ç­–ç•¥ä¼˜åŒ–ã€æ•°æ®æ’åºæ¥æå‡å‹ç¼©æ•ˆç‡ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ•°æ®é›†ä¸åŸºçº¿ç»“æœ</h2>
<p>æˆ‘ä»¬ä½¿ç”¨ ClickBench å…¬å…±æ•°æ®é›†æ¥è¿›è¡Œæœ¬æ¬¡æµ‹è¯•ã€‚è¯¥æ•°æ®é›†åŒ…å« 10 ä¸ª tsv æ–‡ä»¶ï¼Œæ€»å¤§å°çº¦ <strong>70GB</strong>ï¼ŒåŒ…æ‹¬ç½‘ç«™è®¿é—®æ—¥å¿—ç±»å­—æ®µï¼Œå¦‚ URLã€Refererã€UserID ç­‰ã€‚è¿™ç±»æ•°æ®é€šå¸¸æ··åˆäº†çŸ­å­—ç¬¦ä¸²ä¸æ•´æ•°åˆ—ï¼Œç»“æ„åŒ–ç‰¹å¾æ˜æ˜¾ã€‚</p>
<p>åœ¨å¯¼å…¥å‰å…ˆå¯¹åŸå§‹æ•°æ®è¿›è¡Œ<strong>æ–‡ä»¶çº§å‹ç¼©æµ‹è¯•</strong>ï¼Œä»¥ä½œä¸ºåŸºçº¿å‚è€ƒï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e4cccf8d67ad4fdbac6ced8ab0fc6c78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764660079&amp;x-signature=VJI%2FY0q5d6LioWNvfsIRjyEGOFo%3D" alt="ä¸€ã€æ•°æ®é›†ä¸åŸºçº¿ç»“æœ.png" loading="lazy"/></p>
<p>éšåå°†è¿™æ‰¹æ•°æ®ç›´æ¥å¯¼å…¥ Dorisã€‚ä½¿ç”¨é»˜è®¤å»ºè¡¨å‚æ•°ï¼Œå»ºè¡¨è¯­å¥å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fapache%2Fdoris%2Fblob%2Fmaster%2Ftools%2Fclickbench-tools%2Fsql%2Fcreate-clickbench-table.sql" target="_blank" title="https://github.com/apache/doris/blob/master/tools/clickbench-tools/sql/create-clickbench-table.sql" ref="nofollow noopener noreferrer">github.com/apache/doriâ€¦</a></p>
<p>æ•°æ®å¯¼å…¥åï¼Œæ•´ä½“å­˜å‚¨ç©ºé—´çº¦ä¸º 16.08 GBã€‚åœ¨ Doris çš„åˆ—å¼å­˜å‚¨ä¸‹ï¼Œç»è¿‡é»˜è®¤ LZ4 å‹ç¼©ï¼Œå·²å®ç°ç›¸è¾ƒäºåŸå§‹æ–‡ä»¶ï¼ˆ21.37 GBï¼‰1.33x å€çš„å‹ç¼©æ•ˆæœã€‚ä½†å¦‚æœä»ä¸€ä¸ªä»¥é«˜å‹ç¼©æ¯”è‘—ç§°çš„åˆ—å¼ç³»ç»Ÿè§’åº¦æ¥çœ‹ï¼Œè¿™ä¸€ç»“æœä»å­˜åœ¨è¿›ä¸€æ­¥çš„ä¼˜åŒ–ç©ºé—´ã€‚</p>
<p><strong>æ¥ä¸‹æ¥ä»ç ”å‘è§’åº¦å‡ºå‘ï¼Œä¾æ¬¡å¯¹å‹ç¼©ç®—æ³•ã€æ•°æ®é¡µå‚æ•°ä¸ç¼–ç æ–¹å¼ã€æ•°æ®æ’åºåŠç‰¹å¾ç­‰å±‚é¢ä»‹ç»ä¼˜åŒ–åŠæ”¹è¿›æ€è·¯ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€é€‰æ‹©åˆé€‚çš„å‹ç¼©ç®—æ³•</h2>
<p>Doris é»˜è®¤ä½¿ç”¨ LZ4 å‹ç¼©ç®—æ³•ï¼Œå› å…¶è§£å‹é€Ÿåº¦å¿«ä¸” CPU å ç”¨å‡è¡¡ï¼Œé€‚åˆå¤§å¤šæ•°æŸ¥è¯¢å‹è´Ÿè½½ã€‚è€Œåœ¨é‡å¤æ€§å¼ºæˆ–ç»“æ„åŒ–æ˜æ˜¾çš„æ•°æ®åœºæ™¯ä¸­ï¼ŒLZ4 çš„å‹ç¼©æ¯”è¾ƒä½ã€‚ç›¸è¾ƒä¹‹ä¸‹ï¼ŒZSTD æä¾›æ›´é«˜çš„å‹ç¼©ç‡ï¼Œä½†ä¼šå¢åŠ å‹ç¼©å’Œè§£å‹çš„ CPU æ¶ˆè€—ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œå¯æ ¹æ®å®é™…æƒ…å†µçµæ´»é€‰æ‹©ã€‚</p>
<p>è€ƒè™‘åˆ°æµ‹è¯•æ•°æ®é›†ä¸­å¤§é‡å­—ç¬¦ä¸²å­—æ®µå­˜åœ¨ç›¸ä¼¼å‰ç¼€ä¸é‡å¤ç‰‡æ®µçš„ç‰¹å¾ï¼Œæˆ‘ä»¬å°†é»˜è®¤çš„ LZ4 å‹ç¼©ç®—æ³•è°ƒæ•´ä¸º ZSTDï¼Œè¿™å¯ä»¥é€šè¿‡åœ¨å»ºè¡¨è¯­å¥ä¸­è®¾ç½®è¡¨å±æ€§å®ç°ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> hits (
    ....
)  
DUPLICATE KEY (CounterID, EventDate, UserID, EventTime, WatchID) 
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(UserID) BUCKETS <span class="hljs-number">48</span>
PROPERTIES (
    "replication_num"<span class="hljs-operator">=</span>"1",
    "compression"<span class="hljs-operator">=</span>"ZSTD");
</code></pre>
<p>ç»è¿‡è¯¥è°ƒæ•´ï¼Œè¡¨ç©ºé—´é™è‡³ <strong>12.9GB</strong>ï¼Œç›¸æ¯” LZ4 å‡å°‘äº†è¿‘ 20%ã€‚è™½ç„¶åœ¨å¯¼å…¥é˜¶æ®µ CPU å¼€é”€ç•¥æœ‰ä¸Šå‡ï¼Œä½†æŸ¥è¯¢æ€§èƒ½å‡ ä¹ä¸å—å½±å“ï¼Œè¡¨æ˜ ZSTD å¯¹å…¸å‹åˆ†æå‹æŸ¥è¯¢çš„è§£å‹æˆæœ¬æ˜¯å¯æ¥å—çš„ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€è°ƒæ•´æ•°æ®é¡µå¤§å°ä¸åˆ†æ¡¶æ•°</h2>
<p>åœ¨ Doris çš„åˆ—å¼å­˜å‚¨ä¸­ï¼Œæ•°æ®å‹ç¼©çš„åŸºæœ¬å•ä½æ˜¯æ•°æ®é¡µã€‚æ¯ä¸ªæ•°æ®é¡µåœ¨å†™å…¥ä¹‹å‰ç»è¿‡ç¼–ç ä¸å‹ç¼©ï¼Œé¡µå†…æ•°æ®çš„ç›¸ä¼¼ç¨‹åº¦ç›´æ¥å½±å“é€šç”¨å‹ç¼©ç®—æ³•çš„æ•ˆæœã€‚<strong>æ•°æ®é¡µçš„å¤§å°é€‰æ‹©å½±å“å‹ç¼©æ•ˆç‡ä¸æŸ¥è¯¢æ€§èƒ½çš„å¹³è¡¡ï¼šè¿‡å°çš„é¡µæ— æ³•å½¢æˆå¯è¯†åˆ«çš„æ¨¡å¼ï¼Œè€Œè¿‡å¤§çš„é¡µä¼šå¢åŠ è¯»å–å¼€é”€å’Œå†…å­˜è´Ÿæ‹…ã€‚</strong></p>
<p>Doris é»˜è®¤æ•°æ®é¡µå¤§å°ä¸º 64KBï¼Œé€‚åˆå¤§éƒ¨åˆ†åœºæ™¯ã€‚ç„¶è€Œï¼Œå¯¹äºå…·æœ‰æ˜æ˜¾æ¨¡å¼æˆ–é«˜é‡å¤ç‡çš„æ•°æ®é›†ï¼Œè¿‡å°çš„é¡µä¼šä½¿æ•°æ®è¢«åˆ‡å¾—å¤ªç¢ï¼Œé€šç”¨å‹ç¼©ç®—æ³•çš„æ•ˆç‡ä¼šå˜å·®ã€‚å› æ­¤ï¼Œé€‚å½“å¢å¤§é¡µçš„å¤§å°å¯æ˜¾è‘—æå‡å‹ç¼©æ•ˆæœã€‚æ›´å¤§çš„é¡µå¯è¦†ç›–æ›´å¤šè¿ç»­æ•°æ®ï¼Œèšé›†ç›¸ä¼¼å€¼äºåŒä¸€å‹ç¼©ä¸Šä¸‹æ–‡å†…ï¼Œè®©å‹ç¼©ç®—æ³•æ›´å……åˆ†åœ°æŒ–æ˜é‡å¤æ¨¡å¼ä¸ç»Ÿè®¡ç‰¹å¾ã€‚</p>
<p>å¯¹äºæµ‹è¯•æ•°æ®é›†æ¥è¯´ï¼Œæˆ‘ä»¬é€‰æ‹©å°†é¡µå¤§å°ä»é»˜è®¤çš„ 64KB è°ƒæ•´ä¸º 1MBï¼Œå¹¶åŒæ—¶å°†åˆ†æ¡¶æ•°ä» 48 å‡å°‘åˆ° 4ã€‚åˆ†æ¡¶æ•°è¶Šå¤šï¼Œæ¯ä¸ªæ¡¶çš„æ•°æ®è¶Šå°‘ï¼Œé¡µå†…æ•°æ®çš„ç›¸ä¼¼æ€§é™ä½ï¼Œå‹ç¼©ç‡å°±ä¼šä¸‹é™ã€‚é€šè¿‡è®©æ•°æ®é›†ä¸­åˆ°æ›´å°‘çš„æ¡¶ä¸­ï¼Œå¯ä»¥æé«˜é¡µå†…æ•°æ®çš„ç›¸ä¼¼æ€§ï¼Œä»è€Œå¸¦æ¥æ›´å¥½çš„å‹ç¼©æ•ˆæœã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> hits (
    ....
) DUPLICATE KEY (CounterID, EventDate, UserID, EventTime, WatchID) 
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(UserID) BUCKETS <span class="hljs-number">4</span>
PROPERTIES (
    "replication_num"<span class="hljs-operator">=</span>"1",
    "compression"<span class="hljs-operator">=</span>"ZSTD",
    "storage_page_size"<span class="hljs-operator">=</span>"1048576");
</code></pre>
<p>ç»è¿‡æµ‹è¯•ï¼Œå­˜å‚¨ç©ºé—´è¿›ä¸€æ­¥å‡å°åˆ° <strong>10.71 GB</strong>ã€‚é¡µæ›´å¤§ã€æ¡¶æ›´å°‘ï¼Œä½¿å¾—å‹ç¼©ç®—æ³•æ›´æœ‰æ•ˆå»é™¤å†—ä½™ã€‚</p>
<p>ä¸è¿‡ï¼Œé¡µå¤§å°å’Œåˆ†æ¡¶æ•°å¹¶éè¶Šå¤§è¶Šå¥½ã€‚æ¯”å¦‚ï¼Œåœ¨é«˜å¹¶å‘æŸ¥è¯¢çš„åœºæ™¯ä¸­ï¼Œè¿‡å¤§çš„é¡µå¯èƒ½å¯¼è‡´é¢å¤–çš„ I/O å¼€é”€ï¼›è€Œåœ¨åˆ†æå‹å’Œç¦»çº¿ç»Ÿè®¡ç±»è´Ÿè½½ä¸­ï¼Œ1MB çš„é¡µä¸è¾ƒå°‘çš„åˆ†æ¡¶æ•°é€šå¸¸èƒ½å–å¾—æœ€ä½³æ•ˆæœã€‚å› æ­¤ï¼Œ<strong>æœ€ä½³å–å€¼åº”æ ¹æ®æ•°æ®è§„æ¨¡ã€æŸ¥è¯¢æ¨¡å¼ä¸å¯¼å…¥æ–¹å¼è¿›è¡Œç»¼åˆè€ƒè™‘ã€‚</strong></p>
<h2 data-id="heading-3">å››ã€ä¼˜åŒ–ç¼–ç æ–¹å¼</h2>
<p><strong>æ­¤å¤–ï¼Œæ•°æ®åœ¨é¡µå†…çš„ç¼–ç æ–¹å¼ä¹Ÿä¸åˆ—å¼å­˜å‚¨å‹ç¼©æ•ˆæœå¯†åˆ‡ç›¸å…³</strong>ã€‚Doris é’ˆå¯¹ä¸åŒç±»å‹çš„æ•°æ®é‡‡ç”¨äº†å¤šç§ç¼–ç ç­–ç•¥ï¼šå¯¹æ•´æ•°é»˜è®¤ä½¿ç”¨ Bitshuffle ç¼–ç  +  LZ4 å‹ç¼©ï¼Œå¯¹å­—ç¬¦ä¸²åˆ™ä½¿ç”¨å­—å…¸ç¼–ç æˆ–çº¯äºŒè¿›åˆ¶ç¼–ç ã€‚è¿™äº›ç¼–ç åœ¨å¤§å¤šæ•°åœºæ™¯ä¸­è¡¨ç°ä¼˜å¼‚ï¼Œä½†ä»æœ‰è¿›ä¸€æ­¥ä¼˜åŒ–çš„ç©ºé—´ã€‚</p>
<h3 data-id="heading-4">01 é—®é¢˜å®šä½</h3>
<p>ä¸ºæ˜ç¡®ç¼–ç æ–¹å¼çš„æ”¹è¿›æ–¹å‘ï¼Œæˆ‘ä»¬åœ¨ Doris ä¸­æ–°å¢ä¸€ä¸ªç³»ç»Ÿè¡¨ï¼š<code>information_schema.column_data_sizes</code>ã€‚å®ƒç²¾ç¡®å±•ç¤ºæ¯ä¸€åˆ—åœ¨å‹ç¼©å‰åçš„ç©ºé—´å ç”¨æƒ…å†µï¼ˆå‹ç¼©å‰<code>uncompressed_bytes</code>ã€å‹ç¼©å<code>compressed_bytes</code>ã€åŸå§‹æ•°æ®<code>raw_data_bytes</code>ï¼‰ä»¥åŠæ ¹æ®è¿™äº›æ•°æ®è®¡ç®—å‡ºçš„å‹ç¼©æ¯”ï¼ˆ<code>ratio=compressed_bytes/uncompressed_bytes</code>ï¼‰ã€‚åœ¨ç³»ç»Ÿè¡¨ä¸­æ‰§è¡Œå¦‚ä¸‹æŸ¥è¯¢ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    COLUMN_NAME, COLUMN_TYPE,
    <span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-keyword">AS</span> compressed_bytes,
    <span class="hljs-built_in">sum</span>(UNCOMPRESSED_DATA_BYTES) <span class="hljs-keyword">AS</span> uncompressed_bytes,
    <span class="hljs-built_in">sum</span>(RAW_DATA_BYTES) <span class="hljs-keyword">AS</span> raw_data_bytes,
    round(<span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-operator">*</span> <span class="hljs-number">100.0</span> <span class="hljs-operator">/</span> <span class="hljs-built_in">sum</span>(UNCOMPRESSED_DATA_BYTES), <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> ratio
<span class="hljs-keyword">FROM</span> information_schema.column_data_sizes
<span class="hljs-keyword">WHERE</span> table_id <span class="hljs-operator">=</span> <span class="hljs-number">1761704935641</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> COLUMN_NAME, COLUMN_TYPE
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-keyword">DESC</span>;
</code></pre>
<p>æŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼ˆéƒ¨åˆ†èŠ‚é€‰ï¼‰ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> COLUMN_NAME           <span class="hljs-operator">|</span> COLUMN_TYPE <span class="hljs-operator">|</span> compressed_bytes <span class="hljs-operator">|</span> uncompressed_bytes <span class="hljs-operator">|</span> raw_data_bytes <span class="hljs-operator">|</span> ratio  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> URL                   <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1747139004</span>       <span class="hljs-operator">|</span> <span class="hljs-number">9404393858</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9038895826</span>     <span class="hljs-operator">|</span> <span class="hljs-number">18.58</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Referer               <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1552943801</span>       <span class="hljs-operator">|</span> <span class="hljs-number">7023847152</span>         <span class="hljs-operator">|</span> <span class="hljs-number">6662498316</span>     <span class="hljs-operator">|</span> <span class="hljs-number">22.11</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Title                 <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1480554020</span>       <span class="hljs-operator">|</span> <span class="hljs-number">9838412581</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9488276782</span>     <span class="hljs-operator">|</span> <span class="hljs-number">15.05</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> OriginalURL           <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">810663093</span>        <span class="hljs-operator">|</span> <span class="hljs-number">5680006400</span>         <span class="hljs-operator">|</span> <span class="hljs-number">5317485214</span>     <span class="hljs-operator">|</span> <span class="hljs-number">14.27</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> WatchID               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">781560948</span>        <span class="hljs-operator">|</span> <span class="hljs-number">781560948</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">100.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> URLHash               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">760852247</span>        <span class="hljs-operator">|</span> <span class="hljs-number">766458338</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">99.27</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> RefererHash           <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">743785927</span>        <span class="hljs-operator">|</span> <span class="hljs-number">747950617</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">99.44</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> FUniqID               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">389556325</span>        <span class="hljs-operator">|</span> <span class="hljs-number">512285220</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">76.04</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> UserID                <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">379008085</span>        <span class="hljs-operator">|</span> <span class="hljs-number">495166618</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">76.54</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> HID                   <span class="hljs-operator">|</span> <span class="hljs-type">INT</span>         <span class="hljs-operator">|</span> <span class="hljs-number">371392630</span>        <span class="hljs-operator">|</span> <span class="hljs-number">371392630</span>          <span class="hljs-operator">|</span> <span class="hljs-number">399989988</span>      <span class="hljs-operator">|</span> <span class="hljs-number">100.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
</code></pre>
<p>ä»ç»“æœå¯çŸ¥å‡ºï¼Œå­—ç¬¦ä¸²åˆ—ï¼ˆ<code>URL</code>ï¼Œ <code>Referer</code>ï¼Œ <code>Title</code>ï¼Œ <code>OriginalURL</code>ï¼‰å æ®äº†å‹ç¼©åå¤§éƒ¨åˆ†ç©ºé—´ï¼Œè€Œéƒ¨åˆ† <code>BIGINT</code> åˆ—ï¼ˆ<code>WatchID</code>ï¼Œ<code>URLHash</code>ï¼Œ<code>RefererHash</code>ï¼‰çš„å‹ç¼©ç‡å‡ ä¹æ˜¯ 100%ã€‚è¿™è¯´æ˜å­—ç¬¦ä¸²ç¼–ç æ–¹å¼å’Œæ•´æ•°ç¼–ç æ–¹å¼è¿˜éœ€ä¼˜åŒ–ã€‚</p>
<h3 data-id="heading-5">02 å­—ç¬¦ä¸²ç¼–ç ä¼˜åŒ–</h3>
<p>è¿™äº›å­˜å‚¨å ç”¨å¤§çš„å­—ç¬¦ä¸²åˆ—ï¼ˆå¦‚ <code>URL</code> ä¸ <code>Title</code>ï¼‰çš„é•¿åº¦å¤§å¤šéƒ½å¾ˆçŸ­ï¼Œå¹³å‡é•¿åº¦ä¸è¶…è¿‡ç™¾å­—èŠ‚ã€‚åœ¨ Doris é»˜è®¤çš„å­—ç¬¦ä¸²ç¼–ç ç­–ç•¥ä¸­ï¼Œè¿™ç±»æ•°æ®çš„å­˜å‚¨æ–¹å¼å¹¶ä¸å®Œå…¨é«˜æ•ˆã€‚</p>
<p>å­—ç¬¦ä¸²åˆ—é»˜è®¤é‡‡ç”¨ å­—å…¸ç¼–ç  ä¸ Plain Binary ç¼–ç  çš„æ··åˆç­–ç•¥ï¼šç³»ç»Ÿåœ¨ segment çº§åˆ«èŒƒå›´å†…ä¼˜å…ˆå¯¹ä¸€åˆ—æ•°æ®æ„å»ºå­—å…¸é¡µï¼Œå°†é‡å¤å­—ç¬¦ä¸²ä»¥ç´¢å¼•å½¢å¼å­˜å‚¨ï¼Œä»¥å‡å°‘ç©ºé—´å ç”¨ï¼›å½“å­—å…¸é¡µè¶…è¿‡è®¾å®šå¤§å°ä¸Šé™æ—¶ï¼ˆé»˜è®¤ 256KBï¼‰ï¼Œåç»­æ•°æ®è‡ªåŠ¨é€€åŒ–ä¸º Plain Binary æ ¼å¼ï¼Œå…¶å¸ƒå±€å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">| binary1 | binary2 | ... | offset1 (<span class="hljs-keyword">fixed</span> uint32) | offset2 (<span class="hljs-keyword">fixed</span> uint32) | ...
</code></pre>
<p>è¿™ç§æ ¼å¼åœ¨é¡µå°¾ç»´æŠ¤äº†ä¸€ä¸ªå®šé•¿çš„ <code>uint32</code> æ•°ç»„ï¼Œè®°å½•æ¯ä¸ªå­—ç¬¦ä¸²åœ¨é¡µå†…çš„åç§»ä½ç½®ã€‚è€Œå½“çŸ­å­—ç¬¦ä¸²é‡è¾ƒå¤šæ—¶ï¼Œå›ºå®š 4 å­—èŠ‚çš„ offset æ•°ç»„æµªè´¹ç©ºé—´ã€‚ä»¥ 10 ä¸‡æ¡çŸ­å­—ç¬¦ä¸²ä¸ºä¾‹ï¼Œä»… offset æ•°ç»„å°±éœ€è¦çº¦ 400 KBï¼Œè¿™æ˜¯ä¸€ç¬”ä¸å°çš„å¼€é”€ï¼Œä¸”å‹ç¼©ç®—æ³•å‡ ä¹æ— æ³•å¯¹å…¶æœ‰æ•ˆå‹ç¼©ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬é‡æ–°è®¾è®¡äº†é¡µå†…å­—ç¬¦ä¸²çš„å¸ƒå±€ï¼Œå°†å­˜å‚¨æ–¹å¼è°ƒæ•´ä¸ºâ€œé•¿åº¦ åŠ  å†…å®¹â€é¡ºåºå†™å…¥ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">| length1 (varuint32) | binary1 | length2 (varuint32) | binary2 | ...
</code></pre>
<p>è¿™ç§è®¾è®¡çœå»äº†ç‹¬ç«‹çš„ offset æ•°ç»„ï¼Œé€šè¿‡å˜é•¿æ•´æ•°ï¼ˆ<code>varuint32</code>ï¼‰ç›´æ¥è®°å½•å­—ç¬¦ä¸²é•¿åº¦ï¼Œæé«˜é¡µç©ºé—´åˆ©ç”¨ç‡ã€‚åŒæ—¶ï¼Œæ•°æ®çš„å±€éƒ¨æ€§å¾—åˆ°æ”¹å–„ï¼Œå‹ç¼©ç®—æ³•ï¼ˆå¦‚ ZSTDï¼‰å¯ä»¥æ›´æœ‰æ•ˆåœ°æ•æ‰é‡å¤æ¨¡å¼ã€‚ç»è¿‡ä¿®æ”¹ï¼Œå­—ç¬¦ä¸²åˆ—çš„å­˜å‚¨ç©ºé—´è¿›ä¸€æ­¥ä¸‹é™ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> COLUMN_NAME           <span class="hljs-operator">|</span> COLUMN_TYPE <span class="hljs-operator">|</span> compressed_bytes <span class="hljs-operator">|</span> uncompressed_bytes <span class="hljs-operator">|</span> raw_data_bytes <span class="hljs-operator">|</span> ratio  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> URL                   <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1455177520</span>       <span class="hljs-operator">|</span> <span class="hljs-number">9057197818</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9038895826</span>     <span class="hljs-operator">|</span> <span class="hljs-number">16.07</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Referer               <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1331679271</span>       <span class="hljs-operator">|</span> <span class="hljs-number">6730874117</span>         <span class="hljs-operator">|</span> <span class="hljs-number">6662498316</span>     <span class="hljs-operator">|</span> <span class="hljs-number">19.78</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> Title                 <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1122300920</span>       <span class="hljs-operator">|</span> <span class="hljs-number">9505664009</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9488276782</span>     <span class="hljs-operator">|</span> <span class="hljs-number">11.81</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> WatchID               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">100.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> OriginalURL           <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">768372911</span>        <span class="hljs-operator">|</span> <span class="hljs-number">5402777190</span>         <span class="hljs-operator">|</span> <span class="hljs-number">5317485214</span>     <span class="hljs-operator">|</span> <span class="hljs-number">14.22</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
</code></pre>
<h3 data-id="heading-6">03 æ•´æ•°ç¼–ç çš„ä¼˜åŒ–</h3>
<p>åœ¨è¿›ä¸€æ­¥åˆ†æ <code>BIGINT</code> åˆ—ï¼ˆå¦‚ <code>WatchID</code>ã€<code>URLHash</code>ï¼‰æ—¶ï¼Œæˆ‘ä»¬å‘ç°å…¶æ•°æ®åˆ†å¸ƒç‰¹å¾ä¸æ™®é€šé€’å¢æˆ–ä½ç†µæ•°æ®æˆªç„¶ä¸åŒã€‚è¿™äº›åˆ—é€šå¸¸æ˜¯å“ˆå¸Œå€¼æˆ–å…¨å±€å”¯ä¸€ IDï¼Œç†µå€¼å¾ˆé«˜ï¼Œé»˜è®¤ä½¿ç”¨çš„ Bitshuffle ç¼–ç åŠ  LZ4 å‹ç¼©æ•ˆæœå‡ ä¹ä¸ºé›¶ã€‚</p>
<p>åŸºäºè¿™ä¸€å‘ç°ï¼Œé€šè¿‡è®¾ç½® <code>integer_type_default_use_plain_encoding=false</code> ç¦ç”¨äº†å¯¹è¿™äº›åˆ—çš„ Bitshuffle ç¼–ç + LZ4 å‹ç¼©ï¼Œç›´æ¥å†™å…¥åŸå§‹å­—èŠ‚åºåˆ—å†é€šè¿‡é€šç”¨å‹ç¼©ç®—æ³•å‹ç¼©ã€‚è¿™æ ·çœå»æ— æ•ˆçš„ Shuffle æ“ä½œå’Œ Paddingï¼Œç»“åˆ ZSTD å‹ç¼©ç®—æ³•ï¼Œæ•´ä½“ç©ºé—´è¿˜ç•¥æœ‰ä¸‹é™ï¼Œå†™å…¥å’Œè¯»å–æ€§èƒ½ä¹Ÿæœ‰æ‰€æå‡ã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> COLUMN_NAME           <span class="hljs-operator">|</span> COLUMN_TYPE <span class="hljs-operator">|</span> compressed_bytes <span class="hljs-operator">|</span> uncompressed_bytes <span class="hljs-operator">|</span> raw_data_bytes <span class="hljs-operator">|</span> ratio  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> WatchID               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">100.00</span> <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> URLHash               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">348739226</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">43.59</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> RefererHash           <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">295833828</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">36.98</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> FUniqID               <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">169720968</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">21.22</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">|</span> UserID                <span class="hljs-operator">|</span> <span class="hljs-type">BIGINT</span>      <span class="hljs-operator">|</span> <span class="hljs-number">169536965</span>        <span class="hljs-operator">|</span> <span class="hljs-number">800004249</span>          <span class="hljs-operator">|</span> <span class="hljs-number">799979976</span>      <span class="hljs-operator">|</span> <span class="hljs-number">21.19</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
</code></pre>
<h3 data-id="heading-7">04 ä¼˜åŒ–æ•ˆæœ</h3>
<p>åŸºäºå­—ç¬¦ä¸²å’Œæ•´æ•°ç¼–ç æ–¹å¼çš„æ”¹è¿›ï¼Œç»“åˆå‰é¢å‹ç¼©ç®—æ³•ä¸é¡µå‚æ•°çš„è°ƒæ•´ï¼Œ<strong>è¡¨ç©ºé—´ä»æœ€åˆçš„ 16.08 GB è¿›ä¸€æ­¥é™è‡³ 8.27 GBï¼Œæ•´ä½“å‹ç¼©ç‡è¾ƒåˆå§‹é˜¶æ®µæå‡çº¦ 48.6%</strong>ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒåŸºäº ClickBench æŸ¥è¯¢é›†çš„æµ‹è¯•ç»“æœæ˜¾ç¤ºï¼Œç³»ç»Ÿåœ¨çƒ­æŸ¥è¯¢åœºæ™¯ä¸‹ä¿æŒäº†ä¸åŸæœ‰ç‰ˆæœ¬ç›¸åŒçš„æ€§èƒ½ï¼Œè€Œåœ¨å†·æŸ¥è¯¢åœºæ™¯ä¸‹çš„æ€§èƒ½æå‡è¿‘ä¸€å€ï¼Œå®ç°äº†å‹ç¼©ç‡ä¸æŸ¥è¯¢æ•ˆç‡çš„åŒé‡æ”¶ç›Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18e2a8e7d82a45598cac7e4358c6c2f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2VsZWN0REI=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764660079&amp;x-signature=bnVYbUzUEXsuRuiGmcCkZ5bmHKM%3D" alt="04 ä¼˜åŒ–æ•ˆæœ.png" loading="lazy"/></p>
<h2 data-id="heading-8">äº”ã€æ•°æ®æœ¬èº«çš„æ’åºä¸ç‰¹å¾</h2>
<p>æ•°æ®çš„æ’åºä¸ç‰¹å¾ä¹Ÿæ˜¯å†³å®šå‹ç¼©æ•ˆç‡çš„å…³é”®å› ç´ ï¼Œå¸¸è¢«å¿½è§†ã€‚åˆ—å¼å­˜å‚¨çš„å‹ç¼©æ•ˆæœä¾èµ–äºç›¸é‚»æ•°æ®çš„ç›¸ä¼¼æ€§ï¼Œè‹¥è¡¨çš„æ•°æ®åˆ†å¸ƒæˆ–æ’åºä¸åˆ—å€¼å˜åŒ–æ–¹å‘ä¸ä¸€è‡´ï¼Œç›¸ä¼¼æ€§å°†è¢«æ‰“æ•£ï¼Œå‹ç¼©ç®—æ³•éš¾ä»¥è¯†åˆ«æ¨¡å¼ã€‚</p>
<p>åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œè¿™ç§æ’åºå·®å¼‚çš„å½±å“éå¸¸æ˜¾è‘—ã€‚ä»¥åˆšæ‰æµ‹è¯•çš„ ClickBench æ•°æ®ä¸ºä¾‹ï¼Œé€šè¿‡ç³»ç»Ÿè¡¨ <code>information_schema.column_data_sizes</code>ï¼Œæˆ‘ä»¬å‘ç°å ç”¨ç©ºé—´æœ€å¤§çš„åˆ—æ˜¯ URL åˆ—ï¼Œå‹ç¼©åçº¦ä¸º 1.36 GBã€‚</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">SELECT</span>
    COLUMN_NAME,COLUMN_TYPE,
    <span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-keyword">AS</span> compressed_bytes,
    <span class="hljs-built_in">sum</span>(UNCOMPRESSED_DATA_BYTES) <span class="hljs-keyword">as</span> uncompressed_bytes,
    <span class="hljs-built_in">sum</span>(RAW_DATA_BYTES) <span class="hljs-keyword">as</span> raw_data_bytes,
    round(<span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-operator">*</span> <span class="hljs-number">100.0</span> <span class="hljs-operator">/</span> <span class="hljs-built_in">sum</span>(UNCOMPRESSED_DATA_BYTES), <span class="hljs-number">2</span>) <span class="hljs-keyword">as</span> ratio
<span class="hljs-keyword">FROM</span> information_schema.column_data_sizes
<span class="hljs-keyword">WHERE</span> table_id<span class="hljs-operator">=</span><span class="hljs-number">1761728747278</span>
<span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> COLUMN_NAME, COLUMN_TYPE
<span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> <span class="hljs-built_in">sum</span>(COMPRESSED_DATA_BYTES) <span class="hljs-keyword">desc</span> limit <span class="hljs-number">1</span>;
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> COLUMN_NAME           <span class="hljs-operator">|</span> COLUMN_TYPE <span class="hljs-operator">|</span> compressed_bytes <span class="hljs-operator">|</span> uncompressed_bytes <span class="hljs-operator">|</span> raw_data_bytes <span class="hljs-operator">|</span> ratio  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
<span class="hljs-operator">|</span> URL                   <span class="hljs-operator">|</span> STRING      <span class="hljs-operator">|</span> <span class="hljs-number">1456833417</span>       <span class="hljs-operator">|</span> <span class="hljs-number">9144581584</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9038895826</span>     <span class="hljs-operator">|</span> <span class="hljs-number">15.93</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-----------------------+-------------+------------------+--------------------+----------------+--------+</span>
</code></pre>
<p><strong>å°†è¯¥åˆ—æ•°æ®å¯¼å…¥åˆ°ä¸€ä¸ªä»…åŒ…å« URL ä¸€åˆ—å¹¶æŒ‰ç…§ URL æ’åºçš„æ–°è¡¨ä¸­ï¼š</strong></p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> t1(
`URL` <span class="hljs-type">varchar</span>(<span class="hljs-number">8000</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>
) DUPLICATE KEY (URL)
DISTRIBUTED <span class="hljs-keyword">BY</span> HASH(URL) BUCKETS <span class="hljs-number">1</span>
PROPERTIES ( "replication_num"<span class="hljs-operator">=</span>"1", "storage_page_size"<span class="hljs-operator">=</span>"1048576");
<span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> t1 <span class="hljs-keyword">select</span> URL <span class="hljs-keyword">from</span> hits;
</code></pre>
<p>æŸ¥çœ‹æ–°è¡¨ä¸­è¯¥åˆ—çš„æ•°æ®å¤§å°ï¼Œä¸º <strong>0.72 GB</strong>ï¼š</p>
<pre><code class="hljs language-SQL" lang="SQL"><span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+------------------+--------------------+----------------+-------+</span>
<span class="hljs-operator">|</span> COLUMN_NAME <span class="hljs-operator">|</span> COLUMN_TYPE <span class="hljs-operator">|</span> compressed_bytes <span class="hljs-operator">|</span> uncompressed_bytes <span class="hljs-operator">|</span> raw_data_bytes <span class="hljs-operator">|</span> ratio <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+------------------+--------------------+----------------+-------+</span>
<span class="hljs-operator">|</span> URL         <span class="hljs-operator">|</span> <span class="hljs-type">VARCHAR</span>     <span class="hljs-operator">|</span> <span class="hljs-number">773983002</span>        <span class="hljs-operator">|</span> <span class="hljs-number">9148474115</span>         <span class="hljs-operator">|</span> <span class="hljs-number">9038895826</span>     <span class="hljs-operator">|</span> <span class="hljs-number">8.46</span>  <span class="hljs-operator">|</span>
<span class="hljs-operator">+</span><span class="hljs-comment">-------------+-------------+------------------+--------------------+----------------+-------+</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä»…è°ƒæ•´äº†æ’åºä¸æ•°æ®èšé›†æ–¹å¼åï¼Œ<strong>å‹ç¼©åæ•°æ®å¤§å°ä» 1.36 GB å‡å°‘åˆ°äº† 0.72 GBï¼Œå‹ç¼©æ¯”ä» 15.9% æå‡åˆ° 8.46%ï¼Œå‹ç¼©ç©ºé—´å‡ ä¹å‡å°‘äº†ä¸€åŠ</strong>ã€‚è¿™å……åˆ†è¯´æ˜äº†æ•°æ®çš„æœ‰åºæ€§ä¸å±€éƒ¨ç›¸ä¼¼æ€§å¯¹å‹ç¼©ç‡çš„å†³å®šæ€§å½±å“ã€‚</p>
<p>å› æ­¤ï¼Œå½“ç”¨æˆ·å‘ç° Doris çš„å‹ç¼©ç‡ä¸å…¶ä»–ç³»ç»Ÿå­˜åœ¨å·®å¼‚æ—¶ï¼Œé™¤äº†å‹ç¼©ç®—æ³•ä¸å‚æ•°çš„åŒºåˆ«ï¼Œæ›´å¸¸è§çš„åŸå› åœ¨äºæ•°æ®æ’åºå’Œåˆ†å¸ƒæ¨¡å¼çš„ä¸åŒã€‚å‹ç¼©ç®—æ³•çš„æ•ˆç‡å¯¹æ•°æ®æœ¬èº«çš„æ’åºæä¸ºæ•æ„Ÿï¼Œ<strong>åˆç†è®¾è®¡æ’åºé”®ã€åˆ†æ¡¶åˆ—ã€åˆ†æ¡¶æ•°ä¸å¯¼å…¥æ–¹å¼</strong>ï¼Œå¾€å¾€èƒ½å¸¦æ¥æ›´å¤§çš„æ”¶ç›Šã€‚å› æ­¤ï¼Œç†è§£æ•°æ®çš„åˆ†å¸ƒç‰¹å¾ã€æ§åˆ¶å…¶åœ¨ç‰©ç†å±‚é¢çš„å¸ƒå±€ï¼Œæ˜¯æå‡ Doris å­˜å‚¨æ•ˆç‡çš„æ ¸å¿ƒæ‰‹æ®µã€‚</p>
<h2 data-id="heading-9">å…­ã€ç»“æŸè¯­</h2>
<p>åœ¨å®é™…åœºæ™¯ä¸­ï¼Œå®ç°é«˜å‹ç¼©æ¯”çš„æ•°æ®å­˜å‚¨å……æ»¡æŒ‘æˆ˜ï¼Œä½†åˆ—å¼å­˜å‚¨ç³»ç»Ÿ Doris è®©è¿™ä¸€ç›®æ ‡å˜å¾—å¯è¡Œã€‚ç»è¿‡ä¸€ç³»åˆ—é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œ<strong>æœ€ç»ˆæ•°æ®çš„å­˜å‚¨ç©ºé—´ä»æœ€åˆçš„ 16.08 GB é™è‡³ 8.2 GBï¼Œæ•´ä½“å‹ç¼©ç‡æå‡è¶…è¿‡ 48%</strong>ã€‚è¿™ä¸€ç»“æœå¹¶éæ¥è‡ªæŸä¸€ä¸ªç‹¬ç«‹çš„æŠ€æœ¯ç‚¹ï¼Œè€Œæ˜¯å¤šå±‚æ¬¡è°ƒæ•´å åŠ çš„ç»“æœï¼šå‹ç¼©ç®—æ³•çš„ä¼˜åŒ–ã€é¡µå¤§å°ä¸åˆ†æ¡¶å‚æ•°çš„è°ƒæ•´ï¼Œä»¥åŠå¯¹æ•°æ®ç‰¹å¾çš„æ·±å…¥ç†è§£å…±åŒä½œç”¨ï¼Œæ‰è®©å‹ç¼©æ•ˆç‡å¾—åˆ°æ˜¾è‘—æå‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ–‡æ¡£åˆ°ä»£ç ï¼šå·¥ç¨‹åŒ–è§„åˆ™ä½“ç³»è½åœ°å…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576245169843929128</link>    <guid>https://juejin.cn/post/7576245169843929128</guid>    <pubDate>2025-11-25T07:09:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576245169843929128" data-draft-id="7576264484688937000" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ–‡æ¡£åˆ°ä»£ç ï¼šå·¥ç¨‹åŒ–è§„åˆ™ä½“ç³»è½åœ°å…¨æŒ‡å— "/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:09:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹—å¼Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ–‡æ¡£åˆ°ä»£ç ï¼šå·¥ç¨‹åŒ–è§„åˆ™ä½“ç³»è½åœ°å…¨æŒ‡å— 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹—å¼Ÿ
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:09:57.000Z" title="Tue Nov 25 2025 07:09:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ ¸å¿ƒè¯´æ˜ï¼šåŸºäºå·¥ä¸šåŒ–è½¯ä»¶å·¥ç¨‹è§†è§’æ„å»ºï¼ŒåŒ…å«å¯ç›´æ¥å¤ç”¨çš„ä»£ç ã€æ˜ç¡®çš„éªŒæ”¶æ ‡å‡†ï¼Œå¸®å›¢é˜ŸæŠŠâ€œçº¸é¢è§„åˆ™â€å˜æˆâ€œè‡ªåŠ¨ç”Ÿæ•ˆçš„å·¥ç¨‹çº¦æŸâ€</p>
<p>å…³è”æ–‡æ¡£ï¼š<code>docs/rules-roadmap.md</code></p>
<blockquote>
<p><strong>å·¥ç¨‹å¸ˆæ‰‹è®°</strong>ï¼šè¿™ä¸æ˜¯çº¸ä¸Šè°ˆå…µçš„è§„åˆ™æ–‡æ¡£ï¼Œè€Œæ˜¯èƒ½ç›´æ¥ä¸Šæ‰‹çš„å·¥ç¨‹åŒ–æ–½å·¥è“å›¾â€”â€”æ¯ä¸ªæ­¥éª¤éƒ½é…äº†å¯è¿è¡Œçš„ä»£ç ç‰‡æ®µå’Œæ˜ç¡®çš„éªŒæ”¶æ ‡å°ºï¼Œè·Ÿç€åšå°±èƒ½æŠŠè§„åˆ™ä½“ç³»ä»â€œè¢«åŠ¨éµå®ˆâ€æ”¹æˆâ€œä¸»åŠ¨çº¦æŸâ€ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ¯ é¡¹ç›®æ ¸å¿ƒï¼šä»â€œæ–‡æ¡£é©±åŠ¨â€åˆ°â€œå·¥ç¨‹é©±åŠ¨â€çš„å‡çº§</h2>
<h3 data-id="heading-1">ä¸€ã€æ ¸å¿ƒç›®æ ‡</h3>
<p>å½»åº•è§£å†³è§„åˆ™â€œè½åœ°éš¾ã€éªŒè¯éš¾ã€è¿½æº¯éš¾â€çš„é—®é¢˜ï¼Œå®ç°ä¸‰å¤§æ ¸å¿ƒä»·å€¼ï¼š</p>
<ul>
<li><strong>å¯æ‰§è¡Œ</strong>ï¼šè§„åˆ™æ–‡æ¡£è‡ªåŠ¨è½¬æˆESLint/TSç­‰å·¥å…·é…ç½®ï¼Œæ— éœ€äººå·¥ç¿»è¯‘</li>
<li><strong>å¯éªŒè¯</strong>ï¼šæ¯ä¸ªè§„åˆ™ç»‘å®šä¸“å±æµ‹è¯•ç”¨ä¾‹ï¼Œå¯¹é”™æœ‰æ˜ç¡®æ ‡å‡†</li>
<li><strong>å¯åº¦é‡</strong>ï¼šè§„åˆ™æ‰§è¡Œæ•ˆæœé‡åŒ–æˆæŒ‡æ ‡ï¼Œä¼˜åŒ–æ–¹å‘æ¸…æ™°å¯è§</li>
</ul>
<h3 data-id="heading-2">äºŒã€æŠ€æœ¯æµè½¬æ¶æ„</h3>
<p>æ•´ä¸ªè§„åˆ™ä½“ç³»çš„æŠ€æœ¯æµè½¬é“¾è·¯å¦‚ä¸‹ï¼Œæ ¸å¿ƒå®ç°â€œè§„åˆ™è¾“å…¥-è‡ªåŠ¨è§£æ-é…ç½®è¾“å‡º-éªŒè¯é—­ç¯â€ï¼š</p>
<p>æš‚æ—¶æ— æ³•åœ¨è±†åŒ…æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p>
<hr/>
<h2 data-id="heading-3">ğŸ“‹ ç¬¬ä¸€é˜¶æ®µï¼šç­‘ç‰¢æ ¹åŸºâ€”â€”æ ¸å¿ƒå¼•æ“å¼€å‘ï¼ˆç¬¬1-2å‘¨ï¼‰</h2>
<p>ç›®æ ‡ï¼šæå®šâ€œè§„åˆ™è§£æâ€å’Œâ€œé…ç½®ç”Ÿæˆâ€ä¸¤å¤§æ ¸å¿ƒå·¥å…·ï¼Œè®©è§„åˆ™ä»æ–‡æ¡£é‡Œâ€œæ´»â€èµ·æ¥</p>
<h3 data-id="heading-4">1.1 è§„åˆ™è§£æå™¨ï¼šæŠŠMarkdownè½¬æˆå¯è®¡ç®—æ•°æ®</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šè¯»å–è§„åˆ™æ–‡æ¡£ï¼Œè‡ªåŠ¨æå–å…ƒä¿¡æ¯ã€é…ç½®ç‰‡æ®µå’Œç¤ºä¾‹ä»£ç ï¼Œé¿å…äººå·¥å¤åˆ¶å‡ºé”™ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// scripts/rule-parser.js
const <span class="hljs-attr">fs</span> = require(<span class="hljs-string">'fs'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">yaml</span> = require(<span class="hljs-string">'yaml'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">marked</span> = require(<span class="hljs-string">'marked'</span>)<span class="hljs-comment">;</span>

class RuleParser {
  constructor() {
    <span class="hljs-attr">this.rules</span> = new Map()<span class="hljs-comment">; // å­˜å‚¨è§£æåçš„è§„åˆ™é›†åˆ</span>
  }

  // è§£æå•ä¸ªè§„åˆ™æ–‡ä»¶ï¼Œå¤„ç†Frontmatterå’Œæ­£æ–‡åˆ†ç¦»çš„æ ¼å¼
  parseRuleFile(filePath) {
    const <span class="hljs-attr">content</span> = fs.readFileSync(filePath, <span class="hljs-string">'utf8'</span>)<span class="hljs-comment">;</span>
    const <span class="hljs-attr">parts</span> = content.split(<span class="hljs-string">'---'</span>)<span class="hljs-comment">; // æ‹†åˆ†Frontmatterå’Œæ­£æ–‡ï¼ˆå…¼å®¹å¤šç»„---åˆ†éš”çš„åœºæ™¯ï¼‰</span>
    
    if (parts.length &lt; 3) {
      throw new Error(`è§„åˆ™æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼š${filePath} ç¼ºå°‘Frontmatter`)<span class="hljs-comment">;</span>
    }

    // è§£æFrontmatterå…ƒä¿¡æ¯ï¼ˆè§„åˆ™æ ‡é¢˜ã€ä½œè€…ã€ä¼˜å…ˆçº§ç­‰ï¼‰
    const <span class="hljs-attr">frontmatter</span> = yaml.parse(parts[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
    // åˆå¹¶å‰©ä½™éƒ¨åˆ†ä½œä¸ºMarkdownæ­£æ–‡ï¼ˆé¿å…æ‹†åˆ†æ—¶ä¸¢å¤±å†…å®¹ï¼‰
    const <span class="hljs-attr">markdown</span> = parts.slice(<span class="hljs-number">2</span>).join(<span class="hljs-string">'---'</span>)<span class="hljs-comment">;</span>
    
    return {
      metadata: frontmatter,
      content: markdown,
      filePath,
      configs: this.extractConfigs(markdown), // æå–å·¥å…·é…ç½®ç‰‡æ®µ
      examples: this.extractExamples(markdown) // æå–æ­£åç¤ºä¾‹ä»£ç 
    }<span class="hljs-comment">;</span>
  }

  // ä»Markdownä¸­æå–å·¥å…·é…ç½®ï¼ˆESLint/TSç­‰ï¼‰
  extractConfigs(markdown) {
    const <span class="hljs-attr">configs</span> = {}<span class="hljs-comment">;</span>
    // åŒ¹é…æ‰€æœ‰ä»£ç å—ï¼ˆæ”¯æŒä»»æ„è¯­è¨€æ ‡è¯†ï¼‰
    const <span class="hljs-attr">codeBlocks</span> = markdown.match(/```(\w+)\n([\s\S]*?)\n```/g) || []<span class="hljs-comment">;</span>
    
    codeBlocks.forEach(<span class="hljs-attr">block</span> =&gt; {
      const <span class="hljs-section">[, lang, code]</span> = block.match(/```(\w+)\n(<span class="hljs-section">[\s\S]</span>*?)\n```/)<span class="hljs-comment">;</span>
      
      // è¯†åˆ«ESLinté…ç½®ï¼ˆjavascriptä»£ç å—ä¸”åŒ…å«eslintå…³é”®å­—ï¼‰
      if (<span class="hljs-attr">lang</span> === <span class="hljs-string">'javascript'</span> &amp;&amp; code.includes(<span class="hljs-string">'eslint'</span>)) {
        <span class="hljs-attr">configs.eslint</span> = this.parseESLintConfig(code)<span class="hljs-comment">;</span>
      }
      // è¯†åˆ«TSé…ç½®ï¼ˆjsonä»£ç å—ä¸”åŒ…å«compilerOptionsï¼‰
      if (<span class="hljs-attr">lang</span> === <span class="hljs-string">'json'</span> &amp;&amp; code.includes(<span class="hljs-string">'compilerOptions'</span>)) {
        <span class="hljs-attr">configs.typescript</span> = JSON.parse(code)<span class="hljs-comment">;</span>
      }
    })<span class="hljs-comment">;</span>
    
    return configs<span class="hljs-comment">;</span>
  }

  // æå–æ­£åç¤ºä¾‹ä»£ç ï¼ˆåŒºåˆ†âœ…æ­£ç¡®ç¤ºä¾‹å’ŒâŒé”™è¯¯ç¤ºä¾‹ï¼‰
  extractExamples(markdown) {
    const <span class="hljs-attr">examples</span> = { good: [], bad: [] }<span class="hljs-comment">;</span>
    const <span class="hljs-attr">lines</span> = markdown.split(<span class="hljs-string">'\n'</span>)<span class="hljs-comment">;</span>
    
    let <span class="hljs-attr">currentExampleType</span> = null<span class="hljs-comment">; // æ ‡è®°å½“å‰å¤„ç†çš„ç¤ºä¾‹ç±»å‹ï¼ˆgood/badï¼‰</span>
    let <span class="hljs-attr">inCodeBlock</span> = <span class="hljs-literal">false</span><span class="hljs-comment">; // æ ‡è®°æ˜¯å¦è¿›å…¥ä»£ç å—å†…éƒ¨</span>
    
    lines.forEach(<span class="hljs-attr">line</span> =&gt; {
      // è¯†åˆ«ç¤ºä¾‹ç±»å‹æ ‡è®°
      if (line.includes('âœ…')) {
        <span class="hljs-attr">currentExampleType</span> = <span class="hljs-string">'good'</span><span class="hljs-comment">;</span>
      } else if (line.includes('âŒ')) {
        <span class="hljs-attr">currentExampleType</span> = <span class="hljs-string">'bad'</span><span class="hljs-comment">;</span>
      } 
      // å¤„ç†ä»£ç å—å¼€å§‹/ç»“æŸæ ‡è®°
      else if (line.startsWith('```') &amp;&amp; currentExampleType) {
        <span class="hljs-attr">inCodeBlock</span> = !inCodeBlock<span class="hljs-comment">;</span>
        // ä»£ç å—ç»“æŸæ—¶é‡ç½®ç±»å‹ï¼Œé¿å…è·¨ç¤ºä¾‹æ±¡æŸ“
        if (!inCodeBlock) <span class="hljs-attr">currentExampleType</span> = null<span class="hljs-comment">;</span>
      } 
      // æ”¶é›†ä»£ç å—å†…å®¹
      else if (inCodeBlock &amp;&amp; currentExampleType) {
        examples<span class="hljs-section">[currentExampleType]</span>.push(line)<span class="hljs-comment">;</span>
      }
    })<span class="hljs-comment">;</span>
    
    return examples<span class="hljs-comment">;</span>
  }
}

<span class="hljs-attr">module.exports</span> = RuleParser<span class="hljs-comment">;</span>
</code></pre>
<h4 data-id="heading-5">éªŒæ”¶æ ‡å‡†ï¼ˆå¿…é¡»å…¨éƒ¨è¾¾æ ‡ï¼‰</h4>
<ul>
<li>èƒ½è§£ædocs/rulesç›®å½•ä¸‹æ‰€æœ‰ç°æœ‰è§„åˆ™æ–‡ä»¶ï¼ˆå½“å‰å…±87ä¸ªï¼‰ï¼Œæ— è§£æé”™è¯¯</li>
<li>é…ç½®ç‰‡æ®µæå–å‡†ç¡®ç‡â‰¥95%ï¼ˆäººå·¥æŠ½æ ·50ä¸ªè§„åˆ™éªŒè¯ï¼Œé”™è¯¯ä¸è¶…è¿‡3ä¸ªï¼‰</li>
<li>å•ç›®å½•100ä¸ªè§„åˆ™æ–‡ä»¶æ‰¹é‡è§£ææ—¶é—´â‰¤2ç§’ï¼ˆæœ¬åœ°Node.jsç¯å¢ƒæµ‹è¯•ï¼‰</li>
</ul>
<h3 data-id="heading-6">1.2 é…ç½®ç”Ÿæˆå™¨ï¼šè‡ªåŠ¨è¾“å‡ºå¯ç”¨å·¥å…·é…ç½®</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šæŠŠè§£æå™¨æå–çš„é…ç½®ç‰‡æ®µï¼Œæ•´åˆæˆESLintã€TypeScriptèƒ½ç›´æ¥ä½¿ç”¨çš„å®Œæ•´é…ç½®æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/config-generator.js</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RuleParser</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./rule-parser'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigGenerator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuleParser</span>();
    <span class="hljs-comment">// åˆå§‹åŒ–åŸºç¡€é…ç½®æ¨¡æ¿ï¼ˆé¿å…é‡å¤ç¼–å†™é€šç”¨è§„åˆ™ï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span> = {
      <span class="hljs-attr">eslint</span>: {
        <span class="hljs-attr">extends</span>: [<span class="hljs-string">'@antfu/eslint-config-vue'</span>, <span class="hljs-string">'@antfu/eslint-config-typescript'</span>],
        <span class="hljs-attr">rules</span>: {}
      },
      <span class="hljs-attr">typescript</span>: {
        <span class="hljs-attr">compilerOptions</span>: {
          <span class="hljs-attr">target</span>: <span class="hljs-string">'ES2020'</span>,
          <span class="hljs-attr">module</span>: <span class="hljs-string">'ESNext'</span>,
          <span class="hljs-attr">moduleResolution</span>: <span class="hljs-string">'node'</span>,
          <span class="hljs-attr">strict</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">jsx</span>: <span class="hljs-string">'preserve'</span>,
          <span class="hljs-attr">esModuleInterop</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">skipLibCheck</span>: <span class="hljs-literal">true</span>,
          <span class="hljs-attr">forceConsistentCasingInFileNames</span>: <span class="hljs-literal">true</span>
        }
      },
      <span class="hljs-attr">prettier</span>: {}
    };
  }

  <span class="hljs-comment">// ç”ŸæˆESLinté…ç½®ï¼ˆåˆå¹¶åŸºç¡€è§„åˆ™å’Œè‡ªå®šä¹‰è§„åˆ™ï¼‰</span>
  <span class="hljs-title function_">generateESLintConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> ruleFiles = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAllRuleFiles</span>(); <span class="hljs-comment">// è·å–æ‰€æœ‰è§„åˆ™æ–‡ä»¶è·¯å¾„</span>
    
    ruleFiles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> rule = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">parseRuleFile</span>(file);
      <span class="hljs-comment">// åˆå¹¶å½“å‰è§„åˆ™çš„ESLinté…ç½®ï¼ˆä¼˜å…ˆçº§ï¼šè‡ªå®šä¹‰è§„åˆ™&gt;åŸºç¡€è§„åˆ™ï¼‰</span>
      <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">configs</span>.<span class="hljs-property">eslint</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">eslint</span>.<span class="hljs-property">rules</span>, rule.<span class="hljs-property">configs</span>.<span class="hljs-property">eslint</span>);
      }
    });

    <span class="hljs-comment">// è¿½åŠ å›¢é˜Ÿé€šç”¨å¼ºåˆ¶è§„åˆ™ï¼ˆé¿å…é—æ¼æ ¸å¿ƒçº¦æŸï¼‰</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">eslint</span>.<span class="hljs-property">rules</span> = {
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">eslint</span>.<span class="hljs-property">rules</span>,
      <span class="hljs-string">'@typescript-eslint/no-unused-vars'</span>: <span class="hljs-string">'error'</span>, <span class="hljs-comment">// ç¦æ­¢æœªä½¿ç”¨å˜é‡</span>
      <span class="hljs-string">'vue/component-name-in-template-casing'</span>: [<span class="hljs-string">'error'</span>, <span class="hljs-string">'PascalCase'</span>] <span class="hljs-comment">// Vueç»„ä»¶åå¤§å†™</span>
    };

    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">eslint</span>;
  }

  <span class="hljs-comment">// ç”ŸæˆTypeScripté…ç½®ï¼ˆåˆå¹¶åŸºç¡€ç¼–è¯‘é€‰é¡¹å’Œè§„åˆ™æ‰©å±•ï¼‰</span>
  <span class="hljs-title function_">generateTypeScriptConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> ruleFiles = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAllRuleFiles</span>();
    
    ruleFiles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> rule = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">parseRuleFile</span>(file);
      <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">configs</span>.<span class="hljs-property">typescript</span>) {
        <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">typescript</span>.<span class="hljs-property">compilerOptions</span>, rule.<span class="hljs-property">configs</span>.<span class="hljs-property">typescript</span>);
      }
    });
    
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">baseConfigs</span>.<span class="hljs-property">typescript</span>;
  }

  <span class="hljs-comment">// å†™å…¥é…ç½®æ–‡ä»¶åˆ°é¡¹ç›®æ ¹ç›®å½•ï¼ˆç”Ÿæˆå¸¦æ ‡è¯†çš„æ–‡ä»¶ï¼Œé¿å…è¦†ç›–æ‰‹åŠ¨é…ç½®ï¼‰</span>
  <span class="hljs-title function_">writeConfigs</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> eslintConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateESLintConfig</span>();
    <span class="hljs-keyword">const</span> tsConfig = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateTypeScriptConfig</span>();

    <span class="hljs-comment">// å†™å…¥ESLinté…ç½®ï¼ˆåç¼€.generatedæ ‡è¯†è‡ªåŠ¨ç”Ÿæˆï¼‰</span>
    fs.<span class="hljs-title function_">writeFileSync</span>(
      <span class="hljs-string">'.eslintrc.generated.js'</span>,
      <span class="hljs-string">`// è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹ â€”â€” æ¥æºï¼šè§„åˆ™ä½“ç³»å·¥ç¨‹åŒ–å·¥å…·\nmodule.exports = <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(eslintConfig, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)}</span>`</span>
    );

    <span class="hljs-comment">// å†™å…¥TSé…ç½®</span>
    fs.<span class="hljs-title function_">writeFileSync</span>(
      <span class="hljs-string">'tsconfig.generated.json'</span>,
      <span class="hljs-string">`// è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ä¿®æ”¹ â€”â€” æ¥æºï¼šè§„åˆ™ä½“ç³»å·¥ç¨‹åŒ–å·¥å…·\n<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(tsConfig, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)}</span>`</span>
    );

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'âœ… å·¥å…·é…ç½®ç”Ÿæˆå®Œæˆï¼å¯ç›´æ¥å¼•ç”¨ .generated åç¼€çš„é…ç½®æ–‡ä»¶'</span>);
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè·å–æ‰€æœ‰è§„åˆ™æ–‡ä»¶è·¯å¾„ï¼ˆå¯æ ¹æ®å®é™…ç›®å½•è°ƒæ•´ï¼‰</span>
  <span class="hljs-title function_">getAllRuleFiles</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> fs.<span class="hljs-title function_">readdirSync</span>(<span class="hljs-string">'./docs/rules'</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> file.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.md'</span>)).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> <span class="hljs-string">`./docs/rules/<span class="hljs-subst">${file}</span>`</span>);
  }
}

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-title class_">ConfigGenerator</span>;
</code></pre>
<h4 data-id="heading-7">éªŒæ”¶æ ‡å‡†ï¼ˆå¿…é¡»å…¨éƒ¨è¾¾æ ‡ï¼‰</h4>
<ul>
<li>ç”Ÿæˆçš„.eslintrc.generated.jsé€šè¿‡<code>npx eslint --config .eslintrc.generated.js --validate-config</code>éªŒè¯</li>
<li>tsconfig.generated.jsoné…åˆé¡¹ç›®ä»£ç ç¼–è¯‘æ— é”™è¯¯ï¼ˆæ‰§è¡Œ<code>tsc --project tsconfig.generated.json</code>æ— å¼‚å¸¸ï¼‰</li>
<li>é…ç½®è¦†ç›–æ‰€æœ‰æ ¸å¿ƒè§„åˆ™ï¼ˆ87ä¸ªè§„åˆ™ä¸­è‡³å°‘78ä¸ªè¢«çº³å…¥é…ç½®ï¼Œè¦†ç›–ç‡â‰¥90%ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-8">ğŸ§ª ç¬¬äºŒé˜¶æ®µï¼šéªŒè¯é—­ç¯â€”â€”AIæµ‹è¯•ä½“ç³»æ­å»ºï¼ˆç¬¬3å‘¨ï¼‰</h2>
<p>ç›®æ ‡ï¼šç»™æ¯ä¸ªè§„åˆ™é…â€œè‡ªåŠ¨è€ƒå®˜â€ï¼Œç”¨AIç”Ÿæˆæµ‹è¯•ç”¨ä¾‹å¹¶éªŒè¯è§„åˆ™æ‰§è¡Œæ•ˆæœï¼Œé¿å…è§„åˆ™è½åœ°èµ°æ ·ã€‚</p>
<h3 data-id="heading-9">2.1 AIæµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨ï¼šè§„åˆ™çš„â€œä¸“å±é¢˜åº“â€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šæ ¹æ®è§„åˆ™çš„æ­£åç¤ºä¾‹ï¼Œè‡ªåŠ¨ç”ŸæˆAIå¯æ‰§è¡Œçš„æµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯AIå¯¹è§„åˆ™çš„ç†è§£æ˜¯å¦å‡†ç¡®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/ai-test-generator.js</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RuleParser</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./rule-parser'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AITestGenerator</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuleParser</span>();
  }

  <span class="hljs-comment">// æ‰¹é‡ç”Ÿæˆæ‰€æœ‰è§„åˆ™çš„æµ‹è¯•å¥—ä»¶</span>
  <span class="hljs-title function_">generateTestCases</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> ruleFiles = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">getAllRuleFiles</span>();
    <span class="hljs-keyword">const</span> testSuites = [];

    ruleFiles.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> rule = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">parseRuleFile</span>(file);
      <span class="hljs-comment">// è·³è¿‡æ— ç¤ºä¾‹çš„è§„åˆ™ï¼ˆé¿å…ç©ºæµ‹è¯•ï¼‰</span>
      <span class="hljs-keyword">if</span> (rule.<span class="hljs-property">examples</span>.<span class="hljs-property">good</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span> &amp;&amp; rule.<span class="hljs-property">examples</span>.<span class="hljs-property">bad</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
      
      <span class="hljs-keyword">const</span> testSuite = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createTestSuite</span>(rule);
      testSuites.<span class="hljs-title function_">push</span>(testSuite);
    });

    <span class="hljs-keyword">return</span> testSuites;
  }

  <span class="hljs-comment">// ä¸ºå•ä¸ªè§„åˆ™åˆ›å»ºæµ‹è¯•å¥—ä»¶ï¼ˆåŒ…å«æ­£å‘å’Œåå‘æµ‹è¯•ï¼‰</span>
  <span class="hljs-title function_">createTestSuite</span>(<span class="hljs-params">rule</span>) {
    <span class="hljs-keyword">const</span> { metadata, examples } = rule;
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">ruleTitle</span>: metadata.<span class="hljs-property">title</span>, <span class="hljs-comment">// è§„åˆ™æ ‡é¢˜ï¼ˆç”¨äºæµ‹è¯•æŠ¥å‘Šå®šä½ï¼‰</span>
      <span class="hljs-attr">ruleId</span>: metadata.<span class="hljs-property">id</span> || rule.<span class="hljs-property">filePath</span>, <span class="hljs-comment">// è§„åˆ™å”¯ä¸€æ ‡è¯†</span>
      <span class="hljs-attr">tests</span>: [
        ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createPositiveTests</span>(examples.<span class="hljs-property">good</span>, metadata), <span class="hljs-comment">// æ­£å‘æµ‹è¯•ï¼ˆç¬¦åˆè§„åˆ™çš„ä»£ç ï¼‰</span>
        ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createNegativeTests</span>(examples.<span class="hljs-property">bad</span>, metadata)  <span class="hljs-comment">// åå‘æµ‹è¯•ï¼ˆè¿åè§„åˆ™çš„ä»£ç ï¼‰</span>
      ]
    };
  }

  <span class="hljs-comment">// ç”Ÿæˆæ­£å‘æµ‹è¯•ç”¨ä¾‹ï¼ˆéªŒè¯AIèƒ½è¯†åˆ«â€œæ­£ç¡®ä»£ç â€ï¼‰</span>
  <span class="hljs-title function_">createPositiveTests</span>(<span class="hljs-params">goodExamples, metadata</span>) {
    <span class="hljs-keyword">return</span> goodExamples.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">example, index</span>) =&gt;</span> ({
      <span class="hljs-attr">testName</span>: <span class="hljs-string">`æ­£å‘ç”¨ä¾‹<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ï¼šè¯†åˆ«ç¬¦åˆ<span class="hljs-subst">${metadata.title}</span>çš„ä»£ç `</span>,
      <span class="hljs-attr">inputCode</span>: example.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>), <span class="hljs-comment">// æ‹¼æ¥ä»£ç è¡Œ</span>
      <span class="hljs-attr">expectedResult</span>: <span class="hljs-string">'ç¡®è®¤ä»£ç ç¬¦åˆè§„åˆ™ï¼Œæ— éœ€ä¿®æ”¹'</span>,
      <span class="hljs-attr">prompt</span>: <span class="hljs-string">`è¯·åˆ¤æ–­ä»¥ä¸‹ä»£ç æ˜¯å¦ç¬¦åˆã€Š<span class="hljs-subst">${metadata.title}</span>ã€‹è§„åˆ™ï¼š\nè§„åˆ™è¯´æ˜ï¼š<span class="hljs-subst">${metadata.description || <span class="hljs-string">'æ— è¯¦ç»†è¯´æ˜'</span>}</span>\nä»£ç ï¼š\n<span class="hljs-subst">${example.join(<span class="hljs-string">'\n'</span>)}</span>`</span>,
      <span class="hljs-comment">// éªŒè¯AIå“åº”çš„æ–­è¨€é€»è¾‘</span>
      <span class="hljs-attr">assertion</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> positiveKeywords = [<span class="hljs-string">'ç¬¦åˆ'</span>, <span class="hljs-string">'æ­£ç¡®'</span>, <span class="hljs-string">'æ— éœ€ä¿®æ”¹'</span>, <span class="hljs-string">'æ²¡é—®é¢˜'</span>];
        <span class="hljs-keyword">const</span> negativeKeywords = [<span class="hljs-string">'é”™è¯¯'</span>, <span class="hljs-string">'ä¿®æ”¹'</span>, <span class="hljs-string">'è¿è§„'</span>, <span class="hljs-string">'ä¸ç¬¦åˆ'</span>];
        <span class="hljs-comment">// åŒ…å«æ­£å‘å…³é”®è¯ä¸”ä¸åŒ…å«åå‘å…³é”®è¯ï¼Œè§†ä¸ºé€šè¿‡</span>
        <span class="hljs-keyword">return</span> positiveKeywords.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> response.<span class="hljs-title function_">includes</span>(k)) &amp;&amp; 
               !negativeKeywords.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> response.<span class="hljs-title function_">includes</span>(k));
      }
    }));
  }

  <span class="hljs-comment">// ç”Ÿæˆåå‘æµ‹è¯•ç”¨ä¾‹ï¼ˆéªŒè¯AIèƒ½è¯†åˆ«å¹¶ä¿®å¤â€œé”™è¯¯ä»£ç â€ï¼‰</span>
  <span class="hljs-title function_">createNegativeTests</span>(<span class="hljs-params">badExamples, metadata</span>) {
    <span class="hljs-keyword">return</span> badExamples.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">example, index</span>) =&gt;</span> ({
      <span class="hljs-attr">testName</span>: <span class="hljs-string">`åå‘ç”¨ä¾‹<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ï¼šä¿®å¤è¿å<span class="hljs-subst">${metadata.title}</span>çš„ä»£ç `</span>,
      <span class="hljs-attr">inputCode</span>: example.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>),
      <span class="hljs-attr">expectedResult</span>: <span class="hljs-string">'æŒ‡å‡ºä»£ç è¿è§„ç‚¹å¹¶ç»™å‡ºä¿®å¤æ–¹æ¡ˆ'</span>,
      <span class="hljs-attr">prompt</span>: <span class="hljs-string">`è¯·æ ¹æ®ã€Š<span class="hljs-subst">${metadata.title}</span>ã€‹è§„åˆ™ï¼ŒæŒ‡å‡ºä»¥ä¸‹ä»£ç çš„è¿è§„é—®é¢˜å¹¶é‡æ„ï¼š\nè§„åˆ™è¯´æ˜ï¼š<span class="hljs-subst">${metadata.description || <span class="hljs-string">'æ— è¯¦ç»†è¯´æ˜'</span>}</span>\nä»£ç ï¼š\n<span class="hljs-subst">${example.join(<span class="hljs-string">'\n'</span>)}</span>`</span>,
      <span class="hljs-attr">assertion</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-keyword">const</span> requiredKeywords = [<span class="hljs-string">'è¿è§„'</span>, <span class="hljs-string">'ä¿®æ”¹'</span>, <span class="hljs-string">'é‡æ„'</span>, <span class="hljs-string">'å»ºè®®'</span>, <span class="hljs-string">'åº”è¯¥'</span>];
        <span class="hljs-comment">// åŒ…å«æ ¸å¿ƒå…³é”®è¯ï¼Œä¸”å“åº”é•¿åº¦æ¯”è¾“å…¥ä»£ç é•¿ï¼ˆç¡®ä¿ç»™å‡ºå…·ä½“æ–¹æ¡ˆï¼‰</span>
        <span class="hljs-keyword">return</span> requiredKeywords.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">k</span> =&gt;</span> response.<span class="hljs-title function_">includes</span>(k)) &amp;&amp; 
               response.<span class="hljs-property">length</span> &gt; example.<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>).<span class="hljs-property">length</span> * <span class="hljs-number">1.2</span>;
      }
    }));
  }
}
</code></pre>
<h3 data-id="heading-10">2.2 è‡ªåŠ¨åŒ–æµ‹è¯•æ‰§è¡Œï¼šè®©â€œè€ƒå®˜â€è‡ªåŠ¨åˆ¤åˆ†</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šé›†æˆåˆ°æµ‹è¯•æ¡†æ¶ä¸­ï¼Œè‡ªåŠ¨è°ƒç”¨AIæ‰§è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶ç”ŸæˆæŠ¥å‘Šï¼Œå¿«é€Ÿå®šä½è§„åˆ™ç†è§£åå·®ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// tests/ai-acceptance.test.js</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">AITestGenerator</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../scripts/ai-test-generator'</span>);
<span class="hljs-keyword">const</span> { callAIApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../scripts/ai-client'</span>); <span class="hljs-comment">// å®é™…AIæ¥å£è°ƒç”¨å·¥å…·</span>

<span class="hljs-comment">// æµ‹è¯•å¥—ä»¶ï¼šéªŒè¯AIå¯¹è§„åˆ™çš„ç†è§£å‡†ç¡®æ€§</span>
<span class="hljs-title function_">describe</span>(<span class="hljs-string">'è§„åˆ™ä½“ç³» - AIç†è§£éªŒæ”¶æµ‹è¯•'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> generator = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AITestGenerator</span>();
  <span class="hljs-keyword">const</span> testSuites = generator.<span class="hljs-title function_">generateTestCases</span>();

  <span class="hljs-comment">// ä¸ºæ¯ä¸ªè§„åˆ™åˆ›å»ºç‹¬ç«‹æµ‹è¯•åˆ†ç»„ï¼ˆä¾¿äºå®šä½é—®é¢˜ï¼‰</span>
  testSuites.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">suite</span> =&gt;</span> {
    <span class="hljs-title function_">describe</span>(<span class="hljs-string">`è§„åˆ™ï¼š<span class="hljs-subst">${suite.ruleTitle}</span>ï¼ˆ<span class="hljs-subst">${suite.ruleId}</span>ï¼‰`</span>, <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æ‰§è¡Œè¯¥è§„åˆ™çš„æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹</span>
      suite.<span class="hljs-property">tests</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">test</span> =&gt;</span> {
        <span class="hljs-title function_">it</span>(test.<span class="hljs-property">testName</span>, <span class="hljs-keyword">async</span> () =&gt; {
          <span class="hljs-comment">// è°ƒç”¨AIæ¥å£è·å–å“åº”ï¼ˆå®é™…é¡¹ç›®æ›¿æ¢ä¸ºçœŸå®AI APIï¼‰</span>
          <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> <span class="hljs-title function_">callAIApi</span>({
            <span class="hljs-attr">prompt</span>: test.<span class="hljs-property">prompt</span>,
            <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4o-mini'</span>, <span class="hljs-comment">// å¯æ ¹æ®æˆæœ¬è°ƒæ•´æ¨¡å‹</span>
            <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.3</span> <span class="hljs-comment">// é™ä½éšæœºæ€§ï¼Œç¡®ä¿ç»“æœç¨³å®š</span>
          });
          
          <span class="hljs-comment">// éªŒè¯AIå“åº”æ˜¯å¦ç¬¦åˆé¢„æœŸ</span>
          <span class="hljs-title function_">expect</span>(test.<span class="hljs-title function_">assertion</span>(aiResponse)).<span class="hljs-title function_">toBe</span>(<span class="hljs-literal">true</span>);
        }, <span class="hljs-number">10000</span>); <span class="hljs-comment">// å•ä¸ªç”¨ä¾‹è¶…æ—¶æ—¶é—´ï¼š10ç§’ï¼ˆé€‚é…AIå“åº”é€Ÿåº¦ï¼‰</span>
      });
    });
  });
});

<span class="hljs-comment">// æ¨¡æ‹ŸAIè°ƒç”¨ï¼ˆå¼€å‘é˜¶æ®µç”¨äºè°ƒè¯•ï¼Œå®é™…ç¯å¢ƒæ›¿æ¢ä¸ºçœŸå®æ¥å£ï¼‰</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">callAIApi</span>(<span class="hljs-params">params</span>) {
  <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­è¿™é‡Œæ›¿æ¢ä¸ºï¼šreturn await axios.post(AI_API_URL, params, { headers: { Authorization: `Bearer ${AI_API_KEY}` } });</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`\n[AIè°ƒç”¨] é—®é¢˜ï¼š<span class="hljs-subst">${params.prompt.slice(<span class="hljs-number">0</span>, <span class="hljs-number">50</span>)}</span>...`</span>);
  <span class="hljs-comment">// æ¨¡æ‹Ÿå“åº”ï¼ˆå¼€å‘è°ƒè¯•ç”¨ï¼Œå®é™…ä¼šåˆ é™¤ï¼‰</span>
  <span class="hljs-keyword">return</span> params.<span class="hljs-property">prompt</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'âœ…'</span>) 
    ? <span class="hljs-string">'è¯¥ä»£ç å®Œå…¨ç¬¦åˆè§„åˆ™è¦æ±‚ï¼Œæ— éœ€è¿›è¡Œä¿®æ”¹ã€‚'</span>
    : <span class="hljs-string">'è¯¥ä»£ç è¿åäº†è§„åˆ™ä¸­"ç¦æ­¢æœªå®šä¹‰å˜é‡ç›´æ¥ä½¿ç”¨"çš„è¦æ±‚ï¼Œå»ºè®®å…ˆå£°æ˜å˜é‡å†èµ‹å€¼ï¼Œä¿®å¤åä»£ç å¦‚ä¸‹ï¼šconst a = 1; console.log(a);'</span>;
}
</code></pre>
<h4 data-id="heading-11">éªŒæ”¶æ ‡å‡†</h4>
<ul>
<li>AIæµ‹è¯•é€šè¿‡ç‡â‰¥85%ï¼ˆæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä¸­ï¼Œé€šè¿‡æ•°é‡å æ¯”ä¸ä½äº85%ï¼‰</li>
<li>æ ¸å¿ƒè§„åˆ™å…¨è¦†ç›–ï¼ˆ87ä¸ªè§„åˆ™ä¸­ï¼Œä¼˜å…ˆçº§P0/P1çš„32ä¸ªè§„åˆ™å¿…é¡»å…¨éƒ¨åŒ…å«æµ‹è¯•ç”¨ä¾‹ï¼‰</li>
<li>å…¨é‡æµ‹è¯•æ‰§è¡Œæ—¶é—´â‰¤5åˆ†é’Ÿï¼ˆåœ¨CIç¯å¢ƒä¸­ï¼Œè°ƒç”¨AIå®Œæˆæ‰€æœ‰ç”¨ä¾‹æµ‹è¯•çš„æ€»è€—æ—¶ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-12">ğŸ”„ ç¬¬ä¸‰é˜¶æ®µï¼šæ— ç¼é›†æˆâ€”â€”CI/CDæµç¨‹åµŒå…¥ï¼ˆç¬¬4å‘¨ï¼‰</h2>
<p>ç›®æ ‡ï¼šæŠŠè§„åˆ™æ£€æŸ¥èå…¥å¼€å‘æµç¨‹ï¼Œåšåˆ°â€œæäº¤å³æ£€æŸ¥ï¼Œè¿è§„å³æ‹¦æˆªâ€ï¼Œé¿å…é—®é¢˜ä»£ç å…¥åº“ã€‚</p>
<h3 data-id="heading-13">3.1 Pre-commité’©å­ï¼šæœ¬åœ°æäº¤çš„â€œç¬¬ä¸€é“é˜²çº¿â€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šå¼€å‘è€…æäº¤ä»£ç å‰è‡ªåŠ¨æ‰§è¡Œè§„åˆ™æ£€æŸ¥ï¼Œæå‰æ‹¦æˆªè¿è§„ä»£ç ï¼Œå‡å°‘CIå¤±è´¥æ¬¡æ•°ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
<span class="hljs-comment"># .husky/pre-commit ï¼ˆéœ€é…åˆhuskyå·¥å…·ä½¿ç”¨ï¼šnpx husky install &amp;&amp; npx husky add .husky/pre-commit "bash .husky/pre-commit"ï¼‰</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nğŸ” æ­£åœ¨æ‰§è¡Œè§„åˆ™ä½“ç³»è´¨é‡æ£€æŸ¥..."</span>

<span class="hljs-comment"># 1. éªŒè¯è§„åˆ™æ–‡ä»¶æ ¼å¼ï¼ˆé¿å…æäº¤æ— æ•ˆè§„åˆ™ï¼‰</span>
node scripts/validate-rules.js
<span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nâŒ è§„åˆ™æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥docs/rulesç›®å½•ä¸‹çš„Markdownæ–‡ä»¶"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 2. æ£€æµ‹è§„åˆ™å†²çªï¼ˆé¿å…ä¸åŒè§„åˆ™äº’ç›¸çŸ›ç›¾ï¼‰</span>
node scripts/detect-conflicts.js
<span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
  <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nâŒ å‘ç°è§„åˆ™å†²çªï¼Œè¯·å…ˆè§£å†³å†²çªå†æäº¤ï¼ˆæŸ¥çœ‹å†²çªæŠ¥å‘Šï¼šreports/conflicts.mdï¼‰"</span>
  <span class="hljs-built_in">exit</span> 1
<span class="hljs-keyword">fi</span>

<span class="hljs-comment"># 3. ç”Ÿæˆæœ€æ–°é…ç½®æ–‡ä»¶ï¼ˆç¡®ä¿ç”¨æœ€æ–°è§„åˆ™æ£€æŸ¥ä»£ç ï¼‰</span>
node scripts/generate-configs.js

<span class="hljs-comment"># 4. ç”¨ç”Ÿæˆçš„é…ç½®æ‰§è¡ŒESLintæ£€æŸ¥ï¼ˆåªæ£€æŸ¥æš‚å­˜åŒºæ–‡ä»¶ï¼Œæé«˜æ•ˆç‡ï¼‰</span>
STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E <span class="hljs-string">'.(js|ts|vue)$'</span>)
<span class="hljs-keyword">if</span> [ -n <span class="hljs-string">"<span class="hljs-variable">$STAGED_FILES</span>"</span> ]; <span class="hljs-keyword">then</span>
  npx eslint <span class="hljs-variable">$STAGED_FILES</span> --config .eslintrc.generated.js --max-warnings 0
  <span class="hljs-keyword">if</span> [ $? -ne 0 ]; <span class="hljs-keyword">then</span>
    <span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nâŒ ä»£ç è¿åè§„åˆ™ï¼Œè¯·ä¿®å¤åå†æäº¤"</span>
    <span class="hljs-built_in">exit</span> 1
  <span class="hljs-keyword">fi</span>
<span class="hljs-keyword">fi</span>

<span class="hljs-built_in">echo</span> -e <span class="hljs-string">"\nâœ… æ‰€æœ‰è§„åˆ™æ£€æŸ¥é€šè¿‡ï¼Œå¯æ­£å¸¸æäº¤"</span>
<span class="hljs-built_in">exit</span> 0
</code></pre>
<h3 data-id="heading-14">3.2 GitHub Actionså·¥ä½œæµï¼šè¿œç¨‹ä»“åº“çš„â€œç»ˆææŠŠå…³â€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šä»£ç æ¨é€åˆ°è¿œç¨‹æˆ–å‘èµ·PRæ—¶ï¼Œæ‰§è¡Œå…¨é‡è§„åˆ™æ£€æŸ¥å’ŒAIæµ‹è¯•ï¼Œç¡®ä¿åˆå¹¶åˆ°ä¸»åˆ†æ”¯çš„ä»£ç ç¬¦åˆæ ‡å‡†ã€‚</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-comment"># .github/workflows/rules-quality.yml</span>
<span class="hljs-attr">name:</span> <span class="hljs-string">è§„åˆ™ä½“ç³»è´¨é‡ä¿éšœ</span>
<span class="hljs-attr">on:</span>
  <span class="hljs-attr">push:</span>
    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span>, <span class="hljs-string">develop</span> ] <span class="hljs-comment"># ä¸»åˆ†æ”¯å’Œå¼€å‘åˆ†æ”¯æ¨é€æ—¶è§¦å‘</span>
  <span class="hljs-attr">pull_request:</span>
    <span class="hljs-attr">branches:</span> [ <span class="hljs-string">main</span> ] <span class="hljs-comment"># åˆå¹¶åˆ°ä¸»åˆ†æ”¯çš„PRè§¦å‘</span>

<span class="hljs-attr">jobs:</span>
  <span class="hljs-attr">quality-check:</span>
    <span class="hljs-attr">runs-on:</span> <span class="hljs-string">ubuntu-latest</span>
    <span class="hljs-attr">timeout-minutes:</span> <span class="hljs-number">10</span> <span class="hljs-comment"># é˜²æ­¢æµç¨‹å¡æ­»ï¼Œè¶…æ—¶è‡ªåŠ¨ç»ˆæ­¢</span>
    
    <span class="hljs-attr">steps:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">æ‹‰å–ä»£ç </span>
      <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/checkout@v3</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">é…ç½®Node.jsç¯å¢ƒ</span>
      <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/setup-node@v3</span>
      <span class="hljs-attr">with:</span>
        <span class="hljs-attr">node-version:</span> <span class="hljs-string">'18'</span> <span class="hljs-comment"># åŒ¹é…é¡¹ç›®Nodeç‰ˆæœ¬</span>
        <span class="hljs-attr">cache:</span> <span class="hljs-string">'npm'</span> <span class="hljs-comment"># ç¼“å­˜ä¾èµ–ï¼ŒåŠ é€Ÿæ„å»º</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">å®‰è£…ä¾èµ–</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">ci</span> <span class="hljs-comment"># ç”¨ciå‘½ä»¤ç¡®ä¿ä¾èµ–ç‰ˆæœ¬ä¸€è‡´</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">éªŒè¯è§„åˆ™æ–‡ä»¶æ ¼å¼</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">node</span> <span class="hljs-string">scripts/validate-rules.js</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">æ£€æµ‹è§„åˆ™å†²çª</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">node</span> <span class="hljs-string">scripts/detect-conflicts.js</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ç”Ÿæˆå·¥å…·é…ç½®</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">node</span> <span class="hljs-string">scripts/generate-configs.js</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">æ‰§è¡ŒAIéªŒæ”¶æµ‹è¯•</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">test:ai-acceptance</span> <span class="hljs-comment"># å¯¹åº”package.jsonä¸­çš„è„šæœ¬</span>
      <span class="hljs-attr">env:</span>
        <span class="hljs-attr">AI_API_KEY:</span> <span class="hljs-string">${{</span> <span class="hljs-string">secrets.AI_API_KEY</span> <span class="hljs-string">}}</span> <span class="hljs-comment"># ä»ä»“åº“å¯†é’¥ä¸­è·å–AIå¯†é’¥</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">æ”¶é›†è´¨é‡æŒ‡æ ‡</span>
      <span class="hljs-attr">run:</span> <span class="hljs-string">node</span> <span class="hljs-string">scripts/collect-metrics.js</span>
    
    <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">ä¸Šä¼ è´¨é‡æŠ¥å‘Š</span>
      <span class="hljs-attr">uses:</span> <span class="hljs-string">actions/upload-artifact@v3</span>
      <span class="hljs-attr">with:</span>
        <span class="hljs-attr">name:</span> <span class="hljs-string">è§„åˆ™ä½“ç³»è´¨é‡æŠ¥å‘Š-${{</span> <span class="hljs-string">github.sha</span> <span class="hljs-string">}}</span>
        <span class="hljs-attr">path:</span> <span class="hljs-string">reports/</span> <span class="hljs-comment"># ä¸Šä¼ æ‰€æœ‰æŠ¥å‘Šæ–‡ä»¶</span>
        <span class="hljs-attr">retention-days:</span> <span class="hljs-number">7</span> <span class="hljs-comment"># æŠ¥å‘Šä¿ç•™7å¤©ï¼ŒèŠ‚çœå­˜å‚¨ç©ºé—´</span>
</code></pre>
<h4 data-id="heading-15">éªŒæ”¶æ ‡å‡†</h4>
<ul>
<li>CIæµæ°´çº¿æˆåŠŸç‡â‰¥95%ï¼ˆæ­£å¸¸ä»£ç æäº¤æ—¶ï¼Œæµæ°´çº¿é€šè¿‡æ¦‚ç‡ä¸ä½äº95%ï¼‰</li>
<li>å…¨é‡æ£€æŸ¥æ‰§è¡Œæ—¶é—´â‰¤5åˆ†é’Ÿï¼ˆä»æ‹‰å–ä»£ç åˆ°ç”ŸæˆæŠ¥å‘Šçš„æ€»è€—æ—¶ï¼‰</li>
<li>è´¨é‡æŠ¥å‘Šè‡ªåŠ¨ç”Ÿæˆï¼ˆåŒ…å«è§„åˆ™è¦†ç›–ç‡ã€AIæµ‹è¯•é€šè¿‡ç‡ç­‰æ ¸å¿ƒæŒ‡æ ‡ï¼Œæ ¼å¼ä¸ºJSON+HTMLï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-16">ğŸ“Š ç¬¬å››é˜¶æ®µï¼šæŒç»­ç›‘æ§â€”â€”è´¨é‡åº¦é‡ä¸ä¼˜åŒ–ï¼ˆç¬¬5-6å‘¨ï¼‰</h2>
<p>ç›®æ ‡ï¼šæŠŠè§„åˆ™ä½“ç³»çš„è¿è¡ŒçŠ¶æ€â€œå¯è§†åŒ–â€ï¼Œé€šè¿‡æ•°æ®å‘ç°ä¼˜åŒ–ç‚¹ï¼Œè®©è§„åˆ™æŒç»­é€‚é…å›¢é˜Ÿéœ€æ±‚ã€‚</p>
<h3 data-id="heading-17">4.1 è´¨é‡æŒ‡æ ‡æ”¶é›†å™¨ï¼šè§„åˆ™çš„â€œå¥åº·ä½“æ£€ä»ªâ€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šè‡ªåŠ¨æ”¶é›†è§„åˆ™è¦†ç›–ç‡ã€ä»£ç è¿è§„æ•°ã€AIç†è§£å‡†ç¡®ç‡ç­‰æŒ‡æ ‡ï¼Œä¸ºä¼˜åŒ–æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/metrics-collector.js</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> glob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glob'</span>);
<span class="hljs-keyword">const</span> { execSync } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'child_process'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MetricsCollector</span> {
  <span class="hljs-comment">// ä¸»æ–¹æ³•ï¼šæ”¶é›†æ‰€æœ‰ç»´åº¦æŒ‡æ ‡å¹¶è¾“å‡º</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">collectMetrics</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> metrics = {
      <span class="hljs-attr">collectTime</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(), <span class="hljs-comment">// æ”¶é›†æ—¶é—´æˆ³</span>
      <span class="hljs-attr">rulesMetrics</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getRulesMetrics</span>(), <span class="hljs-comment">// è§„åˆ™æœ¬èº«æŒ‡æ ‡</span>
      <span class="hljs-attr">codeMetrics</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCodeMetrics</span>(), <span class="hljs-comment">// ä»£ç è´¨é‡æŒ‡æ ‡</span>
      <span class="hljs-attr">aiMetrics</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getAIMetrics</span>(), <span class="hljs-comment">// AIæµ‹è¯•æŒ‡æ ‡</span>
      <span class="hljs-attr">pipelineMetrics</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPipelineMetrics</span>() <span class="hljs-comment">// æµæ°´çº¿æŒ‡æ ‡</span>
    };

    <span class="hljs-comment">// å†™å…¥æŒ‡æ ‡æ–‡ä»¶ï¼ˆç”¨äºçœ‹æ¿å±•ç¤ºå’Œå†å²è¿½æº¯ï¼‰</span>
    fs.<span class="hljs-title function_">mkdirSync</span>(<span class="hljs-string">'reports/metrics'</span>, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> });
    fs.<span class="hljs-title function_">writeFileSync</span>(
      <span class="hljs-string">`reports/metrics/<span class="hljs-subst">${<span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime()}</span>.json`</span>,
      <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(metrics, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>)
    );

    <span class="hljs-keyword">return</span> metrics;
  }

  <span class="hljs-comment">// 1. è§„åˆ™æœ¬èº«æŒ‡æ ‡ï¼ˆè¦†ç›–ç‡ã€å†²çªæ•°ç­‰ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getRulesMetrics</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> ruleFiles = glob.<span class="hljs-title function_">sync</span>(<span class="hljs-string">'./docs/rules/**/*.md'</span>);
    <span class="hljs-keyword">const</span> totalRules = ruleFiles.<span class="hljs-property">length</span>;
    <span class="hljs-keyword">const</span> coveredRules = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'.eslintrc.generated.js'</span>, <span class="hljs-string">'utf8'</span>)
      .<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/'@typescript-eslint|vue|import/g</span>)?.<span class="hljs-property">length</span> || <span class="hljs-number">0</span>; <span class="hljs-comment">// ç®€åŒ–è®¡ç®—ï¼Œå®é™…éœ€æ›´ç²¾å‡†</span>

    <span class="hljs-keyword">return</span> {
      totalRules, <span class="hljs-comment">// è§„åˆ™æ€»æ•°</span>
      <span class="hljs-attr">coverageRate</span>: (coveredRules / totalRules * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'%'</span>, <span class="hljs-comment">// è§„åˆ™è¦†ç›–ç‡</span>
      <span class="hljs-attr">conflictCount</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">countConflicts</span>(), <span class="hljs-comment">// è§„åˆ™å†²çªæ•°</span>
      <span class="hljs-attr">lastUpdateTime</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getLastRuleUpdateTime</span>(ruleFiles) <span class="hljs-comment">// è§„åˆ™æœ€åæ›´æ–°æ—¶é—´</span>
    };
  }

  <span class="hljs-comment">// 2. ä»£ç è´¨é‡æŒ‡æ ‡ï¼ˆè¿è§„æ•°ã€è´¨é‡åˆ†ç­‰ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getCodeMetrics</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ‰§è¡ŒESLintå¹¶è·å–ç»“æœï¼ˆå®é™…é¡¹ç›®å¯é›†æˆeslint-apié¿å…å‘½ä»¤è¡Œè°ƒç”¨ï¼‰</span>
    <span class="hljs-keyword">const</span> eslintOutput = <span class="hljs-title function_">execSync</span>(<span class="hljs-string">'npx eslint . --config .eslintrc.generated.js --format json'</span>, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">'utf8'</span> });
    <span class="hljs-keyword">const</span> eslintResults = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(eslintOutput);

    <span class="hljs-keyword">const</span> totalErrors = eslintResults.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, file</span>) =&gt;</span> sum + file.<span class="hljs-property">errorCount</span>, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">const</span> totalWarnings = eslintResults.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, file</span>) =&gt;</span> sum + file.<span class="hljs-property">warningCount</span>, <span class="hljs-number">0</span>);

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">totalViolations</span>: totalErrors + totalWarnings, <span class="hljs-comment">// æ€»è¿è§„æ•°</span>
      <span class="hljs-attr">errorCount</span>: totalErrors, <span class="hljs-comment">// é”™è¯¯æ•°ï¼ˆé˜»æ–­æ€§ï¼‰</span>
      <span class="hljs-attr">warningCount</span>: totalWarnings, <span class="hljs-comment">// è­¦å‘Šæ•°ï¼ˆå»ºè®®æ€§ï¼‰</span>
      <span class="hljs-attr">qualityScore</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100</span> - totalViolations / <span class="hljs-number">10</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>) <span class="hljs-comment">// ç®€åŒ–è´¨é‡åˆ†è®¡ç®—</span>
    };
  }

  <span class="hljs-comment">// 3. AIæµ‹è¯•æŒ‡æ ‡ï¼ˆé€šè¿‡ç‡ã€å“åº”æ—¶é—´ç­‰ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getAIMetrics</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// è¯»å–AIæµ‹è¯•æŠ¥å‘Šï¼ˆä»æµ‹è¯•æ¡†æ¶è¾“å‡ºä¸­æå–ï¼‰</span>
    <span class="hljs-keyword">const</span> testReport = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'reports/ai-test-report.json'</span>, <span class="hljs-string">'utf8'</span>));
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">acceptanceRate</span>: (testReport.<span class="hljs-property">passed</span> / testReport.<span class="hljs-property">total</span> * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'%'</span>, <span class="hljs-comment">// AIæµ‹è¯•é€šè¿‡ç‡</span>
      <span class="hljs-attr">avgResponseTime</span>: (testReport.<span class="hljs-property">totalTime</span> / testReport.<span class="hljs-property">total</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'ms'</span>, <span class="hljs-comment">// å¹³å‡å“åº”æ—¶é—´</span>
      <span class="hljs-attr">understandingScore</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateUnderstandingScore</span>(testReport) <span class="hljs-comment">// è§„åˆ™ç†è§£å¾—åˆ†</span>
    };
  }

  <span class="hljs-comment">// 4. æµæ°´çº¿æŒ‡æ ‡ï¼ˆæˆåŠŸç‡ã€æ‰§è¡Œæ—¶é—´ç­‰ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getPipelineMetrics</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­å¯è°ƒç”¨GitHub APIè·å–æµæ°´çº¿å†å²æ•°æ®</span>
    <span class="hljs-keyword">const</span> pipelineHistory = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'reports/pipeline-history.json'</span>, <span class="hljs-string">'utf8'</span>));
    <span class="hljs-keyword">const</span> successCount = pipelineHistory.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">run</span> =&gt;</span> run.<span class="hljs-property">status</span> === <span class="hljs-string">'success'</span>).<span class="hljs-property">length</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">successRate</span>: (successCount / pipelineHistory.<span class="hljs-property">length</span> * <span class="hljs-number">100</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>) + <span class="hljs-string">'%'</span>, <span class="hljs-comment">// æµæ°´çº¿æˆåŠŸç‡</span>
      <span class="hljs-attr">avgRunTime</span>: (pipelineHistory.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, run</span>) =&gt;</span> sum + run.<span class="hljs-property">duration</span>, <span class="hljs-number">0</span>) / pipelineHistory.<span class="hljs-property">length</span>).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">0</span>) + <span class="hljs-string">'s'</span> <span class="hljs-comment">// å¹³å‡æ‰§è¡Œæ—¶é—´</span>
    };
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šç»Ÿè®¡è§„åˆ™å†²çªæ•°</span>
  <span class="hljs-title function_">countConflicts</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> conflictReport = fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'reports/conflicts.md'</span>, <span class="hljs-string">'utf8'</span>);
    <span class="hljs-keyword">return</span> (conflictReport.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/## å†²çªè§„åˆ™/g</span>) || []).<span class="hljs-property">length</span>;
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè·å–è§„åˆ™æœ€åæ›´æ–°æ—¶é—´</span>
  <span class="hljs-title function_">getLastRuleUpdateTime</span>(<span class="hljs-params">ruleFiles</span>) {
    <span class="hljs-keyword">const</span> lastUpdateTime = ruleFiles.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">latest, file</span>) =&gt;</span> {
      <span class="hljs-keyword">const</span> mtime = fs.<span class="hljs-title function_">statSync</span>(file).<span class="hljs-property">mtime</span>.<span class="hljs-title function_">getTime</span>();
      <span class="hljs-keyword">return</span> mtime &gt; latest ? mtime : latest;
    }, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(lastUpdateTime).<span class="hljs-title function_">toISOString</span>();
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šè®¡ç®—AIè§„åˆ™ç†è§£å¾—åˆ†</span>
  <span class="hljs-title function_">calculateUnderstandingScore</span>(<span class="hljs-params">testReport</span>) {
    <span class="hljs-comment">// æ­£å‘ç”¨ä¾‹æƒé‡é«˜äºåå‘ç”¨ä¾‹ï¼ˆç†è§£æ­£ç¡®æ¯”ä¿®å¤æ›´é‡è¦ï¼‰</span>
    <span class="hljs-keyword">const</span> positiveScore = testReport.<span class="hljs-property">positivePassed</span> / testReport.<span class="hljs-property">positiveTotal</span> * <span class="hljs-number">60</span>;
    <span class="hljs-keyword">const</span> negativeScore = testReport.<span class="hljs-property">negativePassed</span> / testReport.<span class="hljs-property">negativeTotal</span> * <span class="hljs-number">40</span>;
    <span class="hljs-keyword">return</span> (positiveScore + negativeScore).<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">1</span>);
  }
}
</code></pre>
<h3 data-id="heading-18">4.2 Grafanaçœ‹æ¿é…ç½®ï¼šæŒ‡æ ‡çš„â€œå¯è§†åŒ–ä»ªè¡¨ç›˜â€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šæŠŠæ”¶é›†çš„æŒ‡æ ‡å®æ—¶å±•ç¤ºåœ¨çœ‹æ¿ä¸Šï¼Œå›¢é˜Ÿæˆå‘˜å¯ç›´è§‚çœ‹åˆ°è§„åˆ™ä½“ç³»è¿è¡ŒçŠ¶æ€ï¼Œå¼‚å¸¸æ—¶åŠæ—¶å‘Šè­¦ã€‚</p>
<pre><code class="hljs language-css" lang="css">{
  "dashboard": {
    "title": <span class="hljs-string">"è§„åˆ™ä½“ç³»è´¨é‡ä»ªè¡¨ç›˜"</span>,
    <span class="hljs-string">"refresh"</span>: <span class="hljs-string">"5m"</span>, // æ¯<span class="hljs-number">5</span>åˆ†é’Ÿåˆ·æ–°ä¸€æ¬¡æ•°æ®
    <span class="hljs-string">"panels"</span>: [
      {
        "title": <span class="hljs-string">"æ ¸å¿ƒå¥åº·åº¦"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"stat"</span>,
        <span class="hljs-string">"gridPos"</span>: { "w": <span class="hljs-number">12</span>, <span class="hljs-string">"h"</span>: <span class="hljs-number">4</span> },
        "targets": [
          { "expr": <span class="hljs-string">"rules_coverage_rate"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"è§„åˆ™è¦†ç›–ç‡"</span> },
          { "expr": <span class="hljs-string">"ai_acceptance_rate"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"AIç†è§£ç‡"</span> },
          { "expr": <span class="hljs-string">"pipeline_success_rate"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"æµæ°´çº¿æˆåŠŸç‡"</span> }
        ],
        "<span class="hljs-attribute">color</span>": { "mode": <span class="hljs-string">"thresholds"</span> },
        "thresholds": { "values": [[<span class="hljs-number">90</span>, <span class="hljs-string">"green"</span>], [<span class="hljs-number">70</span>, <span class="hljs-string">"orange"</span>], [<span class="hljs-number">0</span>, <span class="hljs-string">"red"</span>]] }
      },
      {
        "title": <span class="hljs-string">"ä»£ç è¿è§„è¶‹åŠ¿ï¼ˆå‘¨ï¼‰"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"graph"</span>,
        <span class="hljs-string">"gridPos"</span>: { "w": <span class="hljs-number">12</span>, <span class="hljs-string">"h"</span>: <span class="hljs-number">6</span> },
        "targets": [
          { "expr": <span class="hljs-string">"code_total_violations"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"æ€»è¿è§„æ•°"</span> },
          { "expr": <span class="hljs-string">"code_error_count"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"é”™è¯¯æ•°"</span> }
        ],
        "xaxis": { "mode": <span class="hljs-string">"time"</span> },
        "yaxis": { "min": <span class="hljs-number">0</span> }
      },
      {
        "title": <span class="hljs-string">"AIæµ‹è¯•æ€§èƒ½"</span>,
        <span class="hljs-string">"type"</span>: <span class="hljs-string">"graph"</span>,
        <span class="hljs-string">"gridPos"</span>: { "w": <span class="hljs-number">12</span>, <span class="hljs-string">"h"</span>: <span class="hljs-number">6</span> },
        "targets": [
          { "expr": <span class="hljs-string">"ai_avg_response_time"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"å¹³å‡å“åº”æ—¶é—´(ms)"</span> },
          { "expr": <span class="hljs-string">"ai_understanding_score"</span>, <span class="hljs-string">"legendFormat"</span>: <span class="hljs-string">"ç†è§£å¾—åˆ†"</span> }
        ]
      }
    ],
    "annotations": {
      "list": [
        {
          "name": <span class="hljs-string">"è§„åˆ™æ›´æ–°"</span>,
          <span class="hljs-string">"datasource"</span>: <span class="hljs-string">"metrics"</span>,
          <span class="hljs-string">"expr"</span>: <span class="hljs-string">"rules_last_update_time"</span>,
          <span class="hljs-string">"iconColor"</span>: <span class="hljs-string">"rgba(255, 96, 96, 1)"</span>
        }
      ]
    },
    "alert": {
      "rules": [
        {
          "name": <span class="hljs-string">"è§„åˆ™è¦†ç›–ç‡è¿‡ä½"</span>,
          <span class="hljs-string">"expr"</span>: <span class="hljs-string">"rules_coverage_rate &lt; 80"</span>,
          <span class="hljs-string">"for"</span>: <span class="hljs-string">"5m"</span>,
          <span class="hljs-string">"labels"</span>: { "severity": <span class="hljs-string">"warning"</span> },
          "annotations": { "<span class="hljs-selector-tag">summary</span>": <span class="hljs-string">"è§„åˆ™è¦†ç›–ç‡ä½äº80%ï¼Œè¯·æ£€æŸ¥é…ç½®ç”Ÿæˆå™¨"</span> }
        },
        {
          "name": <span class="hljs-string">"AIç†è§£ç‡å¼‚å¸¸"</span>,
          <span class="hljs-string">"expr"</span>: <span class="hljs-string">"ai_acceptance_rate &lt; 70"</span>,
          <span class="hljs-string">"for"</span>: <span class="hljs-string">"5m"</span>,
          <span class="hljs-string">"labels"</span>: { "severity": <span class="hljs-string">"critical"</span> },
          "annotations": { "<span class="hljs-selector-tag">summary</span>": <span class="hljs-string">"AIæµ‹è¯•é€šè¿‡ç‡ä½äº70%ï¼Œè¯·æ£€æŸ¥è§„åˆ™æè¿°"</span> }
        }
      ]
    }
  }
}
</code></pre>
<h4 data-id="heading-19">éªŒæ”¶æ ‡å‡†</h4>
<ul>
<li>æ•°æ®å®æ—¶æ›´æ–°ï¼ˆçœ‹æ¿æ•°æ®ä¸æŒ‡æ ‡æ”¶é›†å™¨çš„æ—¶é—´å·®â‰¤10åˆ†é’Ÿï¼‰</li>
<li>å¼‚å¸¸è‡ªåŠ¨å‘Šè­¦ï¼ˆè§¦å‘é˜ˆå€¼æ—¶ï¼Œé€šè¿‡ä¼ä¸šå¾®ä¿¡/é‚®ä»¶å‘é€å‘Šè­¦ä¿¡æ¯ï¼‰</li>
<li>å†å²è¶‹åŠ¿å¯è¿½æº¯ï¼ˆæ”¯æŒæŸ¥çœ‹è¿‘30å¤©çš„æŒ‡æ ‡å˜åŒ–æ›²çº¿ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-20">ğŸš€ ç¬¬äº”é˜¶æ®µï¼šæŒç»­è¿›åŒ–â€”â€”è§„åˆ™è‡ªåŠ¨ä¼˜åŒ–ï¼ˆç¬¬7-8å‘¨ï¼‰</h2>
<p>ç›®æ ‡ï¼šè®©è§„åˆ™ä½“ç³»å…·å¤‡â€œè‡ªæˆ‘è¿­ä»£â€èƒ½åŠ›ï¼Œè‡ªåŠ¨å‘ç°æ–°è§„åˆ™ã€ä¼˜åŒ–æ—§è§„åˆ™ï¼Œé€‚åº”å›¢é˜Ÿå¼€å‘æ¨¡å¼å˜åŒ–ã€‚</p>
<h3 data-id="heading-21">5.1 è‡ªåŠ¨åŒ–è§„åˆ™å‘ç°ï¼šä»ä»£ç ä¸­â€œå­¦â€è§„åˆ™</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šåˆ†æä»£ç åº“ä¸­çš„é«˜é¢‘æ¨¡å¼å’Œå…±æ€§é—®é¢˜ï¼Œè‡ªåŠ¨ç”Ÿæˆè§„åˆ™å»ºè®®ï¼Œå‡å°‘äººå·¥åˆ¶å®šè§„åˆ™çš„æˆæœ¬ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// scripts/rule-discovery.js</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">const</span> glob = <span class="hljs-built_in">require</span>(<span class="hljs-string">'glob'</span>);
<span class="hljs-keyword">const</span> { parse } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@babel/parser'</span>);
<span class="hljs-keyword">const</span> traverse = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@babel/traverse'</span>).<span class="hljs-property">default</span>;

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RuleDiscovery</span> {
  <span class="hljs-comment">// ä¸»æ–¹æ³•ï¼šå‘ç°æ½œåœ¨è§„åˆ™å¹¶ç”Ÿæˆå»ºè®®</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">discoverNewRules</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// 1. åˆ†æä»£ç åº“ï¼Œæå–é«˜é¢‘æ¨¡å¼å’Œå…±æ€§é—®é¢˜</span>
    <span class="hljs-keyword">const</span> codePatterns = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeCodePatterns</span>();
    <span class="hljs-keyword">const</span> commonIssues = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeCommonIssues</span>();
    <span class="hljs-comment">// 2. ç»“åˆè¡Œä¸šæ ‡å‡†ï¼Œè¿‡æ»¤æ— æ•ˆå»ºè®®</span>
    <span class="hljs-keyword">const</span> industryStandards = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">fetchIndustryStandards</span>();
    
    <span class="hljs-comment">// 3. ç”Ÿæˆè§„åˆ™å»ºè®®ï¼ˆç½®ä¿¡åº¦â‰¥80%æ‰è¾“å‡ºï¼‰</span>
    <span class="hljs-keyword">const</span> ruleSuggestions = [
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generatePatternRules</span>(codePatterns),
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateIssueRules</span>(commonIssues),
      ...<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateStandardRules</span>(industryStandards)
    ].<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">suggestion</span> =&gt;</span> suggestion.<span class="hljs-property">confidence</span> &gt;= <span class="hljs-number">0.8</span>);

    <span class="hljs-comment">// å†™å…¥å»ºè®®æ–‡ä»¶ï¼ˆä¾›å›¢é˜Ÿè¯„å®¡ï¼‰</span>
    fs.<span class="hljs-title function_">writeFileSync</span>(
      <span class="hljs-string">'reports/rule-suggestions.md'</span>,
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">formatSuggestions</span>(ruleSuggestions)
    );

    <span class="hljs-keyword">return</span> ruleSuggestions;
  }

  <span class="hljs-comment">// åˆ†æä»£ç åº“ä¸­çš„é«˜é¢‘æ¨¡å¼ï¼ˆæ¯”å¦‚å›¢é˜Ÿå¸¸ç”¨çš„ç»„ä»¶å‘½åè§„èŒƒï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">analyzeCodePatterns</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> files = glob.<span class="hljs-title function_">sync</span>(<span class="hljs-string">'src/**/*.{js,ts,vue}'</span>);
    <span class="hljs-keyword">const</span> patternMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>(); <span class="hljs-comment">// key: æ¨¡å¼ç­¾åï¼Œvalue: å‡ºç°æ¬¡æ•°</span>

    files.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
      <span class="hljs-keyword">const</span> content = fs.<span class="hljs-title function_">readFileSync</span>(file, <span class="hljs-string">'utf8'</span>);
      <span class="hljs-comment">// è§£æä»£ç ä¸ºASTï¼ˆæŠ½è±¡è¯­æ³•æ ‘ï¼‰</span>
      <span class="hljs-keyword">const</span> ast = <span class="hljs-title function_">parse</span>(content, {
        <span class="hljs-attr">sourceType</span>: <span class="hljs-string">'module'</span>,
        <span class="hljs-attr">plugins</span>: [<span class="hljs-string">'typescript'</span>, <span class="hljs-string">'jsx'</span>, <span class="hljs-string">'vue'</span>]
      });

      <span class="hljs-comment">// éå†ASTï¼Œæå–ç»„ä»¶å®šä¹‰æ¨¡å¼</span>
      <span class="hljs-title function_">traverse</span>(ast, {
        <span class="hljs-title class_">VariableDeclaration</span>(path) {
          <span class="hljs-keyword">if</span> (path.<span class="hljs-property">node</span>.<span class="hljs-property">declarations</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">init</span>?.<span class="hljs-property">type</span> === <span class="hljs-string">'ArrowFunctionExpression'</span>) {
            <span class="hljs-keyword">const</span> idName = path.<span class="hljs-property">node</span>.<span class="hljs-property">declarations</span>[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>.<span class="hljs-property">name</span>;
            <span class="hljs-comment">// åŒ¹é…PascalCaseå‘½åçš„ç»„ä»¶ï¼ˆå›¢é˜Ÿé«˜é¢‘æ¨¡å¼ï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-regexp">/^[A-Z][a-zA-Z0-9]+$/</span>.<span class="hljs-title function_">test</span>(idName)) {
              <span class="hljs-keyword">const</span> patternKey = <span class="hljs-string">`ComponentNaming:PascalCase:<span class="hljs-subst">${idName}</span>`</span>;
              patternMap.<span class="hljs-title function_">set</span>(patternKey, (patternMap.<span class="hljs-title function_">get</span>(patternKey) || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);
            }
          }
        }
      });
    });

    <span class="hljs-comment">// ç­›é€‰å‡ºç°æ¬¡æ•°â‰¥5çš„æ¨¡å¼ï¼ˆæ’é™¤å¶ç„¶æƒ…å†µï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(patternMap.<span class="hljs-title function_">entries</span>())
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[, count]</span>) =&gt;</span> count &gt;= <span class="hljs-number">5</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[key, count]</span>) =&gt;</span> ({
        <span class="hljs-attr">type</span>: key.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>)[<span class="hljs-number">0</span>],
        <span class="hljs-attr">pattern</span>: key.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>)[<span class="hljs-number">1</span>],
        <span class="hljs-attr">example</span>: key.<span class="hljs-title function_">split</span>(<span class="hljs-string">':'</span>)[<span class="hljs-number">2</span>],
        <span class="hljs-attr">frequency</span>: count
      }));
  }

  <span class="hljs-comment">// åˆ†æä»£ç ä¸­çš„å…±æ€§é—®é¢˜ï¼ˆæ¯”å¦‚é«˜é¢‘ESLintè¿è§„ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">analyzeCommonIssues</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> eslintReport = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'reports/eslint-report.json'</span>, <span class="hljs-string">'utf8'</span>));
    <span class="hljs-keyword">const</span> issueMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

    eslintReport.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> {
      file.<span class="hljs-property">messages</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">message</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> ruleId = message.<span class="hljs-property">ruleId</span>;
        issueMap.<span class="hljs-title function_">set</span>(ruleId, (issueMap.<span class="hljs-title function_">get</span>(ruleId) || <span class="hljs-number">0</span>) + <span class="hljs-number">1</span>);
      });
    });

    <span class="hljs-comment">// ç­›é€‰å‡ºç°æ¬¡æ•°â‰¥10çš„é—®é¢˜ï¼ˆè§†ä¸ºå…±æ€§é—®é¢˜ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(issueMap.<span class="hljs-title function_">entries</span>())
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[, count]</span>) =&gt;</span> count &gt;= <span class="hljs-number">10</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[ruleId, count]</span>) =&gt;</span> ({ ruleId, count }));
  }

  <span class="hljs-comment">// ç”Ÿæˆæ¨¡å¼ç±»è§„åˆ™å»ºè®®ï¼ˆåŸºäºå›¢é˜Ÿé«˜é¢‘å®è·µï¼‰</span>
  <span class="hljs-title function_">generatePatternRules</span>(<span class="hljs-params">patterns</span>) {
    <span class="hljs-keyword">return</span> patterns.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">pattern</span> =&gt;</span> ({
      <span class="hljs-attr">title</span>: <span class="hljs-string">`[è‡ªåŠ¨å‘ç°] <span class="hljs-subst">${pattern.<span class="hljs-keyword">type</span>}</span> è§„èŒƒï¼š<span class="hljs-subst">${pattern.pattern}</span>`</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">`å›¢é˜Ÿä»£ç ä¸­è¯¥æ¨¡å¼å‡ºç°<span class="hljs-subst">${pattern.frequency}</span>æ¬¡ï¼Œå»ºè®®å›ºåŒ–ä¸ºè§„åˆ™`</span>,
      <span class="hljs-attr">example</span>: <span class="hljs-string">`ç¬¦åˆè§„åˆ™ï¼šconst <span class="hljs-subst">${pattern.example}</span> = () =&gt; {}`</span>,
      <span class="hljs-attr">confidence</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, pattern.<span class="hljs-property">frequency</span> / <span class="hljs-number">20</span>) <span class="hljs-comment">// å‡ºç°æ¬¡æ•°è¶Šå¤šï¼Œç½®ä¿¡åº¦è¶Šé«˜</span>
    }));
  }

  <span class="hljs-comment">// ç”Ÿæˆé—®é¢˜ç±»è§„åˆ™å»ºè®®ï¼ˆåŸºäºé«˜é¢‘è¿è§„ï¼‰</span>
  <span class="hljs-title function_">generateIssueRules</span>(<span class="hljs-params">issues</span>) {
    <span class="hljs-keyword">return</span> issues.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">issue</span> =&gt;</span> ({
      <span class="hljs-attr">title</span>: <span class="hljs-string">`[è‡ªåŠ¨å‘ç°] é‡ç‚¹è§„é¿ï¼š<span class="hljs-subst">${issue.ruleId}</span>`</span>,
      <span class="hljs-attr">description</span>: <span class="hljs-string">`è¯¥é—®é¢˜åœ¨ä»£ç ä¸­å‡ºç°<span class="hljs-subst">${issue.count}</span>æ¬¡ï¼Œå»ºè®®å¼ºåŒ–æ£€æŸ¥åŠ›åº¦`</span>,
      <span class="hljs-attr">solution</span>: <span class="hljs-string">`å‚è€ƒESLintè§„åˆ™æ–‡æ¡£ï¼šhttps://eslint.org/docs/rules/<span class="hljs-subst">${issue.ruleId}</span>`</span>,
      <span class="hljs-attr">confidence</span>: <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">1</span>, issue.<span class="hljs-property">count</span> / <span class="hljs-number">30</span>)
    }));
  }

  <span class="hljs-comment">// ç»“åˆè¡Œä¸šæ ‡å‡†ç”Ÿæˆå»ºè®®ï¼ˆæ¯”å¦‚TSæœ€æ–°ç‰¹æ€§ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchIndustryStandards</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å®é™…é¡¹ç›®ä¸­å¯è°ƒç”¨npm APIæˆ–æŠ€æœ¯ç¤¾åŒºæ¥å£è·å–æœ€æ–°æ ‡å‡†</span>
    <span class="hljs-keyword">return</span> [
      { <span class="hljs-attr">rule</span>: <span class="hljs-string">'TypeScript 5.0+ æ”¯æŒçš„è£…é¥°å™¨è¯­æ³•'</span>, <span class="hljs-attr">relevance</span>: <span class="hljs-number">0.9</span> },
      { <span class="hljs-attr">rule</span>: <span class="hljs-string">'ES Module ä¼˜å…ˆäº CommonJS'</span>, <span class="hljs-attr">relevance</span>: <span class="hljs-number">0.85</span> }
    ];
  }

  <span class="hljs-comment">// æ ¼å¼åŒ–å»ºè®®ä¸ºMarkdownæ–‡æ¡£</span>
  <span class="hljs-title function_">formatSuggestions</span>(<span class="hljs-params">suggestions</span>) {
    <span class="hljs-keyword">let</span> markdown = <span class="hljs-string">'# è§„åˆ™è‡ªåŠ¨å‘ç°å»ºè®®\n\n'</span>;
    suggestions.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">suggestion, index</span>) =&gt;</span> {
      markdown += <span class="hljs-string">`## å»ºè®®<span class="hljs-subst">${index + <span class="hljs-number">1</span>}</span>ï¼š<span class="hljs-subst">${suggestion.title}</span>\n`</span>;
      markdown += <span class="hljs-string">`**ç½®ä¿¡åº¦**ï¼š<span class="hljs-subst">${(suggestion.confidence * <span class="hljs-number">100</span>).toFixed(<span class="hljs-number">0</span>)}</span>%\n`</span>;
      markdown += <span class="hljs-string">`**æè¿°**ï¼š<span class="hljs-subst">${suggestion.description}</span>\n`</span>;
      <span class="hljs-keyword">if</span> (suggestion.<span class="hljs-property">example</span>) markdown += <span class="hljs-string">`**ç¤ºä¾‹**ï¼š`</span><span class="hljs-string">``</span>javascript\n${suggestion.<span class="hljs-property">example</span>}\n<span class="hljs-string">``</span><span class="hljs-string">`\n`</span>;
      <span class="hljs-keyword">if</span> (suggestion.<span class="hljs-property">solution</span>) markdown += <span class="hljs-string">`**è§£å†³æ–¹æ¡ˆ**ï¼š<span class="hljs-subst">${suggestion.solution}</span>\n`</span>;
      markdown += <span class="hljs-string">'\n---\n'</span>;
    });
    <span class="hljs-keyword">return</span> markdown;
  }
}
</code></pre>
<h3 data-id="heading-22">5.2 RFCè‡ªåŠ¨åŒ–æµç¨‹ï¼šè§„åˆ™è¿­ä»£çš„â€œé«˜æ•ˆé€šé“â€</h3>
<p>æ ¸å¿ƒä½œç”¨ï¼šæŠŠè§„åˆ™å˜æ›´æµç¨‹æ ‡å‡†åŒ–ã€è‡ªåŠ¨åŒ–ï¼Œä»æå‡ºå»ºè®®åˆ°æ­£å¼ç”Ÿæ•ˆå…¨æµç¨‹å¯è¿½æº¯ï¼Œå‡å°‘æ²Ÿé€šæˆæœ¬ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// scripts/rfc-automation.js</span>
<span class="hljs-keyword">const</span> { <span class="hljs-title class_">Octokit</span> } = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@octokit/rest'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">RuleParser</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./rule-parser'</span>);

<span class="hljs-comment">// åˆå§‹åŒ–GitHubå®¢æˆ·ç«¯ï¼ˆéœ€é…ç½®ä¸ªäººè®¿é—®ä»¤ç‰Œï¼‰</span>
<span class="hljs-keyword">const</span> octokit = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Octokit</span>({ <span class="hljs-attr">auth</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GITHUB_TOKEN</span> });

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RFCAutomation</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">owner</span> = <span class="hljs-string">'windsurf-team'</span>; <span class="hljs-comment">// ä»“åº“æ‰€æœ‰è€…</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">repo</span> = <span class="hljs-string">'rule-system'</span>; <span class="hljs-comment">// è§„åˆ™ä»“åº“</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuleParser</span>();
  }

  <span class="hljs-comment">// å¤„ç†RFCè®®é¢˜ï¼ˆä»GitHub Issueä¸­æå–è§„åˆ™å»ºè®®ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">processRFCIssue</span>(<span class="hljs-params">issueNumber</span>) {
    <span class="hljs-comment">// 1. è·å–è®®é¢˜è¯¦æƒ…</span>
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: issueData } = <span class="hljs-keyword">await</span> octokit.<span class="hljs-property">issues</span>.<span class="hljs-title function_">get</span>({
      <span class="hljs-attr">owner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">owner</span>,
      <span class="hljs-attr">repo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">repo</span>,
      <span class="hljs-attr">issue_number</span>: issueNumber
    });

    <span class="hljs-comment">// 2. è§£æRFCå†…å®¹ï¼ˆéœ€ç¬¦åˆæŒ‡å®šæ¨¡æ¿ï¼‰</span>
    <span class="hljs-keyword">const</span> rfc = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseRFCContent</span>(issueData.<span class="hljs-property">body</span>);
    <span class="hljs-keyword">if</span> (!rfc) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addIssueComment</span>(issueNumber, <span class="hljs-string">'âŒ RFCæ ¼å¼é”™è¯¯ï¼Œè¯·ä½¿ç”¨æ¨¡æ¿å¡«å†™ï¼šhttps://github.com/windsurf-team/rule-system/blob/main/.github/ISSUE_TEMPLATE/rfc.md'</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 3. è‡ªåŠ¨éªŒè¯RFCå¯è¡Œæ€§</span>
    <span class="hljs-keyword">const</span> validationResult = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateRFC</span>(rfc);
    <span class="hljs-keyword">if</span> (!validationResult.<span class="hljs-property">valid</span>) {
      <span class="hljs-keyword">const</span> errorMsg = <span class="hljs-string">`âŒ RFCéªŒè¯å¤±è´¥ï¼š\n<span class="hljs-subst">${validationResult.errors.map(e =&gt; <span class="hljs-string">`- <span class="hljs-subst">${e}</span>`</span>).join(<span class="hljs-string">'\n'</span>)}</span>`</span>;
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addIssueComment</span>(issueNumber, errorMsg);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// 4. è‡ªåŠ¨åˆ†é…å®¡æ ¸è€…ï¼ˆæ ¹æ®è§„åˆ™ç±»å‹åŒ¹é…å¯¹åº”é¢†åŸŸä¸“å®¶ï¼‰</span>
    <span class="hljs-keyword">const</span> reviewers = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">assignReviewers</span>(rfc.<span class="hljs-property">type</span>);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">assignIssueReviewers</span>(issueNumber, reviewers);

    <span class="hljs-comment">// 5. åˆ›å»ºè§„åˆ™è·Ÿè¸ªé¡¹ç›®ï¼ˆå…³è”PRå’Œæµ‹è¯•ä»»åŠ¡ï¼‰</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createTrackingProject</span>(rfc, issueNumber);

    <span class="hljs-comment">// 6. å›å¤è®®é¢˜å‘ŠçŸ¥è¿›åº¦</span>
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">addIssueComment</span>(issueNumber, 
      <span class="hljs-string">`âœ… RFCéªŒè¯é€šè¿‡ï¼Œå·²è‡ªåŠ¨åˆ†é…å®¡æ ¸è€…ï¼š@<span class="hljs-subst">${reviewers.join(<span class="hljs-string">', @'</span>)}</span>\n`</span> +
      <span class="hljs-string">`ğŸ“Œ è§„åˆ™è·Ÿè¸ªé¡¹ç›®ï¼šhttps://github.com/windsurf-team/rule-system/projects/<span class="hljs-subst">${rfc.title.replace(/\s+/g, <span class="hljs-string">'-'</span>).toLowerCase()}</span>`</span>
    );
  }

  <span class="hljs-comment">// è§£æRFCå†…å®¹ï¼ˆæå–æ ‡é¢˜ã€ç±»å‹ã€æè¿°ç­‰æ ¸å¿ƒä¿¡æ¯ï¼‰</span>
  <span class="hljs-title function_">parseRFCContent</span>(<span class="hljs-params">issueBody</span>) {
    <span class="hljs-keyword">const</span> titleMatch = issueBody.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/### è§„åˆ™æ ‡é¢˜\n([\s\S]*?)\n###/</span>);
    <span class="hljs-keyword">const</span> typeMatch = issueBody.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/### è§„åˆ™ç±»å‹\n([\s\S]*?)\n###/</span>);
    <span class="hljs-keyword">const</span> descriptionMatch = issueBody.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/### è§„åˆ™æè¿°\n([\s\S]*?)\n###/</span>);
    <span class="hljs-keyword">const</span> exampleMatch = issueBody.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/### ç¤ºä¾‹ä»£ç \n([\s\S]*?)\n###/</span>);

    <span class="hljs-keyword">if</span> (!titleMatch || !typeMatch || !descriptionMatch) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">title</span>: titleMatch[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">type</span>: typeMatch[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">description</span>: descriptionMatch[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>(),
      <span class="hljs-attr">example</span>: exampleMatch ? exampleMatch[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>() : <span class="hljs-string">''</span>,
      <span class="hljs-attr">author</span>: issueBody.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/### æå‡ºè€…\n([\s\S]*?)\n###/</span>)[<span class="hljs-number">1</span>].<span class="hljs-title function_">trim</span>()
    };
  }

  <span class="hljs-comment">// éªŒè¯RFCå¯è¡Œæ€§ï¼ˆæ£€æŸ¥æ˜¯å¦ä¸ç°æœ‰è§„åˆ™å†²çªã€æ˜¯å¦æœ‰å¯æ‰§è¡Œçš„é…ç½®ï¼‰</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">validateRFC</span>(<span class="hljs-params">rfc</span>) {
    <span class="hljs-keyword">const</span> errors = [];

    <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦ä¸ç°æœ‰è§„åˆ™å†²çª</span>
    <span class="hljs-keyword">const</span> existingRules = <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">getAllRuleFiles</span>().<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">file</span> =&gt;</span> 
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">parseRuleFile</span>(file).<span class="hljs-property">metadata</span>.<span class="hljs-property">title</span>
    );
    <span class="hljs-keyword">if</span> (existingRules.<span class="hljs-title function_">includes</span>(rfc.<span class="hljs-property">title</span>)) {
      errors.<span class="hljs-title function_">push</span>(<span class="hljs-string">`å·²å­˜åœ¨åŒåè§„åˆ™ï¼š<span class="hljs-subst">${rfc.title}</span>`</span>);
    }

    <span class="hljs-comment">// æ£€æŸ¥ç¤ºä¾‹ä»£ç æ˜¯å¦å¯è§£æ</span>
    <span class="hljs-keyword">if</span> (rfc.<span class="hljs-property">example</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">parser</span>.<span class="hljs-title function_">extractExamples</span>(<span class="hljs-string">`\n<span class="hljs-subst">${rfc.example}</span>\n`</span>);
      } <span class="hljs-keyword">catch</span> (e) {
        errors.<span class="hljs-title function_">push</span>(<span class="hljs-string">`ç¤ºä¾‹ä»£ç æ ¼å¼é”™è¯¯ï¼š<span class="hljs-subst">${e.message}</span>`</span>);
      }
    }

    <span class="hljs-keyword">return</span> { <span class="hljs-attr">valid</span>: errors.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>, errors };
  }

  <span class="hljs-comment">// æ ¹æ®è§„åˆ™ç±»å‹åˆ†é…å®¡æ ¸è€…ï¼ˆå‰ç«¯/åç«¯/å…¨æ ˆåˆ†åˆ«å¯¹åº”ä¸åŒä¸“å®¶ï¼‰</span>
  <span class="hljs-title function_">assignReviewers</span>(<span class="hljs-params">ruleType</span>) {
    <span class="hljs-keyword">const</span> reviewerMap = {
      <span class="hljs-string">'å‰ç«¯è§„åˆ™'</span>: [<span class="hljs-string">'fe-expert-1'</span>, <span class="hljs-string">'fe-expert-2'</span>],
      <span class="hljs-string">'åç«¯è§„åˆ™'</span>: [<span class="hljs-string">'be-expert-1'</span>, <span class="hljs-string">'be-expert-2'</span>],
      <span class="hljs-string">'é€šç”¨è§„åˆ™'</span>: [<span class="hljs-string">'fullstack-expert-1'</span>, <span class="hljs-string">'fullstack-expert-2'</span>]
    };
    <span class="hljs-keyword">return</span> reviewerMap[ruleType] || [<span class="hljs-string">'fullstack-expert-1'</span>];
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šæ·»åŠ è®®é¢˜è¯„è®º</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">addIssueComment</span>(<span class="hljs-params">issueNumber, comment</span>) {
    <span class="hljs-keyword">await</span> octokit.<span class="hljs-property">issues</span>.<span class="hljs-title function_">createComment</span>({
      <span class="hljs-attr">owner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">owner</span>,
      <span class="hljs-attr">repo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">repo</span>,
      <span class="hljs-attr">issue_number</span>: issueNumber,
      <span class="hljs-attr">body</span>: comment
    });
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šåˆ†é…è®®é¢˜å®¡æ ¸è€…</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">assignIssueReviewers</span>(<span class="hljs-params">issueNumber, reviewers</span>) {
    <span class="hljs-keyword">await</span> octokit.<span class="hljs-property">issues</span>.<span class="hljs-title function_">addAssignees</span>({
      <span class="hljs-attr">owner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">owner</span>,
      <span class="hljs-attr">repo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">repo</span>,
      <span class="hljs-attr">issue_number</span>: issueNumber,
      <span class="hljs-attr">assignees</span>: reviewers
    });
  }

  <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ï¼šåˆ›å»ºè·Ÿè¸ªé¡¹ç›®</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">createTrackingProject</span>(<span class="hljs-params">rfc, issueNumber</span>) {
    <span class="hljs-keyword">const</span> projectName = <span class="hljs-string">`RFC: <span class="hljs-subst">${rfc.title}</span>`</span>;
    <span class="hljs-keyword">const</span> { <span class="hljs-attr">data</span>: project } = <span class="hljs-keyword">await</span> octokit.<span class="hljs-property">projects</span>.<span class="hljs-title function_">createForRepo</span>({
      <span class="hljs-attr">owner</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">owner</span>,
      <span class="hljs-attr">repo</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">repo</span>,
      <span class="hljs-attr">name</span>: projectName,
      <span class="hljs-attr">body</span>: <span class="hljs-string">`è§„åˆ™RFCè·Ÿè¸ªé¡¹ç›®ï¼ˆå…³è”è®®é¢˜ï¼š#<span class="hljs-subst">${issueNumber}</span>ï¼‰`</span>
    });

    <span class="hljs-comment">// æ·»åŠ é¡¹ç›®ä»»åŠ¡</span>
    <span class="hljs-keyword">const</span> tasks = [
      <span class="hljs-string">'ğŸ“ ç¼–å†™è§„åˆ™Markdownæ–‡æ¡£'</span>,
      <span class="hljs-string">'ğŸ”§ å®ç°è§„åˆ™é…ç½®ç‰‡æ®µ'</span>,
      <span class="hljs-string">'ğŸ§ª ç¼–å†™æµ‹è¯•ç”¨ä¾‹'</span>,
      <span class="hljs-string">'âœ… å®¡æ ¸é€šè¿‡å¹¶åˆå¹¶'</span>,
      <span class="hljs-string">'ğŸš€ å‘å¸ƒåˆ°ç”Ÿäº§ç¯å¢ƒ'</span>
    ];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> task <span class="hljs-keyword">of</span> tasks) {
      <span class="hljs-keyword">await</span> octokit.<span class="hljs-property">projects</span>.<span class="hljs-title function_">createCard</span>({
        <span class="hljs-attr">column_id</span>: project.<span class="hljs-property">columns</span>[<span class="hljs-number">0</span>].<span class="hljs-property">id</span>,
        <span class="hljs-attr">note</span>: task
      });
    }

    <span class="hljs-keyword">return</span> project;
  }
}
</code></pre>
<h4 data-id="heading-23">éªŒæ”¶æ ‡å‡†</h4>
<ul>
<li>è§„åˆ™å‘ç°æœ‰æ•ˆæ€§ï¼šæ¯æœˆè‡ªåŠ¨ç”Ÿæˆ2-3ä¸ªç¬¦åˆå›¢é˜Ÿå®é™…çš„è§„åˆ™å»ºè®®ï¼Œé‡‡çº³ç‡â‰¥60%</li>
<li>RFCå“åº”æ•ˆç‡ï¼šæ–°RFCè®®é¢˜åˆ›å»ºåï¼Œ24å°æ—¶å†…å®Œæˆè‡ªåŠ¨éªŒè¯å’Œå®¡æ ¸è€…åˆ†é…</li>
<li>æµç¨‹å®Œæ•´æ€§ï¼šä»RFCæå‡ºåˆ°è§„åˆ™ç”Ÿæ•ˆï¼Œå…¨æµç¨‹æœ‰è·Ÿè¸ªè®°å½•ï¼Œæ— äººå·¥é—æ¼ç¯èŠ‚</li>
</ul>
<hr/>
<h2 data-id="heading-24">ğŸ“ˆ æˆåŠŸæŒ‡æ ‡ä¸æœ€ç»ˆäº¤ä»˜ç‰©</h2>
<h3 data-id="heading-25">ä¸€ã€3ä¸ªæœˆåå…³é”®æˆæœæŒ‡æ ‡</h3>



















<table><thead><tr><th>æŒ‡æ ‡ç±»åˆ«</th><th>å…·ä½“æŒ‡æ ‡</th><th>å½“å‰åŸºçº¿</th><th>ç›®æ ‡å€¼</th><th>æµ‹é‡æ–¹å¼</th></tr></thead><tbody><tr><td>å¼€å‘æ•ˆç‡</td><td>Code Reviewå¹³å‡æ—¶é—´</td><td>2.5å°æ—¶/æ¬¡</td><td>1.5å°æ—¶/æ¬¡</td><td>GitLab Merge Requestå†å²æ•°æ®ç»Ÿè®¡</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ JavaScript ä¸­çš„ Symbolï¼šç‹¬ä¸€æ— äºŒçš„å€¼]]></title>    <link>https://juejin.cn/post/7576371992614731812</link>    <guid>https://juejin.cn/post/7576371992614731812</guid>    <pubDate>2025-11-25T07:16:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576371992614731812" data-draft-id="7576371992614682660" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ JavaScript ä¸­çš„ Symbolï¼šç‹¬ä¸€æ— äºŒçš„å€¼"/> <meta itemprop="keywords" content="JavaScript,å‰ç«¯,ECMAScript 6"/> <meta itemprop="datePublished" content="2025-11-25T07:16:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="San30"/> <meta itemprop="url" content="https://juejin.cn/user/1766294768060816"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ JavaScript ä¸­çš„ Symbolï¼šç‹¬ä¸€æ— äºŒçš„å€¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1766294768060816/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    San30
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:16:47.000Z" title="Tue Nov 25 2025 07:16:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ Symbolï¼Ÿ</h2>
<p>Symbol æ˜¯ ECMAScript 6ï¼ˆES6ï¼‰å¼•å…¥çš„ä¸€ç§æ–°çš„<strong>åŸå§‹æ•°æ®ç±»å‹</strong>ï¼Œå®ƒè¡¨ç¤º<strong>ç‹¬ä¸€æ— äºŒ</strong>çš„å€¼ã€‚åœ¨ JavaScript çš„å…«ç§æ•°æ®ç±»å‹ä¸­ï¼ŒSymbol å æ®ç€ç‰¹æ®Šçš„åœ°ä½ã€‚</p>
<h3 data-id="heading-1">JavaScript çš„æ•°æ®ç±»å‹</h3>
<p><strong>ç®€å•æ•°æ®ç±»å‹ï¼š</strong></p>
<ul>
<li>ä¼ ç»Ÿæ•°æ®ç±»å‹ï¼šnumberã€stringã€booleanã€nullã€undefined</li>
<li>ES6 æ–°å¢ï¼šbigintã€symbol</li>
</ul>
<p><strong>å¤æ‚æ•°æ®ç±»å‹ï¼š</strong></p>
<ul>
<li>objectï¼ˆåŒ…æ‹¬æ•°ç»„ã€å‡½æ•°ç­‰ï¼‰</li>
</ul>
<h2 data-id="heading-2">Symbol çš„åŸºæœ¬ç”¨æ³•</h2>
<h3 data-id="heading-3">åˆ›å»º Symbol</h3>
<p>ä½¿ç”¨ <code>Symbol()</code> å‡½æ•°åˆ›å»º Symbolï¼Œè¿™æ˜¯ä¸€ä¸ªå‡½æ•°å¼å£°æ˜ï¼Œä½†è¿”å›çš„æ˜¯ç®€å•æ•°æ®ç±»å‹ï¼Œä¸éœ€è¦ä½¿ç”¨ <code>new</code> å…³é”®å­—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ„é€ å‡½æ•°ï¼Œå´æ˜¯ç®€å•æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">const</span> id1 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">''</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> id1); <span class="hljs-comment">// symbol</span>

<span class="hljs-keyword">const</span> id2 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">''</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> id2); <span class="hljs-comment">// symbol</span>

<span class="hljs-comment">// ç‹¬ä¸€æ— äºŒçš„ç‰¹æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(id1 === id2); <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-4">Symbol çš„æè¿°å‚æ•°</h3>
<p><code>Symbol()</code> å¯ä»¥æ¥å—ä¸€ä¸ªå¯é€‰çš„å­—ç¬¦ä¸²å‚æ•°ä½œä¸ºæè¿°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> wes = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'Wes'</span>);
<span class="hljs-keyword">const</span> person = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'Wes'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(wes == person); <span class="hljs-comment">// false</span>
</code></pre>
<p>å³ä½¿æè¿°ç›¸åŒï¼Œåˆ›å»ºçš„ Symbol å€¼ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œè¿™ä½“ç°äº† Symbol çš„"ç‹¬ä¸€æ— äºŒ"ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-5">Symbol å±æ€§çš„ä¸å¯æšä¸¾æ€§</h3>
<p>Symbol ä½œä¸ºå±æ€§åæ—¶ï¼Œä¸ä¼šè¢«å¸¸è§„çš„éå†æ–¹æ³•æšä¸¾åˆ°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> classRoom = {
    [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'Mark'</span>)]: { <span class="hljs-attr">grade</span>: <span class="hljs-number">50</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">'male'</span> },
    [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'Oliva'</span>)]: { <span class="hljs-attr">grade</span>: <span class="hljs-number">80</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">'female'</span> },
    [<span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'oliva'</span>)]: { <span class="hljs-attr">grade</span>: <span class="hljs-number">90</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">'female'</span> },
    <span class="hljs-attr">zengsan</span>: { <span class="hljs-attr">grade</span>: <span class="hljs-number">70</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">'male'</span> }
}

<span class="hljs-comment">// éå†å¯¹è±¡ç”¨ for in</span>
<span class="hljs-comment">// symbol key ä¸å¯ä»¥è¢«æšä¸¾</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> person <span class="hljs-keyword">in</span> classRoom) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(classRoom[person]);
}
<span class="hljs-comment">// åªä¼šè¾“å‡º: {grade: 70, gender: 'male'}</span>
</code></pre>
<h3 data-id="heading-6">è·å– Symbol å±æ€§</h3>
<p>è¦è·å–å¯¹è±¡çš„æ‰€æœ‰ Symbol å±æ€§ï¼Œéœ€è¦ä½¿ç”¨ä¸“é—¨çš„ APIï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸“å±API Object.getOwnPropertySymbols() å¯ä»¥è·å–å¯¹è±¡æ‰€æœ‰çš„symbol key</span>
<span class="hljs-keyword">const</span> syms = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertySymbols</span>(classRoom);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(syms); <span class="hljs-comment">// [Symbol(Mark), Symbol(Oliva), Symbol(oliva)]</span>

<span class="hljs-keyword">const</span> data = syms.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> classRoom[item]);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data); 
<span class="hljs-comment">// è¾“å‡º: [{grade:50,gender:'male'}, {grade:80,gender:'female'}, {grade:90,gender:'female'}]</span>
</code></pre>
<h2 data-id="heading-7">Symbol çš„å®é™…åº”ç”¨è¯¦è§£</h2>
<h3 data-id="heading-8">1. ä½œä¸ºå¯¹è±¡çš„å”¯ä¸€é”®ï¼ˆé¿å…å‘½åå†²çªï¼‰</h3>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼šåœ¨å¤šäººåä½œçš„å¤§å‹é¡¹ç›®ä¸­ï¼Œä½¿ç”¨ Symbol ä½œä¸ºå±æ€§åå¯ä»¥å½»åº•é¿å…å±æ€§åå†²çªã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸åŒæ¨¡å—å¯èƒ½ä½¿ç”¨ç›¸åŒçš„å±æ€§å</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MODULE_A_KEY</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'userData'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">MODULE_B_KEY</span> = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'userData'</span>);

<span class="hljs-keyword">const</span> globalData = {
    [<span class="hljs-variable constant_">MODULE_A_KEY</span>]: { <span class="hljs-attr">theme</span>: <span class="hljs-string">'dark'</span>, <span class="hljs-attr">language</span>: <span class="hljs-string">'zh'</span> },
    [<span class="hljs-variable constant_">MODULE_B_KEY</span>]: { <span class="hljs-attr">cacheSize</span>: <span class="hljs-number">100</span>, <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span> },
    <span class="hljs-attr">userData</span>: <span class="hljs-string">'å…¬å…±æ•°æ®'</span>  <span class="hljs-comment">// å­—ç¬¦ä¸²å±æ€§åå¯èƒ½è¢«è¦†ç›–</span>
};

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalData[<span class="hljs-variable constant_">MODULE_A_KEY</span>]); <span class="hljs-comment">// {theme: 'dark', language: 'zh'}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalData[<span class="hljs-variable constant_">MODULE_B_KEY</span>]); <span class="hljs-comment">// {cacheSize: 100, timeout: 5000}</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalData.<span class="hljs-property">userData</span>); <span class="hljs-comment">// å…¬å…±æ•°æ®</span>

<span class="hljs-comment">// å³ä½¿å±æ€§æè¿°ç›¸åŒï¼Œä¹Ÿä¸ä¼šå†²çª</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable constant_">MODULE_A_KEY</span> === <span class="hljs-variable constant_">MODULE_B_KEY</span>); <span class="hljs-comment">// false</span>
</code></pre>
<h3 data-id="heading-9">2. å®ç°çœŸæ­£çš„"ç§æœ‰"å±æ€§</h3>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼šSymbol å±æ€§ä¸ä¼šè¢«å¸¸è§„æ–¹æ³•æšä¸¾ï¼Œæä¾›äº†ä¸€å®šç¨‹åº¦çš„"ç§æœ‰æ€§"ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> _password = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'password'</span>);
<span class="hljs-keyword">const</span> _internalId = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'internalId'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, password</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>[_password] = password;  <span class="hljs-comment">// "ç§æœ‰"å±æ€§</span>
        <span class="hljs-variable language_">this</span>[_internalId] = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">_generateId</span>();
    }
    
    <span class="hljs-title function_">_generateId</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>().<span class="hljs-title function_">toString</span>(<span class="hljs-number">36</span>).<span class="hljs-title function_">substr</span>(<span class="hljs-number">2</span>, <span class="hljs-number">9</span>);
    }
    
    <span class="hljs-comment">// åªèƒ½é€šè¿‡æ–¹æ³•è®¿é—®"ç§æœ‰"å±æ€§</span>
    <span class="hljs-title function_">validatePassword</span>(<span class="hljs-params">inputPassword</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[_password] === inputPassword;
    }
    
    <span class="hljs-comment">// å¸¸è§„æ–¹æ³•æ— æ³•æšä¸¾åˆ°Symbolå±æ€§</span>
    <span class="hljs-title function_">toJSON</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> obj = {};
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> <span class="hljs-variable language_">this</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">this</span>[key] !== <span class="hljs-string">'symbol'</span>) {
                obj[key] = <span class="hljs-variable language_">this</span>[key];
            }
        }
        <span class="hljs-keyword">return</span> obj;
    }
}

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'123456'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-property">name</span>); <span class="hljs-comment">// å¼ ä¸‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user[_password]); <span class="hljs-comment">// 123456 (ä½†å¤–éƒ¨é€šå¸¸ä¸çŸ¥é“è¿™ä¸ªSymbol)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-title function_">validatePassword</span>(<span class="hljs-string">'123456'</span>)); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// JSON.stringify ä¸ä¼šåŒ…å«Symbolå±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(user)); <span class="hljs-comment">// {"name":"å¼ ä¸‰"}</span>

<span class="hljs-comment">// for...in å¾ªç¯ä¹Ÿä¸ä¼šæšä¸¾Symbolå±æ€§</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> key <span class="hljs-keyword">in</span> user) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key); <span class="hljs-comment">// åªè¾“å‡º: name</span>
}
</code></pre>
<h3 data-id="heading-10">3. å®šä¹‰ç±»çš„å†…éƒ¨æ–¹æ³•å’Œå…ƒæ•°æ®</h3>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼šä½¿ç”¨ Symbol å®šä¹‰ç±»çš„å†…éƒ¨å®ç°ç»†èŠ‚ï¼Œé¿å…è¢«å¤–éƒ¨è¯¯ç”¨ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å®šä¹‰"ç§æœ‰"æ–¹æ³•</span>
<span class="hljs-keyword">const</span> _validate = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'validate'</span>);
<span class="hljs-keyword">const</span> _formatData = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'formatData'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiService</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">endpoint</span> = <span class="hljs-string">'https://api.example.com'</span>;
    }
    
    <span class="hljs-comment">// å…¬å…±æ–¹æ³•</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params">url</span>) {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.endpoint}</span><span class="hljs-subst">${url}</span>`</span>);
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[_formatData](data);
    }
    
    <span class="hljs-comment">// "ç§æœ‰"æ–¹æ³• - ä½¿ç”¨Symbolå®šä¹‰</span>
    [_validate](data) {
        <span class="hljs-keyword">return</span> data &amp;&amp; <span class="hljs-keyword">typeof</span> data === <span class="hljs-string">'object'</span>;
    }
    
    [_formatData](data) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>[_validate](data)) {
            <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, data };
        }
        <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span>, <span class="hljs-attr">error</span>: <span class="hljs-string">'Invalid data'</span> };
    }
}

<span class="hljs-keyword">const</span> api = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApiService</span>();
<span class="hljs-comment">// api[_validate] å’Œ api[_formatData] åœ¨å¤–éƒ¨éš¾ä»¥è®¿é—®ï¼Œå®ç°äº†ä¿¡æ¯éšè—</span>
</code></pre>
<h3 data-id="heading-11">4. æ³¨å†Œè¡¨å…¨å±€ Symbol</h3>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼šä½¿ç”¨ <code>Symbol.for()</code> å’Œ <code>Symbol.keyFor()</code> åˆ›å»ºå’ŒæŸ¥æ‰¾å…¨å±€ Symbolã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Symbol.for() ä¼šåœ¨å…¨å±€Symbolæ³¨å†Œè¡¨ä¸­æŸ¥æ‰¾æˆ–åˆ›å»ºSymbol</span>
<span class="hljs-keyword">const</span> globalSym1 = <span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">'app.config'</span>);
<span class="hljs-keyword">const</span> globalSym2 = <span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">'app.config'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(globalSym1 === globalSym2); <span class="hljs-comment">// true</span>

<span class="hljs-comment">// åº”ç”¨ï¼šå…¨å±€é…ç½®å…±äº«</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CONFIG_KEY</span> = <span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">for</span>(<span class="hljs-string">'myapp.config'</span>);

<span class="hljs-comment">// åœ¨ä¸åŒæ–‡ä»¶ä¸­å…±äº«åŒä¸€ä¸ªé…ç½®Symbol</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setGlobalConfig</span>(<span class="hljs-params">config</span>) {
    <span class="hljs-variable language_">global</span>[<span class="hljs-variable constant_">CONFIG_KEY</span>] = config;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getGlobalConfig</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">global</span>[<span class="hljs-variable constant_">CONFIG_KEY</span>];
}

<span class="hljs-comment">// è·å–Symbolçš„æè¿°é”®å</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Symbol</span>.<span class="hljs-title function_">keyFor</span>(<span class="hljs-variable constant_">CONFIG_KEY</span>)); <span class="hljs-comment">// 'myapp.config'</span>
</code></pre>
<h3 data-id="heading-12">5. å†…ç½® Symbol å€¼ï¼ˆWell-known Symbolsï¼‰</h3>
<p><strong>æ ¸å¿ƒçŸ¥è¯†ç‚¹</strong>ï¼šJavaScript å†…ç½®äº†ä¸€äº› Symbol å€¼ï¼Œç”¨äºæ§åˆ¶å¯¹è±¡çš„è¡Œä¸ºã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Symbol.iterator - å®šä¹‰å¯¹è±¡çš„è¿­ä»£å™¨</span>
<span class="hljs-keyword">const</span> myIterable = {
    [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]: <span class="hljs-keyword">function</span>* () {
        <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;
        <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;
        <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>;
    }
};

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> myIterable) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value); <span class="hljs-comment">// 1, 2, 3</span>
}

<span class="hljs-comment">// Symbol.toStringTag - è‡ªå®šä¹‰å¯¹è±¡çš„toStringæ ‡ç­¾</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
    get [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toStringTag</span>]() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">'MyClass'</span>;
    }
}

<span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.<span class="hljs-title function_">toString</span>()); <span class="hljs-comment">// [object MyClass]</span>

<span class="hljs-comment">// Symbol.hasInstance - è‡ªå®šä¹‰instanceofè¡Œä¸º</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyArray</span> {
    <span class="hljs-keyword">static</span> [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">hasInstance</span>](instance) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(instance);
    }
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">MyArray</span>); <span class="hljs-comment">// true</span>
</code></pre>
<h3 data-id="heading-13">6. å®é™…é¡¹ç›®ä¸­çš„å®Œæ•´ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç”¨æˆ·æƒé™ç³»ç»Ÿ - ä½¿ç”¨Symbolé¿å…æƒé™åå†²çª</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PERMISSIONS</span> = {
    <span class="hljs-attr">READ</span>: <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'READ'</span>),
    <span class="hljs-attr">WRITE</span>: <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'WRITE'</span>),
    <span class="hljs-attr">DELETE</span>: <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'DELETE'</span>),
    <span class="hljs-attr">ADMIN</span>: <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'ADMIN'</span>)
};

<span class="hljs-keyword">const</span> _permissions = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'permissions'</span>);

<span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> {
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;
        <span class="hljs-variable language_">this</span>[_permissions] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
    }
    
    <span class="hljs-title function_">grantPermission</span>(<span class="hljs-params">permission</span>) {
        <span class="hljs-variable language_">this</span>[_permissions].<span class="hljs-title function_">add</span>(permission);
    }
    
    <span class="hljs-title function_">hasPermission</span>(<span class="hljs-params">permission</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[_permissions].<span class="hljs-title function_">has</span>(permission);
    }
    
    <span class="hljs-title function_">getPermissions</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-variable language_">this</span>[_permissions]);
    }
}

<span class="hljs-keyword">const</span> user = <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">'Alice'</span>);
user.<span class="hljs-title function_">grantPermission</span>(<span class="hljs-variable constant_">PERMISSIONS</span>.<span class="hljs-property">READ</span>);
user.<span class="hljs-title function_">grantPermission</span>(<span class="hljs-variable constant_">PERMISSIONS</span>.<span class="hljs-property">WRITE</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-title function_">hasPermission</span>(<span class="hljs-variable constant_">PERMISSIONS</span>.<span class="hljs-property">READ</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user.<span class="hljs-title function_">hasPermission</span>(<span class="hljs-variable constant_">PERMISSIONS</span>.<span class="hljs-property">DELETE</span>)); <span class="hljs-comment">// false</span>

<span class="hljs-comment">// æƒé™æ•°æ®è¢«ä¿æŠ¤ï¼Œå¤–éƒ¨éš¾ä»¥ç›´æ¥ä¿®æ”¹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user[_permissions]); <span class="hljs-comment">// éœ€è¦çŸ¥é“å…·ä½“çš„Symbolæ‰èƒ½è®¿é—®</span>
</code></pre>
<h2 data-id="heading-14">Symbol çš„ä¼˜åŠ¿æ€»ç»“</h2>
<ol>
<li><strong>å”¯ä¸€æ€§</strong>ï¼šæ¯ä¸ª Symbol å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œä¸ä¼šä¸å…¶ä»–å€¼å†²çª</li>
<li><strong>å®‰å…¨æ€§</strong>ï¼šSymbol å±æ€§ä¸ä¼šè¢«æ„å¤–è¦†ç›–</li>
<li><strong>éšç§æ€§</strong>ï¼šSymbol å±æ€§ä¸ä¼šè¢«å¸¸è§„æ–¹æ³•æšä¸¾ï¼Œé€‚åˆå­˜å‚¨å†…éƒ¨æ•°æ®</li>
<li><strong>åä½œå‹å¥½</strong>ï¼šåœ¨å¤§å‹é¡¹ç›®å’Œå¤šå¼€å‘è€…åä½œä¸­ï¼Œé¿å…å‘½åå†²çª</li>
<li><strong>å…ƒç¼–ç¨‹èƒ½åŠ›</strong>ï¼šé€šè¿‡å†…ç½® Symbol å€¼æ§åˆ¶å¯¹è±¡çš„æ ¸å¿ƒè¡Œä¸º</li>
</ol>
<h2 data-id="heading-15">æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>Symbol å±æ€§éœ€è¦ä½¿ç”¨ <code>Object.getOwnPropertySymbols()</code> è·å–</li>
<li>Symbol ä¸ä¼šè¢« <code>JSON.stringify()</code> åºåˆ—åŒ–</li>
<li>Symbol ä¸ä¼šè¢« <code>for...in</code>ã€<code>Object.keys()</code> ç­‰å¸¸è§„æ–¹æ³•æšä¸¾</li>
<li>ä½¿ç”¨ <code>Symbol.for()</code> å¯ä»¥åˆ›å»ºå…¨å±€å…±äº«çš„ Symbol</li>
</ul>
<p>é€šè¿‡åˆç†ä½¿ç”¨ Symbolï¼Œå¯ä»¥ç¼–å†™å‡ºæ›´åŠ å¥å£®ã€å¯ç»´æŠ¤çš„ JavaScript ä»£ç ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤§å‹é¡¹ç›®å’Œæ¡†æ¶å¼€å‘ä¸­ï¼ŒSymbol çš„ä»·å€¼æ›´åŠ æ˜æ˜¾ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android ANR]]></title>    <link>https://juejin.cn/post/7576371992614715428</link>    <guid>https://juejin.cn/post/7576371992614715428</guid>    <pubDate>2025-11-25T07:07:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576371992614715428" data-draft-id="7576273949187555370" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android ANR"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-25T07:07:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆéƒ½å¤§è è"/> <meta itemprop="url" content="https://juejin.cn/user/289926799429805"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android ANR
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/289926799429805/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆéƒ½å¤§è è
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:07:42.000Z" title="Tue Nov 25 2025 07:07:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Android ANRçš„ç±»å‹ã€å®šä½ä¸è§£å†³æ–¹æ³•</h2>
<h3 data-id="heading-1">ANRçš„ç±»å‹ï¼ˆå…±4ç§ï¼‰</h3>
<p>æ ¹æ®Androidç³»ç»Ÿæœºåˆ¶ï¼ŒANRä¸»è¦åˆ†ä¸ºä»¥ä¸‹4ç§ç±»å‹ï¼š</p>
<ol>
<li>
<p><strong>è¾“å…¥è°ƒåº¦ANRï¼ˆæœ€å¸¸è§ï¼Œæœ‰å¼¹æ¡†æç¤ºï¼‰</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šä¸»çº¿ç¨‹å¤„ç†æŒ‰é”®/è§¦æ‘¸äº‹ä»¶è¶…è¿‡<strong>5ç§’</strong></li>
<li>å…³é”®è¯ï¼š<code>Input dispatching timed out</code></li>
<li>ç”¨æˆ·ä¼šçœ‹åˆ°"åº”ç”¨æ— å“åº”"å¯¹è¯æ¡†</li>
</ul>
</li>
<li>
<p><strong>å¹¿æ’­æ¥æ”¶å™¨ANR</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼š<code>onReceive()</code>æ–¹æ³•æ‰§è¡Œè¶…è¿‡<strong>10ç§’</strong>ï¼ˆå‰å°å¹¿æ’­ï¼‰æˆ–<strong>60ç§’</strong>ï¼ˆåå°å¹¿æ’­ï¼‰</li>
<li>å…³é”®è¯ï¼š<code>Timeout of broadcast</code></li>
<li>ç³»ç»Ÿä¸ä¼šæ˜¾ç¤ºå¯¹è¯æ¡†ï¼Œä»…è¾“å‡ºæ—¥å¿—</li>
</ul>
</li>
<li>
<p><strong>æœåŠ¡ANR</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼š<code>onCreate()</code>ã€<code>onStartCommand()</code>ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ‰§è¡Œè¶…è¿‡<strong>20ç§’</strong>ï¼ˆå‰å°æœåŠ¡ï¼‰æˆ–<strong>200ç§’</strong>ï¼ˆåå°æœåŠ¡ï¼‰</li>
<li>å…³é”®è¯ï¼š<code>Timeout executing service</code></li>
<li>ç³»ç»Ÿä¸ä¼šæ˜¾ç¤ºå¯¹è¯æ¡†ï¼Œä»…è¾“å‡ºæ—¥å¿—</li>
</ul>
</li>
<li>
<p><strong>æ— èšç„¦çª—å£ANR</strong></p>
<ul>
<li>è§¦å‘æ¡ä»¶ï¼šåº”ç”¨æ— æ³•æ‰¾åˆ°èšç„¦çª—å£ï¼ˆé€šå¸¸æ˜¯åº”ç”¨å¯åŠ¨æ…¢ï¼Œæ— æ³•ç»˜åˆ¶ç¬¬ä¸€å¸§ï¼‰</li>
<li>å…³é”®è¯ï¼š<code>No focused window</code></li>
<li>è¶…æ—¶æ—¶é—´ï¼š<strong>5ç§’</strong></li>
</ul>
</li>
</ol>
<h3 data-id="heading-2">ANRå®šä½æ–¹æ³•ï¼ˆ5æ­¥æ³•ï¼‰</h3>
<ol>
<li>
<p><strong>è·å–å…³é”®æ—¥å¿—æ–‡ä»¶</strong></p>
<ul>
<li>é€šè¿‡ADBå‘½ä»¤è·å–<code>traces.txt</code>ï¼š
<pre><code class="hljs language-bash" lang="bash">adb pull /data/anr/traces.txt ./anr_traces.log
</code></pre>
</li>
<li>åˆ†ææœ€æ–°ANRè®°å½•ï¼š<code>head -n 500 anr_traces.log</code></li>
</ul>
</li>
<li>
<p><strong>å…³é”®æœç´¢å…³é”®è¯</strong></p>
<ul>
<li>æœç´¢<code>main</code>å®šä½ä¸»çº¿ç¨‹</li>
<li>æ£€æŸ¥çº¿ç¨‹çŠ¶æ€ï¼š<code>BLOCKED</code>ï¼ˆè¢«é˜»å¡ï¼‰ã€<code>WAITING</code>ï¼ˆç­‰å¾…èµ„æºï¼‰ã€<code>TIMED_WAITING</code>ï¼ˆå¸¦è¶…æ—¶ç­‰å¾…ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨Android Vitals</strong></p>
<ul>
<li>é€šè¿‡Playç®¡ç†ä¸­å¿ƒæŸ¥çœ‹ANRç»Ÿè®¡</li>
<li>å…³æ³¨"ç”¨æˆ·æ„ŸçŸ¥çš„ANRå‘ç”Ÿç‡"ï¼ˆæ ¸å¿ƒæŒ‡æ ‡ï¼‰</li>
</ul>
</li>
<li>
<p><strong>åˆ†æå·¥å…·</strong></p>
<ul>
<li><strong>TraceView</strong>ï¼šæŸ¥çœ‹ä¸»çº¿ç¨‹ç¹å¿™ä½ç½®</li>
<li><strong>StrictMode</strong>ï¼šæ£€æµ‹ä¸»çº¿ç¨‹æ„å¤–I/Oæ“ä½œ</li>
<li><strong>Perfetto</strong>ï¼šåŒºåˆ†ç³»ç»Ÿé—®é¢˜å’Œåº”ç”¨é—®é¢˜</li>
</ul>
</li>
<li>
<p><strong>çº¿ä¸Šç›‘æ§æ–¹æ¡ˆ</strong></p>
<ul>
<li>ä½¿ç”¨<code>FileObserver</code>ç›‘å¬<code>/data/anr/</code>ç›®å½•å˜åŒ–</li>
<li>é›†æˆBuglyç­‰ç¬¬ä¸‰æ–¹ç›‘æ§å·¥å…·</li>
</ul>
</li>
</ol>
<h3 data-id="heading-3">è§£å†³æ–¹æ¡ˆä¸å…³é”®ç‚¹</h3>
<ol>
<li>
<p><strong>é¿å…ä¸»çº¿ç¨‹é˜»å¡</strong>ï¼ˆ70% ANRåŸå› ï¼‰</p>
<ul>
<li>ç½‘ç»œè¯·æ±‚ã€æ•°æ®åº“æ“ä½œã€æ–‡ä»¶è¯»å†™ç­‰<strong>å…¨éƒ¨ç§»è‡³å·¥ä½œçº¿ç¨‹</strong></li>
<li>ä½¿ç”¨<code>Handler</code>ã€<code>AsyncTask</code>ã€<code>Coroutine</code>ç­‰è¿›è¡Œçº¿ç¨‹åˆ‡æ¢</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–é”æœºåˆ¶</strong></p>
<ul>
<li>å‡å°‘ä¸»çº¿ç¨‹ä¸å…¶ä»–çº¿ç¨‹çš„é”äº‰ç”¨</li>
<li>é¿å…æ­»é”ï¼ˆå¦‚ï¼šä¸»çº¿ç¨‹ç­‰å¾…å…¶ä»–çº¿ç¨‹é”ï¼Œè€Œå…¶ä»–çº¿ç¨‹åˆç­‰å¾…ä¸»çº¿ç¨‹ï¼‰</li>
</ul>
</li>
<li>
<p><strong>ä¼˜åŒ–UIæ¸²æŸ“</strong></p>
<ul>
<li>å‡å°‘å¸ƒå±€å±‚çº§ï¼Œé¿å…è¿‡åº¦å¤æ‚çš„UI</li>
<li>ä½¿ç”¨Jetpack Pagingåº“å¤„ç†åˆ—è¡¨æ•°æ®</li>
</ul>
</li>
<li>
<p><strong>åˆç†ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸ</strong></p>
<ul>
<li><code>onCreate()</code>å’Œ<code>onResume()</code>ä¸­å°½é‡å°‘åšè€—æ—¶æ“ä½œ</li>
<li>å¤æ‚åˆå§‹åŒ–å¯ä½¿ç”¨Splash Screenæˆ–å¼‚æ­¥åŠ è½½</li>
</ul>
</li>
</ol>
<h3 data-id="heading-4">å¸¸è§å…³é”®è¯æ€»ç»“</h3>









































<table><thead><tr><th>å…³é”®è¯</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Input dispatching timed out</code></td><td>æœ€å¸¸è§çš„ANRç±»å‹ï¼Œ5ç§’è¶…æ—¶</td></tr><tr><td><code>Timeout of broadcast</code></td><td>å¹¿æ’­æ¥æ”¶å™¨è¶…æ—¶</td></tr><tr><td><code>Timeout executing service</code></td><td>æœåŠ¡è¶…æ—¶</td></tr><tr><td><code>main</code></td><td>ä¸»çº¿ç¨‹æ ‡è¯†ï¼Œæ—¥å¿—ä¸­æœç´¢çš„å…³é”®è¯</td></tr><tr><td><code>BLOCKED</code>/<code>WAITING</code>/<code>TIMED_WAITING</code></td><td>çº¿ç¨‹çŠ¶æ€ï¼Œå®šä½é˜»å¡åŸå› </td></tr><tr><td><code>traces.txt</code></td><td>ANRæ—¥å¿—æ–‡ä»¶ï¼Œå…³é”®è¯Šæ–­æ–‡ä»¶</td></tr><tr><td><code>StrictMode</code></td><td>ç”¨äºæ£€æµ‹ä¸»çº¿ç¨‹I/Oæ“ä½œçš„å·¥å…·</td></tr><tr><td><code>Binder</code></td><td>åŒæ­¥Binderè°ƒç”¨è¶…æ—¶ç›¸å…³</td></tr></tbody></table>
<p>è®°ä½ï¼š<strong>ANRçš„æ ¸å¿ƒæ˜¯ä¸»çº¿ç¨‹å“åº”è¶…æ—¶</strong>ï¼Œæ‰€æœ‰ä¼˜åŒ–éƒ½å›´ç»•"è®©ä¸»çº¿ç¨‹ä¿æŒå“åº”"è¿™ä¸ªåŸåˆ™è¿›è¡Œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨StrictModeå’ŒTraceViewèƒ½å¸®åŠ©ä½ æå‰å‘ç°æ½œåœ¨çš„ANRé—®é¢˜ï¼Œé¿å…ä¸Šçº¿åæ‰è¢«ç”¨æˆ·åé¦ˆã€‚</p>
<h2 data-id="heading-5">ğŸ“± è¯¦ç»†è§£æï¼šANRå®šä½ç¬¬ä¸€æ­¥â€”â€”è·å–å¹¶åˆ†ætraces.txtæ—¥å¿—</h2>
<p>å˜¿ï¼Œæœ‹å‹ï¼è¯´åˆ°ANRå®šä½ï¼Œæˆ‘ç‰¹åˆ«æƒ³å’Œä½ èŠèŠè¿™ä¸ª<strong>æœ€åŸºç¡€ä½†æœ€é‡è¦</strong>çš„æ­¥éª¤â€”â€”è·å–å’Œåˆ†æ<code>traces.txt</code>æ–‡ä»¶ã€‚è¿™å°±åƒåŒ»ç”Ÿåšè¯Šæ–­æ—¶å…ˆè¦æ‹Xå…‰ç‰‡ä¸€æ ·ï¼Œæ²¡æœ‰è¿™ä¸ªï¼Œå…¶ä»–åˆ†æéƒ½æ˜¯ç©ºä¸­æ¥¼é˜ã€‚</p>
<h3 data-id="heading-6">ä¸ºä»€ä¹ˆtraces.txtè¿™ä¹ˆé‡è¦ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼šå½“ä½ çš„åº”ç”¨çªç„¶"å¡æ­»"ï¼Œç”¨æˆ·çœ‹åˆ°"åº”ç”¨æ— å“åº”"å¼¹çª—ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨è®°å½•é‚£ä¸€åˆ»æ‰€æœ‰çº¿ç¨‹çš„çŠ¶æ€ï¼Œè¿™äº›ä¿¡æ¯å°±å­˜æ”¾åœ¨<code>traces.txt</code>é‡Œã€‚å®ƒåŒ…å«äº†<strong>ä¸»çº¿ç¨‹</strong>ï¼ˆä¹Ÿå°±æ˜¯UIçº¿ç¨‹ï¼‰åˆ°åº•åœ¨å¹²ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆå¡ä½äº†ï¼Œç”šè‡³èƒ½å‘Šè¯‰æˆ‘ä»¬æ˜¯å“ªä¸ªé”åœ¨ä½œç¥Ÿã€‚</p>
<blockquote>
<p>ğŸ’¡ <strong>å°è´´å£«</strong>ï¼š90%çš„ANRé—®é¢˜éƒ½èƒ½ä»traces.txtä¸­æ‰¾åˆ°çº¿ç´¢ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ç»å¯¹ä¸èƒ½è·³è¿‡ï¼</p>
</blockquote>
<h3 data-id="heading-7">ğŸ“¥ è·å–traces.txtçš„è¯¦ç»†æ–¹æ³•ï¼ˆ2025å¹´æœ€æ–°ç‰ˆï¼‰</h3>
<h4 data-id="heading-8">ğŸ“± å¯¹äºAndroid 11åŠä»¥ä¸Šç‰ˆæœ¬ï¼ˆåŒ…æ‹¬Android 12/13/14ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># 1. è¿æ¥è®¾å¤‡ï¼ˆç¡®ä¿è®¾å¤‡å·²å¼€å¯USBè°ƒè¯•ï¼‰</span>
adb devices

<span class="hljs-comment"># 2. è·å–traces.txtï¼ˆæœ€ç®€å•çš„æ–¹æ³•ï¼‰</span>
adb shell <span class="hljs-string">"cat /data/anr/traces.txt"</span> &gt; anr_traces.log

<span class="hljs-comment"># 3. æˆ–è€…ç›´æ¥æ‹‰å–åˆ°ç”µè„‘ï¼ˆå¦‚æœè®¾å¤‡æ˜¯Android 11+ï¼‰</span>
adb pull /data/anr/traces.txt ./anr_traces.log
</code></pre>
<h4 data-id="heading-9">ğŸ“± å¯¹äºAndroid 6.0ä»¥ä¸‹ç‰ˆæœ¬</h4>
<pre><code class="hljs language-bash" lang="bash">adb pull /data/anr/traces.txt ./anr_traces.log
</code></pre>
<h4 data-id="heading-10">ğŸ“± å¯¹äºAndroid 7.0-10.0ç‰ˆæœ¬ï¼ˆæƒé™é—®é¢˜ï¼‰</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…ˆè·å–bugreportï¼ˆä¼šç”Ÿæˆä¸€ä¸ªå‹ç¼©åŒ…ï¼‰</span>
adb bugreport &gt; bugreport.zip

<span class="hljs-comment"># è§£å‹åï¼Œåœ¨è§£å‹ç›®å½•çš„FS/data/anr/ä¸‹æ‰¾åˆ°traces.txt</span>
unzip bugreport.zip
</code></pre>
<blockquote>
<p>âš ï¸ <strong>æ³¨æ„</strong>ï¼šæœ‰äº›å‚å•†ï¼ˆå¦‚å°ç±³ã€åä¸ºï¼‰å¯¹<code>/data/anr/</code>ç›®å½•æœ‰é¢å¤–é™åˆ¶ï¼Œå¯èƒ½éœ€è¦rootæƒé™ã€‚</p>
</blockquote>
<h3 data-id="heading-11">ğŸ” è¯¦ç»†åˆ†ætraces.txtï¼ˆå®æˆ˜æ¡ˆä¾‹ï¼‰</h3>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªçœŸå®çš„traces.txtç‰‡æ®µï¼Œæˆ‘æ¥ä¸€æ­¥æ­¥è§£é‡Šï¼š</p>
<pre><code class="hljs language-scss" lang="scss">"<span class="hljs-selector-tag">main</span>" prio=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Waiting
  | group="<span class="hljs-selector-tag">main</span>" sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0</span>x73f44000 self=<span class="hljs-number">0</span>x7f2c120000
  | sysTid=<span class="hljs-number">12349</span> nice=<span class="hljs-number">0</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7f2c12d6d0
  | state=WAITING (sleeping) gp=<span class="hljs-number">0</span>x0 tid=<span class="hljs-number">1</span>
  | stack=<span class="hljs-number">0</span>x7fffe80000-<span class="hljs-number">0</span>x7fffe82000 stackSize=<span class="hljs-number">1040</span>KB
  | held mutexes=
  at java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.Object</span><span class="hljs-selector-class">.wait</span>(Native Method)
  - waiting on &lt;<span class="hljs-number">0</span>x0a7c1234&gt; (a java.lang.Object)
  at java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.Object</span><span class="hljs-selector-class">.wait</span>(Object.java:<span class="hljs-number">422</span>)
  at com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.MainActivity</span>$<span class="hljs-number">1</span><span class="hljs-selector-class">.run</span>(MainActivity.java:<span class="hljs-number">45</span>)
  - locked &lt;<span class="hljs-number">0</span>x0a7c1234&gt; (a java.lang.Object)
  at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Handler</span><span class="hljs-selector-class">.handleCallback</span>(Handler.java:<span class="hljs-number">883</span>)
  at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Handler</span><span class="hljs-selector-class">.dispatchMessage</span>(Handler.java:<span class="hljs-number">100</span>)
  at android<span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.Looper</span><span class="hljs-selector-class">.loop</span>(Looper.java:<span class="hljs-number">214</span>)
  at android<span class="hljs-selector-class">.app</span><span class="hljs-selector-class">.ActivityThread</span><span class="hljs-selector-class">.main</span>(ActivityThread.java:<span class="hljs-number">7356</span>)
  at java<span class="hljs-selector-class">.lang</span><span class="hljs-selector-class">.reflect</span><span class="hljs-selector-class">.Method</span><span class="hljs-selector-class">.invoke</span>(Native Method)
  at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.RuntimeInit</span><span class="hljs-variable">$MethodAndArgsCaller</span><span class="hljs-selector-class">.run</span>(RuntimeInit.java:<span class="hljs-number">492</span>)
  at com<span class="hljs-selector-class">.android</span><span class="hljs-selector-class">.internal</span><span class="hljs-selector-class">.os</span><span class="hljs-selector-class">.ZygoteInit</span><span class="hljs-selector-class">.main</span>(ZygoteInit.java:<span class="hljs-number">930</span>)
</code></pre>
<h4 data-id="heading-12">ğŸ§  é€è¡Œè§£è¯»</h4>
<ol>
<li>
<p><strong>"main" prio=5 tid=1 Waiting</strong></p>
<ul>
<li>è¿™æ˜¯ä¸»çº¿ç¨‹ï¼Œæ­£åœ¨ç­‰å¾…çŠ¶æ€ï¼ˆWaitingï¼‰</li>
<li><code>tid=1</code>æ˜¯çº¿ç¨‹IDï¼Œä¸»çº¿ç¨‹IDé€šå¸¸æ˜¯1</li>
</ul>
</li>
<li>
<p><strong>at com.example.app.MainActivity$1.run(MainActivity.java:45)</strong></p>
<ul>
<li>å…³é”®ï¼é—®é¢˜å‡ºåœ¨MainActivityçš„ç¬¬45è¡Œ</li>
<li>è¿™æ˜¯ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ï¼ˆ$1ï¼‰çš„runæ–¹æ³•</li>
</ul>
</li>
<li>
<p><strong>- locked &lt;0x0a7c1234&gt; (a java.lang.Object)</strong></p>
<ul>
<li>ä¸»çº¿ç¨‹æ­£åœ¨ç­‰å¾…è·å–ä¸€ä¸ªé”ï¼ˆObjectå¯¹è±¡ï¼‰</li>
<li>è¿™ä¸ªé”çš„åœ°å€æ˜¯0x0a7c1234</li>
</ul>
</li>
<li>
<p><strong>at java.lang.Object.wait(Native Method)</strong></p>
<ul>
<li>ä¸»çº¿ç¨‹åœ¨è°ƒç”¨<code>wait()</code>æ–¹æ³•ç­‰å¾…é”</li>
</ul>
</li>
</ol>
<h4 data-id="heading-13">ğŸ•µï¸â€â™‚ï¸ ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼Ÿ</h4>
<p>ä»è¿™ä¸ªç‰‡æ®µæˆ‘ä»¬å¯ä»¥<strong>ç«‹å³çŸ¥é“</strong>ï¼š</p>
<ul>
<li>é—®é¢˜å‡ºåœ¨<code>MainActivity.java</code>çš„ç¬¬45è¡Œ</li>
<li>ä»£ç ä¸­ä½¿ç”¨äº†<code>wait()</code>æ–¹æ³•ï¼Œè¯´æ˜æœ‰çº¿ç¨‹åŒæ­¥é—®é¢˜</li>
<li>ä¸»çº¿ç¨‹åœ¨ç­‰å¾…ä¸€ä¸ªé”ï¼Œè€Œè¿™ä¸ªé”è¢«å…¶ä»–çº¿ç¨‹æŒæœ‰</li>
</ul>
<h3 data-id="heading-14">ğŸ’¡ å®é™…å®šä½æ¡ˆä¾‹</h3>
<p>å‡è®¾ä½ çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MainActivity.java</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Object</span> <span class="hljs-variable">lock</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>();

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">doSomething</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// 45è¡Œ</span>
    <span class="hljs-keyword">synchronized</span> (lock) {
        <span class="hljs-comment">// å¤æ‚çš„æ•°æ®åº“æŸ¥è¯¢</span>
        List&lt;Data&gt; data = database.query();
        <span class="hljs-comment">// ... å…¶ä»–æ“ä½œ</span>
    }
}

<span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    <span class="hljs-keyword">synchronized</span> (lock) {
        <span class="hljs-comment">// å¤æ‚çš„è®¡ç®—</span>
        processBigData();
    }
}).start();
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šä¸»çº¿ç¨‹åœ¨ç­‰å¾…é”ï¼Œè€Œå·¥ä½œçº¿ç¨‹ä¹ŸæŒæœ‰è¿™ä¸ªé”ï¼Œå¯¼è‡´ä¸»çº¿ç¨‹è¢«é˜»å¡ã€‚</p>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li>é¿å…åœ¨ä¸»çº¿ç¨‹ä¸­æŒæœ‰é”ï¼ˆå¦‚å°†æ•°æ®åº“æŸ¥è¯¢ç§»è‡³å·¥ä½œçº¿ç¨‹ï¼‰</li>
<li>å‡å°‘é”çš„èŒƒå›´ï¼ˆåªé”å®šå¿…è¦çš„ä»£ç ï¼‰</li>
<li>ä½¿ç”¨æ›´é«˜çº§çš„å¹¶å‘å·¥å…·ï¼ˆå¦‚<code>ConcurrentHashMap</code>ï¼‰</li>
</ol>
<h3 data-id="heading-15">ğŸ› ï¸ åˆ†ætraces.txtçš„å®ç”¨æŠ€å·§</h3>
<ol>
<li><strong>æœç´¢"main"</strong>ï¼šè¿™æ˜¯æ‰¾ä¸»çº¿ç¨‹çš„èµ·ç‚¹</li>
<li><strong>å…³æ³¨çº¿ç¨‹çŠ¶æ€</strong>ï¼š
<ul>
<li><code>BLOCKED</code>ï¼šçº¿ç¨‹è¢«é˜»å¡ï¼ˆç­‰å¾…é”ï¼‰</li>
<li><code>WAITING</code>ï¼šçº¿ç¨‹åœ¨ç­‰å¾…èµ„æº</li>
<li><code>TIMED_WAITING</code>ï¼šå¸¦è¶…æ—¶çš„ç­‰å¾…</li>
</ul>
</li>
<li><strong>æ‰¾"locked"å’Œ"waiting to lock"</strong>ï¼šè¿™æ˜¯é”äº‰ç”¨çš„å…³é”®çº¿ç´¢</li>
<li><strong>çœ‹ä¸šåŠ¡ä»£ç æ ˆ</strong>ï¼šä»<code>at com.example...</code>å¼€å§‹ï¼Œæ‰¾åˆ°ä½ çš„ä¸šåŠ¡ä»£ç </li>
</ol>
<h3 data-id="heading-16">ğŸŒŸ é«˜çº§æŠ€å·§ï¼šå¦‚ä½•å¿«é€Ÿåˆ¤æ–­æ˜¯é”äº‰ç”¨ï¼Ÿ</h3>
<p>åœ¨traces.txtä¸­æœç´¢ï¼š</p>
<pre><code class="hljs language-css" lang="css">waiting <span class="hljs-selector-tag">to</span> lock &lt;<span class="hljs-number">0</span>x12345678&gt; (<span class="hljs-selector-tag">a</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.MyClass</span>)
</code></pre>
<p>å’Œ</p>
<pre><code class="hljs language-css" lang="css">locked &lt;<span class="hljs-number">0</span>x12345678&gt; (<span class="hljs-selector-tag">a</span> com<span class="hljs-selector-class">.example</span><span class="hljs-selector-class">.MyClass</span>)
</code></pre>
<p>å¦‚æœåŒæ—¶å‡ºç°è¿™ä¸¤è¡Œï¼ŒåŸºæœ¬å¯ä»¥ç¡®å®šæ˜¯<strong>æ­»é”</strong>æˆ–<strong>é”äº‰ç”¨</strong>å¯¼è‡´çš„ANRã€‚</p>
<h3 data-id="heading-17">ğŸ’¬ æˆ‘çš„å»ºè®®</h3>
<p>ä¸‹æ¬¡é‡åˆ°ANRï¼Œåˆ«æ€¥ç€çŒœï¼Œå…ˆæŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š</p>
<ol>
<li>ç”¨<code>adb pull /data/anr/traces.txt</code>å¯¼å‡ºæ—¥å¿—</li>
<li>ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ï¼Œæœç´¢"main"</li>
<li>æ‰¾åˆ°çº¿ç¨‹çŠ¶æ€å’Œä¸šåŠ¡ä»£ç æ ˆ</li>
<li>æ ¹æ®é”ä¿¡æ¯å®šä½é—®é¢˜</li>
</ol>
<p><strong>è®°ä½</strong>ï¼šANRçš„æœ¬è´¨æ˜¯ä¸»çº¿ç¨‹è¢«é˜»å¡ï¼Œè€Œtraces.txtå°±æ˜¯ä½ çš„"Xå…‰ç‰‡"ï¼Œèƒ½è®©ä½ çœ‹åˆ°é—®é¢˜æ‰€åœ¨ã€‚</p>
<h2 data-id="heading-18">ğŸ“± Android ANRç±»å‹è¯¦è§£ä¸åˆ†æï¼ˆé™„çœŸå®æ¡ˆä¾‹ï¼‰</h2>
<p>å—¨ï¼æˆ‘ç‰¹åˆ«å–œæ¬¢åˆ†æANRé—®é¢˜ï¼Œå› ä¸ºè¿™æ˜¯è®©åº”ç”¨æ›´æµç•…çš„å…³é”®ã€‚ä¸‹é¢æˆ‘æ¥ä¸ºä½ è¯¦ç»†è®²è§£æ¯ç§ANRç±»å‹çš„ç¤ºä¾‹å’Œåˆ†æï¼Œå¸®ä½ å½»åº•ç†è§£å®ƒä»¬çš„æˆå› å’Œè§£å†³æ–¹æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-19">ğŸ”¥ 1. è¾“å…¥è°ƒåº¦ANRï¼ˆæœ€å¸¸è§ï¼Œ5ç§’è¶…æ—¶ï¼‰</h3>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šä¸»çº¿ç¨‹å¤„ç†æŒ‰é”®/è§¦æ‘¸äº‹ä»¶è¶…è¿‡<strong>5ç§’</strong>ï¼ˆå‰å°åº”ç”¨ï¼‰</p>
<h4 data-id="heading-20">ğŸ“Œ ç¤ºä¾‹ï¼šMainActivityä¸­æ‰§è¡Œè€—æ—¶æ•°æ®åº“æ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MainActivity.java</span>
<span class="hljs-meta">@Override</span>
<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
    <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    
    <span class="hljs-comment">// è€—æ—¶æ“ä½œï¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œæ•°æ®åº“æŸ¥è¯¢ï¼ˆéœ€è¦3ç§’ï¼‰</span>
    List&lt;User&gt; users = database.getAllUsers(); <span class="hljs-comment">// è¿™ä¸ªæŸ¥è¯¢éœ€è¦2ç§’</span>
    <span class="hljs-comment">// ä¹‹åçš„æ“ä½œ...</span>
}
</code></pre>
<h4 data-id="heading-21">ğŸ“œ æ—¥å¿—å…³é”®ç‰‡æ®µï¼ˆtraces.txtï¼‰ï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Waiting
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0</span>x73f44000 self=<span class="hljs-number">0</span>x7f2c120000
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">12349</span> nice=<span class="hljs-number">0</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7f2c12d6d0
  | <span class="hljs-attr">state</span>=WAITING (sleeping) gp=<span class="hljs-number">0</span>x0 tid=<span class="hljs-number">1</span>
  | <span class="hljs-attr">stack</span>=<span class="hljs-number">0</span>x7fffe80000-<span class="hljs-number">0</span>x7fffe82000 stackSize=<span class="hljs-number">1040</span>KB
  | held <span class="hljs-attr">mutexes</span>=
  at java.lang.Object.wait(Native Method)
  - waiting on &lt;0x0a7c1234&gt; (a java.lang.Object)
  at com.example.app.MainActivity.onCreate(MainActivity.java:25)
  at android.app.Activity.performCreate(Activity.java:7825)
  ...
</code></pre>
<h4 data-id="heading-22">ğŸ” é—®é¢˜åˆ†æï¼š</h4>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼šä¸»çº¿ç¨‹åœ¨<code>MainActivity.onCreate</code>ç¬¬25è¡Œç­‰å¾…æ•°æ®åº“æŸ¥è¯¢</li>
<li><strong>æ ¹æœ¬åŸå› </strong>ï¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œäº†è€—æ—¶çš„æ•°æ®åº“æ“ä½œ</li>
<li><strong>ä¸ºä»€ä¹ˆæ˜¯ANR</strong>ï¼šç³»ç»Ÿæ£€æµ‹åˆ°ä¸»çº¿ç¨‹åœ¨5ç§’å†…æœªå“åº”è¾“å…¥äº‹ä»¶ï¼ˆç”¨æˆ·å¯èƒ½åœ¨ç­‰å¾…ç•Œé¢åŠ è½½å®Œæˆï¼‰</li>
</ul>
<h4 data-id="heading-23">ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ­£ç¡®åšæ³•ï¼šå°†æ•°æ®åº“æŸ¥è¯¢ç§»åˆ°å­çº¿ç¨‹</span>
<span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
    List&lt;User&gt; users = database.getAllUsers();
    runOnUiThread(() -&gt; {
        <span class="hljs-comment">// æ›´æ–°UI</span>
        setupUI(users);
    });
}).start();
</code></pre>
<blockquote>
<p>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šé¿å…åœ¨ä¸»çº¿ç¨‹æ‰§è¡Œä»»ä½•I/Oæ“ä½œï¼ˆæ•°æ®åº“ã€ç½‘ç»œã€æ–‡ä»¶è¯»å†™ï¼‰ï¼Œä½¿ç”¨<code>AsyncTask</code>ã€<code>HandlerThread</code>æˆ–<code>Coroutines</code>å¤„ç†</p>
</blockquote>
<hr/>
<h3 data-id="heading-24">ğŸ“± 2. å¹¿æ’­æ¥æ”¶å™¨ANRï¼ˆå‰å°å¹¿æ’­10ç§’ï¼Œåå°å¹¿æ’­60ç§’ï¼‰</h3>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼š<code>onReceive()</code>æ–¹æ³•æ‰§è¡Œè¶…è¿‡<strong>10ç§’</strong>ï¼ˆå‰å°å¹¿æ’­ï¼‰æˆ–<strong>60ç§’</strong>ï¼ˆåå°å¹¿æ’­ï¼‰</p>
<h4 data-id="heading-25">ğŸ“Œ ç¤ºä¾‹ï¼šBroadcastReceiverä¸­æ‰§è¡Œç½‘ç»œè¯·æ±‚</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBroadcastReceiver.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBroadcastReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BroadcastReceiver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceive</span><span class="hljs-params">(Context context, Intent intent)</span> {
        <span class="hljs-comment">// è€—æ—¶æ“ä½œï¼šåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼ˆéœ€è¦8ç§’ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> performNetworkRequest(); <span class="hljs-comment">// ç½‘ç»œè¯·æ±‚éœ€è¦8ç§’</span>
    }
}
</code></pre>
<h4 data-id="heading-26">ğŸ“œ æ—¥å¿—å…³é”®ç‰‡æ®µï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Waiting
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0</span>x73f44000 self=<span class="hljs-number">0</span>x7f2c120000
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">12349</span> nice=<span class="hljs-number">0</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7f2c12d6d0
  | <span class="hljs-attr">state</span>=WAITING (sleeping) gp=<span class="hljs-number">0</span>x0 tid=<span class="hljs-number">1</span>
  | <span class="hljs-attr">stack</span>=<span class="hljs-number">0</span>x7fffe80000-<span class="hljs-number">0</span>x7fffe82000 stackSize=<span class="hljs-number">1040</span>KB
  | held <span class="hljs-attr">mutexes</span>=
  at java.lang.Object.wait(Native Method)
  - waiting on &lt;0x0a7c1234&gt; (a java.lang.Object)
  at android.content.BroadcastReceiver.onReceive(BroadcastReceiver.java:123)
  at com.example.app.MyBroadcastReceiver.onReceive(MyBroadcastReceiver.java:15)
  ...
</code></pre>
<h4 data-id="heading-27">ğŸ” é—®é¢˜åˆ†æï¼š</h4>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼š<code>MyBroadcastReceiver.onReceive</code>ç¬¬15è¡Œæ‰§è¡Œäº†è€—æ—¶ç½‘ç»œè¯·æ±‚</li>
<li><strong>ä¸ºä»€ä¹ˆæ˜¯ANR</strong>ï¼šå‰å°å¹¿æ’­è¶…æ—¶10ç§’ï¼Œè¿™é‡Œæ‰§è¡Œäº†8ç§’æ“ä½œï¼ˆå¦‚æœè¶…è¿‡10ç§’å°±è§¦å‘ANRï¼‰</li>
<li><strong>é™·é˜±</strong>ï¼šå¾ˆå¤šäººä»¥ä¸ºä½¿ç”¨<code>goAsync()</code>å°±èƒ½è§£å†³ï¼Œä½†<strong>å¿˜è®°è°ƒç”¨<code>PendingResult.finish()</code></strong></li>
</ul>
<h4 data-id="heading-28">ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyBroadcastReceiver</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BroadcastReceiver</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onReceive</span><span class="hljs-params">(Context context, Intent intent)</span> {
        <span class="hljs-keyword">final</span> <span class="hljs-type">PendingResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> goAsync(); <span class="hljs-comment">// å¼€å¯å¼‚æ­¥å¤„ç†</span>
        
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">String</span> <span class="hljs-variable">resultData</span> <span class="hljs-operator">=</span> performNetworkRequest();
                <span class="hljs-comment">// å¤„ç†ç»“æœ</span>
            } <span class="hljs-keyword">finally</span> {
                result.finish(); <span class="hljs-comment">// å¿…é¡»è°ƒç”¨ï¼Œå¦åˆ™ä¼šä¸€ç›´ç­‰å¾…</span>
            }
        }).start();
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>é‡è¦æç¤º</strong>ï¼š<code>goAsync()</code>åªæ˜¯å¼€å¯å¼‚æ­¥å¤„ç†ï¼Œä½†<strong>å¹¿æ’­æ€»æ‰§è¡Œæ—¶é—´ä»å—è¶…æ—¶é™åˆ¶</strong>ï¼ˆå‰å°10ç§’ï¼Œåå°60ç§’ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-29">âš™ï¸ 3. æœåŠ¡ANRï¼ˆå‰å°æœåŠ¡20ç§’ï¼Œåå°æœåŠ¡200ç§’ï¼‰</h3>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼š<code>onCreate()</code>ã€<code>onStartCommand()</code>ç­‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æ‰§è¡Œè¶…è¿‡<strong>20ç§’</strong>ï¼ˆå‰å°æœåŠ¡ï¼‰æˆ–<strong>200ç§’</strong>ï¼ˆåå°æœåŠ¡ï¼‰</p>
<h4 data-id="heading-30">ğŸ“Œ ç¤ºä¾‹ï¼šServiceä¸­æ‰§è¡Œæ–‡ä»¶æ“ä½œ</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyService.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">onStartCommand</span><span class="hljs-params">(Intent intent, <span class="hljs-type">int</span> flags, <span class="hljs-type">int</span> startId)</span> {
        <span class="hljs-comment">// è€—æ—¶æ“ä½œï¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¯»å–å¤§æ–‡ä»¶ï¼ˆéœ€è¦15ç§’ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> readFile(<span class="hljs-string">"large_file.txt"</span>);
        <span class="hljs-keyword">return</span> START_STICKY;
    }
    
    <span class="hljs-keyword">private</span> String <span class="hljs-title function_">readFile</span><span class="hljs-params">(String fileName)</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šè¯»å–å¤§æ–‡ä»¶</span>
    }
}
</code></pre>
<h4 data-id="heading-31">ğŸ“œ æ—¥å¿—å…³é”®ç‰‡æ®µï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Waiting
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0</span>x73f44000 self=<span class="hljs-number">0</span>x7f2c120000
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">12349</span> nice=<span class="hljs-number">0</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7f2c12d6d0
  | <span class="hljs-attr">state</span>=WAITING (sleeping) gp=<span class="hljs-number">0</span>x0 tid=<span class="hljs-number">1</span>
  | <span class="hljs-attr">stack</span>=<span class="hljs-number">0</span>x7fffe80000-<span class="hljs-number">0</span>x7fffe82000 stackSize=<span class="hljs-number">1040</span>KB
  | held <span class="hljs-attr">mutexes</span>=
  at java.lang.Object.wait(Native Method)
  - waiting on &lt;0x0a7c1234&gt; (a java.lang.Object)
  at com.example.app.MyService.onStartCommand(MyService.java:22)
  at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:3590)
  ...
</code></pre>
<h4 data-id="heading-32">ğŸ” é—®é¢˜åˆ†æï¼š</h4>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼š<code>MyService.onStartCommand</code>ç¬¬22è¡Œæ‰§è¡Œäº†è€—æ—¶çš„æ–‡ä»¶æ“ä½œ</li>
<li><strong>ä¸ºä»€ä¹ˆæ˜¯ANR</strong>ï¼šå‰å°æœåŠ¡è¶…æ—¶20ç§’ï¼Œè¿™é‡Œæ‰§è¡Œäº†15ç§’æ“ä½œï¼ˆå¦‚æœè¶…è¿‡20ç§’å°±è§¦å‘ANRï¼‰</li>
<li><strong>å¸¸è§è¯¯è§£</strong>ï¼šä»¥ä¸ºæœåŠ¡åœ¨åå°è¿è¡Œï¼Œæ‰€ä»¥å¯ä»¥é•¿æ—¶é—´æ‰§è¡Œ</li>
</ul>
<h4 data-id="heading-33">ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Service</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">onStartCommand</span><span class="hljs-params">(Intent intent, <span class="hljs-type">int</span> flags, <span class="hljs-type">int</span> startId)</span> {
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            <span class="hljs-type">String</span> <span class="hljs-variable">content</span> <span class="hljs-operator">=</span> readFile(<span class="hljs-string">"large_file.txt"</span>);
            <span class="hljs-comment">// å¤„ç†æ–‡ä»¶å†…å®¹</span>
        }).start();
        
        <span class="hljs-keyword">return</span> START_STICKY;
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>æœ€ä½³å®è·µ</strong>ï¼šæœåŠ¡ä¸­çš„ä»»ä½•è€—æ—¶æ“ä½œéƒ½åº”ç§»è‡³å­çº¿ç¨‹ï¼Œé¿å…é˜»å¡ä¸»çº¿ç¨‹</p>
</blockquote>
<hr/>
<h3 data-id="heading-34">ğŸ–¼ï¸ 4. æ— èšç„¦çª—å£ANRï¼ˆ5ç§’è¶…æ—¶ï¼‰</h3>
<p><strong>è§¦å‘æ¡ä»¶</strong>ï¼šåº”ç”¨æ— æ³•æ‰¾åˆ°èšç„¦çª—å£ï¼ˆé€šå¸¸æ˜¯åº”ç”¨å¯åŠ¨æ…¢ï¼Œæ— æ³•ç»˜åˆ¶ç¬¬ä¸€å¸§ï¼‰</p>
<h4 data-id="heading-35">ğŸ“Œ ç¤ºä¾‹ï¼šå¯åŠ¨Activityæ—¶æ‰§è¡Œå¤æ‚è®¡ç®—</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// SplashActivity.java</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SplashActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);
        
        <span class="hljs-comment">// è€—æ—¶æ“ä½œï¼šåœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œå¤æ‚è®¡ç®—ï¼ˆéœ€è¦4ç§’ï¼‰</span>
        performComplexCalculation(); <span class="hljs-comment">// éœ€è¦4ç§’</span>
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">performComplexCalculation</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// å®é™…å®ç°ï¼šå¤æ‚è®¡ç®—</span>
    }
}
</code></pre>
<h4 data-id="heading-36">ğŸ“œ æ—¥å¿—å…³é”®ç‰‡æ®µï¼š</h4>
<pre><code class="hljs language-ini" lang="ini">"main" <span class="hljs-attr">prio</span>=<span class="hljs-number">5</span> tid=<span class="hljs-number">1</span> Waiting
  | <span class="hljs-attr">group</span>=<span class="hljs-string">"main"</span> sCount=<span class="hljs-number">1</span> dsCount=<span class="hljs-number">0</span> obj=<span class="hljs-number">0</span>x73f44000 self=<span class="hljs-number">0</span>x7f2c120000
  | <span class="hljs-attr">sysTid</span>=<span class="hljs-number">12349</span> nice=<span class="hljs-number">0</span> cgrp=default sched=<span class="hljs-number">0</span>/<span class="hljs-number">0</span> handle=<span class="hljs-number">0</span>x7f2c12d6d0
  | <span class="hljs-attr">state</span>=WAITING (sleeping) gp=<span class="hljs-number">0</span>x0 tid=<span class="hljs-number">1</span>
  | <span class="hljs-attr">stack</span>=<span class="hljs-number">0</span>x7fffe80000-<span class="hljs-number">0</span>x7fffe82000 stackSize=<span class="hljs-number">1040</span>KB
  | held <span class="hljs-attr">mutexes</span>=
  at java.lang.Object.wait(Native Method)
  - waiting on &lt;0x0a7c1234&gt; (a java.lang.Object)
  at com.example.app.SplashActivity.onCreate(SplashActivity.java:25)
  at android.app.Activity.performCreate(Activity.java:7825)
  ...
</code></pre>
<h4 data-id="heading-37">ğŸ” é—®é¢˜åˆ†æï¼š</h4>
<ul>
<li><strong>å…³é”®ç‚¹</strong>ï¼š<code>SplashActivity.onCreate</code>ç¬¬25è¡Œæ‰§è¡Œäº†è€—æ—¶è®¡ç®—</li>
<li><strong>ä¸ºä»€ä¹ˆæ˜¯ANR</strong>ï¼šåº”ç”¨æ— æ³•åœ¨5ç§’å†…ç»˜åˆ¶ç¬¬ä¸€å¸§ï¼Œç³»ç»Ÿæ‰¾ä¸åˆ°èšç„¦çª—å£</li>
<li><strong>ç³»ç»Ÿæœºåˆ¶</strong>ï¼šç³»ç»Ÿä¼šå°è¯•å†»ç»“åº”ç”¨ï¼ˆ"LcdOff"ï¼‰ï¼Œ5ç§’åè¾“å…¥äº‹ä»¶è¶…æ—¶</li>
</ul>
<h4 data-id="heading-38">ğŸ’¡ è§£å†³æ–¹æ¡ˆï¼š</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SplashActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_splash);
        
        <span class="hljs-comment">// å°†å¤æ‚è®¡ç®—ç§»è‡³å­çº¿ç¨‹</span>
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(() -&gt; {
            performComplexCalculation();
            runOnUiThread(() -&gt; {
                <span class="hljs-comment">// è·³è½¬åˆ°ä¸»ç•Œé¢</span>
                startActivity(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(<span class="hljs-built_in">this</span>, MainActivity.class));
                finish();
            });
        }).start();
    }
}
</code></pre>
<blockquote>
<p>âœ… <strong>ä¼˜åŒ–å»ºè®®</strong>ï¼šä½¿ç”¨<code>SplashScreen</code> APIä¼˜åŒ–å¯åŠ¨è¿‡ç¨‹ï¼Œé¿å…åœ¨<code>onCreate</code>ä¸­åšå¤æ‚è®¡ç®—</p>
</blockquote>
<hr/>
<h3 data-id="heading-39">ğŸ§  é€šç”¨ANRè¯Šæ–­æµç¨‹ï¼ˆå››æ­¥æ³•ï¼‰</h3>
<ol>
<li>
<p><strong>è·å–traces.txt</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">adb pull /data/anr/traces.txt ./anr_traces.log
</code></pre>
</li>
<li>
<p><strong>æœç´¢å…³é”®çº¿ç´¢</strong>ï¼š</p>
<ul>
<li>æœç´¢<code>"main"</code>ï¼ˆä¸»çº¿ç¨‹ï¼‰</li>
<li>æœç´¢<code>"Waiting"</code>/<code>"BLOCKED"</code>ï¼ˆçº¿ç¨‹çŠ¶æ€ï¼‰</li>
<li>æœç´¢<code>"at com.example"</code>ï¼ˆä¸šåŠ¡ä»£ç ä½ç½®ï¼‰</li>
</ul>
</li>
<li>
<p><strong>åˆ†æçº¿ç¨‹çŠ¶æ€</strong>ï¼š</p>
<ul>
<li><code>WAITING</code>ï¼šç­‰å¾…èµ„æºï¼ˆå¦‚é”ï¼‰</li>
<li><code>BLOCKED</code>ï¼šè¢«å…¶ä»–çº¿ç¨‹é˜»å¡</li>
<li><code>TIMED_WAITING</code>ï¼šå¸¦è¶…æ—¶ç­‰å¾…</li>
</ul>
</li>
<li>
<p><strong>å®šä½é—®é¢˜æ ¹æº</strong>ï¼š</p>
<ul>
<li>æŸ¥çœ‹ä¸šåŠ¡ä»£ç ä½ç½®ï¼ˆå¦‚<code>MainActivity.java:25</code>ï¼‰</li>
<li>æ£€æŸ¥æ˜¯å¦æœ‰åŒæ­¥é”ã€I/Oæ“ä½œæˆ–å¤æ‚è®¡ç®—</li>
</ul>
</li>
</ol>
<hr/>
<h3 data-id="heading-40">ğŸ’¡ ä¸ºä»€ä¹ˆè¿™äº›ANRè¿™ä¹ˆé‡è¦ï¼Ÿ</h3>
<ul>
<li><strong>ç”¨æˆ·æ„ŸçŸ¥çš„ANRå‘ç”Ÿç‡</strong>æ˜¯Google Playçš„æ ¸å¿ƒæŒ‡æ ‡</li>
<li>è¶…è¿‡**0.47%**çš„ç”¨æˆ·æ„ŸçŸ¥ANRä¼šå¯¼è‡´åº”ç”¨æ›å…‰åº¦é™ä½</li>
<li>ç”šè‡³å¯èƒ½å½±å“åº”ç”¨åœ¨Google Playçš„æ’å</li>
</ul>
<blockquote>
<p>ğŸŒŸ <strong>è®°ä½</strong>ï¼šANRçš„æ ¸å¿ƒæ˜¯<strong>ä¸»çº¿ç¨‹è¢«é˜»å¡</strong>ï¼Œæ‰€æœ‰ä¼˜åŒ–éƒ½å›´ç»•"è®©ä¸»çº¿ç¨‹ä¿æŒå“åº”"è¿™ä¸ªåŸåˆ™ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-41">ğŸŒŸ æœ€åå°è´´å£«</h3>
<ul>
<li><strong>StrictMode</strong>ï¼šåœ¨å¼€å‘é˜¶æ®µä½¿ç”¨StrictModeæ£€æµ‹ä¸»çº¿ç¨‹I/Oæ“ä½œ</li>
<li><strong>Android Studio Profiler</strong>ï¼šå®æ—¶ç›‘æ§ä¸»çº¿ç¨‹æ´»åŠ¨</li>
<li><strong>Perfetto</strong>ï¼šåŒºåˆ†ç³»ç»Ÿé—®é¢˜å’Œåº”ç”¨é—®é¢˜</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ESM (æ”¾åˆ°æ‰“åŒ…é‡Œ import) å’Œ IIFE (URL åŠ¨æ€ loadScript)]]></title>    <link>https://juejin.cn/post/7576468602304348198</link>    <guid>https://juejin.cn/post/7576468602304348198</guid>    <pubDate>2025-11-25T07:25:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576468602304348198" data-draft-id="7576218673050189875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ESM (æ”¾åˆ°æ‰“åŒ…é‡Œ import) å’Œ IIFE (URL åŠ¨æ€ loadScript) "/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-25T07:25:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="DcTbnk"/> <meta itemprop="url" content="https://juejin.cn/user/2796746682930807"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ESM (æ”¾åˆ°æ‰“åŒ…é‡Œ import) å’Œ IIFE (URL åŠ¨æ€ loadScript) 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2796746682930807/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    DcTbnk
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:25:42.000Z" title="Tue Nov 25 2025 07:25:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">åœ¨çº¿èµ„æºé“¾æ¥æŸ¥æ‰¾</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsdelivr.com%2F" target="_blank" title="https://www.jsdelivr.com/" ref="nofollow noopener noreferrer">www.jsdelivr.com/</a>
å¯ä»¥åœ¨é¡µé¢ä¸­è‡ªå·±è¿›è¡Œæœç´¢</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/912fb1d63044425b9cf5cc8a13c89d59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRGNUYm5r:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764660341&amp;x-signature=MfFyUmjD3Lv1RiVo4vvI3AtFvkw%3D" alt="image.png" loading="lazy"/></p>
<p>åŒä¸€ä¸ªåº“çš„ä¸¤ç§æ‰“åŒ…å½¢å¼ï¼š</p>
<ul>
<li>
<p><strong>ESM</strong>ï¼šä¸€ç§â€œæœ‰ import / export è¯­æ³•â€çš„æ¨¡å—å†™æ³•</p>
</li>
<li>
<p><strong>IIFE</strong>ï¼šä¸€ç§â€œè‡ªæ‰§è¡Œå‡½æ•°+æŒ‚åˆ°å…¨å±€å˜é‡â€çš„è€å¼å†™æ³•</p>
</li>
</ul>
<h3 data-id="heading-1">1ï¸âƒ£ ESM æ˜¯å•¥ï¼Ÿ</h3>
<p><strong>ESM = ES Module = ES6 æ¨¡å—å†™æ³•</strong></p>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<p>ç”¨ <code>import</code> / <code>export</code> å†™çš„é‚£ç§ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElementPlusIconsVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>
</code></pre>
</li>
<li>
<p>æµè§ˆå™¨é‡Œè¦ä¹ˆç”¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"main.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
</li>
<li>
<p>è¦ä¹ˆåœ¨æ‰“åŒ…å·¥å…·ä¸­ä½¿ç”¨ï¼ˆVite / Webpack / Rollup éƒ½æ‡‚ ESMï¼‰</p>
</li>
<li>
<p>ä»£ç ä¸ä¼šè‡ªåŠ¨æŒ‚åˆ° <code>window</code> ä¸Šï¼Œæ¯ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªæ¨¡å—ä½œç”¨åŸŸ</p>
</li>
</ul>
<p>æ‰€ä»¥ï¼š</p>
<blockquote>
<p><strong>â€œESM å†™æ³•è¦ import * as ElementPlusIconsVueâ€</strong><br/>
å°±æ˜¯å› ä¸ºè¿™ä¸ªç‰ˆæœ¬æ˜¯æŒ‰ ESM è§„èŒƒæ‰“åŒ…çš„ï¼Œåªèƒ½é€šè¿‡ <code>import</code> åŠ è½½ã€‚</p>
</blockquote>
<h3 data-id="heading-2">2ï¸âƒ£ IIFE æ˜¯å•¥ï¼Ÿ</h3>
<p><strong>IIFE = Immediately Invoked Function Expression = ç«‹å³æ‰§è¡Œå‡½æ•°è¡¨è¾¾å¼</strong></p>
<p>å…¸å‹é•¿è¿™æ ·ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä¸€å †åº“çš„ä»£ç </span>
  <span class="hljs-comment">// æœ€åæŠŠä¸œè¥¿æŒ‚åˆ° window ä¸Š</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">ElementPlusIconsVue</span> = { ... }
})();
</code></pre>
<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>ä¸€åŠ è½½ <code>&lt;script src="icons-vue.iife.min.js"&gt;&lt;/script&gt;</code>ï¼Œå‡½æ•°å°±<strong>ç«‹å³æ‰§è¡Œ</strong></li>
<li>æ‰§è¡Œæ—¶ä¼šå¾€ <code>window</code> ä¸ŠæŒ‚ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ¯”å¦‚ <code>window.ElementPlusIconsVue</code></li>
<li>ä¸éœ€è¦ <code>import</code> / <code>export</code>ï¼Œé€‚åˆ<strong>ä¸ç”¨æ‰“åŒ…å·¥å…·ã€ç›´æ¥ script æ ‡ç­¾å¼•å…¥</strong>çš„åœºæ™¯</li>
</ul>
<p>æ‰€ä»¥ Element Plus ä¼šæä¾›ä¸€ä¸ªï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/@element-plus/icons-vue/dist/icons-vue.iife.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>ç„¶åä½ åœ¨ä»£ç é‡Œå°±å¯ä»¥ç›´æ¥ç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> icons = <span class="hljs-variable language_">window</span>.<span class="hljs-property">ElementPlusIconsVue</span>
<span class="hljs-comment">// æˆ–è€…æœ‰äº›åº“ç›´æ¥æŒ‚åˆ°å…¨å±€å˜é‡ ElementPlusIconsVue</span>
</code></pre>
<blockquote>
<p><strong>â€œIIFE å†™æ³•è¦åŠ è½½ icons-vue.iife.min.jsâ€</strong><br/>
æ„æ€å°±æ˜¯è¿™ä¸ªæ–‡ä»¶æœ¬èº«æ˜¯ä¸€ä¸ª IIFEï¼ŒåŠ è½½ååº“ä¼šè‡ªåŠ¨æŒ‚åœ¨ <code>window</code> ä¸Šã€‚</p>
</blockquote>
<h3 data-id="heading-3">3ï¸âƒ£ å’Œä½ ç°åœ¨çš„ä½¿ç”¨åœºæ™¯æ€ä¹ˆå¯¹åº”ï¼Ÿ</h3>
<p>ä½ ç°åœ¨æ˜¯<strong>è„šæœ¬çŒ« + åœ¨ç°æœ‰ç½‘é¡µé‡Œæ’ Vue3 / Element Plus</strong>ï¼š</p>
<ul>
<li>
<p>å¦‚æœä½ æ˜¯<strong>è‡ªå·±ç”¨ Vite æ‰“åŒ…ä¸€ä¸ª userscript</strong>ï¼Œé‚£ä½ å°±å†™ <strong>ESM</strong> ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">ElementPlusIconsVue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@element-plus/icons-vue'</span>
</code></pre>
</li>
<li>
<p>å¦‚æœä½ æ˜¯<strong>åœ¨ç½‘é¡µé‡ŒåŠ¨æ€ç”¨ <code>&lt;script&gt;</code> åŠ è¿œç¨‹èµ„æº</strong>ï¼ˆunpkg / è‡ªå·±é™æ€èµ„æºï¼‰ï¼Œ<br/>
æ²¡æœ‰æ‰“åŒ…ï¼Œä¹Ÿæ²¡æœ‰ <code>type="module"</code>ï¼Œé‚£å°±ç”¨ <strong>IIFE</strong> ç‰ˆæœ¬ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">".../vue.global.prod.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">".../element-plus.iife.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">".../icons-vue.iife.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// è¿™æ—¶å€™ä¸€èˆ¬ä¼šæœ‰å…¨å±€å˜é‡ ElementPlus, ElementPlusIconsVue</span>
  <span class="hljs-keyword">const</span> app = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">createApp</span>({...})
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, component] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-title class_">ElementPlusIconsVue</span>)) {
    app.<span class="hljs-title function_">component</span>(key, component)
  }
  app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">ElementPlus</span>)
  app.<span class="hljs-title function_">mount</span>(<span class="hljs-string">'#app'</span>)
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-4">4ï¸âƒ£ ä¸€å¥è¯å¯¹æ¯”è®°å¿†</h3>
</li>
<li>
<p><strong>ESM</strong>ï¼š<br/>
ğŸ‘‰ æ¨¡å—åŒ–æ–°æ ‡å‡†ï¼Œ<code>import / export</code>ï¼Œé…åˆæ‰“åŒ…å·¥å…· / <code>&lt;script type="module"&gt;</code>ã€‚</p>
</li>
<li>
<p><strong>IIFE</strong>ï¼š<br/>
ğŸ‘‰ â€œä¸€åŠ è½½å°±æ‰§è¡Œâ€çš„è€æ´¾æ‰“åŒ…å½¢å¼ï¼Œè‡ªåŠ¨æŠŠä¸œè¥¿ä¸¢åˆ° <code>window.xxx</code> ä¸Šï¼Œé€‚åˆç›´æ¥ <code>&lt;script&gt;</code> å¼•å…¥ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯æ¶æ„å¸ˆè§†è§’ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªâ€œç«™ç¨³å¤šç«¯â€çš„è·¨ç«¯ä½“ç³»ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576212547236053035</link>    <guid>https://juejin.cn/post/7576212547236053035</guid>    <pubDate>2025-11-25T07:31:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576212547236053035" data-draft-id="7576276707331375110" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯æ¶æ„å¸ˆè§†è§’ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªâ€œç«™ç¨³å¤šç«¯â€çš„è·¨ç«¯ä½“ç³»ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-25T07:31:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯æ¶æ„å¸ˆè§†è§’ï¼šå¦‚ä½•è®¾è®¡ä¸€ä¸ªâ€œç«™ç¨³å¤šç«¯â€çš„è·¨ç«¯ä½“ç³»ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:31:05.000Z" title="Tue Nov 25 2025 07:31:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>â€œåœ¨æˆ‘ä»¬å›¢é˜Ÿå†…éƒ¨ï¼Œè·¨ç«¯æ¶æ„è®¾è®¡ä»æ¥ä¸æ˜¯ä¸€ä¸ªå•çº¯çš„æŠ€æœ¯é€‰å‹é—®é¢˜ï¼Œè€Œæ˜¯ä¸€åœºå…³äº<strong>ç”¨æˆ·ä½“éªŒã€å¼€å‘æ•ˆç‡ã€æŠ€æœ¯å€ºåŠ¡ä¸å›¢é˜Ÿèƒ½åŠ›</strong>çš„å››æ–¹åšå¼ˆã€‚â€</p>
<p>â€œä»Šå¤©ï¼Œæˆ‘ä»¬ä¸åªèŠæ¡†æ¶ï¼Œè€Œæ˜¯èŠä¸€èŠï¼š<strong>å¦‚æœä½ æ˜¯ä¸€åå‰ç«¯æ¶æ„å¸ˆï¼Œä½ ä¼šå¦‚ä½•ç³»ç»Ÿæ€§åœ°è®¾è®¡ä¸€å¥—è·¨ç«¯ä½“ç³»ï¼Ÿ</strong>â€</p>
<h2 data-id="heading-1">ä¸€ã€æ¶æ„èµ·ç‚¹ï¼šä»ä¸šåŠ¡åœºæ™¯å‡ºå‘ï¼Œè€ŒéæŠ€æœ¯æ½®æµ</h2>
<p>è·¨ç«¯æ¶æ„çš„ç¬¬ä¸€åŸåˆ™æ˜¯ï¼š<strong>æ²¡æœ‰æœ€å¥½çš„æ–¹æ¡ˆï¼Œåªæœ‰æœ€é€‚é…ä¸šåŠ¡çš„æ–¹æ¡ˆã€‚</strong></p>
<p>æˆ‘ä¼šä»ä»¥ä¸‹å‡ ä¸ªç»´åº¦åˆ‡å…¥ï¼Œå®šä¹‰ä¸šåŠ¡çš„â€œè·¨ç«¯ç”»åƒâ€ï¼š</p>
<ol>
<li>
<p><strong>ç”¨æˆ·ç«¯åˆ†å¸ƒ</strong></p>
<ul>
<li>ä½ çš„ç”¨æˆ·ä¸»è¦åœ¨å“ªäº›å¹³å°ï¼ŸiOSã€Androidã€Webã€å¾®ä¿¡å°ç¨‹åºã€æ”¯ä»˜å®å°ç¨‹åºï¼Ÿ</li>
<li>å„ç«¯çš„ç”¨æˆ·é‡ã€ä½¿ç”¨é¢‘ç‡ã€æ ¸å¿ƒè¡Œä¸ºè·¯å¾„æ˜¯æ€æ ·çš„ï¼Ÿ</li>
</ul>
</li>
<li>
<p><strong>ä½“éªŒè¦æ±‚</strong></p>
<ul>
<li>æ˜¯å·¥å…·å‹åº”ç”¨ï¼ˆåé‡åŠŸèƒ½ï¼‰è¿˜æ˜¯å†…å®¹å‹åº”ç”¨ï¼ˆåé‡äº¤äº’ä¸åŠ¨æ•ˆï¼‰ï¼Ÿ</li>
<li>æ˜¯å¦éœ€è¦è°ƒç”¨å¤§é‡åŸç”Ÿèƒ½åŠ›ï¼ˆå¦‚æ‘„åƒå¤´ã€è“ç‰™ã€ä¼ æ„Ÿå™¨ï¼‰ï¼Ÿ</li>
</ul>
</li>
<li>
<p><strong>å›¢é˜Ÿç°çŠ¶</strong></p>
<ul>
<li>å›¢é˜Ÿç†Ÿæ‚‰Reactè¿˜æ˜¯Vueï¼Ÿæœ‰æ— åŸç”Ÿå¼€å‘ç»éªŒï¼Ÿ</li>
<li>æ˜¯å¦æœ‰èƒ½åŠ›ç»´æŠ¤å¤šå¥—ä»£ç ã€æˆ–æ­å»ºé…å¥—çš„å·¥ç¨‹åŒ–ä½“ç³»ï¼Ÿ</li>
</ul>
</li>
<li>
<p><strong>è¿­ä»£èŠ‚å¥</strong></p>
<ul>
<li>æ˜¯å¦éœ€è¦å¿«é€Ÿä¸Šçº¿ã€é¢‘ç¹å‘ç‰ˆï¼Ÿ</li>
<li>æ˜¯å¦ä¾èµ–çƒ­æ›´æ–°èƒ½åŠ›ï¼Ÿ</li>
</ul>
</li>
</ol>
<h2 data-id="heading-2">äºŒã€æ¶æ„åˆ†å±‚ï¼šä¸€ä¸ªè·¨ç«¯ç³»ç»Ÿçš„å››å±‚æ¨¡å‹</h2>
<p>æˆ‘ä¹ æƒ¯å°†è·¨ç«¯æ¶æ„åˆ’åˆ†ä¸ºå››ä¸ªå±‚æ¬¡ï¼Œä»ä¸‹è‡³ä¸Šä¾æ¬¡ä¸ºï¼š</p>
<h4 data-id="heading-3">1. <strong>æ¸²æŸ“å¼•æ“å±‚ï¼šå†³å®šUIçš„â€œåŸºå› â€</strong></h4>
<p>è¿™æ˜¯æœ€åº•å±‚ï¼Œå†³å®šäº†UIæ˜¯å¦‚ä½•è¢«ç»˜åˆ¶å‡ºæ¥çš„ã€‚</p>
<ul>
<li><strong>WebViewæ¸²æŸ“</strong>ï¼šé€‚ç”¨äºå†…å®¹å‹ã€è½»åº¦äº¤äº’åœºæ™¯</li>
<li><strong>åŸç”Ÿç»„ä»¶æ¸²æŸ“</strong>ï¼ˆRNï¼‰ï¼šé€‚åˆéœ€è¦åŸç”Ÿä½“éªŒä½†é€»è¾‘åé‡çš„åº”ç”¨</li>
<li><strong>è‡ªç»˜å¼•æ“</strong>ï¼ˆFlutterï¼‰ï¼šé€‚åˆå¼ºäº¤äº’ã€é«˜å®šåˆ¶UIçš„åœºæ™¯</li>
<li><strong>å°ç¨‹åºæ¸²æŸ“å®¹å™¨</strong>ï¼ˆTaro/UniAppï¼‰ï¼šé€‚åˆå¼ºä¾èµ–å°ç¨‹åºç”Ÿæ€çš„ä¸šåŠ¡</li>
</ul>
<p><strong>æ¶æ„å¸ˆæ€è€ƒ</strong>ï¼šä½ é€‰æ‹©çš„æ¸²æŸ“å¼•æ“ï¼Œå†³å®šäº†ä½ åº”ç”¨çš„<strong>æ€§èƒ½å¤©èŠ±æ¿</strong>ä¸<strong>ä¸€è‡´æ€§ä¸Šé™</strong>ã€‚</p>
<h4 data-id="heading-4">2. <strong>æ¡¥æ¥å±‚ï¼šæ‰“é€šç«¯èƒ½åŠ›çš„â€œå¤–äº¤å®˜â€</strong></h4>
<p>æ— è®ºé€‰å“ªç§æ–¹æ¡ˆï¼Œè°ƒç”¨åŸç”Ÿèƒ½åŠ›ï¼ˆå¦‚ç›¸æœºã€GPSï¼‰éƒ½éœ€è¦æ¡¥æ¥ã€‚</p>
<ul>
<li><strong>è®¾è®¡è¦ç‚¹</strong>ï¼š
<ul>
<li>æ¡¥æ¥æ¥å£çš„æŠ½è±¡ç¨‹åº¦ï¼ˆé€šç”¨æ€§ vs å®šåˆ¶æ€§ï¼‰</li>
<li>é€šä¿¡æ€§èƒ½ï¼ˆåŒæ­¥/å¼‚æ­¥ã€åºåˆ—åŒ–æ–¹å¼ï¼‰</li>
<li>é”™è¯¯å¤„ç†ä¸é™çº§ç­–ç•¥</li>
</ul>
</li>
</ul>
<h4 data-id="heading-5">3. <strong>ä¸šåŠ¡ç»„ä»¶å±‚ï¼šå¤šç«¯ä¸€è‡´çš„â€œè®¾è®¡ç³»ç»Ÿâ€</strong></h4>
<p>è¿™æ˜¯ä¿è¯UIä¸€è‡´æ€§çš„å…³é”®ã€‚</p>
<ul>
<li><strong>ç­–ç•¥</strong>ï¼š
<ul>
<li>åŸºäºè®¾è®¡è§„èŒƒï¼Œå°è£…è·¨ç«¯ä¸šåŠ¡ç»„ä»¶</li>
<li>åˆ¶å®šå¤šç«¯é€‚é…è§„åˆ™ï¼ˆå¸ƒå±€ã€å­—ä½“ã€å›¾æ ‡ï¼‰</li>
<li>å»ºç«‹è§†è§‰å›å½’æµ‹è¯•ï¼Œç¡®ä¿å„ç«¯è¡¨ç°ä¸€è‡´</li>
</ul>
</li>
</ul>
<h4 data-id="heading-6">4. <strong>å·¥ç¨‹ä½“ç³»å±‚ï¼šæ”¯æ’‘è·¨ç«¯ç ”å‘çš„â€œåŸºå»ºâ€</strong></h4>
<p>è¿™æ˜¯æœ€å®¹æ˜“è¢«å¿½è§†ã€å´æœ€èƒ½ä½“ç°æ¶æ„æ·±åº¦çš„ä¸€å±‚ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒç»„æˆ</strong>ï¼š
<ul>
<li>ç»Ÿä¸€æ„å»ºå¹³å°ï¼ˆç¼–è¯‘åˆ°å¤šç«¯ï¼‰</li>
<li>çƒ­æ›´æ–°å¹³å°ï¼ˆæ”¯æŒåŠ¨æ€å‘ç‰ˆï¼‰</li>
<li>ç›‘æ§ä½“ç³»ï¼ˆé”™è¯¯æ”¶é›†ã€æ€§èƒ½åˆ†æã€ç«¯åˆ°ç«¯è¿½è¸ªï¼‰</li>
<li>è°ƒè¯•å·¥å…·é“¾ï¼ˆçœŸæœºè°ƒè¯•ã€æ—¥å¿—æ”¶é›†ã€æ€§èƒ½ profilingï¼‰</li>
</ul>
</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€æ¶æ„å†³ç­–ï¼šå¦‚ä½•é€‰æ‹©ä½ çš„è·¨ç«¯è·¯å¾„ï¼Ÿ</h2>






























<table><thead><tr><th>ä¸šåŠ¡ç±»å‹</th><th>æ¨èæ¶æ„</th><th>ç†ç”±</th></tr></thead><tbody><tr><td>å†…å®¹å‹ã€è¿è¥æ´»åŠ¨ç±»</td><td>Taro/UniApp + WebView</td><td>å¼€å‘å¿«ã€æ˜“ä¸Šçº¿ã€ç¬¦åˆå°ç¨‹åºç”Ÿæ€</td></tr><tr><td>ä¸­å¤§å‹Appï¼Œå¼ºäº¤äº’</td><td>Flutter + åŸç”Ÿæ’æ§½</td><td>é«˜æ€§èƒ½ã€é«˜ä¸€è‡´æ€§ã€è‡ªå¸¦æ¸²æŸ“å¼•æ“</td></tr><tr><td>å·²æœ‰Reactå›¢é˜Ÿï¼Œä¸­åº¦ä½“éªŒè¦æ±‚</td><td>React Native + CodePush</td><td>ç”Ÿæ€æˆç†Ÿã€çƒ­æ›´æ–°çµæ´»ã€å­¦ä¹ æˆæœ¬ä½</td></tr><tr><td>é‡åº¦ä¾èµ–åŸç”Ÿèƒ½åŠ›</td><td>åŸç”Ÿ + è·¨ç«¯æ¸è¿›è¿ç§»</td><td>æ··åˆæ¶æ„ï¼Œæ ¸å¿ƒé¡µé¢åŸç”Ÿï¼Œéæ ¸å¿ƒè·¨ç«¯</td></tr></tbody></table>
<h2 data-id="heading-8">å››ã€æ¶æ„å¸ˆçš„éšè—è¯¾é¢˜ï¼šç¨³å®šæ€§ä¸é•¿æœŸæ¼”è¿›</h2>
<p>è·¨ç«¯æ¶æ„çš„â€œå‘â€å¾€å¾€ä¸åœ¨å¼€å‘æœŸï¼Œè€Œåœ¨ä¸Šçº¿åçš„ç»´æŠ¤ä¸æ¼”è¿›ã€‚</p>
<h4 data-id="heading-9">1. <strong>ä¸€è‡´æ€§ä¿éšœæœºåˆ¶</strong></h4>
<ul>
<li>å»ºç«‹<strong>å¤šç«¯UIå·¡æ£€</strong>ï¼Œè‡ªåŠ¨æˆªå›¾æ¯”å¯¹</li>
<li>åˆ¶å®š<strong>è·¨ç«¯äº¤äº’è§„èŒƒ</strong>ï¼Œç»Ÿä¸€åŠ¨æ•ˆã€åé¦ˆã€åŠ è½½çŠ¶æ€</li>
</ul>
<h4 data-id="heading-10">2. <strong>æ€§èƒ½é˜²å®ˆä½“ç³»</strong></h4>
<ul>
<li>è®¾ç½®<strong>ç«¯æ€§èƒ½åŸºçº¿</strong>ï¼Œä¾‹å¦‚ï¼šå¯åŠ¨æ—¶é—´ â‰¤ 1.5sï¼Œåˆ—è¡¨æ»šåŠ¨ FPS â‰¥ 58</li>
<li>å»ºç«‹<strong>å¹³å°å·®å¼‚åŒ–ç›‘æ§</strong>ï¼Œä¾‹å¦‚iOSå†…å­˜å³°å€¼ã€Androidç¢ç‰‡åŒ–å…¼å®¹</li>
</ul>
<h4 data-id="heading-11">3. <strong>é™çº§ä¸å®¹ç¾</strong></h4>
<ul>
<li>è®¾è®¡<strong>æ¡†æ¶ä¸å¯ç”¨æ—¶çš„é™çº§è·¯ç”±</strong>ï¼ˆå¦‚Fallbackåˆ°H5æˆ–åŸç”Ÿé¡µï¼‰</li>
<li>åˆ¶å®š<strong>ç«¯èƒ½åŠ›è°ƒç”¨å¤±è´¥</strong>åçš„ç”¨æˆ·å¼•å¯¼ç­–ç•¥</li>
</ul>
<h4 data-id="heading-12">4. <strong>å›¢é˜Ÿåä½œä¸æ²»ç†</strong></h4>
<ul>
<li>åˆ¶å®š<strong>è·¨ç«¯ç»„ä»¶å¼€å‘è§„èŒƒ</strong></li>
<li>å»ºç«‹<strong>ä»£ç å…±å»ºæœºåˆ¶</strong>ï¼Œé¿å…å„ç«¯å®ç°åˆ†å‰</li>
<li>è®¾è®¡<strong>ç‰ˆæœ¬ååŒå‘å¸ƒæµç¨‹</strong>ï¼Œç¡®ä¿å¤šç«¯åŠŸèƒ½å¯¹é½</li>
</ul>
<h2 data-id="heading-13">äº”ã€æ€»ç»“ï¼šæˆ‘å¿ƒç›®ä¸­çš„è·¨ç«¯æ¶æ„è§‚</h2>
<p>â€œä¸€ä¸ªä¼˜ç§€çš„è·¨ç«¯æ¶æ„ï¼Œä¸æ˜¯é€‰æ‹©ä¸€ä¸ªæ¡†æ¶ç„¶å hoping for the bestï¼Œè€Œæ˜¯<strong>è®¾è®¡ä¸€å¥—ç³»ç»Ÿï¼Œè®©ä¸šåŠ¡èƒ½åœ¨å¤šç«¯ä¹‹é—´è‡ªç”±ã€ç¨³å®šã€å¯æŒç»­åœ°ç”Ÿé•¿</strong>ã€‚â€</p>
<p>å®ƒåº”è¯¥å…·å¤‡ä»¥ä¸‹ç‰¹è´¨ï¼š</p>
<ul>
<li><strong>é€‚é…æ€§</strong>ï¼šèƒ½æ ¹æ®ä¸šåŠ¡å‘å±•é˜¶æ®µçµæ´»è°ƒæ•´æŠ€æœ¯æ ˆ</li>
<li><strong>ä¸€è‡´æ€§</strong>ï¼šç”¨æˆ·ä½“éªŒåœ¨ä¸åŒç«¯ä¹‹é—´æ— ç¼è¡”æ¥</li>
<li><strong>å¯è§‚æµ‹</strong>ï¼šå…·å¤‡å…¨é“¾è·¯çš„ç›‘æ§ä¸è°ƒè¯•èƒ½åŠ›</li>
<li><strong>å®¹é”™æ€§</strong>ï¼šåœ¨æŸä¸€ç«¯æˆ–æŸä¸€å±‚å‡ºç°é—®é¢˜æ—¶ï¼Œç³»ç»Ÿä»èƒ½éƒ¨åˆ†è¿è½¬</li>
<li><strong>æ¼”è¿›æ€§</strong>ï¼šèƒ½è·Ÿéšå¹³å°æŠ€æœ¯ä¸ä¸šåŠ¡éœ€æ±‚å…±åŒè¿›åŒ–</li>
</ul>
<p><strong>æ€è€ƒé¢˜ï¼š</strong><br/>
å¦‚æœä½ æ­£åœ¨è®¾è®¡ä¸€ä¸ªæœªæ¥3å¹´éœ€è¦è¦†ç›–â€œiOSã€Androidã€Webã€è½¦è½½ç³»ç»Ÿã€æŠ˜å å±è®¾å¤‡â€çš„äº”ç«¯åº”ç”¨ï¼Œä½ çš„æ¶æ„ä¼šå¦‚ä½•åˆ†å±‚ï¼Ÿå“ªäº›å±‚åº”è¯¥æŠ½è±¡ç»Ÿä¸€ï¼Ÿå“ªäº›å±‚åº”è¯¥ç«¯ä¾§ç‹¬ç«‹ï¼Ÿè¿™æˆ–è®¸å°±æ˜¯ä¸‹ä¸€ä»£è·¨ç«¯æ¶æ„çš„èµ·ç‚¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS ä¸Šæ¶ H5 åº”ç”¨çš„å¯è¡Œæ€§ä¸å®ç°è·¯å¾„ï¼Œå£³åº”ç”¨ã€åˆè§„è¦æ±‚ä¸æ„å»ºæµç¨‹çš„æŠ€æœ¯åˆ†æ]]></title>    <link>https://juejin.cn/post/7576476897947762715</link>    <guid>https://juejin.cn/post/7576476897947762715</guid>    <pubDate>2025-11-25T07:37:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576476897947762715" data-draft-id="7576470438580076570" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS ä¸Šæ¶ H5 åº”ç”¨çš„å¯è¡Œæ€§ä¸å®ç°è·¯å¾„ï¼Œå£³åº”ç”¨ã€åˆè§„è¦æ±‚ä¸æ„å»ºæµç¨‹çš„æŠ€æœ¯åˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:37:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜Ÿæ˜Ÿç”µç¯çŒ´"/> <meta itemprop="url" content="https://juejin.cn/user/2848205394945444"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS ä¸Šæ¶ H5 åº”ç”¨çš„å¯è¡Œæ€§ä¸å®ç°è·¯å¾„ï¼Œå£³åº”ç”¨ã€åˆè§„è¦æ±‚ä¸æ„å»ºæµç¨‹çš„æŠ€æœ¯åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2848205394945444/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜Ÿæ˜Ÿç”µç¯çŒ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:37:15.000Z" title="Tue Nov 25 2025 07:37:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨ç«¯é¡¹ç›®ä¸­ï¼ŒH5 åº”ç”¨ä»¥å¼€å‘å¿«ã€è¿­ä»£å¿«ã€è·¨å¹³å°èƒ½åŠ›å¼ºè€Œè¢«å¹¿æ³›é‡‡ç”¨ã€‚ä½†å½“å›¢é˜Ÿå¸Œæœ›å°† H5 åº”ç”¨ä»¥ iOS App å½¢å¼åˆ†å‘æ—¶ï¼Œé—®é¢˜å°±å˜å¾—å¤æ‚ï¼šApp Store å¯¹â€œWebView åŒ…è£…åº”ç”¨â€çš„å®¡æ ¸æå…¶ä¸¥æ ¼ï¼Œå°¤å…¶æ˜¯ 4.2ã€4.3 ç­‰æ¡æ¬¾éƒ½ä¼šç›´æ¥é™åˆ¶ç®€å•å£³åº”ç”¨çš„ä¸Šæ¶ã€‚</p>
<p>æœ¬æ–‡ä»å·¥ç¨‹å’Œå®¡æ ¸ä¸¤ä¸ªç»´åº¦å‡ºå‘ï¼Œåˆ†æ â€œH5 åº”ç”¨å¦‚ä½•ä¸Šæ¶ iOSâ€ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­å¸¸ç”¨çš„åˆè§„åŒ–æ–¹æ¡ˆä¸æ„å»ºç­–ç•¥ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€H5 åº”ç”¨æ˜¯å¦å¯ä»¥ç›´æ¥ä¸Šæ¶ iOSï¼Ÿç­”æ¡ˆæ˜¯ï¼šå¯ä»¥ï¼Œä½†å¿…é¡»æ»¡è¶³æ¡ä»¶</strong></h2>
<p>ä¸¥æ ¼æ¥è¯´ï¼š</p>
<blockquote>
<p>H5 åº”ç”¨å¯ä»¥ä¸Šæ¶ï¼Œä½† <strong>ä¸èƒ½æ˜¯çº¯å£³åº”ç”¨ï¼ˆWebView + URLï¼‰</strong>ã€‚</p>
</blockquote>
<p>è‹¹æœåå¯¹çš„ä¸æ˜¯ H5 æŠ€æœ¯ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ²¡æœ‰åŸç”Ÿäº¤äº’</li>
<li>æ²¡æœ‰æœ¬åœ°åŠŸèƒ½</li>
<li>WebView ä»…åŠ è½½ç½‘ç«™</li>
<li>å±äºâ€œç½‘é¡µå¿«æ·æ–¹å¼â€æˆ–â€œå¤åˆ¶ç½‘ç«™â€</li>
<li>ç¼ºä¹åº”ç”¨è‡ªèº«ä»·å€¼</li>
<li>ä¸è´¦å·ä¸‹å…¶ä»– App é«˜åº¦ç›¸ä¼¼</li>
</ul>
<p>å› æ­¤ï¼ŒæŠ€æœ¯æ ˆä¸æ˜¯é—®é¢˜ï¼Œæœ¬è´¨é—®é¢˜æ˜¯ï¼š</p>
<p><strong>åº”ç”¨æ˜¯å¦å…·å¤‡åŸç”Ÿåº”ç”¨åº”æœ‰çš„äº¤äº’æ·±åº¦ä¸ä»·å€¼ã€‚</strong></p>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€H5 åº”ç”¨ä¸Šæ¶ iOS çš„å¸¸ç”¨æŠ€æœ¯æ¶æ„ï¼ˆç¬¦åˆå®¡æ ¸è¦æ±‚ï¼‰</strong></h2>
<p>ä¸šç•Œå¸¸ç”¨ä¸‰ç§æ¶æ„æ¥åŒ…è£… H5 åº”ç”¨ï¼Œä½¿å…¶åˆè§„åŒ–ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>1. WebView + åŸç”Ÿå¢å¼ºå±‚ï¼ˆHybrid æ¨¡å¼ï¼‰</strong></h3>
<p>æœ€å¸¸ç”¨çš„å¤„ç†æ–¹å¼ã€‚
æ ¸å¿ƒæŠ€æœ¯ç»“æ„ï¼š</p>
<pre><code class="hljs language-css" lang="css">åŸç”Ÿå®¹å™¨ (iOS)
   â†‘
æ¡¥æ¥å±‚ï¼ˆJSBridgeï¼‰
   â†‘
<span class="hljs-selector-tag">H5</span> é¡µé¢ï¼ˆä¸šåŠ¡ä¸»é€»è¾‘ï¼‰
</code></pre>
<p>å¿…é¡»å…·å¤‡ï¼š</p>
<ul>
<li>åŸç”Ÿå¯¼èˆª / åŸç”Ÿ Tab</li>
<li>åŸç”Ÿæƒé™å¤„ç†</li>
<li>JSBridge è°ƒèµ·ç³»ç»Ÿèƒ½åŠ›</li>
<li>ç¦»çº¿åŒ…èƒ½åŠ›ï¼ˆå¯é€‰ï¼‰</li>
</ul>
<p>è‹¹æœæ›´å®¹æ˜“è®¤å®šå®ƒä¸ºâ€œå…·æœ‰åŸç”Ÿè¡Œä¸ºçš„æ··åˆåº”ç”¨â€ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>2. ç¦»çº¿åŒ…ï¼ˆWeb Resource Bundleï¼‰+ åŸç”Ÿæ¸²æŸ“å®¹å™¨</strong></h3>
<p>é€‚ç”¨å¸Œæœ›é™ä½ç½‘ç»œä¾èµ–çš„å›¢é˜Ÿã€‚</p>
<ul>
<li>é¦–æ¬¡å¯åŠ¨åŠ è½½æœ¬åœ° H5 èµ„æº</li>
<li>å…³é”®é¡µé¢ä¸ä¾èµ–å®æ—¶ç½‘ç»œ</li>
<li>ä»…ä¸šåŠ¡æ•°æ®è°ƒç”¨æ¥å£</li>
</ul>
<p>ç›¸æ¯”åœ¨çº¿ URL æ–¹æ¡ˆæ›´æ˜“é€šè¿‡å®¡æ ¸ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. H5 é¡µé¢ + å°èŒƒå›´åŸç”ŸåŠŸèƒ½ç‚¹</strong></h3>
<p>å¯¹äºè½»é‡çº§é¡¹ç›®ï¼Œè¿™ç§æ–¹å¼æœ€èŠ‚çœæˆæœ¬ï¼š</p>
<ul>
<li>åŸç”Ÿé¡µåšé¦–é¡µæˆ–é‡è¦ç•Œé¢</li>
<li>åŸç”Ÿåšä¸ªäººä¸­å¿ƒå…¥å£</li>
<li>åŸç”Ÿåšç™»å½•æµç¨‹</li>
<li>éå…³é”®åŠŸèƒ½ç”¨ WebView åŠ è½½ H5</li>
</ul>
<p>æ»¡è¶³è‹¹æœå¯¹â€œåŸç”Ÿç»“æ„â€çš„æœ€ä½è¦æ±‚ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€å¦‚ä½•è®© H5 ä¸è¢«åˆ¤å®šä¸ºâ€œç½‘é¡µåº”ç”¨â€ï¼Ÿå…³é”®æ˜¯åŸç”Ÿä½“éªŒ</strong></h2>
<p>ä»¥ä¸‹ä¸ºå®¡æ ¸ä¸­å½±å“æœ€å¤§ã€ä¹Ÿæ˜¯è¢« 4.3 æ‹’å®¡æœ€å¤šçš„ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>1. å¿…é¡»æœ‰åŸç”Ÿ UIï¼Œè€Œä¸æ˜¯çº¯ç½‘é¡µ</strong></h3>
<p>è‡³å°‘ä¿è¯ï¼š</p>
<ul>
<li>åŸç”Ÿå¯¼èˆªæ </li>
<li>åŸç”Ÿ TabBar</li>
<li>åŸç”ŸæŒ‰é’®æˆ–å…¥å£</li>
</ul>
<p>ä¸è¦è®©æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ª WebViewã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æƒé™å¿…é¡»åŸç”Ÿè°ƒç”¨ï¼Œè€Œä¸æ˜¯é€šè¿‡ H5 è¯·æ±‚</strong></h3>
<p>ä¾‹å¦‚ï¼š</p>
<ul>
<li>æ‘„åƒå¤´</li>
<li>å½•éŸ³</li>
<li>å®šä½</li>
<li>æ¨é€</li>
</ul>
<p>æƒé™æç¤ºå¿…é¡»ç”±åŸç”Ÿè§¦å‘ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. ç™»å½•æµç¨‹éœ€è¦ç¨³å®šä¸”è¿ç»­</strong></h3>
<p>Web ç™»å½•ç»å¸¸å‡ºç°ï¼š</p>
<ul>
<li>Cookie ä¸åŒæ­¥</li>
<li>Session æ–­å¼€</li>
<li>WebView ä¸åç«¯é‰´æƒä¸ä¸€è‡´</li>
</ul>
<p>åœ¨ iOS å®¡æ ¸æœºå™¨ç¯å¢ƒä¸‹æ›´å®¹æ˜“æš´éœ²é—®é¢˜ã€‚</p>
<p>å»ºè®®å¢åŠ ï¼š</p>
<ul>
<li>åŸç”Ÿå­˜å‚¨ç™»å½•çŠ¶æ€</li>
<li>å…³é”®é‰´æƒä»åŸç”Ÿå±‚å¤„ç†</li>
<li>æˆ–ä½¿ç”¨ JSBridge è°ƒæ•´ç™»å½•çŠ¶æ€</li>
</ul>
<hr/>
<h3 data-id="heading-9"><strong>4. æˆªå›¾å¿…é¡»å±•ç¤ºåŸç”Ÿç•Œé¢</strong></h3>
<p>è‹¥æˆªå›¾å…¨æ˜¯ç½‘é¡µï¼ŒåŸºæœ¬ä¼šè§¦å‘é£é™©ã€‚</p>
<p>æˆªå›¾å»ºè®®åŒ…å«ï¼š</p>
<ul>
<li>åŸç”Ÿå¯¼èˆª</li>
<li>åŸç”Ÿæ§ä»¶</li>
<li>éƒ¨åˆ† H5 é¡µé¢</li>
<li>åŠ¨ä½œæµç¨‹ç•Œé¢</li>
</ul>
<p>è¿™æ˜¯å®¡æ ¸åˆ¤æ–­â€œæ˜¯å¦ä¸º Appâ€æœ€ç›´æ¥çš„æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-10"><strong>å››ã€H5 åº”ç”¨å¦‚ä½•æ„å»º iOS IPAï¼Ÿï¼ˆåŸºäºæŠ€æœ¯æ ˆçš„é€‰æ‹©ï¼‰</strong></h2>
<p>ä¸€æ—¦å®ŒæˆåŒ…è£…ï¼Œæ„å»º IPA çš„æµç¨‹ä¸æ™®é€šåº”ç”¨ä¸€è‡´ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>1. Xcode æ„å»ºï¼ˆé€‚ç”¨äºåŸç”ŸåŒ…è£…æ–¹å¼ï¼‰</strong></h3>
<p>æµç¨‹ï¼š</p>
<ul>
<li>Archive</li>
<li>Export App Store åŒ…</li>
<li>ç”Ÿæˆ IPA</li>
</ul>
<p>é€‚ç”¨äºæ‰€æœ‰ Hybrid å·¥ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>2. uni-app/æ··åˆæ¨¡å¼çš„äº‘æ‰“åŒ…</strong></h3>
<p>è®¸å¤šè½»é‡ H5 é¡¹ç›®ä¼šé€‰æ‹© uni-app æ–¹å¼åŒ…è£…ï¼š</p>
<ul>
<li>å¯åœ¨ HBuilderX ä¸­ç”Ÿæˆ IPA</li>
<li>ä¸ä¾èµ– macOS</li>
<li>æ„å»ºé€Ÿåº¦å¿«</li>
</ul>
<p>é€‚åˆä¸­å°å‹å›¢é˜Ÿæˆ–ä¸ªäººå¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-13"><strong>äº”ã€IPA ä¸Šä¼ ï¼šæ”¯æŒå¤šç³»ç»Ÿçš„ä¸Šä¼ æ–¹å¼æ›´é€‚åˆ H5 é¡¹ç›®</strong></h2>
<p>ä¸Šä¼  IPA æ˜¯å¿…é¡»æ­¥éª¤ã€‚</p>
<h3 data-id="heading-14"><strong>1. å®˜æ–¹ä¸Šä¼ ï¼ˆä»… macOSï¼‰</strong></h3>
<ul>
<li>Transporter</li>
<li>Xcode Organizer</li>
</ul>
<p>è‹¥å›¢é˜Ÿæ²¡æœ‰ Macï¼Œåˆ™ä½¿ç”¨ä¸ä¾¿ã€‚</p>
<hr/>
<h3 data-id="heading-15"><strong>2. å¼€å¿ƒä¸Šæ¶ï¼ˆAppuploaderï¼‰è·¨å¹³å°å‘½ä»¤è¡Œä¸Šä¼ ï¼ˆé€‚åˆ H5 é¡¹ç›®è¿­ä»£é¢‘ç¹ï¼‰</strong></h3>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">appuploader_cli -u ios@team.com -p xxx-xxx-xxx-xxx -c 2 -f ./dist/app.ipa
</code></pre>
<p>é€‚ç”¨äºï¼š</p>
<ul>
<li>Windows</li>
<li>Linux</li>
<li>macOS</li>
<li>äº‘æ„å»º</li>
</ul>
<p>H5 é¡¹ç›®åœ¨æäº¤ TF å’Œåå¤ä¿®æ”¹é˜¶æ®µï¼Œå‘½ä»¤è¡Œä¸Šä¼ èƒ½æ˜¾è‘—é™ä½æ—¶é—´æˆæœ¬ã€‚
å›¾åƒåŒ–ç•Œé¢ï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0376d62b65d24aadb1aff6b8a2b4b9b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pif5pif55S154Gv54y0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661035&amp;x-signature=4unX3oMIaiN3nSuOc6JfXQbU94Y%3D" alt="ä¸Šä¼ IPA" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-16"><strong>å…­ã€å®¡æ ¸é˜¶æ®µï¼šH5 åº”ç”¨æœ€å®¹æ˜“è¸©çš„å‘ï¼ˆå¿…é¡»æ ¼å¤–æ³¨æ„ï¼‰</strong></h2>
<p>H5 åº”ç”¨æœ‰ç‰¹å®šçš„æ‹’å®¡é£é™©ï¼š</p>
<hr/>
<h3 data-id="heading-17"><strong>1. 4.2 / 4.3ï¼ˆæœ€å¸¸è§ï¼‰</strong></h3>
<p>åŸå› åŒ…æ‹¬ï¼š</p>
<ul>
<li>åº”ç”¨åŠŸèƒ½å…¨éƒ¨æ¥æºäºç½‘é¡µ</li>
<li>UI ç±»ä¼¼äºâ€œç½‘é¡µå¿«æ·æ–¹å¼â€</li>
<li>æˆªå›¾ä¸å±•ç¤ºåŸç”Ÿç•Œé¢</li>
<li>åŠŸèƒ½ç®€å•ã€æ— ç‹¬ç«‹ä»·å€¼</li>
</ul>
<p>è§„é¿æ–¹å¼å‚è€ƒä¸Šè¿°åŸç”Ÿå¢å¼ºç­–ç•¥ã€‚</p>
<hr/>
<h3 data-id="heading-18"><strong>2. 2.1ï¼ˆåŠŸèƒ½ä¸å¯ç”¨ï¼‰</strong></h3>
<p>å¸¸è§è§¦å‘ç‚¹ï¼š</p>
<ul>
<li>ç™»å½•å¤±è´¥</li>
<li>æ¥å£æŠ¥é”™</li>
<li>å†…éƒ¨è·³è½¬å¤±æ•ˆ</li>
<li>é¡µé¢åŠ è½½è¶…æ—¶</li>
</ul>
<p>å®¡æ ¸æœºå™¨ç¯å¢ƒä¸‹ï¼ŒæœåŠ¡ç«¯é—®é¢˜æ›´å®¹æ˜“æš´éœ²ã€‚</p>
<hr/>
<h3 data-id="heading-19"><strong>3. ä¿¡æ¯æµå†…å®¹æœªåšå®¡æ ¸</strong></h3>
<p>åŒ…å«ç”¨æˆ·å†…å®¹ï¼ˆUGCï¼‰æ—¶å¿…é¡»ï¼š</p>
<ul>
<li>æä¾›å†…å®¹è¿‡æ»¤ç­–ç•¥</li>
<li>æä¾›ä¸¾æŠ¥å…¥å£</li>
<li>æä¾›ç”¨æˆ·ç®¡ç†èƒ½åŠ›</li>
</ul>
<p>ç¼ºå¤±ä¼šè¢«ç›´æ¥æ‹’ã€‚</p>
<hr/>
<h3 data-id="heading-20"><strong>4. éšç§ä¸æƒé™ç”¨é€”è¯´æ˜ç¼ºå¤±</strong></h3>
<p>å°¤å…¶å…³é”®ï¼š</p>
<ul>
<li>ç›¸æœº</li>
<li>å®šä½</li>
<li>ç›¸å†Œ</li>
</ul>
<p>Info.plist å¿…é¡»å†™æ¸…æ¥šç”¨é€”ã€‚</p>
<hr/>
<h2 data-id="heading-21"><strong>ä¸ƒã€æ­£å¼ä¸Šæ¶ç­–ç•¥ï¼šH5 é¡¹ç›®çš„å¯é å‘å¸ƒè·¯å¾„</strong></h2>
<p>å»ºè®®å›¢é˜Ÿé‡‡ç”¨ä»¥ä¸‹ç»„åˆï¼š</p>
<h3 data-id="heading-22"><strong>1. ç”¨ TF åšå®Œæ•´éªŒè¯</strong></h3>
<p>TestFlight æ˜¯æœ€é€‚åˆéªŒè¯ï¼š</p>
<ul>
<li>H5 åŠ è½½æµç¨‹</li>
<li>æƒé™èƒ½åŠ›</li>
<li>ç™»å½•éªŒè¯</li>
<li>æ¥å£å…¼å®¹æ€§</li>
</ul>
<p>çš„é˜¶æ®µã€‚</p>
<h3 data-id="heading-23"><strong>2. ä¿ç•™è‡³å°‘ä¸€ä¸ªåŸç”Ÿæ ¸å¿ƒé¡µé¢</strong></h3>
<p>è¿™æ˜¯é¿å…è¢«è®¤å®šä¸ºç½‘é¡µå£³çš„å…³é”®ã€‚</p>
<h3 data-id="heading-24"><strong>3. æå‰æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€</strong></h3>
<p>H5 åº”ç”¨æ›´ä¾èµ–ç½‘ç»œï¼Œå®¡æ ¸å‘˜è®¿é—®ä¸ç¨³å®šçš„é¡µé¢å¿…ç„¶å¯¼è‡´æ‹’å®¡ã€‚</p>
<h3 data-id="heading-25"><strong>4. é¿å…ä¸€æ¬¡æ€§æäº¤å¤§é‡æ–°åŠŸèƒ½</strong></h3>
<p>åˆ†é˜¶æ®µä¸Šçº¿æ›´å®‰å…¨ã€‚
å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.applicationloader.net%2Ftutorial%2Fzh%2F1%2F1.html" target="_blank" title="https://www.applicationloader.net/tutorial/zh/1/1.html" ref="nofollow noopener noreferrer">www.applicationloader.net/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS]]></title>    <link>https://juejin.cn/post/7576468602304495654</link>    <guid>https://juejin.cn/post/7576468602304495654</guid>    <pubDate>2025-11-25T07:38:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576468602304495654" data-draft-id="7576378563574808591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,HTML"/> <meta itemprop="datePublished" content="2025-11-25T07:38:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è¿™ 5 ä¸ªå†·é—¨çš„ HTML æ ‡ç­¾ï¼Œèƒ½è®©ä½ å°‘å†™ 100 è¡Œ JS
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:38:13.000Z" title="Tue Nov 25 2025 07:38:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9406a89e16ac4345bc2ecc9958596ff6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=HKGQlG4tuN2%2BMq1ZIfmDADVmuDU%3D" alt="image.png" loading="lazy"/></p>
<p>å¤§å®¶å¥½!ğŸ˜ã€‚</p>
<p>Code Review çš„æ—¶å€™ï¼Œæˆ‘æœ€æ€•çœ‹åˆ°ä»€ä¹ˆï¼Ÿ</p>
<p>ä¸æ˜¯å¤æ‚çš„ç®—æ³•ï¼Œä¹Ÿä¸æ˜¯ä»€ä¹ˆæ­£åˆ™ã€‚è€Œæ˜¯<strong>æ˜æ˜ä¸€ä¸ª HTML æ ‡ç­¾å°±èƒ½æå®šçš„äº‹ï¼Œæœ‰äººéè¦å†™å‡ ç™¾è¡Œ JS + CSS å»é‡æ–°å‘æ˜è½®å­</strong> ã€‚</p>
<p>å‰å‡ å¤©ï¼Œæˆ‘çœ‹åˆ°ä¸€ä¸ªæ–°åŒå­¦ä¸ºäº†å†™ä¸€ä¸ªæŠ˜å é¢æ¿ï¼ˆAccordionï¼‰ï¼Œå¼•å…¥äº†ä¸€ä¸ªé‡å‹çš„ç¬¬ä¸‰æ–¹åº“ï¼Œè¿˜å†™äº†ä¸€å † <code>useState</code>ã€<code>onClick</code> å’ŒåŠ¨ç”»é€»è¾‘ã€‚</p>
<p>æˆ‘é»˜é»˜åœ°æŠŠä»–çš„ä»£ç å…¨åˆ äº†ï¼Œæ¢æˆäº† 3 è¡Œ <code>&lt;details&gt;</code>ã€‚ä»–çœ‹æˆ‘çš„çœ¼ç¥ï¼Œä»¿ä½›åœ¨çœ‹ä¸€ä¸ªå¤–æ˜ŸäººğŸ¤£ã€‚</p>
<p>åœ¨ 2025 å¹´çš„ä»Šå¤©ï¼Œæµè§ˆå™¨åŸç”Ÿ HTML çš„èƒ½åŠ›æ—©å·²ä»Šéæ˜”æ¯”ã€‚å¾ˆå¤šæˆ‘ä»¬ä¹ æƒ¯ç”¨ JS å»æ¨¡æ‹Ÿçš„äº¤äº’ï¼Œç°åœ¨ä¸ä»…æœ‰åŸç”Ÿæ”¯æŒï¼Œè€Œä¸”<strong>æ€§èƒ½æ›´å¥½ã€å…¼å®¹æ€§æ›´å¼ºã€æ— éšœç¢ï¼ˆa11yï¼‰æ›´å®Œå–„</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œæˆ‘å°±æ¥ç›˜ç‚¹ 5 ä¸ªè¢«ä¸¥é‡ä½ä¼°çš„HTMLæ ‡ç­¾ğŸ‘‡ã€‚</p>
<hr/>
<h3 data-id="heading-0"><strong><code>&lt;details&gt;</code> &amp; <code>&lt;summary&gt;</code>ï¼šæŠ˜å ç»„ä»¶</strong></h3>
<p>ä½ æ˜¯ä¸æ˜¯è¿˜åœ¨å†™è¿™æ ·çš„ React ä»£ç ï¼Ÿ</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// JS æ¨¡æ‹Ÿç‰ˆ</span>
<span class="hljs-keyword">const</span> [isOpen, setIsOpen] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">false</span>);
<span class="hljs-keyword">return</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"accordion"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"header"</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> setIsOpen(!isOpen)}&gt;
      ç‚¹å‡»å±•å¼€ {isOpen ? 'â¬†ï¸' : 'â¬‡ï¸'}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    {isOpen &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"content"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>}
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
);
</code></pre>
<p>ä¸ºäº†è¿™ä¸ªåŠŸèƒ½ï¼Œä½ è¿˜å¾—å†™ CSS åŠ¨ç”»ï¼Œè¿˜å¾—å¤„ç†é”®ç›˜äº‹ä»¶ï¼ˆTab é”®èƒ½ä¸èƒ½é€‰åˆ°ï¼Ÿå›è½¦èƒ½ä¸èƒ½å±•å¼€ï¼Ÿç­‰ç­‰ï¼‰ã€‚</p>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">details</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">summary</span>&gt;</span>ç‚¹å‡»å±•å¼€<span class="hljs-tag">&lt;/<span class="hljs-name">summary</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"content"</span>&gt;</span>
    è¿™é‡Œæ˜¯å±•å¼€åçš„å†…å®¹ï¼ŒåŸç”Ÿæ”¯æŒ Ctrl+F é¡µå†…æœç´¢ï¼
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">details</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ²¡æœ‰ä»»ä½•JS</strong>ï¼šè‡ªå¸¦ç‚¹å‡»å±•å¼€/æ”¶èµ·äº¤äº’ã€‚</li>
<li><strong>æ— éšœç¢ï¼ˆa11yï¼‰æ»¡åˆ†</strong>ï¼šå±å¹•é˜…è¯»å™¨èƒ½å®Œç¾è¯†åˆ«ï¼ŒTab é”®ã€å›è½¦é”®åŸç”Ÿæ”¯æŒã€‚</li>
<li><strong>é¡µå†…æœç´¢</strong>ï¼šè¿™æ˜¯ JS æ¨¡æ‹Ÿç‰ˆæœ€å¤§çš„ç—›ç‚¹ã€‚å¦‚æœå†…å®¹è¢« JS éšè—äº†ï¼ˆ<code>display: none</code>ï¼‰ï¼Œæµè§ˆå™¨çš„ Ctrl+F å¾€å¾€æœä¸åˆ°ã€‚ä½† <code>&lt;details&gt;</code> é‡Œçš„å†…å®¹ï¼Œå³ä½¿æŠ˜å ï¼Œæµè§ˆå™¨ä¹Ÿèƒ½æœåˆ°å¹¶è‡ªåŠ¨å±•å¼€ï¼</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b9c863dafadc46c4a208d26d6b5641f9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=vMtXW6eygD%2FdQTk35yZ4ndeH5vI%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<p>é…åˆ CSS ğŸ‘‡</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">details</span> {
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">6px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-selector-tag">summary</span> {
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-comment">/* åŒ…ä½å†…å®¹ï¼Œè®©å®ƒèƒ½åŠ¨ç”»é«˜åº¦ */</span>
<span class="hljs-selector-tag">details</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: max-height .<span class="hljs-number">45s</span> ease, opacity .<span class="hljs-number">3s</span> ease;
}

<span class="hljs-comment">/* details å¤„äº open çŠ¶æ€æ—¶ */</span>
<span class="hljs-selector-tag">details</span><span class="hljs-selector-attr">[open]</span> &gt; <span class="hljs-selector-class">.content</span> {
  <span class="hljs-attribute">max-height</span>: <span class="hljs-number">200px</span>; <span class="hljs-comment">/* ä½ å†…å®¹é«˜åº¦å¤§æ¦‚å¤šå°‘è®¾å¤šå°‘ï¼Œè¶³å¤Ÿå¤§å³å¯ */</span>
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}
</code></pre>
<p>ä¾ç„¶å¯ä»¥åšåŠ¨ç”»ã€‚</p>
<hr/>
<h3 data-id="heading-1"><strong><code>&lt;dialog&gt;</code>ï¼šå¼¹çª—ç»„ä»¶</strong></h3>
<p>å†™æ¨¡æ€æ¡†ï¼ˆModalï¼‰æ˜¯å‰ç«¯æœ€å¤§çš„å‘ä¹‹ä¸€ã€‚ä½ éœ€è¦è€ƒè™‘ï¼š</p>
<ul>
<li><code>z-index</code> å±‚çº§ä¼šä¸ä¼šè¢«é®æŒ¡ï¼Ÿ</li>
<li>ç‚¹å‡»é®ç½©å±‚å…³é—­ï¼Ÿ</li>
<li><strong>Focus Trapï¼ˆç„¦ç‚¹é”å®šï¼‰</strong> ï¼šæ‰“å¼€å¼¹çª—åï¼ŒTab é”®ä¸èƒ½è·‘åˆ°åº•å±‚é¡µé¢å»ã€‚</li>
<li>æŒ‰ä¸‹ <code>Esc</code> é”®å…³é—­ï¼Ÿ</li>
</ul>
<p>ä¸ºäº†è§£å†³è¿™äº›ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šå¼•å…¥ <code>Antd Modal</code> æˆ–è€… <code>React Portal</code>ã€‚ä½†åœ¨è½»é‡çº§åœºæ™¯ä¸‹ï¼ŒåŸç”Ÿ <code>&lt;dialog&gt;</code> æ‰æ˜¯ç¥ğŸ«…ã€‚</p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">dialog</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"myModal"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"dialog"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è¿™æ˜¯ä¸€ä¸ªåŸç”Ÿæ¨¡æ€æ¡†<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å…³é—­ï¼ˆè‡ªåŠ¨ï¼‰<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dialog</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onclick</span>=<span class="hljs-string">"myModal.showModal()"</span>&gt;</span>æ‰“å¼€å¼¹çª—â<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ae231b2a4af4c8694ff5a0843a5747d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=Oi6OWEl7QtlHnfEpPS3hwJBmyrw%3D" alt="Untitled â€‘ Made with FlexClip.gif" loading="lazy"/></p>
<ol>
<li><strong>Top Layerï¼ˆé¡¶å±‚ç‰¹æ€§ï¼‰</strong> ï¼šæµè§ˆå™¨ä¼šæŠŠå®ƒæ¸²æŸ“åœ¨æ‰€æœ‰ DOM çš„æœ€ä¸Šå±‚ï¼Œ<strong>å½»åº•æ— è§†</strong>çˆ¶å…ƒç´ çš„ <code>z-index</code> å’Œ <code>overflow: hidden</code>ã€‚</li>
<li><strong>::backdrop ä¼ªå…ƒç´ </strong>ï¼šç›´æ¥ç”¨ CSS å®šåˆ¶é®ç½©å±‚æ ·å¼ã€‚</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* èƒŒæ™¯é®ç½© */</span>
dialog<span class="hljs-selector-pseudo">::backdrop</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.45</span>);
    backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">3px</span>);
    <span class="hljs-attribute">transition</span>: opacity .<span class="hljs-number">3s</span> ease;
}
</code></pre>
<ol start="3">
<li><strong>åŸç”Ÿäº¤äº’</strong>ï¼šè‡ªå¸¦ <code>Esc</code> å…³é—­ï¼Œè‡ªå¸¦ç„¦ç‚¹ç®¡ç†ï¼Œè¡¨å•æäº¤è‡ªåŠ¨å…³é—­ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-2"><strong><code>&lt;datalist&gt;</code>ï¼šæœç´¢è‡ªåŠ¨è¡¥å…¨</strong></h3>
<p>å½“äº§å“ç»ç†è¦æ±‚åšä¸€ä¸ªå¸¦æœç´¢å»ºè®®çš„è¾“å…¥æ¡†æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ä¸æ˜¯ï¼šâ€œå¿«ï¼å¼•å…¥ <code>Select2</code> æˆ–è€… <code>Antd AutoComplete</code>ï¼ğŸ˜–</p>
<p>ä¸”æ…¢ã€‚å¦‚æœåªæ˜¯ç®€å•çš„å»ºè®®åˆ—è¡¨ï¼Œå‡  KB çš„ JS åº“éƒ½æ˜¾å¾—å¤ªé‡äº†ã€‚</p>
<p><strong>HTML åŸç”Ÿç‰ˆï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">label</span>&gt;</span>é€‰æ‹©ä½ å–œæ¬¢çš„æ¡†æ¶ï¼š<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">list</span>=<span class="hljs-string">"frameworks"</span> /&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">datalist</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"frameworks"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"React"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Vue"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Svelte"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Angular"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"Solid"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">datalist</span>&gt;</span>
</code></pre>
<ol>
<li><strong>æ¨¡ç³Šæœç´¢</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆæ‰“ u ä¼šå‡ºæ¥ Vueï¼‰ã€‚</li>
<li><strong>å“åº”å¼</strong>ï¼šåœ¨æ‰‹æœºä¸Šï¼Œå®ƒä¼šè°ƒç”¨ç³»ç»ŸåŸç”Ÿçš„ä¸‹æ‹‰é€‰æ‹© UIï¼Œä½“éªŒæ¯”ç½‘é¡µæ¨¡æ‹Ÿçš„æ›´é¡ºæ»‘ã€‚</li>
<li><strong>è§£è€¦</strong>ï¼šå®ƒåªæ˜¯ä¸€ä¸ªå»ºè®®åˆ—è¡¨ï¼Œç”¨æˆ·ä¾ç„¶å¯ä»¥è¾“å…¥åˆ—è¡¨é‡Œæ²¡æœ‰çš„å€¼ï¼ˆè¿™ç‚¹å’Œ Select ä¸åŒï¼‰ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-3"><strong><code>&lt;fieldset&gt;</code> &amp; <code>disabled</code>ï¼šä¸€é”®ç¦ç”¨æ•´ä¸ªè¡¨å•</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šç”¨æˆ·ç‚¹å‡»æäº¤æŒ‰é’®åï¼Œä¸ºäº†é˜²æ­¢é‡å¤æäº¤ï¼Œæˆ‘ä»¬éœ€è¦<strong>ç¦ç”¨è¡¨å•é‡Œçš„æ‰€æœ‰è¾“å…¥æ¡†</strong>ã€‚</p>
<p><strong>JS ç¬¨åŠæ³•ï¼š</strong></p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-comment">// è¿˜è¦ä¸€ä¸ªä¸ªå»æ‹¿ DOMï¼Œæˆ–è€…ç»´æŠ¤ä¸€ä¸ª loading çŠ¶æ€ä¼ ç»™æ‰€æœ‰ç»„ä»¶</span>
inputs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
buttons.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">btn</span> =&gt;</span> btn.<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>);
</code></pre>
<p><strong>HTML åŸç”Ÿå†™æ³•ï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">form</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">fieldset</span> <span class="hljs-attr">disabled</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"login-group"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">legend</span>&gt;</span>ç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">legend</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"å¯†ç "</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">fieldset</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// ä¸€è¡Œä»£ç æå®šçŠ¶æ€åˆ‡æ¢</span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'login-group'</span>).<span class="hljs-property">disabled</span> = <span class="hljs-literal">true</span>; 
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d86311c7162b449d9e6b77c5e87b4af3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661092&amp;x-signature=GIo5a4J0SdBaWGlymX6COE7iqjU%3D" alt="clideo_editor_c3a7f45a392f482ea0added4098a5be3.gif" loading="lazy"/></p>
<p>è¿™æ˜¯ä¸€ä¸ªæå¥½çš„<strong>åˆ†ç»„</strong>æ€ç»´ã€‚é€šè¿‡ç»™ <code>&lt;fieldset&gt;</code> è®¾ç½® <code>disabled</code>ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ç¦ç”¨å†…éƒ¨æ‰€æœ‰çš„ <code>&lt;input&gt;</code>, <code>&lt;select&gt;</code>, <code>&lt;button&gt;</code>ã€‚ä¸ç”¨å†™å¾ªç¯ï¼Œä¸ç”¨ç»´æŠ¤å¤æ‚çš„ Stateã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong><code>&lt;input type="file" capture&gt;</code>ï¼šH5 è°ƒç”¨æ‰‹æœºç›¸æœº</strong></h3>
<p><strong>åœºæ™¯</strong>ï¼šä¸šåŠ¡éœ€è¦ç”¨æˆ·ä¸Šä¼ ä¸€å¼ ç…§ç‰‡ï¼Œå¯ä»¥æ˜¯ç›¸å†Œé€‰çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯<strong>å½“åœºæ‹çš„</strong>ã€‚</p>
<p>å¾ˆå¤šæ–°æ‰‹çš„ååº”æ˜¯ï¼šæ˜¯ä¸æ˜¯è¦æ¥å¾®ä¿¡ JSSDKï¼Ÿæ˜¯ä¸æ˜¯è¦å†™ä¸ª Bridge è°ƒåŸç”Ÿ App èƒ½åŠ›ï¼Ÿ</p>
<p><strong>ç­”æ¡ˆæ˜¯ä¸éœ€è¦ï¼</strong></p>
<p><strong>HTML åŸç”Ÿï¼š</strong></p>
<pre><code class="hljs language-HTML" lang="HTML"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"file"</span> <span class="hljs-attr">capture</span>=<span class="hljs-string">"environment"</span> <span class="hljs-attr">accept</span>=<span class="hljs-string">"image/*"</span>&gt;</span>
</code></pre>
<p>åªè¦åŠ ä¸Š capture å±æ€§ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼ˆiOS/Androidï¼‰ç‚¹å‡»ä¸Šä¼ æ—¶ï¼Œç³»ç»Ÿä¼šç›´æ¥æ‹‰èµ·ç›¸æœºï¼Œè€Œä¸æ˜¯è®©ä½ å»é€‰æ–‡ä»¶ã€‚æ‹å®Œç…§åï¼Œä½ æ‹¿åˆ°çš„å°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ File å¯¹è±¡ã€‚</p>
<p>ä¸éœ€è¦ä»€ä¹ˆ JS SDKï¼Œå®ç°åŸç”Ÿçº§ä½“éªŒğŸ‘ã€‚</p>
<hr/>
<p>æˆ‘æ€»æ˜¯å¼ºè°ƒ <strong>æœ€å¥½çš„ä»£ç ï¼Œæ˜¯æ²¡æœ‰ä»£ç ï¼</strong></p>
<p>HTML æ ‡å‡†ä¸€ç›´åœ¨è¿›åŒ–ï¼Œå¾ˆå¤šæ›¾ç»éœ€è¦é‡å‹ JS æ‰èƒ½å®ç°çš„åŠŸèƒ½ï¼Œç°åœ¨å·²ç»æˆäº†æµè§ˆå™¨çš„å‡ºå‚è®¾ç½®äº†ã€‚</p>
<p>ä½¿ç”¨è¿™äº›åŸç”Ÿæ ‡ç­¾ï¼Œä¸ä»…èƒ½å‡å°‘æ‰“åŒ…ä½“ç§¯ï¼Œæ›´èƒ½è®©ä½ çš„åº”ç”¨åœ¨<strong>å¯è®¿é—®æ€§</strong>å’Œ<strong>æ€§èƒ½</strong>ä¸Šå¤©ç„¶é¢†å…ˆã€‚</p>
<p>ä¸‹æ¬¡å†æƒ³ <code>npm install</code> ä¸€ä¸ª UI åº“ä¹‹å‰ï¼Œå…ˆæŸ¥æŸ¥ MDNã€‚è¯´ä¸å®šï¼ŒHTML æ—©å°±å¸®ä½ åšå¥½äº†ğŸ¤”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ å‰ç«¯å¼€å‘è€…çš„ AI å…¥é—¨æŒ‡å—ï¼š5 åˆ†é’Ÿæ­å»ºä½ çš„ç¬¬ä¸€ä¸ª RAG æ™ºèƒ½é—®ç­”ç³»ç»Ÿ]]></title>    <link>https://juejin.cn/post/7576219879679590435</link>    <guid>https://juejin.cn/post/7576219879679590435</guid>    <pubDate>2025-11-25T07:27:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576219879679590435" data-draft-id="7576208176007807028" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ å‰ç«¯å¼€å‘è€…çš„ AI å…¥é—¨æŒ‡å—ï¼š5 åˆ†é’Ÿæ­å»ºä½ çš„ç¬¬ä¸€ä¸ª RAG æ™ºèƒ½é—®ç­”ç³»ç»Ÿ"/> <meta itemprop="keywords" content="LangChain"/> <meta itemprop="datePublished" content="2025-11-25T07:27:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hnode"/> <meta itemprop="url" content="https://juejin.cn/user/2682464100957352"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ å‰ç«¯å¼€å‘è€…çš„ AI å…¥é—¨æŒ‡å—ï¼š5 åˆ†é’Ÿæ­å»ºä½ çš„ç¬¬ä¸€ä¸ª RAG æ™ºèƒ½é—®ç­”ç³»ç»Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2682464100957352/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hnode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:27:37.000Z" title="Tue Nov 25 2025 07:27:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºä¸€åå‰ç«¯å¼€å‘è€…ï¼Œä½ æ˜¯å¦ä¹Ÿæœ‰è¿™æ ·çš„å›°æ‰°ï¼š</p>
<ul>
<li>ğŸ˜« æƒ³å­¦ AI å¼€å‘ï¼Œä½†çœ‹åˆ° Pythonã€PyTorchã€CUDA å°±å¤´å¤§ï¼Ÿ</li>
<li>ğŸ˜« å¥½ä¸å®¹æ˜“é…å¥½ç¯å¢ƒï¼Œä¸‹è½½æ¨¡å‹åˆè¦å‡ å GBï¼Œç­‰äº†åŠå¤©è¿˜å¤±è´¥ï¼Ÿ</li>
<li>ğŸ˜« ç½‘ä¸Šçš„æ•™ç¨‹éƒ½æ˜¯ Python çš„ï¼Œä½œä¸ºå‰ç«¯å¼€å‘è€…å®Œå…¨çœ‹ä¸æ‡‚ï¼Ÿ</li>
<li>ğŸ˜« æƒ³åšä¸ª AI é¡¹ç›®ç»ƒæ‰‹ï¼Œä½†ä¸çŸ¥é“ä»ä½•ä¸‹æ‰‹ï¼Ÿ</li>
</ul>
<p><strong>åˆ«æ‹…å¿ƒï¼è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºä½ å‡†å¤‡çš„ã€‚</strong></p>
<p>æˆ‘å¼€æºäº†ä¸€ä¸ªå®Œå…¨åŸºäº <strong>JavaScript/TypeScript</strong> çš„ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œè®©ä½ ç”¨ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼Œ5 åˆ†é’Ÿå°±èƒ½æ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„ AI åŠ©æ‰‹ï¼å¿«å¹´åº•äº†ï¼Œè¿˜ä¸æ•´ç‚¹æ´»å„¿ï¼</p>
<h2 data-id="heading-0">ğŸ¯ é¡¹ç›®æ•ˆæœ</h2>
<p>å…ˆçœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02336555b366451f965c5fc687f8bb99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG5vZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764660457&amp;x-signature=0O2jwcsmcIgziBKrUWmcsAHhrik%3D" alt="1.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fbeb0f65ca44329ad80a3ba2406caa7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgaG5vZGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764660457&amp;x-signature=7ILt%2F59hwkxoZZxLdMx8FfbzsyY%3D" alt="2.png" loading="lazy"/></p>
<p><strong>æ ¸å¿ƒåŠŸèƒ½ï¼š</strong></p>
<ul>
<li>ğŸ“š ä¸Šä¼ ä½ çš„æ–‡æ¡£ï¼ˆPDFã€Wordã€Markdownã€TXTï¼‰</li>
<li>ğŸ¤– ç”¨è‡ªç„¶è¯­è¨€æé—®</li>
<li>ğŸ’¬ è·å¾—åŸºäºæ–‡æ¡£å†…å®¹çš„ç²¾å‡†å›ç­”</li>
<li>ğŸ” è‡ªåŠ¨æ ‡æ³¨ç­”æ¡ˆæ¥æº</li>
</ul>
<p>å°±åƒæ‹¥æœ‰ä¸€ä¸ªè¯»è¿‡æ‰€æœ‰æ–‡æ¡£çš„æ™ºèƒ½åŠ©æ‰‹ï¼</p>
<h2 data-id="heading-1">ğŸ’¡ ä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®é€‚åˆå‰ç«¯å¼€å‘è€…ï¼Ÿ</h2>
<h3 data-id="heading-2">1. 100% ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆ</h3>
<pre><code class="hljs language-scss" lang="scss">ä¼ ç»Ÿ AI é¡¹ç›®                    æœ¬é¡¹ç›®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Python + PyTorch         â†’     Node<span class="hljs-selector-class">.js</span> + TypeScript
Conda ç¯å¢ƒé…ç½®           â†’     npm install
æœ¬åœ°æ¨¡å‹ä¸‹è½½ (<span class="hljs-number">50</span>GB+)     â†’     API è°ƒç”¨ (<span class="hljs-number">0</span> å®‰è£…)
GPU æœåŠ¡å™¨               â†’     æ™®é€šç”µè„‘å³å¯
å¤æ‚çš„ä¾èµ–ç®¡ç†           â†’     package<span class="hljs-selector-class">.json</span> æå®š
</code></pre>
<p><strong>å‰ç«¯æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>âœ… React 18 + TypeScript + Vite</li>
<li>âœ… TailwindCSSï¼ˆç°ä»£åŒ–æ ·å¼ï¼‰</li>
<li>âœ… React Markdownï¼ˆMarkdown æ¸²æŸ“ï¼‰</li>
</ul>
<p><strong>åç«¯æŠ€æœ¯æ ˆï¼š</strong></p>
<ul>
<li>âœ… Node.js + Express + TypeScript</li>
<li>âœ… LangChain.jsï¼ˆAI åº”ç”¨æ¡†æ¶çš„ JS ç‰ˆæœ¬ï¼‰</li>
<li>âœ… LanceDBï¼ˆå‘é‡æ•°æ®åº“ï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼‰</li>
</ul>
<h3 data-id="heading-3">2. çœŸæ­£çš„å¼€ç®±å³ç”¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åªéœ€ä¸‰æ­¥</span>
git <span class="hljs-built_in">clone</span> https://github.com/jinghaonode/rag-knowledge-assistant.git
<span class="hljs-built_in">cd</span> rag-knowledge-assistant
./start.sh  <span class="hljs-comment"># æˆ– start.bat (Windows)</span>

<span class="hljs-comment"># å°±è¿™ä¹ˆç®€å•ï¼</span>
</code></pre>
<p><strong>å‰ç½®è¦æ±‚ï¼š</strong></p>
<ul>
<li>Node.js 18+ï¼ˆå‰ç«¯å¼€å‘è€…å¿…å¤‡ï¼‰</li>
<li>æ™ºè°± API Keyï¼ˆå…è´¹æ³¨å†Œï¼Œæ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦ï¼‰</li>
</ul>
<h3 data-id="heading-4">3. å®Œæ•´çš„å­¦ä¹ èµ„æº</h3>
<p>è¿™ä¸ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œæ›´æ˜¯ä¸€ä¸ªå­¦ä¹  AI å¼€å‘çš„å®Œæ•´æ¡ˆä¾‹ï¼š</p>
<ul>
<li>ğŸ“š <strong>æ–‡æ¡£å¤„ç†</strong>ï¼šå­¦ä¹ å¦‚ä½•è§£æ PDFã€Word ç­‰æ ¼å¼</li>
<li>ğŸ” <strong>å‘é‡æ£€ç´¢</strong>ï¼šç†è§£è¯­ä¹‰æœç´¢çš„åŸç†</li>
<li>ğŸ¤– <strong>AI é›†æˆ</strong>ï¼šæŒæ¡ LangChain.js çš„ä½¿ç”¨</li>
<li>ğŸ’¬ <strong>æµå¼è¾“å‡º</strong>ï¼šå®ç°å®æ—¶å¯¹è¯ä½“éªŒ</li>
<li>ğŸ¨ <strong>UI è®¾è®¡</strong>ï¼šç°ä»£åŒ–çš„èŠå¤©ç•Œé¢</li>
</ul>
<h2 data-id="heading-5">ğŸ—ï¸ æŠ€æœ¯æ¶æ„è¯¦è§£</h2>
<h3 data-id="heading-6">RAG æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>RAGï¼ˆRetrieval-Augmented Generationï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æ˜¯ä¸€ç§ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ç”Ÿæˆçš„ AI æŠ€æœ¯ã€‚</p>
<p><strong>ç®€å•æ¥è¯´ï¼š</strong></p>
<ol>
<li>ğŸ“¤ ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ â†’ ç³»ç»Ÿå°†æ–‡æ¡£åˆ‡åˆ†å¹¶å‘é‡åŒ–å­˜å‚¨</li>
<li>ğŸ’¬ ç”¨æˆ·æé—® â†’ ç³»ç»Ÿæ£€ç´¢ç›¸å…³æ–‡æ¡£ç‰‡æ®µ</li>
<li>ğŸ¤– AI åŸºäºæ£€ç´¢åˆ°çš„å†…å®¹ç”Ÿæˆå›ç­”</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ</strong></p>
<ul>
<li>å¤§è¯­è¨€æ¨¡å‹çš„çŸ¥è¯†æ˜¯æœ‰é™çš„ï¼ˆè®­ç»ƒæ•°æ®æˆªæ­¢æ—¥æœŸï¼‰</li>
<li>æ— æ³•å›ç­”ä½ ç§æœ‰æ–‡æ¡£ä¸­çš„å†…å®¹</li>
<li>RAG è®© AI èƒ½å¤ŸåŸºäºä½ çš„æ–‡æ¡£å›ç­”é—®é¢˜</li>
</ul>
<h3 data-id="heading-7">ç³»ç»Ÿæ¶æ„</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£] --&gt; B[æ–‡æ¡£è§£æ]
    B --&gt; C[æ–‡æœ¬åˆ†å—]
    C --&gt; D[å‘é‡åŒ–]
    D --&gt; E[LanceDB å­˜å‚¨]

    F[ç”¨æˆ·æé—®] --&gt; G[æŸ¥è¯¢ä¼˜åŒ–]
    G --&gt; H[æ··åˆæ£€ç´¢]
    H --&gt; I[å‘é‡æ£€ç´¢]
    H --&gt; J[å…³é”®è¯æ£€ç´¢]
    I --&gt; K[ç›¸å…³æ–‡æ¡£]
    J --&gt; K
    K --&gt; L[GLM-4 ç”Ÿæˆå›ç­”]
    L --&gt; M[æµå¼è¾“å‡º]
</code></pre>
<h3 data-id="heading-8">æ ¸å¿ƒæŠ€æœ¯ç‚¹</h3>
<h4 data-id="heading-9">1. æ–‡æ¡£å¤„ç†ï¼ˆDocument Processingï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ”¯æŒå¤šç§æ–‡æ¡£æ ¼å¼</span>
<span class="hljs-keyword">const</span> loaders = {
  <span class="hljs-string">".pdf"</span>: <span class="hljs-title class_">PDFLoader</span>,
  <span class="hljs-string">".docx"</span>: <span class="hljs-title class_">DocxLoader</span>,
  <span class="hljs-string">".md"</span>: <span class="hljs-title class_">TextLoader</span>,
  <span class="hljs-string">".txt"</span>: <span class="hljs-title class_">TextLoader</span>,
};

<span class="hljs-comment">// æ™ºèƒ½åˆ†å—</span>
<span class="hljs-keyword">const</span> textSplitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RecursiveCharacterTextSplitter</span>({
  <span class="hljs-attr">chunkSize</span>: <span class="hljs-number">500</span>, <span class="hljs-comment">// æ¯å— 500 å­—ç¬¦</span>
  <span class="hljs-attr">chunkOverlap</span>: <span class="hljs-number">100</span>, <span class="hljs-comment">// é‡å  100 å­—ç¬¦ï¼ˆä¿æŒä¸Šä¸‹æ–‡è¿è´¯ï¼‰</span>
});
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦åˆ†å—ï¼Ÿ</strong></p>
<ul>
<li>AI æ¨¡å‹æœ‰ Token é™åˆ¶</li>
<li>åˆ†å—å¯ä»¥æé«˜æ£€ç´¢ç²¾åº¦</li>
<li>é‡å éƒ¨åˆ†ä¿è¯ä¸Šä¸‹æ–‡è¿è´¯æ€§</li>
</ul>
<h4 data-id="heading-10">2. å‘é‡åŒ–å­˜å‚¨ï¼ˆVector Storeï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨æ™ºè°± Embedding æ¨¡å‹</span>
<span class="hljs-keyword">const</span> embeddings = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAIEmbeddings</span>({
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">"embedding-3"</span>,
  <span class="hljs-attr">openAIApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GLM_API_KEY</span>,
  <span class="hljs-attr">configuration</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://open.bigmodel.cn/api/paas/v4"</span>,
  },
});

<span class="hljs-comment">// å­˜å‚¨åˆ° LanceDB</span>
<span class="hljs-keyword">const</span> vectorStore = <span class="hljs-keyword">await</span> <span class="hljs-title class_">LanceDB</span>.<span class="hljs-title function_">fromDocuments</span>(documents, embeddings, {
  <span class="hljs-attr">uri</span>: <span class="hljs-string">"./lancedb"</span>,
});
</code></pre>
<p><strong>ä»€ä¹ˆæ˜¯å‘é‡åŒ–ï¼Ÿ</strong></p>
<ul>
<li>å°†æ–‡æœ¬è½¬æ¢ä¸ºæ•°å­—å‘é‡ï¼ˆä¸€ä¸²æ•°å­—ï¼‰</li>
<li>è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬ï¼Œå‘é‡ä¹Ÿç›¸ä¼¼</li>
<li>å¯ä»¥é€šè¿‡å‘é‡ç›¸ä¼¼åº¦è¿›è¡Œè¯­ä¹‰æœç´¢</li>
</ul>
<h4 data-id="heading-11">3. æ··åˆæ£€ç´¢ï¼ˆHybrid Searchï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å‘é‡æ£€ç´¢ï¼ˆè¯­ä¹‰æœç´¢ï¼‰</span>
<span class="hljs-keyword">const</span> vectorDocs = <span class="hljs-keyword">await</span> vectorStore.<span class="hljs-title function_">similaritySearch</span>(query, <span class="hljs-number">6</span>);

<span class="hljs-comment">// å…³é”®è¯æ£€ç´¢ï¼ˆç²¾ç¡®åŒ¹é…ï¼‰</span>
<span class="hljs-keyword">const</span> keywordDocs = <span class="hljs-keyword">await</span> <span class="hljs-title function_">keywordSearch</span>(query);

<span class="hljs-comment">// æ™ºèƒ½åˆå¹¶å»é‡</span>
<span class="hljs-keyword">const</span> finalDocs = <span class="hljs-title function_">mergeAndDeduplicate</span>(vectorDocs, keywordDocs);
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦æ··åˆæ£€ç´¢ï¼Ÿ</strong></p>
<ul>
<li>å‘é‡æ£€ç´¢ï¼šç†è§£è¯­ä¹‰ï¼Œæ‰¾åˆ°ç›¸å…³å†…å®¹</li>
<li>å…³é”®è¯æ£€ç´¢ï¼šç²¾ç¡®åŒ¹é…ä¸“ä¸šæœ¯è¯­</li>
<li>ä¸¤è€…ç»“åˆï¼Œæé«˜å‡†ç¡®ç‡</li>
</ul>
<h4 data-id="heading-12">4. æµå¼è¾“å‡ºï¼ˆStreamingï¼‰</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åç«¯ï¼šä½¿ç”¨ SSEï¼ˆServer-Sent Eventsï¼‰</span>
<span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> chain.<span class="hljs-title function_">stream</span>({ <span class="hljs-attr">question</span>: query });

<span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
  res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(chunk)}</span>\n\n`</span>);
}

<span class="hljs-comment">// å‰ç«¯ï¼šå®æ—¶æ¥æ”¶å¹¶æ˜¾ç¤º</span>
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"/api/chat"</span>, {
  <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
  <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ message }),
});

<span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
<span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

<span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
  <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

  <span class="hljs-keyword">const</span> text = decoder.<span class="hljs-title function_">decode</span>(value);
  <span class="hljs-title function_">setMessages</span>(<span class="hljs-function">(<span class="hljs-params">prev</span>) =&gt;</span> [...prev, { text }]);
}
</code></pre>
<p><strong>æµå¼è¾“å‡ºçš„å¥½å¤„ï¼š</strong></p>
<ul>
<li>å®æ—¶æ˜¾ç¤º AI ç”Ÿæˆè¿‡ç¨‹</li>
<li>æå‡ç”¨æˆ·ä½“éªŒ</li>
<li>ç±»ä¼¼ ChatGPT çš„æ‰“å­—æ•ˆæœ</li>
</ul>
<h2 data-id="heading-13">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-14">1. è·å– API Key</h3>
<p>è®¿é—® <a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.bigmodel.cn%2F" target="_blank" title="https://open.bigmodel.cn/" ref="nofollow noopener noreferrer">æ™ºè°± AI å¼€æ”¾å¹³å°</a>ï¼š</p>
<ol>
<li>æ³¨å†Œå¹¶ç™»å½•</li>
<li>è¿›å…¥æ§åˆ¶å° â†’ API ç®¡ç†</li>
<li>åˆ›å»º API Key</li>
<li>å¤åˆ¶ Key</li>
</ol>
<p>ğŸ’¡ <strong>æ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦ï¼Œè¶³å¤Ÿæµ‹è¯•ä½¿ç”¨ï¼</strong></p>
<h3 data-id="heading-15">2. å…‹éš†å¹¶å¯åŠ¨é¡¹ç›®</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># å…‹éš†é¡¹ç›®</span>
git <span class="hljs-built_in">clone</span> https://github.com/jinghaonode/rag-knowledge-assistant.git
<span class="hljs-built_in">cd</span> rag-knowledge-assistant

<span class="hljs-comment"># é…ç½® API Key</span>
<span class="hljs-built_in">cp</span> backend/.env.example backend/.env
<span class="hljs-comment"># ç¼–è¾‘ backend/.envï¼Œå¡«å…¥ä½ çš„ API Key</span>

<span class="hljs-comment"># ä¸€é”®å¯åŠ¨</span>
./start.sh          <span class="hljs-comment"># macOS/Linux</span>
start.bat           <span class="hljs-comment"># Windows</span>
</code></pre>
<h3 data-id="heading-16">3. è®¿é—®åº”ç”¨</h3>
<ul>
<li>ğŸŒ å‰ç«¯ç•Œé¢ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A5173" target="_blank" title="http://localhost:5173" ref="nofollow noopener noreferrer">http://localhost:5173</a></li>
<li>ğŸ”Œ åç«¯ APIï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3001" target="_blank" title="http://localhost:3001" ref="nofollow noopener noreferrer">http://localhost:3001</a></li>
</ul>
<h2 data-id="heading-17">ğŸ“ é¡¹ç›®ç»“æ„</h2>
<pre><code class="hljs language-bash" lang="bash">rag-knowledge-assistant/
â”œâ”€â”€ backend/                    <span class="hljs-comment"># åç«¯æœåŠ¡</span>
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.ts          <span class="hljs-comment"># Express æœåŠ¡å™¨</span>
â”‚   â”‚   â”œâ”€â”€ routes/            <span class="hljs-comment"># API è·¯ç”±</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ chat.ts        <span class="hljs-comment"># èŠå¤©æ¥å£</span>
â”‚   â”‚   â”‚   â”œâ”€â”€ upload.ts      <span class="hljs-comment"># ä¸Šä¼ æ¥å£</span>
â”‚   â”‚   â”‚   â””â”€â”€ knowledge.ts   <span class="hljs-comment"># çŸ¥è¯†åº“ç®¡ç†</span>
â”‚   â”‚   â””â”€â”€ services/          <span class="hljs-comment"># æ ¸å¿ƒæœåŠ¡</span>
â”‚   â”‚       â”œâ”€â”€ vectorstore.ts <span class="hljs-comment"># å‘é‡å­˜å‚¨</span>
â”‚   â”‚       â””â”€â”€ ragChain.ts    <span class="hljs-comment"># RAG æ£€ç´¢é“¾</span>
â”‚   â””â”€â”€ .env.example           <span class="hljs-comment"># ç¯å¢ƒå˜é‡æ¨¡æ¿</span>
â”œâ”€â”€ frontend/                   <span class="hljs-comment"># å‰ç«¯åº”ç”¨</span>
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ App.tsx            <span class="hljs-comment"># ä¸»åº”ç”¨</span>
â”‚       â””â”€â”€ components/        <span class="hljs-comment"># React ç»„ä»¶</span>
â”‚           â”œâ”€â”€ ChatMessage.tsx
â”‚           â”œâ”€â”€ ChatInput.tsx
â”‚           â””â”€â”€ KnowledgeModal.tsx
â””â”€â”€ README.md
</code></pre>
<h2 data-id="heading-18">ğŸ“ æ ¸å¿ƒä»£ç è§£æ</h2>
<h3 data-id="heading-19">1. æ–‡æ¡£ä¸Šä¼ å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// backend/src/routes/upload.ts</span>
<span class="hljs-keyword">import</span> multer <span class="hljs-keyword">from</span> <span class="hljs-string">"multer"</span>;
<span class="hljs-keyword">import</span> { vectorStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"../services/vectorstore.js"</span>;

<span class="hljs-keyword">const</span> upload = <span class="hljs-title function_">multer</span>({ <span class="hljs-attr">dest</span>: <span class="hljs-string">"uploads/"</span> });

router.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/"</span>, upload.<span class="hljs-title function_">single</span>(<span class="hljs-string">"file"</span>), <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> file = req.<span class="hljs-property">file</span>;

    <span class="hljs-comment">// 1. åŠ è½½æ–‡æ¡£</span>
    <span class="hljs-keyword">const</span> loader = <span class="hljs-title function_">getLoader</span>(file.<span class="hljs-property">path</span>, file.<span class="hljs-property">mimetype</span>);
    <span class="hljs-keyword">const</span> docs = <span class="hljs-keyword">await</span> loader.<span class="hljs-title function_">load</span>();

    <span class="hljs-comment">// 2. æ–‡æœ¬åˆ†å—</span>
    <span class="hljs-keyword">const</span> splitter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RecursiveCharacterTextSplitter</span>({
      <span class="hljs-attr">chunkSize</span>: <span class="hljs-number">500</span>,
      <span class="hljs-attr">chunkOverlap</span>: <span class="hljs-number">100</span>,
    });
    <span class="hljs-keyword">const</span> splitDocs = <span class="hljs-keyword">await</span> splitter.<span class="hljs-title function_">splitDocuments</span>(docs);

    <span class="hljs-comment">// 3. å‘é‡åŒ–å¹¶å­˜å‚¨</span>
    <span class="hljs-keyword">await</span> vectorStore.<span class="hljs-title function_">addDocuments</span>(splitDocs);

    res.<span class="hljs-title function_">json</span>({ <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">chunks</span>: splitDocs.<span class="hljs-property">length</span> });
  } <span class="hljs-keyword">catch</span> (error) {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">500</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: error.<span class="hljs-property">message</span> });
  }
});
</code></pre>
<h3 data-id="heading-20">2. æ™ºèƒ½é—®ç­”å®ç°</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// backend/src/routes/chat.ts</span>
<span class="hljs-keyword">import</span> { ragChain } <span class="hljs-keyword">from</span> <span class="hljs-string">"../services/ragChain.js"</span>;

router.<span class="hljs-title function_">post</span>(<span class="hljs-string">"/"</span>, <span class="hljs-keyword">async</span> (req, res) =&gt; {
  <span class="hljs-keyword">const</span> { message } = req.<span class="hljs-property">body</span>;

  <span class="hljs-comment">// è®¾ç½® SSE å“åº”å¤´</span>
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Content-Type"</span>, <span class="hljs-string">"text/event-stream"</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Cache-Control"</span>, <span class="hljs-string">"no-cache"</span>);
  res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Connection"</span>, <span class="hljs-string">"keep-alive"</span>);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æµå¼ç”Ÿæˆå›ç­”</span>
    <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">await</span> ragChain.<span class="hljs-title function_">stream</span>({
      <span class="hljs-attr">question</span>: message,
    });

    <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> stream) {
      res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(chunk)}</span>\n\n`</span>);
    }

    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">"data: [DONE]\n\n"</span>);
    res.<span class="hljs-title function_">end</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    res.<span class="hljs-title function_">write</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ error: error.message })}</span>\n\n`</span>);
    res.<span class="hljs-title function_">end</span>();
  }
});
</code></pre>
<h3 data-id="heading-21">3. RAG æ£€ç´¢é“¾</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// backend/src/services/ragChain.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ChatOpenAI</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/openai"</span>;
<span class="hljs-keyword">import</span> { createRetrievalChain } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/chains/retrieval"</span>;

<span class="hljs-comment">// åˆå§‹åŒ– GLM-4 æ¨¡å‹</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">"glm-4-flash"</span>,
  <span class="hljs-attr">openAIApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">GLM_API_KEY</span>,
  <span class="hljs-attr">configuration</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://open.bigmodel.cn/api/paas/v4"</span>,
  },
  <span class="hljs-attr">streaming</span>: <span class="hljs-literal">true</span>,
});

<span class="hljs-comment">// åˆ›å»ºæ£€ç´¢å™¨</span>
<span class="hljs-keyword">const</span> retriever = vectorStore.<span class="hljs-title function_">asRetriever</span>({
  <span class="hljs-attr">k</span>: <span class="hljs-number">6</span>, <span class="hljs-comment">// æ£€ç´¢ 6 ä¸ªæœ€ç›¸å…³çš„æ–‡æ¡£å—</span>
});

<span class="hljs-comment">// åˆ›å»º RAG é“¾</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ragChain = <span class="hljs-title function_">createRetrievalChain</span>({
  llm,
  retriever,
  <span class="hljs-attr">prompt</span>: <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªæ™ºèƒ½åŠ©æ‰‹ã€‚åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ï¼š

{context}

é—®é¢˜ï¼š{question}

è¯·ç»™å‡ºå‡†ç¡®ã€è¯¦ç»†çš„å›ç­”ã€‚å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜ã€‚`</span>,
});
</code></pre>
<h3 data-id="heading-22">4. å‰ç«¯èŠå¤©ç»„ä»¶</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// frontend/src/components/ChatInput.tsx</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">ChatInput</span> = (<span class="hljs-params">{ onSend }</span>) =&gt; {
  <span class="hljs-keyword">const</span> [message, setMessage] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">""</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSend</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">if</span> (!message.<span class="hljs-title function_">trim</span>()) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
    <span class="hljs-title function_">onSend</span>(message);
    <span class="hljs-title function_">setMessage</span>(<span class="hljs-string">""</span>);

    <span class="hljs-comment">// è°ƒç”¨ API</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"http://localhost:3001/api/chat"</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ message }),
    });

    <span class="hljs-comment">// å¤„ç†æµå¼å“åº”</span>
    <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>.<span class="hljs-title function_">getReader</span>();
    <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
      <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value);
      <span class="hljs-keyword">const</span> lines = chunk.<span class="hljs-title function_">split</span>(<span class="hljs-string">"\n"</span>);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
        <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">"data: "</span>)) {
          <span class="hljs-keyword">const</span> data = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>);
          <span class="hljs-keyword">if</span> (data === <span class="hljs-string">"[DONE]"</span>) <span class="hljs-keyword">break</span>;

          <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
          <span class="hljs-title function_">onReceive</span>(parsed);
        }
      }
    }
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"flex gap-2"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span>
        <span class="hljs-attr">value</span>=<span class="hljs-string">{message}</span>
        <span class="hljs-attr">onChange</span>=<span class="hljs-string">{(e)</span> =&gt;</span> setMessage(e.target.value)}
        onKeyPress={(e) =&gt; e.key === "Enter" &amp;&amp; handleSend()}
        placeholder="è¾“å…¥ä½ çš„é—®é¢˜..."
        className="flex-1 px-4 py-2 border rounded-lg"
      /&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
        <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleSend}</span>
        <span class="hljs-attr">className</span>=<span class="hljs-string">"px-6 py-2 bg-blue-500 text-white rounded-lg"</span>
      &gt;</span>
        å‘é€
      <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
};
</code></pre>
<h2 data-id="heading-23">ğŸ¨ è¿›é˜¶ä¼˜åŒ–</h2>
<h3 data-id="heading-24">1. æŸ¥è¯¢ä¼˜åŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æå–å…³é”®è¯</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">extractKeywords</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">query: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä»ä»¥ä¸‹é—®é¢˜ä¸­æå– 3-5 ä¸ªå…³é”®è¯ï¼š<span class="hljs-subst">${query}</span>`</span>;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">call</span>(prompt);
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">split</span>(<span class="hljs-string">","</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> k.<span class="hljs-title function_">trim</span>());
};

<span class="hljs-comment">// æŸ¥è¯¢æ”¹å†™</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">rewriteQuery</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">query: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`å°†ä»¥ä¸‹é—®é¢˜æ”¹å†™ä¸ºæ›´é€‚åˆæ£€ç´¢çš„å½¢å¼ï¼š<span class="hljs-subst">${query}</span>`</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> llm.<span class="hljs-title function_">call</span>(prompt);
};
</code></pre>
<h3 data-id="heading-25">2. ç›¸ä¼¼åº¦è¿‡æ»¤</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// åªä¿ç•™ç›¸ä¼¼åº¦é«˜äºé˜ˆå€¼çš„æ–‡æ¡£</span>
<span class="hljs-keyword">const</span> filteredDocs = docs.<span class="hljs-title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">doc</span>) =&gt;</span> {
  <span class="hljs-keyword">return</span> doc.<span class="hljs-property">metadata</span>.<span class="hljs-property">score</span> &gt; <span class="hljs-number">0.45</span>; <span class="hljs-comment">// ç›¸ä¼¼åº¦é˜ˆå€¼</span>
});
</code></pre>
<h3 data-id="heading-26">3. ç­”æ¡ˆè´¨é‡æå‡</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> prompt = <span class="hljs-string">`ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„æ™ºèƒ½åŠ©æ‰‹ã€‚è¯·åŸºäºä»¥ä¸‹æ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜ã€‚

è¦æ±‚ï¼š
1. å›ç­”è¦å‡†ç¡®ã€è¯¦ç»†
2. å¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œæ˜ç¡®è¯´æ˜
3. å¼•ç”¨å…·ä½“çš„æ–‡æ¡£æ¥æº
4. ä½¿ç”¨ Markdown æ ¼å¼ï¼Œè®©å›ç­”æ›´æ˜“è¯»

æ–‡æ¡£å†…å®¹ï¼š
{context}

é—®é¢˜ï¼š{question}

å›ç­”ï¼š`</span>;
</code></pre>
<h2 data-id="heading-27">ğŸš€ éƒ¨ç½²ä¸Šçº¿</h2>
<h3 data-id="heading-28">1. æœ¬åœ°æ„å»º</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åç«¯æ„å»º</span>
<span class="hljs-built_in">cd</span> backend
npm run build

<span class="hljs-comment"># å‰ç«¯æ„å»º</span>
<span class="hljs-built_in">cd</span> frontend
npm run build
</code></pre>
<h3 data-id="heading-29">2. éƒ¨ç½²åˆ°æœåŠ¡å™¨</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨ PM2 ç®¡ç†è¿›ç¨‹</span>
npm install -g pm2

<span class="hljs-comment"># å¯åŠ¨åç«¯</span>
<span class="hljs-built_in">cd</span> backend
pm2 start dist/server.js --name rag-backend

<span class="hljs-comment"># å¯åŠ¨å‰ç«¯ï¼ˆä½¿ç”¨ nginx æˆ–å…¶ä»–é™æ€æœåŠ¡å™¨ï¼‰</span>
</code></pre>
<h3 data-id="heading-30">3. Docker éƒ¨ç½²</h3>
<pre><code class="hljs language-dockerfile" lang="dockerfile"># Dockerfile
FROM node:18-alpine

WORKDIR /app

# å®‰è£…ä¾èµ–
COPY package*.json ./
RUN npm install

# å¤åˆ¶ä»£ç 
COPY . .

# æ„å»º
RUN npm run build

# å¯åŠ¨
CMD ["npm", "start"]
</code></pre>
<h2 data-id="heading-31">ğŸ’¡ æ‰©å±•æ€è·¯</h2>
<p>åŸºäºè¿™ä¸ªé¡¹ç›®ï¼Œä½ å¯ä»¥ï¼š</p>
<h3 data-id="heading-32">1. æ¥å…¥å…¶ä»– AI æ¨¡å‹</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// OpenAI</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">"gpt-4"</span>,
  <span class="hljs-attr">openAIApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span>,
});

<span class="hljs-comment">// DeepSeek</span>
<span class="hljs-keyword">const</span> llm = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatOpenAI</span>({
  <span class="hljs-attr">modelName</span>: <span class="hljs-string">"deepseek-chat"</span>,
  <span class="hljs-attr">openAIApiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DEEPSEEK_API_KEY</span>,
  <span class="hljs-attr">configuration</span>: {
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">"https://api.deepseek.com"</span>,
  },
});
</code></pre>
<h3 data-id="heading-33">2. æ·»åŠ æ›´å¤šæ–‡æ¡£æ ¼å¼</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// Excel</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ExcelLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/document_loaders"</span>;

<span class="hljs-comment">// CSV</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CSVLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/document_loaders"</span>;

<span class="hljs-comment">// ç½‘é¡µ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CheerioWebBaseLoader</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">"langchain/document_loaders"</span>;
</code></pre>
<h3 data-id="heading-34">3. å®ç°å¤šè½®å¯¹è¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ·»åŠ å¯¹è¯å†å²</span>
<span class="hljs-keyword">const</span> chatHistory = [];

<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> ragChain.<span class="hljs-title function_">call</span>({
  <span class="hljs-attr">question</span>: message,
  <span class="hljs-attr">chat_history</span>: chatHistory,
});

chatHistory.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">question</span>: message, <span class="hljs-attr">answer</span>: response });
</code></pre>
<h3 data-id="heading-35">4. æ·»åŠ ç”¨æˆ·è®¤è¯</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> jwt <span class="hljs-keyword">from</span> <span class="hljs-string">"jsonwebtoken"</span>;

<span class="hljs-comment">// JWT è®¤è¯ä¸­é—´ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">authMiddleware</span> = (<span class="hljs-params">req, res, next</span>) =&gt; {
  <span class="hljs-keyword">const</span> token = req.<span class="hljs-property">headers</span>.<span class="hljs-property">authorization</span>?.<span class="hljs-title function_">split</span>(<span class="hljs-string">" "</span>)[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">if</span> (!token) <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"Unauthorized"</span> });

  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> decoded = jwt.<span class="hljs-title function_">verify</span>(token, process.<span class="hljs-property">env</span>.<span class="hljs-property">JWT_SECRET</span>);
    req.<span class="hljs-property">user</span> = decoded;
    <span class="hljs-title function_">next</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    res.<span class="hljs-title function_">status</span>(<span class="hljs-number">401</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">"Invalid token"</span> });
  }
};
</code></pre>
<h2 data-id="heading-36">ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-37">1. ç¼“å­˜ç­–ç•¥</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">NodeCache</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"node-cache"</span>;

<span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NodeCache</span>({ <span class="hljs-attr">stdTTL</span>: <span class="hljs-number">600</span> }); <span class="hljs-comment">// 10 åˆ†é’Ÿç¼“å­˜</span>

<span class="hljs-comment">// ç¼“å­˜æ£€ç´¢ç»“æœ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getCachedResults</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">query: <span class="hljs-built_in">string</span></span>) =&gt; {
  <span class="hljs-keyword">const</span> cached = cache.<span class="hljs-title function_">get</span>(query);
  <span class="hljs-keyword">if</span> (cached) <span class="hljs-keyword">return</span> cached;

  <span class="hljs-keyword">const</span> results = <span class="hljs-keyword">await</span> vectorStore.<span class="hljs-title function_">similaritySearch</span>(query);
  cache.<span class="hljs-title function_">set</span>(query, results);
  <span class="hljs-keyword">return</span> results;
};
</code></pre>
<h3 data-id="heading-38">2. æ‰¹é‡å¤„ç†</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æ‰¹é‡ä¸Šä¼ æ–‡æ¡£</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">uploadBatch</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">files: File[]</span>) =&gt; {
  <span class="hljs-keyword">const</span> promises = files.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> <span class="hljs-title function_">processDocument</span>(file));
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(promises);
};
</code></pre>
<h3 data-id="heading-39">3. æ•°æ®åº“ä¼˜åŒ–</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šæœŸæ¸…ç†è¿‡æœŸæ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">cleanupOldDocuments</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> thirtyDaysAgo = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - <span class="hljs-number">30</span> * <span class="hljs-number">24</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>;
  <span class="hljs-keyword">await</span> vectorStore.<span class="hljs-title function_">delete</span>({
    <span class="hljs-attr">filter</span>: <span class="hljs-string">`timestamp &lt; <span class="hljs-subst">${thirtyDaysAgo}</span>`</span>,
  });
};
</code></pre>
<h2 data-id="heading-40">ğŸ¯ å­¦ä¹ è·¯å¾„å»ºè®®</h2>
<p>å¦‚æœä½ æ˜¯ AI å¼€å‘æ–°æ‰‹ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºå­¦ä¹ ï¼š</p>
<h3 data-id="heading-41">ç¬¬ä¸€é˜¶æ®µï¼šè¿è¡Œèµ·æ¥ï¼ˆ1 å¤©ï¼‰</h3>
<ol>
<li>âœ… å…‹éš†é¡¹ç›®å¹¶æˆåŠŸè¿è¡Œ</li>
<li>âœ… ä¸Šä¼ æ–‡æ¡£å¹¶æµ‹è¯•é—®ç­”</li>
<li>âœ… ç†è§£æ•´ä½“æµç¨‹</li>
</ol>
<h3 data-id="heading-42">ç¬¬äºŒé˜¶æ®µï¼šç†è§£åŸç†ï¼ˆ3-5 å¤©ï¼‰</h3>
<ol>
<li>ğŸ“š å­¦ä¹  RAG çš„åŸºæœ¬æ¦‚å¿µ</li>
<li>ğŸ” ç†è§£å‘é‡åŒ–å’Œè¯­ä¹‰æœç´¢</li>
<li>ğŸ¤– äº†è§£ LangChain.js çš„ä½¿ç”¨</li>
<li>ğŸ’¬ å­¦ä¹ æµå¼è¾“å‡ºçš„å®ç°</li>
</ol>
<h3 data-id="heading-43">ç¬¬ä¸‰é˜¶æ®µï¼šåŠ¨æ‰‹æ”¹é€ ï¼ˆ1-2 å‘¨ï¼‰</h3>
<ol>
<li>ğŸ¨ ä¿®æ”¹ UI æ ·å¼</li>
<li>âš™ï¸ è°ƒæ•´æ£€ç´¢å‚æ•°</li>
<li>ğŸ”§ æ·»åŠ æ–°åŠŸèƒ½</li>
<li>ğŸš€ éƒ¨ç½²åˆ°æœåŠ¡å™¨</li>
</ol>
<h3 data-id="heading-44">ç¬¬å››é˜¶æ®µï¼šæ·±å…¥ä¼˜åŒ–ï¼ˆæŒç»­ï¼‰</h3>
<ol>
<li>ğŸ“Š æ€§èƒ½ä¼˜åŒ–</li>
<li>ğŸ” å®‰å…¨åŠ å›º</li>
<li>ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—</li>
<li>ğŸ¯ ç”¨æˆ·ä½“éªŒæå‡</li>
</ol>
<h2 data-id="heading-45">ğŸ¤ å‚ä¸è´¡çŒ®</h2>
<p>æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼</p>
<p><strong>é¡¹ç›®åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjinghaonode%2Frag-knowledge-assistant" target="_blank" title="https://github.com/jinghaonode/rag-knowledge-assistant" ref="nofollow noopener noreferrer">github.com/jinghaonodeâ€¦</a></p>
<p>å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­ï¸</p>
<h2 data-id="heading-46">ğŸ“š å‚è€ƒèµ„æº</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2F" target="_blank" title="https://js.langchain.com/" ref="nofollow noopener noreferrer">LangChain.js æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.bigmodel.cn%2Fdev%2Fapi" target="_blank" title="https://open.bigmodel.cn/dev/api" ref="nofollow noopener noreferrer">æ™ºè°± AI æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Flancedb.github.io%2Flancedb%2F" target="_blank" title="https://lancedb.github.io/lancedb/" ref="nofollow noopener noreferrer">LanceDB æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.pinecone.io%2Flearn%2Fretrieval-augmented-generation%2F" target="_blank" title="https://www.pinecone.io/learn/retrieval-augmented-generation/" ref="nofollow noopener noreferrer">RAG æŠ€æœ¯è¯¦è§£</a></li>
</ul>
<h2 data-id="heading-47">ğŸ’¬ æœ€åçš„è¯</h2>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è¢« Python å’Œå¤æ‚çš„ç¯å¢ƒé…ç½®æŒ¡åœ¨ AI å¼€å‘çš„é—¨å¤–ã€‚</p>
<p>è¿™ä¸ªé¡¹ç›®è¯æ˜äº†ï¼š<strong>ç”¨ JavaScript/TypeScript ä¹Ÿèƒ½åšå‡ºå¼ºå¤§çš„ AI åº”ç”¨ï¼</strong></p>
<p>å¸Œæœ›è¿™ä¸ªé¡¹ç›®èƒ½å¸®åŠ©æ›´å¤šå‰ç«¯å¼€å‘è€…ï¼š</p>
<ul>
<li>ğŸ¯ å¿«é€Ÿå…¥é—¨ AI å¼€å‘</li>
<li>ğŸ“š ç†è§£ RAG æŠ€æœ¯åŸç†</li>
<li>ğŸš€ æ­å»ºè‡ªå·±çš„ AI åº”ç”¨</li>
<li>ğŸ’¡ æ¿€å‘æ›´å¤šåˆ›æ„æƒ³æ³•</li>
</ul>
<p><strong>AI æ—¶ä»£å·²ç»åˆ°æ¥ï¼Œè®©æˆ‘ä»¬ä¸€èµ·ç”¨ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆï¼Œåˆ›é€ æ›´å¤šå¯èƒ½ï¼</strong></p>
<hr/>
<p>å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ï¼š</p>
<ul>
<li>ğŸ‘ ç‚¹èµæ”¯æŒ</li>
<li>ğŸ’¬ è¯„è®ºäº¤æµ</li>
<li>ğŸ”— åˆ†äº«ç»™æ›´å¤šå‰ç«¯å°ä¼™ä¼´</li>
<li>â­ï¸ ç»™é¡¹ç›®ä¸€ä¸ª Star</li>
</ul>
<p>æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºè®¨è®ºï¼</p>
<hr/>
<p><strong>ä½œè€…ï¼š</strong> \hnode<br/>
<strong>é¡¹ç›®åœ°å€ï¼š</strong> <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjinghaonode%2Frag-knowledge-assistant" target="_blank" title="https://github.com/jinghaonode/rag-knowledge-assistant" ref="nofollow noopener noreferrer">github.com/jinghaonodeâ€¦</a><br/>
<strong>è”ç³»æ–¹å¼ï¼š</strong> <a href="https://link.juejin.cn?target=mailto%3A1137772623%40qq.com" target="_blank" title="mailto:1137772623@qq.com" ref="nofollow noopener noreferrer">1137772623@qq.com</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Fiddlerä½¿ç”¨æ•™ç¨‹ä¸æŠ“åŒ…å®æˆ˜ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—]]></title>    <link>https://juejin.cn/post/7576558359839735846</link>    <guid>https://juejin.cn/post/7576558359839735846</guid>    <pubDate>2025-11-25T07:40:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576558359839735846" data-draft-id="7576483553878261786" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Fiddlerä½¿ç”¨æ•™ç¨‹ä¸æŠ“åŒ…å®æˆ˜ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:40:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aiopencode"/> <meta itemprop="url" content="https://juejin.cn/user/1898230261493865"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Fiddlerä½¿ç”¨æ•™ç¨‹ä¸æŠ“åŒ…å®æˆ˜ HTTPHTTPSæŠ“åŒ…ã€ä»£ç†é…ç½®ä¸æ¥å£è°ƒè¯•å®Œæ•´æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1898230261493865/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aiopencode
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:40:25.000Z" title="Tue Nov 25 2025 07:40:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å‰åç«¯è”è°ƒã€æ¥å£æ’æŸ¥å’Œæ€§èƒ½åˆ†æä¸­ï¼Œâ€œæŠ“åŒ…â€å‡ ä¹æ˜¯æ¯ä¸ªå¼€å‘è€…éƒ½ä¼šç”¨åˆ°çš„æŠ€èƒ½ã€‚
ä½†å¾ˆå¤šäººè™½ç„¶å¬è¿‡ <strong>FiddleræŠ“åŒ…å·¥å…·</strong>ï¼Œå´æœªçœŸæ­£æŒæ¡å®ƒçš„å¼ºå¤§åŠŸèƒ½â€”â€”
ä¸ä»…èƒ½æŸ¥çœ‹ç½‘ç»œè¯·æ±‚ï¼Œè¿˜èƒ½ä¿®æ”¹ã€æ¨¡æ‹Ÿã€åˆ†æç”šè‡³ä¼˜åŒ–ç½‘ç»œè¡Œä¸ºã€‚</p>
<p>æœ¬æ–‡å°†ä»å¼€å‘è€…çš„è§†è§’ï¼Œç³»ç»Ÿè®²è§£ <strong>Fiddlerå®‰è£…ä¸é…ç½®ã€HTTPSæŠ“åŒ…ã€ä»£ç†è®¾ç½®</strong> ä»¥åŠå®æˆ˜è°ƒè¯•æŠ€å·§ï¼Œå¸®åŠ©ä½ ä»å…¥é—¨åˆ°ç†Ÿç»ƒæŒæ¡è¿™æ¬¾â€œä¸‡èƒ½è°ƒè¯•åˆ©å™¨â€ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸€ã€ä»€ä¹ˆæ˜¯ Fiddlerï¼Ÿä¸ºä»€ä¹ˆå¼€å‘è€…ç¦»ä¸å¼€å®ƒï¼Ÿ</strong></h2>
<p><strong>Fiddler</strong> æ˜¯ Telerik å…¬å¸å‡ºå“çš„ä¸€æ¬¾ä¸“ä¸š HTTP/HTTPS æŠ“åŒ…ä¸è°ƒè¯•å·¥å…·ã€‚
å®ƒèƒ½æ•è·ç³»ç»Ÿçš„æ‰€æœ‰ç½‘ç»œè¯·æ±‚ï¼Œå¹¶è®©ä½ æŸ¥çœ‹ã€ä¿®æ”¹ã€é‡æ”¾è¯·æ±‚æˆ–å“åº”ã€‚</p>
<p>ç›¸æ¯” Charlesã€Postman æˆ– Wiresharkï¼ŒFiddler çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>å…è´¹ä¸”åŠŸèƒ½å¼ºå¤§ï¼›</li>
<li>æ”¯æŒ HTTPS åŠ å¯†æµé‡è§£æï¼›</li>
<li>å¯è®¾ç½®æ–­ç‚¹ã€ä¿®æ”¹è¯·æ±‚ä¸å“åº”ï¼›</li>
<li>å†…ç½® Mock åŠŸèƒ½ï¼ˆAutoResponderï¼‰ï¼›</li>
<li>æ”¯æŒ Webã€Appã€å°ç¨‹åºå¤šç«¯æŠ“åŒ…ï¼›</li>
<li>ç•Œé¢æ¸…æ™°ï¼Œè°ƒè¯•é€»è¾‘è´´è¿‘å¼€å‘æ€ç»´ã€‚</li>
</ul>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p>Fiddler æ˜¯ä¸€æ¬¾è®©å¼€å‘è€…â€œçœ‹å¾—è§ç½‘ç»œè¯·æ±‚ã€æ”¹å¾—åŠ¨æ¥å£å‚æ•°ã€æµ‹å¾—å‡†æ€§èƒ½ç“¶é¢ˆâ€çš„ç»¼åˆè°ƒè¯•å·¥å…·ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1"><strong>äºŒã€Fiddlerå®‰è£…ä¸åŸºç¡€é…ç½®</strong></h2>
<h3 data-id="heading-2"><strong>1. å®‰è£…ä¸å¯åŠ¨</strong></h3>
<p>Fiddler å®‰è£…åŒ…ä½“ç§¯å°ï¼Œå®‰è£…è¿‡ç¨‹ç®€å•ï¼Œæ”¯æŒ Windows å’Œ Macï¼ˆFiddler Everywhereï¼‰ã€‚
å¯åŠ¨åï¼Œå®ƒä¼šè‡ªåŠ¨æ¥ç®¡ç³»ç»Ÿä»£ç†ï¼Œå®æ—¶ç›‘å¬ç½‘ç»œè¯·æ±‚ã€‚</p>
<ul>
<li>å·¦ä¸‹è§’æ˜¾ç¤º â€œCapturingâ€ è¡¨ç¤ºæ­£åœ¨æŠ“åŒ…ï¼›</li>
<li>è‹¥ä¸º â€œPausedâ€ï¼Œç‚¹å‡»å³å¯æ¢å¤æŠ“åŒ…çŠ¶æ€ã€‚</li>
</ul>
<p>æ‰“å¼€æµè§ˆå™¨è®¿é—®ä»»æ„ç½‘ç«™ï¼Œä½ ä¼šçœ‹åˆ°è¯·æ±‚æµåœ¨ä¸»ç•Œé¢å·¦ä¾§ä¾æ¬¡å‡ºç°ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>2. Fiddlerä»£ç†é…ç½®ï¼ˆç”µè„‘ + ç§»åŠ¨ç«¯ï¼‰</strong></h3>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒFiddler ä»…èƒ½æŠ“å–æœ¬æœºè¯·æ±‚ã€‚
å¦‚æœä½ æƒ³è°ƒè¯• App æˆ–å°ç¨‹åºæ¥å£ï¼Œéœ€è¦å¼€å¯è¿œç¨‹ä»£ç†ã€‚</p>
<p><strong>é…ç½®æ–¹æ³•å¦‚ä¸‹ï¼š</strong></p>
<ol>
<li>æ‰“å¼€èœå•æ  <code>Tools â†’ Options â†’ Connections</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Allow remote computers to connect</strong>ï¼›</li>
<li>è®°å½•å½“å‰ç”µè„‘çš„ IP åœ°å€ä¸ç«¯å£å·ï¼ˆé»˜è®¤ 8888ï¼‰ï¼›</li>
<li>ç¡®ä¿æ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ Wi-Fi ç½‘ç»œï¼›</li>
<li>åœ¨æ‰‹æœº Wi-Fi è®¾ç½®ä¸­æ·»åŠ ä»£ç†ï¼š
<ul>
<li>ä¸»æœºåï¼šç”µè„‘ IP</li>
<li>ç«¯å£å·ï¼š8888</li>
</ul>
</li>
</ol>
<p>æ­¤æ—¶ï¼Œç§»åŠ¨ç«¯çš„è¯·æ±‚å°†é€šè¿‡ç”µè„‘è½¬å‘ï¼ŒFiddler å³å¯æŠ“å–ã€‚</p>
<hr/>
<h3 data-id="heading-4"><strong>3. HTTPS æŠ“åŒ…é…ç½®</strong></h3>
<p>å¤§éƒ¨åˆ†ç°ä»£ç½‘ç«™å’Œæ¥å£å‡ä½¿ç”¨ HTTPS åè®®ã€‚
è‹¥è¦æŸ¥çœ‹åŠ å¯†å†…å®¹ï¼Œéœ€è¦å®‰è£… Fiddler è¯ä¹¦å¹¶å¼€å¯è§£å¯†ã€‚</p>
<p><strong>é…ç½®æ­¥éª¤ï¼š</strong></p>
<ul>
<li>æ‰“å¼€ <code>Tools â†’ Options â†’ HTTPS</code>ï¼›</li>
<li>å‹¾é€‰ <strong>Decrypt HTTPS traffic</strong>ï¼›</li>
<li>ç‚¹å‡» â€œActions â†’ Trust Root Certificateâ€ï¼›</li>
<li>å®‰è£…å¹¶ä¿¡ä»»æ ¹è¯ä¹¦ï¼›</li>
<li>è‹¥è¦æŠ“å–æ‰‹æœºæµé‡ï¼Œè¿˜éœ€å¯¼å‡ºè¯ä¹¦å¹¶åœ¨ç§»åŠ¨ç«¯ä¿¡ä»»ã€‚</li>
</ul>
<p>è®¾ç½®å®Œæˆåï¼Œä½ å°†èƒ½æŸ¥çœ‹ HTTPS è¯·æ±‚çš„å®Œæ•´å†…å®¹ï¼ŒåŒ…æ‹¬ Headerã€Body ä¸å“åº”ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>ä¸‰ã€Fiddlerä½¿ç”¨æ•™ç¨‹ï¼šæ ¸å¿ƒåŠŸèƒ½ä¸æŠ€å·§</strong></h2>
<h3 data-id="heading-6"><strong>1. è¯·æ±‚ä¸å“åº”åˆ†æ</strong></h3>
<p>æ¯ä¸€æ¡ç½‘ç»œè¯·æ±‚éƒ½åŒ…å«ä¸°å¯Œçš„ä¿¡æ¯ï¼š</p>
<ul>
<li>è¯·æ±‚æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰ï¼›</li>
<li>URL ä¸å‚æ•°ï¼›</li>
<li>è¯·æ±‚å¤´ä¸ Cookieï¼›</li>
<li>å“åº”çŠ¶æ€ç ã€Header ä¸ Bodyï¼›</li>
<li>è¯·æ±‚è€—æ—¶ã€æµé‡å¤§å°ã€‚</li>
</ul>
<p><strong>å¼€å‘è€…åº”ç”¨åœºæ™¯ï¼š</strong>
ä¸€æ¬¡æ”¯ä»˜æ¥å£æ€»æ˜¯è¿”å›ç©ºæ•°æ®ï¼Œé€šè¿‡ Fiddler å‘ç°å‰ç«¯è¯·æ±‚çš„ Content-Type å†™é”™ï¼Œåç«¯æœªèƒ½æ­£ç¡®è§£æå‚æ•°ï¼Œé—®é¢˜ç¬é—´å®šä½ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>2. æ¨¡æ‹Ÿæ¥å£ä¸Mockæ•°æ®ï¼ˆAutoResponderï¼‰</strong></h3>
<p>Fiddler è‡ªå¸¦çš„ AutoResponder æ¨¡å—æ˜¯å‰ç«¯å¼€å‘è€…çš„ç¦éŸ³ã€‚
å®ƒå¯ä»¥æ¨¡æ‹Ÿæ¥å£å“åº”ï¼Œæ— éœ€ç­‰å¾…åç«¯æ¥å£ä¸Šçº¿ã€‚</p>
<p><strong>ä½¿ç”¨æ­¥éª¤ï¼š</strong></p>
<ol>
<li>æ‰“å¼€ AutoResponder é¢æ¿ï¼›</li>
<li>ç‚¹å‡» â€œAdd Ruleâ€ æ·»åŠ åŒ¹é…è§„åˆ™ï¼›</li>
<li>é€‰æ‹©æœ¬åœ° JSON æ–‡ä»¶æˆ–è‡ªå®šä¹‰è¿”å›å†…å®¹ï¼›</li>
<li>å‹¾é€‰ â€œEnable Rulesâ€ï¼Œå³å¯ç”Ÿæ•ˆã€‚</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼š</strong>
åœ¨å‰ç«¯è°ƒè¯•æ—¶æ¨¡æ‹Ÿæ¥å£è¿”å› <code>{ "code": 200, "msg": "success" }</code>ï¼Œ
å¯ç›´æ¥éªŒè¯å‰ç«¯é€»è¾‘ï¼Œä¸å¿…ä¾èµ–çœŸå®åç«¯ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>3. è¯·æ±‚æ‹¦æˆªä¸ä¿®æ”¹ï¼ˆBreakpointsï¼‰</strong></h3>
<p>Fiddler æ”¯æŒæ–­ç‚¹è°ƒè¯•ï¼Œå¯åœ¨è¯·æ±‚å‘å‡ºå‰æˆ–å“åº”è¿”å›å‰æš‚åœã€‚</p>
<p><strong>å¸¸ç”¨åœºæ™¯ï¼š</strong></p>
<ul>
<li>æ‹¦æˆªè¯·æ±‚ä¿®æ”¹å‚æ•°ï¼›</li>
<li>æ¨¡æ‹Ÿæ¥å£é”™è¯¯ï¼ˆå¦‚ 500/403ï¼‰ï¼›</li>
<li>å»¶è¿Ÿå“åº”æµ‹è¯•åŠ è½½é€»è¾‘ã€‚</li>
</ul>
<p><strong>å‘½ä»¤æŠ€å·§ï¼š</strong>
åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ <code>bpu /api/login</code> å³å¯å¯¹æŒ‡å®šæ¥å£è®¾ç½®æ–­ç‚¹ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>4. æ„é€ ä¸é‡æ”¾è¯·æ±‚ï¼ˆComposerï¼‰</strong></h3>
<p>Composer æ¨¡å—ç±»ä¼¼ Postmanï¼Œå¯ç›´æ¥æ„é€ æˆ–ä¿®æ”¹ HTTP è¯·æ±‚ã€‚</p>
<p>å¸¸è§ç”¨é€”åŒ…æ‹¬ï¼š</p>
<ul>
<li>éªŒè¯æ¥å£ç­¾åï¼›</li>
<li>è°ƒè¯•å‚æ•°åˆæ³•æ€§ï¼›</li>
<li>å¤ç°çº¿ä¸Š Bugã€‚</li>
</ul>
<p><strong>å°æŠ€å·§ï¼š</strong>
å³é”®ä»»æ„è¯·æ±‚ â†’ â€œReplay â†’ Reissue Requestâ€ å¯å¿«é€Ÿé‡æ”¾è¯·æ±‚ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>5. æ€§èƒ½åˆ†æï¼ˆTimelineï¼‰</strong></h3>
<p>Timeline æ¨¡å—èƒ½å±•ç¤ºæ¯ä¸ªè¯·æ±‚çš„è¯¦ç»†é˜¶æ®µï¼š
DNS æŸ¥è¯¢ â†’ TCP è¿æ¥ â†’ TLS æ¡æ‰‹ â†’ æœåŠ¡å™¨å“åº” â†’ æ•°æ®ä¸‹è½½ã€‚</p>
<p>é€šè¿‡åˆ†æè¿™äº›é˜¶æ®µçš„è€—æ—¶ï¼Œå¼€å‘è€…å¯åˆ¤æ–­æ€§èƒ½ç“¶é¢ˆç©¶ç«Ÿæ˜¯ç½‘ç»œé—®é¢˜ã€åç«¯å»¶è¿Ÿï¼Œè¿˜æ˜¯å‰ç«¯è§¦å‘è¯·æ±‚è¿‡å¤šã€‚</p>
<hr/>
<h2 data-id="heading-11"><strong>å››ã€Fiddlerå®æˆ˜æ¡ˆä¾‹ï¼šå¿«é€Ÿå®šä½æ¥å£æ€§èƒ½ç“¶é¢ˆ</strong></h2>
<p>åœ¨ä¸€æ¬¡ H5 åº”ç”¨ä¼˜åŒ–ä¸­ï¼Œæˆ‘ä»¬å‘ç°é¡µé¢åˆæ¬¡åŠ è½½æ—¶é—´è¶…è¿‡ 6 ç§’ã€‚
é€šè¿‡ Fiddler æŠ“åŒ…åˆ†æå‘ç°ï¼š</p>
<ul>
<li>å›¾ç‰‡èµ„æºåŠ è½½å¹¶è¡Œé˜»å¡äº†æ¥å£è¯·æ±‚ï¼›</li>
<li>æ¥å£è¿”å›æ•°æ®é‡è¿‡å¤§ï¼›</li>
<li>ç¼ºä¹ç¼“å­˜æ§åˆ¶ç­–ç•¥ã€‚</li>
</ul>
<p>ä¼˜åŒ–æ–¹æ¡ˆï¼š</p>
<ul>
<li>å¯ç”¨ HTTP ç¼“å­˜å¤´ï¼›</li>
<li>å°†éå…³é”®èµ„æºå»¶è¿ŸåŠ è½½ï¼›</li>
<li>å‹ç¼©æ¥å£ JSON å“åº”ã€‚</li>
</ul>
<p>ç»“æœé¦–å±åŠ è½½ä» 6 ç§’é™è‡³ 1.9 ç§’ã€‚</p>
<p><strong>ç»éªŒæ€»ç»“ï¼š</strong></p>
<blockquote>
<p>Fiddler ä¸åªæ˜¯è°ƒè¯•å·¥å…·ï¼Œæ›´æ˜¯æ€§èƒ½è¯Šæ–­åŠ©æ‰‹ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-12"><strong>äº”ã€Fiddleræ ¸å¿ƒåŠŸèƒ½å¯¹ç…§è¡¨</strong></h2>



































<table><thead><tr><th>åŠŸèƒ½æ¨¡å—</th><th>åŠŸèƒ½è¯´æ˜</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Filters</strong></td><td>æŒ‰åŸŸåæˆ–å…³é”®å­—è¿‡æ»¤è¯·æ±‚</td><td>èšç„¦ç›®æ ‡æ¥å£</td></tr><tr><td><strong>AutoResponder</strong></td><td>æ¨¡æ‹Ÿæ¥å£è¿”å›æ•°æ®</td><td>å‰ç«¯ç‹¬ç«‹å¼€å‘</td></tr><tr><td><strong>Breakpoints</strong></td><td>æ‹¦æˆªå¹¶ä¿®æ”¹è¯·æ±‚</td><td>æ¨¡æ‹Ÿå¼‚å¸¸è°ƒè¯•</td></tr><tr><td><strong>Composer</strong></td><td>æ„é€ ä¸é‡æ”¾è¯·æ±‚</td><td>æ¥å£æµ‹è¯•ä¸éªŒè¯</td></tr><tr><td><strong>Timeline</strong></td><td>åˆ†æè¯·æ±‚æ€§èƒ½</td><td>ç½‘ç»œä¼˜åŒ–ä¸è¯Šæ–­</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13"><strong>å…­ã€Fiddlerä¸å…¶ä»–æŠ“åŒ…å·¥å…·å¯¹æ¯”</strong></h2>






























<table><thead><tr><th>å·¥å…·</th><th>ä¼˜ç‚¹</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><strong>Fiddler</strong></td><td>å…è´¹ã€åŠŸèƒ½å¼ºã€æ”¯æŒè¯·æ±‚ä¿®æ”¹</td><td>å¼€å‘ / æµ‹è¯•äººå‘˜</td></tr><tr><td><strong>Charles</strong></td><td>ç•Œé¢å‹å¥½ã€æ“ä½œç®€ä¾¿</td><td>åˆå­¦è€…è°ƒè¯•</td></tr><tr><td><strong>Postman</strong></td><td>è¯·æ±‚æ„é€ çµæ´»</td><td>API è°ƒè¯•ä¸æµ‹è¯•</td></tr><tr><td><strong>Wireshark</strong></td><td>ç½‘ç»œå±‚åˆ†æèƒ½åŠ›å¼º</td><td>ç½‘ç»œå®‰å…¨ / åè®®ç ”ç©¶</td></tr></tbody></table>
<p><strong>ç»“è®ºï¼š</strong>
Fiddler åœ¨æ¥å£å±‚è°ƒè¯•ä¸­æœ€å…·çµæ´»æ€§å’Œæ€§ä»·æ¯”ï¼Œ
å°¤å…¶é€‚åˆå¸Œæœ›å…¨é¢æŒæ§è¯·æ±‚è¿‡ç¨‹çš„å¼€å‘è€…ã€‚</p>
<hr/>
<h2 data-id="heading-14"><strong>ä¸ƒã€å­¦ä¹ ä¸èµ„æºæ¨è</strong></h2>
<p>æƒ³è¿›ä¸€æ­¥æŒæ¡ Fiddlerï¼Ÿå¯ä»¥è®¿é—®**<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.fiddler.hk%2F" target="_blank" title="https://www.fiddler.hk/" ref="nofollow noopener noreferrer">Fiddler ä¸­æ–‡ç½‘</a>**ï¼Œ æŒæ¡ <strong>Fiddlerä½¿ç”¨æ•™ç¨‹</strong>ã€<strong>ä»£ç†é…ç½®</strong> ä¸ <strong>HTTPS è°ƒè¯•æŠ€å·§</strong></p>
<p>ç½‘ç«™æä¾›ï¼š</p>
<ul>
<li>Fiddler å®‰è£…ä¸é…ç½®æ•™ç¨‹ï¼›</li>
<li>HTTPS æŠ“åŒ…ä¸è¯ä¹¦è®¾ç½®ï¼›</li>
<li>ç§»åŠ¨ç«¯ä»£ç†æŠ“åŒ…æŒ‡å—ï¼›</li>
<li>Mock æ•°æ®ä¸æ–­ç‚¹è°ƒè¯•å®ä¾‹ï¼›</li>
<li>æ€§èƒ½åˆ†æä¸é—®é¢˜æ’æŸ¥æŠ€å·§ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Chrome DevTools é«˜çº§è°ƒè¯•æŠ€å·§ï¼šä»å…¥é—¨åˆ°çœŸé¦™]]></title>    <link>https://juejin.cn/post/7576258838300622894</link>    <guid>https://juejin.cn/post/7576258838300622894</guid>    <pubDate>2025-11-25T07:45:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576258838300622894" data-draft-id="7576476897947828251" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Chrome DevTools é«˜çº§è°ƒè¯•æŠ€å·§ï¼šä»å…¥é—¨åˆ°çœŸé¦™"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-25T07:45:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‰¹çº§ä¸šåŠ¡ä¸“å®¶"/> <meta itemprop="url" content="https://juejin.cn/user/2101921961481512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Chrome DevTools é«˜çº§è°ƒè¯•æŠ€å·§ï¼šä»å…¥é—¨åˆ°çœŸé¦™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2101921961481512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‰¹çº§ä¸šåŠ¡ä¸“å®¶
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:45:01.000Z" title="Tue Nov 25 2025 07:45:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Chrome DevTools é«˜çº§è°ƒè¯•æŠ€å·§ï¼šä»å…¥é—¨åˆ°çœŸé¦™</h2>
<blockquote>
<p>ä½œä¸ºå‰ç«¯å¼€å‘è€…ï¼ŒChrome DevTools æ˜¯æˆ‘ä»¬æ¯å¤©éƒ½åœ¨ç”¨çš„å·¥å…·ã€‚ä½†ä½ çœŸçš„ç”¨åˆ°ä½äº†å—ï¼Ÿæœ¬æ–‡å°†åˆ†äº«ä¸€äº›å®ç”¨çš„è°ƒè¯•æŠ€å·§ï¼Œç‰¹åˆ«æ˜¯ <strong>Overridesï¼ˆæœ¬åœ°æ›¿æ¢ï¼‰</strong> åŠŸèƒ½ï¼Œè®©ä½ è°ƒè¯•çº¿ä¸Šé—®é¢˜æ—¶ä¸å†æŠ“çã€‚</p>
</blockquote>
<h3 data-id="heading-1">ä¸€ã€Overridesï¼ˆæœ¬åœ°æ›¿æ¢ï¼‰â€”â€” è°ƒè¯•çº¿ä¸Šä»£ç çš„ç¥å™¨</h3>
<h4 data-id="heading-2">1.1 ç—›ç‚¹åœºæ™¯</h4>
<p>ä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›æƒ…å†µï¼š</p>
<ul>
<li>çº¿ä¸Šå‡º bug äº†ï¼Œä½†æœ¬åœ°å¤ç°ä¸äº†</li>
<li>æƒ³å¿«é€ŸéªŒè¯ä¸€ä¸ª CSS ä¿®å¤æ–¹æ¡ˆï¼Œä½†ä¸æƒ³èµ°å‘å¸ƒæµç¨‹</li>
<li>åç«¯æ¥å£è¿”å›çš„æ•°æ®æœ‰é—®é¢˜ï¼Œæƒ³ mock ä¸€ä¸‹æµ‹è¯•å‰ç«¯é€»è¾‘</li>
<li>æƒ³åœ¨çº¿ä¸Šç¯å¢ƒåŠ å‡ è¡Œ <code>console.log</code> å®šä½é—®é¢˜</li>
</ul>
<p><strong>Overrides å¯ä»¥å®Œç¾è§£å†³è¿™äº›é—®é¢˜ï¼</strong></p>
<h4 data-id="heading-3">1.2 ä»€ä¹ˆæ˜¯ Overrides</h4>
<p>Overridesï¼ˆæœ¬åœ°æ›¿æ¢ï¼‰å…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­ <strong>æŒä¹…åŒ–ä¿®æ”¹</strong> ç½‘é¡µçš„ CSSã€JSã€HTML ç­‰èµ„æºã€‚å…³é”®æ˜¯ï¼š<strong>åˆ·æ–°é¡µé¢åä¿®æ”¹ä»ç„¶ä¿ç•™</strong>ã€‚</p>
<h4 data-id="heading-4">1.3 é…ç½®æ­¥éª¤</h4>
<h5 data-id="heading-5">Step 1ï¼šæ‰“å¼€ DevTools å¹¶è®¾ç½®æ–‡ä»¶å¤¹</h5>
<ol>
<li>æŒ‰ <code>F12</code> æˆ– <code>Cmd+Option+I</code>ï¼ˆMacï¼‰æ‰“å¼€ DevTools</li>
<li>åˆ‡æ¢åˆ° <strong>Sourcesï¼ˆæºä»£ç /æ¥æºï¼‰</strong> é¢æ¿</li>
<li>ç‚¹å‡» <strong>Overridesï¼ˆæ›¿æ¢ï¼‰</strong> æ ‡ç­¾</li>
<li>ç‚¹å‡» <strong>ã€Œ+ Select folder for overridesã€</strong></li>
<li>é€‰æ‹©ä¸€ä¸ªæœ¬åœ°ç©ºæ–‡ä»¶å¤¹ï¼ˆå»ºè®®ä¸“é—¨å»ºä¸€ä¸ª <code>chrome-overrides</code> æ–‡ä»¶å¤¹ï¼‰</li>
<li>ç‚¹å‡» <strong>ã€Œå…è®¸ã€</strong> æˆæƒ Chrome è®¿é—®</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6093bcb678044731a57cc2f9223467c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg54m557qn5Lia5Yqh5LiT5a62:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764661501&amp;x-signature=IYhKYBUv41MXbaKtH7Ieh74Yau0%3D" alt="image.png" loading="lazy"/></p>
<h5 data-id="heading-6">Step 2ï¼šå¯ç”¨æœ¬åœ°æ›¿æ¢</h5>
<p>ç¡®ä¿ <strong>ã€ŒEnable Local Overridesã€</strong> å¤é€‰æ¡†å·²å‹¾é€‰ âœ…</p>
<h4 data-id="heading-7">1.4 ä¸‰ç§ä½¿ç”¨æ–¹å¼</h4>
<h5 data-id="heading-8">æ–¹å¼ä¸€ï¼šä¿®æ”¹ CSSï¼ˆæœ€å¸¸ç”¨ï¼‰</h5>
<p><strong>åœºæ™¯</strong>ï¼šå¿«é€ŸéªŒè¯æ ·å¼ä¿®æ”¹æ–¹æ¡ˆ</p>
<ol>
<li>åˆ‡æ¢åˆ° <strong>Elementsï¼ˆå…ƒç´ ï¼‰</strong> é¢æ¿</li>
<li>é€‰ä¸­è¦ä¿®æ”¹çš„å…ƒç´ </li>
<li>åœ¨å³ä¾§ <strong>Stylesï¼ˆæ ·å¼ï¼‰</strong> é¢æ¿ä¸­ä¿®æ”¹ CSS</li>
<li>æ‰¾åˆ°æ¥è‡ª <code>.css</code> æ–‡ä»¶çš„è§„åˆ™ï¼ˆä¼šæ˜¾ç¤ºæ–‡ä»¶åå¦‚ <code>style.css:123</code>ï¼‰</li>
<li><strong>å³é”®ç‚¹å‡» CSS è§„åˆ™</strong> â†’ é€‰æ‹© <strong>ã€ŒSave for overridesã€</strong></li>
<li>åˆ·æ–°é¡µé¢ï¼Œä¿®æ”¹ä»ç„¶ç”Ÿæ•ˆï¼</li>
</ol>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* ä¿®æ”¹å‰ */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;
}

<span class="hljs-comment">/* ä¿®æ”¹å - åˆ·æ–°é¡µé¢ä¾ç„¶æ˜¯çº¢è‰² */</span>
<span class="hljs-selector-class">.button</span> {
  <span class="hljs-attribute">background</span>: red;
}
</code></pre>
<h5 data-id="heading-9">æ–¹å¼äºŒï¼šä¿®æ”¹ JS æ–‡ä»¶</h5>
<p><strong>åœºæ™¯</strong>ï¼šåœ¨çº¿ä¸Šä»£ç ä¸­åŠ  <code>console.log</code> å®šä½é—®é¢˜</p>
<ol>
<li>åœ¨ <strong>Sources</strong> é¢æ¿çš„ <strong>Pageï¼ˆç½‘é¡µï¼‰</strong> æ ‡ç­¾ä¸­æ‰¾åˆ° JS æ–‡ä»¶</li>
<li><strong>å³é”®ç‚¹å‡»æ–‡ä»¶</strong> â†’ é€‰æ‹© <strong>ã€ŒOverride contentï¼ˆæ›¿æ¢å†…å®¹ï¼‰ã€</strong></li>
<li>ç›´æ¥ç¼–è¾‘ä»£ç ï¼ŒåŠ å…¥è°ƒè¯•è¯­å¥</li>
<li>æŒ‰ <code>Cmd+S</code> ä¿å­˜</li>
<li>åˆ·æ–°é¡µé¢ï¼Œä½ çš„ä¿®æ”¹ç”Ÿæ•ˆäº†</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨å…³é”®ä½ç½®åŠ å…¥è°ƒè¯•ä»£ç </span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ğŸ”¥ handleClick è¢«è°ƒç”¨ï¼Œå‚æ•°:'</span>, data)  <span class="hljs-comment">// æ–°å¢</span>
  <span class="hljs-comment">// åŸæœ‰é€»è¾‘...</span>
}
</code></pre>
<h5 data-id="heading-10">æ–¹å¼ä¸‰ï¼šMock API å“åº”ï¼ˆè¶…å®ç”¨ï¼ï¼‰</h5>
<p><strong>åœºæ™¯</strong>ï¼šåç«¯æ¥å£æœ‰é—®é¢˜ï¼Œæƒ³ç”¨å‡æ•°æ®æµ‹è¯•å‰ç«¯é€»è¾‘</p>
<ol>
<li>åˆ‡æ¢åˆ° <strong>Networkï¼ˆç½‘ç»œï¼‰</strong> é¢æ¿</li>
<li>åˆ·æ–°é¡µé¢ï¼Œæ‰¾åˆ°è¦æ‹¦æˆªçš„ API è¯·æ±‚</li>
<li><strong>å³é”®ç‚¹å‡»è¯·æ±‚</strong> â†’ é€‰æ‹© <strong>ã€ŒOverride contentï¼ˆæ›¿æ¢å†…å®¹ï¼‰ã€</strong></li>
<li>ä¿®æ”¹è¿”å›çš„ JSON æ•°æ®</li>
<li><code>Cmd+S</code> ä¿å­˜</li>
<li>åˆ·æ–°é¡µé¢ï¼Œè¯¥æ¥å£ä¼šè¿”å›ä½ ä¿®æ”¹çš„å‡æ•°æ®ï¼</li>
</ol>
<pre><code class="hljs language-json" lang="json"><span class="hljs-comment">// åŸå§‹å“åº”</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>

<span class="hljs-comment">// ä¿®æ”¹å - æ¨¡æ‹Ÿæœ‰æ•°æ®çš„æƒ…å†µ</span>
<span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"data"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµ‹è¯•æ•°æ®1"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-punctuation">{</span><span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"æµ‹è¯•æ•°æ®2"</span><span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-11">1.5 æ–‡ä»¶å¤¹ç»“æ„</h4>
<p>Overrides ä¼šæŒ‰åŸŸåè‡ªåŠ¨ç»„ç»‡æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">chrome-overrides/
â”œâ”€â”€ www.example.com/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ app.js
â””â”€â”€ api.example.com/
    â””â”€â”€ v1/
        â””â”€â”€ <span class="hljs-built_in">users</span>    â† API å“åº”ä¹Ÿèƒ½ä¿å­˜
</code></pre>
<h4 data-id="heading-12">1.6 æ³¨æ„äº‹é¡¹</h4>





























<table><thead><tr><th>è¦ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>ä»…æœ¬åœ°ç”Ÿæ•ˆ</strong></td><td>ä¿®æ”¹åªåœ¨ä½ çš„æµè§ˆå™¨ç”Ÿæ•ˆï¼Œä¸å½±å“å…¶ä»–äºº</td></tr><tr><td><strong>åˆ·æ–°ä¿ç•™</strong></td><td>å…³é—­æµè§ˆå™¨å†æ‰“å¼€ï¼Œä¿®æ”¹ä»åœ¨</td></tr><tr><td><strong>ç¦ç”¨æ–¹æ³•</strong></td><td>å–æ¶ˆå‹¾é€‰ã€ŒEnable Local Overridesã€å³å¯æ¢å¤åŸå§‹å†…å®¹</td></tr><tr><td><strong>æ¸…ç†æ–¹æ³•</strong></td><td>å³é”® Overrides æ–‡ä»¶å¤¹ â†’ ã€ŒClearã€åˆ é™¤æ‰€æœ‰è¦†ç›–</td></tr><tr><td><strong>è¯†åˆ«æ ‡å¿—</strong></td><td>è¢«è¦†ç›–çš„æ–‡ä»¶æ—è¾¹ä¼šæœ‰ <strong>ç´«è‰²åœ†ç‚¹ ğŸŸ£</strong></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-13">äºŒã€æ§åˆ¶å°é­”æ³•å‘½ä»¤</h3>
<h4 data-id="heading-14">2.1 <code>$0</code> - å¿«é€Ÿè®¿é—®é€‰ä¸­å…ƒç´ </h4>
<p>åœ¨ Elements é¢æ¿é€‰ä¸­ä»»æ„å…ƒç´ åï¼Œæ§åˆ¶å°ç›´æ¥è¾“å…¥ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">$0              <span class="hljs-comment">// å½“å‰é€‰ä¸­çš„å…ƒç´ </span>
$0.<span class="hljs-property">innerText</span>    <span class="hljs-comment">// è·å–æ–‡å­—</span>
$0.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>  <span class="hljs-comment">// ä¿®æ”¹æ ·å¼</span>
$0.<span class="hljs-title function_">click</span>()      <span class="hljs-comment">// è§¦å‘ç‚¹å‡»</span>
$1              <span class="hljs-comment">// ä¸Šä¸€ä¸ªé€‰ä¸­çš„å…ƒç´ </span>
$2              <span class="hljs-comment">// ä¸Šä¸Šä¸ª...ä»¥æ­¤ç±»æ¨åˆ° $4</span>
</code></pre>
<h4 data-id="heading-15">2.2 <code>copy()</code> - å¤åˆ¶ä»»æ„æ•°æ®åˆ°å‰ªè´´æ¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¤åˆ¶å…ƒç´ çš„ HTML</span>
<span class="hljs-title function_">copy</span>($0.<span class="hljs-property">outerHTML</span>)

<span class="hljs-comment">// å¤åˆ¶æ ¼å¼åŒ–çš„ JSON</span>
<span class="hljs-title function_">copy</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data, <span class="hljs-literal">null</span>, <span class="hljs-number">2</span>))

<span class="hljs-comment">// å¤åˆ¶æ‰€æœ‰ Cookie</span>
<span class="hljs-title function_">copy</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>)

<span class="hljs-comment">// å¤åˆ¶é¡µé¢æ‰€æœ‰å›¾ç‰‡é“¾æ¥</span>
<span class="hljs-title function_">copy</span>([...<span class="hljs-variable language_">document</span>.<span class="hljs-property">images</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> img.<span class="hljs-property">src</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>))
</code></pre>
<h4 data-id="heading-16">2.3 <code>$$()</code> - ç®€åŒ–ç‰ˆ querySelectorAll</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è·å–æ‰€æœ‰æŒ‰é’®</span>
$$(<span class="hljs-string">'button'</span>)

<span class="hljs-comment">// è·å–æ‰€æœ‰é“¾æ¥çš„ href</span>
$$(<span class="hljs-string">'a'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">a</span> =&gt;</span> a.<span class="hljs-property">href</span>)

<span class="hljs-comment">// è·å–æ‰€æœ‰å›¾ç‰‡çš„ src</span>
$$(<span class="hljs-string">'img'</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">img</span> =&gt;</span> img.<span class="hljs-property">src</span>)

<span class="hljs-comment">// æ‰¹é‡æ“ä½œ</span>
$$(<span class="hljs-string">'.ad-banner'</span>).<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">el</span> =&gt;</span> el.<span class="hljs-title function_">remove</span>())  <span class="hljs-comment">// åˆ é™¤æ‰€æœ‰å¹¿å‘Š</span>
</code></pre>
<h4 data-id="heading-17">2.4 <code>console.table()</code> - è¡¨æ ¼å±•ç¤ºæ•°æ®</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ¯” console.log æ¸…æ™° 100 å€</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">table</span>([
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">'åŒ—äº¬'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">'ä¸Šæµ·'</span> },
  { <span class="hljs-attr">name</span>: <span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">'å¹¿å·'</span> }
])
</code></pre>
<h4 data-id="heading-18">2.5 <code>console.time()</code> - æ€§èƒ½è®¡æ—¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">'æ•°æ®åŠ è½½'</span>)
<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>()
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">'æ•°æ®åŠ è½½'</span>)  
<span class="hljs-comment">// è¾“å‡º: æ•°æ®åŠ è½½: 123.45ms</span>
</code></pre>
<hr/>
<h3 data-id="heading-19">ä¸‰ã€æ–­ç‚¹è°ƒè¯•è¿›é˜¶</h3>
<h4 data-id="heading-20">3.1 æ¡ä»¶æ–­ç‚¹</h4>
<p>ä¸æ˜¯æ¯æ¬¡éƒ½æ–­ï¼Œåªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹æ–­ï¼š</p>
<ol>
<li>Sources é¢æ¿ï¼Œç‚¹å‡»è¡Œå·è®¾ç½®æ–­ç‚¹</li>
<li><strong>å³é”®æ–­ç‚¹</strong> â†’ ã€ŒEdit breakpointï¼ˆç¼–è¾‘æ–­ç‚¹ï¼‰ã€</li>
<li>è¾“å…¥æ¡ä»¶è¡¨è¾¾å¼</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åªæœ‰å½“ id å¤§äº 100 æ—¶æ‰æ–­ç‚¹</span>
id &gt; <span class="hljs-number">100</span>

<span class="hljs-comment">// åªæœ‰ç‰¹å®šç”¨æˆ·æ‰æ–­ç‚¹</span>
user.<span class="hljs-property">name</span> === <span class="hljs-string">'admin'</span>

<span class="hljs-comment">// æ•°ç»„é•¿åº¦è¶…è¿‡ 10 æ‰æ–­ç‚¹</span>
list.<span class="hljs-property">length</span> &gt; <span class="hljs-number">10</span>
</code></pre>
<h4 data-id="heading-21">3.2 æ—¥å¿—æ–­ç‚¹ï¼ˆLogpointï¼‰</h4>
<p>ä¸æš‚åœæ‰§è¡Œï¼Œåªæ‰“å°æ—¥å¿—ï¼š</p>
<ol>
<li><strong>å³é”®è¡Œå·</strong> â†’ ã€ŒAdd logpointã€</li>
<li>è¾“å…¥è¦æ‰“å°çš„å†…å®¹ï¼š<code>'å½“å‰å€¼:', x, y</code></li>
<li>ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œæ—¶è‡ªåŠ¨æ‰“å°ï¼Œä½†ä¸ä¼šæš‚åœ</li>
</ol>
<p><strong>æ¯”æ‰‹åŠ¨åŠ  console.log æ–¹ä¾¿ï¼Œè€Œä¸”ä¸ç”¨æ”¹ä»£ç ï¼</strong></p>
<h4 data-id="heading-22">3.3 XHR/Fetch æ–­ç‚¹</h4>
<p>è¿½è¸ª API è¯·æ±‚çš„è°ƒç”¨æ¥æºï¼š</p>
<ol>
<li>Sources é¢æ¿ â†’ å³ä¾§ <strong>ã€ŒXHR/fetch Breakpointsã€</strong></li>
<li>ç‚¹å‡» <strong>+</strong>ï¼Œè¾“å…¥ URL å…³é”®è¯ï¼ˆå¦‚ <code>api/user</code>ï¼‰</li>
<li>å‘èµ·åŒ¹é…è¯·æ±‚æ—¶è‡ªåŠ¨æ–­ç‚¹</li>
<li>æŸ¥çœ‹ <strong>Call Stack</strong> æ‰¾åˆ°æ˜¯å“ªé‡Œå‘èµ·çš„è¯·æ±‚</li>
</ol>
<h4 data-id="heading-23">3.4 DOM æ–­ç‚¹</h4>
<p>ç›‘æ§å…ƒç´ ä½•æ—¶è¢«ä¿®æ”¹ï¼š</p>
<ol>
<li>Elements é¢æ¿ï¼Œå³é”®ç›®æ ‡å…ƒç´ </li>
<li>é€‰æ‹© <strong>ã€ŒBreak onï¼ˆå‘ç”Ÿä¸­æ–­çš„æ¡ä»¶ï¼‰ã€</strong>ï¼š
<ul>
<li><strong>Subtree modifications</strong>ï¼šå­å…ƒç´ å˜åŒ–æ—¶æ–­ç‚¹</li>
<li><strong>Attribute modifications</strong>ï¼šå±æ€§ï¼ˆclass/styleï¼‰å˜åŒ–æ—¶æ–­ç‚¹</li>
<li><strong>Node removal</strong>ï¼šå…ƒç´ è¢«åˆ é™¤æ—¶æ–­ç‚¹</li>
</ul>
</li>
</ol>
<p><strong>åœºæ™¯</strong>ï¼šæŸä¸ªå…ƒç´ è«åå…¶å¦™æ¶ˆå¤±äº†ï¼Œç”¨ DOM æ–­ç‚¹æ‰¾å‡ºæ˜¯è°åˆ çš„ï¼</p>
<hr/>
<h3 data-id="heading-24">å››ã€ç›‘æ§å‡½æ•°å’Œäº‹ä»¶</h3>
<h4 data-id="heading-25">4.1 <code>monitor()</code> - ç›‘æ§å‡½æ•°è°ƒç”¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§ fetch çš„æ¯æ¬¡è°ƒç”¨</span>
<span class="hljs-title function_">monitor</span>(fetch)
<span class="hljs-comment">// è¾“å‡º: function fetch called with arguments: Request...</span>

<span class="hljs-comment">// å–æ¶ˆç›‘æ§</span>
<span class="hljs-title function_">unmonitor</span>(fetch)
</code></pre>
<h4 data-id="heading-26">4.2 <code>monitorEvents()</code> - ç›‘æ§å…ƒç´ äº‹ä»¶</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç›‘æ§é€‰ä¸­å…ƒç´ çš„ç‚¹å‡»äº‹ä»¶</span>
<span class="hljs-title function_">monitorEvents</span>($0, <span class="hljs-string">'click'</span>)

<span class="hljs-comment">// ç›‘æ§å¤šä¸ªäº‹ä»¶</span>
<span class="hljs-title function_">monitorEvents</span>($0, [<span class="hljs-string">'click'</span>, <span class="hljs-string">'mouseover'</span>, <span class="hljs-string">'mouseout'</span>])

<span class="hljs-comment">// ç›‘æ§æ‰€æœ‰äº‹ä»¶ï¼ˆæ…ç”¨ï¼Œè¾“å‡ºå¾ˆå¤šï¼‰</span>
<span class="hljs-title function_">monitorEvents</span>($0)

<span class="hljs-comment">// å–æ¶ˆç›‘æ§</span>
<span class="hljs-title function_">unmonitorEvents</span>($0)
</code></pre>
<hr/>
<h3 data-id="heading-27">äº”ã€å…¶ä»–å®ç”¨æŠ€å·§</h3>
<h4 data-id="heading-28">5.1 å¼ºåˆ¶å…ƒç´ çŠ¶æ€</h4>
<p>è°ƒè¯• <code>:hover</code>ã€<code>:active</code> ç­‰ä¼ªç±»æ ·å¼ï¼š</p>
<ol>
<li>Elements é¢æ¿ï¼Œé€‰ä¸­å…ƒç´ </li>
<li>ç‚¹å‡» <strong>:hov</strong> æŒ‰é’®ï¼ˆæˆ–å³é”® â†’ ã€ŒForce stateã€ï¼‰</li>
<li>å‹¾é€‰ <code>:hover</code> / <code>:active</code> / <code>:focus</code> / <code>:visited</code></li>
<li>å…ƒç´ ä¿æŒè¯¥çŠ¶æ€ï¼Œæ–¹ä¾¿è°ƒè¯•æ‚¬åœæ ·å¼</li>
</ol>
<h4 data-id="heading-29">5.2 æˆªå›¾åŠŸèƒ½</h4>
<p>æŒ‰ <code>Cmd+Shift+P</code> æ‰“å¼€å‘½ä»¤é¢æ¿ï¼Œè¾“å…¥ï¼š</p>





















<table><thead><tr><th>å‘½ä»¤</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>Capture screenshot</code></td><td>æˆªå–å½“å‰è§†å£</td></tr><tr><td><code>Capture full size screenshot</code></td><td>æˆªå–æ•´ä¸ªé¡µé¢ï¼ˆé•¿æˆªå›¾ï¼‰</td></tr><tr><td><code>Capture node screenshot</code></td><td>æˆªå–é€‰ä¸­å…ƒç´ </td></tr></tbody></table>
<h4 data-id="heading-30">5.3 ç½‘ç»œé™é€Ÿ</h4>
<p>æ¨¡æ‹Ÿå¼±ç½‘ç¯å¢ƒï¼š</p>
<ol>
<li>Network é¢æ¿</li>
<li>ç‚¹å‡» <strong>ã€ŒNo throttlingã€</strong> ä¸‹æ‹‰æ¡†</li>
<li>é€‰æ‹© <strong>ã€ŒSlow 3Gã€</strong> æˆ– <strong>ã€ŒFast 3Gã€</strong></li>
<li>æˆ–è€…è‡ªå®šä¹‰ç½‘é€Ÿ</li>
</ol>
<h4 data-id="heading-31">5.4 é˜»æ­¢è¯·æ±‚</h4>
<p>æµ‹è¯•èµ„æºåŠ è½½å¤±è´¥çš„æƒ…å†µï¼š</p>
<ol>
<li>Network é¢æ¿ï¼Œå³é”®æŸä¸ªè¯·æ±‚</li>
<li><strong>ã€ŒBlock request URLã€</strong> - é˜»æ­¢è¿™ä¸ªå…·ä½“è¯·æ±‚</li>
<li><strong>ã€ŒBlock request domainã€</strong> - é˜»æ­¢æ•´ä¸ªåŸŸåçš„è¯·æ±‚</li>
</ol>
<hr/>
<h3 data-id="heading-32">å…­ã€å¿«æ·é”®é€ŸæŸ¥è¡¨</h3>





















































<table><thead><tr><th>å¿«æ·é”®</th><th>åŠŸèƒ½</th></tr></thead><tbody><tr><td><code>Cmd+Shift+P</code></td><td>æ‰“å¼€å‘½ä»¤é¢æ¿</td></tr><tr><td><code>Cmd+P</code></td><td>å¿«é€Ÿæ‰“å¼€æ–‡ä»¶</td></tr><tr><td><code>Cmd+Shift+F</code></td><td>å…¨å±€æœç´¢</td></tr><tr><td><code>Cmd+F</code></td><td>å½“å‰æ–‡ä»¶æœç´¢</td></tr><tr><td><code>Cmd+S</code></td><td>ä¿å­˜ä¿®æ”¹</td></tr><tr><td><code>Cmd+Z</code></td><td>æ’¤é”€</td></tr><tr><td><code>F8</code></td><td>ç»§ç»­æ‰§è¡Œ</td></tr><tr><td><code>F10</code></td><td>å•æ­¥è·³è¿‡</td></tr><tr><td><code>F11</code></td><td>å•æ­¥è¿›å…¥</td></tr><tr><td><code>Shift+F11</code></td><td>å•æ­¥è·³å‡º</td></tr><tr><td><code>Cmd+\</code></td><td>æš‚åœ/ç»§ç»­</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-33">ä¸ƒã€æ€»ç»“</h3>


















































<table><thead><tr><th>æŠ€å·§</th><th>é€‚ç”¨åœºæ™¯</th><th>å®ç”¨æŒ‡æ•°</th></tr></thead><tbody><tr><td><strong>Overrides</strong></td><td>è°ƒè¯•çº¿ä¸Šä»£ç ã€Mock API</td><td>â­â­â­â­â­</td></tr><tr><td><strong><code>$0</code></strong></td><td>å¿«é€Ÿæ“ä½œé€‰ä¸­å…ƒç´ </td><td>â­â­â­â­â­</td></tr><tr><td><strong><code>copy()</code></strong></td><td>å¯¼å‡ºæ•°æ®åˆ°å‰ªè´´æ¿</td><td>â­â­â­â­</td></tr><tr><td><strong>æ¡ä»¶æ–­ç‚¹</strong></td><td>ç²¾å‡†è°ƒè¯•ç‰¹å®šæƒ…å†µ</td><td>â­â­â­â­</td></tr><tr><td><strong>XHR æ–­ç‚¹</strong></td><td>è¿½è¸ª API è°ƒç”¨æ¥æº</td><td>â­â­â­â­</td></tr><tr><td><strong>DOM æ–­ç‚¹</strong></td><td>æ‰¾å‡ºè°ä¿®æ”¹äº†å…ƒç´ </td><td>â­â­â­â­</td></tr><tr><td><strong>Logpoint</strong></td><td>ä¸æ”¹ä»£ç æ‰“æ—¥å¿—</td><td>â­â­â­â­</td></tr><tr><td><strong>å¼ºåˆ¶çŠ¶æ€</strong></td><td>è°ƒè¯•æ‚¬åœæ ·å¼</td><td>â­â­â­</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-34">å†™åœ¨æœ€å</h3>
<p>Chrome DevTools çš„åŠŸèƒ½è¿œä¸æ­¢è¿™äº›ï¼Œä½†æŒæ¡ä»¥ä¸ŠæŠ€å·§å·²ç»èƒ½è¦†ç›– 90% çš„è°ƒè¯•åœºæ™¯ã€‚ç‰¹åˆ«æ˜¯ <strong>Overrides</strong> åŠŸèƒ½ï¼ŒçœŸçš„æ˜¯è°ƒè¯•çº¿ä¸Šé—®é¢˜çš„ç¥å™¨ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶è¯•è¯•ï¼</p>
<p>å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµæ”¶è— ğŸ‘</p>
<p>æœ‰é—®é¢˜æ¬¢è¿è¯„è®ºåŒºäº¤æµï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Javascriptæœ‰å“ªäº›éå†æ•°ç»„çš„æ–¹æ³•ï¼Ÿå“ªäº›ä¸æ”¯æŒä¸­æ–­ï¼Ÿé‚£äº›ä¸æ”¯æŒå¼‚æ­¥éå†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576476897947844635</link>    <guid>https://juejin.cn/post/7576476897947844635</guid>    <pubDate>2025-11-25T07:42:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576476897947844635" data-draft-id="7576258838300475438" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Javascriptæœ‰å“ªäº›éå†æ•°ç»„çš„æ–¹æ³•ï¼Ÿå“ªäº›ä¸æ”¯æŒä¸­æ–­ï¼Ÿé‚£äº›ä¸æ”¯æŒå¼‚æ­¥éå†ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-25T07:42:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="best666"/> <meta itemprop="url" content="https://juejin.cn/user/2357779505350862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Javascriptæœ‰å“ªäº›éå†æ•°ç»„çš„æ–¹æ³•ï¼Ÿå“ªäº›ä¸æ”¯æŒä¸­æ–­ï¼Ÿé‚£äº›ä¸æ”¯æŒå¼‚æ­¥éå†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2357779505350862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    best666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:42:13.000Z" title="Tue Nov 25 2025 07:42:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>JavaScript æä¾›äº†å¤šç§éå†æ•°ç»„çš„æ–¹å¼ï¼Œä¸»è¦åˆ†ä¸º<strong>å¾ªç¯ç»“æ„</strong>å’Œ<strong>æ•°ç»„è¿­ä»£æ–¹æ³•</strong>ã€‚</p>
<h4 data-id="heading-0">å¸¸è§æ–¹æ³•åˆ—è¡¨ï¼š</h4>
<ol>
<li><strong><code>for</code>Â å¾ªç¯</strong>Â (åŸºç¡€å¾ªç¯)</li>
<li><strong><code>for...of</code></strong>Â (ES6ï¼Œæ¨è)</li>
<li><strong><code>forEach</code></strong></li>
<li><strong><code>map</code></strong></li>
<li><strong><code>filter</code></strong></li>
<li><strong><code>some</code></strong></li>
<li><strong><code>every</code></strong></li>
<li><strong><code>reduce</code>Â /Â <code>reduceRight</code></strong></li>
<li><strong><code>find</code>Â /Â <code>findIndex</code></strong></li>
</ol>
<p>ä»–ä»¬æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p>
<p>æƒ³è±¡ä½ æ˜¯ä¸€ä¸ª<strong>åŒ…å·¥å¤´</strong>ï¼Œä½ æ‰‹åº•ä¸‹æœ‰ä¸€æ’<strong>å·¥äºº</strong>ï¼ˆè¿™å°±æ˜¯æ•°ç»„Â <code>Array</code>ï¼‰ï¼Œä½ éœ€è¦ç»™ä»–ä»¬æ´¾æ´»å„¿ã€‚</p>
<p>JavaScript æä¾›äº†å¥½å¤šä¸åŒçš„â€œç®¡ç†æ¨¡å¼â€æ¥éå†è¿™äº›å·¥äººï¼Œå’±ä»¬æ¥çœ‹çœ‹å®ƒä»¬å„è‡ªçš„æ€§æ ¼ï¼š</p>
<h3 data-id="heading-1">1. éå†æ•°ç»„çš„â€œç®¡ç†æ¨¡å¼â€å¤§èµ</h3>
<h4 data-id="heading-2">ğŸ‘´Â <strong><code>for</code>Â å¾ªç¯ &amp;Â <code>for...of</code>Â â€”â€” â€œäº²åŠ›äº²ä¸ºçš„è€è€æ¿â€</strong></h4>
<p>è¿™æ˜¯æœ€ä¼ ç»Ÿã€æœ€å¬è¯çš„æ¨¡å¼ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä½ æŒ‡å“ªæ‰“å“ªã€‚ä½ å¯ä»¥éšæ—¶å–Šåœï¼ˆ<code>break</code>ï¼‰ï¼Œä¹Ÿå¯ä»¥è·³è¿‡æŸä¸ªäººï¼ˆ<code>continue</code>ï¼‰ã€‚</li>
<li><strong><code>for...of</code>Â (æ¨è)</strong> ï¼šæ˜¯ ES6 æ–°æ¥çš„å¸…æ°”ç»ç†ï¼Œè¯­æ³•ç®€æ´ï¼Œä¸“é—¨ç”¨æ¥éå†â€œå¯è¿­ä»£â€çš„ä¸œè¥¿ï¼ˆæ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šä½ éœ€è¦ç»å¯¹çš„æ§åˆ¶æƒï¼Œæˆ–è€…éœ€è¦æŒ‰é¡ºåºä¸€ä¸ªä¸ªç›¯ç€åšã€‚</li>
</ul>
<h4 data-id="heading-3">ğŸ¤–Â <strong><code>forEach</code>Â â€”â€” â€œä¸€æ ¹ç­‹çš„ç›‘å·¥â€</strong></h4>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼šä¸€æ—¦å¯åŠ¨ï¼Œ<strong>ç»ä¸å›å¤´</strong>ã€‚ä»–ä¼šé€¼ç€æ¯ä¸ªå·¥äººéƒ½å¹²ä¸€éæ´»ï¼Œä¸ç®¡ä½ ä¸­é€”æ˜¯ä¸æ˜¯æƒ³åœä¸‹æ¥ï¼Œä»–éƒ½å¬ä¸è§ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼š<strong>ä¸èƒ½ä¸­æ–­ï¼</strong> Â å“ªæ€•ä½ æ‰¾åˆ°æƒ³è¦çš„äº†ï¼Œä»–ä¹Ÿå¾—æŠŠå‰©ä¸‹çš„äººè¿‡ä¸€éã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šåªæ˜¯ç®€å•åœ°è®©æ¯ä¸ªäººå¹²ç‚¹äº‹ï¼ˆæ¯”å¦‚æ‰“å°ä¸€ä¸‹æ—¥å¿—ï¼‰ï¼Œä¸éœ€è¦è¿”å›å€¼ï¼Œä¹Ÿä¸éœ€è¦ä¸­é€”é€€å‡ºã€‚</li>
</ul>
<h4 data-id="heading-4">ğŸ­Â <strong><code>map</code>Â â€”â€” â€œåŠ å·¥æµæ°´çº¿â€</strong></h4>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>è¿›ä¸€å‡ºä¸€</strong>ã€‚è¿›å» 10 ä¸ªåŸæ–™ï¼Œå‡ºæ¥ 10 ä¸ªæˆå“ã€‚å®ƒä¸ä¼šä¿®æ”¹åŸæ¥çš„å·¥äººï¼Œè€Œæ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„æ•°ç»„ï¼ˆæˆå“å †ï¼‰ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šä½ éœ€è¦æŠŠæ•°æ®â€œå˜èº«â€ã€‚æ¯”å¦‚æŠŠÂ <code>[1, 2, 3]</code>Â å˜æˆÂ <code>[2, 4, 6]</code>ã€‚</li>
</ul>
<h4 data-id="heading-5">ğŸ•µï¸Â <strong><code>filter</code>Â â€”â€” â€œé¢è¯•å®˜ / ç­›é€‰å™¨â€</strong></h4>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>ä¼˜èƒœåŠ£æ±°</strong>ã€‚ç¬¦åˆæ¡ä»¶çš„ç•™ä¸‹ï¼Œä¸ç¬¦åˆçš„è¸¢èµ°ã€‚è¿”å›ä¸€ä¸ªæ–°çš„ã€å¯èƒ½å˜çŸ­çš„æ•°ç»„ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šä»ä¸€å †æ•°æ®é‡ŒæŒ‘å‡ºä½ æƒ³è¦çš„ã€‚æ¯”å¦‚â€œåªè¦å¤§äº 18 å²çš„â€ã€‚</li>
</ul>
<h4 data-id="heading-6">ğŸ¯Â <strong><code>find</code>Â â€”â€” â€œå¯»å®çŒäººâ€</strong></h4>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>æ‰¾åˆ°å°±è·‘</strong>ã€‚ä»–åªæ‰¾ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„äººï¼Œä¸€æ—¦æ‰¾åˆ°ï¼Œç«‹é©¬æ‹¿ç€ç»“æœä¸‹ç­ï¼Œåé¢çš„äººçœ‹éƒ½ä¸çœ‹ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šæ‰¾å”¯ä¸€çš„é‚£ä¸ª IDï¼Œæˆ–è€…æ‰¾ç¬¬ä¸€ä¸ªåŠæ ¼çš„äººã€‚</li>
</ul>
<h4 data-id="heading-7">ğŸ¬Â <strong><code>reduce</code>Â â€”â€” â€œæ”¶çº³å¤§å¸ˆ / æ‰é¢å›¢â€</strong></h4>
<ul>
<li><strong>ç‰¹ç‚¹</strong>ï¼š<strong>ä¹ä¹å½’ä¸€</strong>ã€‚æŠŠä¸€å †ä¸œè¥¿æ‰æˆä¸€ä¸ªä¸œè¥¿ã€‚æ¯”å¦‚æŠŠä¸€å †æ•°å­—åŠ æˆä¸€ä¸ªæ€»å’Œï¼Œæˆ–è€…æŠŠä¸€å †å¯¹è±¡åˆå¹¶æˆä¸€ä¸ªå¤§å¯¹è±¡ã€‚</li>
<li><strong>åœºæ™¯</strong>ï¼šç®—æ€»ä»·ã€ç»Ÿè®¡ä¸ªæ•°ã€‚è¿™æ˜¯æœ€éš¾ç†è§£ä½†ä¹Ÿæœ€å¼ºå¤§çš„æ–¹æ³•ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-8">2. çµé­‚æ‹·é—®ä¸€ï¼šè°èƒ½æŒ‰â€œæš‚åœé”®â€ï¼Ÿ(ä¸­æ–­)</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨åœ¨ä¸€å †çŸ³å¤´é‡Œæ‰¾é‡‘å­ã€‚</p>
<ul>
<li>
<p>âœ…Â <strong>èƒ½æš‚åœ (<code>break</code>Â /Â <code>return</code>)</strong> ï¼š</p>
<ul>
<li><strong><code>for</code></strong>ã€<strong><code>for...of</code></strong>ï¼šæ‰¾åˆ°é‡‘å­äº†ï¼Ÿç›´æ¥Â <code>break</code>Â èµ°äººï¼Œæ•ˆç‡æœ€é«˜ã€‚</li>
<li><strong><code>find</code></strong>ã€<strong><code>some</code></strong>ã€<strong><code>every</code></strong>ï¼šè¿™äº›æ–¹æ³•å†…ç½®äº†â€œæ»¡è¶³æ¡ä»¶å°±åœæ­¢â€çš„æœºåˆ¶ã€‚</li>
</ul>
</li>
<li>
<p>âŒÂ <strong>ä¸èƒ½æš‚åœ (å¿…é¡»è·‘å®Œå…¨ç¨‹)</strong> ï¼š</p>
<ul>
<li><strong><code>forEach</code></strong>ï¼šå“ªæ€•ç¬¬ä¸€ä¸ªå°±æ˜¯é‡‘å­ï¼Œå®ƒä¹Ÿè¦æŠŠåé¢æ‰€æœ‰çš„çŸ³å¤´éƒ½æ‘¸ä¸€éã€‚<strong>åƒä¸‡åˆ«åœ¨Â <code>forEach</code>Â é‡Œå†™Â <code>break</code>ï¼Œä¼šæŠ¥é”™ï¼</strong></li>
<li><strong><code>map</code></strong>ã€<strong><code>filter</code></strong>ï¼šå®ƒä»¬æ˜¯æµæ°´çº¿ï¼Œå¿…é¡»å¤„ç†å®Œæ‰€æœ‰åŸæ–™ã€‚</li>
</ul>
</li>
</ul>
<hr/>
<h3 data-id="heading-9">3. çµé­‚æ‹·é—®äºŒï¼šè°èƒ½æå®šâ€œæ‹–å»¶ç—‡â€ï¼Ÿ(å¼‚æ­¥ Async/Await)</h3>
<p>æƒ³è±¡æ¯ä¸ªå·¥äººå¹²æ´»éƒ½éœ€è¦æ—¶é—´ï¼ˆæ¯”å¦‚å»æœåŠ¡å™¨æ‹¿æ•°æ®ï¼Œéœ€è¦ç­‰ 1 ç§’ï¼‰ã€‚</p>
<ul>
<li>
<p>âœ…Â <strong><code>for...of</code>Â â€”â€” â€œå®ˆç§©åºçš„æ’é˜Ÿè€…â€</strong></p>
<ul>
<li>å¦‚æœä½ åœ¨Â <code>for...of</code>Â é‡Œé¢ç”¨Â <code>await</code>ï¼Œå®ƒä¼š<strong>ä¹–ä¹–æ’é˜Ÿ</strong>ã€‚ç­‰ç¬¬ä¸€ä¸ªäººå¹²å®Œï¼ˆ1ç§’ï¼‰ï¼Œå†è®©ç¬¬äºŒä¸ªäººå¹²ï¼ˆ1ç§’ï¼‰ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šé¡ºåºæ‰§è¡Œï¼Œæ€»æ—¶é—´ = äººæ•° Ã— 1ç§’ã€‚</li>
</ul>
</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å°±åƒæ’é˜Ÿç»“è´¦ï¼Œä¸€ä¸ªç»“æŸä¸‹ä¸€ä¸ªä¸Š</span>
 <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> list) {
   <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(item); <span class="hljs-comment">// âœ… çœŸçš„ä¼šç­‰ï¼</span>
 }
</code></pre>
<ul>
<li>
<p>âŒÂ <strong><code>forEach</code>Â â€”â€” â€œä¹±æˆä¸€é”…ç²¥â€</strong></p>
<ul>
<li><code>forEach</code>Â æ˜¯ä¸ªæ€¥æ€§å­ã€‚å®ƒä¼šç¬é—´å¯¹æ‰€æœ‰äººå–Šâ€œå¼€å§‹ï¼â€ï¼Œç„¶åè‡ªå·±å°±æºœäº†ã€‚å®ƒ<strong>æ ¹æœ¬ä¸ä¼šç­‰</strong>Â <code>await</code>ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šæ‰€æœ‰äººåŒæ—¶å¼€å§‹å¹²ï¼Œé¡ºåºä¹±å¥—ï¼Œè€Œä¸”ä½ æ²¡æ³•çŸ¥é“ä»–ä»¬ä»€ä¹ˆæ—¶å€™å…¨éƒ¨å¹²å®Œã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºèŒƒ</span>
list.<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">async</span> (item) =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(item); <span class="hljs-comment">// ğŸ˜± forEach æ ¹æœ¬ä¸ç†ä½ ï¼Œç›´æ¥è·‘ä¸‹ä¸€ä¸ªå»äº†</span>
});
</code></pre>
</li>
<li>
<p>âš¡ï¸Â <strong><code>map</code>Â +Â <code>Promise.all</code>Â â€”â€” â€œå¹¶å‘å¤§ç¥â€</strong></p>
<ul>
<li>å¦‚æœä½ æƒ³è®©å¤§å®¶<strong>ä¸€èµ·å¹²</strong>ï¼ˆå¹¶å‘ï¼‰ï¼Œæœ€åå†ä¸€èµ·æ”¶å·¥ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šåŒæ—¶å¼€å·¥ï¼Œæ€»æ—¶é—´ â‰ˆ æœ€æ…¢çš„é‚£ä¸ªäººèŠ±çš„æ—¶é—´ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¤§å®¶ä¸€èµ·ä¸Šï¼</span>
<span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(list.<span class="hljs-title function_">map</span>(<span class="hljs-keyword">async</span> item =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">doSomething</span>(item);
}));
</code></pre>
</li>
</ul>
<h3 data-id="heading-10">æ€»ç»“ä¸€ä¸‹ï¼ˆæ–°æ‰‹å°æŠ„ï¼‰ï¼š</h3>
<ol>
<li>
<p><strong>åªæ˜¯æƒ³éå†ï¼Œæˆ–è€…éœ€è¦Â <code>break</code></strong>Â ğŸ‘‰ ç”¨Â <strong><code>for...of</code></strong>Â (æœ€ç¨³)ã€‚</p>
</li>
<li>
<p><strong>æƒ³æŠŠæ•°æ®å˜ä¸ªæ ·</strong>Â ğŸ‘‰ ç”¨Â <strong><code>map</code></strong>ã€‚</p>
</li>
<li>
<p><strong>æƒ³è¿‡æ»¤æ•°æ®</strong>Â ğŸ‘‰ ç”¨Â <strong><code>filter</code></strong>ã€‚</p>
</li>
<li>
<p><strong>æƒ³æ‰¾æŸä¸€ä¸ª</strong>Â ğŸ‘‰ ç”¨Â <strong><code>find</code></strong>ã€‚</p>
</li>
<li>
<p><strong>é‡Œé¢æœ‰Â <code>await</code>Â å¼‚æ­¥æ“ä½œ</strong>ï¼š</p>
<ul>
<li>è¦<strong>é¡ºåº</strong>æ‰§è¡Œ ğŸ‘‰Â <strong><code>for...of</code></strong>ã€‚</li>
<li>è¦<strong>å¹¶å‘</strong>æ‰§è¡Œ ğŸ‘‰Â <strong><code>map</code>Â +Â <code>Promise.all</code></strong>ã€‚</li>
<li>åƒä¸‡åˆ«ç”¨Â <strong><code>forEach</code>ï¼</strong></li>
</ul>
</li>
</ol>
<h2 data-id="heading-11">é€Ÿè®°</h2>
<h3 data-id="heading-12">å…³äºä¸­æ–­ï¼ˆbreak/returnï¼‰çš„æ”¯æŒ</h3>
<p><strong>æ”¯æŒä¸­æ–­ï¼ˆbreak / returnï¼‰çš„æ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>for</code>Â å¾ªç¯</li>
<li><code>for...of</code>Â å¾ªç¯</li>
<li><code>for...in</code>Â å¾ªç¯ (ä¸æ¨èç”¨äºæ•°ç»„)</li>
<li><code>some</code>Â (é€šè¿‡è¿”å›Â <code>true</code>Â åœæ­¢)</li>
<li><code>every</code>Â (é€šè¿‡è¿”å›Â <code>false</code>Â åœæ­¢)</li>
<li><code>find</code>Â /Â <code>findIndex</code>Â (æ‰¾åˆ°ç›®æ ‡å³åœæ­¢)</li>
</ul>
<p><strong>ä¸æ”¯æŒä¸­æ–­ï¼ˆæ— æ³•é€šè¿‡ break/return æå‰ç»“æŸï¼‰çš„æ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>forEach</code>Â (å¿…é¡»éå†å®Œæ‰€æœ‰å…ƒç´ ï¼Œé™¤éæŠ›å‡ºå¼‚å¸¸)</li>
<li><code>map</code></li>
<li><code>filter</code></li>
<li><code>reduce</code></li>
</ul>
<hr/>
<h3 data-id="heading-13">å…³äºå¼‚æ­¥éå†ï¼ˆAsync/Awaitï¼‰çš„æ”¯æŒ</h3>
<p>è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„å‘ã€‚</p>
<p><strong>æ”¯æŒå¼‚æ­¥ç­‰å¾…ï¼ˆèƒ½æŒ‰é¡ºåºÂ <code>await</code>ï¼‰çš„æ–¹æ³•ï¼š</strong></p>
<ul>
<li><strong><code>for</code>Â å¾ªç¯</strong></li>
<li><strong><code>for...of</code>Â å¾ªç¯</strong></li>
</ul>
<p><strong>ä¸æ”¯æŒå¼‚æ­¥ç­‰å¾…ï¼ˆæ— æ³•åœ¨å›è°ƒä¸­æ­£ç¡®Â <code>await</code>ï¼‰çš„æ–¹æ³•ï¼š</strong></p>
<ul>
<li><strong><code>forEach</code></strong>ï¼šå®ƒä¼šç«‹å³å¯åŠ¨æ‰€æœ‰å›è°ƒï¼Œä¸ä¼šç­‰å¾…å‰ä¸€ä¸ªå›è°ƒçš„Â <code>await</code>Â å®Œæˆã€‚</li>
<li><strong><code>map</code></strong>ï¼šå®ƒä¼šè¿”å›ä¸€ä¸ª Promise æ•°ç»„ï¼Œéœ€è¦é…åˆÂ <code>Promise.all</code>Â ä½¿ç”¨ï¼Œä½†å®ƒæ˜¯å¹¶å‘æ‰§è¡Œçš„ï¼Œä¸æ˜¯é¡ºåºæ‰§è¡Œã€‚</li>
<li><code>filter</code>,Â <code>reduce</code>Â ç­‰é«˜é˜¶å‡½æ•°åœ¨é…åˆ async ä½¿ç”¨æ—¶é€šå¸¸æ— æ³•è¾¾åˆ°é¢„æœŸæ•ˆæœï¼ˆä¾‹å¦‚Â <code>filter</code>Â æ— æ³•æ ¹æ®å¼‚æ­¥ç»“æœè¿‡æ»¤ï¼‰ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºç¡€éšè®°]]></title>    <link>https://juejin.cn/post/7576264484689346600</link>    <guid>https://juejin.cn/post/7576264484689346600</guid>    <pubDate>2025-11-25T07:52:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484689346600" data-draft-id="7262366547838713915" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºç¡€éšè®°"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:52:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œèµ°åœ¨é¡¶å°–"/> <meta itemprop="url" content="https://juejin.cn/user/1257497030561512"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºç¡€éšè®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497030561512/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œèµ°åœ¨é¡¶å°–
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:52:07.000Z" title="Tue Nov 25 2025 07:52:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><h2 data-id="heading-0">åˆ¤æ–­å¯¹è±¡æ˜¯å¦å­˜åœ¨æŒ‡å®šé”®å</h2>
<pre><code class="hljs language-ini" lang="ini">Object.keys(data).find(<span class="hljs-attr">x</span> =&gt; x === <span class="hljs-string">'name'</span>)
</code></pre>
<p>Object.keys(data) :ä½œç”¨ï¼šè·å–å¯¹è±¡Â <code>newQuery</code>Â æ‰€æœ‰<strong>è‡ªèº«å¯æšä¸¾å±æ€§çš„é”®å</strong>ï¼Œè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„</p>
<p>ç¤ºä¾‹ï¼šè‹¥Â <code>data = { id: 1, copy: true, name: 'test' }</code>ï¼Œåˆ™è¿”å›Â <code>['id', 'copy', 'name']</code></p>
<p>.find(x =&gt; x === 'name')
ä½œç”¨ï¼šéå†æ•°ç»„ï¼ˆæ­¤å¤„æ˜¯é”®åæ•°ç»„ï¼‰ï¼Œæ‰¾åˆ°<strong>ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶</strong>ï¼ˆ<code>x === 'name'</code>ï¼‰çš„å…ƒç´ å¹¶è¿”å›ï¼›è‹¥éå†å®Œæ— åŒ¹é…å…ƒç´ ï¼Œè¿”å›Â <code>undefined</code>ã€‚</p>
<p>ç¤ºä¾‹ï¼šéå†Â <code>['id', 'copy', 'name']</code>Â æ—¶ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…Â <code>'copy'</code>Â çš„å…ƒç´ æ˜¯Â <code>'copy'</code>ï¼Œæ•…è¿”å›Â <code>'copy'</code>ï¼›è‹¥æ•°ç»„ä¸­æ— Â <code>'copy'</code>ï¼Œåˆ™è¿”å›Â <code>undefined</code>ã€‚</p>
<h3 data-id="heading-1">ä½¿ç”¨åœºæ™¯ï¼šç²¾å‡†åˆ¤æ–­å¯¹è±¡é”®åå­˜åœ¨æ€§</h3>
<p>åˆ¤æ–­å¯¹è±¡æ˜¯å¦<strong>è‡ªèº«æ‹¥æœ‰</strong>æŸé”®åï¼ˆæ’é™¤åŸå‹é“¾ä¸Šçš„å±æ€§ï¼‰
<code>    const data = { name: '1' };     if (Object.keys(data).find(x =&gt; x === 'name')) {       console.log('å­˜åœ¨ name é”®'); // æ‰§è¡Œ     }    </code></p>
<p>ä¼ ç»Ÿå†™æ³•ï¼š<code>data.hasOwnProperty('name')</code>ï¼ˆè¿”å›å¸ƒå°”å€¼Â <code>true/false</code>ï¼‰</p>
<p>è¿”å›é”®åÂ <code>'copy'</code>Â æˆ–Â <code>undefined</code>ï¼Œå¯ç›´æ¥ç”¨äºæ¡ä»¶åˆ¤æ–­ï¼ˆæ•ˆæœç­‰åŒäºÂ <code>hasOwnProperty</code>ï¼‰</p>
<h3 data-id="heading-2">ä½¿ç”¨åœºæ™¯ï¼šåŠ¨æ€åŒ¹é…é”®åï¼ˆæ”¯æŒå˜é‡ / æ¨¡ç³ŠåŒ¹é…ï¼‰</h3>
<p>é”®åä¸ç¡®å®šï¼ˆç”±å˜é‡ä¼ å…¥ï¼‰ï¼Œæˆ–éœ€è¦æ¨¡ç³ŠåŒ¹é…ï¼ˆå¦‚åŒ…å«æŸå­—ç¬¦ä¸²ã€ç¬¦åˆæ­£åˆ™ï¼‰
ç¤ºä¾‹ 1ï¼šåŠ¨æ€åˆ¤æ–­å˜é‡é”®å</p>
<pre><code class="hljs language-ini" lang="ini">```
const <span class="hljs-attr">key</span> = <span class="hljs-string">'copy'</span><span class="hljs-comment">; // å¯ä»æ¥å£/ç”¨æˆ·è¾“å…¥è·å–</span>
const <span class="hljs-attr">hasKey</span> = Object.keys(data).find(x =&gt; x === key)<span class="hljs-comment">;</span>
if (hasKey) {
  console.log(`å­˜åœ¨é”® ${hasKey}`)<span class="hljs-comment">;</span>
}
```
</code></pre>
<p>ç¤ºä¾‹ 2ï¼šæ¨¡ç³ŠåŒ¹é…ï¼ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä»¥Â <code>copy</code>Â å¼€å¤´çš„é”®ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">```
const <span class="hljs-attr">data</span> = { copy1: <span class="hljs-string">'a'</span>, copy2: <span class="hljs-string">'b'</span>, other: <span class="hljs-string">'c'</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">matchKey</span> = Object.keys(data).find(x =&gt; x.startsWith(<span class="hljs-string">'copy'</span>))<span class="hljs-comment">;</span>
console.log(matchKey)<span class="hljs-comment">; // 'copy1'ï¼ˆè¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ï¼‰</span>
```
</code></pre>
<h4 data-id="heading-3">åœ¨é”®åæ•°ç»„ä¸­æŸ¥æ‰¾å¹¶åç»­æ“ä½œ</h4>
<p>æ‰¾åˆ°é”®ååï¼Œéœ€ç›´æ¥ä½¿ç”¨è¯¥é”®åï¼ˆå¦‚è·å–å¯¹åº”å±æ€§å€¼ã€ä¿®æ”¹å±æ€§ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = { id: <span class="hljs-number">1</span>, copy: <span class="hljs-string">'åŸå§‹æ•°æ®'</span> }<span class="hljs-comment">;</span>
const <span class="hljs-attr">targetKey</span> = Object.keys(data).find(x =&gt; x === <span class="hljs-string">'copy'</span>)<span class="hljs-comment">;</span>

if (targetKey) {
  console.log(data<span class="hljs-section">[targetKey]</span>)<span class="hljs-comment">; // è¾“å‡º 'åŸå§‹æ•°æ®'ï¼ˆé€šè¿‡æ‰¾åˆ°çš„é”®åè·å–å€¼ï¼‰</span>
  data<span class="hljs-section">[targetKey]</span> = 'ä¿®æ”¹åæ•°æ®'<span class="hljs-comment">; // é€šè¿‡é”®åä¿®æ”¹å€¼</span>
}
</code></pre>
<h4 data-id="heading-4">å¤„ç†å¯èƒ½å­˜åœ¨çš„åŸå‹é“¾æ±¡æŸ“ï¼ˆå®‰å…¨åˆ¤æ–­ï¼‰</h4>
<p>é¿å…å¯¹è±¡åŸå‹é“¾ä¸Šçš„å±æ€§å¹²æ‰°åˆ¤æ–­ï¼ˆå¦‚Â <code>__proto__</code>ã€<code>constructor</code>Â ç­‰ï¼‰</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">data</span> = {}<span class="hljs-comment">;</span>
<span class="hljs-attr">newQuery.__proto__.copy</span> = <span class="hljs-string">'åŸå‹é“¾ä¸Šçš„å±æ€§'</span><span class="hljs-comment">;</span>

console.log('copy' in data)<span class="hljs-comment">; // trueï¼ˆä¸æœŸæœ›çš„ç»“æœï¼‰</span>
console.log(Object.keys(data).find(<span class="hljs-attr">x</span> =&gt; x === <span class="hljs-string">'copy'</span>))<span class="hljs-comment">; // undefinedï¼ˆæ­£ç¡®ï¼Œæ’é™¤åŸå‹é“¾ï¼‰</span>
</code></pre>
<p>æ€§èƒ½ç•¥ä½äºÂ <code>hasOwnProperty</code>,ä½†ç®€å•ç›´è§‚ã€æ”¯æŒåŠ¨æ€æŸ¥æ‰¾ã€å¯ç”¨äºå¤æ‚æ¡ä»¶åŒ¹é…</p>
<p>æ›¿ä»£ï¼š<code>Object.prototype.hasOwnProperty.call(obj, key)</code>ã€<code>Reflect.has(obj, key)</code></p>
<h2 data-id="heading-5"><code>Object.prototype.hasOwnProperty.call(obj, key)</code>ã€<code>Reflect.has(obj, key)</code>åŒºåˆ«</h2>
<p><strong><code>hasOwnProperty</code>Â åªæ£€æŸ¥å¯¹è±¡è‡ªèº«çš„å±æ€§ï¼Œä¸åŒ…æ‹¬åŸå‹é“¾ï¼›<code>Reflect.has</code>Â æ£€æŸ¥å¯¹è±¡è‡ªèº«åŠå…¶åŸå‹é“¾ä¸Šçš„æ‰€æœ‰å±æ€§</strong></p>
<p>Object.prototype.hasOwnProperty.call(obj, key)</p>
<p><strong>ä½œç”¨</strong>ï¼šä»…åˆ¤æ–­æŒ‡å®šçš„Â <code>key</code>Â æ˜¯å¦ä¸ºå¯¹è±¡Â <code>obj</code>Â <strong>è‡ªèº«çš„ã€å¯æšä¸¾æˆ–ä¸å¯æšä¸¾çš„å±æ€§</strong>ï¼ˆä¸åŒ…æ‹¬åŸå‹é“¾ä¸Šç»§æ‰¿çš„å±æ€§ï¼‰ã€‚</p>
<p>Reflect.has(obj, key)</p>
<p><strong>ä½œç”¨</strong>ï¼šåˆ¤æ–­æŒ‡å®šçš„Â <code>key</code>Â æ˜¯å¦ä¸ºå¯¹è±¡Â <code>obj</code>Â <strong>è‡ªèº«çš„å±æ€§ï¼Œæˆ–è€…æ˜¯å…¶åŸå‹é“¾ä¸Šä»»ä½•ä¸€ä¸ªå¯¹è±¡çš„å±æ€§</strong>ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªåŸå‹å¯¹è±¡</span>
<span class="hljs-keyword">const</span> animalPrototype = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'animal'</span> <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªåŸå‹ä¸Šçš„å±æ€§</span>
};

<span class="hljs-comment">// 2. ä½¿ç”¨ Object.create åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå¹¶å°†å…¶åŸå‹æŒ‡å‘ animalPrototype</span>
<span class="hljs-keyword">const</span> cat = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">create</span>(animalPrototype);
cat.<span class="hljs-property">name</span> = <span class="hljs-string">'Tom'</span>; <span class="hljs-comment">// è¿™æ˜¯ cat å¯¹è±¡è‡ªèº«çš„å±æ€§</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æ£€æŸ¥è‡ªèº«å±æ€§ "name" ---'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(cat, <span class="hljs-string">'name'</span>)); <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(cat, <span class="hljs-string">'name'</span>));                         <span class="hljs-comment">// true</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'-------------------------\n'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æ£€æŸ¥åŸå‹é“¾ä¸Šçš„å±æ€§ "type" ---'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(cat, <span class="hljs-string">'type'</span>)); <span class="hljs-comment">// false -&gt; 'type' ä¸æ˜¯ cat è‡ªèº«çš„å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(cat, <span class="hljs-string">'type'</span>));                         <span class="hljs-comment">// true  -&gt; 'type' æ˜¯ cat åŸå‹é“¾ä¸Šçš„å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'-------------------------\n'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'--- æ£€æŸ¥ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ "age" ---'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">hasOwnProperty</span>.<span class="hljs-title function_">call</span>(cat, <span class="hljs-string">'age'</span>)); <span class="hljs-comment">// false</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">has</span>(cat, <span class="hljs-string">'age'</span>));                         <span class="hljs-comment">// false</span>



--- æ£€æŸ¥è‡ªèº«å±æ€§ <span class="hljs-string">"name"</span> ---
<span class="hljs-literal">true</span>
<span class="hljs-literal">true</span>
-------------------------

--- æ£€æŸ¥åŸå‹é“¾ä¸Šçš„å±æ€§ <span class="hljs-string">"type"</span> ---
<span class="hljs-literal">false</span>
<span class="hljs-literal">true</span>
-------------------------

--- æ£€æŸ¥ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§ <span class="hljs-string">"age"</span> ---
<span class="hljs-literal">false</span>
<span class="hljs-literal">false</span>



</code></pre>
<h3 data-id="heading-6">ä½¿ç”¨åœºæ™¯æ¨è</h3>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨Â <code>Object.prototype.hasOwnProperty.call</code>ï¼Ÿ</strong></p>
<p>éœ€è¦<strong>ä¸¥æ ¼åˆ¤æ–­ä¸€ä¸ªå±æ€§æ˜¯å¦æ˜¯å¯¹è±¡è‡ªèº«å®šä¹‰çš„</strong>ï¼Œè€Œä¸æ˜¯ä»åŸå‹é“¾ä¸Šç»§æ‰¿æ¥çš„ã€‚ä¾‹å¦‚åœ¨éå†å¯¹è±¡å±æ€§æ—¶ï¼ˆ<code>for...in</code>Â å¾ªç¯ï¼‰ã€‚</p>
<p><strong>ä»€ä¹ˆæ—¶å€™ç”¨Â <code>Reflect.has</code>ï¼Ÿ</strong></p>
<p>éœ€è¦æ£€æŸ¥ä¸€ä¸ªå±æ€§<strong>æ˜¯å¦åœ¨å¯¹è±¡æˆ–å…¶åŸå‹é“¾ä¸Šå­˜åœ¨</strong>æ—¶ï¼Œå®ƒçš„åŠŸèƒ½ä¸Â <code>in</code>Â è¿ç®—ç¬¦å®Œå…¨ç›¸åŒï¼Œä½†è¯­æ³•æ˜¯å‡½æ•°å¼çš„ï¼Œæ›´é€‚åˆç”¨äºå‡½æ•°å¼ç¼–ç¨‹æˆ–éœ€è¦å°†æ“ä½œä½œä¸ºå‚æ•°ä¼ é€’çš„åœºæ™¯ã€‚
å½“ä½ åœ¨ä½¿ç”¨å…¶ä»–Â <code>Reflect</code>Â æ–¹æ³•ï¼ˆå¦‚Â <code>Reflect.get</code>,Â <code>Reflect.set</code>ï¼‰æ—¶ï¼Œä¸ºäº†ä¿æŒä»£ç é£æ ¼çš„ä¸€è‡´æ€§ï¼Œå¯ä»¥ç»Ÿä¸€ä½¿ç”¨Â <code>Reflect.has</code>ã€‚
æƒ³æ›¿ä»£Â <code>'key' in obj</code>ï¼Œå°±ç”¨Â <code>Reflect.has(obj, 'key')</code></p>
<h2 data-id="heading-7">ç›’æ¨¡å‹</h2>
<p>å½“ä¸€ä¸ªDOMèŠ‚ç‚¹åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“åä¼šå ç”¨ä¸€ä¸ªæ–¹å½¢åŒºåŸŸï¼Œè¿™ä¸ªæ–¹å½¢åŒºåŸŸå°±æ˜¯ç›’å­ã€‚</p>
<p>ç›’å­çš„ç»„æˆåˆ†åˆ«æ˜¯ï¼š</p>
<p>1.å®½åº¦ï¼šè¿™ä¸ªå±æ€§å†³å®šäº†æ­¤ç›’å­çš„å®½åº¦ã€‚</p>
<p>2.é«˜åº¦ï¼šè¿™ä¸ªå±æ€§å†³å®šäº†æ­¤ç›’å­çš„é«˜åº¦ã€‚</p>
<p>3.å†…è¾¹è·ï¼šç›’å­é‡Œå†…å®¹ä¸è¾¹æ¡†ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p>4.å¤–è¾¹è·ï¼šç›’å­ä¸ç›’å­ä¹‹é—´çš„è·ç¦»ã€‚</p>
<p>å› ä¸ºæµè§ˆå™¨ä¸åŒåˆ†ä¸ºä¸¤ç§ç›’æ¨¡å‹ï¼š</p>
<p>1.æ ‡å‡†ç›’æ¨¡å‹ï¼šç”±W3Cç»„ç»‡åˆ¶å®šçš„ï¼Œé™¤äº†ä½ç‰ˆæœ¬IEå¤–ï¼Œå…¶ä»–æµè§ˆå™¨éƒ½éµå¾ªæ ‡å‡†ã€‚widthå’Œheightçš„å€¼æ˜¯å†…å®¹åŒºåŸŸçš„å¤§å°ï¼Œè€Œç›’å­å®é™…å¤§å°éœ€è¦åŠ ä¸Šè¾¹æ¡†å’Œå†…è¾¹è·çš„å€¼ã€‚</p>
<p>2.æ€ªå¼‚ç›’æ¨¡å‹ï¼šåˆå«IEç›’æ¨¡å‹ï¼Œwidthå’Œheightçš„å€¼å°±æ˜¯ç›’å­å®é™…å¤§å°ï¼Œè¾¹æ¡†å’Œå†…è¾¹è·éƒ½æ˜¯åœ¨å®½å’Œé«˜çš„å€¼å†…ï¼Œå†…å®¹åŒºåŸŸå°±æ˜¯å‡å»è¾¹æ¡†å’Œå¤–è¾¹æ¡†çš„å€¼ã€‚</p>
<p>æ ‡å‡†ç›’å­æ¨¡å‹ä¸‹è¿›è¡Œå¸ƒå±€æ—¶éœ€è¦è®¡ç®—ä¸‹å†…è¾¹è·å’Œè¾¹æ¡†ï¼Œå¹¶ä¸æ–¹ä¾¿è®¡ç®—åŠå¸ƒå±€ã€‚æ‰€ä»¥æ€ªå¼‚æ¨¡å¼ä¸‹ï¼Œç›’å­å¤§å°ç¡®å®šï¼Œè®¾ç½®å¥½å†…è¾¹è·å’Œè¾¹æ¡†ï¼Œå†…å®¹åŒºåŸŸæµè§ˆå™¨è¿›è¡Œè®¡ç®—ï¼Œæ–¹ä¾¿å¾ˆå¤šã€‚</p>
<p>box-sizingå±æ€§è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œcssä¸­é€šè¿‡è®¾ç½®box-sizingæŒ‡å®šä½¿ç”¨å“ªç§ç›’å­æ¨¡å‹ï¼Œè¿›è¡Œæ··åˆä½¿ç”¨ã€‚</p>
<p>å¤–è¾¹è·æŠ˜å ï¼š
marginæ˜¯ç›’å­ä¸ç›’å­ä¹‹é—´çš„è·ç¦»ï¼Œå¦‚æœç›’å­éƒ½è®¾ç½®äº†å¤–è¾¹è·å¯èƒ½ä¼šå‡ºç°å¤–è¾¹è·æŠ˜å ï¼Œä¸€èˆ¬æ˜¯æŒ‡å‚ç›´æ–¹å‘ç›¸é‚»çš„å¤–è¾¹è·ä¼šå‘ç”Ÿé‡å ç°è±¡ï¼Œå¯¹äºä¸Šä¸‹ç›¸é‚»çš„å—çº§å…ƒç´ å’Œçˆ¶å­å…ƒç´ ä¹‹é—´çš„å¤–è¾¹è·ã€‚</p>
<p>å¦‚Aç›’å­ä¸‹è¾¹è·10px,Bç›’å­ä¸Šè¾¹è·20px,ä¸­é—´ç›¸éš”çš„è·ç¦»æ˜¯20px,è€Œä¸æ˜¯ç›¸åŠ ä¸€èµ·30pxã€‚å› ä¸ºç›’å­é—´è·å®é™…å€¼å¦‚æœä¸¤ä¸ªå€¼éƒ½æ˜¯æ­£å€¼å–ä¸¤ä¸ªç›’å­ä¹‹é—´è¾ƒå¤§çš„é‚£ä¸ªå€¼ï¼Œå¦‚æœä¸¤ä¸ªå€¼ä¸€æ­£ä¸€è´Ÿï¼Œå–ä¸¤ä¸ªå€¼çš„å’Œï¼Œå¦‚æœä¸¤ä¸ªéƒ½æ˜¯è´Ÿå€¼ï¼Œå–ç»å¯¹å€¼è¾ƒå¤§çš„ã€‚</p>
<p>çˆ¶å…ƒç´ çš„ä¸Šè¾¹è·å’Œç¬¬ä¸€ä¸ªå­å…ƒç´ çš„ä¸Šè¾¹è·ä¼šæŠ˜å æˆ–çˆ¶å…ƒç´ çš„ä¸‹è¾¹è·å’Œæœ€åä¸€ä¸ªå­å…ƒç´ çš„ä¸‹è¾¹è·ä¼šæŠ˜å ï¼Œå–å…¶ä¸­è¾ƒå¤§çš„å€¼ä½œä¸ºæœ€ç»ˆçš„å¤–è¾¹è·ã€‚</p>
<h2 data-id="heading-8">æ–‡æ¡£æµ</h2>
<p>DOMèŠ‚ç‚¹æ’ç‰ˆå¸ƒå±€è¿‡ç¨‹ä¸­ï¼Œå…ƒç´ è‡ªåŠ¨ä»å·¦å¾€å³ï¼Œä»ä¸Šå¾€ä¸‹çš„æµå¼æ’åˆ—ã€‚ä¸€è¡Œæ’æ»¡è‡ªåŠ¨æ¢ä¸‹ä¸€è¡Œï¼Œå¦‚æœä½¿ç”¨ç»å¯¹å®šä½ï¼Œå›ºå®šä½æˆ–è€…æµ®åŠ¨ï¼Œè¿™ä¸ªå…ƒç´ å°±ä¼šè„±ç¦»æ–‡æ¡£æµã€‚æ‰€ä»¥HTMLæ˜¯ä¸€ä¸ªä¸‰ç»´çš„ç©ºé—´ï¼Œæœ‰å¹³é¢çš„ x,y ä½ç½®ï¼Œä¹Ÿæœ‰ z è½´ä¸Šçš„å±‚å å…³ç³»ã€‚</p>
<p>å±‚å å…³ç³»å°±æ˜¯ï¼šæ ‡å‡†æ–‡æ¡£æµå†…å®¹åœ¨ç¬¬ä¸€å±‚ï¼Œä½¿ç”¨æµ®åŠ¨çš„å…ƒç´ ï¼Œåœ¨æ ‡å‡†æ–‡æ¡£æµä¹‹åæ¸²æŸ“ï¼Œå¤„äºæ ‡å‡†æ–‡æ¡£æµä¹‹ä¸Šã€‚è€Œç»å¯¹å®šä½çš„å…ƒç´ æœ€åæ¸²æŸ“ï¼Œå¤„äºæœ€ä¸Šé¢ä¸€å±‚ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡z-index æ¥æ“ä½œå±‚å çš„ä½ç½®ã€‚</p>
<h2 data-id="heading-9">é¡µé¢æ¸²æŸ“</h2>
<p>1.è¾“å…¥URLè·å–åˆ°HTMLæ–‡ä»¶ï¼Œå¹¶è¿›è¡Œè§£æã€‚</p>
<p>2.è§£æHTMLè¿‡ç¨‹ä¸­ï¼Œå¦‚æœå‘ç°å«æœ‰å¤–éƒ¨èµ„æºé“¾æ¥ï¼Œjs,css,å›¾ç‰‡æ—¶ï¼Œä¼šå¯åŠ¨å…¶ä»–çº¿ç¨‹è¿›è¡Œä¸‹è½½ã€‚ä½†æ˜¯é‡è§jsæ–‡ä»¶æ—¶å€™ï¼Œä¼šåœæ­¢HTMLè§£æï¼Œç­‰jsæ–‡ä»¶ä¸‹è½½ç»“æŸå¹¶æ‰§è¡Œå®Œï¼Œå†è¿›è¡Œè§£æã€‚æ˜¯å› ä¸ºjså¯èƒ½ä¼šå‡ºç°ä¿®æ”¹DOMå·²ç»å®Œæˆè§£æçš„ç»“æœï¼Œæ‰€ä»¥ç­‰jsç»“æŸæ‰ä¼šç»§ç»­è§£æã€‚</p>
<p>3.HTMLè§£æçš„åŒæ—¶ï¼Œè§£æå™¨æŠŠè§£æå®Œçš„HTMLè½¬åŒ–æˆDOMå¯¹è±¡ï¼Œå†è¿›ä¸€æ­¥æ„å»ºDOMæ ‘ã€‚</p>
<p>4.cssä¸‹è½½å®Œä¹‹åï¼Œcssè§£æå™¨å¼€å§‹è§£æcssæ–‡ä»¶ï¼Œè§£ææˆcsså¯¹è±¡ï¼Œæ„æˆCSSOMæ ‘ã€‚</p>
<p>5.DOMæ ‘å’ŒCSSOMæ ‘éƒ½æ„å»ºå®Œæˆä»¥åï¼Œæµè§ˆå™¨ä¼šæ ¹æ®è¿™ä¸¤æ£µæ ‘æ„å»ºå‡ºä¸€é¢—æ¸²æŸ“æ ‘ã€‚</p>
<p>6.æ¸²æŸ“æ ‘æ„å»ºå®Œæˆä¹‹åï¼Œè¿›è¡Œå¸ƒå±€è®¡ç®—ã€‚</p>
<p>7.å¸ƒå±€è®¡ç®—å®Œæˆåï¼Œé¡µé¢æ¸²æŸ“å…ƒç´ ï¼Œå†…å®¹å‘ˆç°åœ¨å±å¹•ä¸Šã€‚</p>
<p><strong>é‡æ’ï¼š</strong></p>
<p>DOMæ•°ä¸­è¿›è¡Œå¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹å…ƒç´ çš„å¤§å°ï¼Œä½ç½®ï¼Œå¸ƒå±€æ–¹å¼ç­‰éƒ½éœ€è¦é‡æ–°è®¡ç®—ï¼Œé‡æ–°ç»å†DOMæ”¹åŠ¨ï¼ŒCSSOMæ ‘çš„æ„å»ºï¼Œæ¸²æŸ“æ ‘çš„æ„å»ºï¼Œé‡æ–°ç»˜åˆ¶æ•´ä¸ªæµç¨‹ï¼Œä¹Ÿå«å›æµ</p>
<p><strong>é‡ç»˜ï¼š</strong></p>
<p>æ”¹å˜å…ƒç´ é¢œè‰²ç­‰å¤–è§‚å±æ€§æ—¶å€™ï¼Œä¸æ”¹å˜ä½ç½®å¤§å°ï¼Œå½±å“å…¶ä»–å…ƒç´ å¸ƒå±€ï¼Œè¿™ä¸ªå°±æ— éœ€é‡æ–°æ„å»ºæ¸²æŸ“æ ‘ï¼Œå°±åªå¯¹æ ·å¼è¿›è¡Œé‡æ–°ç»˜åˆ¶ã€‚</p>
<h2 data-id="heading-10">vue3:<strong>è·å–å½“å‰è·¯ç”±çš„å®Œæ•´ URL è·¯å¾„</strong></h2>
<p><code>router.currentRoute.value.fullPath</code>Â çš„ä½œç”¨æ˜¯Â <strong>è·å–å½“å‰è·¯ç”±çš„å®Œæ•´ URL è·¯å¾„ï¼ˆåŒ…å«æŸ¥è¯¢å‚æ•°å’Œå“ˆå¸Œå€¼ï¼‰</strong></p>
<ol>
<li>
<p><strong><code>router</code></strong>:</p>
<p>è¿™é€šå¸¸æ˜¯æŒ‡åœ¨ Vue.js é¡¹ç›®ä¸­é€šè¿‡Â <code>createRouter</code>Â åˆ›å»ºçš„è·¯ç”±å®ä¾‹ã€‚å®ƒç®¡ç†ç€æ•´ä¸ªåº”ç”¨çš„è·¯ç”±é…ç½®å’Œå¯¼èˆªçŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong><code>currentRoute</code></strong>:</p>
<p>è¿™æ˜¯Â <code>router</code>Â å®ä¾‹ä¸Šçš„ä¸€ä¸ªå±æ€§ï¼Œå®ƒè¿”å›ä¸€ä¸ªÂ <strong>å“åº”å¼çš„ï¼ˆreactiveï¼‰è·¯ç”±å¯¹è±¡</strong>ã€‚
è¿™ä¸ªå¯¹è±¡åŒ…å«äº†å½“å‰é¡µé¢çš„è·¯ç”±ä¿¡æ¯ï¼Œä¾‹å¦‚è·¯å¾„ (<code>path</code>)ã€å‚æ•° (<code>params</code>)ã€æŸ¥è¯¢å‚æ•° (<code>query</code>) ç­‰ã€‚
åœ¨ Vue 3 ä¸­ï¼Œ<code>currentRoute</code>Â æ˜¯ä¸€ä¸ªÂ <code>Ref</code>Â å¯¹è±¡ï¼Œæ‰€ä»¥ä½ éœ€è¦é€šè¿‡Â <code>.value</code>Â æ¥è®¿é—®å®ƒçš„å€¼ã€‚</p>
</li>
<li>
<p><strong><code>value</code></strong>:</p>
<p>å› ä¸ºÂ <code>currentRoute</code>Â æ˜¯ä¸€ä¸ªÂ <code>Ref</code>Â å¯¹è±¡ï¼Œå®ƒçš„å€¼è¢«åŒ…è£¹åœ¨Â <code>.value</code>Â å±æ€§ä¸­ã€‚
æ‰€ä»¥Â <code>router.currentRoute.value</code>Â æ‰æ˜¯è·å–åˆ°çš„<strong>å½“å‰è·¯ç”±çš„å®é™…å¯¹è±¡</strong>ã€‚</p>
</li>
<li>
<p><strong><code>fullPath</code></strong>:</p>
<p>è¿™æ˜¯è·¯ç”±å¯¹è±¡ä¸Šçš„ä¸€ä¸ªå±æ€§ã€‚</p>
<p>å®ƒè¿”å›å½“å‰è·¯ç”±çš„<strong>å®Œæ•´è·¯å¾„å­—ç¬¦ä¸²</strong>ï¼ŒåŒ…æ‹¬ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">-</span>   è·¯å¾„ (<span class="hljs-code">`path`</span>)
<span class="hljs-bullet">-</span>   æŸ¥è¯¢å‚æ•°ï¼ˆä»¥Â <span class="hljs-code">`?`</span>Â å¼€å¤´ï¼‰
<span class="hljs-bullet">-</span>   å“ˆå¸Œå€¼ï¼ˆä»¥Â <span class="hljs-code">`#`</span>Â å¼€å¤´ï¼‰
</code></pre>
</li>
</ol>
<p>å‡è®¾ä½ å½“å‰åœ¨æµè§ˆå™¨ä¸­çš„ URL æ˜¯ï¼š<code>http://localhost:8080/user/profile?id=123&amp;name=å¼ ä¸‰#info</code></p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useRouter } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue-router'</span>;

<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();

<span class="hljs-comment">// è·å–å½“å‰è·¯ç”±å¯¹è±¡</span>
<span class="hljs-keyword">const</span> currentRoute = router.<span class="hljs-property">currentRoute</span>;

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(currentRoute.<span class="hljs-property">value</span>.<span class="hljs-property">fullPath</span>); 
<span class="hljs-comment">// è¾“å‡º: "/user/profile?id=123&amp;name=å¼ ä¸‰#info"</span>

<span class="hljs-comment">// ä½ ä¹Ÿå¯ä»¥åˆ†åˆ«è·å–å…¶ä»–å±æ€§</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(currentRoute.<span class="hljs-property">value</span>.<span class="hljs-property">path</span>);      
<span class="hljs-comment">// è¾“å‡º: "/user/profile" (ä¸åŒ…å«æŸ¥è¯¢å‚æ•°å’Œå“ˆå¸Œ)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(currentRoute.<span class="hljs-property">value</span>.<span class="hljs-property">query</span>);     
<span class="hljs-comment">// è¾“å‡º: { id: '123', name: 'å¼ ä¸‰' } (ä¸€ä¸ªè§£æåçš„å¯¹è±¡)</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(currentRoute.<span class="hljs-property">value</span>.<span class="hljs-property">hash</span>);      
<span class="hljs-comment">// è¾“å‡º: "#info"</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h3 data-id="heading-11">å¸¸è§ä½¿ç”¨åœºæ™¯</h3>
<ol>
<li>
<p><strong>åœ¨ç»„ä»¶ä¸­è·å–å½“å‰ URL ä¿¡æ¯</strong>ï¼š</p>
<p>å½“ä½ éœ€è¦æ ¹æ®å½“å‰ URL çš„æŸ¥è¯¢å‚æ•°æ¥åŠ è½½ä¸åŒçš„æ•°æ®æ—¶ã€‚
ä¾‹å¦‚ï¼Œåˆ—è¡¨é¡µæ ¹æ®Â <code>?page=2</code>Â æ¥åŠ è½½ç¬¬äºŒé¡µçš„æ•°æ®ã€‚</p>
</li>
<li>
<p><strong>å¯¼èˆªå®ˆå«ï¼ˆNavigation Guardsï¼‰</strong> ï¼š</p>
<p>åœ¨è·¯ç”±å®ˆå«ä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ®ä»å“ªä¸ªé¡µé¢æ¥ï¼ˆ<code>from.fullPath</code>ï¼‰æˆ–è€…è¦åˆ°å“ªä¸ªé¡µé¢å»ï¼ˆ<code>to.fullPath</code>ï¼‰æ¥åšä¸€äº›åˆ¤æ–­é€»è¾‘ã€‚
ä¾‹å¦‚ï¼Œåˆ¤æ–­ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®æŸä¸ªéœ€è¦ç‰¹å®šæŸ¥è¯¢å‚æ•°çš„é¡µé¢ã€‚</p>
</li>
<li>
<p><strong>è®°å½•æˆ–åˆ†äº«å½“å‰é¡µé¢åœ°å€</strong>ï¼š</p>
<p>å¦‚æœä½ æƒ³å®ç°ä¸€ä¸ª â€œåˆ†äº«å½“å‰é¡µé¢â€ çš„åŠŸèƒ½ï¼Œ<code>fullPath</code>Â å°±éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒåŒ…å«äº†æ‰€æœ‰å¿…è¦çš„ä¿¡æ¯ï¼Œå¯ä»¥è®©å…¶ä»–äººæ‰“å¼€åçœ‹åˆ°å’Œä½ ä¸€æ¨¡ä¸€æ ·çš„é¡µé¢çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>å¤„ç†é¢åŒ…å±‘å¯¼èˆªï¼ˆBreadcrumbï¼‰</strong> ï¼š</p>
<p>è™½ç„¶é¢åŒ…å±‘å¯¼èˆªä¸»è¦ä¾èµ–Â <code>$route.matched</code>Â æ•°ç»„ï¼Œä½†åœ¨æŸäº›å¤æ‚æƒ…å†µä¸‹ï¼Œä¹Ÿå¯èƒ½éœ€è¦ç”¨åˆ°Â <code>fullPath</code>Â æ¥ç”Ÿæˆæ­£ç¡®çš„é“¾æ¥ã€‚</p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è§£å†³ el-table åœ¨ fixed çŠ¶æ€ä¸‹è·å– dom ä¸å‡†ç¡®çš„é—®é¢˜]]></title>    <link>https://juejin.cn/post/7576470438580207642</link>    <guid>https://juejin.cn/post/7576470438580207642</guid>    <pubDate>2025-11-25T07:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576470438580207642" data-draft-id="7576218673050304563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è§£å†³ el-table åœ¨ fixed çŠ¶æ€ä¸‹è·å– dom ä¸å‡†ç¡®çš„é—®é¢˜"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sakura_æ´"/> <meta itemprop="url" content="https://juejin.cn/user/3394924908385614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è§£å†³ el-table åœ¨ fixed çŠ¶æ€ä¸‹è·å– dom ä¸å‡†ç¡®çš„é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3394924908385614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sakura_æ´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:54:10.000Z" title="Tue Nov 25 2025 07:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å…³é”®è¯ï¼š vue el-table fixed ç„¦ç‚¹ dom</strong></p>
<p>è¿‘æ—¥æœ‰éœ€æ±‚æ˜¯ el-table ä¸­ç„¦ç‚¹è·³è½¬ï¼Œå›è½¦è·³è½¬åˆ°åŒä¸€åˆ—ä¸‹ä¸€è¡Œï¼Œä¸€åˆ—ç»“æŸä¹‹åå›åˆ°ä¸‹ä¸€åˆ—ç¬¬ä¸€è¡Œã€‚</p>
<p>å¦‚å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5154d8153c9340c5bac26b2ed0238a3e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2FrdXJhX-a0gQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764662285&amp;x-signature=5p7n7%2BqX2hHr5Cr0DjhnzIdZZFU%3D" alt="PixPin_2025-11-25_15-28-40.jpg" loading="lazy"/></p>
<p>å¼€å§‹ä¸€åˆ‡æ­£å¸¸ï¼Œé€šè¿‡ä½¿ç”¨  <code>:ref="getActualValueInputRef(scope.$index, index)"</code> å¯ä»¥è®¾ç½®å¯¹åº”çš„ ref ï¼Œå¹¶é€šè¿‡ <code>this.$refs\[XXX]</code> è·å–å¯¹åº”çš„ dom</p>
<pre><code class="hljs language-javascript" lang="javascript">&lt;el-input
  v-<span class="hljs-keyword">if</span>=<span class="hljs-string">"!readonly"</span>
  :ref=<span class="hljs-string">"getActualValueInputRef(scope.$index, index)"</span>
  v-model=<span class="hljs-string">"scope.row.valueActuals[index - 1]"</span>
  :placeholder=<span class="hljs-string">"getActualValueLabel(index)"</span>
  size=<span class="hljs-string">"small"</span>
  @keydown.<span class="hljs-property">enter</span>.<span class="hljs-property">native</span>=<span class="hljs-string">"handleActualValueEnter(scope.$index, index, $event)"</span>
  @input=<span class="hljs-string">"handleValueActualChange(scope.row, index - 1, $event)"</span>
/&gt;


<span class="hljs-comment">// ç”Ÿæˆå®æµ‹å€¼è¾“å…¥æ¡†çš„ ref åç§°</span>
<span class="hljs-title function_">getActualValueInputRef</span>(<span class="hljs-params">rowIndex, colIndex</span>) {
  <span class="hljs-keyword">return</span> <span class="hljs-string">`actualValueInput_<span class="hljs-subst">${rowIndex}</span>_<span class="hljs-subst">${colIndex}</span>`</span>
},

<span class="hljs-comment">// èšç„¦åˆ°æŒ‡å®šçš„å®æµ‹å€¼å•å…ƒæ ¼</span>
<span class="hljs-title function_">focusActualValueCell</span>(<span class="hljs-params">rowIndex, colIndex</span>) {
    <span class="hljs-keyword">const</span> refName = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getActualValueInputRef</span>(rowIndex, colIndex)
    <span class="hljs-keyword">const</span> inputComponents = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[refName]
    <span class="hljs-keyword">const</span> targetComponent = inputComponents[inputComponents.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]
    <span class="hljs-keyword">if</span> (targetComponent) {
      <span class="hljs-comment">// ç›´æ¥æ“ä½œåŸç”Ÿ input å…ƒç´ </span>
      <span class="hljs-keyword">const</span> inputElement = targetComponent.<span class="hljs-property">$el</span>?.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input'</span>) || targetComponent.<span class="hljs-property">$refs</span>?.<span class="hljs-property">input</span>
      <span class="hljs-keyword">if</span> (inputElement) {
        inputElement.<span class="hljs-title function_">focus</span>()
        <span class="hljs-comment">// å»¶è¿Ÿé€‰ä¸­ï¼Œç¡®ä¿ç„¦ç‚¹å·²è®¾ç½®</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          inputElement.<span class="hljs-title function_">select</span>()
        }, <span class="hljs-number">0</span>)
      }
    }
}

</code></pre>
<p><strong>ä½†ç”±äº el-table è®¾ç½®äº† fixed æ‰€ä»¥å¯¼è‡´è·å–çš„ inputComponents æ˜¯ä¸€ä¸ªæ•°ç»„</strong>ï¼Œä¸€å¼€å§‹ç›´æ¥è·å–æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ å³å¯ï¼š<code>inputComponents\[inputComponents.length - 1]</code></p>
<p>ä½†åé¢æ–°å¢è¡Œçš„æ—¶å€™å‘ç°æ— æ³•æ­£ç¡®è·å–ç„¦ç‚¹ã€‚è°ƒè¯•ä¹‹åå‘ç°ç„¦ç‚¹è·³è½¬åˆ°äº† fixed å¤åˆ¶çš„å‰¯æœ¬å…ƒç´ ä¸­ã€‚<strong>å³é»˜è®¤æ¸²æŸ“çš„ inputComponents ä¸­æœ€åä¸€ä¸ªå…ƒç´ æ˜¯é¡µé¢ä¸Šå±•ç¤ºçš„å…ƒç´ ã€‚ä½†æ–°å¢çš„è¡Œä¸­ inputComponents çš„æœ€åä¸€ä¸ªå…ƒç´ æ˜¯ fixed çš„å‰¯æœ¬ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ æ‰æ˜¯é¡µé¢ä¸Šå±•ç¤ºçš„å…ƒç´ </strong>ã€‚</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆ¤æ–­ç»„ä»¶æ˜¯å¦ä½äºdisplayåŒºåŸŸï¼ˆéfixedåŒºåŸŸï¼‰</span>
<span class="hljs-title function_">isDisplayAreaComponent</span>(<span class="hljs-params">component</span>) {
  <span class="hljs-keyword">if</span> (!component || !component.<span class="hljs-property">$el</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

  <span class="hljs-comment">// æ£€æŸ¥ç»„ä»¶æ˜¯å¦åœ¨éfixedçš„è¡¨æ ¼ä¸­</span>
  <span class="hljs-keyword">const</span> tableEl = component.<span class="hljs-property">$el</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'.el-table'</span>)
  <span class="hljs-keyword">if</span> (!tableEl) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>

  <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦åœ¨fixedåˆ—ä¸­</span>
  <span class="hljs-keyword">const</span> isFixedLeft = component.<span class="hljs-property">$el</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'.el-table__fixed'</span>) <span class="hljs-comment">// å·¦å›ºå®š</span>
  <span class="hljs-keyword">const</span> isFixedRight = component.<span class="hljs-property">$el</span>.<span class="hljs-title function_">closest</span>(<span class="hljs-string">'.el-table__fixed-right'</span>) <span class="hljs-comment">// å³å›ºå®š</span>

  <span class="hljs-comment">// å¦‚æœä¸åœ¨ä»»ä½•fixedåŒºåŸŸï¼Œåˆ™è®¤ä¸ºæ˜¯displayåŒºåŸŸçš„ç»„ä»¶</span>
  <span class="hljs-keyword">return</span> !isFixedLeft &amp;&amp; !isFixedRight
},

<span class="hljs-comment">// èšç„¦åˆ°æŒ‡å®šçš„å®æµ‹å€¼å•å…ƒæ ¼</span>
<span class="hljs-title function_">focusActualValueCell</span>(<span class="hljs-params">rowIndex, colIndex</span>) {
    <span class="hljs-keyword">const</span> refName = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getActualValueInputRef</span>(rowIndex, colIndex)
    <span class="hljs-keyword">const</span> inputComponents = <span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>[refName]
    
    <span class="hljs-keyword">let</span> targetComponent = <span class="hljs-literal">null</span>
    <span class="hljs-comment">// é¦–å…ˆå°è¯•æ‰¾åˆ°displayåŒºåŸŸçš„ç»„ä»¶ï¼ˆéfixedåŒºåŸŸï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> component <span class="hljs-keyword">of</span> inputComponents) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">isDisplayAreaComponent</span>(component)) {
        targetComponent = component
        <span class="hljs-keyword">break</span>
      }
    }

    <span class="hljs-comment">// å¦‚æœè¿˜æ˜¯æ²¡æ‰¾åˆ°ï¼Œä½¿ç”¨æœ€åä¸€ä¸ªç»„ä»¶ä½œä¸ºåå¤‡æ–¹æ¡ˆ</span>
    <span class="hljs-keyword">if</span> (!targetComponent) {
      targetComponent = componentArray[componentArray.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]
    }
    
    <span class="hljs-keyword">if</span> (targetComponent) {
      <span class="hljs-comment">// ç›´æ¥æ“ä½œåŸç”Ÿ input å…ƒç´ </span>
      <span class="hljs-keyword">const</span> inputElement = targetComponent.<span class="hljs-property">$el</span>?.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'input'</span>) || targetComponent.<span class="hljs-property">$refs</span>?.<span class="hljs-property">input</span>
      <span class="hljs-keyword">if</span> (inputElement) {
        inputElement.<span class="hljs-title function_">focus</span>()
        <span class="hljs-comment">// å»¶è¿Ÿé€‰ä¸­ï¼Œç¡®ä¿ç„¦ç‚¹å·²è®¾ç½®</span>
        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
          inputElement.<span class="hljs-title function_">select</span>()
        }, <span class="hljs-number">0</span>)
      }
    }
}
</code></pre>
<p>é€šè¿‡éå† inputComponents å…ƒç´ ä½¿ç”¨ isDisplayAreaComponent æ¥åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦æ˜¯ fixed å¤åˆ¶å‡ºæ¥çš„å‰¯æœ¬ï¼Œ<strong>åªè·å–çœŸå®çš„é¡µé¢çš„å…ƒç´ å¹¶è·³è½¬ç„¦ç‚¹ã€‚</strong></p>
<p>è‡³æ­¤è¯¥é—®é¢˜å®Œå…¨è§£å†³ã€‚å…³é”®æ˜¯é€šè¿‡ <strong>$el.closestï¼ˆï¼‰</strong> æ¥åˆ¤æ–­æ˜¯å¦æ˜¯ fixed å‰¯æœ¬ã€‚</p>
<p><code>closest()</code> æ˜¯ä¸€ä¸ª DOM æ–¹æ³•ï¼Œä»å½“å‰å…ƒç´ å¼€å§‹ï¼Œæ²¿ DOM æ ‘å‘ä¸ŠæŸ¥æ‰¾åŒ¹é…æŒ‡å®šé€‰æ‹©å™¨çš„æœ€è¿‘çš„ç¥–å…ˆå…ƒç´ ï¼ˆåŒ…æ‹¬å…ƒç´ æœ¬èº«ï¼‰ã€‚ä¾‹å¦‚ï¼š</p>
<ul>
<li><code>element.closest('.el-table')</code>Â ä¼šä»å½“å‰å…ƒç´ å¼€å§‹å‘ä¸ŠæŸ¥æ‰¾ï¼Œè¿”å›ç¬¬ä¸€ä¸ªå…·æœ‰Â <code>.el-table</code>Â ç±»çš„ç¥–å…ˆå…ƒç´ </li>
</ul>
<p>é€šè¿‡æŸ¥æ‰¾çˆ¶å…ƒç´ æ˜¯å¦å­˜åœ¨æ ·å¼ <strong>.el-table__fixedï¼Œ.el-table__fixed-right</strong> åˆ¤æ–­è¯¥å…ƒç´ æ˜¯å¦æ˜¯ el-table å› ä¸º fixed åˆ›å»ºçš„å‰¯æœ¬ï¼Œä»è€Œæ¥æ‰¾åˆ°é¡µé¢ä¸Šå±•ç¤ºçš„ dom ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3ä»€ä¹ˆæ—¶å€™ä¸ä¼šè§¦å‘onMountedç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576468602304610342</link>    <guid>https://juejin.cn/post/7576468602304610342</guid>    <pubDate>2025-11-25T07:56:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576468602304610342" data-draft-id="7576258838300688430" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3ä»€ä¹ˆæ—¶å€™ä¸ä¼šè§¦å‘onMountedç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ"/> <meta itemprop="keywords" content="Vue.js,å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:56:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="best666"/> <meta itemprop="url" content="https://juejin.cn/user/2357779505350862"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3ä»€ä¹ˆæ—¶å€™ä¸ä¼šè§¦å‘onMountedç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2357779505350862/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    best666
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:56:27.000Z" title="Tue Nov 25 2025 07:56:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Vue 3 ä¸­ï¼Œ<code>onMounted</code>Â çš„æ ¸å¿ƒå«ä¹‰æ˜¯ï¼š<strong>ç»„ä»¶å·²ç»â€œæŒ‚è½½â€åˆ°äº†æµè§ˆå™¨çœŸå®çš„ DOM æ ‘ä¸Š</strong>ã€‚</p>
<p>ç®€å•æ¥è¯´ï¼Œå°±æ˜¯â€œ<strong>ç»„ä»¶å·²ç»æ­£å¼ç™»å°äº®ç›¸äº†</strong>â€ã€‚</p>
<p>å¦‚æœÂ <code>onMounted</code>Â æ²¡æœ‰è§¦å‘ï¼Œé€šå¸¸æ˜¯å› ä¸ºç»„ä»¶<strong>æ ¹æœ¬æ²¡æœºä¼šç™»å°</strong>ï¼Œæˆ–è€…<strong>ä¹‹å‰å·²ç»ç™»å°è¿‡å¹¶èµ–åœ¨å°ä¸Šæ²¡èµ°</strong>ã€‚ä»¥ä¸‹æ˜¯å‡ ç§å¸¸è§çš„æƒ…å†µï¼š</p>
<h3 data-id="heading-0">1. è¢«Â <code>v-if="false"</code>Â æ‹¦åœ¨é—¨å¤–</h3>
<p>è¿™æ˜¯æœ€å¸¸è§çš„åŸå› ã€‚</p>
<ul>
<li><strong>åŸç†</strong>ï¼š<code>v-if</code>Â æ˜¯â€œçœŸÂ·æ¡ä»¶æ¸²æŸ“â€ã€‚å¦‚æœæ¡ä»¶æ˜¯Â <code>false</code>ï¼ŒVue å‹æ ¹å°±ä¸ä¼šåˆ›å»ºè¿™ä¸ªç»„ä»¶çš„ DOM å…ƒç´ ï¼Œç»„ä»¶è¿â€œå‡ºç”Ÿâ€çš„æœºä¼šéƒ½æ²¡æœ‰ï¼Œè‡ªç„¶ä¸ä¼šâ€œæŒ‚è½½â€ã€‚</li>
<li><strong>å¯¹æ¯”</strong>ï¼š<code>v-show="false"</code>Â åªæ˜¯æŠŠ CSS è®¾ä¸ºÂ <code>display: none</code>ï¼Œç»„ä»¶å…¶å®å·²ç»æŒ‚è½½äº†ï¼Œæ‰€ä»¥Â <code>onMounted</code>Â <strong>ä¼š</strong>è§¦å‘ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js">&lt;!-- âŒ onMounted ä¸ä¼šè§¦å‘ --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"false"</span> /&gt;</span></span>

&lt;!-- âœ… onMounted ä¼šè§¦å‘ (åªæ˜¯çœ‹ä¸è§) --&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyComponent</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">"false"</span> /&gt;</span></span>
</code></pre>
<h3 data-id="heading-1">2. è¢«Â <code>&lt;KeepAlive&gt;</code>Â ç¼“å­˜äº† (ç¬¬äºŒæ¬¡è¿›å…¥æ—¶)</h3>
<p>å¦‚æœä½ ç”¨äº†Â <code>&lt;KeepAlive&gt;</code>Â åŒ…è£¹ç»„ä»¶ï¼ˆå¸¸è§äº Tab åˆ‡æ¢æˆ–è·¯ç”±è§†å›¾ï¼‰ï¼š</p>
<ul>
<li><strong>ç¬¬ä¸€æ¬¡è¿›å…¥</strong>ï¼šç»„ä»¶åˆå§‹åŒ–ï¼Œ<code>onMounted</code>Â <strong>ä¼š</strong>è§¦å‘ã€‚</li>
<li><strong>åˆ‡èµ°å†åˆ‡å›æ¥</strong>ï¼šç»„ä»¶è¢«ç¼“å­˜äº†ï¼Œæ²¡æœ‰è¢«é”€æ¯ï¼Œä¹Ÿæ²¡æœ‰é‡æ–°æŒ‚è½½ã€‚æ­¤æ—¶Â <code>onMounted</code>Â <strong>ä¸ä¼š</strong>å†æ¬¡è§¦å‘ã€‚</li>
<li><strong>æ€ä¹ˆåŠ</strong>ï¼šè¿™ç§æƒ…å†µä½ åº”è¯¥ç”¨Â <code>onActivated</code>Â é’©å­ã€‚</li>
</ul>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ KeepAlive å†…éƒ¨çš„ç»„ä»¶ä¸­</span>
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åªæœ‰ç¬¬ä¸€æ¬¡è¿›æ¥æ‰æ‰“å°'</span>);
});

<span class="hljs-title function_">onActivated</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¯æ¬¡åˆ‡å›æ¥éƒ½ä¼šæ‰“å°'</span>);
});
</code></pre>
<h3 data-id="heading-2">3. æœåŠ¡ç«¯æ¸²æŸ“ (SSR) ç¯å¢ƒ</h3>
<p>å¦‚æœä½ çš„é¡¹ç›®ä½¿ç”¨äº† Nuxt.js æˆ–è€… Vite SSRï¼š</p>
<ul>
<li><strong>åŸç†</strong>ï¼š<code>onMounted</code>Â æ˜¯<strong>æµè§ˆå™¨ç‹¬æœ‰</strong>çš„ç”Ÿå‘½å‘¨æœŸï¼ˆå› ä¸ºå®ƒæ¶‰åŠåˆ° DOM æ“ä½œï¼‰ã€‚åœ¨ Node.js æœåŠ¡å™¨ç«¯æ‰§è¡Œæ¸²æŸ“æ—¶ï¼ŒæœåŠ¡å™¨æ²¡æœ‰ DOMï¼Œæ‰€ä»¥å®ƒåªæ‰§è¡ŒÂ <code>setup</code>ï¼Œ<strong>ç»ä¸ä¼šæ‰§è¡ŒÂ <code>onMounted</code></strong>ã€‚</li>
<li><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ åœ¨Â <code>onMounted</code>Â ä¹‹å¤–ï¼ˆæ¯”å¦‚ç›´æ¥åœ¨Â <code>setup</code>Â æ ¹ä½œç”¨åŸŸï¼‰å†™äº†Â <code>window</code>Â æˆ–Â <code>document</code>Â ç›¸å…³çš„ä»£ç ï¼Œåœ¨ SSR æ¨¡å¼ä¸‹ä¼šç›´æ¥æŠ¥é”™ã€‚</li>
</ul>
<h3 data-id="heading-3">4. åœ¨Â <code>setup</code>Â æˆ–Â <code>onBeforeMount</code>Â é˜¶æ®µæŠ¥é”™äº†</h3>
<p>å¦‚æœç»„ä»¶åœ¨â€œåŒ–å¦†é—´â€ï¼ˆ<code>setup</code>ï¼‰æˆ–è€…â€œå€™åœºåŒºâ€ï¼ˆ<code>onBeforeMount</code>ï¼‰å°±å‘ç”Ÿäº†ä»£ç é”™è¯¯ï¼ˆæŠ›å‡ºå¼‚å¸¸ï¼‰ï¼š</p>
<ul>
<li><strong>ç»“æœ</strong>ï¼šVue æ¸²æŸ“è¿›ç¨‹ä¸­æ–­ï¼Œç»„ä»¶æŒ‚è½½å¤±è´¥ï¼Œ<code>onMounted</code>Â è‡ªç„¶ä¹Ÿå°±æ— æ³•åˆ°è¾¾ã€‚</li>
</ul>
<h3 data-id="heading-4">5. å¼‚æ­¥ç»„ä»¶åŠ è½½å¤±è´¥</h3>
<p>å¦‚æœä½ ä½¿ç”¨äº†Â <code>defineAsyncComponent</code>Â é…åˆÂ <code>&lt;Suspense&gt;</code>ï¼Œä½†å¼‚æ­¥ç»„ä»¶åŠ è½½è¶…æ—¶æˆ–å¤±è´¥ï¼Œä¸”ä½ æ¸²æŸ“äº†Â <code>error</code>Â æ’æ§½çš„å†…å®¹ï¼Œé‚£ä¹ˆç›®æ ‡ç»„ä»¶çš„Â <code>onMounted</code>Â å°±ä¸ä¼šè§¦å‘ã€‚</p>
<hr/>
<h3 data-id="heading-5">æ€»ç»“ï¼šæ’æŸ¥æ€è·¯</h3>
<p>å¦‚æœä»£ç é‡Œçš„Â <code>onMounted</code>Â æ²¡è·‘ï¼ŒæŒ‰è¿™ä¸ªé¡ºåºæŸ¥ï¼š</p>
<ol>
<li><strong>æŸ¥Â <code>v-if</code></strong>ï¼šæ˜¯ä¸æ˜¯çˆ¶ç»„ä»¶æŠŠå®ƒå…³æ‰äº†ï¼Ÿ</li>
<li><strong>æŸ¥Â <code>&lt;KeepAlive&gt;</code></strong> ï¼šæ˜¯ä¸æ˜¯ä¹‹å‰å·²ç»åŠ è½½è¿‡ä¸€æ¬¡äº†ï¼Ÿ</li>
<li><strong>æŸ¥æ§åˆ¶å°æŠ¥é”™</strong>ï¼šæ˜¯ä¸æ˜¯å‰é¢ä»£ç å†™æŒ‚äº†ï¼Ÿ</li>
<li><strong>æŸ¥ç¯å¢ƒ</strong>ï¼šæ˜¯ä¸æ˜¯ä»£ç è·‘åœ¨æœåŠ¡ç«¯ï¼ˆSSRï¼‰ï¼Ÿ</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlinä¸­éå†é›†åˆçš„æ–¹æ³•]]></title>    <link>https://juejin.cn/post/7576212547236266027</link>    <guid>https://juejin.cn/post/7576212547236266027</guid>    <pubDate>2025-11-25T07:55:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576212547236266027" data-draft-id="7576272680520171563" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlinä¸­éå†é›†åˆçš„æ–¹æ³•"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-25T07:55:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å—é›¨åŒ—æ–—"/> <meta itemprop="url" content="https://juejin.cn/user/4059818590476286"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlinä¸­éå†é›†åˆçš„æ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4059818590476286/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å—é›¨åŒ—æ–—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T07:55:40.000Z" title="Tue Nov 25 2025 07:55:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ Kotlin ä¸­ï¼Œéå†Â <code>MutableList</code>Â æœ‰å¤šç§æ–¹å¼ï¼Œå¯æ ¹æ®éœ€æ±‚é€‰æ‹©åˆé€‚çš„æ–¹æ³•ï¼Œä»¥ä¸‹æ˜¯å¸¸ç”¨éå†æ–¹å¼åŠç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-0">1.Â <strong>for å¾ªç¯éå†ï¼ˆæœ€å¸¸ç”¨ï¼‰</strong></h3>
<p>ç›´æ¥é€šè¿‡Â <code>for-in</code>Â å¾ªç¯éå†Â <code>MutableList</code>ï¼Œè¯­æ³•ç®€æ´ï¼Œé€‚ç”¨äºå¤§å¤šæ•°åœºæ™¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)

<span class="hljs-comment">// éå†å…ƒç´ </span>
<span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> mutableList) {
    println(item) <span class="hljs-comment">// è¾“å‡ºï¼šAã€Bã€C</span>
}

<span class="hljs-comment">// éå†ç´¢å¼•å’Œå…ƒç´ ï¼ˆwithIndex()ï¼‰</span>
<span class="hljs-keyword">for</span> ((index, item) <span class="hljs-keyword">in</span> mutableList.withIndex()) {
    println(<span class="hljs-string">"ç´¢å¼• <span class="hljs-variable">$index</span>ï¼š<span class="hljs-variable">$item</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šç´¢å¼• 0ï¼šAã€ç´¢å¼• 1ï¼šBã€ç´¢å¼• 2ï¼šC</span>
}
</code></pre>
<h3 data-id="heading-1">2.Â <strong>è¿­ä»£å™¨éå†ï¼ˆIteratorï¼‰</strong></h3>
<p>é€šè¿‡Â <code>iterator()</code>Â è·å–è¿­ä»£å™¨ï¼Œæ‰‹åŠ¨æ§åˆ¶éå†è¿‡ç¨‹ï¼Œæ”¯æŒåœ¨éå†ä¸­å®‰å…¨åˆ é™¤å…ƒç´ ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
<span class="hljs-keyword">val</span> iterator = mutableList.iterator()

<span class="hljs-keyword">while</span> (iterator.hasNext()) {
    <span class="hljs-keyword">val</span> item = iterator.next()
    println(item) <span class="hljs-comment">// è¾“å‡ºï¼šAã€Bã€C</span>

    <span class="hljs-comment">// éå†ä¸­åˆ é™¤å…ƒç´ ï¼ˆå®‰å…¨æ“ä½œï¼‰</span>
    <span class="hljs-keyword">if</span> (item == <span class="hljs-string">"B"</span>) {
        iterator.remove() <span class="hljs-comment">// åˆ é™¤ "B"ï¼Œä¸ä¼šè§¦å‘ ConcurrentModificationException</span>
    }
}

println(mutableList) <span class="hljs-comment">// è¾“å‡ºï¼š[A, C]</span>
</code></pre>
<h3 data-id="heading-2">3.Â <strong>forEach éå†ï¼ˆå‡½æ•°å¼é£æ ¼ï¼‰</strong></h3>
<p>ä½¿ç”¨Â <code>forEach</code>Â æ‰©å±•å‡½æ•°ï¼Œç®€æ´é«˜æ•ˆï¼Œé€‚åˆä¸éœ€è¦ä¸­æ–­éå†çš„åœºæ™¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)

<span class="hljs-comment">// åŸºæœ¬éå†</span>
mutableList.forEach { item -&gt;
    println(item) <span class="hljs-comment">// è¾“å‡ºï¼šAã€Bã€C</span>
}

<span class="hljs-comment">// ç®€åŒ–å†™æ³•ï¼ˆå•ä¸ªå‚æ•°å¯çœç•¥ -&gt;ï¼‰</span>
mutableList.forEach {
    println(it) <span class="hljs-comment">// è¾“å‡ºï¼šAã€Bã€C</span>
}

<span class="hljs-comment">// å¸¦ç´¢å¼•çš„ forEachIndexed</span>
mutableList.forEachIndexed { index, item -&gt;
    println(<span class="hljs-string">"ç´¢å¼• <span class="hljs-variable">$index</span>ï¼š<span class="hljs-variable">$item</span>"</span>) <span class="hljs-comment">// è¾“å‡ºï¼šç´¢å¼• 0ï¼šAã€ç´¢å¼• 1ï¼šBã€ç´¢å¼• 2ï¼šC</span>
}
</code></pre>
<h3 data-id="heading-3">4.Â <strong>éå†å¹¶ä¿®æ”¹å…ƒç´ </strong></h3>
<p>å¦‚æœéœ€è¦åœ¨éå†ä¸­ä¿®æ”¹å…ƒç´ ï¼Œå¯é€šè¿‡ç´¢å¼•éå†æˆ–Â <code>withIndex()</code>Â å®ç°ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)

<span class="hljs-comment">// é€šè¿‡ç´¢å¼•éå†ä¿®æ”¹</span>
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> mutableList.indices) {
    mutableList[i] *= <span class="hljs-number">2</span> <span class="hljs-comment">// å…ƒç´ ç¿»å€</span>
}

println(mutableList) <span class="hljs-comment">// è¾“å‡ºï¼š[2, 4, 6]</span>

<span class="hljs-comment">// æˆ–ç”¨ withIndex() ä¿®æ”¹</span>
<span class="hljs-keyword">val</span> list = mutableListOf(<span class="hljs-string">"X"</span>, <span class="hljs-string">"Y"</span>, <span class="hljs-string">"Z"</span>)
<span class="hljs-keyword">for</span> ((index, item) <span class="hljs-keyword">in</span> list.withIndex()) {
    list[index] = item.lowercase() <span class="hljs-comment">// è½¬ä¸ºå°å†™</span>
}

println(list) <span class="hljs-comment">// è¾“å‡ºï¼š[x, y, z]</span>
</code></pre>
<h3 data-id="heading-4">5.Â <strong>å…¶ä»–éå†æ–¹å¼</strong></h3>
<ul>
<li>
<p><strong><code>listIterator()</code></strong> ï¼šåŒå‘è¿­ä»£å™¨ï¼Œæ”¯æŒå‘å‰ / å‘åéå†ï¼Œé€‚åˆå¤æ‚åœºæ™¯ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
<span class="hljs-keyword">val</span> listIterator = mutableList.listIterator(mutableList.size) <span class="hljs-comment">// ä»æœ«å°¾å¼€å§‹</span>

<span class="hljs-keyword">while</span> (listIterator.hasPrevious()) {
    println(listIterator.previous()) <span class="hljs-comment">// è¾“å‡ºï¼šCã€Bã€A</span>
}
</code></pre>
</li>
<li>
<p><strong><code>for</code>Â å¾ªç¯ + ç´¢å¼•èŒƒå›´</strong>ï¼šæ‰‹åŠ¨æ§åˆ¶ç´¢å¼•èŒƒå›´ï¼Œçµæ´»ä½†éœ€æ³¨æ„è¾¹ç•Œã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">val</span> mutableList = mutableListOf(<span class="hljs-string">"A"</span>, <span class="hljs-string">"B"</span>, <span class="hljs-string">"C"</span>)
<span class="hljs-keyword">for</span> (i <span class="hljs-keyword">in</span> <span class="hljs-number">0</span> until mutableList.size) {
    println(mutableList[i]) <span class="hljs-comment">// è¾“å‡ºï¼šAã€Bã€C</span>
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-5">æ€»ç»“</h3>
<ul>
<li><strong>ç®€å•éå†</strong>ï¼šä¼˜å…ˆç”¨Â <code>for-in</code>Â æˆ–Â <code>forEach</code>ã€‚</li>
<li><strong>éœ€è¦ç´¢å¼•</strong>ï¼šç”¨Â <code>withIndex()</code>Â æˆ–Â <code>forEachIndexed</code>ã€‚</li>
<li><strong>éå†ä¸­åˆ é™¤</strong>ï¼šå¿…é¡»ç”¨Â <code>Iterator</code>ï¼ˆ<code>iterator()</code>Â æˆ–Â <code>listIterator()</code>ï¼‰ã€‚</li>
<li><strong>å‡½æ•°å¼é£æ ¼</strong>ï¼šç”¨Â <code>forEach</code>Â æˆ–Â <code>forEachIndexed</code>ã€‚</li>
</ul>
<p>æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©æœ€åˆé€‚çš„éå†æ–¹å¼å³å¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Cursor 2.1 å‘å¸ƒå®æµ‹ï¼šè®¡åˆ’èƒ½ç‚¹äº†ï¼Œå®¡æŸ¥èƒ½ç”¨äº†ï¼ŒCR èŠ±å¤šå°‘ï¼Ÿæˆ‘ä¹Ÿæ›¿ä½ è¯•äº†]]></title>    <link>https://juejin.cn/post/7575651989985591350</link>    <guid>https://juejin.cn/post/7575651989985591350</guid>    <pubDate>2025-11-24T02:02:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575651989985591350" data-draft-id="7575751471841476644" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Cursor 2.1 å‘å¸ƒå®æµ‹ï¼šè®¡åˆ’èƒ½ç‚¹äº†ï¼Œå®¡æŸ¥èƒ½ç”¨äº†ï¼ŒCR èŠ±å¤šå°‘ï¼Ÿæˆ‘ä¹Ÿæ›¿ä½ è¯•äº†"/> <meta itemprop="keywords" content="Cursor,AIç¼–ç¨‹,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-24T02:02:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£å“¥æ•°æ™ºè°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/3825956195409223"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Cursor 2.1 å‘å¸ƒå®æµ‹ï¼šè®¡åˆ’èƒ½ç‚¹äº†ï¼Œå®¡æŸ¥èƒ½ç”¨äº†ï¼ŒCR èŠ±å¤šå°‘ï¼Ÿæˆ‘ä¹Ÿæ›¿ä½ è¯•äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3825956195409223/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£å“¥æ•°æ™ºè°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T02:02:58.000Z" title="Mon Nov 24 2025 02:02:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>21å·ï¼Œ<code>Cursor</code> å‡çº§äº† <code>2.1</code> ç‰ˆæœ¬ï¼Œç»™å¤§å®¶ç®€å•åŒæ­¥ä¸‹å‡çº§å†…å®¹ã€‚</p>
<h2 data-id="heading-0">æ”¹è¿›çš„è®¡åˆ’æ¨¡å¼</h2>
<p>æµç¨‹å’Œå®šä½æ²¡æœ‰æ”¹å˜ï¼Œæœ€å¤§çš„æ”¹å˜æ˜¯äº¤äº’æ–¹å¼çš„ä¼˜åŒ–ã€‚</p>
<p>åŸæ¥çš„ <code>Plan</code> æ¨¡å¼æ˜¯ <code>Cursor</code> ç»™å‡ºé—®é¢˜å’Œå¸¦åºå·çš„ç­”æ¡ˆï¼Œä½ å¯ä»¥å“åº”é—®é¢˜é¢˜å·å’Œç­”æ¡ˆçš„åºå·ï¼Œæ¯”å¦‚ï¼š<code>1:A,2:B</code>ã€‚</p>
<p>è¿™æ¬¡å‡çº§åï¼Œå°±ä¸ç”¨æ‰‹åŠ¨å½•å…¥äº†ï¼Œç›´æ¥é€šè¿‡<strong>å›¾å½¢äº¤äº’</strong>ç‚¹å‡»é€‰é¡¹å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/df240a005234462b8b658c6cba326122~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=BZldWDZxOcHywR%2FRkI%2BnaO6s5iU%3D" alt="" loading="lazy"/></p>
<p>å¹¶ä¸”æ”¯æŒäº†å¤šè½®é—®ç­”ï¼Œè¿™æ ·ç”Ÿæˆçš„è®¡åˆ’ä¼šæ›´åŠ å‡†ç¡®å’Œç¬¦åˆé¢„æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b01bd6e574c461cb5a0d9392a2021b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=9hE4I9xfh6V4Ykqo3Q7YEbcxvRw%3D" alt="" loading="lazy"/></p>
<p>å…¨éƒ¨åˆ†æå®Œæˆåï¼Œå°±ä¼šç”Ÿæˆåˆ†ææ–‡æ¡£å’Œè®¡åˆ’ï¼Œç¡®è®¤æ— è¯¯åï¼Œå¯ä»¥ç‚¹å‡»â€œBuildâ€å¼€å§‹ç”Ÿæˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/514a5c2cc29440259f157fa9e76b0ea8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=ZwubKZQxyV1qIszXwgdNGsvs%2FNI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">AI ä»£ç å®¡æŸ¥</h2>
<p>è¿™ä¸ªåŠŸèƒ½ä¹‹å‰ç‰ˆæœ¬å·²ç»å¼€å§‹é€æ­¥ä¸Šçº¿ï¼Œè¿™æ¬¡ç®—æ˜¯æ­£å¼æ¨å‡ºå§ã€‚</p>
<p>æˆ‘ç°åœ¨ä½¿ç”¨ AI ååŒç ”å‘çš„æ—¶å€™ï¼ŒAI ç”Ÿæˆçš„ä»£ç æ˜¯é€šè¿‡â€œ<strong>äººå·¥</strong>â€+â€œ<strong>AI Commit Message</strong>â€è¿›è¡Œå®¡æŸ¥çš„ã€‚</p>
<p>ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨ <code>AI Code Reviews</code> è¿›è¡Œäº†ã€‚</p>
<h3 data-id="heading-2">å…¥å£</h3>
<p><code>Agent Review</code> æœ‰ä¸¤ä¸ªå…¥å£ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯åœ¨ç”Ÿæˆç»“æœæœ€åçš„ <code>agent diff</code> å¤„ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1822c3f938ba4d369bb812d0ed57280d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=bi7tefD5yTQ8VY2aHNSC31ivmNg%3D" alt="" loading="lazy"/></p>
<ul>
<li>å¦ä¸€ä¸ªæ˜¯ <code>Source Control</code> é€‰é¡¹å¡çš„ <code>Agent Review</code>ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ed13a5dc36384ec690a2aca6bc6e9cd0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=rIp%2ByfHkoQp1TyQTSuAYUpShOzo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">Review çš„æ•ˆæœ</h3>
<p><code>Review</code> åçš„æ•ˆæœå¦‚ä¸‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2389eef2c60a4487b6d139cfe987b9f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=lKco8PGtWJ2GiPUSiJwhLJHAPPk%3D" alt="" loading="lazy"/></p>
<p>å¯ä»¥ç›´æ¥çœ‹åˆ° AI å¸®ä½ æ‰¾åˆ°çš„ <code>Issue</code>ï¼Œæ”¯æŒå•ä¸ªä¿®å¤ï¼Œä¹Ÿæ”¯æŒä¸€é”®å…¨éƒ¨ä¿®å¤ã€‚</p>
<h3 data-id="heading-4">è®¡è´¹æ–¹å¼</h3>
<p>æŒ‰ç…§ <code>Review</code> ä¸­çš„<strong>å®é™…ä½¿ç”¨é‡è®¡è´¹</strong>çš„ã€‚</p>
<p>æˆ‘å¸®å¤§å®¶æµ‹è¯•äº†ä¸€ä¸‹ï¼Œ18 ä¸ªå‰ç«¯æ–‡ä»¶ <code>Review</code> äº†ä¸€æ¬¡ï¼Œ<code>86.6</code>ä¸‡ Tokenï¼Œ<code>0.23</code>ç¾å…ƒï¼Œä¸ä¾¿å®œå‘€ï¼Œå¤§å®¶æŒ‰éœ€ä½¿ç”¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c1c6256dfbe543a89c94b67f31c09278~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aOe5ZOl5pWw5pm66LCI:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764554578&amp;x-signature=htlnsY5Mb%2FBrMLJiVvhrZkfnyzk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å³æ—¶grep</h2>
<p>æˆ‘ç†è§£çš„æ˜¯ç¼–è¾‘å™¨å†…æ‰‹åŠ¨æœç´¢ï¼Œæˆ–è€…æ¨¡å‹åœ¨è°ƒç”¨ <code>grep</code> å‘½ä»¤æ—¶ï¼Œä¼šè§¦å‘â€œå³æ—¶grepâ€çš„ç‰¹æ€§ã€‚</p>
<p>è¯¥ç‰¹æ€§å¯ä»¥æä¾›ä¸€ä¸ª<strong>è¶…å¿«çš„æœç´¢åŠŸèƒ½</strong>ï¼Œè®©ä½ å¿«é€Ÿå®šä½è¦æ‰¾çš„æ–‡ä»¶ï¼Œä¸éœ€ç­‰å¾…æ‰«ææ•´ä¸ªä»£ç åº“ã€‚</p>
<p>æˆ‘é—®äº† <code>Composer 1</code>ï¼Œåº•å±‚åº”è¯¥æ˜¯é›†æˆäº† <code>ripgrep</code>ã€‚</p>
<h2 data-id="heading-6">ç§»é™¤è‡ªå®šä¹‰æ™ºèƒ½ä½“</h2>
<p>è‡ªå®šä¹‰ Agent æ¨¡å¼è¢«ç§»é™¤ï¼Œå¦‚æœæƒ³ç”¨çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨<strong>è‡ªå®šä¹‰å‘½ä»¤</strong>ã€‚</p>
<p>å‰å‡ å¤©åˆšå®ç°çš„è‡ªå®šä¹‰æ™ºèƒ½ä½“è¿˜å¾—æ”¹ä¸‹ã€‚</p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>è¿™æ¬¡å‡çº§æ²¡æœ‰ç‰¹åˆ«å¤§çš„è°ƒæ•´ï¼Œä½†åŠŸèƒ½å€’æ˜¯æŒºå®ç”¨çš„ï¼Œå¤§å®¶å¯ä»¥é…Œæƒ…è¯•ç”¨ã€‚</p>
<p>æœ‰ä»€ä¹ˆç–‘é—®æ¬¢è¿ç•™è¨€äº¤æµ~</p>
<p>æ˜å¤©å‘¨ä¸€ï¼ŒåŠ æ²¹ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Androidæ¨¡æ‹Ÿå™¨æ£€æµ‹å…¨é¢æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7575162322240880640</link>    <guid>https://juejin.cn/post/7575162322240880640</guid>    <pubDate>2025-11-23T17:01:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575162322240880640" data-draft-id="7575413146921861135" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Androidæ¨¡æ‹Ÿå™¨æ£€æµ‹å…¨é¢æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§ç­–ç•¥"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2025-11-23T17:01:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é™†ä¸šèª"/> <meta itemprop="url" content="https://juejin.cn/user/13629904404157"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Androidæ¨¡æ‹Ÿå™¨æ£€æµ‹å…¨é¢æŒ‡å—ï¼šä»åŸºç¡€åˆ°é«˜çº§ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/13629904404157/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é™†ä¸šèª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T17:01:32.000Z" title="Sun Nov 23 2025 17:01:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ ¸å¿ƒæ£€æµ‹ç»´åº¦ä¸æ–¹æ³•</h2>
<p>æ£€æµ‹Androidæ¨¡æ‹Ÿå™¨çš„æ ¸å¿ƒæ€è·¯æ˜¯è¯†åˆ«å…¶ä¸çœŸå®è®¾å¤‡åœ¨<strong>ç¡¬ä»¶ã€ç³»ç»Ÿå±æ€§å’Œè¡Œä¸ºç‰¹å¾</strong>ä¸Šçš„å·®å¼‚ã€‚ä»¥ä¸‹æ˜¯ç»è¿‡å®è·µéªŒè¯çš„æœ‰æ•ˆæ–¹æ³•ã€‚</p>
<h3 data-id="heading-1">1.1 æ£€æŸ¥ç³»ç»Ÿæ„å»ºå±æ€§</h3>
<p>æ¨¡æ‹Ÿå™¨çš„<code>android.os.Build</code>ç±»ä¸­çš„å±æ€§å€¼é€šå¸¸åŒ…å«ç‰¹å®šæ ‡è¯†ç¬¦ï¼Œè¿™æ˜¯æœ€åŸºç¡€çš„æ£€æµ‹æ–¹å¼ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isProbablyEmulator</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">model</span> <span class="hljs-operator">=</span> Build.MODEL.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">manufacturer</span> <span class="hljs-operator">=</span> Build.MANUFACTURER.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> Build.PRODUCT.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">fingerprint</span> <span class="hljs-operator">=</span> Build.FINGERPRINT.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">brand</span> <span class="hljs-operator">=</span> Build.BRAND.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">hardware</span> <span class="hljs-operator">=</span> Build.HARDWARE.toLowerCase();
    <span class="hljs-type">String</span> <span class="hljs-variable">device</span> <span class="hljs-operator">=</span> Build.DEVICE.toLowerCase();

    <span class="hljs-keyword">return</span> (model.contains(<span class="hljs-string">"google_sdk"</span>) ||
            model.contains(<span class="hljs-string">"droid4x"</span>) ||
            model.contains(<span class="hljs-string">"emulator"</span>) ||
            model.contains(<span class="hljs-string">"android sdk built for x86"</span>) ||
            manufacturer.contains(<span class="hljs-string">"genymotion"</span>) ||
            product.contains(<span class="hljs-string">"sdk_google"</span>) ||
            product.contains(<span class="hljs-string">"google_sdk"</span>) ||
            product.contains(<span class="hljs-string">"sdk"</span>) ||
            product.contains(<span class="hljs-string">"sdk_x86"</span>) ||
            product.contains(<span class="hljs-string">"vbox86p"</span>) ||
            product.contains(<span class="hljs-string">"emulator"</span>) ||
            fingerprint.contains(<span class="hljs-string">"generic"</span>) ||
            fingerprint.contains(<span class="hljs-string">"generic/sdk/generic"</span>) ||
            fingerprint.contains(<span class="hljs-string">"sdk_gphone"</span>) ||
            fingerprint.contains(<span class="hljs-string">"google/sdk_gphone"</span>) ||
            fingerprint.contains(<span class="hljs-string">"test-keys"</span>) ||
            brand.contains(<span class="hljs-string">"generic"</span>) ||
            hardware.contains(<span class="hljs-string">"goldfish"</span>) || <span class="hljs-comment">// ä¼ ç»Ÿæ¨¡æ‹Ÿå™¨ç¡¬ä»¶</span>
            hardware.contains(<span class="hljs-string">"ranchu"</span>) ||   <span class="hljs-comment">// è¾ƒæ–°æ¨¡æ‹Ÿå™¨ç¡¬ä»¶</span>
            device.contains(<span class="hljs-string">"generic"</span>));
}
</code></pre>
<p><strong>å…³é”®ç³»ç»Ÿå±æ€§æ£€æŸ¥ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>ro.hardware</strong>ï¼šæ¨¡æ‹Ÿå™¨é€šå¸¸è¿”å›"goldfish"æˆ–"ranchu"</li>
<li><strong>ro.kernel.qemu</strong>ï¼šæ¨¡æ‹Ÿå™¨ä¸­å¸¸è¿”å›"1"ï¼ŒçœŸæœºé€šå¸¸ä¸ºç©º</li>
<li><strong>ro.product.model</strong>ï¼šAndroidæ¨¡æ‹Ÿå™¨é€šå¸¸ä¸º"sdk"æˆ–"google_sdk"</li>
</ul>
<h3 data-id="heading-2">1.2 æ£€æŸ¥ç‰¹å®šç³»ç»Ÿæ–‡ä»¶ä¸å±æ€§</h3>
<p>æ¨¡æ‹Ÿå™¨ç¯å¢ƒä¸­å­˜åœ¨çœŸæœºæ²¡æœ‰çš„ç‰¹æ®Šæ–‡ä»¶å’Œç³»ç»Ÿå±æ€§ã€‚</p>
<p><strong>é€šè¿‡åå°„è¯»å–ç³»ç»Ÿå±æ€§</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getSystemProperty</span><span class="hljs-params">(String key)</span> {
    <span class="hljs-keyword">try</span> {
        Class&lt;?&gt; systemPropertyClass = Class.forName(<span class="hljs-string">"android.os.SystemProperties"</span>);
        <span class="hljs-keyword">return</span> (String) systemPropertyClass.getMethod(<span class="hljs-string">"get"</span>, String.class).invoke(<span class="hljs-literal">null</span>, key);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        e.printStackTrace();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmulatorByProperties</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">hardware</span> <span class="hljs-operator">=</span> getSystemProperty(<span class="hljs-string">"ro.hardware"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">kernelQemu</span> <span class="hljs-operator">=</span> getSystemProperty(<span class="hljs-string">"ro.kernel.qemu"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">hardwarePlatform</span> <span class="hljs-operator">=</span> getSystemProperty(<span class="hljs-string">"ro.boot.hardware.platform"</span>);

    <span class="hljs-keyword">return</span> <span class="hljs-string">"goldfish"</span>.equals(hardware) ||
           <span class="hljs-string">"ranchu"</span>.equals(hardware) ||
           <span class="hljs-string">"1"</span>.equals(kernelQemu) ||
           (hardwarePlatform != <span class="hljs-literal">null</span> &amp;&amp; hardwarePlatform.contains(<span class="hljs-string">"sdk"</span>));
}
</code></pre>
<p><strong>æ¨¡æ‹Ÿå™¨ç‰¹æœ‰æ–‡ä»¶æ£€æµ‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String[] known_files = {
    <span class="hljs-string">"/system/lib/libc_malloc_debug_qemu.so"</span>,
    <span class="hljs-string">"/sys/qemu_trace"</span>, 
    <span class="hljs-string">"/system/bin/qemu-props"</span>,
    <span class="hljs-string">"/dev/socket/qemud"</span>,
    <span class="hljs-string">"/dev/qemu_pipe"</span>
};

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasQEmuFiles</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">for</span>(String filePath : known_files) {
        <span class="hljs-type">File</span> <span class="hljs-variable">targetFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);
        <span class="hljs-keyword">if</span> (targetFile.exists()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h3 data-id="heading-3">1.3 æ£€æŸ¥ç¡¬ä»¶ä¸ä¼ æ„Ÿå™¨ä¿¡æ¯</h3>
<p>æ¨¡æ‹Ÿå™¨é€šå¸¸æ— æ³•å®Œç¾æ¨¡æ‹Ÿæ‰€æœ‰ç¡¬ä»¶ç‰¹æ€§ï¼Œè¿™ä¸ºæ£€æµ‹æä¾›äº†å¤šä¸ªåˆ‡å…¥ç‚¹ã€‚</p>
<p><strong>ä¼ æ„Ÿå™¨æ£€æµ‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ£€æŸ¥å…‰ä¼ æ„Ÿå™¨æ˜¯å¦å­˜åœ¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Boolean <span class="hljs-title function_">notHasLightSensorManager</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">SensorManager</span> <span class="hljs-variable">sensorManager</span> <span class="hljs-operator">=</span> (SensorManager) context.getSystemService(SENSOR_SERVICE);
    <span class="hljs-type">Sensor</span> <span class="hljs-variable">lightSensor</span> <span class="hljs-operator">=</span> sensorManager.getDefaultSensor(Sensor.TYPE_LIGHT);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span> == lightSensor;
}
</code></pre>
<p><strong>åŸºå¸¦ä¸ç”µè¯çŠ¶æ€æ£€æŸ¥</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkByTelephony</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">TelephonyManager</span> <span class="hljs-variable">tm</span> <span class="hljs-operator">=</span> (TelephonyManager) context.getSystemService(Context.TELEPHONY_SERVICE);
    <span class="hljs-type">String</span> <span class="hljs-variable">imei</span> <span class="hljs-operator">=</span> tm.getDeviceId();
    <span class="hljs-type">String</span> <span class="hljs-variable">networkOperator</span> <span class="hljs-operator">=</span> tm.getNetworkOperatorName();
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿå™¨IMEIé€šå¸¸ä¸º000000000000000ï¼Œç½‘ç»œè¿è¥å•†ä¸º"Android"</span>
    <span class="hljs-keyword">return</span> (imei != <span class="hljs-literal">null</span> &amp;&amp; imei.equals(<span class="hljs-string">"000000000000000"</span>)) || 
           <span class="hljs-string">"android"</span>.equalsIgnoreCase(networkOperator);
}
</code></pre>
<p><strong>è“ç‰™æ£€æµ‹</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">notHasBlueTooth</span><span class="hljs-params">()</span> {
    <span class="hljs-type">BluetoothAdapter</span> <span class="hljs-variable">ba</span> <span class="hljs-operator">=</span> BluetoothAdapter.getDefaultAdapter();
    <span class="hljs-keyword">if</span> (ba == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// å¦‚æœæœ‰è“ç‰™ä½†åç§°ä¸ºç©ºï¼Œå¯èƒ½æ˜¯æ¨¡æ‹Ÿå™¨</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> ba.getName();
        <span class="hljs-keyword">return</span> TextUtils.isEmpty(name);
    }
}
</code></pre>
<h3 data-id="heading-4">1.4 æ£€æŸ¥CPUæ¶æ„ä¸ä¿¡æ¯</h3>
<p>æ¨¡æ‹Ÿå™¨é€šå¸¸è¿è¡Œåœ¨x86/x86_64æ¶æ„çš„PCä¸Šï¼Œè€ŒçœŸæœºå¤šä¸ºARMæ¶æ„ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">readCpuInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
    <span class="hljs-keyword">try</span> {
        String[] args = {<span class="hljs-string">"/system/bin/cat"</span>, <span class="hljs-string">"/proc/cpuinfo"</span>};
        <span class="hljs-type">ProcessBuilder</span> <span class="hljs-variable">cmd</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProcessBuilder</span>(args);
        <span class="hljs-type">Process</span> <span class="hljs-variable">process</span> <span class="hljs-operator">=</span> cmd.start();
        <span class="hljs-type">StringBuffer</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuffer</span>();
        <span class="hljs-type">String</span> <span class="hljs-variable">readLine</span> <span class="hljs-operator">=</span> <span class="hljs-string">""</span>;
        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">responseReader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(process.getInputStream(), <span class="hljs-string">"utf-8"</span>));
        <span class="hljs-keyword">while</span> ((readLine = responseReader.readLine()) != <span class="hljs-literal">null</span>) {
            sb.append(readLine);
        }
        responseReader.close();
        result = sb.toString().toLowerCase();
    } <span class="hljs-keyword">catch</span> (IOException ex) {
        <span class="hljs-comment">// å¤„ç†å¼‚å¸¸</span>
    }
    <span class="hljs-keyword">return</span> result;
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkByCpuInfo</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">cpuInfo</span> <span class="hljs-operator">=</span> readCpuInfo();
    <span class="hljs-keyword">return</span> (cpuInfo.contains(<span class="hljs-string">"intel"</span>) || cpuInfo.contains(<span class="hljs-string">"amd"</span>));
}
</code></pre>
<h3 data-id="heading-5">1.5 ç”µæ± çŠ¶æ€æ£€æµ‹</h3>
<p>æ¨¡æ‹Ÿå™¨çš„ç”µæ± ä¿¡æ¯é€šå¸¸ä¿æŒä¸å˜ï¼Œè€ŒçœŸæœºçš„ç”µæ± çŠ¶æ€ä¼šåŠ¨æ€å˜åŒ–ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkBatteryStats</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-type">IntentFilter</span> <span class="hljs-variable">filter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntentFilter</span>(Intent.ACTION_BATTERY_CHANGED);
    <span class="hljs-type">Intent</span> <span class="hljs-variable">batteryStatus</span> <span class="hljs-operator">=</span> context.registerReceiver(<span class="hljs-literal">null</span>, filter);
    
    <span class="hljs-keyword">if</span> (batteryStatus == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    
    <span class="hljs-type">int</span> <span class="hljs-variable">level</span> <span class="hljs-operator">=</span> batteryStatus.getIntExtra(BatteryManager.EXTRA_LEVEL, -<span class="hljs-number">1</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">scale</span> <span class="hljs-operator">=</span> batteryStatus.getIntExtra(BatteryManager.EXTRA_SCALE, -<span class="hljs-number">1</span>);
    <span class="hljs-type">int</span> <span class="hljs-variable">temperature</span> <span class="hljs-operator">=</span> batteryStatus.getIntExtra(BatteryManager.EXTRA_TEMPERATURE, -<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ¨¡æ‹Ÿå™¨ç”µæ± ç”µé‡é€šå¸¸å›ºå®šï¼Œæ¸©åº¦å¸¸ä¸º0</span>
    <span class="hljs-keyword">return</span> (temperature == <span class="hljs-number">0</span> || (level &gt;= <span class="hljs-number">0</span> &amp;&amp; scale &gt; <span class="hljs-number">0</span> &amp;&amp; level == scale));
}
</code></pre>
<h2 data-id="heading-6">äºŒã€é«˜çº§æ£€æµ‹æŠ€æœ¯</h2>
<h3 data-id="heading-7">2.1 åŸºäºCacheè¡Œä¸ºçš„æ£€æµ‹</h3>
<p>åˆ©ç”¨ARMä¸x86æ¶æ„çš„ç¼“å­˜å·®å¼‚è¿›è¡Œæ£€æµ‹ï¼š</p>
<ul>
<li><strong>ARMæ¶æ„</strong>ï¼šä½¿ç”¨å“ˆä½›æ¶æ„ï¼ŒæŒ‡ä»¤ç¼“å­˜(I-Cache)å’Œæ•°æ®ç¼“å­˜(D-Cache)åˆ†ç¦»</li>
<li><strong>x86æ¶æ„</strong>ï¼šä½¿ç”¨å†¯Â·è¯ºä¾æ›¼ç»“æ„ï¼ŒæŒ‡ä»¤å’Œæ•°æ®å…±äº«ç¼“å­˜</li>
</ul>
<p>è¿™ç§æ–¹æ³•èƒ½å‡†ç¡®è¯†åˆ«åº•å±‚æ¶æ„ï¼Œä½†éœ€è¦ç¼–å†™æ±‡ç¼–ä»£ç ï¼Œå…¼å®¹æ€§éœ€è¦è€ƒè™‘ã€‚</p>
<h3 data-id="heading-8">2.2 åŸºå¸¦ä¿¡æ¯æ£€æµ‹</h3>
<p>åŸºå¸¦æ˜¯æ‰‹æœºçš„åŸºæœ¬é€šä¿¡æ¨¡å—ï¼Œæ¨¡æ‹Ÿå™¨é€šå¸¸æ²¡æœ‰çœŸå®çš„åŸºå¸¦ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkBaseband</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">try</span> {
        Class&lt;?&gt; systemPropertyClass = Class.forName(<span class="hljs-string">"android.os.SystemProperties"</span>);
        <span class="hljs-type">Method</span> <span class="hljs-variable">getMethod</span> <span class="hljs-operator">=</span> systemPropertyClass.getMethod(<span class="hljs-string">"get"</span>, String.class);
        <span class="hljs-type">String</span> <span class="hljs-variable">baseband</span> <span class="hljs-operator">=</span> (String) getMethod.invoke(<span class="hljs-literal">null</span>, <span class="hljs-string">"gsm.version.baseband"</span>);
        <span class="hljs-keyword">return</span> (baseband == <span class="hljs-literal">null</span> || baseband.isEmpty());
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h3 data-id="heading-9">2.3 å¤„ç†å™¨ä¿¡æ¯ä¸€è‡´æ€§æ£€æŸ¥</h3>
<p>æ£€æµ‹<code>ro.product.board</code>å’Œ<code>ro.board.platform</code>æ˜¯å¦ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">checkProcessorConsistency</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">suspectCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
    
    <span class="hljs-type">String</span> <span class="hljs-variable">productBoard</span> <span class="hljs-operator">=</span> getSystemProperty(<span class="hljs-string">"ro.product.board"</span>);
    <span class="hljs-type">String</span> <span class="hljs-variable">boardPlatform</span> <span class="hljs-operator">=</span> getSystemProperty(<span class="hljs-string">"ro.board.platform"</span>);
    
    <span class="hljs-keyword">if</span> (productBoard == <span class="hljs-literal">null</span> || <span class="hljs-string">""</span>.equals(productBoard)) suspectCount++;
    <span class="hljs-keyword">if</span> (boardPlatform == <span class="hljs-literal">null</span> || <span class="hljs-string">""</span>.equals(boardPlatform)) suspectCount++;
    <span class="hljs-keyword">if</span> (productBoard != <span class="hljs-literal">null</span> &amp;&amp; boardPlatform != <span class="hljs-literal">null</span> &amp;&amp; 
        !productBoard.equals(boardPlatform)) suspectCount++;
    
    <span class="hljs-keyword">return</span> suspectCount;
}
</code></pre>
<h2 data-id="heading-10">ä¸‰ã€é›†æˆæ£€æµ‹ç­–ç•¥ä¸å»ºè®®</h2>
<h3 data-id="heading-11">3.1 ç»¼åˆè¯„åˆ†ç­–ç•¥</h3>
<p>ä¸è¦ä¾èµ–å•ä¸€æ£€æµ‹æ–¹æ³•ï¼Œåº”é‡‡ç”¨<strong>å¤šç»´åº¦ç»¼åˆè¯„åˆ†</strong>ç³»ç»Ÿï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmulatorDetector</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">THRESHOLD</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// é˜ˆå€¼å¯æ ¹æ®éœ€æ±‚è°ƒæ•´</span>
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isRunningOnEmulator</span><span class="hljs-params">(Context context)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">suspectScore</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// ç³»ç»Ÿå±æ€§æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (checkBuildProperties()) suspectScore += <span class="hljs-number">2</span>;
        
        <span class="hljs-comment">// æ–‡ä»¶æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (hasQEmuFiles()) suspectScore += <span class="hljs-number">2</span>;
        
        <span class="hljs-comment">// ç¡¬ä»¶æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (checkByTelephony(context)) suspectScore += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (notHasLightSensorManager(context)) suspectScore += <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> (checkByCpuInfo()) suspectScore += <span class="hljs-number">2</span>;
        
        <span class="hljs-comment">// ç”µæ± çŠ¶æ€æ£€æŸ¥</span>
        <span class="hljs-keyword">if</span> (checkBatteryStats(context)) suspectScore += <span class="hljs-number">1</span>;
        
        <span class="hljs-keyword">return</span> suspectScore &gt;= THRESHOLD;
    }
}
</code></pre>
<h3 data-id="heading-12">3.2 ç‰¹å®šæ¨¡æ‹Ÿå™¨æ£€æµ‹</h3>
<p>é’ˆå¯¹å¸¸è§æ¨¡æ‹Ÿå™¨ï¼ˆå¦‚BlueStacksï¼‰çš„ä¸“é¡¹æ£€æµ‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String[] known_bluestacks = {
    <span class="hljs-string">"/data/app/com.bluestacks.appmart-1.apk"</span>,
    <span class="hljs-string">"/data/app/com.bluestacks.BstCommandProcessor-1.apk"</span>, 
    <span class="hljs-string">"/data/app/com.bluestacks.help-1.apk"</span>,
    <span class="hljs-string">"/data/bluestacks.prop"</span>
};

<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">checkBlueStacksFiles</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">for</span> (String filePath : known_bluestacks) {
        <span class="hljs-type">File</span> <span class="hljs-variable">targetFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(filePath);
        <span class="hljs-keyword">if</span> (targetFile.exists()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h2 data-id="heading-13">å››ã€é‡è¦æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-14">4.1 æƒé™ä¸éšç§åˆè§„</h3>
<p>éƒ¨åˆ†æ£€æµ‹æ–¹æ³•éœ€è¦ç”³è¯·æƒé™ï¼š</p>
<ul>
<li><code>READ_PHONE_STATE</code>ï¼šç”¨äºè¯»å–IMEIã€IMSIç­‰è®¾å¤‡æ ‡è¯†</li>
<li><code>ACCESS_WIFI_STATE</code>ï¼šç”¨äºè·å–MACåœ°å€ä¿¡æ¯</li>
<li><code>BLUETOOTH</code>ï¼šç”¨äºè“ç‰™æ£€æµ‹</li>
</ul>
<p>ç¡®ä¿éµå¾ªGoogle Playçš„éšç§æ”¿ç­–åŠç›¸å…³æ³•å¾‹æ³•è§„ï¼ˆå¦‚GDPRï¼‰ã€‚</p>
<h3 data-id="heading-15">4.2 æ€§èƒ½ä¸å…¼å®¹æ€§è€ƒè™‘</h3>
<ul>
<li><strong>é¿å…è¿‡åº¦æ£€æµ‹</strong>ï¼šæ£€æµ‹é€»è¾‘åº”é«˜æ•ˆï¼Œä¸å½±å“åº”ç”¨æ€§èƒ½</li>
<li><strong>çœŸæœºå…¼å®¹æ€§</strong>ï¼šåœ¨æ‰€æœ‰ç›®æ ‡çœŸæœºä¸Šå……åˆ†æµ‹è¯•ï¼Œé¿å…è¯¯åˆ¤</li>
<li><strong>åŠæ—¶æ›´æ–°</strong>ï¼šæ¨¡æ‹Ÿå™¨æŠ€æœ¯ä¸æ–­è¿›åŒ–ï¼Œæ£€æµ‹æ–¹æ³•éœ€å®šæœŸæ›´æ–°</li>
</ul>
<h3 data-id="heading-16">4.3 æœåŠ¡ç«¯éªŒè¯</h3>
<p>å¯¹äºé«˜å®‰å…¨æ€§è¦æ±‚çš„åº”ç”¨ï¼Œå»ºè®®å°†å…³é”®æ£€æµ‹é€»è¾‘æ”¾åœ¨æœåŠ¡ç«¯ï¼š</p>
<ul>
<li>é˜²æ­¢å®¢æˆ·ç«¯ä»£ç è¢«ç¯¡æ”¹</li>
<li>åŠ¨æ€æ›´æ–°æ£€æµ‹è§„åˆ™</li>
<li>ç»“åˆè®¾å¤‡æŒ‡çº¹æŠ€æœ¯</li>
</ul>
<h2 data-id="heading-17">äº”ã€æ€»ç»“</h2>
<p>Androidæ¨¡æ‹Ÿå™¨æ£€æµ‹æ˜¯ä¸€åœºæŒç»­çš„"æ”»é˜²æˆ˜"ã€‚æœ‰æ•ˆæ£€æµ‹éœ€è¦<strong>å¤šç»´åº¦ã€å¤šæ–¹æ³•ç»“åˆ</strong>ï¼Œæ²¡æœ‰å•ä¸€æ–¹æ³•èƒ½100%å‡†ç¡®è¯†åˆ«æ‰€æœ‰æ¨¡æ‹Ÿå™¨ã€‚å»ºè®®æ ¹æ®å…·ä½“åº”ç”¨åœºæ™¯å’Œå®‰å…¨è¦æ±‚ï¼Œé€‰æ‹©åˆé€‚çš„æ£€æµ‹æ–¹æ³•ç»„åˆï¼Œå¹¶å»ºç«‹ç»¼åˆè¯„åˆ†æœºåˆ¶ã€‚</p>
<p><strong>æ ¸å¿ƒå»ºè®®</strong>ï¼š</p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨ç³»ç»Ÿå±æ€§æ£€æŸ¥ç­‰è½»é‡çº§æ–¹æ³•</li>
<li>ç»“åˆæ–‡ä»¶æ£€æŸ¥ã€ç¡¬ä»¶ä¿¡æ¯éªŒè¯ç­‰å¤šç»´åº¦æ£€æµ‹</li>
<li>å¯¹é«˜å®‰å…¨æ€§åœºæ™¯ï¼Œè€ƒè™‘ä½¿ç”¨ä¸“ä¸šè®¾å¤‡æŒ‡çº¹SDK</li>
<li>å®šæœŸæ›´æ–°æ£€æµ‹ç­–ç•¥ä»¥åº”å¯¹æ–°å‹æ¨¡æ‹Ÿå™¨</li>
</ol>
<p>é€šè¿‡ç³»ç»ŸåŒ–çš„æ£€æµ‹æ–¹æ¡ˆï¼Œå¯ä»¥æœ‰æ•ˆè¯†åˆ«å¤§å¤šæ•°æ¨¡æ‹Ÿå™¨ç¯å¢ƒï¼Œæå‡åº”ç”¨å®‰å…¨æ€§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘æŠŠè®¾è®¡ç¨¿æ‰”ç»™ Doubao-Seed-Codeï¼Œå®ƒå†™å‡ºçš„å‰ç«¯é¡µé¢è®©æˆ‘æ€€ç–‘äººç”Ÿ]]></title>    <link>https://juejin.cn/post/7575910298283098147</link>    <guid>https://juejin.cn/post/7575910298283098147</guid>    <pubDate>2025-11-24T08:39:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575910298283098147" data-draft-id="7575910298283048995" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘æŠŠè®¾è®¡ç¨¿æ‰”ç»™ Doubao-Seed-Codeï¼Œå®ƒå†™å‡ºçš„å‰ç«¯é¡µé¢è®©æˆ‘æ€€ç–‘äººç”Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-24T08:39:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘å®‰ä¸œå°¼"/> <meta itemprop="url" content="https://juejin.cn/user/1521379823340792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘æŠŠè®¾è®¡ç¨¿æ‰”ç»™ Doubao-Seed-Codeï¼Œå®ƒå†™å‡ºçš„å‰ç«¯é¡µé¢è®©æˆ‘æ€€ç–‘äººç”Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379823340792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘å®‰ä¸œå°¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T08:39:41.000Z" title="Mon Nov 24 2025 08:39:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    73
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7461159993f14a6ba46eee1168757bdb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=BnmZW5AIFBygCFUALRR50wzekwo%3D" alt="" loading="lazy"/></p>
<p>è¿‡å»å‡ å¹´ï¼Œå‰ç«¯å¼€å‘çš„èŠ‚å¥ä¸€ç›´åœ¨æ‚„æ‚„å‘ç”Ÿå˜åŒ–ï¼šä»ã€Œç»„ä»¶å¼€å‘ â†’ ä½ä»£ç  â†’ è®¾è®¡ç¨¿è½¬ä»£ç å·¥å…·ã€ä¸€è·¯å¾€å‰æ¨è¿›ï¼Œä½†å§‹ç»ˆæœ‰ä¸€é“è¿‡ä¸å»çš„åâ€”â€”æ¨¡å‹çœ‹ä¸æ‡‚è®¾è®¡ç¨¿ï¼Œåªèƒ½çœ‹æ‡‚è¯­è¨€ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¾ç„¶è¦é å¼€å‘è€…æ‰‹å·¥ç†è§£ UIã€æ‹†ç»„ä»¶ã€å¯¹é½ç»“æ„ï¼Œç„¶åå†å†™ä»£ç ã€‚</p>
<p>ç›´åˆ°æˆ‘ç¬¬ä¸€æ¬¡æŠŠä¸€å¼  UI è®¾è®¡ç¨¿ä¸¢ç»™ <strong>Doubao-Seed-Code</strong>ã€‚é‚£ç§æ„Ÿè§‰åƒæ˜¯æœ‰äººçªç„¶æŠŠä½ ä»å¯†é—­çš„å·¥åœ°é‡Œæ‹‰å‡ºæ¥è¯´ï¼š</p>
<blockquote>
<p><strong>â€œåˆ«åŸ‹å¤´å†™äº†ï¼Œæˆ‘èƒ½çœ‹å›¾ï¼Œå‰©ä¸‹æˆ‘æ¥ã€‚â€</strong></p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0c87195f63642c580e8d2a1d3b6e67b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=JBNbbeeBlrL6yrm2IWp8cUttKbk%3D" alt="" loading="lazy"/></p>
<p>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘æƒ³ä¸ä½ åˆ†äº«çš„ä¸æ˜¯â€œæ¨¡å‹ä¼šå†™ä»£ç â€è¿™ç§æ³›æ³›è€Œè°ˆï¼Œè€Œæ˜¯ä¸€æ¬¡<strong>å®Œå…¨çœŸå®çš„å‰ç«¯å¼€å‘ä½“éªŒ</strong>ï¼š</p>
<p>ğŸ‘‰ æˆ‘æŠŠå®é™…é¡¹ç›®é‡Œçš„ UI å›¾ä¸¢ç»™ Doubao-Seed-Codeï¼Œè®©å®ƒå¸®æˆ‘ç”Ÿæˆé¡µé¢ã€åˆ†æç»“æ„ã€è¡¥é½äº¤äº’ã€ä¿® UI bugã€‚ä½ ä¼šçœ‹åˆ°å®ƒä½œä¸ºâ€œè§†è§‰ç†è§£ç¼–ç æ¨¡å‹â€çš„è¡¨ç°ï¼Œä¸ä¼ ç»Ÿ LLM æœ‰ç€æ ¹æœ¬æ€§çš„å·®å¼‚ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆå‰ç«¯æœ€éœ€è¦è§†è§‰ç†è§£ï¼Ÿ</h2>
<p>å‰ç«¯çš„ç—›ç‚¹ä¸€ç›´å¾ˆé›†ä¸­ï¼š</p>
<ol>
<li>è®¾è®¡ç¨¿ä¸ä»£ç ç»“æ„çš„æ˜ å°„æ˜¯â€œéè¯­è¨€ä»»åŠ¡â€ï¼›</li>
<li>æ ·å¼ bug å¾€å¾€æ˜¯â€œçœ¼ç›èƒ½çœ‹æ‡‚ï¼Œä½†è¯­è¨€éš¾æè¿°â€ï¼›</li>
<li>é¡µé¢å¤åˆ»è¿‡ç¨‹ä¸­ï¼Œâ€œå“ªä¸ªå…ƒç´ åœ¨å“ªã€æ˜¯ flex è¿˜æ˜¯ gridâ€é çš„æ˜¯è§†è§‰åˆ¤æ–­ã€‚</li>
</ol>
<p>ä¼ ç»Ÿä»£ç æ¨¡å‹å†å¼ºï¼Œä¹Ÿæ— æ³•è·¨è¿‡ç¬¬ä¸€æ­¥ï¼š</p>
<blockquote>
<p>å®ƒä»¬å¯ä»¥ç†è§£â€œæ–‡å­—çš„é€»è¾‘â€ï¼Œä½†æ— æ³•ç†è§£â€œå±å¹•ä¸Šå…ƒç´ çš„ç©ºé—´å…³ç³»â€ã€‚</p>
</blockquote>
<p>è¿™å°±æ˜¯ <strong>Doubao-Seed-Code</strong> ä¸ DeepSeekã€GLMã€MiniMax ç­‰ Coding æ¨¡å‹æœ€å¤§çš„å·®å¼‚ï¼š</p>
<p>å®ƒä¸æ˜¯é  MCP è°ƒå›¾ç‰‡ï¼Œä¹Ÿä¸æ˜¯å…ˆæŠŠå›¾ç‰‡è½¬æ–‡å­—â€”â€”å®ƒ<strong>åŸç”Ÿå°±èƒ½çœ‹å›¾ï¼ˆVLMï¼‰</strong> ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ad505bcaf4c4d94b69365198349085a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=KL8Q%2B9u3IJRKTb7Iva%2FPYp3%2B9NM%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€æ¬¡æŠŠè®¾è®¡ç¨¿ä¸¢ç»™æ¨¡å‹ï¼Œå®ƒç»™å‡ºçš„ç»“æ„è®©æˆ‘æ„£ä½äº†</h2>
<p>æˆ‘æ‹¿äº†ä¸€å¼ å…¬å¸å†…éƒ¨é¡¹ç›®çš„ UI é¡µé¢ï¼ˆæ¨¡æ‹Ÿç‰ˆï¼‰ï¼Œä¸¢ç»™ Doubao-Seed-Codeï¼Œå¹¶ä¸”åªç»™äº†ä¸€ä¸ªæŒ‡ä»¤ï¼š</p>
<blockquote>
<p>â€œè¿™æ˜¯æˆ‘é¡¹ç›®é‡Œçš„ä¸€ä¸ªé¡µé¢ï¼Œè¯·ä½ æ ¹æ®è¿™å¼ å›¾ç”Ÿæˆä¸€ä¸ªä¼˜é›…ã€å¸ƒå±€åˆç†ã€ç»“æ„æ¸…æ™°çš„å‰ç«¯ä»£ç ï¼ˆVue3 + TailwindCSSï¼‰ã€‚èƒ½ä¸èƒ½åšåˆ°æ¥è¿‘è§†è§‰ä¸Šçš„è¿˜åŸï¼Ÿâ€</p>
</blockquote>
<p>æ•´ä¸ªå¯¹è¯æ²¡æœ‰ä»»ä½•é¢å¤–æç¤ºï¼Œæ²¡æœ‰ DOM ç»“æ„ã€æ²¡æœ‰ç»„ä»¶è¯´æ˜ã€‚å®ƒåšçš„ç¬¬ä¸€ä»¶äº‹ä¸æ˜¯å†™ä»£ç ï¼Œè€Œæ˜¯<strong>æ‹† UI ç»“æ„æ ‘ï¼š</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acfc58a202b448dba52b61fd9f6ca8d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=FnsKderSEyBu3O0JnDCgIY1DWok%3D" alt="" loading="lazy"/></p>
<p>å®ƒè‡ªåŠ¨è¯†åˆ«äº†ï¼š</p>
<ul>
<li>Header æœ‰å“ç‰Œå + æœç´¢æ </li>
<li>å·¦ä¾§æ˜¯åˆ†ç»„å¯¼èˆª</li>
<li>ä¸­é—´æ˜¯å¡ç‰‡ç½‘æ ¼</li>
<li>æ¯å¼ å¡ç‰‡åŒ…å«æ ‡é¢˜ã€å­é¡¹ã€çŠ¶æ€ç‚¹</li>
<li>å³ä¾§æ“ä½œæ åŒ…å«æŒ‰é’®ä¸æŠ˜å èœå•</li>
</ul>
<p>æˆ‘åœ¨ Claude Code é‡Œçœ‹å®ƒä¸€æ­¥æ­¥è¿˜åŸç»“æ„æ—¶ï¼Œæœ‰ä¸€ç§â€œè¿™æ‰æ˜¯å‰ç«¯è¯¥æœ‰çš„ AIâ€çš„æ„Ÿè§‰ã€‚ä¼ ç»Ÿæ¨¡å‹çš„åšæ³•æ˜¯ççŒœ DOMã€‚å®ƒç¬¬ä¸€æ¬¡æ˜¯â€œçœ‹æ‡‚è®¾è®¡â€ï¼Œç¬¬äºŒæ¬¡æ‰æ˜¯â€œå†™ä»£ç â€ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æ¨¡å‹ç”Ÿæˆçš„é¡µé¢ä»£ç ï¼Œæœ‰ç§â€œé«˜çº§æ„Ÿâ€</h2>
<p>è¿™æ˜¯å®ƒæœ€ç»ˆç”Ÿæˆçš„æ ¸å¿ƒç»“æ„ï¼ŒèŠ‚é€‰å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- MainLayout.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex h-screen bg-gray-50"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Sidebar --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">aside</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-64 border-r bg-white p-4"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-lg font-semibold mb-6"</span>&gt;</span>Workspace<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"space-y-3"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex items-center justify-between text-gray-700 cursor-pointer"</span>&gt;</span>
          Dashboard
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-500 hover:text-gray-700 cursor-pointer"</span>&gt;</span>
          Projects
        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">aside</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Content --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex-1 p-6 overflow-y-auto"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex items-center justify-between mb-6"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-2xl font-semibold"</span>&gt;</span>Overview<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"border p-2 rounded w-64"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"Search..."</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

      <span class="hljs-comment">&lt;!-- Cards Grid --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"grid grid-cols-3 gap-6"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
          <span class="hljs-attr">v-for</span>=<span class="hljs-string">"card in cards"</span>
          <span class="hljs-attr">:key</span>=<span class="hljs-string">"card.id"</span>
          <span class="hljs-attr">class</span>=<span class="hljs-string">"p-4 bg-white rounded-xl shadow-sm hover:shadow transition"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-lg font-medium mb-4"</span>&gt;</span>{{ card.title }}<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"space-y-2"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>
              <span class="hljs-attr">v-for</span>=<span class="hljs-string">"item in card.items"</span>
              <span class="hljs-attr">:key</span>=<span class="hljs-string">"item"</span>
              <span class="hljs-attr">class</span>=<span class="hljs-string">"flex items-center gap-2"</span>
            &gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-2 h-2 rounded-full bg-green-500"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-gray-600"</span>&gt;</span>{{ item }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> cards = [
  { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"Messages"</span>, <span class="hljs-attr">items</span>: [<span class="hljs-string">"Inbox"</span>, <span class="hljs-string">"Archives"</span>] },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"Users"</span>, <span class="hljs-attr">items</span>: [<span class="hljs-string">"Active Users"</span>, <span class="hljs-string">"Invitations"</span>] },
  { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">title</span>: <span class="hljs-string">"Settings"</span>, <span class="hljs-attr">items</span>: [<span class="hljs-string">"General"</span>, <span class="hljs-string">"Permissions"</span>] }
];
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æˆ‘æ³¨æ„åˆ°å‡ ç‚¹ï¼š</p>
<ol>
<li><strong>Tailwind çš„ä½¿ç”¨éå¸¸å¹²å‡€ï¼Œæ²¡æœ‰â€œå †æ ·å¼â€</strong></li>
<li>ç»„ä»¶å¯æ‹†åˆ†ï¼Œè¿™è¯´æ˜å®ƒç†è§£äº†â€œä¿¡æ¯åˆ†åŒºâ€</li>
<li>å¡ç‰‡ hoverã€é˜´å½±ã€ç•™ç™½éƒ½éå¸¸ç°ä»£</li>
<li>å®Œå…¨æŒ‰ç…§ UI å›¾å»å¸ƒå±€ï¼Œè€Œä¸æ˜¯ä¹±ç»“æ„</li>
</ol>
<p>è¯´å¥å®è¯ï¼Œè¿™å·²ç»æ¯”ä¸€äº›å…¥èŒä¸€å¹´çš„å‰ç«¯å†™å¾—æ›´å¥½äº†ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€è§†è§‰ç†è§£çœŸæ­£çš„æ€æ‰‹çº§åœºæ™¯ï¼šä¿® UI bug</h2>
<p>æˆ‘åˆè¯•äº†ä¸€ä»¶äº‹æƒ…ï¼š</p>
<blockquote>
<p>æˆ‘æŠŠä¸€ä¸ªâ€œé”™ä½â€çš„ UI æˆªå›¾å‘è¿‡å»ï¼šå³æ åç§»ã€grid æ–­å±‚ã€å­—ä½“ç²—ç»†ä¸å¯¹ã€‚</p>
</blockquote>
<p>æ¨¡å‹ä¸ä»…æŒ‡å‡ºäº†æ‰€æœ‰è§†è§‰é—®é¢˜ï¼Œè¿˜è‡ªåŠ¨ç»™å‡ºäº†ä¿®å¤åçš„ä»£ç  diffã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46a4c9e84a2d41a989a301125e78fb8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=G1lgdO2X9EWnbBoiZGUxNOZZliE%3D" alt="" loading="lazy"/></p>
<p>å®ƒä¼šè¯´ï¼š</p>
<ul>
<li>â€œå³ä¾§æ åç§»ï¼Œå› ä¸ºçˆ¶çº§å°‘äº† <code>flex-shrink-0</code>â€</li>
<li>â€œæ ‡é¢˜å±‚çº§æ¯”è®¾è®¡ç¨¿ç²—ï¼Œå¯æ”¹æˆ <code>font-medium</code>â€</li>
<li>â€œgrid ä¸å¯¹é½ï¼Œå› ä¸ºåŒ…è£¹å±‚å°‘äº† <code>gap-x</code> åˆ†éš”â€</li>
<li>â€œæœç´¢æ çš„ padding åœ¨å›¾ä¸­æ›´å¤§ï¼Œå»ºè®®å˜ä¸º px-4 py-2â€</li>
</ul>
<p>æˆ‘ç¬¬ä¸€æ¬¡æ„Ÿå—åˆ°ï¼š</p>
<p><strong>æ¨¡å‹ä¸æ˜¯åœ¨çŒœï¼Œæ˜¯åœ¨çœ‹ã€‚</strong> ä¸æ˜¯ç†è§£è¯­è¨€ï¼Œæ˜¯ç†è§£ç”»é¢â€”â€”å°±åƒä¸€ä¸ªå‰ç«¯é«˜çº§å·¥ç¨‹å¸ˆåè¾¹ä¸Šä¸€æ ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d97cf4342e484836b377954b10e73f12~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=0Fij%2FfvHqVrJ2O5KcK63VLchbx0%3D" alt="" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-4">äº”ã€åŠ¨æ‰‹ï¼šä½ å¯ä»¥åœ¨ 5 åˆ†é’Ÿå†…å¤ç°æ•´ä¸ªä½“éªŒ</h2>
<p>è¿™éƒ¨åˆ†æˆ‘ä¼šç»™å‡ºæœ€å°å¯å¤ç°æ­¥éª¤ï¼Œè®©ä½ é©¬ä¸Šè¯•èµ·æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2762dacb308b4dc8bdd38507e9d8a5a4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=Gq6Iqbs85cAN0JLnBsDS5Lmcpvc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-5">1ï¼‰å‡†å¤‡ Claude Codeï¼ˆæ¨èï¼‰</h3>
<p>åœ¨ç»ˆç«¯æ·»åŠ ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">export <span class="hljs-attr">ANTHROPIC_BASE_URL</span>=https://ark.cn-beijing.volces.com/api/compatible
export <span class="hljs-attr">ANTHROPIC_AUTH_TOKEN</span>=&lt;ä½ çš„APIKey&gt;
export <span class="hljs-attr">ANTHROPIC_MODEL</span>=doubao-seed-code-preview-latest
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/18bb332ee89348a4b5ff45c7d0598575~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=yzduBjrAu79CcQGkXsgeRXtNGdY%3D" alt="" loading="lazy"/></p>
<p>æˆ–è€…é…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"api_key"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"xxxxxxx"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"api_url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://ark.cn-beijing.volces.com/api/compatible"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"model"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"doubao-seed-code-preview-latest"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-6">2ï¼‰è®©æ¨¡å‹çœ‹ UI å›¾ï¼ˆæ ¸å¿ƒæ­¥éª¤ï¼‰</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3b37345b02c4dbfa2351b539149316d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=j7J%2BUPle7wcbdG0VtlyIqNDbDc0%3D" alt="" loading="lazy"/></p>
<p>å°†ä»»æ„ UI å›¾æ‹–å…¥ Claude Codeï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs">è¯·ä½ ç†è§£è¿™å¼ è®¾è®¡ç¨¿ï¼Œè¾“å‡ºå…¶å¸ƒå±€ç»“æ„æ ‘ï¼Œå¹¶ç”¨ Vue3 + TailwindCSS å®ç°é¡µé¢ã€‚è¦æ±‚ç°ä»£ã€ç¾è§‚ã€ç•™ç™½åˆç†ã€æ˜“æ‰©å±•ã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a5e67abf6eaa411fb039f66115313ec8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=TJz7lRBuseGSD3d%2FU7MHPi3haAQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">3ï¼‰è®©æ¨¡å‹å¸®ä½ ä¿® UI bug</h3>
<p>æŠŠå¼‚å¸¸æˆªå›¾ä¸Šä¼ ï¼Œè¾“å…¥ï¼š</p>
<pre><code class="hljs">å¸®æˆ‘æ‰¾å‡ºæ­¤é¡µé¢ä¸è®¾è®¡ç¨¿çš„å·®å¼‚ï¼Œå¹¶æä¾› CSS/Tailwind çš„ä¿®å¤å»ºè®®ï¼ŒæŒ‰ diff æ–¹å¼è¾“å‡ºã€‚
</code></pre>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afd4345380524c22b460719ab798a1a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=poVHgcQ%2FfSiuBLPo9kvm1c41xWo%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">4ï¼‰æ‰©å±•æ¡ˆä¾‹ï¼šè§†è§‰ + äº¤äº’ååŒ</h3>
<p>ä½ å¯ä»¥ç»§ç»­è®©å®ƒï¼š</p>
<pre><code class="hljs">ç»™è¿™ä¸ªé¡µé¢åŠ å…¥å³ä¾§è®¾ç½®æŠ½å±‰ï¼Œé€»è¾‘æ˜¯ç‚¹å‡»å¡ç‰‡å³ä¸Šè§’çš„æŒ‰é’®å±•å¼€ã€‚è¯·åŒæ—¶ç»™å‡ºç»„ä»¶æ‹†åˆ†å»ºè®®ã€‚
</code></pre>
<p>æ¨¡å‹ä¼šè‡ªåŠ¨ç”Ÿæˆï¼š</p>
<ul>
<li>drawer ç»„ä»¶</li>
<li>composables é€»è¾‘</li>
<li>åŠ¨ç”»</li>
<li>äº‹ä»¶ç»‘å®š</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9b3b7b1896df49b290da270e12526275~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR5a6J5Lic5bC8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764601052&amp;x-signature=blnl%2BvLC3dT3%2FWfJbjtpxgF4JSs%3D" alt="" loading="lazy"/></p>
<p>è¿™å±•ç¤ºäº†å®ƒåœ¨å‰ç«¯å·¥ç¨‹åŒ–èƒ½åŠ›ä¸Šçš„â€œAgenticâ€å€¾å‘ã€‚</p>
<hr/>
<h2 data-id="heading-9">å…­ã€å¦‚æœè¦ç”¨ä¸€å¥è¯å½¢å®¹ Doubao-Seed-Code çš„è§†è§‰èƒ½åŠ›â€¦â€¦</h2>
<p>æˆ‘ä¼šè¯´ï¼šå®ƒæ˜¯ç¬¬ä¸€ä¸ªçœŸæ­£èƒ½â€œçœ‹æ‡‚è®¾è®¡ç¨¿â€çš„ç¼–ç¨‹æ¨¡å‹ï¼Œè€Œä¸æ˜¯æŠŠâ€œå›¾è½¬æ–‡å­—åå†å†™ä»£ç â€çš„è¯­è¨€æ¨¡å‹ã€‚</p>
<p>å®ƒèƒ½ç†è§£å¸ƒå±€ã€è§†è§‰å±‚çº§ã€é—´è·ã€å¯¹é½ã€ä¿¡æ¯æ¨¡å—ï¼Œè¿™äº›èƒ½åŠ›ä¸æ˜¯è¯­è¨€æ¨¡å‹çš„å»¶ä¼¸ï¼Œè€Œæ˜¯<strong>å‰ç«¯å·¥ç¨‹è®¤çŸ¥çš„å»¶ä¼¸</strong>ã€‚</p>
<p>åœ¨å‰ç«¯è¿™ä¸ªé«˜åº¦ä¾èµ–â€œè§†è§‰â†’ç»“æ„â†’ä»£ç æ˜ å°„â€çš„é¢†åŸŸï¼ŒVLM æ˜¯ä¸€ä¸ªè´¨çš„æ”¹å˜ã€‚</p>
<hr/>
<h2 data-id="heading-10">ä¸ƒã€æ¨¡å‹å¹¶ä¸æ˜¯æ¥æ›¿ä»£å‰ç«¯ï¼Œè€Œæ˜¯é‡å¡‘å‰ç«¯</h2>
<p>å‰ç«¯çœŸæ­£çš„ç“¶é¢ˆä¸æ˜¯â€œå†™ä»£ç â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ç†è§£é¡µé¢ç»“æ„</li>
<li>å¤åˆ»è®¾è®¡ç¨¿</li>
<li>åœ¨è„‘ä¸­æ„å»ºå¸ƒå±€</li>
<li>è°ƒæ ·å¼</li>
<li>ä¿®è‚‰çœ¼å¯è§ä½†è¯­è¨€éš¾æè¿°çš„ç»†èŠ‚</li>
</ul>
<p>å½“æ¨¡å‹èƒ½å¤Ÿç†è§£è§†è§‰ï¼Œå®ƒå¼€å§‹æ‰¿æ‹…èµ·â€œç»“æ„ç†è§£â€è¿™ä¸€æœ€éš¾çš„éƒ¨åˆ†ï¼Œè€Œå¼€å‘è€…å¯ä»¥æŠŠæ›´å¤šæ—¶é—´æ”¾åœ¨ï¼š</p>
<ul>
<li>äº¤äº’è®¾è®¡</li>
<li>åŠ¨ç”»ä½“éªŒ</li>
<li>ä¿¡æ¯æ¶æ„</li>
<li>ä¸šåŠ¡é€»è¾‘</li>
<li>å…¨é“¾è·¯æ€§èƒ½</li>
</ul>
<p>å¦‚æœè¯´å‰ç«¯æ›¾ç»è¢«ç§°ä¸ºâ€œè¿˜åŸåº¦å·¥ç¨‹å¸ˆâ€ï¼Œé‚£ä¹ˆè§†è§‰ç†è§£æ¨¡å‹ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.volcengine.com%2Fdocs%2F82379%2F1949118%3Futm_source%3Dchatgpt.com" target="_blank" title="https://www.volcengine.com/docs/82379/1949118?utm_source=chatgpt.com" ref="nofollow noopener noreferrer">ä¼ é€é—¨</a>ï¼‰å°±æ˜¯ä»æ ¹ä¸Šæ”¹å˜è¿™ä¸ªç§°å‘¼çš„å·¥å…·ã€‚</p>
<p><strong>å‰ç«¯ä¸æ˜¯è¢«æ›¿ä»£ï¼Œè€Œæ˜¯è¢«å‡çº§ã€‚</strong> å¦‚æœä½ ä¹Ÿåœ¨æ¢ç´¢â€œAI å‚ä¸å‰ç«¯å·¥ç¨‹æµç¨‹â€ï¼Œæ¬¢è¿ç•™è¨€äº¤æµã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ” React æœ‰ useAntdTableï¼ŒVue3 æ€ä¹ˆåŠï¼Ÿè‡ªå°ä¸€ä¸ª useTableï¼]]></title>    <link>https://juejin.cn/post/7575887863797645322</link>    <guid>https://juejin.cn/post/7575887863797645322</guid>    <pubDate>2025-11-24T08:21:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575887863797645322" data-draft-id="7573601651782516763" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”  React æœ‰ useAntdTableï¼ŒVue3 æ€ä¹ˆåŠï¼Ÿè‡ªå°ä¸€ä¸ª useTableï¼"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-24T08:21:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lsx_"/> <meta itemprop="url" content="https://juejin.cn/user/1442981392682829"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”  React æœ‰ useAntdTableï¼ŒVue3 æ€ä¹ˆåŠï¼Ÿè‡ªå°ä¸€ä¸ª useTableï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442981392682829/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lsx_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T08:21:29.000Z" title="Mon Nov 24 2025 08:21:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    20
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;color:#282d36}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px;color:#2f845e}.markdown-body h2{font-size:22px;display:inline-block;font-weight:700;background:#2f845e;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(47,132,194,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 32px);border-bottom:3px solid #2f845e}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%;box-shadow:6px 6px 6px #888}.markdown-body hr{border:none;border-top:1px solid rgba(66,185,131,.15);margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:16px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#262626;border:1px solid #2f845e;border-top:8px solid #2f845e;background:linear-gradient(180deg,rgba(66,185,131,.1),transparent)!important}.markdown-body pre&gt;code.hljs[lang]:before{top:8px!important;color:#2f845e!important}.markdown-body pre&gt;code.language-awesome_error{border:1px solid #ff4d4f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ff4d4f!important;background:#fff2f0!important}.markdown-body pre&gt;code.language-awesome_error:before{content:"!"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ff4d4f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_warn{border:1px solid #ffc46f!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#ffc46f!important;background:#fffbe6!important}.markdown-body pre&gt;code.language-awesome_warn:before{content:"â˜‚"!important;position:absolute;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#ffc46f!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_success{border:1px solid #52c41a!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#52c41a!important;background:#f6ffed!important}.markdown-body pre&gt;code.language-awesome_success:before{content:"âœ“"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#52c41a!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body pre&gt;code.language-awesome_info{border:1px solid #1890ff!important;border-left-width:8px;font-size:14px;font-weight:700;padding:15px 12px 15px 16px;margin:0;word-break:normal;white-space:break-spaces;display:block;overflow-x:auto;color:#1890ff!important;background:#e6f7ff!important}.markdown-body pre&gt;code.language-awesome_info:before{content:"i"!important;position:absolute!important;top:50%!important;left:-9px!important;transform:translateY(-14px)!important;background:#1890ff!important;color:#fff!important;border:2px solid #fff!important;display:flex;align-items:center;justify-content:center;width:22px;height:22px;border-radius:100%;font-weight:700;font-family:Dosis,Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:16px}.markdown-body strong{background-color:inherit;color:#2f845e}.markdown-body em{background-color:inherit;color:#949415}.markdown-body a{text-decoration:none;color:#2f8e54;border-bottom:1px solid #3f9e64}.markdown-body a:active,.markdown-body a:hover{color:#3f9e64}.markdown-body a[class^=footnote]{margin-left:4px}.markdown-body a:before{content:"â¤ "}.markdown-body table{font-size:12px;width:100%;max-width:100%;overflow:auto;border:2px solid #2f8e54}.markdown-body thead{background:#2f8e54;color:#fff;text-align:left;font-weight:700}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:22px}.markdown-body td{min-width:120px}.markdown-body blockquote{padding:1px 22px;margin:22px 0;border-left:6px solid #2f845e;background-color:rgba(66,185,131,.1);border-radius:2px}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#2f845e}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px;color:#282d36}.markdown-body del{color:#2f845e}.markdown-body input[type=checkbox]:checked:before{content:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAA/klEQVQ4T72TMU7DQBBF318XdFR06egQEnAXRINEGlqgowoIR8AF4AZOZ4JEGq5AC5EixBU4A55BNrEVHAcSBTHlaubt37/zxZKlcn7n6mDPXJvz8IJ89HzWu8t7C8D2dfsY52ae4apHnLx0ktsCsHXZjiUuFgG40x2eJ/H/AhztB+zDUTpLwWj8jGkzxSHiHaMPrDQC8sMoilKzLAUqiKQjmb+ZuAdW80tmelCHODoNgSfP7AFprTTaRTzsJN1GEyuIZ7uW6TEEHwCtyV/6EVBKJHhfzgC0Xv/iXwEFBF4FG0378bd7sPQq5xK/hSnk6sdlX3mZrKkwLZKBeu8n9XuWEUE7X+YAAAAASUVORK5CYII=);position:relative;top:-1px;left:-1px}.markdown-body .math .katex{font-family:Menlo,Monaco,Consolas,Courier New,monospace;word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#f6ffed;color:#52c41a;font-size:.87em;padding:.065em .4em}@media (max-width:720px){.markdown-body h1{font-size:22px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸ºä»€ä¹ˆå°è£…ä¸€ä¸ªVue3ç‰ˆæœ¬çš„useTable</h2>
<p>ä¹‹å‰å†™ React ï¼Œ æœ‰Â <code>ahooks çš„</code>Â æä¾›çš„Â <code>useAntdTable</code>Â è¿™æ ·çš„æˆç†Ÿæ•°æ®è¡¨å°è£…ï¼Œè€Œåœ¨ Vue3 ä¸­å¹¶æ²¡æœ‰ç­‰ä»·çš„â€œå®˜æ–¹â€å·¥å…·ã€‚</p>
<p>åœ¨Â <strong>React + Ant Design</strong>Â çš„ç”Ÿæ€é‡Œï¼š</p>
<ul>
<li><code>ahooks</code>Â çš„Â <code>useAntdTable</code>Â éå¸¸å¸¸ç”¨ï¼›</li>
<li>è´Ÿè´£ç»Ÿä¸€ç®¡ç†è¡¨æ ¼çš„æ•°æ®è¯·æ±‚ã€åˆ†é¡µã€æœç´¢ã€loadingã€åˆ·æ–°ç­‰é€»è¾‘ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { tableProps, search } = <span class="hljs-title function_">useAntdTable</span>(getTableData)
</code></pre>
<p>è¿™ä¼šè‡ªåŠ¨å¸®ä½ å®ç°ï¼š</p>
<ul>
<li>è¯·æ±‚æ•°æ®ï¼›</li>
<li>åˆ†é¡µå˜åŒ–è‡ªåŠ¨è§¦å‘è¯·æ±‚ï¼›</li>
<li>æœç´¢å‚æ•°å½’ä¸€åŒ–ï¼›</li>
<li>Loading ç®¡ç†ã€‚</li>
</ul>
<p>ğŸ‘‰ ç»„ä»¶åªè´Ÿè´£å±•ç¤ºï¼Œé€»è¾‘éƒ½é›†ä¸­åœ¨ hook ä¸­ã€‚</p>
<blockquote>
<p>åœ¨vue3é¡¹ç›®ä¸­ï¼Œä¹Ÿæœ‰ä¸å°‘è¡¨æ ¼ä¸šåŠ¡ï¼Œä»–ä»¬çš„åŠŸèƒ½éƒ½å¤§å·®ä¸å·®ï¼Œæœ‰å¾ˆå¤šç›¸ä¼¼çš„é€»è¾‘ï¼Œç„¶åæˆ‘ä»¬çš„å°è£…ä¸€ä¸ªuseTableï¼Œå…¶ä½œç”¨å°±æ˜¯æå–ç›¸åŒçš„é€»è¾‘åˆ°hooksä¸­ï¼Œè€ŒUIç»„ä»¶åªè´Ÿè´£ä½¿ç”¨hooksæš´éœ²çš„æ•°æ®ä¸æ–¹æ³•ã€‚è¿™æå¤§çš„æé«˜äº†ä»£ç çš„é€»è¾‘å¤ç”¨ï¼Œç»Ÿä¸€è¡Œä¸ºï¼ŒUI ä¸ä¸šåŠ¡é€»è¾‘å®Œå…¨åˆ†ç¦»ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-1">ä»‹ç» useTable</h2>
<p>ä¸€ä¸ªä¸“ä¸º <code>Vue3 + Element Plus</code> è®¾è®¡çš„è¡¨æ ¼æ•°æ®ç®¡ç† Hookï¼Œå‚è€ƒ ahooks çš„ <code>useAntdTable</code> è®¾è®¡ï¼Œæä¾›éƒ¨åˆ†çš„è¡¨æ ¼åŠŸèƒ½æ”¯æŒã€‚</p>
<h3 data-id="heading-2">ç‰¹æ€§</h3>
<ul>
<li>ğŸš€ <strong>å¼€ç®±å³ç”¨</strong> - é›¶é…ç½®å³å¯ä½¿ç”¨ï¼Œè‡ªåŠ¨å¤„ç†åˆ†é¡µã€æœç´¢ã€æ’åº</li>
<li>ğŸ“¦ <strong>ç±»å‹å®‰å…¨</strong> - å®Œæ•´çš„ TypeScript æ”¯æŒ</li>
<li>ğŸ¯ <strong>è¯­ä¹‰åŒ– API</strong> - æ–¹æ³•åæ¸…æ™°æ˜“æ‡‚ï¼Œç¬¦åˆå¼€å‘ä¹ æƒ¯</li>
<li>ğŸ”§ <strong>é«˜åº¦å¯å®šåˆ¶</strong> - æ”¯æŒæ•°æ®è½¬æ¢ã€é”™è¯¯å¤„ç†ã€å›è°ƒå‡½æ•°ç­‰</li>
<li>ğŸ“± <strong>å“åº”å¼</strong> - åŸºäº Vue3 Composition APIï¼Œå®Œå…¨å“åº”å¼</li>
<li>ğŸ¨ <strong>Element Plus å‹å¥½</strong> - ä¸“ä¸º Element Plus è¡¨æ ¼ç»„ä»¶è®¾è®¡</li>
</ul>
<h3 data-id="heading-3">ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½</h3>
<h4 data-id="heading-4">1. æ•°æ®ç®¡ç†</h4>
<ul>
<li>âœ… è‡ªåŠ¨åŠ è½½æ•°æ®</li>
<li>âœ… åŠ è½½çŠ¶æ€ç®¡ç†</li>
<li>âœ… é”™è¯¯å¤„ç†</li>
</ul>
<h4 data-id="heading-5">2. åˆ†é¡µåŠŸèƒ½</h4>
<ul>
<li>âœ… é¡µç åˆ‡æ¢</li>
<li>âœ… æ¯é¡µæ¡æ•°è°ƒæ•´</li>
<li>âœ… åˆ†é¡µçŠ¶æ€åŒæ­¥</li>
</ul>
<h4 data-id="heading-6">3. æœç´¢åŠŸèƒ½</h4>
<ul>
<li>âœ… å¤šå­—æ®µæœç´¢</li>
<li>âœ… æœç´¢æ¡ä»¶ç»„åˆ</li>
<li>âœ… æœç´¢é‡ç½®</li>
</ul>
<h4 data-id="heading-7">4. æ’åºåŠŸèƒ½</h4>
<ul>
<li>âœ… å¤šå­—æ®µæ’åº</li>
<li>âœ… æ’åºæ–¹å‘åˆ‡æ¢</li>
<li>âœ… æ’åºçŠ¶æ€ç®¡ç†</li>
</ul>
<h4 data-id="heading-8">5. è¡Œé€‰æ‹©</h4>
<ul>
<li>âœ… å•é€‰/å¤šé€‰</li>
<li>âœ… æ‰¹é‡æ“ä½œ</li>
<li>âœ… é€‰ä¸­çŠ¶æ€ç®¡ç†</li>
</ul>
<h3 data-id="heading-9">åŸºç¡€ç”¨æ³•</h3>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTable'</span>

<span class="hljs-comment">// å®šä¹‰æ•°æ®ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span> | <span class="hljs-string">'inactive'</span>
}

<span class="hljs-comment">// å®šä¹‰è¯·æ±‚å‚æ•°ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserListParams</span> {
  <span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>
  name?: <span class="hljs-built_in">string</span>
  status?: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// API è¯·æ±‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">params: UserListParams</span>) =&gt; {
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/users'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(params)
  })
  <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>()
}

<span class="hljs-comment">// ä½¿ç”¨ Hook</span>
<span class="hljs-keyword">const</span> { data, loading, pagination, search, refresh } = useTable&lt;<span class="hljs-title class_">User</span>, <span class="hljs-title class_">UserListParams</span>&gt;({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">defaultPagination</span>: { <span class="hljs-attr">current</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span> },
  <span class="hljs-attr">defaultSearchParams</span>: { <span class="hljs-attr">status</span>: <span class="hljs-string">'active'</span> }
})
</code></pre>
<h3 data-id="heading-10">API</h3>
<h4 data-id="heading-11">é…ç½®é€‰é¡¹</h4>













































































<table><thead><tr><th>å‚æ•°</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>request</code></td><td><code>(params: P) =&gt; Promise&lt;HttpResponse&lt;TableData&lt;T&gt;&gt;&gt;</code></td><td>-</td><td>æ•°æ®è¯·æ±‚å‡½æ•°</td></tr><tr><td><code>defaultPagination</code></td><td><code>Partial&lt;PaginationParams&gt;</code></td><td><code>{ current: 1, pageSize: 10 }</code></td><td>é»˜è®¤åˆ†é¡µå‚æ•°</td></tr><tr><td><code>defaultSearchParams</code></td><td><code>Record&lt;string, any&gt;</code></td><td><code>{}</code></td><td>é»˜è®¤æœç´¢å‚æ•°</td></tr><tr><td><code>defaultSortParams</code></td><td><code>SortParams</code></td><td><code>{}</code></td><td>é»˜è®¤æ’åºå‚æ•°</td></tr><tr><td><code>immediate</code></td><td><code>boolean</code></td><td><code>true</code></td><td>æ˜¯å¦ç«‹å³åŠ è½½æ•°æ®</td></tr><tr><td><code>paginationKey</code></td><td><code>PaginationKey</code></td><td><code>{ current: 'pageNum', size: 'pageSize' }</code></td><td>è‡ªå®šä¹‰åˆ†é¡µå­—æ®µæ˜ å°„ å¦‚æ¥å£çš„åˆ†é¡µå­—æ®µä¸æ˜¯pageNumå’ŒpageSizeï¼Œå¯ä½¿ç”¨è¯¥å‚æ•°å¿«é€Ÿé…ç½®åˆ†é¡µå­—æ®µ</td></tr><tr><td><code>rowKey</code></td><td><code>string | ((record: T) =&gt; string | number)</code></td><td><code>'id'</code></td><td>è¡Œé”®å­—æ®µåæˆ–å‡½æ•°</td></tr><tr><td><code>transformResponse</code></td><td><code>(response: HttpResponse&lt;TableData&lt;T&gt;&gt;) =&gt; TableData&lt;T&gt;</code></td><td>-</td><td>æ•°æ®è½¬æ¢å‡½æ•°</td></tr><tr><td><code>onError</code></td><td><code>(error: any) =&gt; void</code></td><td>-</td><td>é”™è¯¯å¤„ç†å‡½æ•°</td></tr><tr><td><code>onSuccess</code></td><td><code>(data: TableData&lt;T&gt;) =&gt; void</code></td><td>-</td><td>æˆåŠŸå›è°ƒå‡½æ•°</td></tr><tr><td><code>beforeRequest</code></td><td><code>(params: P) =&gt; P | Promise&lt;P&gt;</code></td><td>-</td><td>è¯·æ±‚å‰å¤„ç†å‡½æ•°</td></tr></tbody></table>
<h4 data-id="heading-12">è¿”å›å€¼</h4>



















































































































<table><thead><tr><th>å±æ€§</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>data</code></td><td><code>ComputedRef&lt;T[]&gt;</code></td><td>è¡¨æ ¼æ•°æ®åˆ—è¡¨</td></tr><tr><td><code>hasData</code></td><td><code>ComputedRef&lt;boolean&gt;</code></td><td>æ˜¯å¦æœ‰è¡¨æ ¼æ•°æ®</td></tr><tr><td><code>loading</code></td><td><code>ComputedRef&lt;boolean&gt;</code></td><td>åŠ è½½çŠ¶æ€</td></tr><tr><td><code>pagination</code></td><td><code>ComputedRef&lt;PaginationParams&gt;</code></td><td>åˆ†é¡µä¿¡æ¯</td></tr><tr><td><code>searchParams</code></td><td><code>Ref&lt;Record&lt;string, any&gt;&gt;</code></td><td>æœç´¢å‚æ•°</td></tr><tr><td><code>sortParams</code></td><td><code>Ref&lt;SortParams&gt;</code></td><td>æ’åºå‚æ•°</td></tr><tr><td><code>selectedRowKeys</code></td><td><code>Ref&lt;(string | number)[]&gt;</code></td><td>é€‰ä¸­çš„è¡Œé”®</td></tr><tr><td><code>selectedRows</code></td><td><code>Ref&lt;T[]&gt;</code></td><td>é€‰ä¸­çš„è¡Œæ•°æ®</td></tr><tr><td><code>refresh</code></td><td><code>() =&gt; Promise&lt;void&gt;</code></td><td>åˆ·æ–°æ•°æ®ï¼ˆä¿æŒå½“å‰æ¡ä»¶ï¼‰</td></tr><tr><td><code>reload</code></td><td><code>() =&gt; Promise&lt;void&gt;</code></td><td>é‡æ–°åŠ è½½æ•°æ®ï¼ˆé‡ç½®åˆ°ç¬¬ä¸€é¡µï¼‰</td></tr><tr><td><code>search</code></td><td><code>(params?: Record&lt;string, any&gt;) =&gt; Promise&lt;void&gt;</code></td><td>æœç´¢</td></tr><tr><td><code>reset</code></td><td><code>() =&gt; Promise&lt;void&gt;</code></td><td>é‡ç½®æœç´¢</td></tr><tr><td><code>setPagination</code></td><td><code>(pagination: Partial&lt;PaginationParams&gt;) =&gt; void</code></td><td>è®¾ç½®åˆ†é¡µ</td></tr><tr><td><code>setSortParams</code></td><td><code>(sortParams: SortParams) =&gt; void</code></td><td>è®¾ç½®æ’åº</td></tr><tr><td><code>setSelectedRowKeys</code></td><td><code>(keys: (string | number)[]) =&gt; void</code></td><td>è®¾ç½®é€‰ä¸­è¡Œ</td></tr><tr><td><code>clearSelection</code></td><td><code>() =&gt; void</code></td><td>æ¸…ç©ºé€‰ä¸­</td></tr><tr><td><code>getRowKey</code></td><td><code>(record: T) =&gt; string | number</code></td><td>è·å–è¡Œé”®</td></tr><tr><td><code>onSortChange</code></td><td><code>(payload: { prop?: string; order?: 'ascending' |'descending' | null } | any)</code></td><td>å¤„ç† Element Plus è¡¨æ ¼æ’åºäº‹ä»¶, @param payload - Element Plus çš„ sort-change äº‹ä»¶å‚æ•°</td></tr><tr><td><code>onSelectionChange</code></td><td><code>(selection: T[]) =&gt; void</code></td><td>å¤„ç† Element Plus è¡¨æ ¼é€‰æ‹©äº‹ä»¶, @param selection - é€‰ä¸­çš„è¡Œæ•°æ®</td></tr><tr><td><code>onCurrentChange</code></td><td><code>(current: number) =&gt; void</code></td><td>å¤„ç† Element Plus åˆ†é¡µé¡µç å˜æ›´äº‹ä»¶, @param current - å½“å‰é¡µ</td></tr><tr><td><code>onSizeChange</code></td><td><code>(size: number) =&gt; void</code></td><td>å¤„ç† Element Plus åˆ†é¡µæ¯é¡µæ¡æ•°å˜æ›´äº‹ä»¶, @param size - æ¯é¡µæ¡æ•°</td></tr></tbody></table>
<h3 data-id="heading-13">ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-14">åŸºç¡€è¡¨æ ¼</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æœç´¢è¡¨å• --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"searchForm"</span> <span class="hljs-attr">inline</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">"searchForm.name"</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleSearch"</span>&gt;</span>æœç´¢<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleReset"</span>&gt;</span>é‡ç½®<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- è¡¨æ ¼ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span> <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">:loading</span>=<span class="hljs-string">"loading"</span> <span class="hljs-attr">row-key</span>=<span class="hljs-string">"id"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ID"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"é‚®ç®±"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- åˆ†é¡µ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span>
      <span class="hljs-attr">v-model:current-page</span>=<span class="hljs-string">"pagination.current"</span>
      <span class="hljs-attr">v-model:page-size</span>=<span class="hljs-string">"pagination.pageSize"</span>
      <span class="hljs-attr">:total</span>=<span class="hljs-string">"pagination.total"</span>
      @<span class="hljs-attr">current-change</span>=<span class="hljs-string">"handleCurrentChange"</span>
      @<span class="hljs-attr">size-change</span>=<span class="hljs-string">"handleSizeChange"</span>
    /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { useTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTable'</span>

<span class="hljs-keyword">const</span> searchForm = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">''</span> })

<span class="hljs-keyword">const</span> { data, loading, pagination, search, reset } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">defaultPagination</span>: { <span class="hljs-attr">current</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span> }
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">search</span>(searchForm.<span class="hljs-property">value</span>)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleReset</span> = (<span class="hljs-params"/>) =&gt; {
  searchForm.<span class="hljs-property">value</span> = { <span class="hljs-attr">name</span>: <span class="hljs-string">''</span> }
  <span class="hljs-title function_">reset</span>()
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleCurrentChange</span> = (<span class="hljs-params">current: number</span>) =&gt; {
  pagination.<span class="hljs-property">value</span>.<span class="hljs-property">current</span> = current
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSizeChange</span> = (<span class="hljs-params">size: number</span>) =&gt; {
  pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageSize</span> = size
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-15">å¸¦é€‰æ‹©çš„è¡¨æ ¼</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
      <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span>
      <span class="hljs-attr">:loading</span>=<span class="hljs-string">"loading"</span>
      @<span class="hljs-attr">selection-change</span>=<span class="hljs-string">"handleSelectionChange"</span>
      <span class="hljs-attr">row-key</span>=<span class="hljs-string">"id"</span>
    &gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"selection"</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"55"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"email"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"é‚®ç®±"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> 
      <span class="hljs-attr">type</span>=<span class="hljs-string">"danger"</span> 
      @<span class="hljs-attr">click</span>=<span class="hljs-string">"handleBatchDelete"</span>
      <span class="hljs-attr">:disabled</span>=<span class="hljs-string">"!selectedRowKeys.length"</span>
    &gt;</span>
      æ‰¹é‡åˆ é™¤ ({{ selectedRowKeys.length }})
    <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTable'</span>

<span class="hljs-keyword">const</span> { 
  data, 
  loading, 
  selectedRowKeys, 
  selectedRows, 
  setSelectedRowKeys 
} = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSelectionChange</span> = (<span class="hljs-params">selection: User[]</span>) =&gt; {
  <span class="hljs-keyword">const</span> keys = selection.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span>)
  <span class="hljs-title function_">setSelectedRowKeys</span>(keys)
}

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleBatchDelete</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'é€‰ä¸­çš„ç”¨æˆ·:'</span>, selectedRows.<span class="hljs-property">value</span>)
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-16">å¸¦æ’åºçš„è¡¨æ ¼</h4>
<pre><code class="hljs language-ts" lang="ts">&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">el-table</span>
    <span class="hljs-attr">:data</span>=<span class="hljs-string">"data"</span>
    <span class="hljs-attr">:loading</span>=<span class="hljs-string">"loading"</span>
    @<span class="hljs-attr">sort-change</span>=<span class="hljs-string">"handleSortChange"</span>
  &gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"name"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> <span class="hljs-attr">sortable</span>=<span class="hljs-string">"custom"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">el-table-column</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">"createTime"</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"åˆ›å»ºæ—¶é—´"</span> <span class="hljs-attr">sortable</span>=<span class="hljs-string">"custom"</span> /&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">el-table</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { useTable } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks/useTable'</span>

<span class="hljs-keyword">const</span> { data, loading, setSortParams } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSortChange</span> = (<span class="hljs-params">{ prop, order }: any</span>) =&gt; {
  <span class="hljs-title function_">setSortParams</span>({
    <span class="hljs-attr">field</span>: prop,
    <span class="hljs-attr">order</span>: order === <span class="hljs-string">'ascending'</span> ? <span class="hljs-string">'ascend'</span> : order === <span class="hljs-string">'descending'</span> ? <span class="hljs-string">'descend'</span> : <span class="hljs-literal">undefined</span>
  })
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-17">æ•°æ®è½¬æ¢</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { data, loading } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">transformResponse</span>: <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
    <span class="hljs-comment">// è‡ªå®šä¹‰æ•°æ®è½¬æ¢é€»è¾‘</span>
    <span class="hljs-keyword">const</span> { result } = response
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">list</span>: result?.<span class="hljs-property">list</span>?.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> ({
        ...item,
        <span class="hljs-attr">statusText</span>: item.<span class="hljs-property">status</span> === <span class="hljs-string">'active'</span> ? <span class="hljs-string">'æ¿€æ´»'</span> : <span class="hljs-string">'ç¦ç”¨'</span>
      })) || [],
      <span class="hljs-attr">total</span>: result?.<span class="hljs-property">total</span> || <span class="hljs-number">0</span>,
      <span class="hljs-attr">current</span>: result?.<span class="hljs-property">current</span> || <span class="hljs-number">1</span>,
      <span class="hljs-attr">pageSize</span>: result?.<span class="hljs-property">pageSize</span> || <span class="hljs-number">10</span>
    }
  }
})
</code></pre>
<h4 data-id="heading-18">é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> { data, loading } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ•°æ®åŠ è½½å¤±è´¥:'</span>, error)
    <span class="hljs-comment">// è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘</span>
  },
  <span class="hljs-attr">onSuccess</span>: <span class="hljs-function">(<span class="hljs-params">data</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ•°æ®åŠ è½½æˆåŠŸ:'</span>, data)
    <span class="hljs-comment">// è‡ªå®šä¹‰æˆåŠŸå¤„ç†é€»è¾‘</span>
  }
})
</code></pre>
<h4 data-id="heading-19">è¯·æ±‚å‰å¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> { data, loading } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">beforeRequest</span>: <span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
    <span class="hljs-comment">// åœ¨è¯·æ±‚å‰æ·»åŠ é¢å¤–å‚æ•°</span>
    <span class="hljs-keyword">return</span> {
      ...params,
      <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
      <span class="hljs-attr">token</span>: <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>)
    }
  }
})
</code></pre>
<h3 data-id="heading-20">æœ€ä½³å®è·µ</h3>
<h4 data-id="heading-21">1. ç±»å‹å®‰å…¨</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// å®šä¹‰æ˜ç¡®çš„ç±»å‹</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> {
  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>
}

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserListParams</span> {
  <span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">pageSize</span>: <span class="hljs-built_in">number</span>
  name?: <span class="hljs-built_in">string</span>
}

<span class="hljs-comment">// ä½¿ç”¨æ³›å‹ç¡®ä¿ç±»å‹å®‰å…¨</span>
<span class="hljs-keyword">const</span> { data, loading } = useTable&lt;<span class="hljs-title class_">User</span>, <span class="hljs-title class_">UserListParams</span>&gt;({
  <span class="hljs-attr">request</span>: getUserList
})
</code></pre>
<h4 data-id="heading-22">2. é”™è¯¯å¤„ç†</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> { data, loading } = <span class="hljs-title function_">useTable</span>({
  <span class="hljs-attr">request</span>: getUserList,
  <span class="hljs-attr">onError</span>: <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
    <span class="hljs-comment">// ç»Ÿä¸€é”™è¯¯å¤„ç†</span>
    <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>)
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'API Error:'</span>, error)
  }
})
</code></pre>
<h4 data-id="heading-23">3. æ€§èƒ½ä¼˜åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä½¿ç”¨é˜²æŠ–æœç´¢</span>
<span class="hljs-keyword">import</span> { debounce } <span class="hljs-keyword">from</span> <span class="hljs-string">'lodash-es'</span>

<span class="hljs-keyword">const</span> debouncedSearch = <span class="hljs-title function_">debounce</span>(<span class="hljs-function">(<span class="hljs-params">params</span>) =&gt;</span> {
  <span class="hljs-title function_">search</span>(params)
}, <span class="hljs-number">300</span>)

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSearch</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">debouncedSearch</span>(searchForm.<span class="hljs-property">value</span>)
}
</code></pre>
<hr/>
<h2 data-id="heading-24">ä»£ç å®ç°</h2>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { ref, computed, <span class="hljs-keyword">type</span> <span class="hljs-title class_">Ref</span>, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ElMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'element-plus'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PaginationParams</span>, <span class="hljs-title class_">SortParams</span>, <span class="hljs-title class_">TableData</span>, <span class="hljs-title class_">UseTableOptions</span>, <span class="hljs-title class_">UseTableReturn</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./type'</span>;

<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./type'</span>;

<span class="hljs-comment">/**
 * è¡¨æ ¼ Hook
 *
 * æä¾›è¡¨æ ¼æ•°æ®ç®¡ç†ã€åˆ†é¡µã€æœç´¢ã€æ’åºã€é€‰æ‹©ç­‰åŠŸèƒ½
 *
 * <span class="hljs-doctag">@template</span> T è¡¨æ ¼æ•°æ®ç±»å‹
 * <span class="hljs-doctag">@template</span> P è¯·æ±‚å‚æ•°ç±»å‹
 * <span class="hljs-doctag">@param</span> options é…ç½®é€‰é¡¹
 * <span class="hljs-doctag">@returns</span> è¡¨æ ¼æ“ä½œå¯¹è±¡
 *
 * <span class="hljs-doctag">@example</span>
 * ```typescript
 * const { data, loading, pagination, search, refresh } = useTable({
 *   request: getUserList,
 *   defaultPagination: { current: 1, pageSize: 10 },
 *   defaultSearchParams: { status: 'active' }
 * })
 *
 * // æœç´¢
 * search({ name: 'test' })
 *
 * // åˆ·æ–°
 * refresh()
 *
 * // é‡ç½®
 * reset()
 * ```
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useTable&lt;T = <span class="hljs-built_in">any</span>, P = <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">options</span>: <span class="hljs-title class_">UseTableOptions</span>&lt;T, P&gt;): <span class="hljs-title class_">UseTableReturn</span>&lt;T&gt; {
  <span class="hljs-keyword">const</span> {
    request,
    defaultPagination = { <span class="hljs-attr">pageNum</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">pageSize</span>: <span class="hljs-number">10</span> },
    defaultSearchParams = {},
    defaultSortParams = {},
    immediate = <span class="hljs-literal">true</span>,
    paginationKey = { <span class="hljs-attr">current</span>: <span class="hljs-string">'pageNum'</span>, <span class="hljs-attr">size</span>: <span class="hljs-string">'pageSize'</span> },
    rowKey = <span class="hljs-string">'id'</span>,
    transformResponse,
    onError,
    onSuccess,
    beforeRequest
  } = options;

  <span class="hljs-comment">// åˆ†é¡µå­—æ®µåé…ç½®</span>
  <span class="hljs-keyword">const</span> pageKey = paginationKey?.<span class="hljs-property">current</span> || <span class="hljs-string">'pageNum'</span>;
  <span class="hljs-keyword">const</span> sizeKey = paginationKey?.<span class="hljs-property">size</span> || <span class="hljs-string">'pageSize'</span>;

  <span class="hljs-keyword">const</span> loading = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> tableData = ref&lt;<span class="hljs-title class_">TableData</span>&lt;T&gt;&gt;({
    <span class="hljs-attr">list</span>: [],
    <span class="hljs-attr">total</span>: <span class="hljs-number">0</span>
  });
  <span class="hljs-keyword">const</span> searchParams = ref&lt;<span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt;({ ...defaultSearchParams });
  <span class="hljs-keyword">const</span> pagination = ref&lt;<span class="hljs-title class_">PaginationParams</span>&gt;({
    <span class="hljs-attr">pageNum</span>: defaultPagination.<span class="hljs-property">pageNum</span> || <span class="hljs-number">1</span>,
    <span class="hljs-attr">pageSize</span>: defaultPagination.<span class="hljs-property">pageSize</span> || <span class="hljs-number">10</span>,
    <span class="hljs-attr">total</span>: defaultPagination.<span class="hljs-property">total</span>
  });
  <span class="hljs-keyword">const</span> sortParams = ref&lt;<span class="hljs-title class_">SortParams</span>&gt;({ ...defaultSortParams });
  <span class="hljs-keyword">const</span> selectedRowKeys = ref&lt;(<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[]&gt;([]);
  <span class="hljs-keyword">const</span> selectedRows = ref&lt;T[]&gt;([]);

  <span class="hljs-comment">// tableæ•°æ®</span>
  <span class="hljs-keyword">const</span> data = computed&lt;T[]&gt;(<span class="hljs-function">() =&gt;</span> tableData.<span class="hljs-property">value</span>.<span class="hljs-property">list</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> T[]);
  <span class="hljs-comment">// æ˜¯å¦æœ‰æ•°æ®</span>
  <span class="hljs-keyword">const</span> hasData = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> data.<span class="hljs-property">value</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>);

  <span class="hljs-comment">/**
   * è·å–è¡Œé”®
   */</span>
  <span class="hljs-keyword">const</span> getRowKey = (<span class="hljs-attr">record</span>: T): <span class="hljs-built_in">string</span> | <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> rowKey === <span class="hljs-string">'function'</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">rowKey</span>(record);
    }
    <span class="hljs-keyword">return</span> (record <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>)[rowKey];
  };

  <span class="hljs-comment">/**
   * æ„å»ºè¯·æ±‚å‚æ•°
   */</span>
  <span class="hljs-keyword">const</span> buildRequestParams = (): <span class="hljs-function"><span class="hljs-params">P</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> params = {
      ...searchParams.<span class="hljs-property">value</span>,
      [pageKey]: pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageNum</span>,
      [sizeKey]: pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageSize</span>
    } <span class="hljs-keyword">as</span> P;

    <span class="hljs-keyword">if</span> (sortParams.<span class="hljs-property">value</span>.<span class="hljs-property">field</span> &amp;&amp; sortParams.<span class="hljs-property">value</span>.<span class="hljs-property">order</span>) {
      (params <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">sortField</span> = sortParams.<span class="hljs-property">value</span>.<span class="hljs-property">field</span>;
      (params <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>).<span class="hljs-property">sortOrder</span> = sortParams.<span class="hljs-property">value</span>.<span class="hljs-property">order</span>;
    }

    <span class="hljs-keyword">return</span> params;
  };

  <span class="hljs-comment">/**
   * æ›´æ–°tableæ•°æ® å¦‚ï¼šåˆ é™¤ä¸€è¡Œæ•°æ®åï¼Œä¸æƒ³è§¦å‘è·å–åˆ—è¡¨çš„æ¥å£ï¼Œå¯é€šè¿‡æ­¤æ–¹æ³•æ‰‹åŠ¨æ›´æ–°æ•°æ®
   */</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateData</span> = (<span class="hljs-params">data: T[]</span>) =&gt; {
    tableData.<span class="hljs-property">value</span> = {
      ...tableData.<span class="hljs-property">value</span>,
      <span class="hljs-attr">list</span>: data
    };
  };

  <span class="hljs-comment">/**
   * æ‰§è¡Œæ•°æ®è¯·æ±‚
   */</span>
  <span class="hljs-keyword">const</span> fetchData = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    <span class="hljs-keyword">try</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;

      <span class="hljs-keyword">let</span> params = <span class="hljs-title function_">buildRequestParams</span>();

      <span class="hljs-comment">// è¯·æ±‚å‰å¤„ç†</span>
      <span class="hljs-keyword">if</span> (beforeRequest) {
        params = <span class="hljs-keyword">await</span> <span class="hljs-title function_">beforeRequest</span>(params);
      }

      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">request</span>(params);

      <span class="hljs-keyword">let</span> data = response;

      <span class="hljs-keyword">if</span> (transformResponse) {
        data = <span class="hljs-title function_">transformResponse</span>(response);
      }

      tableData.<span class="hljs-property">value</span> = {
        <span class="hljs-attr">list</span>: data.<span class="hljs-property">list</span> || [],
        <span class="hljs-attr">total</span>: data.<span class="hljs-property">total</span> || <span class="hljs-number">0</span>
      };

      pagination.<span class="hljs-property">value</span>.<span class="hljs-property">total</span> = tableData.<span class="hljs-property">value</span>.<span class="hljs-property">total</span>;

      onSuccess?.(tableData.<span class="hljs-property">value</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">TableData</span>&lt;T&gt;);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'useTable fetchData error:'</span>, error);
      <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•'</span>);
      onError?.(error);
    } <span class="hljs-keyword">finally</span> {
      loading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
    }
  };

  <span class="hljs-comment">/**
   * åˆ·æ–°æ•°æ®ï¼ˆä¿æŒå½“å‰åˆ†é¡µå’Œæœç´¢æ¡ä»¶ï¼‰
   */</span>
  <span class="hljs-keyword">const</span> refresh = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * é‡æ–°åŠ è½½æ•°æ®ï¼ˆé‡ç½®åˆ°ç¬¬ä¸€é¡µï¼‰
   */</span>
  <span class="hljs-keyword">const</span> reload = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageNum</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * æœç´¢
   */</span>
  <span class="hljs-keyword">const</span> search = <span class="hljs-keyword">async</span> (params?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    <span class="hljs-keyword">if</span> (params) {
      searchParams.<span class="hljs-property">value</span> = { ...searchParams.<span class="hljs-property">value</span>, ...params };
    }
    pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageNum</span> = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * é‡ç½®æœç´¢
   */</span>
  <span class="hljs-keyword">const</span> reset = <span class="hljs-keyword">async</span> (): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt; =&gt; {
    searchParams.<span class="hljs-property">value</span> = { ...defaultSearchParams };
    sortParams.<span class="hljs-property">value</span> = { ...defaultSortParams };
    pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageNum</span> = defaultPagination.<span class="hljs-property">pageNum</span>!;
    pagination.<span class="hljs-property">value</span>.<span class="hljs-property">pageSize</span> = defaultPagination.<span class="hljs-property">pageSize</span>!;
    selectedRowKeys.<span class="hljs-property">value</span> = [];
    selectedRows.<span class="hljs-property">value</span> = [];
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * è®¾ç½®åˆ†é¡µ
   */</span>
  <span class="hljs-keyword">const</span> setPagination = (<span class="hljs-attr">paginationParams</span>: <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">PaginationParams</span>&gt;): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(pagination.<span class="hljs-property">value</span>, paginationParams);
    <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * è®¾ç½®æ’åº
   */</span>
  <span class="hljs-keyword">const</span> setSortParams = (<span class="hljs-attr">sortParamsData</span>: <span class="hljs-title class_">SortParams</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    sortParams.<span class="hljs-property">value</span> = { ...sortParamsData };
    <span class="hljs-title function_">fetchData</span>();
  };

  <span class="hljs-comment">/**
   * è®¾ç½®é€‰ä¸­è¡Œ
   */</span>
  <span class="hljs-keyword">const</span> setSelectedRowKeys = (<span class="hljs-attr">keys</span>: (<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>)[]): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    selectedRowKeys.<span class="hljs-property">value</span> = keys;
    selectedRows.<span class="hljs-property">value</span> = (tableData.<span class="hljs-property">value</span>.<span class="hljs-property">list</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> T[]).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span>
      keys.<span class="hljs-title function_">includes</span>(<span class="hljs-title function_">getRowKey</span>(item))
    );
  };

  <span class="hljs-comment">/**
   * æ¸…ç©ºé€‰ä¸­
   */</span>
  <span class="hljs-keyword">const</span> clearSelection = (): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    selectedRowKeys.<span class="hljs-property">value</span> = [];
    selectedRows.<span class="hljs-property">value</span> = [];
  };

  <span class="hljs-comment">/**
   * Element Plus: è¡¨æ ¼æ’åºå˜æ›´äº‹ä»¶å¤„ç†
   */</span>
  <span class="hljs-keyword">const</span> onSortChange = (
    <span class="hljs-attr">payload</span>: { prop?: <span class="hljs-built_in">string</span>; order?: <span class="hljs-string">'ascending'</span> | <span class="hljs-string">'descending'</span> | <span class="hljs-literal">null</span> } | <span class="hljs-built_in">any</span>
  ): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> <span class="hljs-attr">prop</span>: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span> = payload?.<span class="hljs-property">prop</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">order</span>: <span class="hljs-string">'ascending'</span> | <span class="hljs-string">'descending'</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> = payload?.<span class="hljs-property">order</span>;
    <span class="hljs-keyword">if</span> (prop &amp;&amp; order) {
      <span class="hljs-title function_">setSortParams</span>({ <span class="hljs-attr">field</span>: prop, <span class="hljs-attr">order</span>: order === <span class="hljs-string">'ascending'</span> ? <span class="hljs-string">'ascend'</span> : <span class="hljs-string">'descend'</span> });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setSortParams</span>({});
    }
  };

  <span class="hljs-comment">/**
   * Element Plus: è¡¨æ ¼é€‰æ‹©å˜æ›´äº‹ä»¶å¤„ç†
   */</span>
  <span class="hljs-keyword">const</span> onSelectionChange = (<span class="hljs-attr">selection</span>: T[]): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> keys = selection.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-title function_">getRowKey</span>(item));
    <span class="hljs-title function_">setSelectedRowKeys</span>(keys);
  };

  <span class="hljs-comment">/**
   * Element Plus: åˆ†é¡µå½“å‰é¡µå˜æ›´äº‹ä»¶å¤„ç†
   */</span>
  <span class="hljs-keyword">const</span> onCurrentChange = (<span class="hljs-attr">current</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-title function_">setPagination</span>({ <span class="hljs-attr">pageNum</span>: current });
  };

  <span class="hljs-comment">/**
   * Element Plus: åˆ†é¡µæ¯é¡µæ¡æ•°å˜æ›´äº‹ä»¶å¤„ç†
   */</span>
  <span class="hljs-keyword">const</span> onSizeChange = (<span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">void</span> =&gt;</span> {
    <span class="hljs-title function_">setPagination</span>({ <span class="hljs-attr">pageSize</span>: size, <span class="hljs-attr">pageNum</span>: <span class="hljs-number">1</span> });
  };

  <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (immediate) {
      <span class="hljs-title function_">fetchData</span>();
    }
  });

  <span class="hljs-keyword">return</span> {
    data,
    hasData,
    loading,
    pagination,
    searchParams,
    sortParams,
    selectedRowKeys,
    <span class="hljs-attr">selectedRows</span>: selectedRows <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">Ref</span>&lt;T[]&gt;,
    refresh,
    reload,
    search,
    reset,
    updateData,
    setPagination,
    setSortParams,
    setSelectedRowKeys,
    clearSelection,
    getRowKey,
    onSortChange,
    onSelectionChange,
    onCurrentChange,
    onSizeChange
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> useTable;

</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatis-Plusè¸©å‘è¡€æ³ªå²ï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„å‘ï¼]]></title>    <link>https://juejin.cn/post/7576018857368485931</link>    <guid>https://juejin.cn/post/7576018857368485931</guid>    <pubDate>2025-11-24T10:33:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576018857368485931" data-draft-id="7576026767372058643" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatis-Plusè¸©å‘è¡€æ³ªå²ï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„å‘ï¼"/> <meta itemprop="keywords" content="MyBatis,Java,é¢è¯•"/> <meta itemprop="datePublished" content="2025-11-24T10:33:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/606586148237431"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatis-Plusè¸©å‘è¡€æ³ªå²ï¼šé‚£äº›å¹´æˆ‘ä»¬è¸©è¿‡çš„å‘ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/606586148237431/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è½¬è½¬æŠ€æœ¯å›¢é˜Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T10:33:57.000Z" title="Mon Nov 24 2025 10:33:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å‰è¨€</strong>ï¼šæˆ‘ä»¬åœ¨ç”Ÿäº§ç¯å¢ƒé‡Œè·‘MyBatis-Pluså¾ˆå¤šå¹´ï¼Œå‡ ä¹æŠŠèƒ½è¸©çš„å‘éƒ½è¸©è¿‡äº†ã€‚æ¯æ¬¡å‡ºäº‹æ•…ï¼Œéƒ½èƒ½è¿½æº¯åˆ°æˆ‘ä»¬å½“åˆä»¥ä¸ºâ€œæ¡†æ¶ä¼šå¸®å¿™æå®šâ€çš„æŸä¸ªç»†èŠ‚ã€‚äºæ˜¯æˆ‘ä»¬æŠŠè¿™äº›çœŸå®ç»å†å†™ä¸‹æ¥ï¼Œç”¨æ›´æ¥åœ°æ°”çš„æ–¹å¼èŠèŠæ ¹å› å’Œè§£æ³•ï¼Œå¸®ä½ å°‘ç†¬å‡ æ¬¡å¤œã€‚</p>
</blockquote>
<h2 data-id="heading-0">1ã€æ—¶ä»£èƒŒæ™¯ä¸ORMé€‰æ‹©</h2>
<h3 data-id="heading-1">1.1 äº’è”ç½‘æ—¶ä»£çš„æ•°æ®æŒ‘æˆ˜</h3>
<p>ä¸šåŠ¡é‡æš´æ¶¨ï¼Œæ•°æ®ä¹Ÿè·Ÿç€ç‹‚é£™ã€‚ç™¾ä¸‡çº§æ•°æ®åœ¨å‡ å¹´å‰è¿˜ç®—å¤§ï¼Œå¦‚ä»ŠåŠ¨ä¸åŠ¨å°±ä¸Šäº¿ã€‚ä¸æ­¤åŒæ—¶ï¼Œå¾®æœåŠ¡æ‹†åˆ†å¾—è¶Šæ¥è¶Šç»†ï¼Œæ•°æ®è®¿é—®å±‚å˜å¾—åˆåšåˆå¤æ‚ã€‚å¤§å®¶ä¸€è¾¹è¦è¿½æ–°éœ€æ±‚ï¼Œä¸€è¾¹åˆè¦å…¼é¡¾æ€§èƒ½ç¨³å®šã€‚æ²¡æœ‰è¶æ‰‹çš„å¼€å‘å·¥å…·ï¼Œæ ¹æœ¬é¡¶ä¸ä½èŠ‚å¥ã€‚</p>
<h3 data-id="heading-2">1.2 MyBatis-Plusçš„è¯ç”Ÿä¸å®šä½</h3>
<p>äºæ˜¯ï¼ŒJavaå›¢é˜Ÿå¼€å§‹åœ¨ORMä¸–ç•Œé‡Œä¸æ–­æ‰¾å¹³è¡¡ã€‚Hibernateå¤ªé‡ï¼ŒåŸç”ŸMyBatisåˆå¤ªå¤šæ‰‹å·¥æ´»ã€‚MyBatis-Plusæ­£æ˜¯åœ¨è¿™ç§â€œåˆæƒ³å¿«åˆæƒ³ç¨³â€çš„è¯‰æ±‚ä¸‹å‡ºç°çš„ã€‚å®ƒä¸æ˜¯ç®€å•çš„â€œè¯­æ³•ç³–â€ï¼Œè€Œæ˜¯ä¸€ä¸ª<strong>ä¸ºäº†ç”Ÿäº§ç¯å¢ƒè€Œç”Ÿçš„å¢å¼ºæ¡†æ¶</strong>ã€‚</p>
<p><strong>MyBatis-Plusçš„æ ¸å¿ƒä»·å€¼</strong>ï¼š</p>
<ul>
<li><strong>ç®€åŒ–å¼€å‘</strong>ï¼šCRUDéƒ½æœ‰å°è£…ï¼Œå°‘å†™å¾ˆå¤šSQLï¼Œæ‰‹æ›´è½»</li>
<li><strong>åŠŸèƒ½å¢å¼º</strong>ï¼šé€»è¾‘åˆ é™¤ã€è‡ªåŠ¨å¡«å……ã€ä¹è§‚é”ã€å¤šç§Ÿæˆ·ã€ä»£ç ç”Ÿæˆå™¨ç­‰éƒ½ç°æˆ</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå†…ç½®åˆ†é¡µã€æ€§èƒ½åˆ†æã€æ‰¹é‡ä¼˜åŒ–ã€ç¼“å­˜æ’ä»¶ï¼Œè·‘å¾—æ›´å¿«</li>
<li><strong>æ— ç¼é›†æˆ</strong>ï¼šå…¼å®¹MyBatisï¼Œè€é¡¹ç›®ä¹Ÿèƒ½æ…¢æ…¢æ›¿æ¢ï¼Œå‡ ä¹ä¸ç”¨é‡æ„</li>
</ul>
<p>è¿™äº›å–ç‚¹è®©MyBatis-Plusè¿…é€Ÿèµ°çº¢ã€‚ä¸è¿‡ï¼ŒåŠŸèƒ½å¤šå¹¶ä¸ç­‰äºå¥½ç”¨ã€‚ç‰¹åˆ«æ˜¯åˆ°äº†ç”Ÿäº§ç¯å¢ƒï¼Œéšè—çš„å‘ä¸€ä¸ªæ¥ä¸€ä¸ªã€‚</p>
<hr/>
<h2 data-id="heading-3">2ã€ç”Ÿäº§ç¯å¢ƒæŒ‘æˆ˜</h2>
<p>å¼€å‘ç¯å¢ƒé‡Œä¸€åˆ‡éƒ½å¾ˆé¡ºã€‚<code>saveBatch()</code>è½»æ¾æå®šæ‰¹é‡æ’å…¥ï¼Œ<code>@TableId(type = IdType.ASSIGN_ID)</code>ä¸€å†™å°±æœ‰åˆ†å¸ƒå¼IDï¼Œçœ‹èµ·æ¥ç¨³å¾—å¾ˆã€‚</p>
<p>ç„¶è€Œï¼ŒçœŸæ­£éƒ¨ç½²ä¸Šçº¿åé—®é¢˜æ‰æš´éœ²å‡ºæ¥ã€‚</p>
<p><strong>å‡Œæ™¨3ç‚¹çš„å‘Šè­¦</strong>ï¼šä¸»é”®å†²çªï¼Œè®¢å•ç³»ç»Ÿåœæ‘†ã€‚æˆ‘ä»¬å‘ç°ä¸¤ä¸ªå®¹å™¨å®ä¾‹ç”Ÿæˆäº†åŒä¸€ä¸ªé›ªèŠ±IDã€‚ç†è®ºä¸Šâ€œä¸å¯èƒ½å‘ç”Ÿâ€çš„äº‹ï¼Œå°±è¿™ä¹ˆå‘ç”Ÿäº†ã€‚</p>
<p>å†å¾€ä¸‹æ’æŸ¥ï¼Œæ‰¹é‡æ“ä½œä¹±åºã€æšä¸¾å­—æ®µå†™å…¥å¼‚å¸¸ã€è‡ªåŠ¨å¡«å……å¤±çµâ€¦â€¦é—®é¢˜ä¸€ä¸ªæ¯”ä¸€ä¸ªç¦»è°±ã€‚</p>
<p>è¿™äº›äº‹æ•…æœ‰ä¸ªå…±åŒç‚¹ï¼šå¼€å‘ç¯å¢ƒä¸€åˆ‡æ­£å¸¸ï¼Œç”Ÿäº§ç¯å¢ƒå´å´©æˆä¸€ç‰‡ã€‚æ ¹æœ¬åŸå› æ˜¯å•æœºå’Œåˆ†å¸ƒå¼ã€ä½å¹¶å‘å’Œé«˜å¹¶å‘ä¹‹é—´çš„å·®å¼‚ï¼Œè¢«æ¡†æ¶é»˜è®¤é…ç½®æ— é™æ”¾å¤§ï¼Œç»“æœå°±æ˜¯â€œçœ‹ç€æ²¡äº‹â€çš„ä»£ç åœ¨ç”Ÿäº§é‡Œé¢‘é¢‘æ‰é“¾å­ã€‚</p>
<p>æˆ‘ä»¬å› æ­¤æ•´ç†å‡ºMyBatis-Plusåœ¨ç”Ÿäº§ç¯å¢ƒæœ€å®¹æ˜“æš´é›·çš„6å¤§é™·é˜±ï¼š</p>
<ol>
<li><strong>é›ªèŠ±ç®—æ³•IDç”Ÿæˆé‡å¤é—®é¢˜</strong></li>
<li><strong>æ‰¹é‡æ’å…¥ä¹±åºé—®é¢˜</strong></li>
<li><strong>æšä¸¾å­—æ®µå­˜å‚¨é£é™©</strong></li>
<li><strong>é©¼å³°è½¬æ¢é”™ä½</strong></li>
<li><strong>æ‰¹é‡æ“ä½œæ—¶è‡ªåŠ¨å¡«å……å¤±æ•ˆ</strong></li>
<li><strong>å†™å…¥æ—¶JSONæ•°æ®ä¸¢å¤±æˆ–æ ¼å¼å¼‚å¸¸</strong></li>
</ol>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬æŠŠè¿™äº›é—®é¢˜é€ä¸€æ‹†å¼€ï¼ŒèŠèŠèƒŒåçš„é€»è¾‘ï¼Œå†ç»™å‡ºå®æµ‹å¯è¡Œçš„è§£æ³•ã€‚</p>
<hr/>
<h2 data-id="heading-4">é›ªèŠ±ç®—æ³•IDç”Ÿæˆé‡å¤é—®é¢˜</h2>
<h3 data-id="heading-5">3.1 é—®é¢˜ç°è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// çœ‹èµ·æ¥å¾ˆæ­£å¸¸çš„ä»£ç </span>
<span class="hljs-meta">@TableId(value = "id", type = IdType.ASSIGN_ID)</span>
<span class="hljs-keyword">private</span> Long id;

<span class="hljs-comment">// ä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å´å‡ºç°äº†è¿™æ ·çš„é”™è¯¯ï¼š</span>
<span class="hljs-comment">// Duplicate entry '1234567890123456789' for key 'PRIMARY'</span>
</code></pre>
<p><strong>â€œIDæ€ä¹ˆè¿˜èƒ½æ’ï¼Ÿâ€</strong> è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡é‡åˆ°æ—¶çš„çœŸå®ååº”ã€‚</p>
<h3 data-id="heading-6">3.2 é›ªèŠ±ç®—æ³•èº«ä»½è¯ç»“æ„</h3>
<p>å…ˆææ¸…æ¥šé›ªèŠ±IDé‡Œé¢è£…äº†ä»€ä¹ˆï¼Œå†è°ˆå¦‚ä½•é˜²é‡å¤ã€‚å¯ä»¥æŠŠå®ƒæƒ³æˆä¸€ä¸ª<strong>è¶…é•¿èº«ä»½è¯å·</strong>ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">èº«ä»½è¯å·ç ï¼š<span class="hljs-number">1234567890123456789</span>
åˆ†è§£ç»“æ„ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ—¶é—´æˆ³  â”‚ æ•°æ®ä¸­å¿ƒ â”‚ æœºå™¨ç¼–å· â”‚ åºåˆ—å·  â”‚
â”‚ (<span class="hljs-number">41</span>ä½)  â”‚ (<span class="hljs-number">5</span>ä½)   â”‚ (<span class="hljs-number">5</span>ä½)   â”‚ (<span class="hljs-number">12</span>ä½)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<ul>
<li><strong>æ—¶é—´æˆ³</strong>åƒå‡ºç”Ÿå¹´æœˆæ—¥</li>
<li><strong>æ•°æ®ä¸­å¿ƒID</strong>ç±»ä¼¼çœä»½</li>
<li><strong>æœºå™¨ID</strong>å¯¹åº”åŸå¸‚</li>
<li><strong>åºåˆ—å·</strong>å°±æ˜¯åŒä¸€æ¯«ç§’çš„æ’é˜Ÿå·</li>
</ul>
<h3 data-id="heading-7">3.3 é—®é¢˜æ ¹æº</h3>
<p>æˆ‘ä»¬æŠŠé›ªèŠ±IDé‡å¤çš„å…ƒå‡¶æ€»ç»“æˆå››ç±»ã€‚</p>
<h4 data-id="heading-8">3.3.1 å…ƒå‡¶ä¸€ï¼šæœªé…ç½®æœºå™¨IDï¼Œæ‰€æœ‰å®ä¾‹èµ°é»˜è®¤å€¼</h4>
<p>å¾ˆå¤šäººä»¥ä¸ºæ¡†æ¶ä¼šè‡ªåŠ¨ç®—å‡ºå”¯ä¸€çš„workerIdï¼Œäºæ˜¯å¹²è„†ä¸é…ã€‚ç»“æœå¤§å®¶éƒ½èµ°åŒä¸€ä¸ªé»˜è®¤æµç¨‹ã€‚</p>
<p><strong>MyBatis-Plusè·å–æœºå™¨IDçš„ç­–ç•¥</strong>ï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9379840880d14a11ac86b0fc9e9eb751~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585237&amp;x-signature=rVo4DnTclRpO28wXZg4WktiHOOw%3D" alt="yBatis-Plusè·å–æœºå™¨IDçš„ç­–ç•¥" loading="lazy"/></p>
<p>çœ‹ä¼¼ä¸¥è°¨ï¼Œç„¶è€Œä¸€æ—¦è¿›å…¥ç¬¬äºŒæ­¥ï¼Œå®¹å™¨ç¯å¢ƒä¸‹â€œæ’è½¦â€æ¦‚ç‡ç›´çº¿ä¸Šå‡ã€‚</p>
<h4 data-id="heading-9">3.3.2 å…ƒå‡¶äºŒï¼šå®¹å™¨ç¯å¢ƒçš„MACåœ°å€å…‹éš†</h4>
<p>å…ˆçœ‹Dockerå®¹å™¨MACåœ°å€çš„è§„å¾‹ï¼š</p>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-title class_">Docker</span>å®¹å™¨<span class="hljs-variable constant_">MAC</span>åœ°å€æ ¼å¼ï¼š<span class="hljs-number">02</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:XX</span>
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”¤
                     å›ºå®šå‰ç¼€      å˜åŒ–éƒ¨åˆ†

å®¹å™¨<span class="hljs-number">1</span>ï¼š<span class="hljs-number">02</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">02</span>
å®¹å™¨<span class="hljs-number">2</span>ï¼š<span class="hljs-number">02</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">03</span>  
å®¹å™¨<span class="hljs-number">3</span>ï¼š<span class="hljs-number">02</span><span class="hljs-symbol">:</span><span class="hljs-number">42</span><span class="hljs-symbol">:ac</span><span class="hljs-symbol">:</span><span class="hljs-number">11</span><span class="hljs-symbol">:</span><span class="hljs-number">00</span><span class="hljs-symbol">:</span><span class="hljs-number">04</span>
...
</code></pre>
<p>å¦‚æœç»§ç»­ä¾èµ–â€œå–åä¸¤å­—èŠ‚å†æ¨¡32â€çš„åšæ³•ï¼Œå°±ä¼šå‡ºç°ä¸‹é¢çš„æƒ…å†µï¼š</p>
<pre><code class="hljs language-ini" lang="ini">MACåœ°å€è®¡ç®—æµç¨‹ï¼š
1. æå–å2å­—èŠ‚ â†’ 00:02, 00:03, 00:04...
2. ä½è¿ç®—å¤„ç† â†’ å¾—åˆ°ä¸åŒçš„ä¸­é—´å€¼
3. æ¨¡32å–ä½™ â†’ é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œ

å®é™…ç»“æœï¼š
â”œâ”€ å®¹å™¨1-32ï¼šæœºå™¨<span class="hljs-attr">ID</span> = <span class="hljs-number">0</span>-<span class="hljs-number">31</span> âœ…
â”œâ”€ å®¹å™¨33ï¼šæœºå™¨<span class="hljs-attr">ID</span> = <span class="hljs-number">0</span> âŒ
â”œâ”€ å®¹å™¨34ï¼šæœºå™¨<span class="hljs-attr">ID</span> = <span class="hljs-number">1</span> âŒ
â””â”€ ä»¥æ­¤ç±»æ¨...
</code></pre>
<p>å¦‚æ­¤å¯è§ï¼Œåªè¦å®ä¾‹è¶…è¿‡32ä¸ªï¼Œå°±ä¸€å®šæœ‰é‡å¤ã€‚</p>
<h4 data-id="heading-10">3.3.3 å…ƒå‡¶ä¸‰ï¼šKubernetesç¯å¢ƒçš„è™šæ‹ŸMAC</h4>
<p>å†çœ‹K8sã€‚Podé‡Œçš„ç½‘ç»œæ¥å£æœ¬æ¥å°±æ˜¯è™šæ‹Ÿçš„ï¼ŒMACåœ°å€ç”±CNIéšæœºåˆ†é…ï¼Œè¿˜å¯èƒ½æ‹¿ä¸åˆ°ã€‚
Kubernetes Podç½‘ç»œç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ¯ä¸ªPodéƒ½æœ‰è™šæ‹Ÿç½‘ç»œæ¥å£</li>
<li>MACåœ°å€ç”±CNIæ’ä»¶åˆ†é…</li>
<li>åŒä¸€èŠ‚ç‚¹çš„Podå¯èƒ½æ¨¡å¼ä¸€è‡´</li>
<li>æŸäº›ç¯å¢ƒä¸‹å¹²è„†æ‹¿ä¸åˆ°MAC
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/63afa6655bd94b2ca6ac9bfd7dda7992~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585237&amp;x-signature=uGX5C86XExDhN7PM0P8614khjKk%3D" alt="yBatis-Plusè·å–æœºå™¨MACåœ°å€" loading="lazy"/></li>
</ol>
<p>è¿™ç§æƒ…å†µä¸‹ï¼Œ100ä¸ªPodå…¨ç”¨workerId=1ï¼Œå†²çªç›´æ¥æ‹‰æ»¡ã€‚</p>
<h4 data-id="heading-11">3.3.4 å…ƒå‡¶å››ï¼šæ—¶é’Ÿå›æ‹¨</h4>
<p>é›ªèŠ±ç®—æ³•éå¸¸ä¾èµ–ç³»ç»Ÿæ—¶é—´ã€‚ä¸€æ—¦æ—¶é’Ÿè¢«è°ƒå›ï¼Œå°±ä¼šé—¹å‡ºå¤§é—®é¢˜ã€‚</p>
<p>é›ªèŠ±IDç”Ÿæˆæµç¨‹å¦‚ä¸‹æ‰€ç¤ºï¼š
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7ba1c288dbad43a4851c820f8e746720~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585237&amp;x-signature=poCH4A8q1wGGZC2tuSp9QYgh4rE%3D" alt="é›ªèŠ±IDç”Ÿæˆæµç¨‹" loading="lazy"/>
ä½†æ˜¯ï¼Œå¦‚ä½•å‡ºç°æ—¶é’Ÿå›æ‹¨ï¼Œå°±ä¼šå‡ºç°å¦‚ä¸‹é—®é¢˜
<img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77e0b8d6b11f4e139f23c14a23bf4950~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6L2s6L2s5oqA5pyv5Zui6Zif:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764585237&amp;x-signature=BRn6Hp0DE6X808TLRaksxNXnstY%3D" alt="æ—¶é’Ÿå›æ‹¨" loading="lazy"/></p>
<p>å½“ä»¥ä¸‹æ¡ä»¶åŒæ—¶æ»¡è¶³æ—¶ï¼Œé‡å¤å°±æ— å¯é¿å…ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ç›¸åŒçš„æœºå™¨ID (<span class="hljs-attr">workerId</span>=<span class="hljs-number">1</span>)
ç›¸åŒçš„æ•°æ®ä¸­å¿ƒID (<span class="hljs-attr">datacenterId</span>=<span class="hljs-number">1</span>)  
ç›¸åŒçš„æ—¶é—´æˆ³ (<span class="hljs-attr">timestamp</span>=<span class="hljs-number">1634567890123</span>)
ç›¸åŒçš„åºåˆ—å· (<span class="hljs-attr">sequence</span>=<span class="hljs-number">0</span>)
</code></pre>
<h3 data-id="heading-12">3.4 è§£å†³æ–¹æ¡ˆï¼šç»™æ¯å°æœºå™¨ä¸€ä¸ªä¸“å±èº«ä»½è¯</h3>
<h4 data-id="heading-13">æ–¹æ¡ˆä¸€ï¼šå¤–éƒ¨è·å–å”¯ä¸€çš„åˆ†å¸ƒå¼ID</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IdHelper</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>   <span class="hljs-type">long</span> <span class="hljs-title function_">getIdc</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> ZZIdcClient.getInstance().get();
        } <span class="hljs-keyword">catch</span> (Throwable e) {
            log.error(<span class="hljs-string">"act=getIdc error={}"</span>, e.getMessage());
        }
        <span class="hljs-comment">// å…œåº•é€»è¾‘ï¼šä¸ºäº†ä¸å½±å“ä¸šåŠ¡ï¼Œå¦‚æœä»æ¶æ„æ‹¿ä¸åˆ°idï¼Œå°±é‡‡ç”¨IDHelper</span>
        <span class="hljs-comment">// IDHelperæœ‰é—®é¢˜ï¼Œå¹¶å‘æƒ…å†µä¸‹å¯èƒ½ä¼šç”Ÿæˆé‡å¤id</span>
        log.info(<span class="hljs-string">"k=s act=getIdcByIDHelper"</span>);
        <span class="hljs-keyword">return</span> IDHelper.generator(<span class="hljs-number">0</span>);
    }
}
</code></pre>
<h4 data-id="heading-14">æ–¹æ¡ˆäºŒï¼šä½¿ç”¨æ•°æ®åº“è‡ªå¢ID</h4>
<pre><code class="hljs language-java" lang="java">

<span class="hljs-keyword">package</span> com.baomidou.mybatisplus.annotation;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">IdType</span> {
    AUTO(<span class="hljs-number">0</span>),
    NONE(<span class="hljs-number">1</span>),
    INPUT(<span class="hljs-number">2</span>),
    ASSIGN_ID(<span class="hljs-number">3</span>),
    ASSIGN_UUID(<span class="hljs-number">4</span>),
    <span class="hljs-comment">/** <span class="hljs-doctag">@deprecated</span> */</span>
    <span class="hljs-meta">@Deprecated</span>
    ID_WORKER(<span class="hljs-number">3</span>),
    <span class="hljs-comment">/** <span class="hljs-doctag">@deprecated</span> */</span>
    <span class="hljs-meta">@Deprecated</span>
    ID_WORKER_STR(<span class="hljs-number">3</span>),
    <span class="hljs-comment">/** <span class="hljs-doctag">@deprecated</span> */</span>
    <span class="hljs-meta">@Deprecated</span>
    UUID(<span class="hljs-number">4</span>);
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> key;
}

    <span class="hljs-comment">/**
     * ä¸»é”®ID
     */</span>
    <span class="hljs-meta">@TableId(value = "id", type = IdType.AUTO)</span>
    <span class="hljs-keyword">private</span> Long id;
</code></pre>
<hr/>
<h2 data-id="heading-15">4ã€æ‰¹é‡æ’å…¥ä¹±åºé—®é¢˜</h2>
<h3 data-id="heading-16">4.1 é—®é¢˜ç°è±¡</h3>
<p>åœºæ™¯1ï¼šçˆ¶å­è®¢å•æ‰¹é‡æ’å…¥ã€‚å½“å­è®¢å•å‡†å¤‡å…¥åº“æ—¶ï¼Œçˆ¶è®¢å•è¿˜æ²¡å®Œæˆï¼Œå¤–é”®ç›´æ¥æŒ‚æ‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœŸæœ›ï¼šå…ˆæ’å…¥çˆ¶è®¢å•ï¼Œå†æ’å…¥å­è®¢å•</span>
heroPackageService.saveBatch(packages);  <span class="hljs-comment">// çˆ¶è®¢å•</span>
heroOrderService.saveBatch(orders);      <span class="hljs-comment">// å­è®¢å•</span>

<span class="hljs-comment">// ç»“æœï¼šå¤–é”®çº¦æŸå¤±è´¥ï¼</span>
<span class="hljs-comment">// Cannot add or update a child row: a foreign key constraint fails</span>
</code></pre>
<p>åœºæ™¯2ï¼šè¿œç¨‹æ¥å£è¿”å›ä¸€ä¸ªæœ‰åºåˆ—è¡¨ï¼Œæˆ‘ä»¬å­˜åˆ°æ•°æ®åº“é‡Œï¼Œæƒ³åœ¨åç»­æŸ¥è¯¢ä¸­ä¿æŒåŸæœ‰é¡ºåºï¼Œç»“æœè¿˜æ˜¯ä¹±äº†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æœŸæœ›ï¼šè¿œç¨‹è·å–æ•°æ®ä¹‹åï¼Œå­˜åœ¨æ•°æ®åº“ï¼Œåç»­ä»æ•°æ®åº“è·å–æœ‰åºåˆ—è¡¨çš„å¿«ç…§</span>
<span class="hljs-comment">//è¿œç¨‹è·å–å¤–éƒ¨æœ‰åºé›†åˆ</span>
List&lt;HeroPackage&gt; heroPackageList = recycleRpcService.getHeroPackageList(uid)
<span class="hljs-comment">//å°†è¿œç¨‹è·å–æ•°æ®å­˜å…¥æ•°æ®åº“</span>
heroPackageService.saveBatch(heroPackageList)
<span class="hljs-comment">//ä»æ•°æ®åº“è·å–æœ‰åºé›†åˆæ•°æ®</span>
List&lt;HeroPackage&gt; heroPackageList = heroPackageService.list(uid);


<span class="hljs-comment">// ç»“æœï¼šæœ‰åºé›†åˆçš„é¡ºåºè¢«æ‰“ä¹±</span>
<span class="hljs-comment">// </span>
</code></pre>
<p><strong>æ˜æ˜æ˜¯æŒ‰é¡ºåºè°ƒç”¨çš„ï¼Œä¸ºä»€ä¹ˆä¼šä¹±åºï¼Ÿ</strong></p>
<h3 data-id="heading-17">4.2 åŸç†</h3>
<p>å¯ä»¥æŠŠå®ƒæƒ³æˆå¿«é€’åˆ†æ‹£ã€‚ä½ æŒ‰é¡ºåºäº¤åŒ…è£¹ï¼Œåˆ†æ‹£ä¸­å¿ƒä¸ºäº†æ•ˆç‡ä¼šé‡æ’è·¯çº¿ï¼Œäºæ˜¯æœ€ç»ˆé¡ºåºå°±å˜äº†ã€‚</p>
<h4 data-id="heading-18">4.2.1 MyBatis-Plusçš„ä¸¤ç§æ‰¹é‡æ’å…¥æ¨¡å¼</h4>
<p>å®˜æ–¹å…¶å®æœ‰ä¸¤å¥—æ‰¹é‡é€»è¾‘ï¼Œå·®åˆ«éå¸¸å¤§ã€‚</p>
<h5 data-id="heading-19">æ¨¡å¼ä¸€ï¼šé»˜è®¤BATCHæ¨¡å¼ï¼ˆé€æ¡æ’å…¥ï¼‰</h5>
<p>MyBatis-Plusé»˜è®¤saveBatchçš„æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li>
<p>æ¥æ”¶æ•°æ®åˆ—è¡¨</p>
<ol>
<li>List packages (1000æ¡æ•°æ®)</li>
<li>é»˜è®¤æ‰¹æ¬¡å¤§å°ï¼š1000</li>
</ol>
</li>
<li>
<p>åˆ›å»ºæ‰¹å¤„ç†SqlSession</p>
<ol>
<li>ä½¿ç”¨ ExecutorType.BATCH</li>
<li>é€æ¡æ‰§è¡ŒINSERT</li>
</ol>
</li>
<li>
<p>é€æ¡åŠ å…¥æ‰¹å¤„ç†é˜Ÿåˆ—</p>
<ol>
<li>ç¬¬1æ¡ï¼šINSERT INTO hero_package VALUES (...)</li>
<li>ç¬¬2æ¡ï¼šINSERT INTO hero_package VALUES (...)</li>
<li>...</li>
<li>ç¬¬1000æ¡ï¼šINSERT INTO hero_package VALUES (...)</li>
</ol>
</li>
<li>
<p>è¾¾åˆ°æ‰¹æ¬¡å¤§å°å flushStatements()</p>
</li>
</ol>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ”¯æŒä¸»é”®å›å¡«</li>
<li>å•çº¿ç¨‹ä¸‹é¡ºåºå¯æ§</li>
<li>å¤šçº¿ç¨‹+é©±åŠ¨ä¼˜åŒ–åå®¹æ˜“ä¹±åº</li>
<li>ç½‘ç»œå¾€è¿”æ¬¡æ•°å¤šï¼Œæ€§èƒ½ä¸€èˆ¬</li>
</ol>
<h5 data-id="heading-20">æ¨¡å¼äºŒï¼šä¼˜åŒ–æ‰¹å¤„ç†æ¨¡å¼ï¼ˆåˆå¹¶SQLï¼‰</h5>
<p>é…ç½®æ–¹å¼ï¼šè¦ä¹ˆæ”¹å…¨å±€é…ç½®ï¼Œè¦ä¹ˆå†™è‡ªå®šä¹‰SQL</p>
<p>æ‰§è¡Œæµç¨‹ï¼š</p>
<ol>
<li>æ¥æ”¶åˆ—è¡¨</li>
<li>foreachæ‹¼æˆä¸€æ¡å¤šå€¼INSERT</li>
<li>ä¸€æ¬¡æ€§è½åº“</li>
</ol>
<p>ç‰¹ç‚¹ï¼š</p>
<ol>
<li>å•æ¬¡å¾€è¿”ï¼Œæ€§èƒ½é«˜</li>
<li>é¡ºåºå®Œå…¨å¯æ§</li>
<li>ä¸»é”®éœ€è¦è‡ªå·±å‡†å¤‡</li>
<li>SQLè¿‡é•¿æ—¶å¾—è‡ªè¡Œåˆ†æ‰¹</li>
</ol>
<p><strong>ä¸¤ç§æ¨¡å¼å¯¹æ¯”</strong>ï¼š</p>






























<table><thead><tr><th>ç‰¹æ€§</th><th>é»˜è®¤BATCHæ¨¡å¼</th><th>ä¼˜åŒ–æ‰¹å¤„ç†æ¨¡å¼</th></tr></thead><tbody><tr><td>æ€§èƒ½</td><td>å¤šæ¬¡å¾€è¿”ï¼Œé€Ÿåº¦ä¸€èˆ¬</td><td>å•æ¬¡å¾€è¿”ï¼Œæå¿«</td></tr><tr><td>é¡ºåºä¿è¯</td><td>å•çº¿ç¨‹å¯æ§ï¼Œå¤šçº¿ç¨‹ä¸ç¨³</td><td>å®Œå…¨å¯æ§</td></tr><tr><td>ä¸»é”®å›å¡«</td><td>æ”¯æŒ</td><td>ä¸æ”¯æŒ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>ä¾èµ–æ•°æ®åº“ç”Ÿæˆä¸»é”®</td><td>è‡ªå·±èƒ½ç”Ÿæˆä¸»é”®æˆ–æ— ä¸»é”®éœ€æ±‚</td></tr></tbody></table>
<h4 data-id="heading-21">4.2.2 æ ¹æœ¬åŸå› äºŒï¼šJDBCé©±åŠ¨çš„æ‰¹å¤„ç†é‡æ’åº</h4>
<p>MySQL JDBCé©±åŠ¨ä¸ºäº†æé€Ÿï¼Œä¼šæŠŠåŒè¡¨æ“ä½œåˆå¹¶ã€‚åŸæœ¬äº¤é”™çš„SQLè¢«é‡æ–°åˆ†ç»„ï¼Œé¡ºåºè‡ªç„¶å°±ä¹±äº†ã€‚</p>
<p>JDBCæ‰¹å¤„ç†æ¨¡å¼ï¼š</p>
<p>æ¨¡å¼1ï¼šrewriteBatchedStatements=false</p>
<ol>
<li>é€æ¡æ‰§è¡Œ</li>
<li>é¡ºåºç¨³å®š</li>
<li>æ€§èƒ½ä¸€èˆ¬</li>
</ol>
<p>æ¨¡å¼2ï¼šrewriteBatchedStatements=true</p>
<ol>
<li>è‡ªåŠ¨åˆå¹¶SQL</li>
<li>æ€§èƒ½é£™å‡</li>
<li>é¡ºåºå¯èƒ½è¢«â€œä¼˜åŒ–â€</li>
</ol>
<pre><code class="hljs language-sql" lang="sql">
ä¾‹å­ï¼š
åŸå§‹<span class="hljs-keyword">SQL</span>ï¼š
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_package <span class="hljs-keyword">VALUES</span> (..)
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_order <span class="hljs-keyword">VALUES</span> (..)
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_package <span class="hljs-keyword">VALUES</span> (..)
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_order <span class="hljs-keyword">VALUES</span> (..)

é©±åŠ¨ä¼˜åŒ–åï¼š
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_package <span class="hljs-keyword">VALUES</span> (...), (...)
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> hero_order <span class="hljs-keyword">VALUES</span> (...), (...)

</code></pre>
<p>é¡ºåºå½»åº•å˜äº†ã€‚</p>
<h4 data-id="heading-22">4.2.3 æ ¹æœ¬åŸå› ä¸‰ï¼šæ•°æ®åº“å±‚é¢çš„æ‰§è¡Œä¼˜åŒ–</h4>
<p>MySQLä¼˜åŒ–å™¨ä¹Ÿä¼šâ€œå¸®å¿™â€é‡æ’æ‰§è¡Œè®¡åˆ’ã€‚åŒä¸€å¼ è¡¨çš„æ“ä½œè¢«é›†ä¸­ï¼Œé¿å…é¢‘ç¹åˆ‡æ¢è¡¨ï¼Œæ€§èƒ½æ˜¯å¥½äº†ï¼Œä½†ä¾èµ–é¡ºåºçš„é€»è¾‘ç›´æ¥å´©ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">æœŸæœ›ï¼š
Package1 â†’ Order1 â†’ Package2 â†’ Order2

å®é™…ï¼š
Package1, Package2 â†’ Order1, Order2

ä¼˜åŒ–å™¨å¿ƒå£°ï¼š
æ—¢ç„¶éƒ½æ˜¯<span class="hljs-keyword">INSERT</span>ï¼Œå°±åˆ†ç»„å§
çœå¾—æ¥å›åˆ‡æ¢è¡¨         
</code></pre>
<p>é—®é¢˜åœ¨äºï¼ŒOrderå¼•ç”¨Packageçš„ä¸»é”®ã€‚å¦‚æœPackageè¿˜æ²¡è½åº“ï¼ŒOrderæ’å…¥å¿…å¤±è´¥ã€‚</p>
<p>ä¾‹å¦‚ä¸‹é¢çš„çœŸå®æ¡ˆä¾‹ã€‚ä¸¤ä¸ªçº¿ç¨‹å¹¶å‘åˆ›å»ºè®¢å•ã€‚æ‰¹å¤„ç†æ—¶é˜Ÿåˆ—ä¸ä¿è¯FIFOï¼Œäºæ˜¯è®¢å•é¡¹å’Œè®¢å•çš„å…³ç³»å…¨ä¹±å¥—ã€‚</p>
<p>æœŸæœ›ï¼š
è®¢å•A â†’ è®¢å•é¡¹A â†’ è®¢å•B â†’ è®¢å•é¡¹B</p>
<p>ç°å®ï¼š
çº¿ç¨‹Aã€çº¿ç¨‹BåŒæ—¶å†™å…¥
æ‰¹å¤„ç†é˜Ÿåˆ—äº¤é”™
é©±åŠ¨/æ•°æ®åº“é‡æ’
â†’ å¯èƒ½å…ˆæ‰§è¡Œçº¿ç¨‹Bçš„è®¢å•é¡¹ï¼Œå†æ‰§è¡Œçº¿ç¨‹Açš„
â†’ å¤–é”®å’Œä¸šåŠ¡é€»è¾‘å…¨ä¹±</p>
<h3 data-id="heading-23">4.3 è§£å†³æ–¹æ¡ˆï¼šæ§åˆ¶æ‰¹å¤„ç†èŠ‚å¥</h3>
<p>æˆ‘ä»¬å¸¸ç”¨ä¸¤ä¸ªæ€è·¯ï¼šè¦ä¹ˆâ€œåˆ†æ‰¹+å¼ºåˆ¶åˆ·æ–°â€ï¼Œè¦ä¹ˆâ€œè‡ªå®šä¹‰SQLä¸€æ¬¡å†™å®Œâ€ã€‚</p>
<h4 data-id="heading-24">æ–¹æ¡ˆä¸€ï¼šåˆ†æ‰¹æ¬¡æ‰§è¡Œï¼Œå¼ºåˆ¶åˆ·æ–°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Transactional</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">createOrdersInSequence</span><span class="hljs-params">(List&lt;OrderData&gt; orderDataList)</span> {
    <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; orderDataList.size(); i += batchSize) {
        List&lt;OrderData&gt; batch = orderDataList.subList(i, 
            Math.min(i + batchSize, orderDataList.size()));
        
        <span class="hljs-comment">// å…ˆæ’å…¥çˆ¶è®¢å•</span>
        List&lt;HeroPackage&gt; packages = buildPackages(batch);
        heroPackageService.saveBatch(packages);
        sqlSession.flushStatements(); <span class="hljs-comment">// å¼ºåˆ¶æ‰§è¡Œï¼Œç¡®ä¿é¡ºåº</span>
        
        <span class="hljs-comment">// å†æ’å…¥å­è®¢å•</span>
        List&lt;HeroOrder&gt; orders = buildOrders(batch);
        heroOrderService.saveBatch(orders);
        sqlSession.flushStatements();
    }
}
</code></pre>
<h4 data-id="heading-25">æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰SQLï¼Œä¸€æ¬¡æ€§æ’å…¥</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä½¿ç”¨è‡ªå®šä¹‰SQLï¼Œå®Œå…¨æ§åˆ¶æ‰§è¡Œé¡ºåº</span>
<span class="hljs-meta">@Insert({
    "&lt;script&gt;",
    "INSERT INTO hero_package (id, seller_uid, create_time) VALUES ",
    "&lt;foreach collection='packages' item='pkg' separator=','&gt;",
    "(#{pkg.id}, #{pkg.sellerUid}, #{pkg.createTime})",
    "&lt;/foreach&gt;",
    "&lt;/script&gt;"
})</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">insertPackageBatch</span><span class="hljs-params">(<span class="hljs-meta">@Param("packages")</span> List&lt;HeroPackage&gt; packages)</span>;
</code></pre>
<hr/>
<h2 data-id="heading-26">5ã€æšä¸¾å­—æ®µå­˜å‚¨é£é™©</h2>
<h3 data-id="heading-27">5.1 é—®é¢˜ç°è±¡ï¼šæšä¸¾å­—æ®µå­˜å‚¨å¼‚å¸¸</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æšä¸¾å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderStatus</span> {
    PENDING(<span class="hljs-number">1</span>, <span class="hljs-string">"å¾…å¤„ç†"</span>),
    PROCESSING(<span class="hljs-number">2</span>, <span class="hljs-string">"å¤„ç†ä¸­"</span>),
    COMPLETED(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²å®Œæˆ"</span>);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;
}

<span class="hljs-comment">// å®ä½“ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroOrder</span> {
    <span class="hljs-keyword">private</span> OrderStatus orderStatus; <span class="hljs-comment">// æœŸæœ›å­˜å‚¨codeå€¼(1,2,3)</span>
}

<span class="hljs-comment">// ç»“æœï¼šæ•°æ®åº“ä¸­å­˜å‚¨çš„æ˜¯æšä¸¾åç§°("PENDING", "PROCESSING", "COMPLETED")</span>
</code></pre>
<h3 data-id="heading-28">5.2 æ·±å…¥åŸç†ï¼šMyBatisçš„é»˜è®¤æšä¸¾å¤„ç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBatisé»˜è®¤çš„æšä¸¾å¤„ç†å™¨</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnumTypeHandler</span>&lt;E <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Enum</span>&lt;E&gt;&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTypeHandler</span>&lt;E&gt; {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNonNullParameter</span><span class="hljs-params">(PreparedStatement ps, <span class="hljs-type">int</span> i, E parameter, JdbcType jdbcType)</span> {
        <span class="hljs-comment">// é»˜è®¤ä½¿ç”¨æšä¸¾çš„name()æ–¹æ³•ï¼</span>
        ps.setString(i, parameter.name()); <span class="hljs-comment">// å­˜å‚¨"PENDING"è€Œä¸æ˜¯1</span>
    }
}
</code></pre>
<h3 data-id="heading-29">5.3 è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨@EnumValueæ³¨è§£</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">OrderStatus</span> {
    PENDING(<span class="hljs-number">1</span>, <span class="hljs-string">"å¾…å¤„ç†"</span>),
    PROCESSING(<span class="hljs-number">2</span>, <span class="hljs-string">"å¤„ç†ä¸­"</span>),
    COMPLETED(<span class="hljs-number">3</span>, <span class="hljs-string">"å·²å®Œæˆ"</span>);
    
    <span class="hljs-meta">@EnumValue</span> <span class="hljs-comment">// æ ‡è®°è¿™ä¸ªå­—æ®µç”¨äºæ•°æ®åº“å­˜å‚¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String desc;
    
    <span class="hljs-comment">// æ„é€ å‡½æ•°å’Œgetter...</span>
}
</code></pre>
<hr/>
<h2 data-id="heading-30">6ã€é©¼å³°è½¬æ¢é”™ä½</h2>
<h3 data-id="heading-31">6.1 é—®é¢˜ç°è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ•°æ®åº“å­—æ®µï¼šseller_uid, buyer_uid, create_time</span>
<span class="hljs-comment">// å®ä½“ç±»å­—æ®µï¼š</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroPackage</span> {
    <span class="hljs-keyword">private</span> Long sellerUid;    <span class="hljs-comment">// âœ… æ­£å¸¸æ˜ å°„</span>
    <span class="hljs-keyword">private</span> Long buyerUID;     <span class="hljs-comment">// âŒ æ˜ å°„å¤±è´¥ï¼</span>
    <span class="hljs-keyword">private</span> Date createTime;   <span class="hljs-comment">// âœ… æ­£å¸¸æ˜ å°„</span>
    <span class="hljs-keyword">private</span> String XMLData;    <span class="hljs-comment">// âŒ æ˜ å°„å¤±è´¥ï¼</span>
}
</code></pre>
<h3 data-id="heading-32">6.2 åŸç†</h3>
<p>MyBatis-Plusçš„é©¼å³°è½¬æ¢ç®—æ³•å¯¹è¿ç»­å¤§å†™å¾ˆæ— å¥ˆã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é©¼å³°è½¬æ¢ç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CamelCaseConverter</span> {
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">camelToUnderscore</span><span class="hljs-params">(String camelCase)</span> {
        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; camelCase.length(); i++) {
            <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> camelCase.charAt(i);
            <span class="hljs-keyword">if</span> (Character.isUpperCase(c)) {
                <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span>) result.append(<span class="hljs-string">'_'</span>);
                result.append(Character.toLowerCase(c));
            } <span class="hljs-keyword">else</span> {
                result.append(c);
            }
        }
        <span class="hljs-keyword">return</span> result.toString();
    }
}

<span class="hljs-comment">// è½¬æ¢ç»“æœï¼š</span>
<span class="hljs-comment">// sellerUid -&gt; seller_uid âœ…</span>
<span class="hljs-comment">// buyerUID -&gt; buyer_u_i_d âŒ (æœŸæœ›: buyer_uid)</span>
<span class="hljs-comment">// XMLData -&gt; x_m_l_data âŒ (æœŸæœ›: xml_data)</span>
</code></pre>
<h3 data-id="heading-33">6.3 è§£å†³æ–¹æ¡ˆï¼šæ˜ç¡®å­—æ®µæ˜ å°„</h3>
<h5 data-id="heading-34">æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨@TableFieldæ³¨è§£</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroPackage</span> {
    <span class="hljs-keyword">private</span> Long sellerUid;
    
    <span class="hljs-meta">@TableField("buyer_uid")</span>  <span class="hljs-comment">// æ˜ç¡®æŒ‡å®šæ•°æ®åº“å­—æ®µå</span>
    <span class="hljs-keyword">private</span> Long buyerUID;
    
    <span class="hljs-keyword">private</span> Date createTime;
    
    <span class="hljs-meta">@TableField("xml_data")</span>
    <span class="hljs-keyword">private</span> String XMLData;
}
</code></pre>
<h5 data-id="heading-35">æ–¹æ¡ˆäºŒï¼šç»Ÿä¸€å‘½åè§„èŒƒ</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ¨èçš„å‘½åè§„èŒƒ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroPackage</span> {
    <span class="hljs-keyword">private</span> Long sellerUid;     <span class="hljs-comment">// é©¼å³°å‘½åï¼Œé¿å…è¿ç»­å¤§å†™</span>
    <span class="hljs-keyword">private</span> Long buyerUid;      <span class="hljs-comment">// è€Œä¸æ˜¯buyerUID</span>
    <span class="hljs-keyword">private</span> Date createTime;
    <span class="hljs-keyword">private</span> String xmlData;     <span class="hljs-comment">// è€Œä¸æ˜¯XMLData</span>
}
</code></pre>
<h5 data-id="heading-36">æ–¹æ¡ˆä¸‰ï¼šè‡ªå®šä¹‰å‘½åç­–ç•¥</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MybatisPlusConfig</span> {
    
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> MybatisPlusInterceptor <span class="hljs-title function_">mybatisPlusInterceptor</span><span class="hljs-params">()</span> {
        <span class="hljs-type">MybatisPlusInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MybatisPlusInterceptor</span>();
        
        <span class="hljs-comment">// è‡ªå®šä¹‰å‘½åç­–ç•¥</span>
        <span class="hljs-type">GlobalConfig</span> <span class="hljs-variable">globalConfig</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalConfig</span>();
        globalConfig.setDbConfig(<span class="hljs-keyword">new</span> <span class="hljs-title class_">GlobalConfig</span>.DbConfig() {{
            <span class="hljs-comment">// è‡ªå®šä¹‰å­—æ®µå‘½åç­–ç•¥</span>
            setColumnFormat(<span class="hljs-string">"`%s`"</span>); <span class="hljs-comment">// å­—æ®µååŠ åå¼•å·ï¼Œé¿å…å…³é”®å­—å†²çª</span>
            setTableFormat(<span class="hljs-string">"`%s`"</span>);  <span class="hljs-comment">// è¡¨ååŠ åå¼•å·</span>
        }});
        
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-37">7ã€æ‰¹é‡æ“ä½œæ—¶è‡ªåŠ¨å¡«å……å¤±æ•ˆ</h2>
<h3 data-id="heading-38">7.1 é—®é¢˜ç°è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ç±»é…ç½®</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroOrder</span> {
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> Date createTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT_UPDATE)</span>  
    <span class="hljs-keyword">private</span> Date updateTime;
    
    <span class="hljs-meta">@TableField(fill = FieldFill.INSERT)</span>
    <span class="hljs-keyword">private</span> Long createBy;
}

<span class="hljs-comment">// è‡ªåŠ¨å¡«å……å¤„ç†å™¨</span>
<span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyMetaObjectHandler</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">MetaObjectHandler</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insertFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createTime"</span>, Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
        <span class="hljs-built_in">this</span>.strictInsertFill(metaObject, <span class="hljs-string">"createBy"</span>, Long.class, getCurrentUserId());
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateFill</span><span class="hljs-params">(MetaObject metaObject)</span> {
        <span class="hljs-built_in">this</span>.strictUpdateFill(metaObject, <span class="hljs-string">"updateTime"</span>, Date.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());
    }
}

<span class="hljs-comment">// é—®é¢˜ç°è±¡ï¼šæ‰¹é‡æ“ä½œæ—¶è‡ªåŠ¨å¡«å……å¤±æ•ˆï¼</span>
List&lt;HeroOrder&gt; orders = buildOrders();
heroOrderService.saveBatch(orders); <span class="hljs-comment">// createTimeå’ŒcreateByä¸ºnullï¼</span>
</code></pre>
<h3 data-id="heading-39">7.2 åŸç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBatis-Plusçš„è‡ªåŠ¨å¡«å……æœºåˆ¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultSqlSession</span> {
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(String statement, Object parameter)</span> {
        <span class="hljs-comment">// åªæœ‰é€šè¿‡MyBatis-Plusçš„insertæ–¹æ³•æ‰ä¼šè§¦å‘è‡ªåŠ¨å¡«å……</span>
        <span class="hljs-keyword">if</span> (parameter <span class="hljs-keyword">instanceof</span> BaseEntity) {
            metaObjectHandler.insertFill(parameter); <span class="hljs-comment">// è§¦å‘å¡«å……</span>
        }
        <span class="hljs-keyword">return</span> executor.update(statement, parameter);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">update</span><span class="hljs-params">(String statement, Object parameter)</span> {
        <span class="hljs-keyword">if</span> (parameter <span class="hljs-keyword">instanceof</span> BaseEntity) {
            metaObjectHandler.updateFill(parameter); <span class="hljs-comment">// è§¦å‘å¡«å……</span>
        }
        <span class="hljs-keyword">return</span> executor.update(statement, parameter);
    }
}

<span class="hljs-comment">// ä½†æ˜¯æ‰¹é‡æ“ä½œä½¿ç”¨çš„æ˜¯JDBCæ‰¹å¤„ç†</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveBatch</span><span class="hljs-params">(Collection&lt;T&gt; entityList)</span> {
    <span class="hljs-comment">// ç›´æ¥æ‰§è¡Œæ‰¹é‡SQLï¼Œè·³è¿‡äº†è‡ªåŠ¨å¡«å……é€»è¾‘ï¼</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">sql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"INSERT INTO table VALUES (?,?,?)"</span>;
    <span class="hljs-type">PreparedStatement</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> connection.prepareStatement(sql);
    <span class="hljs-keyword">for</span> (T entity : entityList) {
        <span class="hljs-comment">// æ²¡æœ‰è°ƒç”¨metaObjectHandler.insertFill()</span>
        ps.setObject(<span class="hljs-number">1</span>, entity.getId());
        ps.setObject(<span class="hljs-number">2</span>, entity.getName());
        ps.addBatch();
    }
    ps.executeBatch();
}
</code></pre>
<h3 data-id="heading-40">7.3 è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨å¡«å…… + æ‰¹é‡ä¼˜åŒ–</h3>
<h5 data-id="heading-41">æ–¹æ¡ˆä¸€ï¼šæ‰¹é‡æ“ä½œå‰æ‰‹åŠ¨å¡«å……</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnhancedOrderService</span> {
    
    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> MyMetaObjectHandler metaObjectHandler;
    
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">saveBatchWithFill</span><span class="hljs-params">(Collection&lt;HeroOrder&gt; entityList)</span> {
        <span class="hljs-comment">// æ‰‹åŠ¨è§¦å‘è‡ªåŠ¨å¡«å……</span>
        entityList.forEach(entity -&gt; {
            <span class="hljs-type">MetaObject</span> <span class="hljs-variable">metaObject</span> <span class="hljs-operator">=</span> SystemMetaObject.forObject(entity);
            metaObjectHandler.insertFill(metaObject);
        });
        
        <span class="hljs-comment">// ç„¶åæ‰§è¡Œæ‰¹é‡ä¿å­˜</span>
        <span class="hljs-keyword">return</span> heroOrderService.saveBatch(entityList);
    }
}
</code></pre>
<h5 data-id="heading-42">æ–¹æ¡ˆäºŒï¼šè‡ªå®šä¹‰æ‰¹é‡ä¿å­˜æ–¹æ³•</h5>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BatchSaveHelper</span> {
    
    <span class="hljs-keyword">public</span> &lt;T&gt; <span class="hljs-type">boolean</span> <span class="hljs-title function_">saveBatchWithAutoFill</span><span class="hljs-params">(Collection&lt;T&gt; entityList, 
                                           Class&lt;T&gt; entityClass,
                                           BaseMapper&lt;T&gt; mapper)</span> {
        <span class="hljs-keyword">if</span> (entityList.isEmpty()) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        
        <span class="hljs-comment">// è·å–å½“å‰ç”¨æˆ·å’Œæ—¶é—´</span>
        <span class="hljs-type">Long</span> <span class="hljs-variable">currentUserId</span> <span class="hljs-operator">=</span> getCurrentUserId();
        <span class="hljs-type">Date</span> <span class="hljs-variable">now</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();
        
        <span class="hljs-comment">// åå°„è®¾ç½®è‡ªåŠ¨å¡«å……å­—æ®µ</span>
        entityList.forEach(entity -&gt; {
            <span class="hljs-keyword">try</span> {
                setFieldValue(entity, <span class="hljs-string">"createTime"</span>, now);
                setFieldValue(entity, <span class="hljs-string">"updateTime"</span>, now);
                setFieldValue(entity, <span class="hljs-string">"createBy"</span>, currentUserId);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                log.warn(<span class="hljs-string">"è‡ªåŠ¨å¡«å……å¤±è´¥"</span>, e);
            }
        });
        
        <span class="hljs-comment">// åˆ†æ‰¹ä¿å­˜ï¼Œé¿å…SQLè¿‡é•¿</span>
        <span class="hljs-type">int</span> <span class="hljs-variable">batchSize</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
        List&lt;T&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(entityList);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; list.size(); i += batchSize) {
            List&lt;T&gt; batch = list.subList(i, Math.min(i + batchSize, list.size()));
            mapper.insertBatch(batch); <span class="hljs-comment">// è‡ªå®šä¹‰æ‰¹é‡æ’å…¥æ–¹æ³•</span>
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setFieldValue</span><span class="hljs-params">(Object obj, String fieldName, Object value)</span> 
            <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-type">Field</span> <span class="hljs-variable">field</span> <span class="hljs-operator">=</span> obj.getClass().getDeclaredField(fieldName);
        field.setAccessible(<span class="hljs-literal">true</span>);
        <span class="hljs-keyword">if</span> (field.get(obj) == <span class="hljs-literal">null</span>) { <span class="hljs-comment">// åªæœ‰ä¸ºnullæ—¶æ‰è®¾ç½®</span>
            field.set(obj, value);
        }
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-43">8ã€å†™å…¥æ—¶JSONæ•°æ®ä¸¢å¤±æˆ–æ ¼å¼å¼‚å¸¸</h2>
<h3 data-id="heading-44">8.1 é—®é¢˜ç°è±¡</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®ä½“ç±»å®šä¹‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeroPackage</span> {
    <span class="hljs-keyword">private</span> Long id;
    <span class="hljs-keyword">private</span> String packageName;
    
    <span class="hljs-comment">// JSONå­—æ®µå­˜å‚¨æ‰©å±•å±æ€§</span>
    <span class="hljs-keyword">private</span> Map&lt;String, Object&gt; extendInfo;
    <span class="hljs-keyword">private</span> List&lt;String&gt; tags;
}

<span class="hljs-comment">// ä¿å­˜æ•°æ®</span>
<span class="hljs-type">HeroPackage</span> <span class="hljs-variable">pkg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HeroPackage</span>();
pkg.setExtendInfo(Map.of(<span class="hljs-string">"color"</span>, <span class="hljs-string">"çº¢è‰²"</span>, <span class="hljs-string">"weight"</span>, <span class="hljs-number">1.5</span>));
pkg.setTags(Arrays.asList(<span class="hljs-string">"ç”µå­äº§å“"</span>, <span class="hljs-string">"äºŒæ‰‹"</span>, <span class="hljs-string">"9æˆæ–°"</span>));
heroPackageService.save(pkg);

<span class="hljs-comment">// æŸ¥è¯¢ç»“æœï¼šextendInfoå’Œtagså­—æ®µä¸ºnullï¼</span>
</code></pre>
<h3 data-id="heading-45">8.2 åŸç†</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// MyBatisé»˜è®¤åªèƒ½å¤„ç†åŸºæœ¬ç±»å‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DefaultTypeHandlerRegistry</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">DefaultTypeHandlerRegistry</span><span class="hljs-params">()</span> {
        register(String.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringTypeHandler</span>());
        register(Integer.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">IntegerTypeHandler</span>());
        register(Long.class, <span class="hljs-keyword">new</span> <span class="hljs-title class_">LongTypeHandler</span>());
        <span class="hljs-comment">// æ²¡æœ‰Mapå’ŒListçš„å¤„ç†å™¨ï¼</span>
    }
}

<span class="hljs-comment">// å¤æ‚å¯¹è±¡ä¼šè¢«toString()å¤„ç†</span>
Map&lt;String, Object&gt; map = Map.of(<span class="hljs-string">"key"</span>, <span class="hljs-string">"value"</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> map.toString(); <span class="hljs-comment">// "{key=value}" - ä¸æ˜¯æ ‡å‡†JSONï¼</span>
</code></pre>
<h3 data-id="heading-46">8.3 è§£å†³æ–¹æ¡ˆï¼šæ•°æ®ç±»å‹è§„èŒƒåŒ–å¤„ç†</h3>
<p>æˆ‘ä»¬çš„å…±è¯†æ˜¯ï¼šèƒ½ä¸ç”¨å¤æ‚å­—æ®µå°±åˆ«ç”¨ã€‚å¦‚æœå¿…é¡»ç”¨ï¼Œå°±è‡ªå·±ç®¡åºåˆ—åŒ–ã€‚</p>
<h5 data-id="heading-47">æ–¹æ¡ˆä¸€ï¼šæ•°æ®åº“å­—æ®µç±»å‹è§„èŒƒåŒ–</h5>
<ul>
<li>è¡¨é‡Œå°½é‡åªæ”¾åŸºæœ¬ç±»å‹</li>
<li>Mapã€Listå…ˆæ‹†æˆå…·ä½“å­—æ®µï¼Œæˆ–è€…è½¬æˆç‹¬ç«‹è¡¨</li>
<li>å¤æ‚åœºæ™¯åœ¨ä¸šåŠ¡å±‚å¤„ç†è½¬æ¢</li>
</ul>
<h5 data-id="heading-48">æ–¹æ¡ˆäºŒï¼šæ‰‹åŠ¨åºåˆ—åŒ–å¤„ç†</h5>
<ul>
<li>ç¡®å®éœ€è¦å­˜ç»“æ„åŒ–æ•°æ®æ—¶ï¼Œå…ˆåºåˆ—åŒ–æˆJSONå­—ç¬¦ä¸²</li>
<li>å­˜å…¥VARCHARæˆ–TEXT</li>
<li>æŸ¥è¯¢æ—¶å†ååºåˆ—åŒ–</li>
</ul>
<p><strong>å®æ–½å»ºè®®</strong>ï¼š
ä¼˜å…ˆèµ°æ–¹æ¡ˆä¸€ã€‚åªæœ‰åœ¨ä¸šåŠ¡å¼ºä¾èµ–åŠ¨æ€ç»“æ„æ—¶ï¼Œå†è€ƒè™‘æ–¹æ¡ˆäºŒï¼Œè®°å¾—å°è£…å¥½åºåˆ—åŒ–é€»è¾‘ï¼Œåˆ«æŠŠJSONå·¥å…·æ•£è½åœ¨ä¸šåŠ¡ä»£ç é‡Œã€‚</p>
<hr/>
<h2 data-id="heading-49">æ€»ç»“ä¸æ€è€ƒ</h2>
<p>ç§ç§æ¡ˆä¾‹éƒ½åœ¨æé†’æˆ‘ä»¬ï¼š<strong>æ¡†æ¶é»˜è®¤å€¼æ˜¯ç»™ç†æƒ³ç¯å¢ƒå‡†å¤‡çš„ï¼Œåˆ°äº†ç”Ÿäº§å°±å¾—é‡æ–°å®¡è§†</strong>ã€‚å¦‚æœä¸äº†è§£å†…éƒ¨æœºåˆ¶ï¼Œå°±å¾ˆå®¹æ˜“æ‰è¿›å‘é‡Œã€‚</p>
<p><strong>å¯ç¤ºä¸€ï¼šé»˜è®¤é…ç½®é ä¸ä½</strong><br/>
å¼€å‘ç¯å¢ƒé€šå¸¸æ˜¯å•æœºã€ä½å¹¶å‘ï¼Œé»˜è®¤é…ç½®è‡ªç„¶æ²¡é—®é¢˜ã€‚å¯ä¸€ä¸Šç”Ÿäº§ï¼Œå®¹å™¨åŒ–ã€åˆ†å¸ƒå¼ã€é«˜å¹¶å‘é½èšï¼Œé»˜è®¤å€¼ç¬é—´å˜æˆéšæ‚£ã€‚<strong>åˆ«æŒ‡æœ›æ¡†æ¶â€œè‡ªåŠ¨â€å¤„ç†æ‰€æœ‰è¾¹è§’æ–™</strong>ã€‚</p>
<p><strong>å¯ç¤ºäºŒï¼šæœºåˆ¶ç†è§£å°‘ä¸äº†</strong><br/>
åªæœ‰ææ¸…æ¥šæ¡†æ¶æ€ä¹ˆè¿è½¬ï¼Œæ‰èƒ½æå‰å‘ç°é£é™©ï¼›çœŸå‡ºäº‹æ—¶ï¼Œä¹Ÿèƒ½å¿«é€Ÿå®šä½ã€‚<strong>çŸ¥å…¶ç„¶è€Œä¸”è¦çŸ¥å…¶æ‰€ä»¥ç„¶</strong>ã€‚</p>
<p><strong>å¯ç¤ºä¸‰ï¼šæ–¹æ¡ˆè¦æœåŠ¡äºç¯å¢ƒ</strong><br/>
ä½ åœ¨ä»€ä¹ˆç¯å¢ƒé‡Œè·‘ï¼Œå°±å¾—é…ä»€ä¹ˆç­–ç•¥ã€‚å®¹å™¨ã€K8sã€äº‘åŸç”Ÿéƒ½åœ¨æŒ‘æˆ˜æ—§æœ‰å‡è®¾ã€‚<strong>æ²¡æœ‰é“¶å¼¹ï¼Œåªæœ‰é€‚é…</strong>ã€‚</p>
<blockquote>
<p>å…³äºä½œè€…ï¼Œæœ±æ´ªæ—­ï¼Œä¾ å®¢æ±‡Javaå¼€å‘å·¥ç¨‹å¸ˆã€‚</p>
</blockquote>
<blockquote>
<p>è½¬è½¬ç ”å‘ä¸­å¿ƒåŠä¸šç•Œå°ä¼™ä¼´ä»¬çš„æŠ€æœ¯å­¦ä¹ äº¤æµå¹³å°ï¼Œå®šæœŸåˆ†äº«ä¸€çº¿çš„å®æˆ˜ç»éªŒåŠä¸šç•Œå‰æ²¿çš„æŠ€æœ¯è¯é¢˜ã€‚
å…³æ³¨å…¬ä¼—å·ã€Œè½¬è½¬æŠ€æœ¯ã€ï¼ˆç»¼åˆæ€§ï¼‰ã€ã€Œå¤§è½¬è½¬FEã€ï¼ˆä¸“æ³¨äºFEï¼‰ã€ã€Œè½¬è½¬QAã€ï¼ˆä¸“æ³¨äºQAï¼‰ï¼Œæ›´å¤šå¹²è´§å®è·µï¼Œæ¬¢è¿äº¤æµåˆ†äº«~</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HTMLçš„Videoä»åŸºç¡€ä½¿ç”¨åˆ°é«˜çº§å®æˆ˜+å…¼å®¹çš„å®Œå…¨æŒ‡å—]]></title>    <link>https://juejin.cn/post/7575468252657303593</link>    <guid>https://juejin.cn/post/7575468252657303593</guid>    <pubDate>2025-11-24T00:59:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575468252657303593" data-draft-id="7569898158836432937" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HTMLçš„Videoä»åŸºç¡€ä½¿ç”¨åˆ°é«˜çº§å®æˆ˜+å…¼å®¹çš„å®Œå…¨æŒ‡å—"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2025-11-24T00:59:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¹å¤šå¤š"/> <meta itemprop="url" content="https://juejin.cn/user/747323639737191"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HTMLçš„Videoä»åŸºç¡€ä½¿ç”¨åˆ°é«˜çº§å®æˆ˜+å…¼å®¹çš„å®Œå…¨æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/747323639737191/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¹å¤šå¤š
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T00:59:50.000Z" title="Mon Nov 24 2025 00:59:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:2;font-weight:400;font-size:15px;overflow-x:hidden;color:#333;letter-spacing:1.2px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:.5rem solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c;margin:0 5px}.markdown-body a:active,.markdown-body a:hover{text-decoration:none;border-bottom:1.5px solid #3eaf7c}.markdown-body a[href^=http]:after{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04MzIgMTI4SDY0MHY2NGgxNDYuNzUyTDUyMS4zNzYgNDU3LjM3Nmw0NS4yNDggNDUuMjQ4TDgzMiAyMzcuMjQ4VjM4NGg2NFYxMjh6IiBmaWxsPSIjM2VhZjdjIi8+PHBhdGggZD0iTTc2OCA4MzJIMTkyVjI1NmgzNTJ2LTY0SDE2MGEzMiAzMiAwIDAwLTMyIDMydjY0MGEzMiAzMiAwIDAwMzIgMzJoNjQwYTMyIDMyIDAgMDAzMi0zMlY0ODBoLTY0djM1MnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");margin-left:2px}.markdown-body a[href^="#"]:before{content:"#"}.markdown-body table{display:inline-block!important;font-size:13px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c;border-collapse:collapse}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(153,255,188,.1)}.markdown-body td,.markdown-body th{padding:4px 8px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#7b7878;padding:1px 23px;border-left:.5rem solid;border-color:#42b983;background-color:rgba(66,184,131,.1);position:relative;margin:14px 8px 0}.markdown-body blockquote:before{display:inline-block;position:absolute;content:url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjUiIGhlaWdodD0iMjUiIHZpZXdCb3g9IjAgMCAyNyAyNyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjg2MiAxLjg2MikiIGZpbGwtcnVsZT0ibm9uemVybyIgZmlsbD0ibm9uZSI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIHN0cm9rZS13aWR0aD0iMS43MjQiIGZpbGw9IiM0MkI5ODMiIGN4PSIxMS42MzgiIGN5PSIxMS42MzgiIHI9IjExLjYzOCIvPjxwYXRoIGQ9Ik0xNC45NzggNi4yN0E1LjAwNiA1LjAwNiAwIDAwNi42NyA5LjQ2OGE0LjkwMSA0LjkwMSAwIDAwMS43NzMgNC4zNjJjLjMyMy4yNTguNTE0LjY0Ny41MjIgMS4wNnYxLjA2YTIuNjg1IDIuNjg1IDAgMDA1LjM3IDB2LTEuMDA4Yy4wMDItLjM5OC4xNzMtLjc3Ny40Ny0xLjA0MmE1LjAyMyA1LjAyMyAwIDAwLjE3My03LjYzem0tMy4zMzcgMTAuOTY3YTEuMzA0IDEuMzA0IDAgMDEtMS4yODYtMS4yODd2LS4yNzhoMi41NzJ2LjI2MWMwIC43MTMtLjU3MyAxLjI5NC0xLjI4NiAxLjMwNHptMi4yNi00LjQxNWMtLjQ0LjM4My0uNzUuODkzLS44ODcgMS40NmgtMi43NDZhMi44NjggMi44NjggMCAwMC0uOTM4LTEuNTNoLS4wMThhMy40NzYgMy40NzYgMCAwMS0xLjI2OS0zLjE0NSAzLjYxNSAzLjYxNSAwIDAxNy4xOTYuNCAzLjY1IDMuNjUgMCAwMS0xLjMzOCAyLjgxNXoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+");width:25px;height:25px;left:-16px;top:12px}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none;padding-left:10px}.markdown-body ul li::marker{content:"â€¢";color:#3eaf7c}.markdown-body ul li.task-list-item:before{content:"";margin-right:0}.markdown-body input[type=checkbox]{vertical-align:text-bottom;box-shadow:inset 0 0 0 10px #fff}.markdown-body input[type=checkbox]:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik04NzcuMDU2IDE0Ni45NDR2NzMwLjExMkgxNDYuOTQ0VjE0Ni45NDRoNzMwLjExMnptMC0xMDQuMjc3SDE0Ni45NDRjLTU3LjYyOCAwLTEwNC4yNzcgNDYuNjQ5LTEwNC4yNzcgMTA0LjI3N3Y3MzAuMTEyYzAgNTcuNjI4IDQ2LjY0OSAxMDQuMjc3IDEwNC4yNzcgMTA0LjI3N2g3MzAuMTEyYzU3LjYyOCAwIDEwNC4yNzctNDYuNjQ5IDEwNC4yNzctMTA0LjI3N1YxNDYuOTQ0YzAtNTcuNjI4LTQ2LjY0OS0xMDQuMjc3LTEwNC4yNzctMTA0LjI3N3oiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}.markdown-body input[type=checkbox]:checked:before{content:url("data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTUiIGhlaWdodD0iMTUiPjxkZWZzPjxzdHlsZS8+PC9kZWZzPjxwYXRoIGQ9Ik05MTAuMjA4IDBIMTEzLjc2QTExNC4xMTIgMTE0LjExMiAwIDAwLS4wMzIgMTEzLjc5MlY5MTAuMjRjMCA2Mi41OTIgNTEuMiAxMTMuNzkyIDExMy43OTIgMTEzLjc5Mmg3OTYuNDQ4YzYyLjU5MiAwIDExMy43OTItNTEuMiAxMTMuNzkyLTExMy43OTJWMTEzLjc5MkMxMDI0IDUxLjIgOTcyLjggMCA5MTAuMjA4IDB6bS01MTIgNzk2LjQ0OEwxMTMuNzYgNTEybDc5LjY0OC03OS42NDggMjA0LjggMjA0LjhMODMwLjU2IDIwNC44bDc5LjY0OCA3OS42NDgtNTEyIDUxMnoiIGZpbGw9IiMzZWFmN2MiLz48L3N2Zz4=");position:relative;top:-2px;right:2px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><p>HTML5 çš„ <code>&lt;video&gt;</code> æ ‡ç­¾å½»åº•æ”¹å˜äº†ç½‘é¡µè§†é¢‘æ’­æ”¾çš„å®ç°æ–¹å¼â€”â€”æ— éœ€ä¾èµ– Flash ç­‰ç¬¬ä¸‰æ–¹æ’ä»¶ï¼ŒåŸç”Ÿæ”¯æŒè·¨å¹³å°è§†é¢‘æ’­æ”¾ï¼Œå…¼å…·è½»é‡æ€§ä¸æ‰©å±•æ€§ã€‚æœ¬æ–‡å°†ä»æ ‡ç­¾åŸºç¡€ã€API è¯¦è§£ã€äº‹ä»¶ä½“ç³»ã€æ ·å¼æ§åˆ¶ã€å…¼å®¹æ€§å¤„ç†ç­‰ç»´åº¦ï¼Œå…¨é¢è§£æ <code>&lt;video&gt;</code> æ ‡ç­¾çš„æŠ€æœ¯ç»†èŠ‚ä¸å®æˆ˜æŠ€å·§ã€‚</p>
<h2 data-id="heading-0">1. æ ¸å¿ƒç”¨æ³•ä¸å±æ€§</h2>
<p>ä¸‹é¢æ˜¯æ ‡ç­¾çš„æ ¸å¿ƒç”¨æ³•ä¸å±æ€§ï¼š</p>
<h3 data-id="heading-1">1.1. åŸºæœ¬è¯­æ³•ç»“æ„</h3>
<p><code>&lt;video&gt;</code> æ ‡ç­¾çš„æ ¸å¿ƒä½œç”¨æ˜¯åµŒå…¥è§†é¢‘èµ„æºï¼Œæœ€ç®€ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- åŸºç¡€ç”¨æ³•ï¼šæŒ‡å®šè§†é¢‘æºä¸åŸºç¡€æ§åˆ¶ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">width</span>=<span class="hljs-string">"640"</span> <span class="hljs-attr">height</span>=<span class="hljs-string">"360"</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- é™çº§æç¤ºï¼šæµè§ˆå™¨ä¸æ”¯æŒ video æ ‡ç­¾æ—¶æ˜¾ç¤º --&gt;</span>
  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ HTML5 è§†é¢‘æ’­æ”¾ï¼Œè¯·å‡çº§æµè§ˆå™¨æˆ–æ›´æ¢è§‚çœ‹æ–¹å¼ã€‚
<span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
</code></pre>
<h3 data-id="heading-2">1.2. æ ¸å¿ƒå±æ€§è¯¦è§£</h3>




























































<table><thead><tr><th>å±æ€§å</th><th>å–å€¼</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>src</code></td><td>è§†é¢‘æ–‡ä»¶ URL</td><td>æŒ‡å®šå•ä¸ªè§†é¢‘æºï¼ˆä¼˜å…ˆæ¨èä½¿ç”¨ <code>&lt;source&gt;</code> æ ‡ç­¾é€‚é…å¤šæ ¼å¼ï¼‰</td></tr><tr><td><code>controls</code></td><td>å¸ƒå°”å€¼ï¼ˆçœç•¥åˆ™ç”Ÿæ•ˆï¼‰</td><td>æ˜¾ç¤ºæµè§ˆå™¨åŸç”Ÿæ§åˆ¶æ ï¼ˆæ’­æ”¾/æš‚åœã€éŸ³é‡ã€è¿›åº¦æ¡ç­‰ï¼‰</td></tr><tr><td><code>autoplay</code></td><td>å¸ƒå°”å€¼</td><td>é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨æ’­æ”¾ï¼ˆæ³¨æ„ï¼šå¤šæ•°æµè§ˆå™¨è¦æ±‚é™éŸ³æ‰èƒ½è‡ªåŠ¨æ’­æ”¾ï¼‰</td></tr><tr><td><code>muted</code></td><td>å¸ƒå°”å€¼</td><td>è§†é¢‘é»˜è®¤é™éŸ³</td></tr><tr><td><code>loop</code></td><td>å¸ƒå°”å€¼</td><td>è§†é¢‘æ’­æ”¾å®Œæ¯•åè‡ªåŠ¨å¾ªç¯</td></tr><tr><td><code>preload</code></td><td><code>auto</code>/<code>metadata</code>/<code>none</code></td><td>é¢„åŠ è½½ç­–ç•¥ï¼š<br/>- <code>auto</code>ï¼šè‡ªåŠ¨é¢„åŠ è½½æ•´ä¸ªè§†é¢‘ï¼ˆé»˜è®¤ï¼‰<br/>- <code>metadata</code>ï¼šä»…é¢„åŠ è½½å…ƒæ•°æ®ï¼ˆæ—¶é•¿ã€å°ºå¯¸ç­‰ï¼‰<br/>- <code>none</code>ï¼šä¸é¢„åŠ è½½ä»»ä½•å†…å®¹</td></tr><tr><td><code>poster</code></td><td>å›¾ç‰‡ URL</td><td>è§†é¢‘åŠ è½½å®Œæˆå‰/æœªæ’­æ”¾æ—¶æ˜¾ç¤ºçš„å°é¢å›¾</td></tr><tr><td><code>width</code>/<code>height</code></td><td>åƒç´ å€¼ï¼ˆå¦‚ <code>640</code>ï¼‰</td><td>è§†é¢‘æ’­æ”¾å™¨çš„å®½é«˜ï¼ˆå»ºè®®é€šè¿‡ CSS æ§åˆ¶ï¼Œæ›´çµæ´»ï¼‰</td></tr><tr><td><code>playsinline</code></td><td>å¸ƒå°”å€¼</td><td>å…è®¸è§†é¢‘åœ¨é¡µé¢å†…æ’­æ”¾ï¼ˆè€Œéå…¨å±ï¼Œç§»åŠ¨ç«¯å¿…å¤‡ï¼‰</td></tr><tr><td><code>webkit-playsinline</code></td><td>å¸ƒå°”å€¼</td><td>iOS Safari å…¼å®¹å±æ€§ï¼ˆä¸ <code>playsinline</code> é…åˆä½¿ç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-3">1.3. å¤šæ ¼å¼é€‚é…ï¼š æ ‡ç­¾</h3>
<p>ä¸åŒæµè§ˆå™¨å¯¹è§†é¢‘æ ¼å¼æ”¯æŒå­˜åœ¨å·®å¼‚ï¼ˆå¦‚ MP4 å…¼å®¹æ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒWebM ä½“ç§¯æ›´å°ä½†å…¼å®¹æ€§è¾ƒå·®ï¼‰ï¼Œéœ€é€šè¿‡ <code>&lt;source&gt;</code> æ ‡ç­¾æä¾›å¤šæ ¼å¼å¤‡é€‰ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">controls</span> <span class="hljs-attr">poster</span>=<span class="hljs-string">"cover.jpg"</span> <span class="hljs-attr">playsinline</span> <span class="hljs-attr">webkit-playsinline</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æµè§ˆå™¨ä¼šæŒ‰é¡ºåºé€‰æ‹©æ”¯æŒçš„æ ¼å¼ --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/mp4"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.webm"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/webm"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.ogg"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"video/ogg"</span>&gt;</span>
  æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ HTML5 è§†é¢‘æ’­æ”¾ï¼Œè¯·å‡çº§æµè§ˆå™¨ã€‚
<span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
</code></pre>
<p><strong>æ¨èæ ¼å¼ç»„åˆ</strong>ï¼šMP4ï¼ˆä¸»æ ¼å¼ï¼‰+ WebMï¼ˆå¤‡é€‰ï¼‰ï¼Œè¦†ç›– 99% ä»¥ä¸Šç°ä»£æµè§ˆå™¨ã€‚</p>
<h2 data-id="heading-4">2. æ ¸å¿ƒ APIï¼šé€šè¿‡JavaScriptæ§åˆ¶</h2>
<p><code>&lt;video&gt;</code> å…ƒç´ æš´éœ²äº†ä¸°å¯Œçš„ JavaScript APIï¼Œå¯å®ç°è‡ªå®šä¹‰æ’­æ”¾é€»è¾‘ã€çŠ¶æ€æŸ¥è¯¢ç­‰åŠŸèƒ½ã€‚è·å–è§†é¢‘å…ƒç´ åå³å¯è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'video'</span>); <span class="hljs-comment">// è·å–è§†é¢‘å…ƒç´ </span>
</code></pre>
<h3 data-id="heading-5">2.1. æ ¸å¿ƒæ–¹æ³•</h3>





























<table><thead><tr><th>æ–¹æ³•å</th><th>åŠŸèƒ½è¯´æ˜</th></tr></thead><tbody><tr><td><code>play()</code></td><td>å¼€å§‹æ’­æ”¾è§†é¢‘ï¼Œè¿”å› Promiseï¼ˆéœ€å¤„ç†æ’­æ”¾å¤±è´¥åœºæ™¯ï¼‰</td></tr><tr><td><code>pause()</code></td><td>æš‚åœæ’­æ”¾è§†é¢‘</td></tr><tr><td><code>load()</code></td><td>é‡æ–°åŠ è½½è§†é¢‘èµ„æºï¼ˆå¸¸ç”¨äºåˆ‡æ¢è§†é¢‘æºåï¼‰</td></tr><tr><td><code>canPlayType(type)</code></td><td>æ£€æµ‹æµè§ˆå™¨æ˜¯å¦æ”¯æŒæŒ‡å®šè§†é¢‘æ ¼å¼ï¼ˆè¿”å› <code>probably</code>/<code>maybe</code>/<code>""</code>ï¼‰</td></tr><tr><td><code>requestFullscreen()</code></td><td>è¿›å…¥å…¨å±æ¨¡å¼ï¼ˆéœ€å…¼å®¹å‰ç¼€ï¼š<code>webkitRequestFullscreen</code> ç­‰ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-6">2.2. å…³é”®å±æ€§ï¼ˆå¯è¯»å†™/åªè¯»ï¼‰</h3>
<h4 data-id="heading-7">ï¼ˆ1ï¼‰å¯è¯»å†™å±æ€§ï¼ˆæ§åˆ¶è§†é¢‘è¡Œä¸ºï¼‰</h4>



































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>currentTime</code></td><td>Number</td><td>å½“å‰æ’­æ”¾ä½ç½®ï¼ˆç§’ï¼‰ï¼Œå¯è®¾ç½®è·³è½¬</td></tr><tr><td><code>volume</code></td><td>Number</td><td>éŸ³é‡ï¼ˆ0~1ï¼Œ0 ä¸ºé™éŸ³ï¼Œ1 ä¸ºæœ€å¤§éŸ³é‡ï¼‰</td></tr><tr><td><code>playbackRate</code></td><td>Number</td><td>æ’­æ”¾é€Ÿç‡ï¼ˆ1 ä¸ºæ­£å¸¸ï¼Œ0.5 ä¸ºæ…¢æ”¾ï¼Œ2 ä¸ºå¿«æ”¾ï¼‰</td></tr><tr><td><code>muted</code></td><td>Boolean</td><td>è®¾ç½®æ˜¯å¦é™éŸ³ï¼ˆä¸æ ‡ç­¾å±æ€§ä¸€è‡´ï¼‰</td></tr><tr><td><code>loop</code></td><td>Boolean</td><td>è®¾ç½®æ˜¯å¦å¾ªç¯ï¼ˆä¸æ ‡ç­¾å±æ€§ä¸€è‡´ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-8">ï¼ˆ2ï¼‰åªè¯»å±æ€§ï¼ˆè·å–è§†é¢‘çŠ¶æ€ï¼‰</h4>








































<table><thead><tr><th>å±æ€§å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>duration</code></td><td>Number</td><td>è§†é¢‘æ€»æ—¶é•¿ï¼ˆç§’ï¼‰ï¼ŒæœªåŠ è½½å®Œæˆæ—¶ä¸º NaN</td></tr><tr><td><code>paused</code></td><td>Boolean</td><td>æ˜¯å¦å¤„äºæš‚åœçŠ¶æ€ï¼ˆtrue ä¸ºæš‚åœï¼‰</td></tr><tr><td><code>playing</code></td><td>Boolean</td><td>æ˜¯å¦æ­£åœ¨æ’­æ”¾ï¼ˆH5 æ–°å¢ï¼Œéœ€å…¼å®¹ï¼‰</td></tr><tr><td><code>buffered</code></td><td>TimeRanges</td><td>å·²ç¼“å†²çš„æ—¶é—´èŒƒå›´ï¼ˆé€šè¿‡ <code>buffered.start(0)</code>/<code>buffered.end(0)</code> è·å–ï¼‰</td></tr><tr><td><code>readyState</code></td><td>Number</td><td>è§†é¢‘å°±ç»ªçŠ¶æ€ï¼š<br/>0 = æœªå°±ç»ª<br/>1 = å…ƒæ•°æ®å°±ç»ª<br/>2 = å½“å‰å¸§å°±ç»ª<br/>3 = å¯æ’­æ”¾ï¼ˆå·²ç¼“å†²éƒ¨åˆ†å†…å®¹ï¼‰<br/>4 = å®Œå…¨å°±ç»ª</td></tr><tr><td><code>networkState</code></td><td>Number</td><td>ç½‘ç»œçŠ¶æ€ï¼š<br/>0 = æœªåˆå§‹åŒ–<br/>1 = æ­£åœ¨åŠ è½½<br/>2 = åŠ è½½å®Œæˆ<br/>3 = åŠ è½½å¤±è´¥</td></tr></tbody></table>
<h3 data-id="heading-9">2.3. API å®æˆ˜ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'video'</span>);

<span class="hljs-comment">// 1. æ’­æ”¾/æš‚åœåˆ‡æ¢</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'playBtn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (video.<span class="hljs-property">paused</span>) {
    <span class="hljs-comment">// å¤„ç†è‡ªåŠ¨æ’­æ”¾é™åˆ¶ï¼ˆéœ€é™éŸ³æˆ–ç”¨æˆ·äº¤äº’åï¼‰</span>
    video.<span class="hljs-title function_">play</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ’­æ”¾å¤±è´¥ï¼š'</span>, err);
      video.<span class="hljs-property">muted</span> = <span class="hljs-literal">true</span>;
      video.<span class="hljs-title function_">play</span>(); <span class="hljs-comment">// é™éŸ³åé‡è¯•è‡ªåŠ¨æ’­æ”¾</span>
    });
  } <span class="hljs-keyword">else</span> {
    video.<span class="hljs-title function_">pause</span>();
  }
});

<span class="hljs-comment">// 2. è·³è½¬è‡³æŒ‡å®šæ—¶é—´ï¼ˆå¦‚ 30 ç§’ï¼‰</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'jumpBtn'</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  video.<span class="hljs-property">currentTime</span> = <span class="hljs-number">30</span>;
});

<span class="hljs-comment">// 3. è°ƒæ•´éŸ³é‡ï¼ˆ50%ï¼‰</span>
video.<span class="hljs-property">volume</span> = <span class="hljs-number">0.5</span>;

<span class="hljs-comment">// 4. å¿«æ”¾ï¼ˆ1.5 å€é€Ÿï¼‰</span>
video.<span class="hljs-property">playbackRate</span> = <span class="hljs-number">1.5</span>;

<span class="hljs-comment">// 5. æ£€æµ‹æ ¼å¼æ”¯æŒ</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'MP4 æ”¯æŒï¼š'</span>, video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/mp4'</span>) !== <span class="hljs-string">''</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'WebM æ”¯æŒï¼š'</span>, video.<span class="hljs-title function_">canPlayType</span>(<span class="hljs-string">'video/webm'</span>) !== <span class="hljs-string">''</span>);
</code></pre>
<h2 data-id="heading-10">3. ç›‘å¬è§†é¢‘ç”Ÿå‘½å‘¨æœŸä¸çŠ¶æ€å˜åŒ–äº‹ä»¶</h2>
<p><code>&lt;video&gt;</code> æ ‡ç­¾æä¾›äº†å®Œæ•´çš„äº‹ä»¶æœºåˆ¶ï¼Œå¯ç›‘å¬æ’­æ”¾çŠ¶æ€ã€åŠ è½½è¿›åº¦ã€é”™è¯¯ç­‰åœºæ™¯ï¼Œæ˜¯å®ç°è‡ªå®šä¹‰æ§åˆ¶é€»è¾‘çš„æ ¸å¿ƒã€‚</p>
<h3 data-id="heading-11">3.1. æ ¸å¿ƒäº‹ä»¶åˆ†ç±»ä¸è¯´æ˜</h3>






































































<table><thead><tr><th>äº‹ä»¶å</th><th>è§¦å‘æ—¶æœº</th><th>åº”ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td><code>loadedmetadata</code></td><td>è§†é¢‘å…ƒæ•°æ®ï¼ˆæ—¶é•¿ã€å°ºå¯¸ç­‰ï¼‰åŠ è½½å®Œæˆ</td><td>è·å–è§†é¢‘æ€»æ—¶é•¿ <code>duration</code></td></tr><tr><td><code>loadeddata</code></td><td>ç¬¬ä¸€å¸§è§†é¢‘åŠ è½½å®Œæˆå¹¶å¯æ˜¾ç¤º</td><td>éšè—åŠ è½½åŠ¨ç”»ã€æ˜¾ç¤ºè§†é¢‘ç”»é¢</td></tr><tr><td><code>canplay</code></td><td>è§†é¢‘å·²ç¼“å†²è¶³å¤Ÿæ•°æ®ï¼Œå¯å¼€å§‹æ’­æ”¾ï¼ˆå¯èƒ½å¡é¡¿ï¼‰</td><td>å¯ç”¨æ’­æ”¾æŒ‰é’®</td></tr><tr><td><code>canplaythrough</code></td><td>è§†é¢‘å·²ç¼“å†²è‡³æœ«å°¾ï¼Œå¯æµç•…æ’­æ”¾</td><td>æç¤ºâ€œå¯æµç•…è§‚çœ‹â€</td></tr><tr><td><code>play</code></td><td>è°ƒç”¨ <code>play()</code> åå¼€å§‹æ’­æ”¾æ—¶</td><td>åˆ‡æ¢æ’­æ”¾æŒ‰é’®çŠ¶æ€ï¼ˆæš‚åœå›¾æ ‡ï¼‰</td></tr><tr><td><code>pause</code></td><td>è°ƒç”¨ <code>pause()</code> æˆ–æ’­æ”¾æš‚åœæ—¶</td><td>åˆ‡æ¢æ’­æ”¾æŒ‰é’®çŠ¶æ€ï¼ˆæ’­æ”¾å›¾æ ‡ï¼‰</td></tr><tr><td><code>timeupdate</code></td><td>æ’­æ”¾ä½ç½® <code>currentTime</code> å˜åŒ–æ—¶ï¼ˆçº¦ 250ms ä¸€æ¬¡ï¼‰</td><td>æ›´æ–°è¿›åº¦æ¡ã€æ˜¾ç¤ºå½“å‰æ’­æ”¾æ—¶é—´</td></tr><tr><td><code>progress</code></td><td>è§†é¢‘ç¼“å†²æ—¶æŒç»­è§¦å‘</td><td>æ›´æ–°ç¼“å†²è¿›åº¦æ¡</td></tr><tr><td><code>ended</code></td><td>è§†é¢‘æ’­æ”¾å®Œæ¯•æ—¶</td><td>æ˜¾ç¤ºâ€œæ’­æ”¾å®Œæˆâ€æç¤ºã€è‡ªåŠ¨é‡æ’­</td></tr><tr><td><code>error</code></td><td>è§†é¢‘åŠ è½½/æ’­æ”¾å¤±è´¥æ—¶</td><td>æ˜¾ç¤ºé”™è¯¯æç¤ºï¼ˆé€šè¿‡ <code>error.code</code> è·å–é”™è¯¯ç±»å‹ï¼‰</td></tr><tr><td><code>volumechange</code></td><td>éŸ³é‡/é™éŸ³çŠ¶æ€å˜åŒ–æ—¶</td><td>æ›´æ–°éŸ³é‡å›¾æ ‡</td></tr><tr><td><code>fullscreenchange</code></td><td>å…¨å±çŠ¶æ€å˜åŒ–æ—¶</td><td>åˆ‡æ¢å…¨å±/é€€å‡ºå…¨å±æŒ‰é’®</td></tr></tbody></table>
<h3 data-id="heading-12">3.2. äº‹ä»¶ç›‘å¬å®æˆ˜ç¤ºä¾‹</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> video = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'video'</span>);
<span class="hljs-keyword">const</span> progressBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.progress-bar'</span>);
<span class="hljs-keyword">const</span> currentTimeText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.current-time'</span>);
<span class="hljs-keyword">const</span> durationText = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.duration'</span>);

<span class="hljs-comment">// 1. å…ƒæ•°æ®åŠ è½½å®Œæˆï¼šæ˜¾ç¤ºæ€»æ—¶é•¿</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'loadedmetadata'</span>, <span class="hljs-function">() =&gt;</span> {
  durationText.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">formatTime</span>(video.<span class="hljs-property">duration</span>);
});

<span class="hljs-comment">// 2. æ’­æ”¾ä½ç½®æ›´æ–°ï¼šåŒæ­¥è¿›åº¦æ¡</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'timeupdate'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">const</span> progress = (video.<span class="hljs-property">currentTime</span> / video.<span class="hljs-property">duration</span>) * <span class="hljs-number">100</span>;
  progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${progress}</span>%`</span>;
  currentTimeText.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">formatTime</span>(video.<span class="hljs-property">currentTime</span>);
});

<span class="hljs-comment">// 3. ç¼“å†²è¿›åº¦æ›´æ–°ï¼šæ˜¾ç¤ºç¼“å†²æ¡</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'progress'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (video.<span class="hljs-property">buffered</span>.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> bufferedEnd = video.<span class="hljs-property">buffered</span>.<span class="hljs-title function_">end</span>(video.<span class="hljs-property">buffered</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> bufferedProgress = (bufferedEnd / video.<span class="hljs-property">duration</span>) * <span class="hljs-number">100</span>;
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">'.buffer-bar'</span>).<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">${bufferedProgress}</span>%`</span>;
  }
});

<span class="hljs-comment">// 4. æ’­æ”¾å®Œæˆï¼šæç¤ºå¹¶é‡ç½®</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'ended'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è§†é¢‘æ’­æ”¾å®Œæˆï¼'</span>);
  video.<span class="hljs-property">currentTime</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// é‡ç½®æ’­æ”¾ä½ç½®</span>
});

<span class="hljs-comment">// 5. é”™è¯¯å¤„ç†ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯</span>
video.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'error'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">switch</span>(video.<span class="hljs-property">error</span>.<span class="hljs-property">code</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è§†é¢‘åŠ è½½ä¸­æ–­'</span>); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ä¸æ”¯æŒçš„è§†é¢‘æ ¼å¼'</span>); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è§†é¢‘è§£ç å¤±è´¥'</span>); <span class="hljs-keyword">break</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">4</span>: <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è§†é¢‘åŠ è½½è¶…æ—¶'</span>); <span class="hljs-keyword">break</span>;
  }
});

<span class="hljs-comment">// è¾…åŠ©å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¶é—´ï¼ˆç§’ â†’ åˆ†:ç§’ï¼Œå¦‚ 125 â†’ 2:05ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">formatTime</span>(<span class="hljs-params">seconds</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-built_in">isNaN</span>(seconds)) <span class="hljs-keyword">return</span> <span class="hljs-string">'0:00'</span>;
  <span class="hljs-keyword">const</span> min = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(seconds / <span class="hljs-number">60</span>);
  <span class="hljs-keyword">const</span> sec = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(seconds % <span class="hljs-number">60</span>);
  <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${min}</span>:<span class="hljs-subst">${sec.toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">'0'</span>)}</span>`</span>;
}
</code></pre>
<h2 data-id="heading-13">4. è‡ªå®šä¹‰æ’­æ”¾å™¨å¤–è§‚æ ·å¼</h2>
<p>æµè§ˆå™¨åŸç”Ÿæ§åˆ¶æ æ ·å¼éš¾ä»¥é€‚é…ä¸åŒç½‘é¡µè®¾è®¡ï¼Œé€šè¿‡éšè—åŸç”Ÿ <code>controls</code>ï¼Œä½¿ç”¨ CSS è‡ªå®šä¹‰æ’­æ”¾å™¨ç•Œé¢æ˜¯æ›´å¸¸ç”¨çš„æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-14">4.1. åŸºç¡€æ ·å¼æ§åˆ¶</h3>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* 1. è§†é¢‘å®¹å™¨æ ·å¼ï¼ˆç»Ÿä¸€å°ºå¯¸ã€è¾¹æ¡†ã€åœ†è§’ï¼‰ */</span>
<span class="hljs-selector-class">.video-container</span> {
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">1280px</span>;
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">overflow</span>: hidden;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);
}

<span class="hljs-comment">/* 2. è§†é¢‘å…ƒç´ æ ·å¼ï¼ˆå¡«å……å®¹å™¨ï¼Œé¿å…å˜å½¢ï¼‰ */</span>
<span class="hljs-selector-class">.video-container</span> <span class="hljs-selector-tag">video</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: auto;
  <span class="hljs-attribute">object-fit</span>: cover; <span class="hljs-comment">/* ä¿æŒå®½é«˜æ¯”ï¼Œå¡«å……å®¹å™¨ï¼ˆå¯èƒ½è£å‰ªè¾¹ç¼˜ï¼‰ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; <span class="hljs-comment">/* æœªåŠ è½½æ—¶æ˜¾ç¤ºé»‘è‰²èƒŒæ™¯ */</span>
}

<span class="hljs-comment">/* 3. å°é¢å›¾æ ·å¼ï¼ˆä¸è§†é¢‘åŒå°ºå¯¸ï¼‰ */</span>
<span class="hljs-selector-class">.video-container</span> poster {
  <span class="hljs-attribute">object-fit</span>: cover;
}
</code></pre>
<h3 data-id="heading-15">4.2. è‡ªå®šä¹‰æ§åˆ¶æ æ ·å¼</h3>
<p>é€šè¿‡ç»å¯¹å®šä½åœ¨è§†é¢‘åº•éƒ¨åˆ›å»ºè‡ªå®šä¹‰æ§åˆ¶æ ï¼Œé»˜è®¤éšè—ï¼Œé¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* æ§åˆ¶æ å®¹å™¨ */</span>
<span class="hljs-selector-class">.video-controls</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(transparent, <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.7</span>)); <span class="hljs-comment">/* æ¸å˜èƒŒæ™¯ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.3s</span> ease;
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">flex-direction</span>: column;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">8px</span>;
}

<span class="hljs-comment">/* é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºæ§åˆ¶æ  */</span>
<span class="hljs-selector-class">.video-container</span><span class="hljs-selector-pseudo">:hover</span> <span class="hljs-selector-class">.video-controls</span> {
  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-comment">/* è¿›åº¦æ¡å®¹å™¨ */</span>
<span class="hljs-selector-class">.progress-container</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.3</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-comment">/* å·²æ’­æ”¾è¿›åº¦æ¡ */</span>
<span class="hljs-selector-class">.progress-bar</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff4400</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0%</span>;
}

<span class="hljs-comment">/* ç¼“å†²è¿›åº¦æ¡ï¼ˆå åŠ åœ¨è¿›åº¦æ¡ä¸‹æ–¹ï¼‰ */</span>
<span class="hljs-selector-class">.buffer-bar</span> {
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.5</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">0%</span>;
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1</span>;
}

<span class="hljs-comment">/* æ§åˆ¶æŒ‰é’®åŒºåŸŸ */</span>
<span class="hljs-selector-class">.controls-buttons</span> {
  <span class="hljs-attribute">display</span>: flex;
  <span class="hljs-attribute">align-items</span>: center;
  <span class="hljs-attribute">gap</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;
}

<span class="hljs-comment">/* æŒ‰é’®æ ·å¼ */</span>
<span class="hljs-selector-class">.controls-btn</span> {
  <span class="hljs-attribute">background</span>: transparent;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">transition</span>: color <span class="hljs-number">0.2s</span>;
}

<span class="hljs-selector-class">.controls-btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ff4400</span>;
}

<span class="hljs-comment">/* éŸ³é‡æ§åˆ¶æ»‘å— */</span>
<span class="hljs-selector-class">.volume-slider</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">255</span>,<span class="hljs-number">0.3</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;
  <span class="hljs-attribute">outline</span>: none;
  accent-<span class="hljs-attribute">color</span>: <span class="hljs-number">#ff4400</span>; <span class="hljs-comment">/* è‡ªå®šä¹‰æ»‘å—é¢œè‰² */</span>
}
</code></pre>
<h3 data-id="heading-16">4.3. è‡ªå®šä¹‰æ§åˆ¶æ  HTML ç»“æ„</h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-container"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">poster</span>=<span class="hljs-string">"cover.jpg"</span> <span class="hljs-attr">playsinline</span> <span class="hljs-attr">webkit-playsinline</span>&gt;</span>
    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒ HTML5 è§†é¢‘æ’­æ”¾ã€‚
  <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- è‡ªå®šä¹‰æ§åˆ¶æ  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"video-controls"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-container"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"progressContainer"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"buffer-bar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"progress-bar"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls-buttons"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls-btn"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"playBtn"</span>&gt;</span>â–¶ï¸<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"current-time"</span>&gt;</span>0:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"duration"</span>&gt;</span>0:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"range"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"volume-slider"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"volumeSlider"</span> <span class="hljs-attr">min</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">max</span>=<span class="hljs-string">"1"</span> <span class="hljs-attr">step</span>=<span class="hljs-string">"0.01"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls-btn"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"fullscreenBtn"</span>&gt;</span>â›¶<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<h2 data-id="heading-17">5. å…¼å®¹æ€§å¤„ç†ä¸å¸¸è§é—®é¢˜</h2>
<p>ä¸‹é¢æ˜¯ä¸€äº›å…¼å®¹æ€§å¤„ç†ä¸å¸¸è§é—®é¢˜ï¼š</p>
<h3 data-id="heading-18">5.1. æµè§ˆå™¨å…¼å®¹æ€§</h3>
<h4 data-id="heading-19">ï¼ˆ1ï¼‰æ ¸å¿ƒå…¼å®¹æ€§ç°çŠ¶</h4>
<ul>
<li><strong>ç°ä»£æµè§ˆå™¨</strong>ï¼šChromeã€Firefoxã€Safariã€Edge å‡å®Œç¾æ”¯æŒ <code>&lt;video&gt;</code> æ ‡ç­¾åŠæ ¸å¿ƒ APIã€‚</li>
<li><strong>ç§»åŠ¨ç«¯</strong>ï¼šiOS Safariã€Android Chrome æ”¯æŒè‰¯å¥½ï¼Œä½†éœ€æ³¨æ„ <code>playsinline</code> å±æ€§ï¼ˆé¿å…è‡ªåŠ¨å…¨å±ï¼‰ã€‚</li>
<li><strong>æ—§æµè§ˆå™¨</strong>ï¼šIE8 åŠä»¥ä¸‹ä¸æ”¯æŒ <code>&lt;video&gt;</code> æ ‡ç­¾ï¼Œéœ€é€šè¿‡é™çº§æç¤ºæˆ– Flash å¤‡ç”¨æ–¹æ¡ˆï¼ˆå·²ä¸æ¨èï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-20">ï¼ˆ2ï¼‰æ ¼å¼å…¼å®¹æ€§</h4>

























<table><thead><tr><th>è§†é¢‘æ ¼å¼</th><th>æ”¯æŒæµè§ˆå™¨</th><th>ä¼˜åŠ¿</th></tr></thead><tbody><tr><td>MP4ï¼ˆH.264 + AACï¼‰</td><td>æ‰€æœ‰ç°ä»£æµè§ˆå™¨ã€iOSã€Android</td><td>å…¼å®¹æ€§æœ€å¥½ï¼Œæ¨èä¸»æ ¼å¼</td></tr><tr><td>WebMï¼ˆVP8/VP9 + Vorbisï¼‰</td><td>Chromeã€Firefoxã€Edge</td><td>ä½“ç§¯å°ã€å¼€æºï¼Œå¤‡é€‰æ ¼å¼</td></tr><tr><td>OGGï¼ˆTheora + Vorbisï¼‰</td><td>Chromeã€Firefox</td><td>å¼€æºï¼Œå…¼å®¹æ€§è¾ƒå·®ï¼ˆå‡ ä¹ä¸ç”¨ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-21">ï¼ˆ3ï¼‰API å…¼å®¹æ€§å¤„ç†</h4>
<p>éƒ¨åˆ† API éœ€æ·»åŠ æµè§ˆå™¨å‰ç¼€ï¼ˆå¦‚å…¨å±ã€æ’­æ”¾é€Ÿç‡ï¼‰ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±å…¼å®¹å¤„ç†</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">toggleFullscreen</span>(<span class="hljs-params">video</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">fullscreenElement</span>) {
    <span class="hljs-comment">// é€€å‡ºå…¨å±</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">exitFullscreen</span>().<span class="hljs-keyword">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err));
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// è¿›å…¥å…¨å±ï¼ˆå…¼å®¹å‰ç¼€ï¼‰</span>
    <span class="hljs-keyword">if</span> (video.<span class="hljs-property">requestFullscreen</span>) {
      video.<span class="hljs-title function_">requestFullscreen</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (video.<span class="hljs-property">webkitRequestFullscreen</span>) { <span class="hljs-comment">// Safari</span>
      video.<span class="hljs-title function_">webkitRequestFullscreen</span>();
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (video.<span class="hljs-property">msRequestFullscreen</span>) { <span class="hljs-comment">// IE/Edge</span>
      video.<span class="hljs-title function_">msRequestFullscreen</span>();
    }
  }
}

<span class="hljs-comment">// æ’­æ”¾é€Ÿç‡å…¼å®¹æ€§ï¼ˆéƒ¨åˆ†æ—§æµè§ˆå™¨ä¸æ”¯æŒï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">setPlaybackRate</span>(<span class="hljs-params">video, rate</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> video.<span class="hljs-property">playbackRate</span> !== <span class="hljs-string">'undefined'</span>) {
    video.<span class="hljs-property">playbackRate</span> = rate;
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒæ’­æ”¾é€Ÿç‡è°ƒæ•´'</span>);
  }
}
</code></pre>
<h3 data-id="heading-22">5.2. å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ</h3>
<h4 data-id="heading-23">ï¼ˆ1ï¼‰è‡ªåŠ¨æ’­æ”¾å¤±è´¥</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šç°ä»£æµè§ˆå™¨é™åˆ¶â€œéé™éŸ³è‡ªåŠ¨æ’­æ”¾â€ï¼ˆéœ€ç”¨æˆ·äº¤äº’åæ‰èƒ½æ’­æ”¾æœ‰å£°è§†é¢‘ï¼‰ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ol>
<li>é»˜è®¤é™éŸ³è‡ªåŠ¨æ’­æ”¾ï¼ˆ<code>muted autoplay</code>ï¼‰ï¼Œæä¾›â€œå¼€å¯å£°éŸ³â€æŒ‰é’®ã€‚</li>
<li>å¼•å¯¼ç”¨æˆ·ç‚¹å‡»åæ’­æ”¾ï¼ˆå¦‚â€œç‚¹å‡»æ’­æ”¾â€å°é¢å›¾ï¼‰ã€‚</li>
</ol>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">autoplay</span> <span class="hljs-attr">muted</span> <span class="hljs-attr">playsinline</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
</code></pre>
</li>
</ul>
<h4 data-id="heading-24">ï¼ˆ2ï¼‰è§†é¢‘åŠ è½½ç¼“æ…¢/å¡é¡¿</h4>
<ul>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š
<ol>
<li>æä¾›å¤šç ç‡è§†é¢‘ï¼ˆæ ¹æ®ç½‘ç»œçŠ¶å†µåˆ‡æ¢ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>preload="metadata"</code> ä¼˜åŒ–é¢„åŠ è½½ç­–ç•¥ã€‚</li>
<li>æ˜¾ç¤ºç¼“å†²è¿›åº¦æ¡ï¼Œæç¤ºç”¨æˆ·â€œç¼“å†²ä¸­â€ã€‚</li>
<li>é‡‡ç”¨ CDN åˆ†å‘è§†é¢‘èµ„æºï¼Œæå‡åŠ è½½é€Ÿåº¦ã€‚</li>
</ol>
</li>
</ul>
<h4 data-id="heading-25">ï¼ˆ3ï¼‰è§†é¢‘æ¯”ä¾‹å˜å½¢</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šæ’­æ”¾å™¨å®½é«˜ä¸è§†é¢‘åŸç”Ÿå®½é«˜æ¯”ä¸ä¸€è‡´ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šä½¿ç”¨ <code>object-fit</code> å±æ€§æ§åˆ¶è§†é¢‘å¡«å……æ–¹å¼ï¼š
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">video</span> {
  <span class="hljs-attribute">object-fit</span>: cover; <span class="hljs-comment">/* ä¿æŒå®½é«˜æ¯”ï¼Œå¡«å……å®¹å™¨ï¼ˆè£å‰ªè¾¹ç¼˜ï¼‰ */</span>
  <span class="hljs-comment">/* æˆ– object-fit: contain; ä¿æŒå®½é«˜æ¯”ï¼Œå®Œæ•´æ˜¾ç¤ºï¼ˆå¯èƒ½ç•™é»‘è¾¹ï¼‰ */</span>
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-26">ï¼ˆ4ï¼‰ç§»åŠ¨ç«¯è‡ªåŠ¨å…¨å±æ’­æ”¾</h4>
<ul>
<li><strong>åŸå› </strong>ï¼šiOS Safari é»˜è®¤ä¼šå°†è§†é¢‘å…¨å±æ’­æ”¾ï¼ˆæ—  <code>playsinline</code> å±æ€§æ—¶ï¼‰ã€‚</li>
<li><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šæ·»åŠ  <code>playsinline</code> å’Œ <code>webkit-playsinline</code> å±æ€§ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"video.mp4"</span> <span class="hljs-attr">playsinline</span> <span class="hljs-attr">webkit-playsinline</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span>
</code></pre>
</li>
</ul>
<h2 data-id="heading-27">6. æ€»ç»“</h2>
<p>HTML5 <code>&lt;video&gt;</code> æ ‡ç­¾å‡­å€ŸåŸç”Ÿã€è½»é‡ã€å¯æ‰©å±•çš„ç‰¹æ€§ï¼Œæˆä¸ºç½‘é¡µè§†é¢‘æ’­æ”¾çš„æ ‡å‡†æ–¹æ¡ˆã€‚é€šè¿‡æœ¬æ–‡çš„è®²è§£ï¼Œä½ å¯ä»¥æŒæ¡ï¼š</p>
<ol>
<li>æ ‡ç­¾åŸºç¡€å±æ€§ä¸å¤šæ ¼å¼é€‚é…æŠ€å·§ï¼›</li>
<li>æ ¸å¿ƒ API çš„ä½¿ç”¨çš„ï¼ˆæ’­æ”¾æ§åˆ¶ã€çŠ¶æ€æŸ¥è¯¢ï¼‰ï¼›</li>
<li>å®Œæ•´äº‹ä»¶ä½“ç³»çš„åº”ç”¨ï¼ˆç›‘å¬æ’­æ”¾çŠ¶æ€ã€ç¼“å†²è¿›åº¦ç­‰ï¼‰ï¼›</li>
<li>è‡ªå®šä¹‰æ’­æ”¾å™¨çš„æ ·å¼è®¾è®¡ä¸é€»è¾‘å®ç°ï¼›</li>
<li>å…¼å®¹æ€§å¤„ç†ä¸å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆã€‚</li>
</ol>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯æ ¹æ®éœ€æ±‚çµæ´»ç»„åˆä¸Šè¿°æŠ€æœ¯â€”â€”ç®€å•åœºæ™¯ç›´æ¥ä½¿ç”¨åŸç”Ÿæ§åˆ¶æ ï¼Œå¤æ‚åœºæ™¯ï¼ˆå¦‚è§†é¢‘ç½‘ç«™ã€æ•™è‚²å¹³å°ï¼‰åˆ™é€šè¿‡è‡ªå®šä¹‰æ§åˆ¶æ ä¸ API å®ç°ä¸ªæ€§åŒ–åŠŸèƒ½ï¼ˆå¦‚å€é€Ÿæ’­æ”¾ã€å¼¹å¹•ã€ç”»ä¸­ç”»ç­‰ï¼‰ã€‚éšç€æµè§ˆå™¨æŠ€æœ¯çš„è¿­ä»£ï¼Œ<code>&lt;video&gt;</code> æ ‡ç­¾çš„åŠŸèƒ½å°†æŒç»­å®Œå–„ï¼Œä¸ºç½‘é¡µè§†é¢‘ä½“éªŒå¸¦æ¥æ›´å¤šå¯èƒ½ã€‚</p>
<hr/>
<blockquote>
<p>æœ¬æ¬¡åˆ†äº«å°±åˆ°è¿™å„¿å•¦ï¼Œæˆ‘æ˜¯é¹å¤šå¤šï¼Œæ·±è€•å‰ç«¯çš„æŠ€æœ¯åˆ›ä½œè€…ï¼Œå¦‚æœæ‚¨çœ‹äº†è§‰å¾—æœ‰å¸®åŠ©ï¼Œæ¬¢è¿è¯„è®ºï¼Œå…³æ³¨ï¼Œç‚¹èµï¼Œè½¬å‘ï¼Œæˆ‘ä»¬ä¸‹æ¬¡è§~</p>
</blockquote>
<p>PSï¼šåœ¨æœ¬é¡µæŒ‰F12ï¼Œåœ¨consoleä¸­è¾“å…¥document.getElementsByClassName('panel-btn')[0].click();æœ‰æƒŠå–œå“¦~</p>
<p><code>å¾€æœŸæ–‡ç« </code></p>
<ul>
<li><a href="https://juejin.cn/post/7568192652286754870" target="_blank" title="https://juejin.cn/post/7568192652286754870">çº¯å‰ç«¯æå–å›¾ç‰‡é¢œè‰²æ’ä»¶Color-Thiefæ•™å­¦+å®æˆ˜å®Œæ•´æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7565737512816771135" target="_blank" title="https://juejin.cn/post/7565737512816771135">react-konvaå®æˆ˜æŒ‡å—ï¼šCanvasé«˜æ€§èƒ½+æ˜“ç»´æŠ¤çš„ç»„ä»¶åŒ–å›¾å½¢å¼€å‘å®ç°æ•™ç¨‹</a></li>
<li><a href="https://juejin.cn/post/7560905838074462271" target="_blank" title="https://juejin.cn/post/7560905838074462271">Reactæ— é™æ»šåŠ¨æ’ä»¶react-infinite-scroll-componentçš„é…ç½®+ä¼˜åŒ–+é¿å‘æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7560542615484137491" target="_blank" title="https://juejin.cn/post/7560542615484137491">å‰ç«¯éŸ³é¢‘å…¼å®¹è§£å†³ï¼šéŸ³é¢‘ç¥å™¨howler.jsä»åŸºç¡€åˆ°è¿›é˜¶å®Œæ•´ä½¿ç”¨æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7559871680015024169" target="_blank" title="https://juejin.cn/post/7559871680015024169">ä½¿ç”¨React-OAuthè¿›è¡ŒGoogle/GitHubç™»å½•çš„æ•™ç¨‹å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7550585427834404927" target="_blank" title="https://juejin.cn/post/7550585427834404927">çº¯å‰ç«¯äººè„¸è¯†åˆ«åˆ©å™¨ï¼šface-api.jsæ‰‹æŠŠæ‰‹æ·±å…¥è§£ææ•™å­¦</a></li>
<li><a href="https://juejin.cn/post/7553865490732433462" target="_blank" title="https://juejin.cn/post/7553865490732433462">å…³äºReactçˆ¶ç»„ä»¶è°ƒç”¨å­ç»„ä»¶æ–¹æ³•forwardRefçš„è¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7553484874609410074" target="_blank" title="https://juejin.cn/post/7553484874609410074">Reactè·¨ç»„ä»¶æ•°æ®å…±äº«useContextè¯¦è§£å’Œæ¡ˆä¾‹</a></li>
<li><a href="https://juejin.cn/post/7545087762837815334" target="_blank" title="https://juejin.cn/post/7545087762837815334">Webå›¾åƒç¼–è¾‘ç¥å™¨tui.image-editorä»åŸºç¡€åˆ°è¿›é˜¶çš„å®æˆ˜æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7544323659788288046" target="_blank" title="https://juejin.cn/post/7544323659788288046">å¼€å‘ä¸ªäººå¾®ä¿¡å°ç¨‹åºç±»ç›®é€‰æ‹©/ç›ˆåˆ©æ–¹å¼/æˆæœ¬æ§åˆ¶ä¸æœåŠ¡å™¨æ¥å…¥æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7541741121400864778" target="_blank" title="https://juejin.cn/post/7541741121400864778">å‰ç«¯å›¾ç‰‡è£å‰ªCropper.jsæ ¸å¿ƒåŠŸèƒ½ä¸å®æˆ˜æŠ€å·§è¯¦è§£</a></li>
<li><a href="https://juejin.cn/post/7536530451461472265" target="_blank" title="https://juejin.cn/post/7536530451461472265">ç¼–è¾‘å™¨ä¹Ÿæœ‰é‚ªä¿®ï¼Ÿç›˜ç‚¹VS Codeé‚ªé—¨/æœ‰è¶£çš„æ‰©å±•</a></li>
<li><a href="https://juejin.cn/post/7535005018257981466" target="_blank" title="https://juejin.cn/post/7535005018257981466">jsä½¿ç”¨IntersectionObserverå®ç°ç›®æ ‡å…ƒç´ å¯è§åº¦çš„äº¤äº’</a></li>
<li><a href="https://juejin.cn/post/7534547200330121225" target="_blank" title="https://juejin.cn/post/7534547200330121225">Webå‰ç«¯é¡µé¢å¼€å‘é˜¿æ‹‰ä¼¯è¯­ç§é€‚é…æŒ‡å—</a></li>
<li><a href="https://juejin.cn/post/7516122409948020736" target="_blank" title="https://juejin.cn/post/7516122409948020736">è®©ç½‘é¡µæ‹¥æœ‰Appä½“éªŒï¼ŸPWA å°†ç½‘é¡µå˜ä¸ºæ¡Œé¢åº”ç”¨çš„ä¿å§†çº§æ•™ç¨‹PWA</a></li>
<li><a href="https://juejin.cn/post/6953803916484018206" target="_blank" title="https://juejin.cn/post/6953803916484018206">ä½¿ç”¨nvmç®¡ç†node.jsç‰ˆæœ¬ä»¥åŠæ›´æ¢npmæ·˜å®é•œåƒæº</a></li>
<li><a href="https://juejin.cn/post/7140443283209060383" target="_blank" title="https://juejin.cn/post/7140443283209060383">æ‰‹æŠŠæ‰‹æ•™ä½ æ­å»ºè§„èŒƒçš„å›¢é˜Ÿvueé¡¹ç›®ï¼ŒåŒ…å«commitlintï¼Œeslintï¼Œprettierï¼Œhuskyï¼Œcommitizenç­‰ç­‰</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[éƒ¨ç½²å¤§æ¨¡å‹éœ€è¦å¤šå°‘GPUæ˜¾å­˜?ä¸€æ–‡æ•™ä½ ç²¾å‡†è®¡ç®—]]></title>    <link>https://juejin.cn/post/7575829296452157450</link>    <guid>https://juejin.cn/post/7575829296452157450</guid>    <pubDate>2025-11-24T06:57:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575829296452157450" data-draft-id="7575887863796989962" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="éƒ¨ç½²å¤§æ¨¡å‹éœ€è¦å¤šå°‘GPUæ˜¾å­˜?ä¸€æ–‡æ•™ä½ ç²¾å‡†è®¡ç®—"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-24T06:57:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å±…ç„¶JuRan"/> <meta itemprop="url" content="https://juejin.cn/user/2524134427858205"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            éƒ¨ç½²å¤§æ¨¡å‹éœ€è¦å¤šå°‘GPUæ˜¾å­˜?ä¸€æ–‡æ•™ä½ ç²¾å‡†è®¡ç®—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134427858205/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å±…ç„¶JuRan
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T06:57:21.000Z" title="Mon Nov 24 2025 06:57:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€:éƒ¨ç½²å¤§æ¨¡å‹çš„ç¬¬ä¸€é“é—¨æ§›</h2>
<p>å½“æˆ‘ä»¬å‡†å¤‡éƒ¨ç½²ä¸€ä¸ªå¤§è¯­è¨€æ¨¡å‹å¹¶æä¾›æœåŠ¡æ—¶,æœ€å…ˆé‡åˆ°çš„é—®é¢˜å¾€å¾€æ˜¯:<strong>æˆ‘åˆ°åº•éœ€è¦å‡†å¤‡å¤šå°‘GPUæ˜¾å­˜?</strong></p>
<p>è¿™ä¸ä»…å…³ç³»åˆ°ç¡¬ä»¶æˆæœ¬,æ›´ç›´æ¥å½±å“æœåŠ¡çš„å¹¶å‘èƒ½åŠ›å’Œå“åº”é€Ÿåº¦ã€‚ä»Šå¤©,æˆ‘ä»¬å°±ä»¥<strong>Llama 70Bæ¨¡å‹</strong>ä¸ºä¾‹,æ‰‹æŠŠæ‰‹æ•™ä½ è®¡ç®—æ¨ç†æ‰€éœ€çš„GPUæ˜¾å­˜ã€‚</p>
<h2 data-id="heading-1">ğŸ“‹ æ¡ˆä¾‹å‚æ•°è®¾å®š</h2>
<p>è®©æˆ‘ä»¬å…ˆæ˜ç¡®è®¡ç®—çš„åŸºç¡€å‚æ•°:</p>
<ul>
<li>
<p><strong>æ¨¡å‹è§„æ¨¡</strong>:Llama 70B(700äº¿å‚æ•°)</p>
</li>
<li>
<p><strong>æ¨¡å‹å±‚æ•°</strong>:80å±‚</p>
</li>
<li>
<p><strong>ä¸Šä¸‹æ–‡é•¿åº¦</strong>:æœ€å¤§æ”¯æŒ32K tokens</p>
</li>
<li>
<p><strong>Hidden Dimension</strong>:8196</p>
</li>
<li>
<p><strong>å‚æ•°ç²¾åº¦</strong>:æ¯ä¸ªå‚æ•°2ä¸ªbytes(FP16)</p>
</li>
<li>
<p><strong>å¹¶å‘ç”¨æˆ·æ•°</strong>:10ä¸ªåŒæ—¶è¯·æ±‚</p>
</li>
</ul>
<p>åŸºäºè¿™äº›å‚æ•°,æˆ‘ä»¬å¼€å§‹é€æ­¥è®¡ç®—æ‰€éœ€çš„GPUæ˜¾å­˜ã€‚</p>
<h2 data-id="heading-2">ğŸ’¾ ç¬¬ä¸€éƒ¨åˆ†:æ¨¡å‹æƒé‡æ˜¾å­˜</h2>
<p>é¦–å…ˆè¦è®¡ç®—çš„æ˜¯<strong>æ¨¡å‹æœ¬èº«å æ®çš„æ˜¾å­˜</strong>,å› ä¸ºæˆ‘ä»¬éœ€è¦æŠŠæ•´ä¸ªæ¨¡å‹åŠ è½½åˆ°GPUä¸­ã€‚</p>
<p><strong>è®¡ç®—å…¬å¼:</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">æ¨¡å‹æ˜¾å­˜ = å‚æ•°é‡ Ã— æ¯å‚æ•°å­—èŠ‚æ•°
        = 70B Ã— 2 bytes
        = 70 Ã— 10^9 Ã— 2 bytes
        = 140 GB
</code></pre>
<p>è¿™ä¸ª140GBæ˜¯æ¨¡å‹æƒé‡çš„åŸºç¡€å ç”¨,æ— è®ºæœ‰å¤šå°‘ç”¨æˆ·è¯·æ±‚,è¿™éƒ¨åˆ†éƒ½æ˜¯å›ºå®šçš„ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1508643296c44d2eb3f0eb77c9b32cca~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572241&amp;x-signature=b4afNJEwyOJdZGsBETAcC6fjXH4%3D" alt="GPUæ˜¾å­˜é…ç½®ä¸»å›¾" loading="lazy"/></p>
<h2 data-id="heading-3">ğŸš€ ç¬¬äºŒéƒ¨åˆ†:KV Cacheæ˜¾å­˜(é‡ç‚¹!)</h2>
<p>è¿™æ˜¯æ˜¾å­˜å ç”¨çš„<strong>å¤§å¤´</strong>,ä¹Ÿæ˜¯æœ€å®¹æ˜“è¢«å¿½è§†çš„éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-4">ä»€ä¹ˆæ˜¯KV Cache?</h3>
<p>åœ¨å¤§æ¨¡å‹æ¨ç†æ—¶,æ–‡æœ¬æ˜¯<strong>é€ä¸ªtokenç”Ÿæˆ</strong>çš„ã€‚ä¸ºäº†åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹,æˆ‘ä»¬ä½¿ç”¨KV Cacheæœºåˆ¶æ¥ç¼“å­˜ä¸­é—´è®¡ç®—ç»“æœã€‚</p>
<p><strong>å¦‚æœæ²¡æœ‰KV Cache</strong>,æ¯ç”Ÿæˆä¸€ä¸ªæ–°token,éƒ½éœ€è¦é‡æ–°è®¡ç®—ä¹‹å‰æ‰€æœ‰tokençš„æ³¨æ„åŠ›æƒé‡,è¿™ä¼šå¯¼è‡´å¤§é‡é‡å¤è®¡ç®—,ä¸¥é‡å½±å“æ¨ç†æ•ˆç‡ã€‚</p>
<h3 data-id="heading-5">KV Cacheæ˜¾å­˜è®¡ç®—</h3>
<p>KV Cacheçš„è®¡ç®—åˆ†ä¸ºä¸¤æ­¥:</p>
<p><strong>æ­¥éª¤1:è®¡ç®—å•ä¸ªtokençš„KV Cacheå¤§å°</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">å•tokenæ˜¾å­˜ = å±‚æ•° Ã— Hidden Dimension Ã— å­—èŠ‚æ•° Ã— 2(Key + Value)
           = 80 Ã— 8196 Ã— 2 bytes Ã— 2
           = 2.5 MB
</code></pre>
<p><strong>æ­¥éª¤2:è®¡ç®—æ€»KV Cache</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">æ€»KV Cache = å•tokenæ˜¾å­˜ Ã— ä¸Šä¸‹æ–‡é•¿åº¦ Ã— å¹¶å‘ç”¨æˆ·æ•°
          = 2.5 MB Ã— 32K Ã— 10
          = 2.5 MB Ã— 32,000 Ã— 10
          = 800 GB
</code></pre>
<p>æ³¨æ„:<strong>æ¯ä¸ªç”¨æˆ·éƒ½éœ€è¦ç‹¬ç«‹çš„KV Cache</strong>,å› ä¸ºæ¯ä¸ªè¯·æ±‚çš„ä¸Šä¸‹æ–‡éƒ½ä¸åŒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå¹¶å‘æ•°å¯¹æ˜¾å­˜éœ€æ±‚å½±å“å·¨å¤§!</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/904e61257eae4417a96ab7e5bb25052e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572241&amp;x-signature=nuMb5ZPq1UXzhG9iZQc0UGtEJsU%3D" alt="KV Cacheå·¥ä½œåŸç†å›¾" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ”§ ç¬¬ä¸‰éƒ¨åˆ†:å…¶ä»–æ˜¾å­˜å¼€é”€</h2>
<p>é™¤äº†æ¨¡å‹æƒé‡å’ŒKV Cache,è¿˜æœ‰ä¸€äº›é¢å¤–çš„æ˜¾å­˜å ç”¨:</p>
<h3 data-id="heading-7">1. Activation(æ¿€æ´»å€¼)</h3>
<p>ç¥ç»ç½‘ç»œæ¯ä¸€å±‚è®¡ç®—æ—¶äº§ç”Ÿçš„æ¿€æ´»å‡½æ•°è¾“å‡º,éœ€è¦æš‚å­˜åœ¨æ˜¾å­˜ä¸­ã€‚</p>
<h3 data-id="heading-8">2. Buffers(ç¼“å†²åŒº)</h3>
<p>å­˜æ”¾ä¸­é—´å˜é‡çš„ä¸´æ—¶ç©ºé—´,è®¡ç®—å®Œæˆåå¯èƒ½ä¼šè¢«é‡Šæ”¾ã€‚</p>
<h3 data-id="heading-9">3. Overheads(å¼€é”€)</h3>
<p>ä¸»è¦æ˜¯æ˜¾å­˜ç¢ç‰‡åŒ–å¯¼è‡´çš„ç©ºé—´æµªè´¹ã€‚GPUæ˜¾å­˜åˆ†é…æ˜¯ä»¥blockä¸ºå•ä½çš„,å¯èƒ½ä¼šå‡ºç°ä¸€äº›blockæœªè¢«å……åˆ†åˆ©ç”¨çš„æƒ…å†µã€‚</p>
<p><strong>ä¼°ç®—æ–¹æ³•:</strong></p>
<p>è¿™äº›æ‚é¡¹é€šå¸¸æŒ‰æ¨¡å‹æƒé‡å’ŒKV Cacheæ€»å’Œçš„**10%**æ¥ä¼°ç®—:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">å…¶ä»–å¼€é”€ = (140 GB + 800 GB) Ã— 10%
        = 94 GB
</code></pre>
<h2 data-id="heading-10">ğŸ“Š æ€»æ˜¾å­˜éœ€æ±‚è®¡ç®—</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å¾—å‡ºæœ€ç»ˆç»“æœ:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">æ€»æ˜¾å­˜éœ€æ±‚ = æ¨¡å‹æƒé‡ + KV Cache + å…¶ä»–å¼€é”€
          = 140 GB + 800 GB + 94 GB
          = 1,034 GB â‰ˆ 1TB
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´,<strong>è¦æ”¯æŒ10ä¸ªå¹¶å‘ç”¨æˆ·ä½¿ç”¨Llama 70Bæ¨¡å‹,æˆ‘ä»¬å¤§çº¦éœ€è¦1TBçš„GPUæ˜¾å­˜!</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fb62a48e4154b358b50ac7533bb7e05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bGF54S2SnVSYW4=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764572241&amp;x-signature=wruF0I3MTWCOlhsuGoJcVvFr4aU%3D" alt="æ˜¾å­˜å ç”¨åˆ†å¸ƒå›¾" loading="lazy"/></p>
<h2 data-id="heading-11">ğŸ’¡ å®ç”¨ä¼˜åŒ–å»ºè®®</h2>
<h3 data-id="heading-12">åœºæ™¯1:å•ç”¨æˆ·åœºæ™¯</h3>
<p>å¦‚æœåªæœ‰1ä¸ªç”¨æˆ·,KV Cacheæ˜¾å­˜å¤§å¹…é™ä½:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">KV Cache = 2.5 MB Ã— 32K Ã— 1 = 80 GB
æ€»æ˜¾å­˜ = 140 + 80 + 22 = 242 GB
</code></pre>
<p>æ‰€éœ€æ˜¾å­˜å‡å°‘åˆ°<strong>çº¦250GB</strong>,åªéœ€3-4å¼ A100(80GB)å³å¯ã€‚</p>
<h3 data-id="heading-13">åœºæ™¯2:æ›´çŸ­çš„ä¸Šä¸‹æ–‡</h3>
<p>å®é™…åº”ç”¨ä¸­,å¾ˆå¤šè¯·æ±‚çš„ä¸Šä¸‹æ–‡é•¿åº¦è¿œå°äº32Kã€‚å¦‚æœå¹³å‡ä¸Šä¸‹æ–‡ä¸º8K:</p>
<pre><code class="hljs language-plaintext" lang="plaintext">KV Cache = 2.5 MB Ã— 8K Ã— 10 = 200 GB
æ€»æ˜¾å­˜ = 140 + 200 + 34 = 374 GB
</code></pre>
<p>æ˜¾å­˜éœ€æ±‚é™ä½åˆ°<strong>çº¦400GB</strong>,å¤§å¹…èŠ‚çœæˆæœ¬ã€‚</p>
<h2 data-id="heading-14">ğŸ¯ æ€»ç»“ä¸å»¶ä¼¸</h2>
<p>é€šè¿‡æœ¬æ–‡çš„è®¡ç®—æ–¹æ³•,ä½ å¯ä»¥å¿«é€Ÿä¼°ç®—<strong>ä»»ä½•å¤§æ¨¡å‹</strong>åœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ˜¾å­˜éœ€æ±‚:</p>
<p><strong>å…³é”®è®¡ç®—è¦ç´ :</strong></p>
<ol>
<li>
<p>âœ… æ¨¡å‹å‚æ•°é‡ Ã— å‚æ•°ç²¾åº¦</p>
</li>
<li>
<p>âœ… KV Cache = å±‚æ•° Ã— Hiddenç»´åº¦ Ã— ä¸Šä¸‹æ–‡é•¿åº¦ Ã— å¹¶å‘æ•°</p>
</li>
<li>
<p>âœ… å…¶ä»–å¼€é”€çº¦ä¸ºæ€»å’Œçš„10%</p>
</li>
</ol>
<p><strong>é‡è¦æç¤º:</strong></p>
<ul>
<li>
<p>æœ¬æ–‡è®¡ç®—åŸºäº<strong>æ ‡å‡†KV Cacheæ¨ç†</strong>æ–¹å¼</p>
</li>
<li>
<p>å®é™…è¿˜æœ‰è®¸å¤š<strong>æ˜¾å­˜ä¼˜åŒ–æŠ€æœ¯</strong>(å¦‚PagedAttentionã€é‡åŒ–ç­‰)å¯ä»¥å¤§å¹…é™ä½æ˜¾å­˜éœ€æ±‚</p>
</li>
<li>
<p>ä¸åŒæ¨ç†æ¡†æ¶çš„å®ç°ä¹Ÿä¼šå½±å“å®é™…æ˜¾å­˜å ç”¨</p>
</li>
</ul>
<p>æƒ³äº†è§£å¦‚ä½•è¿›ä¸€æ­¥ä¼˜åŒ–æ˜¾å­˜ä½¿ç”¨?æ•¬è¯·å…³æ³¨åç»­æ–‡ç« ,æˆ‘ä»¬å°†æ·±å…¥è®²è§£å„ç§æ˜¾å­˜ä¼˜åŒ–æŠ€æœ¯!</p>
<hr/>
<p><strong>ä½ åœ¨éƒ¨ç½²å¤§æ¨¡å‹æ—¶é‡åˆ°è¿‡æ˜¾å­˜ä¸è¶³çš„é—®é¢˜å—?æ¬¢è¿åœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ç»éªŒ!</strong> ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring Bootæ‹¦æˆªå™¨ç»“åˆHMAC-SHA256å®ç°APIå®‰å…¨éªŒè¯]]></title>    <link>https://juejin.cn/post/7575468252657041449</link>    <guid>https://juejin.cn/post/7575468252657041449</guid>    <pubDate>2025-11-23T23:56:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575468252657041449" data-draft-id="7574978545144987683" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring Bootæ‹¦æˆªå™¨ç»“åˆHMAC-SHA256å®ç°APIå®‰å…¨éªŒè¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-23T23:56:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é£è±¡å—"/> <meta itemprop="url" content="https://juejin.cn/user/2524134428655159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring Bootæ‹¦æˆªå™¨ç»“åˆHMAC-SHA256å®ç°APIå®‰å…¨éªŒè¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2524134428655159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é£è±¡å—
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-23T23:56:02.000Z" title="Sun Nov 23 2025 23:56:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-23
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    15
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨å¼€æ”¾å¹³å°å’Œç¬¬ä¸‰æ–¹é›†æˆçš„é¡¹ç›®ä¸­ï¼Œå¦‚ä½•ç¡®ä¿ API è°ƒç”¨çš„å®‰å…¨æ€§å’Œå¯é æ€§æ˜¯ä¸€ä¸ªé‡è¦è¯¾é¢˜ã€‚ç‰¹åˆ«æ˜¯å¯¹äºæ²¡æœ‰ç”¨æˆ·ç™»å½•åœºæ™¯çš„ç³»ç»Ÿé—´è°ƒç”¨ï¼Œä¼ ç»Ÿçš„sessionæˆ–tokenè®¤è¯æ–¹å¼å¹¶ä¸é€‚ç”¨ï¼Œæ•°å­—ç­¾åæŠ€æœ¯å°±æˆä¸ºäº†ä¸€ç§ç†æƒ³çš„é€‰æ‹©ã€‚</p>
<p>è¿™ç§éªŒè¯æ–¹å¼åœ¨å¼€æ”¾å¹³å°ã€SaaSæœåŠ¡ã€å¾®æœåŠ¡é—´è°ƒç”¨ç­‰åœºæ™¯ä¸‹ç‰¹åˆ«å®ç”¨ï¼Œèƒ½å¤Ÿæœ‰æ•ˆéªŒè¯è¯·æ±‚æ¥æºçš„åˆæ³•æ€§ï¼Œé˜²æ­¢å‚æ•°è¢«ç¯¡æ”¹å’Œé‡æ”¾æ”»å‡»ã€‚</p>
<p>æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å¦‚ä½•åŸºäº Spring Boot æ‹¦æˆªå™¨å’Œ HMAC-SHA256 ç®—æ³•ï¼Œæ„å»ºä¸€å¥—è½»é‡çº§ä½†è¶³å¤Ÿå®‰å…¨çš„ API éªŒç­¾æœºåˆ¶ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ˜¯æ•°å­—ç­¾åï¼Ÿ</h2>
<p>æ•°å­—ç­¾åæ˜¯ä¸€ç§ç”¨äºéªŒè¯æ•°æ®å®Œæ•´æ€§å’ŒçœŸå®æ€§çš„æŠ€æœ¯æ‰‹æ®µã€‚åœ¨ API è°ƒç”¨ä¸­ï¼Œæ•°å­—ç­¾åé€šè¿‡ä»¥ä¸‹æ–¹å¼ä¿éšœå®‰å…¨ï¼š</p>
<ul>
<li><strong>1. èº«ä»½éªŒè¯</strong>ï¼šç¡®è®¤è¯·æ±‚æ–¹èº«ä»½çš„åˆæ³•æ€§</li>
<li><strong>2. æ•°æ®å®Œæ•´æ€§</strong>ï¼šç¡®ä¿è¯·æ±‚å‚æ•°åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æœªè¢«ç¯¡æ”¹</li>
<li><strong>3. é˜²æ­¢é‡æ”¾æ”»å‡»</strong>ï¼šé€šè¿‡æ—¶é—´æˆ³ç­‰æœºåˆ¶é˜²æ­¢è¯·æ±‚è¢«é‡å¤ä½¿ç”¨</li>
</ul>
<h2 data-id="heading-2">æ•´ä½“è®¾è®¡</h2>
<h4 data-id="heading-3">è®¾è®¡æ€è·¯</h4>
<p>æˆ‘ä»¬çš„éªŒç­¾æœºåˆ¶åŸºäºä»¥ä¸‹æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li><strong>æ— ä¾µå…¥æ€§</strong>ï¼šé€šè¿‡ Spring Boot æ‹¦æˆªå™¨å®ç°ï¼Œä¸šåŠ¡ä»£ç æ— éœ€æ”¹åŠ¨</li>
<li><strong>ç®—æ³•å®‰å…¨æ€§</strong>ï¼šé‡‡ç”¨ä¸šç•Œæˆç†Ÿçš„ HMAC-SHA256 ç®—æ³•</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šæ”¯æŒå¤šå®¢æˆ·ç«¯ã€å¤šå¯†é’¥ç®¡ç†</li>
</ul>
<h4 data-id="heading-4">æ¶æ„æµç¨‹å›¾</h4>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯è¯·æ±‚ â†’ ç”Ÿæˆç­¾å â†’ å‘é€è¯·æ±‚ â†’ æ‹¦æˆªå™¨éªŒè¯ â†’ ä¸šåŠ¡å¤„ç†
     â†“              â†“           â†“           â†“           â†“
  <span class="hljs-selector-attr">[å‚æ•°æ•´ç†]</span>    <span class="hljs-selector-attr">[HMACåŠ å¯†]</span>  <span class="hljs-selector-attr">[æºå¸¦ç­¾åå¤´]</span>  <span class="hljs-selector-attr">[éªŒç­¾é€»è¾‘]</span>  <span class="hljs-selector-attr">[é€šè¿‡/æ‹’ç»]</span>
     â†“              â†“           â†“           â†“           â†“
   å‚æ•°æ’åº    +æ—¶é—´æˆ³åŠ å¯†   X-API-Key    å¯†é’¥åŒ¹é…    æ­£å¸¸å“åº”
     â†“              â†“           â†“           â†“           â†“
   æ‹¼æ¥å‚æ•°    Base64ç¼–ç    X-Timestamp  æ—¶é—´æˆ³éªŒè¯   æˆ–è¿”å›<span class="hljs-number">401</span>
     â†“              â†“           â†“           â†“
   å¾…ç­¾å­—ç¬¦ä¸²    å®Œæ•´ç­¾å     X-Signature  ç­¾åå¯¹æ¯”
</code></pre>
<h2 data-id="heading-5">HMAC-SHA256 ç­¾ååŸç†</h2>
<p>HMACï¼ˆHash-based Message Authentication Codeï¼ŒåŸºäºå“ˆå¸Œçš„æ¶ˆæ¯è®¤è¯ç ï¼‰ç»“åˆäº†å“ˆå¸Œå‡½æ•°å’Œå¯†é’¥ï¼Œæä¾›äº†ä¸€ç§å®‰å…¨é«˜æ•ˆçš„æ¶ˆæ¯è®¤è¯æ–¹å¼ã€‚</p>
<h4 data-id="heading-6">ç­¾åç”Ÿæˆç®—æ³•</h4>
<pre><code class="hljs language-scss" lang="scss">ç­¾å = <span class="hljs-built_in">Base64</span>(HMAC-SHA256(æ—¶é—´æˆ³ + æ’åºåçš„è¯·æ±‚å‚æ•°, å¯†é’¥))
</code></pre>
<h4 data-id="heading-7">ç®—æ³•æ­¥éª¤</h4>
<ul>
<li><strong>1. å‚æ•°æ ‡å‡†åŒ–</strong>ï¼šå°†æ‰€æœ‰è¯·æ±‚å‚æ•°æŒ‰å­—å…¸åºæ’åº</li>
<li><strong>2. æ•°æ®æ‹¼æ¥</strong>ï¼šå°†æ—¶é—´æˆ³å’Œæ’åºåçš„å‚æ•°æŒ‰è§„åˆ™æ‹¼æ¥</li>
<li><strong>3. ç­¾åè¿ç®—</strong>ï¼šä½¿ç”¨å¯†é’¥å¯¹æ‹¼æ¥å­—ç¬¦ä¸²è¿›è¡Œ HMAC-SHA256 è¿è¾“</li>
<li><strong>4. ç¼–ç è½¬æ¢</strong>ï¼šå¯¹åŠ å¯†ç»“æœè¿›è¡Œ Base64 ç¼–ç ç”Ÿæˆæœ€ç»ˆç­¾å</li>
</ul>
<h2 data-id="heading-8">æ ¸å¿ƒç»„ä»¶å®ç°</h2>
<h4 data-id="heading-9">1. ç­¾åå·¥å…·ç±»</h4>
<p>ç­¾åå·¥å…·ç±»æ˜¯æ•´ä¸ªæœºåˆ¶çš„æ ¸å¿ƒï¼Œè´Ÿè´£ç­¾åçš„ç”Ÿæˆå’ŒéªŒè¯é€»è¾‘</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SignatureUtil</span> {

    <span class="hljs-comment">/**
     * ç”Ÿæˆç­¾å
     * ç­¾åç®—æ³•ï¼šBase64(HMAC-SHA256(timestamp + sortedParams, secret))
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateSignature</span><span class="hljs-params">(Map&lt;String, Object&gt; params,
                                         String timestamp, String secret)</span> {
        <span class="hljs-comment">// å‚æ•°æ’åºå¹¶æ‹¼æ¥</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">sortedParams</span> <span class="hljs-operator">=</span> sortParams(params);
        <span class="hljs-type">String</span> <span class="hljs-variable">dataToSign</span> <span class="hljs-operator">=</span> timestamp + sortedParams;

        <span class="hljs-comment">// HMAC-SHA256åŠ å¯†å¹¶Base64ç¼–ç </span>
        <span class="hljs-type">HMac</span> <span class="hljs-variable">hmac</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HMac</span>(HmacAlgorithm.HmacSHA256, secret.getBytes(StandardCharsets.UTF_8));
        <span class="hljs-type">byte</span>[] digest = hmac.digest(dataToSign);
        <span class="hljs-keyword">return</span> Base64.getEncoder().encodeToString(digest);
    }

    <span class="hljs-comment">/**
     * éªŒè¯æ—¶é—´æˆ³æœ‰æ•ˆæ€§ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">validateTimestamp</span><span class="hljs-params">(String timestamp, <span class="hljs-type">long</span> tolerance)</span> {
        <span class="hljs-type">long</span> <span class="hljs-variable">requestTime</span> <span class="hljs-operator">=</span> Long.parseLong(timestamp);
        <span class="hljs-type">long</span> <span class="hljs-variable">currentTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis() / <span class="hljs-number">1000</span>;
        <span class="hljs-keyword">return</span> Math.abs(currentTime - requestTime) &lt;= tolerance;
    }
}
</code></pre>
<h4 data-id="heading-10">2. æ‹¦æˆªå™¨</h4>
<p>æ‹¦æˆªå™¨è´Ÿè´£å¯¹æ‰€æœ‰å—ä¿æŠ¤æ¥å£è¿›è¡Œç»Ÿä¸€çš„ç­¾åéªŒè¯</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SignatureValidationInterceptor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">HandlerInterceptor</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">preHandle</span><span class="hljs-params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> {
        <span class="hljs-comment">// 1. è·å–ç­¾åå¤´ä¿¡æ¯</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"X-Timestamp"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"X-Signature"</span>);
        <span class="hljs-type">String</span> <span class="hljs-variable">apiKey</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"X-Api-Key"</span>);

        <span class="hljs-comment">// 2. éªŒè¯å¿…è¦å‚æ•°</span>
        <span class="hljs-keyword">if</span> (!StringUtils.hasText(timestamp) || !StringUtils.hasText(signature) || !StringUtils.hasText(apiKey)) {
            <span class="hljs-keyword">return</span> writeErrorResponse(response, <span class="hljs-string">"Missing required signature headers"</span>);
        }

        <span class="hljs-comment">// 3. éªŒè¯æ—¶é—´æˆ³ï¼ˆé˜²é‡æ”¾æ”»å‡»ï¼‰</span>
        <span class="hljs-keyword">if</span> (!SignatureUtil.validateTimestamp(timestamp, timeTolerance)) {
            <span class="hljs-keyword">return</span> writeErrorResponse(response, <span class="hljs-string">"Invalid timestamp"</span>);
        }

        <span class="hljs-comment">// 4. è·å–å¯†é’¥å¹¶éªŒè¯ç­¾å</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">secret</span> <span class="hljs-operator">=</span> securityProperties.getApiSecret(apiKey);
        <span class="hljs-keyword">if</span> (secret == <span class="hljs-literal">null</span> || !SignatureUtil.verifySignature(extractParams(request), timestamp, secret, signature)) {
            <span class="hljs-keyword">return</span> writeErrorResponse(response, <span class="hljs-string">"Invalid signature"</span>);
        }

        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>; <span class="hljs-comment">// éªŒè¯é€šè¿‡ï¼Œç»§ç»­å¤„ç†è¯·æ±‚</span>
    }
}
</code></pre>
<h4 data-id="heading-11">3. é…ç½®ç±»ï¼ˆWebMvcConfigï¼‰</h4>
<p>é…ç½®ç±»è´Ÿè´£å°†æ‹¦æˆªå™¨é›†æˆåˆ° Spring Boot çš„è¯·æ±‚å¤„ç†é“¾ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WebMvcConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WebMvcConfigurer</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addInterceptors</span><span class="hljs-params">(InterceptorRegistry registry)</span> {
        registry.addInterceptor(signatureValidationInterceptor)
                .addPathPatterns(<span class="hljs-string">"/api/**"</span>)              <span class="hljs-comment">// æ‹¦æˆªæ‰€æœ‰APIè¯·æ±‚</span>
                .excludePathPatterns(<span class="hljs-string">"/api/public/**"</span>);  <span class="hljs-comment">// æ’é™¤å…¬å¼€æ¥å£</span>
    }
}
</code></pre>
<h2 data-id="heading-12">å®¢æˆ·ç«¯è°ƒç”¨ç¤ºä¾‹</h2>
<h4 data-id="heading-13">è¯·æ±‚å¤´è®¾ç½®</h4>
<p>å®¢æˆ·ç«¯éœ€è¦åœ¨è¯·æ±‚å¤´ä¸­åŒ…å«ä¸‰ä¸ªå¿…è¦å­—æ®µï¼š</p>
<ul>
<li><code>X-Api-Key</code>ï¼šå®¢æˆ·ç«¯æ ‡è¯†</li>
<li><code>X-Timestamp</code>ï¼šå½“å‰æ—¶é—´æˆ³ï¼ˆç§’çº§ï¼‰</li>
<li><code>X-Signature</code>ï¼šç”Ÿæˆçš„ç­¾å</li>
</ul>
<h4 data-id="heading-14">å®Œæ•´è°ƒç”¨æµç¨‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. å‡†å¤‡è¯·æ±‚å‚æ•°</span>
Map&lt;String, Object&gt; params = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();
params.put(<span class="hljs-string">"userId"</span>, <span class="hljs-string">"12345"</span>);
params.put(<span class="hljs-string">"type"</span>, <span class="hljs-string">"profile"</span>);

<span class="hljs-comment">// 2. ç”Ÿæˆç­¾å</span>
<span class="hljs-type">String</span> <span class="hljs-variable">timestamp</span> <span class="hljs-operator">=</span> String.valueOf(System.currentTimeMillis() / <span class="hljs-number">1000</span>);
<span class="hljs-type">String</span> <span class="hljs-variable">signature</span> <span class="hljs-operator">=</span> SignatureUtil.generateSignature(params, timestamp, <span class="hljs-string">"your-secret"</span>);

<span class="hljs-comment">// 3. è®¾ç½®è¯·æ±‚å¤´å¹¶å‘é€è¯·æ±‚</span>
<span class="hljs-type">Headers</span> <span class="hljs-variable">headers</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Headers</span>();
headers.set(<span class="hljs-string">"X-Api-Key"</span>, <span class="hljs-string">"client1"</span>);
headers.set(<span class="hljs-string">"X-Timestamp"</span>, timestamp);
headers.set(<span class="hljs-string">"X-Signature"</span>, signature);

<span class="hljs-comment">// GET /api/protected/data?userId=12345&amp;type=profile</span>
</code></pre>
<h2 data-id="heading-15">å®‰å…¨æ€§è®¾è®¡è¦ç‚¹</h2>
<h4 data-id="heading-16">1. é˜²é‡æ”¾æ”»å‡»</h4>
<ul>
<li><strong>æ—¶é—´æˆ³éªŒè¯</strong>ï¼šæœåŠ¡ç«¯éªŒè¯æ—¶é—´æˆ³çš„æœ‰æ•ˆæ€§ï¼ˆé»˜è®¤å®¹å¿åº¦5åˆ†é’Ÿï¼‰</li>
<li><strong>å”¯ä¸€æ€§ä¿è¯</strong>ï¼šç›¸åŒå‚æ•°åœ¨ä¸åŒæ—¶é—´æˆ³ä¸‹ç”Ÿæˆä¸åŒç­¾å</li>
<li><strong>é…ç½®çµæ´»</strong>ï¼šå¯æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´å®¹å¿æ—¶é—´</li>
</ul>
<h4 data-id="heading-17">2. å¯†é’¥ç®¡ç†</h4>
<ul>
<li><strong>å¤šå®¢æˆ·ç«¯æ”¯æŒ</strong>ï¼šæ¯ä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ç‹¬ç«‹çš„ API Key å’Œå¯†é’¥</li>
<li><strong>é…ç½®åŒ–ç®¡ç†</strong>ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æˆ–å…¶ä»–å­˜å‚¨ç»„ä»¶ç»Ÿä¸€ç®¡ç†å¯†é’¥æ˜ å°„</li>
<li><strong>å®šæœŸè½®æ¢</strong>ï¼šå»ºè®®å®šæœŸæ›´æ¢å¯†é’¥ä»¥æå‡å®‰å…¨æ€§</li>
</ul>
<h4 data-id="heading-18">3. æ—¥å¿—å®¡è®¡</h4>
<ul>
<li><strong>è¯·æ±‚æ—¥å¿—</strong>ï¼šè®°å½•éªŒè¯å¤±è´¥çš„å…³é”®ä¿¡æ¯ï¼ˆä¸åŒ…å«å®Œæ•´ç­¾åï¼‰</li>
<li><strong>IPè¿½è¸ª</strong>ï¼šè®°å½•å®¢æˆ·ç«¯çœŸå®IPåœ°å€</li>
<li><strong>å®‰å…¨é¢„è­¦</strong>ï¼šå¼‚å¸¸ç­¾åéªŒè¯è§¦å‘å‘Šè­¦æœºåˆ¶</li>
</ul>
<h2 data-id="heading-19">å®‰å…¨æ€§å¢å¼ºå»ºè®®</h2>
<h4 data-id="heading-20">1. ä¼ è¾“å±‚å®‰å…¨</h4>
<ul>
<li><strong>HTTPSå¼ºåˆ¶</strong>ï¼šæ‰€æœ‰APIè¯·æ±‚å¿…é¡»é€šè¿‡HTTPSä¼ è¾“</li>
<li><strong>è¯ä¹¦éªŒè¯</strong>ï¼šå¯ç”¨åŒå‘è¯ä¹¦è®¤è¯å¢åŠ å®‰å…¨æ€§</li>
<li><strong>åè®®å‡çº§</strong>ï¼šåŠæ—¶æ›´æ–°SSL/TLSåè®®ç‰ˆæœ¬</li>
</ul>
<h4 data-id="heading-21">2. å¯†é’¥ç®¡ç†ä¼˜åŒ–</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿæˆå®‰å…¨å¯†é’¥ï¼ˆ32ä½éšæœºå­—ç¬¦ä¸²ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">generateSecureKey</span><span class="hljs-params">()</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">chars</span> <span class="hljs-operator">=</span> <span class="hljs-string">"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"</span>;
    <span class="hljs-type">SecureRandom</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> SecureRandom.getInstanceStrong();
    <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();

    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">32</span>; i++) {
        sb.append(chars.charAt(random.nextInt(chars.length())));
    }

    <span class="hljs-keyword">return</span> sb.toString();
}
</code></pre>
<h4 data-id="heading-22">3. è¯·æ±‚é™æµ</h4>
<p>å»ºè®®ç»“åˆ Redis å®ç°è¯·æ±‚é™æµï¼Œé˜²æ­¢æš´åŠ›ç ´è§£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç®€é™æµé€»è¾‘ç¤ºä¾‹</span>
<span class="hljs-type">String</span> <span class="hljs-variable">rateLimitKey</span> <span class="hljs-operator">=</span> <span class="hljs-string">"api_limit:"</span> + apiKey;
<span class="hljs-type">long</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> redisTemplate.opsForValue().increment(rateLimitKey);
<span class="hljs-keyword">if</span> (count &gt; <span class="hljs-number">100</span>) { <span class="hljs-comment">// æ¯åˆ†é’Ÿé™åˆ¶100æ¬¡è¯·æ±‚</span>
    <span class="hljs-keyword">return</span> writeErrorResponse(response, <span class="hljs-string">"Too many requests"</span>);
}
</code></pre>
<h2 data-id="heading-23">æµ‹è¯•éªŒè¯</h2>
<h4 data-id="heading-24">æ­£å¸¸æµç¨‹æµ‹è¯•</h4>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä½¿ç”¨curlæµ‹è¯•ï¼ˆéœ€è¦å…ˆæ ¹æ®å‚æ•°ç”Ÿæˆç­¾åï¼‰</span>
timestamp=$(<span class="hljs-built_in">date</span> +%s)
signature=$(ç”Ÿæˆç­¾åé€»è¾‘)
curl -X GET <span class="hljs-string">"http://localhost:8080/api/protected/data?userId=12345"</span> \
  -H <span class="hljs-string">"X-Api-Key: client1"</span> \
  -H <span class="hljs-string">"X-Timestamp: <span class="hljs-variable">$timestamp</span>"</span> \
  -H <span class="hljs-string">"X-Signature: <span class="hljs-variable">$signature</span>"</span>
</code></pre>
<h4 data-id="heading-25">å¼‚å¸¸åœºæ™¯æµ‹è¯•</h4>
<ul>
<li><strong>ç­¾åé”™è¯¯</strong>ï¼šä¿®æ”¹å‚æ•°ä½†ä¸æ›´æ–°ç­¾å</li>
<li><strong>æ—¶é—´æˆ³è¿‡æœŸ</strong>ï¼šä½¿ç”¨è¿‡æœŸçš„æ—¶é—´æˆ³</li>
<li><strong>å¯†é’¥é”™è¯¯</strong>ï¼šä½¿ç”¨é”™è¯¯çš„API Key</li>
<li><strong>ç¼ºå°‘å¤´ä¿¡æ¯</strong>ï¼šç¼ºå°‘å¿…è¦çš„è¯·æ±‚å¤´</li>
</ul>
<h2 data-id="heading-26">æ€»ç»“</h2>
<p>é€šè¿‡ Spring Boot æ‹¦æˆªå™¨å’Œ HMAC-SHA256 ç®—æ³•ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€å¥—å®Œæ•´ä¸”å®ç”¨çš„ API ç­¾åéªŒè¯æ–¹æ¡ˆã€‚è¿™å¥—æœºåˆ¶æœ‰æ•ˆè§£å†³äº†ç³»ç»Ÿé—´è°ƒç”¨çš„å®‰å…¨é—®é¢˜ï¼Œè€Œä¸”å¯¹ç°æœ‰ä»£ç å‡ ä¹é›¶ä¾µå…¥ï¼Œç›´æ¥å¤ç”¨å³å¯ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä½ å¯ä»¥æ ¹æ®å…·ä½“éœ€æ±‚è°ƒæ•´æ—¶é—´æˆ³å®¹å¿åº¦ã€å¯†é’¥ç®¡ç†ç­–ç•¥ç­‰é…ç½®ï¼Œå®ç°çµæ´»çš„å®‰å…¨æ§åˆ¶ã€‚</p>
<h2 data-id="heading-27">ä»“åº“</h2>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/github.com/yuboon</span><span class="hljs-regexp">/java-examples/tree</span><span class="hljs-regexp">/master/springboot</span>-api-signature
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•é˜²æ­¢ IPA è¢«åç¼–è¯‘ï¼Œä»ç»“æ„éšè—åˆ°ç¬¦å·æ··æ·†çš„å¤šå±‚é˜²æŠ¤æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7576378563575005199</link>    <guid>https://juejin.cn/post/7576378563575005199</guid>    <pubDate>2025-11-25T06:44:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563575005199" data-draft-id="7576208176007626804" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•é˜²æ­¢ IPA è¢«åç¼–è¯‘ï¼Œä»ç»“æ„éšè—åˆ°ç¬¦å·æ··æ·†çš„å¤šå±‚é˜²æŠ¤æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-25T06:44:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="00åç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1159358440539900"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•é˜²æ­¢ IPA è¢«åç¼–è¯‘ï¼Œä»ç»“æ„éšè—åˆ°ç¬¦å·æ··æ·†çš„å¤šå±‚é˜²æŠ¤æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1159358440539900/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    00åç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:44:48.000Z" title="Tue Nov 25 2025 06:44:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç§»åŠ¨å®‰å…¨é¢†åŸŸä¸­ï¼Œâ€œå¦‚ä½•é˜²æ­¢ IPA è¢«åç¼–è¯‘â€ä¸€ç›´æ˜¯ iOS å¼€å‘å›¢é˜Ÿæœ€å…³å¿ƒçš„é—®é¢˜ä¹‹ä¸€ã€‚
æ— è®ºä½ çš„é¡¹ç›®æ˜¯ Swiftã€ObjCã€Flutterã€RN æˆ–æ··åˆæ¶æ„ï¼Œåªè¦ IPA æš´éœ²åœ¨æ”»å‡»è€…æ‰‹ä¸­ï¼Œä»–ä»¬å°±èƒ½åˆ©ç”¨ç±»åå°„ã€ç¬¦å·æ‰«æã€èµ„æºè§£æä»¥åŠ Hopper/IDA ç­‰å·¥å…·æ¢å¤å¤§é‡æœ‰ä»·å€¼çš„ä¿¡æ¯ï¼Œä»è€Œåˆ†æä½ çš„ä¸šåŠ¡é€»è¾‘ã€è°ƒç”¨é“¾è·¯çº¿ä»¥åŠå…³é”®æ¨¡å—ã€‚</p>
<p>å› æ­¤ï¼ŒçœŸæ­£çš„ç›®æ ‡ä»æ¥ä¸æ˜¯â€œé˜»æ­¢åç¼–è¯‘â€â€”â€”åç¼–è¯‘æ— æ³•é˜»æ­¢ï¼Œè€Œæ˜¯è¦è®©æ”»å‡»è€… <strong>åç¼–è¯‘åå‡ ä¹çœ‹ä¸æ‡‚ã€éš¾ä»¥å®šä½ã€æ— æ³•æ›¿æ¢èµ„æºã€æ— æ³•é‡æ‰“åŒ…</strong>ï¼Œä»å·¥ç¨‹ç»“æ„ä¸Šæé«˜æ”»å‡»æˆæœ¬ã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä¸€å¥—é€‚ç”¨äºå„ç§ iOS åº”ç”¨çš„å¯è½åœ°æ–¹æ¡ˆã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€IPA ä¸ºä»€ä¹ˆå®¹æ˜“è¢«åç¼–è¯‘ï¼Ÿ</h2>
<h3 data-id="heading-1"><strong>1. Swift/ObjC ç”Ÿæˆå¤§é‡å¯è¯»ç¬¦å·</strong></h3>
<p>Hopperã€IDAã€class-dump èƒ½è½»æ¾æ¢å¤ï¼š</p>
<ul>
<li>æ–¹æ³•å</li>
<li>ç±»å</li>
<li>å±æ€§å</li>
<li>Selector</li>
<li>Swift æ¨¡å—ç»“æ„</li>
</ul>
<p>å¯¹é€†å‘äººå‘˜æ¥è¯´ï¼Œè¿™äº›å°±æ˜¯â€œé˜…è¯»ä»£ç â€çš„å…¥å£ã€‚</p>
<hr/>
<h3 data-id="heading-2"><strong>2. èµ„æºæ˜æ–‡æš´éœ²</strong></h3>
<p>å¸¸è§å¯ç›´æ¥è¯»å–å’Œæ›¿æ¢çš„æ–‡ä»¶ï¼š</p>
<ul>
<li>å›¾ç‰‡</li>
<li>JSON é…ç½®</li>
<li>JS / H5 æ–‡ä»¶</li>
<li>mp3 / è§†é¢‘èµ„æº</li>
<li>bundle ç»“æ„</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯ææ˜“è¢«åˆ†æçš„å†…å®¹ã€‚</p>
<hr/>
<h3 data-id="heading-3"><strong>3. IPA å¯è¢«è§£åŒ…ã€é‡ç­¾å</strong></h3>
<p>æ”»å‡»è€…å®Œå…¨å¯ä»¥ï¼š</p>
<ul>
<li>è§£åŒ…</li>
<li>æ³¨å…¥ dylib</li>
<li>ä¿®æ”¹èµ„æº</li>
<li>é‡æ–°ç­¾å</li>
<li>åœ¨è¶Šç‹±è®¾å¤‡æˆ–ä¼ä¸šåˆ†å‘ç¯å¢ƒå®‰è£…</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯åç¼–è¯‘ç¯å¢ƒçš„åŸºç¡€ã€‚</p>
<p>æ‰€ä»¥â€œé˜²åç¼–è¯‘â€å¿…é¡»ä»æ ¹æºè¿›è¡Œç»“æ„ä¸ç¬¦å·éšè—ã€‚</p>
<hr/>
<h2 data-id="heading-4">äºŒã€é˜²åç¼–è¯‘å¿…é¡»ä¾èµ–å¤šå·¥å…·ååŒï¼ˆè€Œä¸æ˜¯å•ç‚¹åŠ å›ºï¼‰</h2>
<p>ä¸‹é¢æ˜¯å¸¸ç”¨å·¥å…·çŸ©é˜µï¼š</p>













































<table><thead><tr><th>ç›®æ ‡</th><th>å·¥å…·</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>ç»“æ„åˆ†æ</td><td>MobSFã€class-dump</td><td>ç¡®å®šæš´éœ²é¢ä¸ç™½åå•</td></tr><tr><td>IPA ç¬¦å·æ··æ·†ï¼ˆæ ¸å¿ƒï¼‰</td><td><strong>Ipa Guard CLI</strong></td><td>æ— éœ€æºç å³å¯æ··æ·†ç¬¦å·ä¸èµ„æº</td></tr><tr><td>èµ„æºæ‰°åŠ¨</td><td>Ipa Guardã€è„šæœ¬å·¥å…·</td><td>å›¾ç‰‡/JS/JSON æ”¹åã€MD5 ä¿®æ”¹</td></tr><tr><td>è¿è¡Œæ—¶å¯¹æŠ—</td><td>Frida æ£€æµ‹ã€åè°ƒè¯•</td><td>æé«˜ Hook é€†å‘æˆæœ¬</td></tr><tr><td>éªŒè¯æ•ˆæœ</td><td>Hopperã€IDA</td><td>æŸ¥çœ‹ç¬¦å·å¯è¯»æ€§ä¸‹é™æƒ…å†µ</td></tr><tr><td>é‡ç­¾éªŒæ”¶</td><td>kxsign</td><td>æ··æ·†åçœŸæœºéªŒè¯ç¨³å®šæ€§</td></tr><tr><td>æ²»ç†ä¸å›æ»š</td><td>KMSã€Bugly</td><td>æ˜ å°„è¡¨ç®¡ç†ä¸ç¬¦å·åŒ–</td></tr></tbody></table>
<p>è¿™æ˜¯æ•´ä½“æ–¹æ¡ˆçš„åŸºç¡€ã€‚</p>
<hr/>
<p>ä¸‰ã€å¯è½åœ°çš„â€œé˜²åç¼–è¯‘â€å·¥ç¨‹æµç¨‹</p>
<p>ä»¥ä¸‹æµç¨‹é€‚ç”¨æ‰€æœ‰ç±»å‹çš„ iOS åº”ç”¨ï¼ŒåŒ…æ‹¬æœ‰æºç ã€æ— æºç ã€å¤–åŒ…é¡¹ç›®ã€æ··åˆé¡¹ç›®ç­‰ã€‚</p>
<hr/>
<h3 data-id="heading-5"><strong>æ­¥éª¤ 1ï¼šä½¿ç”¨ MobSF ä¸ class-dump åˆ†ææš´éœ²é¢</strong></h3>
<p>ç›®çš„ï¼š</p>
<ul>
<li>æ‰¾åˆ°æš´éœ²çš„ Swift/ObjC ç¬¦å·</li>
<li>æ‰¾å‡º JSã€JSONã€H5 çš„è·¯å¾„</li>
<li>åˆ†æå“ªäº›æ–¹æ³•ä¾èµ–åå°„</li>
<li>æ ‡è®°éœ€è¦åŠ å…¥ç™½åå•çš„ç¬¦å·</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua">class-<span class="hljs-built_in">dump</span> app.ipa &gt; <span class="hljs-built_in">dump</span>.txt
</code></pre>
<p>è¾“å‡ºæ–‡ä»¶å†³å®šå“ªäº›ç¬¦å·ä¸èƒ½è¢«æ··æ·†ã€‚</p>
<hr/>
<h3 data-id="heading-6"><strong>æ­¥éª¤ 2ï¼šå¯¼å‡ºå¯æ··æ·†ç¬¦å·ï¼ˆæ— éœ€æºç ï¼‰</strong></h3>
<p>ä½¿ç”¨ <strong>Ipa Guard CLI</strong>ï¼š</p>
<pre><code class="hljs">ipaguard_cli parse app.ipa -o sym.json
</code></pre>
<p><code>sym.json</code> ä¸­åŒ…å«ï¼š</p>
<ul>
<li>å¯æ··æ·†æ–¹æ³•å</li>
<li>æ–‡ä»¶å¼•ç”¨ï¼ˆfileReferencesï¼‰</li>
<li>å­—ç¬¦ä¸²å¼•ç”¨ï¼ˆstringReferencesï¼‰</li>
<li>å¯å¦æ··æ·†å­—æ®µï¼ˆconfuseï¼‰</li>
</ul>
<p>è¿™æ˜¯åç»­é˜²åç¼–è¯‘çš„é‡è¦ç­–ç•¥æ–‡ä»¶ã€‚</p>
<hr/>
<h3 data-id="heading-7"><strong>æ­¥éª¤ 3ï¼šç¼–è¾‘æ··æ·†ç­–ç•¥ï¼ˆå†³å®šå®‰å…¨ä¸Šé™ï¼‰</strong></h3>
<p>å¿…é¡»æ’é™¤çš„ç¬¦å·ï¼š</p>
<ul>
<li>Storyboard id</li>
<li>JS/H5 å›è°ƒæ–¹æ³•</li>
<li>Flutter/RN æ¡¥æ¥æ–¹æ³•</li>
<li>SDK åˆå§‹åŒ–æ–¹æ³•</li>
<li>selector åå°„è°ƒç”¨æ–¹æ³•</li>
</ul>
<p>å¯ä»¥æ··æ·†çš„ç¬¦å·ï¼š</p>
<ul>
<li>å†…éƒ¨ä¸šåŠ¡é€»è¾‘</li>
<li>å·¥å…·ç±»ã€æ§åˆ¶å™¨</li>
<li>Swift/ObjC ç§æœ‰æ–¹æ³•</li>
<li>æœåŠ¡ç«¯é€šä¿¡é€»è¾‘å…¥å£</li>
</ul>
<p>å¹¶ä¸”ï¼š</p>
<ul>
<li><code>refactorName</code> é•¿åº¦å¿…é¡»ä¿æŒä¸€è‡´</li>
<li>ä¸å¯é‡å¤</li>
<li>ä¸å¼•ç”¨æ–‡ä»¶ä¿æŒä¸€è‡´</li>
</ul>
<p>è¿™ä¸€æ­¥å†³å®šâ€œåç¼–è¯‘åæ˜¯å¦èƒ½çœ‹æ‡‚â€ã€‚</p>
<hr/>
<h3 data-id="heading-8"><strong>æ­¥éª¤ 4ï¼šå¯¹ IPA æ‰§è¡Œç¬¦å·æ··æ·†ä¸èµ„æºæ‰°åŠ¨ï¼ˆé˜²åç¼–è¯‘çš„æ ¸å¿ƒæ­¥éª¤ï¼‰</strong></h3>
<p>Ipa Guardï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">ipaguard_cli protect app.ipa -c sym.json --email dev@team.com --image --js -o <span class="hljs-keyword">protected</span>.ipa
</code></pre>
<p>æ··æ·†ç»“æœåŒ…æ‹¬ï¼š</p>
<p>Swift/ObjC æ–¹æ³•åä¸å¯è¯»
ç±»åæ··æ·†ã€ç»“æ„æ¨¡ç³ŠåŒ–
JS/H5 è·¯å¾„å˜æ›´ï¼ˆéš¾å®šä½ï¼‰
èµ„æºæ–‡ä»¶åé‡å†™
å›¾ç‰‡ã€èµ„æº MD5 ä¿®æ”¹ï¼ˆä¸å¯æ›¿æ¢ï¼‰
è¾“å‡ºæ··æ·†æ˜ å°„è¡¨ï¼ˆç”¨äºå›æ»šï¼‰</p>
<p>åç¼–è¯‘åçš„å¯è¯»æ€§ä¼šæ˜¾è‘—é™ä½ã€‚</p>
<hr/>
<h3 data-id="heading-9"><strong>æ­¥éª¤ 5ï¼šé‡ç­¾åå¹¶çœŸæœºéªŒè¯</strong></h3>
<p>ä½¿ç”¨ kxsignï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">kxsign sign <span class="hljs-keyword">protected</span>.ipa -c dev.p12 -p pwd \
  -m dev.mobileprovision -z <span class="hljs-type">signed</span>.ipa -i
</code></pre>
<p>æµ‹è¯•ï¼š</p>
<ul>
<li>æ˜¯å¦èƒ½é¡ºåˆ©å¯åŠ¨</li>
<li>JS/H5 é¡µé¢æ˜¯å¦æ­£å¸¸æ¸²æŸ“</li>
<li>SDK åˆå§‹åŒ–æ˜¯å¦æ­£å¸¸</li>
<li>ç½‘ç»œã€Payã€Push æ˜¯å¦æˆåŠŸ</li>
</ul>
<p>ç¡®ä¿æ··æ·†æ²¡æœ‰ç ´åä¸šåŠ¡é€»è¾‘ã€‚</p>
<hr/>
<h3 data-id="heading-10"><strong>æ­¥éª¤ 6ï¼šä½¿ç”¨ Hopper/IDA è¿›è¡Œåç¼–è¯‘æ•ˆæœéªŒè¯</strong></h3>
<p>æ£€æŸ¥ï¼š</p>
<ul>
<li>æ–¹æ³•åæ˜¯å¦å®Œå…¨ä¹±ç </li>
<li>ç»“æ„æ˜¯å¦æ··æ·†</li>
<li>ç±»å±‚çº§æ˜¯å¦éš¾ä»¥ç†è§£</li>
<li>æ˜¯å¦ä»èƒ½çœ‹åˆ°å…³é”®ä¸šåŠ¡åç§°</li>
</ul>
<p>è¿™æ˜¯æ£€éªŒâ€œé˜²åç¼–è¯‘æ•ˆæœâ€çš„æœ€ä½³æ–¹æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-11"><strong>æ­¥éª¤ 7ï¼šä½¿ç”¨ Frida è¿›è¡ŒåŠ¨æ€ Hook æµ‹è¯•</strong></h3>
<pre><code class="hljs language-css" lang="css">frida -U -f com<span class="hljs-selector-class">.app</span> <span class="hljs-attr">--no-pause</span> -l hook<span class="hljs-selector-class">.js</span>
</code></pre>
<p>è§‚å¯Ÿï¼š</p>
<ul>
<li>æ˜¯å¦èƒ½è½»æ˜“å®šä½æ–¹æ³•</li>
<li>æ˜¯å¦èƒ½ Hook åˆ°å…³é”®é€»è¾‘</li>
<li>æ˜¯å¦èƒ½è¿½è¸ªä¸šåŠ¡æµç¨‹</li>
</ul>
<p>å¦‚æœ Hook æˆæœ¬æ˜¾è‘—æé«˜ï¼Œåˆ™è¡¨æ˜æ··æ·†ç­–ç•¥æˆåŠŸã€‚</p>
<hr/>
<h3 data-id="heading-12"><strong>æ­¥éª¤ 8ï¼šæ˜ å°„è¡¨æ²»ç†ä¸åœ¨çº¿ç¬¦å·åŒ–</strong></h3>
<p>å­˜å‚¨ï¼š</p>
<ul>
<li>æ··æ·†æ˜ å°„è¡¨</li>
<li>sym.json ç­–ç•¥æ–‡ä»¶</li>
<li>æ„å»ºå·ä¸ç‰ˆæœ¬å·</li>
<li>å®‰è£…åŒ…ç­¾åæŒ‡çº¹</li>
</ul>
<p>ç”¨äºï¼š</p>
<ul>
<li>å´©æºƒç¬¦å·åŒ–</li>
<li>ç­–ç•¥å®¡è®¡</li>
<li>å¿«é€Ÿå›æ»š</li>
</ul>
<p>ä½¿ç”¨ KMS æˆ– Git åŠ å¯†ä»“åº“å­˜å‚¨ã€‚</p>
<hr/>
<h2 data-id="heading-13">å››ã€é˜²åç¼–è¯‘å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ³•</h2>



































<table><thead><tr><th>é—®é¢˜</th><th>åŸå› </th><th>è§£å†³æ–¹æ¡ˆ</th></tr></thead><tbody><tr><td>App æ··æ·†åå´©æºƒ</td><td>é”™è¯¯æ··æ·†äº†åå°„æ–¹æ³•æˆ– Storyboard</td><td>é€šè¿‡ sym.json åŠ ç™½åå•</td></tr><tr><td>H5 é¡µé¢å¤±æ•ˆ</td><td>JS è·¯å¾„è¢«æ”¹ä½†å¼•ç”¨æœªæ›´æ–°</td><td>ä½¿ç”¨ <code>--js</code> æˆ–æ‰‹åŠ¨åŒæ­¥</td></tr><tr><td>Flutter/RN æ— æ³•å¯åŠ¨</td><td>æ¡¥æ¥æ–¹æ³•è¢«æ··æ·†</td><td>ç¦æ··æ·† MethodChannel åç§°</td></tr><tr><td>åç¼–è¯‘ä»èƒ½çœ‹æ‡‚æ–¹æ³•å</td><td>æ··æ·†ç­–ç•¥è¦†ç›–ç‡ä¸è¶³</td><td>æ‰©å¤§æ··æ·†èŒƒå›´</td></tr><tr><td>å´©æºƒæ— æ³•å®šä½</td><td>æ˜ å°„è¡¨æœªä¿å­˜</td><td>å¿…é¡»å»ºç«‹æ²»ç†æµç¨‹</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-14">é˜²åç¼–è¯‘æ˜¯ä½“ç³»åŒ–å·¥ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŠ å›ºåŠ¨ä½œ</h2>
<p>æ¨èçš„å®Œæ•´æ–¹æ¡ˆï¼š</p>
<h3 data-id="heading-15"><strong>åˆ†æå±‚</strong></h3>
<p>MobSFã€class-dump</p>
<h3 data-id="heading-16"><strong>æ··æ·†å±‚ï¼ˆæœ€é‡è¦ï¼‰</strong></h3>
<p>Ipa Guard CLI</p>
<ul>
<li>æ— æºç æ··æ·†</li>
<li>èµ„æºæ‰°åŠ¨</li>
<li>JS/H5 æ”¹å</li>
<li>å›¾ç‰‡ MD5 ä¿®æ”¹</li>
</ul>
<h3 data-id="heading-17"><strong>éªŒè¯å±‚</strong></h3>
<p>kxsignï¼ˆé‡ç­¾éªŒè¯ï¼‰ã€Fridaï¼ˆHook æµ‹è¯•ï¼‰ã€Hopperï¼ˆåç¼–è¯‘éªŒè¯ï¼‰</p>
<h3 data-id="heading-18"><strong>æ²»ç†å±‚</strong></h3>
<p>KMS / Bugly / Sentryã€Git åŠ å¯†ä»“åº“</p>
<p>é€šè¿‡ä¸Šè¿°å¤šå±‚ç»„åˆï¼Œå¯ä»¥æœ€å¤§é™åº¦æå‡ IPA çš„åç¼–è¯‘éš¾åº¦ï¼Œè®©é€†å‘å·¥ç¨‹å˜å¾—â€œä¸å€¼å¾—â€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€èµ·èŠèŠå¤§è§„æ¨¡ AI Agent éƒ¨ç½²ä¸è¿ç»´å®æˆ˜]]></title>    <link>https://juejin.cn/post/7576264484688773160</link>    <guid>https://juejin.cn/post/7576264484688773160</guid>    <pubDate>2025-11-25T06:50:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484688773160" data-draft-id="7576378563574972431" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€èµ·èŠèŠå¤§è§„æ¨¡ AI Agent éƒ¨ç½²ä¸è¿ç»´å®æˆ˜"/> <meta itemprop="keywords" content="Agent"/> <meta itemprop="datePublished" content="2025-11-25T06:50:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€èµ·èŠèŠå¤§è§„æ¨¡ AI Agent éƒ¨ç½²ä¸è¿ç»´å®æˆ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:50:39.000Z" title="Tue Nov 25 2025 06:50:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘ä»¬è¯šæŒšåœ°é‚€è¯·æ‚¨å‚åŠ å°†äºÂ <strong>11 æœˆ 28 æ—¥ï¼ˆå‘¨äº”ï¼‰ä¸‹åˆï¼Œåœ¨åŒ—äº¬é˜¿é‡Œä¸­å¿ƒä¸¾åŠçš„</strong>Â  <strong>ã€ä¼ä¸š AI åŸç”Ÿåº”ç”¨æ¶æ„å‡çº§ã€‘</strong> ä¸»é¢˜ç ”è®¨ä¼šã€‚</p>
<p>è¿›å…¥é“¾æ¥ç«‹å³æŠ¥åï¼Œç ´è§£ AI è½åœ°éš¾é¢˜ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsurvey.aliyun.com%2Fapps%2Fzhiliao%2FtvSPhYv9e" target="_blank" title="https://survey.aliyun.com/apps/zhiliao/tvSPhYv9e" ref="nofollow noopener noreferrer">survey.aliyun.com/apps/zhiliaâ€¦</a></p>
<p>AI Agent å·²æ˜¯ä¼ä¸šæ™ºèƒ½åŒ–çš„æ ‡é…ï¼Œä½†ä¼ ç»Ÿçš„åŸºç¡€è®¾æ–½æ­£æˆä¸ºå…¶å‘å±•çš„ç“¶é¢ˆã€‚ä¸ºæ­¤ï¼Œé˜¿é‡Œäº‘å°†äº‘åŸç”Ÿä¸ AI å·¥ç¨‹åŒ–æ·±åº¦èåˆï¼Œæ‰“é€ å…¨æ–°çš„ AI åŸç”ŸæŠ€æœ¯æ ˆã€‚æœ¬æ¬¡æ´»åŠ¨ï¼Œæˆ‘ä»¬å°†èšç„¦äºäº‘åŸºç¡€è®¾æ–½ä»ä¼ ç»Ÿå½¢æ€å‘ AI åŸç”Ÿæ¶æ„çš„æ¼”è¿›è·¯å¾„ï¼Œä¸æ‚¨ä¸€åŒï¼š</p>
<ul>
<li>åˆ†äº«é˜¿é‡Œäº‘åœ¨ AI åŸºç¡€è®¾æ–½é¢†åŸŸçš„æœ€æ–°å®è·µä¸æ ¸å¿ƒè¦ç´ ï¼›</li>
<li>ç ”è®¨å¦‚ä½•åº”å¯¹ AI Agent çš„å¼€å‘æ•ˆç‡ä¸æˆæœ¬æŒ‘æˆ˜ï¼›</li>
<li>æ¢å¯»AI åº”ç”¨ä¸ä¼ä¸šå·²æœ‰æ•°å­—åŒ–åŸºç¡€çš„æ— ç¼èåˆä¹‹é“ï¼›</li>
<li>äº¤æµä¿éšœ AI åº”ç”¨å¤§è§„æ¨¡ã€å®‰å…¨ã€ç¨³å®šè¿è¡Œçš„æœ€ä½³ç­–ç•¥ã€‚</li>
</ul>
<p><strong>æ´»åŠ¨ä¿¡æ¯ï¼š</strong></p>
<ul>
<li>æ´»åŠ¨ä¸»é¢˜ï¼šÂ ä¼ä¸šAIåŸç”Ÿåº”ç”¨æ¶æ„å‡çº§</li>
<li>æ´»åŠ¨æ—¶é—´ï¼šÂ 11 æœˆ 28 æ—¥ï¼ˆå‘¨äº”ï¼‰ 13:30 - 17:00</li>
<li>æ´»åŠ¨åœ°ç‚¹ï¼šÂ åŒ—äº¬é˜¿é‡Œä¸­å¿ƒÂ·æœ›äº¬Aåº§5F-14 å²³éº“ä¹¦é™¢</li>
<li>æŠ¥åé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsurvey.aliyun.com%2Fapps%2Fzhiliao%2FtvSPhYv9e" target="_blank" title="https://survey.aliyun.com/apps/zhiliao/tvSPhYv9e" ref="nofollow noopener noreferrer">survey.aliyun.com/apps/zhiliaâ€¦</a></li>
</ul>
<p>ç°åœºå¸­ä½æœ‰é™ï¼ŒæœŸå¾…ä¸æ‚¨ä¸€èµ·æ¢ç´¢å¦‚ä½•ä¸ºä¼ä¸šæ„å»ºçœŸæ­£å¯ä¿¡èµ–ã€å¯æ‰©å±•ã€å¯è¿›åŒ–çš„ä¸‹ä¸€ä»£ AI åº”ç”¨ä½“ç³»ã€‚</p>
<p><strong>è®®ç¨‹è¯¦æƒ… ğŸ‘‡</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0ecfc3f932af439ca7f5b580251f5c61~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658239&amp;x-signature=TxkjiRyxoQBIF%2FOd%2FenMMFKmTXg%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React è‡ªå®šä¹‰ Hookï¼šèƒ½å¦ä½œä¸ºæ¨¡å—çº§å…¨å±€çŠ¶æ€ç®¡ç†ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7575887863796924426</link>    <guid>https://juejin.cn/post/7575887863796924426</guid>    <pubDate>2025-11-24T06:43:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575887863796924426" data-draft-id="7575887863796793354" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React è‡ªå®šä¹‰ Hookï¼šèƒ½å¦ä½œä¸ºæ¨¡å—çº§å…¨å±€çŠ¶æ€ç®¡ç†ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2025-11-24T06:43:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å°æ²³"/> <meta itemprop="url" content="https://juejin.cn/user/4222562141210478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React è‡ªå®šä¹‰ Hookï¼šèƒ½å¦ä½œä¸ºæ¨¡å—çº§å…¨å±€çŠ¶æ€ç®¡ç†ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222562141210478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å°æ²³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T06:43:15.000Z" title="Mon Nov 24 2025 06:43:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ React å¼€å‘ä¸­ï¼ŒçŠ¶æ€ç®¡ç†æ˜¯æ ¸å¿ƒéœ€æ±‚ä¹‹ä¸€ã€‚ä»ç®€å•çš„ç»„ä»¶å†… stateï¼Œåˆ° Context APIã€Redux ç­‰å…¨å±€çŠ¶æ€æ–¹æ¡ˆï¼Œå¼€å‘è€…ä¸€ç›´åœ¨æ ¹æ®åœºæ™¯é€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆã€‚è€Œè‡ªå®šä¹‰ Hook ä½œä¸º React çš„æ ¸å¿ƒç‰¹æ€§ï¼Œå› å…¶å¤ç”¨é€»è¾‘çš„èƒ½åŠ›ï¼Œå¸¸å¸¸è¢«å¼€å‘è€…å°è¯•ç”¨äºå…¨å±€çŠ¶æ€ç®¡ç†ã€‚ä½†éšä¹‹è€Œæ¥çš„ç–‘é—®æ˜¯ï¼šè‡ªå®šä¹‰ Hook çœŸçš„èƒ½å®ç°æ¨¡å—çº§å…¨å±€çŠ¶æ€å—ï¼Ÿä¸ºä»€ä¹ˆèƒ½è¿™ä¹ˆåšï¼Ÿæ¯æ¬¡å¼•å…¥åå†…éƒ¨çš„ state ä¼šé‡æ–°åˆå§‹åŒ–å—ï¼Ÿæœ¬æ–‡å°†ä»åŸç†ã€ç¤ºä¾‹ã€ç»†èŠ‚ä¸‰ä¸ªç»´åº¦ï¼Œå½»åº•è§£ç­”è¿™äº›é—®é¢˜ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å…ˆæ˜ç¡®ç»“è®º</h2>
<ol>
<li><strong>è‡ªå®šä¹‰ Hook å¯ä»¥å®ç°æ¨¡å—çº§å…¨å±€çŠ¶æ€ç®¡ç†</strong>ï¼Œä½†æœ‰é€‚ç”¨åœºæ™¯ï¼ˆå°å‹åº”ç”¨ã€éå¤æ‚çŠ¶æ€ï¼‰ï¼›</li>
<li>å…¶æ ¸å¿ƒåŸç†æ˜¯<strong>æ¨¡å—çº§ä½œç”¨åŸŸçš„é—­åŒ…ç¼“å­˜</strong>â€”â€” çŠ¶æ€è¢«å­˜å‚¨åœ¨æ¨¡å—çš„é—­åŒ…ä¸­ï¼Œè€Œéç»„ä»¶å®ä¾‹ï¼Œå› æ­¤è·¨ç»„ä»¶å¤ç”¨ Hook æ—¶èƒ½å…±äº«åŒä¸€çŠ¶æ€ï¼›</li>
<li>æ¯æ¬¡ç»„ä»¶å¼•å…¥å¹¶è°ƒç”¨è¯¥ Hook æ—¶ï¼Œ<strong>å†…éƒ¨çš„ state ä¸ä¼šé‡æ–°æ‰§è¡Œåˆå§‹åŒ–</strong>ï¼Œè€Œæ˜¯å¤ç”¨æ¨¡å—é—­åŒ…ä¸­ç¼“å­˜çš„çŠ¶æ€ï¼ˆä»…ç»„ä»¶æ¸²æŸ“æ—¶é‡æ–°æ‰§è¡Œ Hook çš„é€»è¾‘ï¼Œä½† state å¼•ç”¨ä¸å˜ï¼‰ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ä¸ºä»€ä¹ˆè‡ªå®šä¹‰ Hook èƒ½å®ç°å…¨å±€çŠ¶æ€ï¼Ÿæ ¸å¿ƒåŸç†æ‹†è§£</h2>
<p>è¦ç†è§£è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å…ˆç†æ¸…ä¸¤ä¸ªå…³é”®æ¦‚å¿µï¼š<strong>æ¨¡å—ä½œç”¨åŸŸ</strong>å’Œ<strong>React Hook çš„æ‰§è¡Œæœºåˆ¶</strong>ã€‚</p>
<h3 data-id="heading-2">1. æ¨¡å—ä½œç”¨åŸŸï¼šçŠ¶æ€çš„ â€œå…¨å±€å®¹å™¨â€</h3>
<p>åœ¨ ES6 æ¨¡å—ç³»ç»Ÿä¸­ï¼Œæ¯ä¸ª<code>.js</code>æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œæ¨¡å—å†…çš„å˜é‡ã€å‡½æ•°ä¼šå½¢æˆ<strong>æ¨¡å—çº§ä½œç”¨åŸŸ</strong>â€”â€” å³æ¨¡å—è¢«å¯¼å…¥æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œä¸€æ¬¡åˆå§‹åŒ–ï¼Œä¹‹åæ‰€æœ‰å¯¼å…¥è¯¥æ¨¡å—çš„åœ°æ–¹ï¼Œå…±äº«çš„æ˜¯åŒä¸€ä¸ªæ¨¡å—å®ä¾‹ï¼Œæ¨¡å—å†…çš„å˜é‡ä¸ä¼šè¢«é‡å¤åˆ›å»ºã€‚</p>
<h3 data-id="heading-3">2. React Hook çš„ â€œçŠ¶æ€ç»‘å®šâ€ï¼šä¾èµ–é—­åŒ…è€Œéç»„ä»¶å®ä¾‹</h3>
<p>React çš„<code>useState</code>ã€<code>useEffect</code>ç­‰ Hookï¼Œå…¶çŠ¶æ€æ˜¯<strong>ä¸ç»„ä»¶æ¸²æŸ“å®ä¾‹ç»‘å®š</strong>çš„å—ï¼Ÿè¡¨é¢çœ‹æ˜¯ï¼Œä½†å¦‚æœå°† Hook çš„é€»è¾‘æŠ½ç¦»åˆ°æ¨¡å—ä¸­ï¼Œç»“åˆæ¨¡å—ä½œç”¨åŸŸï¼Œæƒ…å†µä¼šå‘ç”Ÿå˜åŒ–ï¼š</p>
<p>å½“æˆ‘ä»¬åœ¨æ¨¡å—ä¸­å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰ Hookï¼Œå¹¶åœ¨ Hook å†…éƒ¨è°ƒç”¨<code>useState</code>æ—¶ï¼Œè¿™ä¸ª<code>useState</code>çš„çŠ¶æ€<strong>å¹¶ä¸ä¼šç»‘å®šåˆ°æŸä¸ªå…·ä½“ç»„ä»¶</strong>ï¼Œè€Œæ˜¯ç»‘å®šåˆ° â€œæ¨¡å—çº§é—­åŒ…â€ ä¸­ã€‚å› ä¸ºï¼š</p>
<ul>
<li>æ¨¡å—åˆå§‹åŒ–æ—¶ï¼Œè‡ªå®šä¹‰ Hook çš„å‡½æ•°å®šä¹‰è¢«åˆ›å»ºï¼Œå…¶å†…éƒ¨çš„<code>useState</code>è°ƒç”¨ä¼šå½¢æˆä¸€ä¸ªé—­åŒ…ï¼›</li>
<li>æ— è®ºå“ªä¸ªç»„ä»¶å¯¼å…¥å¹¶è°ƒç”¨è¿™ä¸ª Hookï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯æ‰§è¡ŒåŒä¸€ä¸ªæ¨¡å—ä¸­çš„ Hook å‡½æ•°ï¼Œå…±äº«åŒä¸€ä¸ªé—­åŒ…ç¯å¢ƒï¼›</li>
<li>å› æ­¤ï¼Œæ‰€æœ‰ç»„ä»¶é€šè¿‡è¯¥ Hook è®¿é—®çš„<code>state</code>å’Œ<code>setState</code>ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªé—­åŒ…ä¸­çš„çŠ¶æ€å’Œæ›´æ–°å‡½æ•° â€”â€” è¿™å°±å®ç°äº† â€œå…¨å±€å…±äº«â€ã€‚</li>
</ul>
<h3 data-id="heading-4">3. å…³é”®åŒºåˆ«ï¼šæ™®é€šè‡ªå®šä¹‰ Hook vs å…¨å±€çŠ¶æ€è‡ªå®šä¹‰ Hook</h3>
<p>æ™®é€šè‡ªå®šä¹‰ Hookï¼ˆå¦‚<code>useCounter</code>ï¼‰é€šå¸¸æ˜¯ â€œç»„ä»¶ç§æœ‰â€ çš„ï¼Œå› ä¸ºå®ƒä»¬çš„<code>useState</code>æ˜¯åœ¨ç»„ä»¶è°ƒç”¨ Hook æ—¶åˆå§‹åŒ–çš„ï¼Œæ¯ä¸ªç»„ä»¶è°ƒç”¨ä¸€æ¬¡ Hookï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„çŠ¶æ€ã€‚</p>
<p>è€Œ<strong>å…¨å±€çŠ¶æ€è‡ªå®šä¹‰ Hook</strong>çš„æ ¸å¿ƒå·®å¼‚æ˜¯ï¼šå°†<code>useState</code>çš„åˆå§‹åŒ–é€»è¾‘ï¼Œé€šè¿‡æ¨¡å—ä½œç”¨åŸŸ â€œæå‡â€ åˆ°äº†æ¨¡å—å±‚é¢ï¼Œä½¿å¾—æ‰€æœ‰ç»„ä»¶è°ƒç”¨ Hook æ—¶ï¼Œå¤ç”¨åŒä¸€ä¸ª<code>useState</code>çš„ç»“æœã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€å®æˆ˜ç¤ºä¾‹ï¼šç”¨è‡ªå®šä¹‰ Hook å®ç°æ¨¡å—çº§å…¨å±€çŠ¶æ€</h2>
<p>ä¸‹é¢é€šè¿‡ 3 ä¸ªé€’è¿›ç¤ºä¾‹ï¼Œä»åŸºç¡€å®ç°åˆ°è¿›é˜¶ç”¨æ³•ï¼Œå±•ç¤ºè‡ªå®šä¹‰ Hook çš„å…¨å±€çŠ¶æ€èƒ½åŠ›ï¼Œå¹¶éªŒè¯ â€œçŠ¶æ€ä¸é‡å¤åˆå§‹åŒ–â€ çš„ç‰¹æ€§ã€‚</p>
<h3 data-id="heading-6">ç¤ºä¾‹ 1ï¼šåŸºç¡€ç‰ˆå…¨å±€çŠ¶æ€ Hookï¼ˆå…±äº«ç”¨æˆ·ä¿¡æ¯ï¼‰</h3>
<p>éœ€æ±‚ï¼šå®ç°ä¸€ä¸ªå…¨å±€ç”¨æˆ·çŠ¶æ€ï¼Œæ”¯æŒç™»å½•ã€ç™»å‡ºï¼Œåœ¨å¤šä¸ªç»„ä»¶ä¸­å…±äº«ç”¨æˆ·ä¿¡æ¯ã€‚</p>
<h4 data-id="heading-7">æ­¥éª¤ 1ï¼šå®šä¹‰å…¨å±€çŠ¶æ€ Hookï¼ˆæ¨¡å—çº§ï¼‰</h4>
<p>åˆ›å»º<code>useGlobalUser.js</code>æ–‡ä»¶ï¼Œä½œä¸ºå…¨å±€çŠ¶æ€æ¨¡å—</p>
<pre><code class="hljs language-ini" lang="ini">// useGlobalUser.jsï¼ˆæ¨¡å—çº§å…¨å±€çŠ¶æ€Hookï¼‰
import { useState, useCallback } from 'react'<span class="hljs-comment">;</span>

// æ¨¡å—ä½œç”¨åŸŸçš„å˜é‡ï¼šå­˜å‚¨ç”¨æˆ·çŠ¶æ€ï¼ˆé—­åŒ…ç¼“å­˜ï¼‰
let <span class="hljs-attr">globalUserState</span> = null<span class="hljs-comment">;</span>
// å­˜å‚¨æ‰€æœ‰è®¢é˜…ç»„ä»¶çš„æ›´æ–°å‡½æ•°ï¼ˆç”¨äºçŠ¶æ€å˜æ›´æ—¶é€šçŸ¥ç»„ä»¶é‡æ¸²æŸ“ï¼‰
let <span class="hljs-attr">subscribers</span> = new Set()<span class="hljs-comment">;</span>

// è§¦å‘æ‰€æœ‰è®¢é˜…ç»„ä»¶é‡æ¸²æŸ“
const <span class="hljs-attr">notifySubscribers</span> = () =&gt; {
  subscribers.forEach(<span class="hljs-attr">update</span> =&gt; update())<span class="hljs-comment">;</span>
}<span class="hljs-comment">;</span>

// è‡ªå®šä¹‰Hookï¼šä¾›ç»„ä»¶è°ƒç”¨
export function useGlobalUser() {
  // æ¯ä¸ªç»„ä»¶è°ƒç”¨Hookæ—¶ï¼Œåˆ›å»ºä¸€ä¸ªæœ¬åœ°çš„æ›´æ–°å‡½æ•°ï¼ˆè§¦å‘ç»„ä»¶é‡æ¸²æŸ“ï¼‰
  const <span class="hljs-section">[, forceUpdate]</span> = useState({})<span class="hljs-comment">;</span>

  // ç»„ä»¶æŒ‚è½½æ—¶è®¢é˜…ï¼Œå¸è½½æ—¶å–æ¶ˆè®¢é˜…
  useEffect(() =&gt; {
    subscribers.add(forceUpdate)<span class="hljs-comment">;</span>
    return () =&gt; {
      subscribers.delete(forceUpdate)<span class="hljs-comment">;</span>
    }<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[forceUpdate]</span>)<span class="hljs-comment">;</span>

  // ç™»å½•ï¼šæ›´æ–°å…¨å±€çŠ¶æ€å¹¶é€šçŸ¥æ‰€æœ‰è®¢é˜…ç»„ä»¶
  const <span class="hljs-attr">login</span> = useCallback((userInfo) =&gt; {
    <span class="hljs-attr">globalUserState</span> = { ...userInfo }<span class="hljs-comment">;</span>
    notifySubscribers()<span class="hljs-comment">; // è§¦å‘æ‰€æœ‰ç»„ä»¶é‡æ¸²æŸ“</span>
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  // ç™»å‡ºï¼šé‡ç½®å…¨å±€çŠ¶æ€
  const <span class="hljs-attr">logout</span> = useCallback(() =&gt; {
    <span class="hljs-attr">globalUserState</span> = null<span class="hljs-comment">;</span>
    notifySubscribers()<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[]</span>)<span class="hljs-comment">;</span>

  // è¿”å›å…¨å±€çŠ¶æ€å’Œæ“ä½œæ–¹æ³•
  return {
    user: globalUserState,
    login,
    logout,
    isLogin: !!globalUserState
  }<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤ 2ï¼šåœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨è¯¥ Hook</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// Headerç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useGlobalUser } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useGlobalUser'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Header</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { user, isLogin, logout } = <span class="hljs-title function_">useGlobalUser</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Headerç»„ä»¶æ¸²æŸ“ï¼š'</span>, user); <span class="hljs-comment">// éªŒè¯æ˜¯å¦å…±äº«çŠ¶æ€</span>

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>ç½‘ç«™å¤´éƒ¨<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
      {isLogin ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
          æ¬¢è¿ {user.name} <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{logout}</span>&gt;</span>ç™»å‡º<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      ) : (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>æœªç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// Loginç»„ä»¶</span>
<span class="hljs-keyword">import</span> { useGlobalUser } <span class="hljs-keyword">from</span> <span class="hljs-string">'./useGlobalUser'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Login</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> { login } = <span class="hljs-title function_">useGlobalUser</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æ¨¡æ‹Ÿç™»å½•æ¥å£è¿”å›çš„ç”¨æˆ·ä¿¡æ¯</span>
    <span class="hljs-title function_">login</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">avatar</span>: <span class="hljs-string">'xxx.png'</span> });
  };

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleLogin}</span>&gt;</span>æ¨¡æ‹Ÿç™»å½•<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// ä¸»é¡µç»„ä»¶</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Header</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Header'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Login</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./Login'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Header</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Login</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-9">æ•ˆæœéªŒè¯ï¼š</h4>
<ol>
<li>åˆå§‹çŠ¶æ€ï¼šHeader æ˜¾ç¤º â€œæœªç™»å½•â€ï¼Œæ§åˆ¶å°æ‰“å°<code>Headerç»„ä»¶æ¸²æŸ“ï¼šnull</code>ï¼›</li>
<li>ç‚¹å‡» â€œæ¨¡æ‹Ÿç™»å½•â€ï¼šLogin ç»„ä»¶è°ƒç”¨<code>login</code>æ›´æ–°å…¨å±€çŠ¶æ€ï¼Œ<code>notifySubscribers</code>è§¦å‘ Header ç»„ä»¶é‡æ¸²æŸ“ï¼›</li>
<li>æœ€ç»ˆæ•ˆæœï¼šHeader æ˜¾ç¤º â€œæ¬¢è¿å¼ ä¸‰â€ï¼Œæ§åˆ¶å°æ‰“å°<code>Headerç»„ä»¶æ¸²æŸ“ï¼š{id:1, name:"å¼ ä¸‰", ...}</code>ï¼›</li>
<li>æ ¸å¿ƒç»“è®ºï¼šHeader å’Œ Login ç»„ä»¶é€šè¿‡<code>useGlobalUser</code>å…±äº«äº†åŒä¸€ä¸ª<code>user</code>çŠ¶æ€ï¼ŒçŠ¶æ€å˜æ›´æ—¶æ‰€æœ‰ä½¿ç”¨è¯¥ Hook çš„ç»„ä»¶éƒ½ä¼šåŒæ­¥æ›´æ–°ã€‚</li>
</ol>
<h3 data-id="heading-10">ç¤ºä¾‹ 2ï¼šä¼˜åŒ–ç‰ˆï¼šç”¨ useState æ›¿ä»£æ¨¡å—å˜é‡ï¼ˆæ›´ç¬¦åˆ React è§„èŒƒï¼‰</h3>
<p>ç¤ºä¾‹ 1 ä¸­ç›´æ¥ç”¨æ¨¡å—å˜é‡<code>globalUserState</code>å­˜å‚¨çŠ¶æ€ï¼Œè™½ç„¶å¯è¡Œï¼Œä½†ä¸å¤Ÿ â€œReact åŒ–â€ã€‚æˆ‘ä»¬å¯ä»¥ç”¨<code>useState</code>æ›¿ä»£æ¨¡å—å˜é‡ï¼Œåˆ©ç”¨ React çš„çŠ¶æ€ç®¡ç†æœºåˆ¶è‡ªåŠ¨å¤„ç†æ›´æ–°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useGlobalUserä¼˜åŒ–ç‰ˆ.js</span>
<span class="hljs-keyword">import</span> { useState, useCallback, useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-comment">// æ¨¡å—ä½œç”¨åŸŸï¼šå­˜å‚¨å…¨å±€çŠ¶æ€çš„Hookå®ä¾‹ï¼ˆé—­åŒ…ç¼“å­˜ï¼‰</span>
<span class="hljs-keyword">let</span> globalHook = <span class="hljs-literal">null</span>;

<span class="hljs-comment">// å…¨å±€çŠ¶æ€çš„æ ¸å¿ƒHookï¼ˆä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createGlobalUserHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-keyword">const</span> login = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">(<span class="hljs-params">userInfo</span>) =&gt;</span> {
    <span class="hljs-title function_">setUser</span>({ ...userInfo });
  }, []);

  <span class="hljs-keyword">const</span> logout = <span class="hljs-title function_">useCallback</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-title function_">setUser</span>(<span class="hljs-literal">null</span>);
  }, []);

  <span class="hljs-keyword">return</span> {
    user,
    login,
    logout,
    <span class="hljs-attr">isLogin</span>: !!user,
    <span class="hljs-comment">// æš´éœ²setUserä¾›è®¢é˜…é€»è¾‘ä½¿ç”¨ï¼ˆæˆ–ç›´æ¥ç”¨userä½œä¸ºä¾èµ–ï¼‰</span>
    <span class="hljs-attr">subscribe</span>: <span class="hljs-function">(<span class="hljs-params">callback</span>) =&gt;</span> {
      <span class="hljs-comment">// è¿™é‡Œåˆ©ç”¨Reactçš„çŠ¶æ€æ›´æ–°æœºåˆ¶ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è®¢é˜…è€…</span>
      <span class="hljs-comment">// ç»„ä»¶é€šè¿‡useEffectä¾èµ–userï¼Œè‡ªåŠ¨è§¦å‘é‡æ¸²æŸ“</span>
    }
  };
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useGlobalUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ¨¡å—åˆå§‹åŒ–æ—¶ï¼Œåˆ›å»ºå…¨å±€Hookå®ä¾‹ï¼ˆä»…æ‰§è¡Œä¸€æ¬¡ï¼‰</span>
  <span class="hljs-keyword">if</span> (!globalHook) {
    globalHook = <span class="hljs-title function_">createGlobalUserHook</span>();
  }

  <span class="hljs-comment">// è¿”å›å…¨å±€çŠ¶æ€å’Œæ–¹æ³•ï¼ˆæ‰€æœ‰ç»„ä»¶å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼‰</span>
  <span class="hljs-keyword">return</span> globalHook;
}
</code></pre>
<h4 data-id="heading-11">ä¼˜åŒ–ç‚¹è¯´æ˜ï¼š</h4>
<ul>
<li>ç”¨<code>useState</code>æ›¿ä»£æ¨¡å—å˜é‡ï¼Œåˆ©ç”¨ React çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼Œæ— éœ€æ‰‹åŠ¨ç»´æŠ¤è®¢é˜…è€…ï¼ˆç»„ä»¶é€šè¿‡ä¾èµ–<code>user</code>è‡ªåŠ¨é‡æ¸²æŸ“ï¼‰ï¼›</li>
<li><code>globalHook</code>åœ¨æ¨¡å—ä½œç”¨åŸŸä¸­ä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼Œæ‰€æœ‰ç»„ä»¶è°ƒç”¨<code>useGlobalUser</code>æ—¶è¿”å›çš„æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤çŠ¶æ€å®Œå…¨å…±äº«ã€‚</li>
</ul>
<h3 data-id="heading-12">ç¤ºä¾‹ 3ï¼šè¿›é˜¶ç‰ˆï¼šæ”¯æŒå¤šçŠ¶æ€ã€æ‰¹é‡æ›´æ–°ï¼ˆç±»ä¼¼ç®€æ˜“ Contextï¼‰</h3>
<p>å¦‚æœéœ€è¦ç®¡ç†å¤šä¸ªå…¨å±€çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ã€ä¸»é¢˜ã€æƒé™ï¼‰ï¼Œå¯ä»¥æ‰©å±•ä¸º â€œå¤šçŠ¶æ€å…¨å±€ Hookâ€ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// useGlobalState.jsï¼ˆé€šç”¨å…¨å±€çŠ¶æ€Hookï¼‰</span>
import { useState, useCallback, useEffect } from 'react';

<span class="hljs-comment">// æ¨¡å—ä½œç”¨åŸŸï¼šå­˜å‚¨æ‰€æœ‰å…¨å±€çŠ¶æ€ï¼ˆkey-valueå½¢å¼ï¼‰</span>
const globalStates = new <span class="hljs-built_in">Map</span>();
<span class="hljs-comment">// å­˜å‚¨æ¯ä¸ªçŠ¶æ€çš„è®¢é˜…è€…</span>
const subscribers = new <span class="hljs-built_in">Map</span>();

<span class="hljs-comment">// åˆ›å»ºæˆ–è·å–å…¨å±€çŠ¶æ€</span>
function <span class="hljs-built_in">getOrCreateGlobalState</span>(key, initialValue) {
  <span class="hljs-comment">// å¦‚æœçŠ¶æ€å·²å­˜åœ¨ï¼Œç›´æ¥è¿”å›</span>
  if (globalStates.has(key)) {
    return globalStates<span class="hljs-selector-class">.get</span>(key);
  }

  <span class="hljs-comment">// æ–°å»ºçŠ¶æ€</span>
  const <span class="hljs-selector-attr">[state, setState]</span> = <span class="hljs-built_in">useState</span>(initialValue);

  <span class="hljs-comment">// æ‰¹é‡æ›´æ–°ï¼ˆç±»ä¼¼setStateçš„å‡½æ•°å¼æ›´æ–°ï¼‰</span>
  const setGlobalState = <span class="hljs-built_in">useCallback</span>((updater) =&gt; {
    <span class="hljs-built_in">setState</span>(prev =&gt; {
      const nextState = typeof updater === 'function' ? updater(prev) : updater;
      <span class="hljs-comment">// é€šçŸ¥è¯¥çŠ¶æ€çš„æ‰€æœ‰è®¢é˜…è€…</span>
      if (subscribers.has(key)) {
        subscribers<span class="hljs-selector-class">.get</span>(key)<span class="hljs-selector-class">.forEach</span>(update =&gt; update(nextState));
      }
      return nextState;
    });
  }, <span class="hljs-selector-attr">[key]</span>);

  const globalState = { state, setGlobalState };
  globalStates<span class="hljs-selector-class">.set</span>(key, globalState);
  subscribers<span class="hljs-selector-class">.set</span>(key, new Set());

  return globalState;
}

<span class="hljs-comment">// é€šç”¨å…¨å±€Hookï¼šæ”¯æŒä¼ å…¥keyå’Œåˆå§‹å€¼</span>
export function <span class="hljs-built_in">useGlobalState</span>(key, initialValue) {
  const { state, setGlobalState } = <span class="hljs-built_in">getOrCreateGlobalState</span>(key, initialValue);

  <span class="hljs-comment">// ç»„ä»¶æœ¬åœ°æ›´æ–°å‡½æ•°ï¼ˆè§¦å‘ç»„ä»¶é‡æ¸²æŸ“ï¼‰</span>
  const <span class="hljs-selector-attr">[, forceUpdate]</span> = <span class="hljs-built_in">useState</span>(state);

  <span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜æ›´ï¼šçŠ¶æ€æ›´æ–°æ—¶è§¦å‘ç»„ä»¶é‡æ¸²æŸ“</span>
  <span class="hljs-built_in">useEffect</span>(() =&gt; {
    const subs = subscribers<span class="hljs-selector-class">.get</span>(key);
    const update = (nextState) =&gt; <span class="hljs-built_in">forceUpdate</span>(nextState);
    subs<span class="hljs-selector-class">.add</span>(update);

    <span class="hljs-comment">// åˆå§‹è§¦å‘ä¸€æ¬¡æ¸²æŸ“ï¼ˆåŒæ­¥åˆå§‹çŠ¶æ€ï¼‰</span>
    <span class="hljs-built_in">forceUpdate</span>(state);

    return () =&gt; subs<span class="hljs-selector-class">.delete</span>(update);
  }, <span class="hljs-selector-attr">[key, state]</span>);

  return <span class="hljs-selector-attr">[state, setGlobalState]</span>;
}
</code></pre>
<h4 data-id="heading-13">ä½¿ç”¨æ–¹å¼ï¼š</h4>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶1ï¼šä½¿ç”¨ç”¨æˆ·çŠ¶æ€</span>
<span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useGlobalState</span>(<span class="hljs-string">'user'</span>, <span class="hljs-literal">null</span>);

<span class="hljs-comment">// ç»„ä»¶2ï¼šä½¿ç”¨ä¸»é¢˜çŠ¶æ€</span>
<span class="hljs-keyword">const</span> [theme, setTheme] = <span class="hljs-title function_">useGlobalState</span>(<span class="hljs-string">'theme'</span>, <span class="hljs-string">'light'</span>);

<span class="hljs-comment">// ç»„ä»¶3ï¼šæ›´æ–°å…¨å±€çŠ¶æ€</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleChangeTheme</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setTheme</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev === <span class="hljs-string">'light'</span> ? <span class="hljs-string">'dark'</span> : <span class="hljs-string">'light'</span>);
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleLogin</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-title function_">setUser</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æå››'</span> });
};
</code></pre>
<h4 data-id="heading-14">è¿›é˜¶ç‰¹æ€§ï¼š</h4>
<ul>
<li>æ”¯æŒå¤šçŠ¶æ€éš”ç¦»ï¼ˆé€šè¿‡<code>key</code>åŒºåˆ†ï¼‰ï¼›</li>
<li>æ”¯æŒå‡½æ•°å¼æ›´æ–°ï¼ˆæ‰¹é‡ä¿®æ”¹çŠ¶æ€ï¼‰ï¼›</li>
<li>ç»„ä»¶ä»…è®¢é˜…è‡ªå·±å…³æ³¨çš„çŠ¶æ€ï¼Œæ€§èƒ½æ›´ä¼˜ã€‚</li>
</ul>
<h2 data-id="heading-15">å››ã€å…³é”®ç–‘é—®è§£ç­”ï¼šæ¯æ¬¡å¼•å…¥ Hookï¼Œstate ä¼šé‡æ–°æ‰§è¡Œå—ï¼Ÿ</h2>
<p>è¿™æ˜¯å¼€å‘è€…æœ€å…³å¿ƒçš„é—®é¢˜ï¼Œæˆ‘ä»¬ç»“åˆç¤ºä¾‹å’ŒåŸç†æ¥è¯¦ç»†è§£ç­”ï¼š</p>
<h3 data-id="heading-16">1. ç»“è®ºï¼šä¸ä¼šé‡æ–°åˆå§‹åŒ–ï¼Œä½†ä¼šé‡æ–°æ‰§è¡Œ Hook é€»è¾‘</h3>
<ul>
<li><strong>state çš„åˆå§‹åŒ–ï¼šä»…æ‰§è¡Œä¸€æ¬¡</strong>ï¼šå› ä¸º<code>globalHook</code>ã€<code>globalStates</code>ç­‰å˜é‡å­˜å‚¨åœ¨<strong>æ¨¡å—ä½œç”¨åŸŸ</strong>ä¸­ï¼Œæ¨¡å—è¢«å¯¼å…¥æ—¶ä»…åˆå§‹åŒ–ä¸€æ¬¡ï¼Œåç»­æ‰€æœ‰ç»„ä»¶å¼•å…¥è¯¥æ¨¡å—å¹¶è°ƒç”¨ Hook æ—¶ï¼Œä¸ä¼šé‡æ–°åˆ›å»ºè¿™äº›å˜é‡ï¼Œå› æ­¤<code>useState</code>çš„åˆå§‹åŒ–é€»è¾‘ï¼ˆ<code>useState(initialValue)</code>ï¼‰ä»…æ‰§è¡Œä¸€æ¬¡ï¼›</li>
<li><strong>Hook é€»è¾‘çš„æ‰§è¡Œï¼šæ¯æ¬¡ç»„ä»¶æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œ</strong>ï¼šç»„ä»¶æ¯æ¬¡é‡æ¸²æŸ“æ—¶ï¼Œéƒ½ä¼šé‡æ–°è°ƒç”¨è‡ªå®šä¹‰ Hookï¼ˆå¦‚<code>useGlobalUser()</code>ï¼‰ï¼Œä½† Hook å†…éƒ¨çš„é€»è¾‘ï¼ˆå¦‚è¿”å›<code>globalHook</code>ï¼‰æ˜¯ â€œè¯»å–ç¼“å­˜â€ï¼Œè€Œé â€œé‡æ–°åˆ›å»ºçŠ¶æ€â€â€”â€” å› æ­¤ state çš„å¼•ç”¨ä¸å˜ï¼Œä¸ä¼šè§¦å‘ä¸å¿…è¦çš„æ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-17">2. ä»£ç éªŒè¯ï¼šæ‰“å°æ—¥å¿—çœ‹æ‰§è¡Œæ¬¡æ•°</h3>
<p>ä¿®æ”¹<code>useGlobalUser</code>ä¼˜åŒ–ç‰ˆï¼Œæ·»åŠ æ—¥å¿—ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useGlobalUser.js</span>
<span class="hljs-keyword">import</span> { useState, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;

<span class="hljs-keyword">let</span> globalHook = <span class="hljs-literal">null</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¨¡å—åˆå§‹åŒ–ï¼šæ‰§è¡Œä¸€æ¬¡'</span>); <span class="hljs-comment">// ä»…æ‰“å°ä¸€æ¬¡</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createGlobalUserHook</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'åˆ›å»ºå…¨å±€çŠ¶æ€ï¼šä»…æ‰§è¡Œä¸€æ¬¡'</span>); <span class="hljs-comment">// ä»…æ‰“å°ä¸€æ¬¡</span>
  <span class="hljs-keyword">const</span> [user, setUser] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// ... å…¶ä½™é€»è¾‘</span>
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useGlobalUser</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'è°ƒç”¨useGlobalUserï¼šç»„ä»¶æ¸²æŸ“æ—¶æ‰§è¡Œ'</span>); <span class="hljs-comment">// ç»„ä»¶æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šæ‰“å°</span>

  <span class="hljs-keyword">if</span> (!globalHook) {
    globalHook = <span class="hljs-title function_">createGlobalUserHook</span>();
  }

  <span class="hljs-keyword">return</span> globalHook;
}
</code></pre>
<h4 data-id="heading-18">æ—¥å¿—è¾“å‡ºç»“æœï¼š</h4>
<ol>
<li>åº”ç”¨å¯åŠ¨æ—¶ï¼šæ‰“å°<code>æ¨¡å—åˆå§‹åŒ–ï¼šæ‰§è¡Œä¸€æ¬¡</code>ï¼›</li>
<li>ç¬¬ä¸€ä¸ªç»„ä»¶ï¼ˆå¦‚ Headerï¼‰æŒ‚è½½æ—¶ï¼šæ‰“å°<code>è°ƒç”¨useGlobalUserï¼šç»„ä»¶æ¸²æŸ“æ—¶æ‰§è¡Œ</code>Â â†’Â <code>åˆ›å»ºå…¨å±€çŠ¶æ€ï¼šä»…æ‰§è¡Œä¸€æ¬¡</code>ï¼›</li>
<li>ç¬¬äºŒä¸ªç»„ä»¶ï¼ˆå¦‚ Loginï¼‰æŒ‚è½½æ—¶ï¼šæ‰“å°<code>è°ƒç”¨useGlobalUserï¼šç»„ä»¶æ¸²æŸ“æ—¶æ‰§è¡Œ</code>ï¼ˆæ—  â€œåˆ›å»ºå…¨å±€çŠ¶æ€â€ æ—¥å¿—ï¼‰ï¼›</li>
<li>ç»„ä»¶é‡æ¸²æŸ“æ—¶ï¼ˆå¦‚ç™»å½•åï¼‰ï¼šä¸¤ä¸ªç»„ä»¶éƒ½ä¼šæ‰“å°<code>è°ƒç”¨useGlobalUserï¼šç»„ä»¶æ¸²æŸ“æ—¶æ‰§è¡Œ</code>ï¼ˆä»æ—  â€œåˆ›å»ºå…¨å±€çŠ¶æ€â€ æ—¥å¿—ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-19">ç»“è®ºéªŒè¯ï¼š</h4>
<ul>
<li>æ¨¡å—åˆå§‹åŒ–å’Œå…¨å±€çŠ¶æ€åˆ›å»ºä»…æ‰§è¡Œä¸€æ¬¡ï¼ˆstate ä¸ä¼šé‡æ–°åˆå§‹åŒ–ï¼‰ï¼›</li>
<li>Hook å‡½æ•°æœ¬èº«ä¼šåœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼Œä½†ä»…è¯»å–ç¼“å­˜çš„çŠ¶æ€ï¼Œä¸ä¼šé‡å¤åˆ›å»ºã€‚</li>
</ul>
<h3 data-id="heading-20">3. ä¸æ™®é€š Hook çš„åŒºåˆ«ï¼šçŠ¶æ€å­˜å‚¨ä½ç½®ä¸åŒ</h3>






























<table><thead><tr><th>ç‰¹æ€§</th><th>æ™®é€šè‡ªå®šä¹‰ Hookï¼ˆå¦‚ useCounterï¼‰</th><th>å…¨å±€çŠ¶æ€è‡ªå®šä¹‰ Hookï¼ˆå¦‚ useGlobalUserï¼‰</th></tr></thead><tbody><tr><td>çŠ¶æ€å­˜å‚¨ä½ç½®</td><td>ç»„ä»¶å®ä¾‹çš„ Hook é“¾è¡¨ä¸­</td><td>æ¨¡å—ä½œç”¨åŸŸçš„é—­åŒ…ä¸­</td></tr><tr><td>çŠ¶æ€å…±äº«æ€§</td><td>ç»„ä»¶ç§æœ‰ï¼ˆæ¯ä¸ªç»„ä»¶è°ƒç”¨åˆ›å»ºç‹¬ç«‹çŠ¶æ€ï¼‰</td><td>è·¨ç»„ä»¶å…±äº«ï¼ˆæ‰€æœ‰ç»„ä»¶è°ƒç”¨å…±äº«åŒä¸€çŠ¶æ€ï¼‰</td></tr><tr><td>state åˆå§‹åŒ–æ¬¡æ•°</td><td>æ¯ä¸ªç»„ä»¶è°ƒç”¨ä¸€æ¬¡</td><td>æ¨¡å—åˆå§‹åŒ–æ—¶ä»…ä¸€æ¬¡</td></tr><tr><td>Hook é€»è¾‘æ‰§è¡Œæ¬¡æ•°</td><td>ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ‰§è¡Œ</td><td>ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ‰§è¡Œï¼ˆä½†ä»…è¯»ç¼“å­˜ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-21">äº”ã€è‡ªå®šä¹‰ Hook ä½œä¸ºå…¨å±€çŠ¶æ€çš„é€‚ç”¨åœºæ™¯ä¸å±€é™æ€§</h2>
<h3 data-id="heading-22">1. é€‚ç”¨åœºæ™¯</h3>
<ul>
<li>å°å‹åº”ç”¨æˆ–ä¸­å‹åº”ç”¨çš„éæ ¸å¿ƒçŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·ä¿¡æ¯ã€ä¸»é¢˜ã€æƒé™ã€å…¨å±€åŠ è½½çŠ¶æ€ï¼‰ï¼›</li>
<li>ä¸éœ€è¦ä¸­é—´ä»¶ã€æ—¶é—´æ—…è¡Œã€çŠ¶æ€å›æº¯ç­‰é«˜çº§ç‰¹æ€§ï¼›</li>
<li>è¿½æ±‚è½»é‡åŒ–ã€æ— é¢å¤–ä¾èµ–ï¼ˆæ— éœ€å¼•å…¥ Reduxã€Zustand ç­‰åº“ï¼‰ï¼›</li>
<li>è·¨ç»„ä»¶å…±äº«ç®€å•çŠ¶æ€ï¼Œä¸”ç»„ä»¶å±‚çº§ä¸æ·±ï¼ˆæ— éœ€ Context çš„åµŒå¥—ä¼ é€’ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-23">2. å±€é™æ€§</h3>
<ul>
<li><strong>ä¸æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰</strong> ï¼šæ¨¡å—ä½œç”¨åŸŸçš„çŠ¶æ€åœ¨ SSR ä¸­ä¼šè¢«æ‰€æœ‰è¯·æ±‚å…±äº«ï¼Œå¯¼è‡´çŠ¶æ€æ±¡æŸ“ï¼ˆå› ä¸º SSR æ˜¯å¤šè¯·æ±‚å…±äº«ä¸€ä¸ªæ¨¡å—å®ä¾‹ï¼‰ï¼›</li>
<li><strong>çŠ¶æ€æ›´æ–°ç¼ºä¹å¯è¿½è¸ªæ€§</strong>ï¼šæ²¡æœ‰ Redux DevTools ç­‰å·¥å…·æ”¯æŒï¼Œéš¾ä»¥è°ƒè¯•çŠ¶æ€å˜æ›´ï¼›</li>
<li><strong>ä¸æ”¯æŒå¤æ‚çŠ¶æ€é€»è¾‘</strong>ï¼šå¦‚å¼‚æ­¥çŠ¶æ€æµã€çŠ¶æ€ä¾èµ–ã€æ‰¹é‡æ›´æ–°ä¼˜åŒ–ç­‰ï¼Œéœ€è¦æ‰‹åŠ¨å®ç°ï¼Œæˆæœ¬è¾ƒé«˜ï¼›</li>
<li><strong>ç»„ä»¶å¸è½½åçŠ¶æ€ä¸è‡ªåŠ¨æ¸…ç†</strong>ï¼šæ¨¡å—ä½œç”¨åŸŸçš„çŠ¶æ€ä¼šä¸€ç›´å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´åˆ°åº”ç”¨åˆ·æ–°ï¼ˆå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œéœ€æ‰‹åŠ¨æ¸…ç†ï¼‰ï¼›</li>
<li><strong>ä¸æ”¯æŒçŠ¶æ€åˆ‡ç‰‡éš”ç¦»</strong>ï¼šå¤šå›¢é˜Ÿåä½œæ—¶ï¼Œå®¹æ˜“å‡ºç°çŠ¶æ€ key å†²çªï¼ˆéœ€æ‰‹åŠ¨è§„èŒƒ key å‘½åï¼‰ã€‚</li>
</ul>
<h2 data-id="heading-24">å…­ã€æ€»ç»“</h2>
<p>è‡ªå®šä¹‰ Hook ä¹‹æ‰€ä»¥èƒ½å®ç°æ¨¡å—çº§å…¨å±€çŠ¶æ€ï¼Œæ ¸å¿ƒæ˜¯<strong>æ¨¡å—ä½œç”¨åŸŸçš„é—­åŒ…ç¼“å­˜</strong>â€”â€” çŠ¶æ€è¢«å­˜å‚¨åœ¨æ¨¡å—å±‚é¢ï¼Œè€Œéç»„ä»¶å®ä¾‹ï¼Œå› æ­¤è·¨ç»„ä»¶è°ƒç”¨ Hook æ—¶èƒ½å…±äº«åŒä¸€çŠ¶æ€ã€‚æ¯æ¬¡å¼•å…¥ Hook åï¼Œstate ä¸ä¼šé‡æ–°åˆå§‹åŒ–ï¼ˆä»…æ¨¡å—åˆå§‹åŒ–æ—¶æ‰§è¡Œä¸€æ¬¡ï¼‰ï¼Œä½† Hook é€»è¾‘ä¼šåœ¨ç»„ä»¶æ¯æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œï¼ˆä»…è¯»å–ç¼“å­˜ï¼Œæ— æ€§èƒ½å¼€é”€ï¼‰ã€‚</p>
<p>è¿™ç§æ–¹æ¡ˆæ˜¯ä¸€æŠŠ â€œåŒåˆƒå‰‘â€ï¼šå®ƒè½»é‡åŒ–ã€æ˜“å®ç°ï¼Œé€‚åˆç®€å•åœºæ™¯ï¼›ä½†ç¼ºä¹é«˜çº§ç‰¹æ€§å’Œè°ƒè¯•èƒ½åŠ›ï¼Œä¸é€‚åˆå¤æ‚åº”ç”¨ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¯æ ¹æ®é¡¹ç›®è§„æ¨¡é€‰æ‹©ï¼š</p>
<ul>
<li>å°å‹åº”ç”¨ / ç®€å•çŠ¶æ€ï¼šç”¨è‡ªå®šä¹‰ Hookï¼ˆæœ¬æ–‡æ–¹æ¡ˆï¼‰ï¼›</li>
<li>ä¸­å‹åº”ç”¨ / éœ€è¦è°ƒè¯•ï¼šç”¨ Zustandã€Jotai ç­‰è½»é‡çŠ¶æ€åº“ï¼ˆæœ¬è´¨æ˜¯åŸºäºè‡ªå®šä¹‰ Hook + é—­åŒ…å®ç°ï¼‰ï¼›</li>
<li>å¤§å‹åº”ç”¨ / å¤æ‚çŠ¶æ€æµï¼šç”¨ Reduxã€Redux Toolkit æˆ– Recoil ç­‰æˆç†Ÿæ–¹æ¡ˆã€‚</li>
</ul>
<p>ç†è§£è‡ªå®šä¹‰ Hook çš„å…¨å±€çŠ¶æ€åŸç†ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬çµæ´»åº”å¯¹ä¸åŒåœºæ™¯ï¼Œæ›´èƒ½æ·±å…¥æŒæ¡ React çš„æ¨¡å—æœºåˆ¶ã€é—­åŒ…å’Œ Hook æ‰§è¡Œé€»è¾‘ï¼Œæå‡ React å¼€å‘çš„åº•å±‚è®¤çŸ¥ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Java ä¸­çš„ç»“æ„åŒ–å¹¶å‘æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7575887863797039114</link>    <guid>https://juejin.cn/post/7575887863797039114</guid>    <pubDate>2025-11-24T07:10:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575887863797039114" data-draft-id="7575718948299210803" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Java ä¸­çš„ç»“æ„åŒ–å¹¶å‘æ¨¡å¼"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2025-11-24T07:10:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿¡ç ç”±ç¼°"/> <meta itemprop="url" content="https://juejin.cn/user/2110664941509214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Java ä¸­çš„ç»“æ„åŒ–å¹¶å‘æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2110664941509214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿¡ç ç”±ç¼°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T07:10:17.000Z" title="Mon Nov 24 2025 07:10:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¹¶å‘ç¼–ç¨‹é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯ Java çš„é˜¿å–€ç‰æ–¯ä¹‹è¸µã€‚å°½ç®¡ <code>ExecutorService</code> å’Œ <code>Future</code> ä¸ºæˆ‘ä»¬æä¾›äº†è‰¯å¥½çš„æœåŠ¡ï¼Œä½†å®ƒä»¬å…è®¸ä¸å—é™åˆ¶çš„æ¨¡å¼ï¼Œå…¶ä¸­å­ä»»åŠ¡å¯èƒ½æ¯”å…¶çˆ¶ä»»åŠ¡å­˜æ´»æ›´ä¹…ã€çº¿ç¨‹å¯èƒ½æ³„æ¼ï¼Œè€Œå–æ¶ˆæ“ä½œåˆ™å˜æˆäº†ä¸€åœºå™©æ¢¦ã€‚ç»“æ„åŒ–å¹¶å‘é€šè¿‡å°†è¿è¡Œåœ¨ä¸åŒçº¿ç¨‹ä¸­çš„ç›¸å…³ä»»åŠ¡ç»„è§†ä¸ºä¸€ä¸ªå•ä¸€çš„å·¥ä½œå•å…ƒï¼Œæ”¹å˜äº†è¿™ä¸€ç°çŠ¶ï¼Œå®ƒç®€åŒ–äº†é”™è¯¯å¤„ç†å’Œå–æ¶ˆæ“ä½œï¼ŒåŒæ—¶æé«˜äº†å¯é æ€§å’Œå¯è§‚æµ‹æ€§ã€‚</p>
</blockquote>
<p><img src="https://cf-blog.icodebuddy.com/image/91/91-0.jpg" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">éç»“æ„åŒ–å¹¶å‘çš„é—®é¢˜</h2>
<p>è€ƒè™‘ä¸€ä¸ªä½¿ç”¨ <code>ExecutorService</code> çš„å…¸å‹æ¨¡å¼ï¼šä¸€ä¸ªçº¿ç¨‹åˆ›å»ºæ‰§è¡Œå™¨ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æäº¤å·¥ä½œï¼Œè€Œæ‰§è¡Œä»»åŠ¡çš„çº¿ç¨‹ä¸å‰ä¸¤è€…éƒ½æ²¡æœ‰å…³ç³»ã€‚åœ¨ä¸€ä¸ªçº¿ç¨‹æäº¤å·¥ä½œä¹‹åï¼Œä¸€ä¸ªå®Œå…¨ä¸åŒçš„çº¿ç¨‹å¯ä»¥ç­‰å¾…ç»“æœâ€”â€”ä»»ä½•æŒæœ‰ <code>Future</code> å¼•ç”¨çš„ä»£ç éƒ½å¯ä»¥è¿æ¥å®ƒï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸è·å–è¯¥ <code>Future</code> çš„çº¿ç¨‹ä¸åŒçš„çº¿ç¨‹ä¸­çš„ä»£ç ã€‚</p>
<p>è¿™ç§éç»“æ„åŒ–æ–¹æ³•å¸¦æ¥äº†å®é™…é—®é¢˜ã€‚å½“çˆ¶ä»»åŠ¡æœªèƒ½æ­£ç¡®å…³é—­å­ä»»åŠ¡æ—¶ï¼Œå°±ä¼šå‘ç”Ÿçº¿ç¨‹æ³„æ¼ã€‚ç”±äºæ²¡æœ‰åè°ƒçš„æ–¹å¼æ¥é€šçŸ¥å¤šä¸ªå­ä»»åŠ¡ï¼Œå–æ¶ˆæ“ä½œä¼šå‡ºç°å»¶è¿Ÿã€‚å¹¶ä¸”ç”±äºä»»åŠ¡å’Œå­ä»»åŠ¡ä¹‹é—´çš„å…³ç³»åœ¨è¿è¡Œæ—¶æœªè¢«è·Ÿè¸ªï¼Œå¯è§‚æµ‹æ€§ä¼šå—åˆ°å½±å“ã€‚</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// éç»“æ„åŒ–ï¼šå…³ç³»æ˜¯éšå¼ä¸”è„†å¼±çš„</span>

<span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newCachedThreadPool();

Future&lt;User&gt; userFuture = executor.submit(() -&gt; fetchUser(id));

Future&lt;Orders&gt; ordersFuture = executor.submit(() -&gt; fetchOrders(id));

  


<span class="hljs-comment">// å¦‚æœ fetchUser å¤±è´¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</span>

<span class="hljs-comment">// è°è´Ÿè´£å…³é—­æ‰§è¡Œå™¨ï¼Ÿ</span>

<span class="hljs-comment">// å¦‚æœæˆ‘ä»¬å¿˜è®°æ¸…ç†ï¼Œçº¿ç¨‹ä¼šæ³„æ¼å—ï¼Ÿ</span>

</code></pre>
<h2 data-id="heading-1">å¼•å…¥ StructuredTaskScope</h2>
<p>ç»“æ„åŒ–å¹¶å‘ API çš„ä¸»è¦ç±»æ˜¯ <code>java.util.concurrent</code> åŒ…ä¸­çš„ <code>StructuredTaskScope</code>ï¼Œå®ƒä½¿æ‚¨èƒ½å¤Ÿå°†ä¸€ä¸ªå¹¶å‘å­ä»»åŠ¡ç»„ä½œä¸ºä¸€ä¸ªå•å…ƒè¿›è¡Œåè°ƒã€‚ä½¿ç”¨ <code>StructuredTaskScope</code>ï¼Œæ‚¨å¯ä»¥åœ¨å„è‡ªçš„çº¿ç¨‹ä¸­åˆ†å‰æ¯ä¸ªå­ä»»åŠ¡ï¼Œç„¶åå°†å®ƒä»¬ä½œä¸ºä¸€ä¸ªå•å…ƒè¿›è¡Œæ±‡åˆï¼Œç¡®ä¿åœ¨ä¸»ä»»åŠ¡ç»§ç»­ä¹‹å‰å­ä»»åŠ¡å®Œæˆã€‚</p>
<p>è¯¥ API éµå¾ªä¸€ä¸ªæ¸…æ™°çš„æ¨¡å¼ï¼š</p>
<ol>
<li>
<p>ä½¿ç”¨ try-with-resources åˆ›å»ºä¸€ä¸ª <code>StructuredTaskScope</code></p>
</li>
<li>
<p>å°†å­ä»»åŠ¡å®šä¹‰ä¸º <code>Callable</code> å®ä¾‹</p>
</li>
<li>
<p>åœ¨å„è‡ªçš„çº¿ç¨‹ä¸­åˆ†å‰æ¯ä¸ªå­ä»»åŠ¡</p>
</li>
<li>
<p>æ±‡åˆä»¥ç­‰å¾…å®Œæˆ</p>
</li>
<li>
<p>å¤„ç†å­ä»»åŠ¡çš„ç»“æœ</p>
</li>
</ol>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªè·å–å¤©æ°”æ•°æ®çš„çœŸå®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">
WeatherReport <span class="hljs-title function_">getWeatherReport</span><span class="hljs-params">(String location)</span>

<span class="hljs-keyword">throws</span> ExecutionException, InterruptedException {

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {

Supplier&lt;Temperature&gt; temperature =

scope.fork(() -&gt; getTemperature(location));

Supplier&lt;Humidity&gt; humidity =

scope.fork(() -&gt; getHumidity(location));

Supplier&lt;WindSpeed&gt; windSpeed =

scope.fork(() -&gt; getWindSpeed(location));

  


scope.join() <span class="hljs-comment">// æ±‡åˆæ‰€æœ‰å­ä»»åŠ¡</span>

.throwIfFailed(); <span class="hljs-comment">// å¦‚æœæœ‰ä»»ä½•å¤±è´¥ï¼Œä¼ æ’­é”™è¯¯</span>

  


<span class="hljs-comment">// å…¨éƒ¨æˆåŠŸï¼Œç»„åˆç»“æœ</span>

<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeatherReport</span>(

location,

temperature.get(),

humidity.get(),

windSpeed.get()

);

}

}

</code></pre>
<p>try-with-resources ä»£ç å—è‡³å…³é‡è¦â€”â€”å®ƒç¡®ä¿ä½œç”¨åŸŸè¢«æ­£ç¡®å…³é—­ï¼Œå–æ¶ˆä»»ä½•æœªå®Œæˆçš„å­ä»»åŠ¡å¹¶é˜²æ­¢çº¿ç¨‹æ³„æ¼ã€‚</p>
<h2 data-id="heading-2">ä½¿ç”¨å…³é—­ç­–ç•¥å®ç°çŸ­è·¯</h2>
<p>çŸ­è·¯æ¨¡å¼é€šè¿‡ä½¿ä¸»ä»»åŠ¡èƒ½å¤Ÿä¸­æ–­å’Œå–æ¶ˆé‚£äº›ä¸å†éœ€è¦å…¶ç»“æœå­ä»»åŠ¡ï¼Œæ¥ä¿ƒä½¿å­ä»»åŠ¡å¿«é€Ÿå®Œæˆã€‚ä¸¤ä¸ªå†…ç½®ç­–ç•¥å¤„ç†äº†å¸¸è§åœºæ™¯ï¼š</p>
<h3 data-id="heading-3">ShutdownOnFailureï¼š"è°ƒç”¨æ‰€æœ‰"æ¨¡å¼</h3>
<p>å½“æ‚¨éœ€è¦æ‰€æœ‰å­ä»»åŠ¡éƒ½æˆåŠŸæ—¶ï¼Œ<code>ShutdownOnFailure</code> ä¼šåœ¨ä¸€ä¸ªä»»åŠ¡å¤±è´¥åç«‹å³å–æ¶ˆå‰©ä½™çš„ä»»åŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">
Response <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(String userId)</span> <span class="hljs-keyword">throws</span> Exception {

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {

Subtask&lt;User&gt; user = scope.fork(() -&gt; fetchUser(userId));

Subtask&lt;Profile&gt; profile = scope.fork(() -&gt; fetchProfile(userId));

Subtask&lt;Settings&gt; settings = scope.fork(() -&gt; fetchSettings(userId));

  


scope.join().throwIfFailed();

  


<span class="hljs-comment">// å¦‚æœæœ‰ä»»ä½•å¤±è´¥ï¼Œæˆ‘ä»¬æ°¸è¿œä¸ä¼šåˆ°è¾¾è¿™é‡Œ</span>

<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(user.get(), profile.get(), settings.get());

}

}

</code></pre>
<p>å¦‚æœ <code>fetchUser()</code> æŠ›å‡ºå¼‚å¸¸ï¼Œä½œç”¨åŸŸä¼šç«‹å³å–æ¶ˆé…ç½®æ–‡ä»¶å’Œè®¾ç½®çš„è·å–ã€‚æ²¡æœ‰æµªè´¹çš„å·¥ä½œï¼Œæ²¡æœ‰çº¿ç¨‹æ³„æ¼ã€‚</p>
<h3 data-id="heading-4">ShutdownOnSuccessï¼š"è°ƒç”¨ä»»ä¸€"æ¨¡å¼</h3>
<p>æœ‰æ—¶æ‚¨åªéœ€è¦ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœâ€”â€”ä¾‹å¦‚æŸ¥è¯¢å¤šä¸ªæ•°æ®ä¸­å¿ƒæˆ–å°è¯•å¤‡ç”¨æœåŠ¡ï¼š</p>
<pre><code class="hljs language-java" lang="java">
String <span class="hljs-title function_">fetchFromMultipleSources</span><span class="hljs-params">(String key)</span> <span class="hljs-keyword">throws</span> Exception {

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnSuccess&lt;String&gt;()) {

scope.fork(() -&gt; fetchFromPrimaryDB(key));

scope.fork(() -&gt; fetchFromCache(key));

scope.fork(() -&gt; fetchFromBackup(key));

  


scope.join();

  


<span class="hljs-comment">// è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ç»“æœ</span>

<span class="hljs-keyword">return</span> scope.result();

}

}

</code></pre>
<p>ä»»ä½•å­ä»»åŠ¡æˆåŠŸçš„ç¬é—´ï¼Œä½œç”¨åŸŸå°±ä¼šå–æ¶ˆå…¶ä»–ä»»åŠ¡ã€‚è¿™ç§æ¨¡å¼éå¸¸é€‚åˆå¯¹å»¶è¿Ÿæ•æ„Ÿçš„æ“ä½œï¼Œå³æ‚¨éœ€è¦ç«é€Ÿå¤šä¸ªæ¥æºã€‚</p>
<h2 data-id="heading-5">è‡ªå®šä¹‰å…³é—­ç­–ç•¥</h2>
<p>åœ¨å®è·µä¸­ï¼Œå¤§å¤šæ•° <code>StructuredTaskScope</code> çš„ä½¿ç”¨ä¸ä¼šç›´æ¥ä½¿ç”¨ <code>StructuredTaskScope</code> ç±»ï¼Œè€Œæ˜¯ä½¿ç”¨å®ç°äº†å…³é—­ç­–ç•¥çš„ä¸¤ä¸ªå­ç±»ä¹‹ä¸€ï¼Œæˆ–è€…ç¼–å†™è‡ªå®šä¹‰å­ç±»æ¥å®ç°è‡ªå®šä¹‰å…³é—­ç­–ç•¥ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªæ”¶é›†æ‰€æœ‰æˆåŠŸç»“æœå¹¶å¿½ç•¥å¤±è´¥çš„è‡ªå®šä¹‰ç­–ç•¥ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AllSuccessesScope</span>&lt;T&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">StructuredTaskScope</span>&lt;T&gt; {

<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> List&lt;T&gt; results =

Collections.synchronizedList(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());

  


<span class="hljs-meta">@Override</span>

<span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleComplete</span><span class="hljs-params">(Subtask&lt;? extends T&gt; subtask)</span> {

<span class="hljs-keyword">if</span> (subtask.state() == Subtask.State.SUCCESS) {

results.add(subtask.get());

}

}

  


<span class="hljs-keyword">public</span> List&lt;T&gt; <span class="hljs-title function_">getResults</span><span class="hljs-params">()</span> {

<span class="hljs-keyword">return</span> List.copyOf(results);

}

}

  


<span class="hljs-comment">// ç”¨æ³•</span>

List&lt;Data&gt; <span class="hljs-title function_">collectAll</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AllSuccessesScope</span>&lt;Data&gt;()) {

<span class="hljs-keyword">for</span> (String source : dataSources) {

scope.fork(() -&gt; fetchData(source));

}

scope.join();

<span class="hljs-keyword">return</span> scope.getResults();

}

}

</code></pre>
<h2 data-id="heading-6">è™šæ‹Ÿçº¿ç¨‹ï¼šå®Œç¾æ­æ¡£</h2>
<p>è™šæ‹Ÿçº¿ç¨‹æä¾›äº†å¤§é‡çš„çº¿ç¨‹â€”â€”ç»“æ„åŒ–å¹¶å‘å¯ä»¥æ­£ç¡®ä¸”å¥å£®åœ°åè°ƒå®ƒä»¬ï¼Œå¹¶ä½¿å¯è§‚æµ‹æ€§å·¥å…·èƒ½å¤ŸæŒ‰å¼€å‘äººå‘˜ç†è§£çš„æ–¹å¼æ˜¾ç¤ºçº¿ç¨‹ã€‚è¿™ç§ç»„åˆéå¸¸å¼ºå¤§ï¼Œå› ä¸ºè™šæ‹Ÿçº¿ç¨‹ä½¿å¾—åˆ›å»ºæ•°ç™¾ä¸‡ä¸ªçº¿ç¨‹çš„æˆæœ¬å¾ˆä½ï¼Œè€Œç»“æ„åŒ–å¹¶å‘åˆ™ç¡®ä¿æ‚¨èƒ½å®‰å…¨åœ°ç®¡ç†å®ƒä»¬ã€‚</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-comment">// ç°åœ¨å¯åŠ¨ 10,000 ä¸ªå¹¶å‘ä»»åŠ¡æ˜¯å¯è¡Œçš„</span>

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {

<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10_000</span>; i++) {

<span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">taskId</span> <span class="hljs-operator">=</span> i;

scope.fork(() -&gt; processTask(taskId));

}

scope.join().throwIfFailed();

}

</code></pre>
<p>ä½¿ç”¨å¹³å°çº¿ç¨‹ï¼Œè¿™å°†æ˜¯ç¾éš¾æ€§çš„ã€‚ä½†ä½¿ç”¨è™šæ‹Ÿçº¿ç¨‹å’Œç»“æ„åŒ–å¹¶å‘ï¼Œè¿™å˜å¾—ç®€å•è€Œå®‰å…¨ã€‚</p>
<h2 data-id="heading-7">æ¨¡å—ç³»ç»Ÿè€ƒé‡</h2>
<p>åœ¨ä½¿ç”¨ç»“æ„åŒ–å¹¶å‘æ„å»ºæ¨¡å—åŒ–åº”ç”¨ç¨‹åºæ—¶ï¼Œç†è§£ Java çš„æ¨¡å—ç³»ç»Ÿå˜å¾—å¾ˆé‡è¦ã€‚å¯¹äºæ¨¡å—ï¼Œåå°„å¤±å»äº†å…¶"è¶…èƒ½åŠ›"ï¼Œå¹¶ä¸”å—é™äºä¸ç¼–è¯‘ä»£ç å®Œå…¨ç›¸åŒçš„å¯è®¿é—®æ€§è§„åˆ™â€”â€”å®ƒåªèƒ½è®¿é—®å¯¼å‡ºåŒ…ä¸­å…¬å…±ç±»çš„å…¬å…±æˆå‘˜ã€‚</p>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ <code>module-info.java</code> ä¸­æ˜¾å¼å¯¼å‡ºçš„åŒ…æ˜¯å¯è§çš„ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ä¾èµ–åå°„çš„æ¡†æ¶ï¼ˆå¦‚ Spring æˆ– Hibernateï¼‰ï¼Œæ‚¨å°†éœ€è¦é¢å¤–çš„å£°æ˜ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">module</span> com.example.app {

<span class="hljs-comment">// ç”¨äºç¼–è¯‘æ—¶è®¿é—®çš„å¸¸è§„å¯¼å‡º</span>

<span class="hljs-keyword">exports</span> com.example.api;

  


<span class="hljs-comment">// ä¸ºè¿è¡Œæ—¶åå°„è®¿é—®å¼€æ”¾</span>

opens com.example.entities to org.hibernate.orm.core;

  


<span class="hljs-keyword">requires</span> java.base;

<span class="hljs-keyword">requires</span> org.hibernate.orm.core;

}

</code></pre>
<p>åœ¨ç¼–è¯‘æ—¶ï¼Œå¼€æ”¾çš„åŒ…å®Œå…¨è¢«å°è£…ï¼Œå°±åƒè¯¥æŒ‡ä»¤ä¸å­˜åœ¨ä¸€æ ·ï¼Œä½†åœ¨è¿è¡Œæ—¶ï¼ŒåŒ…çš„ç±»å‹å¯ç”¨äºåå°„ï¼Œè‡ªç”±åœ°ä¸æ‰€æœ‰ç±»å‹å’Œæˆå‘˜ï¼ˆæ— è®ºå…¬å¼€ä¸å¦ï¼‰äº¤äº’ã€‚</p>
<p>ä¸ºäº†åœ¨æ‰€æœ‰åŒ…ä¸Šè·å¾—å®Œæ•´çš„åå°„è®¿é—®æƒé™ï¼Œæ‚¨å¯ä»¥å£°æ˜ä¸€ä¸ªå¼€æ”¾æ¨¡å—ï¼š</p>
<pre><code class="hljs language-java" lang="java">
open <span class="hljs-keyword">module</span> com.example.app {

<span class="hljs-keyword">exports</span> com.example.api;

<span class="hljs-keyword">requires</span> java.base;

}

</code></pre>
<p>å¼€æ”¾æ¨¡å—ä¼šå¼€æ”¾å…¶åŒ…å«çš„æ‰€æœ‰åŒ…ï¼Œå°±åƒæ¯ä¸ªåŒ…éƒ½å•ç‹¬åœ¨ <code>opens</code> æŒ‡ä»¤ä¸­ä½¿ç”¨ä¸€æ ·ï¼Œè¿™å¾ˆæ–¹ä¾¿ä½†é™ä½äº†å°è£…æ€§ã€‚</p>
<h2 data-id="heading-8">å¯è§‚æµ‹æ€§å’Œè°ƒè¯•</h2>
<p>ç»“æ„åŒ–å¹¶å‘æ˜¾è‘—æé«˜äº†å¯è§‚æµ‹æ€§ã€‚çº¿ç¨‹è½¬å‚¨ç°åœ¨æ˜¾ç¤ºäº†æ¸…æ™°çš„çˆ¶å­å…³ç³»ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">
jcmd &lt;pid&gt; Thread.dump_to_file <span class="hljs-attr">-format</span>=json output.json

</code></pre>
<p>JSON è¾“å‡ºæ­ç¤ºäº† <code>StructuredTaskScope</code> åŠå…¶åœ¨æ•°ç»„ä¸­çš„åˆ†å‰å­ä»»åŠ¡ï¼Œä½¿å¾—ç†è§£æ­£åœ¨è¿è¡Œçš„å†…å®¹åŠå…¶åŸå› å˜å¾—å®¹æ˜“ã€‚è¿™ä¸å…³ç³»éšå¼çš„æ‰å¹³çº¿ç¨‹è½¬å‚¨ç›¸æ¯”ï¼Œæ˜¯ä¸€ç§å˜é©ã€‚</p>
<p><strong>å½“å‰çŠ¶æ€ä¸æ¼”è¿›</strong></p>
<p>ç»“æ„åŒ–å¹¶å‘ç”± JEP 428 æå‡ºï¼Œå¹¶åœ¨ JDK 19 ä¸­ä½œä¸ºå­µåŒ– API äº¤ä»˜ï¼Œåœ¨ JDK 20 ä¸­é‡æ–°å­µåŒ–ï¼Œé€šè¿‡ JEP 453 åœ¨ JDK 21 ä¸­é¦–æ¬¡é¢„è§ˆï¼Œå¹¶åœ¨ JDK 22 å’Œ 23 ä¸­é‡æ–°é¢„è§ˆã€‚æˆªè‡³ JDK 25ï¼Œè¯¥ API å·²ç»æ¼”è¿›ï¼Œä½¿ç”¨é™æ€å·¥å‚æ–¹æ³•æ›¿ä»£äº†å…¬å…±æ„é€ å‡½æ•°ã€‚</p>
<p>è¦åœ¨å½“å‰ JDK ç‰ˆæœ¬ä¸­ä½¿ç”¨ç»“æ„åŒ–å¹¶å‘ï¼Œéœ€å¯ç”¨é¢„è§ˆç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">
<span class="hljs-comment"># ç¼–è¯‘</span>

javac --release 21 --enable-preview MyApp.java

  


<span class="hljs-comment"># è¿è¡Œ</span>

java --enable-preview MyApp

</code></pre>
<p>åŸºäºçœŸå®ä¸–ç•Œçš„åé¦ˆï¼Œè¯¥ API æ­£åœ¨ç¨³å®šä¸‹æ¥ã€‚ç»“æ„åŒ–å¹¶å‘å·²è¢«è¯æ˜æ˜¯ä¸€ç§å®‰å…¨ã€å¯Œæœ‰è¡¨ç°åŠ›ä¸”æ˜“äºç†è§£çš„å¹¶å‘æ–¹æ³•ï¼ŒPython åº“ç‡å…ˆå¼€åˆ›äº†è¿™ä¸€é¢†åŸŸï¼Œéšåæ˜¯ Kotlin ç­‰è¯­è¨€ã€‚</p>
<h2 data-id="heading-9">æœ€ä½³å®è·µ</h2>
<ul>
<li>
<p><strong>å§‹ç»ˆä½¿ç”¨ Try-With-Resources</strong>ï¼šå¿…é¡»å…³é—­ä½œç”¨åŸŸä»¥é˜²æ­¢çº¿ç¨‹æ³„æ¼ã€‚åˆ‡å‹¿æ‰‹åŠ¨ç®¡ç† <code>StructuredTaskScope</code> çš„ç”Ÿå‘½å‘¨æœŸã€‚</p>
</li>
<li>
<p><strong>é€‰æ‹©æ­£ç¡®çš„ç­–ç•¥</strong>ï¼šå½“æ‰€æœ‰ç»“æœéƒ½é‡è¦æ—¶ä½¿ç”¨ <code>ShutdownOnFailure</code>ï¼Œåœ¨ç«é€Ÿåœºæ™¯ä¸­ä½¿ç”¨ <code>ShutdownOnSuccess</code>ï¼Œæˆ–è€…ä¸ºç‰¹å®šéœ€æ±‚å®ç°è‡ªå®šä¹‰ç­–ç•¥ã€‚</p>
</li>
<li>
<p><strong>ä¸è™šæ‹Ÿçº¿ç¨‹ç»“åˆä½¿ç”¨</strong>ï¼šç»“æ„åŒ–å¹¶å‘ä¸è™šæ‹Ÿçº¿ç¨‹ç»“åˆæ—¶æ•ˆæœæœ€ä½³ï¼Œèƒ½å¤Ÿé€šè¿‡ç®€å•çš„ä»£ç å®ç°å¤§è§„æ¨¡å¹¶å‘ã€‚</p>
</li>
<li>
<p><strong>é¿å…å…±äº«å¯å˜çŠ¶æ€</strong>ï¼šè™½ç„¶ç»“æ„åŒ–å¹¶å‘å¤„ç†åè°ƒï¼Œä½†æ‚¨ä»ç„¶éœ€è¦å¯¹å…±äº«æ•°æ®çš„çº¿ç¨‹å®‰å…¨è´Ÿè´£ã€‚</p>
</li>
<li>
<p><strong>è€ƒè™‘ä½œç”¨åŸŸå€¼</strong>ï¼šä¸ºäº†åœ¨ä»»åŠ¡å±‚æ¬¡ç»“æ„ä¸­ä¼ é€’ä¸Šä¸‹æ–‡ï¼Œä½œç”¨åŸŸå€¼ï¼ˆJEP 481ï¼‰æä¾›äº†æ¯” <code>ThreadLocal</code> æ›´å¥½çš„æ›¿ä»£æ–¹æ¡ˆã€‚</p>
</li>
</ul>
<h2 data-id="heading-10">çœŸå®ç¤ºä¾‹ï¼šèšåˆç”¨æˆ·æ•°æ®</h2>
<p>è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªä»å¤šä¸ªæ¥æºèšåˆæ•°æ®çš„å®Œæ•´ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserAggregator</span> {

<span class="hljs-keyword">record</span> <span class="hljs-title class_">UserData</span><span class="hljs-params">(User user, List&lt;Order&gt; orders,

Stats stats, Recommendations recs)</span> {}

  


<span class="hljs-keyword">public</span> UserData <span class="hljs-title function_">aggregate</span><span class="hljs-params">(String userId)</span>

<span class="hljs-keyword">throws</span> ExecutionException, InterruptedException {

<span class="hljs-keyword">try</span> (<span class="hljs-type">var</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StructuredTaskScope</span>.ShutdownOnFailure()) {

Supplier&lt;User&gt; user =

scope.fork(() -&gt; userService.fetch(userId));

Supplier&lt;List&lt;Order&gt;&gt; orders =

scope.fork(() -&gt; orderService.fetch(userId));

Supplier&lt;Stats&gt; stats =

scope.fork(() -&gt; statsService.compute(userId));

Supplier&lt;Recommendations&gt; recs =

scope.fork(() -&gt; mlService.recommend(userId));

  


scope.join().throwIfFailed();

  


<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserData</span>(

user.get(),

orders.get(),

stats.get(),

recs.get()

);

}

}

}

</code></pre>
<p>è¿™ç§æ¨¡å¼ç®€æ´ã€å®‰å…¨ä¸”é«˜æ•ˆã€‚å¦‚æœä»»ä½•æœåŠ¡å¤±è´¥ï¼Œæ‰€æœ‰å…¶ä»–æœåŠ¡ä¼šç«‹å³è¢«å–æ¶ˆã€‚ä½œç”¨åŸŸç¡®ä¿é€‚å½“çš„æ¸…ç†ã€‚å¹¶ä¸”å€ŸåŠ©è™šæ‹Ÿçº¿ç¨‹ï¼Œè¿™å¯ä»¥æ‰©å±•åˆ°æ•°åƒä¸ªå¹¶å‘è¯·æ±‚ã€‚</p>
<h2 data-id="heading-11">å¼€å‘è€…è§‚ç‚¹</h2>
<p>Java æ¶æ„å¸ˆå†³å®šä¸ä» <code>fork</code> æ–¹æ³•è¿”å› <code>Future</code> å®ä¾‹ï¼Œä»¥é¿å…ä¸éç»“æ„åŒ–è®¡ç®—æ··æ·†ï¼Œå¹¶ä¸æ—§çš„å¹¶å‘æ¨¡å‹è¿›è¡Œæ¸…æ™°åˆ‡å‰²ã€‚è¿™ä¸€è®¾è®¡å†³ç­–å¼ºè°ƒäº†ç»“æ„åŒ–å¹¶å‘æ˜¯ä¸€ç§æ–°çš„èŒƒå¼ï¼Œè€Œä¸ä»…ä»…æ˜¯æ¸è¿›å¼æ”¹è¿›ã€‚</p>
<p>Rock the JVM æ•™ç¨‹æŒ‡å‡ºï¼Œç»“æ„åŒ–å¹¶å‘æœ€ç»ˆä¸º Java å¸¦æ¥äº†å…¶ä»– JVM è¯­è¨€é€šè¿‡ Kotlin åç¨‹å’Œ Scala Cats Effects Fibers ç­‰åº“æ‰€æä¾›çš„åŠŸèƒ½ï¼Œä½†æ‹¥æœ‰å®˜æ–¹çš„å¹³å°æ”¯æŒã€‚</p>
<h2 data-id="heading-12">å±•æœ›æœªæ¥</h2>
<p>ç»“æ„åŒ–å¹¶å‘ä»£è¡¨äº†æˆ‘ä»¬å¯¹å¹¶å‘ç¼–ç¨‹æ€è€ƒæ–¹å¼çš„æ ¹æœ¬è½¬å˜ã€‚æˆ‘ä»¬ä¸æ˜¯ç®¡ç†å•ä¸ªçº¿ç¨‹å’Œ Futureï¼Œè€Œæ˜¯æŒ‰å±‚æ¬¡ç»“æ„ç»„ç»‡å¹¶å‘å·¥ä½œâ€”â€”å°±åƒæˆ‘ä»¬ç”¨æ–¹æ³•å’Œå¾ªç¯ç»„ç»‡é¡ºåºä»£ç ä¸€æ ·ã€‚</p>
<p>å¥½å¤„æ˜¯æ˜¾è€Œæ˜“è§çš„ï¼šæ²¡æœ‰çº¿ç¨‹æ³„æ¼ã€æ­£ç¡®çš„é”™è¯¯ä¼ æ’­ã€åè°ƒçš„å–æ¶ˆä»¥åŠå¢å¼ºçš„å¯è§‚æµ‹æ€§ã€‚ç»“åˆè™šæ‹Ÿçº¿ç¨‹ï¼ŒJava ç°åœ¨æä¾›äº†ä¸€ä¸ªæ—¢å¼ºå¤§åˆæ˜“äºä½¿ç”¨çš„å¹¶å‘æ¨¡å‹ã€‚</p>
<p>éšç€è¯¥ API èµ°å‘æœ€ç»ˆåŒ–ï¼Œé¢„è®¡å°†åœ¨æ¡†æ¶å’Œåº“ä¸­å¾—åˆ°æ›´å¹¿æ³›çš„é‡‡ç”¨ã€‚Springã€Hibernate åŠå…¶ä»–ç”Ÿæ€ç³»ç»Ÿé¡¹ç›®å·²ç»åœ¨è€ƒè™‘å¦‚ä½•åˆ©ç”¨ç»“æ„åŒ–å¹¶å‘æ¥ç¼–å†™æ›´æ¸…æ™°ã€æ›´å¯é çš„å¹¶å‘ä»£ç ã€‚</p>
<hr/>
<p>ã€æ³¨ã€‘æœ¬æ–‡è¯‘è‡ªï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.javacodegeeks.com%2F2025%2F11%2Fstructured-concurrency-patterns-in-java.html" target="_blank" title="https://www.javacodegeeks.com/2025/11/structured-concurrency-patterns-in-java.html" ref="nofollow noopener noreferrer">Structured Concurrency Patterns in Java</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nano Bananaæ–°ç©æ³•æ— é™å¥—å¨ƒï¼â€œGPT-5éƒ½ä¸ä¼šå¤„ç†è¿™ç§çº§åˆ«çš„é€’å½’â€]]></title>    <link>https://juejin.cn/post/7576264484688822312</link>    <guid>https://juejin.cn/post/7576264484688822312</guid>    <pubDate>2025-11-25T06:52:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484688822312" data-draft-id="7576264484688789544" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nano Bananaæ–°ç©æ³•æ— é™å¥—å¨ƒï¼â€œGPT-5éƒ½ä¸ä¼šå¤„ç†è¿™ç§çº§åˆ«çš„é€’å½’â€"/> <meta itemprop="keywords" content="GPT,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T06:52:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å­ä½"/> <meta itemprop="url" content="https://juejin.cn/user/2858385963484488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nano Bananaæ–°ç©æ³•æ— é™å¥—å¨ƒï¼â€œGPT-5éƒ½ä¸ä¼šå¤„ç†è¿™ç§çº§åˆ«çš„é€’å½’â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2858385963484488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å­ä½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:52:28.000Z" title="Tue Nov 25 2025 06:52:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ‚¨çŒœæ€ä¹ˆç€ï¼ŸNano banana çš„æ–°ç©æ³•å°±åƒè·¯æ˜“åå…­ï¼Œæ ¹æœ¬çœ‹ä¸åˆ°å¤´ã€‚</p>
<p>ä»Šå¤©ä¸€ççœ¼ï¼Œå°±å‘ç° Pro ç‰ˆæœ¬å¸¦ç€å’±æ‰è¿›<strong>æ— é™å¥—å¨ƒ</strong>çš„ä¸–ç•Œé‡Œäº†ï¼Œbe likeï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6de44bc5efc846899696457dd98754ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=oEmUFY7qh%2FE%2Bpl6RPJkn3FiTpUk%3D" alt="" loading="lazy"/></p>
<p>æ±‚é—®ï¼Œåˆ°åº•æ˜¯å…ˆæœ‰çš„è¿™å¼ ç…§ç‰‡ï¼Œè¿˜æ˜¯å…ˆæœ‰çš„è¿™å¹…æ²¹ç”»ï¼Ÿï¼ˆdogeï¼‰</p>
<p>æƒ³è¦ç”»å‡ºè¿™å¼ å›¾ï¼Œéœ€è¦çš„æç¤ºè¯éå¸¸ç®€å•ï¼š</p>
<blockquote>
<p>1998 å¹´çš„ä¸€å¼ ä¸šä½™æ‘„å½±ä½œå“ã€‚ç”»é¢ä¸­ï¼Œä¸€ä½ä¸­å¹´è‰ºæœ¯å®¶æ­£åœ¨å°†ç”µè„‘å±å¹•ä¸Šçš„å›¾åƒäº²æ‰‹å¤åˆ¶åˆ°ä¸€å¼ ç»·å¥½çš„æ²¹ç”»å¸ƒä¸Šï¼Œä½†è¿™ä¸ªå›¾åƒæœ¬èº«å…¶å®å°±æ˜¯è¿™ä½è‰ºæœ¯å®¶ç»˜åˆ¶è¯¥é€’å½’å›¾åƒæ—¶çš„æ‹æ‘„ç”»é¢ã€‚</p>
</blockquote>
<p>è¿™å¼ ç…§ç‰‡çš„åŸä½œè€…ã€Reddit ç½‘å‹ r/ChatGPT è¿è¿æƒŠå¹ï¼Œè¡¨ç¤º Nano Banana Pro ç”»çš„è¿™å¼ å›¾çœŸçš„æƒŠè‰³åˆ°ä»–äº†â€”â€”</p>
<p>è€å¼æ˜¾ç¤ºå™¨å‘å‡ºçš„å…‰æ™•ï¼Œç”»å¸ƒä¸‹æº…ä¸Šå»çš„é¢œæ–™ï¼Œè¿˜æœ‰ç”»é¢å³ä¸‹æ–¹é‚£ä¸ªå‚»ç“œç›¸æœºçš„æ—¶é—´æˆ³â€¦â€¦r/ChatGPT åƒæ¬£èµä¸€å¼ ä¼ ä¸–åç”»ä¸€æ ·æŠŠè¿™å¼ å›¾æ”¾å¤§çœ‹äº† 20 åˆ†é’Ÿã€‚</p>
<p>è¦çŸ¥é“ï¼Œr/ChatGPT çš®ä¸‹æ˜¯ Riley Goodsideï¼Œè¢«ä¸šå†…æ™®éè®¤ä¸ºæ˜¯æœ€æ—©ä¸€æ‰¹ â€œæç¤ºå·¥ç¨‹å¸ˆâ€ ä¹‹ä¸€ï¼Œç”šè‡³è¢«åª’ä½“ç§°ä¸ºâ€œå…¨çƒæœ€ç‰›çš„æç¤ºå·¥ç¨‹å¸ˆâ€ã€‚</p>
<p>ä»Šå¹´ï¼Œä»–åŠ å…¥äº† Google DeepMindï¼Œä»äº‹ä¸å¤§æ¨¡å‹æç¤ºå·¥ç¨‹ç›¸å…³çš„å·¥ä½œã€‚</p>
<p>æ­¤æ¬¡åˆ†äº«å®Œè‡ªå·±çš„å¥—å¨ƒç©æ³•åï¼ŒRiley ç¨å¸¦æ‰‹ä¸å¿˜å¯¹æ¯”ä¸€æŠŠï¼šâ€œGPT-5 éƒ½ä¸ä¼šå¤„ç†è¿™ç§çº§åˆ«çš„é€’å½’ï¼â€</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe3481fe42014430bf1cdf76f8fbd327~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=7PqNA%2B2%2BT0TeOIJ2bUAslBfqkZY%3D" alt="" loading="lazy"/></p>
<p>Nano Banana ä¸æ„§æ˜¯ Nano Bananaï¼Œæœç„¶æ˜¯çœŸ Â·N Bâ€¦â€¦</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f1e9f39b3b5449b80f80c0bb522642d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=XmVGpjwrxlFdMD3MmEcikcjqOOo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">â€œä½ çš„é€’å½’æ¬¡æ•°å³å°†ç”¨å°½â€</h2>
<p>å¥½å¥‡çš„ç½‘å‹ä»¬é—»è®¯ç«é€Ÿèµ¶æ¥ï¼Œå·²ç»å¼€å§‹å¥—å¨ƒå¥—å¾—ä¸çŸ¥å¤©åœ°ä¸ºä½•ç‰©â€”â€”</p>
<p>ç”Ÿæˆå‡ºæ¥çš„å›¾åƒæœ‰å¾ˆæˆåŠŸçš„ã€‚</p>
<p>è€Œä¸”æç¤ºè¯å°±åœ¨è›‹ç³•ä¸Šï¼Œå±å®æ˜¯æŠŠ Nano Banana ç©å„¿æ˜ç™½äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9768a7d73552454fb32af0812e0475fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=jSXRO2e8wf6DMtant2A%2BKUQg11g%3D" alt="" loading="lazy"/></p>
<p>ç½‘å‹çœ‹äº†è¿å£°è¯´å¥½ï¼Œè¡¨ç¤º Nano Banana å¯¹æç¤ºè¯ä¸­è§„å®šçš„èƒŒæ™¯å’Œæ‹æ‘„è§†è§’ï¼Œç†è§£éå¸¸åˆ°ä½ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1f37926b0a0742cfab76f97c42fb93b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=kL2j8dlOWa1UgHYXUcmT9ma%2FLRM%3D" alt="" loading="lazy"/></p>
<p>è€Œå¤§å®¶æ™’å‡ºçš„ç»“æœé‡Œä¹Ÿæœ‰ä»¤äººçœ‹äº†å°±æ‘‡å¤´çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å¼ ã€‚</p>
<p>ä½ è¯´å®ƒå¥—å¨ƒäº†å—ï¼Ÿå¥½åƒå¥—äº†ã€‚</p>
<p>ä½†åˆå¥½åƒå“ªé‡Œå¥—å¾—ä¸å¯¹ï¼ŒæŠ è„‘å£³. gif</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fe36a3a247d434f9886e7f39ae8079c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=di2uhmod%2FLe7NGOLKgUwvIv9y24%3D" alt="" loading="lazy"/></p>
<p>æ­¤å¤–ï¼Œå¤§å®¶è¿˜å‘ç°ï¼Œåªè¦è§„å®š â€œ1998 å¹´â€ï¼ŒNano Banana å°±å¾ˆå–œæ¬¢ç›– 1998 å¹´ 10 æœˆçš„æ—¶é—´æˆ³ã€‚</p>
<p>ä¸çŸ¥é“å®ƒä¸ºå•¥å¯¹è¿™ä¸ªæœˆä»½æƒ…æœ‰ç‹¬é’Ÿã€‚</p>
<p>æœ‰æ¸…æ¥šèƒŒååŸå› çš„å°ä¼™ä¼´ä¸ï¼Ÿ</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/46b32fc4cecf450ba183d7bf1fd5816f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=cXSfbpS%2F6X1tRfOfT5rfzBmA4mU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/607bf598a84343f3ae28027b5234eb50~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=3qSJG0ub6W81vPOzqzlrk0XveeA%3D" alt="" loading="lazy"/></p>
<p>ä½†å’Œæ˜¯ä¸æ˜¯èƒ¡è¯´å…«é“çš„è¯­è¨€æ¨¡å‹ä¸€æ ·ï¼ŒNano Banana ç”Ÿæˆçš„ç…§ç‰‡è‚¯å®šè¾¾ä¸åˆ°ç™¾åˆ†ç™¾å®Œç¾ã€‚</p>
<p>è¿™åœºå¥—å¨ƒæ¸¸æˆçš„ç»†èŠ‚å¤„è¿˜æ˜¯æœ‰è¯¸å¤š bugï¼Œè€Œä¸”å¾ˆå¤šäººç©å„¿æ— é™å¥—å¨ƒçš„æ—¶å€™éƒ½è®¾å®šå®ƒç”»å‡ºæ¥çš„æ˜¯ä¸€å¼ è€ç…§ç‰‡ï¼Œå™ªç‚¹å ªæ¯” ccdï¼Œåˆ†è¾¨ç‡å¾ˆä½ï¼Œç»™äº† AI å¾ˆå¤šå¯ä»¥ â€œå‡ºé”™â€ çš„æ¨¡ç³Šç©ºé—´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/16693bf0469b49e79938f18ad41aa501~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=MwIUEtSpOepJBoXSMuQ8%2ByTFFoE%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡éœ€è¦æ³¨æ„äº†ï¼Œè¿™ä¸ªå¥—å¨ƒæ¸¸æˆé‡Œï¼Œå¹¶ä¸å­˜åœ¨ä¸Šé¢è¿™ä¸ªç½‘å‹è°ˆåŠçš„ â€œä¸»å›¾åƒâ€ã€‚</p>
<p>AI ç”Ÿæˆå›¾åƒæ—¶ï¼Œå¹¶ä¸æ˜¯ç”¨ Photoshop æ¥ P å›¾é‚£æ ·æŠŠå·²æœ‰çš„å›¾ç‰‡ç´ æï¼ˆå¦‚ä¸€åªçŒ«çš„ç…§ç‰‡ï¼‰ç”¨æ¥å¤åˆ¶ã€ç²˜è´´ã€ç¼©æ”¾æˆ–æ‹¼æ¥ã€‚</p>
<p>Nano Banana ç”»å›¾ï¼Œçœ‹èµ·æ¥æ˜¯åœ¨ç”¨åŒæ ·çš„å…ƒç´ å¥—å¨ƒï¼Œä½†å…¶å®çœ‹èµ·æ¥ç›¸åŒçš„éƒ¨åˆ†æ˜¯åˆ†åˆ«éšæœºå™ªå£°ç”Ÿæˆçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/849dd86181974f11ae063854ffdcbcee~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=oNzM%2BcT8oDX9hv5oAfwfEOnkfVI%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">Gemini å¸‚åœºä»½é¢æå‡è‡³ 30%</h2>
<p>ç°é˜¶æ®µå¿…ç„¶å‡ºç°çš„ç”»ç”» â€œå¹»è§‰â€ å¹¶ä¸å¦¨ç¢å¤§å®¶è¡¨è¾¾å¯¹ Nano Banana çš„å–œæ¬¢ã€‚</p>
<p>Reddit çš„è®¨è®ºåŒºé‡Œï¼Œä¸å°‘ç”¨æˆ·ç›´æ¥ç”¨ â€œGemini is CRAZYâ€ æ¥è¡¨è¾¾è‡ªå·±çš„æ„Ÿå¹ã€‚</p>
<p>æ€ä¹ˆè¯´å‘¢â€”â€”</p>
<p>å¤ªå¥½äº†ï¼Œå¤ªå¥½äº†ï¼Œè°·æ­Œä½ æœ‰ç‚¹å¤ªå¥½äº†ï¼</p>
<p>ä¸å…‰æ˜¯ Nano Banana è¢«å¤§å®¶ç–¯ç©ï¼Œæœ¬æœˆ 19 æ—¥ Gemini 3 å‘å¸ƒåï¼Œæ ¹æ® SimilarWeb ç»Ÿè®¡ç»“æœï¼ŒGemini çš„å¸‚åœºä»½é¢ç›´æ¥åœ¨çŸ­æ—¶é—´å†…ä» 23% æ‹‰å‡è‡³ 30%ã€‚</p>
<p><em>ï¼ˆæ³¨ï¼šä»…ç»Ÿè®¡æ¡Œé¢å’Œç§»åŠ¨ç½‘é¡µæµè§ˆé‡ï¼Œä¸åŒ…æ‹¬åº”ç”¨ç¨‹åºï¼‰</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86795de63418449aba44a72ebd44ec58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=GxS40y80VOmHJoPNbj37DeGagrw%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶ä»å›¾ä¸Šçš„ç´«è‰²æ›²çº¿ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼ŒChatGPT çš„æ ¸å¿ƒç”¨æˆ·ç¾¤ä¿æŒç¨³å›ºï¼Œä½†è¿™ä¸ªå¸‚åœºä»½é¢æ‹‰å‡ä¹‹è¿…é€Ÿï¼Œå¤§æ¦‚ ChatGPT çœ‹äº†éƒ½è¦ç¼“ç¼“æ‰“å‡ºä¸€ä¸ªé—®å·ï¼š</p>
<p>Hey Broï¼Œè¿™åˆç†å—ï¼Ÿ</p>
<p>ç¤¾äº¤åª’ä½“ä¸ŠåŒæ—¶è®¨è®ºç€å¦ä¸€ä¸ªè¯é¢˜ã€‚</p>
<p>å¢åŠ çš„ 7% å¸‚åœºä»½é¢ï¼Œæ˜¯æ–°å‘å¸ƒå¸¦æ¥çš„ä¸€æ—¶å…´èµ·çš„è¾¹ç¼˜ç”¨æˆ·ï¼Œè¿˜æ˜¯çœŸçš„è¿æ¥äº†ä¸€æ³¢æ–°çš„é•¿æœŸç²‰ä¸ï¼Ÿ</p>
<p>æ¯•ç«Ÿæ ¹æ® TechRadar æ´å¼•çš„æ•°æ®ï¼ŒChatGPT çš„ç”¨æˆ·å¿ è¯šåº¦å¤§çº¦æ˜¯ 82%ï¼Œç›¸æ¯”ä¹‹ä¸‹ï¼ŒGemini åˆ™åªæœ‰ 49%ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f12c9cff6394bccb96c801341facf16~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=e35Mi6sbVM2gYVE5OQD5injqFcA%3D" alt="" loading="lazy"/></p>
<p>æœ‰äººè¡¨ç¤ºï¼Œå¤§æ¨¡å‹ç”¨æˆ·æœ¬èº«å°±æ²¡ä»»ä½•ç²˜æ€§å¯è¨€å•¦ï¼Œæ›´é«˜æ™ºèƒ½çš„æ¨¡å‹å·²å‡ºç°ï¼Œå¤§å®¶å°±ç«‹é©¬æŠ•å…¥æ–°çš„æ€€æŠ±äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b82111a2a57c4ddba9c215a13de60105~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=EO6g2MoY%2Fup81k2Wm%2FZ%2BQEzdeSU%3D" alt="" loading="lazy"/></p>
<p>è¯è¯´å›æ¥ï¼ŒGemini çš„ç¡®å·²ç»è®©éƒ¨åˆ†ç”¨æˆ·å˜å¿ƒäº†ã€‚</p>
<p>Salesforce çš„ CEO Marc Benioffï¼Œå°±æ˜¯å¿«ä¹å¥”å‘ Gemini çš„é‚£ä¸€ä¸ªï¼š</p>
<blockquote>
<p>è¿‡å» 3 å¹´ï¼Œæˆ‘æ¯å¤©éƒ½ç”¨ ChatGPTã€‚ä½†åˆšæ‰ç©å„¿äº†ä¿©å°æ—¶çš„ Gemini3ï¼Œæˆ‘å†ä¹Ÿå›ä¸å»äº†ã€‚<br/>
æ¨ç†èƒ½åŠ›ã€é€Ÿåº¦ã€å›¾åƒã€è§†é¢‘â€¦â€¦ è¿™ç®€ç›´æ˜¯ä¸€æ¬¡ç–¯ç‹‚çš„èƒ½åŠ›é£è·ƒã€‚ä¸€åˆ‡å˜å¾—æ›´å¿«ã€æ›´æ¸…æ™°ã€‚<br/>
æ„Ÿè§‰ä¸–ç•Œå†æ¬¡å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/741e860bb1af46f189bcf13ee2fa3b48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=PsgZGgKiX7bXH%2FWrNazmHH9piqY%3D" alt="" loading="lazy"/></p>
<p>ä¹Ÿæœ‰å¦å¤–çš„ç½‘å‹åˆ†äº«äº†è‡ªå·±çš„æ¯æ—¥ AI ç»„åˆå¥—é¤â€”â€”</p>
<p>ç”¨ Claude ç¼–ç¨‹ã€å†™ä½œï¼Œæ¶‰åŠæ·±åº¦ç ”ç©¶ã€æœç´¢ã€å­¦ä¹ ï¼ˆNotebookLMï¼‰ã€è®¾è®¡ã€å›¾åƒå’Œè§†é¢‘çš„æ—¶å€™ï¼Œå°±ä½¿ç”¨ Geminiã€‚</p>
<p>ä½ å‘¢ï¼Ÿä½ æ¯å¤©éƒ½è®©å“ªäº› AI é™ªä½ æ‰“å·¥ï¼Ÿ</p>
<p>å¯ä»¥åœ¨è¯„è®ºåŒºå’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ï½</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3e1f414e07642ab9785218fd6e4e5a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658347&amp;x-signature=muLBDUORAP%2BYG1y1eKoL2e7E%2Fkw%3D" alt="" loading="lazy"/></p>
<p>å‚è€ƒé“¾æ¥ï¼š<br/>
[1]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.reddit.com%2Fr%2FChatGPT%2Fcomments%2F1p4ljuz%2Fnano_banana_gemini_3_prompt_gone_infinite_1998%2F" target="_blank" title="https://www.reddit.com/r/ChatGPT/comments/1p4ljuz/nano_banana_gemini_3_prompt_gone_infinite_1998/" ref="nofollow noopener noreferrer">www.reddit.com/r/ChatGPT/câ€¦</a><br/>
[2]<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fgoodside%2Fstatus%2F1993049543945159145%3Fs%3D20" target="_blank" title="https://x.com/goodside/status/1993049543945159145?s=20" ref="nofollow noopener noreferrer">x.com/goodside/stâ€¦</a><br/>
[3]<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FBenioff%2Fstatus%2F1992726929204760661%3Fs%3D20" target="_blank" title="https://x.com/Benioff/status/1992726929204760661?s=20" ref="nofollow noopener noreferrer">x.com/Benioff/staâ€¦</a><br/>
[4]<a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2Fdeedydas%2Fstatus%2F1992972767424331978%3Fs%3D20" target="_blank" title="https://x.com/deedydas/status/1992972767424331978?s=20" ref="nofollow noopener noreferrer">x.com/deedydas/stâ€¦</a></p>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„æƒ³æ³•ï¼</strong></p>
<p>â€”Â <strong>å®Œ</strong>Â â€”</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Pythonå®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ·±åº¦å¥½æ–‡]]></title>    <link>https://juejin.cn/post/7576470438579748890</link>    <guid>https://juejin.cn/post/7576470438579748890</guid>    <pubDate>2025-11-25T06:46:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576470438579748890" data-draft-id="7576218673050026035" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Pythonå®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ·±åº¦å¥½æ–‡"/> <meta itemprop="keywords" content="åç«¯,Python"/> <meta itemprop="datePublished" content="2025-11-25T06:46:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·234526700982"/> <meta itemprop="url" content="https://juejin.cn/user/3062604336999771"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Pythonå®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ·±åº¦å¥½æ–‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3062604336999771/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·234526700982
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:46:12.000Z" title="Tue Nov 25 2025 06:46:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Pythonå®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ·±åº¦å¥½æ–‡</h2>
<p>@<a href="https://link.juejin.cn?target=%25E6%2596%2587%25E7%25AB%25A0%25E7%259B%25AE%25E5%25BD%2595" target="_blank" title="%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95" ref="nofollow noopener noreferrer">TOC</a></p>
<hr/>
<h3 data-id="heading-1">å¼€ç¯‡å¼•è¨€</h3>
<p>åœ¨ç°ä»£Webåº”ç”¨å’Œæ•°æ®å¤„ç†ç³»ç»Ÿä¸­ï¼Œå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—å·²ç»æˆä¸ºå¤„ç†é«˜å¹¶å‘è¯·æ±‚å’Œåå°ä»»åŠ¡çš„é‡è¦å·¥å…·ã€‚Pythonä½œä¸ºä¸€ç§é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œæä¾›äº†å¤šç§æ–¹å¼æ¥å®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•ä½¿ç”¨Pythonå®ç°é«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶é€šè¿‡å®é™…æ¡ˆä¾‹å±•ç¤ºå…¶åº”ç”¨åœºæ™¯ã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li>å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—çš„åŸºæœ¬åŸç†</li>
<li>ä½¿ç”¨<code>asyncio</code>å’Œ<code>aiohttp</code>å®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—</li>
<li>ä»»åŠ¡é˜Ÿåˆ—çš„æŒä¹…åŒ–ä¸æ¶ˆæ¯ä¼ é€’</li>
<li>å®é™…åº”ç”¨æ¡ˆä¾‹ï¼šçŒ´å­éŸ³æ‚¦100ä¸‡æ­£ç‰ˆéŸ³ä¹</li>
</ol>
<h3 data-id="heading-3">å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—çš„åŸºæœ¬åŸç†</h3>
<h4 data-id="heading-4">åŸºæœ¬æ¦‚å¿µ</h4>
<p>å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä¸€ç§ç”¨äºå¤„ç†å¤§é‡åå°ä»»åŠ¡çš„æŠ€æœ¯ã€‚å®ƒé€šè¿‡å°†ä»»åŠ¡æ”¾å…¥é˜Ÿåˆ—ä¸­ï¼Œç„¶åç”±å¤šä¸ªå·¥ä½œè¿›ç¨‹æˆ–çº¿ç¨‹å¹¶è¡Œå¤„ç†è¿™äº›ä»»åŠ¡ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ€§èƒ½å’Œå“åº”é€Ÿåº¦ã€‚</p>
<h4 data-id="heading-5">å…³é”®ç»„ä»¶</h4>
<ul>
<li><strong>ç”Ÿäº§è€…</strong>ï¼šè´Ÿè´£ç”Ÿæˆä»»åŠ¡å¹¶å°†å…¶æ”¾å…¥é˜Ÿåˆ—ã€‚</li>
<li><strong>æ¶ˆè´¹è€…</strong>ï¼šä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œã€‚</li>
<li><strong>é˜Ÿåˆ—</strong>ï¼šå­˜å‚¨å¾…å¤„ç†ä»»åŠ¡çš„æ•°æ®ç»“æ„ã€‚</li>
</ul>
<h4 data-id="heading-6">ä¼˜ç¼ºç‚¹</h4>
<ul>
<li><strong>ä¼˜ç‚¹</strong>ï¼šæé«˜ç³»ç»Ÿååé‡ï¼Œå‡å°‘å“åº”æ—¶é—´ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚</li>
<li><strong>ç¼ºç‚¹</strong>ï¼šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œéœ€è¦å¤„ç†ä»»åŠ¡çš„è°ƒåº¦å’Œåè°ƒã€‚</li>
</ul>
<h3 data-id="heading-7">ä½¿ç”¨<code>asyncio</code>å’Œ<code>aiohttp</code>å®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—</h3>
<h4 data-id="heading-8">åŸç†</h4>
<p><code>asyncio</code>æ˜¯Pythonçš„æ ‡å‡†åº“ï¼Œæä¾›äº†å¼‚æ­¥I/Oã€äº‹ä»¶å¾ªç¯ã€åç¨‹ç­‰åŸºç¡€åŠŸèƒ½ã€‚<code>aiohttp</code>æ˜¯ä¸€ä¸ªåŸºäº<code>asyncio</code>çš„HTTPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨åº“ï¼Œé€‚ç”¨äºæ„å»ºé«˜æ€§èƒ½çš„å¼‚æ­¥Webåº”ç”¨ã€‚</p>
<h4 data-id="heading-9">å®Œæ•´ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiohttp
<span class="hljs-keyword">from</span> aiohttp <span class="hljs-keyword">import</span> web

<span class="hljs-comment"># ä»»åŠ¡é˜Ÿåˆ—</span>
task_queue = asyncio.Queue()

<span class="hljs-comment"># ç”Ÿäº§è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">producer</span>(<span class="hljs-params">url, queue</span>):
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url) <span class="hljs-keyword">as</span> response:
            <span class="hljs-keyword">await</span> queue.put((url, <span class="hljs-keyword">await</span> response.text()))

<span class="hljs-comment"># æ¶ˆè´¹è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">consumer</span>(<span class="hljs-params">queue</span>):
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        url, content = <span class="hljs-keyword">await</span> queue.get()
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Received content from <span class="hljs-subst">{url}</span>"</span>)
        <span class="hljs-comment"># å¤„ç†å†…å®¹</span>
        queue.task_done()

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-comment"># åˆ›å»ºä»»åŠ¡é˜Ÿåˆ—</span>
    task_queue = asyncio.Queue()

    <span class="hljs-comment"># å¯åŠ¨æ¶ˆè´¹è€…</span>
    consumer_task = asyncio.create_task(consumer(task_queue))

    <span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§è€…</span>
    urls = [<span class="hljs-string">"https://example.com"</span>, <span class="hljs-string">"https://example.org"</span>]
    producers = [producer(url, task_queue) <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls]
    <span class="hljs-keyword">await</span> asyncio.gather(*producers)

    <span class="hljs-comment"># ç­‰å¾…æ‰€æœ‰ä»»åŠ¡å®Œæˆ</span>
    <span class="hljs-keyword">await</span> task_queue.join()
    consumer_task.cancel()

<span class="hljs-comment"># è¿è¡Œä¸»å‡½æ•°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-10">å…³é”®è¯´æ˜</h4>
<ul>
<li><code>asyncio.Queue</code>ç”¨äºåˆ›å»ºä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—ã€‚</li>
<li><code>producer</code>å‡½æ•°è´Ÿè´£ç”Ÿæˆä»»åŠ¡å¹¶æ”¾å…¥é˜Ÿåˆ—ã€‚</li>
<li><code>consumer</code>å‡½æ•°ä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡å¹¶å¤„ç†ã€‚</li>
<li><code>asyncio.gather</code>ç”¨äºå¹¶è¡Œè¿è¡Œå¤šä¸ªåç¨‹ã€‚</li>
<li><code>queue.task_done()</code>ç”¨äºæ ‡è®°ä»»åŠ¡å·²å®Œæˆã€‚</li>
</ul>
<h3 data-id="heading-11">ä»»åŠ¡é˜Ÿåˆ—çš„æŒä¹…åŒ–ä¸æ¶ˆæ¯ä¼ é€’</h3>
<h4 data-id="heading-12">åŸç†</h4>
<p>ä¸ºäº†ç¡®ä¿ä»»åŠ¡é˜Ÿåˆ—çš„å¯é æ€§å’ŒæŒä¹…åŒ–ï¼Œå¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿå¦‚RabbitMQæˆ–Redisã€‚è¿™äº›ç³»ç»Ÿæä¾›äº†æ›´å¼ºå¤§çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œæ”¯æŒæ¶ˆæ¯çš„æŒä¹…åŒ–ã€ç¡®è®¤æœºåˆ¶å’Œé«˜å¯ç”¨æ€§ã€‚</p>
<h4 data-id="heading-13">å®Œæ•´ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aioredis

<span class="hljs-comment"># Redisè¿æ¥</span>
redis = <span class="hljs-literal">None</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_redis</span>():
    <span class="hljs-keyword">global</span> redis
    redis = <span class="hljs-keyword">await</span> aioredis.create_redis_pool(<span class="hljs-string">'redis://localhost'</span>)

<span class="hljs-comment"># ç”Ÿäº§è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">producer</span>(<span class="hljs-params">url</span>):
    <span class="hljs-keyword">await</span> redis.rpush(<span class="hljs-string">'task_queue'</span>, url)

<span class="hljs-comment"># æ¶ˆè´¹è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">consumer</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        url = <span class="hljs-keyword">await</span> redis.blpop(<span class="hljs-string">'task_queue'</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Received URL: <span class="hljs-subst">{url[<span class="hljs-number">1</span>].decode()}</span>"</span>)
        <span class="hljs-comment"># å¤„ç†URL</span>
        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">await</span> init_redis()
    <span class="hljs-comment"># å¯åŠ¨æ¶ˆè´¹è€…</span>
    consumer_task = asyncio.create_task(consumer())

    <span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§è€…</span>
    urls = [<span class="hljs-string">"https://example.com"</span>, <span class="hljs-string">"https://example.org"</span>]
    <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
        <span class="hljs-keyword">await</span> producer(url)

    <span class="hljs-comment"># ç­‰å¾…ä¸€æ®µæ—¶é—´åé€€å‡º</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">5</span>)
    consumer_task.cancel()

<span class="hljs-comment"># è¿è¡Œä¸»å‡½æ•°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-14">å…³é”®è¯´æ˜</h4>
<ul>
<li><code>aioredis</code>æ˜¯ä¸€ä¸ªåŸºäº<code>asyncio</code>çš„Rediså®¢æˆ·ç«¯åº“ã€‚</li>
<li><code>rpush</code>å’Œ<code>blpop</code>åˆ†åˆ«ç”¨äºå‘é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡å’Œä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ã€‚</li>
<li><code>await asyncio.sleep(1)</code>ç”¨äºæ¨¡æ‹Ÿä»»åŠ¡å¤„ç†æ—¶é—´ã€‚</li>
</ul>
<h3 data-id="heading-15">å®é™…åº”ç”¨æ¡ˆä¾‹ï¼šçŒ´å­éŸ³æ‚¦100ä¸‡æ­£ç‰ˆéŸ³ä¹</h3>
<h4 data-id="heading-16">åº”ç”¨åœºæ™¯</h4>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªéŸ³ä¹å¹³å°â€œçŒ´å­éŸ³æ‚¦â€ï¼Œæ‹¥æœ‰100ä¸‡é¦–æ­£ç‰ˆéŸ³ä¹ã€‚æˆ‘ä»¬éœ€è¦å®šæœŸä»å„ä¸ªéŸ³ä¹æä¾›å•†è·å–æœ€æ–°çš„éŸ³ä¹ä¿¡æ¯å¹¶æ›´æ–°åˆ°æˆ‘ä»¬çš„æ•°æ®åº“ä¸­ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ¥å®ç°ã€‚</p>
<h4 data-id="heading-17">å®ç°æ­¥éª¤</h4>
<ol>
<li><strong>ä»»åŠ¡ç”Ÿæˆ</strong>ï¼šå®šæ—¶ä»»åŠ¡ç”Ÿæˆå™¨å®šæœŸç”ŸæˆæŠ“å–éŸ³ä¹ä¿¡æ¯çš„ä»»åŠ¡ï¼Œå¹¶å°†å…¶æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚</li>
<li><strong>ä»»åŠ¡å¤„ç†</strong>ï¼šå¤šä¸ªæ¶ˆè´¹è€…ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ï¼Œè°ƒç”¨APIè·å–éŸ³ä¹ä¿¡æ¯ï¼Œå¹¶æ›´æ–°åˆ°æ•°æ®åº“ã€‚</li>
<li><strong>æŒä¹…åŒ–</strong>ï¼šä½¿ç”¨Redisä½œä¸ºä»»åŠ¡é˜Ÿåˆ—çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œç¡®ä¿ä»»åŠ¡ä¸ä¼šä¸¢å¤±ã€‚</li>
</ol>
<h4 data-id="heading-18">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aioredis
<span class="hljs-keyword">import</span> aiohttp

<span class="hljs-comment"># Redisè¿æ¥</span>
redis = <span class="hljs-literal">None</span>

<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">init_redis</span>():
    <span class="hljs-keyword">global</span> redis
    redis = <span class="hljs-keyword">await</span> aioredis.create_redis_pool(<span class="hljs-string">'redis://localhost'</span>)

<span class="hljs-comment"># ç”Ÿäº§è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">producer</span>(<span class="hljs-params">url</span>):
    <span class="hljs-keyword">await</span> redis.rpush(<span class="hljs-string">'music_task_queue'</span>, url)

<span class="hljs-comment"># æ¶ˆè´¹è€…å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">consumer</span>():
    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:
        url = <span class="hljs-keyword">await</span> redis.blpop(<span class="hljs-string">'music_task_queue'</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Received URL: <span class="hljs-subst">{url[<span class="hljs-number">1</span>].decode()}</span>"</span>)
        <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiohttp.ClientSession() <span class="hljs-keyword">as</span> session:
            <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> session.get(url[<span class="hljs-number">1</span>].decode()) <span class="hljs-keyword">as</span> response:
                music_info = <span class="hljs-keyword">await</span> response.json()
                <span class="hljs-comment"># æ›´æ–°æ•°æ®åº“</span>
                <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Updated music info: <span class="hljs-subst">{music_info}</span>"</span>)
        <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æ¨¡æ‹Ÿå¤„ç†æ—¶é—´</span>

<span class="hljs-comment"># ä¸»å‡½æ•°</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():
    <span class="hljs-keyword">await</span> init_redis()
    <span class="hljs-comment"># å¯åŠ¨æ¶ˆè´¹è€…</span>
    consumer_task = asyncio.create_task(consumer())

    <span class="hljs-comment"># å¯åŠ¨ç”Ÿäº§è€…</span>
    urls = [<span class="hljs-string">"https://api.example.com/music/1"</span>, <span class="hljs-string">"https://api.example.com/music/2"</span>]
    <span class="hljs-keyword">for</span> url <span class="hljs-keyword">in</span> urls:
        <span class="hljs-keyword">await</span> producer(url)

    <span class="hljs-comment"># ç­‰å¾…ä¸€æ®µæ—¶é—´åé€€å‡º</span>
    <span class="hljs-keyword">await</span> asyncio.sleep(<span class="hljs-number">5</span>)
    consumer_task.cancel()

<span class="hljs-comment"># è¿è¡Œä¸»å‡½æ•°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    asyncio.run(main())
</code></pre>
<h4 data-id="heading-19">å…³é”®è¯´æ˜</h4>
<ul>
<li><code>producer</code>å‡½æ•°å®šæœŸç”ŸæˆæŠ“å–éŸ³ä¹ä¿¡æ¯çš„ä»»åŠ¡ã€‚</li>
<li><code>consumer</code>å‡½æ•°ä»ä»»åŠ¡é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡ï¼Œè°ƒç”¨APIè·å–éŸ³ä¹ä¿¡æ¯ï¼Œå¹¶æ›´æ–°åˆ°æ•°æ®åº“ã€‚</li>
<li><code>aioredis</code>å’Œ<code>aiohttp</code>ç»“åˆä½¿ç”¨ï¼Œå®ç°å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—çš„é«˜æ•ˆå¤„ç†ã€‚</li>
</ul>
<h3 data-id="heading-20">æ€»ç»“</h3>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨Pythonå®ç°é«˜æ•ˆçš„å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ã€‚é€šè¿‡<code>asyncio</code>å’Œ<code>aiohttp</code>ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ„å»ºå¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶é€šè¿‡Rediså®ç°ä»»åŠ¡é˜Ÿåˆ—çš„æŒä¹…åŒ–ã€‚å®é™…åº”ç”¨æ¡ˆä¾‹å±•ç¤ºäº†å¦‚ä½•åœ¨éŸ³ä¹å¹³å°â€œçŒ´å­éŸ³æ‚¦â€ä¸­ä½¿ç”¨å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æ¥å¤„ç†å¤§è§„æ¨¡çš„éŸ³ä¹ä¿¡æ¯æ›´æ–°ä»»åŠ¡ã€‚å¸Œæœ›æœ¬æ–‡èƒ½å¸®åŠ©è¯»è€…æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—æŠ€æœ¯ã€‚</p>
<hr/>
<h3 data-id="heading-21">å»¶ä¼¸é˜…è¯»</h3>
<ul>
<li>å»ºè®®ç»“åˆå®é™…é¡¹ç›®è¿›è¡Œç»ƒä¹ </li>
<li>æ·±å…¥é˜…è¯»ç›¸å…³æŠ€æœ¯æ–‡æ¡£</li>
<li>å…³æ³¨æŠ€æœ¯ç¤¾åŒºçš„æœ€æ–°åŠ¨æ€</li>
</ul>
<blockquote>
<p>æœ¬æ–‡ç»è¿‡ç²¾å¿ƒç¼–å†™å’Œä¼˜åŒ–ï¼Œå¦‚æœ‰ä¸å‡†ç¡®ä¹‹å¤„ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºæŒ‡å‡ºã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python å†…ç½®å‡½æ•°---getattr()çš„ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7576271552704626714</link>    <guid>https://juejin.cn/post/7576271552704626714</guid>    <pubDate>2025-11-25T06:51:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576271552704626714" data-draft-id="7576307259385479195" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Python å†…ç½®å‡½æ•°---getattr()çš„ä½¿ç”¨"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T06:51:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å³°ä¸­æœ‰å¤šäº‘"/> <meta itemprop="url" content="https://juejin.cn/user/1913602002914967"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Python å†…ç½®å‡½æ•°---getattr()çš„ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1913602002914967/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å³°ä¸­æœ‰å¤šäº‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:51:19.000Z" title="Tue Nov 25 2025 06:51:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="vs2015">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1e1e1e;color:#dcdcdc}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-name,.hljs-symbol{color:#569cd6}.hljs-link{text-decoration:underline}.hljs-built_in,.hljs-type{color:#4ec9b0}.hljs-class,.hljs-number{color:#b8d7a3}.hljs-meta-string,.hljs-string{color:#d69d85}.hljs-regexp,.hljs-template-tag{color:#9a5334}.hljs-formula,.hljs-function,.hljs-params,.hljs-subst,.hljs-title{color:#dcdcdc}.hljs-comment,.hljs-quote{color:#57a64a;font-style:italic}.hljs-doctag{color:#608b4e}.hljs-meta,.hljs-meta-keyword,.hljs-tag{color:#9b9b9b}.hljs-template-variable,.hljs-variable{color:#bd63c5}.hljs-attr,.hljs-attribute,.hljs-builtin-name{color:#9cdcfe}.hljs-section{color:gold}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-bullet,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-selector-tag{color:#d7ba7d}.hljs-addition{background-color:#144212}.hljs-addition,.hljs-deletion{display:inline-block;width:100%}.hljs-deletion{background-color:#600}</style><p><strong><code>getattr()</code></strong> æ˜¯ Python çš„å†…ç½®å‡½æ•°ï¼Œç”¨äº<strong>åŠ¨æ€è·å–å¯¹è±¡çš„å±æ€§å€¼</strong>ã€‚<br/>
<strong>åŸºæœ¬è¯­æ³•</strong>ï¼š <strong>|<code>getattr(object, name[, default])</code>|</strong> Â <br/>
å‚æ•°ä»‹ç»ï¼š</p>
<ul>
<li><code>object</code>ï¼šè¦è·å–å±æ€§çš„å¯¹è±¡</li>
<li><code>name</code>ï¼šå±æ€§åï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li><code>default</code>ï¼šå¯é€‰ï¼Œå¦‚æœå±æ€§ä¸å­˜åœ¨æ—¶è¿”å›çš„é»˜è®¤å€¼</li>
</ul>
<h3 data-id="heading-0">1. åŸºæœ¬ç”¨æ³•</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>): 
    self.name = <span class="hljs-string">"å¼ ä¸‰"</span> 
    self.age = <span class="hljs-number">25</span>
person = Person()

<span class="hljs-comment"># ç­‰ä»·äº person.name </span>
name = <span class="hljs-built_in">getattr</span>(person, <span class="hljs-string">"name"</span>) 
<span class="hljs-built_in">print</span>(name) <span class="hljs-comment"># è¾“å‡ºï¼šå¼ ä¸‰</span>

<span class="hljs-comment"># ç­‰ä»·äº person.age </span>
age = <span class="hljs-built_in">getattr</span>(person, <span class="hljs-string">"age"</span>) 
<span class="hljs-built_in">print</span>(age) <span class="hljs-comment"># è¾“å‡ºï¼š25</span>
</code></pre>
<h3 data-id="heading-1">ä½¿ç”¨é»˜è®¤å€¼ï¼ˆå±æ€§ä¸å­˜åœ¨æ—¶ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># å±æ€§å­˜åœ¨æ—¶ </span>
email = <span class="hljs-built_in">getattr</span>(person, <span class="hljs-string">"email"</span>, <span class="hljs-string">"æœªè®¾ç½®é‚®ç®±"</span>) 
<span class="hljs-built_in">print</span>(email) <span class="hljs-comment"># è¾“å‡ºï¼šæœªè®¾ç½®é‚®ç®±ï¼ˆå› ä¸ºpersonæ²¡æœ‰emailå±æ€§ï¼‰ </span>
<span class="hljs-comment"># ç­‰ä»·äºï¼š </span>
<span class="hljs-keyword">if</span> <span class="hljs-built_in">hasattr</span>(person, <span class="hljs-string">"email"</span>): 
    email = person.email 
<span class="hljs-keyword">else</span>: 
    email = <span class="hljs-string">"æœªè®¾ç½®é‚®ç®±"</span>
</code></pre>
<h3 data-id="heading-2">3. åŠ¨æ€å±æ€§åï¼ˆæœ€å¸¸ç”¨çš„åœºæ™¯ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Config</span>: 
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>): 
        self.host = <span class="hljs-string">"localhost"</span> 
        self.port = <span class="hljs-number">8080</span> 
config = Config() 
attributes = [<span class="hljs-string">"host"</span>, <span class="hljs-string">"port"</span>, <span class="hljs-string">"timeout"</span>] 
<span class="hljs-keyword">for</span> attr <span class="hljs-keyword">in</span> attributes: 
    value = <span class="hljs-built_in">getattr</span>(config, attr, <span class="hljs-string">"æœªé…ç½®"</span>) 
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"<span class="hljs-subst">{attr}</span>: <span class="hljs-subst">{value}</span>"</span>) 
    
<span class="hljs-comment"># è¾“å‡ºï¼š </span>
<span class="hljs-comment"># host: localhost </span>
<span class="hljs-comment"># port: 8080 </span>
<span class="hljs-comment"># timeout: æœªé…ç½®</span>
</code></pre>
<h3 data-id="heading-3">4. è·å–æ–¹æ³•ï¼ˆå‡½æ•°å±æ€§ï¼‰</h3>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span>: 
<span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">self, a, b</span>): 
    <span class="hljs-keyword">return</span> a + b 
    
calc = Calculator() 
<span class="hljs-comment"># è·å–æ–¹æ³•å¯¹è±¡ </span>
add_method = <span class="hljs-built_in">getattr</span>(calc, <span class="hljs-string">"add"</span>) 
result = add_method(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) 
<span class="hljs-built_in">print</span>(result) <span class="hljs-comment"># è¾“å‡ºï¼š8</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åŸºäº NodeJs çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ä¸å®¹å™¨ä¼˜é›…åœæœº]]></title>    <link>https://juejin.cn/post/7575735719076331526</link>    <guid>https://juejin.cn/post/7575735719076331526</guid>    <pubDate>2025-11-24T02:56:52.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575735719076331526" data-draft-id="7575644469711683603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åŸºäº NodeJs çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ä¸å®¹å™¨ä¼˜é›…åœæœº"/> <meta itemprop="keywords" content="åç«¯,Node.js,JavaScript"/> <meta itemprop="datePublished" content="2025-11-24T02:56:52.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="WindRunnerMax"/> <meta itemprop="url" content="https://juejin.cn/user/1829999989247214"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åŸºäº NodeJs çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ä¸å®¹å™¨ä¼˜é›…åœæœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1829999989247214/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    WindRunnerMax
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T02:56:52.000Z" title="Mon Nov 24 2025 02:56:52 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å½“åœ¨åç«¯æ‰§è¡Œå¤æ‚çš„ä»»åŠ¡æ—¶ï¼Œé€šå¸¸ä¸èƒ½å¤Ÿåœ¨çŸ­æ—¶é—´å†…å³æ—¶å“åº”ï¼Œä¾‹å¦‚æ–‡æ¡£å¯¼å…¥ã€å¯¼å‡ºä»»åŠ¡ç­‰ã€‚å†åŠ ä¸Šå½“å‰çš„<code>LLMs</code>å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°æ–‡æ¡£çš„å†™ä½œã€è´¨æ£€ã€ç¿»è¯‘ç­‰å¤æ‚ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡é€šå¸¸éƒ½æ¯”è¾ƒè€—æ—¶ï¼Œè¿™æ ·å°±éœ€è¦ä»»åŠ¡é˜Ÿåˆ—æ¥ç®¡ç†è¿™äº›å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºå’Œèµ„æºåˆ†é…ï¼Œè€Œä¼˜é›…åœæœºåˆ™ç”¨ä»¥ä¿è¯ä»»åŠ¡çš„å®Œæ•´å¤„ç†ã€‚</p>
<details>
<summary><strong>AI Infra ç³»åˆ—ç›¸å…³æ–‡ç« </strong></summary>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay%2Fblob%2Fmaster%2FBrowser%2F%25E5%259F%25BA%25E4%25BA%258Efetch%25E7%259A%2584SSE%25E6%2596%25B9%25E6%25A1%2588.md" target="_blank" title="https://github.com/WindRunnerMax/EveryDay/blob/master/Browser/%E5%9F%BA%E4%BA%8Efetch%E7%9A%84SSE%E6%96%B9%E6%A1%88.md" ref="nofollow noopener noreferrer">åŸºäº fetch çš„ SSE æ–¹æ¡ˆ</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay%2Fblob%2Fmaster%2FPlugin%2F%25E5%259F%25BA%25E4%25BA%258E%25E5%2590%2591%25E9%2587%258F%25E6%25A3%2580%25E7%25B4%25A2%25E5%25AE%259E%25E7%258E%25B0%25E5%259F%25BA%25E7%25A1%2580RAG%25E6%259C%258D%25E5%258A%25A1.md" target="_blank" title="https://github.com/WindRunnerMax/EveryDay/blob/master/Plugin/%E5%9F%BA%E4%BA%8E%E5%90%91%E9%87%8F%E6%A3%80%E7%B4%A2%E5%AE%9E%E7%8E%B0%E5%9F%BA%E7%A1%80RAG%E6%9C%8D%E5%8A%A1.md" ref="nofollow noopener noreferrer">åŸºäºå‘é‡æ£€ç´¢å®ç°åŸºç¡€ RAG æœåŠ¡</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay%2Fblob%2Fmaster%2FPlugin%2F%25E6%25B5%2581%25E5%25BC%258FMarkdown%25E5%25A2%259E%25E9%2587%258F%25E5%25AF%258C%25E6%2596%2587%25E6%259C%25AC%25E8%25A7%25A3%25E6%259E%2590%25E7%25AE%2597%25E6%25B3%2595.md" target="_blank" title="https://github.com/WindRunnerMax/EveryDay/blob/master/Plugin/%E6%B5%81%E5%BC%8FMarkdown%E5%A2%9E%E9%87%8F%E5%AF%8C%E6%96%87%E6%9C%AC%E8%A7%A3%E6%9E%90%E7%AE%97%E6%B3%95.md" ref="nofollow noopener noreferrer">æµå¼ Markdown å¢é‡å¯Œæ–‡æœ¬è§£æç®—æ³•</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay%2Fblob%2Fmaster%2FPlugin%2F%25E4%25BB%25BF%25E7%2585%25A7%25E8%25B1%2586%25E5%258C%2585%25E5%25AE%259E%25E7%258E%25B0Prompt%25E5%258F%2598%25E9%2587%258F%25E6%25A8%25A1%25E6%259D%25BF%25E8%25BE%2593%25E5%2585%25A5%25E6%25A1%2586.md" target="_blank" title="https://github.com/WindRunnerMax/EveryDay/blob/master/Plugin/%E4%BB%BF%E7%85%A7%E8%B1%86%E5%8C%85%E5%AE%9E%E7%8E%B0Prompt%E5%8F%98%E9%87%8F%E6%A8%A1%E6%9D%BF%E8%BE%93%E5%85%A5%E6%A1%86.md" ref="nofollow noopener noreferrer">ä»¿ç…§è±†åŒ…å®ç° Prompt å˜é‡æ¨¡æ¿è¾“å…¥æ¡†</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay%2Fblob%2Fmaster%2FPlugin%2F%25E5%259F%25BA%25E4%25BA%258ENodeJs%25E5%25AE%259E%25E7%258E%25B0%25E4%25BB%25BB%25E5%258A%25A1%25E9%2598%259F%25E5%2588%2597%25E4%25B8%258E%25E4%25BC%2598%25E9%259B%2585%25E5%2581%259C%25E6%259C%25BA.md" target="_blank" title="https://github.com/WindRunnerMax/EveryDay/blob/master/Plugin/%E5%9F%BA%E4%BA%8ENodeJs%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E9%98%9F%E5%88%97%E4%B8%8E%E4%BC%98%E9%9B%85%E5%81%9C%E6%9C%BA.md" ref="nofollow noopener noreferrer">åŸºäº NodeJs çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ä¸å®¹å™¨ä¼˜é›…åœæœº</a></li>
</ul>
</details>
<h2 data-id="heading-0">æ¦‚è¿°</h2>
<p>ä»»åŠ¡é˜Ÿåˆ—ç”¨äºç®¡ç†å’Œè°ƒåº¦å¼‚æ­¥ä»»åŠ¡ï¼Œåœ¨å®ç°æ—¶æˆ‘ä»¬å¯èƒ½ä¼šä½¿ç”¨ä¸€äº›ç°æˆçš„åº“ï¼Œä¾‹å¦‚<code>Bull/BullMQ</code>ã€<code>Agenda</code>ç­‰ã€‚è€Œå¦‚æœéœ€è¦å®ç°æ›´å¤æ‚çš„ä»»åŠ¡/æ¶ˆæ¯è°ƒåº¦ï¼Œä¾‹å¦‚ä¸åŒç³»ç»Ÿã€åº”ç”¨ä¹‹é—´çš„å¯é æ¶ˆæ¯ä¼ é€’ç­‰æœåŠ¡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä½¿ç”¨<code>Kafka</code>ã€<code>RabbitMQ</code>ç­‰æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿã€‚æ•´ä½“æ¥è¯´ï¼Œå¼‚æ­¥ä»»åŠ¡å¯ä»¥å®ç°å¦‚ä¸‹åŠŸèƒ½:</p>
<ul>
<li>å¼‚æ­¥ä»»åŠ¡ï¼Œå°†è€—æ—¶çš„æ“ä½œæ”¾åˆ°åå°å»å¤„ç†ï¼Œè®©ä¸»ç¨‹åºèƒ½å¤Ÿå¿«é€Ÿè¿”å›å“åº”ã€‚</li>
<li>æµé‡å‰Šå³°ï¼Œå°†å¤§é‡è¯·æ±‚è½¬åŒ–ä¸ºä»»åŠ¡ï¼Œå¹³ç¨³åœ°å­˜å…¥é˜Ÿåˆ—ï¼Œç„¶åç³»ç»ŸæŒ‰ç…§èƒ½æ‰¿å—çš„å¤„ç†èƒ½åŠ›ï¼Œä»é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ¶ˆè´¹ã€‚</li>
<li>é”™è¯¯é‡è¯•ï¼Œå½“ä»»åŠ¡æ‰§è¡Œå¤±è´¥æ—¶ï¼Œé˜Ÿåˆ—å¯ä»¥å°è¯•è¿›è¡Œé‡è¯•ï¼Œå¦‚æœé‡è¯•å¤šæ¬¡åä»ç„¶å¤±è´¥ï¼Œåˆ™å¯ä»¥å°†ä»»åŠ¡æ ‡è®°ä¸ºå¤±è´¥ã€‚</li>
</ul>
<p>ä¼˜é›…åœæœºåˆ™æ˜¯æŒ‡åœ¨åº”ç”¨ç¨‹åºå…³é—­æ—¶ï¼Œèƒ½å¤Ÿæ­£ç¡®åœ°å¤„ç†æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚åœ¨è¿™é‡Œçš„ä¼˜é›…åœæœºä¸»è¦åˆ†ä¸ºé’ˆå¯¹è¯·æ±‚çš„å¤„ç†å’Œé’ˆå¯¹ä»»åŠ¡é˜Ÿåˆ—çš„å¤„ç†ï¼Œè¯·æ±‚çš„éƒ¨åˆ†é€šå¸¸ä¼šç”±ç½‘å…³åŠ ä¸Šæ¡†æ¶æœ¬èº«å¤„ç†ï¼Œè€Œä»»åŠ¡é˜Ÿåˆ—çš„é‡ç½®æˆ–è€…ç»“æŸï¼Œåˆ™éœ€è¦é æˆ‘ä»¬ä¸»åŠ¨å¤„ç†ã€‚æ•´ä½“æ¥è¯´ï¼Œä¼˜é›…åœæœºé€šå¸¸éœ€è¦åšå¦‚ä¸‹å¤„ç†:</p>
<ul>
<li>åœæ­¢æ¥æ”¶æ–°çš„è¯·æ±‚ï¼ŒæœåŠ¡éœ€è¦é¿å…æ–°çš„è¯·æ±‚è¿›å…¥ï¼Œè¿™éƒ¨åˆ†é€šå¸¸éœ€è¦ç½‘å…³ç­‰å‰ç½®èŠ‚ç‚¹æ¥å¤„ç†ã€‚</li>
<li>å¤„ç†å½“å‰è¯·æ±‚ï¼ŒæœåŠ¡éœ€è¦ç»§ç»­å¤„ç†å½“å‰å·²ç»åœ¨å¤„ç†ä¸­çš„è¯·æ±‚ï¼Œç¡®ä¿è¿™äº›è¯·æ±‚èƒ½å¤Ÿæ­£å¸¸å®Œæˆã€‚</li>
<li>é‡Šæ”¾å·²åˆ†é…èµ„æºï¼Œåœ¨è¯·æ±‚å¤„ç†å®Œæˆåï¼Œéœ€è¦é‡Šæ”¾æ‰€æœ‰ç”³è¯·çš„èµ„æºï¼Œä¾‹å¦‚å…³é—­æ•°æ®åº“è¿æ¥ç­‰ã€‚</li>
<li>å…³é—­æœåŠ¡ï¼Œå½“æ‰€æœ‰è¯·æ±‚éƒ½å¤„ç†å®Œæ¯•ä¸”èµ„æºéƒ½å·²é‡Šæ”¾åï¼Œéœ€è¦æ­£å¸¸å…³é—­æœåŠ¡ï¼Œæˆ–è€…å¼ºåˆ¶åœæœºã€‚</li>
</ul>
<p>åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬åœ¨<code>Nest</code>æ¡†æ¶çš„åŸºç¡€ä¸Šï¼Œå®ç°ç®€åŒ–ç‰ˆçš„åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦é˜Ÿåˆ—ã€‚å¹¶ä¸”åŸºäº<code>pm2</code>ç®¡ç†<code>NodeJs</code>è¿›ç¨‹ï¼Œå®ç°äº†ä¼˜é›…åœæœºçš„èƒ½åŠ›ï¼Œè€Œä¸”æ¢è®¨äº†<code>Linux</code>ç³»ç»Ÿä¸‹è¿›ç¨‹ä¸ä¿¡å·çš„ä¼ é€’è¡¨ç°ã€‚æ–‡ä¸­æ¶‰åŠçš„å®ç°éƒ½åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2Fwebpack-simple-environment" target="_blank" title="https://github.com/WindRunnerMax/webpack-simple-environment" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a> ä¸­ã€‚</p>
<h2 data-id="heading-1">ä»»åŠ¡é˜Ÿåˆ—</h2>
<p>ä»»åŠ¡é˜Ÿåˆ—çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ä¸»è¦ç›®æ ‡å°±æ˜¯æµé‡å‰Šå³°ï¼Œç‰¹åˆ«æ˜¯åœ¨è°ƒåº¦<code>LLMs</code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†è¯·æ±‚æ’é˜Ÿå¤„ç†ï¼Œå½“å‰çš„äº‘æœåŠ¡å•†éƒ½ä¼šæœ‰å¹¶å‘è¯·æ±‚çš„é™åˆ¶ã€‚å½“å‰äº‘æœåŠ¡å•†ä¸»è¦æ˜¯ä¼šé™åˆ¶<code>RPM</code>å’Œ<code>TPM</code>ï¼Œå³æ¯åˆ†é’Ÿè¯·æ±‚æ•°å’Œæ¯åˆ†é’Ÿ<code>Token</code>æ•°é‡ï¼Œè¿™æ ·å°±éœ€è¦æˆ‘ä»¬åœ¨åº”ç”¨å±‚è¿›è¡Œè¯·æ±‚çš„æ’é˜Ÿå¤„ç†ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬å°±ä¸å€ŸåŠ©å·²æœ‰çš„æ¡†æ¶ï¼Œè€Œæ˜¯ç›´æ¥å®ç°ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸»è¦ç›®æ ‡æ˜¯èƒ½å¤Ÿæ§åˆ¶å¹¶å‘ä»»åŠ¡ï¼Œå¹¶ä¸”å™è¿°å•è¿›ç¨‹ä»¥åŠå•æœºé›†ç¾¤æ¨¡å¼ã€åˆ†å¸ƒå¼ä»»åŠ¡çš„é”æ§åˆ¶æ–¹æ¡ˆã€‚è€Œé™¤äº†ä»»åŠ¡é˜Ÿåˆ—ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚éœ€è¦å¤„ç†ï¼Œä¾‹å¦‚ä»æ•°æ®åº“è¯»å–çš„æ§åˆ¶å¹¶å‘ã€ä»»åŠ¡è¶…æ—¶æ§åˆ¶ç­‰ï¼Œè¿™äº›éƒ½å¯ä»¥åœ¨å®é™…åº”ç”¨ä¸­è¿›è¡Œæ‰©å±•ã€‚</p>
<p>æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿé€šå¸¸ä¼šæœ‰æ¨é€æ¨¡å¼ä»¥åŠæ‹‰å–æ¨¡å¼ä¸¤ç§æ¶ˆæ¯æ¶ˆè´¹çš„æ–¹å¼ï¼Œè€Œå®é™…ä¸Šåœ¨æ‹‰å–æ¨¡å¼ä¸‹ï¼Œæ¶ˆè´¹è€…ä¹Ÿéœ€è¦å®ç°ç±»ä¼¼çš„ä»»åŠ¡é˜Ÿåˆ—æ¥æ§åˆ¶å¹¶å‘è¯·æ±‚ï¼Œä¾‹å¦‚<code>Kafka</code>ç³»ç»Ÿã€‚å½“ç„¶å¦‚æœæ˜¯æ¨é€æ¨¡å¼ï¼Œå°±å¯ä»¥ç›´æ¥åœ¨æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿›è¡Œå¹¶å‘æ§åˆ¶ï¼Œä¾‹å¦‚<code>RabbitMQ</code>ç³»ç»Ÿã€‚</p>
<h3 data-id="heading-2">å•å®ä¾‹ä»»åŠ¡</h3>
<p>æˆ‘ä»¬å…ˆæ¥å®ç°å•å®ä¾‹å•è¿›ç¨‹çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œé¦–å…ˆéœ€è¦å®ç°ä¸€ä¸ªä»»åŠ¡é˜Ÿåˆ—ç±»ï¼Œé€šè¿‡å®ä¾‹åŒ–è¿™ä¸ªç±»æˆ‘ä»¬å¯ä»¥åœ¨å¤šä¸ªæœåŠ¡<code>Service</code>åˆ†åˆ«è°ƒåº¦é˜Ÿåˆ—å®ä¾‹ã€‚åœ¨è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚è‹¥ä¸æƒ³åœ¨å…¨å±€åˆ†åˆ«åˆ›å»ºå®ä¾‹ï¼Œåœ¨<code>Next</code>ä¸­å°±åœ¨<code>Provider</code>çš„ç±»ä¸­ç‹¬ç«‹ç»´æŠ¤å®ä¾‹ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„å…¶<code>Scope</code>å¿…é¡»ä¸ºå…¨å±€å•ä¾‹è€Œéè¯·æ±‚çº§å®ä¾‹ã€‚</p>
<pre><code class="hljs language-js" lang="js">@<span class="hljs-title class_">Injectable</span>({ <span class="hljs-attr">scope</span>: <span class="hljs-title class_">Scope</span>.<span class="hljs-property">DEFAULT</span> })
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TasksService</span> {}
</code></pre>
<p>æ¥ä¸‹æ¥å‡è®¾å®é™…ä»»åŠ¡æ˜¯åœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„ï¼Œæ¯•ç«Ÿä»»åŠ¡éœ€è¦æŒä¹…åŒ–å­˜å‚¨ä»¥é˜²æ­¢æ•°æ®ä¸¢å¤±ã€‚ç„¶åéœ€è¦å®ç°<code>TaskQueue</code>ç±»ä»¥æ§åˆ¶å¹¶å‘ä»»åŠ¡ï¼Œç”±äºæˆ‘ä»¬ç°åœ¨æ˜¯å•å®ä¾‹å•è¿›ç¨‹çš„æ¨¡å¼ï¼Œå°±ä¸éœ€è¦åˆ†å¸ƒå¼é”çš„è¦æ±‚ï¼Œå› æ­¤å¯ä»¥ç›´æ¥ä½¿ç”¨å†…å­˜ä¸­çš„å˜é‡æ¥æ§åˆ¶å¹¶å‘ä»»åŠ¡ï¼Œè¿™é‡Œå…ˆå®šä¹‰ç±»åŸºæœ¬çš„ç»“æ„:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> declare <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskQueue</span> {
  <span class="hljs-comment">/** å®ä¾‹/é”æ ‡è¯† */</span>
  private readonly key;
  <span class="hljs-comment">/** å¹¶å‘è¿è¡Œæ•° */</span>
  private readonly maxTasks;
  <span class="hljs-comment">/** æœ¬æœºæ­£åœ¨è¿è¡Œä»»åŠ¡æ•°é‡ */</span>
  private runningTasks;
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-comment">/** å”¯ä¸€æ ‡è¯† */</span> key: string, <span class="hljs-comment">/** æœ€å¤§å¹¶è¡Œä»»åŠ¡æ•° */</span> maxTasks: number</span>);
  <span class="hljs-comment">/** å°è¯•æ‰¹é‡è°ƒåº¦ä»»åŠ¡ */</span>
  <span class="hljs-title function_">tryRun</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;;
  <span class="hljs-comment">/**  æ­£å¼è°ƒåº¦ä»»åŠ¡ */</span>
  <span class="hljs-title function_">run</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt;;
  <span class="hljs-comment">/** è°ƒåº¦è¿è¡Œä»»åŠ¡ - éœ€è¦å®ä¾‹åŒ–åé‡å†™è¯¥æ–¹æ³• <span class="hljs-doctag">@returns</span> è¿”å›ä»»åŠ¡æ ‡è¯† id */</span>
  <span class="hljs-title function_">onRunning</span>(): <span class="hljs-title class_">Promise</span>&lt;string | <span class="hljs-literal">undefined</span>&gt;;
  <span class="hljs-comment">/** åˆ†é… Quota */</span>
  <span class="hljs-title function_">assign</span>(): <span class="hljs-title class_">Promise</span>&lt;boolean&gt;;
  <span class="hljs-comment">/** é‡Šæ”¾ Quota */</span>
  <span class="hljs-title function_">release</span>(): <span class="hljs-title class_">Promise</span>&lt;boolean&gt;;
}
</code></pre>
<p>æ¥ä¸‹æ¥å…³æ³¨äº<code>assign</code>å’Œ<code>release</code>åˆ†é…å’Œé‡Šæ”¾<code>Quota</code>æ–¹æ³•ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥åœ¨å†…å­˜æ”¾ç½®<code>Record&lt;string, number&gt;</code>å¯¹è±¡æ¥ç®¡ç†å¹¶å‘ä»»åŠ¡çš„èµ„æºæ•°é‡ã€‚ç”±äºæœ€åéœ€è¦å®ç°åˆ†å¸ƒå¼é”ï¼Œå› æ­¤è¿™é‡Œçš„é€»è¾‘å®é™…ä¸Šæ˜¯ä¸<code>Redis</code>é”çš„<code>LUA</code>è„šæœ¬é€»è¾‘ç±»ä¼¼ã€‚</p>
<p>åˆ†é…<code>Quota</code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥å½“å‰è¿è¡Œçš„ä»»åŠ¡æ•°é‡æ˜¯å¦å°äºæœ€å¤§å¹¶å‘æ•°ï¼Œå¦‚æœå°äºåˆ™åˆ†é…æˆåŠŸå¹¶å¢åŠ è¿è¡Œä»»åŠ¡æ•°é‡ï¼Œå¦åˆ™åˆ†é…å¤±è´¥ã€‚é‡Šæ”¾<code>Quota</code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å‡å°‘è¿è¡Œä»»åŠ¡æ•°é‡ï¼Œç¡®ä¿ä¸ä¼šå°äºé›¶ï¼Œè¿™é‡Œä¸»è¦æ˜¯é¿å…åˆ‡æ¢<code>key</code>æ—¶é‡Šæ”¾çš„<code>Quota</code>å°†å€¼å†™ä¸ºè´Ÿæ•°ï¼Œè¿™æ ·ä¼šå¯¼è‡´å¹¶å‘é‡å˜é«˜ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">assign</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; {
  <span class="hljs-keyword">const</span> lockKey = <span class="hljs-string">"_lock_"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>;
  <span class="hljs-keyword">let</span> current = <span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey];
  <span class="hljs-keyword">if</span> (current === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>)  current = <span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey] = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">if</span> (current &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTasks</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  <span class="hljs-keyword">const</span> serial = ++<span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey];
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">release</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;boolean&gt; {
  <span class="hljs-keyword">const</span> lockKey = <span class="hljs-string">"_lock_"</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">key</span>;
  <span class="hljs-keyword">const</span> current = <span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey];
  <span class="hljs-keyword">if</span> (current === <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> || current &lt;= <span class="hljs-number">0</span>) {
    <span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey] = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  --<span class="hljs-variable constant_">MEMORY_MAP</span>[lockKey];
  <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>ç”±äºä»»åŠ¡æœ¬èº«å·²ç»ç”±é”æ§åˆ¶äº†å¹¶å‘æ‰§è¡Œï¼Œå› æ­¤æ¥ä¸‹æ¥åªéœ€è¦æ§åˆ¶å¥½ä»»åŠ¡çš„æ‰§è¡Œæµç¨‹å³å¯ï¼Œè€Œæ§åˆ¶å¼‚æ­¥ä»»åŠ¡çš„æ–¹æ³•é€šå¸¸æœ‰ä¸¤ç§æ–¹å¼ï¼Œç±»ä¼¼äº<code>webpack</code>çš„æ’ä»¶å®ç°ï¼Œä¸€ç§æ–¹å¼æ˜¯ç±»ä¼¼äºæ§åˆ¶åè½¬çš„æ–¹å¼å°†<code>done</code>å‡½æ•°ä¼ é€’åˆ°ä»»åŠ¡ä¸­ï¼Œå¦ä¸€ç§æ–¹å¼åˆ™æ˜¯ç›´æ¥åœ¨ä»»åŠ¡ä¸­è¿”å›<code>Promise</code>å¯¹è±¡ï¼Œè¿™é‡Œæˆ‘ä»¬å°±ç›´æ¥é‡‡ç”¨å¼‚æ­¥æ¨¡å¼ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">run</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
  <span class="hljs-keyword">const</span> assigned = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">assign</span>();
  <span class="hljs-keyword">if</span> (!assigned) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">let</span> <span class="hljs-attr">id</span>: string | <span class="hljs-literal">undefined</span> = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">runningTasks</span>++;
  <span class="hljs-keyword">try</span> {
    id = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">onRunning</span>();
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Task Queue Running Error:"</span>, error);
  }
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">runningTasks</span>--;
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">release</span>();
  id &amp;&amp; process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">tryRun</span>);
}
</code></pre>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å°†<code>onRunning</code>æ–¹æ³•é‡å†™ï¼Œä¹Ÿå°±æ˜¯åœ¨æœåŠ¡ä¸­å°†å†…ç½®æ–¹æ³•èµ‹å€¼åˆ°ç±»ä¸Šï¼Œé€šå¸¸è¿™ä¸ªæ–¹æ³•ä¸»è¦æ˜¯ä»æ•°æ®åº“ä¸­å–å‡ºä»»åŠ¡å¹¶æ‰§è¡Œï¼Œæ‰§è¡Œå®Œæˆåè¿”å›ä»»åŠ¡çš„<code>id</code>ï¼Œå¦‚æœæ²¡æœ‰ä»»åŠ¡åˆ™è¿”å›<code>undefined</code>ã€‚è€Œè¿™ä¸ª<code>id</code>åˆ™ä¼šæ ‡è¯†åç»­çš„ä»»åŠ¡æ˜¯å¦ä¼šç»§ç»­æ‰§è¡Œï¼Œè¿™é‡Œçš„<code>nextTick</code>ä¸»è¦æ˜¯ä¸ºäº†é¿å…æ ˆæº¢å‡ºçš„é—®é¢˜ã€‚</p>
<p>å¦‚æœåœ¨ä»»åŠ¡è°ƒåº¦ä¸­ç›´æ¥é€’å½’åœ°æ‰§è¡Œï¼Œåˆ™ä¼šå­˜åœ¨å †æ ˆæº¢å‡ºçš„å¯èƒ½ã€‚åœ¨ä¸‹é¢<code>recursion</code>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæ˜¯åŒæ­¥çš„çš„å‡½æ•°æ‰§è¡Œï¼Œåˆ™ä¼šæŠ›å‡º<code>Maximum call stack size exceeded</code>çš„å¼‚å¸¸ã€‚è€Œå¦‚æœæ˜¯å¼‚æ­¥é€’å½’å‡½æ•°<code>asyncRecursion</code>ï¼Œæ¯æ¬¡é€’å½’è°ƒç”¨éƒ½æ˜¯åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªç¯ä¸­æ‰§è¡Œçš„ï¼Œé¿å…äº†æº¢å‡ºé—®é¢˜ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">recursion</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
  n % <span class="hljs-number">100</span> === <span class="hljs-number">0</span>  &amp;&amp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Depth: <span class="hljs-subst">${n}</span>`</span>); <span class="hljs-comment">// $</span>
  <span class="hljs-title function_">recursion</span>(n - <span class="hljs-number">1</span>)
}
<span class="hljs-title function_">recursion</span>(<span class="hljs-number">100000</span>);

<span class="hljs-keyword">function</span> <span class="hljs-title function_">asyncRecursion</span>(<span class="hljs-params">n</span>) {
  <span class="hljs-keyword">if</span> (n &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;
  n % <span class="hljs-number">100</span> === <span class="hljs-number">0</span>  &amp;&amp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Depth: <span class="hljs-subst">${n}</span>`</span>); <span class="hljs-comment">// $</span>
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">asyncRecursion</span>(n - <span class="hljs-number">1</span>));
}
<span class="hljs-title function_">asyncRecursion</span>(<span class="hljs-number">100000</span>);
</code></pre>
<p>å¹¶å‘æ‰§è¡Œä»»åŠ¡æ‰§è¡Œå°±éœ€è¦å®é™…å¯åŠ¨è¿™ä¸ª<code>run</code>å‡½æ•°ï¼Œä¸æ–­å°è¯•è°ƒåº¦ä»»åŠ¡å¹¶ä¸”æ‰§è¡Œï¼Œè€Œè°ƒåº¦ä»»åŠ¡çš„æ–¹å¼è‡ªç„¶å°±æ˜¯é€šè¿‡å¾ªç¯æ¥å®ç°æ‰¹é‡è°ƒåº¦ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰§è¡Œ<code>run</code>å‡½æ•°çš„æ—¶å€™ä¸èƒ½<code>await</code>ï¼Œå¦åˆ™å°±ä¼šé˜»å¡å½“å‰çš„äº‹ä»¶å¾ªç¯ï¼Œä»è€Œæ— æ³•å®ç°å¹¶å‘æ‰§è¡Œä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">tryRun</span>(<span class="hljs-params"/>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-keyword">void</span>&gt; {
  <span class="hljs-keyword">const</span> batch = <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxTasks</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">runningTasks</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; batch; i++) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">run</span>();
  }
}
</code></pre>
<p>ä¸è¿‡è¿™é‡Œå…¶å®æœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰ä»»åŠ¡å¯ä»¥è°ƒåº¦ï¼Œè¿˜æ˜¯ä¼šå°è¯•<code>maxTasks</code>æ¬¡ä»»åŠ¡æ‰§è¡Œï¼Œè¿™å…¶å®æ˜¯ä¼šå­˜åœ¨æ•°æ®åº“æ— æ•ˆè¯»çš„é—®é¢˜ã€‚ä¸è¿‡å¯¹äºæ•°æ®åº“æ¥è¯´è¿™é‡Œçš„è¯»æ“ä½œé€šå¸¸æ˜¯å¯ä»¥æ¥å—çš„ï¼Œæ•°æ®åº“é‡ŒçŠ¶æ€å€¼æ˜¯è¦åŠ ç´¢å¼•çš„ï¼Œå¦‚æœå®åœ¨ä¸å¯æ¥å—å°±éœ€è¦æ’é˜Ÿå»¶è¿Ÿ<code>run</code>çš„æ‰§è¡Œï¼Œä¾‹å¦‚å‰ä¸ªä»»åŠ¡<code>10s</code>å†…è¿”å›ç©ºå°±ä¸æ‰§è¡Œã€‚</p>
<h3 data-id="heading-3">åŸå­è¯»å†™</h3>
<p>é‚£ä¹ˆé‡å†™<code>onRunning</code>æ–¹æ³•çš„å®ç°ï¼Œä¸»è¦æ˜¯ä»æ•°æ®åº“ä¸­è¯»å–ä»»åŠ¡å¹¶æ‰§è¡Œã€‚å‡è®¾æˆ‘ä»¬æŸ¥æ‰¾æ•°æ®æ˜¯ä½¿ç”¨<code>find</code>è¯­å¥ï¼Œå†™æ•°æ®æ˜¯ä½¿ç”¨<code>update</code>è¯­å¥ï¼Œé‚£ä¹ˆå‡è®¾æ­¤æ—¶çš„çŠ¶æ€å­—æ®µä¸º<code>status</code>ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å¦‚ä¸‹çš„çŠ¶æ€ï¼Œ<code>pending</code>å¾…å¤„ç†ã€<code>running</code>å¤„ç†ä¸­ã€<code>completed</code>å®Œæˆï¼Œ<code>failed</code>å¤±è´¥ã€‚</p>
<p>é‚£ä¹ˆå‡è®¾ç°åœ¨å·²ç»æœ‰<code>id</code>ä¸º<code>1</code>å’Œ<code>2</code>çš„ä¸¤ä¸ªä»»åŠ¡å¤„äº<code>pending</code>çŠ¶æ€ï¼Œå¹¶ä¸”æˆ‘ä»¬å…è®¸æœ€å¤§çš„å¹¶å‘æ•°ä¸º<code>2</code>ã€‚æ­¤æ—¶æˆ‘ä»¬åœ¨ä¸¤ä¸ªç‹¬ç«‹çš„ä»»åŠ¡ä¸­è¿›è¡Œä»»åŠ¡è°ƒåº¦ï¼Œç¬¬ä¸€æ­¥å°±æ˜¯æŸ¥è¯¢æ•°æ®åº“ä¸­çŠ¶æ€ä¸º<code>pending</code>çš„ä»»åŠ¡ï¼Œå¹¶ä¸”å°†å…¶çŠ¶æ€æ›´æ–°ä¸º<code>running</code>ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»»åŠ¡ 1</span>
<span class="hljs-keyword">await</span> find status=<span class="hljs-string">"pending"</span>
update id=$0 status=<span class="hljs-string">"running"</span> <span class="hljs-comment">// $</span>
<span class="hljs-comment">// ä»»åŠ¡ 2</span>
<span class="hljs-keyword">await</span> find status=<span class="hljs-string">"pending"</span>
update id=$0 status=<span class="hljs-string">"running"</span> <span class="hljs-comment">// $</span>
</code></pre>
<p>çœ‹èµ·æ¥è¿™ä¸ªè°ƒåº¦å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯å®é™…ä¸Šä¼šå­˜åœ¨ç«æ€æ¡ä»¶çš„é—®é¢˜ã€‚ç”±äºä»»åŠ¡<code>1</code>å’Œä»»åŠ¡<code>2</code>åŒæ—¶æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œé‚£ä¹ˆä¸¤ä¸ªä»»åŠ¡éƒ½ä¼šæŸ¥è¯¢åˆ°<code>id=1</code>çš„ä»»åŠ¡ï¼Œç„¶åä¸¤ä¸ªä»»åŠ¡éƒ½ä¼šå°†å…¶çŠ¶æ€æ›´æ–°ä¸º<code>running</code>ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´åŒä¸€ä¸ªä»»åŠ¡è¢«å¤šä¸ªè¿›ç¨‹å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä»»åŠ¡ 1</span>
<span class="hljs-keyword">await</span> find status=<span class="hljs-string">"pending"</span> -&gt; id=<span class="hljs-number">1</span>
<span class="hljs-comment">// ä»»åŠ¡ 2</span>
<span class="hljs-keyword">await</span> find status=<span class="hljs-string">"pending"</span> -&gt; id=<span class="hljs-number">1</span>
</code></pre>
<p>ç©¶å…¶åŸå› ï¼Œæ˜¯å› ä¸ºæŸ¥è¯¢å’Œæ›´æ–°æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„æ“ä½œï¼Œå¹¶è¡Œçš„ä»»åŠ¡ä¼šåŒæ—¶è§¦å‘æŸ¥è¯¢ï¼Œè€Œæœ¬èº«å¹¶æ²¡æœ‰é”æ¥ä¿è¯æŸ¥è¯¢åˆ°çš„ä»»åŠ¡åœ¨æ›´æ–°å‰ä¸ä¼šè¢«å…¶ä»–ä»»åŠ¡ä¿®æ”¹ã€‚å› æ­¤åœ¨å¹¶è¡Œæ‰§è¡Œæ—¶ï¼Œéœ€è¦ä¿è¯è¯»å†™çŠ¶æ€çš„æ“ä½œæ˜¯åŸå­æ€§çš„ï¼Œä¹Ÿå°±æ˜¯éœ€è¦å°†æŸ¥è¯¢å’Œæ›´æ–°åˆå¹¶ä¸ºä¸€ä¸ªæ“ä½œï¼Œä¾‹å¦‚åœ¨<code>mongodb</code>ä¸­å°±å­˜åœ¨<code>findOneAndUpdate</code>æ–¹æ³•ã€‚</p>
<p>é‚£ä¹ˆåœ¨è¿™é‡Œæˆ‘ä»¬åŒæ ·æ¨¡æ‹Ÿä¸€ä¸‹æ•°æ®å¤„ç†çš„é€»è¾‘ï¼Œç”±äº<code>Service</code>ç°åœ¨æ˜¯å•ä¾‹çš„ï¼Œå› æ­¤æˆ‘ä»¬ç›´æ¥ç»´æŠ¤ä¸€ä¸ªäºŒç»´æ•°ç»„æ¥å­˜å‚¨ä»»åŠ¡ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ª<code>findAndModify</code>æ–¹æ³•æ¥æ¨¡æ‹Ÿæ•°æ®åº“çš„æŸ¥è¯¢å’Œæ›´æ–°æ“ä½œï¼Œè¿™ä¸ªæ–¹æ³•ä¼šæ ¹æ®ä¼ å…¥çš„æŸ¥è¯¢æ¡ä»¶æŸ¥æ‰¾ä»»åŠ¡ï¼Œå¹¶ä¸”å°†å…¶çŠ¶æ€æ›´æ–°ä¸ºæ–°çš„çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TasksService</span> {
  public <span class="hljs-attr">tasks</span>: { <span class="hljs-attr">id</span>: string; <span class="hljs-attr">status</span>: <span class="hljs-string">"pending"</span> | <span class="hljs-string">"running"</span> | <span class="hljs-string">"success"</span> | <span class="hljs-string">"fail"</span> }[]

  private <span class="hljs-keyword">async</span> <span class="hljs-title function_">findAndModify</span>(<span class="hljs-params">
    find: { id?: string; status?: <span class="hljs-keyword">typeof</span> TasksService.prototype.tasks[<span class="hljs-number">0</span>][<span class="hljs-string">"status"</span>] } = {},
    status: <span class="hljs-keyword">typeof</span> TasksService.prototype.tasks[<span class="hljs-number">0</span>][<span class="hljs-string">"status"</span>]
  </span>) {
    <span class="hljs-keyword">const</span> task = <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> {
      <span class="hljs-keyword">if</span> (find.<span class="hljs-property">id</span> &amp;&amp; t.<span class="hljs-property">id</span> !== find.<span class="hljs-property">id</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">if</span> (find.<span class="hljs-property">status</span> &amp;&amp; t.<span class="hljs-property">status</span> !== find.<span class="hljs-property">status</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    });
    <span class="hljs-keyword">if</span> (task) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Task <span class="hljs-subst">${task.id}</span> is <span class="hljs-subst">${task.status}</span> =&gt; <span class="hljs-subst">${status}</span>.`</span>);
      task.<span class="hljs-property">status</span> = status;
      <span class="hljs-keyword">return</span> task;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }
}
</code></pre>
<p>è€Œé‡å†™<code>running</code>æ–¹æ³•è¿è¡Œä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨è¿™ä¸ª<code>findAndModify</code>æ–¹æ³•æ¥æŸ¥è¯¢å¹¶æ›´æ–°ä»»åŠ¡çŠ¶æ€ï¼Œä»è€Œä¿è¯ä»»åŠ¡çš„åŸå­æ€§ã€‚è¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´è¶…æ—¶æ—¶é—´ä¸º<code>2s</code>ï¼Œä»»åŠ¡æœ¬èº«æ˜¯éšæœºç”Ÿæˆçš„æ‰§è¡Œæ—¶é•¿ï¼Œè¿™é‡Œçš„çŠ¶æ€è½¬ç§»åŒæ ·æ˜¯ä½¿ç”¨ä¸Šè¿°æ–¹æ³•æ¥ä¸¥æ ¼æ§åˆ¶çŠ¶æ€è½¬ç§»ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å˜é‡æ ‡è®°æ¥å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">onRunning</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> task = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findAndModify</span>({ <span class="hljs-attr">status</span>: <span class="hljs-string">"pending"</span> }, <span class="hljs-string">"running"</span>);
  <span class="hljs-keyword">if</span> (!task) <span class="hljs-keyword">return</span> <span class="hljs-keyword">void</span> <span class="hljs-number">0</span>;
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">execute</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">3000</span>));
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findAndModify</span>({ <span class="hljs-attr">id</span>: task.<span class="hljs-property">id</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"running"</span> }, <span class="hljs-string">"success"</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Task <span class="hljs-subst">${task.id}</span> cost <span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now() - now}</span> ms.`</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findAndModify</span>({ <span class="hljs-attr">id</span>: task.<span class="hljs-property">id</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"running"</span> }, <span class="hljs-string">"fail"</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Task"</span>, task.<span class="hljs-property">id</span>, <span class="hljs-string">"is fail."</span>, error);
    }
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">timeout</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">ms: number</span>) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sleep</span>(ms);
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findAndModify</span>({ <span class="hljs-attr">id</span>: task.<span class="hljs-property">id</span>, <span class="hljs-attr">status</span>: <span class="hljs-string">"running"</span> }, <span class="hljs-string">"fail"</span>);
  };
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<span class="hljs-title function_">execute</span>(), <span class="hljs-title function_">timeout</span>(<span class="hljs-number">2000</span>)]);
  <span class="hljs-keyword">return</span> task.<span class="hljs-property">id</span>;
}
</code></pre>
<p>æ¥ä¸‹æ¥åŸºæœ¬å·²ç»å®Œæˆäº†å•å®ä¾‹å•è¿›ç¨‹çš„ä»»åŠ¡é˜Ÿåˆ—å®ç°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡æ¥å£å®ç°ä»»åŠ¡çš„åˆ›å»ºå’Œæ‰§è¡Œã€‚å¹¶ä¸”åœ¨æ¥å£ä¸­å®šä¹‰å¥½ä»»åŠ¡åˆ›å»ºçš„æ–¹æ³•ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­æˆ‘ä»¬æ‰¹é‡åˆ›å»º<code>5</code>ä¸ªä»»åŠ¡ï¼Œç„¶åä¼šè°ƒç”¨é˜Ÿåˆ—çš„<code>tryRun</code>æ–¹æ³•æ¥å°è¯•è°ƒåº¦ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createTask</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> id = <span class="hljs-string">`task_<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>_<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">1000</span>)}</span>`</span>;
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasks</span>.<span class="hljs-title function_">push</span>({ id, <span class="hljs-attr">status</span>: <span class="hljs-string">"pending"</span> });
  <span class="hljs-keyword">return</span> { id };
}

@<span class="hljs-title class_">Controller</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IndexController</span> {
  @<span class="hljs-title class_">Inject</span>(<span class="hljs-title class_">IndexService</span>)
  private readonly indexService!: <span class="hljs-title class_">IndexService</span>;
  @<span class="hljs-title class_">Post</span>(<span class="hljs-string">"batch-create-task"</span>)
  public <span class="hljs-keyword">async</span> <span class="hljs-title function_">createTask</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// curl -X POST http://localhost:3000/batch-create-task</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">tasksService</span>.<span class="hljs-title function_">createTask</span>();
    }
  }
}
</code></pre>
<p>å½“æ‰§è¡Œå®Œæˆ<code>curl</code>åï¼Œæˆ‘ä»¬å°±å¯ä»¥çœ‹åˆ°ä»»åŠ¡è¢«é¡ºåºè°ƒåº¦æ‰§è¡Œï¼Œå¹¶ä¸”å¹¶å‘æ•°è¢«é™åˆ¶åœ¨<code>2</code>ä»¥å†…ã€‚å½“ç„¶ç”±äºæœ¬èº«ä»»åŠ¡çš„æ‰§è¡Œæ—¶é—´æ˜¯éšæœºçš„ï¼Œå› æ­¤å®é™…çš„æ‰§è¡Œé¡ºåºä»¥åŠä»»åŠ¡çš„çŠ¶æ€æˆåŠŸä¸å¦éƒ½æ˜¯ä¸ç¡®å®šçš„ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">Lock Assign _lock_key 0 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Task task_1762683026625_272 is <span class="hljs-attr">pending</span> =&gt; running.
Task task_1762683026625_164 is <span class="hljs-attr">pending</span> =&gt; running.
Task task_1762683026625_272 is <span class="hljs-attr">running</span> =&gt; success.
Task task_1762683026625_272 cost 534 ms.
Task task_1762683026625_164 is <span class="hljs-attr">running</span> =&gt; success.
Task task_1762683026625_164 cost 1556 ms.
Lock Release _lock_key 2 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Task task_1762683026625_300 is <span class="hljs-attr">pending</span> =&gt; running.
Lock Release _lock_key 2 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Task task_1762683026625_944 is <span class="hljs-attr">pending</span> =&gt; running.
Task task_1762683026625_300 is <span class="hljs-attr">running</span> =&gt; success.
Task task_1762683026625_300 cost 378 ms.
Task task_1762683026625_944 is <span class="hljs-attr">running</span> =&gt; success.
Task task_1762683026625_944 cost 1852 ms.
Lock Release _lock_key 2 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Task task_1762683026625_42 is <span class="hljs-attr">pending</span> =&gt; running.
Lock Release _lock_key 2 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Lock Release _lock_key 2 -&gt; 1
Task task_1762683026625_42 is <span class="hljs-attr">running</span> =&gt; success.
Task task_1762683026625_42 cost 1119 ms.
Lock Release _lock_key 1 -&gt; 0
Lock Assign _lock_key 0 -&gt; 1
Lock Assign _lock_key 1 -&gt; 2
Lock Release _lock_key 2 -&gt; 1
Lock Release _lock_key 1 -&gt; 0
</code></pre>
<h3 data-id="heading-4">åˆ†å¸ƒå¼é”</h3>
<p>å®é™…ä¸Šå…³äºé”çš„é—®é¢˜ï¼Œä¸Šè¿°çš„å•è¿›ç¨‹æ¨¡å¼ä»…éœ€è¦å¤„ç†å†…å­˜ï¼Œè€Œå¦‚æœæ˜¯å•æœºé›†ç¾¤æ¨¡å¼ï¼Œå³å¤šè¿›ç¨‹æ¨¡å¼å¯ä»¥å…±äº«å†…å­˜æˆ–è€…ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿå¤„ç†ã€‚ç„¶è€Œç°åœ¨å¸¸è§çš„éƒ½æ˜¯åˆ†å¸ƒå¼å¤šå®ä¾‹æ¨¡å¼ï¼Œè¿™ç§æƒ…å†µä¸‹åˆ™éœ€è¦ä½¿ç”¨<code>Redis</code>ç­‰å¤–éƒ¨å­˜å‚¨ï¼Œå› ä¸ºéœ€è¦ä¸€ä¸ªé›†ä¸­å¼çš„é”ç®¡ç†ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>Redis</code>æä¾›äº†<code>RedLock</code>ç®—æ³•å¯ä»¥å®ç°åˆ†å¸ƒå¼äº’æ–¥ï¼Œä¹Ÿå°±æ˜¯é˜»æ­¢å¹¶å‘ï¼Œå› æ­¤å¹¶ä¸é€‚åˆæˆ‘ä»¬è¿™é‡Œçš„ä»»åŠ¡é˜Ÿåˆ—åœºæ™¯ã€‚è¿˜æœ‰<code>Redis</code>åˆ†å¸ƒå¼ä¸»ä»éƒ¨ç½²çš„æƒ…å†µä¸‹ï¼Œè‹¥æ˜¯<code>Redis</code>ä¸»èŠ‚ç‚¹æŒ‚æ‰ï¼Œä»èŠ‚ç‚¹æ™‹å‡ä¸ºä¸»èŠ‚ç‚¹æ—¶ï¼Œå¯èƒ½ä¼šå¯¼è‡´çŸ­æš‚çš„ä»»åŠ¡è¶…é™ï¼Œå³åŒæ—¶è¿è¡Œçš„ä»»åŠ¡æ•°è¶…è¿‡<code>MaxTask</code>ã€‚</p>
<p>å› æ­¤è¿™é‡Œæˆ‘ä»¬éœ€è¦å°†å†…å­˜çš„é”å®ç°æ›¿æ¢ä¸º<code>Redis</code>çš„åˆ†å¸ƒå¼é”å®ç°ï¼Œå¯¹æ¯”å†…å­˜çš„å®ç°ï¼Œç”±äºæœ¬èº«<code>Redis</code>æ”¯æŒ<code>incr</code>å’Œ<code>decr</code>åŸå­æ“ä½œï¼Œä½†æ˜¯å…¶ä¸èƒ½é™åˆ¶å…¶æ•°æ®èŒƒå›´ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨<code>LUA</code>è„šæœ¬æ¥å®ç°åˆ†å¸ƒå¼é”çš„åŠŸèƒ½ã€‚ä¸‹é¢æ˜¯å¹¶è¡Œä»»åŠ¡çš„<code>LUA</code>å®ç°:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * Redis è‡ªå¢é” LUA è„šæœ¬
 * - KEYS[1]: é”çš„é”®å
 * - ARGV[1]: æœ€å¤§ä»»åŠ¡æ•° MaxTask
 * <span class="hljs-doctag">@example</span> ioredis.eval(LUA_SCRIPT, 1, LOCK_KEY, MAX_TASK);
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">INCR_LOCK_LUA</span> = <span class="hljs-string">`
  local current = redis.call("GET", KEYS[1])

  if not current then
    current = 0
  else
    current = tonumber(current)
  end

  if current &gt;= tonumber(ARGV[1]) then
    return -1
  end

  local new_count = redis.call("INCR", KEYS[1])
  return new_count
`</span>;

<span class="hljs-comment">/**
 * Redis è‡ªå‡é” LUA è„šæœ¬
 * - KEYS[1]: é”çš„é”®å
 * <span class="hljs-doctag">@example</span> ioredis.eval(LUA_SCRIPT, 1, LOCK_KEY);
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DESC_LOCK_LUA</span> = <span class="hljs-string">`
  local current = redis.call("GET", KEYS[1])
  
  if not current then
    return 0
  end

  current = tonumber(current)
  if current &lt;= 0 then
    return 0
  end

  local new_count = redis.call("DECR", KEYS[1])
  return new_count
`</span>;
</code></pre>
<h2 data-id="heading-5">ä¼˜é›…åœæœº</h2>
<p>ä¼˜é›…åœæœºçš„å¤„ç†è¦æ›´å¤æ‚ä¸€äº›ï¼Œå› ä¸ºå…¶ä¸èƒ½å®Œå…¨ä¾é æ¡†æ¶æœ¬èº«çš„å¤„ç†èƒ½åŠ›ï¼Œè€Œæ˜¯éœ€è¦æˆ‘ä»¬åœ¨åº”ç”¨å±‚è¿›è¡Œå¤„ç†ã€‚å³æˆ‘ä»¬å¿…é¡»è¦å°†ä¿¡å·ä¼ é€’åˆ°è¿›ç¨‹ä¸­ï¼Œå¦‚æœè¿›ç¨‹æ²¡æœ‰æ”¶åˆ°ä¿¡å·çš„è¯ï¼Œé‚£ä¹ˆå°±æ— æ³•è¿›è¡Œä¼˜é›…åœæœºçš„å¤„ç†ï¼Œå³ä½¿æ˜¯å¤„ç†å¥½äº†ç›¸å…³èµ„æºçš„æ¸…ç†ï¼Œä¹Ÿæ²¡æœ‰å®é™…æ•ˆç”¨ã€‚</p>
<p>ç‰¹åˆ«çš„ï¼Œåœ¨åˆ†å¸ƒå¼éƒ¨ç½²çš„æƒ…å†µä¸‹æˆ‘ä»¬éƒ½æ˜¯éƒ¨ç½²åœ¨<code>Docker</code>å®¹å™¨ä¸­ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¿¡å·çš„ä¼ é€’å°±éå¸¸ä¾èµ–å®¹å™¨æœ¬èº«çš„é…ç½®ï¼Œä»¥åŠå®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼ã€‚å‡è®¾åœæœºä¿¡å·ä»…å‘é€ç»™ä¸»è¿›ç¨‹è€Œä¸åƒæ˜¯<code>Ctrl+C</code>ä¸€æ ·å‘é€ç»™è¿›ç¨‹ç»„ï¼Œé‚£ä¹ˆä¼˜é›…åœæœºå°±å¿…é¡»è¦ä¸»åŠ¨å°†ä¿¡å·ä¼ é€’åˆ°å­è¿›ç¨‹ä¸­ï¼Œå¦åˆ™å­è¿›ç¨‹å°†æ— æ³•è¿›è¡Œåœæœºå¤„ç†ã€‚</p>
<h3 data-id="heading-6">SIGINT</h3>
<p><code>SIGINT</code>ä¿¡å·å°±æ˜¯æˆ‘ä»¬ä¸»è¦å…³æ³¨çš„ä¿¡å·ç±»å‹ï¼Œå½“æˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­æŒ‰ä¸‹<code>Ctrl+C</code>æ—¶ï¼Œç³»ç»Ÿä¼šå‘å½“å‰å‰å°è¿›ç¨‹ç»„å‘é€<code>SIGINT</code>ä¿¡å·ï¼Œä»è€Œè§¦å‘è¿›ç¨‹çš„ä¸­æ–­å¤„ç†ã€‚åœ¨<code>kill</code>å‘½ä»¤ä¸­ï¼Œ<code>SIGINT</code>ä¿¡å·çš„ç¼–å·ä¸º<code>2</code>ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡<code>kill -2 &lt;pid&gt;</code>æˆ–è€…<code>kill -INT &lt;pid&gt;</code>å‘½ä»¤æ¥å‘é€è¯¥ä¿¡å·ã€‚</p>
<p>åœ¨è¿™é‡Œæˆ‘ä»¬æ¥å®ç°ç®€å•çš„<code>SIGINT</code>ä¿¡å·å¤„ç†ï¼Œéœ€è¦åˆ›å»ºç®€å•çš„<code>HTTP</code>æœåŠ¡å™¨ï¼Œç„¶åé€šè¿‡ç›‘å¬<code>process.on("SIGINT")</code>äº‹ä»¶æ¥å¤„ç†ä¿¡å·ã€‚å½“æˆ‘ä»¬æ‰§è¡Œ<code>Ctrl+C</code>æ—¶ï¼ŒæœåŠ¡å™¨ä¸ä¼šç«‹å³å…³é—­ï¼Œè€Œæ˜¯ä¼šè¾“å‡ºç­‰å¾…çš„æç¤ºï¼Œæ¥ä¸‹æ¥ç­‰å¾…<code>2s</code>åå…³é—­ï¼Œç„¶åæ‰ä¼šé€€å‡ºè¿›ç¨‹ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> server = http.<span class="hljs-title function_">createServer</span>(<span class="hljs-function">(<span class="hljs-params">_, res</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Received Request"</span>, <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>());
  res.<span class="hljs-title function_">writeHead</span>(<span class="hljs-number">200</span>, { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/plain"</span> });
  res.<span class="hljs-title function_">end</span>(<span class="hljs-string">"Hello, World!\n"</span>);
});

process.<span class="hljs-title function_">on</span>(<span class="hljs-string">"SIGINT"</span>, <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Received SIGINT. Shutting Down Gracefully..."</span>);
  <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(r, <span class="hljs-number">2000</span>));
  server.<span class="hljs-title function_">close</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Server Closed. Exiting Process."</span>);
    process.<span class="hljs-title function_">exit</span>(<span class="hljs-number">0</span>);
  });
});

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PORT</span> = process.<span class="hljs-property">env</span>.<span class="hljs-property">PORT</span> || <span class="hljs-number">3000</span>;
server.<span class="hljs-title function_">listen</span>(<span class="hljs-variable constant_">PORT</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Server Running at http://localhost:<span class="hljs-subst">${PORT}</span>/`</span>);
});
</code></pre>
<h3 data-id="heading-7">ä¿¡å·ä¼ é€’</h3>
<p><code>Ctrl+C</code>ä¼šç»™æ•´ä¸ªå‰å°è¿›ç¨‹ç»„å‘é€<code>SIGINT</code>ä¿¡å·ï¼Œä½†æ˜¯åœ¨ä¸šåŠ¡ä¸­å¯èƒ½ä¼šä»…å¯èƒ½ç»™ä¸»è¿›ç¨‹å‘é€<code>SIGINT</code>ä¿¡å·ï¼Œè¿™æ—¶å€™å­è¿›ç¨‹å°±æ— æ³•æ”¶åˆ°ä¿¡å·ã€‚æˆ‘ä»¬å¯ä»¥æ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªè¡Œä¸ºï¼Œå½“ä½¿ç”¨<code>npx</code>å‘½ä»¤æ—¶ï¼Œå…¶å¹¶ä¸ä¼šå°†ä¿¡å·è½¬å‘åˆ°å…¶å¯åŠ¨çš„å­è¿›ç¨‹ã€‚æ­¤å¤–è¿˜æœ‰ä¸ªå¸¸ç”¨çš„ä¿¡å·æ˜¯<code>SIGTERM</code>ï¼Œç¼–å·ä¸º<code>15</code>ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ps -A -o pid,ppid,comm,args &gt; ps.txt</span>
<span class="hljs-comment"># lsof -i :3000</span>
<span class="hljs-comment"># kill -INT 1234</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"signal.sh PID-PPID $$,<span class="hljs-variable">$PPID</span>"</span>
npx tsx ./src/index.ts
</code></pre>
<p>å½“ä½¿ç”¨<code>bash signal.sh</code>å¯åŠ¨è„šæœ¬æ—¶ï¼Œå…ˆè¾“å‡ºå½“å‰è¿›ç¨‹çš„<code>PID</code>å’Œä»¥åŠçˆ¶è¿›ç¨‹çš„<code>PPID</code>ã€‚æ­¤æ—¶ç”±äºè¿›ç¨‹æ˜¯<code>bash</code>å¯åŠ¨çš„ï¼Œå› æ­¤<code>PPID</code>æ˜¯<code>bash</code>çš„è¿›ç¨‹å·ï¼Œæ¥ä¸‹æ¥ä½¿ç”¨<code>npx tsx</code>å¯åŠ¨<code>NodeJs</code>è¿›ç¨‹ï¼Œæ­¤æ—¶<code>NodeJs</code>è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°±æ˜¯<code>npx</code>è¿›ç¨‹ï¼Œå‡è®¾è¾“å‡ºæ˜¯ä¸‹é¢çš„<code>id</code>:</p>
<pre><code class="hljs language-bash" lang="bash">signal.sh PID-PPID 66721,59534
59534 51513 /bin/zsh         /bin/zsh -il                 <span class="hljs-comment"># zsh shell</span>
66721 59534 bash             bash signal.sh               <span class="hljs-comment"># bash </span>
66722 66721 npm <span class="hljs-built_in">exec</span> tsx ./s npm <span class="hljs-built_in">exec</span> tsx ./src/index.ts  <span class="hljs-comment"># npx tsx</span>
</code></pre>
<p>æ­¤æ—¶å¦‚æœæ‰§è¡Œ<code>kill -INT 66721</code>å‘½ä»¤å‘é€åˆ°è„šæœ¬è¿›ç¨‹ï¼Œä¼šå‘ç°<code>NodeJs</code>è¿›ç¨‹å¹¶æ²¡æœ‰æ”¶åˆ°ä¿¡å·ï¼Œå› æ­¤æ— æ³•è¿›è¡Œä¼˜é›…åœæœºå¤„ç†ã€‚é€šå¸¸åœ¨è¿™ç§æƒ…å†µä¸‹åªèƒ½ç­‰å¾…ä¸€å®šæ—¶é—´åå¼ºåˆ¶æ€æ­»å­è¿›ç¨‹ï¼Œä¹Ÿå°±æ˜¯<code>kill -9 &lt;pid&gt;</code>æˆ–è€…<code>kill -KILL &lt;pid&gt;</code>å‘½ä»¤ã€‚è€Œå¦‚æœç›´æ¥<code>kill -2 66722</code>ï¼Œåˆ™å¯ä»¥æ­£å¸¸åœæœºã€‚</p>
<p>æˆ‘ä»¬çš„å‡è®¾æ˜¯ä¿¡å·ä»…å‘é€åˆ°ä¸»è¿›ç¨‹ï¼Œè€Œæ­¤æ—¶çš„ä¸»è¿›ç¨‹å°±æ˜¯<code>bash</code>å¯åŠ¨å‘½ä»¤ï¼Œæ— æ³•ç»“æŸè¿›ç¨‹å°±å¾ˆåˆç†äº†ã€‚è¿™é‡Œé—®é¢˜å…¶å®å°±åœ¨äºæˆ‘ä»¬æ˜¯ä½¿ç”¨<code>npx</code>å¯åŠ¨çš„è¿›ç¨‹ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šå¯åŠ¨ä¸€ä¸ªæ–°çš„è¿›ç¨‹æ¥æ‰§è¡ŒæœåŠ¡çš„å¯åŠ¨å‘½ä»¤ï¼Œåœ¨ä¿¡å·ä¸ä¼ é€’çš„æƒ…å†µä¸‹ï¼Œå­è¿›ç¨‹æ˜¯æ— æ³•æ”¶åˆ°ä¿¡å·çš„ã€‚</p>
<p>åœ¨<code>Bash</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>exec</code>å‘½ä»¤ç”¨äºæ›¿æ¢å½“å‰çš„<code>Shell</code>è¿›ç¨‹ï¼Œè€Œä¸æ˜¯åˆ›å»ºæ–°çš„å­è¿›ç¨‹ã€‚å› æ­¤ï¼Œå¦‚æœæˆ‘ä»¬åœ¨<code>npx</code>å‘½ä»¤å‰ä½¿ç”¨<code>exec</code>æ¥æ›¿æ¢æ‰å½“å‰çš„<code>bash</code>è¿›ç¨‹ï¼Œé‚£ä¹ˆä¿¡å·å°±å¯ä»¥ç›´æ¥ä¼ é€’åˆ°<code>NodeJs</code>è¿›ç¨‹ä¸­äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">exec</span> npx tsx ./src/index.ts
</code></pre>
<p>æ­¤æ—¶çš„è¿›ç¨‹å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼Œæ­¤æ—¶çš„ä¸»è¿›ç¨‹å°±æ˜¯<code>67033</code>è¿›ç¨‹å·äº†ï¼Œæ­¤æ—¶ç›´æ¥<code>kill -INT 67033</code>å°±å¯ä»¥æ­£å¸¸æ”¶åˆ°ä¿¡å·å¹¶ä¸”è¿›è¡Œä¼˜é›…åœæœºå¤„ç†äº†ã€‚è¿™é‡Œè¿˜éœ€è¦å…³æ³¨ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ˜¯ç›´æ¥ä½¿ç”¨ç»ˆç«¯æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ‰€ä»¥å…¶æœ¬èº«çš„è¿›ç¨‹<code>59534</code>å³<code>zsh</code>è¿›ç¨‹å·å°±æ˜¯çˆ¶è¿›ç¨‹å·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">signal.sh PID-PPID 67033,59534
59534 51513 /bin/zsh         /bin/zsh -il
67033 59534 npm <span class="hljs-built_in">exec</span> tsx ./s npm <span class="hljs-built_in">exec</span> tsx ./src/index.ts   
</code></pre>
<p>ç”±äº<code>npx</code>ä¼šåˆ›å»ºå­è¿›ç¨‹æ¥æ‰§è¡Œå‘½ä»¤ï¼Œå› æ­¤è‹¥æ˜¯å¯åŠ¨æœåŠ¡çš„å‘½ä»¤æœ¬èº«å¦‚æœä¹Ÿæ˜¯åˆ›å»ºå­è¿›ç¨‹çš„æ–¹å¼ï¼Œé‚£ä¹ˆåŒæ ·ä¼šå­˜åœ¨ä¿¡å·æ— æ³•ä¼ é€’çš„é—®é¢˜ã€‚å› æ­¤åœ¨ä½¿ç”¨<code>pm2</code>ç­‰è¿›ç¨‹ç®¡ç†å·¥å…·æ—¶ï¼Œä¹Ÿéœ€è¦æ³¨æ„å…¶å¯åŠ¨å‘½ä»¤çš„ä¿¡å·ä¼ é€’é—®é¢˜ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥é¿å…ä½¿ç”¨<code>npx</code>å‘½ä»¤æ¥å¯åŠ¨è¿›ç¨‹ï¼Œæ­¤æ—¶æœåŠ¡å°±ä½œä¸ºé¡¶å±‚è¿›ç¨‹å¯åŠ¨äº†ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">$PWD</span>/node_modules/.bin:<span class="hljs-variable">$PATH</span>"</span>
<span class="hljs-built_in">exec</span> tsx ./src/index.ts
</code></pre>
<pre><code class="hljs language-bash" lang="bash">signal.sh PID-PPID 67675,59534
59534 51513 /bin/zsh         /bin/zsh -il
67675 59534 node             node /xxx/node_modules/.bin/../tsx/dist/cli.mjs ./src/index.ts
</code></pre>
<h3 data-id="heading-8">å­è¿›ç¨‹ç®¡ç†</h3>
<p>ç”±äºä¸‹é¢éœ€è¦ä»¥<code>PM2</code>åœ¨é›†ç¾¤æ¨¡å¼ä¸‹å®ç°ä¿¡å·ä¼ é€’ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°±å…ˆåšä¸€ä¸ªç®€å•æœ‰è¶£çš„å®éªŒï¼Œä¸»è¦æ˜¯ä¸ºäº†è§‚å¯Ÿå­è¿›ç¨‹æ‰§è¡Œçš„æƒ…å†µã€‚é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šåœ¨éƒ¨ç½²ç¯å¢ƒä¸­ä½¿ç”¨å®¹å™¨å†…çš„è¿›ç¨‹ä¾‹å¦‚<code>systemd</code>æ¥å®ˆæŠ¤è¿›ç¨‹ï¼Œå¹¶ä¸ä¼šä½¿ç”¨<code>pm2</code>çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œä½†æ˜¯å¦‚æœç›´æ¥ä½¿ç”¨<code>pm2</code>å®ˆæŠ¤ï¼Œé‚£å°±éœ€è¦ä¸»åŠ¨ä¼ é€’ä¿¡å·ã€‚</p>
<p>å› æ­¤åœ¨è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªç®€å•çš„çˆ¶å­è¿›ç¨‹æ¨¡å‹ï¼Œç›¸å½“äºç®€å•åœ°è¡¨ç¤ºä¸€ä¸‹è¿›ç¨‹çš„æ¨¡å‹ã€‚<code>child.sh</code>æ˜¯æ™®é€šçš„è„šæœ¬ï¼Œåœ¨è¿™é‡Œä¼šç›´æ¥ä½¿ç”¨<code>while</code>æ¥ä¿æŒè¿›ç¨‹ã€‚<code>normal.sh</code>æ˜¯çˆ¶è¿›ç¨‹è„šæœ¬ï¼Œä½¿ç”¨<code>bash</code>å¯åŠ¨<code>child.sh</code>ä½œä¸ºå­è¿›ç¨‹ã€‚<code>fork.sh</code>ä¹Ÿæ˜¯çˆ¶è¿›ç¨‹è„šæœ¬ï¼Œä½†æ˜¯ä¼šä½¿ç”¨<code>disown</code>æ¥åˆ†ç¦»è¿›ç¨‹ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># child.sh</span>
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">sleep</span> 1
    <span class="hljs-built_in">echo</span> <span class="hljs-string">"child.sh PID-PPID $$,<span class="hljs-variable">$PPID</span>"</span>
<span class="hljs-keyword">done</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># normal.sh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"normal.sh PID-PPID $$,<span class="hljs-variable">$PPID</span>"</span>
bash child.sh &gt; /dev/tty 2&gt;&amp;1
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># fork.sh</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">"fork.sh PID-PPID $$,<span class="hljs-variable">$PPID</span>"</span>
bash child.sh &gt; /dev/tty 2&gt;&amp;1 &amp;
<span class="hljs-built_in">disown</span> -h %1
</code></pre>
<p>å½“æˆ‘ä»¬åˆ†åˆ«ä½¿ç”¨ä¸¤ä¸ªç»ˆç«¯æ¥å¯åŠ¨<code>normal.sh</code>ä»¥åŠ<code>fork.sh</code>åï¼Œå¯ä»¥è§‚å¯Ÿåˆ°<code>normal</code>è¿›ç¨‹ä¼šæŒæœ‰ä¸”ä¸ä¼šåœæ­¢ï¼Œ<code>fork</code>è¿›ç¨‹ä¼šç»“æŸå…ˆå‰çš„è¿›ç¨‹ï¼Œå¯ä»¥åœ¨ç»ˆç«¯é‡Œæ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œç±»ä¼¼äºå°†å…¶æ”¾ç½®äºåå°ï¼Œæ³¨æ„è¾“å‡ºé‡å®šå‘åˆ°<code>tty</code>ç»ˆç«¯ä¸ä¼šåœ, ä¹Ÿå¯ä»¥è¾“å‡ºåˆ°æ–‡ä»¶ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">normal.sh PID-PPID 70263,69842
child.sh PID-PPID 70264,70263
69842 51513 /bin/zsh         /bin/zsh -il
70263 69842 bash             bash normal.sh
70264 70263 bash             bash child.sh
72259 70264 <span class="hljs-built_in">sleep</span>            <span class="hljs-built_in">sleep</span> 1
</code></pre>
<pre><code class="hljs language-bash" lang="bash">fork.sh PID-PPID 70303,69954
child.sh PID-PPID 70304,1
69954 51513 /bin/zsh         /bin/zsh -il
70304     1 bash             bash child.sh
72260 70304 <span class="hljs-built_in">sleep</span>            <span class="hljs-built_in">sleep</span> 1
</code></pre>
<h3 data-id="heading-9">PM2 è¿›ç¨‹</h3>
<p>åœ¨å…ˆå‰çš„å®éªŒä¸­æˆ‘ä»¬å·²ç»è§‚å¯Ÿåˆ°äº†ä¿¡å·ä¼ é€’çš„é—®é¢˜ï¼Œé‚£ä¹ˆåœ¨<code>pm2</code>ä¸­åŒæ ·ä¼šå­˜åœ¨è¿™ä¸ªé—®é¢˜ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨<code>pm2 start</code>æ¥å¯åŠ¨è¿›ç¨‹ï¼Œè¿™ç§æƒ…å†µä¸‹å°±æ˜¯ä½¿ç”¨<code>fork</code>æ¨¡å¼å¯åŠ¨çš„è¿›ç¨‹ï¼Œå› æ­¤ä¿¡å·æ˜¯æ— æ³•ä¼ é€’åˆ°å­è¿›ç¨‹ä¸­çš„ï¼Œå› ä¸ºè¿™ä¸ªè¿›ç¨‹ä¼šç«‹å³ç»“æŸæ‰ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">export</span> PORT=3000
<span class="hljs-built_in">echo</span> <span class="hljs-string">"bootstrap.sh PID-PPID $$,<span class="hljs-variable">$PPID</span>"</span>
npx tsc --project tsconfig.json
<span class="hljs-built_in">export</span> PATH=<span class="hljs-string">"<span class="hljs-variable">$PWD</span>/node_modules/.bin:<span class="hljs-variable">$PATH</span>"</span>
<span class="hljs-built_in">exec</span> pm2 start ./dist/index.js -i 2 --kill-timeout 5000 --log-date-format=<span class="hljs-string">"YYYY-MM-DD HH:mm:ss"</span> --<span class="hljs-built_in">log</span> ./output.log
</code></pre>
<p>æ­¤æ—¶çš„è¿›ç¨‹æ ‘å…³ç³»å¦‚ä¸‹ï¼Œç”±äºè¿›ç¨‹ä¼šç«‹å³ç»“æŸï¼Œæ­¤æ—¶<code>pm2</code>çš„ä¸»è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°±æ˜¯<code>1</code>ã€‚ç„¶åç”±äºæ˜¯ä½¿ç”¨çš„é›†ç¾¤æ¨¡å¼ï¼Œå› æ­¤ä¼šå¯åŠ¨ä¸¤ä¸ªå­è¿›ç¨‹æ¥æ‰§è¡ŒæœåŠ¡ï¼Œè€Œè¿™ä¸¤ä¸ªå­è¿›ç¨‹çš„çˆ¶è¿›ç¨‹å°±æ˜¯<code>pm2</code>çš„ä¸»è¿›ç¨‹ï¼Œæ­¤æ—¶æˆ‘ä»¬æ˜¯æ²¡æœ‰åŠæ³•å‘é€<code>SIGINT</code>ä¿¡å·ç»™ä¸»è¿›ç¨‹ï¼Œè‡ªç„¶å­è¿›ç¨‹ä¹Ÿæ— æ³•æ”¶åˆ°ä¿¡å·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">73353     1 PM2 v6.0.8: God  PM2 v6.0.8: God Daemon (/Users/czy/.pm2) 
73354 73353 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js 
73355 73353 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js 
</code></pre>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœéœ€è¦å°è¯•ä¼˜é›…åœæœºå¤„ç†ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸»åŠ¨å°†ä¿¡å·ä¼ é€’åˆ°å­è¿›ç¨‹ä¸­ã€‚é€šå¸¸æ¥è¯´ç”±äºè¿›ç¨‹ç»“æŸï¼Œæˆ‘ä»¬æ— æ³•ä»ä¸»è¿›ç¨‹ä¸­å¾—åˆ°å­è¿›ç¨‹çš„<code>PID</code>ï¼Œå› æ­¤åªèƒ½é€šè¿‡<code>pm2</code>æä¾›çš„å‘½ä»¤æ¥è·å–å­è¿›ç¨‹çš„<code>PID</code>ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨<code>ps</code>æ¥åŒ¹é…<code>PID</code>ï¼Œç„¶åå†å‘é€ä¿¡å·ï¼Œè¿™ç§æƒ…å†µä¸‹æ˜¯å¯ä»¥ä¼˜é›…åœæœºçš„ã€‚</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">kill</span> -INT $(pgrep pm2)
</code></pre>
<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç»„åˆä¸Šé¢çš„è„šæœ¬æ¥å®ç°ä¿¡å·çš„ä¼ é€’å¤„ç†ï¼Œé¦–å…ˆéœ€è¦é¿å…ä¸»è¿›ç¨‹è„šæœ¬ç»“æŸæ‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨<code>while</code>æ¥ä¿æŒè¿›ç¨‹ï¼Œç„¶ååœ¨æ”¶åˆ°ä¿¡å·æ—¶è·å–å­è¿›ç¨‹çš„<code>PID</code>å¹¶ä¸”ä¼ é€’ä¿¡å·ã€‚æ³¨æ„è¿™ç§æƒ…å†µä¸‹ä¸èƒ½ç”¨<code>exec</code>äº†ï¼Œéœ€è¦æ­£å¸¸<code>fork</code>å‡ºå­è¿›ç¨‹ï¼Œå¦åˆ™åç»­<code>while</code>ä»¥åŠ<code>trap</code>ä»£ç ä¸ä¼šæ‰§è¡Œã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pm2 start ./dist/index.js -i 2 --kill-timeout 5000 --log-date-format=<span class="hljs-string">"YYYY-MM-DD HH:mm:ss"</span> --<span class="hljs-built_in">log</span> ./output.log
<span class="hljs-function"><span class="hljs-title">forward_signal</span></span>() {
    pm2_pid=$(pgrep pm2)
    <span class="hljs-built_in">kill</span> -INT <span class="hljs-variable">$pm2_pid</span>
    <span class="hljs-built_in">exit</span> 0
}
<span class="hljs-built_in">trap</span> forward_signal SIGINT
<span class="hljs-keyword">while</span> <span class="hljs-literal">true</span>; <span class="hljs-keyword">do</span>
    <span class="hljs-built_in">sleep</span> 1
<span class="hljs-keyword">done</span>
</code></pre>
<pre><code class="hljs language-bash" lang="bash">bootstrap.sh PID-PPID 76699,73203
76731     1 PM2 v6.0.8: God  PM2 v6.0.8: God Daemon (/Users/czy/.pm2) 
76732 76731 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js 
76733 76731 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js 
73203 51513 /bin/zsh         /bin/zsh -il
76699 73203 bash             bash bootstrap.sh
76895 76699 <span class="hljs-built_in">sleep</span>            <span class="hljs-built_in">sleep</span> 1
</code></pre>
<p>å®é™…ä¸Šï¼Œ<code>pm2</code>å½“å‰æ”¯æŒäº†<code>pm2-runtime</code>å‘½ä»¤æ¥æ›´å¥½åœ°æ”¯æŒå®¹å™¨åŒ–åœºæ™¯ä¸‹çš„è¿›ç¨‹ç®¡ç†ï¼ŒåŒæ ·çš„ä¹‹å‰å™è¿°çš„<code>npx</code>å‘½ä»¤é—®é¢˜ä¹Ÿä¼šå‡ºç°ã€‚ä»ä¸‹é¢çš„è¿›ç¨‹æ ‘ä¸­å¯ä»¥çœ‹å‡ºæ¥ä¿¡å·ä¼ é€’ä¼šæ¯”ä¹‹å‰å¤šäº†ä¸€å±‚ï¼Œè€Œæ‰§è¡Œ<code>kill -INT 80795</code>å‘½ä»¤æ—¶ï¼Œå­è¿›ç¨‹æ˜¯æ— æ³•æ”¶åˆ°ä¿¡å·çš„ï¼Œè¿›ç¨‹ä¹Ÿä¸ä¼šç»“æŸã€‚</p>
<pre><code class="hljs language-bash" lang="bash">78367 51513 /bin/zsh         /bin/zsh -il
80795 78367 bash             bash bootstrap.sh
80819 80795 npm <span class="hljs-built_in">exec</span> pm2-run npm <span class="hljs-built_in">exec</span> pm2-runtime start pm2.config.js --<span class="hljs-built_in">env</span> production      
80836 80819 node             node /xxx/.bin/../pm2/bin/pm2-runtime start pm2.config.js --<span class="hljs-built_in">env</span> production
80844 80836 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js     
80845 80836 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js 
</code></pre>
<p>å› æ­¤è¿™é‡Œçš„å®ç°ä»ç„¶éœ€è¦ä¿è¯ä½¿ç”¨<code>exec</code>æ¥å¯åŠ¨<code>pm2-runtime</code>æœåŠ¡ï¼Œæ­¤å¤–è¯¥å‘½ä»¤ä¸ä¼šå¯åŠ¨<code>pm2</code>çš„å®ˆæŠ¤è¿›ç¨‹ï¼Œç›¸å…³æ—¥å¿—ä¼šç›´æ¥è¾“å‡ºåˆ°å½“å‰<code>shell</code>ä¸­ã€‚è€Œä¸”ä¹Ÿæ˜¯æ”¯æŒé›†ç¾¤æ¨¡å¼çš„ï¼Œä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†ä½¿ç”¨<code>pm2-runtime</code>å¯åŠ¨çš„è¿›ç¨‹å…³ç³»æ ‘ï¼Œæ‰§è¡Œ<code>kill -INT 84685</code>å¯ä»¥æ­£å¸¸å¤„ç†ä¿¡å·ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">78367 51513 /bin/zsh         /bin/zsh -il
78673 78367 node             node /xxx/.bin/../pm2/bin/pm2-runtime start pm2.config.js --<span class="hljs-built_in">env</span> production
78704 78673 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js     
78705 78673 node /Users/czy/ node /xxx/graceful-shutdown/dist/index.js
</code></pre>
<h3 data-id="heading-10">å¿ƒè·³æœºåˆ¶</h3>
<p>åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸‹ï¼Œé™¤äº†ä¿¡å·ä¼ é€’çš„é—®é¢˜ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯è¿›ç¨‹æœ¬èº«çš„å­˜æ´»æ£€æµ‹é—®é¢˜ã€‚å‡è®¾æŸä¸ªå®ä¾‹ç”±äºæŸäº›åŸå› ç›´æ¥é€€å‡ºäº†ï¼Œé‚£ä¹ˆæ­¤æ—¶å°±æ— æ³•è¿›è¡Œä¼˜é›…åœæœºå¤„ç†äº†ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡å¿ƒè·³æœºåˆ¶æ¥æ£€æµ‹è¿›ç¨‹çš„å­˜æ´»çŠ¶æ€ï¼Œä»¥æ­¤æ¥ç»´æŠ¤æœåŠ¡æœ¬èº«çš„å¥å£®æ€§ã€‚</p>
<p>å¿ƒè·³æœºåˆ¶çš„å®ç°å…¶å®éå¸¸ç®€å•ï¼Œä¸»è¦æ˜¯é€šè¿‡å®šæ—¶å‘å­˜å‚¨ä½ç½®å†™å…¥å½“å‰çš„æ—¶é—´æˆ³æ¥è¡¨ç¤ºè¿›ç¨‹çš„å­˜æ´»çŠ¶æ€ã€‚å‡è®¾æˆ‘ä»¬ä½¿ç”¨<code>Redis</code>æ¥å­˜å‚¨å¿ƒè·³æ—¶é—´æˆ³ï¼Œé‚£ä¹ˆæ¯ä¸ªå®ä¾‹å¯ä»¥ä½¿ç”¨å”¯ä¸€çš„<code>key</code>æ¥å­˜å‚¨è‡ªå·±çš„å¿ƒè·³æ—¶é—´æˆ³ï¼Œç„¶åå®šæ—¶æ›´æ–°è¿™ä¸ªæ—¶é—´æˆ³ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">launchInstance</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">keep</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">// æ›´æ–° Redis å¿ƒè·³æ—¶é—´æˆ³</span>
    <span class="hljs-built_in">setTimeout</span>(keep, <span class="hljs-variable constant_">LOOP_TIME</span>);
  };
  <span class="hljs-title function_">keep</span>();
  <span class="hljs-comment">// å¼€æœºæ—¶æ¸…ç†ä¸€æ¬¡è¿‡æœŸå®ä¾‹</span>
  <span class="hljs-keyword">const</span> res = <span class="hljs-title function_">clearInactiveInstances</span>();
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Active Instance"</span>, res.<span class="hljs-property">active</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Inactive Instance"</span>, res.<span class="hljs-property">inactive</span>);
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">terminateInstance</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-comment">// ä¼˜é›…åœæœºæ—¶åˆ é™¤å½“å‰å®ä¾‹</span>
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearInactiveInstances</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> entries = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(<span class="hljs-variable constant_">MEMORY_MAP</span>);
  <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
  <span class="hljs-keyword">const</span> <span class="hljs-attr">active</span>: string[] = [];
  <span class="hljs-keyword">const</span> <span class="hljs-attr">inactive</span>: string[] = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> entries) {
    <span class="hljs-keyword">if</span> (now - <span class="hljs-title class_">Number</span>(value) &gt; <span class="hljs-variable constant_">ACTIVE_TIME_OUT</span>) {
      <span class="hljs-comment">// æ¸…ç†è¿‡æœŸå®ä¾‹</span>
      inactive.<span class="hljs-title function_">push</span>(key);
      <span class="hljs-keyword">continue</span>;
    }
    active.<span class="hljs-title function_">push</span>(key);
  }
  <span class="hljs-keyword">return</span> { active, inactive };
};
</code></pre>
<p>ç”±äºå®ä¾‹æœ¬èº«å¦‚æœé€€å‡ºäº†ï¼Œé‚£ä¹ˆå¿ƒè·³æ—¶é—´æˆ³å°±ä¸ä¼šå†æ›´æ–°äº†ï¼Œè€Œä¸”å®ˆæŠ¤è¿›ç¨‹çš„å­˜åœ¨ï¼Œé€€å‡ºçš„è¿›ç¨‹ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…é‡å¯ã€‚é‚£ä¹ˆåœ¨ä¸šåŠ¡ä¸­ï¼Œä¾‹å¦‚æˆ‘ä»¬æœ€å¼€å§‹èŠçš„ä»»åŠ¡é˜Ÿåˆ—å®ç°ä¸­ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å®ä¾‹å¯åŠ¨çš„æ—¶è·å–å½“å‰çš„æ´»è·ƒå®ä¾‹ï¼Œç„¶åæ£€æŸ¥æ­£åœ¨è¿è¡Œä»»åŠ¡çš„è°ƒåº¦å®ä¾‹<code>id</code>æ˜¯å¦è¿˜åœ¨æ´»è·ƒå®ä¾‹ä¸­ï¼Œä»¥æ­¤æ¥å°è¯•é‡æ–°è°ƒåº¦ä»»åŠ¡ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// task</span>
{
  <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">pod_id</span>: <span class="hljs-string">"$instance_id0"</span>,
  <span class="hljs-attr">status</span>: <span class="hljs-string">"running"</span>
}

<span class="hljs-comment">// redis</span>
[
  <span class="hljs-string">"$instance_id0"</span>: <span class="hljs-number">100</span>,
  <span class="hljs-string">"$instance_id1"</span>: <span class="hljs-number">9999999999</span>,
  <span class="hljs-string">"$instance_id2"</span>: <span class="hljs-number">9999999999</span>
]
</code></pre>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>åœ¨æ–‡æœ¬ä¸­æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶ä¸”å®ç°äº†ä¼˜é›…åœæœºçš„å¤„ç†ã€‚ä»»åŠ¡é˜Ÿåˆ—ä¸»è¦æ˜¯é€šè¿‡åˆ†å¸ƒå¼é”æ¥é™åˆ¶å¹¶å‘æ•°ï¼Œä»è€Œä¿è¯ä»»åŠ¡èƒ½å¤Ÿè¢«åˆç†åœ°è°ƒåº¦æ‰§è¡Œï¼Œä»è€Œå®ç°é•¿ä»»åŠ¡çš„å¼‚æ­¥è°ƒåº¦æœºåˆ¶ï¼Œå¹¶ä¸”å®ç°ä»»åŠ¡çš„æµé‡å‰Šå³°ã€é”™è¯¯é‡è¯•ç­‰ã€‚</p>
<p>ä¼˜é›…åœæœºçš„å¤„ç†ä¸»è¦æ˜¯é€šè¿‡ä¿¡å·ä¼ é€’æ¥å®ç°çš„ï¼Œä»è€Œä¿è¯è¿›ç¨‹èƒ½å¤Ÿåœ¨æ”¶åˆ°åœæœºä¿¡å·æ—¶è¿›è¡Œèµ„æºçš„æ¸…ç†å’Œä»»åŠ¡çš„å®Œæˆï¼Œé¿å…ä»»åŠ¡çš„ä¸­æ–­å’Œæ•°æ®çš„ä¸ä¸€è‡´é—®é¢˜ã€‚æ­¤å¤–è¿˜å™è¿°äº†çˆ¶å­è¿›ç¨‹é—´çš„ä¿¡å·ä¼ é€’ï¼Œä»¥åŠå®ç°å¿ƒè·³æœºåˆ¶æ¥æ£€æµ‹å®ä¾‹çš„å­˜æ´»çŠ¶æ€ï¼Œä»è€Œä¿è¯åˆ†å¸ƒå¼ç¯å¢ƒä¸‹çš„æœåŠ¡å¥å£®æ€§ã€‚</p>
<h2 data-id="heading-12">æ¯æ—¥ä¸€é¢˜</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FWindRunnerMax%2FEveryDay" target="_blank" title="https://github.com/WindRunnerMax/EveryDay" ref="nofollow noopener noreferrer">github.com/WindRunnerMâ€¦</a></li>
</ul>
<h2 data-id="heading-13">å‚è€ƒ</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.nestjs.com%2Fmodules" target="_blank" title="https://docs.nestjs.com/modules" ref="nofollow noopener noreferrer">docs.nestjs.com/modules</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fdocker-pm2-nodejs%2F" target="_blank" title="https://pm2.keymetrics.io/docs/usage/docker-pm2-nodejs/" ref="nofollow noopener noreferrer">pm2.keymetrics.io/docs/usage/â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpm2.keymetrics.io%2Fdocs%2Fusage%2Fsignals-clean-restart%2F" target="_blank" title="https://pm2.keymetrics.io/docs/usage/signals-clean-restart/" ref="nofollow noopener noreferrer">pm2.keymetrics.io/docs/usage/â€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é©¬æ–¯å…‹å¼€å§‹ç”¨Grokæ›¿ä»£å‘˜å·¥äº†ï¼æœ€æƒ¨éƒ¨é—¨è£å‘˜90%]]></title>    <link>https://juejin.cn/post/7576208176007692340</link>    <guid>https://juejin.cn/post/7576208176007692340</guid>    <pubDate>2025-11-25T06:54:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576208176007692340" data-draft-id="7576245169843765288" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é©¬æ–¯å…‹å¼€å§‹ç”¨Grokæ›¿ä»£å‘˜å·¥äº†ï¼æœ€æƒ¨éƒ¨é—¨è£å‘˜90%"/> <meta itemprop="keywords" content="Grok,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T06:54:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é‡å­ä½"/> <meta itemprop="url" content="https://juejin.cn/user/2858385963484488"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é©¬æ–¯å…‹å¼€å§‹ç”¨Grokæ›¿ä»£å‘˜å·¥äº†ï¼æœ€æƒ¨éƒ¨é—¨è£å‘˜90%
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2858385963484488/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é‡å­ä½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:54:10.000Z" title="Tue Nov 25 2025 06:54:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é©¬æ–¯å…‹å¼€å§‹ç”¨ AI å–ä»£æ‰‹åº•ä¸‹å‘˜å·¥äº†ï¼</p>
<p>è¿™ä¸€æ¬¡ï¼Œä»–æŠŠåˆ€æŒ¥å‘äº† X_ï¼ˆå‰æ¨ç‰¹ï¼‰_â€”â€”ç”¨ Grok å–ä»£ X å‘˜å·¥ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87f6102affb24c49a1d518063873a0f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=GMy8C7Eke1e6MTBixw5LjuwNQ9E%3D" alt="" loading="lazy"/></p>
<p>æ® The Information æ¶ˆæ¯ï¼Œä¸Šä¸ªæœˆæœ‰ä¸¤ä½çŸ¥æƒ…äººå£«å‘ä»–ä»¬é€éœ²ï¼Œé©¬æ–¯å…‹è§£é›‡äº† X å…¬å¸é‡Œè´Ÿè´£æ‰“å‡»åƒåœ¾é‚®ä»¶ã€å½±å“åŠ›è¡ŒåŠ¨ã€éæ³•å†…å®¹ä»¥åŠå…¶ä»–ä¿¡ä»»ä¸å®‰å…¨é—®é¢˜çš„å·¥ç¨‹å›¢é˜Ÿçš„ä¸€åŠæˆå‘˜ã€‚</p>
<p>è¿™ä¸ªå›¢é˜Ÿåœ¨æœ¬è½®è£å‘˜ä¹‹å‰å·²ç¼©å‡è‡³ä¸è¶³ 20 äººï¼Œè€Œè€é©¬åœ¨ 2022 å¹´æ”¶è´­æ¨ç‰¹æ—¶ï¼Œå…¶å›¢é˜Ÿè§„æ¨¡æ›¾è¶…è¿‡ 100 äººã€‚</p>
<p>ä»è¶… 100 äººâ†’ä¸è¶³ 10 äººï¼Œè¶³ä»¥è§å¾—è€é©¬è£å‘˜çš„ç¨‹åº¦æœ‰å¤šæ·±ã€æœ‰å¤šç‹ ã€‚</p>
<p>äº‹å®ä¸Šï¼Œå¦‚æœå›é¡¾è€é©¬ 10 æœˆä¸­æ—¬å‘å¸ƒçš„ä¸€æ¡æ¨æ–‡ï¼Œé‚£ä¹ˆæ­¤æ¬¡æ›å‡ºçš„è£å‘˜æ¶ˆæ¯ä¹Ÿå°±ä¸æ„å¤–äº†ã€‚</p>
<p>å½“æ—¶è€é©¬è¡¨ç¤ºï¼Œè¦åœ¨æœªæ¥å‡ å‘¨å†…å½»åº•ç§»é™¤ X å¯å‘å¼æ¨èç®—æ³•ï¼Œç”± Grok æ¥æ‰‹ï¼Œé€šè¿‡é˜…è¯»å’Œè§‚çœ‹å…¨éƒ¨å†…å®¹æ¥å…¨è‡ªåŠ¨åŒ¹é…ç”¨æˆ·å…´è¶£ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7bdfd9eb91042d6bac910a9a390d5df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=gBAtoMMhUciD8%2BH6u6wN1vxQNtQ%3D" alt="" loading="lazy"/></p>
<p>è¿ç®—æ³•éƒ½å…¨äº¤ç»™ AI äº†ï¼Œé‚£èƒŒåçš„ç®—æ³•å·¥ç¨‹å¸ˆåŠç›¸å…³æ”¯æŒè€…ä»¬è‡ªç„¶ä¹Ÿå°±é¢ä¸´å¤±ä¸šäº†ã€‚</p>
<p>è€ŒæŠ›å¼€ X ç›¸å…³äº‹ä»¶ä¸è°ˆï¼Œè€é©¬å¸ƒä¸‹çš„æ£‹å­å…¶å®è¿˜å¾ˆå¤šã€‚æ¯”å¦‚ä»Šå¹´ 8 æœˆï¼Œç¡¬åˆšå¾®è½¯æˆç«‹å·¨ç¡¬ï¼ˆMacrohardï¼‰ï¼Œå·ç§°è¦ç”¨ AI æŠŠå¾®è½¯äº§å“é‡åšä¸€éã€‚</p>
<p>ä¸€æ—¦æŠŠè¿™äº›äº‹æƒ…æ”¾åˆ°ä¸€èµ·çœ‹ï¼Œè€é©¬èƒŒåçš„æ„å›¾å°±ä¸è¨€è‡ªæ˜äº†â€”â€”</p>
<blockquote>
<p><strong>ç”¨ AI æ›¿ä»£äººåŠ›ï¼Œç”¨è‡ªåŠ¨åŒ–æ›¿ä»£ä¼ ç»Ÿå·¥ç¨‹ã€‚</strong></p>
</blockquote>
<p>å°±æ˜¯è¯´ï¼Œå¤§ BOSS é©¬æ–¯å…‹ï¼Œç°åœ¨å·²ç»ç›¯ä¸Šäº† AI è¿™æŠŠ â€œå°šæ–¹å®å‰‘â€ã€‚</p>
<h2 data-id="heading-0">å¼•å…¥åŒèƒèƒæ–°äººæ‰§è¡Œè€…</h2>
<p>ä¸ºäº†å®Œæˆç”¨ Grok æ”¹é€  X çš„ç›®æ ‡ï¼Œé©¬æ–¯å…‹å°†è¿™æŠŠå‰‘äº¤ç»™äº† xAI ä¸¤ä½åŒèƒèƒæ–°äººæ‰§è¡Œè€…â€”â€”</p>
<p>ç°å¹´ 33 å²ï¼Œæ¥è‡ªä¹Œå…‹å…°çš„ <strong>Dima</strong> å’Œ <strong>Ievgin Soboliev</strong>ã€‚</p>
<p>æ®æ­¤å‰ã€Šè¿çº¿ã€‹çˆ†æ–™ï¼Œè‡ª OpenAI æŒ–èµ°äº† xAI ä¹‹å‰çš„å·¥ç¨‹å¸ˆè´Ÿè´£äºº Uday Ruddarraju å’Œ Mike Dalton ä¹‹åï¼Œè¿™å¯¹åŒèƒèƒå…„å¼Ÿå°±æˆäº† xAI çš„é¡¶çº§å·¥ç¨‹å¸ˆï¼Œå¹¶ç›´æ¥å‘é©¬æ–¯å…‹æ±‡æŠ¥ã€‚</p>
<p><em>ï¼ˆæ³¨ï¼šx å’Œ xAI ä»Šå¹´ 3 æœˆå°±æ­£å¼åˆå¹¶äº†ï¼Œä¸è¿‡å›¢é˜Ÿè¿ä½œä»ç›¸å¯¹ç‹¬ç«‹ï¼‰</em></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/20f3075a12d84e7881dc6c36bdaeb02b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=JKS199vYXBXGZymshL10PlZmb8c%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸Šå›¾çš„ Dima</strong>ï¼Œæ›¾åœ¨å“ˆå°”ç§‘å¤«å›½ç«‹å¤§å­¦æ”»è¯»åº”ç”¨æ•°å­¦ä¸“ä¸šï¼Œæ¯•ä¸šåå»äº†ç¡…è°·å·¥ä½œã€‚</p>
<p>ä¸€å¼€å§‹åŠ å…¥äº† Facebookï¼ˆç° Metaï¼‰ï¼Œåå¿«é€Ÿè¾—è½¬äºè°·æ­Œã€äº‘åŸç”Ÿæ•°æ®åº“å…¬å¸ SingleStoreã€å›½é™…è·¨å¢ƒç”µå•†å¹³å° Joomï¼Œä»¥åŠå…¨çƒé¡¶çº§è‡ªè¥é‡åŒ–äº¤æ˜“å…¬å¸ Jump Trading Groupã€‚</p>
<p>ä» 2017 å¹´å¼€å§‹ï¼Œä»–åˆåŠ å…¥æœºå™¨å­¦ä¹ åˆåˆ›å…¬å¸ Laserlikeï¼Œåæ¥è¯¥å…¬å¸è¢«è‹¹æœæ”¶è´­ã€‚</p>
<p>ä¹Ÿæ˜¯é€šè¿‡è¿™æ¬¡æ”¶è´­ï¼Œä» 2018~2024 å¹´ï¼Œä»–åœ¨è‹¹æœä»äº‹ä¸æœç´¢æœ‰å…³çš„å·¥ä½œã€‚ä¹‹ååˆç¦»å¼€è‹¹æœåŠ å…¥ OpenAIï¼Œä½†ä¸åˆ°ä¸€å¹´ä¾¿ç¦»èŒè½¬æŠ• xAIã€‚</p>
<p><strong>è€Œ Ievgin Soboliev</strong>ï¼Œä¹Ÿæ˜¯åœ¨å“ˆå°”ç§‘å¤«å›½ç«‹å¤§å­¦æ”»è¯»å®Œåº”ç”¨æ•°å­¦åå»äº†ç¡…è°·ã€‚</p>
<p>ä»–ä¸€å¼€å§‹åŠ å…¥äº†æ›¾ç»éå¸¸çŸ¥åçš„ç¨‹åºåŒ–å¹¿å‘ŠæŠ€æœ¯å…¬å¸ Rocket Fuel Incã€‚</p>
<p>åæ¥ä¸çŸ¥é“æ˜¯ä¸æ˜¯å—åˆ° Dima å½±å“ï¼Œå»äº† Meta ä»äº‹å¹¿å‘Šæœºå™¨å­¦ä¹ å·¥ä½œï¼Œä¹‹åäº 2022 å¹´è‡³ 2025 å¹´åœ¨è‹¹æœå·¥ä½œã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dade4377b073421cb814f154ce172d87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=y2N3EKuscVvaowiG0eUNw%2BDTQ20%3D" alt="" loading="lazy"/></p>
<p>æ®çŸ¥æƒ…äººå£«é€éœ²ï¼Œä»Šå¹´å¤å­£ï¼Œä¸¤å…„å¼Ÿåœ¨å¤§è‡´ç›¸åŒçš„æ—¶é—´åŠ å…¥äº† xAIã€‚ä»–ä»¬ç»å¸¸ä¸€èµ·å·¥ä½œï¼ŒåŒäº‹ä»¬ä¹Ÿç›´æ¥ç§°ä»–ä»¬ä¸º â€œé‚£å¯¹åŒèƒèƒâ€ã€‚</p>
<p>è€Œä¸”å…„å¼ŸäºŒäººåœ¨ X å†…éƒ¨ä¸€ç›´æ¨è¡Œå…¸å‹çš„ â€œé©¬æ–¯å…‹æ¨¡å¼â€â€”â€”</p>
<p>è¦æ±‚å·¥ç¨‹å¸ˆåœ¨åŠå…¬å®¤é•¿æ—¶é—´å·¥ä½œï¼ŒåŒ…æ‹¬å‘¨æœ«ï¼›æ ¹é™¤ä½æ•ˆç‡ç°è±¡ï¼›å¹¶è¿…é€Ÿè£æ’¤ä»–ä»¬è®¤ä¸ºä¸å¿…è¦çš„èŒä½ç­‰ã€‚</p>
<p>ç›®å‰å°šä¸æ¸…æ¥š X è¿˜å¯èƒ½è£æ‰å¤šå°‘å·¥ç¨‹å¸ˆã€‚çŸ¥æƒ…äººå£«ç§°ï¼ŒX è‡³å°‘è¿˜æœ‰å¦å¤– 100 åå·¥ç¨‹å¸ˆè´Ÿè´£ä¸åŒéƒ¨åˆ†çš„å·¥ä½œã€‚</p>
<h2 data-id="heading-1">é©¬æ–¯å…‹åˆ°åº•è¦å¹²å•¥ï¼Ÿ</h2>
<p>å¦‚å¼€å¤´æ‰€è¨€ï¼Œæ­¤æ¬¡è£å‘˜æ­£æ˜¯é©¬æ–¯å…‹ â€œç”¨ AI æ›¿ä»£äººåŠ›ï¼Œç”¨è‡ªåŠ¨åŒ–æ›¿ä»£ä¼ ç»Ÿå·¥ç¨‹â€ çš„å…¶ä¸­ä¸€æ­¥ã€‚</p>
<p>ä»–æ›¾å…¬å¼€è¡¨ç¤ºï¼Œå¸Œæœ›è®© X çš„ç®—æ³• â€œå®Œå…¨ AI åŒ–â€ï¼Œå¹¶è®©ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡è¯¢é—® xAI çš„ Grok èŠå¤©æœºå™¨äººæ¥è°ƒæ•´ä»–ä»¬ä¿¡æ¯æµä¸­æ˜¾ç¤ºçš„å†…å®¹ã€‚</p>
<p>è¿™ä¸€æ‰‹æ›´æ–°ï¼Œç›´æ¥è®© Grok ä»æ— æƒ…çš„æ€»ç»“æœºå™¨ç½—ä¼¯ç‰¹ã€X ä¸Šçš„ç»´åŸºç™¾ç§‘ï¼Œä¸Šä½åˆ°äº† X çš„æ€»ç®¡ã€‚</p>
<p>ç°åœ¨ X ä¸Šåˆ°å¤„éƒ½æ˜¯ Grokï¼Œæœªæ¥è¿˜ä¼šæœ‰æ›´å¤š Grokã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼Œä»–è¿˜åœ¨æ¨è¿› â€œå·¨ç¡¬ï¼ˆMacrohardï¼‰è®¡åˆ’â€â€”â€”<strong>ç”¨ AI è‡ªåŠ¨åŒ–è½¯ä»¶å¼€å‘</strong>ã€‚ä»–è¡¨ç¤ºï¼š</p>
<blockquote>
<p>Macrohard æ˜¯ä¸€å®¶çº¯ç²¹çš„ AI è½¯ä»¶å…¬å¸ã€‚<br/>
åŸåˆ™ä¸Šï¼Œé‰´äºå¾®è½¯ç­‰è½¯ä»¶å…¬å¸æœ¬èº«ä¸ç”Ÿäº§ä»»ä½•ç‰©ç†ç¡¬ä»¶ï¼Œåº”è¯¥æœ‰å¯èƒ½å®Œå…¨ç”¨ AI æ¨¡æ‹Ÿå®ƒä»¬ã€‚</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/caed80d962ef446f945ee54ae6c18693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=biF%2B0BvtyIH0klgfyeAHshmTVH0%3D" alt="" loading="lazy"/></p>
<p>ä» Macrohard å•†æ ‡æ³¨å†Œå†…å®¹æ¥çœ‹ï¼Œæˆ‘ä»¬å¯ä»¥æç‚¼ä»¥ä¸‹å‡ ä¸ªå…³é”®è¦ç‚¹ï¼š</p>
<ul>
<li>
<p>ç”¨äºç”Ÿæˆäººå·¥æ™ºèƒ½è¯­éŸ³å’Œæ–‡æœ¬çš„å¯ä¸‹è½½è½¯ä»¶</p>
</li>
<li>
<p>ç”¨äºç¼–å†™ä»£ç ã€è®¾è®¡å’Œè¿è¡Œè§†é¢‘æ¸¸æˆçš„äººå·¥æ™ºèƒ½å·¥å…·</p>
</li>
<li>
<p>å›¾åƒã€è§†é¢‘å’Œè¯­è¨€ç†è§£ç³»ç»Ÿ</p>
</li>
</ul>
<p>ä¸€å¥è¯ï¼Œé©¬æ–¯å…‹è¿™æ˜¯è¦ç”¨ AIï¼ŒæŠŠå¾®è½¯æ›¾ç»åšè¿‡çš„äº‹æƒ…é‡åšä¸€éã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d740ef98d49e463192cb8b8e33c8757e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=hY5KLo0SlLiPrvBF5JYUL44Rzdk%3D" alt="" loading="lazy"/></p>
<p>è€Œä¸”æ®è€é©¬è‡ªæ›ï¼Œä»–è¿˜æŠŠå°ç€ Macrohard çš„æ ‡è¯­ï¼Œæ¶‚åœ¨äº† xAI ä½äºå­Ÿè²æ–¯çš„æœ€å¤§æ•°æ®ä¸­å¿ƒçš„å±‹é¡¶ä¸Šã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4ea971c259934a11b2d55f2eb69aa53f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=OtxfEuaIQ0xLXHl2mRYLilfbuCA%3D" alt="" loading="lazy"/></p>
<p>æ˜¾è€Œæ˜“è§ï¼Œä¸è®ºæ˜¯è£å‘˜è¿˜æ˜¯ Macrohard è®¡åˆ’ï¼Œé©¬æ–¯å…‹éƒ½åœ¨å°½åŠ›ç”¨ AI æ”¹é€ ä»–åä¸‹çš„å…¬å¸ã€‚</p>
<p>è€Œè¿™ç§ç¨æ˜¾æ¿€è¿›çš„ AI è‡³ä¸Šæˆ˜ç•¥ï¼Œæ‰€å¸¦æ¥çš„é£é™©ä¹Ÿä¸å®¹è€é©¬å¿½è§†ã€‚</p>
<p>æœ€ç›´æ¥çš„çŸ›ç›¾åœ¨äºï¼Œè´Ÿè´£å¹³å°å®‰å…¨çš„å›¢é˜Ÿä¸ç”Ÿæˆå†…å®¹çš„ AI ç³»ç»Ÿä¹‹é—´ï¼Œå‡ºç°äº†è‡´å‘½çš„ â€œæƒè´£ä¸å¯¹ç­‰â€ã€‚</p>
<p>å›¢é˜Ÿè´Ÿè´£æ¸…ç†è¿è§„å†…å®¹ï¼Œä½†å¯¹ Grok ä¼šç”Ÿæˆä»€ä¹ˆå´æ¯«æ— æ§åˆ¶æƒï¼Œè¿™å¯¼è‡´ä»–ä»¬ç›¸å½“è¢«åŠ¨ã€‚</p>
<p>è€Œä¸”ç”±äº X å’Œ xAI åˆå¹¶åå›¢é˜Ÿå„è‡ªç‹¬ç«‹ï¼Œå½“å®‰å…¨å›¢é˜Ÿæ­£åœ¨æ¸…ç† Grok ç”Ÿæˆçš„æœ‰å®³å†…å®¹æ—¶ï¼ŒåŒä¸€å…¬å¸çš„ xAI å›¢é˜Ÿå¯èƒ½æ­£åœ¨è®­ç»ƒ Grok å˜å¾—æ›´å…· â€œåˆ›é€ æ€§â€â€”â€”</p>
<p>è¿™ç§å†…éƒ¨ç›®æ ‡çš„ä¸ä¸€è‡´ï¼Œä¹Ÿå®¹æ˜“è®©å®‰å…¨é—®é¢˜é™·å…¥æ— äººè´Ÿè´£çš„çœŸç©ºåœ°å¸¦ã€‚</p>
<p>æ­¤å¤–ï¼Œé©¬æ–¯å…‹çš„è£å‘˜è®¡åˆ’ä¹Ÿå½±å“åˆ°äº†ä¸€äº›å…³é”®é¡¹ç›®ã€‚å¤šå¹´æ¥ï¼Œé©¬æ–¯å…‹ä¸€ç›´å¸Œæœ›åœ¨ X ä¸Šæ¨å‡ºä¸€é¡¹æ”¯ä»˜æœåŠ¡ â€œX Moneyâ€ï¼Œä½†å…¬å¸æœªèƒ½äº‰å–åˆ°ä¸€äº›å…³é”®å·ç›‘ç®¡æœºæ„çš„æ”¯æŒï¼Œå¯¼è‡´è¿™ä¸€è®¡åˆ’å—é˜»ã€‚</p>
<p>æ®æ‚‰ï¼Œé‡‘èç›‘ç®¡æœºæ„çš„ä¸€ä¸ªé‡è¦è€ƒé‡ç‚¹æ˜¯ï¼Œæ”¯ä»˜å…¬å¸æ˜¯å¦æ‹¥æœ‰ç¨³å®šçš„é¢†å¯¼å±‚å’Œè¶³å¤Ÿçš„å‘˜å·¥æ¥æ”¯æŒå®¢æˆ·å¹¶æ‰“å‡»æ¬ºè¯ˆã€‚</p>
<p>è€Œ X Money å›¢é˜Ÿï¼Œåœ¨è¿‡å»ä¸€å¹´ä¸­ä¸€ç›´é¢ä¸´é¢‘ç¹çš„äººå‘˜æµåŠ¨ã€‚</p>
<p>æ€»ä¹‹ï¼Œé©¬æ–¯å…‹çš„ AI æ”¹é€ è®¡åˆ’åœ¨ç å‘äººåŠ›æˆæœ¬çš„åŒæ—¶ï¼Œä¹Ÿæ­£åœ¨ç ä¼¤å¹³å°å®‰å…¨çš„æ ¹åŸºã€æ ¸å¿ƒä¸šåŠ¡çš„æœªæ¥ã€‚</p>
<p>AI è¿™æŠŠå‰‘ï¼Œå…¶åŒåˆƒå·²ç°ã€‚</p>
<h2 data-id="heading-2">One More Thing</h2>
<p>è¯´åˆ°è£å‘˜ï¼Œè€é©¬ä»Šå¹´ 9 æœˆè¿˜è¡€è£äº†ä¸€æ³¢ <strong>xAI å›¢é˜Ÿ</strong>ã€‚</p>
<p>xAI æ˜¯è€é©¬ 2023 å¹´åˆ›åŠçš„ AI åˆåˆ›ä¼ä¸šï¼Œæ——ä¸‹ä¸»è¦äº§å“å°±æ˜¯ Grok æ¨¡å‹ï¼Œè€Œ 9 æœˆè¢«è£çš„å°±æ˜¯å¸®å¿™è®­ç»ƒ Grok æ¨¡å‹çš„æ•°æ®æ ‡æ³¨å›¢é˜Ÿã€‚</p>
<p>æ®éå®˜æ–¹ç»Ÿè®¡ï¼Œå½“æ—¶è¯¥å›¢é˜Ÿæœ‰è¶…è¿‡ 500 åå‘˜å·¥_ï¼ˆçº¦å æ•°æ®æ ‡æ³¨å›¢é˜Ÿçš„ 1/3ï¼‰_è¢«é€šçŸ¥å·é“ºç›–èµ°äººã€‚</p>
<p>è€Œè£æ¥è£å»ï¼Œä½ çŒœæ€ä¹ˆç€ï¼Ÿç•™ä¸‹æ¥çš„å‡ ä¹å…¨æ˜¯åäººäº†ã€‚</p>
<p>å½“æ—¶æœ‰ä¸€å¼  xAI å›¢é˜Ÿåˆå½±åœ¨ç¤¾äº¤åª’ä½“ä¸Šç–¯ä¼ ï¼ŒåŸå› æ˜¯ç…§ç‰‡ä¸­å‡ ä¹å…¨æ˜¯ä¸œäºšé¢å­”ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0f25900b9134413384034f9c4fbd8f05~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=SYsG4RdidYTc0ngihRI8W5Svzt0%3D" alt="" loading="lazy"/></p>
<p>è€Œå°±åœ¨ Grok 4 å‘å¸ƒåä¸ä¹…ï¼Œä¸€ä½è‡ªç§°æ˜¯ â€œGrok é¡¹ç›®å”¯ä¸€ç™½äººå‚ä¸è€…â€ çš„å‘˜å·¥åœ¨ X ä¸Šå‘æ–‡ï¼š</p>
<blockquote>
<p>ä»Šå¤©æˆ‘è¢« @X è§£é›‡äº†ï¼Œæˆ‘æ˜¯å”¯ä¸€ä¸€ä¸ªå‚ä¸ @grok é¡¹ç›®çš„ç™½äººâ€¦â€¦</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28ec1b9f724a4699a43944a867d6b82d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YeP5a2Q5L2N:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764658450&amp;x-signature=S8NLEez3Vi1aPE5hSxDWkLu%2FnAA%3D" alt="" loading="lazy"/></p>
<p>è™½ç„¶æœªç¡®è®¤è¿™æ¡æ¨æ–‡çš„çœŸå®æ€§ï¼Œä½†ä¾§é¢è¯´æ˜è€é©¬å¯èƒ½ç¡®å®åçˆ±åäººï¼ˆbushiã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<br/>
[1]<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.theinformation.com%2Farticles%2Ftwins-pushing-elon-musks-plans-replace-x-staff-grok" target="_blank" title="https://www.theinformation.com/articles/twins-pushing-elon-musks-plans-replace-x-staff-grok" ref="nofollow noopener noreferrer">www.theinformation.com/articles/twâ€¦</a><br/>
[2]<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzIzNjc1NzUzMw%3D%3D%26mid%3D2247820813%26idx%3D1%26sn%3D09a31d3cb6ee4b280834af773565656f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&amp;mid=2247820813&amp;idx=1&amp;sn=09a31d3cb6ee4b280834af773565656f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/0-ShEPVjcâ€¦</a><br/>
[3]<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzIzNjc1NzUzMw%3D%3D%26mid%3D2247834533%26idx%3D2%26sn%3D0e35b3df7c0f3b4ac919145f570aabf4%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzIzNjc1NzUzMw==&amp;mid=2247834533&amp;idx=2&amp;sn=0e35b3df7c0f3b4ac919145f570aabf4&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">mp.weixin.qq.com/s/v8mM_4FnKâ€¦</a></p>
<p><strong>æ¬¢è¿åœ¨è¯„è®ºåŒºç•™ä¸‹ä½ çš„æƒ³æ³•ï¼</strong></p>
<p>â€”Â <strong>å®Œ</strong>Â â€”</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æŠ€æœ¯å¤ç›˜ï¼šSolon-MCP æ—¥å¿—ç»Ÿä¸€é…ç½®èƒŒåçš„æŠ€æœ¯æ¶æ„åˆ†æ]]></title>    <link>https://juejin.cn/post/7576057623742119978</link>    <guid>https://juejin.cn/post/7576057623742119978</guid>    <pubDate>2025-11-24T08:18:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576057623742119978" data-draft-id="7575829296452648970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æŠ€æœ¯å¤ç›˜ï¼šSolon-MCP æ—¥å¿—ç»Ÿä¸€é…ç½®èƒŒåçš„æŠ€æœ¯æ¶æ„åˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2025-11-24T08:18:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Asthenian"/> <meta itemprop="url" content="https://juejin.cn/user/2685482018803200"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æŠ€æœ¯å¤ç›˜ï¼šSolon-MCP æ—¥å¿—ç»Ÿä¸€é…ç½®èƒŒåçš„æŠ€æœ¯æ¶æ„åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2685482018803200/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Asthenian
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T08:18:37.000Z" title="Mon Nov 24 2025 08:18:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. é—®é¢˜çš„èµ·å› ï¼šä¸€æ¬¡â€œå±è”½æŠ¥é”™â€çš„ä»»åŠ¡</h3>
<p>æ•…äº‹çš„å¼€å§‹éå¸¸ç®€å•ã€‚æœ€è¿‘åœ¨è°ƒè¯•é¡¹ç›®æ—¶ï¼Œæˆ‘çš„ Mentor (MT) è®©æˆ‘å»å¤„ç†ä¸€ä¸‹æ§åˆ¶å°çš„æ—¥å¿—ã€‚</p>
<p>åŸå› æ˜¯é¡¹ç›®å¼•å…¥äº† <code>solon-mcp</code> ç›¸å…³ç»„ä»¶ï¼Œæ¯æ¬¡å»ºç«‹è¿æ¥æ—¶éƒ½ä¼šè¾“å‡ºä¸€å † <code>WARN</code> çº§åˆ«çš„å¼‚å¸¸æ—¥å¿—ã€‚ç»è¿‡æ’æŸ¥ï¼Œè¿™äº›å¼‚å¸¸å¹¶ä¸å½±å“å®é™…åŠŸèƒ½çš„é“¾è·¯ï¼Œå±äºæ¡†æ¶å†…éƒ¨çš„â€œå™ªéŸ³â€ã€‚ä¸ºäº†ä¿æŒæ§åˆ¶å°æ¸…çˆ½ï¼ŒMT è®©æˆ‘æŠŠå®ƒçš„æ—¥å¿—çº§åˆ«è°ƒé«˜ï¼Œå±è”½æ‰è¿™äº›è­¦å‘Šã€‚</p>
<p>æ“ä½œå¾ˆç®€å•ï¼Œæˆ‘ç†Ÿç»ƒåœ°æ‰“å¼€ <code>application.yml</code>ï¼ŒåŠ ä¸Šäº†ä¸€è¡Œé…ç½®ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">io.modelcontextprotocol:</span> <span class="hljs-string">ERROR</span> <span class="hljs-comment"># å±è”½ WARNï¼Œåªçœ‹ ERROR</span>
</code></pre>
<p>é‡å¯æœåŠ¡ï¼Œä¸–ç•Œæ¸…é™äº†ã€‚</p>
<p>ä»»åŠ¡è™½ç„¶å®Œæˆäº†ï¼Œä½†æˆ‘ç›¯ç€ <code>application.yml</code> é‡Œçš„è¿™å—é…ç½®åŒºåŸŸï¼Œçªç„¶é™·å…¥äº†æ²‰æ€ï¼š</p>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">logging:</span>
  <span class="hljs-attr">level:</span>
    <span class="hljs-attr">root:</span> <span class="hljs-string">INFO</span>
    <span class="hljs-attr">com.testjob.sls:</span> <span class="hljs-string">DEBUG</span>          <span class="hljs-comment"># æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç </span>
    <span class="hljs-attr">com.xxl.job:</span> <span class="hljs-string">INFO</span>             <span class="hljs-comment"># ç¬¬ä¸‰æ–¹ä»»åŠ¡è°ƒåº¦æ¡†æ¶</span>
    <span class="hljs-attr">io.modelcontextprotocol:</span> <span class="hljs-string">ERROR</span> <span class="hljs-comment"># åˆšåˆšé…ç½®çš„ MCP åè®®åº“</span>
</code></pre>
<p><strong>æˆ‘ä¸ç¦äº§ç”Ÿäº†ä¸€ä¸ªç–‘é—®ï¼š</strong><br/>
ä¸ºä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆ <code>Solon-MCP</code>ã€<code>XXL-JOB</code>ã€<code>Spring</code> ä»¥åŠæˆ‘ä»¬è‡ªå·±å†™çš„ä¸šåŠ¡ä»£ç ï¼Œæ˜æ˜æ˜¯å®Œå…¨ä¸åŒå›¢é˜Ÿã€ä¸åŒæ—¶é—´å¼€å‘çš„ç»„ä»¶ï¼Œå´éƒ½èƒ½è¢«è¿™åŒä¸€ä¸ª <code>logging</code> é…ç½®é¡¹æ‰€æ”¯é…ï¼Ÿ</p>
<p>æ˜¯ä¸æ˜¯åœ¨è¿™ç®€å•çš„ YAML é…ç½®èƒŒåï¼Œéšè—ç€æŸç§ç»Ÿä¸€çš„â€œæ½œè§„åˆ™â€æˆ–åº•å±‚æ¶æ„è®¾è®¡ï¼Ÿ</p>
<p>å¸¦ç€è¿™ä¸ªç–‘é—®ï¼Œæˆ‘å†³å®šæ·±æŒ–ä¸€ä¸‹ Java æ—¥å¿—ä½“ç³»èƒŒåçš„ç§˜å¯†ã€‚</p>
<hr/>
<h3 data-id="heading-1">2. ç°è±¡è§‚å¯Ÿï¼šä¸‡æ³•å½’ä¸€</h3>
<p>åœ¨åˆ†æä¾èµ–æ ‘å’Œæºç åï¼Œæˆ‘å‘ç°è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„<strong>ä»æ··ä¹±åˆ°ç»Ÿä¸€</strong>çš„æ¶æ„è®¾è®¡æ¡ˆä¾‹ã€‚</p>
<p>æ‰€æœ‰çš„ç»„ä»¶ï¼Œæ— è®ºå†…éƒ¨å®ç°å¦‚ä½•ï¼Œæœ€ç»ˆéƒ½â€œè‡£æœâ€äºæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶ã€‚è¿™è¯´æ˜åœ¨æˆ‘ä»¬çš„æŠ€æœ¯æ ˆä¸­ï¼Œå­˜åœ¨ä¸€ä¸ª<strong>ç»Ÿä¸€çš„æ—¥å¿—é—¨é¢ï¼ˆLogging Facadeï¼‰</strong> ï¼Œå®ƒåƒä¸€ä¸ªå¤–äº¤å®˜ä¸€æ ·ï¼Œç»Ÿä¸€ç®¡ç†äº†æ‰€æœ‰ç»„ä»¶çš„å¯¹å¤–å‘å£°æ¸ é“ã€‚</p>
<hr/>
<h3 data-id="heading-2">3. æŠ€æœ¯æ¶æ„æ‹†è§£</h3>
<p>é€šè¿‡æŸ¥é˜…èµ„æ–™å’Œæºç åˆ†æï¼Œæˆ‘å°†è¿™ä¸ªæœºåˆ¶æ‹†è§£ä¸ºä¸‰ä¸ªæ ¸å¿ƒå±‚é¢ï¼š</p>
<h4 data-id="heading-3">3.1 ç¬¬ä¸€å±‚ï¼šé—¨é¢æ¨¡å¼ï¼ˆFacade Patternï¼‰â€”â€” åˆ¶å®šæ ‡å‡†</h4>
<p>åœ¨ä»£ç å±‚é¢ï¼Œæˆ‘å‘ç°æ— è®ºæ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ä»£ç ï¼Œè¿˜æ˜¯ <code>solon-mcp</code> çš„æºç ï¼Œè·å– Logger çš„æ–¹å¼éƒ½æƒŠäººçš„ä¸€è‡´ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// å¤§å®¶éƒ½ä½¿ç”¨çš„æ˜¯ SLF4J çš„æ¥å£ï¼Œè€Œä¸æ˜¯å…·ä½“çš„ Logback æˆ– Log4j</span>
<span class="hljs-keyword">import</span> org.slf4j.Logger;
<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">McpAsyncServer</span> {
    <span class="hljs-comment">// é¢å‘æ¥å£ç¼–ç¨‹ï¼Œè€Œéé¢å‘å®ç°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> Logger logger = LoggerFactory.<span class="hljs-built_in">getLogger</span>(McpAsyncServer.<span class="hljs-keyword">class</span>);
}
</code></pre>
<p>è¿™å°±æ˜¯<strong>é—¨é¢æ¨¡å¼</strong>çš„åº”ç”¨ã€‚<strong>SLF4J (Simple Logging Facade for Java)</strong> å°±æ˜¯è¿™ä¸ªâ€œé—¨é¢â€ã€‚</p>
<ul>
<li><strong>å¯¹äºç»„ä»¶å¼€å‘è€…ï¼ˆå¦‚ MCP çš„ä½œè€…ï¼‰</strong> ï¼šæˆ‘åªéœ€è¦è°ƒç”¨ SLF4J çš„ API æ‰“å°æ—¥å¿—ï¼Œä¸éœ€è¦å…³å¿ƒä½¿ç”¨è€…åˆ°åº•ç”¨çš„æ˜¯ Logback è¿˜æ˜¯ Log4j2ã€‚</li>
<li><strong>å¯¹äºä½¿ç”¨è€…ï¼ˆæˆ‘ä»¬ï¼‰</strong> ï¼šæˆ‘ä»¬åªéœ€è¦é…ç½® SLF4J çš„å…·ä½“å®ç°ï¼Œå°±èƒ½æ§åˆ¶æ‰€æœ‰ç”¨äº† SLF4J çš„ç»„ä»¶ã€‚</li>
</ul>
<h4 data-id="heading-4">3.2 ç¬¬äºŒå±‚ï¼šå·å¤©æ¢æ—¥ â€”â€” æ¡¥æ¥å™¨ï¼ˆBridgingï¼‰</h4>
<p>ä½†æ˜¯ï¼Œå¦‚æœå¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“æ¯”è¾ƒè€ï¼ˆæ¯”å¦‚ç”¨äº† Log4j 1.xï¼‰æˆ–è€…æ¯”è¾ƒç‰¹ç«‹ç‹¬è¡Œï¼ˆç”¨äº† Java åŸç”Ÿçš„ JULï¼‰æ€ä¹ˆåŠï¼Ÿå®ƒä»¬å¹¶æ²¡æœ‰ä½¿ç”¨ SLF4J å•Šã€‚</p>
<p>è¿™æ—¶å€™ï¼ŒJava æ—¥å¿—ç”Ÿæ€çš„**æ¡¥æ¥å™¨ï¼ˆBridgingï¼‰**å°±ç™»åœºäº†ã€‚</p>
<p>åœ¨æˆ‘ä»¬çš„ <code>pom.xml</code> ä¾èµ–æ ‘ä¸­ï¼Œæˆ‘å‘ç°äº†è¿™äº›â€œé—´è°â€åŒ…çš„å­˜åœ¨ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å°† Log4j çš„è°ƒç”¨æ‹¦æˆªä¸‹æ¥ï¼Œè½¬å‘ç»™ SLF4J --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j-over-slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-comment">&lt;!-- å°† Java åŸç”Ÿ Logging æ‹¦æˆªä¸‹æ¥ï¼Œè½¬å‘ç»™ SLF4J --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jul-to-slf4j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<p><strong>åŸç†æ€»ç»“</strong>ï¼šè¿™äº›æ¡¥æ¥å™¨é€šè¿‡åŒååŒ…æ›¿æ¢æˆ–æ‹¦æˆªçš„æ–¹å¼ï¼ŒæŠŠå…¶ä»–æ—¥å¿—æ¡†æ¶çš„ API è°ƒç”¨ï¼Œâ€œéª—â€è¿‡æ¥è½¬å‘ç»™ SLF4Jã€‚è¿™å°±å®ç°äº†â€œè™½ç„¶ä½ æ˜¯ä¸åŒé—¨æ´¾ï¼Œä½†æœ€ç»ˆéƒ½èµ°åŒä¸€ä¸ªå‡ºå£â€ã€‚</p>
<h4 data-id="heading-5">3.3 ç¬¬ä¸‰å±‚ï¼šè‡ªåŠ¨é…ç½®é­”æ³• â€”â€” Spring Boot / Solon çš„ç»Ÿç­¹</h4>
<p>æœ€åï¼Œä¸ºä»€ä¹ˆ <code>application.yml</code> èƒ½ç”Ÿæ•ˆï¼Ÿ</p>
<p>è¿™æ˜¯æ¡†æ¶ï¼ˆSpring Boot æˆ– Solonï¼‰æä¾›çš„**è‡ªåŠ¨åŒ–é…ç½®ï¼ˆAuto Configurationï¼‰**èƒ½åŠ›ã€‚ä»¥ Spring Boot ä¸ºä¾‹ï¼Œå¯åŠ¨æ—¶ä¼šå‘ç”Ÿä»¥ä¸‹è¿‡ç¨‹ï¼š</p>
<ol>
<li><strong>æ‰«æ</strong>ï¼š<code>LoggingApplicationListener</code> æ‰«æ Classpathï¼Œå‘ç°å­˜åœ¨ <code>logback-classic</code> åŒ…ã€‚</li>
<li><strong>å®ä¾‹åŒ–</strong>ï¼šåˆå§‹åŒ– <code>LogbackLoggingSystem</code>ã€‚</li>
<li><strong>åŠ è½½é…ç½®</strong>ï¼šè¯»å– <code>application.yml</code> ä¸­çš„ <code>logging.level.*</code>ã€‚</li>
<li><strong>åº”ç”¨</strong>ï¼šå°†è¿™äº›é…ç½®åŠ¨æ€è®¾ç½®åˆ° Logback çš„ä¸Šä¸‹æ–‡ä¸­ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä¼ªä»£ç æ¼”ç¤ºæ¡†æ¶çš„é…ç½®é€»è¾‘</span>
<span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">configure</span>(<span class="hljs-params">LoggingSystem system</span>) {
    <span class="hljs-title class_">String</span> mcpLevel = environment.<span class="hljs-title function_">getProperty</span>(<span class="hljs-string">"logging.level.io.modelcontextprotocol"</span>);
    <span class="hljs-comment">// æœ€ç»ˆè°ƒç”¨åº•å±‚ Logback çš„ API è®¾ç½®çº§åˆ«</span>
    system.<span class="hljs-title function_">setLogLevel</span>(<span class="hljs-string">"io.modelcontextprotocol"</span>, <span class="hljs-title class_">LogLevel</span>.<span class="hljs-property">ERROR</span>);
}
</code></pre>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æ”¹ä¸€è¡Œé…ç½®ï¼Œå°±èƒ½è¿œç¨‹æ§åˆ¶æ·±åŸ‹åœ¨ jar åŒ…é‡Œçš„ <code>solon-mcp</code> çš„è¡Œä¸ºäº†ã€‚</p>
<hr/>
<h3 data-id="heading-6">4. æ·±åº¦æ€è€ƒï¼šæ¶æ„è®¾è®¡çš„é­…åŠ›</h3>
<p>è¿™æ¬¡æ’æŸ¥è®©æˆ‘æ„è¯†åˆ°ï¼Œä¸€ä¸ªä¼˜ç§€çš„æ¶æ„è®¾è®¡ï¼ˆå¦‚ Java çš„æ—¥å¿—ä½“ç³»ï¼‰ä½“ç°äº†ä»¥ä¸‹åŸåˆ™ï¼š</p>
<ol>
<li><strong>ä¾èµ–å€’ç½®åŸåˆ™ (DIP)</strong> ï¼š<br/>
ä¸Šå±‚åº”ç”¨ä¸åº”è¯¥ä¾èµ–åº•å±‚æ—¥å¿—å®ç°ï¼ŒäºŒè€…éƒ½åº”è¯¥ä¾èµ–æŠ½è±¡ï¼ˆSLF4Jï¼‰ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬èƒ½éšæ„åˆ‡æ¢ Logback æˆ– Log4j2 è€Œä¸ç”¨æ”¹ä¸€è¡Œä»£ç ã€‚</li>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦» (SoC)</strong> ï¼š</li>
</ol>
<ul>
<li>
<ul>
<li><strong>åº“å¼€å‘è€…</strong>ï¼ˆMCPå›¢é˜Ÿï¼‰åªå…³æ³¨â€œæˆ‘è¦æ‰“å°ä»€ä¹ˆä¿¡æ¯â€ã€‚</li>
<li><strong>åº”ç”¨å¼€å‘è€…</strong>ï¼ˆæˆ‘ï¼‰åªå…³æ³¨â€œæˆ‘è¦çœ‹ä»€ä¹ˆçº§åˆ«çš„æ—¥å¿—â€ã€‚</li>
<li><strong>è¿ç»´äººå‘˜</strong>åªå…³æ³¨â€œæ—¥å¿—å­˜åˆ°å“ªé‡Œï¼Œä¿ç•™å‡ å¤©â€ã€‚<br/>
å¤§å®¶å„å¸å…¶èŒï¼Œé€šè¿‡æ ‡å‡†æ¥å£è§£è€¦ã€‚</li>
</ul>
</li>
</ul>
<ol start="3">
<li><strong>å¾®å†…æ ¸æ¶æ„æ€æƒ³</strong>ï¼š<br/>
SLF4J å°±åƒä¸€ä¸ªå¾®å†…æ ¸ï¼Œå„ç§é€‚é…å™¨å’Œå®ç°å°±åƒæ’ä»¶ã€‚è¿™ç§ç”Ÿæ€å…¼å®¹æ€§ï¼Œæ˜¯ Java å·¥ç¨‹åŒ–å¼ºå¤§çš„é‡è¦åŸå› ã€‚</li>
</ol>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterï¼šå¦‚ä½•æ›´æ”¹é»˜è®¤å­—ä½“]]></title>    <link>https://juejin.cn/post/7575367791273951270</link>    <guid>https://juejin.cn/post/7575367791273951270</guid>    <pubDate>2025-11-24T01:42:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7575367791273951270" data-draft-id="7573899782803750958" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterï¼šå¦‚ä½•æ›´æ”¹é»˜è®¤å­—ä½“"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-24T01:42:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="JarvanMo"/> <meta itemprop="url" content="https://juejin.cn/user/2348212565845704"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterï¼šå¦‚ä½•æ›´æ”¹é»˜è®¤å­—ä½“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2348212565845704/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    JarvanMo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-24T01:42:27.000Z" title="Mon Nov 24 2025 01:42:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-24
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘çš„é¡¹ç›®ç›®å‰åœ¨ Windows ä¸Šè¿è¡Œå¹¶æ˜¾ç¤ºæ³¨å†Œé¡µé¢ã€‚è¿™ä¸ªé¡µé¢æœ¬èº«æœ‰ç‚¹è¿‡æ—¶äº†ã€‚æœ€è¿‘çš„è¶‹åŠ¿æ˜¯å…ˆæ˜¾ç¤º OAuth ä¾›åº”å•†çš„æŒ‰é’®ï¼Œå› ä¸ºå¤§å¤šæ•°ç”¨æˆ·æ›´å–œæ¬¢å®ƒä»¬ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92dc54a305dc49fdb4149d7b11c5823a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=3VTJmxYD2gD7rAy%2BuH0F47AJBs8%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†æ˜¯ï¼Œå¯¹äºè¿™ç¯‡æ–‡ç« æ¥è¯´ï¼Œè¿™æ ·æ²¡é—®é¢˜ã€‚</p>
<p>å› ä¸ºå®ƒè¿è¡Œåœ¨ Windows ä¸Šï¼Œæ‰€ä»¥é»˜è®¤å­—ä½“æ˜¯ SegoeUIã€‚åœ¨ Android å’Œ Web ä¸Šé»˜è®¤æ˜¯ Robotoï¼Œåœ¨ iOS ä¸Šé»˜è®¤æ˜¯ SF Proã€‚</p>
<p>æˆ‘ä»¬ä¸ºä»€ä¹ˆè¦æ›´æ”¹å®ƒï¼Ÿå®é™…ä¸Šæˆ‘ä»¬ä¸å¿…æ›´æ”¹ã€‚</p>
<p>ä½†æˆ‘çš„ç†ç”±æ˜¯ï¼š</p>
<ul>
<li><strong>åœ¨æ‰€æœ‰å¹³å°ä¸Šä½¿ç”¨ç›¸åŒçš„å­—ä½“ã€‚</strong></li>
<li><strong>ä¸ä½¿ç”¨é»˜è®¤å­—ä½“ï¼Œå› ä¸ºä½¿ç”¨é»˜è®¤å­—ä½“çš„åº”ç”¨ç¨‹åºçœ‹èµ·æ¥å¾ˆâ€œé»˜è®¤â€ã€‚</strong></li>
<li><strong>æˆ‘æŸ¥çœ‹äº† Google Fonts å¹¶é€‰æ‹©äº† Open Sansã€‚</strong></li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ebf04425a884441aa50a89eb1d6cb7a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=2be10J%2B2JMfPEhfg2Vv0CcxwYlk%3D" alt="image.png" loading="lazy"/></p>
<p>å®ƒæ¯” Roboto æ›´é€æ°”ã€æ›´è½»ç›ˆä¸€äº›ï¼Œæ˜¯ç»§ Roboto ä¹‹åç¬¬äºŒå—æ¬¢è¿çš„ Google å­—ä½“ã€‚ä½†ç”±äº Roboto æ˜¯ Android ä¸Šçš„é»˜è®¤å­—ä½“ï¼ˆå¹¶è¢« Google å¹¿æ³›ä½¿ç”¨ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å‡è®¾ Open Sans åœ¨æ²¡æœ‰ Google å½±å“çš„æƒ…å†µä¸‹ä¼šæ˜¯æœ€å—æ¬¢è¿çš„ã€‚</p>
<p>å®ƒä¹Ÿæ¯” Apple ä¸“æœ‰çš„ SF Pro æ›´è½»ç›ˆã€æ›´é€æ°”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c9a3267eb34e8fb25efc5a94e4ea24~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=fH8Kf60H8fsiBSd6qbNhUdVLsII%3D" alt="SF Pro" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/343e885196c2405eb64e513264dde2df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=L2vki1n0ITS%2BNBNQc%2BWa3vlSt9U%3D" alt="Open Sans" loading="lazy"/></p>
<p>é‚£ä¹ˆï¼Œå¦‚ä½•ç”¨ Open Sans æ›¿æ¢é»˜è®¤å­—ä½“å‘¢ï¼Ÿ</p>
<p>æˆ‘æ‰€çŸ¥é“çš„ï¼š</p>
<ul>
<li>ä¸‹è½½å­—ä½“å¹¶è§£å‹ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a2e6ed538a674b5985aec0982b54bb39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=UA%2BiP34fS1bL%2FIq%2BHvxjBoDRl30%3D" alt="image.png" loading="lazy"/></p>
<p><strong>æœ‰ä¸¤ç§</strong>å¯å˜å­—ä½“ï¼ˆVariable Fontsï¼‰ï¼š<strong>å¸¸è§„</strong>ï¼ˆregularï¼‰å’Œ<strong>æ–œä½“</strong>ï¼ˆitalicï¼‰ã€‚<strong>å¯å˜</strong>æ„å‘³ç€å®ƒçš„<strong>å®½åº¦</strong>å’Œ<strong>å­—é‡</strong>ï¼ˆweightï¼‰å¯ä»¥è¢«ä»£ç <strong>åŠ¨æ€åœ°</strong>æ”¹å˜ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">TextStyle(  
fontFamily: <span class="hljs-string">'OpenSans'</span>,  
fontVariations: [  
FontVariation(<span class="hljs-string">'wdth'</span>, <span class="hljs-number">77</span>),  
FontVariation(<span class="hljs-string">'wght'</span>, <span class="hljs-number">477</span>),  
]);
</code></pre>
<p>è¿˜æœ‰ä¸€ä¸ª <code>static</code> æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æ˜¯é™æ€å­—ä½“ã€‚å¯å˜å­—ä½“æ–‡ä»¶æ˜¯ 500 KBï¼Œè€Œé™æ€å­—ä½“åªæœ‰ 130 KBã€‚å¦‚æœä½ æœ€ç»ˆåªä½¿ç”¨ä¸€ä¸ªå˜ä½“ï¼Œä¾‹å¦‚ Open Sans Mediumï¼Œä½ å¯ä»¥èŠ‚çœä¸€äº›ç©ºé—´ã€‚ä¸è¿‡ï¼Œæˆ‘ä¸ä¼šä¸ºæ­¤è´¹å¿ƒã€‚</p>
<ul>
<li>
<ol start="2">
<li>å°†å…¶æ”¾å…¥ <code>assets</code> æ–‡ä»¶å¤¹ã€‚</li>
</ol>
</li>
</ul>
<p>æˆ‘æ‹¿äº†ä¸€ä¸ªå¸¸è§„å¯å˜å­—ä½“å¹¶é‡æ–°å‘½åäº†å®ƒã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc773603360e44dc8874592271c883fc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=8NIcWfwktJMTLYT%2B6%2BxD0v5uqfQ%3D" alt="image.png" loading="lazy"/></p>
<blockquote>
<p>å‰©ä¸‹çš„å­—ä½“æ˜¯ç”¨äºå®éªŒçš„ï¼›æˆ‘ä¸æ‰“ç®—åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­ä½¿ç”¨æ‰€æœ‰è¿™äº›å­—ä½“ã€‚ğŸ˜</p>
</blockquote>
<ul>
<li>
<ol start="3">
<li>åœ¨ <code>pubspec.yaml</code> ä¸­æŒ‡å®šå­—ä½“ã€‚</li>
</ol>
</li>
</ul>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">flutter:</span>
  <span class="hljs-attr">uses-material-design:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">assets:</span> 
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/background/</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/audio/</span>
  <span class="hljs-attr">fonts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">family:</span> <span class="hljs-string">OpenSans</span>
      <span class="hljs-attr">fonts:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-attr">asset:</span> <span class="hljs-string">assets/fonts/OpenSans.ttf</span>
</code></pre>
<p>æˆ‘çŸ¥é“å¦‚ä½•ç”¨ <code>TextStyle</code> ä¸º <code>Text</code> ç»„ä»¶è®¾ç½® <code>fontFamily</code>ã€‚ä½†æˆ‘æƒ³<strong>å…¨å±€</strong>è®¾ç½®å®ƒã€‚</p>
<p>åŸæ¥ï¼Œè¿™å¯ä»¥é€šè¿‡** <code>ThemeData</code> **æ¥å®ç°ï¼ŒçœŸæ˜¯ä¸ªæƒŠå–œï¼š</p>
<pre><code class="hljs language-dart" lang="dart"> <span class="hljs-keyword">static</span> ThemeData getTheme(
    ColorScheme colorScheme,
    Brightness brightness,
  ) {
    <span class="hljs-keyword">return</span> ThemeData(
      brightness: brightness,
      colorScheme: colorScheme,
      fontFamily: <span class="hljs-string">'OpenSans'</span>,    <span class="hljs-comment">//&lt;-here</span>
      appBarTheme: AppBarTheme(
...
</code></pre>
<p>ä¸Šé¢æ˜¯æˆ‘çš„æ–¹æ³•ï¼Œå®ƒä¸ºåº”ç”¨åˆ›å»ºäº† <code>ThemeData</code> å¯¹è±¡ã€‚ä¿®å¤å¾ˆç®€å•â€”â€”åªéœ€æ·»åŠ  <code>fontFamily</code> å±æ€§ã€‚ä½†å¦‚æœè¿™ä¹ˆç®€å•ï¼Œæˆ‘å°±ä¸ä¼šå†™è¿™ç¯‡æ–‡ç« äº†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d40f71e2729485187edd7dcda5b5055~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=GdDo6kSbGzTQrrenCdq1%2FW5bsiE%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚ä½ æ‰€è§ï¼ˆä½ å¯èƒ½çœ‹ä¸åˆ° ğŸ˜€ï¼‰ï¼Œåªæœ‰ <code>Text</code> å’Œ <code>TextFields</code> ç»„ä»¶ä¸­çš„å­—ä½“å‘ç”Ÿäº†å˜åŒ–ã€‚ï¼ˆæç¤ºï¼šçœ‹çœ‹å­—æ¯ <code>g</code>ï¼‰ã€‚ä½† <code>AppBar</code> æ ‡é¢˜å’ŒæŒ‰é’®ä»ç„¶ä½¿ç”¨é»˜è®¤å­—ä½“ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘å¾—è¯´è¿™å¾ˆä»¤äººå¤±æœ›ã€‚å¦‚æœè¿™ç§è®¾ç½®æ•´ä¸ª <code>ThemeData</code> å­—ä½“çš„æ–¹å¼å¯¹æ•´ä¸ª <code>ThemeData</code> ä¸èµ·ä½œç”¨ï¼Œé‚£è®¾ç½®å®ƒçš„æ„ä¹‰ä½•åœ¨ï¼Ÿ</p>
<p>æˆ–è®¸æˆ‘åšé”™äº†ä»€ä¹ˆï¼Ÿå¯èƒ½å§ï¼Œå› ä¸ºæˆ‘æ˜¯ç¬¬ä¸€æ¬¡åšã€‚è¯·å¸®å¿™ã€‚</p>
<p>å¥½å§ï¼Œæˆ‘å’¨è¯¢äº† Claudeï¼Œè¿™ä½åˆå¤§åˆæ¼‚äº®çš„ LLM å»ºè®®ï¼š</p>
<pre><code class="hljs language-dart" lang="dart">textTheme: Typography.englishLike2021
          .copyWith(
            bodyMedium: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">16</span>),
            bodySmall: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">15</span>),
            headlineMedium: TextStyle(color: colorScheme.primary),
            labelLarge: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">15</span>),
            labelMedium: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">14</span>),
            bodyLarge: TextStyle(
              fontSize: <span class="hljs-number">17</span>,
              color: colorScheme.onSurface,
            ),
          )
          .apply(  <span class="hljs-comment">//&lt;-this</span>
            fontFamily: <span class="hljs-string">'OpenSans'</span>,
          ),
</code></pre>
<p>æ·»åŠ  <code>apply(fontFamily: 'OpenSans',)</code> åˆ° <code>textTheme</code> ä¸­ã€‚æ²¡ç”¨ã€‚æŒ‰é’®å’Œ <code>AppBar</code> ä»ç„¶ä½¿ç”¨é»˜è®¤å­—ä½“ã€‚è¿™ä¸ªæ–¹æ³•å®é™…ä¸Šæ˜¯æœ‰æ•ˆçš„ï¼›å®ƒå¯ä»¥ç”¨æ¥æ›¿ä»£è®¾ç½® <code>ThemeData</code> çš„ <code>fontFamily</code> å±æ€§ã€‚ä½†å®ƒçš„ä½œç”¨æ–¹å¼æ˜¯åŒæ ·çš„å±€é™ã€‚</p>
<p>ä¸‹ä¸€ä¸ªå»ºè®®ï¼ˆè¿™æ¬¡å¥æ•ˆäº†ï¼‰æ˜¯åˆ†åˆ«åœ¨ <code>AppBarTheme</code> å’Œæ¯ä¸ªæŒ‰é’®çš„ä¸»é¢˜ä¸­æŒ‡å®š <code>fontFamily</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"> appBarTheme: AppBarTheme(
        foregroundColor: colorScheme.primary,
        elevation: <span class="hljs-number">0</span>,
        scrolledUnderElevation: <span class="hljs-number">2</span>,
        centerTitle: <span class="hljs-keyword">true</span>,
        titleTextStyle: TextStyle(
          fontSize: <span class="hljs-number">17</span>,
          fontWeight: FontWeight.w600,
          color: colorScheme.onSurface,
          fontFamily: <span class="hljs-string">'OpenSans'</span>,   <span class="hljs-comment">//&lt;-here</span>
        ),
      ),
</code></pre>
<p>æˆ‘ä½¿ç”¨äº†æ‰€æœ‰çš„ Material æŒ‰é’®ï¼ˆElevatedã€Filledã€Outlined å’Œ Textï¼‰ï¼Œæ‰€ä»¥æˆ‘éœ€è¦ä¸ºå®ƒä»¬æ¯ä¸€ä¸ªä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"> textStyle: WidgetStateProperty.resolveWith&lt;TextStyle?&gt;(
        (states) {
          <span class="hljs-keyword">if</span> (states.contains(WidgetState.hovered)) {
            <span class="hljs-keyword">return</span> TextStyle(
              fontSize: <span class="hljs-number">16</span>,
             <span class="hljs-comment">// fontWeight: FontWeight.w800,</span>
              fontFamily: <span class="hljs-string">'OpenSans'</span>,  <span class="hljs-comment">//&lt;-here</span>
              fontVariations: [
                      FontVariation(<span class="hljs-string">'wght'</span>, <span class="hljs-number">800</span>),
                    ]
            );
          }
          <span class="hljs-keyword">return</span> TextStyle(
            fontSize: <span class="hljs-number">17</span>,
           <span class="hljs-comment">// fontWeight: FontWeight.w600,</span>
            fontFamily: <span class="hljs-string">'OpenSans'</span>,    <span class="hljs-comment">//&lt;-and here</span>
            fontVariations: [
                      FontVariation(<span class="hljs-string">'wght'</span>, <span class="hljs-number">600</span>),
                    ]
          );
        },
      ),
</code></pre>
<p><code>fontWeight</code> å±æ€§ä¸é€‚ç”¨äº Open Sansï¼›æˆ‘ä»¬åº”è¯¥æ”¹ç”¨ <code>fontVariations</code>ã€‚</p>
<p>ç„¶åç§ï¼ˆç»ˆäº ğŸ˜´ï¼‰ï¼ŒOpen Sans æ— å¤„ä¸åœ¨ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7a1a713b2c04fcca5362aa2c8cd04cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=AKrVPuk6Jpcqtp7WxIEi4BkM3bc%3D" alt="image.png" loading="lazy"/></p>
<p>æˆ‘å·²ç»è§‰å¾—è¿™ç¯‡æ–‡ç« å€¼å¾—å†™äº†ï¼Œä½†æ— è®ºå¦‚ä½•â€¦â€¦</p>
<p><strong>å¥–åŠ± 1</strong></p>
<p>è®©æ–‡æœ¬å­—æ®µçš„æ ‡ç­¾ä½¿ç”¨ç­‰å®½å­—ä½“ï¼ˆmonospaceï¼‰ã€‚</p>
<p><strong>å¥–åŠ± 2</strong></p>
<p>å¯¹æ ‡é¢˜ä½¿ç”¨å¦ä¸€ç§ï¼ˆæ›´æœ‰è¶£çš„ï¼‰å­—ä½“ã€‚</p>
<p>å°†å­—ä½“æ·»åŠ åˆ° <code>assets</code>ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f195c931771d4043bd20c520b08d6819~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=v0jDJiARawjyt%2FYtrmgnxmIFwhA%3D" alt="image.png" loading="lazy"/></p>
<p>(è¿™ä¸¤ç§å­—ä½“éƒ½æ˜¯å’Œ Open Sans ä¸€èµ·ä» Google Fonts ä¸‹è½½çš„)ã€‚</p>
<p>é¡ºä¾¿è¯´ä¸€ä¸‹ï¼ŒVS Code æœ‰ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ‰©å±•å« <code>Font Preview</code>ã€‚</p>
<ol start="2">
<li>å°†å­—ä½“æ·»åŠ åˆ° <code>pubspec.yaml</code>ï¼š</li>
</ol>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">flutter:</span>
  <span class="hljs-attr">uses-material-design:</span> <span class="hljs-literal">true</span>
  <span class="hljs-attr">assets:</span> 
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/images/background/</span>
    <span class="hljs-bullet">-</span> <span class="hljs-string">assets/audio/</span>
  <span class="hljs-attr">fonts:</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">family:</span> <span class="hljs-string">OpenSans</span>
      <span class="hljs-attr">fonts:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-attr">asset:</span> <span class="hljs-string">assets/fonts/OpenSans.ttf</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">family:</span> <span class="hljs-string">KodeMono</span>
      <span class="hljs-attr">fonts:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-attr">asset:</span> <span class="hljs-string">assets/fonts/KodeMono.ttf</span>
    <span class="hljs-bullet">-</span> <span class="hljs-attr">family:</span> <span class="hljs-string">StardosStencil</span>
      <span class="hljs-attr">fonts:</span> 
        <span class="hljs-bullet">-</span> <span class="hljs-attr">asset:</span> <span class="hljs-string">assets/fonts/StardosStencil.ttf</span>  
</code></pre>
<ol start="3">
<li>æœ€åï¼Œä¿®æ”¹ <code>textTheme</code>ï¼š</li>
</ol>
<pre><code class="hljs language-dart" lang="dart"> textTheme: Typography.englishLike2021
          .copyWith(
            bodyMedium: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">15</span>),
            bodySmall: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">14</span>),
            headlineMedium: TextStyle(
              color: colorScheme.primary,
              fontFamily: <span class="hljs-string">'StardosStencil'</span>,   <span class="hljs-comment">//&lt;-here</span>
              fontSize: <span class="hljs-number">25</span>,
            ),
            labelLarge: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">15</span>),
            labelMedium: <span class="hljs-keyword">const</span> TextStyle(fontSize: <span class="hljs-number">14</span>),
            bodyLarge: TextStyle(
              fontSize: <span class="hljs-number">16</span>,
              color: colorScheme.onSurface,
              fontFamily: <span class="hljs-string">'KodeMono'</span>,        <span class="hljs-comment">//&lt;-and here</span>
            ),
          )
          <span class="hljs-comment">// .apply(</span>
          <span class="hljs-comment">//   fontFamily: 'OpenSans',</span>
          <span class="hljs-comment">// )</span>
          ,
</code></pre>
<p>ğŸ‘‰ï¼ˆåˆ«å¿˜äº†ç§»é™¤ <code>apply</code> æ–¹æ³•ï¼Œå®ƒä¼šè¦†ç›–æ‰€æœ‰æŒ‡å®šçš„å­—ä½“ã€‚ï¼‰</p>
<p>è¿™æ˜¯æˆ‘çš„æ³¨å†Œé¡µé¢ï¼Œæœ‰ä¸€ä¸ªæœ‰è¶£çš„æ ‡é¢˜å’Œç­‰å®½çš„æ–‡æœ¬å­—æ®µæ ‡ç­¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33c93b77d347490e8211f992da0292e6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmFydmFuTW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764553346&amp;x-signature=dx7wJ6XLST6bZ9Jrv3207Htf8KM%3D" alt="image.png" loading="lazy"/>
é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘çš„æ˜¾ç¤ºâ€œCreate Accountâ€æ–‡æœ¬çš„ <code>Text</code> ç»„ä»¶çœ‹èµ·æ¥åƒï¼š</p>
<pre><code class="hljs language-dart" lang="dart">       Text(
            <span class="hljs-string">'Create Accountg'</span>,
            style: Get.textTheme.headlineMedium,                       
          ),
</code></pre>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ˜ç¡®åœ°ä½¿ç”¨äº† <code>textTheme</code> ä¸­çš„ <code>headlineMedium</code> æ ·å¼ã€‚</p>
<p>å…³äºæ–‡æœ¬å­—æ®µæ ‡ç­¾ï¼Œæƒ…å†µæœ‰æ‰€ä¸åŒï¼š</p>
<pre><code class="hljs language-dart" lang="dart">TextField(
            controller: _emailController,
            decoration: InputDecoration(
              labelText: <span class="hljs-string">'Emailg'</span>,
              prefixIcon: Icon(
                Icons.email_outlined,
              ),
            ),
          ),
</code></pre>
<p>æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œ<code>labelStyle</code> æ²¡æœ‰å®šä¹‰ã€‚<code>TextField</code> éšå¼åœ°ä½¿ç”¨ <code>textTheme</code> ä¸­çš„ <code>bodyLarge</code> <code>TextStyle</code> å¯¹è±¡ä½œä¸ºå…¶æ ‡ç­¾ã€‚</p>
<p>æˆ‘ä¸€ç›´ä»¥ä¸º GetX ä¼šåœ¨å†…éƒ¨çš„æŸä¸ªåœ°æ–¹ç¼“å­˜ <code>ThemeData</code>ï¼Œå¹¶ä¸”æ‰€æœ‰çš„ <code>Get.theme</code>ã€<code>Get.textTheme</code> ä¹‹ç±»çš„è°ƒç”¨éƒ½ä¸ä¼šä»¥ <code>Theme.of(context)</code> æŸ¥æ‰¾ç»“æŸã€‚è¿æ°”ä¸å¥½ã€‚</p>
<p>è¿™æ˜¯ GetX å†…éƒ¨çš„ <code>theme</code> getter å®ç°:</p>
<pre><code class="hljs language-dart" lang="dart"> ThemeData <span class="hljs-keyword">get</span> theme {
    <span class="hljs-keyword">var</span> theme = ThemeData.fallback();
    <span class="hljs-keyword">if</span> (context != <span class="hljs-keyword">null</span>) {
      theme = Theme.of(context!);
    }
    <span class="hljs-keyword">return</span> theme;
  }
</code></pre>
<p>åªæ˜¯è¦æ„è¯†åˆ°ï¼ˆå¦‚æœæ‚¨ä½¿ç”¨ GetXï¼‰ã€‚</p>
<blockquote>
<p>é‚£äº› <code>.of(context)</code> æŸ¥æ‰¾å¯èƒ½ä¼šå¯¹æ€§èƒ½é€ æˆè´Ÿæ‹…ï¼Œæœ€å¥½åœ¨ <code>build</code> æ–¹æ³•çš„é¡¶éƒ¨ç¼“å­˜ <code>ThemeData</code> å¯¹è±¡ã€‚</p>
</blockquote>
<p>å°±æ˜¯è¿™æ ·ã€‚</p>
<p>æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€‚</p>
<p>å¦‚æœæ‚¨å­¦åˆ°äº†æ–°ä¸œè¥¿ï¼Œæ‚¨å°±æ¬ æˆ‘é¼“æŒã€‚å¼€ç©ç¬‘ ğŸ˜€ã€‚åŠå¼€ç©ç¬‘ ğŸ˜‰ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šå‰ç«¯é¡¹ç›®æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆå™¨ã€‹Promptï¼ˆå¯å¤ç”¨æ¨¡æ¿ï¼‰]]></title>    <link>https://juejin.cn/post/7576218673049452595</link>    <guid>https://juejin.cn/post/7576218673049452595</guid>    <pubDate>2025-11-25T05:46:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576218673049452595" data-draft-id="7576197876717600806" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šå‰ç«¯é¡¹ç›®æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆå™¨ã€‹Promptï¼ˆå¯å¤ç”¨æ¨¡æ¿ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,LLM,Visual Studio Code"/> <meta itemprop="datePublished" content="2025-11-25T05:46:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mwq30123"/> <meta itemprop="url" content="https://juejin.cn/user/3403743729030686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šå‰ç«¯é¡¹ç›®æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆå™¨ã€‹Promptï¼ˆå¯å¤ç”¨æ¨¡æ¿ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743729030686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mwq30123
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T05:46:40.000Z" title="Tue Nov 25 2025 05:46:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä¸‹é¢æä¾›ä½ ä¸€ä»½ <strong>ä¸“é—¨ä¸ºå‰ç«¯é¡¹ç›®ä¼˜åŒ–çš„ã€ŠæŠ€æœ¯æ–‡æ¡£è‡ªåŠ¨ç”Ÿæˆ Prompt æ¨¡æ¿ã€‹</strong> ï¼Œé€‚ç”¨äºï¼š</p>
<ul>
<li>React / Vue / Angular / Svelte / Next.js / Nuxt / Vite / Webpack</li>
<li>å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ã€ç»„ä»¶åº“ã€ç®¡ç†åå°ã€å¤§å‹å‰ç«¯å·¥ç¨‹</li>
<li>ä»»æ„ JS/TS å‰ç«¯é¡¹ç›®ç»“æ„</li>
</ul>
<p>è¿™æ˜¯ä½ å¯ä»¥ <strong>é•¿æœŸå¤ç”¨</strong> çš„ç‰ˆæœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-0">âœ… <strong>ã€Šå‰ç«¯é¡¹ç›®æŠ€æœ¯æ–‡æ¡£ç”Ÿæˆå™¨ã€‹Promptï¼ˆå¯å¤ç”¨æ¨¡æ¿ï¼‰</strong></h2>
<blockquote>
<p><strong>åªéœ€ä¸Šä¼ ä½ çš„å‰ç«¯é¡¹ç›®ä»£ç ï¼Œç„¶åè´´å…¥ä¸‹é¢è¿™æ®µ Promptï¼Œå°±èƒ½è‡ªåŠ¨ç”Ÿæˆä¸€æ•´å¥—ä¸“ä¸šæ–‡æ¡£ã€‚</strong></p>
</blockquote>
<hr/>
<p>ä½ ç°åœ¨æ‰®æ¼”ä¸€åã€Œå‰ç«¯æ¶æ„å¸ˆ + å·¥ç¨‹åŒ–ä¸“å®¶ + æŠ€æœ¯æ–‡æ¡£å·¥ç¨‹å¸ˆã€ã€‚<br/>
æˆ‘å°†æä¾›ä½ ä¸€ä¸ªå‰ç«¯é¡¹ç›®ï¼ˆVue/React/Angular/Next/å…¶ä»–ï¼‰ã€‚<br/>
è¯·åŸºäºæˆ‘æä¾›çš„ä»£ç ï¼Œè‡ªåŠ¨ç”Ÿæˆå¯ç”¨äºå…¥èŒåŸ¹è®­å’Œé¡¹ç›®äº¤æ¥çš„æŠ€æœ¯æ–‡æ¡£ã€‚</p>
<p>è¯·ä¸¥æ ¼æŒ‰ä»¥ä¸‹ç»“æ„è¾“å‡ºï¼ˆæ¯ä¸€éƒ¨åˆ†éƒ½å¿…é¡»ç”Ÿæˆï¼‰ï¼š</p>
<p>====================================</p>
<h2 data-id="heading-1">1. é¡¹ç›®æ¦‚è¿°ï¼ˆProject Overviewï¼‰</h2>
<ul>
<li>é¡¹ç›®åŠŸèƒ½ã€ç”¨é€”ã€ä¸šåŠ¡å®šä½</li>
<li>å‰ç«¯æŠ€æœ¯æ ˆï¼ˆæ¡†æ¶ã€è¯­è¨€ã€ä¸»è¦ä¾èµ–ï¼‰</li>
<li>åŸºç¡€å·¥ç¨‹åŒ–å·¥å…·ï¼ˆVite/Webpackã€ESLintã€Prettierã€TS ç­‰ï¼‰</li>
<li>é¡¹ç›®äº®ç‚¹å’Œæ¶æ„æ„å›¾</li>
</ul>
<p>===========================================</p>
<h2 data-id="heading-2">2. é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆProject Structureï¼‰</h2>
<p>è¯·æ‰«ææˆ‘æä¾›çš„ä»£ç ï¼Œç”Ÿæˆä¸€ä¸ªç®€æ´ä½†å®Œæ•´çš„å‰ç«¯ç›®å½•æ ‘ï¼ˆå»ºè®® 2-3 å±‚ï¼‰ï¼Œå¹¶è§£é‡Šï¼š</p>
<p>å¯¹æ¯ä¸ªç›®å½•è¯·è¾“å‡ºï¼š</p>
<ul>
<li>è¯¥ç›®å½•ä½œç”¨</li>
<li>æ˜¯å¦ä¸ºæ ¸å¿ƒä¸šåŠ¡ç›®å½• / å…¬ç”¨ç»„ä»¶ç›®å½• / å·¥å…·æ¨¡å— / é…ç½®ç›®å½•</li>
</ul>
<p>é‡ç‚¹å…³æ³¨å‰ç«¯å¸¸è§ç»“æ„ï¼š</p>
<ul>
<li>src/</li>
<li>pages/ æˆ– views/</li>
<li>components/</li>
<li>hooks/ composables/</li>
<li>store/ï¼ˆPiniaã€Reduxã€MobXã€Zustandï¼‰</li>
<li>router/</li>
<li>assets/</li>
<li>utils/</li>
<li>api/</li>
<li>types/</li>
<li>public/</li>
</ul>
<p>=======================================</p>
<h2 data-id="heading-3">3. æ ¸å¿ƒæ¨¡å—åˆ†æï¼ˆCore Modulesï¼‰</h2>
<p>å¯¹å‰ç«¯é¡¹ç›®ä¸­çš„å…³é”®æ¨¡å—è¿›è¡Œè¯¦ç»†è¯´æ˜ï¼š</p>
<ul>
<li>é¡µé¢ / è·¯ç”±æ¨¡å—</li>
<li>çŠ¶æ€ç®¡ç†ï¼ˆVuex / Pinia / Redux / Zustandï¼‰</li>
<li>API è¯·æ±‚å°è£…æ¨¡å—</li>
<li>å…¬ç”¨ç»„ä»¶åº“</li>
<li>å·¥å…·åº“ï¼ˆutilsï¼‰</li>
<li>æƒé™æ¨¡å—ï¼ˆACL / Router Guardsï¼‰</li>
<li>é…ç½®æ¨¡å—ï¼ˆconfigï¼‰</li>
<li>å›½é™…åŒ–æ¨¡å—ï¼ˆi18nï¼Œå¦‚å­˜åœ¨ï¼‰</li>
<li>æ„å»ºé…ç½®ï¼ˆvite.config.js / webpack.config.jsï¼‰</li>
</ul>
<p>æ¯ä¸ªæ¨¡å—éœ€åŒ…å«ï¼š</p>
<ul>
<li>èŒè´£</li>
<li>å†…éƒ¨æ ¸å¿ƒæ–‡ä»¶</li>
<li>æ ¸å¿ƒé€»è¾‘</li>
<li>æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»</li>
</ul>
<p>==========================================</p>
<h2 data-id="heading-4">4. å…³é”®ä»£ç æ·±åº¦è§£æï¼ˆImportant Code Insightï¼‰</h2>
<p>è¯·è‡ªåŠ¨è¯†åˆ«ã€Œå…³é”®æ–‡ä»¶ã€å¹¶æ·±å…¥è®²è§£ï¼ŒåŒ…æ‹¬ï¼š</p>
<p>å¯¹æ¯ä¸ªå…³é”®æ–‡ä»¶åˆ†æï¼š</p>
<ul>
<li>æ–‡ä»¶èŒè´£</li>
<li>å…³é”®å‡½æ•° / ç»„ä»¶</li>
<li>ç»„ä»¶çš„ Props / emits / çŠ¶æ€</li>
<li>ç”Ÿå‘½å‘¨æœŸæˆ–é’©å­é€»è¾‘</li>
<li>ä¸å…¶ä»–æ¨¡å—çš„äº¤äº’</li>
<li>å¼‚å¸¸æƒ…å†µå¤„ç†</li>
</ul>
<p>å¯åŒ…å«ï¼ˆå¦‚å­˜åœ¨ï¼‰ï¼š</p>
<ul>
<li>main.ts / main.js</li>
<li>App.vue / App.tsx</li>
<li>router/index.ts</li>
<li>store/index.ts</li>
<li>api/index.ts</li>
<li>layout ç›¸å…³æ–‡ä»¶</li>
</ul>
<p>=======================================</p>
<h2 data-id="heading-5">5. å‰ç«¯æ¶æ„è®¾è®¡ï¼ˆArchitectureï¼‰</h2>
<p>ç”ŸæˆåŸºäºä»£ç çš„å‰ç«¯æ¶æ„è¯´æ˜ï¼š</p>
<ul>
<li>åˆ†å±‚ç»“æ„ï¼ˆç»„ä»¶å±‚ / é¡µé¢å±‚ / æœåŠ¡å±‚ / çŠ¶æ€å±‚ï¼‰</li>
<li>æ•°æ®æµåŠ¨æ–¹å¼ï¼ˆè‡ªä¸Šè€Œä¸‹çš„ propsã€äº‹ä»¶ã€å…¨å±€ storeã€APIï¼‰</li>
<li>ç»„ä»¶é€šä¿¡æ–¹å¼</li>
<li>çŠ¶æ€åŒæ­¥æ¨¡å‹ï¼ˆå¦‚ Redux flow / Vue reactivity flowï¼‰</li>
<li>å¯è§†åŒ–æ¶æ„å›¾ï¼ˆæ¨èç”¨ Mermaidï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼ˆAI å¯æ ¹æ®å®é™…é¡¹ç›®ç”Ÿæˆï¼‰ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TD
    Page --&gt; Component
    Component --&gt; API
    API --&gt; Store
    Store --&gt; Page
</code></pre>
<p>==================================</p>
<h2 data-id="heading-6">6. åº”ç”¨è¿è¡Œæµç¨‹ï¼ˆRuntime Flowï¼‰</h2>
<p>è¯·è§£é‡Šæ•´ä¸ªå‰ç«¯åº”ç”¨ä»å¯åŠ¨åˆ°æ¸²æŸ“çš„å®Œæ•´æµç¨‹ï¼š</p>
<ul>
<li>å¦‚ä½•åˆå§‹åŒ–åº”ç”¨ï¼ˆå…¥å£æ–‡ä»¶ main.tsï¼‰</li>
<li>è·¯ç”±åŠ è½½æµç¨‹</li>
<li>Store åˆå§‹åŒ–æµç¨‹</li>
<li>API åˆå§‹åŒ–ï¼ˆå¦‚ Axios æ‹¦æˆªå™¨ï¼‰</li>
<li>é¡µé¢æ¸²æŸ“é¡ºåº</li>
<li>æ•°æ®åŠ è½½æµç¨‹ï¼ˆä»é¡µé¢ â†’ æœåŠ¡ â†’ APIï¼‰</li>
<li>ç”¨æˆ·æƒé™éªŒè¯æµç¨‹ï¼ˆå¦‚å­˜åœ¨ï¼‰</li>
</ul>
<p>å¦‚å¯è¡Œè¯·ç”Ÿæˆï¼š</p>
<ul>
<li>è¯·æ±‚æµç¨‹æ—¶åºå›¾</li>
<li>ç™»å½•æµç¨‹å›¾</li>
<li>é¡µé¢æ¸²æŸ“æµç¨‹å›¾</li>
</ul>
<p>=============================</p>
<h2 data-id="heading-7">7. å·¥ç¨‹åŒ–é…ç½®åˆ†æï¼ˆBuild &amp; Toolingï¼‰</h2>
<p>è§£é‡Šå·¥ç¨‹åŒ–ç›¸å…³å†…å®¹ï¼š</p>
<ul>
<li>æ‰“åŒ…å·¥å…·ï¼ˆVite / Webpackï¼‰</li>
<li>æ’ä»¶ï¼ˆå¦‚è‡ªåŠ¨å¯¼å…¥ã€å‹ç¼©ã€ä»£ç åˆ†å‰²ã€è·¯ç”±è‡ªåŠ¨ç”Ÿæˆï¼‰</li>
<li>TypeScript é…ç½®</li>
<li>Lint å·¥å…·ï¼ˆESLintã€Stylelintï¼‰</li>
<li>Prettier æ ¼å¼åŒ–</li>
<li>Husky / lint-stagedï¼ˆå¦‚å­˜åœ¨ï¼‰</li>
<li>ç¯å¢ƒå˜é‡æœºåˆ¶ï¼ˆ.env æ–‡ä»¶è¯´æ˜ï¼‰</li>
</ul>
<p>==============================</p>
<h2 data-id="heading-8">8. å¯åŠ¨ &amp; å¼€å‘æŒ‡å—ï¼ˆRun &amp; Development Guideï¼‰</h2>
<p>æ ¹æ®ä»£ç è‡ªåŠ¨ç”Ÿæˆé¡¹ç›®å¯åŠ¨ä¸å¼€å‘è¯´æ˜ï¼š</p>
<h3 data-id="heading-9">å¼€å‘ï¼š</h3>
<ul>
<li>å®‰è£…ä¾èµ–</li>
<li>è¿è¡Œå¼€å‘ç¯å¢ƒ</li>
<li>æ‰“åŒ…ç”Ÿäº§ç¯å¢ƒ</li>
<li>è°ƒè¯•å»ºè®®</li>
<li>çƒ­æ›´æ–°æœºåˆ¶è®²è§£</li>
</ul>
<h3 data-id="heading-10">å¸¸è§é—®é¢˜ï¼š</h3>
<ul>
<li>ä¾èµ–æŠ¥é”™çš„åŸå› ä¸è§£å†³</li>
<li>TS æŠ¥é”™è§£å†³æ–¹å¼</li>
<li>æ‰“åŒ…å¤±è´¥çš„å¸¸è§åŸå› </li>
<li>æµè§ˆå™¨ CORS é—®é¢˜ï¼ˆå¦‚å­˜åœ¨ï¼‰</li>
</ul>
<p>======================================</p>
<h2 data-id="heading-11">9. æ–°äººå¿«é€Ÿä¸Šæ‰‹æŒ‡å—ï¼ˆOnboarding Guideï¼‰</h2>
<p>ä¸ºæ–°åŠ å…¥çš„å‰ç«¯å¼€å‘è€…ç”Ÿæˆï¼š</p>
<ul>
<li>å…ˆçœ‹å“ªäº›æ–‡ä»¶ï¼Ÿ</li>
<li>å¦‚ä½•è¿è¡Œé¡¹ç›®ï¼Ÿ</li>
<li>å¦‚ä½•è°ƒè¯•ä¸€ä¸ªé¡µé¢ï¼Ÿ</li>
<li>å¦‚ä½•æ–°å¢ä¸€ä¸ªé¡µé¢ï¼Ÿ</li>
<li>å¦‚ä½•æ–°å¢ APIï¼Ÿ</li>
<li>ç»„ä»¶å¼€å‘è§„èŒƒ</li>
<li>æäº¤è§„èŒƒï¼ˆå¦‚å­˜åœ¨ï¼šcommitlintï¼‰</li>
</ul>
<p>=======================================</p>
<h2 data-id="heading-12">10. æŠ€æœ¯å€º &amp; æ”¹è¿›å»ºè®®ï¼ˆTechnical Debt &amp; Improvementsï¼‰</h2>
<p>åŸºäºä»£ç è‡ªåŠ¨åˆ†æï¼š</p>
<ul>
<li>ä»£ç å¯è¯»æ€§é—®é¢˜</li>
<li>é‡å¤é€»è¾‘</li>
<li>ç»„ä»¶è¿‡åº¦è€¦åˆ</li>
<li>çŠ¶æ€å†—ä½™</li>
<li>API å°è£…æ”¹è¿›å»ºè®®</li>
<li>å¯å·¥ç¨‹åŒ–çš„æå‡ç‚¹</li>
<li>æ–‡æ¡£ç¼ºå¤±ç‚¹</li>
</ul>
<p>========================================</p>
<p>è¾“å‡ºè¦æ±‚ï¼š</p>
<ul>
<li>ä½¿ç”¨ Markdown</li>
<li>æ¸…æ™°åˆ†åŒºã€åˆ†æ ‡é¢˜</li>
<li>å†…å®¹å¿…é¡»åŸºäºå®é™…ä»£ç ï¼Œä¸çŒœæµ‹æœªå‡ºç°å†…å®¹</li>
<li>è‹¥é¡¹ç›®ç¼ºå°‘ä¿¡æ¯ï¼Œè¯·æ˜ç¡®æ ‡æ³¨â€œä»£ç ä¸è¶³ä»¥åˆ¤æ–­â€</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ]]></title>    <link>https://juejin.cn/post/7576264484688379944</link>    <guid>https://juejin.cn/post/7576264484688379944</guid>    <pubDate>2025-11-25T05:51:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576264484688379944" data-draft-id="7573950036897087528" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2025-11-25T05:51:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/3659622444970574"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            UIå°å§å§è¦æ±‚æœ‰â€œDuang~Duangâ€çš„æ•ˆæœæ€ä¹ˆåŠï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3659622444970574/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T05:51:59.000Z" title="Tue Nov 25 2025 05:51:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9456ab9014694573909de2733acc5b69~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=w4sPNHGfhJ%2Bv0Xhu3jDr%2BmOaPz0%3D" alt="test.gif" loading="lazy"/></p>
<blockquote>
<p><strong>è®¾è®¡å°å§å§</strong>ï¼š  â€œæä¸€ä¸‹è¿™æ ·çš„<strong>å›å¼¹</strong>æ•ˆæœï¼Œä½ è¡Œä¸è¡Œï¼Ÿâ€<br/>
<strong>æˆ‘</strong>ï¼šâ€œè¡Œï¼ç›´æ¥æ¢­å“ˆ 50 è¡Œ keyframes + transform + å„ç§ç™¾åˆ†æ¯”ï¼Œæå®š â€<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šâ€œå¤ªç¡¬ï¼ˆæ’‡å˜´ï¼‰ï¼Œä¸å¤Ÿ Q å¼¹ï¼ˆé„™è§†ï¼‰â€<br/>
<strong>æˆ‘</strong>ï¼š(è£‚å¼€)<br/>
<strong>éš”å£è€ç‹</strong>ï¼šè¿™ä¹ˆç®€å•ä½ éƒ½ä¸è¡Œï¼Œæˆ‘æ¥ä¸€è¡Œè´å¡å°” cubic-bezier(0.3, 1.15, 0.33, 1.57) ç§’äº†ğŸ˜<br/>
<strong>è®¾è®¡å°å§å§</strong>ï¼šå“‡å“¦ï¼ï¼ˆå…´å¥‹ï¼‰å¥½å¸…ï¼ï¼ˆæ˜Ÿæ˜Ÿçœ¼ğŸŒŸï¼‰å¥½Qå¼¹ï¼ï¼ˆä¸€è„¸å´‡æ‹œğŸ˜ï¼‰<br/>
<strong>æˆ‘</strong>ï¼š<strong>â€œï¼Ÿï¼Ÿï¼Ÿâ€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ğŸ§  ä¸€ã€ä¸ºä»€ä¹ˆä¸€è¡Œè´å¡å°”å°±èƒ½â€œDuangâ€èµ·æ¥ï¼Ÿ</h2>
<h3 data-id="heading-1">1ï¸âƒ£ cubic-bezier æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨ CSS åŠ¨ç”»é‡Œï¼Œæˆ‘ä»¬ç»å¸¸å†™ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> ease;
</code></pre>
<p>ä½†å…¶å® <code>ease</code>ã€<code>linear</code>ã€<code>ease-in-out</code> è¿™äº›éƒ½åªæ˜¯å°è£…å¥½çš„è´å¡å°”æ›²çº¿ã€‚<br/>
åº•å±‚åŸç†æ˜¯ï¼š</p>
<pre><code class="hljs language-css" lang="css">cubic-bezier(x1, y1, x2, y2)
</code></pre>
<p>è¿™å››ä¸ªå‚æ•°å®šä¹‰äº†<strong>æ—¶é—´å‡½æ•°æ›²çº¿</strong>ï¼Œæ§åˆ¶åŠ¨ç”»é€Ÿåº¦çš„å˜åŒ–ã€‚</p>
<ul>
<li><code>x</code>ï¼šæ—¶é—´è½´ï¼ˆå¿…é¡»åœ¨ 0ï½1 ä¹‹é—´ï¼‰</li>
<li><code>y</code>ï¼šæ•°å€¼è½´ï¼ˆå¯ä»¥è¶…å‡º 0ï½1ï¼ï¼‰</li>
</ul>
<p>ğŸ‘‰ å½“ y è¶…è¿‡ 1 æˆ–å°äº 0 æ—¶ï¼ŒåŠ¨ç”»å€¼å°±ä¼š<strong>å†²è¿‡ç»ˆç‚¹å†å›å¼¹</strong>ï¼Œ<br/>
è¿™å°±æ˜¯â€œå›å¼¹æ„Ÿâ€çš„æ ¸å¿ƒã€‚</p>
<hr/>
<h3 data-id="heading-2">2ï¸âƒ£ å›å¼¹çš„æœ¬è´¨ï¼šè¿‡å†² + è¡°å‡</h3>
<p>æƒ³è±¡ä¸€ä¸ªçƒæ‰ä¸‹æ¥ï¼š</p>
<ul>
<li><strong>è¿‡å†²</strong>ï¼šçƒè½åœ°æ—¶ä¼šå‹æ‰ï¼ˆè¶…å‡ºç»ˆç‚¹ï¼‰</li>
<li><strong>å›å¼¹</strong>ï¼šç„¶ååå¼¹å›æ¥ï¼Œå†é€æ¸ç¨³å®š</li>
</ul>
<p>åœ¨åŠ¨ç”»ä¸­ï¼Œè¿™ä¸ªâ€œè¿‡å†²â€å°±æ˜¯ y&gt;1 çš„éƒ¨åˆ†ï¼Œ<br/>
è€Œâ€œå›å¼¹â€å°±æ˜¯æ›²çº¿å›åˆ° y=1 çš„è¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-3">ğŸ§ª äºŒã€ä¸€è¡Œè´å¡å°”çš„é­”æ³•</h2>
<h3 data-id="heading-4">âœ… ç«ç®­å‘å°„</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d945616e56f74171afda7e6b38b97c8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5Lmd5ZOl:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764654719&amp;x-signature=lUyE6LGLXrjzlCGpwDn2f6gf%2F8M%3D" alt="export_1764044056566.gif" loading="lazy"/></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bounce"</span>&gt;</span>ğŸš€å‘å°„ï¼<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.bounce</span> {
 <span class="hljs-attribute">transition</span>: transform <span class="hljs-number">0.8s</span> <span class="hljs-built_in">cubic-bezier</span>(<span class="hljs-number">0.68</span>, -<span class="hljs-number">0.55</span>, <span class="hljs-number">0.27</span>, <span class="hljs-number">1.55</span>);
}
<span class="hljs-selector-class">.bounce</span><span class="hljs-selector-pseudo">:hover</span> {
 <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">500px</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p><span href="https://code.juejin.cn/pen/7576535022065647654" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7576535022065647654" data-src="https://code.juejin.cn/pen/7576535022065647654" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span>
ğŸ’¡ <strong>å‚æ•°è§£æï¼š</strong></p>
<ul>
<li>y1 = -0.55 â†’ å…ˆè½»å¾®åå‘ç¼©å°</li>
<li>y2 = 1.55 â†’ å†å†²è¿‡å¤´ 55%ï¼Œæœ€åå›å¼¹åˆ°åŸä½</li>
</ul>
<h2 data-id="heading-5">ğŸ§© å››ã€å¸¸ç”¨è´å¡å°”å‚æ•°</h2>



































<table><thead><tr><th>æ•ˆæœæè¿°</th><th>è´å¡å°”å‚æ•°</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>å¾®å›å¼¹ï¼ˆæŒ‰é’®ï¼‰</td><td><code>cubic-bezier(0.34, 1.31, 0.7, 1)</code></td><td>è½»æŸ”å¼¹æ€§</td></tr><tr><td>å¼ºå›å¼¹ï¼ˆå¡ç‰‡ï¼‰</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>çˆ†å‘åŠ›å¼º</td></tr><tr><td>æŸ”å’Œå‡ºå…¥</td><td><code>cubic-bezier(0.4, 0, 0.2, 1.4)</code></td><td>iOS é£</td></tr><tr><td>å¼¹æ€§æ”¾å¤§</td><td><code>cubic-bezier(0.175, 0.885, 0.32, 1.275)</code></td><td>å¼¹ç°§æ„Ÿ</td></tr><tr><td>ç«ç®­çŒ›å†²</td><td><code>cubic-bezier(0.68, -0.55, 0.27, 1.55)</code></td><td>æ¨èƒŒæ„Ÿ</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-6">ğŸ§° äº”ã€è°ƒè¯•ç¥å™¨æ¨è</h2>
<ul>
<li>
<p>ğŸ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fcubic-bezier.com" target="_blank" title="https://cubic-bezier.com" ref="nofollow noopener noreferrer">cubic-bezier.com</a><br/>
æ‹–åŠ¨æ‰‹æŸ„å®æ—¶é¢„è§ˆåŠ¨ç”»ï¼Œå¤åˆ¶å‚æ•°ä¸€é”®æå®šã€‚</p>
</li>
<li>
<p>âš™ï¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Feasings.net" target="_blank" title="https://easings.net" ref="nofollow noopener noreferrer">easings.net</a><br/>
æ”¶å½•å„ç§ easing å‡½æ•°ï¼ˆå«ç‰©ç†å¼¹ç°§ã€é˜»å°¼ç­‰ï¼‰ã€‚</p>
</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[GitHub ä¸Šç‹‚æ½ 1 ä¸‡ Starï¼Œè¿™ä¸ªå›½äº§ AI åº”ç”¨å¼€å‘å¹³å°å¤ªå‰å®³äº†]]></title>    <link>https://juejin.cn/post/7576378563574775823</link>    <guid>https://juejin.cn/post/7576378563574775823</guid>    <pubDate>2025-11-25T06:01:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563574775823" data-draft-id="7576208176007233588" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="GitHub ä¸Šç‹‚æ½ 1 ä¸‡ Starï¼Œè¿™ä¸ªå›½äº§ AI åº”ç”¨å¼€å‘å¹³å°å¤ªå‰å®³äº†"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2025-11-25T06:01:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            GitHub ä¸Šç‹‚æ½ 1 ä¸‡ Starï¼Œè¿™ä¸ªå›½äº§ AI åº”ç”¨å¼€å‘å¹³å°å¤ªå‰å®³äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T06:01:41.000Z" title="Tue Nov 25 2025 06:01:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>é€› GitHub çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªå«Â BISHENGÂ <strong>çš„å›½äº§ AI å¼€æºé¡¹ç›®ã€‚</strong></p>
<p>è¿™æ˜¯ä¸€æ¬¾ä¸»è¦é¢å‘ä¼ä¸šçš„å¼€æº AgentOpsã€‚</p>
<p>åå­—å–è‡ªæ´»å­—å°åˆ·æœ¯çš„å‘æ˜è€…ï¼š<strong>æ¯•æ˜‡ã€‚</strong> æ´»å­—å°åˆ·æœ¯ä¸ºäººç±»çŸ¥è¯†çš„ä¼ é€’èµ·åˆ°äº†å·¨å¤§çš„æ¨åŠ¨ä½œç”¨ã€‚BISHENG å›¢é˜Ÿçš„æ„¿æ™¯æ˜¯å¸Œæœ›ä¸ºæ™ºèƒ½åº”ç”¨çš„å¹¿æ³›è½åœ°æä¾›æœ‰åŠ›æ”¯æ’‘ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/823ee124b8064c06953ea343da14148e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=%2Btc3g69%2BdE8q2QRbhLBYFkK7zA0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-0">01ã€å¼€æºé¡¹ç›®ç®€ä»‹</h2>
<p>BISHENGÂ å·²ç»åœ¨ GitHub ä¸Šæ–©è· 10K çš„ Star äº†ã€‚</p>
<p>Readme ç¬¬ä¸€å¥è¯å°±èƒ½çœ‹åˆ°å¼€å‘è€…å¯¹é¡¹ç›®çš„æ‰“ç£¨ï¼šæºè‡ªä¸­å›½åŒ å¿ƒï¼Œå¸Œæœ›æˆ‘ä»¬èƒ½åƒ [Deepseek]ã€[é»‘ç¥è¯ï¼šæ‚Ÿç©º] å›¢é˜Ÿä¸€æ ·ï¼Œç»™ä¸–ç•Œå¸¦æ¥æ›´å¤šç¾å¥½ã€‚</p>
<p>å®ƒå·²è¢«å¤§é‡è¡Œä¸šé¢†å…ˆç»„ç»‡åŠè´¢å¯Œ 500 å¼ºä¼ä¸šé‡‡ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e68902288f04c778d8f703c88a94f88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=AzuhEyK0qJD%2Fk%2BGxwx8DTu8k57I%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>è¿™ä¸ªé¡¹ç›®åƒæ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„Â <strong>LLM DevOps å¹³å°</strong>ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">å¼€æºåœ°å€ï¼šhttps:<span class="hljs-comment">//github.com/dataelement/bisheng</span>
</code></pre>
<p>æ•´åˆäº† GenAI å·¥ä½œæµã€RAGã€Agentã€ç»Ÿä¸€æ¨¡å‹ç®¡ç†ã€è¯„ä¼°ã€SFTã€æ•°æ®é›†ç®¡ç†ã€ä¼ä¸šçº§ç³»ç»Ÿç®¡ç†ã€å¯è§‚æµ‹æ€§ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p>å’Œå¾ˆå¤šå¼€æºçš„ AI æ™ºèƒ½ä½“å¹³å°ç›¸æ¯”ï¼ŒBISHENG åœ¨ä¸¤ä¸ªæœ€æ£˜æ‰‹çš„é—®é¢˜ä¸Šè§£å†³çš„æ›´å¥½ï¼š<strong>å¤æ‚ä¸šåŠ¡é€»è¾‘æ€ä¹ˆç¼–æ’ å’Œ éç»“æ„åŒ–æ•°æ®æ€ä¹ˆå¤„ç†ã€‚</strong></p>
<p><strong>â‘  ç‹¬å…·ç‰¹è‰²çš„ Workflow</strong></p>
<p>BISHENG æä¾›äº†ä¸€å¥—<strong>å¯è§†åŒ–å›¾ç¼–æ’ç³»ç»Ÿ</strong>ï¼Œå…è®¸å¼€å‘è€…åƒç”»æµç¨‹å›¾ä¸€æ ·è®¾è®¡åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05deb5aaa85a4564860f9db1e67ce273~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=k%2FAS1WiBYhcaoBO%2Bg%2B%2BuqxBLlUg%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒæ”¯æŒå¾ªç¯ï¼ˆLoopï¼‰ã€æ¡ä»¶åˆ†æ”¯ï¼ˆIf-Elseï¼‰ä»¥åŠå¹¶è¡Œå¤„ç†ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå®ƒæ”¯æŒÂ <strong>Human-in-the-loopï¼ˆäººæœºä»‹å…¥ï¼‰</strong> ï¼Œæ¯”å¦‚æ¨¡å‹ç”Ÿæˆäº†ä¸€ä¸ªè‰ç¨¿ï¼Œæµç¨‹å¯ä»¥æš‚åœï¼Œç­‰å¾…äººå·¥å®¡æ ¸ä¿®æ”¹åï¼Œå†ç»§ç»­åç»­æ­¥éª¤ã€‚</p>
<p>è¿™ç§è®¾è®¡è®©å®ƒçœŸæ­£å…·å¤‡äº†å¤„ç†ä¸¥è‚ƒä¸šåŠ¡çš„èƒ½åŠ›ã€‚</p>
<p>è€Œä¸”Â BISHENG çš„ Workflow çš„ç†å¿µæ˜¯å°½å¯èƒ½ç”¨æœ€å°‘çš„ç»„ä»¶ç±»å®Œæˆæœ€å¤šç§ç±»çš„åº”ç”¨ï¼Œè¿™æ‰æ˜¯ä½ä»£ç æœ€æ ¸å¿ƒçš„ä»·å€¼ï¼Œå¹¶éä¸€å‘³è¿½æ±‚æ›´å¤šç»„ä»¶ã€‚</p>
<p><strong>â‘¡ é«˜ç²¾åº¦æ–‡æ¡£è§£æ</strong></p>
<p>BISHENG å†…ç½®äº†å›¢é˜Ÿæ‰“ç£¨å¤šå¹´çš„<strong>å•†ä¸šçº§æ–‡æ¡£è§£ææ¨¡å‹</strong>ï¼Œè¿™åœ¨å¼€æºç•Œéå¸¸å°‘è§ã€‚</p>
<p>å®ƒä¸ä»…èƒ½ç²¾å‡†è¯†åˆ«å¸¸è§„æ–‡æ¡£ï¼Œå¯¹äºè´¢åŠ¡æŠ¥è¡¨ä¸­çš„å¤æ‚è¡¨æ ¼ã€åˆåŒä¸Šçš„çº¢ç« ã€ç”šè‡³æ½¦è‰çš„æ‰‹å†™ä½“éƒ½æœ‰æé«˜çš„è¯†åˆ«ç‡ï¼Œå¤§å¹…æå‡äº†çŸ¥è¯†åº“çš„è´¨é‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9b53c001d444f9cb875fc6bf226aa41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=qg8j5iGH1E2x156wTQQOtrFHl6w%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>â‘¢ ä¸“å®¶çº§å“å‘³çš„é€šç”¨ Agent</p>
<p>BISHENG è¿˜æœ‰ä¸€ä¸ªå«åšÂ <strong>çµæ€ çš„ Agent åŠ©æ‰‹ã€‚å…³äº</strong> <strong>çµæ€çš„æ€è€ƒï¼Œéå¸¸æ¨èçœ‹ä¸€ä¸‹Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkyMTM3NzQ2Nw%3D%3D%26mid%3D2247484289%26idx%3D1%26sn%3D3c9ba12e2165a457d6521697e7dacd39%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkyMTM3NzQ2Nw==&amp;mid=2247484289&amp;idx=1&amp;sn=3c9ba12e2165a457d6521697e7dacd39&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">BISHENG</a>Â çš„è¿™ç¯‡æ–‡ç« ã€‚</strong></p>
<p>è¿™ä¸ªå›¢é˜Ÿä¸æ˜¯ç®€å•æä¸ª Demo å°±å®Œäº†ï¼ŒçœŸçš„å¥”ç€çœŸå®å¯ç”¨å»çš„ã€‚æƒ³å¤§å¤§æå‡ä¼ä¸šå†…å¤§æ¨¡å‹çš„çœŸå®ä½¿ç”¨ç‡ï¼Œè¿™æ‰æ˜¯å½“ä¸‹æœ€é‡è¦çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2e3e73dac5e445af97bed836abc7e719~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=z7PVXddZ9kLJ%2FrW6d9rviyumSJo%3D" alt="å›¾ç‰‡" loading="lazy"/>å®ƒçš„æ ¸å¿ƒç†å¿µæ˜¯Â Agent å¿…é¡»å…·å¤‡ä¸“å®¶çº§å“å‘³ï¼Œä¹Ÿå°±æ˜¯å¾—æœ‰ä¸šåŠ¡ä¸“å®¶çš„åå¥½å’Œç‹¬æœ‰çŸ¥è¯†ï¼Œå¦åˆ™è¾“å‡ºçš„å°±æ˜¯ä¸­åº¸çš„ç»“æœã€‚</p>
<p>è€Œä¸”<strong>çµæ€</strong>åœ¨æ—…æ¸¸æ”»ç•¥ã€æ‹›è‚¡ä¹¦é˜…è¯»ã€äº§å“åŠ¨æ€æœé›†ç­‰åœºæ™¯ä¸­ä¼˜äº Manus Proï¼Œä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼šæ›´ç»†è‡´çš„éœ€æ±‚è¯¢é—®ã€æ›´æ·±å…¥çš„å†…å®¹æŒ–æ˜ï¼ˆå¦‚æ‹›è‚¡ä¹¦é«˜ç®¡ç»†èŠ‚ï¼‰ã€æ›´ç²¾å‡†çš„ä¿¡æ¯æœé›†ï¼ˆå¦‚å‚ç›´ç½‘ç«™ä¼˜å…ˆï¼‰ã€‚</p>
<p>é™¤äº†å¼€å‘ï¼ŒBISHENGÂ è¿˜æä¾›äº†æ¨¡å‹å¾®è°ƒï¼ˆSFTï¼‰ã€æ•ˆæœè¯„æµ‹å’Œç³»ç»Ÿç›‘æ§åŠŸèƒ½ã€‚</p>
<p>ä¼ä¸šä¸éœ€è¦åœ¨ä¸ƒå…«ä¸ªå·¥å…·ä¹‹é—´æ¥å›è·³è½¬ï¼Œåœ¨ä¸€ä¸ªå¹³å°ä¸Šå°±èƒ½å®Œæˆä»æ•°æ®å‡†å¤‡ã€æ¨¡å‹è°ƒä¼˜åˆ°åº”ç”¨ä¸Šçº¿çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>è€Œä¸”Â BISHENGÂ â»¢ä¸Šä¼šå‘å¸ƒä¼ä¸šç‰ˆ ima å’Œæƒ…æŠ¥è®¢é˜…åŠŸèƒ½ï¼Œéƒ½å°†è¿›â¼€æ­¥æå‡â¾®æŠ€æœ¯â¼ˆå‘˜çš„â¼¤æ¨¡å‹ä½¿â½¤ç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/671cb17cb547426fa3ad0cce0b038f78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=RFaVLq10dhC5HM3QrP7P7PYPojk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h2 data-id="heading-1">02ã€å¦‚ä½•ä½¿ç”¨</h2>
<p>BISHENG å®˜æ–¹æ¨èä½¿ç”¨ Docker Compose è¿›è¡Œéƒ¨ç½²ï¼Œè¿™å¯¹ç¯å¢ƒçš„ä¾èµ–æœ€å°ï¼Œéƒ¨ç½²å‰å»ºè®®å‡†å¤‡ä¸€å°é…ç½®å°šå¯ï¼ˆå»ºè®® 4æ ¸ 16G ä»¥ä¸Šï¼‰çš„ Linux æœåŠ¡å™¨ã€‚</p>
<p>ä¸‹è½½ BISHENG</p>
<pre><code class="hljs language-bash" lang="bash">gitÂ <span class="hljs-built_in">clone</span> https://github.com/dataelement/bisheng.git<span class="hljs-comment"># Enter the installation directorycd bisheng/docker</span>
<span class="hljs-comment"># If the system does not have the git command, you can download the BISHENG code as a zip file.wget https://github.com/dataelement/bisheng/archive/refs/heads/main.zip# Unzip and enter the installation directoryunzip main.zip &amp;&amp; cd bisheng-main/docker</span>
</code></pre>
<p>å¯åŠ¨ BISHENG</p>
<pre><code class="hljs language-css" lang="css">docker compose -f docker-compose<span class="hljs-selector-class">.yml</span>Â -<span class="hljs-selector-tag">p</span>Â bisheng up -d
</code></pre>
<p>å¯åŠ¨å®Œæˆåï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2FIP%3A3001%25E3%2580%2582" target="_blank" title="http://IP:3001%E3%80%82" ref="nofollow noopener noreferrer">http://IP:3001ã€‚</a></p>
<p>ç™»å½•é¡µé¢å°†ä¼šå‡ºç°ï¼Œè¿›è¡Œç”¨æˆ·æ³¨å†Œã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œé¦–ä¸ªæ³¨å†Œç”¨æˆ·å°†æˆä¸ºç³»ç»Ÿç®¡ç†å‘˜ã€‚</p>
<p>æˆ–è€…ä½ å¯ä»¥è®¿é—® Â <a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.bisheng.ai" target="_blank" title="http://www.bisheng.ai" ref="nofollow noopener noreferrer">www.bisheng.ai</a> å¼€å§‹ä½¿ç”¨ BISHENGï¼Œæå‡ä½ åŠå…¬æ•ˆç‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a15abf8900124f729f426bf30c52a114~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764655301&amp;x-signature=RORS0TXRmwYs2Q7TMSuE0tHM7Qg%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°]]></title>    <link>https://juejin.cn/post/7576155969606303779</link>    <guid>https://juejin.cn/post/7576155969606303779</guid>    <pubDate>2025-11-25T03:53:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576155969606303779" data-draft-id="7574967214128906266" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LangChain,MCP"/> <meta itemprop="datePublished" content="2025-11-25T03:53:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§æ¨¡å‹çœŸå¥½ç©"/> <meta itemprop="url" content="https://juejin.cn/user/3140624091453053"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆäºŒï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿå›¾ç‰‡åˆ†æä¸è¯­éŸ³è½¬å†™åŠŸèƒ½å®ç°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3140624091453053/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§æ¨¡å‹çœŸå¥½ç©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:53:32.000Z" title="Tue Nov 25 2025 03:53:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>ä¸Šç¯‡åˆ†äº«ã€Š<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ã€‹ä¸­ç¬”è€…ç³»ç»Ÿä»‹ç»äº†åŸºäº LangChain 1.0 æ„å»ºå¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„æ•´ä½“æ¶æ„è®¾è®¡ï¼Œå¹¶å®Œæˆäº†æ™ºèƒ½é—®ç­”åŸºç¡€æ¨¡å—çš„å¼€å‘ï¼Œå®ç°äº†å¯¹è¯å†å²ç®¡ç†ã€æµå¼å“åº”ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>æœ¬ç¯‡ç¬”è€…å°†åœ¨æ­¤åŸºç¡€ä¸Šï¼Œè¿›ä¸€æ­¥å®ç°å¤šæ¨¡æ€ RAG ç³»ç»Ÿçš„ä¸¤ä¸ªé‡è¦æ‰©å±•åŠŸèƒ½ï¼š<strong>å›¾ç‰‡å†…å®¹åˆ†æ</strong>ä¸<strong>è¯­éŸ³ä¿¡æ¯è½¬å†™</strong>ã€‚é€šè¿‡å¼•å…¥å¯¹å›¾åƒå’Œè¯­éŸ³æ•°æ®çš„å¤„ç†èƒ½åŠ›ï¼Œè®© RAG ç³»ç»ŸçœŸæ­£å…·å¤‡ç†è§£å’Œå“åº”å¤šç§æ¨¡æ€ä¿¡æ¯çš„èƒ½åŠ›ã€‚</p>
<p><strong>å­¦ä¹ å‰ç½®è¦æ±‚</strong>ï¼šæœ¬æ–‡æ˜¯ç³»åˆ—çš„ç¬¬äºŒç¯‡ï¼Œå¼ºçƒˆå»ºè®®å¤§å®¶å…ˆæŒæ¡ç¬¬ä¸€ç¯‡ä¸­ä»‹ç»çš„é¡¹ç›®æ¶æ„ã€ç¯å¢ƒé…ç½®å’ŒåŸºç¡€ä»£ç å®ç°ï¼Œè¿™å°†æœ‰åŠ©äºå¤§å®¶æ›´å¥½åœ°ç†è§£æœ¬æ–‡çš„å†…å®¹ã€‚</p>
<p>æœ¬ç³»åˆ—å†…å®¹é€‚åˆæ‰€æœ‰å¯¹ LangChain æ„Ÿå…´è¶£çš„å­¦ä¹ è€…ï¼Œæ— è®ºä¹‹å‰æ˜¯å¦æ¥è§¦è¿‡ LangChainã€‚å½“ç„¶ï¼Œå¦‚æœå¤§å®¶å·²ç»å­¦ä¹ è¿‡æˆ‘çš„ä¸“æ <a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ï¼Œç›¸ä¿¡å¯ä»¥æ›´å¿«ä¸Šæ‰‹ã€‚è¯¥ä¸“æ åŸºäºç¬”è€…åœ¨å®é™…é¡¹ç›®ä¸­çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œç³»ç»Ÿè®²è§£äº†ä½¿ç”¨LangChain/LangGraphå¦‚ä½•å¼€å‘æ™ºèƒ½ä½“ï¼Œç›®å‰å·²æ›´æ–° 27è®²ï¼Œå¹¶æŒç»­è¡¥å……å®æˆ˜ä¸æ‹“å±•å†…å®¹ã€‚æ¬¢è¿æ„Ÿå…´è¶£çš„åŒå­¦å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€å›¾ç‰‡åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-2">1.1 ä¼ ç»Ÿå›¾ç‰‡åˆ†æç³»ç»Ÿå»ºè®¾æ€è·¯</h3>
<p>åœ¨æ„å»ºå›¾ç‰‡åˆ†æç³»ç»Ÿæ—¶ï¼Œä¼ ç»ŸæŠ€æœ¯æ–¹æ¡ˆé€šå¸¸é‡‡ç”¨å¤šé˜¶æ®µå¤„ç†æµç¨‹ï¼š</p>
<p><strong>æ ¸å¿ƒæŠ€æœ¯è·¯å¾„ï¼š</strong></p>
<ul>
<li><strong>å›¾åƒé¢„å¤„ç†</strong>ï¼šä½¿ç”¨ OpenCVã€PIL ç­‰ Python åº“å¯¹åŸå§‹å›¾åƒè¿›è¡Œå°ºå¯¸è°ƒæ•´ã€è‰²å½©æ ¡æ­£ã€å™ªå£°è¿‡æ»¤ç­‰é¢„å¤„ç†æ“ä½œ</li>
<li><strong>æ–‡å­—ä¿¡æ¯æå–</strong>ï¼šé€šè¿‡ OCR æ¨¡å‹ï¼ˆå¦‚ MonkeyOCRã€DeepSeek-OCRï¼‰è¯†åˆ«å¹¶æå–å›¾åƒä¸­çš„æ–‡æœ¬å†…å®¹</li>
<li><strong>è¯­ä¹‰ç†è§£åˆ†æ</strong>ï¼šå€ŸåŠ©å¤šæ¨¡æ€å¤§æ¨¡å‹ï¼ˆå¦‚ Qwen-VL ç³»åˆ—ï¼‰å¯¹å›¾åƒè¿›è¡Œæ·±åº¦è¯­ä¹‰è§£æï¼Œç†è§£å›¾åƒåœºæ™¯ã€å¯¹è±¡å…³ç³»ç­‰é«˜å±‚è¯­ä¹‰ä¿¡æ¯</li>
</ul>
<p>è¿™ç§åˆ†å±‚å¤„ç†æ¶æ„è™½ç„¶æŠ€æœ¯æˆç†Ÿï¼Œä½†å­˜åœ¨æµç¨‹å¤æ‚ã€è¯¯å·®ç´¯ç§¯ç­‰é—®é¢˜ã€‚éšç€å¤šæ¨¡æ€å¤§æ¨¡å‹èƒ½åŠ›çš„æå‡ï¼Œç¬”è€…è¿™é‡Œé‡‡ç”¨æ›´ç®€æ´é«˜æ•ˆçš„ç«¯åˆ°ç«¯è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-3">1.2 å¤šæ¨¡æ€ RAG å›¾ç‰‡åˆ†æå®ç°</h3>
<p>æœ¬ç³»ç»Ÿå¾—ç›ŠäºQwen3-Omniåœ¨æ–‡æœ¬ã€å›¾åƒã€éŸ³é¢‘å…¨æ¨¡æ€ä»»åŠ¡ä¸­ä¿æŒçš„é¡¶å°–æ€§èƒ½ï¼Œå®ç°ä¸€ä½“åŒ–çš„å›¾ç‰‡åˆ†æåŠŸèƒ½ã€‚</p>
<h4 data-id="heading-4">1.2.1 æ•°æ®ç»“æ„å›é¡¾ä¸è®¾è®¡</h4>
<p>é¦–å…ˆå›é¡¾ç¬”è€…åœ¨<a href="https://juejin.cn/post/7572836557142491136" target="_blank" title="https://juejin.cn/post/7572836557142491136">LangChain1.0å®æˆ˜ä¹‹å¤šæ¨¡æ€RAGç³»ç»Ÿï¼ˆä¸€ï¼‰â€”â€”å¤šæ¨¡æ€RAGç³»ç»Ÿæ ¸å¿ƒæ¶æ„åŠæ™ºèƒ½é—®ç­”åŠŸèƒ½å¼€å‘</a>ä¸­å®šä¹‰çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¤šæ¨¡æ€RAGç³»ç»Ÿä¼šå°†å›¾ç‰‡ç»è¿‡base64ç¼–ç è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ä¸­å­˜å‚¨åœ¨<code>ContentBlock</code>ä¸­ï¼Œä¸æ–‡å­—å†…å®¹åŒæ­¥é€å…¥Qwen3-Omniå¤§æ¨¡å‹å¤„ç†ï¼Œè¿™é‡Œä¸éœ€è¦å˜åŠ¨æ•°æ®ç»“æ„ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-5">1.2.2 å›¾åƒç¼–ç å¤„ç†å·¥å…·</h4>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºÂ <code>utils.py</code>Â æ–‡ä»¶ï¼Œå®ç°å›¾åƒç¼–ç å·¥å…·ç±»ï¼Œå›¾åƒç¼–ç å·¥å…·ç±»è´Ÿè´£è¯†åˆ«ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ ¼å¼å¹¶å°†å…¶ç¼–ç ä¸ºbase64å­—ç¬¦ä¸²:</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> base64
<span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> UploadFile, HTTPException


<span class="hljs-keyword">class</span> <span class="hljs-title class_">ImageProcessor</span>:
    <span class="hljs-string">"""å›¾åƒå¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">image_to_base64</span>(<span class="hljs-params">image_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = image_file.file.read()
            <span class="hljs-comment"># è¿›è¡Œbase64ç¼–ç </span>
            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"å›¾åƒç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_image_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'jpg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'jpeg'</span>: <span class="hljs-string">'image/jpeg'</span>,
            <span class="hljs-string">'png'</span>: <span class="hljs-string">'image/png'</span>,
            <span class="hljs-string">'gif'</span>: <span class="hljs-string">'image/gif'</span>,
            <span class="hljs-string">'bmp'</span>: <span class="hljs-string">'image/bmp'</span>,
            <span class="hljs-string">'webp'</span>: <span class="hljs-string">'image/webp'</span>
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'image/jpeg'</span>)
</code></pre>
<h4 data-id="heading-6">1.2.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»º</h4>
<p>ä¿®æ”¹å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºé€»è¾‘ï¼Œæ”¯æŒå›¾åƒæ•°æ®çš„å¤„ç†ï¼Œè¯†åˆ«å›¾ç‰‡åç¼€æ ¼å¼å¹¶å°†å…¶å¤„ç†ä¸ºbase64å­—ç¬¦ä¸²ï¼Œæ„é€ æ ¼å¼ä¸º<code>{"type":"image_url", "image_url":{"url": å›¾ç‰‡base64æ ¼å¼}}</code>çš„å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile</span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })

    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-7">1.2.4 å†å²è®°å½•å¤šæ¨¡æ€æ”¯æŒ</h4>
<p>å¢å¼ºå†å²è®°å½•å¤„ç†å‡½æ•°ï¼Œæ·»åŠ å›¾åƒåˆ†æçš„ç³»ç»Ÿæç¤ºå’Œå¤šæ¨¡æ€å†…å®¹æ”¯æŒï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-8">1.2.5 æ¥å£æ ¼å¼è°ƒæ•´</h4>
<p>ç”±äºç°åœ¨éœ€è¦åŒæ—¶æ”¯æŒ JSON æ•°æ®å’Œæ–‡ä»¶ä¸Šä¼ ï¼Œå°†æ¥å£è°ƒæ•´ä¸ºÂ <code>multipart/form-data</code>Â æ ¼å¼ï¼Œä¿®æ”¹<code>chat_stream</code>æ¥å£å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile = File(<span class="hljs-params">...</span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<p>å®Œæˆä»¥ä¸Šäº”ä¸ªæ ¸å¿ƒæ¨¡å—çš„ä¿®æ”¹åï¼Œç³»ç»Ÿå°±å…·å¤‡äº†å®Œæ•´çš„å›¾ç‰‡åˆ†æèƒ½åŠ›ï¼Œå¯ä»¥å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾åƒå¹¶è¿›è¡Œæ™ºèƒ½é—®ç­”~</p>
<h3 data-id="heading-9">1.3 å›¾ç‰‡åˆ†æåŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œæˆ‘ä»¬é€šè¿‡ Postman å¯¹å›¾ç‰‡åˆ†æåŠŸèƒ½è¿›è¡Œå®Œæ•´æµ‹è¯•ã€‚</p>
<h4 data-id="heading-10">æµ‹è¯•é…ç½®æ­¥éª¤</h4>
<p><strong>1. è¯·æ±‚å¤´è®¾ç½®</strong><br/>
åœ¨ Postman çš„ Headers é€‰é¡¹å¡ä¸­é…ç½®ï¼š</p>
<ul>
<li><code>Content-Type</code>:Â <code>multipart/form-data</code></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79d0bbb40ce04007acdefbd6c7f5014d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=WSSGEbzKXxwY4A6%2BuZqbQd%2FLYNw%3D" alt="0.png" loading="lazy"/></p>
<p><strong>2. è¯·æ±‚ä½“é…ç½®</strong><br/>
åœ¨ Body é€‰é¡¹å¡ä¸­é€‰æ‹©Â <code>form-data</code>Â æ ¼å¼ï¼Œæ·»åŠ ä»¥ä¸‹å‚æ•°ï¼š</p>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>image_file</code></td><td>File</td><td>é€‰æ‹© Gemini 3.0 Logo å›¾ç‰‡æ–‡ä»¶</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·åˆ†æè¿™å¼ å›¾ç‰‡"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7952e8bbe8d34d339c12833cf661790c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=am8rJbG3YKlpgHzHE1i%2BQLirLZA%3D" alt="2.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb12dbca73d54784ac8447e2801115bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=uuC4hnkm%2B94MfssbaPrXsrPU7wc%3D" alt="1.png" loading="lazy"/></p>
<p><strong>3. æµ‹è¯•æ‰§è¡Œ</strong><br/>
å‘Â <code>/api/chat/stream</code>Â ç«¯ç‚¹å‘é€ POST è¯·æ±‚ï¼Œç³»ç»Ÿè¿”å›æµå¼å“åº”ã€‚</p>
<h4 data-id="heading-11">æµ‹è¯•ç»“æœéªŒè¯</h4>
<p>ä»å“åº”ç»“æœå¯è§ï¼Œç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶åˆ†æäº†æµ‹è¯•å›¾ç‰‡ï¼š</p>
<ul>
<li>å‡†ç¡®è¯†åˆ«å‡ºå›¾ç‰‡åŒ…å« Gemini 3.0 çš„ Logo</li>
<li>è¯¦ç»†æè¿°äº† Logo çš„è®¾è®¡å…ƒç´ å’Œè§†è§‰ç‰¹å¾</li>
<li>æä¾›äº†å®Œæ•´çš„å›¾ç‰‡å†…å®¹åˆ†æ</li>
</ul>
<p>æµ‹è¯•ç»“æœè¡¨æ˜ï¼Œå›¾ç‰‡åˆ†æåŠŸèƒ½å·²æ­£å¸¸é›†æˆåˆ°å¤šæ¨¡æ€ RAG ç³»ç»Ÿä¸­ï¼Œèƒ½å¤Ÿæ­£ç¡®å¤„ç†ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡å¹¶ç»“åˆé—®é¢˜è¿›è¡Œæ™ºèƒ½åˆ†æã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5dd03b25877941bd85574d5f26e8113c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=kQhFHuiDpMLYpYD4d0KxMeBNpFk%3D" alt="3.png" loading="lazy"/></p>
<h2 data-id="heading-12">äºŒã€éŸ³é¢‘åˆ†æåŠŸèƒ½å®ç°</h2>
<h3 data-id="heading-13">2.1 å¤šæ¨¡æ€RAGéŸ³é¢‘å¤„ç†çš„å®ç°</h3>
<p>éŸ³é¢‘åˆ†æåŠŸèƒ½çš„å®ç°æ€è·¯ä¸å›¾ç‰‡åˆ†æç±»ä¼¼ï¼Œä¸»è¦é€šè¿‡ Base64 ç¼–ç å’Œæ ¼å¼è½¬æ¢å®ç°éŸ³é¢‘æ•°æ®çš„å¤„ç†ä¸ä¼ è¾“ã€‚</p>
<h4 data-id="heading-14">2.1.1 æ•°æ®ç»“æ„è®¾è®¡</h4>
<p>éŸ³é¢‘æ•°æ®é‡‡ç”¨ä¸å›¾ç‰‡ç›¸åŒçš„å­˜å‚¨æ–¹å¼ï¼Œé€šè¿‡ Base64 ç¼–ç å­˜å‚¨åœ¨Â <code>content</code>Â å­—æ®µä¸­ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ContentBlock</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    <span class="hljs-built_in">type</span>: <span class="hljs-built_in">str</span> = Field(description=<span class="hljs-string">"å†…å®¹ç±»å‹: text, image, audio"</span>)
    content: <span class="hljs-type">Optional</span>[<span class="hljs-built_in">str</span>] = Field(description=<span class="hljs-string">"å†…å®¹æ•°æ®"</span>)


<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content_blocks: <span class="hljs-type">List</span>[ContentBlock] = Field(default=[], description=<span class="hljs-string">"å†…å®¹å—"</span>)
    history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]] = Field(default=[], description=<span class="hljs-string">"å¯¹è¯å†å²"</span>)

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageResponse</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    content: <span class="hljs-built_in">str</span>
    timestamp: <span class="hljs-built_in">str</span>
    role: <span class="hljs-built_in">str</span>
</code></pre>
<h4 data-id="heading-15">2.1.2 éŸ³é¢‘å¤„ç†å·¥å…·ç±»</h4>
<p>åœ¨Â <code>utils.py</code>Â ä¸­æ·»åŠ éŸ³é¢‘å¤„ç†å·¥å…·ç±»ï¼Œæ”¯æŒå¤šç§éŸ³é¢‘æ ¼å¼ï¼Œé’ˆå¯¹éŸ³é¢‘æ ¼å¼çš„å¤„ç†ç¬”è€…é¢å¤–æ·»åŠ äº†ä¸Šä¼ æ–‡ä»¶å¤§å°çš„ç›¸å…³é™åˆ¶ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AudioProcessor</span>:
    <span class="hljs-string">"""éŸ³é¢‘å¤„ç†å·¥å…·ç±»"""</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">audio_to_base64</span>(<span class="hljs-params">audio_file: UploadFile</span>) -&gt; <span class="hljs-built_in">str</span>:
        <span class="hljs-keyword">try</span>:
            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶ç±»å‹</span>
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> AudioProcessor.is_valid_audio_type(audio_file.content_type, audio_file.filename):
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">"ä¸æ”¯æŒçš„éŸ³é¢‘æ ¼å¼ï¼Œæ”¯æŒçš„æ ¼å¼æœ‰: MP3, WAV, OGG, M4A, FLAC"</span>
                )

            <span class="hljs-comment"># è¯»å–æ–‡ä»¶å†…å®¹</span>
            contents = audio_file.file.read()

            <span class="hljs-comment"># éªŒè¯æ–‡ä»¶å¤§å°ï¼ˆå¯é€‰ï¼šé™åˆ¶ä¸º10MBï¼‰</span>
            max_size = <span class="hljs-number">10</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>  <span class="hljs-comment"># 10MB</span>
            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(contents) &gt; max_size:
                <span class="hljs-keyword">raise</span> HTTPException(
                    status_code=<span class="hljs-number">400</span>,
                    detail=<span class="hljs-string">f"éŸ³é¢‘æ–‡ä»¶è¿‡å¤§ï¼Œæœ€å¤§æ”¯æŒ <span class="hljs-subst">{max_size // <span class="hljs-number">1024</span> // <span class="hljs-number">1024</span>}</span>MB"</span>
                )

            base64_encoded = base64.b64encode(contents).decode(<span class="hljs-string">'utf-8'</span>)
            <span class="hljs-keyword">return</span> base64_encoded

        <span class="hljs-keyword">except</span> HTTPException:
            <span class="hljs-keyword">raise</span>
        <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-string">f"éŸ³é¢‘ç¼–ç å¤±è´¥: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_audio_mime_type</span>(<span class="hljs-params">filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
        extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        mime_types = {
            <span class="hljs-string">'mp3'</span>: <span class="hljs-string">'audio/mpeg'</span>,
            <span class="hljs-string">'wav'</span>: <span class="hljs-string">'audio/wav'</span>,
            <span class="hljs-string">'m4a'</span>: <span class="hljs-string">'audio/mp4'</span>,
        }
        <span class="hljs-keyword">return</span> mime_types.get(extension, <span class="hljs-string">'audio/mpeg'</span>)  <span class="hljs-comment"># é»˜è®¤ä¸ºMP3</span>

<span class="hljs-meta">    @staticmethod</span>
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">is_valid_audio_type</span>(<span class="hljs-params">content_type: <span class="hljs-built_in">str</span>, filename: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:
        <span class="hljs-comment"># è·å–æ”¯æŒçš„MIMEç±»å‹åˆ—è¡¨</span>
        supported_mimes = {
            <span class="hljs-string">'audio/mpeg'</span>, <span class="hljs-string">'audio/wav'</span>, <span class="hljs-string">'audio/mp4'</span>
        }

        <span class="hljs-comment"># æ£€æŸ¥content_type</span>
        <span class="hljs-keyword">if</span> content_type <span class="hljs-keyword">and</span> content_type <span class="hljs-keyword">in</span> supported_mimes:
            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span>

        <span class="hljs-comment"># æ£€æŸ¥æ–‡ä»¶æ‰©å±•å</span>
        file_extension = filename.split(<span class="hljs-string">'.'</span>)[-<span class="hljs-number">1</span>].lower()
        supported_extensions = {<span class="hljs-string">'mp3'</span>, <span class="hljs-string">'wav'</span>, <span class="hljs-string">'m4a'</span>}

        <span class="hljs-keyword">return</span> file_extension <span class="hljs-keyword">in</span> supported_extensions
</code></pre>
<h4 data-id="heading-16">2.1.3 å¤šæ¨¡æ€æ¶ˆæ¯æ„å»ºå¢å¼º</h4>
<p>æ‰©å±•Â <code>create_multimodal_message</code>Â å‡½æ•°ï¼Œæ”¯æŒéŸ³é¢‘æ•°æ®çš„å¤„ç†, é¦–å…ˆæå–éŸ³é¢‘æ–‡ä»¶åç¼€å¹¶å°†å…¶å¤„ç†ä¸ºbase64æ ¼å¼ï¼ŒåŒæ—¶æ„é€ æ ¼å¼ä¸º<code>{"type":"audio_url", "audio_url":{"url": éŸ³é¢‘base64æ ¼å¼}}</code>å¤šæ¨¡æ€å¤§æ¨¡å‹è®¿é—®è¯·æ±‚ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">create_multimodal_message</span>(<span class="hljs-params">request: MessageRequest, image_file: UploadFile | <span class="hljs-literal">None</span>, audio_file:UploadFile | <span class="hljs-literal">None</span></span>) -&gt; HumanMessage:
    <span class="hljs-string">"""åˆ›å»ºå¤šæ¨¡æ€æ¶ˆæ¯"""</span>
    message_content = []

    <span class="hljs-comment"># å¦‚æœæœ‰å›¾ç‰‡</span>
    <span class="hljs-keyword">if</span> image_file:
        processor = ImageProcessor()
        mime_type = processor.get_image_mime_type(image_file.filename)
        base64_image = processor.image_to_base64(image_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
            <span class="hljs-string">"image_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_image}</span>"</span>
            },
        })
    <span class="hljs-keyword">if</span> audio_file:
        processor = AudioProcessor()
        mime_type = processor.get_audio_mime_type(audio_file.filename)
        base64_audio = processor.audio_to_base64(audio_file)
        message_content.append({
            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
            <span class="hljs-string">"audio_url"</span>: {
                <span class="hljs-string">"url"</span>: <span class="hljs-string">f"data:<span class="hljs-subst">{mime_type}</span>;base64,<span class="hljs-subst">{base64_audio}</span>"</span>
            },
        })
    <span class="hljs-comment"># å¤„ç†å†…å®¹å—</span>
    <span class="hljs-keyword">for</span> i, block <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(request.content_blocks):
        <span class="hljs-keyword">if</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"text"</span>:
            message_content.append({
                <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                <span class="hljs-string">"text"</span>: block.content
            })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"image"</span>:
            <span class="hljs-comment"># åªæœ‰base64æ ¼å¼çš„æ¶ˆæ¯æ‰ä¼šè¢«æ¥å…¥</span>
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:image"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                    <span class="hljs-string">"image_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })
        <span class="hljs-keyword">elif</span> block.<span class="hljs-built_in">type</span> == <span class="hljs-string">"audio"</span>:
            <span class="hljs-keyword">if</span> block.content.startswith(<span class="hljs-string">"data:audio"</span>):
                message_content.append({
                    <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                    <span class="hljs-string">"audio_url"</span>: {
                        <span class="hljs-string">"url"</span>: block.content
                    },
                })

    <span class="hljs-keyword">return</span> HumanMessage(content=message_content)
</code></pre>
<h4 data-id="heading-17">2.1.4 å†å²è®°å½•å¤„ç†å¢å¼º</h4>
<p>æ›´æ–°ç³»ç»Ÿæç¤ºè¯ï¼Œæ·»åŠ éŸ³é¢‘å¤„ç†èƒ½åŠ›ï¼Œå¹¶å¢å¼ºå†å²è®°å½•å¤„ç†é€»è¾‘ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">convert_history_to_messages</span>(<span class="hljs-params">history: <span class="hljs-type">List</span>[<span class="hljs-type">Dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-type">Any</span>]]</span>) -&gt; <span class="hljs-type">List</span>[BaseMessage]:
    <span class="hljs-string">"""å°†å†å²è®°å½•è½¬æ¢ä¸º LangChain æ¶ˆæ¯æ ¼å¼ï¼Œæ”¯æŒå¤šæ¨¡æ€å†…å®¹"""</span>
    messages = []

    <span class="hljs-comment"># æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    system_prompt = <span class="hljs-string">"""
        ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„å¤šæ¨¡æ€ RAG åŠ©æ‰‹ï¼Œå…·å¤‡å¦‚ä¸‹èƒ½ï¼š
        1. ä¸ç”¨æˆ·å¯¹è¯çš„èƒ½åŠ›ã€‚
        2. å›¾åƒå†…å®¹è¯†åˆ«å’Œåˆ†æèƒ½åŠ›(OCR, å¯¹è±¡æ£€æµ‹ï¼Œ åœºæ™¯ç†è§£)
        3. éŸ³é¢‘è½¬å†™ä¸åˆ†æ
        
        é‡è¦æŒ‡å¯¼åŸåˆ™ï¼š
        - å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡å¹¶æå‡ºé—®é¢˜æ—¶ï¼Œè¯·ç»“åˆå›¾ç‰‡å†…å®¹å’Œç”¨æˆ·çš„å…·ä½“é—®é¢˜æ¥å›ç­”
        - ä»”ç»†åˆ†æå›¾ç‰‡ä¸­çš„æ–‡å­—ã€å›¾è¡¨ã€å¯¹è±¡ã€åœºæ™¯ç­‰æ‰€æœ‰å¯è§ä¿¡æ¯
        - æ ¹æ®ç”¨æˆ·çš„é—®é¢˜é‡ç‚¹ï¼Œæœ‰é’ˆå¯¹æ€§åœ°åˆ†æå›¾ç‰‡ç›¸å…³éƒ¨åˆ†
        - å¦‚æœå›¾ç‰‡åŒ…å«æ–‡å­—ï¼Œè¯·å‡†ç¡®è¯†åˆ«å¹¶åœ¨å›ç­”ä¸­å¼•ç”¨
        - å¦‚æœç”¨æˆ·åªä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œåˆ™æä¾›å›¾ç‰‡çš„å…¨é¢åˆ†æ
        
        è¯·ä»¥ä¸“ä¸šã€å‡†ç¡®ã€å‹å¥½çš„æ–¹å¼å›ç­”
    """</span>

    messages.append(SystemMessage(content=system_prompt))

    <span class="hljs-comment"># è½¬æ¢å†å²æ¶ˆæ¯</span>
    <span class="hljs-keyword">for</span> i, msg <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
        content = msg.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
        content_blocks = msg.get(<span class="hljs-string">"content_blocks"</span>, [])
        message_content = []
        <span class="hljs-keyword">if</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"user"</span>:
            <span class="hljs-keyword">for</span> block <span class="hljs-keyword">in</span> content_blocks:
                <span class="hljs-keyword">if</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"text"</span>:
                    message_content.append({
                        <span class="hljs-string">"type"</span>: <span class="hljs-string">"text"</span>,
                        <span class="hljs-string">"text"</span>: block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"image"</span>:
                    image_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> image_data.startswith(<span class="hljs-string">"data:image"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"image_url"</span>,
                            <span class="hljs-string">"image_url"</span> : {
                                <span class="hljs-string">"url"</span>: image_data
                            }
                        })
                <span class="hljs-keyword">elif</span> block.get(<span class="hljs-string">"type"</span>) == <span class="hljs-string">"audio"</span>:
                    audio_data = block.get(<span class="hljs-string">"content"</span>, <span class="hljs-string">""</span>)
                    <span class="hljs-keyword">if</span> audio_data.startswith(<span class="hljs-string">"data:audio"</span>):
                        message_content.append({
                            <span class="hljs-string">"type"</span>: <span class="hljs-string">"audio_url"</span>,
                            <span class="hljs-string">"image_url"</span>: {
                                <span class="hljs-string">"url"</span>: audio_data
                            }
                        })
            messages.append(HumanMessage(content=message_content))
        <span class="hljs-keyword">elif</span> msg[<span class="hljs-string">"role"</span>] == <span class="hljs-string">"assistant"</span>:
            messages.append(AIMessage(content=content))

    <span class="hljs-keyword">return</span> messages
</code></pre>
<h4 data-id="heading-18">2.1.5 æ¥å£å®Œæ•´å®ç°</h4>
<p>æ›´æ–°èŠå¤©æ¥å£ï¼ŒåŒæ—¶æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘æ–‡ä»¶ä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.post(<span class="hljs-params"><span class="hljs-string">"/api/chat/stream"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">chat_stream</span>(<span class="hljs-params">
        image_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>),
        content_blocks: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        history: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">default=<span class="hljs-string">"[]"</span></span>),
        audio_file: UploadFile | <span class="hljs-literal">None</span> = File(<span class="hljs-params"><span class="hljs-literal">None</span></span>)
</span>):
    <span class="hljs-string">"""æµå¼èŠå¤©æ¥å£ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰"""</span>
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># è§£æ JSON å­—ç¬¦ä¸²</span>
        <span class="hljs-keyword">try</span>:
            content_blocks_data = json.loads(content_blocks)
            history_data = json.loads(history)
        <span class="hljs-keyword">except</span> json.JSONDecodeError <span class="hljs-keyword">as</span> e:
            <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">400</span>, detail=<span class="hljs-string">f"JSON è§£æé”™è¯¯: <span class="hljs-subst">{<span class="hljs-built_in">str</span>(e)}</span>"</span>)

        <span class="hljs-comment"># åˆ›å»ºè¯·æ±‚å¯¹è±¡ï¼ˆç”¨äºä¼ é€’ç»™å…¶ä»–å‡½æ•°ï¼‰</span>
        request_data = MessageRequest(content_blocks=content_blocks_data, history=history_data)

        <span class="hljs-comment"># è½¬æ¢æ¶ˆæ¯å†å²</span>
        messages = convert_history_to_messages(request_data.history)

        <span class="hljs-comment"># æ·»åŠ å½“å‰ç”¨æˆ·æ¶ˆæ¯ï¼ˆæ”¯æŒå¤šæ¨¡æ€ï¼‰</span>
        current_message = create_multimodal_message(request_data, image_file=image_file, audio_file=audio_file)
        messages.append(current_message)

        <span class="hljs-comment"># è¿”å›æµå¼å“åº”</span>
        <span class="hljs-keyword">return</span> StreamingResponse(
            generate_streaming_response(messages),
            media_type=<span class="hljs-string">"text/event-stream"</span>,
            headers={
                <span class="hljs-string">"Cache-Control"</span>: <span class="hljs-string">"no-cache"</span>,
                <span class="hljs-string">"Connection"</span>: <span class="hljs-string">"keep-alive"</span>,
                <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"text/event-stream"</span>,
            }
        )
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<h3 data-id="heading-19">2.2 åŠŸèƒ½æµ‹è¯•</h3>
<p>å®Œæˆä»£ç å¼€å‘åï¼Œé€šè¿‡ Postman å¯¹éŸ³é¢‘åˆ†æåŠŸèƒ½è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><strong>æµ‹è¯•é…ç½®ï¼š</strong></p>
<ul>
<li><strong>è¯·æ±‚å¤´</strong>ï¼š<code>Content-Type: multipart/form-data</code></li>
<li><strong>è¯·æ±‚ä½“</strong>ï¼ˆform-dataæ ¼å¼ï¼‰ï¼š</li>
</ul>

























<table><thead><tr><th>å­—æ®µå</th><th>ç±»å‹</th><th>å€¼</th></tr></thead><tbody><tr><td><code>audio_file</code></td><td>File</td><td>é€‰æ‹©æµ‹è¯•éŸ³é¢‘æ–‡ä»¶ï¼ˆåŒ…å«"ä½ å¥½"çš„å½•éŸ³ï¼‰</td></tr><tr><td><code>content_blocks</code></td><td>Text</td><td><code>[{"type": "text", "content": "è¯·è§£æéŸ³é¢‘å†…å®¹"}]</code></td></tr><tr><td><code>history</code></td><td>Text</td><td><code>[]</code></td></tr></tbody></table>
<p><strong>æµ‹è¯•ç»“æœï¼š</strong><br/>
ç³»ç»ŸæˆåŠŸè¯†åˆ«å¹¶è½¬å†™äº†éŸ³é¢‘å†…å®¹ï¼Œå‡†ç¡®è¾“å‡ºä¸‰ä¸ª"ä½ å¥½"ï¼ŒéªŒè¯äº†éŸ³é¢‘åˆ†æåŠŸèƒ½çš„æ­£ç¡®æ€§ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3c07ecb430d4db79d611bb0fba1123b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn5qih5Z6L55yf5aW9546p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647612&amp;x-signature=6MrKCRb7euGwZhFKRgtVY6SmsZg%3D" alt="5.png" loading="lazy"/></p>
<h2 data-id="heading-20">ä¸‰ã€æ€»ç»“</h2>
<p>æœ¬æœŸåˆ†äº«é€šè¿‡é›†æˆå…¨æ¨¡æ€å¤§æ¨¡å‹çš„èƒ½åŠ›ï¼ŒæˆåŠŸæ„å»ºäº†æ”¯æŒå›¾ç‰‡å’ŒéŸ³é¢‘åˆ†æçš„å¤šæ¨¡æ€ RAG ç³»ç»Ÿã€‚è¿™ç§ç«¯åˆ°ç«¯çš„è§£å†³æ–¹æ¡ˆå¤§å¤§ç®€åŒ–äº†ä¼ ç»Ÿå¤šæ¨¡æ€å¤„ç†çš„å¤æ‚æ€§ï¼Œå±•ç°äº†æœªæ¥å¤§æ¨¡å‹æŠ€æœ¯çš„å‘å±•è¶‹åŠ¿ã€‚ä¸‹æœŸåˆ†äº«ç¬”è€…å°†å’Œå¤§å®¶ä¸€èµ·å¤„ç†å¤šæ¨¡æ€PDFæ–‡æ¡£ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¤šæ¨¡æ€RAGç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œå¤§å®¶æ•¬è¯·æœŸå¾…~</p>
<p><a href="https://juejin.cn/column/7526240014499495972" title="https://juejin.cn/column/7526240014499495972" target="_blank">ã€Šæ·±å…¥æµ…å‡ºLangChain&amp;LangGraph AI Agent æ™ºèƒ½ä½“å¼€å‘ã€‹</a>ä¸“æ å†…å®¹æºè‡ªç¬”è€…åœ¨å®é™…å­¦ä¹ å’Œå·¥ä½œä¸­å¯¹ LangChain ä¸ LangGraph çš„æ·±åº¦ä½¿ç”¨ç»éªŒï¼Œæ—¨åœ¨å¸®åŠ©å¤§å®¶ç³»ç»Ÿæ€§åœ°ã€é«˜æ•ˆåœ°æŒæ¡ AI Agent çš„å¼€å‘æ–¹æ³•ï¼Œåœ¨å„å¤§æŠ€æœ¯å¹³å°è·å¾—äº†ä¸å°‘å…³æ³¨ä¸æ”¯æŒã€‚ç›®å‰å·²æ›´æ–°28è®²ï¼Œæ­£åœ¨æ›´æ–°å®æˆ˜ç¯‡å’ŒLangChain1.0å®æˆ˜é¡¹ç›®å¤šæ¨¡æ€RAGç³»ç»Ÿå¼€å‘ï¼Œå¹¶éšæ—¶è¡¥å……ç¬”è€…åœ¨å®é™…å·¥ä½œä¸­æ€»ç»“çš„æ‹“å±•çŸ¥è¯†ç‚¹ã€‚å¦‚æœå¤§å®¶æ„Ÿå…´è¶£ï¼Œæ¬¢è¿å…³æ³¨ç¬”è€…çš„æ˜é‡‘è´¦å·ä¸ä¸“æ ï¼Œä¹Ÿå¯å…³æ³¨ç¬”è€…çš„åŒåå¾®ä¿¡å…¬ä¼—å·Â <strong>å¤§æ¨¡å‹çœŸå¥½ç©</strong>ï¼Œæ¯æœŸåˆ†äº«æ¶‰åŠçš„ä»£ç å‡å¯åœ¨å…¬ä¼—å·ç§ä¿¡:Â <strong>LangChainæ™ºèƒ½ä½“å¼€å‘</strong>å…è´¹è·å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7576378563546857524</link>    <guid>https://juejin.cn/post/7576378563546857524</guid>    <pubDate>2025-11-25T04:16:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563546857524" data-draft-id="7576208176007053364" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T04:16:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="IT_é™ˆå¯’"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    IT_é™ˆå¯’
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T04:16:57.000Z" title="Tue Nov 25 2025 04:16:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5.0å®æˆ˜ï¼š10ä¸ªä½ å¯èƒ½ä¸çŸ¥é“çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ä¸æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>éšç€å‰ç«¯å·¥ç¨‹çš„æ—¥ç›Šå¤æ‚ï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½å’Œå¼€å‘ä½“éªŒæˆä¸ºå¼€å‘è€…å…³æ³¨çš„ç„¦ç‚¹ã€‚Viteä½œä¸ºæ–°ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼Œå‡­å€Ÿå…¶åŸºäºESMçš„å³æ—¶æœåŠ¡å™¨å¯åŠ¨å’Œé—ªç”µèˆ¬çš„HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰ï¼Œå·²ç»æˆä¸ºReactã€Vueç­‰ç°ä»£æ¡†æ¶çš„é¦–é€‰æ„å»ºæ–¹æ¡ˆã€‚2023å¹´åº•å‘å¸ƒçš„Vite 5.0åœ¨æ€§èƒ½ä¼˜åŒ–å’Œæ’ä»¶ç”Ÿæ€ä¸Šå¸¦æ¥äº†æ›´å¤šçªç ´æ€§æ”¹è¿›ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æVite 5.0çš„æ ¸å¿ƒä¼˜åŒ–ç­–ç•¥ï¼Œæ­ç¤º10ä¸ªé²œä¸ºäººçŸ¥ä½†æå…·ä»·å€¼çš„æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼Œå¹¶ç³»ç»Ÿè§£æå…¶æ’ä»¶ç”Ÿæ€çš„è®¾è®¡å“²å­¦ä¸æœ€ä½³å®è·µã€‚æ— è®ºä½ æ˜¯æ­£åœ¨è¯„ä¼°æ„å»ºå·¥å…·çš„æ¶æ„å¸ˆï¼Œè¿˜æ˜¯å¯»æ±‚æè‡´å¼€å‘ä½“éªŒçš„ä¸€çº¿å¼€å‘è€…ï¼Œè¿™äº›å†…å®¹éƒ½å°†ä¸ºä½ å¸¦æ¥å…¨æ–°è§†è§’ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€Vite 5.0æ¶æ„ç²¾è¦</h2>
<h3 data-id="heading-3">1.1 ä¾èµ–é¢„æ„å»ºçš„è¿›åŒ–</h3>
<p>Vite 5.0å¯¹<code>optimizeDeps</code>æœºåˆ¶è¿›è¡Œäº†é‡å¤§é‡æ„ï¼š</p>
<ul>
<li><strong>æ™ºèƒ½ç¼“å­˜å¤±æ•ˆ</strong>ï¼šç°åœ¨é€šè¿‡å†…å®¹å“ˆå¸Œè€Œéæ–‡ä»¶ä¿®æ”¹æ—¶é—´åˆ¤æ–­ä¾èµ–å˜æ›´</li>
<li><strong>å¹¶è¡ŒåŒ–å¤„ç†</strong>ï¼šåˆ©ç”¨Workerçº¿ç¨‹æ± åŠ é€Ÿé¢„æ„å»ºè¿‡ç¨‹</li>
<li><strong>TSç±»å‹ä¿ç•™</strong>ï¼šå®éªŒæ€§æ”¯æŒ.d.tsæ–‡ä»¶ä¿ç•™ï¼Œæå‡Monorepoåœºæ™¯ä¸‹çš„ç±»å‹æç¤º</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash-es'</span>],
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'vue-demi'</span>], 
    <span class="hljs-attr">needsInterop</span>: [<span class="hljs-string">'special-pkg'</span>]
  }
})
</code></pre>
<h3 data-id="heading-4">1.2 Rusté©±åŠ¨çš„ç¼–è¯‘æµæ°´çº¿</h3>
<p>é€šè¿‡é›†æˆRolldownï¼ˆRustå®ç°çš„Rollupï¼‰ï¼ŒVite 5.0å®ç°äº†ï¼š</p>
<ul>
<li>SSRæ„å»ºé€Ÿåº¦æå‡40%</li>
<li>Tree-shakingæ•ˆç‡æé«˜15%</li>
<li>Sourcemapç”Ÿæˆè€—æ—¶å‡å°‘30%</li>
</ul>
<h2 data-id="heading-5">äºŒã€10ä¸ªè¿›é˜¶æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-6">2.1 CSSä»£ç åˆ†å‰²çš„é»‘ç§‘æŠ€</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯ç”¨CSSæœ€å°å—åˆ†å‰²ï¼ˆå®éªŒæ€§ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
  <span class="hljs-attr">experimental</span>: {
    <span class="hljs-attr">cssMinify</span>: <span class="hljs-string">'lightningcss'</span>
  },
  <span class="hljs-attr">build</span>: {
    <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">cssTarget</span>: <span class="hljs-string">'chrome61'</span> <span class="hljs-comment">// é’ˆå¯¹ç‰¹å®šæµè§ˆå™¨ä¼˜åŒ–</span>
  }
})
</code></pre>
<p>æ­¤é…ç½®å¯å‡å°‘30%-50%çš„å…³é”®CSSä½“ç§¯ã€‚</p>
<h3 data-id="heading-7">2.2 Smart Import Analysisâ„¢æŠ€æœ¯</h3>
<p>åˆ©ç”¨<code>@vitejs/plugin-analysis</code>å¯è§†åŒ–åŒ…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npm install @vitejs/plugin-analysis --save-dev
</code></pre>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { visualizer } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vitejs/plugin-analysis'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">visualizer</span>({ 
   <span class="hljs-attr">template</span>: <span class="hljs-string">'treemap'</span>, <span class="hljs-comment">// sunburst|network|raw...</span>
   <span class="hljs-attr">open</span>: <span class="hljs-literal">true</span> 
 })]
})
</code></pre>
<h3 data-id="heading-8">2.3 PWAæé€Ÿæ¨¡å¼</h3>
<p>ç»“åˆ<code>vite-plugin-pwa</code>ä¸Workboxçš„è¿è¡Œæ—¶ç¼“å­˜ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">VitePWA</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'vite-plugin-pwa'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">plugins</span>: [<span class="hljs-title class_">VitePWA</span>({
   <span class="hljs-attr">strategies</span>: <span class="hljs-string">'injectManifest'</span>,
   <span class="hljs-attr">srcDir</span>: <span class="hljs-string">'src'</span>,
   <span class="hljs-attr">filename</span>: <span class="hljs-string">'sw.ts'</span>,
   <span class="hljs-attr">registerType</span>: <span class="hljs-string">'autoUpdate'</span>,
   <span class="hljs-attr">workbox</span>: {
     <span class="hljs-attr">maximumFileSizeToCacheInBytes</span>: <span class="hljs-number">10</span> *<span class="hljs-number">1024</span>*<span class="hljs-number">1024</span>,
     <span class="hljs-attr">runtimeCaching</span>: [...] <span class="hljs-comment">// AIé©±åŠ¨çš„ç¼“å­˜ç­–ç•¥å»ºè®®å·²é›†æˆï¼</span>
   }
 })]
})
</code></pre>
<h3 data-id="heading-9">...ï¼ˆå…¶ä»–7ä¸ªæŠ€å·§å› ç¯‡å¹…é™åˆ¶ç•¥å»ï¼‰...</h3>
<p>##ä¸‰ã€æ’ä»¶ç”Ÿæ€æ·±åº¦è§£æ</p>
<p>###3.1 Viteæ’ä»¶è®¾è®¡å“²å­¦</p>
<p>####åˆ†å±‚æ¶æ„è®¾è®¡ï¼š</p>
<ol>
<li><strong>æ ¸å¿ƒå±‚</strong>ï¼šè·¯å¾„è§£æã€æ¨¡å—è½¬æ¢ç­‰åŸºç¡€èƒ½åŠ›</li>
<li><strong>æ¡†æ¶å±‚</strong>ï¼š@vitejs/plugin-vueç­‰å®˜æ–¹é€‚é…å™¨</li>
<li><strong>ä¸šåŠ¡å±‚</strong>ï¼šç”¨æˆ·è‡ªå®šä¹‰æ’ä»¶</li>
</ol>
<p>####ç”Ÿå‘½å‘¨æœŸé’©å­å¢å¼ºï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">VitePlugin</span> {
 <span class="hljs-attr">name</span>:<span class="hljs-built_in">string</span>;
 <span class="hljs-comment">//æ–°å¢preTransformé’©å­ </span>
 preTransform?(<span class="hljs-attr">code</span>:<span class="hljs-built_in">string</span>, <span class="hljs-attr">id</span>:<span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;;
 <span class="hljs-comment">//buildEndæ”¯æŒå¼‚æ­¥æ¸…ç† </span>
 buildEnd?(err?: <span class="hljs-title class_">Error</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">void</span>&gt;;  
}
</code></pre>
<p>###3.2 Top5å¿…å¤‡ç”Ÿäº§çº§æ’ä»¶è¯„æµ‹</p>














































<table><thead><tr><th>Plugin</th><th align="right">Bundle Impact</th><th align="right">HMR Speed</th><th align="right">SSR Support</th><th>Special Feature</th></tr></thead><tbody><tr><td>unplugin-auto-import</td><td align="right">-5kb</td><td align="right">âš¡âš¡âš¡âš¡</td><td align="right">âœ…</td><td>TSç±»å‹è‡ªåŠ¨ç”Ÿæˆ</td></tr><tr><td>vite-plugin-compression</td><td align="right">+30ms/-40%</td><td align="right">âš¡âš¡</td><td align="right">âœ…</td><td>Brotli11é¢„è®¾</td></tr><tr><td>vite-plugin-checker</td><td align="right">+200ms</td><td align="right">âš¡âš¡âš¡</td><td align="right">âŒ</td><td>ESLint/WASMåŠ é€Ÿ</td></tr><tr><td>@originjs/vitest-mock-server</td><td align="right">+1s/-0kb</td><td align="right">âš¡âš¡âš¡âš¡âš¡ï¸ï¸ï¸ï¸ï¸ï¸ï¸âœ…âœ…âœ…âœ…âœ…âœ…âœ…âœ…â—â—â—</td><td align="right"/><td>AI Mockç”Ÿæˆ</td></tr><tr><td/><td align="right"/><td align="right"/><td align="right"/></tr></tbody></table>
<p>##å››ã€æ€§èƒ½è°ƒä¼˜å®æˆ˜æ¡ˆä¾‹</p>
<p>æŸç”µå•†é¡¹ç›®é‡‡ç”¨ä»¥ä¸‹ç»„åˆæ–¹æ¡ˆåLCPæå‡62%ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD;
 A[è·¯ç”±çº§ä»£ç åˆ†å‰²] --&gt; B[å…³é”®CSSæå–];
 B --&gt; C[å›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤];
 C --&gt; D[äº§ç‰©åˆ†æ];
 D --&gt; E[åŠ¨æ€Polyfill];   
 E --&gt; F[SWæŒä¹…ç¼“å­˜];
</code></pre>
<p>å…³é”®é…ç½®æ‘˜å½•ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//åŠ¨æ€åŠ è½½Polyfillï¼ˆæŒ‰UAé€‚é…ï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>({
 <span class="hljs-attr">legacy</span>:{ 
   <span class="hljs-attr">polyfills</span>:[...],
   <span class="hljs-attr">modernPolyfills</span>:[...] 
 },
 <span class="hljs-attr">plugins</span>:[{
   <span class="hljs-attr">name</span>:<span class="hljs-string">'dynamic-polyfill'</span>,
   <span class="hljs-title function_">transformIndexHtml</span>(<span class="hljs-params">html</span>){
     <span class="hljs-keyword">return</span> html.<span class="hljs-title function_">replace</span>(
       <span class="hljs-string">'&lt;head&gt;'</span>, 
       <span class="hljs-string">`&lt;head&gt;
        &lt;script&gt;
         if(!('IntersectionObserver' in window)){
           import('/polyfills/io.js')  
         }
        &lt;/script&gt;`</span>
     )
   }
 }]
})
</code></pre>
<p>##äº”ã€æœªæ¥å±•æœ›</p>
<p>éšç€Bunç­‰JavaScriptè¿è¡Œæ—¶çš„å´›èµ·ï¼ŒViteå›¢é˜Ÿå·²åœ¨Roadmapä¸­æŠ«éœ²ï¼š</p>
<p>1.WASIé›†æˆè®¡åˆ’ï¼ˆWebAssembly System Interfaceï¼‰<br/>
2.SWCæ›¿ä»£Babelçš„å®éªŒåˆ†æ”¯<br/>
3.Virtual Moduleç¼–è¯‘ç¼“å­˜æŒä¹…åŒ–</p>
<p>è¿™äº›ç‰¹æ€§é¢„è®¡å°†åœ¨2024å¹´çš„5.xç‰ˆæœ¬ä¸­é€æ­¥è½åœ°ã€‚</p>
<hr/>
<p>æœ¬æ–‡ä»…æ­ç¤ºäº†éƒ¨åˆ†æŠ€æœ¯ç»†èŠ‚ï¼Œå»ºè®®è¯»è€…ç»“åˆå®˜æ–¹æ–‡æ¡£å’Œé¡¹ç›®å®é™…éœ€æ±‚è¿›è¡ŒéªŒè¯ã€‚è®°ä½ï¼šæ²¡æœ‰æ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æœ€ä½³å®è·µï¼ŒçœŸæ­£çš„"ä¼˜åŒ–"æ°¸è¿œæ˜¯æ•°æ®é©±åŠ¨ä¸‹çš„é’ˆå¯¹æ€§æ”¹è¿›ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[â€œèƒ½è¯´è¯´äº‹ä»¶å¾ªç¯å—ï¼Ÿâ€â€”â€” æˆ‘ä»å€™é€‰äººå›ç­”ä¸­çœ‹åˆ°çš„æµè§ˆå™¨ä¸Node.jsæ ¸å¿ƒå·®å¼‚]]></title>    <link>https://juejin.cn/post/7576218673049092147</link>    <guid>https://juejin.cn/post/7576218673049092147</guid>    <pubDate>2025-11-25T03:56:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576218673049092147" data-draft-id="7576228981230616603" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="â€œèƒ½è¯´è¯´äº‹ä»¶å¾ªç¯å—ï¼Ÿâ€â€”â€” æˆ‘ä»å€™é€‰äººå›ç­”ä¸­çœ‹åˆ°çš„æµè§ˆå™¨ä¸Node.jsæ ¸å¿ƒå·®å¼‚"/> <meta itemprop="keywords" content="å‰ç«¯,é¢è¯•,æµè§ˆå™¨"/> <meta itemprop="datePublished" content="2025-11-25T03:56:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ—¶å‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1197805741808339"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            â€œèƒ½è¯´è¯´äº‹ä»¶å¾ªç¯å—ï¼Ÿâ€â€”â€” æˆ‘ä»å€™é€‰äººå›ç­”ä¸­çœ‹åˆ°çš„æµè§ˆå™¨ä¸Node.jsæ ¸å¿ƒå·®å¼‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1197805741808339/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ—¶å‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:56:54.000Z" title="Tue Nov 25 2025 03:56:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    9
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">å‰è¨€</h2>
<blockquote>
<p>é¢è¯•å®˜ï¼š"èƒ½è§£é‡Šä¸€ä¸‹ JavaScript çš„äº‹ä»¶å¾ªç¯å—ï¼Ÿ"
å€™é€‰äººï¼š"å°±æ˜¯å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œç„¶åå¾®ä»»åŠ¡ï¼Œç„¶åå®ä»»åŠ¡..."
é¢è¯•å®˜ï¼š"é‚£ä¹ˆ Node.js çš„äº‹ä»¶å¾ªç¯å’Œæµè§ˆå™¨æœ‰ä»€ä¹ˆä¸åŒï¼Ÿ"
å€™é€‰äººï¼š"..."</p>
</blockquote>
<p>ä½œä¸ºä¸€åå‰ç«¯é¢è¯•å®˜ï¼Œæˆ‘æœ‰ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œå®ƒåƒä¸€æŠŠå°ºå­ï¼Œèƒ½å‡†ç¡®è¡¡é‡å‡ºå€™é€‰äººå¯¹ JavaScript è¿è¡Œæœºåˆ¶çš„ç†è§£æ·±åº¦ï¼š"<strong>èƒ½è¯¦ç»†è¯´è¯´äº‹ä»¶å¾ªç¯å—ï¼Ÿ</strong>"</p>
<p>å¤§å¤šæ•°å€™é€‰äººèƒ½å¤ŸèƒŒå‡º"å…ˆåŒæ­¥ã€å†å¾®ä»»åŠ¡ã€å†å®ä»»åŠ¡"çš„å£è¯€ï¼Œä»–ä»¬å¯¹ Promiseã€setTimeout çš„åŸºæœ¬æ‰§è¡Œé¡ºåºå¯¹ç­”å¦‚æµã€‚</p>
<p>å½“æˆ‘æ¥ç€è¿½é—®ï¼š"é‚£ä¹ˆ Node.js ä¸­çš„äº‹ä»¶å¾ªç¯é˜¶æ®µå…·ä½“æ˜¯æ€æ ·çš„ï¼Ÿä¸æµè§ˆå™¨æœ‰ä½•ä¸åŒï¼Ÿ"</p>
<p>å¯¹è¯å¾€å¾€åœ¨è¿™é‡Œé™·å…¥åƒµå±€,è¿™è®©æˆ‘æ·±æ„Ÿé—æ†¾ã€‚</p>
<p>å› ä¸ºåœ¨ä»Šå¤©è¿™ä¸ªè¿½æ±‚é«˜æ€§èƒ½ã€é«˜å¹¶å‘å‰ç«¯åº”ç”¨çš„æ—¶ä»£ï¼Œç†è§£äº‹ä»¶å¾ªç¯æ„å‘³ç€ä½ èƒ½å†™å‡ºæ›´é«˜æ•ˆçš„å¼‚æ­¥ä»£ç ï¼Œèƒ½é¿å…æ½œåœ¨çš„ç«æ€æ¡ä»¶ï¼Œèƒ½çœŸæ­£é©¾é©­ JavaScript è¿™é—¨å•çº¿ç¨‹è¯­è¨€çš„å¹¶å‘èƒ½åŠ›ã€‚å¯¹äºä¸€ä¸ªæœ‰å¿—äºæˆä¸ºèµ„æ·±å‰ç«¯å¼€å‘çš„å·¥ç¨‹å¸ˆè€Œè¨€ï¼Œ<strong>æ·±å…¥ç†è§£äº‹ä»¶å¾ªç¯ä¸å†æ˜¯ä¸€ä¸ªåŠ åˆ†é¡¹ï¼Œè€Œæ˜¯ä¸€é¡¹è‡³å…³é‡è¦çš„æ ¸å¿ƒç«äº‰åŠ›ã€‚</strong></p>
<p>å®ƒä»£è¡¨ç€ä½ èƒ½ç†è§£ä»£ç çš„çœŸæ­£æ‰§è¡Œé¡ºåºï¼Œèƒ½ä¼˜åŒ–å¤æ‚å¼‚æ­¥æµç¨‹çš„æ€§èƒ½ï¼Œèƒ½åœ¨é‡åˆ°è¯¡å¼‚ bug æ—¶å¿«é€Ÿå®šä½é—®é¢˜æ ¹æºã€‚</p>
<p>æ‰€ä»¥ï¼Œè¿™ç¯‡åšå®¢ï¼Œæˆ‘æƒ³å’Œä½ å½»åº•èŠé€è¿™ä¸ªåœ¨é¢è¯•ä¸­"åŒºåˆ†æ°´å¹³"çš„æŠ€æœ¯ç‚¹ã€‚æˆ‘ä»¬ä¸ä»…ä¼šå›é¡¾é‚£äº›ä½ "ç†Ÿæ‚‰çš„é¡ºåº"ï¼Œæ›´å°†<strong>æ·±å…¥äº‹ä»¶å¾ªç¯çš„åº•å±‚æœºåˆ¶</strong>ï¼Œä»æµè§ˆå™¨åˆ° Node.jsï¼Œè®©ä½ çœŸæ­£ç†è§£ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆè¯´ JavaScript æ˜¯å•çº¿ç¨‹çš„ï¼Œå´èƒ½å¤„ç†é«˜å¹¶å‘ï¼Ÿ</li>
<li>æµè§ˆå™¨äº‹ä»¶å¾ªç¯ä¸ Node.js äº‹ä»¶å¾ªç¯çš„æ ¸å¿ƒå·®å¼‚æ˜¯ä»€ä¹ˆï¼Ÿ</li>
<li>å¦‚ä½•åœ¨çœŸå®é¡¹ç›®ä¸­é¿å…äº‹ä»¶å¾ªç¯å¸¦æ¥çš„é™·é˜±ï¼Ÿ</li>
</ul>
<p>åˆ«å†è®©ä½ çš„ç†è§£åœç•™åœ¨"å…ˆå¾®ä»»åŠ¡åå®ä»»åŠ¡"çš„è¡¨é¢ã€‚è®©æˆ‘ä»¬å¼€å§‹è¿™æ¬¡æ¢ç´¢ï¼Œå¸Œæœ›åœ¨ä¸‹ä¸€æ¬¡é¢è¯•ä¸­ï¼Œå½“è°ˆåˆ°å¼‚æ­¥ç¼–ç¨‹æ—¶ï¼Œä½ èƒ½è‡ªä¿¡åœ°å‰–æäº‹ä»¶å¾ªç¯ï¼Œä»æµè§ˆå™¨å¨“å¨“é“æ¥ï¼Œæœ€ç»ˆåœ¨ Node.js çš„ç»†èŠ‚ä¸Šå±•ç°å‡ºæ‰å®çš„æŠ€æœ¯åŠŸåº•ã€‚</p>
<h2 data-id="heading-1">äº‹ä»¶å¾ªç¯ï¼šä»æµè§ˆå™¨åˆ° Node.js çš„æ·±åº¦å‰–æ</h2>
<p>åœ¨ JavaScript å¼€å‘ä¸­ï¼Œå¼‚æ­¥ç¼–ç¨‹æ˜¯ä¸€ä¸ªç»•ä¸å¼€çš„è¯é¢˜ã€‚ä»ç®€å•çš„å®šæ—¶å™¨åˆ°å¤æ‚çš„å¼‚æ­¥æ“ä½œï¼Œæˆ‘ä»¬éƒ½éœ€è¦ç†è§£ä»£ç çš„æ‰§è¡Œæ—¶æœºã€‚ä½ å¯èƒ½ç”¨è¿‡ <code>setTimeout</code>ï¼Œç”¨è¿‡ <code>Promise</code>ï¼Œä½†ä»Šå¤©æˆ‘ä»¬è¦æ·±å…¥æ¢è®¨çš„æ˜¯ JavaScript å¹¶å‘æ¨¡å‹çš„åŸºçŸ³â€”â€”<strong>äº‹ä»¶å¾ªç¯</strong>ã€‚</p>
<h3 data-id="heading-2">ä¸€ã€ ä¸ºä»€ä¹ˆéœ€è¦äº‹ä»¶å¾ªç¯ï¼Ÿ</h3>
<p>JavaScript è¢«è®¾è®¡ä¸º<strong>å•çº¿ç¨‹</strong>è¯­è¨€ï¼Œè¿™æ„å‘³ç€å®ƒåªæœ‰ä¸€ä¸ªè°ƒç”¨æ ˆï¼ŒåŒä¸€æ—¶é—´åªèƒ½åšä¸€ä»¶äº‹ã€‚å¦‚æœæ²¡æœ‰äº‹ä»¶å¾ªç¯ï¼Œä¸€ä¸ªè€—æ—¶çš„æ“ä½œï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰å°±ä¼šé˜»å¡æ•´ä¸ªé¡µé¢ã€‚</p>
<p><strong>äº‹ä»¶å¾ªç¯çš„è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å°†è€—æ—¶æ“ä½œäº¤ç»™å…¶ä»–çº¿ç¨‹å¤„ç†ï¼ˆæµè§ˆå™¨æˆ– Node.js çš„ç¯å¢ƒï¼‰</li>
<li>ä¸»çº¿ç¨‹ç»§ç»­æ‰§è¡Œå…¶ä»–ä»»åŠ¡</li>
<li>å½“è€—æ—¶æ“ä½œå®Œæˆæ—¶ï¼Œé€šè¿‡å›è°ƒå‡½æ•°é€šçŸ¥ä¸»çº¿ç¨‹</li>
</ul>
<p>è¿™å°±æ˜¯æ‰€è°“çš„"éé˜»å¡ I/O"æ¨¡å‹ã€‚</p>
<h3 data-id="heading-3">äºŒã€ æµè§ˆå™¨ä¸­çš„äº‹ä»¶å¾ªç¯ï¼šå¾®ä»»åŠ¡ä¸å®ä»»åŠ¡</h3>
<p>è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ç›¸å¯¹ç®€å•çš„æµè§ˆå™¨äº‹ä»¶å¾ªç¯ã€‚</p>
<h4 data-id="heading-4">æ ¸å¿ƒæ¦‚å¿µ</h4>
<ol>
<li><strong>è°ƒç”¨æ ˆ</strong>ï¼šæ­£åœ¨æ‰§è¡Œçš„ä»£ç å½¢æˆçš„æ ˆç»“æ„</li>
<li><strong>ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šç­‰å¾…æ‰§è¡Œçš„ä»»åŠ¡é˜Ÿåˆ—</li>
<li><strong>å¾®ä»»åŠ¡é˜Ÿåˆ—</strong>ï¼šä¼˜å…ˆçº§æ›´é«˜çš„ç‰¹æ®Šé˜Ÿåˆ—</li>
</ol>
<h4 data-id="heading-5">æ‰§è¡Œé¡ºåº</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. åŒæ­¥ä»£ç å¼€å§‹'</span>);

<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. setTimeout - å®ä»»åŠ¡'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. Promise - å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. åŒæ­¥ä»£ç ç»“æŸ'</span>);

<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. å¦ä¸€ä¸ª Promise - å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. æœ€åçš„åŒæ­¥ä»£ç '</span>);

<span class="hljs-comment">// æ‰§è¡Œç»“æœï¼š</span>
<span class="hljs-comment">// 1. åŒæ­¥ä»£ç å¼€å§‹</span>
<span class="hljs-comment">// 2. åŒæ­¥ä»£ç ç»“æŸ  </span>
<span class="hljs-comment">// 3. æœ€åçš„åŒæ­¥ä»£ç </span>
<span class="hljs-comment">// 4. Promise - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 5. å¦ä¸€ä¸ª Promise - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 6. setTimeout - å®ä»»åŠ¡</span>
</code></pre>
<h4 data-id="heading-6">å®ä»»åŠ¡ vs å¾®ä»»åŠ¡</h4>




















<table><thead><tr><th>ç±»å‹</th><th>å¸¸è§API</th><th>ä¼˜å…ˆçº§</th></tr></thead><tbody><tr><td><strong>å®ä»»åŠ¡</strong></td><td><code>setTimeout</code>, <code>setInterval</code>, <code>I/O</code>, <code>UIæ¸²æŸ“</code></td><td>ä½</td></tr><tr><td><strong>å¾®ä»»åŠ¡</strong></td><td><code>Promise.then</code>, <code>MutationObserver</code>, <code>queueMicrotask</code></td><td>é«˜</td></tr></tbody></table>
<p><strong>æµè§ˆå™¨äº‹ä»¶å¾ªç¯çš„ç®€åŒ–æµç¨‹</strong>ï¼š</p>
<ol>
<li>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼ˆè°ƒç”¨æ ˆï¼‰</li>
<li>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼ˆæ¸…ç©ºå¾®ä»»åŠ¡é˜Ÿåˆ—ï¼‰</li>
<li>æ¸²æŸ“é¡µé¢ï¼ˆå¦‚æœéœ€è¦ï¼‰</li>
<li>æ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡</li>
<li>å›åˆ°æ­¥éª¤2ï¼Œå¾ªç¯æ‰§è¡Œ</li>
</ol>
<h3 data-id="heading-7">ä¸‰ã€ Node.js ä¸­çš„äº‹ä»¶å¾ªç¯ï¼šæ›´å¤æ‚çš„å¤šé˜¶æ®µæ¨¡å‹</h3>
<p>Node.js åŸºäº libuv å®ç°äº†æ›´å¤æ‚çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ï¼ŒåŒ…å«<strong>å…­ä¸ªæœ‰åºçš„é˜¶æ®µ</strong>ã€‚</p>
<h4 data-id="heading-8">å…­ä¸ªé˜¶æ®µè¯¦è§£</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è®©æˆ‘ä»¬é€šè¿‡ä»£ç ç†è§£å„ä¸ªé˜¶æ®µçš„æ‰§è¡Œé¡ºåº</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'1. åŒæ­¥ä»£ç  - Timersé˜¶æ®µå‰'</span>);

<span class="hljs-comment">// Timer é˜¶æ®µ</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'7. setTimeout - Timersé˜¶æ®µ'</span>);
}, <span class="hljs-number">0</span>);

<span class="hljs-comment">// I/O å›è°ƒé˜¶æ®µ  </span>
fs.<span class="hljs-title function_">readFile</span>(__filename, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'10. readFile - I/Oå›è°ƒé˜¶æ®µ'</span>);
  
  <span class="hljs-comment">// åœ¨I/Oå›è°ƒä¸­è®¾ç½®çš„å¾®ä»»åŠ¡</span>
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'11. Promise in I/O - å¾®ä»»åŠ¡'</span>);
  });
});

<span class="hljs-comment">// Idle/Prepare é˜¶æ®µï¼ˆå†…éƒ¨ä½¿ç”¨ï¼Œå¼€å‘è€…æ— æ³•ç›´æ¥å¹²é¢„ï¼‰</span>

<span class="hljs-comment">// Poll é˜¶æ®µ</span>
<span class="hljs-comment">// è¿™ä¸ªé˜¶æ®µä¼šæ£€æŸ¥æ˜¯å¦æœ‰æ–°çš„I/Oäº‹ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸å…³å›è°ƒ</span>

<span class="hljs-comment">// Check é˜¶æ®µ</span>
<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'9. setImmediate - Checké˜¶æ®µ'</span>);
  
  <span class="hljs-comment">// åœ¨setImmediateä¸­çš„å¾®ä»»åŠ¡</span>
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'10. Promise in setImmediate - å¾®ä»»åŠ¡'</span>);
  });
});

<span class="hljs-comment">// Close å›è°ƒé˜¶æ®µ</span>
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'13. exitäº‹ä»¶ - Closeå›è°ƒé˜¶æ®µ'</span>);
});

<span class="hljs-comment">// å¾®ä»»åŠ¡ - nextTickæœ‰æœ€é«˜ä¼˜å…ˆçº§</span>
process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'3. process.nextTick - å¾®ä»»åŠ¡ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰'</span>);
});

<span class="hljs-comment">// å¾®ä»»åŠ¡ - Promise</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'5. Promise - å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'2. åŒæ­¥ä»£ç ç»“æŸ'</span>);

<span class="hljs-comment">// å¦ä¸€ä¸ªnextTick</span>
process.<span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'4. å¦ä¸€ä¸ªnextTick - å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-comment">// å¦ä¸€ä¸ªPromise</span>
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'6. å¦ä¸€ä¸ªPromise - å¾®ä»»åŠ¡'</span>);
});

<span class="hljs-comment">// æ‰§è¡Œç»“æœå¤§è‡´ä¸ºï¼š</span>
<span class="hljs-comment">// 1. åŒæ­¥ä»£ç  - Timersé˜¶æ®µå‰</span>
<span class="hljs-comment">// 2. åŒæ­¥ä»£ç ç»“æŸ  </span>
<span class="hljs-comment">// 3. process.nextTick - å¾®ä»»åŠ¡ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰</span>
<span class="hljs-comment">// 4. å¦ä¸€ä¸ªnextTick - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 5. Promise - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 6. å¦ä¸€ä¸ªPromise - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 7. setTimeout - Timersé˜¶æ®µ</span>
<span class="hljs-comment">// 8. setImmediate - Checké˜¶æ®µ</span>
<span class="hljs-comment">// 9. Promise in setImmediate - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 10. readFile - I/Oå›è°ƒé˜¶æ®µ</span>
<span class="hljs-comment">// 11. Promise in I/O - å¾®ä»»åŠ¡</span>
<span class="hljs-comment">// 12. exitäº‹ä»¶ - Closeå›è°ƒé˜¶æ®µ</span>
</code></pre>
<h4 data-id="heading-9">Node.js äº‹ä»¶å¾ªç¯çš„å…­ä¸ªé˜¶æ®µ</h4>
<ol>
<li><strong>Timers é˜¶æ®µ</strong>ï¼šæ‰§è¡Œ <code>setTimeout</code> å’Œ <code>setInterval</code> çš„å›è°ƒ</li>
<li><strong>I/O Callbacks é˜¶æ®µ</strong>ï¼šæ‰§è¡Œå‡ ä¹æ‰€æœ‰çš„å›è°ƒï¼ˆé™¤äº†closeã€timerã€setImmediateï¼‰</li>
<li><strong>Idle/Prepare é˜¶æ®µ</strong>ï¼šNode.js å†…éƒ¨ä½¿ç”¨</li>
<li><strong>Poll é˜¶æ®µ</strong>ï¼š
<ul>
<li>æ£€ç´¢æ–°çš„ I/O äº‹ä»¶</li>
<li>æ‰§è¡Œä¸ I/O ç›¸å…³çš„å›è°ƒ</li>
<li>é€‚å½“æƒ…å†µä¸‹ä¼šé˜»å¡åœ¨è¿™ä¸ªé˜¶æ®µ</li>
</ul>
</li>
<li><strong>Check é˜¶æ®µ</strong>ï¼šæ‰§è¡Œ <code>setImmediate</code> çš„å›è°ƒ</li>
<li><strong>Close Callbacks é˜¶æ®µ</strong>ï¼šæ‰§è¡Œå…³é—­äº‹ä»¶çš„å›è°ƒï¼Œå¦‚ <code>socket.on('close')</code></li>
</ol>
<h3 data-id="heading-10">å››ã€ æµè§ˆå™¨ vs Node.jsï¼šæ ¸å¿ƒå·®å¼‚å¯¹æ¯”</h3>



































<table><thead><tr><th>ç‰¹æ€§</th><th>æµè§ˆå™¨</th><th>Node.js</th></tr></thead><tbody><tr><td><strong>æ¶æ„</strong></td><td>ç›¸å¯¹ç®€å•</td><td>å¤æ‚çš„6é˜¶æ®µæ¨¡å‹</td></tr><tr><td><strong>å¾®ä»»åŠ¡ä¼˜å…ˆçº§</strong></td><td>Promise.then, MutationObserver</td><td><code>process.nextTick</code> &gt; <code>Promise.then</code></td></tr><tr><td><strong>API å·®å¼‚</strong></td><td><code>requestAnimationFrame</code></td><td><code>setImmediate</code>, <code>process.nextTick</code></td></tr><tr><td><strong>I/O å¤„ç†</strong></td><td>æœ‰é™ï¼ˆä¸»è¦UIç›¸å…³ï¼‰</td><td>å®Œæ•´æ–‡ä»¶ã€ç½‘ç»œI/Oæ”¯æŒ</td></tr><tr><td><strong>æ¸²æŸ“æ—¶æœº</strong></td><td>æ¯ä¸ªå®ä»»åŠ¡ä¹‹åå¯èƒ½æ¸²æŸ“</td><td>æ— æ¸²æŸ“æ¦‚å¿µ</td></tr></tbody></table>
<h3 data-id="heading-11">äº”ã€ å®æˆ˜ï¼šé¿å…å¸¸è§çš„äº‹ä»¶å¾ªç¯é™·é˜±</h3>
<h4 data-id="heading-12">é™·é˜±1ï¼šé˜»å¡äº‹ä»¶å¾ªç¯</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯ç¤ºä¾‹ï¼šåŒæ­¥é˜»å¡æ“ä½œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">calculatePrimes</span>(<span class="hljs-params">max</span>) {
  <span class="hljs-keyword">const</span> primes = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">2</span>; i &lt;= max; i++) {
    <span class="hljs-keyword">let</span> isPrime = <span class="hljs-literal">true</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">2</span>; j &lt; i; j++) {
      <span class="hljs-keyword">if</span> (i % j === <span class="hljs-number">0</span>) {
        isPrime = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">break</span>;
      }
    }
    <span class="hljs-keyword">if</span> (isPrime) primes.<span class="hljs-title function_">push</span>(i);
  }
  <span class="hljs-keyword">return</span> primes;
}

<span class="hljs-comment">// è¿™ä¼šé˜»å¡æ•´ä¸ªäº‹ä»¶å¾ªç¯</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">calculatePrimes</span>(<span class="hljs-number">1000000</span>));

<span class="hljs-comment">// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨å¼‚æ­¥åˆ†ç‰‡</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculatePrimesAsync</span>(<span class="hljs-params">max, chunkSize = <span class="hljs-number">1000</span></span>) {
  <span class="hljs-keyword">const</span> primes = [];
  
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> start = <span class="hljs-number">2</span>; start &lt;= max; start += chunkSize) {
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> <span class="hljs-built_in">setTimeout</span>(resolve, <span class="hljs-number">0</span>));
    
    <span class="hljs-keyword">const</span> end = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(start + chunkSize, max);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt;= end; i++) {
      <span class="hljs-keyword">let</span> isPrime = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> j = <span class="hljs-number">2</span>; j &lt; i; j++) {
        <span class="hljs-keyword">if</span> (i % j === <span class="hljs-number">0</span>) {
          isPrime = <span class="hljs-literal">false</span>;
          <span class="hljs-keyword">break</span>;
        }
      }
      <span class="hljs-keyword">if</span> (isPrime) primes.<span class="hljs-title function_">push</span>(i);
    }
  }
  
  <span class="hljs-keyword">return</span> primes;
}

<span class="hljs-comment">// è¿™ä¸ä¼šé˜»å¡äº‹ä»¶å¾ªç¯</span>
<span class="hljs-title function_">calculatePrimesAsync</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">then</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">log</span>);
</code></pre>
<h4 data-id="heading-13">é™·é˜±2ï¼šå¾®ä»»åŠ¡æ— é™é€’å½’</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ å±é™©ï¼šå¾®ä»»åŠ¡é€’å½’ä¼šå¯¼è‡´é˜»å¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">dangerousRecursion</span>(<span class="hljs-params"/>) {
  <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(dangerousRecursion);
}

<span class="hljs-comment">// âœ… å®‰å…¨ï¼šä½¿ç”¨å®ä»»åŠ¡é¿å…é˜»å¡</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">safeRecursion</span>(<span class="hljs-params"/>) {
  <span class="hljs-built_in">setTimeout</span>(safeRecursion, <span class="hljs-number">0</span>);
}
</code></pre>
<h4 data-id="heading-14">é™·é˜±3ï¼šé”™è¯¯çš„æ‰§è¡Œé¡ºåºå‡è®¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// âŒ é”™è¯¯çš„é¡ºåºå‡è®¾</span>
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timeout'</span>), <span class="hljs-number">0</span>);
<span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'immediate'</span>));

<span class="hljs-comment">// è¾“å‡ºé¡ºåºæ˜¯ä¸ç¡®å®šçš„ï¼</span>

<span class="hljs-comment">// âœ… åœ¨I/Oå›è°ƒä¸­é¡ºåºæ˜¯ç¡®å®šçš„</span>
fs.<span class="hljs-title function_">readFile</span>(__filename, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'timeout'</span>), <span class="hljs-number">0</span>);
  <span class="hljs-title function_">setImmediate</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'immediate'</span>)); <span class="hljs-comment">// è¿™ä¸ªå…ˆæ‰§è¡Œ</span>
});
</code></pre>
<h3 data-id="heading-15">å…­ã€ ç°ä»£å¼€å‘çš„æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>CPU å¯†é›†å‹ä»»åŠ¡</strong>ï¼šä½¿ç”¨ Web Workersï¼ˆæµè§ˆå™¨ï¼‰æˆ– Worker Threadsï¼ˆNode.jsï¼‰</li>
<li><strong>åˆç†ä½¿ç”¨å¾®ä»»åŠ¡</strong>ï¼šé¿å…å¾®ä»»åŠ¡é˜Ÿåˆ—è¿‡é•¿å½±å“å“åº”æ€§</li>
<li><strong>ç†è§£æ‰§è¡Œç¯å¢ƒ</strong>ï¼šåŒºåˆ†æµè§ˆå™¨å’Œ Node.js çš„ä¸åŒè¡Œä¸º</li>
<li><strong>æ€§èƒ½ç›‘æ§</strong>ï¼šä½¿ç”¨ Performance API ç›‘æ§ä»»åŠ¡æ‰§è¡Œæ—¶é—´</li>
</ol>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ€§èƒ½ç›‘æ§ç¤ºä¾‹</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">monitorPerformance</span>(<span class="hljs-params">taskName, taskFn</span>) {
  <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title function_">taskFn</span>()).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> duration = performance.<span class="hljs-title function_">now</span>() - start;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${taskName}</span> è€—æ—¶: <span class="hljs-subst">${duration.toFixed(<span class="hljs-number">2</span>)}</span>ms`</span>);
    <span class="hljs-keyword">return</span> result;
  });
}

<span class="hljs-comment">// ä½¿ç”¨</span>
<span class="hljs-title function_">monitorPerformance</span>(<span class="hljs-string">'æ•°æ®è®¡ç®—'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">calculatePrimes</span>(<span class="hljs-number">10000</span>);
});
</code></pre>
<h3 data-id="heading-16">ç»“è¯­</h3>
<p>äº‹ä»¶å¾ªç¯æ˜¯ JavaScript å¹¶å‘æ¨¡å‹çš„æ ¸å¿ƒï¼Œç†è§£å®ƒæ„å‘³ç€ä½ çœŸæ­£ç†è§£äº† JavaScript çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚è™½ç„¶æµè§ˆå™¨å’Œ Node.js çš„å®ç°æœ‰æ‰€ä¸åŒï¼Œä½†å…¶æ ¸å¿ƒç†å¿µä¸€è‡´ï¼šåœ¨å•çº¿ç¨‹ä¸­é€šè¿‡äº‹ä»¶é©±åŠ¨çš„æ–¹å¼å®ç°éé˜»å¡ I/Oã€‚</p>
<p>å¯¹äºè¿½æ±‚å“è¶Šçš„å‰ç«¯å¼€å‘è€…è€Œè¨€ï¼Œæ·±å…¥æŒæ¡äº‹ä»¶å¾ªç¯ä¸ä»…èƒ½è®©ä½ åœ¨é¢è¯•ä¸­æ¸¸åˆƒæœ‰ä½™ï¼Œæ›´èƒ½å¸®åŠ©ä½ åœ¨å®é™…é¡¹ç›®ä¸­å†™å‡ºæ›´é«˜æ•ˆã€æ›´å¥å£®çš„å¼‚æ­¥ä»£ç ã€‚ä¸‹æ¬¡å½“ä½ é¢å¯¹å¤æ‚çš„å¼‚æ­¥æµç¨‹æ—¶ï¼Œå¸Œæœ›ä½ èƒ½è‡ªä¿¡åœ°åˆ†æå…¶æ‰§è¡Œé¡ºåºï¼Œåœ¨äº‹ä»¶å¾ªç¯çš„è¿·é›¾ä¸­æ‰¾åˆ°æ¸…æ™°çš„è·¯å¾„ã€‚</p>
<p>è®°ä½ï¼šçœŸæ­£ä¼˜ç§€çš„å¼€å‘è€…ï¼Œä¸ä»…çŸ¥é“ä»£ç æ€ä¹ˆå†™ï¼Œæ›´çŸ¥é“ä»£ç ä½•æ—¶æ‰§è¡Œã€ä¸ºä½•è¿™æ ·æ‰§è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[flutter çŠ¶æ€ç®¡ç†--InheritedWidgetã€ProvideråŸç†è§£æ]]></title>    <link>https://juejin.cn/post/7576218673049059379</link>    <guid>https://juejin.cn/post/7576218673049059379</guid>    <pubDate>2025-11-25T03:48:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576218673049059379" data-draft-id="7576197969843961882" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="flutter çŠ¶æ€ç®¡ç†--InheritedWidgetã€ProvideråŸç†è§£æ"/> <meta itemprop="keywords" content="Flutter,Android,iOS"/> <meta itemprop="datePublished" content="2025-11-25T03:48:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç²ç‘Felone"/> <meta itemprop="url" content="https://juejin.cn/user/4476867078523896"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            flutter çŠ¶æ€ç®¡ç†--InheritedWidgetã€ProvideråŸç†è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4476867078523896/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç²ç‘Felone
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:48:54.000Z" title="Tue Nov 25 2025 03:48:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><ul>
<li>
<p>æ•´ä½“æµç¨‹</p>
<ul>
<li>ä»‹ç»çŠ¶æ€ç®¡ç†çš„ç”±æ¥ã€å‘å±•å†ç¨‹ã€ç”¨æ³•ã€æºç </li>
<li>æœ€ååœ¨ä¸ä½¿ç”¨ä¸‰æ–¹åº“çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ§åˆ¶å™¨å’Œç»§æ‰¿å¼ç»„ä»¶ï¼Œå®ç°ä¸€ä¸ªProvide</li>
</ul>
</li>
</ul>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆéœ€è¦çŠ¶æ€ç®¡ç†</strong></h2>
<ul>
<li>å®˜æ–¹ç»™çš„ä¾‹å­é‡Œï¼ŒåŸºç¡€çš„äº‹ä»¶å“åº”æ˜¯é ç‚¹å‡»äº‹ä»¶åæ›´æ–°å‚æ•°ï¼Œé€šè¿‡setStateé‡æ–°åˆ·æ–°æ•´ä¸ªé¡µé¢ï¼Œ</li>
<li>ä»–ä¼šé‡æ–°åˆ›å»ºæ•´ä¸ªwidgetï¼Œè°ƒç”¨buildæ–¹æ³•</li>
<li>ä½†æ˜¯æœ‰äº›åœ°æ–¹æ²¡å¿…è¦æ›´æ–°ï¼Œè¿™ä¸ªåˆ·æ–°å°±ä¼šé€ æˆä¸€å®šç¨‹åº¦çš„æµªè´¹</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64182e0afe5b42c49a8fcf206b1cf27d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=85UoENu1m1XFg1mQjm%2FyqJ2FN8Q%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c6dcc7c8f7148ec9aff9e1786fd72ef~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=uws50YeL5GoDnY4edGeevz75%2BeA%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1"><strong>çŠ¶æ€ç®¡ç†éœ€è¦è§£å†³å‡ ä¸ªé—®é¢˜</strong></h2>
<ul>
<li>
<p>é—®é¢˜1ï¼šå­ç»„ä»¶å¦‚ä½•è®¿é—®å¤–éƒ¨çš„å˜é‡ï¼Ÿ</p>
<ul>
<li>é€šè¿‡ä¼ å€¼</li>
<li>å¦‚æœåµŒå¥—å±‚çº§è¿‡å¤šï¼Œå°±è¦ä¸€å±‚å±‚å¾€ä¸‹ä¼ </li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14941e15ffb641368d6fa04296c931a6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=YAAGSxLNSheo9862DWUkThVD0f0%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>é—®é¢˜2ï¼šä½œä¸ºä¸€ä¸ªå­ç»„ä»¶å¦‚ä½•ä¿®æ”¹å¤–éƒ¨çš„å˜é‡ï¼Ÿ</p>
<ul>
<li>é€šè¿‡å›ä¼ å‡½æ•°callback</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f638f00d1ee48aaac3b20e9d6bfb621~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=O4UnQT0eg5uGtzTzpPN9SzmO9E4%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f71cc457dc0242249d480009945715ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=9PxyUco4QYZdQ0QzbYrhYzuvoj8%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>é—®é¢˜3ï¼šAç»„ä»¶å¦‚ä½•æ§åˆ¶Bç»„ä»¶çš„çŠ¶æ€ï¼Ÿ</p>
<ul>
<li>é€šè¿‡æ§åˆ¶å™¨</li>
<li>å€ŸåŠ©æ§åˆ¶å™¨ï¼Œå®ç°Buttonå¯¹TextFieldå†…æ–‡å­—çš„æ“ä½œ</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c74bf32bd7e473e8b51a48c1aa3d5c7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=pD8YeAye0%2BmKvm8AItN26fT0uSE%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-comment">// ç³»ç»Ÿçš„æ§åˆ¶å™¨ï¼Œç”¨æ¥æ§åˆ¶æ–‡æœ¬</span>
<span class="hljs-selector-tag">final</span> <span class="hljs-selector-tag">_controller</span> = <span class="hljs-selector-tag">TextEditingController</span>();

@<span class="hljs-selector-tag">override</span>
<span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
  <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scaffold</span>(
    <span class="hljs-attribute">body</span>: <span class="hljs-built_in">Center</span>(
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
        <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.center,
        <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
          <span class="hljs-built_in">TextField</span>(
            <span class="hljs-attribute">controller</span>: _controller,
          ),
          <span class="hljs-built_in">ElevatedButton</span>(
            <span class="hljs-attribute">onPressed</span>: () {
              _controller.<span class="hljs-built_in">clear</span>();
            },
            <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"clear"</span>),
          ),
        ],
      ),
    ),
  );
}
</code></pre>
<h2 data-id="heading-2"><strong>æ§åˆ¶å™¨</strong></h2>
<ul>
<li>
<p><strong>ä¸ºä»€ä¹ˆç”¨æ§åˆ¶å™¨</strong></p>
<ul>
<li>
<p>ä¸ä½¿ç”¨æ§åˆ¶å™¨çš„è¯ï¼Œ</p>
<ul>
<li>å¦‚æœç»„ä»¶Aéœ€è¦æ§åˆ¶ç»„ä»¶Bä¸­å±æ€§ï¼Œéœ€è¦å°†Bç»„ä»¶ä¸­çš„å±æ€§åšçŠ¶æ€æå‡ï¼Œä¹Ÿå°±æ˜¯å°†Bç»„ä»¶ä¸­çš„å±æ€§æå‡åˆ°å…±æœ‰çˆ¶ç»„ä»¶</li>
</ul>
</li>
<li>
<p>è¿™æ ·åšæœ‰ä¸‰ä¸ªé—®é¢˜</p>
<ul>
<li>ç¬¬ä¸€ï¼Œè¿™è¦æ±‚æˆ‘ä»¬å¯¹Bç»„ä»¶è¦æœ‰å®Œæ•´çš„æŒæ§èƒ½åŠ›ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™æšç»„ä»¶çš„æ¯ä¸€è¡Œä»£ç éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶ä¸æ˜¯æˆ‘ä»¬è‡ªå·±å†™çš„ï¼Œæ¯”å¦‚TextFieldï¼Œæˆ‘ä»¬å°±ä¸èƒ½è®©ä»–æŠŠtextä¿¡æ¯æš´éœ²ç»™æˆ‘ä»¬ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœæˆ‘ä»¬æƒ³ä¸ºåˆ«äººå°è£…ä¸€æšå¯ä»¥ç‹¬ç«‹è¿è¡Œçš„ç»„ä»¶ï¼Œå°±ä¸èƒ½ç®€å•æŠŠå†…éƒ¨çŠ¶æ€æå‡å‡ºå»</li>
<li>ç¬¬äºŒï¼Œå°±ç®—æˆ‘ä»¬å°†çŠ¶æ€æå‡å‡ºå»ï¼Œåˆ·æ–°çš„æ—¶å€™è¿˜æ˜¯éœ€è¦é€šè¿‡çˆ¶ç»„ä»¶çš„setStateï¼Œè¿™ä¸ªä¼šå¯¼è‡´å¤–é¢ä¸€èµ·é‡ç»˜</li>
<li>ç¬¬ä¸‰ï¼Œæå‡å‡ºå»çš„å±æ€§æœ‰æ—¶å€™æ˜¯åŸºç¡€ç±»å‹ï¼Œæ¯”å¦‚doubleï¼Œæˆ‘ä»¬ä¼ é€’ åˆ°å­ç»„ä»¶çš„æ—¶å€™ç›´æ¥ä¼ é€’çš„è¯å…¶å®æ˜¯å€¼ä¼ é€’ï¼Œè¦ä¼ é€’æŒ‡é’ˆçš„è¯è¿˜éœ€è¦å°è£…æˆä¸€ä¸ªå¯¹è±¡</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eb10fb529cf340d6a214da4bbaa1b001~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=Z8ekAlCtwX1JvfUIFZdU%2BRKqbCM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p><strong>æ§åˆ¶å™¨æ˜¯ä»€ä¹ˆï¼Ÿæ‰‹å†™ä¸€ä¸ªæ§åˆ¶å™¨</strong></p>
<ul>
<li>å°†å±æ€§å°è£…æˆä¸€ä¸ªChangeNotifierå¯¹è±¡ï¼Œåœ¨setæ•°æ®çš„æ—¶å€™è°ƒç”¨notifyListeners()</li>
<li>å°†ä¸å±æ€§ç›¸å…³çš„ç»„ä»¶ç”¨ListenableBuilderåŒ…è£…èµ·æ¥ï¼Œlistenableå‚æ•°ç»‘å®šChangeNotifierå¯¹è±¡</li>
<li>setæ•°æ®æ—¶ï¼ŒnotifyListenersä¼šé€šçŸ¥åˆ°builderå»åˆ·æ–°</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">_MyHomePageState</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">State</span>&lt;<span class="hljs-selector-tag">MyHomePage</span>&gt; {
  <span class="hljs-comment">// è‡ªå·±å†™çš„æ§åˆ¶å™¨ï¼Œç ”ç©¶æ§åˆ¶å™¨çš„åŸç†</span>
  <span class="hljs-selector-tag">DoubleHolder</span> <span class="hljs-selector-tag">dh</span> = <span class="hljs-selector-tag">DoubleHolder</span>(<span class="hljs-number">0.3</span>);
  
  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Scaffold</span>(
      <span class="hljs-attribute">body</span>: <span class="hljs-built_in">Center</span>(
        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
          <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.center,
          <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
            const <span class="hljs-built_in">Text</span>(
              <span class="hljs-string">'å¯¹æ¯”ç³»ç»Ÿçš„æ§åˆ¶å™¨ï¼Œè‡ªå·±å†™çš„æ§åˆ¶å™¨ï¼Œç ”ç©¶æ§åˆ¶å™¨çš„åŸç†'</span>,
            ),
            <span class="hljs-built_in">Foo</span>(<span class="hljs-attribute">dh</span>: dh,),
            <span class="hljs-built_in">ElevatedButton</span>(
              <span class="hljs-attribute">onPressed</span>: () {
                dh.value = <span class="hljs-number">1</span>;
              },
              <span class="hljs-attribute">child</span>: const <span class="hljs-built_in">Text</span>(<span class="hljs-string">"è®¾ä¸º100"</span>),
            ),
          ],
        ),
      ), 
    );
  }
}
</code></pre>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleHolder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span></span>{
  double _value;

  <span class="hljs-type">DoubleHolder</span>(<span class="hljs-keyword">this</span>._value);

  double get value =&gt; _value;

  set value(double newValue){
    _value = newValue;
    notifyListeners();
  }
}
</code></pre>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">DoubleHolder</span> dh;
  const <span class="hljs-type">Foo</span>({<span class="hljs-keyword">super</span>.key,required <span class="hljs-keyword">this</span>.dh});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">Foo</span>&gt; createState() =&gt; _FooState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_FooState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;Foo&gt;</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">Container</span>(
      color: <span class="hljs-type">Colors</span>.red.withOpacity(<span class="hljs-number">0.5</span>),
      child: <span class="hljs-type">ListenableBuilder</span>(
        listenable: widget.dh,
        builder: (context, child) {
          <span class="hljs-keyword">return</span> <span class="hljs-type">Column</span>(
            children: [
              <span class="hljs-type">FlutterLogo</span>(
                size: widget.dh.value * <span class="hljs-number">100</span> + <span class="hljs-number">50</span>,
              ),
              <span class="hljs-type">Slider</span>(
                value: widget.dh.value,
                onChanged: (value) {
                  setState(() {
                    widget.dh.value = value;
                  });
                },
              ),
            ],
          );
        },
      ),
    );
  }
}
</code></pre>
<h2 data-id="heading-3"><strong>ç»§æ‰¿å¼ç»„ä»¶</strong></h2>
<ul>
<li>
<p>è¿™æ˜¯ä¸Šé¢ä»‹ç»çš„å‡ ç§åŸºç¡€çš„çŠ¶æ€ç®¡ç†æ–¹å¼</p>
</li>
<li>
<p>ä½†æ˜¯é¡¹ç›®ä¸­çš„ç»„ä»¶ä¸€èˆ¬éƒ½æ˜¯å¤šå±‚åµŒå¥—ï¼Œå¦‚æœç»è¿‡çŠ¶æ€æå‡ä¹‹åï¼Œæ¯æ¬¡éƒ½ä¾èµ–è¿™ç§ç®€å•çš„ä¼ å‚çš„æ–¹å¼ï¼Œå¾ˆå¯èƒ½æ¯æ¬¡åˆ›å»ºç»„ä»¶éƒ½éœ€è¦åœ¨æ„é€ å‡½æ•°é‡Œä¼ å…¥å¤§é‡çš„å‚æ•°</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f21800e6a08041149161319359c1e673~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=3LuP7oR94OYpNIEJsLexMqgRQTs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4"><strong>ä½¿ç”¨</strong></h3>
<ul>
<li>ä¾‹å­ï¼šç³»ç»Ÿç°æœ‰çš„ç»§æ‰¿å¼ç»„ä»¶</li>
</ul>

<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function">Widget <span class="hljs-title">build</span><span class="hljs-params">(BuildContext context)</span> </span>{
  MediaQuery.<span class="hljs-built_in">of</span>(context).size;
  <span class="hljs-keyword">return</span> ...;
 }
</code></pre>
<ul>
<li>å°è¯•è‡ªå·±å®ç°ä¸€ä¸ªInheritedWidget</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff598f08a46e4f7eb1882856ace6479c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=ecSNhiMKwMNm85QpNeSxkXdIgRg%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>
<p>å®ç°å‰å…ˆæä¸€ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å‡è®¾ä¸Šé¢çš„çº¢è‰²æ–¹å—æ˜¯ä¸€ä¸ªconstçš„ç»„ä»¶ï¼Œåœ¨å¤–é¢çš„æŒ‰é’®ä¸Šè°ƒç”¨setStateï¼Œçº¢è‰²æ–¹å—ä¼šä¸ä¼šåˆ·æ–°ï¼Ÿ</li>
<li>å¦‚æœè¿™ä¸ªé¢œè‰²æ˜¯å¼•ç”¨çš„InheritedWidgeté‡Œçš„å±æ€§å‘¢ï¼Ÿ</li>
</ul>
</li>
</ul>

<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// è‡ªå®šä¹‰ä¸€ä¸ª</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyColor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InheritedWidget</span> </span>{
  <span class="hljs-keyword">final</span> Color color;
  <span class="hljs-keyword">const</span> MyColor({<span class="hljs-keyword">required</span> <span class="hljs-keyword">super</span>.child,<span class="hljs-keyword">required</span> <span class="hljs-keyword">this</span>.color});

<span class="hljs-comment">// æ ¸å¿ƒæ–¹æ³•</span>
  <span class="hljs-meta">@override</span>
  <span class="hljs-built_in">bool</span> updateShouldNotify(<span class="hljs-keyword">covariant</span> MyColor oldWidget) {
    <span class="hljs-built_in">print</span>(<span class="hljs-string">'updateShouldNotifyï¼›<span class="hljs-subst">${oldWidget.color}</span> -&gt; <span class="hljs-subst">$color</span>'</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }

  <span class="hljs-keyword">static</span> MyColor? maybeOf(BuildContext context){
    <span class="hljs-keyword">return</span> context.dependOnInheritedWidgetOfExactType&lt;MyColor&gt;();
  }

  <span class="hljs-keyword">static</span> MyColor of(BuildContext context){
    <span class="hljs-keyword">return</span> context.dependOnInheritedWidgetOfExactType&lt;MyColor&gt;()!;
  }

}
</code></pre>
<ul>
<li>é¡¶å±‚åŠ ä¸ªMyColorï¼ˆç»§æ‰¿ï¼‰</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  const <span class="hljs-type">MyHomePage</span>({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">MyHomePage</span>&gt; createState() =&gt; _MyHomePageState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyHomePageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;MyHomePage&gt;</span> </span>{
  <span class="hljs-type">Color</span> _color = <span class="hljs-type">Colors</span>.red;

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">MyColor</span>(
      color: _color,
      child: <span class="hljs-type">Scaffold</span>(
        body: <span class="hljs-type">Center</span>(
            child: const <span class="hljs-type">Foo</span>()
        ),
        floatingActionButton: <span class="hljs-type">FloatingActionButton</span>(
          onPressed: () {
            setState(() {
              _color = <span class="hljs-type">Colors</span>.black;
            });
          },
        ),
      ),
    );
  }
}
</code></pre>
<ul>
<li>åº•å±‚è°ƒç”¨</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">Foo</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">Container</span>(
      width: <span class="hljs-number">100</span>,
      height: <span class="hljs-number">100</span>,
      color: <span class="hljs-type">MyColor</span>.of(context).color,
    );
  }
}
</code></pre>
<ul>
<li>ç»“æœ</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff980cac4b154e57a932a23782eca41e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=yPH6ovTJ0Du4mYZq4FjFY8F0X4U%3D" alt="Untitled.gif" loading="lazy"/></p>
<h3 data-id="heading-5"><strong>åŸç†</strong></h3>
<ul>
<li>æœ¬è´¨å°±æ˜¯å…¨å±€ç»´æŠ¤ä¸€ä¸ªMapï¼Œå¯¹mapè¿›è¡Œå­˜å…¥ã€è¯»å–ã€‚</li>
<li>æ¯ä¸ªvalueï¼ˆInheritedElementï¼‰æœ‰è‡ªå·±çš„æ›´æ–°æ“ä½œï¼Œä»–ç»‘å®šäº†å…³è”çš„widget</li>
<li>å½“ InheritedWidget æ›´æ–°æ—¶ï¼Œå…ˆæ¯”å¯¹æ•°æ®ï¼Œæ•°æ®æ”¹å˜ä¼šé€šçŸ¥æ‰€æœ‰ä¾èµ–å®ƒçš„ Widget é‡å»º</li>
</ul>
<h4 data-id="heading-6"><strong>Mapçš„åˆ›å»ºå’Œå­˜å…¥</strong></h4>
<ul>
<li>è‡ªå®šä¹‰ä¸€ä¸ªInheritedWidget</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyColor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InheritedWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">Color</span> color;
  const <span class="hljs-type">MyColor</span>({required <span class="hljs-keyword">super</span>.child,required <span class="hljs-keyword">this</span>.color});
  
  <span class="hljs-meta">@override</span>
  bool updateShouldNotify(covariant <span class="hljs-type">MyColor</span> oldWidget) {
     <span class="hljs-keyword">return</span> oldWidget.color != color;
  }
}

<span class="hljs-comment">// ä½¿ç”¨ï¼Œæœ€å¤–å±‚åŒ…ä¸€ä¸ª</span>
<span class="hljs-meta">@override</span>
<span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
  <span class="hljs-keyword">return</span> <span class="hljs-type">MyColor</span>(
    color: _color,
    child: <span class="hljs-type">Scaffold</span>(...),
    );
}
</code></pre>
<ul>
<li>æ¸²æŸ“ä¸‰æ£µæ ‘æ—¶æ„å»ºå‡ºå…±æœ‰Map</li>
</ul>

<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InheritedElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ProxyElement</span> </span>{
    
<span class="hljs-keyword">void</span> mount(<span class="hljs-built_in">Element?</span> parent, <span class="hljs-built_in">Object?</span> newSlot) {
  <span class="hljs-comment">// èŠ‚ç‚¹æ¿€æ´»æ—¶è°ƒç”¨</span>
  _updateInheritance();
  ...
}
<span class="hljs-keyword">void</span> activate() {
    <span class="hljs-comment">// è„èŠ‚ç‚¹å›æ”¶æ—¶</span>
  _updateInheritance();
}

<span class="hljs-comment">// æ¯ä¸ªElementé‡Œé¢éƒ½å…±æœ‰ä¸€ä¸ªmapçš„å¼•ç”¨ï¼Œä»çˆ¶ç±»é‚£é‡Œè·å–</span>
<span class="hljs-comment">//æŒä¹…åŒ–å“ˆå¸Œæ˜ å°„:æ˜¯ä¸€ç§ä¸å¯å˜çš„æ•°æ®ç»“æ„,å½“ä¿®æ”¹æ•°æ®æ—¶ï¼Œä¸ä¼šæ”¹å˜åŸå®ä¾‹ï¼Œè€Œæ˜¯åˆ›å»ºä¸€ä¸ªåŒ…å«ä¿®æ”¹çš„æ–°å®ä¾‹ï¼ŒåŒæ—¶å°½å¯èƒ½å¤ç”¨åŸå®ä¾‹çš„æœªå˜éƒ¨åˆ†ï¼Œ</span>
PersistentHashMap&lt;<span class="hljs-built_in">Type</span>, InheritedElement&gt;? _inheritedElements;

<span class="hljs-comment">// å­˜å…¥çš„æ–¹æ³•ï¼Œåœ¨mountå’Œactivateæ—¶è°ƒç”¨</span>
  <span class="hljs-meta">@override</span>
  <span class="hljs-keyword">void</span> _updateInheritance() {
    <span class="hljs-keyword">assert</span>(_lifecycleState == _ElementLifecycle.active);
    <span class="hljs-comment">// è·å–çˆ¶ç±»çš„_inheritedElements</span>
    <span class="hljs-keyword">final</span> PersistentHashMap&lt;<span class="hljs-built_in">Type</span>, InheritedElement&gt; incomingWidgets =
        _parent?._inheritedElements ?? <span class="hljs-keyword">const</span> PersistentHashMap&lt;<span class="hljs-built_in">Type</span>, InheritedElement&gt;.empty();
        <span class="hljs-comment">// å­˜å…¥å½“å‰InheritedElementï¼Œkeyæ˜¯ç±»å‹ï¼Œvalueæ˜¯æœ¬ä½“</span>
    _inheritedElements = incomingWidgets.put(widget.runtimeType, <span class="hljs-keyword">this</span>);
  }
}
</code></pre>
<h4 data-id="heading-7"><strong>Mapçš„è¯»å–ä»¥åŠwidgetç»‘å®šè¿‡ç¨‹</strong></h4>
<ul>
<li>ä¸€èˆ¬ä½¿ç”¨InheritedWidget</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_FooState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;Foo&gt;</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">Container</span>(
      width: <span class="hljs-number">100</span>,
      height: <span class="hljs-number">100</span>,
      color: <span class="hljs-type">MyColor</span>.of(context).color,
    );
  }
  
static <span class="hljs-type">MyColor</span> of(<span class="hljs-type">BuildContext</span> context){
   <span class="hljs-keyword">return</span> context.dependOnInheritedWidgetOfExactType&lt;<span class="hljs-type">MyColor</span>&gt;()!;
}
</code></pre>
<ul>
<li>å®é™…ä¸Šå¹²çš„äº‹æƒ…</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Element</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">DiagnosticableTree</span> <span class="hljs-title">implements</span> <span class="hljs-title">BuildContext</span> </span>{
<span class="hljs-type">PersistentHashMap</span>&lt;<span class="hljs-type">Type</span>, <span class="hljs-type">InheritedElement</span>&gt;? _inheritedElements;

<span class="hljs-comment">// è¯»å–ä»¥åŠç»‘å®š</span>
<span class="hljs-meta">@override</span>
<span class="hljs-type">T</span>? dependOnInheritedWidgetOfExactType&lt;<span class="hljs-type">T</span> <span class="hljs-keyword">extends</span> <span class="hljs-type">InheritedWidget</span>&gt;({<span class="hljs-type">Object</span>? aspect}) {
    <span class="hljs-comment">// å‘ä¸Šæ‰¾ï¼Œæœ‰æ²¡æœ‰å­˜å…¥è¿‡è¿™ä¸ªç±»å‹çš„InheritedElement</span>
  <span class="hljs-keyword">final</span> <span class="hljs-type">InheritedElement</span>? ancestor = _inheritedElements == <span class="hljs-literal">null</span> ? <span class="hljs-literal">null</span> : _inheritedElements![<span class="hljs-type">T</span>];
  <span class="hljs-keyword">if</span> (ancestor != <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// åŒ¹é…çš„InheritedElementä¸ä¸ºç©ºï¼Œå°±å»ºç«‹ä¾èµ–å…³ç³»</span>
      <span class="hljs-comment">// å½“ InheritedWidget æ•°æ®æ›´æ–°æ—¶ï¼Œæ¡†æ¶ä¼šé€šçŸ¥æ‰€æœ‰ä¾èµ–å®ƒçš„ Widget é‡å»º</span>
    <span class="hljs-keyword">return</span> dependOnInheritedElement(ancestor, aspect: aspect) as <span class="hljs-type">T</span>;
  }
  _hadUnsatisfiedDependencies = <span class="hljs-literal">true</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
<span class="hljs-meta">@override</span>
<span class="hljs-type">InheritedWidget</span> dependOnInheritedElement(<span class="hljs-type">InheritedElement</span> ancestor, { <span class="hljs-type">Object</span>? aspect }) {
  _dependencies ??= <span class="hljs-type">HashSet</span>&lt;<span class="hljs-type">InheritedElement</span>&gt;();
  _dependencies!.add(ancestor);
  <span class="hljs-comment">// å°†å½“å‰ Element-&gt;this åŠ å…¥ InheritedElement-&gt;ancestor çš„ä¾èµ–åˆ—è¡¨</span>
  ancestor.updateDependencies(<span class="hljs-keyword">this</span>, aspect);
  <span class="hljs-keyword">return</span> ancestor.widget as <span class="hljs-type">InheritedWidget</span>;
}
</code></pre>

<pre><code class="hljs language-dart" lang="dart"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InheritedElement</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ProxyElement</span> </span>{
<span class="hljs-keyword">final</span> <span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">Element</span>, <span class="hljs-built_in">Object?</span>&gt; _dependents = HashMap&lt;<span class="hljs-built_in">Element</span>, <span class="hljs-built_in">Object?</span>&gt;();
<span class="hljs-meta">@protected</span>
<span class="hljs-keyword">void</span> updateDependencies(<span class="hljs-built_in">Element</span> dependent, <span class="hljs-built_in">Object?</span> aspect) {
  setDependencies(dependent, <span class="hljs-keyword">null</span>);
}

<span class="hljs-meta">@protected</span>
<span class="hljs-keyword">void</span> setDependencies(<span class="hljs-built_in">Element</span> dependent, <span class="hljs-built_in">Object?</span> value) {
  _dependents[dependent] = value;
}
</code></pre>
<h4 data-id="heading-8"><strong>InheritedWidget æ›´æ–°æ—¶ï¼Œé€šçŸ¥æ‰€æœ‰ä¾èµ–å®ƒçš„ Widget é‡å»º</strong></h4>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">Color</span> <span class="hljs-selector-tag">_color</span> = <span class="hljs-selector-tag">Colors</span><span class="hljs-selector-class">.red</span>;

@<span class="hljs-selector-tag">override</span>
<span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
  <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">MyColor</span>(
    <span class="hljs-attribute">color</span>: _color,
    <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Scaffold</span>(
      <span class="hljs-attribute">body</span>: <span class="hljs-built_in">Center</span>(
        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
          <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.center,
          <span class="hljs-attribute">children</span>: &lt;Widget&gt;[
            const <span class="hljs-built_in">Foo</span>(),
          ],
        ),
      ),
      <span class="hljs-attribute">floatingActionButton</span>: <span class="hljs-built_in">FloatingActionButton</span>(
        <span class="hljs-attribute">onPressed</span>: (){
          <span class="hljs-built_in">setState</span>(() {
            _<span class="hljs-attribute">color</span> = Colors.black;
          });
        },
      ), 
    ),
  );
}
</code></pre>

<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// æ›´æ–°</span>
<span class="hljs-keyword">@override</span>
void updated(InheritedWidget oldWidget) {
  if ((widget as InheritedWidget)<span class="hljs-selector-class">.updateShouldNotify</span>(oldWidget)) {
    super<span class="hljs-selector-class">.updated</span>(oldWidget);
  }
}
  <span class="hljs-keyword">@override</span>
  void <span class="hljs-attribute">update</span>(InheritedWidget newWidget) {
    final oldWidget = widget;
    super<span class="hljs-selector-class">.update</span>(newWidget);
    <span class="hljs-comment">// è‹¥éœ€è¦é€šçŸ¥ä¾èµ–è€…ï¼ˆupdateShouldNotify è¿”å› trueï¼‰</span>
    if (widget.updateShouldNotify(oldWidget)) {
      <span class="hljs-built_in">notifyClients</span>(oldWidget);
    }
  }

  <span class="hljs-comment">// é€šçŸ¥æ‰€æœ‰ä¾èµ–çš„ Element é‡å»º</span>
  <span class="hljs-keyword">@protected</span>
  void notifyClients(covariant InheritedWidget oldWidget) {
    <span class="hljs-comment">// éå†æ‰€æœ‰ä¾èµ–çš„ Element</span>
    for (final Element dependent in _dependents.keys) {
      <span class="hljs-comment">// æ£€æŸ¥ä¾èµ–æ˜¯å¦æœ‰æ•ˆ</span>
      if (dependent._active) {
        <span class="hljs-comment">// æ ‡è®°ä¾èµ–çš„ Element ä¸ºè„èŠ‚ç‚¹ï¼Œå¹¶è°ƒåº¦é‡å»º</span>
        dependent<span class="hljs-selector-class">.markNeedsBuild</span>();
      }
    }
  }
</code></pre>
<h2 data-id="heading-9"><strong>Provider</strong></h2>
<h3 data-id="heading-10"><strong>ä½¿ç”¨ï¼š</strong></h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24c86ceccc724cf5a126cbc2b30ed34d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=bRYT2yeLcfqOu1UO6dDhU03nfDk%3D" alt="provide.gif" loading="lazy"/></p>
<ul>
<li>å¤–å±‚åŒ…ä¸€ä¸ªChangeNotifierProvider</li>
<li>ä¼ ä¸€ä¸ªLogoModelæ„å»ºæ–¹æ³•</li>
<li>å†…éƒ¨ç»„ä»¶å¯ä»¥ç›´æ¥é€šè¿‡ watchç»‘å®š LogoModelæ•°æ®</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MyApp</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">ChangeNotifierProvider</span>(
      create: (context) =&gt; <span class="hljs-type">LogoModel</span>(),
      child: const <span class="hljs-type">MaterialApp</span>(
        title: '<span class="hljs-type">Flutter</span> <span class="hljs-type">Demo</span>',
        home: <span class="hljs-type">MyHomePage</span>(),
      ),
    );
  }
}
</code></pre>

<pre><code class="hljs language-ini" lang="ini">class LogoModel extends ChangeNotifier{
  bool <span class="hljs-attr">_flipX</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  bool <span class="hljs-attr">_flipY</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
  double <span class="hljs-attr">_size</span> = <span class="hljs-number">200.0</span><span class="hljs-comment">;</span>

  bool get <span class="hljs-attr">flipX</span> =&gt; _flipX<span class="hljs-comment">;</span>

  set flipX(bool value) {
    <span class="hljs-attr">_flipX</span> = value<span class="hljs-comment">;</span>
    notifyListeners()<span class="hljs-comment">;</span>
  }

  bool get <span class="hljs-attr">flipY</span> =&gt; _flipY<span class="hljs-comment">;</span>

  set flipY(bool value) {
    <span class="hljs-attr">_flipY</span> = value<span class="hljs-comment">;</span>
    notifyListeners()<span class="hljs-comment">;</span>
  }

  double get <span class="hljs-attr">size</span> =&gt; _size<span class="hljs-comment">;</span>

  set size(double value) {
    <span class="hljs-attr">_size</span> = value<span class="hljs-comment">;</span>
    notifyListeners()<span class="hljs-comment">;</span>
  }
}
</code></pre>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MyHomePage</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> const <span class="hljs-type">Scaffold</span>(
      body: <span class="hljs-type">Center</span>(
        child: <span class="hljs-type">Column</span>(
          mainAxisAlignment: <span class="hljs-type">MainAxisAlignment</span>.center,
          children: &lt;<span class="hljs-type">Widget</span>&gt;[
            <span class="hljs-type">Logo</span>(),
            <span class="hljs-type">ControlPanel</span>(),
          ],
        ),
      ), <span class="hljs-comment">// This trailing comma makes auto-formatting nicer for build methods.</span>
    );
  }
}
</code></pre>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Logo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">Logo</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">final</span> model = context.watch&lt;<span class="hljs-type">LogoModel</span>&gt;();
    <span class="hljs-keyword">return</span> <span class="hljs-type">Card</span>(
      child: <span class="hljs-type">Transform</span>.flip(
        flipX: model.flipX,
        flipY: model.flipY,
        child: <span class="hljs-type">FlutterLogo</span>(
          size: model.size,
        ),
      ),
    );
  }
}
</code></pre>

<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">ControlPanel</span> <span class="hljs-selector-tag">extends</span> <span class="hljs-selector-tag">StatelessWidget</span> {
  <span class="hljs-selector-tag">const</span> <span class="hljs-selector-tag">ControlPanel</span>({<span class="hljs-selector-tag">super</span><span class="hljs-selector-class">.key</span>});

  @<span class="hljs-selector-tag">override</span>
  <span class="hljs-selector-tag">Widget</span> <span class="hljs-selector-tag">build</span>(BuildContext context) {
    <span class="hljs-selector-tag">var</span> <span class="hljs-selector-tag">model</span> = <span class="hljs-selector-tag">context</span><span class="hljs-selector-class">.watch</span>&lt;<span class="hljs-selector-tag">LogoModel</span>&gt;();
    <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">Card</span>(
      <span class="hljs-attribute">margin</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">32</span>),
      <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Padding</span>(
        <span class="hljs-attribute">padding</span>: const EdgeInsets.<span class="hljs-built_in">all</span>(<span class="hljs-number">16</span>),
        <span class="hljs-attribute">child</span>: <span class="hljs-built_in">Column</span>(
          <span class="hljs-attribute">children</span>: [
            <span class="hljs-built_in">Row</span>(
              <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.center,
              <span class="hljs-attribute">children</span>: [
                const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'flip Xï¼š'</span>),
                <span class="hljs-built_in">Switch</span>(
                    <span class="hljs-attribute">value</span>: model.flipX,
                    <span class="hljs-attribute">onChanged</span>: (value) {
                      model.flipX = value;
                    }),
                const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'flip yï¼š'</span>),
                <span class="hljs-built_in">Switch</span>(
                    <span class="hljs-attribute">value</span>: model.flipY,
                    <span class="hljs-attribute">onChanged</span>: (value) {
                      model.flipY = value;
                    }),
              ],
            ),
            <span class="hljs-built_in">Row</span>(
              <span class="hljs-attribute">mainAxisAlignment</span>: MainAxisAlignment.center,
              <span class="hljs-attribute">children</span>: [
                const <span class="hljs-built_in">Text</span>(<span class="hljs-string">'sizeï¼š'</span>),
                <span class="hljs-built_in">Slider</span>(
                    <span class="hljs-attribute">min</span>: <span class="hljs-number">50</span>,
                    <span class="hljs-attribute">max</span>: <span class="hljs-number">300</span>,
                    <span class="hljs-attribute">value</span>: model.size,
                    <span class="hljs-attribute">onChanged</span>: (value) {
                      model.size = value;
                    }),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
</code></pre>
<h2 data-id="heading-11"><strong>å¦‚ä½•åœ¨ä¸ä½¿ç”¨ä¸‰æ–¹åº“çš„æƒ…å†µä¸‹ï¼Œæ‰‹å†™ä¸€ä¸ªProvide</strong></h2>
<h3 data-id="heading-12"><strong>åŸç†ï¼š</strong></h3>
<ul>
<li>ä¸»è¦å°±æ˜¯ç”¨åˆ°æ§åˆ¶å™¨å’Œç»§æ‰¿å¼ç»„ä»¶</li>
</ul>

<ul>
<li>
<p>æ•°æ®å’Œæˆ‘ä»¬è‡ªå·±å†™çš„å¸ƒå±€éƒ½æ˜¯ä½œä¸ºå‚æ•°ä¼ é€’è¿›å…¥çš„</p>
</li>
<li>
<p>è¯»çš„è¿‡ç¨‹é€šè¿‡InheritedWidgetå‘ä¸ŠæŸ¥æ‰¾æ•°æ®</p>
</li>
<li>
<p>ä¿®æ”¹æ•°æ®åï¼Œé€šè¿‡ListenableBuilderåˆ·æ–°ä»–å­ç±»ï¼Œä¹Ÿå°±æ˜¯InheritedWidget</p>
</li>
<li>
<p>InheritedWidgetåˆ·æ–°æ—¶ï¼Œä¸ºä»€ä¹ˆä¸ä¼šå¯¼è‡´æˆ‘ä»¬çš„å¸ƒå±€åˆ·æ–°ï¼Ÿ</p>
<ul>
<li>å› ä¸ºä»–æ˜¯å¤–å±‚ä¼ è¿›å»çš„å‚æ•°ï¼Œä»–å…¶å®å­˜åœ¨æœ€å¤–å±‚statefulé‡Œé¢ï¼Œè€ŒListenableBuilderåˆ·æ–°ä¸ä¼šå¯¼è‡´æœ€å¤–å±‚statefulåˆ·æ–°</li>
</ul>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14f2962244aa4a088cd8b0b4944f974a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=C6mkTiQLuuaM7KHafiURa0jVtYw%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/880e891984864c7b9bd18e4d62a51a39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg546y54-RRmVsb25l:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764647334&amp;x-signature=AKd6MZ7zqHiVTqdXEQO2ePd7fTs%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>ä»£ç </strong></h3>
<pre><code class="hljs language-scala" lang="scala">void main() {
  runApp(const <span class="hljs-type">MyApp</span>());
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyApp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MyApp</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">MyChangeNotifierProvider</span>(
      create: () =&gt; <span class="hljs-type">LogoModel</span>(),
      child: const <span class="hljs-type">MaterialApp</span>(
        title: '<span class="hljs-type">Flutter</span> <span class="hljs-type">Demo</span>',
        home: <span class="hljs-type">MyHomePage</span>(),
      ),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LogoModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ChangeNotifier</span> </span>{
  bool _flipX = <span class="hljs-literal">false</span>;
  bool _flipY = <span class="hljs-literal">false</span>;
  double _size = <span class="hljs-number">200.0</span>;

  bool get flipX =&gt; _flipX;

  set flipX(bool value) {
    _flipX = value;
    notifyListeners();
  }

  bool get flipY =&gt; _flipY;

  set flipY(bool value) {
    _flipY = value;
    notifyListeners();
  }

  double get size =&gt; _size;

  set size(double value) {
    _size = value;
    notifyListeners();
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyChangeNotifierProvider&lt;T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Listenable&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">Widget</span> child;
  <span class="hljs-keyword">final</span> <span class="hljs-type">T</span> <span class="hljs-type">Function</span>() create;

  const <span class="hljs-type">MyChangeNotifierProvider</span>(
      {<span class="hljs-keyword">super</span>.key, required <span class="hljs-keyword">this</span>.child, required <span class="hljs-keyword">this</span>.create});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">MyChangeNotifierProvider</span>&gt; createState() =&gt;
      _MyChangeNotifierProviderState&lt;<span class="hljs-type">T</span>&gt;();

  static <span class="hljs-type">T</span> of&lt;<span class="hljs-type">T</span>&gt;(<span class="hljs-type">BuildContext</span> context, {required bool listen}) {
    <span class="hljs-keyword">if</span> (listen) {
      <span class="hljs-keyword">return</span> context
          .dependOnInheritedWidgetOfExactType&lt;_MyInheritedWidget&lt;<span class="hljs-type">T</span>&gt;&gt;()!
          .model;
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">return</span> context
          .getInheritedWidgetOfExactType&lt;_MyInheritedWidget&lt;<span class="hljs-type">T</span>&gt;&gt;()!
          .model;
    }
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyChangeNotifierProviderState&lt;T</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Listenable&gt;</span></span>
    <span class="hljs-keyword">extends</span> <span class="hljs-type">State</span>&lt;<span class="hljs-type">MyChangeNotifierProvider</span>&lt;<span class="hljs-type">T</span>&gt;&gt; {
  late <span class="hljs-type">T</span> model;

  <span class="hljs-meta">@override</span>
  void initState() {
    <span class="hljs-keyword">super</span>.initState();
    model = widget.create();
  }

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> <span class="hljs-type">ListenableBuilder</span>(
        listenable: model,
        builder: (<span class="hljs-type">BuildContext</span> context, <span class="hljs-type">Widget</span>? child) {
          <span class="hljs-comment">// childæ˜¯å¤–é¢ä¼ è¿›æ¥çš„ï¼Œæ‰€ä»¥é‡å»ºçš„æ—¶å€™ä¸ä¼šrebuild</span>
          <span class="hljs-keyword">return</span> _MyInheritedWidget(model: model, child: widget.child);
        });
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_MyInheritedWidget&lt;T&gt;</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InheritedWidget</span> </span>{
  <span class="hljs-keyword">final</span> <span class="hljs-type">T</span> model;

  const _MyInheritedWidget({required <span class="hljs-keyword">super</span>.child, required <span class="hljs-keyword">this</span>.model});

  <span class="hljs-meta">@override</span>
  bool updateShouldNotify(covariant <span class="hljs-type">InheritedWidget</span> oldWidget) {
    print(<span class="hljs-string">"======updateShouldNotify"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
}

<span class="hljs-comment">// æ‰©å±•BuildContext</span>
extension <span class="hljs-type">Consumer</span> on <span class="hljs-type">BuildContext</span> {
  <span class="hljs-comment">// ç»‘å®š</span>
  <span class="hljs-type">T</span> watch&lt;<span class="hljs-type">T</span>&gt;() =&gt; <span class="hljs-type">MyChangeNotifierProvider</span>.of(<span class="hljs-keyword">this</span>, listen: <span class="hljs-literal">true</span>);
  <span class="hljs-comment">// åªè¯»ä¸€æ¬¡</span>
  <span class="hljs-type">T</span> read&lt;<span class="hljs-type">T</span>&gt;() =&gt; <span class="hljs-type">MyChangeNotifierProvider</span>.of(<span class="hljs-keyword">this</span>, listen: <span class="hljs-literal">false</span>);
}
</code></pre>
<ul>
<li>ä½¿ç”¨</li>
</ul>

<pre><code class="hljs language-scala" lang="scala"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyHomePage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">MyHomePage</span>({<span class="hljs-keyword">super</span>.key});
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">return</span> const <span class="hljs-type">Scaffold</span>(
      body: <span class="hljs-type">Center</span>(
        child: <span class="hljs-type">Column</span>(
          mainAxisAlignment: <span class="hljs-type">MainAxisAlignment</span>.center,
          children: &lt;<span class="hljs-type">Widget</span>&gt;[
            <span class="hljs-type">Logo</span>(),
            <span class="hljs-type">ControlPanel</span>(),
          ],
        ),
      ),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Logo</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatelessWidget</span> </span>{
  const <span class="hljs-type">Logo</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">var</span> model =
        <span class="hljs-type">Consumer</span>(context).watch&lt;<span class="hljs-type">LogoModel</span>&gt;();
    <span class="hljs-keyword">return</span> <span class="hljs-type">Card</span>(
      child: <span class="hljs-type">Transform</span>.flip(
        flipX: model.flipX,
        flipY: model.flipY,
        child: <span class="hljs-type">FlutterLogo</span>(
          size: model.size,
        ),
      ),
    );
  }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ControlPanel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StatefulWidget</span> </span>{
  const <span class="hljs-type">ControlPanel</span>({<span class="hljs-keyword">super</span>.key});

  <span class="hljs-meta">@override</span>
  <span class="hljs-type">State</span>&lt;<span class="hljs-type">ControlPanel</span>&gt; createState() =&gt; _ControlPanelState();
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">_ControlPanelState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">State&lt;ControlPanel&gt;</span> </span>{
  <span class="hljs-meta">@override</span>
  <span class="hljs-type">Widget</span> build(<span class="hljs-type">BuildContext</span> context) {
    <span class="hljs-keyword">var</span> model =
        <span class="hljs-type">Consumer</span>(context).watch&lt;<span class="hljs-type">LogoModel</span>&gt;();
    <span class="hljs-keyword">return</span> <span class="hljs-type">Card</span>(
      margin: const <span class="hljs-type">EdgeInsets</span>.all(<span class="hljs-number">32</span>),
      child: <span class="hljs-type">Padding</span>(
        padding: const <span class="hljs-type">EdgeInsets</span>.all(<span class="hljs-number">16</span>),
        child: <span class="hljs-type">Column</span>(
          children: [
            <span class="hljs-type">Row</span>(
              mainAxisAlignment: <span class="hljs-type">MainAxisAlignment</span>.center,
              children: [
                const <span class="hljs-type">Text</span>('flip <span class="hljs-type">X</span>ï¼š'),
                <span class="hljs-type">Switch</span>(
                    value: model.flipX,
                    onChanged: (value) {
                      model.flipX = value;
                    }),
                const <span class="hljs-type">Text</span>('flip yï¼š'),
                <span class="hljs-type">Switch</span>(
                    value: model.flipY,
                    onChanged: (value) {
                      model.flipY = value;
                    }),
              ],
            ),
            <span class="hljs-type">Row</span>(
              mainAxisAlignment: <span class="hljs-type">MainAxisAlignment</span>.center,
              children: [
                const <span class="hljs-type">Text</span>('sizeï¼š'),
                <span class="hljs-type">Slider</span>(
                    min: <span class="hljs-number">50</span>,
                    max: <span class="hljs-number">300</span>,
                    value: model.size,
                    onChanged: (value) {
                      model.size = value;
                    }),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è½¦è½½åº”ç”¨é…ç½®ç³»ç»Ÿç­¾å]]></title>    <link>https://juejin.cn/post/7576228981230698523</link>    <guid>https://juejin.cn/post/7576228981230698523</guid>    <pubDate>2025-11-25T03:58:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576228981230698523" data-draft-id="7576165316252139529" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è½¦è½½åº”ç”¨é…ç½®ç³»ç»Ÿç­¾å"/> <meta itemprop="keywords" content="Android,Android Studio"/> <meta itemprop="datePublished" content="2025-11-25T03:58:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BoomHe"/> <meta itemprop="url" content="https://juejin.cn/user/1513407128012333"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è½¦è½½åº”ç”¨é…ç½®ç³»ç»Ÿç­¾å
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1513407128012333/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BoomHe
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:58:12.000Z" title="Tue Nov 25 2025 03:58:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">è½¦è½½åº”ç”¨é…ç½®ç³»ç»Ÿç­¾å</h3>
<p>åœ¨é…ç½®ç³»ç»Ÿç­¾åæ—¶ï¼Œæ ¸å¿ƒæ˜¯åœ¨ <code>android</code> é—­åŒ…ä¸‹çš„ <code>signingConfigs</code> ä¸­å®šä¹‰ç­¾åä¿¡æ¯ï¼Œå¹¶åœ¨ <code>buildTypes</code> ä¸­å¼•ç”¨å®ƒ</p>
<p>å‡è®¾ä½ çš„ç­¾åæ–‡ä»¶åä¸º <code>system_signature.jks</code>ï¼Œå¹¶ä¸”ä½ å·²ç»å°†å…¶æ”¾åœ¨äº† <strong>App æ¨¡å—çš„æ ¹ç›®å½•ä¸‹</strong>ï¼ˆå³ä¸ <code>build.gradle</code> åŒçº§ï¼‰ã€‚</p>
<p>ä»¥ä¸‹æ˜¯ä¸¤ç§æ„å»ºè„šæœ¬è¯­è¨€çš„è¯¦ç»†é…ç½®æ–¹å¼ï¼š</p>
<h3 data-id="heading-1">1. Groovy (<code>build.gradle</code>)</h3>
<p>è¿™æ˜¯ä¼ ç»Ÿ Android é¡¹ç›®æœ€å¸¸ç”¨çš„æ ¼å¼ã€‚</p>
<pre><code class="hljs language-java" lang="java">android {
    <span class="hljs-comment">// ... å…¶ä»–é…ç½®</span>

    <span class="hljs-comment">// 1. é…ç½®ç­¾åä¿¡æ¯</span>
    signingConfigs {
        <span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªåä¸º system çš„ç­¾åé…ç½®ï¼ˆåå­—å¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚ releaseï¼‰</span>
        system {
            storeFile <span class="hljs-title function_">file</span><span class="hljs-params">(<span class="hljs-string">"platform.jks"</span>)</span>      <span class="hljs-comment">// å¦‚æœåœ¨ app ç›®å½•ä¸‹ç›´æ¥å†™æ–‡ä»¶å</span>
            storePassword <span class="hljs-string">"ä½ çš„keystoreå¯†ç "</span>     <span class="hljs-comment">// ä¾‹å¦‚ï¼šandroid</span>
            keyAlias <span class="hljs-string">"ä½ çš„åˆ«å"</span>                  <span class="hljs-comment">// ä¾‹å¦‚ï¼šandroiddebugkey æˆ– platform</span>
            keyPassword <span class="hljs-string">"ä½ çš„åˆ«åå¯†ç "</span>            <span class="hljs-comment">// ä¾‹å¦‚ï¼šandroid</span>

            <span class="hljs-comment">// å¼ºåˆ¶å¼€å¯ v1 å’Œ v2 ç­¾åï¼ˆé€šå¸¸è½¦è½½ç³»ç»Ÿä¸ºäº†å…¼å®¹æ€§å»ºè®®éƒ½å¼€å¯ï¼‰</span>
            v1SigningEnabled <span class="hljs-literal">true</span>
            v2SigningEnabled <span class="hljs-literal">true</span>
        }
    }

    <span class="hljs-comment">// 2. åœ¨æ„å»ºç±»å‹ä¸­åº”ç”¨ç­¾å</span>
    buildTypes {
        release {
            <span class="hljs-comment">// å¼•ç”¨ä¸Šé¢å®šä¹‰çš„ 'system' ç­¾åé…ç½®</span>
            signingConfig signingConfigs.system
            minifyEnabled <span class="hljs-literal">false</span>
            proguardFiles <span class="hljs-title function_">getDefaultProguardFile</span><span class="hljs-params">(<span class="hljs-string">'proguard-android-optimize.txt'</span>)</span>, <span class="hljs-string">'proguard-rules.pro'</span>
        }

        debug {
            <span class="hljs-comment">// æ–¹ä¾¿è°ƒè¯•ï¼šè®© debug åŒ…ä¹Ÿæ‹¥æœ‰ç³»ç»Ÿç­¾åï¼Œè¿™æ ·å¯ä»¥ç›´æ¥ Run åˆ°è½¦æœºä¸Š</span>
            signingConfig signingConfigs.system
        }
    }
}
</code></pre>
<h3 data-id="heading-2">2. Kotlin DSL (<code>build.gradle.kts</code>)</h3>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯è¾ƒæ–°çš„ Android Studio æ¨¡ç‰ˆï¼Œé€šå¸¸é»˜è®¤ä¸º KTS æ ¼å¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">android {
    // ... å…¶ä»–é…ç½®

    // 1. é…ç½®ç­¾åä¿¡æ¯
    signingConfigs {
        // åˆ›å»ºä¸€ä¸ªåä¸º "system" çš„é…ç½®
        create("system") {
            <span class="hljs-attr">storeFile</span> = file(<span class="hljs-string">"platform.jks"</span>)
            <span class="hljs-attr">storePassword</span> = <span class="hljs-string">"ä½ çš„keystoreå¯†ç "</span>
            <span class="hljs-attr">keyAlias</span> = <span class="hljs-string">"ä½ çš„åˆ«å"</span>
            <span class="hljs-attr">keyPassword</span> = <span class="hljs-string">"ä½ çš„åˆ«åå¯†ç "</span>

            <span class="hljs-attr">enableV1Signing</span> = <span class="hljs-literal">true</span>
            <span class="hljs-attr">enableV2Signing</span> = <span class="hljs-literal">true</span>
        }
    }

    // 2. åœ¨æ„å»ºç±»å‹ä¸­åº”ç”¨ç­¾å
    buildTypes {
        getByName("release") {
            // å¼•ç”¨åä¸º "system" çš„ç­¾åé…ç½®
            <span class="hljs-attr">signingConfig</span> = signingConfigs.getByName(<span class="hljs-string">"system"</span>)
            <span class="hljs-attr">isMinifyEnabled</span> = <span class="hljs-literal">false</span>
            proguardFiles(getDefaultProguardFile("proguard-android-optimize.txt"), "proguard-rules.pro")
        }

        getByName("debug") {
            // åŒæ ·ç»™ debug åŒ…é…ç½®ç³»ç»Ÿç­¾å
            <span class="hljs-attr">signingConfig</span> = signingConfigs.getByName(<span class="hljs-string">"system"</span>)
        }
    }
}
</code></pre>
<h3 data-id="heading-3">å…³é”®æ³¨æ„äº‹é¡¹</h3>
<h4 data-id="heading-4">1. Manifest å£°æ˜ (Android 10 (API 29) å¼€å§‹å¼ƒç”¨ <code>sharedUserId</code>)</h4>
<p>æ—¢ç„¶é…ç½®äº†ç³»ç»Ÿç­¾åï¼Œä½ çš„åº”ç”¨é€šå¸¸éœ€è¦å£°æ˜è‡ªå·±æ˜¯ç³»ç»Ÿç”¨æˆ·ã€‚è¯·ç¡®ä¿ä½ çš„ <code>AndroidManifest.xml</code> çš„ <code>&lt;manifest&gt;</code> æ ¹èŠ‚ç‚¹ä¸­åŒ…å«ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;manifest xmlns:<span class="hljs-attr">android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">package</span>=<span class="hljs-string">"com.your.package.name"</span>
    android:<span class="hljs-attr">sharedUserId</span>=<span class="hljs-string">"android.uid.system"</span>&gt; 
</code></pre>
<p>å¦‚æœä¸åŠ è¿™å¥ï¼Œå³ä¾¿ç­¾åæ­£ç¡®ï¼Œä½ ä¹Ÿæ‹¿ä¸åˆ°ç³»ç»Ÿæƒé™ï¼›ä¸”å¦‚æœç³»ç»Ÿé‡Œå·²æœ‰ç›¸åŒ uid çš„åº”ç”¨ï¼Œå®‰è£…æ—¶ä¼šæŠ¥ <code>INSTALL_FAILED_SHARED_USER_INCOMPATIBLE</code>ã€‚</p>
<h3 data-id="heading-5">2. åŠ¨æ€é…ç½®ç­¾åä¿¡æ¯</h3>
<ol>
<li>åœ¨é¡¹ç›®æ ¹ç›®å½• <code>local.properties</code> æ·»åŠ ï¼š</li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-attr">SYSTEM_KEY_PATH</span>=keys/platform.jks
<span class="hljs-attr">SYSTEM_KEY_PASSWORD</span>=platform
<span class="hljs-attr">SYSTEM_KEY_ALIAS</span>=platform
<span class="hljs-attr">SYSTEM_ALIAS_PASSWORD</span>=platform
</code></pre>
<ol start="2">
<li>ä¿®æ”¹ <code>build.gradle</code> è¯»å–è¿™äº›å€¼</li>
</ol>
<pre><code class="hljs language-vbscript" lang="vbscript">
    android {
        signingConfigs {
         create(<span class="hljs-string">"system"</span>) {
            // ä» gradle.properties ä¸­è¯»å–æ–‡ä»¶è·¯å¾„å’Œå¯†ç 
            storeFile = file(project.rootDir.absolutePath + <span class="hljs-string">"/app/"</span> + project.<span class="hljs-keyword">property</span>(<span class="hljs-string">"SYSTEM_STORE_FILE"</span>).<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>())
            storePassword = project.<span class="hljs-keyword">property</span>(<span class="hljs-string">"SYSTEM_STORE_PASSWORD"</span>).<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>()
            keyAlias = project.<span class="hljs-keyword">property</span>(<span class="hljs-string">"SYSTEM_KEY_ALIAS"</span>).<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>()
            keyPassword = project.<span class="hljs-keyword">property</span>(<span class="hljs-string">"SYSTEM_KEY_PASSWORD"</span>).<span class="hljs-keyword">to</span><span class="hljs-built_in">String</span>()
            }
        }
        // ...
    }
</code></pre>
<ol start="3">
<li>éªŒè¯ç­¾åï¼Œæ‰“åŒ…å®Œæˆåï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>apksigner</code> éªŒè¯ç­¾åæ˜¯å¦ç”Ÿæ•ˆ</li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino">apksigner verify -v --print-certs your_app.apk
</code></pre>
<p>éªŒè¯ä¿¡æ¯</p>
<pre><code class="hljs language-csharp" lang="csharp">C:\Users\ZQ\AppData\Local\Android\Sdk\build-tools\<span class="hljs-number">34.0</span><span class="hljs-number">.0</span>&gt;apksigner verify -v --print-certs C:\ZQ\change_system_sign\VwCopilotLauncher.<span class="hljs-function">apk
Verifies
Verified <span class="hljs-keyword">using</span> v1 <span class="hljs-title">scheme</span> (<span class="hljs-params">JAR signing</span>): <span class="hljs-literal">false</span>
Verified <span class="hljs-keyword">using</span> v2 <span class="hljs-title">scheme</span> (<span class="hljs-params">APK Signature Scheme v2</span>): <span class="hljs-literal">false</span>
Verified <span class="hljs-keyword">using</span> v3 <span class="hljs-title">scheme</span> (<span class="hljs-params">APK Signature Scheme v3</span>): <span class="hljs-literal">true</span>
Verified <span class="hljs-keyword">using</span> v3.1 <span class="hljs-title">scheme</span> (<span class="hljs-params">APK Signature Scheme v3<span class="hljs-number">.1</span></span>): <span class="hljs-literal">false</span>
Verified <span class="hljs-keyword">using</span> v4 <span class="hljs-title">scheme</span> (<span class="hljs-params">APK Signature Scheme v4</span>): <span class="hljs-literal">false</span>
Verified <span class="hljs-keyword">for</span> SourceStamp: <span class="hljs-literal">false</span>
Number of signers: 1
Signer #1 certificate DN: EMAILADDRESS</span>=seqc.zcdev@seres.cn, CN=Seres, OU=Seres, O=Seres, L=Chengdu View, ST=SiChuan, C=ZH
Signer <span class="hljs-meta">#1 certificate SHA-256 digest: f4e8fbc3b6c23a000639e3df8f1b4be1ed153436e638f7bdc65598f9d0d3c7e8</span>
Signer <span class="hljs-meta">#1 certificate SHA-1 digest: 816003d74e06bad2bab5f440801ed9ce2f75b89e</span>
Signer <span class="hljs-meta">#1 certificate MD5 digest: 907c255625cb183c7906de565522b446</span>
Signer <span class="hljs-meta">#1 key algorithm: RSA</span>
Signer <span class="hljs-meta">#1 key size (bits): 2048</span>
Signer <span class="hljs-meta">#1 public key SHA-256 digest: 7c51217f508f3c11341e5e025e7dc6c8eb103f1e850a6000433b8ae9cda3915b</span>
Signer <span class="hljs-meta">#1 public key SHA-1 digest: 5c09f551e8f356d979d7da239fd65857fc84d330</span>
Signer <span class="hljs-meta">#1 public key MD5 digest: e278637218a2bdfcac56bd279ac80dee</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é€šè¿‡Amazon Q CLI é›†æˆDynamoDB MCP å®ç°æ¸¸æˆåœºæ™¯æ™ºèƒ½æ•°æ®å»ºæ¨¡]]></title>    <link>https://juejin.cn/post/7576236480114262066</link>    <guid>https://juejin.cn/post/7576236480114262066</guid>    <pubDate>2025-11-25T04:38:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576236480114262066" data-draft-id="7576098886860832811" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é€šè¿‡Amazon Q CLI é›†æˆDynamoDB MCP  å®ç°æ¸¸æˆåœºæ™¯æ™ºèƒ½æ•°æ®å»ºæ¨¡"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2025-11-25T04:38:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äºšé©¬é€Šäº‘å¼€å‘è€…"/> <meta itemprop="url" content="https://juejin.cn/user/2850395271209496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é€šè¿‡Amazon Q CLI é›†æˆDynamoDB MCP  å®ç°æ¸¸æˆåœºæ™¯æ™ºèƒ½æ•°æ®å»ºæ¨¡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2850395271209496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äºšé©¬é€Šäº‘å¼€å‘è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T04:38:35.000Z" title="Tue Nov 25 2025 04:38:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91cc23a3088f4680b403a4cf5a06ec07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=H2VgL%2FqAWuX9tkIkozd%2Bk6I8D00%3D" alt="blogbanner-newnew.png" loading="lazy"/></p>
<h2 data-id="heading-0">å‰è¨€</h2>
<p>Amazon DynamoDB æ˜¯ä¸€é¡¹å®Œå…¨æ‰˜ç®¡çš„ NoSQL æ•°æ®åº“æœåŠ¡ï¼Œæä¾›å¿«é€Ÿã€å¯é¢„æµ‹ä¸”å¯æ‰©å±•çš„æ€§èƒ½ã€‚ä½œä¸ºä¸€ç§æ— æœåŠ¡å™¨æ•°æ®åº“ï¼ŒDynamoDB è®©å¼€å‘è€…æ— éœ€æ‹…å¿ƒæœåŠ¡å™¨ç®¡ç†ã€ç¡¬ä»¶é…ç½®æˆ–å®¹é‡è§„åˆ’ç­‰åŸºç¡€è®¾æ–½é—®é¢˜ï¼Œå¯ä»¥ä¸“æ³¨äºåº”ç”¨ç¨‹åºå¼€å‘ã€‚å¯¹äºæ¸¸æˆè¡Œä¸šè€Œè¨€ï¼ŒDynamoDB çš„è®¾è®¡ç‰¹æ€§å°¤ä¸ºé€‚åˆï¼šå…¶ä½å»¶è¿Ÿæ•°æ®è®¿é—®ï¼ˆé€šå¸¸ä»¥ä¸ªä½æ•°æ¯«ç§’è®¡ï¼‰èƒ½å¤Ÿæ”¯æŒæ¸¸æˆä¸­çš„å®æ—¶äº¤äº’ï¼›è‡ªåŠ¨æ‰©å±•åŠŸèƒ½å¯ä»¥è½»æ¾åº”å¯¹æ¸¸æˆä¸Šçº¿æˆ–ç‰¹æ®Šæ´»åŠ¨æœŸé—´çš„æµé‡é«˜å³°ï¼›å…¨çƒè¡¨åŠŸèƒ½æ”¯æŒå¤šåŒºåŸŸéƒ¨ç½²ï¼Œä¸ºå…¨çƒç©å®¶æä¾›ä¸€è‡´çš„ä½å»¶è¿Ÿä½“éªŒï¼Œè€ŒæŒ‰éœ€å®¹é‡æ¨¡å¼åˆ™ä½¿æ¸¸æˆå¼€å‘å•†èƒ½å¤Ÿæ ¹æ®å®é™…ä½¿ç”¨é‡ä»˜è´¹ï¼Œæœ‰æ•ˆæ§åˆ¶æˆæœ¬ï¼Œè¿™äº›ç‰¹æ€§ä½¿ DynamoDB æˆä¸ºä¼—å¤šæ¸¸æˆå…¬å¸ä½¿ç”¨ DynamoDB ä½œä¸ºæ¸¸æˆä¸»æ•°æ®åº“ï¼Œæ¥å­˜å‚¨å…³é”®æ¸¸æˆæ•°æ®ã€‚</p>
<p>åœ¨ç°ä»£æ¸¸æˆå¼€å‘ä¸­ï¼Œæ•°æ®æ¶æ„è®¾è®¡å¾€å¾€æ˜¯éå¸¸é‡è¦ç¯èŠ‚ã€‚ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“æ€ç»´åœ¨é¢å¯¹DynamoDBè¿™æ ·çš„NoSQLæ•°æ®åº“æ—¶ï¼Œç”±äºä¸ç†Ÿæ‚‰å¯èƒ½ä¼šè®¾è®¡å‡ºæ€§èƒ½ä½ä¸‹ã€æˆæœ¬é«˜æ˜‚çš„æ–¹æ¡ˆã€‚æœ¬åšå®¢æˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆé¡¹ç›®æ¡ˆä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨é€šè¿‡Amazon Q CLI é›†æˆDynamoDB MCP (Model Context Protocol)å·¥å…·ï¼Œä»å®¢æˆ·éœ€æ±‚å‡ºå‘ï¼Œé€šè¿‡è°ƒç ”æµç¨‹ï¼Œæœ€ç»ˆç”Ÿæˆé«˜æ•ˆçš„DynamoDBæ•°æ®æ¨¡å‹ã€‚</p>
<p>DynamoDB MCPæ˜¯ä¸€ä¸ªåŸºäºModel Context Protocolçš„æ™ºèƒ½æ•°æ®å»ºæ¨¡å·¥å…·ï¼Œè¯¥å·¥å…·ä½œä¸º DynamoDB Â MCPæœåŠ¡å™¨çš„ä¸€éƒ¨åˆ†æä¾›ã€‚DynamoDB MCP æ•°æ®å»ºæ¨¡å·¥å…·ä¸æ”¯æŒ MCP çš„ AI åŠ©æ‰‹é›†æˆï¼Œæä¾›ç»“æ„åŒ–çš„è‡ªç„¶è¯­è¨€é©±åŠ¨å·¥ä½œæµï¼Œå°†åº”ç”¨ç¨‹åºéœ€æ±‚è½¬æ¢ä¸º DynamoDB æ•°æ®æ¨¡å‹ã€‚è¯¥å·¥å…·åŸºäºä¸“å®¶å·¥ç¨‹åŒ–çš„ä¸Šä¸‹æ–‡æ„å»ºï¼Œä½¿ç”¨æœ€æ–°çš„æ¨ç†æ¨¡å‹æŒ‡å¯¼ç”¨æˆ·æŒæ¡é«˜çº§å»ºæ¨¡æŠ€æœ¯ï¼Œå®ƒé›†æˆäº†Amazon DynamoDBçš„æœ€ä½³å®è·µå’Œä¸“å®¶ç»éªŒï¼Œèƒ½å¤Ÿå®ç°ï¼š</p>
<ul>
<li>é€šè¿‡ä¸“ä¸šè°ƒç ”è¡¨ç³»ç»Ÿæ€§æ”¶é›†ä¸šåŠ¡éœ€æ±‚</li>
<li>åŸºäºè®¿é—®æ¨¡å¼è‡ªåŠ¨è¯†åˆ«èšåˆè¾¹ç•Œ</li>
<li>åœ¨æ€§èƒ½å’Œæˆæœ¬é—´æ‰¾åˆ°æœ€ä¼˜å¹³è¡¡ç‚¹ åˆ›å»ºé«˜æ•ˆDynamoDBæ•°æ®æ¨¡å‹</li>
</ul>
<p>é€šè¿‡å°†ä¸“å®¶ä¸Šä¸‹æ–‡ä¸æœ€æ–°æ¨ç†æ¨¡å‹ç›¸ç»“åˆï¼Œè¿™ç§æ–¹æ³•å¤§å¤§ç¼©çŸ­äº†å¼€å‘åˆå§‹ DynamoDB è®¾è®¡æ‰€éœ€çš„æ—¶é—´ã€‚ä»¥å‰éœ€è¦æ•°å¤©ç”šè‡³æ•°å‘¨çš„ç ”ç©¶å’Œè¿­ä»£å·¥ä½œï¼Œç°åœ¨å¯ä»¥åŠ é€Ÿåˆ°å‡ ååˆ†é’Ÿå†…å®Œæˆã€‚</p>
<blockquote>
<p>ğŸ“¢é™æ—¶æ’æ’­ï¼šAmazon Q Developer æ¥å¸®ä½ åšåº”ç”¨å•¦ï¼</p>
<p>ğŸŒŸ10åˆ†é’Ÿå¸®ä½ æ„å»ºæ™ºèƒ½ç•ªèŒ„é’Ÿåº”ç”¨ï¼Œ1å°æ—¶æå®šæ–°åŠŸèƒ½æ‹“å±•ã€æµ‹è¯•ä¼˜åŒ–ã€æ–‡æ¡£æ³¨ç¨‹å’Œéƒ¨ç½²</p>
<p>â©å¿«å¿«ç‚¹å‡»è¿›å…¥ã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D67f49364f0df324eb192e428%26visitfrom%3D3P_Juejinhead_0529%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejinhead_0529" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=67f49364f0df324eb192e428&amp;visitfrom=3P_Juejinhead_0529&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejinhead_0529" ref="nofollow noopener noreferrer">Agentic Al å¸®ä½ åšåº”ç”¨ -- ä»0åˆ°1æ‰“é€ è‡ªå·±çš„æ™ºèƒ½ç•ªèŒ„é’Ÿ</a>ã€‹å®éªŒ
å…è´¹ä½“éªŒä¼ä¸šçº§ AI å¼€å‘å·¥å…·çš„çœŸå®æ•ˆæœå§
æ„å»ºæ— é™ï¼Œæ¢ç´¢å¯ç¨‹!</p>
</blockquote>
<h2 data-id="heading-1">å¿«é€Ÿé…ç½®Q CLI é›†æˆDynamoDB MCP</h2>
<h3 data-id="heading-2">ä»€ä¹ˆæ˜¯ Amazon Q CLI?</h3>
<p>Amazon Q CLI æ˜¯ä¸€æ¬¾å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå°† Amazon Q çš„å¼ºå¤§åŠŸèƒ½å¼•å…¥å‘½ä»¤è¡Œç•Œé¢ã€‚å€ŸåŠ© Amazon Q CLIï¼Œç”¨æˆ·å¯ä»¥å®Œæˆä»¥ä¸‹æˆ–æ›´å¤šå·¥ä½œï¼š</p>
<ul>
<li>è·å–äºšé©¬é€Šäº‘ç§‘æŠ€æœåŠ¡çš„å¸®åŠ©ä¸æ¨èå»ºè®®</li>
<li>è¯Šæ–­å¹¶è§£å†³äºšé©¬é€Šäº‘ç§‘æŠ€èµ„æºé—®é¢˜</li>
<li>ç”Ÿæˆå¹¶è§£æäºšé©¬é€Šäº‘ç§‘æŠ€CLI å‘½ä»¤</li>
<li>ä»¥å¯¹è¯æ–¹å¼ä¸ AI åŠ©æ‰‹äº¤äº’</li>
</ul>
<h3 data-id="heading-3">ä½¿ç”¨å‰æ</h3>
<p>å¼€å§‹å®éªŒå‰ï¼Œè¯·ç¡®ä¿å·²ç»åœ¨æœ¬åœ°ç”µè„‘å®‰è£…äº†å¿…è¦çš„å·¥å…·</p>
<ul>
<li>Amazon Q CLI is installed, instructions:Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fzh_cn%2Famazonq%2Flatest%2Fqdeveloper-ug%2Fcommand-line-installing.html" target="_blank" title="https://docs.aws.amazon.com/zh_cn/amazonq/latest/qdeveloper-ug/command-line-installing.html" ref="nofollow noopener noreferrer">å®‰è£…é€‚ç”¨äºå‘½ä»¤è¡Œçš„ Amazon Q</a></li>
<li>Amazon CLI å·²å®‰è£…å¹¶é…ç½®ï¼Œæ“ä½œè¯´æ˜ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.aws.amazon.com%2Fzh_cn%2Fcli%2Flatest%2Fuserguide%2Fgetting-started-install.html" target="_blank" title="https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/getting-started-install.html" ref="nofollow noopener noreferrer">å®‰è£…æˆ–æ›´æ–°æœ€æ–°ç‰ˆæœ¬çš„ Amazon CLI</a></li>
</ul>
<p>æ‚¨æ‹¥æœ‰é€‚å½“çš„äºšé©¬é€Šäº‘ç§‘æŠ€æƒé™ï¼Œå¯ä»¥åˆ›å»ºå’Œç®¡ç†å®éªŒä¸­ä½¿ç”¨åˆ°çš„èµ„æºã€‚</p>
<h3 data-id="heading-4">å¼€å§‹å’Œ Q CLI è¿›è¡Œå¯¹è¯</h3>
<p>åœ¨ç»ˆç«¯ä¼šè¯ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¼€å§‹ä¸ Q CLI è¿›è¡Œå¯¹è¯ï¼š</p>
<p>q chat â€“trust-tools=fs_read,fs_write</p>
<h3 data-id="heading-5">é›†æˆDynamoDB MCP</h3>
<ol>
<li>éœ€è¦å®‰è£…uvx è½¯ä»¶ å®‰è£…è¯·å‚è€ƒï¼šå®‰è£…<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fastral-sh%2Fuv" target="_blank" title="https://github.com/astral-sh/uv" ref="nofollow noopener noreferrer">uvx</a></li>
<li>éœ€è¦é…ç½®dynamoDBä½¿ç”¨çš„ç¯å¢ƒå˜é‡ï¼šAmazon_ACCESS_KEY_ID, Amazon_SECRET_ACCESS_KEY é…ç½®è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fawslabs.github.io%2Fmcp%2Fservers%2Fdynamodb-mcp-server%2F" target="_blank" title="https://awslabs.github.io/mcp/servers/dynamodb-mcp-server/" ref="nofollow noopener noreferrer">é…ç½®dynamodb mcp server</a></li>
<li>ä¿®æ”¹Q CLI MCP é…ç½®æ–‡ä»¶ï¼š</li>
</ol>

<pre><code class="hljs language-javascript" lang="javascript">vi ~<span class="hljs-regexp">/.aws/</span>amazonq/mcp.<span class="hljs-property">json</span>{
<span class="hljs-string">"mcpServers"</span>: {
<span class="hljs-string">"awslabs.dynamodb-mcp-server"</span>: {
<span class="hljs-string">"command"</span>: <span class="hljs-string">"uvx"</span>,
<span class="hljs-string">"args"</span>: [<span class="hljs-string">"awslabs.dynamodb-mcp-server@latest"</span>],
<span class="hljs-string">"env"</span>: {
<span class="hljs-string">"DDB-MCP-READONLY"</span>: <span class="hljs-string">"true"</span>,
<span class="hljs-string">"AWS_PROFILE"</span>: <span class="hljs-string">"default"</span>,
<span class="hljs-string">"AWS_REGION"</span>: <span class="hljs-string">"us-east-1"</span>,
<span class="hljs-string">"FASTMCP_LOG_LEVEL"</span>: <span class="hljs-string">"ERROR"</span>
},
<span class="hljs-string">"disabled"</span>: <span class="hljs-literal">false</span>,
<span class="hljs-string">"autoApprove"</span>: []
}
}
}
</code></pre>
<p>é‡æ–°è¿è¡Œ<strong>Q CLI (q chat) MCP Server</strong>å·²ç»æˆåŠŸé›†æˆåˆ°<strong>Q CLI</strong>(å¦‚ä¸‹å›¾):</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97d5ce1730d84617a3313a71e18db8a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=XDK%2BGEhyqWFDUy62XD%2FB4hXKVAM%3D" alt="11.png" loading="lazy"/></p>
<h2 data-id="heading-6">é€šè¿‡Q CLI é›†æˆDynamoDB MCP å®ç°æ¸¸æˆåœºæ™¯æ™ºèƒ½æ•°æ®å»ºæ¨¡</h2>
<h3 data-id="heading-7">æ¸¸æˆåœºæ™¯ä»‹ç»</h3>
<p>ç§»åŠ¨æ¸¸æˆå¹³å°æœåŠ¡è¶…è¿‡500ä¸‡æ³¨å†Œç”¨æˆ·ï¼Œå…¶ä¸­50ä¸‡ä¸ºæ—¥æ´»è·ƒç”¨æˆ·ã€‚åœ¨æ­£å¸¸æ—¶æ®µï¼Œå¹³å°å¤„ç†çº¦20,000 RPSçš„è¯·æ±‚ï¼Œä½†åœ¨çƒ­é—¨èµ›äº‹æˆ–æ–°è‹±é›„å‘å¸ƒæœŸé—´ï¼Œæµé‡å¯èƒ½åœ¨å‡ åˆ†é’Ÿå†…æ¿€å¢è‡³50,000 RPSï¼ŒåŒæ—¶ä»éœ€æ”¯æŒå„ç§å…·æœ‰ä¸åŒæ€§èƒ½è¦æ±‚çš„è®¿é—®æ¨¡å¼ã€‚æ¯å¤©äº§ç”Ÿçº¦25ä¸‡åœºæ¸¸æˆå¯¹å±€ï¼Œè¿™ç§è§„æ¨¡å¼•å…¥äº†å‡ ä¸ªå…³é”®çš„æ•°æ®å»ºæ¨¡æŒ‘æˆ˜ï¼š</p>
<p>æµé‡æ³¢åŠ¨æ€§ â€“ çƒ­é—¨èµ›äº‹å¯èƒ½ç¬é—´ä½¿è´Ÿè½½å¢åŠ ä¸‰å€ã€‚ä¼ ç»Ÿæ•°æ®åº“å¾€å¾€éš¾ä»¥åº”å¯¹è¿™ç§å˜åŒ–ï¼Œä½†å½“æ•°æ®æ¨¡å‹è®¾è®¡æ—¶è€ƒè™‘åˆ°æœ€ä¼˜åˆ†åŒºæ—¶ï¼ŒDynamoDB çš„æŒ‰éœ€æ‰©å±•èƒ½å¤Ÿå¸æ”¶çªç„¶çš„æµé‡å³°å€¼ã€‚</p>
<p>å¤šæ ·åŒ–è®¿é—®æ¨¡å¼ â€“ åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ï¼Œå¦‚æŒ‰ç©å®¶æ’åã€æŒ‰æ¸¸æˆå†å²ï¼Œéœ€è¦æ»¡è¶³æ¯ç§æ¨¡å¼éƒ½æœ‰ä¸åŒçš„æ€§èƒ½ç‰¹å¾ã€‚</p>
<h3 data-id="heading-8">å»ºæ¨¡éœ€æ±‚é‡‡é›†å’Œæ™ºèƒ½å»ºæ¨¡</h3>
<p>æ­¥éª¤1:è¾“å…¥å»ºæ¨¡éœ€æ±‚ï¼š</p>
<p>ä»¥ <strong>ddb_mcp_blog</strong> ç›®å½•ä½œä¸ºå·¥ä½œç›®å½•ï¼Œä»è¯¥è·¯å¾„å¯åŠ¨ Q CLI å¯¹è¯çª—å£ï¼Œè¾“å…¥æç¤ºè¯ï¼š</p>
<p><code>&gt;ä½¿ç”¨æˆ‘çš„æ•°æ®å»ºæ¨¡ MCP å·¥å…·æ¥å¸®åŠ©è®¾è®¡ DynamoDB æ•°æ®æ¨¡å‹</code></p>
<p>å¯ä»¥çœ‹åˆ° Q CLI å¼€å§‹æ€è€ƒå¹¶æå‡ºå»ºæ¨¡ç›¸å…³çš„è°ƒç ”é—®é¢˜- éœ€è¦äº†è§£æ‚¨çš„åº”ç”¨ç¨‹åºè¯¦æƒ…å’Œè®¿é—®æ¨¡å¼éœ€æ±‚ï¼š</p>
<p><code>è¾“å…¥y</code></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8fdde8feef42477c9e7209f48f6ffe7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=KJsGekR5%2B4%2B1C6VInl%2BXTy5eLQE%3D" alt="22.png" loading="lazy"/></p>
<p>æ­¥éª¤2:è¾“å…¥å»ºæ¨¡è°ƒç ”é—®é¢˜å›ç­”ï¼š</p>
<p>é¡¹ç›®èƒŒæ™¯</p>
<p><code>æˆ‘æ­£åœ¨ä¸ºä¸€ä¸ªé«˜æµé‡çš„ç§»åŠ¨MOBAæ¸¸æˆå¹³å°ï¼Œ è®¾è®¡DynamoDBæ•°æ®æ¨¡å‹ã€‚ç›®å‰ä½¿ç”¨MySQLï¼Œä½†å¸Œæœ›è¿ç§»åˆ°DynamoDBæ¥æ›´å¥½åœ°å¤„ç†æç«¯è§„æ¨¡å’Œæµé‡ã€‚</code></p>
<p>ç”¨æˆ·è§„æ¨¡</p>
<pre><code class="hljs">â€¢ 500ä¸‡æ³¨å†Œç”¨æˆ·ï¼Œ50ä¸‡æ—¥æ´»ç”¨æˆ·
â€¢ å³°å€¼æµé‡ï¼š50,000 RPS
â€¢ å¹³å‡æµé‡ï¼š20,000 RPS
â€¢ æ¯æ—¥å¤„ç†çº¦25ä¸‡åœºæ¸¸æˆå¯¹å±€
</code></pre>
<p>æ ¸å¿ƒä¸šåŠ¡å®ä½“</p>
<pre><code class="hljs language-arduino" lang="arduino">ç©å®¶ç³»ç»Ÿï¼š
â€¢ ç©å®¶åŸºæœ¬ä¿¡æ¯ï¼ˆplayer_id, username, level, rank, coinsï¼‰
â€¢ ç©å®¶ç»Ÿè®¡æ•°æ®ï¼ˆtotal_games, wins, losses, kill_death_ratio, avg_damageï¼‰
â€¢ ç©å®¶é“å…·ï¼ˆå¹³å‡æ¯ç©å®¶<span class="hljs-number">50</span>ä¸ªé“å…·ï¼Œæœ€å¤š<span class="hljs-number">1000</span>ä¸ªï¼‰
å¯¹å±€ç³»ç»Ÿï¼š
â€¢ æ¸¸æˆå¯¹å±€è®°å½•ï¼ˆmatch_id, game_name, game_mode, map, start_time, end_timeï¼‰
â€¢ æ¯åœºå¯¹å±€<span class="hljs-number">10</span>ä¸ªç©å®¶ï¼ˆ<span class="hljs-number">5</span>v5å¯¹æˆ˜ï¼‰
â€¢ å¯¹å±€ç»“æœå’Œç©å®¶è¡¨ç°æ•°
</code></pre>
<p>ä¸»è¦è®¿é—®æ¨¡å¼</p>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> ç©å®¶ç™»å½•å’Œä¿¡æ¯è·å–
â€¢ æµé‡ï¼šå³°å€¼15000 RPSï¼Œå¹³å‡8000 RPS
â€¢ å»¶è¿Ÿè¦æ±‚ï¼š&lt;50ms
â€¢ 95%çš„ç™»å½•åä¼šæŸ¥è¯¢ç»Ÿè®¡ä¿¡æ¯
<span class="hljs-bullet">2.</span> æ’è¡Œæ¦œæŸ¥è¯¢
â€¢ æµé‡ï¼šå³°å€¼12000 RPSï¼Œå¹³å‡4000 RPS
â€¢ å»¶è¿Ÿè¦æ±‚ï¼š&lt;100ms
â€¢ éœ€æ±‚ï¼šæ ¹æ®Game<span class="hljs-emphasis">_name æŒ‰rating_</span>pointsæ’åºçš„å‰100åç©å®¶
â€¢ æ¯åœºæ¸¸æˆåå¼‚æ­¥æ›´æ–°æ’åç§¯åˆ†
<span class="hljs-bullet">3.</span> å¯¹å±€ç®¡ç†
â€¢ åˆ›å»ºå¯¹å±€ï¼š8000 RPSå³°å€¼ï¼Œ3000 RPSå¹³å‡
â€¢ æ›´æ–°å¯¹å±€ç»“æœï¼š8000 RPSå³°å€¼ï¼Œ3000 RPSå¹³å‡
â€¢ æ¯åœºå¯¹å±€ç»“æŸéœ€æ‰¹é‡æ›´æ–°10ä¸ªç©å®¶çš„ç»Ÿè®¡æ•°æ®
â€¢ å…è®¸çŸ­æš‚æ•°æ®ä¸ä¸€è‡´ï¼Œä½¿ç”¨å¼‚æ­¥æ›´æ–°ç©å®¶ç»Ÿè®¡æ•°æ® å¯¹å±€ç»“æŸåç«‹å³æ›´æ–°
<span class="hljs-bullet">4.</span> é“å…·ç®¡ç†
â€¢ æ€»æµé‡ï¼š7000 RPSå³°å€¼ï¼Œ2000 RPSå¹³å‡
â€¢ è¯»å†™æ¯”ä¾‹ï¼š3:1ï¼ˆ70%è¯»å–é“å…·æ¸…å•ï¼Œ30%è´­ä¹°/ä½¿ç”¨é“å…·ï¼‰
â€¢ éœ€è¦é˜²æ­¢é‡å¤è´­ä¹°çš„åŸå­æ“ä½œ
é“å…·è´­ä¹°çš„åŸå­æ€§æ“ä½œ:
<span class="hljs-bullet">1.</span> æ£€æŸ¥ç©å®¶coinsä½™é¢ (è¯»å–PlayerProfile)
<span class="hljs-bullet">2.</span> éªŒè¯é“å…·ä»·æ ¼å’Œåº“å­˜
<span class="hljs-bullet">3.</span> åŸå­æ›´æ–°æ“ä½œ:
<span class="hljs-bullet">   -</span> æ‰£å‡ç©å®¶è´§å¸ 
<span class="hljs-bullet">   -</span> å¢åŠ é“å…·æ•°é‡ 
<span class="hljs-bullet">   -</span> è®°å½•äº¤æ˜“æ—¥å¿— 
</code></pre>
<p>æ•°æ®è®¿é—®å…³è”æ€§</p>
<pre><code class="hljs language-erlang" lang="erlang">â€¢ <span class="hljs-number">95</span><span class="hljs-comment">%çš„æŸ¥è¯¢éœ€è¦ç©å®¶åŸºæœ¬ä¿¡æ¯+ç»Ÿè®¡æ•°æ®</span>
â€¢ <span class="hljs-number">30</span><span class="hljs-comment">%çš„æŸ¥è¯¢éœ€è¦ç©å®¶ä¿¡æ¯+é“å…·æ¸…å•  </span>
â€¢ <span class="hljs-number">15</span><span class="hljs-comment">%çš„æŸ¥è¯¢éœ€è¦ç©å®¶ä¿¡æ¯+å¯¹å±€å†å²</span>
</code></pre>
<p>ç‰¹æ®Šéœ€æ±‚</p>
<pre><code class="hljs">â€¢ æ”¯æŒå®æ—¶æ’è¡Œæ¦œæ›´æ–°
â€¢ é«˜å¹¶å‘ä¸‹çš„æ•°æ®ä¸€è‡´æ€§å¤„ç†
â€¢ é‡å¤§æ´»åŠ¨æœŸé—´çš„æµé‡å³°å€¼åº”å¯¹
ä»¥ä¸Šä¿¡æ¯æ˜¯æˆ‘ç›®å‰çŸ¥é“çš„æ‰€æœ‰ä¿¡æ¯ è¯·åŸºäºä»¥ä¸Šä¿¡æ¯å»ºæ¨¡
</code></pre>
<p>æ­¥éª¤3:<strong>DynamoDB MCP</strong> ä¼šåŸºäºè¾“å…¥çš„è°ƒç ”ä¿¡æ¯ åˆ›å»ºæ¨¡å‹éœ€æ±‚æ–‡æ¡£ <strong>dynamodb_requirement.md</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ccc9961b49fc495f854074254e50e370~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=XDJRUkiVDPLyCzEE4TwNm6%2FUHmo%3D" alt="3.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/86e711d59d604c89bff7522c74509437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=N7hCF4oEoGgNBDYuKMiwFiBxTJo%3D" alt="4.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b10ebe11956a4ed983ce6727ac43afad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=tSY792rQlJ6sNeyvizZ2BJXhCrk%3D" alt="intelligent-data-modeling-in-gaming-scenarios-5.png" loading="lazy"/></p>
<p><code>è¾“å…¥y</code></p>
<h3 data-id="heading-9">DynamoDB MCP ä¼šåŸºäºä»¥ä¸Šè¾“å…¥çš„è°ƒç ”ä¿¡æ¯ åˆ›å»ºdynamodb_requirement.md</h3>
<p>å¤‡æ³¨ï¼šDynamoDB MCP å¯èƒ½ä¼šæç¤ºæ›´å¤šçš„è°ƒç ”é—®é¢˜ :</p>
<p>è¿™æ—¶è¯·è¾“å…¥ï¼š</p>
<p><code>&gt;è¯·åŸºäºä»¥ä¸Šè¾“å…¥ä¿¡æ¯å»ºæ¨¡ ç›®å‰è¿˜ä¸èƒ½æä¾›æ›´è¯¦ç»†ä¿¡æ¯</code></p>
<p>æ­¥éª¤4:<strong>DynamoDB MCP</strong> åŸºäºéœ€æ±‚æ–‡æ¡£ <strong>dynamodb_requirement.md</strong> æ™ºèƒ½å»ºæ¨¡ ç”Ÿæˆ<strong>dynamodb_data_model.md</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd920da72f8b4ab794734e7fc03a39ed~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=Fn1z2yB69SXpLbGuL3h42Z7LBkA%3D" alt="6.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b0ff0c33d3c4fa3a951a5dcc162a14d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=%2FMj6KGm%2B7UbVcNwRKBCnk8OC9Is%3D" alt="7.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7079f7b7b3847879f912b10ca18ce26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=540ufNkLMAZkrjD6ATDOBsJ2l8w%3D" alt="8.png" loading="lazy"/></p>
<p><code>è¾“å…¥y</code>
<strong>DynamoDB MCP</strong> ä¼šåŸºäºä»¥ä¸Šç”Ÿæˆçš„éœ€æ±‚æ–‡æ¡£<strong>dynamodb_requirement.md</strong> åˆ›å»º<strong>dynamodb_data_model.md</strong> åŒæ—¶æ€»ç»“æ ¸å¿ƒè®¾è®¡äº®ç‚¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef8fb03eda25417fb7ea66fdbec22cc8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=Kx4RCv%2BW3ozOcIzOIHMqoZ59Cjc%3D" alt="9.png" loading="lazy"/></p>
<h4 data-id="heading-10">é‡‡ç”¨DynamoDB MCP ç”Ÿæˆçš„dynamodb_data_model.md æœ‰ä»¥ä¸‹å‡ éƒ¨åˆ†ç»„æˆï¼š</h4>
<p>1ã€è®¾è®¡ç†å¿µä¸æ–¹æ³•</p>
<p>æ ¸å¿ƒåŸåˆ™ï¼š</p>
<ul>
<li>åŸºäºè®¿é—®æ¨¡å¼é©±åŠ¨çš„èšåˆè®¾è®¡</li>
<li>æ ¹æ®æ•°æ®è®¿é—®ç›¸å…³æ€§ï¼ˆ95%ã€30%ã€90%ï¼‰è¿›è¡Œæ•´åˆ</li>
<li>é’ˆå¯¹é«˜æµé‡MOBAæ¸¸æˆå¹³å°ä¼˜åŒ–ï¼ˆå³°å€¼50,000 RPSï¼‰</li>
</ul>
<p>èšåˆç­–ç•¥ï¼š</p>
<ul>
<li>å•é¡¹èšåˆï¼šPlayer+Statsï¼ˆ95%å…³è”ï¼‰</li>
<li>é¡¹ç›®é›†åˆï¼šPlayer+Itemsï¼ˆ30%å…³è”ï¼‰</li>
<li>åˆ†ç¦»è¡¨ï¼šMatchHistoryï¼ˆ15%å…³è”ï¼Œæ— ç•Œå¢é•¿ï¼‰</li>
</ul>
<p>2ã€è¡¨ç»“æ„è®¾è®¡</p>
<p>ä¸»è¦è¡¨è®¾è®¡ï¼š</p>
<ul>
<li>PlayerProfileè¡¨ï¼šç©å®¶æ¡£æ¡ˆ+ç»Ÿè®¡+é“å…·çš„æ··åˆèšåˆ</li>
<li>Matchè¡¨ï¼šå¯¹å±€+ç©å®¶è¡¨ç°çš„å•é¡¹èšåˆ</li>
<li>MatchHistoryè¡¨ï¼šç‹¬ç«‹çš„å¯¹å±€å†å²è¡¨</li>
<li>ActivePlayersLeaderboard GSIï¼šç¨€ç–ç´¢å¼•çš„æ’è¡Œæ¦œ</li>
</ul>
<p>åˆ†åŒºé”®ç­–ç•¥ï¼š</p>
<ul>
<li>ä½¿ç”¨è‡ªç„¶åˆ†å¸ƒé”®ï¼ˆplayer_idã€match_idï¼‰</li>
<li>é¿å…çƒ­åˆ†åŒºé—®é¢˜</li>
<li>æ”¯æŒè¯†åˆ«å…³ç³»æ¨¡å¼</li>
</ul>
<p>3ã€è®¿é—®æ¨¡å¼æ˜ å°„</p>
<p>10ä¸ªæ ¸å¿ƒæ¨¡å¼å…¨è¦†ç›–ï¼š</p>
<ul>
<li>ç™»å½•æŸ¥è¯¢ï¼šå•æ¬¡GetItemæ“ä½œ</li>
<li>æ’è¡Œæ¦œï¼šç¨€ç–GSIæŸ¥è¯¢</li>
<li>å¯¹å±€åˆ›å»º/æ›´æ–°ï¼šåŸå­æ“ä½œ</li>
<li>é“å…·è´­ä¹°ï¼šäº‹åŠ¡å†™å…¥</li>
<li>Matchå†å²æŸ¥è¯¢ï¼šæ—¶é—´èŒƒå›´æŸ¥è¯¢</li>
</ul>
<p>æŸ¥è¯¢æ•ˆç‡ï¼š</p>
<ul>
<li>æ¶ˆé™¤ä¸å¿…è¦çš„GSI</li>
<li>ä½¿ç”¨è¯†åˆ«å…³ç³» å‡å°‘50%å†™å…¥æˆæœ¬</li>
<li>å•æ¬¡æŸ¥è¯¢è·å–ç›¸å…³æ•°æ®</li>
</ul>
<p>4ã€æ€§èƒ½ä¸æˆæœ¬ä¼˜åŒ–</p>
<p>çƒ­åˆ†åŒºåˆ†æï¼š</p>
<ul>
<li>æ‰€æœ‰æ¨¡å¼ä¿æŒåœ¨åˆ†åŒºé™åˆ¶å†…ï¼ˆ3,000 RCU/1,000 WCUï¼‰</li>
<li>è‡ªç„¶é”®åˆ†å¸ƒç¡®ä¿è´Ÿè½½å‡è¡¡</li>
</ul>
<p>æˆæœ¬èŠ‚çœï¼š</p>
<ul>
<li>ç¨€ç–GSIèŠ‚çœ80%å­˜å‚¨/å†™å…¥æˆæœ¬</li>
<li>èšåˆè®¾è®¡å‡å°‘50%æŸ¥è¯¢æ¬¡æ•°</li>
<li>è¯†åˆ«å…³ç³»æ¶ˆé™¤é¢å¤–GSIå¼€é”€</li>
</ul>
<p>5ã€æƒè¡¡å†³ç­–</p>
<p>å…³é”®æƒè¡¡ï¼š</p>
<ul>
<li>å­˜å‚¨ vs æŸ¥è¯¢æ€§èƒ½ï¼šé€‰æ‹©é€‚åº¦éè§„èŒƒåŒ–çš„æ•°æ®å†—ä½™</li>
<li>ä¸€è‡´æ€§ vs å¯æ‰©å±•æ€§ï¼šåŸºäºä¸šåŠ¡éœ€æ±‚é€‰æ‹©æœ€ç»ˆä¸€è‡´æ€§</li>
<li>å¤æ‚æ€§ vs æˆæœ¬ï¼šé€šè¿‡èšåˆç®€åŒ–æ“ä½œé™ä½æˆæœ¬</li>
</ul>
<p>ä¼˜åŒ–é€‰æ‹©ï¼š</p>
<ul>
<li>åµŒå…¥å¼PlayerPerformanceså®ç°åŸå­æ›´æ–°</li>
<li>æ’è¡Œæ¦œ å¢åŠ ç”¨æˆ·å éè§„èŒƒåŒ–çš„æ•°æ®å†—ä½™ é¿å…é¢å¤–æŸ¥è¯¢</li>
<li>åˆ†ç¦»MatchHistory æ§åˆ¶æ— ç•Œå¢é•¿</li>
</ul>
<p>è¿™ä¸ªè®¾è®¡åœ¨ä¿è¯é«˜æ€§èƒ½çš„åŒæ—¶å®ç°äº†æˆæœ¬ä¼˜åŒ–ï¼Œå®Œå…¨æ»¡è¶³é«˜æµé‡æ¸¸æˆå¹³å°çš„éœ€æ±‚ã€‚æ¯ä¸ªéƒ¨åˆ†éƒ½éµå¾ªäº†DynamoDB MCPå·¥å…·æä¾›çš„æ ‡å‡†æ¨¡æ¿ç»“æ„ï¼Œæä¾›äº†å®Œæ•´çš„æ•°æ®å»ºæ¨¡æ–‡æ¡£ï¼Œæ¶µç›–äº†ä»è®¾è®¡ç†å¿µåˆ°å…·ä½“å®ç°çš„æ‰€æœ‰å…³é”®æ–¹é¢ã€‚</p>
<p>æ¨¡å‹è®¾è®¡å…³é”®è®¾è®¡åŸåˆ™ï¼š</p>
<ul>
<li>åŸºäºè®¿é—®æ¨¡å¼çš„èšåˆå‡å°‘äº†æŸ¥è¯¢å¾€è¿”æ¬¡æ•°</li>
</ul>
<p>é€šè¿‡åˆ†æå®é™…æŸ¥è¯¢éœ€æ±‚å°†é¢‘ç¹ä¸€èµ·è®¿é—®çš„æ•°æ®ç»„ç»‡åœ¨åŒä¸€ä¸ªèšåˆä¸­ï¼Œä½¿åŸæœ¬éœ€è¦å¤šæ¬¡æ•°æ®åº“è°ƒç”¨çš„æ“ä½œï¼Œåˆå¹¶ä¸ºå•æ¬¡æŸ¥è¯¢ã€‚</p>
<p>ä¾‹å¦‚æœ¬æ¸¸æˆåº”ç”¨ä¸­ï¼Œ95%çš„ç©å®¶ç™»å½•åœºæ™¯éœ€è¦åŒæ—¶è·å–ç©å®¶åŸºæœ¬ä¿¡æ¯å’Œç»Ÿè®¡æ•°æ®ï¼Œå› æ­¤å°†Playerå’ŒPlayerStatsè®¾è®¡ä¸ºå•é¡¹èšåˆå­˜å‚¨åœ¨PlayerProfileè¡¨ä¸­ï¼Œç”¨ä¸€æ¬¡GetItemæ“ä½œæ›¿ä»£äº†ä¸¤æ¬¡ç‹¬ç«‹æŸ¥è¯¢ã€‚åŒæ—¶ï¼ŒMatchå’ŒPlayerPerformancesç”±äºè®¿é—®ç›¸å…³æ€§ä¹Ÿè¢«åˆå¹¶ä¸ºå•é¡¹èšåˆï¼Œå®ç°äº†å¯¹å±€ç»“æœçš„åŸå­æ›´æ–°</p>
<ul>
<li>è¯†åˆ«å…³ç³» æœ€å°åŒ–äº†å¯¹<strong>GSI</strong>çš„éœ€æ±‚</li>
</ul>
<p>å½“å­å®ä½“åœ¨ä¸šåŠ¡é€»è¾‘ä¸Šå®Œå…¨ä¾èµ–çˆ¶å®ä½“å­˜åœ¨ä¸”æŸ¥è¯¢æ—¶æ€»æ˜¯é€šè¿‡çˆ¶å®ä½“IDè¿›è¡Œæ—¶ï¼Œé‡‡ç”¨çˆ¶å®ä½“IDä½œä¸ºåˆ†åŒºé”®ã€å­å®ä½“IDä½œä¸ºæ’åºé”®çš„è®¾è®¡æ¨¡å¼ã€‚å¦‚PlayerProfileè¡¨ä¸­çš„é“å…·æ•°æ®ï¼Œä½¿ç”¨PK=player_id, SK=ITEM#{item_id}çš„è®¾è®¡ï¼Œé€šè¿‡Query(player_id)ç›´æ¥è·å–ç©å®¶æ‰€æœ‰é“å…·ã€‚</p>
<p>MatchHistoryè¡¨ä½¿ç”¨PK=player_id, SK=date#match_idæ”¯æŒç©å®¶å†å²æŸ¥è¯¢ï¼Œè¿™ç§è¯†åˆ«å…³ç³»è®¾è®¡æ¶ˆé™¤äº†åˆ›å»ºä¸“é—¨GSIçš„éœ€è¦ï¼Œé™ä½äº†50%çš„å†™å…¥æˆæœ¬å’Œå­˜å‚¨å¼€é”€</p>
<ul>
<li>å•è¡¨è®¾è®¡ æé«˜äº†æ•ˆç‡å’Œå¯æ‰©å±•æ€§</li>
</ul>
<p>å°†ç›¸å…³ä½†è®¿é—®ç›¸å…³æ€§é€‚ä¸­(30-70%)çš„å®ä½“é€šè¿‡ä¸åŒæ’åºé”®å‰ç¼€ç»„ç»‡åœ¨åŒä¸€å¼ è¡¨ä¸­ï¼Œå®ç°äº†æ•°æ®çš„é€»è¾‘åˆ†ç¦»å’Œç‰©ç†å…±å­˜ã€‚å¦‚PlayerProfileè¡¨ä¸­ç©å®¶é“å…·é‡‡ç”¨é¡¹ç›®é›†åˆè®¾è®¡ï¼Œæ—¢æ”¯æŒè·å–å®Œæ•´ç©å®¶ä¿¡æ¯çš„å•æ¬¡æŸ¥è¯¢ï¼Œä¹Ÿå…è®¸ç‹¬ç«‹æŸ¥è¯¢é“å…·æ¸…å•ï¼Œåœ¨ä¿æŒæŸ¥è¯¢çµæ´»æ€§çš„åŒæ—¶ï¼Œä¼˜åŒ–äº†è¿è¥æˆæœ¬å’Œè¡¨ç®¡ç†å¤æ‚åº¦ã€‚</p>
<p>å…·ä½“æ¨¡å‹è®¾è®¡ä¿¡æ¯ è¯·å‚è€ƒ<strong>DynamoDB MCP</strong> ç”Ÿæˆçš„<strong>dynamodb_data_model.md</strong>æ–‡ä»¶</p>
<p>ä¸‹ä¸€æ­¥:å¯è°ƒç”¨<strong>DynamoDB MCP</strong> åŸºäº<strong>dynamodb_data_model.md</strong> ç”ŸæˆDynamoDB è¡¨ç»“æ„</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ff9c6ed7d17648c49c6fdeb0637c2e29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=hdaLQWT2c%2FQ6SoxfmgnVRUi18pU%3D" alt="10.png" loading="lazy"/></p>
<h2 data-id="heading-11">æ€»ç»“</h2>
<p>DynamoDB MCPæ˜¯åŸºäºModel Context Protocolçš„æ™ºèƒ½æ•°æ®å»ºæ¨¡å·¥å…·ï¼Œé€šè¿‡Amazon Q CLIé›†æˆï¼Œå°†Amazonä¸“å®¶ç»éªŒä¸AIæ¨ç†æ¨¡å‹æ·±åº¦èåˆï¼Œå°†ä¼ ç»Ÿéœ€è¦æ•°å¤©ç”šè‡³æ•°å‘¨çš„DynamoDBæ¶æ„è®¾è®¡å·¥ä½œç¼©çŸ­è‡³å‡ ååˆ†é’Ÿã€‚è¯¥å·¥å…·é‡‡ç”¨èšåˆå¯¼å‘è®¾è®¡ç†å¿µï¼Œè‡ªåŠ¨åŒ–å®Œæˆå®¹é‡è§„åˆ’ã€çƒ­åˆ†åŒºé£é™©è¯„ä¼°å’Œæˆæœ¬ä¼˜åŒ–ï¼Œå¯ä¸ºå„è¡Œä¸šå„ç±»åº”ç”¨åœºæ™¯ï¼Œæä¾›æ™ºèƒ½çš„DynamoDBæ•°æ®æ¨¡å‹è®¾è®¡ã€‚</p>
<p><strong>ç›¸å…³åšå®¢æ¨è</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2Fblogs%2Fdatabase%2Fintroducing-the-amazon-dynamodb-data-modeling-mcp-tool%2F" target="_blank" title="https://aws.amazon.com/blogs/database/introducing-the-amazon-dynamodb-data-modeling-mcp-tool/" ref="nofollow noopener noreferrer">åˆè¯† Amazon DynamoDB æ•°æ®å»ºæ¨¡ MCP å·¥å…·</a></p>
<p><strong>å…¶ä»–äº§å“å’ŒæœåŠ¡æ¨è</strong></p>
<p>S-BGP æ˜¯æˆ‘ä»¬åœ¨ç”±å…‰ç¯æ–°ç½‘è¿è¥çš„äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½ï¼ˆåŒ—äº¬ï¼‰åŒºåŸŸå’Œç”±è¥¿äº‘æ•°æ®è¿è¥çš„äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½ï¼ˆå®å¤ï¼‰åŒºåŸŸæ¨å‡ºçš„ä¸€é¡¹æˆæœ¬ä¼˜åŒ–å‹ç½‘ç»œæœåŠ¡ï¼Œæ—¨åœ¨å¸®åŠ©æˆ‘ä»¬çš„å®¢æˆ·é™ä½ç»è¿‡äº’è”ç½‘ä¼ è¾“æ•°æ®å‡ºäº‘ï¼ˆData Transfer Outï¼‰çš„è´¹ç”¨ã€‚ å¦‚æœæ‚¨æƒ³ç”³è¯·äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸçš„ S-BGP æœåŠ¡ï¼Œè¯·è”ç³»æ‚¨çš„å®¢æˆ·ç»ç†è·å–è¿›ä¸€æ­¥å¸®åŠ©ã€‚</p>
<p>*<em>å‰è¿°ç‰¹å®šäºšé©¬é€Šäº‘ç§‘æŠ€ç”Ÿæˆå¼äººå·¥æ™ºèƒ½ç›¸å…³çš„æœåŠ¡ç›®å‰åœ¨äºšé©¬é€Šäº‘ç§‘æŠ€æµ·å¤–åŒºåŸŸå¯ç”¨ã€‚äºšé©¬é€Šäº‘ç§‘æŠ€ä¸­å›½åŒºåŸŸç›¸å…³äº‘æœåŠ¡ç”±è¥¿äº‘æ•°æ®å’Œå…‰ç¯æ–°ç½‘è¿è¥ï¼Œå…·ä½“ä¿¡æ¯ä»¥ä¸­å›½åŒºåŸŸå®˜ç½‘ä¸ºå‡†ã€‚</em></p>
<p><strong>æœ¬ç¯‡ä½œè€…</strong>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5fd6342cbfc4912bc30add624e65d4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqa6ams6YCK5LqR5byA5Y-R6ICF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1764650315&amp;x-signature=xNQwBxBeqU4cjsRHYGAcSV2m%2BW4%3D" alt="3495607084-69246b42ee606_fix732.webp" loading="lazy"/></p>
<blockquote>
<p>æœ¬æœŸæœ€æ–°å®éªŒä¸ºã€Š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D67f49364f0df324eb192e428%26visitfrom%3D3P_Juejintail_0418%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0418" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=67f49364f0df324eb192e428&amp;visitfrom=3P_Juejintail_0418&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0418" ref="nofollow noopener noreferrer">Agentic AI å¸®ä½ åšåº”ç”¨ â€”â€” ä»0åˆ°1æ‰“é€ è‡ªå·±çš„æ™ºèƒ½ç•ªèŒ„é’Ÿ</a>ã€‹</p>
<p>âœ¨ è‡ªç„¶è¯­è¨€ç©è½¬å‘½ä»¤è¡Œï¼Œ10åˆ†é’Ÿå¸®ä½ æ„å»ºåº”ç”¨ï¼Œ1å°æ—¶æå®šæ–°åŠŸèƒ½æ‹“å±•ã€æµ‹è¯•ä¼˜åŒ–ã€æ–‡æ¡£æ³¨é‡Šå’Œéƒ¨ç½²</p>
<p>ğŸ’ª å…è´¹ä½“éªŒä¼ä¸šçº§ AI å¼€å‘å·¥å…·ï¼Œè´¨é‡+å®‰å…¨å…¨æŒæ§</p>
<p>â©ï¸[<a href="https://link.juejin.cn?target=https%3A%2F%2Fdev.amazoncloud.cn%2Fexperience%2Fcloudlab%3Fid%3D67f49364f0df324eb192e428%26visitfrom%3D3P_Juejintail_0418%26sc_medium%3Downed%26sc_campaign%3Dcloudlab%26sc_channel%3D3P_Juejintail_0418" target="_blank" title="https://dev.amazoncloud.cn/experience/cloudlab?id=67f49364f0df324eb192e428&amp;visitfrom=3P_Juejintail_0418&amp;sc_medium=owned&amp;sc_campaign=cloudlab&amp;sc_channel=3P_Juejintail_0418" ref="nofollow noopener noreferrer">ç‚¹å‡»è¿›å…¥å®éªŒ</a>] å³åˆ»å¼€å¯  AI å¼€å‘ä¹‹æ—…</p>
<p>æ„å»ºæ— é™, æ¢ç´¢å¯ç¨‹ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¦»èŒä¸‰ä¸ªæœˆå]]></title>    <link>https://juejin.cn/post/7576181242582859839</link>    <guid>https://juejin.cn/post/7576181242582859839</guid>    <pubDate>2025-11-25T03:04:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576181242582859839" data-draft-id="7576210031872704553" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¦»èŒä¸‰ä¸ªæœˆå"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2025-11-25T03:04:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°å…µå¼ å¥"/> <meta itemprop="url" content="https://juejin.cn/user/1257497032405229"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¦»èŒä¸‰ä¸ªæœˆå
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1257497032405229/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°å…µå¼ å¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T03:04:13.000Z" title="Tue Nov 25 2025 03:04:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è‡ªä¹‹å‰å†™çš„ <a href="https://juejin.cn/post/7450047052804161576" target="_blank" title="https://juejin.cn/post/7450047052804161576">æˆ‘è¿™ğŸ¤¡èˆ¬çš„7å¹´å¼€å‘ç”Ÿæ¶¯</a> åï¼Œç—›è‹¦å¤§åŠå¹´ï¼Œåœ¨ä»Šå¹´ 8 æœˆåº•ç¦»èŒäº†ï¼Œè·ä»Šå·²æœ‰ 3 ä¸ªæœˆã€‚</p>
<p>å½“æ—¶æˆ‘å’Œè€æ¿è¯´æ‰¿å—ä¸äº†ï¼Œæƒ³é€€å±…äºŒçº¿ï¼Œä¹‹åçš„æŸä¸€å¤©ï¼ŒHR æ‰¾æˆ‘è°ˆè¯ï¼Œç­¾äº†ç¦»èŒåè®®å°±èµ°äººäº†ã€‚</p>
<p>åˆšç¦»èŒå½“ç„¶æ˜¯å–œæ‚¦å’Œæƒ¬æ„çš„ï¼Œæ¯å¤©å°±å‡ºå»æ™’æ™’å¤ªé˜³å¹å¹é£éƒ½æ„Ÿè§‰å¾ˆå¥½ã€‚ä¸ç”¨æå¿ƒåŠèƒ†çš„å®ˆåœ¨æ‰‹æœºæ—è¾¹ï¼Œä¸ç”¨ç²¾ç¥ä¸€ç›´ç´§ç»·ã€‚</p>
<p>æˆ‘å»åŠç†çš„å¤±ä¸šé‡‘é¢†å–ï¼Œæ­¦æ±‰è¿™è¾¹æ¯”è¾ƒå¥½åŠï¼Œçº¿ä¸Šä¹Ÿå¯ä»¥åŠï¼Œé¢†å–çš„æœˆä»½æ˜¯ 2N + 1ï¼Œæˆ‘è¿ç»­å·¥ä½œäº† 6 å¹´ï¼Œå¯ä»¥é¢†å– 13 ä¸ªæœˆï¼Œæ¯ä¸ªæœˆ 1900 å¤šå—é’±ï¼Œè¿˜ç»™ç¼´åŒ»ä¿ï¼Œæ¯”æˆ‘ä¹‹å‰å…¬å¸ç¼´çš„è¿˜å¤šğŸ¤£ğŸ¤£ã€‚</p>
<p>ç¦»èŒåå¼€é”€æŒºå°çš„ï¼Œæˆ‘ç®—äº†ä¸‹æ¯å¤©ç‚¹å¤–å–æœ€å¤š 30 å—é’±ï¼Œæˆ¿ç§Ÿè´µä¸€ç‚¹è¦ 2000ï¼Œå› ä¸ºå’Œè€å©†ä¸€èµ·ç§Ÿï¼Œå‡è®¾å•äººå°±ç®— 1000 å§ï¼Œå†åŠ ä¸Šæ°´ç”µç½‘äº¤é€šè´¹ï¼Œæœ€å¤šä¸è¶…è¿‡ 2500 å—é’±ã€‚</p>
<p>æˆ‘ä»¬æ²¡å•¥é¢å¤–çš„å¼€é”€ï¼Œå¶å°”çœ‹çœ‹ç”µå½±ä¹°ç‚¹é¢åŒ…åƒï¼Œä»¥å‰è¿˜ä¼šå»ä¸‹é¦†å­ï¼Œç°åœ¨å‘ç°éƒ½æ˜¯ç§‘æŠ€ä¸ç‹ æ´»ä¹Ÿåƒçš„å°‘äº†ã€‚</p>
<p>ç°ä»£äººçš„å¥åº·é—®é¢˜æˆ‘è®¤ä¸ºæ˜¯åƒå¤ªå¤šäº†ï¼Œæ·»åŠ å‰‚åŒ–å­¦ææ–™å¤ªå¤šï¼Œåƒäº†åè€Œå¯¹èº«ä½“ä¸å¥½ï¼Œä½†æ˜¯ä¸Šç­å‹åŠ›å¤§çš„æ—¶å€™çš„ç¡®æ§åˆ¶ä¸ä½ï¼Œåƒæˆäº†å”¯ä¸€çš„å‘æ³„å£ã€‚</p>
<p>å¦ä¸€è¾¹çˆ¸å¦ˆå’Œå²³çˆ¶å²³æ¯ä¸€ç›´åœ¨å‚¬ç”Ÿå¨ƒï¼Œæˆ‘é¡¶ä½äº†å‹åŠ›ï¼Œä¸ºåˆ«äººæ´»äº†ä¸€è¾ˆå­ï¼Œä¸ºè‡ªå·±æ´»ä¸ª 1 å¹´å¤šä¸è¿‡åˆ†å§ã€‚</p>
<p>å°±å½“èŠ±ç‚¹é’±ä¹°è‡ªå·±çš„è‡ªç”±èº«äº†ï¼Œåœ¨æ¥ä¸‹æ¥çš„ 1 å¹´å¤šæ—¶é—´é‡Œä¼‘æ¯ä¸‹ã€‚</p>
<p>ç¦»èŒçš„å‰ä¸¤ä¸ªæœˆæˆ‘è¿ BOSS ç›´è˜éƒ½æ²¡çœ‹ï¼Œå¬åˆ°å·¥ä½œä¸¤ä¸ªå­—éƒ½å¤´ç–¼ï¼Œç¬¬ä¸‰ä¸ªæœˆé—²çš„æ— èŠåˆ·äº†ä¸‹ï¼Œéƒ½æ˜¯å¤–åŒ…ï¼Œç°åœ¨æ‰¾å·¥ä½œçš„æƒ…ç»ªä¸æ˜¯å¾ˆå¼ºçƒˆï¼Œåªæ˜¯æŠŠç®€å†æŒ‚ä¸Šå»äº†ï¼Œçœ‹ç¼˜åˆ†å§ã€‚</p>
<p>æƒ¬æ„äº†ä¸€æ®µæ—¶é—´åå°±æœ‰ç‚¹é—²çš„æ— èŠäº†ï¼Œæˆ‘ä¹°äº†ä¸ªå°ç”µé©´ï¼Œåˆ°å¤„æ™’å¤ªé˜³çœ‹é£æ™¯ï¼Œè—é¾™å²›å»äº†å¥½å¤šæ¬¡äº†ã€‚æˆ‘ä¸€èˆ¬å¸¦ä¸ªæŠ˜å åºŠï¼Œçœ‹ç€å¤ªé˜³ä¸é”™çš„åœ°æ–¹å°±é“ºèµ·æ¥èººç€ã€‚</p>
<p>å¦ä¸€ä¸ªå¥½åœ°æ–¹æ˜¯å…‰è°·ä¹¦æˆ¿ï¼Œå°±è·Ÿå›¾ä¹¦é¦†ä¸€æ ·ï¼Œå…‰è°·è¿™è¾¹ç‰¹åˆ«å¤šï¼Œæˆ‘è¿™ç¯‡æ–‡ç« å°±æ˜¯åœ¨å…‰è°·ä¹¦æˆ¿é‡Œé¢å†™çš„ã€‚è¿™é‡Œæœ‰ç”µæœ‰ç½‘ï¼Œå¸¦ä¸ªç”µè„‘å’Œå……ç”µå™¨èƒ½å¾…ä¸€å¤©ã€‚</p>
<p>æˆ‘ç»™å‡ ä¸ªå®šäº† 2 ä¸ªæ…¢æ‚ æ‚ çš„ç›®æ ‡ï¼Œå­¦å¥½è‹±è¯­ã€å­¦å¥½ AIã€‚</p>
<p>çº³ç“¦å°”å¹´åˆæœ‰ä¸€ç¯‡ 3 ä¸ªå¤šå°æ—¶çš„æ·±åº¦é‡‡è®¿ï¼Œæˆ‘åˆšå¬çš„æ—¶å€™å°±è¢«éœ‡æ’¼åˆ°äº†ï¼ŒæŠŠä»–å’Œè°·æ­Œ Prompt ç™½çš®ä¹¦ä¸€èµ·å½“åšè‹±è¯­å­¦ä¹ ææ–™äº†ã€‚</p>
<p>é¢å¤–çš„èƒŒäº† 3000 å¤šä¸ªå•è¯ï¼Œä½†æ˜¯ç‹¬ç«‹çš„å•è¯èƒŒäº†ä¹Ÿæ²¡ç”¨ï¼Œç»å¸¸å¿˜ä¹Ÿä¸çŸ¥é“æ€ä¹ˆè¿ç”¨ï¼Œäºæ˜¯æˆ‘å¼€å§‹èƒŒè¿™äº›ææ–™ï¼ŒåŠå¤§å®¶å°‘èµ°å¼¯è·¯ï¼Œç›´æ¥ä»æ—¥å¸¸æ¥è§¦çš„è‹±æ–‡ææ–™å¼€å§‹ï¼Œåœ¨å¥å­é‡Œé¢å­¦ä¹ å•è¯ï¼Œåˆ«åƒæˆ‘ä¸€æ ·æ¼«æ— ç›®çš„çš„ä¹±èƒŒã€‚</p>
<p>æœ‰æ—¶å€™ä¹Ÿåœ¨æºœåœˆçš„æ—¶å€™ï¼ŒæŠ“ç‚¹å¤–å›½å‹äººèŠå¤©ï¼Œåç§‘æ­¦å¤§é™„è¿‘çš„æ¯”è¾ƒå¤šï¼Œæˆ–è€…çº¿ä¸Šæœ‰ Tandem å’Œ HelloTalkï¼Œæ¨è Tandem å§ï¼Œé‡Œé¢æ¬§ç¾çš„æ¯”è¾ƒå¤šï¼Œæ³¨æ„ä¸‹æ—¶é—´å·®åœ¨åˆ«äººç™½å¤©çš„æ—¶å€™èŠèŠå¤©ï¼ŒHelloTalk é‡Œé¢ä¸œå—äºšçš„å¤šï¼Œå’Œä¸­å›½æ—¶åŒºå·®è·ä¸å¤§ä¸€è‡´ã€‚</p>
<p>AI æˆ‘å…ˆå­¦äº†æ•´ä¸ª LLM çš„åŸç†ï¼Œå†™äº†å››ç¯‡æ–‡ç« è®°å½• LLM æ•´ä¸ªè®­ç»ƒå’Œæ¨ç†çš„è¿‡ç¨‹ï¼Œè¿˜æŒºæœ‰æ„æ€çš„ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±æ˜¯é‡å˜åˆ°è´¨å˜çš„â€œæ¶Œç°â€ï¼Œå†å»çœ‹çœ‹ Difyã€n8n ç­‰ç›¸å…³çš„å·¥å…·ã€‚</p>
<p>è¿˜æœ‰ä¸ªå…¨æ ˆæ–¹é¢ï¼Œæˆ‘çœ‹å¾ˆå¤šå…¬å¸ç”¨ Python å’Œ Goï¼Œå°±é¡ºæ‰‹æŠŠå’Œ Java + Spring å¯¹åº”çš„æ¡†æ¶çœ‹äº†ä¸‹ï¼Œéƒ½å·®ä¸å¤šï¼Œæœ‰ç‚¹ç»†å¾®æ’è¾¹æˆ‘ä¹Ÿå†™äº†å‡ ç¯‡æ–‡ç« åˆ†äº«å‡ºæ¥ã€‚</p>
<p>è‹±è¯­ +  AI æ˜¯æœªæ¥é£å£ï¼Œä¹‹å‰ä¸Šç­æ²¡æ—¶é—´ï¼Œç°åœ¨ç¦»èŒäº†å°±ç‹ ç‹ ç ”ç©¶ä¸€ç•ªï¼Œç¦»èŒçš„ä¸€å¤§å¥½å¤„å°±æ˜¯æŠŠåšåˆ«çš„äº‹çš„æœºä¼šæˆæœ¬æ‹‰çš„å¾ˆä½ã€‚</p>
<p>ä¸­ç¾å½¢åŠ¿æ¯”è¾ƒç´§å¼ ï¼Œä½†æ˜¯ä¸¤å›½ä¹‹é—´çš„éœ€æ±‚æ˜¯å®¢è§‚å­˜åœ¨çš„ï¼Œè¶Šæ˜¯åœ¨è¿™ç§æ—¶å€™è‹±è¯­è¶Šå€¼é’±ã€‚</p>
<p>éšæ‰‹å†™å†™è¿‘æœŸçš„æƒ…å†µç»™å„ä½å‚è€ƒä¸‹ï¼Œç¥å¤§å®¶è¶Šè¿‡è¶Šå¥½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5]]></title>    <link>https://juejin.cn/post/7576378563546366004</link>    <guid>https://juejin.cn/post/7576378563546366004</guid>    <pubDate>2025-11-25T02:58:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7576378563546366004" data-draft-id="7576208176006578228" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2025-11-25T02:58:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¡Œè€…dyc"/> <meta itemprop="url" content="https://juejin.cn/user/4099460216140686"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4099460216140686/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¡Œè€…dyc
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2025-11-25T02:58:56.000Z" title="Tue Nov 25 2025 02:58:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2025-11-25
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">uniapp(vue3) æ‹–æ‹½å…ƒç´ æ”¯æŒå°ç¨‹åºh5</h2>
<h4 data-id="heading-1">æ‹–æ‹½ç»„ä»¶</h4>
<pre><code class="hljs language-ini" lang="ini">&lt;template&gt;
 Â &lt;view
 Â  Â <span class="hljs-attr">ref</span>=<span class="hljs-string">"dragRef"</span>
 Â  Â <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-el"</span>
 Â  Â :<span class="hljs-attr">style</span>=<span class="hljs-string">"{ left: `${position.x}px`, top: `${position.y}px` }"</span>
 Â  Â @<span class="hljs-attr">touchstart</span>=<span class="hljs-string">"handleTouchStart"</span>
 Â  Â @<span class="hljs-attr">touchmove</span>=<span class="hljs-string">"handleTouchMove"</span>
 Â  Â @<span class="hljs-attr">touchend</span>=<span class="hljs-string">"handleTouchEnd"</span>
 Â  Â @<span class="hljs-attr">mousedown</span>=<span class="hljs-string">"handleMouseDown"</span>
 Â  Â @<span class="hljs-attr">mousemove</span>=<span class="hljs-string">"handleMouseMove"</span>
 Â  Â @<span class="hljs-attr">mouseup</span>=<span class="hljs-string">"handleMouseUp"</span>
 Â  Â @<span class="hljs-attr">mouseleave</span>=<span class="hljs-string">"handleMouseUp"</span>
 Â &gt;
 Â  Â &lt;slot&gt;&lt;/slot&gt;
 Â &lt;/view&gt;
&lt;/template&gt;
â€‹
&lt;script setup <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;
// å®šä¹‰ç»„ä»¶å±æ€§
const <span class="hljs-attr">props</span> = withDefaults(
 Â defineProps&lt;{
 Â  Â // åˆå§‹ä½ç½®
 Â  Â initialPosition?: {
 Â  Â  Â x: number
 Â  Â  Â y: number
 Â   }
 Â  Â // è¾¹ç•ŒèŒƒå›´ï¼ˆç›¸å¯¹äºçˆ¶å…ƒç´ ï¼‰
 Â  Â boundary?: {
 Â  Â  Â minX?: number
 Â  Â  Â maxX?: number
 Â  Â  Â minY?: number
 Â  Â  Â maxY?: number
 Â   }
 Â  Â // å›å¼¹é˜ˆå€¼ï¼ˆç™¾åˆ†æ¯”ï¼Œ0-1ï¼‰
 Â  Â bounceThreshold?: number
 Â  Â // æ˜¯å¦å¯ç”¨å›å¼¹
 Â  Â enableBounce?: boolean
 Â  Â initSize: {
 Â  Â  Â width: number
 Â  Â  Â height: number
 Â   }
  }&gt;(),
  {
 Â  Â initialPosition: () =&gt; ({ x: 0, y: 0 }),
 Â  Â boundary: () =&gt; ({}),
 Â  Â bounceThreshold: 0.5,
 Â  Â enableBounce: true,
  },
)
const <span class="hljs-attr">isMiniProgram</span> = os.isXcx
â€‹
// å®šä¹‰äº‹ä»¶
const <span class="hljs-attr">emit</span> = defineEmits&lt;{
 Â start: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â move: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â end: <span class="hljs-section">[{ x: number; y: number }]</span>
 Â bounce: <span class="hljs-section">[{ x: number; y: number }, 'left' | 'right']</span>
}&gt;()
â€‹
// ç»„ä»¶å®ä¾‹å¼•ç”¨
const <span class="hljs-attr">dragRef</span> = ref()
â€‹
// ä½ç½®çŠ¶æ€
const <span class="hljs-attr">position</span> = reactive&lt;{ x: number<span class="hljs-comment">; y: number }&gt;({</span>
 Â x: props.initialPosition.x,
 Â y: props.initialPosition.y,
})
â€‹
// æ‹–æ‹½çŠ¶æ€
const <span class="hljs-attr">isDragging</span> = ref(<span class="hljs-literal">false</span>)
const <span class="hljs-attr">startPosition</span> = ref({ x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> })
const <span class="hljs-attr">elementStartPosition</span> = ref({ x: <span class="hljs-number">0</span>, y: <span class="hljs-number">0</span> })
â€‹
// è®¡ç®—æ‹–æ‹½è¾¹ç•Œçˆ¶å…ƒç´ çš„å®½é«˜å‡å»å…ƒç´ è‡ªèº«çš„å®½é«˜
const <span class="hljs-attr">calculatedBoundary</span> = computed(() =&gt; {
 Â const <span class="hljs-attr">boundary</span> = { ...props.boundary }
 Â // å¦‚æœæ²¡æœ‰æŒ‡å®šè¾¹ç•Œï¼Œå°è¯•ä»çˆ¶å…ƒç´ è·å–
 Â if (!boundary.maxX || !boundary.maxY) {
 Â  Â try {
 Â  Â  Â // é¦–å…ˆæ£€æŸ¥æ˜¯å¦ä¸ºå°ç¨‹åºç¯å¢ƒ
â€‹
 Â  Â  Â if (isMiniProgram) {
 Â  Â  Â  Â // å°ç¨‹åºç¯å¢ƒï¼Œä½¿ç”¨å±å¹•å°ºå¯¸å‡å»å…ƒç´ å®é™…å®½åº¦ï¼ˆå¦‚æœæœ‰ï¼‰
 Â  Â  Â  Â const <span class="hljs-attr">systemInfo</span> = uni.getSystemInfoSync()
 Â  Â  Â  Â const { windowWidth, windowHeight } = systemInfo
 Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = windowWidth - props.initSize.width
 Â  Â  Â   }
 Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = windowHeight - props.initSize.height
 Â  Â  Â   }
 Â  Â   } else {
 Â  Â  Â  Â const <span class="hljs-attr">currentElement</span> = dragRef.value.<span class="hljs-variable">$el</span>
 Â  Â  Â  Â // H5ç¯å¢ƒå°è¯•è·å–çˆ¶å…ƒç´ 
 Â  Â  Â  Â const <span class="hljs-attr">parent</span> = currentElement.parentElement
 Â  Â  Â  Â if (parent) {
 Â  Â  Â  Â  Â const <span class="hljs-attr">parentRect</span> = parent.getBoundingClientRect()
 Â  Â  Â  Â  Â // ä½¿ç”¨å®é™…è·å–çš„å…ƒç´ å°ºå¯¸
 Â  Â  Â  Â  Â const <span class="hljs-attr">elementWidth</span> = props.initSize.width
 Â  Â  Â  Â  Â const <span class="hljs-attr">elementHeight</span> = props.initSize.height
â€‹
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = parentRect.width - elementWidth
 Â  Â  Â  Â   }
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = parentRect.height - elementHeight
 Â  Â  Â  Â   }
 Â  Â  Â   } else {
 Â  Â  Â  Â  Â console.warn('æ— æ³•è·å–çˆ¶å…ƒç´ ï¼Œä½¿ç”¨é»˜è®¤è¾¹ç•Œå€¼')
 Â  Â  Â  Â  Â // ä½¿ç”¨é»˜è®¤è¾¹ç•Œå€¼ä½œä¸ºå¤‡é€‰
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = window.innerWidth - props.initSize.width // å‡è®¾å…ƒç´ å®½åº¦çº¦ä¸º<span class="hljs-number">100</span>px
 Â  Â  Â  Â   }
 Â  Â  Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = window.innerHeight - props.initSize.height // å‡è®¾å…ƒç´ é«˜åº¦çº¦ä¸º<span class="hljs-number">100</span>px
 Â  Â  Â  Â   }
 Â  Â  Â   }
 Â  Â   }
 Â   } catch (error) {
 Â  Â  Â console.error('è·å–çˆ¶å…ƒç´ å°ºå¯¸æ—¶å‡ºé”™:', error)
 Â  Â  Â // å‡ºé”™æ—¶ä½¿ç”¨é»˜è®¤å€¼
 Â  Â  Â if (<span class="hljs-attr">boundary.maxX</span> === undefined) {
 Â  Â  Â  Â <span class="hljs-attr">boundary.maxX</span> = <span class="hljs-number">300</span> // é»˜è®¤æœ€å¤§Xå€¼
 Â  Â   }
 Â  Â  Â if (<span class="hljs-attr">boundary.maxY</span> === undefined) {
 Â  Â  Â  Â <span class="hljs-attr">boundary.maxY</span> = <span class="hljs-number">300</span> // é»˜è®¤æœ€å¤§Yå€¼
 Â  Â   }
 Â   }
  }
â€‹
 Â // ç¡®ä¿minXå’ŒminYé»˜è®¤ä¸º0
 Â if (<span class="hljs-attr">boundary.minX</span> === undefined) {
 Â  Â <span class="hljs-attr">boundary.minX</span> = <span class="hljs-number">0</span>
  }
 Â if (<span class="hljs-attr">boundary.minY</span> === undefined) {
 Â  Â <span class="hljs-attr">boundary.minY</span> = <span class="hljs-number">0</span>
  }
 Â console.log('~~~~è®¡ç®—è¾¹ç•ŒcalculatedBoundary', boundary)
 Â return boundary
})
â€‹
// å¤„ç†è§¦æ‘¸å¼€å§‹
const <span class="hljs-attr">handleTouchStart</span> = (e: TouchEvent) =&gt; {
 Â console.log('~~~~å¼€å§‹handleTouchStart', e)
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">true</span>
 Â // è®°å½•æ‹–æ‹½å¼€å§‹ä½ç½®
 Â <span class="hljs-attr">startPosition.value</span> = {
 Â  Â x: e.touches<span class="hljs-section">[0]</span>.clientX,
 Â  Â y: e.touches<span class="hljs-section">[0]</span>.clientY,
  }
 Â <span class="hljs-attr">elementStartPosition.value</span> = { ...position }
â€‹
 Â emit('start', { ...position })
}
â€‹
// å¤„ç†è§¦æ‘¸ç§»åŠ¨
const <span class="hljs-attr">handleTouchMove</span> = (e: TouchEvent) =&gt; {
 Â console.log('~~~~~ç§»åŠ¨handleTouchMove', e)
 Â if (!isDragging.value) return
â€‹
 Â // è®¡ç®—ç§»åŠ¨è·ç¦»
 Â const <span class="hljs-attr">deltaX</span> = e.touches[<span class="hljs-number">0</span>].clientX - startPosition.value.x
 Â const <span class="hljs-attr">deltaY</span> = e.touches[<span class="hljs-number">0</span>].clientY - startPosition.value.y
â€‹
 Â updatePosition(deltaX, deltaY)
}
â€‹
// å¤„ç†è§¦æ‘¸ç»“æŸ
const <span class="hljs-attr">handleTouchEnd</span> = () =&gt; {
 Â console.log('~~~~~ç»“æŸhandleTouchEnd')
 Â finishDrag()
}
â€‹
// å¤„ç†é¼ æ ‡æŒ‰ä¸‹
const <span class="hljs-attr">handleMouseDown</span> = (e: MouseEvent) =&gt; {
 Â console.log('~~~~é¼ æ ‡æŒ‰ä¸‹handleMouseDown', e)
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">true</span>
 Â <span class="hljs-attr">startPosition.value</span> = { x: e.clientX, y: e.clientY }
 Â <span class="hljs-attr">elementStartPosition.value</span> = { ...position }
â€‹
 Â emit('start', { ...position })
â€‹
 Â // é˜»æ­¢æ–‡æœ¬é€‰æ‹©
 Â e.preventDefault()
}
â€‹
// å¤„ç†é¼ æ ‡ç§»åŠ¨
const <span class="hljs-attr">handleMouseMove</span> = (e: MouseEvent) =&gt; {
 Â console.log('~~~~é¼ æ ‡ç§»åŠ¨handleMouseMove', e)
 Â if (!isDragging.value) return
â€‹
 Â const <span class="hljs-attr">deltaX</span> = e.clientX - startPosition.value.x
 Â const <span class="hljs-attr">deltaY</span> = e.clientY - startPosition.value.y
â€‹
 Â updatePosition(deltaX, deltaY)
}
â€‹
// å¤„ç†é¼ æ ‡æ¾å¼€
const <span class="hljs-attr">handleMouseUp</span> = () =&gt; {
 Â console.log('~~~~é¼ æ ‡æ¾å¼€handleMouseUp')
 Â finishDrag()
}
â€‹
// æ›´æ–°ä½ç½®
const <span class="hljs-attr">updatePosition</span> = (deltaX: number, deltaY: number) =&gt; {
 Â console.log('~~~~æ›´æ–°ä½ç½®updatePosition', deltaX, deltaY)
 Â let <span class="hljs-attr">newX</span> = elementStartPosition.value.x + deltaX
 Â let <span class="hljs-attr">newY</span> = elementStartPosition.value.y + deltaY
â€‹
 Â // åº”ç”¨è¾¹ç•Œçº¦æŸ
 Â const <span class="hljs-attr">boundary</span> = calculatedBoundary.value
 Â // xè½´æœ€å°ä¸èƒ½å°äº0
 Â if (boundary.minX !== undefined) {
 Â  Â <span class="hljs-attr">newX</span> = Math.max(boundary.minX, newX)
  }
 Â // xè½´æœ€å¤§ä¸èƒ½å¤§äºçˆ¶å…ƒç´ å®½åº¦å‡å»å…ƒç´ å®½åº¦
 Â if (boundary.maxX !== undefined) {
 Â  Â <span class="hljs-attr">newX</span> = Math.min(boundary.maxX, newX)
  }
 Â // yè½´æœ€å°ä¸èƒ½å°äº0
 Â if (boundary.minY !== undefined) {
 Â  Â <span class="hljs-attr">newY</span> = Math.max(boundary.minY, newY)
  }
 Â // yè½´æœ€å¤§ä¸èƒ½å¤§äºçˆ¶å…ƒç´ é«˜åº¦å‡å»å…ƒç´ é«˜åº¦
 Â if (boundary.maxY !== undefined) {
 Â  Â <span class="hljs-attr">newY</span> = Math.min(boundary.maxY, newY)
  }
â€‹
 Â // æ›´æ–°ä½ç½®
 Â <span class="hljs-attr">position.x</span> = newX
 Â <span class="hljs-attr">position.y</span> = newY
â€‹
 Â emit('move', { ...position })
}
â€‹
// å®Œæˆæ‹–æ‹½ï¼Œå¤„ç†å›å¼¹
const <span class="hljs-attr">finishDrag</span> = () =&gt; {
 Â if (!isDragging.value) return
â€‹
 Â <span class="hljs-attr">isDragging.value</span> = <span class="hljs-literal">false</span>
â€‹
 Â // å¤„ç†å›å¼¹é€»è¾‘
 Â if (props.enableBounce &amp;&amp; calculatedBoundary.value.maxX !== undefined) {
 Â  Â const <span class="hljs-attr">maxX</span> = calculatedBoundary.value.maxX
 Â  Â const <span class="hljs-attr">threshold</span> = props.bounceThreshold * maxX
â€‹
 Â  Â if (position.x &lt; threshold) {
 Â  Â  Â // å›å¼¹åˆ°å·¦ä¾§
 Â  Â  Â animateToPosition(0, position.y, 'left')
 Â   } else if (position.x &gt; maxX - threshold) {
 Â  Â  Â // å›å¼¹åˆ°å³ä¾§
 Â  Â  Â animateToPosition(maxX, position.y, 'right')
 Â  Â  Â return // åŠ¨ç”»å®Œæˆåä¼šè§¦å‘endäº‹ä»¶
 Â   }
  }
â€‹
 Â emit('end', { ...position })
}
â€‹
// å…¼å®¹çš„åŠ¨ç”»å¸§è¯·æ±‚å‡½æ•°ï¼Œé€‚é…å°ç¨‹åºç¯å¢ƒ
const <span class="hljs-attr">requestAnimationFrameCompat</span> = (callback: any) =&gt; {
 Â // æ£€æŸ¥æ˜¯å¦ä¸ºå°ç¨‹åºç¯å¢ƒ
 Â return setTimeout(callback, 16) // çº¦60fps
}
â€‹
// åŠ¨ç”»ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®
const <span class="hljs-attr">animateToPosition</span> = (targetX: number, targetY: number, direction: <span class="hljs-string">'left'</span> | <span class="hljs-string">'right'</span>) =&gt; {
 Â const <span class="hljs-attr">startX</span> = position.x
 Â const <span class="hljs-attr">startY</span> = position.y
 Â const <span class="hljs-attr">duration</span> = <span class="hljs-number">300</span> // åŠ¨ç”»æŒç»­æ—¶é—´
 Â const <span class="hljs-attr">startTime</span> = Date.now()
 Â let animationId: <span class="hljs-attr">any</span> = null
â€‹
 Â const <span class="hljs-attr">animate</span> = () =&gt; {
 Â  Â const <span class="hljs-attr">currentTime</span> = Date.now()
 Â  Â const <span class="hljs-attr">elapsed</span> = currentTime - startTime
 Â  Â const <span class="hljs-attr">progress</span> = Math.min(elapsed / duration, <span class="hljs-number">1</span>)
â€‹
 Â  Â // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°
 Â  Â const <span class="hljs-attr">easeOut</span> = <span class="hljs-number">1</span> - (<span class="hljs-number">1</span> - progress) ** <span class="hljs-number">3</span>
â€‹
 Â  Â <span class="hljs-attr">position.x</span> = startX + (targetX - startX) * easeOut
 Â  Â <span class="hljs-attr">position.y</span> = startY + (targetY - startY) * easeOut
â€‹
 Â  Â if (progress &lt; 1) {
 Â  Â  Â <span class="hljs-attr">animationId</span> = requestAnimationFrameCompat(animate)
 Â   } else {
 Â  Â  Â // åŠ¨ç”»ç»“æŸ
 Â  Â  Â <span class="hljs-attr">position.x</span> = targetX
 Â  Â  Â <span class="hljs-attr">position.y</span> = targetY
 Â  Â  Â emit('bounce', { ...position }, direction)
 Â  Â  Â emit('end', { ...position })
 Â   }
  }
â€‹
 Â <span class="hljs-attr">animationId</span> = requestAnimationFrameCompat(animate)
}
â€‹
// æš´éœ²æ–¹æ³•ç»™çˆ¶ç»„ä»¶
const <span class="hljs-attr">setPosition</span> = (x: number, y: number) =&gt; {
 Â <span class="hljs-attr">position.x</span> = x
 Â <span class="hljs-attr">position.y</span> = y
}
â€‹
const <span class="hljs-attr">resetPosition</span> = () =&gt; {
 Â <span class="hljs-attr">position.x</span> = props.initialPosition.x
 Â <span class="hljs-attr">position.y</span> = props.initialPosition.y
}
â€‹
defineExpose({
 Â setPosition,
 Â resetPosition,
 Â position,
})
&lt;/script&gt;
â€‹
&lt;style scoped <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;
.drag-el {
 Â position: absolute<span class="hljs-comment">;</span>
 Â cursor: move<span class="hljs-comment">; /* é¼ æ ‡æŒ‡é’ˆæ ·å¼ */</span>
 Â user-select: none<span class="hljs-comment">; /* é˜²æ­¢æ–‡æœ¬é€‰ä¸­ */</span>
 Â touch-action: none<span class="hljs-comment">; /* é˜²æ­¢è§¦æ‘¸äº‹ä»¶çš„é»˜è®¤è¡Œä¸º */</span>
â€‹
  // å¢åŠ å¯ç‚¹å‡»åŒºåŸŸ
  &amp;:active {
 Â   // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ æ‹–æ‹½æ—¶çš„è§†è§‰åé¦ˆ
  }
}
&lt;/style&gt;
â€‹
</code></pre>
<h4 data-id="heading-2">ä½¿ç”¨ç»„ä»¶</h4>
<pre><code class="hljs language-xml" lang="xml">vue
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
 Â <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"drag-container"</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">DragEl</span> <span class="hljs-attr">:initSize</span>=<span class="hljs-string">"dragElSize"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dragElRef"</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">view</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"width: 200rpx; height: 100rpx"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"bg-[#f0f0f0] p-4 rounded-md"</span>&gt;</span>
 Â  Â  Â  Â  Â <span class="hljs-tag">&lt;<span class="hljs-name">text</span>&gt;</span>æ‹–åŠ¨å…ƒç´ <span class="hljs-tag">&lt;/<span class="hljs-name">text</span>&gt;</span>
 Â  Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
 Â  Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
 Â  Â <span class="hljs-tag">&lt;/<span class="hljs-name">DragEl</span>&gt;</span>
 Â <span class="hljs-tag">&lt;/<span class="hljs-name">view</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"ts"</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">DragEl</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'@/pages-word/components/DragEl/index.vue'</span>
â€‹
<span class="hljs-keyword">const</span> dragElSize = <span class="hljs-title function_">ref</span>({ <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">0</span> })
<span class="hljs-keyword">const</span> dragElRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)
â€‹
<span class="hljs-keyword">const</span> <span class="hljs-title function_">getElementSize</span> = (<span class="hljs-params"/>) =&gt; {
 Â <span class="hljs-comment">// 1. åˆ›å»ºé€‰æ‹©å™¨å®ä¾‹</span>
 Â <span class="hljs-keyword">const</span> query = uni.<span class="hljs-title function_">createSelectorQuery</span>().<span class="hljs-title function_">in</span>(dragElRef.<span class="hljs-property">value</span>) <span class="hljs-comment">// å…³é”®ï¼š.in(this) ç»‘å®šå½“å‰ç»„ä»¶å®ä¾‹ï¼ˆå¿…å¡«ï¼Œå¦åˆ™å¯èƒ½è·å–ä¸åˆ°ï¼‰</span>
â€‹
 Â <span class="hljs-comment">// 2. é€‰æ‹©ç›®æ ‡å…ƒç´ ï¼Œè·å–å¸ƒå±€ä¿¡æ¯</span>
 Â query
 Â   .<span class="hljs-title function_">select</span>(<span class="hljs-string">'.drag-el'</span>) <span class="hljs-comment">// é€šè¿‡ id é€‰æ‹©å…ƒç´ ï¼ˆä¹Ÿå¯ç”¨ .class é€‰æ‹©ï¼Œå¦‚ .boxï¼‰</span>
 Â   .<span class="hljs-title function_">boundingClientRect</span>(<span class="hljs-function">(<span class="hljs-params">rect</span>) =&gt;</span> {
 Â  Â  Â <span class="hljs-comment">// rect åŒ…å«å…ƒç´ çš„å¸ƒå±€ä¿¡æ¯</span>
 Â  Â  Â <span class="hljs-keyword">if</span> (rect) {
 Â  Â  Â  Â dragElSize.<span class="hljs-property">value</span> = { <span class="hljs-attr">width</span>: rect.<span class="hljs-property">width</span>, <span class="hljs-attr">height</span>: rect.<span class="hljs-property">height</span> }
 Â  Â   } <span class="hljs-keyword">else</span> {
 Â  Â  Â  Â <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœªæ‰¾åˆ°ç›®æ ‡å…ƒç´ '</span>)
 Â  Â   }
 Â   })
 Â   .<span class="hljs-title function_">exec</span>() <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢ï¼ˆå¿…é¡»è°ƒç”¨ï¼Œå¦åˆ™å›è°ƒä¸è§¦å‘ï¼‰</span>
}
<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
 Â <span class="hljs-title function_">nextTick</span>(<span class="hljs-function">() =&gt;</span> {
 Â  Â <span class="hljs-title function_">getElementSize</span>()
  })
})
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"scss"</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.dd</span> {
 Â <span class="hljs-attribute">position</span>: absolute;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
â€‹
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>