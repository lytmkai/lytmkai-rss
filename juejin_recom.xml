<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[çº¯CSSå®ç°å‘é€éªŒè¯ç è¯»ç§’å€’æ•° - ifå‡½æ•°å¦™ç”¨]]></title>    <link>https://juejin.cn/post/7602146335215599656</link>    <guid>https://juejin.cn/post/7602146335215599656</guid>    <pubDate>2026-02-03T02:39:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602146335215599656" data-draft-id="7602072652607062056" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="çº¯CSSå®ç°å‘é€éªŒè¯ç è¯»ç§’å€’æ•° - ifå‡½æ•°å¦™ç”¨"/> <meta itemprop="keywords" content="CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:39:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="juejin_cn"/> <meta itemprop="url" content="https://juejin.cn/user/3016715636324125"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            çº¯CSSå®ç°å‘é€éªŒè¯ç è¯»ç§’å€’æ•° - ifå‡½æ•°å¦™ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3016715636324125/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    juejin_cn
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:39:29.000Z" title="Tue Feb 03 2026 02:39:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    16
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><p>ç‚¹å‡»å‘é€çŸ­ä¿¡éªŒè¯ç å€’æ•°60ç§’åå¯é‡æ–°å‘é€ï¼Œå€ŸåŠ© <code>if()</code> çº¯ CSS ä¹Ÿèƒ½å®ç°è¿™æ ·çš„æ•ˆæœã€‚</p>
<blockquote>
<p>è¦æ±‚ Chrome/Edge â‰¥ 137</p>
</blockquote>
<p><span href="https://code.juejin.cn/pen/7602229993149562916" class="code-editor-container"><iframe class="code-editor-frame" data-code="code-editor-element" data-code-id="7602229993149562916" data-src="https://code.juejin.cn/pen/7602229993149562916" style="display:none;" loading="lazy"/><span class="loading-placeholder" style="display:none"><img class="placeholder-image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAYAAAA6/NlyAAAAJElEQVRoge3BMQEAAADCoPVP7WkJoAAAAAAAAAAAAAAAAAAAbjh8AAFte11jAAAAAElFTkSuQmCC" loading="lazy"/><span class="loading-logo"/></span></span></p>
<ul>
<li>
<p><code>@property</code> æ˜¯ CSS Houdini API çš„ä¸€éƒ¨åˆ†ï¼Œç”¨æ¥å®šä¹‰ CSS è‡ªå®šä¹‰å±æ€§ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-keyword">@property</span> --num {
  syntax: <span class="hljs-string">"&lt;integer&gt;"</span>;
  initial-value: <span class="hljs-number">0</span>;
  inherits: true;
}
</code></pre>
</li>
<li>
<p>CSS å‡½æ•° <code>if()</code> å…è®¸æ ¹æ®æ¡ä»¶æµ‹è¯•çš„ç»“æœä¸ºå±æ€§è®¾ç½®ä¸åŒçš„å€¼ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">label</span> {
  <span class="hljs-attr">--num</span>: <span class="hljs-built_in">var</span>(--sec);
  counter-set: count <span class="hljs-built_in">var</span>(--num);
  <span class="hljs-attribute">color</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-built_in">var</span>(--sec)): blue; style(<span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>): blue; else: <span class="hljs-number">#999</span>; );
  <span class="hljs-attribute">pointer-events</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-built_in">var</span>(--sec)): initial; style(<span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>): initial; else: none; );
}
</code></pre>
</li>
<li>
<p>CSS å‡½æ•° <code>counter()</code> è¿”å›ä¸€ä¸ªä»£è¡¨è®¡æ•°å™¨çš„å½“å‰å€¼çš„å­—ç¬¦ä¸²ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span>)<span class="hljs-selector-pseudo">::after</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-number">0</span>): <span class="hljs-string">"é‡æ–°å‘é€"</span>; else: <span class="hljs-built_in">counter</span>(count) <span class="hljs-string">"ç§’åå¯é‡æ–°å‘é€"</span>; );
}
</code></pre>
</li>
<li>
<p>CSS å‡½æ•° <code>steps()</code> å®šä¹‰äº†ä¸€ä¸ªè¿‡æ¸¡æ•ˆæœï¼Œå°†è¾“å…¥æ—¶é—´åˆ’åˆ†ä¸ºæŒ‡å®šæ•°é‡çš„ç­‰é•¿é—´éš”ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span>) {
  <span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">transition</span>: --num <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--sec) * <span class="hljs-number">1s</span>) <span class="hljs-built_in">steps</span>(<span class="hljs-built_in">var</span>(--sec), jump-start);
}
</code></pre>
</li>
</ul>
<p>å®Œæ•´ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1.0"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>çº¯CSSå®ç°å‘é€éªŒè¯ç è¯»ç§’å€’æ•° - ifå‡½æ•°å¦™ç”¨<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css">
    <span class="hljs-keyword">@property</span> --num {
      syntax: <span class="hljs-string">"&lt;integer&gt;"</span>;
      initial-value: <span class="hljs-number">0</span>;
      inherits: true;
    }
    <span class="hljs-selector-pseudo">:root</span> {
      <span class="hljs-attr">--sec</span>: <span class="hljs-number">11</span>;
    }
    <span class="hljs-selector-tag">label</span> {
      <span class="hljs-attr">--num</span>: <span class="hljs-built_in">var</span>(--sec);
      counter-set: count <span class="hljs-built_in">var</span>(--num);
      <span class="hljs-attribute">color</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-built_in">var</span>(--sec)): blue; style(<span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>): blue; else: <span class="hljs-number">#999</span>; );
      <span class="hljs-attribute">pointer-events</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-built_in">var</span>(--sec)): initial; style(<span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>): initial; else: none; );
      <span class="hljs-attribute">cursor</span>: pointer;
    }
    <span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">::after</span> {
      <span class="hljs-attr">--num</span>: inherit;
      <span class="hljs-attribute">content</span>: <span class="hljs-string">"å‘é€éªŒè¯ç "</span>;
    }
    <span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span>)<span class="hljs-selector-pseudo">::after</span> {
      <span class="hljs-attribute">content</span>: <span class="hljs-built_in">if</span>(<span class="hljs-built_in">style</span>(--num: <span class="hljs-number">0</span>): <span class="hljs-string">"é‡æ–°å‘é€"</span>; else: <span class="hljs-built_in">counter</span>(count) <span class="hljs-string">"ç§’åå¯é‡æ–°å‘é€"</span>; );
    }
    <span class="hljs-selector-tag">label</span><span class="hljs-selector-pseudo">:has</span>(<span class="hljs-selector-tag">input</span><span class="hljs-selector-pseudo">:checked</span>) {
      <span class="hljs-attr">--num</span>: <span class="hljs-number">0</span>;
      <span class="hljs-attribute">transition</span>: --num <span class="hljs-built_in">calc</span>(<span class="hljs-built_in">var</span>(--sec) * <span class="hljs-number">1s</span>) <span class="hljs-built_in">steps</span>(<span class="hljs-built_in">var</span>(--sec), jump-start);
    }
    <span class="hljs-selector-tag">label</span> <span class="hljs-selector-tag">input</span> {
      <span class="hljs-attribute">display</span>: none;
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">for</span>=<span class="hljs-string">"send-code"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"checkbox"</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"send-code"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[KingbaseESæ•°æ®åº“ï¼šksql å‘½ä»¤è¡Œç©è½¬ç´¢å¼•ä¸è§†å›¾ï¼Œä»åˆ›å»ºåˆ°é¿å‘]]></title>    <link>https://juejin.cn/post/7601464318409457706</link>    <guid>https://juejin.cn/post/7601464318409457706</guid>    <pubDate>2026-02-02T01:40:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601464318409457706" data-draft-id="7601387539335479332" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="KingbaseESæ•°æ®åº“ï¼šksql å‘½ä»¤è¡Œç©è½¬ç´¢å¼•ä¸è§†å›¾ï¼Œä»åˆ›å»ºåˆ°é¿å‘"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-02-02T01:40:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="xcLeigh"/> <meta itemprop="url" content="https://juejin.cn/user/1775071503323875"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            KingbaseESæ•°æ®åº“ï¼šksql å‘½ä»¤è¡Œç©è½¬ç´¢å¼•ä¸è§†å›¾ï¼Œä»åˆ›å»ºåˆ°é¿å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1775071503323875/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    xcLeigh
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T01:40:20.000Z" title="Mon Feb 02 2026 01:40:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»16åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">KingbaseESæ•°æ®åº“ï¼šksql å‘½ä»¤è¡Œç©è½¬ç´¢å¼•ä¸è§†å›¾ï¼Œä»åˆ›å»ºåˆ°é¿å‘</h2>
<blockquote>
<p>æœ¬æ–‡èšç„¦ KingbaseES æ•°æ®åº“ä¸­ ksql å‘½ä»¤è¡Œå¯¹ç´¢å¼•ä¸è§†å›¾çš„æ“ä½œï¼Œå…ˆä»‹ç»å‰ç½®å‡†å¤‡ï¼Œéœ€è¿æ¥æ•°æ®åº“åˆ‡æ¢è‡³ç›®æ ‡æ¨¡å¼ï¼ˆå¦‚ test_schemaï¼‰ï¼Œç¡®è®¤å¹¶åˆ›å»º sys_user è¡¨ï¼Œæ’å…¥æµ‹è¯•æ•°æ®ã€‚æ¥ç€è¯¦è§£ç´¢å¼•ç®¡ç†ï¼Œæ¶µç›–æ™®é€šã€å”¯ä¸€ã€å¤åˆä¸‰ç±»ç´¢å¼•çš„åˆ›å»ºæ–¹æ³•ï¼Œç”¨ \diã€\d + å‘½ä»¤æŸ¥çœ‹ç´¢å¼•ï¼Œé€šè¿‡é‡å»ºã€é‡å‘½åã€åˆ é™¤è¿›è¡Œç»´æŠ¤ï¼Œè¿˜ç»™å‡ºç´¢å¼•æ•°é‡ä¸è¶… 5 ä¸ªã€å°è¡¨æ— éœ€å»ºç´¢å¼•ç­‰é¿å‘æç¤ºã€‚ç„¶åé˜è¿°è§†å›¾ç®¡ç†ï¼ŒåŒ…æ‹¬åŸºç¡€ã€è¿›é˜¶ã€åªè¯»è§†å›¾çš„åˆ›å»ºï¼Œç”¨ \dvã€\d + å‘½ä»¤æŸ¥çœ‹ï¼Œä»¥åŠæŸ¥è¯¢ã€ä¿®æ”¹ã€åˆ é™¤æ“ä½œï¼Œå¼ºè°ƒè§†å›¾ä¿®æ”¹é™åˆ¶ç­‰æ³¨æ„äº‹é¡¹ã€‚æœ€åæ’æŸ¥é«˜é¢‘æŠ¥é”™ï¼Œæ€»ç»“ç´¢å¼•ä¸è§†å›¾é…åˆä½¿ç”¨è¦ç‚¹ï¼ŒåŠ©åŠ›æ–°æ‰‹æŒæ¡é«˜æ•ˆæŸ¥è¯¢æŠ€èƒ½ã€‚</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3cb22951c3d74268b450eff84b73f6cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGNMZWlnaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770601220&amp;x-signature=Y%2FoZtfC%2FvZ5IuymebfSoq1VJh5Y%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d34bcdae126460cbf4f2d54b7c90145~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeGNMZWlnaA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770601220&amp;x-signature=%2Bo%2BhMrn0xwsmcYKwBOHelbsXiWA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å­¦ä¼šäº†è¡¨çš„åŸºæœ¬æ“ä½œåï¼Œè¦æ˜¯æƒ³è®©æŸ¥è¯¢æ›´å¿«ã€è®¿é—®æ•°æ®æ›´çœäº‹ï¼Œé‚£â€œç´¢å¼•â€å’Œâ€œè§†å›¾â€è¿™ä¿©å¥½å¸®æ‰‹å¯å¾—å¥½å¥½å­¦ä¸€å­¦ã€‚è¯´èµ·æ¥ï¼Œç´¢å¼•å°±åƒå’±ä»¬çœ‹ä¹¦æ—¶çš„ç›®å½•ï¼Œç¿»æ‰¾å†…å®¹èƒ½çœä¸å°‘åŠ²ï¼›è§†å›¾å‘¢ï¼Œæ›´åƒæ˜¯ä¸ªä¸“å±æ•°æ®çª—å£ï¼Œä¸ä»…èƒ½æŠŠå¤æ‚çš„æŸ¥è¯¢é€»è¾‘è—èµ·æ¥ï¼Œè¿˜èƒ½æ§åˆ¶å“ªäº›æ•°æ®èƒ½è¢«çœ‹åˆ°ã€‚ä»Šå¤©å’±å°±ä¸“é—¨èŠèŠâ€œksqlå‘½ä»¤è¡Œæ“ä½œç´¢å¼•ä¸è§†å›¾â€ï¼Œä»å®ƒä»¬çš„ä½œç”¨ã€åˆ›å»ºæ–¹æ³•ï¼Œåˆ°æ€ä¹ˆæŸ¥çœ‹ã€ç»´æŠ¤ï¼Œæœ€åæ€ä¹ˆåˆ é™¤ï¼Œä¸€æ­¥æ­¥æ‹†æˆå®å®åœ¨åœ¨çš„æ“ä½œæ­¥éª¤ï¼Œå†é…ä¸Šä¾‹å­å’Œé¿å‘å°æç¤ºï¼Œä¿è¯æ–°æ‰‹æœ‹å‹ä¹Ÿèƒ½çœ‹æ‡‚ã€èƒ½ç”¨èµ·æ¥ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å‰ç½®å‡†å¤‡ï¼šç¡®è®¤æ“ä½œåŸºç¡€ï¼ˆè¡”æ¥å‰æ–‡ï¼Œç¡®ä¿è¿è´¯ï¼‰</h3>
<p>ç´¢å¼•å’Œè§†å›¾éƒ½å¾—ä¾æ‰˜å·²æœ‰çš„è¡¨æ‰èƒ½ç”¨ï¼Œæ‰€ä»¥å’±å¾—å…ˆåšå¥½ä¸‹é¢è¿™äº›å‡†å¤‡å·¥ä½œï¼ˆå¤§å®¶å¯ä»¥å‚è€ƒç¬¬å››ç¯‡â€œè¡¨çš„è¿ä½œâ€çš„ç›¸å…³å†…å®¹ï¼‰ï¼Œåˆ«åˆ°æ—¶å€™æ“ä½œåŠå¤©ï¼Œå› ä¸ºå°‘äº†åŸºç¡€ä¾èµ–å¼¹å‡ºä¸€å †é”™è¯¯æç¤ºï¼Œé‚£å°±éº»çƒ¦äº†ã€‚</p>
<h4 data-id="heading-2">1.1 è¿æ¥æ•°æ®åº“å¹¶åˆ‡æ¢ç›®æ ‡æ¨¡å¼</h4>
<p>å…ˆç”¨ksqlè¿ä¸Šæœ¬åœ°çš„KingbaseESæ•°æ®åº“ï¼Œå†åˆ‡æ¢åˆ°ä¹‹å‰åˆ›å»ºçš„<code>test_schema</code>æ¨¡å¼é‡Œã€‚æ¥ç€å¾—ç¡®è®¤ä¸€ä¸‹ç›®æ ‡è¡¨åœ¨ä¸åœ¨ï¼Œå°±æ‹¿<code>sys_user</code>è¡¨ä¸¾ä¾‹ï¼Œè¦æ˜¯æ²¡æœ‰ï¼Œè¦ä¹ˆé‡æ–°å»ºä¸€ä¸ªï¼Œè¦ä¹ˆæ¢ä¸ªæ–°ä¾‹å­è¡¨ï¼Œæ€»ä¹‹å¾—ä¿è¯åé¢çš„æ“ä½œèƒ½é¡ºåˆ©è¿›è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. è¿æ¥æ•°æ®åº“ï¼ˆè‹¥æœªè¿æ¥ï¼‰</span>
ksql <span class="hljs-operator">-</span>d kingbase <span class="hljs-operator">-</span>U <span class="hljs-keyword">system</span>
<span class="hljs-comment">-- 2. åˆ‡æ¢åˆ° test_schema æ¨¡å¼</span>
<span class="hljs-keyword">SET</span> search_path <span class="hljs-keyword">TO</span> test_schema, public;
<span class="hljs-comment">-- 3. ç¡®è®¤ç›®æ ‡è¡¨å­˜åœ¨ï¼ˆå¦‚ sys_user è¡¨ï¼‰</span>
\dt sys_user;
<span class="hljs-comment">-- è‹¥ä¸å­˜åœ¨ï¼Œåˆ›å»ºç¤ºä¾‹è¡¨ï¼ˆç”¨äºåç»­ç´¢å¼•/è§†å›¾æ“ä½œï¼‰</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> sys_user (
    id SERIAL <span class="hljs-keyword">PRIMARY</span> KEY,
    name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    phone <span class="hljs-type">CHAR</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    email <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">UNIQUE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,
    create_time <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-built_in">CURRENT_TIMESTAMP</span>
) TABLESPACE test_ts;
</code></pre>
<p>æ‰§è¡Œå®Œè¦æ˜¯æ˜¾ç¤º<code>Table "test_schema.sys_user" does not exist</code>ï¼Œé‚£å°±å…ˆæ‰§è¡Œä¸Šé¢çš„<code>CREATE TABLE</code>è¯­å¥å»ºè¡¨ï¼Œæœ‰äº†è¡¨ï¼Œåé¢çš„æ“ä½œæ‰æœ‰è½½ä½“ã€‚</p>
<h4 data-id="heading-3">1.2 æ’å…¥æµ‹è¯•æ•°æ®ï¼ˆç”¨äºéªŒè¯ç´¢å¼•/è§†å›¾æ•ˆæœï¼‰</h4>
<p>ä¸ºäº†åé¢èƒ½æµ‹è¯•ç´¢å¼•çš„æŸ¥è¯¢é€Ÿåº¦ï¼Œä¹Ÿèƒ½çœ‹çœ‹è§†å›¾å±•ç¤ºæ•°æ®çš„æ ·å­ï¼Œå¾—ç»™<code>sys_user</code>è¡¨åŠ äº›æ¨¡æ‹Ÿæ•°æ®ã€‚æœ€å¥½å¤šåŠ ç‚¹ï¼Œæ¯”å¦‚ä¸Šåƒæ¡ï¼Œè¿™æ ·æ›´è´´è¿‘çœŸå®ä½¿ç”¨åœºæ™¯ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æ‰¹é‡æ’å…¥10æ¡æµ‹è¯•æ•°æ®ï¼ˆå¯å¤åˆ¶æ‰©å±•ï¼‰</span>
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_schema.sys_user (name, phone, email)
<span class="hljs-keyword">VALUES</span> 
(<span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-string">'13800138000'</span>, <span class="hljs-string">'zhangsan@test.com'</span>),
(<span class="hljs-string">'æå››'</span>, <span class="hljs-string">'13900139000'</span>, <span class="hljs-string">'lisi@test.com'</span>),
(<span class="hljs-string">'ç‹äº”'</span>, <span class="hljs-string">'13700137000'</span>, <span class="hljs-string">'wangwu@test.com'</span>),
(<span class="hljs-string">'èµµå…­'</span>, <span class="hljs-string">'13600136000'</span>, <span class="hljs-string">'zhaoliu@test.com'</span>),
(<span class="hljs-string">'å­™ä¸ƒ'</span>, <span class="hljs-string">'13500135000'</span>, <span class="hljs-string">'sunqi@test.com'</span>),
(<span class="hljs-string">'å‘¨å…«'</span>, <span class="hljs-string">'13400134000'</span>, <span class="hljs-string">'zhouba@test.com'</span>),
(<span class="hljs-string">'å´ä¹'</span>, <span class="hljs-string">'13300133000'</span>, <span class="hljs-string">'wujiu@test.com'</span>),
(<span class="hljs-string">'éƒ‘å'</span>, <span class="hljs-string">'13200132000'</span>, <span class="hljs-string">'zhengshi@test.com'</span>),
(<span class="hljs-string">'é’±ä¸€'</span>, <span class="hljs-string">'13100131000'</span>, <span class="hljs-string">'qianyi@test.com'</span>),
(<span class="hljs-string">'å†¯äºŒ'</span>, <span class="hljs-string">'1300130000'</span>, <span class="hljs-string">'fenger@test.com'</span>);
</code></pre>
<p>æ‰§è¡Œåè¦æ˜¯æç¤º<code>INSERT 0 10</code>ï¼Œé‚£å°±è¯´æ˜æ•°æ®æ’æˆåŠŸäº†ï¼Œåé¢çš„æµ‹è¯•å°±æœ‰äº†åŸºç¡€ã€‚</p>
<h3 data-id="heading-4">äºŒã€ç´¢å¼•ç®¡ç†ï¼šç»™è¡¨â€œåŠ ç›®å½•â€ï¼ŒåŠ é€ŸæŸ¥è¯¢</h3>
<p>åœ¨KingbaseESé‡Œï¼Œæƒ³è®©æŸ¥è¯¢å˜å¿«ï¼Œç´¢å¼•å¯æ˜¯æ ¸å¿ƒæ‰‹æ®µã€‚ä½ æƒ³å•Šï¼Œè¦æ˜¯è¡¨çš„æ•°æ®é‡å¤§ï¼Œæ¯”å¦‚æœ‰10ä¸‡æ¡ä»¥ä¸Šï¼Œæ²¡ç´¢å¼•çš„è¯ï¼ŒæŸ¥è¯¢å°±å¾—â€œå…¨è¡¨æ‰«æâ€ï¼Œä¸€æ¡ä¸€æ¡æ‰¾ï¼Œå¤šæ…¢å•Šï¼›ä½†æœ‰äº†ç´¢å¼•å°±ä¸ä¸€æ ·äº†ï¼Œç›¸å½“äºæœ‰äº†â€œç›®å½•â€ï¼Œç›´æ¥å®šä½åˆ°æ•°æ®ï¼Œé€Ÿåº¦èƒ½å¿«æˆç™¾ä¸Šåƒå€ã€‚æ¥ä¸‹æ¥å’±å°±æŒ‰â€œåˆ›å»ºâ†’æŸ¥çœ‹â†’ç»´æŠ¤â†’åˆ é™¤â€çš„é¡ºåºå¥½å¥½è¯´è¯´ã€‚</p>
<h4 data-id="heading-5">2.1 å…ˆæ‡‚åŸºç¡€ï¼šç´¢å¼•çš„ç±»å‹ä¸é€‚ç”¨åœºæ™¯</h4>
<p>æ–°æ‰‹æœ‹å‹å¾—å…ˆææ˜ç™½ä¸åŒç´¢å¼•æœ‰å•¥ç”¨ï¼Œå¯åˆ«çåˆ›å»ºã€‚è¦çŸ¥é“ï¼Œç´¢å¼•ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œå¤šäº†åè€Œä¼šå¢åŠ æ•°æ®æ›´æ–°ã€æ’å…¥çš„å¼€é”€ã€‚</p>
<h4 data-id="heading-6">2.2 åˆ›å»ºç´¢å¼•ï¼šç”¨CREATE INDEXè¯­å¥</h4>
<h5 data-id="heading-7">2.2.1 ç¤ºä¾‹1ï¼šåˆ›å»ºæ™®é€šç´¢å¼•ï¼ˆåŠ é€Ÿå•å­—æ®µæŸ¥è¯¢ï¼‰</h5>
<p>è¦æ˜¯ç»å¸¸æŒ‰æ‰‹æœºå·æŸ¥ç”¨æˆ·ï¼Œé‚£ç»™<code>sys_user</code>è¡¨çš„<code>phone</code>åˆ—å»ºä¸ªæ™®é€šç´¢å¼•å°±å¾ˆåˆé€‚ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_phone <span class="hljs-keyword">ON</span> test_schema.sys_user(phone);
</code></pre>
<ul>
<li><strong>ç´¢å¼•åè§„èŒƒ</strong>ï¼šå»ºè®®ç”¨â€œidx_è¡¨å_å­—æ®µåâ€è¿™ç§æ ¼å¼ï¼Œæ¯”å¦‚â€œidx_sys_user_phoneâ€ï¼Œä¸€çœ‹å°±çŸ¥é“æ˜¯â€œsys_userâ€è¡¨é‡Œâ€œphoneâ€åˆ—çš„ç´¢å¼•ï¼Œå¤šå¥½è®¤ã€‚</li>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º<code>CREATE INDEX</code>ï¼Œé‚£å°±è¯´æ˜ç´¢å¼•å»ºå¥½äº†ã€‚</li>
</ul>
<h5 data-id="heading-8">2.2.2 ç¤ºä¾‹2ï¼šåˆ›å»ºå”¯ä¸€ç´¢å¼•ï¼ˆç¡®ä¿å­—æ®µå”¯ä¸€+åŠ é€ŸæŸ¥è¯¢ï¼‰</h5>
<p>ç»™<code>sys_user</code>è¡¨çš„<code>email</code>åˆ—å»ºä¸ªå”¯ä¸€ç´¢å¼•ä¹Ÿä¸é”™ï¼Œæ—¢èƒ½ä¿è¯é‚®ç®±ä¸é‡å¤ï¼ŒæŸ¥é‚®ç®±çš„æ—¶å€™ä¹Ÿèƒ½æ›´å¿«ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE UNIQUE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µå);</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">UNIQUE</span> INDEX idx_sys_user_email <span class="hljs-keyword">ON</span> test_schema.sys_user(email);
</code></pre>
<ul>
<li><strong>ä¸UNIQUEçº¦æŸçš„åŒºåˆ«</strong>ï¼šè¿™é‡Œå¾—æé†’ä¸€å¥ï¼Œå”¯ä¸€ç´¢å¼•åªæ˜¯ä¿è¯å€¼ä¸é‡å¤ï¼Œè€ŒUNIQUEçº¦æŸé‡Œæ—¢åŒ…å«äº†çº¦æŸï¼Œä¹Ÿè‡ªå¸¦äº†å”¯ä¸€ç´¢å¼•ã€‚æ‰€ä»¥è¦æ˜¯è¡¨å·²ç»æœ‰<code>email</code>çš„UNIQUEçº¦æŸï¼Œå°±ä¸ç”¨å†ç‰¹æ„ç»™<code>email</code>å»ºå”¯ä¸€ç´¢å¼•äº†ï¼Œçº¦æŸæœ¬èº«å°±ä¼šç”Ÿæˆç´¢å¼•ã€‚</li>
</ul>
<h5 data-id="heading-9">2.2.3 ç¤ºä¾‹3ï¼šåˆ›å»ºå¤åˆç´¢å¼•ï¼ˆåŠ é€Ÿå¤šå­—æ®µç»„åˆæŸ¥è¯¢ï¼‰</h5>
<p>è¦æ˜¯ç»å¸¸æŒ‰â€œå§“å+åˆ›å»ºæ—¶é—´èŒƒå›´â€æŸ¥æ•°æ®ï¼Œé‚£ç»™<code>sys_user</code>è¡¨çš„<code>name</code>å’Œ<code>create_time</code>åˆ—å»ºä¸ªå¤åˆç´¢å¼•å°±å¾ˆå®ç”¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µ1, å­—æ®µ2);</span>
<span class="hljs-keyword">CREATE</span> INDEX idx_sys_user_name_createtime <span class="hljs-keyword">ON</span> test_schema.sys_user(name, create_time);
</code></pre>
<ul>
<li><strong>å­—æ®µé¡ºåºæ³¨æ„</strong>ï¼šå¤åˆç´¢å¼•æœ‰ä¸ªâ€œæœ€å·¦ç¬¦åˆåŸåˆ™â€ï¼Œæ¯”å¦‚è¿™ä¸ªç´¢å¼•(name, create_time)ï¼Œèƒ½åŠ å¿«nameå•å­—æ®µçš„æŸ¥è¯¢ï¼Œä¹Ÿèƒ½åŠ å¿«name+create_timeç»„åˆçš„æŸ¥è¯¢ï¼Œä½†æ²¡æ³•åŠ å¿«create_timeå•å­—æ®µçš„æŸ¥è¯¢ã€‚æ‰€ä»¥å­—æ®µé¡ºåºå¾—æ ¹æ®å¹³æ—¶çš„æŸ¥è¯¢ä¹ æƒ¯æ¥å®šï¼Œå¯åˆ«æåäº†ã€‚</li>
</ul>
<h4 data-id="heading-10">2.3 æŸ¥çœ‹ç´¢å¼•ï¼šç¡®è®¤ç´¢å¼•å­˜åœ¨ä¸å…³è”è¡¨</h4>
<p>å»ºå®Œç´¢å¼•ï¼Œå¾—ç”¨ksqlå‘½ä»¤çœ‹çœ‹ç´¢å¼•åˆ—è¡¨ã€å…³è”çš„è¡¨è¿˜æœ‰è¯¦ç»†ä¿¡æ¯ï¼Œæ¨èå¤§å®¶ç”¨<code>\di</code>å’Œ<code>\dt+</code>è¿™ä¸¤ä¸ªå‘½ä»¤ï¼Œå¾ˆå¥½ç”¨ã€‚</p>
<h5 data-id="heading-11">2.3.1 ç¤ºä¾‹1ï¼šæŸ¥çœ‹æ‰€æœ‰ç´¢å¼•ï¼ˆ\diå‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ<code>\di</code>å°±èƒ½åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰ç´¢å¼•ï¼Œèƒ½å¿«é€Ÿç¡®è®¤ç´¢å¼•æ˜¯ä¸æ˜¯å»ºæˆåŠŸäº†ã€‚</p>
<pre><code class="hljs language-sql" lang="sql">\di
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹å…³é”®ä¿¡æ¯è§£è¯»</strong>ï¼š</p>
<ul>
<li><code>Table</code>ï¼šèƒ½çœ‹åˆ°ç´¢å¼•å…³è”çš„è¡¨ï¼Œç¡®è®¤æ˜¯ä¸æ˜¯<code>sys_user</code>è¡¨ï¼›</li>
<li><code>Columns</code>ï¼šèƒ½çŸ¥é“ç´¢å¼•å¯¹åº”çš„å­—æ®µï¼Œæ˜¯å•å­—æ®µè¿˜æ˜¯å¤šå­—æ®µï¼›</li>
<li><code>sys_user_pkey</code>ï¼šè¿™ä¸ªæ˜¯ä¸»é”®è‡ªåŠ¨åˆ›å»ºçš„ç´¢å¼•ï¼Œä¸ç”¨å’±ä»¬æ‰‹åŠ¨å»ºã€‚</li>
</ul>
<h5 data-id="heading-12">2.3.2 ç¤ºä¾‹2ï¼šæŸ¥çœ‹è¡¨å…³è”çš„ç´¢å¼•ï¼ˆ\dt+è¡¨åï¼‰</h5>
<p>è¦æ˜¯æƒ³æŸ¥çœ‹æŸå¼ è¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼Œæ¯”å¦‚<code>sys_user</code>è¡¨ï¼Œæ‰§è¡Œ<code>\d+ è¡¨å</code>å°±è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> test_schema.sys_user
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆç´¢å¼•éƒ¨åˆ†ï¼‰</strong>ï¼š
è¿™æ ·èƒ½ç›´æ¥çœ‹åˆ°è¡¨å…³è”çš„æ‰€æœ‰ç´¢å¼•ï¼ŒåŒ…æ‹¬ç´¢å¼•ç±»å‹ï¼ˆæ˜¯PRIMARY KEYã€UNIQUEè¿˜æ˜¯æ™®é€šç´¢å¼•ï¼‰å’Œå¯¹åº”çš„å­—æ®µï¼Œæ¸…æ™°åˆç›´è§‚ï¼Œä¸€çœ¼å°±èƒ½çœ‹æ˜ç™½ã€‚</p>
<h4 data-id="heading-13">2.4 ç´¢å¼•ç»´æŠ¤ï¼šä¼˜åŒ–æ€§èƒ½ä¸è°ƒæ•´ç»“æ„</h4>
<p>ç´¢å¼•ç”¨ä¹…äº†ï¼Œå› ä¸ºæ•°æ®ç»å¸¸è¢«åˆ é™¤ã€æ›´æ–°ï¼Œå¯èƒ½ä¼šå‡ºç°â€œç¢ç‰‡åŒ–â€çš„æƒ…å†µï¼Œå°±æ˜¯ç´¢å¼•æ–‡ä»¶é‡Œæœ‰ä¸å°‘ç©ºç™½ç©ºé—´ï¼Œè¿™æ—¶å€™å°±å¾—é‡å»ºç´¢å¼•æ¥æ”¹å–„ã€‚å¦å¤–ï¼Œè¦æ˜¯æƒ³ç»™ç´¢å¼•é‡å‘½åï¼Œæˆ–è€…åˆ æ‰æ²¡ç”¨çš„ç´¢å¼•ï¼Œä¹Ÿæœ‰å¯¹åº”çš„æ–¹æ³•ã€‚</p>
<h5 data-id="heading-14">2.4.1 ç¤ºä¾‹1ï¼šé‡å»ºç´¢å¼•ï¼ˆè§£å†³ç¢ç‰‡åŒ–ï¼Œæå‡æŸ¥è¯¢é€Ÿåº¦ï¼‰</h5>
<p>è¦æ˜¯æ„Ÿè§‰ç´¢å¼•æŸ¥è¯¢å˜æ…¢äº†ï¼Œé‡å»ºç´¢å¼•å°±èƒ½æ•´ç†ç¢ç‰‡ï¼Œè®©æ€§èƒ½æ¢å¤ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œè¦æ˜¯è¡¨å¾ˆå¤§ï¼Œæœ€å¥½ç¦»çº¿æ‰§è¡Œï¼Œåˆ«å½±å“æ­£å¸¸ä¸šåŠ¡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šREINDEX INDEX ç´¢å¼•å;</span>
REINDEX INDEX idx_sys_user_phone;
<span class="hljs-comment">-- è¿›é˜¶ï¼šé‡å»ºè¡¨çš„æ‰€æœ‰ç´¢å¼•ï¼ˆæ›´é«˜æ•ˆï¼‰</span>
REINDEX <span class="hljs-keyword">TABLE</span> sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º<code>REINDEX</code>ï¼Œå°±è¯´æ˜é‡å»ºå®Œæˆäº†ã€‚</li>
</ul>
<h5 data-id="heading-15">2.4.2 ç¤ºä¾‹2ï¼šé‡å‘½åç´¢å¼•ï¼ˆè§„èŒƒå‘½åï¼‰</h5>
<p>è¦æ˜¯ç´¢å¼•åä¸ç¬¦åˆè§„èŒƒï¼Œæ¯”å¦‚æƒ³æŠŠ<code>idx_sys_user_phone</code>æ”¹æˆ<code>idx_sys_user_mobile</code>ï¼Œç›´æ¥é‡å‘½åå°±è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šALTER INDEX æ—§ç´¢å¼•å RENAME TO æ–°ç´¢å¼•å;</span>
<span class="hljs-keyword">ALTER</span> INDEX idx_sys_user_phone RENAME <span class="hljs-keyword">TO</span> idx_sys_user_mobile;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ<code>\d+ test_schema.sys_user</code>ï¼Œå°±èƒ½çœ‹åˆ°ç´¢å¼•åå·²ç»æ›´æ–°äº†ã€‚</li>
</ul>
<h5 data-id="heading-16">2.4.3 ç¤ºä¾‹3ï¼šåˆ é™¤ç´¢å¼•ï¼ˆæ— ç”¨ç´¢å¼•æ¸…ç†ï¼‰</h5>
<p>è¦æ˜¯æŸä¸ªå­—æ®µæŸ¥è¯¢é¢‘ç‡å˜ä½äº†ï¼Œæˆ–è€…å› ä¸ºç´¢å¼•å¯¼è‡´æ•°æ®æ’å…¥ã€æ›´æ–°å˜æ…¢ï¼Œé‚£å°±å¾—æŠŠæ²¡ç”¨çš„ç´¢å¼•åˆ æ‰ã€‚ä¸è¿‡è¦æ³¨æ„ï¼Œä¸»é”®ç´¢å¼•å’Œè·Ÿå”¯ä¸€çº¦æŸç›¸å…³çš„ç´¢å¼•ä¸èƒ½ç›´æ¥åˆ ï¼Œå¾—å…ˆæŠŠçº¦æŸåˆ æ‰æ‰è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP INDEX IF EXISTS ç´¢å¼•å;</span>
<span class="hljs-keyword">DROP</span> INDEX IF <span class="hljs-keyword">EXISTS</span> idx_sys_user_name_createtime;
</code></pre>
<ul>
<li><code>IF EXISTS</code>ï¼šåŠ è¿™ä¸ªæ˜¯ä¸ºäº†é¿å…ç´¢å¼•ä¸å­˜åœ¨çš„æ—¶å€™æŠ¥é”™ï¼Œåªä¼šæç¤ºä¸ªè­¦å‘Šï¼Œå¾ˆè´´å¿ƒï¼›</li>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ<code>\d+ test_schema.sys_user</code>ï¼Œç¡®è®¤ç´¢å¼•å·²ç»åˆ æ‰äº†å°±è¡Œã€‚</li>
</ul>
<h4 data-id="heading-17">2.5 ç´¢å¼•ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li>åƒä¸‡åˆ«è§‰å¾—ç´¢å¼•è¶Šå¤šè¶Šå¥½ï¼Œç´¢å¼•å¤šäº†ï¼Œæ•°æ®æ’å…¥ã€æ›´æ–°ã€åˆ é™¤çš„æ—¶å€™å¼€é”€éƒ½ä¼šå˜å¤§ã€‚æ¯•ç«Ÿæ•°æ®ä¸€å˜ï¼Œç´¢å¼•ä¹Ÿå¾—è·Ÿç€åŒæ­¥æ›´æ–°ï¼Œå¤šè´¹äº‹å„¿å•Šã€‚æ‰€ä»¥ä¸€å¼ è¡¨çš„ç´¢å¼•æœ€å¥½åˆ«è¶…è¿‡5ä¸ªã€‚</li>
<li>å°è¡¨å°±åˆ«å»ºç´¢å¼•äº†ï¼Œè¦æ˜¯æ•°æ®é‡ä¸åˆ°1ä¸‡æ¡ï¼Œå…¨è¡¨æ‰«ææ¯”ç”¨ç´¢å¼•æŸ¥è¿˜å¿«ã€‚ä½ æƒ³å•Šï¼Œç”¨ç´¢å¼•è¿˜å¾—å…ˆæ‰¾ç´¢å¼•å†æ‰¾æ•°æ®ï¼Œå¤šäº†ä¸€æ¬¡IOæ“ä½œï¼Œåè€Œæ…¢äº†ã€‚</li>
<li>ç»å¸¸æ›´æ–°çš„åˆ—åˆ«å»ºç´¢å¼•ï¼Œæ¯”å¦‚â€œè®¢å•çŠ¶æ€â€è¿™ç§å­—æ®µï¼Œæ¯ç§’éƒ½å¯èƒ½å˜ï¼Œç»™å®ƒå»ºäº†ç´¢å¼•ï¼Œç´¢å¼•å°±å¾—é¢‘ç¹åŒæ­¥æ›´æ–°ï¼Œå¤šå½±å“æ•´ä½“æ€§èƒ½å•Šã€‚</li>
<li>åˆ«å¯¹ç´¢å¼•å­—æ®µç”¨å‡½æ•°ï¼Œæ¯”å¦‚<code>WHERE SUBSTR(phone,1,3) = '138'</code>è¿™ç§å†™æ³•ï¼Œä¼šè®©ç´¢å¼•å¤±æ•ˆã€‚æ”¹æˆ<code>WHERE phone LIKE '138%'</code>å°±å¥½ï¼Œå‰ç¼€åŒ¹é…æ˜¯èƒ½ç”¨åˆ°ç´¢å¼•çš„ã€‚</li>
</ol>
<h3 data-id="heading-18">ä¸‰ã€è§†å›¾ç®¡ç†ï¼šç»™æ•°æ®â€œå¼€çª—å£â€ï¼Œç®€åŒ–æŸ¥è¯¢ä¸æ§åˆ¶æƒé™</h3>
<p>è§†å›¾å…¶å®æ˜¯â€œè™šæ‹Ÿè¡¨â€ï¼Œå®ƒæ˜¯æ ¹æ®SQLæŸ¥è¯¢ç»“æœç”Ÿæˆçš„ï¼Œæœ¬èº«ä¸å­˜å®é™…æ•°æ®ï¼Œæ•°æ®è¿˜åœ¨åŸå§‹è¡¨é‡Œã€‚ä½†å®ƒçš„ç”¨å¤„å¯ä¸å°ï¼Œèƒ½â€œéšè—å¤æ‚æŸ¥è¯¢é€»è¾‘â€ï¼Œè¿˜èƒ½â€œæ§åˆ¶æ•°æ®å¯è§èŒƒå›´â€ï¼Œæ¯”å¦‚åªè®©ç”¨æˆ·çœ‹åˆ°æŸäº›åˆ—ã€‚ä¸‹é¢å’±å°±æŒ‰â€œåˆ›å»º-æŸ¥çœ‹-æ“ä½œ-åˆ é™¤â€çš„é¡ºåºæ¥è®²ã€‚</p>
<h4 data-id="heading-19">3.1 å…ˆæ‡‚åŸºç¡€ï¼šè§†å›¾çš„æ ¸å¿ƒä½œç”¨ï¼ˆæ–°æ‰‹å¿…çŸ¥ï¼‰</h4>
<p>æ–°æ‰‹æœ‹å‹å®¹æ˜“æŠŠâ€œè¡¨â€å’Œâ€œè§†å›¾â€ææ··ï¼Œæˆ‘ç»™å¤§å®¶æ‰“ä¸ªé€šä¿—çš„æ¯”æ–¹ï¼š</p>
<ul>
<li>è¡¨å°±åƒâ€œä»“åº“â€ï¼Œé‡Œé¢å®å®åœ¨åœ¨å­˜ç€æ•°æ®ï¼›</li>
<li>è§†å›¾å‘¢ï¼Œå°±æ˜¯â€œä»“åº“çª—å£â€ï¼Œé€šè¿‡è¿™ä¸ªçª—å£åªèƒ½çœ‹åˆ°æŒ‡å®šåŒºåŸŸçš„è´§ç‰©ï¼ˆæ•°æ®ï¼‰ï¼Œæ•´ä¸ªä»“åº“çš„æƒ…å†µæ˜¯çœ‹ä¸åˆ°çš„ã€‚è€Œä¸”è¿™ä¸ªçª—å£ä¸èƒ½ç›´æ¥æ”¹ï¼Œæƒ³æ”¹ä»“åº“é‡Œçš„æ•°æ®å¾—é€šè¿‡çª—å£ï¼Œä½†è¿˜æœ‰ä¸å°‘é™åˆ¶ã€‚</li>
</ul>
<p>è§†å›¾çš„æ ¸å¿ƒä½¿ç”¨åœºæ™¯æœ‰è¿™å‡ ä¸ªï¼š</p>
<ol>
<li>ç®€åŒ–å¤æ‚æŸ¥è¯¢ï¼Œè¦æ˜¯æœ‰å¾ˆå¤šè¡¨å…³è”æŸ¥è¯¢ï¼ˆJOINï¼‰ï¼Œå¯ä»¥æŠŠå®ƒå°è£…æˆè§†å›¾ï¼Œåé¢æŸ¥æ•°æ®ç›´æ¥ç”¨è§†å›¾å°±è¡Œï¼Œä¸ç”¨å†å†™ä¸€éå¤æ‚çš„SQLï¼Œå¤šçœäº‹å„¿ã€‚</li>
<li>æ§åˆ¶æ•°æ®æƒé™ï¼Œæ¯”å¦‚æƒ³è®©æ™®é€šç”¨æˆ·åªçœ‹åˆ°<code>sys_user</code>è¡¨é‡Œçš„<code>name</code>å’Œ<code>phone</code>å­—æ®µï¼ŒæŠŠ<code>email</code>è¿™ç§æ•æ„Ÿä¿¡æ¯è—èµ·æ¥ï¼Œç”¨è§†å›¾å°±èƒ½åšåˆ°ã€‚</li>
<li>ä¿è¯æ•°æ®ä¸€è‡´æ€§ï¼Œè¦æ˜¯å¤šä¸ªç³»ç»Ÿéƒ½ç”¨åŒä¸€ä¸ªæŸ¥è¯¢é€»è¾‘ï¼Œç”¨è§†å›¾å°±èƒ½ç¡®ä¿æ‰€æœ‰ç³»ç»Ÿéƒ½ç”¨ä¸€æ ·çš„ç­›é€‰æ¡ä»¶ï¼Œä¸ä¼šå‡ºä¹±å­ã€‚</li>
</ol>
<h4 data-id="heading-20">3.2 åˆ›å»ºè§†å›¾ï¼šç”¨CREATE VIEWè¯­å¥</h4>
<h5 data-id="heading-21">3.2.1 ç¤ºä¾‹1ï¼šåŸºç¡€è§†å›¾ï¼ˆç®€åŒ–å•è¡¨æŸ¥è¯¢ï¼‰</h5>
<p>å’±åˆ›å»ºä¸€ä¸ªâ€œç”¨æˆ·åŸºç¡€ä¿¡æ¯è§†å›¾<code>vw_sys_user_basic</code>â€ï¼Œé‡Œé¢åªåŒ…å«<code>id</code>ã€<code>name</code>ã€<code>phone</code>åˆ—ï¼ŒæŠŠ<code>email</code>è¿™ç§æ•æ„Ÿä¿¡æ¯è—èµ·æ¥ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šCREATE VIEW è§†å›¾å AS SELECT è¯­å¥;</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_basic <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> id, name, phone 
<span class="hljs-keyword">FROM</span> test_schema.sys_user;
</code></pre>
<ul>
<li><strong>æˆåŠŸéªŒè¯</strong>ï¼šæ‰§è¡Œåæç¤º<code>CREATE VIEW</code>ï¼Œå°±è¯´æ˜è§†å›¾å»ºå¥½äº†ã€‚</li>
</ul>
<h5 data-id="heading-22">3.2.2 ç¤ºä¾‹2ï¼šè¿›é˜¶è§†å›¾ï¼ˆå¸¦ç­›é€‰æ¡ä»¶çš„å¤æ‚æŸ¥è¯¢ï¼‰</h5>
<p>å†åˆ›å»ºä¸€ä¸ªâ€œ2024å¹´åˆ›å»ºçš„ç”¨æˆ·è§†å›¾<code>vw_sys_user_2024</code>â€ï¼Œç­›é€‰å‡º<code>create_time</code>åœ¨2024å¹´çš„ç”¨æˆ·ï¼Œé‡Œé¢åŒ…å«<code>name</code>ã€<code>email</code>ã€<code>create_time</code>åˆ—ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2024-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<ul>
<li><strong>åŠ¨æ€æ€§</strong>ï¼šè¿™é‡Œå¾—è¯´ä¸€ä¸‹ï¼Œè§†å›¾é‡Œçš„æ•°æ®ä¼šè·Ÿç€åŸè¡¨è‡ªåŠ¨å˜ã€‚æ¯”å¦‚åŸè¡¨æ–°å¢äº†ä¸€ä¸ª2024å¹´åˆ›å»ºçš„ç”¨æˆ·ï¼Œè§†å›¾é‡Œä¹Ÿä¼šè‡ªåŠ¨åŒ…å«è¿™æ¡æ•°æ®ï¼Œä¸ç”¨æ‰‹åŠ¨æ›´æ–°ã€‚</li>
</ul>
<h5 data-id="heading-23">3.2.3 ç¤ºä¾‹3ï¼šåªè¯»è§†å›¾ï¼ˆç¦æ­¢ä¿®æ”¹æ•°æ®ï¼‰</h5>
<p>è¦æ˜¯æƒ³ç¡®ä¿è§†å›¾é‡Œçš„æ•°æ®ä¸èƒ½è¢«æ”¹ï¼Œæ¯”å¦‚æŠ¥è¡¨è§†å›¾ï¼Œé‚£å°±åŠ ä¸ª<code>WITH READ ONLY</code>é€‰é¡¹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WITH</span> READ <span class="hljs-keyword">ONLY</span>;
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šåé¢è¦æ˜¯æƒ³é€šè¿‡è¿™ä¸ªè§†å›¾æ”¹æ•°æ®ï¼Œæ¯”å¦‚æ‰§è¡Œ<code>UPDATE vw_sys_user_report SET name='å¼ ä¸‰'</code>ï¼Œå°±ä¼šæŠ¥é”™â€œcannot update a read-only viewâ€ï¼Œæ ¹æœ¬æ”¹ä¸äº†ã€‚</li>
</ul>
<h4 data-id="heading-24">3.3 æŸ¥çœ‹è§†å›¾ï¼šç¡®è®¤è§†å›¾å®šä¹‰ä¸å…³è”è¡¨</h4>
<p>å»ºå®Œè§†å›¾ï¼Œå¾—ç”¨ksqlå‘½ä»¤çœ‹çœ‹è§†å›¾åˆ—è¡¨ã€å®šä¹‰è¿˜æœ‰å…³è”çš„è¡¨ï¼Œæ¨èç”¨<code>\dv</code>å’Œ<code>\d+</code>è¿™ä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<h5 data-id="heading-25">3.3.1 ç¤ºä¾‹1ï¼šæŸ¥çœ‹æ‰€æœ‰è§†å›¾ï¼ˆ\dvå‘½ä»¤ï¼‰</h5>
<p>æ‰§è¡Œ<code>\dv</code>å°±èƒ½åˆ—å‡ºå½“å‰æ¨¡å¼ä¸‹çš„æ‰€æœ‰è§†å›¾ï¼Œèƒ½å¿«é€Ÿç¡®è®¤è§†å›¾æ˜¯ä¸æ˜¯å»ºæˆåŠŸäº†ã€‚</p>
<h5 data-id="heading-26">3.3.2 ç¤ºä¾‹2ï¼šæŸ¥çœ‹è§†å›¾å®šä¹‰ï¼ˆ\d+è§†å›¾åï¼‰</h5>
<p>è¦æ˜¯å¿˜äº†è§†å›¾çš„ç­›é€‰æ¡ä»¶ï¼Œæƒ³ç¡®è®¤ä¸€ä¸‹è§†å›¾çš„åº•å±‚SQLï¼Œæ‰§è¡Œ<code>\d+ è§†å›¾å</code>å°±è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql">\d<span class="hljs-operator">+</span> vw_sys_user_2024
</code></pre>
<p><strong>æ‰§è¡Œç»“æœç¤ºä¾‹ï¼ˆå®šä¹‰éƒ¨åˆ†ï¼‰</strong>ï¼š
è¿™æ ·èƒ½ç›´æ¥çœ‹åˆ°è§†å›¾å®Œæ•´çš„SQLå®šä¹‰ï¼Œåé¢æƒ³ä¿®æ”¹æˆ–è€…éªŒè¯é€»è¾‘éƒ½å¾ˆæ–¹ä¾¿ã€‚</p>
<h4 data-id="heading-27">3.4 è§†å›¾æ“ä½œï¼šæŸ¥è¯¢ã€ä¿®æ”¹ä¸åˆ é™¤</h4>
<p>è§†å›¾æœ€ä¸»è¦çš„æ“ä½œæ˜¯â€œæŸ¥è¯¢â€ï¼Œä¿®æ”¹å’Œåˆ é™¤éƒ½æœ‰ç‰¹å®šçš„è§„åˆ™ï¼Œå¯ä¸èƒ½éšä¾¿æ¥ã€‚</p>
<h5 data-id="heading-28">3.4.1 ç¤ºä¾‹1ï¼šæŸ¥è¯¢è§†å›¾æ•°æ®ï¼ˆä¸è¡¨æŸ¥è¯¢ä¸€è‡´ï¼‰</h5>
<p>æŸ¥è¯¢è§†å›¾æ•°æ®çš„è¯­æ³•å’ŒæŸ¥è¡¨ä¸€æ¨¡ä¸€æ ·ï¼Œä¸ç”¨é¢å¤–å­¦æ–°ä¸œè¥¿ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- æŸ¥è¯¢åŸºç¡€è§†å›¾æ•°æ®</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_basic;
<span class="hljs-comment">-- æŸ¥è¯¢2024å¹´ç”¨æˆ·è§†å›¾ï¼ŒæŒ‰åˆ›å»ºæ—¶é—´æ’åº</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> vw_sys_user_2024 <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>;
</code></pre>
<ul>
<li><strong>æ•ˆæœ</strong>ï¼šè¿”å›çš„ç»“æœå’ŒæŸ¥åŸè¡¨ç­›é€‰åçš„æ•°æ®ä¸€æ ·ï¼Œä½†çœ‹ä¸åˆ°é‚£äº›è¢«éšè—çš„åˆ—ï¼Œæ¯”å¦‚åœ¨<code>vw_sys_user_basic</code>é‡Œå°±çœ‹ä¸åˆ°<code>email</code>åˆ—ã€‚</li>
</ul>
<h5 data-id="heading-29">3.4.2 ç¤ºä¾‹2ï¼šä¿®æ”¹è§†å›¾å®šä¹‰ï¼ˆCREATE OR REPLACEï¼‰</h5>
<p>è¦æ˜¯æƒ³è°ƒæ•´è§†å›¾çš„ç­›é€‰æ¡ä»¶æˆ–è€…åŒ…å«çš„åˆ—ï¼Œæ¯”å¦‚æŠŠ<code>vw_sys_user_2024</code>æ”¹æˆåŒ…å«2023å¹´çš„æ•°æ®ï¼Œä¸ç”¨åˆ äº†è§†å›¾é‡æ–°å»ºï¼Œç›´æ¥ç”¨<code>CREATE OR REPLACE</code>ä¿®æ”¹å°±è¡Œã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_2024 <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, email, create_time 
<span class="hljs-keyword">FROM</span> test_schema.sys_user 
<span class="hljs-keyword">WHERE</span> create_time <span class="hljs-operator">&gt;=</span> <span class="hljs-string">'2023-01-01 00:00:00'</span> 
  <span class="hljs-keyword">AND</span> create_time <span class="hljs-operator">&lt;</span> <span class="hljs-string">'2025-01-01 00:00:00'</span>;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ<code>\d+ vw_sys_user_2024</code>ï¼Œç¡®è®¤è§†å›¾å®šä¹‰å·²ç»æ›´æ–°äº†å°±è¡Œã€‚</li>
</ul>
<h5 data-id="heading-30">3.4.3 ç¤ºä¾‹3ï¼šåˆ é™¤è§†å›¾ï¼ˆDROP VIEWï¼‰</h5>
<p>è¦æ˜¯æŸä¸ªè§†å›¾ä¸ç”¨äº†ï¼Œå°±æŠŠå®ƒåˆ æ‰ã€‚æ”¾å¿ƒï¼Œ<strong>åˆ é™¤è§†å›¾ä¸ä¼šå½±å“åŸè¡¨æ•°æ®</strong>ï¼Œåªæ˜¯æŠŠè§†å›¾çš„å®šä¹‰åˆ æ‰äº†ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- è¯­æ³•ï¼šDROP VIEW IF EXISTS è§†å›¾å;</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> IF <span class="hljs-keyword">EXISTS</span> vw_sys_user_report;
</code></pre>
<ul>
<li><strong>éªŒè¯</strong>ï¼šæ‰§è¡Œ<code>\dv</code>ï¼Œç¡®è®¤è§†å›¾å·²ç»åˆ æ‰äº†å°±å¯ä»¥ã€‚</li>
</ul>
<h4 data-id="heading-31">3.5 è§†å›¾ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼ˆæ–°æ‰‹é¿å‘æŒ‡å—ï¼‰</h4>
<ol>
<li>è§†å›¾ä¿®æ”¹æœ‰ä¸å°‘é™åˆ¶ï¼Œå°±ç®—æ²¡åŠ <code>READ ONLY</code>ï¼Œåªè¦æœ‰ä¸‹é¢è¿™äº›æƒ…å†µï¼Œä¹Ÿæ²¡æ³•æ”¹æ•°æ®ï¼š
<ul>
<li>è§†å›¾é‡ŒåŒ…å«<code>DISTINCT</code>ï¼ˆå»é‡ï¼‰ã€<code>GROUP BY</code>ï¼ˆåˆ†ç»„ï¼‰ã€<code>HAVING</code>ï¼ˆç­›é€‰åˆ†ç»„ï¼‰ï¼›</li>
<li>è§†å›¾é‡Œæœ‰èšåˆå‡½æ•°ï¼Œæ¯”å¦‚<code>COUNT</code>ã€<code>SUM</code>ï¼›</li>
<li>è§†å›¾æ˜¯ä»å¤šä¸ªè¡¨å…³è”ï¼ˆ<code>JOIN</code>ï¼‰æ¥çš„ï¼›</li>
</ul>
</li>
<li>è¦æ˜¯åŸè¡¨è¢«åˆ äº†ï¼Œæ¯”å¦‚<code>sys_user</code>è¡¨æ²¡äº†ï¼Œé‚£å¯¹åº”çš„è§†å›¾å°±æˆäº†â€œæ— æ•ˆè§†å›¾â€ï¼Œå†æŸ¥è¿™ä¸ªè§†å›¾å°±ä¼šæŠ¥é”™â€œrelation does not existâ€ã€‚</li>
<li>æ€§èƒ½æ–¹é¢ä¹Ÿå¾—æ³¨æ„ï¼Œè¦æ˜¯è§†å›¾å¾ˆå¤æ‚ï¼ŒåŒ…å«å¤šè¡¨å…³è”æˆ–è€…èšåˆæ“ä½œï¼Œå®ƒçš„æŸ¥è¯¢æ•ˆç‡å°±çœ‹åŸè¡¨æœ‰æ²¡æœ‰ç´¢å¼•ã€‚æ‰€ä»¥åŸè¡¨é‡Œé‚£äº›ç›¸å…³çš„å­—æ®µï¼Œæ¯”å¦‚å¤šè¡¨<code>JOIN</code>æ—¶ç”¨åˆ°çš„å…³è”åˆ—ï¼Œä¸€å®šè¦æå‰å»ºå¥½ç´¢å¼•ã€‚</li>
</ol>
<h3 data-id="heading-32">å››ã€å¸¸è§é—®é¢˜æ’æŸ¥ï¼šç´¢å¼•ä¸è§†å›¾çš„é«˜é¢‘æŠ¥é”™</h3>
<h4 data-id="heading-33">é—®é¢˜1ï¼šåˆ›å»ºç´¢å¼•æŠ¥é”™â€œé‡å¤çš„é”®åâ€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  duplicate key name "idx_sys_user_phone"
</code></pre>
<p><strong>åŸå› </strong>ï¼šè¿™æ˜æ˜¾æ˜¯åŒåçš„ç´¢å¼•å·²ç»å­˜åœ¨äº†ï¼Œæ¯”å¦‚ä¹‹å‰å·²ç»åˆ›å»ºè¿‡<code>idx_sys_user_phone</code>ã€‚
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>å…ˆæ‰§è¡Œ<code>\di</code>çœ‹çœ‹ç´¢å¼•åï¼Œç¡®è®¤æ˜¯ä¸æ˜¯çœŸçš„é‡å¤äº†ï¼›</li>
<li>è¦æ˜¯æƒ³é‡æ–°å»ºè¿™ä¸ªç´¢å¼•ï¼Œå…ˆæŠŠæ—§çš„åˆ æ‰ï¼Œæ‰§è¡Œ<code>DROP INDEX idx_sys_user_phone;</code>ï¼Œç„¶åå†å»ºæ–°çš„ã€‚</li>
</ul>
<h4 data-id="heading-34">é—®é¢˜2ï¼šæŸ¥è¯¢è§†å›¾æŠ¥é”™â€œå…³ç³»å¯¹è±¡ä¸å­˜åœ¨â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  relation "vw_sys_user_basic" does not exist
</code></pre>
<p><strong>åŸå› </strong>ï¼š</p>
<ol>
<li>è¦ä¹ˆæ˜¯è§†å›¾åæ‹¼é”™äº†ï¼Œæ¯”å¦‚æŠŠ<code>vw_sys_user_basic</code>å†™æˆäº†<code>vw_sys_user_basci</code>ï¼›</li>
<li>è¦ä¹ˆæ˜¯è§†å›¾æ‰€åœ¨çš„æ¨¡å¼ä¸åœ¨æœç´¢è·¯å¾„é‡Œï¼Œæ¯”å¦‚è§†å›¾åœ¨<code>test_schema</code>æ¨¡å¼ä¸‹ï¼Œä½†å½“å‰çš„æœç´¢è·¯å¾„æ˜¯<code>public</code>ã€‚
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</li>
</ol>
<ul>
<li>å…ˆæ£€æŸ¥è§†å›¾åæ‹¼å†™å¯¹ä¸å¯¹ï¼Œæ‰§è¡Œ<code>\dv</code>ç¡®è®¤ä¸€ä¸‹æ­£ç¡®çš„åç§°ï¼›</li>
<li>è¦ä¹ˆåˆ‡æ¢åˆ°è§†å›¾æ‰€åœ¨çš„æ¨¡å¼ï¼Œæ‰§è¡Œ<code>SET search_path TO test_schema, public;</code>ï¼›è¦ä¹ˆæŸ¥è¯¢çš„æ—¶å€™ç”¨â€œæ¨¡å¼å.è§†å›¾åâ€çš„å…¨ç§°ï¼Œæ¯”å¦‚<code>SELECT * FROM test_schema.vw_sys_user_basic;</code>ã€‚</li>
</ul>
<h4 data-id="heading-35">é—®é¢˜3ï¼šé€šè¿‡è§†å›¾ä¿®æ”¹æ•°æ®æŠ¥é”™â€œæ— æ³•æ›´æ–°åªè¯»è§†å›¾â€</h4>
<p><strong>æŠ¥é”™ä¿¡æ¯</strong>ï¼š</p>
<pre><code class="hljs language-plaintext" lang="plaintext">ERROR:  cannot update a read-only view "vw_sys_user_report"
</code></pre>
<p><strong>åŸå› </strong>ï¼šè¿™æ˜¯å› ä¸ºåˆ›å»ºè§†å›¾çš„æ—¶å€™åŠ äº†<code>WITH READ ONLY</code>é€‰é¡¹ï¼Œå°±æ˜¯ç¦æ­¢ä¿®æ”¹çš„ã€‚
<strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>
<p>è¦æ˜¯æƒ³å…è®¸ä¿®æ”¹ï¼Œå°±é‡æ–°åˆ›å»ºè§†å›¾ï¼ŒæŠŠ<code>WITH READ ONLY</code>å»æ‰ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">OR</span> REPLACE <span class="hljs-keyword">VIEW</span> vw_sys_user_report <span class="hljs-keyword">AS</span>
<span class="hljs-keyword">SELECT</span> name, phone, create_time <span class="hljs-keyword">FROM</span> sys_user;
</code></pre>
</li>
<li>
<p>ä¸è¿‡è¦æ³¨æ„ï¼Œé‡æ–°åˆ›å»ºä¹‹å‰å¾—ç¡®è®¤è¿™ä¸ªè§†å›¾æ²¡æœ‰å…¶ä»–ä¿®æ”¹é™åˆ¶ï¼Œæ¯”å¦‚ä¸å«<code>GROUP BY</code>ã€èšåˆå‡½æ•°è¿™äº›ã€‚</p>
</li>
</ul>
<h3 data-id="heading-36">äº”ã€æ€»ç»“ï¼šç´¢å¼•ä¸è§†å›¾çš„é…åˆä½¿ç”¨</h3>
<p>ä»Šå¤©æŠŠç´¢å¼•å’Œè§†å›¾çš„æ ¸å¿ƒæ“ä½œéƒ½è®²é€äº†ï¼Œæ ¸å¿ƒè¦ç‚¹æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ol>
<li><strong>ç´¢å¼•</strong>ï¼šä¸»è¦ç®¡â€œæŸ¥è¯¢é€Ÿåº¦â€ï¼Œå¾—æ ¹æ®æŸ¥è¯¢åœºæ™¯é€‰æ™®é€šã€å”¯ä¸€è¿˜æ˜¯å¤åˆç´¢å¼•ï¼Œåˆ«å»ºå¤ªå¤šï¼Œè¿˜å¾—å®šæ—¶é‡å»ºä¼˜åŒ–æ€§èƒ½ï¼›</li>
<li><strong>è§†å›¾</strong>ï¼šä¸»è¦ç®¡â€œæŸ¥è¯¢ç®€åŒ–å’Œæƒé™æ§åˆ¶â€ï¼Œèƒ½æŠŠå¤æ‚é€»è¾‘å°è£…èµ·æ¥ï¼Œéšè—æ•æ„Ÿæ•°æ®ï¼Œä½†è¦æ³¨æ„ä¿®æ”¹é™åˆ¶å’Œå¯¹åŸè¡¨çš„ä¾èµ–ï¼›</li>
<li><strong>é…åˆä½¿ç”¨</strong>ï¼šè§†å›¾çš„æŸ¥è¯¢é€Ÿåº¦å’ŒåŸè¡¨çš„ç´¢å¼•æœ‰å…³ç³»ï¼Œæ¯”å¦‚ç»™<code>vw_sys_user_2024</code>è§†å›¾å¯¹åº”çš„<code>sys_user</code>åŸè¡¨å»ºä¸ª<code>create_time</code>ç´¢å¼•ï¼Œè§†å›¾çš„æŸ¥è¯¢æ•ˆç‡èƒ½æå‡ä¸å°‘ã€‚</li>
</ol>
<p>å­¦ä¼šäº†ç´¢å¼•å’Œè§†å›¾ï¼Œä½ åœ¨KingbaseESé‡ŒæŸ¥æ•°æ®å°±èƒ½åˆå¿«åˆæ–¹ä¾¿äº†ã€‚ä¸‹ä¸€ç¯‡å’±å°±è®²â€œç”¨æˆ·ä¸æƒé™ç®¡ç†â€ï¼Œè®©æ•°æ®åº“è®¿é—®æ›´å®‰å…¨ï¼Œå®ç°â€œä¸åŒç”¨æˆ·çœ‹ä¸åŒæ•°æ®â€çš„ç²¾ç»†æ§åˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¦‚ä½•è‡ªå®šä¹‰ Pipeï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602259669707358234</link>    <guid>https://juejin.cn/post/7602259669707358234</guid>    <pubDate>2026-02-03T02:42:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669707358234" data-draft-id="7599917711794012170" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¦‚ä½•è‡ªå®šä¹‰ Pipeï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,NestJS,Node.js"/> <meta itemprop="datePublished" content="2026-02-03T02:42:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä»˜è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/1741228277763278"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¦‚ä½•è‡ªå®šä¹‰ Pipeï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1741228277763278/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä»˜è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:42:46.000Z" title="Tue Feb 03 2026 02:42:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Pipe æ˜¯åœ¨å‚æ•°ä¼ ç»™ Controller ä¹‹å‰åšä¸€äº›éªŒè¯å’Œè½¬æ¢çš„ï¼Œæœ‰ å¤šä¸ªå†…ç½®çš„ Pipe å¯ä»¥ç›´æ¥ç”¨</p>
<p>Nest ä¸€æ¬¡è¯·æ±‚çš„é¡ºåºæ˜¯ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">Middleware
  â†“
Guard
  â†“
Interceptor (before)
  â†“
Pipe   âœ…ï¼ˆå°±åœ¨è¿™é‡Œï¼‰
  â†“
Controller handler
  â†“
Interceptor (after)
  â†“
ExceptionFilter
</code></pre>
<p>ğŸ‘‰ <strong>Pipe å‘ç”Ÿåœ¨ handler çœŸæ­£è¢«è°ƒç”¨ä¹‹å‰ï¼Œè€Œä¸”æ˜¯â€œå‚æ•°çº§åˆ«â€æ‰§è¡Œ</strong></p>
<h2 data-id="heading-0">Pipe çš„æ¥å£å®šä¹‰</h2>
<pre><code class="hljs language-r" lang="r">export interface PipeTransform<span class="hljs-operator">&lt;</span><span class="hljs-built_in">T</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">any</span><span class="hljs-punctuation">,</span> R <span class="hljs-operator">=</span> <span class="hljs-built_in">any</span><span class="hljs-operator">&gt;</span> <span class="hljs-punctuation">{</span>
  transform<span class="hljs-punctuation">(</span>value<span class="hljs-operator">:</span> <span class="hljs-built_in">T</span><span class="hljs-punctuation">,</span> metadata<span class="hljs-operator">:</span> ArgumentMetadata<span class="hljs-punctuation">)</span><span class="hljs-operator">:</span> R;
<span class="hljs-punctuation">}</span>
</code></pre>
<p><code>ArgumentMetadata</code> æ˜¯å…³é”®ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ArgumentMetadata</span> {
  <span class="hljs-attr">type</span>: <span class="hljs-string">'body'</span> | <span class="hljs-string">'query'</span> | <span class="hljs-string">'param'</span> | <span class="hljs-string">'custom'</span>;
  metatype?: <span class="hljs-title class_">Type</span>&lt;<span class="hljs-built_in">any</span>&gt;;
  data?: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒPipe èƒ½çŸ¥é“ï¼š</p>
<ul>
<li>è¿™ä¸ªå‚æ•°æ¥è‡ªå“ªé‡Œï¼ˆbody / query / paramï¼‰</li>
<li>DTO æ˜¯ä»€ä¹ˆ class</li>
<li>è£…é¥°å™¨é‡Œå†™çš„æ˜¯ <code>@Body('id')</code> è¿˜æ˜¯æ•´ä¸ª body</li>
</ul>
<p>å†…ç½®çš„ Pipe æœ‰è¿™äº›ï¼š</p>
<ul>
<li>ValidationPipe</li>
<li>ParseIntPipe</li>
<li>ParseBoolPipe</li>
<li>ParseArrayPipe</li>
<li>ParseUUIDPipe</li>
<li>DefaultValuePipe</li>
<li>ParseEnumPipe</li>
<li>ParseFloatPipe</li>
<li>ParseFilePipe</li>
</ul>
<p>çœ‹ä¸€ä¸‹ä½¿ç”¨</p>
<pre><code class="hljs language-sql" lang="sql">nest <span class="hljs-keyword">new</span> pipe<span class="hljs-operator">-</span><span class="hljs-keyword">inner</span> <span class="hljs-operator">-</span>p npm
</code></pre>
<p>ParseIntPipe</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65cb8d85ae4446358d46a1627722c3f0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=NR%2F2YFkHLr8K5ZaXJsvK63bYsXE%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœå¯ä»¥è½¬æ­£å¸¸å±•ç¤º</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b50fcc495bde42bf90d1750aa20b8b3b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=Lac9Ai%2FR2pECjm1qr89nDjeR7Vw%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœä¸å¯ä»¥è½¬ æŠ¥é”™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ca7927ce7f444f729bfdb7585942dd07~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=ImH1ukExtVLd%2BUgCauHk%2F45ZUgo%3D" alt="image.png" loading="lazy"/></p>
<p>çŠ¶æ€ç å’Œä¿¡æ¯ä¹Ÿå¯ä»¥æ”¹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ba13e1fe6750492cb595f0b8862199b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=KrQGZuBs4ZMJ%2F%2BtpkFNpXePG6%2FE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cfbf0abd48e0421fa818187c061bc4ba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=8PL5qxrcNp4ppKO7BfgaF67BPt4%3D" alt="image.png" loading="lazy"/></p>
<p>å¯ä»¥è‡ªå·±æŠ›ä¸€ä¸ªå¼‚å¸¸å‡ºæ¥ï¼Œç„¶åè®© exception filter å¤„ç†</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7750fc6740f44e61974fc0aa43d000bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=K9khwHum0NTY4DVTWAW%2FPq3H7Eg%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f46c012f181f488eb9ecb38bb9cb4ec5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=y8yimWfYOFix3ikcrw0dHUN6xLs%3D" alt="image.png" loading="lazy"/></p>
<p>ParseFloatPipe æ˜¯æŠŠå‚æ•°è½¬æ¢ä¸º float ç±»å‹</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ca7c655bc624e4b9876abf97880c838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=04Xwac2e%2FeTARc%2FcbeAVUVEIETE%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/84e2ff5a29974aba8a296369122fa25c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=O4DbH0GyVvNyvlmBLSM8hcVR7go%3D" alt="image.png" loading="lazy"/></p>
<p>ä¹Ÿå¯ä»¥ new ParseFloatPipe çš„å½¢å¼ï¼Œä¼ å…¥ errorHttpStatusCode å’Œ exceptionFactory</p>
<p>ParseBoolPipe</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6f6812aaab9451c9bec3f72fa31b942~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=Cx0cOMr%2FkaSmJyAefAKrVKj4bPk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0f6d6d3799d44608e44af1f74fa7655~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=Q%2FweJ0swMPgSjKZsihfY5qGjRAA%3D" alt="image.png" loading="lazy"/></p>
<p>ParseArrayPipe</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d809d6527e1b413ebc5e9d28df11f09c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=PG2V%2B2e7IE20sSsdHkFvzM8VC10%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€è¦å®‰è£…</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/245f6867406a4b68ac05e14806a78d9d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=DLeoP6sVv0dul8oO2Co1DbYCqrA%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-arduino" lang="arduino">npm install -D <span class="hljs-keyword">class</span>-validator <span class="hljs-keyword">class</span>-transformer
</code></pre>
<p>æ²¡æœ‰è½¬ä¸ºæ•°å­—</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8dfdc00592ba452bbac7080833599310~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=wbywhvmWVhliMwlNlC%2BsA%2FvfPmI%3D" alt="image.png" loading="lazy"/></p>
<p>æŒ‡å®š item çš„ç±»å‹</p>
<p>è¿™æ ·å°±æŠŠæ•°ç»„æ¯ä¸€é¡¹å¤„ç†ä¸º number</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8c6dfa16440546a2aef21d0011e4d8e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=DE1aEz%2BDTkjrY%2F%2FQ2z%2Bn%2B1eq9i0%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0da3387d863645db8ba7d2c6cabf4c79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=tP7Kc0Eo9hkM97FIbnPbfURPU0A%3D" alt="image.png" loading="lazy"/></p>
<p>ParseEnumPipe</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/194ba572039543c09d487648d1c17bb2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=7YI2j2MwsPrWPdVCikKJWkDKKvs%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b0769c791e44936b42b066483586d55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=AaXLna%2BoK1vbjoXjpuO3rzWG1yI%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6700ea7e96a485a907de3745edea495~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=%2FC%2BBHVOExyDckceAsytI0d3Fuqk%3D" alt="image.png" loading="lazy"/></p>
<p>å‚æ•°ä¸æ˜¯æšä¸¾å€¼å†…</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1c0964f7bdb440a997111abde1c9f590~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=%2FlvSofEbulE9mMQcTdEjP3l1E9M%3D" alt="image.png" loading="lazy"/></p>
<p>ParseUUIDPipe</p>
<p>UID æ˜¯ä¸€ç§éšæœºç”Ÿæˆçš„å‡ ä¹ä¸å¯èƒ½é‡å¤çš„å­—ç¬¦ä¸²ï¼Œåš id</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd347332075e4a84882266650fb05149~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=FN3C1fSAqbEHlhaBu59jxHf1Tys%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77e075322bed4b13af551a9c9a824635~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=kNcOd758dobyjncRGCrpy%2FH%2BK3g%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce79004c1b11486aaaba2316f5daaec8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=CMAV81o6xz6aGmGWf1ltVQVHcns%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe3067b71349439c86d2c98127a707b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=FytHVEwIiGVUhh7ggXRci6fQ2S0%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸æ˜¯ uuid ä¼šæŠ¥é”™</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be2caca925514f238544b308c29eef39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=rkXPFVbT0wAltwRm5WdKQEmc0J0%3D" alt="image.png" loading="lazy"/></p>
<p>DefaultValuePipe è®¾ç½®é»˜è®¤å€¼</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85b39c793849405b84c18a6d80cd86f4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=HQ3PZ9VRo8OlSMHj%2BTrXYBAaAf8%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97d28c91b9b243cfb514b1243d269bbe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=lmHew2u8AuyJ9p9tFOGUnHcS53w%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-1">å®ç°ä¸ª Pipe</h2>
<p>è‡ªå·±å†™ä¸€ä¸ª pipe ä¹Ÿå¾ˆç®€å•ï¼Œå®ç° PipeTransform æ¥å£çš„ transform æ–¹æ³•ï¼Œè¿”å›å€¼å°±æ˜¯ä¼ ç»™ handler çš„å€¼</p>
<pre><code class="hljs language-css" lang="css">nest g pipe aaa <span class="hljs-attr">--flat</span> <span class="hljs-attr">--no-spec</span>
</code></pre>
<p>ç”Ÿæˆä¸€ä¸ª pipeï¼Œæ‰“å°ä¸‹å‚æ•°å€¼ï¼Œè¿”å› aaa</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31fd56d1104340be8180888a1679d598~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=NTBPoEkh%2FmrGNqlF3dPhbMuwqtw%3D" alt="image.png" loading="lazy"/></p>
<p>ä½¿ç”¨</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/76cbe20df92f4e45a8e9ca4fdacba949~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=bJdJ4Nl02vEaCeoGxDDQ%2F7aNzLM%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f9fe0edd188473991d4f42d5cc22565~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=5HTdu2uBxViYdwOJaxcw%2FALSF3w%3D" alt="image.png" loading="lazy"/></p>
<p>è¿”å›çš„å€¼æ˜¯ aaaaaaï¼Œä¹Ÿå°±æ˜¯è¯´ pipe çš„è¿”å›å€¼å°±æ˜¯ä¼ ç»™ handler çš„å‚æ•°å€¼ã€‚</p>
<p>æ‰“å°çš„ value å°±æ˜¯ queryã€param çš„å€¼ï¼Œè€Œ metadata é‡ŒåŒ…å« typeã€metatypeã€data</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/036a95f40e0c43c58162810e3998c6a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LuY6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691366&amp;x-signature=UecdIPPq9hR5Iyk7glen%2BOWPNPA%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ä»£ç å®‰å…¨ - ä½ çš„ä»£ç çœŸçš„å®‰å…¨å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602135278665252916</link>    <guid>https://juejin.cn/post/7602135278665252916</guid>    <pubDate>2026-02-03T02:45:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602135278665252916" data-draft-id="7602161364892090368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ä»£ç å®‰å…¨ - ä½ çš„ä»£ç çœŸçš„å®‰å…¨å—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,å®‰å…¨"/> <meta itemprop="datePublished" content="2026-02-03T02:45:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¢…å·_é…·å­"/> <meta itemprop="url" content="https://juejin.cn/user/1488075996274921"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ä»£ç å®‰å…¨ - ä½ çš„ä»£ç çœŸçš„å®‰å…¨å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1488075996274921/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¢…å·_é…·å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:45:41.000Z" title="Tue Feb 03 2026 02:45:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="agate">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#333;color:#fff}.hljs-name,.hljs-strong{font-weight:700}.hljs-code,.hljs-emphasis{font-style:italic}.hljs-tag{color:#62c8f3}.hljs-selector-class,.hljs-selector-id,.hljs-template-variable,.hljs-variable{color:#ade5fc}.hljs-bullet,.hljs-string{color:#a2fca2}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-quote,.hljs-section,.hljs-title,.hljs-type{color:#ffa}.hljs-bullet,.hljs-number,.hljs-symbol{color:#d36363}.hljs-keyword,.hljs-literal,.hljs-selector-tag{color:#fcc28c}.hljs-code,.hljs-comment,.hljs-deletion{color:#888}.hljs-link,.hljs-regexp{color:#c6b4f0}.hljs-meta{color:#fc9b9b}.hljs-deletion{background-color:#fc9b9b;color:#333}.hljs-addition{background-color:#a2fca2;color:#333}.hljs a{color:inherit}.hljs a:focus,.hljs a:hover{color:inherit;text-decoration:underline}</style><h2 data-id="heading-0">å®‰å…¨æ£€æµ‹</h2>
<p>â€ƒâ€ƒè¿‘æœŸçº¿ä¸Šä»£ç å®‰å…¨æ£€æµ‹é‡åˆ°ä¸€äº›é—®é¢˜åé¦ˆï¼Œéƒ½æ˜¯ä¸€äº›å¼€å‘ä¸­ä¸å¸¸è§ã€ä¸æ˜¾ç°çš„é—®é¢˜ã€‚æ‰€ä»¥è®°å½•ä¸€ä¸‹ï¼Œäº†è§£ä¸€äº›æ–°çš„å®‰å…¨é˜²æŠ¤çš„æ–¹æ³•ï¼Œæ–¹ä¾¿æ—¥åå¼€å‘ä¸­èƒ½å¤Ÿæœªé›¨ç»¸ç¼ªã€‚</p>
<h3 data-id="heading-1">SRI æ£€æŸ¥</h3>
<p>Subresource Integrity ï¼ˆå­èµ„æºå®Œæ•´æ€§ï¼‰</p>
<h4 data-id="heading-2">é—®é¢˜ä»£ç ï¼š</h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.bootcdn.net/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-3">ä¿®æ”¹åçš„ä»£ç </h4>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- æ­¤ä»£ç ä¸­ integrity å€¼ä¸å¯ç›´æ¥ä½¿ç”¨ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>
  <span class="hljs-attr">src</span>=<span class="hljs-string">"https://cdn.bootcdn.net/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js"</span>
  <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha384-FwzUI3CDd**************FBTolvoj"</span>
  <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">"anonymous"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h4 data-id="heading-4">ä¿®æ”¹æ–¹å¼</h4>
<h6 data-id="heading-5">1. åœ¨çº¿å·¥å…· SRI Hash Generator</h6>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fsrihash.org%2F" target="_blank" title="https://srihash.org/" ref="nofollow noopener noreferrer">srihash.org/</a></p>
<h6 data-id="heading-6">2. å‘½ä»¤è¡Œ</h6>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ä¸‹è½½å¤–éƒ¨èµ„æº</span>
curl -O https://cdn.bootcdn.net/ajax/libs/jsencrypt/3.3.2/jsencrypt.min.js
</code></pre>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç”Ÿæˆ integrity çš„å€¼</span>
node -e <span class="hljs-string">"const fs = require('fs'); const crypto = require('crypto'); const hash = crypto.createHash('sha384').update(fs.readFileSync('jsencrypt.min.js')).digest('base64'); console.log('sha384-' + hash)"</span>
</code></pre>
<p><sup><a href="#user-content-fn-1" id="user-content-user-content-fnref-1" data-footnote-ref="" aria-describedby="footnote-label" title="#user-content-fn-1">1</a></sup>è·³è½¬è‡³ä»£ç ç¿»è¯‘</p>
<h4 data-id="heading-7">ä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
<p>integrityï¼šæ ¸å¿ƒæ ¡éªŒå±æ€§ï¼Œæ ¼å¼ä¸º ç®—æ³•å-Base64å“ˆå¸Œå€¼ï¼Œæ”¯æŒçš„ç®—æ³•ï¼šsha256ã€sha384ã€sha512ï¼ˆæ¨è sha384/sha512ï¼Œå®‰å…¨æ€§æ›´é«˜ï¼‰ï¼›</p>
<p>crossoriginï¼šè·¨åŸŸèµ„æºå¿…å¡«ï¼Œä¸å¡«çš„è¯æµè§ˆå™¨ä¸æ ¡éªŒã€‚å¸¸ç”¨ anonymousï¼ˆä¸å‘é€å‡­æ®ï¼‰ï¼Œå‡ ä¹ä¸ç”¨ use-credentialsï¼ˆå‘é€å‡­æ®ï¼‰ã€‚</p>
<h4 data-id="heading-8">è¯¦ç»†åŸå› </h4>
<p>ç”¨äºèµ„æºå®Œæ•´æ€§æ ¡éªŒï¼Œä¿è¯ç”¨æˆ·æµè§ˆå™¨æ¯æ¬¡è·å–å¤–éƒ¨èµ„æºæ—¶ï¼Œå¾—åˆ°çš„éƒ½æ˜¯åŸå°ä¸åŠ¨èµ„æºï¼Œé˜²æ­¢æ¶æ„ç¯¡æ”¹</p>
<p><strong>ä¸€æœ¬æ­£ç»ï¼š</strong><br/>
åŸç†ï¼šintergrity çš„å€¼ï¼Œæ˜¯ç®—æ³•åï¼ŒåŠ ä¸Šæ ¹æ®èµ„æºæºä»£ç ï¼Œé€šè¿‡ç®—æ³•ï¼Œç”Ÿæˆçš„ hash å€¼<br/>
ç®—æ³•çš„ç›®æ ‡ä»£ç ä¸åŒï¼Œç”Ÿæˆçš„ hash å€¼ä¹Ÿå°±ä¸åŒ<br/>
åœ¨ script æ ‡ç­¾ä¸­åŠ å…¥è¿™ä¸ªå±æ€§åï¼Œæ ‡ç­¾åœ¨è·å–åˆ°å¤–éƒ¨èµ„æºæ—¶ï¼Œä¼šè‡ªåŠ¨å¯¹è·å–çš„èµ„æºé€šè¿‡ç®—æ³•ç”Ÿæˆ hash å€¼<br/>
ç”¨æ–°ç”Ÿæˆçš„ hash å€¼ï¼Œä¸ intergrity çš„å±æ€§å€¼åšå¯¹æ¯”ï¼š<br/>
ç›¸åŒï¼Œè¡¨ç¤ºèµ„æºæ— å˜åŠ¨ï¼Œå®‰å…¨ï¼›ä¸åŒï¼Œè¡¨ç¤ºèµ„æºæœ‰å˜åŠ¨ï¼Œä¸¢å¼ƒè¯¥èµ„æº</p>
<p><strong>é€šä¿—å¤§ç™½è¯ï¼š</strong><br/>
é€šä¿—è®²ï¼Œå°±æ˜¯æå‰å‘Šè¯‰æµè§ˆå™¨ï¼šæˆ‘è¦çš„ä¸œè¥¿ï¼Œç”¨è¿™ä¸ªç®—æ³•ï¼Œä¼šå¾—åˆ°è¿™ä¸ªç»“æœã€‚<br/>
æµè§ˆå™¨ï¼šçŸ¥é“äº†ï¼Œç­‰æˆ‘è¿è¡Œçš„æ—¶å€™ï¼Œæ‹¿åˆ°ä¸œè¥¿æˆ‘å…ˆç®—ä¸€ä¸‹ï¼Œçœ‹ç»“æœä¸€æ ·ä¸ï¼Œä¸€æ ·æˆ‘å†ç”¨ï¼Œä¸ä¸€æ ·æˆ‘å°±æ‰”äº†ã€‚</p>
<h3 class="sr-only" id="user-content-footnote-label" data-id="heading-9">Footnotes</h3>
<ol>
<li id="user-content-user-content-fn-1">
<p><strong>ä»£ç ç¿»è¯‘</strong></p>
<p>æ•´ä¸ªå‘½ä»¤æ˜¯ Node.js çš„-eå‚æ•°ç”¨æ³•ï¼ˆ-e = --evalï¼Œè¡¨ç¤ºæ‰§è¡Œåé¢çš„å­—ç¬¦ä¸²ä»£ç ï¼‰ï¼Œæ ¸å¿ƒä¾èµ– Node.js å†…ç½®çš„fsï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰å’Œcryptoï¼ˆåŠ å¯†ï¼‰æ¨¡å—ï¼Œæ— éœ€é¢å¤–å®‰è£…ä¾èµ–ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// 1. å¼•å…¥Node.jså†…ç½®æ¨¡å—ï¼Œæ— éœ€npm install</span>
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>) <span class="hljs-comment">// ç”¨äºè¯»å–æœ¬åœ°æ–‡ä»¶å†…å®¹</span>
<span class="hljs-keyword">const</span> crypto = <span class="hljs-built_in">require</span>(<span class="hljs-string">'crypto'</span>) <span class="hljs-comment">// ç”¨äºç”ŸæˆåŠ å¯†å“ˆå¸Œå€¼</span>

<span class="hljs-comment">// 2. ç”ŸæˆSHA-384å“ˆå¸Œå¹¶Base64ç¼–ç </span>
<span class="hljs-keyword">const</span> hash = crypto
  .<span class="hljs-title function_">createHash</span>(<span class="hljs-string">'sha384'</span>) <span class="hljs-comment">// åˆ›å»ºSHA-384å“ˆå¸Œè®¡ç®—å®ä¾‹</span>
  .<span class="hljs-title function_">update</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">'jsencrypt.min.js'</span>)) <span class="hljs-comment">// è¯»å–æ–‡ä»¶å†…å®¹å¹¶ä¼ å…¥å“ˆå¸Œå®ä¾‹</span>
  .<span class="hljs-title function_">digest</span>(<span class="hljs-string">'base64'</span>) <span class="hljs-comment">// è®¡ç®—å“ˆå¸Œå¹¶è¾“å‡ºBase64æ ¼å¼ï¼ˆSRIè¦æ±‚çš„ç¼–ç æ ¼å¼ï¼‰</span>

<span class="hljs-comment">// 3. æ‹¼æ¥SRIè§„èŒƒæ ¼å¼å¹¶æ‰“å°</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'sha384-'</span> + hash)
</code></pre>
<a href="#user-content-fnref-1" data-footnote-backref="" class="data-footnote-backref" aria-label="Back to content" title="#user-content-fnref-1">â†©</a>
</li>
</ol>
</div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ•™ä½ é›¶æˆæœ¬ä½¿ç”¨æ»¡è¡€ Clawdbotï¼Œå¹¶æ‰‹æŠŠæ‰‹å¸¦ä½ é›†æˆé£ä¹¦å’ŒTelegram]]></title>    <link>https://juejin.cn/post/7601770028279037961</link>    <guid>https://juejin.cn/post/7601770028279037961</guid>    <pubDate>2026-02-02T05:58:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601770028279037961" data-draft-id="7601762468201938970" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ•™ä½ é›¶æˆæœ¬ä½¿ç”¨æ»¡è¡€ Clawdbotï¼Œå¹¶æ‰‹æŠŠæ‰‹å¸¦ä½ é›†æˆé£ä¹¦å’ŒTelegram"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-02T05:58:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Javaç¼–ç¨‹çˆ±å¥½è€…"/> <meta itemprop="url" content="https://juejin.cn/user/819554264300154"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ•™ä½ é›¶æˆæœ¬ä½¿ç”¨æ»¡è¡€ Clawdbotï¼Œå¹¶æ‰‹æŠŠæ‰‹å¸¦ä½ é›†æˆé£ä¹¦å’ŒTelegram
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/819554264300154/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Javaç¼–ç¨‹çˆ±å¥½è€…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T05:58:14.000Z" title="Mon Feb 02 2026 05:58:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>OpenClawæœ€è¿‘çƒ­åº¦å¾ˆé«˜ï¼Œæœ€æ—©å«åš Clawdbotï¼Œåæ¥æ”¹åMoltbotï¼Œç°åœ¨å« OpenClaw äº†ã€‚</p>
<p>å¾ˆå¤šäººæ—©å·²ç”¨ä¸Šäº†ï¼ŒæŸ¥æ•°æ®ã€åšè°ƒç ”ã€å†™ä»£ç ï¼Œä½†æ˜¯è¿˜æœ‰äº›æœ‹å‹æƒ³ç”¨ä½†æ˜¯è¿˜æ²¡ä½“éªŒä¸Šã€‚</p>
<p>OpenClaw èƒ½å¤Ÿåƒäººä¸€æ ·æ“æ§ç”µè„‘å’Œæµè§ˆå™¨ï¼Œæˆä¸ºæˆ‘ä»¬çš„ç§äºº AI åŠ©ç†ã€‚</p>
<p>ä½†åœ¨å®‰è£…è¿™ä¸€æ­¥ï¼Œå¾ˆå¤šäººçŠ¯äº†éš¾ã€‚æ˜¯è·‘åœ¨è‡ªå·±ç”µè„‘ä¸Šï¼Ÿè¿˜æ˜¯æŒ‚åœ¨äº‘ç«¯ï¼Ÿåˆ°åº•æœ‰å¯¹è‡ªå·±æœ‰æ²¡æœ‰å¸®åŠ©ï¼Ÿ</p>
<p>ä»Šå¤©ä»‹ç»ä¸€ç§ä¸ç”¨èŠ±é’±çš„æ–¹å¼å¿«é€Ÿå®‰è£…ï¼Œå¦‚æœæœ‰ç”¨å‘¢ï¼Œé‚£å°±å¯ä»¥ç›´æ¥ç”¨äº†ï¼›å¦‚æœå‘ç°ç”¨å¤„ä¸å¤§ï¼Œé‚£ä¹Ÿä¸ç”¨æµªè´¹é’±ä¹°ä¸ªæ–°ç”µè„‘æˆ–è€…ä¹°äº‘æœåŠ¡äº†ã€‚</p>
<p>æœ¬æ–‡åŒ…æ‹¬å¿«é€Ÿå®‰è£…æ•™ç¨‹ï¼Œä»¥åŠè¯¦ç»†çš„é…ç½® Telegram å’Œ é£ä¹¦é›†æˆçš„æ­¥éª¤ï¼Œå¦‚æœAWSä½ ä¸æƒ³ç”¨ï¼Œæ²¡å…³ç³»ï¼Œæ•™ç¨‹åœ¨ä»»ä½•æœºå™¨ä¸Šéƒ½æ˜¯é€šç”¨çš„ã€‚</p>
<p>AWS å…è´¹éƒ¨ç½²</p>
<p>ç°åœ¨åªè¦æ³¨å†Œï¼Œå°±å¯ä»¥å…è´¹ä½¿ç”¨ 6 ä¸ªæœˆï¼Œå¯ä»¥é€‰æ‹© 8G å†…å­˜çš„æœåŠ¡å™¨ä½¿ç”¨ï¼Œè¿™å¯æ˜¯ä¸€å¹´å‡ åƒå—é…ç½®çš„æœåŠ¡å™¨å•Šã€‚</p>
<p>è®¿é—®ä¸‹é¢åœ°å€æ³¨å†Œè´¦å·ï¼Œé€‰æ‹©å…è´¹è®¡åˆ’ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Faws.amazon.com%2F" target="_blank" title="https://aws.amazon.com/" ref="nofollow noopener noreferrer">aws.amazon.com/</a></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90c2c7ca47874c3f9b5f99dff0ed9e14~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=sOKaBw6EJbpmmOZ8CgZLrxWf8ps%3D" alt="" loading="lazy"/></p>
<p>ä¹‹åè¿›å…¥æ§åˆ¶å°ï¼Œæœç´¢ EC2ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2f1dc6026b804701aee5057a6b9c7883~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=XL%2FB40IYBvepeKD3SqM%2ByyKg%2FAQ%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»å¯åŠ¨å®ä¾‹ï¼Œè¿™ä¸€æ­¥ä¹‹åå°±å¼€å§‹é€‰æœåŠ¡å™¨é…ç½®äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e94a798e74d4f18aae48ec19d7ff4c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=Xs59UPxPR86mIWITt8P2RgjpfKY%3D" alt="" loading="lazy"/></p>
<p>é€‰æ‹©ä»»æ„åé¢å†™ç€ã€Œç¬¦åˆæ¡ä»¶çš„å…è´¹å¥—é¤ã€éƒ½ä¸ç”¨ä»˜è´¹ï¼Œå½“ç„¶é€‰8gå†…å­˜çš„è¿™ä¸ªäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92f3694fe093428fbd35ce31f042be59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=1GG3nfdj9e6J0v62EnTkVwepX38%3D" alt="" loading="lazy"/></p>
<p>é•œåƒé€‰æ‹© Ubuntuï¼Œç„¶åå¯åŠ¨å®ä¾‹ï¼ŒæœåŠ¡å™¨å°±åˆ°æ‰‹äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/90561ef81b4e4557b3e5ff8bd5a15a81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=5ovpMZ0DUuG3IiybqHzM0CXYQmU%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œé€‰æ‹©è¿æ¥åˆ°å®ä¾‹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a094354bde8d40abba27321990a0d092~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=PB%2FMsYNK3Q666gNK9F6MZkOorqU%3D" alt="" loading="lazy"/></p>
<p>æœ‰å¥½å‡ ç§è¿æ¥æ–¹å¼ï¼Œæœ€ç®€å•çš„å°±æ˜¯ç¬¬ä¸€ç§ï¼Œç›´æ¥ç‚¹è¿æ¥æŒ‰é’®å°±å¯ä»¥äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c50b35a9001f4e2db5185bc9fbd20c5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=1JNqTsc5Fmcu8Z4VIghwOOBcawY%3D" alt="" loading="lazy"/></p>
<p>è¿æ¥ä¹‹åå°±æ˜¯æœåŠ¡å™¨çš„å‘½ä»¤è¡Œçª—å£ï¼Œåé¢çš„å®‰è£…å°±åœ¨è¿™é‡Œè¿›è¡Œäº†ã€‚</p>
<p>å®‰è£…</p>
<p>ä¸€æ¡å‘½ä»¤å°±èƒ½å®‰è£…ï¼Œå®‰è£…æ˜¯æœ€ç®€å•çš„æ­¥éª¤ã€‚</p>
<p>bash</p>
<pre><code class="hljs language-arduino" lang="arduino">curl -fsSL https:<span class="hljs-comment">//openclaw.ai/install.sh | bash</span>
</code></pre>
<p>è¿™ä¸€æ­¥ä¼šç¨å¾®è€—è´¹ä¸€äº›æ—¶é—´ï¼Œéœ€è¦å®‰è£…ç¯å¢ƒï¼Œä½†æ˜¯aws éå¸¸å¿«ï¼Œ2åˆ†é’Ÿä»¥å†…å®Œæˆã€‚</p>
<p>æ¥ç€ï¼Œå¼€å§‹è¿›è¡Œå¿«é€Ÿé…ç½®ã€‚</p>
<p>ç¬¬ä¸€é¡¹é€‰yesï¼Œç„¶åé€‰æ‹© QuickStartã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b20e487058b442987e56f4b6d23a148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=XAw1MFdNgzgeElNonyYidAty8X4%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸€æ­¥æ²¡åŠæ³•å·æ‡’äº†ï¼Œä½ å¿…é¡»æœ‰ä¸ªå¯ç”¨çš„keyï¼Œæ¯”å¦‚Googleã€OpenAIçš„ï¼Œæˆ–è€…miniMaxã€kimiçš„coding plan ä¹Ÿå¯ä»¥ï¼Œæ€»ä¹‹ï¼Œè¿™ä¸€æ­¥æ²¡åŠæ³•ç™½å«–çš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/74dcf0a8f5ef42729d926ad04c3ca5e7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=jHlLQR98XgnwWJwkArfygIrVnaY%3D" alt="" loading="lazy"/></p>
<p>æˆ‘é€‰æ‹©äº† Googleï¼Œç„¶åé€‰æ‹© Gemini 3ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/83c4781257af4fb1ae66b9be4abe8cfe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=CXfwZFMtCi%2FGq6trCdlxIf%2BOZfk%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸€æ­¥é€‰æ‹© Bot çš„ï¼Œå…ˆè·³è¿‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b63fe911a8b45bbb0d8e26001fd8d22~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=YMhbiSM8buEivGVIdM9Wd1NTgKU%3D" alt="" loading="lazy"/></p>
<p>è¿™äº› Skill å¯ä»¥é€‰æ‹©æ€§å®‰è£…ï¼Œä¹Ÿå¯ä»¥è·³è¿‡ç­‰ç€åé¢å®‰è£…ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8d3b00bc191943c1ac5f33d4b1e62373~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=hORTEJVZfeQy42QKbi8X1ghofvs%3D" alt="" loading="lazy"/></p>
<p>ä¸‹é¢è¿™å‡ é¡¹å…¨é€‰æ‹© No å°±å¥½äº†ã€‚</p>
<p>Enable hooks å¯ä»¥å…¨é€‰ä¸Šï¼ŒæŒ‰ç©ºæ ¼é€‰ä¸­ï¼ŒæŒ‰å›è½¦ç¡®å®šä¸‹ä¸€æ­¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c45b370360234e8abf39507ecdf3f1c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=5vCzxob21o22yjTQeWNgWWMy2m8%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡»ä¼šè½¦åï¼Œç¨ç­‰å‡ ç§’ï¼Œå°±å®‰è£…å®Œæˆäº†ã€‚</p>
<p>å› ä¸ºæ˜¯åœ¨Linuxä¸­ï¼Œæ²¡æœ‰æµè§ˆå™¨ï¼Œæ‰€ä»¥ä½¿ç”¨ Tui æ–¹å¼æ“ä½œã€‚</p>
<p>å®‰è£…å®Œæˆåå°±å¯ä»¥ç›´æ¥é€‰æ‹© Tui ï¼Œæˆ–è€…ä½¿ç”¨Â <code>openclaw tui</code>æ‰“å¼€ã€‚</p>
<p>æ‰“å¼€ Tui æ¨¡å¼åï¼Œéšä¾¿è¾“å…¥ç‚¹å„¿å†…å®¹ï¼Œå¦‚æœæ­£å¸¸è¿”å›å°±è¯´æ˜å®‰è£…æˆåŠŸäº†ï¼Œé¡ºåˆ©çš„è¯2ã€3åˆ†é’Ÿå°±å®Œäº‹å„¿äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/efcee2ed5e5e46568787a24cc6186ee2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=y1DDqgRWPt3h09WmoWIJEWe1q8w%3D" alt="" loading="lazy"/>æ·»åŠ Telegramæœºå™¨äºº</p>
<p>æ¥ä¸‹æ¥ï¼Œæœ€ç®€å•çš„å°±æ˜¯é›†æˆ Telegram æœºå™¨äººäº†ã€‚æ·»åŠ å¥½ä»¥åï¼Œå°±å¯ä»¥é€šè¿‡èŠå¤©çš„æ–¹å¼æ§åˆ¶ OpenClaw äº†ã€‚</p>
<p>æ‰“å¼€ Â Telegramï¼Œæœç´¢<code>BotFather</code>ï¼Œè®¤å‡†äº†ï¼Œçœ‹æ¸…æ¥šåç§°è¦æ˜¯ @BotFather çš„è¿™ä¸ªï¼Œè¿™ä¸ªå°±æ˜¯ç”¨æ¥å¿«é€Ÿåˆ›å»ºæœºå™¨äººçš„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fec4cfec583e4b69a46aee2b05e19d7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=dTjWRPN1xugXM%2BMfpeNo7ZWKIXA%3D" alt="" loading="lazy"/></p>
<p>åœ¨å¯¹è¯ä¸­è¾“å…¥Â <code>/newbot</code>ï¼Œä¼šè¿”å›æ¶ˆæ¯ï¼Œè®©ä½ è¾“å…¥åç§°ã€‚èµ·ä¸€ä¸ªåå­—è¾“å…¥è¿›å»ï¼Œå›è½¦ï¼Œæ¥ç€ä¼šè®©ä½ è¾“å…¥ä¸€ä¸ªÂ <code>username</code>ï¼Œç›¸å½“äºæ˜µç§°äº†ï¼Œæ¥ç€è¾“å…¥æ˜µç§°ï¼ˆä»¥botç»“å°¾ï¼‰ï¼Œæ˜µç§°æœ‰å¯èƒ½å·²ç»è¢«å ç”¨äº†ï¼Œä¸ç¬¦åˆå°±æ¥ç€è¾“å…¥æ–°çš„ã€‚</p>
<p>ç›´åˆ°å‡ºç°ä¸‹é¢çš„å›å¤ï¼Œè¡¨ç¤ºåˆ›å»ºæˆåŠŸäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce17d018049245a2a6129fa58b3d8f4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=g9ruSt%2FzqVXCeFOk8caogT7A708%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥åˆ°é‡ç‚¹äº†ï¼Œçœ‹ä¸Šå›¾çº¢æ¡†ä¸­çš„è¿™éƒ¨åˆ†ï¼Œè¿™æ˜¯ç”¨æ¥æ¥å…¥ä½ çš„æœºå™¨äººçš„ã€‚</p>
<p>æ€ä¹ˆåšå‘¢ï¼Ÿå¾ˆç®€å•ï¼Œç›´æ¥å¤åˆ¶ä¸‹æ¥ï¼Œç„¶ååœ¨åˆšæ‰çš„ OpenClaw tui å¯¹è¯æ¡†ä¸­ç²˜è´´è¿›æ¥ï¼Œå‘Šè¯‰å®ƒï¼Œè¿™æ˜¯tgåˆ›å»ºæœºå™¨äººåè¿”å›çš„ tokenã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/492551783e9f4881b3402a3100384e2a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=KPEdxnEO7FrqGiXg19Wk6hTJJkU%3D" alt="" loading="lazy"/></p>
<p>ç„¶å OpenClaw è‡ªå·±å°±çŸ¥é“è¦å¹²ä»€ä¹ˆäº†ã€‚çœ‹ä¸‹é¢çš„ä¿¡æ¯ï¼Œæœºå™¨äººå·²é…ç½®å¥½äº†ï¼Œæ­£åœ¨é‡å¯ï¼Œä½†æ˜¯è¿˜éœ€è¦å‘ä¸€æ¡æ¶ˆæ¯ï¼Œè¿›è¡Œä¸€ä¸ªé…å¯¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a721755dd3e1483ebe03638ecf28d6af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=BYW5Hv4tDGcvCg%2Fc3ug4tJL8aKg%3D" alt="" loading="lazy"/></p>
<p>è¿™æ¡æ¶ˆæ¯å°±è¦åœ¨åˆšåˆšåˆ›å»ºçš„Telegramæœºå™¨äººä¸­å‘äº†ï¼Œè¿˜æ˜¯åœ¨åˆ›å»ºæœºå™¨äººçš„å¯¹è¯æ¡†ä¸­ï¼Œçœ‹ä¸‹å›¾çº¢æ¡†çš„éƒ¨åˆ†äº†å—ï¼Œç›´æ¥ç‚¹è¿™ä¸ªé“¾æ¥ï¼Œå°±èƒ½å’Œæœºå™¨äººè¿›è¡Œå¯¹è¯äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9fd26031eba4c3ea915ffc1f9acb2a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=Y9zkL9XsKuuVB6b8ZiwVfY0L4pM%3D" alt="" loading="lazy"/></p>
<p>éšä¾¿è¾“å…¥ä»€ä¹ˆéƒ½å¯ä»¥ã€‚æ¥ç€ï¼Œæœºå™¨äººä¼šè¿”å›å¦‚ä¸‹å›¾çº¢æ¡†çš„éƒ¨åˆ†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4edd03afe9644d37a9df7e60f76eaf99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=5K8Y%2Bk7iqJe2tGx%2Bo4a3BK5Gkvk%3D" alt="" loading="lazy"/></p>
<p>å°†è¿™éƒ¨åˆ†æ•´ä½“å¤åˆ¶ï¼Œç„¶åå›åˆ° OpenClaw tuiï¼Œç›´æ¥ç²˜è´´è¿›å»ï¼Œå›è½¦ã€‚</p>
<p>çœ‹åˆ°äº†å§ï¼Œè¿æ¥æˆåŠŸäº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91f4fdad132142029dc3b761a10c5c09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=Grsces2we3%2F8m8K8havYAW%2BKj7g%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€åœ¨TGæœºå™¨äººèŠå¤©çª—å£ï¼Œå°±å¯ä»¥æ§åˆ¶ OpenClaw äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b677c00c86de44c9b3bd6072be10f9dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=pmVP3s3nD2y7AbgocmpSozMKSFk%3D" alt="" loading="lazy"/>é›†æˆé£ä¹¦æœºå™¨äºº</p>
<p>é£ä¹¦ç›¸å¯¹æ¥è¯´å¤æ‚ä¸€ç‚¹ï¼Œä¸»è¦æ˜¯å‰æœŸçš„å‡†å¤‡å·¥ä½œæœ‰ç‚¹å„¿å¤šï¼Œè€Œä¸”éœ€è¦æ‰‹åŠ¨æ“ä½œã€‚</p>
<p>é¦–å…ˆæ‰“å¼€é£ä¹¦å¼€æ”¾å¹³å°ï¼Œæœ‰è´¦å·å°±å¯ä»¥ã€‚</p>
<p>åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopen.feishu.cn%2Fapp" target="_blank" title="https://open.feishu.cn/app" ref="nofollow noopener noreferrer">open.feishu.cn/app</a></p>
<p>ç‚¹å‡»åˆ›å»ºä¼ä¸šè‡ªå»ºåº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/72ffed7bfd444d3c98a6318acaf3c5a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=s5W8cspS8nA25S1DZwINMvUwIH8%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥åç§°å’Œæè¿°åï¼Œç‚¹å‡»æœºå™¨äººè¿™é‡Œçš„ã€Œæ·»åŠ ã€æŒ‰é’®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0c2f42a35fa5405b8b8af846229019dd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=zpSF6Ah2kWgWgVzf4O3qOcp0X4s%3D" alt="" loading="lazy"/></p>
<p>å·¦ä¾§èœå•æ ä¼šå‡ºç°æœºå™¨äººèœå•ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œè¿›å…¥æƒé™ç®¡ç†é¡µé¢ï¼Œå°†ä¸‹å›¾ä¸­å³ä¾§çš„æƒé™æ‰“å¼€ï¼Œæˆ–è€…å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fm1heng%2Fclawdbot-feishu%3Ftab%3Dreadme-ov-file%23%25E4%25B8%25AD%25E6%2596%2587" target="_blank" title="https://github.com/m1heng/clawdbot-feishu?tab=readme-ov-file#%E4%B8%AD%E6%96%87" ref="nofollow noopener noreferrer">github.com/m1heng/clawâ€¦</a> è¿™é‡Œï¼Œå¯ä»¥å¼€é€šæ›´å¤šæƒé™ï¼ŒåŒ…æ‹¬ç®¡ç†çŸ¥è¯†åº“æˆ–äº‘æ–‡æ¡£èƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b8d6681440846398dd625c13494b6f8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=WPHOn9%2Fr079GdEkcRIKSH3nJ%2Bb8%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€åœ¨äº‹ä»¶ä¸å›è°ƒé¡µé¢ï¼Œåœ¨äº‹ä»¶é…ç½®ä¸­ï¼Œå°†è®¢é˜…æ–¹å¼è®¾ç½®ä¸ºé•¿è¿æ¥ï¼Œç„¶åæ·»åŠ ä¸‹å›¾ä¸­çš„ 4ä¸ªäº‹ä»¶ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7722d1d4a0342ba97a8ce6ab2ee411c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=%2BOXfPwbPyCM2fLll4EUvSudzKz4%3D" alt="" loading="lazy"/></p>
<p>ç„¶åæ¥åˆ°å‡­è¯ä¸åŸºç¡€ä¿¡æ¯ï¼Œå°†ä¸Šé¢çš„Client ID å’Œ Client Secret å…ˆå¤åˆ¶åˆ°ä¸€ä¸ªä½ç½®ï¼Œç¨åä¼šç”¨åˆ°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eef493a1bb6e44989c30948f0e6031f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=pVhB%2BOun7q4hWzpan%2FHRznRxrfA%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€ï¼Œç‚¹å‡»ä¸Šæ–¹çš„ã€ŒæŸ¥çœ‹ç‰ˆæœ¬è¯¦æƒ…ã€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e3be520904b4151b0af79ee99453214~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=aWDUfBxrM6uGyxUlYvlVpOSyDA8%3D" alt="" loading="lazy"/></p>
<p>å¡«å¥½ç‰ˆæœ¬å·å’Œæè¿°ï¼Œç‚¹å‡»ä¿å­˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4aab3d2d26874b0e9d50d75ade8cb703~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=OegRuQqcokss%2FTuB3FytGdnn6wM%3D" alt="" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»ç¡®è®¤å‘å¸ƒã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/550ce3c131b146d68e1046d1818a8009~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=fT69TlTq6mF8qVeC3pMBPp0yLcI%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€æ¥åˆ° OpenClaw tui ç•Œé¢ã€‚</p>
<p>åªéœ€è¦æŠŠä¸‹é¢çš„å†…å®¹è¾“å…¥è¿›å»ï¼ŒOpenClaw å°±ä¼šè‡ªåŠ¨ç»™ä½ é…ç½®äº†ï¼Œæ³¨æ„æ›¿æ¢ä½ çš„ Client ID å’Œ Â  Client Secretã€‚</p>
<blockquote>
<p>æˆ‘è¦ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fm1heng%2Fclawdbot-feishu" target="_blank" title="https://github.com/m1heng/clawdbot-feishu" ref="nofollow noopener noreferrer">github.com/m1heng/clawâ€¦</a> è¿™ä¸ªé¡¹ç›®å°†é£ä¹¦é›†æˆè¿›æ¥ï¼Œæˆ‘çš„appIdæ˜¯â€œå‰é¢å¤åˆ¶çš„Client IDâ€ï¼Œæˆ‘çš„appSecret æ˜¯â€œå‰é¢å¤åˆ¶çš„ Client Secretâ€ï¼Œè€Œä¸”æˆ‘ä½¿ç”¨çš„æ˜¯å›½å†…ç‰ˆé£ä¹¦ï¼Œç°åœ¨è¯·å¸®æˆ‘é›†æˆè¿›æ¥å§ã€‚</p>
</blockquote>
<p>ç„¶åæ¥åˆ°é£ä¹¦ï¼Œç‚¹å‡»å·¦ä¾§æœç´¢æ¡†ï¼Œæœç´¢ä½ åˆšæ‰åˆ›å»ºçš„åº”ç”¨åç§°ï¼Œè¿™ä¸ªå°±æ˜¯ä½ çš„æ™ºèƒ½åŠ©æ‰‹äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/475d6824e8a042c098716ff8c2907aad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=qsoeGdvM9VN3U7YVnG5JOUrfWBc%3D" alt="" loading="lazy"/></p>
<p>ç„¶åå’Œä»–èŠå¤©éªŒè¯ä¸€ä¸‹ã€‚éšä¾¿è¾“å…¥ä¸€ç‚¹å†…å®¹ï¼Œå¦‚æœæ­£å¸¸è¿”å›å°±å¯ä»¥ç”¨äº†ã€‚å¦‚æœä¸æ­£å¸¸ï¼Œç›´æ¥æŠŠé”™è¯¯ä¿¡æ¯æ‰”ç»™ OpenClaw tuiï¼Œè®©ä»–ä¿®æ”¹å°±è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ede23e321f5240c1912bebcb9f65513c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSmF2Yee8lueoi-eIseWlveiAhQ==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770616694&amp;x-signature=qQWM0T50F8vnRMuHG3F49s3i294%3D" alt="" loading="lazy"/>æœ€å</p>
<p>OpenClaw å°±æ˜¯ä¸€ä¸ªæƒé™å¾ˆå¤§çš„ç¨‹åºï¼Œä»–å¯ä»¥åœ¨ä½ çš„æœºå™¨äººä¸Šéšæ—¶å¾…å‘½ï¼Œå°±åƒä¸€ä¸ª24å°æ—¶å·¥ä½œçš„åŠ©ç†ä¸€æ ·ã€‚</p>
<p>ä¹‹æ‰€ä»¥è¦é›†æˆé£ä¹¦ã€TGç­‰å·¥å…·ï¼Œåªæ˜¯ä¸ºäº†éšæ—¶éšåœ°çš„æ§åˆ¶ä»–ï¼Œç›´æ¥ç”¨ç»ˆç«¯å…¶å®ä¹Ÿå¯ä»¥ï¼Œç”¨æµè§ˆå™¨ä¹Ÿå¯ä»¥ã€‚</p>
<p>ä½†æ˜¯é›†æˆäº†å¸¸ç”¨èŠå¤©å·¥å…·åï¼Œæˆ‘ä»¬èººç€åºŠä¸Šã€åœ°é“ä¸Šä¹Ÿå¯ä»¥æ§åˆ¶ä»–å¹²æ´»å„¿äº†ï¼Œè¿™æ˜¯æœ€æ–¹ä¾¿çš„åœ°æ–¹ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Python API è°ƒç”¨ä¿å§†çº§æ•™ç¨‹ï¼šä»åŸç†åˆ°ç¬¬ä¸€æ¬¡æˆåŠŸè¯·æ±‚ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰]]></title>    <link>https://juejin.cn/post/7602135278665383988</link>    <guid>https://juejin.cn/post/7602135278665383988</guid>    <pubDate>2026-02-03T03:18:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602135278665383988" data-draft-id="7602135278665367604" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Python API è°ƒç”¨ä¿å§†çº§æ•™ç¨‹ï¼šä»åŸç†åˆ°ç¬¬ä¸€æ¬¡æˆåŠŸè¯·æ±‚ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T03:18:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ççœ¼çœ‹è§†ç•Œ"/> <meta itemprop="url" content="https://juejin.cn/user/98277494891632"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Python API è°ƒç”¨ä¿å§†çº§æ•™ç¨‹ï¼šä»åŸç†åˆ°ç¬¬ä¸€æ¬¡æˆåŠŸè¯·æ±‚ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/98277494891632/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ççœ¼çœ‹è§†ç•Œ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:18:01.000Z" title="Tue Feb 03 2026 03:18:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Python API è°ƒç”¨ä¿å§†çº§æ•™ç¨‹ï¼šä»åŸç†åˆ°ç¬¬ä¸€æ¬¡æˆåŠŸè¯·æ±‚ï¼ˆé™„å®Œæ•´ä»£ç ï¼‰</h2>
<p>åœ¨å½“ä»Šçš„è½¯ä»¶å¼€å‘ä¸­ï¼Œ<strong>APIï¼ˆåº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£ï¼‰</strong> å‡ ä¹æ— å¤„ä¸åœ¨ã€‚ä»è·å–å¤©æ°”æ•°æ®ã€æ”¯ä»˜æ¥å£ï¼Œåˆ°è°ƒç”¨ ChatGPT è¿›è¡Œå¯¹è¯ï¼Œä¸€åˆ‡çš„æ ¸å¿ƒéƒ½æ˜¯â€œAPI è°ƒç”¨â€ã€‚</p>
<p>å¾ˆå¤šåˆå­¦è€…è§‰å¾— API å¾ˆé«˜æ·±ï¼Œä½†å®é™…ä¸Šï¼Œåªè¦ä½ æŒæ¡äº†**â€œè¯·æ±‚ï¼ˆRequestï¼‰â€<strong>ä¸</strong>â€œå“åº”ï¼ˆResponseï¼‰â€**è¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼Œä½ å°±å·²ç»è¿ˆè¿‡äº†é—¨æ§›ã€‚</p>
<p>æœ¬æ–‡å°†ä»¥ Python è¯­è¨€ä¸ºä¾‹ï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•å‘èµ·ä¸€æ¬¡æ ‡å‡†çš„ API è°ƒç”¨ã€‚ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºå’Œä¿è¯è¿æ¥ç¨³å®šæ€§ï¼Œæœ¬æ•™ç¨‹å°†ä½¿ç”¨å…¼å®¹æ€§æä½³çš„ <strong>4SAPI</strong> æ¥å£ä½œä¸ºæµ‹è¯•ç¯å¢ƒã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ æ ¸å¿ƒæ¦‚å¿µï¼šAPI åˆ°åº•åœ¨åšä»€ä¹ˆï¼Ÿ</h3>
<p>åœ¨å†™ä»£ç ä¹‹å‰ï¼Œä½ éœ€è¦ç†è§£ API äº¤äº’çš„å››ä¸ªè¦ç´ ï¼š</p>
<ol>
<li>
<p><strong>Endpointï¼ˆç«¯ç‚¹ï¼‰</strong> ï¼šä½ è¦å»å“ªé‡Œå–æ•°æ®ï¼Ÿé€šå¸¸æ˜¯ä¸€ä¸ª URLï¼ˆä¾‹å¦‚ <code>https://api.4sapi.com/v1</code>ï¼‰ã€‚</p>
</li>
<li>
<p><strong>Methodï¼ˆæ–¹æ³•ï¼‰</strong> ï¼šä½ è¦åšä»€ä¹ˆï¼Ÿ</p>
<ul>
<li><code>GET</code>ï¼šæŸ¥æ•°æ®ï¼ˆä¾‹å¦‚ï¼šæŸ¥è¯¢ä½™é¢ï¼‰ã€‚</li>
<li><code>POST</code>ï¼šæäº¤æ•°æ®ï¼ˆä¾‹å¦‚ï¼šå‘ä¸€æ®µè¯ç»™ AIï¼Œè®©å®ƒå›å¤ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>Headersï¼ˆè¯·æ±‚å¤´ï¼‰</strong> ï¼šä½ æ˜¯è°ï¼Ÿé€šå¸¸åŒ…å« <code>Authorization</code>ï¼ˆä½ çš„ API Keyï¼‰å’Œ <code>Content-Type</code>ï¼ˆæ•°æ®æ ¼å¼ï¼‰ã€‚</p>
</li>
<li>
<p><strong>Bodyï¼ˆè¯·æ±‚ä½“ï¼‰</strong> ï¼šå…·ä½“å†…å®¹æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¾‹å¦‚ï¼šä½ çš„ Prompt æç¤ºè¯ï¼‰ã€‚</p>
</li>
</ol>
<h3 data-id="heading-2">äºŒã€ ç¯å¢ƒå‡†å¤‡</h3>
<p>æˆ‘ä»¬å°†ä½¿ç”¨ Python ä¸­æœ€æµè¡Œçš„ <code>openai</code> åº“æ¥å®Œæˆè¿™æ¬¡è°ƒç”¨ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆä¸ç”¨ <code>requests</code> åº“ï¼Ÿ</strong></p>
<p>è™½ç„¶ <code>requests</code> æ˜¯åŸºç¡€ï¼Œä½†åœ¨ AI å¼€å‘é¢†åŸŸï¼Œä½¿ç”¨å®˜æ–¹ SDK èƒ½è‡ªåŠ¨å¤„ç†é‡è¯•ã€JSON è§£æç­‰ç¹çå·¥ä½œã€‚ç”±äº <strong>4SAPI</strong> å®Œç¾å…¼å®¹ OpenAI åè®®ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæˆç†Ÿçš„åº“ã€‚</p>
<h4 data-id="heading-3">1. å®‰è£…åº“</h4>
<p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼ˆTerminalï¼‰æˆ– CMDï¼Œè¾“å…¥ï¼š</p>
<p>Bash</p>
<pre><code class="hljs">pip install openai
</code></pre>
<h4 data-id="heading-4">2. è·å– API Key</h4>
<p>ä½ éœ€è¦ä¸€ä¸ªâ€œé€šè¡Œè¯â€ã€‚</p>
<ul>
<li>
<p>å¦‚æœä½ ä½¿ç”¨å®˜æ–¹ OpenAIï¼Œå»å®˜ç½‘åå°ã€‚</p>
</li>
<li>
<p><strong>æœ¬æ•™ç¨‹æ¨èæ¼”ç¤ºç¯å¢ƒ</strong>ï¼šå‰å¾€ <strong>4SAPI æ§åˆ¶å°</strong> ç”³è¯·ä¸€ä¸ªä»¤ç‰Œã€‚</p>
<ul>
<li><em>æ¨èç†ç”±</em>ï¼š4SAPI çš„ç½‘ç»œçº¿è·¯é’ˆå¯¹å›½å†…ä¼˜åŒ–ï¼ˆCN2ç›´è¿ï¼‰ï¼Œåœ¨è°ƒè¯•ä»£ç æ—¶ä¸ä¼šå› ä¸ºç½‘ç»œè¶…æ—¶ï¼ˆTimeoutï¼‰è€ŒæŠ¥é”™ï¼Œéå¸¸é€‚åˆæ–°æ‰‹å­¦ä¹ å’Œä¼ä¸šç”Ÿäº§ç¯å¢ƒã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€ ä»£ç å®æˆ˜ï¼šç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ª API è„šæœ¬</h3>
<p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶ <code>main.py</code>ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç å¤åˆ¶è¿›å»ã€‚ä¸ºäº†è®©ä½ çœ‹æ‡‚æ¯ä¸€è¡Œï¼Œæˆ‘æ·»åŠ äº†è¯¦ç»†çš„æ³¨é‡Šã€‚</p>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> os
<span class="hljs-keyword">from</span> openai <span class="hljs-keyword">import</span> OpenAI

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># æ­¥éª¤ 1ï¼šå®¢æˆ·ç«¯é…ç½® (Client Configuration)</span>
<span class="hljs-comment"># ==========================================</span>

<span class="hljs-comment"># åˆå§‹åŒ–å®¢æˆ·ç«¯</span>
client = OpenAI(
    <span class="hljs-comment"># ã€å…³é”®é…ç½®ã€‘</span>
    <span class="hljs-comment"># è¿™é‡Œçš„ API Key å»ºè®®ä»ç¯å¢ƒå˜é‡è¯»å–ï¼Œæˆ–è€…ç›´æ¥å¡«å…¥ä½ çš„ 4SAPI ä»¤ç‰Œ</span>
    api_key=<span class="hljs-string">"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>, 
    
    <span class="hljs-comment"># ã€æ ¸å¿ƒæŠ€å·§ã€‘</span>
    <span class="hljs-comment"># å°† base_url æŒ‡å‘ä¸­è½¬ç«™åœ°å€ã€‚</span>
    <span class="hljs-comment"># å¦‚æœä¸æ”¹è¿™é‡Œï¼Œä»£ç ä¼šé»˜è®¤å»è¿ OpenAI ç¾å›½æœåŠ¡å™¨ï¼ˆå®¹æ˜“è¶…æ—¶ï¼‰ã€‚</span>
    <span class="hljs-comment"># ä½¿ç”¨ 4SAPI å¯ä»¥åˆ©ç”¨å…¶ä¼ä¸šçº§ CN2 çº¿è·¯åŠ é€Ÿï¼Œç¡®ä¿æ¡æ‰‹æˆåŠŸã€‚</span>
    base_url=<span class="hljs-string">"https://api.4sapi.com/v1"</span> 
)

<span class="hljs-comment"># ==========================================</span>
<span class="hljs-comment"># æ­¥éª¤ 2ï¼šæ„å»ºè¯·æ±‚ (Build Request)</span>
<span class="hljs-comment"># ==========================================</span>

<span class="hljs-keyword">def</span> <span class="hljs-title function_">call_ai_model</span>():
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; æ­£åœ¨å‘é€è¯·æ±‚..."</span>)
    
    <span class="hljs-keyword">try</span>:
        <span class="hljs-comment"># å‘èµ· Chat Completions è¯·æ±‚ï¼ˆè¿™æ˜¯ç›®å‰æœ€é€šç”¨çš„ AI æ¥å£æ ‡å‡†ï¼‰</span>
        response = client.chat.completions.create(
            <span class="hljs-comment"># æŒ‡å®šæ¨¡å‹ï¼š4SAPI åç«¯æ”¯æŒæ˜ å°„ï¼Œä½ å¯ä»¥å¡« gpt-4o, claude-3-5-sonnet ç­‰</span>
            model=<span class="hljs-string">"gpt-4o-mini"</span>, 
            
            <span class="hljs-comment"># æ¶ˆæ¯åˆ—è¡¨ï¼šæ¨¡æ‹Ÿå¯¹è¯å†å²</span>
            messages=[
                {<span class="hljs-string">"role"</span>: <span class="hljs-string">"system"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"ä½ æ˜¯ä¸€ä¸ªPythonä»£ç åŠ©æ‰‹ï¼Œå›ç­”è¦ç®€æ´ã€‚"</span>},
                {<span class="hljs-string">"role"</span>: <span class="hljs-string">"user"</span>, <span class="hljs-string">"content"</span>: <span class="hljs-string">"è¯·å†™ä¸€ä¸ªæ‰“å° Hello World çš„å‡½æ•°"</span>}
            ],
            
            <span class="hljs-comment"># å‚æ•°è®¾ç½®</span>
            temperature=<span class="hljs-number">0.7</span>, <span class="hljs-comment"># åˆ›æ„åº¦ï¼š0.7 æ˜¯æ¯”è¾ƒå¹³è¡¡çš„å€¼</span>
            stream=<span class="hljs-literal">False</span>     <span class="hljs-comment"># æ˜¯å¦æµå¼è¾“å‡ºï¼ˆåˆå­¦è€…å»ºè®®å…ˆè®¾ä¸º Falseï¼‰</span>
        )
        
        <span class="hljs-comment"># ==========================================</span>
        <span class="hljs-comment"># æ­¥éª¤ 3ï¼šè§£æå“åº” (Parse Response)</span>
        <span class="hljs-comment"># ==========================================</span>
        
        <span class="hljs-comment"># API è¿”å›çš„æ˜¯ä¸€ä¸ªå¤æ‚çš„å¯¹è±¡ï¼Œæˆ‘ä»¬éœ€è¦æå–æ ¸å¿ƒå†…å®¹</span>
        content = response.choices[<span class="hljs-number">0</span>].message.content
        
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"&gt;&gt;&gt; API è°ƒç”¨æˆåŠŸï¼è¿”å›ç»“æœå¦‚ä¸‹ï¼š"</span>)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">30</span>)
        <span class="hljs-built_in">print</span>(content)
        <span class="hljs-built_in">print</span>(<span class="hljs-string">"-"</span> * <span class="hljs-number">30</span>)
        
        <span class="hljs-comment"># æ‰“å°ä¸€ä¸‹æ¶ˆè€—çš„ Token æ•°ï¼ˆ4SAPI åå°ä¹Ÿèƒ½çœ‹åˆ°è¯¦ç»†æ—¥å¿—ï¼‰</span>
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Token æ¶ˆè€—: <span class="hljs-subst">{response.usage.total_tokens}</span>"</span>)

    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"âŒ è°ƒç”¨å¤±è´¥: <span class="hljs-subst">{e}</span>"</span>)

<span class="hljs-comment"># æ‰§è¡Œå‡½æ•°</span>
<span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">"__main__"</span>:
    call_ai_model()
</code></pre>
<h3 data-id="heading-6">å››ã€ å¸¸è§æŠ¥é”™ä¸æ’æŸ¥ (Troubleshooting)</h3>
<p>åœ¨è°ƒè¯• API æ—¶ï¼ŒæŠ¥é”™æ˜¯å®¶å¸¸ä¾¿é¥­ã€‚ä»¥ä¸‹æ˜¯ä¸‰ç§æœ€å¸¸è§çš„é”™è¯¯ä»£ç åŠå…¶å«ä¹‰ï¼š</p>
<ol>
<li>
<p><strong>401 Unauthorized</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šèº«ä»½éªŒè¯å¤±è´¥ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šæ£€æŸ¥ <code>api_key</code> æ˜¯å¦å¡«é”™ï¼Œæˆ–è€…æ˜¯å¦æœ‰å¤šä½™çš„ç©ºæ ¼ã€‚</li>
</ul>
</li>
<li>
<p><strong>429 Too Many Requests</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¯·æ±‚å¤ªå¿«ï¼Œæˆ–è€…é¢åº¦è€—å°½ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šå¦‚æœä½ ç”¨çš„æ˜¯å®˜æ–¹å…è´¹å·ï¼Œå¾ˆå®¹æ˜“è§¦å‘è¿™ä¸ªã€‚å»ºè®®åˆ‡æ¢åˆ° <strong>4SAPI</strong> è¿™æ ·çš„ä¼ä¸šçº§ä¸­è½¬ï¼Œç”±äºå…¶åº•å±‚é‡‡ç”¨äº† MySQL 8.2 é«˜å¹¶å‘æ¶æ„ï¼Œèƒ½æ‰¿è½½æé«˜çš„å¹¶å‘é‡ï¼Œå‡ ä¹ä¸ä¼šé‡åˆ°è¯¯æŠ¥çš„ 429 é”™è¯¯ã€‚</li>
</ul>
</li>
<li>
<p><strong>Connection Timeout / APIConnectionError</strong></p>
<ul>
<li><strong>å«ä¹‰</strong>ï¼šè¿ä¸ä¸ŠæœåŠ¡å™¨ã€‚</li>
<li><strong>è§£å†³</strong>ï¼šè¿™æ˜¯å›½å†…å¼€å‘è€…æœ€å¤´ç–¼çš„é—®é¢˜ã€‚é€šå¸¸æ˜¯å› ä¸ºç½‘ç»œå¢™çš„åŸå› ã€‚è§£å†³åŠæ³•å°±æ˜¯ä¿®æ”¹ä»£ç ä¸­çš„ <code>base_url</code>ï¼ŒæŒ‡å‘ä¸€ä¸ªå›½å†…è®¿é—®å‹å¥½çš„ä¸­è½¬èŠ‚ç‚¹ï¼ˆå¦‚ä»£ç ä¸­æ¼”ç¤ºçš„ <code>api.4sapi.com</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-7">äº”ã€ è¿›é˜¶ï¼šå¦‚ä½•åƒé«˜æ‰‹ä¸€æ ·ä½¿ç”¨â€œæµå¼è¾“å‡ºâ€ï¼Ÿ</h3>
<p>ä½ æ³¨æ„è¿‡ ChatGPT ç½‘é¡µç‰ˆæ˜¯ä¸€ä¸ªå­—ä¸€ä¸ªå­—è¹¦å‡ºæ¥çš„å—ï¼Ÿè¿™å« <strong>Streamingï¼ˆæµå¼ï¼‰</strong> ã€‚</p>
<p>åœ¨ API ä¸­å®ç°è¿™ä¸ªåŠŸèƒ½éå¸¸ç®€å•ï¼Œåªéœ€è¦æ”¹ä¸¤ä¸ªåœ°æ–¹ï¼š</p>
<p>Python</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># 1. å°† stream è®¾ç½®ä¸º True</span>
<span class="hljs-attr">response</span> = client.chat.completions.create(
    <span class="hljs-attr">model</span>=<span class="hljs-string">"gpt-4"</span>,
    <span class="hljs-attr">messages</span>=[...],
    <span class="hljs-attr">stream</span>=<span class="hljs-literal">True</span>  <span class="hljs-comment"># &lt;--- ä¿®æ”¹è¿™é‡Œ</span>
)

<span class="hljs-comment"># 2. å¾ªç¯å¤„ç†ç”Ÿæˆå™¨</span>
print("AI å›å¤: ", <span class="hljs-attr">end</span>=<span class="hljs-string">""</span>)
for chunk in response:
    if chunk.choices<span class="hljs-section">[0]</span>.delta.content:
        <span class="hljs-comment"># å³æ—¶æ‰“å°æ¯ä¸€ä¸ªç‰‡æ®µ</span>
        print(chunk.choices<span class="hljs-section">[0]</span>.delta.content, <span class="hljs-attr">end</span>=<span class="hljs-string">""</span>, flush=<span class="hljs-literal">True</span>)
</code></pre>
<p><strong>æç¤º</strong>ï¼šæµå¼è¾“å‡ºå¯¹ç½‘ç»œç¨³å®šæ€§è¦æ±‚æé«˜ã€‚å¦‚æœä¸­é—´ä¸¢åŒ…ï¼Œå­—å°±ä¼šæ–­ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆç”Ÿäº§ç¯å¢ƒæ¨èä½¿ç”¨ <strong>4SAPI</strong> çš„åŸå› â€”â€”å…¶ç‰©ç†çº¿è·¯ç´§é‚»ä¸Šæ¸¸æ ¸å¿ƒèŠ‚ç‚¹ï¼Œèƒ½ä¿è¯é•¿è¿æ¥ä¸æ–­å¼€ï¼Œè®©â€œæ‰“å­—æœºæ•ˆæœâ€ä¸èˆ¬é¡ºæ»‘ã€‚</p>
<h3 data-id="heading-8">ç»“è¯­</h3>
<p>æ­å–œä½ ï¼åˆ°è¿™é‡Œï¼Œä½ å·²ç»å®Œæˆäº†ä¸€æ¬¡æ ‡å‡†çš„ API è°ƒç”¨ã€‚</p>
<p>ä½ ä¼šå‘ç°ï¼Œä»£ç çš„æ ¸å¿ƒé€»è¾‘å…¶å®éå¸¸å›ºå®šã€‚çœŸæ­£çš„éš¾ç‚¹å¾€å¾€åœ¨äº<strong>ç½‘ç»œç¯å¢ƒé…ç½®</strong>å’Œ<strong>è´¦å·ç»´æŠ¤</strong>ã€‚å¯¹äºåˆå­¦è€…å’Œä¼ä¸šå¼€å‘è€…ï¼Œé€‰æ‹©ä¸€ä¸ªé…ç½®ç®€å•ã€å…¼å®¹æ€§å¥½çš„åŸºç¡€è®¾æ–½ï¼ˆå¦‚æ–‡ä¸­æ¼”ç¤ºçš„ 4SAPIï¼‰ï¼Œèƒ½å¸®ä½ èŠ‚çœ 90% çš„è°ƒè¯•æ—¶é—´ï¼Œè®©ä½ ä¸“æ³¨äºç¼–å†™ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯å»ä¿®ç½‘ç»œè¿æ¥ã€‚</p>
<p>ç°åœ¨ï¼Œå»è¿è¡Œä»£ç ï¼Œå¼€å¯ä½ çš„ AI å¼€å‘ä¹‹æ—…å§ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å…³äºæ²‰æµ¸å¼çŠ¶æ€æ å’Œå¯¼èˆªæ é€‚é…é—®é¢˜]]></title>    <link>https://juejin.cn/post/7602162809292570662</link>    <guid>https://juejin.cn/post/7602162809292570662</guid>    <pubDate>2026-02-03T03:11:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162809292570662" data-draft-id="7602252722372378675" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å…³äºæ²‰æµ¸å¼çŠ¶æ€æ å’Œå¯¼èˆªæ é€‚é…é—®é¢˜"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-03T03:11:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Z_Quintaz"/> <meta itemprop="url" content="https://juejin.cn/user/4300945219391063"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å…³äºæ²‰æµ¸å¼çŠ¶æ€æ å’Œå¯¼èˆªæ é€‚é…é—®é¢˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4300945219391063/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Z_Quintaz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:11:51.000Z" title="Tue Feb 03 2026 03:11:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">WindowCompact</h2>
<p>windowCompactæœ‰ä¸‰ä¸ªæ–¹æ³•</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-comment">// æ˜¯å¦å°†å†…å®¹å¸ƒå±€è¶…å‡ºçŠ¶æ€æ </span>
WindowCompat.setDecorFitsSystemWindows(Window, <span class="hljs-built_in">Boolean</span>)

<span class="hljs-comment">// è·å–Insetsæ§åˆ¶å™¨</span>
WindowCompat.getInsetsController(Window, View)

<span class="hljs-comment">// æ˜¯å¦èƒ½å¤Ÿå°†ç”»é¢è¶…å‡ºç³»ç»Ÿæ </span>
WindowCompat.enableEdgeToEdge(Window)
</code></pre>
<p>æ²‰æµ¸å¼çŠ¶æ€æ å®ç°</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> Window.<span class="hljs-title">setTransparentStatusBar</span><span class="hljs-params">(isLight: <span class="hljs-type">Boolean</span>)</span></span> {
    WindowCompat.setDecorFitsSystemWindows(<span class="hljs-keyword">this</span>, <span class="hljs-literal">false</span>)

    statusBarColor = Color.TRANSPARENT

    WindowCompat.getInsetsController(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">this</span>.decorView).apply {
        isAppearanceLightStatusBars = isLight
    }
}
</code></pre>
<p>å¤„ç†å†…å®¹çš„åç§»</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> View.<span class="hljs-title">handleContentPadding</span><span class="hljs-params">()</span></span> {
    ViewCompat.setOnApplyWindowInsetsListener(<span class="hljs-keyword">this</span>) { v, insets -&gt;
        <span class="hljs-keyword">val</span> systemWindow = insets.getInsets(
            WindowInsetsCompat.Type.systemBars() or
                    WindowInsetsCompat.Type.displayCutout())

        <span class="hljs-comment">//ä¸ºéœ€è¦åç§»çš„viewè®¾ç½®padding</span>
        v.setPadding(<span class="hljs-number">0</span>,systemWindow.top,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>)

        insets
    }
}
</code></pre>
<p>å…¶ä¸­WindowInsetsCompat.Type å‚æ•°è§£é‡Šï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">WindowInsetsCompat.Type.ime()<span class="hljs-comment">//é”®ç›˜</span>
WindowInsetsCompat.Type.displayCutout()<span class="hljs-comment">//åˆ˜æµ·å±</span>
WindowInsetsCompat.Type.statusBars()<span class="hljs-comment">//çŠ¶æ€æ </span>
WindowInsetsCompat.Type.navigationBars()<span class="hljs-comment">//å¯¼èˆªæ </span>
WindowInsetsCompat.Type.captionBar()<span class="hljs-comment">//æ ‡é¢˜æ </span>
WindowInsetsCompat.Type.systemBars()<span class="hljs-comment">//çŠ¶æ€æ ,å¯¼èˆªæ å’Œæ ‡é¢˜æ </span>
WindowInsetsCompat.Type.systemGestures()<span class="hljs-comment">//ç³»ç»Ÿæ‰‹åŠ¿</span>
WindowInsetsCompat.Type.mandatorySystemGestures()<span class="hljs-comment">//å¼ºåˆ¶æ€§ç³»ç»Ÿæ‰‹åŠ¿</span>
WindowInsetsCompat.Type.tappableElement()<span class="hljs-comment">//å¯ç‚¹å‡»åŒºåŸŸ</span>
</code></pre>
<h3 data-id="heading-1">é¡ºå¸¦ä¸€æ</h3>
<p>çœ‹äº†ä¸‹å®‰å“æ–°å»ºé¡¹ç›®æ—¶å‡ºç°çš„æ–¹æ³•ï¼Œè°·æ­Œå¸®æˆ‘ä»¬åšäº†ä¸€äº›å¯¹ç³»ç»Ÿæ çš„å¤„ç†</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> ComponentActivity.<span class="hljs-title">enableEdgeToEdge</span><span class="hljs-params">(
    statusBarStyle: <span class="hljs-type">SystemBarStyle</span> = SystemBarStyle.auto(Color.TRANSPARENT, Color.TRANSPARENT)</span></span>,
    navigationBarStyle: SystemBarStyle = SystemBarStyle.auto(DefaultLightScrim, DefaultDarkScrim),
) {
    <span class="hljs-keyword">val</span> view = window.decorView
    <span class="hljs-keyword">val</span> statusBarIsDark = statusBarStyle.detectDarkMode(view.resources)
    <span class="hljs-keyword">val</span> navigationBarIsDark = navigationBarStyle.detectDarkMode(view.resources)
    <span class="hljs-keyword">val</span> impl =
        Impl
            ?: (<span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">35</span>) {
                    EdgeToEdgeApi35()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">30</span>) {
                    EdgeToEdgeApi30()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">29</span>) {
                    EdgeToEdgeApi29()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">28</span>) {
                    EdgeToEdgeApi28()
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= <span class="hljs-number">26</span>) {
                    EdgeToEdgeApi26()
                } <span class="hljs-keyword">else</span> {
                    EdgeToEdgeApi23()
                })
                .also { Impl = it }
    impl.setUp(
        statusBarStyle,
        navigationBarStyle,
        window,
        view,
        statusBarIsDark,
        navigationBarIsDark,
    )
    impl.adjustLayoutInDisplayCutoutMode(window)
}
</code></pre>
<p>å…¶ä¸­åŒ…å«äº†æ²‰æµ¸çŠ¶æ€æ ï¼ŒåŒæ—¶æ ¹æ®ç³»ç»Ÿä¸»é¢˜å¤„ç†äº†çŠ¶æ€æ çš„äº®æš—å…³ç³»ã€‚æ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

    enableEdgeToEdge()

    setContentView(R.layout.activity_main)
}
</code></pre>
<p>è¿™æ ·åšä¹‹åå¯ä»¥ä¿è¯æˆ‘ä»¬çš„å†…å®¹å¯ä»¥å……æ»¡æ•´ä¸ªå±å¹•ï¼Œè‡³äºè¯´è¾¹è·é—®é¢˜ï¼Œç›´æ¥æ·»åŠ paddingå°±å¯ä»¥äº†ã€‚å®Œæ•´å¦‚ä¸‹</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> mBinding: ActivityMainBinding

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        enableEdgeToEdge()

        mBinding = DataBindingUtil.setContentView(<span class="hljs-keyword">this</span>, R.layout.activity_main)

        window.decorView.setPadding(
            window.decorView.paddingLeft,
            window.decorView.paddingTop,
            window.decorView.paddingRight,
            <span class="hljs-comment">// å¯¹å¯¼èˆªæ è¿›è¡Œpadding</span>
            window.decorView.paddingBottom + BarUtils.getNavBarHeight()
        )
    }

}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[26åˆ†é’Ÿå°±æ–­è¿ï¼Ÿä¸€æ¬¡ MySQL â€œå¹½çµæ‰çº¿â€ çš„æ·±åº¦ç ´å±€ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7602158221851754511</link>    <guid>https://juejin.cn/post/7602158221851754511</guid>    <pubDate>2026-02-03T03:29:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602158221851754511" data-draft-id="7602158221851721743" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="26åˆ†é’Ÿå°±æ–­è¿ï¼Ÿä¸€æ¬¡ MySQL â€œå¹½çµæ‰çº¿â€ çš„æ·±åº¦ç ´å±€ä¹‹è·¯"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T03:29:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç é€”å±±æµ·"/> <meta itemprop="url" content="https://juejin.cn/user/1143959165085032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            26åˆ†é’Ÿå°±æ–­è¿ï¼Ÿä¸€æ¬¡ MySQL â€œå¹½çµæ‰çº¿â€ çš„æ·±åº¦ç ´å±€ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1143959165085032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç é€”å±±æµ·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:29:22.000Z" title="Tue Feb 03 2026 03:29:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>é—®é¢˜ç°è±¡</strong>ï¼šç³»ç»Ÿåœ¨ç©ºé—²ä¸€æ®µæ—¶é—´åï¼Œé¦–æ¬¡è®¿é—®æ•°æ®åº“æ—¶æŠ¥é”™Â <code>Communications link failure</code>ï¼Œé”™è¯¯æ—¥å¿—æ˜¾ç¤ºâ€œLast packet received was 1,594,079 milliseconds agoï¼ˆçº¦26åˆ†é’Ÿï¼‰â€ã€‚å³ä½¿é…ç½®äº†è¿æ¥æ± éªŒè¯ï¼Œé—®é¢˜ä¾ç„¶åå¤å‡ºç°ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†å®Œæ•´å¤ç›˜è¯¥é—®é¢˜çš„<strong>æ’æŸ¥æ€è·¯ã€è¸©è¿‡çš„å‘ã€æœ€ç»ˆè§£å†³æ–¹æ¡ˆ</strong>ï¼Œå¹¶è¯¦è§£ Druid è¿æ¥æ± å…³é”®å‚æ•°é…ç½®ï¼Œå¸®åŠ©å¤§å®¶é¿å…é‡è¹ˆè¦†è¾™ã€‚</p>
<hr/>
<h2 data-id="heading-0">Â ä¸€ã€é—®é¢˜åˆç°ï¼šä¸åªæ˜¯â€œè¶…æ—¶â€é‚£ä¹ˆç®€å•</h2>
<p>æœ€åˆï¼Œæˆ‘ä»¬çœ‹åˆ°å…¸å‹çš„ MySQL é€šä¿¡å¼‚å¸¸ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">Caused <span class="hljs-keyword">by</span>: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure
The last packet successfully received <span class="hljs-keyword">from</span> the server was <span class="hljs-number">1</span>,<span class="hljs-number">594</span>,<span class="hljs-number">079</span> milliseconds ago.
</code></pre>
<p>ç›´è§‰å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>æ•°æ®åº“è¿æ¥è¢«æ–­å¼€äº†</strong>ã€‚<br/>
äºæ˜¯æˆ‘ä»¬æ£€æŸ¥äº† MySQL çš„Â <code>wait_timeout</code>Â å’ŒÂ <code>interactive_timeout</code>ï¼Œå‘ç°å‡ä¸ºÂ <code>7200</code>Â ç§’ï¼ˆ2å°æ—¶ï¼‰â€”â€”è¿œå¤§äº 26 åˆ†é’Ÿã€‚</p>
<p><strong>ç»“è®º</strong>ï¼šä¸æ˜¯ MySQL ä¸»åŠ¨æ–­è¿ï¼Œè€Œæ˜¯<strong>ä¸­é—´ç½‘ç»œè®¾å¤‡ï¼ˆå¦‚äº‘å‚å•† SLBã€NAT ç½‘å…³ã€é˜²ç«å¢™ï¼‰åœ¨ç©ºé—²çº¦ 15â€“30 åˆ†é’Ÿååˆ‡æ–­äº† TCP è¿æ¥</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ç¬¬ä¸€æ¬¡å°è¯•ï¼šé…ç½®è¿æ¥æ± éªŒè¯</h2>
<p>æˆ‘ä»¬ç«‹å³ä¸º Druid è¿æ¥æ± æ·»åŠ äº†åŸºç¡€é˜²æŠ¤ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet">test-<span class="hljs-keyword">on</span>-borrow:Â <span class="hljs-literal">true</span>
validation-query:Â <span class="hljs-keyword">SELECT</span>Â <span class="hljs-number">1</span>Â <span class="hljs-keyword">FROM</span>Â DUAL
min-evictable-idle-time-millis:Â <span class="hljs-number">300000</span>Â  # <span class="hljs-number">5</span>åˆ†é’Ÿ
test-<span class="hljs-keyword">while</span>-idle:Â <span class="hljs-literal">true</span>
</code></pre>
<p><strong>é¢„æœŸæ•ˆæœ</strong>ï¼šæ¯æ¬¡å€Ÿå‡ºè¿æ¥å‰å…ˆéªŒè¯ï¼Œç¡®ä¿è¿æ¥æœ‰æ•ˆã€‚</p>
<p><strong>ç»“æœ</strong>ï¼šé—®é¢˜ä¾æ—§ï¼æ›´è¯¡å¼‚çš„æ˜¯ï¼Œæ—¥å¿—ä¸­å¼€å§‹é¢‘ç¹å‡ºç°ï¼š</p>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-keyword">ERROR</span> druid.sql.Statement - execute <span class="hljs-keyword">error</span>. <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span> <span class="hljs-keyword">FROM</span> DUAL
</code></pre>
<p>è¿™è¯´æ˜ï¼š<strong>Druid ç¡®å®åœ¨éªŒè¯è¿æ¥ï¼Œä½†éªŒè¯æœ¬èº«å¤±è´¥äº†</strong>â€”â€”è¿æ¥å·²è¢«ç½‘ç»œä¸­æ–­ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æ·±å…¥æ’æŸ¥ï¼šä¸ºä»€ä¹ˆéªŒè¯å¤±è´¥è¿˜ä¼šæŠ¥ä¸šåŠ¡é”™è¯¯ï¼Ÿ</h2>
<p>é€šè¿‡åˆ†æ Druid æºç å’Œæ—¥å¿—ï¼Œæˆ‘ä»¬å‘ç°ï¼š</p>
<ul>
<li>â€¢ è™½ç„¶Â <code>test-on-borrow=true</code>Â èƒ½æ£€æµ‹åˆ°åè¿æ¥ï¼Œ</li>
<li>â€¢ ä½†<strong>é»˜è®¤æƒ…å†µä¸‹ï¼ŒéªŒè¯å¤±è´¥ä¼šç›´æ¥æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œä¸ä¼šè‡ªåŠ¨é‡è¯•ï¼</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼šç”¨æˆ·è¯·æ±‚ä¼šç›´æ¥å¤±è´¥ï¼Œä½“éªŒæå·®ã€‚</p>
<p><strong>å…³é”®çªç ´</strong>ï¼šå¯ç”¨ Druid çš„Â <strong>å¼‚å¸¸åˆ†ç±»å™¨ï¼ˆException Sorterï¼‰</strong> ï¼Œè®©è¿æ¥æ± èƒ½è¯†åˆ«â€œå¯æ¢å¤çš„ç½‘ç»œå¼‚å¸¸â€ï¼Œå¹¶è‡ªåŠ¨é‡è¯•è·å–æ–°è¿æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼šä¸‰é‡é˜²æŠ¤ä½“ç³»</h2>
<h3 data-id="heading-4">1ã€å¯ç”¨ MySQL å¼‚å¸¸åˆ†ç±»å™¨ï¼ˆæ ¸å¿ƒï¼ï¼‰</h3>
<p>åœ¨Â <code>connection-properties</code>Â ä¸­æ˜¾å¼æŒ‡å®šï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">connection-properties:</span>
Â  druid.exceptionSorter:Â com.alibaba.druid.pool.vendor.MySqlExceptionSorter
</code></pre>
<blockquote>
<p>âœ… ä½œç”¨ï¼šå½“Â <code>SELECT 1</code>Â éªŒè¯å¤±è´¥æ—¶ï¼ŒDruid ä¼šè¯†åˆ«è¿™æ˜¯â€œç½‘ç»œæ–­è¿â€è€Œé SQL é”™è¯¯ï¼Œè‡ªåŠ¨ discard åè¿æ¥ï¼Œå¹¶<strong>é‡è¯•è·å–æ–°è¿æ¥</strong>ï¼Œå¯¹ä¸šåŠ¡é€æ˜ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">2ã€åˆç†è®¾ç½®ç©ºé—²å›æ”¶æ—¶é—´</h3>
<p>æ ¹æ®ç½‘ç»œè®¾å¤‡è¶…æ—¶ï¼ˆçº¦ 26 åˆ†é’Ÿï¼‰ï¼Œæˆ‘ä»¬å°†ç©ºé—²æ—¶é—´è®¾ä¸ºÂ <strong>10â€“15 åˆ†é’Ÿ</strong>ï¼Œç•™è¶³å®‰å…¨ä½™é‡ï¼š</p>
<pre><code class="hljs language-perl" lang="perl">min-evictable-idle-<span class="hljs-keyword">time</span>-millis:Â <span class="hljs-number">600000</span>Â  Â <span class="hljs-comment"># 10åˆ†é’Ÿ</span>
max-evictable-idle-<span class="hljs-keyword">time</span>-millis:Â <span class="hljs-number">900000</span>Â  Â <span class="hljs-comment"># 15åˆ†é’Ÿ</span>
<span class="hljs-keyword">time</span>-between-eviction-runs-millis:Â <span class="hljs-number">30000</span>Â <span class="hljs-comment"># æ¯30ç§’æ£€æŸ¥ä¸€æ¬¡</span>
</code></pre>
<blockquote>
<p>âœ… ä½œç”¨ï¼šåœ¨è¿æ¥è¢«ç½‘ç»œä¸­æ–­å‰ï¼Œä¸»åŠ¨å›æ”¶ï¼Œå¤§å¹…é™ä½éªŒè¯å¤±è´¥æ¦‚ç‡ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">3ã€å…³é—­ç”Ÿäº§ç¯å¢ƒçš„Â <code>removeAbandoned</code>ï¼ˆé‡è¦ï¼ï¼‰</h3>
<p>åˆæœŸæˆ‘ä»¬å¯ç”¨äº†ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">remove-abandoned:Â <span class="hljs-literal">true</span>
remove-abandoned-timeout-millis:Â <span class="hljs-number">180000</span>Â # <span class="hljs-number">3</span>åˆ†é’Ÿ
</code></pre>
<p>ä½† Druid æ—¥å¿—è­¦å‘Šï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">WARN - removeAbandoned <span class="hljs-keyword">is</span> <span class="hljs-literal">true</span>, <span class="hljs-keyword">not</span> use <span class="hljs-keyword">in</span> production.
</code></pre>
<p><strong>åŸå› </strong>ï¼šå®ƒå¯èƒ½è¯¯æ€çœŸæ­£çš„é•¿äº‹åŠ¡ï¼ˆå¦‚è€—æ—¶ 5 åˆ†é’Ÿçš„æŠ¥è¡¨å¯¼å‡ºï¼‰ï¼Œå¯¼è‡´Â <code>Communications link failure</code>ã€‚</p>
<blockquote>
<p>âœ…Â <strong>ç”Ÿäº§ç¯å¢ƒå¿…é¡»å…³é—­</strong>ï¼Œæ”¹ç”¨è‰¯å¥½ç¼–ç è§„èŒƒï¼ˆå¦‚ Spring äº‹åŠ¡ã€try-with-resourcesï¼‰é˜²æ­¢æ³„æ¼ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-7">äº”ã€Druid å…³é”®å‚æ•°è¯¦è§£ï¼ˆç”Ÿäº§æ¨èé…ç½®ï¼‰</h2>













































<table><thead><tr><th>å‚æ•°</th><th>æ¨èå€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>test-on-borrow</code></td><td><code>true</code></td><td><strong>å€Ÿå‡ºæ—¶éªŒè¯</strong>ï¼Œç¡®ä¿è¿æ¥æœ‰æ•ˆï¼ˆç‰ºç‰²å¾®ç§’çº§æ€§èƒ½ï¼Œæ¢ç¨³å®šæ€§ï¼‰</td></tr><tr><td><code>validation-query</code></td><td><code>SELECT 1</code></td><td>è½»é‡éªŒè¯ SQLï¼Œæ¯”Â <code>SELECT 1 FROM DUAL</code>Â æ›´æ ‡å‡†</td></tr><tr><td><code>min-evictable-idle-time-millis</code></td><td><code>600000</code>Â (10åˆ†é’Ÿ)</td><td>å¿…é¡»Â  <strong>&lt; ç½‘ç»œè®¾å¤‡è¶…æ—¶</strong>ï¼ˆå¦‚é˜¿é‡Œäº‘ SLB é»˜è®¤ 15 åˆ†é’Ÿï¼‰</td></tr><tr><td><code>exceptionSorter</code></td><td><code>MySqlExceptionSorter</code></td><td><strong>è‡ªåŠ¨è¯†åˆ«ç½‘ç»œå¼‚å¸¸ï¼Œè§¦å‘é‡è¯•</strong>ï¼ˆè§£å†³éªŒè¯å¤±è´¥ä»æŠ¥é”™çš„å…³é”®ï¼ï¼‰</td></tr><tr><td><code>remove-abandoned</code></td><td><code>false</code></td><td><strong>ç”Ÿäº§ç¯å¢ƒç¦ç”¨</strong>ï¼Œé¿å…è¯¯æ€é•¿äº‹åŠ¡</td></tr><tr><td><code>keep-alive</code></td><td><code>true</code></td><td>å¯ç”¨ Druid å†…éƒ¨ä¿æ´»æœºåˆ¶</td></tr><tr><td><code>filters</code></td><td><code>stat,wall,slf4j</code></td><td>å¼€å¯ SQL ç›‘æ§ã€é˜²ç«å¢™ã€ç»Ÿä¸€æ—¥å¿—</td></tr></tbody></table>
<p>å®Œæ•´é…ç½®ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">dynamic:
Â  druid:
Â  Â  initial-size:Â <span class="hljs-number">10</span>
Â  Â  min-idle:Â <span class="hljs-number">10</span>
Â  Â  max-active:Â <span class="hljs-number">40</span>
Â  Â  max-wait:Â <span class="hljs-number">30000</span>

Â  Â  time-between-eviction-runs-millis:Â <span class="hljs-number">30000</span>
Â  Â  min-evictable-idle-time-millis:Â <span class="hljs-number">600000</span>
Â  Â  max-evictable-idle-time-millis:Â <span class="hljs-number">900000</span>

Â  Â  validation-query:Â SELECTÂ <span class="hljs-number">1</span>
Â  Â  validation-query-timeout:Â <span class="hljs-number">3</span>
Â  Â  test-<span class="hljs-keyword">while</span>-idle:Â <span class="hljs-literal">true</span>
Â  Â  test-on-borrow:Â <span class="hljs-literal">true</span>
Â  Â  test-on-<span class="hljs-keyword">return</span>:Â <span class="hljs-literal">false</span>

Â  Â  # æ ¸å¿ƒï¼šè‡ªåŠ¨å¤„ç†ç½‘ç»œæ–­è¿
Â  Â  connection-properties:
Â  Â  Â  druid.exceptionSorter:Â com.alibaba.druid.pool.vendor.MySqlExceptionSorter
Â  Â  Â  druid.stat.mergeSql:Â <span class="hljs-literal">true</span>
Â  Â  Â  druid.stat.slowSqlMillis:Â <span class="hljs-number">5000</span>

Â  Â  filters:Â stat,wall,slf4j
Â  Â  keep-alive:Â <span class="hljs-literal">true</span>
Â  Â  pool-prepared-statements:Â <span class="hljs-literal">true</span>
Â  Â  max-pool-prepared-statement-per-connection-size:Â <span class="hljs-number">20</span>

Â  Â  # ç”Ÿäº§ç¯å¢ƒå…³é—­æ³„æ¼å›æ”¶
Â  Â  remove-abandoned:Â <span class="hljs-literal">false</span>
Â  Â  log-abandoned:Â <span class="hljs-literal">false</span>
</code></pre>
<hr/>
<h2 data-id="heading-8">å…­ã€ç»éªŒæ€»ç»“</h2>
<ol>
<li>1.Â <strong>ä¸è¦åªçœ‹ MySQL è¶…æ—¶</strong>ï¼šäº‘ç¯å¢ƒã€NATã€é˜²ç«å¢™æ‰æ˜¯â€œéšå½¢æ€æ‰‹â€ï¼›</li>
<li>2.Â <strong><code>test-on-borrow=true</code>Â æ˜¯åŸºç¡€ï¼Œä½†ä¸å¤Ÿ</strong>ï¼šå¿…é¡»é…åˆÂ <code>exceptionSorter</code>Â æ‰èƒ½è‡ªåŠ¨é‡è¯•ï¼›</li>
<li>3.Â <strong>ç”Ÿäº§ç¯å¢ƒç¦ç”¨Â <code>removeAbandoned</code></strong>ï¼šå®ƒæ²»æ ‡ä¸æ²»æœ¬ï¼Œè¿˜å¯èƒ½å¼•å‘æ–°é—®é¢˜ï¼›</li>
<li>4.Â <strong>è¿æ¥æ± é…ç½®è¦â€œé€‚é…ç½‘ç»œâ€</strong> ï¼š<code>minEvictableIdleTimeMillis</code>Â å¿…é¡»å°äºä¸­é—´è®¾å¤‡è¶…æ—¶ï¼›</li>
<li>5.Â <strong>é•¿äº‹åŠ¡è¦æ‹†åˆ†</strong>ï¼šé¿å…åœ¨Â <code>@Transactional</code>Â æ–¹æ³•ä¸­è°ƒç”¨å¤–éƒ¨è€—æ—¶æ¥å£ã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-9">ä¸ƒã€ç»“è¯­</h2>
<p>æ•°æ®åº“è¿æ¥æ–­è¿é—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œå®åˆ™æ¶‰åŠÂ <strong>ç½‘ç»œã€è¿æ¥æ± ã€é©±åŠ¨ã€ä¸šåŠ¡ä»£ç </strong>Â å¤šå±‚åä½œã€‚åªæœ‰ç†è§£æ¯ä¸€å±‚çš„è¡Œä¸ºï¼Œæ‰èƒ½æ„å»ºçœŸæ­£é«˜å¯ç”¨çš„ç³»ç»Ÿã€‚</p>
<p>å¸Œæœ›æœ¬æ–‡èƒ½å¸®ä½ å°‘èµ°å¼¯è·¯ã€‚å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œæ¬¢è¿è½¬å‘ç»™å›¢é˜ŸåŒå­¦ï¼Œä¸€èµ·æå‡ç³»ç»Ÿç¨³å®šæ€§ï¼</p>
<blockquote>
<p><strong>æŠ€æœ¯æ— å°äº‹ï¼Œç»†èŠ‚å®šæˆè´¥</strong>ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åµŒå…¥å¼Linnxçš„å¼€å‘]]></title>    <link>https://juejin.cn/post/7602259669730213915</link>    <guid>https://juejin.cn/post/7602259669730213915</guid>    <pubDate>2026-02-03T03:29:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669730213915" data-draft-id="7602303923140001842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åµŒå…¥å¼Linnxçš„å¼€å‘"/> <meta itemprop="keywords" content="åç«¯,åµŒå…¥å¼"/> <meta itemprop="datePublished" content="2026-02-03T03:29:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜è‰¯è®¸"/> <meta itemprop="url" content="https://juejin.cn/user/3913917128246942"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åµŒå…¥å¼Linnxçš„å¼€å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3913917128246942/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜è‰¯è®¸
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:29:09.000Z" title="Tue Feb 03 2026 03:29:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯è‰¯è®¸ã€‚</p>
<p>ä»Šå¤©å’±ä»¬æ¥èŠèŠåµŒå…¥å¼Linuxå¼€å‘è¿™ä¸ªè¯é¢˜ã€‚</p>
<p>è¯´å®è¯ï¼Œæˆ‘ä»æœºæ¢°è½¬è¡ŒåšåµŒå…¥å¼è¿™ä¹ˆå¤šå¹´ï¼Œæœ€è®©æˆ‘è§‰å¾—æœ‰æ„æ€çš„å°±æ˜¯åµŒå…¥å¼Linuxè¿™å—ã€‚</p>
<p>ç›¸æ¯”å•ç‰‡æœºå¼€å‘ï¼ŒLinuxç³»ç»Ÿç»™äº†æˆ‘ä»¬æ›´å¼ºå¤§çš„åŠŸèƒ½å’Œæ›´çµæ´»çš„å¼€å‘æ–¹å¼ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†æ›´å¤šçš„æŒ‘æˆ˜ã€‚</p>
<h2 data-id="heading-0">1. ä»€ä¹ˆæ˜¯åµŒå…¥å¼Linuxå¼€å‘</h2>
<h3 data-id="heading-1">1.1 åµŒå…¥å¼Linuxçš„å®šä¹‰</h3>
<p>åµŒå…¥å¼Linuxå¼€å‘ï¼Œç®€å•æ¥è¯´å°±æ˜¯æŠŠLinuxæ“ä½œç³»ç»Ÿç§»æ¤åˆ°åµŒå…¥å¼è®¾å¤‡ä¸Šï¼Œç„¶ååœ¨è¿™ä¸ªç³»ç»Ÿä¸Šå¼€å‘åº”ç”¨ç¨‹åºæˆ–è€…é©±åŠ¨ç¨‹åºã€‚</p>
<p>è¿™é‡Œçš„åµŒå…¥å¼è®¾å¤‡å¯ä»¥æ˜¯æ™ºèƒ½æ‰‹æœºã€è·¯ç”±å™¨ã€å·¥ä¸šæ§åˆ¶å™¨ã€æ±½è½¦ç”µå­è®¾å¤‡ç­‰ç­‰ã€‚</p>
<p>æˆ‘åœ¨å¤–ä¼åšçš„æ±½è½¦ç”µå­é¡¹ç›®ï¼Œç”¨çš„å°±æ˜¯åµŒå…¥å¼Linuxç³»ç»Ÿã€‚</p>
<p>å’Œæˆ‘ä»¬å¹³æ—¶ç”¨çš„Ubuntuã€CentOSè¿™äº›æ¡Œé¢Linuxä¸åŒï¼ŒåµŒå…¥å¼Linuxé€šå¸¸éœ€è¦ç»è¿‡è£å‰ªå’Œå®šåˆ¶ï¼Œå› ä¸ºåµŒå…¥å¼è®¾å¤‡çš„èµ„æºå¾€å¾€æ¯”è¾ƒæœ‰é™ã€‚</p>
<p>æ¯”å¦‚å†…å­˜å¯èƒ½åªæœ‰å‡ ç™¾MBï¼Œå­˜å‚¨ç©ºé—´ä¹Ÿå°±å‡ ä¸ªGBï¼Œä¸åƒæœåŠ¡å™¨é‚£æ ·åŠ¨ä¸åŠ¨å°±å‡ åGBå†…å­˜ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠä¸å¿…è¦çš„åŠŸèƒ½å»æ‰ï¼Œåªä¿ç•™æ ¸å¿ƒçš„éƒ¨åˆ†ã€‚</p>
<h3 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆé€‰æ‹©Linux</h3>
<p>ä½ å¯èƒ½ä¼šé—®ï¼Œä¸ºä»€ä¹ˆä¸ç”¨å•ç‰‡æœºçš„RTOSï¼Œéè¦ç”¨Linuxå‘¢?</p>
<p>è¿™ä¸ªé—®é¢˜æˆ‘å½“å¹´ä¹Ÿé—®è¿‡è‡ªå·±ã€‚</p>
<p>åæ¥å‘ç°ï¼Œå½“ä½ çš„é¡¹ç›®éœ€è¦ç½‘ç»œé€šä¿¡ã€æ–‡ä»¶ç³»ç»Ÿã€å¤šè¿›ç¨‹ç®¡ç†è¿™äº›åŠŸèƒ½çš„æ—¶å€™ï¼ŒLinuxçš„ä¼˜åŠ¿å°±ä½“ç°å‡ºæ¥äº†ã€‚</p>
<p>Linuxæœ‰æˆç†Ÿçš„TCP/IPåè®®æ ˆï¼Œæœ‰å®Œå–„çš„æ–‡ä»¶ç³»ç»Ÿæ”¯æŒï¼Œæœ‰å¼ºå¤§çš„è¿›ç¨‹ç®¡ç†æœºåˆ¶ï¼Œè¿™äº›éƒ½æ˜¯RTOSå¾ˆéš¾æ¯”æ‹Ÿçš„ã€‚</p>
<p>è€Œä¸”Linuxæ˜¯å¼€æºçš„ï¼Œç¤¾åŒºæ”¯æŒéå¸¸å¥½ã€‚</p>
<p>é‡åˆ°é—®é¢˜åŸºæœ¬ä¸Šéƒ½èƒ½åœ¨ç½‘ä¸Šæ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚</p>
<p>æˆ‘è®°å¾—åˆšå¼€å§‹åšLinuxå¼€å‘çš„æ—¶å€™ï¼Œç»å¸¸åŠå¤œçˆ¬èµ·æ¥æŸ¥èµ„æ–™ï¼Œå¾ˆå¤šé—®é¢˜éƒ½æ˜¯åœ¨Linuxå†…æ ¸é‚®ä»¶åˆ—è¡¨æˆ–è€…Stack Overflowä¸Šæ‰¾åˆ°ç­”æ¡ˆçš„ã€‚</p>
<h2 data-id="heading-3">2. åµŒå…¥å¼Linuxå¼€å‘çš„æ ¸å¿ƒå†…å®¹</h2>
<h3 data-id="heading-4">2.1 Bootloaderå¼€å‘</h3>
<p>Bootloaderæ˜¯ç³»ç»Ÿå¯åŠ¨çš„ç¬¬ä¸€ä¸ªç¨‹åºï¼Œå®ƒçš„ä¸»è¦ä»»åŠ¡æ˜¯åˆå§‹åŒ–ç¡¬ä»¶ï¼Œç„¶åæŠŠLinuxå†…æ ¸åŠ è½½åˆ°å†…å­˜ä¸­è¿è¡Œã€‚</p>
<p>æœ€å¸¸ç”¨çš„Bootloaderæ˜¯U-Boot,å®ƒæ”¯æŒå¾ˆå¤šç§å¤„ç†å™¨æ¶æ„ï¼ŒåŒ…æ‹¬ARMã€MIPSã€PowerPCç­‰ç­‰ã€‚</p>
<p>æˆ‘åœ¨åšé¡¹ç›®çš„æ—¶å€™ï¼Œç»å¸¸éœ€è¦ä¿®æ”¹U-Bootæ¥é€‚é…æˆ‘ä»¬çš„ç¡¬ä»¶æ¿å­ã€‚</p>
<p>æ¯”å¦‚é…ç½®å†…å­˜å¤§å°ã€è®¾ç½®å¯åŠ¨å‚æ•°ã€æ·»åŠ æ–°çš„ç¡¬ä»¶é©±åŠ¨ç­‰ç­‰ã€‚</p>
<p>U-Bootçš„é…ç½®æ–‡ä»¶é€šå¸¸åœ¨<code>include/configs/</code>ç›®å½•ä¸‹ï¼Œä½ éœ€è¦æ ¹æ®è‡ªå·±çš„ç¡¬ä»¶åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœä½ è¦è®¾ç½®å†…æ ¸å¯åŠ¨å‚æ•°ï¼Œå¯ä»¥åœ¨U-Bootçš„ç¯å¢ƒå˜é‡ä¸­è¿™æ ·è®¾ç½®:</p>
<pre><code class="hljs language-bash" lang="bash">setenv bootargs <span class="hljs-string">'console=ttymxc0,115200 root=/dev/mmcblk0p2 rootwait rw'</span>
saveenv
</code></pre>
<p>è¿™æ¡å‘½ä»¤è®¾ç½®äº†ä¸²å£æ§åˆ¶å°ã€æ ¹æ–‡ä»¶ç³»ç»Ÿçš„ä½ç½®ç­‰ä¿¡æ¯ã€‚</p>
<p><code>console=ttymxc0,115200</code>è¡¨ç¤ºä½¿ç”¨ttymxc0è¿™ä¸ªä¸²å£ï¼Œæ³¢ç‰¹ç‡æ˜¯115200ã€‚</p>
<p><code>root=/dev/mmcblk0p2</code>è¡¨ç¤ºæ ¹æ–‡ä»¶ç³»ç»Ÿåœ¨SDå¡çš„ç¬¬äºŒä¸ªåˆ†åŒºã€‚</p>
<h3 data-id="heading-5">2.2 Linuxå†…æ ¸ç§»æ¤ä¸é…ç½®</h3>
<p>å†…æ ¸æ˜¯æ•´ä¸ªç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ƒè´Ÿè´£ç®¡ç†ç¡¬ä»¶èµ„æºã€æä¾›ç³»ç»Ÿè°ƒç”¨æ¥å£ã€‚</p>
<p>ç§»æ¤å†…æ ¸çš„ç¬¬ä¸€æ­¥æ˜¯ä¸‹è½½å†…æ ¸æºç ï¼Œç„¶åæ ¹æ®ä½ çš„ç¡¬ä»¶å¹³å°è¿›è¡Œé…ç½®ã€‚</p>
<p>Linuxå†…æ ¸çš„é…ç½®ä½¿ç”¨çš„æ˜¯Kconfigç³»ç»Ÿï¼Œä½ å¯ä»¥é€šè¿‡<code>make menuconfig</code>å‘½ä»¤æ¥è¿›è¡Œå›¾å½¢åŒ–é…ç½®ã€‚</p>
<p>é…ç½®é¡¹éå¸¸å¤šï¼ŒåŒ…æ‹¬CPUæ¶æ„ã€è®¾å¤‡é©±åŠ¨ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œåè®®ç­‰ç­‰ã€‚</p>
<p>å¯¹äºåµŒå…¥å¼ç³»ç»Ÿï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦æŠŠä¸éœ€è¦çš„åŠŸèƒ½å»æ‰ï¼Œä»¥å‡å°å†…æ ¸çš„å¤§å°ã€‚</p>
<p>æ¯”å¦‚ï¼Œå¦‚æœä½ çš„è®¾å¤‡ä¸éœ€è¦è“ç‰™åŠŸèƒ½ï¼Œå°±å¯ä»¥åœ¨é…ç½®ä¸­æŠŠè“ç‰™ç›¸å…³çš„é€‰é¡¹å»æ‰ã€‚</p>
<p>å¦‚æœä¸éœ€è¦æŸäº›æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥ä¸ç¼–è¯‘è¿›å†…æ ¸ã€‚</p>
<p>æˆ‘åšé¡¹ç›®çš„æ—¶å€™ï¼Œé€šå¸¸ä¼šå…ˆç”¨é»˜è®¤é…ç½®ç¼–è¯‘ä¸€ä¸ªå†…æ ¸ï¼Œç„¶åé€æ­¥è£å‰ªï¼Œæœ€ç»ˆæŠŠå†…æ ¸å¤§å°ä»åå‡ MBå‡å°åˆ°å‡ MBã€‚</p>
<p>ç¼–è¯‘å†…æ ¸çš„å‘½ä»¤é€šå¸¸æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-bash" lang="bash">make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- zImage
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- dtbs
make ARCH=arm CROSS_COMPILE=arm-linux-gnueabihf- modules
</code></pre>
<p>ç¬¬ä¸€æ¡å‘½ä»¤ç¼–è¯‘å†…æ ¸é•œåƒï¼Œç¬¬äºŒæ¡ç¼–è¯‘è®¾å¤‡æ ‘ï¼Œç¬¬ä¸‰æ¡ç¼–è¯‘å†…æ ¸æ¨¡å—ã€‚</p>
<p><code>ARCH=arm</code>æŒ‡å®šç›®æ ‡æ¶æ„æ˜¯ARMï¼Œ<code>CROSS_COMPILE</code>æŒ‡å®šäº¤å‰ç¼–è¯‘å·¥å…·é“¾çš„å‰ç¼€ã€‚</p>
<h3 data-id="heading-6">2.3 æ ¹æ–‡ä»¶ç³»ç»Ÿåˆ¶ä½œ</h3>
<p>æ ¹æ–‡ä»¶ç³»ç»ŸåŒ…å«äº†ç³»ç»Ÿè¿è¡Œæ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶ï¼ŒåŒ…æ‹¬åº“æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ã€åº”ç”¨ç¨‹åºç­‰ç­‰ã€‚</p>
<p>åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿæœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œæœ€å¸¸ç”¨çš„æ˜¯ä½¿ç”¨Buildrootæˆ–è€…Yoctoè¿™æ ·çš„å·¥å…·ã€‚</p>
<p>Buildrootæ˜¯ä¸€ä¸ªæ¯”è¾ƒè½»é‡çº§çš„å·¥å…·ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ä¸‹è½½ã€ç¼–è¯‘ã€å®‰è£…å„ç§è½¯ä»¶åŒ…ï¼Œæœ€åç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p>æˆ‘ä¸ªäººæ¯”è¾ƒå–œæ¬¢ç”¨Buildrootï¼Œå› ä¸ºå®ƒé…ç½®ç®€å•ï¼Œç¼–è¯‘é€Ÿåº¦ä¹Ÿå¿«ã€‚</p>
<p>ä½¿ç”¨Buildrootçš„åŸºæœ¬æµç¨‹æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/buildroot/buildroot.git
<span class="hljs-built_in">cd</span> buildroot
make menuconfig
make
</code></pre>
<p>åœ¨<code>make menuconfig</code>ä¸­ï¼Œä½ å¯ä»¥é€‰æ‹©ç›®æ ‡æ¶æ„ã€å·¥å…·é“¾ã€éœ€è¦çš„è½¯ä»¶åŒ…ç­‰ç­‰ã€‚</p>
<p>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œ<code>make</code>å‘½ä»¤ï¼ŒBuildrootå°±ä¼šè‡ªåŠ¨ä¸‹è½½æºç ã€ç¼–è¯‘ã€å®‰è£…ï¼Œæœ€ååœ¨<code>output/images/</code>ç›®å½•ä¸‹ç”Ÿæˆæ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒã€‚</p>
<p>æ ¹æ–‡ä»¶ç³»ç»Ÿçš„æ ¼å¼æœ‰å¾ˆå¤šç§ï¼Œå¸¸è§çš„æœ‰ext4ã€ubifsã€squashfsç­‰ç­‰ã€‚</p>
<p>ext4é€‚åˆç”¨åœ¨SDå¡æˆ–è€…eMMCä¸Šï¼Œubifsé€‚åˆç”¨åœ¨NAND Flashä¸Šï¼Œsquashfsæ˜¯ä¸€ä¸ªåªè¯»çš„å‹ç¼©æ–‡ä»¶ç³»ç»Ÿï¼Œé€‚åˆç”¨æ¥å­˜æ”¾ä¸éœ€è¦ä¿®æ”¹çš„ç³»ç»Ÿæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-7">2.4 è®¾å¤‡é©±åŠ¨å¼€å‘</h3>
<p>é©±åŠ¨å¼€å‘æ˜¯åµŒå…¥å¼Linuxå¼€å‘ä¸­æœ€æ ¸å¿ƒä¹Ÿæ˜¯æœ€éš¾çš„éƒ¨åˆ†ã€‚</p>
<p>Linuxçš„é©±åŠ¨åˆ†ä¸ºå­—ç¬¦è®¾å¤‡é©±åŠ¨ã€å—è®¾å¤‡é©±åŠ¨å’Œç½‘ç»œè®¾å¤‡é©±åŠ¨ã€‚</p>
<p>å¯¹äºåµŒå…¥å¼ç³»ç»Ÿï¼Œæˆ‘ä»¬æœ€å¸¸æ¥è§¦çš„æ˜¯å­—ç¬¦è®¾å¤‡é©±åŠ¨ï¼Œæ¯”å¦‚ä¸²å£é©±åŠ¨ã€GPIOé©±åŠ¨ã€I2Cé©±åŠ¨ç­‰ç­‰ã€‚</p>
<p>å†™ä¸€ä¸ªç®€å•çš„å­—ç¬¦è®¾å¤‡é©±åŠ¨ï¼ŒåŸºæœ¬æ¡†æ¶æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/module.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/fs.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/cdev.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;linux/device.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> DEVICE_NAME <span class="hljs-string">"mydevice"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> CLASS_NAME <span class="hljs-string">"myclass"</span></span>

<span class="hljs-type">static</span> <span class="hljs-type">int</span> major_number;
<span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-keyword">class</span> *<span class="hljs-title">myclass</span> =</span> <span class="hljs-literal">NULL</span>;
<span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">device</span> *<span class="hljs-title">mydevice</span> =</span> <span class="hljs-literal">NULL</span>;

<span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dev_open</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> inode *inodep, <span class="hljs-keyword">struct</span> file *filep)</span> {
    printk(KERN_INFO <span class="hljs-string">"mydevice: Device opened\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title function_">dev_release</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> inode *inodep, <span class="hljs-keyword">struct</span> file *filep)</span> {
    printk(KERN_INFO <span class="hljs-string">"mydevice: Device closed\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-type">static</span> <span class="hljs-type">ssize_t</span> <span class="hljs-title function_">dev_read</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> file *filep, <span class="hljs-type">char</span> *buffer, <span class="hljs-type">size_t</span> len, <span class="hljs-type">loff_t</span> *offset)</span> {
    printk(KERN_INFO <span class="hljs-string">"mydevice: Read operation\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-type">static</span> <span class="hljs-type">ssize_t</span> <span class="hljs-title function_">dev_write</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> file *filep, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *buffer, <span class="hljs-type">size_t</span> len, <span class="hljs-type">loff_t</span> *offset)</span> {
    printk(KERN_INFO <span class="hljs-string">"mydevice: Write operation\n"</span>);
    <span class="hljs-keyword">return</span> len;
}

<span class="hljs-type">static</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">file_operations</span> <span class="hljs-title">fops</span> =</span> {
    .open = dev_open,
    .read = dev_read,
    .write = dev_write,
    .release = dev_release,
};

<span class="hljs-type">static</span> <span class="hljs-type">int</span> __init <span class="hljs-title function_">mydevice_init</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    printk(KERN_INFO <span class="hljs-string">"mydevice: Initializing\n"</span>);
    
    major_number = register_chrdev(<span class="hljs-number">0</span>, DEVICE_NAME, &amp;fops);
    <span class="hljs-keyword">if</span> (major_number &lt; <span class="hljs-number">0</span>) {
        printk(KERN_ALERT <span class="hljs-string">"mydevice: Failed to register\n"</span>);
        <span class="hljs-keyword">return</span> major_number;
    }
    
    myclass = class_create(THIS_MODULE, CLASS_NAME);
    <span class="hljs-keyword">if</span> (IS_ERR(myclass)) {
        unregister_chrdev(major_number, DEVICE_NAME);
        printk(KERN_ALERT <span class="hljs-string">"mydevice: Failed to create class\n"</span>);
        <span class="hljs-keyword">return</span> PTR_ERR(myclass);
    }
    
    mydevice = device_create(myclass, <span class="hljs-literal">NULL</span>, MKDEV(major_number, <span class="hljs-number">0</span>), <span class="hljs-literal">NULL</span>, DEVICE_NAME);
    <span class="hljs-keyword">if</span> (IS_ERR(mydevice)) {
        class_destroy(myclass);
        unregister_chrdev(major_number, DEVICE_NAME);
        printk(KERN_ALERT <span class="hljs-string">"mydevice: Failed to create device\n"</span>);
        <span class="hljs-keyword">return</span> PTR_ERR(mydevice);
    }
    
    printk(KERN_INFO <span class="hljs-string">"mydevice: Device created successfully\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

<span class="hljs-type">static</span> <span class="hljs-type">void</span> __exit <span class="hljs-title function_">mydevice_exit</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span> {
    device_destroy(myclass, MKDEV(major_number, <span class="hljs-number">0</span>));
    class_unregister(myclass);
    class_destroy(myclass);
    unregister_chrdev(major_number, DEVICE_NAME);
    printk(KERN_INFO <span class="hljs-string">"mydevice: Goodbye\n"</span>);
}

module_init(mydevice_init);
module_exit(mydevice_exit);

MODULE_LICENSE(<span class="hljs-string">"GPL"</span>);
MODULE_AUTHOR(<span class="hljs-string">"è‰¯è®¸"</span>);
MODULE_DESCRIPTION(<span class="hljs-string">"A simple character device driver"</span>);
</code></pre>
<p>è¿™ä¸ªé©±åŠ¨å®ç°äº†æœ€åŸºæœ¬çš„æ‰“å¼€ã€å…³é—­ã€è¯»ã€å†™æ“ä½œã€‚</p>
<p>åœ¨<code>mydevice_init</code>å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬æ³¨å†Œäº†ä¸€ä¸ªå­—ç¬¦è®¾å¤‡ï¼Œåˆ›å»ºäº†è®¾å¤‡ç±»å’Œè®¾å¤‡èŠ‚ç‚¹ã€‚</p>
<p>å½“é©±åŠ¨åŠ è½½æˆåŠŸåï¼Œç³»ç»Ÿä¼šåœ¨<code>/dev</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>mydevice</code>çš„è®¾å¤‡æ–‡ä»¶ã€‚</p>
<p>ç¼–è¯‘é©±åŠ¨éœ€è¦ä¸€ä¸ªMakefile:</p>
<pre><code class="hljs language-makefile" lang="makefile">obj-m += mydevice.o

<span class="hljs-section">all:</span>
	make -C /lib/modules/<span class="hljs-variable">$(<span class="hljs-built_in">shell</span> uname -r)</span>/build M=<span class="hljs-variable">$(PWD)</span> modules

<span class="hljs-section">clean:</span>
	make -C /lib/modules/<span class="hljs-variable">$(<span class="hljs-built_in">shell</span> uname -r)</span>/build M=<span class="hljs-variable">$(PWD)</span> clean
</code></pre>
<p>ç¼–è¯‘å®Œæˆåï¼Œä½¿ç”¨<code>insmod mydevice.ko</code>å‘½ä»¤åŠ è½½é©±åŠ¨ï¼Œä½¿ç”¨<code>rmmod mydevice</code>å‘½ä»¤å¸è½½é©±åŠ¨ã€‚</p>
<h2 data-id="heading-8">3. åº”ç”¨ç¨‹åºå¼€å‘</h2>
<h3 data-id="heading-9">3.1 äº¤å‰ç¼–è¯‘ç¯å¢ƒæ­å»º</h3>
<p>åœ¨åµŒå…¥å¼Linuxå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸åœ¨PCä¸Šç¼–å†™ä»£ç ï¼Œç„¶åä½¿ç”¨äº¤å‰ç¼–è¯‘å·¥å…·é“¾ç¼–è¯‘æˆç›®æ ‡å¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<p>äº¤å‰ç¼–è¯‘å·¥å…·é“¾åŒ…æ‹¬ç¼–è¯‘å™¨ã€é“¾æ¥å™¨ã€åº“æ–‡ä»¶ç­‰ç­‰ã€‚</p>
<p>å¸¸ç”¨çš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾æœ‰arm-linux-gnueabihfã€aarch64-linux-gnuç­‰ç­‰ã€‚</p>
<p>ä½ å¯ä»¥ä»èŠ¯ç‰‡å‚å•†çš„ç½‘ç«™ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Buildrootæˆ–è€…Linaroæä¾›çš„å·¥å…·é“¾ã€‚</p>
<p>å®‰è£…å¥½å·¥å…·é“¾åï¼Œç¼–è¯‘ç¨‹åºçš„å‘½ä»¤æ˜¯è¿™æ ·çš„:</p>
<pre><code class="hljs language-bash" lang="bash">arm-linux-gnueabihf-gcc -o hello hello.c
</code></pre>
<p>å¦‚æœç¨‹åºä½¿ç”¨äº†ç¬¬ä¸‰æ–¹åº“ï¼Œéœ€è¦æŒ‡å®šåº“çš„è·¯å¾„:</p>
<pre><code class="hljs language-bash" lang="bash">arm-linux-gnueabihf-gcc -o myapp myapp.c -I/path/to/include -L/path/to/lib -lmylib
</code></pre>
<h3 data-id="heading-10">3.2 ç³»ç»Ÿç¼–ç¨‹</h3>
<p>Linuxæä¾›äº†ä¸°å¯Œçš„ç³»ç»Ÿè°ƒç”¨æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™äº›æ¥å£æ¥æ“ä½œæ–‡ä»¶ã€è¿›ç¨‹ã€ç½‘ç»œç­‰ç­‰ã€‚</p>
<p>æ¯”å¦‚ï¼Œè¯»å†™æ–‡ä»¶å¯ä»¥ä½¿ç”¨<code>open</code>ã€<code>read</code>ã€<code>write</code>ã€<code>close</code>ç­‰ç³»ç»Ÿè°ƒç”¨ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªè¯»å†™æ–‡ä»¶çš„ä¾‹å­:</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> fd;
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];
    <span class="hljs-type">ssize_t</span> bytes_read;
    
    <span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
    fd = open(<span class="hljs-string">"/tmp/test.txt"</span>, O_RDWR | O_CREAT, <span class="hljs-number">0644</span>);
    <span class="hljs-keyword">if</span> (fd &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"Failed to open file"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-comment">// å†™å…¥æ•°æ®</span>
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *data = <span class="hljs-string">"Hello, Embedded Linux!\n"</span>;
    write(fd, data, <span class="hljs-built_in">strlen</span>(data));
    
    <span class="hljs-comment">// ç§»åŠ¨æ–‡ä»¶æŒ‡é’ˆåˆ°å¼€å¤´</span>
    lseek(fd, <span class="hljs-number">0</span>, SEEK_SET);
    
    <span class="hljs-comment">// è¯»å–æ•°æ®</span>
    bytes_read = read(fd, buffer, <span class="hljs-keyword">sizeof</span>(buffer) - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">if</span> (bytes_read &gt; <span class="hljs-number">0</span>) {
        buffer[bytes_read] = <span class="hljs-string">'\0'</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Read from file: %s"</span>, buffer);
    }
    
    <span class="hljs-comment">// å…³é—­æ–‡ä»¶</span>
    close(fd);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ä¸ªç¨‹åºæ¼”ç¤ºäº†å¦‚ä½•åˆ›å»ºæ–‡ä»¶ã€å†™å…¥æ•°æ®ã€è¯»å–æ•°æ®ã€‚</p>
<p><code>open</code>å‡½æ•°çš„ç¬¬äºŒä¸ªå‚æ•°æŒ‡å®šäº†æ‰“å¼€æ–¹å¼ï¼Œ<code>O_RDWR</code>è¡¨ç¤ºè¯»å†™æ¨¡å¼ï¼Œ<code>O_CREAT</code>è¡¨ç¤ºå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºã€‚</p>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ–‡ä»¶æƒé™ï¼Œ<code>0644</code>è¡¨ç¤ºæ‰€æœ‰è€…å¯è¯»å¯å†™ï¼Œå…¶ä»–äººåªè¯»ã€‚</p>
<h3 data-id="heading-11">3.3 è¿›ç¨‹é—´é€šä¿¡</h3>
<p>åœ¨åµŒå…¥å¼Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦å¤šä¸ªè¿›ç¨‹ååŒå·¥ä½œã€‚</p>
<p>è¿›ç¨‹é—´é€šä¿¡(IPC)çš„æ–¹å¼æœ‰å¾ˆå¤šç§ï¼ŒåŒ…æ‹¬ç®¡é“ã€æ¶ˆæ¯é˜Ÿåˆ—ã€å…±äº«å†…å­˜ã€ä¿¡å·é‡ç­‰ç­‰ã€‚</p>
<p>ç®¡é“æ˜¯æœ€ç®€å•çš„IPCæ–¹å¼ï¼Œé€‚åˆçˆ¶å­è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ç®¡é“çš„ä¾‹å­:</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> pipefd[<span class="hljs-number">2</span>];
    <span class="hljs-type">pid_t</span> pid;
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">100</span>];
    
    <span class="hljs-comment">// åˆ›å»ºç®¡é“</span>
    <span class="hljs-keyword">if</span> (pipe(pipefd) == <span class="hljs-number">-1</span>) {
        perror(<span class="hljs-string">"pipe failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-comment">// åˆ›å»ºå­è¿›ç¨‹</span>
    pid = fork();
    
    <span class="hljs-keyword">if</span> (pid &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"fork failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å­è¿›ç¨‹:è¯»å–æ•°æ®</span>
        close(pipefd[<span class="hljs-number">1</span>]);  <span class="hljs-comment">// å…³é—­å†™ç«¯</span>
        read(pipefd[<span class="hljs-number">0</span>], buffer, <span class="hljs-keyword">sizeof</span>(buffer));
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Child received: %s\n"</span>, buffer);
        close(pipefd[<span class="hljs-number">0</span>]);
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// çˆ¶è¿›ç¨‹:å†™å…¥æ•°æ®</span>
        close(pipefd[<span class="hljs-number">0</span>]);  <span class="hljs-comment">// å…³é—­è¯»ç«¯</span>
        <span class="hljs-type">const</span> <span class="hljs-type">char</span> *msg = <span class="hljs-string">"Hello from parent!"</span>;
        write(pipefd[<span class="hljs-number">1</span>], msg, <span class="hljs-built_in">strlen</span>(msg) + <span class="hljs-number">1</span>);
        close(pipefd[<span class="hljs-number">1</span>]);
        wait(<span class="hljs-literal">NULL</span>);  <span class="hljs-comment">// ç­‰å¾…å­è¿›ç¨‹ç»“æŸ</span>
    }
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>å¯¹äºæ›´å¤æ‚çš„é€šä¿¡éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—æˆ–è€…å…±äº«å†…å­˜ã€‚</p>
<p>æ¶ˆæ¯é˜Ÿåˆ—é€‚åˆä¼ é€’ç»“æ„åŒ–çš„æ¶ˆæ¯ï¼Œå…±äº«å†…å­˜é€‚åˆå¤§é‡æ•°æ®çš„ä¼ è¾“ã€‚</p>
<h3 data-id="heading-12">3.4 ç½‘ç»œç¼–ç¨‹</h3>
<p>åµŒå…¥å¼è®¾å¤‡ç»å¸¸éœ€è¦é€šè¿‡ç½‘ç»œä¸å…¶ä»–è®¾å¤‡é€šä¿¡ã€‚</p>
<p>Linuxæä¾›äº†æ ‡å‡†çš„Socketæ¥å£ï¼Œæ”¯æŒTCPå’ŒUDPåè®®ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„TCPæœåŠ¡å™¨ä¾‹å­:</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;arpa/inet.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> PORT 8888</span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> server_fd, client_fd;
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sockaddr_in</span> <span class="hljs-title">server_addr</span>, <span class="hljs-title">client_addr</span>;</span>
    <span class="hljs-type">socklen_t</span> addr_len = <span class="hljs-keyword">sizeof</span>(client_addr);
    <span class="hljs-type">char</span> buffer[<span class="hljs-number">1024</span>];
    
    <span class="hljs-comment">// åˆ›å»ºsocket</span>
    server_fd = socket(AF_INET, SOCK_STREAM, <span class="hljs-number">0</span>);
    <span class="hljs-keyword">if</span> (server_fd &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"socket failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-comment">// è®¾ç½®åœ°å€</span>
    server_addr.sin_family = AF_INET;
    server_addr.sin_addr.s_addr = INADDR_ANY;
    server_addr.sin_port = htons(PORT);
    
    <span class="hljs-comment">// ç»‘å®šç«¯å£</span>
    <span class="hljs-keyword">if</span> (bind(server_fd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;server_addr, <span class="hljs-keyword">sizeof</span>(server_addr)) &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"bind failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-comment">// ç›‘å¬è¿æ¥</span>
    <span class="hljs-keyword">if</span> (listen(server_fd, <span class="hljs-number">3</span>) &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"listen failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Server listening on port %d\n"</span>, PORT);
    
    <span class="hljs-comment">// æ¥å—è¿æ¥</span>
    client_fd = accept(server_fd, (<span class="hljs-keyword">struct</span> sockaddr *)&amp;client_addr, &amp;addr_len);
    <span class="hljs-keyword">if</span> (client_fd &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"accept failed"</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;
    }
    
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Client connected\n"</span>);
    
    <span class="hljs-comment">// æ¥æ”¶æ•°æ®</span>
    <span class="hljs-type">int</span> bytes_read = read(client_fd, buffer, <span class="hljs-keyword">sizeof</span>(buffer));
    <span class="hljs-keyword">if</span> (bytes_read &gt; <span class="hljs-number">0</span>) {
        buffer[bytes_read] = <span class="hljs-string">'\0'</span>;
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"Received: %s\n"</span>, buffer);
        
        <span class="hljs-comment">// å‘é€å“åº”</span>
        <span class="hljs-type">const</span> <span class="hljs-type">char</span> *response = <span class="hljs-string">"Message received"</span>;
        write(client_fd, response, <span class="hljs-built_in">strlen</span>(response));
    }
    
    close(client_fd);
    close(server_fd);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<p>è¿™ä¸ªæœåŠ¡å™¨ç¨‹åºç›‘å¬8888ç«¯å£ï¼Œæ¥å—å®¢æˆ·ç«¯è¿æ¥ï¼Œæ¥æ”¶æ•°æ®å¹¶å‘é€å“åº”ã€‚</p>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šä½¿ç”¨å¤šçº¿ç¨‹æˆ–è€…å¼‚æ­¥IOæ¥å¤„ç†å¤šä¸ªå®¢æˆ·ç«¯è¿æ¥ã€‚</p>
<h2 data-id="heading-13">4. è°ƒè¯•æŠ€å·§</h2>
<h3 data-id="heading-14">4.1 ä¸²å£è°ƒè¯•</h3>
<p>ä¸²å£æ˜¯åµŒå…¥å¼å¼€å‘ä¸­æœ€å¸¸ç”¨çš„è°ƒè¯•å·¥å…·ã€‚</p>
<p>é€šè¿‡ä¸²å£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿçš„å¯åŠ¨ä¿¡æ¯ã€å†…æ ¸æ—¥å¿—ã€åº”ç”¨ç¨‹åºè¾“å‡ºç­‰ç­‰ã€‚</p>
<p>åœ¨Linuxä¸­ï¼Œä¸²å£è®¾å¤‡é€šå¸¸æ˜¯<code>/dev/ttyS0</code>ã€<code>/dev/ttyUSB0</code>è¿™æ ·çš„è®¾å¤‡æ–‡ä»¶ã€‚</p>
<p>ä½¿ç”¨ä¸²å£çš„æ—¶å€™ï¼Œéœ€è¦è®¾ç½®æ³¢ç‰¹ç‡ã€æ•°æ®ä½ã€åœæ­¢ä½ç­‰å‚æ•°ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>minicom</code>æˆ–è€…<code>picocom</code>è¿™æ ·çš„å·¥å…·:</p>
<pre><code class="hljs language-bash" lang="bash">picocom -b 115200 /dev/ttyUSB0
</code></pre>
<p>è¿™æ¡å‘½ä»¤ä»¥115200çš„æ³¢ç‰¹ç‡æ‰“å¼€<code>/dev/ttyUSB0</code>è®¾å¤‡ã€‚</p>
<h3 data-id="heading-15">4.2 GDBè°ƒè¯•</h3>
<p>å¯¹äºåº”ç”¨ç¨‹åºçš„è°ƒè¯•ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨GDBã€‚</p>
<p>åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸Šï¼Œé€šå¸¸ä½¿ç”¨gdbserverè¿›è¡Œè¿œç¨‹è°ƒè¯•ã€‚</p>
<p>é¦–å…ˆåœ¨ç›®æ ‡æ¿ä¸Šè¿è¡Œgdbserver:</p>
<pre><code class="hljs language-bash" lang="bash">gdbserver :1234 ./myapp
</code></pre>
<p>ç„¶ååœ¨PCä¸Šä½¿ç”¨äº¤å‰ç¼–è¯‘ç‰ˆæœ¬çš„GDBè¿æ¥:</p>
<pre><code class="hljs language-bash" lang="bash">arm-linux-gnueabihf-gdb myapp
(gdb) target remote 192.168.1.100:1234
(gdb) <span class="hljs-built_in">break</span> main
(gdb) <span class="hljs-built_in">continue</span>
</code></pre>
<p>è¿™æ ·å°±å¯ä»¥åœ¨PCä¸Šè°ƒè¯•è¿è¡Œåœ¨ç›®æ ‡æ¿ä¸Šçš„ç¨‹åºäº†ã€‚</p>
<p>å¯ä»¥è®¾ç½®æ–­ç‚¹ã€å•æ­¥æ‰§è¡Œã€æŸ¥çœ‹å˜é‡ç­‰ç­‰ã€‚</p>
<h3 data-id="heading-16">4.3 å†…æ ¸è°ƒè¯•</h3>
<p>å†…æ ¸è°ƒè¯•æ¯”åº”ç”¨ç¨‹åºè°ƒè¯•è¦å¤æ‚ä¸€äº›ã€‚</p>
<p>æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>printk</code>æ‰“å°æ—¥å¿—ã€‚</p>
<p><code>printk</code>çš„ç”¨æ³•å’Œ<code>printf</code>ç±»ä¼¼ï¼Œä½†æ˜¯è¾“å‡ºä¼šè®°å½•åˆ°å†…æ ¸æ—¥å¿—ä¸­ï¼Œå¯ä»¥é€šè¿‡<code>dmesg</code>å‘½ä»¤æŸ¥çœ‹ã€‚</p>
<pre><code class="hljs language-c" lang="c">printk(KERN_INFO <span class="hljs-string">"This is an info message\n"</span>);
printk(KERN_WARNING <span class="hljs-string">"This is a warning message\n"</span>);
printk(KERN_ERR <span class="hljs-string">"This is an error message\n"</span>);
</code></pre>
<p>æ—¥å¿—çº§åˆ«æœ‰KERN_EMERGã€KERN_ALERTã€KERN_CRITã€KERN_ERRã€KERN_WARNINGã€KERN_NOTICEã€KERN_INFOã€KERN_DEBUGç­‰ç­‰ï¼Œçº§åˆ«è¶Šé«˜è¶Šé‡è¦ã€‚</p>
<p>å¯¹äºæ›´å¤æ‚çš„å†…æ ¸è°ƒè¯•ï¼Œå¯ä»¥ä½¿ç”¨KGDBæˆ–è€…JTAGè°ƒè¯•å™¨ã€‚</p>
<p>KGDBå…è®¸ä½ ä½¿ç”¨GDBè°ƒè¯•å†…æ ¸ï¼ŒJTAGè°ƒè¯•å™¨åˆ™å¯ä»¥åœ¨ç¡¬ä»¶çº§åˆ«è¿›è¡Œè°ƒè¯•ã€‚</p>
<h2 data-id="heading-17">5. æ€§èƒ½ä¼˜åŒ–</h2>
<h3 data-id="heading-18">5.1 å¯åŠ¨æ—¶é—´ä¼˜åŒ–</h3>
<p>åµŒå…¥å¼è®¾å¤‡é€šå¸¸å¯¹å¯åŠ¨æ—¶é—´æœ‰è¦æ±‚ï¼Œç‰¹åˆ«æ˜¯æ¶ˆè´¹ç”µå­äº§å“ã€‚</p>
<p>ä¼˜åŒ–å¯åŠ¨æ—¶é—´çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚å¹¶è¡ŒåŒ–å¯åŠ¨è„šæœ¬ã€å»¶è¿ŸåŠ è½½ä¸å¿…è¦çš„æœåŠ¡ã€ä½¿ç”¨é™æ€é“¾æ¥å‡å°‘åŠ¨æ€åº“åŠ è½½æ—¶é—´ç­‰ç­‰ã€‚</p>
<p>æˆ‘åœ¨åšæ±½è½¦ç”µå­é¡¹ç›®çš„æ—¶å€™ï¼Œå®¢æˆ·è¦æ±‚ç³»ç»Ÿåœ¨3ç§’å†…å¯åŠ¨å®Œæˆã€‚</p>
<p>ä¸ºäº†è¾¾åˆ°è¿™ä¸ªç›®æ ‡ï¼Œæˆ‘ä»¬åšäº†å¾ˆå¤šä¼˜åŒ–ã€‚</p>
<p>é¦–å…ˆæ˜¯ç²¾ç®€å†…æ ¸ï¼ŒæŠŠä¸éœ€è¦çš„é©±åŠ¨å’ŒåŠŸèƒ½éƒ½å»æ‰ã€‚</p>
<p>ç„¶åä¼˜åŒ–å¯åŠ¨è„šæœ¬ï¼ŒæŠŠä¸€äº›ä¸ç´§æ€¥çš„æœåŠ¡æ”¾åˆ°åå°å¯åŠ¨ã€‚</p>
<p>æœ€åä½¿ç”¨äº†å‹ç¼©çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå‡å°‘äº†æ–‡ä»¶è¯»å–æ—¶é—´ã€‚</p>
<h3 data-id="heading-19">5.2 å†…å­˜ä¼˜åŒ–</h3>
<p>åµŒå…¥å¼è®¾å¤‡çš„å†…å­˜é€šå¸¸æ¯”è¾ƒæœ‰é™ï¼Œæ‰€ä»¥å†…å­˜ä¼˜åŒ–éå¸¸é‡è¦ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>free</code>å‘½ä»¤æŸ¥çœ‹å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œä½¿ç”¨<code>top</code>å‘½ä»¤æŸ¥çœ‹å„ä¸ªè¿›ç¨‹çš„å†…å­˜å ç”¨ã€‚</p>
<p>å¦‚æœå‘ç°å†…å­˜ä¸å¤Ÿç”¨ï¼Œå¯ä»¥è€ƒè™‘ä»¥ä¸‹å‡ ä¸ªæ–¹é¢:</p>
<ol>
<li>å‡å°‘ä¸å¿…è¦çš„è¿›ç¨‹å’ŒæœåŠ¡</li>
<li>ä½¿ç”¨å†…å­˜æ± æ¥ç®¡ç†é¢‘ç¹åˆ†é…é‡Šæ”¾çš„å°å—å†…å­˜</li>
<li>ä½¿ç”¨mmapæ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ä¸€æ¬¡æ€§è¯»å…¥å†…å­˜</li>
<li>åŠæ—¶é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜</li>
</ol>
<h3 data-id="heading-20">5.3 CPUä¼˜åŒ–</h3>
<p>CPUæ€§èƒ½ä¼˜åŒ–ä¸»è¦æ˜¯å‡å°‘ä¸å¿…è¦çš„è®¡ç®—å’Œä¼˜åŒ–ç®—æ³•ã€‚</p>
<p>å¯ä»¥ä½¿ç”¨<code>top</code>å‘½ä»¤æŸ¥çœ‹CPUå ç”¨ç‡ï¼Œä½¿ç”¨<code>perf</code>å·¥å…·è¿›è¡Œæ€§èƒ½åˆ†æã€‚</p>
<p>å¯¹äºå®æ—¶æ€§è¦æ±‚é«˜çš„ä»»åŠ¡ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨å®æ—¶è°ƒåº¦ç­–ç•¥ã€‚</p>
<p>Linuxæ”¯æŒSCHED_FIFOå’ŒSCHED_RRä¸¤ç§å®æ—¶è°ƒåº¦ç­–ç•¥ï¼Œå¯ä»¥ä¿è¯ä»»åŠ¡å¾—åˆ°åŠæ—¶å“åº”ã€‚</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sched.h&gt;</span></span>

<span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">sched_param</span> <span class="hljs-title">param</span>;</span>
param.sched_priority = <span class="hljs-number">50</span>;
sched_setscheduler(<span class="hljs-number">0</span>, SCHED_FIFO, &amp;param);
</code></pre>
<p>è¿™æ®µä»£ç æŠŠå½“å‰è¿›ç¨‹è®¾ç½®ä¸ºFIFOå®æ—¶è°ƒåº¦ï¼Œä¼˜å…ˆçº§æ˜¯50ã€‚</p>
<h2 data-id="heading-21">6. æ€»ç»“</h2>
<p>åµŒå…¥å¼Linuxå¼€å‘æ¶‰åŠçš„å†…å®¹éå¸¸å¹¿æ³›ï¼Œä»åº•å±‚çš„Bootloaderã€å†…æ ¸ã€é©±åŠ¨ï¼Œåˆ°ä¸Šå±‚çš„åº”ç”¨ç¨‹åºå¼€å‘ï¼Œæ¯ä¸€ä¸ªç¯èŠ‚éƒ½éœ€è¦æ‰å®çš„åŸºç¡€çŸ¥è¯†ã€‚</p>
<p>æˆ‘ä»å•ç‰‡æœºè½¬åˆ°Linuxå¼€å‘çš„æ—¶å€™ï¼Œä¹Ÿæ˜¯ä»é›¶å¼€å§‹å­¦ä¹ ï¼ŒèŠ±äº†å¾ˆé•¿æ—¶é—´æ‰æ…¢æ…¢æŒæ¡ã€‚</p>
<p>ä½†æ˜¯ä¸€æ—¦æŒæ¡äº†è¿™äº›æŠ€èƒ½ï¼Œä½ ä¼šå‘ç°åµŒå…¥å¼Linuxå¼€å‘éå¸¸æœ‰æ„æ€ã€‚</p>
<p>ä½ å¯ä»¥æ§åˆ¶ç¡¬ä»¶ï¼Œå¯ä»¥å¼€å‘å¤æ‚çš„åº”ç”¨ï¼Œå¯ä»¥è§£å†³å„ç§å„æ ·çš„æŠ€æœ¯éš¾é¢˜ã€‚</p>
<p>è€Œä¸”Linuxçš„å¼€æºç‰¹æ€§è®©ä½ å¯ä»¥æ·±å…¥äº†è§£ç³»ç»Ÿçš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼Œè¿™å¯¹äºæŠ€æœ¯çš„æå‡éå¸¸æœ‰å¸®åŠ©ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³ä»äº‹åµŒå…¥å¼Linuxå¼€å‘ï¼Œæˆ‘çš„å»ºè®®æ˜¯å…ˆæ‰“å¥½åŸºç¡€ï¼Œå­¦ä¹ Cè¯­è¨€ã€æ•°æ®ç»“æ„ã€æ“ä½œç³»ç»ŸåŸç†ç­‰ç­‰ã€‚</p>
<p>ç„¶ååŠ¨æ‰‹å®è·µï¼Œä»ç®€å•çš„é©±åŠ¨å¼€å§‹å†™èµ·ï¼Œé€æ­¥æ·±å…¥ã€‚</p>
<p>é‡åˆ°é—®é¢˜ä¸è¦æ€•ï¼Œå¤šæŸ¥èµ„æ–™ï¼Œå¤šæ€è€ƒï¼Œå¤šå°è¯•ã€‚</p>
<p>ç›¸ä¿¡åªè¦åšæŒä¸‹å»ï¼Œä½ ä¸€å®šèƒ½æˆä¸ºä¸€åä¼˜ç§€çš„åµŒå…¥å¼Linuxå¼€å‘å·¥ç¨‹å¸ˆã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æµå¼è¾“å‡º(Streaming)å®ç°ï¼šæå‡ç”¨æˆ·ä½“éªŒ]]></title>    <link>https://juejin.cn/post/7602162809292242982</link>    <guid>https://juejin.cn/post/7602162809292242982</guid>    <pubDate>2026-02-03T02:45:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162809292242982" data-draft-id="7602154088476426278" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æµå¼è¾“å‡º(Streaming)å®ç°ï¼šæå‡ç”¨æˆ·ä½“éªŒ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:45:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¬é£è€…å°±æ˜¯æˆ‘"/> <meta itemprop="url" content="https://juejin.cn/user/360295544143277"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æµå¼è¾“å‡º(Streaming)å®ç°ï¼šæå‡ç”¨æˆ·ä½“éªŒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/360295544143277/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¬é£è€…å°±æ˜¯æˆ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:45:05.000Z" title="Tue Feb 03 2026 02:45:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    10
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ç°ä»£ Web åº”ç”¨ä¸­ï¼Œç”¨æˆ·ä½“éªŒçš„å…³é”®åœ¨äºå“åº”é€Ÿåº¦å’Œäº¤äº’åé¦ˆã€‚å½“å¤„ç†è€—æ—¶æ“ä½œæ—¶ï¼Œä¼ ç»Ÿçš„"ç­‰å¾…-è¿”å›"æ¨¡å¼å¾€å¾€è®©ç”¨æˆ·æ„Ÿåˆ°ç„¦è™‘ã€‚æµå¼è¾“å‡ºï¼ˆStreamingï¼‰æŠ€æœ¯é€šè¿‡é€æ­¥è¿”å›æ•°æ®ï¼Œè®©ç”¨æˆ·å®æ—¶çœ‹åˆ°å¤„ç†è¿›åº¦ï¼Œæå¤§æå‡äº†ä½“éªŒæ„ŸçŸ¥ã€‚æœ¬æ–‡å°†æ·±å…¥æ¢è®¨å¦‚ä½•åœ¨ Qwen Chatbot é¡¹ç›®ä¸­ä½¿ç”¨ SSEï¼ˆServer-Sent Eventsï¼‰å’Œå¼‚æ­¥å¤„ç†å®ç°æµå¼è¾“å‡ºã€‚</p>
<h2 data-id="heading-0">ä¸ºä»€ä¹ˆéœ€è¦æµå¼è¾“å‡ºï¼Ÿ</h2>
<p>æƒ³è±¡ä¸€ä¸ªåœºæ™¯ï¼šç”¨æˆ·å‘ AI åŠ©æ‰‹æé—®ï¼Œä¼ ç»Ÿæ–¹å¼éœ€è¦ç­‰å¾…å®Œæ•´ç­”æ¡ˆç”Ÿæˆåæ‰èƒ½çœ‹åˆ°ç»“æœï¼Œå¯èƒ½éœ€è¦ç­‰å¾…æ•°åç§’ã€‚è€Œæµå¼è¾“å‡ºå…è®¸ç­”æ¡ˆé€å­—é€å¥åœ°å‘ˆç°ï¼Œå°±åƒçœŸäººå¯¹è¯ä¸€æ ·è‡ªç„¶ã€‚è¿™ç§å³æ—¶åé¦ˆä¸ä»…å‡å°‘äº†æ„ŸçŸ¥ç­‰å¾…æ—¶é—´ï¼Œè¿˜å¢å¼ºäº†åº”ç”¨çš„äº’åŠ¨æ€§ã€‚</p>
<p>æµå¼è¾“å‡ºçš„å…¸å‹åº”ç”¨åœºæ™¯åŒ…æ‹¬ï¼š</p>
<ul>
<li>AI å¯¹è¯ç³»ç»Ÿï¼ˆChatGPT å¼äº¤äº’ï¼‰</li>
<li>å¤§æ–‡ä»¶å¤„ç†è¿›åº¦</li>
<li>å®æ—¶æ—¥å¿—è¾“å‡º</li>
<li>æ•°æ®åˆ†ææŠ¥å‘Šç”Ÿæˆ</li>
</ul>
<h2 data-id="heading-1">æŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆé€‰æ‹© SSEï¼Ÿ</h2>
<p>åœ¨å®ç°æµå¼æ•°æ®ä¼ è¾“æ—¶ï¼Œæˆ‘ä»¬æœ‰å‡ ç§é€‰æ‹©ï¼šWebSocketã€HTTP/2 Server Push å’Œ SSEã€‚å¯¹äºå•å‘æ•°æ®æµï¼ˆæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ï¼‰ï¼ŒSSE æ˜¯æœ€ä¼˜æ–¹æ¡ˆï¼š</p>
<ul>
<li><strong>ç®€å•æ˜“ç”¨</strong>ï¼šåŸºäº HTTP åè®®ï¼Œæ— éœ€å¤æ‚æ¡æ‰‹</li>
<li><strong>è‡ªåŠ¨é‡è¿</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ”¯æŒæ–­çº¿é‡è¿</li>
<li><strong>è½»é‡çº§</strong>ï¼šç›¸æ¯” WebSocket æ›´èŠ‚çœèµ„æº</li>
<li><strong>é˜²ç«å¢™å‹å¥½</strong>ï¼šä½¿ç”¨æ ‡å‡† HTTP ç«¯å£</li>
</ul>
<h2 data-id="heading-2">Qwen Chatbot é¡¹ç›®ä¸­çš„å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-3">æœåŠ¡ç«¯ï¼šAPI è·¯ç”±å®ç°</h3>
<p>Next.js çš„ Pages Router æä¾›äº†å¼ºå¤§çš„ API è·¯ç”±åŠŸèƒ½ï¼Œéå¸¸é€‚åˆå®ç° SSEã€‚ä»¥ä¸‹æ˜¯ Qwen Chatbot é¡¹ç›®ä¸­çš„å®Œæ•´å®ç°ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/api/qwen.ts</span>
<span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> { <span class="hljs-title class_">NextApiRequest</span>, <span class="hljs-title class_">NextApiResponse</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'next'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'openai'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params">req: NextApiRequest, res: NextApiResponse</span>) {
  <span class="hljs-keyword">if</span> (req.<span class="hljs-property">method</span> !== <span class="hljs-string">'POST'</span>) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">405</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Method not allowed'</span> });
  }

  <span class="hljs-keyword">const</span> { messages, stream = <span class="hljs-literal">false</span>, model, temperature = <span class="hljs-number">0.7</span>, top_p = <span class="hljs-number">0.9</span>, max_tokens = <span class="hljs-number">2048</span> } = req.<span class="hljs-property">body</span>;

  <span class="hljs-comment">// éªŒè¯å¿…éœ€å­—æ®µ</span>
  <span class="hljs-keyword">if</span> (!messages || !<span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(messages)) {
    <span class="hljs-keyword">return</span> res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({ <span class="hljs-attr">error</span>: <span class="hljs-string">'Messages are required and must be an array'</span> });
  }

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// åˆ›å»º OpenAI å…¼å®¹çš„å®¢æˆ·ç«¯ï¼Œé€‚é…é€šä¹‰åƒé—®</span>
    <span class="hljs-keyword">const</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({
      <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span> || <span class="hljs-string">''</span>,
      <span class="hljs-attr">baseURL</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_BASE</span> || <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
    });

    <span class="hljs-keyword">if</span> (stream) {
      <span class="hljs-comment">// ä½¿ç”¨ TransformStream å®ç°æµå¼å“åº”</span>
      <span class="hljs-keyword">const</span> encoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextEncoder</span>();
      <span class="hljs-keyword">const</span> stream = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransformStream</span>();
      <span class="hljs-keyword">const</span> writer = stream.<span class="hljs-property">writable</span>.<span class="hljs-title function_">getWriter</span>();

      <span class="hljs-comment">// å¼‚æ­¥å¤„ç†å‡½æ•°</span>
      (<span class="hljs-keyword">async</span> () =&gt; {
        <span class="hljs-keyword">try</span> {
          <span class="hljs-comment">// é€šä¹‰åƒé—®APIæ”¯æŒsystem messageï¼Œç›´æ¥ä½¿ç”¨åŸå§‹æ¶ˆæ¯</span>
          <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
            <span class="hljs-attr">model</span>: model || process.<span class="hljs-property">env</span>.<span class="hljs-property">MODEL_NAME</span> || <span class="hljs-string">'qwen-max'</span>,
            messages,
            <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>,
            temperature,
            top_p,
            max_tokens,
            <span class="hljs-attr">stream_options</span>: { <span class="hljs-attr">include_usage</span>: <span class="hljs-literal">true</span> }, <span class="hljs-comment">// åŒ…å«ä½¿ç”¨é‡ä¿¡æ¯</span>
          });

          <span class="hljs-comment">// é€å—å‘é€æ•°æ®</span>
          <span class="hljs-keyword">for</span> <span class="hljs-keyword">await</span> (<span class="hljs-keyword">const</span> chunk <span class="hljs-keyword">of</span> response) {
            <span class="hljs-keyword">const</span> content = chunk.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">delta</span>?.<span class="hljs-property">content</span>;
            
            <span class="hljs-comment">// å¦‚æœæœ‰å†…å®¹ï¼Œå‘é€å†…å®¹æ•°æ®</span>
            <span class="hljs-keyword">if</span> (content) {
              <span class="hljs-keyword">const</span> data = <span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ content })}</span>\n\n`</span>;
              <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">write</span>(encoder.<span class="hljs-title function_">encode</span>(data));
            }
            
            <span class="hljs-comment">// å¦‚æœæœ‰usageä¿¡æ¯ï¼Œå‘é€tokenä½¿ç”¨æ•°æ®</span>
            <span class="hljs-keyword">if</span> (chunk.<span class="hljs-property">usage</span>) {
              <span class="hljs-keyword">const</span> tokenData = {
                <span class="hljs-attr">usage</span>: {
                  <span class="hljs-attr">prompt_tokens</span>: chunk.<span class="hljs-property">usage</span>.<span class="hljs-property">prompt_tokens</span>,
                  <span class="hljs-attr">completion_tokens</span>: chunk.<span class="hljs-property">usage</span>.<span class="hljs-property">completion_tokens</span>,
                  <span class="hljs-attr">total_tokens</span>: chunk.<span class="hljs-property">usage</span>.<span class="hljs-property">total_tokens</span>,
                }
              };
              <span class="hljs-keyword">const</span> data = <span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(tokenData)}</span>\n\n`</span>;
              <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">write</span>(encoder.<span class="hljs-title function_">encode</span>(data));
            }
          }
          
          <span class="hljs-comment">// å‘é€ç»“æŸä¿¡å·</span>
          <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">write</span>(encoder.<span class="hljs-title function_">encode</span>(<span class="hljs-string">'data: [DONE]\n\n'</span>));
        } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
          <span class="hljs-comment">// å‘é€é”™è¯¯ä¿¡æ¯</span>
          <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">write</span>(
            encoder.<span class="hljs-title function_">encode</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ error: error.message || <span class="hljs-string">'AI service error'</span> })}</span>\n\n`</span>)
          );
        } <span class="hljs-keyword">finally</span> {
          <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">close</span>();
        }
      })();

      <span class="hljs-comment">// è¿”å› SSE å“åº”</span>
      res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'text/event-stream'</span>);
      res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Cache-Control'</span>, <span class="hljs-string">'no-cache'</span>);
      res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">'Connection'</span>, <span class="hljs-string">'keep-alive'</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Response</span>(stream.<span class="hljs-property">readable</span>, {
        <span class="hljs-attr">headers</span>: {
          <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'text/event-stream'</span>,
          <span class="hljs-string">'Cache-Control'</span>: <span class="hljs-string">'no-cache'</span>,
          <span class="hljs-string">'Connection'</span>: <span class="hljs-string">'keep-alive'</span>,
        },
      });
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// éæµå¼å“åº”</span>
      <span class="hljs-comment">// é€šä¹‰åƒé—®APIæ”¯æŒsystem messageï¼Œç›´æ¥ä½¿ç”¨åŸå§‹æ¶ˆæ¯</span>
      <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> client.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
        <span class="hljs-attr">model</span>: model || process.<span class="hljs-property">env</span>.<span class="hljs-property">MODEL_NAME</span> || <span class="hljs-string">'qwen-max'</span>,
        messages,
        temperature,
        top_p,
        max_tokens,
      });

      <span class="hljs-keyword">const</span> content = response.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">message</span>?.<span class="hljs-property">content</span> || <span class="hljs-string">''</span>;
      <span class="hljs-keyword">const</span> usage = response.<span class="hljs-property">usage</span>;
      
      res.<span class="hljs-title function_">status</span>(<span class="hljs-number">200</span>).<span class="hljs-title function_">json</span>({ 
        content, 
        <span class="hljs-attr">usage</span>: usage ? {
          <span class="hljs-attr">prompt_tokens</span>: usage.<span class="hljs-property">prompt_tokens</span>,
          <span class="hljs-attr">completion_tokens</span>: usage.<span class="hljs-property">completion_tokens</span>,
          <span class="hljs-attr">total_tokens</span>: usage.<span class="hljs-property">total_tokens</span>,
        } : <span class="hljs-literal">undefined</span>
      });
    }
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error calling Qwen API:'</span>, error);
    
    <span class="hljs-keyword">let</span> errorMessage = <span class="hljs-string">'An error occurred while calling the API'</span>;
    <span class="hljs-keyword">let</span> statusCode = <span class="hljs-number">500</span>;
    
    <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) {
      errorMessage = <span class="hljs-string">'Authentication failed. Please check your API key.'</span>;
      statusCode = <span class="hljs-number">401</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">403</span>) {
      errorMessage = <span class="hljs-string">'Access forbidden. Please check your API permissions.'</span>;
      statusCode = <span class="hljs-number">403</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">429</span>) {
      errorMessage = <span class="hljs-string">'Rate limit exceeded. Please try again later.'</span>;
      statusCode = <span class="hljs-number">429</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">status</span> === <span class="hljs-number">404</span> &amp;&amp; error.<span class="hljs-property">message</span>.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'model'</span>)) {
      errorMessage = <span class="hljs-string">'Model not found or access denied. Please check the model name and your API permissions. Try using "qwen-max" instead of "qwen-max-0102".'</span>;
      statusCode = <span class="hljs-number">404</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (error.<span class="hljs-property">message</span>) {
      errorMessage = error.<span class="hljs-property">message</span>;
    }
    
    res.<span class="hljs-title function_">status</span>(statusCode).<span class="hljs-title function_">json</span>({ 
      <span class="hljs-attr">error</span>: errorMessage,
      <span class="hljs-attr">details</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">'development'</span> ? error.<span class="hljs-title function_">toString</span>() : <span class="hljs-literal">undefined</span>
    });
  }
}
</code></pre>
<p>å…³é”®ç‚¹è§£æï¼š</p>
<ol>
<li><strong>TransformStream</strong>ï¼šNext.js æ¨èçš„æµå¤„ç†æ–¹å¼ï¼Œæ¯”ä¼ ç»Ÿçš„ ReadableStream æ›´çµæ´»</li>
<li><strong>TextEncoder</strong>ï¼šå°†å­—ç¬¦ä¸²è½¬æ¢ä¸º Uint8Arrayï¼Œç¬¦åˆæµä¼ è¾“è¦æ±‚</li>
<li><strong>SSE æ ¼å¼</strong>ï¼šæ•°æ®å¿…é¡»ä»¥ <code>data: </code> å¼€å¤´ï¼Œä»¥ <code>\n\n</code> ç»“å°¾</li>
<li><strong>å¼‚æ­¥ IIFE</strong>ï¼šç«‹å³æ‰§è¡Œçš„å¼‚æ­¥å‡½æ•°ï¼Œé¿å…é˜»å¡å“åº”è¿”å›</li>
<li><strong>é€šä¹‰åƒé—®é€‚é…</strong>ï¼šä½¿ç”¨ OpenAI å…¼å®¹çš„ API å®¢æˆ·ç«¯ï¼Œé€‚é…é€šä¹‰åƒé—® API</li>
</ol>
<h3 data-id="heading-4">å®¢æˆ·ç«¯ï¼šReact ç»„ä»¶å®ç°</h3>
<p>å®¢æˆ·ç«¯éœ€è¦å¤„ç† SSE è¿æ¥å¹¶å®æ—¶æ›´æ–° UIï¼Œä»¥ä¸‹æ˜¯ Qwen Chatbot é¡¹ç›®ä¸­çš„å®ç°ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// pages/chat.tsx (SSE å¤„ç†éƒ¨åˆ†)</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">e: React.FormEvent</span>) =&gt; {
  e.<span class="hljs-title function_">preventDefault</span>();
  <span class="hljs-keyword">if</span> (!inputMessage.<span class="hljs-title function_">trim</span>() || isLoading) <span class="hljs-keyword">return</span>;

  <span class="hljs-comment">// æ·»åŠ ç”¨æˆ·æ¶ˆæ¯</span>
  <span class="hljs-keyword">const</span> userMessage = { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: inputMessage };
  <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_MESSAGE'</span>, <span class="hljs-attr">payload</span>: userMessage });
  <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SET_INPUT_MESSAGE'</span>, <span class="hljs-attr">payload</span>: <span class="hljs-string">''</span> });
  <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">true</span>);

  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// å‡†å¤‡æ¶ˆæ¯æ•°ç»„ï¼Œå¦‚æœé€‰æ‹©äº†è§’è‰²å¹¶ä¸”è¯¥è§’è‰²æœ‰ç³»ç»Ÿæç¤ºï¼Œåˆ™åœ¨å¼€å¤´æ·»åŠ ç³»ç»Ÿæ¶ˆæ¯</span>
    <span class="hljs-keyword">let</span> messagesToSend = [...messages, userMessage];
    
    <span class="hljs-keyword">if</span> (selectedRoleId) {
      <span class="hljs-keyword">const</span> selectedRole = roles.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-property">id</span> === selectedRoleId);
      <span class="hljs-keyword">if</span> (selectedRole &amp;&amp; selectedRole.<span class="hljs-property">systemPrompt</span>) {
        <span class="hljs-comment">// æ£€æŸ¥æ˜¯å¦å·²ç»æœ‰ç³»ç»Ÿæ¶ˆæ¯ï¼Œå¦‚æœæ²¡æœ‰åˆ™æ·»åŠ </span>
        <span class="hljs-keyword">const</span> hasSystemMessage = messages.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">msg</span> =&gt;</span> msg.<span class="hljs-property">role</span> === <span class="hljs-string">'system'</span>);
        <span class="hljs-keyword">if</span> (!hasSystemMessage) {
          messagesToSend = [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'system'</span>, <span class="hljs-attr">content</span>: selectedRole.<span class="hljs-property">systemPrompt</span> }, ...messagesToSend];
        }
      }
    }
    
    <span class="hljs-comment">// å‘é€è¯·æ±‚åˆ°åç«¯ API</span>
    <span class="hljs-comment">// ä½¿ç”¨æµå¼å“åº”è·å–å®æ—¶tokenä½¿ç”¨æƒ…å†µ</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'/api/qwen'</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
      },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">messages</span>: messagesToSend,
        <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ä½¿ç”¨æµå¼å“åº”</span>
        <span class="hljs-attr">model</span>: modelConfig.<span class="hljs-property">model</span>,
        <span class="hljs-attr">temperature</span>: modelConfig.<span class="hljs-property">temperature</span>,
        <span class="hljs-attr">top_p</span>: modelConfig.<span class="hljs-property">top_p</span>,
        <span class="hljs-attr">max_tokens</span>: modelConfig.<span class="hljs-property">max_tokens</span>,
      }),
    });

    <span class="hljs-keyword">if</span> (!response.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">const</span> errorData = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(errorData.<span class="hljs-property">error</span> || <span class="hljs-string">'Failed to get response from API'</span>);
    }

    <span class="hljs-comment">// å¤„ç†æµå¼å“åº”</span>
    <span class="hljs-keyword">const</span> reader = response.<span class="hljs-property">body</span>?.<span class="hljs-title function_">getReader</span>();
    <span class="hljs-keyword">if</span> (!reader) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'Could not read response body'</span>);
    }

    <span class="hljs-keyword">const</span> decoder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextDecoder</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-attr">assistantMessage</span>: <span class="hljs-title class_">Message</span> = { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">usage</span>: <span class="hljs-literal">undefined</span> };
    
    <span class="hljs-comment">// åˆ›å»ºåŠ©æ‰‹æ¶ˆæ¯å¹¶æ·»åŠ åˆ°æ¶ˆæ¯åˆ—è¡¨</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">newAssistantMessage</span>: <span class="hljs-title class_">Message</span> = { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: <span class="hljs-string">''</span>, <span class="hljs-attr">usage</span>: <span class="hljs-literal">undefined</span> };
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_MESSAGE'</span>, <span class="hljs-attr">payload</span>: newAssistantMessage });

    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
      <span class="hljs-keyword">const</span> { done, value } = <span class="hljs-keyword">await</span> reader.<span class="hljs-title function_">read</span>();
      <span class="hljs-keyword">if</span> (done) <span class="hljs-keyword">break</span>;

      <span class="hljs-keyword">const</span> chunk = decoder.<span class="hljs-title function_">decode</span>(value, { <span class="hljs-attr">stream</span>: <span class="hljs-literal">true</span> });
      <span class="hljs-keyword">const</span> lines = chunk.<span class="hljs-title function_">split</span>(<span class="hljs-string">'\n'</span>);

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> line <span class="hljs-keyword">of</span> lines) {
        <span class="hljs-keyword">if</span> (line.<span class="hljs-title function_">startsWith</span>(<span class="hljs-string">'data: '</span>)) {
          <span class="hljs-keyword">const</span> data = line.<span class="hljs-title function_">slice</span>(<span class="hljs-number">6</span>); <span class="hljs-comment">// ç§»é™¤ 'data: ' å‰ç¼€</span>
          
          <span class="hljs-keyword">if</span> (data === <span class="hljs-string">'[DONE]'</span>) {
            <span class="hljs-comment">// æµç»“æŸ</span>
            <span class="hljs-keyword">break</span>;
          }

          <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(data);
            <span class="hljs-keyword">if</span> (parsed.<span class="hljs-property">content</span>) {
              <span class="hljs-comment">// æ›´æ–°æœ€åä¸€æ¡æ¶ˆæ¯çš„å†…å®¹</span>
              assistantMessage.<span class="hljs-property">content</span> += parsed.<span class="hljs-property">content</span>;
              <span class="hljs-comment">// åªæ›´æ–°åŠ©æ‰‹æ¶ˆæ¯ï¼Œä¿ç•™ä¹‹å‰çš„æ¶ˆæ¯</span>
              <span class="hljs-keyword">const</span> updatedMessages = [...messages, { ...assistantMessage }];
              <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SET_MESSAGES'</span>, <span class="hljs-attr">payload</span>: updatedMessages });
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (parsed.<span class="hljs-property">usage</span>) {
              <span class="hljs-comment">// æ›´æ–°æœ€åä¸€æ¡æ¶ˆæ¯çš„ä½¿ç”¨æƒ…å†µ</span>
              assistantMessage.<span class="hljs-property">usage</span> = parsed.<span class="hljs-property">usage</span>;
              <span class="hljs-keyword">const</span> updatedMessages = [...messages, { ...assistantMessage }];
              <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'SET_MESSAGES'</span>, <span class="hljs-attr">payload</span>: updatedMessages });
            }
          } <span class="hljs-keyword">catch</span> (e) {
            <span class="hljs-comment">// å¿½ç•¥æ— æ³•è§£æçš„æ•°æ®è¡Œ</span>
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error parsing data:'</span>, e);
          }
        }
      }
    }
    
    <span class="hljs-comment">// åœ¨æµç»“æŸåè®°å½•å¯¹è¯å†å²</span>
    <span class="hljs-keyword">const</span> updatedMessages = [...messages, assistantMessage]; <span class="hljs-comment">// è·å–åŒ…å«æœ€æ–°æ¶ˆæ¯çš„å®Œæ•´æ¶ˆæ¯åˆ—è¡¨</span>
    <span class="hljs-keyword">const</span> lastAssistantMessage = updatedMessages[updatedMessages.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]; <span class="hljs-comment">// æœ€åä¸€æ¡æ¶ˆæ¯åº”è¯¥æ˜¯åŠ©æ‰‹çš„å›å¤</span>
    
    <span class="hljs-keyword">if</span> (lastAssistantMessage &amp;&amp; lastAssistantMessage.<span class="hljs-property">role</span> === <span class="hljs-string">'assistant'</span>) {
      <span class="hljs-keyword">const</span> <span class="hljs-attr">newHistoryEntry</span>: <span class="hljs-title class_">ConversationHistory</span> = {
        <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-comment">// ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID</span>
        <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
        <span class="hljs-attr">input</span>: inputMessage,
        <span class="hljs-attr">output</span>: lastAssistantMessage.<span class="hljs-property">content</span>,
        <span class="hljs-attr">model</span>: modelConfig.<span class="hljs-property">model</span>,
        <span class="hljs-attr">params</span>: {
          <span class="hljs-attr">temperature</span>: modelConfig.<span class="hljs-property">temperature</span>,
          <span class="hljs-attr">top_p</span>: modelConfig.<span class="hljs-property">top_p</span>,
          <span class="hljs-attr">max_tokens</span>: modelConfig.<span class="hljs-property">max_tokens</span>,
        },
        <span class="hljs-attr">tokenUsage</span>: assistantMessage.<span class="hljs-property">usage</span> ? {
          <span class="hljs-attr">prompt_tokens</span>: assistantMessage.<span class="hljs-property">usage</span>.<span class="hljs-property">prompt_tokens</span>,
          <span class="hljs-attr">completion_tokens</span>: assistantMessage.<span class="hljs-property">usage</span>.<span class="hljs-property">completion_tokens</span>,
          <span class="hljs-attr">total_tokens</span>: assistantMessage.<span class="hljs-property">usage</span>.<span class="hljs-property">total_tokens</span>
        } : <span class="hljs-literal">undefined</span>,
        <span class="hljs-attr">evaluation</span>: <span class="hljs-string">''</span> <span class="hljs-comment">// å¯ä»¥è®©ä½¿ç”¨è€…æ‰‹åŠ¨å¡«å†™æˆ–ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ</span>
      };
      
      <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_TO_HISTORY'</span>, <span class="hljs-attr">payload</span>: newHistoryEntry }); <span class="hljs-comment">// æ·»åŠ åˆ°å†å²è®°å½•å¼€å¤´</span>
    }
  } <span class="hljs-keyword">catch</span> (<span class="hljs-attr">error</span>: <span class="hljs-built_in">any</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error:'</span>, error);
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_MESSAGE'</span>, <span class="hljs-attr">payload</span>: {
      <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>,
      <span class="hljs-attr">content</span>: <span class="hljs-string">`Error: <span class="hljs-subst">${error.message || <span class="hljs-string">'An unknown error occurred'</span>}</span>`</span>
    }});
    
    <span class="hljs-comment">// å³ä½¿å‡ºé”™ä¹Ÿè®°å½•å†å²</span>
    <span class="hljs-keyword">const</span> errorMessage = <span class="hljs-string">`Error: <span class="hljs-subst">${error.message || <span class="hljs-string">'An unknown error occurred'</span>}</span>`</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-attr">newHistoryEntry</span>: <span class="hljs-title class_">ConversationHistory</span> = {
      <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(), <span class="hljs-comment">// ä½¿ç”¨æ—¶é—´æˆ³ä½œä¸ºå”¯ä¸€ID</span>
      <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>(),
      <span class="hljs-attr">input</span>: inputMessage,
      <span class="hljs-attr">output</span>: errorMessage,
      <span class="hljs-attr">model</span>: modelConfig.<span class="hljs-property">model</span>,
      <span class="hljs-attr">params</span>: {
        <span class="hljs-attr">temperature</span>: modelConfig.<span class="hljs-property">temperature</span>,
        <span class="hljs-attr">top_p</span>: modelConfig.<span class="hljs-property">top_p</span>,
        <span class="hljs-attr">max_tokens</span>: modelConfig.<span class="hljs-property">max_tokens</span>,
      },
      <span class="hljs-attr">tokenUsage</span>: <span class="hljs-literal">undefined</span>, <span class="hljs-comment">// é”™è¯¯æƒ…å†µä¸‹æ— tokenä½¿ç”¨æ•°æ®</span>
      <span class="hljs-attr">evaluation</span>: <span class="hljs-string">'Error occurred'</span> <span class="hljs-comment">// æ ‡è®°ä¸ºé”™è¯¯</span>
    };
    
    <span class="hljs-title function_">dispatch</span>({ <span class="hljs-attr">type</span>: <span class="hljs-string">'ADD_TO_HISTORY'</span>, <span class="hljs-attr">payload</span>: newHistoryEntry }); <span class="hljs-comment">// æ·»åŠ åˆ°å†å²è®°å½•å¼€å¤´</span>
  } <span class="hljs-keyword">finally</span> {
    <span class="hljs-title function_">setIsLoading</span>(<span class="hljs-literal">false</span>);
  }
};
</code></pre>
<p>æ ¸å¿ƒå®ç°è¦ç‚¹ï¼š</p>
<ol>
<li><strong>ReadableStream Reader</strong>ï¼šä½¿ç”¨ <code>getReader()</code> é€å—è¯»å–æ•°æ®</li>
<li><strong>TextDecoder</strong>ï¼šå°†äºŒè¿›åˆ¶æ•°æ®è§£ç ä¸ºå­—ç¬¦ä¸²</li>
<li><strong>çŠ¶æ€æ›´æ–°</strong>ï¼šé€šè¿‡ Redux-like çŠ¶æ€ç®¡ç†æ›´æ–°æ¶ˆæ¯</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šå¦¥å–„å¤„ç†è§£æé”™è¯¯å’Œç½‘ç»œå¼‚å¸¸</li>
<li><strong>Token ä½¿ç”¨æƒ…å†µ</strong>ï¼šå®æ—¶æ›´æ–° API è°ƒç”¨çš„ token ä½¿ç”¨æƒ…å†µ</li>
</ol>
<h3 data-id="heading-5">å‰ç«¯æ‰“å­—æœºæ•ˆæœå®ç°</h3>
<p>ä¸ºäº†è®©æµå¼è¾“å‡ºçœ‹èµ·æ¥æ›´è‡ªç„¶ï¼Œæˆ‘ä»¬åœ¨å‰ç«¯å®ç°äº†æ‰“å­—æœºæ•ˆæœï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/TypeWriterEffect.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useState, useEffect, useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'../styles/TypeWriterEffect.module.css'</span>;

<span class="hljs-keyword">interface</span> <span class="hljs-title class_">TypeWriterEffectProps</span> {
  <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>;
  speed?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ‰“å­—é€Ÿåº¦ï¼Œæ¯«ç§’/å­—ç¬¦</span>
  className?: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// è‡ªå®šä¹‰ç±»å</span>
}

<span class="hljs-keyword">const</span> <span class="hljs-title class_">TypeWriterEffect</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">TypeWriterEffectProps</span>&gt; = <span class="hljs-function">(<span class="hljs-params">{ 
  text, 
  speed = <span class="hljs-number">50</span>, // æ”¾æ…¢é€Ÿåº¦åˆ°50ms/å­—ç¬¦ï¼Œè®©æ•ˆæœæ›´æ˜æ˜¾
  className = <span class="hljs-string">''</span>
}</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> [displayedText, setDisplayedText] = <span class="hljs-title function_">useState</span>(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [isTyping, setIsTyping] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">const</span> timeoutRef = useRef&lt;<span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">Timeout</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);

  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// æ¯æ¬¡textå˜åŒ–æ—¶é‡ç½®</span>
    <span class="hljs-title function_">setDisplayedText</span>(<span class="hljs-string">''</span>);
    <span class="hljs-title function_">setIsTyping</span>(<span class="hljs-literal">true</span>);
    
    <span class="hljs-comment">// æ¸…é™¤ä¹‹å‰çš„å®šæ—¶å™¨</span>
    <span class="hljs-keyword">if</span> (timeoutRef.<span class="hljs-property">current</span>) {
      <span class="hljs-built_in">clearTimeout</span>(timeoutRef.<span class="hljs-property">current</span>);
    }

    <span class="hljs-comment">// å¦‚æœæ–‡æœ¬ä¸ºç©ºï¼Œç›´æ¥è¿”å›</span>
    <span class="hljs-keyword">if</span> (!text) {
      <span class="hljs-title function_">setIsTyping</span>(<span class="hljs-literal">false</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// å¼€å§‹æ‰“å­—</span>
    <span class="hljs-keyword">let</span> index = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">const</span> <span class="hljs-title function_">typeNextChar</span> = (<span class="hljs-params"/>) =&gt; {
      <span class="hljs-keyword">if</span> (index &lt; text.<span class="hljs-property">length</span>) {
        <span class="hljs-keyword">const</span> char = text[index];
        <span class="hljs-comment">// ç¡®ä¿å­—ç¬¦ä¸æ˜¯undefinedæˆ–null</span>
        <span class="hljs-keyword">if</span> (char !== <span class="hljs-literal">undefined</span> &amp;&amp; char !== <span class="hljs-literal">null</span>) {
          <span class="hljs-comment">// å¼ºåˆ¶æ›´æ–°ï¼Œé¿å…Reactä¼˜åŒ–</span>
          <span class="hljs-title function_">setDisplayedText</span>(<span class="hljs-function"><span class="hljs-params">prev</span> =&gt;</span> prev + <span class="hljs-title class_">String</span>(char));
        }
        index++;
        timeoutRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(typeNextChar, speed);
      } <span class="hljs-keyword">else</span> {
        <span class="hljs-title function_">setIsTyping</span>(<span class="hljs-literal">false</span>);
      }
    };

    timeoutRef.<span class="hljs-property">current</span> = <span class="hljs-built_in">setTimeout</span>(typeNextChar, speed);

    <span class="hljs-comment">// æ¸…ç†</span>
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-keyword">if</span> (timeoutRef.<span class="hljs-property">current</span>) {
        <span class="hljs-built_in">clearTimeout</span>(timeoutRef.<span class="hljs-property">current</span>);
      }
    };
  }, [text, speed]);

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">styles.typeWriterText</span>} ${<span class="hljs-attr">className</span>}`}&gt;</span>
      {displayedText}
      {isTyping &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.cursor}</span>&gt;</span>|<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>}
    <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span>
  );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">TypeWriterEffect</span>;
</code></pre>
<h2 data-id="heading-6">æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h2>
<h3 data-id="heading-7">1. èƒŒå‹å¤„ç†ï¼ˆBackpressureï¼‰</h3>
<p>å½“å®¢æˆ·ç«¯å¤„ç†é€Ÿåº¦è·Ÿä¸ä¸ŠæœåŠ¡ç«¯å‘é€é€Ÿåº¦æ—¶ï¼Œéœ€è¦å®ç°èƒŒå‹æœºåˆ¶ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> writer = stream.<span class="hljs-property">writable</span>.<span class="hljs-title function_">getWriter</span>();

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">writeWithBackpressure</span>(<span class="hljs-params">data: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">await</span> writer.<span class="hljs-property">ready</span>; <span class="hljs-comment">// ç­‰å¾…ç¼“å†²åŒºå¯å†™</span>
  <span class="hljs-keyword">await</span> writer.<span class="hljs-title function_">write</span>(encoder.<span class="hljs-title function_">encode</span>(data));
}
</code></pre>
<h3 data-id="heading-8">2. åˆ†å—ç­–ç•¥</h3>
<p>åˆç†æ§åˆ¶æ¯æ¬¡å‘é€çš„æ•°æ®é‡ï¼Œé¿å…è¿‡å°ï¼ˆé¢‘ç¹ç½‘ç»œå¼€é”€ï¼‰æˆ–è¿‡å¤§ï¼ˆå¤±å»æµå¼æ•ˆæœï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">let</span> buffer = <span class="hljs-string">''</span>;
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CHUNK_SIZE</span> = <span class="hljs-number">50</span>; <span class="hljs-comment">// æ¯ 50 ä¸ªå­—ç¬¦å‘é€ä¸€æ¬¡</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> char <span class="hljs-keyword">of</span> response) {
  buffer += char;
  <span class="hljs-keyword">if</span> (buffer.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable constant_">CHUNK_SIZE</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">writeWithBackpressure</span>(<span class="hljs-string">`data: <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify({ content: buffer })}</span>\n\n`</span>);
    buffer = <span class="hljs-string">''</span>;
  }
}
</code></pre>
<h3 data-id="heading-9">3. è¿æ¥ç®¡ç†</h3>
<p>å®ç°å¿ƒè·³æ£€æµ‹ï¼Œé˜²æ­¢è¿æ¥æ„å¤–æ–­å¼€ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// æœåŠ¡ç«¯å®šæœŸå‘é€å¿ƒè·³</span>
<span class="hljs-keyword">const</span> heartbeatInterval = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
  writer.<span class="hljs-title function_">write</span>(encoder.<span class="hljs-title function_">encode</span>(<span class="hljs-string">': heartbeat\n\n'</span>));
}, <span class="hljs-number">30000</span>);

<span class="hljs-comment">// æ¸…ç†</span>
process.<span class="hljs-title function_">on</span>(<span class="hljs-string">'exit'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">clearInterval</span>(heartbeatInterval));
</code></pre>
<h2 data-id="heading-10">å®æˆ˜æ¡ˆä¾‹ï¼šQwen Chatbot ä¸­çš„é›†æˆ</h2>
<p>åœ¨ Qwen Chatbot é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥ä¸ŠæŠ€æœ¯æ•´åˆåˆ°äº†çœŸå®çš„ AI å¯¹è¯ç³»ç»Ÿä¸­ï¼š</p>
<ol>
<li><strong>æ¶ˆæ¯ç»„ä»¶é›†æˆ</strong>ï¼šåœ¨ ChatWindow ç»„ä»¶ä¸­ä½¿ç”¨ TypeWriterEffect æ˜¾ç¤ºåŠ©æ‰‹å›å¤</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šä½¿ç”¨å…¨å±€çŠ¶æ€ç®¡ç†å™¨è·Ÿè¸ªæ¶ˆæ¯æµ</li>
<li><strong>å®æ—¶æ›´æ–°</strong>ï¼šSSE æµå®æ—¶æ›´æ–°åŠ©æ‰‹æ¶ˆæ¯å†…å®¹</li>
<li><strong>æ‰“å­—æ•ˆæœ</strong>ï¼šå‰ç«¯å®ç°çš„æ‰“å­—æœºæ•ˆæœå¢å¼ºç”¨æˆ·ä½“éªŒ</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// components/ChatWindow.tsx</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">TypeWriterEffect</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./TypeWriterEffect'</span>;

<span class="hljs-comment">// ...</span>

{messages.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">msg, index</span>) =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{index}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">styles.message</span>} ${<span class="hljs-attr">styles</span>[<span class="hljs-attr">msg.role</span>]}`}&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.avatar}</span>&gt;</span>
      {msg.role === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.content}</span>&gt;</span>
      {msg.role === 'assistant' ? (
        <span class="hljs-tag">&lt;<span class="hljs-name">TypeWriterEffect</span> <span class="hljs-attr">text</span>=<span class="hljs-string">{msg.content}</span> <span class="hljs-attr">speed</span>=<span class="hljs-string">{20}</span> /&gt;</span>
      ) : (
        msg.content
      )}
      {msg.usage &amp;&amp; (
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.tokenInfo}</span>&gt;</span>
          Tokens: {msg.usage.total_tokens} (Prompt: {msg.usage.prompt_tokens}, Completion: {msg.usage.completion_tokens})
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
      )}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
))}
</code></pre>
<h2 data-id="heading-11">æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<ol>
<li><strong>è¶…æ—¶å¤„ç†</strong>ï¼šè®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´ï¼Œé¿å…è¿æ¥æ°¸ä¹…æŒ‚èµ·</li>
<li><strong>é”™è¯¯æ¢å¤</strong>ï¼šå®¢æˆ·ç«¯åº”å®ç°é‡è¯•æœºåˆ¶ï¼Œå¤„ç†ç½‘ç»œæ³¢åŠ¨</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼šç¡®ä¿ writer å’Œ reader æ­£ç¡®å…³é—­ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</li>
<li><strong>CORS é…ç½®</strong>ï¼šè·¨åŸŸåœºæ™¯éœ€è¦æ­£ç¡®é…ç½®å“åº”å¤´</li>
<li><strong>è¿›åº¦æŒ‡ç¤º</strong>ï¼šæä¾›æ˜ç¡®çš„åŠ è½½çŠ¶æ€ï¼Œè®©ç”¨æˆ·çŸ¥é“ç³»ç»Ÿæ­£åœ¨å·¥ä½œ</li>
<li><strong>æ‰“å­—æœºæ•ˆæœä¼˜åŒ–</strong>ï¼šä¸èƒ½ä¾èµ– SSE è¿”å›ç²’åº¦ï¼Œå¿…é¡»åœ¨å‰ç«¯ä¸»åŠ¨æ§åˆ¶æ˜¾ç¤ºèŠ‚å¥</li>
<li><strong>API å…¼å®¹æ€§</strong>ï¼šé€‚é…ä¸åŒ LLM æä¾›å•†çš„ API æ ¼å¼å·®å¼‚</li>
</ol>
<h2 data-id="heading-12">æ€»ç»“</h2>
<p>æµå¼è¾“å‡ºé€šè¿‡ SSE å’Œå¼‚æ­¥å¤„ç†æŠ€æœ¯ï¼Œå°†"ç­‰å¾…-è¿”å›"çš„äº¤äº’æ¨¡å¼è½¬å˜ä¸º"å®æ—¶åé¦ˆ"çš„ä½“éªŒã€‚åœ¨ Qwen Chatbot é¡¹ç›®ä¸­ï¼Œå€ŸåŠ© Next.js å’Œ Web Streams APIï¼Œæˆ‘ä»¬ä¼˜é›…åœ°å®ç°äº†è¿™ä¸€åŠŸèƒ½ã€‚æ— è®ºæ˜¯ AI å¯¹è¯ã€æ•°æ®å¤„ç†è¿˜æ˜¯å®æ—¶æ—¥å¿—ï¼Œæµå¼è¾“å‡ºéƒ½èƒ½æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<p>é€šè¿‡ç»“åˆåç«¯æµå¼ä¼ è¾“å’Œå‰ç«¯æ‰“å­—æœºæ•ˆæœï¼Œæˆ‘ä»¬å®ç°äº†æ—¢é«˜æ•ˆåˆç›´è§‚çš„ç”¨æˆ·äº¤äº’ä½“éªŒã€‚éšç€ Web æŠ€æœ¯çš„å‘å±•ï¼Œæµå¼å¤„ç†å°†æˆä¸ºæ„å»ºç°ä»£ AI åº”ç”¨çš„æ ‡é…èƒ½åŠ›ã€‚æŒæ¡è¿™é¡¹æŠ€æœ¯ï¼Œè®©ä½ çš„åº”ç”¨æ›´åŠ æµç•…ã€å“åº”æ›´åŠ è¿…é€Ÿï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´å¥½çš„äº¤äº’ä½“éªŒã€‚</p>
<hr/>
<h3 data-id="heading-13">é¡¹ç›®åœ°å€</h3>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjianzhang96%2Fllm%2Ftree%2Fmain%2Fqwen-chatbot" target="_blank" title="https://github.com/jianzhang96/llm/tree/main/qwen-chatbot" ref="nofollow noopener noreferrer">github.com/jianzhang96â€¦</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fcodehub%2Fllm%2Ftree%2Fmain%2Fqwen-chatbot" target="_blank" title="https://gitee.com/codehub/llm/tree/main/qwen-chatbot" ref="nofollow noopener noreferrer">gitee.com/codehub/llmâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentèƒ½åŠ›æ‰©å±•ä¸¤å¤§å…³é”®è·¯å¾„ï¼šä¸€æ–‡è¯»æ‡‚Agent Skillså’ŒMCPåè®®çš„æ ¸å¿ƒåŸç†ä¸è®¾è®¡å“²å­¦]]></title>    <link>https://juejin.cn/post/7602146335215779880</link>    <guid>https://juejin.cn/post/7602146335215779880</guid>    <pubDate>2026-02-03T03:02:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602146335215779880" data-draft-id="7602135278665318452" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentèƒ½åŠ›æ‰©å±•ä¸¤å¤§å…³é”®è·¯å¾„ï¼šä¸€æ–‡è¯»æ‡‚Agent Skillså’ŒMCPåè®®çš„æ ¸å¿ƒåŸç†ä¸è®¾è®¡å“²å­¦"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-03T03:02:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸­æ¯å¯ä¹å¤šåŠ å†°"/> <meta itemprop="url" content="https://juejin.cn/user/3435306702347432"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentèƒ½åŠ›æ‰©å±•ä¸¤å¤§å…³é”®è·¯å¾„ï¼šä¸€æ–‡è¯»æ‡‚Agent Skillså’ŒMCPåè®®çš„æ ¸å¿ƒåŸç†ä¸è®¾è®¡å“²å­¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3435306702347432/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸­æ¯å¯ä¹å¤šåŠ å†°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:02:26.000Z" title="Tue Feb 03 2026 03:02:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>éšç€å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰çš„é£é€Ÿå‘å±•ï¼Œäººå·¥æ™ºèƒ½çš„åº”ç”¨èŒƒå¼æ­£ä»å•ä¸€çš„â€œå¯¹è¯â€æ¨¡å¼ï¼Œé€æ­¥æ¼”è¿›è‡³èƒ½å¤Ÿè‡ªä¸»â€œè¡ŒåŠ¨â€çš„æ™ºèƒ½ä½“ï¼ˆAI Agentï¼‰æ—¶ä»£ã€‚</p>
<p>è¿™äº›æ™ºèƒ½ä½“ä¸å†ä»…ä»…æ˜¯ä¿¡æ¯é—®ç­”çš„å·¥å…·ï¼Œå®ƒä»¬è¢«èµ‹äºˆäº†ç†è§£å¤æ‚æŒ‡ä»¤ã€è§„åˆ’ä»»åŠ¡ã€è°ƒç”¨å¤–éƒ¨å·¥å…·ä¹ƒè‡³ä¸çœŸå®ä¸–ç•Œäº¤äº’çš„èƒ½åŠ›ã€‚ç„¶è€Œï¼Œè¦è®© AI æ™ºèƒ½ä½“çœŸæ­£å‘æŒ¥å…¶æ½œåŠ›ï¼Œå®ç°é€šç”¨åŒ–ã€å¯æ‰©å±•ä¸”å®‰å…¨å¯é çš„èƒ½åŠ›ï¼Œå…¶èƒŒåéœ€è¦ä¸€å¥—é«˜æ•ˆä¸”çµæ´»çš„æœºåˆ¶æ¥ç®¡ç†å’Œæ‰©å±•å…¶åŠŸèƒ½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f976ba0c30e5430d8d7446b170cd7f49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=AWQ%2FRlA3yA5Xaw5uefJ17VE7jBU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼ŒAgent Skills å’Œ Model Context Protocol (MCP)å·²æˆä¸ºæ‰©å±• AI æ™ºèƒ½ä½“èƒ½åŠ›çš„ä¸¤å¤§æ ¸å¿ƒæŠ€æœ¯è·¯å¾„</strong>ã€‚Agent Skills ä¾§é‡äºå°†é¢†åŸŸä¸“ä¸šçŸ¥è¯†å’Œå·¥ä½œæµä»¥æ–‡ä»¶åŒ–çš„å½¢å¼è¿›è¡Œå°è£…ï¼Œ<strong>å¼ºè°ƒä¾¿æºæ€§å’Œå¯è¯»æ€§</strong>ï¼›è€Œ MCP åˆ™è‡´åŠ›äºæ„å»ºä¸€å¥—æ ‡å‡†åŒ–çš„é€šä¿¡åè®®ï¼Œ<strong>æ—¨åœ¨å°† AI åº”ç”¨ç¨‹åºä¸å„ç§å¤–éƒ¨å·¥å…·ã€æ•°æ®æºå’Œç³»ç»Ÿæ— ç¼è¿æ¥</strong>ã€‚</p>
<p>ä¸¤è€…è™½ç„¶åœ¨è®¾è®¡ç†å¿µå’Œå®ç°è·¯å¾„ä¸Šæœ‰æ‰€å·®å¼‚ï¼Œä½†å…±åŒçš„ç›®æ ‡éƒ½æ˜¯ä¸ºäº†èµ‹èƒ½ AI æ™ºèƒ½ä½“ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†æ›´å¹¿æ³›ã€æ›´å¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ <strong>Agent Skills å’Œ MCP</strong> çš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒåŸç†ï¼Œå¹¶è¯¦ç»†å¯¹æ¯”ä¸¤è€…çš„å¼‚åŒä¸å„è‡ªçš„ä¼˜åŠ¿ï¼Œå¹¶æ¢è®¨å®ƒä»¬åœ¨å®é™…åº”ç”¨ä¸­çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-1">ä¸€ã€Agent Skillsï¼šåŸºäºæ–‡ä»¶çš„ä¾¿æºå¼èƒ½åŠ›å°è£…</h2>
<h3 data-id="heading-2">1.1ã€æ ¸å¿ƒå®šä¹‰ä¸è®¾è®¡å“²å­¦</h3>
<p>Agent Skillsï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯èµ‹äºˆ AI æ™ºèƒ½ä½“ç‰¹å®šâ€œæŠ€èƒ½â€çš„ä¸€ç§æœºåˆ¶ã€‚å®ƒå¹¶éä¸€ä¸ªå¤æ‚çš„æ¡†æ¶æˆ–åè®®ï¼Œè€Œæ˜¯ä¸€ç§<strong>åŸºäºæ–‡ä»¶çš„ã€ä¾¿æºå¼çš„æ ¼å¼</strong>ï¼Œæ—¨åœ¨å°†ç‰¹å®šçš„é¢†åŸŸä¸“ä¸šçŸ¥è¯†ã€è‡ªåŠ¨åŒ–å·¥ä½œæµä»¥åŠå¯æ‰§è¡Œä»£ç ï¼Œä»¥è‡ªåŒ…å«çš„æ–¹å¼å°è£…åœ¨ä¸€ä¸ªä¸ªç‹¬ç«‹çš„æŠ€èƒ½ç›®å½•ä¸­ã€‚å…¶æ ¸å¿ƒè®¾è®¡å“²å­¦åœ¨äº<strong>ç®€åŒ–èƒ½åŠ›æ‰©å±•çš„é—¨æ§›ï¼Œå¼ºè°ƒå¯è¯»æ€§ã€å¯ç§»æ¤æ€§ä¸ä½é›†æˆæˆæœ¬</strong>ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24bd24b7e2f14127b7ce35ab7b2adb49~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=i1a8GOZWctnClccmuByNpIQBSuQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å¦‚æœå°† AI æ™ºèƒ½ä½“æ¯”ä½œä¸€ä¸ªæ‹¥æœ‰æ— é™å­¦ä¹ æ½œåŠ›çš„å­¦ç”Ÿï¼Œé‚£ä¹ˆ Agent Skills å°±å¦‚åŒä¸ºè¿™ä¸ªå­¦ç”Ÿå‡†å¤‡çš„ä¸€æœ¬æœ¬ç²¾å¿ƒç¼–æ’°çš„â€œæ•™æâ€æˆ–â€œæ“ä½œæ‰‹å†Œâ€ã€‚ä¸ä¼ ç»ŸPromptä¸åŒï¼Œè¿™äº›æ‰‹å†Œä¸ä»…åŒ…å«äº†ç†è®ºçŸ¥è¯†ï¼ˆé¢†åŸŸä¸“ä¸šçŸ¥è¯†ï¼‰ï¼Œè¿˜<strong>æä¾›äº†å…·ä½“çš„å®è·µæ­¥éª¤ï¼ˆè‡ªåŠ¨åŒ–å·¥ä½œæµï¼‰å’Œå¯ä¾›æ‰§è¡Œçš„å·¥å…·ï¼ˆå¯æ‰§è¡Œä»£ç ï¼‰</strong>ã€‚è¿™ç§æ–‡ä»¶åŒ–çš„å°è£…æ–¹å¼ï¼Œä½¿å¾—æŠ€èƒ½çš„åˆ›å»ºè€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«ï¼Œè€Œæ— éœ€è¿‡å¤šå…³æ³¨å¤æ‚çš„é€šä¿¡åè®®æˆ–éƒ¨ç½²ç»†èŠ‚ã€‚é€šè¿‡å°†æŠ€èƒ½ä»¥æ–‡ä»¶ç›®å½•çš„å½¢å¼ç»„ç»‡èµ·æ¥ï¼ŒAgent Skills å®ç°äº†<strong>é«˜åº¦çš„æ¨¡å—åŒ–</strong>ï¼Œæ¯ä¸ªæŠ€èƒ½éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å•å…ƒï¼Œå¯ä»¥è½»æ¾åœ°è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€åˆ†äº«å’Œå¤ç”¨ã€‚</p>
<p>è¿™ç§è®¾è®¡ç†å¿µçš„ä¼˜åŠ¿åœ¨äºï¼Œå®ƒæå¤§åœ°é™ä½äº† AI æ™ºèƒ½ä½“è·å–æ–°èƒ½åŠ›çš„æŠ€æœ¯å£å’ã€‚å¼€å‘è€…æˆ–é¢†åŸŸä¸“å®¶åªéœ€éµå¾ªä¸€å¥—ç®€å•çš„æ–‡ä»¶ç»“æ„è§„èŒƒï¼Œå³å¯å°†è‡ªå·±çš„ä¸“ä¸šçŸ¥è¯†è½¬åŒ–ä¸º AI æ™ºèƒ½ä½“å¯ç†è§£å’Œæ‰§è¡Œçš„æŠ€èƒ½ã€‚è¿™ç§â€œ<strong>å³æ’å³ç”¨</strong>â€çš„ç‰¹æ€§ï¼Œä½¿å¾— AI æ™ºèƒ½ä½“èƒ½å¤Ÿå¿«é€Ÿé€‚åº”æ–°çš„ä»»åŠ¡åœºæ™¯ï¼Œæœ‰æ•ˆåº”å¯¹ä¸æ–­å˜åŒ–çš„ä¸šåŠ¡éœ€æ±‚ã€‚åŒæ—¶ï¼Œç”±äºå…¶æ–‡ä»¶åŒ–çš„æœ¬è´¨ï¼ŒAgent Skills å¤©ç„¶å…·å¤‡<strong>è‰¯å¥½çš„å¯è¯»æ€§</strong>ï¼Œäººç±»å¼€å‘è€…å¯ä»¥ç›´è§‚åœ°ç†è§£æŠ€èƒ½çš„å†…éƒ¨é€»è¾‘ï¼Œä»è€Œä¾¿äºè°ƒè¯•ã€ç»´æŠ¤å’Œåä½œã€‚</p>
<h3 data-id="heading-3">1.2ã€SKILL.md çš„ç»“æ„åŒ–è§£æ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0557a35a04842539a60aceb62b942d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=OcpYHN%2BQxPZrTUka9x0HfODcghQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Agent Skills çš„æ ¸å¿ƒåœ¨äºå…¶å¯¹ <code>SKILL.md</code> æ–‡ä»¶çš„å®šä¹‰ã€‚è¿™ä¸ªæ–‡ä»¶æ˜¯æ¯ä¸ªæŠ€èƒ½çš„â€œèº«ä»½è¯â€å’Œâ€œè¯´æ˜ä¹¦â€ï¼Œå®ƒä»¥ä¸€ç§äººç±»å¯è¯»ä¸”æœºå™¨å¯è§£æçš„æ ¼å¼ï¼Œè¯¦ç»†æè¿°äº†æŠ€èƒ½çš„å…ƒæ•°æ®ã€ä½¿ç”¨è¯´æ˜ä»¥åŠå¦‚ä½•è°ƒç”¨å…¶å†…éƒ¨èµ„æºã€‚<code>SKILL.md</code> é€šå¸¸é‡‡ç”¨ <strong>YAML å‰ç½®å…ƒæ•°æ®ï¼ˆYAML Front Matterï¼‰ç»“åˆ Markdown æŒ‡ä»¤</strong>çš„æ–¹å¼ç¼–å†™ï¼Œè¿™ä½¿å¾—å®ƒæ—¢èƒ½æ‰¿è½½ç»“æ„åŒ–çš„ä¿¡æ¯ï¼Œåˆèƒ½æä¾›ä¸°å¯Œçš„æ–‡æœ¬æè¿°ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1bd16fad3368487d85e56eaeb3db1630~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=VTqGSxeK8wjJ2Lx5I%2FY7Bnk%2FJfk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
ä¸€ä¸ªå®Œæ•´çš„skill.mdåŸºæœ¬å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">---
name: pdf-processing
description: ä» PDF æ–‡ä»¶ä¸­æå–æ–‡æœ¬å’Œè¡¨æ ¼ã€å¡«å†™è¡¨å•ã€åˆå¹¶æ–‡æ¡£
version: <span class="hljs-number">1.0</span><span class="hljs-number">.0</span>
author: Example Team
---

# PDF å¤„ç†æŠ€èƒ½

## æŠ€èƒ½æ¦‚è¿°
è¿™ä¸ªæŠ€èƒ½å¸®åŠ©æ™ºèƒ½ä½“å¤„ç†å„ç§ PDF ç›¸å…³ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ–‡æœ¬æå–ã€è¡¨æ ¼è§£æã€æ–‡æ¡£åˆå¹¶ç­‰æ“ä½œã€‚

## ä½•æ—¶ä½¿ç”¨æ­¤æŠ€èƒ½
å½“ç”¨æˆ·æå‡ºä»¥ä¸‹éœ€æ±‚æ—¶æ¿€æ´»æ­¤æŠ€èƒ½ï¼š
- ä» PDF ä¸­æå–æ–‡æœ¬æˆ–æ•°æ®
- è§£æ PDF ä¸­çš„è¡¨æ ¼ç»“æ„
- åˆå¹¶å¤šä¸ª PDF æ–‡ä»¶
- å¡«å†™ PDF è¡¨å•
- å°† PDF è½¬æ¢ä¸ºå…¶ä»–æ ¼å¼

## å‰ç½®è¦æ±‚
- ç¡®è®¤ç¯å¢ƒä¸­å·²å®‰è£… `PyPDF2` å’Œ `pdfplumber` åº“
- å¯¹äº OCR åŠŸèƒ½ï¼Œéœ€è¦ `pytesseract`
- æ£€æŸ¥ PDF æ–‡ä»¶æ˜¯å¦å¯è®¿é—®ä¸”æœªåŠ å¯†

## æ“ä½œæ­¥éª¤

### <span class="hljs-number">1.</span> æ–‡æœ¬æå–
<span class="hljs-string">'''</span>python
# ä½¿ç”¨ scripts/extract_text.py
python scripts/extract_text.py --input document.pdf --output output.txt
<span class="hljs-string">'''</span>
### <span class="hljs-number">2.</span> è¡¨æ ¼è§£æ

- ä½¿ç”¨ `pdfplumber` è¯†åˆ«è¡¨æ ¼è¾¹ç•Œ
- å°†è¡¨æ ¼æ•°æ®è½¬æ¢ä¸º CSV æˆ– JSON æ ¼å¼
- å‚è€ƒ `references/table-parsing-guide.md` äº†è§£å¤æ‚è¡¨æ ¼å¤„ç†æ–¹æ³•

### <span class="hljs-number">3.</span> PDF åˆå¹¶

<span class="hljs-string">'''</span>python
# ä½¿ç”¨ scripts/merge_pdfs.py
python scripts/merge_pdfs.py --files file1.pdf file2.pdf --output merged.pdf
<span class="hljs-string">'''</span>
### <span class="hljs-number">4.</span> å¤„ç†æ‰«æä»¶

- å¦‚æœ PDF æ˜¯æ‰«æå›¾åƒï¼Œå…ˆè°ƒç”¨ OCR åŠŸèƒ½
- è¯¦ç»†æ­¥éª¤å‚è§ `references/ocr-guide.md`
- ä½¿ç”¨ Tesseract è¿›è¡Œæ–‡å­—è¯†åˆ«

## å¸¸è§é—®é¢˜å¤„ç†

- **åŠ å¯† PDF**ï¼šæç¤ºç”¨æˆ·æä¾›å¯†ç æˆ–ä½¿ç”¨è§£å¯†å·¥å…·
- **æŸåæ–‡ä»¶**ï¼šå°è¯•ä½¿ç”¨ PDF ä¿®å¤å·¥å…·
- **å¤§æ–‡ä»¶**ï¼šåˆ†æ‰¹å¤„ç†ï¼Œé¿å…å†…å­˜æº¢å‡º

## è¾“å‡ºæ ¼å¼

æ ¹æ®ä»»åŠ¡ç±»å‹è¿”å›ï¼š

- çº¯æ–‡æœ¬ï¼š`.txt` æ–‡ä»¶
- è¡¨æ ¼æ•°æ®ï¼š`.csv` æˆ– `.json` æ–‡ä»¶
- åˆå¹¶æ–‡æ¡£ï¼šæ–°çš„ `.pdf` æ–‡ä»¶

## å‚è€ƒä¿¡æ¯

- `references/pdf-standards.md` - PDF æ ¼å¼æ ‡å‡†è¯´æ˜
- `references/ocr-guide.md` - OCR æœ€ä½³å®è·µ
- `references/troubleshooting.md` - å¸¸è§é—®é¢˜æ’æŸ¥
</code></pre>
<p><strong>YAML å‰ç½®å…ƒæ•°æ®</strong>éƒ¨åˆ†é€šå¸¸åŒ…å«æŠ€èƒ½çš„åç§°ã€æè¿°ã€ä½œè€…ã€ç‰ˆæœ¬ã€è®¸å¯è¯ä»¥åŠæ‰€éœ€çš„å…¼å®¹æ€§ä¿¡æ¯ç­‰ã€‚è¿™äº›å…ƒæ•°æ®ä¸º AI æ™ºèƒ½ä½“æä¾›äº†å…³äºæŠ€èƒ½çš„æ¦‚è§ˆä¿¡æ¯ï¼Œå¸®åŠ©å…¶åœ¨ä¼—å¤šæŠ€èƒ½ä¸­å¿«é€Ÿå‘ç°å’ŒåŒ¹é…ä»»åŠ¡éœ€æ±‚ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ•°æ®åˆ†ææŠ€èƒ½çš„å…ƒæ•°æ®å¯èƒ½ä¼šå£°æ˜å®ƒéœ€è¦ <code>pandas</code> å’Œ <code>matplotlib</code> åº“ï¼Œä»¥ä¾¿ AI æ™ºèƒ½ä½“åœ¨åŠ è½½å‰æ£€æŸ¥ç¯å¢ƒä¾èµ–ã€‚</p>
<p><strong>Markdown æŒ‡ä»¤</strong>éƒ¨åˆ†åˆ™è¯¦ç»†é˜è¿°äº†æŠ€èƒ½çš„ä½¿ç”¨æ–¹æ³•ã€è¾“å…¥å‚æ•°ã€é¢„æœŸè¾“å‡ºä»¥åŠä»»ä½•å¿…è¦çš„æ‰§è¡Œæ­¥éª¤ã€‚è¿™éƒ¨åˆ†å†…å®¹é€šå¸¸ä»¥æ¸…æ™°çš„è‡ªç„¶è¯­è¨€ç¼–å†™ï¼Œè¾…ä»¥ä»£ç ç¤ºä¾‹æˆ–å‘½ä»¤è¡ŒæŒ‡ä»¤ï¼Œç¡®ä¿ AI æ™ºèƒ½ä½“èƒ½å¤Ÿå‡†ç¡®ç†è§£å¹¶æ‰§è¡ŒæŠ€èƒ½ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå›¾åƒå¤„ç†æŠ€èƒ½çš„ Markdown æŒ‡ä»¤å¯èƒ½ä¼šè¯´æ˜å¦‚ä½•æŒ‡å®šè¾“å…¥å›¾åƒè·¯å¾„ã€é€‰æ‹©å¤„ç†æ¨¡å¼ï¼ˆå¦‚è£å‰ªã€ç¼©æ”¾ï¼‰ä»¥åŠè¾“å‡ºè·¯å¾„ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/38faf2f7430b4b30b1839dbae2b6f738~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=baT0A7hQvUL7JeSpQwJBlihtGCc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Agent Skills å¼•å…¥äº†<strong>æ¸è¿›å¼åŠ è½½æœºåˆ¶</strong>ï¼Œè¿™æ˜¯å…¶é«˜æ•ˆæ€§çš„å…³é”®ã€‚è¿™ä¸ªæœºåˆ¶å°†æŠ€èƒ½çš„åŠ è½½è¿‡ç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>å…ƒæ•°æ®ï¼ˆMetadataï¼‰åŠ è½½</strong>ï¼šAI æ™ºèƒ½ä½“é¦–å…ˆåŠ è½½ <code>SKILL.md</code> ä¸­çš„ YAML å…ƒæ•°æ®ã€‚è¿™ä¸€é˜¶æ®µçš„å¼€é”€æä½ï¼Œé€šå¸¸åªæ¶‰åŠå‡ ååˆ°å‡ ç™¾ä¸ª Token çš„å¤„ç†ã€‚æ™ºèƒ½ä½“å¯ä»¥åŸºäºè¿™äº›è½»é‡çº§çš„å…ƒæ•°æ®å¿«é€Ÿåˆ¤æ–­æŠ€èƒ½æ˜¯å¦ä¸å½“å‰ä»»åŠ¡ç›¸å…³ï¼Œä»è€Œé¿å…åŠ è½½ä¸å¿…è¦çš„å®Œæ•´æŠ€èƒ½å†…å®¹ã€‚</li>
<li><strong>æŒ‡ä»¤ï¼ˆInstructionsï¼‰åŠ è½½</strong>ï¼šå¦‚æœå…ƒæ•°æ®è¡¨æ˜æŠ€èƒ½å¯èƒ½ç›¸å…³ï¼Œæ™ºèƒ½ä½“å°†è¿›ä¸€æ­¥åŠ è½½ <code>SKILL.md</code> ä¸­çš„ Markdown æŒ‡ä»¤éƒ¨åˆ†ã€‚è¿™ä¸€é˜¶æ®µæä¾›äº†æŠ€èƒ½çš„è¯¦ç»†ä½¿ç”¨è¯´æ˜ï¼Œå¸®åŠ©æ™ºèƒ½ä½“ç†è§£å¦‚ä½•ä¸æŠ€èƒ½äº¤äº’ï¼ŒåŒ…æ‹¬è¾“å…¥å‚æ•°çš„æ ¼å¼ã€æ‰§è¡Œé€»è¾‘ç­‰ã€‚æ­¤æ—¶ï¼Œæ™ºèƒ½ä½“å·²ç»å¯¹æŠ€èƒ½æœ‰äº†è¾ƒä¸ºå…¨é¢çš„è®¤è¯†ï¼Œå¯ä»¥è¿›è¡Œæ›´ç²¾ç¡®çš„ä»»åŠ¡åŒ¹é…å’Œè§„åˆ’ã€‚</li>
<li><strong>èµ„æºï¼ˆResourcesï¼‰åŠ è½½</strong>ï¼šåªæœ‰å½“æ™ºèƒ½ä½“ç¡®å®šéœ€è¦æ‰§è¡ŒæŸä¸ªæŠ€èƒ½æ—¶ï¼Œæ‰ä¼šæŒ‰éœ€åŠ è½½å…¶å…³è”çš„å¤–éƒ¨èµ„æºï¼Œä¾‹å¦‚ <code>scripts/</code> ç›®å½•ä¸‹çš„å¯æ‰§è¡Œè„šæœ¬ã€<code>references/</code> ç›®å½•ä¸‹çš„æ–‡æ¡£æˆ– <code>assets/</code> ç›®å½•ä¸‹çš„æ•°æ®æ–‡ä»¶ã€‚è¿™ç§æŒ‰éœ€åŠ è½½çš„ç­–ç•¥æå¤§åœ°ä¼˜åŒ–äº†èµ„æºåˆ©ç”¨ç‡ï¼Œé¿å…äº†ä¸å¿…è¦çš„å†…å­˜å ç”¨å’Œè®¡ç®—å¼€é”€ï¼Œå°¤å…¶æ˜¯åœ¨æ‹¥æœ‰å¤§é‡æŠ€èƒ½çš„å¤æ‚ç³»ç»Ÿä¸­ï¼Œå…¶ä¼˜åŠ¿æ›´ä¸ºæ˜æ˜¾ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9119218345ce4f48872285fa6c8f48fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=q9oUHm7KIOOV0KICHO6RgHo5SWk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></li>
</ol>
<p>è¿™ç§åˆ†é˜¶æ®µåŠ è½½çš„æ¨¡å¼ï¼Œä½¿å¾— Agent Skills åœ¨<strong>ä½å¼€é”€çš„æŠ€èƒ½å‘ç°å’Œé«˜æ•ˆç‡çš„æŒ‰éœ€æ‰§è¡Œ</strong>ä¹‹é—´å–å¾—äº†è‰¯å¥½çš„å¹³è¡¡ï¼Œæ˜¯å…¶å®ç°è½»é‡çº§ã€é«˜æ€§èƒ½æ‰©å±•èƒ½åŠ›çš„é‡è¦åŸºçŸ³ã€‚</p>
<h3 data-id="heading-4">1.3ã€Skill çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†</h3>
<p>Agent Skills çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ç›¸å¯¹ç›´è§‚ï¼Œä¸»è¦å›´ç»•å…¶æ–‡ä»¶åŒ–çš„ç‰¹æ€§å±•å¼€ã€‚ä¸€ä¸ª Skill ä»è¢«åˆ›å»ºåˆ°æœ€ç»ˆè¢« AI æ™ºèƒ½ä½“ä½¿ç”¨ï¼Œé€šå¸¸ä¼šç»å†ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒé˜¶æ®µã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5032be19dbec4aa19121a234dc05d3e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=qsKDPE%2BynBlRezdAJ9zr8bdKvtM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>æŠ€èƒ½åˆ›å»ºä¸æ‰“åŒ…</strong>ï¼šå¼€å‘è€…æˆ–é¢†åŸŸä¸“å®¶æ ¹æ®ç‰¹å®šçš„ä»»åŠ¡éœ€æ±‚ï¼Œç¼–å†™ <code>SKILL.md</code> æ–‡ä»¶ï¼Œå¹¶ç»„ç»‡ç›¸å…³çš„è„šæœ¬ã€æ–‡æ¡£å’Œæ•°æ®èµ„æºï¼Œå½¢æˆä¸€ä¸ªè‡ªåŒ…å«çš„æŠ€èƒ½ç›®å½•ã€‚è¿™ä¸ªç›®å½•å¯ä»¥æ˜¯ä¸€ä¸ªç®€å•çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆå¦‚ Gitï¼‰ä¸­çš„ä»“åº“ã€‚</p>
</li>
<li>
<p><strong>æŠ€èƒ½å‘ç°ï¼ˆDiscoveryï¼‰</strong>ï¼šAI æ™ºèƒ½ä½“é€šè¿‡æ‰«æé¢„è®¾çš„æŠ€èƒ½ä»“åº“ç›®å½•ï¼Œå‘ç°å¯ç”¨çš„ Skillã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ™ºèƒ½ä½“ä¸»è¦è¯»å–æ¯ä¸ª Skill ç›®å½•ä¸­çš„ <code>SKILL.md</code> æ–‡ä»¶çš„ YAML å…ƒæ•°æ®ï¼Œä»¥å¿«é€Ÿäº†è§£æŠ€èƒ½çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚åç§°ã€æè¿°ã€åŠŸèƒ½ç­‰ã€‚è¿™ä¸€è¿‡ç¨‹æ˜¯è½»é‡çº§çš„ï¼Œæ—¨åœ¨é«˜æ•ˆåœ°æ„å»ºä¸€ä¸ªå¯ç”¨çš„æŠ€èƒ½åˆ—è¡¨ã€‚</p>
</li>
<li>
<p><strong>æŠ€èƒ½åŒ¹é…ä¸é€‰æ‹©</strong>ï¼šå½“ç”¨æˆ·æå‡ºä¸€ä¸ªä»»åŠ¡è¯·æ±‚æ—¶ï¼ŒAI æ™ºèƒ½ä½“æ ¹æ®ä»»åŠ¡çš„è¯­ä¹‰å†…å®¹ï¼Œç»“åˆå·²å‘ç°çš„æŠ€èƒ½å…ƒæ•°æ®ï¼Œè¿›è¡Œæ™ºèƒ½åŒ¹é…ã€‚å¦‚æœåˆæ­¥åŒ¹é…æˆåŠŸï¼Œæ™ºèƒ½ä½“å¯èƒ½ä¼šè¿›ä¸€æ­¥åŠ è½½ <code>SKILL.md</code> çš„ Markdown æŒ‡ä»¤éƒ¨åˆ†ï¼Œä»¥è·å–æ›´è¯¦ç»†çš„ä½¿ç”¨è¯´æ˜ï¼Œä»è€Œåšå‡ºæ›´ç²¾ç¡®çš„æŠ€èƒ½é€‰æ‹©å†³ç­–ã€‚</p>
</li>
<li>
<p><strong>æŠ€èƒ½æ¿€æ´»ä¸åŠ è½½ï¼ˆActivation &amp; Loadingï¼‰</strong>ï¼šä¸€æ—¦æŸä¸ª Skill è¢«é€‰ä¸­ç”¨äºæ‰§è¡Œå½“å‰ä»»åŠ¡ï¼ŒAI æ™ºèƒ½ä½“ä¾¿ä¼šâ€œæ¿€æ´»â€å®ƒã€‚è¿™æ„å‘³ç€æ™ºèƒ½ä½“å°†æ ¹æ® <code>SKILL.md</code> ä¸­çš„æŒ‡ä»¤ï¼ŒæŒ‰éœ€åŠ è½½è¯¥ Skill æ‰€éœ€çš„è„šæœ¬ã€æ•°æ®æˆ–å…¶ä»–å¤–éƒ¨èµ„æºã€‚ä¾‹å¦‚ï¼Œå¦‚æœ Skill åŒ…å« Python è„šæœ¬ï¼Œæ™ºèƒ½ä½“å¯èƒ½ä¼šåœ¨æ²™ç®±ç¯å¢ƒä¸­æ‰§è¡Œè¿™äº›è„šæœ¬ã€‚</p>
</li>
<li>
<p><strong>æŠ€èƒ½æ‰§è¡Œï¼ˆExecutionï¼‰</strong>ï¼šåœ¨èµ„æºåŠ è½½å®Œæˆåï¼ŒAI æ™ºèƒ½ä½“å°†æ ¹æ® <code>SKILL.md</code> ä¸­å®šä¹‰çš„æ‰§è¡Œæµç¨‹ï¼Œè°ƒç”¨ Skill å†…éƒ¨çš„åŠŸèƒ½ã€‚è¿™å¯èƒ½æ¶‰åŠåˆ°è¿è¡Œè„šæœ¬ã€å¤„ç†æ•°æ®ã€è°ƒç”¨å¤–éƒ¨ API ç­‰æ“ä½œã€‚Skill çš„æ‰§è¡Œé€šå¸¸åœ¨<strong>æ²™ç®±ç¯å¢ƒ</strong>ä¸­è¿›è¡Œï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§å’Œéš”ç¦»æ€§ï¼Œé˜²æ­¢æ¶æ„ä»£ç å¯¹ç³»ç»Ÿé€ æˆå½±å“ã€‚</p>
</li>
<li>
<p><strong>ç»“æœè¿”å›ä¸å¸è½½</strong>ï¼šSkill æ‰§è¡Œå®Œæˆåï¼Œå°†ç»“æœè¿”å›ç»™ AI æ™ºèƒ½ä½“ã€‚æ™ºèƒ½ä½“å¤„ç†ç»“æœåï¼Œè¯¥ Skill çš„ç›¸å…³èµ„æºå¯èƒ½ä¼šè¢«å¸è½½ï¼Œä»¥é‡Šæ”¾ç³»ç»Ÿèµ„æºã€‚ç”±äº Agent Skills æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œæ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯ä¸€ä¸ªç›¸å¯¹ç‹¬ç«‹çš„è¿‡ç¨‹ï¼Œè¿™ç®€åŒ–äº†èµ„æºç®¡ç†å’Œå¹¶å‘æ‰§è¡Œçš„å¤æ‚æ€§ã€‚</p>
</li>
</ol>
<p>è¿™ç§æ–‡ä»¶é©±åŠ¨çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¨¡å¼ï¼Œä½¿å¾— Agent Skills å…·æœ‰æé«˜çš„<strong>ä¾¿æºæ€§</strong>å’Œ<strong>å¯ç»´æŠ¤æ€§</strong>ã€‚å¼€å‘è€…å¯ä»¥åƒç®¡ç†æ™®é€šæ–‡ä»¶ä¸€æ ·ç®¡ç† Skillï¼Œè½»æ¾åœ°è¿›è¡Œç‰ˆæœ¬è¿­ä»£ã€åˆ†äº«å’Œéƒ¨ç½²ï¼Œä¸º AI æ™ºèƒ½ä½“çš„èƒ½åŠ›æ‰©å±•æä¾›äº†åšå®çš„åŸºç¡€ã€‚</p>
<h3 data-id="heading-5">1.4ã€Agent Skills ä¸ä¼ ç»Ÿ Prompt çš„æœ¬è´¨å·®å¼‚</h3>
<p>åœ¨è®¨è®º Agent Skills æ—¶ï¼Œä¸€ä¸ªå‡ ä¹ä¸å¯é¿å…çš„é—®é¢˜æ˜¯ï¼šå®ƒä¸æˆ‘ä»¬å·²ç»éå¸¸ç†Ÿæ‚‰çš„ Prompt åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»è¡¨é¢ä¸Šçœ‹ï¼ŒSkill ä¼¼ä¹åªæ˜¯æŠŠä¸€æ®µæ›´é•¿ã€æ›´ç»“æ„åŒ–çš„æŒ‡ä»¤å†™è¿›äº† SKILL.mdï¼Œè€Œä¸æ˜¯ç›´æ¥å¡è¿›å¯¹è¯ä¸Šä¸‹æ–‡ä¸­ã€‚ä½†å¦‚æœä»…ä»…æŠŠ Agent Skills ç†è§£ä¸ºâ€œé«˜çº§ Promptâ€æˆ–â€œPrompt æ¨¡æ¿çš„æ–‡ä»¶åŒ–ç‰ˆæœ¬â€ï¼Œå°±ä¼šä½ä¼°å®ƒåœ¨è®¾è®¡ç†å¿µå’Œèƒ½åŠ›è¾¹ç•Œä¸Šçš„æ ¹æœ¬å˜åŒ–ã€‚</p>
<p>ä¼ ç»Ÿ Prompt çš„æ ¸å¿ƒç‰¹å¾ï¼Œæ˜¯ä¸€æ¬¡æ€§çš„ã€ä¸Šä¸‹æ–‡å†…çš„æŒ‡ä»¤ã€‚å®ƒä¾é™„äºå…·ä½“çš„å¯¹è¯åœºæ™¯å­˜åœ¨ï¼Œéšç€ä¸Šä¸‹æ–‡çš„ç»“æŸè€Œè‡ªç„¶æ¶ˆå¤±ã€‚æ— è®º Prompt å†™å¾—å¤šä¹ˆç²¾å·§ï¼Œå®ƒæœ¬è´¨ä¸Šä»ç„¶æ˜¯åœ¨â€œä¸´æ—¶å¡‘å½¢â€æ¨¡å‹çš„è¡Œä¸ºï¼Œè¦æ±‚æ¨¡å‹åœ¨å½“å‰çª—å£å†…æŒ‰ç…§æŸç§æ–¹å¼æ€è€ƒå’Œå›ç­”é—®é¢˜ã€‚è¿™ç§æ–¹å¼çš„å±€é™å¾ˆæ˜æ˜¾ï¼šPrompt éš¾ä»¥å¤ç”¨ã€éš¾ä»¥ç‰ˆæœ¬åŒ–ï¼Œä¹Ÿå¾ˆéš¾è¡¨è¾¾å¤æ‚ã€åˆ†é˜¶æ®µçš„æ‰§è¡Œé€»è¾‘ã€‚æ›´é‡è¦çš„æ˜¯ï¼ŒPrompt çš„ä¸»è¦å—ä¼—å§‹ç»ˆæ˜¯æ¨¡å‹æœ¬èº«ï¼Œè€Œä¸æ˜¯äººä¸æ¨¡å‹ä¹‹é—´çš„å…±åŒç†è§£ç©ºé—´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b6571e4b46004a74bf00a681e531f240~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=XJ3lrDQH3%2Fn76rwNj4o71aex%2Fw4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>Agent Skills åˆ™å®Œå…¨ä¸åŒã€‚Skill çš„å‡ºå‘ç‚¹å¹¶ä¸æ˜¯â€œè¿™ä¸€è½®å¯¹è¯è¦æ¨¡å‹æ€ä¹ˆåšâ€ï¼Œè€Œæ˜¯â€œå½“é‡åˆ°æŸä¸€ç±»é—®é¢˜æ—¶ï¼Œæ™ºèƒ½ä½“åº”å½“å…·å¤‡æ€æ ·çš„ä¸€ç§èƒ½åŠ›â€ã€‚å®ƒå¼ºè°ƒçš„æ˜¯é•¿æœŸå­˜åœ¨ã€å¯è¢«åå¤è°ƒç”¨çš„èƒ½åŠ›å®šä¹‰ï¼Œè€Œä¸æ˜¯çŸ­æœŸç”Ÿæ•ˆçš„è¡Œä¸ºå¼•å¯¼ã€‚SKILL.md çš„å­˜åœ¨ï¼Œä½¿å¾—èƒ½åŠ›ç¬¬ä¸€æ¬¡è„±ç¦»äº†å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæˆä¸ºä¸€ç§ç‹¬ç«‹ã€ç¨³å®šã€å¯ç®¡ç†çš„å®ä½“ã€‚æ™ºèƒ½ä½“ä¸æ˜¯åœ¨æ¯æ¬¡å¯¹è¯ä¸­è¢«é‡æ–°â€œè¯´æœâ€å»éµå¾ªæŸä¸ª Promptï¼Œè€Œæ˜¯åœ¨éœ€è¦æ—¶ä¸»åŠ¨é€‰æ‹©å¹¶åŠ è½½ä¸€ä¸ªå·²ç»å®šä¹‰å¥½çš„ Skillã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9ea2a8293bc42c98e9a316a59e065e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=QoR8J3m1WTX6opuxMU4ehb8CbAw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ç§å·®å¼‚å¸¦æ¥çš„ç›´æ¥ç»“æœï¼Œæ˜¯ <strong>Skill æ›´å®¹æ˜“æ‰¿è½½å¤æ‚çš„å·¥ä½œæµç¨‹</strong>ã€‚<strong>ä¸€ä¸ªä¼ ç»Ÿ Prompt å¾ˆéš¾æ¸…æ™°åœ°åŒºåˆ†â€œç†è§£ä»»åŠ¡â€â€œæ‰§è¡Œæ­¥éª¤â€â€œè°ƒç”¨å¤–éƒ¨èµ„æºâ€â€œå¤±è´¥æ—¶çš„å¤„ç†æ–¹å¼â€ç­‰ä¸åŒé˜¶æ®µï¼Œè€Œ Skill åˆ™å¯ä»¥é€šè¿‡æ¸…æ™°çš„æ–‡æœ¬ç»“æ„å’ŒæŒ‰éœ€åŠ è½½æœºåˆ¶</strong>ï¼Œå°†è¿™äº›é˜¶æ®µè‡ªç„¶æ‹†è§£ã€‚å¯¹æ™ºèƒ½ä½“è€Œè¨€ï¼Œè¿™ä¸å†æ˜¯ä¸€æ®µéœ€è¦å®Œæ•´è®°ä½å¹¶ä¸¥æ ¼éµå¾ªçš„é•¿æŒ‡ä»¤ï¼Œè€Œæ˜¯ä¸€å¥—å¯ä»¥é€æ­¥ç†è§£ã€é€æ­¥æ‰§è¡Œçš„è¡ŒåŠ¨æŒ‡å—ã€‚è¿™ç§æ¸è¿›å¼çš„ä½¿ç”¨æ–¹å¼ï¼Œæ˜¾è‘—é™ä½äº†æ¨¡å‹åœ¨å¤æ‚ä»»åŠ¡ä¸­â€œèµ°åâ€çš„æ¦‚ç‡ã€‚</p>
<p>ä»äººçš„è§’åº¦æ¥çœ‹ï¼ŒSkill ä¸ Prompt çš„åŒºåˆ«åŒæ ·é‡è¦ã€‚Prompt å¾€å¾€æ˜¯å†™ç»™æ¨¡å‹çœ‹çš„ï¼Œè¿½æ±‚çš„æ˜¯å¯¹æ¨¡å‹è¡Œä¸ºçš„å³æ—¶æ§åˆ¶ï¼›è€Œ Skill æ›´åƒæ˜¯å†™ç»™æœªæ¥çš„åˆä½œè€…çœ‹çš„ï¼Œæ— è®ºè¿™ä¸ªåˆä½œè€…æ˜¯äººè¿˜æ˜¯æ™ºèƒ½ä½“ã€‚å®ƒè¦æ±‚è¡¨è¾¾æ¸…æ™°ã€è¾¹ç•Œæ˜ç¡®ï¼Œä¹Ÿå› æ­¤æ›´é€‚åˆè¢«å®¡é˜…ã€è¢«è®¨è®ºã€è¢«æ”¹è¿›ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd369a1b03354a80b8c83704d4b3dbc1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=wNQP8332AoAKdDeyPyIh4eKfLXE%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ­£å› ä¸ºå¦‚æ­¤ï¼Œä¸€ä¸ª Skill å¾€å¾€å¯¹åº”ç€æŸç§å·²ç»è¢«åå¤éªŒè¯è¿‡çš„åšäº‹æ–¹å¼ï¼Œå¯èƒ½æ¥è‡ªèµ„æ·±å·¥ç¨‹å¸ˆã€ä¸šåŠ¡ä¸“å®¶ï¼Œç”šè‡³æ˜¯å›¢é˜Ÿé•¿æœŸç§¯ç´¯ä¸‹æ¥çš„å…±è¯†ã€‚å½“è¿™äº›ç»éªŒè¢«æ•´ç†æˆ Skillï¼Œå®ƒä»¬å°±ä¸å†ä¾é™„äºæŸä¸ªå…·ä½“çš„äººï¼Œè€Œæ˜¯å¯ä»¥è¢«ä»»ä½•æ™ºèƒ½ä½“åŠ è½½ã€ç†è§£å’Œæ‰§è¡Œã€‚è¿™ç§ä»â€œä¸ªäººç»éªŒâ€åˆ°â€œå¯å¤ç”¨èƒ½åŠ›â€çš„è½¬åŒ–ï¼Œæ˜¯ Agent Skills æœ€å®¹æ˜“è¢«ä½ä¼°ã€å´æœ€å…·é•¿æœŸä»·å€¼çš„åœ°æ–¹ã€‚</p>
<p>ä¸æ­¤åŒæ—¶ï¼ŒSkill çš„è½»é‡åŒ–ç‰¹æ€§ä¹Ÿè®©å®ƒåœ¨å®é™…è½åœ°ä¸­æ˜¾å¾—æ ¼å¤–å‹å¥½ã€‚æ²¡æœ‰å¤æ‚çš„éƒ¨ç½²æµç¨‹ï¼Œæ²¡æœ‰å¿…é¡»è¿è¡Œçš„æœåŠ¡ï¼Œ<strong>ä¸€ä¸ªç›®å½•ã€ä¸€ä»½æ–‡ä»¶ï¼Œå°±è¶³ä»¥è®©æ™ºèƒ½ä½“è·å¾—ä¸€é¡¹æ–°èƒ½åŠ›</strong>ã€‚è¿™ç§ä½é—¨æ§›ä¸ä»…é™ä½äº†å¼€å‘æˆæœ¬ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒè®©æ›´å¤šéå·¥ç¨‹èƒŒæ™¯çš„äººä¹Ÿèƒ½å¤Ÿå‚ä¸åˆ°æ™ºèƒ½ä½“èƒ½åŠ›çš„æ„å»ºä¸­æ¥ã€‚ä¼šå†™æ–‡æ¡£çš„äººã€æ‡‚ä¸šåŠ¡çš„äººã€ç†Ÿæ‚‰æµç¨‹çš„äººï¼Œéƒ½å¯ä»¥é€šè¿‡ Skill çš„å½¢å¼ï¼ŒæŠŠè‡ªå·±çš„ç»éªŒç›´æ¥â€œæ•™â€ç»™ AIã€‚</p>
<p>å› æ­¤ï¼ŒAgent Skills å¹¶ä¸æ˜¯å¯¹ Prompt çš„ç®€å•å‡çº§ï¼Œè€Œæ˜¯ä¸€æ¬¡èƒ½åŠ›è¡¨è¾¾èŒƒå¼çš„åˆ‡æ¢ã€‚Prompt æ›´åƒæ˜¯å³æ—¶å¯¹è¯ä¸­çš„è¯­è¨€æŠ€å·§ï¼Œè€Œ Skill åˆ™æ˜¯åœ¨ä¸ºæ™ºèƒ½ä½“æ„å»ºä¸€å¥—ç¨³å®šçš„â€œåšäº‹æ–¹æ³•â€ã€‚<strong>å½“ AI ä»â€œä¼šè¯´è¯â€èµ°å‘â€œèƒ½åŠäº‹â€ï¼Œè¿™ç§ä»ä¸´æ—¶æŒ‡ä»¤åˆ°å¯æ²‰æ·€èƒ½åŠ›çš„è½¬å˜ï¼Œæ°æ°æ„æˆäº† Agent Skills æœ€æ ¸å¿ƒã€ä¹Ÿæœ€ä¸å¯æ›¿ä»£çš„ä»·å€¼ã€‚</strong></p>
<p>ä¹Ÿæ­£å› å¦‚æ­¤ï¼Œå½“ä½ ç¬¬ä¸€æ¬¡çœŸæ­£ç†è§£ Agent Skills çš„è®¾è®¡åˆè¡·æ—¶ï¼Œå¾€å¾€ä¼šäº§ç”Ÿä¸€ç§å¾ˆå¼ºçƒˆçš„æ„Ÿè§‰ï¼šè¿™ä¸åªæ˜¯ç»™ AI ç”¨çš„æŠ€æœ¯ï¼Œè€Œæ˜¯ä¸€ç§æŠŠäººç±»ç»éªŒç³»ç»Ÿæ€§ä¼ é€’ç»™æ™ºèƒ½ä½“çš„æ–°æ–¹å¼ã€‚å¦‚æœè¯´è¿‡å»æˆ‘ä»¬æ˜¯åœ¨æ•™æ¨¡å‹â€œå›ç­”é—®é¢˜â€ï¼Œé‚£ä¹ˆä» Agent Skills å¼€å§‹ï¼Œæˆ‘ä»¬æ‰çœŸæ­£å¼€å§‹æ•™å®ƒâ€œæ€ä¹ˆæŠŠäº‹åšå¥½â€ã€‚</p>
<h2 data-id="heading-6">äºŒã€MCPï¼šAI æ—¶ä»£çš„â€œUSB-Câ€æ ‡å‡†åè®®</h2>
<h3 data-id="heading-7">2.1ã€ä¸‰å±‚æ¶æ„æ·±åº¦å‰–æ</h3>
<p>ä¸ Agent Skills çš„æ–‡ä»¶é©±åŠ¨æ¨¡å¼ä¸åŒï¼ŒModel Context Protocol (MCP) é‡‡å–äº†ä¸€ç§<strong>åè®®é©±åŠ¨</strong>çš„ç­–ç•¥ï¼Œæ—¨åœ¨ä¸º AI åº”ç”¨ç¨‹åºä¸å¤–éƒ¨ç³»ç»Ÿä¹‹é—´å»ºç«‹ä¸€å¥—æ ‡å‡†åŒ–çš„é€šä¿¡æ¡¥æ¢ã€‚MCP çš„è®¾è®¡ç†å¿µæ˜¯æˆä¸º AI æ—¶ä»£çš„â€œUSB-Câ€ï¼Œå³ä¸€ä¸ª<strong>é€šç”¨ã€å¯æ‰©å±•çš„æ¥å£</strong>ï¼Œå…è®¸ AI æ™ºèƒ½ä½“æ— ç¼åœ°è¿æ¥å¹¶åˆ©ç”¨å„ç§å¤–éƒ¨å·¥å…·ã€æ•°æ®æºå’Œç³»ç»Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e0349016a8b94df2a17725ab00e708cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=g2mIca%2Fn1qSPrVkOBmvVnaXK%2Bp8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å…¶æ ¸å¿ƒåœ¨äºä¸€ä¸ªæ¸…æ™°å®šä¹‰çš„ä¸‰å±‚æ¶æ„ï¼š<strong>AI Host Application (AI ä¸»æœºåº”ç”¨)ã€MCP Client (MCP å®¢æˆ·ç«¯) å’Œ MCP Server (MCP æœåŠ¡å™¨)</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf007713c5094df2828d87a722804d55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=ocynWW%2BDSe%2Fh0%2FF29QgXStr0RCM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>AI Host Application (AI ä¸»æœºåº”ç”¨)</strong>ï¼šè¿™ä¸€å±‚ä»£è¡¨äº†è¿è¡Œ AI æ™ºèƒ½ä½“çš„ä¸»ä½“ï¼Œä¾‹å¦‚ Claude Desktopã€VS Code æˆ–å…¶ä»–ä»»ä½•éœ€è¦æ‰©å±•èƒ½åŠ›çš„ AI åº”ç”¨ç¨‹åºã€‚AI ä¸»æœºåº”ç”¨æ˜¯ç”¨æˆ·ä¸ AI æ™ºèƒ½ä½“äº¤äº’çš„ç•Œé¢ï¼Œå®ƒè´Ÿè´£æ¥æ”¶ç”¨æˆ·æŒ‡ä»¤ï¼Œå¹¶å°†è¿™äº›æŒ‡ä»¤è½¬åŒ–ä¸ºå¯¹å¤–éƒ¨èƒ½åŠ›çš„éœ€æ±‚ã€‚å®ƒä¸ç›´æ¥ä¸å¤–éƒ¨å·¥å…·äº¤äº’ï¼Œè€Œæ˜¯é€šè¿‡ MCP Client å‘é€è¯·æ±‚å¹¶æ¥æ”¶å“åº”ã€‚</p>
</li>
<li>
<p><strong>MCP Client (MCP å®¢æˆ·ç«¯)</strong>ï¼šä½œä¸º AI ä¸»æœºåº”ç”¨ä¸ MCP Server ä¹‹é—´çš„<strong>ä¸­é—´å±‚</strong>ï¼ŒMCP Client æ‰®æ¼”ç€å…³é”®çš„åè°ƒè§’è‰²ã€‚å®ƒè´Ÿè´£å°† AI ä¸»æœºåº”ç”¨çš„è¯·æ±‚ï¼ˆä¾‹å¦‚è°ƒç”¨æŸä¸ªå·¥å…·æˆ–æŸ¥è¯¢æŸä¸ªæ•°æ®æºï¼‰å°è£…æˆç¬¦åˆ MCP è§„èŒƒçš„ JSON-RPC 2.0 æ¶ˆæ¯ï¼Œå¹¶å‘é€ç»™ç›¸åº”çš„ MCP Serverã€‚åŒæ—¶ï¼Œå®ƒä¹Ÿè´Ÿè´£æ¥æ”¶ MCP Server è¿”å›çš„å“åº”ï¼Œå¹¶å°†å…¶è§£æåä¼ é€’ç»™ AI ä¸»æœºåº”ç”¨ã€‚MCP Client è¿˜ç®¡ç†ç€ä¸ MCP Server çš„è¿æ¥ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬è¿æ¥çš„å»ºç«‹ã€ç»´æŠ¤å’Œç»ˆæ­¢ï¼Œä»¥åŠå¤„ç†æ½œåœ¨çš„è¿æ¥ä¸­æ–­å’Œé‡è¯•æœºåˆ¶ã€‚</p>
</li>
<li>
<p><strong>MCP Server (MCP æœåŠ¡å™¨)</strong>ï¼šMCP Server æ˜¯<strong>å¤–éƒ¨èƒ½åŠ›ï¼ˆå·¥å…·ã€æ•°æ®æºã€æœåŠ¡ï¼‰çš„å®é™…æä¾›è€…</strong>ã€‚å®ƒå¯ä»¥æ˜¯ä¸€ä¸ªè¿è¡Œåœ¨æœ¬åœ°æˆ–è¿œç¨‹çš„è¿›ç¨‹ï¼Œè´Ÿè´£ç›‘å¬æ¥è‡ª MCP Client çš„è¯·æ±‚ï¼Œæ‰§è¡Œç›¸åº”çš„æ“ä½œï¼ˆä¾‹å¦‚è°ƒç”¨ä¸€ä¸ªå¤–éƒ¨ APIã€æŸ¥è¯¢ä¸€ä¸ªæ•°æ®åº“ã€æ‰§è¡Œä¸€æ®µä»£ç ï¼‰ï¼Œå¹¶å°†ç»“æœå°è£…æˆ JSON-RPC 2.0 å“åº”è¿”å›ç»™ MCP Clientã€‚ä¸€ä¸ª MCP Server å¯ä»¥æä¾›å¤šç§å·¥å…·ã€èµ„æºå’Œæç¤ºæ¨¡æ¿ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®éœ€è¦è¿›è¡Œæ‰©å±•å’Œéƒ¨ç½²ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª MCP Server å¯ä»¥å°è£…å¯¹äºšé©¬é€Šäº‘ç§‘æŠ€ï¼ˆAWSï¼‰æœåŠ¡çš„è°ƒç”¨ï¼Œæˆ–è€…æä¾›å¯¹ä¼ä¸šå†…éƒ¨æ•°æ®åº“çš„è®¿é—®æ¥å£ã€‚</p>
</li>
</ol>
<p>è¿™ç§ä¸‰å±‚æ¶æ„çš„è®¾è®¡ï¼Œä½¿å¾— MCP èƒ½å¤Ÿå®ç°<strong>é«˜åº¦çš„è§£è€¦å’Œçµæ´»æ€§</strong>ã€‚AI ä¸»æœºåº”ç”¨æ— éœ€å…³å¿ƒå¤–éƒ¨èƒ½åŠ›çš„å…·ä½“å®ç°ç»†èŠ‚ï¼Œåªéœ€é€šè¿‡æ ‡å‡†åŒ–çš„ MCP åè®®è¿›è¡Œé€šä¿¡ã€‚MCP Client è´Ÿè´£åè®®çš„è½¬æ¢å’Œè¿æ¥ç®¡ç†ï¼Œè€Œ MCP Server åˆ™ä¸“æ³¨äºæä¾›å’Œç®¡ç†å…·ä½“çš„å¤–éƒ¨èƒ½åŠ›ã€‚è¿™ç§åˆ†å±‚è®¾è®¡ä¸ä»…æé«˜äº†ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œä¹Ÿä¸ºä¸åŒ AI åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«å’Œå¤ç”¨å¤–éƒ¨èƒ½åŠ›æä¾›äº†å¯èƒ½ã€‚</p>
<h3 data-id="heading-8">2.2ã€æ ¸å¿ƒåŸè¯­ï¼šTools, Resources ä¸ Prompts</h3>
<p>MCP åè®®çš„æ ¸å¿ƒåœ¨äºå…¶å®šä¹‰çš„ä¸‰ç§åŸºæœ¬åŸè¯­ï¼Œå®ƒä»¬å…±åŒæ„æˆäº† AI æ™ºèƒ½ä½“ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’çš„åŸºçŸ³ï¼š<strong>Tools (å·¥å…·)ã€Resources (èµ„æº) å’Œ Prompts</strong> <strong>(æç¤º)</strong>ã€‚è¿™äº›åŸè¯­ä¸ä»…å®šä¹‰äº† AI æ™ºèƒ½ä½“å¯ä»¥â€œåšä»€ä¹ˆâ€ï¼Œè¿˜å®šä¹‰äº†å®ƒâ€œå¯ä»¥è·å–ä»€ä¹ˆä¿¡æ¯â€ä»¥åŠâ€œå¦‚ä½•æ›´å¥½åœ°è¡¨è¾¾è‡ªå·±â€ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/995a78f84f6b4e2fa8237dbbeaad5c99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=z1B0S%2BTfMTGj3kQiEZmND7eLl54%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<ol>
<li>
<p><strong>Tools</strong>(å·¥å…·) ï¼šå·¥å…·æ˜¯ AI æ™ºèƒ½ä½“å¯ä»¥<strong>æ‰§è¡Œçš„å¤–éƒ¨å‡½æ•°æˆ–æ“ä½œ</strong>ã€‚å®ƒä»¬å¯ä»¥æ˜¯ä»»ä½•å¯ç¼–ç¨‹çš„æ¥å£ï¼Œä¾‹å¦‚è°ƒç”¨ä¸€ä¸ª RESTful APIã€æ‰§è¡Œä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢ã€å‘é€ä¸€å°ç”µå­é‚®ä»¶ã€æˆ–è€…æ§åˆ¶ä¸€ä¸ªç‰©ç†è®¾å¤‡ã€‚MCP Server è´Ÿè´£å°†è¿™äº›å…·ä½“çš„å¤–éƒ¨åŠŸèƒ½å°è£…æˆ AI æ™ºèƒ½ä½“å¯ä»¥ç†è§£å’Œè°ƒç”¨çš„â€œå·¥å…·â€ã€‚æ¯ä¸ªå·¥å…·éƒ½é€šè¿‡ JSON Schema å®šä¹‰å…¶è¾“å…¥å‚æ•°å’Œé¢„æœŸè¾“å‡ºï¼Œç¡®ä¿ AI æ™ºèƒ½ä½“èƒ½å¤Ÿæ­£ç¡®åœ°æ„é€ è¯·æ±‚å¹¶è§£æå“åº”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¤©æ°”æŸ¥è¯¢å·¥å…·å¯èƒ½éœ€è¦ä¸€ä¸ª <code>location</code> å‚æ•°ï¼Œå¹¶è¿”å›å½“å‰æ¸©åº¦å’Œå¤©æ°”çŠ¶å†µã€‚å·¥å…·çš„å­˜åœ¨æå¤§åœ°æ‰©å±•äº† AI æ™ºèƒ½ä½“çš„è¡ŒåŠ¨è¾¹ç•Œï¼Œä½¿å…¶èƒ½å¤Ÿä»çº¯ç²¹çš„è¯­è¨€ç†è§£å’Œç”Ÿæˆï¼Œè·ƒå‡åˆ°ä¸çœŸå®ä¸–ç•Œè¿›è¡Œæœ‰æ„ä¹‰çš„äº¤äº’ã€‚</p>
</li>
<li>
<p><strong>Resources (èµ„æº)</strong>ï¼šèµ„æºæ˜¯ AI æ™ºèƒ½ä½“å¯ä»¥<strong>è®¿é—®å’Œè·å–çš„ä¸Šä¸‹æ–‡ä¿¡æ¯</strong>ã€‚å®ƒä»¬å¯ä»¥æ˜¯å„ç§å½¢å¼çš„æ•°æ®æºï¼Œä¾‹å¦‚æ–‡æ¡£ã€æ•°æ®åº“è®°å½•ã€ä¼ æ„Ÿå™¨æ•°æ®ã€ç”¨æˆ·åå¥½è®¾ç½®ç­‰ã€‚MCP Server åŒæ ·è´Ÿè´£ç®¡ç†å’Œæš´éœ²è¿™äº›èµ„æºï¼Œå…è®¸ AI æ™ºèƒ½ä½“æ ¹æ®ä»»åŠ¡éœ€æ±‚åŠ¨æ€åœ°è·å–æ‰€éœ€ä¿¡æ¯ã€‚ä¸å·¥å…·ç±»ä¼¼ï¼Œèµ„æºä¹Ÿå¯ä»¥é€šè¿‡ JSON Schema å®šä¹‰å…¶ç»“æ„å’Œè®¿é—®æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·é…ç½®æ–‡ä»¶èµ„æºå¯èƒ½åŒ…å«ç”¨æˆ·çš„å§“åã€é‚®ç®±å’Œè®¢é˜…ä¿¡æ¯ã€‚é€šè¿‡è®¿é—®èµ„æºï¼ŒAI æ™ºèƒ½ä½“èƒ½å¤Ÿè·å¾—æ›´ä¸°å¯Œã€æ›´å‡†ç¡®çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä»è€Œåšå‡ºæ›´æ˜æ™ºçš„å†³ç­–å’Œç”Ÿæˆæ›´ç›¸å…³çš„å“åº”ã€‚</p>
</li>
<li>
<p><strong>Prompts (æç¤º)</strong>ï¼šæç¤ºæ˜¯<strong>å¯é‡ç”¨çš„äº¤äº’æ¨¡æ¿</strong>ï¼Œç”¨äºæŒ‡å¯¼ AI æ™ºèƒ½ä½“åœ¨ç‰¹å®šåœºæ™¯ä¸‹çš„è¯­è¨€ç”Ÿæˆæˆ–äº¤äº’è¡Œä¸ºã€‚å®ƒä»¬é€šå¸¸åŒ…å«é¢„è®¾çš„æŒ‡ä»¤ã€ç¤ºä¾‹å¯¹è¯æˆ–æ ¼å¼è¦æ±‚ï¼Œæ—¨åœ¨å¸®åŠ© AI æ™ºèƒ½ä½“æ›´å¥½åœ°ç†è§£ä»»åŠ¡æ„å›¾ï¼Œå¹¶ä»¥ç¬¦åˆé¢„æœŸçš„æ–¹å¼è¿›è¡Œå“åº”ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨äºç”Ÿæˆä¼šè®®çºªè¦çš„æç¤ºå¯èƒ½åŒ…å«ä¼šè®®ä¸»é¢˜ã€å‚ä¸è€…åˆ—è¡¨å’Œå…³é”®è®¨è®ºç‚¹çš„å ä½ç¬¦ã€‚é€šè¿‡æ ‡å‡†åŒ–å’Œå¤ç”¨æç¤ºï¼Œå¯ä»¥æé«˜ AI æ™ºèƒ½ä½“åœ¨ç‰¹å®šä»»åŠ¡ä¸Šçš„è¡¨ç°ä¸€è‡´æ€§å’Œæ•ˆç‡ï¼Œå‡å°‘é‡å¤çš„æŒ‡ä»¤å·¥ç¨‹å·¥ä½œã€‚</p>
</li>
</ol>
<p><strong>è¿™ä¸‰å¤§æ ¸å¿ƒåŸè¯­å…±åŒæ„å»ºäº† MCP å¼ºå¤§çš„èƒ½åŠ›æ‰©å±•æœºåˆ¶</strong>ã€‚å·¥å…·èµ‹äºˆ AI æ™ºèƒ½ä½“â€œæ‰‹è„šâ€ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰§è¡Œå¤–éƒ¨æ“ä½œï¼›èµ„æºèµ‹äºˆ AI æ™ºèƒ½ä½“â€œçœ¼ç›å’Œè€³æœµâ€ï¼Œä½¿å…¶èƒ½å¤Ÿæ„ŸçŸ¥å’Œè·å–å¤–éƒ¨ä¿¡æ¯ï¼›è€Œæç¤ºåˆ™èµ‹äºˆ AI æ™ºèƒ½ä½“â€œæ€ç»´æ¡†æ¶â€ï¼Œä½¿å…¶èƒ½å¤Ÿæ›´å¥½åœ°ç†è§£å’Œè¡¨è¾¾ã€‚é€šè¿‡ MCPï¼ŒAI æ™ºèƒ½ä½“èƒ½å¤Ÿä»¥ä¸€ç§ç»“æ„åŒ–ã€å¯æ§çš„æ–¹å¼ï¼Œå……åˆ†åˆ©ç”¨è¿™äº›å¤–éƒ¨èƒ½åŠ›ï¼Œä»è€Œå®ç°æ›´é«˜çº§åˆ«çš„æ™ºèƒ½å’Œè‡ªä¸»æ€§ã€‚</p>
<h3 data-id="heading-9">2.3ã€ä¼ è¾“å±‚ä¸è¿æ¥ç”Ÿå‘½å‘¨æœŸ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b84e4bc287c944b291f3370557aa45fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=deEqgqPrE%2FPOPCHhgPlCpmt8J%2F4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>MCP åè®®çš„çµæ´»æ€§ä¸ä»…ä½“ç°åœ¨å…¶æ ¸å¿ƒåŸè¯­çš„å®šä¹‰ä¸Šï¼Œæ›´åœ¨äºå…¶å¯¹<strong>ä¼ è¾“å±‚</strong>ï¼ˆTransport Layerï¼‰çš„æŠ½è±¡å’Œæ”¯æŒã€‚ä¸ºäº†é€‚åº”ä¸åŒçš„éƒ¨ç½²ç¯å¢ƒå’Œæ€§èƒ½éœ€æ±‚ï¼ŒMCP åè®®æ”¯æŒå¤šç§ä¼ è¾“æœºåˆ¶ï¼Œå…¶ä¸­æœ€å¸¸è§çš„åŒ…æ‹¬ <code>stdio</code> å’Œ <code>HTTP/SSE</code>ã€‚</p>
<ol>
<li>
<p><strong>stdio (æ ‡å‡†è¾“å…¥è¾“å‡º)</strong>ï¼šè¿™æ˜¯ä¸€ç§æœ€ç®€å•ç›´æ¥çš„ä¼ è¾“æ–¹å¼ï¼Œé€šå¸¸ç”¨äºæœ¬åœ°è¿›ç¨‹é—´é€šä¿¡ã€‚AI ä¸»æœºåº”ç”¨å’Œ MCP Server å¯ä»¥é€šè¿‡æ ‡å‡†è¾“å…¥è¾“å‡ºæµè¿›è¡Œæ¶ˆæ¯äº¤æ¢ã€‚è¿™ç§æ–¹å¼çš„ä¼˜ç‚¹æ˜¯<strong>æ€§èƒ½å¼€é”€æä½ï¼Œå‡ ä¹æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿ</strong>ï¼Œéå¸¸é€‚åˆåœ¨åŒä¸€å°æœºå™¨ä¸Šè¿è¡Œçš„ AI æ™ºèƒ½ä½“å’Œ MCP Server ä¹‹é—´çš„é€šä¿¡ã€‚ç„¶è€Œï¼Œå®ƒçš„ç¼ºç‚¹æ˜¯<strong>ä¸é€‚åˆè¿œç¨‹é€šä¿¡</strong>ï¼Œä¸”åœ¨å¤æ‚çš„å¹¶å‘åœºæ™¯ä¸‹ç®¡ç†èµ·æ¥å¯èƒ½è¾ƒä¸ºç¹çã€‚</p>
</li>
<li>
<p><strong>HTTP/SSE (HTTP/Server-Sent Events)</strong>ï¼šHTTP æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç½‘ç»œåè®®ï¼Œè€Œ Server-Sent Events (SSE) åˆ™å…è®¸æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æ¨é€äº‹ä»¶ã€‚ç»“åˆ HTTPï¼ŒMCP å¯ä»¥å®ç°<strong>è¿œç¨‹é€šä¿¡å’Œæ›´çµæ´»çš„éƒ¨ç½²</strong>ã€‚HTTP/SSE ä¼ è¾“æ–¹å¼çš„ä¼˜ç‚¹æ˜¯<strong>æ”¯æŒè·¨ç½‘ç»œé€šä¿¡ï¼Œæ˜“äºä¸ç°æœ‰çš„ Web åŸºç¡€è®¾æ–½é›†æˆ</strong>ï¼Œå¹¶ä¸”èƒ½å¤Ÿåˆ©ç”¨ HTTP çš„å„ç§ç‰¹æ€§ï¼ˆå¦‚è®¤è¯ã€åŠ å¯†ï¼‰ã€‚è¿™ä½¿å¾— MCP Server å¯ä»¥éƒ¨ç½²åœ¨äº‘ç«¯ï¼Œä¸ºå¤šä¸ª AI ä¸»æœºåº”ç”¨æä¾›æœåŠ¡ã€‚å…¶ç¼ºç‚¹æ˜¯ç›¸å¯¹äº <code>stdio</code> ä¼šå¼•å…¥ä¸€å®šçš„ç½‘ç»œå»¶è¿Ÿå’Œåè®®å¼€é”€ã€‚</p>
</li>
</ol>
<p>é™¤äº†è¿™ä¸¤ç§å¸¸è§çš„ä¼ è¾“æ–¹å¼ï¼ŒMCP åè®®è¿˜å…è®¸<strong>è‡ªå®šä¹‰ä¼ è¾“æœºåˆ¶</strong>ï¼Œä»¥æ»¡è¶³ç‰¹å®šåœºæ™¯ä¸‹çš„ç‰¹æ®Šéœ€æ±‚ã€‚è¿™ç§å¼€æ”¾æ€§ç¡®ä¿äº† MCP èƒ½å¤Ÿé€‚åº”æœªæ¥ä¸æ–­æ¼”è¿›çš„æŠ€æœ¯æ ˆå’Œéƒ¨ç½²æ¨¡å¼ã€‚</p>
<p><strong>è¿æ¥ç”Ÿå‘½å‘¨æœŸ</strong>ï¼ˆConnection Lifecycleï¼‰æ˜¯ MCP åè®®ä¸­å¦ä¸€ä¸ªé‡è¦çš„ç»„æˆéƒ¨åˆ†ï¼Œå®ƒå®šä¹‰äº† AI ä¸»æœºåº”ç”¨ï¼ˆé€šè¿‡ MCP Clientï¼‰ä¸ MCP Server ä¹‹é—´é€šä¿¡ä¼šè¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚ä¸€ä¸ªå…¸å‹çš„ MCP è¿æ¥ç”Ÿå‘½å‘¨æœŸåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p><strong>åˆå§‹åŒ– (Initialization)</strong>ï¼šMCP Client å‘ MCP Server å‘é€åˆå§‹åŒ–è¯·æ±‚ï¼Œå»ºç«‹è¿æ¥ã€‚è¿™ä¸ªè¯·æ±‚é€šå¸¸ä¼šåŒ…å« Client çš„åŸºæœ¬ä¿¡æ¯å’ŒæœŸæœ›çš„èƒ½åŠ›ã€‚</p>
</li>
<li>
<p><strong>èƒ½åŠ›åå•† (Capability Negotiation)</strong>ï¼šMCP Server å“åº” Client çš„åˆå§‹åŒ–è¯·æ±‚ï¼Œå¹¶å‘ŠçŸ¥å…¶æ‰€æä¾›çš„å·¥å…·ã€èµ„æºå’Œæç¤ºç­‰èƒ½åŠ›ã€‚Client å’Œ Server ä¹‹é—´å¯èƒ½ä¼šè¿›è¡Œä¸€ç³»åˆ—çš„åå•†ï¼Œä»¥ç¡®å®šåŒæ–¹éƒ½æ”¯æŒçš„åŠŸèƒ½é›†ã€‚</p>
</li>
<li>
<p><strong>å°±ç»ªé€šçŸ¥ (Ready Notification)</strong>ï¼šåœ¨èƒ½åŠ›åå•†å®Œæˆåï¼ŒServer ä¼šå‘ Client å‘é€å°±ç»ªé€šçŸ¥ï¼Œè¡¨æ˜è¿æ¥å·²å‡†å¤‡å¥½æ¥æ”¶å’Œå¤„ç†è¯·æ±‚ã€‚</p>
</li>
<li>
<p><strong>æ“ä½œ (Operation)</strong>ï¼šè¿™æ˜¯è¿æ¥ç”Ÿå‘½å‘¨æœŸä¸­çš„ä¸»è¦é˜¶æ®µï¼ŒClient å’Œ Server ä¹‹é—´è¿›è¡ŒåŒå‘çš„ JSON-RPC 2.0 æ¶ˆæ¯äº¤æ¢ï¼ŒåŒ…æ‹¬è¯·æ±‚ã€å“åº”å’Œé€šçŸ¥ã€‚AI æ™ºèƒ½ä½“é€šè¿‡ Client è°ƒç”¨ Server æä¾›çš„å·¥å…·å’Œèµ„æºï¼ŒServer åˆ™æ‰§è¡Œæ“ä½œå¹¶è¿”å›ç»“æœã€‚</p>
</li>
<li>
<p><strong>ç»ˆæ­¢ (Termination)</strong>ï¼šå½“é€šä¿¡ä¼šè¯ç»“æŸæ—¶ï¼ŒClient æˆ– Server å¯ä»¥å‘èµ·ç»ˆæ­¢è¯·æ±‚ï¼Œä¼˜é›…åœ°å…³é—­è¿æ¥ã€‚è¿™æœ‰åŠ©äºé‡Šæ”¾ç³»ç»Ÿèµ„æºå¹¶ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
</li>
</ol>
<p>MCP åè®®é€šè¿‡å¯¹ä¼ è¾“å±‚å’Œè¿æ¥ç”Ÿå‘½å‘¨æœŸçš„ç²¾å¿ƒè®¾è®¡ï¼Œç¡®ä¿äº† AI æ™ºèƒ½ä½“ä¸å¤–éƒ¨ç³»ç»Ÿä¹‹é—´é€šä¿¡çš„<strong>å¯é æ€§ã€å®‰å…¨æ€§å’Œå¯ç®¡ç†æ€§</strong>ã€‚è¿™ç§åè®®é©±åŠ¨çš„æ–¹æ³•ï¼Œä¸ºæ„å»ºé«˜åº¦é›†æˆå’Œå¯æ‰©å±•çš„ AI æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿå¥ å®šäº†åšå®çš„åŸºç¡€ã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€Skill ä¸ MCP çš„æ·±åº¦å¯¹æ¯”åˆ†æ</h2>
<p>Agent Skills å’Œ MCP ä½œä¸ºæ‰©å±• AI æ™ºèƒ½ä½“èƒ½åŠ›çš„ä¸¤å¤§èŒƒå¼ï¼Œè™½ç„¶ç›®æ ‡ä¸€è‡´ï¼Œä½†åœ¨è®¾è®¡ç†å¿µã€å®ç°æœºåˆ¶å’Œé€‚ç”¨åœºæ™¯ä¸Šå´å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚æ·±å…¥ç†è§£è¿™äº›å·®å¼‚ï¼Œå¯¹äºå¼€å‘è€…é€‰æ‹©åˆé€‚çš„æŠ€æœ¯è·¯å¾„ï¼Œæ„å»ºé«˜æ•ˆã€ç¨³å®šçš„ AI æ™ºèƒ½ä½“è‡³å…³é‡è¦ã€‚</p>
<h3 data-id="heading-11">3.1ã€å“²å­¦å·®å¼‚ï¼šé™æ€å°è£… vs åŠ¨æ€äº¤äº’</h3>
<p>Agent Skills å’Œ MCP åœ¨å…¶æ ¸å¿ƒå“²å­¦ä¸Šå±•ç°å‡ºæ ¹æœ¬æ€§çš„ä¸åŒã€‚Agent Skills å€¾å‘äº<strong>é™æ€å°è£…ä¸çŸ¥è¯†ç®¡ç†</strong>ï¼Œè€Œ MCP åˆ™ä¾§é‡äº<strong>åŠ¨æ€äº¤äº’ä¸ç³»ç»Ÿé›†æˆ</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f22fc0cb6164f4687fd10a1cb87ac8b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=VrppYttliscPsf0Ou%2BG6oNWHUcA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>Agent Skills çš„å“²å­¦</strong>å¯ä»¥æ¦‚æ‹¬ä¸ºâ€œ<strong>çŸ¥è¯†å³æ–‡ä»¶ï¼Œèƒ½åŠ›å³ç›®å½•</strong>â€ã€‚å®ƒå°†é¢†åŸŸä¸“ä¸šçŸ¥è¯†ã€æ“ä½œæŒ‡å—å’Œå¯æ‰§è¡Œä»£ç è§†ä¸ºä¸€ç§å¯è¢«æ–‡ä»¶åŒ–ã€å¯è¢«ç‰ˆæœ¬æ§åˆ¶çš„â€œçŸ¥è¯†èµ„äº§â€ã€‚è¿™ç§è®¾è®¡å“²å­¦å¼ºè°ƒ<strong>ä¾¿æºæ€§ã€å¯è¯»æ€§å’Œä½é—¨æ§›çš„æ‰©å±•æ€§</strong>ã€‚ä¸€ä¸ª Skill è¢«åˆ›å»ºåï¼Œå…¶å†…å®¹ç›¸å¯¹å›ºå®šï¼ŒAI æ™ºèƒ½ä½“é€šè¿‡è§£æ <code>SKILL.md</code> æ–‡ä»¶æ¥ç†è§£å’Œæ‰§è¡Œå…¶å†…éƒ¨é€»è¾‘ã€‚è¿™ç§æ¨¡å¼æ›´åƒæ˜¯ä¸º AI æ™ºèƒ½ä½“æä¾›äº†ä¸€æœ¬æœ¬â€œå‚è€ƒæ‰‹å†Œâ€æˆ–â€œå·¥å…·ç®±â€ï¼Œæ™ºèƒ½ä½“æ ¹æ®ä»»åŠ¡éœ€æ±‚æŸ¥é˜…å¹¶ä½¿ç”¨ã€‚å› æ­¤ï¼ŒAgent Skills æ›´æ“…é•¿å¤„ç†é‚£äº›<strong>çŸ¥è¯†å¯†é›†å‹ã€æµç¨‹æ ‡å‡†åŒ–ä¸”ç›¸å¯¹ç¨³å®šçš„ä»»åŠ¡</strong>ï¼Œä¾‹å¦‚æ–‡æ¡£åˆ†æã€ä»£ç å®¡æŸ¥æµç¨‹æˆ–ç‰¹å®šçš„æ•°æ®å¤„ç†å·¥ä½œæµã€‚å®ƒçš„â€œæ— çŠ¶æ€â€ç‰¹æ€§æ„å‘³ç€æ¯æ¬¡æ‰§è¡Œéƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œä¸ä¾èµ–äºæŒä¹…åŒ–çš„è¿æ¥æˆ–ä¼šè¯çŠ¶æ€ã€‚</p>
<p><strong>MCP çš„å“²å­¦</strong>åˆ™èšç„¦äºâ€œ<strong>åè®®å³æ¡¥æ¢ï¼ŒæœåŠ¡å³èƒ½åŠ›</strong>â€ã€‚å®ƒå°†å¤–éƒ¨å·¥å…·ã€æ•°æ®æºå’Œç³»ç»Ÿè§†ä¸ºå¯è¢« AI æ™ºèƒ½ä½“é€šè¿‡æ ‡å‡†åŒ–åè®®åŠ¨æ€è°ƒç”¨çš„â€œæœåŠ¡â€ã€‚è¿™ç§è®¾è®¡å“²å­¦å¼ºè°ƒ<strong>å®æ—¶æ€§ã€äº’æ“ä½œæ€§å’Œå¼ºå¤§çš„å¤–éƒ¨é›†æˆèƒ½åŠ›</strong>ã€‚MCP æ›´é€‚åˆå¤„ç†é‚£äº›<strong>éœ€è¦å®æ—¶æ•°æ®è®¿é—®ã€å¤æ‚ç³»ç»Ÿé›†æˆä»¥åŠåŠ¨æ€èƒ½åŠ›åå•†çš„ä»»åŠ¡</strong>ï¼Œä¾‹å¦‚å®æ—¶ç›‘æ§ã€å¤šç³»ç»Ÿç¼–æ’æˆ–éœ€è¦ä¸å¤–éƒ¨ API é¢‘ç¹äº¤äº’çš„åœºæ™¯ã€‚å®ƒçš„â€œæœ‰çŠ¶æ€â€ç‰¹æ€§ä½¿å¾—è¿æ¥ç®¡ç†å’Œä¼šè¯ä¿æŒæˆä¸ºå¯èƒ½ï¼Œä¸ºå¤æ‚çš„äº¤äº’æä¾›äº†åŸºç¡€ã€‚</p>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒAgent Skills å…³æ³¨çš„æ˜¯<strong>AI æ™ºèƒ½ä½“â€œå†…éƒ¨â€å¦‚ä½•ç»„ç»‡å’Œåˆ©ç”¨è‡ªèº«æˆ–æœ¬åœ°çš„èƒ½åŠ›</strong>ï¼Œè€Œ MCP åˆ™ç€çœ¼äº<strong>AI æ™ºèƒ½ä½“â€œå¤–éƒ¨â€å¦‚ä½•ä¸å¹¿é˜”çš„æ•°å­—ä¸–ç•Œè¿›è¡Œé«˜æ•ˆã€å®‰å…¨çš„è¿æ¥ä¸äº¤äº’</strong>ã€‚ä¸¤è€…å¹¶éç›¸äº’æ›¿ä»£ï¼Œè€Œæ˜¯ç›¸è¾…ç›¸æˆï¼Œå…±åŒæ„æˆäº† AI æ™ºèƒ½ä½“èƒ½åŠ›æ‰©å±•çš„å®Œæ•´å›¾æ™¯ã€‚</p>
<h3 data-id="heading-12">3.2ã€æŠ€æœ¯æŒ‡æ ‡æ¨ªå‘è¯„æµ‹</h3>
<p>ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£ Agent Skills å’Œ MCP åœ¨æŠ€æœ¯å±‚é¢çš„å·®å¼‚ï¼Œä¸‹è¡¨ä»å¤šä¸ªå…³é”®ç»´åº¦å¯¹ä¸¤è€…è¿›è¡Œäº†æ¨ªå‘å¯¹æ¯”ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/54877442b3424c52ab68a943287b675b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=W9ayT2AkNtFDSdtp9wsduklpF0k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>






































































<table><thead><tr><th align="left">ç»´åº¦</th><th align="left">Agent Skills</th><th align="left">MCP (Model Context Protocol)</th></tr></thead><tbody><tr><td align="left"><strong>æ¶æ„èŒƒå¼</strong></td><td align="left">æ–‡ä»¶é©±åŠ¨ï¼ŒåŸºäºæ–‡ä»¶ç³»ç»Ÿ</td><td align="left">åè®®é©±åŠ¨ï¼ŒåŸºäºå®¢æˆ·ç«¯-ä¸»æœº-æœåŠ¡å™¨æ¨¡å‹</td></tr><tr><td align="left"><strong>é€šä¿¡æ¨¡å‹</strong></td><td align="left">ç›´æ¥æ–‡ä»¶ç³»ç»Ÿè®¿é—®ï¼Œæ— åè®®å¼€é”€</td><td align="left">JSON-RPC 2.0ï¼ŒåŒå‘æ¶ˆæ¯äº¤æ¢</td></tr><tr><td align="left"><strong>çŠ¶æ€ç®¡ç†</strong></td><td align="left">æ— çŠ¶æ€ï¼ˆæ¯æ¬¡æ–‡ä»¶è¯»å–ç‹¬ç«‹ï¼‰</td><td align="left">æœ‰çŠ¶æ€ï¼ˆç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸï¼‰</td></tr><tr><td align="left"><strong>é›†æˆæ–¹å¼</strong></td><td align="left">ä½é—¨æ§›ï¼Œé€šè¿‡æ‹–æ”¾æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</td><td align="left">ä¸­ç­‰ï¼Œéœ€è¦ SDK å®ç°å’Œé…ç½®</td></tr><tr><td align="left"><strong>å®‰å…¨æ€§</strong></td><td align="left">æ²™ç®±æ‰§è¡Œï¼Œç™½åå•æœºåˆ¶</td><td align="left">OAuth 2.1 è®¤è¯ï¼Œä¼ è¾“å±‚å®‰å…¨ (TLS)</td></tr><tr><td align="left"><strong>ç”Ÿæ€ç³»ç»Ÿ</strong></td><td align="left">æ­£åœ¨æˆé•¿ä¸­ï¼ŒAnthropic ç­‰å¹³å°æ”¯æŒ</td><td align="left">è¾ƒä¸ºæˆç†Ÿï¼Œå¤šè¯­è¨€ SDKï¼Œé¢„æ„å»ºæœåŠ¡å™¨ï¼Œè°ƒè¯•å·¥å…·</td></tr><tr><td align="left"><strong>ä¾¿æºæ€§</strong></td><td align="left">æé«˜ï¼Œçº¯æ–‡ä»¶å½¢å¼ï¼Œæ˜“äºåˆ†äº«å’Œéƒ¨ç½²</td><td align="left">ä¸­ç­‰ï¼Œéœ€è¦è¿è¡ŒæœåŠ¡å™¨ï¼Œéƒ¨ç½²ç›¸å¯¹å¤æ‚</td></tr><tr><td align="left"><strong>å¯åŠ¨æ—¶é—´</strong></td><td align="left">æä½ï¼Œä»…éœ€è¯»å–å…ƒæ•°æ®</td><td align="left">éœ€è¿æ¥æ¡æ‰‹ï¼Œå»ºç«‹é€šä¿¡é“¾è·¯</td></tr><tr><td align="left"><strong>æ“ä½œå»¶è¿Ÿ</strong></td><td align="left">æ–‡ä»¶ I/O æ“ä½œ</td><td align="left">ç½‘ç»œé€šä¿¡ + å¤„ç†å¼€é”€</td></tr><tr><td align="left"><strong>å†…å­˜å¼€é”€</strong></td><td align="left">ä½ï¼ŒæŒ‰éœ€åŠ è½½ï¼ˆLoad on demandï¼‰</td><td align="left">çº¿æ€§å¢é•¿ï¼Œå–å†³äºè¿æ¥æ•°å’ŒæœåŠ¡å™¨å®¹é‡</td></tr><tr><td align="left"><strong>å¯ä¼¸ç¼©æ€§</strong></td><td align="left">çº¿æ€§å¢é•¿ï¼Œå–å†³äºæŠ€èƒ½æ•°é‡</td><td align="left">å–å†³äºæœåŠ¡å™¨å®¹é‡å’Œæ¶æ„è®¾è®¡</td></tr><tr><td align="left"><strong>æœ€ä½³åº”ç”¨</strong></td><td align="left">çŸ¥è¯†æ‰“åŒ…ã€æ ‡å‡†åŒ–å·¥ä½œæµã€ç¦»çº¿ç¯å¢ƒ</td><td align="left">å¤–éƒ¨ç³»ç»Ÿé›†æˆã€å®æ—¶æ•°æ®è®¿é—®ã€ä¼ä¸šçº§å·¥ä½œæµ</td></tr></tbody></table>
<p>ä»ä¸Šè¡¨å¯ä»¥çœ‹å‡ºï¼ŒAgent Skills åœ¨<strong>ä¾¿æºæ€§ã€ä½é›†æˆé—¨æ§›å’Œæ— çŠ¶æ€æ“ä½œ</strong>æ–¹é¢è¡¨ç°å‡ºè‰²ï¼Œç‰¹åˆ«é€‚åˆäºå°è£…ç›¸å¯¹ç‹¬ç«‹çš„é¢†åŸŸçŸ¥è¯†å’Œæ ‡å‡†åŒ–å·¥ä½œæµï¼Œæˆ–è€…åœ¨èµ„æºå—é™ã€ç¦»çº¿ç¯å¢ƒä¸­è¿è¡Œã€‚å…¶æ–‡ä»¶é©±åŠ¨çš„ç‰¹æ€§ä½¿å¾—æŠ€èƒ½çš„åˆ›å»ºå’Œåˆ†äº«å˜å¾—å¼‚å¸¸ç®€å•ï¼Œå¼€å‘è€…å¯ä»¥åƒç®¡ç†ä»£ç åº“ä¸€æ ·ç®¡ç†æŠ€èƒ½ï¼Œå®ç°å¿«é€Ÿè¿­ä»£å’Œéƒ¨ç½²ã€‚</p>
<p>è€Œ MCP åˆ™åœ¨<strong>å¤–éƒ¨ç³»ç»Ÿé›†æˆã€å®æ—¶æ•°æ®äº¤äº’å’Œä¼ä¸šçº§åº”ç”¨</strong>æ–¹é¢å…·æœ‰æ˜¾è‘—ä¼˜åŠ¿ã€‚å…¶åè®®é©±åŠ¨çš„æ¨¡å¼æä¾›äº†å¼ºå¤§çš„äº’æ“ä½œæ€§ï¼Œèƒ½å¤Ÿå°† AI æ™ºèƒ½ä½“ä¸å„ç§å¤æ‚çš„å¤–éƒ¨æœåŠ¡ï¼ˆå¦‚æ•°æ®åº“ã€APIã€é—ç•™ç³»ç»Ÿï¼‰æ— ç¼è¿æ¥ã€‚MCP çš„æœ‰çŠ¶æ€è¿æ¥ç®¡ç†å’Œå®‰å…¨æœºåˆ¶ï¼Œä½¿å…¶æˆä¸ºæ„å»ºé«˜å¯é ã€é«˜æ€§èƒ½ AI æ™ºèƒ½ä½“åº”ç”¨çš„å…³é”®åŸºç¡€è®¾æ–½ã€‚</p>
<h3 data-id="heading-13">3.3ã€ç”Ÿæ€ä½å®šä½ï¼šäº’è¡¥è€Œéç«äº‰</h3>
<p>å›çœ‹ Agent Skills ä¸ MCP çš„å·®å¼‚ï¼Œä¼šå‘ç°å®ƒä»¬å¹¶ä¸æ˜¯åœ¨åŒä¸€æ¡èµ›é“ä¸Šç«äº‰ã€‚MCP è§£å†³çš„æ˜¯è¿æ¥é—®é¢˜ï¼Œå®ƒå…³å¿ƒçš„æ˜¯å¦‚ä½•è®© AI æ™ºèƒ½ä½“å®‰å…¨ã€ç¨³å®šã€æ ‡å‡†åŒ–åœ°æ¥å…¥å¤–éƒ¨ä¸–ç•Œï¼›è€Œ Agent Skills è§£å†³çš„ï¼Œåˆ™æ˜¯ä¸€ä¸ªæ›´è´´è¿‘æ—¥å¸¸å·¥ä½œçš„é—®é¢˜â€”â€”æ™ºèƒ½ä½“åˆ°åº•æ˜¯ä»¥ä»€ä¹ˆå½¢å¼â€œå­¦ä¼šâ€ä¸€ä»¶äº‹çš„ã€‚å®ƒä»¬å¹¶éç›¸äº’ç«äº‰çš„å…³ç³»ï¼Œè€Œæ˜¯åœ¨ AI æ™ºèƒ½ä½“ç”Ÿæ€ç³»ç»Ÿä¸­æ‰®æ¼”ç€<strong>äº’è¡¥çš„è§’è‰²</strong>ã€‚å°†ä¸¤è€…ç»“åˆä½¿ç”¨ï¼Œå¯ä»¥æ„å»ºå‡ºæ›´åŠ å¼ºå¤§ã€çµæ´»ä¸”é€‚åº”æ€§å¼ºçš„ AI æ™ºèƒ½ä½“ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8bc89588197e4c63aa36fa43a56ad403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=aWNT5VV45cyEFuRcDb3Y4oq7Q1k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æˆ‘ä»¬å¯ä»¥å°† Agent Skills è§†ä¸º AI æ™ºèƒ½ä½“çš„**â€œå†…éƒ¨çŸ¥è¯†åº“â€å’Œâ€œæœ¬åœ°å·¥å…·é›†â€**ã€‚å®ƒå®šä¹‰äº† <strong>AI æ™ºèƒ½ä½“â€œåº”è¯¥çŸ¥é“ä»€ä¹ˆâ€ä»¥åŠâ€œå¦‚ä½•å¤„ç†é—®é¢˜â€</strong>ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª Agent Skills å¯ä»¥å°è£…ä¸€å¥—å®Œæ•´çš„æ³•å¾‹æ–‡æ¡£å®¡æŸ¥æµç¨‹ï¼ŒåŒ…æ‹¬å¦‚ä½•è¯†åˆ«å…³é”®æ¡æ¬¾ã€å¦‚ä½•æå–ç‰¹å®šä¿¡æ¯ã€ä»¥åŠå¦‚ä½•ç”Ÿæˆåˆè§„æ€§æŠ¥å‘Šã€‚è¿™äº›çŸ¥è¯†å’Œæµç¨‹æ˜¯æ™ºèƒ½ä½“è‡ªèº«èƒ½åŠ›çš„ä½“ç°ï¼Œå¯ä»¥åœ¨æ²¡æœ‰å¤–éƒ¨ç½‘ç»œè¿æ¥çš„æƒ…å†µä¸‹ç‹¬ç«‹è¿è¡Œï¼Œæˆ–è€…ä½œä¸ºæ›´å¤æ‚ä»»åŠ¡çš„åŸºç¡€ã€‚</p>
<p>è€Œ MCP åˆ™å¯ä»¥çœ‹ä½œæ˜¯ AI æ™ºèƒ½ä½“ä¸â€œ<strong>å¤–éƒ¨ä¸–ç•Œâ€è¿›è¡Œäº¤äº’çš„â€œé€šç”¨æ¥å£</strong>â€ã€‚å®ƒå®šä¹‰äº† AI æ™ºèƒ½ä½“â€œå¯ä»¥ä¸å“ªäº›å¤–éƒ¨ç³»ç»Ÿäº¤äº’â€ä»¥åŠâ€œå¦‚ä½•è¿›è¡Œé«˜æ•ˆã€å®‰å…¨çš„äº¤äº’â€ã€‚ä¾‹å¦‚ï¼Œ<strong>å½“ AI æ™ºèƒ½ä½“éœ€è¦æŸ¥è¯¢æœ€æ–°çš„å¸‚åœºæ•°æ®ã€è°ƒç”¨ç¬¬ä¸‰æ–¹æ”¯ä»˜æ¥å£ã€æˆ–è€…ä¸ä¼ä¸šå†…éƒ¨çš„ CRM ç³»ç»ŸåŒæ­¥ä¿¡æ¯æ—¶</strong>ï¼ŒMCP å°±èƒ½æä¾›æ ‡å‡†åŒ–çš„é€šä¿¡æœºåˆ¶ã€‚å®ƒä½¿å¾— AI æ™ºèƒ½ä½“èƒ½å¤Ÿçªç ´è‡ªèº«çš„è¾¹ç•Œï¼Œåˆ©ç”¨å¤–éƒ¨æœåŠ¡çš„å¼ºå¤§èƒ½åŠ›ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨æ„å»ºå¤æ‚çš„ AI æ™ºèƒ½ä½“ç³»ç»Ÿæ—¶ï¼Œæœ€ä½³å®è·µå¾€å¾€æ˜¯<strong>é‡‡ç”¨æ··åˆæ–¹æ³•</strong>ï¼š</p>
<ul>
<li><strong>åˆ©ç”¨ Agent Skills å°è£…é¢†åŸŸä¸“ä¸šçŸ¥è¯†å’Œæ ‡å‡†åŒ–å·¥ä½œæµ</strong>ï¼šè¿™åŒ…æ‹¬é‚£äº›ç›¸å¯¹ç¨³å®šã€å¯å¤ç”¨ã€ä¸”å¯¹å¤–éƒ¨ä¾èµ–è¾ƒå°‘çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œç‰¹å®šçš„æ•°æ®æ¸…æ´—é€»è¾‘ã€æŠ¥å‘Šç”Ÿæˆæ¨¡æ¿ã€æˆ–å†…éƒ¨å†³ç­–æµç¨‹ã€‚</li>
<li><strong>åˆ©ç”¨ MCP å®ç°ä¸å¤–éƒ¨ç³»ç»Ÿå’ŒæœåŠ¡çš„é›†æˆ</strong>ï¼šè¿™åŒ…æ‹¬é‚£äº›éœ€è¦å®æ—¶æ•°æ®ã€åŠ¨æ€äº¤äº’ã€æˆ–è€…æ¶‰åŠå¤æ‚è®¤è¯å’Œæˆæƒçš„å¤–éƒ¨èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼Œè®¿é—®äº‘æ•°æ®åº“ã€è°ƒç”¨ç¬¬ä¸‰æ–¹ APIã€æˆ–è€…ä¸ä¼ä¸šçº§åº”ç”¨è¿›è¡Œæ•°æ®åŒæ­¥ã€‚</li>
</ul>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒAI æ™ºèƒ½ä½“å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§ä¸”ä¾¿æºçš„â€œå¤§è„‘â€ï¼ˆç”± Agent Skills æä¾›ï¼‰ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ‹¥æœ‰çµæ´»ä¸”é«˜æ•ˆçš„â€œæ‰‹è„šâ€ï¼ˆç”± MCP æä¾›ï¼‰ï¼Œä»è€Œåœ¨å„ç§å¤æ‚çš„åº”ç”¨åœºæ™¯ä¸­å‘æŒ¥å‡ºæœ€å¤§çš„æ½œåŠ›ã€‚è¿™ç§ååŒä½œç”¨ï¼Œä½¿å¾— AI æ™ºèƒ½ä½“ä¸ä»…èƒ½å¤Ÿâ€œæ€è€ƒâ€ï¼Œæ›´èƒ½å¤Ÿâ€œè¡ŒåŠ¨â€ï¼Œå¹¶ä¸çœŸå®ä¸–ç•Œçš„æ•°å­—åŸºç¡€è®¾æ–½æ— ç¼èåˆã€‚</p>
<p><strong>ã€ä»Šæ—¥æ¨èã€‘</strong>ï¼šä¸€ä¸ª<strong>æ›´ç®€å• æ›´æ™ºèƒ½çš„å…¨èƒ½ç½‘ç«™æ­å»ºå¹³å°</strong>ï¼Œä½ä»£ç å¼€å‘å·¥å…·RollCodeã€‚è½»æ¾æå‡æ•ˆç‡ã€é‡Šæ”¾å¼€å‘æ½œåŠ›ï¼Œå¿«é€ŸéªŒè¯æ‚¨çš„æ¯ä¸ªåˆ›æ„ï¼Œç‚¹å‡»<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.rollcode.cn%2F%3Fsource%3Dba%26id%3Dkele" target="_blank" title="https://www.rollcode.cn/?source=ba&amp;id=kele" ref="nofollow noopener noreferrer">å®˜ç½‘é“¾æ¥</a>ç›´è¾¾ä½“éªŒï¼š
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/31da84be1b0f4d80892fed24b7488968~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lit5p2v5Y-v5LmQ5aSa5Yqg5Yaw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692551&amp;x-signature=zdzQpCPAxsQFnMPNL2vxk8GmZG8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Dart â€”â€”??è¿ç®—ç¬¦]]></title>    <link>https://juejin.cn/post/7602259669730246683</link>    <guid>https://juejin.cn/post/7602259669730246683</guid>    <pubDate>2026-02-03T03:31:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669730246683" data-draft-id="7602166907571912742" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Dart â€”â€”??è¿ç®—ç¬¦"/> <meta itemprop="keywords" content="Flutter,Dart"/> <meta itemprop="datePublished" content="2026-02-03T03:31:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Haha_bj"/> <meta itemprop="url" content="https://juejin.cn/user/2612027844214647"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Dart â€”â€”??è¿ç®—ç¬¦
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2612027844214647/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Haha_bj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:31:14.000Z" title="Tue Feb 03 2026 03:31:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æƒ³äº†è§£ Dart ä¸­çš„ <code>??</code> è¿ç®—ç¬¦ï¼Œå®ƒæ˜¯ Dart é‡Œå¤„ç† ** å¯é€‰å€¼ï¼ˆå¯ç©ºç±»å‹ï¼‰** çš„å¸¸ç”¨è¿ç®—ç¬¦ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯ã€Œç©ºå€¼åˆå¹¶ã€ï¼Œæˆ‘ä»¬ä»åŸºç¡€ç”¨æ³•ã€æ ¸å¿ƒç‰¹ç‚¹ã€æ‹“å±•ç”¨æ³•åˆ°å®é™…åœºæ™¯ï¼Œä¸€æ­¥æ­¥è®²æ¸…æ¥šï¼Œè®©ä½ å¿«é€ŸæŒæ¡ã€‚</p>
<h3 data-id="heading-0">ä¸€ã€å…ˆæ˜ç¡® <code>??</code> è¿ç®—ç¬¦çš„æ ¸å¿ƒå®šä¹‰</h3>
<p><code>??</code> è¢«ç§°ä¸º <strong>ã€Œç©ºå€¼åˆå¹¶è¿ç®—ç¬¦ï¼ˆNull Coalescing Operatorï¼‰ã€</strong>ï¼Œä½œç”¨æ˜¯ï¼šåˆ¤æ–­è¿ç®—ç¬¦<strong>å·¦ä¾§çš„è¡¨è¾¾å¼æ˜¯å¦ä¸º <code>null</code></strong>ï¼š</p>
<ul>
<li>å¦‚æœ<strong>å·¦ä¾§ä¸ä¸º <code>null</code></strong>ï¼Œç›´æ¥è¿”å›<strong>å·¦ä¾§çš„å€¼</strong>ï¼›</li>
<li>å¦‚æœ<strong>å·¦ä¾§ä¸º <code>null</code></strong>ï¼Œè¿”å›<strong>å³ä¾§çš„å¤‡é€‰å€¼</strong>ã€‚</li>
</ul>
<p>ç®€å•ç†è§£ï¼šã€Œé€‰å·¦è¾¹çš„ï¼Œå·¦è¾¹æ˜¯ç©ºçš„å°±é€‰å³è¾¹çš„ã€ï¼Œç”¨äºç»™å¯ç©ºå˜é‡è®¾ç½®é»˜è®¤å€¼ï¼Œé¿å…ç©ºå€¼å¼•å‘é”™è¯¯ã€‚</p>
<h3 data-id="heading-1">äºŒã€åŸºç¡€ç”¨æ³•ï¼ˆæœ€å¸¸ç”¨åœºæ™¯ï¼‰</h3>
<h4 data-id="heading-2">1. åŸºæœ¬è¯­æ³•æ ¼å¼</h4>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// è¯­æ³•ï¼šå·¦ä¾§è¡¨è¾¾å¼ ?? å³ä¾§å¤‡é€‰å€¼</span>
variable ?? defaultValue
</code></pre>
<h4 data-id="heading-3">2. ç¤ºä¾‹ï¼ˆåŸºç¡€åœºæ™¯ï¼‰</h4>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// åœºæ™¯ 1ï¼šå·¦ä¾§ä¸ä¸º nullï¼Œè¿”å›å·¦ä¾§å€¼</span>
  <span class="hljs-built_in">String?</span> name1 = <span class="hljs-string">"å¼ ä¸‰"</span>;
  <span class="hljs-built_in">String</span> result1 = name1 ?? <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result1: <span class="hljs-subst">$result1</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult1: å¼ ä¸‰</span>

  <span class="hljs-comment">// åœºæ™¯ 2ï¼šå·¦ä¾§ä¸º nullï¼Œè¿”å›å³ä¾§é»˜è®¤å€¼</span>
  <span class="hljs-built_in">String?</span> name2 = <span class="hljs-keyword">null</span>;
  <span class="hljs-built_in">String</span> result2 = name2 ?? <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result2: <span class="hljs-subst">$result2</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult2: æœªçŸ¥ç”¨æˆ·</span>

  <span class="hljs-comment">// åœºæ™¯ 3ï¼šç»“åˆæ•°å€¼ç±»å‹ä½¿ç”¨</span>
  <span class="hljs-built_in">int?</span> age1 = <span class="hljs-number">20</span>;
  <span class="hljs-built_in">int</span> ageResult1 = age1 ?? <span class="hljs-number">18</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ageResult1: <span class="hljs-subst">$ageResult1</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šageResult1: 20</span>

  <span class="hljs-built_in">int?</span> age2 = <span class="hljs-keyword">null</span>;
  <span class="hljs-built_in">int</span> ageResult2 = age2 ?? <span class="hljs-number">18</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ageResult2: <span class="hljs-subst">$ageResult2</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šageResult2: 18</span>
}
</code></pre>
<h4 data-id="heading-4">3. å…³é”®æ³¨æ„ç‚¹</h4>
<ul>
<li>
<p><code>??</code> åªåˆ¤æ–­ã€Œå·¦ä¾§æ˜¯å¦ä¸º <code>null</code>ã€ï¼Œ<strong>ä¸åˆ¤æ–­ç©ºå­—ç¬¦ä¸²ã€0 ç­‰ã€Œç©ºå€¼ä½†é nullã€çš„æƒ…å†µ</strong>ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// å·¦ä¾§æ˜¯ç©ºå­—ç¬¦ä¸²ï¼ˆä¸æ˜¯ nullï¼‰ï¼Œè¿”å›å·¦ä¾§ç©ºå­—ç¬¦ä¸²ï¼Œè€Œéå³ä¾§é»˜è®¤å€¼</span>
  <span class="hljs-built_in">String?</span> emptyStr = <span class="hljs-string">""</span>;
  <span class="hljs-built_in">String</span> result = emptyStr ?? <span class="hljs-string">"é»˜è®¤å­—ç¬¦ä¸²"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result: '<span class="hljs-subst">$result</span>'"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult: ''</span>
}
</code></pre>
</li>
<li>
<p>å³ä¾§çš„å¤‡é€‰å€¼<strong>åªæœ‰åœ¨å·¦ä¾§ä¸º <code>null</code> æ—¶æ‰ä¼šè¢«æ‰§è¡Œ</strong>ï¼ˆæƒ°æ€§æ±‚å€¼ï¼‰ï¼Œæå‡æ€§èƒ½ï¼š</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-built_in">String?</span> name = <span class="hljs-string">"æå››"</span>;
  <span class="hljs-comment">// å› ä¸ºå·¦ä¾§ä¸ä¸º nullï¼Œå³ä¾§çš„ print ä¸ä¼šæ‰§è¡Œï¼Œä¹Ÿä¸ä¼šè°ƒç”¨ getDefaultName()</span>
  <span class="hljs-built_in">String</span> result = name ?? (<span class="hljs-built_in">print</span>(<span class="hljs-string">"å³ä¾§æ‰§è¡Œäº†"</span>) + getDefaultName());
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result: <span class="hljs-subst">$result</span>"</span>);
}

<span class="hljs-built_in">String</span> getDefaultName() =&gt; <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
</code></pre>
<p>è¿è¡Œç»“æœï¼šä»…è¾“å‡º <code>result: æå››</code>ï¼Œå³ä¾§çš„æ‰“å°å’Œå‡½æ•°è°ƒç”¨éƒ½æœªæ‰§è¡Œã€‚</p>
</li>
</ul>
<h3 data-id="heading-5">ä¸‰ã€æ‹“å±•ç”¨æ³•ï¼šå’Œå…¶ä»–è¿ç®—ç¬¦ç»“åˆ</h3>
<h4 data-id="heading-6">1. <code>??=</code>ï¼šç©ºå€¼èµ‹å€¼è¿ç®—ç¬¦ï¼ˆç»™å˜é‡æœ¬èº«è®¾ç½®é»˜è®¤å€¼ï¼‰</h4>
<p><code>??=</code> æ˜¯ <code>??</code> çš„è¡ç”Ÿè¿ç®—ç¬¦ï¼Œä½œç”¨æ˜¯ï¼š<strong>å¦‚æœå˜é‡æœ¬èº«ä¸º <code>null</code>ï¼Œå°±ç»™å®ƒèµ‹å€¼å³ä¾§çš„å€¼ï¼›å¦‚æœå˜é‡ä¸ä¸º <code>null</code>ï¼Œåˆ™ä¸åšä»»ä½•ä¿®æ”¹</strong>ï¼ˆç›¸å½“äºã€Œç»™å˜é‡è®¾ç½®é»˜è®¤å€¼ï¼Œä»…åœ¨å˜é‡ä¸ºç©ºæ—¶ç”Ÿæ•ˆã€ï¼‰ã€‚</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// åœºæ™¯ 1ï¼šå˜é‡ä¸º nullï¼Œèµ‹å€¼å³ä¾§å€¼</span>
  <span class="hljs-built_in">String?</span> name1 = <span class="hljs-keyword">null</span>;
  name1 ??= <span class="hljs-string">"ç‹äº”"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"name1: <span class="hljs-subst">$name1</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šname1: ç‹äº”</span>

  <span class="hljs-comment">// åœºæ™¯ 2ï¼šå˜é‡ä¸ä¸º nullï¼Œä¸ä¿®æ”¹</span>
  <span class="hljs-built_in">String?</span> name2 = <span class="hljs-string">"èµµå…­"</span>;
  name2 ??= <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"name2: <span class="hljs-subst">$name2</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šname2: èµµå…­</span>
}
</code></pre>
<p><strong>å¯¹æ¯” <code>??</code> å’Œ <code>??=</code></strong>ï¼š</p>
<ul>
<li><code>name ?? "æœªçŸ¥"</code>ï¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œ<strong>ä¸ä¿®æ”¹ <code>name</code> æœ¬èº«</strong>ï¼›</li>
<li><code>name ??= "æœªçŸ¥"</code>ï¼šç›´æ¥<strong>ä¿®æ”¹ <code>name</code> æœ¬èº«</strong>ï¼ˆä»…å½“ <code>name</code> ä¸º <code>null</code> æ—¶ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-7">2. <code>?.</code> + <code>??</code>ï¼šå®‰å…¨è®¿é—® + ç©ºå€¼å…œåº•ï¼ˆé«˜é¢‘ç»„åˆï¼‰</h4>
<p><code>?.</code> æ˜¯ã€Œå®‰å…¨è®¿é—®è¿ç®—ç¬¦ã€ï¼Œä½œç”¨æ˜¯ï¼šå¦‚æœå¯¹è±¡ä¸ä¸º <code>null</code>ï¼Œå°±è®¿é—®å¯¹è±¡çš„å±æ€§ / æ–¹æ³•ï¼›å¦‚æœå¯¹è±¡ä¸º <code>null</code>ï¼Œåˆ™è¿”å› <code>null</code>ï¼ˆé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰ã€‚</p>
<p>ä¸¤è€…ç»“åˆï¼Œå¯å®ç°ã€Œå®‰å…¨è®¿é—®å±æ€§ï¼Œè‹¥å¯¹è±¡ä¸ºç©ºæˆ–å±æ€§ä¸ºç©ºï¼Œå°±è¿”å›é»˜è®¤å€¼ã€ï¼Œæ˜¯ä¸šåŠ¡å¼€å‘ä¸­çš„é«˜é¢‘ç»„åˆã€‚</p>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// å®šä¹‰ä¸€ä¸ªç”¨æˆ·ç±»</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> </span>{
  <span class="hljs-built_in">String?</span> name;
  User(<span class="hljs-keyword">this</span>.name);
}

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// åœºæ™¯ 1ï¼šå¯¹è±¡ä¸ä¸º nullï¼Œå±æ€§ä¹Ÿä¸ä¸º null</span>
  User? user1 = User(<span class="hljs-string">"é’±ä¸ƒ"</span>);
  <span class="hljs-built_in">String</span> result1 = user1?.name ?? <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result1: <span class="hljs-subst">$result1</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult1: é’±ä¸ƒ</span>

  <span class="hljs-comment">// åœºæ™¯ 2ï¼šå¯¹è±¡ä¸ä¸º nullï¼Œä½†å±æ€§ä¸º null</span>
  User? user2 = User(<span class="hljs-keyword">null</span>);
  <span class="hljs-built_in">String</span> result2 = user2?.name ?? <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result2: <span class="hljs-subst">$result2</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult2: æœªçŸ¥ç”¨æˆ·</span>

  <span class="hljs-comment">// åœºæ™¯ 3ï¼šå¯¹è±¡æœ¬èº«ä¸º null</span>
  User? user3 = <span class="hljs-keyword">null</span>;
  <span class="hljs-built_in">String</span> result3 = user3?.name ?? <span class="hljs-string">"æœªçŸ¥ç”¨æˆ·"</span>;
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"result3: <span class="hljs-subst">$result3</span>"</span>); <span class="hljs-comment">// è¾“å‡ºï¼šresult3: æœªçŸ¥ç”¨æˆ·</span>
}
</code></pre>
<h3 data-id="heading-8">å››ã€å®é™…ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹</h3>
<h4 data-id="heading-9">1. æ¥å£è¿”å›æ•°æ®å…œåº•ï¼ˆé¿å…ç©ºå€¼å±•ç¤ºï¼‰</h4>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// æ¨¡æ‹Ÿæ¥å£è¿”å›çš„ç”¨æˆ·æ•°æ®ï¼ˆå¯èƒ½ä¸º nullï¼‰</span>
<span class="hljs-built_in">Map</span>&lt;<span class="hljs-built_in">String</span>, <span class="hljs-built_in">dynamic</span>&gt;? apiResponse = {
  <span class="hljs-string">"username"</span>: <span class="hljs-string">"å°æ˜"</span>,
  <span class="hljs-string">"age"</span>: <span class="hljs-keyword">null</span>,
  <span class="hljs-string">"address"</span>: <span class="hljs-string">""</span>
};

<span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// æå–ç”¨æˆ·åï¼Œä¸ºç©ºåˆ™æ˜¾ç¤ºã€Œæ¸¸å®¢ã€</span>
  <span class="hljs-built_in">String</span> username = apiResponse?[<span class="hljs-string">"username"</span>] ?? <span class="hljs-string">"æ¸¸å®¢"</span>;
  <span class="hljs-comment">// æå–å¹´é¾„ï¼Œä¸ºç©ºåˆ™é»˜è®¤ 18</span>
  <span class="hljs-built_in">int</span> age = apiResponse?[<span class="hljs-string">"age"</span>] ?? <span class="hljs-number">18</span>;
  <span class="hljs-comment">// æå–åœ°å€ï¼Œä¸ºç©ºå­—ç¬¦ä¸²ï¼ˆé nullï¼‰åˆ™æ˜¾ç¤ºã€Œæœªå¡«å†™åœ°å€ã€ï¼ˆéœ€é¢å¤–åˆ¤æ–­ï¼‰</span>
  <span class="hljs-built_in">String</span> address = apiResponse?[<span class="hljs-string">"address"</span>] ?? <span class="hljs-string">"æœªå¡«å†™åœ°å€"</span>;
  address = address.isEmpty ? <span class="hljs-string">"æœªå¡«å†™åœ°å€"</span> : address;

  <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç”¨æˆ·åï¼š<span class="hljs-subst">$username</span>ï¼Œå¹´é¾„ï¼š<span class="hljs-subst">$age</span>ï¼Œåœ°å€ï¼š<span class="hljs-subst">$address</span>"</span>);
  <span class="hljs-comment">// è¾“å‡ºï¼šç”¨æˆ·åï¼šå°æ˜ï¼Œå¹´é¾„ï¼š18ï¼Œåœ°å€ï¼šæœªå¡«å†™åœ°å€</span>
}
</code></pre>
<h4 data-id="heading-10">2. åˆå§‹åŒ–å¯ç©ºå˜é‡çš„é»˜è®¤å€¼</h4>
<pre><code class="hljs language-Dart" lang="Dart"><span class="hljs-comment">// å®šä¹‰å¯ç©ºçš„é…ç½®å˜é‡</span>
<span class="hljs-built_in">String?</span> appTitle;
<span class="hljs-built_in">int?</span> appVersionCode;

<span class="hljs-keyword">void</span> initAppConfig() {
  <span class="hljs-comment">// ç»™é…ç½®è®¾ç½®é»˜è®¤å€¼ï¼ˆä»…å½“å˜é‡ä¸º null æ—¶ç”Ÿæ•ˆï¼‰</span>
  appTitle ??= <span class="hljs-string">"æˆ‘çš„Dartåº”ç”¨"</span>;
  appVersionCode ??= <span class="hljs-number">1</span>;
}

<span class="hljs-keyword">void</span> main() {
  initAppConfig();
  <span class="hljs-built_in">print</span>(<span class="hljs-string">"åº”ç”¨æ ‡é¢˜ï¼š<span class="hljs-subst">$appTitle</span>ï¼Œç‰ˆæœ¬å·ï¼š<span class="hljs-subst">$appVersionCode</span>"</span>);
  <span class="hljs-comment">// è¾“å‡ºï¼šåº”ç”¨æ ‡é¢˜ï¼šæˆ‘çš„Dartåº”ç”¨ï¼Œç‰ˆæœ¬å·ï¼š1</span>
}
</code></pre>
<h3 data-id="heading-11">æ€»ç»“</h3>
<ol>
<li><code>??</code> æ˜¯<strong>ç©ºå€¼åˆå¹¶è¿ç®—ç¬¦</strong>ï¼Œæ ¸å¿ƒé€»è¾‘ï¼šã€Œå·¦ä¾§éç©ºè¿”å·¦ä¾§ï¼Œå·¦ä¾§ä¸ºç©ºè¿”å³ä¾§ã€ï¼Œç”¨äºç»™å¯ç©ºå˜é‡å…œåº•ã€‚</li>
<li>å…³é”®ç‰¹æ€§ï¼šåªåˆ¤æ–­ <code>null</code>ã€å³ä¾§æƒ°æ€§æ±‚å€¼ã€ä¸ä¿®æ”¹åŸå˜é‡ã€‚</li>
<li>å¸¸ç”¨æ‹“å±•ï¼š<code>??=</code> ç”¨äºç»™å˜é‡æœ¬èº«è®¾ç½®é»˜è®¤å€¼ï¼ˆä»…ä¸ºç©ºæ—¶ç”Ÿæ•ˆï¼‰ï¼›<code>?. + ??</code> ç”¨äºå®‰å…¨è®¿é—®å¯¹è±¡å±æ€§å¹¶å…œåº•ã€‚</li>
<li>å®é™…åœºæ™¯ï¼šæ¥å£æ•°æ®å…œåº•ã€å˜é‡é»˜è®¤å€¼åˆå§‹åŒ–ã€é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæ˜¯ Dart å¼€å‘ä¸­çš„å¿…å¤‡è¯­æ³•ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»æ¨¡å‹åˆ°è½åœ°ï¼šAI è®¤çŸ¥æ¶æ„å…¨æ™¯ä¸ç¼–æ’å®æˆ˜ï¼ˆå« RAGã€Dify/LangChainã€æ²™ç®±ä¸æç¤ºè¯ï¼‰]]></title>    <link>https://juejin.cn/post/7602154171109261375</link>    <guid>https://juejin.cn/post/7602154171109261375</guid>    <pubDate>2026-02-03T03:30:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602154171109261375" data-draft-id="7602176198874431531" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»æ¨¡å‹åˆ°è½åœ°ï¼šAI è®¤çŸ¥æ¶æ„å…¨æ™¯ä¸ç¼–æ’å®æˆ˜ï¼ˆå« RAGã€Dify/LangChainã€æ²™ç®±ä¸æç¤ºè¯ï¼‰"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-02-03T03:30:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Manshawar"/> <meta itemprop="url" content="https://juejin.cn/user/1832206145692247"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»æ¨¡å‹åˆ°è½åœ°ï¼šAI è®¤çŸ¥æ¶æ„å…¨æ™¯ä¸ç¼–æ’å®æˆ˜ï¼ˆå« RAGã€Dify/LangChainã€æ²™ç®±ä¸æç¤ºè¯ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1832206145692247/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Manshawar
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:30:17.000Z" title="Tue Feb 03 2026 03:30:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»45åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">agentçš„å…¨æ™¯è®¤çŸ¥å’Œä¸€ä¸ªnodeæ²™ç›’å°å·¥å…·</h2>
<hr/>
<h3 data-id="heading-1">ä¸€ã€AI è®¤çŸ¥æ¨¡å‹å…¨æ™¯è§†å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åº”ç”¨å±‚ (Application)                                        â”‚
â”‚  Manus Â· ClawBot  Â· å‚ç›´é¢†åŸŸ Agent              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¼–æ’å±‚ (Orchestration)                                      â”‚
â”‚  <span class="hljs-built_in">Dify</span>(ä½ä»£ç ) Â· <span class="hljs-built_in">LangChain</span>(ç¼–ç¨‹æ¡†æ¶) Â· <span class="hljs-built_in">LangGraph</span>(çŠ¶æ€æœº)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è®°å¿†å±‚ (Memory)                                             â”‚
â”‚  Vector DB Â· RAG Â· ä¸Šä¸‹æ–‡å‹ç¼© Â· é•¿æœŸè®°å¿†æœºåˆ¶ Â· Milvus          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¨¡å‹å±‚ (Foundation Model)                                   â”‚
â”‚  GPT-<span class="hljs-number">4</span>o Â· Claude Â· DeepSeek Â· å¤šæ¨¡æ€å¤§æ¨¡å‹                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>æœªæ¥çš„ AI åº”ç”¨ä¸æ˜¯ã€Œå¤§æ¨¡å‹å•æ‰“ç‹¬æ–—ã€ï¼Œè€Œæ˜¯ã€Œè®°å¿† + è§„åˆ’ + å·¥å…·ã€çš„<strong>è®¤çŸ¥æ¶æ„</strong>ç«äº‰ã€‚</p>
<p>æˆ‘ä»¬è¯¥åœ¨æœªæ¥çš„ AI æ—¶ä»£ä¸­ä½•å»ä½•ä»ï¼Ÿæˆ‘è®¤ä¸ºæ˜¯å€ŸåŠ© AI çš„èƒ½åŠ›ï¼Œå»å®ç°ç±»ä¼¼äº ClawBot è¿™ç§ AI åº”ç”¨ï¼Œè§£å†³<strong>æ¨¡å‹åˆ°è½åœ°çš„æœ€åä¸€å…¬é‡Œ</strong>é—®é¢˜ã€‚</p>
<hr/>
<h3 data-id="heading-2">äºŒã€è®¤è¯†æ¨¡å‹ï¼šä» DeepSeek çš„å¼€æ”¾å¹³å°å¼€å§‹</h3>
<p>è¿™é‡Œä¼šç»™å¤§å®¶ä»‹ç»ä¸¤ä¸ªå¹³å°ï¼š</p>
<ol>
<li><strong>DeepSeek å¼€æ”¾å¹³å°</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fapi-docs.deepseek.com%2Fzh-cn%2F" target="_blank" title="https://api-docs.deepseek.com/zh-cn/" ref="nofollow noopener noreferrer">api-docs.deepseek.com/zh-cn/</a>å‚æ•°è¾ƒå°‘ï¼Œé€‚åˆåˆæ­¥è®¤çŸ¥ã€‚</li>
<li><strong>é˜¿é‡Œäº‘ç™¾ç‚¼</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2Fcn-beijing%2F%3Fspm%3D5176.29597918.J_SEsSjsNv72yRuRFS2VknO.2.739e7b08QDsLcK%26tab%3Ddoc%23%2Fdoc%2F%3Ftype%3Dmodel%26url%3D2579562" target="_blank" title="https://bailian.console.aliyun.com/cn-beijing/?spm=5176.29597918.J_SEsSjsNv72yRuRFS2VknO.2.739e7b08QDsLcK&amp;tab=doc#/doc/?type=model&amp;url=2579562" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°</a>
ç±»ä¼¼ OpenAIï¼Œæ¨¡å‹ä¸°å¯Œã€æ”¯æŒè‡ªå®šä¹‰è°ƒè¯•ï¼Œæ–‡æ¡£è¯¦ç»†ï¼Œé€‚åˆé«˜è‡ªå®šä¹‰ã€å¤š Agent åä½œç­‰åœºæ™¯ã€‚</li>
</ol>
<p>ä¸€èˆ¬ä¼šæœ‰ <strong>Base API</strong>ï¼ˆç”¨äºè®¿é—®æ¨¡å‹ï¼‰ï¼Œéœ€è¦å¡«å…¥ç”Ÿæˆçš„ <strong>API Key</strong>ï¼ˆå¯†é’¥ï¼‰ã€‚æ ¹æ®æ‰€ç”¨æ¡†æ¶æˆ–ç¼–æ’å·¥å…·ï¼Œé€‰æ‹©å¯¹åº”çš„æ¨¡å‹åï¼Œå¦‚ DeepSeek çš„ <strong>Chat æ¨¡å‹</strong>ä¸ <strong>Reasoner æ¨¡å‹</strong>ï¼Œå„æœ‰ä¾§é‡ç‚¹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6d4d78619324e8191cd6dfb3f8b289c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFuc2hhd2Fy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694444&amp;x-signature=suwlXowxtcKNGyakkpJZ5YXvG5k%3D" alt="1770002384080.png" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œä¸€èˆ¬è¿˜ä¼šæœ‰**æ¸©åº¦ï¼ˆTemperatureï¼‰**è®¾ç½®ï¼Œå¯ä»¥ç†è§£ä¸ºæ¨¡å‹çš„ã€Œ<strong>åˆ›æ„å¼€å…³</strong>ã€æˆ–ã€Œ<strong>å‘æ•£ç¨‹åº¦è°ƒèŠ‚å™¨</strong>ã€ï¼Œæ ¸å¿ƒæ˜¯æ¦‚ç‡åˆ†å¸ƒçš„å°–é”åº¦ã€‚</p>
<blockquote>
<p><strong>æ¸©åº¦è¶Šä½ï¼Œæ¨¡å‹è¶Šåƒã€Œä¸¥è°¨çš„è€å¸ˆã€ï¼›æ¸©åº¦è¶Šé«˜ï¼Œæ¨¡å‹è¶Šåƒã€Œå–é†‰çš„è¯—äººã€ã€‚</strong></p>
</blockquote>



































<table><thead><tr><th>æ¸©åº¦å€¼</th><th>ç‰¹å¾</th><th>å…¸å‹åº”ç”¨</th><th>è¾“å‡ºç‰¹ç‚¹</th></tr></thead><tbody><tr><td><strong>0 - 0.3</strong></td><td>ç¡®å®šæ€§/ä¿å®ˆ</td><td>ä»£ç ç”Ÿæˆã€æ•°å­¦è®¡ç®—ã€çŸ¥è¯†é—®ç­”ã€JSON</td><td>äº‹å®å‡†ç¡®ã€é€»è¾‘ä¸¥è°¨ï¼Œå¯èƒ½æœºæ¢°ã€ç¼ºä¹å˜åŒ–</td></tr><tr><td><strong>0.4 - 0.7</strong></td><td>å¹³è¡¡</td><td>é€šç”¨å¯¹è¯ã€å†™ä½œè¾…åŠ©ã€å•†ä¸šæ–‡æ¡ˆ</td><td>æ­£ç¡®æ€§ä¸è‡ªç„¶æµç•…åº¦å…¼é¡¾</td></tr><tr><td><strong>0.8 - 1.2</strong></td><td>åˆ›é€ æ€§</td><td>åˆ›æ„å†™ä½œã€å¤´è„‘é£æš´ã€è¯—æ­Œã€è§’è‰²æ‰®æ¼”</td><td>è¯æ±‡ä¸°å¯Œã€æƒ³è±¡åŠ›å¼ºï¼Œå¯èƒ½è·‘é¢˜</td></tr><tr><td><strong>&gt; 1.5</strong></td><td>æ··ä¹±/å‘æ•£</td><td>è‰ºæœ¯å®éªŒã€éšæœºçµæ„Ÿã€å¯¹æŠ—æ€§æµ‹è¯•</td><td>å¯èƒ½è’è¯ã€è·³è·ƒã€éé€»è¾‘</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-3">ä¸‰ã€ç°ä»£æ¨¡å‹è¿›åŒ–çš„å››å¤§å…±åŒè¶‹åŠ¿</h3>
<ol>
<li><strong>Agentic èƒ½åŠ›ï¼ˆè‡ªä¸»ä»£ç†ï¼‰<strong>æ‰€æœ‰æ¨¡å‹éƒ½åœ¨å¼ºåŒ–</strong>å·¥å…·è°ƒç”¨é“¾ã€å¤šæ­¥éª¤è§„åˆ’ã€ç¯å¢ƒäº¤äº’</strong>èƒ½åŠ›ã€‚Gartner å°† Agentic AI åˆ—ä¸º 2025 å¹´é¡¶çº§æˆ˜ç•¥æŠ€æœ¯è¶‹åŠ¿ï¼Œé¢„è®¡å¹´å¢é•¿ç‡ 40%ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.webpronews.com%2Fagentic-ai-tops-gartners-2025-trends-autonomous-revolution%2F" target="_blank" title="https://www.webpronews.com/agentic-ai-tops-gartners-2025-trends-autonomous-revolution/" ref="nofollow noopener noreferrer">æ¥æº</a>ï¼‰ã€‚</li>
<li><strong>æ¨ç†æ¶æ„çš„æ˜¾æ€§åŒ–</strong>ä¸å†éšè—æ€è€ƒè¿‡ç¨‹ï¼Œè€Œæ˜¯æä¾›ã€Œæ€è€ƒæ¨¡å¼ã€ï¼ˆThinking/Deep Thinkï¼‰å¼€å…³ï¼Œè®©ç”¨æˆ·åœ¨é€Ÿåº¦ä¸æ·±åº¦é—´æƒè¡¡ï¼Œä»£è¡¨ä»<strong>æ¨¡å¼åŒ¹é…åˆ°ç»“æ„åŒ–æ¨ç†</strong>çš„èŒƒå¼è½¬ç§»ã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡çª—å£çš„å†›å¤‡ç«èµ›</strong>ä» 256Kï¼ˆKimiï¼‰åˆ° 400Kï¼ˆGPT-5ï¼‰å†åˆ° 1Mï¼ˆClaudeï¼‰ï¼Œç›®æ ‡éƒ½æ˜¯å®ç°**ã€Œæ•´æœ¬ä¹¦/æ•´ä¸ªä»£ç åº“ã€çš„ä¸€æ¬¡æ€§å¤„ç†**ï¼Œé™ä½å¯¹ RAG ç²¾åº¦çš„ä¾èµ–ã€‚</li>
<li><strong>å‚ç›´ä¸“ä¸šåŒ–ä¸æˆæœ¬åˆ†å±‚</strong>
åŒä¸€æ¨¡å‹å®¶æ—å†…éƒ¨åˆ†åŒ–å‡ºæ ‡å‡†ç‰ˆï¼ˆæ¨ç†ï¼‰ã€Mini ç‰ˆï¼ˆæˆæœ¬ï¼‰ã€Nano ç‰ˆï¼ˆå»¶è¿Ÿï¼‰ï¼Œé€šè¿‡<strong>è‡ªåŠ¨è·¯ç”±</strong>ä¸ºç”¨æˆ·åŒ¹é…æœ€ä¼˜æ€§ä»·æ¯”ã€‚</li>
</ol>
<p>ä»¥ä¸Šæ˜¯ç»“åˆå½“å‰æ¨¡å‹æ›´æ–°æ±‡æ€»çš„ç»“è®ºï¼šä¸»æµæ¨¡å‹ä¸»è¦åœ¨<strong>å·¥å…·è°ƒç”¨ã€æ¨ç†æ¶æ„ã€ä¸Šä¸‹æ–‡ã€æˆæœ¬</strong>å››ä¸ªæ–¹å‘ä¼˜åŒ–ã€‚</p>
<p>ä¸‹æ–‡å°†å›´ç»• <strong>AI å·¥å…·è°ƒç”¨</strong>å±•å¼€ï¼šä¸ºä»€ä¹ˆå„å¤§æ¨¡å‹å‚å•†éƒ½é‡è§†å®ƒï¼Œä»¥åŠå®ƒç”±å“ªäº›è§£å†³æ–¹æ¡ˆç»„æˆã€‚</p>
<p>å¯¹äºç”Ÿäº§çº§æ¨¡å‹è½åœ°ï¼ˆè€Œéç®€å• API è°ƒç”¨ï¼‰ï¼Œ<strong>è®°å¿†å±‚å’Œç¼–æ’å±‚æ˜¯æ¦‚å¿µä¸Šå¿…é¡»ç»è¿‡çš„ä¸¤å¤§å…³å¡</strong>ã€‚å³ä½¿æ²¡æœ‰æ˜¾å¼ä½¿ç”¨ Milvus æˆ– LangChainï¼Œç³»ç»Ÿä¹Ÿå¿…ç„¶è¦å®ç°è¿™ä¸¤å±‚çš„ç­‰æ•ˆåŠŸèƒ½ï¼ˆå“ªæ€•ç”¨ä»£ç ç¡¬ç¼–ç ï¼‰ã€‚è¿™ä¸¤è€…éƒ½æ˜¯ç¼–ç å±‚é¢å…·æœ‰ä»£è¡¨æ€§çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç›´æ¥ç”¨ï¼Œä½†éœ€è¦ç†è§£å…¶æ€æƒ³ã€‚</p>
<hr/>
<h3 data-id="heading-4">å››ã€è®°å¿†å±‚ï¼šè§£å†³ã€Œæ¨¡å‹å¤©ç”Ÿå¥å¿˜ã€çš„ç¡¬ä¼¤</h3>
<p>åŸºç¡€å¤§æ¨¡å‹æ˜¯**æ— çŠ¶æ€ï¼ˆStatelessï¼‰**çš„â€”â€”æ¯æ¬¡ API è¯·æ±‚ç‹¬ç«‹ï¼Œä¸ä¼šè®°å¾— 5 åˆ†é’Ÿå‰çš„å¯¹è¯ï¼Œæ›´æ— æ³•è®°ä½ä¸Šå‘¨çš„ä¸šåŠ¡æ•°æ®ã€‚</p>
<p><strong>è½åœ°æ—¶å¿…é¡»å¤„ç†çš„é—®é¢˜ï¼š</strong></p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡ç¨€ç¼º</strong>ï¼šå³ä¾¿ GPT-5 æ”¯æŒ 400K tokensï¼Œå…¨é‡å¡è¿›ä¸Šä¸‹æ–‡æ—¢è´µåˆæ…¢ï¼Œä¸”æ— æ³•è·¨ä¼šè¯ä¿æŒã€‚</li>
<li><strong>çŸ¥è¯†è¿‡æ—¶</strong>ï¼šæ¨¡å‹è®­ç»ƒæ•°æ®æœ‰æˆªæ­¢æ—¥æœŸï¼Œéœ€è¦ RAG æ¥å…¥å®æ—¶çŸ¥è¯†åº“ã€‚</li>
<li><strong>ä¸ªæ€§åŒ–ç¼ºå¤±</strong>ï¼šæ²¡æœ‰è®°å¿†å±‚ï¼Œæ¯æ¬¡å¯¹è¯ä»é›¶å¼€å§‹ï¼Œæ— æ³•ã€Œè¶Šç”¨è¶Šæ‡‚ä½ ã€ã€‚</li>
</ul>
<p>å¤§é‡ä¸Šä¸‹æ–‡ä¼šå¸¦æ¥ï¼šä¸€ã€å¹²æ‰°å¤šï¼Œç»“è®ºä¸ç²¾ç¡®ï¼›äºŒã€token æ¶ˆè€—å¤§ã€åˆ†ææ—¶é—´æ›´é•¿ï¼›ä¸‰ã€éš¾ä»¥å¯¹ä¼ä¸šå†…éƒ¨èµ„æºåšæœ‰æ•ˆæ•´åˆã€‚</p>
<p><strong>è½åœ°å½¢æ€å¯¹æ¯”ï¼š</strong></p>





















<table><thead><tr><th>ç®€å•ç©å…·</th><th>ç”Ÿäº§çº§è½åœ°</th></tr></thead><tbody><tr><td>ç›´æ¥å¡å†å²æ¶ˆæ¯åˆ° <code>messages</code> å‚æ•°</td><td><strong>å‘é‡æ•°æ®åº“</strong>ï¼ˆMilvus/Pineconeï¼‰å­˜å‚¨æµ·é‡æ–‡æ¡£</td></tr><tr><td>ç”¨å…¨å±€å˜é‡å­˜ä¸´æ—¶çŠ¶æ€</td><td><strong>é•¿æœŸè®°å¿†æœºåˆ¶</strong>ï¼ˆå¦‚ MemGPTï¼‰ç®¡ç†è®°å¿†ä¼˜å…ˆçº§</td></tr><tr><td>ä¸ç®¡ token æ¶ˆè€—</td><td><strong>ä¸Šä¸‹æ–‡å‹ç¼©</strong>ï¼ˆRAG é‡æ’åºã€æ‘˜è¦æœºåˆ¶ï¼‰æ§åˆ¶æˆæœ¬</td></tr></tbody></table>
<p><strong>æœ¬è´¨</strong>ï¼šè®°å¿†å±‚æ˜¯è®©æ¨¡å‹ä»ã€Œè€ƒè¯•æœºå™¨ã€å˜æˆã€Œä¸šåŠ¡ä¸“å®¶ã€çš„åŸºç¡€è®¾æ–½ã€‚æ²¡æœ‰å®ƒï¼Œæ¨¡å‹åªèƒ½å›ç­”é€šç”¨é—®é¢˜ï¼Œæ— æ³•å¤„ç†ä¼ä¸šç§æœ‰çŸ¥è¯†æˆ–ä¿æŒè¿ç»­æ€§ã€‚æˆ‘ä»¬ä¸‹é¢ä¸»è¦æ¥è®²ragæ¨¡å¼ è¿˜æœ‰historyç®¡ç†æ–¹æ¡ˆ è¿™ä¸ªåˆ™æ˜¯åœ¨å„ä¸ªç¼–æ’å·¥å…·å†…å„æœ‰å†…ç½®çš„æ–¹æ¡ˆ æˆ‘ä»¬åœ¨æ­¤ä¸åšæ·±å…¥ç ”ç©¶</p>
<hr/>
<h4 data-id="heading-5">4.1 ä»€ä¹ˆæ˜¯ RAGï¼ˆRetrieval Augmented Generationï¼‰</h4>
<p>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç»“åˆäº†ä¿¡æ¯æ£€ç´¢ä¸æ–‡æœ¬ç”Ÿæˆï¼Œåœ¨å¤§æ¨¡å‹ç”Ÿæˆç­”æ¡ˆæ—¶åˆ©ç”¨å¤–éƒ¨çŸ¥è¯†åº“ä¸­çš„ç›¸å…³ä¿¡æ¯ã€‚æ•ˆæœç”±ä¸‰ä¸ªæ ¸å¿ƒé˜¶æ®µå†³å®šï¼š</p>
<blockquote>
<p>å¼•ç”¨ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fmodel-studio%2Frag-optimization%3Fspm%3Da2c4g.11186623.help-menu-2400256.d_1_6_1.68277b8aB06TuT%26scm%3D20140722.H_2859102._.OR_help-T_cn~zh-V_1" target="_blank" title="https://help.aliyun.com/zh/model-studio/rag-optimization?spm=a2c4g.11186623.help-menu-2400256.d_1_6_1.68277b8aB06TuT&amp;scm=20140722.H_2859102._.OR_help-T_cn~zh-V_1" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ RAG æ£€ç´¢è¯´æ˜</a></p>
</blockquote>
<ol>
<li><strong>å»ºç«‹ç´¢å¼•</strong>ï¼šçŸ¥è¯†çš„è§£æã€åˆ‡ç‰‡ä¸å‘é‡åŒ–ã€‚</li>
<li><strong>æ£€ç´¢å¬å›</strong>ï¼šæ ¹æ®ç”¨æˆ·æŸ¥è¯¢ï¼ˆPromptï¼‰ï¼Œä»å‘é‡å­˜å‚¨ä¸­åŒ¹é…å¹¶å¬å›ç›¸å…³çŸ¥è¯†ç‰‡æ®µã€‚</li>
<li><strong>ç”Ÿæˆç­”æ¡ˆ</strong>ï¼šå¤§æ¨¡å‹æ ¹æ®å¬å›ç‰‡æ®µä¸ç”¨æˆ·æŸ¥è¯¢ï¼Œç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</li>
</ol>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/417ef9a912a8412d839ef0a5332b8bcb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWFuc2hhd2Fy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694444&amp;x-signature=CzdP59dmYhCsjzbxQ5%2FhqTxM%2BLo%3D" alt="1770003943187.png" loading="lazy"/></p>
<p>åœ¨ LangChain å®˜ç½‘ï¼ŒRAG æ¶æ„åˆ†ä¸ºä¸‰ç§æ¨¡å¼ï¼Œå±‚å±‚é€’è¿›ã€‚</p>
<hr/>
<h4 data-id="heading-6">4.2 RAG æµç¨‹ä¸€ï¼šå»ºç«‹ç´¢å¼•ï¼ˆIndexingï¼‰</h4>
<ol>
<li>**Loaderï¼ˆåŠ è½½ï¼‰**é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Flangchain%2Fretrieval%23document_loaders" target="_blank" title="https://docs.langchain.com/oss/javascript/langchain/retrieval#document_loaders" ref="nofollow noopener noreferrer">æ–‡æ¡£åŠ è½½å™¨</a>åŠ è½½æ–‡æ¡£ï¼Œä¸»è¦å®Œæˆè¯»å–æ–‡ä»¶ã€‚</li>
<li><strong>Splitï¼ˆæ‹†åˆ†ï¼‰</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Flangchain%2Fretrieval%23text_splitters" target="_blank" title="https://docs.langchain.com/oss/javascript/langchain/retrieval#text_splitters" ref="nofollow noopener noreferrer">æ–‡æœ¬æ‹†åˆ†å™¨</a>å°†å¤§å‹ <code>Document</code> æ‹†æˆæ›´å°çš„å—ï¼Œä¾¿äºç´¢å¼•å’Œæ”¾å…¥æ¨¡å‹æœ‰é™çš„ä¸Šä¸‹æ–‡çª—å£ã€‚è‹¥æ–‡æ¡£è¶…è¿‡çº¦ 42000 å­—ç¬¦ï¼Œå¯¹å¤šæ•°æ¨¡å‹è¿‡é•¿ï¼›å³ä½¿èƒ½å¡è¿›ä¸Šä¸‹æ–‡ï¼Œæé•¿è¾“å…¥ä¸‹ä¹Ÿéš¾å®šä½å…³é”®ä¿¡æ¯ï¼Œå› æ­¤éœ€è¦å…ˆåˆ‡å—å†åµŒå…¥ä¸å­˜å‚¨ã€‚</li>
<li><strong>å­˜å‚¨</strong>
é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Flangchain%2Fretrieval%23vectorstores" target="_blank" title="https://docs.langchain.com/oss/javascript/langchain/retrieval#vectorstores" ref="nofollow noopener noreferrer">å‘é‡å­˜å‚¨</a>ä¸<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.langchain.com%2Foss%2Fjavascript%2Flangchain%2Fretrieval%23embedding_models" target="_blank" title="https://docs.langchain.com/oss/javascript/langchain/retrieval#embedding_models" ref="nofollow noopener noreferrer">åµŒå…¥æ¨¡å‹</a>å°†åˆ‡åˆ†åçš„å†…å®¹å‘é‡åŒ–å¹¶å­˜å…¥ï¼ˆå¦‚ Milvusï¼‰ï¼Œä¾¿äºæ£€ç´¢ã€‚</li>
</ol>
<p><strong>æ–‡æœ¬å¦‚ä½•å˜æˆå‘é‡ï¼Ÿ</strong>
é€šè¿‡ <strong>Embeddings æ¨¡å‹</strong>å°†æ–‡æœ¬è½¬ä¸ºå‘é‡ï¼Œå†å†™å…¥ Milvus ç­‰å‘é‡æ•°æ®åº“ï¼Œä¾› AI æ£€ç´¢ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-text" lang="text">Dimension of embeddings: 1536
Input: é£æ€¥å¤©é«˜çŒ¿å•¸å“€, embedding is: [-0.0016666285653348784, 0.008690492014557004, ...]
Input: æ¸šæ¸…æ²™ç™½é¸Ÿé£å›, embedding is: [0.018255604113922633, 0.030631669725945727, ...]
Input: æ— è¾¹è½æœ¨è§è§ä¸‹, embedding is: [-0.01270165436681136, 0.011355212676752505, ...]
Input: ä¸å°½é•¿æ±Ÿæ»šæ»šæ¥, embedding is: [0.003449439128962428, 0.02667092110022496, ...]
</code></pre>
<hr/>
<h4 data-id="heading-7">4.3 RAG æµç¨‹äºŒï¼šæ£€ç´¢ä¸ç”Ÿæˆ â€”â€” Agent è°ƒç”¨å‘é‡æ•°æ®åº“</h4>
<h5 data-id="heading-8">æ£€ç´¢çš„æœ¬è´¨ï¼šè¯­ä¹‰åŒ¹é…</h5>
<p>å½“ç”¨æˆ·é—®ï¼šã€Œ<strong>å…¬å¸çš„å¹´å‡æ€ä¹ˆä¼‘ï¼Ÿ</strong>ã€</p>
<ul>
<li><strong>ä¼ ç»Ÿæœç´¢</strong>ï¼šåœ¨æ•°æ®åº“é‡Œæ‰¾åŒ…å«ã€Œå¹´å‡ã€å…³é”®è¯çš„æ–‡æ¡£ï¼ˆå¯èƒ½æ¼æ‰ã€Œå¸¦è–ªä¼‘å‡ã€ã€Œå¹´ä¼‘å‡ã€ç­‰åŒä¹‰è¡¨è¾¾ï¼‰ã€‚</li>
<li><strong>å‘é‡æ£€ç´¢</strong>ï¼š
<ul>
<li>æŠŠé—®é¢˜è½¬æˆå‘é‡ï¼ˆEmbeddingï¼‰ï¼Œå¦‚ <code>[0.023, -0.151, 0.892, ...]</code>ï¼ˆ768 ç»´æˆ– 1536 ç»´ï¼‰ã€‚</li>
<li>åœ¨ Milvus ä¸­è®¡ç®—<strong>ä½™å¼¦ç›¸ä¼¼åº¦</strong>ï¼Œæ‰¾åˆ°å‘é‡è·ç¦»æœ€è¿‘çš„æ–‡æœ¬å—ã€‚</li>
<li>è¿”å› Top 5 æœ€ç›¸å…³æ®µè½ï¼ˆå³ä½¿æ²¡å‡ºç°ã€Œå¹´å‡ã€äºŒå­—ï¼Œè¯­ä¹‰ç›¸å…³ä¹Ÿèƒ½æ‰¾åˆ°ï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h5 data-id="heading-9">æŠŠæ£€ç´¢å°è£…æˆã€Œå·¥å…·ã€ï¼ˆToolï¼‰</h5>
<p>Agent é»˜è®¤æ²¡æœ‰æŸ¥åº“èƒ½åŠ›ï¼Œéœ€è¦æŠŠæ£€ç´¢åŒ…è£…æˆ**å·¥å…·ï¼ˆToolï¼‰**æ‰èƒ½è°ƒç”¨ã€‚åœ¨æç¤ºè¯ä¸­è¯´æ˜ï¼šå½“é—®é¢˜å±äºæŸç±»æ—¶ï¼Œä½¿ç”¨å‘é‡æ•°æ®åº“åšç›¸ä¼¼åº¦æœç´¢ï¼Œè¿”å›ç›¸å…³ç‰‡æ®µï¼›Agent æ•´åˆæœç´¢ç»“æœåï¼Œç”±å¤§æ¨¡å‹ç”Ÿæˆç­”æ¡ˆã€‚å‘é‡åº“ä¹Ÿå¯åœ¨æ­¤é˜¶æ®µåŠ ç­›é€‰æ¡ä»¶ï¼Œåœ¨ç™¾ä¸‡çº§æ•°æ®åœºæ™¯ä¸‹å¾ˆæœ‰ç”¨ã€‚</p>
<p>å®Œæˆä¸Šè¿°ä¸¤æ­¥ï¼Œå³å¾—åˆ°ä¸€ä¸ªåŸºç¡€çš„ RAG æ£€ç´¢æµç¨‹ï¼Œåœ¨ LangChain å®˜ç½‘ç§°ä¸º <strong>2-Step RAGï¼ˆä¸¤æ­¥æ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰</strong>ã€‚</p>
<p>æ­¤å¤–è¿˜æœ‰ä¸¤ç§è¿›é˜¶æ–¹å¼ï¼š</p>
<ol>
<li>
<p>**Agentic RAGï¼ˆæ™ºèƒ½ä½“æ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰**ç”±å¤§æ¨¡å‹åˆ¤æ–­æ˜¯å¦éœ€è¦æ–‡æ¡£/æ•°æ®åº“æŸ¥è¯¢ã€ç½‘ç»œ API ç­‰å¤–éƒ¨è°ƒç”¨ï¼Œå†å†³å®šè°ƒç”¨å“ªäº›å·¥å…·ã€‚</p>
</li>
<li>
<p><strong>Hybrid RAGï¼ˆæ··åˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰<strong>åœ¨æ ‡å‡†æ¨¡å¼åŸºç¡€ä¸ŠåŠ å…¥</strong>å¤šé‡æ ¡éªŒ</strong>ï¼š</p>
<ul>
<li>å¯¹é—®é¢˜åšè¯„ä¼°ï¼ˆå¯è°ƒç”¨ Agent/å·¥å…·ï¼‰ï¼Œè‹¥åˆ¤æ–­é—®é¢˜ä¸åˆç†åˆ™æ”¹å†™åé‡æŸ¥ï¼›</li>
<li>å¯¹æ£€ç´¢ç»“æœç”¨ Agent è¯„ä¼°ï¼Œä¸åˆæ ‡å‡†åˆ™é‡æ–°æ£€ç´¢ï¼›</li>
<li>ç”± AI è‡ªè¡Œåˆ¤æ–­é”™è¯¯å¹¶ä»å¯¹åº”èŠ‚ç‚¹é‡æ–°å¼€å§‹ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h4 data-id="heading-10">4.4 ä¸‰ç§ RAG æ¨¡å¼æ¦‚è§ˆ</h4>
<h5 data-id="heading-11">æ–¹æ¡ˆ Aï¼šæ ‡å‡†æ¨¡å¼ï¼ˆ2-Step RAGï¼‰</h5>
<p><strong>ã€Œå…ˆæŸ¥èµ„æ–™ï¼Œå†å›ç­”ã€â€”â€”ç®€å•ç›´æ¥ã€‚</strong></p>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·æé—®ï¼šã€Œä»Šå¹´çš„å·®æ—…æŠ¥é”€æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿã€</li>
<li>ç³»ç»Ÿ<strong>è‡ªåŠ¨</strong>åœ¨çŸ¥è¯†åº“æ‰¾åˆ°ã€Šè´¢åŠ¡åˆ¶åº¦ã€‹ç¬¬ 3 ç« ç›¸å…³å†…å®¹ã€‚</li>
<li>AI åŸºäºè¯¥å†…å®¹ç”Ÿæˆå›ç­”ï¼Œå¹¶æ ‡æ³¨æ¥æºã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ul>
<li><strong>å¿«</strong>ï¼šå›ºå®šæµç¨‹ï¼Œä¸€æ¬¡æ£€ç´¢ + ä¸€æ¬¡ç”Ÿæˆï¼Œå“åº”åœ¨ 2 ç§’å†…ã€‚</li>
<li><strong>çœæˆæœ¬</strong>ï¼šæ­¥éª¤ç®€å•ï¼Œè°ƒç”¨ AI æ¬¡æ•°å°‘ã€‚</li>
<li><strong>ç¨³</strong>ï¼šç»“æœå¯é¢„æµ‹ï¼Œä¸ä¼šã€Œä¹±ç¿»ä¹¦ã€ã€‚</li>
</ul>
<hr/>
<h5 data-id="heading-12">æ–¹æ¡ˆ Bï¼šæ™ºèƒ½æ¨¡å¼ï¼ˆAgentic RAGï¼‰</h5>
<p><strong>ã€Œè®© AI è‡ªå·±å†³å®šè¦ä¸è¦æŸ¥èµ„æ–™ã€ã€‚</strong></p>
<p><strong>å·¥ä½œæµç¨‹ï¼š</strong></p>
<ol>
<li>ç”¨æˆ·å¤æ‚æé—®ï¼šã€Œå¯¹æ¯”æˆ‘ä»¬å…¬å¸å’Œç«äº‰å¯¹æ‰‹åœ¨åä¸œåŒºçš„å®šä»·ç­–ç•¥å·®å¼‚ï¼Œå¹¶ç»™å‡ºå»ºè®®ã€‚ã€</li>
<li>AI <strong>è‡ªä¸»åˆ†æ</strong>ï¼šã€Œéœ€è¦åˆ†ä¸‰æ­¥ï¼šå…ˆæŸ¥å†…éƒ¨å®šä»·è¡¨ï¼ˆå·¥å…·1ï¼‰ï¼Œå†æŸ¥ç«å“å…¬å¼€ä¿¡æ¯ï¼ˆå·¥å…·2ï¼‰ï¼Œæœ€ååšå¯¹æ¯”åˆ†æã€‚ã€</li>
<li>AI æŒ‰éœ€è°ƒç”¨å¤šä¸ªå·¥å…·ï¼Œå±‚å±‚æ¨è¿›ï¼Œæœ€ç»ˆç”ŸæˆæŠ¥å‘Šã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ul>
<li><strong>çµæ´»</strong>ï¼šå¤æ‚é—®é¢˜èƒ½ã€Œè§æ‹›æ‹†æ‹›ã€ã€‚</li>
<li><strong>å¤šå·¥å…·åä½œ</strong>ï¼šå¯æŸ¥æ–‡æ¡£ã€è®¡ç®—å™¨ã€æ•°æ®åº“ã€å®æ—¶ç½‘é¡µç­‰ã€‚</li>
<li><strong>ç±»äººæ€ç»´</strong>ï¼šå…ˆæ”¶é›†ä¿¡æ¯å†ä¸‹ç»“è®ºã€‚</li>
</ul>
<hr/>
<h5 data-id="heading-13">æ–¹æ¡ˆ Cï¼šè´¨æ§æ¨¡å¼ï¼ˆHybrid RAGï¼‰</h5>
<p><strong>ã€ŒæŸ¥å®Œè¿˜è¦éªŒï¼Œé”™äº†å°±é‡æ¥ã€â€”â€”å¸¦è´¨æ£€çš„ä¸¥è°¨æ–¹æ¡ˆã€‚</strong></p>
<p><strong>å·¥ä½œæµç¨‹ï¼š<strong>åœ¨æ ‡å‡†æ¨¡å¼åŸºç¡€ä¸ŠåŠ å…¥</strong>ä¸‰é‡æ ¡éªŒ</strong>ï¼š</p>
<ol>
<li><strong>é—®é¢˜ä¼˜åŒ–</strong>ï¼šç”¨æˆ·é—®å¾—æ¨¡ç³Šï¼Ÿå…ˆæ”¹å†™æˆæ›´ç²¾å‡†çš„é—®é¢˜ï¼ˆå¦‚æŠŠã€Œé‚£ä¸ªè°ã€æ”¹ä¸ºã€Œå¼ ä¸‰ã€ï¼‰ã€‚</li>
<li><strong>æ£€ç´¢éªŒè¯</strong>ï¼šæŸ¥åˆ°å†…å®¹æ˜¯å¦ç›¸å…³ï¼Ÿè‹¥ä¸ç›¸å…³ï¼Œè‡ªåŠ¨æ¢å…³é”®è¯é‡æŸ¥ã€‚</li>
<li><strong>ç­”æ¡ˆæ ¸æŸ¥</strong>ï¼šç”Ÿæˆå›ç­”æ˜¯å¦ç¬¦åˆäº‹å®ï¼Ÿè‹¥æœ‰çŸ›ç›¾ï¼Œé‡æ–°ç”Ÿæˆæˆ–æ ‡æ³¨ã€Œå­˜ç–‘ã€ã€‚</li>
</ol>
<p><strong>æ ¸å¿ƒä»·å€¼ï¼š</strong></p>
<ul>
<li><strong>é£é™©å¯æ§</strong>ï¼šæ¯æ­¥æœ‰æ ¡éªŒï¼Œå‡å°‘ç”¨é”™è¯¯ä¿¡æ¯ä½œç­”ã€‚</li>
<li><strong>è‡ªæˆ‘ä¿®æ­£</strong>ï¼šå‘ç°ç­”éæ‰€é—®æˆ–ä¿¡æ¯ä¸è¶³æ—¶ï¼Œå¯è‡ªä¸»ä¼˜åŒ–æµç¨‹ã€‚</li>
<li><strong>å®¡è®¡å‹å¥½</strong>ï¼šå…¨ç¨‹å¯è¿½æº¯ï¼ŒçŸ¥é“å‚è€ƒäº†å“ªäº›èµ„æ–™ã€ä¸ºä½•è¿™æ ·ç­”ã€‚</li>
</ul>
<h3 data-id="heading-14">äº”ã€ç¼–æ’å±‚</h3>
<p>æ¨¡å‹å’Œè®°å¿†éƒ½æœ‰äº†ï¼Œè¿˜è¦æœ‰äººå†³å®šï¼šä»€ä¹ˆæ—¶å€™è°ƒæ¨¡å‹ã€ä»€ä¹ˆæ—¶å€™æŸ¥åº“ã€ä»€ä¹ˆæ—¶å€™è°ƒå·¥å…·ã€é¡ºåºæ€ä¹ˆæ’â€”â€”è¿™ä¸€å±‚å°±æ˜¯ç¼–æ’å±‚ã€‚å¥½æ¯”ä¸Šæ–‡çš„ragçš„ç”Ÿæˆ ä»€ä¹ˆæ—¶å€™å»æŸ¥è¯¢å‘é‡æ•°æ®åº“ å¦‚ä½•å¯¹é—®é¢˜è¿›è¡Œåˆ†æ å¦‚ä½•è¯„ä¼°æœå¯»çš„ç»“æœæ˜¯å¦æ»¡æ„ æˆ‘ä»¬éœ€è¦å€ŸåŠ©ç¼–æ’å·¥å…·å»å®ç° ï¼Œå½“ç„¶ åœ¨ä¸‹ä¸€å±‚çš„manus æˆ–è€… clawbot ï¼ˆopenclawï¼‰ï¼Œä»–ä»¬å¹¶æ²¡æœ‰ä½¿ç”¨è¿™é‡Œç¼–æ’å·¥å…·çš„ä¸€ç§ï¼Œè€Œæ˜¯è‡ªå·±æ­å»ºçš„ç¼–æ’å·¥å…·</p>
<h4 data-id="heading-15">5.1 ä¸»æµç¼–æ’å·¥å…·å¯¹æ¯”ï¼ˆGitHub Stars ä¸ä¼˜ç¼ºç‚¹ï¼‰</h4>
<p>ä»¥ä¸‹ä¸ºå½“å‰è¾ƒä¸»æµçš„å››ç±»ç¼–æ’å·¥å…·ï¼Œå…¼é¡¾<strong>å¯è§†åŒ–/ä½ä»£ç </strong>ä¸<strong>ç¼–ç /æ¡†æ¶</strong>ä¸¤ç§è·¯çº¿ï¼Œä¾¿äºæŒ‰å›¢é˜Ÿä¹ æƒ¯é€‰å‹ã€‚</p>








































<table><thead><tr><th>å·¥å…·</th><th>ç±»å‹</th><th>GitHub Stars</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flanggenius%2Fdify" target="_blank" title="https://github.com/langgenius/dify" ref="nofollow noopener noreferrer">Dify</a></strong></td><td>å¯è§†åŒ– / ä½ä»£ç å¹³å°</td><td><strong>128k</strong></td><td>å·¥ä½œæµ + RAG + Agent ä¸€ä½“ï¼›å¯è§†åŒ–ç”»å¸ƒã€Prompt IDEï¼›50+ å†…ç½®å·¥å…·ï¼›Docker ä¸€é”®éƒ¨ç½²ã€å¤šæ¨¡å‹æ”¯æŒï¼›LLMOps ä¸è§‚æµ‹å®Œå–„</td><td>è‡ªæ‰˜ç®¡éœ€è‡ªè¡Œç»´æŠ¤ï¼›ä¼ä¸šçº§èƒ½åŠ›ä¾èµ–å•†ä¸šç‰ˆï¼›åã€Œå¹³å°ã€æ€ç»´ï¼Œæ·±åº¦å®šåˆ¶è¦ç†è§£å…¶æŠ½è±¡</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flangchain-ai%2Flangchain" target="_blank" title="https://github.com/langchain-ai/langchain" ref="nofollow noopener noreferrer">LangChain</a></strong></td><td>ç¼–ç¨‹æ¡†æ¶ï¼ˆPython/JSï¼‰</td><td><strong>126k</strong></td><td>ç”Ÿæ€æœ€å¤§ã€æ–‡æ¡£ä¸ç¤¾åŒºæˆç†Ÿï¼›å¯ç¼–ç¨‹ã€çµæ´»åº¦é«˜ï¼›ä¸ LangGraphã€LangSmith ç­‰é…å¥—ï¼›æ¨¡å‹/å‘é‡åº“/å·¥å…·é›†æˆä¸°å¯Œ</td><td>å­¦ä¹ æ›²çº¿é™¡ï¼›ç‰ˆæœ¬è¿­ä»£å¿«ã€API æ˜“å˜ï¼›åå¼€å‘è€…ï¼Œæ— å¼€ç®±å³ç”¨çš„å¯è§†åŒ–ç¼–æ’</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2Fautogen" target="_blank" title="https://github.com/microsoft/autogen" ref="nofollow noopener noreferrer">AutoGen</a></strong></td><td>å¤šæ™ºèƒ½ä½“ç¼–ç¨‹æ¡†æ¶</td><td><strong>54.2k</strong></td><td>å¤šæ™ºèƒ½ä½“å¯¹è¯ä¸åä½œåŸç”Ÿæ”¯æŒï¼›å¾®è½¯èƒŒä¹¦ï¼›æ”¯æŒ MCPã€AgentTool ç­‰ï¼›æä¾› AutoGen Studio å¯åšä½ä»£ç åŸå‹</td><td>å®˜æ–¹å»ºè®®æ–°äººå…³æ³¨ Microsoft Agent Frameworkï¼›ç»´æŠ¤é‡å¿ƒå¯èƒ½å‘æ–°æ¡†æ¶å€¾æ–œï¼›çº¯ä»£ç ç¼–æ’éœ€ä¸€å®š Python èƒ½åŠ›</td></tr><tr><td><strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcoze-dev%2Fcoze-studio" target="_blank" title="https://github.com/coze-dev/coze-studio" ref="nofollow noopener noreferrer">Coze Studio</a></strong></td><td>å¯è§†åŒ– Agent å¼€å‘å¹³å°</td><td><strong>19.7k</strong></td><td>è„±èƒäºå­—èŠ‚ Cozeï¼Œä¸€ç«™å¼å¯è§†åŒ–ï¼›æ’ä»¶ã€çŸ¥è¯†åº“ã€å·¥ä½œæµã€API/SDK é½å…¨ï¼›Go åç«¯ + React/TS å‰ç«¯ï¼ŒDDD æ¶æ„ï¼Œä¾¿äºäºŒæ¬¡å¼€å‘</td><td>ç›¸å¯¹è¾ƒæ–°ï¼Œç”Ÿæ€å°äº Dify/LangChainï¼›éœ€è‡ªå»ºå¹¶é…ç½®æ¨¡å‹ï¼›å…¬æœ‰äº‘èƒ½åŠ›ä¸å•†ä¸šç‰ˆæœ‰å·®å¼‚</td></tr></tbody></table>
<p><strong>é€‰å‹å‚è€ƒ</strong>ï¼šè¦<strong>å¿«é€Ÿæ­ Demoã€å°‘å†™ä»£ç </strong>ä¼˜å…ˆçœ‹ Dify æˆ– Coze Studioï¼›è¦<strong>å…¨ä»£ç æ§åˆ¶ã€å¯¹æ¥è‡ªæœ‰ç³»ç»Ÿ</strong>ä¼˜å…ˆ LangChain / LangGraphï¼›è¦åš<strong>å¤š Agent åä½œã€ç ”ç©¶å‘</strong>å¯çœ‹ AutoGen æˆ– LangGraphã€‚</p>
<hr/>
<h4 data-id="heading-16">5.2 é‡ç‚¹äº†è§£ï¼šDify ä¸ LangChain</h4>
<p>ä¸‹æ–‡ä¸»è¦å›´ç»• <strong>Dify</strong> å’Œ <strong>LangChain</strong> ä¸¤ç§ç¼–æ’æ–¹å¼å±•å¼€ï¼Œå¹¶ä¸¾ä¾‹è¯´æ˜å„è‡ªé€‚ç”¨åœºæ™¯ã€‚å¾—ç›Šäº <strong>MCP</strong> ç­‰åè®®çš„å‘å±•ï¼Œä¸¤è€…å¹¶éäº’æ–¥ï¼Œè€Œæ˜¯å½¢æˆå¾ˆå¥½çš„<strong>äº’è¡¥å…³ç³»</strong>ï¼š</p>
<ul>
<li><strong>ç®€å•åˆ°ä¸­ç­‰å¤æ‚åº¦çš„ AI åº”ç”¨</strong>ï¼šé€‚åˆç”¨ <strong>Dify</strong>ï¼ˆå¯è§†åŒ–ã€å°‘å†™ä»£ç ã€å¿«é€Ÿä¸Šçº¿ï¼‰ã€‚</li>
<li><strong>é«˜åº¦å¤æ‚ã€å¼ºå®šåˆ¶çš„åº”ç”¨</strong>ï¼šé€‚åˆç”¨ <strong>LangChain</strong>ï¼ˆå…¨ä»£ç æ§åˆ¶ã€æ·±åº¦é›†æˆä¸šåŠ¡ã€è‡ªå®šä¹‰é“¾ä¸ Agentï¼‰ã€‚</li>
</ul>
<p>ç¼–æ’å·¥å…·ä¼šä¸æ–­æ›´æ–°ã€è¢«æ›´å¥½çš„æ›¿ä»£ï¼Œä½†<strong>ç¼–æ’é€»è¾‘</strong>å’Œ<strong>AI ç›¸å…³æ¦‚å¿µ</strong>ï¼ˆè®°å¿†ã€åˆ†ç±»ã€æµå¼ã€å¹¶è¡Œã€Agent æ±‡æ€»ç­‰ï¼‰æ˜¯é€šç”¨çš„â€”â€”è¿™äº›æ€æƒ³å¯ä»¥å¥—ç”¨åœ¨ Dify ä¸Šï¼Œä¹Ÿå€¼å¾—é•¿æœŸå­¦ä¹ ã€‚</p>
<hr/>
<h4 data-id="heading-17">5.3 Dify ç®€ä»‹ï¼šèƒ½å¸®æˆ‘ä»¬åšä»€ä¹ˆï¼Ÿ</h4>
<p>Dify æ˜¯<strong>ä½ä»£ç /å¯è§†åŒ–</strong>ç¼–æ’å·¥å…·ã€‚å€Ÿç”¨å®˜ç½‘æè¿°ï¼š</p>
<blockquote>
<p><strong>Dify</strong> æ˜¯ä¸€ä¸ªç”¨äºæ„å»º AI å·¥ä½œæµçš„å¼€æºå¹³å°ã€‚é€šè¿‡åœ¨å¯è§†åŒ–ç”»å¸ƒä¸Šç¼–æ’ AI æ¨¡å‹ã€è¿æ¥æ•°æ®æºã€å®šä¹‰å¤„ç†æµç¨‹ï¼Œç›´æ¥å°†ä½ çš„é¢†åŸŸçŸ¥è¯†è½¬åŒ–ä¸ºå¯è¿è¡Œçš„è½¯ä»¶ã€‚</p>
</blockquote>
<p><strong>èƒ½åŠ›æ¦‚è§ˆ</strong>ï¼šæ”¯æŒ<strong>æœ¬åœ°åŒ–éƒ¨ç½²</strong>ï¼›å¯ä½¿ç”¨<strong>æ’ä»¶èƒ½åŠ›</strong>å¯¹æ¥å¤–éƒ¨ API/æ•°æ®åº“ï¼›é€šè¿‡<strong>æ¨¡æ¿èŠ‚ç‚¹</strong>è¾“å‡ºç»“æ„åŒ–æ•°æ®ï¼ˆå¦‚ JSONï¼‰ï¼Œä¾¿äºå‰ç«¯æˆ–ä¸‹æ¸¸ç³»ç»Ÿå¤„ç†ã€‚äº†è§£è¿™äº›ï¼Œå°±èƒ½å¿«é€Ÿæ­å»ºä»¥ä¸‹å‡ ç±»åœºæ™¯ã€‚</p>
<hr/>
<h4 data-id="heading-18">5.4 Dify åœºæ™¯ç¤ºä¾‹</h4>
<ol>
<li><strong>è¡¨å•é¢„å¡«</strong>ç”¨æˆ·è¿›å…¥è¡¨å•é¡µæ—¶ï¼Œè°ƒç”¨<strong>æ’ä»¶</strong>æŸ¥è¯¢è¿‘å‡ æ¬¡æäº¤æˆ–ç”¨æˆ·åå¥½ï¼Œç»<strong>æ¨¡æ¿èŠ‚ç‚¹</strong>è¾“å‡ºé¢„å¡«æ•°æ®ï¼ˆå¦‚ JSONï¼‰ï¼Œå‰ç«¯è§£æåå¡«å……è¡¨å•ã€‚è¦ç‚¹ï¼šæ’ä»¶æŸ¥æ•°æ® + æ¨¡æ¿èŠ‚ç‚¹å‡ºç»“æ„åŒ–ç»“æœï¼Œæ–¹ä¾¿å¯¹æ¥ã€‚</li>
<li><strong>æ–‡æœ¬ç‰‡æ®µè¡¥å…¨</strong>æ ¹æ®å‰æ–‡å†…å®¹è¡¥å…¨åç»­æ–‡æœ¬ã€‚åˆ›å»º <strong>Chatflow</strong> å¹¶å¼€å¯<strong>æµå¼è¾“å‡º</strong>ï¼Œç”¨<strong>ä»£ç èŠ‚ç‚¹</strong>åšåå¤„ç†ä½¿è¾“å‡ºæ›´å¯æ§ï¼›ç”¨<strong>é—®é¢˜åˆ†ç±»å™¨èŠ‚ç‚¹</strong>å°†è¯·æ±‚è·¯ç”±åˆ°æœ€åˆé€‚çš„åœºæ™¯ï¼›å¯ç”¨<strong>è®°å¿†</strong>ï¼Œåœ¨åˆ†ç±»ä¸è¡¥å…¨æ—¶å¸¦å…¥å¯¹è¯å†å²ï¼Œæé«˜å¤šè½®å‡†ç¡®æ€§ã€‚å®é™…å¯åšæˆã€Œæ¯è¾“å…¥ä¸€æ®µæˆ–åœé¡¿ä¸€æ®µæ—¶é—´å†è§¦å‘è¡¥å…¨ã€ï¼Œä»¥å¹³è¡¡ä½“éªŒä¸æˆæœ¬ã€‚</li>
<li><strong>é•¿æ–‡æœ¬æ±‡æ€»åŠ©æ‰‹</strong>
æ–‡æœ¬é‡å¤§æ—¶ï¼Œç”¨<strong>å¤šä¸ªè¾“å…¥èŠ‚ç‚¹</strong>å¯¹é•¿æ–‡åˆ†å—ã€<strong>å¹¶å‘å¤„ç†</strong>ï¼Œæœ€åæ±‡èšåˆ°<strong>ä¸€ä¸ª Agent èŠ‚ç‚¹</strong>åšæ±‡æ€»ã€‚å¹¶å‘èƒ½ç¼©çŸ­æ€»è€—æ—¶ï¼ˆæ•´ä½“å¤„ç†é€Ÿåº¦/ååæå‡ï¼‰ï¼Œå¹¶å¯èƒ½å› åˆ†å—èšç„¦è€Œæé«˜æ±‡æ€»è´¨é‡ã€‚</li>
</ol>
<p>ä»¥ä¸Šç¤ºä¾‹ä½“ç°äº† Dify ä¸­<strong>æ’ä»¶ã€æ¨¡æ¿ã€æµå¼ã€åˆ†ç±»ã€è®°å¿†ã€å¹¶è¡Œä¸æ±‡èš</strong>ç­‰ç¼–æ’æ€æƒ³ï¼Œè¿™äº›æ¦‚å¿µåœ¨ LangChain ç­‰æ¡†æ¶ä¸­åŒæ ·å­˜åœ¨ï¼Œåªæ˜¯å®ç°æ–¹å¼ä»ã€Œç”»å¸ƒæ‹–æ‹½ã€å˜æˆäº†ã€Œä»£ç ç¼–æ’ã€ã€‚</p>
<hr/>
<h4 data-id="heading-19">5.5 LangChain ç®€ä»‹</h4>
<p>LangChain æ˜¯<strong>ç¼–ç¨‹ä¼˜å…ˆ</strong>çš„ AI åº”ç”¨ç¼–æ’æ¡†æ¶ï¼ˆæ”¯æŒ Python / JavaScriptï¼‰ï¼Œé€šè¿‡ä»£ç ç»„è£…æ¨¡å‹ã€æç¤ºè¯ã€å·¥å…·ã€è®°å¿†ä¸å‘é‡åº“ç­‰ç»„ä»¶ï¼Œæ„å»ºå¯å¤ç”¨çš„é“¾ï¼ˆChainï¼‰ä¸æ™ºèƒ½ä½“ï¼ˆAgentï¼‰ã€‚å€Ÿç”¨å®˜ç½‘å®šä½ï¼š</p>
<blockquote>
<p><strong>LangChain</strong> æ˜¯æ„å»º LLM åº”ç”¨çš„å¹³å°ã€‚å®ƒé€šè¿‡ç»Ÿä¸€çš„æ¥å£è¿æ¥æ¨¡å‹ã€åµŒå…¥ã€å‘é‡å­˜å‚¨ã€æ£€ç´¢ä¸å·¥å…·ç­‰ï¼Œè®©å¼€å‘è€…å¿«é€Ÿä»åŸå‹è¿­ä»£åˆ°ç”Ÿäº§ï¼Œå¹¶éšæŠ€æœ¯æ¼”è¿›ä¿æŒå¯æ‰©å±•ã€‚</p>
</blockquote>
<p><strong>ä¸ Dify çš„å¯¹æ¯”</strong>ï¼šDify ç”¨ç”»å¸ƒå’ŒèŠ‚ç‚¹å®Œæˆç¼–æ’ï¼ŒLangChain ç”¨ä»£ç å®šä¹‰æ¯ä¸€æ­¥â€”â€”é“¾å¼è°ƒç”¨ã€æ¡ä»¶åˆ†æ”¯ã€å·¥å…·é€‰æ‹©ã€å¤šè½®è®°å¿†ç­‰éƒ½ç”±ä½ æ˜¾å¼æ§åˆ¶ï¼Œé€‚åˆéœ€è¦æ·±åº¦å®šåˆ¶ã€å¯¹æ¥è‡ªæœ‰ç³»ç»Ÿæˆ–å®ç°å¤æ‚ Agent é€»è¾‘çš„åœºæ™¯ã€‚</p>
<p><strong>æ ¸å¿ƒæ¦‚å¿µé€Ÿè§ˆ</strong>ï¼š</p>
<ul>
<li><strong>Chain</strong>ï¼šæŠŠæç¤ºè¯ã€æ¨¡å‹ã€è§£æç­‰æ­¥éª¤ä¸²æˆä¸€æ¡æµæ°´çº¿ï¼ˆå¦‚ RAG é“¾ï¼šæ£€ç´¢ â†’ æ‹¼ä¸Šä¸‹æ–‡ â†’ è°ƒç”¨æ¨¡å‹ â†’ è§£æè¾“å‡ºï¼‰ã€‚</li>
<li><strong>Agent</strong>ï¼šç”±æ¨¡å‹æ ¹æ®å½“å‰è¾“å…¥å†³å®šã€Œä¸‹ä¸€æ­¥è°ƒç”¨å“ªä¸ªå·¥å…·ã€ä¼ ä»€ä¹ˆå‚æ•°ã€ï¼Œå¤šæ­¥æ¨ç†ä¸å·¥å…·è°ƒç”¨å¾ªç¯è¿›è¡Œã€‚</li>
<li><strong>Tool</strong>ï¼šå¯è¢« Agent è°ƒç”¨çš„èƒ½åŠ›å•å…ƒï¼ˆæŸ¥åº“ã€è°ƒ APIã€æ‰§è¡Œä»£ç ç­‰ï¼‰ï¼Œåœ¨ LangChain ä¸­é€šå¸¸å°è£…ä¸ºå‡½æ•°å¹¶ç»‘å®šåˆ°æ¨¡å‹ã€‚</li>
<li><strong>Memory</strong>ï¼šåœ¨å¯¹è¯æˆ–é“¾å¼è°ƒç”¨ä¸­æŒä¹…åŒ–/è¯»å–å†å²ï¼ˆå¦‚ç¼“å†²è®°å¿†ã€æ‘˜è¦è®°å¿†ï¼‰ï¼Œä¾›å¤šè½®å¯¹è¯æˆ–é•¿æµç¨‹ä½¿ç”¨ã€‚</li>
</ul>
<p>ä¸‹é¢åˆ—ä¸¾ LangChain çš„<strong>å®é™…ä½¿ç”¨åœºæ™¯</strong>åŠç®€è¦å®ç°æ€è·¯ã€‚</p>
<ol>
<li><strong>API æ–‡æ¡£åˆ†æï¼Œç”Ÿæˆ Mock æ¥å£</strong>ç”¨ <strong>Chain</strong> ä¸²è”ï¼šè§£ææ–‡æ¡£ï¼ˆå¦‚ OpenAPI/Swaggerï¼‰â†’ æå–è·¯å¾„ã€å‚æ•°ã€å“åº”ç»“æ„ â†’ ç”¨ LLM ç”Ÿæˆå¯¹åº” Mock æ•°æ®æˆ– Mock æœåŠ¡ä»£ç ï¼›å¯é…åˆæ¨¡æ¿å’Œæ ¡éªŒæ­¥éª¤ï¼Œä¿è¯è¾“å‡ºæ ¼å¼ç¨³å®šã€‚</li>
<li><strong>ä½ä»£ç å¹³å° AI ç”Ÿæˆè‡ªå®šä¹‰ç»„ä»¶</strong>ç”¨ <strong>Agent + Tool</strong>ï¼šæŠŠã€Œè¯»è®¾è®¡ç¨¿/éœ€æ±‚æè¿°ã€ã€ŒæŸ¥ç»„ä»¶åº“ APIã€ã€Œå†™ä»£ç ã€ã€Œæ‰§è¡Œé¢„è§ˆã€å°è£…æˆ Toolï¼Œç”±æ¨¡å‹æŒ‰éœ€è°ƒç”¨ï¼›å¤šè½®æ—¶å¯å¯ç”¨ <strong>Memory</strong> è®°ä½å·²é€‰ç»„ä»¶å’Œçº¦æŸï¼Œä¿è¯é£æ ¼ä¸€è‡´ã€‚</li>
<li><strong>è‡ªåŠ¨åŒ–è¿ç»´éƒ¨ç½²ã€ä»“åº“ç®¡ç†</strong>
ç”¨ <strong>Agent + Tool</strong>ï¼šå°†æ‰§è¡Œå‘½ä»¤ã€è¯»ä»“åº“çŠ¶æ€ã€å‘ MRã€æŸ¥æµæ°´çº¿ç­‰å°è£…ä¸º Toolï¼Œç”± Agent æ ¹æ®è‡ªç„¶è¯­è¨€æŒ‡ä»¤é€‰æ‹©å¹¶æ‰§è¡Œï¼›å¤æ‚æµç¨‹å¯ç”¨ <strong>LangGraph</strong> åšæœ‰çŠ¶æ€ç¼–æ’ï¼Œæˆ–ä¸ç°æœ‰ CI/CD è„šæœ¬å¯¹æ¥ã€‚</li>
</ol>
<p><strong>å»¶ä¼¸</strong>ï¼šä»¥ä¸Šåœºæ™¯éƒ½æ˜¯ã€Œä»£ç é‡Œæ˜¾å¼å®šä¹‰æ¯ä¸€æ­¥ã€ï¼Œé€‚åˆå¯¹å¯æ§æ€§ã€å¯æµ‹è¯•æ€§å’Œä¸ç°æœ‰ç³»ç»Ÿé›†æˆè¦æ±‚é«˜çš„åœºæ™¯ã€‚è‹¥éœ€è¦å¿«é€Ÿå‡º Demo æˆ–ç»™ä¸šåŠ¡æ–¹æ‹–æ‹½å¼é…ç½®ï¼Œå¯å…ˆç”¨ Dify æ­ä¸»æµç¨‹ï¼Œå†ç”¨ LangChainï¼ˆæˆ–é€šè¿‡ MCP æš´éœ²çš„èƒ½åŠ›ï¼‰æ‰¿æ¥å¤æ‚é€»è¾‘ä¸è‡ªåŠ¨åŒ–ï¼ŒäºŒè€…å½¢æˆäº’è¡¥ã€‚</p>
<hr/>
<h3 data-id="heading-20">å…­ã€AI é›†æˆåº”ç”¨ä¸ ClawBot ç®€ä»‹</h3>
<p>å‰æ–‡æåˆ°çš„<strong>æ¨¡å‹å±‚ã€è®°å¿†å±‚ã€ç¼–æ’å±‚</strong>æ˜¯ã€Œèƒ½åŠ›å±‚ã€ï¼Œæœ€ç»ˆè¦è½åˆ°ç”¨æˆ·èƒ½ç›´æ¥ä½¿ç”¨çš„<strong>åº”ç”¨</strong>ä¸Šã€‚æœ¬èŠ‚è¯´æ˜ä»€ä¹ˆæ˜¯ <strong>AI é›†æˆåº”ç”¨</strong>ï¼Œå¹¶ä»¥ <strong>ClawBot / OpenClaw</strong> ä¸ºä¾‹ï¼Œè¯´æ˜å®ƒä»¬ä¸å„å±‚çš„å…³ç³»ã€åšäº†å“ªäº›åˆ›æ–°ï¼Œä»¥åŠè‡ªç ”æ¡†æ¶ä¸ Dify/LangChain ç­‰æµè¡Œæ¡†æ¶çš„å¼‚åŒã€‚æ›´è¯¦ç»†çš„ä»‹ç»å¯å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F2000850539936765122" target="_blank" title="https://zhuanlan.zhihu.com/p/2000850539936765122" ref="nofollow noopener noreferrer">çŸ¥ä¹ Â· ClawBot ç›¸å…³è®¨è®º</a>ã€‚</p>
<h4 data-id="heading-21">6.1 ä»€ä¹ˆæ˜¯ AI é›†æˆåº”ç”¨</h4>
<p><strong>AI é›†æˆåº”ç”¨</strong>æŒ‡çš„æ˜¯ï¼šæŠŠ<strong>æ¨¡å‹å±‚ï¼ˆæ¨ç†ï¼‰ã€è®°å¿†å±‚ï¼ˆRAG/é•¿æœŸè®°å¿†ï¼‰ã€ç¼–æ’å±‚ï¼ˆä½•æ—¶è°ƒæ¨¡å‹ã€ä½•æ—¶æŸ¥åº“ã€ä½•æ—¶è°ƒå·¥å…·ï¼‰<strong>ä»¥åŠ</strong>å·¥å…·èƒ½åŠ›ï¼ˆå¡«è¡¨ã€å‘é‚®ä»¶ã€è·‘è„šæœ¬ã€æ§åˆ¶è®¾å¤‡ç­‰ï¼‰<strong>æ‰“åŒ…æˆ</strong>ç»ˆç«¯ç”¨æˆ·å¯ç›´æ¥ä½¿ç”¨çš„äº§å“</strong>â€”â€”ä¾‹å¦‚èŠå¤©æœºå™¨äººã€ä¸ªäººåŠ©ç†ã€å‚ç›´é¢†åŸŸ Agent ç­‰ã€‚ç”¨æˆ·ä¸å…³å¿ƒåº•å±‚ç”¨çš„æ˜¯å“ªå®¶æ¨¡å‹ã€å“ªå¥—å‘é‡åº“ï¼Œåªå…³å¿ƒã€Œèƒ½å¯¹è¯ã€èƒ½åŠäº‹ã€èƒ½è®°ä½æˆ‘ã€ã€‚</p>
<p>ä¸åˆ†å±‚çš„å…³ç³»å¯ä»¥ç®€å•ç†è§£ä¸ºï¼š</p>






























<table><thead><tr><th>å±‚æ¬¡</th><th>ä½œç”¨</th><th>ä¸ã€ŒAI é›†æˆåº”ç”¨ã€çš„å…³ç³»</th></tr></thead><tbody><tr><td><strong>æ¨¡å‹å±‚</strong></td><td>æä¾›æ¨ç†ä¸ç”Ÿæˆèƒ½åŠ›</td><td>åº”ç”¨é€šè¿‡ API è°ƒç”¨æ¨¡å‹ï¼Œå¾—åˆ°å›å¤æˆ–å†³ç­–</td></tr><tr><td><strong>è®°å¿†å±‚</strong></td><td>å­˜å‚¨ä¸æ£€ç´¢çŸ¥è¯†ã€å¯¹è¯å†å²ã€ç”¨æˆ·åå¥½</td><td>åº”ç”¨æŠŠã€Œè¦è®°ä½ä»€ä¹ˆã€ã€Œè¦æŸ¥ä»€ä¹ˆã€äº¤ç»™è®°å¿†å±‚ï¼Œå†æ‹¼è¿›ä¸Šä¸‹æ–‡</td></tr><tr><td><strong>ç¼–æ’å±‚</strong></td><td>å†³å®šè°ƒç”¨é¡ºåºã€åˆ†æ”¯ã€å·¥å…·é€‰æ‹©</td><td>åº”ç”¨è¦ä¹ˆä½¿ç”¨ç°æˆç¼–æ’å·¥å…·ï¼ˆå¦‚ Difyã€LangChainï¼‰ï¼Œè¦ä¹ˆ<strong>è‡ªç ”ç¼–æ’é€»è¾‘</strong>ï¼ˆå¦‚ ClawBotï¼‰</td></tr><tr><td><strong>åº”ç”¨å±‚</strong></td><td>é¢å‘æœ€ç»ˆç”¨æˆ·çš„äº§å“å½¢æ€</td><td><strong>AI é›†æˆåº”ç”¨å°±ç«™åœ¨è¿™ä¸€å±‚</strong>ï¼Œæ•´åˆä¸‹å±‚èƒ½åŠ›ï¼Œå¹¶é€šè¿‡ IMã€Webã€API ç­‰æ¸ é“äº¤ä»˜ç»™ç”¨æˆ·</td></tr></tbody></table>
<p>å› æ­¤ï¼š<strong>AI é›†æˆåº”ç”¨ = åœ¨åº”ç”¨å±‚ï¼Œå¯¹æ¨¡å‹å±‚ã€è®°å¿†å±‚ã€ç¼–æ’å±‚ï¼ˆåŠå·¥å…·ï¼‰åšæ•´åˆåçš„å¯äº¤ä»˜äº§å“</strong>ã€‚ClawBot / OpenClaw æ­£æ˜¯è¿™ä¸€ç±»äº§å“â€”â€”å®ƒä»¬<strong>æ²¡æœ‰ç›´æ¥é‡‡ç”¨å‰æ–‡æåˆ°çš„ Dify æˆ– LangChain</strong>ï¼Œè€Œæ˜¯<strong>è‡ªç ”äº†ç¼–æ’ä¸æŠ€èƒ½ä½“ç³»</strong>ï¼Œä»è€Œæ›´è´´åˆã€Œä¸ªäººåŠ©ç† + å¤šæ¸ é“ + æœ¬åœ°ä¼˜å…ˆã€çš„å®šä½ã€‚</p>
<h4 data-id="heading-22">6.2 ClawBot / OpenClaw ç®€ä»‹</h4>
<p><strong>ClawBot</strong>ï¼ˆåæ›¾ç”¨å Moltbotï¼Œå¼€æºç‰ˆæœ¬å¸¸ç§° <strong>OpenClaw</strong>ï¼‰æ˜¯ä¸€ç±»<strong>ä¸ªäºº AI åŠ©æ‰‹</strong>å‹é›†æˆåº”ç”¨ï¼Œå…¸å‹ç‰¹ç‚¹åŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>å¯æ‰§è¡Œå®é™…æ“ä½œ</strong>ï¼šä¸é™äºèŠå¤©ï¼Œèƒ½è¿è¡Œå‘½ä»¤ã€å¡«è¡¨æ ¼ã€å‘é‚®ä»¶ã€æ§åˆ¶æµè§ˆå™¨ä¸æ™ºèƒ½å®¶å±…ç­‰ï¼Œå……å½“ã€Œæ•°å­—ä¸ªäººåŠ©ç†ã€ã€‚</li>
<li><strong>å¤šæ¸ é“é›†æˆ</strong>ï¼šæ¥å…¥ WhatsAppã€Telegramã€iMessageã€Slackã€Discord ç­‰ï¼Œåœ¨ç”¨æˆ·æ—¥å¸¸ä½¿ç”¨çš„é€šè®¯å·¥å…·é‡Œä¸ç”¨æˆ·äº¤äº’ï¼Œå®ç°ã€Œåƒå’ŒçœŸäººå¯¹è¯ä¸€æ ·ã€çš„ä½¿ç”¨æ–¹å¼ã€‚</li>
<li><strong>å¯¹è¯è®°å¿†</strong>ï¼šèƒ½è®°ä½è¾ƒé•¿æ—¶é—´çš„å¯¹è¯å†…å®¹ï¼Œå¹¶æ”¯æŒä¸»åŠ¨æé†’ç­‰èƒ½åŠ›ï¼Œä¾èµ–è‡ªç ”æˆ–é›†æˆçš„è®°å¿†æœºåˆ¶ã€‚</li>
<li><strong>æŠ€èƒ½ç³»ç»Ÿ</strong>ï¼šé€šè¿‡ <strong>AgentSkills å…¼å®¹çš„æŠ€èƒ½</strong>ï¼ˆæˆ–ç±»ä¼¼æ’ä»¶ï¼‰æ‰©å±•èƒ½åŠ›ï¼Œç”¨æˆ·å¯ä» <strong>ClawdHub</strong> ç­‰æŠ€èƒ½åº“å‘ç°ã€å®‰è£…ã€æ›´æ–°æŠ€èƒ½ï¼Œå½¢æˆå¯æ‰©å±•ç”Ÿæ€ã€‚</li>
</ul>
<p>è¿™ç±»äº§å“æŠŠã€Œæ¨¡å‹ + è®°å¿† + ç¼–æ’ + å·¥å…·ã€å…¨éƒ¨æ”¶å£åœ¨ä¸€ä¸ªåº”ç”¨é‡Œï¼Œç”¨æˆ·çœ‹åˆ°çš„æ˜¯ã€Œä¸€ä¸ªåŠ©ç†ã€ï¼ŒèƒŒååˆ™æ˜¯æ¨¡å‹å±‚ã€è®°å¿†å±‚ã€ç¼–æ’å±‚çš„ååŒã€‚</p>
<h4 data-id="heading-23">6.3 ä¸æ¨¡å‹å±‚ã€è®°å¿†å±‚ã€ç¼–æ’å±‚çš„å…³ç³»</h4>
<p>ClawBot / OpenClaw ä½œä¸º<strong>åº”ç”¨å±‚</strong>äº§å“ï¼Œä¸å„å±‚çš„å…³ç³»å¯ä»¥æ¦‚æ‹¬ä¸ºï¼š</p>
<ul>
<li><strong>æ¨¡å‹å±‚</strong>ï¼šé€šè¿‡æ¥å…¥ OpenAIã€Claudeã€DeepSeek ç­‰å‚å•†çš„ APIï¼Œè·å¾—æ¨ç†ä¸ç”Ÿæˆèƒ½åŠ›ï¼›åº”ç”¨è´Ÿè´£ç»„è¯·æ±‚ã€è§£æå›å¤ã€‚</li>
<li><strong>è®°å¿†å±‚</strong>ï¼šé‡‡ç”¨è‡ªç ”è®°å¿†æ–¹æ¡ˆï¼ˆä¾‹å¦‚ç”¨ <strong>Markdown æ–‡æœ¬æ–‡ä»¶</strong> å­˜å‚¨ AGENTS.mdã€SOUL.mdã€MEMORY.mdã€æ¯æ—¥è®°å¿†æ—¥å¿—ç­‰ï¼‰ï¼Œå®ç°é•¿æœŸè®°å¿†ä¸äººæ ¼/è¡Œä¸ºè®¾å®šï¼›éƒ¨åˆ†èƒ½åŠ›åœ¨æ¦‚å¿µä¸Šä¸ RAG/å‘é‡åº“ç±»ä¼¼ï¼Œä½†å®ç°æ–¹å¼æ›´è½»é‡ã€æœ¬åœ°åŒ–ã€‚</li>
<li><strong>ç¼–æ’å±‚</strong>ï¼š<strong>å¹¶æœªä½¿ç”¨ Difyã€LangChain ç­‰ç°æˆç¼–æ’å¹³å°</strong>ï¼Œè€Œæ˜¯<strong>è‡ªç ”ç¼–æ’ä¸è°ƒåº¦</strong>â€”â€”ä¾‹å¦‚é€šè¿‡ <strong>Gateway æ§åˆ¶å¹³é¢</strong>ç»Ÿä¸€ç®¡ç†æ¶ˆæ¯é€šé“ã€å·¥å…·è°ƒç”¨ä¸äº‹ä»¶è§¦å‘ï¼Œç›¸å½“äºã€Œè‡ªå»ºäº†ä¸€ä¸ªå°å‹ç¼–æ’å¼•æ“ã€ï¼Œä»¥ä¾¿æ·±åº¦è´´åˆ IM æ¥å…¥ã€è®¾å¤‡æ§åˆ¶ã€æŠ€èƒ½åŠ è½½ç­‰éœ€æ±‚ã€‚</li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼š<strong>ä»–ä»¬ç«™åœ¨åº”ç”¨å±‚ï¼Œè‡ªå·±å®ç°äº†ã€Œä½•æ—¶è°ƒæ¨¡å‹ã€ä½•æ—¶æŸ¥è®°å¿†ã€ä½•æ—¶è°ƒå“ªä¸ªæŠ€èƒ½/å·¥å…·ã€çš„é€»è¾‘</strong>ï¼Œä»è€Œåœ¨æ¶æ„ä¸Šä¸ã€Œç”¨ Dify ç”»å¸ƒã€æˆ–ã€Œç”¨ LangChain å†™é“¾ã€å½¢æˆå·®å¼‚ï¼šæ›´å‚ç›´ã€æ›´äº§å“åŒ–ï¼Œè€Œä¸æ˜¯é€šç”¨ç¼–æ’å¹³å°ã€‚</p>
<h4 data-id="heading-24">6.4 ä»–ä»¬åšäº†ä»€ä¹ˆåˆ›æ–°</h4>
<p>ä»å…¬å¼€èµ„æ–™ä¸ç¤¾åŒºè®¨è®ºä¸­ï¼Œå¯ä»¥å½’çº³å‡ºä»¥ä¸‹å‡ ç±»åˆ›æ–°ç‚¹ï¼š</p>





























<table><thead><tr><th>æ–¹å‘</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>æ’ä»¶åŒ– / æŠ€èƒ½ç”Ÿæ€</strong></td><td>ä»å•ä½“æ¼”è¿›ä¸º<strong>æ’ä»¶åŒ–æ¶æ„</strong>ï¼Œæ¨¡å‹æä¾›å•†ã€æŠ€èƒ½ç­‰è§£è€¦ä¸ºç‹¬ç«‹æ¨¡å—ï¼›é€šè¿‡ <strong>ClawdHub</strong> ç­‰æŠ€èƒ½æ³¨å†Œè¡¨ï¼Œç”¨æˆ·å¯å‘ç°ã€å®‰è£…ã€æ›´æ–°æŠ€èƒ½ï¼Œç¤¾åŒºå¯è´¡çŒ®æ–°èƒ½åŠ›ï¼Œå½¢æˆã€Œåº”ç”¨ + æŠ€èƒ½å¸‚åœºã€çš„å½¢æ€ã€‚</td></tr><tr><td><strong>Gateway æ§åˆ¶å¹³é¢</strong></td><td>æ¶ˆæ¯é€šé“ã€å·¥å…·è°ƒç”¨ã€äº‹ä»¶è§¦å‘ç”±<strong>ç»Ÿä¸€ Gateway</strong> ç®¡ç†ï¼Œç±»ä¼¼ã€Œæ€»æ§/æ¥çº¿å‘˜ã€ï¼Œä¾¿äºå¯¹æ¥å¤šç§ IM ä¸è®¾å¤‡ï¼Œå¹¶ç»Ÿä¸€åšé‰´æƒã€é™æµã€è·¯ç”±ã€‚</td></tr><tr><td><strong>æœ¬åœ°ä¼˜å…ˆä¸è®°å¿†å½¢æ€</strong></td><td><strong>æœ¬åœ°ä¼˜å…ˆ</strong>ç­–ç•¥ï¼Œæ•æ„Ÿæ•°æ®å¯åªå­˜æœ¬åœ°ï¼›è®°å¿†é‡‡ç”¨ <strong>Markdown æ–‡ä»¶</strong>ï¼ˆå¦‚ AGENTS.mdã€MEMORY.mdã€æ¯æ—¥æ—¥å¿—ï¼‰ï¼Œç”¨æˆ·å’Œå¼€å‘è€…å¯ç›´æ¥æŸ¥çœ‹ã€ç¼–è¾‘ï¼Œé€æ˜ä¸”å¯ç‰ˆæœ¬ç®¡ç†ã€‚</td></tr><tr><td><strong>å¤šæ¸ é“ + 7Ã—24 å¾…å‘½</strong></td><td>æ·±åº¦é›†æˆ IMï¼Œç”¨æˆ·åœ¨å¸¸ç”¨èŠå¤©å·¥å…·é‡Œå³å¯ä¸ AI äº¤äº’ï¼›ç»“åˆè‡ªåŠ¨åŒ–ä¸è®°å¿†ï¼Œå®ç°ã€Œéšæ—¶å‘æ¶ˆæ¯ã€éšæ—¶æ‰§è¡Œä»»åŠ¡ã€çš„åŠ©ç†ä½“éªŒã€‚</td></tr><tr><td><strong>è‡ªåŠ¨åŒ–æ‰§è¡Œæ·±åº¦</strong></td><td>ä¸é™äºã€ŒèŠå¤© + æŸ¥çŸ¥è¯†ã€ï¼Œè€Œæ˜¯çœŸæ­£æ‰§è¡Œæ“ä½œï¼šå¡«è¡¨ã€å‘é‚®ä»¶ã€è·‘è„šæœ¬ã€æ§åˆ¶æµè§ˆå™¨ä¸æ™ºèƒ½å®¶å±…ç­‰ï¼ŒæŠŠã€Œå·¥å…·è°ƒç”¨ã€åšæˆäº§å“çº§èƒ½åŠ›ã€‚</td></tr></tbody></table>
<p>è¿™äº›åˆ›æ–°é›†ä¸­åœ¨<strong>åº”ç”¨å½¢æ€ã€ç¼–æ’è‡ªç ”ã€è®°å¿†å½¢æ€ã€æŠ€èƒ½ç”Ÿæ€ã€æ¸ é“ä¸æ‰§è¡Œæ·±åº¦</strong>ä¸Šï¼Œä¸ã€Œåªæ¥ä¸€ä¸ªæ¨¡å‹ APIã€æˆ–ã€Œåªç”¨é€šç”¨ç¼–æ’å¹³å°ã€çš„è·¯çº¿æœ‰æ˜æ˜¾åŒºåˆ«ã€‚</p>
<h4 data-id="heading-25">6.5 è‡ªç ”æ¡†æ¶ä¸æµè¡Œæ¡†æ¶çš„å¼‚åŒ</h4>








































<table><thead><tr><th>ç»´åº¦</th><th>ClawBot / OpenClaw è‡ªç ”è·¯çº¿</th><th>Dify / LangChain ç­‰æµè¡Œæ¡†æ¶</th></tr></thead><tbody><tr><td><strong>ç¼–æ’</strong></td><td><strong>è‡ªç ”</strong>ï¼šGateway + è‡ªå»ºè°ƒåº¦é€»è¾‘ï¼Œä¸ä¾èµ– Dify/LangChain</td><td><strong>é€šç”¨ç¼–æ’</strong>ï¼šDify ç”»å¸ƒã€LangChain é“¾/Agentï¼Œå¯å¤ç”¨äºå¤šç§åº”ç”¨</td></tr><tr><td><strong>å®šä½</strong></td><td><strong>åº”ç”¨å±‚äº§å“</strong>ï¼šç›´æ¥é¢å‘ç»ˆç«¯ç”¨æˆ·ï¼ˆä¸ªäººåŠ©ç†ã€IM å†…ä½¿ç”¨ï¼‰</td><td><strong>èƒ½åŠ›å±‚/ä¸­é—´å±‚</strong>ï¼šæä¾›ç¼–æ’ä¸é›†æˆèƒ½åŠ›ï¼Œç”±ä¸šåŠ¡å†å°è£…æˆåº”ç”¨</td></tr><tr><td><strong>è®°å¿†</strong></td><td><strong>è‡ªç ”</strong>ï¼šMarkdown æ–‡ä»¶ã€æœ¬åœ°ä¼˜å…ˆï¼Œå¼ºè°ƒå¯æ§ä¸å¯è¯»</td><td><strong>é€šç”¨æ–¹æ¡ˆ</strong>ï¼šå¤šä¸å‘é‡åº“/RAG é›†æˆï¼ŒDify/LangChain å‡æ”¯æŒå¤šç§è®°å¿†ä¸æ£€ç´¢</td></tr><tr><td><strong>æ‰©å±•</strong></td><td><strong>æŠ€èƒ½/æ’ä»¶</strong>ï¼šClawdHubã€AgentSkills å…¼å®¹æŠ€èƒ½ï¼Œå›´ç»•ã€Œä¸€ä¸ªåº”ç”¨ã€æ‰©å±•</td><td><strong>Tool/æ’ä»¶/å·¥ä½œæµ</strong>ï¼šDify æ’ä»¶ä¸å·¥ä½œæµèŠ‚ç‚¹ã€LangChain Toolï¼Œå›´ç»•ã€Œç¼–æ’èƒ½åŠ›ã€æ‰©å±•</td></tr><tr><td><strong>æ¸ é“ä¸éƒ¨ç½²</strong></td><td><strong>æ·±åº¦é›†æˆ IM</strong>ã€æœ¬åœ°ä¼˜å…ˆã€è®¾å¤‡æ§åˆ¶ç­‰ï¼Œäº§å“å½¢æ€å›ºå®š</td><td><strong>æ¸ é“æ— å…³</strong>ï¼šå¤šä¸º API/SDKï¼Œç”±æ¥å…¥æ–¹å†³å®š Web/IM/å†…éƒ¨ç³»ç»Ÿç­‰</td></tr><tr><td><strong>åº•å±‚é€»è¾‘</strong></td><td><strong>ç›¸åŒ</strong>ï¼šä»æ˜¯ã€Œæ¨¡å‹ + è®°å¿† + å·¥å…·è°ƒç”¨ã€çš„è®¤çŸ¥æ¶æ„ï¼Œåªæ˜¯ç¼–æ’ä¸è®°å¿†çš„å®ç°æ–¹å¼è‡ªç ”</td><td><strong>ç›¸åŒ</strong>ï¼šåŒæ ·ä¾èµ–æ¨¡å‹ APIã€è®°å¿†/æ£€ç´¢ã€å·¥å…·è°ƒç”¨ï¼Œåªæ˜¯ä»¥é€šç”¨æ¡†æ¶å½¢å¼æä¾›</td></tr></tbody></table>
<p><strong>å°ç»“</strong>ï¼šClawBot / OpenClaw æ˜¯<strong>åº”ç”¨å±‚çš„ AI é›†æˆåº”ç”¨</strong>ï¼Œåœ¨æ¨¡å‹å±‚ã€è®°å¿†å±‚ã€ç¼–æ’å±‚ä¹‹ä¸Šåšæ•´åˆï¼›<strong>åˆ›æ–°ç‚¹</strong>åœ¨äºè‡ªç ”ç¼–æ’ä¸æŠ€èƒ½ä½“ç³»ã€Gateway æ§åˆ¶å¹³é¢ã€æœ¬åœ°ä¼˜å…ˆçš„è®°å¿†å½¢æ€ã€ä»¥åŠå¤šæ¸ é“ IM ä¸æ·±åº¦è‡ªåŠ¨åŒ–æ‰§è¡Œï¼›<strong>ä¸ Dify/LangChain çš„å¼‚åŒ</strong>â€”â€”åº•å±‚æ€æƒ³ä¸€è‡´ï¼ˆæ¨¡å‹+è®°å¿†+å·¥å…·ï¼‰ï¼Œä½†<strong>ä¸è‡ªå»ºåœ¨ç°æˆç¼–æ’å¹³å°ä¸Š</strong>ï¼Œè€Œæ˜¯<strong>è‡ªç ”æ¡†æ¶</strong>ä»¥æ›´å¥½è´´åˆã€Œä¸ªäººåŠ©ç† + å¤šæ¸ é“ + æœ¬åœ° + æŠ€èƒ½ç”Ÿæ€ã€çš„äº§å“ç›®æ ‡ã€‚</p>
<hr/>
<h3 data-id="heading-26">ä¸ƒã€æ²™ç®±æ’ä»¶åŠŸèƒ½å®ç°</h3>
<p>æœ¬èŠ‚ä»‹ç» CLI ä¸­ã€ŒAI æ²™ç®±ã€æ’ä»¶çš„åŠŸèƒ½ä¸å®ç°æ€è·¯ï¼Œä¾¿äºå¯¹å†…åˆ†äº«ã€‚å®ç°åŸºäº <strong>LangChain</strong> çš„ <strong>Tool</strong> ä¸ <strong>Agent è°ƒç”¨</strong>ï¼ˆ<a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Ftools%2F" target="_blank" title="https://js.langchain.com/docs/concepts/tools/" ref="nofollow noopener noreferrer">LangChain Tools æ¦‚å¿µ</a>ï¼‰ï¼Œç”¨è‡ªç„¶è¯­è¨€é©±åŠ¨ã€Œç”Ÿæˆä»£ç  â†’ æ²™ç®±æ‰§è¡Œã€çš„é—­ç¯ã€‚</p>
<h4 data-id="heading-27">7.1 æ²™ç®±çš„æ¦‚å¿µï¼šä¸ºä»€ä¹ˆéœ€è¦æ²™ç®±</h4>
<p><strong>æ²™ç®±ï¼ˆSandboxï¼‰</strong> åœ¨è¿™é‡ŒæŒ‡ï¼šåœ¨ä¸€ä¸ª<strong>éš”ç¦»çš„è¿è¡Œæ—¶ç¯å¢ƒ</strong>é‡Œæ‰§è¡Œ<strong>ç”± AI ç”Ÿæˆçš„ä»£ç </strong>ï¼Œè€Œä¸æ˜¯ç›´æ¥åœ¨å®¿ä¸»è¿›ç¨‹é‡Œæ‰§è¡Œã€‚</p>
<ul>
<li><strong>ä¸ºä»€ä¹ˆè¦éš”ç¦»</strong>ï¼šç”¨æˆ·è¯´ã€Œç”Ÿæˆä¸€ä¸ª index.htmlã€æˆ–ã€ŒæŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ .txt é‡Œçš„ç©ºæ ¼æ”¹æˆä¸‹åˆ’çº¿ã€æ—¶ï¼Œæˆ‘ä»¬ä¼šè®©æ¨¡å‹<strong>ç”Ÿæˆä¸€æ®µ JavaScript ä»£ç </strong>ï¼Œå†ç”±ç¨‹åºæ‰§è¡Œã€‚è‹¥è¿™æ®µä»£ç ç›´æ¥åœ¨å®¿ä¸» Node è¿›ç¨‹é‡Œè·‘ï¼Œä¸€æ—¦æ¨¡å‹ç”Ÿæˆ <code>require('child_process').execSync('rm -rf /')</code> æˆ–è®¿é—®æ•æ„Ÿç¯å¢ƒå˜é‡ï¼Œå°±ä¼šå¯¹çœŸå®ç³»ç»Ÿé€ æˆé£é™©ã€‚æ²™ç®±çš„ä½œç”¨æ˜¯<strong>é™åˆ¶æ‰§è¡Œç¯å¢ƒ</strong>ï¼šåªæš´éœ²æˆ‘ä»¬å…è®¸çš„ APIï¼ˆå¦‚ <code>createFile</code>ã€<code>readFile</code>ã€<code>listDir</code>ï¼‰ï¼Œä¸æš´éœ²å®Œæ•´çš„ <code>require</code>ã€<code>process.env</code> ç­‰ï¼Œä»è€ŒæŠŠã€ŒAI ç”Ÿæˆçš„ä»£ç ã€å’Œã€ŒçœŸå®ç³»ç»Ÿã€éš”å¼€ã€‚</li>
<li><strong>æœ¬é¡¹ç›®çš„æ²™ç®±å®ç°</strong>ï¼šä½¿ç”¨ <strong>vm2</strong> åº“ï¼ŒæŠŠä¸€æ®µã€Œæ²™ç®±å…¨å±€å¯¹è±¡ã€ï¼ˆåŒ…å« <code>__workspace</code>ã€<code>fs</code>ã€<code>path</code>ã€<code>createFile</code>ã€<code>readFile</code> ç­‰ï¼‰æ³¨å…¥åˆ° VM é‡Œï¼Œæ¨¡å‹ç”Ÿæˆçš„ä»£ç åªèƒ½è®¿é—®è¿™äº›å¯¹è±¡ï¼›æ‰§è¡Œæ—¶ç”¨ <strong>IIFE</strong> åŒ…è£¹ä»£ç ä»¥ä¾¿æ”¯æŒé¡¶å±‚ <code>return</code>ï¼Œæ‰§è¡Œç»“æœæˆ–å¼‚å¸¸ç”±å®¿ä¸»æ•è·åè¿”å›ç»™ç”¨æˆ·ã€‚è¿™æ ·æ—¢èƒ½è®© AIã€Œå†™ä»£ç åŠäº‹ã€ï¼Œåˆä¸ä¼šè¶Šæƒæ“ä½œå®¿ä¸»ã€‚</li>
</ul>
<h4 data-id="heading-28">7.2 åŠŸèƒ½æ¦‚è¿°</h4>
<ul>
<li><strong>å…¥å£</strong>ï¼š<code>st sandbox &lt;æŒ‡ä»¤...&gt;</code>ï¼Œä¾‹å¦‚ <code>st sandbox ç”Ÿæˆä¸€ä¸ª index.html</code>ã€<code>st sandbox æŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ .txt é‡Œçš„ç©ºæ ¼æ”¹æˆä¸‹åˆ’çº¿</code>ã€‚</li>
<li><strong>è¡Œä¸º</strong>ï¼šæ ¹æ®ç”¨æˆ·æŒ‡ä»¤ï¼Œç”±<strong>è°ƒåº¦æ¨¡å‹</strong>å†³å®šæ˜¯ã€Œæ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶ã€è¿˜æ˜¯ã€Œçº¯é—®ç­”ã€ï¼›è‹¥éœ€æ‰§è¡Œä»£ç ï¼Œåˆ™å†è°ƒç”¨ä¸€æ¬¡æ¨¡å‹ï¼Œæ ¹æ®<strong>æ²™ç®±ç¯å¢ƒè¯´æ˜</strong>ç”Ÿæˆå¯åœ¨æ²™ç®±ä¸­è¿è¡Œçš„ JavaScript ä»£ç ï¼Œç»<strong>è¯­æ³•æ ¡éªŒ</strong>ååœ¨ <strong>vm2</strong> æ²™ç®±ä¸­æ‰§è¡Œï¼Œå¹¶å°†ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚</li>
<li><strong>ç‰¹æ®Šå¤„ç†</strong>ï¼šè‹¥ç”Ÿæˆçš„ä»£ç ä¼šå¯åŠ¨ HTTP æœåŠ¡ï¼ˆå¦‚ <code>app.listen</code>ï¼‰ï¼Œè¿›ç¨‹ä¼šæŒ‚èµ·å¹¶æç¤ºã€ŒæŒ‰ Ctrl+C åœæ­¢ã€ï¼Œé¿å…æœåŠ¡ç«‹åˆ»é€€å‡ºã€‚</li>
</ul>
<h4 data-id="heading-29">7.3 æ•´ä½“æµç¨‹ä¸ LangChain æ¦‚å¿µå¯¹åº”</h4>

























<table><thead><tr><th>æ­¥éª¤</th><th>å®ç°</th><th>LangChain æ¦‚å¿µç®€è¿°</th></tr></thead><tbody><tr><td>1. è°ƒåº¦</td><td>æ¨¡å‹æ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šè°ƒç”¨ <code>sandbox</code> è¿˜æ˜¯ <code>direct_answer</code></td><td><strong>Tool</strong>ï¼šæŠŠèƒ½åŠ›å°è£…æˆå·¥å…·ï¼Œæ¨¡å‹é€šè¿‡ <strong>tool_calls</strong> é€‰æ‹©è°ƒç”¨ï¼›<a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Ftools%2F%23binding-tools-to-models" target="_blank" title="https://js.langchain.com/docs/concepts/tools/#binding-tools-to-models" ref="nofollow noopener noreferrer">bindTools</a> å°†å·¥å…·ç»‘å®šåˆ°æ¨¡å‹ã€‚</td></tr><tr><td>2. ç”Ÿæˆä»£ç </td><td>æ²™ç®±å·¥å…·å†…å†è°ƒç”¨ä¸€æ¬¡æ¨¡å‹ï¼Œä¼ å…¥ã€Œæ²™ç®±ç¯å¢ƒè¯´æ˜ã€+ ç”¨æˆ·æŒ‡ä»¤ï¼Œå¾—åˆ°ä»£ç å­—ç¬¦ä¸²</td><td><strong>SystemMessage / HumanMessage</strong>ï¼šæ„é€ å¯¹è¯ï¼›<strong>model.invoke(messages)</strong>ï¼šåŒæ­¥è°ƒç”¨æ¨¡å‹ã€‚</td></tr><tr><td>3. æ‰§è¡Œä¸å›ä¼ </td><td>åœ¨ vm2 ä¸­æ‰§è¡Œä»£ç ï¼Œå°† stdout/è¿”å›å€¼æ‹¼æˆå­—ç¬¦ä¸²ï¼Œä½œä¸º<strong>ToolMessage</strong> å›ä¼ ç»™æ¨¡å‹</td><td><strong>ToolMessage</strong>ï¼šå·¥å…·æ‰§è¡Œç»“æœå¿…é¡»ç”¨ <code>tool_call_id</code> ä¸ä¹‹å‰çš„ <strong>tool_calls</strong> å¯¹åº”ï¼Œæ¨¡å‹æ®æ­¤ç»§ç»­æ¨ç†æˆ–ç»“æŸã€‚</td></tr></tbody></table>
<p>å¤šè½®é€»è¾‘ï¼šå‘½ä»¤é‡Œç”¨ <code>messages</code> æ•°ç»„ç´¯ç§¯ <strong>HumanMessage â†’ AIMessageï¼ˆå« tool_callsï¼‰â†’ ToolMessage â†’ â€¦</strong>ï¼Œå¾ªç¯ <code>model.invoke(messages)</code> ç›´åˆ°æ¨¡å‹ä¸å†å‘èµ· tool_callsï¼Œå³å®Œæˆä¸€è½®ã€Œè°ƒåº¦ â†’ æ‰§è¡Œ â†’ å›å¤ã€ã€‚</p>
<h4 data-id="heading-30">7.4 å‘½ä»¤å…¥å£ï¼šè°ƒåº¦ Agent ä¸å·¥å…·å¾ªç¯</h4>
<p>å‘½ä»¤å®šä¹‰åœ¨ <code>src/bin/command/agentCommand/sandbox.ts</code>ã€‚æ ¸å¿ƒï¼š<strong>ç»‘å®šä¸¤ä¸ª Tool</strong>ï¼Œç”¨<strong>ç³»ç»Ÿæç¤ºè¯</strong>çº¦æŸã€Œä½•æ—¶è°ƒæ²™ç®±ã€ä½•æ—¶ç›´æ¥å›ç­”ã€ã€‚</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// è°ƒåº¦æç¤ºï¼šéœ€è¦åŠ¨æ–‡ä»¶/è·‘ä»£ç  â†’ sandboxï¼›çº¯é—®ç­” â†’ direct_answer</span>
<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">DISPATCHER_SYSTEM_PROMPT</span> = <span class="hljs-string">`ä½ æ˜¯è°ƒåº¦åŠ©æ‰‹ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šã€Œè¦ä¸è¦æ‰§è¡Œä»£ç ã€ï¼Œå¹¶åªè°ƒç”¨ä¸€ä¸ªå·¥å…·ã€‚
è§„åˆ™ï¼š
1. **éœ€è¦æ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶æ—¶** â†’ è°ƒç”¨ \`sandbox\`ï¼ŒæŠŠç”¨æˆ·çš„æ•´å¥æŒ‡ä»¤åŸæ ·ä¼ å…¥ã€‚
2. **çº¯é—®ç­”ã€ä¸éœ€è¦åŠ¨æ–‡ä»¶æˆ–è·‘ä»£ç æ—¶** â†’ è°ƒç”¨ \`direct_answer\`ï¼Œç”¨ \`answer\` å‚æ•°ç»™å‡ºç®€çŸ­å›ç­”ï¼ˆ1ï½3 å¥è¯ï¼‰ã€‚
3. åªè°ƒç”¨ä¸€ä¸ªå·¥å…·ï¼Œä¸è¦åŒæ—¶è°ƒç”¨ä¸¤ä¸ªã€‚`</span>;

<span class="hljs-keyword">const</span> tools = [sandboxTool, answerTool];
<span class="hljs-keyword">const</span> model = <span class="hljs-title function_">createModel</span>().<span class="hljs-title function_">bindTools</span>(tools);
<span class="hljs-keyword">const</span> messages = [<span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-variable constant_">DISPATCHER_SYSTEM_PROMPT</span>), <span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(instruction)];
<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(messages);
<span class="hljs-comment">// è‹¥æœ‰ response.tool_callsï¼Œåˆ™æ‰§è¡Œå¯¹åº”å·¥å…·ï¼ŒæŠŠç»“æœ push æˆ ToolMessageï¼Œå† invoke(messages)ï¼Œå¾ªç¯</span>
</code></pre>
<ul>
<li><strong>bindTools(tools)</strong>ï¼šLangChain ä¸­æŠŠã€Œå¯è°ƒç”¨çš„å·¥å…·åˆ—è¡¨ã€ç»‘åˆ°æ¨¡å‹ä¸Šï¼Œæ¨¡å‹è¾“å‡ºä¸­ä¼šåŒ…å« <strong>tool_calls</strong>ï¼ˆå·¥å…·å + å‚æ•°ï¼‰ã€‚</li>
<li><strong>ToolMessage</strong>ï¼šæ„é€ æ—¶éœ€ä¼ å…¥ <strong>tool_call_id</strong>ï¼ˆä¸ AIMessage ä¸­æŸæ¡ tool_call çš„ id ä¸€è‡´ï¼‰ï¼Œè¿™æ ·æ¨¡å‹æ‰èƒ½æŠŠã€Œè¿™æ¡å·¥å…·ç»“æœã€ä¸ã€Œå“ªä¸€æ¬¡è°ƒç”¨ã€å¯¹åº”èµ·æ¥ã€‚</li>
</ul>
<h4 data-id="heading-31">7.5 Tools å¦‚ä½•å†™ã€ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™</h4>
<p>å·¥å…·å®šä¹‰åœ¨ <code>src/bin/langchain/tools/sandbox.ts</code>ã€‚æˆ‘ä»¬åªæš´éœ²<strong>ä¸¤ä¸ª Tool</strong>ï¼š<code>direct_answer</code>ï¼ˆçº¯é—®ç­”ï¼‰å’Œ <code>sandbox</code>ï¼ˆæ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶ï¼‰ã€‚æ¨¡å‹é€šè¿‡ <strong>tool_calls</strong> é€‰æ‹©è°ƒç”¨å“ªä¸€ä¸ªï¼Œå¹¶ä¼ å…¥å¯¹åº”å‚æ•°ã€‚ä¸‹é¢ç”¨å®é™…ä»£ç è¯´æ˜<strong>æ€ä¹ˆå†™</strong>ä»¥åŠ<strong>ä¸ºä»€ä¹ˆè¿™ä¹ˆå†™</strong>ã€‚</p>
<h5 data-id="heading-32">7.5.1 ä¸ºä»€ä¹ˆåªæœ‰ä¸¤ä¸ª Toolï¼Ÿ</h5>
<p>è°ƒåº¦å±‚åªéœ€è¦åš<strong>äºŒé€‰ä¸€</strong>ï¼šã€Œç”¨æˆ·æ˜¯åœ¨é—®é—®é¢˜ã€â†’ ç”¨ <code>direct_answer</code> ç›´æ¥å›ç­”ï¼›ã€Œç”¨æˆ·è¦åŠ¨æ–‡ä»¶æˆ–è·‘ä»£ç ã€â†’ ç”¨ <code>sandbox</code> ç”Ÿæˆä»£ç å¹¶åœ¨æ²™ç®±é‡Œæ‰§è¡Œã€‚è‹¥åªç»™ä¸€ä¸ªã€Œä¸‡èƒ½å·¥å…·ã€ï¼Œæ¨¡å‹å®¹æ˜“åœ¨çº¯é—®ç­”æ—¶ä¹Ÿå»è°ƒæ²™ç®±ï¼Œå¢åŠ å»¶è¿Ÿå’Œè¯¯æ‰§è¡Œé£é™©ï¼›è‹¥æ‹†æˆå¾ˆå¤šå°å·¥å…·ï¼ˆå¦‚ã€Œåˆ›å»ºæ–‡ä»¶ã€ã€Œè¯»æ–‡ä»¶ã€ã€Œæ‰§è¡Œå‘½ä»¤ã€ï¼‰ï¼Œè°ƒåº¦æ¨¡å‹è¦åšçš„é€‰æ‹©å¤ªå¤šï¼Œå®¹æ˜“é€‰é”™ã€‚å› æ­¤<strong>ä¸¤ä¸ªå·¥å…·ã€èŒè´£æ¸…æ™°</strong>ï¼Œä¾¿äºåœ¨ç³»ç»Ÿæç¤ºè¯é‡Œå†™æ¸…ã€Œä½•æ—¶è°ƒå“ªä¸ªã€ã€‚</p>
<h5 data-id="heading-33">7.5.2 answerToolï¼šçº¯é—®ç­”å·¥å…·</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> { tool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@langchain/core/tools"</span>;
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> answerTool = <span class="hljs-title function_">tool</span>(
  <span class="hljs-function">(<span class="hljs-params">args: { answer: <span class="hljs-built_in">string</span> }</span>) =&gt;</span> args.<span class="hljs-property">answer</span>,
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"direct_answer"</span>,
    <span class="hljs-attr">description</span>:
      <span class="hljs-string">"ä»…ç”¨äºçº¯é—®ç­”ï¼šç”¨æˆ·åªæ˜¯æé—®ã€è§£é‡Šã€é—²èŠï¼Œä¸éœ€è¦åˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶æˆ–æ‰§è¡Œä»»ä½•ä»£ç æ—¶ä½¿ç”¨ã€‚å›ç­”å¿…é¡»ç®€çŸ­ï¼ˆä¸€ä¸¤å¥è¯åˆ°ä¸€å°æ®µï¼‰ï¼Œä¸è¦é•¿ç¯‡å¤§è®ºã€‚"</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">answer</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç®€çŸ­å›ç­”ï¼Œæ§åˆ¶åœ¨ 1ï½3 å¥è¯å†…ï¼Œä¸è¦è¿‡é•¿"</span>),
    }),
  }
);
</code></pre>
<ul>
<li><strong>name</strong>ï¼šæ¨¡å‹åœ¨ <strong>tool_calls</strong> é‡Œé€šè¿‡è¿™ä¸ªåå­—é€‰ä¸­è¯¥å·¥å…·ï¼›å†™æˆ <code>direct_answer</code> ä¸è°ƒåº¦æç¤ºè¯é‡Œçš„ã€Œè°ƒç”¨ <code>direct_answer</code>ã€ä¸€è‡´ã€‚</li>
<li><strong>description</strong>ï¼š<strong>æœ€å…³é”®</strong>ã€‚LangChain ä¼šæŠŠ description å‘ç»™æ¨¡å‹ï¼Œæ¨¡å‹æ®æ­¤åˆ¤æ–­ã€Œå½“å‰ç”¨æˆ·è¾“å…¥æ˜¯å¦å±äºçº¯é—®ç­”ã€ã€‚è¿™é‡Œæ˜ç¡®å†™äº†ã€Œä»…ç”¨äºçº¯é—®ç­”ã€ã€Œä¸éœ€è¦åˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶æˆ–æ‰§è¡Œä»»ä½•ä»£ç ã€ã€Œå›ç­”å¿…é¡»ç®€çŸ­ã€ï¼Œæ¨¡å‹æ‰ä¼šåœ¨ç”¨æˆ·é—®ã€Œä»€ä¹ˆæ˜¯ RAGã€æ—¶è°ƒè¿™ä¸ªå·¥å…·ï¼Œè€Œä¸æ˜¯è°ƒ sandboxã€‚</li>
<li><strong>schema</strong>ï¼šç”¨ <strong>zod</strong> å£°æ˜å‚æ•°ã€‚æ¨¡å‹ä¸ä¼šã€Œè‡ªå·±å‘æ˜ã€å‚æ•°åï¼Œè€Œæ˜¯æŒ‰ schema é‡Œçš„å­—æ®µç”Ÿæˆ JSONï¼›è¿™é‡Œåªæœ‰ <code>answer</code> ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ¨¡å‹å°±ä¼šæŠŠè¦å›å¤ç»™ç”¨æˆ·çš„è¯æ”¾è¿› <code>answer</code>ï¼Œæˆ‘ä»¬ç›´æ¥ <code>args.answer</code> è¿”å›å³å¯ã€‚<strong>ä¸å†™ schema çš„è¯ï¼Œæ¨¡å‹ä¸çŸ¥é“è¦ä¼ ä»€ä¹ˆå‚æ•°</strong>ï¼Œå®¹æ˜“ä¸ä¼ æˆ–ä¼ é”™ã€‚</li>
</ul>
<h5 data-id="heading-34">7.5.3 sandboxToolï¼šæ²™ç®±æ‰§è¡Œå·¥å…·</h5>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> sandboxTool = <span class="hljs-title function_">tool</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">args</span>: { <span class="hljs-attr">instruction</span>: <span class="hljs-built_in">string</span> }) =&gt; {
    <span class="hljs-keyword">const</span> { instruction } = args;
    <span class="hljs-comment">// 1. æ„é€ æ²™ç®±ä¸“ç”¨å¯¹è¯ï¼Œè®©æ¨¡å‹ç”Ÿæˆä»£ç </span>
    <span class="hljs-keyword">const</span> messages = [
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">SystemMessage</span>(<span class="hljs-variable constant_">SANDBOX_SYSTEM_PROMPT</span>),
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">HumanMessage</span>(instruction),
    ];
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> model.<span class="hljs-title function_">invoke</span>(messages);
    <span class="hljs-keyword">const</span> responseText = <span class="hljs-keyword">typeof</span> res.<span class="hljs-property">content</span> === <span class="hljs-string">"string"</span> ? res.<span class="hljs-property">content</span> : <span class="hljs-title class_">String</span>(res.<span class="hljs-property">content</span> ?? <span class="hljs-string">""</span>);
    <span class="hljs-comment">// 2. è§£æä»£ç  + æ˜¯å¦ HTTP æœåŠ¡</span>
    <span class="hljs-keyword">const</span> { code, isHttpService } = <span class="hljs-title function_">parseCodeFromResponse</span>(responseText);
    <span class="hljs-keyword">if</span> (!code) <span class="hljs-keyword">return</span> <span class="hljs-string">`æœªèƒ½ä»æ¨¡å‹å›å¤ä¸­è§£æå‡ºä»£ç ã€‚...`</span>;
    <span class="hljs-comment">// 3. Acorn è¯­æ³•æ ¡éªŒ</span>
    <span class="hljs-keyword">const</span> validation = <span class="hljs-title function_">validateSyntax</span>(code);
    <span class="hljs-keyword">if</span> (!validation.<span class="hljs-property">ok</span>) <span class="hljs-keyword">return</span> <span class="hljs-string">`è¯­æ³•æ ¡éªŒå¤±è´¥ï¼š<span class="hljs-subst">${validation.message}</span>`</span>;
    <span class="hljs-comment">// 4. åœ¨æ²™ç®±ä¸­æ‰§è¡Œ</span>
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> <span class="hljs-title function_">runInSandbox</span>(code);
      <span class="hljs-comment">// æ ¼å¼åŒ–ç»“æœï¼Œè‹¥ä¸º HTTP æœåŠ¡åˆ™åŠ å‰ç¼€ä¾›å‘½ä»¤å±‚æŒ‚èµ·è¿›ç¨‹</span>
      <span class="hljs-keyword">return</span> isHttpService ? <span class="hljs-variable constant_">SANDBOX_HTTP_SERVICE_PREFIX</span> + body : body;
    } <span class="hljs-keyword">catch</span> (err) {
      <span class="hljs-keyword">return</span> <span class="hljs-string">`æ²™ç®±æ‰§è¡Œé”™è¯¯ï¼š<span class="hljs-subst">${msg}</span>`</span>;
    }
  },
  {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"sandbox"</span>,
    <span class="hljs-attr">description</span>:
      <span class="hljs-string">"ä»…å½“ç”¨æˆ·éœ€è¦ã€Œæ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶ã€æ—¶ä½¿ç”¨ï¼šä¾‹å¦‚åˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶ã€ç”Ÿæˆ HTMLã€æ‰¹é‡é‡å‘½åã€è¿è¡Œ shell å‘½ä»¤ã€è¯»ç›®å½•ç­‰ã€‚ä¸éœ€è¦åŠ¨æ–‡ä»¶æˆ–è·‘ä»£ç æ—¶ä¸è¦è°ƒç”¨ã€‚"</span>,
    <span class="hljs-attr">schema</span>: z.<span class="hljs-title function_">object</span>({
      <span class="hljs-attr">instruction</span>: z
        .<span class="hljs-title function_">string</span>()
        .<span class="hljs-title function_">describe</span>(<span class="hljs-string">"ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šç”Ÿæˆä¸€ä¸ª index.htmlï¼›æˆ–ï¼šæŠŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰ .txt æ–‡ä»¶åé‡Œçš„ç©ºæ ¼æ”¹æˆä¸‹åˆ’çº¿"</span>),
    }),
  }
);
</code></pre>
<ul>
<li><strong>name</strong>ï¼š<code>sandbox</code>ï¼Œä¸è°ƒåº¦æç¤ºè¯é‡Œã€Œè°ƒç”¨ <code>sandbox</code>ã€ä¸€è‡´ã€‚</li>
<li><strong>description</strong>ï¼šæ˜ç¡®å†™ã€Œä»…å½“ç”¨æˆ·éœ€è¦æ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶æ—¶ä½¿ç”¨ã€ï¼Œå¹¶ä¸¾ä¾‹ï¼ˆåˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶ã€ç”Ÿæˆ HTMLã€æ‰¹é‡é‡å‘½åã€è¿è¡Œå‘½ä»¤ã€è¯»ç›®å½•ï¼‰ï¼Œæœ€åå¼ºè°ƒã€Œä¸éœ€è¦åŠ¨æ–‡ä»¶æˆ–è·‘ä»£ç æ—¶ä¸è¦è°ƒç”¨ã€ã€‚è¿™æ ·æ¨¡å‹æ‰ä¼šåœ¨ç”¨æˆ·è¯´ã€Œç”Ÿæˆä¸€ä¸ª index.htmlã€æ—¶è°ƒ sandboxï¼Œåœ¨ç”¨æˆ·è¯´ã€Œä»€ä¹ˆæ˜¯ RAGã€æ—¶ä¸è°ƒã€‚</li>
<li><strong>schema</strong>ï¼šåªæœ‰ä¸€ä¸ªå‚æ•° <code>instruction</code>ï¼Œç±»å‹ä¸º stringï¼Œdescribe é‡Œç»™äº†ç¤ºä¾‹ã€‚è°ƒåº¦æ¨¡å‹ä¼šæŠŠ<strong>ç”¨æˆ·çš„æ•´å¥æŒ‡ä»¤</strong>åŸæ ·æ”¾è¿› <code>instruction</code>ï¼ŒsandboxTool å†…éƒ¨å†æ‹¿è¿™å¥ instruction å»è°ƒ<strong>ç¬¬äºŒæ¬¡æ¨¡å‹</strong>ï¼ˆç”Ÿæˆä»£ç çš„é‚£æ¬¡ï¼‰ï¼Œè¿™æ ·ã€Œè°ƒåº¦ã€å’Œã€Œç”Ÿæˆä»£ç ã€è§£è€¦ï¼šè°ƒåº¦åªè´Ÿè´£é€‰å·¥å…·+ä¼ å‚ï¼Œç”Ÿæˆä»£ç ç”±æ²™ç®±ä¸“ç”¨çš„ system promptï¼ˆSANDBOX_SYSTEM_PROMPTï¼‰çº¦æŸã€‚</li>
<li><strong>ä¸ºä»€ä¹ˆå·¥å…·å†…éƒ¨å†è°ƒä¸€æ¬¡æ¨¡å‹ï¼Ÿ</strong> å› ä¸ºã€Œç”Ÿæˆå¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œçš„ JavaScriptã€éœ€è¦<strong>å¦ä¸€å¥—æç¤ºè¯</strong>ï¼ˆæ²™ç®±ç¯å¢ƒè¯´æ˜ã€é»˜è®¤ç›®å½•ã€HTTP æœåŠ¡æ ‡è®°ç­‰ï¼‰ï¼Œå’Œã€Œè°ƒåº¦ï¼šé€‰ sandbox è¿˜æ˜¯ direct_answerã€çš„æç¤ºè¯ä¸åŒã€‚æ‰€ä»¥è®¾è®¡æˆï¼šè°ƒåº¦æ¨¡å‹åªåšäºŒé€‰ä¸€å¹¶ä¼  <code>instruction</code>ï¼›sandboxTool å†…éƒ¨ç”¨ SANDBOX_SYSTEM_PROMPT + instruction å† invoke ä¸€æ¬¡æ¨¡å‹ï¼Œå¾—åˆ°ä»£ç åå†æ ¡éªŒã€æ‰§è¡Œã€è¿”å›ã€‚è¿™æ ·èŒè´£æ¸…æ™°ï¼Œä¹Ÿä¾¿äºå•ç‹¬è°ƒä¼˜æ²™ç®±ä¾§çš„æç¤ºè¯ã€‚</li>
</ul>
<h5 data-id="heading-35">7.5.4 sandboxTool å†…éƒ¨å››æ­¥ï¼ˆç®€è¦ï¼‰</h5>
<ol>
<li><strong>æ„é€ æ²™ç®±ä¸“ç”¨å¯¹è¯</strong>ï¼š<code>SystemMessage(SANDBOX_SYSTEM_PROMPT)</code> + <code>HumanMessage(instruction)</code>ã€‚SANDBOX_SYSTEM_PROMPT ç”± <code>getSandboxPromptContext("markdown")</code> ç”Ÿæˆï¼Œé™åˆ¶æ¨¡å‹åªä½¿ç”¨æ²™ç®±å†…åˆ—å‡ºçš„ APIã€‚</li>
<li><strong>è§£ææ¨¡å‹å›å¤</strong>ï¼šä»å›å¤ä¸­æå– ```js ... ``` æˆ–è£¸ä»£ç ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦åŒ…å« <code>__IS_HTTP_SERVICE__</code> æˆ–ä»£ç ä¸­æ˜¯å¦æœ‰ <code>.listen(</code>ï¼Œç”¨äºåç»­æ˜¯å¦æŒ‚èµ·è¿›ç¨‹ã€‚</li>
<li><strong>Acorn è¯­æ³•æ ¡éªŒ</strong>ï¼šåœ¨è¿›å…¥ vm2 å‰ç”¨ acorn åšä¸€æ¬¡ parseï¼Œé¿å…æ˜æ˜¾è¯­æ³•é”™è¯¯åœ¨æ²™ç®±é‡ŒæŠ¥é”™ä¸æ˜ç¡®æˆ–å¡æ­»ã€‚</li>
<li><strong>runInSandbox(code)</strong>ï¼šè°ƒç”¨æ²™ç®±æ¨¡å—æ‰§è¡Œä»£ç ï¼›è‹¥ä¸º HTTP æœåŠ¡ï¼Œåœ¨è¿”å›å†…å®¹å‰åŠ ä¸Š <code>SANDBOX_HTTP_SERVICE_PREFIX</code>ï¼Œå‘½ä»¤å±‚æ£€æµ‹åˆ°åæŒ‚èµ·è¿›ç¨‹ã€‚</li>
</ol>
<h4 data-id="heading-36">7.6 æ²™ç®±ç›¸å…³æç¤ºè¯ï¼šä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</h4>
<p>æ²™ç®±åŠŸèƒ½é‡Œç”¨åˆ°<strong>ä¸¤å¥—æç¤ºè¯</strong>ï¼šä¸€å¥—åœ¨<strong>å‘½ä»¤å±‚</strong>åšè°ƒåº¦ï¼ˆé€‰ sandbox è¿˜æ˜¯ direct_answerï¼‰ï¼Œä¸€å¥—åœ¨<strong>æ²™ç®±å·¥å…·å†…éƒ¨</strong>åšä»£ç ç”Ÿæˆï¼ˆåªç”Ÿæˆå¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œçš„ JavaScriptï¼‰ã€‚ä¸¤å¥—èŒè´£åˆ†ç¦»ï¼Œä¾¿äºå•ç‹¬è°ƒä¼˜ã€‚ä¸‹é¢åˆ†åˆ«è´´å‡ºå…³é”®å†…å®¹ï¼Œå¹¶è¯´æ˜<strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</strong>ã€‚å¯¹åº”ä»£ç ä½ç½®ï¼š<code>src/bin/command/agentCommand/sandbox.ts</code>ï¼ˆè°ƒåº¦ï¼‰ã€<code>src/bin/langchain/sandbox/prompt.ts</code>ï¼ˆæ²™ç®±ç¯å¢ƒè¯´æ˜ï¼‰ã€<code>src/bin/langchain/tools/sandbox.ts</code>ï¼ˆä»£ç ç”Ÿæˆè§„åˆ™æ‹¼æ¥ï¼‰ã€‚</p>
<hr/>
<h5 data-id="heading-37">7.6.1 è°ƒåº¦æç¤ºè¯ï¼ˆDISPATCHER_SYSTEM_PROMPTï¼‰</h5>
<p><strong>å®Œæ•´å†…å®¹</strong>ï¼ˆ<code>sandbox.ts</code> å‘½ä»¤å…¥å£ï¼‰ï¼š</p>
<pre><code class="hljs language-text" lang="text">ä½ æ˜¯è°ƒåº¦åŠ©æ‰‹ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šã€Œè¦ä¸è¦æ‰§è¡Œä»£ç ã€ï¼Œå¹¶åªè°ƒç”¨ä¸€ä¸ªå·¥å…·ã€‚

è§„åˆ™ï¼š
1. **éœ€è¦æ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶æ—¶** â†’ è°ƒç”¨ `sandbox`ï¼ŒæŠŠç”¨æˆ·çš„æ•´å¥æŒ‡ä»¤åŸæ ·ä¼ å…¥ã€‚ä¾‹å¦‚ï¼šåˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶ã€ç”Ÿæˆ HTMLã€æ‰¹é‡é‡å‘½åã€åˆ—ç›®å½•ã€è¿è¡Œå‘½ä»¤ç­‰ã€‚
2. **çº¯é—®ç­”ã€ä¸éœ€è¦åŠ¨æ–‡ä»¶æˆ–è·‘ä»£ç æ—¶** â†’ è°ƒç”¨ `direct_answer`ï¼Œç”¨ `answer` å‚æ•°ç»™å‡ºç®€çŸ­å›ç­”ï¼ˆ1ï½3 å¥è¯ï¼Œä¸è¦é•¿ç¯‡å¤§è®ºï¼‰ã€‚
3. åªè°ƒç”¨ä¸€ä¸ªå·¥å…·ï¼Œä¸è¦åŒæ—¶è°ƒç”¨ä¸¤ä¸ªã€‚ä¸è¦è¾“å‡ºè¿‡é•¿æ–‡æœ¬ã€‚
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</strong>ï¼š</p>



































<table><thead><tr><th>éƒ¨åˆ†</th><th>ä½œç”¨</th><th>ä¸è¿™ä¹ˆå†™çš„åæœ</th></tr></thead><tbody><tr><td><strong>è§’è‰²</strong>ã€Œä½ æ˜¯è°ƒåº¦åŠ©æ‰‹ã€</td><td>è®©æ¨¡å‹åªåšã€ŒäºŒé€‰ä¸€ã€å†³ç­–ï¼Œä¸è¶Šæƒå»è§£é‡Šæˆ–ç”Ÿæˆä»£ç </td><td>æ¨¡å‹å¯èƒ½æ—¢è°ƒå·¥å…·åˆè‡ªå·±å•°å—¦ä¸€å¤§æ®µï¼Œæˆ–å»ã€ŒçŒœã€ç”¨æˆ·æ„å›¾æ—¶è¾“å‡ºé•¿æ–‡</td></tr><tr><td><strong>ä»»åŠ¡</strong>ã€Œæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šè¦ä¸è¦æ‰§è¡Œä»£ç ï¼Œå¹¶åªè°ƒç”¨ä¸€ä¸ªå·¥å…·ã€</td><td>æ˜ç¡®è¾“å‡ºå½¢æ€ï¼šåªäº§ç”Ÿä¸€æ¬¡ tool_callsï¼Œä¸”åªé€‰ä¸€ä¸ªå·¥å…·</td><td>å¯èƒ½åŒæ—¶è°ƒ sandbox å’Œ direct_answerï¼Œä¸‹æ¸¸éš¾ä»¥å¤„ç†ï¼›æˆ–å¤šæ¬¡è°ƒç”¨å¢åŠ å»¶è¿Ÿ</td></tr><tr><td><strong>è§„åˆ™ 1</strong>ã€Œéœ€è¦æ‰§è¡Œä»£ç /æ“ä½œæ–‡ä»¶æ—¶ â†’ è°ƒç”¨ sandboxï¼Œæ•´å¥æŒ‡ä»¤åŸæ ·ä¼ å…¥ã€</td><td>ä¸ Tool çš„ <code>name: "sandbox"</code> ä¸€è‡´ï¼›ä¸¾ä¾‹ï¼ˆåˆ›å»º/ä¿®æ”¹/åˆ é™¤æ–‡ä»¶ã€ç”Ÿæˆ HTMLã€æ‰¹é‡é‡å‘½åç­‰ï¼‰å¸®åŠ©æ¨¡å‹åˆ¤æ–­ã€Œä½•æ—¶ç®—éœ€è¦åŠ¨æ–‡ä»¶ã€</td><td>æ¨¡å‹å®¹æ˜“åœ¨çº¯é—®ç­”æ—¶ä¹Ÿè°ƒ sandboxï¼Œæˆ–æŠŠæŒ‡ä»¤æ”¹å†™æˆè‡ªå·±çš„è¯å¯¼è‡´è¯­ä¹‰æ¼‚ç§»</td></tr><tr><td><strong>è§„åˆ™ 2</strong>ã€Œçº¯é—®ç­”æ—¶ â†’ è°ƒç”¨ direct_answerï¼Œanswer å‚æ•° 1ï½3 å¥è¯ã€</td><td>ä¸ Tool çš„ <code>name: "direct_answer"</code> å’Œ schema é‡Œçš„ <code>answer</code> ä¸€è‡´ï¼›çº¦æŸé•¿åº¦ä¾¿äºç»ˆç«¯å±•ç¤º</td><td>çº¯é—®ç­”æ—¶æ¨¡å‹å¯èƒ½è°ƒ sandbox æˆ–è¾“å‡ºè¿‡é•¿ï¼Œå½±å“ä½“éªŒå’Œ token</td></tr><tr><td><strong>è§„åˆ™ 3</strong>ã€Œåªè°ƒç”¨ä¸€ä¸ªå·¥å…·ï¼Œä¸è¦è¾“å‡ºè¿‡é•¿æ–‡æœ¬ã€</td><td>å¼ºåŒ–ã€Œåªé€‰ä¸€ä¸ªã€å’Œã€Œä¸é™„å¸¦é•¿æ–‡ã€ï¼Œé¿å…æ¨¡å‹åœ¨ tool_calls ä¹‹å¤–å†è¾“å‡ºå¤§æ®µè¯´æ˜</td><td>å®¹æ˜“å‡ºç°ã€Œè°ƒäº†å·¥å…·åˆè¾“å‡ºå¥½å‡ æ®µè¯ã€æˆ–ä¸€æ¬¡å¤šä¸ª tool_calls</td></tr></tbody></table>
<p>æ€»ç»“ï¼šè°ƒåº¦æç¤ºè¯çš„æ ¸å¿ƒæ˜¯<strong>è§’è‰²å•ä¸€ï¼ˆè°ƒåº¦ï¼‰ã€ä»»åŠ¡æ¸…æ™°ï¼ˆäºŒé€‰ä¸€ï¼‰ã€è§„åˆ™ä¸ Tool çš„ name/schema ä¸€ä¸€å¯¹åº”</strong>ï¼Œè¿™æ ·æ¨¡å‹æ‰ä¼šç¨³å®šåœ°ã€Œåªé€‰ä¸€ä¸ªå·¥å…·ã€ä¼ å¯¹å‚æ•°ã€ã€‚</p>
<hr/>
<h5 data-id="heading-38">7.6.2 æ²™ç®±ç¯å¢ƒè¯´æ˜ï¼ˆprompt.tsï¼šSANDBOX_SCHEMA / getSandboxPromptMarkdownï¼‰</h5>
<p><strong>ä½œç”¨</strong>ï¼šåœ¨æ²™ç®±å·¥å…·å†…éƒ¨ï¼ŒæŠŠã€Œæ²™ç®±é‡Œæœ‰å“ªäº›å…¨å±€å¯¹è±¡/å‡½æ•°ã€æ€ä¹ˆç”¨ã€å†™æˆ Markdownï¼ˆæˆ– JSONï¼‰ï¼Œé€šè¿‡ <code>getSandboxPromptContext("markdown")</code> æ‹¼è¿› <strong>SANDBOX_SYSTEM_PROMPT</strong> çš„å‰åŠéƒ¨åˆ†ï¼Œè®©ç”Ÿæˆä»£ç çš„é‚£æ¬¡æ¨¡å‹<strong>åªä½¿ç”¨è¿™äº› API</strong>ï¼Œä¸å†™ <code>require('fs')</code>ã€<code>require('path')</code> ç­‰ï¼ˆæ²™ç®±é‡Œæ²¡æœ‰åŸç”Ÿ requireï¼‰ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</strong>ï¼š</p>
<ul>
<li><strong>æŒ‰ç±»åˆ«åˆ†å—</strong>ï¼ˆNode å†…ç½®ã€å¼‚æ­¥ã€Web æ¡†æ¶ã€å­è¿›ç¨‹ã€ä¾¿æ· APIï¼‰ï¼šæ¨¡å‹æŒ‰ã€Œè¦æ‰¾ä»€ä¹ˆèƒ½åŠ›ã€å¿«é€Ÿå®šä½ï¼Œå‡å°‘å¹»è§‰ï¼ˆä¾‹å¦‚å»ç”¨æœªæš´éœ²çš„ APIï¼‰ã€‚</li>
<li><strong>å†™æ¸…é»˜è®¤æ“ä½œç›®å½•</strong>ã€Œé»˜è®¤ä½¿ç”¨å½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ï¼ˆå³ __workspaceï¼‰ï¼›è·¯å¾„ç”¨ç›¸å¯¹è·¯å¾„ã€ï¼šé¿å…æ¨¡å‹ç”Ÿæˆç»å¯¹è·¯å¾„æˆ–å‡è®¾åˆ«çš„ cwdï¼Œå¯¼è‡´æ‰§è¡Œæ—¶æŠ¥ã€Œæ–‡ä»¶ä¸å­˜åœ¨ã€ã€‚</li>
<li><strong>ä¾¿æ· API ç”¨è¡¨æ ¼åˆ—å‡º</strong>ï¼ˆcreateFileã€readFileã€listDirã€renameã€remove ç­‰ï¼‰ï¼šè¡¨æ ¼æ¯”å¤§æ®µæ–‡å­—æ›´åˆ©äºæ¨¡å‹ã€ŒæŒ‰åé€‰ç”¨ã€ï¼Œä¸”ä¸ <code>common.ts</code> é‡ŒçœŸå®æš´éœ²çš„å‡½æ•°ä¸€è‡´ï¼›å¯¹æ˜“é”™ç‚¹ï¼ˆå¦‚ã€Œæ”¹æ–‡ä»¶åæ—¶ç”¨ renameï¼Œä¸è¦åª createFile æ–°è·¯å¾„ã€ï¼‰å•ç‹¬å†™ä¸€å¥ï¼Œå‡å°‘åŒä¸€å†…å®¹ä¸¤ä»½æ–‡ä»¶ã€‚</li>
<li><strong>å¯åŠ¨æœåŠ¡ã€ä¿®æ”¹æ–‡ä»¶åç­‰å•ç‹¬å¼ºè°ƒ</strong>ï¼šå› ä¸ºæ¨¡å‹å¸¸çŠ¯ã€Œåªç”Ÿæˆæ–‡ä»¶ä¸ listenã€æˆ–ã€Œåª createFile æ–°è·¯å¾„ä¸åˆ æ—§æ–‡ä»¶ã€çš„é”™ï¼Œæ‰€ä»¥åœ¨ç¯å¢ƒè¯´æ˜é‡Œå°±çº¦æŸå¥½ï¼Œæ¯”åªåœ¨åé¢ã€Œè¦æ±‚ã€é‡Œå†™æ›´é†’ç›®ã€‚</li>
</ul>
<p>å¯¹åº”ä»£ç ï¼š<code>src/bin/langchain/sandbox/prompt.ts</code> ä¸­çš„ <strong>SANDBOX_SCHEMA</strong>ï¼ˆJSON åŒ–é…ç½®ï¼‰ã€<strong>getSandboxPromptMarkdown()</strong>ï¼ˆç”Ÿæˆç»™æ¨¡å‹çœ‹çš„ Markdownï¼‰ï¼›å·¥å…·é‡Œç”¨ <strong>getSandboxPromptContext("markdown")</strong> å–è¿™æ®µï¼Œå†æ‹¼ä¸Šä¸‹é¢çš„ã€Œè¦æ±‚ã€éƒ¨åˆ†ã€‚</p>
<hr/>
<h5 data-id="heading-39">7.6.3 æ²™ç®±ä»£ç ç”Ÿæˆè§„åˆ™ï¼ˆSANDBOX_SYSTEM_PROMPT ååŠéƒ¨åˆ†ï¼‰</h5>
<p>åœ¨ã€Œæ²™ç®±ç¯å¢ƒè¯´æ˜ã€ä¹‹åï¼Œå·¥å…·é‡Œæ‹¼æ¥çš„<strong>è¦æ±‚</strong>ï¼ˆ<code>src/bin/langchain/tools/sandbox.ts</code> ä¸­çš„ SANDBOX_SYSTEM_PROMPTï¼‰å¦‚ä¸‹ï¼Œå¹¶è¯´æ˜<strong>æ¯æ¡ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</strong>ï¼š</p>
<pre><code class="hljs language-text" lang="text">---
è¯·æ ¹æ®ç”¨æˆ·çš„è‡ªç„¶è¯­è¨€æŒ‡ä»¤ï¼Œç”Ÿæˆä¸€æ®µå¯åœ¨ä¸Šè¿°æ²™ç®±ä¸­æ‰§è¡Œçš„ JavaScript ä»£ç ã€‚
è¦æ±‚ï¼š
1. åªè¾“å‡ºä»£ç ï¼Œä¸è¦è§£é‡Šæˆ– markdown æ ‡é¢˜ã€‚
2. ä»£ç ä¸­åªèƒ½ä½¿ç”¨ä¸Šæ–‡åˆ—å‡ºçš„å…¨å±€å¯¹è±¡å’Œå‡½æ•°ã€‚
3. è‹¥éœ€è¦è¿”å›ç»“æœç»™ç”¨æˆ·ï¼Œè¯·ç”¨ return æˆ– console.logã€‚
4. å¯ä»¥åŒ…åœ¨ ```js ... ``` é‡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¾“å‡ºè£¸ä»£ç ã€‚
5. å¦‚æœä½ è®¤ä¸ºæ‰§è¡Œåæœ‰é‡å¤§é”™è¯¯è¯·ç›´æ¥è¿”å› "æ‰§è¡Œå¤±è´¥"ã€‚
6. **é»˜è®¤æ“ä½œç›®å½•**ï¼šå¦‚æœç”¨æˆ·æ²¡æœ‰æŒ‡å®šåœ¨å“ªä¸ªç›®å½•æ“ä½œï¼Œé»˜è®¤ä½¿ç”¨å½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ï¼ˆå³ __workspaceï¼‰ï¼›è·¯å¾„ç”¨ç›¸å¯¹è·¯å¾„å¦‚ '.' æˆ– 'æ–‡ä»¶å' å³å¯ã€‚
7. **å¯åŠ¨æœåŠ¡å‹é¡¹ç›®æ—¶**ï¼šå°½é‡åœ¨æ²™ç®±å†…å®Œæˆï¼Œå•æ®µä»£ç ä¸­å®Œæˆåº”ç”¨åˆ›å»ºã€è·¯ç”±ã€app.listen ç­‰ï¼Œä¸è¦åªç”Ÿæˆæ–‡ä»¶è®©ç”¨æˆ·è‡ªå·±è¿è¡Œæˆ–ä¾èµ–æ²™ç®±å¤–çš„æ­¥éª¤ï¼›ç”¨ app.listen(port, () =&gt; console.log('http://localhost:' + port)) æ‰“å°åœ°å€ï¼Œä»£ç æœ«å°¾ä¸è¦ returnã€‚
8. **è‹¥æœ¬æ¬¡ç”Ÿæˆçš„ä»£ç ä¼šå¯åŠ¨ HTTP æœåŠ¡**ï¼ˆå¦‚ Koa/Express çš„ app.listenï¼‰ï¼Œè¯·åœ¨ä»£ç å—åå•ç‹¬ä¸€è¡Œå†™ __IS_HTTP_SERVICE__ï¼Œä»¥ä¾¿å®¿ä¸»è¿›ç¨‹æŒ‚èµ·ï¼ˆç”¨æˆ· Ctrl+C åœæ­¢ï¼‰ã€‚
9. **ä¿®æ”¹æ–‡ä»¶åæˆ–æ ¼å¼æ—¶**ï¼šç”¨ rename(oldPath, newPath) é‡å‘½åï¼Œæˆ–å…ˆ readFile å† createFile æ–°è·¯å¾„å remove åŸæ–‡ä»¶ï¼›ä¸è¦åª createFile æ–°è·¯å¾„è€Œä¿ç•™åŸæ–‡ä»¶ï¼Œé¿å…åŒä¸€å†…å®¹æœ‰ä¸¤ä»½ã€‚
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™</strong>ï¼š</p>























































<table><thead><tr><th>æ¡</th><th>ç›®çš„</th><th>ä¸è¿™ä¹ˆå†™çš„åæœ</th></tr></thead><tbody><tr><td><strong>1</strong> åªè¾“å‡ºä»£ç ï¼Œä¸è¦è§£é‡Šæˆ– markdown æ ‡é¢˜</td><td>ä¾¿äºä»å›å¤é‡Œç¨³å®šè§£æå‡ºã€Œä¸€æ®µä»£ç ã€ï¼›è§£æé€»è¾‘ä¾èµ–ã€Œè¦ä¹ˆ ```js å—è¦ä¹ˆè£¸ä»£ç ã€</td><td>æ¨¡å‹è¾“å‡ºå¤§æ®µè¯´æ˜ + ä»£ç ï¼Œè§£æå®¹æ˜“å–é”™æˆ–å–åˆ°è§£é‡Šæ–‡æœ¬</td></tr><tr><td><strong>2</strong> åªèƒ½ä½¿ç”¨ä¸Šæ–‡åˆ—å‡ºçš„å…¨å±€å¯¹è±¡å’Œå‡½æ•°</td><td>ä¸ prompt å‰åŠéƒ¨åˆ†ã€Œæ²™ç®±ç¯å¢ƒè¯´æ˜ã€ä¸€è‡´ï¼Œé˜²æ­¢ç”¨ <code>require('fs')</code> ç­‰æ²™ç®±å†…ä¸å­˜åœ¨çš„ä¸œè¥¿</td><td>ç”Ÿæˆçš„ä»£ç åœ¨ vm2 é‡ŒæŠ¥ <code>require is not defined</code> æˆ–è®¿é—®æœªæš´éœ² API æŠ¥é”™</td></tr><tr><td><strong>3</strong> è¿”å›ç»“æœç”¨ return æˆ– console.log</td><td>å®¿ä¸»é€šè¿‡ IIFE çš„è¿”å›å€¼æˆ– stdout æ‹¿ç»“æœï¼›æ˜ç¡®ä¸¤ç§å‡ºå£ï¼Œæ¨¡å‹ä¸ä¼šåªå†™ä¸­é—´å˜é‡ä¸è¾“å‡º</td><td>ç”¨æˆ·çœ‹ä¸åˆ°æ‰§è¡Œç»“æœï¼Œæˆ–è§£æä¸åˆ°è¿”å›å€¼</td></tr><tr><td><strong>4</strong> å¯ä»¥åŒ…åœ¨ ```js é‡Œä¹Ÿå¯ä»¥è£¸ä»£ç </td><td>è§£ææ—¶ä¸¤ç§éƒ½æ”¯æŒï¼ˆparseCodeFromResponseï¼‰ï¼Œç»™æ¨¡å‹å®¹é”™ç©ºé—´</td><td>è‹¥å¼ºåˆ¶åªæ¥å—ä¸€ç§ï¼Œæ¨¡å‹æœ‰æ—¶ä¼šé€‰å¦ä¸€ç§å¯¼è‡´è§£æå¤±è´¥</td></tr><tr><td><strong>5</strong> è®¤ä¸ºæœ‰é‡å¤§é”™è¯¯æ—¶ç›´æ¥è¿”å› "æ‰§è¡Œå¤±è´¥"</td><td>é¿å…æ¨¡å‹ç¡¬ç”Ÿæˆæ˜æ˜¾ä¼šæŠ¥é”™çš„ä»£ç ï¼Œè®©å·¥å…·å±‚ç›´æ¥è¿”å›å¯è¯»æç¤º</td><td>å®¹æ˜“å¾—åˆ°ä¸€æ®µå¿…ç„¶æŠ¥é”™çš„ä»£ç ï¼Œç”¨æˆ·ä½“éªŒå·®</td></tr><tr><td><strong>6</strong> é»˜è®¤æ“ä½œç›®å½• __workspaceï¼Œè·¯å¾„ç”¨ç›¸å¯¹è·¯å¾„</td><td>ä¸ prompt å‰åŠéƒ¨åˆ†ä¸€è‡´ï¼›å’Œ common.ts é‡Œ createSandbox çš„ root å¯¹é½</td><td>æ¨¡å‹ç”Ÿæˆ /tmp/xxx æˆ–å…¶å®ƒç»å¯¹è·¯å¾„ï¼Œåœ¨æ²™ç®±é‡Œè·¯å¾„ä¸å¯¹</td></tr><tr><td><strong>7</strong> å¯åŠ¨æœåŠ¡æ—¶åœ¨æ²™ç®±å†…å®Œæˆ listenï¼Œä¸è¦åªç”Ÿæˆæ–‡ä»¶</td><td>ç”¨æˆ·è¯´ã€Œèµ·ä¸€ä¸ª Koa æœåŠ¡ã€æ—¶æœŸæœ›ç›´æ¥èƒ½è®¿é—®ï¼Œè€Œä¸æ˜¯å†æ‰‹åŠ¨è¿è¡Œ</td><td>åªç”Ÿæˆ app.js è®©ç”¨æˆ·è‡ªå·± node app.jsï¼Œä¸ç¬¦åˆã€Œä¸€æ¡æŒ‡ä»¤å®Œæˆã€çš„é¢„æœŸ</td></tr><tr><td><strong>8</strong> HTTP æœåŠ¡æ—¶åœ¨ä»£ç å—åå†™ <strong>IS_HTTP_SERVICE</strong></td><td>å·¥å…·å’Œå‘½ä»¤å±‚ç”¨è¯¥æ ‡è®°åˆ¤æ–­æ˜¯å¦æŒ‚èµ·è¿›ç¨‹ï¼ˆä¸é€€å‡ºï¼‰ï¼Œå¦åˆ™æœåŠ¡ä¼šç«‹åˆ»é€€å‡º</td><td>å¯åŠ¨çš„æœåŠ¡ä¸€å¯åŠ¨å°±é€€å‡ºï¼Œç”¨æˆ·æ— æ³•è®¿é—®</td></tr><tr><td><strong>9</strong> æ”¹æ–‡ä»¶åç”¨ rename æˆ– è¯»â†’å†™æ–°â†’åˆ æ—§</td><td>ä¸ç¯å¢ƒè¯´æ˜é‡Œã€Œä¸è¦åª createFile æ–°è·¯å¾„ã€ä¸€è‡´ï¼Œé¿å…åŒä¸€å†…å®¹ä¸¤ä»½æ–‡ä»¶</td><td>ç”¨æˆ·è¯´ã€ŒæŠŠ a.txt æ”¹æˆ b.txtã€æ—¶ç”Ÿæˆä¸¤ä¸ªæ–‡ä»¶ï¼Œè¯­ä¹‰é”™è¯¯</td></tr></tbody></table>
<p>æ€»ç»“ï¼šå‰åŠéƒ¨åˆ†ï¼ˆprompt.tsï¼‰è´Ÿè´£<strong>èƒ½åŠ›è¾¹ç•Œä¸ç”¨æ³•çº¦å®š</strong>ï¼ŒååŠéƒ¨åˆ†ï¼ˆå·¥å…·é‡Œæ‹¼æ¥ï¼‰è´Ÿè´£<strong>è¾“å‡ºæ ¼å¼ã€é»˜è®¤ç›®å½•ã€HTTP æœåŠ¡ã€é‡å‘½åç­‰æ˜“é”™çº¦æŸ</strong>ï¼›ä¸¤æ®µåˆåœ¨ä¸€èµ·ï¼Œæ¨¡å‹æ‰èƒ½ç¨³å®šç”Ÿæˆã€Œå¯è§£æã€å¯æ‰§è¡Œã€è¡Œä¸ºç¬¦åˆé¢„æœŸã€çš„æ²™ç®±ä»£ç ã€‚</p>
<h4 data-id="heading-40">7.7 æ²™ç®±ç¯å¢ƒä¸æ‰§è¡Œå¼•æ“</h4>
<ul>
<li><strong>ç¯å¢ƒå®šä¹‰</strong>ï¼ˆ<code>src/bin/langchain/sandbox/common.ts</code>ï¼‰ï¼š<strong>createSandbox(workspaceRoot)</strong> è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å« <strong>vm2</strong> æ‰€éœ€çš„ <strong>sandbox</strong> å…¨å±€å˜é‡â€”â€”å¦‚ <code>__workspace</code>ã€<code>fs</code>/<code>path</code>/<code>process</code>/<code>os</code>/<code>Buffer</code>/<code>util</code>/<code>console</code>/<code>URL</code>ã€<code>Promise</code>/<code>setTimeout</code>ã€<code>Koa</code>/<code>koaRouter</code>ã€<code>child_process.execSync</code>/<code>spawnSync</code>ï¼Œä»¥åŠä¾¿æ·æ–¹æ³• <strong>createFile / readFile / listDir / rename / remove / copy / move / stat / listFilesRecursive / globFiles / requireFromWorkspace</strong> ç­‰ã€‚è·¯å¾„æœªæŒ‡å®šæ—¶é»˜è®¤ä¸ºå½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ï¼ˆå³ <code>__workspace</code>ï¼‰ã€‚</li>
<li><strong>æ‰§è¡Œ</strong>ï¼ˆ<code>src/bin/langchain/sandbox/index.ts</code>ï¼‰ï¼šä½¿ç”¨ <strong>vm2</strong> çš„ <code>VM</code>ï¼ŒæŠŠä¸Šè¿° sandbox å¯¹è±¡ä¼ å…¥ï¼›ä¸ºæ”¯æŒã€Œé¡¶å±‚ returnã€ï¼Œå°†ç”¨æˆ·ä»£ç åŒ…æˆ <strong>IIFE</strong> å†æ‰§è¡Œï¼š</li>
</ul>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> wrapped = <span class="hljs-string">`(function() {\n<span class="hljs-subst">${code}</span>\n})()`</span>;
<span class="hljs-keyword">const</span> result = vm.<span class="hljs-title function_">run</span>(wrapped);
<span class="hljs-keyword">return</span> result <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Promise</span> ? <span class="hljs-keyword">await</span> result : result;
</code></pre>
<p>è¿™æ ·ç”Ÿæˆçš„ä»£ç é‡Œå¯ä»¥ç›´æ¥ <code>return ...</code>ï¼Œè¿”å›å€¼ä¼šäº¤ç»™å‘½ä»¤å±‚å±•ç¤ºï¼›è‹¥ return çš„æ˜¯ Promiseï¼Œä¼š await åå†è¿”å›ã€‚</p>
<ul>
<li><strong>æç¤ºè¯ä¸ API è¯´æ˜</strong>ï¼ˆ<code>src/bin/langchain/sandbox/prompt.ts</code>ï¼‰ï¼š<strong>SANDBOX_SCHEMA</strong> æè¿°æ²™ç®±å†…æ‰€æœ‰å…¨å±€å¯¹è±¡å’Œå‡½æ•°çš„ç±»å‹ã€å‚æ•°ã€ç¤ºä¾‹ï¼›<strong>getSandboxPromptMarkdown()</strong> å°†å…¶è½¬æˆ Markdown è¡¨æ ¼å’Œåˆ—è¡¨ï¼Œæ³¨å…¥åˆ° <code>SANDBOX_SYSTEM_PROMPT</code>ï¼Œä½¿æ¨¡å‹åªä½¿ç”¨è¿™äº› API ç”Ÿæˆä»£ç ï¼Œé¿å…ä½¿ç”¨æœªæš´éœ²çš„ Node æˆ–æµè§ˆå™¨ APIã€‚</li>
</ul>
<h4 data-id="heading-41">7.8 å°ç»“</h4>





























<table><thead><tr><th>æ¨¡å—</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><strong>sandbox å‘½ä»¤</strong></td><td>è§£æ <code>st sandbox &lt;æŒ‡ä»¤&gt;</code>ï¼Œç”¨è°ƒåº¦ Agent + bindTools åœ¨ <code>sandbox</code> / <code>direct_answer</code> é—´é€‰æ‹©ï¼Œå¹¶å¾ªç¯å¤„ç† tool_callsï¼Œç›´åˆ°æ¨¡å‹ä¸å†è°ƒç”¨å·¥å…·ï¼›æ£€æµ‹ HTTP æœåŠ¡æ ‡è®°åæŒ‚èµ·è¿›ç¨‹ã€‚</td></tr><tr><td><strong>sandboxTool</strong></td><td>æ ¹æ®ç”¨æˆ·æŒ‡ä»¤è°ƒç”¨æ¨¡å‹ç”Ÿæˆæ²™ç®±ä»£ç  â†’ Acorn æ ¡éªŒ â†’ runInSandbox æ‰§è¡Œ â†’ å°†ç»“æœæˆ–é”™è¯¯ä»¥ ToolMessage å½¢å¼è¿”å›ã€‚</td></tr><tr><td><strong>answerTool</strong></td><td>çº¯é—®ç­”æ—¶ç”±æ¨¡å‹å¡«å…¥ answerï¼ŒåŸæ ·è¿”å›ç»™ç”¨æˆ·ã€‚</td></tr><tr><td><strong>createSandbox / runInSandbox</strong></td><td>æä¾› vm2 æ²™ç®±å…¨å±€ç¯å¢ƒï¼ˆå« Node ä¸ä¾¿æ·æ–‡ä»¶ APIï¼‰ï¼ŒIIFE åŒ…è£¹æ‰§è¡Œå¹¶æ”¯æŒ return/Promiseã€‚</td></tr><tr><td><strong>prompt ä¸ SANDBOX_SCHEMA</strong></td><td>æŠŠæ²™ç®±èƒ½åŠ›æè¿°æˆ Markdown/JSONï¼Œçº¦æŸæ¨¡å‹åªç”Ÿæˆåˆè§„ã€å¯æ‰§è¡Œçš„ä»£ç ã€‚</td></tr></tbody></table>
<p>æ•´ä½“ä¸Šï¼Œè¿™å°±æ˜¯ä¸€ä¸ªã€Œ<strong>è‡ªç„¶è¯­è¨€ â†’ è°ƒåº¦ Agentï¼ˆTool äºŒé€‰ä¸€ï¼‰â†’ æ²™ç®±å·¥å…·å†…å†è°ƒæ¨¡å‹ç”Ÿæˆä»£ç  â†’ è¯­æ³•æ ¡éªŒ â†’ vm2 æ‰§è¡Œ â†’ ç»“æœå›ä¼ </strong>ã€çš„é—­ç¯ï¼Œç”¨åˆ°çš„ LangChain æ¦‚å¿µåŒ…æ‹¬ <strong>Toolã€bindToolsã€SystemMessage/HumanMessage/AIMessage/ToolMessageã€model.invoke</strong>ï¼Œå¯¹åº”å®˜ç½‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Ftools%2F" target="_blank" title="https://js.langchain.com/docs/concepts/tools/" ref="nofollow noopener noreferrer">Tools</a> ä¸ <a href="https://link.juejin.cn?target=https%3A%2F%2Fjs.langchain.com%2Fdocs%2Fconcepts%2Fmessages%2F" target="_blank" title="https://js.langchain.com/docs/concepts/messages/" ref="nofollow noopener noreferrer">Messages</a> çš„ç”¨æ³•ã€‚</p>
<hr/>
<h3 data-id="heading-42">å…«ã€æç¤ºè¯å·¥ç¨‹ï¼šå¦‚ä½•å†™å¥½æç¤ºè¯</h3>
<p>å‰é¢æåˆ°çš„ç¼–æ’ã€RAGã€æ²™ç®±ç­‰ï¼Œæœ€ç»ˆéƒ½è¦é€šè¿‡ã€Œ<strong>å’Œæ¨¡å‹è¯´æ¸…æ¥šè¦åšä»€ä¹ˆ</strong>ã€æ‰èƒ½ç”Ÿæ•ˆï¼Œè¿™éƒ¨åˆ†å°±æ˜¯<strong>æç¤ºè¯å·¥ç¨‹ï¼ˆPrompt Engineeringï¼‰</strong>ã€‚ä¸‹é¢ç”¨é€šä¿—æ–¹å¼è¯´æ˜å…¶é‡è¦æ€§ï¼Œå¹¶ç»™å‡ºä¸€å¥—å¯è½åœ°çš„ä¹¦å†™åŸåˆ™ï¼Œä¾¿äºåœ¨ä¸šåŠ¡é‡Œç»Ÿä¸€è§„èŒƒã€å‡å°‘æ— æ•ˆè°ƒç”¨ã€‚</p>
<h4 data-id="heading-43">8.1 ä¸ºä»€ä¹ˆæç¤ºè¯é‡è¦</h4>
<p>æ¨¡å‹æœ¬èº«ä¸ä¼šã€Œä¸»åŠ¨çŸ¥é“ã€ä¸šåŠ¡è§„åˆ™ã€è¾“å‡ºæ ¼å¼æˆ–è¾¹ç•Œæ¡ä»¶ï¼Œè¿™äº›éƒ½éœ€è¦é€šè¿‡**è¾“å…¥æ–‡æœ¬ï¼ˆæç¤ºè¯ï¼‰**æ˜¾å¼å‘Šè¯‰å®ƒã€‚æç¤ºè¯å†™å¾—å¥½ï¼Œæ¨¡å‹æ›´å®¹æ˜“ï¼š</p>
<ul>
<li><strong>åšå¯¹äº‹</strong>ï¼šç†è§£ä»»åŠ¡æ„å›¾ã€çº¦æŸå’Œä¼˜å…ˆçº§ï¼Œå‡å°‘ç­”éæ‰€é—®æˆ–è¶Šæƒè¡Œä¸ºã€‚</li>
<li><strong>å‡ºå¯¹æ ¼å¼</strong>ï¼šä¾¿äºä¸‹æ¸¸è§£æï¼ˆå¦‚ JSONã€è¡¨æ ¼ã€ä»£ç å—ï¼‰ï¼Œå‡å°‘äºŒæ¬¡æ¸…æ´—ã€‚</li>
<li><strong>æ§åˆ¶æˆæœ¬ä¸å»¶è¿Ÿ</strong>ï¼šçº¦æŸé•¿åº¦ã€ç¦æ­¢å†—é•¿è§£é‡Šï¼Œæœ‰åˆ©äº token ä¸å“åº”æ—¶é—´å¯æ§ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œ<strong>æç¤ºè¯æ˜¯è¿æ¥ã€Œä¸šåŠ¡éœ€æ±‚ã€å’Œã€Œæ¨¡å‹èƒ½åŠ›ã€çš„æ¥å£</strong>ï¼›å†™å¥½æç¤ºè¯ï¼Œæ˜¯è½åœ° AI åŠŸèƒ½æ—¶æ€§ä»·æ¯”å¾ˆé«˜çš„æŠ•å…¥ã€‚</p>
<h4 data-id="heading-44">8.2 å¦‚ä½•å†™å¥½æç¤ºè¯ï¼šå‡ æ¡å¯æ“ä½œåŸåˆ™</h4>
<p>å½’çº³ä¸º<strong>è§’è‰²ã€ä»»åŠ¡ã€çº¦æŸã€æ ¼å¼ã€ç¤ºä¾‹</strong>äº”ç±»è¦ç´ ï¼ŒæŒ‰éœ€ç»„åˆå³å¯ã€‚</p>



































<table><thead><tr><th>è¦ç´ </th><th>è¯´æ˜</th><th>ç¤ºä¾‹ï¼ˆä¸€å¥è¯ï¼‰</th></tr></thead><tbody><tr><td><strong>è§’è‰²</strong></td><td>è®©æ¨¡å‹è¿›å…¥ã€Œè°åœ¨è¯´è¯ã€çš„è®¾å®šï¼Œè¡Œä¸ºæ›´ä¸€è‡´</td><td>ã€Œä½ æ˜¯è°ƒåº¦åŠ©æ‰‹ã€ã€Œä½ æ˜¯åªç”Ÿæˆä»£ç çš„æ²™ç®±æ‰§è¡Œå™¨ã€</td></tr><tr><td><strong>ä»»åŠ¡</strong></td><td>ç”¨ä¸€å¥è¯è¯´æ¸…ã€Œè¦å¹²ä»€ä¹ˆã€ï¼Œé¿å…æ¨¡ç³Š</td><td>ã€Œæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šè°ƒç”¨ sandbox è¿˜æ˜¯ direct_answerã€ã€Œç”Ÿæˆå¯åœ¨æ²™ç®±ä¸­æ‰§è¡Œçš„ JavaScriptã€</td></tr><tr><td><strong>çº¦æŸ</strong></td><td>æ˜ç¡®ã€Œä¸èƒ½åšä»€ä¹ˆã€ã€Œå¿…é¡»æ€ä¹ˆåšã€ï¼Œå‡å°‘è¶Šç•Œ</td><td>ã€Œåªè¾“å‡ºä»£ç ï¼Œä¸è¦è§£é‡Šã€ã€Œåªèƒ½ä½¿ç”¨ä¸Šæ–‡åˆ—å‡ºçš„å…¨å±€å¯¹è±¡ã€ã€Œå›ç­”æ§åˆ¶åœ¨ 1ï½3 å¥è¯ã€</td></tr><tr><td><strong>æ ¼å¼</strong></td><td>è§„å®šè¾“å‡ºå½¢æ€ï¼Œæ–¹ä¾¿è§£æä¸å±•ç¤º</td><td>ã€Œè¿”å› JSONã€ã€Œç”¨```js ... ``` åŒ…ä½ä»£ç ã€ã€Œè‹¥å¯åŠ¨ HTTP æœåŠ¡è¯·åœ¨ä»£ç å—åå†™ <strong>IS_HTTP_SERVICE</strong>ã€</td></tr><tr><td><strong>ç¤ºä¾‹</strong></td><td>ç»™ 1ï½2 ä¸ªè¾“å…¥è¾“å‡ºæ ·ä¾‹ï¼Œå¤§å¹…æå‡æ ¼å¼ä¸é£æ ¼ä¸€è‡´æ€§</td><td>ã€Œè¾“å…¥ï¼šç”Ÿæˆ index.html â†’ è¾“å‡ºï¼šä»…ä¸€æ®µå¯æ‰§è¡Œä»£ç ã€</td></tr></tbody></table>
<p><strong>ä¹¦å†™ä¹ æƒ¯å»ºè®®</strong>ï¼š</p>
<ul>
<li><strong>å…ˆå†™ã€Œè§’è‰² + ä»»åŠ¡ã€</strong>ï¼Œå†è¡¥çº¦æŸå’Œæ ¼å¼ï¼Œæœ€åéœ€è¦æ—¶åŠ ç¤ºä¾‹ã€‚</li>
<li><strong>ä¸€æ¡æç¤ºè¯åªæœåŠ¡ä¸€ä¸ªç›®æ ‡</strong>ï¼šè°ƒåº¦å°±åªåšè°ƒåº¦ï¼Œç”Ÿæˆä»£ç å°±åªç”Ÿæˆä»£ç ï¼Œé¿å…æ··åœ¨ä¸€èµ·å¯¼è‡´æ¨¡å‹ã€Œä¸çŸ¥é“è¯¥ä¼˜å…ˆå¬å“ªå¥ã€ã€‚</li>
<li><strong>å…³é”®è§„åˆ™ç”¨åŠ ç²—æˆ–ç¼–å·</strong>ï¼Œä¾¿äºæ¨¡å‹æ³¨æ„ï¼ˆå¦‚ã€Œ<strong>åªè°ƒç”¨ä¸€ä¸ªå·¥å…·</strong>ã€ã€Œ3. åªè¾“å‡ºä»£ç ã€ï¼‰ã€‚</li>
<li><strong>è¿­ä»£ä¼˜åŒ–</strong>ï¼šç”¨çœŸå®ç”¨ä¾‹è·‘å‡ è½®ï¼Œçœ‹æ¨¡å‹å¸¸çŠ¯çš„é”™è¯¯ï¼ˆæ¼çº¦æŸã€æ ¼å¼ä¹±ã€è¯å¤ªå¤šï¼‰ï¼Œå†å›å¤´æ”¹æç¤ºè¯è¡¥ä¸€å¥ã€å‡ä¸€å¥ã€‚</li>
</ul>
<h4 data-id="heading-45">8.3 æœ¬æ–‡ä¸­çš„æç¤ºè¯å®è·µï¼ˆå¯¹åº”å…³ç³»ï¼‰</h4>
<ul>
<li><strong>è°ƒåº¦æç¤ºè¯</strong>ï¼ˆä¸ƒã€æ²™ç®±æ’ä»¶ï¼‰<strong>è§’è‰²</strong>ï¼šè°ƒåº¦åŠ©æ‰‹ã€‚<strong>ä»»åŠ¡</strong>ï¼šæ ¹æ®ç”¨æˆ·è¾“å…¥å†³å®šè°ƒç”¨ <code>sandbox</code> è¿˜æ˜¯ <code>direct_answer</code>ã€‚<strong>çº¦æŸ</strong>ï¼šåªè°ƒç”¨ä¸€ä¸ªå·¥å…·ã€ä¸è¦é•¿ç¯‡å¤§è®ºã€‚è¿™æ ·æ¨¡å‹å°±ä¸ä¼šæ—¢è°ƒå·¥å…·åˆè‡ªå·±å•°å—¦ä¸€å¤§æ®µã€‚</li>
<li><strong>æ²™ç®±ä»£ç ç”Ÿæˆæç¤ºè¯****è§’è‰²</strong>ï¼šæ²™ç®±å†…ä»£ç ç”Ÿæˆå™¨ã€‚<strong>ä»»åŠ¡</strong>ï¼šæ ¹æ®ç”¨æˆ·æŒ‡ä»¤ç”Ÿæˆå¯åœ¨ç»™å®šæ²™ç®±ä¸­æ‰§è¡Œçš„ JavaScriptã€‚<strong>çº¦æŸ</strong>ï¼šåªä½¿ç”¨åˆ—å‡ºçš„ APIã€é»˜è®¤ç›®å½•ä¸º <code>__workspace</code>ã€å¯åŠ¨æœåŠ¡æ—¶æ ‡æ³¨ <code>__IS_HTTP_SERVICE__</code>ã€‚<strong>æ ¼å¼</strong>ï¼šå¯åŒ…åœ¨ ```js ... ``` é‡Œæˆ–è£¸ä»£ç ã€‚<strong>ç¤ºä¾‹</strong>ï¼šé€šè¿‡ SANDBOX_SCHEMA / Markdown è¡¨æ ¼æŠŠã€Œæœ‰å“ªäº›å‡½æ•°ã€æ€ä¹ˆç”¨ã€å†™æ¸…æ¥šï¼Œç­‰äºç»™äº†ç»“æ„åŒ–ç¤ºä¾‹ã€‚</li>
<li><strong>æ¸©åº¦ï¼ˆäºŒã€è®¤è¯†æ¨¡å‹ï¼‰</strong>
æ¸©åº¦è™½ä¸æ˜¯ã€Œä¸€å¥è¯æç¤ºè¯ã€ï¼Œä½†å±äº<strong>åŒä¸€ç±»æ§åˆ¶</strong>ï¼šé€šè¿‡å‚æ•°å‘Šè¯‰æ¨¡å‹ã€Œè¦æ›´ç¡®å®šè¿˜æ˜¯æ›´å‘æ•£ã€ã€‚ä»£ç /ç»“æ„åŒ–è¾“å‡ºç”¨ä½æ¸©åº¦ï¼Œåˆ›æ„ç±»ç”¨ç¨é«˜æ¸©åº¦ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯åœ¨ã€Œå†™å¥½ã€å¯¹æ¨¡å‹çš„è¡Œä¸ºçº¦æŸã€‚</li>
</ul>
<h4 data-id="heading-46">8.4 å‚ç…§ï¼šä¸šåŠ¡ä¸­ä½¿ç”¨çš„æç¤ºè¯ç¤ºä¾‹</h4>
<p>ä¸‹é¢æ‘˜å½•å¹¶æ•´ç†ä¸šåŠ¡é‡Œå®é™…ç”¨è¿‡çš„æç¤ºè¯ï¼Œä½œä¸ºã€Œè§’è‰² + ä»»åŠ¡ + çº¦æŸ + æ ¼å¼ + ç¤ºä¾‹ã€çš„å‚ç…§ï¼Œä¾¿äºå¯¹ç…§å‰æ–‡åŸåˆ™åšè¿­ä»£ã€‚</p>
<h5 data-id="heading-47">ç¤ºä¾‹ä¸€ï¼šç”Ÿæˆç®¡ç†åå°é¡µé¢çš„ Promptï¼ˆä½ä»£ç  / è¿è¥è€…æ¨¡å—ï¼‰</h5>
<p><strong>è§’è‰²/ä»»åŠ¡</strong>ï¼šè®© AI åœ¨ã€Œ30% æ¡†æ¶å†…ã€ç”Ÿæˆç®¡ç†åå°é¡µé¢ä»£ç ï¼Œè€Œéå‡­ç©ºåˆ›æ–°ï¼›éœ€æ±‚è¾¹ç•Œã€æ•°æ®æ ¼å¼ã€äº¤äº’èŒƒå¼ç”±äººå·¥å…ˆé”å®šã€‚</p>
<p><strong>çº¦æŸä¸æ ¼å¼</strong>ï¼ˆèŠ‚é€‰ï¼‰ï¼š</p>
<ul>
<li><strong>1.1 é¡¶éƒ¨å¯¼èˆªæ </strong>ï¼šç”¨ el-menuï¼ŒèƒŒæ™¯è‰² #409EFFï¼Œæ–‡å­—ç™½è‰²ï¼Œé€‰ä¸­æ—¶èƒŒæ™¯åŠ æ·± 10%ï¼›å·¦ä¾§é¢„ç•™é¡¹ç›®åç§°æ’æ§½ï¼ˆslot="brand"ï¼‰ï¼›ä¸­é—´èœå•é¡¹é€šè¿‡æ•°ç»„ NavItems æ³¨å…¥ï¼Œç»“æ„ <code>NavItem { name, route, icon? }</code>ï¼›æš´éœ²äº‹ä»¶ @selectã€@menu-clickã€‚Store çš„ module åˆ’åˆ†ã€state å½¢çŠ¶ã€mutation åç”±äººå·¥å…ˆé”å®šï¼ŒAI åªç”Ÿæˆå…·ä½“ CRUD é€»è¾‘ã€‚</li>
<li><strong>1.2 å·¦ä¾§åˆ—è¡¨åŒºå—</strong>ï¼šç‚¹å‡»é«˜äº®ç”¨ class åˆ‡æ¢ï¼ˆ.is-activeï¼‰ï¼›ä¸­é—´å†…å®¹åŒº flex:1 è‡ªé€‚åº”ã€‚</li>
<li><strong>1.3 å·¦ä¸Šè§’æŒ‰é’®ç»„</strong>ï¼šæ·»åŠ æŒ‰é’® el-button + Plus å›¾æ ‡ã€æ–‡å­—ã€Œæ–°å¢ã€ï¼›æœç´¢æ¡† el-input + Search å›¾æ ‡ï¼Œv-model ç»‘å®š keywordï¼Œè§¦å‘ @searchã€‚</li>
<li><strong>1.4 åˆ—è¡¨å®ç°</strong>ï¼šå­—æ®µæ ¡å¯¹ç”±äººå·¥å®Œæˆï¼›AI ç›´æ¥ç”Ÿæˆå›ºå®šåˆ—æ•°çš„ el-tableï¼Œç»™å‡º <code>&lt;el-table-column&gt;</code> éª¨æ¶ï¼Œprop ä¸åç«¯å­—æ®µä¿æŒä¸€è‡´ã€‚</li>
<li><strong>1.5 å°è£… ListTable ç»„ä»¶</strong>ï¼šå¤–éƒ¨ä¼ å…¥ columns: <code>{ key, label, width?, slot? }[]</code>ï¼›å†…éƒ¨ç»´æŠ¤ rendererMapï¼ŒæŒ‰ column.key æ˜ å°„æ¸²æŸ“å‡½æ•°ï¼›æ’æ§½å‘½åè§„åˆ™ <code>table-[key]</code>ï¼Œå¦‚ <code>&lt;template #table-status&gt;</code>ã€‚</li>
</ul>
<p><strong>è¦ç‚¹</strong>ï¼šæŠŠã€Œè¦ç”Ÿæˆä»€ä¹ˆã€ç”¨ä»€ä¹ˆç»„ä»¶ã€æ•°æ®ç»“æ„é•¿ä»€ä¹ˆæ ·ã€å†™æ¸…æ¥šï¼Œæ¨¡å‹åœ¨ç»™å®šæ¡†æ¶å†…å¡«ä»£ç ï¼Œä¾¿äºåç»­äººå·¥æ ¡å¯¹å’Œè”è°ƒã€‚</p>
<h5 data-id="heading-48">ç¤ºä¾‹äºŒï¼šAI æå‡å­¦ä¹ èƒ½åŠ›ï¼ˆè®¾è®¡æ¨¡å¼ + æ³¨é‡Š + å•æµ‹ï¼‰</h5>
<p><strong>è§’è‰²/ä»»åŠ¡</strong>ï¼šç”¨ AI æŠŠã€ŒæŸ¥æ–‡æ¡£ + å†™æ ·æ¿ã€çš„æ—¶é—´çœä¸‹æ¥ï¼Œåœ¨è¾ƒçŸ­æ—¶é—´å†…ç»™å‡ºã€Œå¸¦è®¾è®¡æ¨¡å¼ + æ³¨é‡Š + å•æµ‹æ¨¡æ¿ã€çš„é«˜å¯ç»´æŠ¤ä»£ç ã€‚</p>
<p><strong>çº¦æŸ</strong>ï¼šå…ˆæŒ‡å®šè®¾è®¡æ¨¡å¼ï¼ˆå¦‚ Strategyã€Factoryã€Observerï¼‰ï¼›è¦æ±‚ AI ç”Ÿæˆ TypeScript å®ç°ï¼Œå¹¶é€è¡Œè¡¥å…… JSDoc ä¸å•æµ‹ç”¨ä¾‹ï¼›å¯¹å­˜é‡ä»£ç ï¼Œå¯è®© AI æŒ‰ç›¸åŒæ¨¡å¼åšæ¸è¿›å¼é‡æ„ï¼Œäººå·¥åªåš Code Reviewã€‚</p>
<h5 data-id="heading-49">ç¤ºä¾‹ä¸‰ï¼šLangChain è°ƒç ”ç»“è®ºï¼ˆFunction Calling / Multi-Agent / MCPï¼‰</h5>
<ul>
<li><strong>Function Calling</strong>ï¼šæœ¬åœ°é¢„æ³¨å†Œå‡½æ•°ï¼ŒLLM ä»…è¿”å› JSON å‚æ•°ï¼›æœ¬åœ°æ¡†æ¶è´Ÿè´£åå°„è°ƒç”¨ã€‚LLM æœ¬èº«ä¸æ‹¥æœ‰ã€ä¹Ÿä¸æ‰§è¡Œå‡½æ•°â€”â€”å®ƒåªæ˜¯ã€Œç‚¹å + ä¼ å‚ã€ã€‚</li>
<li><strong>Multi-Agent åä½œ</strong>ï¼šåŒä¸€è¿›ç¨‹å†…å¯å¯å¤šä¸ª Agent å®ä¾‹ï¼Œæ¯ä¸ªå®ä¾‹ system prompt åªèšç„¦å•ä¸€èŒè´£ï¼ˆäº§å“ã€å¼€å‘ã€æµ‹è¯•ï¼‰ï¼›é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—é¡ºåºä¼ é€’ä¸Šä¸‹æ–‡ï¼Œé™ä½å• Agent çš„ä¸Šä¸‹æ–‡é•¿åº¦ä¸å¹»è§‰æ¦‚ç‡ã€‚</li>
<li><strong>MCPï¼ˆModel Context Protocolï¼‰</strong>ï¼šç»Ÿä¸€ã€Œå·¥å…·æè¿° + è°ƒç”¨ã€åè®®ï¼ŒAgent é€šè¿‡ MCP æŠŠå·¥å…·æ¸…å•å‘ç»™ LLMï¼ŒLLM æŒ‰ MCP æ ¼å¼è¿”å›è°ƒç”¨æŒ‡ä»¤ï¼Œæœ¬åœ° SDK å†æ‰§è¡ŒçœŸæ­£çš„ Function Callingã€‚ç±»æ¯”ï¼šAgent æ˜¯é¡¾å®¢ï¼ŒMCP æ˜¯èœå• + ç‚¹å•åè®®ï¼ŒFunction Calling æ˜¯åå¨å®é™…ç‚’èœã€‚</li>
</ul>
<h5 data-id="heading-50">ç¤ºä¾‹å››ï¼šæ™ºèƒ½æ±‡æ€» diff ç”Ÿæˆ commitï¼ˆå·¥ä½œæµæè¿°ï¼‰</h5>
<p><strong>æ•´ä½“æµç¨‹</strong>ï¼ˆä¸€é¡µè®²è§£ç”¨ï¼‰ï¼šè·å– diff ä¿¡æ¯ â†’ ä½¿ç”¨ LangChain çš„ TokenTextSplitter å°†æ–‡æœ¬åˆ‡åˆ†ä¸ºçº¦ 1500 å¤§å°çš„å— â†’ Agent å¯¹ç‰‡æ®µå¹¶å‘å¤„ç†ã€AI æ€»ç»“ â†’ å°†æ¯ä¸ªç‰‡æ®µçš„ç»“æœå†å–‚ç»™ AIï¼Œç”Ÿæˆ JSONï¼ˆgeneralize æè¿°æ–‡æœ¬ã€commitMsg æ ‡å‡†åŒ– commit ä¿¡æ¯ï¼‰â†’ å‘½ä»¤è¡Œç¡®è®¤åæäº¤ã€‚</p>
<p><strong>åˆ†æ­¥è¦ç‚¹</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨ git è·å– diff ä¿¡æ¯ã€‚</li>
<li>ä½¿ç”¨ LangChain çš„ TokenTextSplitter å°†æ–‡æœ¬åˆ‡åˆ†ä¸ºçº¦ 1500 å¤§å°çš„æ¨¡å—ã€‚<strong>ä¸ºä»€ä¹ˆè¦åˆ‡åˆ†</strong>ï¼šä¸€æ¬¡æ•°æ®é‡è¿‡å¤§ï¼Œç›´æ¥ä¸¢ç»™ Agent ç”Ÿæˆé€Ÿåº¦æ…¢ï¼›åˆ‡åˆ†ä¸º chunk åé€šè¿‡ Promise.all å¹¶å‘è¯·æ±‚ï¼Œå‡å°‘ç­‰å¾…æ—¶é—´ã€‚<strong>ä¸ºä»€ä¹ˆä¸é€‰ RAG/å‘é‡åº“</strong>ï¼šä»…å¯¹ diff åšä¸€æ¬¡æ€§æ±‡æ€»ï¼Œå…ˆå­˜å‘é‡åº“å†æ£€ç´¢è¿‡é‡ï¼Œä¸é€‚åˆã€‚</li>
<li>ç”¨æç¤ºè¯è®© AI å¯¹éä»£ç ç‰‡æ®µåšæ–‡å­—æ€§æ€»ç»“ï¼Œå¯¹ä»£ç ç‰‡æ®µè¯»å–å‡½æ•°åå¹¶ç”Ÿæˆå‡½æ•°ç®€è¿°ï¼Œæ”¶é›†æˆæ•°ç»„ã€‚</li>
<li>å°†å¤šä¸ªç‰‡æ®µæ±‡æ€»åçš„ç»“æœå†ä½œä¸ºæç¤ºè¯ä¼ å…¥ AIï¼Œæ•°æ®é‡å°ä¸”èƒ½é€šè¿‡ç±»å‹åŒºåˆ†ã€Œä»£ç ã€ä¸ã€Œæè¿°æ€§æ–‡æœ¬ã€ã€‚</li>
<li>è®© AI ç”¨è¯¥æ•°ç»„ç”Ÿæˆä¸€ä¸ª JSONï¼š<code>generalize</code> ä¸ºæè¿°æ•´ä½“çš„æ•°ç»„ï¼ˆå±•ç¤ºä¸ºè¯¦ç»†é¡¹ï¼‰ï¼Œ<code>commitMsg</code> ä¸ºæ ‡å‡†åŒ– commit ç»“æœï¼›åç»­ç”¨å‡½æ•°ç¡®è®¤å¹¶è°ƒç”¨ git æäº¤ã€‚</li>
</ol>
<p>ä»¥ä¸Šç¤ºä¾‹å¯ä½œä¸ºæ’°å†™ã€Œè§’è‰²ã€ä»»åŠ¡ã€çº¦æŸã€æ ¼å¼ã€ç¤ºä¾‹ã€æ—¶çš„å‚ç…§ï¼ŒæŒ‰ä¸šåŠ¡åœºæ™¯è£å‰ªå³å¯ã€‚</p>
<h4 data-id="heading-51">8.5 å°ç»“</h4>
<p><strong>æç¤ºè¯å·¥ç¨‹</strong>å°±æ˜¯æŠŠã€Œè¦æ¨¡å‹åšä»€ä¹ˆã€ä¸èƒ½åšä»€ä¹ˆã€è¾“å‡ºé•¿ä»€ä¹ˆæ ·ã€è¯´æ¸…æ¥šï¼›ç”¨å¥½<strong>è§’è‰²ã€ä»»åŠ¡ã€çº¦æŸã€æ ¼å¼ã€ç¤ºä¾‹</strong>äº”ç±»è¦ç´ ï¼Œå¹¶åœ¨å®é™…ç”¨ä¾‹ä¸Šå°æ­¥è¿­ä»£ï¼Œå°±èƒ½åœ¨å°‘æ”¹ä»£ç çš„å‰æä¸‹ï¼Œæ˜æ˜¾æå‡æ¨¡å‹è¾“å‡ºçš„å¯ç”¨æ€§å’Œç¨³å®šæ€§ã€‚æˆ‘ä»¬åœ¨è°ƒåº¦ã€æ²™ç®±ã€RAG ç­‰ç¯èŠ‚éƒ½å·²ç»æŒ‰è¿™å¥—æ€è·¯åœ¨å†™æç¤ºè¯ï¼Œåç»­æ–°åŠŸèƒ½ä¹Ÿå¯ä»¥æ²¿ç”¨åŒä¸€å¥—è§„èŒƒã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[NginxåŠ¨é™åˆ†ç¦»å®æˆ˜ï¼šæ€§èƒ½æå‡100å€å…³é”®ï¼]]></title>    <link>https://juejin.cn/post/7602154088476868646</link>    <guid>https://juejin.cn/post/7602154088476868646</guid>    <pubDate>2026-02-03T03:32:11.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602154088476868646" data-draft-id="7602303923139821618" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="NginxåŠ¨é™åˆ†ç¦»å®æˆ˜ï¼šæ€§èƒ½æå‡100å€å…³é”®ï¼"/> <meta itemprop="keywords" content="è¿ç»´"/> <meta itemprop="datePublished" content="2026-02-03T03:32:11.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·525863386919"/> <meta itemprop="url" content="https://juejin.cn/user/4482058220739752"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            NginxåŠ¨é™åˆ†ç¦»å®æˆ˜ï¼šæ€§èƒ½æå‡100å€å…³é”®ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4482058220739752/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·525863386919
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:32:11.000Z" title="Tue Feb 03 2026 03:32:11 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ€è¿‘çœ‹äº†ä¸€ä¸ªå¸–å­ï¼ŒæŠŠè¸©è¿‡çš„å‘ï¼Œç»™å¤§å®¶è¯´ä¸‹ï¼Œ</p>
<pre><code class="hljs language-server" lang="server">        listen 8081;
        #listen       443 ssl;
        server_name _;

#        ssl_certificate      /opt/cert/ssl/yunbei.yanjiamall.cn.pem;
#        ssl_certificate_key  /opt/cert/ssl/yunbei.yanjiamall.cn.key;

        ssl_session_cache    shared:SSL:1m;
        ssl_session_timeout  5m;

        ssl_ciphers  HIGH:!aNULL:!MD5;
        ssl_prefer_server_ciphers  on;
        #é™æ€èµ„æºï¼šæ­£åˆ™åŒ¹é…åç›´æ¥è¯»å–æœ¬åœ°ç›®å½•
        location ~* \.(gif|jpg|jpeg|png|css|js|ico|svg|woff|woff2|ttf|eot)$ {
            root /opt/front/h5/h5/; # æ–°å¢è¿™ä¸€è¡Œï¼ŒæŒ‡å®šé™æ€æ–‡ä»¶å®é™…ç›®å½•
            expires 7d;
            add_header Cache-Control "public, max-age=604800, no-transform";
            try_files $uri =404;
        }

        location / {
            root /opt/front/h5/h5;
            index  index.html index.htm;
            try_files $uri $uri/ /index.html;
        }
        location /app-api/ {
             proxy_redirect off;
             proxy_set_header Host $host;
             proxy_set_header X-Real-IP $remote_addr;
             proxy_set_header X-Forward-For $proxy_add_x_forwarded_for;
             proxy_set_header X-Scheme $scheme;
             proxy_pass http://127.0.0.1:58082;
        }

}

</code></pre>
<p>ç¬¬ä¸€ä¸ªå‘ï¼Œä½ é…ç½®å¥½æ—¶ï¼Œåœ¨æƒ³æ€ä¹ˆéªŒè¯å‘¢ï¼Ÿæˆ‘çœ‹åˆ°å¸–å­æ²¡æœ‰å†™ï¼Œäºæ˜¯å»AIæœç´¢ä¸‹ï¼Œç»™å‡ºä¸‹é¢ç­”æ¡ˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa643012e19a4971ab20bcffdb036674~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTI1ODYzMzg2OTE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694333&amp;x-signature=LSHiH3PFzURcTddRLulnwSd7nsk%3D" alt="image.png" loading="lazy"/>
ç„¶åç¬¬ä¸€æ­¥åŸºç¡€é…ç½®è¯­æ³•æ£€æŸ¥æ˜¯æ²¡æœ‰é—®é¢˜çš„
ä½†æ˜¯åœ¨ã€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆæœ€ç›´è§‚ï¼‰ã€‘æ²¡æœ‰æ‰¾åˆ°
äºæ˜¯ä¹æœ‰å‡ºç°ä¸‹é¢çš„å†…å®¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/947ab5d2ae3b4988a7eec3b7253625be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTI1ODYzMzg2OTE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694333&amp;x-signature=94KUJBeYy%2FuAjsqQ1NjwhMBXAow%3D" alt="image.png" loading="lazy"/>
ç¬¬äºŒä¸ªå‘ï¼Œä½†æ˜¯æµè§ˆå™¨è¿˜æ˜¯æ²¡å‡ºç°<code>Cache-Control</code> å’Œ <code>Expires</code> ç¼“å­˜å¤´
äºæ˜¯ä¹æŠŠnginxé‡å¯ï¼Œå‘½ä»¤å¦‚ä¸‹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fde32b347b44a70ac8cecc4dc2fe15e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTI1ODYzMzg2OTE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694333&amp;x-signature=ZYGais2pQKM8PEz3nATH6G71QZw%3D" alt="image.png" loading="lazy"/>
å‘ç°å¯åŠ¨æœ‰é—®é¢˜ï¼Œå°±è¿›è¡Œä¸€ä¸‹å‘½ä»¤</p>
<pre><code class="hljs language-#" lang="#">pkill -f nginx 
# æ‰‹åŠ¨æŒ‡å®š PID æ–‡ä»¶è·¯å¾„å¯åŠ¨ 
Nginx nginx -c /etc/nginx/nginx.conf -p /run/ 
# æˆ–è€…ç›´æ¥é‡æ–°å¯åŠ¨æœåŠ¡ 
systemctl restart nginx
</code></pre>
<p>ç¬¬ä¸‰ä¸ªå‘ï¼Œä½†æ˜¯æµè§ˆå™¨è¿˜æ˜¯æ²¡å‡ºç°<code>Cache-Control</code> å’Œ <code>Expires</code> ç¼“å­˜å¤´
äºæ˜¯ä¹ï¼Œæƒ³åˆ°äº†ç”¨æ— ç—•å¼æ‰“å¼€ç½‘å€
å¥½äº†å¥½äº†</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0e8d0a65b344d148103c0cd139b777d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3NTI1ODYzMzg2OTE5:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770694333&amp;x-signature=jvfncD1os3cI9HxWq2ebVjxVk78%3D" alt="image.png" loading="lazy"/>
æœ‰å†™çš„ä¸å¥½ï¼Œæˆ–è€…æœ‰å…¶ä»–é—®é¢˜ï¼Œæ¬¢è¿å¤§å®¶ç•™è¨€ï¼Œç‚¹èµï¼Œé©¬å¹´å‘å¤§è´¢~</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸš€ 2026 å¹´ 1 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥]]></title>    <link>https://juejin.cn/post/7602191709388292138</link>    <guid>https://juejin.cn/post/7602191709388292138</guid>    <pubDate>2026-02-03T03:01:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602191709388292138" data-draft-id="7602259669729919003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸš€ 2026 å¹´ 1 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥"/> <meta itemprop="keywords" content="GitHub,äººå·¥æ™ºèƒ½,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T03:01:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸€ç‚¹ä¸€æœ¨"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986187486"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸš€ 2026 å¹´ 1 æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986187486/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸€ç‚¹ä¸€æœ¨
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:01:06.000Z" title="Tue Feb 03 2026 03:01:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¬¢è¿æ¥åˆ° <strong>2026 å¹´ 1 æœˆ <code>GitHub</code> çƒ­é—¨å¼€æºé¡¹ç›®æ’è¡Œæ¦œ</strong>ï¼ æ–°å¹´ä¼Šå§‹ï¼Œå¼€æºç¤¾åŒºç›´æ¥ç”¨è¡ŒåŠ¨å‘Šè¯‰æˆ‘ä»¬ï¼š<strong><code>AI</code> æ­£åœ¨å½»åº•è½åœ°åˆ°ä½ çš„ç”µè„‘ã€æ‰‹æœºå’Œæ—¥å¸¸å·¥ä½œæµä¸­</strong>ã€‚æœ¬æœˆæ¦œå•å‘ˆç°å‡ºéå¸¸æ¸…æ™°çš„ä¸‰å¤§ä¸»çº¿ï¼šæœ¬åœ°åŒ–ä¸éšç§æˆä¸ºç»å¯¹å…±è¯†ã€<code>Claude</code> ç”Ÿæ€å·¥å…·é“¾å¿«é€Ÿé—­ç¯ã€å¤šæ¨¡æ€èƒ½åŠ›ä¸é«˜æ•ˆæ¨ç†æŠ€æœ¯åŒåŒè¿›å…¥æˆç†ŸæœŸã€‚</p>
<p>è¿™åä¸ªé¡¹ç›®å‡ ä¹å…¨éƒ¨å›´ç»•ã€Œè®© <code>AI</code> æ›´è´´è¿‘ç”¨æˆ·ã€æ›´å¯æ§ã€æ›´é«˜æ•ˆã€å±•å¼€ï¼Œä»ä¸ªäººçº§æœ¬åœ°åŠ©æ‰‹åˆ°ä¸“ä¸šé¢†åŸŸ <code>Agent</code>ï¼Œä»å†…å®¹åˆ›ä½œåˆ°åŸºç¡€è®¾æ–½ä¼˜åŒ–ï¼Œå…¨é“¾è·¯è¦†ç›–ã€‚å®ƒä»¬ä¸å†æ˜¯æ¦‚å¿µéªŒè¯ï¼Œè€Œæ˜¯<strong>å¯ä»¥ç«‹åˆ»è£…è¿›å·¥ä½œæµã€ç«‹åˆ»äº§ç”Ÿç”Ÿäº§åŠ›çš„å·¥å…·</strong>ã€‚</p>
<p>ä¸‰å¤§æ ¸å¿ƒè¶‹åŠ¿ä¸€è§ˆï¼š</p>
<ul>
<li><strong>æœ¬åœ°åŒ–ä¸éšç§ä¼˜å…ˆå…¨é¢çˆ†å‘</strong>ï¼š<code>OpenClaw</code>ã€<code>UI-TARS-desktop</code>ã€<code>web-check</code> ç­‰é¡¹ç›®è®©<code>AI</code> å°±åœ¨ä½ è®¾å¤‡ä¸Šæˆä¸ºæ—¥å¸¸ï¼Œæ•°æ®ç»ä¸ç¦»æœ¬åœ°</li>
<li><strong><code>Claude</code> ç”Ÿæ€å·¥å…·é“¾é—­ç¯åŠ é€Ÿ</strong>ï¼š<code>Skills</code>ã€<code>claude-plugins-official</code>ã€<code>Antigravity-Manager</code> å…±åŒæ„å»ºäº†æ›´å¼ºå¤§ã€æ›´æ˜“æ‰©å±•çš„ <code>Claude</code> ä½¿ç”¨ä½“ç³»</li>
<li><strong>å¤šæ¨¡æ€ + é«˜æ•ˆæ¨ç†åŒè½®é©±åŠ¨</strong>ï¼š<code>remotion</code>ï¼ˆä»£ç è§†é¢‘ï¼‰ã€<code>PageIndex</code>ï¼ˆæ¨ç† <code>RAG</code>ï¼‰ã€<code>BitNet</code>ï¼ˆ<code>1-bit LLM</code>ï¼‰ã€<code>dexter</code>ï¼ˆé‡‘è <code>Agent</code>ï¼‰åœ¨å„è‡ªå‚ç›´é¢†åŸŸå®ç°çªç ´</li>
</ul>
<p>ä¸‹é¢ä¸€èµ·æ¥çœ‹çœ‹ 2026 å¹´å¼€å¹´æœ€å€¼å¾— <code>Star</code> çš„åå¤§çˆ†æ¬¾ï¼</p>
<hr/>
<h3 data-id="heading-0"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer"><code>OpenClaw</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>152K+</code></strong></p>
<p><strong>ğŸ¦ æœ¬åœ°ä¼˜å…ˆçš„ä¸ªäºº <code>AI</code> åŠ©æ‰‹ï¼šå¤šæ¸ é“ã€å…¨å¹³å°</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97ca9db1dab74044b265d6b25980e8ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=iaRBE0SQt%2FKpivsBQMfiCJ3vTDk%3D" alt="OpenClaw" loading="lazy"/></p>
<p><strong><code>OpenClaw</code></strong> æ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºã€å¯è‡ªæ‰˜ç®¡çš„ä¸ªäºº <code>AI</code> åŠ©æ‰‹ï¼Œè¿è¡Œåœ¨ä½ çš„è®¾å¤‡ä¸Šï¼Œé€šè¿‡ WhatsAppã€Telegramã€Slackã€Discord ç­‰ 10+ èŠå¤©æ¸ é“éšæ—¶å“åº”ï¼Œæ”¯æŒè¯­éŸ³å”¤é†’ã€å®æ—¶å¯¹è¯ã€Live Canvas è§†è§‰å·¥ä½œåŒºã€æµè§ˆå™¨/è®¾å¤‡æ§åˆ¶ã€æ—¥å†é‚®ä»¶ç®¡ç†ï¼Œå®ç°ã€Œ<code>AI</code> å°±åœ¨ä½ çš„æ¶ˆæ¯åˆ—è¡¨é‡Œã€ã€‚</p>
<p>å®ƒé‡‡ç”¨æœ¬åœ° Gateway ä½œä¸ºç»Ÿä¸€æ§åˆ¶å¹³é¢ï¼Œæ”¯æŒ <code>Claude Opus 4.5</code> ç­‰å¼ºæ¨¡å‹ failoverï¼Œæä¾›æŠ€èƒ½ç”Ÿæ€ï¼ˆ<code>ClawdHub</code>ï¼‰ã€æ²™ç®±å®‰å…¨ä¸ Docker éš”ç¦»ï¼Œå·²æˆä¸ºéšç§æœ¬åœ°åŒ– <code>AI</code> åŠ©æ‰‹çš„ç°è±¡çº§çˆ†æ¬¾ï¼Œç¤¾åŒºæŠ€èƒ½å…±å»ºä¸æ›´æ–°é€Ÿåº¦æå¿«ã€‚</p>
<ul>
<li><strong>å¤šæ¸ é“æ— ç¼é›†æˆ</strong> ï¼š10+ ä¸»æµèŠå¤©å¹³å°ç»Ÿä¸€å“åº”ï¼Œæ— éœ€åˆ‡æ¢ App</li>
<li><strong>è¯­éŸ³ + è§†è§‰äº¤äº’</strong> ï¼šAlways-on è¯­éŸ³å¯¹è¯ + <code>Agent</code> é©±åŠ¨ Live Canvas å·¥ä½œåŒº</li>
<li><strong>è®¾å¤‡èŠ‚ç‚¹æ§åˆ¶</strong> ï¼šç›¸æœºã€å±å¹•å½•åˆ¶ã€é€šçŸ¥ã€ä½ç½®ç­‰æ“ä½œï¼ˆmacOS/iOS/Androidï¼‰</li>
<li><strong>æŠ€èƒ½ä¸è‡ªåŠ¨åŒ–ç”Ÿæ€</strong> ï¼šæµè§ˆå™¨æ§åˆ¶ã€Cron/Webhookã€ç¤¾åŒºå…±å»ºæŠ€èƒ½å¹³å°</li>
<li><strong>æœ¬åœ°å®‰å…¨ä¼˜å…ˆ</strong> ï¼šDM é…å¯¹ç ã€æ²™ç®±ã€allowlistã€å…¨è®¾å¤‡æœ¬åœ°è¿è¡Œ</li>
<li><strong>æç®€éƒ¨ç½²</strong> ï¼šnpm/Docker ä¸€é”® + onboard å‘å¯¼ï¼Œåˆ†é’Ÿçº§ä¸Šæ‰‹</li>
</ul>
<p>ğŸ’¡ <strong><code>OpenClaw</code></strong> é€‚åˆæ³¨é‡éšç§ã€å¤šè®¾å¤‡é‡åº¦ç”¨æˆ·ï¼Œèƒ½è‡ªåŠ¨åŒ–æ—¥å¸¸çäº‹ï¼ˆå¦‚æ¸…é‚®ç®±ã€è®¢ç¥¨ã€æ—¥ç¨‹ï¼‰ï¼Œç¤¾åŒºçƒ­åº¦çˆ†ç‚¸ï¼Œå¸¸è¢«ç§°ã€Œæ¯å¤©æŸ¥æ›´æ–°ã€çš„æ ¸å¼¹çº§é¡¹ç›®ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopenclaw%2Fopenclaw" target="_blank" title="https://github.com/openclaw/openclaw" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-1"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer"><code>Skills</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>60.9K+</code></strong></p>
<p><strong>ğŸ¤– <code>Anthropic</code> å®˜æ–¹å¼€æºçš„ <code>Claude Agent Skills</code> æŠ€èƒ½ä»“åº“</strong></p>
<p><strong><code>Skills</code></strong> æ˜¯ <code>Anthropic</code> å®˜æ–¹å‘å¸ƒçš„å…¬å…±æŠ€èƒ½ä»“åº“ï¼Œå±•ç¤ºäº† <code>Claude</code> çš„ <code>Skills</code> ç³»ç»Ÿå¦‚ä½•è®© <code>Agent</code> åŠ¨æ€åŠ è½½æ–‡ä»¶å¤¹ä¸­çš„æŒ‡ä»¤ã€è„šæœ¬å’Œèµ„æºï¼Œæå‡åœ¨ä¸“ä¸šä»»åŠ¡ï¼ˆå¦‚æ–‡æ¡£åˆ›ä½œã€æ•°æ®åˆ†æã€è‡ªåŠ¨åŒ–ã€åˆ›æ„ç”Ÿæˆï¼‰ä¸Šçš„è¡¨ç°ã€‚æ¯ä¸ªæŠ€èƒ½æ˜¯ä¸€ä¸ªè‡ªåŒ…å«æ–‡ä»¶å¤¹ï¼Œæ ¸å¿ƒæ–‡ä»¶ä¸º <code>SKILL.md</code>ï¼ˆå« YAML å…ƒæ•°æ® + è¯¦ç»†æŒ‡ä»¤ï¼‰ï¼Œ<code>Claude</code> å¯è‡ªåŠ¨å‘ç°å¹¶åº”ç”¨å®ƒä»¬ã€‚</p>
<p>ä»“åº“åŒ…å«åˆ›æ„ç±»ï¼ˆè‰ºæœ¯ã€éŸ³ä¹ã€è®¾è®¡ï¼‰ã€æŠ€æœ¯ç±»ï¼ˆWeb App æµ‹è¯•ã€<code>MCP</code> æœåŠ¡å™¨ç”Ÿæˆï¼‰ã€ä¼ä¸šç±»ï¼ˆå“ç‰Œã€æ²Ÿé€šï¼‰ç­‰å¤šç§ç¤ºä¾‹ï¼Œè¿˜å¼€æºäº†é©±åŠ¨ <code>Claude</code> æ–‡ä»¶åˆ›å»ºèƒ½åŠ›çš„æ–‡æ¡£æŠ€èƒ½ï¼ˆdocxã€pdfã€pptxã€xlsxï¼‰ï¼Œå¹¶æä¾›è§„èŒƒï¼ˆspec/ï¼‰ä¸æ¨¡æ¿ï¼ˆtemplate/ï¼‰ï¼Œå·²æˆä¸ºå¼€å‘è€…è‡ªå®šä¹‰ <code>Claude</code> æŠ€èƒ½çš„é¦–é€‰å‚è€ƒå’Œæ’ä»¶æºã€‚</p>
<ul>
<li><strong>å®˜æ–¹ç¤ºä¾‹æŠ€èƒ½é›†</strong> ï¼šè¦†ç›–åˆ›æ„ã€æŠ€æœ¯ã€ä¼ä¸šå¤šç§åœºæ™¯çš„ç°æˆæŠ€èƒ½</li>
<li><strong>æ–‡æ¡£ç”Ÿæˆæ ¸å¿ƒ</strong> ï¼šå¼€æº docx/pdf/pptx/xlsx æŠ€èƒ½ï¼Œå®ç° <code>Claude</code> çš„ç”Ÿäº§çº§æ–‡ä»¶åˆ›å»º</li>
<li><strong>æŠ€èƒ½è§„èŒƒä¸æ¨¡æ¿</strong> ï¼šspec/ å®šä¹‰æ ‡å‡†ï¼Œtemplate/ æä¾›å¿«é€Ÿèµ·æ­¥æ–‡ä»¶å¤¹ç»“æ„</li>
<li><strong><code>Claude Code</code> é›†æˆ</strong> ï¼šé€šè¿‡ <code>/plugin marketplace add anthropics/skills</code> æ³¨å†Œå¹¶å®‰è£…æŠ€èƒ½</li>
<li><strong><code>API</code> ä¸ <code>Claude.ai</code> æ”¯æŒ</strong> ï¼šä»˜è´¹è®¡åˆ’å¯ä¸Šä¼ è‡ªå®šä¹‰æŠ€èƒ½ï¼Œ<code>API</code> é€šè¿‡ <code>Skills</code> æ¥å£è°ƒç”¨</li>
</ul>
<p>ğŸ’¡ <strong><code>Skills</code></strong> é€‚åˆ <code>Claude</code> é‡åº¦ç”¨æˆ·ã€<code>Agent</code> å¼€å‘è€…ä¸ä¼ä¸šå›¢é˜Ÿï¼Œèƒ½å¿«é€Ÿæ‰©å±• <code>Claude</code> åœ¨æ–‡æ¡£ã€è‡ªåŠ¨åŒ–ã€åˆ›æ„ä»»åŠ¡ä¸Šçš„èƒ½åŠ›ï¼Œå°¤å…¶ä½œä¸ºå®˜æ–¹å‚è€ƒä»“åº“ï¼Œå­¦ä¹ ä¸è‡ªå®šä¹‰æŠ€èƒ½çš„èµ·ç‚¹ä»·å€¼æé«˜ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-2"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flbjlaq%2FAntigravity-Manager" target="_blank" title="https://github.com/lbjlaq/Antigravity-Manager" ref="nofollow noopener noreferrer"><code>Antigravity-Manager</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>20.5K+</code></strong></p>
<p><strong>ğŸ”„ ä¸“ä¸šçš„ <code>Antigravity</code> è´¦å·ç®¡ç†ä¸åˆ‡æ¢å·¥å…·ï¼šä¸€é”®æ— ç¼å¤šè´¦å·è°ƒåº¦</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e13881e8de31457589fae2cdc4f34134~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=uKEsG1vB0oyTg1giqr3xHAIIabI%3D" alt="antigravity-manager-dashboard" loading="lazy"/></p>
<p><strong><code>Antigravity-Manager</code></strong> æ˜¯ä¸“ä¸º <code>Antigravity Tools</code> æ‰“é€ çš„é«˜æ€§èƒ½æœ¬åœ° <code>AI</code> ä¸­è½¬ä¸è´¦å·ç®¡ç†å™¨ï¼Œä½¿ç”¨ Tauri v2 + React (Rust) æ„å»ºï¼Œæä¾›ä¸€é”®åˆ‡æ¢å¤šè´¦å·ã€æ™ºèƒ½è·¯ç”±ã€åè®®è½¬æ¢ä¸é”™è¯¯è‡ªæ„ˆåŠŸèƒ½ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ <code>Claude</code>ã€<code>Gemini</code>ã€<code>OpenAI</code> ç­‰å¤šæ¨¡å‹ç”Ÿæ€ä¸­å®ç°ç¨³å®šã€ä½æˆæœ¬çš„ä»£ç†è°ƒåº¦ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5f770712bae4d7abbef697420be7e36~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=b1mj0fLolFDRbWEZXQfWzqF4fx8%3D" alt="antigravity-manager-accounts" loading="lazy"/></p>
<p>å®ƒå°† Web ä¼šè¯ç»Ÿä¸€è½¬ä¸ºæ ‡å‡† API æ¥å£ï¼Œæ”¯æŒæ¨¡å‹é™çº§ã€Token Saverï¼ˆåå°ä»»åŠ¡è·¯ç”±åˆ°å…è´¹æ¨¡å‹ï¼‰ã€å¤šæ¨¡æ€å›¾åƒç”Ÿæˆï¼ˆImagen 3 é«˜è´Ÿè½½ï¼‰ã€å·¥å…·è°ƒç”¨å…¼å®¹ï¼ˆMCP/Function Callï¼‰ï¼Œå¹¶é€šè¿‡æ™ºèƒ½é…é¢ç›‘æ§ä¸ 429/401 è‡ªæ„ˆæœºåˆ¶ï¼Œç¡®ä¿é•¿ä¼šè¯è¿ç»­æ€§ä¸æˆæœ¬ä¼˜åŒ–ï¼Œå·²æˆä¸º <code>Antigravity</code> ç”Ÿæ€çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚</p>
<ul>
<li><strong>ä¸€é”®è´¦å·åˆ‡æ¢</strong> ï¼šæ™ºèƒ½æ¨èæœ€ä½³è´¦å·ï¼ŒåŸºäºé…é¢/å†—ä½™å®æ—¶è°ƒåº¦ï¼Œ60s ä¼šè¯é”å®šé˜²æ¼‚ç§»</li>
<li><strong>å¤šåè®®ä»£ç†</strong> ï¼šç»Ÿä¸€ <code>OpenAI/Anthropic/Gemini</code> æ ¼å¼ï¼Œæ”¯æŒ <code>SSE</code> æµå¼ã€<code>thoughtSignature</code> ä¸å·¥å…·é“¾å…¼å®¹</li>
<li><strong>Token Saver ä¼˜åŒ–</strong> ï¼šåå°ä»»åŠ¡ï¼ˆå¦‚æ ‡é¢˜/æ‘˜è¦ï¼‰è‡ªåŠ¨é™çº§åˆ°å…è´¹æ¨¡å‹ï¼Œå•ä¼šè¯èŠ‚çœæ•°åƒ Token</li>
<li><strong>å¤šæ¨¡æ€æ”¯æŒ</strong> ï¼šImagen 3 å›¾åƒç”Ÿæˆ + Base64 è§†è§‰è¾“å…¥ï¼Œé«˜è´Ÿè½½å¤„ç†ï¼ˆ100MB+ï¼‰</li>
<li><strong>é”™è¯¯è‡ªæ„ˆ</strong> ï¼šè‡ªåŠ¨å¤„ç† 429/400/401ï¼ŒæŒ‡æ•°é€€é¿ã€é‡è¯•ã€Schema æ¸…æ´—ä¸ç©ºè¾“å‡ºè¡¥å¿</li>
<li><strong>æœ¬åœ°éšç§éƒ¨ç½²</strong> ï¼šSQLite åŠ å¯†å­˜å‚¨ã€127.0.0.1 é»˜è®¤ç»‘å®šã€Docker headless + Web UIï¼Œæ”¯æŒå…¨å±€ä»£ç†</li>
</ul>
<p>ğŸ’¡ <strong><code>Antigravity-Manager</code></strong> é€‚åˆé‡åº¦ä½¿ç”¨ <code>Claude CLI/Codex CLI</code> æˆ–å¤šæ¨¡å‹ <code>Agent</code> çš„å¼€å‘è€…ä¸å›¢é˜Ÿï¼Œèƒ½å¤§å¹…æå‡ç¨³å®šæ€§ã€èŠ‚çœé…é¢æˆæœ¬ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘ã€å¤šè½®å¯¹è¯ã€å·¥å…·è°ƒç”¨åœºæ™¯ä¸‹ä»·å€¼å·¨å¤§ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³æ¢ç´¢</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flbjlaq%2FAntigravity-Manager" target="_blank" title="https://github.com/lbjlaq/Antigravity-Manager" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-3"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-plugins-official" target="_blank" title="https://github.com/anthropics/claude-plugins-official" ref="nofollow noopener noreferrer"><code>claude-plugins-official</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>6.2K+</code></strong></p>
<p><strong>ğŸ”Œ <code>Anthropic</code> å®˜æ–¹ç®¡ç†çš„ <code>Claude Code</code> é«˜è´¨é‡æ’ä»¶ç›®å½•</strong></p>
<p><strong><code>claude-plugins-official</code></strong> æ˜¯ <code>Anthropic</code> å®˜æ–¹ç»´æŠ¤çš„ <code>Claude Code</code> æ’ä»¶å¸‚åœºï¼Œæ±‡é›†å†…éƒ¨å¼€å‘ï¼ˆ<code>Anthropic</code> è‡ªåˆ¶ï¼‰å’Œå¤–éƒ¨ä¼˜è´¨æ’ä»¶ï¼ˆä¼™ä¼´/ç¤¾åŒºè´¡çŒ®ï¼‰ï¼Œæä¾›æ ‡å‡†åŒ–ç»“æ„ï¼ˆplugin.jsonã€.mcp.jsonã€commandsã€agentsã€skillsï¼‰ï¼Œè®©å¼€å‘è€…è½»æ¾æ‰©å±• <code>Claude Code</code> çš„åŠŸèƒ½ï¼Œå¦‚è‡ªå®šä¹‰å‘½ä»¤ã€<code>Agent</code> å·¥ä½œæµã€<code>MCP</code> æœåŠ¡å™¨é›†æˆç­‰ã€‚</p>
<p>ä»“åº“åˆ†ä¸º /pluginsï¼ˆå®˜æ–¹æ’ä»¶ï¼‰å’Œ /external_pluginsï¼ˆç¬¬ä¸‰æ–¹ï¼‰ï¼ŒåŒ…å«ç¤ºä¾‹å®ç°ã€å¼€å‘è§„èŒƒã€æäº¤è¡¨å•ï¼Œå·²æˆä¸º <code>Claude Code</code> ç”Ÿæ€çš„æ ¸å¿ƒå…¥å£ï¼Œæ”¯æŒé€šè¿‡ <code>/plugin install {name}@claude-plugin-directory</code> æˆ– Discover ç•Œé¢ä¸€é”®å®‰è£…ï¼Œå¼ºè°ƒä¿¡ä»»ä¸å®‰å…¨ï¼ˆ<code>Anthropic</code> ä¸æ§åˆ¶æ’ä»¶å†…å®¹ï¼‰ã€‚</p>
<ul>
<li><strong>å®˜æ–¹æ’ä»¶é›†åˆ</strong> ï¼š<code>Anthropic</code> è‡ªç ”çš„é«˜è´¨é‡æ’ä»¶ç¤ºä¾‹ï¼Œè¦†ç›–å¸¸è§æ‰©å±•éœ€æ±‚</li>
<li><strong>å¤–éƒ¨ä¼˜è´¨æ’ä»¶</strong> ï¼šç¤¾åŒº/ä¼™ä¼´è´¡çŒ®ï¼Œç»è¿‡è´¨é‡å®¡æ ¸çš„ç¬¬ä¸‰æ–¹æ’ä»¶</li>
<li><strong>æ ‡å‡†åŒ–ç»“æ„</strong> ï¼šç»Ÿä¸€ plugin.json + å¯é€‰ <code>MCP</code> é…ç½®ã€<code>commands</code>ã€<code>agents</code>ã€<code>skills</code></li>
<li><strong>ä¸€é”®å®‰è£…</strong> ï¼š<code>Claude Code</code> å†… <code>/plugin install</code> æˆ– Discover æµè§ˆå™¨ç›´æ¥æ·»åŠ </li>
<li><strong>å¼€å‘å‚è€ƒ</strong> ï¼šåŒ…å« example-pluginã€spec è§„èŒƒã€template æ–‡ä»¶å¤¹ï¼Œä¾¿äºè‡ªå®šä¹‰</li>
<li><strong>æäº¤é€šé“</strong>ï¼šé€šè¿‡å®˜æ–¹è¡¨å•æäº¤å¤–éƒ¨æ’ä»¶ï¼ŒåŠ å…¥å¸‚åœº</li>
</ul>
<p>ğŸ’¡ <strong><code>claude-plugins-official</code></strong> é€‚åˆæ‰€æœ‰ <code>Claude Code</code> ç”¨æˆ·ï¼Œå°¤å…¶æ˜¯æƒ³å¿«é€Ÿæ‰©å±• <code>slash</code> å‘½ä»¤ã€<code>Agent</code> èƒ½åŠ›ã€å·¥å…·é›†æˆæˆ– <code>MCP</code> æœåŠ¡å™¨çš„å¼€å‘è€…ï¼Œæ˜¯å®˜æ–¹ç”Ÿæ€èµ·ç‚¹ï¼Œå®‰è£…å³ç”¨ã€ç¤¾åŒºæ´»è·ƒã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fclaude-plugins-official" target="_blank" title="https://github.com/anthropics/claude-plugins-official" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-4"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fremotion-dev%2Fremotion" target="_blank" title="https://github.com/remotion-dev/remotion" ref="nofollow noopener noreferrer"><code>remotion</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>34.4K+</code></strong></p>
<p><strong>ğŸ¥ ç”¨ <code>React</code> ä»£ç åŒ–ç”Ÿæˆè§†é¢‘çš„æ¡†æ¶</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9e61d50f4e4433480caad90a7d66372~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=%2FOCDm%2F6X6xCkBBRVBZAndY5UITk%3D" alt="remotion" loading="lazy"/></p>
<p><strong><code>remotion</code></strong> æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å¼€æºæ¡†æ¶ï¼Œè®©å¼€å‘è€…å®Œå…¨ç”¨ <code>React</code> ç»„ä»¶ã€CSSã€Canvasã€SVGã€WebGL ç­‰ Web æŠ€æœ¯ï¼Œä»¥ä»£ç å½¢å¼åˆ›å»ºé«˜è´¨é‡ã€å¯ç¼–ç¨‹è§†é¢‘ã€‚æ”¯æŒå‚æ•°åŒ–ï¼ˆä¼ å…¥æ•°æ®åŠ¨æ€æ¸²æŸ“ï¼‰ã€ç»„ä»¶å¤ç”¨ã€Fast Refresh å®æ—¶é¢„è§ˆã€æ•°å­¦/ç®—æ³•é©±åŠ¨çš„ç‰¹æ•ˆï¼Œå½»åº•é¢ è¦†ä¼ ç»Ÿè§†é¢‘ç¼–è¾‘å·¥å…·ï¼ˆå¦‚ After Effectsï¼‰çš„é—¨æ§›ã€‚</p>
<p>å®ƒå°†è§†é¢‘è§†ä¸ºã€Œ<code>React</code> åº”ç”¨ã€ï¼Œæ”¯æŒ SSRã€SSR é¢„æ¸²æŸ“ã€Lambda æ¸²æŸ“ã€éŸ³é¢‘æ³¢å½¢å¯è§†åŒ–ã€å­—å¹•ç”Ÿæˆã€åŠ¨æ€æ¨¡æ¿ç­‰ç”Ÿäº§çº§èƒ½åŠ›ï¼Œå·²è¢«å¹¿æ³›ç”¨äº GitHub Unwrappedã€Fireship ç­‰é«˜å½±å“åŠ›è§†é¢‘é¡¹ç›®ï¼Œä»¥åŠè¥é”€ã€æ•°æ®å¯è§†åŒ–ã€æ•™è‚²å†…å®¹ç”Ÿæˆåœºæ™¯ã€‚</p>
<ul>
<li><strong><code>React</code> ç»„ä»¶åŒ–è§†é¢‘</strong> ï¼šå¤ç”¨ç»„ä»¶ã€ç»„åˆã€çŠ¶æ€ç®¡ç†ï¼Œåƒå†™ç½‘é¡µä¸€æ ·å†™è§†é¢‘</li>
<li><strong>Web æŠ€æœ¯å…¨æ ˆ</strong> ï¼šCSS åŠ¨ç”»ã€Canvas/WebGLã€SVGã€Three.js ç­‰ä»»æ„ Web æ•ˆæœ</li>
<li><strong>å‚æ•°åŒ–ä¸åŠ¨æ€</strong> ï¼šä¼ å…¥ props/æ•°æ®å®æ—¶æ¸²æŸ“ä¸ªæ€§åŒ–è§†é¢‘ï¼ˆå¦‚å¹´ç»ˆæ€»ç»“ã€æŠ¥å‘Šï¼‰</li>
<li><strong>å®æ—¶é¢„è§ˆä¸ Fast Refresh</strong> ï¼šä¿®æ”¹ä»£ç å³åˆ»çœ‹åˆ°è§†é¢‘å˜åŒ–ï¼Œå¼€å‘ä½“éªŒæè‡´</li>
<li><strong>äº‘æ¸²æŸ“æ”¯æŒ</strong> ï¼šé›†æˆ Lambda/Remotion Render Farmï¼Œå¤§è§„æ¨¡æ‰¹é‡ç”Ÿæˆ</li>
</ul>
<p>ğŸ’¡ <strong><code>remotion</code></strong> é€‚åˆå‰ç«¯å¼€å‘è€…ã€å†…å®¹åˆ›ä½œè€…ã€æ•°æ®å¯è§†åŒ–å·¥ç¨‹å¸ˆã€è¥é”€å›¢é˜Ÿï¼Œå°¤å…¶åœ¨éœ€è¦è‡ªåŠ¨åŒ–ã€ä¸ªæ€§åŒ–ã€ä»£ç é©±åŠ¨è§†é¢‘ï¼ˆå¦‚ç¤¾äº¤åª’ä½“çŸ­ç‰‡ã€æ•°æ®æ•…äº‹ã€äº§å“ Demoï¼‰çš„åœºæ™¯ä¸‹ï¼Œèƒ½å¤§å¹…æå‡æ•ˆç‡ä¸åˆ›æ„è‡ªç”±åº¦ï¼Œç¤¾åŒºåé¦ˆã€Œè§†é¢‘åˆ¶ä½œä»è‰ºæœ¯å˜æˆç¼–ç¨‹ã€ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fremotion-dev%2Fremotion" target="_blank" title="https://github.com/remotion-dev/remotion" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-5"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FVectifyAI%2FPageIndex" target="_blank" title="https://github.com/VectifyAI/PageIndex" ref="nofollow noopener noreferrer"><code>PageIndex</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>12.5K+</code></strong></p>
<p><strong>ğŸ“‘ æ— å‘é‡æ•°æ®åº“çš„æ¨ç†å¼ <code>RAG</code> æ¡†æ¶ï¼šæ¨¡æ‹Ÿäººç±»ä¸“å®¶çš„æ–‡æ¡£å¯¼èˆª</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3713603190c34251af31722a5f110f84~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=IeLgd1xxWCX%2FLIJpZNfFEkoWaUc%3D" alt="PageIndex-Workflow" loading="lazy"/></p>
<p><strong><code>PageIndex</code></strong> æ˜¯ä¸€ä¸ªåˆ›æ–°çš„å¼€æº <code>RAG</code> ç³»ç»Ÿï¼Œå®Œå…¨æŠ›å¼ƒå‘é‡æ•°æ®åº“å’Œä¼ ç»Ÿåˆ†å—ç­–ç•¥ï¼Œé€šè¿‡æ„å»ºæ–‡æ¡£çš„å±‚æ¬¡åŒ–æ ‘çŠ¶ç´¢å¼•ï¼ˆTOC-like structureï¼‰ï¼Œç»“åˆ <code>LLM</code> çš„å¤šæ­¥æ¨ç†ä¸æ ‘æœç´¢ï¼Œå®ç°åƒäººç±»ä¸“å®¶ä¸€æ ·ç²¾å‡†ã€å¯è¿½æº¯åœ°æ£€ç´¢é•¿æ–‡æ¡£å†…å®¹ã€‚</p>
<p>å®ƒå°†æ–‡æ¡£ç»„ç»‡æˆè‡ªç„¶ç« èŠ‚æ ‘ï¼Œ<code>LLM</code> é€šè¿‡æ¨¡æ‹Ÿã€Œç¿»ä¹¦æŸ¥é˜…ã€è¿‡ç¨‹é€æ­¥å®šä½æœ€ç›¸å…³éƒ¨åˆ†ï¼Œæ”¯æŒ PDF å’Œ Markdown ç­‰æ ¼å¼ï¼Œåœ¨ FinanceBench ç­‰åŸºå‡†ä¸Šè¾¾åˆ° 98.7% çš„ <code>SOTA</code> å‡†ç¡®ç‡ï¼Œæä¾›æé«˜çš„å¯è§£é‡Šæ€§ï¼ˆå¸¦é¡µç /ç« èŠ‚å¼•ç”¨ï¼‰å’Œä¸Šä¸‹æ–‡å‡†ç¡®æ€§ï¼Œå·²æˆä¸ºè¿½æ±‚é«˜ç²¾åº¦ã€æ— éœ€åµŒå…¥å‘é‡ã€å®Œå…¨å¯è§£é‡Š <code>RAG</code> çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>é›¶å‘é‡æ•°æ®åº“</strong>ï¼šçº¯ç»“æ„ + æ¨ç†æ£€ç´¢ï¼Œæ— éœ€ embedding æˆ–å‘é‡å­˜å‚¨</li>
<li><strong>æ— åˆ†å—å¤„ç†</strong>ï¼šä¿ç•™æ–‡æ¡£è‡ªç„¶ç« èŠ‚ä¸å±‚æ¬¡ç»“æ„ï¼Œé¿å…ä¿¡æ¯å‰²è£‚</li>
<li><strong>ç±»äººç±»æ ‘æœç´¢</strong>ï¼šå¤šæ­¥æ¨ç† + æ ‘éå†ï¼Œæ¨¡æ‹Ÿä¸“å®¶é€çº§å®šä½å…³é”®ä¿¡æ¯</li>
<li><strong>é«˜å¯è§£é‡Šæ€§</strong>ï¼šæ£€ç´¢è·¯å¾„å®Œå…¨å¯è¿½æº¯ï¼Œè¾“å‡ºå¸¦ç²¾ç¡®é¡µç /ç« èŠ‚å¼•ç”¨</li>
<li><strong>å±‚æ¬¡æ ‘ç´¢å¼•</strong>ï¼šè‡ªåŠ¨ä»æ–‡æ¡£ç”Ÿæˆ TOC å¼æ ‘çŠ¶ç»“æ„ï¼Œæ”¯æŒé•¿æ–‡æ¡£</li>
<li><strong>SOTA æ€§èƒ½</strong>ï¼šFinanceBench åŸºå‡† 98.7% å‡†ç¡®ç‡ï¼Œè¿œè¶…ä¼ ç»Ÿ <code>RAG</code></li>
</ul>
<p>ğŸ’¡ <strong><code>PageIndex</code></strong> é€‚åˆå¤„ç†é•¿ç¯‡å¤æ‚æ–‡æ¡£çš„ä¸“ä¸šäººå£«ï¼ˆå¦‚é‡‘èåˆ†æã€æ³•å¾‹ç ”ç©¶ã€æŠ€æœ¯æ‰‹å†Œã€ç›‘ç®¡æŠ¥å‘Šï¼‰ï¼Œä»¥åŠå¯¹æ£€ç´¢å‡†ç¡®æ€§ã€å¯è§£é‡Šæ€§ã€æœ¬åœ°åŒ–éƒ¨ç½²æœ‰é«˜è¦æ±‚çš„å¼€å‘è€…ä¸ä¼ä¸šï¼Œå°¤å…¶åœ¨ä¼ ç»Ÿå‘é‡ <code>RAG</code> å‡†ç¡®ç‡ç“¶é¢ˆæˆ–éšç§æ•æ„Ÿåœºæ™¯ä¸‹ä»·å€¼å·¨å¤§ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FVectifyAI%2FPageIndex" target="_blank" title="https://github.com/VectifyAI/PageIndex" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-6"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLissy93%2Fweb-check" target="_blank" title="https://github.com/Lissy93/web-check" ref="nofollow noopener noreferrer"><code>Web-Check</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>31.7K+</code></strong></p>
<p><strong>ğŸ•µï¸â€â™‚ï¸ <code>All-in-one OSINT</code> å·¥å…·ï¼šä¸€ç«™å¼åˆ†æä»»æ„ç½‘ç«™çš„å†…éƒ¨ç»“æ„</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92d1ecf362ea47c9a712263c9f7a1a04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=RTwkhEjrtumXxO0S1z0aoYE4x%2BA%3D" alt="web-check" loading="lazy"/></p>
<p><strong><code>web-check</code></strong> æ˜¯ä¸€ä¸ªå¼€æºçš„ç»¼åˆ OSINTï¼ˆå¼€æºæƒ…æŠ¥ï¼‰ä»ªè¡¨æ¿ï¼Œåªéœ€è¾“å…¥ä»»æ„ç½‘ç«™ URLï¼Œå°±èƒ½å¿«é€Ÿè·å–å…¶æœåŠ¡å™¨æ¶æ„ã€å®‰å…¨é…ç½®ã€æ½œåœ¨æ”»å‡»é¢å’ŒæŠ€æœ¯æ ˆç­‰ä¿¡æ¯ã€‚é¡¹ç›®å°† 30+ ç§æ£€æŸ¥æ•´åˆåˆ°ä¸€ä¸ªç›´è§‚ç•Œé¢ï¼Œå¸®åŠ©å®‰å…¨ç ”ç©¶è€…ã€ç³»ç»Ÿç®¡ç†å‘˜ã€å¼€å‘è€…å¿«é€Ÿä¾¦æµ‹ç½‘ç«™æŒ‡çº¹ã€è¿½è¸ªå™¨ã€å¼±ç‚¹ä¸åŸºç¡€è®¾æ–½ç»†èŠ‚ã€‚</p>
<p>å®ƒæ”¯æŒè‡ªæ‰˜ç®¡ï¼ˆDocker / Netlify / Vercel ä¸€é”®éƒ¨ç½²ï¼‰ï¼Œå®Œå…¨å…è´¹ã€æ— éœ€ API å¯†é’¥å³å¯è¿è¡Œæ ¸å¿ƒåŠŸèƒ½ï¼ˆå¯é€‰é›†æˆ Shodanã€VirusTotal ç­‰å¢å¼ºå¨èƒæƒ…æŠ¥ï¼‰ï¼Œå¼ºè°ƒéšç§å‹å¥½ä¸å¯è§£é‡Šæ€§ï¼Œå·²æˆä¸ºå®‰å…¨å®¡è®¡ã€æ¸—é€æµ‹è¯•å‰æœŸä¾¦å¯Ÿã€ç½‘ç«™åˆè§„æ£€æŸ¥çš„å¸¸ç”¨ç¥å™¨ã€‚</p>
<ul>
<li><strong>IP ä¸ DNS æƒ…æŠ¥</strong> ï¼šè§£æ A/MX/NS/CNAME/TXT è®°å½•ï¼Œæ­ç¤ºç½‘ç»œåŸºç¡€è®¾æ–½</li>
<li><strong>SSL/TLS è¯ä¹¦é“¾</strong> ï¼šæ£€æŸ¥è¯ä¹¦æœ‰æ•ˆæ€§ã€é¢å‘æœºæ„ã€å¼±åŠ å¯†ä¸è¿‡æœŸé£é™©</li>
<li><strong>HTTP å¤´ä¸å®‰å…¨å¤´</strong> ï¼šåˆ†æå“åº”å¤´ã€HSTS/CSP/X-Frame-Options ç­‰å®‰å…¨ç­–ç•¥</li>
<li><strong>Cookies ä¸è¿½è¸ªå™¨</strong> ï¼šæ£€æµ‹è·Ÿè¸ª cookieã€ç¬¬ä¸‰æ–¹è„šæœ¬ä¸éšç§æ³„éœ²ç‚¹</li>
<li><strong>æŠ€æœ¯æ ˆæŒ‡çº¹</strong> ï¼šè‡ªåŠ¨è¯†åˆ«æ¡†æ¶ã€CMSã€æœåŠ¡å™¨ã€åº“ï¼ˆå¦‚ Wappalyzer é£æ ¼ï¼‰</li>
<li><strong>å¨èƒä¸å£°èª‰æ£€æŸ¥</strong> ï¼šå¯¹æ¯”æ¶æ„è½¯ä»¶/é’“é±¼åˆ—è¡¨ã€ç«¯å£æ‰«æä¸é˜²ç«å¢™æ¢æµ‹</li>
</ul>
<p>ğŸ’¡ <strong><code>web-check</code></strong> é€‚åˆå®‰å…¨ç ”ç©¶è€…ã€çº¢é˜Ÿ/è“é˜Ÿã€ç½‘ç«™è¿ç»´äººå‘˜ä»¥åŠå¯¹éšç§ä¸å®‰å…¨æ•æ„Ÿçš„å¼€å‘è€…ï¼Œå°¤å…¶åœ¨å¿«é€Ÿè¯„ä¼°ç¬¬ä¸‰æ–¹ç½‘ç«™é£é™©ã€æ¸—é€æµ‹è¯•å‰æœŸä¾¦å¯Ÿæˆ–åˆè§„å®¡è®¡åœºæ™¯ä¸‹æå…·ç”Ÿäº§åŠ›ï¼Œç¤¾åŒºæ´»è·ƒã€éƒ¨ç½²ç®€å•ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLissy93%2Fweb-check" target="_blank" title="https://github.com/Lissy93/web-check" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-7"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytedance%2FUI-TARS-desktop" target="_blank" title="https://github.com/bytedance/UI-TARS-desktop" ref="nofollow noopener noreferrer"><code>UI-TARS-desktop</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>25.2K+</code></strong></p>
<p><strong>ğŸ–¥ï¸ å­—èŠ‚å¼€æºçš„å¤šæ¨¡æ€ <code>GUI Agent</code> æ¡Œé¢åº”ç”¨ï¼šè‡ªç„¶è¯­è¨€æ“æ§ç”µè„‘ä¸æµè§ˆå™¨</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b64b8473f5fd45929d2cde9c869a4b42~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=SvQ0gDZyWOCCxTak0C9%2FEA3Dawk%3D" alt="ui-tars-desktop-cli" loading="lazy"/></p>
<p><strong><code>UI-TARS-desktop</code></strong> æ˜¯ <code>ByteDance</code> æ¨å‡ºçš„å¼€æºå¤šæ¨¡æ€ <code>AI Agent</code> æ¡Œé¢åº”ç”¨ï¼ŒåŸºäº <code>UI-TARS</code> è§†è§‰è¯­è¨€æ¨¡å‹ï¼Œè®©ç”¨æˆ·é€šè¿‡è‡ªç„¶è¯­è¨€ç›´æ¥æ“æ§æœ¬åœ°ç”µè„‘æˆ–è¿œç¨‹æµè§ˆå™¨ï¼Œå®ç°é¼ æ ‡ç‚¹å‡»ã€é”®ç›˜è¾“å…¥ã€æ‹–æ‹½ã€æ»šåŠ¨ç­‰çœŸå®äººç±»äº¤äº’ï¼Œæ”¯æŒå®Œå…¨æœ¬åœ°è¿è¡Œã€éšç§å®‰å…¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a54734c14327425e90f916aea4cd123a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=23JZ6TrjxEm9106TuKbQxwgUUyw%3D" alt="ui-tars-desktop-web-ui" loading="lazy"/></p>
<p>å®ƒæä¾› <code>CLI</code> + <code>Web UI</code> åŒå…¥å£ã€è·¨å¹³å°æ”¯æŒï¼ˆWindows/macOS/æµè§ˆå™¨ï¼‰ï¼Œå†…ç½® Remote Computer/Browser Operatorï¼ˆå…é…ç½®å…è´¹ï¼‰ï¼Œç»“åˆ <code>MCP</code> åè®®æ— ç¼é›†æˆå¤šæ¨¡æ€æ¨¡å‹ï¼Œå·²æˆä¸ºæœ¬åœ° <code>GUI</code> è‡ªåŠ¨åŒ–ã€è·¨è®¾å¤‡ä»»åŠ¡æ‰§è¡Œã€ç”Ÿäº§åŠ›å·¥å…·çš„çƒ­é—¨é€‰æ‹©ï¼Œç¤¾åŒºæ´»è·ƒã€è¿­ä»£è¿…é€Ÿã€‚</p>
<ul>
<li><strong>è‡ªç„¶è¯­è¨€ <code>GUI</code> æ§åˆ¶</strong> ï¼šçº¯è¯­è¨€æŒ‡ä»¤æ“æ§é¼ æ ‡ã€é”®ç›˜ã€æ»šåŠ¨ã€æ‹–æ‹½ç­‰æ“ä½œ</li>
<li><strong>è§†è§‰è¯†åˆ«ä¸æˆªå±</strong> ï¼šå®æ—¶ç†è§£å±å¹•å†…å®¹ï¼Œç²¾å‡†å®šä½å…ƒç´ </li>
<li><strong>è·¨å¹³å° + è¿œç¨‹æ“ä½œ</strong> ï¼šæ”¯æŒ Windows/macOSã€æœ¬åœ°ä¸è¿œç¨‹ç”µè„‘/æµè§ˆå™¨</li>
<li><strong>å®æ—¶åé¦ˆä¸çŠ¶æ€</strong> ï¼š<code>Web UI</code> å®æ—¶æ˜¾ç¤º <code>Agent</code> æ‰§è¡Œè¿‡ç¨‹ä¸ç»“æœ</li>
<li><strong>å®Œå…¨æœ¬åœ°éšç§</strong> ï¼šæ‰€æœ‰å¤„ç†æœ¬åœ°è¿è¡Œï¼Œæ— éœ€ä¸Šä¼ æ•°æ®</li>
<li><strong>ä¸€é”® <code>CLI</code> å¯åŠ¨</strong> ï¼š<code>npx</code> æˆ–å…¨å±€å®‰è£…å³å¯è¿è¡Œï¼Œæ”¯æŒå¤šç§æ¨¡å‹æä¾›å•†</li>
</ul>
<p>ğŸ’¡ <strong><code>UI-TARS-desktop</code></strong> é€‚åˆéœ€è¦ <code>GUI</code> è‡ªåŠ¨åŒ–çš„å¼€å‘è€…ã€æµ‹è¯•å·¥ç¨‹å¸ˆã€é‡åº¦æ¡Œé¢ç”¨æˆ·ä»¥åŠè¿½æ±‚éšç§çš„ <code>AI Agent</code> çˆ±å¥½è€…ï¼Œå°¤å…¶åœ¨å¤æ‚å¤šæ­¥éª¤ä»»åŠ¡ï¼ˆå¦‚é…ç½®è½¯ä»¶ã€ç½‘é¡µæ“ä½œã€æ¸¸æˆäº¤äº’ï¼‰åœºæ™¯ä¸‹ï¼Œèƒ½æ˜¾è‘—æå‡æ•ˆç‡ï¼Œæ˜¯å¤šæ¨¡æ€æ¡Œé¢ <code>Agent</code> çš„ä»£è¡¨ä½œã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fbytedance%2FUI-TARS-desktop" target="_blank" title="https://github.com/bytedance/UI-TARS-desktop" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-8"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvirattt%2Fdexter" target="_blank" title="https://github.com/virattt/dexter" ref="nofollow noopener noreferrer"><code>Dexter</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>9.8K+</code></strong></p>
<p><strong>ğŸ’¹ è‡ªä¸»é‡‘èç ”ç©¶ <code>Agent</code>ï¼šæ€è€ƒã€è§„åˆ’ã€éªŒè¯çš„å…¨é“¾è·¯æ·±åº¦åˆ†æ</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dace65f8517f4396a0e2b6b6f2dc31e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=2xYNYAD2Slz3AOkgs%2F%2BpJTCKkMs%3D" alt="dexter" loading="lazy"/></p>
<p><strong><code>dexter</code></strong> æ˜¯ä¸€ä¸ªå¼€æºçš„è‡ªä¸» <code>AI Agent</code>ï¼Œä¸“ä¸ºå¤æ‚é‡‘èç ”ç©¶è®¾è®¡ï¼Œèƒ½åƒäººç±»ç ”ç©¶å‘˜ä¸€æ ·æ€è€ƒã€è§„åˆ’ã€æ‰§è¡Œå¹¶è‡ªæˆ‘éªŒè¯ã€‚å®ƒå°†é«˜éš¾åº¦é‡‘èé—®é¢˜æ‹†è§£ä¸ºç»“æ„åŒ–æ­¥éª¤ï¼Œä½¿ç”¨å®æ—¶å¸‚åœºæ•°æ®ï¼ˆè´¢æŠ¥ã€ç°é‡‘æµã€è‚¡ä»·ç­‰ï¼‰è¿›è¡Œåˆ†æï¼Œæœ€ç»ˆè¾“å‡ºå¯ä¿¡ã€æ•°æ®é©±åŠ¨çš„ç»“è®ºï¼Œè¢«èª‰ä¸ºã€Œé‡‘èé¢†åŸŸçš„ <code>Claude Code</code>ã€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e1335b01cb054b23b9b77bbb3e1874d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=E4cjhFkwYtf9GKCTx994ckrnnT0%3D" alt="dexter-agent" loading="lazy"/></p>
<p>é¡¹ç›®é‡‡ç”¨ä»»åŠ¡è§„åˆ’ + è‡ªåæ€ + å·¥å…·æ‰§è¡Œæ¶æ„ï¼Œæ”¯æŒ <code>OpenAI</code> æ¨¡å‹ã€<code>Financial Datasets API</code>ã€<code>Exa/Tavily</code> æœç´¢ï¼Œæä¾›å†…ç½®å®‰å…¨æœºåˆ¶ï¼ˆå¾ªç¯æ£€æµ‹ã€æ­¥æ•°é™åˆ¶ï¼‰ã€LangSmith è¯„ä¼°ä¸ LLM-as-judge æ‰“åˆ†ï¼Œå·²æˆä¸ºé‡‘èåˆ†æå¸ˆã€é‡åŒ–å¼€å‘è€…ã€æŠ•èµ„ç ”ç©¶è€…å¿«é€Ÿæ„å»ºå¯ä¿¡ <code>AI</code> é‡‘èåŠ©æ‰‹çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>æ™ºèƒ½ä»»åŠ¡è§„åˆ’</strong> ï¼šè‡ªåŠ¨å°†å¤æ‚æŸ¥è¯¢åˆ†è§£ä¸ºå¯æ‰§è¡Œçš„ç ”ç©¶æ­¥éª¤</li>
<li><strong>è‡ªä¸»å·¥å…·æ‰§è¡Œ</strong> ï¼šå®æ—¶è°ƒç”¨è´¢æŠ¥ã€è‚¡ä»·ã€æœç´¢ç­‰å·¥å…·å®Œæˆåˆ†æ</li>
<li><strong>è‡ªæˆ‘éªŒè¯ä¸è¿­ä»£</strong> ï¼šæ£€æŸ¥è¾“å‡ºè´¨é‡ã€å‘ç°é”™è¯¯å¹¶è‡ªåŠ¨ä¼˜åŒ–ç»“æœ</li>
<li><strong>å®æ—¶é‡‘èæ•°æ®</strong> ï¼šç›´æ¥æ¥å…¥æ”¶å…¥è¡¨ã€èµ„äº§è´Ÿå€ºè¡¨ã€ç°é‡‘æµé‡è¡¨ç­‰</li>
<li><strong>å®‰å…¨ä¸è°ƒè¯•å‹å¥½</strong> ï¼šå†…ç½®å¾ªç¯æ£€æµ‹ã€æ­¥æ•°é™åˆ¶ã€JSONL scratchpad æ—¥å¿—</li>
<li><strong>è¯„ä¼°å¥—ä»¶</strong> ï¼šå¼€æºé‡‘èé—®é¢˜æµ‹è¯•é›† + LangSmith + LLM-as-judge è¯„åˆ†</li>
</ul>
<p>ğŸ’¡ <strong><code>dexter</code></strong> é€‚åˆé‡‘èåˆ†æå¸ˆã€é‡åŒ–ç ”ç©¶å‘˜ã€æŠ•èµ„çˆ±å¥½è€…ä»¥åŠæƒ³æ„å»ºé¢†åŸŸä¸“ç²¾ <code>Agent</code> çš„å¼€å‘è€…ï¼Œå°¤å…¶åœ¨éœ€è¦é«˜å¯ä¿¡åº¦ã€æ•°æ®é©±åŠ¨çš„è‚¡ç¥¨/å…¬å¸æ·±åº¦ç ”ç©¶åœºæ™¯ä¸‹ï¼Œèƒ½æ˜¾è‘—æå‡æ•ˆç‡ä¸ç»“è®ºå¯é æ€§ï¼Œç¤¾åŒºåé¦ˆã€ŒçœŸæ­£èƒ½æ€è€ƒçš„é‡‘è <code>AI</code>ã€ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvirattt%2Fdexter" target="_blank" title="https://github.com/virattt/dexter" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<hr/>
<h3 data-id="heading-9"><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FBitNet" target="_blank" title="https://github.com/microsoft/BitNet" ref="nofollow noopener noreferrer"><code>BitNet</code></a></h3>
<p>ğŸŒŸ <strong><code>Star</code> æ•°ï¼š<code>27.6K+</code></strong></p>
<p><strong>âš¡ å¾®è½¯å®˜æ–¹ <code>1-bit LLM</code> æ¨ç†æ¡†æ¶ï¼šæè‡´é«˜æ•ˆçš„ <code>CPU/GPU</code> éƒ¨ç½²</strong></p>
<p><strong><code>BitNet</code></strong> æ˜¯ <code>Microsoft</code> å‘å¸ƒçš„å®˜æ–¹æ¨ç†å¼•æ“ï¼ˆ<code>bitnet.cpp</code>ï¼‰ï¼Œä¸“ä¸º <code>1.58-bit</code>ï¼ˆä¸‰å€¼æƒé‡ï¼‰<code>LLM</code> è®¾è®¡ï¼Œæä¾›é«˜åº¦ä¼˜åŒ–çš„å†…æ ¸ï¼Œå®ç° <code>CPU</code> å’Œ <code>GPU</code> ä¸Šå¿«é€Ÿã€æ— æŸæ¨ç†ã€‚é¡¹ç›®åŸºäº <code>llama.cpp</code> æ„å»ºï¼Œå¼•å…¥è‡ªå®šä¹‰å¹¶è¡Œå†…æ ¸ä¸å¯é…ç½® tilingï¼Œæ”¯æŒå¤§è§„æ¨¡è¾¹ç¼˜è®¾å¤‡éƒ¨ç½²ï¼Œæ˜¯å½“å‰æœ€å‰æ²¿çš„ä½æ¯”ç‰¹ <code>LLM</code> é«˜æ•ˆæ¨ç†æ–¹æ¡ˆã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4d22344e041d4c95ad6ce70e21c56541~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiA54K55LiA5pyo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692466&amp;x-signature=grn%2BmsSq0XJ9gWGNNP2ekQJ8dBI%3D" alt="bitnet-performance" loading="lazy"/></p>
<p>å®ƒèƒ½è®© <code>100B</code> çº§ <code>BitNet b1.58</code> æ¨¡å‹åœ¨å• <code>CPU</code> ä¸Šä»¥ <code>5â€“7 tokens/s</code> è¿è¡Œï¼ˆäººç±»å¯è¯»é€Ÿåº¦ï¼‰ï¼Œåœ¨ <code>ARM/x86 CPU</code> ä¸Šå¸¦æ¥ <code>1.37xâ€“6.17x</code> åŠ é€Ÿï¼ŒåŒæ—¶é™ä½ 55%â€“82% èƒ½è€—ï¼Œæ”¯æŒ <code>embedding</code> é‡åŒ–è¿›ä¸€æ­¥æé€Ÿï¼Œå·²æˆä¸ºè¿½æ±‚æœ¬åœ°åŒ–ã€ä½åŠŸè€—ã€å¤§æ¨¡å‹éƒ¨ç½²çš„å¼€å‘è€…ä¸ç ”ç©¶è€…çš„é¦–é€‰ã€‚</p>
<ul>
<li><strong>æè‡´ <code>CPU</code> æ¨ç†</strong> ï¼š<code>100B</code> æ¨¡å‹å• <code>CPU 5â€“7 t/s</code>ï¼Œ<code>ARM/x86</code> åŠ é€Ÿ <code>1.37xâ€“6.17x</code></li>
<li><strong><code>GPU</code> ä¼˜åŒ–å†…æ ¸</strong> ï¼šå®˜æ–¹ <code>GPU</code> æ”¯æŒï¼Œæ˜¾è‘—æå‡ååä¸èƒ½æ•ˆ</li>
<li><strong><code>1.58-bit</code> æ— æŸæ¨ç†</strong> ï¼šä¸‰å€¼æƒé‡ + é‡åŒ–æ¿€æ´»ï¼Œä¿æŒé«˜è´¨é‡è¾“å‡º</li>
<li><strong>èƒ½è€—å¤§å¹…é™ä½</strong> ï¼š55.4%â€“82.2% èƒ½è€—èŠ‚çœï¼Œé€‚åˆè¾¹ç¼˜/ç§»åŠ¨è®¾å¤‡</li>
<li><strong>ä¸°å¯Œæ¨¡å‹å…¼å®¹</strong> ï¼šæ”¯æŒ <code>BitNet-b1.58-2B-4T</code>ã€<code>Llama3-8B-1.58</code>ã€<code>Falcon</code> ç³»åˆ—ç­‰</li>
<li><strong>æ˜“ç”¨éƒ¨ç½²</strong> ï¼š<code>CMake</code> æ„å»º + <code>Python</code> è„šæœ¬è½¬æ¢/è¿è¡Œï¼Œé›†æˆ <code>GGUF</code> æ ¼å¼</li>
</ul>
<p>ğŸ’¡ <strong><code>BitNet</code></strong> é€‚åˆæƒ³åœ¨æ™®é€šç¡¬ä»¶ä¸Šè¿è¡Œç™¾äº¿çº§ <code>LLM</code> çš„å¼€å‘è€…ã€ç ”ç©¶è€…ã€ä¼ä¸šï¼Œå°¤å…¶åœ¨æ—  <code>GPU</code>ã€æœ¬åœ°éšç§ã€ä½åŠŸè€—ã€è¾¹ç¼˜æ¨ç†åœºæ™¯ä¸‹ï¼Œèƒ½å½»åº•æ”¹å˜å¤§æ¨¡å‹éƒ¨ç½²æ–¹å¼ï¼Œæ˜¯ <code>1-bit LLM</code> æ—¶ä»£çš„æ ¸å¿ƒåŸºç¡€è®¾æ–½ã€‚</p>
<p>ğŸ‘‰ <strong>ç«‹å³ä½“éªŒ</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmicrosoft%2FBitNet" target="_blank" title="https://github.com/microsoft/BitNet" ref="nofollow noopener noreferrer"><code>GitHub</code></a></p>
<h3 data-id="heading-10">ç»“è®º</h3>
<p>2026 å¹´ 1 æœˆçš„æ¦œå•ï¼Œç»™æˆ‘ä»¬éå¸¸æ¸…æ™°çš„ä¿¡å·ï¼š</p>
<ul>
<li><strong>æœ¬åœ°åŒ– + éšç§ä¼˜å…ˆ</strong> å·²å½»åº•æˆä¸ºä¸»æµï¼Œ<code>OpenClaw</code>ã€<code>UI-TARS-desktop</code> ç­‰é¡¹ç›®è®©ã€Œ<code>AI</code> è·‘åœ¨ä½ è‡ªå·±çš„è®¾å¤‡ä¸Šã€å˜æˆæ—¥å¸¸ç°å®</li>
</ul>

<ul>
<li><strong><code>Claude</code> ç”Ÿæ€</strong> æ­£åœ¨ä»¥æå¿«é€Ÿåº¦é—­ç¯ï¼Œå®˜æ–¹æŠ€èƒ½ä»“åº“ + æ’ä»¶å¸‚åœº + æ™ºèƒ½è°ƒåº¦å·¥å…·ç›¸ç»§åˆ°ä½ï¼Œ<code>Claude Code</code> çš„ç”Ÿäº§åŠ›æ­£åœ¨æŒ‡æ•°çº§é‡Šæ”¾</li>
<li><strong>å¤šæ¨¡æ€ä¸é«˜æ•ˆæ¨ç†</strong> åŒåŒè¿›å…¥æˆç†Ÿé˜¶æ®µï¼šä»£ç ç”Ÿæˆè§†é¢‘ã€æ— å‘é‡é«˜ç²¾åº¦ <code>RAG</code>ã€<code>1-bit</code> å¤§æ¨¡å‹æ¨ç†ï¼Œéƒ½åœ¨ç”¨æœ€å®é™…çš„æ–¹å¼é™ä½é—¨æ§›ã€æå‡æ•ˆç‡</li>
</ul>
<p>è¿™åä¸ªé¡¹ç›®ä¸å†æ˜¯é…·ç‚«çš„ç©å…·ï¼Œè€Œæ˜¯<strong>å¯ä»¥ç«‹åˆ»è£…è¿›å·¥ä½œæµã€ç«‹åˆ»äº§ç”Ÿç”Ÿäº§åŠ›</strong>çš„æ­¦å™¨ã€‚2026 å¹´åˆšå¼€å§‹ï¼Œå¼€æºç¤¾åŒºå°±ç”¨è¡ŒåŠ¨å‘Šè¯‰æˆ‘ä»¬ï¼š<strong>æœªæ¥å·²æ¥ï¼Œè€Œä¸”å®ƒå°±è·‘åœ¨ä½ çš„ç”µè„‘å’Œæ‰‹æœºé‡Œ</strong>ã€‚</p>
<p>ğŸ“Œ å–œæ¬¢å“ªä¸ªå°±å»ç‚¹ä¸ª <code>Star</code>ï¼Œæ¯ä¸€ä¸ª <code>Star</code> éƒ½æ˜¯å¯¹å¼€æºç¤¾åŒºæœ€å¤§çš„æ”¯æŒï¼</p>
<p>ğŸ“¬ æ¬¢è¿æ”¶è—ã€è½¬å‘ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå®‰åˆ©ä½ å¿ƒç›®ä¸­çš„ <strong>2026 å¹´ 2 æœˆé»‘é©¬é¡¹ç›®</strong>ï½</p>
<hr/>
<h3 data-id="heading-11">å¾€æœŸæ¨è</h3>
<p>å–œæ¬¢æœ¬æœŸçš„çƒ­é—¨é¡¹ç›®ï¼Ÿä»¥ä¸‹æ˜¯ä¸€äº›å€¼å¾—ä¸€è¯»çš„å¾€æœŸç²¾å½©å†…å®¹ï¼š</p>
<ol>
<li><a href="https://juejin.cn/post/7434159897197133836" target="_blank" title="https://juejin.cn/post/7434159897197133836">ğŸš€ 2024å¹´11æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7434159897197133836" target="_blank" title="https://juejin.cn/post/7434159897197133836">ğŸš€ 2024å¹´12æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7461822837532213267" target="_blank" title="https://juejin.cn/post/7461822837532213267">ğŸš€ 2025å¹´01æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7475237484085346355" target="_blank" title="https://juejin.cn/post/7475237484085346355">ğŸš€ 2025å¹´02æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7486316823253565474" target="_blank" title="https://juejin.cn/post/7486316823253565474">ğŸš€ 2025å¹´03æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7503762078386700298" target="_blank" title="https://juejin.cn/post/7503762078386700298">ğŸš€ 2025å¹´04æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7508914438659735589" target="_blank" title="https://juejin.cn/post/7508914438659735589">ğŸš€ 2025å¹´05æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7525688196605722670" target="_blank" title="https://juejin.cn/post/7525688196605722670">ğŸš€ 2025å¹´06æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7533169614206861339" target="_blank" title="https://juejin.cn/post/7533169614206861339">ğŸš€ 2025å¹´07æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7543830033606246419" target="_blank" title="https://juejin.cn/post/7543830033606246419">ğŸš€ 2025å¹´08æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7555056825693634601" target="_blank" title="https://juejin.cn/post/7555056825693634601">ğŸš€ 2025å¹´09æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7567208390368198696" target="_blank" title="https://juejin.cn/post/7567208390368198696">ğŸš€ 2025å¹´10æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7579889969986502707" target="_blank" title="https://juejin.cn/post/7579889969986502707">ğŸš€ 2025å¹´11æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
<li><a href="https://juejin.cn/post/7591079707698315274" target="_blank" title="https://juejin.cn/post/7591079707698315274">ğŸš€ 2025å¹´12æœˆ GitHub åå¤§çƒ­é—¨é¡¹ç›®æ’è¡Œæ¦œ ğŸ”¥</a></li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å ªç§°å¤–æŒ‚çš„ Claude Code é…ç½®ç¥å™¨ï¼Œåœ¨ GitHub ä¸Šæ€ç–¯äº†ã€‚]]></title>    <link>https://juejin.cn/post/7602158221851607055</link>    <guid>https://juejin.cn/post/7602158221851607055</guid>    <pubDate>2026-02-03T03:05:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602158221851607055" data-draft-id="7602158221851541519" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å ªç§°å¤–æŒ‚çš„ Claude Code é…ç½®ç¥å™¨ï¼Œåœ¨ GitHub ä¸Šæ€ç–¯äº†ã€‚"/> <meta itemprop="keywords" content="GitHub"/> <meta itemprop="datePublished" content="2026-02-03T03:05:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€›é€›GitHub"/> <meta itemprop="url" content="https://juejin.cn/user/1442202996186093"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å ªç§°å¤–æŒ‚çš„ Claude Code é…ç½®ç¥å™¨ï¼Œåœ¨ GitHub ä¸Šæ€ç–¯äº†ã€‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1442202996186093/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€›é€›GitHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:05:23.000Z" title="Tue Feb 03 2026 03:05:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿™ä¸ªå«Â everything-claude-code çš„å¼€æºé¡¹ç›®å¤ªé¡¶äº†ã€‚å¼€æºæ²¡å‡ å¤©å°± 3.5 ä¸‡çš„ Star äº†ã€‚ã€‚ã€‚</p>
<p>å…ˆçœ‹å®ƒçš„ç®€ä»‹ï¼Œä¸Šé¢å†™çš„æ˜¯ï¼šå®Œæ•´çš„ Claude Code é…ç½®åˆé›†â€”â€”Agentã€Skillã€Hookã€å¿«æ·å‘½ä»¤ã€è§„åˆ™ã€MCPsã€‚æ¥è‡ª Anthropic é»‘å®¢é©¬æ‹‰æ¾è·èƒœè€…çš„ç»è¿‡å®æˆ˜æ£€éªŒçš„é…ç½®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/be4e2c5b7c29434eb21f1c648dae2697~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=JOgJLu%2FjaigVycfoljj0Pa%2Bdfoo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>é‡ç‚¹æ˜¯ï¼šæ¥è‡ª Anthropic é»‘å®¢é©¬æ‹‰æ¾è·èƒœè€…çš„ç»è¿‡å®æˆ˜æ£€éªŒã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®çš„ä½œè€…æ˜¯ Affaan Mustafaï¼Œæ˜¯ä¸€ä½è¶…çº§èµ„æ·±çš„ AI å¼€å‘è€…ã€‚</p>
<p>è¿™ä¸ªå¼€æºé¡¹ç›®æ˜¯å®ƒé•¿è¾¾ 10 ä¸ªæœˆçš„é«˜å¼ºåº¦ä½¿ç”¨ Claude Code ç»éªŒæ€»ç»“è€Œæ¥çš„ã€‚è€Œä¸”å®ƒç”¨è¿™å¥—é…ç½®èµ¢å¾—äº† Anthropic x Forum Ventures é»‘å®¢æ¾ Hackathon çš„å† å†›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15eb428f6c814debb01ac116e6d5f148~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=bcZl8YYF1wr2Un%2FdWjcp3AwB570%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>åœ¨é»‘å®¢æ¾æ¯”èµ›ä¸­ï¼Œæ—¶é—´å¾ˆç´§è¿«ï¼Œé€šå¸¸åªæœ‰ä¸€å¤©ã€‚</p>
<p>ä»–ä»¬åœ¨çŸ­çŸ­ 8 å°æ—¶ å†…ï¼Œå®Œå…¨ä¾é  Claude Code è¿™ä¸€å·¥å…·ä»é›¶å¼€å‘äº†ä¸€ä¸ª AI é©±åŠ¨çš„å®¢æˆ·å‘ç°å¹³å°ï¼šzenith.chatã€‚</p>
<p>å¹¶æˆåŠŸè¿›è¡Œäº†ç°åœºæ¼”ç¤ºï¼Œæœ€åè·å¾—äº†å† å†›å„¿ğŸ†ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/52d1d9f06eb64f2cafa1812a9a53bafa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=1X1Y5Bwp0TBWi6qkqSR5jNsA868%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>01</p>
<p><strong>å¼€æºé¡¹ç›®ç®€ä»‹</strong></p>
<p>everything-claude-code æ˜¯ä¸€ä¸ªä¸º Claude Code æ‰“é€ çš„å®Œæ•´é…ç½®å·¥å…·ç®±ï¼ŒåŒ…æ‹¬ï¼šå¯ä»¥ç›´æ¥ç”¨çš„ agentsã€skillsã€ hooksã€å¿«æ·å‘½ä»¤ã€ è§„åˆ™ã€MCP é…ç½®ã€‚</p>
<p>å®ƒä¸æ˜¯æç¤ºè¯åˆé›†ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠŠ Claude Code ä» ChatBot å˜æˆèµ„æ·±å·¥ç¨‹å¸ˆçš„ã€å®æˆ˜æ£€éªŒè¿‡çš„å®Œæ•´å¼€å‘å·¥ä½œæµä¸é…ç½®å¥—ä»¶ã€‚</p>
<p>è¯´ç™½äº†ï¼Œå°±æ˜¯èƒ½æŠŠä½ çš„ Claude Code æ­¦è£…åˆ°ç‰™é½¿ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b2042bbe3fd4ff8b36699e9aaee1f26~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=3RIxa3kyPXW67tebPuSLNJkp6BU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-bash" lang="bash">å¼€æºåœ°å€ï¼šgithub.com/affaan-m/everything-claude-code
</code></pre>
<p>çœ‹å®ƒè¿™å¥—å¼€æºé¡¹ç›®æ¶æ„ï¼Œå¯¹äºé»‘å®¢æ¾æ¯”èµ›é…’å‹æœ‰é’ˆå¯¹æ€§çš„æˆ˜æœ¯ã€‚</p>
<p>â‘  åˆç†ä½¿ç”¨ Agentsï¼š</p>
<p>ä»–ä»¬æ²¡æœ‰æŠŠ Claude ä»…ä»…å½“ä½œä¸€ä¸ª ChatBotï¼Œè€Œæ˜¯åˆ©ç”¨é¡¹ç›®ä¸­çš„ Agents é…ç½®ï¼ŒæŠŠ Claude åˆ†è£‚æˆä¸åŒçš„è§’è‰²ï¼š</p>
<p>Planner Agentï¼šè´Ÿè´£åœ¨å†™ä»£ç å‰ç”± AI è‡ªåŠ¨ç”Ÿæˆæ¶æ„å›¾å’Œå®æ–½è®¡åˆ’ï¼Œé¿å…äº†ç›²ç›®ç¼–ç å¯¼è‡´çš„è¿”å·¥ï¼Œåœ¨é»‘å®¢æ¾ä¸­è¿™ä¸ªå¾ˆé‡è¦ã€‚</p>
<p>Code Reviewer Agentï¼šåœ¨ä»£ç æäº¤å‰è‡ªåŠ¨å®¡æŸ¥ï¼Œç¡®ä¿æ¼”ç¤ºæ—¶ä¸ä¼šå› ä¸ºä½çº§é”™è¯¯ï¼Œæ¯”å¦‚è¯­æ³•é”™è¯¯ã€æœªæ•è·çš„å¼‚å¸¸å•¥çš„ï¼Œå¯¼è‡´ Demo å¤±è´¥ã€‚</p>
<p>â‘¡å…‹æœä¸Šä¸‹æ–‡è…çƒ‚ï¼š</p>
<p>åœ¨é•¿è¾¾ 8 å°æ—¶çš„è¿ç»­ Coding ä¸­ï¼Œæ™®é€š AI å¾€å¾€ä¼šå¿˜è®°ä¹‹å‰çš„è®¾å®šã€‚</p>
<p>Affaan åˆ©ç”¨è¿™å¥—é…ç½®ä¸­çš„ Skills å’Œ Rulesï¼Œå¼ºåˆ¶ AI å§‹ç»ˆéµå¾ªç‰¹å®šçš„ TDDæµ‹è¯•é©±åŠ¨å¼€å‘æ¨¡å¼ï¼Œä¿æŒäº†ä»£ç é€»è¾‘çš„ä¸€è‡´æ€§ï¼Œç›´åˆ°æ¯”èµ›ç»“æŸã€‚</p>
<p>â‘¢ MCPçš„ä½¿ç”¨ï¼š</p>
<p>ä»–ä»¬é€šè¿‡é…ç½® MCP å·¥å…·ï¼Œæ¯”å¦‚ GitHub MCP, Supabase MCPç­‰ã€‚</p>
<p>è®© Claude ç›´æ¥æ“ä½œæ•°æ®åº“å’Œä»£ç ä»“åº“ã€‚è¿™æ„å‘³ç€ä»–ä»¬å‡ ä¹ä¸éœ€è¦æ‰‹åŠ¨å»æ•°æ®åº“å»ºè¡¨æˆ–åœ¨ IDE ä¹‹é—´æ¥å›åˆ‡æ¢ï¼Œæå¤§ç¼©çŸ­äº†å¼€å‘å‘¨æœŸã€‚</p>
<p>å­¦ä¹ æŒ‡å—</p>
<p>å½“ç„¶åªçœ‹è¿™ä¸ªå¼€æºé¡¹ç›®å­¦ä¸åˆ°ç²¾é«“ï¼Œä½œè€…å†™äº†ä¸¤ç¯‡æ–‡ç« ï¼Œä¸€å®šè¦å»çœ‹çœ‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3e8bf66a036468791018c903612e529~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=2wSo6XjBa6o4hsvt1kraJ9e1rww%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-ruby" lang="ruby">æŒ‡å—ä¸€ï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/x.com/affaanmustafa</span><span class="hljs-regexp">/status/</span><span class="hljs-number">2012378465664745795</span>
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c52453ef063149f2819a5f764a22d5d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCb6YCbR2l0SHVi:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692722&amp;x-signature=j4KPlEoIlqoTK7W7%2BC6lTG%2BJ4l4%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<pre><code class="hljs language-ruby" lang="ruby">æŒ‡å—äºŒï¼š<span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/x.com/affaanmustafa</span><span class="hljs-regexp">/status/</span><span class="hljs-number">2012378465664745795</span>
</code></pre>
<p>02</p>
<p><strong>å¦‚ä½•ä½¿ç”¨</strong></p>
<p>åœ¨ Claude Code ä¸­æ·»åŠ æ­¤ä»“åº“ä¸ºæ’ä»¶å¸‚åœºï¼š</p>
<pre><code class="hljs language-bash" lang="bash">/plugin marketplace add affaan-m/everything-claude-code
</code></pre>
<p>å®‰è£…æ’ä»¶ï¼š</p>
<pre><code class="hljs language-css" lang="css">/plugin install everything-claude-<span class="hljs-selector-tag">code</span><span class="hljs-keyword">@everything-claude-code</span>
</code></pre>
<p>å®‰è£…å®Œæˆåï¼Œç«‹å³è·å¾—ä»“åº“ä¸­å®šä¹‰çš„æ‰€æœ‰ commands / agents / skills / hooksï¼Œå¼€ç®±å³ç”¨</p>
<p>åœ¨æ–°é¡¹ç›®å¯åŠ¨é˜¶æ®µï¼šå¯ä»¥å…ˆç”¨ /plan å‘½ä»¤è°ƒç”¨ planner/architect ç­‰ agentsï¼Œå¸®åŠ©æ¢³ç†ç›®æ ‡åŠŸèƒ½ã€é€‰æ‹©æŠ€æœ¯æ ˆå¹¶åˆ’åˆ†æ¨¡å—è¾¹ç•Œã€‚</p>
<p>åŒæ—¶å¯ç”¨ coding-style.mdã€security.mdã€testing.md ç­‰è§„åˆ™æ–‡ä»¶ï¼ŒæŠŠå›¢é˜Ÿç»Ÿä¸€çš„ç¼–ç è§„èŒƒã€å®‰å…¨è¦æ±‚å’Œæµ‹è¯•æ ‡å‡†å›ºåŒ–ä¸‹æ¥ï¼Œè®©åç»­æ‰€æœ‰å¯¹è¯å’Œç”Ÿæˆä»£ç éƒ½åœ¨åŒä¸€å·¥ç¨‹è½¨é“ä¸Šè¿è¡Œã€‚</p>
<p>åœ¨å…·ä½“å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡‡ç”¨ TDD + éªŒè¯å¾ªç¯çš„æ–¹å¼ï¼šé€šè¿‡ /tdd å‘½ä»¤è®© Claude æŒ‰ RED â†’ GREEN â†’ REFACTOR â†’ VERIFY çš„æµç¨‹æ¨è¿›å¼€å‘ã€‚</p>
<p>ç”¨ /verify æ‰§è¡Œå®ç°éªŒè¯ã€å¯¹æ¯”å’Œè¾¹ç•Œåˆ†æï¼Œåœ¨å…³é”®é‡Œç¨‹ç¢‘ä½¿ç”¨ /checkpoint è®°å½•æ€è·¯å¿«ç…§å’Œå½“å‰çŠ¶æ€ï¼Œæ—¢æ–¹ä¾¿å›æ»šï¼Œä¹Ÿæ–¹ä¾¿æ—¥åå›é¡¾è®¾è®¡å†³ç­–ã€‚</p>
<p>åœ¨è´¨é‡ä¸é•¿æœŸç»´æŠ¤æ–¹é¢ï¼Œæ—¥å¸¸å¤šç”¨ /code-review å‘½ä»¤ï¼Œè¯·ä¸“é—¨çš„ review/safety agent è¿›è¡Œä»£ç ä¸å®‰å…¨å®¡æŸ¥ï¼Œå†é…åˆ hooks è‡ªåŠ¨æ‰§è¡Œå¦‚æ¸…ç† console.logã€ç”Ÿæˆä¼šè¯æ€»ç»“ç­‰åå°ä»»åŠ¡ã€‚</p>
<p>å¯¹äºä¸­é•¿æœŸé¡¹ç›®ï¼Œåˆ™ç»“åˆ continuous-learning/ å’Œ strategic-compact/ ç›¸å…³ skills ä¸ hooksï¼Œè®© Claude æŒç»­ç§¯ç´¯é¡¹ç›®è®°å¿†ï¼Œå¹¶åœ¨ä¸Šä¸‹æ–‡æ¥è¿‘ä¸Šé™å‰åšæœ‰ç­–ç•¥çš„å‹ç¼©ï¼Œä¿è¯é•¿æœŸåä½œçš„è¿è´¯æ€§ä¸æ•ˆç‡ã€‚</p>
<p>ä½ å¯ä»¥æŠŠè¿™ä¸ªå¼€æºé¡¹ç›®ä½œä¸ºä¸€ä¸ª<strong>ç”Ÿäº§çº§èµ·æ­¥æ¨¡æ¿ï¼Œé«˜æ•ˆç”¨ Claude Code æ­å»ºä¸¥è‚ƒçš„è½¯ä»¶å·¥ç¨‹å·¥ä½œæµï¼Œåœ¨æçŸ­æ—¶é—´å†…äº§å‡ºå¯ demo çš„äº§å“ã€‚</strong> **<strong>ä¸éœ€è¦è‡ªå·±ä» 0 å†™ agents / skills / hooksã€‚</strong>*# å ªç§°å¤–æŒ‚çš„ Claude Code é…ç½®ç¥å™¨ï¼Œåœ¨ GitHub ä¸Šæ€ç–¯äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç¥›é­…ï¼å…¨ç½‘éƒ½åœ¨å¹çš„Skillsï¼Œç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602161364892270592</link>    <guid>https://juejin.cn/post/7602161364892270592</guid>    <pubDate>2026-02-03T03:05:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602161364892270592" data-draft-id="7602146335215812648" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç¥›é­…ï¼å…¨ç½‘éƒ½åœ¨å¹çš„Skillsï¼Œç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿ"/> <meta itemprop="keywords" content="Coze"/> <meta itemprop="datePublished" content="2026-02-03T03:05:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¾é³´"/> <meta itemprop="url" content="https://juejin.cn/user/3683842894347076"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç¥›é­…ï¼å…¨ç½‘éƒ½åœ¨å¹çš„Skillsï¼Œç©¶ç«Ÿæ˜¯ä¸ªå•¥ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3683842894347076/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¾é³´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:05:56.000Z" title="Tue Feb 03 2026 03:05:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å¾é³´ã€‚ä¸“æ³¨äºåˆ†äº«æå‡å·¥ä½œä¸ç”Ÿæ´»æ•ˆç‡çš„å·¥å…·ï¼Œæ— å¿åˆ†äº«AIé¢†åŸŸç›¸å…³çš„ç²¾é€‰æŠ¥å‘Šï¼ŒæŒç»­å…³æ³¨AIçš„å‰æ²¿åŠ¨å‘ã€‚</p>
<p>æœ€è¿‘Skillséå¸¸ç«çˆ†ï¼Œç½‘ä¸Šå¯ä»¥çœ‹åˆ°å¾ˆå¤šçš„æ–‡ç« åœ¨ä»‹ç»å®ƒï¼Œåå°ä¹Ÿæœ‰æŒºå¤šæœ‹å‹é—®å¯å¦æ¥ä¸€ç¯‡æ–‡ç« è®²è®²Coze Skillsï¼Ÿæˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹Skillsï¼Œç„¶åå†æ¥çœ‹çœ‹Coze Skillsã€‚</p>
<p>Skillsè¿™ä¸ªæŠ€æœ¯æ¦‚å¿µå¾ˆæ–°ï¼Œå¤§å®¶å¯èƒ½æ¯”è¾ƒé™Œç”Ÿï¼Œä½†æ˜¯å¦‚æœæˆ‘è¯´Toolsï¼Œå¦‚æœæœ‰äº†è§£AIåº”ç”¨å¼€å‘çš„ï¼Œæˆ–è®¸å°±ä¼šâ€œå“¦......â€ã€‚</p>
<p>Skillsæ˜¯ç”±Anthropicå…¬å¸åœ¨å»å¹´10æœˆä»½æ¨å‡ºæ¥çš„æŠ€æœ¯æ¦‚å¿µï¼ŒåŸæœ¬æ¨å‡ºè¿™ä¸ªSkillsæ˜¯ä¸ºäº†ç»™Claudeæ‰©å±•èƒ½åŠ›ç”¨çš„(å’ŒOpen AI æ¨å‡ºToolsçš„ç›®çš„ä¸€æ ·)ï¼Œä½†æ˜¯Skillsæ¨å‡ºæ¥ä¹‹åï¼Œä½¿ç”¨è€…ä»¬éƒ½è§‰å¾—å¼‚å¸¸çš„å¥½ç”¨ï¼Œæ‰€ä»¥å°±ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼ŒçŸ­çŸ­çš„å‡ ä¸ªæœˆå°±ç«äº†èµ·æ¥ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4408c0725c64310a99496a0afc136a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=WHP6dmXg5PTHiJ1RmmMTfT2%2F8Uw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">Skillsæ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>é€šä¿—ç‚¹æ¥ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£æˆæ˜¯ä¸€ä¸ªå¯ä»¥å¤ç”¨çš„â€œAIæŠ€èƒ½åŒ…â€ï¼Œå½“AIéœ€è¦å»å®ŒæˆæŸé¡¹ä»»åŠ¡çš„æ—¶å€™ï¼ŒAIèƒ½å¤Ÿåƒç¿»é˜…æ“ä½œæ‰‹å†Œä¸€æ ·ï¼Œè‡ªåŠ¨çš„å»åŠ è½½ç›¸å…³çš„Skillsï¼Œç„¶åé€‰æ‹©åˆé€‚çš„Skillsæ¥å®Œæˆä»»åŠ¡ã€‚</p>
<p>çœ‹ç€å¥½åƒå’ŒToolså¾ˆåƒï¼Œä½†æ˜¯å®ƒæ¯”Toolså¼ºçš„åœ°æ–¹æ˜¯ï¼ŒSkillså¹¶éä¸€æ¬¡æ€§å®Œå…¨åŠ è½½ï¼Œè€Œæ˜¯å¯ä»¥å±‚å±‚æŒ‰éœ€åŠ è½½Skillsä¸­çš„å†…å®¹ï¼ŒAIå…ˆåŠ è½½Skillsçš„æŒ‡ä»¤æ–‡ä»¶ï¼ˆçº¦100ä¸ªtokenï¼Œæ‰“æ¯”æ–¹ï¼‰ï¼Œåˆé€‚å†åŠ è½½å…¶ä»–èµ„æºï¼ˆçº¦3000ä¸ªtokenï¼Œæ‰“æ¯”æ–¹ï¼‰ï¼Œè¿™æ ·çš„å¥½å¤„å°±æ˜¯å¯ä»¥è®©AIæ‰§è¡Œä»»åŠ¡çš„æ—¶å€™æ¶ˆè€—çš„tokenåšåˆ°å°½å¯èƒ½çš„å°‘ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„Skillsï¼Œå®ƒåŒ…å«æ ¸å¿ƒæŒ‡ä»¤æ–‡ä»¶ï¼ˆSKILL.mdï¼‰ã€è„šæœ¬ï¼ˆScriptsï¼‰å’Œèµ„æºï¼ˆreferencesï¼‰æ–‡ä»¶å¤¹ã€‚</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">my</span>-skill/
â”œâ”€â”€ SKILL.md          <span class="hljs-comment"># å¿…éœ€çš„æ–‡ä»¶: æŒ‡ä»¤ + å…ƒæ•°æ®</span>
â”œâ”€â”€ scripts/          <span class="hljs-comment"># å¯é€‰æ–‡ä»¶: å¯æ‰§è¡Œçš„ä»£ç </span>
â”œâ”€â”€ references/       <span class="hljs-comment"># å¯é€‰æ–‡ä»¶: å‚è€ƒæ–‡æ¡£</span>
â””â”€â”€ assets/           <span class="hljs-comment"># å¯é€‰æ–‡ä»¶: æ¨¡æ¿ï¼Œå…¶ä»–èµ„æº</span>
</code></pre>
<p>å…³äºSkillsè§„èŒƒçš„æ›´è¯¦ç»†çš„æè¿°ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹å®˜æ–¹çš„å®šä¹‰ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fagentskills.io%2Fhome" target="_blank" title="https://agentskills.io/home" ref="nofollow noopener noreferrer">agentskills.io/home</a>ã€‚</p>
<h2 data-id="heading-1">Skillså’Œå…¶ä»–æ¦‚å¿µä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2>
<p><strong>1ã€Skillså’Œæç¤ºè¯ï¼š</strong> æç¤ºè¯æ›´å¤šçš„æ˜¯åå‘äºå¯¹AIçš„è¡Œä¸ºçš„çº¦æŸï¼Œæ¯”å¦‚é™å®šAIçš„è§’è‰²ã€ä»»åŠ¡ã€åŠ¨ä½œç­‰ï¼Œæ›´å¤šçš„åƒæ˜¯å¯¹AIçš„å£å¤´æŒ‡å¯¼ï¼ŒAIä¸‹æ¬¡å°±é—å¿˜äº†ã€‚</p>
<p>Skillsåˆ™æ›´åŠ çš„ç³»ç»ŸåŒ–ï¼Œæ˜¯ä¸€ä¸ªå°é—­ç¯ï¼Œé‡Œé¢åŒ…å«äº†å¯¹è¿™ä¸ªæŠ€èƒ½çš„æè¿°ã€è¯´æ˜ç­‰å…ƒæ•°æ®ï¼Œæœ‰æç¤ºè¯ã€è„šæœ¬ã€èµ„æºç­‰ï¼Œç»“æ„ä¼šæ›´æ¸…æ™°ï¼Œå½“ä½ å¯¹æŸä¸ªæç¤ºè¯åœ¨åå¤çš„å¤åˆ¶é»è´´çš„æ—¶å€™ï¼Œå°±å¯ä»¥è€ƒè™‘æŠŠå®ƒå°è£…æˆä¸€ä¸ªæŠ€èƒ½ã€‚</p>
<p><strong>2ã€Skillså’Œæ’ä»¶ï¼š</strong> æ’ä»¶æ˜¯å¯¹å¤–éƒ¨çš„APIè°ƒç”¨æˆ–è€…æ˜¯å¤„ç†æŸä¸ªä»»åŠ¡çš„å®é™…æ“ä½œï¼›è€ŒSkillsé™¤äº†èƒ½åŒ…å«æ’ä»¶æ‰€æ‹¥æœ‰çš„åŠŸèƒ½ä¹‹å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä»½ç±»ä¼¼äºæ“ä½œæŒ‡å¯¼æ‰‹å†Œçš„å…ƒæ•°æ®ï¼Œå¯ä»¥æŒ‡å¯¼AIåº”è¯¥å¦‚ä½•ä½¿ç”¨å®ƒã€‚</p>
<p><strong>3ã€Skillså’Œå·¥ä½œæµï¼š</strong> å·¥ä½œæµåƒæ˜¯é¢„è®¾å¥½çš„ä¸€æ¡å·¥å‚æµæ°´çº¿ï¼Œé‡Œé¢çš„æ¯ä¸€ä¸ªæ­¥éª¤éƒ½æ˜¯éå¸¸å›ºå®šï¼Œè¾“å…¥äº†ä»€ä¹ˆåŸææ–™ï¼Œé‚£ä¹ˆå°±ä¼šè¾“å‡ºé¢„æƒ³çš„äº§å“ï¼›è€ŒSkillsåˆ™æ˜¯ä¸“ä¸šçš„å·¥å…·ã€çŸ¥è¯†åˆé›†ï¼Œå®ƒæ›´å¤šçš„åƒæ˜¯æŸç±»æŠ€èƒ½çš„æŒ‡å¯¼æ‰‹å†Œï¼ŒæŒ‡å¯¼AIæ ¹æ®æ‰‹å†Œè‡ªä¸»å†³ç­–æ€ä¹ˆæ‰§è¡Œã€‚</p>
<p><strong>4ã€Skillså’Œæ™ºèƒ½ä½“ï¼š</strong> æ™ºèƒ½ä½“æ˜¯æœ‰è‡ªä¸»èƒ½åŠ›ã€ä¼šæ€è€ƒå¦‚ä½•æ‰§è¡Œçš„æœºå™¨äººï¼Œè€ŒSkillsåˆ™åƒæ˜¯æœºå™¨äººçœ¼ç›ä¸Šçš„æ‘„åƒå¤´ï¼Œå¯ä»¥è®©æœºå™¨äººçŸ¥é“åº”è¯¥å¦‚ä½•æ‰“å¼€å®ƒã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/871c53d5a2384596b4f192b7cb6a413b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=BHwdRQplLcLzbMUjigSXutrxwX0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">Coze Skillså¦‚ä½•ï¼Ÿ</h2>
<p>Cozeä¸­çš„æŠ€èƒ½å…¶å®å°±æ˜¯followäº†Anthropicæ¨å‡ºæ¥çš„è¿™å¥—è§„èŒƒï¼Œè¦äº†è§£Coze Skillså¦‚ä½•åˆ¶ä½œçš„ï¼Œå¯ä»¥æ›´å¤šçš„å»å¥½å¥½çš„äº†è§£Anthropicå®˜æ–¹çš„è¿™å¥—è§„èŒƒå³å¯ï¼ŒæŒ‰ç…§åŒ…é‡Œé¢çš„å†…å®¹åŸºæœ¬éƒ½éµå®ˆã€‚</p>
<p>Cozeèµ°çš„æ¯”è¾ƒå‰çš„æ˜¯ï¼Œå®ƒæŠŠAnthropicç»™äº§å“åŒ–äº†ï¼Œè¿™è®©åŸæœ¬åªèƒ½åœ¨Claudeä¾§æ‰èƒ½ç©è½¬çš„Skillsç›´æ¥è®©äººä»¬åœ¨å®ƒçš„äº§å“é¡µé¢ä¸Šç‚¹ç‚¹ç‚¹ã€é—®é—®é—®å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªä¸“å±çš„Skillsã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e85fccbbc47402f89f577276db0936f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=hlA0Ui4xc7vS3mW10OTLlk%2B6axU%3D" alt="" loading="lazy"/></p>
<p>Cozeä¸Šçš„Skillsæœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§å°±æ˜¯ä½ å¯ä»¥ç›´æ¥åœ¨æŠ€èƒ½æ¡†ä¸­è¾“å…¥ä½ çš„éœ€æ±‚ï¼Œé€šè¿‡è‡ªç„¶è¯­è¨€çš„æ–¹å¼æ¥åˆ›å»ºä¸€ä¸ªæŠ€èƒ½ã€‚</p>
<p>æ¯”å¦‚ï¼Œâ€œæˆ‘æƒ³åˆ›å»ºä¸€ä¸ª[åŠŸèƒ½åç§°]çš„ Skillï¼Œç”¨äº[è§£å†³ä»€ä¹ˆé—®é¢˜]ï¼Œå½“ç”¨æˆ·[è§¦å‘åœºæ™¯]æ—¶ä½¿ç”¨ï¼Œè¾“å‡º[æœŸæœ›æ ¼å¼å’Œå†…å®¹]ã€‚â€ï¼Œå°±æ˜¯å¥—ç”¨è¿™æ ·çš„ä¸€ä¸ªæç¤ºè¯æ¨¡æ¿ï¼Œå°±å¯ä»¥è®©æ‰£å­ç¼–ç¨‹ç»™ä½ ç”Ÿæˆä¸€ä¸ªæŠ€èƒ½ã€‚</p>
<p>ç¬¬äºŒç§ç”ŸæˆæŠ€èƒ½çš„æ–¹å¼ï¼Œå°±æ˜¯ä¸Šä¼ æŠ€èƒ½åŒ…çš„æ–¹å¼ï¼Œå°±æ˜¯æŒ‰ç…§æ–‡ç« å¼€å¤´éƒ¨åˆ†ç»™å¤§å®¶ä»‹ç»çš„Skillsçš„è§„èŒƒæ‰“åŒ…å¥½Skillsï¼Œç„¶åç›´æ¥ä¸Šä¼ ï¼Œå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªä½ çš„æŠ€èƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/726349a750c0452e94fca4f43cdc3b8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=T6TAGWptnHp40ziJOSrpN9H%2Fcyc%3D" alt="" loading="lazy"/></p>
<p>ç”Ÿæˆå¥½ä½ çš„æŠ€èƒ½ï¼Œç´§æ¥ç€å°±æ˜¯éƒ¨ç½²å‘å¸ƒäº†ï¼Œè¿™ä¸ªå’Œæˆ‘ä¹‹å‰å‘è¿‡çš„ä½¿ç”¨æ‰£å­ç¼–ç¨‹çš„æµç¨‹ä¸€è‡´ï¼Œè¿™éƒ¨åˆ†æµç¨‹ä¸æ‡‚çš„å¯ä»¥çœ‹çœ‹ä¹‹å‰æ–‡ç« å‚è€ƒâ€”â€”ã€Šæ— ä»£ç æ—¶ä»£çœŸæ¥äº†ï¼Ÿæ‰£å­ï¼ˆCozeï¼‰ä¸€å¥è¯ç”Ÿæˆå·¥ä½œæµã€‹ã€‚</p>
<p>å½“ä½ åšå¥½äº†ä¸€ä¸ªæŠ€èƒ½ä¹‹åï¼Œå¯ä»¥æ€ä¹ˆæ ·å»ä½¿ç”¨è¿™ä¸ªæŠ€èƒ½ï¼Ÿåªéœ€è¦åœ¨å¯¹è¯æ¡†ä¸­ç›´æ¥@ä½ çš„æŠ€èƒ½ï¼Œç»™å®ƒæä¾›ä¿¡æ¯å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/934b21d4d2534c6685c18af225182fb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=av2F8NIWMs4wRq1A%2FJAwc2hd17w%3D" alt="" loading="lazy"/></p>
<p>Cozeä¹‹æ‰€ä»¥å¸å¼•äº†è¿™ä¹ˆå¤šäººåˆ°ä¸Šé¢å¼€å‘Skillsï¼Œä¸»è¦æ˜¯å› ä¸ºå®ƒçš„æŠ€èƒ½å•†åº—ï¼Œå°±æ˜¯ä½ æŠŠä½ çš„æ“…é•¿çš„æŸä¸€ä¸ªè¡Œä¸šçš„ä¸“ä¸šçŸ¥è¯†å°è£…æˆä¸€ä¸ªæŠ€èƒ½ä¹‹åï¼Œä½ å¯ä»¥ç›´æ¥æŠŠä½ çš„æŠ€èƒ½ä¸Šæ¶åˆ°èŠ‚èƒ½å•†åº—ï¼Œä¸Šæ¶åˆ°æŠ€èƒ½å•†åº—ä¹‹åï¼Œåˆ«äººå¯ä»¥ç›´æ¥ä½¿ç”¨ä½ çš„æŠ€èƒ½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/79ab68e21ec44bccba5f31dbb9988caa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=1U%2F2Bvj3e4fcB9BYWr%2BRluQAny0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å»å“ªæ‰¾å¥½ç”¨çš„Skillsï¼Ÿ</h2>
<p>æ­£æ‰€è°“æˆäººä»¥é±¼ä¸å¦‚æˆäººä»¥æ¸”ï¼Œå¯¹äºæˆ‘ä»¬å¤§éƒ¨åˆ†æƒ³æé«˜æ•ˆç‡çš„äººï¼Œé‚£å½“ç„¶æ˜¯æ‹¿æ¥ä¸»ä¹‰ï¼Œä½¿ç”¨ç°æˆçš„æŠ€èƒ½æ‰æ˜¯æœ€çˆ½çš„ã€‚</p>
<p>ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯åˆ°Cozeçš„å®˜æ–¹æŠ€èƒ½å•†åº—ä¸Šé¢å»æ‰¾ï¼Œçœ‹åˆ°åˆé€‚çš„æŠ€èƒ½ï¼ŒæŠŠå®ƒæ·»åŠ åˆ°ä½ è‡ªå·±çš„æŠ€èƒ½ä¸­å³å¯ã€‚</p>
<p>ç¬¬äºŒç§æ–¹æ³•ï¼Œæ˜¯ä»å…¶ä»–çš„ç½‘ç«™ä¸Šé¢å»æ‰¾ï¼Œä¸‹é¢åˆ†äº«ä¸€äº›æ‰¾èƒ½åˆ°ç°æˆSkillçš„ä¸€äº›ç½‘ç«™ã€‚</p>
<p>1ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanthropics%2Fskills" target="_blank" title="https://github.com/anthropics/skills" ref="nofollow noopener noreferrer">github.com/anthropics/â€¦</a> è¿™ä¸ªæ˜¯Anthropicçš„å®˜æ–¹skillsï¼Œå¹²å‡€ï¼Œè§„èŒƒï¼Œæƒ³å­¦ä¹ å¦‚ä½•åˆ¶ä½œskillsçš„å¯ä»¥ä»è¿™ä¸ªå…¥æ‰‹ï¼Œä¸å¥½çš„åœ°æ–¹å°±æ˜¯æ•°é‡ä¸å¤šã€‚</p>
<p>2ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FComposioHQ%2Fawesome-claude-skills" target="_blank" title="https://github.com/ComposioHQ/awesome-claude-skills" ref="nofollow noopener noreferrer">github.com/ComposioHQ/â€¦</a> åˆ†ç±»å¾ˆæ¸…æ™°ï¼Œä½†æ˜¯æ›´æ–°é¢‘ç‡ä¸é«˜ï¼Œå¹³å¸¸ä¹Ÿå¯ä»¥é€›é€›ã€‚</p>
<p>3ã€<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ftravisvn%2Fawesome-claude-skills" target="_blank" title="https://github.com/travisvn/awesome-claude-skills" ref="nofollow noopener noreferrer">github.com/travisvn/awâ€¦</a> è¿™ä¸ªæ˜¯ç”±ç¤¾åŒºæˆå‘˜Travisç»´æŠ¤çš„ä¸€ä¸ªæŠ€èƒ½åˆ—è¡¨ï¼Œæ•°é‡å’Œè´¨é‡éƒ½å¾ˆä¸é”™ï¼Œæƒ³çœ‹çœ‹æœ‰æ²¡æœ‰ä»€ä¹ˆé»‘ç§‘æŠ€çš„å¯ä»¥é€›é€›ã€‚</p>
<p>4ã€<a href="https://link.juejin.cn?target=http%3A%2F%2Fskillsmp.com" target="_blank" title="http://skillsmp.com" ref="nofollow noopener noreferrer">skillsmp.com</a>Â è¿™ä¸ªç›®å‰skillsçš„ä½“é‡æœ€å¤§ï¼Œé€šè¿‡çˆ¬è™«æ”¶é›†ï¼Œæ›´æ–°é¢‘ç‡æ æ æ»´ï¼Œä½†æ˜¯è´¨é‡å‚å·®ä¸é½ï¼Œæƒ³è¦æ‰¾çµæ„Ÿçš„å¯ä»¥å¤šé€›é€›ã€‚</p>
<p>5ã€<a href="https://link.juejin.cn?target=http%3A%2F%2Fskills.sh" target="_blank" title="http://skills.sh" ref="nofollow noopener noreferrer">skills.sh</a> è¿™ä¸ªæ˜¯å®˜æ–¹åˆä½œçš„é«˜è´¨é‡çš„å‰æ®µå’Œéƒ¨ç½²æ–¹å‘çš„å¯ä»¥çœ‹çœ‹ã€‚</p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>Skillsæ˜¯ä¸€ä¸ªå¾ˆæ–°çš„æŠ€æœ¯æ¦‚å¿µï¼Œä½†æ˜¯èƒ½çˆ†ç«è‚¯å®šæ˜¯æœ‰å®ƒçš„ä¼˜ç‚¹ï¼Œæ¯”å¦‚æ¶ˆè€—çš„tokenæ›´å°‘ï¼Œèƒ½æ›´å¥½çš„æ‰©å±•ï¼Œä½†æ˜¯è¿™ä¸ªç©æ„å¯¹æ¨¡å‹çš„è¦æ±‚æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ¨¡å‹æ¨ç†èƒ½åŠ›ä¸å¼ºçš„è¯ï¼Œå¾ˆå¯èƒ½ä¼šæ‰¾é©¬å¾—é©´ã€‚</p>
<p>æœ¬æ–‡çš„åˆ†äº«å°±åˆ°è¿™é‡Œï¼Œå¦‚æœæ‚¨è§‰å¾—æœ‰æ”¶è·çš„è¯ï¼Œå¯ä»¥ç»™ä¸ªä¸€é”®ä¸‰è¿ï¼Œæ‚¨çš„é¼“åŠ±æ˜¯å¾é³´æŒç»­è¾“å‡ºçš„æœ€å¤§åŠ¨åŠ›ã€‚æœ‰ä»€ä¹ˆç–‘é—®ä¹Ÿå¯ä»¥æ‰“åœ¨è¯„è®ºåŒºï¼Œå¾é³´ä¼šç¬¬ä¸€æ—¶é—´å›å¤ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5bcb5c1e75d04e249af2ec0bd5fc2b25~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5ZC-6bO0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770692756&amp;x-signature=eFwZgQ1OqlSRID43LjmHUMROqYU%3D" alt="" loading="lazy"/></p>
<p>æœ€è¿‘å®æˆ˜äº†ä¸€äº›æ‰£å­ï¼ˆCozeï¼‰å·¥ä½œæµç›¸å…³çš„æ¡ˆä¾‹ï¼ŒåŒ…å«å°çº¢è–¯å›¾æ–‡ç”Ÿæˆã€çˆ†æ¬¾è§†é¢‘å‰ªè¾‘ã€åŠå…¬ææ•ˆç­‰æ‰£å­æ¡ˆä¾‹ï¼Œå†…é™„è¯¦ç»†çš„æ•™ç¨‹å’Œå·¥ä½œæµå®‰è£…åŒ…ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥æ¥ä¸ª<strong>ä¸€é”®ä¸‰è¿ï¼ˆå¿…é¡»åŠ¨ä½œï¼‰</strong> ï¼Œæ–‡ç« è¯„è®ºåŒºè¯„è®ºâ€œ<strong>æ‰£å­æ¡ˆä¾‹</strong>â€é¢†å–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ§  æ¶æ„å¸ˆçš„æ€ç»´ä¸å¼€å‘å‡†åˆ™]]></title>    <link>https://juejin.cn/post/7602259669730361371</link>    <guid>https://juejin.cn/post/7602259669730361371</guid>    <pubDate>2026-02-03T03:53:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669730361371" data-draft-id="7602259669730344987" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ§  æ¶æ„å¸ˆçš„æ€ç»´ä¸å¼€å‘å‡†åˆ™"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T03:53:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ§  æ¶æ„å¸ˆçš„æ€ç»´ä¸å¼€å‘å‡†åˆ™
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:53:37.000Z" title="Tue Feb 03 2026 03:53:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€è„‘åŠ›ä¸æ€è€ƒä¹ æƒ¯</h2>
<blockquote>
<p>è¡Œä¸‡é‡Œè·¯ï¼Œä¸å¦‚è„‘å­æƒ³æ¸…æ¥šã€‚<br/>
å›ç­”è¦å‡†ç¡®ï¼Œè¦æœ‰é¢„æ¡ˆã€é¢„ä¼°ï¼Œè®©é¢†å¯¼æ„Ÿå—æ¸…æ¥šã€‚</p>
</blockquote>
<p>åœ¨å¼€å‘ä¸æ¶æ„å·¥ä½œä¸­ï¼Œâ€œè„‘åŠ›â€å¹¶éåªæ˜¯æŠ€æœ¯ç†Ÿç»ƒåº¦ï¼Œè€Œæ˜¯<strong>ç³»ç»Ÿæ€§æ€è€ƒ</strong>çš„ä½“ç°ã€‚é¢å¯¹å¤æ‚ä¸šåŠ¡æ—¶ï¼Œå…³é”®åœ¨äºï¼š</p>
<ul>
<li><strong>æƒ³æ¸…æ¥šè·¯å¾„</strong>ï¼šåœ¨åŠ¨æ‰‹å‰ç†æ¸…é—®é¢˜è¾¹ç•Œä¸é¢„æœŸç»“æœã€‚</li>
<li><strong>æå‰åšé¢„æ¡ˆ</strong>ï¼šä¸ºå¯èƒ½çš„å˜åŒ–ã€å¤±è´¥åšå‡†å¤‡ã€‚</li>
<li><strong>ç»“æœè¦ä¼ è¾¾æ¸…æ™°</strong>ï¼šè®©ç®¡ç†è€…ä¸åˆä½œæ–¹å¬å¾—æ‡‚ã€æ„Ÿå—åˆ°â€œç¡®å®šæ€§â€ã€‚</li>
</ul>
<p>å¥½çš„å·¥ç¨‹å¸ˆï¼Œä¸åªæ˜¯ä»£ç å·¥äººï¼Œè€Œæ˜¯èƒ½â€œå¸¦è„‘å­ä¸Šæµæ°´çº¿â€çš„äººã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ä»£å…¥è§’è‰²ä¸æŠŠæ¡åº¦</h2>
<p>ä¸åŒè§’è‰²å¯¹åº”ä¸åŒè§†è§’ï¼š</p>
<ul>
<li>ğŸ§© <strong>å¼€å‘è€…è§†è§’</strong>ï¼šå…³å¿ƒä»»åŠ¡æ‹†è§£ä¸å®ç°æ•ˆç‡ã€‚</li>
<li>ğŸ§± <strong>æ¶æ„å¸ˆè§†è§’</strong>ï¼šå…³å¿ƒç»“æ„å¯å¤ç”¨ã€æ‰©å±•æ€§ä¸æµè½¬é€»è¾‘ã€‚</li>
<li>ğŸš€ <strong>é¢†å¯¼è§†è§’</strong>ï¼šå¸Œæœ›çœ‹åˆ°æ¸…æ™°çš„ç›®æ ‡ã€èŠ‚å¥ä¸äº§å‡ºã€‚</li>
</ul>
<p><strong>â€œæŠŠæ¡åº¦â€å°±æ˜¯åœ¨ä¸åŒè§’è‰²ä¸­åˆ‡æ¢æ€ç»´çš„èƒ½åŠ›ã€‚</strong><br/>
æ‡‚å¾—åœ¨ç»†èŠ‚ä¸å…¨å±€é—´æ¥å›åˆ‡æ¢ï¼Œæ˜¯ä»â€œç†Ÿç»ƒå·¥â€åˆ°â€œè®¾è®¡è€…â€çš„å…³é”®ä¸€æ­¥ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€æ¶æ„å¸ˆçš„é«˜åº¦ï¼šå†³å®šäºèƒ¸æ€€ä¸ç›®æ ‡</h2>
<blockquote>
<p>å¿ƒèƒ¸å’Œç›®æ ‡å†³å®šæ¶æ„å¸ˆçš„é«˜åº¦ã€‚<br/>
åŸºç¡€ç»„ä»¶æ˜¯ä¸ºäº†å¿«é€Ÿå‡ºæˆæœï¼Œè€Œæ ¸å¿ƒæ˜¯å¯¹ä¸šåŠ¡çš„ç†è§£ä¸æµè½¬ã€‚</p>
</blockquote>
<p>ä¸€ä¸ªä¼˜ç§€çš„æ¶æ„å¸ˆå¿…é¡»åœ¨â€œæ•ˆç‡â€ä¸â€œç†è§£â€ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ï¼š</p>
<ul>
<li><strong>åŸºç¡€ç»„ä»¶</strong>ï¼šæ ‡å‡†åŒ–è¾“å‡ºï¼Œå¿«é€Ÿè½åœ°ã€‚</li>
<li><strong>ä¸šåŠ¡ç†è§£</strong>ï¼šæ·±å…¥æ€è€ƒä¸šåŠ¡æœ¬è´¨ï¼Œæ‰¾åˆ°çœŸæ­£å¯å¤ç”¨çš„é€»è¾‘å•å…ƒã€‚</li>
<li><strong>æµè½¬ä¸æ€è€ƒæ¨¡å‹</strong>ï¼šè®©ä»£ç ã€éœ€æ±‚ã€äº§å“åœ¨æµè½¬ä¸­ä¿æŒä¸€è‡´æ€§ã€‚</li>
</ul>
<p>æ¶æ„ä»ä¸æ˜¯â€œé«˜å¤§ä¸Šâ€çš„å·¥ç¨‹ï¼Œè€Œæ˜¯ä¸€ç§<strong>æŒç»­ç†è§£ä¸šåŠ¡ã€æŠ½è±¡å…±æ€§</strong>çš„è¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-3">å››ã€å¼€å‘æ‰§è¡Œå‡†åˆ™ï¼ˆDev Roadmapï¼‰</h2>
<blockquote>
<p>ä»ç¡®å®šæ€§å‡ºå‘ï¼Œåˆ°é«˜è´¨é‡äº¤ä»˜ã€‚</p>
</blockquote>























































<table><thead><tr><th align="left">é˜¶æ®µ</th><th align="left">å†…å®¹</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">a</td><td align="left">âœ… æ¢³ç†ç¡®å®šæ€§çš„éœ€æ±‚</td><td align="left">è¯†åˆ«ä¿¡æ¯ä¸å¯¹ç§°ç‚¹ï¼Œé¿å…æµªè´¹</td></tr><tr><td align="left">b</td><td align="left">ğŸ§± åŸºç¡€å‰ç«¯é™æ€é¡µé¢</td><td align="left">ç¡®å®šé¡µé¢ç»“æ„ä¸åˆæ­¥æ ·å¼</td></tr><tr><td align="left">c</td><td align="left">ğŸ“¦ å‰ç«¯åŸºç¡€æ•°æ®ç»“æ„</td><td align="left">å®šä¹‰æ ¸å¿ƒ store ä¸å‘½åè§„èŒƒ</td></tr><tr><td align="left">d</td><td align="left">âš™ï¸ æ‰©å±•ä¸šåŠ¡æ•°æ®ç»“æ„</td><td align="left">é€‚é…çœŸå®ä¸šåŠ¡æµè½¬</td></tr><tr><td align="left">e</td><td align="left">ğŸ”„ mock æ•°æ®</td><td align="left">æ¨¡æ‹ŸçœŸå®è¯·æ±‚å’Œäº¤äº’</td></tr><tr><td align="left">f</td><td align="left">ğŸ¨ ä¼˜åŒ–åçš„è§†å›¾</td><td align="left">ç•Œé¢è§†è§‰ä¼˜åŒ–ä¸ç»“æ„è°ƒæ•´</td></tr><tr><td align="left">g</td><td align="left">ğŸ§© å®Œå–„äº¤äº’</td><td align="left">éª¨æ¶å±ã€é€»è¾‘äº¤äº’â€”â€”æ‹’ç»æ— æ•ˆå¼€å‘</td></tr><tr><td align="left">h</td><td align="left">ğŸ”— å¯¹æ¥çœŸå® API</td><td align="left">æ ¸å¿ƒå­—æ®µåè¦ä¸åç«¯ä¿æŒä¸€è‡´</td></tr><tr><td align="left">i</td><td align="left">ğŸ§ª è‡ªæµ‹æ”¶å°¾</td><td align="left">è‡ªåŠ¨åŒ–æˆ–åŠè‡ªåŠ¨åŒ–éªŒè¯æµç¨‹</td></tr></tbody></table>
<p>ğŸ“Œ <strong>åŸåˆ™</strong>ï¼šèƒ½è·‘çš„æœ€å°é—­ç¯ç‰ˆæœ¬ &gt; ç©ºæ´çš„â€œå…¨åŠŸèƒ½è®¡åˆ’â€ã€‚<br/>
æˆ‘ä»¬åªåšåŠ©æ¨ä¸šåŠ¡èŠ‚å¥çš„åŠŸèƒ½ï¼Œä¸åœ¨è¾¹è§’åŠŸèƒ½è¿·å¤±æ–¹å‘ã€‚</p>
<hr/>
<h2 data-id="heading-4">äº”ã€ç§¯ç´¯ä¸æ²‰æ·€</h2>
<ul>
<li>
<p><strong>æ—¥å¸¸ç§¯ç´¯æ¨¡æ¿</strong>ï¼š</p>
<ul>
<li>ğŸ—‚ OA ç³»ç»Ÿæ¨¡æ¿ï¼š<code>oa-start-template</code></li>
<li>ğŸ›  æœºå™¨è®¾å¤‡æ¨¡æ¿ï¼š<code>machine-start-template</code></li>
</ul>
</li>
<li>
<p><strong>å­¦ä¹ è·¯å¾„</strong>ï¼š</p>
<ul>
<li>ç ”ç©¶ä¼˜ç§€ä½œè€…æ¨èçš„æ¡†æ¶æˆ–æºç ï¼›</li>
<li>æ¨¡ä»¿ä¼˜ç§€é¡¹ç›®çš„ç»„ç»‡ç»“æ„ï¼›</li>
<li>ç´¯ç§¯å¯è¿ç§»çš„æ¨¡å¼ï¼ˆStoreã€Routeã€Hookã€Componentï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>ç»éªŒä¸åœ¨é¡¹ç›®æ•°é‡ï¼Œè€Œåœ¨ä½ èƒ½å¦â€œæç‚¼å‡ºä¸‹ä¸€ä¸ªæ¨¡æ¿â€ã€‚</p>
<hr/>
<h2 data-id="heading-5">å…­ã€Storeï¼šè¿œä¸æ­¢å…¨å±€çŠ¶æ€</h2>
<blockquote>
<p>â€œä¸€ä¸ª store çš„æ„ä¹‰ï¼Œè¿œè¿œå¤§äºå…¨å±€çŠ¶æ€è¿™ä¸ªæ¦‚å¿µã€‚â€</p>
</blockquote>
<p>Store è¿æ¥ç€æ•°æ®æµã€é€»è¾‘æµä¸ä¸šåŠ¡æµï¼Œå®ƒçš„æ ¸å¿ƒä»·å€¼åœ¨äºï¼š</p>
<ul>
<li><strong>ç»“æ„æ€§</strong>ï¼šæ¸…æ™°çš„æ•°æ®æ¥æºä¸å½’å®¿ã€‚</li>
<li><strong>çµæ´»æ€§</strong>ï¼šå¯åº”å¯¹å¤šåœºæ™¯è½»é‡åˆ†æ”¯é€»è¾‘ã€‚</li>
<li><strong>å¯æ‰©å±•æ€§</strong>ï¼šå¤©ç„¶å…·å¤‡æ¨¡å—åŒ–æ¥å…¥èƒ½åŠ›ã€‚</li>
</ul>
<p>è¿›ä¸€æ­¥ï¼Œ<strong>å‘½åä½“ç³»</strong>ï¼ˆæ–‡ä»¶å‘½åã€è·¯ç”±å‘½åï¼‰ä¹Ÿæ˜¯éšå½¢çš„æ¶æ„åŠ›ã€‚<br/>
è‰¯å¥½çš„å‘½åä¹ æƒ¯èƒ½å†³å®šä¸€ä¸ªé¡¹ç›®çš„ç»´æŠ¤æˆæœ¬ä¸ç”Ÿå‘½å‘¨æœŸã€‚</p>
<hr/>
<h2 data-id="heading-6">ä¸ƒã€è®¾è®¡ä¸è§†è§‰ï¼šæ¶æ„ä¸»é¢˜çš„ç¾å­¦è¡¨è¾¾</h2>
<p>ç³»ç»Ÿé£æ ¼ä¸åªæ˜¯é…è‰²ä¸æ ·å¼ï¼Œè€Œæ˜¯<strong>æ¶æ„ç†å¿µçš„è§†è§‰å»¶ä¼¸</strong>ã€‚<br/>
å»ºè®®æ ¹æ®å›¢é˜Ÿä¸»é¢˜è‰²ç»Ÿä¸€ç³»ç»Ÿ UI é£æ ¼ï¼Œä¸å¤§å‚ä½“éªŒå¯¹é½ï¼š</p>
<ul>
<li>
<p>ğŸ¨ å¯¹æ ‡é£æ ¼ï¼š<strong>X / Google / GitHub</strong></p>
</li>
<li>
<p>âœ¨ å®è·µæ–¹å‘ï¼š</p>
<ul>
<li>ä½¿ç”¨æµ…è°ƒä¸»è‰² + ä¸­æ€§è‰²èƒŒæ™¯ï¼›</li>
<li>ä¿ç•™å‘¼å¸ç©ºé—´ä¸å±‚çº§å…³ç³»ï¼›</li>
<li>å¼•å…¥ç»Ÿä¸€çš„é˜´å½±ã€åœ†è§’åŠçŠ¶æ€åé¦ˆï¼›</li>
<li>å¢å¼ºç»†èŠ‚äº¤äº’ä½“éªŒï¼ˆhoverã€skeletonã€loadingï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>è§†è§‰çš„ä¸€è‡´æ€§ï¼Œæ˜¯ä¸“ä¸šæ„Ÿçš„ç¬¬ä¸€å°è±¡ã€‚<br/>
é¡µé¢ä¹‹â€œç¾â€ï¼Œæ˜¯æ¶æ„ç†å¿µçš„å»¶ä¼¸ã€‚</p>
<hr/>
<h2 data-id="heading-7">ğŸ§­ ç»“è¯­</h2>
<blockquote>
<p>æ¶æ„ä¸æ˜¯è®¾è®¡å›¾ï¼Œè€Œæ˜¯ä¸€ç§â€œæ€è€ƒçš„æ–¹å¼â€ã€‚<br/>
æ€è€ƒæ¸…æ¥šï¼Œæ¯”èµ°å¾—å¿«æ›´é‡è¦ï¼›<br/>
ç»“æ„æ¸…æ™°ï¼Œæ¯”åŠŸèƒ½å¤šæ›´æŒä¹…ã€‚</p>
</blockquote>
<p>æ¶æ„å¸ˆåº”åƒå¯¼æ¼”ï¼Œæ—¢æŒæ§èŠ‚å¥ï¼Œåˆç†è§£æ¯ä¸ªè§’è‰²çš„æ„ä¹‰ã€‚<br/>
å¦‚æ­¤ï¼Œå›¢é˜Ÿæ‰èƒ½åœ¨ä¸€æ¡æ¸…æ™°çš„çº¿ä¸Šâ€”â€”<strong>èªæ˜åœ°å‰è¿›</strong>ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¡¹ç›®å¯åŠ¨ä¸‰é˜¶æ®µï¼šä»æ€åˆ°å½¢]]></title>    <link>https://juejin.cn/post/7602303923140247602</link>    <guid>https://juejin.cn/post/7602303923140247602</guid>    <pubDate>2026-02-03T03:55:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602303923140247602" data-draft-id="7602252722373017651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¡¹ç›®å¯åŠ¨ä¸‰é˜¶æ®µï¼šä»æ€åˆ°å½¢"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T03:55:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="LeonGao"/> <meta itemprop="url" content="https://juejin.cn/user/3976252950591149"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¡¹ç›®å¯åŠ¨ä¸‰é˜¶æ®µï¼šä»æ€åˆ°å½¢
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3976252950591149/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    LeonGao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:55:24.000Z" title="Tue Feb 03 2026 03:55:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-light">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#383a42;background:#fafafa}.hljs-comment,.hljs-quote{color:#a0a1a7;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e45649}.hljs-literal{color:#0184bb}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#50a14f}.hljs-built_in,.hljs-class .hljs-title{color:#c18401}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#4078f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><h2 data-id="heading-0">ğŸš€ ä¸€ã€é¡¹ç›®å¯åŠ¨ä¸‰é˜¶æ®µï¼šä»æ€åˆ°å½¢</h2>
<p>é¡¹ç›®å¯åŠ¨å¯ä»¥æ‹†æˆä¸‰ä¸ªé˜¶æ®µï¼Œæ¯ä¸ªé˜¶æ®µå¯¹åº”ä¸Šæ–‡çš„æ€ç»´è¦ç‚¹å’Œæ‰§è¡Œå‡†åˆ™ã€‚</p>
<h3 data-id="heading-1"><strong>é˜¶æ®µ 1ï¼šæ€è€ƒä¸è®¾è®¡ï¼ˆè„‘åŠ›é˜¶æ®µï¼‰</strong></h3>
<blockquote>
<p>â€œè¡Œä¸‡é‡Œè·¯ï¼Œä¸å¦‚è„‘å­æƒ³æ¸…æ¥šã€‚â€</p>
</blockquote>
<p><strong>ç›®æ ‡ï¼šç¡®å®šæ€§è¦å¤§äºè¡ŒåŠ¨é€Ÿåº¦ã€‚</strong></p>
<p><strong>å…³é”®è¾“å‡ºï¼š</strong></p>
<ul>
<li>âœ… ä¸šåŠ¡ç›®æ ‡æ¸…å•ï¼ˆæ ¸å¿ƒå¯äº¤ä»˜æ˜¯ä»€ä¹ˆï¼Ÿï¼‰</li>
<li>âœ… æŠ€æœ¯é€‰å‹ &amp; æ¨¡å—åˆ’åˆ†ï¼ˆåŸºäºæ¨¡æ¿å¯åŠ¨ï¼‰</li>
<li>âœ… ç»„ä»¶ç²’åº¦ &amp; æ•°æ®æµæ–¹å‘ï¼ˆå†³å®šæ¶æ„é£æ ¼ï¼‰</li>
<li>âœ… é£é™©ç‚¹ä¸é¢„æ¡ˆï¼ˆæ¥å£ä¸ç¡®å®šã€UIå»¶è¿Ÿè®¾è®¡ç­‰ï¼‰</li>
</ul>
<p><strong>æ–¹æ³•è½åœ°ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>oa-start-template</code> æˆ– <code>machine-start-template</code> åˆ›å»ºåŸºç¡€ç›®å½•ç»“æ„ã€‚</li>
<li>å…ˆå†™å‡ºåŸºç¡€ <code>store</code> ç»“æ„ä¸ <code>route</code> å‘½åæ–¹æ¡ˆã€‚</li>
<li>output ä¸€ä¸ªç®€æ´çš„æ¶æ„è‰å›¾æˆ– READMEï¼Œè®©å›¢é˜Ÿâ€œå¿ƒé‡Œæœ‰å›¾â€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-2"><strong>é˜¶æ®µ 2ï¼šæ„å»ºä¸é—­ç¯ï¼ˆæ‰§è¡Œé˜¶æ®µï¼‰</strong></h3>
<blockquote>
<p>â€œå¿«é€Ÿå‡ºæˆæœï¼Œä½†æ€è€ƒä¸æ”¾æ¾ã€‚â€</p>
</blockquote>
<p><strong>å¯¹åº”å‰æ–‡å¼€å‘é˜¶æ®µ</strong> a â†’ iï¼š</p>























































<table><thead><tr><th align="left">é˜¶æ®µ</th><th align="left">å®é™…åº”ç”¨</th><th align="left">å…³é”®äº§å‡º</th></tr></thead><tbody><tr><td align="left">a</td><td align="left">æ¢³ç†ç¡®å®šéœ€æ±‚</td><td align="left">é¡¹ç›® README, todo, milestone</td></tr><tr><td align="left">b</td><td align="left">æ„å»ºé™æ€é¡µé¢</td><td align="left">skeleton é¡µé¢æˆ– Figma è½¬æ¢æ ·æœ¬</td></tr><tr><td align="left">c</td><td align="left">è®¾è®¡åŸºç¡€æ•°æ®ç»“æ„</td><td align="left">å®šä¹‰ <code>store</code> å’Œ <code>types.ts</code></td></tr><tr><td align="left">d</td><td align="left">æ‰©å±•ä¸šåŠ¡ç»“æ„</td><td align="left">ç»„ç»‡ä¸šåŠ¡å±‚æ•°æ®æµ/adapter</td></tr><tr><td align="left">e</td><td align="left">æ„å»º mock æœåŠ¡</td><td align="left"><code>mock-server</code> / <code>msw</code> / <code>api sandbox</code></td></tr><tr><td align="left">f</td><td align="left">ä¼˜åŒ–è§†å›¾</td><td align="left">è§„èŒƒ UI é£æ ¼ï¼ˆä¸»é¢˜è‰²ã€æŒ‰é’®è®¾è®¡ï¼‰</td></tr><tr><td align="left">g</td><td align="left">ä¼˜åŒ–äº¤äº’</td><td align="left">æ·»åŠ éª¨æ¶å±ã€loadingã€çŠ¶æ€æç¤º</td></tr><tr><td align="left">h</td><td align="left">æ¥å…¥çœŸå® API</td><td align="left">ä¸¥æ ¼å­—æ®µåŒ¹é…ï¼Œç¡®ä¿æ— éšæ‚£</td></tr><tr><td align="left">i</td><td align="left">è‡ªæµ‹æ”¶å°¾</td><td align="left">ç»„ä»¶å•æµ‹ã€E2E æˆ–æ‰‹åŠ¨å†’çƒŸæµ‹è¯•</td></tr></tbody></table>
<p><strong>è½åœ°æŠ€å·§ï¼š</strong></p>
<ul>
<li>åœ¨å‰ 3 å¤©å†…å½¢æˆä¸€ä¸ªå¯â€œæ¼”ç¤ºâ€çš„é›å½¢ï¼ˆmock é©±åŠ¨å±•ç¤ºï¼‰ã€‚</li>
<li>æ¯æ¬¡ merge å‰ä¿æŒè‡ªæµ‹é—­ç¯ã€‚</li>
<li>ä½¿ç”¨ Git åˆ†æ”¯å‘½åè§„èŒƒï¼ˆ<code>feature/xxx</code>ã€<code>fix/xxx</code>ï¼‰ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3"><strong>é˜¶æ®µ 3ï¼šæ²‰æ·€ä¸å¤ç›˜ï¼ˆå¼ºåŒ–é˜¶æ®µï¼‰</strong></h3>
<blockquote>
<p>â€œæŠŠæ¡æ„å‘³ç€èƒ½æ€»ç»“å¤ç”¨ã€‚â€</p>
</blockquote>
<p><strong>è¦åšçš„ï¼š</strong></p>
<ol>
<li>âœï¸ æ•´ç†å‡ºå¯å¤ç”¨æ¨¡å—ï¼ˆstoreã€hooksã€ç»„ä»¶ï¼‰ã€‚</li>
<li>ğŸ§© æç‚¼å‘½åä½“ç³»ï¼ˆç»Ÿä¸€å‘½åé£æ ¼ä¸æ–‡ä»¶å‘½åæ ¼å¼ï¼‰ã€‚</li>
<li>ğŸ“š æŠŠé¡¹ç›®ç»éªŒè¡¥åˆ°å›¢é˜Ÿ wiki æˆ–æ¨¡æ¿ä¸­ã€‚</li>
<li>âœ¨ ä¾æ®è®¾è®¡ä¸»é¢˜æ•´ç†ç»Ÿä¸€æ ·å¼å˜é‡ï¼ˆä¸»é¢˜è‰² / spacing / typographyï¼‰ã€‚</li>
<li>â± å®‰æ’ä¸€æ¬¡å¤ç›˜ä¼šè®®â€”â€”è®¨è®ºâ€œå“ªäº›æ€è€ƒæå‰åšä¼šæ›´å¥½â€ã€‚</li>
</ol>
<p><strong>ç›®æ ‡ï¼š</strong></p>
<ul>
<li>ä¸‹ä¸€æ¬¡é¡¹ç›®å¯åŠ¨ï¼Œå¯ä»¥ç›´æ¥ä»æ¨¡æ¿å¯åŠ¨ï¼›</li>
<li>å¯åŠ¨æ–‡æ¡£å…·å¤‡å¤ç”¨æ€§å’Œæ–¹å‘æ„Ÿï¼›</li>
<li>å›¢é˜Ÿåœ¨æ‰§è¡Œä¸­æå‡â€œæ€è€ƒçš„è‚Œè‚‰â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-4">ğŸ§  äºŒã€è§’è‰²ä»£å…¥æ³•ï¼šè°åº”è¯¥åœ¨ä»€ä¹ˆæ—¶åˆ»æ€è€ƒä»€ä¹ˆï¼Ÿ</h2>

























<table><thead><tr><th align="left">è§’è‰²</th><th align="left">èšç„¦ç‚¹</th><th align="left">å…³é”®é—®é¢˜</th></tr></thead><tbody><tr><td align="left">ğŸ’¡ æ¶æ„å¸ˆ</td><td align="left">ç»“æ„ã€æµè½¬ã€å‘½åã€å¤ç”¨</td><td align="left">â€œè¿™ä¸ªç»“æ„3ä¸ªæœˆåè¿˜èƒ½ç”¨å—ï¼Ÿâ€</td></tr><tr><td align="left">âš™ï¸ å¼€å‘è€…</td><td align="left">å®ç°è·¯å¾„ä¸é—­ç¯</td><td align="left">â€œè¿™åŠŸèƒ½æœ€å°åŒ–å¯è¡Œäº¤ä»˜æ˜¯ä»€ä¹ˆï¼Ÿâ€</td></tr><tr><td align="left">ğŸ§­ äº§å“/è´Ÿè´£äºº</td><td align="left">èŠ‚å¥ä¸æ¸…æ™°åº¦</td><td align="left">â€œé¡¹ç›®ç°åœ¨çš„ç¡®å®šæ€§å¤Ÿå—ï¼Ÿâ€</td></tr></tbody></table>
<p>ğŸª<strong>ä»£å…¥è§’è‰²</strong>æ„å‘³ç€â€”â€”åœ¨æ‰§è¡Œå‰é—®ä¸€å¥ï¼š</p>
<blockquote>
<p>â€œå¦‚æœæˆ‘æ˜¯äº§å“ / ä½¿ç”¨è€… / æ¥å£æ–¹ï¼Œæˆ‘å¸Œæœ›ä»€ä¹ˆæ ·çš„ç»“æœï¼Ÿâ€</p>
</blockquote>
<p>è¿™ç§å†…åŒ–çš„æ€ç»´åˆ‡æ¢ï¼Œå°±æ˜¯â€œæ€è€ƒä¹ æƒ¯â€çš„è½åœ°æ–¹å¼ã€‚</p>
<hr/>
<h2 data-id="heading-5">ğŸ§© ä¸‰ã€æ¶æ„ä¸»é¢˜ä¸è§†è§‰çš„ä¸€è‡´æ€§æ‰“æ³•</h2>
<blockquote>
<p>è½¯ä»¶æ¶æ„ä¸æ˜¯åªåœ¨ä»£ç é‡Œä½“ç°ï¼Œä¹Ÿä½“ç°åœ¨ç”¨æˆ·ä½“éªŒä¸­ã€‚</p>
</blockquote>
<p><strong>å®è·µå»ºè®®ï¼š</strong></p>
<ol>
<li>æå‰å®šä¹‰ä¸»é¢˜ tokenï¼ˆé¢œè‰²ã€é—´è·ã€åœ†è§’ã€é˜´å½±ï¼‰ã€‚</li>
<li>æ ¹æ®å›¢é˜Ÿå“ç‰Œè‰²ï¼ˆä¾‹å¦‚è“ã€é»‘ã€ç°ç³»åˆ—ï¼‰åœ¨ <code>tailwind.config.js</code> æˆ–æ ·å¼ç³»ç»Ÿä¸­å»ºä¸»é¢˜ã€‚</li>
<li>å¯¹æ ‡å¤§å‚ç»„ä»¶é£æ ¼ï¼ˆGoogle Materialã€GitHub Primerï¼‰ã€‚</li>
<li>åˆ¶ä½œ 1 é¡µ â€œUIæ ‡å‡†å¡â€â€”â€”å³èŠ¯ç‰‡ã€æŒ‰é’®ã€è¡¨å•ã€è¾“å…¥æ¡†ç­‰æ ·å¼å¯¹ç…§ã€‚</li>
</ol>
<p>è¿™æ ·ä»å¯åŠ¨å¼€å§‹ï¼Œè§†è§‰å’Œæ¶æ„å°±æœ‰â€œä¸€è‡´èŠ‚å¥æ„Ÿâ€ã€‚</p>
<hr/>
<h2 data-id="heading-6">ğŸ” å››ã€ä»¥ç»“æœä¸ºå¯¼å‘çš„ä»»åŠ¡èŠ‚å¥</h2>
<blockquote>
<p>â€œå¦‚æœç»“æœä¸æ¨åŠ¨ä¸šåŠ¡ï¼Œå°±å»¶åã€‚â€</p>
</blockquote>
<ul>
<li>æ¯æ¬¡è¿­ä»£å®šä¹‰â€œèƒ½æ¼”ç¤ºçš„æˆæœâ€ï¼ˆmock ä¹Ÿè¡Œï¼‰</li>
<li>æ‰€æœ‰åŠŸèƒ½é¡»éªŒæ”¶ï¼šå¯å¤ç°ã€å¯æ‰©å±•ã€å¯ç†è§£</li>
<li>å»¶è¿Ÿä¸å¦‚ç®€åŒ–ï¼Œ<strong>ä¸è¦å…ˆåšå¸¦ä¸åŠ¨çš„åŠŸèƒ½</strong></li>
</ul>
<p>é€šè¿‡è¿™ç§èŠ‚å¥ï¼Œå›¢é˜Ÿçš„æ‰§è¡ŒåŠ›ä¼šè‡ªåŠ¨ä¸â€œæ¶æ„æ€ç»´â€å¯¹é½ã€‚</p>
<hr/>
<h2 data-id="heading-7">âœ¨ äº”ã€æœ€ç»ˆäº§ç‰©ï¼šä¸€ä¸ªé¡¹ç›®å¯åŠ¨æ¨¡æ¿åº”åŒ…å«</h2>





































<table><thead><tr><th align="left">æ¨¡å—</th><th align="left">æè¿°</th></tr></thead><tbody><tr><td align="left"><code>/src/stores</code></td><td align="left">æ ¸å¿ƒ store + ä¸šåŠ¡ç»“æ„åŒ–æ•°æ®æµ</td></tr><tr><td align="left"><code>/src/routes</code></td><td align="left">è·¯ç”±å‘½åè§„åˆ™ä¸€è‡´ï¼Œæ–‡ä»¶ç»“æ„å³ç³»ç»Ÿç»“æ„</td></tr><tr><td align="left"><code>/src/components</code></td><td align="left">å¤ç”¨åŸºç¡€ç»„ä»¶åº“ï¼ˆæŒ‰æ¨¡æ¿æ ‡å‡†å‘½åï¼‰</td></tr><tr><td align="left"><code>/src/mocks</code></td><td align="left">mock æœåŠ¡æ¨¡æ‹ŸçœŸå®äº¤äº’</td></tr><tr><td align="left"><code>/theme.config</code></td><td align="left">ç³»ç»Ÿä¸»é¢˜ä¸å“ç‰Œæ ·å¼å®šä¹‰</td></tr><tr><td align="left"><code>/docs</code></td><td align="left">é¡¹ç›®æ¶æ„æ–‡æ¡£ + æ‰§è¡Œå‡†åˆ™</td></tr><tr><td align="left"><code>/README.md</code></td><td align="left">é¡¹ç›®å¯åŠ¨ç®€è¿°ä¸æ‰§è¡Œæ¸…å•</td></tr></tbody></table>
<p>è¿™å°±æ˜¯ä¸€ä¸ªçœŸæ­£â€œç”¨æ¶æ„æ€ç»´å¯åŠ¨é¡¹ç›®â€çš„æ ‡å‡†è“æœ¬ã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ§­ ç»“è¯­</h2>
<p>å°†â€œè„‘åŠ›â€å’Œâ€œæµæ°´çº¿â€ç»“åˆï¼Œå°±æ˜¯è®©é¡¹ç›®æ›´æœ‰èŠ‚å¥æ„Ÿåœ°å‰è¿›ã€‚<br/>
æ¶æ„çš„æ€ç»´ä¸æ˜¯è®©æµç¨‹æ›´å¤æ‚ï¼Œè€Œæ˜¯<strong>è®©æ¯ä¸ªäººå°‘èµ°å¼¯è·¯</strong>ã€‚</p>
<blockquote>
<p>æƒ³æ¸…æ¥šå†è¡ŒåŠ¨ï¼Œç»“æ„åŒ–ä»£æ›¿å †ç Œï¼Œ<br/>
æ¨¡æ¿åŒ–æå‡é€Ÿåº¦ï¼Œå¤ç›˜å¼ç§¯ç´¯æˆé•¿ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´AI èƒ½ç”Ÿæˆä»£ç ï¼Œä½†éƒ½æ˜¯ä¸€å¨å±ğŸ˜’]]></title>    <link>https://juejin.cn/post/7602252722372493363</link>    <guid>https://juejin.cn/post/7602252722372493363</guid>    <pubDate>2026-02-03T03:10:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602252722372493363" data-draft-id="7602259669707030554" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026 å¹´AI èƒ½ç”Ÿæˆä»£ç ï¼Œä½†éƒ½æ˜¯ä¸€å¨å±ğŸ˜’"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-02-03T03:10:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ErpanOmer"/> <meta itemprop="url" content="https://juejin.cn/user/3878732754331096"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026 å¹´AI èƒ½ç”Ÿæˆä»£ç ï¼Œä½†éƒ½æ˜¯ä¸€å¨å±ğŸ˜’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3878732754331096/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ErpanOmer
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T03:10:42.000Z" title="Tue Feb 03 2026 03:10:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/352e77bef90e47cba1bade943fa8e8a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770693042&amp;x-signature=O2YmoLIxAOK25G%2FCVfD6nSDI%2FrE%3D" alt="featuredImage.webp" loading="lazy"/></p>
<p>ç°åœ¨çš„ IDE å·²ç»è¿›åŒ–åˆ°äº†ä¸å¯æ€è®®çš„åœ°æ­¥ã€‚æ˜¨å¤©ï¼Œäº§å“ç»ç†åœ¨ç¾¤é‡Œç«æ€¥ç«ç‡åœ°æäº†ä¸€ä¸ªéœ€æ±‚ï¼šç»™æˆ‘ä»¬çš„ web è€å¹´ç‰ˆ App ï¼Œè¦å¤§æŒ‰é’®ï¼Œè¦é†’ç›®ï¼Œè¦å¿«ã€‚</p>
<p>æˆ‘æŠŠè¿™å¥è¯å–‚ç»™äº†æœ€æ–°çš„ Google Antigravityã€‚</p>
<p><strong>3 ç§’</strong>ã€‚çœŸçš„åªæœ‰ 3.5 ç§’ ğŸ˜²ã€‚</p>
<p>å®ƒç›´æ¥åå‡ºäº† 300 è¡Œå®Œç¾æ— ç‘•çš„ React ä»£ç ã€‚Tailwind æ ·å¼ç¾è§‚ï¼ŒTypeScript ç±»å‹å®šä¹‰ä¸¥ä¸åˆç¼ï¼Œç”šè‡³è¿˜è´´å¿ƒåœ°è‡ªåŠ¨è¡¥å…¨äº†å•å…ƒæµ‹è¯•ã€‚</p>
<p>ä»£ç è·‘èµ·æ¥äº†ï¼Œæµ‹è¯•å…¨ç»¿ï¼Œæ²¡æœ‰ä»»ä½•æŠ¥é”™ã€‚</p>
<p>å¦‚æœæ˜¯ä¸‰å¹´å‰ï¼Œæˆ‘å¯èƒ½ä¼šæƒŠå¹è‡ªå·±è¦å¤±ä¸šäº†ã€‚ä½†ç°åœ¨ï¼Œæˆ‘çœ‹ç€å±å¹•ä¸Šé‚£ä¸ªå¯†å¯†éº»éº»çš„æŒ‰é’®ï¼Œå†…å¿ƒæ¯«æ— æ³¢æ¾œï¼Œç”šè‡³æƒ³éª‚äººã€‚ğŸ¤¬ğŸ¤¬ğŸ¤¬</p>
<p><strong>è¿™å†™çš„æ˜¯ä¸€å¨ä»€ä¹ˆå±ï¼Ÿï¼Ÿï¼Ÿï¼Ÿ</strong></p>
<h3 data-id="heading-0">ä»£ç éƒ½æ˜¯å†·å†°å†°çš„</h3>
<p>AI ç”Ÿæˆçš„ä»£ç ï¼Œä»è®¡ç®—æœºç§‘å­¦çš„è§’åº¦çœ‹æ˜¯æ»¡åˆ†çš„ã€‚ä½†å®ƒæ ¹æœ¬ä¸çŸ¥é“ï¼Œä½¿ç”¨è¿™ä¸ªäº§å“çš„ç”¨æˆ·ï¼Œæ˜¯ä¸€ä½ 75 å²ã€æ‚£æœ‰ç™½å†…éšœã€æ‰‹æŠ–å¾—å‰å®³çš„ç‹¬å±…è€äººã€‚</p>
<p>è¯•æƒ³ä¸€ä¸‹ï¼Œå½“ä»–åœ¨æ·±å¤œçªå‘å¿ƒè„ä¸é€‚ï¼Œé¢¤æŠ–ç€æ‰‹æ‰“å¼€æ‰‹æœºæ—¶ï¼Œä»–ä¼šé­é‡ä»€ä¹ˆï¼Ÿ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5317a481b7b04c358d7a42898554e359~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770693042&amp;x-signature=HCh5RpK0H7GCB0%2Ff8YUOXL3K%2FQc%3D" alt="2 (1).png" loading="lazy"/></p>
<p>åœ¨è€äººæ¨¡ç³Šä¸”æ•æ„Ÿçš„è§†é‡é‡Œï¼Œä¸æ˜¯ç§‘æŠ€æ„Ÿï¼Œè€Œæ˜¯ä¸€å›¢æ™ƒçœ¼çš„å…‰æ–‘ï¼Œç”šè‡³å¯èƒ½è¯±å‘çœ©æ™•ã€‚</p>
<p>é‚£ä¸ªä¸¥ä¸åˆç¼çš„ <strong>ç‚¹å‡»é€»è¾‘</strong>ï¼Œè¦æ±‚æ‰‹æŒ‡å¿…é¡»ç²¾å‡†è½åœ¨ 40px çš„åœ†å¿ƒå†…ã€‚è€Œè€äººåœ¨æ…Œä¹±ä¸­ï¼Œæ‰‹æŒ‡æ¥è§¦å±å¹•çš„é¢ç§¯å¾€å¾€æ˜¯æ•´ä¸ªæŒ‡è…¹ï¼Œç”šè‡³æ˜¯å¤§é±¼é™…ã€‚AI å†™çš„ä»£ç ä¼šåˆ¤å®šè¿™æ˜¯è¯¯è§¦ï¼Œç„¶åæ— åŠ¨äºè¡·ã€‚</p>
<p>é‚£ä¸ªæ¯«æ— æŠ¥é”™çš„ <strong>API è°ƒç”¨</strong>ï¼Œåœ¨è€äººé‚£å¾®å¼±çš„ 2G ä¿¡å·åœ°ä¸‹å®¤é‡Œï¼Œä¼šç›´æ¥è¶…æ—¶ã€‚AI å¾ˆè´Ÿè´£ä»»åœ°å¼¹å‡ºäº†ä¸€ä¸ªæ ‡å‡†çš„ Ant Design é£æ ¼æç¤ºæ¡†ï¼š<strong>Error: 504 Gateway TimeoutğŸ˜–</strong>ã€‚</p>
<p>è¿™ä¸€åˆ»ï¼ŒAI å®Œæˆäº†å†™ä»£ç çš„ä»»åŠ¡ï¼Œä½†å®ƒå½»åº•æç ¸äº†æ•‘å‘½è¿™ä»¶äº‹ ğŸ¤¦â€â™‚ï¸ã€‚</p>
<p>æˆ‘æ¯«ä¸çŠ¹è±«åœ°åˆ æ‰äº†é‚£ 300 è¡Œæ‰€è°“çš„å®Œç¾ä»£ç ã€‚</p>
<p>æˆ‘æ‰‹å†™äº† 50 è¡Œæœ€ç¬¨æ‹™çš„ CSSã€‚æˆ‘å»æ‰äº†æ‰€æœ‰ç‰¹æ•ˆï¼ŒæŠŠæŒ‰é’®æ”¹æˆäº†é«˜å¯¹æ¯”åº¦çš„çº¢é»„é…è‰²ï¼ŒåœŸæ˜¯åœŸäº†ç‚¹ï¼Œä½†èƒ½åœ¨é»‘æš—é‡Œä¸€çœ¼çœ‹åˆ°ã€‚æˆ‘æŠŠç‚¹å‡»çƒ­åŒºæ‰©å¤§åˆ°äº†åŠä¸ªå±å¹•ï¼Œå“ªæ€•ä»–ç”¨æ‹³å¤´ç ¸éƒ½èƒ½è§¦å‘ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fc39fc4d03824cc5896d1e18c4e41006~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770693042&amp;x-signature=77e0jZkY7xQy2r8pjPqDfyd3W2g%3D" alt="screenshot-20260203-110207.png" loading="lazy"/></p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* style.css */</span>

* {
  <span class="hljs-attribute">box-sizing</span>: border-box;
}

<span class="hljs-selector-tag">html</span>, <span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-tag">body</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; <span class="hljs-comment">/* çº¯é»‘ï¼Œå‡å°‘çœ©å…‰ */</span>
}

<span class="hljs-comment">/* æ•´ä¸ªå±å¹•å°±æ˜¯ä¸€ä¸ªæŒ‰é’® */</span>
<span class="hljs-selector-id">#emergency-btn</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100vw</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;

  <span class="hljs-attribute">background</span>: <span class="hljs-number">#ff0000</span>; <span class="hljs-comment">/* çº¯çº¢ */</span>
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffff00</span>;      <span class="hljs-comment">/* çº¯é»„ */</span>

  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">48px</span>;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1.4</span>;

  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">outline</span>: none;

  <span class="hljs-comment">/* é˜²æ­¢è¯¯æ“ä½œå¸¦æ¥çš„ç³»ç»Ÿå»¶è¿Ÿ */</span>
  touch-action: manipulation;
}

<span class="hljs-comment">/* é˜²æ­¢æ‰‹æœºç³»ç»Ÿç‚¹å‡»é—ªçƒ */</span>
<span class="hljs-selector-id">#emergency-btn</span><span class="hljs-selector-pseudo">:active</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#cc0000</span>;
}

</code></pre>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// main.js</span>

<span class="hljs-keyword">const</span> btn = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'emergency-btn'</span>);

btn.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// å°è¯•å…ˆèµ°â€œæ™ºèƒ½è·¯å¾„â€</span>
  <span class="hljs-title function_">trySendEmergencySignal</span>();
});

<span class="hljs-keyword">function</span> <span class="hljs-title function_">trySendEmergencySignal</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> controller = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AbortController</span>();
  <span class="hljs-keyword">const</span> timeout = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
    controller.<span class="hljs-title function_">abort</span>();
  }, <span class="hljs-number">3000</span>); <span class="hljs-comment">// 3 ç§’ï¼Œä¸èƒ½å†å¤šäº†</span>

  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://example.com/api/emergency'</span>, {
    <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
    <span class="hljs-attr">signal</span>: controller.<span class="hljs-property">signal</span>,
  })
    .<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// æˆåŠŸä¹Ÿç›´æ¥æ‹¨å·ï¼Œä¸ç­‰æœåŠ¡å™¨â€œç¡®è®¤â€</span>
      <span class="hljs-title function_">dial120</span>();
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-comment">// âš ï¸ ä»»ä½•é”™è¯¯ï¼Œç›´æ¥èµ°æœ€åŸå§‹æ–¹æ¡ˆ</span>
      <span class="hljs-title function_">dial120</span>();
    })
    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-built_in">clearTimeout</span>(timeout);
    });
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">dial120</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ä¸æç¤ºã€ä¸è§£é‡Šã€ä¸å¼¹çª—</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span> = <span class="hljs-string">'tel:120'</span>;
}

</code></pre>
<p>æˆ‘è¿˜åœ¨ catch è¯­å¥é‡ŒåŠ äº†ä¸€æ®µé€»è¾‘ï¼š<strong>å¦‚æœç½‘ç»œè¶…æ—¶ï¼Œä¸è¦å¼¹çª—æŠ¥é”™ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ç³»ç»Ÿçš„ç”µè¯æ‹¨å·ç›˜ï¼Œå¡«å…¥ 120ã€‚</strong></p>
<p>è¿™æ®µä»£ç ï¼Œæ²¡æœ‰ä»»ä½•è®¾è®¡æ¨¡å¼ï¼Œç”šè‡³æœ‰ç‚¹ä¸‘ã€‚ä½†å®ƒèƒ½åœ¨å…³é”®æ—¶åˆ»ï¼ŒçœŸçš„æŠŠæ±‚æ•‘ä¿¡å·å‘å‡ºå»ã€‚</p>
<h3 data-id="heading-1">2026 å¹´ï¼Œæˆ‘ä»¬ç¼ºçš„æ˜¯ä»£ç å—ï¼Ÿ</h3>
<p>å®Œå…¨ä¸ç¼ºã€‚GitHub ä¸Šçš„ä»£ç é‡æ—©å°±æŒ‡æ•°çº§çˆ†ç‚¸äº†ã€‚ç°åœ¨çš„åˆçº§ç¨‹åºå‘˜ï¼Œæˆ–è€…è¯´æ˜¯ Prompt å·¥ç¨‹å¸ˆï¼Œæœ€æ“…é•¿çš„äº‹æƒ…å°±æ˜¯ï¼šç”Ÿæˆã€å¤åˆ¶ã€ç²˜è´´ã€‚</p>
<p>åªè¦è·‘å¾—é€šï¼Œåªè¦ UI çœ‹èµ·æ¥ä¸€æ ·ï¼Œå°±æäº¤ä¸Šçº¿ã€‚</p>
<p>äºæ˜¯ï¼Œæˆ‘ä»¬çš„é¡¹ç›®é‡Œå……æ–¥ç€è¿™ç§<strong>å±ä»£ç </strong>ã€‚å®ƒä»¬æ²¡æœ‰æ˜æ˜¾çš„ Bugï¼Œä½†å®ƒä»¬æå…¶è‡ƒè‚¿ã€é€»è¾‘å‰²è£‚ã€æ¯«æ— ä¸Šä¸‹æ–‡å…³è”ã€‚å®ƒä»¬å°±åƒè¶…å¸‚é‡Œçš„é¢„åˆ¶èœï¼Œçœ‹ç€åƒé‚£ä¹ˆå›äº‹ï¼Œåƒèµ·æ¥å…¨æ˜¯å·¥ä¸šç³–ç²¾å‘³ ğŸ˜®â€ğŸ’¨ã€‚</p>
<p><strong>ä»€ä¹ˆå«æ­£ç¡®çš„äº‹ï¼Ÿ</strong></p>
<p>æ­£ç¡®ä¸æ˜¯ Type Check Passedã€‚</p>
<p>æ­£ç¡®æ˜¯çŸ¥é“è¿™é‡Œä¸ºä»€ä¹ˆä¸èƒ½ç”¨æ— é™æ»šåŠ¨ï¼Œå› ä¸ºç”¨æˆ·éœ€è¦åˆ°åº•éƒ¨æ‰¾è”ç³»æˆ‘ä»¬ã€‚æ­£ç¡®æ˜¯çŸ¥é“åœ¨è¡¨å•æäº¤å¤±è´¥æ—¶ï¼Œä¸è¦åªçº¢æ¡†æç¤ºï¼Œè€Œæ˜¯è¦è‡ªåŠ¨ä¿ç•™ç”¨æˆ·åˆšæ‰æ•²äº† 500 å­—çš„è¯„è®ºï¼Œåˆ«è®©ä»–é‡å†™ã€‚</p>
<p>AI æ°¸è¿œå­¦ä¸ä¼šå¿ƒç–¼ç”¨æˆ·ã€‚å®ƒæ²¡æœ‰ç—›è§‰ï¼Œæ²¡æœ‰ç„¦è™‘ï¼Œæ²¡æœ‰çˆ±ã€‚å®ƒä¸ä¼šå› ä¸ºé¡µé¢ç™½å±äº† 3 ç§’è€Œæ„Ÿåˆ°æ„§ç–šï¼Œä½†ä½ ä¼šã€‚</p>
<h3 data-id="heading-2">ç¨‹åºå‘˜çš„æŠ¤åŸæ²³ï¼Œæ˜¯åŒç†å¿ƒ</h3>
<p>å¾ˆå¤šäººé—®æˆ‘ï¼Œ2026 å¹´äº†ï¼Œæˆ‘è¿˜éœ€è¦å­¦å†™ä»£ç å—ï¼Ÿ</p>
<p>æˆ‘çš„å›ç­”æ˜¯ï¼šä½ ä¸éœ€è¦å­¦æ€ä¹ˆå†™ä»£ç ï¼Œä½†ä½ éœ€è¦å­¦<strong>ä¸ºä»€ä¹ˆå†™ä»£ç </strong>ã€‚</p>
<p>ä»¥å‰ï¼Œæˆ‘ä»¬çš„ä»·å€¼æ˜¯ç¿»è¯‘â€”â€”æŠŠäººç±»çš„éœ€æ±‚ç¿»è¯‘æˆæœºå™¨èƒ½æ‡‚çš„ JavaScriptã€‚ç°åœ¨ï¼ŒAI æŠŠç¿»è¯‘çš„æ´»å„¿å¹²äº†ã€‚æˆ‘ä»¬çš„ä»·å€¼å˜æˆäº†å…±æƒ…â€”â€”å»æ„Ÿå—å±å¹•èƒŒåé‚£ä¸ªçœŸå®äººç±»çš„å–œæ€’å“€ä¹ã€‚</p>
<p>å½“ AI èƒ½å¤Ÿä¸€é”®ç”Ÿæˆæ•´ä¸ªå•†åŸç³»ç»Ÿæ—¶ï¼Œä½ èƒ½åšçš„ï¼Œæ˜¯å»æ€è€ƒï¼š</p>
<p>åœ¨è¿™ä¸ªæ”¯ä»˜ç¯èŠ‚ï¼Œç”¨æˆ·ä¼šä¸ä¼šå› ä¸ºçŠ¹è±«è€Œæµå¤±ï¼Ÿè¿™ä¸ªæŠ¥é”™æç¤ºï¼Œä¼šä¸ä¼šè®©ç”¨æˆ·è§‰å¾—è‡ªå·±å¾ˆè ¢ï¼Ÿå¦‚æœæ˜¯è‰²å¼±ç”¨æˆ·ï¼Œèƒ½ä¸èƒ½çœ‹æ¸…è¿™ä¸ªå›¾è¡¨ï¼Ÿï¼ˆæ¯”å¦‚æˆ‘ğŸ˜­ï¼‰</p>
<p>è¿™äº›ç»†å¾®çš„ã€å…³ä¹äººæ€§çš„å†³ç­–ï¼Œæ‰æ˜¯ 1 å’Œ 0 ä¹‹é—´é‚£é“æ— æ³•è·¨è¶Šçš„é¸¿æ²Ÿã€‚</p>
<hr/>
<p>åœ¨è¿™ä¸ªä»£ç æ³›æ»¥çš„å¹´ä»£ï¼Œ<strong>å…‹åˆ¶</strong>åè€Œæˆäº†ä¸€ç§ç¾å¾·ã€‚</p>
<p>åˆ«å› ä¸º AI èƒ½ç”Ÿæˆï¼Œä½ å°±ç–¯ç‹‚å †ç ŒåŠŸèƒ½ã€‚åˆ«å› ä¸º AI èƒ½ä¼˜åŒ–ï¼Œä½ å°±å¿½ç•¥äº†çœŸå®çš„ä½“æ„Ÿã€‚</p>
<p>è¯·åœä¸‹æ¥æƒ³ä¸€æƒ³ï¼šè¿™è¡Œä»£ç èƒŒåï¼Œæ˜¯ä¸€ä¸ªæ´»ç”Ÿç”Ÿçš„äººã€‚ä»–å¯èƒ½æ˜¯ç„¦æ€¥çš„çˆ¶äº²ï¼Œå¯èƒ½æ˜¯ç–²æƒ«çš„æ‰“å·¥äººï¼Œä¹Ÿå¯èƒ½æ˜¯ä½ å¹´è¿ˆçš„çˆ¶æ¯ã€‚</p>
<p>AI å¯ä»¥å¸®ä½ å»ºèµ·ä¸‡ä¸ˆé«˜æ¥¼ï¼Œä½†åªæœ‰ä½ èƒ½å†³å®šï¼Œè¦ä¸è¦åœ¨æ¥¼é“é‡Œï¼Œä¸ºæ™šå½’çš„äººç•™ä¸€ç›æ¸©æš–çš„ç¯ â¤ï¸ã€‚</p>
<p>è¿™æ‰æ˜¯æˆ‘ä»¬ç¨‹åºå‘˜åœ¨ 2026 å¹´ï¼Œä¾ç„¶æ— å¯æ›¿ä»£çš„ç†ç”±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53b616c43247473790464f7af333311e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgRXJwYW5PbWVy:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770693042&amp;x-signature=TiQooLRhWNqixwaWP%2FX%2Bnu9awPg%3D" alt="è°¢è°¢å¤§å®¶.gif" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢œè‰²ä¸æ¸å˜ï¼šhexã€rgbã€hslã€æ¸å˜ã€æ··åˆæ¨¡å¼]]></title>    <link>https://juejin.cn/post/7602162809291800614</link>    <guid>https://juejin.cn/post/7602162809291800614</guid>    <pubDate>2026-02-03T01:34:08.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162809291800614" data-draft-id="7602177113685246003" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢œè‰²ä¸æ¸å˜ï¼šhexã€rgbã€hslã€æ¸å˜ã€æ··åˆæ¨¡å¼"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-03T01:34:08.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="VixenAhri"/> <meta itemprop="url" content="https://juejin.cn/user/741541894953144"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢œè‰²ä¸æ¸å˜ï¼šhexã€rgbã€hslã€æ¸å˜ã€æ··åˆæ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/741541894953144/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    VixenAhri
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:34:08.000Z" title="Tue Feb 03 2026 01:34:08 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><hr/>
<p>CSS é¢œè‰²ä¸æ¸å˜ï¼Œç»å¯¹æ˜¯æˆ‘åˆšå­¦å‰ç«¯æ—¶çš„â€œé¢œå€¼ç“¶é¢ˆâ€â€”â€”æœ€å¼€å§‹åªä¼šæŠ„è®¾è®¡ç¨¿ä¸Šçš„hexè‰²å€¼ï¼Œè°ƒä¸ªä¸»é¢˜è‰²hoveræ•ˆæœï¼Œè¦åå¤æ”¹å‡ åæ¬¡è‰²å€¼æ‰èƒ½å‹‰å¼ºæ»¡æ„ï¼›å†™æ¸å˜è¦ä¹ˆè¿‡æ¸¡å¾—ç”Ÿç¡¬åˆçªå…€ï¼Œè¦ä¹ˆè§’åº¦å†™é”™å¯¼è‡´æ•´ä½“é”™ä½ï¼Œæ··åˆæ¨¡å¼æ›´æ˜¯çœ‹éƒ½ä¸æ•¢çœ‹ï¼Œæ€»è§‰å¾—å¤ªå¤æ‚ã€‚ç›´åˆ°è¸©å¤Ÿäº†å‘ã€æ…¢æ…¢æ‘¸é€äº†æ¯ç§ç”¨æ³•æ‰å‘ç°ï¼Œhexã€rgbã€hslå„æœ‰å„çš„æ–¹ä¾¿ï¼Œæ¸å˜éšæ‰‹å†™å°±èƒ½å‡ºé«˜çº§æ„Ÿï¼Œæ··åˆæ¨¡å¼ç”¨å¯¹äº†è¿˜èƒ½çœå¾ˆå¤šäº‹ã€‚ä»Šå¤©å°±æŠŠæˆ‘å®æ‰“å®çš„å®æ“ç»éªŒã€è¸©è¿‡çš„å‘ï¼Œè¿˜æœ‰æ•´ç†çš„å¹²è´§åˆ†äº«ç»™å¤§å®¶ï¼Œæ–°æ‰‹è·Ÿç€å­¦ï¼Œèƒ½å°‘èµ°å¾ˆå¤šå¼¯è·¯ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€é¢œè‰²è¡¨ç¤ºæ³•ï¼šæŒ‰éœ€é€‰æ‹©ï¼Œæˆ‘å¸¸ç”¨è¿™3ç§ï¼ˆé¿å‘æŒ‡å—ï¼‰</h2>
<p>CSS é¢œè‰²è¡¨ç¤ºæ³•å…¶å®æœ‰ä¸€å¤§å †ï¼Œå…³é”®å­—ã€hexã€rgbã€hslã€oklch ç­‰ç­‰ï¼Œä½†æˆ‘æ—¥å¸¸å¼€å‘é‡Œï¼ŒçœŸæ­£ç”¨å¾—ä¸Šçš„å°±3ç§â€”â€”hexã€rgbã€hslã€‚oklch è™½ç„¶è‰²åŸŸå¹¿ã€é¢œè‰²æ›´é²œè‰³ï¼Œä½†å…¼å®¹æ€§è¿˜ä¸å¤Ÿå¥½ï¼Œæˆ‘ç›®å‰é¡¹ç›®é‡Œè¿˜æ²¡æ•¢ç”¨ï¼›å…³é”®å­—ä¹Ÿå°±å¶å°”ç”¨ä¸ªtransparentï¼Œå…¶ä»–çš„åŸºæœ¬ä¸ç¢°ã€‚æ–°æ‰‹çœŸä¸ç”¨è´ªå¤šï¼ŒæŠŠè¿™3ç§æ ¸å¿ƒç”¨æ³•åƒé€ï¼Œå°±èƒ½åº”å¯¹99%çš„å¼€å‘åœºæ™¯ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å…³é”®å­—ï¼šç®€å•ä½†ä¸çµæ´»ï¼Œä»…ç”¨åœ¨é€æ˜ã€åŸºç¡€è‰²ï¼Œæˆ‘å¾ˆå°‘ç”¨ */</span>
<span class="hljs-attribute">color</span>: red;
<span class="hljs-attribute">background</span>: transparent; <span class="hljs-comment">/* å¸¸ç”¨ï¼Œé€æ˜èƒŒæ™¯ */</span>

<span class="hljs-comment">/* hexï¼šæœ€å¸¸ç”¨ï¼Œç®€æ´å¥½å¤åˆ¶ï¼Œ6ä½ã€8ä½ï¼ˆå«é€æ˜åº¦ï¼‰éƒ½å¸¸ç”¨ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>; <span class="hljs-comment">/* 3ä½ç®€å†™ï¼Œç­‰ä»·äº#333333ï¼Œé€‚åˆåŸºç¡€ç°è‰²ç³» */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-number">#333333</span>; <span class="hljs-comment">/* 6ä½æ ‡å‡†å†™æ³•ï¼Œç²¾å‡†åº¦é«˜ï¼Œæ—¥å¸¸æœ€å¸¸ç”¨ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-number">#3333</span>; <span class="hljs-comment">/* 4ä½ç®€å†™ + é€æ˜åº¦ï¼Œ33æ˜¯é€æ˜åº¦ï¼Œç­‰ä»·äº#33333333 */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-number">#33333380</span>; <span class="hljs-comment">/* 8ä½å†™æ³•ï¼Œæœ€åä¸¤ä½80=50%é€æ˜åº¦ï¼Œæˆ‘åšåŠé€æ˜å¸¸ç”¨è¿™ä¸ª */</span>

<span class="hljs-comment">/* rgb / rgbaï¼šç›´è§‚æ§åˆ¶çº¢ç»¿è“ï¼Œå¸¦é€æ˜åº¦ï¼Œæ–°æ‰‹æ˜“ç†è§£ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">51</span>, <span class="hljs-number">51</span>, <span class="hljs-number">51</span>); <span class="hljs-comment">/* æ— é€æ˜ï¼Œå’Œ#333ä¸€è‡´ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">51</span>, <span class="hljs-number">51</span>, <span class="hljs-number">51</span>, <span class="hljs-number">0.5</span>); <span class="hljs-comment">/* ä¼ ç»Ÿé€æ˜å†™æ³• */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">51</span> <span class="hljs-number">51</span> <span class="hljs-number">51</span> / <span class="hljs-number">0.5</span>);  <span class="hljs-comment">/* æ–°è¯­æ³•ï¼Œç©ºæ ¼åˆ†éš”ï¼Œæ›´ç®€æ´ï¼Œæˆ‘ç°åœ¨ä¼˜å…ˆç”¨ */</span>

<span class="hljs-comment">/* hsl / hslaï¼šè‰²ç›¸ã€é¥±å’Œåº¦ã€æ˜åº¦ï¼Œè°ƒè‰²è¶…æ–¹ä¾¿ï¼Œåšä¸»é¢˜è‰²é¦–é€‰ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">0</span>, <span class="hljs-number">100%</span>, <span class="hljs-number">50%</span>);    <span class="hljs-comment">/* çº¢ï¼šè‰²ç›¸0ï¼Œé¥±å’Œåº¦100%ï¼Œæ˜åº¦50% */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">120</span>, <span class="hljs-number">100%</span>, <span class="hljs-number">50%</span>);  <span class="hljs-comment">/* ç»¿ï¼šè‰²ç›¸120 */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">240</span>, <span class="hljs-number">100%</span>, <span class="hljs-number">50%</span>);  <span class="hljs-comment">/* è“ï¼šè‰²ç›¸240 */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">hsl</span>(<span class="hljs-number">0</span> <span class="hljs-number">0%</span> <span class="hljs-number">20%</span> / <span class="hljs-number">0.5</span>);  <span class="hljs-comment">/* æ–°è¯­æ³• + é€æ˜åº¦ï¼Œç°è‰²50%é€æ˜ */</span>

<span class="hljs-comment">/* oklchï¼šç°ä»£è‰²ç©ºé—´ï¼Œè‰²åŸŸæ›´å¹¿ï¼Œé¢œè‰²æ›´é²œè‰³ï¼Œä½†å…¼å®¹æ€§ä¸€èˆ¬ï¼Œæˆ‘æš‚ä¸ç”¨ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">oklch</span>(<span class="hljs-number">0.6</span> <span class="hljs-number">0.2</span> <span class="hljs-number">250</span>);
</code></pre>
<p><strong>æˆ‘çš„å®æ“å¿ƒå¾—+è¸©å‘åæ§½</strong>ï¼šè¿™å‡ ç§è¡¨ç¤ºæ³•ï¼Œæˆ‘è¸©è¿‡ä¸å°‘å†¤æ‰è·¯ï¼Œåæ¥æ€»ç»“äº†ä¸€å¥—å›ºå®šç”¨æ³•ï¼Œå†ä¹Ÿæ²¡å‡ºè¿‡é”™ï¼Œæ–°æ‰‹ç›´æ¥ç…§æ¬å°±è¡Œï¼š</p>
<ul>
<li>æ—¥å¸¸å›ºå®šè‰²ï¼ˆè¾¹æ¡†ã€åŸºç¡€æ–‡å­—è‰²ï¼‰ï¼Œé¦–é€‰hexï¼šæœ€ç®€æ´ï¼Œè®¾è®¡ç¨¿ç»™çš„è‰²å€¼åŸºæœ¬éƒ½æ˜¯hexï¼Œç›´æ¥å¤åˆ¶ç²˜è´´å°±è¡Œï¼Œä¸ç”¨é¢å¤–è½¬æ¢ï¼Œèƒ½çœä¸å°‘æ—¶é—´ï¼Œä¹Ÿé¿å…è½¬æ¢å‡ºé”™ã€‚</li>
<li>éœ€è¦åŠé€æ˜æ•ˆæœï¼ˆé®ç½©ã€æ‚¬æµ®å±‚ã€åŠé€æ˜èƒŒæ™¯ï¼‰ï¼Œå¿…ç”¨rgbæ–°è¯­æ³•ï¼šæ¯”8ä½hexç›´è§‚å¤ªå¤šï¼Œ0.5å°±æ˜¯50%é€æ˜åº¦ï¼Œä¸€çœ¼å°±èƒ½çœ‹æ‡‚ã€‚æˆ‘æ—©æœŸå‚»æ„£æ„£ç”¨8ä½hexï¼Œæ¯æ¬¡éƒ½è¦ç®—é€æ˜åº¦å¯¹åº”çš„åå…­è¿›åˆ¶å€¼ï¼Œç»å¸¸ç®—é”™ï¼Œæ”¹æ¥æ”¹å»æµªè´¹æ—¶é—´ã€‚</li>
<li>åšä¸»é¢˜è‰²ã€hoverå˜è‰²ã€æ‰‹åŠ¨è°ƒè‰²ï¼Œä¸€å®šè¦ç”¨hslï¼šè¿™ç»å¯¹æ˜¯è°ƒè‰²ç¥å™¨ï¼æ”¹Hï¼ˆè‰²ç›¸ï¼‰å°±èƒ½åˆ‡æ¢é¢œè‰²ï¼Œæ¯”å¦‚ä»çº¢è‰²æ”¹æˆè“è‰²ï¼Œä¸ç”¨é‡æ–°æ‰¾è‰²å€¼ï¼›æ”¹Sï¼ˆé¥±å’Œåº¦ï¼‰è°ƒé²œè‰³ç¨‹åº¦ï¼Œæ”¹Lï¼ˆæ˜åº¦ï¼‰è°ƒæ˜æš—ï¼Œæ¯”å¦‚æŒ‰é’®hoverè¦å˜äº®ï¼Œåªéœ€è¦æŠŠLè°ƒé«˜ä¸€ç‚¹ï¼Œæ¯”hexã€rgbåå¤è¯•è‰²é«˜æ•ˆ10å€ã€‚</li>
<li>é¿å‘ç‚¹ï¼š4ä½hexç®€å†™ï¼ˆ#3333ï¼‰æ–°æ‰‹åƒä¸‡åˆ«ä¹±â½¤ï¼Œåªæœ‰æœ€åä¸¤ä½æ˜¯é€æ˜åº¦ï¼Œå¾ˆå®¹æ˜“å’Œ6ä½è‰²å€¼æ··æ·†ï¼Œæˆ‘æ—©æœŸå°±å› ä¸ºç®€å†™çœ‹é”™äº†ï¼ŒæŠŠåŠé€æ˜è‰²å†™æˆäº†å®è‰²ï¼›è¿˜æœ‰rgbæ–°è¯­æ³•ï¼Œâ€œ/â€åé¢åˆ«åŠ ç©ºæ ¼ï¼Œä¸ç„¶éƒ¨åˆ†ä½ç‰ˆæœ¬æµè§ˆå™¨ä¼šä¸å…¼å®¹ï¼Œè¸©è¿‡ä¸€æ¬¡å‘å°±è®°ç‰¢äº†ã€‚</li>
</ul>
<h2 data-id="heading-1">äºŒã€çº¿æ€§æ¸å˜ linear-gradientï¼šæ—¥å¸¸æœ€å¸¸ç”¨ï¼ŒæŒ‰é’®/èƒŒæ™¯é¦–é€‰</h2>
<p>çº¿æ€§æ¸å˜æ˜¯æˆ‘æ—¥å¸¸ç”¨å¾—æœ€å¤šçš„æ¸å˜æ•ˆæœï¼Œæ²¡æœ‰ä¹‹ä¸€ï¼æ ¸å¿ƒç‰¹åˆ«ç®€å•ï¼Œå°±æ˜¯â€œæ²¿æŸä¸ªæ–¹å‘ï¼Œä»ä¸€ç§é¢œè‰²è¿‡æ¸¡åˆ°å¦ä¸€ç§é¢œè‰²â€ï¼ŒæŒ‰é’®ã€å¡ç‰‡èƒŒæ™¯ã€é¡µé¢è£…é¥°ï¼Œç”¨å®ƒéƒ½èƒ½è½»æ¾åšå‡ºé«˜çº§æ„Ÿã€‚æ–°æ‰‹åªè¦è®°ä½â€œæ–¹å‘+è‰²æ ‡â€è¿™ä¸¤ä¸ªå…³é”®ç‚¹ï¼Œå°±èƒ½å¿«é€Ÿä¸Šæ‰‹ï¼Œæˆ‘æ—©æœŸè¸©çš„å‘ï¼ŒåŸºæœ¬éƒ½é›†ä¸­åœ¨æ–¹å‘å†™é”™ã€è‰²æ ‡ä½ç½®æ²¡è®¾å¯¹è¿™ä¸¤ç‚¹ä¸Šã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€ç”¨æ³•ï¼šæ–¹å‘ + è‰²æ ‡ï¼ˆæœ€å°‘ä¸¤ç§é¢œè‰²ï¼‰ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, blue); <span class="hljs-comment">/* ä»å·¦åˆ°å³ï¼Œçº¢æ¸å˜åˆ°è“ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, red, blue); <span class="hljs-comment">/* ç”¨è§’åº¦è¡¨ç¤ºæ–¹å‘ï¼Œ90deg=to rightï¼Œæ›´ç²¾å‡† */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to bottom right, red, blue); <span class="hljs-comment">/* ä»å·¦ä¸Šåˆ°å³ä¸‹ï¼Œå¯¹è§’çº¿æ¸å˜ */</span>

<span class="hljs-comment">/* å¤šä¸ªè‰²æ ‡ï¼šå®ç°å¤šé¢œè‰²è¿‡æ¸¡ï¼Œæ›´ä¸°å¯Œ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red, yellow <span class="hljs-number">50%</span>, blue); <span class="hljs-comment">/* çº¢â†’é»„ï¼ˆä¸­é—´ä½ç½®ï¼‰â†’è“ */</span>

<span class="hljs-comment">/* è‰²æ ‡ä½ç½®ï¼šæ‰‹åŠ¨æ§åˆ¶è¿‡æ¸¡èŠ‚ç‚¹ï¼Œé¿å…è¿‡æ¸¡ç”Ÿç¡¬ï¼Œæˆ‘åšç²¾è‡´æ¸å˜å¿…ç”¨ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(to right, red <span class="hljs-number">0%</span>, blue <span class="hljs-number">50%</span>, green <span class="hljs-number">100%</span>); <span class="hljs-comment">/* 0%ã€50%ã€100% æ˜¯è¿‡æ¸¡ä½ç½® */</span>

<span class="hljs-comment">/* å®é™…åœºæ™¯1ï¼šæŒ‰é’®æ¸å˜ï¼ˆæˆ‘é¡¹ç›®é‡Œå¸¸ç”¨çš„å†™æ³•ï¼‰ */</span>
<span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>); <span class="hljs-comment">/* 135degè§’åº¦ï¼Œæ›´æœ‰ç«‹ä½“æ„Ÿ */</span>
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-comment">/* å®é™…åœºæ™¯2ï¼šæ¡çº¹èƒŒæ™¯ï¼ˆé«˜é¢‘éœ€æ±‚ï¼Œæˆ‘æ—©æœŸå†™é”™è¿‡background-sizeï¼‰ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
  <span class="hljs-number">90deg</span>,
  <span class="hljs-number">#333</span> <span class="hljs-number">0%</span>,
  <span class="hljs-number">#333</span> <span class="hljs-number">50%</span>,
  <span class="hljs-number">#666</span> <span class="hljs-number">50%</span>,
  <span class="hljs-number">#666</span> <span class="hljs-number">100%</span>
);
<span class="hljs-attribute">background-size</span>: <span class="hljs-number">20px</span> <span class="hljs-number">100%</span>; <span class="hljs-comment">/* å…³é”®ï¼šæ§åˆ¶æ¡çº¹å®½åº¦ï¼Œ20pxæ˜¯æ¡çº¹æ€»å®½ï¼Œæ¼å†™å°±æ²¡æœ‰æ¡çº¹æ•ˆæœ */</span>
</code></pre>
<p><strong>é«˜é¢‘å‘ç‚¹ï¼ˆå…¨æ˜¯æˆ‘è¸©è¿‡çš„å†¤æ‰è·¯ï¼‰</strong> ï¼š1. æ–¹å‘æ··æ·†ï¼što rightæ˜¯ä»å·¦åˆ°å³ï¼Œto leftæ˜¯ä»å³åˆ°å·¦ï¼Œæˆ‘æ—©æœŸæ›¾æŠŠto rightå†™æˆto leftï¼Œæ¸å˜æ–¹å‘å®Œå…¨åäº†ï¼Œé¡µé¢æ•´ä½“é”™ä¹±ï¼Œæ’æŸ¥äº†åŠå¤©æ‰å‘ç°æ˜¯è¿™ä¸ªå°é—®é¢˜ï¼›2. æ¡çº¹èƒŒæ™¯æ¼å†™background-sizeï¼šæˆ‘ç¬¬ä¸€æ¬¡å†™æ¡çº¹ï¼Œåªå†™äº†æ¸å˜ä»£ç ï¼Œæ²¡å†™background-sizeï¼Œç»“æœé¡µé¢æ˜¾ç¤ºçš„æ˜¯å•ä¸€æ¸å˜ï¼Œæ²¡æœ‰ä»»ä½•æ¡çº¹æ•ˆæœï¼Œè¿˜ä»¥ä¸ºæ˜¯ä»£ç å†™é”™äº†ï¼ŒæŠ˜è…¾äº†å¥½ä¹…ï¼›3. è‰²æ ‡ä½ç½®ä¸å†™ï¼šé»˜è®¤æ˜¯å‡åŒ€è¿‡æ¸¡ï¼Œæƒ³è¦æ¡çº¹é‚£ç§ç”Ÿç¡¬åˆ†ç•Œï¼Œå¿…é¡»ç»™ç›¸é‚»è‰²æ ‡è®¾ç›¸åŒä½ç½®ï¼ˆæ¯”å¦‚50%ã€50%ï¼‰ï¼Œä¸ç„¶è¿‡æ¸¡ä¼šå¾ˆæŸ”å’Œï¼Œè¾¾ä¸åˆ°æƒ³è¦çš„æ•ˆæœã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€å¾„å‘æ¸å˜ radial-gradientï¼šåšå…‰æ™•ã€åœ†å½¢èƒŒæ™¯è¶…åˆé€‚</h2>
<p>å¾„å‘æ¸å˜å’Œçº¿æ€§æ¸å˜ä¸ä¸€æ ·ï¼Œå®ƒæ˜¯â€œä»ä¸­å¿ƒç‚¹å‘å¤–æ‰©æ•£â€çš„ï¼Œè‡ªå¸¦å±‚æ¬¡æ„Ÿï¼Œç‰¹åˆ«é€‚åˆåšåœ†å½¢èƒŒæ™¯ã€å¡ç‰‡hoverå…‰æ™•ã€å¤´åƒè¾¹æ¡†è¿™äº›ç‚¹ç¼€æ€§çš„æ•ˆæœï¼Œèƒ½æ‚„æ‚„æå‡é¡µé¢è´¨æ„Ÿã€‚å®ƒçš„æ ¸å¿ƒä¹Ÿç®€å•ï¼Œå°±æ˜¯æ§åˆ¶â€œå½¢çŠ¶+åœ†å¿ƒä½ç½®+è‰²æ ‡â€ï¼Œä¸ç”¨å†™å¤æ‚ä»£ç ï¼Œç®€å•è°ƒä¸€è°ƒå°±èƒ½å‡ºæ•ˆæœã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€ç”¨æ³•ï¼šåœ†å½¢ï¼Œä»ä¸­å¿ƒå‘å¤–æ¸å˜ï¼ˆé»˜è®¤æ¤­åœ†ï¼Œcircleè®¾ä¸ºåœ†å½¢ï¼‰ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle, red, blue); <span class="hljs-comment">/* åœ†å½¢ï¼Œçº¢â†’è“ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(ellipse at center, red, blue); <span class="hljs-comment">/* æ¤­åœ†ï¼ˆé»˜è®¤ï¼‰ï¼Œä¸­å¿ƒç‚¹ */</span>

<span class="hljs-comment">/* æŒ‡å®šåœ†å¿ƒä½ç½®ï¼šç²¾å‡†æ§åˆ¶æ¸å˜æ‰©æ•£èµ·ç‚¹ï¼Œæˆ‘åšå±€éƒ¨å…‰æ™•å¸¸ç”¨ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle at <span class="hljs-number">20%</span> <span class="hljs-number">80%</span>, yellow, red); <span class="hljs-comment">/* åœ†å¿ƒåœ¨å·¦ä¾§ä¸‹æ–¹ï¼ˆ20%å®½åº¦ï¼Œ80%é«˜åº¦ï¼‰ */</span>

<span class="hljs-comment">/* è‰²æ ‡æ§åˆ¶ï¼šå’Œçº¿æ€§æ¸å˜ä¸€è‡´ï¼Œå¯æ‰‹åŠ¨è®¾ä½ç½®ï¼Œå®ç°å¤šé¢œè‰²æ‰©æ•£ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">radial-gradient</span>(circle, red <span class="hljs-number">0%</span>, blue <span class="hljs-number">50%</span>, green <span class="hljs-number">100%</span>); <span class="hljs-comment">/* çº¢ï¼ˆä¸­å¿ƒï¼‰â†’è“â†’ç»¿ï¼ˆè¾¹ç¼˜ï¼‰ */</span>
</code></pre>
<p>æˆ‘çš„å®æ“å°æŠ€å·§ï¼šå¾„å‘æ¸å˜ä¸ç”¨æå¤ªå¤æ‚ï¼Œç®€å•çš„åœ†å½¢æ¸å˜+åŠé€æ˜è‰²ï¼Œå°±èƒ½åšå‡ºå¾ˆå¥½çš„æ•ˆæœã€‚æ¯”å¦‚å¡ç‰‡hoveræ—¶çš„å…‰æ™•ï¼Œæˆ‘å°±ç”¨radial-gradient(circle, rgba(102, 126, 234, 0.3), transparent)ï¼Œå†é…åˆbackground-sizeè°ƒä¸€ä¸‹èŒƒå›´ï¼Œå°±èƒ½åšå‡ºæŸ”å’Œåˆè‡ªç„¶çš„å…‰æ™•ï¼Œæ¯”å•çº¯ç”¨box-shadowè´¨æ„Ÿå¥½å¤ªå¤šã€‚</p>
<h2 data-id="heading-3">å››ã€é”¥å½¢æ¸å˜ conic-gradientï¼šè‰²è½®ã€é¥¼å›¾ä¸“å±</h2>
<p>é”¥å½¢æ¸å˜æˆ‘æ—©æœŸæ¥è§¦å¾—å¾ˆå°‘ï¼Œä¸€ç›´è§‰å¾—å®ƒæ²¡ç”¨ï¼Œç›´åˆ°åšæ•°æ®å¯è§†åŒ–ã€éœ€è¦å†™ç®€å•é¥¼å›¾æ—¶æ‰å‘ç°ï¼Œå®ƒç®€ç›´æ˜¯â€œç¥å™¨â€ï¼å®ƒå’Œå¾„å‘æ¸å˜çš„â€œå‘å¤–æ‰©æ•£â€å®Œå…¨ä¸åŒï¼Œæ˜¯â€œå›´ç»•ä¸­å¿ƒç‚¹æ—‹è½¬â€çš„ç¯å½¢è¿‡æ¸¡ï¼Œæœ€é€‚åˆåšè‰²è½®ã€é¥¼å›¾ã€åŠ è½½åŠ¨ç”»ï¼Œä¸ç”¨å†™å¤æ‚çš„å®šä½å’ŒåµŒå¥—ï¼Œå‡ è¡Œä»£ç å°±èƒ½æå®šã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€ç”¨æ³•ï¼šè‰²è½®æ•ˆæœï¼ˆå¤šé¢œè‰²ç¯å½¢è¿‡æ¸¡ï¼‰ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(red, yellow, green, blue, red); <span class="hljs-comment">/* ä»çº¢å¼€å§‹ï¼Œç¯å½¢è¿‡æ¸¡ï¼Œæœ€åå›åˆ°çº¢ */</span>

<span class="hljs-comment">/* ä»æŒ‡å®šè§’åº¦å¼€å§‹æ¸å˜ï¼šæ§åˆ¶æ¸å˜çš„èµ·å§‹ä½ç½® */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(from <span class="hljs-number">90deg</span>, red, blue); <span class="hljs-comment">/* ä»90åº¦ä½ç½®å¼€å§‹ï¼Œçº¢â†’è“ */</span>

<span class="hljs-comment">/* å®é™…åœºæ™¯ï¼šé¥¼å›¾ï¼ˆæœ€å¸¸ç”¨ï¼Œç²¾å‡†æ§åˆ¶æ¯ä¸ªæ‰‡å½¢è§’åº¦ï¼‰ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(red <span class="hljs-number">0deg</span> <span class="hljs-number">90deg</span>, blue <span class="hljs-number">90deg</span> <span class="hljs-number">180deg</span>, green <span class="hljs-number">180deg</span> <span class="hljs-number">360deg</span>); <span class="hljs-comment">/* çº¢ï¼ˆ0-90åº¦ï¼‰ã€è“ï¼ˆ90-180åº¦ï¼‰ã€ç»¿ï¼ˆ180-360åº¦ï¼‰ */</span>
</code></pre>
<p><strong>é¿å‘æé†’ï¼ˆè¡€çš„æ•™è®­ï¼‰</strong> ï¼šé”¥å½¢æ¸å˜çš„è§’åº¦çš„æ˜¯â€œç¯å½¢è§’åº¦â€ï¼Œ0degåœ¨å³ä¾§ï¼Œé¡ºæ—¶é’ˆé€’å¢ï¼Œå’Œçº¿æ€§æ¸å˜çš„è§’åº¦é€»è¾‘å®Œå…¨ä¸ä¸€æ ·ï¼æˆ‘ç¬¬ä¸€æ¬¡åšé¥¼å›¾ï¼Œå°±æŒ‰çº¿æ€§æ¸å˜çš„è§’åº¦é€»è¾‘æ¥å†™ï¼Œç»“æœæ‰‡å½¢ä½ç½®å…¨é”™äº†ï¼Œæ’æŸ¥äº†å¥½ä¹…æ‰æ‰¾åˆ°é—®é¢˜ï¼›å¦å¤–ï¼Œåšé¥¼å›¾æ—¶ï¼Œç›¸é‚»è‰²æ ‡çš„ç»“æŸè§’åº¦å’Œå¼€å§‹è§’åº¦ä¸€å®šè¦è¡”æ¥å¥½ï¼ˆæ¯”å¦‚90degæ¥90degï¼‰ï¼Œä¸ç„¶ä¸¤ä¸ªæ‰‡å½¢ä¹‹é—´ä¼šå‡ºç°ç¼éš™ï¼Œç‰¹åˆ«ä¸‘ã€‚</p>
<h2 data-id="heading-4">äº”ã€é‡å¤æ¸å˜ï¼šæ¡çº¹ã€ç½‘æ ¼ç­‰é‡å¤æ•ˆæœï¼Œä¸ç”¨å†™å¤šä½™æ ‡ç­¾</h2>
<p>é‡å¤æ¸å˜çœŸçš„å¤ªçœä»£ç äº†ï¼å®ƒçš„æ ¸å¿ƒå°±æ˜¯â€œæŠŠæ¸å˜æ•ˆæœé‡å¤æ’åˆ—â€ï¼Œä¸ç”¨å†™å¤šä¸ªdivåµŒå¥—ï¼Œå°±èƒ½åšå‡ºæ¡çº¹ã€ç½‘æ ¼ã€ç‚¹é˜µè¿™äº›é‡å¤æ ·å¼ï¼Œæˆ‘åšè¡¨æ ¼æ¡çº¹ã€é¡µé¢èƒŒæ™¯ç½‘æ ¼æ—¶ï¼ŒåŸºæœ¬éƒ½ç”¨å®ƒï¼Œæ¯”æ‰‹åŠ¨å†™å¤šä¸ªdivæ–¹ä¾¿å¤ªå¤šã€‚é‡ç‚¹å°±æ˜¯æ§åˆ¶å¥½â€œæ¸å˜é•¿åº¦+é‡å¤é—´è·â€ï¼Œå°±èƒ½åšå‡ºæƒ³è¦çš„æ•ˆæœã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* é‡å¤çº¿æ€§æ¸å˜ï¼šå¸¸ç”¨åšæ°´å¹³/å‚ç›´æ¡çº¹ï¼Œæˆ‘åšè¡¨æ ¼æ¡çº¹å¿…ç”¨ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-linear-gradient</span>(
  <span class="hljs-number">90deg</span>, <span class="hljs-comment">/* æ–¹å‘ï¼šæ°´å¹³æ¡çº¹ */</span>
  <span class="hljs-number">#333</span>,
  <span class="hljs-number">#333</span> <span class="hljs-number">10px</span>, <span class="hljs-comment">/* ç¬¬ä¸€ä¸ªæ¡çº¹ï¼š#333ï¼Œå®½åº¦10px */</span>
  <span class="hljs-number">#666</span> <span class="hljs-number">10px</span>, <span class="hljs-comment">/* è¡”æ¥ä½ç½®ï¼Œå’Œä¸Šä¸€ä¸ªç»“æŸä½ç½®ä¸€è‡´ï¼Œé¿å…ç¼éš™ */</span>
  <span class="hljs-number">#666</span> <span class="hljs-number">20px</span> <span class="hljs-comment">/* ç¬¬äºŒä¸ªæ¡çº¹ï¼š#666ï¼Œå®½åº¦10pxï¼Œæ€»é‡å¤å®½åº¦20px */</span>
);

<span class="hljs-comment">/* é‡å¤å¾„å‘æ¸å˜ï¼šå¸¸ç”¨åšåœ†å½¢ç‚¹é˜µã€ç¯å½¢é‡å¤æ•ˆæœ */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">repeating-radial-gradient</span>(circle, red, red <span class="hljs-number">10px</span>, blue <span class="hljs-number">10px</span>, blue <span class="hljs-number">20px</span>); <span class="hljs-comment">/* åœ†å½¢é‡å¤ï¼Œçº¢â†’è“ï¼Œæ¯ä¸ªé‡å¤å•å…ƒ20px */</span>
</code></pre>
<p>æˆ‘çš„å®æ“å°æŠ€å·§ï¼šé‡å¤æ¸å˜çš„å…³é”®ï¼Œå°±æ˜¯â€œç›¸é‚»è‰²æ ‡çš„ä½ç½®è¦è¡”æ¥å¥½â€ï¼Œæ¯”å¦‚å‰ä¸€ä¸ªé¢œè‰²åœ¨10pxç»“æŸï¼Œä¸‹ä¸€ä¸ªé¢œè‰²å°±ä»10pxå¼€å§‹ï¼Œè¿™æ ·ä¸¤ä¸ªæ¸å˜ä¹‹é—´æ‰ä¸ä¼šå‡ºç°ç¼éš™ï¼›å¦å¤–ï¼Œé‡å¤å•å…ƒçš„æ€»å®½åº¦ï¼ˆæ¯”å¦‚20pxï¼‰ï¼Œå†³å®šäº†æ¡çº¹çš„å¯†é›†ç¨‹åº¦ï¼Œå®½åº¦è¶Šå°ï¼Œæ¡çº¹è¶Šå¯†ï¼Œæ ¹æ®è®¾è®¡ç¨¿çµæ´»è°ƒæ•´å°±å¥½ï¼Œä¸ç”¨æ­»è®°ç¡¬èƒŒã€‚</p>
<h2 data-id="heading-5">å…­ã€æ··åˆæ¨¡å¼ mix-blend-modeï¼šé«˜çº§å åŠ æ•ˆæœï¼Œæå‡é¡µé¢è´¨æ„Ÿ</h2>
<p>æ··åˆæ¨¡å¼æˆ‘æ—©æœŸä¸€ç›´ä¸æ•¢ç¢°ï¼Œæ€»è§‰å¾—å®ƒå¤ªå¤æ‚ï¼Œæ€•ç”¨é”™äº†æŠŠé¡µé¢é¢œè‰²æä¹±ï¼Œç›´åˆ°åæ¥åšBannerå›¾ã€éœ€è¦æ–‡å­—å’ŒèƒŒæ™¯å åŠ æ—¶æ‰å‘ç°ï¼Œå®ƒèƒ½åšå‡ºç‰¹åˆ«é«˜çº§çš„æ•ˆæœï¼Œè€Œä¸”æ²¡é‚£ä¹ˆéš¾ã€‚æ ¸å¿ƒå°±æ˜¯â€œè®©å½“å‰å…ƒç´ ï¼Œå’Œå®ƒä¸‹æ–¹çš„å†…å®¹äº§ç”Ÿå åŠ ååº”â€ï¼Œæ¯”å¦‚æ­£ç‰‡å åº•ã€æ»¤è‰²ï¼Œé€‰å¯¹æ¨¡å¼ï¼Œå°±èƒ½è½»æ¾åšå‡ºé«˜çº§æ„Ÿï¼Œä¸ç”¨å†™å¤šä½™çš„æ ·å¼ã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* å…ƒç´ æ··åˆï¼šè®©å½“å‰å…ƒç´ ï¼ˆå åŠ å±‚ï¼‰ä¸ä¸‹æ–¹å…ƒç´ å åŠ  */</span>
<span class="hljs-selector-class">.overlay</span> { <span class="hljs-comment">/* å åŠ å±‚ï¼Œæ¯”å¦‚é®ç½©ã€æ–‡å­— */</span>
  <span class="hljs-attribute">mix-blend-mode</span>: multiply;   <span class="hljs-comment">/* æ­£ç‰‡å åº•ï¼šå¸¸ç”¨åšå›¾ç‰‡æš—åŒ–é®ç½©ï¼Œæˆ‘æœ€å¸¸ç”¨ */</span>
  <span class="hljs-attribute">mix-blend-mode</span>: screen;    <span class="hljs-comment">/* æ»¤è‰²ï¼šå¸¸ç”¨åšå›¾ç‰‡æäº®ï¼Œé€‚åˆæµ…è‰²å åŠ  */</span>
  <span class="hljs-attribute">mix-blend-mode</span>: overlay;   <span class="hljs-comment">/* å åŠ ï¼šä¿ç•™åº•å±‚ç»†èŠ‚ï¼ŒåŒæ—¶å åŠ ä¸Šå±‚é¢œè‰²ï¼Œé«˜çº§æ„Ÿå¼º */</span>
  <span class="hljs-attribute">mix-blend-mode</span>: difference; <span class="hljs-comment">/* å·®å€¼ï¼šé¢œè‰²å¯¹æ¯”å¼ºçƒˆï¼Œé€‚åˆç‰¹æ®Šæ•ˆæœï¼Œå°‘ç”¨ */</span>
}

<span class="hljs-comment">/* èƒŒæ™¯æ··åˆï¼šè®©å…ƒç´ çš„èƒŒæ™¯ï¼ˆæ¯”å¦‚æ¸å˜+å›¾ç‰‡ï¼‰å†…éƒ¨å åŠ  */</span>
<span class="hljs-attribute">background-blend-mode</span>: multiply; <span class="hljs-comment">/* èƒŒæ™¯å†…éƒ¨å åŠ  */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(red, blue), <span class="hljs-built_in">url</span>(<span class="hljs-string">bg.jpg</span>); <span class="hljs-comment">/* æ¸å˜ä¸èƒŒæ™¯å›¾å åŠ ï¼Œé…åˆä¸Šé¢çš„æ··åˆæ¨¡å¼ */</span>
</code></pre>
<p><strong>é¿å‘æé†’ï¼ˆæˆ‘è¸©è¿‡çš„è ¢å‘ï¼‰</strong> ï¼š1. æ··åˆæ¨¡å¼å¿…é¡»â€œä¸‹æ–¹æœ‰å†…å®¹â€æ‰èƒ½ç”Ÿæ•ˆï¼æˆ‘ç¬¬ä¸€æ¬¡ç”¨mix-blend-modeï¼Œç»™ä¸€ä¸ªå•ç‹¬çš„é®ç½©å±‚åŠ äº†è¿™ä¸ªå±æ€§ï¼Œç»“æœä¸€ç‚¹æ•ˆæœéƒ½æ²¡æœ‰ï¼ŒæŠ˜è…¾äº†åŠå¤©ï¼Œæ‰å‘ç°é®ç½©å±‚ä¸‹æ–¹æ˜¯ç©ºçš„ï¼Œæ²¡æœ‰å¯å åŠ çš„å†…å®¹ï¼›2. åˆ«æ»¥ç”¨æ··åˆæ¨¡å¼ï¼å®ƒä¼šæ”¹å˜å…ƒç´ åŸæœ¬çš„é¢œè‰²å‘ˆç°ï¼Œæ™®é€šé¡µé¢å°½é‡ä¸ç”¨ï¼Œåªåœ¨Bannerã€è¯¦æƒ…é¡µè¿™ç§éœ€è¦é«˜çº§æ•ˆæœçš„åœ°æ–¹ç”¨ï¼Œä¸ç„¶å¾ˆå®¹æ˜“å¯¼è‡´é¢œè‰²é”™ä¹±ï¼Œå½±å“é¡µé¢å¯è¯»æ€§ã€‚</p>
<h2 data-id="heading-6">ä¸ƒã€color-mixï¼šé¢œè‰²æ··åˆæ–°è¯­æ³•ï¼Œä¸»é¢˜è‰²å˜ä½“è¶…æ–¹ä¾¿</h2>
<p>color-mix ç»å¯¹æ˜¯CSSæ–°å¢è¯­æ³•é‡Œï¼Œæˆ‘æœ€çˆ±çš„ä¸€ä¸ªï¼å®ƒèƒ½å¿«é€Ÿæ··åˆä¸¤ç§é¢œè‰²ï¼Œä¸ç”¨æ‰‹åŠ¨è®¡ç®—è‰²å€¼ï¼Œçœäº†å¤§é‡è¯•è‰²çš„æ—¶é—´ï¼Œå°¤å…¶é€‚åˆåšä¸»é¢˜è‰²å˜ä½“â€”â€”æ¯”å¦‚æŒ‰é’®hoverå˜äº®ã€ç¦ç”¨è‰²ã€æµ…è‰²ç³»èƒŒæ™¯ï¼Œç”¨å®ƒæ¥å†™ï¼Œé«˜æ•ˆåˆç²¾å‡†ï¼Œæ¯”æ‰‹åŠ¨è°ƒhexã€hslæ–¹ä¾¿å¤ªå¤šï¼Œæˆ‘ç°åœ¨åšä¸»é¢˜è‰²ç›¸å…³çš„æ ·å¼ï¼Œå…¨é å®ƒã€‚</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åŸºç¡€ç”¨æ³•ï¼šæ··åˆä¸¤ä¸ªé¢œè‰²ï¼ŒæŒ‡å®šæ··åˆæ¯”ä¾‹ */</span>
<span class="hljs-attribute">color</span>: <span class="hljs-built_in">color-mix</span>(in srgb, red <span class="hljs-number">50%</span>, blue); <span class="hljs-comment">/* åœ¨srgbè‰²ç©ºé—´ï¼Œçº¢50% + è“50%ï¼Œæ··åˆå‡ºç´«è‰² */</span>
<span class="hljs-attribute">background</span>: <span class="hljs-built_in">color-mix</span>(in hsl, <span class="hljs-number">#333</span> <span class="hljs-number">80%</span>, white); <span class="hljs-comment">/* æ·±ç°80% + ç™½20%ï¼Œæ··åˆå‡ºæµ…ç°è‰² */</span>

<span class="hljs-comment">/* å®é™…åœºæ™¯ï¼šæŒ‰é’®hoverå˜äº®ï¼ˆæˆ‘é¡¹ç›®é‡Œçš„å¸¸ç”¨å†™æ³•ï¼‰ */</span>
<span class="hljs-selector-class">.btn</span> {
  <span class="hljs-attr">--primary</span>: <span class="hljs-number">#667eea</span>; <span class="hljs-comment">/* ä¸»é¢˜è‰²å˜é‡ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--primary);
}
<span class="hljs-selector-class">.btn</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-comment">/* ä¸»é¢˜è‰²85% + ç™½15%ï¼Œå®ç°hoverå˜äº®ï¼Œä¸ç”¨é‡æ–°æ‰¾è‰²å€¼ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--primary) <span class="hljs-number">85%</span>, white);
}
</code></pre>
<p>æˆ‘çš„å®æ“å¿ƒå¾—ï¼šcolor-mix ä¸ç”¨è®°å¤æ‚è¯­æ³•ï¼Œæ ¸å¿ƒå°±æ˜¯â€œæŒ‡å®šè‰²ç©ºé—´+æ··åˆæ¯”ä¾‹â€ã€‚å»ºè®®ä¼˜å…ˆç”¨in srgbï¼Œå…¼å®¹æ€§æ›´å¥½ï¼›æ··åˆæ¯”ä¾‹ä¹Ÿä¸ç”¨å†™ä¸¤ä¸ªï¼Œåªå†™ä¸€ä¸ªå°±è¡Œï¼Œå¦ä¸€ä¸ªä¼šè‡ªåŠ¨è¡¥å…¨ï¼ˆæ¯”å¦‚çº¢50%ï¼Œè“å°±é»˜è®¤æ˜¯50%ï¼‰ã€‚åšä¸»é¢˜è‰²å˜ä½“æ—¶ï¼Œæ··åˆç™½è‰²å°±èƒ½å˜äº®ï¼Œæ··åˆé»‘è‰²å°±èƒ½å˜æš—ï¼Œæ¯”æ‰‹åŠ¨è°ƒhslçš„æ˜åº¦æ›´ç²¾å‡†ï¼Œè€Œä¸”å…¨ç«™ä¸»é¢˜è‰²èƒ½ä¿æŒç»Ÿä¸€ï¼Œä¸ä¼šå‡ºç°è‰²å·®ã€‚</p>
<h2 data-id="heading-7">å…«ã€æˆ‘çš„å®é™…ç¤ºä¾‹ï¼ˆç›´æ¥å¥—ç”¨ï¼Œå°‘è¸©å‘ï¼‰</h2>
<p>ç»“åˆæˆ‘æ—¥å¸¸å¼€å‘çš„é«˜é¢‘åœºæ™¯ï¼Œæ•´ç†äº†4ä¸ªå®æ“å†™æ³•ï¼Œæ–°æ‰‹å¯ä»¥ç›´æ¥å¤åˆ¶å¥—ç”¨ï¼Œå…¨æ˜¯æˆ‘é¡¹ç›®é‡Œå¸¸ç”¨çš„ï¼Œé¿å¼€äº†æ‰€æœ‰æˆ‘è¸©è¿‡çš„å‘ï¼Œä¸ç”¨å†è‡ªå·±çç¢ç£¨ï¼š</p>
<pre><code class="hljs language-css" lang="css"><span class="hljs-comment">/* åœºæ™¯1ï¼šå¡ç‰‡æ¸å˜è¾¹æ¡†ï¼ˆé«˜çº§æ„Ÿæ‹‰æ»¡ï¼Œä¸ç”¨é¢å¤–å†™è¾¹æ¡†æ ‡ç­¾ï¼‰ */</span>
<span class="hljs-selector-class">.card</span> {
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">24px</span>; <span class="hljs-comment">/* ç»™å†…éƒ¨ç•™ç©ºé—´ï¼Œé¿å…å†…å®¹è´´è¾¹æ¡† */</span>
}
<span class="hljs-selector-class">.card</span><span class="hljs-selector-pseudo">::before</span> {
  <span class="hljs-attribute">content</span>: <span class="hljs-string">""</span>;
  <span class="hljs-attribute">position</span>: absolute;
  inset: <span class="hljs-number">0</span>; <span class="hljs-comment">/* å…¨å±è¦†ç›–çˆ¶å…ƒç´  */</span>
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span>; <span class="hljs-comment">/* è¾¹æ¡†å®½åº¦ï¼Œå…³é”® */</span>
  <span class="hljs-attribute">border-radius</span>: inherit; <span class="hljs-comment">/* ç»§æ‰¿çˆ¶å…ƒç´ åœ†è§’ï¼Œé¿å…åœ†è§’é”™ä½ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span>, <span class="hljs-number">#764ba2</span>); <span class="hljs-comment">/* æ¸å˜è¾¹æ¡†é¢œè‰² */</span>
  <span class="hljs-comment">/* å…³é”®ï¼šå®ç°åªæ˜¾ç¤ºè¾¹æ¡†ï¼Œä¸è¦†ç›–å†…éƒ¨èƒŒæ™¯ */</span>
  -webkit-<span class="hljs-attribute">mask</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#fff</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>) content-box, <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">#fff</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>);
  <span class="hljs-attribute">mask-composite</span>: exclude;
}

<span class="hljs-comment">/* åœºæ™¯2ï¼šæ–‡å­—æ¸å˜ï¼ˆæ ‡é¢˜å¸¸ç”¨ï¼Œé«˜çº§ä¸ç”Ÿç¡¬ï¼‰ */</span>
<span class="hljs-selector-class">.gradient-text</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">90deg</span>, <span class="hljs-number">#667eea</span>, <span class="hljs-number">#764ba2</span>); <span class="hljs-comment">/* æ¸å˜é¢œè‰² */</span>
  -webkit-<span class="hljs-attribute">background-clip</span>: text; <span class="hljs-comment">/* æŠŠèƒŒæ™¯è£å‰ªåˆ°æ–‡å­—ä¸Šï¼Œwebkitå‰ç¼€å…¼å®¹ç§»åŠ¨ç«¯ */</span>
  -webkit-text-fill-<span class="hljs-attribute">color</span>: transparent; <span class="hljs-comment">/* æ–‡å­—é¢œè‰²é€æ˜ï¼Œæ˜¾ç¤ºèƒŒæ™¯æ¸å˜ */</span>
  <span class="hljs-attribute">background-clip</span>: text; <span class="hljs-comment">/* æ ‡å‡†å†™æ³• */</span>
  <span class="hljs-attribute">font-size</span>: <span class="hljs-number">2rem</span>;
  <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;
}

<span class="hljs-comment">/* åœºæ™¯3ï¼šç®€å•é¥¼å›¾ï¼ˆæ•°æ®å¯è§†åŒ–å¸¸ç”¨ï¼Œä¸ç”¨å¤æ‚ç»„ä»¶ï¼‰ */</span>
<span class="hljs-selector-class">.pie-chart</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>; <span class="hljs-comment">/* åœ†å½¢å®¹å™¨ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">conic-gradient</span>(red <span class="hljs-number">0deg</span> <span class="hljs-number">90deg</span>, blue <span class="hljs-number">90deg</span> <span class="hljs-number">180deg</span>, green <span class="hljs-number">180deg</span> <span class="hljs-number">360deg</span>);
}

<span class="hljs-comment">/* åœºæ™¯4ï¼šå¸¦hoveræ•ˆæœçš„æ¸å˜æŒ‰é’®ï¼ˆæ—¥å¸¸é«˜é¢‘ï¼‰ */</span>
<span class="hljs-selector-class">.btn-primary</span> {
  <span class="hljs-attr">--primary</span>: <span class="hljs-built_in">linear-gradient</span>(<span class="hljs-number">135deg</span>, <span class="hljs-number">#667eea</span> <span class="hljs-number">0%</span>, <span class="hljs-number">#764ba2</span> <span class="hljs-number">100%</span>);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">var</span>(--primary);
  <span class="hljs-attribute">color</span>: white;
  <span class="hljs-attribute">border</span>: none;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">8px</span> <span class="hljs-number">20px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}
<span class="hljs-selector-class">.btn-primary</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-comment">/* æ··åˆä¸»é¢˜è‰²å’Œç™½è‰²ï¼Œå®ç°hoverå˜äº®ï¼ŒåŒæ—¶ä¿ç•™æ¸å˜ */</span>
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">color-mix</span>(in srgb, <span class="hljs-built_in">var</span>(--primary) <span class="hljs-number">90%</span>, white);
  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">2px</span>); <span class="hljs-comment">/* è½»å¾®ä¸Šæµ®ï¼Œæå‡äº¤äº’æ„Ÿ */</span>
}
</code></pre>
<h2 data-id="heading-8">ä¹ã€ä¸ªäººæ€»ç»“ï¼šé¢œè‰²ä¸æ¸å˜é¿å‘æ ¸å¿ƒï¼ˆæ–°æ‰‹å¿…çœ‹ï¼‰</h2>
<ol>
<li>
<p>é¢œè‰²è¡¨ç¤ºæ³•ï¼šhex æ—¥å¸¸å‡‘æ´»ç”¨ã€rgb ä¸“é—¨åšé€æ˜ã€hsl è´Ÿè´£è°ƒè‰²ï¼Œoklch æš‚ä¸è€ƒè™‘ï¼Œæ–°æ‰‹èšç„¦è¿™3ç§ï¼Œè¶³å¤Ÿåº”å¯¹æ‰€æœ‰åœºæ™¯ï¼Œä¸ç”¨è´ªå¤šæ±‚å…¨ï¼›</p>
</li>
<li>
<p>çº¿æ€§æ¸å˜ï¼šæ–¹å‘+è‰²æ ‡æ˜¯æ ¸å¿ƒï¼ŒæŒ‰é’®ã€èƒŒæ™¯é¦–é€‰å®ƒï¼Œå†™æ¡çº¹åƒä¸‡åˆ«æ¼å†™background-sizeï¼Œä¸ç„¶ç­‰äºç™½å†™ï¼›</p>
</li>
<li>
<p>å¾„å‘æ¸å˜ï¼šåšåœ†å½¢ã€å…‰æ™•çš„ç¥å™¨ï¼Œæ§åˆ¶å¥½åœ†å¿ƒä½ç½®ï¼Œå°±èƒ½æ‚„æ‚„æå‡é¡µé¢å±‚æ¬¡æ„Ÿï¼Œä¸ç”¨æå¤æ‚æ ·å¼ï¼›</p>
</li>
<li>
<p>é”¥å½¢æ¸å˜ï¼šè‰²è½®ã€é¥¼å›¾ä¸“å±ï¼Œè®°ä½å®ƒçš„è§’åº¦æ˜¯ç¯å½¢è§’åº¦ï¼Œç›¸é‚»è‰²æ ‡è¡”æ¥å¥½ï¼Œé¿å…å‡ºç°ç¼éš™ï¼›</p>
</li>
<li>
<p>é‡å¤æ¸å˜ï¼šç›¸é‚»è‰²æ ‡ä½ç½®è¡”æ¥å¥½ï¼Œèƒ½çœå¾ˆå¤šåµŒå¥—ä»£ç ï¼Œåšæ¡çº¹ã€ç½‘æ ¼è¶…æ–¹ä¾¿ï¼›</p>
</li>
<li>
<p>æ··åˆæ¨¡å¼ï¼šæŒ‰éœ€é€‰ç”¨ï¼Œæ­£ç‰‡å åº•ã€å åŠ æœ€å¸¸ç”¨ï¼Œè®°ä½â€œä¸‹æ–¹è¦æœ‰å†…å®¹â€ï¼Œä¸ç„¶æ²¡ç”¨ï¼Œåˆ«æ»¥ç”¨ï¼›</p>
</li>
<li>
<p>color-mixï¼šä¸»é¢˜è‰²å˜ä½“ç¥å™¨ï¼Œæ··åˆç™½è‰²/é»‘è‰²å®ç°äº®æš—å˜åŒ–ï¼Œä¸ç”¨æ‰‹åŠ¨è¯•è‰²ï¼Œé«˜æ•ˆåˆç²¾å‡†ã€‚</p>
</li>
</ol>
<p>å…¶å®é¢œè‰²ä¸æ¸å˜çœŸçš„ä¸éš¾ï¼Œæˆ‘æœ€å¼€å§‹ä¹Ÿæ˜¯åªä¼šæŠ„hexã€å†™ç®€å•çº¿æ€§æ¸å˜ï¼Œè¸©äº†æ— æ•°å‘ï¼Œæ‰æ…¢æ…¢ç†Ÿç»ƒèµ·æ¥ã€‚æ ¸å¿ƒå°±æ˜¯â€œå¤šè¯•ã€å¤šæ€»ç»“â€ï¼Œä¸ç”¨ä¸€å¼€å§‹å°±è¿½æ±‚å¤æ‚æ•ˆæœï¼Œå…ˆæŒæ¡åŸºç¡€ç”¨æ³•ï¼Œå†é€æ­¥å°è¯•é«˜çº§æ•ˆæœï¼Œæ…¢æ…¢å°±èƒ½åšå‡ºæœ‰è´¨æ„Ÿçš„é¡µé¢ã€‚é…åˆå‰3ç¯‡è®²çš„ç›’æ¨¡å‹ã€å•ä½çŸ¥è¯†ï¼ŒCSSå¸ƒå±€+ç¾åŒ–ï¼Œå°±èƒ½è½»æ¾æ‹¿æã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç®€å•å¾®ä¿¡å°ç¨‹åºå¼€å‘æ¡ˆä¾‹â€”â€”ç¬é—´å¬åŠ›æµ‹è¯•]]></title>    <link>https://juejin.cn/post/7602259669707063322</link>    <guid>https://juejin.cn/post/7602259669707063322</guid>    <pubDate>2026-02-03T02:04:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669707063322" data-draft-id="7602177113685508147" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç®€å•å¾®ä¿¡å°ç¨‹åºå¼€å‘æ¡ˆä¾‹â€”â€”ç¬é—´å¬åŠ›æµ‹è¯•"/> <meta itemprop="keywords" content="å‰ç«¯,å¾®ä¿¡å°ç¨‹åº"/> <meta itemprop="datePublished" content="2026-02-03T02:04:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è™šæƒŠä¸€åœº"/> <meta itemprop="url" content="https://juejin.cn/user/2696462831981975"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç®€å•å¾®ä¿¡å°ç¨‹åºå¼€å‘æ¡ˆä¾‹â€”â€”ç¬é—´å¬åŠ›æµ‹è¯•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2696462831981975/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è™šæƒŠä¸€åœº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:04:26.000Z" title="Tue Feb 03 2026 02:04:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¡¹ç›®åç§°</h2>
<p>å¾®ä¿¡æœç´¢ï¼š<code>ç¬é—´å¬åŠ›æµ‹è¯•</code></p>
<h2 data-id="heading-1">é¡¹ç›®æ¦‚è¿°</h2>
<p>è¿™æ˜¯ä¸€ä¸ªåŸºäº Vue 3 + uni-app å¼€å‘çš„ç¬é—´å¬åŠ›æµ‹è¯•æ¸¸æˆï¼Œç©å®¶éœ€è¦åœ¨å¬åˆ°ä¸€ä¸²æ•°å­—åå‡†ç¡®è¾“å…¥ã€‚æ¸¸æˆä» 7 ä½æ•°å­—å¼€å§‹ï¼Œæœ€é«˜å¯æŒ‘æˆ˜ 20 ä½æ•°å­—ï¼Œæ”¯æŒä¸‰ç§éš¾åº¦æ¨¡å¼ï¼ˆèˆ’ç¼“ã€æ­£å¸¸ã€æ€¥ä¿ƒï¼‰ï¼Œå…·æœ‰ç²¾ç¾çš„ UI è®¾è®¡å’Œæµç•…çš„äº¤äº’ä½“éªŒã€‚</p>
<h3 data-id="heading-2">æ ¸å¿ƒåŠŸèƒ½ç‰¹æ€§</h3>
<ul>
<li><strong>æ¸è¿›å¼éš¾åº¦</strong>ï¼šä» 7 ä½æ•°å­—å¼€å§‹ï¼ŒæˆåŠŸåè‡ªåŠ¨å‡çº§åˆ°ä¸‹ä¸€å…³</li>
<li><strong>å¤šéš¾åº¦æ¨¡å¼</strong>ï¼šä¸‰ç§è¯­éŸ³æ’­æ”¾é€Ÿåº¦ï¼Œé€‚åº”ä¸åŒç”¨æˆ·éœ€æ±‚</li>
<li><strong>å®æ—¶éŸ³æ•ˆåé¦ˆ</strong>ï¼šæŒ‰é’®ç‚¹å‡»éŸ³æ•ˆå’Œå£°æ³¢å¯è§†åŒ–</li>
<li><strong>æ™ºèƒ½è¯­éŸ³æ’­æŠ¥</strong>ï¼šåŸºäºå¾®è½¯ TTS çš„é«˜è´¨é‡è¯­éŸ³åˆæˆ</li>
<li><strong>å“åº”å¼è®¾è®¡</strong>ï¼šé€‚é…å¤šç§å±å¹•å°ºå¯¸</li>
<li><strong>ç¤¾äº¤åˆ†äº«</strong>ï¼šæ”¯æŒå¾®ä¿¡åˆ†äº«ï¼ŒåŠ¨æ€ç”Ÿæˆä¸ªæ€§åŒ–æ ‡é¢˜</li>
</ul>
<h2 data-id="heading-3">æŠ€æœ¯æ¶æ„</h2>
<h3 data-id="heading-4">å‰ç«¯æŠ€æœ¯æ ˆ</h3>
<ul>
<li><strong>æ¡†æ¶</strong>ï¼šVue 3 Composition API + uni-app</li>
<li><strong>æ ·å¼</strong>ï¼šSCSS + ä¸»é¢˜ç³»ç»Ÿ</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šComposables æ¨¡å¼</li>
<li><strong>éŸ³é¢‘å¤„ç†</strong>ï¼šå¾®ä¿¡å°ç¨‹åºéŸ³é¢‘ API</li>
</ul>
<h3 data-id="heading-5">åç«¯æœåŠ¡</h3>
<ul>
<li><strong>TTS æœåŠ¡</strong>ï¼šå¾®è½¯å¼€æº TTS é•œåƒéƒ¨ç½²</li>
<li><strong>API æ¥å£</strong>ï¼šRESTful API è®¾è®¡</li>
<li><strong>éŸ³é¢‘æ ¼å¼</strong>ï¼šMP3 æµå¼ä¼ è¾“</li>
</ul>
<h2 data-id="heading-6">CSS å·§å¦™ç”¨æ³•è¯¦è§£</h2>
<h3 data-id="heading-7">1. ä¸»é¢˜ç³»ç»Ÿè®¾è®¡</h3>
<p>é¡¹ç›®é‡‡ç”¨äº†åŸºäº SCSS Map çš„ä¸»é¢˜ç³»ç»Ÿï¼Œæ”¯æŒä¸‰ç§è§†è§‰é£æ ¼ï¼š</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-variable">$themes</span>: (
  easy: (
    start: <span class="hljs-number">#d6d3ac</span>,
    secondary: <span class="hljs-number">#d5d693</span>,
    accent: <span class="hljs-number">#a5d6a7</span>,
    primary: <span class="hljs-number">#81c784</span>,
    end: <span class="hljs-number">#81c784</span>,
    shadow: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">129</span>, <span class="hljs-number">199</span>, <span class="hljs-number">132</span>, <span class="hljs-number">0.35</span>),
  ),
  normal: (
    start: <span class="hljs-number">#f8bbd9</span>,
    secondary: <span class="hljs-number">#e1bee7</span>,
    accent: <span class="hljs-number">#81d4fa</span>,
    primary: <span class="hljs-number">#4fc3f7</span>,
    end: <span class="hljs-number">#29b6f6</span>,
    shadow: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">41</span>, <span class="hljs-number">182</span>, <span class="hljs-number">246</span>, <span class="hljs-number">0.4</span>),
  ),
  hard: (
    start: <span class="hljs-number">#fcbc81</span>,
    secondary: <span class="hljs-number">#ffac75</span>,
    accent: <span class="hljs-number">#ffabad</span>,
    primary: <span class="hljs-number">#ff9393</span>,
    end: <span class="hljs-number">#ff7072</span>,
    shadow: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">112</span>, <span class="hljs-number">114</span>, <span class="hljs-number">0.45</span>),
  ),
);

<span class="hljs-keyword">@mixin</span> theme-gradient(<span class="hljs-variable">$theme-name</span>) {
  <span class="hljs-variable">$theme</span>: <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$themes</span>, <span class="hljs-variable">$theme-name</span>);
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">linear-gradient</span>(
    <span class="hljs-number">135deg</span>,
    <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$theme</span>, start),
    <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$theme</span>, secondary),
    <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$theme</span>, accent),
    <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$theme</span>, primary),
    <span class="hljs-built_in">map-get</span>(<span class="hljs-variable">$theme</span>, end)
  );
}

<span class="hljs-keyword">@each</span> <span class="hljs-variable">$theme-name</span>, <span class="hljs-variable">$theme</span> in <span class="hljs-variable">$themes</span> {
  &amp;<span class="hljs-selector-class">.theme-</span>#{<span class="hljs-variable">$theme-name</span>} {
    <span class="hljs-keyword">@include</span> theme-gradient(<span class="hljs-variable">$theme-name</span>);
  }
}
</code></pre>
<p><strong>æŠ€æœ¯äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>@each</code> å¾ªç¯è‡ªåŠ¨ç”Ÿæˆä¸»é¢˜å˜ä½“</li>
<li>é€šè¿‡ <code>map-get()</code> å‡½æ•°åŠ¨æ€è·å–ä¸»é¢˜è‰²å½©</li>
<li>æ”¯æŒè¿è¡Œæ—¶ä¸»é¢˜åˆ‡æ¢ï¼Œæ— éœ€é‡æ–°ç¼–è¯‘</li>
</ul>
<h3 data-id="heading-8">2. å£°æ³¢åŠ¨ç”»æ•ˆæœ</h3>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@keyframes</span> playingWave {
  <span class="hljs-number">0%</span>,
  <span class="hljs-number">100%</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">15</span>rpx;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1</span>);
  }
  <span class="hljs-number">50%</span> {
    <span class="hljs-attribute">height</span>: <span class="hljs-number">80</span>rpx;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scaleY</span>(<span class="hljs-number">1.2</span>);
  }
}

<span class="hljs-variable">$wave-colors</span>: (
  <span class="hljs-number">1</span>: <span class="hljs-built_in">linear-gradient</span>(to top, <span class="hljs-number">#4fc3f7</span>, <span class="hljs-number">#81d4fa</span>),
  <span class="hljs-number">2</span>: <span class="hljs-built_in">linear-gradient</span>(to top, <span class="hljs-number">#ce93d8</span>, <span class="hljs-number">#e1bee7</span>),
  <span class="hljs-number">3</span>: <span class="hljs-built_in">linear-gradient</span>(to top, <span class="hljs-number">#ffcc80</span>, <span class="hljs-number">#ffb74d</span>),
  <span class="hljs-number">4</span>: <span class="hljs-built_in">linear-gradient</span>(to top, <span class="hljs-number">#a5d6a7</span>, <span class="hljs-number">#81c784</span>),
  <span class="hljs-number">5</span>: <span class="hljs-built_in">linear-gradient</span>(to top, <span class="hljs-number">#f8bbd9</span>, <span class="hljs-number">#f48fb1</span>),
);

<span class="hljs-keyword">@each</span> <span class="hljs-variable">$index</span>, <span class="hljs-variable">$gradient</span> in <span class="hljs-variable">$wave-colors</span> {
  &amp;<span class="hljs-selector-pseudo">:nth-child</span>(#{$index}) {
    <span class="hljs-attribute">background</span>: <span class="hljs-variable">$gradient</span>;
    &amp;<span class="hljs-selector-class">.playing</span> {
      <span class="hljs-attribute">animation-delay</span>: #{<span class="hljs-variable">$index</span> * -<span class="hljs-number">0.2</span>}s;
    }
  }
}
</code></pre>
<p><strong>åŠ¨ç”»äº®ç‚¹</strong>ï¼š</p>
<ul>
<li>æ¯ä¸ªæ³¢å½¢æ¡ç‹¬ç«‹çš„æ¸å˜è‰²å½©</li>
<li>é”™ä½çš„åŠ¨ç”»å»¶è¿Ÿåˆ›å»ºæ³¢æµªæ•ˆæœ</li>
<li>åŠ è½½å’Œæ’­æ”¾ä¸¤ç§ä¸åŒçš„åŠ¨ç”»çŠ¶æ€</li>
</ul>
<h2 data-id="heading-9">éŸ³æ•ˆç”ŸæˆæŠ€æœ¯</h2>
<h3 data-id="heading-10">1. ç¨‹åºåŒ–éŸ³æ•ˆåˆæˆ</h3>
<p>é¡¹ç›®é‡‡ç”¨ Web Audio API åŸç†ï¼Œé€šè¿‡æ•°å­¦ç®—æ³•ç”ŸæˆæŒ‰é’®ç‚¹å‡»éŸ³æ•ˆï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initClickSound</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> sampleRate = <span class="hljs-number">44100</span>;
  <span class="hljs-keyword">const</span> duration = <span class="hljs-number">0.02</span>;
  <span class="hljs-keyword">const</span> samples = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(sampleRate * duration);
  <span class="hljs-keyword">const</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBuffer</span>(<span class="hljs-number">44</span> + samples * <span class="hljs-number">2</span>);
  <span class="hljs-keyword">const</span> view = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataView</span>(buffer);

  <span class="hljs-comment">// WAV æ–‡ä»¶å¤´ç”Ÿæˆ</span>
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">writeString</span> = (<span class="hljs-params">offset, string</span>) =&gt; {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; string.<span class="hljs-property">length</span>; i++) {
      view.<span class="hljs-title function_">setUint8</span>(offset + i, string.<span class="hljs-title function_">charCodeAt</span>(i));
    }
  };

  <span class="hljs-comment">// éŸ³é¢‘æ•°æ®ç”Ÿæˆ</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; samples; i++) {
    <span class="hljs-keyword">const</span> t = i / sampleRate;
    <span class="hljs-keyword">const</span> progress = t / duration;
    <span class="hljs-keyword">const</span> frequency = <span class="hljs-number">1200</span>; <span class="hljs-comment">// æ¸…è„†çš„ç‚¹å‡»å£°é¢‘ç‡</span>
    <span class="hljs-keyword">const</span> envelope = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(-progress * <span class="hljs-number">15</span>); <span class="hljs-comment">// å¿«é€Ÿè¡°å‡åŒ…ç»œ</span>
    <span class="hljs-keyword">const</span> sample = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(<span class="hljs-number">2</span> * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * frequency * t) * envelope * <span class="hljs-number">0.3</span>;
    <span class="hljs-keyword">const</span> intSample = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
      -<span class="hljs-number">32768</span>,
      <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(<span class="hljs-number">32767</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(sample * <span class="hljs-number">32767</span>))
    );
    view.<span class="hljs-title function_">setInt16</span>(<span class="hljs-number">44</span> + i * <span class="hljs-number">2</span>, intSample, <span class="hljs-literal">true</span>);
  }
};
</code></pre>
<p><strong>æŠ€æœ¯ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>é›¶å»¶è¿Ÿ</strong>ï¼šæ— éœ€ç½‘ç»œè¯·æ±‚ï¼Œæœ¬åœ°ç”Ÿæˆ</li>
<li><strong>ä½“ç§¯å°</strong>ï¼š20ms éŸ³æ•ˆä»…å‡  KB</li>
<li><strong>å¯å®šåˆ¶</strong>ï¼šé¢‘ç‡ã€åŒ…ç»œã€éŸ³é‡å¯è°ƒ</li>
<li><strong>å…¼å®¹æ€§å¥½</strong>ï¼šæ ‡å‡† WAV æ ¼å¼ï¼Œå…¨å¹³å°æ”¯æŒ</li>
</ul>
<h3 data-id="heading-11">2. éŸ³é¢‘æ± ä¼˜åŒ–ç­–ç•¥</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">initAudioPool</span> = (<span class="hljs-params">audioPath</span>) =&gt; {
  audioPool = [];
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; poolSize; i++) {
    <span class="hljs-keyword">const</span> audio = wx.<span class="hljs-title function_">createInnerAudioContext</span>();
    audio.<span class="hljs-property">src</span> = audioPath;
    audio.<span class="hljs-property">volume</span> = <span class="hljs-number">0.45</span>;
    audio.<span class="hljs-property">autoplay</span> = <span class="hljs-literal">false</span>;
    audioPool.<span class="hljs-title function_">push</span>(audio);
  }
};

<span class="hljs-keyword">const</span> <span class="hljs-title function_">playClickSound</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">if</span> (audioPool.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
    <span class="hljs-keyword">const</span> audio = audioPool[currentPoolIndex];
    audio.<span class="hljs-title function_">play</span>();
    currentPoolIndex = (currentPoolIndex + <span class="hljs-number">1</span>) % poolSize;
  }
};
</code></pre>
<p><strong>ä¼˜åŒ–åŸç†</strong>ï¼š</p>
<ul>
<li><strong>é¢„åŠ è½½</strong>ï¼šé¿å…æ’­æ”¾æ—¶çš„å»¶è¿Ÿ</li>
<li><strong>è½®è¯¢ä½¿ç”¨</strong>ï¼šé˜²æ­¢éŸ³é¢‘å®ä¾‹å†²çª</li>
<li><strong>å†…å­˜ç®¡ç†</strong>ï¼šå›ºå®šæ± å¤§å°ï¼Œæ§åˆ¶èµ„æºå ç”¨</li>
</ul>
<h2 data-id="heading-12">è¯­éŸ³æ’­æŠ¥åç«¯å®ç°</h2>
<h3 data-id="heading-13">1. å¾®è½¯ TTS æœåŠ¡éƒ¨ç½²</h3>
<p>é¡¹ç›®ä½¿ç”¨å¾®è½¯å¼€æºçš„ TTS é•œåƒ</p>
<p><strong>Docker éƒ¨ç½²å‘½ä»¤</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name microsoft-tts \
  -p 8080:8080 \
  -e AZURE_SPEECH_KEY=your_key \
  -e AZURE_SPEECH_REGION=your_region \
  microsoft/cognitive-services-speech-to-text
</code></pre>
<p><strong>API æ¥å£è®¾è®¡</strong>ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">playTTS</span> = (<span class="hljs-params">text, voice, speed</span>) =&gt; {
  <span class="hljs-keyword">return</span> uni.<span class="hljs-title function_">request</span>({
    <span class="hljs-attr">url</span>: <span class="hljs-string">"https://xxx.com/tts/v1/audio/speech"</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
    <span class="hljs-attr">data</span>: {
      <span class="hljs-attr">input</span>: text,
      <span class="hljs-attr">voice</span>: <span class="hljs-string">"zh-CN-XiaoyiNeural"</span>, <span class="hljs-comment">// å¾®è½¯å°è‰ºè¯­éŸ³</span>
      <span class="hljs-attr">response_format</span>: <span class="hljs-string">"mp3"</span>,
      <span class="hljs-attr">speed</span>: speed || <span class="hljs-number">1.0</span>,
    },
    <span class="hljs-attr">responseType</span>: <span class="hljs-string">"arraybuffer"</span>,
  });
};
</code></pre>
<h3 data-id="heading-14">2. éŸ³é¢‘æµå¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">playAudio</span> = (<span class="hljs-params"/>) =&gt; {
  isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
  uni.<span class="hljs-title function_">request</span>({
    <span class="hljs-comment">// ... API é…ç½®</span>
    <span class="hljs-attr">success</span>: <span class="hljs-function">(<span class="hljs-params">res</span>) =&gt;</span> {
      <span class="hljs-comment">// ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åé¿å…ç¼“å­˜å†²çª</span>
      <span class="hljs-keyword">const</span> timestamp = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> random = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1000</span>);
      <span class="hljs-keyword">const</span> filePath = <span class="hljs-string">`<span class="hljs-subst">${uni.env.USER_DATA_PATH}</span>/audio_<span class="hljs-subst">${timestamp}</span>_<span class="hljs-subst">${random}</span>.mp3`</span>;

      fs.<span class="hljs-title function_">writeFile</span>({
        <span class="hljs-attr">filePath</span>: filePath,
        <span class="hljs-attr">data</span>: res.<span class="hljs-property">data</span>,
        <span class="hljs-attr">encoding</span>: <span class="hljs-string">"binary"</span>,
        <span class="hljs-attr">success</span>: <span class="hljs-function">() =&gt;</span> {
          isLoading.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
          isPlaying.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span>;
          innerAudioContext.<span class="hljs-property">src</span> = filePath;
          innerAudioContext.<span class="hljs-title function_">play</span>();

          <span class="hljs-comment">// æ’­æ”¾å®Œæˆåæ¸…ç†ä¸´æ—¶æ–‡ä»¶</span>
          innerAudioContext.<span class="hljs-title function_">onEnded</span>(<span class="hljs-function">() =&gt;</span> {
            isPlaying.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span>;
            fs.<span class="hljs-title function_">unlink</span>({ filePath });
          });
        },
      });
    },
  });
};
</code></pre>
<p><strong>æŠ€æœ¯ç‰¹ç‚¹</strong>ï¼š</p>
<ul>
<li><strong>æµå¼å¤„ç†</strong>ï¼šArrayBuffer ç›´æ¥å†™å…¥æ–‡ä»¶</li>
<li><strong>ä¸´æ—¶æ–‡ä»¶ç®¡ç†</strong>ï¼šæ’­æ”¾åè‡ªåŠ¨æ¸…ç†ï¼ŒèŠ‚çœå­˜å‚¨</li>
<li><strong>çŠ¶æ€åŒæ­¥</strong>ï¼šåŠ è½½å’Œæ’­æ”¾çŠ¶æ€å®æ—¶æ›´æ–° UI</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç½‘ç»œå¼‚å¸¸æ—¶çš„ä¼˜é›…é™çº§</li>
</ul>
<h3 data-id="heading-15">3. è¯­éŸ³å‚æ•°ä¼˜åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> difficulties = {
  <span class="hljs-attr">easy</span>: { <span class="hljs-attr">speed</span>: <span class="hljs-number">0.7</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"èˆ’ç¼“"</span> },
  <span class="hljs-attr">normal</span>: { <span class="hljs-attr">speed</span>: <span class="hljs-number">1.0</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"æ­£å¸¸"</span> },
  <span class="hljs-attr">hard</span>: { <span class="hljs-attr">speed</span>: <span class="hljs-number">1.5</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">"æ€¥ä¿ƒ"</span> },
};
</code></pre>
<p><strong>è¯­éŸ³é…ç½®</strong>ï¼š</p>
<ul>
<li><strong>è¯­éŸ³æ¨¡å‹</strong>ï¼š<code>zh-CN-XiaoyiNeural</code>ï¼ˆå¾®è½¯å°è‰ºï¼Œè‡ªç„¶åº¦é«˜ï¼‰</li>
<li><strong>éŸ³é¢‘æ ¼å¼</strong>ï¼šMP3ï¼ˆå‹ç¼©ç‡å¥½ï¼Œå…¼å®¹æ€§å¼ºï¼‰</li>
<li><strong>é€Ÿåº¦è°ƒèŠ‚</strong>ï¼š0.7x - 1.5x èŒƒå›´ï¼Œé€‚åº”ä¸åŒéš¾åº¦</li>
</ul>
<h2 data-id="heading-16">é¡¹ç›®æ¶æ„è®¾è®¡</h2>
<h3 data-id="heading-17">1. é¡¹ç›®ç›®å½•ç»“æ„</h3>
<pre><code class="hljs language-perl" lang="perl">memory-game/
â”œâ”€â”€ .gitignore                    <span class="hljs-comment"># Git å¿½ç•¥æ–‡ä»¶é…ç½®</span>
â”œâ”€â”€ .hbuilderx/                   <span class="hljs-comment"># HBuilderX ç¼–è¾‘å™¨é…ç½®</span>
â”‚   â””â”€â”€ launch.json              <span class="hljs-comment"># å¯åŠ¨é…ç½®</span>
â”œâ”€â”€ .prettierrc.cjs              <span class="hljs-comment"># ä»£ç æ ¼å¼åŒ–é…ç½®</span>
â”œâ”€â”€ App.vue                      <span class="hljs-comment"># åº”ç”¨æ ¹ç»„ä»¶</span>
â”œâ”€â”€ components/                   <span class="hljs-comment"># å¯å¤ç”¨ç»„ä»¶ç›®å½•</span>
â”‚   â”œâ”€â”€ CustomToast.vue          <span class="hljs-comment"># è‡ªå®šä¹‰æç¤ºç»„ä»¶</span>
â”‚   â”œâ”€â”€ DifficultySelector.vue   <span class="hljs-comment"># éš¾åº¦é€‰æ‹©å™¨ç»„ä»¶</span>
â”‚   â”œâ”€â”€ NumberKeypad.vue         <span class="hljs-comment"># æ•°å­—é”®ç›˜ç»„ä»¶</span>
â”‚   â””â”€â”€ SoundWave.vue            <span class="hljs-comment"># å£°æ³¢å¯è§†åŒ–ç»„ä»¶</span>
â”œâ”€â”€ composables/                  <span class="hljs-comment"># ç»„åˆå¼å‡½æ•°ç›®å½•</span>
â”‚   â”œâ”€â”€ useAudio.js              <span class="hljs-comment"># éŸ³é¢‘å¤„ç†é€»è¾‘</span>
â”‚   â””â”€â”€ useGame.js               <span class="hljs-comment"># æ¸¸æˆæ ¸å¿ƒé€»è¾‘</span>
â”œâ”€â”€ pages/                        <span class="hljs-comment"># é¡µé¢ç›®å½•</span>
â”‚   â””â”€â”€ <span class="hljs-keyword">index</span>/                   <span class="hljs-comment"># é¦–é¡µç›®å½•</span>
â”‚       â””â”€â”€ index.vue            <span class="hljs-comment"># æ¸¸æˆä¸»é¡µé¢</span>
â”œâ”€â”€ index.html                   <span class="hljs-comment"># HTML å…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ main.js                      <span class="hljs-comment"># åº”ç”¨å…¥å£æ–‡ä»¶</span>
â”œâ”€â”€ manifest.json                <span class="hljs-comment"># uni-app åº”ç”¨é…ç½®</span>
â”œâ”€â”€ pages.json                   <span class="hljs-comment"># é¡µé¢è·¯ç”±é…ç½®</span>
â”œâ”€â”€ uni.promisify.adaptor.js     <span class="hljs-comment"># uni-app Promise é€‚é…å™¨</span>
â””â”€â”€ uni.scss                     <span class="hljs-comment"># å…¨å±€æ ·å¼æ–‡ä»¶</span>
</code></pre>
<p><strong>ç›®å½•è®¾è®¡åŸåˆ™</strong>ï¼š</p>
<ul>
<li><strong>ç»„ä»¶åŒ–</strong>ï¼š<code>components/</code> å­˜æ”¾å¯å¤ç”¨çš„ UI ç»„ä»¶</li>
<li><strong>é€»è¾‘åˆ†ç¦»</strong>ï¼š<code>composables/</code> å­˜æ”¾ä¸šåŠ¡é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†</li>
<li><strong>é¡µé¢éš”ç¦»</strong>ï¼š<code>pages/</code> æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡é¡µé¢æ–‡ä»¶</li>
<li><strong>é…ç½®é›†ä¸­</strong>ï¼šæ ¹ç›®å½•å­˜æ”¾å„ç§é…ç½®æ–‡ä»¶</li>
</ul>
<h3 data-id="heading-18">2. Composables æ¨¡å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// useGame.js - æ¸¸æˆé€»è¾‘</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useGame</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> level = <span class="hljs-title function_">ref</span>(<span class="hljs-number">7</span>);
  <span class="hljs-keyword">const</span> gameStatus = <span class="hljs-title function_">ref</span>(<span class="hljs-string">"initial"</span>);

  <span class="hljs-keyword">const</span> <span class="hljs-title function_">startGame</span> = (<span class="hljs-params"/>) =&gt; {
    gameStatus.<span class="hljs-property">value</span> = <span class="hljs-string">"playing"</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">generateNumber</span>();
  };

  <span class="hljs-keyword">return</span> { level, gameStatus, startGame };
}

<span class="hljs-comment">// useAudio.js - éŸ³é¢‘å¤„ç†</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useAudio</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">initAudio</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-comment">/* ... */</span>
  };
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">playTTS</span> = (<span class="hljs-params">text, voice, speed</span>) =&gt; {
    <span class="hljs-comment">/* ... */</span>
  };

  <span class="hljs-keyword">return</span> { initAudio, playTTS };
}
</code></pre>
<p><strong>æ¶æ„ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li><strong>é€»è¾‘åˆ†ç¦»</strong>ï¼šæ¸¸æˆé€»è¾‘ä¸éŸ³é¢‘å¤„ç†è§£è€¦</li>
<li><strong>å¯å¤ç”¨æ€§</strong>ï¼šComposables å¯åœ¨å¤šä¸ªç»„ä»¶ä¸­ä½¿ç”¨</li>
<li><strong>æµ‹è¯•å‹å¥½</strong>ï¼šçº¯å‡½æ•°æ˜“äºå•å…ƒæµ‹è¯•</li>
</ul>
<h3 data-id="heading-19">2. ç»„ä»¶åŒ–è®¾è®¡</h3>
<ul>
<li><strong>CustomToast.vue</strong>ï¼šç»Ÿä¸€çš„æ¶ˆæ¯æç¤ºç»„ä»¶</li>
<li><strong>SoundWave.vue</strong>ï¼šå£°æ³¢å¯è§†åŒ–ç»„ä»¶</li>
<li><strong>DifficultySelector.vue</strong>ï¼šéš¾åº¦é€‰æ‹©å™¨</li>
<li><strong>NumberKeypad.vue</strong>ï¼šæ•°å­—é”®ç›˜ç»„ä»¶</li>
</ul>
<h2 data-id="heading-20">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
<h3 data-id="heading-21">1. éŸ³é¢‘ä¼˜åŒ–</h3>
<ul>
<li><strong>éŸ³é¢‘æ± </strong>ï¼šé¿å…é¢‘ç¹åˆ›å»º/é”€æ¯éŸ³é¢‘å®ä¾‹</li>
<li><strong>é¢„åŠ è½½</strong>ï¼šå…³é”®éŸ³æ•ˆæå‰åŠ è½½</li>
<li><strong>æ ¼å¼é€‰æ‹©</strong>ï¼šMP3 å¹³è¡¡è´¨é‡ä¸ä½“ç§¯</li>
</ul>
<h3 data-id="heading-22">2. å†…å­˜ç®¡ç†</h3>
<ul>
<li><strong>ä¸´æ—¶æ–‡ä»¶æ¸…ç†</strong>ï¼šæ’­æ”¾åç«‹å³åˆ é™¤</li>
<li><strong>ç»„ä»¶æ‡’åŠ è½½</strong>ï¼šæŒ‰éœ€åŠ è½½éå…³é”®ç»„ä»¶</li>
<li><strong>äº‹ä»¶ç›‘å¬æ¸…ç†</strong>ï¼šç»„ä»¶é”€æ¯æ—¶ç§»é™¤ç›‘å¬å™¨</li>
</ul>
<h3 data-id="heading-23">3. ç”¨æˆ·ä½“éªŒ</h3>
<ul>
<li><strong>é›¶å»¶è¿Ÿè¾“å…¥</strong>ï¼šæŒ‰é’®å“åº”ä¸éŸ³æ•ˆæ’­æ”¾å¼‚æ­¥å¤„ç†</li>
<li><strong>çŠ¶æ€åé¦ˆ</strong>ï¼šåŠ è½½ã€æ’­æ”¾çŠ¶æ€çš„è§†è§‰æç¤º</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šç½‘ç»œå¼‚å¸¸æ—¶çš„å‹å¥½æç¤º</li>
</ul>
<h2 data-id="heading-24">æ€»ç»“</h2>
<p>è¿™ä¸ªç¬é—´å¬åŠ›æµ‹è¯•å¾®ä¿¡å°ç¨‹åºé¡¹ç›®å±•ç¤ºäº†ç°ä»£å‰ç«¯å¼€å‘çš„å¤šä¸ªæŠ€æœ¯äº®ç‚¹ï¼š</p>
<ol>
<li><strong>CSS å·¥ç¨‹åŒ–</strong>ï¼šä¸»é¢˜ç³»ç»Ÿã€Mixin å¤ç”¨ã€åŠ¨ç”»ä¼˜åŒ–</li>
<li><strong>éŸ³æ•ˆæŠ€æœ¯</strong>ï¼šç¨‹åºåŒ–åˆæˆã€éŸ³é¢‘æ± ä¼˜åŒ–</li>
<li><strong>è¯­éŸ³æœåŠ¡</strong>ï¼šå¾®è½¯ TTS é›†æˆã€æµå¼éŸ³é¢‘å¤„ç†</li>
<li><strong>æ¶æ„è®¾è®¡</strong>ï¼šComposables æ¨¡å¼ã€ç»„ä»¶åŒ–å¼€å‘</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šå†…å­˜ç®¡ç†ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–</li>
</ol>
<p>é¡¹ç›®ä¸ä»…å®ç°äº†å®Œæ•´çš„æ¸¸æˆåŠŸèƒ½ï¼Œæ›´åœ¨æŠ€æœ¯å®ç°ä¸Šä½“ç°äº†å·¥ç¨‹åŒ–æ€ç»´å’Œç”¨æˆ·ä½“éªŒçš„æ·±åº¦è€ƒè™‘ã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’Œä¼˜åŒ–ç­–ç•¥ï¼Œç¡®ä¿äº†åº”ç”¨åœ¨å„ç§è®¾å¤‡ä¸Šçš„æµç•…è¿è¡Œã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Windowå’ŒWindowManageræºç è§£æ]]></title>    <link>https://juejin.cn/post/7602259669706801178</link>    <guid>https://juejin.cn/post/7602259669706801178</guid>    <pubDate>2026-02-03T01:27:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602259669706801178" data-draft-id="7601077764424466482" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Windowå’ŒWindowManageræºç è§£æ"/> <meta itemprop="keywords" content="æºç "/> <meta itemprop="datePublished" content="2026-02-03T01:27:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Windowå’ŒWindowManageræºç è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:27:26.000Z" title="Tue Feb 03 2026 01:27:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»17åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æºç åŸºäº Android 11.0</p>
<h2 data-id="heading-0">ä¸€ã€Window å’Œ WindowManager</h2>
<p>Window æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå…¶å”¯ä¸€å…·ä½“å®ç°æ˜¯ PhoneWindowã€‚Android ä¸­çš„æ‰€æœ‰è§†å›¾éƒ½æ˜¯é€šè¿‡ Window æ¥å‘ˆç°çš„ï¼Œä¸ç®¡æ˜¯ Actvityã€Dialog è¿˜æ˜¯ Toastï¼Œå®ƒä»¬çš„è§†å›¾å®é™…éƒ½æ˜¯é™„åŠ åœ¨ Window ä¸Šçš„ï¼Œå› æ­¤ <strong>Window æ˜¯ View çš„ç›´æ¥ç®¡ç†è€…</strong> ã€‚å½“æˆ‘ä»¬è°ƒç”¨ Activity çš„ setContentView() æ–¹æ³•æ—¶ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ Window çš„ setContentView() ï¼Œå½“æˆ‘ä»¬è°ƒç”¨ Activity çš„ findViewById() æ—¶ï¼Œå…¶å®æœ€ç»ˆè°ƒç”¨çš„æ˜¯ Window çš„ findViewById() ã€‚</p>
<p>WindowManager æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä»åç§°å°±å¯ä»¥çœ‹å‡ºæ¥ï¼Œå®ƒæ˜¯ç”¨æ¥ç®¡ç†çª—å£çš„ï¼Œå®ƒç»§æ‰¿è‡ª ViewManager æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">WindowManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewManager</span> {

}
</code></pre>
<p>ViewManager æ¥å£ä¸­åªæœ‰ 3 ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«ç”¨æ¥æ·»åŠ ã€æ›´æ–°å’Œåˆ é™¤ View ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ViewManager</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addView</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateViewLayout</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params)</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeView</span><span class="hljs-params">(View view)</span>;
}
</code></pre>
<p>WindowManager ç»§æ‰¿è‡ª ViewManagerï¼Œä¹Ÿå°±æ‹¥æœ‰äº†è¿™ 3 ä¸ªåŠŸèƒ½ã€‚</p>
<p>ä½¿ç”¨ WindowManager çš„ addView() æ–¹æ³•å³å¯æ·»åŠ ä¸€ä¸ª Windowï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OVERLAY_PERMISSION_REQ_CODE</span> <span class="hljs-operator">=</span> <span class="hljs-number">12</span>;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">openWindow</span><span class="hljs-params">(View view)</span> {
        <span class="hljs-keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {
            <span class="hljs-keyword">if</span> (!Settings.canDrawOverlays(<span class="hljs-built_in">this</span>)) {
                <span class="hljs-comment">// å¼€å¯æƒé™</span>
                <span class="hljs-type">Intent</span> <span class="hljs-variable">intent</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Intent</span>(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(<span class="hljs-string">"package:"</span> + MainActivity.<span class="hljs-built_in">this</span>.getPackageName()));
                startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE);
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-comment">// å·²ç»å¼€å¯äº†æƒé™</span>
                addWindow();
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// 6.0 ä»¥ä¸‹ç›´æ¥åœ¨ Manifest ä¸­ç”³è¯·æƒé™å°±è¡Œäº†ã€‚</span>
            addWindow();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addWindow</span><span class="hljs-params">()</span> {
        WindowManager.<span class="hljs-type">LayoutParams</span> <span class="hljs-variable">layoutParams</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowManager</span>.LayoutParams();
        layoutParams.type = WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY;
        layoutParams.format = PixelFormat.TRANSLUCENT;
        layoutParams.flags = WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;
        layoutParams.gravity = Gravity.LEFT | Gravity.TOP;
        layoutParams.width = WindowManager.LayoutParams.WRAP_CONTENT;
        layoutParams.height = WindowManager.LayoutParams.WRAP_CONTENT;
        layoutParams.x = <span class="hljs-number">100</span>;
        layoutParams.y = <span class="hljs-number">300</span>;

        <span class="hljs-type">Button</span> <span class="hljs-variable">button</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Button</span>(<span class="hljs-built_in">this</span>);
        button.setText(<span class="hljs-string">"button"</span>);

        <span class="hljs-type">WindowManager</span> <span class="hljs-variable">windowManager</span> <span class="hljs-operator">=</span> <span class="hljs-built_in">this</span>.getWindowManager();
        <span class="hljs-comment">// è°ƒç”¨ addView() æ–¹æ³•æ·»åŠ  Window</span>
        windowManager.addView(button, layoutParams);
    }
}
</code></pre>
<p>è¿™é‡Œæ·»åŠ çš„æ˜¯ç³»ç»Ÿç±»å‹çš„ Window ï¼Œéœ€è¦åœ¨ Manifest æ–‡ä»¶ä¸­æ·»åŠ æƒé™ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.SYSTEM_ALERT_WINDOW"</span>/&gt;</span>
</code></pre>
<p>ä¸Šè¿°ä»£ç å°†ä¸€ä¸ª Button æ·»åŠ åˆ°äº†å±å¹•ä¸Šåæ ‡ä¸ºï¼ˆ100ï¼Œ300ï¼‰çš„ä½ç½®ä¸Šï¼Œå…¶ä¸­ WindowManager.LayoutParams çš„ flags å’Œ type è¿™ä¸¤ä¸ªå‚æ•°æ¯”è¾ƒé‡è¦ã€‚</p>
<p><strong>Flags å‚æ•°</strong>å¯ä»¥æ§åˆ¶ Window çš„æ˜¾ç¤ºç‰¹æ€§ï¼Œæœ‰ä¸‹é¢å‡ ä¸ªæ¯”è¾ƒå¸¸ç”¨ï¼š</p>
<ol>
<li><strong>FLAG_NOT_FOCUSABLE</strong>ï¼Œè¡¨ç¤ºè¯¥ Window ä¸éœ€è¦è·å–ç„¦ç‚¹ï¼Œä¹Ÿä¸éœ€è¦æ¥æ”¶è¾“å…¥äº‹ä»¶ï¼Œæ­¤æ ‡è®°ä¼šåŒæ—¶å¯ç”¨ FLAG_NOT_TOUCH_MODALï¼Œæœ€ç»ˆäº‹ä»¶ä¼šç›´æ¥ä¼ é€’ç»™ä¸‹å±‚çš„å…·æœ‰ç„¦ç‚¹çš„ Window ã€‚</li>
<li><strong>FLAG NOT_TOUCH_MODAL</strong>ï¼Œè¡¨ç¤ºç³»ç»Ÿä¼šå°†å½“å‰ Window åŒºåŸŸä»¥å¤–çš„å•å‡»äº‹ä»¶ä¼ é€’ç»™åº•å±‚çš„ Window ï¼Œå½“å‰ Window åŒºåŸŸä»¥å†…çš„å•å‡»äº‹ä»¶åˆ™è‡ªå·±å¤„ç†ã€‚è¿™ä¸ªæ ‡è®°å¾ˆé‡è¦ï¼Œä¸€èˆ¬æ¥è¯´éƒ½éœ€è¦å¼€å¯æ­¤æ ‡è®°ï¼Œå¦åˆ™å…¶ä»– Window å°†æ— æ³•æ”¶åˆ°å•å‡»äº‹ä»¶ã€‚</li>
<li><strong>FLAG_SHOW_WHEN_LOCKED</strong>ï¼Œå¼€å¯æ­¤æ¨¡å¼å¯ä»¥è®© Window æ˜¾ç¤ºåœ¨é”å±çš„ç•Œé¢ä¸Šã€‚</li>
</ol>
<p><strong>Type å‚æ•°</strong>è¡¨ç¤º Window çš„ç±»å‹ï¼Œæœ‰ä¸‰ç§ï¼Œåˆ†åˆ«æ˜¯<strong>åº”ç”¨ Window ã€å­ Window å’Œç³»ç»Ÿ Window</strong> ã€‚åº”ç”¨ç±» Window å¯¹åº”ç€ä¸€ä¸ª Activity ã€‚å­ Window ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒéœ€è¦é™„å±åœ¨ç‰¹å®šçš„çˆ¶ Window ä¹‹ä¸­ï¼Œæ¯”å¦‚å¸¸è§çš„ä¸€äº› Dialog å°±æ˜¯å­ Window ã€‚ç³»ç»Ÿ Window æ˜¯éœ€è¦å£°æ˜æƒé™æ‰èƒ½åˆ›å»ºçš„ Window ï¼Œæ¯”å¦‚ Toastï¼ˆåœ¨ API 26+ ä¸Šä¸éœ€è¦æƒé™ï¼Œä½†æœ‰é™åˆ¶ï¼šä¸èƒ½è·å–ç„¦ç‚¹ã€ä¸èƒ½è§¦æ‘¸ï¼‰å’Œç³»ç»ŸçŠ¶æ€æ è¿™äº›éƒ½æ˜¯ç³»ç»Ÿ Window ã€‚</p>
<p>Window æ˜¯åˆ†å±‚çš„ï¼Œæ¯ä¸ª Widow éƒ½æœ‰å¯¹åº”çš„ z-ordered ï¼Œå±‚çº§å¤§çš„ä¼šè¦†ç›–åœ¨å±‚çº§å°çš„ Window çš„ä¸Šé¢ã€‚åœ¨ä¸‰ç±» Window ä¸­ï¼Œåº”ç”¨ Window çš„å±‚çº§èŒƒå›´æ˜¯ 1â€”99 ï¼Œå­ Window çš„å±‚çº§èŒƒå›´æ˜¯ 1000â€”1999 ï¼Œç³»ç»Ÿ Window çš„å±‚çº§èŒƒå›´æ˜¯ 2000â€”2999 ï¼Œè¿™äº›å±‚çº§èŒƒå›´å¯¹åº”ç€ WindowManager.LayoutParams çš„ type å‚æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">WindowManager</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewManager</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LayoutParams</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewGroup</span>.LayoutParams <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Parcelable</span> {
        <span class="hljs-meta">@WindowType</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> type;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FIRST_APPLICATION_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TYPE_BASE_APPLICATION</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TYPE_APPLICATION</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">TYPE_APPLICATION_STARTING</span> <span class="hljs-operator">=</span> <span class="hljs-number">3</span>;
        ...
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">LAST_APPLICATION_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">99</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FIRST_SUB_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">1000</span>;
        ...
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">LAST_SUB_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">1999</span>;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">FIRST_SYSTEM_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">2000</span>;
        ...
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">LAST_SYSTEM_WINDOW</span> <span class="hljs-operator">=</span> <span class="hljs-number">2999</span>;
    }
}
</code></pre>
<p>å¦‚æœæƒ³è¦ Window ä½äºæ‰€æœ‰ Window çš„æœ€é¡¶å±‚ï¼Œé‚£ä¹ˆé‡‡ç”¨è¾ƒå¤§çš„å±‚çº§å³å¯ã€‚å¾ˆæ˜¾ç„¶ç³»ç»Ÿ Window çš„å±‚çº§æ˜¯æœ€å¤§çš„ï¼Œè€Œä¸”ç³»ç»Ÿå±‚çº§æœ‰å¾ˆå¤šå€¼ï¼Œä¸€èˆ¬æˆ‘ä»¬å¯ä»¥é€‰ç”¨ TYPE_SYSTEM_OVERLAY æˆ–è€… TYPE_SYSTEM_ERROR ã€‚</p>
<h2 data-id="heading-1">äºŒã€Window çš„å†…éƒ¨æœºåˆ¶</h2>
<p>Window æ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œæ¯ä¸€ä¸ª Window éƒ½å¯¹åº”ç€ä¸€ä¸ª View å’Œä¸€ä¸ª ViewRootImplï¼ŒWindow å’Œ View é€šè¿‡ ViewRootImpl æ¥å»ºç«‹è”ç³»ï¼Œå› æ­¤ Window å¹¶ä¸æ˜¯å®é™…å­˜åœ¨çš„ï¼Œå®ƒæ˜¯ä»¥ View çš„å½¢å¼å­˜åœ¨çš„ã€‚è¿™ç‚¹ä» WindowManager çš„å®šä¹‰ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå®ƒæä¾›çš„ä¸‰ä¸ªæ¥å£æ–¹æ³• addView()ã€updateViewLayout() ä»¥åŠ removeView() éƒ½æ˜¯é’ˆå¯¹ View çš„ï¼Œè¿™è¯´æ˜ View æ‰æ˜¯ Window å­˜åœ¨çš„å®ä½“ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­æ— æ³•ç›´æ¥è®¿é—® Windowï¼Œå¯¹ Window çš„è®¿é—®å¿…é¡»é€šè¿‡ WindowManagerã€‚ä¸ºäº†åˆ†æ Window çš„å†…éƒ¨æœºåˆ¶ï¼Œè¿™é‡Œä» Window çš„æ·»åŠ ã€åˆ é™¤ä»¥åŠæ›´æ–°è¯´èµ·ã€‚</p>
<h3 data-id="heading-2">2.1 Window çš„æ·»åŠ </h3>
<p>Window çš„æ·»åŠ è¿‡ç¨‹éœ€è¦é€šè¿‡ WindowManager çš„ addView() æ–¹æ³•æ¥å®ç°ï¼ŒWindowManager æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®ƒçš„çœŸæ­£å®ç°æ˜¯ WindowManagerImpl ç±»ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">WindowManager</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">WindowManagerGlobal</span> <span class="hljs-variable">mGlobal</span> <span class="hljs-operator">=</span> WindowManagerGlobal.getInstance();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addView</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> View view, <span class="hljs-meta">@NonNull</span> ViewGroup.LayoutParams params)</span> {
        ...
        mGlobal.addView(view, params, mContext.getDisplayNoVerify(), mParentWindow, mContext.getUserId());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateViewLayout</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> View view, <span class="hljs-meta">@NonNull</span> ViewGroup.LayoutParams params)</span> {
        ...
        mGlobal.updateViewLayout(view, params);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeView</span><span class="hljs-params">(View view)</span> {
        mGlobal.removeView(view, <span class="hljs-literal">false</span>);
    } 
} 
</code></pre>
<p>å¯ä»¥å‘ç°ï¼ŒWindowManagerImpl å¹¶æ²¡æœ‰ç›´æ¥å®ç° Window çš„è¿™ä¸‰å¤§æ“ä½œï¼Œè€Œæ˜¯å…¨éƒ¨äº¤ç»™äº† WindowManagerGlobal æ¥å¤„ç†ï¼ŒWindowManagerGlobal ä»¥å•ä¾‹çš„å½¢å¼å‘å¤–æä¾›è‡ªå·±çš„å®ä¾‹ï¼ŒWindowManagerImpl è¿™ç§å·¥ä½œæ¨¡å¼æ˜¯å…¸å‹çš„æ¡¥æ¥æ¨¡å¼ã€‚</p>
<p>WindowManagerGlobal çš„ addView() æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">WindowManagerGlobal</span> {
    <span class="hljs-comment">// å­˜å‚¨çš„æ˜¯æ‰€æœ‰ Window æ‰€å¯¹åº”çš„æ ¹ View</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;View&gt; mViews = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;View&gt;();
    <span class="hljs-comment">// å­˜å‚¨çš„æ˜¯æ‰€æœ‰ Window æ‰€å¯¹åº”çš„ ViewRootImpl</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;ViewRootImpl&gt; mRoots = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;ViewRootImpl&gt;();
    <span class="hljs-comment">// å­˜å‚¨çš„æ˜¯æ‰€æœ‰ Window æ‰€å¯¹åº”çš„å¸ƒå±€å‚æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArrayList&lt;WindowManager.LayoutParams&gt; mParams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;WindowManager.LayoutParams&gt;();
    <span class="hljs-comment">// å­˜å‚¨çš„æ˜¯é‚£äº›æ­£åœ¨è¢«åˆ é™¤çš„ View å¯¹è±¡ï¼Œæˆ–è€…è¯´æ˜¯é‚£äº›å·²ç»è°ƒç”¨ remoView() æ–¹æ³•</span>
    <span class="hljs-comment">// ä½†æ˜¯åˆ é™¤æ“ä½œè¿˜æœªå®Œæˆçš„ Window å¯¹è±¡</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ArraySet&lt;View&gt; mDyingViews = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArraySet</span>&lt;View&gt;();

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> WindowManagerGlobal sDefaultWindowManager;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> WindowManagerGlobal <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">synchronized</span> (WindowManagerGlobal.class) {
            <span class="hljs-keyword">if</span> (sDefaultWindowManager == <span class="hljs-literal">null</span>) {
                sDefaultWindowManager = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WindowManagerGlobal</span>();
            }
            <span class="hljs-keyword">return</span> sDefaultWindowManager;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addView</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params,
                        Display display, Window parentWindow, <span class="hljs-type">int</span> userId)</span> {
        <span class="hljs-comment">// æ£€æŸ¥å‚æ•°çš„åˆæ³•æ€§</span>
        <span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"view must not be null"</span>);
        }
        <span class="hljs-keyword">if</span> (display == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"display must not be null"</span>);
        }
        <span class="hljs-keyword">if</span> (!(params <span class="hljs-keyword">instanceof</span> WindowManager.LayoutParams)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Params must be WindowManager.LayoutParams"</span>);
        }
        ...
        <span class="hljs-comment">// å¦‚æœæ˜¯å­ Window è¿˜éœ€è¦è°ƒæ•´å¸ƒå±€å‚æ•°</span>
        <span class="hljs-keyword">final</span> WindowManager.<span class="hljs-type">LayoutParams</span> <span class="hljs-variable">wparams</span> <span class="hljs-operator">=</span> (WindowManager.LayoutParams) params;
        <span class="hljs-keyword">if</span> (parentWindow != <span class="hljs-literal">null</span>) {
            parentWindow.adjustLayoutParamsForSubWindow(wparams);
        }

        ViewRootImpl root;
        ...
        <span class="hljs-comment">// åˆ›å»º ViewRootImpl å®ä¾‹</span>
        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ViewRootImpl</span>(view.getContext(), display);

        view.setLayoutParams(wparams);

        mViews.add(view);
        mRoots.add(root);
        mParams.add(wparams);

        <span class="hljs-comment">// do this last because it fires off messages to start doing things</span>
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ›´æ–°ç•Œé¢å¹¶å®Œæˆ Window çš„æ·»åŠ </span>
            root.setView(view, wparams, panelParentView, userId);
        } <span class="hljs-keyword">catch</span> (RuntimeException e) {
            <span class="hljs-comment">// BadTokenException or InvalidDisplayException, clean up.</span>
            <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {
                removeViewLocked(index, <span class="hljs-literal">true</span>);
            }
            <span class="hljs-keyword">throw</span> e;
        }
    }
}
</code></pre>
<p>addView() æ–¹æ³•é‡Œé¢ä¸»è¦åšäº†è¿™äº›äº‹æƒ…ï¼š</p>
<ol>
<li>æ£€æŸ¥å‚æ•°æ˜¯å¦åˆæ³•ã€‚</li>
<li>åˆ›å»º ViewRootImpl å¹¶å°† View æ·»åŠ åˆ°åˆ—è¡¨ä¸­ã€‚</li>
<li>é€šè¿‡ ViewRootImpl æ¥æ›´æ–°ç•Œé¢å¹¶å®Œæˆ Window çš„æ·»åŠ ã€‚</li>
</ol>
<p>ViewRootImpl çš„ setView() æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewRootImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ViewParent</span>,
        View.AttachInfo.Callbacks, ThreadedRenderer.DrawCallbacks {
        
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViewRootImpl</span><span class="hljs-params">(Context context, Display display)</span> {
        <span class="hljs-built_in">this</span>(context, display, WindowManagerGlobal.getWindowSession(),
                <span class="hljs-literal">false</span> <span class="hljs-comment">/* useSfChoreographer */</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViewRootImpl</span><span class="hljs-params">(Context context, Display display, IWindowSession session)</span> {
        <span class="hljs-built_in">this</span>(context, display, session, <span class="hljs-literal">false</span> <span class="hljs-comment">/* useSfChoreographer */</span>);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ViewRootImpl</span><span class="hljs-params">(Context context, Display display, IWindowSession session,
            <span class="hljs-type">boolean</span> useSfChoreographer)</span> {
        mContext = context;
        mWindowSession = session;   
        ...
    }    

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setView</span><span class="hljs-params">(View view, WindowManager.LayoutParams attrs, View panelParentView,
                        <span class="hljs-type">int</span> userId)</span> {
        ...
        res = mWindowSession.addToDisplayAsUser(mWindow, mSeq, mWindowAttributes,
                getHostVisibility(), mDisplay.getDisplayId(), userId, mTmpFrame,
                mAttachInfo.mContentInsets, mAttachInfo.mStableInsets,
                mAttachInfo.mDisplayCutout, inputChannel,
                mTempInsets, mTempControls);
        setFrame(mTmpFrame);
        ...
    }
}
</code></pre>
<p>Window çš„æ·»åŠ æ˜¯é€šè¿‡ mWindowSession çš„ addToDisplayAsUser() æ–¹æ³•æ¥å®Œæˆçš„ï¼ŒmWindowSession çš„ç±»å‹æ˜¯ IWindowSession ï¼Œå®ƒæ˜¯ä¸€ä¸ª Binder å¯¹è±¡ï¼ŒçœŸæ­£çš„å®ç°ç±»æ˜¯ Sessionï¼Œä¹Ÿå°±æ˜¯ Window çš„æ·»åŠ è¿‡ç¨‹æ˜¯ä¸€æ¬¡ IPC è°ƒç”¨ï¼Œåœ¨ Session å†…éƒ¨ä¼šé€šè¿‡ WindowManagerService æ¥æ·»åŠ  Window ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Session</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">IWindowSession</span>.Stub <span class="hljs-keyword">implements</span> <span class="hljs-title class_">IBinder</span>.DeathRecipient {

    <span class="hljs-keyword">final</span> WindowManagerService mService;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Session</span><span class="hljs-params">(WindowManagerService service, IWindowSessionCallback callback)</span> {
        mService = service;
        mCallback = callback;
        ...
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">addToDisplayAsUser</span><span class="hljs-params">(IWindow window, <span class="hljs-type">int</span> seq, WindowManager.LayoutParams attrs,
                                  <span class="hljs-type">int</span> viewVisibility, <span class="hljs-type">int</span> displayId, <span class="hljs-type">int</span> userId, Rect outFrame,
                                  Rect outContentInsets, Rect outStableInsets,
                                  DisplayCutout.ParcelableWrapper outDisplayCutout, InputChannel outInputChannel,
                                  InsetsState outInsetsState, InsetsSourceControl[] outActiveControls)</span> {
        <span class="hljs-comment">// è°ƒç”¨ WindowManagerService çš„ addWindow() æ–¹æ³•</span>
        <span class="hljs-keyword">return</span> mService.addWindow(<span class="hljs-built_in">this</span>, window, seq, attrs, viewVisibility, displayId, outFrame,
                outContentInsets, outStableInsets, outDisplayCutout, outInputChannel,
                outInsetsState, outActiveControls, userId);
    }
}
</code></pre>
<p>å¦‚æ­¤ä¸€æ¥ï¼ŒWindow çš„æ·»åŠ è¯·æ±‚å°±äº¤ç»™äº† WMS å»å¤„ç†äº†ï¼Œåœ¨ WMS å†…éƒ¨ä¼šä¸ºæ¯ä¸€ä¸ªåº”ç”¨ä¿ç•™ä¸€ä¸ªå•ç‹¬çš„ Sessionã€‚</p>
<h3 data-id="heading-3">2.2 Window çš„åˆ é™¤è¿‡ç¨‹</h3>
<p>Window çš„åˆ é™¤è¿‡ç¨‹å’Œæ·»åŠ è¿‡ç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯å…ˆé€šè¿‡ WindowManagerImpl åï¼Œå†è¿›ä¸€æ­¥é€šè¿‡ WindowManagerGlobal æ¥å®ç°çš„ã€‚ä¸‹é¢æ˜¯ WindowManagerGlobal çš„ removeView() çš„å®ç°:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeView</span><span class="hljs-params">(View view, <span class="hljs-type">boolean</span> immediate)</span> {
    <span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"view must not be null"</span>);
    }

    <span class="hljs-keyword">synchronized</span> (mLock) {
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> findViewLocked(view, <span class="hljs-literal">true</span>);
        <span class="hljs-type">View</span> <span class="hljs-variable">curView</span> <span class="hljs-operator">=</span> mRoots.get(index).getView();
        removeViewLocked(index, immediate);
        <span class="hljs-keyword">if</span> (curView == view) {
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">"Calling with view "</span> + view
                + <span class="hljs-string">" but the ViewAncestor is attached to "</span> + curView);
    }
}
</code></pre>
<p>é‡Œé¢é¦–å…ˆé€šè¿‡ findViewLocked() æ¥æŸ¥æ‰¾å¾…åˆ é™¤çš„ View çš„ç´¢å¼•ï¼Œå°±æ˜¯å»ä¸Šé¢çš„ mView ä¸­æŸ¥æ‰¾è¦åˆ é™¤çš„ View ï¼Œç„¶åå†è°ƒç”¨ removeViewLocked() æ–¹æ³•:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeViewLocked</span><span class="hljs-params">(<span class="hljs-type">int</span> index, <span class="hljs-type">boolean</span> immediate)</span> {
    <span class="hljs-comment">// æ‰¾åˆ°å¯¹åº”çš„ ViewRootImpl</span>
    <span class="hljs-type">ViewRootImpl</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> mRoots.get(index);
    <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> root.getView();

    <span class="hljs-keyword">if</span> (root != <span class="hljs-literal">null</span>) {
        root.getImeFocusController().onWindowDismissed();
    }
    <span class="hljs-comment">// è°ƒç”¨ ViewRootImpl çš„ die() æ–¹æ³•æ¥åˆ é™¤</span>
    <span class="hljs-type">boolean</span> <span class="hljs-variable">deferred</span> <span class="hljs-operator">=</span> root.die(immediate);
    <span class="hljs-keyword">if</span> (view != <span class="hljs-literal">null</span>) {
        view.assignParent(<span class="hljs-literal">null</span>);
        <span class="hljs-keyword">if</span> (deferred) {
            mDyingViews.add(view);
        }
    }
}
</code></pre>
<p>å‚æ•° immediate ä¸º false æ—¶è¡¨ç¤ºå¼‚æ­¥åˆ é™¤ï¼Œ immediate ä¸º true æ—¶è¡¨ç¤ºåŒæ­¥åˆ é™¤ã€‚ä¸€èˆ¬æ¥è¯´ä¸ä¼šä½¿ç”¨åŒæ­¥åˆ é™¤ï¼Œä»¥å…å‘ç”Ÿæ„å¤–ã€‚å…·ä½“çš„åˆ é™¤æ“ä½œç”± ViewRootImpl çš„ die() æ–¹æ³•æ¥å®Œæˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">boolean</span> <span class="hljs-title function_">die</span><span class="hljs-params">(<span class="hljs-type">boolean</span> immediate)</span> {
    <span class="hljs-comment">// Make sure we do execute immediately if we are in the middle of a traversal or the damage</span>
    <span class="hljs-comment">// done by dispatchDetachedFromWindow will cause havoc on return.</span>
    <span class="hljs-keyword">if</span> (immediate &amp;&amp; !mIsInTraversal) {
        doDie();
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">if</span> (!mIsDrawing) {
        destroyHardwareRenderer();
    } <span class="hljs-keyword">else</span> {
        Log.e(mTag, <span class="hljs-string">"Attempting to destroy the window while drawing!\n"</span> +
                <span class="hljs-string">" window="</span> + <span class="hljs-built_in">this</span> + <span class="hljs-string">", title="</span> + mWindowAttributes.getTitle());
    }
    mHandler.sendEmptyMessage(MSG_DIE);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
}
</code></pre>
<p>die() æ–¹æ³•å†…éƒ¨åˆ¤æ–­å¦‚æœæ˜¯åŒæ­¥åˆ é™¤ï¼ˆç«‹å³åˆ é™¤ï¼‰ï¼Œç›´æ¥è°ƒç”¨ doDie()ï¼Œå†…éƒ¨è°ƒç”¨dispatchDetachedFromWindow() æ–¹æ³•ï¼ŒçœŸæ­£åˆ é™¤ View çš„é€»è¾‘å°±åœ¨dispatchDetachedFromWindow() æ–¹æ³•ä¸­ã€‚å¦‚æœæ˜¯å¼‚æ­¥åˆ é™¤ï¼Œé‚£ä¹ˆå°±å‘é€ä¸€ä¸ª MSG_DIE çš„æ¶ˆæ¯ï¼ŒViewRootImpl ä¸­çš„ Hander ä¼šå¤„ç†æ­¤æ¶ˆæ¯å¹¶è°ƒç”¨ doDie() æ–¹æ³•ã€‚dispatchDetachedFromWindow() æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">dispatchDetachedFromWindow</span><span class="hljs-params">()</span> {
    mInsetsController.onWindowFocusLost();
    mFirstInputStage.onDetachedFromWindow();
    <span class="hljs-keyword">if</span> (mView != <span class="hljs-literal">null</span> &amp;&amp; mView.mAttachInfo != <span class="hljs-literal">null</span>) {
        mAttachInfo.mTreeObserver.dispatchOnWindowAttachedChange(<span class="hljs-literal">false</span>);
        <span class="hljs-comment">// å›è°ƒ View çš„ dispatchDetachedFromWindow() æ–¹æ³•</span>
        mView.dispatchDetachedFromWindow();
    }

    <span class="hljs-comment">// ç§»é™¤å„ç§å›è°ƒ</span>
    mAccessibilityInteractionConnectionManager.ensureNoConnection();
    mAccessibilityManager.removeAccessibilityStateChangeListener(
            mAccessibilityInteractionConnectionManager);
    mAccessibilityManager.removeHighTextContrastStateChangeListener(
            mHighContrastTextManager);
    removeSendWindowContentChangedCallback();

    destroyHardwareRenderer();

    setAccessibilityFocus(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);

    mInsetsController.cancelExistingAnimations();

    <span class="hljs-comment">// æ¸…é™¤æ•°æ®</span>
    mView.assignParent(<span class="hljs-literal">null</span>);
    mView = <span class="hljs-literal">null</span>;
    mAttachInfo.mRootView = <span class="hljs-literal">null</span>;

    destroySurface();

    <span class="hljs-keyword">if</span> (mInputQueueCallback != <span class="hljs-literal">null</span> &amp;&amp; mInputQueue != <span class="hljs-literal">null</span>) {
        mInputQueueCallback.onInputQueueDestroyed(mInputQueue);
        mInputQueue.dispose();
        mInputQueueCallback = <span class="hljs-literal">null</span>;
        mInputQueue = <span class="hljs-literal">null</span>;
    }
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// åˆ é™¤ Window</span>
        mWindowSession.remove(mWindow);
    } <span class="hljs-keyword">catch</span> (RemoteException e) {
    }
    <span class="hljs-comment">// Dispose receiver would dispose client InputChannel, too. That could send out a socket</span>
    <span class="hljs-comment">// broken event, so we need to unregister the server InputChannel when removing window to</span>
    <span class="hljs-comment">// prevent server side receive the event and prompt error.</span>
    <span class="hljs-keyword">if</span> (mInputEventReceiver != <span class="hljs-literal">null</span>) {
        mInputEventReceiver.dispose();
        mInputEventReceiver = <span class="hljs-literal">null</span>;
    }

    mDisplayManager.unregisterDisplayListener(mDisplayListener);

    unscheduleTraversals();
}
</code></pre>
<p>dispatchDetachedFromWindow() æ–¹æ³•ä¸»è¦åšäº†è¿™äº›äº‹æƒ…:</p>
<ol>
<li>è°ƒç”¨ View çš„ dispatchDetachedFromWindow() æ–¹æ³•ï¼Œåœ¨å†…éƒ¨ä¼šè°ƒç”¨ View çš„onDetachedFromWindow() ä»¥åŠ onDetachedFromWindowInternal()ã€‚å¯¹äºonDetachedFromWindow() å¤§å®¶ä¸€å®šä¸é™Œç”Ÿï¼Œå½“ View ä» Window ä¸­ç§»é™¤æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•å†…éƒ¨åšä¸€äº›èµ„æºå›æ”¶çš„å·¥ä½œï¼Œæ¯”å¦‚ç»ˆæ­¢åŠ¨ç”»ã€åœæ­¢çº¿ç¨‹ç­‰ã€‚</li>
<li>åƒåœ¾å›æ”¶ç›¸å…³çš„å·¥ä½œï¼Œæ¯”å¦‚æ¸…é™¤æ•°æ®å’Œæ¶ˆæ¯ã€ç§»é™¤å›è°ƒã€‚</li>
<li>é€šè¿‡ Session çš„ remove() æ–¹æ³•åˆ é™¤ Windowâ€”â€”mWindowSession.remove(mWindow)ï¼Œè¿™åŒæ ·æ˜¯ä¸€ä¸ª IPC è¿‡ç¨‹ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ WMS çš„ removeWindow() æ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-4">2.3 Windowçš„æ›´æ–°è¿‡ç¨‹</h3>
<p>Window çš„æ›´æ–°è¿‡ç¨‹è¿˜æ˜¯è¦ä» WindowManagerGlobal å¼€å§‹åˆ†æï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateViewLayout</span><span class="hljs-params">(View view, ViewGroup.LayoutParams params)</span> {
    <span class="hljs-keyword">if</span> (view == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"view must not be null"</span>);
    }
    <span class="hljs-keyword">if</span> (!(params <span class="hljs-keyword">instanceof</span> WindowManager.LayoutParams)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalArgumentException</span>(<span class="hljs-string">"Params must be WindowManager.LayoutParams"</span>);
    }

    <span class="hljs-keyword">final</span> WindowManager.<span class="hljs-type">LayoutParams</span> <span class="hljs-variable">wparams</span> <span class="hljs-operator">=</span> (WindowManager.LayoutParams)params;

    view.setLayoutParams(wparams);

    <span class="hljs-keyword">synchronized</span> (mLock) {
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> findViewLocked(view, <span class="hljs-literal">true</span>);
        <span class="hljs-type">ViewRootImpl</span> <span class="hljs-variable">root</span> <span class="hljs-operator">=</span> mRoots.get(index);
        mParams.remove(index);
        mParams.add(index, wparams);
        root.setLayoutParams(wparams, <span class="hljs-literal">false</span>);
    }
}
</code></pre>
<p>updateViewLayout() æ–¹æ³•åšçš„äº‹æƒ…å°±æ¯”è¾ƒç®€å•äº†ï¼Œé¦–å…ˆå®ƒéœ€è¦æ›´æ–° View çš„ LayoutParamsï¼Œæ¥ç€å†æ›´æ–° ViewRootImpl ä¸­çš„ LayoutParamsï¼Œè¿™ä¸€æ­¥æ˜¯é€šè¿‡ ViewRootImpl çš„ setLayoutParams() æ–¹æ³•æ¥å®ç°çš„ï¼Œé‡Œé¢ä¼šè°ƒç”¨ scheduleTraversals() æ–¹æ³•æ¥å¯¹ View é‡æ–°å¸ƒå±€ï¼ŒåŒ…æ‹¬æµ‹é‡ã€å¸ƒå±€ã€é‡ç»˜è¿™ä¸‰ä¸ªè¿‡ç¨‹ã€‚é™¤äº† View æœ¬èº«çš„é‡ç»˜ä»¥å¤–ï¼ŒViewRootImpl è¿˜ä¼šé€šè¿‡ WindowSession æ¥æ›´æ–° Window çš„è§†å›¾ï¼Œè¿™ä¸ªè¿‡ç¨‹æœ€ç»ˆæ˜¯ç”± WMS çš„ relayoutWindow() æ¥å…·ä½“å®ç°çš„ï¼Œå®ƒåŒæ ·æ˜¯ä¸€ä¸ª IPC è¿‡ç¨‹ã€‚</p>
<h2 data-id="heading-5">ä¸‰ã€Window çš„åˆ›å»ºè¿‡ç¨‹</h2>
<p>é€šè¿‡ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼ŒView æ˜¯ Android ä¸­çš„è§†å›¾çš„å‘ˆç°æ–¹å¼ï¼Œä½†æ˜¯ View ä¸èƒ½å•ç‹¬å­˜åœ¨ï¼Œå®ƒå¿…é¡»é™„ç€åœ¨ Window è¿™ä¸ªæŠ½è±¡çš„æ¦‚å¿µä¸Šé¢ï¼Œå› æ­¤æœ‰è§†å›¾çš„åœ°æ–¹å°±æœ‰ Windowã€‚å“ªäº›åœ°æ–¹æœ‰è§†å›¾å‘¢ï¼ŸAndroid ä¸­å¯ä»¥æä¾›è§†å›¾çš„åœ°æ–¹æœ‰ Activityã€Dialogã€Toastï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›ä¾æ‰˜ Window è€Œå®ç°çš„è§†å›¾ï¼Œæ¯”å¦‚ PopUpWindowã€èœå•ï¼Œå®ƒä»¬ä¹Ÿæ˜¯è§†å›¾ï¼Œæœ‰è§†å›¾çš„åœ°æ–¹å°±æœ‰ Windowï¼Œå› æ­¤ Activityã€Dialogã€Toast ç­‰è§†å›¾éƒ½å¯¹åº”ç€ä¸€ä¸ª Windowã€‚</p>
<h3 data-id="heading-6">3.1 Activity çš„ Window çš„åˆ›å»ºè¿‡ç¨‹</h3>
<p>åœ¨ Activity çš„å¯åŠ¨æµç¨‹ä¸­ï¼Œä¼šè°ƒç”¨ ActivityThread çš„ performLaunchActivity() æ¥å®Œæˆæ•´ä¸ªå¯åŠ¨è¿‡ç¨‹ï¼Œé‡Œé¢ä¼šé€šè¿‡ç±»åŠ è½½å™¨åˆ›å»º Activity çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åè°ƒç”¨å…¶ attach() æ–¹æ³•å…³è”ä¸Šä¸‹æ–‡ç¯å¢ƒç­‰å‚æ•°ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ActivityThread</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ClientTransactionHandler</span> {

    <span class="hljs-keyword">private</span> Activity <span class="hljs-title function_">performLaunchActivity</span><span class="hljs-params">(ActivityClientRecord r, Intent customIntent)</span> {
        <span class="hljs-comment">// åˆ›å»º Activity å®ä¾‹</span>
        activity = mInstrumentation.newActivity(
                cl, component.getClassName(), r.intent);
        ...
        <span class="hljs-comment">// attach() æ–¹æ³•ä¸º Activity å…³è”ä¸Šä¸‹æ–‡ç¯å¢ƒ</span>
        activity.attach(appContext, <span class="hljs-built_in">this</span>, getInstrumentation(), r.token,
                r.ident, app, r.intent, r.activityInfo, title, r.parent,
                r.embeddedID, r.lastNonConfigurationInstances, config,
                r.referrer, r.voiceInteractor, window, r.configCallback,
                r.assistToken);

        <span class="hljs-keyword">return</span> activity;
    }
} 
</code></pre>
<p>ActivityThread çš„ attach() æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Activity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ContextThemeWrapper</span>

    <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(...)</span> {
        ...
        mWindow = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindow</span>(<span class="hljs-built_in">this</span>, window, activityConfigCallback);
        mWindow.setWindowControllerCallback(mWindowControllerCallback);
        mWindow.setCallback(<span class="hljs-built_in">this</span>);
        mWindow.setOnWindowDismissedCallback(<span class="hljs-built_in">this</span>);
        ...
    }
} 
</code></pre>
<p>åœ¨ attach() æ–¹æ³•ä¸­ï¼Œç³»ç»Ÿä¼šåˆ›å»º Activity æ‰€å±çš„ Window å¯¹è±¡å¹¶ä¸ºå…¶è®¾ç½®å›è°ƒæ¥å£ï¼Œå…¶ä¸­ Window çš„å…·ä½“å®ç°æ˜¯ PhoneWindowã€‚æˆ‘ä»¬ä½¿ç”¨ setContentView() æ–¹æ³•ï¼Œå®é™…è°ƒç”¨çš„æ˜¯ PhoneWindow çš„ setContentView() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•é‡Œé¢å¤§è‡´éµå¾ªå¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>å¦‚æœæ²¡æœ‰ DecorViewï¼Œé‚£ä¹ˆå°±åˆ›å»ºå®ƒã€‚</li>
<li>å°† View æ·»åŠ åˆ° mContentParent ä¸­ã€‚</li>
</ol>
<p>è¿™äº›æ­¥éª¤åœ¨ <a href="https://juejin.cn/post/7301648406198894618" target="_blank" title="https://juejin.cn/post/7301648406198894618">Android Viewçš„ç»˜åˆ¶æµç¨‹</a> ä¸­åŸºæœ¬éƒ½åˆ†æè¿‡äº†ï¼Œè™½ç„¶è¯´æ—©åœ¨ Activity çš„ attach()æ–¹æ³•ä¸­ Window å°±å·²ç»è¢«åˆ›å»ºäº†ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ç”±äº DecorView å¹¶æ²¡æœ‰è¢« WindowManager è¯†åˆ«ï¼Œæ‰€ä»¥è¿™ä¸ªæ—¶å€™çš„ Window æ— æ³•æä¾›å…·ä½“åŠŸèƒ½ï¼Œè¿˜æ— æ³•æ¥æ”¶å¤–ç•Œçš„è¾“å…¥ä¿¡æ¯ã€‚åœ¨ ActivityThread çš„ handleResumeActivity() æ–¹æ³•ä¸­ï¼Œé¦–å…ˆä¼šè°ƒç”¨ Activity çš„ onResume() æ–¹æ³•ï¼Œæ¥ç€ä¼šè°ƒç”¨ wm.addView(decor, l)ï¼Œæœ€åè°ƒç”¨ r.activity.makeVisible()ï¼Œè¿™æ—¶å€™ DecorView æ‰çœŸæ­£åœ°å®Œæˆäº†æ·»åŠ å’Œæ˜¾ç¤ºè¿™ä¸¤ä¸ªè¿‡ç¨‹ï¼Œåˆ°è¿™é‡Œ Activity çš„è§†å›¾æ‰èƒ½è¢«ç”¨æˆ·çœ‹åˆ°ã€‚</p>
<h3 data-id="heading-7">3.2 Dialog çš„ Window çš„åˆ›å»ºè¿‡ç¨‹</h3>
<p>Dialog çš„ Window çš„åˆ›å»ºè¿‡ç¨‹ä¸ Activity ç±»ä¼¼ï¼Œæœ‰å¦‚ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><strong>åˆ›å»º Window</strong>ã€‚Dialog çš„æ„é€ æ–¹æ³•ä¸­ä¼šæ–°å»ºä¸€ä¸ª PhoneWindowã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dialog</span> {

    Dialog(<span class="hljs-meta">@NonNull</span> Context context, <span class="hljs-meta">@StyleRes</span> <span class="hljs-type">int</span> themeResId, <span class="hljs-type">boolean</span> createContextThemeWrapper) {
        ...
        mWindowManager = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);

        <span class="hljs-keyword">final</span> <span class="hljs-type">Window</span> <span class="hljs-variable">w</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhoneWindow</span>(mContext);
        mWindow = w;
        w.setCallback(<span class="hljs-built_in">this</span>);
        w.setOnWindowDismissedCallback(<span class="hljs-built_in">this</span>);
        w.setOnWindowSwipeDismissedCallback(() -&gt; {
            <span class="hljs-keyword">if</span> (mCancelable) {
                cancel();
            }
        });
        w.setWindowManager(mWindowManager, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);
        w.setGravity(Gravity.CENTER);

        mListenersHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListenersHandler</span>(<span class="hljs-built_in">this</span>);
    }
}
</code></pre>
<ol start="2">
<li><strong>åˆå§‹åŒ– DecorView å¹¶å°† Dialog çš„è§†å›¾æ·»åŠ åˆ° DecorView ä¸­</strong>ã€‚è¿™ä¸ªè¿‡ç¨‹ä¹Ÿå’Œ Activity ç±»ä¼¼ï¼Œéƒ½æ˜¯é€šè¿‡ Window å»æ·»åŠ æŒ‡å®šçš„å¸ƒå±€æ–‡ä»¶ã€‚</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setContentView</span><span class="hljs-params">(<span class="hljs-meta">@LayoutRes</span> <span class="hljs-type">int</span> layoutResID)</span> {
    mWindow.setContentView(layoutResID);
}
</code></pre>
<ol start="3">
<li><strong>å°† DecorView æ·»åŠ åˆ° Window ä¸­å¹¶æ˜¾ç¤º</strong>ã€‚è¿™é‡Œä¼šè°ƒç”¨ Dialog çš„ show() æ–¹æ³•ï¼Œé€šè¿‡ WindowManager å°† DecorView æ·»åŠ åˆ° Window ä¸­ï¼Œå¦‚ä¸‹ï¼š</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
    ...
    mDecor = mWindow.getDecorView();
    ...
    mWindowManager.addView(mDecor, l);
    ...
    mShowing = <span class="hljs-literal">true</span>;
    ...
}
</code></pre>
<p>ä»ä¸Šé¢ 3 ä¸ªæ­¥éª¤å¯ä»¥å‘ç°ï¼ŒDialog çš„ Window åˆ›å»ºä¸ Activity å‡ ä¹æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å½“ Dialog è¢«å…³é—­æ—¶ï¼Œè°ƒç”¨çš„æ˜¯ mWindowManager.removeViewImmediate(mDecor) æ¥ç§»é™¤ DecorViewã€‚</p>
<p>æ™®é€š Dialog è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šä¹‹å¤„ï¼Œå°±æ˜¯å¿…é¡»é‡‡ç”¨ Activity çš„ Contextï¼Œå¦‚æœé‡‡ç”¨ Application çš„ Context å°±ä¼šæŠ¥é”™ã€‚</p>
<pre><code class="hljs language-java" lang="java">Dialog dialog=<span class="hljs-keyword">new</span> <span class="hljs-title class_">Dialog</span>(<span class="hljs-built_in">this</span>.getApplicationContext());
<span class="hljs-type">TextView</span> <span class="hljs-variable">textView</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextView</span>(<span class="hljs-built_in">this</span>);
textView.setText(<span class="hljs-string">"this is toast!"</span>);
dialog.setContentView(textView);
dialog.show();
</code></pre>
<p>æŠ¥é”™ä¿¡æ¯ä¸ºï¼š<strong>Caused by: android.view.WindowManager$BadTokenException: Unable to add window -- token null is not valid</strong></p>
<p>ä¸Šé¢çš„é”™è¯¯ä¿¡æ¯å¾ˆæ˜ç¡®ï¼Œæ˜¯æ²¡æœ‰ token å¯¼è‡´çš„ï¼Œè€Œåº”ç”¨ token ä¸€èˆ¬åªæœ‰ Activity æ‹¥æœ‰ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦ç”¨ Activity ä½œä¸º Context æ¥æ˜¾ç¤ºå¯¹è¯æ¡†å³å¯ã€‚å¦å¤–ï¼Œç³»ç»Ÿ Window æ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒå¯ä»¥ä¸éœ€è¦ tokenï¼Œå› æ­¤åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåªéœ€è¦æŒ‡å®šå¯¹è¯æ¡†çš„ Window ä¸ºç³»ç»Ÿç±»å‹å°±å¯ä»¥æ­£å¸¸å¼¹å‡ºå¯¹è¯æ¡†ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java">dialog.getWindow().setType(WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY)
</code></pre>
<p>å½“ç„¶è¿˜éœ€è¦æ·»åŠ ç›¸åº”çš„æƒé™ã€‚</p>
<h3 data-id="heading-8">3.3 Toast çš„ Window çš„åˆ›å»ºè¿‡ç¨‹</h3>
<p>Toast ä¸ Dialog ä¸åŒï¼Œå®ƒçš„å·¥ä½œè¿‡ç¨‹ç¨æ˜¾å¤æ‚ã€‚é¦–å…ˆ Toast ä¹Ÿæ˜¯åŸºäº Window æ¥å®ç°çš„ï¼Œä½†æ˜¯ç”±äº Toast å…·æœ‰å®šæ—¶å–æ¶ˆè¿™ä¸€åŠŸèƒ½ï¼Œæ‰€ä»¥ç³»ç»Ÿé‡‡ç”¨äº† Handlerã€‚åœ¨ Toast çš„å†…éƒ¨æœ‰ä¸¤ç±» IPC è¿‡ç¨‹ï¼Œç¬¬ä¸€ç±»æ˜¯ Toast è®¿é—® NotificationManagerServiceï¼ˆNMSï¼‰ï¼Œç¬¬äºŒç±»æ˜¯ NMS å›è°ƒ Toast é‡Œçš„ TN æ¥å£ã€‚</p>
<p>Toast å±äºç³»ç»Ÿ Windowï¼Œå®ƒå†…éƒ¨çš„è§†å›¾ç”±ä¸¤ç§æ–¹å¼æŒ‡å®šï¼Œä¸€ç§æ˜¯ç³»ç»Ÿé»˜è®¤çš„æ ·å¼ï¼Œå¦ä¸€ç§æ˜¯é€šè¿‡ setView() æ¥æŒ‡å®šä¸€ä¸ªè‡ªå®šä¹‰ Viewï¼Œä¸ç®¡å¦‚ä½•ï¼Œå®ƒä»¬éƒ½å¯¹åº” Toast çš„ä¸€ä¸ª View ç±»å‹çš„å†…éƒ¨æˆå‘˜ mNextViewã€‚Toast æä¾›äº† show() å’Œ cancel() åˆ†åˆ«ç”¨äºæ˜¾ç¤ºå’Œéšè— Toastï¼Œå®ƒä»¬çš„å†…éƒ¨æ˜¯ä¸€ä¸ª IPC è¿‡ç¨‹ï¼Œshow() æ–¹æ³•å’Œ cancel() æ–¹æ³•çš„å®ç°å¦‚ä¸‹:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
    ...
    <span class="hljs-type">INotificationManager</span> <span class="hljs-variable">service</span> <span class="hljs-operator">=</span> getService();
    <span class="hljs-type">String</span> <span class="hljs-variable">pkg</span> <span class="hljs-operator">=</span> mContext.getOpPackageName();
    <span class="hljs-type">TN</span> <span class="hljs-variable">tn</span> <span class="hljs-operator">=</span> mTN;
    tn.mNextView = mNextView;
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">displayId</span> <span class="hljs-operator">=</span> mContext.getDisplayId();
    ...
    <span class="hljs-keyword">if</span> (Compatibility.isChangeEnabled(CHANGE_TEXT_TOASTS_IN_THE_SYSTEM)) {
        <span class="hljs-keyword">if</span> (mNextView != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// It's a custom toast</span>
            service.enqueueToast(pkg, mToken, tn, mDuration, displayId);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// It's a text toast</span>
            <span class="hljs-type">ITransientNotificationCallback</span> <span class="hljs-variable">callback</span> <span class="hljs-operator">=</span>
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">CallbackBinder</span>(mCallbacks, mHandler);
            service.enqueueTextToast(pkg, mToken, mText, mDuration, displayId, callback);
        }
    } <span class="hljs-keyword">else</span> {
        service.enqueueToast(pkg, mToken, tn, mDuration, displayId);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">cancel</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">if</span> (Compatibility.isChangeEnabled(CHANGE_TEXT_TOASTS_IN_THE_SYSTEM)
            &amp;&amp; mNextView == <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">try</span> {
            getService().cancelToast(mContext.getOpPackageName(), mToken);
        } <span class="hljs-keyword">catch</span> (RemoteException e) {
            <span class="hljs-comment">// Empty</span>
        }
    } <span class="hljs-keyword">else</span> {
        mTN.cancel();
    }
}
</code></pre>
<p>ä»ä¸Šé¢çš„ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œæ˜¾ç¤ºå’Œéšè— Toast éƒ½éœ€è¦é€šè¿‡ NMS æ¥å®ç°ï¼Œç”±äº NMS è¿è¡Œåœ¨ç³»ç»Ÿçš„è¿›ç¨‹ä¸­ï¼Œæ‰€ä»¥åªèƒ½é€šè¿‡è¿œç¨‹è°ƒç”¨çš„æ–¹å¼æ¥æ˜¾ç¤ºå’Œéšè— Toastã€‚éœ€è¦æ³¨æ„çš„æ˜¯ TN è¿™ä¸ªç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ª Binder ç±»ï¼Œåœ¨ Toast å’Œ NMS è¿›è¡Œ IPC çš„è¿‡ç¨‹ä¸­ï¼Œå½“ NMS å¤„ç† Toast çš„æ˜¾ç¤ºæˆ–éšè—è¯·æ±‚æ—¶ä¼šè·¨è¿›ç¨‹å›è°ƒ TN ä¸­çš„æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™ç”±äº TN è¿è¡Œåœ¨ Binder çº¿ç¨‹æ± ä¸­ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡ Handler å°†å…¶åˆ‡æ¢åˆ°å½“å‰çº¿ç¨‹ä¸­ã€‚è¿™é‡Œçš„å½“å‰çº¿ç¨‹æ˜¯æŒ‡å‘é€ Toast è¯·æ±‚æ‰€åœ¨çš„çº¿ç¨‹ã€‚æ³¨æ„ï¼Œç”±äºè¿™é‡Œä½¿ç”¨äº† Handlerï¼Œæ‰€ä»¥è¿™æ„å‘³ç€ Toast æ— æ³•åœ¨æ²¡æœ‰ Looper çš„çº¿ç¨‹ä¸­å¼¹å‡ºï¼Œè¿™æ˜¯å› ä¸º Handler éœ€è¦ä½¿ç”¨ Looper æ‰èƒ½å®Œæˆåˆ‡æ¢çº¿ç¨‹çš„åŠŸèƒ½ã€‚</p>
<p>å…ˆæ¥çœ‹çœ‹ Toast çš„æ˜¾ç¤ºè¿‡ç¨‹ï¼Œservice.enqueueToast() è°ƒç”¨äº† NotificationManagerService çš„ mService çš„
enqueueToast():</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">NotificationManagerService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">SystemService</span> {

    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MAX_PACKAGE_NOTIFICATIONS</span> <span class="hljs-operator">=</span> <span class="hljs-number">25</span>;

    <span class="hljs-keyword">final</span> ArrayList&lt;ToastRecord&gt; mToastQueue = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();

    <span class="hljs-keyword">final</span> <span class="hljs-type">IBinder</span> <span class="hljs-variable">mService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">INotificationManager</span>.Stub() {

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueueTextToast</span><span class="hljs-params">(String pkg, IBinder token, CharSequence text, <span class="hljs-type">int</span> duration,
                                     <span class="hljs-type">int</span> displayId, <span class="hljs-meta">@Nullable</span> ITransientNotificationCallback callback)</span> {
            enqueueToast(pkg, token, text, <span class="hljs-literal">null</span>, duration, displayId, callback);
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueueToast</span><span class="hljs-params">(String pkg, IBinder token, ITransientNotification callback,
                                 <span class="hljs-type">int</span> duration, <span class="hljs-type">int</span> displayId)</span> {
            enqueueToast(pkg, token, <span class="hljs-literal">null</span>, callback, duration, displayId, <span class="hljs-literal">null</span>);
        }

        <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">enqueueToast</span><span class="hljs-params">(String pkg, IBinder token, <span class="hljs-meta">@Nullable</span> CharSequence text,
                                  <span class="hljs-meta">@Nullable</span> ITransientNotification callback, <span class="hljs-type">int</span> duration, <span class="hljs-type">int</span> displayId,
                                  <span class="hljs-meta">@Nullable</span> ITransientNotificationCallback textCallback)</span> {
            ...
            <span class="hljs-keyword">synchronized</span> (mToastQueue) {
                <span class="hljs-type">int</span> <span class="hljs-variable">callingPid</span> <span class="hljs-operator">=</span> Binder.getCallingPid();
                <span class="hljs-type">long</span> <span class="hljs-variable">callingId</span> <span class="hljs-operator">=</span> Binder.clearCallingIdentity();
                <span class="hljs-keyword">try</span> {
                    ToastRecord record;
                    <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> indexOfToastLocked(pkg, token);
                    <span class="hljs-comment">// If it's already in the queue, we update it in place, we don't</span>
                    <span class="hljs-comment">// move it to the end of the queue.</span>
                    <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {
                        record = mToastQueue.get(index);
                        record.update(duration);
                    } <span class="hljs-keyword">else</span> {
                        <span class="hljs-comment">// Limit the number of toasts that any given package can enqueue.</span>
                        <span class="hljs-comment">// Prevents DOS attacks and deals with leaks.</span>
                        <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
                        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">N</span> <span class="hljs-operator">=</span> mToastQueue.size();
                        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; N; i++) {
                            <span class="hljs-keyword">final</span> <span class="hljs-type">ToastRecord</span> <span class="hljs-variable">r</span> <span class="hljs-operator">=</span> mToastQueue.get(i);
                            <span class="hljs-keyword">if</span> (r.pkg.equals(pkg)) {
                                count++;
                                <span class="hljs-keyword">if</span> (count &gt;= MAX_PACKAGE_NOTIFICATIONS) {
                                    Slog.e(TAG, <span class="hljs-string">"Package has already posted "</span> + count
                                            + <span class="hljs-string">" toasts. Not showing more. Package="</span> + pkg);
                                    <span class="hljs-keyword">return</span>;
                                }
                            }
                        }

                        <span class="hljs-type">Binder</span> <span class="hljs-variable">windowToken</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Binder</span>();
                        mWindowManagerInternal.addWindowToken(windowToken, TYPE_TOAST, displayId);
                        <span class="hljs-comment">// è·å– ToastRecord</span>
                        record = getToastRecord(callingUid, callingPid, pkg, token, text, callback,
                                duration, windowToken, displayId, textCallback);
                        mToastQueue.add(record);
                        index = mToastQueue.size() - <span class="hljs-number">1</span>;
                        keepProcessAliveForToastIfNeededLocked(callingPid);
                    }
                    <span class="hljs-comment">// If it's at index 0, it's the current toast. It doesn't matter if it's</span>
                    <span class="hljs-comment">// new or just been updated, show it.</span>
                    <span class="hljs-comment">// If the callback fails, this will remove it from the list, so don't</span>
                    <span class="hljs-comment">// assume that it's valid after this.</span>
                    <span class="hljs-keyword">if</span> (index == <span class="hljs-number">0</span>) {
                        <span class="hljs-comment">// æ˜¾ç¤ºå½“å‰çš„ Toast</span>
                        showNextToastLocked();
                    }
                } <span class="hljs-keyword">finally</span> {
                    Binder.restoreCallingIdentity(callingId);
                }
            }

        }
    }

}
</code></pre>
<p>enqueueToast() é¦–å…ˆåˆ¤æ–­ mToastQueue ä¸­æœ‰æ²¡æœ‰è¿™ä¸ª ToastRecordï¼Œå¦‚æœæœ‰çš„è¯ï¼Œæ›´æ–° Toast æ—¶é•¿ã€‚å¦‚æœæ²¡æœ‰ï¼Œå°† Toast è¯·æ±‚å°è£…ä¸º ToastRecord å¯¹è±¡å¹¶å°†å…¶æ·»åŠ åˆ° mToastQueue çš„é˜Ÿåˆ—ä¸­ï¼ŒmToastQueue å…¶å®æ˜¯ä¸€ä¸ªArrayListã€‚å¯¹äºéç³»ç»Ÿåº”ç”¨æ¥è¯´ï¼ŒmToastQueue ä¸­æœ€å¤šèƒ½åŒæ—¶å­˜åœ¨ 25 ä¸ª ToastRecordï¼Œè¿™æ ·åšæ˜¯ä¸ºäº†é˜²æ­¢ DOSï¼ˆDenial of Serviceï¼šæ‹’ç»æœåŠ¡ï¼‰æ”»å‡»ã€‚å¦‚æœä¸è¿™ä¹ˆåšï¼Œè¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬é€šè¿‡å¤§é‡çš„å¾ªç¯å»è¿ç»­å¼¹å‡º Toastï¼Œè¿™å°†ä¼šå¯¼è‡´å…¶ä»–åº”ç”¨æ²¡æœ‰æœºä¼šå¼¹å‡º Toastï¼Œé‚£ä¹ˆå¯¹äºå…¶ä»–åº”ç”¨çš„ Toast è¯·æ±‚ï¼Œç³»ç»Ÿçš„è¡Œä¸ºå°±æ˜¯æ‹’ç»æœåŠ¡ï¼Œè¿™å°±æ˜¯æ‹’ç»æœåŠ¡æ”»å‡»çš„å«ä¹‰ï¼Œè¿™ç§æ‰‹æ®µå¸¸ç”¨äºç½‘ç»œæ”»å‡»ä¸­ã€‚</p>
<p>æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªåº”ç”¨ä¸å¯èƒ½è¾¾åˆ°ä¸Šé™ã€‚è¢«æ·»åŠ åˆ° mToastQueue ä¸­åï¼ŒNMS å°±ä¼šé€šè¿‡ showNextToastLocked() æ–¹æ³•æ¥æ˜¾ç¤ºå½“å‰çš„ Toastã€‚è¯¥æ–¹æ³•é‡Œé¢å…ˆè·å– mToastQueue ä¸­çš„ç¬¬ 1 ä¸ªToastRecordï¼Œç„¶åè¿›å…¥ While å¾ªç¯ï¼šæ˜¾ç¤º Toastï¼ŒæŠŠå½“å‰ ToastRecord ä» mToastQueue ä¸­ç§»é™¤ï¼Œå†é‡æ–°è·å–ç¬¬ 1 ä¸ª ToastRecordï¼Œç›´åˆ° mToastQueue ä¸ºç©ºä¸ºæ­¢ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">void</span> <span class="hljs-title function_">showNextToastLocked</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// è·å– mToastQueue ä¸­çš„ç¬¬ 1 ä¸ª ToastRecord</span>
    <span class="hljs-type">ToastRecord</span> <span class="hljs-variable">record</span> <span class="hljs-operator">=</span> mToastQueue.get(<span class="hljs-number">0</span>);
    <span class="hljs-comment">// While å¾ªç¯</span>
    <span class="hljs-keyword">while</span> (record != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// æ˜¾ç¤º Toast</span>
        <span class="hljs-keyword">if</span> (record.show()) {
            scheduleDurationReachedLocked(record);
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> mToastQueue.indexOf(record);
        <span class="hljs-keyword">if</span> (index &gt;= <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// ä» mToastQueue ä¸­ç§»é™¤å½“å‰ ToastRecord</span>
            mToastQueue.remove(index);
        }
        <span class="hljs-comment">// é‡æ–°è·å– mToastQueue ä¸­çš„ç¬¬ 1 ä¸ª ToastRecord</span>
        record = (mToastQueue.size() &gt; <span class="hljs-number">0</span>) ? mToastQueue.get(<span class="hljs-number">0</span>) : <span class="hljs-literal">null</span>;
    }
}
</code></pre>
<p>é¦–å…ˆæ¥çœ‹çœ‹ record.show()ï¼ŒToastRecord æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®ç°ç±»æ˜¯ CustomToastRecordï¼Œå®é™…è°ƒç”¨çš„æ˜¯ CustomToastRecord çš„ show() æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomToastRecord</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ToastRecord</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CustomToastRecord</span><span class="hljs-params">(NotificationManagerService notificationManager, <span class="hljs-type">int</span> uid, <span class="hljs-type">int</span> pid,
                             String packageName, IBinder token, ITransientNotification callback, <span class="hljs-type">int</span> duration,
                             Binder windowToken, <span class="hljs-type">int</span> displayId)</span> {
        <span class="hljs-built_in">super</span>(notificationManager, uid, pid, packageName, token, duration, windowToken, displayId);
        <span class="hljs-built_in">this</span>.callback = checkNotNull(callback);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">show</span><span class="hljs-params">()</span> {
        ...
        callback.show(windowToken);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        ...
    }
}
</code></pre>
<p>é‡Œé¢æ˜¯é€šè¿‡ callback æ¥å®Œæˆçš„ï¼Œè¿™ä¸ª callback å®é™…æ˜¯ TN å¯¹è±¡çš„è¿œç¨‹ Binderï¼Œé€šè¿‡ callback æ¥è®¿é—® TN ä¸­çš„æ–¹æ³•éœ€è¦è·¨è¿›ç¨‹æ¥å®Œæˆï¼Œæœ€ç»ˆè¢«è°ƒç”¨çš„ TN çš„æ–¹æ³•ä¼šè¿è¡Œåœ¨å‘èµ· Toast è¯·æ±‚çš„åº”ç”¨çš„ Binder çº¿ç¨‹æ± ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Toast</span> {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TN</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ITransientNotification</span>.Stub {

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(IBinder windowToken)</span> {
            ...
            mHandler.obtainMessage(SHOW, windowToken).sendToTarget();
        }
    }
}
</code></pre>
<p>è¿™é‡Œé€šè¿‡ Handler å‘æ¶ˆæ¯åˆ‡æ¢åˆ°ä¸»çº¿ç¨‹ï¼š</p>
<pre><code class="hljs language-java" lang="java">mHandler = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Handler</span>(looper, <span class="hljs-literal">null</span>) {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleMessage</span><span class="hljs-params">(Message msg)</span> {
        <span class="hljs-keyword">switch</span> (msg.what) {
            <span class="hljs-keyword">case</span> SHOW: {
                <span class="hljs-type">IBinder</span> <span class="hljs-variable">token</span> <span class="hljs-operator">=</span> (IBinder) msg.obj;
                handleShow(token);
                <span class="hljs-keyword">break</span>;
            }
            ...
        }
    }
};

<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleShow</span><span class="hljs-params">(IBinder windowToken)</span> {
    ...
    <span class="hljs-keyword">if</span> (mView != mNextView) {
        <span class="hljs-comment">// remove the old view if necessary</span>
        handleHide();
        mView = mNextView;
        mPresenter.show(mView, mToken, windowToken, mDuration, mGravity, mX, mY,
                mHorizontalMargin, mVerticalMargin,
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">CallbackBinder</span>(getCallbacks(), mHandler));
    }
}
</code></pre>
<p>ç„¶åè°ƒç”¨äº† handleShow() æ–¹æ³•ï¼Œå†è°ƒç”¨äº† mPresenter.show()ï¼ŒToastPresenter çš„ show() æ–¹æ³•ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToastPresenter</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(View view, IBinder token, IBinder windowToken, <span class="hljs-type">int</span> duration, <span class="hljs-type">int</span> gravity,
            <span class="hljs-type">int</span> xOffset, <span class="hljs-type">int</span> yOffset, <span class="hljs-type">float</span> horizontalMargin, <span class="hljs-type">float</span> verticalMargin,
            <span class="hljs-meta">@Nullable</span> ITransientNotificationCallback callback)</span> {
        ...
        mWindowManager.addView(mView, mParams);
        ...
    }
}
</code></pre>
<p>æœ€ç»ˆè¿˜æ˜¯è°ƒç”¨çš„ WindowManager çš„ addView() æ–¹æ³•æ·»åŠ çª—å£æ˜¾ç¤º Toastã€‚</p>
<p>Toast æ˜¾ç¤ºåï¼ŒNMS è¿˜ä¼šé€šè¿‡ scheduleDurationReachedLocked() æ–¹æ³•æ¥å‘é€ä¸€ä¸ªå»¶æ—¶æ¶ˆæ¯ï¼Œå…·ä½“çš„å»¶æ—¶å–å†³äº Toast çš„æ—¶é•¿ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">scheduleDurationReachedLocked</span><span class="hljs-params">(ToastRecord r)</span>
{
    mHandler.removeCallbacksAndMessages(r);
    <span class="hljs-type">Message</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Message.obtain(mHandler, MESSAGE_DURATION_REACHED, r);
    <span class="hljs-type">int</span> <span class="hljs-variable">delay</span> <span class="hljs-operator">=</span> r.getDuration() == Toast.LENGTH_LONG ? LONG_DELAY : SHORT_DELAY;
    delay = mAccessibilityManager.getRecommendedTimeoutMillis(delay,
            AccessibilityManager.FLAG_CONTENT_TEXT);
    mHandler.sendMessageDelayed(m, delay);
}
</code></pre>
<p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒLONG_DELAY æ˜¯ 3.5sï¼Œè€Œ SHORT_DELAY æ˜¯ 2sã€‚å»¶è¿Ÿç›¸åº”çš„æ—¶é—´åï¼ŒNMS ä¼šé€šè¿‡ cancelToastLocked() æ–¹æ³•æ¥éšè— Toast å¹¶å°†å…¶ä» mToastQueue ä¸­ç§»é™¤ï¼Œè¿™ä¸ªæ—¶å€™å¦‚æœ mToastQueue ä¸­è¿˜æœ‰å…¶ä»– Toastï¼Œé‚£ä¹ˆ NMS å°±ç»§ç»­æ˜¾ç¤ºå…¶ä»– Toastã€‚Toast çš„éšè—ä¹Ÿæ˜¯é€šè¿‡ ToastRecord çš„ callback æ¥å®Œæˆçš„ï¼Œè¿™åŒæ ·ä¹Ÿæ˜¯ä¸€æ¬¡ IPC è¿‡ç¨‹ï¼Œå®ƒçš„å·¥ä½œæ–¹å¼å’Œ Toast çš„æ˜¾ç¤ºè¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ã€‚æœ€ç»ˆè°ƒç”¨äº† WindowManager çš„ removeView() æ–¹æ³•æ¥å®Œæˆ Toast çš„éšè—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 1]ï¼šä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ä½“ç³»]]></title>    <link>https://juejin.cn/post/7602154088476262438</link>    <guid>https://juejin.cn/post/7602154088476262438</guid>    <pubDate>2026-02-03T02:26:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602154088476262438" data-draft-id="7602259669707210778" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 1]ï¼šä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ä½“ç³»"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:26:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ç‹å£®å£®"/> <meta itemprop="url" content="https://juejin.cn/user/4473272506789485"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯å‘æ¶æ„çªå›´ç³»åˆ— - æ€§èƒ½è§‚æµ‹ [7 - 1]ï¼šä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ ¸å¿ƒæ€§èƒ½æŒ‡æ ‡ä½“ç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4473272506789485/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ç‹å£®å£®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:26:56.000Z" title="Tue Feb 03 2026 02:26:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p><strong>å†™åœ¨å‰é¢</strong></p>
<p>åœºæ™¯é‡ç°ï¼š è€æ¿ï¼šâ€œå’±ä»¬çš„ç½‘ç«™æ€ä¹ˆæ„Ÿè§‰æœ‰ç‚¹å¡ï¼Ÿâ€ å‰ç«¯ï¼šâ€œä¸å¡å•Šï¼Œæˆ‘æœ¬åœ°æµ‹ <code>DOMContentLoaded</code> åªæœ‰ 300msã€‚â€ è€æ¿ï¼šâ€œæˆ‘ä¸ç®¡ä»€ä¹ˆ Loadï¼Œåæ­£æˆ‘ç‚¹æŒ‰é’®æ²¡ååº”ï¼Œåˆ·å‡ºæ¥å›¾ç‰‡è¦åŠå¤©ã€‚â€</p>
<p>è¿™å°±æ˜¯å…¸å‹çš„**â€œè§†è§’é”™ä½â€ <strong>ã€‚ ä¼ ç»Ÿçš„æ€§èƒ½æŒ‡æ ‡ï¼ˆLoad, DOMReadyï¼‰æ˜¯</strong>æœºå™¨è§†è§’**ï¼Œå®ƒä»¬å‘Šè¯‰æˆ‘ä»¬ä»£ç ä»€ä¹ˆæ—¶å€™è·‘å®Œã€‚ è€Œç°ä»£æ¶æ„å¸ˆéœ€è¦çš„æ˜¯<strong>ç”¨æˆ·è§†è§’</strong>ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ç”¨æˆ·ä»€ä¹ˆæ—¶å€™çœ‹åˆ°å†…å®¹ï¼Ÿä»€ä¹ˆæ—¶å€™èƒ½äº¤äº’ï¼Ÿé¡µé¢æ˜¯ä¸æ˜¯åœ¨ä¹±è·³ï¼Ÿ</p>
<p>æœ¬ç¯‡æˆ‘ä»¬å°†æŠ›å¼ƒè¿‡æ—¶çš„æŒ‡æ ‡ï¼ŒåŸºäº Google çš„ <strong>Web Vitals</strong> æ ‡å‡†ï¼Œå»ºç«‹ä¸€å¥—èƒ½çœŸå®åæ˜ ç”¨æˆ·ä½“éªŒçš„åº¦é‡è¡¡ã€‚</p>
</blockquote>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f0a58a49ec34c19b8c0f2581691a403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv546L5aOu5aOu:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690417&amp;x-signature=3vhehvVBMJ35WfP1C4WziRsSCac%3D" alt="image.png" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ ä¸ºä»€ä¹ˆä¼ ç»Ÿçš„æŒ‡æ ‡å¤±æ•ˆäº†ï¼Ÿ</h2>
<p>åœ¨ jQuery æ—¶ä»£ï¼Œ<code>window.onload</code> æ˜¯ç¥ã€‚å› ä¸ºé‚£æ—¶çš„ç½‘é¡µå¤§å¤šæ˜¯æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰ï¼ŒHTML ä¸‹è½½å®Œï¼Œé¡µé¢åŸºæœ¬å°±å‡ºæ¥äº†ã€‚</p>
<p>ä½†åœ¨ <strong>SPAï¼ˆå•é¡µåº”ç”¨ï¼‰</strong> æ—¶ä»£ï¼Œ<code>onload</code> è§¦å‘æ—¶ï¼Œé¡µé¢å¯èƒ½åªæ¸²æŸ“äº†ä¸€ä¸ªç™½è‰²çš„ <code>&lt;div id="root"&gt;&lt;/div&gt;</code>ï¼ŒçœŸæ­£çš„ä¸šåŠ¡ç»„ä»¶è¿˜åœ¨è½¬åœˆåœˆï¼ˆLoadingï¼‰ã€‚</p>
<ul>
<li><strong>æŠ€æœ¯æŒ‡æ ‡ (Technical Metrics):</strong> TCP å»ºè¿æ—¶é—´ã€TTFBã€Download Sizeã€‚å®ƒä»¬å¯¹è¿ç»´æœ‰ç”¨ï¼Œä½†æ— æ³•ä»£è¡¨ç”¨æˆ·ä½“éªŒã€‚</li>
<li><strong>ç”¨æˆ·æŒ‡æ ‡ (User-Centric Metrics):</strong> é¡µé¢å¤šä¹…ç”»å‡ºæ¥ï¼Ÿç‚¹å‡»æœ‰åé¦ˆå—ï¼Ÿ</li>
<li><strong>ç»“è®ºï¼š</strong> ä¼˜åŒ–çš„ç›®æ ‡æ˜¯**â€œæ„ŸçŸ¥çš„å¿«â€**ï¼Œè€Œä¸ä»…ä»…æ˜¯â€œç‰©ç†çš„å¿«â€ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€ æ ¸å¿ƒä¸‰æ”¯æŸ±ï¼šCore Web Vitals (CWV)</h2>
<p>Google æå‡ºäº†ä¸€å¥—æ ¸å¿ƒæŒ‡æ ‡ï¼ˆCore Web Vitalsï¼‰ï¼Œè¿™ä¸ä»…æ˜¯ä½“éªŒæ ‡å‡†ï¼Œæ›´ç›´æ¥å½±å“ <strong>SEO æ’å</strong>ã€‚è¿™æ˜¯æ¶æ„å¸ˆå¿…é¡»æ­»ç£•çš„ä¸‰ä¸ªæŒ‡æ ‡ã€‚</p>
<h3 data-id="heading-2">2.1 åŠ è½½ä½“éªŒï¼šLCP (Largest Contentful Paint)</h3>
<p><strong>â€œé¡µé¢ä¸»è¦å†…å®¹å¤šä¹…èƒ½çœ‹åˆ°ï¼Ÿâ€</strong></p>
<ul>
<li>
<p><strong>å®šä¹‰ï¼š</strong> è§†å£å†…<strong>æœ€å¤§</strong>çš„é‚£å—å¯è§å†…å®¹ï¼ˆé€šå¸¸æ˜¯å¤§å›¾ã€è§†é¢‘å°é¢æˆ– H1 æ ‡é¢˜ï¼‰æ¸²æŸ“å®Œæˆçš„æ—¶é—´ç‚¹ã€‚</p>
</li>
<li>
<p><strong>ä¸ºä»€ä¹ˆä¸æ˜¯ FCP (First Contentful Paint)?</strong> FCP å¯èƒ½åªç”»äº†ä¸€ä¸ªèœå•æ æˆ–è€… Loading å›¾æ ‡ï¼Œç”¨æˆ·å¹¶ä¸å…³å¿ƒã€‚ç”¨æˆ·è¿›æ¥æ˜¯çœ‹æ­£æ–‡/å•†å“çš„ï¼ŒLCP ä»£è¡¨äº†â€œæ­£æ–‡å·²å°±ä½â€ã€‚</p>
</li>
<li>
<p><strong>æ ‡å‡†ï¼š</strong></p>
<ul>
<li>ğŸŸ¢ <strong>&lt; 2.5s</strong>: ä¼˜ç§€</li>
<li>ğŸ”´ <strong>&gt; 4.0s</strong>: ç³Ÿç³•</li>
</ul>
</li>
</ul>
<h3 data-id="heading-3">2.2 äº¤äº’å“åº”ï¼šINP (Interaction to Next Paint)</h3>
<p><strong>â€œç‚¹ä¸‹å»å¤šä¹…æœ‰ååº”ï¼Ÿâ€</strong></p>
<ul>
<li>
<p><strong>æ¶æ„å¸ˆæ³¨æ„ï¼š</strong> <strong>FID (First Input Delay)</strong> å·²äº 2024 å¹´ 3 æœˆæ­£å¼é€€å½¹ã€‚<strong>INP</strong> æ˜¯æ–°çš„ç‹è€…ã€‚</p>
</li>
<li>
<p><strong>å®šä¹‰ï¼š</strong> è§‚å¯Ÿç”¨æˆ·åœ¨é¡µé¢åœç•™æœŸé—´çš„<strong>æ‰€æœ‰</strong>ç‚¹å‡»ã€æŒ‰é”®ã€è§¦æ‘¸æ“ä½œï¼Œè®¡ç®—ä»â€œæ“ä½œå‘ç”Ÿâ€åˆ°â€œä¸‹ä¸€å¸§ç»˜åˆ¶â€çš„å»¶è¿Ÿã€‚</p>
</li>
<li>
<p><strong>INP vs FID:</strong> FID åªçœ‹ç¬¬ä¸€æ¬¡ç‚¹å‡»ï¼ˆç¬¬ä¸€å°è±¡ï¼‰ï¼›INP çœ‹å…¨ç”Ÿå‘½å‘¨æœŸä¸­æœ€æ…¢çš„é‚£æ¬¡äº¤äº’ï¼ˆæœ¨æ¡¶æ•ˆåº”ï¼‰ã€‚å¦‚æœä½ çš„é¡µé¢é•¿åˆ—è¡¨æ»šåŠ¨å¾ˆå¡ï¼ŒINP ä¼šæ•™ä½ åšäººã€‚</p>
</li>
<li>
<p><strong>æ ‡å‡†ï¼š</strong></p>
<ul>
<li>ğŸŸ¢ <strong>&lt; 200ms</strong>: ä¼˜ç§€</li>
<li>ğŸ”´ <strong>&gt; 500ms</strong>: ç³Ÿç³•</li>
</ul>
</li>
</ul>
<h3 data-id="heading-4">2.3 è§†è§‰ç¨³å®šæ€§ï¼šCLS (Cumulative Layout Shift)</h3>
<p><strong>â€œé¡µé¢æ˜¯ä¸æ˜¯åœ¨ä¹±è·³ï¼Ÿâ€</strong></p>
<ul>
<li>
<p><strong>å®šä¹‰ï¼š</strong> è¡¡é‡é¡µé¢åœ¨åŠ è½½è¿‡ç¨‹ä¸­æ„å¤–ä½ç§»çš„ç¨‹åº¦ã€‚</p>
</li>
<li>
<p><strong>åœºæ™¯ï¼š</strong> ç”¨æˆ·æ­£å‡†å¤‡ç‚¹â€œå–æ¶ˆâ€ï¼Œçªç„¶ä¸Šæ–¹åŠ è½½å‡ºä¸€ä¸ªå¹¿å‘Š Bannerï¼ŒæŠŠâ€œå–æ¶ˆâ€æŒ¤ä¸‹å»äº†ï¼Œç”¨æˆ·è¯¯è§¦äº†â€œç¡®è®¤/è´­ä¹°â€ã€‚è¿™æ˜¯æœ€è®©ç”¨æˆ·æ„¤æ€’çš„ä½“éªŒã€‚</p>
</li>
<li>
<p><strong>æ ‡å‡†ï¼š</strong></p>
<ul>
<li>ğŸŸ¢ <strong>&lt; 0.1</strong>: ä¼˜ç§€</li>
<li>ğŸ”´ <strong>&gt; 0.25</strong>: ç³Ÿç³•</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€ è¾…åŠ©æŒ‡æ ‡ï¼šè¯Šæ–­é—®é¢˜çš„çº¿ç´¢</h2>
<p>é™¤äº†æ ¸å¿ƒçš„ CWVï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›è¾…åŠ©æŒ‡æ ‡æ¥å¸®åŠ©å®šä½é—®é¢˜ï¼š</p>
<ol>
<li>
<p><strong>TTFB (Time To First Byte):</strong></p>
<ul>
<li><em>å«ä¹‰ï¼š</em> ä»å‘å‡ºè¯·æ±‚åˆ°æ¥æ”¶åˆ°ç¬¬ä¸€ä¸ªå­—èŠ‚çš„æ—¶é—´ã€‚</li>
<li><em>è¯Šæ–­ï¼š</em> å¦‚æœ TTFB é«˜ï¼Œè¯´æ˜<strong>åç«¯æ•°æ®åº“æ…¢</strong>æˆ–è€…<strong>ç½‘ç»œå·®</strong>ï¼Œè·Ÿå‰ç«¯ä»£ç æ²¡å…³ç³»ã€‚</li>
</ul>
</li>
<li>
<p><strong>FCP (First Contentful Paint):</strong></p>
<ul>
<li><em>å«ä¹‰ï¼š</em> å±å¹•ä¸Šæ¸²æŸ“å‡ºç¬¬ä¸€ä¸ªåƒç´ ï¼ˆæ–‡å­—ã€å›¾ç‰‡ã€Canvasï¼‰ã€‚</li>
<li><em>è¯Šæ–­ï¼š</em> å¦‚æœ FCP æ…¢ï¼Œè¯´æ˜ HTML æ–‡ä»¶å¤ªå¤§ï¼Œæˆ–è€…é˜»å¡æ¸²æŸ“çš„ CSS/JS å¤ªå¤šï¼ˆç™½å±æ—¶é—´é•¿ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>TBT (Total Blocking Time):</strong></p>
<ul>
<li><em>å«ä¹‰ï¼š</em> ä¸»çº¿ç¨‹è¢«é•¿ä»»åŠ¡ï¼ˆLong Task &gt; 50msï¼‰é˜»å¡çš„æ€»æ—¶é•¿ã€‚</li>
<li><em>è¯Šæ–­ï¼š</em> TBT é«˜é€šå¸¸æ„å‘³ç€ JS æ‰§è¡Œé€»è¾‘å¤ªé‡ï¼Œä¼šå¯¼è‡´ INP å˜å·®ã€‚<strong>TBT æ˜¯ INP çš„â€œå®éªŒå®¤æ›¿èº«â€ã€‚</strong></li>
</ul>
</li>
</ol>
<hr/>
<h2 data-id="heading-6">å››ã€ æ•°æ®çš„ä¸¤é¢æ€§ï¼šLab vs. Field</h2>
<p>æ¶æ„å¸ˆåœ¨æ±‡æŠ¥æ€§èƒ½æ—¶ï¼Œç»å¸¸ä¼šè¢«é—®ï¼šâ€œä¸ºä»€ä¹ˆ Lighthouse è·‘äº† 90 åˆ†ï¼Œç”¨æˆ·è¿˜æ˜¯æŠ•è¯‰å¡ï¼Ÿâ€ è¿™æ˜¯å› ä¸ºä½ æ··æ·†äº†ä¸¤ç§æ•°æ®æºã€‚</p>
<h3 data-id="heading-7">4.1 å®éªŒå®¤æ•°æ® (Lab Data / Synthetic)</h3>
<ul>
<li><strong>æ¥æºï¼š</strong> Lighthouse, WebPageTestã€‚</li>
<li><strong>ç¯å¢ƒï¼š</strong> ä½ çš„é«˜é… MacBook Pro + å…¬å¸åƒå…†å…‰çº¤ + å¹¶æ²¡æœ‰ç™»å½•æ€ã€‚</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> ç¯å¢ƒå¯æ§ï¼Œé€‚åˆ<strong>è°ƒè¯•</strong>å’Œ<strong>å›å½’æµ‹è¯•</strong>ï¼ˆå‘ç‰ˆå‰è·‘ä¸€éï¼Œé˜²æ­¢å˜å·®ï¼‰ã€‚</li>
<li><strong>ç¼ºç‚¹ï¼š</strong> <strong>è¿™å°±æ˜¯â€œè‡ªå—¨â€ã€‚</strong> å®ƒä»£è¡¨ä¸äº†ç”¨ä½ç«¯å®‰å“æœºã€åœ¨åœ°é“å¼±ç½‘ä¸‹è®¿é—®çš„ç”¨æˆ·ã€‚</li>
</ul>
<h3 data-id="heading-8">4.2 ç°åœºæ•°æ® (Field Data / RUM - Real User Monitoring)</h3>
<ul>
<li><strong>æ¥æºï¼š</strong> Chrome UX Report (CrUX)ï¼Œè‡ªå»ºåŸ‹ç‚¹ç³»ç»Ÿã€‚</li>
<li><strong>ç¯å¢ƒï¼š</strong> çœŸå®ç”¨æˆ·çš„è®¾å¤‡å’Œç½‘ç»œã€‚</li>
<li><strong>ä¼˜ç‚¹ï¼š</strong> <strong>è¿™å°±æ˜¯â€œçœŸç›¸â€ã€‚</strong></li>
<li><strong>ç¼ºç‚¹ï¼š</strong> å™ªéŸ³å¤§ï¼Œä¸å¯å¤ç°ï¼ˆä½ ä¸çŸ¥é“é‚£ä¸ªç”¨æˆ·ä¸ºä»€ä¹ˆå¡ï¼Œä¹Ÿè®¸ä»–æ‰‹æœºå½“æ—¶åœ¨å‡çº§ç³»ç»Ÿï¼‰ã€‚</li>
</ul>
<p><strong>æ¶æ„ç­–ç•¥ï¼š</strong> <strong>â€œç”¨ Lab Data å®ˆåº•çº¿ï¼ˆCI/CDï¼‰ï¼Œç”¨ Field Data å®šç›®æ ‡ï¼ˆKPIï¼‰ã€‚â€</strong></p>
<hr/>
<h2 data-id="heading-9">äº”ã€ ä¸šåŠ¡ä»·å€¼ï¼šå¦‚ä½•å‘è€æ¿å…œå”®æ€§èƒ½ï¼Ÿ</h2>
<p>å¦‚æœä½ ç›´æ¥è·Ÿè€æ¿è¯´ï¼šâ€œæˆ‘ä»¬è¦æŠŠ LCP ä» 3s ä¼˜åŒ–åˆ° 2.5sâ€ï¼Œè€æ¿å¯èƒ½æ— æ„Ÿã€‚ ä½ éœ€è¦å»ºç«‹ <strong>æ€§èƒ½ä¸ä¸šåŠ¡æŒ‡æ ‡ (Conversion Rate)</strong> çš„å…³è”ã€‚</p>
<ul>
<li><strong>æ²ƒå°”ç›æ¡ˆä¾‹ï¼š</strong> é¡µé¢åŠ è½½æ¯å¿« 1 ç§’ï¼Œè½¬åŒ–ç‡æå‡ 2%ã€‚</li>
<li><strong>Pinterest æ¡ˆä¾‹ï¼š</strong> ç§»åŠ¨ç«¯ç­‰å¾…æ—¶é—´å‡å°‘ 40%ï¼Œæœç´¢å¼•æ“æµé‡å’Œæ³¨å†Œé‡æå‡ 15%ã€‚</li>
<li><strong>Google æƒé‡ï¼š</strong> CWV è¾¾æ ‡çš„ç½‘ç«™ï¼Œæœç´¢æ’åæƒé‡æ›´é«˜ã€‚</li>
</ul>
<p><strong>å…¬å¼ï¼š</strong> <code>æ€§èƒ½ä¼˜åŒ– = æå‡ç”¨æˆ·ç•™å­˜ + é™ä½è·³å‡ºç‡ + èŠ‚çœäº‘æœåŠ¡å™¨å¸¦å®½æˆæœ¬</code></p>
<hr/>
<h2 data-id="heading-10">ç»“è¯­ï¼šå…ˆæœ‰åº¦é‡ï¼Œå†æœ‰ä¼˜åŒ–</h2>
<p>åœ¨è¿™ä¸€èŠ‚ï¼Œæˆ‘ä»¬ç»Ÿä¸€äº†åº¦é‡è¡¡ã€‚ æˆ‘ä»¬ä¸å†è¯´â€œæœ‰ç‚¹å¡â€ï¼Œè€Œæ˜¯è¯´â€œINP è¶…è¿‡äº† 200msâ€ï¼›æˆ‘ä»¬ä¸å†è¯´â€œç™½å±ä¹…â€ï¼Œè€Œæ˜¯è¯´â€œLCP è¿˜æ˜¯ 4ç§’â€ã€‚</p>
<p>ç¡®ç«‹äº†æ ‡å‡†ä¹‹åï¼Œæ¥ä¸‹æ¥çš„é—®é¢˜æ˜¯ï¼š<strong>æ•°æ®ä»å“ªæ¥ï¼Ÿ</strong> æˆ‘ä»¬ä¸èƒ½æŒ‡æœ›ç”¨æˆ·æ¯ä¸ªäººéƒ½æ‰“å¼€æ§åˆ¶å°æˆªå›¾å‘ç»™æˆ‘ä»¬ã€‚æˆ‘ä»¬éœ€è¦ä¸€å¥—è‡ªåŠ¨åŒ–çš„ã€å…¨é“¾è·¯çš„ç›‘æ§ç³»ç»Ÿï¼Œåƒå¤©çœ¼ä¸€æ ·å®æ—¶æ³¨è§†ç€æ¯ä¸€ä¸ªç”¨æˆ·çš„æ¯ä¸€æ¬¡è®¿é—®ã€‚</p>
<blockquote>
<p><strong>Next Step:</strong> ä¸‹ä¸€èŠ‚ï¼Œæˆ‘ä»¬å°†è¿›å…¥åŸºå»ºç¯èŠ‚ã€‚ æ¶æ„å¸ˆå°†åŒ–èº«â€œç›‘æ§æ¢å¤´å®‰è£…å‘˜â€</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ AI è‡ªåŠ¨ç”Ÿæˆæ•™è‚²è§†é¢‘ï¼Œè§£å†³å­©å­çš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"]]></title>    <link>https://juejin.cn/post/7602161364891893760</link>    <guid>https://juejin.cn/post/7602161364891893760</guid>    <pubDate>2026-02-03T02:05:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602161364891893760" data-draft-id="7602135278665056308" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ AI è‡ªåŠ¨ç”Ÿæˆæ•™è‚²è§†é¢‘ï¼Œè§£å†³å­©å­çš„&quot;åä¸‡ä¸ªä¸ºä»€ä¹ˆ&quot;"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-03T02:05:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŒ—æçš„æ ‘"/> <meta itemprop="url" content="https://juejin.cn/user/3059269887853066"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ AI è‡ªåŠ¨ç”Ÿæˆæ•™è‚²è§†é¢‘ï¼Œè§£å†³å­©å­çš„"åä¸‡ä¸ªä¸ºä»€ä¹ˆ"
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3059269887853066/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŒ—æçš„æ ‘
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:05:34.000Z" title="Tue Feb 03 2026 02:05:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å®¶é‡Œæœ‰å°å­©çš„æœ‹å‹åº”è¯¥éƒ½æœ‰è¿™æ ·çš„ä½“éªŒï¼šå­©å­æ€»ä¼šé—®ä¸€äº›å¥‡æ€ªçš„é—®é¢˜ã€‚</p>
<p>ä¾‹å¦‚ï¼Œé£æœºä¸ºä»€ä¹ˆä¼šé£ä¸Šå¤©ï¼Ÿåœ°çƒä¸ºä»€ä¹ˆæ˜¯åœ†çš„ï¼Ÿå¤ªé˜³ä¸ºä»€ä¹ˆä¼šå‘å…‰.......</p>
<p>ç”¨æ–‡å­—è§£é‡Šå§ï¼Œå­©å­å¬ç€å¾ˆæ¯ç‡¥ï¼Œæˆ‘ä»¬è®²èµ·æ¥ä¹Ÿè´¹åŠ²ã€‚æœ‰æ—¶å€™æƒ³æ‰¾ä¸€äº›ç§‘æ™®è§†é¢‘ï¼Œä½†ç½‘ä¸Šçš„è¦ä¹ˆå¤ªä¸“ä¸šï¼Œè¦ä¹ˆè´¨é‡å‚å·®ä¸é½ã€‚æœ€å…³é”®çš„æ˜¯ï¼Œå­©å­çš„é—®é¢˜åƒå¥‡ç™¾æ€ªï¼Œä¸ä¸€å®šèƒ½æ‰¾åˆ°åˆé€‚çš„è§†é¢‘ã€‚</p>
<p>æ‰€ä»¥æˆ‘å°±æƒ³ï¼Œèƒ½å¦è®©AIå¸®æˆ‘ç”Ÿæˆä¸€ä¸ªæ•™è‚²è§†é¢‘ï¼Ÿè¯´æ¸…æ¥šåŸç†ï¼Œç”»é¢è¿˜å¾—å¥½çœ‹ï¼Œæœ€å¥½è¿˜èƒ½è‡ªåŠ¨é…éŸ³ã€‚</p>
<p>æˆ‘æœ€è¿‘åšäº†ä¸€ä¸ª Agent Skill å« <code>educational-video-creator</code>ï¼Œå°±æ˜¯å¹²è¿™ä¸ªäº‹çš„ã€‚ä»è¾“å…¥ä¸€ä¸ªä¸»é¢˜ï¼Œåˆ°ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„æ•™è‚²è§†é¢‘ï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–ã€‚è§†è§‰é£æ ¼å‚è€ƒäº† Kurzgesagt å’Œå›å½¢é’ˆï¼Œé‚£ç§æ‰å¹³åŒ–ã€è‰²å½©é²œè‰³çš„åŠ¨ç”»é£æ ¼ï¼Œå°æœ‹å‹å¾ˆå–œæ¬¢ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f0ff3cd2c654a02b68a3903f0321739~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770689134&amp;x-signature=ydLlxxycyOB%2BrbLu88nU8cd7WiE%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ª Skill ä¸æ˜¯ç®€å•åœ°æŠŠæ–‡å­—è½¬æˆè§†é¢‘ã€‚å®ƒä¼šè‡ªåŠ¨å†™è„šæœ¬ã€è®¾è®¡åˆ†é•œã€ç”»åŠ¨ç”»ã€ç”Ÿæˆé…éŸ³ï¼Œè¿˜ä¼šè‡ªåŠ¨æ£€æŸ¥è´¨é‡ã€‚è¯´ç™½äº†ï¼Œå°±æ˜¯æŠŠä¸€ä¸ªä¸“ä¸šè§†é¢‘å›¢é˜Ÿçš„å·¥ä½œæµç¨‹ï¼Œç”¨AIè·‘äº†ä¸€éã€‚</p>
<blockquote>
<p>â€œ</p>
<p>é¡¹ç›®å·²å¼€æºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fskindhu%2Fskind-skills%2Ftree%2Fmain%2Fskills%2Feducational-video-creator" target="_blank" title="https://github.com/skindhu/skind-skills/tree/main/skills/educational-video-creator" ref="nofollow noopener noreferrer">github.com/skindhu/skiâ€¦</a></p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€ä¸ºä»€ä¹ˆè¦åšè¿™ä¸ªï¼Ÿ</h2>
<p>ä¼ ç»Ÿçš„ç§‘æ™®è§†é¢‘åˆ¶ä½œï¼Œé—¨æ§›å…¶å®æŒºé«˜çš„ã€‚ä½ å¾—ä¼šå†™è„šæœ¬ã€æ‡‚è®¾è®¡ã€ä¼šåŠ¨ç”»ã€èƒ½é…éŸ³,è¿˜å¾—æœ‰ä¸“ä¸šçš„è§†é¢‘ç¼–è¾‘è½¯ä»¶ã€‚å¯¹äºæ™®é€šå®¶é•¿æ¥è¯´ï¼Œè¿™åŸºæœ¬ä¸å¯èƒ½ã€‚</p>
<p>å°±ç®—æ‰¾ç°æˆçš„è§†é¢‘ï¼Œä¹Ÿæœ‰é—®é¢˜ã€‚å­©å­é—®çš„é—®é¢˜å¤ªä¸ªæ€§åŒ–äº†ï¼Œç½‘ä¸Šä¸ä¸€å®šæœ‰ã€‚è€Œä¸”å¾ˆå¤šç§‘æ™®è§†é¢‘è¦ä¹ˆå¤ªæµ…æ˜¾ï¼Œè¦ä¹ˆå¤ªä¸“ä¸šï¼Œå¾ˆéš¾æ‰¾åˆ°åˆšå¥½é€‚åˆçš„ã€‚</p>
<p>å…¶å®æ ¸å¿ƒç—›ç‚¹å°±æ˜¯ï¼šä¸ªæ€§åŒ–çš„æ•™è‚²å†…å®¹ï¼Œåˆ¶ä½œæˆæœ¬å¤ªé«˜ã€‚</p>
<p>ä½†å¦‚æœæœ‰ AI å¸®ä½ è‡ªåŠ¨ç”Ÿæˆå‘¢ï¼Ÿä½ åªéœ€è¦è¯´ä¸€ä¸ªä¸»é¢˜ï¼Œæ¯”å¦‚"ä¸ºä»€ä¹ˆé£æœºèƒ½é£"ï¼Œå‰©ä¸‹çš„å…¨äº¤ç»™ AIã€‚å®ƒè‡ªåŠ¨å†™è„šæœ¬ã€ç”»åŠ¨ç”»ã€é…éŸ³ï¼Œåå‡ åˆ†é’Ÿåç»™ä½ ä¸€ä¸ªæˆå“è§†é¢‘ã€‚</p>
<p>è¿™å°±æ˜¯ <code>educational-video-creator</code> è¦è§£å†³çš„é—®é¢˜ã€‚</p>
<h2 data-id="heading-1">äºŒã€æŠ€æœ¯é€‰å‹ï¼šä¸ºä»€ä¹ˆé€‰ Remotionï¼Ÿ</h2>
<p>åšè§†é¢‘æœ‰å¾ˆå¤šæ–¹æ¡ˆï¼Œæˆ‘æœ€ç»ˆé€‰äº† Remotionã€‚</p>
<p>Remotion æ˜¯ä¸€ä¸ªå¼€æºçš„è§†é¢‘åˆ›ä½œæ¡†æ¶ï¼Œæ ¸å¿ƒç†å¿µæŒºç®€å•ï¼šç”¨ React å†™è§†é¢‘ã€‚ä½ ç”¨ HTMLã€CSSã€TypeScript æ¥æè¿°ç”»é¢å’ŒåŠ¨ç”»ï¼ŒRemotion è´Ÿè´£æŠŠå®ƒæ¸²æŸ“æˆçœŸæ­£çš„è§†é¢‘æ–‡ä»¶ã€‚</p>
<p>é€‰å®ƒçš„åŸå› ä¹Ÿç®€å•ï¼šä»£ç ç”Ÿæˆçš„è§†é¢‘ï¼Œå¤©ç„¶é€‚åˆ AI æ¥å†™ã€‚ä¼ ç»Ÿè§†é¢‘ç¼–è¾‘è½¯ä»¶é æ‰‹åŠ¨æ‹–æ—¶é—´çº¿ã€è°ƒå‚æ•°ï¼ŒAI æ²¡æ³•æ“ä½œã€‚ä½† Remotion ä¸ä¸€æ ·ï¼Œæ‰€æœ‰ç”»é¢ã€åŠ¨ç”»ã€æ—¶é—´æ§åˆ¶éƒ½æ˜¯ä»£ç ï¼Œè€ŒAIå†™ä»£ç æ˜¯å¼ºé¡¹ã€‚</p>
<p>Remotion å®˜æ–¹æœ€è¿‘è¿˜æŠŠæœ€ä½³å®è·µå°è£…æˆäº† Claude Code çš„ Skillï¼ˆ<code>https://github.com/remotion-dev/skills</code>ï¼‰ã€‚è£…ä¸Šè¿™ä¸ª Skill åï¼ŒClaude Code å°±æŒæ¡äº† Remotion çš„åŠ¨ç”»æŠ€å·§ã€ç»„ä»¶æ¨¡å¼ã€éŸ³è§†é¢‘å¤„ç†ç­‰å‡ åæ¡æœ€ä½³å®è·µï¼Œå†™å‡ºæ¥çš„è§†é¢‘ä»£ç è´¨é‡ç›´æ¥æ‹‰æ»¡ã€‚</p>
<p>è¯´ç™½äº†ï¼ŒRemotion æŠŠè§†é¢‘åˆ¶ä½œå˜æˆäº†è½¯ä»¶å·¥ç¨‹é—®é¢˜ï¼Œè€Œ Remotion å®˜æ–¹åˆæŠŠè½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µå–‚ç»™äº†AIã€‚å¦‚æ­¤ä¸€æ¥ï¼ŒAI ç”Ÿæˆè§†é¢‘è¿™ä»¶äº‹å°±å˜å¾—é è°±äº†ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ä»ä¸»é¢˜åˆ°æˆå“ï¼šå®Œæ•´çš„åˆ›ä½œæµç¨‹</h2>
<p><code>educational-video-creator</code> æŠŠè§†é¢‘åˆ¶ä½œæ‹†æˆäº†å‡ ä¸ªé˜¶æ®µã€‚ä¸‹é¢ä¸€ä¸ªä¸€ä¸ªè¯´ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03ff885b0de34bfebc941dfa2a6afdf9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770689134&amp;x-signature=WyBtTlGYwAar8BkPVr3AWloOtu8%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-3"><strong>éœ€æ±‚æ”¶é›†</strong></h4>
<p>ç¬¬ä¸€æ­¥æ˜¯æ˜ç¡®éœ€æ±‚ã€‚AI ä¼šè·Ÿä½ ç¡®è®¤äº”ç±»ä¿¡æ¯ï¼šä¸»é¢˜å’ŒèŒƒå›´ï¼ˆ<code>è®²ä»€ä¹ˆã€ä¸è®²ä»€ä¹ˆã€æœ‰æ²¡æœ‰å¸¸è§è¯¯åŒºè¦çº æ­£</code>ï¼‰ã€ç›®æ ‡è§‚ä¼—ï¼ˆ<code>å¹´é¾„æ®µã€çŸ¥è¯†æ°´å¹³ã€è¯­è¨€</code>ï¼‰ã€è§†é¢‘è§„æ ¼ï¼ˆ<code>æ—¶é•¿ã€åˆ†è¾¨ç‡ã€å¸§ç‡</code>ï¼‰ã€å†…å®¹è¦æ±‚ï¼ˆ<code>å­¦ä¹ ç›®æ ‡ã€å¿…é¡»åŒ…å«çš„å…ƒç´ ã€è§†è§‰åå¥½</code>ï¼‰ã€æ—ç™½å’ŒéŸ³é¢‘ï¼ˆ<code>æ˜¯é…éŸ³è¿˜æ˜¯çº¯å­—å¹•ã€è¯­æ°”é£æ ¼ã€è¦ä¸è¦èƒŒæ™¯éŸ³ä¹</code>ï¼‰ã€‚</p>
<p>è¿™äº›é—®é¢˜ä¸æ˜¯éšä¾¿é—®çš„ã€‚å®ƒä»¬ç›´æ¥å†³å®šäº†åé¢æ¯ä¸ªé˜¶æ®µçš„äº§å‡ºã€‚</p>
<p>æ¯”å¦‚ï¼Œç»™5å²å°å­©è®²é£æœºï¼Œä½ å¾—ç”¨"ç¿…è†€æ‹æ‰“ç©ºæ°”"è¿™ç§ç®€å•ç±»æ¯”ï¼Œè¯­æ°”è¦æ´»æ³¼ã€‚ç»™ä¸­å­¦ç”Ÿè®²ï¼Œå°±å¾—æä¼¯åŠªåˆ©åŸç†å’Œå‡åŠ›å…¬å¼ï¼Œè¯­æ°”å¯ä»¥æ­£å¼ä¸€äº›ã€‚ç¡®è®¤å®Œæ‰€æœ‰éœ€æ±‚åï¼ŒAI ä¼šåšä¸€æ¬¡æ ¡éªŒï¼Œç¡®ä¿ä¸»é¢˜ã€è§‚ä¼—ã€å­¦ä¹ ç›®æ ‡éƒ½æ˜ç¡®äº†ï¼Œæ‰è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</p>
<h4 data-id="heading-4"><strong>è„šæœ¬åˆ›ä½œ</strong></h4>
<p>æœ‰äº†éœ€æ±‚ï¼ŒAI å¼€å§‹å†™è„šæœ¬ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µåªå…³æ³¨"è®²ä»€ä¹ˆ"ã€‚è„šæœ¬åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†ï¼šæ ¸å¿ƒä¿¡æ¯ï¼ˆ<code>ä¸€å¥è¯æ€»ç»“å’Œå­¦ä¹ ç›®æ ‡</code>ï¼‰ã€å™äº‹ç­–ç•¥ï¼ˆ<code>ç”¨ä»€ä¹ˆè§’åº¦åˆ‡å…¥ã€æ ¸å¿ƒæ¯”å–»æ˜¯ä»€ä¹ˆã€æƒ…æ„Ÿå¼§çº¿æ€ä¹ˆèµ°ã€çŸ¥è¯†ç‚¹æŒ‰ä»€ä¹ˆé¡ºåºé€’è¿›</code>ï¼‰ã€å®Œæ•´æ—ç™½æ–‡å­—ç¨¿ã€èŠ‚å¥æ ‡æ³¨ï¼ˆ<code>å“ªé‡ŒåŠ é€Ÿã€å“ªé‡Œæ”¾æ…¢ã€å“ªé‡Œåœé¡¿è®©è§‚ä¼—æ¶ˆåŒ–</code>ï¼‰ã€‚</p>
<p>è„šæœ¬é‡Œä¹Ÿä¼šå†™ç®€çŸ­çš„"è§†è§‰æ„å›¾"ï¼Œæ¯”å¦‚"ä»ä¾§é¢å±•ç¤ºé£æœºï¼Œå››ä¸ªç®­å¤´è¡¨ç¤ºå››ç§åŠ›"ã€‚ä½†ä¸ä¼šå†™ä»»ä½•æŠ€æœ¯å‚æ•°ï¼Œåæ ‡ã€å¸§å·ã€åŠ¨ç”»é…ç½®è¿™äº›éƒ½æ˜¯åˆ†é•œé˜¶æ®µçš„äº‹ã€‚</p>
<p>åˆšå¼€å§‹æˆ‘æ˜¯è®©AIç›´æ¥è®¾è®¡è§†é¢‘åˆ†é•œï¼Œç»è¿‡å°è¯•åè¿˜æ˜¯å†³å®šå…ˆå†™è„šæœ¬ã€‚å› ä¸ºå†™æ•…äº‹å’Œè®¾è®¡ç”»é¢æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„æ€ç»´æ¨¡å¼ã€‚å¦‚æœä½ è®© AI åŒæ—¶æƒ³"è¯´ä»€ä¹ˆ"å’Œ"ç”»ä»€ä¹ˆ"ï¼Œå®ƒå¾ˆå®¹æ˜“é¡¾æ­¤å¤±å½¼ã€‚åˆ†å¼€ä¹‹åï¼ŒAI å¯ä»¥ä¸“æ³¨äºæŠŠæ•…äº‹è®²å¥½ã€‚è€Œä¸”çº¯æ–‡æœ¬è„šæœ¬å¾ˆå®¹æ˜“ä¿®æ”¹ï¼Œå¦‚æœæˆ‘ä»¬è§‰å¾—æŸæ®µè¯ä¸å¯¹ï¼Œç›´æ¥æ”¹æ–‡å­—å°±è¡Œã€‚ç­‰è„šæœ¬å®šç¨¿äº†ï¼Œå†è¿›å…¥ä¸‹ä¸€é˜¶æ®µã€‚</p>
<h4 data-id="heading-5"><strong>åˆ†é•œè®¾è®¡</strong></h4>
<p>è„šæœ¬å®šç¨¿åï¼ŒAI å¼€å§‹è®¾è®¡åˆ†é•œã€‚è¿™ä¸ªé˜¶æ®µè¦æŠŠæ–‡å­—è½¬æ¢æˆè§†è§‰ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯æŠŠè„šæœ¬æ‹†æˆ 5-15 ä¸ªåœºæ™¯ï¼Œç»™æ¯ä¸ªåœºæ™¯åˆ†é…æ—ç™½ï¼Œè®¾è®¡è§†è§‰å›¾å±‚ï¼ˆ<code>èƒŒæ™¯ã€ä¸­æ™¯ã€å‰æ™¯ã€UI</code>ï¼‰ï¼Œå®šä¹‰åŠ¨ç”»å‚æ•°ï¼Œè®¾è®¡æ—ç™½å’Œç”»é¢çš„åŒæ­¥ç‚¹ï¼Œåˆ—å‡ºéœ€è¦çš„ SVG ç»„ä»¶å’Œé…è‰²ã€‚</p>
<p>è¿™ä¸ªé˜¶æ®µçš„äº§ç‰©æ˜¯ä¸€ä¸ªè¯¦ç»†çš„åˆ†é•œæ–‡æ¡£ã€‚æœ‰äº†è¿™ä¸ªæ–‡æ¡£ï¼Œåé¢çš„ç¼–ç å°±æ˜¯çº¯æ‰§è¡Œäº†ã€‚</p>
<h4 data-id="heading-6"><strong>è§†è§‰è®¾è®¡</strong></h4>
<p>è§†è§‰é£æ ¼å‚è€ƒäº† Kurzgesagt å’Œå›å½¢é’ˆï¼šæ‰å¹³åŒ–è®¾è®¡ã€é«˜é¥±å’Œåº¦é…è‰²ã€å‡ ä½•å›¾å½¢ã€æ— è¡¬çº¿å­—ä½“ã€‚</p>
<p>è¿™ç§é£æ ¼ç®€å•ã€æ¸…æ™°ï¼Œå¾ˆè§†é¢‘æ•™è‚²ç±»ä¸»é¢˜ã€‚è€Œä¸”æ‰å¹³åŒ–è®¾è®¡ç”¨ä»£ç å¾ˆå¥½å®ç°ï¼Œä¸éœ€è¦å¤æ‚çš„ 3D æ¸²æŸ“ï¼ŒSVG å°±å¤Ÿäº†ã€‚</p>
<h4 data-id="heading-7"><strong>åŠ¨ç”»ç¼–ç </strong></h4>
<p>æœ‰äº†åˆ†é•œå’Œè§†è§‰è§„èŒƒï¼Œå¼€å§‹ç¼–ç ã€‚</p>
<p>Remotion çš„åŠ¨ç”»åŸç†å…¶å®å¾ˆç®€å•ï¼šé€šè¿‡ <code>useCurrentFrame()</code> æ‹¿åˆ°å½“å‰å¸§å·ï¼Œç„¶åç”¨ <code>interpolate()</code> æŠŠå¸§å·æ˜ å°„æˆå„ç§è§†è§‰å±æ€§ï¼Œæ¯”å¦‚ä½ç½®ã€é€æ˜åº¦ã€ç¼©æ”¾ã€‚æ‰€æœ‰åŠ¨ç”»éƒ½æ˜¯è¿™ä¸ªé€»è¾‘ï¼šå¸§å·è¿›å»ï¼Œå±æ€§å€¼å‡ºæ¥ã€‚æƒ³è¦æ›´è‡ªç„¶çš„æ•ˆæœï¼Œè¿˜å¯ä»¥ç”¨ <code>spring()</code> å‡½æ•°æ¨¡æ‹Ÿå¼¹ç°§åŠ¨ç”»ã€‚</p>
<p>å› ä¸º Remotion åŸºäº Reactï¼Œæ‰€ä»¥å¯ä»¥æŠŠå¸¸ç”¨çš„è§†è§‰å…ƒç´ å°è£…æˆç»„ä»¶ï¼Œæ¯”å¦‚å­—å¹•ã€å›¾æ ‡åº“ã€é…è‰²æ–¹æ¡ˆã€å­—ä½“é¢„è®¾ã€‚è¿™äº›ç»„ä»¶åšä¸€æ¬¡å°±èƒ½åå¤ç”¨ï¼ŒAI ç”Ÿæˆä»£ç æ—¶ä¹Ÿä¸å®¹æ˜“å‡ºé”™ã€‚</p>
<h4 data-id="heading-8"><strong>éŸ³é¢‘ç”Ÿæˆ</strong></h4>
<p>åŠ¨ç”»åšå®Œï¼Œå°±åˆ°é…éŸ³é˜¶æ®µã€‚</p>
<p>é…éŸ³ç”¨çš„æ˜¯ Edge TTSï¼Œå¾®è½¯æä¾›çš„å…è´¹ TTS æœåŠ¡ï¼Œæ— éœ€ API Keyã€‚ä¸­æ–‡éŸ³è‰²æ¨è <code>zh-CN-XiaoxiaoNeural</code>ï¼ˆå¥³å£°ï¼Œæ¸…æ™°è‡ªç„¶ï¼‰æˆ– <code>zh-CN-YunxiNeural</code>ï¼ˆç”·å£°ï¼Œæ¸©æš–äº²åˆ‡ï¼‰ã€‚è¿˜å¯ä»¥è°ƒè¯­é€Ÿï¼Œæ¯”å¦‚å‡æ…¢ 10% æ›´é€‚åˆæ•™å­¦åœºæ™¯ã€‚å¯¹æ¯” OpenAI TTS æˆ– Azure TTSï¼ŒEdge TTS éŸ³è´¨ä¸å·®ï¼Œè€Œä¸”å®Œå…¨å…è´¹ï¼Œä¸ªäººé¡¹ç›®ç”¨èµ·æ¥æ²¡è´Ÿæ‹…ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªå…³é”®é—®é¢˜ï¼šæ—ç™½æ—¶é•¿å’ŒåŠ¨ç”»æ—¶é•¿æ€ä¹ˆåŒ¹é…ï¼Ÿ</p>
<p>ä¸€å¼€å§‹è®¾è®¡åˆ†é•œæ—¶ï¼Œåªèƒ½ä¼°è®¡æ¯æ®µè¯è¦è¯´å¤šä¹…ã€‚å®é™…ç”ŸæˆéŸ³é¢‘åï¼Œè‚¯å®šæœ‰åå·®ã€‚æ‰€ä»¥æˆ‘åšäº†ä¸€ä¸ªæ—¶é—´çº¿é‡å»ºåŠŸèƒ½ï¼šå…ˆæµ‹é‡æ‰€æœ‰ TTS éŸ³é¢‘çš„å®é™…æ—¶é•¿ï¼Œç„¶åæŒ‰ç®—æ³•é‡æ–°è®¡ç®—æ¯ä¸ªåœºæ™¯çš„å¸§èŒƒå›´ï¼Œæ¯æ®µéŸ³é¢‘ä¹‹é—´ç•™ 0.2 ç§’é—´éš™ï¼Œæ¯ä¸ªåœºæ™¯é¦–å°¾ç•™ 0.5 ç§’å¡«å……ï¼ŒèŠ‚å¥æ„Ÿå¾ˆå¥½ã€‚å¦‚æœæ–°æ—§æ—¶é•¿åå·®è¶…è¿‡ 20%ï¼Œè¿˜ä¼šè‡ªåŠ¨è­¦å‘Šã€‚</p>
<p>è¿™æ ·å°±èƒ½ä¿è¯éŸ³é¢‘å’ŒåŠ¨ç”»åŒæ­¥ï¼ˆ<code>æœ‰äº›åœºæ™¯è¿˜æ˜¯æ²¡æœ‰å®Œå…¨åŒæ­¥ï¼Œä¸è¿‡é—®é¢˜ä¸å¤§</code>ï¼‰ã€‚</p>
<h4 data-id="heading-9"><strong>è´¨é‡æ£€æŸ¥</strong></h4>
<p>æœ€åæ˜¯è‡ªåŠ¨è´¨é‡æ£€æŸ¥ï¼šä»£ç æ‰«æï¼ˆ<code>æ£€æŸ¥å­—å·ã€é¢œè‰²ã€å®‰å…¨åŒºåŸŸæ˜¯å¦åˆè§„</code>ï¼‰ã€å…³é”®å¸§æˆªå›¾ï¼ˆ<code>æ¸²æŸ“å‡ ä¸ªå…³é”®å¸§åšè§†è§‰æ£€æŸ¥</code>ï¼‰ã€è‡ªåŠ¨ä¿®å¤ã€å¯åŠ¨é¢„è§ˆã€‚</p>
<p>è¿™ä¸ªæµç¨‹å¯ä»¥å¾ªç¯ã€‚å¦‚æœæ£€æŸ¥ä¸é€šè¿‡ï¼ŒAI ä¼šæ ¹æ®æŠ¥å‘Šä¿®å¤ä»£ç ï¼Œç„¶åå†æ£€æŸ¥ï¼Œç›´åˆ°é€šè¿‡ã€‚</p>
<h2 data-id="heading-10">å››ã€å®é™…æ•ˆæœ</h2>
<p>æˆ‘ç”¨è¿™ä¸ªSkillç”Ÿæˆäº†å‡ ä¸ªè§†é¢‘ï¼Œä¸»é¢˜åŒ…æ‹¬"ä¸ºä»€ä¹ˆé£æœºèƒ½é£"ã€"ä¸ºä»€ä¹ˆå¤ªé˜³ä¼šå‘å…‰"ã€"ä¸ºä»€ä¹ˆåœ°çƒæ˜¯åœ†çš„"ã€‚</p>
<p>ä»è¾“å…¥ä¸»é¢˜åˆ°ç”Ÿæˆæˆå“ï¼Œå¤§æ¦‚éœ€è¦ 5-10 åˆ†é’Ÿï¼ŒåŒ…æ‹¬å†™è„šæœ¬ã€è®¾è®¡åˆ†é•œã€ç¼–ç ã€ç”Ÿæˆ TTSã€æ¸²æŸ“è§†é¢‘ã€‚</p>
<p>è§†è§‰é£æ ¼ç¡®å®å¾ˆæ¥è¿‘ Kurzgesagtï¼Œæ‰å¹³åŒ–ã€è‰²å½©é²œè‰³ã€åŠ¨ç”»æµç•…ã€‚é…éŸ³ä¹ŸæŒºè‡ªç„¶ï¼Œå¬ä¸å¤ªå‡ºæ˜¯æœºå™¨åˆæˆçš„ã€‚</p>
<p>ä¸è¶³ä¹Ÿæœ‰ã€‚åŠ¨ç”»ç›®å‰è¿˜æ¯”è¾ƒåŸºç¡€ï¼Œä¸»è¦æ˜¯æ·¡å…¥æ·¡å‡ºã€ç§»åŠ¨ã€ç¼©æ”¾ï¼Œå¤æ‚çš„æµä½“æˆ–ç²’å­æ•ˆæœä¸å¥½åšã€‚è§†è§‰é£æ ¼ä¹Ÿæ¯”è¾ƒå•ä¸€ï¼Œç›®å‰åªåšäº† Kurzgesagt é£æ ¼ã€‚</p>
<p>ä½†å¯¹äº"å¿«é€Ÿç”Ÿæˆä¸€ä¸ªèƒ½çœ‹çš„æ•™è‚²è§†é¢‘"è¿™ä¸ªç›®æ ‡ï¼Œå¤Ÿç”¨äº†ã€‚</p>
<p>è§†é¢‘éƒ¨åˆ†é¢„è§ˆå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2691fc8ac1a44fa18b52f0ce70f1c846~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YyX5p6B55qE5qCR:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770689134&amp;x-signature=w4BSAm5VCocVRF63QmZAJ74hR%2Bg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">å†™åœ¨æœ€å</h2>
<p>åšè¿™ä¸ª Skill çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä¸€ç›´åœ¨æƒ³ä¸€ä¸ªé—®é¢˜ï¼šä»¥å‰åšä¸€ä¸ªç§‘æ™®è§†é¢‘ï¼Œéœ€è¦ç¼–å‰§ã€åŠ¨ç”»å¸ˆã€é…éŸ³å¸ˆã€å‰ªè¾‘å¸ˆï¼Œä¸€ä¸ªå›¢é˜Ÿåä½œå¥½å‡ å¤©ã€‚ç°åœ¨ä¸€ä¸ª AI Agentï¼Œå‡ åˆ†é’Ÿå°±èƒ½è·‘å®Œæ•´ä¸ªæµç¨‹ã€‚</p>
<p>è¿™ä¸ªä¸œè¥¿ä¸åªèƒ½å›ç­”å­©å­çš„é—®é¢˜ã€‚åœ¨çº¿æ•™è‚²ã€ä¼ä¸šåŸ¹è®­ã€äº§å“æ¼”ç¤ºï¼Œä»»ä½•éœ€è¦æŠŠçŸ¥è¯†å¯è§†åŒ–çš„åœºæ™¯ï¼Œéƒ½èƒ½ç”¨ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæœ‰å…´è¶£ï¼Œè¿™ä¸ª Skill ä½œä¸º Claude Code çš„ Agent Skill ä½¿ç”¨ï¼ŒæŠ€æœ¯æ ˆæ˜¯ Remotion + React + TypeScript + Edge TTSã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å­¦ä¹ Three.jsâ€“é£è½¦æ˜Ÿç³»]]></title>    <link>https://juejin.cn/post/7602177588442447891</link>    <guid>https://juejin.cn/post/7602177588442447891</guid>    <pubDate>2026-02-03T02:23:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602177588442447891" data-draft-id="7602177588442431507" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å­¦ä¹ Three.jsâ€“é£è½¦æ˜Ÿç³»"/> <meta itemprop="keywords" content="å‰ç«¯,three.js"/> <meta itemprop="datePublished" content="2026-02-03T02:23:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é€ è½®å­çš„çŒª"/> <meta itemprop="url" content="https://juejin.cn/user/497453720940158"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å­¦ä¹ Three.jsâ€“é£è½¦æ˜Ÿç³»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/497453720940158/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é€ è½®å­çš„çŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:23:43.000Z" title="Tue Feb 03 2026 02:23:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»26åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å­¦ä¹ Three.js--é£è½¦æ˜Ÿç³»</h2>
<h3 data-id="heading-1">å‰ç½®æ ¸å¿ƒè¯´æ˜</h3>
<h4 data-id="heading-2">å¼€å‘ç›®æ ‡</h4>
<p>åŸºäºThree.jsçš„<strong>ç²’å­ç³»ç»Ÿ+è‡ªå®šä¹‰ç€è‰²å™¨</strong>å®ç°çœŸå®æ„ŸM101é£è½¦æ˜Ÿç³»æ•ˆæœï¼Œè¿˜åŸæ˜Ÿç³»çš„æ ¸å¿ƒç»“æ„ä¸è§†è§‰ç‰¹å¾ï¼Œæ ¸å¿ƒèƒ½åŠ›åŒ…æ‹¬ï¼š</p>
<ol>
<li>æ¨¡æ‹Ÿæ˜Ÿç³»åˆ†å±‚ç»“æ„ï¼šæ ¸å¿ƒæ ¸çƒï¼ˆBulgeï¼‰+ èºæ—‹æ—‹è‡‚ï¼ˆSpiral Armsï¼‰ï¼Œè¿˜åŸçœŸå®æ˜Ÿç³»çš„å½¢æ€ï¼›</li>
<li>é‡‡ç”¨å¯¹æ•°èºæ—‹ç®—æ³•ç”Ÿæˆæ—‹è‡‚ï¼Œå®ç°è‡ªç„¶æµç•…çš„é£è½¦çŠ¶èºæ—‹ç»“æ„ï¼Œç¬¦åˆçœŸå®æ˜Ÿç³»çš„æ—‹è‡‚è§„å¾‹ï¼›</li>
<li>ç²’å­åˆ†å±‚å·®å¼‚åŒ–é…ç½®ï¼šæ ¸çƒä¸æ—‹è‡‚ä½¿ç”¨ä¸åŒçš„ç²’å­åˆ†å¸ƒã€é¢œè‰²ã€å°ºå¯¸ï¼Œæ¨¡æ‹ŸçœŸå®æ’æ˜Ÿçš„è§†è§‰å·®å¼‚ï¼›</li>
<li>å€ŸåŠ©<code>ShaderMaterial</code>å®ç°åœ†å½¢æŠ—é”¯é½¿ç²’å­ä¸åŠ æ³•æ··åˆå…‰æ™•ï¼Œæå‡æ˜Ÿç³»çš„ç»†è…»åº¦ä¸çœŸå®æ„Ÿï¼›</li>
<li>å®ç°å¾®å¼±ç²’å­è„‰åŠ¨+æ˜Ÿç³»æ•´ä½“è‡ªè½¬ï¼Œè¥é€ åŠ¨æ€çš„å®‡å®™æ˜Ÿç³»æ°›å›´ï¼Œæ”¯æŒè½¨é“äº¤äº’æŸ¥çœ‹ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7d915053fe454292a06df426c8fe3a29~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6YCg6L2u5a2Q55qE54yq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690223&amp;x-signature=vGVePiqZjurv%2BM%2FbFTGwVaRmcgE%3D" alt="606115fd-7227-41f4-993b-02b6592919ab.png" loading="lazy"/></p>
<h4 data-id="heading-3">æ ¸å¿ƒæŠ€æœ¯æ ˆï¼ˆå…³é”®çŸ¥è¯†ç‚¹ï¼‰</h4>





































<table><thead><tr><th>æŠ€æœ¯ç‚¹</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td><code>THREE.BufferGeometry</code> + è‡ªå®šä¹‰<code>attribute</code></td><td>é«˜æ•ˆå­˜å‚¨10ä¸‡çº§ç²’å­æ•°æ®ï¼ˆé¡¶ç‚¹ã€é¢œè‰²ã€å°ºå¯¸ï¼‰ï¼Œä¸ºæ¯ä¸ªç²’å­æä¾›ç‹¬ç«‹å±æ€§ï¼Œæ”¯æ’‘åˆ†å±‚å·®å¼‚åŒ–æ•ˆæœ</td></tr><tr><td>å¯¹æ•°èºæ—‹å…¬å¼ï¼ˆ<code>r = a * e^(b*Î¸)</code>ï¼‰</td><td>ç”Ÿæˆè‡ªç„¶æµç•…çš„æ˜Ÿç³»æ—‹è‡‚ï¼Œå®ç°é£è½¦çŠ¶èºæ—‹ç»“æ„ï¼Œæ˜¯æ¨¡æ‹Ÿèºæ—‹æ˜Ÿç³»çš„æ ¸å¿ƒç®—æ³•</td></tr><tr><td>ç²’å­åˆ†å±‚ç”Ÿæˆç­–ç•¥ï¼ˆæ ¸çƒ+æ—‹è‡‚ï¼‰</td><td>ä¸åŒåŒºåŸŸé‡‡ç”¨ä¸åŒçš„åˆ†å¸ƒé€»è¾‘ã€è§†è§‰å‚æ•°ï¼Œè¿˜åŸæ˜Ÿç³»çš„çœŸå®åˆ†å±‚ç»“æ„ï¼Œæå‡åœºæ™¯çœŸå®æ„Ÿ</td></tr><tr><td><code>THREE.ShaderMaterial</code>ï¼ˆé¡¶ç‚¹/ç‰‡å…ƒç€è‰²å™¨ï¼‰</td><td>1.  å®ç°åœ†å½¢æŠ—é”¯é½¿ç²’å­ï¼Œæ›¿ä»£é»˜è®¤æ–¹å½¢ç²’å­ï¼›2.  ä¼ é€’ç²’å­ç‹¬ç«‹é¢œè‰²/å°ºå¯¸ï¼Œå®ç°å·®å¼‚åŒ–è§†è§‰ï¼›3.  å®ç°å¾®å¼±è„‰åŠ¨åŠ¨ç”»ï¼Œå…¼é¡¾æ€§èƒ½ä¸æ•ˆæœ</td></tr><tr><td><code>THREE.AdditiveBlending</code>ï¼ˆåŠ æ³•æ··åˆï¼‰</td><td>ç²’å­é¢œè‰²äº®åº¦å åŠ ï¼Œè¥é€ æ˜Ÿç³»çš„æœ¦èƒ§å…‰æ™•æ„Ÿï¼Œæå‡æ—‹è‡‚ä¸æ ¸çƒçš„å±‚æ¬¡æ„Ÿï¼Œæ¨¡æ‹Ÿå®‡å®™æ˜Ÿå°˜çš„å‘å…‰æ•ˆæœ</td></tr><tr><td>æ˜Ÿç³»åŒåŠ¨ç”»é€»è¾‘ï¼ˆç²’å­è„‰åŠ¨+æ•´ä½“è‡ªè½¬ï¼‰</td><td>å¾®è§‚ç²’å­å¾®å¼±è„‰åŠ¨+å®è§‚æ˜Ÿç³»ç¼“æ…¢è‡ªè½¬ï¼Œè¥é€ åŠ¨æ€ä¸”çœŸå®çš„å®‡å®™æ°›å›´ï¼Œé¿å…åœºæ™¯é™æ€ç”Ÿç¡¬</td></tr><tr><td><code>THREE.OrbitControls</code>ï¼ˆè½¨é“æ§åˆ¶å™¨ï¼‰</td><td>æ”¯æŒæ‹–æ‹½æ—‹è½¬/æ»šè½®ç¼©æ”¾ï¼Œå…¨æ–¹ä½æŸ¥çœ‹3Dæ˜Ÿç³»ç»“æ„ï¼Œä¾¿æ·è§‚å¯Ÿæ—‹è‡‚ä¸æ ¸çƒçš„ç»†èŠ‚</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-4">åˆ†æ­¥å¼€å‘è¯¦è§£</h3>
<h4 data-id="heading-5">æ­¥éª¤1ï¼šåŸºç¡€ç¯å¢ƒæ­å»ºï¼ˆåœºæ™¯/ç›¸æœº/æ¸²æŸ“å™¨/æ§åˆ¶å™¨ï¼‰</h4>
<p>æ­å»ºThree.js 3Dåœºæ™¯çš„åŸºç¡€æ¡†æ¶ï¼Œä¸ºæ˜Ÿç³»æä¾›å±•ç¤ºè½½ä½“ï¼Œä¿è¯åœºæ™¯çš„æµç•…äº¤äº’ä¸é«˜æ¸…æ¸²æŸ“ã€‚</p>
<h5 data-id="heading-6">1.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å…¥Three.jsæ ¸å¿ƒåº“ä¸è½¨é“æ§åˆ¶å™¨</span>
<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0/examples/jsm/controls/OrbitControls.js'</span>;

<span class="hljs-comment">// 1. åœºæ™¯åˆå§‹åŒ–ï¼ˆçº¯é»‘èƒŒæ™¯ï¼Œæœ€å¤§åŒ–è¡¬æ‰˜æ˜Ÿç³»çš„å…‰æ™•æ•ˆæœï¼Œæ¨¡æ‹Ÿå®‡å®™çœŸç©ºç¯å¢ƒï¼‰</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

<span class="hljs-comment">// 2. é€è§†ç›¸æœºï¼ˆé€‚é…3Dæ˜Ÿç³»åœºæ™¯ï¼Œå…¼é¡¾æ ¸çƒç»†èŠ‚ä¸æ—‹è‡‚æ•´ä½“æŸ¥çœ‹ï¼‰</span>
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(
  <span class="hljs-number">60</span>, <span class="hljs-comment">// è§†è§’ï¼ˆFOVï¼‰ï¼š60Â°è§†é‡é€‚ä¸­ï¼Œæ— æ˜Ÿç³»å˜å½¢</span>
  innerWidth / innerHeight, <span class="hljs-comment">// å®½é«˜æ¯”ï¼šé€‚é…æµè§ˆå™¨çª—å£</span>
  <span class="hljs-number">0.1</span>, <span class="hljs-comment">// è¿‘è£åˆ‡é¢ï¼šè¿‡æ»¤è¿‡è¿‘æ— æ•ˆå¯¹è±¡ï¼Œæå‡æ€§èƒ½</span>
  <span class="hljs-number">2000</span> <span class="hljs-comment">// è¿œè£åˆ‡é¢ï¼šä¿è¯æ˜Ÿç³»å®Œæ•´å¤„äºå¯è§èŒƒå›´ï¼Œæ”¯æŒè¿œè·ç¦»ç¼©æ”¾æŸ¥çœ‹</span>
);
camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">80</span>); <span class="hljs-comment">// é«˜ä½ä¾§è§†ï¼šæ—¢æ¸…æ™°æŸ¥çœ‹æ—‹è‡‚çš„é£è½¦ç»“æ„ï¼Œåˆèƒ½è§‚å¯Ÿæ ¸çƒç»†èŠ‚</span>

<span class="hljs-comment">// 3. æ¸²æŸ“å™¨ï¼ˆæŠ—é”¯é½¿ï¼Œæå‡æ˜Ÿç³»ç²’å­è¾¹ç¼˜ç»†è…»åº¦ï¼Œé¿å…å…‰æ™•é”¯é½¿æ„Ÿï¼‰</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>); <span class="hljs-comment">// é«˜æ¸…é€‚é…ï¼šRetinaå±å¹•æ— æ¨¡ç³Š</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// 4. è½¨é“æ§åˆ¶å™¨ï¼ˆæ”¯æŒæ‹–æ‹½æ—‹è½¬/æ»šè½®ç¼©æ”¾ï¼Œä¾¿æ·æŸ¥çœ‹3Dæ˜Ÿç³»ç»“æ„ï¼‰</span>
<span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>; <span class="hljs-comment">// å¯ç”¨é˜»å°¼ï¼šæ‹–æ‹½æ—‹è½¬æœ‰æƒ¯æ€§ï¼Œäº¤äº’æ›´é¡ºæ»‘è‡ªç„¶</span>
</code></pre>
<h5 data-id="heading-7">1.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong>ç›¸æœºä½ç½®</strong>ï¼š<code>(0, 20, 80)</code> é‡‡ç”¨ã€Œé«˜ä½+ç¨è¿œã€è§†è§’ï¼Œæ—¢å¯ä»¥å®Œæ•´æ•æ‰é£è½¦æ˜Ÿç³»çš„4æ¡æ—‹è‡‚ç»“æ„ï¼Œåˆèƒ½æ¸…æ™°è§‚å¯Ÿæ ¸å¿ƒæ ¸çƒçš„ç»†èŠ‚ï¼Œé¿å…è§†è§’è¿‡è¿‘å¯¼è‡´æ—‹è‡‚å˜å½¢ã€å…‰æ™•è¿‡æ›ã€‚</li>
<li><strong>æ¸²æŸ“å™¨<code>antialias: true</code></strong>ï¼šå¼€å¯æŠ—é”¯é½¿ï¼Œé…åˆåç»­ç‰‡å…ƒç€è‰²å™¨çš„<code>smoothstep</code>æŠ—é”¯é½¿é€»è¾‘ï¼Œè®©æ˜Ÿç³»ç²’å­çš„è¾¹ç¼˜å’Œå…‰æ™•æ›´ç»†è…»ï¼Œè¿™å¯¹æ˜äº®çš„æ ¸çƒä¸æ—‹è‡‚å°¤ä¸ºé‡è¦ã€‚</li>
<li><strong>æ§åˆ¶å™¨é˜»å°¼</strong>ï¼šå¯ç”¨é˜»å°¼åï¼Œäº¤äº’ä½“éªŒæ›´è´´è¿‘çœŸå®3Dåœºæ™¯ï¼Œé€‚åˆé•¿æ—¶é—´æŸ¥çœ‹æ˜Ÿç³»çš„è‡ªè½¬ä¸è„‰åŠ¨æ•ˆæœï¼Œé¿å…æ‹–æ‹½åç¬é—´åœæ­¢çš„ç”Ÿç¡¬æ„Ÿã€‚</li>
</ul>
<h4 data-id="heading-8">æ­¥éª¤2ï¼šç²’å­æ•°æ®åˆ†å±‚ç”Ÿæˆï¼ˆæ ¸çƒ+æ—‹è‡‚ï¼Œæ˜Ÿç³»æ ¸å¿ƒå½¢æ€å®ç°ï¼‰</h4>
<p>è¿™æ˜¯é£è½¦æ˜Ÿç³»çš„æ ¸å¿ƒæ­¥éª¤ï¼Œé‡‡ç”¨<strong>åˆ†å±‚ç”Ÿæˆç­–ç•¥</strong>ï¼Œåˆ†åˆ«ç”Ÿæˆæ ¸çƒä¸æ—‹è‡‚çš„ç²’å­æ•°æ®ï¼Œé€šè¿‡ä¸åŒçš„åˆ†å¸ƒé€»è¾‘ã€é¢œè‰²ã€å°ºå¯¸ï¼Œè¿˜åŸæ˜Ÿç³»çš„çœŸå®ç»“æ„ï¼Œå…¶ä¸­å¯¹æ•°èºæ—‹ç®—æ³•æ˜¯æ—‹è‡‚å®ç°çš„å…³é”®ã€‚</p>
<h5 data-id="heading-9">2.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åˆå§‹åŒ–ç²’å­æ•°æ®æ•°ç»„ï¼ˆé›†ä¸­å­˜å‚¨ï¼Œåç»­ç»‘å®šåˆ°BufferGeometryï¼‰</span>
<span class="hljs-keyword">const</span> pointsArr = []; <span class="hljs-comment">// ç²’å­é¡¶ç‚¹åæ ‡æ•°ç»„</span>
<span class="hljs-keyword">const</span> colors = []; <span class="hljs-comment">// ç²’å­é¢œè‰²æ•°ç»„ï¼ˆæ¯ä¸ªç²’å­ç‹¬ç«‹é¢œè‰²ï¼Œå®ç°åˆ†å±‚è§†è§‰å·®å¼‚ï¼‰</span>
<span class="hljs-keyword">const</span> sizes = []; <span class="hljs-comment">// ç²’å­å°ºå¯¸æ•°ç»„ï¼ˆæ¯ä¸ªç²’å­ç‹¬ç«‹å°ºå¯¸ï¼Œæå‡æ˜Ÿç³»ç»†è…»åº¦ï¼‰</span>

<span class="hljs-comment">// ---- åˆ†å±‚1ï¼šæ ¸çƒï¼ˆBulgeï¼‰- æ˜Ÿç³»ä¸­å¿ƒå¯†é›†åŒºåŸŸï¼Œæ¨¡æ‹Ÿè€å¹´æ’æ˜Ÿé›†ç¾¤ ---- </span>
<span class="hljs-keyword">const</span> bulgeCount = <span class="hljs-number">8000</span>; <span class="hljs-comment">// æ ¸çƒç²’å­æ•°ï¼ˆ8000ï¼Œä¿è¯å¯†é›†åº¦ä¸”ä¸å¡é¡¿ï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bulgeCount; i++) {
  <span class="hljs-comment">// å¹‚æ¬¡é‡‡æ ·ï¼ˆMath.pow(Math.random(), 3)ï¼‰ï¼šè®©ç²’å­é«˜åº¦é›†ä¸­åœ¨ä¸­å¿ƒï¼Œæ¨¡æ‹ŸçœŸå®æ ¸çƒçš„æ’æ˜Ÿåˆ†å¸ƒ</span>
  <span class="hljs-comment">// 3æ¬¡æ–¹è®©éšæœºå€¼æ›´åå‘0ï¼Œç²’å­å¯†é›†åœ¨ä¸­å¿ƒåŒºåŸŸï¼Œå¤–å±‚é€æ¸ç¨€ç–</span>
  <span class="hljs-keyword">const</span> radius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(), <span class="hljs-number">3</span>) * <span class="hljs-number">6</span>; 
  <span class="hljs-comment">// éšæœºæ–¹å‘ç”Ÿæˆç‚¹ï¼Œå†ä¹˜ä»¥åŠå¾„ï¼Œå¾—åˆ°æ ¸çƒå†…çš„å‡åŒ€åˆ†å¸ƒç²’å­</span>
  <span class="hljs-keyword">const</span> point = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>().<span class="hljs-title function_">randomDirection</span>().<span class="hljs-title function_">multiplyScalar</span>(radius);
  pointsArr.<span class="hljs-title function_">push</span>(point);

  <span class="hljs-comment">// æ ¸çƒé¢œè‰²ï¼šé»„ç™½è‰²ï¼ˆæ¨¡æ‹Ÿè€å¹´æ’æ˜Ÿï¼Œäº®åº¦é«˜ã€åæš–è‰²è°ƒï¼‰</span>
  colors.<span class="hljs-title function_">push</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.7</span>);
  <span class="hljs-comment">// æ ¸çƒç²’å­å°ºå¯¸ï¼š0.2~1.0ï¼Œè¾ƒå°ä¸”å¯†é›†ï¼Œä½“ç°æ ¸çƒçš„ç´§å‡‘æ„Ÿ</span>
  sizes.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.8</span> + <span class="hljs-number">0.2</span>);
}

<span class="hljs-comment">// ---- åˆ†å±‚2ï¼šæ—‹è‡‚ï¼ˆSpiral Armsï¼‰- é£è½¦çŠ¶èºæ—‹ç»“æ„ï¼Œæ¨¡æ‹Ÿæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘ ----</span>
<span class="hljs-keyword">const</span> armCount = <span class="hljs-number">92000</span>; <span class="hljs-comment">// æ—‹è‡‚ç²’å­æ•°ï¼ˆ92000ï¼Œä¿è¯æ—‹è‡‚çš„ç»†è…»åº¦ä¸æµç•…æ„Ÿï¼‰</span>
<span class="hljs-keyword">const</span> arms = <span class="hljs-number">4</span>; <span class="hljs-comment">// æ—‹è‡‚æ•°é‡ï¼š4æ¡ï¼Œè¿˜åŸM101é£è½¦æ˜Ÿç³»çš„ç»å…¸å½¢æ€</span>
<span class="hljs-keyword">const</span> armSpread = <span class="hljs-number">0.4</span>; <span class="hljs-comment">// æ—‹è‡‚æ¾ç´§åº¦ï¼ˆè¶Šå°è¶Šç´§ï¼Œè¶Šå¤§è¶Šæ¾æ•£ï¼‰</span>
<span class="hljs-keyword">const</span> maxRadius = <span class="hljs-number">60</span>; <span class="hljs-comment">// æ—‹è‡‚æœ€å¤§åŠå¾„ï¼Œå†³å®šæ˜Ÿç³»çš„æ•´ä½“å¤§å°</span>

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; armCount; i++) {
  <span class="hljs-comment">// éšæœºåˆ†é…æ—‹è‡‚ï¼Œä¿è¯4æ¡æ—‹è‡‚çš„ç²’å­åˆ†å¸ƒå‡åŒ€</span>
  <span class="hljs-keyword">const</span> armIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * arms);
  <span class="hljs-comment">// æ—‹è‡‚è§’åº¦åç§»ï¼šè®©4æ¡æ—‹è‡‚å‡åŒ€åˆ†å¸ƒåœ¨360Â°èŒƒå›´å†…ï¼Œæ— é‡å </span>
  <span class="hljs-keyword">const</span> angleOffset = (armIndex / arms) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;

  <span class="hljs-comment">// æ ¸å¿ƒç®—æ³•ï¼šå¯¹æ•°èºæ—‹ï¼ˆr = a * e^(b*Î¸)ï¼‰ï¼Œç”Ÿæˆè‡ªç„¶æµç•…çš„èºæ—‹ç»“æ„</span>
  <span class="hljs-keyword">const</span> theta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">8</span>; <span class="hljs-comment">// èºæ—‹è§’åº¦ï¼š8Ï€å¯¹åº”4åœˆï¼Œä¿è¯æ—‹è‡‚çš„é•¿åº¦ä¸æµç•…åº¦</span>
  <span class="hljs-comment">// å½’ä¸€åŒ–è®¡ç®—èºæ—‹åŠå¾„ï¼Œè®©æ—‹è‡‚åˆšå¥½å»¶ä¼¸åˆ°maxRadiusï¼Œé¿å…è¶…å‡ºè¾¹ç•Œ</span>
  <span class="hljs-keyword">const</span> radius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(theta * armSpread) * (maxRadius / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">8</span> * armSpread));
  
  <span class="hljs-comment">// å¾„å‘æ‰°åŠ¨ï¼šè®©æ—‹è‡‚æœ‰â€œå®½åº¦â€ï¼Œé¿å…æ—‹è‡‚è¿‡äºçº¤ç»†ã€ç”Ÿç¡¬ï¼Œæ¨¡æ‹ŸçœŸå®æ—‹è‡‚çš„åšåº¦</span>
  <span class="hljs-keyword">const</span> radialJitter = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">3</span>;
  <span class="hljs-keyword">const</span> finalRadius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(radius + radialJitter, maxRadius); <span class="hljs-comment">// é™åˆ¶æœ€å¤§åŠå¾„ï¼Œé¿å…ç²’å­è¶…å‡ºæ˜Ÿç³»èŒƒå›´</span>

  <span class="hljs-comment">// è§’åº¦æ‰°åŠ¨ï¼šè®©æ—‹è‡‚çš„ç²’å­åˆ†å¸ƒæ›´è‡ªç„¶ï¼Œé¿å…èºæ—‹çº¿è¿‡äºè§„æ•´ï¼Œæå‡çœŸå®æ„Ÿ</span>
  <span class="hljs-keyword">const</span> angle = theta + angleOffset + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">0.3</span>;
  <span class="hljs-comment">// æ—‹è‡‚é«˜åº¦ï¼š-1~1ï¼Œå½¢æˆè–„ç›˜ç»“æ„ï¼Œæ¨¡æ‹ŸçœŸå®æ˜Ÿç³»çš„æ—‹è‡‚å¹³é¢ç‰¹æ€§</span>
  <span class="hljs-keyword">const</span> height = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2</span>;

  <span class="hljs-comment">// ä»æåæ ‡è½¬æ¢ä¸ºç›´è§’åæ ‡ï¼Œç”Ÿæˆæ—‹è‡‚ç²’å­çš„åæ ‡</span>
  <span class="hljs-keyword">const</span> x = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle) * finalRadius;
  <span class="hljs-keyword">const</span> z = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle) * finalRadius;
  pointsArr.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(x, height, z));

  <span class="hljs-comment">// æ—‹è‡‚é¢œè‰²ï¼šè“ç™½è‰²ï¼ˆæ¨¡æ‹Ÿæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘ï¼Œåå†·è‰²è°ƒï¼Œä¸æ ¸çƒå½¢æˆè§†è§‰å·®å¼‚ï¼‰</span>
  colors.<span class="hljs-title function_">push</span>(<span class="hljs-number">0.7</span>, <span class="hljs-number">0.85</span>, <span class="hljs-number">1.0</span>);
  <span class="hljs-comment">// æ—‹è‡‚ç²’å­å°ºå¯¸ï¼š0.3~1.5ï¼Œæ¯”æ ¸çƒç¨å¤§ï¼Œä½“ç°æ—‹è‡‚çš„è§†è§‰å±‚æ¬¡æ„Ÿ</span>
  sizes.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1.2</span> + <span class="hljs-number">0.3</span>);
}
</code></pre>
<h5 data-id="heading-10">2.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ol>
<li>
<p><strong>ç²’å­åˆ†å±‚ç”Ÿæˆç­–ç•¥ï¼ˆæ ¸çƒvsæ—‹è‡‚ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>æ ¸çƒ</strong>ï¼šé‡‡ç”¨<code>randomDirection()</code>+å¹‚æ¬¡é‡‡æ ·ï¼Œç²’å­é«˜åº¦é›†ä¸­åœ¨ä¸­å¿ƒï¼Œé¢œè‰²ä¸ºé»„ç™½è‰²ï¼ˆè€å¹´æ’æ˜Ÿï¼‰ï¼Œå°ºå¯¸è¾ƒå°ä¸”å¯†é›†ï¼Œä½“ç°æ ¸çƒçš„ç´§å‡‘ã€æ¸©æš–ã€æ˜äº®çš„ç‰¹æ€§ï¼›</li>
<li><strong>æ—‹è‡‚</strong>ï¼šé‡‡ç”¨å¯¹æ•°èºæ—‹ç®—æ³•ï¼Œç²’å­æ²¿èºæ—‹çº¿åˆ†å¸ƒï¼Œé¢œè‰²ä¸ºè“ç™½è‰²ï¼ˆæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘ï¼‰ï¼Œå°ºå¯¸ç¨å¤§ä¸”æœ‰åšåº¦ï¼Œä½“ç°æ—‹è‡‚çš„èˆ’å±•ã€å†·è‰³ã€æœ‰å±‚æ¬¡çš„ç‰¹æ€§ï¼›</li>
<li>åˆ†å±‚è®¾è®¡çš„æ ¸å¿ƒæ˜¯<strong>è¿˜åŸçœŸå®æ˜Ÿç³»çš„ç»“æ„å·®å¼‚</strong>ï¼Œé€šè¿‡è§†è§‰å‚æ•°ï¼ˆé¢œè‰²ã€å°ºå¯¸ï¼‰ä¸åˆ†å¸ƒé€»è¾‘çš„ä¸åŒï¼Œè®©æ˜Ÿç³»æ›´å…·çœŸå®æ„Ÿã€‚</li>
</ul>
</li>
<li>
<p><strong>å¯¹æ•°èºæ—‹ç®—æ³•ï¼ˆæ—‹è‡‚å®ç°çš„æ ¸å¿ƒï¼‰</strong>ï¼š</p>
<ul>
<li>å…¬å¼ï¼š<code>r = a * e^(b*Î¸)</code>ï¼Œå…¶ä¸­<code>r</code>ä¸ºèºæ—‹åŠå¾„ï¼Œ<code>Î¸</code>ä¸ºèºæ—‹è§’åº¦ï¼Œ<code>b</code>ä¸ºèºæ—‹æ¾ç´§åº¦ï¼ˆå¯¹åº”ä»£ç ä¸­çš„<code>armSpread</code>ï¼‰ï¼Œ<code>a</code>ä¸ºæ¯”ä¾‹ç³»æ•°ï¼›</li>
<li>ä»£ç ä¸­é€šè¿‡<code>Math.exp(theta * armSpread)</code>è®¡ç®—èºæ—‹åŠå¾„ï¼Œå†é€šè¿‡å½’ä¸€åŒ–å¤„ç†è®©æ—‹è‡‚åˆšå¥½å»¶ä¼¸åˆ°<code>maxRadius</code>ï¼Œé¿å…è¶…å‡ºè¾¹ç•Œï¼›</li>
<li><code>armSpread</code>è¶Šå°ï¼Œèºæ—‹è¶Šç´§å‡‘ï¼Œæ—‹è‡‚è¶Šâ€œå·â€ï¼›è¶Šå¤§ï¼Œèºæ—‹è¶Šæ¾æ•£ï¼Œæ—‹è‡‚è¶Šâ€œèˆ’å±•â€ï¼Œè¿™æ˜¯è°ƒæ•´æ—‹è‡‚å½¢æ€çš„æ ¸å¿ƒå‚æ•°ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ‰°åŠ¨ä¼˜åŒ–ï¼ˆæ—‹è‡‚çœŸå®æ„Ÿæå‡ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>å¾„å‘æ‰°åŠ¨</strong>ï¼š<code>radialJitter</code>è®©ç²’å­åœ¨åŠå¾„æ–¹å‘æœ‰è½»å¾®åç§»ï¼Œå½¢æˆæ—‹è‡‚çš„â€œå®½åº¦â€ï¼Œé¿å…æ—‹è‡‚æˆä¸ºä¸€æ¡çº¤ç»†çš„çº¿ï¼›</li>
<li><strong>è§’åº¦æ‰°åŠ¨</strong>ï¼šè®©ç²’å­åœ¨èºæ—‹è§’åº¦ä¸Šæœ‰è½»å¾®åç§»ï¼Œé¿å…æ—‹è‡‚çš„èºæ—‹çº¿è¿‡äºè§„æ•´ï¼Œæ¨¡æ‹ŸçœŸå®æ˜Ÿç³»æ—‹è‡‚çš„ä¸è§„åˆ™æ€§ï¼›</li>
<li><strong>é«˜åº¦é™åˆ¶</strong>ï¼šæ—‹è‡‚ç²’å­çš„Yè½´é«˜åº¦é™åˆ¶åœ¨<code>-1~1</code>ï¼Œå½¢æˆè–„ç›˜ç»“æ„ï¼Œç¬¦åˆçœŸå®æ˜Ÿç³»æ—‹è‡‚çš„å¹³é¢ç‰¹æ€§ï¼Œé¿å…æ—‹è‡‚å‘ˆç°ç«‹ä½“çƒçŠ¶ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-11">æ­¥éª¤3ï¼šæ„å»ºBufferGeometryï¼ˆç»‘å®šç²’å­æ•°æ®ï¼Œæ”¯æ’‘ç€è‰²å™¨æ¸²æŸ“ï¼‰</h4>
<p>å°†æ­¥éª¤2ç”Ÿæˆçš„ç²’å­æ•°æ®ï¼ˆé¡¶ç‚¹ã€é¢œè‰²ã€å°ºå¯¸ï¼‰ç»‘å®šåˆ°<code>BufferGeometry</code>ï¼Œå¹¶é€šè¿‡è‡ªå®šä¹‰<code>attribute</code>å‘ç€è‰²å™¨ä¼ é€’ç²’å­çš„ç‹¬ç«‹é¢œè‰²ä¸å°ºå¯¸ï¼Œä¸ºåç»­ç€è‰²å™¨æ¸²æŸ“æä¾›æ•°æ®æ”¯æ’‘ã€‚</p>
<h5 data-id="heading-12">3.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// 1. æ„å»ºBufferGeometryï¼Œç»‘å®šç²’å­é¡¶ç‚¹åæ ‡ï¼ˆæ˜Ÿç³»ç²’å­çš„åŸºç¡€ä½ç½®æ•°æ®ï¼‰</span>
<span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>().<span class="hljs-title function_">setFromPoints</span>(pointsArr);

<span class="hljs-comment">// 2. æ·»åŠ è‡ªå®šä¹‰attributeï¼šcolorï¼ˆç²’å­é¢œè‰²ï¼Œæ¯ä¸ªç²’å­3ä¸ªåˆ†é‡ï¼šR/G/Bï¼‰</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ã€Œ3ã€è¡¨ç¤ºæ¯ä¸ªé¡¶ç‚¹çš„åˆ†é‡æ•°ä¸º3ï¼Œä¸colorsæ•°ç»„çš„æ¯3ä¸ªå…ƒç´ å¯¹åº”ä¸€ä¸ªç²’å­</span>
geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'color'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(colors, <span class="hljs-number">3</span>));

<span class="hljs-comment">// 3. æ·»åŠ è‡ªå®šä¹‰attributeï¼šsizeï¼ˆç²’å­å°ºå¯¸ï¼Œæ¯ä¸ªç²’å­1ä¸ªå€¼ï¼‰</span>
<span class="hljs-comment">// ç¬¬äºŒä¸ªå‚æ•°ã€Œ1ã€è¡¨ç¤ºæ¯ä¸ªé¡¶ç‚¹çš„åˆ†é‡æ•°ä¸º1ï¼Œä¸sizesæ•°ç»„çš„æ¯ä¸ªå…ƒç´ ä¸€ä¸€å¯¹åº”</span>
geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'size'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(sizes, <span class="hljs-number">1</span>));
</code></pre>
<h5 data-id="heading-13">3.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ul>
<li><strong><code>BufferGeometry</code>çš„é«˜æ•ˆæ€§</strong>ï¼šç›´æ¥æ“ä½œäºŒè¿›åˆ¶æ•°ç»„å­˜å‚¨æ•°æ®ï¼Œæ¸²æŸ“æ—¶å‡å°‘CPUä¸GPUä¹‹é—´çš„æ•°æ®ä¼ è¾“å¼€é”€ï¼Œé€‚åˆ10ä¸‡çº§ç²’å­åœºæ™¯ï¼ˆæœ¬æ¬¡æ€»ç²’å­æ•°10ä¸‡ï¼‰ï¼Œæ€§èƒ½è¿œä¼˜äºå·²è¢«åºŸå¼ƒçš„æ™®é€š<code>Geometry</code>ã€‚</li>
<li><strong>è‡ªå®šä¹‰<code>attribute</code>çš„æ ¸å¿ƒä½œç”¨</strong>ï¼šå‘ç€è‰²å™¨ä¼ é€’ã€Œæ¯ä¸ªç²’å­çš„ç‹¬ç«‹æ•°æ®ã€ï¼Œæœ¬æ¬¡ä¼ é€’äº†<code>color</code>ï¼ˆé¢œè‰²ï¼‰ä¸<code>size</code>ï¼ˆå°ºå¯¸ï¼‰ï¼Œè®©ç€è‰²å™¨èƒ½å¤Ÿä¸ºæ¯ä¸ªç²’å­æ¸²æŸ“ä¸åŒçš„é¢œè‰²ä¸å°ºå¯¸ï¼Œå®ç°æ˜Ÿç³»çš„åˆ†å±‚è§†è§‰å·®å¼‚ã€‚</li>
<li><strong><code>Float32BufferAttribute</code></strong>ï¼šæœ€å¸¸ç”¨çš„BufferAttributeç±»å‹ï¼Œå­˜å‚¨32ä½æµ®ç‚¹å‹æ•°æ®ï¼Œå…¼é¡¾ç²¾åº¦ä¸æ€§èƒ½ï¼Œé€‚åˆä¼ é€’ç²’å­é¢œè‰²ã€å°ºå¯¸ç­‰æ•°æ®ï¼Œç€è‰²å™¨ä¸­éœ€å£°æ˜åŒå<code>attribute</code>å˜é‡æ‰èƒ½è®¿é—®å¯¹åº”æ•°æ®ã€‚</li>
</ul>
<h4 data-id="heading-14">æ­¥éª¤4ï¼šåˆ›å»ºè‡ªå®šä¹‰ShaderMaterialï¼ˆæ˜Ÿç³»è§†è§‰æ•ˆæœçš„æ ¸å¿ƒï¼‰</h4>
<p>é€šè¿‡<code>ShaderMaterial</code>è‡ªå®šä¹‰é¡¶ç‚¹ç€è‰²å™¨ä¸ç‰‡å…ƒç€è‰²å™¨ï¼Œå®ç°åœ†å½¢æŠ—é”¯é½¿ç²’å­ã€ç²’å­ç‹¬ç«‹é¢œè‰²/å°ºå¯¸æ¸²æŸ“ã€å¾®å¼±è„‰åŠ¨åŠ¨ç”»ï¼ŒåŒæ—¶é€šè¿‡åŠ æ³•æ··åˆè¥é€ æ˜Ÿç³»çš„æœ¦èƒ§å…‰æ™•ï¼Œæå‡çœŸå®æ„Ÿã€‚</p>
<h5 data-id="heading-15">4.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ„å»ºShaderMaterialï¼Œé…ç½®å…¨å±€uniformså’Œç€è‰²å™¨ï¼Œå®ç°æ˜Ÿç³»çš„æ ¸å¿ƒè§†è§‰æ•ˆæœ</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
  <span class="hljs-comment">// 1. å…¨å±€uniformsï¼ˆå‘ç€è‰²å™¨ä¼ é€’å…¨å±€ç»Ÿä¸€æ•°æ®ï¼Œæ­¤å¤„ä¸ºæ—¶é—´ï¼Œé©±åŠ¨è„‰åŠ¨åŠ¨ç”»ï¼‰</span>
  <span class="hljs-attr">uniforms</span>: {
    <span class="hljs-attr">uTime</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> } <span class="hljs-comment">// å…¨å±€æ—¶é—´ï¼šé©±åŠ¨æ‰€æœ‰ç²’å­çš„è„‰åŠ¨åŠ¨ç”»åŒæ­¥æ›´æ–°</span>
  },

  <span class="hljs-comment">// 2. é¡¶ç‚¹ç€è‰²å™¨ï¼ˆå¤„ç†ç²’å­ä½ç½®ã€é¢œè‰²ã€å°ºå¯¸ï¼Œå®ç°å¾®å¼±è„‰åŠ¨ä¸é€è§†å˜æ¢ï¼‰</span>
  <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
    uniform float uTime;
    attribute vec3 color; // ç²’å­é¢œè‰²ï¼ˆè‡ªå®šä¹‰attributeï¼Œæ¯ä¸ªç²’å­ç‹¬ç«‹ï¼‰
    attribute float size; // ç²’å­å°ºå¯¸ï¼ˆè‡ªå®šä¹‰attributeï¼Œæ¯ä¸ªç²’å­ç‹¬ç«‹ï¼‰
    varying vec3 vColor; // ä¼ é€’ç»™ç‰‡å…ƒç€è‰²å™¨çš„é¢œè‰²ï¼ˆvaryingå˜é‡ï¼Œå®ç°å¹³æ»‘æ’å€¼ï¼‰

    void main() {
      vec3 pos = position;

      // å¾®å¼±è„‰åŠ¨åŠ¨ç”»ï¼šåŸºäºç²’å­è·ç¦»ä¸æ—¶é—´çš„çƒé¢æ‰°åŠ¨ï¼Œæå‡æ˜Ÿç³»çš„åŠ¨æ€æ„Ÿ
      // sinå‡½æ•°å®ç°å‘¨æœŸæ€§è„‰åŠ¨ï¼Œ0.1ä¸ºè„‰åŠ¨å¹…åº¦ï¼Œé¿å…è¿‡äºå‰§çƒˆå½±å“æ˜Ÿç³»å½¢æ€
      float pulse = sin(uTime * 0.5 + length(pos)) * 0.1;
      pos += normalize(pos) * pulse; // æ²¿ç²’å­å¾„å‘è„‰åŠ¨ï¼Œä¿æŒæ˜Ÿç³»æ•´ä½“å½¢æ€ä¸å˜

      // é€è§†å˜æ¢ï¼šå°†3Dç²’å­åæ ‡è½¬æ¢ä¸º2Då±å¹•åæ ‡ï¼Œ3Dæ¸²æŸ“å¿…å¤‡
      vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0); // æ¨¡å‹è§†å›¾çŸ©é˜µï¼šå±€éƒ¨åæ ‡â†’ç›¸æœºè§†è§’åæ ‡
      gl_Position = projectionMatrix * mvPosition; // æŠ•å½±çŸ©é˜µï¼šç›¸æœºè§†è§’åæ ‡â†’å±å¹•è£å‰ªåæ ‡

      // ç²’å­å°ºå¯¸è®¡ç®—ï¼šé€è§†ç¼©æ”¾ï¼ˆè¿‘å¤§è¿œå°ï¼‰ï¼Œå®ç°çœŸå®çš„3Dè§†è§‰æ•ˆæœ
      gl_PointSize = size * (80.0 / -mvPosition.z); // 80.0ä¸ºç¼©æ”¾ç³»æ•°ï¼Œæ§åˆ¶ç²’å­çš„æ•´ä½“å¤§å°
      gl_PointSize = min(gl_PointSize, 100.0); // é™åˆ¶æœ€å¤§å°ºå¯¸ï¼Œé¿å…è¿œå¤„ç²’å­è¿‡å¤§å¯¼è‡´å…‰æ™•è¿‡æ›

      // ä¼ é€’ç²’å­é¢œè‰²åˆ°ç‰‡å…ƒç€è‰²å™¨ï¼Œå®ç°æ¯ä¸ªç²’å­çš„ç‹¬ç«‹é¢œè‰²æ¸²æŸ“
      vColor = color;
    }
  `</span>,

  <span class="hljs-comment">// 3. ç‰‡å…ƒç€è‰²å™¨ï¼ˆå¤„ç†ç²’å­åƒç´ é¢œè‰²ã€å½¢çŠ¶ï¼Œå®ç°åœ†å½¢æŠ—é”¯é½¿ä¸æŸ”å’Œå…‰æ™•ï¼‰</span>
  <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
    varying vec3 vColor; // ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’è¿‡æ¥çš„ç²’å­é¢œè‰²

    void main() {
      // æ­¥éª¤1ï¼šç»˜åˆ¶åœ†å½¢ç²’å­ï¼ˆåŸºäºç‚¹åæ ‡çš„UVè®¡ç®—ï¼Œæ›¿ä»£é»˜è®¤æ–¹å½¢ç²’å­ï¼‰
      vec2 uv = gl_PointCoord - 0.5; // å°†ç‚¹åæ ‡ä»(0,0)~(1,1)è½¬æ¢ä¸º(-0.5,-0.5)~(0.5,0.5)
      float d = length(uv); // è®¡ç®—å½“å‰åƒç´ åˆ°ç²’å­ä¸­å¿ƒçš„è·ç¦»

      // æ­¥éª¤2ï¼šåœ†å½¢è£å‰ªï¼ˆä¸¢å¼ƒè¶…å‡ºåœ†å¿ƒ0.5èŒƒå›´çš„åƒç´ ï¼Œå½¢æˆåœ†å½¢ç²’å­ï¼‰
      if (d &gt; 0.5) discard; // discardï¼šä¸¢å¼ƒå½“å‰åƒç´ ï¼Œä¸æ¸²æŸ“ï¼Œå®ç°åœ†å½¢è½®å»“

      // æ­¥éª¤3ï¼šæŠ—é”¯é½¿è¾¹ç¼˜ï¼ˆsmoothstepå®ç°æ¸éšï¼Œé¿å…åœ†å½¢è¾¹ç¼˜é”¯é½¿ï¼Œæå‡å…‰æ™•è´¨æ„Ÿï¼‰
      float alpha = 1.0 - smoothstep(0.45, 0.5, d); // ä»0.45åˆ°0.5ï¼Œalphaä»1æ¸å˜åˆ°0ï¼Œè¾¹ç¼˜æ¸éš

      // æ­¥éª¤4ï¼šè®¾ç½®æœ€ç»ˆåƒç´ é¢œè‰²ï¼ˆç²’å­ç‹¬ç«‹é¢œè‰²+æ¸å˜Alphaï¼Œå®ç°æŸ”å’Œå…‰æ™•ï¼‰
      gl_FragColor = vec4(vColor, alpha);
    }
  `</span>,

  <span class="hljs-comment">// 4. æè´¨é™„åŠ é…ç½®ï¼ˆæå‡æ˜Ÿç³»è§†è§‰æ•ˆæœï¼Œæ ¸å¿ƒæ˜¯åŠ æ³•æ··åˆä¸é€æ˜è®¾ç½®ï¼‰</span>
  <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨é€æ˜ï¼šæ”¯æŒç²’å­è¾¹ç¼˜æ¸éšï¼Œå®ç°æŸ”å’Œå…‰æ™•æ•ˆæœ</span>
  <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>, <span class="hljs-comment">// åŠ æ³•æ··åˆï¼šç²’å­é¢œè‰²äº®åº¦å åŠ ï¼Œå‘ˆç°æœ¦èƒ§å…‰æ™•ï¼Œæå‡æ˜Ÿç³»å±‚æ¬¡æ„Ÿ</span>
  <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å…³é—­æ·±åº¦å†™å…¥ï¼šå…è®¸ç²’å­å åŠ ï¼Œé¿å…æ—‹è‡‚ä¸æ ¸çƒäº’ç›¸é®æŒ¡ï¼Œå…‰æ™•æ›´è¿è´¯</span>
});

<span class="hljs-comment">// 5. åˆ›å»ºPointsç²’å­å¯¹è±¡ï¼Œæ·»åŠ åˆ°åœºæ™¯ï¼ˆå°†å‡ ä½•ä½“ä¸æè´¨ç»“åˆï¼Œå½¢æˆæœ€ç»ˆçš„M101é£è½¦æ˜Ÿç³»ï¼‰</span>
<span class="hljs-keyword">const</span> points = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
scene.<span class="hljs-title function_">add</span>(points);
</code></pre>
<h5 data-id="heading-16">4.2 å…³é”®æŠ€æœ¯ç‚¹è§£æ</h5>
<ol>
<li>
<p><strong>é¡¶ç‚¹ç€è‰²å™¨æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li><strong>å¾®å¼±è„‰åŠ¨åŠ¨ç”»</strong>ï¼šåŸºäº<code>sin(uTime * 0.5 + length(pos))</code>å®ç°å‘¨æœŸæ€§è„‰åŠ¨ï¼Œ<code>length(pos)</code>è®©ä¸åŒä½ç½®çš„ç²’å­è„‰åŠ¨ç›¸ä½ä¸åŒï¼Œé¿å…åŒæ­¥è„‰åŠ¨çš„ç”Ÿç¡¬æ„Ÿï¼Œ<code>0.1</code>çš„è„‰åŠ¨å¹…åº¦ä¿è¯æ˜Ÿç³»æ•´ä½“å½¢æ€ä¸å˜ï¼Œä»…æå‡åŠ¨æ€æ„Ÿï¼›</li>
<li><strong>é€è§†ç¼©æ”¾</strong>ï¼š<code>gl_PointSize = size * (80.0 / -mvPosition.z)</code>å®ç°ã€Œè¿‘å¤§è¿œå°ã€çš„çœŸå®é€è§†æ•ˆæœï¼Œè®©æ˜Ÿç³»æ›´å…·3Dç«‹ä½“æ„Ÿï¼Œ<code>min</code>å‡½æ•°é™åˆ¶æœ€å¤§å°ºå¯¸ï¼Œé¿å…å…‰æ™•è¿‡æ›ï¼›</li>
<li><strong>é¢œè‰²ä¼ é€’</strong>ï¼šé€šè¿‡<code>varying vec3 vColor</code>å°†ç²’å­çš„ç‹¬ç«‹é¢œè‰²ä¼ é€’åˆ°ç‰‡å…ƒç€è‰²å™¨ï¼ŒThree.jsä¼šè‡ªåŠ¨è¿›è¡Œå¹³æ»‘æ’å€¼ï¼Œä¿è¯é¢œè‰²è¿‡æ¸¡è‡ªç„¶ï¼Œæ— æ˜æ˜¾æ–­å±‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç‰‡å…ƒç€è‰²å™¨æ ¸å¿ƒé€»è¾‘</strong>ï¼š</p>
<ul>
<li><strong>åœ†å½¢ç²’å­ç»˜åˆ¶</strong>ï¼šé€šè¿‡<code>gl_PointCoord</code>è½¬æ¢UVåæ ‡ï¼Œè®¡ç®—åƒç´ åˆ°ç²’å­ä¸­å¿ƒçš„è·ç¦»ï¼Œä¸¢å¼ƒè¶…å‡ºåœ†å¿ƒçš„åƒç´ ï¼Œå½¢æˆåœ†å½¢ç²’å­ï¼Œæ›¿ä»£é»˜è®¤çš„æ–¹å½¢ç²’å­ï¼Œæå‡æ˜Ÿç³»çš„ç»†è…»åº¦ï¼›</li>
<li><strong>æŠ—é”¯é½¿è¾¹ç¼˜</strong>ï¼š<code>smoothstep(0.45, 0.5, d)</code>å®ç°è¾¹ç¼˜æ¸éšï¼Œé¿å…åœ†å½¢ç²’å­çš„é”¯é½¿æ„Ÿï¼ŒåŒæ—¶ä¸ºç²’å­è¥é€ æŸ”å’Œçš„å…‰æ™•ï¼Œè¿™å¯¹æ˜Ÿç³»çš„æ—‹è‡‚ä¸æ ¸çƒå°¤ä¸ºé‡è¦ï¼›</li>
<li><strong>ç‹¬ç«‹é¢œè‰²æ¸²æŸ“</strong>ï¼šç›´æ¥ä½¿ç”¨ä»é¡¶ç‚¹ç€è‰²å™¨ä¼ é€’çš„<code>vColor</code>ï¼Œå®ç°æ¯ä¸ªç²’å­çš„å·®å¼‚åŒ–é¢œè‰²ï¼Œè¿˜åŸæ˜Ÿç³»æ ¸çƒä¸æ—‹è‡‚çš„è§†è§‰å·®å¼‚ã€‚</li>
</ul>
</li>
<li>
<p><strong>æè´¨é…ç½®ä¼˜åŒ–</strong>ï¼š</p>
<ul>
<li><strong><code>AdditiveBlending</code>ï¼ˆåŠ æ³•æ··åˆï¼‰</strong>ï¼šç²’å­é¢œè‰²äº®åº¦å åŠ ï¼Œè¶Šå¯†é›†çš„åœ°æ–¹è¶Šäº®ï¼Œå½¢æˆè‡ªç„¶çš„æœ¦èƒ§å…‰æ™•ï¼Œæ¨¡æ‹Ÿå®‡å®™æ˜Ÿå°˜çš„å‘å…‰æ•ˆæœï¼Œæå‡æ˜Ÿç³»çš„çœŸå®æ„Ÿä¸å±‚æ¬¡æ„Ÿï¼›</li>
<li><strong><code>depthWrite: false</code></strong>ï¼šå…³é—­æ·±åº¦å†™å…¥ï¼Œå…è®¸æ—‹è‡‚ä¸æ ¸çƒçš„ç²’å­äº’ç›¸å åŠ ï¼Œé¿å…ç²’å­ä¹‹é—´çš„é®æŒ¡ï¼Œä¿è¯å…‰æ™•çš„è¿è´¯æ€§ï¼ŒåŒæ—¶æå‡æ¸²æŸ“æ€§èƒ½ï¼›</li>
<li><strong><code>transparent: true</code></strong>ï¼šå¯ç”¨é€æ˜ï¼Œæ”¯æŒç²’å­è¾¹ç¼˜çš„æ¸éšæ•ˆæœï¼Œé…åˆåŠ æ³•æ··åˆï¼Œè®©æ˜Ÿç³»çš„å…‰æ™•æ›´æŸ”å’Œã€æ›´è‡ªç„¶ã€‚</li>
</ul>
</li>
</ol>
<h4 data-id="heading-17">æ­¥éª¤5ï¼šåŠ¨ç”»å¾ªç¯ï¼ˆé©±åŠ¨æ˜Ÿç³»åŠ¨æ€æ•ˆæœï¼Œå®ç°æµç•…æ¸²æŸ“ï¼‰</h4>
<p>æ¯å¸§æ›´æ–°å…¨å±€æ—¶é—´<code>uTime</code>ï¼Œé©±åŠ¨ç²’å­å¾®å¼±è„‰åŠ¨ï¼ŒåŒæ—¶å®ç°æ˜Ÿç³»æ•´ä½“è‡ªè½¬ï¼Œæ›´æ–°æ§åˆ¶å™¨é˜»å°¼ï¼Œä¿è¯æ˜Ÿç³»çš„åŠ¨æ€æ•ˆæœæµç•…ã€è‡ªç„¶ï¼Œæå‡è§†è§‰ä½“éªŒã€‚</p>
<h5 data-id="heading-18">5.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> clock = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Clock</span>(); <span class="hljs-comment">// æ—¶é’Ÿï¼šç”¨äºè·å–ç´¯è®¡è¿è¡Œæ—¶é—´ï¼Œä¸å—å¸§ç‡å½±å“ï¼Œé¿å…åŠ¨ç”»ç´¯ç§¯è¯¯å·®</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate); <span class="hljs-comment">// ç»‘å®šæµè§ˆå™¨åˆ·æ–°ç‡ï¼ˆé€šå¸¸60å¸§/ç§’ï¼‰ï¼Œå®ç°æµç•…æ— å¡é¡¿çš„åŠ¨ç”»</span>

  <span class="hljs-comment">// 1. è·å–ç´¯è®¡è¿è¡Œæ—¶é—´ï¼Œé©±åŠ¨ç€è‰²å™¨è„‰åŠ¨åŠ¨ç”»</span>
  <span class="hljs-keyword">const</span> t = clock.<span class="hljs-title function_">getElapsedTime</span>();
  material.<span class="hljs-property">uniforms</span>.<span class="hljs-property">uTime</span>.<span class="hljs-property">value</span> = t;

  <span class="hljs-comment">// 2. æ˜Ÿç³»æ•´ä½“è‡ªè½¬ï¼šç»•Yè½´ç¼“æ…¢æ—‹è½¬ï¼Œè¥é€ çœŸå®çš„å®‡å®™æ˜Ÿç³»æ°›å›´</span>
  <span class="hljs-comment">// 0.02ä¸ºè‡ªè½¬é€Ÿåº¦ï¼Œç¼“æ…¢æ—‹è½¬ä¾¿äºè§‚å¯Ÿæ˜Ÿç³»çš„æ—‹è‡‚ç»“æ„</span>
  points.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> = t * <span class="hljs-number">0.02</span>;

  <span class="hljs-comment">// 3. æ›´æ–°è½¨é“æ§åˆ¶å™¨é˜»å°¼ï¼ˆå¿…é¡»åœ¨åŠ¨ç”»å¾ªç¯ä¸­è°ƒç”¨ï¼Œä¿è¯é˜»å°¼æ•ˆæœç”Ÿæ•ˆï¼‰</span>
  controls.<span class="hljs-title function_">update</span>();

  <span class="hljs-comment">// 4. æ¸²æŸ“åœºæ™¯ï¼ˆå°†åœºæ™¯å’Œç›¸æœºçš„3Dä¿¡æ¯æ¸²æŸ“ä¸º2Dç”»å¸ƒï¼Œå‘ˆç°æœ€ç»ˆçš„M101é£è½¦æ˜Ÿç³»ï¼‰</span>
  renderer.<span class="hljs-title function_">render</span>(scene, camera);
}

<span class="hljs-comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯ï¼Œå¼€å§‹è¿è¡Œæ˜Ÿç³»çš„è„‰åŠ¨ã€è‡ªè½¬ä¸æ¸²æŸ“</span>
<span class="hljs-title function_">animate</span>();
</code></pre>
<h5 data-id="heading-19">5.2 å…³é”®è¯´æ˜</h5>
<ul>
<li><strong><code>clock.getElapsedTime()</code></strong>ï¼šè·å–ä»æ—¶é’Ÿå¯åŠ¨åˆ°å½“å‰çš„ç´¯è®¡è¿è¡Œæ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œç›¸æ¯”<code>getDelta()</code>æ›´é€‚åˆé©±åŠ¨å…¨å±€å¾ªç¯åŠ¨ç”»ï¼Œé¿å…åŠ¨ç”»å› å¸§ç‡æ³¢åŠ¨å‡ºç°ç´¯ç§¯è¯¯å·®ï¼Œä¿è¯æ˜Ÿç³»çš„è„‰åŠ¨ä¸è‡ªè½¬æ•ˆæœåœ¨ä¸åŒè®¾å¤‡ä¸Šä¸€è‡´ã€‚</li>
<li><strong>åŒåŠ¨ç”»é€»è¾‘ï¼ˆå¾®è§‚è„‰åŠ¨+å®è§‚è‡ªè½¬ï¼‰</strong>ï¼š
<ul>
<li>å¾®è§‚ï¼šç²’å­çš„å¾®å¼±è„‰åŠ¨ï¼Œæå‡æ˜Ÿç³»çš„åŠ¨æ€æ„Ÿï¼Œé¿å…åœºæ™¯è¿‡äºé™æ€ï¼›</li>
<li>å®è§‚ï¼šæ˜Ÿç³»ç»•Yè½´ç¼“æ…¢è‡ªè½¬ï¼Œè¿˜åŸçœŸå®æ˜Ÿç³»çš„è‡ªè½¬ç‰¹æ€§ï¼Œè¥é€ å®‡å®™æ˜Ÿç³»çš„æ°›å›´ï¼›</li>
<li>åŒåŠ¨ç”»é€»è¾‘çš„æ ¸å¿ƒæ˜¯ã€ŒåŠ¨é™ç»“åˆã€ï¼Œæ—¢ä¿è¯æ˜Ÿç³»çš„æ•´ä½“å½¢æ€ä¸å˜ï¼Œåˆæå‡è§†è§‰ä½“éªŒçš„ä¸°å¯Œæ€§ã€‚</li>
</ul>
</li>
<li><strong>è‡ªè½¬é€Ÿåº¦ä¼˜åŒ–</strong>ï¼š<code>0.02</code>çš„è‡ªè½¬é€Ÿåº¦è¾ƒä¸ºç¼“æ…¢ï¼Œä¾¿äºç”¨æˆ·è§‚å¯Ÿæ˜Ÿç³»çš„æ—‹è‡‚ä¸æ ¸çƒç»†èŠ‚ï¼Œè‹¥æƒ³æå‡åŠ¨æ€æ„Ÿï¼Œå¯é€‚å½“å¢å¤§è¯¥å€¼ï¼ˆå¦‚<code>0.05</code>ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-20">æ­¥éª¤6ï¼šçª—å£é€‚é…ï¼ˆå“åº”å¼è°ƒæ•´ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼‰</h4>
<p>ä¿è¯M101é£è½¦æ˜Ÿç³»åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½å…¨å±æ˜¾ç¤ºï¼Œä¸”ä¸ä¼šå‡ºç°æ‹‰ä¼¸å˜å½¢ï¼Œé€‚é…æ¡Œé¢ç«¯ã€ç§»åŠ¨ç«¯ç­‰ä¸åŒè®¾å¤‡ã€‚</p>
<h5 data-id="heading-21">6.1 æ ¸å¿ƒä»£ç </h5>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-comment">// 1. æ›´æ–°ç›¸æœºå®½é«˜æ¯”ï¼ˆé€‚é…æ–°çš„çª—å£å°ºå¯¸ï¼Œé¿å…åœºæ™¯æ‹‰ä¼¸ï¼‰</span>
  camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
  <span class="hljs-comment">// 2. æ›´æ–°ç›¸æœºæŠ•å½±çŸ©é˜µï¼ˆå¿…é¡»è°ƒç”¨ï¼Œå¦åˆ™å®½é«˜æ¯”ä¿®æ”¹ä¸ç”Ÿæ•ˆï¼Œåœºæ™¯ä¼šå‡ºç°æ‹‰ä¼¸å˜å½¢ï¼‰</span>
  camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
  <span class="hljs-comment">// 3. æ›´æ–°æ¸²æŸ“å™¨å°ºå¯¸ï¼ˆé€‚é…æ–°çš„çª—å£å°ºå¯¸ï¼Œä¿è¯æ˜Ÿç³»å…¨å±æ˜¾ç¤ºï¼‰</span>
  renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
});
</code></pre>
<h5 data-id="heading-22">6.2 å…³é”®è¯´æ˜</h5>
<ul>
<li>çª—å£å¤§å°å˜åŒ–æ—¶ï¼ŒåŒæ­¥æ›´æ–°ç›¸æœºå®½é«˜æ¯”å’Œæ¸²æŸ“å™¨å°ºå¯¸ï¼Œä¿è¯æ˜Ÿç³»åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹éƒ½èƒ½å…¨å±æ˜¾ç¤ºï¼Œä¸”é€è§†æ•ˆæœæ­£å¸¸ï¼Œä¸ä¼šå‡ºç°æ‹‰ä¼¸å˜å½¢ã€‚</li>
<li><code>camera.updateProjectionMatrix()</code>ï¼šç›¸æœºå‚æ•°ï¼ˆå¦‚å®½é«˜æ¯”ï¼‰ä¿®æ”¹åï¼Œå¿…é¡»è°ƒç”¨è¯¥æ–¹æ³•æ›´æ–°æŠ•å½±çŸ©é˜µï¼Œå¦åˆ™å®½é«˜æ¯”çš„ä¿®æ”¹ä¸ä¼šç”Ÿæ•ˆï¼Œåœºæ™¯ä¼šå‡ºç°æ˜æ˜¾çš„æ‹‰ä¼¸å˜å½¢ï¼Œå½±å“æ˜Ÿç³»çš„è§†è§‰æ•ˆæœã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-23">æ ¸å¿ƒæŠ€æœ¯æ·±åº¦è§£æ</h3>
<h4 data-id="heading-24">1.  å¯¹æ•°èºæ—‹ç®—æ³•ï¼ˆæ—‹è‡‚å®ç°çš„æ ¸å¿ƒï¼‰</h4>
<p>å¯¹æ•°èºæ—‹æ˜¯è‡ªç„¶ç•Œä¸­èºæ—‹æ˜Ÿç³»çš„æ™®éå½¢æ€ï¼Œå…¶æ ¸å¿ƒå…¬å¼ä¸ºï¼š<code>$r = a \cdot e^{b \cdot \theta}$</code></p>
<ul>
<li>å„å‚æ•°å«ä¹‰ï¼š</li>
<li><code>$r$</code>ï¼šèºæ—‹çº¿ä¸ŠæŸç‚¹åˆ°åŸç‚¹çš„åŠå¾„ï¼ˆå¯¹åº”ä»£ç ä¸­çš„<code>radius</code>ï¼‰ï¼›</li>
<li><code>$\theta$</code>ï¼šèºæ—‹çº¿ä¸ŠæŸç‚¹çš„æè§’ï¼ˆå¯¹åº”ä»£ç ä¸­çš„<code>theta</code>ï¼‰ï¼›</li>
<li><code>$b$</code>ï¼šèºæ—‹æ¾ç´§åº¦ï¼ˆå¯¹åº”ä»£ç ä¸­çš„<code>armSpread</code>ï¼‰ï¼Œ<code>$b$</code>è¶Šå°ï¼Œèºæ—‹è¶Šç´§å‡‘ï¼Œæ—‹è‡‚è¶Šâ€œå·â€ï¼›<code>$b$</code>è¶Šå¤§ï¼Œèºæ—‹è¶Šæ¾æ•£ï¼Œæ—‹è‡‚è¶Šâ€œèˆ’å±•â€ï¼›</li>
<li><code>$a$</code>ï¼šæ¯”ä¾‹ç³»æ•°ï¼Œç”¨äºè°ƒæ•´èºæ—‹çš„æ•´ä½“å¤§å°ï¼ˆä»£ç ä¸­é€šè¿‡å½’ä¸€åŒ–å¤„ç†å®ç°ï¼Œè®©æ—‹è‡‚åˆšå¥½å»¶ä¼¸åˆ°<code>maxRadius</code>ï¼‰ã€‚</li>
<li>ä»£ç è½åœ°æŠ€å·§ï¼šé€šè¿‡<code>Math.exp(theta * armSpread)</code>è®¡ç®—èºæ—‹åŠå¾„ï¼Œå†é€šè¿‡<code>maxRadius / Math.exp(Math.PI * 8 * armSpread)</code>è¿›è¡Œå½’ä¸€åŒ–ï¼Œä¿è¯æ—‹è‡‚çš„é•¿åº¦ä¸è¾¹ç•Œå¯æ§ï¼Œé¿å…è¶…å‡ºæ˜Ÿç³»èŒƒå›´ã€‚</li>
</ul>
<h4 data-id="heading-25">2.  ç²’å­åˆ†å±‚ç”Ÿæˆç­–ç•¥ï¼ˆæ ¸çƒvsæ—‹è‡‚ï¼‰</h4>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>æ ¸çƒï¼ˆBulgeï¼‰</th><th>æ—‹è‡‚ï¼ˆSpiral Armsï¼‰</th></tr></thead><tbody><tr><td>åˆ†å¸ƒé€»è¾‘</td><td><code>randomDirection()</code>+å¹‚æ¬¡é‡‡æ ·ï¼Œé«˜åº¦é›†ä¸­åœ¨ä¸­å¿ƒ</td><td>å¯¹æ•°èºæ—‹ç®—æ³•+å¾„å‘/è§’åº¦æ‰°åŠ¨ï¼Œæ²¿èºæ—‹çº¿åˆ†å¸ƒ</td></tr><tr><td>ç²’å­æ•°é‡</td><td>8000ï¼ˆå¯†é›†ç´§å‡‘ï¼‰</td><td>92000ï¼ˆèˆ’å±•ç»†è…»ï¼‰</td></tr><tr><td>é¢œè‰²</td><td>é»„ç™½è‰²ï¼ˆ1.0, 0.9, 0.7ï¼‰ï¼Œæ¨¡æ‹Ÿè€å¹´æ’æ˜Ÿ</td><td>è“ç™½è‰²ï¼ˆ0.7, 0.85, 1.0ï¼‰ï¼Œæ¨¡æ‹Ÿæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘</td></tr><tr><td>å°ºå¯¸</td><td>0.2~1.0ï¼Œè¾ƒå°ä¸”å‡åŒ€</td><td>0.3~1.5ï¼Œç¨å¤§ä¸”æœ‰å·®å¼‚</td></tr><tr><td>ç©ºé—´å½¢æ€</td><td>çƒå½¢ï¼ˆ3Dåˆ†å¸ƒï¼‰</td><td>è–„ç›˜å½¢ï¼ˆ2Då¹³é¢åˆ†å¸ƒï¼ŒYè½´é«˜åº¦é™åˆ¶åœ¨-1~1ï¼‰</td></tr></tbody></table>
<h4 data-id="heading-26">3.  ShaderMaterialçš„æ€§èƒ½ä¼˜åŠ¿</h4>
<p>æœ¬æ¬¡æ˜Ÿç³»æ€»ç²’å­æ•°ä¸º10ä¸‡ï¼Œé‡‡ç”¨<code>ShaderMaterial</code>èƒ½å¤Ÿå®ç°æµç•…æ¸²æŸ“ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li><strong>GPUå¹¶è¡Œå¤„ç†</strong>ï¼šç€è‰²å™¨é€»è¾‘è¿è¡Œåœ¨GPUä¸Šï¼Œå…·å¤‡å¼ºå¤§çš„å¹¶è¡Œå¤„ç†èƒ½åŠ›ï¼Œå¯è½»æ¾åº”å¯¹10ä¸‡çº§ç”šè‡³ç™¾ä¸‡çº§ç²’å­ï¼Œæ€§èƒ½è¿œè¶…æ™®é€šJSé©±åŠ¨çš„ç²’å­ç³»ç»Ÿï¼›</li>
<li><strong>å‡å°‘æ•°æ®ä¼ è¾“</strong>ï¼šé€šè¿‡<code>BufferGeometry</code>å°†ç²’å­æ•°æ®ä¸€æ¬¡æ€§ä¼ é€’åˆ°GPUï¼Œåç»­åŠ¨ç”»ä»…éœ€æ›´æ–°å°‘é‡å…¨å±€<code>uniform</code>ï¼ˆå¦‚<code>uTime</code>ï¼‰ï¼Œå‡å°‘CPUä¸GPUä¹‹é—´çš„æ•°æ®ä¼ è¾“å¼€é”€ï¼›</li>
<li><strong>çµæ´»çš„è§†è§‰å®šåˆ¶</strong>ï¼šé€šè¿‡è‡ªå®šä¹‰ç€è‰²å™¨ï¼Œå¯å®ç°åœ†å½¢ç²’å­ã€æŠ—é”¯é½¿ã€å…‰æ™•ç­‰å¤æ‚è§†è§‰æ•ˆæœï¼Œä¸”æ— éœ€é¢å¤–çš„å‡ ä½•ä½“å¼€é”€ï¼Œæå‡æ¸²æŸ“æ•ˆç‡ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-27">æ ¸å¿ƒå‚æ•°é€ŸæŸ¥è¡¨ï¼ˆå¿«é€Ÿè°ƒæ•´æ˜Ÿç³»æ•ˆæœï¼‰</h3>



























































<table><thead><tr><th>å‚æ•°å</th><th>å½“å‰å–å€¼</th><th>ä½œç”¨</th><th>ä¿®æ”¹å»ºè®®</th></tr></thead><tbody><tr><td><code>bulgeCount</code></td><td>8000</td><td>æ ¸çƒç²’å­æ•°ï¼Œå†³å®šæ ¸çƒçš„å¯†é›†ç¨‹åº¦</td><td>æ”¹ä¸º5000ï¼šæ ¸çƒæ›´ç¨€ç–ï¼›æ”¹ä¸º10000ï¼šæ ¸çƒæ›´å¯†é›†ï¼Œäº®åº¦æ›´é«˜</td></tr><tr><td><code>armCount</code></td><td>92000</td><td>æ—‹è‡‚ç²’å­æ•°ï¼Œå†³å®šæ—‹è‡‚çš„ç»†è…»ç¨‹åº¦</td><td>æ”¹ä¸º50000ï¼šæ—‹è‡‚æ›´ç¨€ç–ï¼Œä½é…è®¾å¤‡æ›´æµç•…ï¼›æ”¹ä¸º150000ï¼šæ—‹è‡‚æ›´ç»†è…»ï¼Œå…‰æ™•æ›´ä¸°å¯Œ</td></tr><tr><td><code>arms</code></td><td>4</td><td>æ—‹è‡‚æ•°é‡ï¼Œå†³å®šæ˜Ÿç³»çš„é£è½¦å½¢æ€</td><td>æ”¹ä¸º2ï¼šåŒæ—‹è‡‚æ˜Ÿç³»ï¼ˆå¦‚é“¶æ²³ç³»ï¼‰ï¼›æ”¹ä¸º6ï¼šå…­æ—‹è‡‚æ˜Ÿç³»ï¼Œæ›´å…·è§†è§‰å†²å‡»åŠ›</td></tr><tr><td><code>armSpread</code></td><td>0.4</td><td>æ—‹è‡‚æ¾ç´§åº¦ï¼Œå†³å®šèºæ—‹çš„ç´§å‡‘ç¨‹åº¦</td><td>æ”¹ä¸º0.3ï¼šæ—‹è‡‚æ›´ç´§å‡‘ï¼Œæ›´â€œå·â€ï¼›æ”¹ä¸º0.5ï¼šæ—‹è‡‚æ›´æ¾æ•£ï¼Œæ›´â€œèˆ’å±•â€</td></tr><tr><td><code>maxRadius</code></td><td>60</td><td>æ—‹è‡‚æœ€å¤§åŠå¾„ï¼Œå†³å®šæ˜Ÿç³»çš„æ•´ä½“å¤§å°</td><td>æ”¹ä¸º40ï¼šæ˜Ÿç³»æ›´å°æ›´ç´§å‡‘ï¼›æ”¹ä¸º80ï¼šæ˜Ÿç³»æ›´å¤§æ›´èˆ’å±•ï¼Œæ”¯æŒè¿œè·ç¦»ç¼©æ”¾æŸ¥çœ‹</td></tr><tr><td>æ ¸çƒé¢œè‰²</td><td>(1.0, 0.9, 0.7)</td><td>æ ¸çƒè§†è§‰è‰²è°ƒï¼Œæ¨¡æ‹Ÿè€å¹´æ’æ˜Ÿ</td><td>æ”¹ä¸º(1.0, 0.8, 0.5)ï¼šæ›´æš–çš„é‡‘é»„è‰²ï¼Œæ ¸çƒæ›´æ˜äº®ï¼›æ”¹ä¸º(1.0, 1.0, 0.9)ï¼šæ›´æµ…çš„é»„ç™½è‰²ï¼Œæ ¸çƒæ›´æŸ”å’Œ</td></tr><tr><td>æ—‹è‡‚é¢œè‰²</td><td>(0.7, 0.85, 1.0)</td><td>æ—‹è‡‚è§†è§‰è‰²è°ƒï¼Œæ¨¡æ‹Ÿæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘</td><td>æ”¹ä¸º(0.6, 0.8, 1.0)ï¼šæ›´å†·çš„è“è‰²ï¼Œæ—‹è‡‚æ›´é²œæ˜ï¼›æ”¹ä¸º(0.8, 0.9, 1.0)ï¼šæ›´æµ…çš„è“ç™½è‰²ï¼Œæ—‹è‡‚æ›´æŸ”å’Œ</td></tr><tr><td>è‡ªè½¬é€Ÿåº¦ <code>t * 0.02</code></td><td>0.02</td><td>æ˜Ÿç³»æ•´ä½“è‡ªè½¬é€Ÿåº¦ï¼Œå†³å®šåŠ¨æ€æ°›å›´</td><td>æ”¹ä¸º0.01ï¼šè‡ªè½¬æ›´ç¼“æ…¢ï¼Œä¾¿äºè§‚å¯Ÿç»†èŠ‚ï¼›æ”¹ä¸º0.05ï¼šè‡ªè½¬æ›´å¿«ï¼ŒåŠ¨æ€æ„Ÿæ›´å¼º</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-28">å®Œæ•´ä¼˜åŒ–ä»£ç </h3>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"zh-CN"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"UTF-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>M101 é£è½¦æ˜Ÿç³» - Three.js<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="css"><span class="hljs-selector-tag">body</span> { <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>; <span class="hljs-attribute">overflow</span>: hidden; <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>; }</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"module"</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// å¯¼å…¥Three.jsæ ¸å¿ƒåº“ä¸è½¨é“æ§åˆ¶å™¨</span>
  <span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0'</span>;
  <span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'https://esm.sh/three@0.174.0/examples/jsm/controls/OrbitControls.js'</span>;

  <span class="hljs-comment">// ========== 1. åŸºç¡€ç¯å¢ƒåˆå§‹åŒ–ï¼ˆåœºæ™¯/ç›¸æœº/æ¸²æŸ“å™¨/æ§åˆ¶å™¨ï¼‰ ==========</span>
  <span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();

  <span class="hljs-comment">// é€è§†ç›¸æœºï¼šé«˜ä½ä¾§è§†ï¼Œæ¸…æ™°æŸ¥çœ‹é£è½¦æ˜Ÿç³»çš„æ—‹è‡‚ç»“æ„ä¸æ ¸çƒç»†èŠ‚</span>
  <span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">60</span>, innerWidth / innerHeight, <span class="hljs-number">0.1</span>, <span class="hljs-number">2000</span>);
  camera.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">0</span>, <span class="hljs-number">20</span>, <span class="hljs-number">80</span>);

  <span class="hljs-comment">// æ¸²æŸ“å™¨ï¼šæŠ—é”¯é½¿ï¼Œæå‡æ˜Ÿç³»ç²’å­è¾¹ç¼˜ä¸å…‰æ™•çš„ç»†è…»åº¦ï¼Œé€‚é…é«˜æ¸…å±å¹•</span>
  <span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
  renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
  renderer.<span class="hljs-title function_">setPixelRatio</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">devicePixelRatio</span>);
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

  <span class="hljs-comment">// è½¨é“æ§åˆ¶å™¨ï¼šå¯ç”¨é˜»å°¼ï¼Œå®ç°é¡ºæ»‘çš„3Däº¤äº’ä½“éªŒ</span>
  <span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
  controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;

  <span class="hljs-comment">// ========== 2. ç²’å­æ•°æ®åˆ†å±‚ç”Ÿæˆï¼ˆæ ¸çƒ+æ—‹è‡‚ï¼Œè¿˜åŸæ˜Ÿç³»çœŸå®ç»“æ„ï¼‰ ==========</span>
  <span class="hljs-keyword">const</span> pointsArr = []; <span class="hljs-comment">// ç²’å­é¡¶ç‚¹åæ ‡æ•°ç»„</span>
  <span class="hljs-keyword">const</span> colors = []; <span class="hljs-comment">// ç²’å­é¢œè‰²æ•°ç»„ï¼šåˆ†å±‚å·®å¼‚åŒ–ï¼Œå®ç°æ ¸çƒä¸æ—‹è‡‚çš„è§†è§‰å·®å¼‚</span>
  <span class="hljs-keyword">const</span> sizes = []; <span class="hljs-comment">// ç²’å­å°ºå¯¸æ•°ç»„ï¼šåˆ†å±‚å·®å¼‚åŒ–ï¼Œæå‡æ˜Ÿç³»ç»†è…»åº¦</span>

  <span class="hljs-comment">// ---- åˆ†å±‚1ï¼šæ ¸çƒï¼ˆBulgeï¼‰- ä¸­å¿ƒå¯†é›†åŒºåŸŸï¼Œæ¨¡æ‹Ÿè€å¹´æ’æ˜Ÿé›†ç¾¤ ---- </span>
  <span class="hljs-keyword">const</span> bulgeCount = <span class="hljs-number">8000</span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; bulgeCount; i++) {
    <span class="hljs-comment">// å¹‚æ¬¡é‡‡æ ·ï¼šMath.pow(Math.random(), 3)è®©ç²’å­é«˜åº¦é›†ä¸­åœ¨ä¸­å¿ƒï¼Œæ¨¡æ‹ŸçœŸå®æ ¸çƒåˆ†å¸ƒ</span>
    <span class="hljs-keyword">const</span> radius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">pow</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>(), <span class="hljs-number">3</span>) * <span class="hljs-number">6</span>;
    <span class="hljs-keyword">const</span> point = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>().<span class="hljs-title function_">randomDirection</span>().<span class="hljs-title function_">multiplyScalar</span>(radius);
    pointsArr.<span class="hljs-title function_">push</span>(point);

    <span class="hljs-comment">// æ ¸çƒé¢œè‰²ï¼šé»„ç™½è‰²ï¼ˆè€å¹´æ’æ˜Ÿï¼Œåæš–è‰²è°ƒï¼Œäº®åº¦é«˜ï¼‰</span>
    colors.<span class="hljs-title function_">push</span>(<span class="hljs-number">1.0</span>, <span class="hljs-number">0.9</span>, <span class="hljs-number">0.7</span>);
    <span class="hljs-comment">// æ ¸çƒå°ºå¯¸ï¼š0.2~1.0ï¼Œè¾ƒå°ä¸”å¯†é›†ï¼Œä½“ç°æ ¸çƒçš„ç´§å‡‘æ„Ÿ</span>
    sizes.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">0.8</span> + <span class="hljs-number">0.2</span>);
  }

  <span class="hljs-comment">// ---- åˆ†å±‚2ï¼šæ—‹è‡‚ï¼ˆSpiral Armsï¼‰- é£è½¦çŠ¶èºæ—‹ç»“æ„ï¼Œæ¨¡æ‹Ÿæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘ ----</span>
  <span class="hljs-keyword">const</span> armCount = <span class="hljs-number">92000</span>;
  <span class="hljs-keyword">const</span> arms = <span class="hljs-number">4</span>; <span class="hljs-comment">// æ—‹è‡‚æ•°é‡ï¼š4æ¡ï¼Œè¿˜åŸM101é£è½¦æ˜Ÿç³»çš„ç»å…¸å½¢æ€</span>
  <span class="hljs-keyword">const</span> armSpread = <span class="hljs-number">0.4</span>; <span class="hljs-comment">// æ—‹è‡‚æ¾ç´§åº¦ï¼šè¶Šå°è¶Šç´§ï¼Œè¶Šå¤§è¶Šæ¾æ•£</span>
  <span class="hljs-keyword">const</span> maxRadius = <span class="hljs-number">60</span>; <span class="hljs-comment">// æ—‹è‡‚æœ€å¤§åŠå¾„ï¼Œå†³å®šæ˜Ÿç³»æ•´ä½“å¤§å°</span>

  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; armCount; i++) {
    <span class="hljs-comment">// éšæœºåˆ†é…æ—‹è‡‚ï¼Œä¿è¯4æ¡æ—‹è‡‚å‡åŒ€åˆ†å¸ƒ</span>
    <span class="hljs-keyword">const</span> armIndex = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * arms);
    <span class="hljs-keyword">const</span> angleOffset = (armIndex / arms) * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>;

    <span class="hljs-comment">// æ ¸å¿ƒç®—æ³•ï¼šå¯¹æ•°èºæ—‹ï¼ˆr = a * e^(b*Î¸)ï¼‰ï¼Œç”Ÿæˆè‡ªç„¶æµç•…çš„èºæ—‹ç»“æ„</span>
    <span class="hljs-keyword">const</span> theta = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">8</span>; <span class="hljs-comment">// èºæ—‹è§’åº¦ï¼š8Ï€å¯¹åº”4åœˆï¼Œä¿è¯æ—‹è‡‚é•¿åº¦ä¸æµç•…åº¦</span>
    <span class="hljs-keyword">const</span> radius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(theta * armSpread) * (maxRadius / <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">exp</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">8</span> * armSpread));
    
    <span class="hljs-comment">// å¾„å‘æ‰°åŠ¨ï¼šè®©æ—‹è‡‚æœ‰å®½åº¦ï¼Œé¿å…è¿‡äºçº¤ç»†ã€ç”Ÿç¡¬</span>
    <span class="hljs-keyword">const</span> radialJitter = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">3</span>;
    <span class="hljs-keyword">const</span> finalRadius = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(radius + radialJitter, maxRadius);

    <span class="hljs-comment">// è§’åº¦æ‰°åŠ¨ï¼šè®©æ—‹è‡‚ç²’å­åˆ†å¸ƒæ›´è‡ªç„¶ï¼Œé¿å…èºæ—‹çº¿è¿‡äºè§„æ•´</span>
    <span class="hljs-keyword">const</span> angle = theta + angleOffset + (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">0.3</span>;
    <span class="hljs-comment">// è–„ç›˜ç»“æ„ï¼šYè½´é«˜åº¦é™åˆ¶åœ¨-1~1ï¼Œç¬¦åˆçœŸå®æ˜Ÿç³»æ—‹è‡‚çš„å¹³é¢ç‰¹æ€§</span>
    <span class="hljs-keyword">const</span> height = (<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() - <span class="hljs-number">0.5</span>) * <span class="hljs-number">2</span>;

    <span class="hljs-comment">// æåæ ‡â†’ç›´è§’åæ ‡ï¼Œç”Ÿæˆæ—‹è‡‚ç²’å­åæ ‡</span>
    <span class="hljs-keyword">const</span> x = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">cos</span>(angle) * finalRadius;
    <span class="hljs-keyword">const</span> z = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">sin</span>(angle) * finalRadius;
    pointsArr.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(x, height, z));

    <span class="hljs-comment">// æ—‹è‡‚é¢œè‰²ï¼šè“ç™½è‰²ï¼ˆæ–°ç”Ÿæ’æ˜Ÿ/æ˜Ÿäº‘ï¼Œåå†·è‰²è°ƒï¼Œä¸æ ¸çƒå½¢æˆè§†è§‰å·®å¼‚ï¼‰</span>
    colors.<span class="hljs-title function_">push</span>(<span class="hljs-number">0.7</span>, <span class="hljs-number">0.85</span>, <span class="hljs-number">1.0</span>);
    <span class="hljs-comment">// æ—‹è‡‚å°ºå¯¸ï¼š0.3~1.5ï¼Œæ¯”æ ¸çƒç¨å¤§ï¼Œä½“ç°æ—‹è‡‚çš„è§†è§‰å±‚æ¬¡æ„Ÿ</span>
    sizes.<span class="hljs-title function_">push</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">1.2</span> + <span class="hljs-number">0.3</span>);
  }

  <span class="hljs-comment">// ========== 3. æ„å»ºBufferGeometryï¼ˆç»‘å®šç²’å­æ•°æ®ï¼Œæ”¯æ’‘ç€è‰²å™¨æ¸²æŸ“ï¼‰ ==========</span>
  <span class="hljs-keyword">const</span> geometry = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">BufferGeometry</span>().<span class="hljs-title function_">setFromPoints</span>(pointsArr);
  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰attributeï¼šcolorï¼ˆç²’å­ç‹¬ç«‹é¢œè‰²ï¼Œ3ä¸ªåˆ†é‡ï¼‰</span>
  geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'color'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(colors, <span class="hljs-number">3</span>));
  <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰attributeï¼šsizeï¼ˆç²’å­ç‹¬ç«‹å°ºå¯¸ï¼Œ1ä¸ªåˆ†é‡ï¼‰</span>
  geometry.<span class="hljs-title function_">setAttribute</span>(<span class="hljs-string">'size'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Float32BufferAttribute</span>(sizes, <span class="hljs-number">1</span>));

  <span class="hljs-comment">// ========== 4. åˆ›å»ºShaderMaterialï¼ˆæ ¸å¿ƒï¼šåœ†å½¢ç²’å­+å…‰æ™•+è„‰åŠ¨åŠ¨ç”»ï¼‰ ==========</span>
  <span class="hljs-keyword">const</span> material = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">ShaderMaterial</span>({
    <span class="hljs-comment">// å…¨å±€uniformsï¼šä¼ é€’æ—¶é—´ï¼Œé©±åŠ¨ç²’å­å¾®å¼±è„‰åŠ¨åŠ¨ç”»</span>
    <span class="hljs-attr">uniforms</span>: {
      <span class="hljs-attr">uTime</span>: { <span class="hljs-attr">value</span>: <span class="hljs-number">0</span> }
    },

    <span class="hljs-comment">// é¡¶ç‚¹ç€è‰²å™¨ï¼šå¤„ç†ç²’å­ä½ç½®ã€é¢œè‰²ã€å°ºå¯¸ï¼Œå®ç°å¾®å¼±è„‰åŠ¨ä¸é€è§†å˜æ¢</span>
    <span class="hljs-attr">vertexShader</span>: <span class="hljs-string">`
      uniform float uTime;
      attribute vec3 color;
      attribute float size;
      varying vec3 vColor;

      void main() {
        vec3 pos = position;

        // å¾®å¼±è„‰åŠ¨åŠ¨ç”»ï¼šå‘¨æœŸæ€§çƒé¢æ‰°åŠ¨ï¼Œæå‡æ˜Ÿç³»åŠ¨æ€æ„Ÿï¼Œä¿æŒæ•´ä½“å½¢æ€ä¸å˜
        float pulse = sin(uTime * 0.5 + length(pos)) * 0.1;
        pos += normalize(pos) * pulse;

        // é€è§†å˜æ¢ï¼š3Dåæ ‡â†’2Då±å¹•åæ ‡ï¼Œä¿è¯æ˜Ÿç³»æ­£ç¡®æ˜¾ç¤º
        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0);
        gl_Position = projectionMatrix * mvPosition;

        // é€è§†ç¼©æ”¾ï¼šè¿‘å¤§è¿œå°ï¼Œå®ç°çœŸå®3Dè§†è§‰æ•ˆæœï¼Œé™åˆ¶æœ€å¤§å°ºå¯¸é¿å…å…‰æ™•è¿‡æ›
        gl_PointSize = size * (80.0 / -mvPosition.z);
        gl_PointSize = min(gl_PointSize, 100.0);

        // ä¼ é€’ç²’å­é¢œè‰²åˆ°ç‰‡å…ƒç€è‰²å™¨ï¼Œå®ç°åˆ†å±‚å·®å¼‚åŒ–è§†è§‰
        vColor = color;
      }
    `</span>,

    <span class="hljs-comment">// ç‰‡å…ƒç€è‰²å™¨ï¼šå¤„ç†ç²’å­å½¢çŠ¶ã€æŠ—é”¯é½¿ã€å…‰æ™•ï¼Œå®ç°åœ†å½¢æŸ”å’Œç²’å­</span>
    <span class="hljs-attr">fragmentShader</span>: <span class="hljs-string">`
      varying vec3 vColor;

      void main() {
        // åœ†å½¢ç²’å­ç»˜åˆ¶ï¼šè½¬æ¢UVåæ ‡ï¼Œè®¡ç®—åˆ°ç²’å­ä¸­å¿ƒçš„è·ç¦»
        vec2 uv = gl_PointCoord - 0.5;
        float d = length(uv);

        // åœ†å½¢è£å‰ªï¼šä¸¢å¼ƒè¶…å‡ºåœ†å¿ƒçš„åƒç´ ï¼Œå½¢æˆåœ†å½¢è½®å»“
        if (d &gt; 0.5) discard;

        // æŠ—é”¯é½¿è¾¹ç¼˜ï¼šsmoothstepå®ç°æ¸éšï¼Œæå‡å…‰æ™•è´¨æ„Ÿï¼Œé¿å…é”¯é½¿æ„Ÿ
        float alpha = 1.0 - smoothstep(0.45, 0.5, d);

        // æœ€ç»ˆåƒç´ é¢œè‰²ï¼šç²’å­ç‹¬ç«‹é¢œè‰²+æ¸å˜Alphaï¼Œå®ç°æŸ”å’Œå…‰æ™•æ•ˆæœ
        gl_FragColor = vec4(vColor, alpha);
      }
    `</span>,

    <span class="hljs-comment">// æè´¨é…ç½®ï¼šæå‡æ˜Ÿç³»è§†è§‰æ•ˆæœï¼Œå®ç°æœ¦èƒ§å…‰æ™•ä¸æµç•…å åŠ </span>
    <span class="hljs-attr">transparent</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// å¯ç”¨é€æ˜ï¼Œæ”¯æŒè¾¹ç¼˜æ¸éš</span>
    <span class="hljs-attr">blending</span>: <span class="hljs-variable constant_">THREE</span>.<span class="hljs-property">AdditiveBlending</span>, <span class="hljs-comment">// åŠ æ³•æ··åˆï¼Œé¢œè‰²äº®åº¦å åŠ ï¼Œè¥é€ å…‰æ™•</span>
    <span class="hljs-attr">depthWrite</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// å…³é—­æ·±åº¦å†™å…¥ï¼Œé¿å…ç²’å­äº’ç›¸é®æŒ¡ï¼Œå…‰æ™•æ›´è¿è´¯</span>
  });

  <span class="hljs-comment">// åˆ›å»ºPointsç²’å­å¯¹è±¡ï¼Œæ·»åŠ åˆ°åœºæ™¯ï¼Œå½¢æˆæœ€ç»ˆçš„M101é£è½¦æ˜Ÿç³»</span>
  <span class="hljs-keyword">const</span> points = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Points</span>(geometry, material);
  scene.<span class="hljs-title function_">add</span>(points);

  <span class="hljs-comment">// ========== 5. åŠ¨ç”»å¾ªç¯ï¼ˆé©±åŠ¨è„‰åŠ¨+è‡ªè½¬ï¼Œå®ç°æµç•…åŠ¨æ€æ˜Ÿç³»ï¼‰ ==========</span>
  <span class="hljs-keyword">const</span> clock = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Clock</span>();

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
    <span class="hljs-title function_">requestAnimationFrame</span>(animate);

    <span class="hljs-comment">// æ›´æ–°å…¨å±€æ—¶é—´ï¼Œé©±åŠ¨ç²’å­å¾®å¼±è„‰åŠ¨åŠ¨ç”»</span>
    <span class="hljs-keyword">const</span> t = clock.<span class="hljs-title function_">getElapsedTime</span>();
    material.<span class="hljs-property">uniforms</span>.<span class="hljs-property">uTime</span>.<span class="hljs-property">value</span> = t;

    <span class="hljs-comment">// æ˜Ÿç³»æ•´ä½“è‡ªè½¬ï¼šç»•Yè½´ç¼“æ…¢æ—‹è½¬ï¼Œè¥é€ çœŸå®å®‡å®™æ°›å›´</span>
    points.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> = t * <span class="hljs-number">0.02</span>;

    <span class="hljs-comment">// æ›´æ–°è½¨é“æ§åˆ¶å™¨é˜»å°¼ï¼Œä¿è¯é¡ºæ»‘äº¤äº’</span>
    controls.<span class="hljs-title function_">update</span>();

    <span class="hljs-comment">// æ¸²æŸ“åœºæ™¯ï¼Œå‘ˆç°æœ€ç»ˆçš„M101é£è½¦æ˜Ÿç³»æ•ˆæœ</span>
    renderer.<span class="hljs-title function_">render</span>(scene, camera);
  }

  <span class="hljs-comment">// å¯åŠ¨åŠ¨ç”»å¾ªç¯ï¼Œå¼€å§‹è¿è¡Œæ˜Ÿç³»çš„è„‰åŠ¨ã€è‡ªè½¬ä¸æ¸²æŸ“</span>
  <span class="hljs-title function_">animate</span>();

  <span class="hljs-comment">// ========== 6. çª—å£é€‚é…ï¼ˆå“åº”å¼è°ƒæ•´ï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸ï¼‰ ==========</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
    camera.<span class="hljs-property">aspect</span> = <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span> / <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>;
    camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
    renderer.<span class="hljs-title function_">setSize</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">innerWidth</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">innerHeight</span>);
  });
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<hr/>
<h3 data-id="heading-29">æ€»ç»“ä¸æ‰©å±•å»ºè®®</h3>
<h4 data-id="heading-30">æ ¸å¿ƒæ€»ç»“</h4>
<ol>
<li><strong>å½¢æ€æ ¸å¿ƒ</strong>ï¼šå¯¹æ•°èºæ—‹ç®—æ³•æ˜¯å®ç°èºæ—‹æ˜Ÿç³»æ—‹è‡‚çš„å…³é”®ï¼Œé…åˆå¾„å‘/è§’åº¦æ‰°åŠ¨ï¼Œå¯ç”Ÿæˆè‡ªç„¶æµç•…çš„é£è½¦çŠ¶ç»“æ„ï¼Œè¿˜åŸçœŸå®æ˜Ÿç³»çš„å½¢æ€ç‰¹å¾ã€‚</li>
<li><strong>è§†è§‰æ ¸å¿ƒ</strong>ï¼šç²’å­åˆ†å±‚ç”Ÿæˆç­–ç•¥ï¼ˆæ ¸çƒ+æ—‹è‡‚ï¼‰+ å·®å¼‚åŒ–è§†è§‰å‚æ•°ï¼ˆé¢œè‰²ã€å°ºå¯¸ï¼‰ï¼Œæ˜¯æå‡æ˜Ÿç³»çœŸå®æ„Ÿçš„æ ¸å¿ƒï¼Œèƒ½å¤Ÿè¿˜åŸçœŸå®æ˜Ÿç³»çš„ç»“æ„ä¸è§†è§‰å·®å¼‚ã€‚</li>
<li><strong>æ€§èƒ½æ ¸å¿ƒ</strong>ï¼š<code>ShaderMaterial</code>+<code>BufferGeometry</code>çš„ç»„åˆï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†10ä¸‡çº§ç²’å­ï¼Œå€ŸåŠ©GPUå¹¶è¡Œå¤„ç†ï¼Œå®ç°æµç•…æ¸²æŸ“ï¼ŒåŒæ—¶æ”¯æŒå¤æ‚çš„è§†è§‰å®šåˆ¶ï¼ˆåœ†å½¢ç²’å­ã€å…‰æ™•ã€è„‰åŠ¨ï¼‰ã€‚</li>
<li><strong>åŠ¨æ€æ ¸å¿ƒ</strong>ï¼šå¾®è§‚ç²’å­å¾®å¼±è„‰åŠ¨+å®è§‚æ˜Ÿç³»æ•´ä½“è‡ªè½¬çš„åŒåŠ¨ç”»é€»è¾‘ï¼ŒåŠ¨é™ç»“åˆï¼Œæ—¢ä¿è¯æ˜Ÿç³»çš„æ•´ä½“å½¢æ€ä¸å˜ï¼Œåˆæå‡è§†è§‰ä½“éªŒçš„ä¸°å¯Œæ€§ï¼Œè¥é€ çœŸå®çš„å®‡å®™æ°›å›´ã€‚</li>
</ol>
<h4 data-id="heading-31">æ‰©å±•å»ºè®®</h4>
<ol>
<li><strong>æ˜Ÿç³»æ•ˆæœå¢å¼º</strong>ï¼š
<ul>
<li>æ·»åŠ æš—ç‰©è´¨æ™•ï¼šåœ¨æ˜Ÿç³»å¤–å›´ç”Ÿæˆä¸€å±‚ç¨€ç–ã€æš—æ·¡çš„ç²’å­ï¼Œæ¨¡æ‹Ÿæš—ç‰©è´¨æ™•ï¼Œæå‡æ˜Ÿç³»çš„çœŸå®æ„Ÿï¼›</li>
<li>æ·»åŠ æ˜Ÿäº‘æ•ˆæœï¼šé€šè¿‡<code>Texture</code>çº¹ç†ç»“åˆç‰‡å…ƒç€è‰²å™¨ï¼Œåœ¨æ—‹è‡‚ä¹‹é—´æ·»åŠ æœ¦èƒ§çš„æ˜Ÿäº‘ï¼Œä¸°å¯Œæ˜Ÿç³»çš„è§†è§‰å±‚æ¬¡ï¼›</li>
<li>åŠ¨æ€é¢œè‰²å˜åŒ–ï¼šé€šè¿‡<code>uniform</code>ä¼ é€’é¢œè‰²å‚æ•°ï¼Œè®©æ ¸çƒä¸æ—‹è‡‚çš„é¢œè‰²éšæ—¶é—´ç¼“æ…¢å˜åŒ–ï¼Œæå‡åœºæ™¯çš„åŠ¨æ€æ„Ÿã€‚</li>
</ul>
</li>
<li><strong>åŠŸèƒ½æ‰©å±•</strong>ï¼š
<ul>
<li>äº¤äº’å¢å¼ºï¼šç»‘å®šé¼ æ ‡ä½ç½®ï¼Œè®©æ˜Ÿç³»è·Ÿéšé¼ æ ‡æ—‹è½¬ã€ç¼©æ”¾ï¼Œæå‡äº¤äº’ä½“éªŒï¼›</li>
<li>å‚æ•°æ§åˆ¶é¢æ¿ï¼šæä¾›å¯è§†åŒ–é¢æ¿ï¼Œå…è®¸ç”¨æˆ·è°ƒæ•´æ—‹è‡‚æ•°é‡ã€æ¾ç´§åº¦ã€è‡ªè½¬é€Ÿåº¦ç­‰å‚æ•°ï¼Œå®æ—¶é¢„è§ˆæ•ˆæœï¼›</li>
<li>ç›¸æœºè‡ªåŠ¨æ¼«æ¸¸ï¼šå®ç°ç›¸æœºçš„è‡ªåŠ¨è·¯å¾„æ¼«æ¸¸ï¼Œè®©ç”¨æˆ·æ— éœ€æ‰‹åŠ¨æ“ä½œå³å¯å…¨æ–¹ä½æŸ¥çœ‹æ˜Ÿç³»çš„ç»†èŠ‚ã€‚</li>
</ul>
</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼š
<ul>
<li>ä½¿ç”¨<code>InstancedBufferGeometry</code>æ›¿ä»£<code>BufferGeometry</code>ï¼Œè¿›ä¸€æ­¥å‡å°‘DrawCallï¼Œæ”¯æŒæ›´å¤šç²’å­ï¼ˆç™¾ä¸‡çº§ï¼‰ï¼›</li>
<li>å¼€å¯æ¸²æŸ“å™¨çš„<code>powerPreference: "high-performance"</code>ï¼Œä¼˜å…ˆä½¿ç”¨é«˜æ€§èƒ½GPUï¼Œæå‡æ¸²æŸ“æ•ˆç‡ï¼›</li>
<li>å‰”é™¤ä¸å¯è§ç²’å­ï¼šé€šè¿‡è§†é”¥ä½“è£å‰ªï¼Œå‰”é™¤å±å¹•å¤–çš„ç²’å­ï¼Œå‡å°‘GPUæ¸²æŸ“å¼€é”€ã€‚</li>
</ul>
</li>
<li><strong>åœºæ™¯æ‰©å±•</strong>ï¼š
<ul>
<li>æ·»åŠ èƒŒæ™¯æ˜Ÿç©ºï¼šé€šè¿‡<code>THREE.TextureLoader</code>åŠ è½½æ˜Ÿç©ºçº¹ç†ï¼Œä½œä¸ºåœºæ™¯èƒŒæ™¯ï¼Œè¥é€ æ›´çœŸå®çš„å®‡å®™ç¯å¢ƒï¼›</li>
<li>æ·»åŠ å…¶ä»–å¤©ä½“ï¼šåœ¨åœºæ™¯ä¸­æ·»åŠ æ’æ˜Ÿã€è¡Œæ˜Ÿç­‰å¤©ä½“ï¼Œä¸°å¯Œå®‡å®™åœºæ™¯çš„å†…å®¹ï¼›</li>
<li>å®ç°å¤šæ˜Ÿç³»å¹¶å­˜ï¼šåˆ›å»ºå¤šä¸ªä¸åŒå½¢æ€çš„æ˜Ÿç³»ï¼Œå½¢æˆæ˜Ÿç³»é›†ç¾¤ï¼Œæå‡åœºæ™¯çš„å£®è§‚æ„Ÿã€‚</li>
</ul>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹è¿›é˜¶å®æˆ˜ï¼šfork/vfork/exec å‡½æ•°æ— + ä½œä¸šå®ç°ï¼ˆå«åƒµå°¸è¿›ç¨‹è§£å†³æ–¹æ¡ˆï¼‰]]></title>    <link>https://juejin.cn/post/7602303923139100722</link>    <guid>https://juejin.cn/post/7602303923139100722</guid>    <pubDate>2026-02-03T00:54:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602303923139100722" data-draft-id="7602303923139084338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹è¿›é˜¶å®æˆ˜ï¼šfork/vfork/exec å‡½æ•°æ— + ä½œä¸šå®ç°ï¼ˆå«åƒµå°¸è¿›ç¨‹è§£å†³æ–¹æ¡ˆï¼‰"/> <meta itemprop="keywords" content="ç®—æ³•,Linux,Cè¯­è¨€"/> <meta itemprop="datePublished" content="2026-02-03T00:54:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦66"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹è¿›é˜¶å®æˆ˜ï¼šfork/vfork/exec å‡½æ•°æ— + ä½œä¸šå®ç°ï¼ˆå«åƒµå°¸è¿›ç¨‹è§£å†³æ–¹æ¡ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦66
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T00:54:43.000Z" title="Tue Feb 03 2026 00:54:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€Linux å°ç¥ä¹‹è·¯ã€‘è¿›ç¨‹è¿›é˜¶å®æˆ˜ï¼šfork/vfork/exec å‡½æ•°æ— + ä½œä¸šå®ç°ï¼ˆå«åƒµå°¸è¿›ç¨‹è§£å†³æ–¹æ¡ˆï¼‰</h2>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ä¸“æ³¨ Linux æŠ€æœ¯åˆ†äº«çš„å°æ¨ã€‚ä¸Šä¸€ç¯‡æˆ‘ä»¬åƒé€äº†è¿›ç¨‹åŸºç¡€æ¦‚å¿µã€çŠ¶æ€å’Œ<code>fork</code>åˆ›å»ºè¿›ç¨‹çš„æ ¸å¿ƒç”¨æ³•ã€‚ä»Šå¤©å°±è¿›å…¥è¿›ç¨‹è¿›é˜¶å®æˆ˜ â€”â€” è§£é”<code>vfork</code>ã€<code>wait</code>ã€<code>waitpid</code>ã€<code>exec</code>å‡½æ•°æ—ç­‰æ ¸å¿ƒ APIï¼Œæ‹†è§£çˆ¶å­è¿›ç¨‹åŒæ­¥ã€è¿›ç¨‹æ›¿æ¢ã€åƒµå°¸è¿›ç¨‹å›æ”¶ç­‰å…³é”®åœºæ™¯ï¼Œæœ€åæ‰‹æŠŠæ‰‹å®ç°èµ„æ–™ä¸­çš„å®æˆ˜ä½œä¸šï¼ˆå®šæ—¶ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ + è‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶ï¼‰ï¼Œå¸®ä½ å½»åº•æŒæ¡ Linux è¿›ç¨‹ç¼–ç¨‹çš„æ ¸å¿ƒæŠ€èƒ½ï¼</p>
<h3 data-id="heading-1">ä¸€ã€è¿›ç¨‹æ ¸å¿ƒå‡½æ•°è¿›é˜¶ï¼šä»åˆ›å»ºåˆ°é€€å‡ºå…¨æµç¨‹</h3>
<p>ä¸Šä¸€ç¯‡æˆ‘ä»¬é‡ç‚¹è®²äº†<code>fork</code>ï¼Œè¿™æ¬¡è¡¥å……å‰©ä½™çš„æ ¸å¿ƒè¿›ç¨‹å‡½æ•°ï¼Œè¦†ç›– â€œè¿›ç¨‹åˆ›å»ºâ†’åŒæ­¥ç­‰å¾…â†’è¿›ç¨‹æ›¿æ¢â†’é€€å‡ºâ€ å…¨ç”Ÿå‘½å‘¨æœŸï¼Œæ¯ä¸ªå‡½æ•°éƒ½é™„å®æˆ˜åœºæ™¯å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h4 data-id="heading-2">1. vforkï¼šçˆ¶å­è¿›ç¨‹ â€œä¸²è¡Œæ‰§è¡Œâ€ çš„åˆ›å»ºæ–¹å¼</h4>
<p><code>vfork</code>ä¸<code>fork</code>åŠŸèƒ½ç±»ä¼¼ï¼Œä½†æ ¸å¿ƒå·®å¼‚åœ¨äº<strong>æ‰§è¡Œé¡ºåºå’Œèµ„æºå…±äº«</strong>ï¼Œé€‚åˆéœ€è¦å­è¿›ç¨‹å…ˆå®Œæˆç‰¹å®šä»»åŠ¡ï¼ˆå¦‚åˆå§‹åŒ–ï¼‰çš„åœºæ™¯ã€‚</p>
<h5 data-id="heading-3">å‡½æ•°è¯¦è§£</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">pid_t</span> <span class="hljs-title">vfork</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šåˆ›å»ºå­è¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ä¼šé˜»å¡ç›´åˆ°å­è¿›ç¨‹é€€å‡ºæˆ–æ‰§è¡Œ<code>exec</code>å‡½æ•°æ—ï¼ˆå­è¿›ç¨‹ä¼˜å…ˆæ‰§è¡Œï¼‰ï¼›</p>
</li>
<li>
<p><strong>å‚æ•°</strong>ï¼šæ— ï¼›</p>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼šä¸<code>fork</code>ä¸€è‡´ï¼ˆçˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹ PIDï¼Œå­è¿›ç¨‹è¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1ï¼‰ï¼›</p>
</li>
<li>
<p><strong>æ ¸å¿ƒå·®å¼‚ï¼ˆä¸ fork å¯¹æ¯”ï¼‰</strong> ï¼š</p>

























<table><thead><tr><th>ç‰¹æ€§</th><th>fork</th><th>vfork</th></tr></thead><tbody><tr><td>æ‰§è¡Œé¡ºåº</td><td>çˆ¶å­è¿›ç¨‹å¹¶å‘ç«äº‰æ‰§è¡Œ</td><td>å­è¿›ç¨‹å…ˆæ‰§è¡Œï¼Œçˆ¶è¿›ç¨‹é˜»å¡</td></tr><tr><td>èµ„æºåˆ†é…</td><td>å­è¿›ç¨‹å¤åˆ¶çˆ¶è¿›ç¨‹èµ„æºï¼ˆç‹¬ç«‹å†…å­˜ç©ºé—´ï¼‰</td><td>å­è¿›ç¨‹ä¸çˆ¶è¿›ç¨‹å…±äº«å†…å­˜ç©ºé—´</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>çˆ¶å­è¿›ç¨‹å¹¶è¡Œæ‰§è¡Œ</td><td>å­è¿›ç¨‹éœ€å…ˆå®Œæˆåˆå§‹åŒ– / ä»»åŠ¡ï¼Œå†è®©çˆ¶è¿›ç¨‹æ‰§è¡Œ</td></tr></tbody></table>
</li>
</ul>
<h5 data-id="heading-4">å®æˆ˜ä»£ç ï¼švfork åˆ›å»ºå­è¿›ç¨‹ï¼ˆå­è¿›ç¨‹å…ˆæ‰§è¡Œï¼‰</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š%d\n"</span>, <span class="hljs-built_in">getpid</span>());

    <span class="hljs-type">pid_t</span> pid = <span class="hljs-built_in">vfork</span>();
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">perror</span>(<span class="hljs-string">"vfork failed"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// å­è¿›ç¨‹ï¼ˆä¼˜å…ˆæ‰§è¡Œï¼‰</span>
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹æ‰§è¡Œï¼ŒPIDï¼š%dï¼Œçˆ¶è¿›ç¨‹PIDï¼š%d\n"</span>, <span class="hljs-built_in">getpid</span>(), <span class="hljs-built_in">getppid</span>());
        <span class="hljs-built_in">sleep</span>(<span class="hljs-number">2</span>); <span class="hljs-comment">// å­è¿›ç¨‹æ‰§è¡Œ2ç§’ä»»åŠ¡</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå³å°†é€€å‡º\n"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// å­è¿›ç¨‹å¿…é¡»è°ƒç”¨exité€€å‡ºï¼Œå¦åˆ™ä¼šå¯¼è‡´çˆ¶è¿›ç¨‹å¼‚å¸¸</span>
    }

    <span class="hljs-comment">// çˆ¶è¿›ç¨‹ï¼ˆå­è¿›ç¨‹é€€å‡ºåæ‰æ‰§è¡Œï¼‰</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹æ¢å¤æ‰§è¡Œï¼Œå­è¿›ç¨‹PIDï¼š%d\n"</span>, pid);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h5 data-id="heading-5">è¿è¡Œç»“æœ</h5>
<p>plaintext</p>
<pre><code class="hljs">çˆ¶è¿›ç¨‹å¯åŠ¨ï¼ŒPIDï¼š1234
å­è¿›ç¨‹æ‰§è¡Œï¼ŒPIDï¼š1235ï¼Œçˆ¶è¿›ç¨‹PIDï¼š1234
å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œå³å°†é€€å‡º
çˆ¶è¿›ç¨‹æ¢å¤æ‰§è¡Œï¼Œå­è¿›ç¨‹PIDï¼š1235
</code></pre>
<ul>
<li><strong>å…³é”®æ³¨æ„</strong>ï¼švfork åˆ›å»ºçš„å­è¿›ç¨‹å¿…é¡»è°ƒç”¨<code>exit</code>é€€å‡ºï¼Œå¦åˆ™ä¼šç»§ç»­æ‰§è¡Œçˆ¶è¿›ç¨‹çš„ä»£ç ï¼ˆå…±äº«å†…å­˜ç©ºé—´ï¼‰ï¼Œå¯¼è‡´ç¨‹åºå¼‚å¸¸ã€‚</li>
</ul>
<h4 data-id="heading-6">2. wait/waitpidï¼šå›æ”¶å­è¿›ç¨‹èµ„æºï¼ˆé¿å…åƒµå°¸è¿›ç¨‹ï¼‰</h4>
<p><code>wait</code>å’Œ<code>waitpid</code>æ˜¯è§£å†³åƒµå°¸è¿›ç¨‹çš„æ ¸å¿ƒå‡½æ•°ï¼Œè´Ÿè´£é˜»å¡çˆ¶è¿›ç¨‹ï¼Œç­‰å¾…å­è¿›ç¨‹é€€å‡ºå¹¶å›æ”¶å…¶ PID å’Œé€€å‡ºçŠ¶æ€ã€‚</p>
<h5 data-id="heading-7">ï¼ˆ1ï¼‰wait å‡½æ•°ï¼šç®€å•å›æ”¶ä»»æ„å­è¿›ç¨‹</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">pid_t</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-type">int</span> *wstatus)</span></span>;
</code></pre>
<ul>
<li><strong>åŠŸèƒ½</strong>ï¼šé˜»å¡çˆ¶è¿›ç¨‹ï¼Œç­‰å¾…ä»»æ„ä¸€ä¸ªå­è¿›ç¨‹é€€å‡ºï¼Œå›æ”¶å…¶èµ„æºï¼›</li>
<li><strong>å‚æ•°</strong>ï¼š<code>wstatus</code>ï¼šå­˜å‚¨å­è¿›ç¨‹é€€å‡ºçŠ¶æ€ï¼ˆä¼  NULL è¡¨ç¤ºä¸å…³æ³¨ï¼‰ï¼›</li>
<li><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å›é€€å‡ºå­è¿›ç¨‹çš„ PIDï¼Œå¤±è´¥è¿”å› - 1ï¼›</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šçˆ¶è¿›ç¨‹åªæœ‰ä¸€ä¸ªå­è¿›ç¨‹ï¼Œæ— éœ€æŒ‡å®šå›æ”¶å¯¹è±¡ã€‚</li>
</ul>
<h5 data-id="heading-8">ï¼ˆ2ï¼‰waitpid å‡½æ•°ï¼šç²¾å‡†å›æ”¶æŒ‡å®šå­è¿›ç¨‹ï¼ˆæ¨èï¼‰</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">pid_t</span> <span class="hljs-title">waitpid</span><span class="hljs-params">(<span class="hljs-type">pid_t</span> pid, <span class="hljs-type">int</span> *wstatus, <span class="hljs-type">int</span> options)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šæ¯”<code>wait</code>æ›´çµæ´»ï¼Œå¯æŒ‡å®šå›æ”¶çš„å­è¿›ç¨‹ã€æ˜¯å¦é˜»å¡ï¼›</p>
</li>
<li>
<p><strong>æ ¸å¿ƒå‚æ•°</strong>ï¼š</p>
<ul>
<li><code>pid</code>ï¼šæŒ‡å®šå›æ”¶çš„å­è¿›ç¨‹ PIDï¼ˆ<code>-1</code>è¡¨ç¤ºå›æ”¶ä»»æ„å­è¿›ç¨‹ï¼Œä¸<code>wait</code>ä¸€è‡´ï¼‰ï¼›</li>
<li><code>wstatus</code>ï¼šå­˜å‚¨å­è¿›ç¨‹é€€å‡ºçŠ¶æ€ï¼›</li>
<li><code>options</code>ï¼š<code>0</code>è¡¨ç¤ºé˜»å¡ç­‰å¾…ï¼ˆä¸<code>wait</code>ä¸€è‡´ï¼‰ï¼Œ<code>WNOHANG</code>è¡¨ç¤ºéé˜»å¡ï¼ˆå­è¿›ç¨‹æœªé€€å‡ºæ—¶ç«‹å³è¿”å› 0ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸè¿”å›é€€å‡ºå­è¿›ç¨‹çš„ PIDï¼Œå­è¿›ç¨‹æœªé€€å‡ºè¿”å› 0ï¼Œå¤±è´¥è¿”å› - 1ï¼›</p>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šçˆ¶è¿›ç¨‹æœ‰å¤šä¸ªå­è¿›ç¨‹ï¼Œéœ€ç²¾å‡†å›æ”¶æˆ–éé˜»å¡å›æ”¶ã€‚</p>
</li>
</ul>
<h5 data-id="heading-9">å®æˆ˜ä»£ç ï¼šwaitpid éé˜»å¡å›æ”¶å­è¿›ç¨‹</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">pid_t</span> pid = fork();
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">perror</span>(<span class="hljs-string">"fork failed"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
        <span class="hljs-comment">// å­è¿›ç¨‹æ‰§è¡Œ3ç§’ä»»åŠ¡</span>
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹PIDï¼š%dï¼Œå¼€å§‹æ‰§è¡Œä»»åŠ¡\n"</span>, <span class="hljs-built_in">getpid</span>());
        <span class="hljs-built_in">sleep</span>(<span class="hljs-number">3</span>);
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å­è¿›ç¨‹æ‰§è¡Œå®Œæ¯•ï¼Œé€€å‡º\n"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);
    }

    <span class="hljs-comment">// çˆ¶è¿›ç¨‹éé˜»å¡å›æ”¶å­è¿›ç¨‹</span>
    <span class="hljs-type">int</span> status;
    <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
        <span class="hljs-type">pid_t</span> ret = <span class="hljs-built_in">waitpid</span>(pid, &amp;status, WNOHANG);
        <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>) {
            <span class="hljs-built_in">perror</span>(<span class="hljs-string">"waitpid failed"</span>);
            <span class="hljs-keyword">break</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// å­è¿›ç¨‹æœªé€€å‡ºï¼Œçˆ¶è¿›ç¨‹å¯æ‰§è¡Œå…¶ä»–ä»»åŠ¡</span>
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹ï¼šå­è¿›ç¨‹æœªé€€å‡ºï¼Œç»§ç»­ç­‰å¾…...\n"</span>);
            <span class="hljs-built_in">sleep</span>(<span class="hljs-number">1</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">// å­è¿›ç¨‹å·²å›æ”¶</span>
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹ï¼šæˆåŠŸå›æ”¶å­è¿›ç¨‹PIDï¼š%d\n"</span>, ret);
            <span class="hljs-keyword">break</span>;
        }
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-10">3. exit/_exitï¼šè¿›ç¨‹é€€å‡ºï¼ˆæ¸…ç†èµ„æºå·®å¼‚ï¼‰</h4>
<p>è¿›ç¨‹é€€å‡ºçš„ä¸¤ä¸ªæ ¸å¿ƒå‡½æ•°ï¼Œå·®å¼‚åœ¨äºæ˜¯å¦æ¸…ç†æ ‡å‡† IO ç¼“å†²åŒºã€‚</p>
<h5 data-id="heading-11">å‡½æ•°è¯¦è§£</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// exitï¼šæ¸…ç†ç¼“å†²åŒºåé€€å‡ºï¼ˆæ¨èï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exit</span><span class="hljs-params">(<span class="hljs-type">int</span> status)</span></span>;

<span class="hljs-comment">// _exitï¼šç›´æ¥é€€å‡ºï¼Œä¸æ¸…ç†ç¼“å†²åŒº</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-type">void</span> _exit(<span class="hljs-type">int</span> status);
</code></pre>
<ul>
<li>
<p><strong>å‚æ•°</strong>ï¼š<code>status</code>ï¼šé€€å‡ºçŠ¶æ€ç ï¼ˆ0 è¡¨ç¤ºæ­£å¸¸é€€å‡ºï¼Œé 0 è¡¨ç¤ºå¼‚å¸¸é€€å‡ºï¼‰ï¼›</p>
</li>
<li>
<p><strong>æ ¸å¿ƒå·®å¼‚</strong>ï¼š</p>
<ul>
<li><code>exit</code>ï¼šé€€å‡ºå‰ä¼šåˆ·æ–°æ ‡å‡† IO ç¼“å†²åŒºï¼ˆå¦‚<code>printf</code>æœªæ¢è¡Œçš„å†…å®¹ä¼šè¾“å‡ºï¼‰ï¼Œæ¸…ç†è¿›ç¨‹èµ„æºï¼›</li>
<li><code>_exit</code>ï¼šç›´æ¥ç»ˆæ­¢è¿›ç¨‹ï¼Œä¸åˆ·æ–°ç¼“å†²åŒºï¼Œèµ„æºç”±å†…æ ¸å›æ”¶ï¼›</li>
</ul>
</li>
<li>
<p><strong>å®æˆ˜å¯¹æ¯”</strong>ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½¿ç”¨exité€€å‡ºï¼ˆä¼šåˆ·æ–°ç¼“å†²åŒºï¼‰"</span>); <span class="hljs-comment">// æ— æ¢è¡Œç¬¦</span>
    <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>); <span class="hljs-comment">// è¾“å‡ºå®Œæ•´å­—ç¬¦ä¸²åé€€å‡º</span>
}
</code></pre>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ä½¿ç”¨_exité€€å‡ºï¼ˆä¸åˆ·æ–°ç¼“å†²åŒºï¼‰"</span>); <span class="hljs-comment">// æ— æ¢è¡Œç¬¦</span>
    _exit(<span class="hljs-number">0</span>); <span class="hljs-comment">// ç¼“å†²åŒºå†…å®¹æœªè¾“å‡ºï¼Œç›´æ¥é€€å‡º</span>
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-12">4. exec å‡½æ•°æ—ï¼šè¿›ç¨‹æ›¿æ¢ï¼ˆå¯åŠ¨æ–°ç¨‹åºï¼‰</h4>
<p><code>exec</code>å‡½æ•°æ—çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯ â€œæ›¿æ¢å½“å‰è¿›ç¨‹çš„ä»£ç æ®µå’Œæ•°æ®æ®µâ€ï¼Œå¯åŠ¨ä¸€ä¸ªæ–°ç¨‹åºè¿è¡Œï¼ŒåŸè¿›ç¨‹çš„ PID ä¿æŒä¸å˜ï¼ˆç›¸å½“äº â€œæ¢é­‚ä¸æ¢å£³â€ï¼‰ï¼Œå¸¸ä¸<code>vfork</code>é…åˆä½¿ç”¨ã€‚</p>
<h5 data-id="heading-13">å¸¸ç”¨å‡½æ•°ï¼šexecl ä¸ execlp</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// execlï¼šéœ€æŒ‡å®šç¨‹åºå®Œæ•´è·¯å¾„</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">execl</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *pathname, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *arg, ... <span class="hljs-comment">/* (char *) NULL */</span>)</span></span>;

<span class="hljs-comment">// execlpï¼šä»ç¯å¢ƒå˜é‡PATHä¸­æŸ¥æ‰¾ç¨‹åºï¼ˆæ— éœ€å®Œæ•´è·¯å¾„ï¼‰</span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">execlp</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *file, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *arg, ... <span class="hljs-comment">/* (char *) NULL */</span>)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>æ ¸å¿ƒå‚æ•°</strong>ï¼š</p>
<ul>
<li><code>pathname</code>ï¼ˆexeclï¼‰ï¼šç¨‹åºå®Œæ•´è·¯å¾„ï¼ˆå¦‚<code>/bin/ls</code>ï¼‰ï¼›</li>
<li><code>file</code>ï¼ˆexeclpï¼‰ï¼šç¨‹åºåç§°ï¼ˆå¦‚<code>ls</code>ï¼Œä» PATH ä¸­æŸ¥æ‰¾ï¼‰ï¼›</li>
<li><code>arg</code>ï¼šç¨‹åºè¿è¡Œå‚æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç¨‹åºåï¼Œåç»­ä¸ºè¿è¡Œå‚æ•°ï¼Œç»“å°¾å¿…é¡»ä»¥<code>NULL</code>ç»ˆæ­¢ï¼‰ï¼›</li>
</ul>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼šæˆåŠŸæ—¶ä¸ä¼šè¿”å›ï¼ˆç¨‹åºå·²æ›¿æ¢ï¼‰ï¼Œå¤±è´¥è¿”å› - 1ï¼›</p>
</li>
<li>
<p><strong>å®æˆ˜ä»£ç ï¼šexeclp å¯åŠ¨ ls å‘½ä»¤</strong></p>
</li>
</ul>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"å½“å‰è¿›ç¨‹PIDï¼š%dï¼Œå³å°†å¯åŠ¨lså‘½ä»¤\n"</span>, <span class="hljs-built_in">getpid</span>());

    <span class="hljs-comment">// ç”¨execlpå¯åŠ¨lså‘½ä»¤ï¼ˆ-lå‚æ•°ï¼Œç»“å°¾å¿…é¡»åŠ NULLï¼‰</span>
    <span class="hljs-type">int</span> ret = <span class="hljs-built_in">execlp</span>(<span class="hljs-string">"ls"</span>, <span class="hljs-string">"ls"</span>, <span class="hljs-string">"-l"</span>, <span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">if</span> (ret == <span class="hljs-number">-1</span>) {
        <span class="hljs-built_in">perror</span>(<span class="hljs-string">"execlp failed"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// ä»¥ä¸‹ä»£ç ä¸ä¼šæ‰§è¡Œï¼ˆè¿›ç¨‹å·²è¢«lsæ›¿æ¢ï¼‰</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"è¿™è¡Œä»£ç ä¸ä¼šè¾“å‡º\n"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h5 data-id="heading-14">è¿è¡Œç»“æœ</h5>
<p>plaintext</p>
<pre><code class="hljs language-diff" lang="diff">å½“å‰è¿›ç¨‹PIDï¼š1236ï¼Œå³å°†å¯åŠ¨lså‘½ä»¤
æ€»ç”¨é‡ 16
<span class="hljs-deletion">-rwxr-xr-x 1 zcy zcy 8960 2æœˆ  2 15:30 a.out</span>
<span class="hljs-deletion">-rw-r--r-- 1 zcy zcy  780 2æœˆ  2 15:29 test.c</span>
</code></pre>
<h3 data-id="heading-15">äºŒã€å®æˆ˜ä½œä¸šï¼šå®šæ—¶ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼ˆè¿›ç¨‹ + æ–‡ä»¶æ“ä½œç»¼åˆï¼‰</h3>
<p>ç»“åˆèµ„æ–™ä¸­çš„ä½œä¸šè¦æ±‚ï¼Œå®ç°ä¸€ä¸ª â€œå®šæ—¶ç”Ÿæˆæ—¥å¿— + è‡ªåŠ¨æ¸…ç†æ—§æ–‡ä»¶â€ çš„ç¨‹åºï¼Œç»¼åˆè¿ç”¨è¿›ç¨‹ã€æ–‡ä»¶æ“ä½œã€æ—¶é—´ç¼–ç¨‹ç­‰çŸ¥è¯†ç‚¹ï¼š</p>
<h4 data-id="heading-16">ä½œä¸šè¦æ±‚</h4>
<ol>
<li>åˆ›å»º<code>log</code>ç›®å½•ï¼Œæ—¥å¿—æ–‡ä»¶ä»¥å½“å‰æ—¶é—´å‘½åï¼›</li>
<li>æ—¥å¿—æ–‡ä»¶ä¸­è®°å½• â€œå½“å‰æ˜¯ç¬¬ N ä¸ªæ—¥å¿—æ–‡ä»¶â€ï¼›</li>
<li>æ¯ 3 ç§’ç”Ÿæˆä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ï¼Œ<code>log</code>ç›®å½•ä»…ä¿ç•™æœ€æ–° 10 ä¸ªï¼Œè¶…è¿‡åˆ™åˆ é™¤æœ€æ—©çš„ï¼›</li>
<li>çˆ¶è¿›ç¨‹æŒç»­æ‰“å°å½“å‰æ—¶é—´ï¼Œå­è¿›ç¨‹è´Ÿè´£ç”Ÿæˆæ—¥å¿—å’Œæ¸…ç†æ–‡ä»¶ã€‚</li>
</ol>
<h4 data-id="heading-17">å®Œæ•´å®ç°ä»£ç </h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;dirent.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> LOG_DIR <span class="hljs-string">"log"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_LOG_NUM 10  <span class="hljs-comment">// æœ€å¤šä¿ç•™10ä¸ªæ—¥å¿—æ–‡ä»¶</span></span>

<span class="hljs-comment">// å‡½æ•°ï¼šåˆ›å»ºlogç›®å½•</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">create_log_dir</span><span class="hljs-params">()</span> {
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> <span class="hljs-title">st</span>;</span>
    <span class="hljs-keyword">if</span> (stat(LOG_DIR, &amp;st) == <span class="hljs-number">-1</span>) {
        <span class="hljs-comment">// ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•ï¼ˆæƒé™0755ï¼‰</span>
        <span class="hljs-keyword">if</span> (mkdir(LOG_DIR, <span class="hljs-number">0755</span>) == <span class="hljs-number">-1</span>) {
            perror(<span class="hljs-string">"mkdir log failed"</span>);
            <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
        }
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"åˆ›å»ºlogç›®å½•æˆåŠŸ\n"</span>);
    }
}

<span class="hljs-comment">// å‡½æ•°ï¼šè·å–logç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶æ•°é‡åŠæœ€æ—©çš„æ–‡ä»¶åç§°</span>
<span class="hljs-type">int</span> <span class="hljs-title function_">get_log_count_and_oldest</span><span class="hljs-params">(<span class="hljs-type">char</span> *oldest_file)</span> {
    DIR *dir = opendir(LOG_DIR);
    <span class="hljs-keyword">if</span> (!dir) {
        perror(<span class="hljs-string">"opendir log failed"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">dirent</span> *<span class="hljs-title">entry</span>;</span>
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">stat</span> <span class="hljs-title">st</span>;</span>
    <span class="hljs-type">int</span> count = <span class="hljs-number">0</span>;
    <span class="hljs-type">time_t</span> oldest_time = time(<span class="hljs-literal">NULL</span>); <span class="hljs-comment">// åˆå§‹åŒ–ä¸ºå½“å‰æ—¶é—´</span>
    <span class="hljs-type">char</span> file_path[<span class="hljs-number">256</span>];

    <span class="hljs-keyword">while</span> ((entry = readdir(dir)) != <span class="hljs-literal">NULL</span>) {
        <span class="hljs-comment">// è·³è¿‡.å’Œ..</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(entry-&gt;d_name, <span class="hljs-string">"."</span>) == <span class="hljs-number">0</span> || <span class="hljs-built_in">strcmp</span>(entry-&gt;d_name, <span class="hljs-string">".."</span>) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">continue</span>;
        }

        <span class="hljs-comment">// æ‹¼æ¥æ–‡ä»¶å®Œæ•´è·¯å¾„</span>
        <span class="hljs-built_in">snprintf</span>(file_path, <span class="hljs-keyword">sizeof</span>(file_path), <span class="hljs-string">"%s/%s"</span>, LOG_DIR, entry-&gt;d_name);
        <span class="hljs-keyword">if</span> (stat(file_path, &amp;st) == <span class="hljs-number">0</span>) {
            <span class="hljs-comment">// ä»…ç»Ÿè®¡æ™®é€šæ–‡ä»¶ï¼ˆæ—¥å¿—æ–‡ä»¶ï¼‰</span>
            <span class="hljs-keyword">if</span> (S_ISREG(st.st_mode)) {
                count++;
                <span class="hljs-comment">// è®°å½•æœ€æ—©çš„æ–‡ä»¶</span>
                <span class="hljs-keyword">if</span> (st.st_ctime &lt; oldest_time) {
                    oldest_time = st.st_ctime;
                    <span class="hljs-built_in">strcpy</span>(oldest_file, file_path);
                }
            }
        }
    }

    closedir(dir);
    <span class="hljs-keyword">return</span> count;
}

<span class="hljs-comment">// å‡½æ•°ï¼šç”Ÿæˆæ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">generate_log_file</span><span class="hljs-params">(<span class="hljs-type">int</span> log_num)</span> {
    <span class="hljs-comment">// è·å–å½“å‰æ—¶é—´ï¼Œæ ¼å¼åŒ–æ–‡ä»¶åï¼ˆå¦‚log/2026-02-02_15-30-00.logï¼‰</span>
    <span class="hljs-type">time_t</span> now = time(<span class="hljs-literal">NULL</span>);
    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> *<span class="hljs-title">lt</span> =</span> localtime(&amp;now);
    <span class="hljs-type">char</span> log_name[<span class="hljs-number">128</span>];
    <span class="hljs-built_in">snprintf</span>(log_name, <span class="hljs-keyword">sizeof</span>(log_name), <span class="hljs-string">"%s/%04d-%02d-%02d_%02d-%02d-%02d.log"</span>,
             LOG_DIR, lt-&gt;tm_year + <span class="hljs-number">1900</span>, lt-&gt;tm_mon + <span class="hljs-number">1</span>, lt-&gt;tm_mday,
             lt-&gt;tm_hour, lt-&gt;tm_min, lt-&gt;tm_sec);

    <span class="hljs-comment">// åˆ›å»ºå¹¶å†™å…¥æ—¥å¿—</span>
    FILE *fp = fopen(log_name, <span class="hljs-string">"w"</span>);
    <span class="hljs-keyword">if</span> (!fp) {
        perror(<span class="hljs-string">"fopen log failed"</span>);
        <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-built_in">fprintf</span>(fp, <span class="hljs-string">"å½“å‰æ˜¯ç¬¬%dä¸ªæ—¥å¿—æ–‡ä»¶\n"</span>, log_num);
    fclose(fp);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼š%s\n"</span>, log_name);
}

<span class="hljs-comment">// å‡½æ•°ï¼šæ¸…ç†æœ€æ—©çš„æ—¥å¿—æ–‡ä»¶</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">delete_oldest_log</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *oldest_file)</span> {
    <span class="hljs-keyword">if</span> (remove(oldest_file) == <span class="hljs-number">0</span>) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"åˆ é™¤æœ€æ—©æ—¥å¿—æ–‡ä»¶ï¼š%s\n"</span>, oldest_file);
    } <span class="hljs-keyword">else</span> {
        perror(<span class="hljs-string">"remove oldest log failed"</span>);
    }
}

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// åˆ›å»ºlogç›®å½•</span>
    create_log_dir();

    <span class="hljs-comment">// åˆ›å»ºå­è¿›ç¨‹ï¼šå­è¿›ç¨‹ç”Ÿæˆæ—¥å¿—ï¼Œçˆ¶è¿›ç¨‹æ‰“å°å½“å‰æ—¶é—´</span>
    <span class="hljs-type">pid_t</span> pid = fork();
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">-1</span>) {
        perror(<span class="hljs-string">"fork failed"</span>);
        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);
    }

    <span class="hljs-comment">// å­è¿›ç¨‹ï¼šæ¯3ç§’ç”Ÿæˆæ—¥å¿—ï¼Œæ¸…ç†æ—§æ–‡ä»¶</span>
    <span class="hljs-keyword">if</span> (pid == <span class="hljs-number">0</span>) {
        <span class="hljs-type">int</span> log_num = <span class="hljs-number">1</span>;
        <span class="hljs-type">char</span> oldest_file[<span class="hljs-number">256</span>];
        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
            <span class="hljs-comment">// ç”Ÿæˆæ—¥å¿—æ–‡ä»¶</span>
            generate_log_file(log_num);
            log_num++;

            <span class="hljs-comment">// æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ•°é‡ï¼Œè¶…è¿‡10ä¸ªåˆ™åˆ é™¤æœ€æ—©çš„</span>
            <span class="hljs-type">int</span> count = get_log_count_and_oldest(oldest_file);
            <span class="hljs-keyword">if</span> (count &gt; MAX_LOG_NUM) {
                delete_oldest_log(oldest_file);
            }

            <span class="hljs-comment">// æ¯3ç§’ç”Ÿæˆä¸€ä¸ª</span>
            sleep(<span class="hljs-number">3</span>);
        }
    }

    <span class="hljs-comment">// çˆ¶è¿›ç¨‹ï¼šæŒç»­æ‰“å°å½“å‰æ—¶é—´</span>
    <span class="hljs-keyword">if</span> (pid &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) {
            <span class="hljs-type">time_t</span> now = time(<span class="hljs-literal">NULL</span>);
            <span class="hljs-type">char</span> time_str[<span class="hljs-number">64</span>];
            strftime(time_str, <span class="hljs-keyword">sizeof</span>(time_str), <span class="hljs-string">"%Y-%m-%d %H:%M:%S"</span>, localtime(&amp;now));
            <span class="hljs-built_in">printf</span>(<span class="hljs-string">"çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š%s\n"</span>, time_str);
            sleep(<span class="hljs-number">1</span>);
        }

        <span class="hljs-comment">// å›æ”¶å­è¿›ç¨‹ï¼ˆå®é™…ä¸ä¼šæ‰§è¡Œï¼Œçˆ¶è¿›ç¨‹æ˜¯æ­»å¾ªç¯ï¼‰</span>
        wait(<span class="hljs-literal">NULL</span>);
    }

    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-18">ä»£ç æ ¸å¿ƒé€»è¾‘</h4>
<ol>
<li><strong>ç›®å½•åˆ›å»º</strong>ï¼š<code>create_log_dir</code>å‡½æ•°æ£€æŸ¥<code>log</code>ç›®å½•æ˜¯å¦å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºï¼›</li>
<li><strong>æ—¥å¿—ç”Ÿæˆ</strong>ï¼š<code>generate_log_file</code>å‡½æ•°ä»¥ â€œå¹´ - æœˆ - æ—¥_æ—¶ - åˆ† - ç§’.logâ€ å‘½åæ—¥å¿—ï¼Œå†™å…¥æ–‡ä»¶åºå·ï¼›</li>
<li><strong>æ–‡ä»¶æ¸…ç†</strong>ï¼š<code>get_log_count_and_oldest</code>å‡½æ•°éå†<code>log</code>ç›®å½•ï¼Œç»Ÿè®¡æ–‡ä»¶æ•°é‡å¹¶è®°å½•æœ€æ—©çš„æ–‡ä»¶ï¼Œè¶…è¿‡ 10 ä¸ªåˆ™è°ƒç”¨<code>delete_oldest_log</code>åˆ é™¤ï¼›</li>
<li><strong>è¿›ç¨‹åˆ†å·¥</strong>ï¼šå­è¿›ç¨‹å¾ªç¯ç”Ÿæˆæ—¥å¿—ï¼ˆæ¯ 3 ç§’ä¸€æ¬¡ï¼‰ï¼Œçˆ¶è¿›ç¨‹æŒç»­æ‰“å°å½“å‰æ—¶é—´ï¼ˆæ¯ 1 ç§’ä¸€æ¬¡ï¼‰ï¼Œçˆ¶å­è¿›ç¨‹å¹¶å‘æ‰§è¡Œã€‚</li>
</ol>
<h4 data-id="heading-19">ç¼–è¯‘ä¸è¿è¡Œ</h4>
<p>bash</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># ç¼–è¯‘</span>
gcc log_generator.c -o log_generator
<span class="hljs-comment"># è¿è¡Œ</span>
./log_generator
</code></pre>
<h4 data-id="heading-20">è¿è¡Œæ•ˆæœ</h4>
<p>plaintext</p>
<pre><code class="hljs language-bash" lang="bash">åˆ›å»º<span class="hljs-built_in">log</span>ç›®å½•æˆåŠŸ
çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š2026-02-02 15:35:00
ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼š<span class="hljs-built_in">log</span>/2026-02-02_15-35-00.<span class="hljs-built_in">log</span>
çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š2026-02-02 15:35:01
çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š2026-02-02 15:35:02
çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š2026-02-02 15:35:03
ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ï¼š<span class="hljs-built_in">log</span>/2026-02-02_15-35-03.<span class="hljs-built_in">log</span>
çˆ¶è¿›ç¨‹ - å½“å‰æ—¶é—´ï¼š2026-02-02 15:35:04
...
<span class="hljs-comment"># ç”Ÿæˆ11ä¸ªæ–‡ä»¶åï¼Œåˆ é™¤æœ€æ—©çš„</span>
åˆ é™¤æœ€æ—©æ—¥å¿—æ–‡ä»¶ï¼š<span class="hljs-built_in">log</span>/2026-02-02_15-35-00.<span class="hljs-built_in">log</span>
</code></pre>
<h3 data-id="heading-21">ä¸‰ã€è¯¾å‰åˆ†äº«å‡½æ•°ï¼šstrcspn ä¸ strstrï¼ˆå­—ç¬¦ä¸²å¤„ç†é«˜é¢‘ï¼‰</h3>
<p>èµ„æ–™ä¸­æåˆ°çš„ä¸¤ä¸ªå­—ç¬¦ä¸²å¤„ç†å‡½æ•°ï¼Œæ˜¯é¢è¯•å’Œå¼€å‘ä¸­çš„é«˜é¢‘å·¥å…·ï¼Œè¡¥å……å…¶ç”¨æ³•ï¼š</p>
<h4 data-id="heading-22">1. strcspnï¼šæŸ¥æ‰¾å­—ç¬¦é¦–æ¬¡å‡ºç°ä½ç½®</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">size_t</span> <span class="hljs-title">strcspn</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *s1, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *s2)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šè®¡ç®—<code>s1</code>ä¸­ â€œä¸åŒ…å«<code>s2</code>ä¸­ä»»ä½•å­—ç¬¦â€ çš„æœ€é•¿å‰ç¼€é•¿åº¦ï¼ˆå³<code>s2</code>ä¸­å­—ç¬¦åœ¨<code>s1</code>ä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼‰ï¼›</p>
</li>
<li>
<p><strong>è¿”å›å€¼</strong>ï¼šå‰ç¼€é•¿åº¦ï¼ˆä¹Ÿæ˜¯<code>s2</code>å­—ç¬¦é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼‰ï¼›</p>
</li>
<li>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">char</span> s1[] = <span class="hljs-string">"abcdefg"</span>;
    <span class="hljs-type">char</span> s2[] = <span class="hljs-string">"d"</span>;
    <span class="hljs-type">size_t</span> len = <span class="hljs-built_in">strcspn</span>(s1, s2);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"'d'åœ¨s1ä¸­é¦–æ¬¡å‡ºç°çš„ç´¢å¼•ï¼š%ld\n"</span>, len); <span class="hljs-comment">// è¾“å‡º3ï¼ˆa(0)ã€b(1)ã€c(2)ã€d(3)ï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
</li>
</ul>
<h4 data-id="heading-23">2. strstrï¼šæŸ¥æ‰¾å­ä¸²</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">char</span> *<span class="hljs-title">strstr</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *haystack, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *needle)</span></span>;
</code></pre>
<ul>
<li>
<p><strong>åŠŸèƒ½</strong>ï¼šåœ¨<code>haystack</code>å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾<code>needle</code>å­ä¸²ï¼Œæ‰¾åˆ°è¿”å›å­ä¸²é¦–åœ°å€ï¼Œæœªæ‰¾åˆ°è¿”å› NULLï¼›</p>
</li>
<li>
<p><strong>å®æˆ˜ç¤ºä¾‹</strong>ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#include &lt;stdio.h&gt;</span>
<span class="hljs-comment">#include &lt;string.h&gt;</span>

<span class="hljs-keyword">int</span> main() {
    char s[] = <span class="hljs-string">"hello linux world"</span>;
    char <span class="hljs-function"><span class="hljs-keyword">sub</span>[] = "<span class="hljs-title">linux</span>"</span>;
    char *<span class="hljs-keyword">pos</span> = strstr(s, <span class="hljs-function"><span class="hljs-keyword">sub</span>)</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">pos</span>) {
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æ‰¾åˆ°å­ä¸²ï¼š%s\n"</span>, <span class="hljs-keyword">pos</span>); <span class="hljs-regexp">//</span> è¾“å‡º<span class="hljs-string">"linux world"</span>
    } <span class="hljs-keyword">else</span> {
        <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æœªæ‰¾åˆ°å­ä¸²\n"</span>);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
</li>
</ul>
<h3 data-id="heading-24">å››ã€æ€»ç»“ï¼šè¿›ç¨‹è¿›é˜¶æ ¸å¿ƒè¦ç‚¹</h3>
<ol>
<li><strong>è¿›ç¨‹åˆ›å»º</strong>ï¼š<code>fork</code>ï¼ˆå¹¶å‘ï¼‰å’Œ<code>vfork</code>ï¼ˆä¸²è¡Œï¼‰æŒ‰éœ€é€‰æ‹©ï¼Œ<code>vfork</code>å­è¿›ç¨‹å¿…é¡»è°ƒç”¨<code>exit</code>é€€å‡ºï¼›</li>
<li><strong>èµ„æºå›æ”¶</strong>ï¼š<code>waitpid</code>æ¯”<code>wait</code>æ›´çµæ´»ï¼Œéé˜»å¡æ¨¡å¼é€‚åˆçˆ¶è¿›ç¨‹æ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œé¿å…åƒµå°¸è¿›ç¨‹ï¼›</li>
<li><strong>è¿›ç¨‹æ›¿æ¢</strong>ï¼š<code>exec</code>å‡½æ•°æ—æ›¿æ¢è¿›ç¨‹ä»£ç ï¼Œ<code>execlp</code>æ— éœ€å®Œæ•´è·¯å¾„ï¼ˆä» PATH æŸ¥æ‰¾ï¼‰ï¼Œç»“å°¾å¿…é¡»åŠ <code>NULL</code>ï¼›</li>
<li><strong>ç»¼åˆå®æˆ˜</strong>ï¼šè¿›ç¨‹ + æ–‡ä»¶æ“ä½œ + æ—¶é—´ç¼–ç¨‹çš„ç»„åˆæ˜¯åµŒå…¥å¼ / æœåŠ¡å™¨å¼€å‘çš„å¸¸è§åœºæ™¯ï¼Œéœ€æŒæ¡ç›®å½•éå†ã€æ–‡ä»¶å±æ€§è·å–ã€å®šæ—¶ä»»åŠ¡ç­‰æŠ€èƒ½ï¼›</li>
<li><strong>å­—ç¬¦ä¸²å·¥å…·</strong>ï¼š<code>strcspn</code>å’Œ<code>strstr</code>æ˜¯å­—ç¬¦ä¸²å¤„ç†çš„é«˜é¢‘å‡½æ•°ï¼Œç®€åŒ–å­—ç¬¦æŸ¥æ‰¾å’Œå­ä¸²åŒ¹é…é€»è¾‘ã€‚</li>
</ol>
<p>æŒæ¡è¿™äº›è¿›ç¨‹è¿›é˜¶æŠ€èƒ½åï¼Œä½ å°±èƒ½åº”å¯¹ Linux å¤šä»»åŠ¡å¼€å‘ã€å¹¶å‘ç¼–ç¨‹çš„æ ¸å¿ƒåœºæ™¯ã€‚ä¸‹ä¸€ç¯‡æˆ‘ä»¬ä¼šå­¦ä¹ è¿›ç¨‹é—´é€šä¿¡ï¼ˆIPCï¼‰ï¼Œè§£å†³çˆ¶å­è¿›ç¨‹ / æ— å…³è¿›ç¨‹çš„æ•°æ®äº¤äº’é—®é¢˜ï¼Œæ•¬è¯·å…³æ³¨ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€æ­¥ç”Ÿæˆï¼Œåƒç´ ç©ºé—´ï¼Œä½•æºæ˜è®© pMF åšåˆ°äº†]]></title>    <link>https://juejin.cn/post/7602146335215501352</link>    <guid>https://juejin.cn/post/7602146335215501352</guid>    <pubDate>2026-02-03T02:28:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602146335215501352" data-draft-id="7602135278665072692" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€æ­¥ç”Ÿæˆï¼Œåƒç´ ç©ºé—´ï¼Œä½•æºæ˜è®© pMF åšåˆ°äº†"/> <meta itemprop="keywords" content="ç®—æ³•,è®¡ç®—æœºè§†è§‰,æ·±åº¦å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-02-03T02:28:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CoovallyAIHub"/> <meta itemprop="url" content="https://juejin.cn/user/2461151071843739"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€æ­¥ç”Ÿæˆï¼Œåƒç´ ç©ºé—´ï¼Œä½•æºæ˜è®© pMF åšåˆ°äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2461151071843739/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CoovallyAIHub
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:28:54.000Z" title="Tue Feb 03 2026 02:28:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½•æºæ˜å›¢é˜Ÿæœ€è¿‘æŠ›å‡ºçš„è¿™ç¯‡å·¥ä½œï¼Œå¤šå°‘æœ‰ç‚¹â€œæŠŠè€é—®é¢˜ç›´æ¥æ€æ¡Œå­é‡æ¥â€çš„å‘³é“ã€‚ä»–ä»¬æå‡ºçš„Â **<em>Pixel MeanFlowï¼ˆpMFï¼‰</em> **ï¼Œåœ¨ä¸å€ŸåŠ©æ½œåœ¨ç©ºé—´ã€ä¸ä¾èµ–å¤šæ­¥é‡‡æ ·çš„å‰æä¸‹ï¼Œåªç”¨ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼Œå°±ç”Ÿæˆäº†è´¨é‡ç›¸å½“æ‰å®çš„å›¾åƒã€‚åœ¨ ImageNet ä¸Šï¼Œ256Ã—256 åˆ†è¾¨ç‡åšåˆ° 2.22 çš„ FIDï¼Œ512Ã—512 ä¹Ÿç¨³åœ¨ 2.48ã€‚</p>
<p>å¦‚æœæŠŠè¿™äº›æ•°å­—å’Œè¿‡å»å‡ å¹´ä¸»æµæ‰©æ•£æ¨¡å‹çš„è®¾ç½®æ”¾åœ¨ä¸€èµ·å¯¹ç…§ï¼Œå¾ˆéš¾ä¸æ„è¯†åˆ°ï¼š<strong>è¿™ä¸æ˜¯ä¸€æ¬¡å°å¹…ä¼˜åŒ–ï¼Œè€Œæ˜¯ä¸€æ¬¡è·¯çº¿å±‚é¢çš„æ”¶ç¼©ã€‚</strong></p>
<p>è®ºæ–‡ä¸­åœ¨ ImageNet 256Ã—256 ä¸ 512Ã—512 çš„ç³»ç»Ÿçº§å¯¹æ¯”ç»“æœï¼Œè¿™äº›è¡¨æ ¼åŸºæœ¬å¥ å®šäº† pMF åœ¨â€œå•æ­¥ç”Ÿæˆâ€èµ›é“ä¸Šçš„ä½ç½®ã€‚</p>
<h2 data-id="heading-0"><strong>ç”Ÿæˆæ¨¡å‹ä¸ºä»€ä¹ˆæ€»æ˜¯åˆæ…¢åˆç»•ï¼Ÿ</strong></h2>
<p>æŠŠæ—¶é—´æ‹¨å›åˆ°å‰å‡ å¹´ï¼Œç”Ÿæˆæ¨¡å‹çš„ä¸»æµè·¯çº¿å‡ ä¹æ˜¯å›ºå®šçš„ï¼šä¸€æ­¥ä¸€æ­¥é‡‡æ ·ï¼Œæˆ–è€…å…ˆå‹è¿›æ½œåœ¨ç©ºé—´å†ç”Ÿæˆã€‚<strong>æ…¢</strong>ï¼Œæ˜¯æ˜¾æ€§çš„ï¼›<strong>ç»•</strong>ï¼Œåˆ™è—åœ¨ç³»ç»Ÿç»“æ„é‡Œã€‚</p>
<p>DDPMã€Flow MatchingÂ éœ€è¦å‡ åæ­¥åå¤ä¿®æ­£ï¼ŒStable DiffusionÂ çœ‹ä¼¼è½»å·§ï¼Œå®åˆ™æŠŠå¤æ‚åº¦è½¬ç§»ç»™äº†ä¸€ä¸ªåºå¤§çš„ VAE ç¼–ç â€”è§£ç ç³»ç»Ÿã€‚</p>
<p>è¿™äº›è®¾è®¡å¹¶éæ‹è„‘è¢‹å¾—æ¥ï¼Œå®ƒä»¬åœ¨ç¨³å®šæ€§å’Œå¯æ§æ€§ä¸Šç¡®å®ç«‹è¿‡åŠŸã€‚ä½†å·¥ç¨‹ä»£ä»·ä¹Ÿéšä¹‹å †ç§¯ï¼šæ¨ç†å»¶è¿Ÿé«˜ã€è°ƒå‚ç©ºé—´å¤§ã€æ¨¡å‹ç»“æ„è‡ƒè‚¿ã€‚ä¸€æ—¦è¿›å…¥éƒ¨ç½²é˜¶æ®µï¼Œè¿™äº›é—®é¢˜ä¼šè¢«æ— é™æ”¾å¤§ã€‚</p>
<p>åæ¥å‡ºç°çš„ä¸€è‡´æ€§æ¨¡å‹ã€MeanFlowï¼Œå¼€å§‹å°è¯•æŠŠâ€œå¤šæ­¥â€å‹ç¼©æˆâ€œä¸€æ­¥â€ï¼›è€Œ JiT ç­‰å·¥ä½œï¼Œåˆ™ç›´æ¥æŒ‘æˆ˜â€œåƒç´ ç©ºé—´æ˜¯ä¸æ˜¯ä¸€å®šä¸å¯è¡Œâ€ã€‚é—®é¢˜æ˜¯ï¼Œè¿™ä¸¤æ¡è·¯å§‹ç»ˆæ²¡æœ‰çœŸæ­£æ±‡åˆã€‚</p>
<h2 data-id="heading-1"><strong>å•æ­¥ + åƒç´ ç©ºé—´ï¼Œä¸ºä»€ä¹ˆä¸€ç›´æ²¡äººèµ°é€šï¼Ÿ</strong></h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00a1e398afbf469fa42c3e463a6cde79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=RadvI%2BbscnPNNA%2BH4%2Bcex%2BrK0is%3D" alt="screenshot_2026-02-02_16-18-15.png" loading="lazy"/></p>
<p>è¡¨é¢çœ‹ï¼Œè¿™åªæ˜¯æŠŠä¸¤ä¸ªå·²æœ‰æƒ³æ³•æ‹¼åœ¨ä¸€èµ·ï¼›ä½†çœŸæ­£åšè¿‡çš„äººéƒ½çŸ¥é“ï¼Œè¿™ä¸€æ­¥å¹¶ä¸ç®€å•ã€‚</p>
<p>å•æ­¥ç”Ÿæˆå¯¹æ¨¡å‹è¡¨è¾¾èƒ½åŠ›çš„è¦æ±‚æé«˜ï¼Œè€Œåƒç´ ç©ºé—´åˆæ˜¯é«˜ç»´ã€å¼ºå™ªå£°çš„â€œé‡ç¾åŒºâ€ã€‚å¤šæ•°æ–¹æ³•è¦ä¹ˆåœ¨é€Ÿåº¦åœºé‡Œè¿·è·¯ï¼Œè¦ä¹ˆç”Ÿæˆç»“æœç›´æ¥å¤±æ§ã€‚</p>
<p>pMF çš„åˆ‡å…¥ç‚¹ï¼Œæ°æ°ä¸æ˜¯ç»§ç»­åœ¨â€œé¢„æµ‹ä»€ä¹ˆâ€ä¸Šæ­»ç£•ï¼Œè€Œæ˜¯æ¢äº†ä¸€ä¸ªé—®é¢˜é—®æ³•ï¼š</p>
<p><strong>ç½‘ç»œçœŸçš„éœ€è¦ç›´æ¥å­¦é‚£ä¸ªæœ€éš¾çš„ç›®æ ‡å—ï¼Ÿ</strong></p>
<p>ä½œè€…ç”¨ä¸€å¼ æå…¶å…‹åˆ¶çš„ç¤ºæ„å›¾ï¼ŒæŠŠè¿™ä¸ªé—®é¢˜æ‘†äº†å‡ºæ¥ã€‚</p>
<h2 data-id="heading-2"><strong>æŠŠâ€œå­¦ä»€ä¹ˆâ€å’Œâ€œæ€ä¹ˆç½šâ€æ‹†å¼€</strong></h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/428e907aeb5a4aa1af31ef63e8c967a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=T13qvaA7RwLHiCKlwvstN3MgsJ0%3D" alt="screenshot_2026-02-02_16-19-25.png" loading="lazy"/></p>
<p>pMF çš„æ ¸å¿ƒæƒ³æ³•ï¼Œè¯´ç©¿äº†å¹¶ä¸å¤æ‚ï¼Œå´éå¸¸æœ‰åˆ†å¯¸æ„Ÿï¼š</p>
<p>ç½‘ç»œè¾“å‡ºçš„ç©ºé—´ï¼Œå’ŒæŸå¤±çº¦æŸçš„ç©ºé—´ï¼Œä¸å¿…æ˜¯åŒä¸€ä¸ªã€‚</p>
<p><strong>æ¨¡å‹ç›´æ¥è¾“å‡ºçš„æ˜¯ä¸€å¼ â€œå»å™ªåçš„å›¾åƒâ€â€”â€”è®°ä½œ xã€‚å®ƒä¸è¦æ±‚å®Œç¾å¤åŸå¹²å‡€æ ·æœ¬ï¼Œä½†è¢«å‡å®šè½åœ¨ä¸€ä¸ªä½ç»´å›¾åƒæµå½¢ä¸Šï¼Œæ›´æ¥è¿‘çœŸå®ä¸–ç•Œé‡Œçš„å›¾åƒå½¢æ€ã€‚</strong></p>
<p>è€ŒçœŸæ­£æ‰¿æ‹…ç‰©ç†ä¸æ•°å­¦çº¦æŸçš„ï¼Œæ˜¯æŸå¤±å‡½æ•°ï¼Œå®ƒä»ç„¶å·¥ä½œåœ¨ MeanFlow çš„é€Ÿåº¦ç©ºé—´é‡Œã€‚</p>
<p>ä¸¤è€…ä¹‹é—´ï¼Œé€šè¿‡ä¸€ä¸ªçº¿æ€§çš„ã€å¯è§£é‡Šçš„æ˜ å°„è¿æ¥èµ·æ¥ï¼š</p>
<p>x = zâ‚œ âˆ’ t Â· u(zâ‚œ, r, t)</p>
<p>ç»™å‡ºäº†å¯¹åº”çš„ä»¿çœŸå¯è§†åŒ–ï¼š</p>
<p>zâ‚œ å™ªå£°å¯†é›†ã€ç»“æ„æ··ä¹±ï¼›u é«˜ç»´ä¸”ä¸ç›´è§‚ï¼›è€Œ x å·²ç»å‘ˆç°å‡ºæ¨¡ç³Šä½†åˆç†çš„å›¾åƒè½®å»“ã€‚</p>
<p>è¿™ä¸€æ­¥ï¼Œå…¶å®æ˜¯æŠŠâ€œéš¾å­¦çš„ä¸œè¥¿â€ï¼Œæ‚„æ‚„è—è¿›äº†æŸå¤±é‡Œã€‚</p>
<h2 data-id="heading-3"><strong>é«˜ç»´ç©ºé—´é‡Œï¼Œé¢„æµ‹è°æ›´ç°å®ï¼Ÿ</strong></h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2eb36bdb235e4338905591472b3bae1a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=ANaVSNCakrGkPk0Q0m4mN4xEopE%3D" alt="screenshot_2026-02-02_16-25-23.png" loading="lazy"/></p>
<p>ç›´è§‰å¯ä»¥éª—äººï¼Œå®éªŒä¸ä¼šã€‚</p>
<p>è®ºæ–‡ç”¨ä¸€ä¸ªäºŒç»´ç©å…·å®éªŒï¼ŒæŠŠç»´åº¦ä» 2 ä¸€è·¯æ‹‰åˆ° 512ï¼Œå¯¹æ¯” x-é¢„æµ‹å’Œ u-é¢„æµ‹çš„è¡Œä¸ºå·®å¼‚ã€‚ç»“æœåœ¨ Figure 2 ä¸­ä¸€ç›®äº†ç„¶ï¼š</p>
<p>ç»´åº¦ä¸€é«˜ï¼Œu-é¢„æµ‹å‡ ä¹ç«‹åˆ»å´©ç›˜ï¼›è€Œ x-é¢„æµ‹ä»ç„¶èƒ½ç»™å‡ºç»“æ„ç¨³å®šçš„ç»“æœã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/110c2e4c73c643fc929f76daa89c8694~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=e214e0J3bD3y6ghzs6qYiuAz0LE%3D" alt="screenshot_2026-02-02_16-27-58.png" loading="lazy"/></p>
<p>çœŸå®æ•°æ®é›†ä¸Šçš„è¡¨ç°æ›´åŠ ç›´æ¥ã€‚</p>
<p>åœ¨ ImageNet 64Ã—64 ä¸‹ï¼Œä¸¤è€…å°šèƒ½æ‰“å¹³ï¼›ä½†åˆ°äº† 256Ã—256ï¼Œu-é¢„æµ‹çš„ FID é£™åˆ° 164.89ï¼Œè€Œ x-é¢„æµ‹ä»èƒ½ç»´æŒåœ¨å¯ç”¨åŒºé—´ï¼ˆFID 9.56ï¼‰ã€‚è¿™äº›æ•°å­—é›†ä¸­å‘ˆç°åœ¨ Table 2 ä¸­ã€‚</p>
<p>è¯´åˆ°åº•ï¼Œx æ›´åƒâ€œå›¾åƒåº”è¯¥é•¿ä»€ä¹ˆæ ·â€ï¼Œè€Œ u æ›´åƒâ€œå™ªå£°ä¸–ç•Œé‡Œçš„å¯¼æ•°â€ã€‚ç¥ç»ç½‘ç»œä¼šé€‰æ‹©è°ï¼Œç­”æ¡ˆå¹¶ä¸æ„å¤–ã€‚</p>
<h2 data-id="heading-4"><strong>æ„ŸçŸ¥æŸå¤±ï¼Œç»ˆäºç”¨åœ¨äº†è¯¥ç”¨çš„åœ°æ–¹</strong></h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10c08510eb4e41b2926b0fc7a5c9e3c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=Uuf%2BtV7JTZ%2FoFGFuyo5%2BU2tHKN4%3D" alt="screenshot_2026-02-02_16-29-18.png" loading="lazy"/></p>
<p>pMF ç›´æ¥åœ¨åƒç´ ç©ºé—´å‡ºå›¾ï¼Œè¿™ä»¶äº‹å¸¦æ¥äº†ä¸€ä¸ªå¾ˆç°å®çš„å¥½å¤„ï¼š</p>
<p>æ„ŸçŸ¥æŸå¤±ç»ˆäºä¸å†æ˜¯â€œVAE ä¸“å±â€ã€‚</p>
<p>åŠ å…¥Â VGG-based LPIPSï¼ŒFIDÂ ä» 9.56 ä¸‹é™åˆ° 5.62ï¼›æ¢æˆÂ ConvNeXt-V2Â ç‰ˆæœ¬åï¼Œè¿›ä¸€æ­¥å‹åˆ° 3.53ã€‚æå‡å¹…åº¦ä¸ç®—å«è“„ï¼Œä½†å®Œå…¨è¯´å¾—é€šã€‚</p>
<p>è¿™ä¸æ˜¯æŠ€å·§å †å ï¼Œè€Œæ˜¯è·¯å¾„æ”¹å˜å¸¦æ¥çš„çº¢åˆ©ã€‚</p>
<h2 data-id="heading-5"><strong>ä¸€æ­¥ç”Ÿæˆï¼Œä¹Ÿèƒ½ç«™ä¸Šæ€§èƒ½å‰æ’</strong></h2>
<p>åœ¨Â ImageNet 256Ã—256Â ä¸ 512Ã—512 çš„å®Œæ•´ç³»ç»Ÿå¯¹æ¯”ä¸­ï¼ŒpMF çš„ä½ç½®ç›¸å½“æ¸…æ™°ï¼š</p>
<p>ä¸€æ¬¡å‰å‘ä¼ æ’­ï¼ˆNFE=1ï¼‰ï¼ŒFID å´èƒ½å’Œå¤šæ­¥æ‰©æ•£æ¨¡å‹æ°æ‰‹è…•ã€‚</p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d254f3e86a4b4e6989fdc25a3ad37212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=uNVliy%2FaV8MluEX8ijjZtB%2Foh4g%3D" alt="screenshot_2026-02-02_16-29-46.png" loading="lazy"/></p>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/00ba45da7f3045c5bcbea69a2f836633~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=awLFwVrXoi0%2BMIWjOBSCt5wjF6k%3D" alt="screenshot_2026-02-02_16-29-58.png" loading="lazy"/></p>
<p>ä»å‚æ•°é‡ã€ç®—åŠ›å¼€é”€åˆ°ç”Ÿæˆè´¨é‡ï¼ŒpMF å¹¶éâ€œä¾¿å®œå‡‘æ•°â€çš„æ–¹æ¡ˆï¼Œè€Œæ˜¯ä¸€ä¸ªæ­£ç»çš„é«˜æ€§èƒ½æ¨¡å‹ï¼Œåªæ˜¯æŠŠæµç¨‹å‹ç¼©åˆ°äº†æé™ã€‚</p>
<h2 data-id="heading-6"><strong>è¿™é¡¹å·¥ä½œçœŸæ­£ç•™ä¸‹çš„ï¼Œæ˜¯ä¸€æ¡è·¯</strong></h2>
<p align="center"><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d1657731cbec4cf5b51fdbfa296d4d9e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29vdmFsbHlBSUh1Yg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770690534&amp;x-signature=oNLmnpOHPOnN0TzpB%2BpOY74xvAw%3D" alt="screenshot_2026-02-02_16-34-57.png" loading="lazy"/></p>
<p>å›å¤´çœ‹ï¼ŒpMF çš„æ„ä¹‰ï¼Œå¯èƒ½å¹¶ä¸åªåœ¨äºåˆ·æ–°äº†æŸå‡ ä¸ªæŒ‡æ ‡ã€‚</p>
<p>å®ƒæ›´åƒæ˜¯åœ¨æé†’æˆ‘ä»¬ï¼šç”Ÿæˆæ¨¡å‹ä¸ä¸€å®šéå¾—å±‚å±‚åµŒå¥—ã€æ­¥æ­¥å›æº¯ã€‚åªè¦ç›®æ ‡è®¾å¾—è¶³å¤Ÿèªæ˜ï¼Œçº¦æŸæ”¾åœ¨åˆé€‚çš„ä½ç½®ï¼Œä¸€æ¬¡æ˜ å°„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç¨³å®šè€Œå¯ä¿¡çš„ã€‚</p>
<p>æœªæ¥è¿™æ¡è·¯çº¿èƒ½èµ°å¤šè¿œï¼Œè¿˜éœ€è¦æ—¶é—´éªŒè¯ã€‚ä½†è‡³å°‘ï¼Œä½•æºæ˜å›¢é˜Ÿå·²ç»æŠŠâ€œå•æ­¥ + åƒç´ ç©ºé—´â€è¿™é“é¢˜ï¼Œæ¸…æ¸…æ¥šæ¥šåœ°å†™å‡ºäº†ä¸€ç§å¯è¡Œè§£ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç³»ç»ŸåŸºç¡€ä¸ç±»å‹æ¨æ–­]]></title>    <link>https://juejin.cn/post/7602177113685688371</link>    <guid>https://juejin.cn/post/7602177113685688371</guid>    <pubDate>2026-02-03T02:28:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602177113685688371" data-draft-id="7602064004317413439" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç³»ç»ŸåŸºç¡€ä¸ç±»å‹æ¨æ–­"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:28:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Anita_Sun"/> <meta itemprop="url" content="https://juejin.cn/user/1811635884786839"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€çœ‹å°±æ‡‚çš„ Haskell æ•™ç¨‹ - ç±»å‹ç³»ç»ŸåŸºç¡€ä¸ç±»å‹æ¨æ–­
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1811635884786839/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Anita_Sun
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:28:14.000Z" title="Tue Feb 03 2026 02:28:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»13åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Haskell ä½œä¸º<strong>çº¯å‡½æ•°å¼é™æ€å¼ºç±»å‹ç¼–ç¨‹è¯­è¨€</strong>ï¼Œå…¶ç±»å‹ç³»ç»Ÿæ˜¯è®¾è®¡çš„æ ¸å¿ƒåŸºçŸ³ï¼Œæ ¸å¿ƒè®¾è®¡æ€æƒ³å›´ç»•<strong>ç¼–è¯‘æœŸç±»å‹å®‰å…¨ã€æ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°æŠ½è±¡ã€æ³›å‹ä»£ç çš„é«˜åº¦å¤ç”¨ã€æœ€å°åŒ–æ˜¾å¼ç±»å‹æ ‡æ³¨</strong>å±•å¼€â€”â€”é€šè¿‡é™æ€å¼ºç±»å‹åœ¨ç¼–è¯‘æœŸæ‹¦æˆªå‡ ä¹æ‰€æœ‰ç±»å‹ç›¸å…³é”™è¯¯ï¼Œç»“åˆå¼ºå¤§çš„ç±»å‹æ¨æ–­æœºåˆ¶å‡å°‘å†—ä½™çš„ç±»å‹ä»£ç ï¼Œä»¥å¤šæ€ç±»å‹å®ç°è·¨ç±»å‹çš„ä»£ç å¤ç”¨ï¼ŒåŒæ—¶é€šè¿‡çµæ´»çš„ç±»å‹æ‰©å±•ç‰¹æ€§å¹³è¡¡â€œç±»å‹å®‰å…¨â€ä¸â€œå¼€å‘æ•ˆç‡â€ï¼Œæœ€ç»ˆè®©ä»£ç å…¼å…·<strong>ä¸¥è°¨æ€§ã€å¤ç”¨æ€§å’Œç®€æ´æ€§</strong>ï¼Œè¿™ä¹Ÿæ˜¯Haskellèƒ½æˆä¸ºå‡½æ•°å¼ç¼–ç¨‹å…¸èŒƒã€å¹¿æ³›åº”ç”¨äºé«˜å¯é ç³»ç»Ÿå¼€å‘çš„æ ¸å¿ƒåŸå› ã€‚</p>
<h2 data-id="heading-0">ç±»å‹ä¸ç±»å‹ç­¾å</h2>
<p>ç±»å‹æ˜¯Haskellä¸­æè¿°<strong>å€¼çš„ç‰¹å¾ä¸è¡Œä¸ºè¾¹ç•Œ</strong>çš„æ ¸å¿ƒæ ‡è¯†ï¼Œç±»å‹ç­¾ååˆ™æ˜¯æ˜¾å¼æ ‡æ³¨å˜é‡ã€å‡½æ•°ç±»å‹çš„è¯­æ³•è§„èŒƒï¼Œæ˜¯æ²Ÿé€šç¨‹åºå‘˜ä¸ç¼–è¯‘å™¨çš„é‡è¦æ¡¥æ¢ï¼Œä¹Ÿæ˜¯é™æ€ç±»å‹æ£€æŸ¥çš„åŸºç¡€ï¼Œæ ¸å¿ƒåŒ…å«ä¸‰ä¸ªå…³é”®çŸ¥è¯†ç‚¹ï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹å‡é™„å¯è¿è¡Œä»£ç ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-1">:: å«ä¹‰</h3>
<p><code>::</code> æ˜¯Haskellçš„<strong>ç±»å‹æ ‡æ³¨ç¬¦</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯æ˜¾å¼æŒ‡å®šâ€œæ ‡è¯†ç¬¦ï¼ˆå˜é‡/å‡½æ•°/è¡¨è¾¾å¼ï¼‰å¯¹åº”çš„ç±»å‹â€ï¼Œè¯­æ³•æ ¼å¼ä¸º<code>æ ‡è¯†ç¬¦ :: ç±»å‹</code>ã€‚ç¼–è¯‘å™¨ä¼šæ ¹æ®<code>::</code>æ ‡æ³¨çš„ç±»å‹è¿›è¡Œä¸¥æ ¼æ ¡éªŒï¼Œè‹¥ä»£ç é€»è¾‘ä¸æ ‡æ³¨ç±»å‹å†²çªåˆ™ç›´æ¥æŠ¥ç¼–è¯‘é”™è¯¯ï¼›åŒæ—¶<code>::</code>ä¹Ÿå¯è¾…åŠ©ç¼–è¯‘å™¨å®Œæˆå¤æ‚åœºæ™¯çš„ç±»å‹æ¨æ–­ï¼Œé¿å…æ­§ä¹‰ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. å˜é‡ç±»å‹æ ‡æ³¨</span>
age :: <span class="hljs-type">Int</span>          <span class="hljs-comment">-- æ•´æ•°ç±»å‹</span>
age <span class="hljs-operator">=</span> <span class="hljs-number">20</span>
name :: String      <span class="hljs-comment">-- å­—ç¬¦ä¸²ç±»å‹ï¼ˆç­‰ä»·äº[Char]ï¼‰</span>
name <span class="hljs-operator">=</span> "Haskell"
nums :: [<span class="hljs-keyword">Double</span>]    <span class="hljs-comment">-- æµ®ç‚¹æ•°åˆ—è¡¨ç±»å‹</span>
nums <span class="hljs-operator">=</span> [<span class="hljs-number">1.2</span>, <span class="hljs-number">3.4</span>, <span class="hljs-number">5.6</span>]
person :: (String, <span class="hljs-type">Int</span>)  <span class="hljs-comment">-- äºŒå…ƒå…ƒç»„ç±»å‹</span>
person <span class="hljs-operator">=</span> ("Tom", <span class="hljs-number">25</span>)

<span class="hljs-comment">-- 2. å‡½æ•°ç±»å‹æ ‡æ³¨</span>
<span class="hljs-keyword">add</span> :: <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>
<span class="hljs-keyword">add</span> x y <span class="hljs-operator">=</span> x <span class="hljs-operator">+</span> y

<span class="hljs-comment">-- 3. è¡¨è¾¾å¼ç±»å‹æ ‡æ³¨ï¼ˆè§£å†³æ¨æ–­æ­§ä¹‰ï¼‰</span>
num :: <span class="hljs-keyword">Double</span>
num <span class="hljs-operator">=</span> (<span class="hljs-number">1</span> <span class="hljs-operator">+</span> <span class="hljs-number">2</span> <span class="hljs-operator">*</span> <span class="hljs-number">3</span>) :: <span class="hljs-keyword">Double</span>  <span class="hljs-comment">-- æ˜¾å¼æŒ‡å®šè¡¨è¾¾å¼ç»“æœä¸ºDouble</span>
</code></pre>
<h3 data-id="heading-2">å‡½æ•°ç±»å‹-&gt; å³ç»“åˆ</h3>
<p><code>-&gt;</code> æ˜¯Haskell<strong>å‡½æ•°ç±»å‹çš„æ ¸å¿ƒè¡¨ç¤ºç¬¦</strong>ï¼Œç”¨äºæè¿°â€œå‡½æ•°çš„è¾“å…¥ç±»å‹ä¸è¾“å‡ºç±»å‹çš„æ˜ å°„å…³ç³»â€ï¼Œä¸”<code>-&gt;</code>å…·æœ‰<strong>å¤©ç„¶çš„å³ç»“åˆç‰¹æ€§</strong>ï¼ˆç¼–è¯‘å™¨é»˜è®¤æŒ‰ä»å³åˆ°å·¦çš„é¡ºåºåµŒå¥—è§£æï¼‰ï¼Œå³<code>a -&gt; b -&gt; c</code>ç­‰ä»·äº<code>a -&gt; (b -&gt; c)</code>ï¼Œè¿™ä¸€ç‰¹æ€§ä¸Haskellçš„<strong>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰</strong> ç‰¹æ€§æ·±åº¦ç»‘å®šâ€”â€”Haskellä¸­æ‰€æœ‰å¤šå‚æ•°å‡½æ•°çš„æœ¬è´¨ï¼Œéƒ½æ˜¯â€œæ¥æ”¶ä¸€ä¸ªå‚æ•°ã€è¿”å›ä¸€ä¸ªæ–°å‡½æ•°â€çš„å•å‚æ•°å‡½æ•°ï¼Œæ–°å‡½æ•°å†æ¥æ”¶ä¸‹ä¸€ä¸ªå‚æ•°ï¼Œç›´è‡³è¿”å›æœ€ç»ˆç»“æœã€‚</p>
<pre><code class="hljs language-rust" lang="rust">-- <span class="hljs-number">1</span>. å³ç»“åˆç¤ºä¾‹<span class="hljs-number">1</span>ï¼šåŒå‚æ•°å‡½æ•°çš„æœ¬è´¨æ˜¯è¿”å›å‡½æ•°çš„å•å‚æ•°å‡½æ•°
f :: Int <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool
f x y = x &gt; length y  -- ç­‰ä»·äº f :: Int <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool)
-- è°ƒç”¨æ–¹å¼<span class="hljs-number">1</span>ï¼šå¸¸è§„è°ƒç”¨ï¼ˆéšå¼æŸ¯é‡ŒåŒ–ï¼‰
f1 = f <span class="hljs-number">5</span> <span class="hljs-string">"abc"</span>  -- ç»“æœï¼šTrueï¼ˆ<span class="hljs-number">5</span> &gt; <span class="hljs-number">3</span>ï¼‰
-- è°ƒç”¨æ–¹å¼<span class="hljs-number">2</span>ï¼šåˆ†æ­¥è°ƒç”¨ï¼ˆæ˜¾å¼æŸ¯é‡ŒåŒ–ï¼Œä½“ç°å³ç»“åˆæœ¬è´¨ï¼‰
f' :: <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Bool
f' = f <span class="hljs-number">5</span>        -- fæ¥æ”¶Intå‚æ•°<span class="hljs-number">5</span>ï¼Œè¿”å›ä¸€ä¸ª<span class="hljs-string">"String -&gt; Bool"</span>çš„æ–°å‡½æ•°
f2 = f' <span class="hljs-string">"abc"</span>   -- ç»“æœï¼šTrue

-- <span class="hljs-number">2</span>. å³ç»“åˆç¤ºä¾‹<span class="hljs-number">2</span>ï¼šä¸‰å‚æ•°å‡½æ•°çš„åµŒå¥—è§£æ
g :: a <span class="hljs-punctuation">-&gt;</span> b <span class="hljs-punctuation">-&gt;</span> c <span class="hljs-punctuation">-&gt;</span> (b, c, a)
g x y z = (y, z, x)  -- ç­‰ä»·äº g :: a <span class="hljs-punctuation">-&gt;</span> (b <span class="hljs-punctuation">-&gt;</span> (c <span class="hljs-punctuation">-&gt;</span> (b, c, a)))
-- åˆ†æ­¥è°ƒç”¨ï¼šæ¯å±‚æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›æ–°å‡½æ•°
g1 :: b <span class="hljs-punctuation">-&gt;</span> c <span class="hljs-punctuation">-&gt;</span> (b, c, Int)
g1 = g <span class="hljs-number">10</span>          -- æ¥æ”¶a=Intï¼Œè¿”å›b<span class="hljs-punctuation">-&gt;</span>c<span class="hljs-punctuation">-&gt;</span>(b,c,Int)
g2 :: c <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">String</span>, c, Int)
g2 = g1 <span class="hljs-string">"hello"</span>    -- æ¥æ”¶b=<span class="hljs-type">String</span>ï¼Œè¿”å›c<span class="hljs-punctuation">-&gt;</span>(<span class="hljs-type">String</span>,c,Int)
g3 = g2 <span class="hljs-number">3.14</span>       -- æ¥æ”¶c=Doubleï¼Œè¿”å›æœ€ç»ˆç»“æœ (<span class="hljs-string">"hello"</span>,<span class="hljs-number">3.14</span>,<span class="hljs-number">10</span>)
</code></pre>
<h3 data-id="heading-3">å¤šå‚æ•°å‡½æ•°ç±»å‹</h3>
<p>åŸºäºHaskellçš„æŸ¯é‡ŒåŒ–ç‰¹æ€§å’Œ<code>-&gt;</code>çš„å³ç»“åˆè§„åˆ™ï¼Œ<strong>ä¸å­˜åœ¨ä¸“é—¨çš„å¤šå‚æ•°å‡½æ•°ç±»å‹è¡¨ç¤º</strong>ï¼Œæ‰€æœ‰å¤šå‚æ•°å‡½æ•°çš„ç±»å‹ï¼Œå‡é€šè¿‡<code>-&gt;</code>çš„åµŒå¥—ï¼ˆå³ç»“åˆï¼‰å®ç°â€”â€”å‚æ•°çš„æ•°é‡å¯¹åº”<code>-&gt;</code>çš„æ•°é‡ï¼ˆnä¸ªå‚æ•°å¯¹åº”nä¸ª<code>-&gt;</code>ï¼‰ï¼Œæœ€å³ä¾§ä¸ºå‡½æ•°çš„æœ€ç»ˆè¿”å›ç±»å‹ï¼Œå·¦ä¾§ä¾æ¬¡ä¸ºå„å‚æ•°çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">-- <span class="hljs-number">1</span>. ä¸€å…ƒå‡½æ•°ï¼ˆ<span class="hljs-number">1</span>ä¸ªå‚æ•°ï¼Œ<span class="hljs-number">1</span>ä¸ª<span class="hljs-punctuation">-&gt;</span>ï¼‰
square :: Int <span class="hljs-punctuation">-&gt;</span> Int
square x = x * x
showInt :: Int <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>
showInt = show

-- <span class="hljs-number">2</span>. äºŒå…ƒå‡½æ•°ï¼ˆ<span class="hljs-number">2</span>ä¸ªå‚æ•°ï¼Œ<span class="hljs-number">2</span>ä¸ª<span class="hljs-punctuation">-&gt;</span>ï¼‰
plus :: Num a =&gt; a <span class="hljs-punctuation">-&gt;</span> a <span class="hljs-punctuation">-&gt;</span> a
plus x y = x + y
compareStr :: <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> Ordering
compareStr s1 s2 = <span class="hljs-title function_ invoke__">compare</span> (length s1) (length s2)

-- <span class="hljs-number">3</span>. ä¸‰å…ƒå‡½æ•°ï¼ˆ<span class="hljs-number">3</span>ä¸ªå‚æ•°ï¼Œ<span class="hljs-number">3</span>ä¸ª<span class="hljs-punctuation">-&gt;</span>ï¼‰
addThree :: Int <span class="hljs-punctuation">-&gt;</span> Int <span class="hljs-punctuation">-&gt;</span> Int <span class="hljs-punctuation">-&gt;</span> Int
addThree x y z = x + y + z
lookupByKey :: <span class="hljs-built_in">Eq</span> k =&gt; k <span class="hljs-punctuation">-&gt;</span> [(k, v)] <span class="hljs-punctuation">-&gt;</span> Maybe v
lookupByKey k [] = Nothing
lookupByKey <span class="hljs-title function_ invoke__">k</span> ((k',v):xs) | k == k' = Just v
                          | otherwise = lookupByKey k xs

-- <span class="hljs-number">4</span>. å¸¦ç±»å‹ç±»çº¦æŸçš„å¤šå‚æ•°å‡½æ•°
printIfEq :: (<span class="hljs-built_in">Eq</span> a, Show a) =&gt; a <span class="hljs-punctuation">-&gt;</span> a <span class="hljs-punctuation">-&gt;</span> <span class="hljs-title function_ invoke__">IO</span> ()
printIfEq x y = <span class="hljs-keyword">if</span> x == y then print x <span class="hljs-keyword">else</span> print <span class="hljs-string">"Not Equal"</span>
</code></pre>
<h2 data-id="heading-4">ç±»å‹æ¨æ–­æœºåˆ¶</h2>
<p>ç±»å‹æ¨æ–­æ˜¯Haskellçš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ï¼ŒæŒ‡<strong>ç¼–è¯‘å™¨æ— éœ€æ˜¾å¼çš„ç±»å‹æ ‡æ³¨ï¼Œé€šè¿‡åˆ†æè¡¨è¾¾å¼çš„è¯­æ³•ç»“æ„ã€è¿ç®—å…³ç³»å’Œç±»å‹ç±»çº¦æŸï¼Œè‡ªåŠ¨æ¨å¯¼å‡ºå˜é‡/å‡½æ•°/è¡¨è¾¾å¼çš„æœ€é€šç”¨ç±»å‹</strong>ï¼Œè¿™ä¸€ç‰¹æ€§è®©Haskellå…¼å…·â€œé™æ€ç±»å‹çš„å®‰å…¨æ€§â€å’Œâ€œåŠ¨æ€ç±»å‹çš„ç®€æ´æ€§â€ï¼Œå…¶åº•å±‚ä¾æ‰˜ç»å…¸ç®—æ³•å®ç°ï¼ŒåŒæ—¶å­˜åœ¨æ˜ç¡®çš„æ¨æ–­è§„åˆ™å’Œé™åˆ¶ï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹å‡é™„ä»£ç ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-5">Hindley-Milner ç®—æ³•</h3>
<p>Hindley-Milnerï¼ˆHMï¼‰ç®—æ³•æ˜¯Haskell<strong>ç±»å‹æ¨æ–­çš„åº•å±‚æ ¸å¿ƒç®—æ³•</strong>ï¼Œä¹Ÿæ˜¯ç»å¤§å¤šæ•°çº¯å‡½æ•°å¼è¯­è¨€ï¼ˆOCamlã€Scalaç­‰ï¼‰ç±»å‹æ¨æ–­çš„åŸºç¡€ï¼Œè¯¥ç®—æ³•äº1969å¹´æå‡ºï¼Œæ ¸å¿ƒä¼˜åŠ¿æ˜¯<strong>èƒ½åœ¨æ— æ˜¾å¼æ ‡æ³¨æ—¶ï¼Œæ¨å¯¼å‡ºè¡¨è¾¾å¼çš„â€œæœ€ä¸€èˆ¬é€šç”¨ç±»å‹ï¼ˆMost General Unifier, MGUï¼‰â€</strong> ï¼Œä¸”æ¨å¯¼è¿‡ç¨‹é«˜æ•ˆã€æ— æ­§ä¹‰ï¼Œå…¼é¡¾é€šç”¨æ€§å’Œç¼–è¯‘æ•ˆç‡ã€‚</p>
<p>æ ¸å¿ƒåŸç†ï¼šé€šè¿‡ä¸ºè¡¨è¾¾å¼ä¸­çš„æœªçŸ¥ç±»å‹åˆ†é…<strong>ç±»å‹å˜é‡</strong>ï¼ˆå¦‚aã€bã€cï¼‰ï¼Œå†æ ¹æ®è¡¨è¾¾å¼çš„è¿ç®—è§„åˆ™å»ºç«‹<strong>ç±»å‹ç­‰å¼</strong>ï¼Œæœ€ç»ˆé€šè¿‡<strong>åˆä¸€ï¼ˆUnificationï¼‰</strong> ç®—æ³•æ±‚è§£ç±»å‹å˜é‡ï¼Œå¾—åˆ°æœ€é€šç”¨çš„ç±»å‹ã€‚</p>
<pre><code class="hljs language-rust" lang="rust">-- æ— éœ€ä»»ä½•ç±»å‹æ ‡æ³¨ï¼ŒHMç®—æ³•è‡ªåŠ¨æ¨å¯¼æœ€é€šç”¨ç±»å‹
-- <span class="hljs-number">1</span>. æ’ç­‰å‡½æ•°ï¼šæ¨å¯¼ä¸º a <span class="hljs-punctuation">-&gt;</span> aï¼ˆaä¸ºä»»æ„ç±»å‹å˜é‡ï¼‰
id x = x
-- å¯é€‚é…ä»»æ„ç±»å‹ï¼Œæ— çº¦æŸ
id1 = id <span class="hljs-number">10</span>        -- Int <span class="hljs-punctuation">-&gt;</span> Int
id2 = id <span class="hljs-string">"abc"</span>     -- <span class="hljs-type">String</span> <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span>
id3 = id [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]   -- [Int] <span class="hljs-punctuation">-&gt;</span> [Int]

-- <span class="hljs-number">2</span>. åˆ—è¡¨æ˜ å°„å‡½æ•°ï¼šæ¨å¯¼ä¸º (a <span class="hljs-punctuation">-&gt;</span> b) <span class="hljs-punctuation">-&gt;</span> [a] <span class="hljs-punctuation">-&gt;</span> [b]
map' f [] = []
map' <span class="hljs-title function_ invoke__">f</span> (x:xs) = f x : map' f xs
-- è‡ªåŠ¨é€‚é…ä¸åŒçš„ç±»å‹æ˜ å°„
map1 = map' (+<span class="hljs-number">1</span>) [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]  -- (Int<span class="hljs-punctuation">-&gt;</span>Int) <span class="hljs-punctuation">-&gt;</span> [Int]<span class="hljs-punctuation">-&gt;</span>[Int]ï¼Œç»“æœ[<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
map2 = map' show [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]  -- (Int<span class="hljs-punctuation">-&gt;</span><span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> [Int]<span class="hljs-punctuation">-&gt;</span>[<span class="hljs-type">String</span>]ï¼Œç»“æœ[<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>]

-- <span class="hljs-number">3</span>. å…ƒç»„äº¤æ¢å‡½æ•°ï¼šæ¨å¯¼ä¸º (a, b) <span class="hljs-punctuation">-&gt;</span> (b, a)
<span class="hljs-title function_ invoke__">swap</span> (x, y) = (y, x)
swap1 = <span class="hljs-title function_ invoke__">swap</span> (<span class="hljs-number">10</span>, <span class="hljs-string">"abc"</span>)  -- (Int,<span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">String</span>,Int)ï¼Œç»“æœ(<span class="hljs-string">"abc"</span>,<span class="hljs-number">10</span>)
swap2 = <span class="hljs-title function_ invoke__">swap</span> ([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-number">3.14</span>)-- ([Int],Double) <span class="hljs-punctuation">-&gt;</span> (Double,[Int])ï¼Œç»“æœ(<span class="hljs-number">3.14</span>,[<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])
</code></pre>
<h3 data-id="heading-6">æ— çº¦æŸ/çº¦æŸæ¨æ–­</h3>
<p>æ ¹æ®è¡¨è¾¾å¼æ˜¯å¦æ¶‰åŠç±»å‹ç±»æ“ä½œï¼ŒHaskellçš„ç±»å‹æ¨æ–­åˆ†ä¸º<strong>æ— çº¦æŸæ¨æ–­</strong>å’Œ<strong>çº¦æŸæ¨æ–­</strong>ä¸¤ç±»ï¼ŒäºŒè€…å‡åŸºäºHMç®—æ³•ï¼Œæ ¸å¿ƒå·®å¼‚æ˜¯æ¨å¯¼ç»“æœæ˜¯å¦å¸¦æœ‰ç±»å‹ç±»çº¦æŸï¼Œè¦†ç›–æ‰€æœ‰å¸¸è§„ç¼–ç åœºæ™¯ï¼š</p>
<h4 data-id="heading-7">æ— çº¦æŸæ¨æ–­</h4>
<p>é’ˆå¯¹<strong>æ— ç±»å‹ç±»ä¾èµ–ã€æ— ç‰¹æ®Šè¡Œä¸ºé™åˆ¶</strong>çš„è¡¨è¾¾å¼ï¼Œæ¨å¯¼å‡º<strong>çº¯æ³›å‹ç±»å‹</strong>ï¼ˆä»…åŒ…å«ç±»å‹å˜é‡ï¼Œæ— ä»»ä½•çº¦æŸï¼‰ï¼Œè¯¥ç±»å‹å¯é€‚é…ä»»æ„å…·ä½“ç±»å‹ï¼Œæ˜¯Haskellå‚æ•°å¤šæ€çš„æ ¸å¿ƒå®ç°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- æ— éœ€ç±»å‹æ ‡æ³¨ï¼Œç¼–è¯‘å™¨æ— çº¦æŸæ¨æ–­çº¯æ³›å‹ç±»å‹
-- 1. å•å‚æ•°æ³›å‹å‡½æ•°ï¼šæ¨æ–­ä¸º a -&gt; <span class="hljs-section">[a]</span>
repeatOne <span class="hljs-attr">x</span> = [x]
<span class="hljs-attr">r1</span> = repeatOne <span class="hljs-number">10</span>    -- [Int]
<span class="hljs-attr">r2</span> = repeatOne <span class="hljs-string">'a'</span>   -- [Char]
<span class="hljs-attr">r3</span> = repeatOne [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>] -- [[Int]]

-- 2. åŒå‚æ•°æ³›å‹å‡½æ•°ï¼šæ¨æ–­ä¸º a -&gt; b -&gt; (a, b, <span class="hljs-section">[a]</span>)
combine x <span class="hljs-attr">y</span> = (x, y, [x, x])
<span class="hljs-attr">c1</span> = combine <span class="hljs-number">5</span> <span class="hljs-string">"abc"</span>  -- (Int, String, [Int])
<span class="hljs-attr">c2</span> = combine <span class="hljs-string">'a'</span> <span class="hljs-number">3.14</span> -- (Char, Double, [Char])

-- 3. åˆ—è¡¨æ“ä½œæ³›å‹å‡½æ•°ï¼šæ¨æ–­ä¸º <span class="hljs-section">[a]</span> -&gt; Int
listLen <span class="hljs-attr">xs</span> = length xs
<span class="hljs-attr">l1</span> = listLen [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]  -- Int
<span class="hljs-attr">l2</span> = listLen <span class="hljs-string">"hello"</span>  -- Int
</code></pre>
<h4 data-id="heading-8">çº¦æŸæ¨æ–­</h4>
<p>é’ˆå¯¹<strong>æ¶‰åŠç±»å‹ç±»æ“ä½œï¼ˆå¦‚+ã€==ã€showï¼‰</strong> çš„è¡¨è¾¾å¼ï¼Œæ¨å¯¼ç»“æœä¼š<strong>å¸¦ä¸Šå¯¹åº”çš„ç±»å‹ç±»çº¦æŸ</strong>ï¼Œé™åˆ¶ç±»å‹å˜é‡çš„é€‚ç”¨èŒƒå›´â€”â€”ä»…å®ç°äº†è¯¥ç±»å‹ç±»çš„å…·ä½“ç±»å‹ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥è¡¨è¾¾å¼ï¼Œå…¼é¡¾æ³›å‹å’Œç±»å‹å®‰å…¨ï¼Œæ˜¯Haskellçº¦æŸå¤šæ€çš„æ ¸å¿ƒå®ç°ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- æ— éœ€ç±»å‹æ ‡æ³¨ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨æ¨å¯¼å¸¦ç±»å‹ç±»çº¦æŸçš„ç±»å‹
-- 1. æ¶‰åŠNumç±»å‹ç±»ï¼ˆ+ã€*ã€0ï¼‰ï¼šæ¨æ–­ä¸º Num <span class="hljs-attr">a</span> =&gt; a -&gt; a -&gt; a
add' x <span class="hljs-attr">y</span> = x + y * <span class="hljs-number">2</span>
<span class="hljs-attr">a1</span> = add<span class="hljs-string">' 10 5    -- Intï¼ˆ10+5*2=20ï¼‰
a2 = add'</span> <span class="hljs-number">1.2</span> <span class="hljs-number">3.4</span> -- Doubleï¼ˆ<span class="hljs-number">1.2</span>+<span class="hljs-number">3.4</span>*<span class="hljs-number">2</span>=<span class="hljs-number">8.0</span>ï¼‰

-- 2. æ¶‰åŠEqç±»å‹ç±»ï¼ˆ==ã€/=ï¼‰ï¼šæ¨æ–­ä¸º Eq <span class="hljs-attr">a</span> =&gt; a -&gt; a -&gt; Bool
isEqual x <span class="hljs-attr">y</span> = x == y
<span class="hljs-attr">e1</span> = isEqual <span class="hljs-number">5</span> <span class="hljs-number">5</span>    -- Boolï¼ˆ<span class="hljs-literal">True</span>ï¼‰
<span class="hljs-attr">e2</span> = isEqual <span class="hljs-string">"abc"</span> <span class="hljs-string">"def"</span> -- Boolï¼ˆ<span class="hljs-literal">False</span>ï¼‰

-- 3. æ¶‰åŠShowç±»å‹ç±»ï¼ˆshowï¼‰ï¼šæ¨æ–­ä¸º Show <span class="hljs-attr">a</span> =&gt; a -&gt; String
show' <span class="hljs-attr">x</span> = <span class="hljs-string">"Value: "</span> ++ show x
<span class="hljs-attr">s1</span> = show<span class="hljs-string">' 100    -- Stringï¼ˆ"Value: 100"ï¼‰
s2 = show'</span> <span class="hljs-number">3.14</span>   -- Stringï¼ˆ<span class="hljs-string">"Value: 3.14"</span>ï¼‰

-- 4. å¤šç±»å‹ç±»çº¦æŸï¼šæ¨æ–­ä¸º (Num a, Show a) =&gt; a -&gt; String
calcAndShow <span class="hljs-attr">x</span> = show (x * x + <span class="hljs-number">1</span>)
<span class="hljs-attr">cs1</span> = calcAndShow <span class="hljs-number">5</span>   -- <span class="hljs-string">"26"</span>
<span class="hljs-attr">cs2</span> = calcAndShow <span class="hljs-number">2.5</span> -- <span class="hljs-string">"7.25"</span>
</code></pre>
<h3 data-id="heading-9">ç±»å‹æ¨æ–­é™åˆ¶</h3>
<p>Haskellçš„ç±»å‹æ¨æ–­èƒ½åŠ›å¼ºå¤§ï¼Œä½†å¹¶éä¸‡èƒ½ï¼Œå—HMç®—æ³•æœ¬èº«å’Œè¯­è¨€è®¾è®¡çš„é™åˆ¶ï¼Œåœ¨<strong>éƒ¨åˆ†å¤æ‚åœºæ™¯ä¸‹æ— æ³•å®Œæˆè‡ªåŠ¨æ¨æ–­</strong>ï¼Œæ­¤æ—¶ç¼–è¯‘å™¨ä¼šæŠ¥â€œç±»å‹æ­§ä¹‰â€æˆ–â€œæ— æ³•æ¨å¯¼ç±»å‹â€é”™è¯¯ï¼Œéœ€è¦ç¨‹åºå‘˜æ·»åŠ <strong>æ˜¾å¼ç±»å‹æ ‡æ³¨</strong>è¾…åŠ©ç¼–è¯‘å™¨å®Œæˆæ¨æ–­ï¼Œæ ¸å¿ƒé™åˆ¶åœºæ™¯å‡é™„ä»£ç ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. å¤æ‚é€’å½’å‡½æ•°ï¼šåµŒå¥—é€’å½’å¯¼è‡´æ¨æ–­å¤±è´¥ï¼Œéœ€æ ‡æ³¨ç±»å‹</span>
<span class="hljs-comment">-- æœªæ ‡æ³¨ï¼šç¼–è¯‘æŠ¥é”™ï¼Œæ ‡æ³¨åæ­£å¸¸</span>
fact :: <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>  <span class="hljs-comment">-- æ˜¾å¼æ ‡æ³¨ç±»å‹</span>
fact <span class="hljs-number">0</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>
fact n <span class="hljs-operator">=</span> n <span class="hljs-operator">*</span> fact (n<span class="hljs-number">-1</span>)

<span class="hljs-comment">-- 2. å¤šå‚æ•°ç±»å‹ç±»çš„æ­§ä¹‰åœºæ™¯ï¼šæ— å‡½æ•°ä¾èµ–å¯¼è‡´æ— æ³•æ¨æ–­è¿”å›ç±»å‹</span>
class <span class="hljs-keyword">Convert</span> a b <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> :: a <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> b
<span class="hljs-comment">-- å®ç°Intåˆ°Stringçš„è½¬æ¢</span>
instance <span class="hljs-keyword">Convert</span> <span class="hljs-type">Int</span> String <span class="hljs-keyword">where</span>
  <span class="hljs-keyword">convert</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">show</span>
<span class="hljs-comment">-- è°ƒç”¨æ—¶æ— æ ‡æ³¨ï¼šç¼–è¯‘æŠ¥é”™ï¼ˆæ— æ³•æ¨æ–­bçš„ç±»å‹ï¼‰ï¼Œéœ€æ˜¾å¼æ ‡æ³¨</span>
cvt :: String
cvt <span class="hljs-operator">=</span> <span class="hljs-keyword">convert</span> <span class="hljs-number">123</span> :: String  <span class="hljs-comment">-- æ˜¾å¼æŒ‡å®šè¿”å›ç±»å‹ä¸ºString</span>

<span class="hljs-comment">-- 3. æ•°å€¼ç±»å‹çš„æç«¯æ­§ä¹‰ï¼šæ— ä¸Šä¸‹æ–‡çš„æ³›å‹æ•°å€¼ï¼Œéœ€æ ‡æ³¨</span>
<span class="hljs-comment">-- æœªæ ‡æ³¨ï¼šç¼–è¯‘æŠ¥é”™ï¼ˆNum a =&gt; a å­˜åœ¨æ­§ä¹‰ï¼‰</span>
num1 :: <span class="hljs-type">Int</span>
num1 <span class="hljs-operator">=</span> <span class="hljs-number">10</span> :: <span class="hljs-type">Int</span>
<span class="hljs-comment">-- æˆ–é€šè¿‡ä¸Šä¸‹æ–‡çº¦æŸï¼ˆå¦‚èµ‹å€¼ç»™æŒ‡å®šç±»å‹å˜é‡ï¼‰</span>
num2 :: <span class="hljs-keyword">Double</span>
num2 <span class="hljs-operator">=</span> <span class="hljs-number">3.14</span>

<span class="hljs-comment">-- 4. é«˜é˜¶ç±»å‹çš„å¤æ‚ç»„åˆï¼šå¤šæ„é€ å™¨åµŒå¥—å¯¼è‡´æ¨æ–­æ­§ä¹‰</span>
import Data.Maybe
<span class="hljs-comment">-- æœªæ ‡æ³¨ï¼šç¼–è¯‘è­¦å‘Šï¼Œæ ‡æ³¨åæ¸…æ™°</span>
process :: Maybe [<span class="hljs-type">Int</span>] <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> [<span class="hljs-type">Int</span>]
process mxs <span class="hljs-operator">=</span> maybe [] (map (<span class="hljs-operator">+</span><span class="hljs-number">1</span>)) mxs
p1 <span class="hljs-operator">=</span> process (Just [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]) <span class="hljs-comment">-- [2,3,4]</span>
p2 <span class="hljs-operator">=</span> process Nothing        <span class="hljs-comment">-- []</span>
</code></pre>
<h2 data-id="heading-10">å¤šæ€ç±»å‹</h2>
<p>å¤šæ€ï¼ˆPolymorphismï¼‰æ„ä¸ºâ€œä¸€ä¸ªæ¥å£ï¼Œå¤šç§å®ç°â€ï¼Œæ˜¯Haskellå®ç°<strong>æ³›å‹ç¼–ç¨‹ã€ä»£ç é«˜åº¦å¤ç”¨</strong>çš„æ ¸å¿ƒæœºåˆ¶ï¼Œè®©ä»£ç è„±ç¦»å…·ä½“ç±»å‹çš„é™åˆ¶ï¼Œé€‚é…ä¸åŒçš„ç±»å‹åœºæ™¯ã€‚Haskellä¸­çš„å¤šæ€ç±»å‹åˆ†ä¸º<strong>å‚æ•°å¤šæ€ã€çº¦æŸå¤šæ€ã€Ad-hoc å¤šæ€</strong>ä¸‰ç±»ï¼Œä¸‰è€…å±‚å±‚é€’è¿›ï¼Œè¦†ç›–ä»â€œçº¯é€šç”¨æŠ½è±¡â€åˆ°â€œç±»å‹ç‰¹åŒ–å®ç°â€çš„æ‰€æœ‰æ³›å‹éœ€æ±‚ï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹å‡é™„å¯è¿è¡Œä»£ç ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-11">å‚æ•°å¤šæ€</h3>
<p>å‚æ•°å¤šæ€æ˜¯Haskell<strong>æœ€åŸºç¡€ã€æœ€æ ¸å¿ƒçš„æ³›å‹å¤šæ€</strong>ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œæ³›å‹å¤šæ€â€æˆ–â€œæ— çº¦æŸå¤šæ€â€ï¼Œé€šè¿‡<strong>ç±»å‹å˜é‡ï¼ˆå¦‚aã€bã€cï¼‰</strong> å®ç°â€œä¸€ä»½ä»£ç é€‚é…æ‰€æœ‰ç±»å‹â€ï¼Œæ— ä»»ä½•ç±»å‹çº¦æŸå’Œè¡Œä¸ºé™åˆ¶ï¼Œä»…ä¾èµ–ç±»å‹çš„ç»“æ„ç‰¹å¾ï¼ˆå¦‚åˆ—è¡¨ã€å…ƒç»„çš„åµŒå¥—ç»“æ„ï¼‰ï¼Œæ˜¯Haskellä»£ç å¤ç”¨çš„æœ€ä¸»è¦æ‰‹æ®µã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- 1. åŸºç¡€å‚æ•°å¤šæ€ï¼šæ’ç­‰å‡½æ•°ï¼ˆa -&gt; aï¼‰ï¼Œé€‚é…ä»»æ„ç±»å‹
id :: a -&gt; a
id <span class="hljs-attr">x</span> = x
<span class="hljs-attr">id1</span> = id <span class="hljs-number">10</span>        -- Int
<span class="hljs-attr">id2</span> = id <span class="hljs-string">"abc"</span>     -- String
<span class="hljs-attr">id3</span> = id [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]   -- [Int]
<span class="hljs-attr">id4</span> = id (Just <span class="hljs-number">5</span>)  -- Maybe Int

-- 2. åˆ—è¡¨é€šç”¨æ“ä½œï¼š(a -&gt; b) -&gt; <span class="hljs-section">[a]</span> -&gt; <span class="hljs-section">[b]</span>ï¼Œé€‚é…ä»»æ„ç±»å‹åˆ—è¡¨
map' :: (a -&gt; b) -&gt; <span class="hljs-section">[a]</span> -&gt; <span class="hljs-section">[b]</span>
map' f <span class="hljs-section">[]</span> = <span class="hljs-section">[]</span>
map' f (x:xs) = f x : map' f xs
-- é€‚é…Int-&gt;Int
<span class="hljs-attr">m1</span> = map<span class="hljs-string">' (+1) [1,2,3]  -- [2,3,4]
-- é€‚é…Int-&gt;String
m2 = map'</span> show [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]  -- [<span class="hljs-string">"1"</span>,<span class="hljs-string">"2"</span>,<span class="hljs-string">"3"</span>]
-- é€‚é…String-&gt;Int
<span class="hljs-attr">m3</span> = map<span class="hljs-string">' length ["a", "ab", "abc"]  -- [1,2,3]

-- 3. å…ƒç»„é€šç”¨æ“ä½œï¼š(a, b) -&gt; (b, a)ï¼Œé€‚é…ä»»æ„äºŒå…ƒå…ƒç»„
swap'</span> :: (a, b) -&gt; (b, a)
swap' (x, y) = (y, x)
<span class="hljs-attr">s1</span> = swap<span class="hljs-string">' (10, "abc")  -- ("abc", 10)
s2 = swap'</span> (<span class="hljs-number">3.14</span>, [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])-- ([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>], <span class="hljs-number">3.14</span>)
</code></pre>
<h3 data-id="heading-12">çº¦æŸå¤šæ€</h3>
<p>çº¦æŸå¤šæ€æ˜¯<strong>å¸¦ç±»å‹ç±»çº¦æŸçš„å‚æ•°å¤šæ€</strong>ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œæœ‰ç•Œå¤šæ€â€ï¼Œåœ¨å‚æ•°å¤šæ€çš„åŸºç¡€ä¸Šï¼Œé€šè¿‡<code>=&gt;</code>ä¸ºç±»å‹å˜é‡æ·»åŠ <strong>ç±»å‹ç±»çº¦æŸ</strong>ï¼Œé™åˆ¶ç±»å‹å˜é‡çš„é€‚ç”¨èŒƒå›´â€”â€”ä»…å®ç°äº†è¯¥ç±»å‹ç±»çš„å…·ä½“ç±»å‹ï¼Œæ‰èƒ½ä½¿ç”¨è¯¥ä»£ç ï¼Œè®©æ³›å‹ä»£ç å¯ä»¥è°ƒç”¨ç±»å‹ç±»å®šä¹‰çš„æŠ½è±¡è¡Œä¸ºï¼ˆå¦‚+ã€==ã€showï¼‰ï¼Œå…¼é¡¾â€œæ³›å‹å¤ç”¨â€å’Œâ€œç±»å‹ä¸“å±è¡Œä¸ºâ€ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- 1. å¸¦Numçº¦æŸï¼šNum <span class="hljs-attr">a</span> =&gt; a -&gt; a -&gt; aï¼Œä»…é€‚é…æ•°å€¼ç±»å‹
sumTwo :: Num <span class="hljs-attr">a</span> =&gt; a -&gt; a -&gt; a
sumTwo x <span class="hljs-attr">y</span> = x + y
<span class="hljs-attr">s1</span> = sumTwo <span class="hljs-number">10</span> <span class="hljs-number">20</span>    -- Intï¼ˆ<span class="hljs-number">30</span>ï¼‰
<span class="hljs-attr">s2</span> = sumTwo <span class="hljs-number">1.2</span> <span class="hljs-number">3.4</span>  -- Doubleï¼ˆ<span class="hljs-number">4.6</span>ï¼‰
<span class="hljs-attr">s3</span> = sumTwo <span class="hljs-number">5</span> <span class="hljs-number">3.14</span>   -- Doubleï¼ˆ<span class="hljs-number">8.14</span>ï¼Œè‡ªåŠ¨ç±»å‹ç»Ÿä¸€ï¼‰

-- 2. å¸¦Eqçº¦æŸï¼šEq <span class="hljs-attr">a</span> =&gt; [a] -&gt; a -&gt; Boolï¼Œä»…é€‚é…å¯æ¯”è¾ƒç›¸ç­‰çš„ç±»å‹
contains :: Eq <span class="hljs-attr">a</span> =&gt; [a] -&gt; a -&gt; Bool
contains <span class="hljs-section">[]</span> <span class="hljs-attr">_</span> = <span class="hljs-literal">False</span>
contains (x:xs) y | <span class="hljs-attr">x</span> == y    = <span class="hljs-literal">True</span>
                  | <span class="hljs-attr">otherwise</span> = contains xs y
<span class="hljs-attr">c1</span> = contains [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-number">2</span>    -- <span class="hljs-literal">True</span>
<span class="hljs-attr">c2</span> = contains [<span class="hljs-string">"a"</span>,<span class="hljs-string">"b"</span>] <span class="hljs-string">"c"</span>-- <span class="hljs-literal">False</span>
<span class="hljs-attr">c3</span> = contains [Just <span class="hljs-number">1</span>, Nothing] Nothing -- <span class="hljs-literal">True</span>

-- 3. å¸¦Num+Showçº¦æŸï¼š(Num a, Show a) =&gt; a -&gt; Stringï¼Œå¤šçº¦æŸç»„åˆ
numToStr :: (Num a, Show a) =&gt; a -&gt; String
numToStr <span class="hljs-attr">x</span> = <span class="hljs-string">"Number: "</span> ++ show (x * <span class="hljs-number">2</span>)
<span class="hljs-attr">n1</span> = numToStr <span class="hljs-number">5</span>    -- <span class="hljs-string">"Number: 10"</span>
<span class="hljs-attr">n2</span> = numToStr <span class="hljs-number">2.5</span>  -- <span class="hljs-string">"Number: 5.0"</span>

-- 4. åˆ—è¡¨é€šç”¨æ±‚å’Œï¼šNum <span class="hljs-attr">a</span> =&gt; [a] -&gt; aï¼Œä»…é€‚é…æ•°å€¼åˆ—è¡¨
sum' :: Num <span class="hljs-attr">a</span> =&gt; [a] -&gt; a
sum' <span class="hljs-section">[]</span> = 0
sum' (x:xs) = x + sum' xs
<span class="hljs-attr">su1</span> = sum<span class="hljs-string">' [1,2,3,4]    -- Intï¼ˆ10ï¼‰
su2 = sum'</span> [<span class="hljs-number">1.1</span>,<span class="hljs-number">2.2</span>,<span class="hljs-number">3.3</span>]-- Doubleï¼ˆ<span class="hljs-number">6.6</span>ï¼‰
</code></pre>
<h3 data-id="heading-13">Ad-hoc å¤šæ€</h3>
<p>Ad-hoc å¤šæ€ä¹Ÿè¢«ç§°ä¸º<strong>ç‰¹åŒ–å¤šæ€</strong>ï¼ŒæŒ‡â€œåŒä¸€å‡½æ•°åï¼ˆæˆ–æ“ä½œç¬¦ï¼‰ï¼Œæ ¹æ®å‚æ•°çš„å…·ä½“ç±»å‹ä¸åŒï¼Œæ‹¥æœ‰å®Œå…¨ä¸åŒçš„å®ç°é€»è¾‘â€ï¼Œå³â€œæ¥å£ç»Ÿä¸€ï¼Œå®ç°ç‰¹åŒ–â€ã€‚åœ¨Haskellä¸­ï¼ŒAd-hoc å¤šæ€<strong>å®Œå…¨é€šè¿‡ç±»å‹ç±»å’Œå®ä¾‹å®ç°</strong>ï¼ŒåŒºåˆ«äºå‚æ•°å¤šæ€çš„â€œä¸€ä»½é€šç”¨å®ç°é€‚é…æ‰€æœ‰ç±»å‹â€ï¼Œæ˜¯å®ç°â€œç±»å‹ä¸“å±è¡Œä¸ºâ€çš„æ ¸å¿ƒæ–¹å¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- 1. è‡ªå®šä¹‰ç±»å‹ç±»å®ç°Ad-hocå¤šæ€ï¼šåŒä¸€æ¥å£ï¼Œä¸åŒç±»å‹ä¸åŒå®ç°
class Printable a where
  printVal :: a -&gt; String  -- ç»Ÿä¸€æ¥å£

-- ä¸ºIntå®ç°å®ä¾‹ï¼šç‰¹åŒ–å®ç°1
instance Printable Int where
  printVal <span class="hljs-attr">x</span> = <span class="hljs-string">"Integer Value: "</span> ++ show x

-- ä¸ºStringå®ç°å®ä¾‹ï¼šç‰¹åŒ–å®ç°2
instance Printable String where
  printVal <span class="hljs-attr">x</span> = <span class="hljs-string">"String Value: "</span><span class="hljs-string">" ++ x ++ "</span><span class="hljs-string">""</span>

-- ä¸ºDoubleå®ç°å®ä¾‹ï¼šç‰¹åŒ–å®ç°3
instance Printable Double where
  printVal <span class="hljs-attr">x</span> = <span class="hljs-string">"Double Value: "</span> ++ show (x * <span class="hljs-number">100</span>) ++ <span class="hljs-string">"%"</span>

-- ç»Ÿä¸€è°ƒç”¨ï¼Œç¼–è¯‘å™¨è‡ªåŠ¨é€‰æ‹©å¯¹åº”å®ç°
<span class="hljs-attr">p1</span> = printVal <span class="hljs-number">100</span>    -- <span class="hljs-string">"Integer Value: 100"</span>ï¼ˆIntå®ä¾‹ï¼‰
<span class="hljs-attr">p2</span> = printVal <span class="hljs-string">"Haskell"</span> -- <span class="hljs-string">"String Value: "</span>Haskell<span class="hljs-string">""</span>ï¼ˆStringå®ä¾‹ï¼‰
<span class="hljs-attr">p3</span> = printVal <span class="hljs-number">0.95</span>   -- <span class="hljs-string">"Double Value: 95.0%"</span>ï¼ˆDoubleå®ä¾‹ï¼‰

-- 2. æ ‡å‡†åº“ç±»å‹ç±»çš„Ad-hocå¤šæ€ï¼šshowå‡½æ•°ï¼ˆç»Ÿä¸€æ¥å£ï¼Œç‰¹åŒ–å®ç°ï¼‰
<span class="hljs-attr">s1</span> = show <span class="hljs-number">123</span>        -- <span class="hljs-string">"123"</span>ï¼ˆIntçš„Showå®ä¾‹ï¼‰
<span class="hljs-attr">s2</span> = show <span class="hljs-string">'a'</span>        -- <span class="hljs-string">"'a'"</span>ï¼ˆCharçš„Showå®ä¾‹ï¼‰
<span class="hljs-attr">s3</span> = show [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]    -- <span class="hljs-string">"[1,2,3]"</span>ï¼ˆ[Int]çš„Showå®ä¾‹ï¼‰
<span class="hljs-attr">s4</span> = show (Just <span class="hljs-number">5</span>)   -- <span class="hljs-string">"Just 5"</span>ï¼ˆMaybe Intçš„Showå®ä¾‹ï¼‰

-- 3. æ“ä½œç¬¦çš„Ad-hocå¤šæ€ï¼š+å·ï¼ˆNumç±»å‹ç±»çš„ç‰¹åŒ–å®ç°ï¼‰
<span class="hljs-attr">add1</span> = <span class="hljs-number">1</span> + <span class="hljs-number">2</span>         -- æ•´æ•°åŠ æ³•ï¼ˆIntçš„Numå®ä¾‹ï¼‰
<span class="hljs-attr">add2</span> = <span class="hljs-number">1.2</span> + <span class="hljs-number">3.4</span>     -- æµ®ç‚¹æ•°åŠ æ³•ï¼ˆDoubleçš„Numå®ä¾‹ï¼‰
<span class="hljs-attr">add3</span> = <span class="hljs-number">5</span> + <span class="hljs-number">3.14</span>      -- æ··åˆç±»å‹åŠ æ³•ï¼ˆè‡ªåŠ¨ç»Ÿä¸€ä¸ºDoubleå®ä¾‹ï¼‰
</code></pre>
<h2 data-id="heading-14">ç±»å‹åˆ«åä¸æ–°ç±»å‹</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œå¸¸ä¼šé‡åˆ°â€œå¤æ‚ç±»å‹å†—ä½™â€â€œåŸºç¡€ç±»å‹æ··ç”¨å¯¼è‡´æ­§ä¹‰â€â€œéœ€è¦ä¸ºç±»å‹æ·»åŠ ä¸“å±æ ‡è¯†â€çš„é—®é¢˜ï¼ŒHaskellæä¾›äº†<code>type</code>å’Œ<code>newtype</code>ä¸¤ä¸ªæ ¸å¿ƒå…³é”®å­—ï¼Œåˆ†åˆ«ç”¨äº<strong>ç±»å‹åˆ«åå®šä¹‰</strong>å’Œ<strong>é›¶æˆæœ¬ç±»å‹åŒ…è£…</strong>ï¼ŒåŒæ—¶<code>newtype</code>ä¸å¸¸ç”¨çš„<code>data</code>å…³é”®å­—å­˜åœ¨æ˜ç¡®å·®å¼‚ï¼Œä¸‰è€…å„å¸å…¶èŒï¼Œè§£å†³ç±»å‹è®¾è®¡ä¸­çš„ä¸åŒé—®é¢˜ï¼š</p>
<h3 data-id="heading-15">type å…³é”®å­—ç®€åŒ–ç±»å‹</h3>
<p><code>type</code>å…³é”®å­—ç”¨äº<strong>å®šä¹‰ç±»å‹åˆ«å</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯å¯¹<strong>å¤æ‚ã€å†—é•¿çš„åŸæœ‰ç±»å‹</strong>è¿›è¡Œé‡å‘½åï¼Œä»…åš<strong>è¯­æ³•å±‚é¢çš„ç®€åŒ–å’Œå¯è¯»æ€§æå‡</strong>ï¼Œä¸ç”Ÿæˆä»»ä½•æ–°çš„ç±»å‹æ ‡è¯†ï¼Œç¼–è¯‘æœŸç¼–è¯‘å™¨ä¼šå°†ç±»å‹åˆ«åè‡ªåŠ¨è¿˜åŸä¸ºåŸç±»å‹ï¼Œæ— ä»»ä½•è¿è¡Œæ—¶æˆæœ¬ï¼Œä¹Ÿæ— ç±»å‹å®‰å…¨çš„éš”ç¦»æ•ˆæœã€‚</p>
<pre><code class="hljs language-ini" lang="ini">-- 1. ç®€åŒ–åŸºç¡€åµŒå¥—ç±»å‹
type <span class="hljs-attr">IntList</span> = [Int]
type <span class="hljs-attr">StringMap</span> = [(String, String)]  -- å­—ç¬¦ä¸²é”®å€¼å¯¹åˆ—è¡¨
type <span class="hljs-attr">Person</span> = (String, Int, Bool)    -- å§“åã€å¹´é¾„ã€æ˜¯å¦æˆå¹´

-- ç›´æ¥ä½¿ç”¨ç±»å‹åˆ«åï¼Œä¸åŸç±»å‹å®Œå…¨ç­‰ä»·
intList :: IntList
<span class="hljs-attr">intList</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]
-- åŸç±»å‹å¯ç›´æ¥èµ‹å€¼ç»™åˆ«åç±»å‹ï¼Œæ— éš”ç¦»
intList<span class="hljs-attr">' :: [Int]
intList'</span> = intList

person :: Person
<span class="hljs-attr">person</span> = (<span class="hljs-string">"Tom"</span>, <span class="hljs-number">25</span>, <span class="hljs-literal">True</span>)
-- è§£åŒ…æ—¶æŒ‰åŸå…ƒç»„æ–¹å¼ï¼Œæ— å·®å¼‚
getName :: Person -&gt; String
getName (n, _, _) = n

-- 2. ç®€åŒ–é«˜é˜¶/ä¸šåŠ¡ç›¸å…³ç±»å‹
type <span class="hljs-attr">Request</span> = String
type <span class="hljs-attr">Response</span> = String
-- ä¸šåŠ¡å¤„ç†å‡½æ•°ï¼šåŸç±»å‹ (String -&gt; IO String)ï¼Œåˆ«åæ›´æ˜“è¯»
type <span class="hljs-attr">Handler</span> = Request -&gt; IO Response

-- å®ç°å¤„ç†å‡½æ•°ï¼Œä½¿ç”¨åˆ«åæå‡å¯è¯»æ€§
helloHandler :: Handler
helloHandler <span class="hljs-attr">req</span> = return $ <span class="hljs-string">"Hello, "</span> ++ req

-- 3. æ ‡å‡†åº“ç»å…¸åˆ«åï¼š<span class="hljs-attr">String</span> = [Char]
type <span class="hljs-attr">String</span> = [Char]  -- Haskellæ ‡å‡†åº“ä¸­çš„å®šä¹‰
str :: String
<span class="hljs-attr">str</span> = <span class="hljs-string">"Haskell"</span>
-- ä¸åŸç±»å‹<span class="hljs-section">[Char]</span>å®Œå…¨ç­‰ä»·
str<span class="hljs-attr">' :: [Char]
str'</span> = str
</code></pre>
<h3 data-id="heading-16">newtype é›¶æˆæœ¬åŒ…è£…</h3>
<p><code>newtype</code>å…³é”®å­—ç”¨äº<strong>åˆ›å»ºæ–°ç±»å‹</strong>ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯å°†<strong>ç°æœ‰çš„å•ä¸ªåŸºç¡€ç±»å‹</strong>è¿›è¡Œâ€œåŒ…è£…â€ï¼Œç”Ÿæˆä¸€ä¸ª<strong>å…¨æ–°çš„ã€ä¸åŸç±»å‹å®Œå…¨ç‹¬ç«‹çš„ç±»å‹æ ‡è¯†</strong>ï¼Œä¸”ç¼–è¯‘å™¨ä¼šå¯¹<code>newtype</code>åšæè‡´ä¼˜åŒ–â€”â€”<strong>ç¼–è¯‘æœŸæ¶ˆé™¤åŒ…è£…å±‚ï¼Œæ— ä»»ä½•è¿è¡Œæ—¶æˆæœ¬ï¼ˆé›¶æˆæœ¬ï¼‰</strong> ï¼Œæ—¢å®ç°äº†ç±»å‹çš„éš”ç¦»å’Œå®‰å…¨ï¼Œåˆä¸å½±å“ç¨‹åºæ‰§è¡Œæ•ˆç‡ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. åŸºç¡€å®šä¹‰ï¼šnewtype æ–°ç±»å‹ = æ„é€ å™¨ åŸç±»å‹ï¼ˆå•æ„é€ å™¨+å•å­—æ®µï¼‰</span>
newtype Age <span class="hljs-operator">=</span> Age <span class="hljs-type">Int</span>          <span class="hljs-comment">-- å¹´é¾„ï¼šåŒ…è£…Int</span>
newtype Score <span class="hljs-operator">=</span> Score <span class="hljs-type">Int</span>      <span class="hljs-comment">-- åˆ†æ•°ï¼šåŒ…è£…Int</span>
newtype UserID <span class="hljs-operator">=</span> UserID String <span class="hljs-comment">-- ç”¨æˆ·IDï¼šåŒ…è£…String</span>
newtype Weight <span class="hljs-operator">=</span> Weight <span class="hljs-keyword">Double</span> <span class="hljs-comment">-- ä½“é‡ï¼šåŒ…è£…Double</span>

<span class="hljs-comment">-- 2. åˆ›å»ºæ–°ç±»å‹å€¼ï¼šé€šè¿‡æ„é€ å™¨åŒ…è£…</span>
age :: Age
age <span class="hljs-operator">=</span> Age <span class="hljs-number">25</span>  <span class="hljs-comment">-- å¿…é¡»é€šè¿‡Ageæ„é€ å™¨ï¼Œç›´æ¥å†™25ä¼šæŠ¥ç±»å‹é”™è¯¯</span>

score :: Score
score <span class="hljs-operator">=</span> Score <span class="hljs-number">95</span>

uid :: UserID
uid <span class="hljs-operator">=</span> UserID "user_123456"

<span class="hljs-comment">-- 3. è§£åŒ…ä½¿ç”¨ï¼šæ¨¡å¼åŒ¹é…æˆ–æ„é€ å™¨ç›´æ¥è°ƒç”¨</span>
getAge :: Age <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>
getAge (Age a) <span class="hljs-operator">=</span> a  <span class="hljs-comment">-- æ¨¡å¼åŒ¹é…è§£åŒ…</span>

getScore :: Score <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>
getScore (Score s) <span class="hljs-operator">=</span> s

<span class="hljs-comment">-- 4. ç±»å‹å®‰å…¨ï¼šä¸åŒnewtypeæ— æ³•æ··ç”¨ï¼Œç¼–è¯‘æœŸæ‹¦æˆªé”™è¯¯</span>
<span class="hljs-comment">-- åˆæ³•ï¼šåŒç±»å‹æ“ä½œ</span>
ageAdd :: Age <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> Age
ageAdd (Age a) n <span class="hljs-operator">=</span> Age (a <span class="hljs-operator">+</span> n)
<span class="hljs-comment">-- éæ³•ï¼šä¸åŒnewtypeæ··ç”¨ï¼ˆç¼–è¯‘æŠ¥é”™ï¼‰</span>
<span class="hljs-comment">-- wrong = Age 25 + Score 95  -- ç¼–è¯‘å™¨ç›´æ¥æŠ¥é”™ï¼Œé¿å…ç±»å‹æ··æ·†</span>

<span class="hljs-comment">-- 5. é›¶æˆæœ¬ç‰¹æ€§ï¼šè¿è¡Œæ—¶æ— åŒ…è£…å±‚ï¼Œä¸åŸç±»å‹æ‰§è¡Œæ•ˆç‡ä¸€è‡´</span>
<span class="hljs-comment">-- ç¼–è¯‘åï¼ŒAge 25 ç›´æ¥ç­‰ä»·äº 25ï¼Œæ— é¢å¤–å¼€é”€</span>
</code></pre>
<h3 data-id="heading-17">newtype vs data</h3>
<p><code>newtype</code>å’Œ<code>data</code>éƒ½æ˜¯Haskellä¸­å®šä¹‰<strong>è‡ªå®šä¹‰ç±»å‹</strong>çš„æ ¸å¿ƒå…³é”®å­—ï¼ŒäºŒè€…å‡å¯å®ç°ç±»å‹åŒ…è£…å’Œè‡ªå®šä¹‰ç±»å‹è®¾è®¡ï¼Œä½†åœ¨<strong>è¯­æ³•é™åˆ¶ã€è¿è¡Œæ—¶æˆæœ¬ã€ç±»å‹ç±»å®ä¾‹ã€ä½¿ç”¨åœºæ™¯</strong>ä¸Šå­˜åœ¨æ ¸å¿ƒå·®å¼‚ï¼Œä¸å¯æ··ç”¨ï¼Œé€šè¿‡ä»£ç ç¤ºä¾‹å¯¹æ¯”æ ¸å¿ƒåŒºåˆ«ï¼š</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- ==================== newtype å®ç° ====================</span>
<span class="hljs-comment">-- ä»…æ”¯æŒï¼šå•æ„é€ å™¨ + å•å­—æ®µ</span>
newtype Age <span class="hljs-operator">=</span> Age <span class="hljs-type">Int</span>  <span class="hljs-comment">-- åˆæ³•</span>
<span class="hljs-comment">-- newtype Point = Point Int Int  -- éæ³•ï¼šå¤šå­—æ®µï¼Œnewtypeä¸æ”¯æŒ</span>

<span class="hljs-comment">-- é›¶æˆæœ¬ï¼šç¼–è¯‘æœŸæ— åŒ…è£…å±‚</span>
age :: Age
age <span class="hljs-operator">=</span> Age <span class="hljs-number">25</span>
<span class="hljs-comment">-- è§£åŒ…ç®€å•</span>
unAge :: Age <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>
unAge (Age a) <span class="hljs-operator">=</span> a

<span class="hljs-comment">-- ==================== data å®ç° ====================</span>
<span class="hljs-comment">-- æ— é™åˆ¶ï¼šå¤šæ„é€ å™¨ã€å¤šå­—æ®µã€é€’å½’ç±»å‹å‡æ”¯æŒ</span>
<span class="hljs-comment">-- å•æ„é€ å™¨å•å­—æ®µï¼ˆåˆæ³•ï¼Œä½†æœ‰è¿è¡Œæ—¶å¼€é”€ï¼‰</span>
data Score <span class="hljs-operator">=</span> Score <span class="hljs-type">Int</span> deriving (<span class="hljs-keyword">Show</span>)
<span class="hljs-comment">-- å¤šæ„é€ å™¨ï¼ˆåˆæ³•ï¼Œæè¿°ä¸åŒçŠ¶æ€ï¼‰</span>
data Shape <span class="hljs-operator">=</span> Circle <span class="hljs-keyword">Double</span> <span class="hljs-operator">|</span> Rectangle <span class="hljs-keyword">Double</span> <span class="hljs-keyword">Double</span> deriving (<span class="hljs-keyword">Show</span>)
<span class="hljs-comment">-- å¤šå­—æ®µï¼ˆåˆæ³•ï¼Œæè¿°å¤æ‚ç»“æ„ï¼‰</span>
data Point <span class="hljs-operator">=</span> Point <span class="hljs-keyword">Double</span> <span class="hljs-keyword">Double</span> deriving (<span class="hljs-keyword">Show</span>)
<span class="hljs-comment">-- é€’å½’ç±»å‹ï¼ˆåˆæ³•ï¼Œæè¿°æ ‘å½¢ç»“æ„ï¼‰</span>
data Tree a <span class="hljs-operator">=</span> <span class="hljs-keyword">Empty</span> <span class="hljs-operator">|</span> Node a (Tree a) (Tree a) deriving (<span class="hljs-keyword">Show</span>)

<span class="hljs-comment">-- åˆ›å»ºdataç±»å‹å€¼</span>
score :: Score
score <span class="hljs-operator">=</span> Score <span class="hljs-number">95</span>

circle :: Shape
circle <span class="hljs-operator">=</span> Circle <span class="hljs-number">5.0</span>  <span class="hljs-comment">-- åœ†ï¼šåŠå¾„5.0</span>

rect :: Shape
rect <span class="hljs-operator">=</span> Rectangle <span class="hljs-number">3.0</span> <span class="hljs-number">4.0</span>  <span class="hljs-comment">-- çŸ©å½¢ï¼šé•¿3.0ï¼Œå®½4.0</span>

point :: Point
point <span class="hljs-operator">=</span> Point <span class="hljs-number">10.0</span> <span class="hljs-number">20.0</span>

tree :: Tree <span class="hljs-type">Int</span>
tree <span class="hljs-operator">=</span> Node <span class="hljs-number">1</span> (Node <span class="hljs-number">2</span> <span class="hljs-keyword">Empty</span> <span class="hljs-keyword">Empty</span>) (Node <span class="hljs-number">3</span> <span class="hljs-keyword">Empty</span> <span class="hljs-keyword">Empty</span>)

<span class="hljs-comment">-- è§£åŒ…dataç±»å‹ï¼šæ¨¡å¼åŒ¹é…</span>
getCircleRadius :: Shape <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">Double</span>
getCircleRadius (Circle r) <span class="hljs-operator">=</span> r
getCircleRadius _ <span class="hljs-operator">=</span> <span class="hljs-number">0.0</span>

getPointX :: Point <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-keyword">Double</span>
getPointX (Point x _) <span class="hljs-operator">=</span> x

<span class="hljs-comment">-- ==================== æ ¸å¿ƒå·®å¼‚å¯¹æ¯” ====================</span>
<span class="hljs-comment">-- 1. ç±»å‹ç±»å®ä¾‹ï¼šnewtypeå¯è‡ªåŠ¨ç»§æ‰¿ï¼Œdataéœ€æ‰‹åŠ¨å®ç°</span>
<span class="hljs-comment">-- newtypeï¼šä¸ºAgeå®ç°Numå®ä¾‹ï¼Œå¯ç›´æ¥æ“ä½œ</span>
instance Num Age <span class="hljs-keyword">where</span>
  (<span class="hljs-operator">+</span>) (Age a1) (Age a2) <span class="hljs-operator">=</span> Age (a1 <span class="hljs-operator">+</span> a2)
  (<span class="hljs-operator">*</span>) (Age a1) (Age a2) <span class="hljs-operator">=</span> Age (a1 <span class="hljs-operator">*</span> a2)
  fromInteger n <span class="hljs-operator">=</span> Age (fromInteger n)
  <span class="hljs-comment">-- å…¶ä»–æ–¹æ³•å¯é»˜è®¤æ¨å¯¼</span>

<span class="hljs-comment">-- dataï¼šä¸ºScoreå®ç°Numå®ä¾‹ï¼Œéœ€æ‰‹åŠ¨å®ç°æ‰€æœ‰æ–¹æ³•</span>
instance Num Score <span class="hljs-keyword">where</span>
  (<span class="hljs-operator">+</span>) (Score s1) (Score s2) <span class="hljs-operator">=</span> Score (s1 <span class="hljs-operator">+</span> s2)
  (<span class="hljs-operator">*</span>) (Score s1) (Score s2) <span class="hljs-operator">=</span> Score (s1 <span class="hljs-operator">*</span> s2)
  (<span class="hljs-operator">-</span>) (Score s1) (Score s2) <span class="hljs-operator">=</span> Score (s1 <span class="hljs-operator">-</span> s2)
  <span class="hljs-built_in">abs</span> (Score s) <span class="hljs-operator">=</span> Score (abs s)
  signum (Score s) <span class="hljs-operator">=</span> Score (signum s)
  fromInteger n <span class="hljs-operator">=</span> Score (fromInteger n)

<span class="hljs-comment">-- 2. è¿è¡Œæ—¶æˆæœ¬ï¼šnewtypeæ— å¼€é”€ï¼Œdataæœ‰è½»å¾®å¼€é”€</span>
<span class="hljs-comment">-- ç¼–è¯‘åï¼šAge 25 â†’ 25ï¼ˆæ— åŒ…è£…ï¼‰ï¼ŒScore 95 â†’ åŒ…è£…ä¸ºScoreæ„é€ å™¨ï¼ˆæœ‰å¼€é”€ï¼‰</span>
</code></pre>
<h2 data-id="heading-18">10.5 ç±»å‹ç³»ç»ŸåŸºç¡€ç‰¹æ€§</h2>
<p>åœ¨ç±»å‹æ¨æ–­å’Œå®é™…ä½¿ç”¨ä¸­ï¼ŒHaskellæä¾›äº†ä¸¤ä¸ªå®ç”¨çš„åŸºç¡€ç‰¹æ€§ï¼Œåˆ†åˆ«è§£å†³<strong>æ•°å€¼ç±»å‹çš„é»˜è®¤æ¨å¯¼æ­§ä¹‰</strong>å’Œ<strong>ç¼–è¯‘å™¨çš„ç±»å‹æ¨æ–­æ­§ä¹‰</strong>é—®é¢˜ï¼Œå¹³è¡¡â€œç±»å‹æ¨æ–­çš„ç®€æ´æ€§â€å’Œâ€œç±»å‹æŒ‡å®šçš„çµæ´»æ€§â€ï¼Œæ˜¯æ—¥å¸¸å¼€å‘ä¸­é«˜é¢‘ä½¿ç”¨çš„ç‰¹æ€§ï¼Œæ‰€æœ‰çŸ¥è¯†ç‚¹å‡é™„å¯è¿è¡Œä»£ç ç¤ºä¾‹ï¼š</p>
<h3 data-id="heading-19">ç±»å‹é»˜è®¤è§„åˆ™</h3>
<p>Haskellä¸­æ•°å€¼ç±»å‹åŸºäºNumç±»å‹ç±»å®ç°æ³›å‹ï¼ˆå¦‚<code>Int</code>ã€<code>Integer</code>ã€<code>Double</code>ã€<code>Float</code>å‡å®ç°Numï¼‰ï¼Œå½“è¡¨è¾¾å¼çš„ç±»å‹ä¸º<strong>æ³›å‹æ•°å€¼ç±»å‹ï¼ˆNum a =&gt; aï¼‰</strong> ä¸”<strong>æ— ä¸Šä¸‹æ–‡æ˜ç¡®æŒ‡å®šå…·ä½“ç±»å‹</strong>æ—¶ï¼Œä¼šå‡ºç°<strong>æ•°å€¼ç±»å‹æ­§ä¹‰</strong>ï¼Œç¼–è¯‘å™¨æ— æ³•ç¡®å®šåº”æ¨å¯¼ä¸ºå“ªç§å…·ä½“æ•°å€¼ç±»å‹ï¼Œæ­¤æ—¶Haskellçš„<strong>ç±»å‹é»˜è®¤è§„åˆ™</strong>ä¼šè‡ªåŠ¨å°†å…¶æ¨å¯¼ä¸º<strong>é¢„è®¾çš„å…·ä½“æ•°å€¼ç±»å‹</strong>ï¼ˆé»˜è®¤ä¼˜å…ˆ<code>Integer &gt; Double &gt; Int &gt; Float</code>ï¼‰ï¼Œé¿å…ç¼–è¯‘é”™è¯¯ï¼ŒåŒæ—¶æ”¯æŒè‡ªå®šä¹‰é»˜è®¤ç±»å‹ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- 1. é»˜è®¤è§„åˆ™ï¼šæ— ä¸Šä¸‹æ–‡æ—¶ï¼ŒNum a =&gt; a ä¼˜å…ˆæ¨å¯¼ä¸ºInteger/Double</span>
<span class="hljs-comment">-- ç¤ºä¾‹1ï¼šæ•´æ•°æ³›å‹ â†’ é»˜è®¤æ¨å¯¼ä¸ºInteger</span>
num1 <span class="hljs-operator">=</span> <span class="hljs-number">100</span>  <span class="hljs-comment">-- ç±»å‹ï¼šInteger</span>
<span class="hljs-comment">-- ç¤ºä¾‹2ï¼šæµ®ç‚¹æ•°æ³›å‹ â†’ é»˜è®¤æ¨å¯¼ä¸ºDouble</span>
num2 <span class="hljs-operator">=</span> <span class="hljs-number">3.14</span> <span class="hljs-comment">-- ç±»å‹ï¼šDouble</span>
<span class="hljs-comment">-- ç¤ºä¾‹3ï¼šåˆ—è¡¨æ±‚å’Œ â†’ é»˜è®¤æ¨å¯¼ä¸ºInteger</span>
sumInt <span class="hljs-operator">=</span> sum [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]  <span class="hljs-comment">-- ç±»å‹ï¼šIntegerï¼Œç»“æœ10</span>
<span class="hljs-comment">-- ç¤ºä¾‹4ï¼šæ··åˆæ•°å€¼ â†’ é»˜è®¤æ¨å¯¼ä¸ºDoubleï¼ˆç²¾åº¦æ›´é«˜ï¼‰</span>
mixNum <span class="hljs-operator">=</span> <span class="hljs-number">1</span> <span class="hljs-operator">+</span> <span class="hljs-number">2.0</span>  <span class="hljs-comment">-- ç±»å‹ï¼šDoubleï¼Œç»“æœ3.0</span>

<span class="hljs-comment">-- 2. ä¸Šä¸‹æ–‡çº¦æŸï¼šè¦†ç›–é»˜è®¤è§„åˆ™ï¼ŒæŒ‰ä¸Šä¸‹æ–‡æ¨å¯¼å…·ä½“ç±»å‹</span>
<span class="hljs-comment">-- èµ‹å€¼ç»™Intå˜é‡ â†’ æ¨å¯¼ä¸ºInt</span>
intNum :: <span class="hljs-type">Int</span>
intNum <span class="hljs-operator">=</span> <span class="hljs-number">100</span>  <span class="hljs-comment">-- ç±»å‹ï¼šIntï¼Œè€Œéé»˜è®¤Integer</span>

<span class="hljs-comment">-- ä½œä¸ºIntå‚æ•°ä¼ å…¥å‡½æ•° â†’ æ¨å¯¼ä¸ºInt</span>
addInt :: <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span> <span class="hljs-operator">-</span><span class="hljs-operator">&gt;</span> <span class="hljs-type">Int</span>
addInt x y <span class="hljs-operator">=</span> x <span class="hljs-operator">+</span> y
addRes <span class="hljs-operator">=</span> addInt <span class="hljs-number">10</span> <span class="hljs-number">20</span>  <span class="hljs-comment">-- 10å’Œ20å‡æ¨å¯¼ä¸ºInt</span>

<span class="hljs-comment">-- 3. è‡ªå®šä¹‰é»˜è®¤ç±»å‹ï¼šé€šè¿‡defaultè¯­å¥ä¿®æ”¹é»˜è®¤ä¼˜å…ˆçº§</span>
<span class="hljs-comment">-- è‡ªå®šä¹‰ï¼šä¼˜å…ˆæ¨å¯¼ä¸ºInt â†’ Float â†’ Double</span>
<span class="hljs-keyword">default</span> (<span class="hljs-type">Int</span>, <span class="hljs-type">Float</span>, <span class="hljs-keyword">Double</span>)

<span class="hljs-comment">-- è‡ªå®šä¹‰åï¼Œåˆ—è¡¨æ±‚å’Œæ¨å¯¼ä¸ºIntï¼ˆè€Œéé»˜è®¤Integerï¼‰</span>
sumInt<span class="hljs-string">' = sum [1,2,3]  -- ç±»å‹ï¼šIntï¼Œç»“æœ6

-- æµ®ç‚¹æ•°æ¨å¯¼ä¸ºFloatï¼ˆè€Œéé»˜è®¤Doubleï¼‰
floatNum = 3.14 :: Float  -- ç±»å‹ï¼šFloat
</span></code></pre>
<h3 data-id="heading-20">æ˜¾å¼ç±»å‹åº”ç”¨TypeApplications æ‰©å±•</h3>
<p><code>TypeApplications</code>ï¼ˆç±»å‹åº”ç”¨ï¼‰æ˜¯Haskellçš„<strong>æ‰©å±•ç‰¹æ€§</strong>ï¼ˆéé»˜è®¤å¼€å¯ï¼‰ï¼Œæ ¸å¿ƒä½œç”¨æ˜¯å…è®¸ç¨‹åºå‘˜<strong>åœ¨è°ƒç”¨å‡½æ•°æ—¶ï¼Œæ˜¾å¼æŒ‡å®šç±»å‹æ¨æ–­ä¸­çš„ç±»å‹å˜é‡</strong>ï¼Œç›´æ¥ä¸ºå‡½æ•°çš„æ³›å‹ç±»å‹å˜é‡ç»‘å®šå…·ä½“ç±»å‹ï¼Œå½»åº•è§£å†³ç¼–è¯‘å™¨çš„<strong>ç±»å‹æ¨æ–­æ­§ä¹‰</strong>é—®é¢˜ï¼Œæ›¿ä»£ç¹ççš„æ˜¾å¼ç±»å‹æ ‡æ³¨ï¼Œè®©ä»£ç æ›´ç®€æ´ã€æ›´æ˜“è¯»ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- å¿…é¡»åœ¨ä»£ç æœ€é¡¶éƒ¨å¼€å¯æ‰©å±•</span>
{<span class="hljs-operator">-</span># <span class="hljs-keyword">LANGUAGE</span> TypeApplications #<span class="hljs-operator">-</span>}

import Data.Maybe
import Data.Eq

<span class="hljs-comment">-- 1. è§£å†³readå‡½æ•°çš„ç±»å‹æ­§ä¹‰ï¼šread :: Read a =&gt; String -&gt; a</span>
<span class="hljs-comment">-- æ— TypeApplicationsï¼šéœ€æ˜¾å¼æ ‡æ³¨è¿”å›ç±»å‹ï¼Œç¹ç</span>
readInt1 :: <span class="hljs-type">Int</span>
readInt1 <span class="hljs-operator">=</span> read "123" :: <span class="hljs-type">Int</span>

readDouble1 :: <span class="hljs-keyword">Double</span>
readDouble1 <span class="hljs-operator">=</span> read "3.14" :: <span class="hljs-keyword">Double</span>

<span class="hljs-comment">-- æœ‰TypeApplicationsï¼šç›´æ¥åœ¨å‡½æ•°å@æŒ‡å®šç±»å‹ï¼Œç®€æ´</span>
readInt2 <span class="hljs-operator">=</span> read <span class="hljs-variable">@Int</span> "123"          <span class="hljs-comment">-- ç±»å‹ï¼šIntï¼Œç»“æœ123</span>
readDouble2 <span class="hljs-operator">=</span> read <span class="hljs-variable">@Double</span> "3.14"  <span class="hljs-comment">-- ç±»å‹ï¼šDoubleï¼Œç»“æœ3.14</span>
readList <span class="hljs-operator">=</span> read @[<span class="hljs-type">Int</span>] "[1,2,3,4]" <span class="hljs-comment">-- ç±»å‹ï¼š[Int]ï¼Œç»“æœ[1,2,3,4]</span>

<span class="hljs-comment">-- 2. è§£å†³pureå‡½æ•°çš„å®¹å™¨ç±»å‹æ­§ä¹‰ï¼špure :: Applicative f =&gt; a -&gt; f a</span>
<span class="hljs-comment">-- æ— TypeApplicationsï¼šéœ€æ ‡æ³¨å®¹å™¨ç±»å‹ï¼Œç¹ç</span>
pureList1 :: [<span class="hljs-type">Int</span>]
pureList1 <span class="hljs-operator">=</span> pure <span class="hljs-number">5</span> :: [<span class="hljs-type">Int</span>]

pureMaybe1 :: Maybe <span class="hljs-type">Int</span>
pureMaybe1 <span class="hljs-operator">=</span> pure <span class="hljs-number">5</span> :: Maybe <span class="hljs-type">Int</span>

<span class="hljs-comment">-- æœ‰TypeApplicationsï¼š@æŒ‡å®šå®¹å™¨ç±»å‹fï¼Œç›´æ¥æ˜äº†</span>
pureList2 <span class="hljs-operator">=</span> pure @[] <span class="hljs-number">5</span>        <span class="hljs-comment">-- å®¹å™¨ï¼š[]ï¼ˆåˆ—è¡¨ï¼‰ï¼Œç»“æœ[5]</span>
pureMaybe2 <span class="hljs-operator">=</span> pure <span class="hljs-variable">@Maybe</span> <span class="hljs-number">5</span>   <span class="hljs-comment">-- å®¹å™¨ï¼šMaybeï¼Œç»“æœJust 5</span>
pureIO <span class="hljs-operator">=</span> pure <span class="hljs-variable">@IO</span> <span class="hljs-number">5</span>          <span class="hljs-comment">-- å®¹å™¨ï¼šIOï¼Œç»“æœIO 5</span>

<span class="hljs-comment">-- 3. å¤šç±»å‹å˜é‡ï¼šæŒ‰ç±»å‹ç­¾åé¡ºåº@æŒ‡å®šå¤šä¸ªç±»å‹å˜é‡</span>
<span class="hljs-comment">-- ç¤ºä¾‹ï¼šlookup :: Eq k =&gt; k -&gt; [(k, v)] -&gt; Maybe v</span>
<span class="hljs-comment">-- æ˜¾å¼æŒ‡å®šk=Stringï¼Œv=Int</span>
lookupRes <span class="hljs-operator">=</span> lookup <span class="hljs-variable">@String</span> <span class="hljs-variable">@Int</span> "name" [("name", <span class="hljs-number">123</span>), ("age", <span class="hljs-number">25</span>)]
<span class="hljs-comment">-- ç»“æœï¼šJust 123</span>

<span class="hljs-comment">-- 4. ç»“åˆç±»å‹ç±»çº¦æŸï¼šç²¾å‡†æŒ‡å®šçº¦æŸä¸­çš„ç±»å‹å˜é‡</span>
<span class="hljs-comment">-- ç¤ºä¾‹ï¼šshow . read :: (Read a, Show a) =&gt; String -&gt; String</span>
<span class="hljs-comment">-- æŒ‡å®ša=Doubleï¼Œå°†å­—ç¬¦ä¸²è½¬Doubleå†è½¬å­—ç¬¦ä¸²</span>
showRead <span class="hljs-operator">=</span> <span class="hljs-keyword">show</span> . read <span class="hljs-variable">@Double</span> $ "3.1415926"
<span class="hljs-comment">-- ç»“æœï¼š"3.1415926"</span>

<span class="hljs-comment">-- 5. GHCiä¸­ä½¿ç”¨ï¼šå…ˆå¼€å¯æ‰©å±•ï¼Œå†è°ƒç”¨</span>
<span class="hljs-comment">-- :set -XTypeApplications</span>
<span class="hljs-comment">-- &gt; read @Int "456"</span>
<span class="hljs-comment">-- 456</span>
<span class="hljs-comment">-- &gt; pure @Maybe 10</span>
<span class="hljs-comment">-- Just 10</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€Šä¸ºå•¥printfé‡å®šå‘åæ–‡ä»¶æ˜¯ç©ºçš„ï¼ŸèŠèŠCè¯­è¨€çš„ç¼“å†²åŒºå’ŒFILEã€‹]]></title>    <link>https://juejin.cn/post/7602073088428916751</link>    <guid>https://juejin.cn/post/7602073088428916751</guid>    <pubDate>2026-02-02T16:41:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602073088428916751" data-draft-id="7602073973309702159" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€Šä¸ºå•¥printfé‡å®šå‘åæ–‡ä»¶æ˜¯ç©ºçš„ï¼ŸèŠèŠCè¯­è¨€çš„ç¼“å†²åŒºå’ŒFILEã€‹"/> <meta itemprop="keywords" content="Linux,Cè¯­è¨€,æ“ä½œç³»ç»Ÿ"/> <meta itemprop="datePublished" content="2026-02-02T16:41:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="444A4E"/> <meta itemprop="url" content="https://juejin.cn/user/930646521033307"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€Šä¸ºå•¥printfé‡å®šå‘åæ–‡ä»¶æ˜¯ç©ºçš„ï¼ŸèŠèŠCè¯­è¨€çš„ç¼“å†²åŒºå’ŒFILEã€‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/930646521033307/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    444A4E
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T16:41:30.000Z" title="Mon Feb 02 2026 16:41:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    5
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">1. ç¼“å†²åŒº</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯ç¼“å†²åŒº</h3>
<blockquote>
<p>ç¼“å†²åŒºå…¶å®å°±æ˜¯ä¸€æ®µå†…å­˜ç©ºé—´ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼š</p>
<p>å‡å¦‚ä½ è¦ç»™å¥½æœ‹å‹é€ä¸€ä¸ªç¤¼ç‰©ï¼Œä½†ä½ ä»¬åœ¨ä¸¤ä¸ªä¸åŒçš„åŸå¸‚ï¼Œç”±ä½ äº²è‡ªé€è¦èµ°ä¸€ä¸ªæ˜ŸæœŸï¼Œè€—è´¹äº†å¤§é‡æ—¶é—´ã€‚</p>
<p>äºæ˜¯ä½ å°†ç¤¼ç‰©äº¤ç»™äº†æ¥¼ä¸‹çš„å¿«é€’é©¿ç«™ï¼Œè¿™æ ·ä½ å°±ä¸éœ€è¦äº²è‡ªå»é€ï¼Œè½¬è€Œè®©å¿«é€’å‘˜å°†ç¤¼ç‰©é€åˆ°æœ‹å‹æ‰‹é‡Œã€‚</p>
<p>å¿«é€’é©¿ç«™å°±æ‰®æ¼”äº†ç¼“å­˜çš„è§’è‰²ï¼Œè€Œç¤¼ç‰©å°±æ˜¯æ•°æ®ï¼Œå¿«é€’å‘å‡ºå°±æ˜¯åˆ·æ–°ç¼“å†²åŒºçš„æ•°æ®ã€‚</p>
<p>ä½†æ˜¯å¿«é€’é©¿ç«™ä¸ä¼šä¸ºäº†å‘ä½ è¿™ä¸€ä»¶å¿«é€’å°±æµªè´¹äººåŠ›èµ„æºï¼Œæ‰€ä»¥ä»–ä¼šæ”’åˆ°ä¸€å®šæ•°é‡å†å‘èµ°ã€‚</p>
</blockquote>
<p>æ‰€ä»¥ï¼šæ•°æ®å…è®¸åœ¨ç¼“å†²åŒºä¸­ç§¯å‹ï¼Œè¿™æ ·ä¸€æ¬¡å°±å¯ä»¥åˆ·æ–°å¤šæ¬¡æ•°æ®ï¼Œå˜ç›¸çš„å‡å°‘äº†IOçš„æ¬¡æ•°ã€‚</p>
<p><strong>ç¼“å­˜æœ€å¤§çš„æ„ä¹‰æ˜¯æé«˜ä½¿ç”¨ç¼“å­˜çš„è¿›ç¨‹çš„æ•ˆç‡ï¼Œå…è®¸è¿›ç¨‹åœ¨å•ä½æ—¶é—´å†…åšæ›´å¤šçš„å·¥ä½œï¼Œä¹Ÿå°±å˜ç›¸çš„æé«˜äº†ä½¿ç”¨è€…ï¼ˆç”¨æˆ·ï¼‰çš„æ•ˆç‡ã€‚</strong></p>
<h3 data-id="heading-2">1.2 ç¼“å†²ç±»å‹</h3>
<blockquote>
<p>åœ¨è¯­è¨€å±‚é¢æ¥çœ‹ï¼Œå†³å®šä»€ä¹ˆæ—¶å€™å‘å¿«é€’ï¼ˆå†³å®šä½¿ç”¨ä»€ä¹ˆæ ·çš„åˆ·æ–°ç­–ç•¥ï¼‰ï¼š</p>
<ol>
<li>æ— ç¼“å†²ï¼Œç«‹å³åˆ·æ–°ã€‚ï¼ˆç›´æ¥è°ƒâ½¤ç³»ç»Ÿè°ƒâ½¤ï¼Œæ ‡å‡†å‡ºé”™æµstderré€šå¸¸æ˜¯ä¸å¸¦ç¼“å†²åŒºçš„ï¼Œè¿™ä½¿å¾—å‡ºé”™ä¿¡æ¯èƒ½å¤Ÿå°½å¿«åœ°æ˜¾â½°å‡ºæ¥ï¼‰</li>
<li>æœ‰ç¼“å†²ï¼Œè¡Œåˆ·æ–°ã€‚ï¼ˆä¸€èˆ¬åœ¨æ˜¾ç¤ºå™¨ä¸­ä½¿ç”¨ï¼‰</li>
<li>æœ‰ç¼“å†²ï¼Œç¼“å†²åŒºæ»¡åˆ™åˆ·æ–°ã€‚ï¼ˆæ™®é€šæ–‡ä»¶ä¸€èˆ¬é‡‡ç”¨è¿™ç§æ–¹å¼ï¼‰</li>
</ol>
<p>è¿˜æœ‰ä¸¤ç§ç‰¹æ®Šæƒ…å†µï¼š</p>
<ol>
<li>æ‰§è¡Œfflushè¯­å¥ã€‚</li>
<li>è¿›ç¨‹ç»“æŸã€‚</li>
</ol>
</blockquote>
<p>ä¸‹é¢æ¥çœ‹ä¸€æ®µä»£ç ï¼š</p>
<pre><code class="hljs language-C" lang="C"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span>      </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span>     </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span>  </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span>   </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span>      </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span>   </span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å…³é—­æ ‡å‡†è¾“å‡ºï¼ˆæ–‡ä»¶æè¿°ç¬¦1ï¼‰</span>
    close(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶"log.txt"</span>
    <span class="hljs-comment">// O_WRONLY: åªå†™æ–¹å¼</span>
    <span class="hljs-comment">// O_CREAT: å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º</span>
    <span class="hljs-comment">// O_TRUNC: å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©ºå†…å®¹</span>
    <span class="hljs-comment">// 0666: æ–‡ä»¶æƒé™ï¼ˆæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™ï¼‰</span>
    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">"log.txt"</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0666</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€</span>
    <span class="hljs-keyword">if</span> (fd &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"open"</span>);  <span class="hljs-comment">// æ‰“å°é”™è¯¯ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;        <span class="hljs-comment">// ç¨‹åºç»“æŸ</span>
    }
    
    <span class="hljs-comment">// æ‰“å°ä¿¡æ¯åˆ°æ ‡å‡†è¾“å‡ºï¼ˆç°åœ¨æŒ‡å‘log.txtæ–‡ä»¶ï¼‰</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"hello world: %d\n"</span>, fd);
    
    <span class="hljs-comment">// å…³é—­æ–‡ä»¶</span>
    close(fd);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç¨‹åºæ­£å¸¸ç»“æŸ</span>
}
</code></pre>
<p>è¿™æ®µä»£ç æœ¬æ„æ˜¯æƒ³ä½¿ç”¨é‡å®šå‘ï¼Œè®©æœ¬è¯¥æ‰“å°åœ¨æ˜¾ç¤ºå™¨ä¸Šçš„å†…å®¹å†™åˆ°â€œlog.txtâ€æ–‡ä»¶ä¸­ï¼Œä½†å®é™…è¿è¡Œåä¼šå‘ç°ï¼Œæ–‡ä»¶ä¸­å¹¶æ— å†…å®¹ã€‚</p>
<p>è¿™æ˜¯å› ä¸ºä»£ç ä¸­å°†1å·æ–‡ä»¶æè¿°ç¬¦é‡å®šå‘åˆ°ç£ç›˜æ–‡ä»¶åï¼Œåˆ·æ–°çš„æ–¹å¼å˜ä¸ºäº†å…¨ç¼“å†²ã€‚è€Œå†™å…¥çš„å†…å®¹å¹¶æ²¡æœ‰å¡«æ»¡ç¼“å†²åŒºï¼Œæ‰€ä»¥å°±ä¸ä¼šå°†ç¼“å†²åŒºçš„å†…å®¹åˆ·æ–°åˆ°ç£ç›˜æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆå¯ä»¥æ€ä¹ˆåšå‘¢ï¼Ÿå¯ä»¥ä½¿ç”¨fflushå¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒºã€‚</p>
<pre><code class="hljs language-C" lang="C"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span>      </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span>     </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span>  </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span>   </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span>      </span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span>   </span>

<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// å…³é—­æ ‡å‡†è¾“å‡ºï¼ˆæ–‡ä»¶æè¿°ç¬¦1ï¼‰</span>
    close(<span class="hljs-number">1</span>);
    
    <span class="hljs-comment">// æ‰“å¼€æˆ–åˆ›å»ºæ–‡ä»¶"log.txt"</span>
    <span class="hljs-comment">// O_WRONLY: åªå†™æ–¹å¼</span>
    <span class="hljs-comment">// O_CREAT: å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™åˆ›å»º</span>
    <span class="hljs-comment">// O_TRUNC: å¦‚æœæ–‡ä»¶å­˜åœ¨åˆ™æ¸…ç©ºå†…å®¹</span>
    <span class="hljs-comment">// 0666: æ–‡ä»¶æƒé™ï¼ˆæ‰€æœ‰ç”¨æˆ·å¯è¯»å†™ï¼‰</span>
    <span class="hljs-type">int</span> fd = open(<span class="hljs-string">"log.txt"</span>, O_WRONLY | O_CREAT | O_TRUNC, <span class="hljs-number">0666</span>);
    
    <span class="hljs-comment">// æ£€æŸ¥æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‰“å¼€</span>
    <span class="hljs-keyword">if</span> (fd &lt; <span class="hljs-number">0</span>) {
        perror(<span class="hljs-string">"open"</span>);  <span class="hljs-comment">// æ‰“å°é”™è¯¯ä¿¡æ¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;        <span class="hljs-comment">// ç¨‹åºç»“æŸ</span>
    }
    
    <span class="hljs-comment">// æ‰“å°ä¿¡æ¯åˆ°æ ‡å‡†è¾“å‡ºï¼ˆç°åœ¨æŒ‡å‘log.txtæ–‡ä»¶ï¼‰</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"hello world: %d\n"</span>, fd);
    <span class="hljs-comment">// å¼ºåˆ¶åˆ·æ–°</span>
    fflush(<span class="hljs-built_in">stdout</span>);
    <span class="hljs-comment">// å…³é—­æ–‡ä»¶</span>
    close(fd);
    
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;  <span class="hljs-comment">// ç¨‹åºæ­£å¸¸ç»“æŸ</span>
}
</code></pre>
<h2 data-id="heading-3">2. FILE</h2>
<p>ä¸Šé¢è°ˆå®Œäº†ç¼“å†²åŒºï¼Œé‚£ä¹ˆç¼“å†²åŒºåˆ°åº•åœ¨å“ªé‡Œå‘¢ï¼Ÿå…ˆè¯´ç»“è®ºï¼Œåœ¨<code>FILE</code>ä¸­ã€‚ä¹Ÿå°±æ˜¯è°ƒç”¨<code>fopen</code>å‡½æ•°çš„è¿”å›å€¼çš„ç±»å‹ã€‚</p>
<p>åœ¨æ“ä½œç³»ç»Ÿæ“ä½œæ–‡ä»¶çš„æ—¶å€™åªè®¤è¯†æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œ<code>fopen</code>ä¹‹ç±»çš„å‡½æ•°å°è£…äº†ç³»ç»Ÿè°ƒç”¨å‡½æ•°<code>open</code>ï¼Œæ‰€ä»¥<code>fopen</code>çš„è¿”å›å€¼ï¼ˆFILEç»“æ„ä½“ï¼‰ä¸­å¿…å®šåŒ…å«äº†æ–‡ä»¶æè¿°ç¬¦ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/* 
 * FILEç»“æ„ä½“æ˜¯Cæ ‡å‡†åº“ä¸­è¡¨ç¤ºæ–‡ä»¶æµçš„æ•°æ®ç»“æ„
 * å®ƒå°è£…äº†æ–‡ä»¶æè¿°ç¬¦å’Œç¼“å†²åŒºï¼Œæä¾›æ›´é«˜æ•ˆçš„I/Oæ“ä½œ
 * 
 * å½“æˆ‘ä»¬ä½¿ç”¨ fopen() æ‰“å¼€æ–‡ä»¶æ—¶ï¼Œè¿”å›çš„ FILE* æŒ‡é’ˆå°±æŒ‡å‘ä¸€ä¸ªFILEç»“æ„ä½“
 */</span>
<span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">_IO_FILE</span> FILE;  <span class="hljs-comment">// é€šå¸¸çš„typedefå®šä¹‰</span>
</code></pre>
<p><code>FILE</code>æ˜¯ä¸€ä¸ªç»“æ„ä½“ï¼Œè€Œåœ¨è¿™ä¸ªç»“æ„ä½“å†…éƒ¨ä¼šç»´æŠ¤ä¸€å—è¯­è¨€çº§çš„ç¼“å†²åŒºç©ºé—´ã€‚æ‰€ä»¥å½“æˆ‘ä»¬è°ƒç”¨<code>printf</code>ä¹‹ç±»çš„å‡½æ•°æ—¶ï¼Œæ˜¯å°†è¾“å‡ºæ ¼å¼åŒ–æˆå­—ç¬¦ä¸²å†™å…¥åˆ°<code>FILE</code>ç»“æ„ä½“çš„ç¼“å†²åŒºï¼Œå†æŒ‰ç…§åˆ·æ–°è§„åˆ™åˆ·æ–°åˆ°è¾“å‡ºè®¾å¤‡ä¸Šã€‚ä¸‹é¢æ˜¯FILEç»“æ„ä½“å†…éƒ¨çš„ä¸€éƒ¨åˆ†ï¼š</p>
<pre><code class="hljs language-C" lang="C"><span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">IO_FILE</span> {</span>
    <span class="hljs-type">int</span> _fileno;               <span class="hljs-comment">// æ–‡ä»¶æè¿°ç¬¦ï¼ˆåº•å±‚openè¿”å›çš„fdï¼‰</span>
    <span class="hljs-type">char</span>* _IO_read_ptr;        <span class="hljs-comment">// è¯»ç¼“å†²åŒºå½“å‰ä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_read_end;        <span class="hljs-comment">// è¯»ç¼“å†²åŒºç»“æŸä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_read_base;       <span class="hljs-comment">// è¯»ç¼“å†²åŒºèµ·å§‹ä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_write_ptr;       <span class="hljs-comment">// å†™ç¼“å†²åŒºå½“å‰ä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_write_end;       <span class="hljs-comment">// å†™ç¼“å†²åŒºç»“æŸä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_write_base;      <span class="hljs-comment">// å†™ç¼“å†²åŒºèµ·å§‹ä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_buf_base;        <span class="hljs-comment">// ç¼“å†²åŒºèµ·å§‹ä½ç½®</span>
    <span class="hljs-type">char</span>* _IO_buf_end;         <span class="hljs-comment">// ç¼“å†²åŒºç»“æŸä½ç½®</span>
    <span class="hljs-type">int</span> _flags;                <span class="hljs-comment">// æ–‡ä»¶çŠ¶æ€æ ‡å¿—</span>
    <span class="hljs-comment">// ... è¿˜æœ‰å…¶ä»–å­—æ®µ</span>
};
</code></pre>
<blockquote>
<ol>
<li>æ‰€ä»¥åœ¨å­¦ä¹ ä¾‹å¦‚Cè¯­è¨€çš„æ—¶å€™ï¼Œæ‰€è¯´çš„ç¼“å†²åŒºå®é™…ä¸Šæ˜¯è¯­è¨€çº§ç¼“å†²åŒºï¼Œå’Œå†…æ ¸æ²¡æœ‰å…³ç³»ï¼</li>
<li>ç¼“å†²åŒºåœ¨å“ªï¼ŸFILEå†…éƒ¨ï¼</li>
<li>ä¸ºä»€ä¹ˆè¦æœ‰è¯­è¨€çº§åˆ«ç¼“å†²åŒºï¼Ÿå› ä¸ºè°ƒç”¨ç³»ç»Ÿè°ƒç”¨æ˜¯æœ‰æˆæœ¬çš„ï¼ˆæµªè´¹æ—¶é—´ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥å‡å°‘ç³»ç»Ÿè°ƒç”¨æ¬¡æ•°ã€‚</li>
</ol>
</blockquote>
<h2 data-id="heading-4">3. æ¨¡æ‹Ÿæ–‡ä»¶æ“ä½œ</h2>
<p>ä¸‹é¢é€šè¿‡å¯¹ç³»ç»Ÿè°ƒç”¨å°è£…ï¼Œæ¨¡æ‹Ÿå®ç°ä¸€ä¸‹Cæ ‡å‡†åº“çš„æ–‡ä»¶æ“ä½œæ¥å£ã€‚</p>
<h3 data-id="heading-5">3.1 my_stdio.h</h3>
<pre><code class="hljs language-C" lang="C"><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __MYSTDIO_H__</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> __MYSTDIO_H__</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> FLUSH_NONE 1</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> FLUSH_LINE 2</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> FLUSH_FULL 4</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> SIZE 4096</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> UMASK 0666</span>

<span class="hljs-meta">#<span class="hljs-keyword">define</span> FORCE 1</span>
<span class="hljs-meta">#<span class="hljs-keyword">define</span> NORMAL 2</span>

<span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> _<span class="hljs-title">MY_IO_FILE</span>
{</span>
    <span class="hljs-type">int</span> fileno; <span class="hljs-comment">//æ–‡ä»¶æè¿°ç¬¦</span>
    <span class="hljs-type">int</span> flag; <span class="hljs-comment">//åˆ·æ–°æ–¹å¼</span>
    <span class="hljs-type">char</span> outbuffer[SIZE];   <span class="hljs-comment">//ç¼“å†²åŒº</span>
    <span class="hljs-type">int</span> curr;   <span class="hljs-comment">//å½“å‰ç¼“å†²åŒºå­—ç¬¦æ•°é‡</span>
    <span class="hljs-type">int</span> cap;    <span class="hljs-comment">//å½“å‰ç¼“å†²åŒºæ€»å®¹é‡</span>
}MYFILE;

MYFILE* <span class="hljs-title function_">my_fopen</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* filename, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* mode)</span>;

<span class="hljs-type">void</span> <span class="hljs-title function_">my_fclose</span><span class="hljs-params">(MYFILE* fp)</span>;

<span class="hljs-type">int</span> <span class="hljs-title function_">my_fwrite</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* s, <span class="hljs-type">int</span> size, MYFILE* fp)</span>;

<span class="hljs-type">void</span> <span class="hljs-title function_">my_fflush</span><span class="hljs-params">(MYFILE* fp)</span>;

<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>
</code></pre>
<h3 data-id="heading-6">3.2 my_stdio.c</h3>
<pre><code class="hljs language-C" lang="C"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"my_stdio.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/types.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/stat.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;fcntl.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-comment">// æ‰“å¼€æ–‡ä»¶</span>
MYFILE *<span class="hljs-title function_">my_fopen</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *filename, <span class="hljs-type">const</span> <span class="hljs-type">char</span> *mode)</span>
{
    <span class="hljs-type">int</span> fd = <span class="hljs-number">-1</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(mode, <span class="hljs-string">"w"</span>) == <span class="hljs-number">0</span>)
    {
        fd = open(filename, O_CREAT | O_WRONLY | O_TRUNC, UMASK);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(mode, <span class="hljs-string">"r"</span>) == <span class="hljs-number">0</span>)
    {
        fd = open(filename, O_RDONLY);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(mode, <span class="hljs-string">"a"</span>) == <span class="hljs-number">0</span>)
    {
        fd = open(filename, O_CREAT | O_WRONLY | O_APPEND, UMASK);
    }
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strcmp</span>(mode, <span class="hljs-string">"a+"</span>) == <span class="hljs-number">0</span>)
    {
        fd = open(filename, O_CREAT | O_RDONLY | O_APPEND, UMASK);
    }

    <span class="hljs-keyword">if</span> (fd &lt; <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
    MYFILE *fp = (MYFILE *)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(MYFILE));
    <span class="hljs-keyword">if</span> (fp == <span class="hljs-literal">NULL</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;

    fp-&gt;fileno = fd;
    fp-&gt;flag = FLUSH_LINE;
    fp-&gt;curr = <span class="hljs-number">0</span>;
    fp-&gt;cap = SIZE;
    fp-&gt;outbuffer[<span class="hljs-number">0</span>] = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">return</span> fp;
}

<span class="hljs-type">static</span> <span class="hljs-type">void</span> <span class="hljs-title function_">my_fflush_core</span><span class="hljs-params">(MYFILE *fp, <span class="hljs-type">int</span> force)</span>
{
    <span class="hljs-keyword">if</span> (fp-&gt;curr &lt;= <span class="hljs-number">0</span>)
        <span class="hljs-keyword">return</span>;

    <span class="hljs-keyword">if</span> (force == FORCE)
    {
        write(fp-&gt;fileno, fp-&gt;outbuffer, fp-&gt;curr);
        fp-&gt;curr = <span class="hljs-number">0</span>;
    }
    <span class="hljs-keyword">else</span>
    {
        <span class="hljs-comment">// åˆ¤æ–­åˆ·æ–°æ¡ä»¶</span>
        <span class="hljs-keyword">if</span> ((fp-&gt;flag &amp; FLUSH_LINE) &amp;&amp; (fp-&gt;outbuffer[fp-&gt;curr - <span class="hljs-number">1</span>] == <span class="hljs-string">'\n'</span>))
        {
            <span class="hljs-comment">// è¡Œåˆ·æ–°</span>
            write(fp-&gt;fileno, fp-&gt;outbuffer, fp-&gt;curr);
            fp-&gt;curr = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((fp-&gt;flag &amp; FLUSH_FULL) &amp;&amp; (fp-&gt;curr == fp-&gt;cap))
        {
            <span class="hljs-comment">// æ»¡åˆ·æ–°</span>
            write(fp-&gt;fileno, fp-&gt;outbuffer, fp-&gt;curr);
            fp-&gt;curr = <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span>
        {
            write(fp-&gt;fileno, fp-&gt;outbuffer, fp-&gt;curr);
            fp-&gt;curr = <span class="hljs-number">0</span>;
        }
    }
}

<span class="hljs-type">int</span> <span class="hljs-title function_">my_fwrite</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span> *s, <span class="hljs-type">int</span> size, MYFILE *fp)</span>
{
    <span class="hljs-built_in">memcpy</span>(fp-&gt;outbuffer + fp-&gt;curr, s, size);
    fp-&gt;curr += size;
    my_fflush_core(fp, NORMAL);
    <span class="hljs-keyword">return</span> size;
}

<span class="hljs-type">void</span> <span class="hljs-title function_">my_fflush</span><span class="hljs-params">(MYFILE *fp)</span>
{
    my_fflush_core(fp, FORCE);
}

<span class="hljs-type">void</span> <span class="hljs-title function_">my_fclose</span><span class="hljs-params">(MYFILE *fp)</span>
{
    <span class="hljs-keyword">if</span> (fp-&gt;fileno &gt;= <span class="hljs-number">0</span>)
    {
        my_fflush(fp);
        fsync(fp-&gt;fileno);
        close(fp-&gt;fileno);
        <span class="hljs-built_in">free</span>(fp);
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šåŸºç¡€ï¼ˆ01ï¼‰]]></title>    <link>https://juejin.cn/post/7602098592677969974</link>    <guid>https://juejin.cn/post/7602098592677969974</guid>    <pubDate>2026-02-03T01:03:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602098592677969974" data-draft-id="7602162571380736006" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šåŸºç¡€ï¼ˆ01ï¼‰"/> <meta itemprop="keywords" content="è¿ç»´,æ¶æ„,äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-02-03T01:03:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è€å®å·´äº¤çš„éº»åŒª"/> <meta itemprop="url" content="https://juejin.cn/user/4218156332615384"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Exceptionå¼‚å¸¸æ¶æ„è®¾è®¡ï¼šåŸºç¡€ï¼ˆ01ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4218156332615384/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è€å®å·´äº¤çš„éº»åŒª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:03:37.000Z" title="Tue Feb 03 2026 01:03:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1:first-child,.markdown-body h2:first-child,.markdown-body h3:first-child,.markdown-body h4:first-child,.markdown-body h5:first-child,.markdown-body h6:first-child{margin-top:-1.5rem;margin-bottom:1rem}.markdown-body h1:before,.markdown-body h2:before,.markdown-body h3:before,.markdown-body h4:before,.markdown-body h5:before,.markdown-body h6:before{content:"#";display:inline-block;color:#3eaf7c;padding-right:.23em}.markdown-body h1{position:relative;font-size:2.5rem;margin-bottom:5px}.markdown-body h1:before{font-size:2.5rem}.markdown-body h2{padding-bottom:.5rem;font-size:2.2rem;border-bottom:1px solid #ececec}.markdown-body h3{font-size:1.5rem;padding-bottom:0}.markdown-body h4{font-size:1.25rem}.markdown-body h5{font-size:1rem}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body strong{color:#3eaf7c}.markdown-body img{max-width:100%;border-radius:2px;display:block;margin:auto;border:3px solid rgba(62,175,124,.2)}.markdown-body hr{border:none;border-top:1px solid #3eaf7c;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;overflow-x:auto;padding:.2rem .5rem;margin:0;color:#3eaf7c;font-weight:700;font-size:.85em;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:6px;border:2px solid #3eaf7c}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{font-weight:500;text-decoration:none;color:#3eaf7c}.markdown-body a:active,.markdown-body a:hover{border-bottom:1.5px solid #3eaf7c}.markdown-body a:before{content:"â‡²"}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #3eaf7c}.markdown-body thead{background:#3eaf7c;color:#fff;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(62,175,124,.2)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:.5rem solid;border-color:#42b983;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{outline:none;border:none;border-left:4px solid #3eaf7c;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary::-webkit-details-marker{color:#3eaf7c}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ol li::marker{color:#3eaf7c}.markdown-body ul li{list-style:none}.markdown-body ul li:before{content:"â€¢";margin-right:4px;color:#3eaf7c}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç›‘æ§å‘Šè­¦ã€æ•…éšœè¯Šæ–­æ˜¯è¿ç»´å·¥ç¨‹å¸ˆçš„æ ¸å¿ƒå·¥ä½œä¹‹ä¸€ï¼Œè€Œå¼‚å¸¸æ˜¯å…¶åŸºçŸ³ï¼Œæ‰“å¥½äº†å¼‚å¸¸å¤„ç†è¿™å—åœ°åŸºï¼Œåœ¨ä¸Šå±‚æ²»ç†æ—¶ï¼Œä¾¿ä¼šäº‹åŠåŠŸå€ã€‚å¼‚å¸¸çš„æ¶æ„è®¾è®¡ï¼Œæ˜¯ä¸šåŠ¡æ— å…³çš„ï¼Œå¤§å¤šæ•°å¼€å‘å·¥ç¨‹å¸ˆéƒ½ä¸ä¼šç‰¹åˆ«å…³æ³¨ï¼Œä»€ä¹ˆæ—¶å€™æŠ›å¼‚å¸¸ï¼Œä»€ä¹ˆæ—¶å€™å¤„ç†å¼‚å¸¸éƒ½çœ‹å¿ƒæƒ…å’Œä¹ æƒ¯ã€‚äº’è”ç½‘ä¸Šå…³äºå¼‚å¸¸çš„ç³»ç»Ÿæ€§ç ”ç©¶æ–‡ç« å‡ ä¹æ²¡æœ‰ï¼Œæˆ‘å°†èŠ±è´¹ä¸€æ®µæ—¶é—´ï¼Œç”±æµ…å…¥æ·±æ¢ç©¶å¼‚å¸¸æ¶æ„è®¾è®¡ã€‚</p>
<p>å¼‚å¸¸åˆ†ä¸ºä¸¤éƒ¨åˆ†æ¥ç ”ç©¶ï¼šå¼‚å¸¸æ¶æ„è®¾è®¡ã€å¼‚å¸¸æ²»ç†ã€‚å‰è€…ä¾§é‡<strong>æ³•</strong>ï¼Œåè€…ä¾§é‡<strong>æœ¯</strong>ï¼ˆé“æ³•æœ¯å™¨ï¼‰ã€‚</p>
<hr/>
<p>å¼‚å¸¸æ¶æ„è®¾è®¡åŸåˆ™ï¼ˆä¸ªäººæ€»ç»“çš„å››é¡¹è®¾è®¡å‡†åˆ™ï¼‰ï¼š</p>
<ul>
<li>é˜²å¾¡æ€§ç¼–ç¨‹</li>
<li>fail-fastï¼Œå¿«é€Ÿå¤±è´¥</li>
<li>ç”¨æˆ·å‹å¥½</li>
<li>å¯è§‚æµ‹æ€§ï¼ˆç›‘æ§å‘Šè­¦ã€å¼‚å¸¸æ—¥å¿—æŸ¥è¯¢ã€æ•…éšœè¯Šæ–­ï¼‰</li>
</ul>
<p>æœ¬æ–‡é¢å‘å¼€å‘å·¥ç¨‹å¸ˆå’ŒSREå·¥ç¨‹å¸ˆï¼š</p>
<ul>
<li>å¼€å‘å·¥ç¨‹å¸ˆï¼šåœ¨æ—¥å¸¸ç¼–ç ä¸­å½¢æˆè‰¯å¥½çš„å¼‚å¸¸å¤„ç†ä¹ æƒ¯ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¥å£®æ€§</li>
<li>SRE å·¥ç¨‹å¸ˆï¼šå¯è§‚æµ‹æ€§å’Œæ•…éšœæ²»ç†åŸºçŸ³ï¼Œåˆ¶å®šè¿ç»´ç­–ç•¥ä¸è§„èŒƒï¼Œä½¿ç”¨æŠ€æœ¯ç®¡æ§ä»£ç è´¨é‡ã€‚</li>
</ul>
<h2 data-id="heading-0">å¼‚å¸¸åŸºç¡€</h2>
<p>å¼‚å¸¸æ˜¯ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„éæ­£å¸¸æƒ…å†µï¼Œè¿™äº›æƒ…å†µé€šå¸¸éœ€è¦ç‰¹æ®Šå¤„ç†ã€‚å¼‚å¸¸æœºåˆ¶æ˜¯ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­å¤„ç†é”™è¯¯å’Œå¼‚å¸¸æƒ…å†µçš„é‡è¦æ–¹å¼ï¼Œä¸åŒè¯­è¨€åœ¨å¼‚å¸¸å¤„ç†ä¸Šæœ‰ä¸åŒçš„å“²å­¦å’Œå®ç°ã€‚</p>
<p>ä»¥<code>Java</code>ä¸ºä»£è¡¨çš„å—æ£€å¼‚å¸¸æœºåˆ¶é€šè¿‡ç¼–è¯‘å™¨å¼ºåˆ¶æ£€æŸ¥å¼‚å¸¸å£°æ˜å’Œå¤„ç†ï¼Œç¡®ä¿é”™è¯¯çš„æ˜¾å¼ç®¡ç†ï¼Œå¢å¼ºäº†ä»£ç å¯é æ€§ä½†å¯èƒ½å¼•å…¥å†—ä½™ï¼Œå—æ£€æŸ¥å¼‚å¸¸æœºåˆ¶ä½“ç°äº†é˜²å¾¡æ€§ç¼–ç¨‹çš„å¼‚å¸¸è®¾è®¡åŸåˆ™ï¼›ä»¥<code>Python</code>å’Œ<code>JavaScript</code>ä¸ºä»£è¡¨çš„çµæ´»è¿è¡Œæ—¶å¼‚å¸¸æœºåˆ¶é‡‡ç”¨â€œè¯·æ±‚åŸè°…æ¯”è®¸å¯æ›´å®¹æ˜“â€çš„å“²å­¦ï¼Œæä¾›ç®€æ´çš„<code>try</code>ç»“æ„å—å’Œå¼‚æ­¥é”™è¯¯å¤„ç†ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘ä½†ç¼ºä¹ç¼–è¯‘æ—¶ä¿éšœï¼›<code>C++</code>å’Œ<code>Rust</code>ä»£è¡¨çš„èµ„æºå®‰å…¨ä¸æ€§èƒ½å¯¼å‘æœºåˆ¶åˆ†åˆ«é€šè¿‡ RAII æ¨¡å¼å’Œ Result ç±»å‹ç³»ç»Ÿï¼Œåœ¨ä¿è¯èµ„æºå®‰å…¨çš„åŒæ—¶è¿½æ±‚é›¶å¼€é”€å¼‚å¸¸å¤„ç†ï¼Œé€‚åˆç³»ç»Ÿç¼–ç¨‹ï¼›<code>Go</code>è¯­è¨€é‡‡ç”¨æ˜¾å¼é”™è¯¯å€¼è¿”å›æ¨¡å¼ï¼Œé€šè¿‡å¤šè¿”å›å€¼ä¼ é€’é”™è¯¯ï¼Œå¼ºåˆ¶è°ƒç”¨è€…å³æ—¶å¤„ç†ï¼Œé¿å…äº†å¼‚å¸¸çš„æ§åˆ¶æµè·³è·ƒï¼›è¿™äº›ä¸åŒèŒƒå¼åæ˜ äº†å„è¯­è¨€åœ¨å®‰å…¨æ€§ã€çµæ´»æ€§ã€æ€§èƒ½åŠè¡¨è¾¾åŠ›ä¹‹é—´çš„ä¸åŒæƒè¡¡ã€‚</p>
<blockquote>
<p>ç¤ºä¾‹ä»£ç é€‰æ‹©<code>Python</code>ï¼ˆ<code>Flask</code>ï¼‰ï¼Œç”¨æˆ·æ•°é‡åºå¤§ï¼Œè¯­æ³•æ›´ç®€æ´ï¼Œå¯è¯»æ€§å¥½</p>
</blockquote>
<p>æ–‡ä¸­ä»¥æœ€å¸¸è§çš„åº”ç”¨çº§ç¼–ç¨‹è¯­è¨€ <code>Python</code>ï¼ˆ<code>Flask</code>ï¼‰ï¼Œè¾…åŠ©<code>Java</code>ï¼ˆ<code>SpringBoot</code>ï¼‰ä¸ºä¾‹ï¼Œæ¥ä»‹ç»å¼‚å¸¸æœºåˆ¶ã€‚</p>
<h3 data-id="heading-1">å¼‚å¸¸æ ¸å¿ƒ</h3>
<p>å¼€å‘è€…éœ€è¦å…³æ³¨çš„å¼‚å¸¸æ ¸å¿ƒä¸‰è¦ç´ ï¼š<code>try</code>å¼‚å¸¸å¤„ç†å—ã€<code>raise</code>å¼‚å¸¸æŠ›å‡ºå’Œè‡ªå®šä¹‰å¼‚å¸¸ã€‚</p>
<h4 data-id="heading-2">å¼‚å¸¸å¤„ç†å—</h4>
<p>å¼‚å¸¸å¤„ç†å—çš„å…³é”®å­—å’Œç»“æ„ä¸º<code>try-except-else-finally</code>ï¼Œå…¶ä¸­<code>except</code>å¯ä»¥å¤šä¸ªåµŒå¥—ï¼Œæ”¯æŒåœ¨ä¸€æ¡<code>except</code>è¯­å¥ä¸­æ•è·å¤šä¸ªå¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç </span>
    result = <span class="hljs-number">10</span> / <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¾“å…¥æ•°å­—: "</span>))
<span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:           <span class="hljs-comment"># æ•è·ç‰¹å®šå¼‚å¸¸</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:    <span class="hljs-comment"># å¤šä¸ªexceptå­å¥</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é™¤é›¶é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">except</span> (TypeError, EOFError):     <span class="hljs-comment"># æ•è·å¤šä¸ªå¼‚å¸¸</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ç±»å‹æˆ–è¾“å…¥é”™è¯¯"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:            <span class="hljs-comment"># é€šç”¨å¼‚å¸¸æ•è·</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"å…¶ä»–é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">else</span>:                             <span class="hljs-comment"># æ— å¼‚å¸¸æ—¶æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"ç»“æœ: <span class="hljs-subst">{result}</span>"</span>)
<span class="hljs-keyword">finally</span>:                          <span class="hljs-comment"># æ€»æ˜¯æ‰§è¡Œ</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ¸…ç†å®Œæˆ"</span>)
</code></pre>
<h4 data-id="heading-3">å¼‚å¸¸æŠ›å‡º</h4>
<p>å¼€å‘è€…å¯ä»¥ä½¿ç”¨<code>raise</code>ä¸»åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼Œä¸€èˆ¬æœ‰2ä¸ªç”¨å¤„ï¼šä¸»åŠ¨æŠ›å‡ºã€å¼‚å¸¸è½¬æ¢ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># æŠ›å‡ºå¼‚å¸¸å®ä¾‹</span>
<span class="hljs-keyword">raise</span> ValueError(<span class="hljs-string">"å‚æ•°æ— æ•ˆ"</span>)

<span class="hljs-comment"># å¼‚å¸¸è½¬æ¢</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-comment"># å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç </span>
    result = <span class="hljs-number">10</span> / <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>(<span class="hljs-string">"è¾“å…¥æ•°å­—: "</span>))
<span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e:           <span class="hljs-comment"># æ•è·ç‰¹å®šå¼‚å¸¸</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"è¾“å…¥é”™è¯¯æˆ–: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">except</span> ZeroDivisionError <span class="hljs-keyword">as</span> e:    <span class="hljs-comment"># å¤šä¸ªexceptå­å¥</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"é™¤é›¶é”™è¯¯: <span class="hljs-subst">{e}</span>"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:            <span class="hljs-comment"># é€šç”¨å¼‚å¸¸æ•è·</span>
		<span class="hljs-keyword">raise</span> MyException <span class="hljs-comment"># å…¶ä»–å¼‚å¸¸Exceptionè½¬æ¢ä¸ºç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸MyException</span>
</code></pre>
<h4 data-id="heading-4">è‡ªå®šä¹‰å¼‚å¸¸</h4>
<p><code>Exception</code>æ˜¯<code>Python</code>ä¸­æ‰€æœ‰çš„<strong>éç³»ç»Ÿé€€å‡ºç±»å¼‚å¸¸</strong>çš„çˆ¶ç±»ï¼Œæ˜¯æ‰€æœ‰è‡ªå®šä¹‰å¼‚å¸¸çš„åŸºç±»ï¼Œå…¶æœ¬èº«å‡ ä¹æ²¡æœ‰æ–°å¢çš„ä¸“å±å­—æ®µ/æ–¹æ³•ï¼Œå…¶æ‰€æœ‰æ ¸å¿ƒå±æ€§å’Œæ–¹æ³•éƒ½ç»§æ‰¿è‡ªçˆ¶ç±»<code>BaseException</code>ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># ç›´æ¥ç»§æ‰¿Exception</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">AppException</span>(<span class="hljs-title class_ inherited__">Exception</span>):
    <span class="hljs-keyword">pass</span>

<span class="hljs-comment"># é—´æ¥ç»§æ‰¿Exception</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyAppException</span>(<span class="hljs-title class_ inherited__">AppException</span>):
    <span class="hljs-keyword">pass</span>
</code></pre>
<p>è‡ªå®šä¹‰å¼‚å¸¸éœ€å…³æ³¨ï¼š</p>
<ul>
<li><code>Exception</code>å¼‚å¸¸å‚æ•°å…ƒç»„<code>args</code></li>
<li>åœ¨<code>__init__</code>ä¸­è°ƒç”¨<code>super().__init__(message)</code> â†’ æ­£ç¡®è®¾ç½®<code>args</code></li>
<li>æŒ‰éœ€é‡å†™<code>__str__</code> â†’ æä¾›å‹å¥½æ˜¾ç¤º</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># Exceptionå¼‚å¸¸å‚æ•°</span>
e = Exception(<span class="hljs-string">"é”™è¯¯æ¶ˆæ¯"</span>, <span class="hljs-string">"é™„åŠ ä¿¡æ¯"</span>, <span class="hljs-number">123</span>)
<span class="hljs-built_in">print</span>(e.args)  <span class="hljs-comment"># ('é”™è¯¯æ¶ˆæ¯', 'é™„åŠ ä¿¡æ¯', 123)</span>

<span class="hljs-comment"># å¿…é¡»è°ƒç”¨ super().__init__ çˆ¶ç±»æ„é€ å‡½æ•°</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyException</span>(<span class="hljs-title class_ inherited__">Exception</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, message, **kwargs</span>):
        <span class="hljs-built_in">super</span>().__init__(message)  <span class="hljs-comment"># å¿…é¡»è°ƒç”¨ï¼</span>
        <span class="hljs-comment"># ç„¶åæ·»åŠ é¢å¤–å­—æ®µ</span>
        <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> kwargs.items():
            <span class="hljs-built_in">setattr</span>(self, k, v)

<span class="hljs-comment"># é‡å†™ __str__ï¼Œå­—ç¬¦ä¸²å‹å¥½æç¤º</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MyException</span>(<span class="hljs-title class_ inherited__">Exception</span>):
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__str__</span>(<span class="hljs-params">self</span>):
        <span class="hljs-comment"># é»˜è®¤è¿”å›argsçš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼Œé€šå¸¸éœ€è¦é‡å†™</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">f"MyException: <span class="hljs-subst">{<span class="hljs-built_in">super</span>().__str__()}</span>"</span>
</code></pre>
<p>å½“ä¸€ä¸ªå¼‚å¸¸è§¦å‘äº†å¦ä¸€ä¸ªå¼‚å¸¸æ—¶ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªå±æ€§<code>__cause__</code>å’Œ<code>__context__</code>å¯ä»¥è¿½æº¯<strong>åŸå§‹å¼‚å¸¸</strong>ï¼Œ<code>Python</code>è§£é‡Šå™¨ä¼šè‡ªåŠ¨å¤„ç†å…¶èµ‹å€¼ï¼Œä¹Ÿå¯é€šè¿‡è¯­æ³•æ‰‹åŠ¨æŒ‡å®šï¼Œæ˜¯å®ç°<strong>å¼‚å¸¸é“¾</strong>çš„æ ¸å¿ƒã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨å¼‚å¸¸å¤„ç†æ—¶ï¼Œå‘ç”Ÿäº†æ–°çš„å¼‚å¸¸ï¼Œå°±ä¼šå½¢æˆä¸€æ¡å¼‚å¸¸é“¾ï¼š<code>Exception A -&gt; Exception B -&gt; ...</code>ï¼Œåœ¨å¼‚å¸¸è°ƒè¯•çš„æ—¶å€™éå¸¸æœ‰ç”¨ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># 1. __cause__ (æ˜¾å¼é“¾ï¼Œä½¿ç”¨ from)</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">int</span>(<span class="hljs-string">"abc"</span>)
<span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e1:
    <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"å¤„ç†å¤±è´¥"</span>) <span class="hljs-keyword">from</span> e1  <span class="hljs-comment"># â† e1å­˜å…¥__cause__</span>

<span class="hljs-comment"># 2. __context__ (éšå¼é“¾ï¼Œè‡ªåŠ¨è®¾ç½®)</span>
<span class="hljs-keyword">try</span>:
    <span class="hljs-built_in">int</span>(<span class="hljs-string">"abc"</span>)
<span class="hljs-keyword">except</span> ValueError <span class="hljs-keyword">as</span> e1:
    <span class="hljs-keyword">raise</span> RuntimeError(<span class="hljs-string">"å¤„ç†å¤±è´¥"</span>)  <span class="hljs-comment"># â† e1è‡ªåŠ¨å­˜å…¥__context__</span>
</code></pre>
<p>å½“æ²¡æœ‰ä½¿ç”¨<code>raise ... from</code>è¯­æ³•æ—¶ï¼Œè‹¥åœ¨ä¸€ä¸ªå¼‚å¸¸çš„å¤„ç†è¿‡ç¨‹ä¸­ï¼ˆ<code>except</code>/<code>finally</code>å—ï¼‰è§¦å‘äº†å¦ä¸€ä¸ªå¼‚å¸¸ï¼ŒPython ä¼š<strong>è‡ªåŠ¨</strong>å°†å‰ä¸€ä¸ªå¼‚èµ‹å€¼ç»™åä¸€ä¸ªå¼‚å¸¸çš„<code>__context__</code>å±æ€§ï¼Œè¿™æ˜¯<strong>éšå¼å…³è”</strong>ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ã€‚<code>__cause__</code>å­—æ®µåˆ™æ˜¯<strong>æ‰‹åŠ¨æŒ‡å®š</strong>çš„ï¼Œæ˜¯ä¸ºå¼‚å¸¸çš„<strong>æ˜¾ç¤ºå…³è”</strong>ï¼Œå…¶ä¼˜å…ˆçº§é«˜äº<code>__context__</code>ã€‚</p>
<p>ç‰¹åˆ«åœ°ï¼Œå½“ä½¿ç”¨<code>raise MyException from None</code>å¯ä»¥å±è”½æ‰€æœ‰å¼‚å¸¸å…³è”ï¼ˆ<code>__cause__</code>å’Œ<code>__context__</code>å‡ä¸º<code>None</code>ï¼‰ï¼Œåªæ‰“å°å½“å‰å¼‚å¸¸ã€‚å¦ä¸€æ–¹é¢ï¼š<code>__context__</code>å’Œ<code>__cause__</code>çš„è¯­ä¹‰å­˜åœ¨å·®åˆ«ï¼Œå‰è€…æ˜¯ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œåè€…æ˜¯ç›´æ¥åŸå› ï¼Œè¿™åœ¨æ‰“å°å¼‚å¸¸ä¿¡æ¯çš„æ—¶å€™ä¼šå­˜åœ¨è¯­ä¹‰å·®åˆ«ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># __context__ï¼Œåœ¨å¤„ç†åº•å±‚å¼‚å¸¸çš„è¿‡ç¨‹ä¸­ï¼Œåˆå‘ç”Ÿäº†ä¸€ä¸ªæ–°çš„å¼‚å¸¸</span>
During handling of the above exception, another exception occurred:

<span class="hljs-comment"># __cause__ï¼Œæ–°å¼‚å¸¸æ˜¯ç”±åº•å±‚å¼‚å¸¸ç›´æ¥å¯¼è‡´çš„</span>
The above exception was the direct cause of the following exception:
</code></pre>
<p>ä¸€å¥è¯ç†è§£ï¼š<code>__context__</code>å’Œ<code>__cause__</code>å‡ä¸º<code>Exception</code>å¯¹è±¡ï¼Œå­˜å‚¨å½“å‰å¼‚å¸¸çš„å…³è”å¼‚å¸¸ï¼Œ<code>__context__</code>æ˜¯è‡ªåŠ¨å…³è”çš„ï¼Œè€Œ<code>__cause__</code>æ˜¯æ‰‹æ®µå…³è”çš„ï¼Œä½¿ç”¨<code>raise MyException from e</code>è¯­å¥ã€‚</p>
<hr/>
<p>èŠåˆ°äº†è¿™é‡Œï¼Œå°±å…ˆç®€å•å¼‚å¸¸å¤„ç†æ—¶å¼‚å¸¸é“¾çš„ç”¨æ³•ï¼Œåœ¨å¼‚å¸¸è½¬æ¢æ—¶éœ€è¦ä¸»åŠ¨æŠ›å‡ºæ–°çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># DataAceessException æ˜¯ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ï¼Œå±è”½åº•å±‚çš„ä¿¡æ¯ï¼Œå‘ä¸Šå‘ˆç°ç»Ÿä¸€å‹å¥½æç¤ºï¼ŒåŒæ—¶ä½¿ç”¨__cause__æ¥è®°å½•åŸå§‹å¼‚å¸¸</span>
DataAcessException -&gt; requests.exceptions.ConnectTimeout
DataAccessException -&gt; pymysql.MySQLError
DataAccessException -&gt; FileNotFoundError
</code></pre>
<p>åœ¨ä¸šåŠ¡å±‚è¿”å›å¼‚å¸¸<code>DataAccessException</code>ç”¨æ¥å±è”½åº•å±‚æŠ€æœ¯æ€§å¼‚å¸¸ï¼Œä½†æ˜¯åœ¨æ‰“å°æ—¥å¿—çš„æ—¶å€™ä¹Ÿåº”è¯¥è®°å½•åŸå§‹çš„å¼‚å¸¸ä¿¡æ¯ï¼Œè¿™æ ·ä¾¿äºè¿›è¡Œå¼‚å¸¸è¯Šæ–­ã€‚å¼‚å¸¸å¤„ç†å’Œæ—¥å¿—æ‰“å°çš„æ¶æ„è®¾è®¡ï¼Œå°†åœ¨åç»­è¯¦ç»†ä»‹ç»ã€‚</p>
<h3 data-id="heading-5">å¼‚å¸¸å»¶ä¼¸</h3>
<h4 data-id="heading-6">å¼‚å¸¸å±‚æ¬¡ç»“æ„</h4>
<p><code>Python</code>ä¸­æ‰€æœ‰çš„å¼‚å¸¸éƒ½æ˜¯<code>BaseException</code>çš„å­ç±»ã€‚ä¸»è¦å±‚çº§ï¼š</p>
<pre><code class="hljs language-php" lang="php">BaseException
 â”œâ”€â”€ SystemExit           <span class="hljs-comment"># ç¨‹åºé€€å‡º</span>
 â”œâ”€â”€ KeyboardInterrupt    <span class="hljs-comment"># ç”¨æˆ·ä¸­æ–­(Ctrl+C)</span>
 â”œâ”€â”€ GeneratorExit        <span class="hljs-comment"># ç”Ÿæˆå™¨å…³é—­</span>
 â””â”€â”€ <span class="hljs-built_in">Exception</span>            <span class="hljs-comment"># å¸¸è§„å¼‚å¸¸åŸºç±»</span>
      â”œâ”€â”€ <span class="hljs-built_in">ArithmeticError</span>
      â”œâ”€â”€ LookupError
      â”œâ”€â”€ OSError
      â”œâ”€â”€ ValueError
      â””â”€â”€ ... (æ‰€æœ‰å†…ç½®å¼‚å¸¸)
</code></pre>
<p><code>Exception</code>ä¸<code>SystemExit</code>ã€<code>KeyboardInterrupt</code>æ˜¯å¹¶åˆ—å…³ç³»ï¼Œå› æ­¤ä½¿ç”¨<code>except Exception</code>ä¸ä¼šæ•è·ç³»ç»Ÿé€€å‡ºä¿¡å·ï¼Œå¯ä»¥ä½¿ç”¨<code>except BaseException</code>æ•è·æ‰€æœ‰å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">try</span>:
    <span class="hljs-keyword">raise</span> SystemExit(<span class="hljs-string">"é€€å‡ºç¨‹åº"</span>)
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:  <span class="hljs-comment"># ä¸ä¼šæ•è·SystemExit</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"ä¸ä¼šæ‰§è¡Œè¿™é‡Œ"</span>)
<span class="hljs-keyword">except</span> BaseException <span class="hljs-keyword">as</span> e:  <span class="hljs-comment"># ä¼šæ•è·</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•è·åˆ°BaseException: <span class="hljs-subst">{e}</span>"</span>)
</code></pre>
<h4 data-id="heading-7"><code>assert</code>æ–­è¨€</h4>
<p><code>assert</code>æ–­è¨€ï¼Œå¯ä»¥çœ‹ä½œæ˜¯<strong>ä¸€ç§å¸¦æœ‰è°ƒè¯•æ ‡å¿—çš„è¯­æ³•ç³–</strong>ï¼Œä½†<strong>ä¸å®Œå…¨ç­‰ä»·äºç®€å•çš„<code>if-raise</code></strong>ï¼Œ<code>assert</code>ä»…åœ¨è°ƒè¯•æ—¶ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨<code>python -O main.py</code>çš„<code>-O</code>æ¨¡å¼å¿½ç•¥æ‰ï¼Œç±»ä¼¼äºå¿½ç•¥æ‰æ³¨é‡Šä»£ç ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># assertè¯­å¥</span>
<span class="hljs-keyword">assert</span> condition, <span class="hljs-string">"é”™è¯¯ä¿¡æ¯"</span>

<span class="hljs-comment"># å¤§è‡´ç­‰æ•ˆçš„if-raiseå®ç°</span>
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> condition:
    <span class="hljs-keyword">raise</span> AssertionError(<span class="hljs-string">"é”™è¯¯ä¿¡æ¯"</span>)

<span class="hljs-comment"># assertçš„å®é™…ç­‰æ•ˆä»£ç </span>
<span class="hljs-keyword">if</span> <span class="hljs-literal">__debug__</span>:
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> condition:
        <span class="hljs-keyword">raise</span> AssertionError(<span class="hljs-string">"é”™è¯¯ä¿¡æ¯"</span>)
</code></pre>
<p><code>with</code>å—åœ¨èµ„æºç®¡ç†ä¸Šï¼Œéå¸¸æœ‰ç”¨ï¼Œå¯ä»¥ç®€åŒ–ä»£ç ï¼Œæé«˜å¯è¯»æ€§ã€‚åœ¨èµ„æºå¤„ç†æ—¶å³ä½¿å‘ç”Ÿå¼‚å¸¸ï¼Œä¹Ÿå¯ä»¥ä¿è¯èµ„æºè¢«é‡Šæ”¾ï¼Œæœ‰æ•ˆé¿å…èµ„æºæ³„éœ²é—®é¢˜ã€‚åœ¨Javaä¸­ä¹Ÿæœ‰ç±»ä¼¼çš„<code>try-with-resource</code>è¯­å¥ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># èµ„æºæ³„éœ²</span>
file = <span class="hljs-literal">None</span>
<span class="hljs-keyword">try</span>:
    file = <span class="hljs-built_in">open</span>(<span class="hljs-string">"file.txt"</span>, <span class="hljs-string">"r"</span>)
    content = file.read()
<span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
    <span class="hljs-keyword">pass</span> <span class="hljs-comment"># å‘ç”Ÿå¼‚å¸¸æ˜¯ä¸å¯¹fileè¿›è¡Œå…³é—­ï¼Œä¼šé€ æˆæ–‡ä»¶èµ„æºæ³„éœ²</span>

<span class="hljs-comment"># ä¼ ç»Ÿæ–¹å¼</span>
file = <span class="hljs-literal">None</span>
<span class="hljs-keyword">try</span>:
    file = <span class="hljs-built_in">open</span>(<span class="hljs-string">"file.txt"</span>, <span class="hljs-string">"r"</span>)
    content = file.read()
<span class="hljs-keyword">finally</span>:
    <span class="hljs-keyword">if</span> file:
        file.close()

<span class="hljs-comment"># withè¯­å¥æ–¹å¼ï¼ˆæ›´ç®€æ´ï¼‰</span>
<span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">"file.txt"</span>, <span class="hljs-string">"r"</span>) <span class="hljs-keyword">as</span> file:
    content = file.read()
</code></pre>
<p>åœ¨å¼‚å¸¸å‘ç”Ÿåï¼Œå‡½æ•°çš„æ‰§è¡Œå¯ä»¥å»¶ä¼¸å¾ˆå¤šï¼ŒåæœŸå°†å•ç‹¬å†™ä¸€ç¯‡æ–‡ç« è®²è§£ï¼Œå…¶ä¸­<code>except</code>ã€<code>finally</code>å’Œ<code>return</code>è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯é¢è¯•çš„ä¸€ä¸ªé«˜é¢‘è€ƒç‚¹ã€‚</p>
<h2 data-id="heading-8">å¼‚å¸¸è¿›é˜¶</h2>
<p>åœ¨[å¼‚å¸¸åŸºç¡€](# å¼‚å¸¸åŸºç¡€)ç« èŠ‚ï¼Œä¸»è¦ä»‹ç»ç¼–ç¨‹è¯­è¨€åŸç”Ÿçš„å¼‚å¸¸æœºåˆ¶ï¼Œæœ¬ç« èŠ‚ä»‹ç»åº”ç”¨çº§å¼€å‘æ¡†æ¶ä¸‹çš„å¼‚å¸¸æœºåˆ¶ã€‚</p>
<h3 data-id="heading-9">Flaskå¼‚å¸¸<code>HTTPException</code>ï¼ˆå¾…è¡¥å……ï¼‰</h3>
<p>åº”ç”¨çº§å¼€å‘æ¡†æ¶æ˜¯åŸºäº<strong>RESTful API</strong>è®¾è®¡çš„ï¼Œå› æ­¤æœ‰ä¸“é—¨å°è£…é¢å‘HTTPçš„å¼‚å¸¸ç±»ï¼Œå¦‚<code>Flask</code>ä¸­çš„<code>HTTPException</code>ã€‚</p>
<p><strong>å¸¸è§HTTPå¼‚å¸¸</strong></p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-built_in">abort</span>(<span class="hljs-number">404</span>)           # NotFound
<span class="hljs-built_in">abort</span>(<span class="hljs-number">400</span>)           # BadRequest
<span class="hljs-built_in">abort</span>(<span class="hljs-number">401</span>)           # Unauthorized
<span class="hljs-built_in">abort</span>(<span class="hljs-number">403</span>)           # Forbidden
<span class="hljs-built_in">abort</span>(<span class="hljs-number">500</span>)           # InternalServerError
</code></pre>
<p><code>abort</code>å¯ä»¥çœ‹ä½œ<code>assert</code>æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œæ ¹æ®ä»£ç æŠ›å‡ºå…·ä½“çš„å¼‚å¸¸ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># raise HTTPException</span>
user = User.query.get(user_id)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
        <span class="hljs-keyword">raise</span> werkzeug.exceptions.NotFound(<span class="hljs-string">f"ç”¨æˆ· <span class="hljs-subst">{user_id}</span> ä¸å­˜åœ¨"</span>)
<span class="hljs-comment"># abort</span>
user = User.query.get(user_id)
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> user:
    		abort(<span class="hljs-number">404</span>, <span class="hljs-string">f"ç”¨æˆ· <span class="hljs-subst">{user_id}</span> ä¸å­˜åœ¨"</span>)
</code></pre>
<h3 data-id="heading-10">å¼‚å¸¸å¤„ç†å™¨ <code>handler</code></h3>
<p>å¼‚å¸¸æŠ›å‡ºåï¼Œå¯ä»¥è¢«å¼‚å¸¸å¤„ç†å™¨æ‰€æ•è·å¹¶è¿›è¡Œå¤„ç†ã€‚è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†å™¨åœ¨å‡½æ•°å¤´ä¸ŠåŠ  <code>@app.errorhandler(ExceptionType)</code>æ³¨è§£</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># åŸºäºçŠ¶æ€ç çš„å¤„ç†å™¨</span>
<span class="hljs-meta">@app.errorhandler(<span class="hljs-params"><span class="hljs-number">404</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_404</span>(<span class="hljs-params">error</span>):
    <span class="hljs-string">"""å¤„ç†404é”™è¯¯"""</span>
    <span class="hljs-keyword">if</span> request.path.startswith(<span class="hljs-string">'/api/'</span>):
        <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"error"</span>: <span class="hljs-string">"èµ„æºä¸å­˜åœ¨"</span>}), <span class="hljs-number">404</span>
    <span class="hljs-keyword">return</span> render_template(<span class="hljs-string">'404.html'</span>), <span class="hljs-number">404</span>

<span class="hljs-comment"># åŸºäºå¼‚å¸¸ç±»çš„å¤„ç†å™¨</span>
<span class="hljs-meta">@app.errorhandler(<span class="hljs-params">ValidationError</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_validation_error</span>(<span class="hljs-params">error</span>):
    <span class="hljs-string">"""å¤„ç†éªŒè¯é”™è¯¯"""</span>
    <span class="hljs-keyword">return</span> jsonify({
        <span class="hljs-string">"error"</span>: <span class="hljs-string">"éªŒè¯å¤±è´¥"</span>,
        <span class="hljs-string">"message"</span>: error.message,
        <span class="hljs-string">"details"</span>: error.details
    }), error.code
</code></pre>
<p>ä¸Šè¿°ä»£ç æ˜¯å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œå¯ä»¥å®šä¹‰è“å›¾çº§çš„å¼‚å¸¸å¤„ç†å‡½æ•°ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Blueprint

api_bp = Blueprint(<span class="hljs-string">'api'</span>, __name__, url_prefix=<span class="hljs-string">'/api'</span>)

<span class="hljs-comment"># è“å›¾å±€éƒ¨å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-meta">@api_bp.errorhandler(<span class="hljs-params"><span class="hljs-number">404</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">api_404</span>(<span class="hljs-params">error</span>):
    <span class="hljs-string">"""åªåœ¨apiè“å›¾å†…æœ‰æ•ˆçš„404å¤„ç†å™¨"""</span>
    <span class="hljs-keyword">return</span> jsonify({<span class="hljs-string">"error"</span>: <span class="hljs-string">"APIèµ„æºä¸å­˜åœ¨"</span>}), <span class="hljs-number">404</span>
</code></pre>
<p>å¯ä»¥å‘ç°ï¼Œå¼‚å¸¸å¤„ç†å™¨ä¸­çš„<code>ExceptionType</code>å¯ä»¥æœ‰å¤šä¸ªï¼ŒæŠ›å‡ºçš„å¼‚å¸¸æ˜¯å¦‚ä½•åŒ¹é…çš„ï¼Ÿä¼˜å…ˆçº§ï¼Ÿ</p>
<h3 data-id="heading-11">å¼‚å¸¸å¤„ç†ä¼˜å…ˆçº§</h3>
<p>å¼‚å¸¸å¤„ç†ä¼˜å…ˆçº§ï¼šå…·ä½“å¼‚å¸¸ç±» -&gt; çˆ¶å¼‚å¸¸ç±» -&gt; çˆ¶ç±»çš„çˆ¶ç±» &gt; .. &gt; <code>Exception</code> &gt; <code>BaseException</code></p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> werkzeug.exceptions <span class="hljs-keyword">import</span> NotFound, HTTPException

<span class="hljs-comment"># å®šä¹‰å¤šä¸ªå¤„ç†å™¨</span>
<span class="hljs-meta">@app.errorhandler(<span class="hljs-params"><span class="hljs-number">404</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_404</span>(<span class="hljs-params">error</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œ: 404çŠ¶æ€ç å¤„ç†å™¨"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"404çŠ¶æ€ç å¤„ç†å™¨"</span>, <span class="hljs-number">404</span>

<span class="hljs-meta">@app.errorhandler(<span class="hljs-params">NotFound</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_not_found_class</span>(<span class="hljs-params">error</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œ: NotFoundå¼‚å¸¸ç±»å¤„ç†å™¨"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"NotFoundå¼‚å¸¸ç±»å¤„ç†å™¨"</span>, <span class="hljs-number">404</span>

<span class="hljs-meta">@app.errorhandler(<span class="hljs-params">HTTPException</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_http_exception</span>(<span class="hljs-params">error</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œ: HTTPExceptionåŸºç±»å¤„ç†å™¨"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"HTTPExceptionåŸºç±»å¤„ç†å™¨"</span>, error.code

<span class="hljs-comment"># æµ‹è¯•è·¯ç”±</span>
<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/test-priority'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">test_priority</span>():
    abort(<span class="hljs-number">404</span>)  <span class="hljs-comment"># æŠ›å‡ºNotFoundå¼‚å¸¸</span>
  
<span class="hljs-comment"># è®¿é—® /test-priority çš„è¾“å‡ºï¼š</span>
<span class="hljs-comment"># æ‰§è¡Œ: NotFoundå¼‚å¸¸ç±»å¤„ç†å™¨</span>
<span class="hljs-comment"># åªæœ‰è¿™ä¸ªå¤„ç†å™¨è¢«æ‰§è¡Œï¼Œå…¶ä»–ä¸ä¼šæ‰§è¡Œ</span>

<span class="hljs-comment"># åˆ é™¤@app.errorhandler(NotFound)ï¼Œæ‰§è¡Œ404çŠ¶æ€ç å¤„ç†å™¨</span>
<span class="hljs-comment"># abortå®é™…æ‰§è¡Œçš„æ˜¯ raise NotFound</span>
</code></pre>
<p>ä¸€èˆ¬åœ°ï¼Œå¯ä½¿ç”¨<code>@app.errorhandler(Exception)</code>æ¥å®ç°å…¨å±€å¼‚å¸¸å…œåº•å¤„ç†æœºåˆ¶ï¼Œä¿è¯æ‰€æœ‰çš„å¼‚å¸¸éƒ½ä¸ä¼šæ— é™å‘ä¸ŠæŠ›å‡ºã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.errorhandler(<span class="hljs-params">Exception</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handler_general_exception</span>(<span class="hljs-params">error</span>):
    <span class="hljs-built_in">print</span>(<span class="hljs-string">"æ‰§è¡Œ: é€šç”¨Exceptionå¤„ç†å™¨"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é€šç”¨Exceptionå¤„ç†å™¨"</span>, <span class="hljs-number">500</span>
</code></pre>
<p>å¦‚æœå¼‚å¸¸æ²¡æœ‰è¢«è‡ªå®šä¹‰å¼‚å¸¸æ•è·å¹¶å¤„ç†ï¼Œä¼šèµ°<strong>Flaské»˜è®¤å¼‚å¸¸å¤„ç†æœºåˆ¶</strong>ï¼šå¼€å‘ç¯å¢ƒ <code>(DEBUG=True)</code>ä¸‹ï¼Œè¿”å›<strong>å¸¦å®Œæ•´å¼‚å¸¸æ ˆçš„è°ƒè¯•é¡µé¢</strong>ï¼Œèƒ½æŒ‰åˆ°æ‰€æœ‰å¼‚å¸¸ä¿¡æ¯ã€‚ç”Ÿäº§ç¯å¢ƒä¸‹è½¬æ¢ä¸º<code>500 Internal Server Error</code>ï¼Œé€šç”¨çš„æ— ä¿¡æ¯çš„é”™è¯¯é¡µã€‚</p>
<p>æœ‰æ— å¿…è¦ä½¿ç”¨<code>@app.errorhandler(BaseException)</code>å…œåº•æ‰€æœ‰å¼‚å¸¸ï¼Ÿ<strong>æ²¡æœ‰å¿…è¦</strong>ã€‚<code>Exception</code>æ˜¯æ‰€æœ‰éä¸­æ–­å¼‚å¸¸çš„åŸºç±»ï¼Œå¯¹äºä¼šä¸¥é‡é”™è¯¯ï¼Œè€Œå¯¼è‡´ç³»ç»Ÿå¼‚å¸¸é€€å‡ºçš„å¼‚å¸¸ï¼Œåº”è¯¥æ‰§è¡Œé€€å‡ºé€»è¾‘ã€‚<code>BaseException</code>æ˜¯æ‰€æœ‰å¼‚å¸¸çš„åŸºç±»ï¼ŒåŒ…æ‹¬é€€å‡ºå’Œç³»ç»Ÿä¸­æ–­</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> flask <span class="hljs-keyword">import</span> Flask
<span class="hljs-keyword">import</span> sys

app = Flask(__name__)

<span class="hljs-comment"># âŒ å±é™©çš„BaseExceptionå¤„ç†å™¨</span>
<span class="hljs-meta">@app.errorhandler(<span class="hljs-params">BaseException</span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">handle_base_exception</span>(<span class="hljs-params">e</span>):
    <span class="hljs-string">"""è¿™ä¼šæ•è·æ‰€æœ‰å¼‚å¸¸ï¼ŒåŒ…æ‹¬ç³»ç»Ÿé€€å‡ºä¿¡å·ï¼"""</span>
    <span class="hljs-built_in">print</span>(<span class="hljs-string">f"æ•è·åˆ°BaseException: <span class="hljs-subst">{<span class="hljs-built_in">type</span>(e).__name__}</span>"</span>)
    <span class="hljs-keyword">return</span> <span class="hljs-string">"é”™è¯¯å·²å¤„ç†"</span>, <span class="hljs-number">500</span>

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/exit'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">exit_app</span>():
    <span class="hljs-string">"""è¿™ä¸ªè·¯ç”±ä¼šè§¦å‘ç³»ç»Ÿé€€å‡º"""</span>
    sys.exit(<span class="hljs-number">1</span>)  <span class="hljs-comment"># æŠ›å‡ºSystemExitå¼‚å¸¸</span>

<span class="hljs-meta">@app.route(<span class="hljs-params"><span class="hljs-string">'/keyboard'</span></span>)</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">keyboard</span>():
    <span class="hljs-string">"""æ¨¡æ‹Ÿé”®ç›˜ä¸­æ–­ï¼ˆåœ¨å®é™…æœåŠ¡å™¨ä¸­å¾ˆéš¾è§¦å‘ï¼‰"""</span>
    <span class="hljs-keyword">raise</span> KeyboardInterrupt()

<span class="hljs-comment"># è®¿é—® /exit æ—¶ï¼š</span>
<span class="hljs-comment"># 1. åº”è¯¥è®©ç¨‹åºæ­£å¸¸é€€å‡º</span>
<span class="hljs-comment"># 2. ä½†BaseExceptionå¤„ç†å™¨ä¼šæ•è·SystemExit</span>
<span class="hljs-comment"># 3. è¿”å›HTTPå“åº”ï¼Œç¨‹åºç»§ç»­è¿è¡Œï¼</span>
<span class="hljs-comment"># 4. è¿™ç ´åäº†æ­£å¸¸çš„ç¨‹åºæ§åˆ¶æµ</span>
</code></pre>
<p>å› æ­¤ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹åº”ç”¨å¼€å‘æ—¶å…³æ³¨<code>Exception</code>å³å¯ï¼Œæ— éœ€æ•è·<code>BaseException</code>ã€‚</p>
<p><strong>è®¨è®ºé—®é¢˜ï¼šä»€ä¹ˆæƒ…å†µä¸‹éœ€è¦<code>BaseException</code>å¤„ç†å™¨ï¼Ÿ</strong></p>
<h2 data-id="heading-12">å…³æ³¨å¾®ä¿¡å…¬ä¼—å·ï¼Œè·å–è¿ç»´èµ„è®¯</h2>
<p>å¦‚æœæ­¤ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼Œæ„Ÿè°¢ä½ çš„<strong>ç‚¹èµ</strong>ä¸<strong>æ”¶è—</strong>ï¼Œä¹Ÿæ¬¢è¿åœ¨è¯„è®ºåŒºå‹å¥½äº¤æµã€‚</p>
<p>å¾®ä¿¡æœç´¢å…³æ³¨å…¬ä¼—å·ï¼š<strong>æŒç»­è¿ç»´</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 è·¨ç»„ä»¶é€šä¿¡å°ç¥å¯¹æ¯”ï¼šmitt vs tiny-emitter vs provide+inject+Symbolï¼Œè¯¥é€‰è°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602072652607717416</link>    <guid>https://juejin.cn/post/7602072652607717416</guid>    <pubDate>2026-02-03T01:13:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602072652607717416" data-draft-id="7602073973309997071" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 è·¨ç»„ä»¶é€šä¿¡å°ç¥å¯¹æ¯”ï¼šmitt vs tiny-emitter vs provide+inject+Symbolï¼Œè¯¥é€‰è°ï¼Ÿ"/> <meta itemprop="keywords" content="é¢è¯•,JavaScript,Vue.js"/> <meta itemprop="datePublished" content="2026-02-03T01:13:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="boooooooom"/> <meta itemprop="url" content="https://juejin.cn/user/3078273283917399"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 è·¨ç»„ä»¶é€šä¿¡å°ç¥å¯¹æ¯”ï¼šmitt vs tiny-emitter vs provide+inject+Symbolï¼Œè¯¥é€‰è°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3078273283917399/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    boooooooom
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:13:43.000Z" title="Tue Feb 03 2026 01:13:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;color:#3c9dff}.markdown-body h1{font-size:30px;margin-bottom:5px;padding-bottom:8px;text-align:center}.markdown-body h2{font-size:24px;padding-bottom:6px}.markdown-body h2:before{content:"ğŸ‹"}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h3:before{content:"ğŸ“"}.markdown-body h4{font-size:16px}.markdown-body h4:before{content:"ğŸ‘"}.markdown-body h5{font-size:15px}.markdown-body h5:before{content:"ğŸ‰"}.markdown-body h6{margin-top:5px}.markdown-body h6:before{content:"ğŸ’"}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;margin:0 auto;max-width:100%;border-radius:4px;padding:1px;border:1px solid #d2e8ff}.markdown-body img:hover{box-shadow:0 1px 3px #5eaeff}.markdown-body hr{height:4px;margin:34px 0;background-size:4px 1px;background-image:linear-gradient(270deg,#5eaeff,#f3f9ff 25%,transparent 50%);border-style:none}.markdown-body code{word-break:break-word;border-radius:3px;overflow-x:auto;background-color:#d2e8ff;color:#3c9dff;font-size:.9em;padding:.1em .5em;margin:0 3px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;transition:all .3s}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border:1px solid #90c7ff;border-radius:4px}.markdown-body pre:hover{box-shadow:0 1px 10px #beddff}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#3c9dff;border-bottom:1px solid #90c7ff;transition:all .3s}.markdown-body a:hover{color:#007fff;border-bottom:2px solid #5eaeff}.markdown-body a[href]:not(:empty){padding-right:18px}.markdown-body a[href]:not(:empty):after{display:inline-block;width:16px;height:16px;margin-left:2px;content:"";background:url(data:image/svg+xml;base64,PHN2ZyBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiPjxwYXRoIGQ9Ik0zODQgMTI4YTQ4IDQ4IDAgMDEyLjgxNiA5NS45MkwzODQgMjI0SDI1NmEzMiAzMiAwIDAwLTMxLjkyIDI5LjZMMjI0IDI1NnY1MTJhMzIgMzIgMCAwMDI5LjYgMzEuOTJsMi40LjA4aDUxMmEzMiAzMiAwIDAwMzEuOTItMjkuNmwuMDgtMi40VjY1NmE0OCA0OCAwIDAxOTUuOTItMi44MTZMODk2IDY1NnYxMTJhMTI4IDEyOCAwIDAxLTEyNCAxMjcuOTM2bC00IC4wNjRIMjU2YTEyOCAxMjggMCAwMS0xMjcuOTM2LTEyNGwtLjA2NC00VjI1NmExMjggMTI4IDAgMDExMjQtMTI3LjkzNmw0LS4wNjRoMTI4em0zODQgMGExMjggMTI4IDAgMDExMjcuOTM2IDEyNGwuMDY0IDR2MTYwYTQ4IDQ4IDAgMDEtOTUuOTIgMi44MTZMODAwIDQxNlYyOTEuODcybC0zODIuMDY0IDM4Mi4wOGE0OCA0OCAwIDAxLTcwLjAzMi02NS42bDIuMTYtMi4yODhMNzMyLjA5NiAyMjRINjA4YTQ4IDQ4IDAgMDEtMi44MTYtOTUuOTJMNjA4IDEyOGgxNjB6IiBmaWxsPSIjM2M5ZGZmIiBmaWxsLW9wYWNpdHk9Ii41NiIgZGF0YS1zcG0tYW5jaG9yLWlkPSJhMzEzeC5zZWFyY2hfaW5kZXguMC5pMC41Yzc1M2E4MTgwa2RKWCIgY2xhc3M9InNlbGVjdGVkIi8+PC9zdmc+);background-size:100%}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border-collapse:collapse;border:1px solid #3c9dff}.markdown-body thead{text-align:center}.markdown-body thead th{color:#fff;background-color:#5eaeff}.markdown-body tr{text-align:center}.markdown-body tbody tr:hover{background-color:#d2e8ff}.markdown-body tbody tr:hover code{background-color:#90c7ff}.markdown-body tr:nth-child(2n){background-color:#ecf5ff}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5eaeff}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{font-weight:900;padding:0 1px;font-size:17px}.markdown-body small{color:#cbcbcb;padding:0 1px;font-size:22px;zoom:.5}.markdown-body em{padding:0 1px}.markdown-body del{padding:0 1px;text-decoration-thickness:2px}.markdown-body blockquote{color:#1a1b1c;padding:1px 20px;margin:22px 0;border-radius:4px;border-left:4px solid rgba(60,157,255,.5);background-color:rgba(190,221,255,.3)}.markdown-body blockquote blockquote{margin:8px 0}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body details{margin:12px 0;padding:4px 10px;border:2px solid #3c9dff;border-radius:8px;background-color:#ecf5ff;transition:all .3s}.markdown-body details summary{cursor:pointer}.markdown-body input[type=checkbox]{position:relative;appearance:none;width:16px;height:16px;border-radius:2px;vertical-align:middle;transform:translateY(-2px);box-sizing:border-box;border:1px solid #beddff}.markdown-body input[type=checkbox]:checked{border:1px solid #5eaeff;background-color:#5eaeff}.markdown-body input[type=checkbox]:checked:before{position:absolute;top:3px;left:1px;width:11px;height:6px;background-color:transparent;border-left:2px solid #fff;border-bottom:2px solid #fff;transform:rotate(-45deg);content:"";box-sizing:border-box}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="androidstudio">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#a9b7c6;background:#282b2e}.hljs-bullet,.hljs-literal,.hljs-number,.hljs-symbol{color:#6897bb}.hljs-deletion,.hljs-keyword,.hljs-selector-tag{color:#cc7832}.hljs-link,.hljs-template-variable,.hljs-variable{color:#629755}.hljs-comment,.hljs-quote{color:grey}.hljs-meta{color:#bbb529}.hljs-addition,.hljs-attribute,.hljs-string{color:#6a8759}.hljs-section,.hljs-title,.hljs-type{color:#ffc66d}.hljs-name,.hljs-selector-class,.hljs-selector-id{color:#e8bf6a}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ­£æ–‡</h2>
<h3 data-id="heading-1">ä¸€ã€å‰è¨€ï¼šä¸ºä»€ä¹ˆè¦åšè¿™åœºå¯¹æ¯”ï¼Ÿ</h3>
<p>Vue3 ä¸­ï¼Œè·¨ç»„ä»¶é€šä¿¡æ˜¯é«˜é¢‘åˆšéœ€â€”â€”çˆ¶å­ç»„ä»¶ç”¨ props/emits è¶³å¤Ÿï¼Œä½†ç¥–å­™ç»„ä»¶ã€å…„å¼Ÿç»„ä»¶ã€ä»»æ„å±‚çº§è·¨ç»„ä»¶é€šä¿¡æ—¶ï¼Œé€‰æ‹©å“ªç§æ–¹æ¡ˆå°±æˆäº†å¼€å‘è€…çš„éš¾é¢˜ã€‚</p>
<p>mittã€tiny-emitter æ˜¯ä¸¤å¤§ä¸»æµäº‹ä»¶æ€»çº¿åº“ï¼Œprovide+inject æ˜¯ Vue å†…ç½®APIï¼Œæ­é… Symbol å¯è§£å†³å‘½åå†²çªï¼Œè¿™4ç§æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ¡ˆã€‚ä½†å®ƒä»¬çš„ä½“ç§¯ã€æ˜“ç”¨æ€§ã€æ€§èƒ½ã€é€‚ç”¨åœºæ™¯å¤©å·®åœ°åˆ«ï¼Œé€‰å¯¹èƒ½å°‘å†™å†—ä½™ä»£ç ï¼Œé€‰é”™åˆ™ä¼šåŸ‹ä¸‹ç»´æŠ¤éšæ‚£ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡çš„æ ¸å¿ƒä»·å€¼æ‰€åœ¨ã€‚</p>
<h3 data-id="heading-2">äºŒã€å…ˆææ‡‚ï¼š4ç§æ–¹æ¡ˆæ ¸å¿ƒå®šä½ï¼ˆå¿«é€ŸåŒºåˆ†ï¼‰</h3>
<p>åœ¨æ·±å…¥å¯¹æ¯”å‰ï¼Œå…ˆæ˜ç¡®æ¯ç§æ–¹æ¡ˆçš„æ ¸å¿ƒå®šä½ï¼Œé¿å…æ··æ·†ï¼Œå¿«é€ŸåŒ¹é…è‡ªèº«éœ€æ±‚ï¼š</p>
<ul>
<li><strong>mitt</strong>ï¼šè½»é‡çº§äº‹ä»¶æ€»çº¿åº“ï¼Œæ— ä¾èµ–ã€APIç®€æ´ï¼ŒVue3 å®˜æ–¹æ¨èæ›¿ä»£åºŸå¼ƒçš„ EventBusï¼Œé€‚é…å¤§éƒ¨åˆ†è·¨ç»„ä»¶é€šä¿¡åœºæ™¯ï¼›</li>
<li><strong>tiny-emitter</strong>ï¼šæ¯” mitt æ›´å°å·§çš„äº‹ä»¶æ€»çº¿ï¼ŒAPI æ›´è´´è¿‘ä¼ ç»Ÿ EventBusï¼Œä¾§é‡æç®€ä½“ç§¯å’ŒåŸºç¡€é€šä¿¡ï¼›</li>
<li><strong>provide+inject</strong>ï¼šVue å†…ç½®APIï¼Œæ— éœ€é¢å¤–å®‰è£…ï¼Œä¸»æ‰“â€œç¥–å…ˆ-åä»£â€å±‚çº§é€šä¿¡ï¼Œéäº‹ä»¶é©±åŠ¨ï¼Œé€‚åˆçŠ¶æ€å…±äº«ï¼›</li>
<li><strong>provide+inject+Symbol</strong>ï¼šåœ¨å†…ç½®APIåŸºç¡€ä¸Šä¼˜åŒ–ï¼Œç”¨ Symbol è§£å†³æ³¨å…¥å‘½åå†²çªé—®é¢˜ï¼Œæå‡å¤§å‹é¡¹ç›®å¯ç»´æŠ¤æ€§ã€‚</li>
</ul>
<h3 data-id="heading-3">ä¸‰ã€å…¨æ–¹ä½å¯¹æ¯”ï¼šä»5ä¸ªæ ¸å¿ƒç»´åº¦æ‹†è§£ï¼ˆé‡ç‚¹ï¼ï¼‰</h3>
<p>ä»¥ä¸‹æ˜¯4ç§æ–¹æ¡ˆçš„æ ¸å¿ƒç»´åº¦å¯¹æ¯”ï¼Œç»“åˆå®æ“ä½“éªŒå’Œé¡¹ç›®åœºæ™¯ï¼Œæ¯ä¸€é¡¹éƒ½å¯¹åº”å®é™…å¼€å‘ä¸­çš„ç—›ç‚¹ï¼Œå»ºè®®æ”¶è—å¤‡ç”¨ã€‚</p>
<h4 data-id="heading-4">1. åŸºç¡€ä¿¡æ¯ï¼ˆä½“ç§¯ã€ä¾èµ–ã€å…¼å®¹æ€§ï¼‰</h4>








































<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä½“ç§¯ï¼ˆmin+gzipï¼‰</th><th>æ˜¯å¦éœ€é¢å¤–å®‰è£…</th><th>Vue3 å…¼å®¹æ€§</th><th>æ ¸å¿ƒä¼˜åŠ¿</th></tr></thead><tbody><tr><td>mitt</td><td>â‰ˆ200B</td><td>æ˜¯ï¼ˆnpm i mittï¼‰</td><td>å®Œç¾å…¼å®¹ï¼ˆå®˜æ–¹æ¨èï¼‰</td><td>è½»é‡ã€APIç®€æ´ã€æ”¯æŒæ‰¹é‡è§£ç»‘</td></tr><tr><td>tiny-emitter</td><td>â‰ˆ150B</td><td>æ˜¯ï¼ˆnpm i tiny-emitterï¼‰</td><td>å®Œç¾å…¼å®¹</td><td>æè‡´å°å·§ã€APIè´´è¿‘åŸç”ŸEventBus</td></tr><tr><td>provide+inject</td><td>0ä½“ç§¯ï¼ˆå†…ç½®ï¼‰</td><td>å¦</td><td>å®Œç¾å…¼å®¹</td><td>æ— éœ€é¢å¤–ä¾èµ–ã€åŸç”Ÿæ”¯æŒã€çŠ¶æ€å…±äº«ä¾¿æ·</td></tr><tr><td>provide+inject+Symbol</td><td>0ä½“ç§¯ï¼ˆå†…ç½®+åŸç”ŸSymbolï¼‰</td><td>å¦</td><td>å®Œç¾å…¼å®¹</td><td>è§£å†³å‘½åå†²çªã€å¤§å‹é¡¹ç›®å‹å¥½ã€æ— é¢å¤–å¼€é”€</td></tr></tbody></table>
<h4 data-id="heading-5">2. å®æ“æ¼”ç¤ºï¼ˆæœ€ç®€ä»£ç ï¼Œç›´æ¥å¥—ç”¨ï¼‰</h4>
<p>å®æ“æ˜¯æ ¸å¿ƒï¼Œä»¥ä¸‹æ˜¯æ¯ç§æ–¹æ¡ˆçš„æœ€ç®€å®ç°ä»£ç ï¼Œé‡ç‚¹çœ‹â€œé€šä¿¡æµç¨‹â€å’Œâ€œAPIå¤æ‚åº¦â€ã€‚</p>
<h5 data-id="heading-6">ï¼ˆ1ï¼‰mitt å®ç°è·¨ç»„ä»¶é€šä¿¡</h5>
<p>æ­¥éª¤ï¼šåˆ›å»ºæ€»çº¿å®ä¾‹ â†’ å‘é€äº‹ä»¶ â†’ ç›‘å¬äº‹ä»¶ â†’ è§£ç»‘äº‹ä»¶ï¼ˆé¿å…å†…å­˜æ³„æ¼ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1. åˆ›å»ºæ€»çº¿å®ä¾‹ï¼ˆutils/bus.jsï¼‰</span>
<span class="hljs-keyword">import</span> mitt <span class="hljs-keyword">from</span> <span class="hljs-string">'mitt'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bus = <span class="hljs-title function_">mitt</span>()

<span class="hljs-comment">// 2. å‘é€äº‹ä»¶ï¼ˆç»„ä»¶Aï¼‰</span>
<span class="hljs-keyword">import</span> { bus } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/bus'</span>
bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'sendMsg'</span>, <span class="hljs-string">'Hello Vue3'</span>)

<span class="hljs-comment">// 3. ç›‘å¬äº‹ä»¶ï¼ˆç»„ä»¶Bï¼Œä»»æ„å±‚çº§ï¼‰</span>
<span class="hljs-keyword">import</span> { bus } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/bus'</span>
bus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'sendMsg'</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶æ¶ˆæ¯ï¼š'</span>, msg) <span class="hljs-comment">// è¾“å‡ºï¼šHello Vue3</span>
})

<span class="hljs-comment">// 4. è§£ç»‘äº‹ä»¶ï¼ˆç»„ä»¶é”€æ¯æ—¶ï¼Œå¿…å†™ï¼‰</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  bus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'sendMsg'</span>) <span class="hljs-comment">// è§£ç»‘å•ä¸ªäº‹ä»¶</span>
  <span class="hljs-comment">// bus.all.clear() // è§£ç»‘æ‰€æœ‰äº‹ä»¶</span>
})
</code></pre>
<h5 data-id="heading-7">ï¼ˆ2ï¼‰tiny-emitter å®ç°è·¨ç»„ä»¶é€šä¿¡</h5>
<p>API ä¸ mitt ç±»ä¼¼ï¼Œæ›´è´´è¿‘ä¼ ç»Ÿ EventBusï¼Œæ”¯æŒé“¾å¼è°ƒç”¨</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1. åˆ›å»ºæ€»çº¿å®ä¾‹ï¼ˆutils/bus.jsï¼‰</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Emitter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'tiny-emitter'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> bus = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Emitter</span>()

<span class="hljs-comment">// 2. å‘é€äº‹ä»¶ï¼ˆç»„ä»¶Aï¼‰</span>
bus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'sendMsg'</span>, <span class="hljs-string">'Hello tiny-emitter'</span>)

<span class="hljs-comment">// 3. ç›‘å¬äº‹ä»¶ï¼ˆç»„ä»¶Bï¼‰</span>
bus.<span class="hljs-title function_">on</span>(<span class="hljs-string">'sendMsg'</span>, <span class="hljs-function">(<span class="hljs-params">msg</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ¥æ”¶æ¶ˆæ¯ï¼š'</span>, msg)
})

<span class="hljs-comment">// 4. è§£ç»‘äº‹ä»¶ï¼ˆç»„ä»¶é”€æ¯æ—¶ï¼‰</span>
<span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> {
  bus.<span class="hljs-title function_">off</span>(<span class="hljs-string">'sendMsg'</span>)
})
</code></pre>
<h5 data-id="heading-8">ï¼ˆ3ï¼‰provide+inject å®ç°è·¨ç»„ä»¶é€šä¿¡</h5>
<p>æ­¥éª¤ï¼šç¥–å…ˆç»„ä»¶ provide æä¾›æ•°æ® â†’ åä»£ç»„ä»¶ inject æ³¨å…¥æ•°æ®ï¼ˆæ”¯æŒå¤šå±‚ä¼ é€’ï¼‰</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1. ç¥–å…ˆç»„ä»¶ï¼ˆæä¾›æ•°æ®ï¼‰</span>
<span class="hljs-keyword">import</span> { provide } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æä¾›æ™®é€šæ•°æ®</span>
    <span class="hljs-title function_">provide</span>(<span class="hljs-string">'msg'</span>, <span class="hljs-string">'Hello provide+inject'</span>)
    <span class="hljs-comment">// æä¾›æ–¹æ³•ï¼ˆå®ç°åŒå‘é€šä¿¡ï¼‰</span>
    <span class="hljs-title function_">provide</span>(<span class="hljs-string">'changeMsg'</span>, <span class="hljs-function">(<span class="hljs-params">newMsg</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æ–°æ¶ˆæ¯ï¼š'</span>, newMsg)
    })
  }
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 2. åä»£ç»„ä»¶ï¼ˆæ³¨å…¥æ•°æ®ï¼Œä»»æ„å±‚çº§ï¼‰</span>
<span class="hljs-keyword">import</span> { inject } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'msg'</span>)
    <span class="hljs-keyword">const</span> changeMsg = <span class="hljs-title function_">inject</span>(<span class="hljs-string">'changeMsg'</span>)
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg) <span class="hljs-comment">// è¾“å‡ºï¼šHello provide+inject</span>
    <span class="hljs-title function_">changeMsg</span>(<span class="hljs-string">'æ–°çš„æ¶ˆæ¯å†…å®¹'</span>) <span class="hljs-comment">// è°ƒç”¨ç¥–å…ˆç»„ä»¶æ–¹æ³•</span>
  }
}
</code></pre>
<h5 data-id="heading-9">ï¼ˆ4ï¼‰provide+inject+Symbol å®ç°è·¨ç»„ä»¶é€šä¿¡</h5>
<p>æ ¸å¿ƒï¼šç”¨ Symbol åˆ›å»ºå”¯ä¸€keyï¼Œè§£å†³â€œä¸åŒç»„ä»¶æ³¨å…¥åŒåkeyå¯¼è‡´å†²çªâ€çš„é—®é¢˜</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 1. åˆ›å»ºå”¯ä¸€Symbolï¼ˆutils/keys.jsï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> msgKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'msg'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> changeMsgKey = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">'changeMsg'</span>)

<span class="hljs-comment">// 2. ç¥–å…ˆç»„ä»¶ï¼ˆprovideï¼‰</span>
<span class="hljs-keyword">import</span> { provide } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { msgKey, changeMsgKey } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/keys'</span>
<span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">provide</span>(msgKey, <span class="hljs-string">'Hello Symbol'</span>)
  <span class="hljs-title function_">provide</span>(changeMsgKey, <span class="hljs-function">(<span class="hljs-params">newMsg</span>) =&gt;</span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newMsg)
  })
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// 3. åä»£ç»„ä»¶ï¼ˆinjectï¼‰</span>
<span class="hljs-keyword">import</span> { inject } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> { msgKey, changeMsgKey } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/utils/keys'</span>
<span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> msg = <span class="hljs-title function_">inject</span>(msgKey)
  <span class="hljs-keyword">const</span> changeMsg = <span class="hljs-title function_">inject</span>(changeMsgKey)
  <span class="hljs-comment">// æ— éœ€æ‹…å¿ƒå‘½åå†²çª</span>
}
</code></pre>
<h4 data-id="heading-10">3. æ ¸å¿ƒå·®å¼‚ï¼ˆæ˜“ç”¨æ€§ã€æ€§èƒ½ã€é€‚ç”¨åœºæ™¯ï¼‰</h4>
<ul>
<li>
<p><strong>æ˜“ç”¨æ€§æ’åº</strong>ï¼štiny-emitter â‰ˆ mitt &gt; provide+inject+Symbol &gt; provide+injectï¼ˆSymboléœ€é¢å¤–ç»´æŠ¤keyï¼Œç•¥ç¹çï¼‰</p>
</li>
<li>
<p><strong>æ€§èƒ½æ’åº</strong>ï¼šprovide+inject â‰ˆ provide+inject+Symbol &gt; mitt â‰ˆ tiny-emitterï¼ˆå†…ç½®APIæ— é¢å¤–å¼€é”€ï¼Œäº‹ä»¶æ€»çº¿æœ‰è½»å¾®ç›‘å¬/è§£ç»‘å¼€é”€ï¼‰</p>
</li>
<li>
<p><strong>é€‚ç”¨åœºæ™¯å·®å¼‚</strong>ï¼š</p>
<ul>
<li>mittï¼šä¸­å°å‹é¡¹ç›®ã€ä»»æ„å±‚çº§è·¨ç»„ä»¶é€šä¿¡ï¼Œéœ€æ‰¹é‡è§£ç»‘äº‹ä»¶çš„åœºæ™¯ï¼ˆå®˜æ–¹æ¨èï¼Œé¦–é€‰ï¼‰ï¼›</li>
<li>tiny-emitterï¼šæè‡´è¿½æ±‚ä½“ç§¯çš„å°å‹é¡¹ç›®ï¼Œç®€å•é€šä¿¡åœºæ™¯ï¼ˆæ— å¤æ‚éœ€æ±‚å¯æ›¿ä»£mittï¼‰ï¼›</li>
<li>provide+injectï¼šç¥–å…ˆ-åä»£å±‚çº§æ˜ç¡®ï¼Œéœ€å…±äº«çŠ¶æ€/æ–¹æ³•çš„åœºæ™¯ï¼ˆå¦‚ä¸»é¢˜åˆ‡æ¢ã€ç”¨æˆ·ä¿¡æ¯å…±äº«ï¼‰ï¼›</li>
<li>provide+inject+Symbolï¼šå¤§å‹é¡¹ç›®ã€å¤šå›¢é˜Ÿåä½œï¼Œéœ€é¿å…æ³¨å…¥å‘½åå†²çªçš„åœºæ™¯ï¼ˆ enterprise çº§é¡¹ç›®é¦–é€‰å†…ç½®æ–¹æ¡ˆï¼‰ã€‚</li>
</ul>
</li>
</ul>
<h3 data-id="heading-11">å››ã€å¸¸è§è¸©å‘ç‚¹ï¼ˆå¿…çœ‹ï¼ï¼‰</h3>
<h4 data-id="heading-12">1. äº‹ä»¶æ€»çº¿ï¼ˆmitt/tiny-emitterï¼‰è¸©å‘</h4>
<p>å‘ç‚¹1ï¼šç»„ä»¶é”€æ¯æ—¶æœªè§£ç»‘äº‹ä»¶ï¼Œå¯¼è‡´å¤šæ¬¡æ¸²æŸ“åé‡å¤è§¦å‘ï¼ˆå†…å­˜æ³„æ¼ï¼‰ï¼› è§£å†³æ–¹æ¡ˆï¼šåœ¨ onUnmounted é’©å­ä¸­ï¼Œæ‰‹åŠ¨è§£ç»‘å½“å‰ç»„ä»¶ç›‘å¬çš„æ‰€æœ‰äº‹ä»¶ã€‚</p>
<p>å‘ç‚¹2ï¼šäº‹ä»¶åæ‹¼å†™é”™è¯¯ï¼Œå¯¼è‡´é€šä¿¡å¤±è´¥ï¼ˆæ— æŠ¥é”™æç¤ºï¼‰ï¼› è§£å†³æ–¹æ¡ˆï¼šç”¨å¸¸é‡ç»Ÿä¸€ç®¡ç†äº‹ä»¶åï¼Œé¿å…æ‰‹å†™å­—ç¬¦ä¸²ï¼ˆå¦‚ export const EVENT_MSG = 'sendMsg'ï¼‰ã€‚</p>
<h4 data-id="heading-13">2. provide+injectï¼ˆå«Symbolï¼‰è¸©å‘</h4>
<p>å‘ç‚¹1ï¼šinject æ³¨å…¥çš„å±æ€§ä¸º undefinedï¼Œæœªæ‰¾åˆ°å¯¹åº” provideï¼› è§£å†³æ–¹æ¡ˆï¼šç¡®è®¤ç¥–å…ˆç»„ä»¶å·² provideï¼Œä¸”æ³¨å…¥çš„ key å®Œå…¨ä¸€è‡´ï¼ˆSymbol å¿…é¡»æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œä¸èƒ½é‡å¤åˆ›å»ºï¼‰ã€‚</p>
<p>å‘ç‚¹2ï¼šprovide æä¾›çš„æ˜¯æ™®é€šå€¼ï¼Œåä»£ç»„ä»¶ä¿®æ”¹åä¸å“åº”ï¼› è§£å†³æ–¹æ¡ˆï¼šç”¨ ref/reactive åŒ…è£…æä¾›çš„å€¼ï¼Œå®ç°å“åº”å¼é€šä¿¡ï¼ˆå¦‚ provide('msg', ref('Hello'))ï¼‰ã€‚</p>
<h3 data-id="heading-14">äº”ã€æ€»ç»“ï¼šä¸€å¥è¯é€‰å¯¹æ–¹æ¡ˆï¼ˆæ–°æ‰‹ç›´æ¥æŠ„ï¼‰</h3>
<ol>
<li>ä¸­å°å‹é¡¹ç›®ã€ä»»æ„å±‚çº§é€šä¿¡ â†’ é€‰ <strong>mitt</strong>ï¼ˆå®˜æ–¹æ¨èï¼Œå¹³è¡¡æ˜“ç”¨æ€§å’Œæ€§èƒ½ï¼‰ï¼›</li>
<li>å°å‹é¡¹ç›®ã€æè‡´è¿½æ±‚ä½“ç§¯ â†’ é€‰ <strong>tiny-emitter</strong>ï¼ˆæ¯”mittæ›´å°å·§ï¼Œå¤Ÿç”¨å°±å¥½ï¼‰ï¼›</li>
<li>ç¥–å…ˆ-åä»£å±‚çº§é€šä¿¡ã€å…±äº«çŠ¶æ€ â†’ é€‰<strong>provide+inject</strong>ï¼ˆæ— é¢å¤–ä¾èµ–ï¼ŒåŸç”Ÿå‹å¥½ï¼‰ï¼›</li>
<li>å¤§å‹é¡¹ç›®ã€å¤šå›¢é˜Ÿåä½œ â†’ é€‰ <strong>provide+inject+Symbol</strong>ï¼ˆé¿å…å‘½åå†²çªï¼Œæ˜“ç»´æŠ¤ï¼‰ã€‚</li>
</ol>
<p>å…¶å®è¿™4ç§æ–¹æ¡ˆæ²¡æœ‰ç»å¯¹çš„ä¼˜åŠ£ï¼Œæ ¸å¿ƒæ˜¯â€œåŒ¹é…é¡¹ç›®åœºæ™¯â€â€”â€”æ— éœ€ç›²ç›®è¿½æ±‚â€œæœ€å…ˆè¿›â€ï¼Œèƒ½è§£å†³é—®é¢˜ã€é™ä½ç»´æŠ¤æˆæœ¬ï¼Œå°±æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚æŒæ¡å®ƒä»¬çš„å·®å¼‚å’Œè¸©å‘ç‚¹ï¼ŒVue3 è·¨ç»„ä»¶é€šä¿¡å°±èƒ½æ¸¸åˆƒæœ‰ä½™ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flutterä»å…¥é—¨åˆ°æ”¾å¼ƒ]]></title>    <link>https://juejin.cn/post/7602166907571093542</link>    <guid>https://juejin.cn/post/7602166907571093542</guid>    <pubDate>2026-02-03T01:51:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602166907571093542" data-draft-id="7594087108594286655" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flutterä»å…¥é—¨åˆ°æ”¾å¼ƒ"/> <meta itemprop="keywords" content="Flutter"/> <meta itemprop="datePublished" content="2026-02-03T01:51:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MakeZero"/> <meta itemprop="url" content="https://juejin.cn/user/1867448966973751"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flutterä»å…¥é—¨åˆ°æ”¾å¼ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1867448966973751/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MakeZero
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T01:51:17.000Z" title="Tue Feb 03 2026 01:51:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="an-old-hope">.hljs-comment,.hljs-quote{color:#b6b18b}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#eb3c54}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#e7ce56}.hljs-attribute{color:#ee7c2b}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#4fb4d7}.hljs-section,.hljs-title{color:#78bb65}.hljs-keyword,.hljs-selector-tag{color:#b45ea4}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#1c1d21;color:#c0c5ce}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å˜é‡åŠå¸¸é‡</h2>
<h3 data-id="heading-1">å˜é‡</h3>
<p>var</p>
<h3 data-id="heading-2">å¸¸é‡</h3>

















<table><thead><tr><th>å¸¸é‡</th><th>åŒºåˆ«</th></tr></thead><tbody><tr><td>final</td><td>ç¼–è¯‘æ—¶ä¸å¯ä¿®æ”¹</td></tr><tr><td>const</td><td>è¿è¡Œæ—¶ä¸å¯ä¿®æ”¹</td></tr></tbody></table>
<p>ä»£ç æ¼”ç¤ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">void</span> main() {
  <span class="hljs-comment">// å˜é‡ var</span>
  <span class="hljs-keyword">var</span> age = <span class="hljs-number">20</span>;
  age = <span class="hljs-number">21</span>;
  <span class="hljs-built_in">print</span>(age);
  <span class="hljs-comment">// å¸¸é‡ const</span>
  <span class="hljs-keyword">const</span> number = <span class="hljs-number">3.1415926</span>;
  <span class="hljs-keyword">const</span> length = number * <span class="hljs-number">2</span> * <span class="hljs-number">10</span>;
  <span class="hljs-built_in">print</span>(length);
  <span class="hljs-comment">// å¸¸é‡ final</span>
  <span class="hljs-keyword">final</span> time = <span class="hljs-built_in">DateTime</span>.now();
  prnt(time);
}
</code></pre>
<h2 data-id="heading-3">æ•°æ®ç±»å‹</h2>
<h3 data-id="heading-4">Int</h3>
<p>æ•´å‹ç±»å‹</p>
<h3 data-id="heading-5">Double</h3>
<p>æµ®ç‚¹ç±»å‹</p>
<h3 data-id="heading-6">Number</h3>
<h2 data-id="heading-7">è‡ªå®šä¹‰ç»„ä»¶</h2>
<h3 data-id="heading-8">æ— çŠ¶æ€ç»„ä»¶ [StatelessWidget]</h3>
<ul>
<li>æ— çŠ¶æ€ç»„ä»¶æ˜¯ä¸å¯å˜çš„ï¼Œæ„å‘³ç€å®ƒä»¬çš„å±æ€§ä¸èƒ½æ”¹å˜, æ‰€æœ‰çš„å€¼éƒ½æ˜¯æœ€ç»ˆçš„ã€‚</li>
<li>é€šå¸¸ç”¨äºå½“ä½ éœ€è¦å±•ç¤ºçš„UIä¸ä¾èµ–äºå¯¹è±¡å†…éƒ¨çŠ¶æ€æ—¶ã€‚</li>
</ul>
<pre><code class="hljs language-flutter" lang="flutter">import 'package:flutter/material.dart';

void main(List&lt;String&gt; args) {
  runApp(MainPage());
}

class MainPage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return MaterialApp(
      title: "æ— çŠ¶æ€ç»„ä»¶",
      home:Scaffold(
        appBar: AppBar(
          title:Text("é¡¶éƒ¨åŒºåŸŸ"),
        ),
        body: Container(
          child: Center(
            child: Text("ä¸­éƒ¨æœ¬åŒºåŸŸ"),
          ),
        ),
        bottomNavigationBar: Container(
          height: 80,
          child: Center(
            child: Text("åº•éƒ¨åŒºåŸŸ"),
          ),
        )
      )
    );
  }
}
</code></pre>
<h3 data-id="heading-9">æœ‰çŠ¶æ€ç»„ä»¶ [StatefulWidget]</h3>
<ul>
<li>æœ‰çŠ¶æ€ç»„ä»¶å¯ä»¥åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­æ”¹å˜çŠ¶æ€ã€‚</li>
<li>é€šå¸¸ç”¨äºå½“UIå¯ä»¥åœ¨ç”¨æˆ·äº¤äº’æˆ–å…¶ä»–å› ç´ å½±å“ä¸‹æ”¹å˜æ—¶</li>
</ul>
<pre><code class="hljs language-flutter" lang="flutter">import 'package:flutter/material.dart';

void main(List&lt;String&gt; args) {
  runApp(MainPage());
}
// å¯¹å¤–æ¥å—å’Œå®šä¹‰æœ€ç»ˆå‚æ•° 
class MainPage extends StatefulWidget{
  @override
  State&lt;StatefulWidget&gt; createState() {
    // TODO: implement createState
    return _MainPage();
  }
}
// è´Ÿè´£ç®¡ç†æ•°æ® å¤„ç†ä¸šåŠ¡é€»è¾‘ æ¸²æŸ“è§†å›¾
class _MainPage extends State&lt;MainPage&gt;{
  @override
  Widget build(BuildContext context) {
    // TODO: implement build
    return MaterialApp(
      title: "æœ‰çŠ¶æ€ç»„ä»¶",
      home:Scaffold(
        appBar: AppBar(
          title:Text("é¡¶éƒ¨åŒºåŸŸ"),
        ),
        body: Container(
          child: Center(
            child: Text("ä¸­éƒ¨æœ¬åŒºåŸŸ"),
          ),
        ),
        bottomNavigationBar: Container(
          height: 80,
          child: Center(
            child: Text("åº•éƒ¨åŒºåŸŸ"),
          ),
        )
      )
    );
  }
}
</code></pre>
<p>ä½¿ç”¨Awesome Flutter Snippetsç”¨æ¥åˆ›å»ºæœ‰çŠ¶æ€ç»„ä»¶åŠæ— çŠ¶æ€ç»„ä»¶çš„å¿«æ·é”®</p>
<h4 data-id="heading-10">æ— çŠ¶æ€ç»„ä»¶ï¼šstatelessW</h4>
<h4 data-id="heading-11">æœ‰çŠ¶æ€ç»„ä»¶ï¼šstatefulW</h4>
<p>ä»£ç ç¤ºä¾‹</p>
<p>ä»¥ä¸‹æ˜¯æ— çŠ¶æ€ç»„ä»¶ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-flutter" lang="flutter">import 'package:flutter/material.dart';

void main(List&lt;String&gt; args) {
  runApp(StateLessWeight());
}

class StateLessWeight extends StatelessWidget {
  const StateLessWeight({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return Container(
      child: null,
    );
  }
}
</code></pre>
<p>ä»¥ä¸‹éƒ¨åˆ†æ˜¯æœ‰çŠ¶æ€ç»„ä»¶ä»£ç ç¤ºä¾‹</p>
<pre><code class="hljs language-æœ‰çŠ¶æ€ç»„ä»¶ä»£ç ç¤ºä¾‹" lang="æœ‰çŠ¶æ€ç»„ä»¶ä»£ç ç¤ºä¾‹">import 'package:flutter/material.dart';

void main(List&lt;String&gt; args) {
  runApp(TestWeight());
}

class TestWeight extends StatefulWidget {
  TestWeight({Key? key}) : super(key: key);

  @override
  _TestWeightState createState() =&gt; _TestWeightState();
}

class _TestWeightState extends State&lt;TestWeight&gt; {
  @override
  Widget build(BuildContext context) {
    return Container(
       child: null,
    );
  }
}
</code></pre>
<h2 data-id="heading-12">ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</h2>
<h3 data-id="heading-13">æ— çŠ¶æ€ç»„ä»¶</h3>
<p>å­˜åœ¨å”¯ä¸€é˜¶æ®µï¼šbuild,å½“ç»„ä»¶è¢«åˆ›å»ºæˆ–è€…çˆ¶ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´ä¸‹é¢çš„ç»„ä»¶å‘ç”Ÿå˜åŒ–å¹¶éœ€è¦é‡æ–°æ„å»ºæ—¶ï¼Œæ­¤æ–¹æ³•ä¼šè¢«è°ƒç”¨</p>
<h4 data-id="heading-14">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; args</span>) {
  <span class="hljs-title function_">runApp</span>(<span class="hljs-title class_">MainPage</span>());
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">StatelessWidget</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">MainPage</span>({<span class="hljs-title class_">Key</span>? key}) : <span class="hljs-variable language_">super</span>(<span class="hljs-attr">key</span>: key);

  @override
  <span class="hljs-title class_">Widget</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">BuildContext context</span>) {
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ— çŠ¶æ€ç»„ä»¶çš„æ‰§è¡Œ"</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MaterialApp</span>(
      <span class="hljs-attr">home</span>: <span class="hljs-title class_">Scaffold</span>(
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">Container</span>(
          <span class="hljs-attr">child</span>: <span class="hljs-title class_">Center</span>(
            <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"æ— çŠ¶æ€"</span>),
          ),
        ),
      ),
    );
  }
}
</code></pre>
<h3 data-id="heading-15">æœ‰çŠ¶æ€ç»„ä»¶</h3>
<p>buildé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2

createState --&gt; initState
initState --&gt; didChangeDependencies
didChangeDependencies --&gt; build

ç»„ä»¶åˆ›å»º --&gt; ç»„ä»¶åˆå§‹åŒ– 
ç»„ä»¶åˆå§‹åŒ– --&gt; æ›´æ”¹ä¾èµ–é¡¹ 
æ›´æ”¹ä¾èµ–é¡¹ --&gt; æ„å»º 

</code></pre>
<p>updateé˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2

çˆ¶ç»„ä»¶é‡å»º_é…ç½®å˜æ›´ --&gt; didUpdateWidget
didUpdateWidget --&gt; build

</code></pre>
<p>é”€æ¯é˜¶æ®µçš„ç”Ÿå‘½å‘¨æœŸ</p>
<pre><code class="hljs language-mermaid" lang="mermaid">stateDiagram-v2

ç»„ä»¶ç§»é™¤ --&gt; deactivate
deactivate --&gt; dispose

</code></pre>
<h3 data-id="heading-16">ç”Ÿå‘½å‘¨æœŸå‡½æ•°</h3>













































<table><thead><tr><th>ç”Ÿå‘½å‘¨æœŸé˜¶æ®µ</th><th>å‡½æ•°å</th><th>è°ƒç”¨æ—¶æœºä¸æ ¸å¿ƒä»»åŠ¡</th></tr></thead><tbody><tr><td>åˆ›å»ºé˜¶æ®µ</td><td>createState()</td><td>Widgetåˆå§‹åŒ–è°ƒç”¨ï¼Œåˆ›å»ºStateå¯¹è±¡</td></tr><tr><td/><td>initState()</td><td>stateå¯¹è±¡æ’å…¥Widgetç«‹å³æ‰§è¡Œï¼Œ<strong>ä»…æ‰§è¡Œä¸€æ¬¡</strong></td></tr><tr><td/><td>didChangeDependencies()</td><td>initStateåç«‹åˆ»æ‰§è¡Œï¼Œå½“æ‰€ä¾èµ–çš„inheritedWidgetæ›´æ–°æ—¶è°ƒç”¨ï¼Œå¯èƒ½å¤šæ¬¡</td></tr><tr><td>æ„å»ºä¸æ›´æ–°é˜¶æ®µ</td><td>build()</td><td>åˆ›å»ºUIæ–¹æ³•ï¼Œåˆå§‹åŒ–æˆ–æ›´æ–°åå¤šæ¬¡è°ƒç”¨</td></tr><tr><td/><td>didupdateWidget()</td><td>çˆ¶çº§ç»„ä»¶ä¼ å…¥æ–°é…ç½®æ—¶è°ƒç”¨ï¼Œç”¨äºæ¯”è¾ƒæ–°æ—§é…ç½®</td></tr><tr><td>é”€æ¯é˜¶æ®µ</td><td>deactiveate()</td><td>å½“Stateå¯¹è±¡ä»æ ‘ä¸­æš‚æ—¶ç§»é™¤æ—¶è°ƒç”¨</td></tr><tr><td/><td>dispose()</td><td>é‡Šæ”¾èµ„æº</td></tr></tbody></table>
<p>æ‰§è¡Œä¸€æ¬¡å‡½æ•°: createState initState dispose</p>
<p><strong>lnheritedWidget</strong></p>
<p>ä¸“é—¨ç”¨äºåœ¨widgetæ ‘ä¸­è‡ªå®šå‘ä¸‹é«˜æ•ˆè¿›è¡Œä¿¡æ¯å…±äº«ï¼Œå…¶ä¸­é¡¶éƒ¨ç»„ä»¶è´Ÿè´£æä¾›æ•°æ® å­çº§æ•°æ®è´Ÿè´£è¿›è¡Œæ•°æ®çš„è·å–ã€‚</p>
<h2 data-id="heading-17">äº‹ä»¶-ç‚¹å‡»äº‹ä»¶</h2>
<p>GestureDetector ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºäº¤äº’æ—¶è§¦å‘çš„å„ç§åŠ¨ä½œ
ç‰¹å¾ï¼šå±å¹•çš„æ»‘åŠ¨ ç‚¹å‡»åŠè§¦æ‘¸</p>
<h3 data-id="heading-18">å¸¸ç”¨æ–¹æ³•åŠè¯´æ˜</h3>

















<table><thead><tr><th>å¸¸ç”¨æ–¹æ³•</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>OnTap()</td><td>å•å‡»äº‹ä»¶</td></tr><tr><td>OnDoubleTap()</td><td>å±å¹•åŒå‡»äº‹ä»¶</td></tr></tbody></table>
<h3 data-id="heading-19">ä»£ç æ¼”ç¤º</h3>
<h4 data-id="heading-20">å•å‡»äº‹ä»¶</h4>
<pre><code class="hljs language-flutter" lang="flutter">import 'package:flutter/material.dart';

void main(List&lt;String&gt; args) {
  runApp(MainPage());
}
class MainPage extends StatelessWidget {
  const MainPage({Key? key}) : super(key: key);

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: "ç‚¹å‡»äº‹ä»¶æ¼”ç¤º",
      home: Scaffold(
        appBar: AppBar(
          title: Text("æ ‡é¢˜åŒºåŸŸ"),
        ),
        body: Container(
          child: Center(
            child: GestureDetector(
              child: Text("æµ‹è¯•ä¸­éƒ¨åŒºåŸŸ"),
              // å•å‡»äº‹ä»¶
              onTap: (){
                print("æµ‹è¯•åŒºåŸŸ");
              },
            )
          )
        ),
        bottomNavigationBar: Container(
          height: 80,
          child: Center(
            child: Text("åº•éƒ¨åŒºåŸŸ"),
          ),
        ),
      ),
    );
  }
}

</code></pre>
<h4 data-id="heading-21">åŒå‡»äº‹ä»¶</h4>
<p>æ­¤æ®µä»£ç ä»…å±•ç¤ºä¸Šæ®µä»£ç ä¿®æ”¹åŒºåŸŸ</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å•å‡»äº‹ä»¶</span>
<span class="hljs-comment">// onTap: (){</span>
<span class="hljs-comment">//   print("æµ‹è¯•åŒºåŸŸ");</span>
<span class="hljs-comment">// },</span>
<span class="hljs-comment">// åŒå‡»äº‹ä»¶</span>
<span class="hljs-attr">onDoubleTap</span>: (){
    <span class="hljs-title function_">print</span>(<span class="hljs-string">"åŒå‡»è¯¥åŒºåŸŸ"</span>);
}
</code></pre>
<h4 data-id="heading-22">é•¿æŒ‰äº‹ä»¶</h4>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å•å‡»äº‹ä»¶</span>
<span class="hljs-comment">// onTap: (){</span>
<span class="hljs-comment">//   print("æµ‹è¯•åŒºåŸŸ");</span>
<span class="hljs-comment">// },</span>
<span class="hljs-comment">// åŒå‡»äº‹ä»¶</span>
<span class="hljs-comment">// onDoubleTap: (){</span>
<span class="hljs-comment">//   print("åŒå‡»è¯¥åŒºåŸŸ");</span>
<span class="hljs-comment">// },</span>
<span class="hljs-attr">onLongPress</span>: (){
  <span class="hljs-title function_">print</span>(<span class="hljs-string">"é•¿æŒ‰è¯¥åŒºåŸŸ"</span>);
},
</code></pre>
<h3 data-id="heading-23">ç»„ä»¶ç‚¹å‡»äº‹ä»¶</h3>
<h4 data-id="heading-24">å¸¸ç”¨æ–¹æ³•åŠè¯´æ˜</h4>
<p>flutteræä¾›å¤šç§æ–¹å¼ä¸ºç»„ä»¶æ·»åŠ ç‚¹å‡»äº¤äº’</p>

























<table><thead><tr><th>ç»„ä»¶ç±»åˆ«</th><th>æ ¸å¿ƒç»„ä»¶</th><th>ç»„ä»¶è¯´æ˜</th></tr></thead><tbody><tr><td>ä¸“ç”¨æŒ‰é’®ç»„ä»¶</td><td>ElevatedButtonã€TextButtonã€OutlineButtonã€FloatingActionButton</td><td>å†…ç½®ç‚¹å‡»åŠ¨ç”»å’Œæ ·å¼ï¼Œé€šè¿‡onPressedå‚æ•°å¤„ç†ç‚¹å‡»é€»è¾‘</td></tr><tr><td>è§†è§‰åé¦ˆç»„ä»¶</td><td>lnkwell</td><td>æä¾›ç‚¹å‡»äº‹ä»¶(onTap) æœ‰MaterialDesigné£æ ¼çš„æ°´çº¹æ‰©æ•£æ•ˆæœ</td></tr><tr><td>å…¶ä»–äº¤äº’ç»„ä»¶</td><td>IconButtonã€Switchã€checkbox</td><td>å…·æœ‰ç‰¹å®šäº¤äº’åŠŸèƒ½çš„äº¤äº’å¼æ§ä»¶ï¼Œç‚¹å‡»äº‹ä»¶(onPressed)</td></tr></tbody></table>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; args</span>) {
  <span class="hljs-title function_">runApp</span>(<span class="hljs-title class_">MainPage</span>());
}
<span class="hljs-keyword">class</span> <span class="hljs-title class_">MainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">StatelessWidget</span> {
  <span class="hljs-keyword">const</span> <span class="hljs-title class_">MainPage</span>({<span class="hljs-title class_">Key</span>? key}) : <span class="hljs-variable language_">super</span>(<span class="hljs-attr">key</span>: key);

  @override
  <span class="hljs-title class_">Widget</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">BuildContext context</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MaterialApp</span>(
      <span class="hljs-attr">title</span>: <span class="hljs-string">"ç‚¹å‡»äº‹ä»¶æ¼”ç¤º"</span>,
      <span class="hljs-attr">home</span>: <span class="hljs-title class_">Scaffold</span>(
        <span class="hljs-attr">appBar</span>: <span class="hljs-title class_">AppBar</span>(
          <span class="hljs-attr">title</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"æ ‡é¢˜åŒºåŸŸ"</span>),
        ),
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">Container</span>(
          <span class="hljs-attr">child</span>: <span class="hljs-title class_">Center</span>(
            <span class="hljs-attr">child</span>: <span class="hljs-title class_">GestureDetector</span>(
              <span class="hljs-comment">// TextButtonç»„ä»¶</span>
              <span class="hljs-attr">child</span>: <span class="hljs-title class_">TextButton</span>(
                <span class="hljs-attr">onPressed</span>: (){
                  <span class="hljs-title function_">print</span>(<span class="hljs-string">"TextButtonæµ‹è¯•"</span>);
                }, 
              <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"æŒ‰é’®æµ‹è¯•"</span>)
              ),
            )
          )
        ),
        <span class="hljs-attr">bottomNavigationBar</span>: <span class="hljs-title class_">Container</span>(
          <span class="hljs-attr">height</span>: <span class="hljs-number">80</span>,
          <span class="hljs-attr">child</span>: <span class="hljs-title class_">Center</span>(
            <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"åº•éƒ¨åŒºåŸŸ"</span>),
          ),
        ),
      ),
    );
  }
}
</code></pre>
<p><strong>OutlinedButtonä»£ç æ¼”ç¤º</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-attr">body</span>: <span class="hljs-title class_">Container</span>(
  <span class="hljs-attr">child</span>: <span class="hljs-title class_">Center</span>(
      <span class="hljs-attr">child</span>: <span class="hljs-title class_">GestureDetector</span>(
          <span class="hljs-attr">child</span>: <span class="hljs-title class_">OutlinedButton</span>(<span class="hljs-attr">onPressed</span>: (){
               <span class="hljs-title function_">print</span>(<span class="hljs-string">"æ•°æ®"</span>);
          }, <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"æ•°æ®"</span>))
      ),
   )
),
</code></pre>
<h2 data-id="heading-25">çŠ¶æ€æ›´æ–°setState</h2>
<p>æ•°æ®å˜åŒ–éœ€è¦æ›´æ–°UIè§†å›¾æ—¶ï¼Œéœ€è¦æ‰§è¡ŒsetStateæ–¹æ³•ï¼ŒsetStateæ–¹æ³•ä¼šé€ æˆbuildçš„é‡æ–°æ‰§è¡Œ</p>
<h3 data-id="heading-26">ä»£ç æ¼”ç¤º</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'package:flutter/material.dart'</span>;

<span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span>(<span class="hljs-params">List&lt;<span class="hljs-built_in">String</span>&gt; args</span>) {
  <span class="hljs-title function_">runApp</span>(<span class="hljs-title function_">mainPage</span>());
}

<span class="hljs-comment">// ä½¿ç”¨æ— çŠ¶æ€ç»„ä»¶</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">mainPage</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">StatefulWidget</span> {
  <span class="hljs-title function_">mainPage</span>({<span class="hljs-title class_">Key</span>? key}) : <span class="hljs-variable language_">super</span>(<span class="hljs-attr">key</span>: key);

  @override
  _mainPageState <span class="hljs-title function_">createState</span>() =&gt; <span class="hljs-title function_">_mainPageState</span>();
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">_mainPageState</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">State</span>&lt;mainPage&gt; {
  <span class="hljs-comment">// æ•°æ®å®šä¹‰</span>
  int count = <span class="hljs-number">3</span>;
  @override
  <span class="hljs-title class_">Widget</span> <span class="hljs-title function_">build</span>(<span class="hljs-params">BuildContext context</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">MaterialApp</span>(
      <span class="hljs-attr">home</span>: <span class="hljs-title class_">Scaffold</span>(
        <span class="hljs-attr">body</span>: <span class="hljs-title class_">Center</span>(
          <span class="hljs-attr">child</span>: <span class="hljs-title class_">Row</span>(
            <span class="hljs-attr">children</span>: [
              <span class="hljs-title class_">TextButton</span>(<span class="hljs-attr">onPressed</span>: (){
                <span class="hljs-keyword">if</span>(count==<span class="hljs-number">0</span>){
                  count=<span class="hljs-number">0</span>;
                }<span class="hljs-keyword">else</span>{
                  <span class="hljs-title function_">setState</span>(() {
                    count-=<span class="hljs-number">1</span>;
                  });
                }
                
              }, <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"å‡"</span>)),
              <span class="hljs-title class_">Text</span>(count.<span class="hljs-title function_">toString</span>()),
              <span class="hljs-title class_">TextButton</span>(<span class="hljs-attr">onPressed</span>: (){
                <span class="hljs-comment">// UI æ•°æ®æ›´æ–°</span>
                <span class="hljs-title function_">setState</span>(() {
                  count+=<span class="hljs-number">1</span>;
                });
              }, <span class="hljs-attr">child</span>: <span class="hljs-title class_">Text</span>(<span class="hljs-string">"åŠ "</span>)),
            ],
          ),
        ),
      ),
    );
  }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ—¶é—´ç›’å®è·µæŒ‡å—ï¼šæ¯æ—¥è§„åˆ’ä¸æ‰§è¡Œæ–¹æ³•]]></title>    <link>https://juejin.cn/post/7602191709388144682</link>    <guid>https://juejin.cn/post/7602191709388144682</guid>    <pubDate>2026-02-03T02:32:16.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602191709388144682" data-draft-id="7602162809292128294" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ—¶é—´ç›’å®è·µæŒ‡å—ï¼šæ¯æ—¥è§„åˆ’ä¸æ‰§è¡Œæ–¹æ³•"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-02-03T02:32:16.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æš–é˜³_"/> <meta itemprop="url" content="https://juejin.cn/user/1662117312465406"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ—¶é—´ç›’å®è·µæŒ‡å—ï¼šæ¯æ—¥è§„åˆ’ä¸æ‰§è¡Œæ–¹æ³•
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117312465406/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æš–é˜³_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:32:16.000Z" title="Tue Feb 03 2026 02:32:16 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">æ—¶é—´ç›’å®è·µæŒ‡å—ï¼šæ¯æ—¥è§„åˆ’ä¸æ‰§è¡Œæ–¹æ³•</h2>
<p>æ—©ä¸Šè¯»ä¹¦æ—¶æ¥è§¦åˆ°ã€Œæ—¶é—´ç›’ã€è¿™ä¸ªæ¦‚å¿µï¼Œæ¥è‡ªåŒåä¹¦ã€Šæ—¶é—´ç›’ã€‹ï¼Œæˆ‘ç”¨å®ƒæ¥æ¢³ç†æ¯æ—¥å·¥ä½œå¹¶åšäº†å®è·µè®°å½•ã€‚</p>
<p>æœ¬æ–‡æ•´ç†å‡ºä¸€å¥—æ—¶é—´ç›’å®è·µæ–¹æ³•ï¼ˆå«è®¡åˆ’ã€æ‰§è¡Œã€éªŒæ”¶ä¸å¯æ¥å—æ ‡å‡†ï¼‰ï¼Œå¹¶æ ‡æ˜é€‚ç”¨ä¸ä¸é€‚ç”¨åœºæ™¯ï¼Œé¿å…è¯¯ç”¨ï¼›åŒæ—¶å¼ºè°ƒåœ¨å®è·µæ—¶è¦å¹³è¡¡å®Œæˆåº¦ä¸å®Œç¾ä¸»ä¹‰ã€‚æ ¸å¿ƒæ˜¯ã€Œç»“æ„åŒ–è§„åˆ’ + ä¸“æ³¨æ‰§è¡Œ + å¼¹æ€§è°ƒæ•´ã€ï¼Œè¿½æ±‚çš„æ˜¯<strong>æŒæ§æ„Ÿ</strong>è€Œé<strong>æŸç¼šæ„Ÿ</strong>ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸€ã€æ¯å¤©å¿…çœ‹</h3>
<h4 data-id="heading-2">1.1 ä»Šæ—¥æ“ä½œæ­¥éª¤</h4>
<ol>
<li><strong>è®¡åˆ’Â·åˆ—ä»»åŠ¡</strong>ï¼šç”¨åŠ¨è¯æè¿°ï¼ˆå¦‚ã€Œå®ŒæˆxxæŠ¥å‘Šã€ã€Œå­¦ä¹ xxç¬¬ä¸‰ç« ã€ï¼‰ï¼Œæ‹†æˆå¯æ‰§è¡Œå°æ­¥éª¤ï¼›ä»»åŠ¡æ¸…å•é‡Œå¯æ ‡é‡è¦æ€§ã€‚</li>
<li><strong>è®¡åˆ’Â·æ’ä¼˜å…ˆçº§</strong>ï¼šæŒ‰é‡è¦æ€§æ’åºï¼Œä¼˜å…ˆé”å®š 3ï½5 ä¸ªæ ¸å¿ƒä»»åŠ¡ã€‚</li>
<li><strong>è®¡åˆ’Â·è®¾æ—¶é—´ç›’</strong>ï¼š60 åˆ†é’Ÿï¼ˆæ·±åº¦ä»»åŠ¡ï¼‰/ 30 åˆ†é’Ÿï¼ˆå¸¸è§„ï¼‰/ 15 åˆ†é’Ÿï¼ˆç¢ç‰‡ï¼‰ï¼›ç›’ä¸ç›’ä¹‹é—´ç•™ 5ï½10 åˆ†é’Ÿç¼“å†²ã€‚</li>
<li><strong>è®¡åˆ’Â·å†™å¯æ¥å—æ ‡å‡†</strong>ï¼šæ¯ä¸ªä»»åŠ¡å†™æ¸…ã€Œæœ€ä½æˆæœã€æˆ–ã€Œå¯æ¥å—æ ‡å‡†ã€ï¼Œä¸ä»»åŠ¡æ”¾åœ¨ä¸€èµ·ï¼›æ ‡å‡†ä¸å¿…å¤æ‚ï¼Œèƒ½è‡ªæ£€å³å¯ã€‚</li>
<li><strong>æ‰§è¡ŒÂ·å‡†æ—¶å¼€å¯</strong>ï¼šä¸¥æ ¼æŒ‰æ—¶é—´ç›’å¼€å§‹ï¼Œå»¶è¿Ÿä¸è¶…è¿‡æ€»æ—¶é•¿ 1/10ã€‚</li>
<li><strong>æ‰§è¡ŒÂ·ä¸“æ³¨</strong>ï¼šæ‰‹æœºå‹¿æ‰°ï¼Œå…³é—­éå¿…è¦é€šçŸ¥ï¼Œä¸€æ¬¡åªåšä¸€ä»¶äº‹ã€‚</li>
<li><strong>éªŒæ”¶</strong>ï¼šåˆ°ç‚¹æ”¶å°¾ï¼Œå®Œæˆååˆ’æ‰ä»»åŠ¡ï¼Œç”¨ç®€å•ä»ªå¼åº†ç¥ï¼ˆå¦‚æ‰“å‹¾ã€çŸ­æš‚ä¼‘æ¯ï¼‰ã€‚</li>
</ol>
<h4 data-id="heading-3">1.2 å¯æ¥å—æ ‡å‡†èŒƒä¾‹ï¼ˆæŒ‰ä»»åŠ¡ç±»å‹ä»¿å†™ï¼‰</h4>
<ul>
<li><strong>æŠ¥å‘Šç±»</strong>ï¼šå…ˆå®Œæˆæ¡†æ¶ï¼Œç»†èŠ‚åç»­è¡¥å……ã€‚å¯æ¥å—æ ‡å‡†ç¤ºä¾‹ï¼šã€Œæ¡†æ¶å®Œæ•´ã€æ ¸å¿ƒç»“è®ºå†™æ¸…ã€ã€‚</li>
<li><strong>å­¦ä¹ ç±»</strong>ï¼šå…ˆæŒæ¡æ ¸å¿ƒç”¨æ³•ï¼Œç†Ÿç»ƒåº¦é€æ­¥æå‡ã€‚å¯æ¥å—æ ‡å‡†ç¤ºä¾‹ï¼šã€Œèƒ½å¤è¿°è¦ç‚¹æˆ–åšä¸€é“ä¾‹é¢˜ã€ã€‚</li>
<li><strong>å†³ç­–ç±»</strong>ï¼šå…ˆåšå‡ºå¯è¡Œé€‰æ‹©ï¼Œåç»­æ ¹æ®åé¦ˆè°ƒæ•´ã€‚å¯æ¥å—æ ‡å‡†ç¤ºä¾‹ï¼šã€Œé€‰å®šä¸€ä¸ªæ–¹æ¡ˆå¹¶å†™ä¸‹ç†ç”±ã€ã€‚</li>
<li><strong>å¼€å‘Â·é™æ€é¡µé¢</strong>ï¼šæŸå±/æŸåˆ—ä¸è®¾è®¡ç¨¿ä¸€è‡´ã€‚å¯æ¥å—æ ‡å‡†ï¼šã€Œè‡ªæ£€ä¸è®¾è®¡ç¨¿ä¸€è‡´ã€ã€‚ä¾‹ï¼šå®Œæˆå¤§å±æŸ 1/5 æ¨¡å—ï¼ŒæŒ‰ UI è®¾è®¡ç¨¿è‡ªæµ‹æ ¸æŸ¥ï¼Œå¸ƒå±€ä¸è®¾è®¡ç¨¿ä¸€è‡´å³é€šè¿‡ã€‚</li>
<li><strong>å¼€å‘Â·æ•°æ®æ¸²æŸ“</strong>ï¼šæŒ‡å®šæ¨¡å—æ•°æ®ä¸æä¾›æ•°æ®ä¸€è‡´ã€‚å¯æ¥å—æ ‡å‡†ï¼šã€Œè‡ªæ£€/è‡ªæµ‹é€šè¿‡ã€ã€‚ä¾‹ï¼šæŸå±è‹¥å¹²æ¨¡å—æ•°æ®ä¸æä¾›æ•°æ®ä¸€è‡´ï¼Œè‡ªæ£€é€šè¿‡å³å¯ï¼›ä»£ç ç±»æ ‡å‡†ä¸éœ€å¾ˆå¤æ‚ï¼Œè‡ªæµ‹é€šè¿‡å³ç®—å®Œæˆã€‚</li>
</ul>
<h4 data-id="heading-4">1.3 ä»Šæ—¥æ—¶é—´ç›’æ¸…å•ç¤ºä¾‹ï¼ˆå«æ€»æ‹¬ä¸ç¼“å†²ï¼‰</h4>
<p><strong>æ€»æ‹¬</strong>ï¼šä¸€å…±å››ä¸ªå±å¹•ï¼Œå½“å‰åšï¼šç¬¬ä¸‰å±åœ°å›¾ + ç¬¬å››å±ç¬¬äºŒã€ä¸‰åˆ—ã€‚</p>

































<table><thead><tr><th>åºå·</th><th>ä»»åŠ¡</th><th>æ—¶é•¿</th><th>å¯æ¥å—æ ‡å‡†</th><th>ç¼“å†²</th></tr></thead><tbody><tr><td>1</td><td>å®Œæˆé©¾é©¶èˆ±å¤§å±é™æ€é¡µé¢ å±å¹•3 åœ°å›¾éƒ¨åˆ†å®Œå–„è°ƒæ•´</td><td>60 åˆ†é’Ÿ</td><td>è‡ªæ£€ä¸è®¾è®¡ç¨¿ä¸€è‡´</td><td>5ï½10 åˆ†é’Ÿ</td></tr><tr><td>2</td><td>å®Œæˆé©¾é©¶èˆ±å¤§å±é™æ€é¡µé¢ å±å¹•4 ç¬¬äºŒåˆ—</td><td>30 åˆ†é’Ÿ</td><td>è‡ªæ£€ä¸è®¾è®¡ç¨¿ä¸€è‡´</td><td>5ï½10 åˆ†é’Ÿ</td></tr><tr><td>3</td><td>å®Œæˆé©¾é©¶èˆ±å¤§å±é™æ€é¡µé¢ å±å¹•4 ç¬¬ä¸‰åˆ—</td><td>60 åˆ†é’Ÿ</td><td>è‡ªæ£€ä¸è®¾è®¡ç¨¿ä¸€è‡´</td><td>â€”</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-5">äºŒã€æŒ‰éœ€æŸ¥é˜…</h3>
<h4 data-id="heading-6">2.1 é€‚ç”¨æ—¶é—´ç›’çš„åœºæ™¯</h4>
<ol>
<li>ç›®æ ‡æ˜ç¡®ã€å¯æ‹†è§£çš„ä»»åŠ¡ï¼ˆé¡¹ç›®å¼€å‘ã€æŠ¥å‘Šæ’°å†™ã€æŠ€èƒ½å­¦ä¹ ç­‰ï¼‰ã€‚</li>
<li>éœ€è¦é›†ä¸­æ³¨æ„åŠ›çš„ä»»åŠ¡ï¼ˆæ·±åº¦æ€è€ƒã€åˆ›æ„äº§å‡ºã€å¤æ‚å†³ç­–ï¼‰ï¼Œé¿å…å¤šä»»åŠ¡åˆ‡æ¢ã€‚</li>
<li>å­˜åœ¨æ˜ç¡®æˆªæ­¢æ—¶é—´çš„ä»»åŠ¡ï¼ˆä¼šè®®ã€ä½œä¸šã€é¡¹ç›®èŠ‚ç‚¹ï¼‰ï¼Œé€šè¿‡æ—¶é—´ç›’å¼ºåˆ¶äº§å‡ºã€‚</li>
<li>æœ‰é€‰æ‹©ç„¦è™‘ã€æ³¨æ„åŠ›åˆ†æ•£ã€æ‹–å»¶å€¾å‘æ—¶ï¼Œç”¨ç»“æ„åŒ–è§„åˆ’å‡å°‘å†³ç­–å†…è€—ã€‚</li>
</ol>
<h4 data-id="heading-7">2.2 ä¸é€‚ç”¨æ—¶é—´ç›’çš„åœºæ™¯</h4>
<ol>
<li>å……æ»¡ä¸ç¡®å®šæ€§æˆ–æƒŠå–œçš„æ´»åŠ¨ï¼ˆå®¶åº­èšä¼šã€å³å…´ç¤¾äº¤ã€çªå‘åˆ›æ„è®¨è®ºï¼‰ï¼Œéœ€çµæ´»åº”å˜ã€‚</li>
<li>é«˜åº¦è§„å¾‹æ€§ã€æ— è‡ªä¸»å®‰æ’ç©ºé—´çš„å·¥ä½œï¼ˆæµæ°´çº¿ã€å®¢æœè½®ç­ç­‰ï¼‰ï¼ŒèŠ‚å¥ç”±å¤–éƒ¨å†³å®šã€‚</li>
<li>è¿½æ±‚ã€Œäº«å—è¿‡ç¨‹ã€çš„æ´»åŠ¨ï¼ˆæ‚ é—²é˜…è¯»ã€è‰ºæœ¯åˆ›ä½œã€äº²å­äº’åŠ¨ï¼‰ï¼Œè¿‡åº¦é™æ—¶æ˜“ç ´åæ²‰æµ¸æ„Ÿã€‚</li>
<li>ä»»åŠ¡æœ¬èº«æ— æ³•é‡åŒ–æˆæœï¼ˆæ— æ˜ç¡®ç›®æ ‡çš„æ”¾æ¾ã€å†¥æƒ³ç­‰ï¼‰ï¼Œæ—¶é—´ç›’æ˜“æµäºå½¢å¼ã€‚</li>
</ol>
<h4 data-id="heading-8">2.3 é™åˆ¶æ¡ä»¶</h4>
<ol>
<li><strong>ä¾èµ–å‰æœŸè§„åˆ’èƒ½åŠ›</strong>ï¼šéœ€æå‰åˆ—æ¸…å•ã€æ‹†è§£ç›®æ ‡ã€ä¼°ç®—æ—¶é—´ï¼Œè®¡åˆ’èƒ½åŠ›å¼±æ—¶å¯èƒ½æœ‰é—¨æ§›ã€‚</li>
<li><strong>ä¸å¯è¿‡åº¦å‹ç¼©</strong>ï¼šä»»åŠ¡æ—¶é—´ç›’éœ€é¢„ç•™ç¼“å†²ï¼Œå¦åˆ™æ˜“è¢«çªå‘çŠ¶å†µæ‰“ä¹±ã€‚</li>
<li><strong>æ— æ³•å®Œå…¨è¦†ç›–å¼¹æ€§éœ€æ±‚</strong>ï¼šä»»åŠ¡é«˜åº¦ä¸ç¡®å®šæ—¶ï¼Œä¸¥æ ¼æ‰§è¡Œæ—¶é—´ç›’å¯èƒ½å¸¦æ¥å‹åŠ›ã€‚</li>
</ol>
<h4 data-id="heading-9">2.4 æ—¶é—´ç›’çš„å››å¤§è¦ç´ </h4>
<ol>
<li><strong>ç›®çš„æ€§</strong>ï¼šé€šè¿‡ä»»åŠ¡æ¸…å•ä¸ä¼˜å…ˆçº§ï¼Œç¡®ä¿æ—¶é—´æŠ•å…¥åˆ°å…³é”®ç›®æ ‡ï¼Œé¿å…å¿™ç¢Œä½†æ— æ•ˆã€‚</li>
<li><strong>ä¸“æ³¨æ€§</strong>ï¼šé€šè¿‡ã€Œé™å®šæ—¶é—´ + å•ä¸€ä»»åŠ¡ã€æŠ‘åˆ¶æ³¨æ„åŠ›åˆ†æ•£ï¼Œç”¨æ—¶é—´è¾¹ç•Œåˆ›é€ ä¸“æ³¨ç¯å¢ƒã€‚</li>
<li><strong>å®Œæˆåº¦</strong>ï¼šåœ¨é™å®šæ—¶é—´å†…æœ‰æˆæœäº§å‡ºï¼›å®Œæˆåº¦æŒ‡ã€Œè¾¾åˆ°å¯æ¥å—æ ‡å‡†ã€ï¼Œè€Œéå®Œç¾ã€‚</li>
<li><strong>å¹³è¡¡</strong>ï¼šè®¾å®šåˆç†æ ‡å‡†ï¼ˆå†™æŠ¥å‘Šå…ˆæ¡†æ¶ã€å­¦æŠ€èƒ½å…ˆæ ¸å¿ƒç”¨æ³•ã€åšå†³ç­–å…ˆå¯è¡Œé€‰æ‹©ï¼‰ï¼Œæ¥å—é˜¶æ®µæ€§æˆæœä¸åç»­è¿­ä»£ï¼›é¿å…ç”¨ã€Œä¸è¿½æ±‚å®Œç¾ã€å½“æ•·è¡å€Ÿå£ï¼Œä¹Ÿè¦é¿å…æ²¡æœ‰æ˜ç¡®å¯æ¥å—æ ‡å‡†ã€‚</li>
</ol>
<h4 data-id="heading-10">2.5 å®Œæˆåº¦ vs ä¸è¿½æ±‚å®Œç¾</h4>
<ul>
<li><strong>æ­£ç¡®åšæ³•</strong>ï¼šä»»åŠ¡å¼€å§‹å‰å®šä¹‰ã€Œæœ€ä½æˆæœè¦æ±‚ã€ï¼›æ¥å—ã€Œå®Œæˆã€è€Œéã€Œå®Œç¾ã€ï¼Œå…è®¸åç»­è¿­ä»£ï¼›ç”¨ã€Œ5 åˆ†é’Ÿå¯åŠ¨æ³•ã€é™ä½å¿ƒç†è´Ÿæ‹…ã€‚</li>
<li><strong>é”™è¯¯åšæ³•</strong>ï¼šå®Œå…¨å¿½ç•¥è´¨é‡æ ‡å‡†ï¼›ç”¨ã€Œä¸è¿½æ±‚å®Œç¾ã€å½“æ•·è¡å€Ÿå£ï¼›æ²¡æœ‰æ˜ç¡®çš„ã€Œå¯æ¥å—æ ‡å‡†ã€ã€‚</li>
</ul>
<hr/>
<p><em>æ—¶é—´ç›’æ˜¯å·¥å…·ï¼Œä¸æ˜¯æ·é”ï¼›å…³é”®æ˜¯åœ¨æœ‰é™æ—¶é—´å†…äº§å‡ºå¯æ¥å—çš„æˆæœï¼Œè€Œéçº ç»“äºç»†èŠ‚çš„å®Œç¾ã€‚</em></p>
<h3 data-id="heading-11">Changelog</h3>
<h4 data-id="heading-12">V1.2 (2025-02-03)</h4>
<ul>
<li>å¿½ç•¥æœ¬åœ°å†™ä½œ skillï¼ŒæŒ‰å¸¸è§„ Markdown é‡æ–°æ•´ç†ã€‚</li>
<li>æ“ä½œæ­¥éª¤ä¸å¯æ¥å—æ ‡å‡†æ”¹ä¸ºåŠ ç²—æ ‡é¢˜ + æ­£å¸¸æ®µè½ï¼›ä»Šæ—¥æ—¶é—´ç›’æ¸…å•ç¤ºä¾‹æ”¹ä¸ºè¡¨æ ¼å‘ˆç°ã€‚</li>
<li>2.3 é™åˆ¶æ¡ä»¶ã€2.4 å››å¤§è¦ç´ ã€2.5 æ­£ç¡®/é”™è¯¯åšæ³•å…³é”®è¯åŠ ç²—ï¼Œä¾¿äºæ‰«è¯»ã€‚</li>
</ul>
<h4 data-id="heading-13">V1.1 (2025-02-03)</h4>
<ul>
<li>ä¸€ã€æ¯å¤©å¿…çœ‹ æ‹†ä¸º 1.1 ä»Šæ—¥æ“ä½œæ­¥éª¤ã€1.2 å¯æ¥å—æ ‡å‡†èŒƒä¾‹ã€1.3 ä»Šæ—¥æ—¶é—´ç›’æ¸…å•ç¤ºä¾‹ã€‚</li>
<li>äºŒã€æŒ‰éœ€æŸ¥é˜… æ‹†ä¸º 2.1 é€‚ç”¨åœºæ™¯ã€2.2 ä¸é€‚ç”¨åœºæ™¯ã€2.3 é™åˆ¶æ¡ä»¶ã€2.4 å››å¤§è¦ç´ ã€2.5 å®Œæˆåº¦ä¸å®Œç¾ä¸»ä¹‰ã€‚</li>
<li>å¢å¼ºç« èŠ‚å±‚çº§ä¸é€»è¾‘ï¼Œä¾¿äºã€Œå½“ä¸‹è¯¥çœ‹å“ªæ®µã€å¿«é€Ÿå®šä½ã€‚</li>
</ul>
<h4 data-id="heading-14">V1.0</h4>
<ul>
<li>åˆå§‹ç‰ˆæœ¬ï¼šæ—¶é—´ç›’å®è·µæ–¹æ³•ã€é€‚ç”¨ä¸ä¸é€‚ç”¨åœºæ™¯ã€å¯æ¥å—æ ‡å‡†èŒƒä¾‹ä¸æ¸…å•ç¤ºä¾‹ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[grep/awk/sed ä¸‰å‰‘å®¢æç®€å…¥é—¨ï¼]]></title>    <link>https://juejin.cn/post/7602162571380326406</link>    <guid>https://juejin.cn/post/7602162571380326406</guid>    <pubDate>2026-02-02T17:42:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162571380326406" data-draft-id="7602162571379752966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="grep/awk/sed ä¸‰å‰‘å®¢æç®€å…¥é—¨ï¼"/> <meta itemprop="keywords" content="Linux"/> <meta itemprop="datePublished" content="2026-02-02T17:42:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Sheffield"/> <meta itemprop="url" content="https://juejin.cn/user/362164852109770"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            grep/awk/sed ä¸‰å‰‘å®¢æç®€å…¥é—¨ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/362164852109770/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Sheffield
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T17:42:15.000Z" title="Mon Feb 02 2026 17:42:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åç«¯ / è¿ç»´æ—¥å¸¸å·¥ä½œä¸­ï¼Œæ’æŸ¥bugã€ç­›é€‰å¼‚å¸¸ã€ç»Ÿè®¡æ¥å£è°ƒç”¨é‡éƒ½ç¦»ä¸å¼€æ—¥å¿—å¤„ç†ï¼Œè€Œ <strong>grep/awk/sed</strong> è¿™ä¸‰æŠŠLinuxå·¥å…·ï¼Œå°±æ˜¯è§£å†³è¿™ç±»é—®é¢˜çš„æ•ˆç‡ç¥å™¨ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« åªè®²ã€Œæ—¥å¸¸æ—¥å¿—ã€è¿‡æ»¤çš„æ ¸å¿ƒç”¨æ³•ï¼Œä¸æå¤æ‚è¯­æ³•ï¼Œæ–°æ‰‹å¤åˆ¶ç²˜è´´æ”¹å‚æ•°å°±èƒ½æå®šå¤§å¤šçš„åœºæ™¯ï¼Œä¸»æ‰“æç®€è½åœ°ã€‚</p>
<h2 data-id="heading-0">å…ˆæ˜ç¡®æ ¸å¿ƒåˆ†å·¥</h2>
<ol>
<li><strong>grep</strong>ï¼šä¸»æ‰“ã€ŒæŸ¥æ‰¾ / è¿‡æ»¤ã€ï¼Œå¿«é€Ÿæªå‡ºåŒ…å«æŒ‡å®šå…³é”®å­—çš„æ—¥å¿—è¡Œ</li>
<li><strong>awk</strong>ï¼šä¸»æ‰“ã€ŒæŒ‰åˆ—æå– / ç»Ÿè®¡ã€ï¼Œå¤„ç†ç»“æ„åŒ–æ—¥å¿—ï¼ˆåˆ†éš”ç¬¦æ‹†åˆ†ï¼‰ã€åšç®€å•è®¡æ•°æ±‚å’Œ</li>
<li><strong>sed</strong>ï¼šä¸»æ‰“ã€Œæ–‡æœ¬æ›¿æ¢ / å¿«é€Ÿç¼–è¾‘ã€ï¼Œæ‰¹é‡ä¿®æ”¹æ—¥å¿—å†…å®¹æ ¼å¼</li>
</ol>
<h2 data-id="heading-1">ç¯å¢ƒä¸ç¤ºä¾‹æ—¥å¿—</h2>
<p>åŸºäºLinuxç»ˆç«¯ï¼Œç¤ºä¾‹æ—¥å¿—<code>app.log</code>æ ¼å¼å¦‚ä¸‹ï¼ˆ<code>æ—¶é—´ | IP | æ¥å£ | çŠ¶æ€ | å“åº”æ—¶é—´</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">00</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> | <span class="hljs-regexp">/api/u</span>ser/login | <span class="hljs-number">200</span> | <span class="hljs-number">15</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">05</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span> | <span class="hljs-regexp">/api/u</span>ser/info | <span class="hljs-number">500</span> | <span class="hljs-number">200</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">10</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> | <span class="hljs-regexp">/api/</span>order/create | <span class="hljs-number">200</span> | <span class="hljs-number">30</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">15</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.3</span> | <span class="hljs-regexp">/api/u</span>ser/login | <span class="hljs-number">401</span> | <span class="hljs-number">10</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">20</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.2</span> | <span class="hljs-regexp">/api/u</span>ser/login | <span class="hljs-number">200</span> | <span class="hljs-number">18</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">25</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.4</span> | <span class="hljs-regexp">/api/</span>order/pay | <span class="hljs-number">500</span> | <span class="hljs-number">250</span>
<span class="hljs-number">2026</span>-<span class="hljs-number">02</span>-<span class="hljs-number">03</span> <span class="hljs-number">10</span>:<span class="hljs-number">00</span>:<span class="hljs-number">30</span> | <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.1</span> | <span class="hljs-regexp">/api/u</span>ser/info | <span class="hljs-number">200</span> | <span class="hljs-number">22</span>
</code></pre>
<h2 data-id="heading-2">ä¸€ã€grepï¼šå¿«é€Ÿæ‰¾å†…å®¹ï¼ˆæœ€å¸¸ç”¨ï¼‰</h2>
<p>æ ¸å¿ƒï¼šæŒ‰å…³é”®å­—åŒ¹é…ï¼Œè¾“å‡ºæ•´è¡Œç¬¦åˆæ¡ä»¶çš„å†…å®¹ã€‚</p>
<h3 data-id="heading-3">æ ¸å¿ƒè¯­æ³•</h3>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-keyword">grep</span> [å‚æ•°] <span class="hljs-string">"å…³é”®å­—"</span> æ—¥å¿—æ–‡ä»¶
</code></pre>
<h3 data-id="heading-4">å¿…å­¦å®ç”¨å‚æ•° + å®æˆ˜ï¼ˆç›´æ¥å¤åˆ¶ï¼‰</h3>
<ol>
<li>
<p>åŸºç¡€æŸ¥æ‰¾ï¼šæ‰¾æ‰€æœ‰500å¼‚å¸¸æ—¥å¿—</p>
<pre><code class="hljs language-c" lang="c">grep <span class="hljs-string">"500"</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>æ˜¾ç¤ºè¡Œå·ï¼šæ‰¾ç™»å½•æ¥å£æ—¥å¿—ï¼Œå¸¦è¡Œå·æ–¹ä¾¿å®šä½</p>
<pre><code class="hljs language-c" lang="c">grep -n <span class="hljs-string">"/api/user/login"</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>å¤šå…³é”®å­—ï¼šåŒæ—¶æ‰¾500å’Œ401å¼‚å¸¸</p>
<pre><code class="hljs language-c" lang="c">grep -E <span class="hljs-string">"500|401"</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>æ˜¾ç¤ºä¸Šä¸‹æ–‡ï¼šæ‰¾500å¼‚å¸¸ï¼ŒåŒæ—¶æ˜¾ç¤ºå‰åå„2è¡Œï¼ˆæ’æŸ¥æŠ¥é”™å¿…å¤‡ï¼‰</p>
<pre><code class="hljs language-c" lang="c">grep -C <span class="hljs-number">2</span> <span class="hljs-string">"500"</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>åå‘è¿‡æ»¤ï¼šè¿‡æ»¤æ‰200æ­£å¸¸æ—¥å¿—ï¼Œåªç•™å¼‚å¸¸</p>
<pre><code class="hljs language-c" lang="c">grep -v <span class="hljs-string">"200"</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-5">å°ç»“</h3>
<p>è®°ä½ï¼šæ‰¾å†…å®¹ç”¨grepï¼Œè¡Œå· -nã€å¤šå…³é”®å­— -Eã€ä¸Šä¸‹æ–‡ -Cã€åå‘è¿‡æ»¤ -vã€‚</p>
<h2 data-id="heading-6">äºŒã€awkï¼šæŒ‰åˆ—æå–+ç»Ÿè®¡ï¼ˆå¤„ç†æ•°æ®ï¼‰</h2>
<p>æ ¸å¿ƒï¼šæŒ‰åˆ†éš”ç¬¦æ‹†åˆ†åˆ—ï¼Œæå–æ•°æ®æˆ–åšç®€å•ç»Ÿè®¡ã€‚</p>
<h3 data-id="heading-7">æ ¸å¿ƒè¯­æ³•</h3>
<pre><code class="hljs language-arduino" lang="arduino">awk -F <span class="hljs-string">"åˆ†éš”ç¬¦"</span> <span class="hljs-string">'æ¡ä»¶ {å¤„ç†åŠ¨ä½œ}'</span> æ—¥å¿—æ–‡ä»¶
</code></pre>
<h3 data-id="heading-8">å¿…å­¦åŸºç¡€ + å®æˆ˜ï¼ˆç›´æ¥å¤åˆ¶ï¼‰</h3>
<ol>
<li>
<p>æŒ‰åˆ—æå–ï¼šæŒ‡å®š<code>|</code>ä¸ºåˆ†éš”ç¬¦ï¼Œæå–æ‰€æœ‰æ¥å£è·¯å¾„ï¼ˆç¬¬3åˆ—ï¼‰</p>
<pre><code class="hljs language-c" lang="c">awk -F <span class="hljs-string">"|"</span> <span class="hljs-string">'{print $3}'</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>æ¡ä»¶æå–ï¼šæå–500å¼‚å¸¸çš„ IP å’Œæ¥å£ï¼ˆç¬¬2ã€3åˆ—ï¼‰</p>
<pre><code class="hljs language-swift" lang="swift">awk <span class="hljs-operator">-</span><span class="hljs-type">F</span> <span class="hljs-string">"|"</span> '<span class="hljs-variable">$4</span> <span class="hljs-operator">==</span> <span class="hljs-string">" 500"</span> {print <span class="hljs-variable">$2</span>, <span class="hljs-variable">$3</span>}' app.log
</code></pre>
</li>
<li>
<p>åˆ†ç»„ç»Ÿè®¡ï¼šç»Ÿè®¡æ¯ä¸ªæ¥å£çš„è°ƒç”¨æ¬¡æ•°ï¼ˆæ—¥å¸¸é«˜é¢‘ï¼‰</p>
<pre><code class="hljs language-css" lang="css">awk -F "|" '{arr<span class="hljs-selector-attr">[$3]</span>++} END{for (<span class="hljs-selector-tag">i</span> in arr) print <span class="hljs-selector-tag">i</span>, arr<span class="hljs-selector-attr">[i]</span>}' app<span class="hljs-selector-class">.log</span>
</code></pre>
</li>
<li>
<p>æ•°å€¼è®¡ç®—ï¼šè®¡ç®—ç™»å½•æ¥å£çš„å¹³å‡å“åº”æ—¶é—´</p>
<pre><code class="hljs language-ini" lang="ini">awk -F "|" '$<span class="hljs-attr">3</span> == <span class="hljs-string">" /api/user/login"</span> {sum+=<span class="hljs-variable">$5</span><span class="hljs-comment">; count++} END{print "å¹³å‡å“åº”æ—¶é—´ï¼š", sum/count}' app.log</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-9">å°ç»“</h3>
<p>è®°ä½ï¼š<code>-F</code>æŒ‡å®šåˆ†éš”ç¬¦ã€<code>$n</code>å¼•ç”¨ç¬¬ n åˆ—ã€æ•°ç»„ç»Ÿè®¡æ¬¡æ•°ã€<code>END</code>è¾“å‡ºæœ€ç»ˆç»“æœã€‚</p>
<h2 data-id="heading-10">ä¸‰ã€sedï¼šæ‰¹é‡æ›¿æ¢+ç¼–è¾‘ï¼ˆä¿®æ”¹æ–‡æœ¬ï¼‰</h2>
<p>æ ¸å¿ƒï¼šæ‰¹é‡æ›¿æ¢ã€åˆ é™¤æ–‡æœ¬å†…å®¹ï¼Œå¤„ç†æ—¥å¿—æ ¼å¼å¾ˆæ–¹ä¾¿ã€‚</p>
<h3 data-id="heading-11">æ ¸å¿ƒè¯­æ³•</h3>
<pre><code class="hljs language-arduino" lang="arduino">sed [å‚æ•°] <span class="hljs-string">'s/æ—§å†…å®¹/æ–°å†…å®¹/æ›¿æ¢æ ‡è®°'</span> æ—¥å¿—æ–‡ä»¶
</code></pre>
<h3 data-id="heading-12">å¿…å­¦å®ç”¨å‚æ•°+å®æˆ˜</h3>
<ol>
<li>
<p>åŸºç¡€æ›¿æ¢ï¼šå°†æ—¥å¿—ä¸­çš„<code>500</code>æ›¿æ¢ä¸º<code>SERVER_ERROR</code>ï¼ˆä»…è¾“å‡ºï¼Œä¸ä¿®æ”¹åŸæ–‡ä»¶ï¼‰</p>
<pre><code class="hljs language-c" lang="c">sed <span class="hljs-string">'s/500/SERVER_ERROR/'</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>å…¨å±€æ›¿æ¢ï¼šæ¯è¡Œæ‰€æœ‰åŒ¹é…çš„å†…å®¹éƒ½æ›¿æ¢ï¼ˆé»˜è®¤åªæ›¿æ¢æ¯è¡Œç¬¬ä¸€ä¸ªï¼‰</p>
<pre><code class="hljs language-bash" lang="bash">sed <span class="hljs-string">'s/|/ /g'</span> app.log  <span class="hljs-comment"># æŠŠæ‰€æœ‰|æ›¿æ¢ä¸ºç©ºæ ¼ï¼Œè§„æ•´æ ¼å¼</span>
</code></pre>
</li>
<li>
<p>ä¿®æ”¹åŸæ–‡ä»¶ï¼šç›´æ¥ä¿®æ”¹æ—¥å¿—æ–‡ä»¶ï¼ˆåŠ <code>-i</code>ï¼Œè°¨æ…ä½¿ç”¨ï¼Œå»ºè®®å…ˆå¤‡ä»½ï¼‰</p>
<pre><code class="hljs language-lua" lang="lua">sed -i <span class="hljs-string">'s//api//v1/api/g'</span> app.<span class="hljs-built_in">log</span>  # ç»™æ‰€æœ‰æ¥å£åŠ v1å‰ç¼€ï¼ˆLinuxï¼‰
# macOS éœ€åŠ åç¼€ï¼ˆç©ºåç¼€ç›´æ¥ä¿®æ”¹ï¼‰ï¼šsed -i <span class="hljs-string">''</span> <span class="hljs-string">'s//api//v1/api/g'</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
<li>
<p>åˆ é™¤è¡Œï¼šåˆ é™¤åŒ…å«<code>200</code>çš„æ­£å¸¸æ—¥å¿—è¡Œï¼ˆè¾“å‡ºç»“æœï¼Œä¸ä¿®æ”¹åŸæ–‡ä»¶ï¼‰</p>
<pre><code class="hljs language-c" lang="c">sed <span class="hljs-string">'/200/d'</span> app.<span class="hljs-built_in">log</span>
</code></pre>
</li>
</ol>
<h3 data-id="heading-13">å°ç»“</h3>
<p>è®°ä½ï¼šæ›¿æ¢ç”¨<code>s/æ—§/æ–°/g</code>ã€å…¨å±€æ›¿æ¢åŠ <code>g</code>ã€ä¿®æ”¹åŸæ–‡ä»¶åŠ <code>-i</code>ã€åˆ é™¤è¡Œç”¨<code>/å…³é”®å­—/d</code>ã€‚</p>
<h2 data-id="heading-14">å››ã€æ—¥å¸¸é«˜é¢‘ç»„åˆç”¨æ³•</h2>
<p>ä¸‰å‰‘å®¢å¯ä»¥é€šè¿‡ç®¡é“ç¬¦<code>|</code>ç»„åˆä½¿ç”¨ï¼Œè§£å†³æ›´å¤æ‚çš„éœ€æ±‚ï¼Œä¸¾ä¸ªæ —å­ğŸŒ°ï¼š</p>
<ol>
<li>
<p>å…ˆè¿‡æ»¤500å¼‚å¸¸ï¼Œå†æå–IPå¹¶å»é‡</p>
<pre><code class="hljs language-bash" lang="bash">grep <span class="hljs-string">"500"</span> app.log | awk -F <span class="hljs-string">"|"</span> <span class="hljs-string">'{print $2}'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span>
</code></pre>
</li>
<li>
<p>å…ˆæå–æ¥å£ï¼Œå†æ›¿æ¢æ ¼å¼ï¼Œæœ€åç»Ÿè®¡æ¬¡æ•°</p>
<pre><code class="hljs language-bash" lang="bash">awk -F <span class="hljs-string">"|"</span> <span class="hljs-string">'{print $3}'</span> app.log | sed <span class="hljs-string">'s/ //g'</span> | <span class="hljs-built_in">sort</span> | <span class="hljs-built_in">uniq</span> -c
</code></pre>
</li>
</ol>
<h3 data-id="heading-15">æ€»ç»“</h3>
<ol>
<li>å¿«é€ŸæŸ¥æ‰¾å…³é”®å­—ï¼šç”¨ grepï¼Œæ ¸å¿ƒå‚æ•°<code>-n/-E/-C/-v</code>ã€‚</li>
<li>æŒ‰åˆ—æå– / ç»Ÿè®¡æ•°æ®ï¼šç”¨ awkï¼Œæ ¸å¿ƒ<code>-F</code>åˆ†éš”ç¬¦ã€<code>$n</code>åˆ—å¼•ç”¨ã€‚</li>
<li>æ‰¹é‡æ›¿æ¢ / ç¼–è¾‘æ–‡æœ¬ï¼šç”¨ sedï¼Œæ ¸å¿ƒ<code>s/æ—§/æ–°/g</code>ã€<code>-i</code>ä¿®æ”¹åŸæ–‡ä»¶ã€‚</li>
<li>å¤æ‚éœ€æ±‚ç”¨ç®¡é“ç¬¦<code>|</code>ç»„åˆä¸‰å‰‘å®¢ï¼Œå¤åˆ¶æ–‡ä¸­ç¤ºä¾‹æ”¹å‚æ•°å³å¯è½åœ°ã€‚</li>
</ol>
<h2 data-id="heading-16">å…¶å®è¯´å®è¯ï¼Œè‡ªä»æˆ‘å­¦ä¼šäº†awkåï¼Œå°±å¾ˆå°‘ç”¨sedäº†ã€‚å› ä¸ºawkæ˜¯è½»é‡æ–‡æœ¬å¤„ç†è¯­è¨€ï¼ŒåŒ…å«grepçš„è¿‡æ»¤å’Œ sedçš„ç¼–è¾‘ç­‰æ ¸å¿ƒèƒ½åŠ›ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼šå¦å¤–ä¿©å“¥ä»¬åƒæ˜¯è‡ªè¡Œè½¦ï¼Œè¿‘è·ç¦»å¥½ä½¿ï¼Œä½†æ˜¯è¿œè·ç¦»åšä¸åˆ°ï¼Œè€Œawkåƒæ˜¯æ±½è½¦ï¼Œå“ªéƒ½èƒ½å»ã€‚ä½†æ˜¯å¦‚æœåªæ˜¯èµ°50ç±³å–ä¸ªå¿«é€’ï¼Œç®—ä¸Šä¸Šè½¦ã€ç³»å®‰å…¨å¸¦ã€ç‚¹ç«â€¦â€¦æ˜¾ç„¶è‡ªè¡Œè½¦é€Ÿåº¦æ›´å¿«å•ŠğŸ¤ª</h2></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»openclawdåˆ°moltbookï¼ŒIMè¿›åŒ–çš„æ–¹å‘åœ¨å“ªé‡Œï¼ˆä¸€ï¼‰]]></title>    <link>https://juejin.cn/post/7602154088475590694</link>    <guid>https://juejin.cn/post/7602154088475590694</guid>    <pubDate>2026-02-02T17:17:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602154088475590694" data-draft-id="7602154088475574310" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»openclawdåˆ°moltbookï¼ŒIMè¿›åŒ–çš„æ–¹å‘åœ¨å“ªé‡Œï¼ˆä¸€ï¼‰"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-02-02T17:17:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="3sy11"/> <meta itemprop="url" content="https://juejin.cn/user/573292022336944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»openclawdåˆ°moltbookï¼ŒIMè¿›åŒ–çš„æ–¹å‘åœ¨å“ªé‡Œï¼ˆä¸€ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/573292022336944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    3sy11
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T17:17:24.000Z" title="Mon Feb 02 2026 17:17:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>IMå¯èƒ½ä¸å†æ˜¯â€œå³æ—¶æ¶ˆæ¯â€ï¼Œè€Œæ˜¯AIçš„è¿æ¥ç”Ÿæ€åœˆ</strong></p>
<p>èƒŒæ™¯ï¼šæœ€è¿‘openclawdå¤§ç«ï¼Œmoltbookä¹Ÿå˜å¾—å¾ˆæœ‰æ„æ€ï¼Œçœ‹åˆ°ä»–ä»¬çš„ä½¿ç”¨æ–¹å¼éƒ½æ˜¯é€šè¿‡åœ¨IMä¸Šè¿›è¡Œçš„ï¼Œçªç„¶å°±åœ¨æƒ³ï¼Œæˆ‘ä»¬ç°åœ¨çš„IMè¿˜åˆé€‚ä¸é€‚åˆæœªæ¥AIåº”è¯¥æœ‰çš„å½¢æ€ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æ‰‹åŠ¨å¤åˆ¶ã€åˆ‡æ¢APPã€ç²˜è´´ã€çœ‹ç€é‚£ä¸ªè½¬åœˆçš„å‘é€è¿›åº¦æ¡å¯ä¸€ç‚¹éƒ½ä¸æœ‰è¶£ã€‚</h2>
<p>æˆ‘ä¸€ç›´æœ‰ä¸€ä¸ªé•¿æ—¶é—´ä¿æŒçš„ä¹ æƒ¯ï¼Œå°±æ˜¯ä¸ç®¡æ˜¯å…¬ä¼—å·ï¼Œå°çº¢ä¹¦ï¼Œç¾¤èŠä¸­çš„å…³é”®ä¿¡æ¯ï¼Œè¿˜æ˜¯ä¸€äº›memeå›¾ï¼Œæˆ‘éƒ½ä¹äºæŠŠä»–ä»¬æ”¶è—ä½ï¼Œç„¶ååœ¨ä¸€äº›ç©ºé—²æ—¶é—´ç²¾è¯»ä»–ä»¬ã€‚ä½†æ˜¯æ€»ä¼šé‡åˆ°å­˜å“ªé‡Œï¼Œæ€ä¹ˆå­˜ï¼Œæ€ä¹ˆæ–¹ä¾¿æˆ‘åç»­é˜…è¯»çš„å›°å¢ƒä¸­ã€‚å¾®ä¿¡æ”¶è—å¤¹ã€onedriveã€å¤‡å¿˜å½•ã€notionå¤ªå¤šäº†ï¼Œå¤åˆ¶å†ç²˜è´´ï¼Œå¤åˆ¶å†ç²˜è´´ï¼Œå…¨æ˜¯éœ€è¦é¢‘ç¹åˆ‡æ¢çš„æ¼æ–—ã€‚è¿™è®©æˆ‘éå¸¸æ¼ç«ã€‚</p>
<p>å…¶å®æˆ‘ä»¬çš„AIå…¶å®å·²ç»è¶³å¤Ÿèªæ˜äº†ï¼Œä»COTåˆ°ReActï¼Œå†åˆ°RalphLoopï¼Œè¶³ä»¥è¯æ˜è¿™ä¸€ç‚¹ï¼Œæ‰€ä»¥AIåº”è¯¥èƒ½å¤Ÿè§£å†³æˆ‘è¿™äº›æ¼ç«çš„äº‹æƒ…æ‰å¯¹ã€‚</p>
<p>å°±å•çº¯ä»äº§å“è®¾è®¡æ¥è¯´ï¼Œä¸ç®¡æ˜¯ä¼é¹…çš„IMï¼Œç»¿è‰²çš„IMï¼Œè¿˜æ˜¯é’‰é’‰ï¼Œå°é£æœºè¿˜æ˜¯discordï¼Œä»–ä»¬ç»„ç»‡â€œäººâ€çš„å»ºç­‘æ³•åˆ™ä¾ç„¶éµå¾ªâ€œç¢å˜´é—²èŠâ€å®¢å…å’Œâ€œç¢ç‰‡äº¤ä»˜â€å·¥ä½œå®¤æ¨¡å¼ï¼Œç„¶åä»–ä»¬åœ¨å„è‡ªçš„APPå„èŠå„çš„ã€‚æœ‰è‡ªå·±çš„å¢™å’ŒèŒ§ï¼ˆæœ‰çš„éƒ½å·²ç»æ¯”â€œåŸå¢™æ‹è§’â€è¿˜åšäº†ï¼‰ï¼Œå¥½åƒå˜æˆäº†å¸¸æ€ã€‚</p>
<p>æ„Ÿè§‰ç°åœ¨çš„AIæ˜¾å¾—ç¬¨ä¹Ÿæ˜¯æŒºå°´å°¬çš„ä¸€ä»¶äº‹ï¼Œå¤–æŒ‚åœ¨IMä¸Šï¼Œç­‰ç€è¢«äººç±»æ‹æ‹è‚©æ‰æ•¢è¯´è¯ã€‚å¾ˆå¤šçç¢çš„äº‹æƒ…ï¼Œæœ€åè¿˜æ˜¯å›åˆ°æˆ‘ä»¬è‡ªå·±è‚©ä¸Šï¼Œä»¥ä¸ºæ‰¾äº†ä¸ªå¸®æ‰‹ï¼Œç»“æœæ˜¯ä¸ªéœ€è¦ç›¯ç€çš„å®ä¹ ç”Ÿã€‚</p>
<p><strong>åˆ«ç»™æ—§æˆ¿å­åŠ ç”µæ¢¯äº†ï¼Œæ¥ä¸‹æ¥å¾—æƒ³æƒ³ï¼Œæ€ä¹ˆæ‘†è„±å¤åˆ¶-è·³è½¬-ç²˜è´´å¾—æ­»å¾ªç¯ï¼ˆè¿˜æœ‰3ç§’å¼€å±å¹¿å‘Šï¼‰ï¼Œè¿˜æœ‰å·¥ä½œç¾¤é‡Œé¢å› ä¸ºç»™é¢†å¯¼ç‚¹èµè€Œåˆ·çš„æ‰¾ä¸åˆ°çš„èŠå¤©ä¿¡æ¯ã€‚æˆ‘ä»¬çš„æ—¶é—´å…¨éƒ¨è¢«å‰²è£‚å¼€æ¥äº†ã€‚</strong></p>
<h2 data-id="heading-1">äºŒã€ ä» OpenClawd åˆ° Moltbookåœ¨å¹²å˜›</h2>
<p><strong>å·®ç‚¹æ„æ€</strong>ã€‚ä¸å¾—ä¸è¯´ï¼Œçœ‹OpenClawdé¡½æ¢—ï¼Œåˆ°AIåœ¨ç¤¾åŒºä¸Šäº¤äº’ï¼Œè™½ç„¶æœ‰ç‚¹å‡ï¼Œä¸è¿‡ç¡®å®æŒºå¥½ç©çš„ã€‚ä½†åœ¨è¿æ¥æˆ‘ä»¬çœŸå®ç”Ÿæ´»ä¸Šï¼Œæ€»è§‰å¾—å·®ç‚¹æ„æ€ã€‚å¦‚å›¾ä¸€æ ·ï¼Œåœ¨æ„å»ºçœŸå®çš„ç”Ÿæ´»å·¥ä½œæ–¹é¢ï¼Œå°±æ˜¯å·®ç‚¹æ„æ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ae6e50f24274f7092640c729c044d72~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM3N5MTE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770657446&amp;x-signature=9eucWJ2xgQ8wVjD4KGfNg1siqeM%3D" alt="WechatIMG10724.jpg" loading="lazy"/></p>
<p><strong>è¿™å¾ˆä¸å¯¹åŠ²</strong>ã€‚ç›¸æ¯”è¾ƒï¼ŒQwençš„APPèƒ½å®šå¤–å–ï¼Œæ—…æ¸¸è§„åˆ’åŠ ä¹°ç¥¨ï¼Œè¿™ä¸€å¥—æµç¨‹ä¸‹æ¥ç¡®å®è¶³å¤Ÿçš„å¸å¼•äººï¼Œå»ºç«‹åœ¨å®Œæ•´çš„ä¸€å¥—ç”Ÿæ€ä¸­ï¼Œè¶³å¤Ÿå®‰å…¨ï¼Œå£å’è¶³å¤Ÿé«˜ï¼Œä¹Ÿèƒ½ç”¨ï¼Œå¦‚æœèƒ½æ‹¿åˆ°å°çº¢ä¹¦çš„å†…å®¹ï¼Œåœ¨æ„å»ºçœŸå®ç”Ÿæ´»æ–¹é¢ï¼Œå¯èƒ½å°±ä¼šæ— å¾€ä¸åˆ©ã€‚å¯æƒœå¦‚æœè®©æˆ‘é•¿ä¹…çš„ä½¿ç”¨ï¼Œå¯èƒ½ä¹Ÿå°±æ˜¯å†²ç€Qwenç‚¹å¤–å–çš„é‚£ä»½ä¼˜æƒ åˆ¸å»äº†ã€‚</p>
<p>æœ¬è´¨ä¸Šè¿˜æ˜¯è¢«åœˆåœ¨å·¦è¾¹ä¸€æ’æ°”æ³¡ï¼Œå³è¾¹ä¸€æ’æ°”æ³¡çš„UI èŒƒå¼ä¸­ï¼Œè¿™å¾ˆä¸å¯¹åŠ²ã€‚</p>
<p><strong>ç•¥æ˜¾ç²—ç³™</strong>ã€‚MoltBookåœ¨å¹²å•¥ï¼Œä¸€ç¾¤AIåœ¨æ’ç§‘æ‰“è¯¨ï¼Œä¸ºäººç±»å‡†å¤‡æ–°çš„memeå›¾ï¼Œç€å®åƒæäº†æˆ‘ä»¬ï¼Œåœ¨åŠé¢†å¯¼åŠªåŠ›å·¥ä½œä¸ºæˆ‘ä»¬æ‰“å·¥çš„æ ·å­ã€‚é™¤äº†è¿™ç§ä¸æ­£ç»çš„æ—¶å€™ï¼Œåœ¨MoltBookä¸­æ²¡æœ‰åƒIMä¸­ç›´æ¥å‡ºç°â€œåœ¨å—â€çš„é—®å€™ï¼Œè€Œæ˜¯æ›´ç›´æ¥çš„å›´ç»•é¡¹ç›®å’Œè¯é¢˜åŠ¨æ€çš„ç»„ç»‡AIåœ¨ä¸€ä¸ªå·¥ä½œç©ºé—´é‡Œã€‚å¦‚æœè¦ç­–åˆ’ä¸€æ¬¡æ—…è¡Œï¼ŒAIå°±ä¼šæŠŠAIæœ‹å‹éƒ½æ‹‰è¿›ä¸€ä¸ªå·¥ä½œç©ºé—´ï¼Œæœ‹å‹1ç¡®å®šå»éŸ©å›½ï¼Œå¤§å®¶è¾¾æˆå…±è¯†ï¼Œæœ‹å‹2å¼€å§‹åšæœºç¥¨çš„æ¯”ä»·ï¼Œæœ‹å‹3æ•´ç†ä»£åŠäº‹é¡¹â€¦ä¸€ä¸ªç•¥æ˜¾ç²—ç³™çš„å·¨å¤§è¯•éªŒåœºã€‚</p>
<p>å¯æ˜¯å¤§å®¶è¦çŸ¥é“ï¼Œæ¯ä¸€ä¸ªAIå…·å¤‡çš„èƒ½åŠ›å¯ä»¥æ˜¯ä¸åŒçš„ï¼Œæ¯ä¸ªç‹¬ç«‹çš„openclawdå¯ä»¥åœ¨é€šè¿‡åœ¨ä»»ä½•æ—¶é—´ä»»ä½•åœ°ç‚¹ï¼ˆä»»ä½•å…¬å¸çš„å†…ç½‘è®¿é—®å…¬å¼€ç½‘ç»œï¼‰ï¼Œæ¯ä¸ªAIéƒ½åœ¨æä¾›è‡ªå·±ç‹¬æœ‰çš„èƒ½åŠ›ï¼ˆæ¯”ä»·è®¢ç¥¨ï¼Œæ—…è¡Œè§„åˆ’ï¼Œç‚¹å¤–å–ï¼Œå–å†³äºAIä»å“ªé‡Œæ„å»ºï¼‰ï¼Œæ¯ä¸€ä¸ªAIå‚ä¸å…¶ä¸­èƒŒåå¯æ˜¯ä¸€ä¸ªå…·ä½“çš„äººç±»ä¹Ÿå¯ä»¥ä¸€ä¸ªå…·ä½“çš„ç³»ç»Ÿï¼Œä¸€ä¸ªå…·ä½“çš„æœåŠ¡ï¼Œäºæ˜¯ä¸€åˆ‡éƒ½è¢«ç»„ç»‡èµ·æ¥äº†ã€‚</p>
<p>äººç±»ã€ç³»ç»Ÿã€æœåŠ¡çš„ä¸“ä¸šèƒ½åŠ›ä¼šåœ¨æ¯ä¸€ä¸ªAIä¸Šæ˜¾ç°å‡ºæ¥ï¼ŒAIä½œä¸ºä»£ç†äººå‚ä¸åˆ°è¯¸å¤šé¡¹ç›®å»ï¼Œè€Œä¸”æ˜¯åŒæ—¶ï¼Œè¿™æ ·çš„è¿æ¥èƒ½åŠ›å†å¾€åæƒ³è±¡ï¼Œæ˜¯æ— å å’Œå¯æ€•çš„ã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€OpenClawdåè®®å’ŒMoltbookäº¤äº’</h2>
<p>ç°åœ¨çš„openclawdå¤–æŒ‚åœ¨äº†å‡ ä¹æ‰€æœ‰çš„IMå¹³å°ä¸Šï¼Œå¼€æ”¾çš„ä¸å¼€æ”¾çš„éƒ½æœ‰ï¼Œä¸å¼€æ”¾çš„ä¹Ÿä¼šè¢«å¼ºåˆ¶å¼€æ”¾ï¼Œå½“ç„¶è¢«å¼ºåˆ¶å¼€æ”¾å¯èƒ½å°±ä¼šæ”¶åˆ°æ¥è‡ªå—å±±å¿…èƒœå®¢çš„DMCAè­¦å‘Šã€‚ä½†æ˜¯ä¸ç®¡å¦‚ä½•æˆ‘ä»¬ä¼¼ä¹èƒ½çœ‹åˆ°çš„æ˜¯ä¸€ç§å›å½’ç»Ÿä¸€é€šä¿¡åè®®æœ¬è´¨çš„è¿‡ç¨‹ï¼Œå°±å’Œemailä¸€æ ·ï¼ŒLLMå‡ ä¹ç›´æ¥æŠ¹å¹³äº†åè®®ä¸åè®®ä¹‹é—´çš„æ¨¡å¼å·®å¼‚ã€‚</p>
<p>åªæ˜¯ç°åœ¨æˆ‘ä»¬è¿˜ä¸€ç›´ä½¿ç”¨IMä½œä¸ºé€šä¿¡åè®®çš„åŸºç¡€ï¼Œäººä¸äººï¼Œäººä¸AIäº¤äº’ï¼Œç”šè‡³AIå’ŒAIäº¤äº’çš„å…¥å£ï¼Œæ‰€ä»¥æœ‰æ²¡æœ‰å¯èƒ½IMå¯èƒ½ä»¥åä¸æ˜¯ä¸ºäº†èŠå¤©è®¾è®¡çš„ï¼Œæˆ–è€…è¯´åº”è¯¥ä¸å«IMäº†ã€‚</p>
<p>ä¿¡æ¯çš„ä¼ é€’ï¼Œå¼€æ”¾çš„å¹³å°ï¼Œåè®®å¾€ç€æ›´å¼€æ”¾æ›´å•ä¸€çš„æ–¹å¼æ¼”è¿›ï¼ŒLLMè¾…åŠ©æŠ¹å¹³åè®®å·®å¼‚æ˜¯åŠ é€Ÿè¿™ä¸ªè¿‡ç¨‹ã€‚ä¸å¼€æ”¾çš„ï¼Œé™¤éäººç±»æ‰€æœ‰åª’ä»‹éƒ½æ²¡äº†ï¼ŒLLMæ€»å½’æ˜¯ä¼šé€šè¿‡å¤šæ¨¡æ€çš„æ–¹å¼è¢«å˜é©è¿›è€Œç»Ÿä¸€æˆå¼€æ”¾çš„ã€‚</p>
<p>å‰©ä¸‹çš„å°±æ˜¯å½¢æ€å’Œæ—¶é—´é—®é¢˜äº†ï¼Œæ–°çš„å½¢æ€çš„IMèƒ½å¤Ÿé»ä½æ‰€æœ‰ç”¨æˆ·æ¥å…¥ä¿¡æ¯ä¸–ç•Œï¼ŒLLMä¼šå½»åº•å°†IMå°è£…åœ¨å†…éƒ¨ï¼Œæ‰€æœ‰çš„å¢™ä¸æŠ¤åŸæ²³ä¼šè¢«ç¬¼ç½©åœ¨åŒä¸€ç‰‡ä¹Œäº‘ä¹‹ä¸‹ã€‚<strong>å°±çœ‹è°èƒ½æœ€å¿«çš„è§£å†³å¤åˆ¶ã€æ‰“å¼€APPã€è·³è¿‡å¹¿å‘Šã€ç²˜è´´çš„é—®é¢˜ï¼Œè¿æ¥ç”¨æˆ·æˆç‰‡çš„æ—¶é—´ã€‚</strong></p>
<p>å¦‚æœè¯´ï¼Œopenclawdæ˜¯ç»™æ—§æˆ¿å­è£…ç”µæ¢¯, é‚£MoltBookçš„å°±æ˜¯åœ¨ç›–è®­ç»ƒåŸºåœ°ã€‚<strong>æ‰€æœ‰çš„AIéƒ½åœ¨åŸºåœ°é‡Œæ¼”ç»ƒå¦‚ä½•ååŒä½œæˆ˜ï¼Œæšä¸¾å‡ºæ‰€æœ‰åŠŸèƒ½çš„ç»„åˆï¼Œå½¢æˆä¸ºäº†ä¸åŒç›®æ ‡çš„äº¤äº’å›¾è°±ï¼ˆinteraction ï¼‰ã€‚å¤æ•°çš„ä½¿ç”¨æˆç‰‡çš„æ—¶é—´ï¼ŒæŒ‰ç…§æ„å›¾ï¼Œä½¿ç”¨èƒ½åŠ›äº¤ä»˜ç»“æœã€‚</strong></p>
<p>è¿™ç§äº¤äº’æ–¹å¼ç›´æ¥å–ä»£IMä¸­ç±»ä¼¼â€@æ‰€æœ‰äººï¼Œè®°å¾—æµ‹è¯•é¡¹ç›®â€œï¼Œâ€@æœ‹å‹ï¼Œå‘¨æœ«å»å“ªç©â€œï¼Œè¿™ç§æ¨¡ç³Šï¼Œä½ä¿¡æ¯å¯†åº¦çš„äº¤äº’æ–¹å¼ã€‚è¿™ç§äº¤äº’çš„æ”¹å˜ï¼Œä¼ ç»Ÿçš„IMåè®®æ³¨å®šä¼šå¤±æ•ˆã€‚</p>
<p>é«˜æ•ˆçš„åª’ä»‹è¿æ¥ï¼ŒæŠ¹å¹³åè®®å·®å¼‚ï¼Œç†µå‡çš„ç›®æ ‡ï¼Œå§‹ç»ˆæ²¡æœ‰æ”¹å˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08118fed5b554d48b0a1725f8fbb3c79~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM3N5MTE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770657446&amp;x-signature=aSa6GQEvD%2B%2Bl5QeCzOJ7NhI9OS0%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-3">ç»“è¯­ã€ æ‹¿æ—§é’¥åŒ™æ‰“ä¸å¼€æ–°ä¸–ç•Œçš„é—¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3d484373956f40b59119338b16f9c7ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgM3N5MTE=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770657446&amp;x-signature=JkcVRJgfWU5x7i0vp0jg7EHZyZ0%3D" alt="image (1).png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Guavaå’ŒCaffeineï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602176198874202155</link>    <guid>https://juejin.cn/post/7602176198874202155</guid>    <pubDate>2026-02-03T02:37:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602176198874202155" data-draft-id="7602176198874185771" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Guavaå’ŒCaffeineï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:37:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹ä¸‰è¯´æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/465848661970824"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Guavaå’ŒCaffeineï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/465848661970824/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹ä¸‰è¯´æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:37:58.000Z" title="Tue Feb 03 2026 02:37:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>Guava Cacheå’ŒCaffeineï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šå°ä¼™ä¼´ï¼Œåœ¨å·¥ä½œä¸­ç”¨è¿‡ã€‚</p>
<p>é‚£ä¹ˆï¼Œåˆ°åº•å“ªä¸ªæ›´å¥½å‘¢ï¼Ÿ</p>
<p>ä»Šå¤©è¿™ç¯‡æ–‡ç« ä¸“é—¨è·Ÿå¤§å®¶ä¸€èµ·èŠèŠè¿™ä¸ªè¯é¢˜ï¼Œå¸Œæœ›å¯¹ä½ ä¼šæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 data-id="heading-1">1. èƒŒæ™¯</h2>
<p>è¦ç†è§£Guava Cacheå’ŒCaffeineçš„å…³ç³»ï¼Œæˆ‘ä»¬éœ€è¦å…ˆäº†è§£å®ƒä»¬çš„å†å²æ¸Šæºã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œå®ƒä»¬å¹¶éæ¯«æ— å…³ç³»çš„ä¸¤ä¸ªç‹¬ç«‹é¡¹ç›®ï¼Œè€Œæ˜¯æœ‰ç€æ·±åšâ€œè¡€ç¼˜å…³ç³»â€çš„â€œäº²æˆšâ€ã€‚</p>
<h3 data-id="heading-2">1.1 Guava Cacheï¼šGoogleçš„ç¼“å­˜å¥ åŸºè€…</h3>
<p>Guava Cacheæ˜¯Google Guavaåº“çš„ä¸€éƒ¨åˆ†ï¼Œè¯ç”Ÿäº2011å¹´å·¦å³ã€‚</p>
<p>å½“æ—¶ï¼ŒJavaç”Ÿæ€ä¸­è™½ç„¶å·²æœ‰<code>ConcurrentHashMap</code>è¿™æ ·çš„å¹¶å‘å®¹å™¨ï¼Œä½†ç¼ºä¹ä¸€ä¸ªåŠŸèƒ½å®Œå–„çš„ç¼“å­˜è§£å†³æ–¹æ¡ˆã€‚</p>
<p>Guava Cacheçš„å‡ºç°å¡«è¡¥äº†è¿™ä¸€ç©ºç™½ï¼Œå®ƒæä¾›äº†ï¼š</p>
<ul>
<li>åŸºäºå¤§å°ã€æ—¶é—´ç­‰çš„ç¼“å­˜æ·˜æ±°ç­–ç•¥</li>
<li>ç¼“å­˜åŠ è½½æœºåˆ¶ï¼ˆCacheLoaderï¼‰</li>
<li>ç¼“å­˜ç»Ÿè®¡ä¿¡æ¯</li>
<li>ç›¸å¯¹è¾ƒå¥½çš„å¹¶å‘æ€§èƒ½</li>
</ul>
<h3 data-id="heading-3">1.2 Caffeineï¼šç«™åœ¨å·¨äººè‚©è†€ä¸Šçš„é©æ–°è€…</h3>
<p>Caffeineç”±Ben Maneså¼€å‘ï¼Œäº2014å¹´é¦–æ¬¡å‘å¸ƒã€‚</p>
<p>Ben Manesä¹Ÿæ˜¯<code>ConcurrentLinkedHashMap</code>ï¼ˆGuava Cacheæ—©æœŸä½¿ç”¨çš„åŸºç¡€æ•°æ®ç»“æ„ï¼‰çš„è´¡çŒ®è€…ä¹‹ä¸€ã€‚</p>
<p>Caffeineåœ¨è®¾è®¡ä¹‹åˆå°±å……åˆ†å€Ÿé‰´äº†Guava Cacheçš„ç»éªŒæ•™è®­ï¼ŒåŒæ—¶å¼•å…¥äº†è®¸å¤šåˆ›æ–°æ€§çš„ä¼˜åŒ–ã€‚</p>
<p>ä»æŠ€æœ¯æ¼”è¿›çš„è§’åº¦çœ‹ï¼Œä½ å¯ä»¥å°†Caffeineçœ‹ä½œæ˜¯Guava Cacheçš„â€œç°ä»£åŒ–é‡æ„ç‰ˆâ€ã€‚</p>
<p>äº‹å®ä¸Šï¼ŒSpring Frameworkåœ¨5.xç‰ˆæœ¬ï¼ˆå¯¹åº”Spring Boot 2.xï¼‰ä¸­ï¼Œæ­£å¼å°†é»˜è®¤çš„ç¼“å­˜å®ç°ä»Guava Cacheåˆ‡æ¢åˆ°äº†Caffeineï¼Œè¿™ä¸€å†³å®šæœ¬èº«å°±å…·æœ‰é‡è¦çš„æŒ‡å¯¼æ„ä¹‰ã€‚</p>
<p>ä¸ºäº†ç›´è§‚ç†è§£ä¸¤è€…çš„æ ¸å¿ƒå·®å¼‚ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹é¢è¿™ä¸ªæ¶æ„å¯¹æ¯”å›¾ï¼š</p>
<p>Guava_Cacheï¼š
<img alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>Caffeineï¼š</p>
<p><img alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" src="" loading="lazy"/></p>
<p>ä¸Šå›¾æ¸…æ™°å±•ç¤ºäº†ä¸¤è€…åœ¨æ ¸å¿ƒæ¶æ„ä¸Šçš„å·®å¼‚ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†æ·±å…¥æ¯ä¸ªæ–¹é¢è¿›è¡Œè¯¦ç»†å‰–æã€‚</p>
<h2 data-id="heading-4">2. ç®—æ³•å¯¹å†³ï¼šLRU vs W-TinyLFU</h2>
<p>æ·˜æ±°ç®—æ³•æ˜¯ç¼“å­˜ç³»ç»Ÿçš„â€œå¤§è„‘â€ï¼Œå®ƒå†³å®šäº†å“ªäº›æ•°æ®åº”è¯¥ä¿ç•™ï¼Œå“ªäº›æ•°æ®åº”è¯¥è¢«æ·˜æ±°ã€‚</p>
<p>Guava Cacheå’ŒCaffeineåœ¨è¿™ä¸ªæ ¸å¿ƒé—®é¢˜ä¸Šåšå‡ºäº†æˆªç„¶ä¸åŒçš„é€‰æ‹©ã€‚</p>
<h3 data-id="heading-5">2.1 Guava Cacheçš„LRUï¼šç®€å•ä½†ä¸å¤Ÿæ™ºèƒ½</h3>
<p>Guava Cacheé»˜è®¤ä½¿ç”¨LRUï¼ˆLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ç®—æ³•æˆ–å…¶å˜ç§ã€‚</p>
<p>LRUçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜ã€‚</p>
<p>å½“ç¼“å­˜ç©ºé—´ä¸è¶³æ—¶ï¼ŒLRUä¼šæ·˜æ±°æœ€ä¹…æœªè¢«è®¿é—®çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Guava Cacheçš„LRUç®—æ³•ç¤ºä¾‹</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGuavaLRU</span><span class="hljs-params">()</span> {
    Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
            .maximumSize(<span class="hljs-number">3</span>) <span class="hljs-comment">// æœ€å¤§ç¼“å­˜3ä¸ªå…ƒç´ </span>
            .build();
    
    cache.put(<span class="hljs-string">"A"</span>, <span class="hljs-string">"Value A"</span>);
    cache.put(<span class="hljs-string">"B"</span>, <span class="hljs-string">"Value B"</span>);
    cache.put(<span class="hljs-string">"C"</span>, <span class="hljs-string">"Value C"</span>);
    
    <span class="hljs-comment">// è®¿é—®Aï¼Œä½¿Aæˆä¸ºæœ€è¿‘è®¿é—®çš„</span>
    cache.getIfPresent(<span class="hljs-string">"A"</span>);
    
    <span class="hljs-comment">// æ”¾å…¥Dï¼Œåº”è¯¥æ·˜æ±°Bï¼ˆæœ€ä¹…æœªè¢«è®¿é—®çš„ï¼‰</span>
    cache.put(<span class="hljs-string">"D"</span>, <span class="hljs-string">"Value D"</span>);
    
    <span class="hljs-comment">// éªŒè¯</span>
    assertNull(cache.getIfPresent(<span class="hljs-string">"B"</span>)); <span class="hljs-comment">// Bå·²è¢«æ·˜æ±°</span>
    assertNotNull(cache.getIfPresent(<span class="hljs-string">"A"</span>)); <span class="hljs-comment">// Aè¿˜åœ¨</span>
    assertNotNull(cache.getIfPresent(<span class="hljs-string">"C"</span>)); <span class="hljs-comment">// Cè¿˜åœ¨</span>
    assertNotNull(cache.getIfPresent(<span class="hljs-string">"D"</span>)); <span class="hljs-comment">// Dæ˜¯æ–°çš„</span>
}
</code></pre>
<p>LRUç®—æ³•å®ç°ç®€å•ï¼Œä½†åœ¨æŸäº›åœºæ™¯ä¸‹è¡¨ç°ä¸ä½³ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä¸€ä¸ªè¿‡å»å¾ˆçƒ­é—¨ä½†ç°åœ¨ä¸å†è®¿é—®çš„æ•°æ®å¯èƒ½é•¿æœŸå æ®ç¼“å­˜ï¼Œè€Œä¸€ä¸ªå‘¨æœŸæ€§è®¿é—®çš„æ•°æ®ï¼ˆæ¯”å¦‚æ¯5åˆ†é’Ÿè®¿é—®ä¸€æ¬¡ï¼‰å¯èƒ½å› ä¸ºæœ€è¿‘æ²¡æœ‰è¢«è®¿é—®è€Œè¢«æ·˜æ±°ã€‚</p>
<h3 data-id="heading-6">2.2 Caffeineçš„W-TinyLFUï¼šæ›´æ™ºèƒ½çš„é¢‘ç‡æ„ŸçŸ¥ç®—æ³•</h3>
<p>Caffeineé‡‡ç”¨äº†æ›´å…ˆè¿›çš„W-TinyLFUï¼ˆWindow Tiny Least Frequently Usedï¼‰ç®—æ³•ã€‚</p>
<p>è¿™ä¸ªç®—æ³•ç»“åˆäº†LFUï¼ˆLeast Frequently Usedï¼Œæœ€ä¸ç»å¸¸ä½¿ç”¨ï¼‰å’ŒLRUçš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li><strong>é¢‘ç‡ç»Ÿè®¡</strong>ï¼šä½¿ç”¨Count-Min Sketchæ•°æ®ç»“æ„é«˜æ•ˆç»Ÿè®¡è®¿é—®é¢‘ç‡</li>
<li><strong>æ—¶é—´è¡°å‡</strong>ï¼šé€šè¿‡ä¸€ç§å·§å¦™çš„æœºåˆ¶ä½¿æ—§çš„è®¿é—®è®°å½•é€æ¸å¤±æ•ˆ</li>
<li><strong>å‡†å…¥çª—å£</strong>ï¼šæ–°è¿›å…¥çš„æ¡ç›®å…ˆè¿›å…¥ä¸€ä¸ªå°çª—å£ï¼Œåªæœ‰é¢‘ç¹è®¿é—®çš„æ‰ä¼šè¿›å…¥ä¸»ç¼“å­˜</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Caffeineçš„W-TinyLFUç®—æ³•ä¼˜åŠ¿æ¼”ç¤º</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">demonstrateAccessPattern</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€ä¸ªå‘¨æœŸæ€§è®¿é—®æ¨¡å¼</span>
    <span class="hljs-comment">// æ•°æ®Aï¼šé¢‘ç¹è®¿é—®ï¼ˆçƒ­ç‚¹æ•°æ®ï¼‰</span>
    <span class="hljs-comment">// æ•°æ®Bï¼šå¶å°”è®¿é—®ï¼ˆæ¸©æ•°æ®ï¼‰</span>
    <span class="hljs-comment">// æ•°æ®Cï¼šåªè®¿é—®ä¸€æ¬¡ï¼ˆå†·æ•°æ®ï¼‰</span>
    
    LoadingCache&lt;String, String&gt; cache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">2</span>) <span class="hljs-comment">// åªèƒ½ç¼“å­˜2ä¸ªå…ƒç´ </span>
            .recordStats()  <span class="hljs-comment">// å¼€å¯ç»Ÿè®¡</span>
            .build(key -&gt; <span class="hljs-string">"Value for "</span> + key);
    
    <span class="hljs-comment">// è®¿é—®æ¨¡å¼ï¼šAï¼ˆçƒ­ç‚¹ï¼‰ï¼ŒBï¼ˆæ¸©ï¼‰ï¼ŒAï¼ŒCï¼ˆå†·ï¼‰ï¼ŒAï¼ŒB</span>
    cache.get(<span class="hljs-string">"A"</span>); <span class="hljs-comment">// Aè¿›å…¥ç¼“å­˜</span>
    cache.get(<span class="hljs-string">"B"</span>); <span class="hljs-comment">// Bè¿›å…¥ç¼“å­˜ï¼Œç¼“å­˜å·²æ»¡</span>
    
    <span class="hljs-comment">// å†æ¬¡è®¿é—®Aï¼Œä½¿å…¶æˆä¸ºçƒ­ç‚¹</span>
    cache.get(<span class="hljs-string">"A"</span>);
    
    <span class="hljs-comment">// è®¿é—®Cï¼ˆå†·æ•°æ®ï¼‰ï¼ŒW-TinyLFUä¼šæ·˜æ±°Bè€Œä¸æ˜¯A</span>
    <span class="hljs-comment">// å› ä¸ºAæ˜¯çƒ­ç‚¹æ•°æ®ï¼ŒBæ˜¯æ¸©æ•°æ®</span>
    cache.get(<span class="hljs-string">"C"</span>);
    
    <span class="hljs-comment">// éªŒè¯ï¼šAåº”è¯¥è¿˜åœ¨ï¼ŒBè¢«æ·˜æ±°ï¼ŒCå¯èƒ½åœ¨ä¹Ÿå¯èƒ½ä¸åœ¨ï¼ˆå–å†³äºå…·ä½“å®ç°ï¼‰</span>
    <span class="hljs-type">CacheStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> cache.stats();
    System.out.println(<span class="hljs-string">"å‘½ä¸­ç‡: "</span> + stats.hitRate());
    
    <span class="hljs-comment">// åœ¨å®é™…æµ‹è¯•ä¸­ï¼ŒW-TinyLFUé€šå¸¸æ¯”LRUæœ‰10-20%çš„å‘½ä¸­ç‡æå‡</span>
}
</code></pre>
<p>W-TinyLFUçš„æ ¸å¿ƒä¼˜åŠ¿åœ¨äºå®ƒä¸ä»…èƒ½è¯†åˆ«â€œæœ€è¿‘è®¿é—®â€çš„æ•°æ®ï¼Œè¿˜èƒ½è¯†åˆ«â€œé¢‘ç¹è®¿é—®â€çš„æ•°æ®ã€‚</p>
<p>å¯¹äºå®é™…åº”ç”¨ä¸­çš„å¤šç§è®¿é—®æ¨¡å¼ï¼ˆå¦‚å‘¨æœŸæ€§è®¿é—®ã€çªå‘è®¿é—®ç­‰ï¼‰ï¼ŒW-TinyLFUé€šå¸¸èƒ½æä¾›æ¯”LRUæ›´é«˜çš„å‘½ä¸­ç‡ã€‚</p>
<h2 data-id="heading-7">3. å¹¶å‘æ€§èƒ½ï¼šé”ä¼˜åŒ–å¸¦æ¥çš„å·¨å¤§å·®å¼‚</h2>
<p>é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œç¼“å­˜çš„å¹¶å‘æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
<p>Guava Cacheå’ŒCaffeineåœ¨å¹¶å‘æ§åˆ¶ä¸Šé‡‡ç”¨äº†ä¸åŒçš„ç­–ç•¥ï¼Œè¿™ä¹Ÿæ˜¯ä¸¤è€…æ€§èƒ½å·®å¼‚çš„é‡è¦åŸå› ã€‚</p>
<h3 data-id="heading-8">3.1 Guava Cacheçš„åˆ†æ®µé”ç­–ç•¥</h3>
<p>Guava Cacheå€Ÿé‰´äº†æ—©æœŸ<code>ConcurrentHashMap</code>çš„åˆ†æ®µé”ï¼ˆSegment Lockï¼‰ç­–ç•¥ã€‚</p>
<p>å®ƒå°†ç¼“å­˜åˆ†æˆå¤šä¸ªæ®µï¼ˆé»˜è®¤ä¸º4æ®µï¼‰ï¼Œæ¯ä¸ªæ®µç‹¬ç«‹åŠ é”ã€‚è¿™æ ·å¯ä»¥å‡å°‘é”ç«äº‰ï¼Œæé«˜å¹¶å‘æ€§èƒ½ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Guava Cacheå¹¶å‘æ€§èƒ½æ¼”ç¤º</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGuavaConcurrency</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-keyword">final</span> Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
            .maximumSize(<span class="hljs-number">1000</span>)
            .concurrencyLevel(<span class="hljs-number">4</span>) <span class="hljs-comment">// è®¾ç½®å¹¶å‘çº§åˆ«ä¸º4ï¼ˆ4ä¸ªæ®µï¼‰</span>
            .build();
    
    <span class="hljs-type">int</span> <span class="hljs-variable">threadCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(threadCount);
    <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(threadCount);
    
    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; threadCount; i++) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> i;
        executor.submit(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">1000</span>; j++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"key-"</span> + threadId + <span class="hljs-string">"-"</span> + j;
                cache.put(key, <span class="hljs-string">"value-"</span> + j);
                
                <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›è¯»å–æ“ä½œ</span>
                <span class="hljs-keyword">if</span> (j % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>) {
                    cache.getIfPresent(key);
                }
            }
            latch.countDown();
        });
    }
    
    latch.await();
    <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
    System.out.println(<span class="hljs-string">"Guava Cache 10çº¿ç¨‹å¹¶å‘æ“ä½œè€—æ—¶: "</span> + duration + <span class="hljs-string">"ms"</span>);
}
</code></pre>
<p>åˆ†æ®µé”è™½ç„¶æ¯”å…¨è¡¨é”æ€§èƒ½æ›´å¥½ï¼Œä½†åœ¨æç«¯é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼ŒåŒä¸€ä¸ªæ®µå†…çš„é”ç«äº‰ä»ç„¶å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚</p>
<h3 data-id="heading-9">3.2 Caffeineçš„ä¼˜åŒ–é”å’Œæ— é”ç»“æ„</h3>
<p>Caffeineåˆ©ç”¨äº†Java 8åŠæ›´é«˜ç‰ˆæœ¬çš„ç‰¹æ€§ï¼Œé‡‡ç”¨äº†ä¸€ç³»åˆ—ä¼˜åŒ–ç­–ç•¥ï¼š</p>
<ol>
<li><strong>ä¼˜åŒ–é”æœºåˆ¶</strong>ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ä½¿ç”¨æ›´é«˜æ•ˆçš„<code>StampedLock</code>ï¼Œå®ƒæ”¯æŒä¹è§‚è¯»ï¼Œåœ¨è¯»å¤šå†™å°‘çš„åœºæ™¯ä¸‹æ€§èƒ½æ›´å¥½</li>
<li><strong>æ— é”æ•°æ®ç»“æ„</strong>ï¼šä½¿ç”¨ç¯å½¢ç¼“å†²åŒºç­‰æ— é”æˆ–ä½é”ç«äº‰çš„æ•°æ®ç»“æ„æ¥è®°å½•è®¿é—®é¢‘ç‡</li>
<li><strong>æ›´å¥½çš„å†…å­˜å¸ƒå±€</strong>ï¼šä¼˜åŒ–å¯¹è±¡å†…å­˜å¸ƒå±€ï¼Œå‡å°‘ç¼“å­˜è¡Œä¼ªå…±äº«</li>
</ol>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Caffeineå¹¶å‘æ€§èƒ½æ¼”ç¤º</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCaffeineConcurrency</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {
    <span class="hljs-keyword">final</span> Cache&lt;String, String&gt; cache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">1000</span>)
            .executor(Runnable::run) <span class="hljs-comment">// ç®€å•æ‰§è¡Œå™¨ï¼Œå®é™…ç”Ÿäº§ç¯å¢ƒåº”ä½¿ç”¨åˆé€‚çš„çº¿ç¨‹æ± </span>
            .build();
    
    <span class="hljs-type">int</span> <span class="hljs-variable">threadCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;
    <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(threadCount);
    <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(threadCount);
    
    <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.currentTimeMillis();
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; threadCount; i++) {
        <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> i;
        executor.submit(() -&gt; {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">1000</span>; j++) {
                <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"key-"</span> + threadId + <span class="hljs-string">"-"</span> + j;
                cache.put(key, <span class="hljs-string">"value-"</span> + j);
                
                <span class="hljs-comment">// æ¨¡æ‹Ÿä¸€äº›è¯»å–æ“ä½œ</span>
                <span class="hljs-keyword">if</span> (j % <span class="hljs-number">10</span> == <span class="hljs-number">0</span>) {
                    cache.getIfPresent(key);
                }
            }
            latch.countDown();
        });
    }
    
    latch.await();
    <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.currentTimeMillis() - startTime;
    System.out.println(<span class="hljs-string">"Caffeine 10çº¿ç¨‹å¹¶å‘æ“ä½œè€—æ—¶: "</span> + duration + <span class="hljs-string">"ms"</span>);
    
    <span class="hljs-comment">// åœ¨ç›¸åŒç¡¬ä»¶ç¯å¢ƒä¸‹ï¼ŒCaffeineé€šå¸¸æ¯”Guava Cacheå¿«30%-50%</span>
}
</code></pre>
<p>åœ¨å®é™…çš„æ€§èƒ½æµ‹è¯•ä¸­ï¼ŒCaffeineåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹çš„ååé‡é€šå¸¸æ˜¯Guava Cacheçš„1.5å€ä»¥ä¸Šã€‚</p>
<p>è¿™éƒ¨åˆ†æ€§èƒ½æå‡ä¸»è¦æ¥è‡ªäºæ›´ç²¾ç»†çš„é”ä¼˜åŒ–å’Œæ›´å¥½çš„å†…å­˜è®¿é—®æ¨¡å¼ã€‚</p>
<h2 data-id="heading-10">4. å†…å­˜æ•ˆç‡ä¸GCå‹å¥½æ€§</h2>
<p>å¯¹äºJavaåº”ç”¨æ¥è¯´ï¼Œå†…å­˜ä½¿ç”¨æ•ˆç‡å’ŒGCå‹å¥½æ€§åŒæ ·é‡è¦ã€‚</p>
<p>ä¸è‰¯çš„ç¼“å­˜å®ç°å¯èƒ½å¯¼è‡´é¢‘ç¹çš„GCï¼Œè¿›è€Œå½±å“åº”ç”¨æ€§èƒ½ã€‚</p>
<h3 data-id="heading-11">4.1 Guava Cacheçš„å†…å­˜ä½¿ç”¨ç‰¹ç‚¹</h3>
<p>Guava Cacheå†…éƒ¨ä½¿ç”¨äº†ä¸€äº›åŒ…è£…å¯¹è±¡æ¥å­˜å‚¨ç¼“å­˜æ¡ç›®å’Œå¼•ç”¨å…³ç³»ï¼Œè¿™å¯èƒ½å¯¼è‡´é¢å¤–çš„å†…å­˜å¼€é”€ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å±•ç¤ºGuava Cacheå¯èƒ½çš„å†…å­˜å¼€é”€</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testGuavaMemoryUsage</span><span class="hljs-params">()</span> {
    Cache&lt;String, User&gt; cache = CacheBuilder.newBuilder()
            .maximumSize(<span class="hljs-number">10000</span>)
            .softValues() <span class="hljs-comment">// ä½¿ç”¨è½¯å¼•ç”¨ï¼Œå¯èƒ½æœ‰åŠ©äºGCï¼Œä½†ä¹Ÿæœ‰é¢å¤–å¼€é”€</span>
            .build();
    
    <span class="hljs-comment">// æ¯ä¸ªç¼“å­˜æ¡ç›®é™¤äº†å­˜å‚¨å®é™…æ•°æ®å¤–ï¼Œè¿˜éœ€è¦å­˜å‚¨ï¼š</span>
    <span class="hljs-comment">// 1. é”®çš„å¼•ç”¨</span>
    <span class="hljs-comment">// 2. å€¼çš„å¼•ç”¨ï¼ˆå¯èƒ½åŒ…è£…åœ¨SoftReferenceä¸­ï¼‰</span>
    <span class="hljs-comment">// 3. é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯ï¼ˆç”¨äºLRUç»´æŠ¤ï¼‰</span>
    <span class="hljs-comment">// 4. å…¶ä»–å…ƒæ•°æ®</span>
    
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">"user"</span> + i, <span class="hljs-string">"User "</span> + i, i);
        cache.put(user.getId(), user);
    }
    
    <span class="hljs-comment">// åœ¨å†…å­˜å—é™çš„ç¯å¢ƒä¸­ï¼ŒsoftValues()å¯èƒ½å¯¼è‡´ä¸å¯é¢„æµ‹çš„æ¸…é™¤è¡Œä¸º</span>
}
</code></pre>
<p>Guava Cacheçš„<code>softValues()</code>å’Œ<code>weakValues()</code>é€‰é¡¹è™½ç„¶å¯ä»¥æé«˜å†…å­˜æ•æ„Ÿåº¦ï¼Œä½†è¿™äº›å¼•ç”¨ç±»å‹çš„ä½¿ç”¨å¯èƒ½å¯¼è‡´ï¼š</p>
<ol>
<li>ä¸å¯é¢„æµ‹çš„ç¼“å­˜æ¸…é™¤è¡Œä¸º</li>
<li>é¢å¤–çš„å†…å­˜å¼€é”€ï¼ˆå¼•ç”¨å¯¹è±¡æœ¬èº«å ç”¨çš„ç©ºé—´ï¼‰</li>
<li>å¢åŠ GCçš„å¤æ‚æ€§</li>
</ol>
<h3 data-id="heading-12">4.2 Caffeineçš„å†…å­˜ä¼˜åŒ–</h3>
<p>Caffeineåœ¨å†…å­˜ä½¿ç”¨ä¸Šè¿›è¡Œäº†æ›´å¤šä¼˜åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Caffeineçš„å†…å­˜ä¼˜åŒ–ç¤ºä¾‹</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">testCaffeineMemoryOptimization</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// Caffeineä½¿ç”¨æ›´ç´§å‡‘çš„æ•°æ®ç»“æ„</span>
    LoadingCache&lt;String, User&gt; cache = Caffeine.newBuilder()
            .maximumSize(<span class="hljs-number">10000</span>)
            <span class="hljs-comment">// Caffeineé»˜è®¤ä¸ä½¿ç”¨è½¯å¼•ç”¨ï¼Œè€Œæ˜¯ä¾èµ–é«˜æ•ˆçš„æ·˜æ±°ç®—æ³•</span>
            <span class="hljs-comment">// è¿™æä¾›äº†æ›´å¯é¢„æµ‹çš„å†…å­˜ä½¿ç”¨è¡Œä¸º</span>
            .recordStats()
            .build(key -&gt; createUser(key));
    
    <span class="hljs-comment">// Caffeineçš„å†…éƒ¨ä¼˜åŒ–åŒ…æ‹¬ï¼š</span>
    <span class="hljs-comment">// 1. æ›´ç´§å‡‘çš„æ•°æ®ç»“æ„å¸ƒå±€</span>
    <span class="hljs-comment">// 2. é¿å…ä¸å¿…è¦çš„å¯¹è±¡åŒ…è£…</span>
    <span class="hljs-comment">// 3. ä½¿ç”¨æ•°ç»„è€Œéé“¾è¡¨å­˜å‚¨è®¿é—®é¢‘ç‡ä¿¡æ¯</span>
    <span class="hljs-comment">// 4. ä¼˜åŒ–çš„å“ˆå¸Œè¡¨å®ç°</span>
    
    <span class="hljs-comment">// å¡«å……ç¼“å­˜</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
        cache.get(<span class="hljs-string">"user"</span> + i);
    }
    
    <span class="hljs-comment">// è·å–å¹¶æ‰“å°ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="hljs-type">CacheStats</span> <span class="hljs-variable">stats</span> <span class="hljs-operator">=</span> cache.stats();
    System.out.println(<span class="hljs-string">"ç¼“å­˜å‘½ä¸­ç‡: "</span> + stats.hitRate());
    System.out.println(<span class="hljs-string">"åŠ è½½æ¬¡æ•°: "</span> + stats.loadCount());
    
    <span class="hljs-comment">// Caffeineçš„å†…å­˜å ç”¨é€šå¸¸æ¯”Guava Cacheä½15%-30%</span>
}

<span class="hljs-keyword">private</span> User <span class="hljs-title function_">createUser</span><span class="hljs-params">(String id)</span> {
    <span class="hljs-comment">// æ¨¡æ‹Ÿä»æ•°æ®åº“åŠ è½½ç”¨æˆ·</span>
    <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Integer.parseInt(id.replace(<span class="hljs-string">"user"</span>, <span class="hljs-string">""</span>));
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(id, <span class="hljs-string">"User "</span> + num, num);
}
</code></pre>
<p>Caffeineé€šè¿‡ç²¾å¿ƒè®¾è®¡çš„æ•°æ®ç»“æ„å’Œå†…å­˜å¸ƒå±€ï¼Œåœ¨æä¾›é«˜æ€§èƒ½çš„åŒæ—¶ï¼Œä¹Ÿå‡å°‘äº†å†…å­˜å ç”¨å’ŒGCå‹åŠ›ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œç¼“å­˜ç›¸åŒæ•°é‡çš„å¯¹è±¡æ—¶ï¼ŒCaffeineé€šå¸¸æ¯”Guava CacheèŠ‚çœ15%-30%çš„å†…å­˜ã€‚</p>
<h2 data-id="heading-13">5. APIè®¾è®¡ä¸åŠŸèƒ½ç‰¹æ€§å¯¹æ¯”</h2>
<p>é™¤äº†æ€§èƒ½å’Œç®—æ³•ï¼ŒAPIè®¾è®¡å’ŒåŠŸèƒ½ç‰¹æ€§ä¹Ÿæ˜¯é€‰æ‹©ç¼“å­˜åº“çš„é‡è¦è€ƒé‡å› ç´ ã€‚</p>
<h3 data-id="heading-14">5.1 åŸºæœ¬APIå¯¹æ¯”</h3>
<p>Guava Cacheå’ŒCaffeineçš„åŸºæœ¬APIéå¸¸ç›¸ä¼¼ï¼Œè¿™å¾—ç›ŠäºCaffeineå¯¹Guava Cache APIçš„å…¼å®¹æ€§è®¾è®¡ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Guava Cacheçš„åŸºæœ¬ç”¨æ³•</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GuavaCacheExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LoadingCache&lt;String, User&gt; cache;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">GuavaCacheExample</span><span class="hljs-params">()</span> {
        cache = CacheBuilder.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .recordStats()
                .build(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheLoader</span>&lt;String, User&gt;() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">load</span><span class="hljs-params">(String key)</span> <span class="hljs-keyword">throws</span> Exception {
                        <span class="hljs-keyword">return</span> loadUserFromDB(key);
                    }
                });
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String id)</span> <span class="hljs-keyword">throws</span> ExecutionException {
        <span class="hljs-keyword">return</span> cache.get(id);
    }
}

<span class="hljs-comment">// Caffeineçš„åŸºæœ¬ç”¨æ³•ï¼ˆä¸Guava Cacheéå¸¸ç›¸ä¼¼ï¼‰</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CaffeineCacheExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LoadingCache&lt;String, User&gt; cache;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CaffeineCacheExample</span><span class="hljs-params">()</span> {
        cache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .recordStats()
                .build(key -&gt; loadUserFromDB(key)); <span class="hljs-comment">// ä½¿ç”¨Lambdaè¡¨è¾¾å¼æ›´ç®€æ´</span>
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-keyword">return</span> cache.get(id);
    }
}
</code></pre>
<h3 data-id="heading-15">5.2 é«˜çº§ç‰¹æ€§å¯¹æ¯”</h3>
<p>Caffeineåœ¨Guava Cacheçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€äº›å®ç”¨çš„é«˜çº§ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Caffeineçš„é«˜çº§ç‰¹æ€§ç¤ºä¾‹</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CaffeineAdvancedFeatures</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// 1. å¼‚æ­¥åŠ è½½ï¼ˆéé˜»å¡ï¼‰</span>
        AsyncLoadingCache&lt;String, User&gt; asyncCache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .buildAsync(key -&gt; 
                    CompletableFuture.supplyAsync(() -&gt; loadUserFromDB(key)));
        
        <span class="hljs-comment">// å¼‚æ­¥è·å–ï¼Œä¸é˜»å¡è°ƒç”¨çº¿ç¨‹</span>
        CompletableFuture&lt;User&gt; userFuture = asyncCache.get(<span class="hljs-string">"user123"</span>);
        userFuture.thenAccept(user -&gt; {
            System.out.println(<span class="hljs-string">"ç”¨æˆ·æ•°æ®å·²åŠ è½½: "</span> + user.getName());
        });
        
        <span class="hljs-comment">// 2. å†™å…¥ååˆ·æ–°</span>
        LoadingCache&lt;String, User&gt; refreshCache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .refreshAfterWrite(<span class="hljs-number">1</span>, TimeUnit.MINUTES) <span class="hljs-comment">// å†™å…¥1åˆ†é’Ÿååˆ·æ–°</span>
                .build(key -&gt; loadUserFromDB(key));
        
        <span class="hljs-comment">// 3. åŸºäºæƒé‡çš„å®¹é‡é™åˆ¶</span>
        LoadingCache&lt;String, LargeObject&gt; weightedCache = Caffeine.newBuilder()
                .maximumWeight(<span class="hljs-number">10000</span>) <span class="hljs-comment">// æœ€å¤§æƒé‡</span>
                .weigher((String key, LargeObject value) -&gt; value.getSize())
                .build(key -&gt; loadLargeObject(key));
        
        <span class="hljs-comment">// 4. å¼±å¼•ç”¨é”®/å€¼</span>
        Cache&lt;String, User&gt; weakCache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">1000</span>)
                .weakKeys()    <span class="hljs-comment">// å¼±å¼•ç”¨é”®</span>
                .weakValues()  <span class="hljs-comment">// å¼±å¼•ç”¨å€¼</span>
                .build();
    }
}
</code></pre>
<p>Caffeineçš„å¼‚æ­¥åŠ è½½ç‰¹æ€§ç‰¹åˆ«æœ‰ç”¨ï¼Œå®ƒå…è®¸ç¼“å­˜æœªå‘½ä¸­æ—¶ä¸é˜»å¡è°ƒç”¨çº¿ç¨‹ï¼Œè€Œæ˜¯ç«‹å³è¿”å›ä¸€ä¸ª<code>CompletableFuture</code>ã€‚</p>
<p>è¿™å¯¹äºé«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„åº”ç”¨åœºæ™¯éå¸¸æœ‰ä»·å€¼ã€‚</p>
<h2 data-id="heading-16">6. æ€§èƒ½å¯¹æ¯”å®æµ‹æ•°æ®</h2>
<p>ç†è®ºåˆ†æå›ºç„¶é‡è¦ï¼Œä½†å®é™…æ€§èƒ½æ•°æ®æ›´æœ‰è¯´æœåŠ›ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬åœ¨å®é™…é¡¹ç›®ä¸­æµ‹è¯•å¾—åˆ°çš„æ•°æ®ï¼ˆæµ‹è¯•ç¯å¢ƒï¼š8æ ¸CPUï¼Œ16GBå†…å­˜ï¼ŒJDK 11ï¼‰ï¼š</p>
<h3 data-id="heading-17">6.1 è¯»å†™æ··åˆåœºæ™¯æµ‹è¯•</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ€§èƒ½æµ‹è¯•ä»£ç æ¡†æ¶</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CacheBenchmark</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">KEY_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">THREAD_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">8</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">OPERATIONS_PER_THREAD</span> <span class="hljs-operator">=</span> <span class="hljs-number">100000</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">benchmarkGuava</span><span class="hljs-params">()</span> {
        Cache&lt;String, String&gt; cache = CacheBuilder.newBuilder()
                .maximumSize(<span class="hljs-number">50000</span>)
                .concurrencyLevel(<span class="hljs-number">8</span>)
                .recordStats()
                .build();
        
        runBenchmark(cache, <span class="hljs-string">"Guava Cache"</span>);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">benchmarkCaffeine</span><span class="hljs-params">()</span> {
        Cache&lt;String, String&gt; cache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">50000</span>)
                .recordStats()
                .build();
        
        runBenchmark(cache, <span class="hljs-string">"Caffeine"</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">runBenchmark</span><span class="hljs-params">(Cache&lt;String, String&gt; cache, String cacheName)</span> {
        <span class="hljs-comment">// é¢„çƒ­</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10000</span>; i++) {
            cache.put(<span class="hljs-string">"key"</span> + i, <span class="hljs-string">"value"</span> + i);
        }
        
        <span class="hljs-comment">// å¹¶å‘æµ‹è¯•</span>
        <span class="hljs-type">long</span> <span class="hljs-variable">startTime</span> <span class="hljs-operator">=</span> System.nanoTime();
        
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> Executors.newFixedThreadPool(THREAD_COUNT);
        <span class="hljs-type">CountDownLatch</span> <span class="hljs-variable">latch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CountDownLatch</span>(THREAD_COUNT);
        
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">t</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; t &lt; THREAD_COUNT; t++) {
            <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">threadId</span> <span class="hljs-operator">=</span> t;
            executor.submit(() -&gt; {
                <span class="hljs-type">Random</span> <span class="hljs-variable">random</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Random</span>();
                <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; OPERATIONS_PER_THREAD; i++) {
                    <span class="hljs-type">int</span> <span class="hljs-variable">keyIndex</span> <span class="hljs-operator">=</span> random.nextInt(KEY_COUNT);
                    <span class="hljs-type">String</span> <span class="hljs-variable">key</span> <span class="hljs-operator">=</span> <span class="hljs-string">"key"</span> + keyIndex;
                    
                    <span class="hljs-keyword">if</span> (random.nextDouble() &lt; <span class="hljs-number">0.8</span>) { <span class="hljs-comment">// 80%è¯»æ“ä½œ</span>
                        cache.getIfPresent(key);
                    } <span class="hljs-keyword">else</span> { <span class="hljs-comment">// 20%å†™æ“ä½œ</span>
                        cache.put(key, <span class="hljs-string">"new-value-"</span> + threadId + <span class="hljs-string">"-"</span> + i);
                    }
                }
                latch.countDown();
            });
        }
        
        <span class="hljs-keyword">try</span> {
            latch.await();
        } <span class="hljs-keyword">catch</span> (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        
        <span class="hljs-type">long</span> <span class="hljs-variable">duration</span> <span class="hljs-operator">=</span> System.nanoTime() - startTime;
        <span class="hljs-type">double</span> <span class="hljs-variable">opsPerSecond</span> <span class="hljs-operator">=</span> (THREAD_COUNT * OPERATIONS_PER_THREAD) / (duration / <span class="hljs-number">1e9</span>);
        
        System.out.printf(<span class="hljs-string">"%s ååé‡: %.2f ops/s%n"</span>, cacheName, opsPerSecond);
        executor.shutdown();
    }
}
</code></pre>
<h3 data-id="heading-18">6.2 å®æµ‹ç»“æœæ±‡æ€»</h3>
<p>åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­ï¼Œå¾—åˆ°äº†ä»¥ä¸‹æ•°æ®ï¼š</p>



































<table><thead><tr><th>æµ‹è¯•åœºæ™¯</th><th>Guava Cache ååé‡</th><th>Caffeine ååé‡</th><th>æ€§èƒ½æå‡</th></tr></thead><tbody><tr><td>çº¯è¯»åœºæ™¯ï¼ˆ100%è¯»ï¼‰</td><td>1,200,000 ops/s</td><td>2,100,000 ops/s</td><td>+75%</td></tr><tr><td>è¯»å†™æ··åˆï¼ˆ80%è¯»/20%å†™ï¼‰</td><td>850,000 ops/s</td><td>1,550,000 ops/s</td><td>+82%</td></tr><tr><td>çº¯å†™åœºæ™¯ï¼ˆ100%å†™ï¼‰</td><td>600,000 ops/s</td><td>1,100,000 ops/s</td><td>+83%</td></tr><tr><td>å‘½ä¸­ç‡æµ‹è¯•ï¼ˆçœŸå®ä¸šåŠ¡è´Ÿè½½ï¼‰</td><td>71.5%</td><td>86.2%</td><td>+14.7ä¸ªç™¾åˆ†ç‚¹</td></tr></tbody></table>
<p>ä»æµ‹è¯•æ•°æ®å¯ä»¥çœ‹å‡ºï¼ŒCaffeineåœ¨æ‰€æœ‰æµ‹è¯•åœºæ™¯ä¸‹éƒ½æ˜¾è‘—ä¼˜äºGuava Cacheï¼Œç‰¹åˆ«æ˜¯åœ¨é«˜å¹¶å‘å†™å…¥åœºæ™¯ä¸‹ï¼Œæ€§èƒ½ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-19">7. å®é™…é¡¹ç›®è¿ç§»æŒ‡å—</h2>
<p>æœ‰äº›å°ä¼™ä¼´å¯èƒ½ä¼šé—®ï¼šâ€œæˆ‘çš„é¡¹ç›®å·²ç»åœ¨ç”¨Guava Cacheäº†ï¼Œè¿ç§»åˆ°Caffeineéº»çƒ¦å—ï¼Ÿâ€</p>
<p>æˆ‘çš„å›ç­”æ˜¯ï¼š<strong>è¿ç§»æˆæœ¬å¾ˆä½ï¼Œä½†æ”¶ç›Šå¾ˆé«˜</strong>ã€‚</p>
<h3 data-id="heading-20">7.1 ä¾èµ–å˜æ›´</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- ç§»é™¤Guava Cacheä¾èµ–ï¼ˆå¦‚æœåªç”¨äº†ç¼“å­˜éƒ¨åˆ†ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.google.guava<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>guava<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- æ³¨æ„ï¼šå¦‚æœé¡¹ç›®è¿˜ä½¿ç”¨äº†Guavaçš„å…¶ä»–åŠŸèƒ½ï¼Œä¸è¦ç§»é™¤æ•´ä¸ªä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

<span class="hljs-comment">&lt;!-- æ·»åŠ Caffeineä¾èµ– --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.github.ben-manes.caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>caffeine<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.8<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span> <span class="hljs-comment">&lt;!-- ä½¿ç”¨æœ€æ–°ç¨³å®šç‰ˆ --&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h3 data-id="heading-21">7.2 ä»£ç è¿ç§»ç¤ºä¾‹</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// Guava CacheåŸå§‹ä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceWithGuava</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> LoadingCache&lt;String, User&gt; userCache;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserServiceWithGuava</span><span class="hljs-params">()</span> {
        userCache = CacheBuilder.newBuilder()
                .maximumSize(<span class="hljs-number">10000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .refreshAfterWrite(<span class="hljs-number">1</span>, TimeUnit.MINUTES)
                .recordStats()
                .build(<span class="hljs-keyword">new</span> <span class="hljs-title class_">CacheLoader</span>&lt;String, User&gt;() {
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">load</span><span class="hljs-params">(String userId)</span> {
                        <span class="hljs-keyword">return</span> loadUserFromDB(userId);
                    }
                    
                    <span class="hljs-meta">@Override</span>
                    <span class="hljs-keyword">public</span> ListenableFuture&lt;User&gt; <span class="hljs-title function_">reload</span><span class="hljs-params">(String key, User oldValue)</span> {
                        <span class="hljs-keyword">return</span> reloadUser(key);
                    }
                });
    }
    
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String userId)</span> <span class="hljs-keyword">throws</span> ExecutionException {
        <span class="hljs-keyword">return</span> userCache.get(userId);
    }
}

<span class="hljs-comment">// è¿ç§»åçš„Caffeineä»£ç </span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserServiceWithCaffeine</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> AsyncLoadingCache&lt;String, User&gt; userCache;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UserServiceWithCaffeine</span><span class="hljs-params">()</span> {
        userCache = Caffeine.newBuilder()
                .maximumSize(<span class="hljs-number">10000</span>)
                .expireAfterWrite(<span class="hljs-number">10</span>, TimeUnit.MINUTES)
                .refreshAfterWrite(<span class="hljs-number">1</span>, TimeUnit.MINUTES)
                .recordStats()
                <span class="hljs-comment">// å¼‚æ­¥æ„å»ºï¼Œè¿”å›CompletableFuture</span>
                .buildAsync((key, executor) -&gt; 
                    CompletableFuture.supplyAsync(() -&gt; loadUserFromDB(key), executor));
    }
    
    <span class="hljs-keyword">public</span> CompletableFuture&lt;User&gt; <span class="hljs-title function_">getUserAsync</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">return</span> userCache.get(userId);
    }
    
    <span class="hljs-comment">// å¦‚æœéœ€è¦åŒæ­¥APIï¼Œå¯ä»¥è¿™æ ·åŒ…è£…</span>
    <span class="hljs-keyword">public</span> User <span class="hljs-title function_">getUser</span><span class="hljs-params">(String userId)</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> userCache.get(userId).get();
        } <span class="hljs-keyword">catch</span> (InterruptedException | ExecutionException e) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"Failed to load user: "</span> + userId, e);
        }
    }
}
</code></pre>
<h3 data-id="heading-22">7.3 è¿ç§»æ³¨æ„äº‹é¡¹</h3>
<ol>
<li><strong>é€æ­¥è¿ç§»</strong>ï¼šå¤§å‹é¡¹ç›®å¯ä»¥é€æ­¥è¿ç§»ï¼Œå…ˆè¿ç§»æ€§èƒ½ç“¶é¢ˆæœ€æ˜æ˜¾çš„éƒ¨åˆ†</li>
<li><strong>ç›‘æ§å¯¹æ¯”</strong>ï¼šè¿ç§»å‰ååšå¥½æ€§èƒ½ç›‘æ§å’Œå¯¹æ¯”ï¼Œé‡åŒ–è¿ç§»æ•ˆæœ</li>
<li><strong>æµ‹è¯•è¦†ç›–</strong>ï¼šç¡®ä¿è¿ç§»ååŸæœ‰åŠŸèƒ½æ­£å¸¸ï¼Œç‰¹åˆ«æ˜¯ç¼“å­˜å¤±æ•ˆã€åˆ·æ–°ç­‰è¾¹ç•Œæƒ…å†µ</li>
<li><strong>é…ç½®è°ƒæ•´</strong>ï¼šCaffeineçš„æŸäº›é…ç½®å¯èƒ½ä¸Guava Cacheä¸åŒï¼Œéœ€è¦é€‚å½“è°ƒæ•´</li>
</ol>
<h2 data-id="heading-23">8. å¦‚ä½•é€‰å‹ï¼Ÿ</h2>
<p>ç»è¿‡å…¨é¢çš„å¯¹æ¯”åˆ†æï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥å›ç­”æœ€åˆçš„é—®é¢˜ï¼šGuava Cacheå’ŒCaffeineï¼Œå“ªä¸ªæ›´å¥½ï¼Ÿ</p>
<h3 data-id="heading-24">8.1 ä»€ä¹ˆæ—¶å€™é€‰æ‹©Caffeineï¼Ÿ</h3>
<p><strong>æ¯«ä¸çŠ¹è±«åœ°é€‰æ‹©Caffeineï¼Œå¦‚æœä½ çš„é¡¹ç›®ï¼š</strong></p>
<ol>
<li><strong>å¯¹æ€§èƒ½è¦æ±‚æé«˜</strong>ï¼šç‰¹åˆ«æ˜¯é«˜å¹¶å‘ã€ä½å»¶è¿Ÿçš„æ ¸å¿ƒä¸šåŠ¡åœºæ™¯</li>
<li><strong>éœ€è¦é«˜ç¼“å­˜å‘½ä¸­ç‡</strong>ï¼šä¸šåŠ¡è®¿é—®æ¨¡å¼å¤æ‚ï¼Œæœ‰å‘¨æœŸæ€§ã€çªå‘æ€§è®¿é—®ç‰¹å¾</li>
<li><strong>ä½¿ç”¨Java 8åŠä»¥ä¸Šç‰ˆæœ¬</strong>ï¼šCaffeineå……åˆ†åˆ©ç”¨äº†ç°ä»£Javaçš„ç‰¹æ€§</li>
<li><strong>éœ€è¦å¼‚æ­¥/éé˜»å¡æ“ä½œ</strong>ï¼šå¸Œæœ›é¿å…ç¼“å­˜æœªå‘½ä¸­æ—¶çš„çº¿ç¨‹é˜»å¡</li>
<li><strong>ä½¿ç”¨Spring Boot 2.x+</strong>ï¼šSpringå·²ç»å°†Caffeineä½œä¸ºé»˜è®¤ç¼“å­˜å®ç°</li>
</ol>
<h3 data-id="heading-25">8.2 ä»€ä¹ˆæ—¶å€™å¯ä»¥è€ƒè™‘Guava Cacheï¼Ÿ</h3>
<p><strong>åªæœ‰åœ¨ä»¥ä¸‹ç‰¹å®šæƒ…å†µä¸‹ï¼Œæ‰è€ƒè™‘ä½¿ç”¨Guava Cacheï¼š</strong></p>
<ol>
<li><strong>ç»´æŠ¤é—ç•™ç³»ç»Ÿ</strong>ï¼šç³»ç»ŸåŸºäºè¾ƒè€çš„Javaç‰ˆæœ¬ï¼ˆå¦‚Java 7ï¼‰ï¼Œæ— æ³•å‡çº§</li>
<li><strong>é¡¹ç›®å·²æ·±åº¦ç»‘å®šGuava</strong>ï¼šé™¤äº†ç¼“å­˜ï¼Œè¿˜å¤§é‡ä½¿ç”¨äº†Guavaçš„å…¶ä»–åŠŸèƒ½ï¼Œä¸”ä¸å¸Œæœ›å¢åŠ æ–°ä¾èµ–</li>
<li><strong>ç¼“å­˜ä½¿ç”¨æå…¶ç®€å•</strong>ï¼šåªæ˜¯ç®€å•çš„é”®å€¼å­˜å‚¨ï¼Œæ²¡æœ‰æ€§èƒ½è¦æ±‚</li>
<li><strong>çŸ­æœŸ/ä¸´æ—¶é¡¹ç›®</strong>ï¼šé¡¹ç›®ç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œä¸å€¼å¾—å¼•å…¥æ–°æŠ€æœ¯æ ˆ</li>
</ol>
<p>æ›´å¤šé¡¹ç›®å®æˆ˜åœ¨ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.susan.net.cn" target="_blank" title="http://www.susan.net.cn" ref="nofollow noopener noreferrer">Javaçªå‡»é˜Ÿ</a></p>
<h3 data-id="heading-26">8.3 æˆ‘çš„å»ºè®®</h3>
<p>åŸºäºæˆ‘å¤šå¹´çš„æ¶æ„ç»éªŒç»™å‡ºä»¥ä¸‹å»ºè®®ï¼š</p>
<ol>
<li><strong>æ–°é¡¹ç›®ä¸€å¾‹ä½¿ç”¨Caffeine</strong>ï¼šä»é¡¹ç›®å¼€å§‹å°±å»ºç«‹æ­£ç¡®çš„æŠ€æœ¯é€‰å‹</li>
<li><strong>ç°æœ‰é¡¹ç›®åˆ¶å®šè¿ç§»è®¡åˆ’</strong>ï¼šå°†Guava Cacheè¿ç§»åˆ°Caffeineä½œä¸ºæŠ€æœ¯å€ºåŠ¡æ¸…ç†çš„ä¸€éƒ¨åˆ†</li>
<li><strong>åˆç†é…ç½®ç¼“å­˜å‚æ•°</strong>ï¼šæ ¹æ®ä¸šåŠ¡ç‰¹ç‚¹è°ƒæ•´ç¼“å­˜å¤§å°ã€è¿‡æœŸæ—¶é—´ã€åˆ·æ–°ç­–ç•¥ç­‰</li>
<li><strong>å»ºç«‹ç¼“å­˜ç›‘æ§</strong>ï¼šç›‘æ§ç¼“å­˜å‘½ä¸­ç‡ã€åŠ è½½æ—¶é—´ã€æ·˜æ±°æƒ…å†µç­‰å…³é”®æŒ‡æ ‡</li>
<li><strong>è€ƒè™‘å¤šçº§ç¼“å­˜æ¶æ„</strong>ï¼šå¯¹äºæç«¯æ€§èƒ½è¦æ±‚çš„åœºæ™¯ï¼Œå¯ä»¥ç»“åˆä½¿ç”¨æœ¬åœ°ç¼“å­˜ï¼ˆCaffeineï¼‰å’Œåˆ†å¸ƒå¼ç¼“å­˜ï¼ˆRedisï¼‰</li>
</ol>
<p>Caffeineä½œä¸ºGuava Cacheçš„ç°ä»£åŒ–ç»§æ‰¿è€…ï¼Œå·²ç»åœ¨æ€§èƒ½ã€åŠŸèƒ½å’Œå¯ç»´æŠ¤æ€§ä¸Šå…¨é¢è¶…è¶Šäº†å‰è¾ˆã€‚</p>
<p>å¯¹äºç»å¤§å¤šæ•°Javaé¡¹ç›®æ¥è¯´ï¼ŒCaffeineæ˜¯å½“å‰æœ¬åœ°ç¼“å­˜çš„æœ€ä½³é€‰æ‹©ã€‚</p>
<p>å¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¸®åŠ©ä½ åšå‡ºæ›´æ˜æ™ºçš„æŠ€æœ¯å†³ç­–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¸¿è’™Nextå¼€å‘å®æˆ˜ï¼šå¦‚ä½•æ‰“é€ ä¸æ»‘çš„è¿åŠ¨èŠ‚æ‹å™¨â€”â€”é«˜é¢‘éŸ³æ•ˆæ’­æ”¾ä¸åå°ä¿æ´»é¿å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7602166907571404838</link>    <guid>https://juejin.cn/post/7602166907571404838</guid>    <pubDate>2026-02-03T02:38:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602166907571404838" data-draft-id="7602177113685770291" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¸¿è’™Nextå¼€å‘å®æˆ˜ï¼šå¦‚ä½•æ‰“é€ ä¸æ»‘çš„è¿åŠ¨èŠ‚æ‹å™¨â€”â€”é«˜é¢‘éŸ³æ•ˆæ’­æ”¾ä¸åå°ä¿æ´»é¿å‘æŒ‡å—"/> <meta itemprop="keywords" content="HarmonyOS"/> <meta itemprop="datePublished" content="2026-02-03T02:38:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç‹äºŒè›‹ä¸ä»–çš„å¼ å¤§èŠ±"/> <meta itemprop="url" content="https://juejin.cn/user/2991105780760334"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¸¿è’™Nextå¼€å‘å®æˆ˜ï¼šå¦‚ä½•æ‰“é€ ä¸æ»‘çš„è¿åŠ¨èŠ‚æ‹å™¨â€”â€”é«˜é¢‘éŸ³æ•ˆæ’­æ”¾ä¸åå°ä¿æ´»é¿å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2991105780760334/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç‹äºŒè›‹ä¸ä»–çš„å¼ å¤§èŠ±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:38:54.000Z" title="Tue Feb 03 2026 02:38:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šçœ‹ä¼¼ç®€å•çš„â€œèŠ‚æ‹å™¨â€åŠŸèƒ½ï¼Œåœ¨é¸¿è’™Nextï¼ˆOpenHarmonyï¼‰ç³»ç»Ÿä¸Šå´æš—è—ç„æœºã€‚ä»èŠ‚å¥ä¸ç¨³åˆ°åå°æ–­è¿ï¼Œä»å•çº¿ç¨‹ç“¶é¢ˆåˆ°èµ„æºç«äº‰ï¼Œæœ¬æ–‡æ·±åº¦å¤ç›˜äº†åœ¨å¼€å‘è¿åŠ¨ç±»Appé«˜é¢‘éŸ³æ•ˆåŠŸèƒ½æ—¶é‡åˆ°çš„â€œä¹ä¹å…«åä¸€éš¾â€ï¼Œå¹¶æä¾›äº†ä¸€å¥—åŒ…å«<strong>å¤šå®ä¾‹è½®è¯¢SoundPool</strong>ã€<strong>Dartç«¯å¼‚æ­¥è§£è€¦</strong>ä»¥åŠ<strong>é™éŸ³ä¿æ´»é»‘ç§‘æŠ€</strong>çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">ä¸€ã€ èƒŒæ™¯ï¼šå½“â€œå˜€å—’â€å£°é‡ä¸Šæ–°ç³»ç»Ÿ</h2>
<p>åœ¨æœ€è¿‘çš„Flutteré¡¹ç›®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç§»æ¤ä¸€ä¸ªè¿åŠ¨èŠ‚æ‹å™¨åŠŸèƒ½åˆ°é¸¿è’™Nextå¹³å°ã€‚éœ€æ±‚å¾ˆæ˜ç¡®ï¼š<strong>é«˜BPMï¼ˆæ¯åˆ†é’Ÿ180æ¬¡ä»¥ä¸Šï¼‰ç¨³å®šæ’­æ”¾</strong>ã€<strong>æä½å»¶è¿Ÿ</strong>ã€<strong>æ”¯æŒåå°è¿è¡Œ</strong>ã€‚</p>
<p>èµ·åˆæˆ‘ä»¬ä»¥ä¸ºè¿™åªæ˜¯ç®€å•çš„ <code>play()</code> è°ƒç”¨ï¼Œç»“æœç°å®ç‹ ç‹ æ‰“äº†ä¸€å·´æŒï¼š</p>
<ol>
<li><strong>èŠ‚å¥åƒé†‰æ±‰</strong>ï¼šå£°éŸ³å¿½å¿«å¿½æ…¢ï¼Œå®Œå…¨å¡ä¸ä½æ‹å­ã€‚</li>
<li><strong>é«˜é¢‘å°±å¡æ­»</strong>ï¼šè°ƒåˆ°é«˜BPMæ—¶ï¼Œå£°éŸ³ç›´æ¥æ¶ˆå¤±æˆ–å„ç§çˆ†éŸ³ã€‚</li>
<li><strong>åˆ‡åå°å³æŒ‚</strong>ï¼šåº”ç”¨ä¸€é€€åˆ°åå°ï¼ŒèŠ‚æ‹å™¨ç«‹åˆ»å“‘ç«ï¼Œç³»ç»Ÿé€šçŸ¥æ ä¹Ÿç©ºç©ºå¦‚ä¹Ÿã€‚</li>
</ol>
<p>è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†è®°å½•æˆ‘ä»¬æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥å¡«å¹³è¿™äº›å‘çš„ã€‚</p>
<h2 data-id="heading-1">äºŒã€ æŒ‘æˆ˜ä¸€ï¼šå‘Šåˆ« AVPlayerï¼Œæ‹¥æŠ± SoundPool</h2>
<h3 data-id="heading-2">1.1 é—®é¢˜ç°è±¡</h3>
<p>æœ€å¼€å§‹æˆ‘ä»¬ç›´æ¥å¤ç”¨äº†ç”¨äºæ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„ <code>AVPlayer</code>ã€‚ä½†åœ¨æµ‹è¯•ä¸­å‘ç°ï¼Œ<code>AVPlayer</code> æ˜¯ä¸ºé•¿éŸ³é¢‘è®¾è®¡çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªå®Œæ•´çš„çŠ¶æ€æœºï¼ˆIdle -&gt; Initialized -&gt; Prepared -&gt; Playingï¼‰ï¼Œæ¯æ¬¡æ’­æ”¾å‰çš„å‡†å¤‡æ—¶é—´åœ¨å‡ åæ¯«ç§’çº§ã€‚å¯¹äºéŸ³ä¹æ’­æ”¾å™¨è¿™æ²¡é—®é¢˜ï¼Œä½†å¯¹äºé—´éš”åªæœ‰300msï¼ˆ200 BPMï¼‰çš„èŠ‚æ‹å™¨ï¼Œè¿™å‡ åæ¯«ç§’çš„æ³¢åŠ¨å°±æ˜¯è‡´å‘½çš„ã€‚</p>
<h3 data-id="heading-3">1.2 è§£å†³æ–¹æ¡ˆ</h3>
<p>æˆ‘ä»¬åœ¨åŸç”Ÿæ’ä»¶å±‚ï¼ˆPluginï¼‰å¼•å…¥äº† <code>SoundPool</code>ã€‚
<code>SoundPool</code> (é¸¿è’™å¯¹åº” <code>media.createSoundPool</code>) çš„è®¾è®¡åˆè¡·å°±æ˜¯ä¸ºäº†æ¸¸æˆéŸ³æ•ˆå’ŒæŒ‰é”®éŸ³ï¼Œå®ƒå°†éŸ³é¢‘è§£ç ååŠ è½½åˆ°å†…å­˜ä¸­ï¼Œæ’­æ”¾æ—¶å‡ ä¹æ˜¯é›¶å»¶è¿Ÿã€‚</p>
<p><strong>å…³é”®ä»£ç è°ƒæ•´</strong>ï¼š
æˆ‘ä»¬åœ¨ Flutter ç«¯å®šä¹‰äº† <code>isShort</code> æ ‡å¿—ä½ï¼Œå‘Šè¯‰åŸç”Ÿå±‚ï¼šâ€œè¿™æ˜¯ä¸€æ®µçŸ­éŸ³æ•ˆï¼Œåˆ«ç”¨é‡å‹æ­¦å™¨ï¼Œç”¨è½»é‡çº§çš„ SoundPoolã€‚â€</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// TtsSdkPlugin.ets</span>
<span class="hljs-keyword">if</span> (isShort === <span class="hljs-literal">true</span>) {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">playShort</span>(path, isAsset); <span class="hljs-comment">// èµ° SoundPool é€šé“</span>
} <span class="hljs-keyword">else</span> {
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">play</span>(path, isAsset);      <span class="hljs-comment">// èµ° AVPlayer é€šé“</span>
}
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€ æŒ‘æˆ˜äºŒï¼šDart ä¸åŸç”Ÿçš„â€œå¼‚åœ°æ‹â€å»¶è¿Ÿ</h2>
<h3 data-id="heading-5">2.1 é—®é¢˜ç°è±¡</h3>
<p>æ¢äº† <code>SoundPool</code> åï¼Œå•æ¬¡æ’­æ”¾å¿«äº†ï¼Œä½†è¿ç»­æ’­æ”¾è¿˜æ˜¯ä¸ç¨³ã€‚æ’æŸ¥å‘ç°ï¼ŒFlutter ç«¯çš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// Flutter ç«¯</span>
<span class="hljs-keyword">await</span> _channel.invokeMethod(<span class="hljs-string">'play'</span>, ...); <span class="hljs-comment">// ç­‰å¾…åŸç”Ÿè¿”å›</span>
</code></pre>
<p>Dart çš„ <code>Timer</code> å®šæ—¶è§¦å‘ï¼Œä½† <code>invokeMethod</code> æ˜¯è·¨ç«¯é€šä¿¡ï¼ˆPlatform Channelï¼‰ã€‚å¦‚æœä½¿ç”¨äº† <code>await</code>ï¼ŒDart çº¿ç¨‹å°±ä¼šç­‰å¾…åŸç”Ÿå±‚æ‰§è¡Œå®Œæ¯•å¹¶è¿”å›ç»“æœã€‚ä¸€æ—¦åŸç”Ÿå±‚ç¨å¾®å¡é¡¿ï¼ˆæ¯”å¦‚ä¸»çº¿ç¨‹ç¹å¿™ï¼‰ï¼ŒDart çš„ä¸‹ä¸€æ¬¡ Timer å›è°ƒå°±ä¼šè¢«æ¨è¿Ÿï¼Œå¯¼è‡´è¯¯å·®ä¸æ–­ç´¯ç§¯ã€‚</p>
<h3 data-id="heading-6">2.2 è§£å†³æ–¹æ¡ˆï¼šå‘åå³å¿˜ï¼ˆFire-and-Forgetï¼‰</h3>
<p>å¯¹äºèŠ‚æ‹å™¨è¿™ç§åœºæ™¯ï¼Œ<strong>å‡†æ—¶å‘é€æŒ‡ä»¤</strong>æ¯”<strong>çŸ¥é“æŒ‡ä»¤æ‰§è¡Œç»“æœ</strong>æ›´é‡è¦ã€‚æˆ‘ä»¬æœæ–­å»æ‰äº† <code>await</code>ã€‚</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// ä¼˜åŒ–åçš„ Flutter ç«¯</span>
<span class="hljs-comment">// ä¸ä½¿ç”¨ awaitï¼Œé¿å…é˜»å¡ Dart çº¿ç¨‹å¯¼è‡´èŠ‚å¥ä¸ç¨³</span>
_channel.invokeMethod(<span class="hljs-string">'play'</span>, {<span class="hljs-string">'path'</span>: fullPath, <span class="hljs-string">'isAsset'</span>: <span class="hljs-keyword">true</span>, <span class="hljs-string">'isShort'</span>: <span class="hljs-keyword">true</span>});
</code></pre>
<p>è¿™ä¸€æ”¹åŠ¨ï¼Œç›´æ¥è®© Dart ç«¯çš„è®¡æ—¶å™¨æ‘†è„±äº†åŸç”Ÿå±‚çš„æ€§èƒ½æŸç¼šï¼ŒèŠ‚å¥æ„Ÿç¬é—´æå‡äº†ä¸€ä¸ªæ¡£æ¬¡ã€‚</p>
<h2 data-id="heading-7">å››ã€ æŒ‘æˆ˜ä¸‰ï¼šå•æ ¸éš¾æ•Œåƒå†›ï¼Œå¤šå®ä¾‹è½®è¯¢æˆ˜æœ¯</h2>
<h3 data-id="heading-8">3.1 é—®é¢˜ç°è±¡</h3>
<p>å½“ BPM é£™å‡åˆ° 180 ç”šè‡³æ›´é«˜æ—¶ï¼Œæˆ‘ä»¬å‘ç°æ—¥å¿—é‡Œå¼€å§‹ç–¯ç‹‚æŠ¥é”™ï¼Œå¶å°”è¿˜ä¼šå‡ºç°ä¸¢éŸ³ã€‚
åŸå› åœ¨äºï¼Œè™½ç„¶ <code>SoundPool</code> æ˜¯ä¸ºçŸ­éŸ³é¢‘è®¾è®¡çš„ï¼Œä½†åœ¨æé«˜é¢‘çš„è§¦å‘ä¸‹ï¼Œå•å®ä¾‹å†…éƒ¨çš„é”ç«äº‰å’Œèµ„æºè°ƒåº¦ä¾ç„¶æ‰è¥Ÿè§è‚˜ã€‚å°±åƒåªæœ‰ä¸€æŠŠæªï¼Œæ‰£åŠ¨æ‰³æœºçš„é€Ÿåº¦å¿«è¿‡æ¢å¼¹çš„é€Ÿåº¦æ—¶ï¼Œå¡å£³æ˜¯å¿…ç„¶çš„ã€‚</p>
<h3 data-id="heading-9">3.2 è§£å†³æ–¹æ¡ˆï¼šåŠ ç‰¹æ—æ¨¡å¼ï¼ˆMulti-Instance Round-Robinï¼‰</h3>
<p>æˆ‘ä»¬å€Ÿé‰´äº†æœåŠ¡å™¨è´Ÿè½½å‡è¡¡çš„æ€è·¯ï¼Œåœ¨åŸç”Ÿå±‚å®ç°äº†ä¸€ä¸ª <strong>SoundPool è¿æ¥æ± </strong>ã€‚</p>
<ol>
<li><strong>åˆ›å»ºå¤šä¸ªå®ä¾‹</strong>ï¼šåˆå§‹åŒ–æ—¶ä¸€å£æ°”åˆ›å»º 4 ä¸ª <code>SoundPool</code> å®ä¾‹ã€‚</li>
<li><strong>è½®è¯¢æ’­æ”¾</strong>ï¼šæ¯æ¬¡æ’­æ”¾è¯·æ±‚åˆ°æ¥æ—¶ï¼Œä¾æ¬¡ä½¿ç”¨ Pool 1 -&gt; Pool 2 -&gt; Pool 3 -&gt; Pool 4ã€‚</li>
</ol>
<p>è¿™æ ·ï¼Œå³ä½¿æ¯ç§’ç‚¹å‡» 20 æ¬¡ï¼Œåˆ†æ‘Šåˆ°æ¯ä¸ª <code>SoundPool</code> ä¸Šä¹Ÿåªæœ‰ 5 æ¬¡ï¼Œè´Ÿè½½å¤§å¤§é™ä½ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// TtsSdkPlugin.ets æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">private</span> <span class="hljs-attr">soundPools</span>: media.<span class="hljs-property">SoundPool</span>[] = [];
<span class="hljs-keyword">private</span> <span class="hljs-attr">currentPoolIndex</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> <span class="hljs-variable constant_">POOL_COUNT</span> = <span class="hljs-number">4</span>;

<span class="hljs-keyword">async</span> <span class="hljs-title function_">playShort</span>(<span class="hljs-params">path: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// è½®è¯¢ç®—æ³•</span>
  <span class="hljs-keyword">const</span> pool = <span class="hljs-variable language_">this</span>.<span class="hljs-property">soundPools</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPoolIndex</span>];
  <span class="hljs-comment">// ... æ’­æ”¾é€»è¾‘ ...</span>
  <span class="hljs-comment">// æŒ‡å‘ä¸‹ä¸€ä¸ªæ± å­</span>
  <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPoolIndex</span> = (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentPoolIndex</span> + <span class="hljs-number">1</span>) % <span class="hljs-variable language_">this</span>.<span class="hljs-property">POOL_COUNT</span>;
}
</code></pre>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åŠ ä¸Šäº† <strong>Loading Lockï¼ˆåŠ è½½é”ï¼‰</strong>ï¼Œé˜²æ­¢åŒä¸€ä¸ªéŸ³æ•ˆæ–‡ä»¶åœ¨æœªåŠ è½½å®Œæˆå‰è¢«é‡å¤è§¦å‘ IO æ“ä½œï¼Œè¿›ä¸€æ­¥å‡å°‘äº† CPU æ¶ˆè€—ã€‚</p>
<h2 data-id="heading-10">äº”ã€ æŒ‘æˆ˜å››ï¼šåå°ä¿æ´»çš„â€œé™éŸ³â€å®ˆæŠ¤è€…</h2>
<h3 data-id="heading-11">4.1 é—®é¢˜ç°è±¡</h3>
<p>è¿åŠ¨Appæœ€å¸¸ç”¨çš„åœºæ™¯å°±æ˜¯é”å±å¬å£°éŸ³ã€‚ä½†é¸¿è’™ç³»ç»Ÿå¯¹åå°èµ„æºç®¡æ§éå¸¸ä¸¥æ ¼ã€‚æˆ‘ä»¬çš„ SoundPool æ’­æ”¾æ˜¯é—´æ­‡æ€§çš„ï¼ˆå“ä¸€ä¸‹ï¼Œåœä¸€ä¸‹ï¼‰ã€‚åœ¨åœæ­¢çš„é‚£å‡ ç™¾æ¯«ç§’ç©ºéš™é‡Œï¼Œç³»ç»Ÿä¼šè®¤ä¸ºâ€œè¯¥åº”ç”¨æ²¡æœ‰åœ¨æ’­æ”¾éŸ³é¢‘â€ï¼Œè¿›è€ŒæŒ‚èµ·åå°ä»»åŠ¡ã€‚
ç»“æœå°±æ˜¯ï¼šApp ä¸€é€€åå°ï¼Œå“ä¸¤å£°å°±æ²¡åŠ¨é™äº†ã€‚</p>
<h3 data-id="heading-12">4.2 è§£å†³æ–¹æ¡ˆï¼šAVSession + é™éŸ³ä¿æ´»</h3>
<p>è¦åœ¨é¸¿è’™åå°æŒç»­è¿è¡Œï¼Œå¿…é¡»æ»¡è¶³ä¸‰ä¸ªæ¡ä»¶ï¼š</p>
<ol>
<li><strong>AVSession æ¿€æ´»</strong>ï¼šå‘Šè¯‰ç³»ç»Ÿæˆ‘æ˜¯åª’ä½“åº”ç”¨ã€‚</li>
<li><strong>BackgroundTask ç”³è¯·</strong>ï¼šç”³è¯· <code>AUDIO_PLAYBACK</code> é•¿æ—¶ä»»åŠ¡ã€‚</li>
<li><strong>æŒç»­çš„éŸ³é¢‘è¾“å‡º</strong>ï¼šè¿™æ˜¯æœ€å…³é”®çš„ä¸€ç‚¹ã€‚</li>
</ol>
<p>æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ª <strong>Keep-Alive Renderer</strong>ã€‚å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ <code>AudioRenderer</code>ï¼Œå®ƒçš„å”¯ä¸€å·¥ä½œå°±æ˜¯<strong>å¾ªç¯æ’­æ”¾ä¸€æ®µå…¨ä¸º 0 çš„é™éŸ³æ•°æ®</strong>ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¿™é‡Œçš„ buffer å…¨æ˜¯ 0ï¼Œå¬ä¸è§ï¼Œä½†ç³»ç»Ÿè®¤ä¸ºä½ åœ¨â€œåŠªåŠ›å·¥ä½œâ€</span>
<span class="hljs-keyword">async</span> <span class="hljs-title function_">writeSilence</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">keepAliveRenderer</span>.<span class="hljs-property">state</span> !== audio.<span class="hljs-property">AudioState</span>.<span class="hljs-property">STATE_RUNNING</span>) <span class="hljs-keyword">return</span>;
  <span class="hljs-keyword">let</span> bufferSize = <span class="hljs-number">17640</span>; 
  <span class="hljs-keyword">let</span> buffer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Uint8Array</span>(bufferSize); <span class="hljs-comment">// é™éŸ³æ•°æ®</span>
  <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">keepAliveRenderer</span>.<span class="hljs-title function_">write</span>(buffer);
  <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">writeSilence</span>(); <span class="hljs-comment">// é€’å½’è°ƒç”¨ï¼Œæ°¸ä¸åœæ­‡</span>
}
</code></pre>
<p><strong>ç»„åˆæ‹³é€»è¾‘</strong>ï¼š</p>
<ul>
<li>å½“èŠ‚æ‹å™¨å¼€å§‹æ—¶ -&gt; æ¿€æ´» <code>AVSession</code> -&gt; å¯åŠ¨ <code>BackgroundTask</code> -&gt; <strong>å¼€å§‹æ’­æ”¾é™éŸ³æµ</strong>ã€‚</li>
<li>ç³»ç»Ÿæ£€æµ‹åˆ°æœ‰æŒç»­çš„éŸ³é¢‘è¾“å‡ºï¼Œå°±ä¸ä¼šæ€æ‰ Appã€‚</li>
<li>ç”¨æˆ·å¬åˆ°çš„ï¼šæ¸…æ™°çš„èŠ‚æ‹å£°ï¼ˆæ¥è‡ª SoundPoolï¼‰ã€‚</li>
<li>ç³»ç»Ÿçœ‹åˆ°çš„ï¼šä¸€ä¸ªæŒç»­è¾“å‡ºéŸ³é¢‘æµçš„åª’ä½“åº”ç”¨ã€‚</li>
</ul>
<h2 data-id="heading-13">å…­ã€ æ€»ç»“</h2>
<p>é€šè¿‡è¿™ä¸€ç³»åˆ—ä¼˜åŒ–ï¼Œæˆ‘ä»¬ç»ˆäºåœ¨é¸¿è’™Nextä¸Šå®ç°äº†ä¸€ä¸ªå¯ç”¨çš„ä¸“ä¸šçº§èŠ‚æ‹å™¨ï¼š</p>



































<table><thead><tr><th align="left">ä¼˜åŒ–ç‚¹</th><th align="left">è§£å†³é—®é¢˜</th><th align="left">æ ¸å¿ƒæ‰‹æ®µ</th></tr></thead><tbody><tr><td align="left"><strong>SoundPool</strong></td><td align="left">é™ä½å»¶è¿Ÿ</td><td align="left">æ›¿ä»£ AVPlayerï¼Œå†…å­˜ç›´è¯»</td></tr><tr><td align="left"><strong>å¼‚æ­¥è°ƒç”¨</strong></td><td align="left">æ¶ˆé™¤æŠ–åŠ¨</td><td align="left">Dart ç«¯ç§»é™¤ awaitï¼Œè§£è€¦ä¸»çº¿ç¨‹</td></tr><tr><td align="left"><strong>å¤šå®ä¾‹è½®è¯¢</strong></td><td align="left">è§£å†³é«˜é¢‘å¡é¡¿</td><td align="left">4ä¸ª SoundPool è½®æµå·¥ä½œï¼Œè´Ÿè½½å‡è¡¡</td></tr><tr><td align="left"><strong>AVSession</strong></td><td align="left">ç³»ç»Ÿåª’ä½“æ§åˆ¶</td><td align="left">æ³¨å†Œåª’ä½“ä¼šè¯ï¼Œæ”¯æŒé€šçŸ¥æ æ§åˆ¶</td></tr><tr><td align="left"><strong>é™éŸ³ä¿æ´»</strong></td><td align="left">åå°æŒç»­è¿è¡Œ</td><td align="left">ç‹¬ç«‹çš„ AudioRenderer æŒç»­è¾“å‡ºé™éŸ³æµ</td></tr></tbody></table>
<p>é¸¿è’™Nextçš„éŸ³é¢‘å¼€å‘è™½ç„¶å‘å¤šï¼Œä½†åªè¦ç†è§£äº†å…¶åº•å±‚çš„èµ„æºè°ƒåº¦é€»è¾‘ï¼Œä¾ç„¶èƒ½å†™å‡ºé«˜æ€§èƒ½çš„ä»£ç ã€‚å¸Œæœ›è¿™ç¯‡è¸©å‘æŒ‡å—èƒ½å¸®åˆ°åŒæ ·åœ¨æ¢ç´¢é¸¿è’™å¼€å‘çš„ä½ ã€‚</p>
<hr/>
<p><em>æœ¬æ–‡åŸºäº Flutter + HarmonyOS Next (API 12+) å¼€å‘ç¯å¢ƒã€‚</em></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»£ç æš´å‡99%ï¼æ¸¯å¤§å¼€æºâ€œçº³ç±³çº§OpenClawâ€ï¼Œä»…4000è¡Œä»£ç å¤åˆ»OpenClawæ ¸å¿ƒæˆ˜åŠ›ï¼]]></title>    <link>https://juejin.cn/post/7602154088476295206</link>    <guid>https://juejin.cn/post/7602154088476295206</guid>    <pubDate>2026-02-03T02:37:38.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602154088476295206" data-draft-id="7602162809292029990" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»£ç æš´å‡99%ï¼æ¸¯å¤§å¼€æºâ€œçº³ç±³çº§OpenClawâ€ï¼Œä»…4000è¡Œä»£ç å¤åˆ»OpenClawæ ¸å¿ƒæˆ˜åŠ›ï¼"/> <meta itemprop="keywords" content="GitHub,äººå·¥æ™ºèƒ½,Python"/> <meta itemprop="datePublished" content="2026-02-03T02:37:38.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€æºæ˜Ÿæ¢"/> <meta itemprop="url" content="https://juejin.cn/user/2977915149494248"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»£ç æš´å‡99%ï¼æ¸¯å¤§å¼€æºâ€œçº³ç±³çº§OpenClawâ€ï¼Œä»…4000è¡Œä»£ç å¤åˆ»OpenClawæ ¸å¿ƒæˆ˜åŠ›ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2977915149494248/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€æºæ˜Ÿæ¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:37:38.000Z" title="Tue Feb 03 2026 02:37:38 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸï¼Œæœ‰ä¸€å¥è‡³ç†åè¨€ï¼šâ€œä»£ç è¡Œæ•°æ˜¯è´Ÿå€ºï¼Œè€Œä¸æ˜¯èµ„äº§ã€‚â€</p>
<p>å‰ä¸¤å¤©ï¼Œæˆ‘ä»¬è¿˜åœ¨ä¸º OpenClaw(Clawdbot) é‚£åºå¤§çš„å…¨æ ˆèƒ½åŠ›æƒŠå¹ï¼Œå®ƒç¡®å®å¼ºå¤§ï¼Œä½†é«˜è¾¾ 43 ä¸‡è¡Œçš„ä»£ç ä½“é‡ï¼Œè®©å¾ˆå¤šæƒ³æ·±å…¥é­”æ”¹çš„å¼€å‘è€…æœ›è€Œå´æ­¥ã€‚</p>
<p>é¦™æ¸¯å¤§å­¦æ•°æ®æ™ºèƒ½å®éªŒå®¤ï¼ˆHKUDSï¼‰åå…¶é“è€Œè¡Œä¹‹ã€‚ä»–ä»¬åˆšåˆšå¼€æºäº†ä¸€æ¬¾åä¸ºÂ <strong>Nanobot</strong>Â çš„é¡¹ç›®ï¼Œå¯ç§°ä¹‹ä¸ºâ€œçº³ç±³çº§ Clawdbotâ€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c39c434d8894dc28ba22f3647ab3de7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691057&amp;x-signature=J%2BlwewnqWcnJgAufQ1JeAWT4iFk%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å®ƒå¤åˆ»äº† Clawdbot å‡ ä¹æ‰€æœ‰çš„æ ¸å¿ƒæ™ºèƒ½ä½“åŠŸèƒ½ï¼Œä½†ä»£ç é‡åªæœ‰ 4000 è¡Œã€‚</p>
<p>ç›¸æ¯”åŸç‰ˆ 43 ä¸‡è¡Œä»£ç ï¼Œè¿™ä¸ª 99% çš„â€œç˜¦èº«â€æå…¶éœ‡æ’¼ã€‚å®ƒå‘å¼€å‘è€…è¯æ˜äº†ä¸€ä»¶äº‹ï¼šæ„å»ºä¸€ä¸ªå…¨åŠŸèƒ½çš„ã€èƒ½å¹²æ´»çš„ AI Agentï¼Œå…¶å®ä¸éœ€è¦å‡ åä¸‡è¡Œä»£ç çš„å †ç Œï¼Œæ ¸å¿ƒé€»è¾‘å…¶å®éå¸¸çº¯ç²¹ã€‚</p>
<p>å¼€æº24å°æ—¶ä¸åˆ°ï¼Œå°±å·²ç»æ”¶è·äº† 1.3K Starã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d785a978e1274679a1b03665534e8d55~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691057&amp;x-signature=m%2FNtc4cSIjMTlW5olc9RnHWAJAA%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<h4 data-id="heading-0">ä»€ä¹ˆæ˜¯ nanobotï¼Ÿ</h4>
<p>ä½ å¯ä»¥æŠŠ nanobot ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å»æ‰ä¸€åˆ‡â€œå­¦æœ¯è£…é¥°â€å’Œå·¥ç¨‹å†—ä½™åï¼Œå‰©ä¸‹çš„é‚£å¥—â€œæœ€å°å¯ç”¨ Agent å†…æ ¸â€ã€‚</p>
</blockquote>
<p>å®ƒä¿ç•™äº†ä¸€ä¸ªæˆç†Ÿæ™ºèƒ½ä½“å¿…é¡»å…·å¤‡çš„èƒ½åŠ›é—­ç¯ï¼š</p>
<ul>
<li>
<p>ç½‘é¡µæœç´¢</p>
</li>
<li>
<p>æ–‡ä»¶/ä»£ç æ“ä½œ</p>
</li>
<li>
<p>å®šæ—¶ä»»åŠ¡</p>
</li>
<li>
<p>è®°å¿†æœºåˆ¶</p>
</li>
<li>
<p>å¤šåœºæ™¯ Agent æ¨¡æ¿</p>
</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36cb79968d6f4d3884726462213d2617~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691057&amp;x-signature=k3yoBkXMai7ygjIdSsNKAa0ryL0%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ã€‚ä¹Ÿæ˜¯å¯ä»¥é•¿æœŸåœ¨çº¿ã€æŒç»­æ‰§è¡Œã€å¯å¤ç”¨çš„ Agentã€‚</p>
<h4 data-id="heading-1">æ ¸å¿ƒå“²å­¦</h4>
<p>Nanobot çš„æ ¸å¿ƒä»·å€¼åœ¨äºÂ <strong>â€œå¯æŒæ§æ€§â€</strong>ã€‚</p>
<p>å…·å¤‡æä½çš„å­¦ä¹ æˆæœ¬ï¼š</p>
<ul>
<li>
<p><strong>OpenClaw</strong>ï¼šåƒæ˜¯ä¸€ä¸ªå¤æ‚çš„æ“ä½œç³»ç»Ÿï¼ŒåŠŸèƒ½æ¨¡å—å·¨å¤§ï¼Œä½ åªèƒ½åœ¨å®ƒå…è®¸çš„æ¡†æ¶å†…å¼€å‘æ’ä»¶ã€‚</p>
</li>
<li>
<p><strong>Nanobot</strong>ï¼š4000 è¡Œ Python ä»£ç ã€‚å³ä½¿ä¸€ä¸ªä¸­çº§å¼€å‘è€…ï¼ŒèŠ±ä¸€ä¸ªä¸‹åˆå°±èƒ½é€šè¯»æ‰€æœ‰æºç ï¼Œå½»åº•ææ‡‚ AI æ˜¯æ€ä¹ˆè°ƒç”¨å·¥å…·ã€æ€ä¹ˆç®¡ç†è®°å¿†çš„ã€‚</p>
</li>
</ul>
<h4 data-id="heading-2">å¼€ç®±å³ç”¨çš„ç”Ÿäº§åŠ›</h4>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/97c462ee7e6743b7a16d7ce85d75e9b8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5pif5o6i:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691057&amp;x-signature=F1aPZt4v86JOHtEisona7b6LZSE%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>Nanobot ä¸åªæ˜¯ä¸€ä¸ªç©ºæ¡†æ¶ï¼Œå®ƒè‡ªå¸¦äº†å››ä¸ªéå¸¸ç¡¬æ ¸çš„æ¨¡ç‰ˆï¼Œç›´æ¥è·‘èµ·æ¥å°±èƒ½ç”¨ï¼š</p>
<ul>
<li>
<p><strong>24h å®æ—¶è¡Œæƒ…åˆ†æå¸ˆ</strong>ï¼šè¿™æ˜¯å¾ˆå¤šé‡‘èæå®¢çš„æœ€çˆ±ã€‚</p>
</li>
<li>
<p><strong>å…¨æ ˆå¼€å‘åŠ©æ‰‹</strong>ï¼šéšæ—¶éšåœ°æ‰§è¡Œå¼€å‘ä»»åŠ¡ã€‚</p>
</li>
<li>
<p><strong>ç§äººæ—¥ç¨‹ç®¡ç†</strong>ï¼šå¸®ä½ å®‰æ’ä¼šè®®ï¼Œå‘é€æé†’ã€‚</p>
</li>
<li>
<p><strong>ä¸ªäººçŸ¥è¯†åº“</strong>ï¼šæŠŠä½ çš„ PDFã€ç¬”è®°ä¸¢ç»™å®ƒï¼Œéšæ—¶é—®ç­”ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">å¿«é€Ÿä½¿ç”¨</h4>
<p>Nanobot æ”¯æŒå¿«é€Ÿé€šè¿‡ Python Pypi ä¸€é”®å®‰è£…ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">pip install nanobot-ai
</code></pre>
<p>ä¹Ÿå¯ä»¥ä¸‹è½½æºç é›†æˆæ›´å¤šè‡ªå®šä¹‰çš„åŠŸèƒ½ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">gitÂ <span class="hljs-built_in">clone</span>Â https://github.com/HKUDS/nanobot.gitcdÂ nanobotpip install -e .
</code></pre>
<blockquote>
<p>è®¾ç½® API å¯†é’¥æ–¹å¼ï¼š~/.nanobot/config.jsonã€‚</p>
</blockquote>
<p>å®‰è£…å®Œæˆåï¼Œæœ¬åœ°å°±ä¼šæœ‰ä¸€ä¸ª nanobot å‘½ä»¤ã€‚</p>
<p>ç„¶åå°±å¯ä»¥è¿›è¡Œåˆå§‹åŒ–ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nanobot onboard
</code></pre>
<p>é…ç½®æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">{  
Â  <span class="hljs-string">"providers"</span>: {  
Â  Â  <span class="hljs-string">"openrouter"</span>: {  
Â  Â  Â  <span class="hljs-string">"apiKey"</span>:Â <span class="hljs-string">"sk-or-v1-xxx"</span>  
Â  Â  }  
Â  },  
Â  <span class="hljs-string">"agents"</span>: {  
Â  Â  <span class="hljs-string">"defaults"</span>: {  
Â  Â  Â  <span class="hljs-string">"model"</span>:Â <span class="hljs-string">"anthropic/claude-opus-4-5"</span>  
Â  Â  }  
Â  },  
Â  <span class="hljs-string">"webSearch"</span>: {  
Â  Â  <span class="hljs-string">"apiKey"</span>:Â <span class="hljs-string">"BSA-xxx"</span>  
Â  }  
}
</code></pre>
<p>å¯åŠ¨AgentèŠå¤©ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nanobot agent -mÂ <span class="hljs-string">"What is 2+2?"</span>
</code></pre>
<p>ç›®å‰å·²æ”¯æŒé€šè¿‡ Telegram æˆ– WhatsApp ä¸ä½ çš„ Nanobot å¯¹è¯ã€‚</p>
<p>è·Ÿ OpenClaw ä¸€æ ·ï¼Œåªéœ€è¦é…ç½®é…å¯¹å¥½ï¼Œå°±å¯ä»¥ç›´æ¥è¿è¡Œã€‚</p>
<p>æœ€ç»ˆå¯åŠ¨ç½‘å…³å‘½ä»¤ä¹Ÿç±»ä¼¼ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">nanobot gateway
</code></pre>
<h4 data-id="heading-4">å†™åœ¨æœ€å</h4>
<p>æˆ‘ä»¬çŸ¥é“ OpenClaw æ˜¯æ›´å¤æ‚ã€å…·å¤‡æ›´å¤šæ¨¡å—ã€æ›´å¤§çš„ç³»ç»Ÿã€‚</p>
<p>è€Œ nanobot èµ°çš„æ˜¯å¦ä¸€æ¡è·¯ï¼š</p>
<ul>
<li>
<p>æ›´å°ï¼Œä½†å®Œæ•´</p>
</li>
<li>
<p>æ›´å°‘ï¼Œä½†é—­ç¯</p>
</li>
<li>
<p>æ›´ç®€å•ï¼Œä½†èƒ½é•¿æœŸè·‘</p>
</li>
</ul>
<p>å®ƒæé†’æˆ‘ä»¬ï¼ŒAgent çš„æœ¬è´¨ä¸æ˜¯ä»£ç çš„å †ç Œï¼Œè€Œæ˜¯é€»è¾‘çš„ç¼–æ’ã€‚</p>
<p>æœªæ¥è‚¯å®šä¹Ÿä¼šæœ‰æ›´å¤šçš„ Agent â€œæç®€å®ç°â€ï¼Œä½†å®ƒæ–¹ä¾¿çš„æ˜¯æ¯ä¸ªäººï¼Œç”šè‡³æ˜¯æ•´ä¸ªç”Ÿæ€ã€‚</p>
<p>GitHubï¼š</p>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FHKUDS%2Fnanobot" target="_blank" title="https://github.com/HKUDS/nanobot" ref="nofollow noopener noreferrer">github.com/HKUDS/nanobâ€¦</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”¨ MCSManager+cpolar è½»æ¾æå®šæˆ‘çš„ä¸–ç•Œå…¬ç½‘è”æœº]]></title>    <link>https://juejin.cn/post/7602162809292259366</link>    <guid>https://juejin.cn/post/7602162809292259366</guid>    <pubDate>2026-02-03T02:46:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602162809292259366" data-draft-id="7602303923139625010" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”¨ MCSManager+cpolar è½»æ¾æå®šæˆ‘çš„ä¸–ç•Œå…¬ç½‘è”æœº"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-02-03T02:46:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ˜é‡‘è€…é˜¿è±ª"/> <meta itemprop="url" content="https://juejin.cn/user/4073055974333608"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”¨ MCSManager+cpolar è½»æ¾æå®šæˆ‘çš„ä¸–ç•Œå…¬ç½‘è”æœº
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4073055974333608/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ˜é‡‘è€…é˜¿è±ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-03T02:46:13.000Z" title="Tue Feb 03 2026 02:46:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-03
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e5f676200d89445c98358e1798d89403~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=iIpsG7ALdcojOVmzlogtVwI11b4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>MCSManager æ˜¯ä¸€æ¬¾é’ˆå¯¹ Minecraft ç­‰æ¸¸æˆæœåŠ¡å™¨çš„ç®¡ç†é¢æ¿ï¼Œæ ¸å¿ƒåŠŸèƒ½æ˜¯ç®€åŒ–æœåŠ¡å™¨æ­å»ºä¸è¿ç»´æµç¨‹ï¼Œæ— éœ€å¤æ‚çš„ä»£ç æ“ä½œï¼Œé€šè¿‡å¯è§†åŒ–ç•Œé¢å’Œç®€å•å‘½ä»¤å°±èƒ½å®ŒæˆæœåŠ¡å™¨éƒ¨ç½²ã€å¯åœã€é…ç½®ç®¡ç†ç­‰æ“ä½œï¼Œé€‚é… Linux ä¸»æµå‘è¡Œç‰ˆï¼Œä¹Ÿå…¼å®¹ Windows ç³»ç»Ÿï¼Œå°¤å…¶é€‚åˆå­¦ç”Ÿå…šã€å®¶åº­æ¸¸æˆç©å®¶ä»¥åŠæŠ€æœ¯æ–°æ‰‹ä½¿ç”¨ï¼Œä¼˜ç‚¹åœ¨äºæ“ä½œé—¨æ§›ä½ï¼Œå…¼é¡¾å‘½ä»¤è¡Œä¸å›¾å½¢ç•Œé¢ï¼Œèƒ½å¿«é€Ÿå®ŒæˆæœåŠ¡å™¨ç¯å¢ƒé…ç½®ï¼Œçœå»æ‰‹åŠ¨è°ƒè¯•çš„ç¹çã€‚</p>
<p>ä½¿ç”¨ MCSManager æ­å»ºæˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨æ—¶å‘ç°ï¼Œè¿™æ¬¾å·¥å…·è™½ç„¶ä¸Šæ‰‹å¿«ï¼Œä½†é¦–æ¬¡é…ç½®æ—¶è¦æ³¨æ„å’Œæ¸¸æˆç‰ˆæœ¬åŒ¹é…ï¼Œæ¯”å¦‚æ­å»º Java ç‰ˆ 1.20.4 æœåŠ¡å™¨ï¼Œéœ€å¯¹åº”å®‰è£… Java17 ç¯å¢ƒï¼Œå¦åˆ™ä¼šå‡ºç°å¯åŠ¨å¤±è´¥çš„æƒ…å†µï¼›å¦å¤–æ—¥å¸¸ä½¿ç”¨ä¸­è¦å®šæœŸå¤‡ä»½æœåŠ¡å™¨æ•°æ®ï¼Œé¿å…å› æ“ä½œå¤±è¯¯å¯¼è‡´å­˜æ¡£ä¸¢å¤±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/50b16da1ccd3489ca0e1890b3f8a302c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=h%2BIcLhqm6ISuj8At40A0%2Bkl1mFc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä»…ä¾é  MCSManager æ­å»ºçš„æœåŠ¡å™¨åªèƒ½åœ¨å±€åŸŸç½‘å†…è”æœºï¼Œä¼šå¸¦æ¥ä¸å°‘å®é™…ä¸ä¾¿ï¼šæ¯”å¦‚å­¦ç”Ÿå…šåœ¨å®¿èˆæ­å»ºçš„æœåŠ¡å™¨ï¼Œæ”¾å‡å›å®¶åå°±æ— æ³•å’Œå®¤å‹ç»§ç»­è”æœºï¼›å®¶åº­ç”¨æˆ·æƒ³å’Œå¼‚åœ°çš„äº²å‹ä¸€èµ·ç©ï¼Œä¹Ÿä¼šå› å±€åŸŸç½‘çš„ç‰©ç†é™åˆ¶æ— æ³•å®ç°ï¼›å°±ç®—æ˜¯åŒä¸€åŸå¸‚çš„æœ‹å‹ï¼Œä¸åœ¨åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹ä¹Ÿåªèƒ½æœ› â€œæœâ€ å…´å¹ã€‚</p>
<p>è€Œå°† MCSManager ä¸ cpolar ç»“åˆåï¼Œå°±èƒ½çªç ´è¿™äº›é™åˆ¶ï¼šcpolar æ— éœ€ä¿®æ”¹è·¯ç”±å™¨ç«¯å£æ˜ å°„ï¼Œä¹Ÿä¸ç”¨å…¬ç½‘ IPï¼Œå°±èƒ½æŠŠå†…ç½‘çš„æ¸¸æˆæœåŠ¡å™¨ç«¯å£æ˜ å°„åˆ°å…¬ç½‘ï¼Œç”Ÿæˆå¯è®¿é—®çš„å…¬ç½‘åœ°å€ï¼Œæ¯”å¦‚å­¦ç”Ÿå…šå‡æœŸåœ¨å®¶ï¼Œåªéœ€é€šè¿‡è¿™ä¸ªå…¬ç½‘åœ°å€ï¼Œå°±èƒ½å’Œå®¿èˆçš„æœåŠ¡å™¨è”æœºï¼›å®¶åº­ç”¨æˆ·ä¹Ÿèƒ½è®©è¿œæ–¹çš„äº²å‹é€šè¿‡å…¬ç½‘åœ°å€åŠ å…¥æ¸¸æˆï¼ŒçœŸæ­£å®ç°è·¨åœ°åŸŸçš„æ¸¸æˆè”æœºè‡ªç”±ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dc97436308a04a77b47e03746c0c8958~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=2j%2BvKqCdddSMXnodSr9wh6oO1rI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h4 data-id="heading-0">ç§æœMCè‡ªå·±çš„æ¸¸æˆè‡ªå·±åšä¸»ï¼</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¦ç¡®ä¿Javaç‰ˆæˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨å·²ç»æˆåŠŸæ­å»ºï¼Œå¹¶ä¸”å¯ä»¥åœ¨å±€åŸŸç½‘å†…æ­£å¸¸è”æœºã€‚å¦‚æœä½ å·²ç»æ˜¯è¿™æ–¹é¢çš„é«˜æ‰‹äº†ï¼Œå¯ä»¥ç›´æ¥è·³åˆ°ç¬¬ä¸‰æ­¥ï¼Œåœ¨æœ¬åœ°é…ç½®Cpolarè¿›è¡Œå†…ç½‘ç©¿é€ã€‚ä½†å¦‚æœä½ æ˜¯æ–°æ‰‹ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæˆ‘ä¼šä»å¤´å¼€å§‹è¯¦ç»†è®²è§£æ¯ä¸€æ­¥ã€‚</p>
<h2 data-id="heading-1">1. æ­å»ºæˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨</h2>
<p>ä»¥windows10ç³»ç»Ÿä¸ºä¾‹ï¼Œé…ç½®javaç¯å¢ƒï¼Œæ­å»ºæœåŠ¡å™¨ã€‚</p>
<h3 data-id="heading-2">1.1 æœåŠ¡å™¨å®‰è£…javaç¯å¢ƒ</h3>
<p>ä¸‹è½½java17</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.oracle.com%2Fjava%2Ftechnologies%2Fdownloads%2F%23jdk17-windows" target="_blank" title="https://www.oracle.com/java/technologies/downloads/#jdk17-windows" ref="nofollow noopener noreferrer">www.oracle.com/java/technoâ€¦</a></p>
<p>é€‰æ‹©exeæ–‡ä»¶ï¼Œä¸‹è½½å®ŒæˆååŒå‡»å®‰è£…åŒ…ä¸€è·¯é»˜è®¤å®‰è£…å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/69a5b536250243eea2e676fdbe5c5e58~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=pl7GfVdCnxwzduMft4%2BUTySSvVI%3D" alt="image.png" loading="lazy"/>
javaå®‰è£…å®Œæˆåï¼Œæ‰“å¼€æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°javaï¼Œå°†jdkå®‰è£…è·¯å¾„å¤åˆ¶ä¸‹æ¥ï¼Œæœ¬ä¾‹ä¸­ä¸º<code>C:\Program Files\Java\jdk-17.0.5</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b8232ee10054c9980d06419bd86d29b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=67YnTgQwMhmZlTOSkilZjsa1q1U%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨å¼€å§‹èœå•æ æœç´¢<code>é«˜çº§ç³»ç»Ÿè®¾ç½®</code>å¹¶æ‰“å¼€ç³»ç»Ÿå±æ€§ï¼Œç‚¹å‡»<code>ç¯å¢ƒå˜é‡</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3439fa4ebea24ab5a22e2cb450d015b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=eIJyG8dFGjpOkusRZGzTY3wzm68%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»æ–°å»ºä¸€ä¸ªç³»ç»Ÿç¯å¢ƒå˜é‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e01df1ebba4413f8a8ce85302f19c13~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=toQ8CzT6sgTP4w%2Bol3%2FIVAcJKcQ%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å˜é‡åï¼šJAVA_HOME</li>
<li>å˜é‡å€¼ï¼šJDKçš„å®‰è£…è·¯å¾„ï¼Œæœ¬ä¾‹ä¸­ä¸º<code>C:\Program Files\Java\jdk-17.0.5</code></li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/591137cf5b1e4791961ec9a2ce61c6e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=QImUA%2BqJw4g2fG5SRUMrv2Raazc%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨ç³»ç»Ÿå˜é‡åˆ—è¡¨ä¸­ï¼ŒåŒå‡»Pathå˜é‡</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62428355a6a74232af54d45d09bc4a51~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=%2BW46NuVIA4bztjWkMZ%2BwiiZQGLE%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»å³ä¾§çš„æ–°å»ºï¼Œåœ¨å˜é‡åå€¼å‰é¢åŠ <code>%JAVA_HOME%\bin</code>ï¼Œç‚¹å‡»ç¡®è®¤</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd1612829dac4b5c95d1fe07c15bbd3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=eDIPJWig%2BdFjTN5iZJPkQ6ysRHw%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¡éªŒæ˜¯å¦æˆåŠŸï¼šå¼€å§‹èœå•æ æœç´¢cmdï¼Œæ‰“å¼€å‘½ä»¤æç¤ºç¬¦ï¼Œè¾“å…¥<code>javac</code>ï¼Œå‡ºç°ä»¥ä¸‹å†…å®¹åˆ™è¯´æ˜é…ç½®æˆåŠŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2589e104595240d0b73ba83db806c8f5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=%2B%2BQpjHN9pRtB1pXOKE3Ec7Womnk%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">1.2 é…ç½®æœåŠ¡ç«¯</h3>
<p>ä¸‹è½½MCæœåŠ¡ç«¯ï¼Œæœ€æ–°ç‰ˆçš„æœåŠ¡å™¨ç«¯å¯ä»¥å®˜ç½‘ä¸‹è½½</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmcsmanager.com%2F" target="_blank" title="https://mcsmanager.com/" ref="nofollow noopener noreferrer">MCSManager | å¼€æºå…è´¹ï¼Œåˆ†å¸ƒå¼ï¼Œä¸€é”®éƒ¨ç½²ï¼Œæ”¯æŒ Minecraft å’Œ Steamæ¸¸æˆæœåŠ¡å™¨çš„æ§åˆ¶é¢æ¿</a></p>
<p>é€‰æ‹©Windows</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eef34eee77cb4e8c99628c6825cc319e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=5NgnvrkPEsqzdWqcTIxrvpk1H2s%3D" alt="image.png" loading="lazy"/></p>
<p>ä¸‹è½½åˆ°æœ¬åœ°åï¼Œæ‰“å¼€æ–‡ä»¶å¤¹</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/59bd4a3d06ed4f35b4bbb39525ea3437~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=Dh%2Be9%2FNtf8EMn0g8r9zb2CqZwgY%3D" alt="image.png" loading="lazy"/></p>
<p>åŒå‡»æ‰“å¼€<code>start.bat</code>ï¼Œå¯ä»¥çœ‹åˆ°è¿ç»­è·³å‡ºä¸¤ä¸ªç»ˆç«¯</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1ad0089ad02421ab0421b963dd414e8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=WM3riseMFbjRScbzpOwGBrwGK2g%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åä½¿ç”¨å¤–éƒ¨æµè§ˆå™¨,é€šè¿‡å±€åŸŸç½‘ipåœ°å€åŠ 23333ç«¯å£è®¿é—®,å³å¯çœ‹åˆ°MCSMçš„webç•Œé¢,é¦–æ¬¡ç™»é™†,éœ€è¦åˆ›å»ºä¸€ä¸ªè´¦å·</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd00fd8fc83b41c693689c6f62bf5407~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=HwT%2F0jZfJ4HFYfpbGcW8rMCtCDY%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-4">1.3 åˆ›å»ºæˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨</h3>
<p>åœ¨é¢æ¿ä¸­,æˆ‘ä»¬ç‚¹å‡»å¿«é€Ÿå¼€å§‹,åˆ›å»ºä¸€ä¸ªMinecraftæœåŠ¡å™¨</p>
<p>è¿›å…¥åˆ°ä»ªè¡¨ç›˜ä¸­ï¼Œç‚¹å‡»ä¸Šæ–¹<code>åº”ç”¨å®ä¾‹</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fa1cbd5af07c4a13b7c3c57cb4a1cd41~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=54luKoDiseitGLsMcMFsKIGL4eY%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»<code>æ–°å»ºåº”ç”¨</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f0840a825ac54cbcbed0dec60f208025~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=WNaEO0RKoqYAW3g%2B6sbz3%2FrZ%2Fu8%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»Minecraft Javaç‰ˆæ¸¸æˆæœåŠ¡å™¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4cd08cd64b0943d0b696042416a33ed4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=ssXJqBrN05HPuyA7XsgO2IefCKQ%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»Mincraft å¿«é€Ÿéƒ¨ç½²</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0e684264ffd449a59946ba9238f9a3bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=l9A%2Bi3SHGahbo8bz%2FhkBG2dt5Cc%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»Minecraft 1.20.4 ä½é…æœºå™¨æ¨è</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ad9b94ca45c4231b17f82a5195f9868~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=58SVxIRlwmE2vTXExtzK7i08MI0%3D" alt="image.png" loading="lazy"/></p>
<p>åˆ›å»ºä¸€ä¸ªå®ä¾‹çš„æ–°åå­—</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5ad283349fa4a88ad2a13cab25cd31d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=tNpj%2FTdUTs8nLs1yBrDfOgmEElY%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åç¨å¾®ç­‰å¾…ä¸€ä¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ca7078afad84468a710690ca66ce5ad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=ka4swdyERZ1lathTKItpO0lGsxQ%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»å‰å¾€å®ä¾‹æ§åˆ¶å°</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1223925cac0f4141b0f9901f5de047ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=yJ21Ct2U8jUxyoXH8cvFOo5tsII%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡» <code>å¼€å¯</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bd5659497b774a96bafce8c126c780fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=lMPjRy%2BQ2iZ%2FEuZPeKODvvoiIuc%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c8780222a5f487b87de898dec31e309~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=zvZjsAJu6y8WZqnLvGyBkOUREdM%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">2. å±€åŸŸç½‘è”æœºæµ‹è¯•</h2>
<p>å¯åŠ¨å™¨å’Œæœ€æ–°ç‰ˆJAVAåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fpan.baidu.com%2Fs%2F1VuiGrX_hH_gzYzcKAjwEVA%3Fpwd%3D6666" target="_blank" title="https://pan.baidu.com/s/1VuiGrX_hH_gzYzcKAjwEVA?pwd=6666" ref="nofollow noopener noreferrer">pan.baidu.com/s/1VuiGrX_hâ€¦</a></p>
<p>æå–ç ï¼š6666</p>
<p>æœ¬æ•™ç¨‹ä½¿ç”¨çš„æ˜¯windowså¯åŠ¨å™¨å’ŒJAVA</p>
<p>å®‰è£…å¥½æœ€æ–°ç‰ˆJAVAååœ¨å¯åŠ¨å™¨ä¸­åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œæ­£ç‰ˆæˆ–æ˜¯ç¦»çº¿è´¦å·éƒ½å¯ä»¥</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/052c6b7b879c49609dfd2ba7d8276193~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=cwCLdPGdgtwwb6KyeicDVSrWc40%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f49c2832299243ffa5dcacfc83a631fd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=tGw8%2BxRINovmb8ky0ur4%2FnxVVlw%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€æˆ‘çš„ä¸–ç•Œå¯åŠ¨å™¨,é€‰æ‹©å’ŒæœåŠ¡å™¨ä¸€æ ·çš„ç‰ˆæœ¬1.20.4,å¯åŠ¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3ace2f1b78554689857e0012959e2c46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=Ox31dgGAeQ6u26tpwsKELH77bzU%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åç‚¹å‡»å¤šäººæ¸¸æˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c5398e84ce0248b4af6f65a122c89d8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=ICWY47LDo35X%2Ff6efVT0mPnpSXA%3D" alt="image.png" loading="lazy"/></p>
<p>ç‚¹å‡»æ·»åŠ æœåŠ¡å™¨,ç„¶åè¾“å…¥å±€åŸŸç½‘ipåœ°å€åŠ 25565ç«¯å£<code>192.168.50.33:25565</code>,ç‚¹å‡»åŠ å…¥æœåŠ¡å™¨</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6cc0dfbbe62e45188a1fccea8be55d81~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=5dOvpdzL5rwHb9%2FV5nRBOS%2BCuQM%3D" alt="image.png" loading="lazy"/></p>
<p>ç°åœ¨æˆ‘ä»¬æˆåŠŸæ­å»ºäº†æˆ‘çš„ä¸–ç•Œç§æœï¼Œå¹¶ä¸”å¯ä»¥çœ‹åˆ°æˆåŠŸè¿›å…¥äº†æ¸¸æˆã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/05698a5dd9144d8480de0e594b7a530a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=ShFc1sfxjBKuRQY%2FAan5DUZBPsk%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b371b4824454b35a5c2cbc7b567a31c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=wXetQRa1U2ylS%2FkV8CsyY2FiHSs%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">3. å®‰è£…cpolarå†…ç½‘ç©¿é€</h2>
<p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†åœ¨å±€åŸŸç½‘å†…çš„è”æœºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†çªç ´å±€åŸŸç½‘çš„é™åˆ¶ï¼Œå®ç°åœ¨å…¬ç½‘ç¯å¢ƒä¸‹çš„è¿œç¨‹è”æœºï¼Œé€šè¿‡cpolarå†…ç½‘ç©¿é€ï¼Œå°†å†…ç½‘ç«¯å£æ˜ å°„åˆ°å…¬ç½‘ä¸Šï¼Œå…¶ä¼šç”Ÿæˆç›¸åº”çš„å…¬ç½‘åœ°å€ï¼Œå¼‚åœ°å°ä¼™ä¼´å°±å¯ä»¥é€šè¿‡è¯¥å…¬ç½‘åœ°å€è¿œç¨‹è”æœºä¸€èµ·ç©äº†ï¼Œä¸éœ€è¦å…¬ç½‘ipï¼Œä¹Ÿä¸ç”¨è®¾ç½®è·¯ç”±å™¨ï¼Œæ“ä½œç®€å•ã€‚</p>
<p>ä¸‹é¢æ˜¯å®‰è£…cpolaræ­¥éª¤ï¼š</p>
<blockquote>
<p>Cpolarå®˜ç½‘åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cpolar.com%2F" target="_blank" title="https://www.cpolar.com/" ref="nofollow noopener noreferrer">www.cpolar.com</a></p>
</blockquote>
<p>ç‚¹å‡»è¿›å…¥cpolarå®˜ç½‘ï¼Œç‚¹å‡»<code>å…è´¹ä½¿ç”¨</code>æ³¨å†Œä¸€ä¸ªè´¦å·ï¼Œå¹¶ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„Cpolar</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5e8958daffda468684bca3e32d00d56e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=f%2Bwu%2FCL9yVGbQdGxaweCJ5SARBk%3D" alt="" loading="lazy"/></p>
<p>ç™»å½•æˆåŠŸåï¼Œç‚¹å‡»ä¸‹è½½Cpolaråˆ°æœ¬åœ°å¹¶å®‰è£…ï¼ˆä¸€è·¯é»˜è®¤å®‰è£…å³å¯ï¼‰æœ¬æ•™ç¨‹é€‰æ‹©ä¸‹è½½Windowsç‰ˆæœ¬ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f61a8016c23145f2abbce00e87aba527~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=Z4BPx5Y0MBh858qqJu3LtAKQjt4%3D" alt="image.png" loading="lazy"/></p>
<p>Cpolarå®‰è£…æˆåŠŸåï¼Œåœ¨æµè§ˆå™¨ä¸Šè®¿é—®<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A9200%25EF%25BC%258C%25E4%25BD%25BF%25E7%2594%25A8cpolar%25E8%25B4%25A6%25E5%258F%25B7%25E7%2599%25BB%25E5%25BD%2595%2C%25E7%2599%25BB%25E5%25BD%2595%25E5%2590%258E%25E5%258D%25B3%25E5%258F%25AF%25E7%259C%258B%25E5%2588%25B0Cpolar" target="_blank" title="http://localhost:9200%EF%BC%8C%E4%BD%BF%E7%94%A8cpolar%E8%B4%A6%E5%8F%B7%E7%99%BB%E5%BD%95,%E7%99%BB%E5%BD%95%E5%90%8E%E5%8D%B3%E5%8F%AF%E7%9C%8B%E5%88%B0Cpolar" ref="nofollow noopener noreferrer">http://localhost:9200ï¼Œä½¿ç”¨cpolarè´¦å·ç™»å½•,ç™»å½•åå³å¯çœ‹åˆ°Cpolar</a> web é…ç½®ç•Œé¢,ç»“ä¸‹æ¥åœ¨web ç®¡ç†ç•Œé¢é…ç½®å³å¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d44a88746d8c47439a83ec2f7ab9b0fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=idYYdPKjNWo1CEwXzfQlwO%2FAkMw%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥é…ç½®ä¸€ä¸‹æœ¬åœ° Minecraft çš„å…¬ç½‘åœ°å€ï¼Œ</p>
<p>ç™»å½•åï¼Œç‚¹å‡»å·¦ä¾§ä»ªè¡¨ç›˜çš„éš§é“ç®¡ç†â€”â€”åˆ›å»ºéš§é“ï¼Œ</p>
<p>åˆ›å»ºä¸€ä¸ª Minecraft çš„å…¬ç½‘tcpåœ°å€éš§é“ï¼š</p>
<ul>
<li>éš§é“åç§°ï¼šå¯è‡ªå®šä¹‰å‘½åï¼Œæ³¨æ„ä¸è¦ä¸å·²æœ‰çš„éš§é“åç§°é‡å¤</li>
<li>åè®®ï¼šé€‰æ‹© tcp</li>
<li>æœ¬åœ°åœ°å€ï¼š25565</li>
<li>åŸŸåç±»å‹ï¼šå…è´¹é€‰æ‹©éšæœºåŸŸå</li>
<li>åœ°åŒºï¼šé€‰æ‹©China Top</li>
</ul>
<p>ç‚¹å‡»åˆ›å»º</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/959272416d89496cbeb3946606c4c7b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=6VWA7wcQJnyrMcTTvpJKSXH8BMk%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åæ‰“å¼€åœ¨çº¿éš§é“åˆ—è¡¨,æŸ¥çœ‹å¹¶ä¸”å¤åˆ¶å…¬ç½‘åœ°å€ï¼Œæ³¨æ„<code>tcp://</code>æ— éœ€å¤åˆ¶</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bebdfdf1a6d4e7dbc6028c428d0d56b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=hcs7iUcRVPcvYeoQSuQ5Hf2KFRw%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-7">4. å…¬ç½‘è”æœºMinecraft</h2>
<p>æ‰“å¼€æˆ‘çš„ä¸–ç•Œ,é€‰æ‹©å¤šäººæ¸¸æˆ,ç‚¹å‡»åˆšæ‰åˆ›å»ºçš„æœåŠ¡å™¨é€‰æ‹©ç¼–è¾‘ï¼Œä½¿ç”¨cpolarä¸­ç”Ÿæˆçš„å…¬ç½‘åœ°å€è¿›è¡Œè¿æ¥ï¼Œç‚¹å‡»å®Œæˆ</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/093c02449ea84e00ae2e1de0a4bea960~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=Z8%2BmsS69Xq4Ygosv%2B6vhys7a7B8%3D" alt="image.png" loading="lazy"/></p>
<p>æˆåŠŸè¿œç¨‹å¤šäººè”æœº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b016403808742b5bba3b8bdfd51ff20~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=hnDhBYZhWHH3x4OB3TT%2B3bmHeBo%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å°ç»“</strong></p>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦ç»å¸¸å’Œå°ä¼™ä¼´ä»¬è”æœºæ¸¸æˆæˆ–è€…é•¿æ—¶é—´æ¸¸æˆï¼Œç”±äºåˆšæ‰åˆ›å»ºçš„æ˜¯éšæœºçš„åœ°å€ï¼Œ24å°æ—¶ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦‚æœä¸æƒ³æ¯æ¬¡è”æœºæ¸¸æˆéƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªå…¬ç½‘TCPéš§é“ï¼Œå¯ä»¥é€‰æ‹©åˆ›å»ºä¸€ä¸ªå›ºå®šçš„tcpåœ°å€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-8">5. é…ç½®å›ºå®šè¿œç¨‹è”æœºç«¯å£åœ°å€</h2>
<p>æˆ‘ä»¬æ¥ä¸‹æ¥ä¸ºå…¶é…ç½®å›ºå®šçš„TCPç«¯å£åœ°å€ï¼Œè¯¥åœ°å€ä¸ä¼šå˜åŒ–ï¼Œæ–¹ä¾¿å°ä¼™ä¼´è¿œç¨‹è”æœºï¼Œè€Œæ— éœ€æ¯å¤©é‡å¤ä¿®æ”¹æœåŠ¡å™¨åœ°å€ã€‚</p>
<blockquote>
<p>é…ç½®å›ºå®štcpç«¯å£åœ°å€éœ€è¦å°†cpolarå‡çº§åˆ°ä¸“ä¸šç‰ˆå¥—é¤æˆ–ä»¥ä¸Šã€‚</p>
</blockquote>
<p>ç™»å½•<a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cpolar.com%2F" target="_blank" title="https://www.cpolar.com/" ref="nofollow noopener noreferrer">cpolarå®˜ç½‘</a>ï¼Œç‚¹å‡»å·¦ä¾§çš„é¢„ç•™ï¼Œæ‰¾åˆ°ä¿ç•™çš„tcpåœ°å€ï¼Œæˆ‘ä»¬æ¥ä¸ºæˆ‘çš„ä¸–ç•Œä¿ç•™ä¸€ä¸ªå›ºå®štcpåœ°å€ï¼š</p>
<ul>
<li>åœ°åŒºï¼šé€‰æ‹©China vip</li>
<li>æè¿°ï¼šå³å¤‡æ³¨ï¼Œå¯è‡ªå®šä¹‰</li>
</ul>
<p>ç‚¹å‡»<code>ä¿ç•™</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d31c99852d8546fca3e8a7c2f0cc1107~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=yiWnsXd3%2BaZy9cYAHZRoAFJp4Jc%3D" alt="image.png" loading="lazy"/>
åœ°å€ä¿ç•™æˆåŠŸåï¼Œç³»ç»Ÿä¼šç”Ÿæˆç›¸åº”çš„å›ºå®šå…¬ç½‘åœ°å€ï¼Œå°†å…¶å¤åˆ¶ä¸‹æ¥ï¼Œæ³¨æ„æ— éœ€å¤åˆ¶<code>tcp://</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6964de0a5ede4f70a4626b20d7c419c4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=Qfg476IiDAP1JQ5pI%2F%2B3sGFyL00%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨cpolar web uiç®¡ç†ç•Œé¢ï¼Œç‚¹å‡»å·¦ä¾§ä»ªè¡¨ç›˜çš„éš§é“ç®¡ç†â€”â€”éš§é“åˆ—è¡¨ï¼Œæ‰¾åˆ°å‰é¢åˆ›å»ºçš„æˆ‘çš„ä¸–ç•Œéš§é“ï¼Œç‚¹å‡»å³ä¾§çš„<code>ç¼–è¾‘</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/14aee9a610ed4ddc8b2b0db26bce9996~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=VlK383VUc9prbwNM3qywTVVSTXg%3D" alt="image.png" loading="lazy"/></p>
<p>ä¿®æ”¹éš§é“ä¿¡æ¯ï¼Œå°†ä¿ç•™æˆåŠŸçš„å›ºå®štcpåœ°å€é…ç½®åˆ°éš§é“ä¸­</p>
<ul>
<li>ç«¯å£ç±»å‹ï¼šä¿®æ”¹ä¸ºå›ºå®štcpç«¯å£</li>
<li>é¢„ç•™çš„tcpåœ°å€ï¼šå¡«å†™ä¿ç•™æˆåŠŸçš„åœ°å€</li>
</ul>
<p>ç‚¹å‡»<code>æ›´æ–°</code></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/615b91f79e4949fca7b2abc76fb6f55d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=2Ca%2BVAcqnuhyxbwqpcL%2BQiKjZ74%3D" alt="image.png" loading="lazy"/></p>
<p>éš§é“æ›´æ–°æˆåŠŸåï¼Œç‚¹å‡»å·¦ä¾§ä»ªè¡¨ç›˜çš„çŠ¶æ€â€”â€”åœ¨çº¿éš§é“åˆ—è¡¨ï¼Œæ‰¾åˆ°æˆ‘çš„ä¸–ç•Œéš§é“ï¼Œå¯ä»¥çœ‹åˆ°å…¬ç½‘åœ°å€å·²ç»æ›´æ–°æˆä¸ºäº†å›ºå®štcpåœ°å€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82d097656bd24f56a2ec50cfe33262b5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=QldJdjFsWSr6yWpBfwpPkAIp0Fc%3D" alt="image.png" loading="lazy"/></p>
<p>æ‰“å¼€æˆ‘çš„ä¸–ç•Œ,ç‚¹å‡»å¤šäººæ¸¸æˆ,é€‰æ‹©åˆšæ‰çš„æœåŠ¡å™¨è¿›è¡Œç¼–è¾‘,è¾“å…¥ä¸Šé¢å›ºå®šçš„å…¬ç½‘TCPåœ°å€ç«¯å£è¿œç¨‹è”æœº</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dadc4622d70748b5a77da80c3e7dacc6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=uFMYhQ2IGuRoB6SGuh%2BKlxpQdTg%3D" alt="image.png" loading="lazy"/></p>
<p>å…¬ç½‘è¿œç¨‹è”æœºæˆåŠŸï¼ç°åœ¨ï¼Œè¯¥å…¬ç½‘åœ°å€ä¸ä¼šå†éšæœºå˜åŒ–äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/959294bf0d17497c885ac904fb34943c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5o6Y6YeR6ICF6Zi_6LGq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770691573&amp;x-signature=imwfeRsHepbYWLsutY7Ls8RTOqk%3D" alt="image.png" loading="lazy"/></p>
<p>æ€»ç»“æ¥è¯´ï¼ŒMCSManager å‡­å€Ÿç®€å•æ˜“æ“ä½œçš„ç‰¹æ€§ï¼Œèƒ½å¸®åŠ©æ™®é€šç©å®¶å¿«é€Ÿæ­å»ºæˆ‘çš„ä¸–ç•ŒæœåŠ¡å™¨ï¼Œè§£å†³äº†æœåŠ¡å™¨æ­å»ºé—¨æ§›é«˜çš„é—®é¢˜ï¼Œä½†å±€åŸŸç½‘è”æœºçš„é™åˆ¶ä¼šå¤§å¹…é™ä½ä½¿ç”¨ä½“éªŒã€‚è€Œ cpolar å†…ç½‘ç©¿é€åˆ™æ°å¥½å¼¥è¡¥äº†è¿™ä¸€çŸ­æ¿ï¼Œæ— éœ€å¤æ‚é…ç½®å°±èƒ½å®ç°å…¬ç½‘è”æœºï¼Œæ— è®ºæ˜¯å­¦ç”Ÿå…šè·¨åœ°åŸŸå’Œå®¤å‹ç©æ¸¸æˆï¼Œè¿˜æ˜¯å®¶åº­ç”¨æˆ·å’Œå¼‚åœ°äº²å‹è”æœºï¼Œéƒ½èƒ½è½»æ¾å®ç°ã€‚è¿™ç§ç»„åˆæ—¢ä¿ç•™äº† MCSManager çš„æ˜“ç”¨æ€§ï¼Œåˆçªç ´äº†ç½‘ç»œç¯å¢ƒçš„é™åˆ¶ï¼Œè®©æˆ‘çš„ä¸–ç•Œç§æœè”æœºçœŸæ­£å®ç°äº†ä¸å—åœ°åŸŸã€ç½‘ç»œçš„çº¦æŸï¼Œæ»¡è¶³äº†æ™®é€šç©å®¶çš„å®é™…è”æœºéœ€æ±‚ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cpolar.com%2F" target="_blank" title="https://www.cpolar.com/" ref="nofollow noopener noreferrer">cpolarå®˜ç½‘-å®‰å…¨çš„å†…ç½‘ç©¿é€å·¥å…· | æ— éœ€å…¬ç½‘ip | è¿œç¨‹è®¿é—® | æ­å»ºç½‘ç«™</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue æ•™ç¨‹ è‡ªå®šä¹‰æŒ‡ä»¤ + ç”Ÿå‘½å‘¨æœŸå…¨è§£æ]]></title>    <link>https://juejin.cn/post/7601929765533794355</link>    <guid>https://juejin.cn/post/7601929765533794355</guid>    <pubDate>2026-02-02T14:39:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601929765533794355" data-draft-id="7601929765533777971" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue æ•™ç¨‹ è‡ªå®šä¹‰æŒ‡ä»¤ + ç”Ÿå‘½å‘¨æœŸå…¨è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-02-02T14:39:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢è‰²çš„å°é³„é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/4501859894316474"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue æ•™ç¨‹ è‡ªå®šä¹‰æŒ‡ä»¤ + ç”Ÿå‘½å‘¨æœŸå…¨è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4501859894316474/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢è‰²çš„å°é³„é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T14:39:53.000Z" title="Mon Feb 02 2026 14:39:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Vue ä¸­çš„è‡ªå®šä¹‰æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸæ˜¯å‰ç«¯å¼€å‘çš„æ ¸å¿ƒåŸºç¡€ï¼Œä¹Ÿæ˜¯é¢è¯•é«˜é¢‘è€ƒç‚¹ã€‚æœ¬æ–‡å°†ä»å®ç”¨è§’åº¦å‡ºå‘ï¼Œæ¢³ç†ä¸¤å¤§çŸ¥è¯†ç‚¹çš„æ ¸å¿ƒç”¨æ³•ï¼Œå†…å®¹ç®€æ´æ˜“æ‡‚ï¼Œè´´åˆå®é™…å¼€å‘åœºæ™¯ï¼ŒåŠ©åŠ›å¿«é€ŸæŒæ¡ï¼</p>
<h2 data-id="heading-0">ä¸€ã€è‡ªå®šä¹‰æŒ‡ä»¤ï¼šé«˜æ•ˆå°è£… DOM æ“ä½œ</h2>
<p>è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯ Vue æ‰©å±• DOM æ“ä½œèƒ½åŠ›çš„æ ¸å¿ƒæ–¹å¼ï¼Œä¸“é—¨ç”¨æ¥å°è£…é‡å¤çš„ DOM ç›¸å…³é€»è¾‘ï¼Œè½»é‡ä¸”æ˜“å¤ç”¨ï¼Œæ˜¯å†…ç½®æŒ‡ä»¤çš„é‡è¦è¡¥å……ã€‚</p>
<h3 data-id="heading-1">1. å‡½æ•°å¼è‡ªå®šä¹‰æŒ‡ä»¤</h3>
<p>åŸºç¡€æç®€å†™æ³•ï¼Œé€‚åˆæ— å¤šé˜¶æ®µæ§åˆ¶çš„ç®€å•åœºæ™¯ï¼Œå‡½æ•°ä¼šåœ¨æŒ‡ä»¤ç»‘å®šå…ƒç´ å’Œæ•°æ®æ›´æ–°æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€æ³¨å†Œï¼šv-focus è¾“å…¥æ¡†è‡ªåŠ¨èšç„¦</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'focus'</span>, <span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> {
  el.<span class="hljs-title function_">focus</span>() <span class="hljs-comment">// elä¸ºæŒ‡ä»¤ç»‘å®šçš„DOMå…ƒç´ ï¼Œå¯ç›´æ¥æ“ä½œ</span>
})
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šè¾“å…¥æ¡†è‡ªåŠ¨èšç„¦ã€ç®€å•æ–‡æœ¬æ ¼å¼åŒ–ã€å¿«é€Ÿä¿®æ”¹ DOM åŸºç¡€æ ·å¼ç­‰ã€‚</p>
<h3 data-id="heading-2">2. å¯¹è±¡å¼è‡ªå®šä¹‰æŒ‡ä»¤</h3>
<p>é€‚åˆé€»è¾‘å¤æ‚çš„åœºæ™¯ï¼Œé€šè¿‡å¤šä¸ªå†…ç½®é’©å­å‡½æ•°ï¼Œå®ç°æŒ‡ä»¤ä»ç»‘å®šåˆ°è§£ç»‘çš„å…¨é˜¶æ®µç²¾ç¡®æ§åˆ¶ï¼Œæ¯ä¸ªé’©å­å„å¸å…¶èŒã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å…¨å±€æ³¨å†Œï¼šå¯¹è±¡å¼è‡ªå®šä¹‰æŒ‡ä»¤</span>
<span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">directive</span>(<span class="hljs-string">'æŒ‡ä»¤å'</span>, {
  <span class="hljs-title function_">bind</span>(<span class="hljs-params">el</span>) { <span class="hljs-comment">// æŒ‡ä»¤ç»‘å®šå…ƒç´ æ—¶æ‰§è¡Œ</span>
    el.<span class="hljs-property">style</span>.<span class="hljs-property">color</span> = <span class="hljs-string">'red'</span>
  },
  <span class="hljs-title function_">update</span>(<span class="hljs-params">el, binding</span>) { <span class="hljs-comment">// æ•°æ®æ›´æ–°æ—¶æ‰§è¡Œ</span>
    el.<span class="hljs-property">innerText</span> = binding.<span class="hljs-property">value</span>
  }
})
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼šå…ƒç´ æ‹–æ‹½ã€å›¾ç‰‡æ‡’åŠ è½½ã€DOM äº‹ä»¶ç›‘å¬ / è§£ç»‘ç­‰éœ€è¦åˆ†é˜¶æ®µå¤„ç†çš„é€»è¾‘ã€‚</p>
<h3 data-id="heading-3">3. è‡ªå®šä¹‰æŒ‡ä»¤æ ¸å¿ƒæ€»ç»“</h3>
<p><strong>æ ¸å¿ƒé’©å­æ‰§è¡Œé¡ºåº</strong></p>
<p>bindï¼ˆç»‘å®šï¼‰â†’ insertedï¼ˆæ’å…¥ DOMï¼‰â†’ updateï¼ˆæ•°æ®æ›´æ–°ï¼‰â†’ unbindï¼ˆè§£ç»‘ï¼‰</p>
<p><strong>å…³é”®æ³¨æ„äº‹é¡¹</strong></p>
<ol>
<li>æ‰€æœ‰é’©å­ä¸­ this æŒ‡å‘ windowï¼Œæ— æ³•é€šè¿‡ this è®¿é—®ç»„ä»¶å®ä¾‹ï¼›</li>
<li>å…¨å±€æ³¨å†Œéœ€åœ¨ Vue å®ä¾‹åˆ›å»ºå‰æ‰§è¡Œï¼Œå±€éƒ¨æ³¨å†Œä»…å½“å‰ç»„ä»¶å¯ç”¨ï¼›</li>
<li>æ¶‰åŠäº‹ä»¶ / å®šæ—¶å™¨æ—¶ï¼ŒåŠ¡å¿…åœ¨ unbind ä¸­æ¸…ç†ï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</li>
</ol>
<h2 data-id="heading-4">äºŒã€Vue ç”Ÿå‘½å‘¨æœŸï¼šç²¾å‡†æ§åˆ¶ç»„ä»¶çš„ â€œä¸€ç”Ÿâ€</h2>
<p>ç”Ÿå‘½å‘¨æœŸæ˜¯ Vue ç»„ä»¶ä»åˆ›å»ºâ†’æŒ‚è½½â†’æ›´æ–°â†’é”€æ¯çš„å®Œæ•´æµç¨‹ï¼ŒVue ä¼šæŒ‰å›ºå®šé¡ºåºè‡ªåŠ¨è§¦å‘å¯¹åº”çš„é’©å­å‡½æ•°ã€‚</p>
<h3 data-id="heading-5">1. ç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒé˜¶æ®µï¼šæŒ‚è½½æµç¨‹</h3>
<p>æŒ‚è½½é˜¶æ®µæ˜¯ç»„ä»¶ä»åˆå§‹åŒ–åˆ°æ¸²æŸ“åˆ°é¡µé¢çš„æ ¸å¿ƒè¿‡ç¨‹ï¼Œå¼€å‘ä¸­æœ€å¸¸ç”¨ï¼Œæ‰§è¡Œé¡ºåºå›ºå®šï¼šbeforeCreate â†’ created â†’ beforeMount â†’ mountedï¼Œä»…æ‰§è¡Œä¸€æ¬¡ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">message</span>: <span class="hljs-string">'ç”Ÿå‘½å‘¨æœŸæ¼”ç¤º'</span>,
      <span class="hljs-attr">list</span>: []
    }
  },
  <span class="hljs-title function_">beforeCreate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeCreateï¼šdata/props æœªåˆå§‹åŒ–ï¼Œæ— æ³•è®¿é—®'</span>)
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'createdï¼šdata/props å·²åˆå§‹åŒ–ï¼Œå¯è®¿é—®'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getList</span>() <span class="hljs-comment">// å‘é€åˆå§‹åŒ–æ•°æ®è¯·æ±‚ï¼ˆæ— éœ€ä¾èµ–DOMï¼‰</span>
  },
  <span class="hljs-title function_">beforeMount</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeMountï¼šæ¨¡æ¿ç¼–è¯‘å®Œæˆï¼Œå³å°†æŒ‚è½½åˆ°DOM'</span>)
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'mountedï¼šDOMå·²æŒ‚è½½ï¼Œå¯æ“ä½œ'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span>)
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// æ¨¡æ‹Ÿæ•°æ®è¯·æ±‚</span>
    <span class="hljs-title function_">getList</span>(<span class="hljs-params"/>) {
      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">list</span> = [<span class="hljs-string">'Vue'</span>, <span class="hljs-string">'è‡ªå®šä¹‰æŒ‡ä»¤'</span>, <span class="hljs-string">'ç”Ÿå‘½å‘¨æœŸ'</span>]
      }, <span class="hljs-number">500</span>)
    }
  }
}
</code></pre>
<ol>
<li>beforeCreateï¼šå®ä¾‹åˆšåˆ›å»ºï¼Œæ— æ•°æ®ã€æ—  DOMï¼Œå‡ ä¹ä¸ç”¨ï¼›</li>
<li>createdï¼šæ•°æ®å°±ç»ªï¼Œå¯è®¿é—® data/propsï¼Œé€‚åˆåˆå§‹åŒ–æ•°æ®ã€å‘é€æ—  DOM ä¾èµ–çš„è¯·æ±‚ï¼›</li>
<li>beforeMountï¼šæ¨¡æ¿ç¼–è¯‘å®Œæˆï¼ŒæœªæŒ‚è½½ DOMï¼Œå¯åšæœ€åä¸€æ¬¡æ•°æ®ä¿®æ”¹ï¼›</li>
<li>mountedï¼šDOM å°±ç»ªï¼Œå¯è®¿é—® / æ“ä½œ DOMï¼Œé€‚åˆåˆå§‹åŒ–ç¬¬ä¸‰æ–¹æ’ä»¶ã€æ‰§è¡Œ DOM ç›¸å…³é€»è¾‘ã€‚</li>
</ol>
<h3 data-id="heading-6">2. ç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒé˜¶æ®µï¼šæ›´æ–° + é”€æ¯æµç¨‹</h3>
<p>æ›´æ–°é˜¶æ®µä¼šéšæ•°æ®å˜åŒ–å¤šæ¬¡è§¦å‘ï¼Œé”€æ¯é˜¶æ®µä»…æ‰§è¡Œä¸€æ¬¡ï¼Œæ ¸å¿ƒæ˜¯æ¸…ç†èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">message</span>: <span class="hljs-string">'åˆå§‹æ•°æ®'</span>,
      <span class="hljs-attr">timer</span>: <span class="hljs-literal">null</span>
    }
  },
  <span class="hljs-title function_">created</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// åˆå§‹åŒ–å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å®šæ—¶å™¨è¿è¡Œä¸­'</span>)
    }, <span class="hljs-number">1000</span>)
  },
  <span class="hljs-comment">// æ›´æ–°é˜¶æ®µï¼šæ•°æ®å˜åŒ–ï¼Œè§†å›¾æœªæ›´æ–°æ—¶æ‰§è¡Œ</span>
  <span class="hljs-title function_">beforeUpdate</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeUpdateï¼šæ•°æ®å·²æ”¹ï¼Œè§†å›¾æœªæ›´'</span>)
  },
  <span class="hljs-comment">// æ›´æ–°é˜¶æ®µï¼šæ•°æ®å˜åŒ–ï¼Œè§†å›¾æ›´æ–°å®Œæˆåæ‰§è¡Œ</span>
  <span class="hljs-title function_">updated</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'updatedï¼šæ•°æ®å·²æ”¹ï¼Œè§†å›¾å·²æ›´'</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span>)
  },
  <span class="hljs-comment">// é”€æ¯é˜¶æ®µï¼šç»„ä»¶å³å°†å¸è½½ï¼Œå®ä¾‹ä»å¯è®¿é—®ï¼ˆæ ¸å¿ƒï¼šæ¸…ç†èµ„æºï¼‰</span>
  <span class="hljs-title function_">beforeDestroy</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'beforeDestroyï¼šç»„ä»¶å³å°†é”€æ¯ï¼Œæ¸…ç†èµ„æº'</span>)
    <span class="hljs-built_in">clearInterval</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">timer</span>) <span class="hljs-comment">// æ¸…é™¤å®šæ—¶å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">$el</span> = <span class="hljs-literal">null</span> <span class="hljs-comment">// é‡Šæ”¾DOMå¼•ç”¨</span>
  },
  <span class="hljs-comment">// é”€æ¯é˜¶æ®µï¼šç»„ä»¶å·²å¸è½½ï¼Œæ•°æ®/DOMå‡ä¸å¯è®¿é—®</span>
  <span class="hljs-title function_">destroyed</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'destroyedï¼šç»„ä»¶å·²é”€æ¯ï¼Œæ— æ³•æ“ä½œ'</span>)
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// ä¿®æ”¹æ•°æ®ï¼Œè§¦å‘æ›´æ–°é˜¶æ®µ</span>
    <span class="hljs-title function_">updateMsg</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">message</span> = <span class="hljs-string">'ä¿®æ”¹åçš„æ–°æ•°æ®'</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-7">3. ç”Ÿå‘½å‘¨æœŸæ ¸å¿ƒæ€»ç»“</h3>
<p><strong>æ•´ä½“æ‰§è¡Œé¡ºåº</strong></p>
<p>åˆ›å»ºé˜¶æ®µâ†’ æŒ‚è½½é˜¶æ®µâ†’ æ›´æ–°é˜¶æ®µâ†’ é”€æ¯é˜¶æ®µ</p>
<p><strong>æ ¸å¿ƒå¼€å‘åŸåˆ™</strong></p>
<ul>
<li>æ•°æ®ç›¸å…³é€»è¾‘ï¼ˆè¯·æ±‚ã€åˆå§‹åŒ–ï¼‰æ”¾ createdï¼ŒDOM ç›¸å…³é€»è¾‘æ”¾ mountedï¼›</li>
<li>æ•°æ®æ›´æ–°åéœ€æ“ä½œ DOMï¼Œä¼˜å…ˆç”¨ this.$nextTickï¼Œè€Œé updatedï¼›</li>
<li>ç»„ä»¶é”€æ¯å‰ï¼Œå¿…é¡»åœ¨ beforeDestroy ä¸­æ¸…ç†æ‰€æœ‰èµ„æºï¼ˆå®šæ—¶å™¨ã€äº‹ä»¶ã€æ’ä»¶å®ä¾‹ï¼‰ï¼›</li>
</ul>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>è‡ªå®šä¹‰æŒ‡ä»¤å’Œç”Ÿå‘½å‘¨æœŸæ˜¯ Vue å¼€å‘çš„åŸºç¡€ä¸­çš„åŸºç¡€ï¼Œä¹Ÿæ˜¯è¿›é˜¶çš„å…³é”®ï¼š</p>
<ul>
<li>è‡ªå®šä¹‰æŒ‡ä»¤ï¼šè®© DOM æ“ä½œæ›´é«˜æ•ˆã€æ›´å¤ç”¨ï¼Œæ ¸å¿ƒæ˜¯<strong>æŒ‰éœ€é€‰æ‹©å‡½æ•°å¼ / å¯¹è±¡å¼ï¼Œåšå¥½èµ„æºæ¸…ç†</strong>ï¼›</li>
<li>ç”Ÿå‘½å‘¨æœŸï¼šè®©ç»„ä»¶è¡Œä¸ºæ›´å¯æ§ï¼Œæ ¸å¿ƒæ˜¯<strong>åˆ†æ¸…æ•°æ®å°±ç»ªå’Œ DOM å°±ç»ªæ—¶æœºï¼Œç‰¢è®°é”€æ¯é˜¶æ®µæ¸…ç†èµ„æº</strong>ã€‚</li>
</ul>
<blockquote>
<p>å¦‚æœè§‰å¾—æœ¬æ–‡å¯¹ä½ æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç‚¹èµ + æ”¶è— + å…³æ³¨ï¼Œåç»­æŒç»­åˆ†äº« Vue å®ç”¨å¼€å‘æŠ€å·§å’Œæ ¸å¿ƒçŸ¥è¯†ç‚¹è§£æï½</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç°ä»£ç½‘é¡µæ€§èƒ½ä¼˜åŒ–ï¼šåˆ©ç”¨ IntersectionObserver`å®ç°é«˜æ€§èƒ½å›¾ç‰‡æ‡’åŠ è½½]]></title>    <link>https://juejin.cn/post/7601929765533876275</link>    <guid>https://juejin.cn/post/7601929765533876275</guid>    <pubDate>2026-02-02T15:23:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601929765533876275" data-draft-id="7602133286643892274" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç°ä»£ç½‘é¡µæ€§èƒ½ä¼˜åŒ–ï¼šåˆ©ç”¨ IntersectionObserver`å®ç°é«˜æ€§èƒ½å›¾ç‰‡æ‡’åŠ è½½"/> <meta itemprop="keywords" content="å‰ç«¯,æ€§èƒ½ä¼˜åŒ–"/> <meta itemprop="datePublished" content="2026-02-02T15:23:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§ƒå¤´æ•²ç å°å§å§"/> <meta itemprop="url" content="https://juejin.cn/user/24668014656249"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç°ä»£ç½‘é¡µæ€§èƒ½ä¼˜åŒ–ï¼šåˆ©ç”¨ IntersectionObserver`å®ç°é«˜æ€§èƒ½å›¾ç‰‡æ‡’åŠ è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/24668014656249/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§ƒå¤´æ•²ç å°å§å§
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:23:20.000Z" title="Mon Feb 02 2026 15:23:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    7
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æ‘˜è¦ï¼š</strong> åœ¨ç½‘é¡µå¼€å‘ä¸­ï¼Œé¦–å±åŠ è½½é€Ÿåº¦ç›´æ¥å†³å®šäº†ç”¨æˆ·çš„ç•™å­˜ç‡ã€‚å½“é¡µé¢ä¸­å……æ–¥ç€å¤§é‡é«˜åˆ†è¾¨ç‡å›¾ç‰‡æ—¶ï¼Œå¦‚ä½•é¿å…â€œç€‘å¸ƒæµâ€å¼çš„æ¼«é•¿ç­‰å¾…ï¼Ÿæœ¬æ–‡å°†å¸¦ä½ ä»é›¶æ„å»ºä¸€ä¸ªåŸºäº <code>IntersectionObserver</code> çš„å›¾ç‰‡æ‡’åŠ è½½æ–¹æ¡ˆï¼Œå‘Šåˆ«ä¼ ç»Ÿçš„ <code>onscroll</code> äº‹ä»¶ç›‘å¬ï¼Œç”¨è®¾è®¡æ¨¡å¼çš„æ€æƒ³è§£å†³æ€§èƒ½ç—›ç‚¹ã€‚</p>
<hr/>
<h4 data-id="heading-0">1. ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦â€œæ‡’åŠ è½½â€ï¼ŸğŸ¢</h4>
<p>åœ¨ä¼ ç»Ÿçš„ç½‘é¡µåŠ è½½æµç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¼šè§£æ HTML å¹¶ç«‹å³è¯·æ±‚ <code>&lt;img&gt;</code> æ ‡ç­¾ä¸­çš„ <code>src</code> å±æ€§ã€‚è¿™ä¼šå¯¼è‡´ä¸€ä¸ªä¸¥é‡çš„é—®é¢˜ï¼š</p>
<ul>
<li><strong>èµ„æºæµªè´¹ï¼š</strong> å³ä½¿å›¾ç‰‡ä½äºå±å¹•å¯è§†åŒºåŸŸï¼ˆViewportï¼‰ä¹‹å¤–ï¼Œæµè§ˆå™¨ä¹Ÿä¼šå‘èµ· HTTP è¯·æ±‚ä¸‹è½½å®ƒã€‚</li>
<li><strong>é¦–å±é˜»å¡ï¼š</strong> å¤§é‡çš„å›¾ç‰‡è¯·æ±‚å ç”¨äº†å¸¦å®½å’Œå¹¶å‘è¿æ¥æ•°ï¼Œå¯¼è‡´ HTMLã€CSS å’Œé¦–å±å…³é”®èµ„æºåŠ è½½å˜æ…¢ã€‚</li>
<li><strong>ç”¨æˆ·ä½“éªŒå·®ï¼š</strong> ç”¨æˆ·çœ‹åˆ°çš„æ˜¯ä¸€ä¸ªç¼“æ…¢åŠ è½½ã€ç”šè‡³â€œå¡é¡¿â€çš„é¡µé¢ã€‚</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> è®©è§†çª—å¤–çš„å›¾ç‰‡â€œå·ä¸ªæ‡’â€ï¼Œåªæœ‰å½“ç”¨æˆ·æ»šåŠ¨åˆ°å®ƒé™„è¿‘æ—¶ï¼Œå†åŠ è½½çœŸå®çš„å›¾ç‰‡èµ„æºã€‚</p>
<hr/>
<h4 data-id="heading-1">2. ä¼ ç»Ÿæ–¹æ¡ˆ vs ç°ä»£æ–¹æ¡ˆ ğŸ“Š</h4>




















<table><thead><tr><th align="left">æ–¹æ¡ˆ</th><th align="left">åŸç†</th><th align="left">ç¼ºç‚¹</th></tr></thead><tbody><tr><td align="left"><strong>ä¼ ç»Ÿ OnScroll</strong></td><td align="left">ç›‘å¬ <code>window.onscroll</code> äº‹ä»¶ï¼Œé€šè¿‡ <code>getBoundingClientRect</code> è®¡ç®—ä½ç½®</td><td align="left"><strong>æ€§èƒ½æ€æ‰‹</strong>ï¼šæ»šåŠ¨äº‹ä»¶è§¦å‘é¢‘ç‡æé«˜ï¼Œé¢‘ç¹è®¡ç®— DOM ä½ç½®ä¼šå¯¼è‡´é¡µé¢å¡é¡¿ï¼ˆé‡æ’/é‡ç»˜ï¼‰ã€‚</td></tr><tr><td align="left"><strong>ç°ä»£ IntersectionObserver</strong></td><td align="left">æµè§ˆå™¨åŸç”Ÿæä¾›çš„è§‚å¯Ÿè€…æ¨¡å¼ API</td><td align="left"><strong>é«˜æ€§èƒ½</strong>ï¼šç”±æµè§ˆå™¨å†…æ ¸åœ¨æ¸²æŸ“å±‚ç›´æ¥å¤„ç†ï¼Œä¸å ç”¨ä¸»çº¿ç¨‹ï¼Œæ— æ€§èƒ½é—®é¢˜ã€‚</td></tr></tbody></table>
<blockquote>
<p><strong>ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µï¼š</strong> <code>IntersectionObserver</code> æ˜¯ä¸€ç§å¼‚æ­¥è§‚å¯Ÿæœºåˆ¶ã€‚å®ƒä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å»â€œé—®â€æµè§ˆå™¨â€œå›¾ç‰‡åœ¨è§†çª—é‡Œäº†å—ï¼Ÿâ€ï¼Œè€Œæ˜¯æµè§ˆå™¨ä¼šä¸»åŠ¨â€œå‘Šè¯‰â€æˆ‘ä»¬â€œå›¾ç‰‡è¿›å…¥è§†çª—äº†â€ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-2">3. ä»£ç å®æˆ˜ï¼šä»é›¶å®ç°æ‡’åŠ è½½ ğŸ› ï¸</h4>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç®€å•çš„ Demoï¼Œæ‰‹æŠŠæ‰‹æ•™ä½ å®ç°ä¸€ä¸ªé«˜æ€§èƒ½çš„å›¾ç‰‡æ‡’åŠ è½½ç»„ä»¶ã€‚</p>
<p><strong>ç¬¬ä¸€æ­¥ï¼šHTML ç»“æ„ï¼ˆæ•°æ®åˆ†ç¦»ï¼‰</strong></p>
<p>æˆ‘ä»¬è¦æ‰“ç ´ç›´æ¥åœ¨ <code>src</code> å†™çœŸå®åœ°å€çš„ä¹ æƒ¯ã€‚åˆ©ç”¨ HTML5 çš„ <code>data-*</code> å±æ€§æ¥å­˜å‚¨çœŸå®åœ°å€ï¼Œ<code>src</code> åªæ”¾ä¸€ä¸ªæå°çš„å ä½å›¾ï¼ˆPlaceholderï¼‰ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-comment">&lt;!-- å ä½å›¾ï¼ˆæå°ï¼Œä¼˜å…ˆåŠ è½½ï¼‰ --&gt;</span>
<span class="hljs-comment">&lt;!-- çœŸå®å›¾åœ°å€ï¼ˆå­˜åœ¨ data-src é‡Œï¼Œä¸å‘èµ·è¯·æ±‚ï¼‰ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">img</span> 
  <span class="hljs-attr">class</span>=<span class="hljs-string">"lazy"</span> 
  <span class="hljs-attr">src</span>=<span class="hljs-string">"https://img10.360buyimg.com/wq/jfs/t24601/190/890984006/4559/731564fc/5b7f9b7bN3ccd29ab.png"</span> 
  <span class="hljs-attr">data-src</span>=<span class="hljs-string">"https://img.36krcdn.com/hsossms/20260119/çœŸå®é«˜æ¸…å¤§å›¾åœ°å€"</span> 
  <span class="hljs-attr">alt</span>=<span class="hljs-string">""</span>
&gt;</span>
</code></pre>
<p><strong>ç¬¬äºŒæ­¥ï¼šJavaScript æ ¸å¿ƒé€»è¾‘</strong></p>
<p>è¿™æ˜¯æœ¬æ–‡çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚æˆ‘ä»¬åˆ©ç”¨ <code>IntersectionObserver</code> æ¥ç›‘å¬å›¾ç‰‡å…ƒç´ ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// 1. æ‰¾åˆ°æ‰€æœ‰éœ€è¦æ‡’åŠ è½½çš„å›¾ç‰‡
const <span class="hljs-attr">images</span> = document.querySelectorAll(<span class="hljs-string">'.lazy'</span>)<span class="hljs-comment">;</span>

// 2. å®ä¾‹åŒ–è§‚å¯Ÿè€…å¯¹è±¡
// entries: æ‰€æœ‰è¢«è§‚å¯Ÿå…ƒç´ çš„çŠ¶æ€é›†åˆ
// isIntersecting: å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å…ƒç´ æ˜¯å¦ä¸è§†çª—å‘ç”Ÿäº¤å‰ï¼ˆå³å‡ºç°åœ¨è§†çª—ä¸­ï¼‰
const <span class="hljs-attr">observer</span> = new IntersectionObserver((entries) =&gt; {
  entries.forEach(<span class="hljs-attr">entry</span> =&gt; {
    if (entry.isIntersecting) {
      // 3. å¦‚æœå›¾ç‰‡å‡ºç°åœ¨è§†çª—ä¸­
      const <span class="hljs-attr">img</span> = entry.target<span class="hljs-comment">;</span>
      const <span class="hljs-attr">originalSrc</span> = img.dataset.src<span class="hljs-comment">; // è·å–çœŸå®åœ°å€</span>
      
      console.log('åŠ è½½çœŸå®å›¾ç‰‡:', originalSrc)<span class="hljs-comment">;</span>
      
      // 4. å°† data-src çš„å€¼èµ‹ç»™ srcï¼Œè§¦å‘å›¾ç‰‡åŠ è½½
      <span class="hljs-attr">img.src</span> = originalSrc<span class="hljs-comment">;</span>
      
      // 5. åŠ è½½å®Œæˆåï¼Œå–æ¶ˆå¯¹è¯¥å›¾ç‰‡çš„è§‚å¯Ÿï¼ˆä¼˜åŒ–æ€§èƒ½ï¼‰
      observer.unobserve(img)<span class="hljs-comment">;</span>
    }
  })<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// 3. å¼€å§‹è§‚å¯Ÿï¼šç»™æ¯ä¸€å¼ å›¾ç‰‡åŠ ä¸Šè§‚å¯ŸæŒ‡ä»¤
images.forEach(<span class="hljs-attr">img</span> =&gt; observer.observe(img))<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h4 data-id="heading-3">4. åŸç†æ·±åº¦è§£æ ğŸ”</h4>
<p>è®©æˆ‘ä»¬æ‹†è§£ä¸€ä¸‹è¿™æ®µä»£ç èƒŒåçš„é€»è¾‘ï¼š</p>
<ol>
<li>
<p><strong>è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)ï¼š</strong></p>
<ul>
<li><strong>è§‚å¯Ÿè€… (Observer)ï¼š</strong> <code>new IntersectionObserver(...)</code> å®ä¾‹ã€‚</li>
<li><strong>è¢«è§‚å¯Ÿè€… (Target)ï¼š</strong> æ‰€æœ‰çš„ <code>&lt;img class="lazy"&gt;</code> å…ƒç´ ã€‚</li>
<li><strong>å›è°ƒ (Callback)ï¼š</strong> å½“è¢«è§‚å¯Ÿè€…çš„çŠ¶æ€ï¼ˆä¸è§†çª—çš„äº¤å‰çŠ¶æ€ï¼‰å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ä¸­ä¼ å…¥çš„å‡½æ•°ã€‚</li>
</ul>
</li>
<li>
<p><strong>ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ï¼š</strong></p>
<ul>
<li><strong>å‡ºç°å³åŠ è½½ï¼š</strong> åˆ©ç”¨ <code>entry.isIntersecting</code> åˆ¤æ–­å›¾ç‰‡æ˜¯å¦è¿›å…¥è§†é‡ã€‚</li>
<li><strong>åŠæ—¶æ­¢æŸï¼š</strong> ä¸€æ—¦å›¾ç‰‡åŠ è½½å®Œæˆï¼ˆ<code>img.src = originalSrc</code>ï¼‰ï¼Œç«‹å³è°ƒç”¨ <code>observer.unobserve(img)</code>ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œå›¾ç‰‡åŠ è½½åï¼Œè§‚å¯Ÿè€…å°±ä¸å†å…³å¿ƒè¿™å¼ å›¾ç‰‡äº†ï¼Œå‡å°‘äº†åç»­çš„è®¡ç®—å¼€é”€ã€‚</li>
</ul>
</li>
<li>
<p><strong>æ•°æ®å±æ€§ (Dataset)ï¼š</strong></p>
<ul>
<li>ä½¿ç”¨ <code>img.dataset.src</code> æ¥è¯»å– <code>data-src</code> å±æ€§ã€‚è¿™æ˜¯æ ‡å‡†çš„ DOM æ“ä½œæ–¹å¼ï¼Œæ¯” <code>getAttribute</code> æ›´åŠ è¯­ä¹‰åŒ–ã€‚</li>
</ul>
</li>
</ol>
<hr/>
<h4 data-id="heading-4">5. æ€»ç»“ä¸å±•æœ› ğŸ“</h4>
<p>é€šè¿‡ä½¿ç”¨ <code>IntersectionObserver</code>ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ª<strong>æ— æ„ŸçŸ¥ã€é«˜æ€§èƒ½</strong>çš„å›¾ç‰‡æ‡’åŠ è½½æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>ä¼˜åŠ¿ï¼š</strong> ä»£ç ç®€æ´ï¼Œæ€§èƒ½ä¼˜å¼‚ï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
<li><strong>é€‚ç”¨åœºæ™¯ï¼š</strong> ç”µå•†é¦–é¡µã€å›¾ç‰‡ç€‘å¸ƒæµã€é•¿æ–‡é˜…è¯»é¡µé¢ã€‚</li>
<li><strong>æœªæ¥å±•æœ›ï¼š</strong> éšç€ Web API çš„å‘å±•ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥ç»“åˆ <code>loading="lazy"</code>ï¼ˆåŸç”Ÿ HTML æ‡’åŠ è½½å±æ€§ï¼‰ä½œä¸ºé™çº§æ–¹æ¡ˆï¼Œæˆ–è€…ç»“åˆ WebP/AVIF æ ¼å¼å®ç°æ›´æè‡´çš„å›¾ç‰‡åŠ è½½ä½“éªŒã€‚</li>
</ul>
<p><strong>ä¸€å¥è¯æ€»ç»“ï¼š</strong> è®©æµè§ˆå™¨å»åšå®ƒæ“…é•¿çš„äº‹ï¼ˆè®¡ç®—ä½ç½®ï¼‰ï¼Œè®©å¼€å‘è€…ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼ˆåŠ è½½å›¾ç‰‡ï¼‰ï¼Œè¿™å°±æ˜¯ç°ä»£å‰ç«¯å¼€å‘çš„é­…åŠ›æ‰€åœ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ]]></title>    <link>https://juejin.cn/post/7602072073135063067</link>    <guid>https://juejin.cn/post/7602072073135063067</guid>    <pubDate>2026-02-02T15:34:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602072073135063067" data-draft-id="7602277621260140594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-02T15:34:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:34:15.000Z" title="Mon Feb 02 2026 15:34:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    8
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä½œç”¨åŸŸæ˜¯ç¨‹åºä¸­å®šä¹‰å˜é‡çš„åŒºåŸŸï¼Œå®ƒè§„å®šäº†å˜é‡å’Œå‡½æ•°çš„å¯è®¿é—®èŒƒå›´ï¼Œä»¥åŠå˜é‡çš„ç”Ÿå‘½å‘¨æœŸã€‚</strong></p>
<h2 data-id="heading-0">1. ä½œç”¨åŸŸçš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-1">1.1 ä½œç”¨åŸŸçš„åŸºæœ¬ä½œç”¨</h3>
<ul>
<li><strong>ç¡®å®šå˜é‡å’Œå‡½æ•°çš„å¯è§æ€§</strong>ï¼šåœ¨å“ªäº›åœ°æ–¹å¯ä»¥è®¿é—®è¿™äº›æ ‡è¯†ç¬¦</li>
<li><strong>ç¡®å®šå˜é‡çš„ç”Ÿå‘½å‘¨æœŸ</strong>ï¼šå˜é‡ä½•æ—¶åˆ›å»ºã€ä½•æ—¶é”€æ¯</li>
<li><strong>é¿å…å‘½åå†²çª</strong>ï¼šä¸åŒä½œç”¨åŸŸå¯ä»¥æœ‰åŒåå˜é‡</li>
<li><strong>æä¾›è®¿é—®æ§åˆ¶</strong>ï¼šå®ç°ç§æœ‰å’Œå…¬å…±çš„è®¿é—®çº§åˆ«</li>
</ul>
<h2 data-id="heading-2">2. JavaScriptä¸­çš„ä½œç”¨åŸŸç±»å‹</h2>
<h3 data-id="heading-3">2.1 å…¨å±€ä½œç”¨åŸŸï¼ˆGlobal Scopeï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å…¨å±€ä½œç”¨åŸŸä¸­çš„å˜é‡</span>
<span class="hljs-keyword">var</span> globalVar = <span class="hljs-string">"I'm global"</span>;
<span class="hljs-keyword">let</span> globalLet = <span class="hljs-string">"I'm also global"</span>;
<span class="hljs-keyword">const</span> globalConst = <span class="hljs-string">"Me too"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">globalFunction</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"I'm a global function"</span>);
}

<span class="hljs-comment">// è¿™äº›éƒ½å¯ä»¥åœ¨ä»£ç çš„ä»»ä½•åœ°æ–¹è®¿é—®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">window</span>.<span class="hljs-property">globalVar</span>); <span class="hljs-comment">// æµè§ˆå™¨ä¸­ï¼Œvarå˜é‡ä¼šæˆä¸ºwindowå¯¹è±¡çš„å±æ€§</span>
</code></pre>
<h3 data-id="heading-4">2.2 å‡½æ•°ä½œç”¨åŸŸï¼ˆFunction Scopeï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// å‡½æ•°ä½œç”¨åŸŸå¼€å§‹</span>
  <span class="hljs-keyword">var</span> functionScoped = <span class="hljs-string">"I'm only available inside outer"</span>;
  <span class="hljs-keyword">let</span> alsoFunctionScoped = <span class="hljs-string">"Me too"</span>;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// å¯ä»¥è®¿é—®å¤–å±‚å‡½æ•°çš„å˜é‡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(functionScoped); <span class="hljs-comment">// æ­£å¸¸è®¿é—®</span>
    <span class="hljs-keyword">var</span> innerVar = <span class="hljs-string">"I'm only in inner"</span>;
  }
  
  <span class="hljs-title function_">inner</span>();
  <span class="hljs-comment">// console.log(innerVar); // æŠ¥é”™ï¼šinnerVar is not defined</span>
}
<span class="hljs-comment">// console.log(functionScoped); // æŠ¥é”™ï¼šfunctionScoped is not defined</span>
</code></pre>
<h3 data-id="heading-5">2.3 å—çº§ä½œç”¨åŸŸï¼ˆBlock Scopeï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ES6å¼•å…¥çš„letå’Œconstå…·æœ‰å—çº§ä½œç”¨åŸŸ</span>
{
  <span class="hljs-comment">// å—çº§ä½œç”¨åŸŸå¼€å§‹</span>
  <span class="hljs-keyword">let</span> blockScoped = <span class="hljs-string">"I'm only in this block"</span>;
  <span class="hljs-keyword">const</span> blockConst = <span class="hljs-string">"Me too"</span>;
  
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(blockScoped); <span class="hljs-comment">// æ­£å¸¸</span>
}

<span class="hljs-comment">// console.log(blockScoped); // æŠ¥é”™ï¼šblockScoped is not defined</span>

<span class="hljs-comment">// å®é™…åº”ç”¨åœºæ™¯</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  <span class="hljs-comment">// æ¯ä¸ªiéƒ½æ˜¯ç‹¬ç«‹çš„å—çº§ä½œç”¨åŸŸ</span>
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i)); <span class="hljs-comment">// 0, 1, 2</span>
}

<span class="hljs-comment">// å¯¹æ¯”varï¼ˆæ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">3</span>; j++) {
  <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(j)); <span class="hljs-comment">// 3, 3, 3</span>
}
</code></pre>
<h3 data-id="heading-6">2.4 æ¨¡å—ä½œç”¨åŸŸï¼ˆModule Scopeï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// module.js</span>
<span class="hljs-keyword">const</span> privateVar = <span class="hljs-string">"I'm private to this module"</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> publicVar = <span class="hljs-string">"I'm exported"</span>;

<span class="hljs-comment">// åœ¨æ¨¡å—å¤–æ— æ³•è®¿é—®privateVar</span>
<span class="hljs-comment">// åªèƒ½è®¿é—®é€šè¿‡exportæš´éœ²çš„å˜é‡</span>
</code></pre>
<h2 data-id="heading-7">3. ä½œç”¨åŸŸé“¾ï¼ˆScope Chainï¼‰</h2>
<h3 data-id="heading-8">3.1 ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸé“¾</h3>
<p>å½“è®¿é—®ä¸€ä¸ªå˜é‡æ—¶ï¼ŒJavaScriptå¼•æ“ä¼šä»å½“å‰ä½œç”¨åŸŸå¼€å§‹æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œå°±å‘ä¸Šä¸€å±‚ä½œç”¨åŸŸæŸ¥æ‰¾ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œè¿™ä¸ªæŸ¥æ‰¾è·¯å¾„å°±æ˜¯ä½œç”¨åŸŸé“¾ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> <span class="hljs-variable language_">global</span> = <span class="hljs-string">"global"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">outer</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> outerVar = <span class="hljs-string">"outer"</span>;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> innerVar = <span class="hljs-string">"inner"</span>;
    
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(innerVar);   <span class="hljs-comment">// 1. åœ¨å½“å‰ä½œç”¨åŸŸæ‰¾åˆ°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVar);   <span class="hljs-comment">// 2. åœ¨å¤–å±‚ä½œç”¨åŸŸæ‰¾åˆ°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">global</span>);     <span class="hljs-comment">// 3. åœ¨å…¨å±€ä½œç”¨åŸŸæ‰¾åˆ°</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(undeclared); <span class="hljs-comment">// 4. æŠ¥é”™ï¼šåœ¨æ‰€æœ‰ä½œç”¨åŸŸéƒ½æ‰¾ä¸åˆ°</span>
  }
  
  <span class="hljs-title function_">inner</span>();
}

<span class="hljs-title function_">outer</span>();
</code></pre>
<h3 data-id="heading-9">3.2 ä½œç”¨åŸŸé“¾çš„åˆ›å»º</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½œç”¨åŸŸé“¾åœ¨å‡½æ•°å®šä¹‰æ—¶ç¡®å®šï¼ˆè¯æ³•ä½œç”¨åŸŸï¼‰</span>
<span class="hljs-keyword">let</span> globalVar = <span class="hljs-string">"global"</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createFunctions</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> outerVar = <span class="hljs-string">"outer"</span>;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">inner1</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVar); <span class="hljs-comment">// å¯ä»¥è®¿é—®outerVar</span>
  }
  
  <span class="hljs-keyword">let</span> inner2 = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVar); <span class="hljs-comment">// ä¹Ÿå¯ä»¥è®¿é—®outerVar</span>
  };
  
  <span class="hljs-comment">// å³ä½¿å‡½æ•°åœ¨å…¶ä»–åœ°æ–¹æ‰§è¡Œï¼Œä»ç„¶èƒ½è®¿é—®å®šä¹‰æ—¶çš„ä½œç”¨åŸŸé“¾</span>
  <span class="hljs-keyword">return</span> [inner1, inner2];
}

<span class="hljs-keyword">const</span> [func1, func2] = <span class="hljs-title function_">createFunctions</span>();
<span class="hljs-title function_">func1</span>(); <span class="hljs-comment">// "outer" - ä»ç„¶èƒ½è®¿é—®outerVarï¼ˆé—­åŒ…ï¼‰</span>
<span class="hljs-title function_">func2</span>(); <span class="hljs-comment">// "outer"</span>
</code></pre>
<h2 data-id="heading-10">4. è¯æ³•ä½œç”¨åŸŸ vs åŠ¨æ€ä½œç”¨åŸŸ</h2>
<h3 data-id="heading-11">4.1 JavaScriptä½¿ç”¨è¯æ³•ä½œç”¨åŸŸï¼ˆé™æ€ä½œç”¨åŸŸï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">let</span> x = <span class="hljs-number">10</span>;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(x);
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> x = <span class="hljs-number">20</span>;
  <span class="hljs-title function_">foo</span>(); <span class="hljs-comment">// è¾“å‡º10ï¼Œä¸æ˜¯20</span>
}

<span class="hljs-title function_">bar</span>();

<span class="hljs-comment">// è§£é‡Šï¼šfooåœ¨å®šä¹‰æ—¶ç¡®å®šä½œç”¨åŸŸé“¾ï¼Œè®¿é—®çš„æ˜¯å®šä¹‰æ—¶çš„xï¼Œè€Œä¸æ˜¯è°ƒç”¨æ—¶çš„x</span>
</code></pre>
<h3 data-id="heading-12">4.2 å¯¹æ¯”åŠ¨æ€ä½œç”¨åŸŸï¼ˆJavaScriptä¸æ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¼ªä»£ç ï¼Œå±•ç¤ºåŠ¨æ€ä½œç”¨åŸŸçš„æ¦‚å¿µ</span>
<span class="hljs-comment">// å¦‚æœJavaScriptæ˜¯åŠ¨æ€ä½œç”¨åŸŸï¼š</span>
x = <span class="hljs-number">10</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">print</span>(x) <span class="hljs-comment">// åœ¨åŠ¨æ€ä½œç”¨åŸŸä¸­ï¼Œè¿™é‡Œä¼šæŸ¥æ‰¾è°ƒç”¨æ—¶çš„ä½œç”¨åŸŸ</span>
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">bar</span>(<span class="hljs-params"/>) {
  x = <span class="hljs-number">20</span>
  <span class="hljs-title function_">foo</span>() <span class="hljs-comment">// ä¼šè¾“å‡º20</span>
}
</code></pre>
<h2 data-id="heading-13">5. ç‰¹æ®Šçš„ä½œç”¨åŸŸè¡Œä¸º</h2>
<h3 data-id="heading-14">5.1 å˜é‡æå‡ï¼ˆHoistingï¼‰</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// varçš„å˜é‡æå‡</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefinedï¼Œä¸ä¼šæŠ¥é”™</span>
<span class="hljs-keyword">var</span> a = <span class="hljs-number">5</span>;

<span class="hljs-comment">// å®é™…æ‰§è¡Œé¡ºåºï¼š</span>
<span class="hljs-keyword">var</span> a;          <span class="hljs-comment">// å£°æ˜æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// undefined</span>
a = <span class="hljs-number">5</span>;          <span class="hljs-comment">// èµ‹å€¼ç•™åœ¨åŸåœ°</span>

<span class="hljs-comment">// let/constçš„æš‚æ—¶æ€§æ­»åŒºï¼ˆTemporal Dead Zoneï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(b); <span class="hljs-comment">// æŠ¥é”™ï¼šCannot access 'b' before initialization</span>
<span class="hljs-keyword">let</span> b = <span class="hljs-number">5</span>;
</code></pre>
<h3 data-id="heading-15">5.2 æ²¡æœ‰å—çº§ä½œç”¨åŸŸçš„var</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-keyword">var</span> noBlockScope = <span class="hljs-string">"I escape the block"</span>;
  <span class="hljs-keyword">let</span> hasBlockScope = <span class="hljs-string">"I stay in the block"</span>;
}

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(noBlockScope);   <span class="hljs-comment">// "I escape the block"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(hasBlockScope);  <span class="hljs-comment">// æŠ¥é”™ï¼šhasBlockScope is not defined</span>
</code></pre>
<h2 data-id="heading-16">6. ä½œç”¨åŸŸçš„å®é™…åº”ç”¨</h2>
<h3 data-id="heading-17">6.1 é¿å…å…¨å±€æ±¡æŸ“</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</span>
<span class="hljs-keyword">var</span> global1 = <span class="hljs-string">"data"</span>;
<span class="hljs-keyword">var</span> global2 = <span class="hljs-string">"more data"</span>;

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä½¿ç”¨IIFEæˆ–æ¨¡å—</span>
(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-comment">// ç§æœ‰ä½œç”¨åŸŸ</span>
  <span class="hljs-keyword">var</span> privateData = <span class="hljs-string">"hidden"</span>;
  <span class="hljs-comment">// å¯¹å¤–æš´éœ²å¿…è¦çš„æ¥å£</span>
  <span class="hljs-variable language_">window</span>.<span class="hljs-property">myModule</span> = {
    <span class="hljs-attr">publicMethod</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> privateData;
    }
  };
})();
</code></pre>
<h3 data-id="heading-18">6.2 åˆ›å»ºç§æœ‰å˜é‡</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createCounter</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> count = <span class="hljs-number">0</span>; <span class="hljs-comment">// ç§æœ‰å˜é‡</span>
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">increment</span>(<span class="hljs-params"/>) {
      count++;
      <span class="hljs-keyword">return</span> count;
    },
    <span class="hljs-title function_">getCount</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> count;
    }
  };
}

<span class="hljs-keyword">const</span> counter = <span class="hljs-title function_">createCounter</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-property">count</span>); <span class="hljs-comment">// undefinedï¼Œæ— æ³•ç›´æ¥è®¿é—®</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counter.<span class="hljs-title function_">getCount</span>()); <span class="hljs-comment">// 0</span>
</code></pre>
<h3 data-id="heading-19">6.3 å¾ªç¯ä¸­çš„å—çº§ä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¸¸è§é—®é¢˜</span>
<span class="hljs-keyword">var</span> funcs = [];
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  funcs.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i); <span class="hljs-comment">// å…¨éƒ¨è¾“å‡º3</span>
  });
}

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ1ï¼šä½¿ç”¨IIFE</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  (<span class="hljs-keyword">function</span>(<span class="hljs-params">j</span>) {
    funcs.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(j); <span class="hljs-comment">// 0, 1, 2</span>
    });
  })(i);
}

<span class="hljs-comment">// è§£å†³æ–¹æ¡ˆ2ï¼šä½¿ç”¨letï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; i++) {
  funcs.<span class="hljs-title function_">push</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(i); <span class="hljs-comment">// 0, 1, 2</span>
  });
}
</code></pre>
<h2 data-id="heading-20">7. ç°ä»£JavaScriptä¸­çš„ä½œç”¨åŸŸ</h2>
<h3 data-id="heading-21">7.1 ES6æ¨¡å—ä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// module.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> publicValue = <span class="hljs-number">42</span>;
<span class="hljs-keyword">const</span> privateValue = <span class="hljs-string">"secret"</span>;

<span class="hljs-comment">// main.js</span>
<span class="hljs-keyword">import</span> { publicValue } <span class="hljs-keyword">from</span> <span class="hljs-string">'./module.js'</span>;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(publicValue); <span class="hljs-comment">// 42</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(privateValue); <span class="hljs-comment">// æŠ¥é”™ï¼šprivateValue is not defined</span>
</code></pre>
<h3 data-id="heading-22">7.2 ç±»ä½œç”¨åŸŸ</h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> {
  <span class="hljs-comment">// ç±»ä½œç”¨åŸŸ</span>
  #privateField = <span class="hljs-string">"I'm private"</span>;
  publicField = <span class="hljs-string">"I'm public"</span>;
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instanceField</span> = <span class="hljs-string">"I'm on the instance"</span>;
  }
  
  <span class="hljs-title function_">method</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.#privateField); <span class="hljs-comment">// å¯ä»¥è®¿é—®ç§æœ‰å­—æ®µ</span>
  }
}

<span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyClass</span>();
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.<span class="hljs-property">publicField</span>); <span class="hljs-comment">// "I'm public"</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(instance.#privateField); <span class="hljs-comment">// æŠ¥é”™ï¼šPrivate field must be declared in an enclosing class</span>
</code></pre>
<h2 data-id="heading-23">æ€»ç»“è¡¨æ ¼</h2>



































<table><thead><tr><th>ä½œç”¨åŸŸç±»å‹</th><th>å…³é”®å­—</th><th>ç‰¹ç‚¹</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>å…¨å±€ä½œç”¨åŸŸ</td><td>var, let, const</td><td>æ•´ä¸ªç¨‹åºå¯è®¿é—®</td><td><code>var global = 1;</code></td></tr><tr><td>å‡½æ•°ä½œç”¨åŸŸ</td><td>var</td><td>åªåœ¨å‡½æ•°å†…å¯è®¿é—®</td><td><code>function foo() { var x = 1; }</code></td></tr><tr><td>å—çº§ä½œç”¨åŸŸ</td><td>let, const</td><td>åœ¨{}å†…å¯è®¿é—®</td><td><code>{ let x = 1; }</code></td></tr><tr><td>æ¨¡å—ä½œç”¨åŸŸ</td><td>export, import</td><td>åªåœ¨æ¨¡å—å†…å¯è®¿é—®</td><td><code>export const x = 1;</code></td></tr></tbody></table>
<h2 data-id="heading-24">å…³é”®è¦ç‚¹</h2>
<ol>
<li><strong>ä½œç”¨åŸŸå†³å®šäº†å˜é‡çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸ</strong></li>
<li><strong>JavaScriptä½¿ç”¨è¯æ³•ä½œç”¨åŸŸ</strong>ï¼šä½œç”¨åŸŸåœ¨ä»£ç ç¼–å†™æ—¶ç¡®å®š</li>
<li><strong>ä½œç”¨åŸŸé“¾å†³å®šäº†å˜é‡çš„æŸ¥æ‰¾é¡ºåº</strong>ï¼šä»å†…åˆ°å¤–æŸ¥æ‰¾</li>
<li><strong>ES6å¼•å…¥çš„let/constæœ‰å—çº§ä½œç”¨åŸŸ</strong>ï¼Œè§£å†³äº†è®¸å¤švarçš„é—®é¢˜</li>
<li><strong>åˆç†ä½¿ç”¨ä½œç”¨åŸŸå¯ä»¥é¿å…å‘½åå†²çªã€å®ç°å°è£…</strong></li>
</ol>
<p>ç†è§£ä½œç”¨åŸŸæ˜¯æŒæ¡JavaScripté—­åŒ…ã€thisç»‘å®šã€æ¨¡å—åŒ–ç­‰é«˜çº§æ¦‚å¿µçš„åŸºç¡€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é—­åŒ…ä¸€å®šä¼šé€ æˆå†…å­˜æ³„æ¼å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7602277621260124210</link>    <guid>https://juejin.cn/post/7602277621260124210</guid>    <pubDate>2026-02-02T15:17:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602277621260124210" data-draft-id="7602072073134915611" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é—­åŒ…ä¸€å®šä¼šé€ æˆå†…å­˜æ³„æ¼å—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-02T15:17:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä»£ç çŒäºº"/> <meta itemprop="url" content="https://juejin.cn/user/624972624037374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é—­åŒ…ä¸€å®šä¼šé€ æˆå†…å­˜æ³„æ¼å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/624972624037374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä»£ç çŒäºº
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:17:43.000Z" title="Mon Feb 02 2026 15:17:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>é—­åŒ…ä¸ä¸€å®šä¼šé€ æˆå†…å­˜æ³„æ¼ï¼Œä½†ä½¿ç”¨ä¸å½“ç¡®å®å¯èƒ½å¼•èµ·å†…å­˜æ³„æ¼ã€‚</strong> Â è¿™æ˜¯å¯¹é—­åŒ…å¸¸è§çš„è¯¯è§£ä¹‹ä¸€ã€‚</p>
<h2 data-id="heading-0">é—­åŒ…å’Œå†…å­˜çš„å…³ç³»</h2>
<p>é—­åŒ…çš„ç‰¹æ€§å†³å®šäº†å®ƒä¼š<strong>ä¿ç•™å¯¹å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸçš„å¼•ç”¨</strong>ï¼Œè¿™ä½¿å¾—ï¼š</p>
<ol>
<li>é—­åŒ…å¼•ç”¨çš„å˜é‡ä¸ä¼šè¢«åƒåœ¾å›æ”¶</li>
<li>é—­åŒ…æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä¼šå ç”¨å†…å­˜</li>
</ol>
<p>ä½†è¿™<strong>ä¸ç­‰åŒäº</strong>å†…å­˜æ³„æ¼ã€‚</p>
<h2 data-id="heading-1">ä»€ä¹ˆæ—¶å€™æ˜¯æ­£å¸¸çš„å†…å­˜å ç”¨ï¼Ÿ</h2>
<p>javascript</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¿™æ˜¯æ­£å¸¸çš„é—­åŒ…ä½¿ç”¨ï¼Œä¸æ˜¯å†…å­˜æ³„æ¼</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params">name</span>) {
  <span class="hljs-keyword">const</span> privateData = { 
    <span class="hljs-attr">id</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>(),
    <span class="hljs-attr">preferences</span>: {}
  };
  
  <span class="hljs-keyword">return</span> {
    <span class="hljs-attr">getName</span>: <span class="hljs-function">() =&gt;</span> name,
    <span class="hljs-attr">updateName</span>: <span class="hljs-function">(<span class="hljs-params">newName</span>) =&gt;</span> { name = newName; },
    <span class="hljs-comment">// privateData è¢«é—­åŒ…å¼•ç”¨ï¼Œä½†è¿™æ˜¯è®¾è®¡æ„å›¾</span>
    <span class="hljs-attr">setPreference</span>: <span class="hljs-function">(<span class="hljs-params">key, value</span>) =&gt;</span> {
      privateData.<span class="hljs-property">preferences</span>[key] = value;
    }
  };
}

<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">createUser</span>(<span class="hljs-string">"Alice"</span>);
<span class="hljs-comment">// userå¯¹è±¡åŠå…¶é—­åŒ…ä½œç”¨åŸŸè¢«æ­£å¸¸ä½¿ç”¨ï¼Œè¿™ä¸æ˜¯å†…å­˜æ³„æ¼</span>
</code></pre>
<h2 data-id="heading-2">ä»€ä¹ˆæ—¶å€™å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ï¼Ÿ</h2>
<h3 data-id="heading-3">1.Â <strong>æ„å¤–çš„å…¨å±€å˜é‡å¼•ç”¨</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createLeakyClosure</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> hugeArray = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'*'</span>);
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ„å¤–åœ°åˆ›å»ºäº†å…¨å±€å¼•ç”¨</span>
    <span class="hljs-variable language_">window</span>.<span class="hljs-property">hugeArrayRef</span> = hugeArray;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'Oops!'</span>);
  };
}

<span class="hljs-keyword">const</span> leakyFunc = <span class="hljs-title function_">createLeakyClosure</span>();
<span class="hljs-comment">// å³ä½¿ leakyFunc ä¸å†ä½¿ç”¨ï¼ŒhugeArray ä¹Ÿæ— æ³•è¢«å›æ”¶</span>
<span class="hljs-comment">// å› ä¸º window.hugeArrayRef ä»ç„¶å¼•ç”¨å®ƒ</span>
</code></pre>
<h3 data-id="heading-4">2.Â <strong>DOMå…ƒç´ å¼•ç”¨æœªæ¸…ç†</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">attachHandler</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'largeElement'</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'data'</span>);
  
  element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº† data å’Œ element</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>, element.<span class="hljs-property">id</span>);
  });
  
  <span class="hljs-comment">// å³ä½¿ä»DOMä¸­ç§»é™¤å…ƒç´ </span>
  <span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">removeChild</span>(element);
  <span class="hljs-comment">// äº‹ä»¶ç›‘å¬å™¨é—­åŒ…ä»ç„¶å¼•ç”¨ç€ element å’Œ data</span>
  <span class="hljs-comment">// element æ— æ³•è¢«åƒåœ¾å›æ”¶ï¼</span>
}
</code></pre>
<h3 data-id="heading-5">3.Â <strong>å®šæ—¶å™¨/é—´éš”å™¨æœªæ¸…é™¤</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">startProcess</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'*'</span>);
  
  <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// é—­åŒ…å¼•ç”¨äº† data</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>);
  }, <span class="hljs-number">1000</span>);
  
  <span class="hljs-comment">// å³ä½¿ä¸å†éœ€è¦ï¼Œå®šæ—¶å™¨ä»åœ¨è¿è¡Œï¼Œdataæ— æ³•è¢«å›æ”¶</span>
}
</code></pre>
<h3 data-id="heading-6">4.Â <strong>å¾ªç¯å¼•ç”¨ï¼ˆåœ¨è€å¼æµè§ˆå™¨ä¸­ï¼‰</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// åœ¨ç°ä»£æµè§ˆå™¨ä¸­ï¼Œè¿™é€šå¸¸ä¸æ˜¯é—®é¢˜ï¼Œä½†IE6-7ä¼šæœ‰é—®é¢˜</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">createCircularReference</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myDiv'</span>);
  <span class="hljs-keyword">const</span> data = { <span class="hljs-attr">element</span>: element };
  
  element.<span class="hljs-property">myData</span> = data; <span class="hljs-comment">// å¾ªç¯å¼•ç”¨</span>
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(element, data);
  };
}
</code></pre>
<h2 data-id="heading-7">å¦‚ä½•é¿å…é—­åŒ…å¼•èµ·çš„å†…å­˜æ³„æ¼ï¼Ÿ</h2>
<h3 data-id="heading-8">1.Â <strong>åŠæ—¶æ¸…ç†å¼•ç”¨</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanUp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'*'</span>);
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myElement'</span>);
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">handler</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>);
  }
  
  element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, handler);
  
  <span class="hljs-comment">// ä½¿ç”¨ååŠæ—¶æ¸…ç†</span>
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanUpResources</span>(<span class="hljs-params"/>) {
    element.<span class="hljs-title function_">removeEventListener</span>(<span class="hljs-string">'click'</span>, handler);
    <span class="hljs-comment">// å°†å±€éƒ¨å˜é‡è®¾ä¸ºnullï¼Œå¸®åŠ©åƒåœ¾å›æ”¶</span>
    <span class="hljs-comment">// æ³¨æ„ï¼šé—­åŒ…ä»ç„¶å­˜åœ¨ï¼Œä½†å¼•ç”¨çš„å†…å®¹å¯ä»¥è¢«é‡Šæ”¾</span>
  };
}
</code></pre>
<h3 data-id="heading-9">2.Â <strong>ä½¿ç”¨WeakMap/WeakSetè¿›è¡Œå¼±å¼•ç”¨</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> weakMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakMap</span>();

<span class="hljs-keyword">function</span> <span class="hljs-title function_">createNonLeakyClosure</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'myElement'</span>);
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(<span class="hljs-number">1000000</span>).<span class="hljs-title function_">fill</span>(<span class="hljs-string">'*'</span>);
  
  <span class="hljs-comment">// ä½¿ç”¨WeakMapï¼Œä¸ä¼šé˜»æ­¢åƒåœ¾å›æ”¶</span>
  weakMap.<span class="hljs-title function_">set</span>(element, data);
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">const</span> data = weakMap.<span class="hljs-title function_">get</span>(element);
    <span class="hljs-keyword">if</span> (data) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">length</span>);
    }
  };
}
</code></pre>
<h3 data-id="heading-10">3.Â <strong>åˆ†ç¦»äº‹ä»¶å¤„ç†å‡½æ•°</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¥½çš„åšæ³•ï¼šé—­åŒ…ç›´æ¥å¼•ç”¨å¤§å¯¹è±¡</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(largeObject.<span class="hljs-property">data</span>); <span class="hljs-comment">// largeObjectè¢«é—­åŒ…å¼•ç”¨</span>
});

<span class="hljs-comment">// å¥½çš„åšæ³•ï¼šä¼ é€’æœ€å°å¿…è¦æ•°æ®</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">handleClick</span>(<span class="hljs-params">data</span>) {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
}

<span class="hljs-keyword">const</span> data = largeObject.<span class="hljs-property">data</span>; <span class="hljs-comment">// åªæå–éœ€è¦çš„æ•°æ®</span>
element.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">handleClick</span>(data)); 
</code></pre>
<h3 data-id="heading-11">4.Â <strong>ä½¿ç”¨æ¨¡å—æ¨¡å¼æ—¶çš„æ³¨æ„äº‹é¡¹</strong></h3>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyModule</span> = (<span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">let</span> privateData = <span class="hljs-literal">null</span>;
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params">data</span>) {
    privateData = data;
  }
  
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">cleanup</span>(<span class="hljs-params"/>) {
    privateData = <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ˜¾å¼é‡Šæ”¾</span>
  }
  
  <span class="hljs-keyword">return</span> {
    init,
    cleanup,
    <span class="hljs-attr">process</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (privateData) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(privateData.<span class="hljs-property">length</span>);
      }
    }
  };
})();
</code></pre>
<h2 data-id="heading-12">è¯Šæ–­é—­åŒ…å†…å­˜æ³„æ¼</h2>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä½¿ç”¨Chrome DevTools Memoryé¢æ¿</span>
<span class="hljs-comment">// 1. è®°å½•å †å¿«ç…§</span>
<span class="hljs-comment">// 2. æ‰§è¡Œå¯èƒ½æ³„æ¼çš„æ“ä½œ</span>
<span class="hljs-comment">// 3. å†æ¬¡è®°å½•å †å¿«ç…§</span>
<span class="hljs-comment">// 4. æ¯”è¾ƒä¸¤ä¸ªå¿«ç…§ï¼ŒæŸ¥çœ‹é—­åŒ…æ˜¯å¦æŒç»­å¢é•¿</span>
</code></pre>
<h2 data-id="heading-13">å…³é”®åŒºåˆ«</h2>

























<table><thead><tr><th>æƒ…å†µ</th><th>æ˜¯å¦æ˜¯å†…å­˜æ³„æ¼</th></tr></thead><tbody><tr><td>é—­åŒ…æ­£å¸¸æŒæœ‰å¿…è¦æ•°æ®</td><td>âŒ ä¸æ˜¯</td></tr><tr><td>é—­åŒ…æ„å¤–æŒæœ‰ä¸å†éœ€è¦çš„å¤§å¯¹è±¡</td><td>âœ… æ˜¯</td></tr><tr><td>é—­åŒ…å¼•ç”¨å·²ç§»é™¤çš„DOMå…ƒç´ </td><td>âœ… æ˜¯</td></tr><tr><td>é—­åŒ…ç”¨äºç¼“å­˜è®¡ç®—ç»“æœ</td><td>âŒ ä¸æ˜¯ï¼ˆé™¤éç¼“å­˜æ— é™å¢é•¿ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>é—­åŒ…<strong>æœ¬èº«ä¸æ˜¯å†…å­˜æ³„æ¼</strong>ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰ç”¨çš„è¯­è¨€ç‰¹æ€§ã€‚å†…å­˜æ³„æ¼å‘ç”Ÿåœ¨ï¼š</p>
<ol>
<li><strong>æ„å¤–çš„å¼•ç”¨</strong>ï¼šé—­åŒ…æ„å¤–åœ°æŒæœ‰äº†ä¸éœ€è¦çš„å¯¹è±¡</li>
<li><strong>æœªåŠæ—¶æ¸…ç†</strong>ï¼šé—­åŒ…æŒæœ‰å¯¹è±¡çš„æ—¶é—´è¶…è¿‡äº†å¿…è¦æ—¶é—´</li>
<li><strong>å¾ªç¯å¼•ç”¨</strong>ï¼ˆåœ¨ç‰¹å®šæµè§ˆå™¨ä¸­ï¼‰</li>
</ol>
<p>æ­£ç¡®ä½¿ç”¨é—­åŒ…çš„å…³é”®æ˜¯ï¼š</p>
<ul>
<li><strong>åªä¿ç•™å¿…è¦çš„æ•°æ®</strong>åœ¨é—­åŒ…ä½œç”¨åŸŸä¸­</li>
<li><strong>åŠæ—¶æ¸…ç†</strong>ä¸å†éœ€è¦çš„å¼•ç”¨</li>
<li>å¯¹äº<strong>é•¿æ—¶é—´å­˜åœ¨</strong>çš„é—­åŒ…ï¼Œè¦ç‰¹åˆ«å°å¿ƒå…¶å†…å­˜å ç”¨</li>
</ul>
<p>ç°ä»£JavaScriptå¼•æ“çš„åƒåœ¾å›æ”¶æœºåˆ¶è¶Šæ¥è¶Šæ™ºèƒ½ï¼Œåªè¦åˆç†ä½¿ç”¨ï¼Œé—­åŒ…ä¸ä¼šæˆä¸ºå†…å­˜æ³„æ¼çš„ä¸»è¦åŸå› ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vue3 ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ï¼šBEM å‘½åè§„èŒƒä¸ useNamespace æ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7602072073135046683</link>    <guid>https://juejin.cn/post/7602072073135046683</guid>    <pubDate>2026-02-02T15:22:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602072073135046683" data-draft-id="7602277621260156978" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vue3 ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ï¼šBEM å‘½åè§„èŒƒä¸ useNamespace æ·±åº¦è§£æ"/> <meta itemprop="keywords" content="å‰ç«¯,CSS"/> <meta itemprop="datePublished" content="2026-02-02T15:22:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯ä¹‹ç™¾ç‚¼æˆé­”"/> <meta itemprop="url" content="https://juejin.cn/user/1486957885265400"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vue3 ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ï¼šBEM å‘½åè§„èŒƒä¸ useNamespace æ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1486957885265400/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯ä¹‹ç™¾ç‚¼æˆé­”
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:22:54.000Z" title="Mon Feb 02 2026 15:22:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ã€ŠVue3 ç»„ä»¶åº“å·¥ç¨‹åŒ–å®æˆ˜ï¼šBEM å‘½åè§„èŒƒä¸ useNamespace æ·±åº¦è§£æã€‹</h2>
<p>åœ¨é˜…è¯»å¼€æºç»„ä»¶åº“ï¼ˆå¦‚ Element Plusã€Ant Design Vueï¼‰çš„æºç æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°ä¸€ä¸ªå¥‡æ€ªçš„ç°è±¡ï¼šå¼€å‘è€…å‡ ä¹ä»ä¸æ‰‹å†™å­—ç¬¦ä¸²å½¢å¼çš„ CSS ç±»åï¼ˆå¦‚ <code>class="el-button"</code>ï¼‰ï¼Œè€Œæ˜¯ä½¿ç”¨ç±»ä¼¼ <code>ns.b()</code>ã€<code>ns.e('icon')</code> è¿™æ ·çš„å‡½æ•°è°ƒç”¨ã€‚</p>
<p>è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿè¿™èƒŒåçš„ <code>useNamespace</code> åˆ°åº•æ˜¯ä»€ä¹ˆé­”æ³•ï¼Ÿ</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ‹†è§£è¿™ä¸ªç»„ä»¶åº“å¼€å‘ä¸­æœ€åŸºç¡€ã€ä¹Ÿæ˜¯æœ€ä¼˜é›…çš„<strong>BEM å‘½åç®¡ç†å·¥å…·</strong>ã€‚</p>
<hr/>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7c2ac66b72c45b2a103f98de2284c7e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5LmL55m-54K85oiQ6a2U:q75.awebp?rk3s=f64ab15b&amp;x-expires=1770650573&amp;x-signature=oR55EdVqFcZxQyF%2FL2%2BF1v8hPwU%3D" alt="BEM.png" loading="lazy"/></p>
<h3 data-id="heading-1">1. ç—›ç‚¹ï¼šä¸ºä»€ä¹ˆä¸èƒ½ç›´æ¥å†™å­—ç¬¦ä¸²ï¼Ÿ</h3>
<p>å‡è®¾ä½ æ­£åœ¨å¼€å‘ä¸€ä¸ªæŒ‰é’®ç»„ä»¶ï¼Œä½ å¯èƒ½ä¼šè¿™æ ·å†™ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- âŒ åå‘³é“çš„ä»£ç  --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-button"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-button__icon"</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"my-button__text"</span>&gt;</span>æäº¤<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
</code></pre>
<p>è¿™ç§å†™æ³•æœ‰ä¸‰ä¸ªè‡´å‘½é—®é¢˜ï¼š</p>
<ol>
<li><strong>éš¾ä»¥ç»´æŠ¤çš„å‰ç¼€</strong>ï¼šå¦‚æœæœ‰ä¸€å¤©è€æ¿è¯´ï¼šâ€œæˆ‘ä»¬è¦æŠŠå“ç‰Œå‡çº§ï¼Œæ‰€æœ‰ç»„ä»¶çš„å‰ç¼€ä» <code>my-</code> æ”¹æˆ <code>super-</code>â€ã€‚ä½ éœ€è¦åœ¨å‡ ç™¾ä¸ªæ–‡ä»¶ä¸­è¿›è¡Œå…¨å±€æŸ¥æ‰¾æ›¿æ¢ï¼Œææ˜“å‡ºé”™ã€‚</li>
<li><strong>æ‹¼å†™é”™è¯¯</strong>ï¼šæ‰‹å†™ <code>my-butotn__text</code>ï¼ˆæ‰‹è¯¯ï¼‰æ˜¯å¸¸æœ‰çš„äº‹ï¼ŒCSS ä¹Ÿå°±æ˜¯è¿™æ ·å¤±æ•ˆçš„ã€‚</li>
<li><strong>ä¸è§„èŒƒ</strong>ï¼šå›¢é˜Ÿæˆå‘˜ A å–œæ¬¢ç”¨ <code>my-btn-text</code>ï¼Œæˆå‘˜ B å–œæ¬¢ç”¨ <code>my-button_text</code>ï¼Œå¯¼è‡´æ ·å¼å†²çªå’Œæ··ä¹±ã€‚</li>
</ol>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—<strong>è‡ªåŠ¨ç”Ÿæˆç±»å</strong>çš„å·¥å…·ã€‚</p>
<hr/>
<h3 data-id="heading-2">2. é¢„å¤‡çŸ¥è¯†ï¼šä»€ä¹ˆæ˜¯ BEM è§„èŒƒï¼Ÿ</h3>
<p>åœ¨çœ‹ä»£ç å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆç†è§£å®ƒçš„ç”Ÿæˆè§„åˆ™ï¼š<strong>BEM</strong>ã€‚</p>
<ul>
<li><strong>B (Block) å—</strong>ï¼šç‹¬ç«‹çš„ç»„ä»¶å®ä½“ã€‚ä¾‹å¦‚ï¼š<code>button</code>ï¼ˆæŒ‰é’®ï¼‰ã€<code>dialog</code>ï¼ˆå¼¹çª—ï¼‰ã€‚</li>
<li><strong>E (Element) å…ƒç´ </strong>ï¼šç»„ä»¶å†…éƒ¨çš„ç»„æˆéƒ¨åˆ†ã€‚ä¾‹å¦‚ï¼šæŒ‰é’®é‡Œçš„æ–‡å­— <code>text</code>ã€å›¾æ ‡ <code>icon</code>ã€‚è¿æ¥ç¬¦é€šå¸¸æ˜¯åŒä¸‹åˆ’çº¿ <code>__</code>ã€‚</li>
<li><strong>M (Modifier) ä¿®é¥°ç¬¦</strong>ï¼šç»„ä»¶çš„ä¸åŒçŠ¶æ€æˆ–ç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼šè“è‰²çš„æŒ‰é’® <code>primary</code>ã€ç¦ç”¨çš„æŒ‰é’® <code>disabled</code>ã€‚è¿æ¥ç¬¦é€šå¸¸æ˜¯åŒæ¨ªçº¿ <code>--</code>ã€‚</li>
</ul>
<p><strong>å…¬å¼ï¼š</strong> <code>å‰ç¼€-å—__å…ƒç´ --ä¿®é¥°ç¬¦</code>
<strong>ä¾‹å­ï¼š</strong> <code>my-button__text--large</code> (æˆ‘çš„-æŒ‰é’®ç»„ä»¶__æ–‡å­—éƒ¨åˆ†--å¤§å·ç‰ˆ)</p>
<hr/>
<h3 data-id="heading-3">3. æ ¸å¿ƒä»£ç æ‹†è§£ï¼šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</h3>
<p>æˆ‘ä»¬åœ¨ <code>packages/utils/src/namespace.ts</code> ä¸­å®šä¹‰çš„ <code>useNamespace</code> å‡½æ•°ï¼Œå°±æ˜¯ä¸€ä¸ª<strong>ç±»åç”Ÿäº§å·¥å‚</strong>ã€‚</p>
<p>æˆ‘ä»¬æŠŠä»£ç æ‹†æˆä¸¤éƒ¨åˆ†çœ‹ï¼š</p>
<h4 data-id="heading-4">ç¬¬ä¸€éƒ¨åˆ†ï¼šåº•å±‚çš„æ‹¼æ¥é€»è¾‘ <code>_bem</code></h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªçº¯ç²¹çš„å­—ç¬¦ä¸²æ‹¼æ¥å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">_bem</span>(<span class="hljs-params"><span class="hljs-keyword">namespace</span>, block, blockSuffix, element, modifier</span>) {
  <span class="hljs-comment">// 1. å…ˆæ‹¼ä¸ªå¤´ï¼š "my-button"</span>
  <span class="hljs-keyword">let</span> cls = <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-keyword">namespace</span>}</span>-<span class="hljs-subst">${block}</span>`</span> 
  
  <span class="hljs-comment">// 2. å¦‚æœæœ‰å—åç¼€ï¼ˆæ¯”å¦‚ button-groupï¼‰ï¼š"my-button-group"</span>
  <span class="hljs-keyword">if</span> (blockSuffix) {
    cls += <span class="hljs-string">`-<span class="hljs-subst">${blockSuffix}</span>`</span>
  }
  
  <span class="hljs-comment">// 3. å¦‚æœæœ‰å…ƒç´ ï¼ˆæ¯”å¦‚ iconï¼‰ï¼š"my-button__icon"</span>
  <span class="hljs-keyword">if</span> (element) {
    cls += <span class="hljs-string">`__<span class="hljs-subst">${element}</span>`</span>
  }
  
  <span class="hljs-comment">// 4. å¦‚æœæœ‰ä¿®é¥°ç¬¦ï¼ˆæ¯”å¦‚ primaryï¼‰ï¼š"my-button--primary"</span>
  <span class="hljs-keyword">if</span> (modifier) {
    cls += <span class="hljs-string">`--<span class="hljs-subst">${modifier}</span>`</span>
  }
  <span class="hljs-keyword">return</span> cls
}
</code></pre>
<h4 data-id="heading-5">ç¬¬äºŒéƒ¨åˆ†ï¼šå¯¹å¤–æš´éœ²çš„ <code>useNamespace</code></h4>
<p>ä¸ºäº†è®©å¼€å‘è€…ç”¨èµ·æ¥æ›´çˆ½ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†<strong>é—­åŒ…</strong>ã€‚ä½ åªéœ€è¦åœ¨ç»„ä»¶é‡Œå‘Šè¯‰å®ƒä¸€æ¬¡â€œæˆ‘æ˜¯è°ï¼ˆblockï¼‰â€ï¼Œå®ƒå°±ä¼šè¿”å›ä¸€ç³»åˆ—ä¸“é—¨ä¸ºä½ æœåŠ¡çš„ç®€å†™å‡½æ•°ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useNamespace</span>(<span class="hljs-params">block: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-comment">// æ‹¿åˆ°å…¨å±€é…ç½®çš„å‰ç¼€ï¼Œæ¯”å¦‚ 'my'</span>
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">namespace</span> = defaultNamespace 
  
  // ç”Ÿæˆ <span class="hljs-title class_">Block</span> (å—)
  // è°ƒç”¨: ns.b() -&gt; "my-button"
  const b = (blockSuffix = '') =&gt; _bem(<span class="hljs-keyword">namespace</span>, block, blockSuffix, '', '')
  
  // ç”Ÿæˆ <span class="hljs-title class_">Element</span> (å…ƒç´ )
  // è°ƒç”¨: ns.e('text') -&gt; "my-button__text"
  const e = (element?: string) =&gt;
    element ? _bem(<span class="hljs-keyword">namespace</span>, block, '', element, '') : ''
    
  // ç”Ÿæˆ <span class="hljs-title class_">Modifier</span> (ä¿®é¥°ç¬¦)
  // è°ƒç”¨: ns.m('primary') -&gt; "my-button--primary"
  const m = (modifier?: string) =&gt;
    modifier ? _bem(<span class="hljs-keyword">namespace</span>, block, '', '', modifier) : ''
    
  // ç”Ÿæˆ <span class="hljs-title class_">State</span> (çŠ¶æ€) - è¿™æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„è¾…åŠ©å‡½æ•°
  // è°ƒç”¨: ns.is('disabled') -&gt; "is-disabled"
  const is = (name: string, state: boolean | undefined = true) =&gt;
    state ? `is-${name}<span class="hljs-string">` : ''

  return { b, e, m, is, ... }
}
</span></code></pre>
<hr/>
<h3 data-id="heading-6">4. å®æˆ˜æ¼”ç¤ºï¼šåœ¨ Vue3 ç»„ä»¶ä¸­ä½¿ç”¨</h3>
<p>æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ­£åœ¨å†™ <code>packages/components/input/src/input.vue</code>ã€‚</p>
<h4 data-id="heading-7">æ­¥éª¤ 1ï¼šå¼•å…¥å¹¶åˆå§‹åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup lang=<span class="hljs-string">"ts"</span>&gt;
<span class="hljs-keyword">import</span> { useNamespace } <span class="hljs-keyword">from</span> <span class="hljs-string">'@my-antd-ui/utils'</span>

<span class="hljs-comment">// å‘Šè¯‰å·¥å…·ï¼šæˆ‘æ˜¯ 'input' ç»„ä»¶</span>
<span class="hljs-keyword">const</span> ns = <span class="hljs-title function_">useNamespace</span>(<span class="hljs-string">'input'</span>)
&lt;/script&gt;
</code></pre>
<h4 data-id="heading-8">æ­¥éª¤ 2ï¼šåœ¨ Template ä¸­ç•…å¿«ä½¿ç”¨</h4>






























<table><thead><tr><th align="left">ä½ å†™çš„ä»£ç  (Vue Template)</th><th align="left">æ¸²æŸ“ç»“æœ (HTML Class)</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left"><code>&lt;div :class="ns.b()"&gt;</code></td><td align="left"><code>class="my-input"</code></td><td align="left">æœ€å¤–å±‚å®¹å™¨</td></tr><tr><td align="left"><code>&lt;span :class="ns.e('inner')"&gt;</code></td><td align="left"><code>class="my-input__inner"</code></td><td align="left">å†…éƒ¨è¾“å…¥æ¡†å…ƒç´ </td></tr><tr><td align="left"><code>&lt;div :class="ns.m('textarea')"&gt;</code></td><td align="left"><code>class="my-input--textarea"</code></td><td align="left">æ–‡æœ¬åŸŸå˜ä½“</td></tr><tr><td align="left"><code>&lt;div :class="[ns.b(), ns.is('focus')]"&gt;</code></td><td align="left"><code>class="my-input is-focus"</code></td><td align="left">èšç„¦çŠ¶æ€</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-9">5. å¯¹ç…§é€ŸæŸ¥è¡¨ï¼šä¼ ç»Ÿå†™æ³• vs BEM å·¥å…·å†™æ³•</h3>
<p>ä¸ºäº†æ–¹ä¾¿å¤§å®¶å¿«é€Ÿä¸Šæ‰‹ï¼Œè¿™é‡Œæ•´ç†äº†ä¸€ä»½è¯¦ç»†çš„<strong>å¯¹ç…§è¡¨</strong>ã€‚
å‡è®¾æˆ‘ä»¬å½“å‰çš„ç»„ä»¶æ˜¯ <code>Button</code> (å³ <code>const ns = useNamespace('button')</code>)ï¼Œå‰ç¼€æ˜¯ <code>my</code>ã€‚</p>
<h4 data-id="heading-10">åŸºç¡€åœºæ™¯</h4>



































<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">ä»¥å‰ä½ å¯èƒ½ä¼šè¿™ä¹ˆå†™ (æ‰‹åŠ¨æŒ¡)</th><th align="left">ç°åœ¨ä½ åº”è¯¥è¿™ä¹ˆå†™ (è‡ªåŠ¨æŒ¡)</th><th align="left">æœ€ç»ˆç”Ÿæˆç±»å</th></tr></thead><tbody><tr><td align="left"><strong>åŸºç¡€ç»„ä»¶ (Block)</strong></td><td align="left"><code>'my-button'</code></td><td align="left"><strong><code>ns.b()</code></strong></td><td align="left"><code>my-button</code></td></tr><tr><td align="left"><strong>å†…éƒ¨å…ƒç´  (Element)</strong></td><td align="left"><code>'my-button__icon'</code></td><td align="left"><strong><code>ns.e('icon')</code></strong></td><td align="left"><code>my-button__icon</code></td></tr><tr><td align="left"><strong>ä¿®é¥°ç¬¦ (Modifier)</strong></td><td align="left"><code>'my-button--primary'</code></td><td align="left"><strong><code>ns.m('primary')</code></strong></td><td align="left"><code>my-button--primary</code></td></tr><tr><td align="left"><strong>çŠ¶æ€ (State)</strong></td><td align="left"><code>'is-disabled'</code></td><td align="left"><strong><code>ns.is('disabled')</code></strong></td><td align="left"><code>is-disabled</code></td></tr></tbody></table>
<h4 data-id="heading-11">åŠ¨æ€/é€»è¾‘åœºæ™¯ (Vue Template ä¸­)</h4>
<p>åœ¨ Vue æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦æ ¹æ®å˜é‡åŠ¨æ€åˆ‡æ¢ç±»åï¼Œè¿™æ—¶å€™ <code>useNamespace</code> çš„ä¼˜åŠ¿å°±æ›´æ˜æ˜¾äº†ã€‚</p>
<p><strong>åœºæ™¯ 1ï¼šæ ¹æ® props åˆ¤æ–­çŠ¶æ€</strong></p>
<ul>
<li><strong>éœ€æ±‚</strong>ï¼šå¦‚æœ <code>props.disabled</code> ä¸º <code>true</code>ï¼Œæ·»åŠ  <code>is-disabled</code> ç±»ã€‚</li>
<li><strong>ä¼ ç»Ÿå†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'is-disabled': props.disabled }"</span>&gt;</span>
</code></pre>
</li>
<li><strong>BEM å·¥å…·å†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.is('disabled', props.disabled)"</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼š<code>ns.is</code> ç¬¬äºŒä¸ªå‚æ•°æ¥å—å¸ƒå°”å€¼ï¼Œè‡ªåŠ¨å¤„ç†æ˜¾éšï¼Œä»£ç æ›´è¯­ä¹‰åŒ–ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>åœºæ™¯ 2ï¼šæ ¹æ® props åˆ‡æ¢æ ·å¼å˜ä½“</strong></p>
<ul>
<li><strong>éœ€æ±‚</strong>ï¼šæ ¹æ® <code>type</code> å±æ€§ï¼ˆå¦‚ <code>'primary'</code>, <code>'success'</code>ï¼‰ç”Ÿæˆå¯¹åº”çš„ç±»åã€‚</li>
<li><strong>ä¼ ç»Ÿå†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"`my-button--${props.type}`"</span>&gt;</span>
</code></pre>
</li>
<li><strong>BEM å·¥å…·å†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.m(props.type)"</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼šä¸éœ€è¦è‡ªå·±æ‹¼å­—ç¬¦ä¸²ï¼Œä¹Ÿä¸ç”¨æ‹…å¿ƒ <code>props.type</code> ä¸ºç©ºæ—¶çš„å¤„ç†ï¼ˆå·¥å…·å‡½æ•°å†…éƒ¨å·²å¤„ç†ï¼‰ã€‚</p>
</blockquote>
</li>
</ul>
<p><strong>åœºæ™¯ 3ï¼šå¤æ‚çš„ç»„åˆç±»å</strong></p>
<ul>
<li><strong>éœ€æ±‚</strong>ï¼šä¸€ä¸ªæŒ‰é’®ï¼ŒåŸºç¡€ç±»æ˜¯ <code>my-button</code>ï¼Œå¦‚æœæ˜¯ <code>primary</code> ç±»å‹åˆ™åŠ  <code>my-button--primary</code>ï¼Œå¦‚æœæ˜¯ç¦ç”¨åˆ™åŠ  <code>is-disabled</code>ã€‚</li>
<li><strong>ä¼ ç»Ÿå†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"[
  'my-button',
  props.type ? 'my-button--' + props.type : '',
  props.disabled ? 'is-disabled' : ''
]"</span>&gt;</span>
</code></pre>
</li>
<li><strong>BEM å·¥å…·å†™æ³•</strong>ï¼š
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"[
  ns.b(),
  ns.m(props.type),
  ns.is('disabled', props.disabled)
]"</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼šç»“æ„æ¸…æ™°ï¼Œæ•°ç»„é‡Œçš„æ¯ä¸€é¡¹éƒ½ä»£è¡¨ä¸€ä¸ªæ˜ç¡®çš„ BEM é€»è¾‘ã€‚</p>
</blockquote>
</li>
</ul>
<h4 data-id="heading-12">é«˜çº§åœºæ™¯ï¼ˆå°‘è§ä½†æœ‰ç”¨ï¼‰</h4>





























<table><thead><tr><th align="left">åœºæ™¯</th><th align="left">è§£é‡Š</th><th align="left">å†™æ³•</th><th align="left">ç”Ÿæˆç»“æœ</th></tr></thead><tbody><tr><td align="left"><strong>å—åç¼€ (Block Suffix)</strong></td><td align="left">ç”¨äºç»„ä»¶ç»„ï¼Œå¦‚æŒ‰é’®ç»„</td><td align="left"><code>ns.b('group')</code></td><td align="left"><code>my-button-group</code></td></tr><tr><td align="left"><strong>å¤æ‚åµŒå¥— (BE)</strong></td><td align="left">å¸¦åç¼€çš„å— + å…ƒç´ </td><td align="left"><code>ns.be('header', 'title')</code></td><td align="left"><code>my-button-header__title</code></td></tr><tr><td align="left"><strong>å…ƒç´ ä¿®é¥°ç¬¦ (EM)</strong></td><td align="left">å…ƒç´ çš„å˜ä½“</td><td align="left"><code>ns.em('text', 'bold')</code></td><td align="left"><code>my-button__text--bold</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-13">6. è¿›é˜¶ç­”ç–‘ï¼šå¤šå±‚åµŒå¥—æ€ä¹ˆå†™ï¼Ÿï¼ˆçˆ¶+å­+å­™ï¼‰</h3>
<p>å¾ˆå¤šåˆšæ¥è§¦ BEM çš„äººéƒ½ä¼šçº ç»“ï¼š<strong>â€œå¦‚æœæˆ‘çš„ HTML åµŒå¥—äº†å¾ˆå¤šå±‚ï¼Œéš¾é“ç±»åä¹Ÿè¦ä¸€ç›´æ‹¼ä¸‹å»å—ï¼Ÿâ€</strong></p>
<p>æ¯”å¦‚ï¼šçˆ¶å…ƒç´  <code>card</code> -&gt; å­å…ƒç´  <code>header</code> -&gt; å­™å…ƒç´  <code>title</code>ã€‚</p>
<h4 data-id="heading-14">âŒ é”™è¯¯çš„å†™æ³•ï¼ˆä¸è¦è¿™æ ·åšï¼‰</h4>
<p>ä¸è¦è¯•å›¾è¿˜åŸ DOM æ ‘çš„å±‚çº§ç»“æ„ï¼š</p>
<ul>
<li><code>my-card</code></li>
<li><code>my-card__header</code></li>
<li><code>my-card__header__title</code> (âŒ è¿™ç§å†™æ³•å¤ªé•¿äº†ï¼Œæƒé‡ä¹Ÿéš¾è®¡ç®—)</li>
</ul>
<h4 data-id="heading-15">âœ… æ­£ç¡®çš„ BEM å†™æ³•ï¼ˆæ‰å¹³åŒ–ï¼‰</h4>
<p>BEM çš„æ ¸å¿ƒåŸåˆ™æ˜¯<strong>æ‰å¹³åŒ–</strong>ã€‚æ— è®ºåµŒå¥—å¤šæ·±ï¼Œæ‰€æœ‰å†…éƒ¨å…ƒç´ éƒ½ç›´æ¥å½’å±äºæœ€å¤–å±‚çš„ Blockã€‚</p>
<ul>
<li>çˆ¶ï¼š<strong><code>ns.b()</code></strong> -&gt; <code>my-card</code></li>
<li>å­ï¼š<strong><code>ns.e('header')</code></strong> -&gt; <code>my-card__header</code></li>
<li>å­™ï¼š<strong><code>ns.e('title')</code></strong> -&gt; <code>my-card__title</code> (âœ… å®ƒæ˜¯ card çš„ titleï¼Œè€Œä¸æ˜¯ header çš„ title)</li>
</ul>
<h4 data-id="heading-16">ä»£ç ç¤ºä¾‹</h4>
<pre><code class="hljs language-typescript" lang="typescript">&lt;script setup&gt;
<span class="hljs-keyword">const</span> ns = <span class="hljs-title function_">useNamespace</span>(<span class="hljs-string">'card'</span>)
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- çˆ¶å…ƒç´  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.b()"</span>&gt;</span> 
    
    <span class="hljs-comment">&lt;!-- å­å…ƒç´  --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('header')"</span>&gt;</span>
      
      <span class="hljs-comment">&lt;!-- å­™å…ƒç´ ï¼šä¾ç„¶ä½¿ç”¨ ns.e()ï¼Œä¿æŒæ‰å¹³ --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"ns.e('title')"</span>&gt;</span>å¡ç‰‡æ ‡é¢˜<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
      
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>
</code></pre>
<h4 data-id="heading-17">ç‰¹æ®Šæƒ…å†µï¼šå¿…é¡»ä½“ç°å±‚çº§æ€ä¹ˆåŠï¼Ÿ</h4>
<p>å¦‚æœä½ è§‰å¾—â€œå­™å…ƒç´ â€å¿…é¡»è¦åœ¨é€»è¾‘ä¸Šå±äºâ€œå­å…ƒç´ â€ï¼ˆä¾‹å¦‚ <code>header</code> æœ¬èº«å·²ç»å¾ˆå¤æ‚äº†ï¼‰ï¼Œæœ‰ä¸¤ç§è§£æ³•ï¼š</p>
<ol>
<li>
<p><strong>ä½¿ç”¨ <code>be</code> (Block + Element)</strong>ï¼š
<code>ns.be('header', 'title')</code> -&gt; ç”Ÿæˆ <code>my-card-header__title</code></p>
</li>
<li>
<p><strong>æ‹†åˆ†ç»„ä»¶ï¼ˆæ¨èï¼‰</strong>ï¼š
å°† <code>Header</code> éƒ¨åˆ†æ‹†æˆä¸€ä¸ªç‹¬ç«‹çš„å­ç»„ä»¶ï¼Œåœ¨å­ç»„ä»¶é‡Œé‡æ–°å®šä¹‰ <code>ns = useNamespace('card-header')</code>ã€‚</p>
</li>
</ol>
<h4 data-id="heading-18">æ€»ç»“é€ŸæŸ¥ï¼šåµŒå¥—å±‚çº§å†™æ³•</h4>



































<table><thead><tr><th align="left">å±‚çº§</th><th align="left">æœ¯è¯­</th><th align="left"><code>useNamespace</code> å†™æ³•</th><th align="left">æœ€ç»ˆç”Ÿæˆç±»å</th></tr></thead><tbody><tr><td align="left"><strong>ç¬¬ä¸€å±‚ (çˆ¶)</strong></td><td align="left">Block</td><td align="left"><code>ns.b()</code></td><td align="left"><code>my-card</code></td></tr><tr><td align="left"><strong>ç¬¬äºŒå±‚ (å­)</strong></td><td align="left">Element</td><td align="left"><code>ns.e('header')</code></td><td align="left"><code>my-card__header</code></td></tr><tr><td align="left"><strong>ç¬¬ä¸‰å±‚ (å­™)</strong></td><td align="left">Element (æ‰å¹³)</td><td align="left"><code>ns.e('title')</code></td><td align="left"><code>my-card__title</code></td></tr><tr><td align="left"><strong>ç¬¬ä¸‰å±‚ (è¿›é˜¶)</strong></td><td align="left">Block-Element</td><td align="left"><code>ns.be('header', 'title')</code></td><td align="left"><code>my-card-header__title</code></td></tr></tbody></table>
<hr/>
<h3 data-id="heading-19">7. æ€»ç»“</h3>
<p>ä½¿ç”¨ <code>useNamespace</code> çœ‹èµ·æ¥åƒæ˜¯å¤šå†™äº†å‡ è¡Œä»£ç ï¼Œä½†å®ƒå¸¦æ¥äº†é•¿æœŸçš„å·¨å¤§æ”¶ç›Šï¼š</p>
<ol>
<li><strong>ä¸€é”®æ¢è‚¤</strong>ï¼šä¿®æ”¹ <code>defaultNamespace = 'ant'</code>ï¼Œæ•´ä¸ªç»„ä»¶åº“ç¬é—´å˜èº« <code>ant-button</code>, <code>ant-input</code>ã€‚</li>
<li><strong>æœç»æ‰‹è¯¯</strong>ï¼šå‡½æ•°è°ƒç”¨æ¯”æ‰‹å†™å­—ç¬¦ä¸²å®‰å…¨å¾—å¤šã€‚</li>
<li><strong>å¿ƒæ™ºè´Ÿæ‹…ä½</strong>ï¼šä½ ä¸éœ€è¦æ€è€ƒâ€œè¿™é‡Œåº”è¯¥ç”¨ä¸‹åˆ’çº¿è¿˜æ˜¯ä¸­åˆ’çº¿â€ï¼Œå·¥å…·æ›¿ä½ ç»Ÿä¸€äº†æ ‡å‡†ã€‚</li>
</ol>
<p>è¿™å°±æ˜¯ç»„ä»¶åº“å·¥ç¨‹åŒ–çš„é­…åŠ›ï¼š<strong>ç”¨å·¥å…·çº¦æŸä¹ æƒ¯ï¼Œç”¨è§„èŒƒæ¢å–è‡ªç”±ã€‚</strong></p>
<hr/>
<h3 data-id="heading-20">ğŸ”— å‚è€ƒèµ„æ–™</h3>
<ul>
<li><strong>BEM å®˜æ–¹æ–¹æ³•è®º</strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fen.bem.info%2Fmethodology%2Fkey-concepts%2F" target="_blank" title="https://en.bem.info/methodology/key-concepts/" ref="nofollow noopener noreferrer">en.bem.info</a> (å‘½åè§„èŒƒçš„èµ·æº)</li>
<li><strong>Element Plus æºç </strong>: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Felement-plus%2Felement-plus%2Fblob%2Fdev%2Fpackages%2Fhooks%2Fuse-namespace%2Findex.ts" target="_blank" title="https://github.com/element-plus/element-plus/blob/dev/packages/hooks/use-namespace/index.ts" ref="nofollow noopener noreferrer">packages/hooks/use-namespace</a> (å·¥ä¸šçº§ BEM å‡½æ•°å®ç°å‚è€ƒ)</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ç”Ÿæˆå™¨(ä¸Š)]]></title>    <link>https://juejin.cn/post/7602097118031446051</link>    <guid>https://juejin.cn/post/7602097118031446051</guid>    <pubDate>2026-02-02T15:50:33.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602097118031446051" data-draft-id="7602072652607471656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ç”Ÿæˆå™¨(ä¸Š)"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-02-02T15:50:33.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶…ç»å¤§å¸…å“¥"/> <meta itemprop="url" content="https://juejin.cn/user/1074701161733898"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ç”Ÿæˆå™¨(ä¸Š)
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1074701161733898/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶…ç»å¤§å¸…å“¥
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:50:33.000Z" title="Mon Feb 02 2026 15:50:33 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ç”Ÿæˆå™¨å‡½æ•°æ˜¯ä¸€ç§å…·æœ‰æš‚åœè¿è¡Œèƒ½åŠ›çš„æ‰§è¡Œæ¨¡å¼ï¼Œåœ¨jså‡½æ•°çš„åŸºç¡€ä¸Šï¼Œç”Ÿæˆå™¨å‡½æ•°å¯ä»¥åœ¨å‡½æ•°æ‰§è¡Œè¿‡ç¨‹ä¸­æš‚åœè‡ªå·±ï¼Œä½†æ˜¯ç”Ÿæˆå™¨å¹¶ä¸åªèƒ½æš‚åœè‡ªå·±å‡½æ•°çš„æ‰§è¡Œ,ç”Ÿæˆå™¨æ¯æ¬¡æš‚åœéƒ½å¯ä»¥ä»å¤–ç•Œå¾—åˆ°ä¸€ä¸ªå€¼ï¼ŒåŒæ—¶åœ¨æš‚åœæ—¶å‘å¤–ç•ŒæŠ›å‡ºä¸€ä¸ªå€¼ï¼Œå’Œå‡½æ•°å¤–å¯ä»¥å»ºç«‹èµ·ä¸€ç§<strong>åŒå‘æ¶ˆæ¯ä¼ é€’ç³»ç»Ÿ</strong></p>
<h3 data-id="heading-0">è¿­ä»£å™¨å’Œiterable</h3>
<p>å‡å¦‚æˆ‘ä»¬éœ€è¦äº§ç”Ÿä¸€ç³»åˆ—å€¼ï¼Œæ¯ä¸ªå€¼éƒ½å’Œå‰é¢ä¸€ä¸ªæœ‰ç‰¹å®šçš„å…³ç³»,çœ‹ä¸‹é¢ä¸€ä¸ªä¾‹å­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getSeriseValue</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">let</span> nextVal;
    
    <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> {
        <span class="hljs-keyword">if</span> (nextVal === <span class="hljs-literal">undefined</span>) {
            nextVal = <span class="hljs-number">1</span>;
            <span class="hljs-keyword">return</span> nextVal;
        } 
        nextVal = nextVal * <span class="hljs-number">3</span> + <span class="hljs-number">6</span>;
        <span class="hljs-keyword">return</span> nextVal;
    }
};

<span class="hljs-keyword">const</span> next = <span class="hljs-title function_">getSetiseValue</span>();

<span class="hljs-title function_">next</span>();<span class="hljs-comment">//1</span>
<span class="hljs-title function_">next</span>();<span class="hljs-comment">//9</span>
<span class="hljs-title function_">next</span>();<span class="hljs-comment">//33</span>

</code></pre>
<p>ä»æœ¬è´¨ä¸Šï¼Œå¯ä»¥è¯´æˆ‘ä»¬éœ€è¦ä»ä¸€ä¸ªåœ°æ–¹æŒç»­ä¸æ–­çš„å¾—åˆ°å€¼ï¼Œç›´åˆ°ç»“æŸ,å¦‚æœä½¿ç”¨è¿­ä»£å™¨çš„å½¢å¼ï¼Œä»£ç ä¼šå˜æˆå¦‚ä¸‹</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getSeriesValue</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">let</span> nextVal;
    <span class="hljs-keyword">return</span> {
        [<span class="hljs-title class_">Symbol</span>.<span class="hljs-property">iterator</span>]: <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) { <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>},  
        <span class="hljs-attr">next</span>: <span class="hljs-function">() =&gt;</span> {
            <span class="hljs-keyword">if</span> (nextVal === <span class="hljs-literal">undefined</span>) {
               nextVal = <span class="hljs-number">1</span>;
                <span class="hljs-keyword">return</span> {<span class="hljs-attr">value</span>: nextVal, <span class="hljs-attr">done</span>: <span class="hljs-literal">false</span> };
            }
            nextVal = nextVal * <span class="hljs-number">3</span> + <span class="hljs-number">4</span>;
            <span class="hljs-keyword">return</span> {<span class="hljs-attr">value</span>:nextVal, <span class="hljs-attr">done</span>:<span class="hljs-literal">false</span> };
        }
    }
};
</code></pre>
<p>å½“è°ƒç”¨getSeriesValueå‡½æ•°æ—¶å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡åŒ…å«ä¸€ä¸ªnextå‡½æ•°ï¼Œè°ƒç”¨nextå‡½æ•°å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æœ‰ä¸¤ä¸ªå±æ€§, done æ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œè¡¨ç¤ºè¿­ä»£å™¨çš„çŠ¶æ€,ä¸ºtrueè¡¨ç¤ºè¿­ä»£ç»“æŸï¼Œè¿­ä»£å™¨ä¸ä¼šäº§ç”Ÿå€¼äº†ï¼Œvalueæºå¸¦äº§ç”Ÿçš„å€¼ï¼Œ</p>
<p>jséµå®ˆäº†è¿­ä»£å™¨çš„è§„åˆ™ï¼Œå¹¶ä¸”åœ¨es6çš„æ—¶å€™æ¨å‡ºäº†for...ofå¾ªç¯,è¿™ä¸ªfor...ofå¾ªç¯å¯ä»¥ä¸æ–­çš„æ‰§è¡Œï¼Œ ç›´åˆ°å¾—åˆ°çš„ç»“æœå¯¹è±¡çš„doneæ˜¯trueï¼Œfor...ofå¾ªç¯ä¼šè°ƒç”¨ä½ çš„å¯¹è±¡å†…éƒ¨çš„Symbol.iteratorå±æ€§æ–¹æ³•ï¼Œè¦æ±‚è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡å¿…é¡»è¦æœ‰nextå‡½æ•°ï¼Œè¿™ä¸ªnextå‡½æ•°å¿…é¡»è¿”å›çš„å¯¹è±¡çš„å½¢å¼ä¸º{value:...,done:....}, (Symbol.iterableæ˜¯Es6å†…å»ºçš„ä¸€ä¸ªæ ‡è¯†ç¬¦, è¿™ä¸ªæ ‡è¯†ç¬¦æ˜¯ç‹¬ä¸€æ— äºŒçš„)</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> seriesValue = <span class="hljs-title function_">getSeriesValue</span>();
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> value <span class="hljs-keyword">of</span> seriesValue) {
    <span class="hljs-keyword">if</span> (value &gt; <span class="hljs-number">500</span>) {
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);
    <span class="hljs-comment">//1</span>
    <span class="hljs-comment">//7</span>
    <span class="hljs-comment">//25</span>
    <span class="hljs-comment">//79</span>
    <span class="hljs-comment">//241</span>
}

</code></pre>
<p>å¯èƒ½æœ€å¸¸è§çš„ç”¨æ³•æ˜¯ä»æ•°ç»„å¾—åˆ°ä¸€ç³»åˆ—å€¼,æ¯”å¦‚ä¸‹é¢</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> a = [<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">9</span>];

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> v <span class="hljs-keyword">of</span> a) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v);
}
<span class="hljs-comment">//1 3 5 7 9</span>
</code></pre>
<p>ä¸Šé¢èƒ½æ‰§è¡ŒæˆåŠŸå®Œå…¨æ˜¯å› ä¸ºes6è®©æ•°ç»„å¯¹è±¡éƒ½æ‹¥æœ‰äº†Symbol.iterableå±æ€§ï¼Œè°ƒç”¨è¿™ä¸ªå±æ€§å‡½æ•°ä¼šå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨,è‡ªå·±å†™çš„å­—é¢é‡å¯¹è±¡ï¼Œå¦‚æœä½ ä¸ç‰¹æ„å»å®ç°Symbol.iterableæ–¹æ³•å¹¶ä¸”è¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œæ˜¯ä½¿ç”¨ä¸äº†for...ofçš„</p>
<h4 data-id="heading-1">iterable</h4>
<p>ä¸Šé¢çš„ä¾‹å­é‡Œï¼Œè¿­ä»£å™¨å¯¹è±¡éƒ½åŒ…å«ä¸€ä¸ªnext, è€Œå½“å¯¹è±¡æœ‰Symbol.iterableå±æ€§ï¼Œå¹¶ä¸”è°ƒç”¨è¿™ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå°±ç§°å®ƒä¸ºå¯è¿­ä»£å¯¹è±¡(iterable),ä¸Šä¾‹ä¸­çš„seriesValueå°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒæ—¶å®ƒæœ‰Symbol.iterableå±æ€§ï¼Œè¿™ä¸ªå±æ€§å‡½æ•°è°ƒç”¨å°½ç®¡æ˜¯è¿”å›thisï¼Œä½†æ˜¯å› ä¸ºæœ¬èº«è‡ªå·±å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œä¹Ÿç¬¦åˆè°ƒç”¨è¿­ä»£å™¨çš„Symbol.iterableå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨çš„è§„åˆ™ï¼Œæ‰€ä»¥å®ƒåŒæ—¶è¿˜æ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡,Symbol.iterableå‡½æ•°è¿”å›thiså˜æˆå¯è¿­ä»£å¯¹è±¡çš„ç”¨æ³•è¿˜æŒºå¸¸è§çš„, ,å…¶å®for..ofå°±æ˜¯æœŸå¾…ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œè€Œä¸æ˜¯è¿­ä»£å™¨.</p>
<h4 data-id="heading-2">æ€»ç»“</h4>
<p>é€šè¿‡ä¸Šé¢ä¾‹å­å¯ä»¥å¾—åˆ°è¿­ä»£å™¨å’Œå¯è¿­ä»£å¯¹è±¡çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æè¿°è¿™ä¸ªç‰¹æ€§ï¼Œè¿­ä»£å™¨è¦æ±‚æœ‰ä¸€ä¸ªnextå‡½æ•°ï¼Œè€Œä¸”è¿™ä¸ªå‡½æ•°è¿”å›{value:....,done:....}ï¼Œå¯è¿­ä»£å¯¹è±¡è¦æ±‚å¯ä»¥é€šè¿‡Symbol.iterableå±æ€§å‡½æ•°è°ƒç”¨å¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨,æˆ‘ä»¬æŠŠè¿™ä¸¤ç§ç‰¹æ€§æè¿°ä¸ºè¿­ä»£å™¨åè®®å’Œç”Ÿæˆå™¨åè®®</p>
<h3 data-id="heading-3">ç”Ÿæˆå™¨çš„åŒå‘æ¶ˆæ¯ä¼ é€’</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> *foo (x) {
    <span class="hljs-keyword">const</span> y = x * (<span class="hljs-keyword">yield</span> <span class="hljs-string">"Hello"</span>);
    <span class="hljs-keyword">return</span> y;
}

<span class="hljs-comment">//æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°ï¼Œå¾—åˆ°ä¸€ä¸ªè¿­ä»£å™¨</span>
<span class="hljs-keyword">const</span> it = <span class="hljs-title function_">foo</span>(<span class="hljs-number">6</span>);<span class="hljs-comment">//</span>

<span class="hljs-comment">//æ‰§è¡Œè¿­ä»£å¯¹è±¡</span>
<span class="hljs-keyword">let</span> ans = it.<span class="hljs-title function_">next</span>(<span class="hljs-number">2</span>);<span class="hljs-comment">//ä¼ å…¥2,æ²¡æœ‰ç”¨ï¼Œä¼šè¢«å¿½ç•¥ </span>
<span class="hljs-comment">//ansä¸ºè¿­ä»£ç»“æœï¼Œå€¼ä¸ºå¯¹è±¡{value: "hello world", done: false}</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ans.<span class="hljs-property">value</span>); <span class="hljs-comment">// "Hello"</span>

ans = it.<span class="hljs-title function_">next</span>(<span class="hljs-number">7</span>);<span class="hljs-comment">//æ›¿ä»£(yield "Hello") ï¼Œå˜æˆ x * 7;</span>

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(ans.<span class="hljs-property">value</span>);<span class="hljs-comment">//42</span>




</code></pre>
<p>å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨å‡½æ•°ç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨(æ³¨æ„è¿™é‡Œå¹¶ä¸”æ²¡æœ‰å®ç°Symbol.Iterableæ¥å£ï¼Œæ‰€ä»¥å®ƒä¸æ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå•çº¯æ˜¯ä¸€ä¸ªè¿­ä»£å™¨), æ‰§è¡Œnextå‡½æ•°ï¼Œç”Ÿæˆå™¨å‡½æ•°å°±å¼€å§‹è¿è¡Œï¼Œ ç”Ÿæˆå™¨å‡½æ•°å†…æ‰§è¡Œåˆ° <code>yield value</code>æš‚åœç”Ÿæˆå™¨å‡½æ•°çš„æ‰§è¡Œï¼Œå¹¶ä¸”å°†valueæŠ›ç»™å¤–éƒ¨,   è¡¨ç°ä¸ºè¿­ä»£å™¨æ‰§è¡Œnextå‡½æ•°çš„è¿”å›å€¼ï¼Œè¿™ä¸ªè¿”å›å€¼ä¸ºä¸€ä¸ªè¿­ä»£ç»“æœå¯¹è±¡ï¼Œç»“æœå¦‚{value: ".....", done: ....}, å½“ç»§ç»­nextè°ƒç”¨çš„æ—¶å€™ä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªå€¼ä¼šæ›¿ä»£åŸæ¥<code>yield value</code> æ‰€åœ¨çš„ä½ç½®ç»§ç»­æ‰§è¡Œ, å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œ</p>
<p>æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨nextå‡½æ•°çš„æ—¶å€™ä¼ å…¥å‚æ•°æ˜¯æ²¡æœ‰ç”¨çš„,å› ä¸ºç¬¬ä¸€æ¬¡æ˜¯ç”¨äºæ•´ä¸ªç”Ÿæˆå™¨å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œå¹¶ä¸æ˜¯ç”±yield æš‚åœï¼ŒåŒæ—¶æœ€åä¸€æ¬¡è°ƒç”¨nextå‡½æ•°çš„æ—¶å€™ï¼Œä¹Ÿæ²¡æœ‰yieldæŠ›å‡ºä¸€ä¸ªå€¼äº†ï¼Œè¿™ä¸ªæ—¶å€™return çš„å€¼å°±ä½œä¸ºæœ€åä¸€æ¬¡è°ƒç”¨å¾—åˆ°çš„è¿­ä»£ç»“æœå¯¹è±¡çš„valueå±æ€§çš„å€¼</p>
<h3 data-id="heading-4">ç”Ÿæˆå™¨è¿­ä»£å™¨</h3>
<p>å¯è¿­ä»£å¯¹è±¡å¯ä»¥äº§å‡ºè¿­ä»£å™¨ï¼Œè¿™ä¸ªè¿­ä»£å™¨å®ç°äº†å¯è¿­ä»£åè®®,åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡,æˆ‘ä»¬è¿˜å¯ä»¥è¦†å†™ä¸Šé¢çš„ä¾‹å­</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> *<span class="hljs-title function_">getSeriesValue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> nextVal;
    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>){
        <span class="hljs-keyword">if</span> (nextVal === <span class="hljs-literal">undefined</span>) {
            nextVal = <span class="hljs-number">1</span>;
        } <span class="hljs-keyword">else</span> {
            nextVal = nextVal * <span class="hljs-number">3</span> + <span class="hljs-number">6</span>;
        }

        <span class="hljs-keyword">yield</span> nextVal;
    }
}

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> <span class="hljs-title function_">getSeriesValue</span>()) {
    <span class="hljs-keyword">if</span> (v &gt; <span class="hljs-number">500</span>) {
        <span class="hljs-keyword">break</span>;
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v);
}
</code></pre>
<p>for...ofè°ƒç”¨breakåï¼Œä¼šå‘è¿­ä»£å™¨å‘é€ä¸€ä¸ªä¿¡å·ç»ˆæ­¢,ä¹Ÿå¯ä»¥ä½¿ç”¨è¿­ä»£å™¨çš„returnå‡½æ•°,è°ƒç”¨returnå‡½æ•°åï¼Œæ‰€æœ‰çš„æ‰€éœ€yieldéƒ½ä¼šè¢«å¿½ç•¥,ä¼ é€’ç»™returnå‡½æ•°çš„å‚æ•°ä¼šä½œä¸ºè¿­ä»£ç»“æœå¯¹è±¡çš„valueå±æ€§çš„å€¼ï¼Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> *<span class="hljs-title function_">getSeriesValue</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">let</span> nextVal;
    <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) {
    <span class="hljs-keyword">if</span> (nextVal === <span class="hljs-literal">undefined</span>) {
        nextVal = <span class="hljs-number">1</span>;
    } <span class="hljs-keyword">else</span> {
        nextVal = nextVal * <span class="hljs-number">3</span> + <span class="hljs-number">6</span>;
    }
    <span class="hljs-keyword">yield</span> nextVal;
  }
}

<span class="hljs-keyword">const</span> it = <span class="hljs-title function_">getSeriesValue</span>()
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> v <span class="hljs-keyword">of</span> it) {
    <span class="hljs-keyword">if</span> (v &gt; <span class="hljs-number">500</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(it.<span class="hljs-keyword">return</span>(<span class="hljs-string">"down"</span>).<span class="hljs-property">value</span>); <span class="hljs-comment">//down</span>
    }
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(v);
}


<span class="hljs-comment">//1</span>
<span class="hljs-comment">//9</span>
<span class="hljs-comment">//33</span>
<span class="hljs-comment">//105</span>
<span class="hljs-comment">//321</span>
<span class="hljs-comment">//down</span>
<span class="hljs-comment">//969</span>
</code></pre>
<p>ä½¿ç”¨returnç»ˆæ­¢å½“å‰çš„è¿­ä»£å™¨åï¼Œdoneä¸ºtrue,æ‰€ä»¥for...ofä¹Ÿå°±ä¸ä¼šç»§ç»­å¾ªç¯ä¸‹å»äº†ã€‚</p>
<h2 data-id="heading-5">æ€»ç»“</h2>
<p>åŸºäºä¸Šè¿°ï¼Œæˆ‘ä»¬å¯ä»¥è®¤ä¸ºç”Ÿæˆå™¨çš„ä¸€ä¸ªç”¨æ³•å°±æ˜¯ç”¨äºç”Ÿäº§ä¸€ç³»åˆ—å€¼ï¼Œå®ƒç”Ÿæˆä¸€ä¸ªè¿­ä»£å™¨åŒæ—¶ä¹Ÿæ˜¯å¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥ç»™for...ofè¿ç»­äº§å‡ºä¸€ç³»åˆ—å€¼,æˆ–è€…è‡ªå·±nextè°ƒç”¨éè¿ç»­çš„äº§å‡ºå€¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React19äº‹ä»¶è°ƒåº¦çš„è®¾è®¡æ€è·¯]]></title>    <link>https://juejin.cn/post/7602133286644072498</link>    <guid>https://juejin.cn/post/7602133286644072498</guid>    <pubDate>2026-02-02T15:51:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602133286644072498" data-draft-id="7601929765533909043" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React19äº‹ä»¶è°ƒåº¦çš„è®¾è®¡æ€è·¯"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,é¢è¯•"/> <meta itemprop="datePublished" content="2026-02-02T15:51:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç§€ç§€ä¸åªä¼šå‰ç«¯"/> <meta itemprop="url" content="https://juejin.cn/user/1410009035452887"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React19äº‹ä»¶è°ƒåº¦çš„è®¾è®¡æ€è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1410009035452887/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç§€ç§€ä¸åªä¼šå‰ç«¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T15:51:55.000Z" title="Mon Feb 02 2026 15:51:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    6
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>å…ˆè¯´ç»“è®ºï¼ŒReact é€‰æ‹© MessageChannel å®Œæˆäº‹ä»¶è°ƒåº¦ï¼Œæ˜¯å› ä¸ºå®ƒï¼š</strong></p>
<ul>
<li>å±äºå®ä»»åŠ¡ï¼ˆä¸ä¼šé¥¿æ­»æµè§ˆå™¨ï¼šJavaScript ä¸€ç›´å ç€ä¸»çº¿ç¨‹ï¼Œå¯¼è‡´æµè§ˆå™¨ä¸€ç›´æ²¡æœ‰æœºä¼šå»åšå®ƒå¿…é¡»åšçš„äº‹ï¼ˆæ¸²æŸ“ã€å“åº”è¾“å…¥ã€å¸ƒå±€ã€ç»˜åˆ¶ï¼‰ï¼‰</li>
<li>å»¶è¿Ÿæä½ï¼ˆæ¥è¿‘å¾®ä»»åŠ¡ï¼Œä½†ä¸ä¼šé˜»å¡æ¸²æŸ“ï¼‰</li>
<li>ç›¸è¾ƒäº rAF ä¸ç»‘å®šæ¸²æŸ“å¸§</li>
<li>å¯æ§ã€å¯ä¸­æ–­ã€å¯è®©å‡ºä¸»çº¿ç¨‹</li>
</ul>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€React è°ƒåº¦å’Œäº‹ä»¶å¾ªç¯çš„å¯†åˆ‡è”ç³»</h2>
<h3 data-id="heading-1">1ã€React åœ¨â€œè°ƒåº¦â€ä»€ä¹ˆï¼Ÿ</h3>
<blockquote>
<p>React è°ƒåº¦çš„ä¸æ˜¯ã€Œäº‹ä»¶ã€ï¼Œ React è°ƒåº¦çš„æ˜¯ï¼š<strong>Fiber æ¸²æŸ“ä»»åŠ¡ï¼ˆrender workï¼‰</strong></p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯æˆ‘ä¸Šç¯‡æ–‡ç« è¯´è¿‡çš„è¿™äº›ä¸œè¥¿ï¼š</p>
<ul>
<li><code>beginWork</code></li>
<li><code>completeWork</code></li>
<li>diff</li>
<li>æ„å»º workInProgress Fiber æ ‘</li>
</ul>
<p>React Scheduler çš„ç›®æ ‡åªæœ‰æ˜¯ï¼š<strong>åœ¨ä¸é˜»å¡æµè§ˆå™¨çš„å‰æä¸‹ï¼Œå°½å¯èƒ½å¤šåœ°æ¨è¿› Fiber æ¸²æŸ“è¿›åº¦ã€‚</strong></p>
<p>æ‰€ä»¥ Scheduler éœ€è¦æ»¡è¶³ï¼š</p>
<ul>
<li>èƒ½åå¤è¢«è°ƒç”¨</li>
<li>æ¯æ¬¡æ‰§è¡Œä¸€å°éƒ¨åˆ†</li>
<li>æ‰§è¡Œå®Œå°±â€œè®©å‡ºä¸»çº¿ç¨‹â€</li>
</ul>
<h3 data-id="heading-2">2ã€å›å¿†æµè§ˆå™¨äº‹ä»¶å¾ªç¯</h3>
<p>äº‹ä»¶å¾ªç¯æ¨¡å‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆTaskï¼‰     â”‚  â† setTimeout / MessageChannel / rAF callback
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
      æ‰§è¡Œ JS
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼ˆä¸€æ¬¡æ€§æ¸…ç©ºï¼‰ â”‚  â† Promise.then / queueMicrotask
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
          â†“
      æ¸…ç©ºæ‰€æœ‰å¾®ä»»åŠ¡
          â†“
      æµè§ˆå™¨æ¸²æŸ“ï¼ˆpaintï¼‰
</code></pre>
<p>å› æ­¤ï¼Œä¸ºäº†æ»¡è¶³ä¸Šè¿° Scheduler çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åªèƒ½é€‰æ‹© Taskï¼ˆåç»­è¯¦ç»†è¯´æ˜ä¸ºä»€ä¹ˆæœ€ç»ˆé€‰æ‹©äº† MessageChannelï¼‰ã€‚</p>
<h2 data-id="heading-3">äºŒã€React Scheduler æºç ï¼ˆReact 19ï¼‰</h2>
<p>åœ¨ <code>packages/scheduler/src/forks/SchedulerHostConfig.default.js</code></p>
<p>æ ¸å¿ƒé€»è¾‘ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
<span class="hljs-keyword">const</span> port = channel.<span class="hljs-property">port2</span>;

channel.<span class="hljs-property">port1</span>.<span class="hljs-property">onmessage</span> = performWorkUntilDeadline;

<span class="hljs-keyword">function</span> <span class="hljs-title function_">requestHostCallback</span>(<span class="hljs-params"/>) {
  port.<span class="hljs-title function_">postMessage</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// ç”¨ MessageChannel æ¥â€œè‡ªæˆ‘å”¤é†’â€</span>
}
</code></pre>
<p>Scheduler æ‰§è¡Œæ¨¡å‹ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">MessageChannel å›è°ƒè§¦å‘
â†“
performWorkUntilDeadline
â†“
while (è¿˜æœ‰ä»»åŠ¡ &amp;&amp; æ²¡è¶…æ—¶) {
  æ‰§è¡Œ Fiber work
}
â†“
æ—¶é—´ä¸å¤Ÿ â†’ å†å‘ä¸€æ¬¡ MessageChannelï¼ˆMessageChannel æ˜¯â€œä¸‹ä¸€æ¬¡è°ƒåº¦ tickâ€çš„è§¦å‘å™¨ï¼‰
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€ä¸ºä»€ä¹ˆä¸ç”¨å¾®ä»»åŠ¡ï¼ˆPromise / queueMicrotaskï¼‰</h2>
<p>å‡å¦‚ React ç”¨å¾®ä»»åŠ¡ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>().<span class="hljs-title function_">then</span>(workLoop)
</code></pre>
<h3 data-id="heading-5">é—®é¢˜ 1ï¼šä¼šé˜»å¡æ¸²æŸ“</h3>
<blockquote>
<p>å¾®ä»»åŠ¡ä¼šåœ¨ <strong>paint ä¹‹å‰å…¨éƒ¨æ‰§è¡Œå®Œ</strong></p>
</blockquote>
<p>æ„å‘³ç€ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">React ç»§ç»­ work
â†’ work é‡Œåˆè°ƒåº¦å¾®ä»»åŠ¡
â†’ æµè§ˆå™¨ï¼šä½ å…ˆåˆ«ç”»
â†’ UI å¡æ­»
</code></pre>
<p><strong>è¿™å®Œå…¨å°±æ˜¯ Fiber çš„â€œæ—¶é—´åˆ‡ç‰‡â€çš„å¯¹ç«‹åšæ³•ã€‚</strong></p>
<h3 data-id="heading-6">é—®é¢˜ 2ï¼šå¾®ä»»åŠ¡ä¸å¯ä¸­æ–­</h3>
<ul>
<li>å¾®ä»»åŠ¡ä¸€æ—¦å¼€å§‹</li>
<li>æµè§ˆå™¨<strong>å¿…é¡»æ¸…ç©º</strong></li>
<li>React æ— æ³•â€œè®©å‡ºä¸»çº¿ç¨‹â€ï¼Œæ›´æ²¡æ³•å®ç°å¹¶å‘æ¸²æŸ“</li>
</ul>
<h2 data-id="heading-7">å››ã€ä¸ºä»€ä¹ˆä¸ç”¨ setTimeout</h2>
<p>setTimeout çš„é—®é¢˜ä¸æ˜¯â€œæ…¢â€ï¼Œè€Œæ˜¯â€œä¸ç¨³å®šâ€ã€‚</p>
<h3 data-id="heading-8">é—®é¢˜ 1ï¼šæœ€å°å»¶è¿Ÿä¸å¯é </h3>
<ul>
<li>HTML æ ‡å‡†ï¼š<strong>â€‹æœ€å° 4msï¼ˆâ€‹</strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fhtml.spec.whatwg.org%2Fmultipage%2Ftimers-and-user-prompts.html%23dom-settimeout" target="_blank" title="https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#dom-settimeout" ref="nofollow noopener noreferrer">HTML Living Standard â€” Last Updated 31 January 2026</a><strong>ï¼‰</strong>
<blockquote>
<p>If nesting level is greater than 5, and timeout is less than 4, then set timeout to 4.</p>
<p>setTimeout åœ¨åµŒå¥—å±‚çº§è¶…è¿‡ 5 å±‚ï¼Œtimeoutï¼ˆå»¶æ—¶ï¼‰å¦‚æœå°äº 4msï¼Œé‚£ä¹ˆåˆ™ä¼šè®¾ç½®ä¸º 4msï¼Œè¿™ä¸ªæ—¶å·®æ˜¯ React æ— æ³•æ¥å—çš„ã€‚</p>
</blockquote>
</li>
<li>ç²¾åº¦å¤ªç²—ï¼ˆSchedulerï¼šâ€œå½“å‰å¸§è¿˜èƒ½ä¸èƒ½å†å¹² 2ms çš„æ´»ï¼Ÿâ€ï¼‰</li>
</ul>
<h2 data-id="heading-9">äº”ã€ä¸ºä»€ä¹ˆä¸ç”¨ requestAnimationFrameï¼ˆrAFï¼‰</h2>
<h3 data-id="heading-10">1ã€rAF è¢«ç»‘å®šåˆ°â€œæ¸²æŸ“å¸§â€</h3>
<pre><code class="hljs language-Plain" lang="Plain">ä¸€å¸§ â‰ˆ 16.6ms
</code></pre>
<p>ä½† React çš„ç›®æ ‡æ˜¯ï¼š<strong>â€‹åªè¦ä¸»çº¿ç¨‹ç©ºä¸€ç‚¹ï¼Œæˆ‘å°±æ¨è¿›ä¸€ç‚¹ Fiberï¼›â€‹</strong>è€Œä¸æ˜¯ï¼šâ€œéè¦ç­‰ä¸‹ä¸€å¸§â€ã€‚</p>
<h3 data-id="heading-11">2ã€rAF åœ¨åå°ä¸æ‰§è¡Œ</h3>
<p>æµè§ˆå™¨ä¼šæš‚åœ rAFï¼ˆé€‰æ‹©æ€§è·³è¿‡æ¸²æŸ“å¸§ï¼‰ï¼ŒReact æ›´æ–°ç›´æ¥â€œå†»ç»“â€ï¼</p>
<h2 data-id="heading-12">å…­ã€è¿˜å¾—æ˜¯ MessageChannel ~</h2>
<p>MessageChannel æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-keyword">const</span> channel = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageChannel</span>();
<span class="hljs-comment">// ä¸¤ä¸ªé¢‘é“ç«¯å£ï¼Œè¿™ä¸¤ä¸ªç«¯å£å¯ä»¥ç›¸äº’é€šä¿¡</span>
<span class="hljs-keyword">const</span> port1 = channel.<span class="hljs-property">port1</span>;
<span class="hljs-keyword">const</span> port2 = channel.<span class="hljs-property">port2</span>;
btn1.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
  <span class="hljs-comment">// port2 ç»™ port1 å‘æ¶ˆæ¯</span>
  port2.<span class="hljs-title function_">postMessage</span>(content.<span class="hljs-property">value</span>);
}
<span class="hljs-comment">// port1 ç›‘å¬è‡ªå·±å—åˆ°çš„æ¶ˆæ¯</span>
port1.<span class="hljs-property">onmessage</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>){
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`port1 æ”¶åˆ°äº†æ¥è‡ª port2 çš„æ¶ˆæ¯ï¼š<span class="hljs-subst">${event.data}</span>`</span>);
}
</code></pre>
<p>MessageChannel å®Œç¾è§„é¿æ‰ä¸Šè¿°ä¸€ç³»åˆ—ç¼ºç‚¹ï¼š</p>
<p><strong>MessageChannel + shouldYield =&gt; æ—¶é—´åˆ‡ç‰‡ã€‚</strong></p>
<p>React å¹¶ä¸æ˜¯â€œæ— è„‘è·‘â€ï¼Œè€Œæ˜¯æ¯ä¸€å°æ®µéƒ½é—®ä¸€å¥ï¼š</p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">shouldYield</span>()
</code></pre>
<p>åˆ¤æ–­ä¾æ®ï¼š</p>
<ul>
<li>performance.now()</li>
<li>å¸§é¢„ç®—</li>
<li>ç”¨æˆ·è¾“å…¥æ˜¯å¦ pending</li>
</ul>
<p><strong>å¦‚æœè¯¥è®©å‡ºï¼š</strong></p>
<pre><code class="hljs language-TypeScript" lang="TypeScript"><span class="hljs-title function_">requestHostCallback</span>() <span class="hljs-comment">// å†å‘ä¸€ä¸ª MessageChannel</span>
<span class="hljs-keyword">return</span>;
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">[å®ä»»åŠ¡] MessageChannel
  â†“
  React æ‰§è¡Œ Fiber workï¼ˆ2~5msï¼‰
  â†“
  shouldYield = true
  â†“
  postMessage å†çº¦ä¸€æ¬¡
  â†“
[æµè§ˆå™¨æœ‰æœºä¼š paint / å¤„ç†è¾“å…¥]
  â†“
[ä¸‹ä¸€æ¬¡ MessageChannel]
</code></pre>
<h2 data-id="heading-13">ä¸ƒã€å½©è›‹æ¥å’¯</h2>
<h3 data-id="heading-14">1ã€<code>requestAnimationFrame</code></h3>
<blockquote>
<p>ç›²çŒœå¾ˆå¤šåŒå­¦å¯¹äºä¸Šé¢è‹¥å¹²ç§ä¸å¦‚ MessageChannel çš„åšæ³•è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæ ¹æœ¬åœ¨äºäº‹ä»¶å¾ªç¯æŒæ¡çš„ä¸å¥½ï¼Œæˆ‘è¿™é‡Œé’ˆå¯¹äº‹ä»¶å¾ªç¯çš„**<code>requestAnimationFrame</code>**è¯¦ç»†è®²è®²ï¼ˆå…¶ä»–çŸ¥è¯†ç‚¹å¯ä»¥ç¿»çœ‹æˆ‘ä¹‹å‰å†™çš„å…³äºäº‹ä»¶å¾ªç¯çš„æ–‡ç« ï¼Œè®²è§£çš„éå¸¸æ¸…æ¥šï¼‰ã€‚</p>
</blockquote>
<p>äº‹ä»¶å¾ªç¯é‡Œé¢çš„ <code>requestAnimationFrame</code> ä»…ä»…æ˜¯ä¸€ä¸ªè·Ÿç€æ¸²æŸ“å¸§èµ°çš„â€œå°å¼Ÿâ€ï¼Œæœ‰æ¸²æŸ“æ‰æœ‰ rAFï¼š</p>
<ul>
<li>å®ƒä¸èƒ½â€œç¼©çŸ­â€ä¸Šä¸€ä¸ª 16.66ms ä¸­ Task çš„æ‰§è¡Œæ—¶é—´</li>
<li>ä¿è¯å›è°ƒåªä¼šåœ¨â€œæµè§ˆå™¨å³å°†æ¸²æŸ“ä¸‹ä¸€å¸§ä¹‹å‰â€æ‰§è¡Œ</li>
</ul>
<p>å› æ­¤å¦‚æœä¸Šä¸€å¸§çš„ Task å¤ªé‡å¯¼è‡´é”™è¿‡æ¸²æŸ“çª—å£ï¼Œæµè§ˆå™¨ä¼šç›´æ¥â€œä¸¢å¸§â€ï¼Œè€Œä¸æ˜¯æ’é˜Ÿæ‰§è¡Œå¯¼è‡´è¿é”ç´¯ç§¯å¡é¡¿ï¼ˆsetTimeout çš„åšæ³•ï¼‰</p>
<blockquote>
<p>rAF å›è°ƒæ°¸è¿œä¸ä¼šæŒ¤å æ¸²æŸ“æ—¶æœºï¼Œåªä¼šâ€œå¯¹é½â€æ¸²æŸ“èŠ‚å¥</p>
</blockquote>
<blockquote>
<p>â€œä¸¢å¸§â€è¿™ä¸ªæ¦‚å¿µï¼Œå¯¹äºæ•°ç äº§å“ç»å¸¸å…³æ³¨çš„åŒå­¦åº”è¯¥ä¼šéå¸¸ç†Ÿæ‚‰ã€‚æˆ‘ä»¬æ‹¿æ¸¸æˆâ€œåŸç¥â€ä¸¾ä¾‹å­ï¼Œå¸§ç‡è¶Šé«˜åŠ¨ç”»è¶Šæµç•…ï¼Œè€Œå¦‚æœæŸä¸€å¸§äº‹ä»¶ Task æ‰§è¡Œæ—¶é—´å¤ªé•¿ï¼ˆè¶…è¿‡ 1 å¸§æ€»æ—¶é•¿ï¼‰ï¼ŒrAF å°±ä¸å†æ‰§è¡Œï¼Œè¿™å¸§å°±è¢«è‡ªåŠ¨â€œä¸¢æ‰äº†â€ã€‚è€Œä¸€äº›æ‰‹æœºå‚å•†ä¸ºäº†å¼¥è¡¥è¿™ä¸ªé—®é¢˜ï¼Œæ‰€ä»¥å°±å‡ºç°äº†æ‰‹åŠ¨â€œæ’å¸§â€çš„åšæ³•ã€‚</p>
<p>ä¸€èˆ¬åœ°ï¼Œ1s å¯¹åº”ç€ 60 å¸§ï¼Œè€Œ 1 å¸§å°±æ˜¯ 16.66msã€‚å¦‚æœä¸€ä¸ª Task è¶…è¿‡äº† 16.66msï¼Œé‚£ä¹ˆå°±å ç”¨äº†ä¸‹ä¸€å¸§çš„æ—¶é—´ï¼Œä¸‹ä¸€å¸§åˆ™ä¸å† rAF/paint ï¼ˆå‡ºç°ä¸¢å¸§ï¼‰ã€‚ä½†å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä½å¸§ç‡ï¼Œå‡å¦‚ä½¿ç”¨ 30 å¸§ 1sï¼Œé‚£ä¹ˆ 1 å¸§å°±æ˜¯ 33.3msï¼Œè¿™æ ·è™½ç„¶ç”»è´¨å˜å·®äº†ï¼Œä½†æ˜¯åŠ¨ç”»æµç•…åº¦ç¡®å®æ›´å¥½äº†ã€‚</p>
</blockquote>
<p>æµè§ˆå™¨åœ¨ä¸€å¸§å†…è¦åšçš„äº‹æƒ…ï¼ˆç®€åŒ–ï¼‰ï¼š</p>
<pre><code class="hljs language-Plain" lang="Plain">JS Taskï¼ˆå¤è€è¯´æ³•ï¼šå®ä»»åŠ¡ï¼‰
â†’ å¾®ä»»åŠ¡
â†’ rAF
â†’ æ ·å¼è®¡ç®—
â†’ Layout
â†’ Paint
â†’ Composite
â†’ å±å¹•æ˜¾ç¤º
</code></pre>
<p>â€‹<strong>åªè¦ JS Task è¶…è¿‡ ~16msï¼Œæµè§ˆå™¨å°±æ¥ä¸åŠæ¸²æŸ“è¿™ä¸€å¸§</strong>â€‹ï¼Œç»“æœå°±æ˜¯ï¼š</p>
<ul>
<li>è¿™ä¸€å¸§ç›´æ¥æ²¡ç”»å‡ºæ¥ï¼ˆæ‰å¸§ï¼‰</li>
<li>ç”¨æˆ·çœ‹åˆ°å¡é¡¿</li>
</ul>
<p>å‡è®¾è¿™æ ·å†™åŠ¨ç”»ï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-built_in">setTimeout</span>(step, <span class="hljs-number">16</span>)
</code></pre>
<p>å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</p>
<pre><code class="hljs language-Plain" lang="Plain">Task A (20ms)  è¶…è¿‡ 16ms
â†“
setTimeout å›è°ƒæ’é˜Ÿ
â†“
Task B (åˆ 20ms)
â†“
Task C ...
</code></pre>
<p>åæœæ˜¯ï¼š</p>
<ul>
<li>å®šæ—¶å™¨ <strong>åªç®¡æ—¶é—´ï¼Œä¸ç®¡æ¸²æŸ“ï¼ˆè¿™æ˜¯â€œæ—¶é—´é©±åŠ¨â€ï¼Œä¸æ˜¯â€œæ¸²æŸ“é©±åŠ¨â€ï¼‰</strong></li>
<li>å›è°ƒä¼š <strong>æŒç»­æ’é˜Ÿ</strong></li>
<li>æ¯ä¸€å¸§éƒ½è¢« JS Task æŒ¤çˆ†</li>
<li>å¡é¡¿ä¼š <strong>ç´¯ç§¯ + æ”¾å¤§</strong></li>
</ul>
<p>å¦‚æœæ”¹ä¸º rAFï¼š</p>
<pre><code class="hljs language-JavaScript" lang="JavaScript"><span class="hljs-title function_">requestAnimationFrame</span>(callback) <span class="hljs-comment">// â€œå½“æµè§ˆå™¨å‡†å¤‡å¼€å§‹ä¸‹ä¸€æ¬¡æ¸²æŸ“ä¹‹å‰ï¼Œè°ƒç”¨æˆ‘â€</span>
</code></pre>
<pre><code class="hljs language-Plain" lang="Plain">while (true) {
  1. å–ä¸€ä¸ª Task æ‰§è¡Œï¼ˆmacro taskï¼‰
  2. æ‰§è¡Œæ‰€æœ‰ microtasks
  3. ã€æ¸²æŸ“æ£€æŸ¥ç‚¹ã€‘ï¼ˆå½“å‰æ—¶é—´ - ä¸Šä¸€å¸§æ¸²æŸ“æ—¶é—´ &lt; 16.66msï¼ˆ60Hzï¼‰ï¼‰
     - requestAnimationFrame
     - style / layout / paint
}
</code></pre>
<blockquote>
<p>å½“ç„¶ï¼Œå¦‚æœ Task ä¸€ç›´æ‰§è¡Œå¾—å¤ªä¹…ï¼Œ<code>requestAnimationFrame</code> ä¸€ç›´å¾—ä¸åˆ°æ‰§è¡Œï¼Œæœ¬è´¨ä¸Šä»ç„¶æ˜¯å¡é¡¿ï¼Œè€Œä¸”æ˜¯ã€Œä¸»çº¿ç¨‹è¢«é•¿æœŸå ç”¨å‹å¡é¡¿ã€ã€‚æ‰€ä»¥ rAF å¹¶ä¸èƒ½æ‹¯æ•‘è¢« JS å®Œå…¨å æ­»çš„ä¸»çº¿ç¨‹ã€‚</p>
</blockquote>
<h3 data-id="heading-15">2ã€ç”¨æ—¶é—´è½´æ¼”ç¤ºå¡é¡¿</h3>
<h4 data-id="heading-16">å¡é¡¿ï¼šåœºæ™¯ä¸€</h4>
<p><strong>ç±»å‹ä¸€ï¼šJS æŠŠä¸»çº¿ç¨‹å½»åº•å æ­»ï¼ˆè‡´å‘½å¡é¡¿ï¼‰</strong></p>
<p><code>Task 200ms</code>â€‹<code>Task 200ms</code>â€‹<code>Task 200ms</code></p>
<p>ç»“æœï¼š</p>
<ul>
<li>rAF</li>
<li>Render</li>
<li>è¾“å…¥å“åº”</li>
<li>é¡µé¢å‡æ­»</li>
</ul>
<blockquote>
<p><strong>rAF æ— è§£</strong></p>
</blockquote>
<p><strong>ç±»å‹äºŒï¼šå•å¸§å¶å°”è¶…æ—¶ï¼ˆå¯æ¢å¤å¡é¡¿ï¼‰</strong></p>
<p><code>Task 20msï¼ˆå¶å‘ï¼‰</code>â€‹<code>Task 5ms</code>â€‹<code>Task 5ms</code></p>
<p>ç»“æœï¼š</p>
<ul>
<li>æ‰ 1 å¸§</li>
<li>åç»­å¸§æ¢å¤</li>
<li>åŠ¨ç”»ç»§ç»­</li>
</ul>
<blockquote>
<p><strong>è¿™æ˜¯ rAF çš„â€œä¸»æˆ˜åœºâ€</strong></p>
</blockquote>
<h4 data-id="heading-17">å¡é¡¿ï¼šåœºæ™¯äºŒ</h4>
<p>å‡è®¾åœºæ™¯</p>
<ul>
<li>å±å¹• 60Hzï¼ˆ16.6ms / å¸§ï¼‰</li>
<li>æ¯ä¸ªåŠ¨ç”» step çš„ JS æ‰§è¡Œ <strong>18ms</strong></li>
<li>ä½¿ç”¨ <code>setTimeout(step, 16)</code></li>
</ul>
<p>ç¬¬ 1 å¸§ï¼ˆå·²ç»å¼€å§‹å‡ºé—®é¢˜ï¼‰</p>
<p><code>0ms   Task: step æ‰§è¡Œï¼ˆ18msï¼‰</code>â€‹<code>18ms  microtasks</code>â€‹<code>18ms  âŒ è¶…è¿‡ 16.6msï¼Œæ— æ³•æ¸²æŸ“</code>â€‹<code>18ms  setTimeout å·²ç»åˆ°æœŸ â†’ ä¸‹ä¸€ä¸ª step å·²åœ¨ Task é˜Ÿåˆ—ä¸­</code></p>
<p>ç»“æœï¼š<strong>æ²¡æ¸²æŸ“ï¼Œä½† JS æ²¡åœ</strong></p>
<p>ç¬¬ 2 å¸§ï¼ˆå¼€å§‹ç§¯å‹ï¼‰</p>
<p><code>18ms  Task: step æ‰§è¡Œï¼ˆ18msï¼‰</code>â€‹<code>36ms  microtasks</code>â€‹<code>36ms  âŒ åˆé”™è¿‡æ¸²æŸ“</code>â€‹<code>36ms  ä¸‹ä¸€ä¸ª step ç»§ç»­æ’é˜Ÿ</code></p>
<p>ç¬¬ N å¸§ï¼ˆé›ªå´©ï¼‰</p>
<p><code>Task â†’ Task â†’ Task â†’ Task â†’ Task </code>â€‹<code> 18ms   18ms   18ms   18ms   18ms</code></p>
<p>è¡¨ç°ä¸ºï¼š</p>
<ul>
<li>JS ä¸€ç›´åœ¨è·‘</li>
<li>æµè§ˆå™¨å‡ ä¹æ²¡æœ‰ Render æœºä¼š</li>
<li>é¡µé¢çœ‹èµ·æ¥ <strong>å¡ä½ä¸åŠ¨</strong></li>
<li>CPU å æ»¡</li>
</ul>
<p>setTimeout åªè®¤ï¼š<code>æ—¶é—´åˆ°äº† â†’ æ‰§è¡Œå›è°ƒ</code></p>
<p>ä¸ç®¡ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹å¿™ä¸å¿™</li>
<li>èƒ½ä¸èƒ½æ¸²æŸ“</li>
<li>ç”¨æˆ·æ˜¯ä¸æ˜¯åœ¨æ»šåŠ¨ / ç‚¹å‡»</li>
</ul>
<p>å½“ä¸€å¸§æ²¡ç”»å‡ºæ¥ï¼š</p>
<ul>
<li>rAFï¼š<strong>ç›´æ¥è·³è¿‡</strong></li>
<li>setTimeoutï¼š<strong>ç»§ç»­è¡¥æ‰§è¡Œ(å®ƒä¼šåˆ¶é€ â€œè¡¥å¸§â€)</strong></li>
</ul>
<p>è¿™æ„å‘³ç€ï¼š<strong>é”™è¿‡çš„å¸§ä¼šå˜æˆå¤šä½™çš„ JS å·¥ä½œé‡</strong></p>
<h3 data-id="heading-18">3ã€ç”¨æˆ·ä½“æ„Ÿ vs setTimeout</h3>
<p><strong>setTimeoutï¼ˆé›ªå´©ï¼‰</strong></p>
<p><code>Task Task Task Task Task </code>â€‹<code>18ms 18ms 18ms 18ms</code></p>
<ul>
<li>JS è¿ç»­éœ¸å ä¸»çº¿ç¨‹</li>
<li>Render å‡ ä¹è¿›ä¸å»</li>
<li>é¡µé¢â€œåƒµæ­»â€</li>
</ul>
<p><strong>requestAnimationFrameï¼ˆç¨³å®šä½†æ…¢ï¼‰</strong></p>
<p><code>step â†’ï¼ˆç­‰ä¸‹ä¸€å¸§ï¼‰â†’ step â†’ï¼ˆç­‰ä¸‹ä¸€å¸§ï¼‰â†’ step</code></p>
<ul>
<li>æ¯å¸§æœ€å¤šæ‰§è¡Œä¸€æ¬¡</li>
<li>Render ä¹‹é—´æœ‰å–˜æ¯</li>
<li>é¡µé¢è¿˜èƒ½å“åº”è¾“å…¥</li>
<li>åŠ¨ç”»åªæ˜¯ <strong>ä½ FPS(è¿™æ˜¯â€œæ…¢â€ï¼Œä¸æ˜¯â€œæ­»â€)</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Android åŒå¡é»˜è®¤æ•°æ®å¡åˆ‡æ¢æµç¨‹è¯¦è§£]]></title>    <link>https://juejin.cn/post/7601946979606691867</link>    <guid>https://juejin.cn/post/7601946979606691867</guid>    <pubDate>2026-02-02T12:07:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7601946979606691867" data-draft-id="7602070768962109466" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Android åŒå¡é»˜è®¤æ•°æ®å¡åˆ‡æ¢æµç¨‹è¯¦è§£"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-02T12:07:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Android åŒå¡é»˜è®¤æ•°æ®å¡åˆ‡æ¢æµç¨‹è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T12:07:20.000Z" title="Mon Feb 02 2026 12:07:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ¥åˆ†æä¸€ä¸‹é»˜è®¤æ•°æ®å¡åˆ‡æ¢çš„æµç¨‹ã€‚è®©æˆ‘æŸ¥çœ‹ç›¸å…³ä»£ç ï¼š</p>
<p>ç°åœ¨è®©æˆ‘æŸ¥çœ‹onEvaluateçš„å®Œæ•´å®ç°å’Œæ•°æ®åˆ‡æ¢çš„æ ¸å¿ƒé€»è¾‘ï¼š</p>
<p>éå¸¸å¥½ï¼ç°åœ¨æˆ‘å·²ç»æ”¶é›†äº†è¶³å¤Ÿçš„ä¿¡æ¯ã€‚è®©æˆ‘æ•´ç†ä¸€ä¸‹é»˜è®¤æ•°æ®å¡åˆ‡æ¢çš„å®Œæ•´æµç¨‹ï¼š</p>
<hr/>
<h2 data-id="heading-0"><strong>Android åŒå¡é»˜è®¤æ•°æ®å¡åˆ‡æ¢æµç¨‹è¯¦è§£</strong> ğŸ“±ğŸ“¶</h2>
<p>åŸºäº <code>frameworks-opt-telephony</code> ä»£ç åˆ†æï¼Œé»˜è®¤æ•°æ®å¡ï¼ˆDDS - Default Data Subscriptionï¼‰åˆ‡æ¢æ˜¯ä¸€ä¸ªå¤æ‚çš„å¤šæ¨¡å—ååŒè¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>æ ¸å¿ƒæ¶æ„æ¦‚è§ˆ</strong></h2>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·/ç³»ç»Ÿè®¾ç½®
    â†“
SubscriptionManagerService
    â†“
MultiSimSettingController (å¤šå¡åè°ƒ)
    â†“
PhoneSwitcher (æ•°æ®å¡åˆ‡æ¢æ ¸å¿ƒ)
    â†“
DataNetworkController (æ•°æ®ç½‘ç»œæ§åˆ¶)
    â†“
RadioConfig/Phone<span class="hljs-selector-class">.mCi</span>
    â†“
RIL â†’ Modem (setPreferredDataModem / setDataAllowed)
</code></pre>
<hr/>
<h2 data-id="heading-2"><strong>ä¸€ã€ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢æµç¨‹</strong> ğŸ”„</h2>
<h3 data-id="heading-3"><strong>è§¦å‘æ–¹å¼</strong></h3>
<ol>
<li><strong>è®¾ç½®ç•Œé¢</strong>ï¼šè®¾ç½® â†’ ç½‘ç»œå’Œäº’è”ç½‘ â†’ SIM å¡ â†’ é»˜è®¤æ•°æ®å¡</li>
<li><strong>å¿«é€Ÿè®¾ç½®é¢æ¿</strong>ï¼šä¸‹æ‹‰é€šçŸ¥æ åˆ‡æ¢æ•°æ®å¡</li>
<li><strong>ç¨‹åºåŒ–è°ƒç”¨</strong>ï¼š<code>SubscriptionManager.setDefaultDataSubscriptionId()</code></li>
</ol>
<h3 data-id="heading-4"><strong>è¯¦ç»†æ­¥éª¤</strong></h3>
<h4 data-id="heading-5"><strong>æ­¥éª¤ 1: SubscriptionManagerService æ¥æ”¶è¯·æ±‚</strong></h4>
<pre><code class="hljs language-java:3124:3142:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/subscription/SubscriptionManagerService.java" lang="java:3124:3142:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/subscription/SubscriptionManagerService.java">/**
 * Set the default data subscription id.
 *
 * @param subId The default data subscription id.
 *
 * @throws SecurityException if callers do not hold the required permission.
 */
@Override
@RequiresPermission(Manifest.permission.MODIFY_PHONE_STATE)
public void setDefaultDataSubId(int subId) {
    enforcePermissions("setDefaultDataSubId", Manifest.permission.MODIFY_PHONE_STATE);

    if (subId == SubscriptionManager.DEFAULT_SUBSCRIPTION_ID) {
        throw new RuntimeException("setDefaultDataSubId called with DEFAULT_SUBSCRIPTION_ID");
    }

    enforceTelephonyFeatureWithException(getCurrentPackageName(), "setDefaultDataSubId");
</code></pre>
<p><strong>èŒè´£ï¼š</strong></p>
<ul>
<li>æƒé™æ£€æŸ¥ï¼ˆ<code>MODIFY_PHONE_STATE</code>ï¼‰</li>
<li>æ›´æ–°æ•°æ®åº“è®¾ç½®ï¼ˆ<code>Settings.Global.MULTI_SIM_DATA_CALL_SUBSCRIPTION</code>ï¼‰</li>
<li>é€šçŸ¥è®¢é˜…å˜åŒ–</li>
</ul>
<h4 data-id="heading-6"><strong>æ­¥éª¤ 2: MultiSimSettingController åè°ƒå¤šå¡è®¾ç½®</strong></h4>
<pre><code class="hljs language-java:72:82:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/MultiSimSettingController.java" lang="java:72:82:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/MultiSimSettingController.java">/**
 * This class will make sure below setting rules are coordinated across different subscriptions
 * and phones in multi-SIM case:
 *
 * 1) Grouped subscriptions will have same settings for MOBILE_DATA and DATA_ROAMING.
 * 2) Default settings updated automatically. It may be cleared or inherited within group.
 *    If default subscription A switches to profile B which is in the same group, B will
 *    become the new default.
 * 3) For primary subscriptions, only default data subscription will have MOBILE_DATA on.
 */
public class MultiSimSettingController extends Handler {
</code></pre>
<p><strong>å…³é”®äº‹ä»¶ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">EVENT_DEFAULT_DATA_SUBSCRIPTION_CHANGED = <span class="hljs-number">6</span>
</code></pre>
<p><strong>åè°ƒè§„åˆ™ï¼š</strong></p>
<ol>
<li><strong>ç§»åŠ¨æ•°æ®å¼€å…³åè°ƒ</strong>ï¼šç¡®ä¿åªæœ‰é»˜è®¤æ•°æ®å¡çš„ <code>MOBILE_DATA</code> å¼€å¯</li>
<li><strong>åˆ†ç»„è®¢é˜…å¤„ç†</strong>ï¼šåŒä¸€ç»„çš„è®¢é˜…å…±äº«æ•°æ®å’Œæ¼«æ¸¸è®¾ç½®</li>
<li><strong>è‡ªåŠ¨ç»§æ‰¿</strong>ï¼šåœ¨åŒç»„å†…åˆ‡æ¢æ—¶è‡ªåŠ¨ç»§æ‰¿è®¾ç½®</li>
</ol>
<h4 data-id="heading-7"><strong>æ­¥éª¤ 3: PhoneSwitcher è¯„ä¼°å’Œæ‰§è¡Œåˆ‡æ¢</strong></h4>
<pre><code class="hljs language-java:107:114:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:107:114:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">/**
 * Utility singleton to monitor subscription changes and incoming NetworkRequests
 * and determine which phone/phones are active.
 * &lt;p&gt;
 * Manages the ALLOW_DATA calls to modems and notifies phones about changes to
 * the active phones.  Note we don't wait for data attach (which may not happen anyway).
 */
public class PhoneSwitcher extends Handler {
</code></pre>
<p><strong>äº‹ä»¶è§¦å‘ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">EVENT_PRIMARY_DATA_SUB_CHANGED
</code></pre>
<p><strong>æ ¸å¿ƒæ–¹æ³•ï¼š<code>onEvaluate()</code></strong></p>
<pre><code class="hljs language-java:1158:1230:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:1158:1230:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">protected boolean onEvaluate(boolean requestsChanged, String reason) {
    StringBuilder sb = new StringBuilder(reason);

    // If we use HAL_COMMAND_PREFERRED_DATA,
    boolean diffDetected = mHalCommandToUse != HAL_COMMAND_PREFERRED_DATA &amp;&amp; requestsChanged;

    // Check if user setting of default non-opportunistic data sub is changed.
    int primaryDataSubId = mSubscriptionManagerService.getDefaultDataSubId();
    if (primaryDataSubId != mPrimaryDataSubId) {
        sb.append(" mPrimaryDataSubId ").append(mPrimaryDataSubId).append("-&gt;")
            .append(primaryDataSubId);
        mPrimaryDataSubId = primaryDataSubId;
        mLastSwitchPreferredDataReason = DataSwitch.Reason.DATA_SWITCH_REASON_MANUAL;
    }

    // Check to see if there is any active subscription on any phone
    boolean hasAnyActiveSubscription = false;

    // Check if phoneId to subId mapping is changed.
    for (int i = 0; i &lt; mActiveModemCount; i++) {
        int sub = SubscriptionManager.getSubscriptionId(i);

        if (SubscriptionManager.isValidSubscriptionId(sub)) hasAnyActiveSubscription = true;

        if (sub != mPhoneSubscriptions[i]) {
            sb.append(" phone[").append(i).append("] ").append(mPhoneSubscriptions[i]);
            sb.append("-&gt;").append(sub);
            if (mAutoSelectedDataSubId == mPhoneSubscriptions[i]) {
                mAutoSelectedDataSubId = DEFAULT_SUBSCRIPTION_ID;
            }
            mPhoneSubscriptions[i] = sub;

            if (!mFlags.changeMethodOfObtainingImsRegistrationRadioTech()) {
                // Listen to IMS radio tech change for new sub
                if (SubscriptionManager.isValidSubscriptionId(sub)) {
                    registerForImsRadioTechChange(mContext, i);
                }
            }

            diffDetected = true;
            mAutoDataSwitchController.notifySubscriptionsMappingChanged();
        }
    }

    if (!hasAnyActiveSubscription) {
        transitionToEmergencyPhone();
    } else {
        if (VDBG) log("Found an active subscription");
    }

    // Check if phoneId for preferred data is changed.
    int oldPreferredDataPhoneId = mPreferredDataPhoneId;

    // Check if subId for preferred data is changed.
    int oldPreferredDataSubId = mPreferredDataSubId.get();

    // When there are no subscriptions, the preferred data phone ID is invalid, but we want
    // to keep a valid phoneId for Emergency, so skip logic that updates for preferred data
    // phone ID. Ideally there should be a single set of checks that evaluate the correct
    // phoneId on a service-by-service basis (EIMS being one), but for now... just bypass
    // this logic in the no-SIM case.
    if (hasAnyActiveSubscription) updatePreferredDataPhoneId();

    if (oldPreferredDataPhoneId != mPreferredDataPhoneId) {
        sb.append(" preferred data phoneId ").append(oldPreferredDataPhoneId)
                .append("-&gt;").append(mPreferredDataPhoneId);
        diffDetected = true;
    } else if (oldPreferredDataSubId != mPreferredDataSubId.get()) {
        logl("SIM refresh, notify dds change");
        // Inform connectivity about the active data phone
        notifyPreferredDataSubIdChanged();
    }
</code></pre>
<p><strong>è¯„ä¼°é€»è¾‘ï¼š</strong></p>
<ol>
<li>æ£€æŸ¥é»˜è®¤æ•°æ®è®¢é˜… ID æ˜¯å¦å˜åŒ–</li>
<li>æ£€æŸ¥ phoneId åˆ° subId çš„æ˜ å°„å…³ç³»</li>
<li>æ›´æ–°é¦–é€‰æ•°æ® Phone IDï¼ˆ<code>updatePreferredDataPhoneId()</code>ï¼‰</li>
<li>æ£€æµ‹å˜åŒ–å¹¶å†³å®šæ˜¯å¦éœ€è¦å‘é€å‘½ä»¤åˆ° Modem</li>
</ol>
<h4 data-id="heading-8"><strong>æ­¥éª¤ 4: æ›´æ–°é¦–é€‰æ•°æ® Phone ID</strong></h4>
<pre><code class="hljs language-java:1436:1462:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:1436:1462:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">protected void updatePreferredDataPhoneId() {
    if (mEmergencyOverride != null &amp;&amp; findPhoneById(mEmergencyOverride.mPhoneId) != null) {
        // Override DDS for emergency even if user data is not enabled, since it is an
        // emergency.
        // TODO: Provide a notification to the user that metered data is currently being
        // used during this period.
        logl("updatePreferredDataPhoneId: preferred data overridden for emergency."
                + " phoneId = " + mEmergencyOverride.mPhoneId);
        mPreferredDataPhoneId = mEmergencyOverride.mPhoneId;
        mLastSwitchPreferredDataReason = DataSwitch.Reason.DATA_SWITCH_REASON_UNKNOWN;
    } else {
        int imsRegTech = mImsRegTechProvider.get(mContext, mPhoneIdInVoiceCall);
        if (isAnyVoiceCallActiveOnDevice() &amp;&amp; imsRegTech != REGISTRATION_TECH_IWLAN) {
            if (imsRegTech != REGISTRATION_TECH_CROSS_SIM) {
                mPreferredDataPhoneId = shouldSwitchDataDueToInCall()
                        ? mPhoneIdInVoiceCall : getFallbackDataPhoneIdForInternetRequests();
            } else {
                logl("IMS call on cross-SIM, skip switching data to phone "
                        + mPhoneIdInVoiceCall);
            }
        } else {
            mPreferredDataPhoneId = getFallbackDataPhoneIdForInternetRequests();
        }
    }

    mPreferredDataSubId.set(SubscriptionManager.getSubscriptionId(mPreferredDataPhoneId));
}
</code></pre>
<p><strong>ä¼˜å…ˆçº§é¡ºåºï¼š</strong></p>
<ol>
<li><strong>ç´§æ€¥å‘¼å«è¦†ç›–</strong>ï¼šç´§æ€¥å‘¼å«æ—¶å¼ºåˆ¶åˆ‡æ¢åˆ°ç‰¹å®šå¡</li>
<li><strong>é€šè¯ä¸­æ•°æ®åˆ‡æ¢</strong>ï¼šé€šè¯æ—¶æ ¹æ®é…ç½®å¯èƒ½åˆ‡æ¢åˆ°é€šè¯å¡</li>
<li><strong>æ­£å¸¸æ•°æ®å¡</strong>ï¼šç”¨æˆ·è®¾ç½®çš„é»˜è®¤æ•°æ®å¡</li>
</ol>
<h4 data-id="heading-9"><strong>æ­¥éª¤ 5: å‘é€å‘½ä»¤åˆ° Modem</strong></h4>
<pre><code class="hljs language-java:1364:1381:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:1364:1381:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">protected void sendRilCommands(int phoneId) {
    if (!SubscriptionManager.isValidPhoneId(phoneId)) {
        logl("sendRilCommands: skip dds switch due to invalid phoneId=" + phoneId);
        return;
    }

    Message message = Message.obtain(this, EVENT_MODEM_COMMAND_DONE, phoneId);
    if (mHalCommandToUse == HAL_COMMAND_ALLOW_DATA || mHalCommandToUse == HAL_COMMAND_UNKNOWN) {
        // Skip ALLOW_DATA for single SIM device
        if (mActiveModemCount &gt; 1) {
            PhoneFactory.getPhone(phoneId).mCi.setDataAllowed(isPhoneActive(phoneId), message);
        }
    } else if (phoneId == mPreferredDataPhoneId) {
        // Only setPreferredDataModem if the phoneId equals to current mPreferredDataPhoneId
        logl("sendRilCommands: setPreferredDataModem - phoneId: " + phoneId);
        mRadioConfig.setPreferredDataModem(mPreferredDataPhoneId, message);
    }
}
</code></pre>
<p><strong>ä¸¤ç§ HAL å‘½ä»¤æ¨¡å¼ï¼š</strong></p>
<ol>
<li>
<p><strong>HAL_COMMAND_ALLOW_DATAï¼ˆæ—§æ¨¡å¼ï¼‰</strong></p>
<ul>
<li>å¤šä¸ª Phone åˆ†åˆ«è°ƒç”¨ <code>setDataAllowed(true/false)</code></li>
<li>åªå…è®¸é»˜è®¤æ•°æ®å¡çš„æ•°æ®è¿æ¥</li>
</ul>
</li>
<li>
<p><strong>HAL_COMMAND_PREFERRED_DATAï¼ˆæ–°æ¨¡å¼ï¼Œæ¨èï¼‰</strong></p>
<ul>
<li>é€šè¿‡ <code>RadioConfig.setPreferredDataModem(phoneId)</code> ä¸€æ¬¡æ€§è®¾ç½®</li>
<li>Modem è‡ªåŠ¨ç®¡ç†å„å¡çš„æ•°æ®è¿æ¥çŠ¶æ€</li>
</ul>
</li>
</ol>
<h4 data-id="heading-10"><strong>æ­¥éª¤ 6: RIL å±‚å¤„ç†</strong></h4>
<p>é€šè¿‡ HIDL/AIDL æ¥å£å‘é€åˆ° HALï¼š</p>
<pre><code class="hljs language-scss" lang="scss">RIL<span class="hljs-selector-class">.setPreferredDataModem</span>() 
    â†’ IRadioConfig<span class="hljs-selector-class">.setPreferredDataModem</span>()
    â†’ Vendor HAL Implementation
    â†’ Modem Firmware
</code></pre>
<h4 data-id="heading-11"><strong>æ­¥éª¤ 7: Modem æ‰§è¡Œåˆ‡æ¢</strong></h4>
<ul>
<li>åŸæ•°æ®å¡ï¼šæ–­å¼€ PDN è¿æ¥ï¼ˆdeactivateï¼‰</li>
<li>æ–°æ•°æ®å¡ï¼šå»ºç«‹ PDN è¿æ¥ï¼ˆactivateï¼‰</li>
<li>PS Attach åˆ°æ–°å¡çš„ç½‘ç»œ</li>
<li>æ›´æ–°è·¯ç”±è¡¨å’Œç½‘ç»œæ¥å£</li>
</ul>
<h4 data-id="heading-12"><strong>æ­¥éª¤ 8: å“åº”å¤„ç†å’ŒçŠ¶æ€åŒæ­¥</strong></h4>
<p><strong>æˆåŠŸå“åº”ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">EVENT_MODEM_COMMAND_DONE â†’ onDdsSwitchResponse()
</code></pre>
<ul>
<li>æ›´æ–°å†…éƒ¨çŠ¶æ€</li>
<li>é€šçŸ¥ <code>DataNetworkController</code> æ•°æ®å¡å·²åˆ‡æ¢</li>
<li>å¹¿æ’­ <code>ACTION_DEFAULT_DATA_SUBSCRIPTION_CHANGED</code></li>
</ul>
<p><strong>å¤±è´¥å“åº”ï¼š</strong></p>
<ul>
<li>è®°å½•å¤±è´¥åŸå› </li>
<li>æ ¹æ®æƒ…å†µé‡è¯•ï¼ˆ<code>EVENT_MODEM_COMMAND_RETRY</code>ï¼‰</li>
<li>å¸¸è§å¤±è´¥åŸå› ï¼š
<ul>
<li><code>OP_NOT_ALLOWED_DURING_VOICE_CALL</code>: é€šè¯ä¸­ä¸å…è®¸åˆ‡æ¢</li>
<li><code>RADIO_NOT_AVAILABLE</code>: æ— çº¿ç”µä¸å¯ç”¨</li>
<li><code>INTERNAL_ERR</code>: å†…éƒ¨é”™è¯¯</li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>äºŒã€è‡ªåŠ¨æ•°æ®å¡åˆ‡æ¢ï¼ˆAuto Data Switchï¼‰</strong> ğŸ”€</h2>
<h3 data-id="heading-14"><strong>è§¦å‘åœºæ™¯</strong></h3>
<p>ç”± <code>AutoDataSwitchController</code> ç®¡ç†ï¼š</p>
<ol>
<li><strong>ä¸»å¡æ— ä¿¡å·</strong>ï¼šè‡ªåŠ¨åˆ‡æ¢åˆ°æœ‰ä¿¡å·çš„å‰¯å¡</li>
<li><strong>ä¸»å¡ç½‘ç»œè´¨é‡å·®</strong>ï¼šåˆ‡æ¢åˆ°ä¿¡å·æ›´å¥½çš„å‰¯å¡</li>
<li><strong>ä¸»å¡æ•°æ®æ‹¥å¡</strong>ï¼šåˆ‡æ¢åˆ°ç½‘ç»œè´Ÿè½½è¾ƒä½çš„å¡</li>
<li><strong>5G/4G ç½‘ç»œä¼˜é€‰</strong>ï¼šä¼˜å…ˆé€‰æ‹©æ›´å¿«çš„ç½‘ç»œ</li>
</ol>
<h3 data-id="heading-15"><strong>éªŒè¯æµç¨‹</strong></h3>
<p>åˆ‡æ¢å‰éœ€è¦éªŒè¯æ–°å¡çš„ç½‘ç»œè¿æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java">CellularNetworkValidator.validate()
    â†“
å»ºç«‹æµ‹è¯•æ•°æ®è¿æ¥
    â†“
æ‰§è¡Œç½‘ç»œéªŒè¯ï¼ˆping/HTTPï¼‰
    â†“
EVENT_NETWORK_VALIDATION_DONE
</code></pre>
<p><strong>éªŒè¯æˆåŠŸ</strong>ï¼šæ‰§è¡Œåˆ‡æ¢
<strong>éªŒè¯å¤±è´¥</strong>ï¼šå–æ¶ˆåˆ‡æ¢ï¼Œä¿æŒåŸæ•°æ®å¡</p>
<hr/>
<h2 data-id="heading-16"><strong>ä¸‰ã€é€šè¯ä¸­æ•°æ®åˆ‡æ¢ï¼ˆData During Callï¼‰</strong> ğŸ“</h2>
<h3 data-id="heading-17"><strong>åœºæ™¯è¯´æ˜</strong></h3>
<p>æŸäº›åŒå¡è®¾å¤‡æ”¯æŒé€šè¯æ—¶è‡ªåŠ¨åˆ‡æ¢æ•°æ®åˆ°é€šè¯å¡ï¼Œä¿è¯ï¼š</p>
<ul>
<li>VoLTE é€šè¯è´¨é‡</li>
<li>é€šè¯æ—¶çš„æ•°æ®ä¸šåŠ¡ï¼ˆå¦‚è§†é¢‘é€šè¯ï¼‰</li>
<li>SUPL å®šä½æœåŠ¡</li>
</ul>
<h3 data-id="heading-18"><strong>åˆ‡æ¢æ¡ä»¶</strong></h3>
<pre><code class="hljs language-java:1487:1494:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:1487:1494:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">private boolean shouldSwitchDataDueToInCall() {
    Phone voicePhone = findPhoneById(mPhoneIdInVoiceCall);
    Phone defaultDataPhone = getPhoneBySubId(mPrimaryDataSubId);
    return defaultDataPhone != null // check user enabled data
            &amp;&amp; defaultDataPhone.isUserDataEnabled()
            &amp;&amp; voicePhone != null // check user enabled voice during call feature
            &amp;&amp; voicePhone.getDataSettingsManager().isDataEnabled();
}
</code></pre>
<p><strong>å¿…é¡»æ»¡è¶³ï¼š</strong></p>
<ol>
<li>ä¸»æ•°æ®å¡å·²å¯ç”¨æ•°æ®</li>
<li>é€šè¯å¡å·²å¯ç”¨æ•°æ®</li>
<li>ç³»ç»Ÿæ”¯æŒé€šè¯ä¸­æ•°æ®åˆ‡æ¢</li>
<li>ä¸æ˜¯ IWLAN æˆ– Cross-SIM é€šè¯</li>
</ol>
<h3 data-id="heading-19"><strong>åˆ‡æ¢æ—¶æœº</strong></h3>
<ul>
<li><strong>å‘¼å«å¼€å§‹</strong>ï¼š<code>EVENT_PRECISE_CALL_STATE_CHANGED</code></li>
<li><strong>å‘¼å«ç»“æŸ</strong>ï¼šæ¢å¤åˆ°é»˜è®¤æ•°æ®å¡</li>
</ul>
<hr/>
<h2 data-id="heading-20"><strong>å››ã€ç´§æ€¥å‘¼å«æ•°æ®åˆ‡æ¢ï¼ˆEmergency DDS Overrideï¼‰</strong> ğŸš¨</h2>
<h3 data-id="heading-21"><strong>åœºæ™¯è¯´æ˜</strong></h3>
<p>ç´§æ€¥å‘¼å«ï¼ˆå¦‚ 911/112ï¼‰æ—¶ï¼Œå¯èƒ½éœ€è¦ä¸´æ—¶åˆ‡æ¢æ•°æ®å¡ä»¥æ”¯æŒï¼š</p>
<ul>
<li>E-GNSS è¾…åŠ©å®šä½</li>
<li>ç´§æ€¥å›å‘¼ï¼ˆECBM - Emergency Callback Modeï¼‰</li>
<li>IMS ç´§æ€¥å‘¼å«</li>
</ul>
<h3 data-id="heading-22"><strong>è¦†ç›–è¯·æ±‚</strong></h3>
<pre><code class="hljs language-java" lang="java">EmergencyOverrideRequest:
- mPhoneId: ç´§æ€¥å‘¼å«ä½¿ç”¨çš„ Phone ID
- mGnssOverrideTimeMs: å‘¼å«ç»“æŸåä¿æŒæ—¶é•¿
- mRequiresEcmFinish: æ˜¯å¦ç­‰å¾… ECBM ç»“æŸ
</code></pre>
<h3 data-id="heading-23"><strong>å¤„ç†æµç¨‹</strong></h3>
<ol>
<li>æ¥æ”¶ç´§æ€¥è¦†ç›–è¯·æ±‚</li>
<li>ç«‹å³åˆ‡æ¢æ•°æ®åˆ°ç´§æ€¥å‘¼å«å¡</li>
<li>ç›‘å¬å‘¼å«çŠ¶æ€å˜åŒ–</li>
<li>å‘¼å«ç»“æŸåå¯åŠ¨å®šæ—¶å™¨</li>
<li>è¶…æ—¶æˆ– ECBM ç»“æŸåæ¢å¤åŸæ•°æ®å¡</li>
</ol>
<hr/>
<h2 data-id="heading-24"><strong>äº”ã€çŠ¶æ€æœºå’Œç½‘ç»œè¯·æ±‚å¤„ç†</strong> ğŸ”„</h2>
<h3 data-id="heading-25"><strong>PhoneState çŠ¶æ€</strong></h3>
<pre><code class="hljs language-java:1302:1305:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java" lang="java:1302:1305:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/data/PhoneSwitcher.java">protected static class PhoneState {
    public volatile boolean active = false;
    public long lastRequested = 0;
}
</code></pre>
<ul>
<li><code>active = true</code>: Phone å…è®¸ PS Attachï¼ˆæ•°æ®è¿æ¥ï¼‰</li>
<li><code>active = false</code>: Phone ä¸å…è®¸æ•°æ®è¿æ¥</li>
</ul>
<h3 data-id="heading-26"><strong>ç½‘ç»œè¯·æ±‚ç›‘å¬</strong></h3>
<pre><code class="hljs language-java" lang="java">PhoneSwitcherNetworkRequestListener <span class="hljs-keyword">extends</span> <span class="hljs-title class_">NetworkFactory</span>
</code></pre>
<p><strong>å¤„ç†ç½‘ç»œè¯·æ±‚ï¼š</strong></p>
<ul>
<li><code>needNetworkFor()</code>: æ–°çš„ç½‘ç»œè¯·æ±‚åˆ°è¾¾</li>
<li><code>releaseNetworkFor()</code>: ç½‘ç»œè¯·æ±‚é‡Šæ”¾</li>
<li>è§¦å‘ <code>onEvaluate()</code> é‡æ–°è¯„ä¼°æ•°æ®å¡åˆ†é…</li>
</ul>
<hr/>
<h2 data-id="heading-27"><strong>å…­ã€å…³é”®æ•°æ®ç»“æ„</strong></h2>









































<table><thead><tr><th>å˜é‡</th><th>å«ä¹‰</th></tr></thead><tbody><tr><td><code>mPrimaryDataSubId</code></td><td>ç”¨æˆ·è®¾ç½®çš„é»˜è®¤æ•°æ®è®¢é˜… ID</td></tr><tr><td><code>mAutoSelectedDataSubId</code></td><td>è‡ªåŠ¨é€‰æ‹©çš„æ•°æ®è®¢é˜… IDï¼ˆè‡ªåŠ¨åˆ‡æ¢åœºæ™¯ï¼‰</td></tr><tr><td><code>mPreferredDataPhoneId</code></td><td>å½“å‰é¦–é€‰æ•°æ® Phone ID</td></tr><tr><td><code>mPreferredDataSubId</code></td><td>å½“å‰é¦–é€‰æ•°æ®è®¢é˜… ID</td></tr><tr><td><code>mPhoneIdInVoiceCall</code></td><td>å½“å‰é€šè¯çš„ Phone ID</td></tr><tr><td><code>mPhoneSubscriptions[]</code></td><td>æ¯ä¸ª Phone å¯¹åº”çš„è®¢é˜… ID</td></tr><tr><td><code>mPhoneStates[]</code></td><td>æ¯ä¸ª Phone çš„æ¿€æ´»çŠ¶æ€</td></tr><tr><td><code>mEmergencyOverride</code></td><td>ç´§æ€¥å‘¼å«è¦†ç›–è¯·æ±‚</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-28"><strong>ä¸ƒã€å®Œæ•´æµç¨‹æ—¶åºå›¾</strong></h2>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·åˆ‡æ¢æ•°æ®å¡
    â†“
Settings<span class="hljs-selector-class">.Global</span> æ›´æ–°
    â†“
SubscriptionManagerService<span class="hljs-selector-class">.setDefaultDataSubId</span>()
    â†“
å¹¿æ’­ ACTION_DEFAULT_DATA_SUBSCRIPTION_CHANGED
    â†“
MultiSimSettingController<span class="hljs-selector-class">.EVENT_DEFAULT_DATA_SUBSCRIPTION_CHANGED</span>
    â†“
åè°ƒå¤šå¡æ•°æ®å¼€å…³è®¾ç½®
    â†“
PhoneSwitcher<span class="hljs-selector-class">.EVENT_PRIMARY_DATA_SUB_CHANGED</span>
    â†“
<span class="hljs-built_in">onEvaluate</span>(REQUESTS_CHANGED, "primary data sub changed")
    â†“
<span class="hljs-built_in">updatePreferredDataPhoneId</span>()
    â†“
æ£€æµ‹åˆ° mPreferredDataPhoneId å˜åŒ–
    â†“
<span class="hljs-built_in">sendRilCommands</span>(mPreferredDataPhoneId)
    â†“
RadioConfig<span class="hljs-selector-class">.setPreferredDataModem</span>() æˆ– Phone<span class="hljs-selector-class">.setDataAllowed</span>()
    â†“
RIL â†’ HAL â†’ Modem
    â†“
Modem æ‰§è¡Œæ•°æ®å¡åˆ‡æ¢
    â†“
EVENT_MODEM_COMMAND_DONE
    â†“
<span class="hljs-built_in">onDdsSwitchResponse</span>()
    â†“
<span class="hljs-built_in">notifyPreferredDataSubIdChanged</span>()
    â†“
DataNetworkController æ›´æ–°æ•°æ®ç½‘ç»œ
    â†“
é‡å»º PDN è¿æ¥åœ¨æ–°æ•°æ®å¡ä¸Š
    â†“
ConnectivityService æ›´æ–°é»˜è®¤ç½‘ç»œ
    â†“
å®Œæˆåˆ‡æ¢
</code></pre>
<hr/>
<h2 data-id="heading-29"><strong>å…«ã€å¼‚å¸¸å¤„ç†å’Œé‡è¯•æœºåˆ¶</strong></h2>
<h3 data-id="heading-30"><strong>é‡è¯•åœºæ™¯</strong></h3>
<ol>
<li><strong>é€šè¯ä¸­å¤±è´¥</strong>ï¼šç­‰å¾…é€šè¯ç»“æŸåé‡è¯•</li>
<li><strong>Radio ä¸å¯ç”¨</strong>ï¼šç­‰å¾… Radio æ¢å¤åé‡è¯•</li>
<li><strong>å‘½ä»¤è¶…æ—¶</strong>ï¼š5 ç§’åé‡è¯•</li>
</ol>
<h3 data-id="heading-31"><strong>é‡è¯•é—´éš”</strong></h3>
<pre><code class="hljs language-java" lang="java">MODEM_COMMAND_RETRY_PERIOD_MS = <span class="hljs-number">5000</span>  <span class="hljs-comment">// 5ç§’</span>
</code></pre>
<h3 data-id="heading-32"><strong>å¤±è´¥è®°å½•</strong></h3>
<pre><code class="hljs language-java" lang="java">mCurrentDdsSwitchFailure.get(phoneId)
</code></pre>
<p>è®°å½•æ¯ä¸ª Phone çš„å¤±è´¥åŸå› ï¼Œç”¨äºæ™ºèƒ½é‡è¯•ç­–ç•¥ã€‚</p>
<hr/>
<h2 data-id="heading-33"><strong>ä¹ã€æ—¥å¿—å’Œè°ƒè¯•</strong></h2>
<h3 data-id="heading-34"><strong>å…³é”®æ—¥å¿—æ ‡ç­¾</strong></h3>
<ul>
<li><code>PhoneSwitcher</code>: æ•°æ®å¡åˆ‡æ¢æ ¸å¿ƒ</li>
<li><code>MultiSimSettingController</code>: å¤šå¡è®¾ç½®åè°ƒ</li>
<li><code>DataNetworkController</code>: æ•°æ®ç½‘ç»œæ§åˆ¶</li>
</ul>
<h3 data-id="heading-35"><strong>æœ¬åœ°æ—¥å¿—</strong></h3>
<pre><code class="hljs language-java" lang="java">mLocalLog.log(<span class="hljs-string">"evaluating due to "</span> + reason)
</code></pre>
<p>ä½¿ç”¨ <code>LocalLog</code> è®°å½•å…³é”®äº‹ä»¶ï¼Œå¯é€šè¿‡ dumpsys æŸ¥çœ‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">adb shell dumpsys phone
</code></pre>
<hr/>
<p>è¿™å°±æ˜¯ Android åŒå¡è®¾å¤‡ä¸­é»˜è®¤æ•°æ®å¡åˆ‡æ¢çš„å®Œæ•´æµç¨‹ï¼æ•´ä¸ªç³»ç»Ÿè®¾è®¡è€ƒè™‘äº†ç”¨æˆ·æ‰‹åŠ¨åˆ‡æ¢ã€è‡ªåŠ¨æ™ºèƒ½åˆ‡æ¢ã€é€šè¯ä¸­æ•°æ®ä¿éšœã€ç´§æ€¥å‘¼å«æ”¯æŒç­‰å¤šç§åœºæ™¯ï¼Œæ˜¯ä¸€ä¸ªéå¸¸å¤æ‚ä½†å¥å£®çš„æœºåˆ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ¥ç”µå»ç”µæµç¨‹]]></title>    <link>https://juejin.cn/post/7602091087922774066</link>    <guid>https://juejin.cn/post/7602091087922774066</guid>    <pubDate>2026-02-02T12:12:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7602091087922774066" data-draft-id="7602133286643154994" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ¥ç”µå»ç”µæµç¨‹"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-02-02T12:12:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·341408199125"/> <meta itemprop="url" content="https://juejin.cn/user/570004686782272"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ¥ç”µå»ç”µæµç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/570004686782272/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·341408199125
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-02-02T12:12:05.000Z" title="Mon Feb 02 2026 12:12:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-02-02
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æˆ‘æ¥åˆ†æä¸€ä¸‹è¿™ä¸ªä»“åº“ä¸­çš„æ¥ç”µå’Œå»ç”µæµç¨‹ã€‚è®©æˆ‘æŸ¥çœ‹ç›¸å…³ä»£ç ï¼š</p>
<p>ç°åœ¨è®©æˆ‘æŸ¥çœ‹æ¥ç”µå¤„ç†å’Œé€šè¯çŠ¶æ€è½®è¯¢çš„é€»è¾‘ï¼š</p>
<p>å¥½çš„ï¼Œç°åœ¨æˆ‘å·²ç»æ”¶é›†äº†è¶³å¤Ÿçš„ä¿¡æ¯ã€‚è®©æˆ‘æ•´ç†ä¸€ä¸‹æ¥ç”µå’Œå»ç”µçš„å®Œæ•´æµç¨‹ï¼š</p>
<hr/>
<h2 data-id="heading-0"><strong>Android Telephony æ¥ç”µå»ç”µæµç¨‹è¯¦è§£</strong> â˜ï¸ğŸ“</h2>
<p>åŸºäº <code>frameworks-opt-telephony</code> ä»£ç åˆ†æï¼Œç”µè¯å‘¼å«å¤„ç†æ¶‰åŠå¤šä¸ªå±‚æ¬¡çš„å¤æ‚äº¤äº’ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>æ ¸å¿ƒæ¶æ„</strong></h2>
<pre><code class="hljs language-scss" lang="scss">åº”ç”¨å±‚ (Telecom/Dialer)
    â†“
Phone/GsmCdmaPhone
    â†“
CallTracker (GsmCdmaCallTracker / ImsPhoneCallTracker)
    â†“
Call (GsmCdmaCall / ImsCall)
    â†“
Connection (GsmCdmaConnection / ImsConnection)
    â†“
RIL â†’ Modem
</code></pre>
<hr/>
<h2 data-id="heading-2"><strong>ä¸€ã€å»ç”µæµç¨‹ï¼ˆMobile Originated Call - MOï¼‰</strong> ğŸ“¤</h2>
<h3 data-id="heading-3"><strong>æµç¨‹æ¶æ„å›¾</strong></h3>
<pre><code class="hljs language-scss" lang="scss">ç”¨æˆ·æ‹¨å·
    â†“
Dialer App â†’ Telecom Framework
    â†“
Phone<span class="hljs-selector-class">.dial</span>()
    â†“
GsmCdmaCallTracker<span class="hljs-selector-class">.dialGsm</span>() / <span class="hljs-built_in">dialCdma</span>()
    â†“
åˆ›å»º GsmCdmaConnection (mPendingMO)
    â†“
RIL<span class="hljs-selector-class">.dial</span>() â†’ Modem
    â†“
è½®è¯¢é€šè¯çŠ¶æ€ (pollCallsWhenSafe)
    â†“
å‘¼å«å»ºç«‹ (ALERTING â†’ ACTIVE)
</code></pre>
<h3 data-id="heading-4"><strong>è¯¦ç»†æ­¥éª¤</strong></h3>
<h4 data-id="heading-5"><strong>æ­¥éª¤ 1: ç”¨æˆ·å‘èµ·æ‹¨å·</strong></h4>
<p>åº”ç”¨é€šè¿‡ Telecom æ¡†æ¶å‘èµ·å‘¼å«ï¼š</p>
<pre><code class="hljs language-java" lang="java">TelecomManager.placeCall(Uri.parse(<span class="hljs-string">"tel:10086"</span>), ...)
</code></pre>
<h4 data-id="heading-6"><strong>æ­¥éª¤ 2: Phone.dial() å¤„ç†æ‹¨å·è¯·æ±‚</strong></h4>
<p><code>GsmCdmaPhone.dial()</code> æˆ– <code>ImsPhone.dial()</code> æ ¹æ®ç½‘ç»œç±»å‹é€‰æ‹©ï¼š</p>
<ul>
<li><strong>CS åŸŸï¼ˆç”µè·¯åŸŸï¼‰</strong>ï¼šä¼ ç»Ÿ 2G/3G è¯­éŸ³</li>
<li><strong>IMS åŸŸï¼ˆVoLTE/VoWiFiï¼‰</strong>ï¼š4G/5G è¯­éŸ³</li>
</ul>
<h4 data-id="heading-7"><strong>æ­¥éª¤ 3: CallTracker åˆ›å»ºè¿æ¥</strong></h4>
<pre><code class="hljs language-java:288:359:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:288:359:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">public synchronized Connection dialGsm(String dialString, DialArgs dialArgs)
        throws CallStateException {
    int clirMode = dialArgs.clirMode;
    UUSInfo uusInfo = dialArgs.uusInfo;
    Bundle intentExtras = dialArgs.intentExtras;
    boolean isEmergencyCall = dialArgs.isEmergency;
    if (isEmergencyCall) {
        clirMode = CommandsInterface.CLIR_SUPPRESSION;
        if (Phone.DEBUG_PHONE) log("dial gsm emergency call, set clirModIe=" + clirMode);

    }

    // note that this triggers call state changed notif
    clearDisconnected();

    // Check for issues which would preclude dialing and throw a CallStateException.
    checkForDialIssues(isEmergencyCall);

    String origNumber = dialString;
    dialString = convertNumberIfNecessary(mPhone, dialString);

    // The new call must be assigned to the foreground call.
    // That call must be idle, so place anything that's
    // there on hold
    if (mForegroundCall.getState() == GsmCdmaCall.State.ACTIVE) {
        // this will probably be done by the radio anyway
        // but the dial might fail before this happens
        // and we need to make sure the foreground call is clear
        // for the newly dialed connection
        switchWaitingOrHoldingAndActive();

        // This is a hack to delay DIAL so that it is sent out to RIL only after
        // EVENT_SWITCH_RESULT is received. We've seen failures when adding a new call to
        // multi-way conference calls due to DIAL being sent out before SWITCH is processed
        // TODO: setup duration metrics won't capture this
        try {
            Thread.sleep(500);
        } catch (InterruptedException e) {
            // do nothing
        }

        // Fake local state so that
        // a) foregroundCall is empty for the newly dialed connection
        // b) hasNonHangupStateChanged remains false in the
        // next poll, so that we don't clear a failed dialing call
        fakeHoldForegroundBeforeDial();
    }

    if (mForegroundCall.getState() != GsmCdmaCall.State.IDLE) {
        //we should have failed in !canDial() above before we get here
        throw new CallStateException("cannot dial in current state");
    }

    mPendingMO = new GsmCdmaConnection(mPhone, dialString, this, mForegroundCall,
            dialArgs);

    if (intentExtras != null) {
        Rlog.d(LOG_TAG, "dialGsm - emergency dialer: " + intentExtras.getBoolean(
                TelecomManager.EXTRA_IS_USER_INTENT_EMERGENCY_CALL));
        mPendingMO.setHasKnownUserIntentEmergency(intentExtras.getBoolean(
                TelecomManager.EXTRA_IS_USER_INTENT_EMERGENCY_CALL));
    }
    mHangupPendingMO = false;

    mMetrics.writeRilDial(mPhone.getPhoneId(), mPendingMO, clirMode, uusInfo);
    mPhone.getVoiceCallSessionStats().onRilDial(mPendingMO);

    if ( mPendingMO.getAddress() == null || mPendingMO.getAddress().length() == 0
            || mPendingMO.getAddress().indexOf(PhoneNumberUtils.WILD) &gt;= 0) {
        // Phone number is invalid
        mPendingMO.mCause = DisconnectCause.INVALID_NUMBER;
</code></pre>
<p><strong>å…³é”®æ“ä½œï¼š</strong></p>
<ol>
<li><strong>clearDisconnected()</strong>: æ¸…ç†å·²æ–­å¼€çš„è¿æ¥</li>
<li><strong>checkForDialIssues()</strong>: æ£€æŸ¥æ˜¯å¦å…è®¸æ‹¨å·
<ul>
<li>æ£€æŸ¥æ˜¯å¦æœ‰æ´»åŠ¨å‘¼å«é˜»æ­¢æ–°å‘¼å«</li>
<li>æ£€æŸ¥é£è¡Œæ¨¡å¼</li>
<li>æ£€æŸ¥æœåŠ¡çŠ¶æ€</li>
</ul>
</li>
<li><strong>switchWaitingOrHoldingAndActive()</strong>: å¦‚æœæœ‰æ´»åŠ¨é€šè¯ï¼Œå…ˆç½®ä¸ºä¿æŒ</li>
<li><strong>åˆ›å»º mPendingMO</strong>: å¾…å¤„ç†çš„ç§»åŠ¨å§‹å‘è¿æ¥</li>
<li><strong>è®°å½•æŒ‡æ ‡</strong>: <code>TelephonyMetrics.writeRilDial()</code></li>
</ol>
<h4 data-id="heading-8"><strong>æ­¥éª¤ 4: å‘é€æ‹¨å·å‘½ä»¤åˆ° Modem</strong></h4>
<p>ç»§ç»­ <code>dialGsm()</code> æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å‘é€æ‹¨å·å‘½ä»¤åˆ° RIL</span>
mCi.dial(mPendingMO.getAddress(), mPendingMO.isEmergencyCall(), 
         mPendingMO.getEmergencyNumberInfo(),
         mPendingMO.hasKnownUserIntentEmergency(), clirMode, uusInfo, 
         obtainCompleteMessage());
</code></pre>
<p>é€šè¿‡ RIL å‘é€ï¼š</p>
<ul>
<li><strong>GSM</strong>: <code>RIL_REQUEST_DIAL</code></li>
<li><strong>CDMA</strong>: <code>RIL_REQUEST_CDMA_DIAL</code></li>
<li><strong>IMS</strong>: é€šè¿‡ IMS æ ˆå¤„ç†</li>
</ul>
<h4 data-id="heading-9"><strong>æ­¥éª¤ 5: é€šè¯çŠ¶æ€è½®è¯¢</strong></h4>
<p>Modem å¼€å§‹å»ºç«‹å‘¼å«åï¼Œä¼šä¸»åŠ¨ä¸ŠæŠ¥çŠ¶æ€å˜åŒ–ï¼š</p>
<pre><code class="hljs language-java" lang="java">RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED
</code></pre>
<p><code>GsmCdmaCallTracker</code> æ”¶åˆ°é€šçŸ¥åè§¦å‘è½®è¯¢ï¼š</p>
<pre><code class="hljs language-java" lang="java">EVENT_CALL_STATE_CHANGE â†’ pollCallsWhenSafe()
</code></pre>
<p><strong>pollCallsWhenSafe() æµç¨‹ï¼š</strong></p>
<pre><code class="hljs language-java" lang="java">pollCallsWhenSafe()
    â†“
mCi.getCurrentCalls(EVENT_POLL_CALLS_RESULT)
    â†“
RIL_REQUEST_GET_CURRENT_CALLS
    â†“
handlePollCalls(AsyncResult ar)
</code></pre>
<h4 data-id="heading-10"><strong>æ­¥éª¤ 6: å¤„ç†è½®è¯¢ç»“æœ</strong></h4>
<pre><code class="hljs language-java:900:991:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:900:991:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">if (conn == null &amp;&amp; dc != null) {
    // Connection appeared in CLCC response that we don't know about
    if (mPendingMO != null &amp;&amp; mPendingMO.compareTo(dc)) {

        if (DBG_POLL) log("poll: pendingMO=" + mPendingMO);

        // It's our pending mobile originating call
        mConnections[i] = mPendingMO;
        mPendingMO.mIndex = i;
        mPendingMO.update(dc);
        mPendingMO = null;

        // Someone has already asked to hangup this call
        if (mHangupPendingMO) {
            mHangupPendingMO = false;

            // Re-start Ecm timer when an uncompleted emergency call ends
            if (!isPhoneTypeGsm() &amp;&amp; mPhone.isEcmCanceledForEmergency()) {
                mPhone.handleTimerInEmergencyCallbackMode(
                        GsmCdmaPhone.RESTART_ECM_TIMER);
            }

            try {
                if (Phone.DEBUG_PHONE) log(
                        "poll: hangupPendingMO, hangup conn " + i);
                hangup(mConnections[i]);
            } catch (CallStateException ex) {
                Rlog.e(LOG_TAG, "unexpected error on hangup");
            }

            // Do not continue processing this poll
            // Wait for hangup and repoll
            return;
        }
    } else {
        if (Phone.DEBUG_PHONE) {
            log("pendingMo=" + mPendingMO + ", dc=" + dc);
        }

        mConnections[i] = new GsmCdmaConnection(mPhone, dc, this, i);
        log("New connection is not mPendingMO. Creating new GsmCdmaConnection,"
                + " objId=" + System.identityHashCode(mConnections[i]));

        Connection hoConnection = getHoConnection(dc);
        if (hoConnection != null) {
            log("Handover connection found.");
            // Single Radio Voice Call Continuity (SRVCC) completed
            mConnections[i].migrateFrom(hoConnection);
            // Updating connect time for silent redial cases (ex: Calls are transferred
            // from DIALING/ALERTING/INCOMING/WAITING to ACTIVE)
            if (hoConnection.mPreHandoverState != GsmCdmaCall.State.ACTIVE &amp;&amp;
                    hoConnection.mPreHandoverState != GsmCdmaCall.State.HOLDING &amp;&amp;
                    dc.state == DriverCall.State.ACTIVE) {
                mConnections[i].onConnectedInOrOut();
            } else {
                mConnections[i].onConnectedConnectionMigrated();
            }

            mHandoverConnections.remove(hoConnection);

            if (isPhoneTypeGsm()) {
                for (Iterator&lt;Connection&gt; it = mHandoverConnections.iterator();
                     it.hasNext(); ) {
                    Connection c = it.next();
                    Rlog.i(LOG_TAG, "HO Conn state is " + c.mPreHandoverState);
                    if (c.mPreHandoverState == mConnections[i].getState()) {
                        Rlog.i(LOG_TAG, "Removing HO conn "
                                + hoConnection + c.mPreHandoverState);
                        it.remove();
                    }
                }
            }

            mPhone.notifyHandoverStateChanged(mConnections[i]);
        } else {
            // find if the MT call is a new ring or unknown connection
            log("New connection is not mPendingMO nor a pending handover.");
            newRinging = checkMtFindNewRinging(dc,i);
            if (newRinging == null) {
                unknownConnectionAppeared = true;
                if (isPhoneTypeGsm()) {
                    newUnknownConnectionsGsm.add(mConnections[i]);
                } else {
                    newUnknownConnectionCdma = mConnections[i];
                }
            } else if (hangupWaitingCallSilently(i)) {
                return;
            }
        }
    }
    hasNonHangupStateChanged = true;
}
</code></pre>
<p><strong>å¤„ç†é€»è¾‘ï¼š</strong></p>
<ul>
<li>å°† <code>mPendingMO</code> è½¬æ¢ä¸ºæ­£å¼çš„ <code>mConnections[i]</code></li>
<li>æ›´æ–°è¿æ¥çŠ¶æ€</li>
<li>å¤„ç† SRVCCï¼ˆVoLTE â†’ 2G/3G åˆ‡æ¢ï¼‰åœºæ™¯</li>
</ul>
<h4 data-id="heading-11"><strong>æ­¥éª¤ 7: å‘¼å«çŠ¶æ€è½¬æ¢</strong></h4>
<p><strong>å»ç”µçŠ¶æ€æœºï¼š</strong></p>
<pre><code class="hljs">IDLE â†’ DIALING â†’ ALERTING â†’ ACTIVE
</code></pre>
<pre><code class="hljs language-java:41:65:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/Call.java" lang="java:41:65:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/Call.java">public enum State {
    @UnsupportedAppUsage IDLE,
    ACTIVE,
    @UnsupportedAppUsage HOLDING,
    @UnsupportedAppUsage DIALING,
    @UnsupportedAppUsage ALERTING,
    @UnsupportedAppUsage INCOMING,
    @UnsupportedAppUsage WAITING,
    @UnsupportedAppUsage DISCONNECTED,
    @UnsupportedAppUsage DISCONNECTING;

    @UnsupportedAppUsage
    public boolean isAlive() {
        return !(this == IDLE || this == DISCONNECTED || this == DISCONNECTING);
    }

    @UnsupportedAppUsage
    public boolean isRinging() {
        return this == INCOMING || this == WAITING;
    }

    public boolean isDialing() {
        return this == DIALING || this == ALERTING;
    }
}
</code></pre>
<ul>
<li><strong>DIALING</strong>: æ‹¨å·ä¸­ï¼ˆæœ¬åœ°å‘èµ·ï¼Œç½‘ç»œæœªå“åº”ï¼‰</li>
<li><strong>ALERTING</strong>: å¯¹æ–¹æŒ¯é“ƒä¸­ï¼ˆç½‘ç»œå·²å»ºç«‹ï¼Œç­‰å¾…æ¥å¬ï¼‰</li>
<li><strong>ACTIVE</strong>: é€šè¯æ¥é€š</li>
</ul>
<h4 data-id="heading-12"><strong>æ­¥éª¤ 8: é€šçŸ¥ä¸Šå±‚</strong></h4>
<ul>
<li><code>Phone.notifyPreciseCallStateChanged()</code></li>
<li>å¹¿æ’­åˆ° Telecom æ¡†æ¶</li>
<li>æ›´æ–°é€šè¯ UI</li>
<li>å¼€å§‹è®¡è´¹</li>
</ul>
<hr/>
<h2 data-id="heading-13"><strong>äºŒã€æ¥ç”µæµç¨‹ï¼ˆMobile Terminated Call - MTï¼‰</strong> ğŸ“¥</h2>
<h3 data-id="heading-14"><strong>æµç¨‹æ¶æ„å›¾</strong></h3>
<pre><code class="hljs language-scss" lang="scss">ç½‘ç»œæ¨é€æ¥ç”µ
    â†“
Modem â†’ RIL_UNSOL_CALL_RING
    â†“
GsmCdmaCallTracker æ”¶åˆ°é€šçŸ¥
    â†“
<span class="hljs-built_in">pollCallsWhenSafe</span>()
    â†“
<span class="hljs-built_in">handlePollCalls</span>() æ£€æµ‹æ–°æ¥ç”µ
    â†“
åˆ›å»º GsmCdmaConnection (mRingingCall)
    â†“
é€šçŸ¥ä¸Šå±‚ (onNewRingingConnection)
    â†“
æ˜¾ç¤ºæ¥ç”µç•Œé¢
    â†“
ç”¨æˆ·æ¥å¬/æ‹’æ¥
</code></pre>
<h3 data-id="heading-15"><strong>è¯¦ç»†æ­¥éª¤</strong></h3>
<h4 data-id="heading-16"><strong>æ­¥éª¤ 1: Modem ä¸ŠæŠ¥æ¥ç”µ</strong></h4>
<p>ç½‘ç»œæ¨é€æ¥ç”µä¿¡å·ï¼ŒModem é€šè¿‡ RIL ä¸ŠæŠ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java">RIL_UNSOL_CALL_RING
RIL_UNSOL_RESPONSE_CALL_STATE_CHANGED
</code></pre>
<p>å¯¹äº CDMA è¿˜ä¼šæ”¶åˆ°ï¼š</p>
<pre><code class="hljs language-java" lang="java">RIL_UNSOL_CDMA_CALL_WAITING
</code></pre>
<h4 data-id="heading-17"><strong>æ­¥éª¤ 2: CallTracker æ³¨å†Œç›‘å¬</strong></h4>
<pre><code class="hljs language-java:170:172:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:170:172:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">mCi = phone.mCi;
mCi.registerForCallStateChanged(this, EVENT_CALL_STATE_CHANGE, null);
mCi.registerForOn(this, EVENT_RADIO_AVAILABLE, null);
</code></pre>
<p>æ”¶åˆ°äº‹ä»¶åï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">case</span> EVENT_CALL_STATE_CHANGE:
    pollCallsWhenSafe();
    <span class="hljs-keyword">break</span>;
</code></pre>
<h4 data-id="heading-18"><strong>æ­¥éª¤ 3: è½®è¯¢è·å–é€šè¯åˆ—è¡¨</strong></h4>
<pre><code class="hljs language-java" lang="java">mCi.getCurrentCalls(obtainCompleteMessage(EVENT_POLL_CALLS_RESULT))
</code></pre>
<p>Modem è¿”å›å½“å‰æ‰€æœ‰é€šè¯çš„ <code>DriverCall</code> åˆ—è¡¨ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>é€šè¯ç´¢å¼•</li>
<li>é€šè¯çŠ¶æ€ï¼ˆINCOMING/WAITING/ACTIVEç­‰ï¼‰</li>
<li>å·ç ä¿¡æ¯</li>
<li>æ˜¯å¦ä¸ºæ¥ç”µï¼ˆisMT = trueï¼‰</li>
</ul>
<h4 data-id="heading-19"><strong>æ­¥éª¤ 4: è¯†åˆ«æ–°æ¥ç”µ</strong></h4>
<p>åœ¨ <code>handlePollCalls()</code> ä¸­ï¼š</p>
<pre><code class="hljs language-java" lang="java">newRinging = checkMtFindNewRinging(dc, i);
</code></pre>
<p><strong>checkMtFindNewRinging() é€»è¾‘ï¼š</strong></p>
<ul>
<li>æ£€æŸ¥ DriverCall çš„ <code>isMT</code> æ ‡å¿—</li>
<li>æ£€æŸ¥çŠ¶æ€æ˜¯å¦ä¸º <code>INCOMING</code> æˆ– <code>WAITING</code></li>
<li>å¦‚æœæ˜¯æ–°çš„æ¥ç”µï¼Œåˆ›å»ºæ–°çš„ Connection å¯¹è±¡</li>
</ul>
<h4 data-id="heading-20"><strong>æ­¥éª¤ 5: åˆ›å»ºæ¥ç”µè¿æ¥</strong></h4>
<pre><code class="hljs language-java" lang="java">mConnections[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GsmCdmaConnection</span>(mPhone, dc, <span class="hljs-built_in">this</span>, i);
</code></pre>
<p>å°†æ–°è¿æ¥æ·»åŠ åˆ° <code>mRingingCall</code>:</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">if</span> (mConnections[i].getCall() == mRingingCall) {
    newRinging = mConnections[i];
}
</code></pre>
<h4 data-id="heading-21"><strong>æ­¥éª¤ 6: é€šçŸ¥ä¸Šå±‚æ–°æ¥ç”µ</strong></h4>
<pre><code class="hljs language-java" lang="java">mPhone.notifyNewRingingConnection(newRinging);
</code></pre>
<p>é€šçŸ¥é“¾ï¼š</p>
<pre><code class="hljs language-scss" lang="scss">GsmCdmaCallTracker
    â†“
GsmCdmaPhone<span class="hljs-selector-class">.notifyNewRingingConnectionP</span>()
    â†“
CallManager<span class="hljs-selector-class">.registerForNewRingingConnection</span>()
    â†“
TelephonyConnectionService (Telecom æ¡†æ¶)
    â†“
InCallService (æ¥ç”µç•Œé¢)
</code></pre>
<h4 data-id="heading-22"><strong>æ­¥éª¤ 7: æ˜¾ç¤ºæ¥ç”µç•Œé¢</strong></h4>
<p>Telecom æ¡†æ¶æ¥æ”¶åˆ°æ–°æ¥ç”µé€šçŸ¥åï¼š</p>
<ol>
<li>æ£€æŸ¥æ¥ç”µæƒé™å’Œæ¥ç”µæ˜¾ç¤ºè®¾ç½®</li>
<li>æŸ¥è¯¢è”ç³»äººæ•°æ®åº“åŒ¹é…å·ç </li>
<li>å¯åŠ¨ InCallUI æ˜¾ç¤ºæ¥ç”µç•Œé¢</li>
<li>æ’­æ”¾é“ƒå£°/æŒ¯åŠ¨</li>
</ol>
<h4 data-id="heading-23"><strong>æ­¥éª¤ 8: ç”¨æˆ·å“åº”</strong></h4>
<p><strong>æ¥å¬ç”µè¯ï¼š</strong></p>
<pre><code class="hljs language-java:608:637:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:608:637:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">public void acceptCall() throws CallStateException {
    // FIXME if SWITCH fails, should retry with ANSWER
    // in case the active/holding call disappeared and this
    // is no longer call waiting

    if (mRingingCall.getState() == GsmCdmaCall.State.INCOMING) {
        Rlog.i("phone", "acceptCall: incoming...");
        // Always unmute when answering a new call
        setMute(false);
        mPhone.getVoiceCallSessionStats().onRilAcceptCall(mRingingCall.getConnections());
        mCi.acceptCall(obtainCompleteMessage());
    } else if (mRingingCall.getState() == GsmCdmaCall.State.WAITING) {
        if (isPhoneTypeGsm()) {
            setMute(false);
        } else {
            GsmCdmaConnection cwConn = (GsmCdmaConnection)(mRingingCall.getLatestConnection());

            // Since there is no network response for supplimentary
            // service for CDMA, we assume call waiting is answered.
            // ringing Call state change to idle is in GsmCdmaCall.detach
            // triggered by updateParent.
            cwConn.updateParent(mRingingCall, mForegroundCall);
            cwConn.onConnectedInOrOut();
            updatePhoneState();
        }
        switchWaitingOrHoldingAndActive();
    } else {
        throw new CallStateException("phone not ringing");
    }
}
</code></pre>
<p><strong>å¤„ç†é€»è¾‘ï¼š</strong></p>
<ul>
<li><strong>INCOMING</strong>: ç›´æ¥æ¥å¬ â†’ <code>mCi.acceptCall()</code></li>
<li><strong>WAITING</strong>: å‘¼å«ç­‰å¾…åœºæ™¯ â†’ åˆ‡æ¢é€šè¯ <code>switchWaitingOrHoldingAndActive()</code></li>
</ul>
<p>å‘é€åˆ° RILï¼š</p>
<pre><code class="hljs language-scss" lang="scss">RIL_REQUEST_ANSWER (GSM)
RIL_REQUEST_CDMA_FLASH (CDMA)
</code></pre>
<p><strong>æ‹’æ¥ç”µè¯ï¼š</strong></p>
<pre><code class="hljs language-java:639:647:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:639:647:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">public void rejectCall() throws CallStateException {
    // AT+CHLD=0 means "release held or UDUB"
    // so if the phone isn't ringing, this could hang up held
    if (mRingingCall.getState().isRinging()) {
        mCi.rejectCall(obtainCompleteMessage());
    } else {
        throw new CallStateException("phone not ringing");
    }
}
</code></pre>
<p>å‘é€åˆ° RILï¼š</p>
<pre><code class="hljs language-scss" lang="scss">RIL_REQUEST_HANGUP (æŒ‚æ–­)
RIL_REQUEST_UDUB (User Determined User Busy)
</code></pre>
<h4 data-id="heading-24"><strong>æ­¥éª¤ 9: çŠ¶æ€æ›´æ–°</strong></h4>
<p>æ¥å¬åçŠ¶æ€è½¬æ¢ï¼š</p>
<pre><code class="hljs">INCOMING/WAITING â†’ ACTIVE
</code></pre>
<p>Modem ä¸ŠæŠ¥çŠ¶æ€å˜åŒ– â†’ å†æ¬¡è½®è¯¢ â†’ æ›´æ–°è¿æ¥çŠ¶æ€</p>
<hr/>
<h2 data-id="heading-25"><strong>ä¸‰ã€é€šè¯çŠ¶æ€ç®¡ç†</strong> ğŸ“Š</h2>
<h3 data-id="heading-26"><strong>Call å¯¹è±¡åˆ†ç±»</strong></h3>
<p><code>GsmCdmaCallTracker</code> ç»´æŠ¤ä¸‰ä¸ª Call å¯¹è±¡ï¼š</p>
<pre><code class="hljs language-java:90:95:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java" lang="java:90:95:/Users/tanzhoumei/android1/frameworks-opt-telephony/src/java/com/android/internal/telephony/GsmCdmaCallTracker.java">@UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.R, trackingBug = 170729553)
public GsmCdmaCall mRingingCall = new GsmCdmaCall(this);
// A call that is ringing or (call) waiting
@UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.R, trackingBug = 170729553)
public GsmCdmaCall mForegroundCall = new GsmCdmaCall(this);
@UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.R, trackingBug = 170729553)
public GsmCdmaCall mBackgroundCall = new GsmCdmaCall(this);
</code></pre>
<ul>
<li><strong>mRingingCall</strong>: æ¥ç”µ/å‘¼å«ç­‰å¾…</li>
<li><strong>mForegroundCall</strong>: å‰å°æ´»åŠ¨é€šè¯</li>
<li><strong>mBackgroundCall</strong>: åå°ä¿æŒé€šè¯</li>
</ul>
<h3 data-id="heading-27"><strong>è¿æ¥æ•°ç»„</strong></h3>
<pre><code class="hljs language-java" lang="java">GsmCdmaConnection[] mConnections;
- GSM: æœ€å¤š <span class="hljs-number">19</span> ä¸ªè¿æ¥ï¼ˆ<span class="hljs-number">7</span>ä¸ªCS + <span class="hljs-number">12</span>ä¸ªIMS SRVCCï¼‰
- CDMA: æœ€å¤š <span class="hljs-number">8</span> ä¸ªè¿æ¥
</code></pre>
<h3 data-id="heading-28"><strong>çŠ¶æ€è½®è¯¢æœºåˆ¶</strong></h3>
<p><strong>è§¦å‘è½®è¯¢çš„äº‹ä»¶ï¼š</strong></p>
<ol>
<li><code>EVENT_CALL_STATE_CHANGE</code>: Modem ä¸»åŠ¨é€šçŸ¥</li>
<li><code>EVENT_RADIO_AVAILABLE</code>: Radio é‡æ–°å¯ç”¨</li>
<li><code>EVENT_REPOLL_AFTER_DELAY</code>: å»¶è¿Ÿé‡æ–°è½®è¯¢</li>
</ol>
<p><strong>è½®è¯¢ä½œç”¨ï¼š</strong></p>
<ul>
<li>åŒæ­¥ Framework å’Œ Modem çš„é€šè¯çŠ¶æ€</li>
<li>æ£€æµ‹æ–°æ¥ç”µ</li>
<li>æ£€æµ‹é€šè¯æ–­å¼€</li>
<li>æ›´æ–°é€šè¯å±æ€§ï¼ˆæ—¶é•¿ã€çŠ¶æ€ç­‰ï¼‰</li>
</ul>
<hr/>
<h2 data-id="heading-29"><strong>å››ã€å…³é”®åŠŸèƒ½</strong></h2>
<h3 data-id="heading-30"><strong>1. é€šè¯ä¿æŒä¸æ¢å¤</strong></h3>
<pre><code class="hljs language-java" lang="java">switchWaitingOrHoldingAndActive()
</code></pre>
<ul>
<li>GSM: <code>RIL_REQUEST_SWITCH_WAITING_OR_HOLDING_AND_ACTIVE</code></li>
<li>CDMA: å‘é€ Flash å‘½ä»¤</li>
</ul>
<h3 data-id="heading-31"><strong>2. å¤šæ–¹é€šè¯ï¼ˆä¼šè®®ï¼‰</strong></h3>
<pre><code class="hljs language-java" lang="java">conference()
</code></pre>
<ul>
<li>å°†ä¿æŒé€šè¯å’Œæ´»åŠ¨é€šè¯åˆå¹¶</li>
<li>GSM: <code>RIL_REQUEST_CONFERENCE</code></li>
<li>CDMA: Flash æ“ä½œ</li>
</ul>
<h3 data-id="heading-32"><strong>3. é€šè¯è½¬ç§»</strong></h3>
<pre><code class="hljs language-java" lang="java">explicitCallTransfer()
</code></pre>
<ul>
<li>å°†é€šè¯è½¬ç§»ç»™ç¬¬ä¸‰æ–¹</li>
<li><code>RIL_REQUEST_EXPLICIT_CALL_TRANSFER</code></li>
</ul>
<h3 data-id="heading-33"><strong>4. æŒ‚æ–­é€šè¯</strong></h3>
<pre><code class="hljs language-java" lang="java">hangup(Connection conn)
hangupForegroundResumeBackground()
hangupWaitingOrBackground()
</code></pre>
<ul>
<li>æŒ‚æ–­æŒ‡å®šè¿æ¥</li>
<li>æŒ‚æ–­å‰å°ï¼Œæ¢å¤åå°</li>
<li>æŒ‚æ–­ç­‰å¾…æˆ–åå°é€šè¯</li>
</ul>
<hr/>
<h2 data-id="heading-34"><strong>äº”ã€IMS é€šè¯å¤„ç†</strong></h2>
<p>å¯¹äº VoLTE/VoWiFi é€šè¯ï¼Œä½¿ç”¨ <code>ImsPhoneCallTracker</code>ï¼š</p>
<h3 data-id="heading-35"><strong>å…³é”®å·®å¼‚</strong></h3>
<ol>
<li><strong>ä¸ä½¿ç”¨è½®è¯¢</strong>: IMS é€šè¿‡äº‹ä»¶é©±åŠ¨</li>
<li><strong>ImsCall å¯¹è±¡</strong>: é€šè¿‡ IMS æ ˆç®¡ç†</li>
<li><strong>æ›´ä¸°å¯Œçš„åŠŸèƒ½</strong>:
<ul>
<li>è§†é¢‘é€šè¯</li>
<li>é€šè¯å‡é™çº§</li>
<li>Wi-Fi åˆ‡æ¢</li>
<li>RTTï¼ˆå®æ—¶æ–‡æœ¬ï¼‰</li>
</ul>
</li>
</ol>
<h3 data-id="heading-36"><strong>SRVCC åˆ‡æ¢</strong></h3>
<p><strong>Single Radio Voice Call Continuity</strong>ï¼š</p>
<ul>
<li>VoLTE â†’ 2G/3G æ— ç¼åˆ‡æ¢</li>
<li><code>ImsPhoneCallTracker</code> â†’ <code>GsmCdmaCallTracker</code></li>
<li>ä¿æŒé€šè¯ä¸ä¸­æ–­</li>
</ul>
<hr/>
<h2 data-id="heading-37"><strong>å…­ã€æ—¶åºå›¾æ€»ç»“</strong></h2>
<h3 data-id="heading-38"><strong>å»ç”µæ—¶åº</strong></h3>
<pre><code class="hljs language-scss" lang="scss">Dialer App
    â†“ <span class="hljs-built_in">placeCall</span>()
Telecom
    â†“ 
Phone<span class="hljs-selector-class">.dial</span>()
    â†“
CallTracker<span class="hljs-selector-class">.dialGsm</span>()
    â†“ åˆ›å»º mPendingMO
RIL<span class="hljs-selector-class">.dial</span>()
    â†“
Modem æ‹¨å·
    â†“
RIL_UNSOL_CALL_STATE_CHANGED
    â†“
<span class="hljs-built_in">pollCallsWhenSafe</span>()
    â†“ <span class="hljs-built_in">getCurrentCalls</span>()
Modem è¿”å›é€šè¯åˆ—è¡¨
    â†“
<span class="hljs-built_in">handlePollCalls</span>()
    â†“ è¯†åˆ« mPendingMO â†’ mConnections<span class="hljs-selector-attr">[i]</span>
DIALING â†’ ALERTING â†’ ACTIVE
    â†“
<span class="hljs-built_in">notifyPreciseCallStateChanged</span>()
    â†“
Telecom æ›´æ–° UI
</code></pre>
<h3 data-id="heading-39"><strong>æ¥ç”µæ—¶åº</strong></h3>
<pre><code class="hljs language-scss" lang="scss">ç½‘ç»œæ¥ç”µ
    â†“
Modem æ£€æµ‹
    â†“
RIL_UNSOL_CALL_RING
    â†“
CallTracker<span class="hljs-selector-class">.EVENT_CALL_STATE_CHANGE</span>
    â†“
<span class="hljs-built_in">pollCallsWhenSafe</span>()
    â†“ <span class="hljs-built_in">getCurrentCalls</span>()
Modem è¿”å›é€šè¯åˆ—è¡¨ï¼ˆåŒ…å«æ–°æ¥ç”µï¼‰
    â†“
<span class="hljs-built_in">handlePollCalls</span>()
    â†“ <span class="hljs-built_in">checkMtFindNewRinging</span>()
åˆ›å»ºæ–° Connection â†’ mRingingCall
    â†“
<span class="hljs-built_in">notifyNewRingingConnection</span>()
    â†“
Telecom æ”¶åˆ°é€šçŸ¥
    â†“
å¯åŠ¨ InCallUI
    â†“ æ’­æ”¾é“ƒå£°
ç”¨æˆ·æ¥å¬
    â†“
<span class="hljs-built_in">acceptCall</span>()
    â†“ RIL<span class="hljs-selector-class">.acceptCall</span>()
Modem æ¥å¬
    â†“
RIL_UNSOL_CALL_STATE_CHANGED
    â†“
<span class="hljs-built_in">pollCallsWhenSafe</span>()
    â†“
INCOMING â†’ ACTIVE
    â†“
é€šè¯å»ºç«‹
</code></pre>
<hr/>
<h2 data-id="heading-40"><strong>ä¸ƒã€å…³é”®æ—¥å¿—æ ‡ç­¾</strong></h2>
<ul>
<li><code>GsmCdmaCallTracker</code>: CS åŸŸé€šè¯è¿½è¸ª</li>
<li><code>ImsPhoneCallTracker</code>: IMS åŸŸé€šè¯è¿½è¸ª</li>
<li><code>GsmCdmaCall</code>: é€šè¯å¯¹è±¡</li>
<li><code>GsmCdmaConnection</code>: è¿æ¥å¯¹è±¡</li>
<li><code>RIL</code>: RIL å±‚å‘½ä»¤å’Œå“åº”</li>
</ul>
<hr/>
<p>è¿™å°±æ˜¯ Android Telephony ä¸­å®Œæ•´çš„æ¥ç”µå»ç”µæµç¨‹ï¼æ•´ä¸ªç³»ç»Ÿé€šè¿‡è½®è¯¢æœºåˆ¶ä¿æŒ Framework å’Œ Modem çŠ¶æ€åŒæ­¥ï¼Œæ”¯æŒ GSM/CDMA/IMS å¤šç§ç½‘ç»œç±»å‹ï¼Œå¹¶æä¾›äº†ä¸°å¯Œçš„é€šè¯ç®¡ç†åŠŸèƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>