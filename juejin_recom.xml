<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">  <channel>      <title>æ˜é‡‘æ–‡ç« æ¨è</title>      <link>https://juejin.cn/recommended?sort=newest</link>      <description>ä¸€ä¸ªå¸®åŠ©å¼€å‘è€…æˆé•¿çš„ç¤¾åŒº</description>      <generator>python juejin_recom.py @Pi20</generator>      <item>    <title><![CDATA[TDDLã€Amoebaã€Cobarã€MyCAT æ¶æ„æ¯”è¾ƒ]]></title>    <link>https://juejin.cn/post/7592147054786412595</link>    <guid>https://juejin.cn/post/7592147054786412595</guid>    <pubDate>2026-01-07T02:14:59.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592147054786412595" data-draft-id="7592164124659515442" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="TDDLã€Amoebaã€Cobarã€MyCAT æ¶æ„æ¯”è¾ƒ"/> <meta itemprop="keywords" content="æ•°æ®åº“"/> <meta itemprop="datePublished" content="2026-01-07T02:14:59.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç‹å’Œå…«è›‹"/> <meta itemprop="url" content="https://juejin.cn/user/1658510348133944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            TDDLã€Amoebaã€Cobarã€MyCAT æ¶æ„æ¯”è¾ƒ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1658510348133944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç‹å’Œå…«è›‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:14:59.000Z" title="Wed Jan 07 2026 02:14:59 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€æ–‡æ¡£è¯´æ˜</h2>
<p>æœ¬æ–‡èšç„¦ä¸šç•Œæµè¡Œçš„ MySQL åˆ†å¸ƒå¼æ•°æ®åº“ä¸­é—´ä»¶ï¼ˆTDDLã€Amoebaã€Cobarã€MyCATï¼‰ï¼Œé‡ç‚¹å¯¹æ¯”å…¶æ¶æ„å·®å¼‚ï¼Œå±•ç°ä¸­é—´ä»¶çš„å‘å±•ä¸æ¼”è¿›è·¯çº¿ã€‚ç½‘ä¸Šå…³äºå„äº§å“çš„åŸºç¡€ä»‹ç»èµ„æ–™è¾ƒå¤šï¼Œæœ¬æ–‡ä»…å›´ç»•æ¶æ„æ ¸å¿ƒå±•å¼€åˆ†æã€‚</p>
<h2 data-id="heading-1">äºŒã€å„äº§å“æ¶æ„åŠæ ¸å¿ƒç‰¹ç‚¹</h2>
<h4 data-id="heading-2">1. TDDL</h4>
<ul>
<li>å®šä½ï¼šéç‹¬ç«‹ä¸­é—´ä»¶ï¼Œä»…ä¸ºä¸­é—´å±‚ï¼Œä»¥ Jar åŒ…å½¢å¼æä¾›ç»™åº”ç”¨è°ƒç”¨ï¼Œå±äº JDBC Shard æ€æƒ³èŒƒç•´ã€‚</li>
<li>æ¶æ„ä½ç½®ï¼šå¤¹åœ¨ä¸šåŠ¡å±‚å’Œ JDBC ä¸­é—´ï¼ˆçº æ­£ç½‘ä¸Šéƒ¨åˆ†èµ„æ–™å°†å…¶ç”»åœ¨ JDBC ä¸‹å±‚çš„é”™è¯¯å®šä½ï¼‰ã€‚</li>
<li>ç¤¾åŒºçŠ¶æ€ï¼šå¤„äºåœæ»çŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-3">2. Amoeba</h4>
<ul>
<li>å®šä½ï¼šçœŸæ­£çš„ç‹¬ç«‹ä¸­é—´ä»¶ï¼Œåº”ç”¨è¿æ¥ Amoeba æ“ä½œ MySQL é›†ç¾¤æ—¶ï¼Œä½“éªŒä¸æ“ä½œå•ä¸ª MySQL ä¸€è‡´ã€‚</li>
<li>æ¶æ„ç‰¹ç‚¹ï¼šå±äºä¸­é—´ä»¶æ—©æœŸäº§å“ï¼Œåç«¯ä¾èµ– JDBC Driverã€‚</li>
<li>ç¤¾åŒºçŠ¶æ€ï¼šå¤„äºåœæ»çŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-4">3. Cobar</h4>
<ul>
<li>æ¶æ„ç‰¹ç‚¹ï¼šåç«¯å»æ‰ JDBC Driverï¼Œä¸å†æ”¯æŒ JDBC è§„èŒƒï¼Œæ— æ³•é€‚é… Oracleã€PostgreSQL ç­‰æ•°æ®åº“ï¼›é‡‡ç”¨åŸç”Ÿé€šä¿¡åè®®ï¼Œæ”¯æŒä¸»å¤‡åˆ‡æ¢ã€è¯»å†™åˆ†ç¦»ã€å¼‚æ­¥æ“ä½œç­‰æ‰©å±•åŠŸèƒ½ã€‚</li>
<li>èšåˆåŠŸèƒ½æ”¯æŒï¼šå¯æ”¯æŒ Order Byã€Group Byã€limit è¯­æ³•ï¼Œä½†ä»…ç®€å•è¿”å›ç»“æœï¼Œä¸åšèšåˆå¤„ç†ï¼Œéœ€ä¸šåŠ¡ç³»ç»Ÿè‡ªè¡Œå®Œæˆèšåˆé€»è¾‘ã€‚</li>
<li>ç¤¾åŒºçŠ¶æ€ï¼šå¤„äºåœæ»çŠ¶æ€ã€‚</li>
</ul>
<h4 data-id="heading-5">4. MyCAT</h4>
<ul>
<li>
<p>å‘å±•åŸºç¡€ï¼šåŸºäº Cobar æ¼”è¿›è€Œæ¥ã€‚</p>
</li>
<li>
<p>æ ¸å¿ƒæ”¹è¿›ï¼š</p>
<ol>
<li>åç«¯ç”± BIO æ”¹ä¸º NIOï¼Œå¹¶å‘é‡å¤§å¹…æå‡ï¼›</li>
<li>å®Œå–„èšåˆåŠŸèƒ½æ”¯æŒï¼Œå¯ç›´æ¥å¤„ç† Order Byã€Group Byã€limit ç­‰æ“ä½œï¼ˆæ— éœ€ä¸šåŠ¡ç³»ç»Ÿé¢å¤–å¤„ç†ï¼‰ã€‚</li>
</ol>
</li>
<li>
<p>ç¤¾åŒºçŠ¶æ€ï¼šéå¸¸æ´»è·ƒã€‚</p>
</li>
</ul>
<h2 data-id="heading-6">ä¸‰ã€å…³é”®æ€»ç»“</h2>
<ol>
<li>äº§å“æ¸Šæºï¼šAmoebaã€Cobarã€MyCAT ä¸‰è€…æ¸Šæºè¾ƒæ·±ï¼Œå‡å› å‰åºäº§å“åœæ›´æˆ–æ ¸å¿ƒå›¢é˜Ÿå˜åŠ¨è€Œé€æ­¥è¿­ä»£ï¼šAmoeba åœæ›´å Cobar å‡ºç°ï¼ŒCobar æ ¸å¿ƒå›¢é˜Ÿè§£æ•£å MyCAT å¦èµ·ç‚‰ç¶ã€‚</li>
<li>å¼€æºç°çŠ¶ï¼šå›½å†…å¼€æºé¡¹ç›®ä¼—å¤šï¼Œä½†èƒ½æŒç»­ç»´æŠ¤çš„è¾ƒå°‘ï¼ŒMyCAT æ´»è·ƒçš„ç¤¾åŒºçŠ¶æ€è¾ƒä¸ºéš¾å¾—ã€‚</li>
<li>æ¶æ„æ¼”è¿›æ ¸å¿ƒï¼šä»ä¾èµ– JDBC Driverï¼ˆAmoebaï¼‰â†’ åŸç”Ÿé€šä¿¡åè®®ï¼ˆCobarï¼‰â†’ NIO ä¼˜åŒ– + å®Œå–„èšåˆåŠŸèƒ½ï¼ˆMyCATï¼‰ï¼Œé€æ­¥æå‡æ‰©å±•æ€§ã€å¹¶å‘èƒ½åŠ›å’ŒåŠŸèƒ½å®Œæ•´æ€§ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ… â€”â€” AIè¾…åŠ©]]></title>    <link>https://juejin.cn/post/7592119218024824867</link>    <guid>https://juejin.cn/post/7592119218024824867</guid>    <pubDate>2026-01-06T06:02:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592119218024824867" data-draft-id="7587398857536290879" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ… â€”â€” AIè¾…åŠ©"/> <meta itemprop="keywords" content="å‰ç«¯,Electron"/> <meta itemprop="datePublished" content="2026-01-06T06:02:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="PBitW"/> <meta itemprop="url" content="https://juejin.cn/user/3048261967153544"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Electron åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ… â€”â€” AIè¾…åŠ©
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3048261967153544/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    PBitW
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T06:02:13.000Z" title="Tue Jan 06 2026 06:02:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    59
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æ¥ä¸Šä¸€ç¯‡ï¼š
<a href="https://juejin.cn/spost/7591806035758628906" target="_blank" title="https://juejin.cn/spost/7591806035758628906">Electron åˆä½“éªŒ</a></p>
<h3 data-id="heading-0">ä»£ç å®Œå–„</h3>
<p>ä¸Šä¸€ç¯‡ä¸­ï¼Œç®€å•çš„è®©AIå†™äº†ä¸€äº›demoå†…å®¹ï¼Œèœé¸Ÿåˆåœ¨å…¶ä¸ŠåŠ ä¸Šäº†ä¸å°‘åŠŸèƒ½ã€‚ä½†æ„Ÿè§‰ä»<code>vue</code>åˆ°åˆæ¬¡å¼€å‘<code>electron</code>çœŸæ­£éœ€è¦æ³¨æ„çš„ï¼Œè¿˜æ˜¯é‚£äº›è¯»å–æ–‡ä»¶ã€è¿æ¥æ•°æ®åº“ä¹‹ç±»çš„ä¸œè¥¿ã€‚</p>
<p>è€Œä¸Šä¸€ç¯‡ä¸­å°±æ˜¯ä¸»è¦ä»‹ç»çš„å°±æ˜¯è¿™äº›ï¼Œå…¶å®çœ‹æ‡‚ä¸€ä¸ªï¼Œåé¢çš„éƒ½æ˜¯ä»¥æ­¤ç±»æ¨å³å¯ï¼</p>
<p>è¿™é‡Œä¹‹æ‰€ä»¥è¦å†™ï¼Œæ˜¯å› ä¸ºèœé¸Ÿæ„Ÿè§‰è¯»å–æ–‡ä»¶çš„æ–¹æ¡ˆè¿˜æ˜¯ä¸å¥½ï¼Œæ”¹æˆäº†è¿æ¥æ•°æ®åº“ï¼Œè®©åç«¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…äº†<code>mySQL</code>ï¼Œç›´æ¥ç”¨electronå»è¿æ¥å³å¯ã€‚</p>
<p>èœé¸Ÿä¹Ÿå¯¹ä¹‹å‰å†™çš„ä»£ç è¿›è¡Œäº†æŠ½ç¦»ï¼Œç›®å½•ç»“æ„å˜æˆäº†è¿™æ ·ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d63c78f1db754cad98c4354ab71610e2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=rLrYPfG7jpIpaGaB0IzDpwLtOIs%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-1">ä»£ç å¦‚ä¸‹</h4>
<p><strong>main.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">const</span> { app, <span class="hljs-title class_">BrowserWindow</span>, ipcMain, dialog } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"electron"</span>);
<span class="hljs-keyword">const</span> { join } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">"path"</span>);
<span class="hljs-keyword">const</span> { exec, spawn } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"child_process"</span>);
<span class="hljs-keyword">const</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">"fs"</span>);
<span class="hljs-keyword">const</span> express = <span class="hljs-built_in">require</span>(<span class="hljs-string">"express"</span>);
<span class="hljs-keyword">const</span> mysql = <span class="hljs-built_in">require</span>(<span class="hljs-string">"mysql2/promise"</span>);

<span class="hljs-comment">// æå‡ºå»çš„è¯»å†™æ–‡ä»¶æ“ä½œ</span>
<span class="hljs-keyword">const</span> { selectPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/selectPath.js"</span>);
<span class="hljs-keyword">const</span> { runScript, runScriptNoWait } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/runScript.js"</span>);
<span class="hljs-keyword">const</span> { readDir } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readDir.js"</span>);
<span class="hljs-keyword">const</span> { readConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readConfig.js"</span>);
<span class="hljs-keyword">const</span> { writeConfig } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/writeConfig.js"</span>);
<span class="hljs-keyword">const</span> { saveImageToUserData } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/saveImageToUserData.js"</span>);
<span class="hljs-keyword">const</span> { loadImageAsBase64 } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/loadImageAsBase64.js"</span>);
<span class="hljs-keyword">const</span> { getSeqChipPath } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/getSeqChipPath.js"</span>);
<span class="hljs-keyword">const</span> { readFa, readBFile, readCFile } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./modules/readFa.js"</span>);

<span class="hljs-comment">// æå‡ºå»çš„API</span>
<span class="hljs-keyword">const</span> { loginApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/login.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordAddApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordAdd.js"</span>);
<span class="hljs-keyword">const</span> { appraisalRecordListApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordList.js"</span>);

<span class="hljs-comment">// å±è”½å®‰å…¨è­¦å‘Š</span>
<span class="hljs-comment">// ectron Security Warning (Insecure Content-Security-Policy)</span>
process.<span class="hljs-property">env</span>[<span class="hljs-string">"ELECTRON_DISABLE_SECURITY_WARNINGS"</span>] = <span class="hljs-string">"true"</span>;

<span class="hljs-comment">// åˆ›å»ºæµè§ˆå™¨çª—å£æ—¶ï¼Œè°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">createWindow</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> win = <span class="hljs-keyword">new</span> <span class="hljs-title class_">BrowserWindow</span>({
    <span class="hljs-attr">width</span>: <span class="hljs-number">1920</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">1080</span>,
    <span class="hljs-attr">fullscreen</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// ğŸ‘ˆ ä¸€å¯åŠ¨å°±å…¨å±</span>
    <span class="hljs-attr">autoHideMenuBar</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">webPreferences</span>: {
      <span class="hljs-attr">preload</span>: path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"preload.js"</span>),
      <span class="hljs-attr">contextIsolation</span>: <span class="hljs-literal">true</span>,
      <span class="hljs-attr">nodeIntegration</span>: <span class="hljs-literal">false</span>
    }
  });

  <span class="hljs-comment">// å¯åŠ¨æ—¶æœ€å¤§åŒ–ï¼ˆä¿ç•™çª—å£æŒ‰é’®ï¼‰</span>
  win.<span class="hljs-title function_">maximize</span>();

  <span class="hljs-comment">// win.loadURL('http://localhost:3000')</span>
  <span class="hljs-comment">// developmentæ¨¡å¼</span>
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>) {
    win.<span class="hljs-title function_">loadURL</span>(process.<span class="hljs-property">env</span>.<span class="hljs-property">VITE_DEV_SERVER_URL</span>);
    <span class="hljs-comment">// å¼€å¯è°ƒè¯•å°</span>
    win.<span class="hljs-property">webContents</span>.<span class="hljs-title function_">openDevTools</span>();
  } <span class="hljs-keyword">else</span> {
    win.<span class="hljs-title function_">loadFile</span>(<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"../dist/index.html"</span>));
  }
};

<span class="hljs-comment">// Electron ä¼šåœ¨åˆå§‹åŒ–åå¹¶å‡†å¤‡</span>
app.<span class="hljs-title function_">whenReady</span>().<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">await</span> <span class="hljs-title function_">startLocalApi</span>(); <span class="hljs-comment">// â­ å¯åŠ¨æœ¬åœ° API</span>
  <span class="hljs-title function_">createWindow</span>();
  app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"activate"</span>, <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-keyword">if</span> (<span class="hljs-title class_">BrowserWindow</span>.<span class="hljs-title function_">getAllWindows</span>().<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-title function_">createWindow</span>();
  });
});

app.<span class="hljs-title function_">on</span>(<span class="hljs-string">"window-all-closed"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (process.<span class="hljs-property">platform</span> !== <span class="hljs-string">"darwin"</span>) app.<span class="hljs-title function_">quit</span>();
});

<span class="hljs-comment">// ä¿å­˜é…ç½® - ç”¨äºè®¾ç½®è„šæœ¬æ‰§è¡Œç›®å½•</span>
<span class="hljs-keyword">const</span> userDataPath = app.<span class="hljs-title function_">getPath</span>(<span class="hljs-string">"userData"</span>);
<span class="hljs-keyword">const</span> scriptDir = path.<span class="hljs-title function_">join</span>(userDataPath, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// ç›®æ ‡æ–‡ä»¶å¤¹</span>
<span class="hljs-keyword">const</span> defaultScriptDir = path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">"scripts"</span>); <span class="hljs-comment">// æºæ–‡ä»¶å¤¹</span>
<span class="hljs-comment">// å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º</span>
<span class="hljs-keyword">if</span> (!fs.<span class="hljs-title function_">existsSync</span>(scriptDir)) {
  fs.<span class="hljs-title function_">mkdirSync</span>(scriptDir, { <span class="hljs-attr">recursive</span>: <span class="hljs-literal">true</span> }); <span class="hljs-comment">// é€’å½’åˆ›å»ºç›®å½•</span>
}
<span class="hljs-comment">// è¯»å–é»˜è®¤ç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé€ä¸ªæ‹·è´</span>
fs.<span class="hljs-title function_">readdirSync</span>(defaultScriptDir).<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">file</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> srcFile = path.<span class="hljs-title function_">join</span>(defaultScriptDir, file);
  <span class="hljs-keyword">const</span> destFile = path.<span class="hljs-title function_">join</span>(scriptDir, file);
  <span class="hljs-comment">// åªæ‹·è´æ–‡ä»¶</span>
  <span class="hljs-keyword">if</span> (fs.<span class="hljs-title function_">lstatSync</span>(srcFile).<span class="hljs-title function_">isFile</span>()) {
    fs.<span class="hljs-title function_">copyFileSync</span>(srcFile, destFile);
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${file}</span> has copy to scripts`</span>);
  }
});

<span class="hljs-comment">// é€‰æ‹©è·¯å¾„</span>
<span class="hljs-title function_">selectPath</span>(ipcMain, dialog);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScript</span>(ipcMain, app, path, fs, exec);
<span class="hljs-comment">// è¿è¡Œè„šæœ¬ -- ä¸ç­‰å¾…ç»“æœ</span>
<span class="hljs-title function_">runScriptNoWait</span>(ipcMain, app, path, fs, spawn);
<span class="hljs-comment">// è¯»å–æŸä¸ªæ–‡ä»¶å¤¹ä¸‹æ˜¯å¦æœ‰æ–‡ä»¶</span>
<span class="hljs-title function_">readDir</span>(ipcMain, fs);
<span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">readConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// å†™å…¥é…ç½®æ–‡ä»¶</span>
<span class="hljs-title function_">writeConfig</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// ä¿å­˜ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡åˆ°ç”¨æˆ·ç›®å½• â€”â€” é˜²æ­¢ç”¨æˆ·åˆ é™¤</span>
<span class="hljs-title function_">saveImageToUserData</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// åŠ è½½å›¾ç‰‡ä½œä¸º base64 ç¼–ç  â€”â€” </span>
<span class="hljs-title function_">loadImageAsBase64</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è·å–é…ç½®æ–‡ä»¶ä¸‹çš„æµ‹åºè·¯å¾„ï¼Œå¹¶å°†ä¸‹é¢çš„æ–‡ä»¶è¿”å›æˆselectå¯ä»¥ä½¿ç”¨çš„é€‰é¡¹</span>
<span class="hljs-title function_">getSeqChipPath</span>(ipcMain, app, path, fs);
<span class="hljs-comment">// è¯»å– FA æ–‡ä»¶</span>
<span class="hljs-title function_">readFa</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– B æ–‡ä»¶</span>
<span class="hljs-title function_">readBFile</span>(ipcMain, fs, path);
<span class="hljs-comment">// è¯»å– C æ–‡ä»¶</span>
<span class="hljs-title function_">readCFile</span>(ipcMain, fs, path);


<span class="hljs-comment">// è¿æ¥æ•°æ®åº“ -- é‡ç‚¹</span>
<span class="hljs-keyword">let</span> apiServer;
<span class="hljs-keyword">let</span> apiPort;
<span class="hljs-keyword">let</span> mysqlPool;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startLocalApi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">express</span>();
  api.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

  <span class="hljs-comment">// âš ï¸ MySQL è¿æ¥æ± ï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  mysqlPool = mysql.<span class="hljs-title function_">createPool</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">"xxx.xx.xxx.xx"</span>, <span class="hljs-comment">// æ•°æ®åº“åœ°å€</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">13306</span>, <span class="hljs-comment">// ç«¯å£</span>
    <span class="hljs-attr">user</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“è´¦å·</span>
    <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxxxxxx"</span>, <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>
    <span class="hljs-attr">database</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“åç§°</span>
    <span class="hljs-attr">connectionLimit</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°</span>
  });

  <span class="hljs-comment">// è§£å†³è·¨åŸŸ</span>
  api.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,OPTIONS"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-title function_">next</span>();
  });

  <span class="hljs-comment">// ç™»å½•æ¥å£</span>
  <span class="hljs-title function_">loginApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•æ·»åŠ æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordAddApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•åˆ—è¡¨æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordListApi</span>(api, mysqlPool);

  <span class="hljs-comment">// â­ éšæœºç«¯å£ï¼Œåªç›‘å¬æœ¬æœº</span>
  apiServer = api.<span class="hljs-title function_">listen</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-function">() =&gt;</span> {
    apiPort = apiServer.<span class="hljs-title function_">address</span>().<span class="hljs-property">port</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Local API started on port:"</span>, apiPort);
  });
}

<span class="hljs-comment">// è·å–æœ¬åœ° API ç«¯å£</span>
ipcMain.<span class="hljs-title function_">handle</span>(<span class="hljs-string">"getApiPort"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">return</span> apiPort;
});
</code></pre>
<h3 data-id="heading-2">å¦‚ä½•ä½¿ç”¨æ¥å£ï¼Ÿ</h3>
<p>èœé¸Ÿç›´æ¥å°†APIçš„ç«¯å£å­˜åœ¨äº†piniaä¸­ï¼Œé¿å…æ¯æ¬¡è°ƒç”¨è¿˜è¦å»å’Œelectroné€šä¿¡</p>
<p><strong>port.js</strong></p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-keyword">import</span> { ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> { defineStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"pinia"</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> usePortStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">"port"</span>, <span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">let</span> port = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);

  <span class="hljs-comment">// å¼‚æ­¥ action</span>
  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchPort</span>(<span class="hljs-params"/>) {
    port.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">getApiPort</span>();
  }

  <span class="hljs-keyword">function</span> <span class="hljs-title function_">getPort</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> port.<span class="hljs-property">value</span>;
  }

  <span class="hljs-keyword">return</span> { port, fetchPort, getPort };
});
</code></pre>
<p>ç®€å•åˆ—ä¸¾ä¸€ä¸ªç™»å½•çš„ä¾‹å­</p>
<p><strong>login.vue</strong></p>
<pre><code class="hljs language-js" lang="js">&lt;script setup&gt;
<span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">"@/router"</span>;
<span class="hljs-keyword">import</span> { <span class="hljs-title class_">NForm</span>, <span class="hljs-title class_">NFormItemRow</span>, <span class="hljs-title class_">NInput</span>, <span class="hljs-title class_">NButton</span>, useMessage } <span class="hljs-keyword">from</span> <span class="hljs-string">"naive-ui"</span>;
<span class="hljs-keyword">import</span> { reactive, ref } <span class="hljs-keyword">from</span> <span class="hljs-string">"vue"</span>;
<span class="hljs-keyword">import</span> logo <span class="hljs-keyword">from</span> <span class="hljs-string">"@/assets/img/logo.png"</span>;

<span class="hljs-keyword">import</span> { usePortStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/port"</span>;
<span class="hljs-keyword">import</span> { useUserStore } <span class="hljs-keyword">from</span> <span class="hljs-string">"@/stores/user"</span>;
<span class="hljs-keyword">const</span> portStore = <span class="hljs-title function_">usePortStore</span>();
<span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>();

<span class="hljs-keyword">const</span> message = <span class="hljs-title function_">useMessage</span>();
<span class="hljs-keyword">const</span> formData = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">username</span>: <span class="hljs-string">"xxx"</span>,
  <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxxx"</span>
});

<span class="hljs-keyword">const</span> rules = <span class="hljs-title function_">reactive</span>({
  <span class="hljs-attr">username</span>: [{ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span>, <span class="hljs-attr">trigger</span>: [<span class="hljs-string">"blur"</span>] }],
  <span class="hljs-attr">password</span>: [{ <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>, <span class="hljs-attr">trigger</span>: [<span class="hljs-string">"blur"</span>] }]
});

<span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>);
<span class="hljs-keyword">const</span> <span class="hljs-title function_">login</span> = (<span class="hljs-params"/>) =&gt; {
  formRef.<span class="hljs-property">value</span>?.<span class="hljs-title function_">validate</span>(<span class="hljs-keyword">async</span> (errors) =&gt; {
    <span class="hljs-keyword">if</span> (!errors) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`http://127.0.0.1:<span class="hljs-subst">${portStore.getPort()}</span>/login`</span>, {
          <span class="hljs-attr">method</span>: <span class="hljs-string">"POST"</span>,
          <span class="hljs-attr">headers</span>: { <span class="hljs-string">"Content-Type"</span>: <span class="hljs-string">"application/json"</span> },
          <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ <span class="hljs-attr">username</span>: formData.<span class="hljs-property">username</span>, <span class="hljs-attr">password</span>: formData.<span class="hljs-property">password</span> })
        });

        <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> res.<span class="hljs-title function_">json</span>();
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"ç™»å½•å“åº”:"</span>, result);

        <span class="hljs-keyword">if</span> (result.<span class="hljs-property">ok</span>) {
          <span class="hljs-comment">// å¯ä»¥å­˜åˆ° Pinia æˆ– localStorage</span>
          userStore.<span class="hljs-title function_">setUser</span>(result.<span class="hljs-property">user</span>);
          router.<span class="hljs-title function_">replace</span>(<span class="hljs-string">"/home"</span>);
        } <span class="hljs-keyword">else</span> {
          message.<span class="hljs-title function_">error</span>(<span class="hljs-string">"ç™»å½•å¤±è´¥:"</span> + result.<span class="hljs-property">message</span>);
        }
      } <span class="hljs-keyword">catch</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯·æ±‚é”™è¯¯:"</span>, err);
      }
    } <span class="hljs-keyword">else</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(errors);
    }
  });
};

<span class="hljs-keyword">const</span> model = <span class="hljs-title function_">ref</span>({
  <span class="hljs-attr">leftLogo</span>: [
    {
      <span class="hljs-attr">url</span>: logo
    }
  ],
  <span class="hljs-attr">rightLogo</span>: [
    {
      <span class="hljs-attr">url</span>: logo
    }
  ]
});
<span class="hljs-comment">// è¯»å–é…ç½®æ–‡ä»¶</span>
<span class="hljs-keyword">const</span> <span class="hljs-title function_">readConfig</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">const</span> config = <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">readConfig</span>();
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"è¯»å–åˆ°çš„é…ç½®:"</span>, config);

    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">leftLogo</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">leftLogo</span> = [
        {
          <span class="hljs-attr">url</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">loadImageAsBase64</span>(config.<span class="hljs-property">leftLogo</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>)
        }
      ];
    }

    <span class="hljs-keyword">if</span> (config.<span class="hljs-property">rightLogo</span>[<span class="hljs-number">0</span>]?.<span class="hljs-property">name</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">rightLogo</span> = [
        {
          <span class="hljs-attr">url</span>: <span class="hljs-keyword">await</span> <span class="hljs-variable language_">window</span>.<span class="hljs-property">electronAPI</span>.<span class="hljs-title function_">loadImageAsBase64</span>(config.<span class="hljs-property">rightLogo</span>[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>)
        }
      ];
    }

    <span class="hljs-comment">// æ–‡æœ¬ç±»é…ç½®ï¼ˆç›´æ¥è¦†ç›–æ²¡é—®é¢˜ï¼‰</span>
    <span class="hljs-keyword">if</span> (config?.<span class="hljs-property">supportText</span>) {
      model.<span class="hljs-property">value</span>.<span class="hljs-property">supportText</span> = config.<span class="hljs-property">supportText</span>;
    }

    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"é…ç½®åçš„æ¨¡å‹:"</span>, model.<span class="hljs-property">value</span>);
  } <span class="hljs-keyword">catch</span> (err) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"è¯»å–é…ç½®æ–‡ä»¶å¤±è´¥:"</span>, err);
  }
};
<span class="hljs-title function_">readConfig</span>();
&lt;/script&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"flex h-full flex-col items-center justify-center"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-full"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"mb-4 flex items-center justify-evenly"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-[200px]"</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"model.leftLogo[0]?.url"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"logo"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"w-[200px]"</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">"model.rightLogo[0]?.url"</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">"logo"</span> /&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">main</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"loginBox relative h-[70%] w-full"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>
        <span class="hljs-attr">class</span>=<span class="hljs-string">"loginForm absolute top-[50%] left-[80%] w-[400px] translate-x-[-50%] translate-y-[-50%] rounded-[10px] bg-white p-[30px]"</span>
      &gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"formRef"</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">"formData"</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">"rules"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">n-form-item-row</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"ç”¨æˆ·å"</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"username"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥ç”¨æˆ·å"</span> <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">"formData.username"</span> /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">n-form-item-row</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">n-form-item-row</span> <span class="hljs-attr">label</span>=<span class="hljs-string">"å¯†ç "</span> <span class="hljs-attr">path</span>=<span class="hljs-string">"password"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">n-input</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"password"</span>
              <span class="hljs-attr">show-password-on</span>=<span class="hljs-string">"mousedown"</span>
              <span class="hljs-attr">placeholder</span>=<span class="hljs-string">"è¯·è¾“å…¥å¯†ç "</span>
              <span class="hljs-attr">v-model:value</span>=<span class="hljs-string">"formData.password"</span>
            /&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">n-form-item-row</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">n-form</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">n-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"primary"</span> <span class="hljs-attr">block</span> <span class="hljs-attr">secondary</span> <span class="hljs-attr">strong</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"login"</span>&gt;</span> ç™»å½• <span class="hljs-tag">&lt;/<span class="hljs-name">n-button</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"text-center whitespace-pre-line"</span>&gt;</span>
        {{ model.supportText }}
      <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.loginBox</span> {
  <span class="hljs-attribute">background-image</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">"@/assets/img/bg.jpg"</span>);
  <span class="hljs-attribute">background-size</span>: <span class="hljs-number">100%</span> <span class="hljs-number">100%</span>;
}
<span class="hljs-selector-class">.loginForm</span> {
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.5</span>);
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>
</code></pre>
<p>èœé¸Ÿè¿™ä¸ªä¸»è¦å°±æ˜¯è¯»å–é…ç½®æ–‡ä»¶ã€è¿æ¥æ•°æ®åº“è¯»å†™æ•°æ®ï¼Œæ²¡æœ‰å¾ˆå¤æ‚çš„æ“ä½œï¼Œæ‰€ä»¥åŸºæœ¬ä¸Šä½¿ç”¨åˆ°çš„electronå°±æ˜¯è¿™äº›ï¼</p>
<h2 data-id="heading-3">åœ¨ä¹Œç­å›¾ä¸Šæ‰“åŒ…</h2>
<p>ä¸Šä¸€ç¯‡æœ‰è¯´ï¼Œwindowsä¸Šæ‰“åŒ…æœ‰ç¼ºé™·ï¼Œæ‰€ä»¥è¿™é‡Œèœé¸Ÿç”¨çš„æ–¹å¼æ˜¯ï¼šè®©å…¬å¸ç»™å¼€ä¸€ä¸ªä¹Œç­å›¾çš„æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šé…ç½®ä¸€ä¸‹nodeç¯å¢ƒï¼Œå°†æœ¬åœ°ä»£ç ææˆå‹ç¼©åŒ…ä¼ åˆ°æœåŠ¡å™¨ï¼Œåœ¨æœåŠ¡å™¨ä¸Šè§£å‹åæ‰§è¡Œ<code>npm i</code>ï¼Œå¹¶æ‰“åŒ…ï¼</p>
<h3 data-id="heading-4">é…ç½®æœåŠ¡å™¨ä¸Šçš„nodeç¯å¢ƒ</h3>
<p>è¿™ä¸ªèœé¸Ÿå…¶å®ä¹Ÿæ˜¯ä¸€çªä¸é€šï¼Œä½†æ˜¯å¹¸å¥½æœ‰AIï¼Œé—®ä¸€ä¸‹æ€ä¹ˆåœ¨æœåŠ¡å™¨ä¸Šé…ç½®çš„nodeç¯å¢ƒï¼Œå°±å¯ä»¥å‡ºç°</p>
<p>ç¬¬ä¸€æ­¥ï¼š</p>
<p>åœ¨ä¹Œç­å›¾çš„æµè§ˆå™¨ä¸Šï¼Œè®¿é—®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fnodejs.org%2Fzh-cn%2Fdownload%255D" target="_blank" title="https://nodejs.org/zh-cn/download%5D" ref="nofollow noopener noreferrer">nodejs.org/zh-cn/downlâ€¦</a> ï¼Œå¹¶é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/10cd97604c7f4f8a9e08c55d73acc9cd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=T6gTp3Gu7QoQ1XYzBRGAMbeYegY%3D" alt="image.png" loading="lazy"/></p>
<p>ç¬¬äºŒæ­¥ï¼š</p>
<p>è¿›å…¥ä¸‹è½½ç›®å½•è§£å‹ï¼Œè§£å‹åå°†å…¶è½¬ç§»åˆ° <code>/usr/local/node</code> ç›®å½•</p>
<pre><code class="hljs language-shell" lang="shell">cd yourDwonloadPath
tar -xvf node-vxx.xx.xx-linux-x64.tar.xz
</code></pre>
<p>ç§»åŠ¨ç›®å½•</p>
<pre><code class="hljs language-shell" lang="shell">sudo mv node-vxx.xx.xx-linux-x64 /usr/local/node
</code></pre>
<p>ç¬¬ä¸‰æ­¥ï¼š</p>
<p>è®¾ç½®ç¯å¢ƒå˜é‡</p>
<pre><code class="hljs language-shell" lang="shell">vim ~/.bashrc
</code></pre>
<p>å¹¶æ·»åŠ </p>
<pre><code class="hljs language-shell" lang="shell">export NODE_HOME=/usr/local/node
export PATH=$NODE_HOME/bin:$PATH
</code></pre>
<p>è®©å…¶ç”Ÿæ•ˆ</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-built_in">source</span> ~/.bashrc
</code></pre>
<p>ç„¶åå°±å¯ä»¥ <code>node -v</code> å’Œ <code>npm -v</code> çœ‹çœ‹æ˜¯å¦çœŸçš„ç”Ÿæ•ˆäº†ï¼</p>
<h3 data-id="heading-5">è¿è¡Œ</h3>
<p>å°†æœ¬åœ°ä»£ç ï¼Œæ‰“åŒ…å¹¶ä¸Šä¼ åˆ°ä¹Œç­å›¾æœåŠ¡å™¨</p>
<p>è¿™é‡Œä¹Ÿæ˜¯ç›´æ¥é—®AIï¼ŒæœåŠ¡å™¨ä¸Šå¯ä»¥æ”¯æŒè§£å‹7zå—ï¼Ÿæ€ä¹ˆæ“ä½œï¼Œå°±å¯ä»¥å¾—åˆ°ï¼</p>
<p>è§£å‹ä¹‹å‰éœ€è¦ä¸‹è½½è§£å‹è½¯ä»¶</p>
<pre><code class="hljs language-shell" lang="shell">sudo apt update
sudo apt install -y p7zip-full
</code></pre>
<p>è§£å‹</p>
<pre><code class="hljs language-shell" lang="shell">cd ä½ ä¸Šä¼ çš„æ–‡ä»¶è·¯å¾„

è§£å‹åˆ°å½“å‰ç›®å½•
7z x file.7z

è§£å‹åˆ°æŒ‡å®šç›®å½•
7z x file.7z -o/home/p/output
</code></pre>
<p>ç„¶åæ‰§è¡Œ<code>npm i</code>ã€<code>npm run dev</code> çœ‹èƒ½ä¸èƒ½è¿è¡Œ</p>
<h4 data-id="heading-6">è¿è¡Œç™½å±</h4>
<p>è¿™é‡Œèœé¸Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œåæ­£è¿è¡Œæ—¶ä¼š<strong>å‡ºç°ç™½å±</strong>ï¼Œé—®GPTå‘ç°éœ€è¦ä¿®æ”¹ main.jsï¼Œå¤šåŠ ä¸Šè¿™å‡ è¡Œ</p>
<pre><code class="hljs language-js" lang="js">â€¦â€¦
<span class="hljs-keyword">const</span> { appraisalRecordListApi } = <span class="hljs-built_in">require</span>(<span class="hljs-string">"./api/appraisalRecordList.js"</span>);

<span class="hljs-comment">// æ‰“åŒ…å…¶å®è¿™å‡ ä¸ªé…ç½®æ— æ•ˆ â€”â€” å¦‚æœéœ€è¦åœ¨linuxç³»ç»Ÿä¸Šnpm run devè¿è¡Œï¼Œè¦åŠ ä¸Š â€”â€” åé¢æœ‰è¯´æ˜ï¼ˆè§ä¸‹æ–¹debåŒ…ï¼‰</span>
<span class="hljs-comment">// ç¦ GPUï¼ˆæ¶ˆæ‰å™ªéŸ³ï¼‰ -- æ–°å¢</span>
app.<span class="hljs-title function_">disableHardwareAcceleration</span>();
<span class="hljs-comment">// å…³ sandboxï¼ˆå…³é”®ï¼‰-- æ–°å¢</span>
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"disable-gpu"</span>);
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"no-sandbox"</span>);
app.<span class="hljs-property">commandLine</span>.<span class="hljs-title function_">appendSwitch</span>(<span class="hljs-string">"disable-setuid-sandbox"</span>);

<span class="hljs-comment">// å±è”½å®‰å…¨è­¦å‘Š</span>
â€¦â€¦
</code></pre>
<p>ä¿®æ”¹åï¼Œä¼šå‘ç°å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯è¿ä¸ä¸Šæ•°æ®åº“ï¼</p>
<p>è¿™æ—¶å€™æ˜¯å¯ä»¥çœ‹è§æŠ¥é”™çš„ï¼Œç›´æ¥å°†æŠ¥é”™ç»™GPTï¼Œå°±ä¼šå‘Šè¯‰æˆ‘ä»¬è¦ä¿®æ”¹ main.js ä¸­è¿æ¥æ•°æ®åº“çš„åœ°æ–¹ï¼Œä¸èƒ½å†ç”¨ipåœ°å€äº†ï¼Œè¦ç”¨æœ¬åœ°ipåœ°å€</p>
<pre><code class="hljs language-js" lang="js">â€¦â€¦
<span class="hljs-comment">// è¿æ¥æ•°æ®åº“</span>
<span class="hljs-keyword">let</span> apiServer;
<span class="hljs-keyword">let</span> apiPort;
<span class="hljs-keyword">let</span> mysqlPool;

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">startLocalApi</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> api = <span class="hljs-title function_">express</span>();
  api.<span class="hljs-title function_">use</span>(express.<span class="hljs-title function_">json</span>());

  <span class="hljs-comment">// âš ï¸ MySQL è¿æ¥æ± ï¼ˆåªåˆå§‹åŒ–ä¸€æ¬¡ï¼‰</span>
  mysqlPool = mysql.<span class="hljs-title function_">createPool</span>({
    <span class="hljs-attr">host</span>: <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-comment">// ä¿®æ”¹æˆè¿™ä¸ªæˆ–è€…localhost</span>
    <span class="hljs-attr">port</span>: <span class="hljs-number">13306</span>,
    <span class="hljs-attr">user</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“è´¦å·</span>
    <span class="hljs-attr">password</span>: <span class="hljs-string">"xxxx"</span>, <span class="hljs-comment">// æ•°æ®åº“å¯†ç </span>
    <span class="hljs-attr">database</span>: <span class="hljs-string">"barcode_for_medicinal"</span>, <span class="hljs-comment">// æ•°æ®åº“åç§°</span>
    <span class="hljs-attr">connectionLimit</span>: <span class="hljs-number">5</span> <span class="hljs-comment">// è¿æ¥æ± æœ€å¤§è¿æ¥æ•°</span>
  });

  api.<span class="hljs-title function_">use</span>(<span class="hljs-function">(<span class="hljs-params">req, res, next</span>) =&gt;</span> {
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Origin"</span>, <span class="hljs-string">"*"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Methods"</span>, <span class="hljs-string">"GET,POST,PUT,DELETE,OPTIONS"</span>);
    res.<span class="hljs-title function_">setHeader</span>(<span class="hljs-string">"Access-Control-Allow-Headers"</span>, <span class="hljs-string">"Content-Type"</span>);
    <span class="hljs-title function_">next</span>();
  });

  <span class="hljs-comment">// ç™»å½•æ¥å£</span>
  <span class="hljs-title function_">loginApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•æ·»åŠ æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordAddApi</span>(api, mysqlPool);
  <span class="hljs-comment">// é‰´å®šè®°å½•åˆ—è¡¨æ¥å£</span>
  <span class="hljs-title function_">appraisalRecordListApi</span>(api, mysqlPool);

  <span class="hljs-comment">// â­ éšæœºç«¯å£ï¼Œåªç›‘å¬æœ¬æœº</span>
  apiServer = api.<span class="hljs-title function_">listen</span>(<span class="hljs-number">0</span>, <span class="hljs-string">"127.0.0.1"</span>, <span class="hljs-function">() =&gt;</span> {
    apiPort = apiServer.<span class="hljs-title function_">address</span>().<span class="hljs-property">port</span>;
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"Local API started on port:"</span>, apiPort);
  });
}
</code></pre>
<p>æ•´ä¸ªåŠŸèƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨åï¼Œå°±å¯ä»¥åˆ°æ‰“åŒ…è¿™ä¸€æ­¥äº†ã€‚</p>
<h3 data-id="heading-7">æ‰“åŒ…</h3>
<p>éœ€è¦ä¿®æ”¹<code>package.json</code>ï¼ˆè¿™é‡Œå·²ç»æ˜¯èœé¸Ÿè¯•é”™å¤šæ¬¡ï¼Œå¹¶é—®GPTåä¿®æ”¹å¥½çš„æ–‡ä»¶äº†ï¼Œæ‰€ä»¥å°±ä¸ä¸€ä¸€åˆ—ä¸¾æ˜¯æ€ä¹ˆè¸©å‘çš„äº†ï¼Œåæ­£åŸºæœ¬æ˜¯æŠ¥é”™å°±é—®GPTï¼‰</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"barcode-medicinal"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"productName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"homepage"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"http://xxx.xxx.xxx.xx:5050/other/barcodeformedicinal.git"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¸€å®šè¦æœ‰ï¼Œä¸ç„¶ä¼šæŠ¥é”™(éšä¾¿æ”¾ä¸ªgitåœ°å€å³å¯)</span>
  <span class="hljs-attr">"main"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ElectronSrc/main.js"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"engines"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"node"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"^20.19.0 || &gt;=22.12.0"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"scripts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"dev"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron ."</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"dev:full"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run dev &amp; npm run dev:electron"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:vue"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build:electron"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"electron-builder"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm run build:vue &amp;&amp; npm run build:electron -- --linux"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"preview"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"vite preview"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"lint"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"eslint . --fix --cache"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"format"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"prettier --write src/"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"build"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"appId"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"com.example.barcodeformedicinal"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"productName"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"barcode-medicinal"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¸€å®šè¦ç”¨è‹±æ–‡ï¼Œwindowsä¸Šå¯ä»¥ä¸­æ–‡</span>
    <span class="hljs-attr">"asar"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"directories"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist_electron"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"files"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
      <span class="hljs-string">"dist/**"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"ElectronSrc/**"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-string">"package.json"</span>
    <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// è¿™æ ·å†™å¯ä»¥æ‰“åŒ…4ä¸ªå‡ºæ¥</span>
    <span class="hljs-attr">"linux"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deb"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"x64"</span><span class="hljs-punctuation">,</span>
            <span class="hljs-string">"arm64"</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"AppImage"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-comment">// å¯ä¸è¦</span>
        <span class="hljs-punctuation">{</span>
          <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rpm"</span><span class="hljs-punctuation">,</span>
          <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
            <span class="hljs-string">"x64"</span>
          <span class="hljs-punctuation">]</span>
        <span class="hljs-punctuation">}</span>
      <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Utility"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal Electron"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"maintainer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;youremail@example.com&gt;"</span> <span class="hljs-comment">// å¿…é¡»å†™ï¼Œå‡çš„ä¹Ÿè¡Œï¼Œä¸ç„¶æŠ¥é”™</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"dependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    â€¦â€¦
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"devDependencies"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    â€¦â€¦
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ‰§è¡Œ <code>npm run build</code>ï¼Œä½ ä¼šå¾—åˆ°ä¸‰ä¸ªæ–‡ä»¶ï¼Œæ‰“åŒ…åçš„æ–‡ä»¶ï¼Œåœ¨<code>package.json</code>ä¸­çš„è¿™é‡Œ</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"directories"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"output"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"dist_electron"</span>
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
<p>é‡Œé¢åº”è¯¥æœ‰å‡ ä¸ªä¹Œç­å›¾å¯ä»¥è¿è¡Œçš„æ–‡ä»¶</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2250c43301bb4806b4e0bd5c74a81b88~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=gq91E%2BGEva%2BH0%2Bw0qcLONQZ3r6Q%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-8">è¿è¡ŒAppImage</h4>
<p>è¿™é‡Œéœ€è¦é—®AIï¼Œå¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šï¼Œç”¨å‘½ä»¤è¡Œè¿è¡Œ<code>AppImage</code>æ–‡ä»¶ï¼Œæ‰§è¡Œåä¼šå‘ç°è¿è¡Œä¸èµ·æ¥ï¼ŒæŠŠæŠ¥é”™è´´ç»™GPTï¼Œå°±èƒ½å¾—åˆ°å¦‚ä¸‹å›ç­”ã€‚</p>
<p>å…¶ä¸­<code>AppImage</code>æ–‡ä»¶è¿è¡Œéœ€è¦ä¸‹è½½<code>libfuse2</code></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d00b923cf6de4e1484d0c8360bf09382~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=oS0RoLzFqnbv8FEomreSd%2Bz5dfE%3D" alt="image.png" loading="lazy"/></p>
<pre><code class="hljs language-shell" lang="shell">sudo apt update
sudo apt install libfuse2

cd dist_electron
chmod +x xxxx.AppImage
./xxxx.AppImage
</code></pre>
<p>GPTç»™äº†ç¬¬äºŒç§æ–¹å¼ï¼Œä½†æ˜¯èœé¸Ÿè¯•äº†ä¸è¡Œ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2e6e62378904459a17ed497a702a01a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=oxpM6NIdEPczNh%2Bcxu9Jq6KPms8%3D" alt="image.png" loading="lazy"/></p>
<h4 data-id="heading-9">è¿è¡Œdeb</h4>
<p>è¿™é‡Œä¹Ÿæ˜¯ç›´æ¥é—®GPTï¼Œå¦‚ä½•åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œ<code>deb</code>æ–‡ä»¶</p>
<pre><code class="hljs language-cmd" lang="cmd">sudo dpkg -i dist_electron/barcode-medicinal_1.0.0_amd64.deb
</code></pre>
<p>å°±ä¼šè‡ªåŠ¨å¸®ä½ å®‰è£…ï¼Œ<em>å¦‚æœçœ‹åˆ° ä¾èµ–é”™è¯¯ï¼Œåˆ™ç»§ç»­æ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼ˆä¸€èˆ¬ä¸ä¼šï¼‰</em></p>
<pre><code class="hljs language-cmd" lang="cmd">sudo apt -f install
</code></pre>
<h4 data-id="heading-10">å¸è½½</h4>
<p>å®‰è£…åæƒ³åˆ é™¤ï¼Ÿ</p>
<p>è¿™é‡Œè¿˜æŒºå¤æ‚ï¼Œä¸åŒçš„å®‰è£…æ–¹å¼ï¼Œåˆ é™¤ä¸ä¸€æ ·ï¼Œè¿™é‡Œèœé¸Ÿåªç»™å‡ºç”¨<code>sudo dpkg</code>å®‰è£…çš„å¸è½½æ–¹æ³•ï¼</p>
<pre><code class="hljs language-shell" lang="shell">ä¸€èˆ¬æ‰§è¡Œè¿™ä¸€ä¸ªå°±è¡Œäº†
sudo apt purge ä½ çš„åº”ç”¨åï¼ˆå°±æ˜¯package.jsonä¸­buildä¸­çš„productNameï¼‰

æ¸…ç†åƒåœ¾ â€”â€” å¯ä¸æ‰§è¡Œ
sudo apt autoremove
sudo apt autoclean

ç¡®ä¿å¸è½½
dpkg -l | grep barcodeï¼ˆæ²¡æœ‰è¾“å‡ºå°±æ˜¯æ­£ç¡®çš„ï¼‰
</code></pre>
<h5 data-id="heading-11">æ§½ç‚¹</h5>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªæ§½ç‚¹ï¼Œä½ å°±ç®—æ‰§è¡Œäº†æ¸…ç†åƒåœ¾è¿™æ­¥æ“ä½œï¼Œå…¶å®ç”¨æˆ·æ•°æ®è¿˜æ˜¯ä¼šå­˜åœ¨ï¼Œéœ€è¦æ‰‹åŠ¨åˆ é™¤</p>
<pre><code class="hljs language-shell" lang="shell">cd ~/.config

ll

cd ä½ çš„è½¯ä»¶å
</code></pre>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0e838764bd54ad1b148d407c245549e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=VsR4kb4og2UJBMYaL4P%2BMyFKLCI%3D" alt="image.png" loading="lazy"/></p>
<p>è‡³äºæ›´æ·±å±‚çš„èœé¸Ÿå°±æ²¡æäº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/80a021a26c6343e2a9051f738d81cf7d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=0vE4vZe5Q4%2F7ENKRmUTmRTiR0A4%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">æ‰“åŒ…ç™½å±</h3>
<p>è¿™é‡Œä¸ç®¡æ˜¯å“ªä¸€ç§ï¼Œæ‰“åŒ…åè¿è¡Œå‡ºæ¥éƒ½æ˜¯ç™½å±ï¼</p>
<p>èœé¸Ÿå®åœ¨æ˜¯æ²¡æœ‰åŠæ³•ï¼ŒGPTæ²¡åŠæ³•è¯»å–æ•´ä¸ªé¡¹ç›®ï¼Œæ‰€ä»¥ç”¨<code>Trae</code>æŸ¥çœ‹æˆ‘çš„æ•´ä¸ªé¡¹ç›®ã€‚</p>
<p>ä¸‹é¢å°±æ˜¯Traeåœ¨æŸ¥çœ‹å®Œæˆ‘çš„é¡¹ç›®åï¼Œç»“åˆæˆ‘è¯´æ‰“åŒ…åè¿è¡Œå‡ºæ¥æ˜¯ç™½å±ç»™å‡ºçš„ä»£ç ï¼ˆ<strong>å®Œå…¨ä¸çŸ¥é“åŸå› </strong>ï¼‰</p>
<pre><code class="hljs language-shell" lang="shell">sudo apt install -y libnss3 libatk-bridge2.0-0 libxss1 libgbm-dev libx11-xcb1 libxcomposite1 libxcursor1 libxdamage1 libxi6 libxtst6 libxrandr2 libpangocairo-1.0-0 libgtk-3-0 libdrm2 libxkbcommon0 libwayland-client0 libwayland-server0

./barcode-medicinal-1.0.0.AppImage --disable-dev-shm-usage --no-sandbox --disable-gpu
</code></pre>
<p>ç»“æœçœŸæˆåŠŸè¿è¡Œå‡ºæ¥äº†ï¼Œä½†æ˜¯ç”¨æˆ·è‚¯å®šä¸ä¼šè¿™æ ·è¿è¡Œå•Šï¼</p>
<p>æ‰€ä»¥è¿˜æ˜¯è¦çœ‹<code>deb</code>ï¼Œæ€ä¹ˆæï¼Ÿ</p>
<h3 data-id="heading-13">debåŒ…</h3>
<p>ä¸€å¼€å§‹èœé¸Ÿï¼ŒæŒ‰ç…§GPTè¯´çš„åŠ ä¸Šäº†</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/294bc3a963364da7899e034a6957e7ec~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=b9zKJ%2BIrP%2FskhoQv04%2BHZZ6T%2BAg%3D" alt="image.png" loading="lazy"/></p>
<p>å´æ²¡æœ‰ä»»ä½•æ•ˆæœï¼Œåé¢æ‰å‘ç°åœ¨main.jsä¸ŠåŠ ï¼Œåœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­ä¼šç›´æ¥è¢«å¿½ç•¥ï¼Œåº”è¯¥å†™åœ¨<code>package.json</code>ä¸­çš„linuxé…ç½®é‡Œï¼Œæ‰“åŒ…å¥½åå†æŒ‰ç…§ä¸Šé¢çš„debè¿è¡Œæ–¹å¼å°±å¯ä»¥è¿è¡Œä¸ç™½å±äº†ï¼</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-attr">"linux"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"deb"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"x64"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-string">"arm64"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"AppImage"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-comment">// å¯ä¸è¦</span>
    <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"target"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"rpm"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"arch"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
        <span class="hljs-string">"x64"</span>
      <span class="hljs-punctuation">]</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"executableArgs"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span>
    <span class="hljs-string">"--no-sandbox"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-setuid-sandbox"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-dev-shm-usage"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-string">"--disable-gpu"</span>
  <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"category"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Utility"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"description"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Barcode Medicinal Electron"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"maintainer"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Your Name &lt;youremail@example.com&gt;"</span> <span class="hljs-comment">// å¿…é¡»å†™ï¼Œå‡çš„ä¹Ÿè¡Œï¼Œä¸ç„¶æŠ¥é”™</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-14">AppImageåŒ… â€”â€” éªšæ“ä½œ</h3>
<p>ä¸€å¼€å§‹èœé¸Ÿæ˜¯è¯•çš„debä¸è¡Œï¼Œçªå‘å¥‡æƒ³ï¼Œç›´æ¥è‡ªå·±åˆ›å»ºä¸€ä¸ªæ¡Œé¢å¿«æ·é”®ï¼Œç„¶åè¿è¡Œé¢çš„å‘½ä»¤ä¸å°±è¡Œäº†ï¼Ÿ</p>
<p>æ‰€ä»¥å°±é—®äº†GPTï¼Œç„¶åGPTç»™å‡ºçš„ä¸€æ­¥ä¸€æ­¥çš„æµç¨‹æ¯”è¾ƒå¤æ‚ï¼Œä¸”vimä¹Ÿä¸æ˜¯å¾ˆä¼šç”¨ï¼Œæ‰€ä»¥ç›´æ¥è®©GPTç»™äº†ä¸€ä¸ªä¸€æ¬¡æ€§è¾“å…¥å°±è¡Œçš„å‘½ä»¤ï¼ˆéœ€è¦å¸¦ä¸Šè‡ªå·±çš„åŒ…åã€è·¯å¾„ï¼Œä¸ç„¶GPTç»™çš„è¿˜æ˜¯ä¸èƒ½ç›´æ¥copyï¼‰</p>
<pre><code class="hljs language-shell" lang="shell"><span class="hljs-meta prompt_"># </span><span class="bash">åˆ›å»º .desktop æ–‡ä»¶</span>
cat &gt; ~/.local/share/applications/barcode-medicinal.desktop &lt;&lt;EOL
[Desktop Entry]
Name=Barcode Medicinal
Comment=Barcode Medicinal App
Exec=/home/bnzycjd/xxx/dist_electron/barcode-medicinal-1.0.0.AppImage --disable-dev-shm-usage --no-sandbox --disable-gpu
Icon=/home/bnzycjd/Pictures/logo.png
Terminal=false
Type=Application
Categories=Utility;
StartupWMClass=barcode-medicinal
EOL
<span class="hljs-meta prompt_">
# </span><span class="bash">èµ‹äºˆæ‰§è¡Œæƒé™</span>
chmod +x ~/.local/share/applications/barcode-medicinal.desktop
<span class="hljs-meta prompt_">
# </span><span class="bash">æ ‡è®°ä¸ºå¯ä¿¡ä»»</span>
gio set ~/.local/share/applications/barcode-medicinal.desktop metadata::trusted true
<span class="hljs-meta prompt_">
# </span><span class="bash">åˆ·æ–°åº”ç”¨èœå•</span>
update-desktop-database ~/.local/share/applications
</code></pre>
<p>è¿™ä¸ªiconå¦‚æœä¸€å¼€å§‹æ²¡å†™ï¼Œåé¢å†™äº†ä¹Ÿå¯èƒ½åŠå¤©ä¸åˆ·æ–°ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸€ä¸ªéªšæ“ä½œï¼Œå°±æ˜¯åœ¨Show Appsé‡Œå³é”®å…ˆå°†å…¶Pin to Dashï¼Œç„¶åå†å¼„å›æ¥å°±å¥½äº†ï¼</p>
<h3 data-id="heading-15">é—®GPTä¸ºä»€ä¹ˆï¼Ÿ</h3>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c928ae47e2374694a74291f2f5882166~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=Vx00c9thYM%2Bi5IiuAUorwIXdSug%3D" alt="image.png" loading="lazy"/></p>
<p>åæ­£èœé¸Ÿæ„Ÿè§‰æ˜¯æœåŠ¡å™¨é‡Œé¢ä¸œè¥¿ä¸å…¨ï¼Œæ‰€ä»¥å¯¼è‡´éœ€è¦è¿™äº›æ“ä½œï¼Œæ„Ÿè§‰å’Œä»£ç æ²¡å•¥å…³ç³»ï¼</p>
<h3 data-id="heading-16">æ€»ç»“</h3>
<p>åˆ°æ­¤ï¼Œæ•´ä¸ªé¡¹ç›®ç®—æ˜¯å½»åº•ç»“æŸï¼Œå…¨ç¨‹æˆ‘åªè´Ÿè´£ç»™AIæ‰“ä¸‹æ‰‹ï¼Œä¸»è¦çš„Electroné€»è¾‘å…¨éƒ¨ç”±AIç”Ÿæˆã€‚è¿™ç§å¼€å‘æ–¹å¼ï¼Œæ›´åƒæ˜¯ä¸€ç§ã€Œäººä¸ AI çš„åä½œæ¨¡å¼ã€ï¼šæˆ‘ä¸æ–­å‘ AI è§£é‡Šä¸šåŠ¡èƒŒæ™¯ã€æ‹†è§£éœ€æ±‚å¹¶æ ¡æ­£å®ç°æ–¹å‘ï¼Œç”±å®ƒå®Œæˆ Electron å±‚é¢çš„å…·ä½“å®ç°ï¼›è€Œå‰ç«¯éƒ¨åˆ†ï¼Œç”±äºæˆ‘æœ¬èº«æ¯”è¾ƒç†Ÿæ‚‰ï¼Œä¸”ç•Œé¢é€»è¾‘ç›¸å¯¹ç®€å•ï¼Œä»ç„¶ä¸»è¦ç”±æˆ‘è‡ªå·±è´Ÿè´£ã€‚</p>
<p>å›å¤´çœ‹è¿™ä¸€å¹´çš„å˜åŒ–ï¼Œåªèƒ½è¯´ AI çš„æˆé•¿é€Ÿåº¦æ—¢è®©äººæ„Ÿåˆ°å‹åŠ›ï¼Œåˆå¾ˆéš¾ä¸ä¸ºä¹‹å…´å¥‹ã€‚</p>
<p>åœ¨å®é™…å®è·µä¸­ï¼ŒAI åœ¨ä»£ç ç¼–å†™ã€ä»£ç æç¤ºã€Bug æ’æŸ¥ä»¥åŠé—®é¢˜å®šä½ç­‰æ–¹é¢ï¼Œç¡®å®ä¸ºå¼€å‘è€…å¸¦æ¥äº†æå¤§çš„ä¾¿åˆ©ã€‚æ— è®ºæ˜¯å¿«é€Ÿç”Ÿæˆå¯è¿è¡Œçš„ç¤ºä¾‹ä»£ç ï¼Œè¿˜æ˜¯åœ¨é‡åˆ°å¤æ‚æŠ¥é”™æ—¶ç»™å‡ºæ¸…æ™°çš„æ’æŸ¥æ€è·¯ï¼Œéƒ½æ˜¾è‘—ç¼©çŸ­äº†ä»â€œé—®é¢˜å‡ºç°â€åˆ°â€œé—®é¢˜è§£å†³â€çš„æ—¶é—´æˆæœ¬ã€‚</p>
<p>ä»æˆ‘çš„æ„Ÿå—æ¥è¯´ï¼ŒAI å¹¶ä¸æ˜¯åœ¨å–ä»£å¼€å‘è€…ï¼Œè€Œæ˜¯åœ¨æŒç»­ä»‹å…¥æˆ‘ä»¬çš„æ€è€ƒè¿‡ç¨‹ â€”â€” ç”šè‡³åœ¨æŸäº›æ—¶å€™ï¼Œè®©äººäº§ç”Ÿä¸€ç§â€œè‡ªå·±è¶Šæ¥è¶Šä¸ç”¨åŠ¨è„‘å­â€çš„é”™è§‰ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f7f73bc244c4d5896134488840747fb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUEJpdFc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768292808&amp;x-signature=d7f4RKxX0kgAy3BeFQu0C2uxd1I%3D" alt="image.png" loading="lazy"/></p>
<p>ä½†å†·é™ä¸‹æ¥ä¼šå‘ç°ï¼ŒAI çœŸæ­£å–ä»£çš„ï¼Œå¾€å¾€åªæ˜¯é‚£äº›ç®€å•ã€é‡å¤ã€ç¼ºä¹ä¸Šä¸‹æ–‡ç†è§£çš„é€»è¾‘ä¹¦å†™è€…ï¼›å®ƒå¹¶ä¸èƒ½æ·˜æ±°ä¸šåŠ¡æ¢³ç†è€…ã€éœ€æ±‚æ²Ÿé€šè€…å’Œç³»ç»Ÿæ¶æ„çš„æ­å»ºè€…ã€‚</p>
<p>ä»æˆ‘è®©AIå†™electronçš„è¯»å–æ–‡ä»¶ä»£ç ã€å†™æ¥å£ä»£ç ï¼ŒåŸºæœ¬éƒ½æ˜¯ä¸€æ¬¡å°±è¿‡å¯ä»¥çœ‹å‡ºï¼Œåç«¯çš„CRUDä»”æ›´å®¹æ˜“è¢«æ›¿æ¢ï¼Œè¿™äº›å›ºå®šé€»è¾‘ï¼Œå…¶å®AIå¯ä»¥å¾ˆå¥½çš„å†™å‡ºæ¥äº†ï¼Œå‰ç«¯æ„Ÿè§‰åªè¦ç•Œé¢å¤æ‚ï¼Œé‚£ä¹ˆä¸å¯æ›¿ä»£æ€§è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ï¼</p>
<p>ä»ä½¿ç”¨ Trae ç”Ÿæˆå¤æ‚é¡¹ç›®çš„è¿‡ç¨‹ä¹Ÿèƒ½çœ‹å‡ºæ¥ï¼šæ— è®ºTraeå…¬å…±æ–¹æ³•å†™å¾—å¤šå®Œå–„ã€GPTå†™çš„æ–‡ä»¶è¯»å–é€»è¾‘å¤šä¹ˆæ ‡å‡†ï¼ŒAI éƒ½æ— æ³•ç›´æ¥äº¤ä»˜ä¸€ä¸ªçœŸæ­£å¯è¿è¡Œã€ç¬¦åˆä¸ªæ€§åŒ–éœ€æ±‚çš„å®Œæ•´ç³»ç»Ÿï¼Œæ›´æ— æ³•ç‹¬ç«‹å®Œæˆå¤æ‚ä¸šåŠ¡å’Œç•Œé¢å±‚é¢çš„è®¾è®¡ï¼Œä½†æ˜¯ä¹Ÿç¡®å®è®©æŠ€æœ¯è¶Šæ¥è¶Šä¸å€¼é’±äº†ã€‚</p>
<p>å¯ä»¥çœ‹æˆ‘çš„è¿™ä¸¤ç¯‡æ–‡ç« </p>
<ol>
<li><a href="https://juejin.cn/post/7472044324965761062" target="_blank" title="https://juejin.cn/post/7472044324965761062">Trae åˆä½“éªŒ - vscodeè¦è¢«æ›¿ä»£äº†ï¼å¼ºæ¨Traeï¼</a></li>
<li><a href="https://juejin.cn/post/7572340344509251610" target="_blank" title="https://juejin.cn/post/7572340344509251610">å‡çº§äº†SOLOï¼Œå¯¹SOLOçš„ä¸€äº›å»ºè®®ï¼ğŸ‘SOLOçœŸçš„å¾ˆä¸é”™ï¼</a></li>
</ol>
<p>éƒ½æ˜¯Traeæ— æ³•ç”Ÿæˆæ•´ä½“å¤æ‚é¡¹ç›®ï¼Œä½†æ˜¯Traeä¹Ÿæœ‰å¾ˆå¤§çš„ä¼˜ç‚¹ï¼Œå°±æ˜¯å¯ä»¥å…¨å±€è¯»å–æ•´ä¸ªé¡¹ç›®ï¼Œæ•´ä½“åˆ†æï¼Œæ˜¯copilotã€GPTæ— æ³•å®Œæˆçš„ï¼Œcursoræˆ–è®¸æ›´å¼ºï¼Œä½†æ˜¯æ”¶è´¹å°±æŒ¡ä½äº†å¾ˆå¤šäººï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[åˆ«å†çœ‹ç¢ç‰‡çš„Cocoså¼€å‘æ•™ç¨‹äº†ï¼Œè¿™ä»½å¯èƒ½æ˜¯å…¨ç½‘æœ€ç»†æ‰“èºä¸æ•™ç¨‹]]></title>    <link>https://juejin.cn/post/7591799107486007306</link>    <guid>https://juejin.cn/post/7591799107486007306</guid>    <pubDate>2026-01-06T02:05:12.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591799107486007306" data-draft-id="7591801024009093129" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="åˆ«å†çœ‹ç¢ç‰‡çš„Cocoså¼€å‘æ•™ç¨‹äº†ï¼Œè¿™ä»½å¯èƒ½æ˜¯å…¨ç½‘æœ€ç»†æ‰“èºä¸æ•™ç¨‹"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T02:05:12.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¿å…ƒç¨‹åºå‘˜"/> <meta itemprop="url" content="https://juejin.cn/user/1972988307323236"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            åˆ«å†çœ‹ç¢ç‰‡çš„Cocoså¼€å‘æ•™ç¨‹äº†ï¼Œè¿™ä»½å¯èƒ½æ˜¯å…¨ç½‘æœ€ç»†æ‰“èºä¸æ•™ç¨‹
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1972988307323236/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¿å…ƒç¨‹åºå‘˜
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T02:05:12.000Z" title="Tue Jan 06 2026 02:05:12 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f730b31565934586ada7874a18a2d9b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=E1OGf8lafLAM3fCSqpu0klOXGqs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">å¼•è¨€</h2>
<p><strong>å“ˆå–½å¤§å®¶å¥½</strong>ï¼Œä»Šå¤©ç¬”è€…åšäº†ä¸€ä¸ªé‡è¦å†³å®šï¼š</p>
<blockquote>
<p><strong>æŠŠæˆ‘çš„æ‰“èºä¸æ¸¸æˆæ ¸å¿ƒç©æ³•ï¼ˆæºç +æ•™ç¨‹ï¼‰å…¨éƒ¨åˆ†äº«ç»™å¤§å®¶ã€‚</strong></p>
</blockquote>
<p>**ã€Šæ‰“èºä¸ã€‹**è¿™æ¬¾æ¸¸æˆï¼ŒæˆåŠŸæŠŠç°è±¡çº§çš„â€œè¿›å‚â€æ¦‚å¿µï¼Œä»ç½‘ç»œçƒ­æ¢—æ‹‰åˆ°äº†æ¸¸æˆä¸­å»ã€‚</p>
<p><strong>å®ƒé€šè¿‡</strong>ç®€å•ã€è§£å‹çš„ç©æ³•ï¼Œè®©å°ä¼™ä¼´ä»¬å¯ä»¥<strong>ä¸Šç­æ‘¸é±¼æ—¶æ‰“ã€ä¸‹ç­ä¼‘é—²æ—¶æ‰“ã€ç¡è§‰å‰å†æ‰“ä¸¤æŠŠ</strong>ï¼Œæˆä¸ºäº†ä¸€æ¬¾éå¸¸å—æ¬¢è¿çš„è½»é‡çº§æ¸¸æˆã€‚</p>
<p><strong>ç›®å‰</strong>åœ¨å°æ¸¸æˆç•…ç©æ¦œä¸Šï¼Œä¾æ—§å¯ä»¥çœ‹åˆ°å®ƒåŠå…¶å„ç§å˜ç§ç©æ³•çš„èº«å½±ï¼Œè¯æ˜äº†å…¶æ ¸å¿ƒæœºåˆ¶çš„ç”Ÿå‘½åŠ›ã€‚</p>
<p><strong>è¨€å½’æ­£ä¼ </strong>ï¼Œä»Šå¤©ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹å¦‚ä½•åœ¨<strong>Cocos Creator3.8.7ä¸­å®ç°æ‰“èºä¸æ¸¸æˆçš„æ ¸å¿ƒç©æ³•</strong>ï¼Œå­¦åºŸçš„å°ä¼™ä¼´å¸®å¿™ç‚¹ä¸ªèµå’Œçˆ±å¿ƒï¼Œè®©æ›´å¤šçš„å°ä¼™ä¼´ä¹Ÿå­¦åºŸã€‚</p>
<p><strong>æœ¬æ–‡æºå·¥ç¨‹åœ¨æ–‡æœ«è·å–ï¼Œå°ä¼™ä¼´ä»¬è‡ªè¡Œå‰å¾€ã€‚</strong></p>
<h2 data-id="heading-1">ä¸€. èºä¸</h2>
<p><strong>èºä¸</strong>æ˜¯å¯äº¤äº’çš„æ ¸å¿ƒç‰©ä»¶ã€‚å®ƒçš„å®ç°éœ€è¦åŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š</p>
<h3 data-id="heading-2">1.ç‰©ç†å±æ€§</h3>
<p><strong>éœ€è¦</strong>æ·»åŠ  <strong>RigidBody2D</strong>ï¼ˆåˆšä½“ï¼‰å’Œ <strong>CircleCollider2D</strong>ï¼ˆç¢°æ’ä½“ï¼‰ï¼Œä½¿å…¶èƒ½äº§ç”Ÿç‰©ç†æ•ˆæœä¸æœ¨æ¿å‘ç”Ÿç¢°æ’ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2b96de45bd6b4f058900b877ff2a297e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=RMJ7ualU94dzYf09U%2FVKcOxExgk%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-3">2.æŠ“å–ä¸ç§»åŠ¨</h3>
<p><strong>æŠ“å–</strong>çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œåˆ†åˆ«å‡†å¤‡æŒ‰ä¸‹å’Œæ‹”èµ·ä¸¤ç§çŠ¶æ€çš„å›¾ç‰‡ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/82c7103570b84eaf93eb0ed6da80b23d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=UCY449gM%2F%2BBvJzod4wE04QpnBfs%3D" alt="" loading="lazy"/></p>
<p><strong>é€šè¿‡</strong>ç›‘å¬ç‚¹å‡»äº‹ä»¶ï¼Œåˆ†åˆ«åœ¨æŒ‰ä¸‹å’Œæ‹”èµ·çš„çŠ¶æ€ä¸‹éšè—å’Œæ˜¾ç¤ºå¯¹åº”çš„å›¾ç‰‡å³å¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27bfcf8f1db84b9c82878631e90bb14e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=LFxs3%2F1m6Lfup2SKaRfHpXT1JCo%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/67741b99cd6349ba9a8f2aef8f87633d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=OE%2Ff3gbqZl7Pcl7S18K4o2HHq0s%3D" alt="" loading="lazy"/></p>
<p><strong>ç§»åŠ¨</strong>çš„å®ç°ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå…ˆæ‹”èµ·èºä¸ï¼Œç„¶åç‚¹å‡»å¯¹åº”æ²¡æœ‰é˜»æŒ¡çš„èºä¸å­”æ—¶ï¼ŒæŒ‰ä¸‹èºä¸å¹¶ä¸”ç§»åŠ¨åˆ°æ–°çš„å­”ä½ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fe789cf1797242d0a5551fb67e123cb4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=4lJt6OQiyKWUBStyedxcMXzL0QQ%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœå¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f62f3a7ea91e4003a589a2ecbdd91a71~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=yzX7Vcl4wf3IC%2Fk%2Bd4CFi7ejPUU%3D" alt="" loading="lazy"/></p>
<p><strong>ç§»åŠ¨</strong>çš„éš¾ç‚¹åœ¨äºåŠ¨æ€ç§»é™¤æ—§å…³èŠ‚ï¼Œç§»åŠ¨åˆ°æ–°å­”ä½ç”Ÿæˆæ–°çš„å…³èŠ‚ï¼Œä¸‹é¢æˆ‘ä»¬ä¼šåœ¨å…³èŠ‚ä¸­ä»‹ç»ã€‚</p>
<h3 data-id="heading-4">3.åŠ¨ç”»æ•ˆæœ</h3>
<p><strong>å½“</strong>èºä¸æ— æ³•ç§»åŠ¨æ—¶æ’­æ”¾éœ‡åŠ¨åŠ¨ç”»ï¼Œç»™äºˆç”¨æˆ·è§†è§‰åé¦ˆã€‚éœ‡åŠ¨æ•ˆæœæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>Tween</code>åŠ¨ç”»å®ç°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/262bab3c858743f6bf04fb0ba4f2e4a2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=Cm3CvWUINqmBYBDk2QPhv%2Fd2lrA%3D" alt="" loading="lazy"/></p>
<p><strong>æ•ˆæœå¦‚ä¸‹:</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/961d5fa82b86403aa260665b68f59088~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=ogZeRmbIlkrgdO8hYuuROCohoZk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">äºŒ.èºä¸å­”</h2>
<p><strong>èºä¸å­”</strong>æ˜¯èºä¸çš„â€œå½’å®¿â€ï¼Œé€šå¸¸å›ºå®šåœ¨å¢™ä¸Šã€‚</p>
<p><strong>å…³äºèºä¸å­”</strong>ï¼Œæœ€ä¸»è¦æ˜¯è¦çŸ¥é“ç‚¹å‡»æ—¶ï¼Œç‚¹å‡»çš„æ˜¯å“ªä¸ªå­”ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å­”æ·»åŠ ç‚¹å‡»äº‹ä»¶å³å¯ã€‚</p>
<p><strong>ä½†æ˜¯</strong>å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå­”ä¼šè¢«æœ¨æ¿é®æŒ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€‰æ‹©éå†æ‰€æœ‰å­”é€šè¿‡è·ç¦»æ‰¾åˆ°æˆ‘ä»¬éœ€è¦çš„å­”ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/badf376da7c14dfb8e2710900b82efae~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=JSR1KjWU%2FpIkro8MB1JWH3O5Vug%3D" alt="" loading="lazy"/></p>
<p><strong>æ­¤å¤–</strong>ï¼Œæˆ‘ä»¬æƒ³è¦åˆ¤æ–­æœ¨æ¿ä¸Šçš„å­”æ˜¯å¦é®æŒ¡èºä¸å­”ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¤ä¸ªåœ†çš„åœ†å¿ƒè·ç¦»åœ¨åˆé€‚çš„é˜ˆå€¼èŒƒå›´å†…è¿›è¡Œåˆ¤æ–­ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6770b9ea69bc41acb79d67e1b83b5ce4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=YpOQ3DUu%2Bf6xT7%2BhUuD80U9Hqi4%3D" alt="å›¾ä¸­è“çº¿æ®µçš„è·ç¦»" loading="lazy"/></p>
<p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/117747c432f3435b9dcafb52cbaf54a3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=YJsG9KTNywW2hQmpeHt%2BJRP3nso%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ä¸‰.æœ¨æ¿</h2>
<p><strong>æœ¨æ¿</strong>æ˜¯æ•´ä¸ªæ¸¸æˆçš„æ‰¿è½½åŸºç¡€ï¼Œä¸Šé¢é€šå¸¸ä¼šæœ‰è‹¥å¹²ä¸ªå­”ï¼Œèºä¸é€šè¿‡å®ƒæŠŠæœ¨æ¿å›ºå®šåœ¨å¢™ä¸Šã€‚</p>
<h3 data-id="heading-7">1.ç‰©ç†å±æ€§</h3>
<p><strong>å’Œ</strong>èºä¸ä¸€æ ·ï¼Œéœ€è¦æ·»åŠ  <strong>RigidBody2D</strong>ï¼ˆåˆšä½“ï¼‰å’Œ <strong>BoxCollider2D</strong>ï¼ˆç¢°æ’ä½“ï¼‰ï¼Œä½¿å…¶èƒ½äº§ç”Ÿç‰©ç†æ•ˆæœã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/61879f16e0e047e1862c1ba7299a99e9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=Yjp%2F1DC%2FCAQebx3Xb2RTAu8A8f0%3D" alt="" loading="lazy"/></p>
<h3 data-id="heading-8">2.ä½ç½®åˆ¤æ–­</h3>
<p><strong>æˆ‘ä»¬</strong>çš„èºä¸æ˜¯å¦èƒ½ç§»åŠ¨åˆ°æŸä¸ªèºä¸å­”ï¼Œå¾ˆå¤§å±‚åº¦å–å†³äºå­”æ˜¯å¦è¢«æœ¨æ¿é˜»æŒ¡ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è¿›è¡Œåˆ¤æ–­ã€‚</p>
<p><strong>é¦–å…ˆ</strong>æ˜¯æœ¨æ¿ä¸å­”çš„ä½ç½®åˆ¤æ–­ã€‚éœ€è¦åˆ†æˆ<code>2</code>æ­¥åˆ¤æ–­ï¼š</p>
<ul>
<li><strong>1.åˆ¤æ–­å­”ä¸æœ¨æ¿æ˜¯å¦ç›¸äº¤</strong></li>
<li><strong>2.åˆ¤æ–­å­”æ˜¯å¦åœ¨æœ¨æ¿å†…</strong></li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4653483dd7514c0c8067ed1fa2ab4a99~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=iVCkhJIKNGBP8wym8H5FtI6h23E%3D" alt="1æ¿å¤–ï¼Œ2ç›¸äº¤ï¼Œ3æ¿å†…" loading="lazy"/></p>
<p><strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/28e479ee9e5b4c1ab7aef72c878e4e87~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=4wSvCzAU0F%2FRcNoBDj8SNIho8RE%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">å››.å…³èŠ‚</h2>
<p><strong>åœ¨Cocosæ¸¸æˆå¼€å‘ä¸­çš„ç‰©ç†ç³»ç»Ÿ</strong>ï¼Œæƒ³è¦ä¸€ä¸ªç‰©ä½“å›´ç»•æŸä¸ªç‚¹æ—‹è½¬ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é“°é“¾å…³èŠ‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/66ec6cb8bb924d90b759835a816b540f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=LtQgeGqCIBC16ad2iGK5f%2Ffx%2BfE%3D" alt="æ¥æºäºCocoså®˜æ–¹æ–‡æ¡£" loading="lazy"/></p>
<p><strong>å…³äº</strong>å…³èŠ‚çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦æŒ‡å®šå®ƒè¿æ¥çš„èŠ‚ç‚¹ï¼Œä»¥åŠèŠ‚ç‚¹çš„ç›¸å¯¹ä½ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c51b8aa1599749e795b20bcd4e450333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=7kTHcUFrhVDyBJebjv3rL1Jmucw%3D" alt="" loading="lazy"/></p>
<p><strong>ä¾‹å¦‚</strong>ï¼Œåœ¨æœ¨æ¿ä¸Šï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ ä¸¤ä¸ªå…³èŠ‚èŠ‚ç‚¹ï¼Œæ–¹ä¾¿åœ¨ä»£ç ä¸­æ‰¾åˆ°æŒ‡å®šçš„å…³èŠ‚ï¼Œå’Œå®ƒçš„ç›¸å¯¹ä½ç½®ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/27abe5f57f6e4c7a9a61fcb4874d156c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=A1%2FJNOXEKT60zonybGppDXvkqlU%3D" alt="" loading="lazy"/></p>
<p><strong>è¿™æ ·</strong>æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°æœ¨æ¿å—é‡åŠ›å½±å“çš„è¿åŠ¨æ•ˆæœï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f2b1569db5dc4c8cb23de7237f0fd0c3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=iGcjfGA%2B2NgMEj5g20yU5oyt7NU%3D" alt="" loading="lazy"/></p>
<p><strong>ä¸Šé¢æåˆ°çš„</strong>å…³èŠ‚çš„åŠ¨æ€æ·»åŠ ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c3ad3058814549c2a7a0cda3a807dd10~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=XWqTEso2JyJAyeVLkl2U9lOyv80%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-10">äº”.æ•ˆæœæ¼”ç¤º</h2>
<p><strong>å…³å¡1ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/91e66622205541109f9ea5fe2ffc85bc~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=Q9t6%2BXukT%2BtAJrAqRQ7GXn56mIk%3D" alt="" loading="lazy"/></p>
<p><strong>å…³å¡2ï¼š</strong></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a1fe4407fd51424cbc8e294b4bb744ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lq_5YWD56iL5bqP5ZGY:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768269912&amp;x-signature=WuKDlpnXohQq34rSkCZeHldFJlY%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-11">ç»“è¯­</h2>
<p><strong>ä»¥ä¸Š</strong>å°±æ˜¯æˆ‘çš„æ‰“èºä¸æ¸¸æˆæ ¸å¿ƒç©æ³•çš„å…¨éƒ¨åˆ†äº«ã€‚</p>
<p><strong>ä¸çŸ¥é“å°ä¼™ä¼´ä»¬éƒ½å­¦åºŸäº†å—ï¼Ÿ</strong></p>
<p>æœ¬æ–‡<strong>å®æˆ˜æºç </strong>å¯é€šè¿‡<a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFOi5gCiGzF3LnT03DpPMXA" target="_blank" title="https://mp.weixin.qq.com/s/FOi5gCiGzF3LnT03DpPMXA" ref="nofollow noopener noreferrer"><strong>é˜…è¯»åŸæ–‡</strong></a>è·å–ï¼Œå†…å«ä½“éªŒé“¾æ¥ã€‚</p>
<hr/>
<p><strong>æˆ‘æ˜¯"äº¿å…ƒç¨‹åºå‘˜"ï¼Œä¸€ä½æœ‰ç€8å¹´æ¸¸æˆè¡Œä¸šç»éªŒçš„ä¸»ç¨‹ã€‚åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼Œå¸Œæœ›èƒ½ç»™åˆ°æ‚¨å¸®åŠ©, ä¹Ÿå¸Œæœ›é€šè¿‡æ‚¨èƒ½å¸®åŠ©åˆ°å¤§å®¶ã€‚</strong></p>
<p>AD:ç¬”è€…çº¿ä¸Šçš„å°æ¸¸æˆã€Šæ‰“èºä¸é—¯å…³ã€‹ã€Šè´ªåƒè›‡æŒæœºç»å…¸ã€‹ã€Šé‡åŠ›è¿·å®«çƒã€‹ã€Šå¡«è‰²ä¹‹æ—…ã€‹ã€Šæ–¹å—æŒæœºç»å…¸ã€‹å¤§å®¶å¯ä»¥è‡ªè¡Œç‚¹å‡»æœç´¢ä½“éªŒã€‚</p>
<p>å®ä¸ç›¸ç’ï¼Œæƒ³è¦ä¸ª<strong>èµ</strong>å’Œ<strong>çˆ±å¿ƒ</strong>ï¼è¯·æŠŠè¯¥æ–‡ç« <strong>åˆ†äº«</strong>ç»™ä½ è§‰å¾—æœ‰éœ€è¦çš„å…¶ä»–å°ä¼™ä¼´ã€‚è°¢è°¢ï¼</p>
<p>æ¨èæ–‡ç« ï¼š</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FFOi5gCiGzF3LnT03DpPMXA" target="_blank" title="https://mp.weixin.qq.com/s/FOi5gCiGzF3LnT03DpPMXA" ref="nofollow noopener noreferrer">äº¿å…ƒCocoså°æ¸¸æˆå®æˆ˜åˆé›†</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FXLCknL3fJDubec2GW6KLFA" target="_blank" title="https://mp.weixin.qq.com/s/XLCknL3fJDubec2GW6KLFA" ref="nofollow noopener noreferrer">Cocosæ¸¸æˆå¦‚ä½•æ¥å…¥å®‰å“ç©¿å±±ç”²å¹¿å‘Šå˜ç°ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F3_VrSld4KnDKY_7hxjSoKg" target="_blank" title="https://mp.weixin.qq.com/s/3_VrSld4KnDKY_7hxjSoKg" ref="nofollow noopener noreferrer">ä½ çŸ¥é“å’Œä¸çŸ¥é“çš„å¾®ä¿¡å°æ¸¸æˆå¸¸ç”¨APIæ•´ç†ï¼Œèµ¶ç´§æ”¶è—ç”¨èµ·æ¥~</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0Lj24VHJ-pL8z82hHqQLiA" target="_blank" title="https://mp.weixin.qq.com/s/0Lj24VHJ-pL8z82hHqQLiA" ref="nofollow noopener noreferrer">Cocosæ¸¸æˆå¦‚ä½•å¿«é€Ÿæ¥å…¥æŠ–éŸ³å°æ¸¸æˆå¹¿å‘Šå˜ç°ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZ7DusUJA2v1IFZDFtBsueg" target="_blank" title="https://mp.weixin.qq.com/s/Z7DusUJA2v1IFZDFtBsueg" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨CocosCreator3.8ä¸­å®ç°å‰²ç»³å­æ¸¸æˆæ•ˆæœ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F3BzzFBzeVAO-a6LPTeFTrA" target="_blank" title="https://mp.weixin.qq.com/s/3BzzFBzeVAO-a6LPTeFTrA" ref="nofollow noopener noreferrer">å¦‚ä½•åœ¨CocosCreator3.8ä¸­å®ç°åŠ¨æ€åˆ‡å‰²æ¨¡å‹ï¼Ÿ</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FZIph332u_r24OTY4r6_jow" target="_blank" title="https://mp.weixin.qq.com/s/ZIph332u_r24OTY4r6_jow" ref="nofollow noopener noreferrer">Cocosæ¸¸æˆå¼€å‘ä¸­çš„è´´èŠ±æ•ˆæœ</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿]]></title>    <link>https://juejin.cn/post/7592017365141618740</link>    <guid>https://juejin.cn/post/7592017365141618740</guid>    <pubDate>2026-01-06T03:33:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592017365141618740" data-draft-id="7591786340321165346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿"/> <meta itemprop="keywords" content="å‰ç«¯,CI/CD,NPM"/> <meta itemprop="datePublished" content="2026-01-06T03:33:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨å¤œå¯»æ™´å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/1943592288391496"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ„å»º â€œæŒ‰ç‰ˆæœ¬è§¦å‘ã€è‡ªåŠ¨å‘å¸ƒã€è‡ªåŠ¨å›å†™â€ çš„å‰ç«¯ç»„ä»¶å‘å¸ƒæµæ°´çº¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1943592288391496/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨å¤œå¯»æ™´å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T03:33:31.000Z" title="Tue Jan 06 2026 03:33:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä¸€å¥—å·¥ä½œæµï¼Œç»Ÿä¸€å‘å¸ƒå¤šä¸ªä»“åº“ä¸‹çš„å¤šä¸ªç»„ä»¶ï¼›ä»¥ â€œç‰ˆæœ¬å·å˜åŒ–â€ ä¸ºå”¯ä¸€è§¦å‘ï¼›å‘å¸ƒæˆåŠŸåè‡ªåŠ¨å›å†™é…ç½®å¹¶ç”Ÿæˆ PRã€‚æ–°å¢ç»„ä»¶åªéœ€æ”¹ä¸¤å¤„é…ç½®ï¼Œå‰©ä¸‹äº¤ç»™ CIã€‚</p>
</blockquote>
<h2 data-id="heading-0">èƒŒæ™¯ä¸ç›®æ ‡</h2>
<ul>
<li>å‰ç«¯ç»„ä»¶åˆ†æ•£åœ¨ä¸åŒä»“åº“ï¼Œäººå·¥å‘å¸ƒæ˜“é”™ã€æµç¨‹å†—é•¿ï¼›</li>
<li>éœ€è¦ â€œæ”¹ç‰ˆæœ¬ â†’ è‡ªåŠ¨æ„å»ºå‘å¸ƒ â†’ è‡ªåŠ¨åŒæ­¥é…ç½®â€ çš„ä¸€æ¡é¾™æµç¨‹ï¼›</li>
<li>é€šè¿‡ GitHub Actions + é›†ä¸­é…ç½®æ–‡ä»¶ï¼Œæ­å»ºä¸€å¥—ç¨³å¥ã€å¯æ‰©å±•çš„å‘å¸ƒæµæ°´çº¿ã€‚</li>
</ul>
<p>æœ¬æ–‡åŸºäºä¸¤ä»½æ ¸å¿ƒæ–‡ä»¶ï¼š</p>
<ul>
<li>å·¥ä½œæµï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml" ref="nofollow noopener noreferrer">coco-app-web.yml</a></li>
<li>ç»„ä»¶æ¸…å•ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2Fconfigs%2Fcomponents.json" target="_blank" title="https://github.com/infinilabs/ci/configs/components.json" ref="nofollow noopener noreferrer">components.json</a></li>
</ul>
<h2 data-id="heading-1">æ¶æ„ä¸€è§ˆ</h2>
<ul>
<li>é›†ä¸­é…ç½®æ–‡ä»¶ç®¡ç†ç»„ä»¶çš„æ„å»º/å‘å¸ƒå‚æ•°ã€‚</li>
<li>å·¥ä½œæµè¯»å–é…ç½®ä¸è§¦å‘è¾“å…¥ï¼Œæ ¹æ® â€œç‰ˆæœ¬å˜åŒ–â€ ç”Ÿæˆå‘å¸ƒçŸ©é˜µã€‚</li>
<li>æŒ‰çŸ©é˜µé€ä»“åº“é€ç»„ä»¶æ‰§è¡Œæ„å»ºä¸ npm publishã€‚</li>
<li>å‘å¸ƒç»“æŸåè‡ªåŠ¨å›å†™å·¥ä½œæµé»˜è®¤å€¼ä¸ç»„ä»¶ current_versionï¼Œå¹¶æè‡ªåŠ¨åˆå¹¶ PRã€‚</li>
</ul>
<p>æ ¸å¿ƒæ€æƒ³ï¼š</p>
<ul>
<li>â€œç‰ˆæœ¬å·å˜åŒ–â€ æ˜¯å”¯ä¸€å‘å¸ƒè§¦å‘æ¡ä»¶ï¼›</li>
<li>é…ç½®é›†ä¸­åœ¨ components.jsonï¼Œç»„ä»¶çº§å¯è¦†ç›–ä»“åº“çº§é»˜è®¤å€¼ï¼›</li>
<li>å‘å¸ƒå®Œæˆåè‡ªåŠ¨å›å†™ï¼Œç¡®ä¿ â€œé…ç½®=äº‹å®â€ã€‚</li>
</ul>
<h2 data-id="heading-2">æ ¸å¿ƒæ–‡ä»¶ä¸å…³é”®ç‰‡æ®µ</h2>
<h3 data-id="heading-3">å·¥ä½œæµè¾“å…¥ï¼ˆworkflow_dispatchï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">on:</span>
  <span class="hljs-attr">workflow_dispatch:</span>
    <span class="hljs-attr">inputs:</span>
      <span class="hljs-attr">SEARCH_CHAT_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'search-chat Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"1.3.10"</span> }
      <span class="hljs-attr">UI_WEB_CLI_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ui-web-cli Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.43"</span> }
      <span class="hljs-attr">FILTER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'filter Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.11"</span> }
      <span class="hljs-attr">SEARCH_RESULTS_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'search-results Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.11"</span> }
      <span class="hljs-attr">ENTITY_UI_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'entity-ui Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">CUSTOM_ICONS_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'custom-icons Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">DROPDOWNLIST_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'dropdownlist Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"1.3.5"</span> }
      <span class="hljs-attr">DATEPICKER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'datepicker Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.10"</span> }
      <span class="hljs-attr">AI_ANSWER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ai-answer Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.1"</span> }
</code></pre>
<p>å‘½åçº¦å®šï¼šç»„ä»¶åé€šè¿‡ â€œå…¨å¤§å†™ + çŸ­æ¨ªçº¿æ”¹ä¸‹åˆ’çº¿ + åç¼€ <code>_VERSION</code>â€ç”Ÿæˆè¾“å…¥é”®ï¼Œä¾‹å¦‚ ai-answer â†’ AI_ANSWER_VERSIONã€‚</p>
<h3 data-id="heading-4">ç»„ä»¶é›†ä¸­é…ç½®ï¼ˆcomponents.jsonï¼‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ui-common"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"repo_private"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"build_cmd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"pnpm build"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"publish_cmd"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"npm publish"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"version_file"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"package.json"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"adapter_script"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ai-answer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"current_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"work_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dist_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>è¯´æ˜ï¼š</p>
<ul>
<li>work_dir ä¸ºæ„å»ºå‘ç”Ÿåœ°ï¼›</li>
<li>dist_dir ä¸º npm publish çš„ç›®å½•ï¼›</li>
<li>version_file é»˜è®¤ä¸º package.jsonï¼Œä¹Ÿå¯è¦†ç›–ä¸º tsup.config.tsã€‚</li>
</ul>
<h2 data-id="heading-5">å·¥ä½œæµæ‰§è¡Œè·¯å¾„ä¸åŸç†</h2>
<h3 data-id="heading-6">1. ç”Ÿæˆå‘å¸ƒçŸ©é˜µï¼ˆprepare-matrixï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L33-L100" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L33-L100" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>éå† components.json çš„æ‰€æœ‰ä»“åº“ä¸ç»„ä»¶ï¼›</li>
<li>å°†ç»„ä»¶åæ˜ å°„ä¸ºè¾“å…¥é”®ï¼ˆå¦‚ ai-answer â†’ AI_ANSWER_VERSIONï¼‰ï¼›</li>
<li>å¯¹æ¯”è¾“å…¥ç‰ˆæœ¬ä¸ current_versionï¼Œä¸ä¸€è‡´è€…çº³å…¥çŸ©é˜µï¼›</li>
<li>è¾“å‡ºçŸ©é˜µ JSON ä¸ has_repos æ ‡è®°ã€‚</li>
</ul>
<p>ä¼˜ç‚¹ï¼šä»…å‘å¸ƒ â€œå‘ç”Ÿç‰ˆæœ¬å˜åŒ–â€ çš„ç»„ä»¶ï¼Œé¿å…æ— æ•ˆæ„å»ºã€‚</p>
<h3 data-id="heading-7">2. æ„å»ºä¸å‘å¸ƒï¼ˆpublishï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L101-L221" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L101-L221" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>checkout CI ä»“åº“ä¸ç›®æ ‡ä»“åº“ï¼ˆæ”¯æŒç§ä»“ SSH ç§é’¥ï¼‰ã€‚</li>
<li>é€šè¿‡ jq å®ç°â€œç»„ä»¶ä¼˜å…ˆã€ä»“åº“å…œåº•â€çš„é…ç½®ç»§æ‰¿ã€‚</li>
<li>å†™å…¥ç‰ˆæœ¬ï¼š
<ul>
<li>è‹¥ version_file ä¸º tsup.config.tsï¼šç”¨ sed æ›´æ–° <code>version: "x.y.z"</code>ï¼›</li>
<li>å¦åˆ™ç”¨ jq å†™ package.json çš„ <code>version</code> å­—æ®µã€‚</li>
</ul>
</li>
<li>åœ¨ work_dir æ‰§è¡Œ <code>pnpm install</code> ä¸ <code>build_cmd</code>ï¼›</li>
<li>è¿›å…¥ dist_dir æ‰§è¡Œ <code>publish_cmd</code>ï¼ˆnpm publishï¼‰ï¼›</li>
<li>è®°å½•å‘å¸ƒå…ƒæ•°æ®åˆ° <code>release_info/&lt;component&gt;.txt</code>ï¼Œæ ¼å¼ <code>REPO|COMP|KEY|VER</code>ã€‚</li>
</ul>
<h3 data-id="heading-8">3. è‡ªåŠ¨å›å†™ä¸ PRï¼ˆupdate-workflowï¼‰</h3>
<p>ä½ç½®ä¸é€»è¾‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L224-L304" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L224-L304" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>ä¸‹è½½å¹¶éå†æ‰€æœ‰ release-infoï¼›</li>
<li>ç”¨ sed å›å†™å·¥ä½œæµ inputs çš„é»˜è®¤ç‰ˆæœ¬ï¼›</li>
<li>ç”¨ jq å›å†™ components.json çš„ current_versionï¼›</li>
<li>ç”Ÿæˆå¹¶è‡ªåŠ¨åˆå¹¶ PRï¼Œç¡®ä¿â€œé…ç½®=äº‹å®â€ã€‚</li>
</ul>
<h3 data-id="heading-9">4. å¤±è´¥é€šçŸ¥ï¼ˆnotify_on_failureï¼‰</h3>
<p>ä½ç½®ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Finfinilabs%2Fci%2F.github%2Fworkflows%2Fcoco-app-web.yml%23L305-L320" target="_blank" title="https://github.com/infinilabs/ci/.github/workflows/coco-app-web.yml#L305-L320" ref="nofollow noopener noreferrer">coco-app-web.yml</a></p>
<ul>
<li>é€šè¿‡é£ä¹¦æœºå™¨äººæ¨é€å¤±è´¥çŠ¶æ€ä¸é“¾æ¥ã€‚</li>
</ul>
<h2 data-id="heading-10">å¦‚ä½•æ–°å¢ç»„ä»¶</h2>
<p>ä»¥æ–°å¢ ui-common ä¸‹çš„ ai-answer ä¸ºä¾‹ï¼š</p>
<h3 data-id="heading-11">npm ä»“åº“é…ç½® OIDC</h3>
<p>å…ˆç¬¬ä¸€æ¬¡æ‰‹åŠ¨å‘å¸ƒï¼Œåœ¨ npm ç”Ÿæˆå¯¹åº”ç»„ä»¶åº“çš„åœ°å€ï¼Œç„¶åä¿®æ”¹ä¸€ä¸‹é…ç½®ï¼Œå¦‚å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2595ec90a7544ea0a636d79201f0330f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5aSc5a-75pm05aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275211&amp;x-signature=kg%2FQI6aE1%2Bc%2BLlU89OFyDvACNa0%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-12">åœ¨ components.json æ·»åŠ ç»„ä»¶æ¡ç›®ï¼ˆè·¯å¾„ã€ç‰ˆæœ¬ä¸ç›®å½•ï¼‰</h3>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"ui-common"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"components"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"ai-answer"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"current_version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"0.0.1"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"work_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"dist_dir"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"packages/AIAnswer"</span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h3 data-id="heading-13">åœ¨å·¥ä½œæµ inputs å¢åŠ å¯¹åº”é”®ï¼ˆå‘½åçº¦å®šï¼‰</h3>
<pre><code class="hljs language-yaml" lang="yaml"><span class="hljs-attr">AI_ANSWER_VERSION:</span> { <span class="hljs-attr">description:</span> <span class="hljs-string">'ai-answer Version'</span>, <span class="hljs-attr">required:</span> <span class="hljs-literal">true</span>, <span class="hljs-attr">default:</span> <span class="hljs-string">"0.0.1"</span> }
</code></pre>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f4bfb021dcf042b8a30e3846f8c892e4~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5aSc5a-75pm05aSp:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768275211&amp;x-signature=X22ZaL6AdDDpsQqqm%2F1p%2B1xiEd4%3D" alt="image.png" loading="lazy"/></p>
<p>æ ¡éªŒä¸å‘å¸ƒï¼š</p>
<ul>
<li>æ‰‹åŠ¨è§¦å‘ workflow_dispatchï¼Œä¼ å…¥ä¸€ä¸ªâ€œä¸åŒäº current_versionâ€çš„ç‰ˆæœ¬å·ï¼ˆå¦‚ 0.0.2ï¼‰ï¼›</li>
<li>è§‚å¯Ÿæ—¥å¿—å‡ºç° <code>Processing: ai-answer (ui-common)</code>ï¼›</li>
<li>å‘å¸ƒå®Œæˆåè‡ªåŠ¨ç”Ÿæˆå¹¶åˆå¹¶ PRï¼Œå›å†™å·¥ä½œæµé»˜è®¤å€¼ä¸ components.json çš„ current_versionã€‚</li>
</ul>
<h2 data-id="heading-14">å¥½å¤„ä¸è®¾è®¡å–èˆ</h2>
<ul>
<li>ç»Ÿä¸€å…¥å£ï¼šä¸€ä¸ªå·¥ä½œæµè¦†ç›–å¤šä»“åº“å¤šç»„ä»¶çš„å‘å¸ƒã€‚</li>
<li>ç²¾å‡†è§¦å‘ï¼šä»…ç‰ˆæœ¬å˜åŒ–çš„ç»„ä»¶è¿›å…¥çŸ©é˜µï¼ŒèŠ‚çœæ—¶é—´ä¸ç®—åŠ›ã€‚</li>
<li>è‡ªåŠ¨åŒæ­¥ï¼šå‘å¸ƒåè‡ªåŠ¨å›å†™é…ç½®ä¸é»˜è®¤å€¼ï¼Œæœç»ç‰ˆæœ¬ â€œäº‹å®ä¸é…ç½®â€ ä¸ä¸€è‡´ã€‚</li>
<li>é…ç½®é›†ä¸­ï¼šcomponents.json ç®¡ç†æ„å»º/å‘å¸ƒå‘½ä»¤ä¸ç›®å½•ï¼Œç»„ä»¶å¯è¦†ç›–ä»“åº“é»˜è®¤ï¼Œä¿æŒæœ€å°‘å·®å¼‚ã€‚</li>
<li>é«˜æ‰©å±•ï¼šæ–°å¢ç»„ä»¶åªéœ€æ”¹ä¸¤å¤„é…ç½®ï¼Œæ— éœ€åŠ¨å·¥ä½œæµé€»è¾‘ã€‚</li>
</ul>
<p>è®¾è®¡è¦ç‚¹ï¼š</p>
<ul>
<li>é”®åæ˜ å°„ï¼ˆSAFE_NAME + <code>_VERSION</code>ï¼‰ä¿è¯ inputs ä¸ç»„ä»¶åç¨³å®šå¯¹åº”ï¼›</li>
<li>jq å±‚çº§è¯»å–ï¼ˆç»„ä»¶ä¼˜å…ˆã€ä»“åº“å…œåº•ï¼‰é™ä½é‡å¤é…ç½®ï¼›</li>
<li>release-info ä½œä¸º â€œäº‹å®è®°å½•â€ï¼Œupdate-workflow æ ¹æ®äº‹å®å›å†™é…ç½®ï¼Œå®ç°å¹‚ç­‰ä¸è‡ªæ„ˆã€‚</li>
</ul>
<h2 data-id="heading-15">å¸¸è§å‘ä½ä¸æ’æŸ¥</h2>
<ul>
<li>é”®åä¸åŒ¹é…
<ul>
<li>ai-answer çš„é”®å¿…é¡»ä¸º <code>AI_ANSWER_VERSION</code>ï¼›æ¼ä¸‹åˆ’çº¿æˆ–å‘½åä¸ä¸€è‡´ä¼šå¯¼è‡´ INPUT_VER ä¸º nullã€‚</li>
</ul>
</li>
<li>ç›®å½•é”™è¯¯
<ul>
<li>work_dir ç”¨äºæ„å»ºï¼Œdist_dir ç”¨äºå‘å¸ƒï¼›ä¸¤è€…å¿…é¡»å­˜åœ¨ä¸”æ­£ç¡®ã€‚</li>
</ul>
</li>
<li>ç‰ˆæœ¬å†™æ³•ä¸åŒ¹é…
<ul>
<li>tsup.config.ts å¿…é¡»å­˜åœ¨å½¢å¦‚ <code>version: "x.y.z"</code> çš„æ˜ç¡®å­—æ®µï¼›å¦åˆ™è¯·æ”¹ç”¨ package.jsonã€‚</li>
</ul>
</li>
<li>ç§æœ‰ä»“åº“
<ul>
<li>repo_private ä¸º true æ—¶éœ€é…ç½® SSH ç§é’¥ï¼Œcheckout æ‰èƒ½è®¿é—®ã€‚</li>
</ul>
</li>
<li>npm å‡­æ®
<ul>
<li>ç¡®ä¿ç›®æ ‡ä»“åº“/æµæ°´çº¿å…·å¤‡ npm å‘å¸ƒæƒé™ï¼ˆtoken æˆ– OIDCï¼‰ã€‚</li>
</ul>
</li>
<li>ç»„ç»‡å˜é‡
<ul>
<li><code>vars.GIT_REPO</code> å¿…é¡»æŒ‡å‘ç»„ç»‡è·¯å¾„ï¼ˆå¦‚ <code>github.com/&lt;org&gt;</code>ï¼‰ï¼Œå¦åˆ™ checkout å¤±è´¥ã€‚</li>
</ul>
</li>
<li>é€‚é…è„šæœ¬
<ul>
<li><code>adapter_script</code> ä»…åœ¨ç‰¹æ®Šä»“åº“éœ€è¦ï¼ˆå¦‚ coco-appï¼‰ï¼Œé»˜è®¤å…³é—­é¿å…è¯¯æ”¹ã€‚</li>
</ul>
</li>
</ul>
<h2 data-id="heading-16">å°ç»“</h2>
<ul>
<li>è¿™å¥—æµæ°´çº¿ä»¥ â€œç‰ˆæœ¬å˜åŒ–â€ ä¸ºæ ¸å¿ƒé©±åŠ¨åŠ›ï¼Œç»“åˆé›†ä¸­é…ç½®ã€è‡ªåŠ¨å›å†™ä¸ PRï¼Œæ„å»ºå‡ºç¨³å¥ã€å¯æ‰©å±•çš„å¤šç»„ä»¶å‘å¸ƒé€šé“ã€‚</li>
<li>æ–°å¢ç»„ä»¶çš„å¿ƒæ™ºè´Ÿæ‹…è¢«å‹ç¼©ä¸º â€œåŠ é…ç½® + åŠ è¾“å…¥é”®â€ï¼Œå…¶ä½™äº¤ç»™ CI è‡ªåŠ¨å®Œæˆã€‚</li>
<li>å¯¹äºå¤šä¸ªç»„ä»¶åˆ†å¸ƒåœ¨å¤šä»“åº“çš„åœºæ™¯ï¼Œè¿™æ˜¯ä¸€ä¸ªä½æˆæœ¬ã€é«˜æ”¶ç›Šçš„å‘å¸ƒå®è·µã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä½ æ˜¯æ€ä¹ˆç†è§£ES6ä¸­Proxyçš„ï¼Ÿä½¿ç”¨åœºæ™¯æœ‰å“ªäº›?]]></title>    <link>https://juejin.cn/post/7591744411739291648</link>    <guid>https://juejin.cn/post/7591744411739291648</guid>    <pubDate>2026-01-06T01:48:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7591744411739291648" data-draft-id="7591744411739258880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content=" ä½ æ˜¯æ€ä¹ˆç†è§£ES6ä¸­Proxyçš„ï¼Ÿä½¿ç”¨åœºæ™¯æœ‰å“ªäº›?"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-06T01:48:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§çŸ¥é—²é—²i"/> <meta itemprop="url" content="https://juejin.cn/user/3799545205237111"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
             ä½ æ˜¯æ€ä¹ˆç†è§£ES6ä¸­Proxyçš„ï¼Ÿä½¿ç”¨åœºæ™¯æœ‰å“ªäº›?
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3799545205237111/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§çŸ¥é—²é—²i
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T01:48:13.000Z" title="Tue Jan 06 2026 01:48:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    28
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€Proxy çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
<h3 data-id="heading-1">å®šä¹‰ä¸æœ¬è´¨</h3>
<p>Proxyï¼ˆä»£ç†ï¼‰æ˜¯ ES6 å¼•å…¥çš„å…ƒç¼–ç¨‹ç‰¹æ€§ï¼Œç”¨äºåˆ›å»ºå¯¹è±¡çš„ä»£ç†ï¼Œä»è€Œ<strong>æ‹¦æˆªå¹¶è‡ªå®šä¹‰å¯¹è±¡çš„åŸºæœ¬æ“ä½œ</strong>ã€‚è¿™äº›æ“ä½œåŒ…æ‹¬å±æ€§è®¿é—®ã€èµ‹å€¼ã€æšä¸¾ã€å‡½æ•°è°ƒç”¨ç­‰ã€‚</p>
<h3 data-id="heading-2">å…ƒç¼–ç¨‹çš„æ„ä¹‰</h3>
<ul>
<li>
<p><strong>å…ƒç¼–ç¨‹</strong>æ˜¯æŒ‡ç¨‹åºèƒ½å¤Ÿç¼–å†™ã€æ“ä½œå…¶ä»–ç¨‹åºï¼ˆæˆ–è‡ªèº«ï¼‰çš„ç¼–ç¨‹èŒƒå¼</p>
</li>
<li>
<p>Proxy å…è®¸åœ¨è¯­è¨€å±‚é¢ä¿®æ”¹é»˜è®¤è¡Œä¸ºï¼Œæ— éœ€ä¿®æ”¹æºä»£ç </p>
</li>
<li>
<p>ä¼˜åŠ¿ï¼šæé«˜å¼€å‘æ•ˆç‡ï¼Œå¢åŠ ç¨‹åºçµæ´»åº¦ï¼Œå®ç°åŠ¨æ€è¡Œä¸ºæ§åˆ¶</p>
</li>
</ul>
<h3 data-id="heading-3">åŸºæœ¬è¯­æ³•</h3>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">proxy</span> = new Proxy(target, handler)<span class="hljs-comment">;</span>
</code></pre>
<ul>
<li>
<p><code>target</code>ï¼šè¦åŒ…è£…çš„ç›®æ ‡å¯¹è±¡</p>
</li>
<li>
<p><code>handler</code>ï¼šåŒ…å«æ‹¦æˆªå™¨ï¼ˆtrapsï¼‰çš„å¯¹è±¡</p>
</li>
</ul>
<h2 data-id="heading-4">äºŒã€æ ¸å¿ƒæ‹¦æˆªå™¨è¯¦è§£</h2>
<h3 data-id="heading-5">1. get() - æ‹¦æˆªå±æ€§è¯»å–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> handler = {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è¯»å–å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property, receiver);
  }
};
â€‹
<span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({ <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span> }, handler);
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">name</span>); <span class="hljs-comment">// è¾“å‡º: è¯»å–å±æ€§: name â†’ å¼ ä¸‰</span>
</code></pre>
<p><strong>ç‰¹æ®Šåº”ç”¨ - æ•°ç»„è´Ÿç´¢å¼•è®¿é—®ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">createNegativeArray</span> = (arr) =&gt; new Proxy(arr, {
  get(target, index, receiver) {
    const <span class="hljs-attr">idx</span> = parseInt(index)<span class="hljs-comment">;</span>
    if (idx &lt; 0) {
      return target<span class="hljs-section">[target.length + idx]</span><span class="hljs-comment">;</span>
    }
    return Reflect.get(target, index, receiver)<span class="hljs-comment">;</span>
  }
})<span class="hljs-comment">;</span>
â€‹
const <span class="hljs-attr">arr</span> = createNegativeArray([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])<span class="hljs-comment">;</span>
console.log(arr<span class="hljs-section">[-1]</span>)<span class="hljs-comment">; // 4</span>
console.log(arr<span class="hljs-section">[-2]</span>)<span class="hljs-comment">; // 3</span>
</code></pre>
<h3 data-id="heading-6">2. set() - æ‹¦æˆªå±æ€§èµ‹å€¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createValidatedObject</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({}, {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value, receiver</span>) {
      <span class="hljs-comment">// å¹´é¾„éªŒè¯ï¼šå¿…é¡»æ˜¯ 0-150 ä¹‹é—´çš„æ•´æ•°</span>
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'age'</span>) {
        <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Number</span>.<span class="hljs-title function_">isInteger</span>(value) || value &lt; <span class="hljs-number">0</span> || value &gt; <span class="hljs-number">150</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'å¹´é¾„å¿…é¡»ä¸º 0-150 ä¹‹é—´çš„æ•´æ•°'</span>);
        }
      }
      
      <span class="hljs-comment">// é‚®ç®±æ ¼å¼éªŒè¯</span>
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'email'</span>) {
        <span class="hljs-keyword">const</span> emailRegex = <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>;
        <span class="hljs-keyword">if</span> (!emailRegex.<span class="hljs-title function_">test</span>(value)) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®'</span>);
        }
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value, receiver);
    }
  });
};
â€‹
<span class="hljs-keyword">const</span> user = <span class="hljs-title function_">createValidatedObject</span>();
user.<span class="hljs-property">age</span> = <span class="hljs-number">25</span>;     <span class="hljs-comment">// æˆåŠŸ</span>
user.<span class="hljs-property">age</span> = <span class="hljs-number">200</span>;    <span class="hljs-comment">// æŠ›å‡ºé”™è¯¯</span>
</code></pre>
<h3 data-id="heading-7">3. deleteProperty() - æ‹¦æˆªåˆ é™¤æ“ä½œ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createProtectedObject</span> = (<span class="hljs-params">obj</span>) =&gt; {
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PROTECTED_PROPS</span> = [<span class="hljs-string">'id'</span>, <span class="hljs-string">'createdAt'</span>];
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
    <span class="hljs-title function_">deleteProperty</span>(<span class="hljs-params">target, property</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">PROTECTED_PROPS</span>.<span class="hljs-title function_">includes</span>(property)) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">`å±æ€§ "<span class="hljs-subst">${property}</span>" å—ä¿æŠ¤ï¼Œä¸å¯åˆ é™¤`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
      }
      
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`åˆ é™¤å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">deleteProperty</span>(target, property);
    }
  });
};
â€‹
<span class="hljs-keyword">const</span> data = <span class="hljs-title function_">createProtectedObject</span>({ <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-attr">createdAt</span>: <span class="hljs-string">'2024-01-01'</span> });
<span class="hljs-keyword">delete</span> data.<span class="hljs-property">name</span>;     <span class="hljs-comment">// æˆåŠŸ</span>
<span class="hljs-keyword">delete</span> data.<span class="hljs-property">id</span>;       <span class="hljs-comment">// è­¦å‘Šï¼šå±æ€§ "id" å—ä¿æŠ¤ï¼Œä¸å¯åˆ é™¤</span>
</code></pre>
<h3 data-id="heading-8">4. apply() - æ‹¦æˆªå‡½æ•°è°ƒç”¨</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createLoggingFunction</span> = (<span class="hljs-params">fn</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(fn, {
    <span class="hljs-title function_">apply</span>(<span class="hljs-params">target, thisArg, argumentsList</span>) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è°ƒç”¨å‡½æ•°: <span class="hljs-subst">${target.name}</span>`</span>);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'å‚æ•°:'</span>, argumentsList);
      <span class="hljs-keyword">const</span> start = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, argumentsList);
      <span class="hljs-keyword">const</span> end = performance.<span class="hljs-title function_">now</span>();
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`æ‰§è¡Œæ—¶é—´: <span class="hljs-subst">${end - start}</span>ms`</span>);
      <span class="hljs-keyword">return</span> result;
    }
  });
};
â€‹
<span class="hljs-keyword">const</span> calculateSum = <span class="hljs-title function_">createLoggingFunction</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b);
<span class="hljs-title function_">calculateSum</span>(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);
<span class="hljs-comment">// è¾“å‡º:</span>
<span class="hljs-comment">// è°ƒç”¨å‡½æ•°: calculateSum</span>
<span class="hljs-comment">// å‚æ•°: [5, 3]</span>
<span class="hljs-comment">// æ‰§è¡Œæ—¶é—´: 0.05ms</span>
<span class="hljs-comment">// è¿”å›: 8</span>
</code></pre>
<h3 data-id="heading-9">5. å…¶ä»–å¸¸ç”¨æ‹¦æˆªå™¨</h3>
<ul>
<li>
<p><code>construct()</code>ï¼šæ‹¦æˆª <code>new</code> æ“ä½œç¬¦</p>
</li>
<li>
<p><code>has()</code>ï¼šæ‹¦æˆª <code>in</code> æ“ä½œç¬¦</p>
</li>
<li>
<p><code>ownKeys()</code>ï¼šæ‹¦æˆª <code>Object.getOwnPropertyNames()</code> ç­‰</p>
</li>
<li>
<p><code>getPrototypeOf()</code>ï¼šæ‹¦æˆª <code>Object.getPrototypeOf()</code></p>
</li>
</ul>
<h2 data-id="heading-10">ä¸‰ã€Reflect API çš„é…åˆä½¿ç”¨</h2>
<p>Reflect æä¾›äº†ä¸ Proxy æ‹¦æˆªå™¨ä¸€ä¸€å¯¹åº”çš„é™æ€æ–¹æ³•ï¼Œç”¨äºæ‰§è¡Œé»˜è®¤æ“ä½œï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> proxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({}, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¿é—®å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
    <span class="hljs-comment">// ä½¿ç”¨ Reflect æ‰§è¡Œé»˜è®¤çš„ get æ“ä½œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property, receiver);
  },
  
  <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value, receiver</span>) {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è®¾ç½®å±æ€§: <span class="hljs-subst">${property}</span> = <span class="hljs-subst">${value}</span>`</span>);
    <span class="hljs-comment">// ä½¿ç”¨ Reflect æ‰§è¡Œé»˜è®¤çš„ set æ“ä½œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value, receiver);
  }
});
</code></pre>
<h2 data-id="heading-11">å››ã€å®é™…åº”ç”¨åœºæ™¯</h2>
<h3 data-id="heading-12">1. æ•°æ®éªŒè¯ä¸æ ¼å¼åŒ–</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createValidatedForm</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>({}, {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
      <span class="hljs-comment">// ç”µè¯å·ç æ ¼å¼åŒ–å’ŒéªŒè¯</span>
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'phone'</span>) {
        <span class="hljs-keyword">const</span> cleaned = value.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/\D/g</span>, <span class="hljs-string">''</span>);
        <span class="hljs-keyword">if</span> (cleaned.<span class="hljs-property">length</span> !== <span class="hljs-number">11</span>) {
          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">'ç”µè¯å·ç å¿…é¡»ä¸º11ä½æ•°å­—'</span>);
        }
        value = cleaned.<span class="hljs-title function_">replace</span>(<span class="hljs-regexp">/(\d{3})(\d{4})(\d{4})/</span>, <span class="hljs-string">'$1-$2-$3'</span>);
      }
      
      <span class="hljs-comment">// æ—¥æœŸæ ¼å¼åŒ–</span>
      <span class="hljs-keyword">if</span> (property === <span class="hljs-string">'birthday'</span> &amp;&amp; value <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Date</span>) {
        value = value.<span class="hljs-title function_">toISOString</span>().<span class="hljs-title function_">split</span>(<span class="hljs-string">'T'</span>)[<span class="hljs-number">0</span>];
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value);
    }
  });
};
</code></pre>
<h3 data-id="heading-13">2. ç§æœ‰å±æ€§ä¿æŠ¤</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createPrivateAPI</span> = (<span class="hljs-params"/>) =&gt; {
  <span class="hljs-keyword">const</span> privateData = {
    <span class="hljs-attr">_apiKey</span>: <span class="hljs-string">'secret-key-12345'</span>,
    <span class="hljs-attr">_tokens</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()
  };
  
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PUBLIC_METHODS</span> = [<span class="hljs-string">'fetchData'</span>, <span class="hljs-string">'submitData'</span>];
  <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PRIVATE_PROPS</span> = [<span class="hljs-string">'_apiKey'</span>, <span class="hljs-string">'_tokens'</span>];
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(privateData, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">PRIVATE_PROPS</span>.<span class="hljs-title function_">includes</span>(property)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æƒè®¿é—®ç§æœ‰å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
      }
      
      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">PUBLIC_METHODS</span>.<span class="hljs-title function_">includes</span>(property)) {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`è°ƒç”¨ <span class="hljs-subst">${property}</span>ï¼Œä½¿ç”¨å¯†é’¥: <span class="hljs-subst">${privateData._apiKey.slice(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)}</span>...`</span>);
          <span class="hljs-comment">// å®é™…çš„æ–¹æ³•å®ç°</span>
        };
      }
      
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
    },
    
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable constant_">PRIVATE_PROPS</span>.<span class="hljs-title function_">includes</span>(property)) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`æ— æƒä¿®æ”¹ç§æœ‰å±æ€§: <span class="hljs-subst">${property}</span>`</span>);
      }
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value);
    },
    
    <span class="hljs-title function_">ownKeys</span>(<span class="hljs-params">target</span>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">keys</span>(target).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">key</span> =&gt;</span> !<span class="hljs-variable constant_">PRIVATE_PROPS</span>.<span class="hljs-title function_">includes</span>(key));
    }
  });
};
</code></pre>
<h3 data-id="heading-14">3. å®ç°è§‚å¯Ÿè€…æ¨¡å¼</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createObservable</span> = (<span class="hljs-params">initialState = {}</span>) =&gt; {
  <span class="hljs-keyword">const</span> observers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>();
  
  <span class="hljs-keyword">const</span> observable = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(initialState, {
    <span class="hljs-title function_">set</span>(<span class="hljs-params">target, property, value, receiver</span>) {
      <span class="hljs-keyword">const</span> oldValue = target[property];
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, property, value, receiver);
      
      <span class="hljs-comment">// å€¼å‘ç”Ÿå˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span>
      <span class="hljs-keyword">if</span> (oldValue !== value) {
        observers.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">observer</span> =&gt;</span> {
          <span class="hljs-title function_">observer</span>(property, oldValue, value);
        });
      }
      
      <span class="hljs-keyword">return</span> result;
    }
  });
  
  <span class="hljs-keyword">return</span> {
    observable,
    <span class="hljs-attr">subscribe</span>: <span class="hljs-function">(<span class="hljs-params">observer</span>) =&gt;</span> {
      observers.<span class="hljs-title function_">add</span>(observer);
      <span class="hljs-keyword">return</span> <span class="hljs-function">() =&gt;</span> observers.<span class="hljs-title function_">delete</span>(observer);
    },
    <span class="hljs-attr">unsubscribe</span>: <span class="hljs-function">(<span class="hljs-params">observer</span>) =&gt;</span> observers.<span class="hljs-title function_">delete</span>(observer)
  };
};
â€‹
<span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span>
<span class="hljs-keyword">const</span> { observable, subscribe } = <span class="hljs-title function_">createObservable</span>({ <span class="hljs-attr">count</span>: <span class="hljs-number">0</span> });
â€‹
<span class="hljs-comment">// è®¢é˜…çŠ¶æ€å˜åŒ–</span>
<span class="hljs-keyword">const</span> unsubscribe = <span class="hljs-title function_">subscribe</span>(<span class="hljs-function">(<span class="hljs-params">key, oldValue, newValue</span>) =&gt;</span> {
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">${key}</span> ä» <span class="hljs-subst">${oldValue}</span> å˜ä¸º <span class="hljs-subst">${newValue}</span>`</span>);
});
â€‹
observable.<span class="hljs-property">count</span> = <span class="hljs-number">1</span>; <span class="hljs-comment">// è¾“å‡º: count ä» 0 å˜ä¸º 1</span>
observable.<span class="hljs-property">count</span> = <span class="hljs-number">2</span>; <span class="hljs-comment">// è¾“å‡º: count ä» 1 å˜ä¸º 2</span>
â€‹
<span class="hljs-comment">// å–æ¶ˆè®¢é˜…</span>
<span class="hljs-title function_">unsubscribe</span>();
observable.<span class="hljs-property">count</span> = <span class="hljs-number">3</span>; <span class="hljs-comment">// æ— è¾“å‡º</span>
</code></pre>
<h3 data-id="heading-15">4. API è¯·æ±‚æ‹¦æˆªä¸ç¼“å­˜</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createCachedAPI</span> = (<span class="hljs-params">apiClient</span>) =&gt; {
  <span class="hljs-keyword">const</span> cache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(apiClient, {
    <span class="hljs-title function_">apply</span>(<span class="hljs-params">target, thisArg, argumentsList</span>) {
      <span class="hljs-keyword">const</span> [endpoint, params] = argumentsList;
      <span class="hljs-keyword">const</span> cacheKey = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>({ endpoint, params });
      
      <span class="hljs-comment">// æ£€æŸ¥ç¼“å­˜</span>
      <span class="hljs-keyword">if</span> (cache.<span class="hljs-title function_">has</span>(cacheKey)) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ä»ç¼“å­˜è¯»å–: <span class="hljs-subst">${endpoint}</span>`</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(cache.<span class="hljs-title function_">get</span>(cacheKey));
      }
      
      <span class="hljs-comment">// æ‰§è¡Œå®é™…è¯·æ±‚</span>
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">apply</span>(target, thisArg, argumentsList)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`ç¼“å­˜å“åº”: <span class="hljs-subst">${endpoint}</span>`</span>);
          cache.<span class="hljs-title function_">set</span>(cacheKey, response);
          <span class="hljs-keyword">return</span> response;
        });
    }
  });
};
</code></pre>
<h3 data-id="heading-16">5. æ€§èƒ½ç›‘æ§ä¸åˆ†æ</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createProfiledObject</span> = (<span class="hljs-params">obj</span>) =&gt; {
  <span class="hljs-keyword">const</span> accessStats = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();
  
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
      <span class="hljs-comment">// è®°å½•è®¿é—®ç»Ÿè®¡</span>
      <span class="hljs-keyword">const</span> count = accessStats.<span class="hljs-title function_">get</span>(property) || <span class="hljs-number">0</span>;
      accessStats.<span class="hljs-title function_">set</span>(property, count + <span class="hljs-number">1</span>);
      
      <span class="hljs-comment">// è®°å½•è®¿é—®æ—¶é—´</span>
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">`è®¿é—® <span class="hljs-subst">${property}</span>`</span>);
      <span class="hljs-keyword">const</span> result = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">`è®¿é—® <span class="hljs-subst">${property}</span>`</span>);
      
      <span class="hljs-keyword">return</span> result;
    },
    
    <span class="hljs-comment">// è·å–æ€§èƒ½æŠ¥å‘Š</span>
    <span class="hljs-title function_">getStats</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">from</span>(accessStats.<span class="hljs-title function_">entries</span>())
        .<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">[, a], [, b]</span>) =&gt;</span> b - a)
        .<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">[prop, count]</span>) =&gt;</span> ({ <span class="hljs-attr">property</span>: prop, <span class="hljs-attr">accessCount</span>: count }));
    }
  });
};
</code></pre>
<h2 data-id="heading-17">äº”ã€æ³¨æ„äº‹é¡¹ä¸æœ€ä½³å®è·µ</h2>
<h3 data-id="heading-18">1. æ€§èƒ½è€ƒè™‘</h3>
<ul>
<li>
<p>Proxy ä¼šå¼•å…¥é¢å¤–çš„æ€§èƒ½å¼€é”€ï¼Œåœ¨æ€§èƒ½æ•æ„Ÿåœºæ™¯éœ€è°¨æ…ä½¿ç”¨</p>
</li>
<li>
<p>é¿å…åœ¨é¢‘ç¹è°ƒç”¨çš„çƒ­è·¯å¾„ä¸­ä½¿ç”¨å¤æ‚çš„ä»£ç†é€»è¾‘</p>
</li>
</ul>
<h3 data-id="heading-19">2. é€æ˜æ€§åŸåˆ™</h3>
<ul>
<li>
<p>ç¡®ä¿ä»£ç†å¯¹è±¡çš„è¡Œä¸ºä¸åŸå§‹å¯¹è±¡ä¿æŒä¸€è‡´</p>
</li>
<li>
<p>é¿å…è¿åä½¿ç”¨è€…çš„é¢„æœŸè¡Œä¸º</p>
</li>
</ul>
<h3 data-id="heading-20">3. é”™è¯¯å¤„ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createSafeProxy</span> = (<span class="hljs-params">target</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(target, {
    <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, property);
      } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`è®¿é—®å±æ€§ <span class="hljs-subst">${property}</span> å¤±è´¥:`</span>, error);
        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>; <span class="hljs-comment">// æˆ–è¿”å›é»˜è®¤å€¼</span>
      }
    }
  });
};
</code></pre>
<h3 data-id="heading-21">4. æ’¤é”€ä»£ç†</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> { proxy, revoke } = <span class="hljs-title class_">Proxy</span>.<span class="hljs-title function_">revocable</span>({}, {
  <span class="hljs-title function_">get</span>(<span class="hljs-params">target, property</span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`è®¿é—® <span class="hljs-subst">${property}</span>`</span>;
  }
});
â€‹
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">message</span>); <span class="hljs-comment">// "è®¿é—® message"</span>
<span class="hljs-title function_">revoke</span>(); <span class="hljs-comment">// æ’¤é”€ä»£ç†</span>
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(proxy.<span class="hljs-property">message</span>); <span class="hljs-comment">// TypeError: Cannot perform 'get' on a proxy that has been revoked</span>
</code></pre>
<h2 data-id="heading-22">å…­ã€æ€»ç»“</h2>
<p>ES6 Proxy æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å…ƒç¼–ç¨‹å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…ï¼š</p>
<ul>
<li>
<p><strong>æ‹¦æˆªå’Œè‡ªå®šä¹‰å¯¹è±¡æ“ä½œ</strong>ï¼Œå®ç°é«˜çº§æŠ½è±¡</p>
</li>
<li>
<p><strong>å¢å¼ºä»£ç çš„å®‰å…¨æ€§</strong>ï¼Œé€šè¿‡éªŒè¯å’Œä¿æŠ¤æœºåˆ¶</p>
</li>
<li>
<p><strong>å®ç°å¤æ‚çš„ç¼–ç¨‹æ¨¡å¼</strong>ï¼Œå¦‚è§‚å¯Ÿè€…ã€ç¼“å­˜ã€AOPç­‰</p>
</li>
<li>
<p><strong>æé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§</strong>ï¼Œé€šè¿‡å…³æ³¨ç‚¹åˆ†ç¦»</p>
</li>
</ul>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼ŒProxy ç‰¹åˆ«é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š</p>
<ol>
<li>
<p>æ•°æ®éªŒè¯å’Œæ ¼å¼åŒ–</p>
</li>
<li>
<p>è®¿é—®æ§åˆ¶å’Œæƒé™ç®¡ç†</p>
</li>
<li>
<p>ç¼“å­˜å’Œæ€§èƒ½ä¼˜åŒ–</p>
</li>
<li>
<p>ç›‘æ§å’Œæ—¥å¿—è®°å½•</p>
</li>
<li>
<p>API å°è£…å’Œé€‚é…</p>
</li>
</ol>
<p>åˆç†ä½¿ç”¨ Proxy å¯ä»¥æ˜¾è‘—æå‡ä»£ç çš„çµæ´»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼Œä½†ä¹Ÿè¦æ³¨æ„å…¶æ€§èƒ½å½±å“å’Œå¤æ‚æ€§æˆæœ¬ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å†…ç½‘ç¯å¢ƒä¸‹ Web ç¦»çº¿åœ°å›¾çš„å®ç°æ–¹æ¡ˆä¸åˆè§„æ€§æ¢è®¨]]></title>    <link>https://juejin.cn/post/7592164124659630130</link>    <guid>https://juejin.cn/post/7592164124659630130</guid>    <pubDate>2026-01-07T02:19:21.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592164124659630130" data-draft-id="7592176349712810022" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å†…ç½‘ç¯å¢ƒä¸‹ Web ç¦»çº¿åœ°å›¾çš„å®ç°æ–¹æ¡ˆä¸åˆè§„æ€§æ¢è®¨"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T02:19:21.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ä¸‰å°æ²³"/> <meta itemprop="url" content="https://juejin.cn/user/4222562141210478"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å†…ç½‘ç¯å¢ƒä¸‹ Web ç¦»çº¿åœ°å›¾çš„å®ç°æ–¹æ¡ˆä¸åˆè§„æ€§æ¢è®¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4222562141210478/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ä¸‰å°æ²³
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:19:21.000Z" title="Wed Jan 07 2026 02:19:21 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨æ”¿ä¼å†…ç½‘ã€æ¶‰å¯†å›­åŒºã€å°é—­åŠå…¬åŒºç­‰æ— æ³•è®¿é—®å¤–ç½‘çš„åœºæ™¯ä¸­ï¼ŒåŸºäºé«˜å¾·ã€ç™¾åº¦ç­‰å•†ä¸šåœ°å›¾ API çš„ Web åœ°å›¾æ–¹æ¡ˆå¾€å¾€æ— æ³•è½åœ° â€”â€” è¿™ç±» API çš„ Key æ ¡éªŒã€ç“¦ç‰‡åŠ è½½ç­‰æ ¸å¿ƒç¯èŠ‚å‡ä¾èµ–å¤–ç½‘è®¿é—®ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»åŸºäºå¼€æºç“¦ç‰‡æ•°æ® + Leaflet çš„ Web ç¦»çº¿åœ°å›¾å®ç°æ–¹æ¡ˆï¼Œå¹¶é‡ç‚¹æ¢è®¨è¯¥æ–¹æ¡ˆçš„æ³•å¾‹é£é™©ä¸ä½¿ç”¨æ³¨æ„äº‹é¡¹ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€æŠ€æœ¯å®ç°æ–¹æ¡ˆ</h2>
<h3 data-id="heading-1">1. æ ¸å¿ƒæ€è·¯</h3>
<p>ç¦»çº¿åœ°å›¾çš„æ ¸å¿ƒæ˜¯æ‘†è„±å¯¹å•†ä¸šåœ°å›¾ API å¤–ç½‘æœåŠ¡çš„ä¾èµ–ï¼Œé€šè¿‡ä»¥ä¸‹æ­¥éª¤å®ç°ï¼š</p>
<ol>
<li>ä¸‹è½½å¼€æºåœ°å›¾ç“¦ç‰‡æ•°æ®ï¼ˆå«æ˜Ÿå›¾ã€æ ‡æ³¨å±‚ï¼‰ï¼›</li>
<li>å°†ç“¦ç‰‡æ•°æ®éƒ¨ç½²åˆ°å†…ç½‘å­˜å‚¨ï¼ˆæœ¬åœ°é¡¹ç›® / MinIO / å†…ç½‘æœåŠ¡å™¨ï¼‰ï¼›</li>
<li>åŸºäº Leaflet åŠ è½½å†…ç½‘ç“¦ç‰‡ï¼Œå®ç°åœ°å›¾å±•ç¤ºã€æ‰“ç‚¹ã€ç”»çº¿ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚</li>
</ol>
<h3 data-id="heading-2">2. ç“¦ç‰‡æ•°æ®å‡†å¤‡</h3>
<h4 data-id="heading-3">ï¼ˆ1ï¼‰æ•°æ®ä¸‹è½½å·¥å…·</h4>
<p>æ¨èä½¿ç”¨ã€Œå…¨èƒ½åœ°å›¾ä¸‹è½½å™¨ã€æˆ–ã€Œæ°´ç»æ³¨åœ°å›¾ä¸‹è½½å™¨ã€ï¼Œè¿™ç±»å·¥å…·æ”¯æŒï¼š</p>
<ul>
<li>é€‰æ‹©åœ°å›¾å±‚çº§ï¼ˆå»ºè®® 1-10 çº§ï¼Œå±‚çº§è¶Šé«˜æ•°æ®é‡è¶Šå¤§ï¼‰ï¼›</li>
<li>æ¡†é€‰ä¸‹è½½åŒºåŸŸï¼ˆå¦‚å…¨å›½ã€æŸçœä»½ï¼‰ï¼›</li>
<li>å¯¼å‡ºç“¦ç‰‡ä¸º<code>{z}/{x}/{y}.jpg/png</code>æ ¼å¼ï¼ˆç¬¦åˆ Leaflet ç“¦ç‰‡åŠ è½½è§„èŒƒï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4">ï¼ˆ2ï¼‰æ•°æ®å­˜å‚¨æ–¹å¼</h4>
<ul>
<li><strong>è½»é‡åœºæ™¯</strong>ï¼šå±‚çº§â‰¤5ã€åŒºåŸŸè¾ƒå°çš„ç“¦ç‰‡ï¼Œå¯ç›´æ¥æ”¾å…¥å‰ç«¯é¡¹ç›®çš„<code>public</code>ç›®å½•ï¼›</li>
<li><strong>ä¸­å¤§å‹åœºæ™¯</strong>ï¼šå±‚çº§é«˜ã€åŒºåŸŸå¤§çš„ç“¦ç‰‡ï¼Œå»ºè®®éƒ¨ç½²åˆ° MinIOï¼ˆå†…ç½‘å¯¹è±¡å­˜å‚¨ï¼‰æˆ–å†…ç½‘ HTTP æœåŠ¡å™¨ï¼Œé€šè¿‡å†…ç½‘åœ°å€è®¿é—®ã€‚</li>
</ul>
<h3 data-id="heading-5">3. å‰ç«¯æ ¸å¿ƒå®ç°ï¼ˆVue+Leafletï¼‰</h3>
<p>ä»¥ä¸‹æ˜¯å®Œæ•´çš„ç¦»çº¿åœ°å›¾å®ç°ä»£ç ï¼ŒåŒ…å«åœ°å›¾åˆå§‹åŒ–ã€å¤šå›¾å±‚åˆ‡æ¢ã€ç‚¹ä½æ ‡è®°ã€å¼¹çª—äº¤äº’ç­‰æ ¸å¿ƒåŠŸèƒ½
vue</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"offline-map-container"</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- åœ°å›¾å®¹å™¨ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"mapContainer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"map-container"</span> /&gt;</span>
    <span class="hljs-comment">&lt;!-- å›¾å±‚åˆ‡æ¢æ§ä»¶ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('satellite')"</span>&gt;</span>å«æ˜Ÿå›¾<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('hybrid')"</span>&gt;</span>æ··åˆæ¨¡å¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('overlay')"</span>&gt;</span>ä»…æ ‡æ³¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> L <span class="hljs-keyword">from</span> <span class="hljs-string">'leaflet'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'leaflet/dist/leaflet.css'</span>
<span class="hljs-comment">// è‡ªå®šä¹‰æ ‡è®°å›¾æ ‡ï¼ˆéœ€è‡ªè¡Œå‡†å¤‡ï¼‰</span>
<span class="hljs-keyword">import</span> blueIcon <span class="hljs-keyword">from</span> <span class="hljs-string">'@/assets/map/marker-icon.png'</span>
<span class="hljs-keyword">import</span> redIcon <span class="hljs-keyword">from</span> <span class="hljs-string">'@/assets/map/marker-icon-red.png'</span>
<span class="hljs-keyword">import</span> shadowIcon <span class="hljs-keyword">from</span> <span class="hljs-string">'@/assets/map/marker-shadow.png'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'OfflineMap'</span>,
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">satelliteLayer</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// å«æ˜Ÿå›¾å›¾å±‚</span>
      <span class="hljs-attr">overlayLayer</span>: <span class="hljs-literal">null</span>,   <span class="hljs-comment">// æ ‡æ³¨å›¾å±‚</span>
      <span class="hljs-attr">currentLayerType</span>: <span class="hljs-string">'hybrid'</span>, <span class="hljs-comment">// é»˜è®¤æ··åˆå›¾å±‚</span>
      <span class="hljs-attr">chinaCenter</span>: [<span class="hljs-number">35.8617</span>, <span class="hljs-number">104.1954</span>], <span class="hljs-comment">// ä¸­å›½åœ°ç†ä¸­å¿ƒç‚¹</span>
      <span class="hljs-attr">defaultZoom</span>: <span class="hljs-number">6</span>, <span class="hljs-comment">// é»˜è®¤ç¼©æ”¾çº§åˆ«</span>
      <span class="hljs-comment">// æ¨¡æ‹Ÿç‚¹ä½æ•°æ®ï¼ˆå®é™…å¯æ›¿æ¢ä¸ºä¸šåŠ¡æ•°æ®ï¼‰</span>
      <span class="hljs-attr">markerDataList</span>: [
        { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'åŒ—äº¬'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">39.9042</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">116.4074</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ä¸­å›½é¦–éƒ½ï¼Œæ”¿æ²»æ–‡åŒ–ä¸­å¿ƒ'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸Šæµ·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">31.2304</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">121.4737</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'å›½é™…åŒ–å¤§éƒ½å¸‚ï¼Œç»æµä¸­å¿ƒ'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¹¿å·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">23.1291</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">113.2644</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'åå—é—¨æˆ·ï¼Œå•†è´¸ä¸­å¿ƒ'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ·±åœ³'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">22.5431</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">114.0579</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç§‘æŠ€åˆ›æ–°ä¹‹éƒ½ï¼Œç»æµç‰¹åŒº'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆéƒ½'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.5728</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">104.0668</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'è¥¿å—é‡é•‡ï¼Œå¤©åºœä¹‹å›½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'é‡åº†'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">29.5628</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">106.5516</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç›´è¾–å¸‚ï¼Œå±±åŸé›¾éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'è¥¿å®‰'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">34.3416</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">108.9398</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'åä¸‰æœå¤éƒ½ï¼Œå†å²æ–‡åŒ–ååŸ'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ­¦æ±‰'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.5928</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">114.3055</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ä¹çœé€šè¡¢ï¼Œä¸­éƒ¨æ ¸å¿ƒåŸå¸‚'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ­å·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.2741</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">120.1551</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç”µå•†ä¹‹éƒ½ï¼Œé£æ™¯æ—…æ¸¸åŸå¸‚'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å—äº¬'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">32.0603</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">118.7969</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'å…­æœå¤éƒ½ï¼Œåä¸œé‡è¦åŸå¸‚'</span> }
      ],
      <span class="hljs-attr">markers</span>: [], <span class="hljs-comment">// å­˜å‚¨æ ‡è®°å®ä¾‹</span>
      <span class="hljs-attr">activeMarkerId</span>: <span class="hljs-literal">null</span> <span class="hljs-comment">// å½“å‰æ¿€æ´»çš„ç‚¹ä½ID</span>
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initMap</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initDefaultMarkers</span>()
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-comment">// ç»„ä»¶é”€æ¯æ—¶æ¸…ç†åœ°å›¾èµ„æºï¼Œé¿å…å†…å­˜æ³„æ¼</span>
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>) {
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">removeLayer</span>(item.<span class="hljs-property">marker</span>))
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">remove</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = <span class="hljs-literal">null</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-comment">// åˆå§‹åŒ–åœ°å›¾</span>
    <span class="hljs-title function_">initMap</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">mapContainer</span>) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'åœ°å›¾å®¹å™¨ä¸å­˜åœ¨ï¼'</span>)
        <span class="hljs-keyword">return</span>
      }

      <span class="hljs-comment">// åˆ›å»ºåœ°å›¾å®ä¾‹å¹¶å®šä½åˆ°ä¸­å›½ä¸­å¿ƒ</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = L.<span class="hljs-title function_">map</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">mapContainer</span>).<span class="hljs-title function_">setView</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">chinaCenter</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultZoom</span>)

      <span class="hljs-comment">// åŠ è½½å†…ç½‘å«æ˜Ÿå›¾ç“¦ç‰‡ï¼ˆæ›¿æ¢ä¸ºä½ çš„å†…ç½‘ç“¦ç‰‡åœ°å€ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span> = L.<span class="hljs-title function_">tileLayer</span>(<span class="hljs-string">'#######/juicefs-vol-001/public/demo/map/satellite/{z}/{x}/{y}.jpg'</span>, {
        <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">10</span>,
        <span class="hljs-attr">tileSize</span>: <span class="hljs-number">256</span>,
        <span class="hljs-attr">noWrap</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// ç¦æ­¢åœ°å›¾å¾ªç¯æ˜¾ç¤º</span>
        <span class="hljs-attr">attribution</span>: <span class="hljs-string">'ç¦»çº¿åœ°å›¾æ•°æ®'</span>
      })

      <span class="hljs-comment">// åŠ è½½å†…ç½‘æ ‡æ³¨ç“¦ç‰‡</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span> = L.<span class="hljs-title function_">tileLayer</span>(<span class="hljs-string">'#######/juicefs-vol-001/public/demo/map/overlay/{z}/{x}/{y}.png'</span>, {
        <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>,
        <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">5</span>,
        <span class="hljs-attr">tileSize</span>: <span class="hljs-number">256</span>,
        <span class="hljs-attr">noWrap</span>: <span class="hljs-literal">true</span>,
        <span class="hljs-attr">pane</span>: <span class="hljs-string">'overlayPane'</span>, <span class="hljs-comment">// æ ‡æ³¨å±‚ç‹¬ç«‹é¢æ¿</span>
        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>, <span class="hljs-comment">// æ ‡æ³¨é€æ˜åº¦</span>
        <span class="hljs-attr">attribution</span>: <span class="hljs-string">''</span>
      })

      <span class="hljs-comment">// é»˜è®¤æ˜¾ç¤ºæ··åˆå›¾å±‚ï¼ˆå«æ˜Ÿå›¾+æ ‡æ³¨ï¼‰</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

      <span class="hljs-comment">// æ·»åŠ æ¯”ä¾‹å°ºæ§ä»¶</span>
      L.<span class="hljs-property">control</span>.<span class="hljs-title function_">scale</span>().<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

      <span class="hljs-comment">// ç“¦ç‰‡åŠ è½½å¤±è´¥å¤„ç†</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tileerror'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'å«æ˜Ÿå›¾ç“¦ç‰‡åŠ è½½å¤±è´¥:'</span>, error)
      })
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">on</span>(<span class="hljs-string">'tileerror'</span>, <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">'æ ‡æ³¨ç“¦ç‰‡åŠ è½½å¤±è´¥:'</span>, error)
      })
    },

    <span class="hljs-comment">// åˆå§‹åŒ–ç‚¹ä½æ ‡è®°</span>
    <span class="hljs-title function_">initDefaultMarkers</span>(<span class="hljs-params"/>) {
      <span class="hljs-comment">// å®šä¹‰é»˜è®¤å›¾æ ‡å’Œæ¿€æ´»æ€å›¾æ ‡</span>
      <span class="hljs-keyword">const</span> defaultIcon = L.<span class="hljs-title function_">icon</span>({
        <span class="hljs-attr">iconUrl</span>: blueIcon,
        <span class="hljs-attr">shadowUrl</span>: shadowIcon,
        <span class="hljs-attr">iconSize</span>: [<span class="hljs-number">25</span>, <span class="hljs-number">41</span>],
        <span class="hljs-attr">iconAnchor</span>: [<span class="hljs-number">12</span>, <span class="hljs-number">41</span>],
        <span class="hljs-attr">popupAnchor</span>: [<span class="hljs-number">1</span>, -<span class="hljs-number">34</span>]
      })

      <span class="hljs-keyword">const</span> activeRedIcon = L.<span class="hljs-title function_">icon</span>({
        <span class="hljs-attr">iconUrl</span>: redIcon,
        <span class="hljs-attr">shadowUrl</span>: shadowIcon,
        <span class="hljs-attr">iconSize</span>: [<span class="hljs-number">25</span>, <span class="hljs-number">41</span>],
        <span class="hljs-attr">iconAnchor</span>: [<span class="hljs-number">12</span>, <span class="hljs-number">41</span>],
        <span class="hljs-attr">popupAnchor</span>: [<span class="hljs-number">1</span>, -<span class="hljs-number">34</span>]
      })

      <span class="hljs-comment">// éå†åˆ›å»ºç‚¹ä½æ ‡è®°</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">markerDataList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">markerData</span> =&gt;</span> {
        <span class="hljs-keyword">const</span> marker = L.<span class="hljs-title function_">marker</span>([markerData.<span class="hljs-property">lat</span>, markerData.<span class="hljs-property">lng</span>], {
          <span class="hljs-attr">icon</span>: defaultIcon,
          <span class="hljs-attr">draggable</span>: <span class="hljs-literal">false</span> <span class="hljs-comment">// ç¦æ­¢æ‹–æ‹½ï¼Œå¦‚éœ€å¼€å¯å¯æ”¹ä¸ºtrue</span>
        }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

        <span class="hljs-comment">// ç‚¹ä½ç‚¹å‡»äº‹ä»¶ï¼šåˆ‡æ¢æ¿€æ´»æ€+æ˜¾ç¤ºå¼¹çª—</span>
        marker.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// æ¢å¤ä¸Šä¸€ä¸ªæ¿€æ´»ç‚¹ä½çš„é»˜è®¤æ ·å¼</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span> !== <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">const</span> prevActiveMarker = <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span>)
            <span class="hljs-keyword">if</span> (prevActiveMarker) {
              prevActiveMarker.<span class="hljs-property">marker</span>.<span class="hljs-title function_">setIcon</span>(defaultIcon)
            }
          }

          <span class="hljs-comment">// è®¾ç½®å½“å‰ç‚¹ä½ä¸ºæ¿€æ´»æ€</span>
          marker.<span class="hljs-title function_">setIcon</span>(activeRedIcon)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span> = markerData.<span class="hljs-property">id</span>

          <span class="hljs-comment">// ç»‘å®šå¹¶æ‰“å¼€è‡ªå®šä¹‰å¼¹çª—</span>
          marker.<span class="hljs-title function_">bindPopup</span>(<span class="hljs-string">`
            &lt;div class="marker-popup"&gt;
              &lt;h3 style="margin:0 0 8px 0; color:#e53935;"&gt;<span class="hljs-subst">${markerData.name}</span>&lt;/h3&gt;
              &lt;p style="margin:4px 0;"&gt;ç»çº¬åº¦ï¼š<span class="hljs-subst">${markerData.lat.toFixed(<span class="hljs-number">4</span>)}</span>, <span class="hljs-subst">${markerData.lng.toFixed(<span class="hljs-number">4</span>)}</span>&lt;/p&gt;
              &lt;p style="margin:4px 0;"&gt;è¯¦æƒ…ï¼š<span class="hljs-subst">${markerData.desc}</span>&lt;/p&gt;
            &lt;/div&gt;
          `</span>).<span class="hljs-title function_">openPopup</span>()
        })

        <span class="hljs-comment">// å­˜å‚¨ç‚¹ä½å®ä¾‹ï¼Œæ–¹ä¾¿åç»­ç®¡ç†</span>
        <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">push</span>({
          <span class="hljs-attr">id</span>: markerData.<span class="hljs-property">id</span>,
          <span class="hljs-attr">marker</span>: marker,
          <span class="hljs-attr">data</span>: markerData
        })
      })
    },

    <span class="hljs-comment">// åˆ‡æ¢åœ°å›¾å›¾å±‚</span>
    <span class="hljs-title function_">switchLayer</span>(<span class="hljs-params">type</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentLayerType</span> === type) <span class="hljs-keyword">return</span>

      <span class="hljs-comment">// ç§»é™¤æ‰€æœ‰ç“¦ç‰‡å›¾å±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">eachLayer</span>(<span class="hljs-function">(<span class="hljs-params">layer</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (layer <span class="hljs-keyword">instanceof</span> L.<span class="hljs-property">TileLayer</span>) {
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">removeLayer</span>(layer)
        }
      })

      <span class="hljs-comment">// æ ¹æ®ç±»å‹æ·»åŠ å¯¹åº”å›¾å±‚</span>
      <span class="hljs-keyword">switch</span> (type) {
        <span class="hljs-keyword">case</span> <span class="hljs-string">'satellite'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'overlay'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
          <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">case</span> <span class="hljs-string">'hybrid'</span>:
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
          <span class="hljs-keyword">break</span>
      }

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentLayerType</span> = type
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.offline-map-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">position</span>: relative;
}

<span class="hljs-selector-class">.map-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.controls</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
  <span class="hljs-attribute">background</span>: white;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);
}

<span class="hljs-selector-class">.controls</span> <span class="hljs-selector-tag">button</span> {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> <span class="hljs-number">5px</span>;
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">cursor</span>: pointer;
  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;
  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.2s</span>;
}

<span class="hljs-selector-class">.controls</span> <span class="hljs-selector-tag">button</span><span class="hljs-selector-pseudo">:hover</span> {
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;
  <span class="hljs-attribute">border-color</span>: <span class="hljs-number">#999</span>;
}

<span class="hljs-comment">/* ç¾åŒ–Leafletå¼¹çª—æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.leaflet-popup-content-wrapper) {
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">3px</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);
}

:<span class="hljs-built_in">deep</span>(.leaflet-popup-content) {
  <span class="hljs-attribute">margin</span>: <span class="hljs-number">12px</span> <span class="hljs-number">16px</span>;
  <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span> <span class="hljs-meta">!important</span>;
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>
</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/de71f0cdfa37441a950a004533beb80a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5bCP5rKz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357160&amp;x-signature=VFnqlhQ9cU2aTtfcIjCkGF2qVDY%3D" alt="image.png" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/dd3c4812d7644084b524166999161053~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5bCP5rKz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357160&amp;x-signature=LNvV1OqdCDPuvACt3nIoYhLtAxo%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">å½“ç„¶ä¹Ÿæ”¯æŒ åœ°å›¾æ‰“ç‚¹è‡ªå®šä¹‰ç»„ä»¶ å’Œ ç”»çº¿</h3>
<pre><code class="hljs language-js" lang="js">
&lt;template&gt;
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"offline-map-container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">"mapContainer"</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"map-container"</span> /&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"controls"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('satellite')"</span>&gt;</span>å«æ˜Ÿå›¾<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('hybrid')"</span>&gt;</span>æ··åˆæ¨¡å¼<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"switchLayer('overlay')"</span>&gt;</span>ä»…æ ‡æ³¨<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> <span class="hljs-title class_">Vue</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>
<span class="hljs-keyword">import</span> L <span class="hljs-keyword">from</span> <span class="hljs-string">'leaflet'</span>
<span class="hljs-keyword">import</span> <span class="hljs-string">'leaflet/dist/leaflet.css'</span>
<span class="hljs-keyword">import</span> <span class="hljs-title class_">MapMarker</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./MapMarker.vue'</span> <span class="hljs-comment">// ç¡®ä¿è·¯å¾„æ­£ç¡®</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">name</span>: <span class="hljs-string">'OfflineMap'</span>,
  <span class="hljs-title function_">data</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">return</span> {
      <span class="hljs-attr">map</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">satelliteLayer</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">overlayLayer</span>: <span class="hljs-literal">null</span>,
      <span class="hljs-attr">currentLayerType</span>: <span class="hljs-string">'hybrid'</span>,
      <span class="hljs-attr">chinaCenter</span>: [<span class="hljs-number">35.8617</span>, <span class="hljs-number">104.1954</span>],
      <span class="hljs-attr">defaultZoom</span>: <span class="hljs-number">5</span>,
      <span class="hljs-attr">markerDataList</span>: [
        { <span class="hljs-attr">id</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'åŒ—äº¬'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">39.9042</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">116.4074</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ä¸­å›½é¦–éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'ä¸Šæµ·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">31.2304</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">121.4737</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç»æµä¸­å¿ƒ'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å¹¿å·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">23.1291</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">113.2644</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'åå—é—¨æˆ·'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">4</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ·±åœ³'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">22.5431</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">114.0579</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç§‘æŠ€åˆ›æ–°ä¹‹éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æˆéƒ½'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.5728</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">104.0668</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'å¤©åºœä¹‹å›½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'é‡åº†'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">29.5628</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">106.5516</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'å±±åŸé›¾éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">7</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'è¥¿å®‰'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">34.3416</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">108.9398</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'åä¸‰æœå¤éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ­¦æ±‰'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.5928</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">114.3055</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ä¹çœé€šè¡¢'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">9</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'æ­å·'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">30.2741</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">120.1551</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'ç”µå•†ä¹‹éƒ½'</span> },
        { <span class="hljs-attr">id</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">'å—äº¬'</span>, <span class="hljs-attr">lat</span>: <span class="hljs-number">32.0603</span>, <span class="hljs-attr">lng</span>: <span class="hljs-number">118.7969</span>, <span class="hljs-attr">desc</span>: <span class="hljs-string">'å…­æœå¤éƒ½'</span> }
      ],
      <span class="hljs-attr">markers</span>: [],
      <span class="hljs-attr">lines</span>: [], <span class="hljs-comment">// å­˜å‚¨çº¿æ®µå®ä¾‹</span>
      <span class="hljs-attr">activeMarkerId</span>: <span class="hljs-literal">null</span>
    }
  },
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"/>) {
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initMap</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initDefaultMarkers</span>()
    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">initPolylines</span>() <span class="hljs-comment">// åˆå§‹åŒ–å„ç§æ ·å¼çš„çº¿</span>
  },
  <span class="hljs-title function_">beforeUnmount</span>(<span class="hljs-params"/>) {
    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>) {
      <span class="hljs-comment">// é”€æ¯ Vue å®ä¾‹ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (item.<span class="hljs-property">vueInstance</span>) item.<span class="hljs-property">vueInstance</span>.$destroy()
      })
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">remove</span>()
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = <span class="hljs-literal">null</span>
    }
  },
  <span class="hljs-attr">methods</span>: {
    <span class="hljs-title function_">initMap</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">if</span> (!<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">mapContainer</span>) <span class="hljs-keyword">return</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span> = L.<span class="hljs-title function_">map</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">$refs</span>.<span class="hljs-property">mapContainer</span>).<span class="hljs-title function_">setView</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">chinaCenter</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">defaultZoom</span>)

      <span class="hljs-comment">// ç¦»çº¿ç“¦ç‰‡å›¾å±‚</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span> = L.<span class="hljs-title function_">tileLayer</span>(<span class="hljs-string">'##########/juicefs-vol-001/public/demo/map/satellite/{z}/{x}/{y}.jpg'</span>, {
        <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">10</span>, <span class="hljs-attr">tileSize</span>: <span class="hljs-number">256</span>, <span class="hljs-attr">noWrap</span>: <span class="hljs-literal">true</span>
      })
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span> = L.<span class="hljs-title function_">tileLayer</span>(<span class="hljs-string">'##########/juicefs-vol-001/public/demo/map/overlay/{z}/{x}/{y}.png'</span>, {
        <span class="hljs-attr">minZoom</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">5</span>, <span class="hljs-attr">tileSize</span>: <span class="hljs-number">256</span>, <span class="hljs-attr">noWrap</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">pane</span>: <span class="hljs-string">'overlayPane'</span>
      })

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
      L.<span class="hljs-property">control</span>.<span class="hljs-title function_">scale</span>().<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
    },

    <span class="hljs-title function_">initDefaultMarkers</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title class_">MarkerConstructor</span> = <span class="hljs-title class_">Vue</span>.<span class="hljs-title function_">extend</span>(<span class="hljs-title class_">MapMarker</span>)

      <span class="hljs-variable language_">this</span>.<span class="hljs-property">markerDataList</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">markerData</span> =&gt;</span> {
        <span class="hljs-comment">// åˆ›å»ºå¹¶æŒ‚è½½ Vue ç»„ä»¶</span>
        <span class="hljs-keyword">const</span> instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MarkerConstructor</span>({
          <span class="hljs-attr">propsData</span>: { <span class="hljs-attr">name</span>: markerData.<span class="hljs-property">name</span>, <span class="hljs-attr">active</span>: <span class="hljs-literal">false</span> }
        }).$mount()

        <span class="hljs-comment">// ä½¿ç”¨ L.divIcon æ‰¿è½½ Vue ç»„ä»¶çš„ DOM</span>
        <span class="hljs-keyword">const</span> icon = L.<span class="hljs-title function_">divIcon</span>({
          <span class="hljs-attr">html</span>: instance.<span class="hljs-property">$el</span>,
          <span class="hljs-attr">className</span>: <span class="hljs-string">'custom-leaflet-icon'</span>, <span class="hljs-comment">// å¿…é¡»åœ¨ CSS ä¸­é‡ç½®æ ·å¼</span>
          <span class="hljs-attr">iconSize</span>: [<span class="hljs-number">30</span>, <span class="hljs-number">30</span>],
          <span class="hljs-attr">iconAnchor</span>: [<span class="hljs-number">15</span>, <span class="hljs-number">15</span>]
        })

        <span class="hljs-keyword">const</span> marker = L.<span class="hljs-title function_">marker</span>([markerData.<span class="hljs-property">lat</span>, markerData.<span class="hljs-property">lng</span>], { icon }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

        marker.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-function">() =&gt;</span> {
          <span class="hljs-comment">// åˆ‡æ¢çŠ¶æ€é€»è¾‘</span>
          <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span> !== <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">const</span> prev = <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">id</span> === <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span>)
            <span class="hljs-keyword">if</span> (prev) prev.<span class="hljs-property">vueInstance</span>.<span class="hljs-property">active</span> = <span class="hljs-literal">false</span>
          }
          instance.<span class="hljs-property">active</span> = <span class="hljs-literal">true</span>
          <span class="hljs-variable language_">this</span>.<span class="hljs-property">activeMarkerId</span> = markerData.<span class="hljs-property">id</span>

          marker.<span class="hljs-title function_">bindPopup</span>(<span class="hljs-string">`&lt;b&gt;<span class="hljs-subst">${markerData.name}</span>&lt;/b&gt;&lt;br&gt;<span class="hljs-subst">${markerData.desc}</span>`</span>).<span class="hljs-title function_">openPopup</span>()
        })

        <span class="hljs-variable language_">this</span>.<span class="hljs-property">markers</span>.<span class="hljs-title function_">push</span>({ <span class="hljs-attr">id</span>: markerData.<span class="hljs-property">id</span>, marker, <span class="hljs-attr">vueInstance</span>: instance })
      })
    },

    <span class="hljs-title function_">initPolylines</span>(<span class="hljs-params"/>) {
      <span class="hljs-keyword">const</span> <span class="hljs-title function_">getPos</span> = (<span class="hljs-params">id</span>) =&gt; {
        <span class="hljs-keyword">const</span> d = <span class="hljs-variable language_">this</span>.<span class="hljs-property">markerDataList</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">id</span> === id)
        <span class="hljs-keyword">return</span> [d.<span class="hljs-property">lat</span>, d.<span class="hljs-property">lng</span>]
      }

      <span class="hljs-comment">// 1. æ™®é€šç™½è‰²å®çº¿ (åŒ—äº¬ - å—äº¬)</span>
      L.<span class="hljs-title function_">polyline</span>([<span class="hljs-title function_">getPos</span>(<span class="hljs-number">1</span>), <span class="hljs-title function_">getPos</span>(<span class="hljs-number">10</span>)], {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'white'</span>, <span class="hljs-attr">weight</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.6</span>
      }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

      <span class="hljs-comment">// 2. çº¢è‰²è™šçº¿ (ä¸Šæµ· - æ­å·)</span>
      L.<span class="hljs-title function_">polyline</span>([<span class="hljs-title function_">getPos</span>(<span class="hljs-number">2</span>), <span class="hljs-title function_">getPos</span>(<span class="hljs-number">9</span>)], {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#ff5252'</span>, <span class="hljs-attr">weight</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">dashArray</span>: <span class="hljs-string">'10, 10'</span>
      }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

      <span class="hljs-comment">// 3. è“è‰²æµå…‰åŠ¨ç”»çº¿ (è¥¿å®‰ - æ­¦æ±‰ - å¹¿å·)</span>
      L.<span class="hljs-title function_">polyline</span>([<span class="hljs-title function_">getPos</span>(<span class="hljs-number">7</span>), <span class="hljs-title function_">getPos</span>(<span class="hljs-number">8</span>), <span class="hljs-title function_">getPos</span>(<span class="hljs-number">3</span>)], {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#00e5ff'</span>,
        <span class="hljs-attr">weight</span>: <span class="hljs-number">4</span>,
        <span class="hljs-attr">dashArray</span>: <span class="hljs-string">'15, 15'</span>,
        <span class="hljs-attr">className</span>: <span class="hljs-string">'polyline-path-flow'</span> <span class="hljs-comment">// å¯¹åº” CSS åŠ¨ç”»</span>
      }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)

      <span class="hljs-comment">// 4. é»„è‰²å®½çº¿ (æˆéƒ½ - é‡åº†)</span>
      L.<span class="hljs-title function_">polyline</span>([<span class="hljs-title function_">getPos</span>(<span class="hljs-number">5</span>), <span class="hljs-title function_">getPos</span>(<span class="hljs-number">6</span>)], {
        <span class="hljs-attr">color</span>: <span class="hljs-string">'#ffeb3b'</span>, <span class="hljs-attr">weight</span>: <span class="hljs-number">8</span>, <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.3</span>
      }).<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
    },

    <span class="hljs-title function_">switchLayer</span>(<span class="hljs-params">type</span>) {
      <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">currentLayerType</span> === type) <span class="hljs-keyword">return</span>
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">eachLayer</span>(<span class="hljs-function"><span class="hljs-params">layer</span> =&gt;</span> {
        <span class="hljs-keyword">if</span> (layer <span class="hljs-keyword">instanceof</span> L.<span class="hljs-property">TileLayer</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">removeLayer</span>(layer)
      })
      <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'satellite'</span> || type === <span class="hljs-string">'hybrid'</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">satelliteLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
      <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'overlay'</span> || type === <span class="hljs-string">'hybrid'</span>) <span class="hljs-variable language_">this</span>.<span class="hljs-property">overlayLayer</span>.<span class="hljs-title function_">addTo</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>)
      <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentLayerType</span> = type
    }
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.offline-map-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;
  <span class="hljs-attribute">position</span>: relative;
  <span class="hljs-attribute">background</span>: <span class="hljs-number">#001529</span>;
  <span class="hljs-comment">/* æ·±è‰²åº•è‰²è®©çº¿æ¡æ›´æ˜æ˜¾ */</span>
}

<span class="hljs-selector-class">.map-container</span> {
  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
}

<span class="hljs-selector-class">.controls</span> {
  <span class="hljs-attribute">position</span>: absolute;
  <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">right</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">z-index</span>: <span class="hljs-number">1000</span>;
  <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.9</span>);
  <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;
  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;
}

<span class="hljs-comment">/* å…³é”®ï¼šé‡ç½® Leaflet divIcon çš„é»˜è®¤æ ·å¼ */</span>
:<span class="hljs-built_in">deep</span>(.custom-leaflet-icon) {
  <span class="hljs-attribute">background</span>: transparent <span class="hljs-meta">!important</span>;
  <span class="hljs-attribute">border</span>: none <span class="hljs-meta">!important</span>;
}

<span class="hljs-comment">/* çº¿æ¡æµå…‰åŠ¨ç”» */</span>
:<span class="hljs-built_in">deep</span>(.polyline-path-flow) {
  stroke-dasharray: <span class="hljs-number">20</span>, <span class="hljs-number">20</span>;
  <span class="hljs-attribute">animation</span>: line-flow <span class="hljs-number">10s</span> linear infinite;
}

<span class="hljs-keyword">@keyframes</span> line-flow {
  <span class="hljs-selector-tag">from</span> {
    stroke-dashoffset: <span class="hljs-number">400</span>;
  }

  <span class="hljs-selector-tag">to</span> {
    stroke-dashoffset: <span class="hljs-number">0</span>;
  }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span>

</span></code></pre>
<pre><code class="hljs language-js" lang="js">
&lt;template&gt;
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"custom-marker"</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">"{ 'is-active': active }"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"marker-container"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"marker-icon"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{{ name[0] }}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"marker-shadow"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
&lt;/template&gt;

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
    <span class="hljs-attr">props</span>: [<span class="hljs-string">'name'</span>, <span class="hljs-string">'active'</span>]
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span>

<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="css">
<span class="hljs-selector-class">.custom-marker</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">cursor</span>: pointer;
}

<span class="hljs-selector-class">.marker-container</span> {
    <span class="hljs-attribute">position</span>: relative;
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">justify-content</span>: center;
}

<span class="hljs-selector-class">.marker-icon</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#2196f3</span>;
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">50%</span> <span class="hljs-number">0</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">45deg</span>);
    <span class="hljs-attribute">display</span>: flex;
    <span class="hljs-attribute">align-items</span>: center;
    <span class="hljs-attribute">justify-content</span>: center;
    <span class="hljs-attribute">color</span>: white;
    <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid white;
    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.3</span>);
    <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span>;
}

<span class="hljs-selector-class">.marker-icon</span> <span class="hljs-selector-tag">span</span> {
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);
    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;
    <span class="hljs-attribute">font-weight</span>: bold;
}

<span class="hljs-comment">/* æ¿€æ´»çŠ¶æ€æ ·å¼ */</span>
<span class="hljs-selector-class">.is-active</span> <span class="hljs-selector-class">.marker-icon</span> {
    <span class="hljs-attribute">background</span>: <span class="hljs-number">#e53935</span>;
    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">rotate</span>(-<span class="hljs-number">45deg</span>) <span class="hljs-built_in">scale</span>(<span class="hljs-number">1.2</span>);
}

<span class="hljs-comment">/* å‘¼å¸åŠ¨ç”» */</span>
<span class="hljs-selector-class">.is-active</span> <span class="hljs-selector-class">.marker-shadow</span> {
    <span class="hljs-attribute">position</span>: absolute;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;
    <span class="hljs-attribute">margin-left</span>: -<span class="hljs-number">10px</span>;
    <span class="hljs-attribute">margin-top</span>: -<span class="hljs-number">10px</span>;
    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">229</span>, <span class="hljs-number">57</span>, <span class="hljs-number">53</span>, <span class="hljs-number">0.4</span>);
    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">animation</span>: pulse <span class="hljs-number">1.5s</span> infinite;
}

<span class="hljs-keyword">@keyframes</span> pulse {
    <span class="hljs-number">0%</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>);
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;
    }

    <span class="hljs-number">100%</span> {
        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">3</span>);
        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;
    }
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span>

</code></pre>
<p>æ•ˆæœå¦‚ä¸‹</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f6d9d7c8fa6d4062a843b7d3fdd1764f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5LiJ5bCP5rKz:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357160&amp;x-signature=qDbWd0tOu4tD0rezFpHi2pDZjks%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-7">4. æ ¸å¿ƒåŠŸèƒ½è¯´æ˜</h3>
<ul>
<li><strong>å¤šå›¾å±‚åˆ‡æ¢</strong>ï¼šæ”¯æŒå«æ˜Ÿå›¾ã€æ ‡æ³¨å±‚ã€æ··åˆæ¨¡å¼ä¸‰ç§å›¾å±‚åˆ‡æ¢ï¼›</li>
<li><strong>ç‚¹ä½æ ‡è®°</strong>ï¼šè‡ªå®šä¹‰å›¾æ ‡æ ·å¼ï¼Œç‚¹å‡»ç‚¹ä½åˆ‡æ¢æ¿€æ´»æ€å¹¶æ˜¾ç¤ºè¯¦æƒ…å¼¹çª—ï¼›</li>
<li><strong>èµ„æºæ¸…ç†</strong>ï¼šç»„ä»¶é”€æ¯æ—¶æ¸…ç†åœ°å›¾å®ä¾‹å’Œæ ‡è®°ï¼Œé¿å…å†…å­˜æ³„æ¼ï¼›</li>
<li><strong>å¼‚å¸¸å¤„ç†</strong>ï¼šæ·»åŠ ç“¦ç‰‡åŠ è½½å¤±è´¥ç›‘å¬ï¼Œä¾¿äºæ’æŸ¥å†…ç½‘ç“¦ç‰‡è®¿é—®é—®é¢˜ã€‚</li>
</ul>
<h2 data-id="heading-8">äºŒã€æ³•å¾‹é£é™©ä¸ä½¿ç”¨æ³¨æ„äº‹é¡¹</h2>
<p>ç¦»çº¿åœ°å›¾æ–¹æ¡ˆè™½èƒ½è§£å†³å†…ç½‘ä½¿ç”¨éœ€æ±‚ï¼Œä½†åœ°å›¾æ•°æ®æ¶‰åŠæµ‹ç»˜ã€åœ°ç†ä¿¡æ¯å®‰å…¨ç­‰æ•æ„Ÿé¢†åŸŸï¼Œ<strong>åˆ‡å‹¿ â€œæ‹¿æ¥ä¸»ä¹‰â€</strong> ï¼Œéœ€é‡ç‚¹å…³æ³¨ä»¥ä¸‹åˆè§„è¦æ±‚ï¼š</p>
<h3 data-id="heading-9">1. æ ¸å¿ƒæ³•å¾‹é£é™©</h3>
<h4 data-id="heading-10">ï¼ˆ1ï¼‰æµ‹ç»˜èµ„è´¨åˆè§„é£é™©</h4>
<p>æ ¹æ®ã€Šä¸­åäººæ°‘å…±å’Œå›½æµ‹ç»˜æ³•ã€‹ï¼Œåœ°å›¾æ•°æ®å±äºæµ‹ç»˜æˆæœï¼Œæœªç»è®¸å¯ä¸‹è½½ã€ä½¿ç”¨ã€ä¼ æ’­æµ‹ç»˜æˆæœå¯èƒ½æ¶‰å«Œè¿æ³•ï¼š</p>
<ul>
<li>ç¦æ­¢ä½¿ç”¨æ— åˆæ³•æ¥æºçš„åœ°å›¾ç“¦ç‰‡æ•°æ®ï¼›</li>
<li>ä¼ä¸šè‹¥è‡ªè¡Œé‡‡é›†ã€å¤„ç†åœ°ç†ä¿¡æ¯æ•°æ®ï¼Œéœ€å–å¾—å¯¹åº”çš„æµ‹ç»˜èµ„è´¨ï¼›</li>
<li>ä¸¥ç¦ä¸‹è½½ã€ä½¿ç”¨æ¶‰å¯†åœ°ç†ä¿¡æ¯ï¼ˆå¦‚å†›äº‹ç¦åŒºã€é‡è¦è®¾æ–½åæ ‡ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-11">ï¼ˆ2ï¼‰æ•°æ®æ¥æºåˆè§„é£é™©</h4>
<ul>
<li>é¿å…ä½¿ç”¨ç›—ç‰ˆä¸‹è½½å·¥å…·è·å–åœ°å›¾æ•°æ®ï¼›</li>
<li>æ‹’ç»ä½¿ç”¨æœªç»æˆæƒçš„å•†ä¸šåœ°å›¾ç“¦ç‰‡ï¼ˆå¦‚é«˜å¾·ã€ç™¾åº¦æœªæˆæƒçš„ç¦»çº¿ç“¦ç‰‡ï¼‰ï¼Œå¦åˆ™å¯èƒ½æ¶‰åŠè‘—ä½œæƒä¾µæƒï¼›</li>
<li>ä¼˜å…ˆé€‰æ‹©æœ‰åˆæ³•æˆæƒçš„å¼€æºåœ°å›¾æ•°æ®ï¼ˆå¦‚ OpenStreetMapï¼‰ï¼Œå¹¶éµå®ˆå…¶ä½¿ç”¨åè®®ã€‚</li>
</ul>
<h4 data-id="heading-12">ï¼ˆ3ï¼‰æ•°æ®ä½¿ç”¨èŒƒå›´é£é™©</h4>
<ul>
<li>ç¦»çº¿åœ°å›¾æ•°æ®ä»…é™<strong>å†…ç½‘è‡ªç”¨</strong>ï¼Œç¦æ­¢å¯¹å¤–æä¾›ã€ä¼ æ’­æˆ–ç”¨äºå•†ä¸šç›ˆåˆ©ï¼›</li>
<li>è‹¥æ¶‰åŠå›½å¢ƒçº¿ã€è¡Œæ”¿åŒºåŸŸåˆ’åˆ†ç­‰æ•æ„Ÿå†…å®¹ï¼Œéœ€ç¡®ä¿æ•°æ®ç¬¦åˆå›½å®¶æµ‹ç»˜æ ‡å‡†ï¼Œé¿å…å‡ºç° â€œé—®é¢˜åœ°å›¾â€ã€‚</li>
</ul>
<h3 data-id="heading-13">2. åˆè§„ä½¿ç”¨å»ºè®®</h3>
<ol>
<li>
<p><strong>æ•°æ®æ¥æºå®¡æ ¸</strong>ï¼š</p>
<ul>
<li>ç¡®è®¤åœ°å›¾ç“¦ç‰‡æ•°æ®çš„åˆæ³•æˆæƒï¼Œä¿ç•™æˆæƒæ–‡ä»¶ï¼›</li>
<li>ä¼˜å…ˆä½¿ç”¨å›½å®¶æµ‹ç»˜å±€è®¤å¯çš„åœ°å›¾æ•°æ®ï¼Œé¿å…ä½¿ç”¨å¢ƒå¤–æœªç»å®¡æ ¸çš„åœ°å›¾æ•°æ®ã€‚</li>
</ul>
</li>
<li>
<p><strong>ä½¿ç”¨èŒƒå›´ç®¡æ§</strong>ï¼š</p>
<ul>
<li>åœ¨å†…ç½‘éƒ¨ç½²æ—¶è®¾ç½®è®¿é—®æƒé™ï¼Œä»…é™æˆæƒäººå‘˜ä½¿ç”¨ï¼›</li>
<li>æ˜ç¡®æ•°æ®ä½¿ç”¨ç›®çš„ï¼Œä»…ç”¨äºä¼ä¸šå†…éƒ¨ä¸šåŠ¡ï¼Œä¸æ‰©æ•£ã€ä¸å•†ç”¨ã€‚</li>
</ul>
</li>
<li>
<p><strong>åˆè§„å®¡æŸ¥</strong>ï¼š</p>
<ul>
<li>æ¶‰åŠæ•æ„ŸåŒºåŸŸï¼ˆå¦‚è¾¹å¢ƒã€å†›äº‹åŒºï¼‰çš„åœ°å›¾æ•°æ®ï¼Œéœ€æäº¤æµ‹ç»˜ä¸»ç®¡éƒ¨é—¨å®¡æŸ¥ï¼›</li>
<li>ä¼ä¸šå»ºç«‹åœ°å›¾æ•°æ®ä½¿ç”¨å°è´¦ï¼Œè®°å½•æ•°æ®æ¥æºã€ä½¿ç”¨èŒƒå›´ã€è´£ä»»äººã€‚</li>
</ul>
</li>
<li>
<p><strong>æ›¿ä»£æ–¹æ¡ˆ</strong>ï¼š</p>
<ul>
<li>è‹¥æœ‰æ¡ä»¶ï¼Œä¼˜å…ˆé‡‡è´­æœ‰å†…ç½‘éƒ¨ç½²æˆæƒçš„å•†ä¸šåœ°å›¾æœåŠ¡ï¼ˆå¦‚é«˜å¾· / ç™¾åº¦çš„å†…ç½‘åœ°å›¾è§£å†³æ–¹æ¡ˆï¼‰ï¼Œé™ä½åˆè§„é£é™©ï¼›</li>
<li>å¯¹äºéæ ¸å¿ƒåœºæ™¯ï¼Œå¯ä½¿ç”¨å¼€æºåœ°å›¾æ¡†æ¶ï¼ˆå¦‚ Leaflet+OpenStreetMapï¼‰çš„åˆè§„ç“¦ç‰‡ï¼Œé¿å…æ³•å¾‹é£é™©ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-14">ä¸‰ã€æ€»ç»“</h2>
<p>å†…ç½‘ Web ç¦»çº¿åœ°å›¾çš„å®ç°æ ¸å¿ƒæ˜¯ â€œå¼€æºç“¦ç‰‡ + Leafletâ€ï¼Œè¯¥æ–¹æ¡ˆèƒ½æœ‰æ•ˆè§£å†³å¤–ç½‘ä¾èµ–é—®é¢˜ï¼Œä½†<strong>æ³•å¾‹åˆè§„æ˜¯å‰æ</strong>ã€‚æ€»ç»“æ ¸å¿ƒè¦ç‚¹ï¼š</p>
<ol>
<li>æŠ€æœ¯å±‚é¢ï¼šé€šè¿‡ä¸‹è½½ç“¦ç‰‡ã€å†…ç½‘éƒ¨ç½²ã€Leaflet åŠ è½½ï¼Œå¯å¿«é€Ÿå®ç°ç¦»çº¿åœ°å›¾çš„å±•ç¤ºã€æ‰“ç‚¹ã€ç”»çº¿ç­‰åŠŸèƒ½ï¼›</li>
<li>åˆè§„å±‚é¢ï¼šä¸¥ç¦æ— æˆæƒä½¿ç”¨åœ°å›¾æ•°æ®ï¼Œé¿å… â€œé—®é¢˜åœ°å›¾â€ï¼Œä»…é™å†…ç½‘è‡ªç”¨ï¼Œä¸æ‰©æ•£ã€ä¸å•†ç”¨ï¼›</li>
<li>é£é™©ç®¡æ§ï¼šä¼˜å…ˆé€‰æ‹©åˆæ³•æˆæƒçš„æ•°æ®æ¥æºï¼Œæ¶‰åŠæ•æ„Ÿå†…å®¹éœ€æäº¤å®¡æŸ¥ï¼Œé™ä½æ³•å¾‹é£é™©ã€‚</li>
</ol>
<p>åœ¨å®é™…è½åœ°ä¸­ï¼Œéœ€å¹³è¡¡æŠ€æœ¯å®ç°ä¸åˆè§„è¦æ±‚ï¼Œåˆ‡å‹¿å› è¿½æ±‚åŠŸèƒ½è€Œå¿½è§†åœ°ç†ä¿¡æ¯å®‰å…¨ä¸æ³•å¾‹è§„å®šï¼Œç¡®ä¿ç¦»çº¿åœ°å›¾çš„ä½¿ç”¨ç¬¦åˆå›½å®¶æ³•å¾‹æ³•è§„å’Œä¼ä¸šåˆè§„è¦æ±‚ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Head First å•ä¾‹æ¨¡å¼]]></title>    <link>https://juejin.cn/post/7592251792650977307</link>    <guid>https://juejin.cn/post/7592251792650977307</guid>    <pubDate>2026-01-07T02:08:18.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592251792650977307" data-draft-id="7591681023907233801" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Head First å•ä¾‹æ¨¡å¼"/> <meta itemprop="keywords" content="åç«¯,è®¾è®¡æ¨¡å¼"/> <meta itemprop="datePublished" content="2026-01-07T02:08:18.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·9381691255360"/> <meta itemprop="url" content="https://juejin.cn/user/3485906645565271"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Head First å•ä¾‹æ¨¡å¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3485906645565271/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·9381691255360
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:08:18.000Z" title="Wed Jan 07 2026 02:08:18 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å®šä¹‰</h2>
<p>å•ä¾‹æ¨¡å¼ï¼šç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚<br/>
æ¥çœ‹çœ‹ä¸‹é¢çš„ç±»å›¾ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9914cd356b15469f8bd3adea4aa00bd5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3OTM4MTY5MTI1NTM2MA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356498&amp;x-signature=00g9SVUY9uTQJFVeJcR1e9K%2FaNo%3D" alt="singleton.png" loading="lazy"/></p>
<p><strong>å•ä¾‹æ¨¡å¼æœ‰ä¸‰ç§ä¸åŒçš„å®ç°ï¼Œåº”å¯¹ä¸åŒçš„åœºæ™¯</strong></p>
<h4 data-id="heading-1">1ã€æ‡’æ±‰å¼ï¼ˆä¹Ÿå«å»¶è¿Ÿå®ä¾‹åŒ–ï¼‰</h4>
<p><strong>ä¸ºä»€ä¹ˆå«æ‡’æ±‰å¼ï¼Ÿ</strong><br/>
å› ä¸ºç±»å®ä¾‹åŒ–çš„ä»£ç æ˜¯åœ¨è¿è¡Œæ—¶çœŸæ­£ç”¨åˆ°çš„æ—¶å€™æ‰æ‰§è¡Œçš„ã€‚å°±å¥½åƒäººä¸ä¼šæå‰å‡†å¤‡å¥½ï¼Œç­‰ç”¨åˆ°çš„æ—¶å€™æ‰ç€æ‰‹å¹²ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">LazySingleton</span> {

    <span class="hljs-comment">/**
     * é™æ€çš„å˜é‡ï¼ŒæŒæœ‰LazySingletonçš„å®ä¾‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> LazySingleton instance;

    <span class="hljs-comment">/**
     * ç§æœ‰æ„é€ æ–¹æ³•
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">LazySingleton</span>()</span> {}

    <span class="hljs-comment">/**
     * è¿™ä¸ªæ–¹æ³•æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„
     * @return
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> LazySingleton <span class="hljs-title">getInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> LazySingleton();
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
<blockquote>
<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œå®ç°äº†æ‡’æ±‰å¼çš„å•ä¾‹æ¨¡å¼ã€‚ä½†æ˜¯å®ƒ<strong>ä¸æ˜¯çº¿ç¨‹å®‰å…¨</strong>çš„ã€‚å½“åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹è¿è¡Œæ—¶ï¼Œå¯èƒ½å¯¼è‡´ä¼šæœ‰å¤šä¸ªå®ä¾‹å¯¹è±¡ã€‚</p>
</blockquote>
<h2 data-id="heading-2">ä¸‹é¢å°±è¦å°†ä¸Šè¿°ä»£ç æ”¹é€ æˆçº¿ç¨‹å®‰å…¨çš„ã€‚</h2>
<blockquote>
<p><strong>ç¬¬ä¸€ç§æ–¹æ³•ï¼šä½¿ç”¨åŒæ­¥é”synchronized</strong><br/>
é€šè¿‡å¢åŠ syncronizedå…³é”®å­—åˆ°getInstanceæ–¹æ³•ä¸­ï¼Œè¿«ä½¿æ¯ä¸ªçº¿ç¨‹åœ¨è¿›å…¥è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œè¦å…ˆç­‰å€™åˆ«çš„çº¿ç¨‹ç¦»å¼€è¯¥æ–¹æ³•ã€‚</p>
</blockquote>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">SafeLazySingleton</span> {

    <span class="hljs-comment">/**
     * é™æ€çš„å˜é‡ï¼ŒæŒæœ‰SafeLazySingletonçš„å®ä¾‹
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> SafeLazySingleton instance;

    <span class="hljs-comment">/**
     * ç§æœ‰æ„é€ æ–¹æ³•
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">SafeLazySingleton</span>()</span> {}

    <span class="hljs-comment">/**
     * è¿™ä¸ªæ–¹æ³•é€šè¿‡ä½¿ç”¨åŒæ­¥é”synchronizedç¡®ä¿æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯ä¼šå¯¼è‡´æ€§èƒ½é™ä½
     * @return
     */</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> synchronized SafeLazySingleton <span class="hljs-title">getInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            instance = <span class="hljs-keyword">new</span> SafeLazySingleton();
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
<blockquote>
<p><strong>ç¬¬äºŒç§æ–¹æ³•ï¼šåœ¨JVMåˆæ¬¡åŠ è½½ç±»æ—¶å°±å®Œæˆå®ä¾‹åŒ–</strong><br/>
ä¾èµ–JVMåœ¨åŠ è½½è¿™ä¸ªç±»æ—¶é©¬ä¸Šåˆ›å»ºå”¯ä¸€çš„å•ä»¶å®ä¾‹ã€‚JVMä¿è¯åœ¨ä»»ä½•çº¿ç¨‹è®¿é—®instanceé™æ€å˜é‡ä¹‹å‰ï¼Œä¸€å®šå…ˆåˆ›å»ºæ­¤å®ä¾‹ã€‚</p>
</blockquote>
<h4 data-id="heading-3">2ã€é¥¿æ±‰å¼</h4>
<p><strong>ä¸ºä»€ä¹ˆå«é¥¿æ±‰å¼ï¼Ÿ</strong><br/>
ä¸æ˜¯åœ¨éœ€è¦æ—¶æ‰åˆ›å»ºå®ä¾‹ï¼Œè€Œæ˜¯åœ¨JVMåŠ è½½ç±»æ—¶é©¬ä¸Šåˆ›å»ºå®ä¾‹ï¼Œè¡¨ç°å‡ºéå¸¸æ€¥åˆ‡çš„çŠ¶æ€ã€‚å°±åƒäººé¥¿ä¹…äº†å°±ä¼šéå¸¸æ€¥åˆ‡çš„æƒ³åƒé¥­ä¸€æ ·ã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">HungrySingleton</span> {
    <span class="hljs-comment">// åœ¨é™æ€åˆå§‹åŒ–å™¨ä¸­åˆ›å»ºå•ä»¶ã€‚è¿™è¡Œä»£ç ä¿è¯äº†çº¿ç¨‹å®‰å…¨</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> HungrySingleton instance = <span class="hljs-keyword">new</span> HungrySingleton();

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">HungrySingleton</span>()</span> {}

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> HungrySingleton <span class="hljs-title">getInstance</span>()</span> {
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>
<blockquote>
<p><strong>ç¬¬ä¸‰ç§æ–¹æ³•ï¼šä½¿ç”¨åŒé‡æ£€æŸ¥åŠ é”</strong><br/>
åˆ©ç”¨åŒé‡æ£€æŸ¥åŠ é”ï¼Œé¦–å…ˆæ£€æŸ¥æ˜¯å¦å®ä¾‹å·²ç»åˆ›å»ºäº†ï¼Œå¦‚æœå°šæœªåˆ›å»ºï¼Œæ‰è¿›è¡ŒåŒæ­¥ã€‚è¿™æ ·ä¸€æ¥ï¼Œåªä¼šç¬¬ä¸€æ¬¡åŒæ­¥ã€‚</p>
</blockquote>
<h4 data-id="heading-4">3ã€åŒé‡æ£€æŸ¥åŠ é”</h4>
<p>æŒ‡çš„æ˜¯ï¼švolatileå…³é”®å­—å’ŒåŒæ­¥é”synchronized<br/>
volatileå…³é”®å­—ç¡®ä¿å½“instanceå˜é‡è¢«åˆå§‹åŒ–æˆSingletonå®ä¾‹æ—¶ï¼Œå¤šä¸ªçº¿ç¨‹æ­£ç¡®çš„å¤„ç†instanceå˜é‡ã€‚
synchronizedå…³é”®å­—ç¡®ä¿å¤šçº¿ç¨‹åŒæ­¥æ‰§è¡Œã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">DoubleCheckLockSingleton</span> {

    <span class="hljs-comment">// ä½¿ç”¨volatileå…³é”®å­—ç¡®ä¿instanceæ˜¯çº¿ç¨‹å®‰å…¨çš„</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> DoubleCheckLockSingleton instance;
    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">DoubleCheckLockSingleton</span>()</span> {}

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DoubleCheckLockSingleton <span class="hljs-title">getInstance</span>()</span> {
        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// åªæœ‰åœ¨instanceæ˜¯nullçš„æ—¶å€™æ‰ä¼šè¿›å…¥ä½¿ç”¨åŒæ­¥é”</span>
            synchronized (DoubleCheckLockSingleton.<span class="hljs-keyword">class</span>) {
                <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) {
                    instance = <span class="hljs-keyword">new</span> DoubleCheckLockSingleton();
                }
            }
        }
        <span class="hljs-keyword">return</span> instance;
    }
}
</code></pre>





























<table><thead><tr><th>çº¿ç¨‹å®‰å…¨æ–¹å¼</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>synchronizedå…³é”®å­—</td><td>ç®€å•åˆæœ‰æ•ˆçš„å®ç°çº¿ç¨‹å®‰å…¨</td><td>ä¸¥é‡é™ä½æ€§èƒ½ã€‚å…¶å®åªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨getInstanceæ–¹æ³•æ—¶æ‰çœŸæ­£éœ€è¦åŒæ­¥ã€‚ä¸€æ—¦è®¾ç½®å¥½instanceå˜é‡ï¼Œå°±ä¸éœ€è¦åŒæ­¥äº†ã€‚ä½†æ˜¯ç°çŠ¶æ˜¯æ¯æ¬¡è°ƒç”¨éƒ½ä¼šåŒæ­¥</td><td>åº”ç”¨ç¨‹åºå¯ä»¥æ¥å—synchronizedå¸¦æ¥çš„é¢å¤–è´Ÿæ‹…ï¼Œå¹¶ä¸”genInstanceæ–¹æ³•å¹¶ä¸ä¼šè¢«é¢‘ç¹è°ƒç”¨</td></tr><tr><td>é¥¿æ±‰å¼å•ä¾‹</td><td>çº¿ç¨‹å®‰å…¨</td><td>è¿‡æ—©çš„åˆ›å»ºå®ä¾‹ï¼Œå¦‚æœå®ä¾‹ä¸€ç›´æ²¡æœ‰è¢«ç”¨åˆ°æˆ–è€…å®ä¾‹å ç”¨èµ„æºå¾ˆå¤§ï¼Œå®¹æ˜“é€ æˆèµ„æºæµªè´¹</td><td>1. åº”ç”¨ç¨‹åºæ€»æ˜¯åˆ›å»ºå¹¶ä½¿ç”¨å•ä»¶å®ä¾‹ã€‚2. åº”ç”¨ç¨‹åºåœ¨åˆ›å»ºå’Œè¿è¡Œæ—¶æ–¹é¢çš„è´Ÿæ‹…ä¸å¤ªç¹é‡ï¼Œæƒ³è¦æ€¥åˆ‡çš„åˆ›å»ºå•ä»¶å®ä¾‹ã€‚</td></tr><tr><td>åŒé‡æ£€æŸ¥åŠ é”</td><td>1. çº¿ç¨‹å®‰å…¨ã€‚2. åªæœ‰ç¬¬ä¸€æ¬¡è®¿é—®æ—¶ä¼šä½¿ç”¨syncronizedé”ï¼Œæ‰€ä»¥å¹¶ä¸ä¼šé™ä½æ€§èƒ½ã€‚</td><td>ä»£ç å®ç°æ¯”å‰ä¸¤ç§å¤æ‚</td><td>ä»»ä½•éœ€è¦å•ä¾‹ç±»çš„åœºæ™¯ä¸­</td></tr></tbody></table>
<h2 data-id="heading-5">äºŒã€ä½¿ç”¨åœºæ™¯</h2>
<h3 data-id="heading-6">1ã€SpringBootä¸­çš„å•ä¾‹æ¨¡å¼</h3>
<p>åœ¨SpringBootä¸­ï¼Œå•ä¾‹æ¨¡å¼æ˜¯ä¾èµ–æ³¨å…¥å®¹å™¨é»˜è®¤ç®¡ç†Beançš„æ–¹å¼ï¼Œé€šè¿‡@Serviceã€@Componentç­‰æ³¨è§£æ ‡è®°çš„ç±»ä¼šè¢«è‡ªåŠ¨æ³¨å†Œä¸ºå•ä¾‹Beanï¼Œç¡®ä¿åœ¨æ•´ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡ä¸­ä»…å­˜åœ¨ä¸€ä¸ªå®ä¾‹ã€‚<br/>
<strong>å®ç°æ–¹å¼ä¸é»˜è®¤è¡Œä¸º</strong>ï¼šSpringBootä½¿ç”¨IoCå®¹å™¨ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸï¼Œé»˜è®¤ä½œç”¨åŸŸä¸ºå•ä¾‹ã€‚ä¾‹å¦‚ï¼šä½¿ç”¨@Serviceæ³¨è§£çš„ç±»ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GreetingServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">GreetingService</span> {
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title class_">String</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"><span class="hljs-built_in">String</span> name</span>) {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"Hello, "</span> + name + <span class="hljs-string">"!"</span>;
    }
}
</code></pre>
<p>é€šè¿‡@Autowiredæ³¨å…¥æ—¶ï¼Œæ— è®ºåœ¨å¤šå°‘ä¸ªç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè·å–çš„éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ã€‚<br/>
<strong>çº¿ç¨‹å®‰å…¨ä¸æœ€ä½³å®è·µ</strong>ï¼šå•ä¾‹Beanå¿…é¡»æ˜¯<strong>æ— çŠ¶æ€çš„</strong>ï¼Œé¿å…åœ¨å®ä¾‹ä¸­ä¿å­˜ç”¨æˆ·ç›¸å…³æ•°æ®ï¼Œå¦åˆ™å¯èƒ½å¼•å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚æ­£ç¡®åšæ³•æ˜¯å°†çŠ¶æ€å­˜å‚¨åœ¨æ–¹æ³•å‚æ•°æˆ–è€…å±€éƒ¨å˜é‡ä¸­ï¼Œè€Œéæˆå‘˜å˜é‡ã€‚<br/>
<strong>è‡ªå®šä¹‰ä½œç”¨åŸŸä¸å»¶è¿ŸåŠ è½½</strong>ï¼šè™½ç„¶é»˜è®¤ä¸ºå•ä¾‹ï¼Œä½†å¯é€šè¿‡@Scope("prototype")æ˜¾ç¤ºæŒ‡å®šä¸ºå¤šä¾‹æ¨¡å¼ï¼ˆæ¯æ¬¡è·å–æ–°å®ä¾‹ï¼‰ã€‚å¯¹äºå•ä¾‹Beanï¼Œå¯é€šè¿‡ä½¿ç”¨@Lazyæ³¨è§£å®ç°æ‡’åŠ è½½ï¼Œå»¶è¿Ÿåˆå§‹åŒ–ç›´åˆ°é¦–æ¬¡æ³¨å…¥æ—¶æ‰åˆ›å»ºå®ä¾‹ã€‚<br/>
<strong>ä¸ä¼ ç»Ÿå•ä¾‹æ¨¡å¼çš„åŒºåˆ«</strong>ï¼šSpringçš„å•ä¾‹ç”±å®¹å™¨ç®¡ç†ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–å†™getInstanceæ–¹æ³•æˆ–åŒæ­¥é”ï¼Œç®€åŒ–äº†ä»£ç å¹¶é¿å…äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼ŒåŒæ—¶æä¾›äº†æ›´çµæ´»çš„é…ç½®é€‰é¡¹ã€‚</p>
<h2 data-id="heading-7">ä¸‰ã€åˆ†å¸ƒå¼æ¶æ„ä¸­å¦‚ä½•ä½¿ç”¨å•ä¾‹æ¨¡å¼ï¼Ÿå¦‚ä½•ç¡®ä¿å…¨å±€åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Ÿ</h2>
<p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå•ä¾‹æ¨¡å¼çš„æ ¸å¿ƒç›®æ ‡æ˜¯ç¡®ä¿æŸä¸ªç±»åœ¨æ•´ä¸ªç³»ç»Ÿä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªå…¨å±€çš„IDç”Ÿæˆå™¨ã€é…ç½®ç®¡ç†ä¸­å¿ƒæˆ–ä»»åŠ¡è°ƒåº¦å™¨ã€‚ä½†åˆ†å¸ƒå¼ç¯å¢ƒçš„è·¨èŠ‚ç‚¹ç‰¹æ€§ä½¿å¾—ä¼ ç»Ÿå•ä¾‹ï¼ˆä¾‹å¦‚Java JVMå†…çš„å•ä¾‹ï¼‰å¤±æ•ˆã€‚å› ä¸ºæ¯ä¸ªèŠ‚ç‚¹å¯ä»¥ç‹¬è‡ªåŠ è½½ç±»å¹¶åˆ›å»ºå®ä¾‹ã€‚å› æ­¤ï¼Œéœ€è¦å€ŸåŠ©å¤–éƒ¨åè°ƒæœºåˆ¶æ¥å®ç°å…¨å±€å”¯ä¸€æ€§ã€‚<br/>
<strong>åˆ†å¸ƒå¼å•ä¾‹çš„æ ¸å¿ƒå°±æ˜¯æŠŠå•ä¾‹çš„æ§åˆ¶æƒä»å•JVMå»¶ä¼¸åˆ°å¤šJVMã€‚</strong><br/>
ä»¥ä¸‹æ˜¯å‡ ç§ä¸»æµçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<p><strong>1. å€ŸåŠ©å¤–éƒ¨ä¸­é—´ä»¶å®ç°</strong><br/>
è¿™æ˜¯æœ€å¸¸ç”¨ã€æœ€ä¸“ä¸šçš„åšæ³•ã€‚æ€æƒ³æ˜¯è®©ä¸€ä¸ªå¤–éƒ¨ç³»ç»Ÿæ¥å†³å®šå“ªä¸ªå®ä¾‹æ˜¯ä¸»å®ä¾‹ã€‚<br/>
<strong>1.1 ä½¿ç”¨Zookeeper/Etcdå®ç°</strong><br/>
Zookeeperçš„<strong>ä¸´æ—¶èŠ‚ç‚¹</strong>å’Œ<strong>watchæœºåˆ¶</strong>éå¸¸é€‚åˆå®ç°åˆ†å¸ƒå¼é”å’ŒLeaderé€‰ä¸¾ã€‚<br/>
<strong>1.2 ä½¿ç”¨Rediså®ç°</strong>
åˆ©ç”¨Redisçš„<code>set key value NX PX timeout</code>å‘½ä»¤å®ç°åˆ†å¸ƒå¼é”ã€‚</p>
<p><strong>2. å°†å•ä¾‹æœåŠ¡åŒ–</strong><br/>
è¿™æ˜¯ä¸€ç§æ›´å½»åº•ï¼Œæ›´ç¬¦åˆå¾®æœåŠ¡æ¶æ„æ€æƒ³çš„æ–¹æ¡ˆã€‚</p>
<ul>
<li><strong>å®ç°åŸç†</strong></li>
</ul>
<ol>
<li>å°†éœ€è¦å•ä¾‹çš„åŠŸèƒ½ï¼ˆä¾‹å¦‚IDç”Ÿæˆã€å…¨å±€é…ç½®ï¼‰ç‹¬ç«‹å‡ºæ¥ï¼Œéƒ¨ç½²æˆä¸€ä¸ªå•ç‹¬çš„æœåŠ¡ã€‚</li>
<li>è¿™ä¸ªæœåŠ¡æœ¬èº«å¯ä»¥æ˜¯ä¸€ä¸ªé›†ç¾¤ï¼Œä½†å…¶å†…éƒ¨çŠ¶æ€æ˜¯ç»Ÿä¸€çš„ï¼ˆä¾‹å¦‚ï¼šIDç”Ÿæˆå™¨ä½¿ç”¨æ•°æ®åº“åºåˆ—å·æˆ–è€…RedisåŸå­æ“ä½œï¼‰ã€‚</li>
<li>å…¶ä»–æ‰€æœ‰æœåŠ¡éƒ½é€šè¿‡RPCæˆ–httpæ¥è°ƒç”¨è¿™ä¸ªå•ä¸€çš„æœåŠ¡ï¼Œä»è€Œåœ¨é€»è¾‘ä¸Šä¿è¯äº†å•ä¾‹æ•ˆæœã€‚</li>
</ol>
<p>å‚è€ƒæ–‡ç« ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fyitiaoxianyuyu%2Farticle%2Fdetails%2F155395663" target="_blank" title="https://blog.csdn.net/yitiaoxianyuyu/article/details/155395663" ref="nofollow noopener noreferrer">blog.csdn.net/yitiaoxianyâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Apache Hudi åœ¨äº¬ä¸œçš„æœ€æ–°æ¶æ„æ¼”è¿›]]></title>    <link>https://juejin.cn/post/7592088192516980779</link>    <guid>https://juejin.cn/post/7592088192516980779</guid>    <pubDate>2026-01-07T02:19:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592088192516980779" data-draft-id="7592069113223053331" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Apache Hudi åœ¨äº¬ä¸œçš„æœ€æ–°æ¶æ„æ¼”è¿›"/> <meta itemprop="keywords" content="æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-07T02:19:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="äº¬ä¸œé›¶å”®æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/4233576972293643"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Apache Hudi åœ¨äº¬ä¸œçš„æœ€æ–°æ¶æ„æ¼”è¿›
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4233576972293643/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    äº¬ä¸œé›¶å”®æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:19:10.000Z" title="Wed Jan 07 2026 02:19:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»18åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><strong>æœ¬æ–‡å¯¼è¯»</strong></p>
<p>æœ¬æ–‡è¯¦ç»†ä»‹ç»äº¬ä¸œæ•°æ®æ¹–ç°çŠ¶ã€æœ€æ–°è‡ªç ”æŠ€æœ¯ç‰¹æ€§ã€ä¸šåŠ¡å®è·µã€ç¤¾åŒºè´¡çŒ®ä¸æœªæ¥è§„åˆ’ï¼Œå±•ç¤ºäº¬ä¸œå¦‚ä½•é€šè¿‡æ•°æ®æ¹–æŠ€æœ¯æ¨åŠ¨æ•°æ®èµ„äº§å‡†å®æ—¶åŒ–ï¼Œæå‡æ•°æ®èµ„äº§çš„ä»·å€¼ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€äº¬ä¸œæ•°æ®æ¹–ç°çŠ¶</h2>
<p>äº¬ä¸œæ•°æ®æ¹–å›¢é˜Ÿè¿‘å¹´ä¸€ç›´åœ¨åˆ©ç”¨æ•°æ®æ¹–èƒ½åŠ›æ¨è¿›æ•´ä¸ªé›†å›¢æ•°æ®çš„å‡†å®æ—¶åŒ–ï¼Œå¸®åŠ©äº¬ä¸œé›¶å”®ã€äº¬ä¸œç§‘æŠ€ã€äº¬ä¸œç‰©æµç­‰å­é›†å›¢çš„æ ¸å¿ƒæ•°æ®èµ„äº§æå‡æ•°æ®æ—¶æ•ˆï¼Œå…¥æ¹–çš„æ•°æ®è§„æ¨¡å·²è¾¾åˆ°500PBä»¥ä¸Šï¼Œæ”¯æ’‘è¿™äº›çš„æ˜¯å¼ºå¤§çš„åº•å±‚æŠ€æœ¯æ¶æ„å’Œå¹³å°äº§å“èƒ½åŠ›ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0822f5c36804dc1aa38ea4b815237af~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=ZBsdNi1rfzIDhvIDkFNh7qbT%2Bj0%3D" alt="image.png" loading="lazy"/>
äº¬ä¸œæ•°æ®æ¹–èƒ½åŠ›å…¨æ™¯å›¾</p>
<p>äº¬ä¸œæ•°æ®æ¹–æ„å»ºäºHDFSç­‰åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿä¹‹ä¸Šï¼Œåˆ©ç”¨Hudié«˜æ€§èƒ½çš„è¯»å†™èƒ½åŠ›å’Œæ–‡ä»¶ç»„ç»‡æ¥æ”¯æ’‘å‡†å®æ—¶åŒ–åŠ å·¥é“¾è·¯ï¼Œæ‰¿æ¥æ¶ˆæ¯é˜Ÿåˆ—ã€Binlogã€Hiveã€Hudiç­‰æ•°æ®æºï¼Œæ”¯æŒé«˜æ€§èƒ½çš„æµã€æ‰¹åŠOLAPæŸ¥è¯¢ã€‚åœ¨åº•å±‚æŠ€æœ¯ä¹‹ä¸Šï¼Œäº¬ä¸œå¤§æ•°æ®å¹³å°æä¾›å…¨ç”Ÿå‘½å‘¨æœŸçš„äº§å“èƒ½åŠ›ï¼Œä»è¡¨çš„åˆ›å»ºã€é›†æˆå…¥æ¹–ã€æ•°æ®å¼€å‘ã€ä»»åŠ¡è°ƒåº¦ï¼Œåˆ°æ•°æ®æŸ¥è¯¢ã€æ•°æ®è´¨é‡ï¼Œåˆ°æ¹–è¡¨æ›¿æ¢Hiveè¡¨çš„åˆ‡æ¢å·¥å…·ï¼Œé€šè¿‡æä¾›ç›¸åº”çš„äº§å“èƒ½åŠ›ï¼Œæ¥æ”¯æŒå„ä¸ªBGBUçš„æ•°æ®å›¢é˜Ÿè¿›è¡Œå‡†å®æ—¶åŒ–æ”¹è¿›ã€‚</p>
<p>äº¬ä¸œHudiåŸºäºç¤¾åŒº0.13.1ç‰ˆæœ¬è¿›è¡Œç ”å‘ï¼Œæ—¨åœ¨æ»¡è¶³äº¬ä¸œä¸šåŠ¡çš„ç‰¹å®šéœ€æ±‚ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬åœ¨Hudiå†…æ ¸çš„ç»„ç»‡åè®®å±‚ã€IOä¼ è¾“å±‚ç­‰å¤šä¸ªå…³é”®æ¨¡å—ï¼Œå®æ–½ä¸€ç³»åˆ—è‡ªä¸»ç ”å‘çš„ä¼˜åŒ–æªæ–½ã€‚</p>
<p><strong>ç»„ç»‡åè®®å±‚</strong></p>
<ol>
<li>
<p>ç´¢å¼•æ–¹é¢ï¼Œç¤¾åŒºæä¾›Bucketã€BloomFilterç­‰ç´¢å¼•ï¼Œäº¬ä¸œè‡ªç ”åˆ†åŒºçº§Bucketç´¢å¼•ï¼Œå·®å¼‚åŒ–æ§åˆ¶åˆ†åŒºçš„Bucketæ•°é‡ï¼Œæœ‰æ•ˆè§£å†³åˆ†åŒºå€¾æ–œé—®é¢˜ï¼›æ­¤å¤–åˆ›æ–°æ€§çš„è‡ªç ”å¤–é”®ç´¢å¼•ï¼Œå¹¶åŸºäºå¤–é”®ç´¢å¼•å®ç°æµå¼çš„å¤–é”®å…³è”èƒ½åŠ›ï¼›</p>
</li>
<li>
<p>Merge Engineæ–¹é¢ï¼Œåœ¨0.13.1ä¸­ä»¥PayLoadä¸ºä¸»ï¼Œç¤¾åŒºæä¾›äº†OverwriteWithLatestã€EventTimeBasedã€PartialUpdateç­‰ï¼Œäº¬ä¸œè‡ªç ”Multiple Tsæ”¯æŒå¤šå­—æ®µçš„åˆå¹¶é€»è¾‘ï¼Œä¹Ÿå¯¹Partial Updateåšäº†å¢å¼ºã€‚ç°åœ¨ç¤¾åŒºä¸»æ¨RecordMergerï¼Œåç»­äº¬ä¸œä¹Ÿä¼šè¡¥é½ç›¸å…³çš„å®ç°ã€‚</p>
</li>
<li>
<p>è¡¨æ ¼å¼æ–¹é¢ï¼Œç¤¾åŒºCoWä¸MoRå·²åœ¨äº¬ä¸œå®ç°ç”Ÿäº§å®è·µã€‚ç¤¾åŒºç‰ˆMoRé‡‡ç”¨Baseæ–‡ä»¶ä¸Logæ–‡ä»¶ç›¸ç»“åˆçš„ç»„ç»‡æ¨¡å¼ï¼Œå…¶ä¸­Logæ–‡ä»¶ä»¥Avroæ ¼å¼è¿›è¡Œè¡Œå­˜å‚¨ã€‚äº¬ä¸œåœ¨å®é™…åº”ç”¨ä¸­å‘ç°ï¼Œç¤¾åŒºç‰ˆMoRåœ¨æ€§èƒ½æ–¹é¢å­˜åœ¨ä¸€å®šç“¶é¢ˆã€‚ä¸ºæ­¤ï¼Œäº¬ä¸œè‡ªä¸»ç ”å‘åŸºäºLSM-Treeç»„ç»‡åè®®çš„MoRï¼Œé‡‡ç”¨åˆ†å±‚ç®¡ç†æœºåˆ¶ï¼Œæ‰€æœ‰Logæ–‡ä»¶å‡ä»¥Parquetæ ¼å¼å­˜å‚¨ï¼Œå…¶è¯»å†™æ€§èƒ½ç›¸è¾ƒç¤¾åŒºç‰ˆæå‡äº†2è‡³10å€ã€‚</p>
</li>
<li>
<p>å¹¶å‘æ§åˆ¶æ–¹é¢ï¼Œç¤¾åŒºæä¾›äº†OCCå’ŒMVCCä¸¤ç§å¹¶å‘æ§åˆ¶çš„æ¨¡å¼ï¼Œ äº¬ä¸œè‡ªç ”çš„LSM-Treeç»„ç»‡åè®®å®ç°äº†æ— é”å¹¶å‘æ›´æ–°çš„æ•ˆæœã€‚</p>
</li>
<li>
<p>æ–‡ä»¶å¸ƒå±€æ–¹é¢ï¼Œäº¬ä¸œè‡ªä¸»ç ”å‘æ··åˆå­˜å‚¨çš„å¸ƒå±€æ–¹æ¡ˆï¼Œæ”¯æŒå°†ä¸€å¼ è¡¨çš„æ•°æ®åˆ†å¸ƒäºå¤šä¸ªå­˜å‚¨ä½ç½®ã€‚å…¶ä¸­ä¸€éƒ¨åˆ†è¢«ç§°ä¸ºç¼“å†²å±‚ï¼Œç”¨äºå­˜å‚¨å¦‚deltacommitç­‰é«˜é¢‘å†™å…¥çš„æ•°æ®ï¼Œé€šå¸¸é€‰æ‹©ä½å»¶è¿Ÿçš„é«˜æ€§èƒ½å­˜å‚¨ç³»ç»Ÿï¼Œå¦‚HDFSæˆ–ChubaoFSï¼›å¦ä¸€éƒ¨åˆ†åˆ™ç§°ä¸ºæŒä¹…å±‚ï¼Œç¼“å†²å±‚ä¸­çš„æ•°æ®é€šè¿‡è¡¨æœåŠ¡è¿ç§»è‡³æŒä¹…å±‚ã€‚åœ¨è¯»å–æ—¶ï¼Œç³»ç»Ÿä¼šå°†ç¼“å†²å±‚ä¸æŒä¹…å±‚çš„æ•°æ®è¿›è¡Œè”åˆï¼Œç”Ÿæˆç»Ÿä¸€çš„æ–‡ä»¶è§†å›¾ã€‚</p>
</li>
<li>
<p>è¡¨æœåŠ¡æ–¹é¢ï¼Œäº¬ä¸œåœ¨ç¤¾åŒºç‰ˆåŸºç¡€ä¸Šå®ç°å¢é‡å¼çš„è¡¨æœåŠ¡æœºåˆ¶ï¼Œæœ‰æ•ˆé¿å…å› åˆ†åŒºæ•°é‡æŒç»­å¢é•¿è€Œå¯¼è‡´çš„è¡¨æœåŠ¡è€—æ—¶å¢åŠ é—®é¢˜ï¼Œä»è€Œæ˜¾è‘—é™ä½å¯¹å†™å…¥ç«¯çš„é˜»å¡æ—¶é—´ã€‚</p>
</li>
</ol>
<p><strong>IOä¼ è¾“å±‚</strong></p>
<p>IOä¼ è¾“å±‚çš„æ ¸å¿ƒä¼˜åŒ–æ€è·¯æ˜¯å‡å°‘åºåˆ—åŒ–/ååºåˆ—åŒ–çš„å¼€é”€ï¼Œäº¬ä¸œè‡ªç ”äºŒè¿›åˆ¶æµæ‹·è´Clusteringï¼Œè·³è¿‡è®¡ç®—å¼•æ“ä¸Parquetæ–‡ä»¶é—´çš„è¡Œåˆ—è½¬æ¢ï¼Œç›´æ¥è¿›è¡ŒäºŒè¿›åˆ¶æµå¤åˆ¶å®ç°æ–‡ä»¶èšåˆï¼›åˆ©ç”¨Engine-Nativeä¼˜åŒ–ä½¿ç”¨è®¡ç®—å¼•æ“çš„æ•°æ®æ ¼å¼ï¼Œé¿å…è¡Œæ ¼å¼é—´çš„äº’è½¬ï¼›åˆ©ç”¨ZSTDé™ä½æ–‡ä»¶å‹ç¼©è¿‡ç¨‹ä¸­çš„CPUæŸè€—ã€‚</p>
<h2 data-id="heading-1">äºŒã€æœ€æ–°è‡ªç ”æŠ€æœ¯ç‰¹æ€§</h2>
<p><strong>01. Hudi MoR LSM-Tree</strong></p>
<p>åœ¨äº¬ä¸œçš„ä¸šåŠ¡å®è·µä¸­ï¼Œéšç€æ•°æ®è§„æ¨¡çš„æŒç»­æ‰©å¤§ä¸å®æ—¶æ€§è¦æ±‚çš„ä¸æ–­æå‡ï¼ŒHudi MoRè¡¨åœ¨é¢å¯¹é«˜å¹¶å‘ã€é«˜ååçš„å®æ—¶æ•°æ®å¤„ç†æ—¶ï¼Œé€æ¸æ˜¾ç°å‡ºå¤šé¡¹æ€§èƒ½ä¸ç¨³å®šæ€§ç“¶é¢ˆï¼Œå…·ä½“è¡¨ç°ä¸ºï¼š</p>
<ol>
<li>
<p>å†™å…¥æ€§èƒ½ç“¶é¢ˆï¼šé«˜æµé‡æ•°æ®å†™å…¥æ—¶ï¼ŒMoRè¡¨æ‰§è¡Œæ›´æ–°éœ€å°†å¢é‡æ•°æ®ä¸åŸºç¡€æ–‡ä»¶åˆå¹¶å†™å›ï¼Œéš¾ä»¥å…¼é¡¾ä½å»¶è¿Ÿä¸å¤§ååé‡çš„å¹¶å‘å†™å…¥ï¼Œæˆä¸ºå®æ—¶æ•°æ®æ¥å…¥çš„å…³é”®åˆ¶çº¦ã€‚</p>
</li>
<li>
<p>ç´¢å¼•æ•ˆç‡ä½ä¸‹ï¼šå½“é‡‡ç”¨Bucketç´¢å¼•ä¸”åˆ†æ¡¶æ•°é‡è¾ƒå¤šæ—¶ï¼Œæ¯æ¬¡å†™å…¥Logæ–‡ä»¶å‡éœ€é¢‘ç¹æ‰§è¡Œè€—æ—¶çš„Listæ“ä½œï¼Œä¸¥é‡å½±å“å†™å…¥æ€§èƒ½ã€‚</p>
</li>
<li>
<p>æŸ¥è¯¢æ•ˆç‡ä¸è¶³ï¼šåº•å±‚ä½¿ç”¨çš„Avroè¡Œå¼å­˜å‚¨æ ¼å¼æ— æ³•æœ‰æ•ˆä¸‹æ¨æŸ¥è¯¢ï¼Œå³ä½¿ä»…è®¿é—®å°‘æ•°åˆ—ä¹Ÿéœ€è¯»å–æ•´è¡Œæ•°æ®ï¼Œäº§ç”Ÿå¤§é‡æ— æ•ˆIOï¼Œå¯¼è‡´æŸ¥è¯¢æ•ˆç‡ä½ä¸‹ã€‚</p>
</li>
<li>
<p>èµ„æºç«äº‰ä¸è¿ç»´å¤æ‚ï¼šæµå¼ä»»åŠ¡ä¸­å†™æ“ä½œä¸Compactionå…±äº«èµ„æºï¼Œç›¸äº’æŠ¢å å¸¸å¼•å‘ä½œä¸šå¤±è´¥ï¼Œå¾€å¾€éœ€ç‹¬ç«‹éƒ¨ç½²Compactionä½œä¸šï¼Œå¢åŠ äº†è¿ç»´å¤æ‚æ€§ä¸æˆæœ¬ã€‚</p>
</li>
<li>
<p>æ¶æ„å¹¶å‘èƒ½åŠ›å—é™ï¼šç¼ºä¹å¹¶å‘æ›´æ–°èƒ½åŠ›ï¼Œè¿›è¡Œæ•°æ®å›æº¯æˆ–æ•…éšœä¿®å¤æ—¶å¿…é¡»æš‚åœå®æ—¶ä»»åŠ¡ï¼Œå½±å“ä¸šåŠ¡è¿ç»­æ€§ï¼›åŒæ—¶å—è¡¨çº§å¹¶å‘å†™å…¥èƒ½åŠ›é™åˆ¶ï¼ŒåŒä¸€å¼ è¡¨çš„å¤šä¸ªåŠ å·¥ä»»åŠ¡åªèƒ½ä¸²è¡Œæ‰§è¡Œï¼Œå¯¼è‡´æ•°æ®äº§å‡ºå»¶è¿Ÿç´¯ç§¯ï¼Œéš¾ä»¥æ»¡è¶³é«˜æ—¶æ•ˆæ€§è¦æ±‚ã€‚</p>
</li>
</ol>
<p>ä¸ºåº”å¯¹äº¬ä¸œå®æ—¶æ•°æ®ä¸šåŠ¡ï¼Œç‰¹åˆ«æ˜¯æµé‡æ´ªå³°ä¸‹çš„å®æ—¶æ•°ä»“ã€å¤šæµèåˆç­‰åœºæ™¯å¯¹æ€§èƒ½ã€ç¨³å®šæ€§ä¸å¹¶å‘å¤„ç†èƒ½åŠ›æå‡ºçš„æ›´é«˜è¦æ±‚ï¼Œäº¬ä¸œæ•°æ®æ¹–å›¢é˜ŸåŸºäºLSM-Treeæ€æƒ³å¯¹Hudiè¿›è¡Œæ¶æ„å‡çº§ï¼Œæ—¨åœ¨çªç ´ç°æœ‰ç“¶é¢ˆï¼Œæ›´é«˜æ•ˆåœ°æ”¯æ’‘æ—¥ç›Šå¢é•¿çš„å®æ—¶æ•°æ®ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p><strong>åŸºæœ¬è®¾è®¡åŸåˆ™</strong></p>
<p>LSM-Treeæ˜¯ä¸€ç§é€šè¿‡é¡ºåºå†™å…¥å’Œåˆ†å±‚åˆå¹¶æ¥ä¼˜åŒ–è¯»å†™æ€§èƒ½çš„å­˜å‚¨ç»“æ„ã€‚åœ¨Hudiåº•å±‚æ”¹é€ ä¸­ï¼Œä»¥Bucketç´¢å¼•ä¸ºåŸºç¡€ï¼Œå°†æ¯ä¸ªFileGroupå†…çš„æ–‡ä»¶ç»„ç»‡æˆä¸€æ£µä¸¤å±‚LSM-Treeã€‚æ–°å†™å…¥çš„æ•°æ®é¦–å…ˆè¿›å…¥L0å±‚ï¼Œé€šè¿‡ä¸¤ç±»åˆå¹¶ï¼ˆCompactionï¼‰æœºåˆ¶æå‡æŸ¥è¯¢æ•ˆç‡ã€å‡è½»è¯»æ—¶åˆå¹¶å‹åŠ›ï¼š</p>
<p>Minor Compactionï¼šç”¨äºå°†L0å±‚çš„å°æ–‡ä»¶åˆå¹¶ä¸ºæ›´å¤§çš„L0æ–‡ä»¶ï¼Œé«˜æ•ˆæ§åˆ¶å°æ–‡ä»¶æ•°é‡ï¼Œæ‰§è¡Œé¢‘ç‡é«˜ä¸”é€Ÿåº¦å¿«ã€‚</p>
<p>Major Compactionï¼šå‘¨æœŸæ€§å°†æ‰€æœ‰æ–‡ä»¶åˆå¹¶è‡³å”¯ä¸€çš„L1å±‚æ–‡ä»¶ä¸­ï¼Œä»è€Œåœ¨ä¿æŒæ•°æ®å…¨å±€ä¸€è‡´æ€§çš„åŒæ—¶ï¼Œé™ä½åˆå¹¶æ“ä½œçš„æ‰§è¡Œé¢‘ç‡ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b0944a0c34d140cf8041485eeb087c1f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=kGWo0Cy%2FwBG8mQLGLveY%2FtraBNk%3D" alt="image.png" loading="lazy"/></p>
<p>åœ¨æ•°æ®æµè½¬è¿‡ç¨‹ä¸­ï¼ŒJD-Hudié‡‡ç”¨è®¡ç®—å¼•æ“åŸç”Ÿçš„è¡Œæ ¼å¼ï¼ˆå¦‚Spark InternalRowã€Flink RowDataï¼‰ï¼Œé¿å…æ­¤å‰ç”±äºAvroåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ“ä½œè€Œå¸¦æ¥çš„é¢å¤–å¼€é”€ã€‚æ­¤å¤–ï¼Œå¢é‡æ›´æ–°æ•°æ®ä»¥åˆ›å»ºï¼ˆCreateï¼‰æ–°Parquetæ–‡ä»¶çš„æ–¹å¼ï¼Œæ›¿ä»£åŸå…ˆçš„Logæ–‡ä»¶è¿½åŠ ï¼ˆAppendï¼‰ï¼Œä»è€Œé¿å…æ•°æ®å†™å…¥å‰ç¹é‡çš„File Listæ“ä½œï¼ŒåŒæ—¶æ”¯æŒå¤šä»»åŠ¡å¹¶å‘æ›´æ–°ã€‚</p>
<p>FileSystemViewæ„å»ºé€»è¾‘</p>
<p>FileSystemViewï¼ˆä»¥ä¸‹ç®€ç§°FSViewï¼‰æ˜¯Hudiçš„å…ƒæ•°æ®æŠ½è±¡å±‚ï¼Œé€šè¿‡æä¾›ç»Ÿä¸€çš„æŸ¥è¯¢æ¥å£ï¼Œå±è”½åº•å±‚æ–‡ä»¶ç»„ç»‡ç»†èŠ‚ï¼Œä½¿å¼•æ“èƒ½å¤ŸåŸºäºé€»è¾‘è§†å›¾é«˜æ•ˆæ„å»ºæŸ¥è¯¢åˆ†ç‰‡ï¼Œä¸ºå¿«ç…§éš”ç¦»å’Œæ•°æ®ä¸€è‡´æ€§æä¾›å…³é”®æ”¯æ’‘ã€‚æ”¹é€ åçš„FSViewæ„å»ºé€»è¾‘å¯ä»¥é€šè¿‡ä»¥ä¸‹å…¬å¼è¡¨ç¤ºï¼š</p>
<p align="center">ğ¹ğ‘†ğ‘‰ğ‘–ğ‘’ğ‘¤ at ğ‘‡=ğ¶ğ‘œğ‘šğ‘šğ‘–ğ‘¡ğ‘’ğ‘‘ğ¿ğ‘œğ‘”ğ‘ âˆ’(ğ¿ğ‘œğ‘”.</p>
<p align="center">ğ‘ğ‘ğ‘ ğ‘’ğ¼ğ‘›ğ‘ ğ‘¡ğ‘ğ‘›ğ‘¡&gt;ğ‘‡)âˆ’(ğ‘…ğ‘’ğ‘ğ‘™ğ‘ğ‘ğ‘’ğ‘‘ğ¿ğ‘œğ‘”.ğ‘ğ‘ğ‘ ğ‘’ğ¼ğ‘›ğ‘ ğ‘¡ğ‘ğ‘›ğ‘¡â‰¤ğ‘‡ )</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/65fcde7d4fc44f699219a8fd0c71a3a0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=64MCch%2BLs1T%2F9fu4ZrJ22wTQl6A%3D" alt="image.png" loading="lazy"/></p>
<p>ä»¥å›¾ä¸­æ‰€ç¤ºçš„å¤šä»»åŠ¡å¹¶å‘æ›´æ–°åœºæ™¯ä¸ºä¾‹ï¼Œæ‰€æœ‰å·²æäº¤çš„æ–‡ä»¶åŒ…æ‹¬ File 1 ï½ 10 ä»¥åŠ File 15ã€‚åœ¨ T_i æ—¶åˆ»ï¼Œæäº¤æ—¶é—´æ™šäºè¯¥æ—¶åˆ»çš„æ–‡ä»¶ä¸º File 15ï¼Œè€Œæäº¤æ—¶é—´æ—©äºæˆ–ç­‰äºè¯¥æ—¶åˆ»ä¸”å›  Compaction æ“ä½œè¢«æ›¿ä»£çš„æ–‡ä»¶ä¸º File 1 è‡³ File 5ã€‚å› æ­¤ï¼Œå¯æ ¹æ®ç›¸å…³å…¬å¼è®¡ç®—å¾—å‡º T_i æ—¶åˆ»æ‰€å¯¹åº”çš„é€»è¾‘å¿«ç…§è§†å›¾ï¼Œè¯¥è§†å›¾ç”±æ–‡ä»¶ File 6 ï½ 10 æ„æˆã€‚</p>
<p><strong>å†™æµç¨‹è®¾è®¡</strong></p>
<p>ä»¥Flinkæµå¼å†™å…¥ä¸ºä¾‹ï¼Œå†™æµç¨‹ä¸»è¦åŒ…å«é‡åˆ†åŒºã€æ’åºã€å»é‡ã€IOå››ä¸ªæ ¸å¿ƒé˜¶æ®µã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/daf70c87c3aa43f9b664551d2979c4ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=CPtr5o6%2BHGtFtEaxpHHna6L4DdA%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>
<p>ç»Ÿä¸€æ•°æ®è¡¨ç¤ºï¼šå…¨æµç¨‹æ•°æ®æµè½¬å‡é‡‡ç”¨FlinkåŸç”ŸRowDataæ ¼å¼ï¼Œå‡è½»åºåˆ—åŒ–åŠæ ¼å¼è½¬æ¢å¼€é”€ã€‚</p>
</li>
<li>
<p>å‡è¡¡æ•°æ®åˆ†å¸ƒï¼šé’ˆå¯¹Bucketåˆ†å¸ƒä¸å‡é—®é¢˜ï¼Œæå‡ºåŸºäºå…¨å±€è§†è§’çš„Remote Partitioneræœºåˆ¶ï¼Œå®ç°å†™å…¥è´Ÿè½½çš„åŠ¨æ€å‡è¡¡ã€‚</p>
</li>
<li>
<p>å¼‚æ­¥å¤„ç†æ¶æ„ï¼šåœ¨Sinkç®—å­ä¸­å¼•å…¥Disruptorç¯å½¢é˜Ÿåˆ—ï¼Œè§£è€¦æ•°æ®ç”Ÿäº§ä¸æ¶ˆè´¹ï¼Œæ˜¾è‘—æå‡å¤„ç†æ€§èƒ½ï¼Œæœ‰æ•ˆåº”å¯¹ç”Ÿäº§é€Ÿç‡é«˜äºæ¶ˆè´¹çš„åœºæ™¯ã€‚</p>
</li>
<li>
<p>é«˜æ•ˆå†…å­˜ç®¡ç†ï¼šé›†æˆFlinkå†…ç½®MemorySegmentPoolä¸BinaryInMemorySortBufferï¼Œå®ç°å†…å­˜ç²¾ç»†åŒ–ç®¡æ§ä¸é«˜æ•ˆæ’åºï¼Œå¤§å¹…é™ä½GCå‹åŠ›ä¸æ’åºå¼€é”€ã€‚</p>
</li>
</ol>
<p><strong>è¯»æµç¨‹è®¾è®¡</strong></p>
<p>åœ¨LSM-Treeç»“æ„ä¸­ï¼Œåº•å±‚æ–‡ä»¶å†…éƒ¨çš„æ•°æ®è®°å½•éƒ½æ˜¯æœ‰åºçš„ï¼Œå› æ­¤é«˜æ•ˆçš„å¤šè·¯å½’å¹¶æ’åºç®—æ³•æ˜¯æå‡æŸ¥è¯¢æ€§èƒ½çš„å…³é”®ã€‚æœ€å°å †å’Œè´¥è€…æ ‘æ˜¯ç”¨äºå½’å¹¶æ’åºæœ€ä¸ºå¸¸ç”¨çš„æ•°æ®ç»“æ„ã€‚å½“åˆå¹¶è·¯æ•°ï¼ˆKï¼‰è¾ƒå¤§æ—¶ï¼Œè´¥è€…æ ‘æ¯æ¬¡è°ƒæ•´ä»…éœ€çº¦logâ‚‚Kæ¬¡æ¯”è¾ƒï¼Œè€Œæœ€å°å †éœ€è¦çº¦2logâ‚‚Kæ¬¡ï¼Œç†è®ºæ¯”è¾ƒæ¬¡æ•°å‡å°‘è¿‘ä¸€åŠï¼Œåœ¨æ•°æ®æµè§„æ¨¡è¾ƒå¤§æ—¶ä¼˜åŠ¿æ˜æ˜¾ã€‚</p>
<p>ä¸ºè¿›ä¸€æ­¥æå‡åˆå¹¶æ•ˆç‡ï¼Œäº¬ä¸œæ•°æ®æ¹–å›¢é˜Ÿé‡‡ç”¨åŸºäºçŠ¶æ€æœºçš„è´¥è€…æ ‘å®ç°ã€‚é€šè¿‡ä¸ºæ¯ä¸ªèŠ‚ç‚¹å®šä¹‰æ˜ç¡®çŠ¶æ€ï¼ˆå¦‚â€œå°±ç»ªâ€ã€â€œå·²é€‰å‡ºâ€ç­‰ï¼‰ï¼Œå¹¶åœ¨æ¯æ¬¡æ¯”è¾ƒæ—¶é©±åŠ¨çŠ¶æ€è½¬æ¢ï¼ŒåŒæ—¶åŠ¨æ€è®°å½•ç›¸åŒä¸»é”®å¯¹åº”çš„å¶å­èŠ‚ç‚¹ç´¢å¼•ï¼Œå…¶å¥½å¤„æ˜¯ï¼š</p>
<ul>
<li>é¿å…é‡å¤è°ƒæ•´ï¼šå½“è¯†åˆ«åˆ°ç›¸åŒä¸»é”®æ—¶ï¼Œå¯ç›´æ¥åŸºäºç´¢å¼•å¤ç”¨æ¯”è¾ƒè¿‡çš„è·¯å¾„ï¼Œæ— éœ€é‡æ–°éå†æ ‘ç»“æ„ã€‚</li>
<li>æ‰¹é‡åˆå¹¶è¾“å‡ºï¼šåœ¨ä¸€æ¬¡è°ƒæ•´ä¸­ï¼Œå¯å®šä½å¹¶è¾“å‡ºå½“å‰æ ‘ä¸­æ‰€æœ‰ç›¸åŒä¸»é”®çš„è®°å½•ï¼Œæ”¯æŒåˆå¹¶å‡½æ•°ä¸€æ¬¡æ€§å®Œæˆèšåˆã€‚</li>
<li>æ¶ˆé™¤æ·±æ‹·è´ï¼šé€šè¿‡ç´¢å¼•ç›´æ¥å¼•ç”¨æ•°æ®ä½ç½®ï¼Œæ— éœ€è¿›è¡Œå¯¹è±¡å¤åˆ¶ï¼Œå¤§å¹…é™ä½å†…å­˜ä¸CPUå¼€é”€ã€‚</li>
</ul>
<p>è¯¥æ–¹æ¡ˆåœ¨å®é™…æµ‹è¯•ä¸­å¸¦æ¥çº¦15%çš„è¯»å–æ€§èƒ½æå‡ï¼Œæœ‰æ•ˆæ”¯æ’‘LSM-Treeæ¶æ„ä¸‹é«˜ååã€ä½å»¶è¿Ÿçš„æŸ¥è¯¢éœ€æ±‚ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ec591449f8442c1a5cbec0d8a1b9732~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=JizmMYYghVLwGtV1TicmScnZxIg%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Compactionä¼˜åŒ–</strong></p>
<p>Hudi Compaction æ˜¯é¢å‘ MoR è¡¨è®¾è®¡çš„ä¸€é¡¹æ ¸å¿ƒåå°æœåŠ¡ï¼Œå…¶ä¸»è¦åŠŸèƒ½æ˜¯å°†è¡Œå¼å¢é‡æ—¥å¿—æ–‡ä»¶ä¸åˆ—å¼åŸºç¡€æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œä»¥ç”Ÿæˆæ–°ç‰ˆã€æ›´é«˜æ•ˆçš„åŸºç¡€æ–‡ä»¶ã€‚åœ¨ Hudi-LSM Tree çš„ç ”å‘è¿‡ç¨‹ä¸­ï¼Œé’ˆå¯¹å…¶æ’æœŸé˜¶æ®µç›®å‰å­˜åœ¨çš„æ€§èƒ½åŠç¨³å®šæ€§ç“¶é¢ˆï¼Œåšå‡ºå¦‚ä¸‹ä¸¤é¡¹ä¸»è¦ä¼˜åŒ–ï¼š</p>
<p><strong>1. å¢é‡æ’æœŸ</strong></p>
<p>æ’æœŸé˜¶æ®µä¸»è¦å·¥ä½œæ˜¯åˆ’å®šå“ªäº›åˆ†åŒºçš„å“ªäº›File Sliceså°†å‚ä¸Compactionï¼Œç„¶åç”Ÿæˆä¸€ä¸ªè®¡åˆ’ï¼ˆCompaction Planï¼‰ä¿å­˜åˆ°Timelineã€‚å®é™…åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œä»…éœ€é’ˆå¯¹æœ‰æ–°å¢æ•°æ®çš„åˆ†åŒºæ‰§è¡Œå³å¯ã€‚ç„¶è€Œï¼ŒåŸæœ‰Compactionç­–ç•¥æ— è®ºåˆ†åŒºæ˜¯å¦å­˜åœ¨æ–°æ•°æ®ï¼Œéƒ½ä¼šå…¨ç›˜æ‰«ææ‰€æœ‰åˆ†åŒºï¼Œå¯¼è‡´ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ï¼Œä¸”éšç€åˆ†åŒºæ•°é‡å¢åŠ ï¼Œè¿˜å¯èƒ½å¼•å‘ä»»åŠ¡å¤±è´¥ã€‚ä¸ºæ­¤ï¼Œåœ¨LSMç‰ˆæœ¬ä¸­å¼•å…¥äº†Incremental Compactionç­–ç•¥ï¼Œ å…¶æ ¸å¿ƒå·¥ä½œæµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e8ef6c680df401794e74585f3997d09~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=WZC0Ouduasvfiz4t0b3ZtAizgOo%3D" alt="image.png" loading="lazy"/></p>
<p>é¦–å…ˆï¼Œå°†ä»ä¸Šä¸€æ¬¡å®ŒæˆCompactionåˆ°å½“å‰æ—¶åˆ»çš„è¿™æ®µæ—¶é—´è§†ä¸ºä¸€ä¸ªå¢é‡çª—å£ï¼Œåœ¨æ­¤æœŸé—´é€šè¿‡deltacommitæäº¤çš„åˆ†åŒºï¼Œå³ä¸ºå†™å…¥äº†å¢é‡æ•°æ®çš„åˆ†åŒºã€‚å¦‚å›¾ä¸­æ‰€ç¤ºï¼Œè‹¥åœ¨T5æ—¶åˆ»è¿›è¡Œè°ƒåº¦ï¼Œåˆ™(T1, T5)å³ä¸ºå¢é‡çª—å£ï¼Œå…¶ä¸­åœ¨T2ã€T3æ—¶åˆ»å†™å…¥çš„Partition4ä¸Partition5éœ€çº³å…¥æœ¬æ¬¡åˆå¹¶è®¡åˆ’ã€‚</p>
<p>å…¶æ¬¡ï¼Œéœ€å…³æ³¨åœ¨ä¸Šä¸€æ¬¡è°ƒåº¦æ—¶å› IOé™åˆ¶è€Œæœªå®Œå…¨å¤„ç†çš„åˆ†åŒºï¼Œè¿™äº›åˆ†åŒºä¿¡æ¯ä¼šè¢«è®°å½•åœ¨Compaction plançš„MissingPartitionsä¸­ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨T5æ—¶åˆ»è¿›è¡Œè°ƒåº¦æ—¶ï¼Œéœ€è€ƒè™‘T1æ—¶åˆ»planä¸­è®°å½•çš„Partition3ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨å¹¶å‘åœºæ™¯ä¸‹ï¼Œè¿˜éœ€è€ƒè™‘é‚£äº›åœ¨è°ƒåº¦æ—¶åˆ»ä¹‹å‰å·²ç”Ÿæˆä½†å°šæœªå®Œæˆæäº¤çš„æ•°æ®ï¼Œç›¸å…³ä¿¡æ¯ä¿å­˜åœ¨Compaction plançš„MissingInstantsä¸­ï¼Œä¹Ÿåº”åœ¨è°ƒåº¦æ—¶äºˆä»¥çº³å…¥ã€‚ä¾‹å¦‚ï¼ŒT1æ—¶åˆ»planä¸­è®°å½•çš„T0æ—¶åˆ»æœªæäº¤çš„Partition1ï¼Œä»¥åŠåœ¨T5æ—¶åˆ»è°ƒåº¦æ—¶ï¼Œå°†æœªå®Œæˆæäº¤çš„T4æ—¶åˆ»è®°å½•è‡³æœ¬æ¬¡è®¡åˆ’ã€‚</p>
<p>æœ€ç»ˆï¼Œåœ¨T5æ—¶åˆ»è°ƒåº¦ä¸­ï¼Œæ‰€æœ‰éœ€å‚ä¸åˆå¹¶çš„åˆ†åŒºåŒ…æ‹¬ï¼šPartition1ã€Partition3ã€Partition4ã€Partition5ã€‚</p>
<p><strong>2. Flink æµå¼æ’æœŸ</strong></p>
<p>åŸæœ‰æ’æœŸæœºåˆ¶çš„æ‰§è¡Œæ—¶åºè®¾å®šäº Commit æ“ä½œå®Œæˆåã€æ–° Instant ç”Ÿæˆå‰ï¼Œä¸”å…¨æµç¨‹å‡åœ¨ JobManagerï¼ˆJMï¼‰èŠ‚ç‚¹ä¸Šæ‰§è¡Œã€‚è¯¥æ¨¡å¼å­˜åœ¨ä¸¤é¡¹çªå‡ºå¼Šç«¯ï¼šå…¶ä¸€ï¼Œä¼šé˜»å¡æ–° Instant çš„æ­£å¸¸ç”Ÿæˆæµç¨‹ï¼Œè¿›è€Œå¯¼è‡´æ•°æ®æ¶ˆè´¹é“¾è·¯ä¸­æ–­ï¼›å…¶äºŒï¼Œè‹¥æ’æœŸç¯èŠ‚å‘ç”Ÿå¼‚å¸¸æ•…éšœï¼Œå°†ç›´æ¥é€ æˆæ•´ä¸ªä»»åŠ¡æ‰§è¡Œå¤±è´¥ã€‚</p>
<p>é’ˆå¯¹ä¸Šè¿°ç—›ç‚¹é—®é¢˜ï¼Œæ–°é‡‡ç”¨çš„æµå¼æ’æœŸæ–¹æ¡ˆè¿›è¡Œå…³é”®æ€§ä¼˜åŒ–è°ƒæ•´ï¼šæ–¹æ¡ˆå°†æ’æœŸæ ¸å¿ƒé€»è¾‘å•ç‹¬æŠ½ç¦»ï¼Œå°è£…ä¸ºç‹¬ç«‹ç®—å­å¹¶éƒ¨ç½²è‡³ TaskManagerï¼ˆTMï¼‰èŠ‚ç‚¹æ‰§è¡Œã€‚é€šè¿‡æ¶æ„å±‚é¢çš„æ ¹æœ¬æ€§ä¼˜åŒ–ï¼Œå½»åº•æ”»å…‹åŸæœ‰æ¨¡å¼çš„ä¸¤å¤§æ ¸å¿ƒç—›ç‚¹ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œä¸º Flink æµå¼æ’æœŸçš„æ‹“æ‰‘ç»“æ„ç¤ºæ„å›¾ã€‚å…¶ä¸­ï¼Œè·å–æ’æœŸåˆ†åŒºã€åˆ—å‡ºå¾…åˆå¹¶æ–‡ä»¶ã€ç”Ÿæˆ compaction plan ç­‰æ’æœŸæ ¸å¿ƒæ“ä½œï¼Œå‡ç”±ç‹¬ç«‹ç®—å­è´Ÿè´£æ‰§è¡Œå®Œæˆã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b41f75a9b81240dcac68fe0c4a3b8f4d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=kN0ETrUndZwuY2zXtef0GMo%2FdGc%3D" alt="image.png" loading="lazy"/></p>
<p><strong>Benchmark</strong></p>
<p>åŸºäºTPCDSä¸Nexmarkæ ‡å‡†æ•°æ®é›†ï¼Œåœ¨ç»Ÿä¸€æµ‹è¯•ç¯å¢ƒä¸‹å¯¹ä»¥ä¸‹ä¸‰ç§è¡¨æ ¼å¼è¿›è¡Œbenchmarkè¯„æµ‹ï¼šMoR-LSMï¼ˆJD-Hudiä¼˜åŒ–ç‰ˆæœ¬ï¼‰ã€MoR-Avroï¼ˆJD-HudiåŸç”Ÿç‰ˆæœ¬ï¼‰ä¸PK Tableï¼ˆPaimon 1.0.1ï¼‰ï¼Œä»¥ä»»åŠ¡æ‰§è¡Œæ—¶é—´æˆ–æ•°æ®æ¶ˆè´¹æ—¶é—´ä¸ºè¯„ä¼°æŒ‡æ ‡ï¼Œç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c65ee6c2cda747c8b5b5574575eb87a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=Mb8B6BCC7LtOn75eF7jVpnSrPkw%3D" alt="image.png" loading="lazy"/></p>
<p><strong>02. Partial Update Foreign-Key Join</strong></p>
<p><strong>ä¸šåŠ¡èƒŒæ™¯</strong></p>
<p>åŸºäºå‰æœŸæ•°æ®èµ„äº§å‡†å®æ—¶åŒ–æ”¹é€ ï¼Œä¸Šæ¸¸é“¾è·¯å•†å“åŸºç¡€æ˜ç»†ç›®å‰å·²å…·å¤‡å‡†å®æ—¶æ—¶æ•ˆã€‚å½“å‰éœ€æŒç»­æ¨è¿›ä¸‹æ¸¸é“¾è·¯ä¸­å•†å“å®½è¡¨çš„å‡†å®æ—¶åŒ–æ”¹é€ å·¥ä½œã€‚å•†å“å®½è¡¨ä»¥SKUä¿¡æ¯ä¸ºæ ¸å¿ƒåŸºç¡€ï¼Œéœ€é€šè¿‡æµå¼å¤„ç†æ–¹å¼æ‰©å±•ç›¸å…³ç»´åº¦ä¿¡æ¯ï¼Œæ¶‰åŠéä¸»é”®å…³è”æ›´æ–°çš„åœºæ™¯ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/62ab7d54fe7c4fb1b3bfdad576e2e81d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=yolPjF64d7VXBBQvxT19%2BD%2F5xI4%3D" alt="image.png" loading="lazy"/></p>
<p><strong>å¸¸è§„æ–¹æ¡ˆ</strong></p>
<p>å®æ—¶ï¼šä½¿ç”¨Flinkæµå¼Joinï¼Œæµ·é‡æ•°æ®åœºæ™¯ä¸‹çŠ¶æ€å­˜å‚¨å·¨å¤§ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€è¿ç»´å¤æ‚</p>
<p>ç¦»çº¿ï¼šå®šæœŸæ‰§è¡ŒSpark Joinï¼Œæ•°æ®æ—¶æ•ˆé€€åŒ–ä¸ºè°ƒåº¦å‘¨æœŸ+æ‰§è¡Œæ—¶é—´</p>
<p>ä¸Šè¿°ä¸¤ç§æ–¹æ¡ˆéš¾ä»¥åœ¨æµ·é‡æ•°æ® Join çš„åœºæ™¯ä¸‹åŒæ—¶ä¿éšœé“¾è·¯çš„ç¨³å®šæ€§ä¸æ•°æ®çš„æ—¶æ•ˆæ€§ã€‚ä¸ºæ­¤ï¼Œäº¬ä¸œå†…éƒ¨è®¾è®¡å¹¶å¼•å…¥å¤–é”®ç´¢å¼•æ–¹æ¡ˆã€‚</p>
<p><strong>å¤–é”®ç´¢å¼•æ–¹æ¡ˆ</strong></p>
<p>åœ¨ Hudi ä¸­ï¼ŒPartial Update åœ¨æµå¼ä¸»é”®å…³è”åœºæ™¯ä¸‹ï¼Œèƒ½å¤Ÿå¤§çŠ¶æ€ä¸‹æ¨è‡³å­˜å‚¨å±‚ï¼Œä»è€Œä¿éšœå®æ—¶ä»»åŠ¡çš„ç¨³å®šæ€§ã€‚åªè¦å…·å¤‡å¤–é”®ç´¢å¼•èƒ½åŠ›ï¼Œå³å¯é€šè¿‡å¤–é”®å€¼é«˜æ•ˆåœ°æŸ¥è¯¢å¯¹åº”çš„ä¸»é”®ï¼Œä»è€Œæ»¡è¶³ä¸šåŠ¡éœ€æ±‚ã€‚</p>
<p>äº¬ä¸œå†…éƒ¨è®¾è®¡ä¸€ç§å¤–é”®ç´¢å¼•ï¼šå…·å¤‡é€šè¿‡å¤–é”®å€¼å¿«é€Ÿå®šä½ä¸»é”®å€¼çš„èƒ½åŠ›ï¼Œæ”¯æŒå¹¶å‘æ›´æ–°æ“ä½œï¼Œå…·å¤‡é«˜æ•ˆçš„ç‚¹æŸ¥æ€§èƒ½ï¼Œå¹¶å…·æœ‰å¯æ‰©å±•æ€§ä¸å¯æ’æ‹”çš„ç´¢å¼•å­˜å‚¨æœºåˆ¶ã€‚æœ€ç»ˆçš„æ•´ä½“é“¾è·¯æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51880468c0aa4937ba89c538756c7b56~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=%2BTac8d0wtuGsuDC5vbHhUS50GbE%3D" alt="image.png" loading="lazy"/></p>
<p>SKU æ•°æ®æµå®æ—¶æ›´æ–°ç»´æŠ¤å¤–é”®ç´¢å¼•ï¼Œå¹¶ Partial Update ä¸‹å‘åˆ° Hudi å•†å“å®½è¡¨</p>
<p>SPU æ•°æ®æµå®æ—¶æŸ¥è¯¢å¤–é”®ç´¢å¼•ï¼Œè·å–æ‰€æœ‰ç›¸å…³ä¸»é”®ï¼Œå±•å¼€å Partial Update ä¸‹å‘åˆ° Hudi å•†å“å®½è¡¨</p>
<p>æœ€ç»ˆæ»¡è¶³ä¸šåŠ¡åˆ†é’Ÿçº§æ—¶æ•ˆ</p>
<p><strong>03. æ•°æ®æ¹– + AI æ¢ç´¢ï¼šHudi NativeIO SDK</strong></p>
<p>å½“å‰è®­ç»ƒå¼•æ“çš„ IO å±‚å°šæœªå…·å¤‡é¢å‘æ•°æ®æ¹–çš„åŸç”Ÿé€‚é…èƒ½åŠ›ï¼ˆå³â€œNativeIOâ€èƒ½åŠ›ï¼‰ï¼Œè‡´ä½¿åœ¨æ•°æ®è¯»å–è¿‡ç¨‹ä¸­å‡ºç° IO æ”¾å¤§ç°è±¡ï¼Œåºåˆ—åŒ–ä¸ååºåˆ—åŒ–çš„å¼€é”€è¾ƒé«˜ï¼Œä»è€Œè¿›ä¸€æ­¥é™åˆ¶è®­ç»ƒæ•ˆç‡çš„æå‡ã€‚</p>
<p>éšç€ä¸šåŠ¡åœºæ™¯å¯¹æ¨¡å‹å®æ—¶æ€§ä¸ç²¾å‡†æ€§è¦æ±‚çš„ä¸æ–­æå‡ï¼ŒäºŸéœ€æ‰“é€šæ ·æœ¬è®­ç»ƒå¼•æ“ä¸æ•°æ®æ¹–ä¹‹é—´çš„ç›´æ¥å¯¹æ¥é€šé“ã€‚é€šè¿‡æ„å»ºé€‚é… Hudi çš„ NativeIO SDKï¼Œä½¿è®­ç»ƒå¼•æ“èƒ½å¤Ÿè·³è¿‡ä¸­é—´åŒæ­¥ç¯èŠ‚ï¼Œç›´æ¥åŸºäº Hudi æ¹–è¡¨è¿›è¡Œæ ·æœ¬è¯»å–ï¼Œæ·±åº¦å¤ç”¨æ•°æ®æ¹–åœ¨å¢é‡æ›´æ–°ã€é«˜æ•ˆè¿‡æ»¤ç­‰æ–¹é¢çš„èƒ½åŠ›ã€‚åŒæ—¶ï¼Œé€šè¿‡ NativeIO å±‚é¢çš„ä¼˜åŒ–æ‰‹æ®µï¼Œå¦‚åˆ—å¼å­˜å‚¨é€‚é…ã€æ‰¹é‡æ•°æ®ç›´è¯»ä»¥åŠå‡å°‘æ•°æ®æ‹·è´ç­‰ï¼Œæœ‰æ•ˆé™ä½ IO æŸè€—ï¼Œä»æ ¹æœ¬ä¸Šæå‡æ ·æœ¬æ•°æ®çš„æ—¶æ•ˆæ€§ä¸è·å–æ•ˆç‡ï¼Œä»è€Œæ¨åŠ¨æ¨¡å‹æ•ˆæœçš„æŒç»­ä¼˜åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b99359f87b9349e08eccdfb97142f838~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=KN3r%2FMSrHNL9Gx9HdxsBmoel5Rc%3D" alt="image.png" loading="lazy"/></p>
<p>äº¬ä¸œå†…éƒ¨ Hudi NativeIO SDK é‡‡ç”¨åˆ†å±‚è§£è€¦çš„æ¶æ„è®¾è®¡ï¼Œæ•´ä½“åˆ’åˆ†ä¸ºæ•°æ®è°ƒç”¨å±‚ã€è·¨è¯­è¨€ Transformation å±‚ã€Hudi è§†å›¾ç®¡ç†å±‚ä»¥åŠé«˜æ€§èƒ½æŸ¥è¯¢å±‚å››å¤§æ ¸å¿ƒæ¨¡å—ã€‚å„æ¨¡å—èŒè´£æ˜ç¡®ã€è¾¹ç•Œæ¸…æ™°ï¼Œè‡ªä¸Šè€Œä¸‹ååŒè¿ä½œï¼Œæ—¢ç¡®ä¿ç”¨æˆ·æ“ä½œçš„ä¾¿æ·æ€§ï¼Œåˆå®ç°å¯¹æ¹–è¡¨æ•°æ®çš„é«˜æ•ˆè¯»å–ä¸é«˜æ—¶æ•ˆå“åº”ï¼Œæœ€ç»ˆæœ‰æ•ˆæ”¯æ’‘æ ·æœ¬è®­ç»ƒå¼•æ“ç›´æ¥å¯¹æ¥ Hudi æ¹–è¡¨ï¼Œå®ç°é«˜æ•ˆè®­ç»ƒã€‚</p>
<p><strong>æœ€ç»ˆæ•ˆæœ</strong></p>
<p>åŸºäº NativeIO SDK è¯»å– Parquet æ–‡ä»¶ï¼Œç›¸è¾ƒäº Spark å‘é‡åŒ–è¯»å– Parquet æ–‡ä»¶ï¼Œæ€§èƒ½æå‡çº¦ 2 å€ã€‚</p>
<p>è¯¥æ€§èƒ½ä¼˜åŒ–æœ‰æ•ˆè§£å†³ AI åœºæ™¯ä¸‹æ ·æœ¬å¼•æ“åœ¨æ•°æ®è¯»å–ç¯èŠ‚çš„å…³é”®ç“¶é¢ˆï¼Œä»è€Œæ˜¾è‘—æå‡äº†æ•´ä½“å¤„ç†æ—¶æ•ˆã€‚</p>
<h2 data-id="heading-2">ä¸‰ã€ä¸šåŠ¡å®è·µ</h2>
<p><strong>æµé‡æ•°ä»“ADMæ•°æ®æ¹–å‡çº§</strong></p>
<p>æµé‡ä¸šåŠ¡å½“å‰å­˜åœ¨å®æ—¶ã€ç¦»çº¿ä¸¤å¥—å¼€å‘é“¾è·¯ï¼Œå­˜åœ¨è¿ç»´å’Œå¼€å‘æˆæœ¬é«˜ï¼Œå£å¾„ä¸ä¸€è‡´ç­‰é—®é¢˜ï¼› ç¦»çº¿é“¾è·¯å„åœºåŸŸåŸºäºåŸ‹ç‚¹æ•°æ®è‡ªè¡ŒåŠ å·¥å­˜åœ¨å£å¾„ä¸ä¸€è‡´å’Œæ•°æ®å­˜å‚¨å†—ä½™ç­‰é—®é¢˜ï¼›åŒæ—¶å½“å‰ä¸å…·å¤‡æ»¡è¶³å‡†å®æ—¶æ•°æ®åœºæ™¯ã€‚æµé‡ä¸šåŠ¡å­˜åœ¨å¦‚æ•°æ®å€¾æ–œä¸¥é‡ã€æ•°æ®è§„æ¨¡è¶…å¤§ã€å¹¶å‘ä¿®æ•°ç­‰æŒ‘æˆ˜ï¼ŒåŸºäºæ•°æ®æ¹–Hudiå»ºè®¾ç»Ÿä¸€æµé‡å…¬å…±å±‚å‡†å®æ—¶é“¾è·¯ï¼Œå®æ—¶é“¾è·¯ç»Ÿä¸€å£å¾„åŠ å·¥å°†å®æ—¶æ•°æ®å…¥æ¹–ï¼Œæä¾›å‡†å®æ—¶æ•°æ®åˆ†æèƒ½åŠ›ï¼Œåœ¨é“¾è·¯å‡çº§è¿‡ç¨‹ä¸­åšäº†å¤§é‡çš„å†…æ ¸ä¼˜åŒ–ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a9ad5b8b76284eec8e8540aaf2b84ea3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Lqs5Lic6Zu25ZSu5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357150&amp;x-signature=WWfySbBxmAQ3%2FmMoKmqe25o3eJw%3D" alt="image.png" loading="lazy"/></p>
<ol>
<li>åŸºäºBucket Indexçš„MoRè¡¨åœ¨æµé‡æ•°æ®ç”Ÿäº§é“¾è·¯å­˜åœ¨å°†æ¡¶åˆ†é…è‡³å†™Write Taskæ—¶ä¸å‡åŒ€å¯¼è‡´éƒ¨åˆ†Taskè´Ÿè½½é«˜ã€éƒ¨åˆ†Taskç©ºé—²ï¼Œå¹¶å‘èµ„æºåˆ©ç”¨ä½ï¼Œå½±å“æµé‡ä½œä¸šçš„å†™å…¥æ€§èƒ½ï¼›åŒæ—¶æµé‡ä¸šåŠ¡åˆ†åŒºæ•°æ®å€¾æ–œTB-&gt;MBï¼ŒFix Bucketæ¨¡å¼å¯¼è‡´å°æ•°æ®é‡åˆ†åŒºäº§ç”Ÿè¿‡å¤šçš„å°æ–‡ä»¶</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>è‡ªç ”åŸºäºTimelineServiceçš„Remote PartitioneråŠŸèƒ½,é‡‡ç”¨é›†ä¸­å¼åˆ†åŒº+æ¡¶åˆ†é…ç­–ç•¥ï¼Œè§£å†³æ¡¶åˆ†é…å€¾æ–œ</p>
<p>è‡ªç ”åˆ†åŒºçº§åˆ†æ¡¶ï¼ŒæŒ‰ç…§ä¸šåŠ¡åˆ†åŒºæ•°æ®ç‰¹æ€§è‡ªå®šä¹‰åˆ†åŒºæ¡¶æ•°ï¼Œå¹¶å®ç°åŸåœ°æ¡¶æ‰©ç¼©å®¹</p>
<ol start="2">
<li>æµé‡æ›å…‰ä¸šåŠ¡æ—¥æ›´æ–°æ•°æ®é‡çº§åƒäº¿çº§ï¼ŒMoR(Avro) Compactionæ€§èƒ½ã€è¯»æ—¶åˆå¹¶ã€æ›´æ–°æ€§èƒ½æ— æ³•æ»¡è¶³ï¼ŒSLAå‹åŠ›å¤§ï¼›ç¤¾åŒºåŸç”ŸMoRä¸æ”¯æŒå¹¶å‘æ›´æ–°ï¼Œå›æº¯ä¿®æ•°åœºæ™¯éœ€åœç”Ÿäº§æ— æ³•æ»¡è¶³æµé‡ä¸šåŠ¡å‡†å®æ—¶éœ€æ±‚</li>
</ol>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>è‡ªç ”LSM-Treeæ•°æ®ç»„ç»‡æ ¼å¼ï¼ŒåŸºäºLSMé¡ºåºè¯»å†™åŠåˆ†å±‚åˆå¹¶çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œæå‡MoRè¯»ã€å†™ã€åˆå¹¶æ€§èƒ½ï¼›</p>
<p>åŸºäºLSM-Treeæ–‡ä»¶éš”ç¦»æœºåˆ¶ï¼Œè§£å†³å…ƒæ•°æ®å†²çªã€ JMä¸TMé€šä¿¡å†²çªã€ä»¥åŠHiveå…ƒæ•°æ®åŒæ­¥çš„å†²çªï¼Œå®ç°è½»é‡çº§çš„æ— é”å¹¶å‘Upsert</p>
<p>3.æµé‡ä¸šåŠ¡é“¾è·¯ä¸­å®æ—¶å…³è”SKUç»´åº¦ä¿¡æ¯ï¼ŒSKUå®æ—¶å˜æ›´ï¼Œå¤©çº§åˆ«åˆ†åŒºå†…ä¸åŒä¸»é”®ç›¸åŒSKUçš„ç»´åº¦ä¿¡æ¯ä¸ä¸€è‡´ï¼Œä¾èµ–T+1ç¦»çº¿ä¿®æ•°</p>
<p>**è§£å†³æ–¹æ¡ˆï¼š **</p>
<p>è‡ªç ”Hudiå¤–é”®ç´¢å¼• + Partial Updateï¼Œå®ç°SKUç»´åº¦ä¿¡æ¯å˜æ›´æ—¶çš„ä¸»é”®å›åˆ·ï¼Œä¿æŒåŒä¸€ä¸ªåˆ†åŒºå†…SKUä¿¡æ¯æ•°æ®çš„ä¸€è‡´æ€§</p>
<h2 data-id="heading-3">å››ã€ç¤¾åŒºè´¡çŒ®åŠæœªæ¥è§„åˆ’</h2>
<p><strong>ç¤¾åŒºè´¡çŒ®</strong></p>
<p>ç›®å‰äº¬ä¸œHudiå›¢é˜Ÿç´¯è®¡å‘ç¤¾åŒºè´¡çŒ®109ä¸ªPRï¼Œå…¶ä¸­åŒ…å«ä¸€äº›é‡è¦çš„å·¥ä½œï¼Œä¾‹å¦‚RFC-83 Incremental Table Serviceã€RFC-89 Partition Level Bucket Indexã€HUDI-6212 Hudi Spark 3.0.x integrationç­‰ï¼Œå……åˆ†ä½“ç°äº†å›¢é˜Ÿåœ¨ Hudi é¡¹ç›®ä¸­çš„é‡è¦ä½œç”¨åŠæŒç»­è´¡çŒ®èƒ½åŠ›ã€‚ç›®å‰å›¢é˜ŸåŒ…å«ä¸€åHudi PMCï¼Œä¸€åHudi Committerï¼ŒHudiå‰100åæºç è´¡çŒ®è€…ä¸­å›¢é˜Ÿå 6äººï¼Œå‘å±•æˆä¸ºHudiç¤¾åŒºçš„é‡è¦åŠ›é‡ä¹‹ä¸€ã€‚</p>
<p><strong>æœªæ¥è§„åˆ’</strong></p>
<ul>
<li>åŸºäºç¤¾åŒºæœ€æ–°ç‰ˆæœ¬ï¼Œæ¨è¿›JDå†…éƒ¨Hudiç‰ˆæœ¬æ¼”è¿›</li>
<li>æ•°æ®æ¹–æ”¯æŒå¤šæ¨¡æ€èƒ½åŠ›ï¼Œæ”¯æŒéç»“æ„åŒ–æ•°æ®å­˜å‚¨ä»¥åŠå‘é‡ç´¢å¼•ç­‰èƒ½åŠ›æ”¯æ’‘ AI åœºæ™¯</li>
<li>åŸºäºRust+Arrowæ¨è¿›NativeIOèƒ½åŠ›</li>
<li>æ¢ç´¢æ¹–æµä¸€ä½“æŠ€æœ¯æ–¹æ¡ˆ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringSecurityå…¥é—¨ç¯‡ï¼ˆ1ï¼‰]]></title>    <link>https://juejin.cn/post/7592251792651042843</link>    <guid>https://juejin.cn/post/7592251792651042843</guid>    <pubDate>2026-01-07T02:15:14.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592251792651042843" data-draft-id="7591441637050515506" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringSecurityå…¥é—¨ç¯‡ï¼ˆ1ï¼‰"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„"/> <meta itemprop="datePublished" content="2026-01-07T02:15:14.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="åŠ æ´›æ–¯"/> <meta itemprop="url" content="https://juejin.cn/user/1084596182848299"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringSecurityå…¥é—¨ç¯‡ï¼ˆ1ï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1084596182848299/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    åŠ æ´›æ–¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:15:14.000Z" title="Wed Jan 07 2026 02:15:14 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»9åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{position:relative;word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:30px;margin-bottom:5px}.markdown-body h2{font-size:24px;display:inline-block;font-weight:700;background:#ef7060;color:#fff;padding:6px 8px 0 0;border-top-right-radius:6px;margin-right:2px;box-shadow:6px 3px 0 0 rgba(239,112,96,.2)}.markdown-body h2:before{content:" ";display:inline-block;width:8px}.markdown-body h2:after{content:" ";position:absolute;display:block;width:calc(100% - 50px);border-bottom:3px solid #ef7060}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #3e3e3e;margin-top:32px;margin-bottom:32px;height:1px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(27,31,35,.05);color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:JetBranins Mono,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px;background-color:#fdfdfd}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#fdfdfd}.markdown-body a{text-decoration:none;font-weight:700;color:#ef7060;border-bottom:1px solid #ef7060}.markdown-body a:active,.markdown-body a:hover{color:#ef2d26}.markdown-body table tr td,.markdown-body table tr th{border:1px solid #ccc;padding:5px 10px}.markdown-body table{display:block!important;width:auto;max-width:100%;overflow:auto;border-collapse:collapse}.markdown-body thead{background:#f0f0f0;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#f8f8f8}.markdown-body blockquote{margin-inline-start:0;margin-inline-end:0;border-left:3px solid #ef7060;background:#fff9f9;padding:1px 20px;margin-top:20px}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><blockquote>
<p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯åŠ æ´›æ–¯ï¼Œæ˜¯ä¸€åå…¨æ ˆå·¥ç¨‹å¸ˆğŸ‘¨â€ğŸ’»ï¼Œè¿™é‡Œæ˜¯æˆ‘çš„çŸ¥è¯†ç¬”è®°ä¸åˆ†äº«ï¼Œæ—¨åœ¨æŠŠå¤æ‚çš„ä¸œè¥¿è®²æ˜ç™½ã€‚å¦‚æœå‘ç°æœ‰è¯¯ğŸ”ï¼Œä¸‡åˆ†æ¬¢è¿ä½ å¸®æˆ‘æŒ‡å‡ºæ¥ï¼åºŸè¯ä¸å¤šè¯´ï¼Œæ­£æ–‡å¼€å§‹ ğŸ‘‡</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€åˆè¯†SpringSecurity</h2>
<h3 data-id="heading-1">1.1 ä»€ä¹ˆæ˜¯SpringSecurity</h3>
<p><code>SpringSecurity</code>æ˜¯ä¸€ä¸ª<code>Java</code>æ¡†æ¶ï¼Œç”¨äºä¿æŠ¤åº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚å®ƒæä¾›äº†ä¸€å¥—å…¨é¢çš„å®‰å…¨è§£å†³æ–¹æ¡ˆï¼ŒåŒ…æ‹¬<strong>èº«ä»½éªŒè¯ã€æˆæƒã€é˜²æ­¢æ”»å‡»</strong>ç­‰åŠŸèƒ½ã€‚</p>
<p><code>SpringSecurity</code>åŸºäº<strong>è¿‡æ»¤å™¨é“¾</strong>çš„æ¦‚å¿µï¼Œå¯ä»¥è½»æ¾åœ°é›†æˆåˆ°ä»»ä½•åŸºäº<code>Spring</code>çš„åº”ç”¨ç¨‹åºä¸­ã€‚å®ƒæ”¯æŒ<strong>å¤šç§èº«ä»½éªŒè¯é€‰é¡¹å’Œæˆæƒç­–ç•¥</strong>ï¼Œå¼€å‘äººå‘˜å¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©é€‚åˆçš„æ–¹å¼ã€‚</p>
<h3 data-id="heading-2">1.2 SpringSecurityåˆä½“éªŒ</h3>
<p>é¦–å…ˆæˆ‘ä»¬æ–°å»ºä¸€ä¸ªSpring Booté¡¹ç›®ï¼Œ<strong>é€‰æ‹©ä¾èµ–æ—¶ï¼Œåªéœ€è¦å‹¾é€‰</strong>ï¼š<code>Spring Web</code>Â å’ŒÂ <code>Spring Security</code>ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13fa04a533724dfc9a17b59a89a3ad7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=O85QD%2BiHM5QPTy5r35dQ3y2Lds0%3D" alt="image.png" width="70%" loading="lazy"/>
<p>å‹¾é€‰åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨<code>pom</code>æ–‡ä»¶ä¸­çœ‹åˆ°æˆ‘ä»¬çš„<code>SpringSecurity</code>ä¾èµ–</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9bed24abe7545bea960424f1fc35d23~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=pn6QPyhzAsMXk7LLfA7vbKGENR8%3D" alt="image.png" width="70%" loading="lazy"/>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬ç›´æ¥å†™ä¸€ä¸ªcontroller</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UserController</span> {

    <span class="hljs-meta">@RequestMapping("/user")</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getUser</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"ç”¨æˆ·ä¿¡æ¯"</span>;
    }
}
</code></pre>
<p>ç„¶åå¯åŠ¨é¡¹ç›®ï¼Œåœ¨å¯åŠ¨æ—¥å¿—é‚£å—ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸²è«åå…¶å¦™çš„ä¸œè¥¿ï¼Œè¿™ä¸²ä¸œè¥¿å°±æ˜¯SpringSecurityè‡ªåŠ¨ä¸ºæˆ‘ä»¬ç”Ÿæˆçš„åˆå§‹å¯†ç ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cc836e96f4cb4d818467109d7c21c55b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=B6w6pSzkqLoRrltS%2FkR1%2F5d6CZs%3D" alt="image.png" loading="lazy"/></p>
<p>æŒ‰ç†æ¥è¯´æˆ‘ä»¬è®¿é—®<code>http://localhost:8080/user</code> åº”è¯¥èƒ½çœ‹åˆ°æˆ‘ä»¬controllerè¿”å›çš„ç»“æœï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ï¼Œ<strong>è€Œæ˜¯ä¼šçœ‹åˆ°ä¸€ä¸ªç™»å½•é¡µé¢</strong>ï¼è¿™å°±æ˜¯Spring Securityå…¥é—¨çš„ç¬¬ä¸€æ­¥ï¼š<strong>å®ƒé»˜è®¤ä¿æŠ¤äº†ä½ çš„æ‰€æœ‰è¯·æ±‚</strong>ã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d3d03f2c24b94f8b92f8c216f4e20712~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=GPlDtzhqV4HWQ1lpjFUgX%2FsxHT0%3D" alt="image.png" width="70%" loading="lazy"/>
ç³»ç»Ÿä¸ºä½ çš„åº”ç”¨**è‡ªåŠ¨ç”Ÿæˆ**äº†ä¸€ä¸ªé»˜è®¤ç”¨æˆ·ï¼š**ç”¨æˆ·å**ï¼š`user`ï¼Œ**å¯†ç **ï¼šåœ¨é¡¹ç›®å¯åŠ¨çš„æ§åˆ¶å°æ—¥å¿—ä¸­ï¼Œç™»å½•åä½ å°±èƒ½çœ‹åˆ°æˆ‘ä»¬æ‰€è¿”å›çš„ä¿¡æ¯äº†ï¼
<blockquote>
<p>è‡³æ­¤ï¼Œä¸€ä¸ªæœ€ç®€å•ä¹Ÿæœ€ç›´è§‚çš„Spring Securityå…¥é—¨æ¡ˆä¾‹å·²ç»ä¸ºå¤§å®¶å±•ç¤ºå®Œæ¯•äº†ï¼Œå®ƒèƒ½ä½“éªŒSpring Securityæœ€åŸºç¡€çš„Â  <strong>â€œè®¤è¯â€</strong> Â æµç¨‹ã€‚åœ¨æ²¡æœ‰ä»»ä½•é…ç½®çš„æƒ…å†µä¸‹ï¼Œå®ƒåšäº†ä¸‰ä»¶å…³é”®äº‹:</p>





















<table><thead><tr><th>è‡ªåŠ¨è¡Œä¸º</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>1. å¯ç”¨å®‰å…¨è¿‡æ»¤</strong></td><td>ä¸ºæ‰€æœ‰è¯·æ±‚æŒ‚ä¸Šäº†å®‰å…¨â€œå®‰æ£€â€æµç¨‹ã€‚</td></tr><tr><td><strong>2. ç”Ÿæˆé»˜è®¤ç”¨æˆ·</strong></td><td>åˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶çš„ã€å†…å­˜ä¸­çš„ç”¨æˆ·ï¼ˆ<code>user</code>ï¼‰ã€‚</td></tr><tr><td><strong>3. å¼¹å‡ºç™»å½•é¡µ</strong></td><td>å¯¹äºæœªè®¤è¯çš„è¯·æ±‚ï¼Œè‡ªåŠ¨é‡å®šå‘åˆ°å†…ç½®ç™»å½•é¡µã€‚</td></tr></tbody></table>
</blockquote>
<h2 data-id="heading-3">äºŒã€è¿‡æ»¤å™¨é“¾</h2>
<blockquote>
<p>SpringSecurityçš„æ ¸å¿ƒå·¥ä½œæ¨¡å¼ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ç³»åˆ—ä¸²è”åœ¨Webè¯·æ±‚å‰çš„è¿‡æ»¤å™¨(Filter)ã€‚æ¯ä¸ªè¯·æ±‚éƒ½è¦ç»è¿‡è¿™äº›å®‰å…¨æ£€æŸ¥ï¼Œå°±åƒè¿›åœ°é“å‰è¦ä¾æ¬¡ç»è¿‡å®‰æ£€é—¨ã€éªŒç¥¨é—¸æœºä¸€æ ·</p>
</blockquote>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4025d0191ece407cbc2221e5bc422aa1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=loTFsJAy16OUlcboLM2144bdpKY%3D" alt="deepseek_mermaid_20260105_de7083.png" loading="lazy"/></p>
<p>è¦å½»åº•ç†è§£Spring Securityçš„è¿‡æ»¤å™¨é“¾ï¼Œæˆ‘ä»¬éœ€è¦å…ˆçº æ­£ä¸€ä¸ªå¸¸è§çš„é”™è¯¯è§‚å¿µï¼Œå¹¶æŠ“ä½<strong>å››ä¸ªæœ€æ ¸å¿ƒçš„ç»„ä»¶</strong>ã€‚å¾ˆå¤šäººè®¤ä¸ºâ€œè¿‡æ»¤å™¨é“¾â€å°±æ˜¯ä¸€é•¿ä¸²Â <code>Filter</code>Â ç›´æ¥æ’å¥½é˜Ÿï¼Œä½†è¿™æ˜¯ä¸å‡†ç¡®çš„ã€‚</p>
<p>æˆ‘ä»¬è§‚çœ‹ä¸Šé¢çš„é‚£å¼ å›¾ç‰‡ï¼ŒçœŸæ­£åµŒè¿› Servlet å®¹å™¨çš„åªæœ‰ 1 ä¸ªï¼Œé‚£å°±æ˜¯<code>DelegatingFilterProxy</code>ï¼Œå®ƒæŠŠè¯·æ±‚è½¬ç»™ Spring ç®¡ç†çš„ <code>FilterChainProxy</code>ï¼Œå†ç”±åè€…æŒ‘é€‰æœ¬æ¬¡è¯·æ±‚åº”è¯¥èµ°å“ªä¸€æ¡<code>SecurityFilterChain</code></p>
<p><code>SpringSecurity</code>æœ‰<code>15</code>ä¸ªé»˜è®¤å†…ç½®è¿‡æ»¤å™¨ï¼Œå…¶åœ¨æ¥æ”¶è¯·æ±‚åæ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p>





































































































































<table><thead><tr><th>é¡ºåº</th><th>è¿‡æ»¤å™¨ (Filter)</th><th>æ ¸å¿ƒèŒè´£</th><th>æ˜¯å¦å…³é”®</th><th>6.xå¸¸è§é…ç½®/å˜åŒ–</th><th/></tr></thead><tbody><tr><td>1</td><td><code>ChannelProcessingFilter</code></td><td>å¼ºåˆ¶è¯·æ±‚ä½¿ç”¨HTTPSç­‰å®‰å…¨é€šé“ã€‚</td><td>å¯é€‰</td><td>é€šè¿‡Â <code>.requiresChannel()</code>Â é…ç½®ã€‚</td><td/></tr><tr><td>2</td><td><code>WebAsyncManagerIntegrationFilter</code></td><td>é›†æˆSpringå¼‚æ­¥è¯·æ±‚ï¼ˆå¦‚<code>@Async</code>ï¼‰çš„å®‰å…¨ä¸Šä¸‹æ–‡ã€‚</td><td>ä½</td><td>é€šå¸¸æ— éœ€é…ç½®ã€‚</td><td/></tr><tr><td>3</td><td><code>SecurityContextPersistenceFilter</code></td><td><strong>å…³é”®</strong>ï¼šåœ¨æ¯ä¸ªè¯·æ±‚çš„<strong>å¼€å§‹å’Œç»“æŸæ—¶</strong>ï¼Œè´Ÿè´£ä»å­˜å‚¨ï¼ˆå¦‚Sessionã€JWTä»¤ç‰Œï¼‰ä¸­<strong>æ¢å¤æˆ–æ¸…é™¤ç”¨æˆ·è®¤è¯ä¿¡æ¯</strong>ï¼ˆ<code>SecurityContext</code>ï¼‰ï¼Œå¹¶å°†å…¶ç»‘å®šåˆ°å½“å‰çº¿ç¨‹ï¼ˆ<code>SecurityContextHolder</code>ï¼‰ã€‚</td><td>æ˜¯</td><td>å‰åç«¯åˆ†ç¦»é¡¹ç›®ä¸­ï¼Œå¯é…åˆæ— Sessionç­–ç•¥è‡ªå®šä¹‰å­˜å‚¨æ–¹å¼ã€‚</td><td/></tr><tr><td>4</td><td><code>HeaderWriterFilter</code></td><td>å‘å“åº”å†™å…¥å®‰å…¨ç›¸å…³çš„HTTPå¤´ï¼Œå¦‚<code>X-Content-Type-Options</code>ã€‚</td><td>å¯é€‰</td><td>å¯é€šè¿‡Â <code>.headers()</code>Â é…ç½®è‡ªå®šä¹‰ã€‚</td><td/></tr><tr><td>5</td><td><code>CsrfFilter</code></td><td>é˜²æŠ¤è·¨ç«™è¯·æ±‚ä¼ªé€ æ”»å‡»ï¼Œå¯¹éå¹‚ç­‰çš„<code>POST</code>ã€<code>PUT</code>ç­‰è¯·æ±‚æ ¡éªŒCSRFä»¤ç‰Œã€‚</td><td>å¯é€‰</td><td><strong>å‰åç«¯åˆ†ç¦»APIé¡¹ç›®å¸¸é€šè¿‡Â <code>.csrf().disable()</code>Â ç¦ç”¨ã€‚</strong></td><td/></tr><tr><td>6</td><td><code>LogoutFilter</code></td><td>å¤„ç†æ³¨é”€è¯·æ±‚ï¼ˆé»˜è®¤<code>/logout</code>ï¼‰ï¼Œæ¸…ç†è®¤è¯ä¿¡æ¯ã€‚</td><td>æ˜¯</td><td>å¯é€šè¿‡Â <code>.logout()</code>Â è‡ªå®šä¹‰æ³¨é”€URLã€æˆåŠŸå¤„ç†å™¨ç­‰ã€‚</td><td/></tr><tr><td>7</td><td><code>UsernamePasswordAuthenticationFilter</code></td><td><strong>å…³é”®</strong>ï¼šå¤„ç†<strong>è¡¨å•ç™»å½•</strong>ï¼ˆé»˜è®¤<code>/login</code>Â POSTè¯·æ±‚ï¼‰ï¼Œæ˜¯æ ¸å¿ƒçš„è®¤è¯å…¥å£ä¹‹ä¸€ã€‚</td><td>æ˜¯</td><td>å¯è¢«è‡ªå®šä¹‰ç™»å½•è¿‡æ»¤å™¨ï¼ˆå¦‚æ‰‹æœºéªŒè¯ç ç™»å½•ï¼‰<strong>æ›¿æ¢æˆ–æ‰©å±•</strong>ã€‚</td><td/></tr><tr><td>8</td><td><code>DefaultLoginPageGeneratingFilter</code></td><td>è‡ªåŠ¨ç”Ÿæˆé»˜è®¤ç™»å½•é¡µã€‚</td><td>å¯é€‰</td><td><strong>ç”Ÿäº§ç¯å¢ƒé€šå¸¸é€šè¿‡é…ç½®è‡ªå®šä¹‰ç™»å½•é¡µæ¥é—´æ¥ç¦ç”¨æ­¤è¿‡æ»¤å™¨ã€‚</strong></td><td/></tr><tr><td>9</td><td><code>BasicAuthenticationFilter</code></td><td>å¤„ç†HTTP Basicè®¤è¯ï¼ˆè¯·æ±‚å¤´å¸¦<code>Authorization: Basic ...</code>ï¼‰ã€‚</td><td>å¯é€‰</td><td>å¯é€šè¿‡Â <code>.httpBasic()</code>Â å¯ç”¨æˆ–è‡ªå®šä¹‰ã€‚</td><td/></tr><tr><td>10</td><td><code>RequestCacheAwareFilter</code></td><td>ç”¨æˆ·ç™»å½•æˆåŠŸåï¼Œæ¢å¤å› æœªç™»å½•è€Œè¢«ç¼“å­˜çš„åŸå§‹è¯·æ±‚ï¼ˆâ€œå›åˆ°åˆšæ‰æƒ³çœ‹çš„é¡µé¢â€ï¼‰ã€‚</td><td>å¯é€‰</td><td>å‰åç«¯åˆ†ç¦»é¡¹ç›®æˆ–æ— çŠ¶æ€APIä¸­<strong>ä½œç”¨æœ‰é™</strong>ã€‚</td><td/></tr><tr><td>11</td><td><code>SecurityContextHolderAwareRequestFilter</code></td><td>å¯¹<code>HttpServletRequest</code>è¿›è¡ŒåŒ…è£…ï¼Œå¢åŠ å®‰å…¨ç›¸å…³æ–¹æ³•ï¼ˆå¦‚<code>isUserInRole</code>ï¼‰ã€‚</td><td>ä½</td><td>é€šå¸¸æ— éœ€é…ç½®ã€‚</td><td/></tr><tr><td>12</td><td><code>AnonymousAuthenticationFilter</code></td><td><strong>å…³é”®</strong>ï¼šå¦‚æœè¯·æ±‚è‡³æ­¤ä»æœªè®¤è¯ï¼Œåˆ™è‡ªåŠ¨æ³¨å…¥ä¸€ä¸ªâ€œåŒ¿åç”¨æˆ·â€èº«ä»½ï¼Œä¿è¯<code>SecurityContext</code>éç©ºã€‚</td><td>æ˜¯</td><td>å¯è‡ªå®šä¹‰åŒ¿åç”¨æˆ·çš„æƒé™ç»†èŠ‚ã€‚</td><td/></tr><tr><td>13</td><td><code>SessionManagementFilter</code></td><td>ç®¡ç†ç”¨æˆ·ä¼šè¯ï¼Œå¦‚é˜²æ­¢ä¼šè¯å›ºå®šæ”»å‡»ã€æ§åˆ¶å¹¶å‘ç™»å½•æ•°é‡ã€‚</td><td>å¯é€‰</td><td>é€šè¿‡Â <code>.sessionManagement()</code>Â é…ç½®ä¼šè¯æ§åˆ¶ç­–ç•¥ã€‚</td><td/></tr><tr><td>14</td><td><code>ExceptionTranslationFilter</code></td><td><strong>å…³é”®</strong>ï¼šæ•è·ä¸‹æ¸¸è¿‡æ»¤å™¨ï¼ˆä¸»è¦æ˜¯<code>AuthorizationFilter</code>ï¼‰æŠ›å‡ºçš„<strong>è®¤è¯å’Œæˆæƒå¼‚å¸¸</strong>ï¼Œå¹¶è½¬åŒ–ä¸ºå¯¹åº”çš„HTTPå“åº”ï¼ˆå¦‚é‡å®šå‘åˆ°ç™»å½•é¡µã€è¿”å›401/403ï¼‰ã€‚</td><td>æ˜¯</td><td><strong>æ˜¯â€œè®¤è¯å¤±è´¥è·³ç™»å½•é¡µâ€å’Œâ€œæƒé™ä¸è¶³è¿”å›403â€çš„å¹•åå¯¼æ¼”</strong>ã€‚</td><td/></tr><tr><td>15</td><td><code>AuthorizationFilter</code></td><td><strong>æœ€æ ¸å¿ƒ</strong>ï¼šæ‰§è¡Œ<strong>URLçº§åˆ«</strong>çš„æˆæƒæ£€æŸ¥ã€‚å®ƒæ ¹æ®<code>HttpSecurity</code>ä¸­<code>.authorizeHttpRequests()</code>é…ç½®çš„è§„åˆ™ï¼Œ<strong>å†³å®šå½“å‰ç”¨æˆ·æ˜¯å¦æœ‰æƒè®¿é—®å½“å‰è¯·æ±‚çš„URL</strong>ã€‚</td><td>æ˜¯</td><td><strong>Spring Security 6.xä¸­ï¼Œå–ä»£äº†æ—§ç‰ˆçš„<code>FilterSecurityInterceptor</code>ã€‚</strong> Â ç»å¤§å¤šæ•°URLæƒé™è§„åˆ™åœ¨æ­¤ç”Ÿæ•ˆã€‚</td><td/></tr></tbody></table>
<h2 data-id="heading-4">ä¸‰ã€ç™»å½•è®¤è¯</h2>
<p>æˆ‘ä»¬ä¸Šé¢çš„ç™»å½•éƒ½æ˜¯åŸºäºSpring Securityè‡ªå¸¦çš„ç”¨æˆ·ä¸å¯†ç ç™»å½•çš„ï¼Œé‚£å®é™…å¼€å‘ä¸­è‚¯å®šæ˜¯è¦ä»æ•°æ®åº“ä¸­è·å–ç”¨æˆ·ç™»å½•çš„ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è®²ä¸€ä¸‹å¦‚ä½•è®©ç™»å½•è¯·æ±‚å‘é€åˆ°æˆ‘ä»¬å®šä¹‰çš„ä»£ç å½“ä¸­ã€‚</p>
<h3 data-id="heading-5">3.1 æ–°å¢ä¾èµ–</h3>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Security --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Spring Web --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- MySQL --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-j<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>runtime<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- MyBatis --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- Lombok --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">optional</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-name">optional</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.security<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-security-test<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.projectlombok<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>lombok<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>provided<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h3 data-id="heading-6">3.2 æ–°å¢é…ç½®æ–‡ä»¶yml</h3>
<pre><code class="hljs language-yml" lang="yml"><span class="hljs-attr">server:</span>
  <span class="hljs-attr">port:</span> <span class="hljs-number">8080</span>
  <span class="hljs-attr">servlet:</span>
    <span class="hljs-attr">context-path:</span> <span class="hljs-string">/</span>

<span class="hljs-attr">spring:</span>
  <span class="hljs-attr">application:</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">dlyk-server</span>
  <span class="hljs-attr">datasource:</span>
    <span class="hljs-attr">url:</span> <span class="hljs-string">jdbc:mysql://localhost:3306/learn?useUnicode=true&amp;characterEncoding=utf-8&amp;zeroDateTimeBehavior=convertToNull&amp;transformedBitIsBoolean=true&amp;allowMultiQueries=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true&amp;serverTimezone=Asia/Shanghai</span>
    <span class="hljs-attr">username:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">password:</span> <span class="hljs-string">root</span>
    <span class="hljs-attr">driver-class-name:</span> <span class="hljs-string">com.mysql.cj.jdbc.Driver</span>
    <span class="hljs-attr">hikari:</span>
      <span class="hljs-attr">maximum-pool-size:</span> <span class="hljs-number">30</span>
      <span class="hljs-attr">minimum-idle:</span> <span class="hljs-number">30</span>
      <span class="hljs-attr">connection-timeout:</span> <span class="hljs-number">30000</span>
      <span class="hljs-attr">idle-timeout:</span> <span class="hljs-number">0</span>
      <span class="hljs-attr">max-lifetime:</span> <span class="hljs-number">18000000</span>
  <span class="hljs-attr">data:</span>
    <span class="hljs-attr">redis:</span>
      <span class="hljs-attr">host:</span> <span class="hljs-number">115.190</span><span class="hljs-number">.212</span><span class="hljs-number">.212</span>
      <span class="hljs-attr">port:</span> <span class="hljs-number">6379</span>
      <span class="hljs-attr">database:</span> <span class="hljs-number">1</span>
      <span class="hljs-attr">timeout:</span> <span class="hljs-string">2000ms</span>
      <span class="hljs-attr">lettuce:</span>
        <span class="hljs-attr">pool:</span>
          <span class="hljs-attr">max-active:</span> <span class="hljs-number">8</span>
          <span class="hljs-attr">max-idle:</span> <span class="hljs-number">8</span>
          <span class="hljs-attr">min-idle:</span> <span class="hljs-number">0</span>
          <span class="hljs-attr">max-wait:</span> <span class="hljs-string">-1ms</span>
<span class="hljs-attr">mybatis:</span>
  <span class="hljs-attr">mapper-locations:</span> <span class="hljs-string">classpath:mapper/*.xml</span>
  <span class="hljs-attr">type-aliases-package:</span> <span class="hljs-string">com.example.entity</span>
</code></pre>
<h3 data-id="heading-7">3.3 å¯¼å…¥æ•°æ®åº“</h3>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">user</span>
(
    id                     <span class="hljs-type">int</span> auto_increment comment <span class="hljs-string">'ä¸»é”®ï¼Œè‡ªåŠ¨å¢é•¿ï¼Œç”¨æˆ·ID'</span> <span class="hljs-keyword">primary</span> key,
    login_act              <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">null</span> comment <span class="hljs-string">'ç™»å½•è´¦å·'</span>,
    login_pwd              <span class="hljs-type">varchar</span>(<span class="hljs-number">64</span>) <span class="hljs-keyword">null</span> comment <span class="hljs-string">'ç™»å½•å¯†ç '</span>,
    name                   <span class="hljs-type">varchar</span>(<span class="hljs-number">32</span>) <span class="hljs-keyword">null</span> comment <span class="hljs-string">'ç”¨æˆ·å§“å'</span>,
    account_no_expired     <span class="hljs-type">int</span>         <span class="hljs-keyword">null</span> comment <span class="hljs-string">'è´¦æˆ·æ˜¯å¦æ²¡æœ‰è¿‡æœŸï¼Œ0å·²è¿‡æœŸ 1æ­£å¸¸'</span>,
    credentials_no_expired <span class="hljs-type">int</span>         <span class="hljs-keyword">null</span> comment <span class="hljs-string">'å¯†ç æ˜¯å¦æ²¡æœ‰è¿‡æœŸï¼Œ0å·²è¿‡æœŸ 1æ­£å¸¸'</span>,
    account_no_locked      <span class="hljs-type">int</span>         <span class="hljs-keyword">null</span> comment <span class="hljs-string">'è´¦å·æ˜¯å¦æ²¡æœ‰é”å®šï¼Œ0å·²é”å®š 1æ­£å¸¸'</span>,
    account_enabled        <span class="hljs-type">int</span>         <span class="hljs-keyword">null</span> comment <span class="hljs-string">'è´¦å·æ˜¯å¦å¯ç”¨ï¼Œ0ç¦ç”¨ 1å¯ç”¨'</span>
)
    comment <span class="hljs-string">'ç”¨æˆ·è¡¨'</span>;
</code></pre>
<p>æ˜æ–‡å¯†ç æ˜¯ï¼š123456</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> learn.user (id, login_act, login_pwd, name, account_no_expired, credentials_no_expired, account_no_locked, account_enabled) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">'zhangsan'</span>, <span class="hljs-string">'$2a$10$6RI/P5q12twVyzfwxN1Un.Hc0GOXFmdfY4zUwwt8.kpjwG5.ftUS2'</span>, <span class="hljs-string">'å¼ ä¸‰'</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);
</code></pre>
<h3 data-id="heading-8">3.4 å¯¼å…¥entityã€serviceã€mapper</h3>
<p>å®ä½“ç±»LoginUserï¼Œè¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œä¸æ•°æ®åº“ä¿æŒä¸€è‡´å°±è¡Œ</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Data</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginUser</span> {
    <span class="hljs-comment">// ä¸»é”®</span>
    <span class="hljs-keyword">private</span> Integer id;
    <span class="hljs-comment">// ç™»å½•è´¦å·</span>
    <span class="hljs-keyword">private</span> String login_act;
    <span class="hljs-comment">// ç™»å½•å¯†ç </span>
    <span class="hljs-keyword">private</span> String login_pwd;
    <span class="hljs-comment">// æ˜µç§°</span>
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-comment">// è´¦æˆ·æ˜¯å¦æ²¡æœ‰è¿‡æœŸï¼Œ0å·²è¿‡æœŸ 1æ­£å¸¸</span>
    <span class="hljs-keyword">private</span> Integer account_no_expired;
    <span class="hljs-comment">// å¯†ç æ˜¯å¦æ²¡æœ‰è¿‡æœŸï¼Œ0å·²è¿‡æœŸ 1æ­£å¸¸</span>
    <span class="hljs-keyword">private</span> Integer credentials_no_expired;
    <span class="hljs-comment">// è´¦å·æ˜¯å¦æ²¡æœ‰é”å®šï¼Œ0å·²é”å®š 1æ­£å¸¸</span>
    <span class="hljs-keyword">private</span> Integer account_no_locked;
    <span class="hljs-comment">// è´¦å·æ˜¯å¦å¯ç”¨ï¼Œ0ç¦ç”¨ 1å¯ç”¨</span>
    <span class="hljs-keyword">private</span> Integer account_enabled;
}
</code></pre>
<p>æ¥ä¸‹æ¥æ˜¯serviceï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å®ƒç»§æ‰¿äº†<strong>UserDetailsService</strong>ï¼Œå®ƒæ˜¯ <code>Spring Security</code> æ¡†æ¶é‡Œæœ€æ ¸å¿ƒçš„<strong>ç”¨æˆ·æº</strong>æ¥å£ï¼Œæ ¹æ®ç”¨æˆ·åï¼ˆæˆ–ç”¨æˆ·æ ‡è¯†ï¼‰æŠŠ<strong>è¿™ä¸ªç”¨æˆ·æ˜¯è°ã€å¯†ç æ˜¯ä»€ä¹ˆã€æœ‰å“ªäº›æƒé™</strong>æŸ¥å‡ºæ¥ï¼Œäº¤ç»™<code>Spring Security</code>åšåç»­è®¤è¯ä¸é‰´æƒã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetailsService;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LoginUserService</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UserDetailsService</span> {

}
</code></pre>
<p>è¿™ä¸ªæ¥å£åªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼š
<code>UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;</code>ã€‚ä»–çš„è¿”å›å€¼æ˜¯<code>UserDetails</code>ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼ŒåŒ…å«ï¼š</p>
<ul>
<li><code>String getPassword()</code></li>
<li><code>String getUsername()</code></li>
<li><code>Collection&lt;? extends GrantedAuthority&gt; getAuthorities()</code></li>
<li><code>boolean isAccountNonExpired/NonLocked/CredentialsNonExpired/Enabled()</code></li>
</ul>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">package</span> com.example.service.impl;

<span class="hljs-keyword">import</span> com.example.entity.LoginUser;
<span class="hljs-keyword">import</span> com.example.mapper.LoginUserMapper;
<span class="hljs-keyword">import</span> com.example.service.LoginUserService;
<span class="hljs-keyword">import</span> jakarta.annotation.Resource;
<span class="hljs-keyword">import</span> org.springframework.security.core.authority.AuthorityUtils;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.User;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UserDetails;
<span class="hljs-keyword">import</span> org.springframework.security.core.userdetails.UsernameNotFoundException;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-meta">@Service</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoginUserServiceImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">LoginUserService</span> {

    <span class="hljs-meta">@Resource</span>
    <span class="hljs-keyword">private</span> LoginUserMapper loginUserMapper;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> UserDetails <span class="hljs-title function_">loadUserByUsername</span><span class="hljs-params">(String username)</span> <span class="hljs-keyword">throws</span> UsernameNotFoundException {
        <span class="hljs-type">LoginUser</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> loginUserMapper.getUserByUsername(username);
        <span class="hljs-keyword">if</span> (user == <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UsernameNotFoundException</span>(<span class="hljs-string">"ç”¨æˆ·ä¸å­˜åœ¨"</span>);
        }
        <span class="hljs-keyword">return</span> User.builder()
                .username(user.getLogin_act())
                .password(user.getLogin_pwd())
                .authorities(AuthorityUtils.NO_AUTHORITIES) <span class="hljs-comment">// æƒé™ä¸ºç©º</span>
                .build();
    }
}
</code></pre>
<p>æ³¨æ„æˆ‘ä»¬è¿”å›çš„<code>User</code>æ˜¯<code>org.springframework.security.core.userdetails.User</code>è¿™ä¸ªåŒ…ä¸‹çš„ï¼Œå®ƒå®ç°äº†<code>UserDetails</code>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/73dc484a7298407888c5db07b1d82ff0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=HWENenR7xHS2FwdRlXGaTt35rhE%3D" alt="image.png" loading="lazy"/></p>
<p><code>Spring Security</code>æ‹¿åˆ°<code>UserDetails</code>åï¼Œä¼šæŠŠå‰ç«¯ä¼ æ¥çš„å¯†ç ä¸å®ƒåšæ¯”å¯¹ï¼Œæ¯”å¯¹é€šè¿‡å°±ç™»å½•æˆåŠŸï¼Œå¹¶æŠŠ<code>authorities</code>å†™å…¥<code>Authentication</code>ï¼Œä¾›åç»­é‰´æƒä½¿ç”¨ã€‚</p>
<blockquote>
<p><strong>é…ç½®ç±»ä»€ä¹ˆéƒ½ä¸ç”¨åšï¼ŒSpring Boot å‘ç°å­˜åœ¨ UserDetailsService Bean å°±ä¼šè‡ªåŠ¨ä½¿ç”¨ã€‚</strong></p>
</blockquote>
<p>æ¥ä¸‹æ¥æ˜¯mapperï¼Œä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„äº†ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span>?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span>
        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>
        <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"com.example.mapper.LoginUserMapper"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"getUserByUsername"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"com.example.entity.LoginUser"</span>&gt;</span>
        SELECT
            u.id,
            u.login_act,
            u.login_pwd,
            u.name,
            u.account_no_expired,
            u.credentials_no_expired,
            u.account_no_locked,
            u.account_enabled
        FROM user u
        where u.login_act = #{username}
    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span>
</code></pre>
<h3 data-id="heading-9">3.5 è¯•è¿è¡Œ</h3>
<p>æ¥ä¸‹æ¥å¯åŠ¨ç¨‹åºï¼Œç„¶ååœ¨è·³è½¬åˆ°<code>8080</code>é¡µé¢è¿›å…¥åˆ°é»˜è®¤çš„ç™»å½•é¡µç™»å½•ï¼Œè¾“å…¥<code>zhangsan</code>ï¼Œå¯†ç ä¸ºï¼š<code>123456</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚å·²ç»è·³è½¬åˆ°æˆ‘ä»¬åˆšåˆšé‡å†™çš„<code>loadUserByUsername</code>æ–¹æ³•ä¸­ï¼Œå¹¶ä¸”æˆåŠŸæ‹¿åˆ°äº†å‰å°ä¼ é€’çš„<code>zhangsan</code>ï¼Œæˆ‘ä»¬ä¹Ÿå†æ•°æ®åº“ä¸­æ‰¾åˆ°äº†è¿™æ¡æ•°æ®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdd9230cf8714af095a81f88287cea52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=ELDJAHimU6OBXjmB4Y3iNqmy3nc%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-10">3.6å¯†ç åŠ å¯†å™¨</h3>
<p>åœ¨ä¸Šè¿°ä»£ç è¿è¡Œå®Œæ¯•åï¼Œæˆ‘ä»¬çš„æ§åˆ¶å°ä¼šæŠ¥ä¸€ä¸ªé”™è¯¯:<code>Given that there is no default password encoder configured, each password must have a password encoding prefix. Please either prefix this password with '{noop}' or set a default password encoder in DelegatingPasswordEncoder</code>.è¿™ä¸ªå¼‚å¸¸æ˜¯ Spring Security 5 ä»¥åå¯¹â€œå¯†ç å¿…é¡»æ˜¾å¼æ ‡æ˜ç¼–ç æ–¹å¼â€çš„å¼ºåˆ¶è¦æ±‚</p>
<blockquote>
<p>è¿™ä¸ªé”™è¯¯ç¿»è¯‘å°±æ˜¯ï¼š<strong>ç”±äºæœªé…ç½®ä»»ä½•é»˜è®¤å¯†ç ç¼–ç å™¨ï¼Œæ¯ç»„å¯†ç éƒ½å¿…é¡»å¸¦æœ‰å¯†ç ç¼–ç å‰ç¼€ã€‚è¯·è¦ä¹ˆå°†æ­¤å¯†ç å‰ç¼€è®¾ä¸ºâ€˜{noop}â€™ï¼Œè¦ä¹ˆåœ¨ <code>DelegatingPasswordEncoder</code> ä¸­è®¾ç½®ä¸€ä¸ªé»˜è®¤å¯†ç ç¼–ç å™¨ã€‚</strong></p>
</blockquote>
<p>æ‰€ä»¥æˆ‘ä»¬åœ¨é…ç½®ç±»ä¸­é…ç½®ä¸€ä¸ªBCryptç®—æ³•æ¥æ ¡éªŒå¯†ç ï¼<strong>PasswordEncoder æ˜¯ Spring Security çš„æ ¸å¿ƒæ¥å£ï¼Œä¸“é—¨ç”¨äºå¯†ç çš„åŠ å¯†å’ŒéªŒè¯ã€‚</strong></p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> org.springframework.context.annotation.Bean;
<span class="hljs-keyword">import</span> org.springframework.context.annotation.Configuration;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
<span class="hljs-keyword">import</span> org.springframework.security.crypto.password.PasswordEncoder;

<span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SecurityConfig</span> {

    <span class="hljs-comment">/**
     * åˆ›å»ºä¸€ä¸ªå¯†ç ç¼–ç å™¨ï¼ˆåŠ å¯†å™¨ï¼‰ä¾› Spring Security ä½¿ç”¨
     */</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-keyword">public</span> PasswordEncoder <span class="hljs-title function_">passwordEncoder</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BCryptPasswordEncoder</span>();
    }
}
</code></pre>
<p>Spring Security 5ä»¥ä¸Šé»˜è®¤ä½¿ç”¨ <code>DelegatingPasswordEncoder</code>ï¼Œå®ƒå†…éƒ¨ä¼šï¼š</p>
<ul>
<li>å…ˆåˆ°å®¹å™¨é‡Œæ‰¾æœ‰æ²¡æœ‰ <strong>id å« passwordEncoder çš„ PasswordEncoder Bean</strong>ï¼›</li>
<li>æ‰¾åˆ°å°±æ‹¿å®ƒå½“â€œé»˜è®¤ç¼–ç å™¨â€ï¼ˆå³åŒ¹é…ä¸å¸¦ <code>{xxx}</code> å‰ç¼€çš„å¯†ç ï¼‰ï¼›</li>
<li>æ‰¾ä¸åˆ°å°±æŠ›å¼‚å¸¸ï¼Œæç¤ºä½  â€œno default password encoder configuredâ€ã€‚</li>
</ul>
<p>æ‰€ä»¥å½“æˆ‘ä»¬æˆåŠŸæ³¨å†Œè¿™ä¸ª<code>bean</code>ä¹‹åï¼Œ<code>Spring Security</code>å°±ä¸ä¼šå†æŠ›æ‰¾ä¸åˆ°å¯†ç åŠ å¯†å™¨å¼‚å¸¸äº†ã€‚</p>
<h3 data-id="heading-11">3.7 è¿è¡Œ</h3>
<p>æˆ‘ä»¬é‡å¯æœåŠ¡å™¨ï¼Œæ‰“å¼€ç½‘ç«™ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Fuser" target="_blank" title="http://localhost:8080/user" ref="nofollow noopener noreferrer">http://localhost:8080/user</a> ä¹‹åä»–ä¼šè‡ªåŠ¨è·³è½¬åˆ°<a href="https://link.juejin.cn?target=http%3A%2F%2Flocalhost%3A8080%2Flogin" target="_blank" title="http://localhost:8080/login" ref="nofollow noopener noreferrer">http://localhost:8080/login</a> ç™»å½•é¡µé¢ï¼Œç„¶åæˆ‘ä»¬è¾“å…¥ç”¨æˆ·zhangsanï¼Œå¯†ç 123456ï¼Œå³å¯ç™»å½•æˆåŠŸå¹¶ä¸”è‡ªåŠ¨è¿”å›ç»“æœã€‚</p>
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2a38ef433d6c478e94bfeaf992996be9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Yqg5rSb5pav:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768356913&amp;x-signature=4VqmWJoCC3zx2fP0Nxm5tKVy60E%3D" alt="image.png" width="70%" loading="lazy"/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰ç«¯ç»„ä»¶å°è£…å°ç¥æŒ‡å—ï¼š16æ¡å®æˆ˜åŸåˆ™ï¼Œé¢è¯•ã€é¡¹ç›®åŒåŠ åˆ†]]></title>    <link>https://juejin.cn/post/7592088192516915243</link>    <guid>https://juejin.cn/post/7592088192516915243</guid>    <pubDate>2026-01-07T01:57:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592088192516915243" data-draft-id="7592069113222955027" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰ç«¯ç»„ä»¶å°è£…å°ç¥æŒ‡å—ï¼š16æ¡å®æˆ˜åŸåˆ™ï¼Œé¢è¯•ã€é¡¹ç›®åŒåŠ åˆ†"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T01:57:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æµ·äº‘å‰ç«¯1"/> <meta itemprop="url" content="https://juejin.cn/user/963618991244365"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰ç«¯ç»„ä»¶å°è£…å°ç¥æŒ‡å—ï¼š16æ¡å®æˆ˜åŸåˆ™ï¼Œé¢è¯•ã€é¡¹ç›®åŒåŠ åˆ†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/963618991244365/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æµ·äº‘å‰ç«¯1
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:57:44.000Z" title="Wed Jan 07 2026 01:57:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½œä¸ºå‰ç«¯å¼€å‘ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›å‘ï¼Ÿå°è£…çš„ç»„ä»¶å¤ç”¨æ€§å·®ï¼Œæ¢ä¸ªé¡¹ç›®å°±å¾—é‡æ„ï¼›é¢è¯•æ—¶è¢«é—® <strong>ç»„ä»¶è®¾è®¡æ€è·¯</strong>ï¼Œåªèƒ½<strong>æ”¯æ”¯å¾å¾è¯´ä¸å‡ºæ ¸å¿ƒ</strong>ï¼›åˆä½œå¼€å‘æ—¶ï¼Œè‡ªå·±å†™çš„ç»„ä»¶è¢«åŒäº‹åæ§½ <strong>éš¾ç”¨åˆéš¾æ”¹</strong></p>
<p>å…¶å®ï¼Œä¼˜è´¨çš„ç»„ä»¶å°è£…ä¸ä»…èƒ½æå‡é¡¹ç›®å¼€å‘æ•ˆç‡ï¼Œæ›´æ˜¯é¢è¯•ä¸­çš„ <strong>åŠ åˆ†åˆ©å™¨</strong>ï¼Œ å¤§å‚é¢è¯•å®˜æ ¼å¤–çœ‹é‡å€™é€‰äººçš„ç»„ä»¶è®¾è®¡æ€ç»´ï¼Œè¿™ç›´æ¥åæ˜ äº†ä»£ç åŠŸåº•å’Œå·¥ç¨‹åŒ–èƒ½åŠ›ã€‚</p>
<p>ç»“åˆæˆ‘å¤šå¹´ä¸€çº¿å¼€å‘ç»éªŒï¼Œä»¥åŠå¯¹ antdã€element-plusã€vant ç­‰é¡¶å°–ç»„ä»¶åº“çš„æ·±åº¦æ‹†è§£ï¼Œæ€»ç»“å‡º <strong>16æ¡å®æˆ˜çº§ç»„ä»¶å°è£…åŸåˆ™</strong>ã€‚ä¸ç®¡ä½ ç”¨ React è¿˜æ˜¯ Vueï¼ŒæŒæ¡è¿™äº›æŠ€å·§ï¼Œæ—¢èƒ½è®©ä½ çš„ä»£ç æ›´ä¼˜é›…æ˜“ç»´æŠ¤ï¼Œæ›´èƒ½åœ¨é¢è¯•ä¸­è„±é¢–è€Œå‡ºï¼Œæ‹¿ä¸‹å¿ƒä»ª Offer</p>
<h2 data-id="heading-0">ä¸€ã€åŸºç¡€å±æ€§ï¼šå…œåº•è®¾è®¡ï¼Œå…¼å®¹çµæ´»æ‰©å±•</h2>
<p>ä»»ä½•ç»„ä»¶éƒ½è¯¥é»˜è®¤æ”¯æŒ <code>className</code> å’Œ <code>style</code> ä¸¤ä¸ªåŸºç¡€å±æ€§ï¼Œè¿™æ˜¯ç»„ä»¶çµæ´»æ€§çš„ â€œåº•çº¿â€ã€‚é€šè¿‡å±æ€§ç»§æ‰¿ï¼Œè®©ä½¿ç”¨è€…èƒ½è½»æ¾è‡ªå®šä¹‰æ ·å¼ï¼Œæ— éœ€ä¿®æ”¹ç»„ä»¶æºç ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-comment">// å…¬å…±å±æ€§æ¥å£ï¼Œå¯å¤ç”¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CommonProps</span> {
  <span class="hljs-comment">/** è‡ªå®šä¹‰ç±»å */</span>
  className?: <span class="hljs-built_in">string</span>;
  <span class="hljs-comment">/** è‡ªå®šä¹‰å†…è”æ ·å¼ */</span>
  style?: <span class="hljs-title class_">React</span>.<span class="hljs-property">CSSProperties</span>;
}
<span class="hljs-comment">// ä¸šåŠ¡ç»„ä»¶å±æ€§ç»§æ‰¿å…¬å…±å±æ€§</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CommonProps</span> {
  <span class="hljs-comment">/** è¾“å…¥æ¡†å€¼ */</span>
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span>;
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: MyInputProps, ref: React.LegacyRef&lt;HTMLDivElement&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-comment">// åˆå¹¶é»˜è®¤ç±»åå’Œè‡ªå®šä¹‰ç±»å</span>
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...rest</span>} <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyInput</span>;
</code></pre>
<h2 data-id="heading-1">äºŒã€æ³¨é‡Šè§„èŒƒï¼šæ¸…æ™°æ˜“æ‡‚ï¼Œæå‡åä½œæ•ˆç‡</h2>
<p>ç»„ä»¶çš„ <code>props</code> å’Œ <code>ref</code> å±æ€§å¿…é¡»åŠ æ³¨é‡Šï¼Œè€Œä¸”è¦é¿å…ä½¿ç”¨ <code>//</code> å•è¡Œæ³¨é‡Šï¼ˆTS æ— æ³•è¯†åˆ«ï¼Œé¼ æ ‡æ‚¬æµ®æ— æç¤ºï¼‰ã€‚æ¨èç”¨ JSDoc é£æ ¼æ³¨é‡Šï¼Œå…³é”®å‚æ•°è¡¥å…… <code>@description</code>ï¼ˆæè¿°ï¼‰ã€<code>@version</code>ï¼ˆç‰ˆæœ¬ï¼‰ã€<code>@deprecated</code>ï¼ˆåºŸå¼ƒè¯´æ˜ï¼‰ã€<code>@default</code>ï¼ˆé»˜è®¤å€¼ï¼‰ï¼Œå›½é™…åŒ–ç»„ä»¶ä¼˜å…ˆç”¨è‹±æ–‡æ³¨é‡Šã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyInputsProps</span> {
  <span class="hljs-comment">// è‡ªå®šä¹‰classï¼ˆTSæ— æ³•è¯†åˆ«ï¼Œåä½œå‘ï¼‰</span>
  className?: <span class="hljs-built_in">string</span>;
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">MyInputsProps</span> </span>{
  <span class="hljs-comment">/** Custom class name */</span>
  className?: <span class="hljs-keyword">string</span>;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description</span> Custom inline style
   * <span class="hljs-doctag">@version</span> 2.6.0
   * <span class="hljs-doctag">@default</span> ''
   */</span>
  style?: React.CSSProperties;
  <span class="hljs-comment">/**
   * <span class="hljs-doctag">@description</span> Custom title style
   * <span class="hljs-doctag">@deprecated</span> 2.5.0 (No longer supported)
   * <span class="hljs-doctag">@default</span> ''
   */</span>
  customTitleStyle?: React.CSSProperties;
}
</code></pre>
<h2 data-id="heading-2">ä¸‰ã€å¯¼å‡ºè§„èŒƒï¼šæ˜ç¡®å‘½åï¼Œä¾¿äºè°ƒè¯•å®šä½</h2>
<p>ç»„ä»¶çš„ <code>props</code> ç±»å‹ã€<code>ref</code> ç±»å‹ï¼ˆè‹¥ç”¨ <code>useImperativeHandle</code>ï¼‰å¿…é¡» <code>export</code> å¯¼å‡ºï¼Œæ–¹ä¾¿ä½¿ç”¨è€…å¤ç”¨ç±»å‹ã€‚ç»„ä»¶æœ¬èº«è¦è®¾ç½®æ˜ç¡®åç§°ï¼Œé¿å…åŒ¿åå¯¼å‡º â€”â€” å¦åˆ™æŠ¥é”™æ—¶æ— æ³•å®šä½å…·ä½“ç»„ä»¶ï¼Œè°ƒè¯•æ•ˆç‡æä½ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> { ... }
<span class="hljs-comment">// åŒ¿åç»„ä»¶ï¼ŒæŠ¥é”™æ— æ˜ç¡®æç¤º</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> (<span class="hljs-attr">props</span>: <span class="hljs-title class_">MyInputProps</span>) =&gt; {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
};
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// å¯¼å‡ºç±»å‹ï¼Œæ–¹ä¾¿å¤–éƒ¨å¤ç”¨</span>
<span class="hljs-keyword">export</span> interface <span class="hljs-title class_">MyInputProps</span> { ... }
<span class="hljs-comment">// å‘½åç»„ä»¶ï¼Œä¾¿äºè°ƒè¯•</span>
<span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
<span class="hljs-comment">// å¼€å‘ç¯å¢ƒè®¾ç½®æ˜¾ç¤ºåç§°</span>
<span class="hljs-keyword">if</span> (process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> !== <span class="hljs-string">'production'</span>) {
  <span class="hljs-title class_">MyInput</span>.<span class="hljs-property">displayName</span> = <span class="hljs-string">'MyInput'</span>;
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">MyInput</span>;

<span class="hljs-comment">// index.ts ç»Ÿä¸€å¯¼å‡ºï¼Œæ–¹ä¾¿å¼•å…¥</span>
<span class="hljs-keyword">export</span> * <span class="hljs-keyword">from</span> <span class="hljs-string">'./input'</span>;
<span class="hljs-keyword">export</span> { <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">MyInput</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'./input'</span>;
</code></pre>
<p>å¦‚æœéœ€è¦è·å–å…¶ä»–ç»„ä»¶çš„ç±»å‹ï¼Œå¯é€šè¿‡ <code>ComponentProps</code> å’Œ <code>ComponentRef</code> å¿«é€Ÿè·å–ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">type <span class="hljs-attr">DialogProps</span> = ComponentProps&lt;typeof Dialog&gt;<span class="hljs-comment">;</span>
type <span class="hljs-attr">DialogRef</span> = ComponentRef&lt;typeof Dialog&gt;<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-3">å››ã€å…¥å‚çº¦æŸï¼šç²¾å‡†å®šä¹‰ï¼Œå‡å°‘ä½¿ç”¨é”™è¯¯</h2>
<p>å…¥å‚ç±»å‹è¦æ˜ç¡®ï¼Œé¿å…ç”¨ <code>string</code>ã€<code>number</code> ç­‰å®½æ³›ç±»å‹ â€œä¸€ç¬”å¸¦è¿‡â€ï¼›å…¬å…±ç»„ä»¶å°½é‡ä¸ç”¨æšä¸¾ï¼ˆä½¿ç”¨è€…éœ€é¢å¤–å¼•å…¥ï¼Œå¢åŠ æˆæœ¬ï¼‰ï¼›æ•°å€¼ç±»å‹éœ€è¯´æ˜å–å€¼èŒƒå›´ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-attr">status</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ç±»å‹æ¨¡ç³Šï¼Œä¸çŸ¥é“æ”¯æŒå“ªäº›å€¼</span>
  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ— å–å€¼èŒƒå›´ï¼Œå®¹æ˜“ä¼ é”™</span>
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">interface</span> <span class="hljs-title">InputProps</span> {
  status: <span class="hljs-string">'success'</span> | <span class="hljs-string">'fail'</span>; <span class="hljs-comment">// æ˜ç¡®æ”¯æŒçš„çŠ¶æ€å€¼</span>
  <span class="hljs-comment">/** æ€»æ•°ï¼ˆå–å€¼èŒƒå›´ï¼š0-999ï¼‰ */</span>
  count: number;
}
</code></pre>
<h2 data-id="heading-4">äº”ã€æ ·å¼è®¾è®¡ï¼šéš”ç¦»å†²çªï¼Œæ”¯æŒä¸»é¢˜å®šåˆ¶</h2>
<p>ç¦ç”¨ CSS Moduleï¼ˆä¼šå¯¼è‡´ä½¿ç”¨è€…æ— æ³•ä¿®æ”¹å†…éƒ¨æ ·å¼ï¼‰ï¼ŒVue å¯ä½¿ç”¨ <code>scoped</code> é¿å…æ ·å¼æ±¡æŸ“ï¼›ç»„ä»¶å†…éƒ¨ <code>class</code> åŠ ç»Ÿä¸€å‰ç¼€ï¼ˆå¦‚ <code>my-input-</code>ï¼‰ï¼Œé˜²æ­¢å‘½åå†²çªï¼›class åç§°è¦è¯­ä¹‰åŒ–ï¼Œç¦ç”¨ <code>!important</code>ï¼›é¢„ç•™ CSS å˜é‡ï¼Œæ”¯æŒä¸»é¢˜åˆ‡æ¢ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> styles <span class="hljs-keyword">from</span> <span class="hljs-string">'./index.module.less'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.input_box}</span>&gt;</span> {/* æ— æ³•å¤–éƒ¨ä¿®æ”¹æ ·å¼ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{styles.detail}</span>&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">'./index.less'</span>;
<span class="hljs-keyword">const</span> prefixCls = <span class="hljs-string">'my-input'</span>; <span class="hljs-comment">// ç»Ÿä¸€å‰ç¼€</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-box</span>`}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{</span>`${<span class="hljs-attr">prefixCls</span>}<span class="hljs-attr">-detail</span>`}&gt;</span>å†…å®¹<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// æ ·å¼æ–‡ä»¶é¢„ç•™CSSå˜é‡</span>
.<span class="hljs-property">my</span>-input-box {
  <span class="hljs-attr">height</span>: 100px;
  <span class="hljs-attr">background</span>: <span class="hljs-title function_">var</span>(--my-input-box-background, #<span class="hljs-number">000</span>); <span class="hljs-comment">// æ”¯æŒå¤–éƒ¨å®šåˆ¶</span>
}
</code></pre>
<h2 data-id="heading-5">å…­ã€ç»§æ‰¿é€ä¼ ï¼šå…¼å®¹æ‰©å±•ï¼Œå‡å°‘ç»´æŠ¤æˆæœ¬</h2>
<p>äºŒæ¬¡å°è£…ç»„ä»¶æ—¶ï¼Œä¸è¦é€ä¸ªæå–å±æ€§ç»‘å®šåˆ°åŸºç¡€ç»„ä»¶ â€”â€” åŸºç¡€ç»„ä»¶æ›´æ–°åï¼Œéœ€æ‰‹åŠ¨åŒæ­¥å±æ€§ï¼Œç»´æŠ¤æˆæœ¬é«˜ã€‚æ¨èç”¨ <code>extends</code> ç»§æ‰¿åŸºç¡€ç»„ä»¶å±æ€§ï¼Œç”¨ <code>...rest</code> æ‰¿æ¥æ‰€æœ‰ä¼ å…¥å±æ€§ï¼Œè‡ªåŠ¨é€ä¼ ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> {
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
  <span class="hljs-attr">limit</span>: <span class="hljs-built_in">number</span>;
  <span class="hljs-attr">state</span>: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyInput</span> = (<span class="hljs-params">props: Partial&lt;MyInputProps&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> { value, limit, state } = props;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> <span class="hljs-attr">limit</span>=<span class="hljs-string">{limit}</span> <span class="hljs-attr">state</span>=<span class="hljs-string">{state}</span> /&gt;</span></span>; <span class="hljs-comment">// éœ€æ‰‹åŠ¨åŒæ­¥å±æ€§</span>
};
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span>, <span class="hljs-title class_">InputProps</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>;
<span class="hljs-comment">// ç»§æ‰¿åŸºç¡€ç»„ä»¶æ‰€æœ‰å±æ€§</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">InputProps</span> {
  <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>;
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyInput</span> = (<span class="hljs-params">props: Partial&lt;MyInputProps&gt;</span>) =&gt; {
  <span class="hljs-keyword">const</span> { value, ...rest } = props;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">value</span>=<span class="hljs-string">{value}</span> {<span class="hljs-attr">...rest</span>} /&gt;</span></span>; <span class="hljs-comment">// è‡ªåŠ¨é€ä¼ æ‰€æœ‰å±æ€§</span>
};
</code></pre>
<h2 data-id="heading-6">ä¸ƒã€äº‹ä»¶é…å¥—ï¼šé’©å­é½å…¨ï¼Œæå‡å¯æ§æ€§</h2>
<p>ç»„ä»¶å†…éƒ¨æ“ä½œå¯¼è‡´ UI å˜åŒ–æ—¶ï¼Œå¿…é¡»æä¾›å¯¹åº”çš„äº‹ä»¶é’©å­ï¼ˆå¦‚ <code>onChange</code>ã€<code>onShowChange</code>ï¼‰ï¼Œè®©ä½¿ç”¨è€…èƒ½æ„ŸçŸ¥çŠ¶æ€å˜åŒ–å¹¶åšè‡ªå®šä¹‰å¤„ç†ï¼Œæå‡ç»„ä»¶å¯æ§æ€§ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-function"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> function <span class="hljs-title">MyInput</span><span class="hljs-params">(props: MyInputProps)</span> </span>{
  <span class="hljs-type">const</span> [open, setOpen] = <span class="hljs-built_in">useState</span>(<span class="hljs-literal">false</span>);
  <span class="hljs-type">const</span> onCheckOpen = () =&gt; {
    <span class="hljs-built_in">setOpen</span>(!open); <span class="hljs-comment">// å†…éƒ¨çŠ¶æ€å˜åŒ–ï¼Œå¤–éƒ¨æ— æ„ŸçŸ¥</span>
  };
  <span class="hljs-keyword">return</span> &lt;div onClick={onCheckOpen}&gt;{open ? <span class="hljs-string">'æ‰“å¼€'</span> : <span class="hljs-string">'å…³é—­'</span>}&lt;/div&gt;;
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">export default function MyInput(props: MyInputProps) {
  const { onChange } = props<span class="hljs-comment">;</span>
  const <span class="hljs-section">[open, setOpen]</span> = useState(false)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">onCheckOpen</span> = () =&gt; {
    const <span class="hljs-attr">newState</span> = !open<span class="hljs-comment">;</span>
    setOpen(newState)<span class="hljs-comment">;</span>
    onChange?.(newState)<span class="hljs-comment">; // æš´éœ²äº‹ä»¶é’©å­ï¼Œå¤–éƒ¨å¯å“åº”</span>
  }<span class="hljs-comment">;</span>
  return &lt;div <span class="hljs-attr">onClick</span>={<span class="hljs-literal">on</span>CheckOpen}&gt;{open ? <span class="hljs-string">'æ‰“å¼€'</span> : <span class="hljs-string">'å…³é—­'</span>}&lt;/div&gt;<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-7">å…«ã€Ref ç»‘å®šï¼šé¢„ç•™æ¥å£ï¼Œé¿å…æŠ¥é”™è­¦å‘Š</h2>
<p>ç»„ä»¶éœ€æ”¯æŒ <code>ref</code> ç»‘å®šï¼Œå¦åˆ™ä½¿ç”¨è€…æŒ‚è½½ <code>ref</code> ä¼šå‡ºç°æ§åˆ¶å°è­¦å‘Šã€‚åŸåˆ›ç»„ä»¶å¯é€šè¿‡ <code>useImperativeHandle</code> æš´éœ²è‡ªå®šä¹‰æ–¹æ³•ï¼Œæˆ–ç›´æ¥ç»‘å®šæ ¹èŠ‚ç‚¹ï¼›äºŒæ¬¡å°è£…ç»„ä»¶ç›´æ¥ç»‘å®šåŸºç¡€ç»„ä»¶ã€‚</p>
<p>åŸåˆ›ç»„ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChcInputRef</span> {
  <span class="hljs-attr">setValidView</span>: <span class="hljs-function">(<span class="hljs-params">isShow?: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;
  <span class="hljs-attr">field</span>: <span class="hljs-title class_">Field</span>;
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = forwardRef&lt;<span class="hljs-title class_">ChcInputRef</span>, <span class="hljs-title class_">MyProps</span>&gt;(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-comment">// æš´éœ²è‡ªå®šä¹‰æ–¹æ³•</span>
  <span class="hljs-title function_">useImperativeHandle</span>(ref, <span class="hljs-function">() =&gt;</span> ({
    <span class="hljs-title function_">setValidView</span>(<span class="hljs-params">isShow = <span class="hljs-literal">false</span></span>) {
      <span class="hljs-title function_">setIsCheckBalloonVisible</span>(isShow);
    },
    field
  }), []);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span> {<span class="hljs-attr">...rest</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<p>äºŒæ¬¡å°è£…ç»„ä»¶ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { <span class="hljs-title class_">Input</span> } <span class="hljs-keyword">from</span> <span class="hljs-string">'æŸç»„ä»¶åº“'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref: React.LegacyRef&lt;Input&gt;</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { className, ...rest } = props;
  <span class="hljs-keyword">const</span> displayClassName = <span class="hljs-title function_">classNames</span>(<span class="hljs-string">'chc-input'</span>, className);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Input</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{displayClassName}</span> {<span class="hljs-attr">...rest</span>} /&gt;</span></span>;
});
</code></pre>
<h2 data-id="heading-8">ä¹ã€è‡ªå®šä¹‰æ‰©å±•ï¼šé¢„ç•™å…¥å£ï¼Œçµæ´»é€‚é…åœºæ™¯</h2>
<p>ç»„ä»¶å†…éƒ¨çš„å›ºå®šæ¸²æŸ“é€»è¾‘æˆ–è®¡ç®—é€»è¾‘ï¼Œéœ€é¢„ç•™è‡ªå®šä¹‰å…¥å£ï¼ˆå¦‚ <code>render</code> å‡½æ•°ï¼‰ï¼Œè®©ä½¿ç”¨è€…èƒ½è¦†ç›–é»˜è®¤é€»è¾‘ï¼Œæ— éœ€ä¿®æ”¹ç»„ä»¶æºç ï¼Œæå‡ç»„ä»¶é€‚é…æ€§ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value } = props;
  <span class="hljs-keyword">const</span> detailText = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// å›ºå®šé€»è¾‘ï¼Œæ— æ³•è‡ªå®šä¹‰</span>
    <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`å†…éƒ¨é€»è¾‘ï¼š<span class="hljs-subst">${item}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
  }, [value]);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{detailText}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { value, render } = props;
  <span class="hljs-keyword">const</span> detailText = <span class="hljs-title function_">useMemo</span>(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨è‡ªå®šä¹‰æ¸²æŸ“é€»è¾‘ï¼Œå¦åˆ™ç”¨é»˜è®¤é€»è¾‘</span>
    <span class="hljs-keyword">return</span> render ? <span class="hljs-title function_">render</span>(value) : value.<span class="hljs-title function_">split</span>(<span class="hljs-string">','</span>).<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> <span class="hljs-string">`å†…éƒ¨é€»è¾‘ï¼š<span class="hljs-subst">${item}</span>`</span>).<span class="hljs-title function_">join</span>(<span class="hljs-string">'\n'</span>);
  }, [value]);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{detailText}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
}
</code></pre>
<h2 data-id="heading-9">åã€å—æ§éå—æ§ï¼šåŒæ¨¡å¼æ”¯æŒï¼Œé™ä½ä½¿ç”¨é—¨æ§›</h2>
<p>ç»„ä»¶éœ€åŒæ—¶æ”¯æŒå—æ§æ¨¡å¼ï¼ˆå¤–éƒ¨æ§åˆ¶çŠ¶æ€ï¼‰å’Œéå—æ§æ¨¡å¼ï¼ˆå†…éƒ¨ç®¡ç†çŠ¶æ€ï¼‰ï¼šéå—æ§æ¨¡å¼æ–¹ä¾¿å¿«é€Ÿä½¿ç”¨ï¼Œå—æ§æ¨¡å¼æ”¯æŒå¤æ‚åœºæ™¯è‡ªå®šä¹‰ï¼Œå…¼é¡¾æ˜“ç”¨æ€§å’Œçµæ´»æ€§ã€‚</p>
<p>ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">const <span class="hljs-attr">prefixCls</span> = <span class="hljs-string">'my-input'</span><span class="hljs-comment">;</span>
export default function MyInput(props: MyInputProps) {
  const { value, <span class="hljs-attr">defaultValue</span> = <span class="hljs-literal">true</span>, className, style, <span class="hljs-literal">on</span>Change } = props<span class="hljs-comment">;</span>
  // éå—æ§æ¨¡å¼ï¼šå†…éƒ¨ç®¡ç†çŠ¶æ€
  const <span class="hljs-section">[open, setOpen]</span> = useState(value || defaultValue)<span class="hljs-comment">;</span>
  // å—æ§æ¨¡å¼ï¼šå¤–éƒ¨æ§åˆ¶çŠ¶æ€
  useEffect(() =&gt; {
    if (typeof <span class="hljs-attr">value</span> === <span class="hljs-string">'boolean'</span>) setOpen(value)<span class="hljs-comment">;</span>
  }, <span class="hljs-section">[value]</span>)<span class="hljs-comment">;</span>
  const <span class="hljs-attr">onCheckOpen</span> = () =&gt; {
    const <span class="hljs-attr">newState</span> = !open<span class="hljs-comment">;</span>
    onChange?.(newState)<span class="hljs-comment">;</span>
    // éå—æ§æ¨¡å¼ä¸‹ï¼Œå†…éƒ¨æ›´æ–°çŠ¶æ€
    if (typeof value !== 'boolean') setOpen(newState)<span class="hljs-comment">;</span>
  }<span class="hljs-comment">;</span>
  return (
    &lt;div <span class="hljs-attr">className</span>={classNames(className, `<span class="hljs-variable">${prefixCls}</span>-box`, { [`<span class="hljs-variable">${prefixCls}</span>-open`]: open })} 
         <span class="hljs-attr">style</span>={style} <span class="hljs-literal">on</span>Click={<span class="hljs-literal">on</span>CheckOpen}&gt;
      å†…å®¹
    &lt;/div&gt;
  )<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-10">åä¸€ã€æœ€å°ä¾èµ–ï¼šå‡å°‘è€¦åˆï¼Œæå‡å…¼å®¹æ€§</h2>
<p>ç»„ä»¶å°è£…éµå¾ª â€œæœ€å°ä¾èµ–â€ åŸåˆ™ï¼Œç®€å•åŠŸèƒ½ä¼˜å…ˆæ‰‹å†™å®ç°ï¼Œé¿å…å¼•å…¥ä¸å¿…è¦çš„ä¾èµ–åŒ…ï¼ˆå¦‚ <code>ahooks</code>ï¼‰ï¼Œå‡å°‘ç»„ä»¶ä½“ç§¯å’Œè€¦åˆåº¦ã€‚è‹¥å¿…é¡»å¼•å…¥ï¼Œä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·²æœ‰çš„ä¾èµ–ï¼Œæˆ–è‡ªè¡Œå®ç°æ ¸å¿ƒé€»è¾‘ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { useLatest } <span class="hljs-keyword">from</span> <span class="hljs-string">'ahooks'</span>; <span class="hljs-comment">// æ–°å¢ä¾èµ–ï¼Œå¢åŠ é¡¹ç›®ä½“ç§¯</span>
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> funcRef = <span class="hljs-title function_">useLatest</span>(func);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(</span>'<span class="hljs-attr">chc-input</span>', <span class="hljs-attr">props.className</span>)} {<span class="hljs-attr">...props</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// è‡ªè¡Œå®ç°æ ¸å¿ƒé€»è¾‘ï¼Œæ— éœ€æ–°å¢ä¾èµ–</span>
<span class="hljs-keyword">import</span> { useRef } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useLatest</span>(<span class="hljs-params">value</span>) {
  <span class="hljs-keyword">const</span> ref = <span class="hljs-title function_">useRef</span>(value);
  ref.<span class="hljs-property">current</span> = value;
  <span class="hljs-keyword">return</span> ref;
}

<span class="hljs-comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span>
<span class="hljs-keyword">import</span> { useLatest } <span class="hljs-keyword">from</span> <span class="hljs-string">'@/hooks'</span>;
<span class="hljs-keyword">import</span> classNames <span class="hljs-keyword">from</span> <span class="hljs-string">'classnames'</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title class_">ChcInput</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props: InputProps, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> funcRef = <span class="hljs-title function_">useLatest</span>(func);
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">{classNames(</span>'<span class="hljs-attr">chc-input</span>', <span class="hljs-attr">props.className</span>)} {<span class="hljs-attr">...props</span>}&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;
});
</code></pre>
<h2 data-id="heading-11">åäºŒã€å•ä¸€èŒè´£ï¼šæ‹†åˆ†åŠŸèƒ½ï¼Œæå‡å¤ç”¨æ€§</h2>
<p>ç»„ä»¶ä¸è¦ â€œå¤§åŒ…å¤§æ½â€ï¼Œä¸€ä¸ªç»„ä»¶åªå¤„ç†ä¸€ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼ˆä¸šåŠ¡ç»„ä»¶é™¤å¤–ï¼Œå¯æ•´åˆå¤šä¸ªç»„ä»¶å®Œæˆå•ä¸€ä¸šåŠ¡ï¼‰ã€‚å¤æ‚åŠŸèƒ½æ‹†åˆ†æˆç‹¬ç«‹å…¬å…±ç»„ä»¶ï¼Œæå‡å¤ç”¨æ€§å’Œç»´æŠ¤æ€§ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ä¸€ä¸ªç»„ä»¶åŒ…å«è¡¨æ ¼å’Œå›¾ä¾‹åŠŸèƒ½ï¼ŒèŒè´£æ··ä¹±</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyShowPage</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, imgList, ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
        {/* è¡¨æ ¼é€»è¾‘... */}
      <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{/* å›¾ä¾‹é€»è¾‘... */}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// æ‹†åˆ†ç‹¬ç«‹ç»„ä»¶ï¼Œå„å¸å…¶èŒ</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyShowPage</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, imgList, ...rest } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">MyTable</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>} /&gt;</span> {/* ä»…å¤„ç†è¡¨æ ¼åŠŸèƒ½ */}
      <span class="hljs-tag">&lt;<span class="hljs-name">MyImg</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{imgList}</span> /&gt;</span> {/* ä»…å¤„ç†å›¾ç‰‡å±•ç¤º */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
});
</code></pre>
<h2 data-id="heading-12">åä¸‰ã€ä¸šåŠ¡ç»„ä»¶ï¼šå†…ç½®é€»è¾‘ï¼Œé™ä½ä½¿ç”¨æˆæœ¬</h2>
<p>ä¸šåŠ¡ç»„ä»¶è¦ â€œå»ä¸šåŠ¡åŒ–æš´éœ²â€â€”â€” å°†å¤æ‚ä¸šåŠ¡é€»è¾‘å†…ç½®åˆ°ç»„ä»¶å†…éƒ¨ï¼Œé¿å…ä½¿ç”¨è€…é‡å¤ç¼–å†™ä¸šåŠ¡ä»£ç ï¼Œé™ä½ä½¿ç”¨é—¨æ§›ã€‚ä½¿ç”¨è€…åªéœ€ä¼ å…¥åŸå§‹æ•°æ®ï¼Œç»„ä»¶è‡ªè¡Œå¤„ç†ä¸šåŠ¡è§„åˆ™ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">// ç»„ä»¶æœªå¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç”¨è€…éœ€æ‰‹åŠ¨å¤„ç†
const <span class="hljs-attr">MyTable</span> = forwardRef((props, ref) =&gt; {
  const { data, ...rest } = props<span class="hljs-comment">;</span>
  return (
    &lt;Table <span class="hljs-attr">ref</span>={ref} data={data} {...rest}&gt;
      &lt;Table.Column <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test1"</span> title=<span class="hljs-string">"æ ‡é¢˜1"</span> /&gt;
      &lt;Table.Column <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"data"</span> title=<span class="hljs-string">"å€¼"</span> /&gt;
    &lt;/Table&gt;
  )<span class="hljs-comment">;</span>
})<span class="hljs-comment">;</span>

// ä½¿ç”¨è€…éœ€æ‰‹åŠ¨å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ˆ<span class="hljs-attr">type</span>=<span class="hljs-number">1</span>æ—¶dataä¹˜<span class="hljs-number">2</span>ï¼‰
const <span class="hljs-attr">data</span> = res.map(item =&gt; ({
  ...item,
  data: <span class="hljs-attr">item.type</span> === <span class="hljs-number">1</span> ? item.data * <span class="hljs-number">2</span> : item.data
}))<span class="hljs-comment">;</span>
&lt;MyTable <span class="hljs-attr">data</span>={data} /&gt;
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// ç»„ä»¶å†…ç½®ä¸šåŠ¡é€»è¾‘ï¼Œä½¿ç”¨è€…ç›´æ¥ä¼ åŸå§‹æ•°æ®</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { data, ...rest } = props;
  <span class="hljs-keyword">const</span> <span class="hljs-title function_">dataRender</span> = (<span class="hljs-params">item</span>) =&gt; {
    <span class="hljs-keyword">return</span> item.<span class="hljs-property">type</span> === <span class="hljs-number">1</span> ? item.<span class="hljs-property">data</span> * <span class="hljs-number">2</span> : item.<span class="hljs-property">data</span>; <span class="hljs-comment">// å†…ç½®ä¸šåŠ¡è§„åˆ™</span>
  };
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{data}</span> {<span class="hljs-attr">...rest</span>}&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"test1"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"æ ‡é¢˜1"</span> /&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">dataIndex</span>=<span class="hljs-string">"data"</span> <span class="hljs-attr">title</span>=<span class="hljs-string">"å€¼"</span> <span class="hljs-attr">render</span>=<span class="hljs-string">{dataRender}</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>
  );
});

<span class="hljs-comment">// ä½¿ç”¨è€…æ— éœ€å…³å¿ƒä¸šåŠ¡é€»è¾‘</span>
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">MyTable</span> <span class="hljs-attr">data</span>=<span class="hljs-string">{res}</span> /&gt;</span></span>
</code></pre>
<h2 data-id="heading-13">åå››ã€æ·±åº¦æ‰©å±•ï¼šé€’å½’å¤„ç†ï¼Œæ”¯æŒæ— é™å±‚çº§</h2>
<p>è‹¥ç»„ä»¶éœ€å¤„ç†æ ‘å½¢ã€åµŒå¥—ç­‰æœ‰æ·±åº¦çš„æ•°æ®ï¼Œéœ€é€šè¿‡é€’å½’å®ç°æ— é™å±‚çº§æ”¯æŒï¼Œé¿å…å›ºå®šå±‚çº§å¯¼è‡´çš„å±€é™æ€§ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// ä»…æ”¯æŒä¸¤å±‚åµŒå¥—ï¼Œå±€é™æ€§å¤§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Columns</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TableColumnProps</span> {
  <span class="hljs-attr">columns</span>: <span class="hljs-title class_">TableColumnProps</span>[];
}
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { columns = [] } = props;
  <span class="hljs-keyword">const</span> renderColumn = columns.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> {
    <span class="hljs-keyword">return</span> item.<span class="hljs-property">columns</span> ? (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>}&gt;</span>{item.columns.map(col =&gt; <span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...col</span>} /&gt;</span>)}<span class="hljs-tag">&lt;/<span class="hljs-name">Table.Column</span>&gt;</span></span>
    ) : <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> {<span class="hljs-attr">...item</span>} /&gt;</span></span>;
  });
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...props</span>}&gt;</span>{renderColumn}<span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>;
});
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// é€’å½’æ¸²æŸ“ï¼Œæ”¯æŒæ— é™å±‚çº§</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">Columns</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TableColumnProps</span> {
  <span class="hljs-attr">columns</span>: <span class="hljs-title class_">Columns</span>[]; <span class="hljs-comment">// ç»§æ‰¿è‡ªèº«ï¼Œæ”¯æŒåµŒå¥—</span>
}
<span class="hljs-keyword">const</span> <span class="hljs-title function_">MyColumn</span> = (<span class="hljs-params">props: { columns: Columns[] }</span>) =&gt; {
  <span class="hljs-keyword">const</span> { columns = [] } = props;
  <span class="hljs-keyword">return</span> columns.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table.Column</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{item.key}</span> {<span class="hljs-attr">...item</span>}&gt;</span>
      {item.columns &amp;&amp; <span class="hljs-tag">&lt;<span class="hljs-name">MyColumn</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{item.columns}</span> /&gt;</span>} {/* é€’å½’æ¸²æŸ“ */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">Table.Column</span>&gt;</span></span>
  ));
};
<span class="hljs-keyword">const</span> <span class="hljs-title class_">MyTable</span> = <span class="hljs-title function_">forwardRef</span>(<span class="hljs-function">(<span class="hljs-params">props, ref</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> { columns = [], ...rest } = props;
  <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">Table</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">{ref}</span> {<span class="hljs-attr">...rest</span>}&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">MyColumn</span> <span class="hljs-attr">columns</span>=<span class="hljs-string">{columns}</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">Table</span>&gt;</span></span>;
});
</code></pre>
<h2 data-id="heading-14">åäº”ã€å¤šè¯­è¨€é€‚é…ï¼šå¯é…ç½®åŒ–ï¼Œå…¼å®¹å›½é™…åŒ–</h2>
<p>ç»„ä»¶å†…éƒ¨æ‰€æœ‰æ–‡æ¡ˆéœ€æ”¯æŒè‡ªå®šä¹‰ï¼Œé»˜è®¤æ¨èè‹±æ–‡ï¼Œå…¼å®¹å¤šè¯­è¨€åœºæ™¯ã€‚æ–‡æ¡ˆè¾ƒå¤šæ—¶ï¼Œå¯æš´éœ² <code>strings</code> å¯¹è±¡ç»Ÿä¸€é…ç½®ã€‚</p>
<p>åé¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { title = <span class="hljs-string">'æ ‡é¢˜'</span> } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>è¯¦æƒ…<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span> {/* å›ºå®šæ–‡æ¡ˆï¼Œæ— æ³•å›½é™…åŒ– */}
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<p>æ­£é¢ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { title = <span class="hljs-string">'Title'</span>, detail = <span class="hljs-string">'Detail'</span> } = props; <span class="hljs-comment">// æ”¯æŒè‡ªå®šä¹‰æ–‡æ¡ˆ</span>
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{title}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{detail}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}

<span class="hljs-comment">// æ–‡æ¡ˆè¾ƒå¤šæ—¶ï¼Œç”¨stringsç»Ÿä¸€é…ç½®</span>
<span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyInputProps</span> {
  strings?: {
    <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;
    <span class="hljs-attr">detail</span>: <span class="hljs-built_in">string</span>;
  };
}
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">MyInput</span>(<span class="hljs-params">props: MyInputProps</span>) {
  <span class="hljs-keyword">const</span> { strings = { <span class="hljs-attr">title</span>: <span class="hljs-string">'Title'</span>, <span class="hljs-attr">detail</span>: <span class="hljs-string">'Detail'</span> } } = props;
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{strings.title}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>{strings.detail}<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  );
}
</code></pre>
<h2 data-id="heading-15">åå…­ã€è¯­ä¹‰åŒ–å‘½åï¼šæ¸…æ™°æ˜“æ‡‚ï¼Œé™ä½ç†è§£æˆæœ¬</h2>
<p>ç»„ä»¶åã€APIã€æ–¹æ³•åã€å˜é‡åéƒ½è¦éµå¾ªè¯­ä¹‰åŒ–åŸåˆ™ï¼Œè§åçŸ¥æ„ã€‚ä¾‹å¦‚ï¼š<code>MyInput</code>ï¼ˆè¾“å…¥æ¡†ç»„ä»¶ï¼‰ã€<code>onChange</code>ï¼ˆçŠ¶æ€å˜åŒ–äº‹ä»¶ï¼‰ã€<code>prefixCls</code>ï¼ˆç±»åå‰ç¼€ï¼‰ï¼Œé¿å…æ¨¡ç³Šå‘½åï¼ˆå¦‚ <code>data1</code>ã€<code>func2</code>ï¼‰ã€‚</p>
<hr/>
<h3 data-id="heading-16">ä¸ºä»€ä¹ˆè¿™äº›åŸåˆ™èƒ½å¸®ä½ æ‹¿ä¸‹ Offerï¼Ÿ</h3>
<p>å¤§å‚é¢è¯•ä¸­ï¼Œâ€œç»„ä»¶è®¾è®¡â€ æ˜¯é«˜é¢‘è€ƒç‚¹ï¼Œé¢è¯•å®˜é€šè¿‡ä½ çš„å›ç­”ï¼Œåˆ¤æ–­ä½ æ˜¯å¦å…·å¤‡å·¥ç¨‹åŒ–æ€ç»´ã€ä»£ç å¤ç”¨èƒ½åŠ›å’Œåä½œæ„è¯†ã€‚èƒ½æŠŠè¿™ 16 æ¡åŸåˆ™èä¼šè´¯é€šï¼Œä¸ä»…èƒ½å†™å‡ºé«˜è´¨é‡ä»£ç ï¼Œé¢è¯•æ—¶è¿˜èƒ½æœ‰æ¡ç†åœ°é˜è¿°è®¾è®¡æ€è·¯ï¼Œè½»æ¾å’Œå…¶ä»–å€™é€‰äººæ‹‰å¼€å·®è·</p>
<h3 data-id="heading-17">å‰ç«¯ç®€å†é¢è¯•è¾…å¯¼+æ±‚èŒé™ªè·‘</h3>
<p>å¦‚æœä½ æƒ³ï¼š</p>
<ul>
<li>è®©ç®€å†çªå‡ºç»„ä»¶è®¾è®¡ã€å·¥ç¨‹åŒ–ç­‰æ ¸å¿ƒäº®ç‚¹ï¼Œç²¾å‡†åŒ¹é…å¤§å‚ JDï¼›</li>
<li>é¢è¯•æ—¶ä»å®¹åº”å¯¹ç»„ä»¶å°è£…ã€æºç è§£æç­‰éš¾ç‚¹é—®é¢˜ï¼›</li>
<li>é¿å¼€æ±‚èŒå‘ï¼Œé«˜æ•ˆæ‹¿åˆ°å¿ƒä»ª Offerï¼›</li>
</ul>
<p>æˆ‘æä¾›ã€Œå‰ç«¯ç®€å†é¢è¯•è¾…å¯¼ã€å’Œã€Œæ±‚èŒé™ªè·‘è®¡åˆ’ã€ï¼Œç»“åˆæˆ‘çš„ä¸€çº¿å¼€å‘ç»éªŒå’Œå¤§å‚é¢è¯•é€»è¾‘ï¼Œå¸®ä½ é’ˆå¯¹æ€§ä¼˜åŒ–ç®€å†ã€æ¨¡æ‹Ÿé¢è¯•ã€æ‹†è§£è€ƒç‚¹ï¼Œå…¨ç¨‹é™ªä¼´ä½ ä»æ±‚èŒå‡†å¤‡åˆ°æ‹¿åˆ° Offerï¼Œè®©ä½ å°‘èµ°å¼¯è·¯ï¼Œæ—©æ—¥ä¸Šå²¸</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[aosp14åˆ†å±åˆ†å‰²çº¿åŒºåŸŸéƒ¨åˆ†æ·±å…¥å‰–æ-frameworkå®æˆ˜å¹²è´§]]></title>    <link>https://juejin.cn/post/7592147054786445363</link>    <guid>https://juejin.cn/post/7592147054786445363</guid>    <pubDate>2026-01-07T02:17:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592147054786445363" data-draft-id="7592176349712924710" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="aosp14åˆ†å±åˆ†å‰²çº¿åŒºåŸŸéƒ¨åˆ†æ·±å…¥å‰–æ-frameworkå®æˆ˜å¹²è´§"/> <meta itemprop="keywords" content="å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T02:17:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·8127482815120"/> <meta itemprop="url" content="https://juejin.cn/user/2711830721731422"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            aosp14åˆ†å±åˆ†å‰²çº¿åŒºåŸŸéƒ¨åˆ†æ·±å…¥å‰–æ-frameworkå®æˆ˜å¹²è´§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2711830721731422/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·8127482815120
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:17:54.000Z" title="Wed Jan 07 2026 02:17:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">èƒŒæ™¯ï¼š</h2>
<p>åŸæ¥åœ¨å­¦ä¹ åˆ†å±è¯¾ç¨‹æœŸé—´ï¼Œå½“æ—¶æ²¡æœ‰å¯¹åˆ†å±åˆ†å‰²çº¿çš„åŒºåŸŸéƒ¨åˆ†è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚
æœ¬ç¯‡æ–‡ç« å°±é’ˆå¯¹è¿™ä¸ªå—çš„çŸ¥è¯†è¿›è¡Œè¯¦ç»†çš„è¡¥å……è®²è§£ï¼Œé¦–å…ˆå¯ä»¥é€šè¿‡ä¸‹å›¾æ‰€ç¤ºåˆ†å‰²çº¿æƒ…å†µï¼Œè¿™æ ·æœ‰ä¸€ä¸ªåˆæ­¥çš„è®¤è¯†
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/93799d9868184c38b87f51ae084e2521~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=Xv66YBWPp1%2FrmS5qEfm7MGK8aLo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ç®€å•è¯´åˆ†å±æƒ…å†µä¸‹åˆ†å‰²çº¿æ˜¯å¯ä»¥æ‹–æ‹‰åˆ°ä¸åŒçš„æ¡£ä½åŒºåŸŸï¼Œè€Œä¸”ç«–å±å’Œæ¨ªå±çš„åˆ†å‰²çº¿åŒºåŸŸè¿˜æœ‰å·®åˆ«ï¼Œæ¯”å¦‚ç«–å±å¯ä»¥æœ‰5åˆ†æ¡£ï¼Œè€Œæ¨ªå±åªæœ‰3åˆ†æ¡£ã€‚</p>
<p>æ³¨æ„ï¼šè¿™ä¸ª5åˆ†æ¡£ï¼Œ3åˆ†æ¡£ä¸€èˆ¬æ¥è¯´åŒ…å«è¾¹é™…çš„ä¸¤ä¸ªåˆ†æ¡£ï¼Œä½†æ˜¯è¾¹é™…çš„åˆ†æ¡£ä¸€èˆ¬çœ‹ä¸è§ï¼Œæ‰€ä»¥è¯´çœŸçš„å¯ä»¥è§åˆ†æ¡£çº¿å…¶å®éƒ½éœ€è¦å‡2ï¼Œæ¯”å¦‚ç«–å±å¯è§æ˜¯3ä¸ªåˆ†å‰²çº¿ï¼Œæ¨ªå±1å„åˆ†å‰²çº¿
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d27a6f4d5334494792c42feed0ba2df6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=%2FEyePTDPxkJ21qa%2Bw49tszx%2F%2FP4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-1">å‰–æåˆ†å‰²çº¿æ„å»ºSnapTargetæºç </h2>
<p>ä»£ç ä½ç½®ï¼š
frameworks/base/core/java/com/android/internal/policy/DividerSnapAlgorithm.java</p>
<p>è¿™ä¸ªDividerSnapAlgorithmæ˜¯ä¸“é—¨ç®¡ç†åˆ†å‰²çº¿ä½ç½®ç›¸å…³çš„ç®—æ³•ç±»
åˆ†å‰²çº¿çš„ä»£è¡¨ç±»SnapTargetï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">
    <span class="hljs-comment">/**
     * Represents a snap target for the divider.
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SnapTarget</span> {
        <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> FLAG_NONE = <span class="hljs-number">0</span>;

        <span class="hljs-comment">/** If the divider reaches this value, the left/top task should be dismissed. */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> FLAG_DISMISS_START = <span class="hljs-number">1</span>;

        <span class="hljs-comment">/** If the divider reaches this value, the right/bottom task should be dismissed */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> FLAG_DISMISS_END = <span class="hljs-number">2</span>;

        <span class="hljs-comment">/** Position of this snap target. The right/bottom edge of the top/left task snaps here. */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> position;

        <span class="hljs-comment">/**
         * Like {@link #position}, but used to calculate the task bounds which might be different
         * from the stack bounds.
         */</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> taskPosition;

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> flag;

        <span class="hljs-keyword">public</span> boolean isMiddleTarget;

        <span class="hljs-comment">/**
         * Multiplier used to calculate distance to snap position. The lower this value, the harder
         * it's to snap on this target
         */</span>
        <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-type">float</span> distanceMultiplier;

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SnapTarget</span><span class="hljs-params">(<span class="hljs-type">int</span> position, <span class="hljs-type">int</span> taskPosition, <span class="hljs-type">int</span> flag)</span> </span>{
            <span class="hljs-built_in">this</span>(position, taskPosition, flag, <span class="hljs-number">1f</span>);
        }

        <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SnapTarget</span><span class="hljs-params">(<span class="hljs-type">int</span> position, <span class="hljs-type">int</span> taskPosition, <span class="hljs-type">int</span> flag, <span class="hljs-type">float</span> distanceMultiplier)</span> </span>{
            <span class="hljs-keyword">this</span>.position = position;
            <span class="hljs-keyword">this</span>.taskPosition = taskPosition;
            <span class="hljs-keyword">this</span>.flag = flag;
            <span class="hljs-keyword">this</span>.distanceMultiplier = distanceMultiplier;
        }
    }

</code></pre>
<p>å‡ ä¸ªé‡è¦å‚æ•°ï¼š</p>
<p>position å³ä»£è¡¨åˆ†å‰²çº¿ä½ç½®</p>
<p>flag  ä¸»è¦ä»£è¡¨æ˜¯æ¥é’ˆå¯¹åŒºåˆ†è¾¹é™…åˆ†å‰²çº¿ï¼Œä¸»è¦æœ‰FLAG_DISMISS_STARTï¼ˆä¸Šï¼‰å’ŒFLAG_DISMISS_ENDï¼ˆä¸‹ï¼‰ï¼Œå…¶ä»–éƒ½æ˜¯FLAG_NONE</p>
<p>distanceMultiplier è¿™ä¸ªå±äºä¸€ä¸ªæ”¾å¤§å› å­ï¼Œå°±æ˜¯é’ˆå¯¹é¦–å°¾åˆ†å‰²çº¿çš„æœ‰åˆ°è¾¾è·ç¦»çš„æ”¾å¤§ï¼Œè®©é¦–å°¾åˆ†å‰²çº¿ä¸ä¼šå› ä¸ºä¸å°å¿ƒè¯¯è§¦å¾ˆå®¹æ˜“è¿›å…¥</p>
<p>å…·ä½“è®¡ç®—åˆ†å‰²çº¿æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">calculateTargets</span><span class="hljs-params">(boolean isHorizontalDivision, <span class="hljs-type">int</span> dockedSide)</span> </span>{
        mTargets.<span class="hljs-built_in">clear</span>();
        <span class="hljs-type">int</span> dividerMax = isHorizontalDivision
                ? mDisplayHeight
                : mDisplayWidth;
        <span class="hljs-type">int</span> startPos = -mDividerSize;
        <span class="hljs-keyword">if</span> (dockedSide == DOCKED_RIGHT) {
            startPos += mInsets.left;
        }
        <span class="hljs-comment">//é¦–å…ˆæ·»åŠ SnapTarget.FLAG_DISMISS_STARTçš„SnapTarget</span>
        mTargets.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">SnapTarget</span>(startPos, startPos, SnapTarget.FLAG_DISMISS_START,
                <span class="hljs-number">0.35f</span>));
        <span class="hljs-keyword">switch</span> (mSnapMode) {<span class="hljs-comment">//è¿™é‡Œéœ€è¦æ ¹æ®mSnapModeæ¥åˆ†åˆ«åˆ›å»ºåˆ†å‰²æƒ…å†µ</span>
            <span class="hljs-keyword">case</span> SNAP_MODE_16_9:<span class="hljs-comment">//æ­£å¸¸ç«–å±å°±æ˜¯SNAP_MODE_16_9ï¼Œä¸€èˆ¬ä¼šåˆ›å»º3ä¸ªåˆ†å‰²çº¿</span>
                <span class="hljs-built_in">addRatio16_9Targets</span>(isHorizontalDivision, dividerMax);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> SNAP_FIXED_RATIO:
                <span class="hljs-built_in">addFixedDivisionTargets</span>(isHorizontalDivision, dividerMax);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> SNAP_ONLY_1_1:<span class="hljs-comment">//æ­£å¸¸æ¨ªå±å°±æ˜¯SNAP_ONLY_1_1ï¼Œæ‰€ä»¥åªæœ‰ä¸­é—´ä¸€ä¸ªåˆ†å‰²çº¿</span>
                <span class="hljs-built_in">addMiddleTarget</span>(isHorizontalDivision);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> SNAP_MODE_MINIMIZED:
                <span class="hljs-built_in">addMinimizedTarget</span>(isHorizontalDivision, dockedSide);
                <span class="hljs-keyword">break</span>;
        }
        
        <span class="hljs-comment">//æœ€åæ·»åŠ SnapTarget.FLAG_DISMISS_ENDçš„SnapTarget</span>
        mTargets.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">SnapTarget</span>(dividerMax, dividerMax, SnapTarget.FLAG_DISMISS_END, <span class="hljs-number">0.35f</span>));
    }
</code></pre>
<p>å‚æ•°isHorizontalDivisionï¼Œä»£è¡¨æ˜¯å½“å‰åˆ†å‰²çº¿æ˜¯æ¨ªç€æ˜¾ç¤ºè¿˜æ˜¯ç«–ç€æ˜¾ç¤ºï¼Œæ‰€ä»¥è¿™é‡Œæ³¨æ„ä¸æ˜¯æŒ‡çš„æ¨ªç«–å±å¹•ï¼Œåˆšå¥½æ˜¯ç›¸åçš„ï¼Œç«–å±åˆ†å‰²çº¿æ˜¯æ¨ªç€æ˜¾ç¤ºisHorizontalDivision =trueï¼Œæ¨ªå±isHorizontalDivision=falseã€‚</p>
<p>mSnapModeè¿™ä¸ªå˜é‡æ˜¯åœ¨DividerSnapAlgorithmæ„é€ æ—¶å€™ä»resä¸­configè·å–çš„
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/87e0707a9f474d6d881de6f9c309286e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=mLCeljlt%2BMptkfzZwbOxrjwHhxU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>é€šè¿‡æœç´¢dockedStackDividerSnapModeå‘ç°å¦‚ä¸‹ï¼š<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d694cb91839740f8908bd780cfa9bc7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=VlqAsD%2FAU4Rc9mBlimumgpW9dTk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>ç«–å±å€¼ä¸€èˆ¬æ˜¯0ï¼Œæ¨ªå±å€¼ä¸€èˆ¬æ˜¯2</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c9622e4635fe4210a34b27aea87c0280~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=ZNpr1CaprZLOZcDnNFbLyCTsU2k%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/>
å…ˆçœ‹çœ‹ç®€å•çš„SNAP_ONLY_1_1çš„å®ç°æ–¹æ³•ç›´æ¥å°±æ˜¯addMiddleTarget</p>
<pre><code class="hljs language-cpp" lang="cpp">    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">addMiddleTarget</span><span class="hljs-params">(boolean isHorizontalDivision)</span> </span>{
        <span class="hljs-type">int</span> position = DockedDividerUtils.<span class="hljs-built_in">calculateMiddlePosition</span>(isHorizontalDivision,
                mInsets, mDisplayWidth, mDisplayHeight, mDividerSize);
        mTargets.<span class="hljs-built_in">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-built_in">SnapTarget</span>(position, position, SnapTarget.FLAG_NONE));
    }
   <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">static</span> <span class="hljs-type">int</span> <span class="hljs-title">calculateMiddlePosition</span><span class="hljs-params">(boolean isHorizontalDivision, Rect insets,
            <span class="hljs-type">int</span> displayWidth, <span class="hljs-type">int</span> displayHeight, <span class="hljs-type">int</span> dividerSize)</span> </span>{
        <span class="hljs-type">int</span> start = isHorizontalDivision ? insets.top : insets.left;
        <span class="hljs-type">int</span> end = isHorizontalDivision
                ? displayHeight - insets.bottom
                : displayWidth - insets.right;
        <span class="hljs-keyword">return</span> start + (end - start) / <span class="hljs-number">2</span> - dividerSize / <span class="hljs-number">2</span>;
    }
</code></pre>
<p>è¿™é‡Œå¯ä»¥çœ‹å‡ºæ¥å°±æ˜¯é€šè¿‡calculateMiddlePositionè®¡ç®—å‡ºæ¥ä¸­é—´ä½ç½®positonï¼Œå†ç”¨è¿™ä¸ªpositonæ„å»ºå¯¹åº”çš„SnapTargetæ·»åŠ åˆ°mTargetsã€‚</p>
<p>åŒç†çœ‹çœ‹ç«–å±çš„3ä¸ªsnapçš„è®¡ç®—æ–¹æ³•addRatio16_9Targets</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">addRatio16_9Targets</span><span class="hljs-params">(boolean isHorizontalDivision, <span class="hljs-type">int</span> dividerMax)</span> </span>{
    <span class="hljs-type">int</span> start = isHorizontalDivision ? mInsets.top : mInsets.left;
    <span class="hljs-type">int</span> end = isHorizontalDivision
            ? mDisplayHeight - mInsets.bottom
            : mDisplayWidth - mInsets.right;
    <span class="hljs-type">int</span> startOther = isHorizontalDivision ? mInsets.left : mInsets.top;
    <span class="hljs-type">int</span> endOther = isHorizontalDivision
            ? mDisplayWidth - mInsets.right
            : mDisplayHeight - mInsets.bottom;
    <span class="hljs-type">float</span> size = <span class="hljs-number">9.0f</span> / <span class="hljs-number">16.0f</span> * (endOther - startOther);
    <span class="hljs-type">int</span> sizeInt = (<span class="hljs-type">int</span>) Math.<span class="hljs-built_in">floor</span>(size);
    <span class="hljs-type">int</span> topPosition = start + sizeInt;
    <span class="hljs-type">int</span> bottomPosition = end - sizeInt - mDividerSize;
    <span class="hljs-comment">//æ³¨æ„è¿™é‡Œè®¡ç®—äº†topPositionï¼ŒbottomPositionä¸¤ä¸ªä½ç½®ï¼Œè¿™é‡Œå°±æ˜¯3åˆ†å‰²çº¿çš„ä¸Šä¸‹åˆ†å‰²çº¿ä½ç½®</span>
    <span class="hljs-built_in">addNonDismissingTargets</span>(isHorizontalDivision, topPosition, bottomPosition, dividerMax);
}

  <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-type">void</span> <span class="hljs-title">addNonDismissingTargets</span><span class="hljs-params">(boolean isHorizontalDivision, <span class="hljs-type">int</span> topPosition,
            <span class="hljs-type">int</span> bottomPosition, <span class="hljs-type">int</span> dividerMax)</span> </span>{
        <span class="hljs-built_in">maybeAddTarget</span>(topPosition, topPosition - <span class="hljs-built_in">getStartInset</span>());
        <span class="hljs-built_in">addMiddleTarget</span>(isHorizontalDivision);
        <span class="hljs-built_in">maybeAddTarget</span>(bottomPosition,
                dividerMax - <span class="hljs-built_in">getEndInset</span>() - (bottomPosition + mDividerSize));
    }
</code></pre>
<p>è¿™é‡ŒaddRatio16_9Targetsæ ¸å¿ƒå°±æ˜¯è®¡ç®—å‡ºæ¥äº†topPositionï¼ŒbottomPositionï¼Œç„¶åå†ä½¿ç”¨addNonDismissingTargetsæ–¹æ³•è¿›è¡Œæ„å»ºSnapTargetã€‚</p>
<p>æ ¸å¿ƒçœ‹çœ‹è¿™é‡Œçš„topPositionï¼ŒbottomPositionæ˜¯æ€ä¹ˆè®¡ç®—çš„ï¼Œåˆšå¥½ä¹Ÿå¯ä»¥è§£é‡Šä¸ºå•¥è¿™é‡Œåå­—æœ‰16_9è¿™ä¸ªå­—ç¬¦ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯è®¡ç®—ä¸ªtopPositionä½ç½®ï¼Œæ‹¿ç«–å±æ¥ä¸¾ä¾‹çš„è¯ï¼Œè¿™é‡Œå› ä¸ºæƒ³è¦å±å¹•å®½åº¦å›ºå®šçš„ï¼Œä¸ºäº†ç¾è§‚ç¨‹åº¦ï¼Œæ‰€ä»¥ä¸€èˆ¬topPositionè¿™ä¸ªåŒºåŸŸè¦å›ºå®šä¸ºä¸€ä¸ª16ï¼š9åŒºåŸŸ</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aaaf50ea96544140a70706cd9baaf569~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg55So5oi3ODEyNzQ4MjgxNTEyMA==:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357074&amp;x-signature=nqEWRyzvf0yfCL%2BoJEziszg166w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>addNonDismissingTargetsæ–¹æ³•ä¸»è¦å°±æ˜¯æœ‰äº†topPositionï¼ŒbottomPositionï¼Œåœ¨é¢å¤–åŠ ä¸Šä¸ªmiddleï¼Œè¿™æ ·æ•´ä½“3ä¸ªSnapTargetå°±æ„é€ æˆåŠŸã€‚</p>
<p>åˆ›å»ºåçš„åˆ†å‰²çº¿SnapTargetéƒ½ä¼šè¢«æ”¾å…¥åˆ°mTargetsè¿™ä¸ªé›†åˆä¸­å»ã€‚</p>
<h2 data-id="heading-2">å¯»æ‰¾åˆé€‚åˆ†å‰²çº¿ç®—æ³•</h2>
<p>ä¸Šé¢å·²ç»åˆ†æå‡ºäº†åˆ†å‰²çº¿çš„å‡ ä¸ªSnapTargetï¼Œè¿™äº›SnapTargetéƒ½æ˜¯æœ‰å›ºå®šä½ç½®çš„ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥åˆ†æä¸€ä¸‹åˆ†å‰²çº¿å¦‚ä½•åˆ°å¯¹åº”çš„SnapTargetã€‚</p>
<p><strong>å¤–éƒ¨ä¼ é€’ä¸€ä¸ªæ¯”ä¾‹å€¼æƒ…å†µ</strong>
ä¸€èˆ¬è¿™ç§æƒ…å†µæ˜¯åœ¨å¯åŠ¨åˆ†å±æ—¶å€™ï¼Œéœ€è¦è®¾ç½®å¥½ä¸€ä¸ªä¸Šä¸‹åˆ†å±æ¯”ä¾‹ratio,ä¸»è¦é€šè¿‡å¦‚ä¸‹æ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp"><span class="hljs-comment">/** Updates divide position and split bounds base on the ratio within root bounds. */</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-type">void</span> <span class="hljs-title">setDivideRatio</span><span class="hljs-params">(<span class="hljs-type">float</span> ratio)</span> </span>{
    <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> position = <span class="hljs-built_in">isLandscape</span>()
            ? mRootBounds.left + (<span class="hljs-type">int</span>) (mRootBounds.<span class="hljs-built_in">width</span>() * ratio)
            : mRootBounds.top + (<span class="hljs-type">int</span>) (mRootBounds.<span class="hljs-built_in">height</span>() * ratio);
    <span class="hljs-keyword">final</span> DividerSnapAlgorithm.SnapTarget snapTarget =
            mDividerSnapAlgorithm.<span class="hljs-built_in">calculateNonDismissingSnapTarget</span>(position);
    <span class="hljs-built_in">setDividePosition</span>(snapTarget.position, <span class="hljs-literal">false</span> <span class="hljs-comment">/* applyLayoutChange */</span>);
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œä¼šå…ˆæ ¹æ®ratioè®¡ç®—å‡ºä¸€ä¸ªä½ç½®position,ä½†æ˜¯è¿™ä¸ªpositionå¹¶ä¸æ˜¯ç›´æ¥çš„SnapTargetçš„positionï¼Œéœ€è¦æŠŠè¿™ä¸ªpositionä¼ é€’åˆ°calculateNonDismissingSnapTargetæ–¹æ³•è®¡ç®—å‡ºSnapTargetï¼Œç„¶ååœ¨ä½¿ç”¨SnapTargetçš„positionã€‚
å³æ¯”å¦‚ä¼ é€’ratioè¿›å»æ˜¯0.25ï¼Œé‚£ä¹ˆè®¡ç®—çš„positionå°±æ˜¯2960 * 0.25 = 740ï¼Œä½†æ˜¯æ­£å¸¸çš„topçš„SnapTargetçš„positionä¸€èˆ¬æ˜¯810+84 = 894ã€‚
çœ‹çœ‹è¿™é‡Œçš„calculateNonDismissingSnapTargetæ–¹æ³•</p>
<pre><code class="hljs language-cpp" lang="cpp">   <span class="hljs-function"><span class="hljs-keyword">public</span> SnapTarget <span class="hljs-title">calculateNonDismissingSnapTarget</span><span class="hljs-params">(<span class="hljs-type">int</span> position)</span> </span>{
        SnapTarget target = <span class="hljs-built_in">snap</span>(position, <span class="hljs-literal">false</span> <span class="hljs-comment">/* hardDismiss */</span>);<span class="hljs-comment">//ä¸»è¦è°ƒç”¨snap</span>
        <span class="hljs-keyword">if</span> (target == mDismissStartTarget) {
            <span class="hljs-keyword">return</span> mFirstSplitTarget;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target == mDismissEndTarget) {
            <span class="hljs-keyword">return</span> mLastSplitTarget;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> target;
        }
    }
</code></pre>
<p>çœ‹çœ‹snapæ–¹æ³•ï¼š</p>
<pre><code class="hljs language-cpp" lang="cpp">    <span class="hljs-function"><span class="hljs-keyword">private</span> SnapTarget <span class="hljs-title">snap</span><span class="hljs-params">(<span class="hljs-type">int</span> position, boolean hardDismiss)</span> </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">shouldApplyFreeSnapMode</span>(position)) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">SnapTarget</span>(position, position, SnapTarget.FLAG_NONE);
        }
        <span class="hljs-type">int</span> minIndex = <span class="hljs-number">-1</span>;
        <span class="hljs-type">float</span> minDistance = Float.MAX_VALUE;
        <span class="hljs-type">int</span> size = mTargets.<span class="hljs-built_in">size</span>();
        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; size; i++) {
            SnapTarget target = mTargets.<span class="hljs-built_in">get</span>(i);
            <span class="hljs-type">float</span> distance = Math.<span class="hljs-built_in">abs</span>(position - target.position);
            <span class="hljs-keyword">if</span> (hardDismiss) {
                distance /= target.distanceMultiplier;
            }
            <span class="hljs-keyword">if</span> (distance &lt; minDistance) {<span class="hljs-comment">//è¿™é‡Œä¼šè®¡ç®—ä¼ é€’è¿›æ¥positionå’ŒSnapTarget.positionçš„è·ç¦»</span>
                minIndex = i;
                minDistance = distance;
            }
        }
        <span class="hljs-keyword">return</span> mTargets.<span class="hljs-built_in">get</span>(minIndex);
    }

</code></pre>
<p>è¿™é‡Œsnapæ–¹æ³•æœ¬è´¨å°±æ˜¯æ ¹æ®ä¼ é€’è¿›æ¥çš„positionï¼Œä¸mTargetsé›†åˆçš„æ‰€æœ‰positionè¿›è¡Œæ¯”è¾ƒè·ç¦»ï¼Œç¦»è°æœ€è¿‘å°±é€‰è°ã€‚</p>
<p>æ›´å¤šframeworkè¯·å…³æ³¨â€œåƒé‡Œé©¬å­¦æ¡†æ¶â€</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ‰å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼]]></title>    <link>https://juejin.cn/post/7592089325913522176</link>    <guid>https://juejin.cn/post/7592089325913522176</guid>    <pubDate>2026-01-07T02:28:46.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592089325913522176" data-draft-id="7591465142452469812" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ‰å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼"/> <meta itemprop="keywords" content="å‰ç«¯,TypeScript,å¼€æº"/> <meta itemprop="datePublished" content="2026-01-07T02:28:46.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¼€æºæ˜Ÿçƒ"/> <meta itemprop="url" content="https://juejin.cn/user/1504599026445150"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ‰å†æ—¶1å¹´ï¼ŒTinyEditor v4.0 æ­£å¼å‘å¸ƒï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1504599026445150/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¼€æºæ˜Ÿçƒ
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:28:46.000Z" title="Wed Jan 07 2026 02:28:46 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯ Kagolï¼Œä¸ªäººå…¬ä¼—å·ï¼š<code>å‰ç«¯å¼€æºæ˜Ÿçƒ</code>ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/" ref="nofollow noopener noreferrer">TinyEditor</a> æ˜¯ä¸€ä¸ªåŸºäº Quill 2.0 çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œåœ¨ Quill åŸºç¡€ä¸Šæ‰©å±•äº†ä¸°å¯Œçš„æ¨¡å—å’Œæ ¼å¼ï¼Œæ¡†æ¶æ— å…³ã€åŠŸèƒ½å¼ºå¤§ã€å¼€ç®±å³ç”¨ã€‚</p>
<ul>
<li>æºç ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor%2F" target="_blank" title="https://github.com/opentiny/tiny-editor/" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></li>
<li>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></li>
</ul>
<p>å»å¹´1æœˆ2æ—¥ï¼Œæˆ‘ä»¬å‘å¸ƒäº† v3.25 ç‰ˆæœ¬ï¼ŒåŠŸèƒ½åŸºæœ¬å·²ç»å®Œå¤‡ï¼Œä¹‹å v3.x ç‰ˆæœ¬è¿›å…¥äº†ç»´æŠ¤æœŸï¼ŒåŒæ—¶å¼€å¯äº†æ¼«é•¿çš„ v4.0 ç‰ˆæœ¬çš„å¼€å‘ï¼Œv4.0 çš„æ ¸å¿ƒç›®æ ‡æ˜¯ä½“éªŒä¼˜åŒ–å’Œç¨³å®šæ€§æå‡ï¼Œå¹¶æ”¯æŒå¤šäººååŒç¼–è¾‘ã€‚</p>
<p>åœ¨é•¿è¾¾1å¹´çš„å¼€å‘å’Œæ‰“ç£¨åï¼Œæˆ‘ä»¬è£å¹¸åœ°å®£å¸ƒÂ <strong>TinyEditor v4.0</strong>Â æ­£å¼å‘å¸ƒï¼è¿™ä¸ªç‰ˆæœ¬æ±‡èšäº†å›¢é˜Ÿçš„å¿ƒè¡€ï¼Œå¸¦æ¥äº†æ¿€åŠ¨äººå¿ƒå¤šäººååŒç¼–è¾‘æ–°åŠŸèƒ½ã€ä»¥åŠå¤§é‡ä½“éªŒä¼˜åŒ–å’Œç¨³å®šæ€§æ”¹è¿›ã€‚</p>
<p>é‡ç‚¹ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒå¤šäººååŒç¼–è¾‘ï¼šä¸€èµ·åœ¨ç¼–è¾‘å™¨å†™ï¼ˆç©ï¼‰æ–‡æ¡£ï¼ˆè´ªåƒè›‡æ¸¸æˆæ‘¸é±¼ï¼‰ğŸ¶</li>
<li>åŸºäº <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fquill-modules%2Fquill-table-up" target="_blank" title="https://github.com/quill-modules/quill-table-up" ref="nofollow noopener noreferrer">quill-table-up</a> çš„æ–°è¡¨æ ¼æ–¹æ¡ˆï¼šè¡¨æ ¼æ“ä½œä½“éªŒ++âš¡ï¸</li>
<li>åŸºäº <code>emoji-mart</code> çš„ Emoji è¡¨æƒ…ï¼šè¡¨æƒ…å…šæœ€çˆ±ğŸ˜</li>
<li>æ”¯æŒæ–œæ†èœå•å’Œä¸°å¯Œçš„å¿«æ·é”®ï¼šé”®ç›˜æµçš„ç¦éŸ³ğŸ˜„</li>
<li>å›¾ç‰‡/è§†é¢‘/æ–‡ä»¶ä¸Šä¼ ä½“éªŒä¼˜åŒ–ğŸŒ„</li>
</ul>
<p>è¯¦ç»†çš„ Release Notes è¯·å‚è€ƒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor%2Freleases%2Ftag%2Fv4.0.0" target="_blank" title="https://github.com/opentiny/tiny-editor/releases/tag/v4.0.0" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a></p>
<p>æ¬¢è¿å®‰è£… v4.0 ç‰ˆæœ¬ä½“éªŒï¼š</p>
<pre><code class="hljs language-shell" lang="shell">npm i @opentiny/fluent-editor@4.0.0
</code></pre>
<h2 data-id="heading-0">1 äº®ç‚¹ç‰¹æ€§</h2>
<h3 data-id="heading-1">1.1 å¤šäººåä½œç¼–è¾‘</h3>
<p>v4.0 æœ€é‡ç£…çš„åŠŸèƒ½ä¹‹ä¸€æ˜¯å¼•å…¥äº†<strong>å®Œæ•´çš„åä½œç¼–è¾‘èƒ½åŠ›</strong>ã€‚æˆ‘ä»¬é›†æˆäº† quill-cursor æ¨¡å—ï¼Œæ”¯æŒå¤šäººå®æ—¶åä½œç¼–è¾‘ï¼Œå¹¶æä¾›äº†ç‹¬ç«‹çš„ npm åŒ…ä¾›å¼€å‘è€…é›†æˆã€‚æ— è®ºæ˜¯éœ€è¦ç¦»çº¿æ”¯æŒè¿˜æ˜¯äº‘ç«¯åä½œï¼ŒTinyEditor éƒ½èƒ½èƒœä»»ã€‚</p>
<p>ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„æ¼”ç¤ºé¡¹ç›®ä¸­è¿›è¡Œä½“éªŒï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fprojects%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/projects/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5f5877094758471cae8f5098e8a82052~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357725&amp;x-signature=cxikW09j%2BhFqcFJ5WIYxzOya0Bg%3D" alt="TinyEditor ååŒç¼–è¾‘æ•ˆæœ" loading="lazy"/></p>
<p>å…³äºååŒç¼–è¾‘æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œå‚è€ƒï¼š<a href="https://juejin.cn/post/7565940210149064756" target="_blank" title="https://juejin.cn/post/7565940210149064756">å¦‚ä½•ä½¿ç”¨ TinyEditor å¿«é€Ÿéƒ¨ç½²ä¸€ä¸ªå¤šäººååŒå¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼Ÿ</a></p>
<h3 data-id="heading-2">1.2 è¡¨æ ¼èƒ½åŠ›å‡çº§</h3>
<p>é›†æˆäº†Â <strong>table-up</strong>Â æ¨¡å—ï¼Œå¤§å¹…æå‡äº†è¡¨æ ¼ç¼–è¾‘å’Œæ“ä½œèƒ½åŠ›ï¼Œæ”¯æŒæ›´å¤æ‚çš„è¡¨æ ¼åœºæ™¯ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fdocs%2Fdemo%2Ftable-up" target="_blank" title="https://opentiny.github.io/tiny-editor/docs/demo/table-up" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0dbc39ec97f244b9b259517aacb4d683~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357725&amp;x-signature=eSdfQ63Xv54PUxK3QR5YqdWONn4%3D" alt="TinyEditor è¡¨æ ¼æ¨¡å—æ•ˆæœ" loading="lazy"/></p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7527182608340484139#heading-0" target="_blank" title="https://juejin.cn/post/7527182608340484139#heading-0">æ›´å¼ºå¤§çš„è¡¨æ ¼</a></p>
<h3 data-id="heading-3">1.3 æ›´ä¸°å¯Œçš„ Emoji è¡¨æƒ…ğŸ˜˜</h3>
<ul>
<li>é›†æˆÂ <strong>emoji-mart</strong>ï¼Œæä¾›ä¸°å¯Œçš„è¡¨æƒ…é€‰æ‹©</li>
<li>ä¿®å¤äº†æ’å…¥è¡¨æƒ…åçš„å…‰æ ‡ä½ç½®é—®é¢˜</li>
<li>å®Œå–„äº†è¡¨æƒ…æ’å…¥çš„äº¤äº’ä½“éªŒ</li>
</ul>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fdocs%2Fdemo%2Femoji" target="_blank" title="https://opentiny.github.io/tiny-editor/docs/demo/emoji" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a7b7f590ed114d46b5fb1185f6537854~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357725&amp;x-signature=ntI6K0zJVyK6vear4RUpXOodM1Y%3D" alt="TinyEditor Emoji è¡¨æƒ…" loading="lazy"/></p>
<p>è¯¦ç»†ä»‹ç»å¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ï¼š<a href="https://juejin.cn/post/7527182608340484139#heading-1" target="_blank" title="https://juejin.cn/post/7527182608340484139#heading-1">æ›´ä¸°å¯Œçš„è¡¨æƒ…</a></p>
<h3 data-id="heading-4">1.4 å¿«æ·é”®å’Œå¿«é€Ÿèœå•</h3>
<p>æ–°å¢äº†å¼ºå¤§çš„å¿«æ·é”®ç³»ç»Ÿå’Œå¿«é€Ÿèœå•åŠŸèƒ½ï¼Œè®©é«˜çº§ç”¨æˆ·èƒ½å¤Ÿæ›´é«˜æ•ˆåœ°æ“ä½œç¼–è¾‘å™¨ã€‚</p>
<p>ä½“éªŒåœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor%2Fprojects%2F" target="_blank" title="https://opentiny.github.io/tiny-editor/projects/" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editorâ€¦</a></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/addf8f3ab20b4b74b371eb45300968e3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357725&amp;x-signature=EL%2F7o4la6ffhzn2%2FlZ7nNV5uSsk%3D" alt="å¿«æ·é”®.gif" loading="lazy"/></p>
<h3 data-id="heading-5">1.5 é¢œè‰²é€‰æ‹©å™¨å‡çº§</h3>
<p>è‡ªå®šä¹‰é¢œè‰²é€‰æ‹©å™¨ç°åœ¨èƒ½ä¿å­˜å½“å‰é€‰æ‹©ï¼Œå¹¶æ”¯æŒæ·»åŠ æ›´å¤šé¢œè‰²ã€‚</p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a40da4b35d2543c6bff39fbf1a61c66a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5YmN56uv5byA5rqQ5pif55CD:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768357725&amp;x-signature=DMZbLG7yeY8wVbjPi%2Fkb8VpOGDE%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-6">1.6 æ–‡æœ¬æ¨¡æ¿ä¸å›½é™…åŒ–</h3>
<ul>
<li>æ”¯æŒ i18n æ–‡æœ¬æ¨¡æ¿æ›¿æ¢</li>
<li>å®Œå–„äº†å›½é™…åŒ–ç¿»è¯‘ï¼ˆheaderã€picker ç­‰ç»„ä»¶ï¼‰</li>
<li>æ›´å¥½çš„å¤šè¯­è¨€æ”¯æŒä½“éªŒ</li>
</ul>
<h3 data-id="heading-7">1.7 å›¾ç‰‡å’Œæ–‡ä»¶å¢å¼º</h3>
<ul>
<li><strong>å›¾ç‰‡å·¥å…·æ </strong>ï¼šé€‰ä¸­å›¾ç‰‡æ—¶æ˜¾ç¤ºä¸“é—¨çš„æ“ä½œå·¥å…·æ </li>
<li><strong>è‡ªå®šä¹‰ä¸Šä¼ </strong>ï¼šå¢åŠ Â <code>allowInvalidUrl</code>Â é€‰é¡¹ï¼Œæ”¯æŒ Electron ç­‰ç‰¹å®šåœºæ™¯</li>
<li><strong>æ”¹è¿›çš„ä¸Šä¼ é€»è¾‘</strong>ï¼šä¼˜åŒ–äº†å¤±è´¥çŠ¶æ€çš„å¤„ç†</li>
</ul>
<h2 data-id="heading-8">2 æŠ€æœ¯æ”¹è¿›</h2>
<h3 data-id="heading-9">2.1 æ„å»ºå’Œå·¥ç¨‹åŒ–</h3>
<ul>
<li>ä¿®å¤äº† SSR æ„å»ºé—®é¢˜</li>
<li>ä¼˜åŒ–äº† Vite é…ç½®ï¼Œè§£å†³äº† PostCSS å’Œ Tailwind çš„å…¼å®¹æ€§é—®é¢˜</li>
<li>æ”¹è¿›äº† SCSS æ–‡ä»¶å¼•å…¥æ–¹å¼</li>
<li>è¾“å‡ºæ–‡ä»¶åç§°ä¼˜åŒ–</li>
</ul>
<h3 data-id="heading-10">2.2 ä¾èµ–ç®¡ç†</h3>
<ul>
<li>å¤–éƒ¨åŒ– emoji-mart å’Œ floating-ui ä¾èµ–ï¼Œå‡å°‘åŒ…ä½“ç§¯</li>
<li>ç§»é™¤äº† better-table å’Œ lodash-esï¼Œä¼˜åŒ–ä¾èµ–æ ‘</li>
</ul>
<h3 data-id="heading-11">2.3 ä»£ç è´¨é‡</h3>
<ul>
<li>å®Œæ•´çš„æµ‹è¯•è¦†ç›–ç‡æå‡</li>
<li>é‡æ„ä¼˜åŒ–ï¼šç§»é™¤å†—ä½™ä»£ç </li>
<li>API æ ‡å‡†åŒ–ï¼š<code>scrollIntoView</code>Â â†’Â <code>scrollSelectionIntoView</code></li>
<li>ç¤ºä¾‹ä»£ç  <code>async/await</code> æ”¹é€ ï¼Œä»£ç ç°ä»£åŒ–</li>
</ul>
<h3 data-id="heading-12">2.4 ç±»å‹å®‰å…¨</h3>
<ul>
<li>ä¿®å¤äº†å›  TypeScript ç±»å‹å¯¼è‡´çš„ç¼–è¯‘é”™è¯¯</li>
<li>æ”¹è¿›äº†ç±»å‹å®šä¹‰</li>
</ul>
<h3 data-id="heading-13">2.5 API å¯¼å‡ºå¢å¼º</h3>
<p>v4.0 å¯¼å‡ºäº†å·¥å…·æ é…ç½®å¸¸é‡ï¼Œæ–¹ä¾¿å¼€å‘è€…å®šåˆ¶ï¼š</p>
<ul>
<li><code>DEFAULT_TOOLBAR</code>ï¼šé»˜è®¤å·¥å…·æ é…ç½®</li>
<li><code>FULL_TOOLBAR</code>ï¼šå®Œæ•´å·¥å…·æ é…ç½®</li>
</ul>
<h3 data-id="heading-14">2.6 å¢åŠ è‡ªåŠ¨å‘åŒ…å·¥ä½œæµ</h3>
<ul>
<li>å¢åŠ  auto-publish / auto-deploy ç­‰è‡ªåŠ¨åŒ–å·¥ä½œæµï¼Œæ”¯æŒæ‰“ tag ä¹‹åè‡ªåŠ¨å‘ç‰ˆæœ¬ã€ç”Ÿæˆ Release Notes</li>
<li>PR é—¨ç¦åœ¨å•å…ƒæµ‹è¯•åŸºç¡€ä¸Šå¢åŠ  npm åŒ…å’Œç½‘ç«™æ„å»ºï¼Œç¡®ä¿åˆå…¥ PR ä¹‹å‰ï¼Œnpm åŒ…æ„å»ºå’Œç½‘ç«™æ„å»ºæ˜¯æ­£å¸¸çš„ï¼Œé€šè¿‡è‡ªåŠ¨åŒ–æ–¹å¼ä¿éšœç‰ˆæœ¬è´¨é‡ã€‚</li>
</ul>
<h2 data-id="heading-15">3 é—®é¢˜ä¿®å¤</h2>
<p>v4.0 ä¿®å¤äº†å¤§é‡å·²çŸ¥é—®é¢˜ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li>å·¥å…·æ é€‰æ‹©å™¨ä¸è·Ÿéšå…‰æ ‡å˜åŒ–çš„é—®é¢˜</li>
<li>è¡Œé«˜ä½œç”¨åŸŸé—®é¢˜</li>
<li>åˆ—è¡¨æ ·å¼æ˜¾ç¤ºä¸æ­£ç¡®</li>
<li>èƒŒæ™¯è‰² SVG å›¾æ ‡é—®é¢˜</li>
<li>VitePress é»˜è®¤æ ·å¼å½±å“çš„é—®é¢˜</li>
<li>è‡ªå®šä¹‰ä¸Šä¼ å¤±è´¥æ—¶è¡¨æ ¼æ•°æ®ç»“æ„ç ´åçš„é—®é¢˜</li>
<li>å¤šé¡¹æ–‡æ¡£å’Œå›½é™…åŒ–ç¿»è¯‘é—®é¢˜</li>
</ul>
<h2 data-id="heading-16">4 ç¤¾åŒºè´¡çŒ®</h2>
<p>æ„Ÿè°¢æ‰€æœ‰ä¸º v4.0 åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ï¼ä½ ä»¬çš„è¾›å‹¤ä»˜å‡ºè®© TinyEditor å˜å¾—æ›´å¥½ï¼</p>
<ul>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fchenxi-20" target="_blank" title="https://github.com/chenxi-20" ref="nofollow noopener noreferrer">@chenxi-20</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FGaoNeng-wWw" target="_blank" title="https://github.com/GaoNeng-wWw" ref="nofollow noopener noreferrer">@GaoNeng-wWw</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjany55555" target="_blank" title="https://github.com/jany55555" ref="nofollow noopener noreferrer">@jany55555</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fqwangry" target="_blank" title="https://github.com/qwangry" ref="nofollow noopener noreferrer">@qwangry</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fshenyaofeng" target="_blank" title="https://github.com/shenyaofeng" ref="nofollow noopener noreferrer">@shenyaofeng</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvaebe" target="_blank" title="https://github.com/vaebe" ref="nofollow noopener noreferrer">@vaebe</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fwuyiping0628" target="_blank" title="https://github.com/wuyiping0628" ref="nofollow noopener noreferrer">@wuyiping0628</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FYinlin124" target="_blank" title="https://github.com/Yinlin124" ref="nofollow noopener noreferrer">@Yinlin124</a></li>
<li><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzzxming" target="_blank" title="https://github.com/zzxming" ref="nofollow noopener noreferrer">@zzxming</a></li>
</ul>
<blockquote>
<p>æ³¨ï¼šæ’åä¸åˆ†å…ˆåï¼ŒæŒ‰åå­—é¦–å­—æ¯æ’åºã€‚</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä»»ä½•å»ºè®®æˆ–åé¦ˆï¼Œæ¬¢è¿é€šè¿‡Â <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor%2Fissues" target="_blank" title="https://github.com/opentiny/tiny-editor/issues" ref="nofollow noopener noreferrer">GitHub Issues</a>Â ä¸æˆ‘ä»¬è”ç³»ã€‚</p>
<h2 data-id="heading-17">å¾€æœŸæ¨èæ–‡ç« </h2>
<ul>
<li><a href="https://juejin.cn/post/7403618336952418314" target="_blank" title="https://juejin.cn/post/7403618336952418314">ğŸ‘TinyEditorï¼šä¸€ä¸ªåŸºäº Quill 2.0 çš„å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒåŠŸèƒ½å¼ºå¤§ã€å¼€ç®±å³ç”¨ï¼</a></li>
<li><a href="https://juejin.cn/post/7430505409176289320" target="_blank" title="https://juejin.cn/post/7430505409176289320">ğŸˆTinyEditor å¯Œæ–‡æœ¬å¼€æº2ä¸ªæœˆçš„æ€»ç»“ï¼šå¢åŠ æ ¼å¼åˆ·ã€æˆªå±ã€TypeScript ç±»å‹å£°æ˜ç­‰æ–°ç‰¹æ€§</a></li>
<li><a href="https://juejin.cn/post/7436030236784214068" target="_blank" title="https://juejin.cn/post/7436030236784214068">ğŸ¥³é‡ç£…æ›´æ–°ï¼TinyEditor å¼€æºå¯Œæ–‡æœ¬æ”¯æŒ LaTeX å¯ç¼–è¾‘å…¬å¼å•¦~</a></li>
<li><a href="https://juejin.cn/post/7406347285901426728" target="_blank" title="https://juejin.cn/post/7406347285901426728">ğŸ‰å–œæŠ¥ï¼TinyEditor å¼€æºå¯Œæ–‡æœ¬è¿æ¥äº†ç¬¬ä¸€ä½è´¡çŒ®è€…</a></li>
<li><a href="https://juejin.cn/post/7442330442606051338" target="_blank" title="https://juejin.cn/post/7442330442606051338">ğŸ‘è®©æˆ‘ä»¬ä¸€èµ·æ¥å»ºè®¾ TinyEditor å¼€æºå¯Œæ–‡æœ¬ç¼–è¾‘å™¨å§ï¼</a></li>
<li><a href="https://juejin.cn/post/7455243039655067657" target="_blank" title="https://juejin.cn/post/7455243039655067657">âœ¨TinyEditor v3.25.0 æ­£å¼å‘å¸ƒï¼2025å¹´ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œå¢åŠ æ ‡é¢˜åˆ—è¡¨å¯¼èˆªã€åˆ†éš”çº¿ç­‰å®ç”¨ç‰¹æ€§</a></li>
<li><a href="https://juejin.cn/post/7527182608340484139" target="_blank" title="https://juejin.cn/post/7527182608340484139">âš¡ï¸TinyEditor v4.0 alpha ç‰ˆæœ¬å‘å¸ƒï¼šæ›´å¼ºå¤§çš„è¡¨æ ¼ã€æ›´ä¸°å¯Œçš„è¡¨æƒ…ã€æ›´å¥½çš„ä¸Šä¼ ä½“éªŒ</a></li>
</ul>
<h2 data-id="heading-18">è”ç³»æˆ‘ä»¬</h2>
<p>GitHubï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fopentiny%2Ftiny-editor" target="_blank" title="https://github.com/opentiny/tiny-editor" ref="nofollow noopener noreferrer">github.com/opentiny/tiâ€¦</a>ï¼ˆæ¬¢è¿ Star â­ï¼‰</p>
<p>å®˜ç½‘ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fopentiny.github.io%2Ftiny-editor" target="_blank" title="https://opentiny.github.io/tiny-editor" ref="nofollow noopener noreferrer">opentiny.github.io/tiny-editor</a></p>
<p>ä¸ªäººåšå®¢ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fkagol.github.io%2Fblogs%2F" target="_blank" title="https://kagol.github.io/blogs/" ref="nofollow noopener noreferrer">kagol.github.io/blogs/</a></p>
<p>å°åŠ©æ‰‹å¾®ä¿¡ï¼šopentiny-official</p>
<p>å…¬ä¼—å·ï¼šOpenTiny</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[JSä¸­ escape urlencodeComponent urlencode åŒºåˆ«]]></title>    <link>https://juejin.cn/post/7592147054786576435</link>    <guid>https://juejin.cn/post/7592147054786576435</guid>    <pubDate>2026-01-07T02:33:56.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592147054786576435" data-draft-id="7592176349713006630" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="JSä¸­ escape urlencodeComponent urlencode åŒºåˆ«"/> <meta itemprop="keywords" content="å‰ç«¯,JavaScript"/> <meta itemprop="datePublished" content="2026-01-07T02:33:56.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°ç‹å’Œå…«è›‹"/> <meta itemprop="url" content="https://juejin.cn/user/1658510348133944"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            JSä¸­ escape urlencodeComponent urlencode åŒºåˆ«
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1658510348133944/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°ç‹å’Œå…«è›‹
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:33:56.000Z" title="Wed Jan 07 2026 02:33:56 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252b3a}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px;color:#5e7ce0}.markdown-body h1{font-size:24px;margin-bottom:5px;margin-top:80px;position:relative;text-align:center}.markdown-body h2{font-size:20px;padding-bottom:12px;border-bottom:1px solid #dfe1e6}.markdown-body h3{font-size:18px;padding-bottom:0}.markdown-body h4{font-size:16px;margin-top:30px}.markdown-body h5{font-size:14px;margin-top:20px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #dfe1e6;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#ffeeed;color:#c73636;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#252b3a;background:#f8f8f8}.markdown-body a{position:relative;text-decoration:none;color:#5e7ce0;padding-right:18px;padding-bottom:4px}.markdown-body a[href^=http]:after{position:absolute;display:inline-block;width:16px;height:16px;margin-left:2px;margin-top:6px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAIRlWElmTU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAOgAQADAAAAAQABAACgAgAEAAAAAQAAACCgAwAEAAAAAQAAACAAAAAAX7wP8AAAAAlwSFlzAAALEwAACxMBAJqcGAAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDYuMC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KGV7hBwAABWVJREFUWAnlVktsVFUY/s85997pC9BOTKxRWnEKsXWlxjWJj0RWJjrFAAXjAlewYWOkgauACVu7a2IiNUEyExM3yoZE3Wmi7qgPJthJBDE6JUNpO3Mf5/j95/bOTOcBlBgXejJ37rn/Of/7O/9/iP7vQ/zTAcjnC4ry+a5ii1OkiYTpuvjvEc0Gp51uivP+ZW+QBuSW4QjW5rptAa1Ey0uOGKOxwPetVyafN6p/52/PkNBbjdAhGaGEpMRjLZTryB8+9MUSYSGNRIcBvm8kBAY9tHYlHz78nTs392xIkwv9FA3Oe33bdoX1ZZKOS0bH0CXI6RugYLW6BwIu5gskkQ4sEG0wYF25PjBzbZfSYY6kDLUmWMt7FR7Lw3xYUkaTdjxHfTPnPwav0iEGYADVa9XIRIEyxrAA0jIQxgFL22gYwF7A8/DAzNVdksJvJaTEUZ2kYnZWziN5s1ADPHneEIXByotYuMSrf9JEbbsuv7VcvbaKML8plXtQR0EdIYDqWEmtOgAomZFH8EjWSnek2ulmtljljttHbmaIHCCCHzd9MjwfsmscBeZH9Jyd10nMvz92UQrtCBKvMF06mQy0SiEdRMEGg8mN0YjAlgoDDkPrMI5qJKSkKKydpbB2CZjJkhIBvOBw2CGQgii85bpx//dMqFRKam5uvH7w+K97oe+Cl0HO68uIBH0qyEzpOMwIbZIcFq0I+9cwoElizCjk2KFI1y7Nnx614W1db58fOXIlMzs7Xn/jeDmvBV2Q0mXjGf554O/m4LZHp2N8r61WPMvLZWLdiC4GMAk5BjeeB5lhv39l6+BIbu3m760hXMDKBD08XBKzR8fr04nygnIypOOAJUx/fHrsi0Mnys+vVK+V4VUohaiyPCo2Q9DFALvF/ikw8WS4QvVZALS5ksw47/7R8ejgTPk1UFqU6/3zp8bOM7B/kdu/fkguPGU5JibW+F0sTjWOUw8DklRrg4BiLGeBqbaRLxjlT4no0InFV402RcftJz41cH/f/JnHP3kZaaF6VX/liwist9vYG5+NU9Cg3MNkt/+lU5wS8fTxq3mc7ILjDlAE4CJpe89BOWPiIjBhi9O6PI4G1jsc6RGB3lZwmS76k8H0zOKTkFboG8jS2krFKCX2fvTeaPHIBwAkMHHgncURnL3nuCSnxSopdIzN5th0BIonJ0Lf9yUA9iMkzdRWl3BixOusfDcwQVcS4UKIFwYfGPnM8wY/DyP9NFMXaTE5BU39tGkDgGZz+fJJG0oYcSaOafLcqdECY4LzfSObSzyUOgxqtyisr8SSNOOAkubWoh3TTaeA2YtFEXPnm5x81/j+6MI6JqyS25WSNU6hbCMKHG84marJbdR+vwakRhQLRuQpbzHRLjmpmijI+OmWCtq+LzWtnX5v30gHSsqmWne74DtiACi2+Wz0iXbuLt9D2cDyoPEkWOiyp5XUIwLMi/wJY1FbH5B9ONtdC1KrsD/Q0MCQAS0wccILORDW25amAeOtooAj/KQxfzF17uwTSQ1v3dJ7jnLINwdZYRDa4tPU0sHVXFo/vxFF5BqFqxRfOmgPCk4ft2NgKTCy2Y47JIEg+MIhjYsLy5I25qUYTQlCjMRHsr/UwdYwIK33UO1J5fFNB9XNO6akcywJofVmXQDP2wfrSPcI2xG5BSs3I+IosHr4EtvO1TDAu16xHQq5+ykMblfRXLbhEoFIdDTBdhldvzl+3CMg60ZktI2vNzLW6IIp0waLklot9L63yzuUp8dJd7bglPFe3hIXstBEP58/s6Ocyr4rH2+866ZNbriTzA0RSOWCwakMl1QJgculxPt8Z7O5GLdtW6bvU8R/nO1vb+hMExVAVtEAAAAASUVORK5CYII=");background-size:100%}.markdown-body a:active,.markdown-body a:hover{border-bottom:2px solid #5e7ce0}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #5e7ce0;border-spacing:0}.markdown-body thead{color:#fff;text-align:left}.markdown-body thead tr{background:#5e7ce0}.markdown-body thead th{border-bottom:1px solid #dfe1e6}.markdown-body tr{background-color:#fff}.markdown-body tr:nth-child(2n){background-color:#f2f5fc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#252b3a;padding:1px 23px;margin:22px 0;border-left:4px solid #5e7ce0;background-color:#f2f5fc}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{padding-left:10px;margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol li::marker,.markdown-body ul li::marker{color:#5e7ce0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body ul li::marker{content:"â€¢";color:#5e7ce0}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}.markdown-body input[type=checkbox]:before{display:inline-block;width:16px;height:16px;content:"";background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAAAhRJREFUeAHtnLEuBFEUhs9cu7JCskEhIrZAgYZGoREPwBuIygOoPITKA6jEG/AAolFoaFCgICIKZBNiY8Pyz5rNOWe9wNz5T7N3Z2eT/b/7zZlpziat3xKWBDJoEyh5EDd3DTk5r8vV7Yc8vzbl6zvfwvSERIYHyzI90SeLc1WZrFV85PR9oi+N/YMnOT6t/3tiLAeXFqqytjrSFacDYmfvQS6u37tOiPHA7FS/bK6PmWhpj4AJRYGA9MiKzLpK6An+cqiNVmRleUhArrec6PNzt/5sttLgh0cvcvfY6Px+ZNY9I6Ax6gKErY1xmZ8ZyD0E5MJGIgsyIZsunT3g7qALJuTdAp0nWyMTsunS2QNukbpwOcRaPpvOHvxzQow2ZBvrs+nsfLL8o0QQBJFdMO1XGkEjaIQlQCMsD/YIGkEjLAEaYXmwR9AIGmEJ0AjLgz2CRtAIS4BGWB7sETSCRlgCNMLyYI+gETTCEqARlgd7BI2gEZYAjbA82CNoBI2wBGiE5cEeQSNohCVAIywP9ggaQSMsARphebBH0AgaYQnQCMsjYC5SF2agYi2fTWcPGA7VFfO0n8+mswdMyOrCNJwnpz/P6xqZkE2Xzh4w8qcLI4Hbu/dydvkWBRAAQBZk0uOOyKyzp5PARRiF1puNtR+NTh+oMCvtJ+D8F2N6j6x+PrwzG46gRTDDm5BtsAGBg0X924Qfj7i23p7HNgQAAAAASUVORK5CYII=");background-size:100%;position:relative;right:2px;top:-5px}.markdown-body input[type=checkbox]:checked:before{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAABCCAYAAADjVADoAAAK2GlDQ1BJQ0MgUHJvZmlsZQAASImVlwdUU9kWhs+96Y0WiHRC70gngJTQQxGkg6iEJJBQYkgIKmJnUMGxoCKCZcSKKFhGQMaCWLANAopdJ8igoD4HC6Ki5t3AI8zMW++99fZaJ+dbO/vss/e55671XwAoYWyRKBdWAyBPWCCODQ2gJ6ek0nHPAQRgQAI2wIHNkYiYMTGRALHJ+a/28S4Sjdhte0Wuf///v5oGlyfhAAClIZzBlXDyEG5DxkuOSFwAAOoI4jddUCBScBfCmmKkQIR/V3DWBH9ScMY4o8njMfGxgQjTAcCT2WxxFgBkO8RPL+RkIXnIih4chVyBEOFihH05fDYX4TMI2+XlzVfwIMJWSLwIAApyOoCR8aecWX/Jn6HMz2ZnKXmir3HDBwkkolz2ov/zaP635eVKJ/ewQAaZLw6LVeyHnN/9nPkRShZmzIyeZAF3oiYF86VhCZPMkQSmTjKXHRShXJs7M3KSMwUhLGWeAlb8JPMkwXGTLJ4fq9wrUxzInGS2eHxfIsIyaU6C0s/nsZT5i/jxSZNcKEicOcmSnLiIqZhApV8sjVXWzxOGBkztG6LsPU/yp34FLOXaAn58mLJ39lT9PCFzKqckWVkblxcUPBWToIwXFQQo9xLlxijjebmhSr+kME65tgC5nFNrY5RnmM0Oj5lkIABRgA04dNVJAqCAt7BA0UjgfNEisSCLX0BnIm8bj84Schzs6M6Ozs4AKN7dievwnjb+TkK061O+NYjHr10ul5+e8oUi9/i4KfJYbk35LCsAUNUD4Op+jlRcOOFDK34wyNNTBZpABxgCU2AF7IEzcAfewB8Eg3AQDeJBCpiL1MoHeUAMFoBisAKUgnKwEWwF1WA32AsOgaPgBGgGZ8AFcAXcAF2gFzwCMjAAXoFh8BGMQRCEgygQFdKBjCBzyBZyhhiQLxQMRUKxUAqUDmVBQkgKFUOroHKoAqqG9kB10HHoNHQBugZ1Qw+gPmgIegd9gVEwGdaEDWALeDrMgJlwBBwPz4Gz4Hy4CC6B18NVcC18BG6CL8A34F5YBr+CR1AARULRUMYoexQDFYiKRqWiMlFi1FJUGaoSVYtqQLWiOlC3UTLUa9RnNBZNRdPR9mhvdBg6Ac1B56OXotehq9GH0E3oS+jb6D70MPo7hoLRx9hivDAsTDImC7MAU4qpxBzAnMJcxvRiBjAfsVgsDWuJ9cCGYVOw2djF2HXYndhGbBu2G9uPHcHhcDo4W5wPLhrHxhXgSnHbcUdw53E9uAHcJzwJb4R3xofgU/FC/Ep8Jf4w/hy+B/8CP0ZQI5gTvAjRBC5hEWEDYR+hlXCLMEAYI6oTLYk+xHhiNnEFsYrYQLxMfEx8TyKRTEiepFkkAWk5qYp0jHSV1Ef6TNYg25ADyWlkKXk9+SC5jfyA/J5CoVhQ/CmplALKekod5SLlKeWTClXFQYWlwlVZplKj0qTSo/JGlaBqrspUnatapFqpelL1luprNYKahVqgGlttqVqN2mm1e2oj6lR1J/Vo9Tz1deqH1a+pD2rgNCw0gjW4GiUaezUuavRTUVRTaiCVQ11F3Ue9TB3QxGpaarI0szXLNY9qdmoOa2louWolai3UqtE6qyWjoWgWNBYtl7aBdoJ2l/ZlmsE05jTetLXTGqb1TBvV1tP21+Zpl2k3avdqf9Gh6wTr5Ohs0mnWeaKL1rXRnaW7QHeX7mXd13qaet56HL0yvRN6D/VhfRv9WP3F+nv1b+qPGBgahBqIDLYbXDR4bUgz9DfMNtxieM5wyIhq5GskMNpidN7oJV2LzqTn0qvol+jDxvrGYcZS4z3GncZjJpYmCSYrTRpNnpgSTRmmmaZbTNtNh82MzKLMis3qzR6aE8wZ5nzzbeYd5qMWlhZJFqstmi0GLbUtWZZFlvWWj60oVn5W+Va1VnessdYM6xzrndZdNrCNmw3fpsbmli1s624rsN1p222HsfO0E9rV2t2zJ9sz7Qvt6+37HGgOkQ4rHZod3kw3m546fdP0junfHd0ccx33OT5y0nAKd1rp1Or0ztnGmeNc43zHheIS4rLMpcXlrautK891l+t9N6pblNtqt3a3b+4e7mL3BvchDzOPdI8dHvcYmowYxjrGVU+MZ4DnMs8znp+93L0KvE54/eFt753jfdh7cIblDN6MfTP6fUx82D57fGS+dN903598ZX7Gfmy/Wr9n/qb+XP8D/i+Y1sxs5hHmmwDHAHHAqYDRQK/AJYFtQaig0KCyoM5gjeCE4OrgpyEmIVkh9SHDoW6hi0PbwjBhEWGbwu6xDFgcVh1rONwjfEn4pQhyRFxEdcSzSJtIcWRrFBwVHrU56vFM85nCmc3RIJoVvTn6SYxlTH7ML7Ows2Jm1cx6HusUWxzbEUeNmxd3OO5jfED8hvhHCVYJ0oT2RNXEtMS6xNGkoKSKJFny9OQlyTdSdFMEKS2puNTE1AOpI7ODZ2+dPZDmllaadneO5ZyFc67N1Z2bO/fsPNV57Hkn0zHpSemH07+yo9m17JEMVsaOjGFOIGcb5xXXn7uFO8Tz4VXwXmT6ZFZkDmb5ZG3OGuL78Sv5rwWBgmrB2+yw7N3ZoznROQdz5LlJuY15+Lz0vNNCDWGO8NJ8w/kL53eLbEWlIlm+V/7W/GFxhPiABJLMkbQUaCIi6abUSvqDtK/Qt7Cm8NOCxAUnF6ovFC68uchm0dpFL4pCivYvRi/mLG4vNi5eUdy3hLlkz1JoacbS9mWmy0qWDSwPXX5oBXFFzopfVzqurFj5YVXSqtYSg5LlJf0/hP5QX6pSKi69t9p79e416DWCNZ1rXdZuX/u9jFt2vdyxvLL86zrOuus/Ov1Y9aN8feb6zg3uG3ZtxG4Ubry7yW/ToQr1iqKK/s1Rm5u20LeUbfmwdd7Wa5Wulbu3EbdJt8mqIqtatptt37j9azW/urcmoKZxh/6OtTtGd3J39uzy39Ww22B3+e4vPwl+ur8ndE9TrUVt5V7s3sK9z/cl7uvYz9hfd0D3QPmBbweFB2WHYg9dqvOoqzusf3hDPVwvrR86knak62jQ0ZYG+4Y9jbTG8mPgmPTYy+Ppx++eiDjRfpJxsuFn8593nKKeKmuCmhY1DTfzm2UtKS3dp8NPt7d6t576xeGXg2eMz9Sc1Tq74RzxXMk5+fmi8yNtorbXF7Iu9LfPa390MfninUuzLnVejrh89UrIlYsdzI7zV32unrnmde30dcb15hvuN5puut089avbr6c63Tubbnncauny7GrtntF9rsev58LtoNtX7rDu3Oid2dt9N+Hu/Xtp92T3ufcHH+Q+ePuw8OHYo+WPMY/Lnqg9qXyq/7T2N+vfGmXusrN9QX03n8U9e9TP6X/1u+T3rwMlzynPK18YvagbdB48MxQy1PVy9suBV6JXY69L/6H+jx1vrN78/If/HzeHk4cH3orfyt+te6/z/uAH1w/tIzEjTz/mfRwbLfuk8+nQZ8bnji9JX16MLfiK+1r1zfpb6/eI74/leXK5iC1mj0sBFDLgzEwA3h1EtHEKAFRElxNnT2jrcYMmvgfGCfwnntDf4+YOQAMyKWQR0x+Akwo5i8wqyKyQRPH+AHZxUY5/mSTTxXkiFxlRlphPcvl7AwBwrQB8E8vlYzvl8m/7kGIfANCWP6HpFYZFtHyD3vJRg6LbPe3g7zah9//U499noKjAFfx9/ieoZhkWVvYkwwAAAGxlWElmTU0AKgAAAAgABAEaAAUAAAABAAAAPgEbAAUAAAABAAAARgEoAAMAAAABAAIAAIdpAAQAAAABAAAATgAAAAAAAACQAAAAAQAAAJAAAAABAAKgAgAEAAAAAQAAAEKgAwAEAAAAAQAAAEIAAAAAgodoEQAAAAlwSFlzAAAWJQAAFiUBSVIk8AAABMtJREFUeAHtXM2KFDEQzrQKruIu4mEXRFlUVLz4A4K7B99AcO8io0/gwQfxDVzFuwu+gQf34EG8iOAPKAh6EFlBFMSf/qa2uqszlVR6ZtYxM5PDJNVVSer78nU6KrHzpyxuVlwx44AY2O0T8eb9D7f5fMu9fPvdff7y0/36nbdgdhUdd+jgHnf62JxbObvgjh/d60Pu2R35ajx49Mk9frqlBk7Kw8sXF9y1K4t9cCoi7tz/4F68/tYXMIkPzpzY725dP9yA1tsjoIRpIQHogRWYZSmwJ4Reh06nI2Nd7rYEA8zAzqXAxhgq/pc1d9vHKbEX+Dr4JbzypJDc/YxXYi/wifRLeOXpU5q7n/FK7EXsnBBeeRoqd7/EHj1ZhleeiMjdz8pArRKR+0pb+UsCuK0SkftKW/kzeFmrRHCAxWzufsaJOkqExWzufpOI8EpP1jnCJCK80pN1jjCJ4ICwMigidz/jRD3bI7bZUInIfaWt/KUSuK0SEd4jqFvufgYva5UIDrCYzd3POFFHifhfV/7k8lwPw7D5mUSEV3r854ju2pK7ffOIWzk/X+Go803Lr+ooGqoiwkyP9xzRXVt0q9sE3CgJYTLqfNPyE/irpkoEe2um6ck4bSiBSeD8JBl41jY/Hgd1lIiaaeoyLlsjgUGAjEH3DB4DtUpEW2Z3Mj5GAgA8efbVvXpX/200nln5IMYvKhHDrvylcwdc9+pSNdeg46WQsP7wo2s7fpWYaPT926fw9ZiVk4BpywYJkGuvlJs4EuWS0p/HTyHh3kbzH2najM85cR0lgpPiYMtukFB26m1u5Ua+vkFkWP3Zn0KCJDg1Px6f42Wtvhrhdyz8ncanrFKCmGH1wrwDMCrh/uxPIUFTAvdHbeVPsc1fVRE+c7Ud/k6fWt7XHFlYqcqQ5wTRvWpiY4wrIZwfDUL+akDRUBXB/jCzFCH9SHCzTDRUmsro7z+cEvrHwxOZn2ZTL/pVFcEBtRLoiWXfxQ5ehvoHHx4vpIwUEuJKSMvPz5/zQq0qwmIy5m+rjBQSwnsCQYnlgwjfT72av6oifOba2qnKcOXeGVIP0rT3BALTNr8mBWSpRHAgmJSTtLGhDHwj+A9GPCbX2DNiBSRoShg0H8zl5y/njxIhJ0WntralDJmIbO+UEvz85Zwt9wj7HIDB5Ttp7RkyGbRDSqC49vOjX50P9aexmr+qInzmajvtO13H02SpyrCVMNj8dT7/4BwByDXzRIC0LWXEldA/njVfip9GpV9VERxQM0lPhrVDyrCVMJr5/fwZJ+qWewR1lSuNJ21sXxnjVgIhck5VhM/cqG1WBpIAMX4Z9Xz+eP58sFUiOBArLQcZpQ0CNCXt1HzA5OfPOFGrrwYHyKTwbNJsxolaJUJbKeo0mu/4uMeXBHBbJSK88qP5jo97fAYva5UIDgivHEXk7mecqKNEhFeOhsjdbxKR+0pb+UsCuK0qIveVtvJn8LJWieAAi9nc/YwTdZQIi9nc/SYR4ZWenSO2yZvgcwTuRYZKWBnUI3e/xF7gcmio5L4HWPlL7AVuyPol95W28me8EnuBa8J+sZjM3c94JfYCd6VxTXjaCjDLe+K9cwTuSuOa8LQUYPXvh1d3w0HC7JK8kMK0/rcJfwHkVMYgi4xhOgAAAABJRU5ErkJggg==");background-size:100%}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">1. ä¸€æ®µè¯æ€»ç»“</h3>
<p>JavaScript ä¸­æœ‰ <strong>escapeã€encodeURIã€encodeURIComponent</strong> ä¸‰ä¸ªç¼–ç å‡½æ•°åŠå¯¹åº”çš„ <strong>unescapeã€decodeURIã€decodeURIComponent</strong> è§£ç å‡½æ•°ï¼Œä¸‰è€…ç¼–ç èŒƒå›´ä¸åŒï¼ˆä¸ç¼–ç å­—ç¬¦æ•°åˆ†åˆ«ä¸º 69 ä¸ªã€82 ä¸ªã€71 ä¸ªï¼‰ï¼Œé€‚ç”¨åœºæ™¯æœ‰åˆ«ï¼š<strong>encodeURIComponent</strong> å› èƒ½ç¼–ç ç‰¹æ®Šå­—ç¬¦ä¸”é€‚é… UTF-8 è§£ç ï¼Œæ˜¯æœ€å¸¸ç”¨çš„å‚æ•°ä¼ é€’å·¥å…·ï¼›<strong>encodeURI</strong> é€‚ç”¨äºæ•´ä½“ URL è·³è½¬ï¼Œä¸ç¼–ç  URL å…³é”®åˆ†éš”ç¬¦ï¼›<strong>escape</strong> é€‚ç”¨äºå†…éƒ¨æ•°æ®å­˜å‚¨ï¼ˆå¦‚æ”¶è—å†å²ï¼‰ï¼Œç¼–ç é ASCII å­—ç¬¦ä¸º % u**** æ ¼å¼ï¼Œä¸”åº”å°½é‡é¿å…åœ¨è¡¨å•æˆ–æœåŠ¡å™¨äº¤äº’ä¸­ä½¿ç”¨ã€‚</p>
<hr/>
<h3 data-id="heading-1">2. æ€ç»´å¯¼å›¾</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f33ace03f3da411c96c7601cd1e0e863~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5bCP546L5ZKM5YWr6JuL:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768358036&amp;x-signature=Osges1Ns18AnlsOpT8SicahpC4Y%3D" alt="image.png" loading="lazy"/></p>
<h3 data-id="heading-2">3. è¯¦ç»†æ€»ç»“</h3>
<h4 data-id="heading-3">ä¸€ã€å‡½æ•°ç»„åŸºç¡€ä¿¡æ¯</h4>
<p>JavaScript ä¸­ç”¨äºæ–‡å­—ç¼–ç çš„ 3 ä¸ªæ ¸å¿ƒå‡½æ•°åŠå¯¹åº”è§£ç å‡½æ•°ï¼Œæ„æˆå®Œæ•´çš„ç¼–ç è§£ç ä½“ç³»ï¼Œå…·ä½“å¯¹åº”å…³ç³»å¦‚ä¸‹ï¼š</p>

























<table><thead><tr><th align="center">ç¼–ç å‡½æ•°</th><th align="center">å¯¹åº”è§£ç å‡½æ•°</th><th align="center">æ ¸å¿ƒç¼–ç é€»è¾‘</th></tr></thead><tbody><tr><td align="center">escape</td><td align="center">unescape</td><td align="center">é ASCII å­—ç¬¦ç¼–ç ä¸º % XX æ ¼å¼ï¼Œ0-255 å¤– Unicode ç¼–ç ä¸º % u****</td></tr><tr><td align="center">encodeURI</td><td align="center">decodeURI</td><td align="center">ä»…ç¼–ç  URI ä¸­éæ³•å­—ç¬¦ï¼Œä¿ç•™å…³é”®åˆ†éš”ç¬¦ï¼ŒåŸºäº UTF-8 ç¼–ç </td></tr><tr><td align="center">encodeURIComponent</td><td align="center">decodeURIComponent</td><td align="center">ç¼–ç  URI ä¸­æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦ï¼ˆå«åˆ†éš”ç¬¦ï¼‰ï¼ŒåŸºäº UTF-8 ç¼–ç </td></tr></tbody></table>
<h4 data-id="heading-4">äºŒã€ä¸‰å¤§å‡½æ•°æ ¸å¿ƒå·®å¼‚ï¼ˆä¸ç¼–ç å­—ç¬¦å¯¹æ¯”ï¼‰</h4>
<p>ä¸‰è€…çš„æ ¸å¿ƒåŒºåˆ«åœ¨äºä¸ç¼–ç çš„å­—ç¬¦èŒƒå›´ï¼Œç›´æ¥å†³å®šå…¶é€‚ç”¨åœºæ™¯ï¼Œå…·ä½“ç»Ÿè®¡å¦‚ä¸‹ï¼š</p>
<ol>
<li><strong>escape</strong>ï¼šä¸ç¼–ç å­—ç¬¦å…± 69 ä¸ªï¼ŒåŒ…æ‹¬ï¼š*ã€+ã€-ã€.ã€/ã€@ã€_ã€0-9ï¼ˆ10 ä¸ªï¼‰ã€a-zï¼ˆ26 ä¸ªï¼‰ã€A-Zï¼ˆ26 ä¸ªï¼‰</li>
<li><strong>encodeURI</strong>ï¼šä¸ç¼–ç å­—ç¬¦å…± 82 ä¸ªï¼ŒåŒ…æ‹¬ï¼š!ã€#ã€$ã€&amp;ã€'ã€(ã€)ã€*ã€+ã€,ã€-ã€.ã€/ã€:ã€;ã€=ã€?ã€@ã€_ã€~ã€0-9ï¼ˆ10 ä¸ªï¼‰ã€a-zï¼ˆ26 ä¸ªï¼‰ã€A-Zï¼ˆ26 ä¸ªï¼‰</li>
<li><strong>encodeURIComponent</strong>ï¼šä¸ç¼–ç å­—ç¬¦å…± 71 ä¸ªï¼ŒåŒ…æ‹¬ï¼š!ã€'ã€(ã€)ã€*ã€-ã€.ã€_ã€~ã€0-9ï¼ˆ10 ä¸ªï¼‰ã€a-zï¼ˆ26 ä¸ªï¼‰ã€A-Zï¼ˆ26 ä¸ªï¼‰</li>
</ol>
<h4 data-id="heading-5">ä¸‰ã€é€‚ç”¨åœºæ™¯åŠç¤ºä¾‹</h4>
<ol>
<li><strong>encodeURIComponentï¼ˆæœ€å¸¸ç”¨ï¼‰</strong>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šURL å‚æ•°ä¼ é€’ï¼ˆé¿å… #ã€&amp; ç­‰ç‰¹æ®Šå­—ç¬¦æˆªæ–­å‚æ•°ï¼‰</li>
<li>ç¤ºä¾‹ä»£ç ï¼š<code>&lt;script language="javascript"&gt;document.write('&lt;a href="http://passport.baidu.com/?logout&amp;aid=7&amp;u=' + encodeURIComponent("http://cang.baidu.com/bruce42") + '"&gt;é€€å‡º&lt;/a&gt;');&lt;/script&gt;</code></li>
<li>å…³é”®è¯´æ˜ï¼šç¼–ç ç»“æœé€‚é… UTF-8 æ ¼å¼ï¼Œéœ€åå°è§£ç æ—¶æ”¯æŒ UTF-8ï¼ˆä¸è¡¨å• / é¡µé¢ç¼–ç ä¸€è‡´ï¼‰</li>
</ul>
</li>
<li><strong>encodeURI</strong>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šæ•´ä½“ URL è·³è½¬ï¼ˆä¿ç•™ URL åŸæœ‰ç»“æ„ï¼Œå¦‚ :ã€/ åˆ†éš”ç¬¦ï¼‰</li>
<li>ç¤ºä¾‹ä»£ç ï¼š<code>Location.href=encodeURI("http://cang.baidu.com/do/s?word=ç™¾åº¦&amp;ct=21");</code></li>
<li>å…³é”®è¯´æ˜ï¼šä¸å¯¹ URL æ ¸å¿ƒåˆ†éš”ç¬¦ï¼ˆ:ã€/ã€;ã€? ç­‰ï¼‰ç¼–ç ï¼Œç¡®ä¿è·³è½¬è·¯å¾„æœ‰æ•ˆ</li>
</ul>
</li>
<li><strong>escape</strong>
<ul>
<li>é€‚ç”¨åœºæ™¯ï¼šJS å†…éƒ¨æ•°æ®å­˜å‚¨ï¼ˆå¦‚æ”¶è—å¤¹å†å²è®°å½•ï¼‰</li>
<li>ç¤ºä¾‹åœºæ™¯ï¼šå­˜å‚¨ç”¨æˆ·æ“ä½œå†å²ä¸­çš„ç‰¹æ®Šå­—ç¬¦æ–‡æœ¬</li>
<li>å…³é”®è¯´æ˜ï¼šé¿å…åœ¨è¡¨å•æäº¤æˆ–æœåŠ¡å™¨äº¤äº’ä¸­ä½¿ç”¨ï¼Œå›  + å­—ç¬¦ä¼šè¢«æœåŠ¡å™¨è§£æä¸ºç©ºæ ¼</li>
</ul>
</li>
</ol>
<h4 data-id="heading-6">å››ã€ä½¿ç”¨æ³¨æ„äº‹é¡¹</h4>
<ol>
<li>ç¼–ç æ ¼å¼å…¼å®¹æ€§ï¼šencodeURI å’Œ encodeURIComponent åŸºäº UTF-8 ç¼–ç ï¼Œåå°æ¥æ”¶å‚æ•°æ—¶éœ€ç¡®ä¿è§£ç æ–¹å¼ä¸€è‡´ï¼Œå¦åˆ™ä¼šå‡ºç°ä¹±ç ï¼›</li>
<li>escape å±€é™æ€§ï¼šå› ä¸ç¼–ç  @ã€/ã€+ ç­‰å­—ç¬¦ï¼Œä¸” + å­—ç¬¦çš„ç‰¹æ®Šè§£æé—®é¢˜ï¼Œå®é™…å¼€å‘ä¸­åº”ä¼˜å…ˆé€‰æ‹© encodeURIComponent æ›¿ä»£ï¼›</li>
<li>è·¯å¾„ç¼–ç ç¦å¿Œï¼šencodeURIComponent ä¼šç¼–ç  / ç­‰è·¯å¾„åˆ†éš”ç¬¦ï¼Œè‹¥ç”¨äºç¼–ç å®Œæ•´ URL è·¯å¾„ï¼ˆå¦‚ "/FOLDER1/FOLDER2"ï¼‰ï¼Œä¼šå¯¼è‡´æœåŠ¡å™¨è¯·æ±‚å¤±æ•ˆã€‚</li>
</ol>
<hr/>
<h3 data-id="heading-7">4. å…³é”®é—®é¢˜</h3>
<h4 data-id="heading-8">é—®é¢˜ 1ï¼šJS ä¸­ encodeURI å’Œ encodeURIComponent çš„æ ¸å¿ƒåŒºåˆ«æ˜¯ä»€ä¹ˆï¼Ÿé€‚ç”¨åœºæ™¯åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<ul>
<li>ç­”æ¡ˆï¼šæ ¸å¿ƒåŒºåˆ«åœ¨äº<strong>ä¸ç¼–ç å­—ç¬¦èŒƒå›´</strong>å’Œ<strong>å¯¹ URL åˆ†éš”ç¬¦çš„å¤„ç†</strong>ï¼šencodeURI ä¸ç¼–ç  :ã€/ã€;ã€? ç­‰ URL å…³é”®åˆ†éš”ç¬¦ï¼ˆä¸ç¼–ç å­—ç¬¦å…± 82 ä¸ªï¼‰ï¼Œé€‚ç”¨äº<strong>æ•´ä½“ URL è·³è½¬</strong>ï¼›encodeURIComponent ä¼šç¼–ç æ‰€æœ‰ URL ç‰¹æ®Šå­—ç¬¦ï¼ˆå«åˆ†éš”ç¬¦ï¼Œä¸ç¼–ç å­—ç¬¦å…± 71 ä¸ªï¼‰ï¼Œé€‚ç”¨äº<strong>URL å‚æ•°ä¼ é€’</strong>ã€‚ä¾‹å¦‚ï¼Œè·³è½¬æ—¶ç”¨ <code>encodeURI("http://xxx.com?word=ç™¾åº¦")</code>ï¼Œä¼ å‚æ—¶ç”¨ <code>encodeURIComponent("http://xxx.com")</code> é¿å…å‚æ•°æˆªæ–­ã€‚</li>
</ul>
<h4 data-id="heading-9">é—®é¢˜ 2ï¼šä¸ºä»€ä¹ˆå®é™…å¼€å‘ä¸­æ›´æ¨èä½¿ç”¨ encodeURIComponent è€Œé escapeï¼Ÿ</h4>
<ul>
<li>ç­”æ¡ˆï¼šä¸»è¦æœ‰ä¸¤ä¸ªæ ¸å¿ƒåŸå› ï¼šâ‘  <strong>ç¼–ç å…¼å®¹æ€§</strong>ï¼šencodeURIComponent åŸºäº UTF-8 ç¼–ç ï¼Œèƒ½é€‚é…åå°å¸¸è§çš„è§£ç æ–¹å¼ï¼Œè€Œ escape é‡‡ç”¨ ISO æ‹‰ä¸å­—ç¬¦é›†ç¼–ç ï¼Œå¯¹ä¸­æ–‡ã€éŸ©æ–‡ç­‰ç‰¹æ®Šå­—ç¬¦æ”¯æŒä¸ä½³ï¼›â‘¡ <strong>å­—ç¬¦è§£æé£é™©</strong>ï¼šescape ä¸ç¼–ç  + å­—ç¬¦ï¼Œè¯¥å­—ç¬¦åœ¨æœåŠ¡å™¨ç«¯ä¼šè¢«è§£æä¸ºç©ºæ ¼ï¼Œå¯¼è‡´å‚æ•°ä¼ é€’é”™è¯¯ï¼›â‘¢ <strong>é€‚ç”¨åœºæ™¯è¦†ç›–</strong>ï¼šencodeURIComponent å¯æ»¡è¶³å‚æ•°ä¼ é€’ã€ç‰¹æ®Šå­—ç¬¦ç¼–ç ç­‰å¤§éƒ¨åˆ†åœºæ™¯ï¼Œè€Œ escape ä»…é€‚ç”¨äºå†…éƒ¨æ•°æ®å­˜å‚¨ï¼Œä½¿ç”¨åœºæ™¯æçª„ã€‚</li>
</ul>
<h4 data-id="heading-10">é—®é¢˜ 3ï¼šè‹¥éœ€ç¼–ç å®Œæ•´çš„ URL è·¯å¾„ï¼ˆå¦‚ "<a href="https://link.juejin.cn?target=http%3A%2F%2Fcang.baidu.com%2Fdo%2Fs%3Fword%3D%25E7%2599%25BE%25E5%25BA%25A6" target="_blank" title="http://cang.baidu.com/do/s?word=%E7%99%BE%E5%BA%A6" ref="nofollow noopener noreferrer">cang.baidu.com/do/s?word=ç™¾â€¦</a> "ï¼‰ï¼Œåº”é€‰æ‹©å“ªä¸ªå‡½æ•°ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</h4>
<ul>
<li>ç­”æ¡ˆï¼šåº”é€‰æ‹© <strong>encodeURI</strong>ã€‚åŸå› ï¼šå®Œæ•´ URL è·¯å¾„ä¾èµ– :ã€/ã€? ç­‰åˆ†éš”ç¬¦ç»´æŒç»“æ„æœ‰æ•ˆæ€§ï¼Œè€Œ encodeURI ä¸ä¼šç¼–ç è¿™äº›å…³é”®åˆ†éš”ç¬¦ï¼Œèƒ½ä¿è¯ç¼–ç å URL å¯æ­£å¸¸è·³è½¬ï¼›è‹¥ä½¿ç”¨ encodeURIComponentï¼Œä¼šå°† /ã€? ç­‰å­—ç¬¦ç¼–ç ä¸º %2Fã€%3Fï¼Œå¯¼è‡´ URL ç»“æ„ç ´åï¼ŒæœåŠ¡å™¨æ— æ³•è¯†åˆ«è·¯å¾„ï¼›è€Œ escape å› ç¼–ç æ ¼å¼å’Œå­—ç¬¦æ”¯æŒé—®é¢˜ï¼ŒåŒæ ·ä¸é€‚åˆå®Œæ•´ URL ç¼–ç ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Git æŸ¥è¯¢ Tag åˆ—è¡¨]]></title>    <link>https://juejin.cn/post/7592088192517079083</link>    <guid>https://juejin.cn/post/7592088192517079083</guid>    <pubDate>2026-01-07T02:36:54.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592088192517079083" data-draft-id="7592058764120621075" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Git æŸ¥è¯¢ Tag åˆ—è¡¨"/> <meta itemprop="keywords" content="Android"/> <meta itemprop="datePublished" content="2026-01-07T02:36:54.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="louisgeek"/> <meta itemprop="url" content="https://juejin.cn/user/1099167357208151"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Git æŸ¥è¯¢ Tag åˆ—è¡¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1099167357208151/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    louisgeek
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:36:54.000Z" title="Wed Jan 07 2026 02:36:54 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">Git æŸ¥è¯¢ Tag åˆ—è¡¨.md</h2>
<ul>
<li>å¾ˆå¥‡æ€ªï¼ŒTortoiseGit å’Œ SourceTree æ€ä¹ˆéƒ½æ²¡æœ‰ç›´è§‚å±•ç¤ºåŒºåˆ†è¿œç¨‹å’Œæœ¬åœ° Tag çš„åŠŸèƒ½</li>
</ul>
<h3 data-id="heading-1">æŸ¥è¯¢è¿œç¨‹ Tag</h3>
<ul>
<li>è¿‡æ»¤å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Git Bash</span>
git ls-remote --tags origin | grep -i <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># Cmd</span>
git ls-remote --tags origin | findstr /i <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># PowerShell</span>
git ls-remote --tags origin | Select-String <span class="hljs-string">"release_"</span>
</code></pre>
<ul>
<li>åŒºåˆ†å¤§å°å†™</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Git Bash</span>
git ls-remote --tags origin | grep <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># Cmd</span>
git ls-remote --tags origin | findstr <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># PowerShell</span>
git ls-remote --tags origin | Select-String -CaseSensitive <span class="hljs-string">"release_"</span>
</code></pre>
<h3 data-id="heading-2">æŸ¥è¯¢æœ¬åœ° Tag</h3>
<ul>
<li>è¿‡æ»¤å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Git Bash</span>
git show-ref --tags  |  grep -i <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># Cmd</span>
git show-ref --tags  |  findstr /i <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># PowerShell</span>
git show-ref --tags  |  Select-String <span class="hljs-string">"release_"</span>
</code></pre>
<ul>
<li>åŒºåˆ†å¤§å°å†™</li>
</ul>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># Git Bash</span>
git show-ref --tags  |  grep <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># Cmd</span>
git show-ref --tags  |  findstr <span class="hljs-string">"release_"</span>
<span class="hljs-comment"># PowerShell</span>
git show-ref --tags  |  Select-String -CaseSensitive <span class="hljs-string">"release_"</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vueå¼€å‘å¿…è€ƒï¼šdefineComponentä¸defineAsyncComponentï¼Œä½ çœŸçš„æŒæ¡å—ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592152708250845222</link>    <guid>https://juejin.cn/post/7592152708250845222</guid>    <pubDate>2026-01-07T02:39:09.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592152708250845222" data-draft-id="7592147054786674739" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vueå¼€å‘å¿…è€ƒï¼šdefineComponentä¸defineAsyncComponentï¼Œä½ çœŸçš„æŒæ¡å—ï¼Ÿ"/> <meta itemprop="keywords" content="å‰ç«¯,Vue.js"/> <meta itemprop="datePublished" content="2026-01-07T02:39:09.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‰ç«¯å¤§é±¼"/> <meta itemprop="url" content="https://juejin.cn/user/395479916219517"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vueå¼€å‘å¿…è€ƒï¼šdefineComponentä¸defineAsyncComponentï¼Œä½ çœŸçš„æŒæ¡å—ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/395479916219517/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‰ç«¯å¤§é±¼
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:39:09.000Z" title="Wed Jan 07 2026 02:39:09 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯å‰ç«¯å¤§é±¼ã€‚ä»Šå¤©èŠç‚¹å®åœ¨çš„â€”â€”Vue 3é‡Œä¸¤ä¸ªåå­—å¾ˆåƒä½†ç”¨é€”å®Œå…¨ä¸åŒçš„å‡½æ•°ï¼š<code>defineComponent</code>å’Œ<code>defineAsyncComponent</code>ã€‚</p>
<p>ä½ æ˜¯ä¸æ˜¯ä¹Ÿæ›¾ç»åœ¨ä»£ç é‡Œè§è¿‡å®ƒä»¬ï¼Œç„¶åå¿ƒé‡Œå˜€å’•ï¼šâ€œè¿™ä¿©è´§æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæˆ‘è¯¥ç”¨å“ªä¸ªï¼Ÿâ€</p>
<p>åˆ«æ€¥ï¼Œä»Šå¤©æˆ‘ç”¨æœ€ç›´ç™½çš„è¯ç»™ä½ è®²æ˜ç™½ã€‚</p>
<hr/>
<h2 data-id="heading-0">å…ˆçœ‹åå­—ï¼Œå…¶å®å·²ç»å‰§é€äº†</h2>
<p><strong><code>defineComponent</code></strong> - <strong>å®šä¹‰</strong>ç»„ä»¶<br/>
<strong><code>defineAsyncComponent</code></strong> - å®šä¹‰<strong>å¼‚æ­¥</strong>ç»„ä»¶</p>
<p>åå­—å·²ç»å¾ˆæ˜æ˜¾äº†å¯¹ä¸å¯¹ï¼Ÿä¸€ä¸ªæ˜¯æ™®é€šç»„ä»¶çš„â€œèº«ä»½è¯â€ï¼Œä¸€ä¸ªæ˜¯éœ€è¦â€œç­‰ä¼šå„¿å†åŠ è½½â€ç»„ä»¶çš„ç‰¹æ®Šé€šè¡Œè¯ã€‚</p>
<hr/>
<h2 data-id="heading-1">defineComponentï¼šæ¯ä¸ªç»„ä»¶çš„â€œå‡ºç”Ÿè¯æ˜â€</h2>
<p>å’±ä»¬å…ˆè¯´è¯´ä½ å¤©å¤©åœ¨ç”¨çš„<code>defineComponent</code>ã€‚</p>
<p><strong>å®ƒå°±æ˜¯ä¸ªç™»è®°å¤„</strong>ã€‚ä½ å†™çš„æ¯ä¸ªVueç»„ä»¶ï¼Œéƒ½éœ€è¦åœ¨å®ƒè¿™é‡Œâ€œç™»è®°æ³¨å†Œâ€ï¼Œå‘Šè¯‰Vueï¼šâ€œå˜¿ï¼Œè¿™æ˜¯ä¸ªæ­£ç»ç»„ä»¶ï¼Œç»™ä¸ªåˆæ³•èº«ä»½ã€‚â€</p>
<h3 data-id="heading-2">ä¸¤ç§å¸¸è§å†™æ³•</h3>
<p><strong>ä¼ ç»Ÿå†™æ³•ï¼ˆç°åœ¨ç”¨å¾—å°‘äº†ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineComponent</span>({
  <span class="hljs-attr">name</span>: <span class="hljs-string">'MyButton'</span>,
  <span class="hljs-attr">props</span>: { <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> },
  <span class="hljs-title function_">setup</span>(<span class="hljs-params">props</span>) {
    <span class="hljs-comment">// ä½ çš„é€»è¾‘</span>
    <span class="hljs-keyword">return</span> { <span class="hljs-comment">/* è¿”å›ç»™æ¨¡æ¿ç”¨çš„ä¸œè¥¿ */</span> }
  }
})
</code></pre>
<p><strong>ç°ä»£å†™æ³•ï¼ˆ95%é¡¹ç›®éƒ½åœ¨ç”¨ï¼‰ï¼š</strong></p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-comment">// æ³¨æ„ï¼è¿™é‡Œæ²¡æœ‰æ˜¾å¼è°ƒç”¨ defineComponent</span>
<span class="hljs-comment">// ä½†Vueç¼–è¯‘å™¨åœ¨èƒŒåå¸®ä½ è°ƒç”¨äº†</span>

<span class="hljs-title function_">defineProps</span>({ <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span> })
<span class="hljs-comment">// ç›´æ¥å†™é€»è¾‘ï¼Œæ¸…çˆ½ï¼</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<blockquote>
<p><strong>é‡è¦çŸ¥è¯†ç‚¹</strong>ï¼šå½“ä½ ç”¨<code>&lt;script setup&gt;</code>æ—¶ï¼Œè™½ç„¶æ²¡å†™<code>defineComponent</code>ï¼Œä½†Vueç¼–è¯‘å™¨åœ¨æ‰“åŒ…æ—¶<strong>è‡ªåŠ¨ç»™ä½ åŠ ä¸Šäº†</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-3">å®ƒä¸»è¦å¹²ä»€ä¹ˆç”¨ï¼Ÿ</h3>
<ol>
<li><strong>ç»™TypeScriptæä¾›ç±»å‹æç¤º</strong>ï¼ˆæœ€é‡è¦çš„åŠŸèƒ½ï¼‰</li>
<li>ç»Ÿä¸€ç»„ä»¶å®šä¹‰è§„èŒƒ</li>
</ol>
<p>è¯´ç™½äº†ï¼Œ<code>defineComponent</code>å°±æ˜¯ç»„ä»¶çš„<strong>åŸºç¡€å»ºè®¾</strong>ï¼Œæ²¡æœ‰å®ƒï¼Œä½ çš„ç»„ä»¶åœ¨Vueä¸–ç•Œé‡Œå°±æ˜¯â€œé»‘æˆ·â€ã€‚</p>
<hr/>
<h2 data-id="heading-4">defineAsyncComponentï¼šæ€§èƒ½ä¼˜åŒ–çš„â€œç§˜å¯†æ­¦å™¨â€</h2>
<p>ç°åœ¨æ¥èŠèŠä»Šå¤©çš„ä¸»è§’â€”â€”<code>defineAsyncComponent</code>ã€‚</p>
<p><strong>è¿™æ˜¯èƒ½è®©ä½ çš„åº”ç”¨åŠ è½½é€Ÿåº¦ç¿»å€çš„å®¶ä¼™ã€‚</strong></p>
<h3 data-id="heading-5">å®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ</h3>
<p>æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼šä½ çš„ç”µå•†ç½‘ç«™æœ‰ä¸ªâ€œç”¨æˆ·è®¢å•åˆ†æâ€é¡µé¢ï¼Œé‡Œé¢ç”¨äº†ä¸€ä¸ªè¶…çº§å¤æ‚çš„å›¾è¡¨åº“ï¼Œä»£ç æœ‰500KBã€‚</p>
<p>å¦‚æœç”¨æˆ·åªæ˜¯æ¥é¦–é¡µçœ‹å•†å“ï¼Œ<strong>ä¸ºä»€ä¹ˆè¦æŠŠå›¾è¡¨åº“çš„ä»£ç ä¹Ÿä¸€èµ·ä¸‹è½½ä¸‹æ¥ï¼Ÿ</strong></p>
<p>è¿™å°±æ˜¯<code>defineAsyncComponent</code>è¦è§£å†³çš„é—®é¢˜ï¼š<strong>â€œä½ éœ€è¦çš„æ—¶å€™ï¼Œæˆ‘å†ç»™ä½ åŠ è½½ã€‚â€</strong></p>
<h3 data-id="heading-6">åŸºæœ¬ç”¨æ³•ï¼šç®€å•åˆ°ä¸å¯æ€è®®</h3>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> { defineAsyncComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// å°±è¿™ä¹ˆç®€å•ï¼</span>
<span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyChart</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span>
  <span class="hljs-keyword">import</span>(<span class="hljs-string">'./components/HeavyChart.vue'</span>)  <span class="hljs-comment">// è¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ä»£ç å—</span>
)
</code></pre>
<p>ç”¨äº†è¿™ä¸ªï¼Œ<code>HeavyChart</code>ç»„ä»¶ä¼šè¢«æ‰“åŒ…æˆ<strong>ç‹¬ç«‹çš„æ–‡ä»¶</strong>ï¼Œåªæœ‰å½“ä½ çœŸæ­£è¦ç”¨å®ƒçš„æ—¶å€™ï¼Œæµè§ˆå™¨æ‰ä¼šå»ä¸‹è½½è¿™ä¸ªæ–‡ä»¶ã€‚</p>
<h3 data-id="heading-7">é«˜çº§ç”¨æ³•ï¼šç»™ç”¨æˆ·æ›´å¥½çš„ä½“éªŒ</h3>
<p>æ›´ä¸“ä¸šçš„ç”¨æ³•å¯ä»¥é…ç½®åŠ è½½çŠ¶æ€ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncPopup</span> = <span class="hljs-title function_">defineAsyncComponent</span>({
  <span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'./ExpensivePopup.vue'</span>),
  <span class="hljs-attr">loadingComponent</span>: <span class="hljs-title class_">LoadingSkeleton</span>,    <span class="hljs-comment">// åŠ è½½æ—¶æ˜¾ç¤ºéª¨æ¶å±</span>
  <span class="hljs-attr">errorComponent</span>: <span class="hljs-title class_">ErrorDisplay</span>,         <span class="hljs-comment">// åŠ è½½å¤±è´¥æ˜¾ç¤ºé”™è¯¯æç¤º</span>
  <span class="hljs-attr">delay</span>: <span class="hljs-number">200</span>,                           <span class="hljs-comment">// å»¶è¿Ÿ200mså†æ˜¾ç¤ºloading</span>
  <span class="hljs-attr">timeout</span>: <span class="hljs-number">3000</span>                         <span class="hljs-comment">// åŠ è½½è¶…æ—¶æ—¶é—´ï¼ˆ3ç§’ï¼‰</span>
})
</code></pre>
<h3 data-id="heading-8">å®é™…é¡¹ç›®ä¸­æœ€å¸¸è§çš„ç”¨æ³•</h3>
<p>å…¶å®ä½ <strong>å¯èƒ½å·²ç»åœ¨ç”¨</strong>å¼‚æ­¥ç»„ä»¶äº†ï¼Œåªæ˜¯æ²¡æ„è¯†åˆ°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// åœ¨Vue Routerè·¯ç”±é…ç½®é‡Œ</span>
<span class="hljs-keyword">const</span> routes = [
  {
    <span class="hljs-attr">path</span>: <span class="hljs-string">'/dashboard'</span>,
    <span class="hljs-comment">// çœ‹ï¼è¿™å°±æ˜¯å¼‚æ­¥ç»„ä»¶åŠ è½½</span>
    <span class="hljs-attr">component</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/views/Dashboard.vue'</span>)
  }
]
</code></pre>
<p>Vue Routerçš„<code>import()</code>è¯­æ³•ï¼Œåº•å±‚å°±æ˜¯ç”¨çš„<code>defineAsyncComponent</code>ã€‚</p>
<hr/>
<h2 data-id="heading-9">ä¸€å›¾çœ‹æ‡‚åŒºåˆ«</h2>






























<table><thead><tr><th>æ–¹é¢</th><th>defineComponent</th><th>defineAsyncComponent</th></tr></thead><tbody><tr><td><strong>åšä»€ä¹ˆ</strong></td><td>ç»™ç»„ä»¶ä¸Šæˆ·å£</td><td>ç»™ç»„ä»¶å‘â€œæŒ‰éœ€åŠ è½½â€è®¸å¯è¯</td></tr><tr><td><strong>åŠ è½½æ–¹å¼</strong></td><td>è·Ÿä¸»åŒ…ä¸€èµ·åŠ è½½</td><td>ç‹¬ç«‹åˆ†åŒ…ï¼Œç”¨æ—¶æ‰åŠ è½½</td></tr><tr><td><strong>æ€§èƒ½å½±å“</strong></td><td>å¢åŠ ä¸»åŒ…ä½“ç§¯</td><td><strong>å‡å°‘é¦–å±ä½“ç§¯ï¼ŒåŠ å¿«åŠ è½½</strong></td></tr><tr><td><strong>ä½ ç”¨å¾—å¤šå—</strong></td><td>å¤©å¤©ç”¨ï¼ˆæˆ–é—´æ¥ç”¨ï¼‰</td><td>è·¯ç”±æ‡’åŠ è½½æ—¶å°±åœ¨ç”¨</td></tr></tbody></table>
<hr/>
<h2 data-id="heading-10">ä»€ä¹ˆæ—¶å€™è¯¥ç”¨å“ªä¸ªï¼Ÿ</h2>
<p>è®°ä½è¿™ä¸ªç®€å•çš„åŸåˆ™ï¼š</p>
<h3 data-id="heading-11">ç”¨ defineComponentï¼ˆæˆ–<code>&lt;script setup&gt;</code>ï¼‰</h3>
<p><strong>æ‰€æœ‰å¸¸è§„ç»„ä»¶éƒ½ç”¨è¿™ä¸ª</strong>ï¼Œè¿™æ˜¯é»˜è®¤é€‰æ‹©ã€‚</p>
<h3 data-id="heading-12">ç”¨ defineAsyncComponent</h3>
<p>åœ¨ä»¥ä¸‹ä¸‰ç§æƒ…å†µç”¨å®ƒï¼š</p>
<ol>
<li><strong>è·¯ç”±é¡µé¢ç»„ä»¶</strong>ï¼ˆå¿…é¡»ç”¨ï¼è¿™æ˜¯æ€§èƒ½ä¼˜åŒ–åº•çº¿ï¼‰</li>
<li><strong>ä½“ç§¯å¤§çš„éé¦–å±ç»„ä»¶</strong>ï¼ˆå¦‚å›¾è¡¨ã€ç¼–è¾‘å™¨ã€PDFé¢„è§ˆï¼‰</li>
<li><strong>ç”¨æˆ·æ“ä½œæ‰æ˜¾ç¤ºçš„ç»„ä»¶</strong>ï¼ˆå¦‚å¤æ‚å¼¹çª—ã€ä¾§è¾¹æ ï¼‰</li>
</ol>
<hr/>
<h2 data-id="heading-13">æˆ‘é¡¹ç›®é‡Œçš„çœŸå®æ¡ˆä¾‹</h2>
<p>ä¹‹å‰æ¥æ‰‹ä¸€ä¸ªå¤æ‚çš„åå°ç®¡ç†ç³»ç»Ÿï¼Œé¦–å±åŠ è½½è¦<strong>5ç§’å¤š</strong>ã€‚æˆ‘åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>æŠŠæ‰€æœ‰è·¯ç”±ç»„ä»¶æ”¹ä¸ºå¼‚æ­¥åŠ è½½</li>
<li>æŠŠæŠ¥è¡¨é¡µçš„å¤æ‚å›¾è¡¨ç»„ä»¶å¼‚æ­¥åŠ è½½</li>
<li>æŠŠâ€œå¸®åŠ©æ–‡æ¡£â€å¼¹çª—å¼‚æ­¥åŠ è½½</li>
</ol>
<p><strong>æ”¹é€ åï¼Œé¦–å±åŠ è½½é™åˆ°2ç§’</strong>ã€‚ç”¨æˆ·æ‰“å¼€ç³»ç»Ÿå°±èƒ½æ“ä½œï¼Œå›¾è¡¨å’Œæ–‡æ¡£ç­‰éœ€è¦æ—¶æ‰åŠ è½½ã€‚</p>
<p><strong>è¿™å°±æ˜¯å¼‚æ­¥ç»„ä»¶çš„å¨åŠ›</strong>â€”â€”ä¸æ˜¯è®©ä»£ç è·‘æ›´å¿«ï¼Œè€Œæ˜¯è®©æµè§ˆå™¨<strong>å°‘å¹²æ´»</strong>ã€‚</p>
<hr/>
<h2 data-id="heading-14">ä¸€ä¸ªå®¹æ˜“è¸©çš„å‘</h2>
<p>æ³¨æ„ï¼å¼‚æ­¥ç»„ä»¶<strong>é»˜è®¤æ²¡æœ‰åŒ…è£¹<code>&lt;Suspense&gt;</code></strong>ã€‚å¦‚æœä½ éœ€è¦åœ¨åŠ è½½æ—¶æ˜¾ç¤ºfallbackå†…å®¹ï¼Œè¦æ‰‹åŠ¨å¤„ç†ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">Suspense</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">default</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">AsyncUserProfile</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">fallback</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>åŠ è½½ä¸­...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">Suspense</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>
</code></pre>
<p>æˆ–è€…ç›´æ¥åœ¨<code>defineAsyncComponent</code>é‡Œé…<code>loadingComponent</code>ã€‚</p>
<hr/>
<h2 data-id="heading-15">æ€»ç»“</h2>
<ul>
<li><strong><code>defineComponent</code></strong> æ˜¯<strong>å®šä¹‰</strong>ç»„ä»¶ï¼Œç»™ç»„ä»¶åˆæ³•èº«ä»½</li>
<li><strong><code>defineAsyncComponent</code></strong> æ˜¯<strong>ä¼˜åŒ–åŠ è½½</strong>ç»„ä»¶ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
</ul>
<p>å®ƒä»¬ä¿©çš„å…³ç³»å°±åƒï¼š</p>
<ul>
<li><code>defineComponent</code> = é€ ä¸€è¾†è½¦</li>
<li><code>defineAsyncComponent</code> = å†³å®šè¿™è¾†è½¦æ˜¯éšæ—¶èƒ½å¼€ï¼Œè¿˜æ˜¯éœ€è¦æ—¶æ‰ä»è½¦åº“å–å‡ºæ¥</li>
</ul>
<p>åœ¨ç°åœ¨çš„å‰ç«¯å¼€å‘ä¸­ï¼Œ<strong>è·¯ç”±çº§åˆ«çš„å¼‚æ­¥åŠ è½½å·²ç»æ˜¯æ ‡é…</strong>ã€‚å¦‚æœä½ çš„é¡¹ç›®è¿˜æ²¡åšè¿™ä¸ªä¼˜åŒ–ï¼Œä»Šå¤©ä¸‹ç­å‰å°±èƒ½åŠ ä¸Šï¼Œç«‹ç«¿è§å½±ã€‚</p>
<hr/>
<p><strong>ä»Šæ—¥æ€è€ƒï¼š</strong><br/>
ä½ çš„é¡¹ç›®é‡Œæœ‰å“ªäº›â€œé‡å‹â€ç»„ä»¶å¯ä»¥åšæˆå¼‚æ­¥åŠ è½½ï¼Ÿåœ¨è¯„è®ºåŒºåˆ†äº«ä½ çš„ä¼˜åŒ–æ€è·¯å§ã€‚</p>
<p>å¦‚æœè§‰å¾—æœ‰ç”¨ï¼Œè½¬å‘ç»™ä½ çš„å›¢é˜Ÿå°ä¼™ä¼´ï¼Œä¸€èµ·æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
<hr/>
<p>å…³æ³¨æˆ‘çš„å…¬ä¼—å·" <strong>å¤§å‰ç«¯å†é™©è®°</strong>"ï¼ŒæŒæ¡æ›´å¤šå‰ç«¯å¼€å‘å¹²è´§å§¿åŠ¿ï¼</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ã€èŠ‚ç‚¹ã€‘[NormalStrengthèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨]]></title>    <link>https://juejin.cn/post/7592152708250910758</link>    <guid>https://juejin.cn/post/7592152708250910758</guid>    <pubDate>2026-01-07T02:44:10.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592152708250910758" data-draft-id="7592176349713170470" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ã€èŠ‚ç‚¹ã€‘[NormalStrengthèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨"/> <meta itemprop="keywords" content="æ¸¸æˆå¼€å‘,å›¾å½¢å­¦,Unity3D"/> <meta itemprop="datePublished" content="2026-01-07T02:44:10.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SmalBox"/> <meta itemprop="url" content="https://juejin.cn/user/2218166695237532"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ã€èŠ‚ç‚¹ã€‘[NormalStrengthèŠ‚ç‚¹]åŸç†è§£æä¸å®é™…åº”ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2218166695237532/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SmalBox
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:44:10.000Z" title="Wed Jan 07 2026 02:44:10 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong></p>
</blockquote>
<h2 data-id="heading-0">èŠ‚ç‚¹åŠŸèƒ½æ¦‚è¿°</h2>
<p>NormalStrengthèŠ‚ç‚¹æ˜¯Unity URP Shader Graphä¸­ç”¨äºç²¾ç¡®æ§åˆ¶æ³•çº¿è´´å›¾å¼ºåº¦çš„æ ¸å¿ƒå·¥å…·ã€‚è¯¥èŠ‚ç‚¹é€šè¿‡<strong>Strength</strong>å‚æ•°çº¿æ€§è°ƒèŠ‚æ³•çº¿è´´å›¾çš„å‡¹å‡¸è¡¨ç°ï¼Œåœ¨ä¿æŒæ³•çº¿å‘é‡ç‰©ç†æ­£ç¡®æ€§çš„å‰æä¸‹å®ç°ç»†èŠ‚çš„åŠ¨æ€è°ƒæ•´ã€‚å…¶æ ¸å¿ƒä»·å€¼ä½“ç°åœ¨ï¼š</p>
<ul>
<li><strong>å¼ºåº¦æ— æŸæ§åˆ¶</strong>ï¼šå½“Strengthå€¼ä¸º1æ—¶å®Œå…¨ä¿ç•™åŸå§‹æ³•çº¿ä¿¡æ¯ï¼Œä¸º0æ—¶è¿”å›ç©ºç™½æ³•çº¿è´´å›¾</li>
<li><strong>å…‰ç…§å…¼å®¹æ€§</strong>ï¼šé€šè¿‡æ•°å­¦å˜æ¢ä¿æŒæ³•çº¿å‘é‡å½’ä¸€åŒ–ï¼Œç¡®ä¿å…‰ç…§è®¡ç®—å‡†ç¡®æ€§</li>
<li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šé¿å…é‡æ–°è®¡ç®—æ³•çº¿è´´å›¾ï¼Œä»…é€šè¿‡å¼ºåº¦å‚æ•°å®ç°åŠ¨æ€æ•ˆæœ</li>
<li><strong>å®æ—¶è°ƒèŠ‚èƒ½åŠ›</strong>ï¼šæ”¯æŒåœ¨è¿è¡Œæ—¶åŠ¨æ€è°ƒæ•´å¼ºåº¦å‚æ•°ï¼Œä¸ºæ¸¸æˆä¸­çš„åŠ¨æ€æè´¨æ•ˆæœæä¾›å¯èƒ½</li>
</ul>
<h2 data-id="heading-1">ç«¯å£ä¸å‚æ•°è¯¦è§£</h2>
<p><img src="https://docs.unity.cn/cn/Packages-cn/com.unity.shadergraph@14.0/manual/images/NormalStrengthNodeThumb.png" alt="" loading="lazy"/></p>
<h3 data-id="heading-2">ç«¯å£é…ç½®</h3>

































<table><thead><tr><th>ç«¯å£åç§°</th><th>æ–¹å‘</th><th>æ•°æ®ç±»å‹</th><th>ç»‘å®š</th><th>æè¿°</th></tr></thead><tbody><tr><td>In</td><td>è¾“å…¥</td><td>Vector 3</td><td>æ— </td><td>è¾“å…¥æ³•çº¿å‘é‡</td></tr><tr><td>Strength</td><td>è¾“å…¥</td><td>Float</td><td>æ— </td><td>å¼ºåº¦è°ƒèŠ‚å€¼ï¼ˆ0-1èŒƒå›´ï¼‰</td></tr><tr><td>Out</td><td>è¾“å‡º</td><td>Vector 3</td><td>æ— </td><td>è°ƒæ•´åçš„æ³•çº¿å‘é‡</td></tr></tbody></table>
<h3 data-id="heading-3">å‚æ•°ç‰¹æ€§</h3>
<ul>
<li><strong>å¼ºåº¦èŒƒå›´</strong>ï¼š0-1çš„çº¿æ€§åŒºé—´ï¼Œ0è¡¨ç¤ºå®Œå…¨å¹³å¦è¡¨é¢ï¼Œ1è¡¨ç¤ºåŸå§‹æ³•çº¿å¼ºåº¦</li>
<li><strong>æ•°å­¦åŸç†</strong>ï¼šé€šè¿‡<code>In.rg * Strength</code>ä¿®æ”¹XYåˆ†é‡ï¼ˆåˆ‡çº¿ç©ºé—´ä¸­çš„æ°´å¹³åç§»ï¼‰ï¼ŒåŒæ—¶ç”¨<code>lerp(1, In.b, saturate(Strength))</code>ä¿æŒZåˆ†é‡çš„ç¨³å®šæ€§</li>
<li><strong>ç‰©ç†æ­£ç¡®æ€§</strong>ï¼šç¡®ä¿è¾“å‡ºå‘é‡å§‹ç»ˆä¸ºå•ä½é•¿åº¦ï¼Œé¿å…å…‰ç…§è®¡ç®—å¼‚å¸¸</li>
<li><strong>æ’å€¼ç²¾åº¦</strong>ï¼šä½¿ç”¨lerpå‡½æ•°ç¡®ä¿åœ¨å¼ºåº¦å˜åŒ–æ—¶Zåˆ†é‡çš„å¹³æ»‘è¿‡æ¸¡ï¼Œé¿å…è§†è§‰çªå˜</li>
</ul>
<h2 data-id="heading-4">æŠ€æœ¯åŸç†è§£æ</h2>
<h3 data-id="heading-5">æ•°å­¦å…¬å¼æ¨å¯¼</h3>
<p>è¯¥èŠ‚ç‚¹çš„æ ¸å¿ƒè¿ç®—å¯è¡¨ç¤ºä¸ºï¼š</p>
<p><code>Out = (In.rg * Strength, lerp(1, In.b, saturate(Strength)))</code></p>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li><strong>In.rg</strong>ï¼šæ³•çº¿å‘é‡çš„XYåˆ†é‡ï¼ˆåˆ‡çº¿ç©ºé—´ä¸­çš„å‡¹å‡¸æ–¹å‘ï¼‰</li>
<li><strong>Strength</strong>ï¼šå¼ºåº¦ç³»æ•°ï¼Œæ§åˆ¶å‡¹å‡¸ç¨‹åº¦</li>
<li><strong>lerpå‡½æ•°</strong>ï¼šåœ¨åŸå§‹Zåˆ†é‡å’Œ1ä¹‹é—´æ’å€¼ï¼Œä¿æŒå‘é‡é•¿åº¦</li>
<li><strong>saturateå‡½æ•°</strong>ï¼šç¡®ä¿å¼ºåº¦å€¼å§‹ç»ˆåœ¨æœ‰æ•ˆèŒƒå›´å†…ï¼Œé˜²æ­¢æ•°å€¼æº¢å‡º</li>
</ul>
<h3 data-id="heading-6">ç”Ÿæˆä»£ç è§£æ</h3>
<p>Unityæä¾›çš„HLSLå®ç°å±•ç¤ºäº†å…¶åº•å±‚é€»è¾‘ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-type">void</span> <span class="hljs-title function_">Unity_NormalStrength_float</span><span class="hljs-params">(float3 In, <span class="hljs-type">float</span> Strength, out float3 Out)</span>
{
    Out = {precision}<span class="hljs-number">3</span>(In.rg * Strength, lerp(<span class="hljs-number">1</span>, In.b, saturate(Strength)));
}
</code></pre>
<p>è¯¥ä»£ç é€šè¿‡<code>precision</code>ä¿®é¥°ç¬¦ç¡®ä¿æµ®ç‚¹ç²¾åº¦ï¼Œ<code>saturate(Strength)</code>å°†å¼ºåº¦é™åˆ¶åœ¨0-1èŒƒå›´ï¼Œé˜²æ­¢æ•°å€¼æº¢å‡ºã€‚åœ¨å®é™…ç¼–è¯‘ä¸­ï¼Œ<code>precision</code>ä¼šæ ¹æ®ç›®æ ‡å¹³å°è‡ªåŠ¨é€‰æ‹©halfæˆ–floatç²¾åº¦ï¼Œç¡®ä¿æ€§èƒ½ä¸è´¨é‡çš„å¹³è¡¡ã€‚</p>
<h2 data-id="heading-7">åº”ç”¨åœºæ™¯ä¸å®æˆ˜æ¡ˆä¾‹</h2>
<h3 data-id="heading-8">æè´¨ç»†èŠ‚åŠ¨æ€è°ƒèŠ‚</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ­¦å™¨ç£¨æŸç¨‹åº¦å¯è§†åŒ–</p>
<ul>
<li>é€šè¿‡åŠ¨ç”»æ§åˆ¶Strengthå‚æ•°ï¼Œå®ç°ä»å´­æ–°åˆ°ç£¨æŸçš„æ¸å˜æ•ˆæœ</li>
<li>é…åˆæ³•çº¿æ··åˆèŠ‚ç‚¹ï¼Œç»„åˆä¸åŒç£¨æŸç¨‹åº¦çš„æ³•çº¿è´´å›¾</li>
<li>ç»“åˆæ—¶é—´è½´å·¥å…·ï¼Œåˆ›å»ºåŸºäºä½¿ç”¨æ—¶é—´çš„è‡ªåŠ¨ç£¨æŸæ•ˆæœ</li>
</ul>
<h3 data-id="heading-9">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h3>
<p><strong>åœºæ™¯</strong>ï¼šç§»åŠ¨ç«¯LODåˆ‡æ¢</p>
<ul>
<li>åœ¨ä½ç»†èŠ‚çº§åˆ«æ—¶é™ä½Strengthå€¼ï¼Œå‡å°‘æ³•çº¿è®¡ç®—é‡</li>
<li>ç»“åˆURPçš„LODç³»ç»Ÿï¼Œå®ç°åŠ¨æ€æ€§èƒ½ä¼˜åŒ–</li>
<li>é’ˆå¯¹ä¸åŒè®¾å¤‡æ€§èƒ½è‡ªåŠ¨è°ƒæ•´å¼ºåº¦å‚æ•°ï¼Œç¡®ä¿æµç•…ä½“éªŒ</li>
</ul>
<h3 data-id="heading-10">åŠ¨æ€å˜å½¢æ•ˆæœ</h3>
<p><strong>åœºæ™¯</strong>ï¼šè§’è‰²è‚Œè‚‰è†¨èƒ€åŠ¨ç”»</p>
<ul>
<li>ä½¿ç”¨æ—¶é—´èŠ‚ç‚¹é©±åŠ¨Strengthå‚æ•°ï¼Œåˆ›å»ºè‚Œè‚‰è†¨èƒ€çš„è§†è§‰æ•ˆæœ</li>
<li>é…åˆé¡¶ç‚¹åŠ¨ç”»ï¼Œå®ç°æ›´çœŸå®çš„ç‰©ç†å˜å½¢</li>
<li>ç»“åˆè§’è‰²çŠ¶æ€ï¼ˆå¦‚å—ä¼¤ã€å‘åŠ›ï¼‰åŠ¨æ€è°ƒæ•´ä¸åŒéƒ¨ä½çš„æ³•çº¿å¼ºåº¦</li>
</ul>
<h3 data-id="heading-11">ç¯å¢ƒäº¤äº’æ•ˆæœ</h3>
<p><strong>åœºæ™¯</strong>ï¼šæ¹¿æ¶¦è¡¨é¢æ•ˆæœ</p>
<ul>
<li>æ ¹æ®ç¯å¢ƒæ¹¿åº¦åŠ¨æ€å¢å¼ºæ³•çº¿å¼ºåº¦ï¼Œæ¨¡æ‹Ÿæ°´ç ç§¯èšæ•ˆæœ</li>
<li>é…åˆåå°„ç‡è°ƒæ•´ï¼Œå®ç°å®Œæ•´çš„æ¹¿æ¶¦æè´¨è¡¨ç°</li>
<li>ä½¿ç”¨è·ç¦»åœºæ§åˆ¶å¼ºåº¦å˜åŒ–ï¼Œå®ç°å±€éƒ¨æ¹¿æ¶¦æ•ˆæœ</li>
</ul>
<h2 data-id="heading-12">ä½¿ç”¨æŠ€å·§ä¸æ³¨æ„äº‹é¡¹</h2>
<h3 data-id="heading-13">å¼ºåº¦ä¸å…‰ç…§å…³ç³»</h3>
<ul>
<li>å½“Strengthå€¼è¶…è¿‡1æ—¶ï¼Œæ³•çº¿å‘é‡å¯èƒ½å¤±å»å½’ä¸€åŒ–ç‰¹æ€§ï¼Œå¯¼è‡´å…‰ç…§å¼‚å¸¸</li>
<li>å»ºè®®ä½¿ç”¨<code>saturate(Strength)</code>ç¡®ä¿å¼ºåº¦åœ¨0-1èŒƒå›´å†…</li>
<li>åœ¨HDRPç®¡çº¿ä¸­ï¼Œéœ€è¦è€ƒè™‘å¼ºåº¦å‚æ•°ä¸ç‰©ç†å…‰ç…§æ¨¡å‹çš„å…¼å®¹æ€§</li>
</ul>
<h3 data-id="heading-14">ä¸å…¶ä»–èŠ‚ç‚¹é…åˆ</h3>
<ul>
<li><strong>æ³•çº¿æ··åˆèŠ‚ç‚¹</strong>ï¼šç»„åˆå¤šä¸ªæ³•çº¿è´´å›¾æ—¶ï¼ŒNormalStrengthå¯æ§åˆ¶å„è´´å›¾çš„è´¡çŒ®æ¯”ä¾‹</li>
<li><strong>é«˜åº¦è½¬æ³•çº¿èŠ‚ç‚¹</strong>ï¼šç”¨äºç¨‹åºåŒ–ç”Ÿæˆæ³•çº¿æ—¶ï¼Œè°ƒæ•´é«˜åº¦å›¾çš„å‡¹å‡¸å¼ºåº¦</li>
<li><strong>æ—¶é—´èŠ‚ç‚¹</strong>ï¼šåˆ›å»ºåŠ¨æ€å˜åŒ–çš„æ³•çº¿æ•ˆæœï¼Œå¦‚æ°´é¢æ³¢çº¹ã€å¸ƒæ–™é£˜åŠ¨</li>
</ul>
<h3 data-id="heading-15">å¸¸è§é—®é¢˜è§£å†³</h3>
<ul>
<li><strong>å…‰ç…§é—ªçƒ</strong>ï¼šæ£€æŸ¥Strengthå€¼æ˜¯å¦è¶…å‡ºæœ‰æ•ˆèŒƒå›´ï¼Œæˆ–æ³•çº¿è´´å›¾æ˜¯å¦æŸå</li>
<li><strong>æ€§èƒ½ä¸‹é™</strong>ï¼šé¿å…åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­é¢‘ç¹ä¿®æ”¹Strengthå‚æ•°</li>
<li><strong>è§†è§‰å¼‚å¸¸</strong>ï¼šç¡®ä¿è¾“å…¥æ³•çº¿å‘é‡æ ¼å¼æ­£ç¡®ï¼Œé¿å…åˆ‡çº¿ç©ºé—´è½¬æ¢é”™è¯¯</li>
</ul>
<h3 data-id="heading-16">é«˜çº§åº”ç”¨æŠ€å·§</h3>
<ul>
<li><strong>å¤šå±‚æè´¨èåˆ</strong>ï¼šä½¿ç”¨å¤šä¸ªNormalStrengthèŠ‚ç‚¹åˆ†åˆ«æ§åˆ¶ä¸åŒæè´¨å±‚çš„æ³•çº¿å¼ºåº¦</li>
<li><strong>ç¨‹åºåŒ–å†…å®¹ç”Ÿæˆ</strong>ï¼šç»“åˆå™ªå£°çº¹ç†å’Œå¼ºåº¦å‚æ•°ï¼ŒåŠ¨æ€ç”Ÿæˆå¤æ‚çš„è¡¨é¢ç»†èŠ‚</li>
<li><strong>è‰ºæœ¯é£æ ¼æ§åˆ¶</strong>ï¼šé€šè¿‡éæ ‡å‡†çš„å¼ºåº¦å€¼èŒƒå›´ï¼Œåˆ›é€ ç‹¬ç‰¹çš„è§†è§‰é£æ ¼</li>
</ul>
<h2 data-id="heading-17">æ€»ç»“ä¸æ‹“å±•åº”ç”¨</h2>
<p>NormalStrengthèŠ‚ç‚¹æ˜¯URP Shader Graphä¸­å®ç°æ³•çº¿ç»†èŠ‚æ§åˆ¶çš„åˆ©å™¨ï¼Œå…¶æ ¸å¿ƒä¼˜åŠ¿åœ¨äºï¼š</p>
<ul>
<li>ç²¾ç¡®è°ƒèŠ‚æ³•çº¿å¼ºåº¦è€Œä¸ç ´åç‰©ç†ç‰¹æ€§</li>
<li>ä¸URPæ¸²æŸ“ç®¡çº¿æ— ç¼å…¼å®¹</li>
<li>æ”¯æŒåŠ¨æ€æ•ˆæœå’Œæ€§èƒ½ä¼˜åŒ–</li>
<li>æä¾›è‰ºæœ¯å®¶å‹å¥½çš„å‚æ•°æ§åˆ¶ç•Œé¢</li>
</ul>
<p><strong>æ‹“å±•åº”ç”¨æ–¹å‘</strong>ï¼š</p>
<ul>
<li>ç¯å¢ƒäº¤äº’ï¼šæ ¹æ®è§’è‰²è¿åŠ¨å¼ºåº¦åŠ¨æ€è°ƒæ•´æ³•çº¿ç»†èŠ‚</li>
<li>è‰ºæœ¯é£æ ¼åŒ–ï¼šé€šè¿‡éä¼ ç»Ÿå¼ºåº¦å€¼åˆ›å»ºç‹¬ç‰¹è§†è§‰æ•ˆæœ</li>
<li>è·¨å¹³å°ä¼˜åŒ–ï¼šé’ˆå¯¹ä¸åŒç¡¬ä»¶å¹³å°è°ƒæ•´å¼ºåº¦å‚æ•°</li>
<li>å®æ—¶æ¸²æŸ“åˆ›æ–°ï¼šç»“åˆæœ€æ–°çš„å®æ—¶æ¸²æŸ“æŠ€æœ¯ï¼Œæ¢ç´¢æ³•çº¿å¼ºåº¦åœ¨è™šæ‹Ÿç°å®ã€å¢å¼ºç°å®ç­‰æ–°å…´é¢†åŸŸçš„åº”ç”¨æ½œåŠ›</li>
</ul>
<p>é€šè¿‡åˆç†åˆ©ç”¨è¯¥èŠ‚ç‚¹ï¼Œå¼€å‘è€…å¯ä»¥åœ¨ä¿æŒç‰©ç†æ­£ç¡®æ€§çš„å‰æä¸‹ï¼Œåˆ›å»ºæ›´å…·è¡¨ç°åŠ›å’Œæ€§èƒ½ä¼˜åŒ–çš„æè´¨æ•ˆæœã€‚éšç€å®æ—¶æ¸²æŸ“æŠ€æœ¯çš„ä¸æ–­å‘å±•ï¼ŒNormalStrengthèŠ‚ç‚¹åœ¨æè´¨è¡¨ç°å’Œæ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„é‡è¦æ€§å°†è¿›ä¸€æ­¥æå‡ã€‚</p>
<p><strong>æœªæ¥å‘å±•è¶‹åŠ¿</strong>ï¼š</p>
<ul>
<li>ä¸æœºå™¨å­¦ä¹ æŠ€æœ¯ç»“åˆï¼Œå®ç°æ™ºèƒ½æ³•çº¿å¼ºåº¦è°ƒèŠ‚</li>
<li>æ”¯æŒæ›´å¤æ‚çš„å¤šç»´åº¦å¼ºåº¦æ§åˆ¶</li>
<li>ä¸ç‰©ç†æ¨¡æ‹Ÿç³»ç»Ÿæ·±åº¦é›†æˆï¼Œæä¾›æ›´çœŸå®çš„æè´¨äº¤äº’æ•ˆæœ</li>
</ul>
<hr/>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fblog.csdn.net%2Fchenghai37%2Fcategory_13074589.html%3Ffromshare%3Dblogcolumn%26sharetype%3Dblogcolumn%26sharerId%3D13074589%26sharerefer%3DPC%26sharesource%3Dchenghai37%26sharefrom%3Dfrom_link" target="_blank" title="https://blog.csdn.net/chenghai37/category_13074589.html?fromshare=blogcolumn&amp;sharetype=blogcolumn&amp;sharerId=13074589&amp;sharerefer=PC&amp;sharesource=chenghai37&amp;sharefrom=from_link" ref="nofollow noopener noreferrer">ã€Unity Shader Graph ä½¿ç”¨ä¸ç‰¹æ•ˆå®ç°ã€‘</a><strong>ä¸“æ -ç›´è¾¾</strong>
ï¼ˆæ¬¢è¿<em>ç‚¹èµç•™è¨€</em>æ¢è®¨ï¼Œæ›´å¤šäººåŠ å…¥è¿›æ¥èƒ½æ›´åŠ å®Œå–„è¿™ä¸ªæ¢ç´¢çš„è¿‡ç¨‹ï¼ŒğŸ™ï¼‰</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[é¢å‘å¯è§‚æµ‹æ•°æ®èåˆçš„ Exemplar]]></title>    <link>https://juejin.cn/post/7592133956733108265</link>    <guid>https://juejin.cn/post/7592133956733108265</guid>    <pubDate>2026-01-07T01:39:45.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592133956733108265" data-draft-id="7589564203872616511" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="é¢å‘å¯è§‚æµ‹æ•°æ®èåˆçš„ Exemplar "/> <meta itemprop="keywords" content="åç«¯,ç›‘æ§"/> <meta itemprop="datePublished" content="2026-01-07T01:39:45.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è´§æ‹‰æ‹‰æŠ€æœ¯"/> <meta itemprop="url" content="https://juejin.cn/user/1768489241815070"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            é¢å‘å¯è§‚æµ‹æ•°æ®èåˆçš„ Exemplar 
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1768489241815070/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è´§æ‹‰æ‹‰æŠ€æœ¯
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:39:45.000Z" title="Wed Jan 07 2026 01:39:45 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»20åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€å¯è§‚æµ‹æ€§çš„"æœ€åä¸€å…¬é‡Œ"éš¾é¢˜</h2>
<p>åœ¨å¯è§‚æµ‹æ€§é¢†åŸŸï¼ŒæŒ‡æ ‡ã€æ—¥å¿—ä¸é“¾è·¯æ•°æ®å› å…¶ä¸åŒçš„æ•°æ®ç‰¹æ€§ä¸è®¿é—®æ¨¡å¼ï¼Œé€šå¸¸é‡‡ç”¨å¼‚æ„å­˜å‚¨æ¶æ„ï¼š</p>
<ul>
<li><strong>æ—¶åºæ•°æ®åº“</strong>ï¼ˆå¦‚ Prometheusã€InfluxDBï¼‰æ‰¿è½½æŒ‡æ ‡æ•°æ®ï¼›</li>
<li><strong>æ—¥å¿—å­˜å‚¨</strong>ï¼ˆå¦‚ Elasticsearchã€Lokiï¼‰å¤„ç†æ—¥å¿—æµï¼›</li>
<li><strong>åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ</strong>ï¼ˆå¦‚ Jaegerã€Tempoã€Skwalkingï¼‰ç®¡ç†é“¾è·¯æ•°æ®ã€‚</li>
</ul>
<p>è¿™ç§åŸºäºæ•°æ®ç‰¹æ€§çš„å­˜å‚¨åˆ†å±‚è®¾è®¡è™½èƒ½ä¼˜åŒ–å„è‡ªåœºæ™¯çš„æ€§èƒ½ä¸æˆæœ¬ï¼Œä½†ä¹Ÿå¯¼è‡´äº†è·¨æ•°æ®ç±»å‹å…³è”åˆ†æçš„å›ºæœ‰éšœç¢ã€‚</p>
<p>å½“å‰è´§æ‹‰æ‹‰çš„ Monitor ç³»ç»Ÿå·²å®ç°ä¸‰ç§åŸºç¡€å…³è”èƒ½åŠ›ï¼š</p>
<p>ï¼ˆ1ï¼‰é€šè¿‡åº”ç”¨åç§°+æŒ‡æ ‡ç±»å‹+æ ‡ç­¾ç»„åˆå®ç°æ¡†æ¶<strong>æŒ‡æ ‡ä¸é“¾è·¯</strong>çš„å…³è”æ£€ç´¢ï¼›</p>
<p>ï¼ˆ2ï¼‰ä¾æ‰˜ ClickHouse æ—¥å¿—å¼•æ“åŸç”ŸæŒ‡æ ‡èƒ½åŠ›æ”¯æ’‘ä¸­é—´ä»¶ï¼ˆå¦‚ Kongï¼‰çš„<strong>æŒ‡æ ‡-æ—¥å¿—å…³</strong>è”ï¼›</p>
<p>ï¼ˆ3ï¼‰åŸºäºé¢„è®¾ä¿ç•™å­—æ®µå®Œæˆ<strong>ä¸šåŠ¡</strong> <strong>è®¢å•ä¸é“¾è·¯</strong>çš„å®šå‘æ£€ç´¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/94e4dd90fe5d4b0bbbd5404fce28cab8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=F5SZGJ7t0e56uPGyuzPNlZQuoOg%3D" alt="whiteboard_exported_image (22).png" loading="lazy"/>
ç„¶è€Œï¼Œæ¶æ„è¯„ä¼°è¡¨æ˜ï¼Œåœ¨æŒ‡æ ‡-é“¾è·¯ã€æŒ‡æ ‡-æ—¥å¿—çš„æ ¸å¿ƒèåˆè·¯å¾„ä¸Šï¼Œç°æœ‰æ–¹æ¡ˆçš„å®Œæˆåº¦ä»å­˜åœ¨æ˜¾è‘—æå‡ç©ºé—´ã€‚</p>





























<table><thead><tr><th><strong>æ•°æ®ç»´åº¦</strong></th><th><strong>æ„å»ºå½¢å¼</strong></th><th><strong>æ•°æ®æµ</strong></th><th><strong>å®Œæˆåº¦</strong></th></tr></thead><tbody><tr><td><strong>æŒ‡æ ‡ &amp; æ—¥å¿—</strong></td><td><strong>åŒå‘è·³è½¬</strong></td><td>åœ¨ ck æ—¥å¿—æŒ‡æ ‡çš„çœ‹æ¿ä¸­ï¼Œå¯ä»¥æ ¹æ®ç‚¹å‡»æ›²çº¿æŸ¥çœ‹åˆ°æ—¥å¿—çš„ç»†èŠ‚ï¼›åœ¨åˆ†ææ—¥å¿—æ—¶ï¼Œå¯ä»¥è¿›è¡Œ topã€æ—¶é—´çº¿å›¾ã€é¥¼å›¾ç­‰åˆ†æï¼›</td><td>ç”¨æˆ·éœ€è¦å…ˆä½¿ç”¨ ck æ—¥å¿—æ‰èƒ½å…·å¤‡è¿™ä¸ªèƒ½åŠ›ï¼Œå¯¹ç»å¤§å¤šæ•° vm æŒ‡æ ‡ä¸é€‚ç”¨ï¼›</td></tr><tr><td><strong>æŒ‡æ ‡ &amp; é“¾è·¯</strong></td><td><strong>åŸºäºçº¦å®šçš„æŒ‡æ ‡å•å‘è·³è½¬åˆ°é“¾è·¯</strong></td><td>åœ¨åº”ç”¨æŒ‡æ ‡ä¸Šï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»æ›²çº¿å±•å¼€ç›¸å…³æŒ‡æ ‡ç±»å‹ã€æ—¶é—´çš„ trace æ•°æ®ï¼›</td><td>é€‚é…æ¡†æ¶æŒ‡æ ‡ã€å®šåˆ¶åŒ–çš„è®¢å•æ•°æ®ï¼Œå¯¹ä¸šåŠ¡æŒ‡æ ‡ä¸é€‚ç”¨ï¼›</td></tr><tr><td><strong>é“¾è·¯ &amp; æ—¥å¿—</strong></td><td><strong>åŸºäºçº¦å®šçš„åŒå‘è·³è½¬</strong></td><td>æŸ¥çœ‹é“¾è·¯æ—¶æ ¹æ® trace-id æœç´¢ç›¸å…³æ—¥å¿—ï¼›æŸ¥çœ‹æ—¥å¿—æ ¹æ® trace-id è·³è½¬åˆ°é“¾è·¯æ•°æ®ï¼›</td><td>æš‚æ²¡æœ‰æ›´æ·±å…¥çš„å¯è§‚æµ‹éœ€æ±‚</td></tr></tbody></table>
<p>å½“ç”¨æˆ·é¢å¯¹æŒ‡æ ‡å¼‚å¸¸æ—¶ï¼Œä»éœ€åœ¨å¤šä¸ªå­ç³»ç»Ÿä¸­æ‰‹åŠ¨æ‹¼æ¥ä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ä»…å»¶é•¿äº† MTTRï¼Œæ›´æš´éœ²äº†å½“å‰å¯è§‚æµ‹ä½“ç³»åœ¨æ•°æ®èåˆç»´åº¦çš„æ·±å±‚ç¼ºé™·ï¼š<strong>ç¼ºä¹ä¸€ç§è½»é‡çº§ã€æ ‡å‡†åŒ–çš„ç«¯åˆ°ç«¯å…³è”æœºåˆ¶</strong>ã€‚Exemplar æŠ€æœ¯æ­£æ˜¯é’ˆå¯¹è¿™ä¸€é—®é¢˜çš„æ ¸å¿ƒè§£æ³•â€”â€”å®ƒé€šè¿‡åœ¨æŒ‡æ ‡æ•°æ®ä¸­å†…åµŒç»“æ„åŒ–ä¸Šä¸‹æ–‡æ ‡è¯†ï¼ˆå¦‚ TraceIDã€å…³é”®ä¸šåŠ¡æ ‡ç­¾ï¼‰ï¼Œæ„å»ºä»èšåˆæŒ‡æ ‡åˆ°åŸå§‹è§‚æµ‹æ•°æ®çš„å¯è¿½æº¯è·¯å¾„ï¼Œä»è€Œåœ¨ä¿æŒå­˜å‚¨æ¶æ„ä¼˜åŠ¿çš„åŒæ—¶ï¼Œå®ç°è·¨æ•°æ®ç±»å‹çš„æ— ç¼èåˆã€‚ä¸‹æ–‡å°†è¯¦ç»†æ¢è®¨è¯¥æŠ€æœ¯çš„å®è·µè·¯å¾„ã€‚</p>
<h2 data-id="heading-1">äºŒã€å¯¹è¡Œä¸šä¸»æµæ–¹æ¡ˆçš„æ¢ç´¢ä¸æ€è€ƒ</h2>
<ol>
<li>
<h3 data-id="heading-2">OpenTelemetry Exemplar æ–¹æ¡ˆ</h3>
</li>
</ol>
<p>OpenTelemetry ä½œä¸ºå¯è§‚æµ‹æ€§é¢†åŸŸçš„å¼€æºæ ‡å‡†ï¼Œå…¶ Exemplar æœºåˆ¶é€šè¿‡åœ¨æŒ‡æ ‡æ•°æ®ä¸­åµŒå…¥ TraceID å’Œ SpanID ç­‰ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå®ç°æŒ‡æ ‡ä¸åˆ†å¸ƒå¼è¿½è¸ªçš„å…³è”ã€‚æŠ€æœ¯å®ç°ä¸Šï¼ŒExemplar ä½œä¸ºæŒ‡æ ‡æ ·æœ¬ç‚¹çš„é™„åŠ å±æ€§ï¼Œæ”¯æŒå•ä¸ªæ—¶é—´åºåˆ—å­˜å‚¨å¤šä¸ª Exemplar æ ·æœ¬ï¼Œé€šè¿‡ Exemplar Reservoir æœºåˆ¶è¿›è¡Œé‡‡æ ·å’Œå­˜å‚¨ç®¡ç†ã€‚è¯¥æ–¹æ¡ˆçš„ä¼˜åŠ¿åœ¨äºæ ‡å‡†åŒ–ç¨‹åº¦é«˜ï¼Œä¸ CNCF ç”Ÿæ€æ·±åº¦é›†æˆã€‚</p>
<ol start="2">
<li>
<h3 data-id="heading-3">Grafana Exemplar å®è·µ</h3>
</li>
</ol>
<p>Grafana åœ¨å¯è§†åŒ–å±‚é¢å¯¹ Exemplar è¿›è¡Œäº†æ·±åº¦æ•´åˆã€‚åœ¨æŒ‡æ ‡å›¾è¡¨ä¸­ï¼ŒåŒ…å« Exemplar çš„æ•°æ®ç‚¹ä¼šä»¥é«˜äº®æ ‡è®°ï¼ˆå¦‚æ˜Ÿå½¢å›¾æ ‡ï¼‰æ˜¾ç¤ºï¼Œç”¨æˆ·ç‚¹å‡»åå¯ç›´æ¥è·³è½¬è‡³å…³è”çš„ Trace è¯¦æƒ…ã€‚è¯¥æ–¹æ¡ˆä¾èµ–åç«¯å­˜å‚¨ç³»ç»Ÿï¼ˆå¦‚ Prometheus 2.27+ã€Mimirï¼‰å¯¹ Exemplar çš„åŸç”Ÿæ”¯æŒï¼Œé€šè¿‡ Explore åŠŸèƒ½æä¾›åˆ†æèƒ½åŠ›ï¼Œè€Œéç‹¬ç«‹é¡µé¢ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c66e0aa7ac0d4c298def4bf73916f3a5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=I4NrAPPJ41iw5Utxx12DDRoSpoY%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>
<h3 data-id="heading-4">Dynatrace OneAgent æ–¹æ¡ˆ</h3>
</li>
</ol>
<p>Dynatrace é€šè¿‡ OneAgent ä»£ç†å®ç°äº†å…¨æ ˆè‡ªåŠ¨åŒ–çš„æ•°æ®å…³è”èƒ½åŠ›ã€‚OneAgent èƒ½å¤Ÿè‡ªåŠ¨ä¸ºæ—¥å¿—è®°å½•æ·»åŠ  TraceID å’Œ SpanID ç­‰ä¸Šä¸‹æ–‡æ ‡è¯†ï¼Œå®ç°æ—¥å¿—ä¸è¿½è¸ªçš„è‡ªåŠ¨å…³è”ã€‚è¯¥æ–¹æ¡ˆçš„æ ¸å¿ƒç‰¹ç‚¹æ˜¯é€šè¿‡ç»Ÿä¸€ä»£ç†æ¶æ„æ”¶é›†äº‹ä»¶ã€æ—¥å¿—ã€æŒ‡æ ‡å’Œè¿½è¸ªæ•°æ®ï¼Œå¹¶å°†å®ƒä»¬ç»Ÿä¸€å‘ˆç°åœ¨å•ä¸€å·¥ä½œè´Ÿè½½ç›¸å…³çš„è§†å›¾ä¸­ã€‚</p>
<ol start="4">
<li>
<h3 data-id="heading-5">è¡Œä¸šæ–¹æ¡ˆçš„å±€é™æ€§</h3>
</li>
</ol>
<p>æˆ‘ä»¬é€šè¿‡å¯¹ OpenTelemetryã€Grafanaã€Dynatrace OneAgent ç­‰ä¸»æµæ–¹æ¡ˆçš„æ·±å…¥åˆ†æï¼Œç°æœ‰ Exemplar å®ç°å­˜åœ¨ä¸‰ä¸ªæ ¹æœ¬æ€§å±€é™ï¼Œåˆ¶çº¦äº†å…¶åœ¨å¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­çš„ä»·å€¼å‘æŒ¥ï¼š</p>
<p><strong>å®šä½å±€é™ï¼šå¢å¼ºå±æ€§è€Œéç‹¬ç«‹ç»´åº¦</strong></p>
<p>å½“å‰è¡Œä¸šæ–¹æ¡ˆæ™®éå°† Exemplar å®šä½ä¸ºæŒ‡æ ‡çš„å¢å¼ºå±æ€§ï¼Œè€Œéç‹¬ç«‹çš„è§‚æµ‹ç»´åº¦ã€‚OpenTelemetry è§„èŒƒä¸­ Exemplar ä½œä¸ºæŒ‡æ ‡æ ·æœ¬ç‚¹çš„é™„åŠ å­—æ®µå­˜åœ¨ï¼ŒGrafana çš„å®ç°å¿…é¡»ä¾é™„äºæŒ‡æ ‡å›¾è¡¨è¿›è¡Œäº¤äº’ï¼ŒDynatrace è™½å®ç°è‡ªåŠ¨å…³è”ä½†ä»å°† Exemplar è§†ä¸ºä¸Šä¸‹æ–‡è¡¥å……ã€‚è¿™ç§è®¾è®¡å¯¼è‡´ï¼š</p>
<ul>
<li>åˆ†æè·¯å¾„å•ä¸€ï¼šåªèƒ½ä»æŒ‡æ ‡å¼‚å¸¸è§¦å‘ Exemplar æŸ¥è¯¢ï¼Œæ— æ³•åå‘ä» Exemplar æ•°æ®å‘ç°æŒ‡æ ‡è¶‹åŠ¿ï¼›</li>
<li>æŸ¥è¯¢èƒ½åŠ›å—é™ï¼šç¼ºä¹å¯¹ Exemplar æ•°æ®æœ¬èº«çš„èšåˆã€è¿‡æ»¤ã€ç»Ÿè®¡ç­‰æ—¥å¿—å¼åˆ†æèƒ½åŠ›ï¼›</li>
<li>ä»·å€¼æŒ–æ˜ä¸è¶³ï¼šExemplar ä¸­è•´å«çš„ä¸šåŠ¡ä¸Šä¸‹æ–‡ï¼ˆå¦‚è®¢å• IDã€ç”¨æˆ·ç‰¹å¾ï¼‰éš¾ä»¥ä½œä¸ºç‹¬ç«‹ç»´åº¦è¿›è¡Œåˆ†æï¼›</li>
</ul>
<hr/>
<p><strong>æ¶æ„å±€é™ï¼šå­˜å‚¨è€¦åˆä¸ä½¿ç”¨é—¨æ§›</strong></p>
<p>ç°æœ‰æ–¹æ¡ˆåœ¨å­˜å‚¨æ¶æ„ä¸Šå­˜åœ¨æ˜¾è‘—ç¼ºé™·ï¼š</p>
<ul>
<li>å­˜å‚¨å¼ºè€¦åˆï¼šOpenTelemetry çš„ Exemplar å¿…é¡»å­˜å‚¨åœ¨å…¼å®¹ Prometheus remote write çš„æ—¶åºæ•°æ®åº“ä¸­ï¼Œä¸æŒ‡æ ‡æ•°æ®ç»‘å®šï¼Œæ— æ³•ç‹¬ç«‹æ‰©å±•</li>
<li>æŸ¥è¯¢ä½“éªŒå‰²è£‚ï¼šGrafana è™½æä¾› Trace è·³è½¬ï¼Œä½† Exemplar æ•°æ®æœ¬èº«æ— æ³•åœ¨ Explore ç­‰é€šç”¨åˆ†æç•Œé¢ä¸­ç‹¬ç«‹ä½¿ç”¨</li>
<li>æ¥å…¥æˆæœ¬é«˜ï¼šç°æœ‰çš„ Opentelemetryã€Prometheus SDK éš¾ä»¥ç›´æ¥è®©ç”¨æˆ·æ¥å…¥ exemplar ã€‚</li>
</ul>
<hr/>
<p><strong>ä»·å€¼å±€é™ï¼šåœºæ™¯è¦†ç›–ä¸è¶³</strong></p>
<p>è¡Œä¸šæ–¹æ¡ˆæœªèƒ½å……åˆ†é‡Šæ”¾ Exemplar çš„æ½œåŠ›ï¼š</p>
<ul>
<li>è¢«åŠ¨å…³è”ä¸ºä¸»ï¼šä»…åœ¨æŒ‡æ ‡å¼‚å¸¸æ—¶æä¾›ä¸Šä¸‹æ–‡ï¼Œæ— æ³•ä¸»åŠ¨å‘ç°ä¸šåŠ¡æ¨¡å¼ï¼ˆå¦‚ç‰¹å®šç”¨æˆ·ç¾¤çš„æ€§èƒ½é€€åŒ–ï¼‰</li>
<li>æ—¥å¿—èƒ½åŠ›ç¼ºå¤±ï¼šExemplar è™½æœ¬è´¨æ˜¯ç»“æ„åŒ–æ—¥å¿—ï¼Œä½†ç°æœ‰æ–¹æ¡ˆæœªæä¾›æ—¥å¿—æ£€ç´¢ã€å­—æ®µæå–ã€æ¨¡å¼å‘ç°ç­‰åŸºç¡€èƒ½åŠ›</li>
</ul>
<hr/>
<ol start="5">
<li>
<h3 data-id="heading-6">æˆ‘ä»¬çš„æ€è€ƒï¼šExemplar ä½œä¸ºç‹¬ç«‹è§‚æµ‹ç»´åº¦</h3>
</li>
</ol>
<p>åŸºäºä¸Šè¿°å±€é™ï¼Œæˆ‘ä»¬æå‡º Exemplar as a Dimension çš„æ ¸å¿ƒç†å¿µï¼š</p>
<ul>
<li>
<p><strong>åŒé‡èº«ä»½</strong>ï¼šExemplar æ—¢æ˜¯æŒ‡æ ‡ä¸é“¾è·¯/æ—¥å¿—çš„å…³è”æ¡¥æ¢ï¼Œä¹Ÿæ˜¯å¯ç‹¬ç«‹åˆ†æçš„ç»“æ„åŒ–æ—¥å¿—æµï¼ˆå³åœ¨æŒ‡æ ‡-&gt;é“¾è·¯çš„æ˜ å°„å…³ç³»ä¹‹ä¸Šï¼Œå»ºç«‹æŒ‡æ ‡-&gt;æ—¥å¿—çš„æ˜ å°„å…³ç³»ï¼‰</p>
</li>
<li>
<p><strong>é™ç»´ä½¿ç”¨</strong>ï¼šåœ¨å¼‚æ„å­˜å‚¨èƒŒæ™¯ä¸‹ï¼ŒExemplar å¯ä½œä¸ºç»“æ„åŒ–æ—¥å¿—ä½¿ç”¨ï¼Œé™ä½æ¥å…¥é—¨æ§›â€”â€”æ— éœ€å®Œæ•´éƒ¨ç½²æ—¥å¿—ç³»ç»Ÿï¼Œå³å¯è·å¾—å…³é”®ä¸šåŠ¡ä¸Šä¸‹æ–‡</p>
</li>
<li>
<p><strong>åœºæ™¯æ‰©å±•</strong>ï¼šæ”¯æŒä» Exemplar æ•°æ®åå‘èšåˆç”ŸæˆæŒ‡æ ‡ï¼ˆå¦‚ç»Ÿè®¡ç‰¹å®šä¸šåŠ¡åœºæ™¯çš„é”™è¯¯ç‡ï¼‰ï¼Œå®ç°è§‚æµ‹ç»´åº¦çš„è‡ªç”±åˆ‡æ¢</p>
</li>
</ul>
<h2 data-id="heading-7">ä¸‰ã€è´§æ‹‰æ‹‰ Exemplar æ¶æ„</h2>
<ol>
<li>
<h3 data-id="heading-8">æŠ€æœ¯é€‰å‹</h3>
</li>
</ol>
<p>æˆ‘ä»¬é€‰æ‹© VictoriaLogsï¼ˆä»¥ä¸‹ç®€ç§° VLogï¼‰ä½œä¸º Exemplar çš„ä¸“ç”¨å­˜å‚¨å¼•æ“ï¼ŒåŸºäºè´§æ‹‰æ‹‰å®é™…ä¸šåŠ¡åœºæ™¯é‡æ„å†…éƒ¨ç»„ä»¶ï¼Œæ„å»ºäº†ä»æ•°æ®å†™å…¥åˆ°æŸ¥è¯¢åˆ†æçš„å®Œæ•´é“¾è·¯ã€‚è¿™ä¸€é€‰å‹ä¸»è¦åŸºäºä¸‰ç‚¹æ ¸å¿ƒè€ƒé‡ï¼š</p>
<ul>
<li>
<p><strong>Schemaless</strong>ï¼šVictoriaLogs è‡ªåŠ¨ç´¢å¼•æ‰€æœ‰å‡ºç°çš„å­—æ®µï¼Œä¸šåŠ¡å›¢é˜Ÿæ— éœ€é¢„å…ˆå®šä¹‰æ—¥å¿—ç»“æ„ï¼Œæ–°ä¸šåŠ¡å­—æ®µå¯ç«‹å³ç”¨äºæŸ¥è¯¢ï¼Œè¾ƒ Ck æ—¥å¿—ä½¿ç”¨é—¨æ§›å¤§å¹…é™ä½ï¼›</p>
</li>
<li>
<p><strong>VictoriaMetrics ç”Ÿæ€ååŒ</strong>ï¼šè´§æ‹‰æ‹‰å·²åœ¨å…¨çƒå¤šä¸ª Region å®ŒæˆæŒ‡æ ‡ç³»ç»Ÿå‘ VictoriaMetrics çš„è¿ç§»ã€‚VLog ä½œä¸ºåŒæºäº§å“ï¼Œå…±äº«ä¸€è‡´çš„è¿ç»´ä½“ç³»ï¼Œå›¢é˜Ÿæ— éœ€æ–°å¢è¿ç»´æŠ€èƒ½æ ˆã€‚å…¶ç®€åŒ–çš„ LogQL è¯­æ³•ï¼ˆä¸ PromQL é£æ ¼ç»Ÿä¸€ï¼‰å¤§å¹…é™ä½æŸ¥è¯¢ä½¿ç”¨é—¨æ§›ï¼›</p>
</li>
<li>
<p><strong>æ€§èƒ½å‡ºè‰²</strong>ï¼šå®æµ‹ï¼Œå•ä½ç›¸åŒæ—¥å¿—é‡ä¸‹ï¼Œç»¼åˆæˆæœ¬å¤§çº¦ä¸º ElasticSearch çš„ 1/10ã€‚</p>
</li>
</ul>
<ol start="2">
<li>
<h3 data-id="heading-9">æ–‡æœ¬ä¼ è¾“åè®®</h3>
</li>
</ol>
<p>æˆ‘ä»¬å€Ÿé‰´äº† OpenMetrics çš„è¡Œåè®®ï¼Œä»¥å®ç°å¯¹ Prometheus è¡Œåè®®çš„å‰å‘å…¼å®¹ã€‚</p>















<table><thead><tr><th/><th><strong>Opentelemetry</strong></th><th><strong>è´§æ‹‰æ‹‰ Exemplar è¡Œåè®®</strong></th></tr></thead><tbody><tr><td><strong>æ ¸å¿ƒæ•°æ®ç»“æ„</strong></td><td>-   Exemplars å¿…é¡»ç”±ä¸€ä¸ª LabelSet å’Œä¸€ä¸ªå€¼ç»„æˆï¼Œå¹¶ä¸”å¯ä»¥æœ‰ä¸€ä¸ªæ—¶é—´æˆ³</td><td/></tr></tbody></table>
<ul>
<li>æ¯ä¸ª exemplar å¦‚æœé™„åŠ åˆ° TimeSeriesï¼Œå¿…é¡»åŒ…å«ä¸€ä¸ªå€¼ï¼Œå¯èƒ½åŒ…å«æ—¶é—´æˆ³ | -   å¿…é¡»åŒ…å«å€¼ï¼ˆcounter ä¸­ IncrOnce å¯¹åº”ä¸º 1ï¼Œhistogram ä¸­å¯¹åº”ä¸º observce çš„å€¼ï¼‰</li>
<li>å¿…é¡»åŒ…å«æ—¶é—´æˆ³ï¼ˆ æœ€é«˜æ”¯æŒ nsï¼‰ |
| <strong>Trace ä¸Šä¸‹æ–‡æ ‡è¯†</strong> | OpenMetrics Exemplars å¿…é¡»ä½¿ç”¨<code>trace_id</code>å’Œ<code>span_id</code>é”®åˆ†åˆ«è¡¨ç¤º trace å’Œ span ID                             | <code>trace_id</code>å’Œ<code>segment_id</code>é”®åˆ†åˆ«è¡¨ç¤º skwalking ä¸­çš„ trace å’Œ segment ID                         |
| <strong>æ ¼å¼å…¼å®¹æ€§</strong>       | ä½¿ç”¨ <code>#</code> æ³¨é‡Šè·Ÿéšåœ¨ series è¡Œå                                                                          | ä½¿ç”¨ <code># Exemplar</code>ç‹¬ç«‹è¡Œè·Ÿéšåœ¨å…·ä½“çš„ series è¡Œåï¼Œå¤šä¸ª Exemplar ä½¿ç”¨å¤šä¸ªç‹¬ç«‹çš„è¡Œ                              |</li>
</ul>
<p>å…¶æ ¼å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-lua" lang="lua"># TYPE foo_request_duration_seconds histogram
foo_request_duration_seconds_bucket{app=<span class="hljs-string">"foo-service"</span>,env=<span class="hljs-string">"prod"</span>,instance=<span class="hljs-string">"10.0.0.1"</span>,method=<span class="hljs-string">"GET"</span>,<span class="hljs-built_in">status</span>=<span class="hljs-string">"200"</span>,le=<span class="hljs-string">"0.005"</span>} <span class="hljs-number">0</span>
foo_request_duration_seconds_bucket{app=<span class="hljs-string">"foo-service"</span>,env=<span class="hljs-string">"prod"</span>,instance=<span class="hljs-string">"10.0.0.1"</span>,method=<span class="hljs-string">"GET"</span>,<span class="hljs-built_in">status</span>=<span class="hljs-string">"200"</span>,le=<span class="hljs-string">"0.01"</span>} <span class="hljs-number">2</span>
foo_request_duration_seconds_bucket{app=<span class="hljs-string">"foo-service"</span>,env=<span class="hljs-string">"prod"</span>,instance=<span class="hljs-string">"10.0.0.1"</span>,method=<span class="hljs-string">"GET"</span>,<span class="hljs-built_in">status</span>=<span class="hljs-string">"200"</span>,le=<span class="hljs-string">"0.025"</span>} <span class="hljs-number">5</span>
# Exemplar {trace_id=<span class="hljs-string">"abc123def4567890"</span>,segment_id=<span class="hljs-string">"xyz789"</span>,user_id=<span class="hljs-string">"user-123"</span>,endpoint=<span class="hljs-string">"/api/v1/query"</span>,client_ip=<span class="hljs-string">"192.168.1.100"</span>,} <span class="hljs-number">0.008456</span> <span class="hljs-number">1700000000123456789</span>
# Exemplar {trace_id=<span class="hljs-string">"def456ghi7890123"</span>,segment_id=<span class="hljs-string">"uvw456"</span>,user_id=<span class="hljs-string">"user-456"</span>,endpoint=<span class="hljs-string">"/api/v1/query_range"</span>,client_ip=<span class="hljs-string">"192.168.1.101"</span>,} <span class="hljs-number">0.018723</span> <span class="hljs-number">1700000000234567890</span>

# TYPE foo_database_query_seconds histogram
foo_database_query_seconds_bucket{service=<span class="hljs-string">"foo-db"</span>,env=<span class="hljs-string">"prod"</span>,query_type=<span class="hljs-string">"select"</span>,database=<span class="hljs-string">"main"</span>,le=<span class="hljs-string">"0.05"</span>} <span class="hljs-number">3</span>
foo_database_query_seconds_bucket{service=<span class="hljs-string">"foo-db"</span>,env=<span class="hljs-string">"prod"</span>,query_type=<span class="hljs-string">"select"</span>,database=<span class="hljs-string">"main"</span>,le=<span class="hljs-string">"0.1"</span>} <span class="hljs-number">8</span>
# Exemplar {trace_id=<span class="hljs-string">"ghi789jkl0123456"</span>,segment_id=<span class="hljs-string">"rst123"</span>,query_id=<span class="hljs-string">"query-789"</span>,<span class="hljs-built_in">table</span>=<span class="hljs-string">"users"</span>,client_app=<span class="hljs-string">"web-frontend"</span>,} <span class="hljs-number">0.042158</span> <span class="hljs-number">1700000000345678901</span>
# Exemplar {trace_id=<span class="hljs-string">"jkl012mno3456789"</span>,segment_id=<span class="hljs-string">"opq789"</span>,query_id=<span class="hljs-string">"query-012"</span>,<span class="hljs-built_in">table</span>=<span class="hljs-string">"orders"</span>,client_app=<span class="hljs-string">"mobile-app"</span>,} <span class="hljs-number">0.087634</span> <span class="hljs-number">1700000000456789012</span>
</code></pre>
<p>3.  ### SDK æ•°æ®ä¸ŠæŠ¥</p>
<p>é’ˆå¯¹ Exemplar æ•°æ®çš„é«˜ååã€ä¸å¯èšåˆçš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ‘’å¼ƒäº† Prometheus ä¼ ç»Ÿçš„ pull æ¨¡å‹ï¼Œåœ¨ sdk ä¸­æ–°å¢äº†ä¸€æ¡é¢å‘ exemplar æ•°æ®çš„æ•°æ®æµé€šé“ï¼Œé‡‡ç”¨ push æœºåˆ¶å‘åç«¯ collector å‘é€æ•°æ®ã€‚</p>
<p>ç”±äºä¸åŒåº”ç”¨åœºæ™¯äº§ç”Ÿçš„ Exemplar æ—¥å¿—ç±»å‹å·®å¼‚æ˜¾è‘—â€”â€”å•æ¡æ—¥å¿—å¤§å°å¯èƒ½ä»å‡ ç™¾å­—èŠ‚åˆ°å‡ å KB ä¸ç­‰ï¼Œç®€å•çš„å®šæ—¶ flush æˆ–åŸºäºå›ºå®šè¡Œæ•°çš„ flush ç­–ç•¥å‡éš¾ä»¥å¹³è¡¡å®æ—¶æ€§ä¸èµ„æºæ¶ˆè€—ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡ä¸€å¥—ç²¾ç»†çš„è‡ªé€‚åº” push ç­–ç•¥ï¼Œèƒ½å¤Ÿæ ¹æ®æ—¥å¿—ä½“ç§¯ã€ä¸šåŠ¡é‡è¦æ€§å’Œç³»ç»Ÿè´Ÿè½½åŠ¨æ€è°ƒæ•´æ¨é€èŠ‚å¥ã€‚</p>
<ul>
<li>
<p><strong>Cache Size é©±åŠ¨</strong>ï¼šSDK å†…ç½®æ»‘åŠ¨çª—å£ç¼“å­˜ï¼Œå½“ Exemplar æ•°æ®é‡è¾¾åˆ°é˜ˆå€¼ï¼ˆé»˜è®¤ 10MBï¼‰æˆ–æ—¶é—´çª—å£åˆ°æœŸï¼ˆé»˜è®¤ 10 ç§’ï¼‰æ—¶ï¼Œè‡ªåŠ¨æ‰¹é‡æ¨é€æ•°æ®ï¼›</p>
</li>
<li>
<p><strong>åå‹ä¿æŠ¤</strong>ï¼šå½“åç«¯å¤„ç†å¼‚å¸¸æ—¶ï¼ŒSDK è‡ªåŠ¨é‡è¯•ï¼Œæç«¯æƒ…å†µä¸‹ï¼Œä¸¢å¼ƒä»¥ä¿è¯æœåŠ¡çš„ç¨³å®šæ€§ï¼›</p>
</li>
<li>
<p><strong>æ•°æ®å‹ç¼©</strong>ï¼šé‡‡ç”¨ gzip å‹ç¼©æ›¿ä»£åŸå§‹æ–‡æœ¬æ ¼å¼ï¼Œé™ä½ç½‘ç»œå¸¦å®½çš„å ç”¨ï¼›</p>
</li>
</ul>
<p>åœ¨ golang ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡æ‰©å±•æ—¢æœ‰çš„ Meter æ¥å£ï¼Œå®ç°äº† Exemplar æ•°æ®çš„æ ‡å‡†åŒ–ä¸ŠæŠ¥ã€‚è¯¥æœºåˆ¶å°† Exemplar æ ‡ç­¾ä¸æ•°å€¼ç²¾å‡†é™„ç€åˆ°å¯¹åº”çš„æŒ‡æ ‡æ—¶é—´åºåˆ—ä¸Šï¼Œå…¶è°ƒç”¨è§„èŒƒå¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>ä¸Šä¸‹æ–‡å‚æ•°</strong>ï¼šé¦–ä¸ªå‚æ•°å¿…é¡»ä¸º <code>context.Context</code>ï¼Œç”¨äºè‡ªåŠ¨æ•è·åˆ†å¸ƒå¼è¿½è¸ªä¸Šä¸‹æ–‡ï¼ˆå¦‚ SkyWalking çš„ TraceID/SegmentIDï¼‰ï¼›</li>
<li><strong>ä¸šåŠ¡</strong> <strong>æ ‡è¯†å‚æ•°</strong>ï¼šç¬¬äºŒä¸ªå‚æ•°ä¸ºå…³é”®ä¸šåŠ¡æ ‡è¯†å­—ç¬¦ä¸²ï¼ˆå¦‚å®Œæ•´ URLã€SQL ã€è¯·æ±‚å…¥å‚ç­‰ç­‰ï¼‰ï¼Œä½œä¸º Exemplar çš„æ ¸å¿ƒæè¿°å†…å®¹ï¼›</li>
<li><strong>ç»“æ„åŒ–æ ‡ç­¾é›†åˆ</strong>ï¼šåç»­å‚æ•°ä¸ºå¯å˜æ•°é‡çš„ <code>slog</code> æ ‡ç­¾ï¼Œé€šè¿‡ <code>slog.String()</code>/<code>slog.Int64()</code> ç­‰æ–¹æ³•å®šä¹‰ä¸šåŠ¡ç»´åº¦æ ‡ç­¾ï¼›</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1e260edb62e94710b168864734b3f126~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=SFchNZVzHk%2Bgvr3UBCotzmXw3YA%3D" alt="" loading="lazy"/></p>
<p>åœ¨ Java<code> SpringBoot Actuator</code> ä¸­ï¼Œé»˜è®¤æ˜¯é›†æˆ<code>Micrometer</code>ä½œä¸ºæŒ‡æ ‡æ•°æ®ä¸ŠæŠ¥çš„æ ‡å‡† APIã€‚æˆ‘ä»¬é€šè¿‡æ‰©å±• PrometheusMeterRegistryã€Counterã€Timer é»˜è®¤å®ç°ï¼Œåœ¨æŒ‡æ ‡æ•°æ®è®°å½• Value çš„åŒæ—¶ï¼Œå®ç° Exemplar æ•°æ®çš„ä¸ŠæŠ¥ã€‚å…·ä½“ä½¿ç”¨è§„èŒƒå¦‚ä¸‹ï¼š</p>
<ul>
<li>
<p>ä½¿ç”¨**<code>LalaMetricRegistry</code>**<code>#XXbuilder</code>æ„å»º</p>
<ul>
<li><em>é»˜è®¤æºå¸¦</em> <em><code>trace_id</code></em> <em>ã€</em> <em><code>segment_id</code></em> <em>é“¾è·¯ä¿¡æ¯ï¼›</em></li>
<li>æ„å»ºå¯ç›´æ¥æ”¾åœ¨æ–¹æ³•ä½“é‡å¤æ‰§è¡Œï¼ŒåŒä¸€ä¸ª Meter ï¼ˆName+Tag åŒºåˆ†ï¼‰åªä¼šåˆ›å»ºä¸€æ¬¡ï¼›</li>
<li>Counter ç±»å‹æŒ‰ç…§è§„èŒƒï¼šæŒ‡æ ‡åç§°ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ·»åŠ "_total"åç¼€ï¼ˆåç§°å·²æœ‰åˆ™ä¸ä¼šé‡å¤æ·»åŠ ï¼‰ï¼Œå¦‚ä¸éœ€è¦å¯æ·»åŠ <code>.withoutTotalSuffix()</code>æ–¹æ³•</li>
</ul>
</li>
<li>
<p>Exemplar æ‰©å±•ä¿¡æ¯ç±»å‹æ”¯æŒé•¿æ–‡æœ¬ï¼ˆ<code>withExemplarMsg</code>æ–¹æ³•ï¼‰ã€KV é”®å€¼å¯¹ï¼ˆ<code>withExemplarTag</code>ï¼‰ç±»å‹ï¼Œå¦‚ KV é”®å€¼å¯¹ï¼Œæ¨èä½¿ç”¨å†…ç½®<code>ExemplarTag</code> æ„å»ºè¾“å…¥ï¼›</p>
</li>
<li>
<p>æ”¯æŒé€šè¿‡ Endpoint æŸ¥çœ‹ Exemplar ç»Ÿè®¡ä¿¡æ¯å’Œå¾…ä¸ŠæŠ¥æ–‡æœ¬å†…å®¹ï¼Œéœ€æ˜¾ç¤ºé…ç½®å¼€å¯ exemplarã€exemplar-data ä¸¤ä¸ªç«¯ç‚¹ï¼›</p>
</li>
<li>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
</li>
</ul>

<pre><code class="hljs language-less" lang="less"><span class="hljs-variable">@GetMapping</span>(<span class="hljs-string">"/exemplar"</span>)
public String <span class="hljs-built_in">exemplarTest</span>() {
    <span class="hljs-comment">//Histogram æ–¹å¼1 è®¡æ—¶å¼€å§‹ä½ç½®</span>
    <span class="hljs-selector-tag">Timer</span><span class="hljs-selector-class">.Sample</span> <span class="hljs-selector-tag">sample</span> = <span class="hljs-selector-tag">Timer</span><span class="hljs-selector-class">.start</span>();<span class="hljs-comment">//å¼€å§‹è®¡æ—¶ä½ç½®</span>
    
    <span class="hljs-comment">// Counter è®¡æ•°å™¨æ„å»ºï¼Œç›´æ¥æ”¾åœ¨æ–¹æ³•ä½“ä¸­ï¼Œæ— éœ€æå‰åˆ›å»ºï¼Œ</span>
    <span class="hljs-comment">// æ³¨æ„ æŒ‡æ ‡åç§°ï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ·»åŠ "_total"åç¼€ï¼Œå¦‚ä¸éœ€è¦å¯æ·»åŠ .withoutTotalSuffix()</span>
    <span class="hljs-selector-tag">LalaMetricRegistry</span><span class="hljs-selector-class">.counterBuilder</span>(<span class="hljs-string">"exemplar_counter_test"</span>)
            <span class="hljs-selector-class">.withoutTotalSuffix</span>() <span class="hljs-comment">// å¦‚æ˜¾ç¤ºæŒ‡å®šï¼Œåˆ™ä¸ä¼šæ·»åŠ  _total åç¼€ï¼Œå»ºè®®éƒ½åŠ ä¸Šï¼ˆé˜²æ­¢åç§°æœ‰å·®å¼‚ï¼‰</span>
            <span class="hljs-selector-class">.tag</span>(<span class="hljs-string">"city_id"</span>, <span class="hljs-string">"13333"</span>)<span class="hljs-comment">//è¿™æ˜¯æŒ‡æ ‡çš„labelï¼Œå¿…é¡»ä¿è¯æ”¶æ•›</span>
            <span class="hljs-selector-class">.tags</span>(<span class="hljs-string">"business_type"</span>, <span class="hljs-string">"driver"</span>)
            <span class="hljs-selector-class">.register</span>()
            <span class="hljs-selector-class">.withExemplarTag</span>( <span class="hljs-string">"userId"</span> , <span class="hljs-string">"uid123445"</span> ) <span class="hljs-comment">//è¿™æ˜¯exemplarçš„æ‰©å±•ä¿¡æ¯</span>
<span class="hljs-selector-class">.withExemplarTag</span>(ExemplarTag. int_  ( <span class="hljs-string">"cost_amount"</span> , <span class="hljs-number">3000</span> ))
            <span class="hljs-selector-class">.increment</span>();
     
    <span class="hljs-comment">//Histogram æ–¹å¼1 ç»ˆæ­¢è®¡æ—¶ï¼Œè‡ªå®šä¹‰Bucket æ”¯æŒserviceLevelObjectives é…ç½®</span>
    <span class="hljs-selector-tag">sample</span><span class="hljs-selector-class">.stop</span>(LalaMetricRegistry.<span class="hljs-built_in">timerBuilder</span>(<span class="hljs-string">"exemplar_timer_test"</span>)
            .<span class="hljs-built_in">tag</span>(<span class="hljs-string">"city_id"</span>, <span class="hljs-string">"1333"</span>)<span class="hljs-comment">//è¿™æ˜¯æŒ‡æ ‡çš„labelï¼Œå¿…é¡»ä¿è¯æ”¶æ•›</span>
            .<span class="hljs-built_in">serviceLevelObjectives</span>(Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">3</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">6</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">10</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">15</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">25</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">50</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">100</span>L), Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">1000</span>L))
            .<span class="hljs-built_in">register</span>()
            .<span class="hljs-built_in">withExemplarMsg</span>( <span class="hljs-string">"è‡ªå®šä¹‰æ–‡æœ¬å†…å®¹"</span> ) <span class="hljs-comment">//æœ‰é•¿åº¦é™åˆ¶ï¼Œ1024</span>
.<span class="hljs-built_in">withExemplarTag</span>( <span class="hljs-string">"orderId"</span> , <span class="hljs-string">"did123456"</span> )
.<span class="hljs-built_in">withExemplarTag</span>( <span class="hljs-string">"payId"</span> , <span class="hljs-string">"pid123456"</span> ) );
    
    <span class="hljs-comment">// Histogram æ–¹å¼2  </span>
    <span class="hljs-selector-tag">LalaMetricRegistry</span><span class="hljs-selector-class">.timerBuilder</span>(<span class="hljs-string">"exemplar_timer_test3"</span>)
        <span class="hljs-selector-class">.tags</span>(<span class="hljs-string">"city_id"</span>, <span class="hljs-string">"13555"</span>)
        <span class="hljs-selector-class">.serviceLevelObjectives</span>(BucketConfigs.<span class="hljs-built_in">getInstance</span>().<span class="hljs-built_in">getDurations</span>(HllBucketType.API))
        <span class="hljs-selector-class">.register</span>()
    <span class="hljs-selector-class">.withExemplarMsg</span>( <span class="hljs-string">"plain text"</span> )
<span class="hljs-selector-class">.withExemplarTag</span>( <span class="hljs-string">"userId"</span> , <span class="hljs-string">"123456"</span> )
        <span class="hljs-selector-class">.record</span>(Duration.<span class="hljs-built_in">ofMillis</span>(<span class="hljs-number">15</span>));  <span class="hljs-comment">//è®°å½•è€—æ—¶   </span>
            
    <span class="hljs-selector-tag">return</span> "<span class="hljs-selector-tag">SUCCESS</span>";
}
</code></pre>
<ul>
<li><strong>ä¸¤ç§ Label çš„å¯¹æ¯”ï¼š</strong></li>
</ul>



































<table><thead><tr><th>ç‰¹æ€§</th><th>Meter Labels</th><th>Exemplar Labels</th></tr></thead><tbody><tr><td>å­˜å‚¨æœºåˆ¶</td><td>æ¯ä¸ªå”¯ä¸€ç»„åˆç”Ÿæˆç‹¬ç«‹æ—¶é—´åºåˆ—</td><td>é™„åŠ åœ¨æ ·æœ¬ä¸Šçš„é”®å€¼å¯¹ï¼Œä¸å½±å“æ—¶é—´åºåˆ—</td></tr><tr><td>åŸºæ•°é™åˆ¶</td><td>ä¸¥æ ¼é™åˆ¶ï¼ˆå…·å¤‡é‡‡é›†é˜²å¾¡ï¼‰</td><td>æ— é™åˆ¶ï¼ˆVictoria-Logså…¨é‡‡æ ·ï¼‰</td></tr><tr><td>æŸ¥è¯¢åœºæ™¯</td><td>èšåˆåˆ†æï¼ˆå¦‚sum by(appid)ï¼‰</td><td>å•ç‚¹è¯¦æƒ…è¿½æº¯ï¼ˆç‚¹å‡»æ›²çº¿æŸ¥çœ‹æ—¥å¿—ï¼‰</td></tr><tr><td>èµ„æºæ¶ˆè€—</td><td>é«˜ï¼ˆåºåˆ—æ•°ç›´æ¥å½±å“æ€§èƒ½ï¼‰</td><td>ä½ï¼ˆä»…å­˜å‚¨æ ·æœ¬æ—¶çš„é™„åŠ ä¿¡æ¯ï¼‰</td></tr><tr><td>ä¿ç•™ç­–ç•¥</td><td>åŠå¹´</td><td>7å¤©</td></tr></tbody></table>
<ol start="4">
<li>
<h3 data-id="heading-10">Exemplar-Collector</h3>
</li>
</ol>
<p>Exemplar-Collector æ˜¯ä¸€ä¸ªè½»é‡åŒ–çš„æ•°æ®æ¥æ”¶å¤„ç†ç»„ä»¶ï¼Œä½œä¸º VictoriaMetrics æŒ‡æ ‡ä½“ç³»ä¸ VictoriaLogs æ—¥å¿—ç³»ç»Ÿçš„æ¡¥æ¢ï¼Œå®ƒæ‰¿æ‹…ä¸¤ä¸ªæ ¸å¿ƒèŒè´£ï¼š</p>
<p><strong>æ•°æ®å†™å…¥å¤„ç†</strong></p>
<ul>
<li>
<p><strong>relabeling</strong>ï¼šæ¥æ”¶åº”ç”¨ SDK æ¨é€çš„ Exemplar æ•°æ®ï¼Œæµå¼è§£ææ–‡æœ¬åè®®ï¼Œæ··åˆ series labels ä¸ exemplar labelsï¼Œä½¿ç”¨<code>internal/insert</code> æ¥å£è¿›è¡Œæ•°æ®å†™å…¥ï¼›ä¸¢å¼ƒæ— ç”¨æ ‡ç­¾å¦‚ <code>job</code>ã€<code>instance</code>ç­‰ï¼›</p>
</li>
<li>
<p><strong>å…ƒæ•°æ®è®°å½•</strong>ï¼šè®°å½•åº”ç”¨ï¼ˆappidï¼‰ä¸æŒ‡æ ‡ï¼ˆmetricï¼‰çš„å…³è”å…³ç³»åˆ° MySQLï¼Œç”¨äºåç»­æŸ¥è¯¢ä¼˜åŒ–ï¼Œå¦‚ histogram å¤åˆæŒ‡æ ‡çš„æ”¯æŒï¼Œæ™ºèƒ½å…³è”ç­‰ï¼›</p>
</li>
</ul>
<p><strong>æ•°æ®æŸ¥è¯¢</strong> <strong>å¤„ç†</strong></p>
<ul>
<li>
<p><strong>ç»Ÿä¸€æŸ¥è¯¢æ¥å£</strong>ï¼šæä¾›ç›´æ–¹å›¾åˆ†å¸ƒã€æ—¶é—´åºåˆ—ã€é¥¼å›¾ã€TopN ç»Ÿè®¡ç­‰é¢„ç½®åˆ†ææ¨¡å¼ï¼Œå±è”½åº•å±‚å­˜å‚¨å·®å¼‚ï¼›</p>
</li>
<li>
<p><strong>è¯­æ³•å…¼å®¹å±‚</strong>ï¼šè‡ªåŠ¨å°† PromQL æŒ‡æ ‡æŸ¥è¯¢è½¬æ¢ä¸º LogsQL æ—¥å¿—æŸ¥è¯¢ï¼Œä½¿ä¸šåŠ¡å›¢é˜Ÿç‚¹å‡» promethues å›¾è¡¨ä¾¿èƒ½è½¬æ¢åˆ° exemplar æŸ¥è¯¢ï¼›</p>
</li>
<li>
<p><strong>æ™ºèƒ½å…³è”</strong>ï¼šæ ¹æ®æŒ‡æ ‡ä¸åº”ç”¨çš„å…ƒæ•°æ®æ˜ å°„ï¼Œä¸ºå­˜é‡çš„å›¾è¡¨è‡ªåŠ¨æ³¨å…¥ Exemplar è·³è½¬èƒ½åŠ›ï¼Œå®ç°"æŒ‡æ ‡â†’Trace/æ—¥å¿—"ä¸€é”®ç©¿é€ï¼›</p>
</li>
</ul>
<h2 data-id="heading-11">å››ã€å¯è§†åŒ–äº¤äº’</h2>
<p>å¯è§†åŒ–äº¤äº’æ˜¯é‡Šæ”¾ Exemplar ä»·å€¼çš„æ ¸å¿ƒç¯èŠ‚ã€‚ä¾æ‰˜è´§æ‹‰æ‹‰å…¨è‡ªç ”çš„ Lala-Monitor ç›‘æ§ç³»ç»Ÿï¼ˆé›†æˆæŒ‡æ ‡ã€æ—¥å¿—ã€é“¾è·¯ã€å‘Šè­¦çš„ç»Ÿä¸€å¯è§‚æµ‹å¹³å°ï¼‰ï¼Œæˆ‘ä»¬çªç ´äº† Grafana ç­‰é€šç”¨å·¥å…·çš„äº¤äº’é™åˆ¶ï¼Œæ„å»ºäº†æ·±åº¦ä¼˜åŒ–çš„ Exemplar åˆ†æç•Œé¢ã€‚</p>
<p>æˆ‘ä»¬çš„äº¤äº’è®¾è®¡å›´ç»• Exemplar çš„ç»“æ„åŒ–æ—¥å¿—ç‰¹æ€§å±•å¼€ï¼Œå®ç°å››å¤§æ ¸å¿ƒèƒ½åŠ›ï¼š</p>
<ul>
<li>
<p><strong>æ™ºèƒ½å…³è”</strong>ï¼šè‡ªåŠ¨å…³è”å›¾è¡¨ä¸ Exemplarï¼ŒåŒæ—¶æ”¯æŒä¸šåŠ¡äººå‘˜æ‰‹åŠ¨æŒ‡å®š logsql è¿›è¡Œå…³è”ï¼›</p>
</li>
<li>
<p><strong>Drill-down</strong>ï¼šä»æŒ‡æ ‡â†’Exemplar æ—¥å¿—â†’trace çš„æ— ç¼ç©¿é€ï¼›</p>
</li>
<li>
<p><strong>æ—¥å¿—åˆ†æ</strong>ï¼šæä¾›å®Œæ•´çš„æ—¥å¿—æ£€ç´¢é¡µé¢ï¼Œæ”¯æŒç±»ä¼¼ ES çš„å…¨æ–‡æ£€ç´¢ã€å­—æ®µè¿‡æ»¤å’Œæ¨¡å¼å‘ç°ï¼Œå¯ç›´æ¥åˆ†æ Exemplar ç»“æ„åŒ–æ—¥å¿—å†…å®¹ï¼›</p>
</li>
<li>
<p><strong>å¤šç»´ç»Ÿè®¡å›¾è¡¨ï¼š</strong> åŸºäº Exemplar æ•°æ®è‡ªåŠ¨ç”Ÿæˆæ—¶åºç»Ÿè®¡å›¾ã€æ’è¡Œæ¦œã€é¥¼å›¾åŠæŸ±çŠ¶å›¾ï¼Œç›´è§‚å±•ç¤ºä¸šåŠ¡ç»´åº¦åˆ†å¸ƒï¼ˆå¦‚é”™è¯¯ç±»å‹å æ¯”ã€æ…¢è¯·æ±‚åœ°åŸŸåˆ†å¸ƒï¼‰ï¼›</p>
</li>
</ul>
<ol>
<li>
<h3 data-id="heading-12">æ™ºèƒ½å…³è”</h3>
</li>
</ol>
<p>å½“ä¸šåŠ¡æŒ‡æ ‡å¯ç”¨ Exemplar åŠŸèƒ½åï¼ŒLala-Monitor ä¼šåœ¨å¯¹åº”å›¾è¡¨ä¸Šè‡ªåŠ¨æ·»åŠ  Exemplar æ ‡è¯†ã€‚æ­¤æ—¶ï¼Œç”¨æˆ·å¯ç›´æ¥ç‚¹å‡»æŒ‡æ ‡æ›²çº¿ä¸Šçš„æ•°æ®ç‚¹ï¼ŒæŸ¥çœ‹å…³è”çš„ Exemplar æ—¥å¿—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/097c4244c75d40bcbdc908f723204edf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=TpptRtPdL0QtTBN4h%2FAOhGh2MQw%3D" alt="" loading="lazy"/></p>
<p>é™¤ä¸šåŠ¡æŒ‡æ ‡å¤–ï¼ŒLala-Monitor è¿˜ä¸ºæ‰€æœ‰å·²é…ç½®çš„çœ‹æ¿å›¾è¡¨æä¾›è‡ªåŠ¨è”åŠ¨æŸ¥è¯¢èƒ½åŠ›ã€‚ç³»ç»Ÿå®šæœŸæ‰«æå…¨é‡çœ‹æ¿ï¼Œè¯†åˆ«åŒ…å« Exemplar æ•°æ®çš„æŒ‡æ ‡ï¼Œå¹¶ä¸ºç›¸å…³å›¾è¡¨å¼€å¯è”åŠ¨æŸ¥è¯¢èƒ½åŠ›â€”â€”æ— éœ€ä»»ä½•äººå·¥é…ç½®ï¼Œç”¨æˆ·å³å¯ç›´æ¥ç‚¹å‡»æŒ‡æ ‡æ›²çº¿æŸ¥çœ‹å…³è”çš„ Exemplar æ—¥å¿—ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9de92303df0f474fb848a5b6b865b75c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=rYfQObM3IJY6gXXKUT5UaIjB%2BdQ%3D" alt="" loading="lazy"/></p>
<p>åœ¨ç»å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œç³»ç»Ÿå†…ç½®çš„è‡ªåŠ¨å…³è”æœºåˆ¶èƒ½å¤Ÿå‡†ç¡®å»ºç«‹æŒ‡æ ‡ä¸ Exemplar çš„æ˜ å°„å…³ç³»ã€‚ä½†åœ¨ç‰¹æ®Šæƒ…å†µä¸‹â€”â€”ä¾‹å¦‚å¤šä¸ªåº”ç”¨ IDï¼ˆappidï¼‰å…±äº«ç›¸åŒæŒ‡æ ‡åç§°ï¼Œæˆ–éœ€è¦ä¸çœ‹æ¿å˜é‡è¿›è¡Œå¤æ‚è”åŠ¨æ—¶â€”â€”ç”¨æˆ·å¯é€šè¿‡æ‰‹åŠ¨æŒ‡å®š appid å’Œ LogSQL æŸ¥è¯¢æ¡ä»¶æ¥ç²¾ç¡®æ§åˆ¶å…³è”é€»è¾‘ï¼Œç¡®ä¿ Exemplar æ•°æ®çš„å‡†ç¡®æå–ä¸å±•ç¤ºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/92503151435545ee89801a504b2cf770~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=X2Uk7wrsKgKzD9kYr15DYja2IWk%3D" alt="" loading="lazy"/></p>
<ol start="2">
<li>
<h3 data-id="heading-13">Drill-Down ä¸‹é’»åˆ†æ</h3>
</li>
</ol>
<p>ç±»ä¼¼ Grafana çš„ drilldown æœºåˆ¶ï¼ŒLala-Monitor å®ç°äº†åŸºäº Exemplar çš„æ·±åº¦ä¸‹é’»åˆ†æèƒ½åŠ›ã€‚ç”¨æˆ·å¯ç›´æ¥ç‚¹å‡»æŒ‡æ ‡æ›²çº¿ä¸Šçš„æ•°æ®ç‚¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æºå¸¦è¯¥ç‚¹çš„æ ‡ç­¾ä¿¡æ¯å’Œ PromQL æŸ¥è¯¢æ¡ä»¶ï¼Œç²¾å‡†è·³è½¬è‡³å…³è”çš„ Trace è¯¦æƒ…é¡µå’Œ Exemplar æ—¥å¿—åˆ†æç•Œé¢ï¼Œå®ç°ä»å®è§‚æŒ‡æ ‡åˆ°å¾®è§‚ä¸Šä¸‹æ–‡çš„æ— ç¼ç©¿é€ã€‚</p>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå½“ç”¨æˆ·åœ¨ HTTP RT ç›‘æ§æ›²çº¿ä¸­å‘ç°æ€§èƒ½çªåˆºç‚¹ï¼ˆçº¢è‰²æ ‡è®°å¤„ï¼‰ï¼Œåªéœ€ç‚¹å‡»è¯¥æ•°æ®ç‚¹ï¼ŒLala-Monitor å°†è‡ªåŠ¨è§¦å‘ Exemplar drill-down æµç¨‹ï¼šç³»ç»Ÿæ™ºèƒ½æ•è·è¯¥æ—¶é—´ç‚¹çš„æŒ‡æ ‡ä¸Šä¸‹æ–‡ï¼ˆåŒ…æ‹¬ hll_ipã€route ç­‰å…³é”®æ ‡ç­¾ï¼‰ï¼Œå¹¶æºå¸¦ç²¾ç¡®çš„æ—¶é—´çª—å£ï¼ˆ10:28:30.000 ï½ 10:29:30.000ï¼‰è·³è½¬è‡³ Exemplar æ—¥å¿—åˆ†æç•Œé¢ã€‚åœ¨æ­¤ç•Œé¢ä¸­ï¼Œç”¨æˆ·å¯ç›´æ¥æŸ¥çœ‹ä¸æ€§èƒ½å¼‚å¸¸ç›¸å…³çš„ç»“æ„åŒ–æ—¥å¿—ï¼ŒåŒ…æ‹¬ TraceIDã€è¯·æ±‚å‚æ•°åŠå“åº”æ—¶é—´ç­‰å…³é”®ä¿¡æ¯ï¼›</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/08b491c7064348dea7364ca5ae216963~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=%2BvLCFV3iMUFIubSLV6wfLcfsz4s%3D" alt="" loading="lazy"/></p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a90f7126aa28432abf1350187981a274~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=Crie7ckIbRnHx5Zs8BfmIBHbJq0%3D" alt="" loading="lazy"/></p>
<p>ç³»ç»Ÿä¼šåŸºäºå½“å‰ PromQL æŸ¥è¯¢ç‰¹å¾æ™ºèƒ½æ¨èèšåˆå‡½æ•°ï¼ˆå¦‚å›¾ä¸­è‡ªåŠ¨æ¨è maxï¼‰ï¼Œç”¨æˆ·ä¹Ÿå¯é€šè¿‡ä¸‹æ‹‰èœå•çµæ´»åˆ‡æ¢ sumã€avgã€p99 ç­‰å¤šç§èšåˆæ–¹å¼ï¼Œå¯¹æŸ¥è¯¢çª—å£å†…çš„ Exemplar æ•°æ®è¿›è¡Œå¤šç»´åº¦ç»Ÿè®¡åˆ†æï¼Œç²¾å‡†è¯†åˆ«æ€§èƒ½å¼‚å¸¸ç‚¹ä¸ä¸šåŠ¡å…³é”®ç‰¹å¾ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b4ff3f2df6d144978c93301484c38f17~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=5B6jP2GqBpkGFe%2FHQe0oKy0oHc0%3D" alt="" loading="lazy"/></p>
<ol start="3">
<li>
<h3 data-id="heading-14">æ—¥å¿—åˆ†æ</h3>
</li>
</ol>
<p>é™¤æŒ‡æ ‡ drill-down ä½œä¸ºä¸»è¦å…¥å£å¤–ï¼ŒLala-Monitor æä¾›ç‹¬ç«‹çš„ Exemplar æ—¥å¿—åˆ†æé¡µé¢ï¼Œæ”¯æŒå®Œæ•´çš„æ—¥å¿—æ£€ç´¢èƒ½åŠ›ã€‚è¯¥ç•Œé¢å…·å¤‡ä¸ Elasticsearch ç›¸ä¼¼çš„äº¤äº’ä½“éªŒï¼šæ”¯æŒäº¤äº’å¼æœç´¢ã€å­—æ®µè¿‡æ»¤ã€å…³é”®è¯æ’é™¤ã€æ­£åˆ™åŒ¹é…åŠ TopN ç»Ÿè®¡åˆ†æï¼ŒåŒæ—¶é’ˆå¯¹ Exemplar ç»“æ„åŒ–ç‰¹æ€§ä¼˜åŒ–äº†èšåˆæ“ä½œã€‚</p>
<p>åœ¨æ€§èƒ½æ–¹é¢ï¼ŒVlog çš„åœ¨äº¿çº§æ—¥å¿—è¡Œè§„æ¨¡ä¸‹ä»ä¿æŒç§’çº§å“åº”ã€‚è¿™å¾—ç›Šäºå½“å‰çš„æ•°æ®åˆ†ç‰‡ç­–ç•¥ï¼šæ¯ä¸ª Exemplar æµï¼ˆ_streamï¼‰ç”±<code>appid+metric-name</code>å”¯ä¸€æ ‡è¯†ï¼Œç¡®ä¿å•ä¸ªæ•°æ®æµè§„æ¨¡å¯æ§ã€‚ä¾‹å¦‚ï¼Œ"order-service+http_request_duration"æµä»…åŒ…å«è¯¥æœåŠ¡çš„ HTTP å»¶è¿Ÿæ•°æ®ï¼Œé¿å…äº†è·¨ä¸šåŠ¡ã€è·¨ç±»å‹æ—¥å¿—æ··æ‚æ•°æ®é‡è†¨èƒ€å¯¼è‡´çš„æ€§èƒ½è¡°å‡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fee58b2ef3ea465f8beea8c7ae61e8d2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=nef3qTodOZJP7BQD4EjTSsHuq6s%3D" alt="" loading="lazy"/></p>
<ol start="4">
<li>
<h3 data-id="heading-15"><strong>Drill-Up å¤šç»´ç»Ÿè®¡</strong></h3>
</li>
</ol>
<p>å¤šç»´ç»Ÿè®¡å°† Exemplar ç»“æ„åŒ–æ—¥å¿—è½¬åŒ–ä¸ºå¯è§†åŒ–å›¾è¡¨ï¼Œå®ç°é«˜åŸºæ•°ç»´åº¦çš„èšåˆåˆ†æã€‚ä¸ Prometheus æŒ‡æ ‡è¦æ±‚ç»´åº¦å¯æšä¸¾ã€åŸºæ•°æ”¶æ•›çš„ç‰¹æ€§ä¸åŒï¼ŒExemplar æ”¯æŒå¯¹ user_idã€driver_id ç­‰é«˜å‘æ•£æ€§ä¸šåŠ¡ç»´åº¦è¿›è¡Œå®æ—¶ç»Ÿè®¡ï¼Œä½¿ç ”å‘èƒ½å¤Ÿä»æµ·é‡æ—¥å¿—ä¸­å¿«é€Ÿè¯†åˆ«å¼‚å¸¸æ¨¡å¼å’Œä¸šåŠ¡ç‰¹å¾ï¼Œçªç ´æŒ‡æ ‡ç³»ç»Ÿåœ¨ç»´åº¦åˆ†æä¸Šçš„é™åˆ¶ã€‚</p>
<p>ä»¥ä¸‹çš„æ—¶åºå›¾å¯ç”¨æ¥å¯¹å¤šä¸ªç»´åº¦è¿›è¡Œ group by çš„ç»Ÿè®¡ï¼Œç±»ä¼¼ prometheus çš„ range query</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4480559aeed84520ac7a2a112acaa5eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=Foxrg1dKpROBHtEcq55UUIHNFb8%3D" alt="" loading="lazy"/></p>
<p>è€Œæ’è¡Œæ¦œå’Œé¥¼å›¾çš„åŠŸèƒ½åŸºæœ¬ä¸€è‡´ï¼Œå¯è¿›è¡Œæ€»é‡è®¡ç®—ï¼Œç±»ä¼¼ promethues çš„ instant query</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a31fa8ec9d404298a39395435221d406~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=oyK8phxTV9%2F8IvyGMeO54KITUg0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-16">äº”ã€Exemplar åœ¨è´§æ‹‰æ‹‰çš„è½åœ°</h2>
<p>åœ¨å®Œæˆ Client SDK å’Œ Server Collector å»ºè®¾åï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨å†…éƒ¨ç›‘æ§å¹³å°ä¸Šçº¿éªŒè¯ï¼Œæ•ˆæœç¬¦åˆé¢„æœŸã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5aea542461c4c8ab34303f061d811a1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=gkjAK%2FMPZOsunqaA6Nhzd2IyuAs%3D" alt="" loading="lazy"/></p>
<ul>
<li>é’ˆå¯¹ä¸šåŠ¡è‡ªå®šä¹‰æŒ‡æ ‡åœºæ™¯ï¼Œé‡ç‚¹è§£å†³é«˜åŸºæ•°é—®é¢˜ã€‚ä¸šåŠ¡å®šä½æ—¶éœ€é€šè¿‡ç”¨æˆ· IDã€å¸æœº IDã€è®¢å• ID ç­‰å…³é”®å±æ€§ä¸‹é’»ï¼Œä½†ä¼ ç»ŸæŒ‡æ ‡æ— æ³•å°†æ­¤ç±»é«˜åŸºæ•°æ•°æ®æ”¾å…¥ Labelã€‚é€šè¿‡ Exemplar æœºåˆ¶ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨æŒ‡æ ‡é‡‡æ ·ä¸­æºå¸¦ä¸šåŠ¡ ID åŠå…³è” Trace ä¿¡æ¯ï¼Œä½¿é—®é¢˜åˆ†æèƒ½ä»ä¸šåŠ¡å±æ€§ç›´æ¥åˆ‡å…¥ï¼Œæ— éœ€è·¨ç³»ç»Ÿè½¬æ¢æŸ¥æ‰¾ Traceã€‚</li>
<li>ç›®å‰æ ¸å¿ƒè®¢å•æœåŠ¡çš„è®¢å•ç»Ÿè®¡æŒ‡æ ‡ã€ä¼ä¸šä¸šåŠ¡çš„å¼‚å¸¸ç»Ÿè®¡æŒ‡æ ‡ç­‰å‡ åä¸ªæ ¸å¿ƒæœåŠ¡å·²å®Œæˆä¸Šçº¿ï¼Œä¸šåŠ¡å›¢é˜Ÿåé¦ˆé—®é¢˜å®šä½æ•ˆç‡æ˜¾è‘—æå‡ï¼Œè·å¾—ä¸€çº¿åŒå­¦çš„ä¸€è‡´è®¤å¯ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a869ab8357e04ca3a12827cea949654b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6LSn5ouJ5ouJ5oqA5pyv:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768354785&amp;x-signature=sxF1VSC8ssV9yOK5%2B1wVFy02K4g%3D" alt="" loading="lazy"/></p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æŠŠ Exemplar èƒ½åŠ›ä¸‹æ²‰è‡³åŸºç¡€ç»„ä»¶ï¼ˆå¦‚ SOAã€MySQL/Redis å®¢æˆ·ç«¯ï¼‰ï¼Œè¦†ç›–æ›´å¤šåŸºç¡€è®¾æ–½å±‚æŒ‡æ ‡ã€‚</p>
<hr/>
<h2 data-id="heading-17">å…­ã€æœªæ¥å±•æœ›</h2>
<p>è¿‡å»å‡ ä¸ªæœˆï¼Œæˆ‘ä»¬å·²åˆæ­¥è½åœ° Exemplar æŠ€æœ¯ï¼Œè¦†ç›–éƒ¨åˆ†æ ¸å¿ƒä¸šåŠ¡åœºæ™¯ã€‚2026 å¹´ï¼Œæˆ‘ä»¬å°†é‡ç‚¹æ·±åŒ– Exemplar åœ¨æ•°æ®èåˆé¢†åŸŸçš„åº”ç”¨ä»·å€¼ï¼š</p>
<ol>
<li>
<h3 data-id="heading-18">æ¡†æ¶æŒ‡æ ‡â†’é“¾è·¯çš„ç²¾å‡†å…³è”</h3>
</li>
</ol>
<p>å½“å‰è´§æ‹‰æ‹‰ Java æ¡†æ¶ä¸­ï¼Œé“¾è·¯æ•°æ®é€šè¿‡ SkyWalking çš„ gRPC é€šé“ä¸ŠæŠ¥ Traceï¼Œæ¡†æ¶æŒ‡æ ‡æ•°æ®åˆ™ä¾èµ– Micrometer é‡‡é›†ã€‚ä¸¤è€…è™½èƒ½åŸºäºæ¥å£ç±»å‹ã€æ–¹æ³•åç­‰ç»´åº¦è¿›è¡Œå…³è”ï¼Œä½†å­˜åœ¨æ˜¾è‘—ç¼ºé™·ï¼š</p>
<ul>
<li>æ•°æ®ç²’åº¦ä¸åŒ¹é…ï¼šæŒ‡æ ‡å±‚é¢çš„æ¥å£èšåˆä¼šä¸¢å¤±æ˜ç»†ç‰¹å¾ï¼Œè€Œé“¾è·¯æ•°æ®ä¿æŒåŸå§‹ç²’åº¦ï¼›</li>
<li>ç»´åº¦å®šä¹‰å·®å¼‚ï¼šæŒ‡æ ‡ä¸é“¾è·¯åœ¨åŸ‹ç‚¹æ—¶çš„ç»´åº¦å‘½åã€å–å€¼é€»è¾‘å­˜åœ¨ä¸ä¸€è‡´ï¼›</li>
<li>æ£€ç´¢èƒ½åŠ›å—é™ï¼šç°æœ‰çš„ trace å­˜å‚¨æ–¹æ¡ˆä»…æ”¯æŒ Segment çº§ RT å€’åºï¼Œç¼ºä¹ Span çº§ç²¾ç»†åŒ–æ’åºèƒ½åŠ›ï¼›</li>
</ul>
<p>è¿™äº›ç¼ºé™·å¯¼è‡´ç‚¹å‡»æŒ‡æ ‡æ—¶éš¾ä»¥ç²¾å‡†ä¸‹é’»è‡³å…³é”® Traceï¼Œå½±å“é—®é¢˜å®šä½æ•ˆç‡ã€‚æ˜å¹´ï¼Œæˆ‘ä»¬å°†é‡æ„å…³è”æœºåˆ¶ï¼Œé€šè¿‡ Exemplar æ ‡å‡†åŒ–ä¸ŠæŠ¥ TraceID ä¸ SpanIDï¼Œå®ç°æ¡†æ¶æŒ‡æ ‡ä¸é“¾è·¯çš„ç²¾å‡†æ˜ å°„ã€‚</p>
<ol start="2">
<li>
<h3 data-id="heading-19">åŸºäº Exemplar æ•°æ®çš„æ•…éšœå®šä½</h3>
</li>
</ol>
<p>Exemplar çš„æ ¸å¿ƒä»·å€¼ä¸ä»…åœ¨äºå®ç°æŒ‡æ ‡ä¸ä¸Šä¸‹æ–‡çš„å…³è”ï¼Œæ›´åœ¨äºå…¶ä½œä¸ºç»“æ„åŒ–æ—¥å¿—æ‰€å…·å¤‡çš„åˆ†ææ½œåŠ›ã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬å°†é‡ç‚¹åœ¨æ˜å¹´è¿›è¡ŒåŸºäº Exemplar è¿›è¡Œè‡ªåŠ¨åŒ–æ¨å¯¼é“¾è®¾è®¡ï¼Œå°†å¯è§‚æµ‹æ•°æ®çœŸæ­£è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„æ•…éšœæ´å¯Ÿã€‚</p>
<p>è¯¥æ¨å¯¼é“¾ä»¥æŠ¥è­¦ã€å·¡æ£€ã€äººå·¥è§¦å‘ä¸ºèµ·ç‚¹ï¼Œä»¥æ ¹å› ä¸ºç»ˆç‚¹ï¼Œé€šè¿‡ä»¥ä¸‹ç¯èŠ‚è¿›è¡Œè‡ªåŠ¨æ¨ç†ï¼š</p>
<ul>
<li><strong>æŠ¥è­¦è§¦å‘ä¸ Exemplar æŠ½æ ·</strong>ï¼šå½“æŒ‡æ ‡æŠ¥è­¦è§¦å‘æ—¶ï¼Œç³»ç»Ÿè‡ªåŠ¨å›æº¯è¯¥æŒ‡æ ‡åœ¨å¼‚å¸¸çª—å£å†…çš„æ‰€æœ‰ Exemplar æ•°æ®ã€‚å¾—ç›Šäº Exemplar ä¸æŒ‡æ ‡æ ·æœ¬çš„åŸç”Ÿç»‘å®šï¼Œæ— éœ€é¢å¤–å…³è”é€»è¾‘å³å¯è·å–é«˜è´¨é‡ä¸Šä¸‹æ–‡æ ·æœ¬ï¼›</li>
<li><strong>Trace è‡ªåŠ¨å…³è”</strong>ï¼šä» Exemplar ä¸­æå– <code>trace_id</code> é›†åˆï¼Œæ‰¹é‡æŸ¥è¯¢åˆ†å¸ƒå¼é“¾è·¯ç³»ç»Ÿï¼Œè¿˜åŸå®Œæ•´è°ƒç”¨æ‹“æ‰‘ã€‚ç”±äº Exemplar å·²æºå¸¦ç²¾ç¡®æ—¶é—´æˆ³ä¸æœåŠ¡ä¸Šä¸‹æ–‡ï¼Œå¯é¿å…æ¨¡ç³Šæ£€ç´¢å¸¦æ¥çš„å™ªå£°ï¼›</li>
<li><strong>å¼‚å¸¸ç»´åº¦æ”¶æ•›</strong>ï¼šå¤ç”¨å·²å®ç°çš„æŒ‡æ ‡ä¸‹é’»åˆ†æï¼Œç»“åˆå…³è” Trace çš„ç»“æ„åŒ–å­—æ®µï¼ˆå¦‚ <code>service_name</code>ã€<code>endpoint</code>ã€<code>error_code</code>ï¼‰è¿›è¡Œå®æ—¶èšåˆï¼Œè¯†åˆ«é«˜é¢‘å¼‚å¸¸ç»´åº¦ã€‚ä¾‹å¦‚ï¼Œè‹¥ 80% çš„ Trace å‡åŒ…å« <code>error_code=DB_TIMEOUT</code>ï¼Œåˆ™å°†å…¶æ ‡è®°ä¸ºå€™é€‰æ ¹å› ï¼›</li>
<li><strong>å¤šæŒ‡æ ‡ååŒæŠ˜å </strong>ï¼šå½“æŸä¸ª appid å¤šä¸ªæŒ‡æ ‡åŒæ—¶æŠ¥è­¦æ—¶ï¼Œè®¡ç®—å…¶ Exemplar ä¸­ <code>trace_id</code> çš„äº¤é›†ã€‚è‹¥äº¤é›†æ˜¾è‘—ï¼Œåˆ™åˆ¤å®šä¸ºåŒä¸€åº•å±‚æ•…éšœï¼Œå¹¶å°†å¤šä¸ªå‘Šè­¦æŠ˜å ä¸ºå•ä¸€äº‹ä»¶ï¼Œé¿å…å‘Šè­¦é£æš´ï¼›</li>
<li><strong>ç»“æ„åŒ–æ¨å¯¼è¾“å‡º</strong>ï¼šæœ€ç»ˆç”ŸæˆåŒ…å«â€œå¼‚å¸¸æŒ‡æ ‡â€”å…³è” Traceâ€”æ”¶æ•›ç»´åº¦â€”å½±å“èŒƒå›´â€çš„å®Œæ•´è¯æ®é“¾ï¼Œç›´æ¥åµŒå…¥æŠ¥è­¦é€šçŸ¥æˆ–è¿ç»´å·¥å•ï¼Œä¸ºæ•…éšœå¤„ç†æä¾›å¯æ“ä½œçš„ä¸Šä¸‹æ–‡ï¼Œè€Œéä»…ä»…å †ç Œå‡ ä¸ªç›¸å…³çš„ traceã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ­ç§˜ Spring Boot äº‹åŠ¡ï¼šåŠ¨æ€å¢å¼ºçš„åº•å±‚å®ç°ä¸æ ¸å¿ƒç»„ä»¶]]></title>    <link>https://juejin.cn/post/7592069113222512659</link>    <guid>https://juejin.cn/post/7592069113222512659</guid>    <pubDate>2026-01-06T23:34:13.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592069113222512659" data-draft-id="7591792747775246346" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ­ç§˜ Spring Boot äº‹åŠ¡ï¼šåŠ¨æ€å¢å¼ºçš„åº•å±‚å®ç°ä¸æ ¸å¿ƒç»„ä»¶"/> <meta itemprop="keywords" content="Spring Boot"/> <meta itemprop="datePublished" content="2026-01-06T23:34:13.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é—²ç…®å…‰é˜´"/> <meta itemprop="url" content="https://juejin.cn/user/1523239911963420"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ­ç§˜ Spring Boot äº‹åŠ¡ï¼šåŠ¨æ€å¢å¼ºçš„åº•å±‚å®ç°ä¸æ ¸å¿ƒç»„ä»¶
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1523239911963420/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é—²ç…®å…‰é˜´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T23:34:13.000Z" title="Tue Jan 06 2026 23:34:13 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿå’Œå¤æ‚ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œäº‹åŠ¡ç®¡ç†æ˜¯ä¿éšœæ•°æ®ä¸€è‡´æ€§çš„æ ¸å¿ƒæŠ€æœ¯ä¹‹ä¸€ã€‚Spring Boot æä¾›çš„å£°æ˜å¼äº‹åŠ¡æœºåˆ¶ï¼Œé€šè¿‡ â€œåŠ¨æ€â€ æ–¹å¼ç®€åŒ–äº†äº‹åŠ¡é…ç½®ï¼Œè®©å¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™äº‹åŠ¡æ§åˆ¶ä»£ç ï¼Œä»…é€šè¿‡ç®€å•æ³¨è§£å³å¯å®ç°äº‹åŠ¡ç®¡ç†ã€‚æœ¬æ–‡å°†ä» â€œé—®é¢˜æœ¬è´¨ - åŸºç¡€çŸ¥è¯† - å®ç°æµç¨‹ - åº•å±‚åŸç†â€ å››ä¸ªç»´åº¦ï¼Œå±‚å±‚æ‹†è§£ Spring Boot åŠ¨æ€äº‹åŠ¡çš„å®ç°é€»è¾‘ã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å¦‚ä½•å®ç°åŠ¨æ€äº‹åŠ¡ï¼Ÿâ€”â€” é—®é¢˜æœ¬è´¨ä¸æ ¸å¿ƒæ€è·¯</h2>
<p>åŠ¨æ€äº‹åŠ¡çš„æ ¸å¿ƒè¯‰æ±‚æ˜¯ï¼šè®©ç¨‹åºè‡ªåŠ¨è¯†åˆ«éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼Œå¹¶è‡ªåŠ¨å®Œæˆäº‹åŠ¡çš„å¼€å¯ã€æäº¤ã€å›æ»šç­‰æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬è´¨æ˜¯ â€œæ ‡è®°è¯†åˆ« + é€»è¾‘æ‰§è¡Œâ€ çš„ç»„åˆï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç”Ÿæ´»åŒ–çš„åœºæ™¯ç†è§£å…¶æ ¸å¿ƒæ€è·¯ï¼š</p>
<ol>
<li>
<p><strong>å¦‚ä½•è¯†åˆ«éœ€è¦äº‹åŠ¡çš„æ–¹æ³•ï¼Ÿâ€”â€” ç»™æ–¹æ³•æ‰“ â€œäº‹åŠ¡æ ‡è®°â€</strong></p>
<p>è¦è®©ç¨‹åºçŸ¥é“å“ªä¸ªæ–¹æ³•éœ€è¦äº‹åŠ¡ï¼Œæœ€ç›´æ¥çš„æ–¹å¼æ˜¯ç»™æ–¹æ³•æ·»åŠ ä¸€ä¸ª â€œæ˜¾æ€§æ ‡è®°â€ã€‚å°±åƒè¶…å¸‚é‡Œçš„å•†å“æ ‡ç­¾ï¼šæ— è®ºå•†å“æ˜¯é›¶é£Ÿã€æ—¥ç”¨å“è¿˜æ˜¯ç”Ÿé²œï¼Œåªè¦è´´ä¸Š â€œä¿ƒé”€â€ æ ‡ç­¾ï¼Œå°±ä¼šè¢«çº³å…¥ä¿ƒé”€æ´»åŠ¨ï¼›åŒç†ï¼Œæ— è®ºæ–¹æ³•æ˜¯æŸ¥è¯¢ã€æ–°å¢è¿˜æ˜¯ä¿®æ”¹æ“ä½œï¼Œåªè¦æ‰“ä¸Šç‰¹å®šæ ‡è®°ï¼Œå°±ä¼šè¢«ç¨‹åºè¯†åˆ«ä¸º â€œéœ€è¦äº‹åŠ¡æ”¯æŒâ€ çš„æ–¹æ³•ã€‚è¿™ä¸ªæ ‡è®°åœ¨ Spring Boot ä¸­ï¼Œå°±æ˜¯@Transactionalæ³¨è§£ã€‚</p>
</li>
<li>
<p><strong>å¦‚ä½•å¤„ç† â€œäº‹åŠ¡æ ‡è®°â€ï¼Ÿâ€”â€” ç¼–å†™ â€œæ ‡è®°è§£æå™¨â€</strong></p>
<p>ä»…æœ‰æ ‡è®°ä¸å¤Ÿï¼Œè¿˜éœ€è¦ä¸€ä¸ªèƒ½ â€œè¯»æ‡‚â€ æ ‡è®°çš„ç¨‹åºï¼Œæ¥æ‰§è¡Œæ ‡è®°å¯¹åº”çš„é€»è¾‘ï¼ˆå¼€å¯äº‹åŠ¡ã€æ‰§è¡Œæ–¹æ³•ã€æäº¤ / å›æ»šäº‹åŠ¡ï¼‰ã€‚è¿™å°±åƒæ”¶åˆ°ä¸€ä»½å¸¦ â€œåŠ æ€¥â€ æ ‡è®°çš„æ–‡ä»¶ï¼šé¦–å…ˆéœ€è¦è¯†åˆ« â€œåŠ æ€¥â€ æ ‡è®°ï¼Œç„¶åæ‰§è¡Œ â€œä¼˜å…ˆå¤„ç†ã€é™æ—¶å®Œæˆâ€ çš„é€»è¾‘ï¼›å¦‚æœæ²¡æœ‰è¿™ä¸ªè§£æé€»è¾‘ï¼Œâ€œåŠ æ€¥â€ æ ‡è®°å°±åªæ˜¯ä¸€ä¸ªæ— æ•ˆç¬¦å·ã€‚åœ¨ Spring Boot ä¸­ï¼Œè¿™ä¸ª â€œæ ‡è®°è§£æå™¨â€ å°±æ˜¯TransactionInterceptorï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼‰ã€‚</p>
</li>
</ol>
<p>ç»¼ä¸Šï¼ŒåŠ¨æ€äº‹åŠ¡çš„å®ç°åªéœ€<strong>ä¸¤ä¸ªæ ¸å¿ƒè¦ç´ </strong>ï¼š</p>
<ul>
<li><strong>æ ‡è®°ï¼š</strong> å‘Šè¯‰ç¨‹åº â€œè°éœ€è¦äº‹åŠ¡â€ï¼ˆå¯¹åº”@Transactionalæ³¨è§£ï¼‰ï¼›</li>
<li><strong>è§£æå™¨ï¼š</strong> å‘Šè¯‰ç¨‹åº â€œé‡åˆ°äº‹åŠ¡æ ‡è®°è¯¥åšä»€ä¹ˆâ€ï¼ˆå¯¹åº”TransactionInterceptorï¼‰ã€‚</li>
</ul>
<p>è¿™ä¸€æ€è·¯ä¹Ÿè´¯ç©¿äº† Spring ä½“ç³»çš„æ ¸å¿ƒè®¾è®¡æ€æƒ³ â€”â€” å¤§å¤šæ•° Spring ç‰¹æ€§ï¼ˆå¦‚ AOPã€ç¼“å­˜ã€å¼‚æ­¥ä»»åŠ¡ï¼‰ï¼Œéƒ½æ˜¯é€šè¿‡ â€œæ³¨è§£æ ‡è®° + è§£æå™¨â€ çš„ç»„åˆæ¨¡å¼å®ç°çš„ã€‚</p>
<h2 data-id="heading-1">äºŒã€Spring Boot äº‹åŠ¡å®ç°çš„åŸºç¡€çŸ¥è¯†å‚¨å¤‡</h2>
<p>è¦ç†è§£åŠ¨æ€äº‹åŠ¡çš„åº•å±‚é€»è¾‘ï¼Œéœ€è¦å…ˆæŒæ¡ä¸‰ä¸ªæ ¸å¿ƒåŸºç¡€çŸ¥è¯†ï¼Œå®ƒä»¬æ˜¯äº‹åŠ¡å®ç°çš„ â€œåœ°åŸºâ€ï¼š</p>
<ol>
<li>
<p><strong>Spring Boot æŸ¥æ‰¾ Bean çš„æµç¨‹</strong></p>
<p>Spring Boot çš„æ ¸å¿ƒæ˜¯ IoC å®¹å™¨ï¼Œæ‰€æœ‰è¢«ç®¡ç†çš„å¯¹è±¡ï¼ˆBeanï¼‰éƒ½ä¼šé€šè¿‡å®¹å™¨åˆå§‹åŒ–ã€æ³¨å†Œã€è·å–ã€‚äº‹åŠ¡ç®¡ç†çš„å‰ææ˜¯ï¼šéœ€è¦äº‹åŠ¡æ”¯æŒçš„ Bean å¿…é¡»è¢« Spring IoC å®¹å™¨ç®¡ç†ï¼ˆå³ â€œäº¤ç»™ Spring ç®¡â€ï¼‰ï¼Œå¦åˆ™å®¹å™¨æ— æ³•å¯¹å…¶è¿›è¡Œäº‹åŠ¡å¢å¼ºã€‚æ ¸å¿ƒæµç¨‹åŒ…æ‹¬ï¼šæ‰«ææŒ‡å®šåŒ…è·¯å¾„â†’è§£æç±»ä¸Šçš„@Componentã€@Serviceç­‰æ³¨è§£â†’åˆ›å»º Bean å®ä¾‹â†’æ³¨å†Œåˆ° IoC å®¹å™¨ã€‚</p>
</li>
<li>
<p><strong>Spring Context åˆå§‹åŒ–æµç¨‹</strong></p>
<p>Spring Contextï¼ˆåº”ç”¨ä¸Šä¸‹æ–‡ï¼‰æ˜¯ IoC å®¹å™¨çš„å…·ä½“å®ç°ï¼Œå…¶åˆå§‹åŒ–è¿‡ç¨‹ä¼šè§¦å‘ä¸€ç³»åˆ—å…³é”®æ“ä½œï¼šåŠ è½½é…ç½®ç±»â†’æ‰«æ Bean å®šä¹‰â†’å®ä¾‹åŒ– Beanâ†’æ‰§è¡Œ Bean çš„åç½®å¤„ç†å™¨ï¼ˆBeanPostProcessorï¼‰ã€‚äº‹åŠ¡çš„åŠ¨æ€å¢å¼ºï¼Œæ­£æ˜¯é€šè¿‡ â€œBean åç½®å¤„ç†å™¨â€ åœ¨ Bean åˆå§‹åŒ–åæœŸå®Œæˆçš„ã€‚</p>
</li>
<li>
<p><strong>Spring AOP æµç¨‹</strong></p>
<p>Spring äº‹åŠ¡çš„åº•å±‚ä¾èµ– AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰ã€‚AOP é€šè¿‡ â€œåŠ¨æ€ä»£ç†â€ æœºåˆ¶ï¼Œåœ¨ä¸ä¿®æ”¹ç›®æ ‡æ–¹æ³•æºç çš„å‰æä¸‹ï¼Œå¯¹æ–¹æ³•è¿›è¡Œå¢å¼ºï¼ˆå¦‚æ·»åŠ äº‹åŠ¡æ§åˆ¶é€»è¾‘ï¼‰ã€‚</p>
</li>
</ol>
<h2 data-id="heading-2">ä¸‰ã€Spring Boot äº‹åŠ¡çš„å…·ä½“å®ç°æµç¨‹</h2>
<p>åŸºäºä¸Šè¿°åŸºç¡€çŸ¥è¯†ï¼ŒSpring Boot å®ç°äº‹åŠ¡çš„æµç¨‹å¯ç®€åŒ–ä¸º 4 æ­¥ï¼Œä¸”å¤§éƒ¨åˆ†æ­¥éª¤ç”±æ¡†æ¶è‡ªåŠ¨å®Œæˆï¼Œå¼€å‘è€…ä»…éœ€å°‘é‡é…ç½®ï¼š</p>
<ol>
<li>
<p><strong>å°†ç›®æ ‡å¯¹è±¡äº¤ç»™ Spring ç®¡ç†</strong></p>
<p>åœ¨ä¸šåŠ¡ç±»ï¼ˆå¦‚UserServiceï¼‰ä¸Šæ·»åŠ @Serviceæ³¨è§£ï¼Œè®© Spring åœ¨åˆå§‹åŒ–æ—¶æ‰«æå¹¶åˆ›å»ºè¯¥ç±»çš„ Bean å®ä¾‹ï¼Œçº³å…¥ IoC å®¹å™¨ç®¡ç†ã€‚è¿™æ˜¯äº‹åŠ¡å¢å¼ºçš„å‰æ â€”â€” åªæœ‰å®¹å™¨ç®¡ç†çš„ Beanï¼Œæ‰èƒ½è¢« AOP åŠ¨æ€ä»£ç†ã€‚</p>
</li>
<li>
<p><strong>ç»™ç›®æ ‡æ–¹æ³•æ·»åŠ äº‹åŠ¡æ ‡è®°</strong></p>
<p>åœ¨éœ€è¦äº‹åŠ¡æ”¯æŒçš„æ–¹æ³•ï¼ˆå¦‚addUser()ï¼‰ä¸Šæ·»åŠ @Transactionalæ³¨è§£ã€‚è¯¥æ³¨è§£å¯é…ç½®äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼ˆå¦‚propagation = Propagation.REQUIREDï¼‰ã€éš”ç¦»çº§åˆ«ï¼ˆå¦‚isolation = Isolation.READ_COMMITTEDï¼‰ã€å›æ»šæ¡ä»¶ï¼ˆå¦‚rollbackFor = Exception.classï¼‰ç­‰å±æ€§ï¼Œç²¾å‡†æ§åˆ¶äº‹åŠ¡è¡Œä¸ºã€‚</p>
</li>
<li>
<p><strong>Spring è‡ªåŠ¨åŠ è½½äº‹åŠ¡è§£æå™¨</strong></p>
<p>å¼€å‘è€…æ— éœ€æ‰‹åŠ¨ç¼–å†™äº‹åŠ¡è§£æé€»è¾‘ï¼ŒSpring Boot é€šè¿‡ â€œè‡ªåŠ¨é…ç½®â€ æœºåˆ¶ï¼Œé»˜è®¤åŠ è½½TransactionInterceptorï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼‰ã€‚è¯¥æ‹¦æˆªå™¨å°è£…äº†äº‹åŠ¡çš„æ ¸å¿ƒé€»è¾‘ï¼šå¼€å¯äº‹åŠ¡â†’æ‰§è¡Œç›®æ ‡æ–¹æ³•â†’è‹¥æ–¹æ³•æ­£å¸¸æ‰§è¡Œåˆ™æäº¤äº‹åŠ¡â†’è‹¥æŠ›å‡ºå¼‚å¸¸åˆ™å›æ»šäº‹åŠ¡ã€‚</p>
</li>
<li>
<p><strong>Spring AOP è‡ªåŠ¨å®Œæˆåˆ‡é¢ç»‡å…¥</strong></p>
<p>Spring Boot è‡ªåŠ¨å°†@Transactionalæ³¨è§£è§£æä¸ºåˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼Œå°†TransactionInterceptorä½œä¸ºé€šçŸ¥ï¼ˆAdviceï¼‰ï¼Œç»„åˆæˆåˆ‡é¢ï¼ˆAdvisorï¼‰ã€‚éšåé€šè¿‡ AOP åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œä¸ºç›®æ ‡ Bean ç”Ÿæˆä»£ç†å¯¹è±¡ â€”â€” å½“è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œä»£ç†å¯¹è±¡ä¼šå…ˆè§¦å‘TransactionInterceptorçš„äº‹åŠ¡é€»è¾‘ï¼Œå†æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</p>
</li>
</ol>
<p><strong>æ€»ç»“ï¼š</strong> å¼€å‘è€…ä»…éœ€å®Œæˆ â€œæ·»åŠ @Serviceæ³¨è§£â€ å’Œ â€œæ·»åŠ @Transactionalæ³¨è§£â€ ä¸¤æ­¥ï¼ŒSpring Boot ä¼šè‡ªåŠ¨å®Œæˆ â€œåŠ è½½è§£æå™¨â€ å’Œ â€œAOP ç»‡å…¥â€ï¼Œå®ç°äº‹åŠ¡çš„åŠ¨æ€å¢å¼ºã€‚</p>
<h2 data-id="heading-3">å››ã€Spring Boot äº‹åŠ¡çš„åº•å±‚å®ç°åŸç†</h2>
<p>ä¸Šè¿°æµç¨‹çš„æ ¸å¿ƒæ˜¯ â€œè‡ªåŠ¨é…ç½®â€ å’Œ â€œAOP åŠ¨æ€ä»£ç†â€ï¼Œä¸‹é¢é€šè¿‡æºç æ‹†è§£å…³é”®æ­¥éª¤ï¼Œæ­ç§˜å…¶åº•å±‚é€»è¾‘ï¼ˆé‡ç‚¹è§£ææµç¨‹ 3 å’Œæµç¨‹ 4ï¼‰ã€‚</p>
<h3 data-id="heading-4">1. äº‹åŠ¡è‡ªåŠ¨é…ç½®çš„å…¥å£ï¼šTransactionAutoConfiguration</h3>
<p>Spring Boot çš„è‡ªåŠ¨é…ç½®ä¾èµ–META-INF/spring.factoriesæ–‡ä»¶ï¼Œå…¶ä¸­æ³¨å†Œäº†TransactionAutoConfigurationï¼ˆäº‹åŠ¡è‡ªåŠ¨é…ç½®ç±»ï¼‰ã€‚å½“ Spring Boot å¯åŠ¨æ—¶ï¼Œä¼šæ‰«æè¯¥æ–‡ä»¶å¹¶åŠ è½½è¯¥ç±»ï¼Œå¼€å¯äº‹åŠ¡ç®¡ç†èƒ½åŠ›ã€‚</p>
<p>TransactionAutoConfigurationçš„æ ¸å¿ƒå†…éƒ¨ç±»EnableTransactionManagementConfigurationï¼Œé€šè¿‡@EnableTransactionManagementæ³¨è§£è§¦å‘äº‹åŠ¡ç›¸å…³ Bean çš„åŠ è½½ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-meta">@ConditionalOnClass(PlatformTransactionManager.class)</span>
<span class="hljs-meta">@AutoConfigureAfter({JtaAutoConfiguration.class, HibernateJpaAutoConfiguration.class})</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TransactionAutoConfiguration</span> {

    <span class="hljs-comment">// å†…éƒ¨ç±»ï¼šå¯ç”¨äº‹åŠ¡ç®¡ç†çš„é…ç½®</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EnableTransactionManagementConfiguration</span> {

        <span class="hljs-comment">// CGLIBåŠ¨æ€ä»£ç†é…ç½®ï¼ˆé»˜è®¤å¯ç”¨ï¼‰</span>
        <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
        <span class="hljs-meta">@EnableTransactionManagement(proxyTargetClass = true)</span>
        <span class="hljs-meta">@ConditionalOnProperty(
            prefix = "spring.aop", 
            name = "proxy-target-class", 
            havingValue = "true", 
            matchIfMissing = true
        )</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CglibAutoProxyConfiguration</span> {
        }

        <span class="hljs-comment">// JDKåŠ¨æ€ä»£ç†é…ç½®ï¼ˆéœ€æ‰‹åŠ¨è®¾ç½®spring.aop.proxy-target-class=falseï¼‰</span>
        <span class="hljs-meta">@Configuration(proxyBeanMethods = false)</span>
        <span class="hljs-meta">@EnableTransactionManagement(proxyTargetClass = false)</span>
        <span class="hljs-meta">@ConditionalOnProperty(
            prefix = "spring.aop", 
            name = "proxy-target-class", 
            havingValue = "false"
        )</span>
        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">JdkDynamicAutoProxyConfiguration</span> {
        }
    }
}
</code></pre>
<p>å…³é”®è¯´æ˜ï¼š</p>
<ul>
<li><strong>@EnableTransactionManagementï¼š</strong> äº‹åŠ¡å®ç°çš„æ ¸å¿ƒæ³¨è§£ï¼Œç”¨äºåŠ è½½äº‹åŠ¡ç®¡ç†ç›¸å…³çš„ Beanï¼›</li>
<li><strong>proxyTargetClass = trueï¼š</strong> é»˜è®¤ä½¿ç”¨ CGLIB åŠ¨æ€ä»£ç†ï¼ˆå¯ä»£ç†ç±»å’Œæ¥å£ï¼‰ï¼Œfalseæ—¶ä½¿ç”¨ JDK åŠ¨æ€ä»£ç†ï¼ˆä»…ä»£ç†æ¥å£ï¼‰ã€‚</li>
</ul>
<h3 data-id="heading-5">2. @EnableTransactionManagementçš„æ ¸å¿ƒä½œç”¨ï¼šåŠ è½½ä¸¤å¤§å…³é”®ç»„ä»¶</h3>
<p>@EnableTransactionManagementé€šè¿‡Importæ³¨è§£ï¼Œå¯¼å…¥äº†ä¸¤ä¸ªæ ¸å¿ƒç±»ï¼šProxyTransactionManagementConfigurationå’ŒAutoProxyRegistrarï¼ŒäºŒè€…å…±åŒå®Œæˆäº‹åŠ¡çš„ AOP å¢å¼ºã€‚</p>
<p><strong>ï¼ˆ1ï¼‰ProxyTransactionManagementConfigurationï¼š</strong> åˆ›å»ºäº‹åŠ¡åˆ‡é¢ï¼ˆAdvisorï¼‰è¯¥ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œé€šè¿‡@Beanæ³¨è§£æ³¨å†Œäº†ä¸‰ä¸ªæ ¸å¿ƒ Beanï¼Œæœ€ç»ˆç»„åˆæˆäº‹åŠ¡åˆ‡é¢ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@Configuration</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyTransactionManagementConfiguration</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AbstractTransactionManagementConfiguration</span> {

    <span class="hljs-comment">// 1. æ³¨å†Œäº‹åŠ¡åˆ‡é¢ï¼ˆAdvisorï¼‰ï¼šåˆ‡å…¥ç‚¹ + é€šçŸ¥çš„ç»„åˆ</span>
    <span class="hljs-meta">@Bean(name = TransactionManagementConfigUtils.TRANSACTION_ADVISOR_BEAN_NAME)</span>
    <span class="hljs-meta">@Role(BeanDefinition.ROLE_INFRASTRUCTURE)</span>
    <span class="hljs-keyword">public</span> BeanFactoryTransactionAttributeSourceAdvisor <span class="hljs-title function_">transactionAdvisor</span><span class="hljs-params">(
            TransactionAttributeSource transactionAttributeSource,
            TransactionInterceptor transactionInterceptor)</span> {
        <span class="hljs-type">BeanFactoryTransactionAttributeSourceAdvisor</span> <span class="hljs-variable">advisor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BeanFactoryTransactionAttributeSourceAdvisor</span>();
        <span class="hljs-comment">// ç»‘å®šåˆ‡å…¥ç‚¹ï¼šé€šè¿‡TransactionAttributeSourceè¯†åˆ«@Transactionalæ³¨è§£</span>
        advisor.setTransactionAttributeSource(transactionAttributeSource);
        <span class="hljs-comment">// ç»‘å®šé€šçŸ¥ï¼šé€šè¿‡TransactionInterceptoræ‰§è¡Œäº‹åŠ¡é€»è¾‘</span>
        advisor.setAdvice(transactionInterceptor);
        <span class="hljs-comment">// è®¾ç½®åˆ‡é¢ä¼˜å…ˆçº§ï¼ˆå¯é€šè¿‡@EnableTransactionManagementçš„orderå±æ€§é…ç½®ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.enableTx != <span class="hljs-literal">null</span>) {
            advisor.setOrder(<span class="hljs-built_in">this</span>.enableTx.&lt;Integer&gt;getNumber(<span class="hljs-string">"order"</span>));
        }
        <span class="hljs-keyword">return</span> advisor;
    }

    <span class="hljs-comment">// 2. æ³¨å†ŒTransactionAttributeSourceï¼šè§£æ@Transactionalæ³¨è§£çš„å±æ€§</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Role(BeanDefinition.ROLE_INFRASTRUCTURE)</span>
    <span class="hljs-keyword">public</span> TransactionAttributeSource <span class="hljs-title function_">transactionAttributeSource</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">// AnnotationTransactionAttributeSourceä¸“é—¨ç”¨äºè§£æ@Transactionalæ³¨è§£</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AnnotationTransactionAttributeSource</span>();
    }

    <span class="hljs-comment">// 3. æ³¨å†ŒTransactionInterceptorï¼šäº‹åŠ¡æ‹¦æˆªå™¨ï¼ˆæ ¸å¿ƒé€šçŸ¥é€»è¾‘ï¼‰</span>
    <span class="hljs-meta">@Bean</span>
    <span class="hljs-meta">@Role(BeanDefinition.ROLE_INFRASTRUCTURE)</span>
    <span class="hljs-keyword">public</span> TransactionInterceptor <span class="hljs-title function_">transactionInterceptor</span><span class="hljs-params">(TransactionAttributeSource transactionAttributeSource)</span> {
        <span class="hljs-type">TransactionInterceptor</span> <span class="hljs-variable">interceptor</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">TransactionInterceptor</span>();
        <span class="hljs-comment">// ç»‘å®šæ³¨è§£è§£æå™¨ï¼Œç”¨äºè·å–@Transactionalçš„é…ç½®å±æ€§ï¼ˆå¦‚éš”ç¦»çº§åˆ«ã€å›æ»šæ¡ä»¶ï¼‰</span>
        interceptor.setTransactionAttributeSource(transactionAttributeSource);
        <span class="hljs-comment">// ç»‘å®šäº‹åŠ¡ç®¡ç†å™¨ï¼ˆå¦‚DataSourceTransactionManagerï¼Œé»˜è®¤è‡ªåŠ¨é…ç½®ï¼‰</span>
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.txManager != <span class="hljs-literal">null</span>) {
            interceptor.setTransactionManager(<span class="hljs-built_in">this</span>.txManager);
        }
        <span class="hljs-keyword">return</span> interceptor;
    }
}
</code></pre>
<p>ä¸‰ä¸ª Bean çš„ä½œç”¨åˆ†å·¥ï¼š</p>
<ul>
<li><strong>TransactionAttributeSourceï¼š</strong> è§£æ@Transactionalæ³¨è§£çš„å±æ€§ï¼ˆå¦‚rollbackForã€propagationï¼‰ï¼Œå°†æ³¨è§£ä¿¡æ¯å°è£…ä¸ºTransactionAttributeå¯¹è±¡ï¼›</li>
<li><strong>TransactionInterceptorï¼š</strong> äº‹åŠ¡çš„æ ¸å¿ƒæ‰§è¡Œé€»è¾‘ï¼Œå®ç°äº†MethodInterceptoræ¥å£ï¼Œåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰åæ‹¦æˆªï¼š
æ‰§è¡Œå‰ï¼šæ ¹æ®TransactionAttributeå¼€å¯äº‹åŠ¡ï¼›æ‰§è¡Œåï¼šè‹¥æ–¹æ³•æ— å¼‚å¸¸ï¼Œæäº¤äº‹åŠ¡ï¼›è‹¥æŠ›å‡ºå¼‚å¸¸ï¼Œæ ¹æ®rollbackForé…ç½®å›æ»šäº‹åŠ¡ï¼›</li>
<li><strong>BeanFactoryTransactionAttributeSourceAdvisorï¼š</strong> åˆ‡é¢ç±»ï¼Œå°† â€œ@Transactionalåˆ‡å…¥ç‚¹â€ ä¸ â€œTransactionInterceptoré€šçŸ¥â€ ç»‘å®šï¼Œä¾› AOP æ¡†æ¶è¯†åˆ«ã€‚</li>
</ul>
<p><strong>ï¼ˆ2ï¼‰AutoProxyRegistrarï¼šå¼€å¯ AOP åŠ¨æ€ä»£ç†èƒ½åŠ›</strong></p>
<p>AutoProxyRegistrarçš„æ ¸å¿ƒä½œç”¨æ˜¯å‘ Spring å®¹å™¨æ³¨å†ŒAnnotationAwareAspectJAutoProxyCreatorå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æ˜¯ AOP åŠ¨æ€ä»£ç†çš„æ ¸å¿ƒå¤„ç†å™¨ï¼Œå®ç°äº†BeanPostProcessoræ¥å£ï¼ˆBean åç½®å¤„ç†å™¨ï¼‰ã€‚</p>
<p>åœ¨ Spring Context åˆå§‹åŒ–æµç¨‹ä¸­ï¼Œå½“ Bean å®ä¾‹åŒ–å®Œæˆåï¼Œä¼šè°ƒç”¨BeanPostProcessorçš„postProcessAfterInitializationæ–¹æ³•ï¼ŒAnnotationAwareAspectJAutoProxyCreatoré‡å†™äº†è¯¥æ–¹æ³•ï¼Œæ ¸å¿ƒé€»è¾‘å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">AnnotationAwareAspectJAutoProxyCreator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AspectJAwareAdvisorAutoProxyCreator</span> {

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">postProcessAfterInitialization</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Object bean, String beanName)</span> {
        <span class="hljs-keyword">if</span> (bean != <span class="hljs-literal">null</span>) {
            <span class="hljs-comment">// ç”ŸæˆBeançš„ç¼“å­˜Keyï¼ˆåŸºäºç±»å+Beanåç§°ï¼‰</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">cacheKey</span> <span class="hljs-operator">=</span> getCacheKey(bean.getClass(), beanName);
            <span class="hljs-comment">// é¿å…é‡å¤ä»£ç†ï¼ˆæ—©æœŸä»£ç†å¼•ç”¨å·²å­˜åœ¨æ—¶ç›´æ¥è¿”å›ï¼‰</span>
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">this</span>.earlyProxyReferences.remove(cacheKey) != bean) {
                <span class="hljs-comment">// æ ¸å¿ƒé€»è¾‘ï¼šåˆ¤æ–­Beanæ˜¯å¦éœ€è¦è¢«ä»£ç†ï¼Œè‹¥éœ€è¦åˆ™ç”Ÿæˆä»£ç†å¯¹è±¡</span>
                <span class="hljs-keyword">return</span> wrapIfNecessary(bean, beanName, cacheKey);
            }
        }
        <span class="hljs-keyword">return</span> bean;
    }

    <span class="hljs-keyword">protected</span> Object <span class="hljs-title function_">wrapIfNecessary</span><span class="hljs-params">(Object bean, String beanName, Object cacheKey)</span> {
        <span class="hljs-comment">// 1. æ£€æŸ¥Beanæ˜¯å¦å·²è¢«ä»£ç†ï¼Œæˆ–æ˜¯å¦ä¸ºSpringå†…éƒ¨Beanï¼ˆå¦‚äº‹åŠ¡ç®¡ç†å™¨ï¼‰ï¼Œæ— éœ€ä»£ç†åˆ™ç›´æ¥è¿”å›</span>
        <span class="hljs-keyword">if</span> (beanName != <span class="hljs-literal">null</span> &amp;&amp; <span class="hljs-built_in">this</span>.targetSourcedBeans.contains(beanName)) {
            <span class="hljs-keyword">return</span> bean;
        }
        <span class="hljs-keyword">if</span> (Boolean.FALSE.equals(<span class="hljs-built_in">this</span>.advisedBeans.get(cacheKey))) {
            <span class="hljs-keyword">return</span> bean;
        }
        <span class="hljs-comment">// 2. æ£€æŸ¥Beanæ˜¯å¦ç¬¦åˆåˆ‡å…¥ç‚¹æ¡ä»¶ï¼ˆæ˜¯å¦å¸¦æœ‰@Transactionalæ³¨è§£ï¼‰</span>
        <span class="hljs-keyword">if</span> (isInfrastructureClass(bean.getClass()) || shouldSkip(bean.getClass(), beanName)) {
            <span class="hljs-built_in">this</span>.advisedBeans.put(cacheKey, Boolean.FALSE);
            <span class="hljs-keyword">return</span> bean;
        }

        <span class="hljs-comment">// 3. æŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„åˆ‡é¢ï¼ˆAdvisorï¼‰ï¼šæ­¤å¤„ä¼šæ‰¾åˆ°TransactionAdvisor</span>
        Object[] specificInterceptors = getAdvicesAndAdvisorsForBean(bean.getClass(), beanName, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">if</span> (specificInterceptors != DO_NOT_PROXY) {
            <span class="hljs-built_in">this</span>.advisedBeans.put(cacheKey, Boolean.TRUE);
            <span class="hljs-comment">// 4. ç”Ÿæˆä»£ç†å¯¹è±¡ï¼ˆCGLIBæˆ–JDKåŠ¨æ€ä»£ç†ï¼‰</span>
            <span class="hljs-type">Object</span> <span class="hljs-variable">proxy</span> <span class="hljs-operator">=</span> createProxy(
                bean.getClass(), beanName, specificInterceptors, <span class="hljs-keyword">new</span> <span class="hljs-title class_">SingletonTargetSource</span>(bean));
            <span class="hljs-built_in">this</span>.proxyTypes.put(cacheKey, proxy.getClass());
            <span class="hljs-keyword">return</span> proxy;
        }

        <span class="hljs-built_in">this</span>.advisedBeans.put(cacheKey, Boolean.FALSE);
        <span class="hljs-keyword">return</span> bean;
    }
}
</code></pre>
<p>æ ¸å¿ƒé€»è¾‘è¯´æ˜ï¼š</p>
<ul>
<li>wrapIfNecessaryæ–¹æ³•ä¼šå…ˆåˆ¤æ–­ Bean æ˜¯å¦éœ€è¦ä»£ç†ï¼ˆå³æ˜¯å¦å¸¦æœ‰@Transactionalæ³¨è§£ï¼‰ï¼›</li>
<li>è‹¥éœ€è¦ä»£ç†ï¼Œä¼šæŸ¥æ‰¾æ‰€æœ‰åŒ¹é…çš„åˆ‡é¢ï¼ˆæ­¤å¤„å³TransactionAdvisorï¼‰ï¼›</li>
<li>é€šè¿‡createProxyæ–¹æ³•ç”Ÿæˆä»£ç†å¯¹è±¡ï¼ˆé»˜è®¤ CGLIB ä»£ç†ï¼‰ï¼›</li>
<li>åç»­è°ƒç”¨ç›®æ ‡ Bean çš„æ–¹æ³•æ—¶ï¼Œå®é™…æ‰§è¡Œçš„æ˜¯ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œä»£ç†å¯¹è±¡ä¼šå…ˆè§¦å‘TransactionInterceptorçš„äº‹åŠ¡é€»è¾‘ï¼Œå†æ‰§è¡Œç›®æ ‡æ–¹æ³•ã€‚</li>
</ul>
<h3 data-id="heading-6">3. äº‹åŠ¡æ‰§è¡Œçš„å®Œæ•´é“¾è·¯æ€»ç»“</h3>
<ol>
<li>Spring Boot å¯åŠ¨ï¼ŒåŠ è½½TransactionAutoConfigurationï¼Œé€šè¿‡@EnableTransactionManagementå¯¼å…¥</li>
<li>ProxyTransactionManagementConfigurationå’ŒAutoProxyRegistrarï¼›ProxyTransactionManagementConfigurationæ³¨å†ŒTransactionAttributeSourceï¼ˆè§£ææ³¨è§£ï¼‰ã€TransactionInterceptorï¼ˆäº‹åŠ¡é€»è¾‘ï¼‰ã€TransactionAdvisorï¼ˆåˆ‡é¢ï¼‰ï¼›</li>
<li>AutoProxyRegistraræ³¨å†ŒAnnotationAwareAspectJAutoProxyCreatorï¼ˆAOP ä»£ç†å¤„ç†å™¨ï¼‰ï¼›</li>
<li>Spring æ‰«æ@Serviceæ³¨è§£çš„ç±»ï¼Œåˆ›å»ºç›®æ ‡ Bean å®ä¾‹ï¼›</li>
<li>AnnotationAwareAspectJAutoProxyCreatoråœ¨ Bean åˆå§‹åŒ–åï¼Œé€šè¿‡wrapIfNecessaryæ–¹æ³•æ£€æµ‹åˆ° Bean å¸¦æœ‰@Transactionalæ³¨è§£ï¼Œç”Ÿæˆä»£ç†å¯¹è±¡ï¼›</li>
<li>å¼€å‘è€…è°ƒç”¨ç›®æ ‡æ–¹æ³•æ—¶ï¼Œå®é™…è°ƒç”¨ä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼›</li>
<li>ä»£ç†å¯¹è±¡è§¦å‘TransactionInterceptorï¼š
<ul>
<li>è§£æ@Transactionalæ³¨è§£å±æ€§ï¼Œé€šè¿‡äº‹åŠ¡ç®¡ç†å™¨å¼€å¯äº‹åŠ¡ï¼›</li>
<li>æ‰§è¡Œç›®æ ‡æ–¹æ³•ï¼›</li>
<li>ç›®æ ‡æ–¹æ³•æ­£å¸¸è¿”å›ï¼šæäº¤äº‹åŠ¡ï¼›</li>
<li>ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ï¼šæ ¹æ®rollbackForé…ç½®å›æ»šäº‹åŠ¡ã€‚</li>
</ul>
</li>
</ol>
<h2 data-id="heading-7">äº”ã€Spring Boot äº‹åŠ¡å®ç°åŸç†å›¾ç¤º</h2>
<ol>
<li>æ ¸å¿ƒç»„ä»¶æ³¨å†Œ</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    %% å¯åŠ¨åˆå§‹åŒ–é˜¶æ®µ
    A["Spring Boot å¯åŠ¨"] --&gt; B["æ‰«æ spring.factories æ–‡ä»¶"]
    B --&gt; C["åŠ è½½ TransactionAutoConfiguration è‡ªåŠ¨é…ç½®ç±»"]
    C --&gt; D["@EnableTransactionManagement æ³¨è§£ç”Ÿæ•ˆ"]
    
    %% æ ¸å¿ƒç»„ä»¶åŠ è½½é˜¶æ®µ
    D --&gt; D1["å¯¼å…¥ ProxyTransactionManagementConfiguration"]
    D --&gt; D2["å¯¼å…¥ AutoProxyRegistrar"]
    
    %% ProxyTransactionManagementConfiguration æ³¨å†ŒBean
    D1 --&gt; E1["æ³¨å†Œ TransactionAttributeSource &lt;br/&gt;ï¼ˆè§£æ@Transactionalæ³¨è§£ï¼‰"]
    D1 --&gt; E2["æ³¨å†Œ TransactionInterceptor&lt;br/&gt;ï¼ˆäº‹åŠ¡æ‹¦æˆªå™¨ï¼šå¼€å¯/æäº¤/å›æ»šï¼‰"]
    D1 --&gt; E3["æ³¨å†Œ TransactionAdvisor&lt;br/&gt;ï¼ˆåˆ‡é¢=åˆ‡å…¥ç‚¹+é€šçŸ¥ï¼‰"]
    E1 &amp; E2 &amp; E3 --&gt; E4["ç»„åˆä¸ºäº‹åŠ¡åˆ‡é¢"]  
  
    %% AutoProxyRegistrar å¼€å¯AOPä»£ç†
    D2 --&gt; F["æ³¨å†Œ AnnotationAwareAspectJAutoProxyCreator&lt;br/&gt;ï¼ˆAOPä»£ç†å¤„ç†å™¨ï¼Œå®ç°BeanPostProcessorï¼‰"]
</code></pre>
<ol start="2">
<li>ç”Ÿæˆä»£ç†å¯¹è±¡</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
  %% Beanåˆå§‹åŒ–ä¸ä»£ç†ç”Ÿæˆé˜¶æ®µ
    G["æ‰«æ@Serviceç­‰æ³¨è§£"] --&gt; H["åˆ›å»ºç›®æ ‡Beanå®ä¾‹ï¼ˆå¦‚UserServiceï¼‰"]
    H --&gt; I["è§¦å‘ BeanPostProcessor åç½®å¤„ç†"]
    I --&gt; J["AnnotationAwareAspectJAutoProxyCreator &lt;br/&gt;æ‰§è¡Œ postProcessAfterInitialization"]
    J --&gt; K{"ç›®æ ‡Beanæ–¹æ³•æ˜¯å¦æœ‰&lt;br/&gt;@Transactionalæ³¨è§£ï¼Ÿ"}
    K --&gt;|å¦| L["ç›´æ¥è¿”å›åŸå§‹Bean"]
    K --&gt;|æ˜¯| M["æŸ¥æ‰¾åŒ¹é…çš„ TransactionAdvisor åˆ‡é¢"]
    M --&gt; N["ç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡ï¼ˆé»˜è®¤CGLIBï¼‰"]
</code></pre>
<ol start="3">
<li>å¤„ç†äº‹åŠ¡æµç¨‹</li>
</ol>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD

    %% äº‹åŠ¡æ‰§è¡Œé˜¶æ®µ
    O["å¼€å‘è€…è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼ˆå¦‚addUser()ï¼‰"] --&gt; P["å®é™…è°ƒç”¨ä»£ç†å¯¹è±¡æ–¹æ³•"]
    P --&gt; Q["TransactionInterceptor æ‹¦æˆªæ–¹æ³•"]
    Q --&gt; R["é€šè¿‡ TransactionAttributeSource è§£æ&lt;br/&gt;@Transactionalå±æ€§ï¼ˆä¼ æ’­è¡Œä¸º/éš”ç¦»çº§åˆ«ç­‰ï¼‰"]
    R --&gt; S["äº‹åŠ¡ç®¡ç†å™¨å¼€å¯äº‹åŠ¡"]
    S --&gt; T["æ‰§è¡Œç›®æ ‡æ–¹æ³•æ ¸å¿ƒä¸šåŠ¡é€»è¾‘"]
    
    %% äº‹åŠ¡ç»“æœå¤„ç†
    T --&gt; U{"æ–¹æ³•æ‰§è¡Œæ˜¯å¦æˆåŠŸï¼Ÿ"}
    U --&gt;|"æˆåŠŸï¼ˆæ— å¼‚å¸¸ï¼‰"| V["äº‹åŠ¡ç®¡ç†å™¨æäº¤äº‹åŠ¡"]
    U --&gt;|"å¤±è´¥ï¼ˆæŠ›å¼‚å¸¸ï¼‰"| W["æ ¹æ®@Transactionalçš„rollbackFor&lt;br/&gt;é…ç½®åˆ¤æ–­æ˜¯å¦å›æ»š"]
    W --&gt;|"æ»¡è¶³å›æ»šæ¡ä»¶"| X["äº‹åŠ¡ç®¡ç†å™¨å›æ»šäº‹åŠ¡"]
    W --&gt;|"ä¸æ»¡è¶³å›æ»šæ¡ä»¶"| V["äº‹åŠ¡ç®¡ç†å™¨æäº¤äº‹åŠ¡"]
    
    %% æµç¨‹ç»“æŸ
    V &amp; X --&gt; Y["äº‹åŠ¡æ‰§è¡Œå®Œæˆ"]
</code></pre>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>Spring Boot åŠ¨æ€äº‹åŠ¡çš„å®ç°ï¼Œæœ¬è´¨æ˜¯ â€œæ³¨è§£æ ‡è®° + AOP åŠ¨æ€ä»£ç† + è‡ªåŠ¨é…ç½®â€ çš„ç»„åˆï¼š</p>
<ul>
<li>æ³¨è§£ï¼ˆ@Transactionalï¼‰æä¾› â€œäº‹åŠ¡æ ‡è®°â€ï¼Œæ˜ç¡®éœ€è¦å¢å¼ºçš„æ–¹æ³•ï¼›</li>
<li>AOP é€šè¿‡åŠ¨æ€ä»£ç†ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œæ‹¦æˆªç›®æ ‡æ–¹æ³•è°ƒç”¨ï¼›</li>
<li>äº‹åŠ¡æ‹¦æˆªå™¨ï¼ˆTransactionInterceptorï¼‰å°è£…äº‹åŠ¡æ ¸å¿ƒé€»è¾‘ï¼Œå®ç° â€œå¼€å¯ - æ‰§è¡Œ - æäº¤ / å›æ»šâ€ çš„è‡ªåŠ¨åŒ–ï¼›</li>
<li>è‡ªåŠ¨é…ç½®ï¼ˆTransactionAutoConfigurationï¼‰ç®€åŒ–å¼€å‘è€…é…ç½®ï¼Œè®©æ•´ä¸ªæµç¨‹ â€œå¼€ç®±å³ç”¨â€ã€‚</li>
</ul>
<p>ç†è§£è¿™ä¸€åŸç†ï¼Œä¸ä»…èƒ½å¸®åŠ©å¼€å‘è€…æ­£ç¡®ä½¿ç”¨@Transactionalæ³¨è§£ï¼ˆé¿å…è¸©ä»£ç†å¤±æ•ˆã€äº‹åŠ¡ä¼ æ’­è¡Œä¸ºé”™è¯¯ç­‰å‘ï¼‰ï¼Œè¿˜èƒ½ä¸¾ä¸€åä¸‰ï¼Œç†è§£ Spring ä½“ç³»ä¸­ â€œæ³¨è§£é©±åŠ¨â€ ç‰¹æ€§çš„é€šç”¨è®¾è®¡æ€æƒ³ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸŒ´ Goä¼ä¸šçº§å…¨æ ˆå¼æ¡†æ¶ï¼šGoyaveå…¥é—¨å’Œä½¿ç”¨ä»‹ç»]]></title>    <link>https://juejin.cn/post/7592130164965408806</link>    <guid>https://juejin.cn/post/7592130164965408806</guid>    <pubDate>2026-01-07T00:29:31.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592130164965408806" data-draft-id="7590961898399121446" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸŒ´ Goä¼ä¸šçº§å…¨æ ˆå¼æ¡†æ¶ï¼šGoyaveå…¥é—¨å’Œä½¿ç”¨ä»‹ç»"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T00:29:31.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="golangå­¦ä¹ è®°"/> <meta itemprop="url" content="https://juejin.cn/user/4371313964100990"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸŒ´ Goä¼ä¸šçº§å…¨æ ˆå¼æ¡†æ¶ï¼šGoyaveå…¥é—¨å’Œä½¿ç”¨ä»‹ç»
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313964100990/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    golangå­¦ä¹ è®°
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:29:31.000Z" title="Wed Jan 07 2026 00:29:31 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ğŸ¥¥ ä»€ä¹ˆæ˜¯ Goyaveï¼Ÿ</h2>
<p>Goyaveï¼ˆè¯»ä½œ /É¡oÊŠËˆjÉ‘ËveÉª/ï¼Œåƒ â€œgo-yah-vayâ€ï¼‰æ˜¯ä¸€ä¸ªä¸“ä¸º <strong>Go è¯­è¨€ REST API å¼€å‘</strong> æ‰“é€ çš„å…¨åŠŸèƒ½ Web æ¡†æ¶ã€‚</p>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šå®ƒä¸æ˜¯ã€ŒGo + Java + Vueã€çš„ç¼åˆæ€ªï¼›è€Œæ˜¯ <strong>Go è‡ªå·±ç”Ÿçš„å¨ƒ</strong>ï¼ŒåŸºå› çº¯æ­£ï¼Œè‡ªå¸¦ã€Œç®€æ´+å¯é ã€å±æ€§ã€‚</p>
</blockquote>
<p>å®ƒçš„å£å·å¯ä»¥ç¿»è¯‘æˆï¼š</p>
<blockquote>
<p>âœ… ä½ åªç®¡å†™ä¸šåŠ¡é€»è¾‘<br/>
âŒ æˆ‘å¸®ä½ æŒ¡ä½é…ç½®åœ°ç‹±ã€éªŒè¯çˆ†ç‚¸ã€ä¸­é—´ä»¶ä¹±ç‚–ã€JWT ç³Šè„¸â€¦â€¦</p>
</blockquote>
<p>å°±åƒä½ å»å¥èº«æˆ¿è¯·äº†ä¸ªç§æ•™â€”â€”ä»–ä¸æ›¿ä½ ä¸¾é“ï¼Œä½†ä¼šéª‚ä½ åˆ«å·æ‡’ã€å¸®ä½ è°ƒå‘¼å¸ã€è¿˜é¡ºæ‰‹é€’è›‹ç™½ç²‰ã€‚</p>
<hr/>
<h2 data-id="heading-1">ğŸŒŠ ä¸ºä»€ä¹ˆå« Goyaveï¼Ÿåå­—é‡Œæœ‰ç„æœºï¼</h2>
<p>Goyave æ˜¯æ³•è¯­é‡Œã€Œç•ªçŸ³æ¦´ã€ï¼ˆGuavaï¼‰çš„æ„æ€â€¦â€¦<br/>
ä½†æ›´å¦™çš„æ˜¯â€”â€”<strong>Go + Ya + Ve</strong> å¯ä»¥å¼ºè¡Œè§£è¯»ä¸ºï¼š</p>
<blockquote>
<p><strong>Go, Yet Another Very Elegant</strong> framework.</p>
</blockquote>
<p>ï¼ˆGoï¼šåˆä¸€ä¸ªéå¸¸ä¼˜é›…çš„æ¡†æ¶â€”â€”è°¦è™šä¸­å¸¦ç€ä¸€ä¸å‡¡å°”èµ› ğŸ˜ï¼‰</p>
<hr/>
<h2 data-id="heading-2">ğŸš€ äº”åˆ†é’Ÿä¸Šæ‰‹ï¼šå†™ä¸ªâ€œä¼šå‘¼å¸â€çš„æ³¨å†Œç™»å½• API</h2>
<blockquote>
<p>ğŸ§  <em>å“²å­¦å°å‰§åœº</em>ï¼š<br/>
äººç±»æ¸´æœ›è¿æ¥ï¼Œäºæ˜¯å‘æ˜äº† APIï¼›<br/>
API æ¸´æœ›å®‰å…¨ï¼Œäºæ˜¯å‘æ˜äº† JWTï¼›<br/>
ç¨‹åºå‘˜æ¸´æœ›ä¸‹ç­ï¼Œäºæ˜¯å‘æ˜äº†â€”â€”<strong>Goyave</strong>ã€‚</p>
</blockquote>
<h3 data-id="heading-3">Step 1ï¼šå®‰è£…</h3>
<pre><code class="hljs language-bash" lang="bash">go get -u goyave.dev/goyave/v5
</code></pre>
<blockquote>
<p>ğŸ’¡ Goyave v5 æ˜¯ç›®å‰æœ€æ–°ç¨³å®šç‰ˆï¼ˆæˆªè‡³ 2026ï¼‰ï¼Œv3 ç”¨æˆ·åˆ«æ€¥â€”â€”å‡çº§æŒ‡å—æ¯”æ³¡é¢è¯´æ˜ä¹¦è¿˜çŸ­ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-4">Step 2ï¼šæ¨¡å‹å®šä¹‰ï¼ˆUserï¼šäººç±»åœ¨æ•°å­—ä¸–ç•Œçš„åˆ†èº«ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> User <span class="hljs-keyword">struct</span> {
    ID       <span class="hljs-type">uint</span>   <span class="hljs-string">`gorm:"primaryKey"`</span>
    Username <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"type:varchar(100);unique;not null"`</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`gorm:"type:varchar(100);not null"`</span>
}
</code></pre>
<blockquote>
<p>ğŸŒ å°è´´å£«ï¼š<code>Password</code> å­—æ®µåƒä¸‡åˆ«å­˜æ˜æ–‡ï¼Goyave å†…ç½® <code>auth.HashPassword()</code>ï¼Œåƒç»™å¯†ç ç©¿ä¸Šã€Œå‡¯å¤«æ‹‰é˜²å¼¹è¡£ã€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">Step 3ï¼šæ³¨å†Œè¯·æ±‚éªŒè¯ï¼ˆé˜²æ ç²¾ä¸“ç”¨ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> RegisterRequest <span class="hljs-keyword">struct</span> {
    Username <span class="hljs-type">string</span> <span class="hljs-string">`validate:"required|min:4|max:100"`</span>
    Password <span class="hljs-type">string</span> <span class="hljs-string">`validate:"required|min:8"`</span> <span class="hljs-comment">// æ‹’ç» "123456" å…¥ä¾µï¼</span>
}
</code></pre>
<p>Goyave çš„éªŒè¯è§„åˆ™<strong>è‡ªè§£é‡Šæ€§æå¼º</strong>ï¼Œè¿äº§å“ç»ç†çœ‹äº†éƒ½èƒ½ç‚¹å¤´ï¼šâ€œå—¯ï¼Œç”¨æˆ·åä¸èƒ½å« <code>a</code>ï¼Œåˆç†ã€‚â€</p>
<blockquote>
<p>ğŸ§© ç±»æ¯”æ—¶é—´ï¼š<br/>
<code>validate:"required|min:4"</code> â‰ˆ ä½ å¦ˆï¼šâ€œç›¸äº²å¯¹è±¡è‡³å°‘å¾—æœ‰æˆ¿ã€æœ‰ç¤¾ä¿ã€ä¼šåšé¥­â€”â€”ä¸‰æ ·ç¼ºä¸€ä¸å¯ï¼â€ï¼ˆ<code>required|min:3</code> ğŸ˜‚ï¼‰</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">Step 4ï¼šæ³¨å†Œæ§åˆ¶å™¨ â€”â€” æ¯”ç›¸äº²æˆåŠŸç‡è¿˜é«˜çš„ä»£ç </h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Register</span><span class="hljs-params">(res *goyave.Response, req *goyave.Request)</span></span> {
    reg := &amp;RegisterRequest{}
    <span class="hljs-keyword">if</span> err := req.ToStruct(reg); err != <span class="hljs-literal">nil</span> {
        res.JSON(err.Status, err)
        <span class="hljs-keyword">return</span>
    }

    user := &amp;User{
        Username: reg.Username,
        Password: auth.HashPassword(reg.Password), <span class="hljs-comment">// æš—å·åŠ å¯†ï¼</span>
    }

    <span class="hljs-keyword">if</span> err := database.GetConnection().Create(user).Error; err != <span class="hljs-literal">nil</span> {
        res.Error(err)
        <span class="hljs-keyword">return</span>
    }

    res.JSON(http.StatusCreated, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-keyword">interface</span>{}{
        <span class="hljs-string">"id"</span>:       user.ID,
        <span class="hljs-string">"username"</span>: user.Username,
        <span class="hljs-comment">// âœ¨ ä¸è¿”å›å¯†ç ï¼è¿ hint éƒ½ä¸ç»™é»‘å®¢ï¼</span>
    })
}
</code></pre>
<blockquote>
<p>âœ… è¿™æ®µä»£ç å¹²äº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>è§£æå¹¶æ ¡éªŒè¾“å…¥ï¼ˆé˜²æ‰‹æ»‘å…šï¼‰</li>
<li>å­˜å…¥ DBï¼ˆå¸¦ç›å“ˆå¸Œï¼Œå’¸å¾—é»‘å®¢æµæ³ªï¼‰</li>
<li>æ¸©æŸ”åœ°è¿”å›ç»“æœï¼ˆè¿ HTTP çŠ¶æ€ç éƒ½é€‰ <code>201 Created</code>ï¼Œä»ªå¼æ„Ÿæ‹‰æ»¡ï¼‰</li>
</ol>
</blockquote>
<hr/>
<h3 data-id="heading-7">Step 5ï¼šç™»å½• + JWT è®¤è¯ï¼ˆé—¨ç¦å¡è‡ªåŠ¨åŒ–ï¼‰</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Login</span><span class="hljs-params">(res *goyave.Response, req *goyave.Request)</span></span> {
    loginReq := &amp;LoginRequest{}
    <span class="hljs-keyword">if</span> err := req.ToStruct(loginReq); err != <span class="hljs-literal">nil</span> {
        res.JSON(err.Status, err)
        <span class="hljs-keyword">return</span>
    }

    user := &amp;User{}
    <span class="hljs-keyword">if</span> err := database.Where(<span class="hljs-string">"username = ?"</span>, loginReq.Username).First(user).Error; err != <span class="hljs-literal">nil</span> {
        res.JSON(http.StatusUnauthorized, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{<span class="hljs-string">"error"</span>: <span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>})
        <span class="hljs-keyword">return</span>
    }

    <span class="hljs-keyword">if</span> !auth.CheckPassword(user.Password, loginReq.Password) {
        res.JSON(http.StatusUnauthorized, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{<span class="hljs-string">"error"</span>: <span class="hljs-string">"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"</span>})
        <span class="hljs-keyword">return</span>
    }

    token, _ := auth.GenerateToken(user.ID) <span class="hljs-comment">// â† ç”Ÿæˆ JWTï¼Œåƒé¢å‘ VIP ç”µå­æ‰‹ç¯</span>
    res.JSON(http.StatusOK, <span class="hljs-keyword">map</span>[<span class="hljs-type">string</span>]<span class="hljs-type">string</span>{<span class="hljs-string">"token"</span>: token})
}
</code></pre>
<blockquote>
<p>ğŸ” è®¤è¯ä¸­é—´ä»¶ä¸€é”®æŒ‚è½½ï¼š</p>
<pre><code class="hljs language-go" lang="go">authMiddleware := &amp;auth.Middleware{}
router.Get(<span class="hljs-string">"/protected"</span>, ProtectedEndpoint).Middleware(authMiddleware)
</code></pre>
<p>â†’ ä»æ­¤ <code>/protected</code> è·¯ç”±åªè®¤ã€ŒToken æ‰‹ç¯ã€ï¼Œæ²¡æ‰‹ç¯ï¼Ÿè¯·å»å‰å°ç™»è®°ï¼ˆå³ <code>/login</code>ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-8">ğŸ§° é«˜é˜¶æŠ€èƒ½å½©è›‹</h2>
<h3 data-id="heading-9">âœ… åŠ¨æ€åˆ†é¡µ &amp; è¿‡æ»¤</h3>
<p>Goyave åŸç”Ÿæ”¯æŒ <code>?page=2&amp;page_size=10&amp;sort=-created_at&amp;filter[name]=John</code><br/>
â€”â€”URL é‡Œå†™ SQL æ¡ä»¶ï¼Ÿä¸ï¼Œè¿™å« <strong>RESTful é»‘è¯</strong>ã€‚</p>
<h3 data-id="heading-10">âœ… DTO æ˜ å°„ &amp; æ¨¡å‹è½¬æ¢</h3>
<pre><code class="hljs language-go" lang="go"><span class="hljs-keyword">type</span> UserDTO <span class="hljs-keyword">struct</span> {
    ID       <span class="hljs-type">uint</span>   <span class="hljs-string">`json:"id"`</span>
    Username <span class="hljs-type">string</span> <span class="hljs-string">`json:"name"`</span> <span class="hljs-comment">// å‰ç«¯æƒ³è¦ nameï¼Ÿå®‰æ’ã€‚</span>

}
</code></pre>
<h3 data-id="heading-11">âœ… ç»“æ„åŒ–æ—¥å¿— + é”™è¯¯è¿½è¸ª</h3>
<pre><code class="hljs language-log" lang="log">INFO 2026-01-04T12:00:00Z Request: POST /register
ERROR 2026-01-04T12:00:01Z duplicate key value violates unique constraint (username)
</code></pre>
<p>â€”â€”æ—¥å¿—æ¸…æ™°åˆ°èƒ½å¸®ä½ å†™äº‹æ•…å¤ç›˜ PPT ğŸ“Š</p>
<hr/>
<h2 data-id="heading-12">ğŸŒ± é¡¹ç›®ç»“æ„å»ºè®®ï¼ˆâ€œæ•´æ´æ¶æ„â€çˆ±å¥½è€…ç‹‚å–œï¼‰</h2>
<pre><code class="hljs language-bash" lang="bash">/project
â”œâ”€â”€ config/          <span class="hljs-comment"># é…ç½®ï¼šåƒèœè°±ï¼Œå†³å®šå’¸æ·¡</span>
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ models/      <span class="hljs-comment"># æ•°æ®æ¨¡å‹ï¼šä¸–ç•Œçš„â€œéª¨æ¶â€</span>
â”‚   â””â”€â”€ migrations/  <span class="hljs-comment"># è¿ç§»è„šæœ¬ï¼šç»™ DB åšå¾®åˆ›æ‰‹æœ¯</span>
â”œâ”€â”€ http/
â”‚   â”œâ”€â”€ controllers/ <span class="hljs-comment"># ä¸šåŠ¡é€»è¾‘ï¼šå¤§è„‘çš®å±‚</span>
â”‚   â”œâ”€â”€ middleware/  <span class="hljs-comment"># ä¸­é—´ä»¶ï¼šå®‰æ£€é—¨ + ç¤¼å®¾å°</span>
â”‚   â””â”€â”€ routes.go    <span class="hljs-comment"># è·¯ç”±ï¼šåŸå¸‚äº¤é€šå›¾</span>
â””â”€â”€ main.go          <span class="hljs-comment"># å…¥å£ï¼šç‚¹ç«æŒ‰é’® ğŸ”¥</span>
</code></pre>
<blockquote>
<p>ğŸª´ è®¾è®¡å“²å­¦ï¼š<strong>â€œçº¦å®šä¼˜äºé…ç½®â€</strong> â€”â€”<br/>
æ¡†æ¶ç»™ä½ æ­å¥½è„šæ‰‹æ¶ï¼Œä½ ä¸“æ³¨ç Œå¢™ï¼›<br/>
è‹¥ä½ æƒ³è‡ªå·±çƒ§ç –ï¼Ÿä¹Ÿç•™äº†é€ƒç”Ÿèˆ±å£ï¼ˆå¯é«˜åº¦è‡ªå®šä¹‰ï¼‰ã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-13">ğŸ¯ é€‚åˆè°ç”¨ï¼Ÿ</h2>

























<table><thead><tr><th>ä½ æ˜¯â€¦â€¦</th><th>Goyave è¯´â€¦â€¦</th></tr></thead><tbody><tr><td>åˆå­¦ Go æƒ³å¿«é€Ÿå†™ API</td><td>â€œæ¥ï¼Œæˆ‘æ‰¶ä½ ä¸Šè½¦ï¼Œå®‰å…¨å¸¦å·²æ‰£å¥½ ğŸš—â€</td></tr><tr><td>è€å¸æœºåŒå€¦äº†æ‰‹æ“ middleware</td><td>â€œè¿™äº›è„æ´»æˆ‘åŒ…äº†ï¼Œä½ å»å–æ¯æ¤°å­æ°´ ğŸ¥¥â€</td></tr><tr><td>å›¢é˜Ÿéœ€è¦ç»Ÿä¸€è§„èŒƒ</td><td>â€œæˆ‘çš„ lint + test + validate ä¸‰ä»¶å¥—ï¼Œä¿ä½  Code Review å°‘åµæ¶â€</td></tr><tr><td>æ€§èƒ½æ´ç™–æ‚£è€…</td><td>â€œé›¶åå°„è·¯ç”± + GORM + è¿æ¥æ±  = èµ·é£ ğŸš€â€</td></tr></tbody></table>
<hr/></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[285. Java Stream API - é€šè¿‡ Supplier åˆ›å»º Stream]]></title>    <link>https://juejin.cn/post/7592059801885081643</link>    <guid>https://juejin.cn/post/7592059801885081643</guid>    <pubDate>2026-01-07T00:56:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592059801885081643" data-draft-id="7592059801885048875" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="285. Java Stream API - é€šè¿‡ Supplier åˆ›å»º Stream"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T00:56:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CacheæŠ€æœ¯åˆ†äº«"/> <meta itemprop="url" content="https://juejin.cn/user/1662117313262776"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            285. Java Stream API - é€šè¿‡ Supplier åˆ›å»º Stream
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1662117313262776/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CacheæŠ€æœ¯åˆ†äº«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:56:37.000Z" title="Wed Jan 07 2026 00:56:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">285. Java Stream API - é€šè¿‡ Supplier åˆ›å»º Stream</h2>
<hr/>
<h4 data-id="heading-1">âœ… åŸºæœ¬æ¦‚å¿µ</h4>
<p><code>Java</code> çš„ <code>Stream</code> æ¥å£æä¾›äº†ä¸¤ä¸ªç”¨äºä» <strong>Supplierï¼ˆä¾›åº”è€…ï¼‰</strong> åˆ›å»ºæµçš„å·¥å‚æ–¹æ³•ï¼Œå…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼š</p>
<pre><code class="hljs language-java" lang="java">Stream.generate(Supplier&lt;T&gt; supplier)
</code></pre>
<p>è¿™ä¸ªæ–¹æ³•ç”¨äº <strong>ç”Ÿæˆæ— é™æµï¼ˆinfinite streamï¼‰</strong>ï¼šæ¯å½“æµéœ€è¦ä¸€ä¸ªæ–°å…ƒç´ æ—¶ï¼Œ<code>Supplier</code> å°±ä¼šè¢«è°ƒç”¨ä¸€æ¬¡æ¥â€œä¾›åº”â€è¿™ä¸ªå…ƒç´ ã€‚</p>
<hr/>
<h4 data-id="heading-2">ğŸ§ª ç¤ºä¾‹ä»£ç </h4>
<pre><code class="hljs language-java" lang="java">Stream&lt;String&gt; generated = Stream.generate(() -&gt; <span class="hljs-string">"+"</span>);
List&lt;String&gt; strings = generated.limit(<span class="hljs-number">5L</span>).toList();
System.out.println(<span class="hljs-string">"strings = "</span> + strings);
</code></pre>
<h5 data-id="heading-3">ğŸ’» è¾“å‡ºç»“æœï¼š</h5>
<pre><code class="hljs language-java" lang="java">strings = [+, +, +, +, +]
</code></pre>
<hr/>
<h4 data-id="heading-4">âš ï¸ å°å¿ƒï¼è¿™æ˜¯ä¸ªæ— é™æµï¼</h4>
<blockquote>
<p>â— å¦‚æœä½ å»æ‰ <code>.limit(5L)</code>ï¼Œè¿™ä¸ªç¨‹åºå°†æ°¸è¿œä¸ä¼šåœæ­¢è¿è¡Œï¼</p>
</blockquote>
<pre><code class="hljs language-java" lang="java">Stream&lt;String&gt; generated = Stream.generate(() -&gt; <span class="hljs-string">"+"</span>);
generated.forEach(System.out::println); <span class="hljs-comment">// âŒ å°å¿ƒï¼Œæ­»å¾ªç¯</span>
</code></pre>
<p>ğŸš¨ å®ƒå°†ä¸åœåœ°ç”Ÿæˆ <code>+</code>ï¼Œç›´åˆ°ä½ çš„å†…å­˜è€—å°½ï¼Œç”šè‡³æŠ›å‡º <code>OutOfMemoryError</code>ï¼</p>
<hr/>
<h4 data-id="heading-5">ğŸ¯ æ­£ç¡®ä½¿ç”¨æ–¹å¼ï¼šç»“åˆ <strong>é™åˆ¶æ“ä½œï¼ˆshort-circuitingï¼‰</strong></h4>
<p>åœ¨ <code>Stream API</code> ä¸­ï¼Œåƒ <code>limit()</code> è¿™æ ·çš„æ“ä½œè¢«ç§°ä¸º <strong>çŸ­è·¯æ“ä½œï¼ˆshort-circuiting operationsï¼‰</strong>ã€‚å®ƒçš„ä½œç”¨æ˜¯â€œæå‰ç»ˆæ­¢æµçš„ç”Ÿæˆæˆ–å¤„ç†â€ã€‚</p>
<blockquote>
<p>âœ… åŠ ä¸Š <code>limit(n)</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»æ— é™æµä¸­â€œæˆªå–â€å‰ <code>n</code> ä¸ªå…ƒç´ ä½¿ç”¨ã€‚</p>
</blockquote>
<pre><code class="hljs language-java" lang="java">Stream&lt;Double&gt; randoms = Stream.generate(Math::random);
List&lt;Double&gt; topFive = randoms.limit(<span class="hljs-number">5</span>).toList();
System.out.println(topFive); <span class="hljs-comment">// æ‰“å° 5 ä¸ªéšæœºæ•°</span>
</code></pre>
<hr/>
<h4 data-id="heading-6">ğŸ§  å­¦ä¹ è¦ç‚¹</h4>

























<table><thead><tr><th>å…³é”®ç‚¹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><code>Stream.generate(...)</code></td><td>ä¼šåˆ›å»ºä¸€ä¸ª <strong>æ— é™</strong> çš„æµ</td></tr><tr><td><strong>å¿…é¡»</strong>ä½¿ç”¨ <code>limit()</code> æˆ–å…¶ä»–çŸ­è·¯æ“ä½œ</td><td>å¦åˆ™ç¨‹åºä¼šæ°¸è¿œè¿è¡Œæˆ–è€—å°½èµ„æº</td></tr><tr><td>é€‚åˆç”Ÿæˆå›ºå®šæ¨¡å¼ã€å¸¸é‡ã€éšæœºæ•°ç­‰</td><td>æ¯”å¦‚ <code>"++++++++"</code> æˆ–éšæœºæ•°åºåˆ—</td></tr><tr><td>æ¯æ¬¡è°ƒç”¨éƒ½ä¼šé‡æ–°è·å–ä¸€ä¸ªå€¼</td><td>è¿™ä¸ <code>of(...)</code> æˆ– <code>Arrays.stream(...)</code> æ˜¯ <strong>é™æ€é›†åˆ</strong> ä¸åŒ</td></tr></tbody></table>
<hr/>
<h4 data-id="heading-7">ğŸ“Œ ç¤ºä¾‹ï¼šç”Ÿæˆæ—¶é—´æˆ³</h4>
<pre><code class="hljs language-java" lang="java">Stream&lt;String&gt; timeStream = Stream.generate(() -&gt; Instant.now().toString());
List&lt;String&gt; timestamps = timeStream.limit(<span class="hljs-number">3</span>).toList();
System.out.println(timestamps);
</code></pre>
<blockquote>
<p>è¾“å‡ºä¸‰ä¸ªä¸åŒæ—¶é—´æˆ³ï¼Œé€‚åˆç”¨äºæ—¥å¿—é‡‡æ ·ã€å»¶è¿Ÿä»»åŠ¡ç­‰åœºæ™¯ã€‚</p>
</blockquote>
<hr/>
<h4 data-id="heading-8">ğŸ§ª å°ç»ƒä¹ é¢˜ï¼ˆå¯åšåŸ¹è®­äº’åŠ¨ï¼‰</h4>
<p>é—®ï¼šä»¥ä¸‹ä»£ç ä¼šè¾“å‡ºå‡ ä¸ª <code>"Hello"</code>ï¼Ÿ</p>
<pre><code class="hljs language-java" lang="java">Stream.generate(() -&gt; <span class="hljs-string">"Hello"</span>)
      .limit(<span class="hljs-number">3</span>)
      .forEach(System.out::println);
</code></pre>
<p>ç­”æ¡ˆï¼š</p>
<pre><code class="hljs language-java" lang="java">Hello
Hello
Hello
</code></pre>
<hr/>
<h4 data-id="heading-9">ğŸ“š å°ç»“</h4>
<ul>
<li><code>Stream.generate(...)</code> = æ— é™ä¾›åº”æœºï¼Œæ¯æ¬¡éƒ½ç”Ÿäº§ä¸€ä¸ªå…ƒç´ ã€‚</li>
<li>ä¸åŠ é™åˆ¶æ“ä½œå°±æ˜¯â€œå¤±æ§çš„æ°´é¾™å¤´ ğŸ’¦â€ï¼Œå¿…é¡»åŠ ä¸Š <code>.limit()</code>ã€<code>.takeWhile()</code> ç­‰æ‰‹æ®µèŠ‚æµã€‚</li>
<li>é€‚åˆç”¨äºç”Ÿæˆå¸¸é‡ã€é‡å¤å…ƒç´ ã€éšæœºå€¼ã€å½“å‰æ—¶é—´ç­‰â€œåŠ¨æ€â€æ•°æ®ã€‚</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C è¯­è¨€æŒ‡é’ˆä»å…¥é—¨åˆ°å®æˆ˜ï¼šåƒé€æ ¸å¿ƒï¼Œé¿å¼€ 90% çš„å‘]]></title>    <link>https://juejin.cn/post/7592251792630710299</link>    <guid>https://juejin.cn/post/7592251792630710299</guid>    <pubDate>2026-01-07T01:05:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592251792630710299" data-draft-id="7592089325912326144" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C è¯­è¨€æŒ‡é’ˆä»å…¥é—¨åˆ°å®æˆ˜ï¼šåƒé€æ ¸å¿ƒï¼Œé¿å¼€ 90% çš„å‘"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T01:05:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°æ¨åŒå­¦49"/> <meta itemprop="url" content="https://juejin.cn/user/1189004976589664"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C è¯­è¨€æŒ‡é’ˆä»å…¥é—¨åˆ°å®æˆ˜ï¼šåƒé€æ ¸å¿ƒï¼Œé¿å¼€ 90% çš„å‘
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1189004976589664/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°æ¨åŒå­¦49
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:05:24.000Z" title="Wed Jan 07 2026 01:05:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">C è¯­è¨€æŒ‡é’ˆä»å…¥é—¨åˆ°å®æˆ˜ï¼šåƒé€æ ¸å¿ƒï¼Œé¿å¼€ 90% çš„å‘</h2>
<p>æŒ‡é’ˆæ˜¯ C è¯­è¨€çš„çµé­‚ï¼Œä¹Ÿæ˜¯åˆå­¦è€…çš„ â€œæ‹¦è·¯è™â€ã€‚å®ƒèµ‹äºˆç¨‹åºç›´æ¥æ“ä½œå†…å­˜çš„å¼ºå¤§èƒ½åŠ›ï¼Œæ˜¯å®ç°é«˜æ•ˆæ•°æ®ä¼ é€’ã€å¤æ‚æ•°æ®ç»“æ„ï¼ˆé“¾è¡¨ã€æ ‘ï¼‰çš„æ ¸å¿ƒåŸºç¡€ã€‚å¾ˆå¤šäººè§‰å¾—æŒ‡é’ˆæŠ½è±¡éš¾æ‡‚ï¼Œå…¶å®åªè¦æŠ“ä½ â€œåœ°å€â€ è¿™ä¸ªæœ¬è´¨ï¼Œå†ç»“åˆå®é™…åœºæ™¯ç»ƒä¹ ï¼Œå°±èƒ½å½»åº•æ‰“é€šä»»ç£äºŒè„‰ã€‚æœ¬æ–‡ç»“åˆæŒ‡é’ˆå­¦ä¹ çš„æ ¸å¿ƒé€»è¾‘ï¼Œä»åŸºç¡€æ¦‚å¿µåˆ°å®æˆ˜æ¡ˆä¾‹ï¼Œå†åˆ°é¿å‘æŒ‡å—ï¼Œå¸®ä½ ç³»ç»ŸæŒæ¡æŒ‡é’ˆçš„ç”¨æ³•ã€‚</p>
<h3 data-id="heading-1">ä¸€ã€æŒ‡é’ˆåŸºç¡€ï¼šçœ‹é€ â€œåœ°å€â€ çš„æœ¬è´¨</h3>
<h4 data-id="heading-2">1. æŒ‡é’ˆæ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<p>æŒ‡é’ˆçš„æœ¬è´¨æ˜¯<strong>å­˜å‚¨å†…å­˜åœ°å€çš„å˜é‡</strong>ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªé€šä¿—çš„æ¯”å–»ç†è§£ï¼š</p>
<ul>
<li>å†…å­˜ = å¿«é€’ä»“åº“ï¼ˆæ¯ä¸ªå­˜å‚¨å•å…ƒæœ‰å”¯ä¸€ç¼–å·ï¼Œå³åœ°å€ï¼‰ï¼›</li>
<li>å˜é‡ = ä»“åº“é‡Œçš„åŒ…è£¹ï¼ˆå­˜å‚¨å…·ä½“æ•°æ®ï¼‰ï¼›</li>
<li>æŒ‡é’ˆ = å¿«é€’å•ï¼ˆä¸Šé¢å†™ç€åŒ…è£¹çš„å…·ä½“åœ°å€ï¼‰ï¼›</li>
<li>è§£å¼•ç”¨ï¼ˆ*ï¼‰= å¿«é€’å‘˜æŒ‰åœ°å€æ‰¾åˆ°åŒ…è£¹å¹¶æ‰“å¼€ã€‚</li>
</ul>
<h4 data-id="heading-3">2. æ ¸å¿ƒæ“ä½œï¼š&amp; å’Œ * çš„ç”¨æ³•</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-perl" lang="perl"><span class="hljs-comment">#include &lt;stdio.h&gt;</span>
<span class="hljs-keyword">int</span> main() {
    <span class="hljs-keyword">int</span> num = <span class="hljs-number">10</span>;  <span class="hljs-regexp">//</span> å˜é‡ï¼šå†…å­˜ä¸­å­˜å‚¨<span class="hljs-number">10</span>çš„â€œåŒ…è£¹â€
    <span class="hljs-keyword">int</span> *p = &amp;num; <span class="hljs-regexp">//</span> æŒ‡é’ˆpï¼šå­˜å‚¨numçš„åœ°å€ï¼ˆ&amp;æ˜¯å–åœ°å€è¿ç®—ç¬¦ï¼‰
    
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"å˜é‡numçš„å€¼ï¼š%d\n"</span>, num);      <span class="hljs-regexp">//</span> ç›´æ¥è®¿é—®åŒ…è£¹ï¼š<span class="hljs-number">10</span>
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"å˜é‡numçš„åœ°å€ï¼š%p\n"</span>, &amp;num);  <span class="hljs-regexp">//</span> æŸ¥çœ‹åŒ…è£¹åœ°å€ï¼š<span class="hljs-number">0x7fff</span>...ï¼ˆéšç³»ç»Ÿå˜åŒ–ï¼‰
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æŒ‡é’ˆpå­˜å‚¨çš„åœ°å€ï¼š%p\n"</span>, p);   <span class="hljs-regexp">//</span> æŸ¥çœ‹å¿«é€’å•åœ°å€ï¼šä¸&amp;numä¸€è‡´
    <span class="hljs-keyword">printf</span>(<span class="hljs-string">"æŒ‡é’ˆpæŒ‡å‘çš„å€¼ï¼š%d\n"</span>, *p);    <span class="hljs-regexp">//</span> æŒ‰åœ°å€å–åŒ…è£¹ï¼š<span class="hljs-number">10</span>ï¼ˆ*æ˜¯è§£å¼•ç”¨è¿ç®—ç¬¦ï¼‰
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<ul>
<li><code>&amp;å˜é‡å</code>ï¼šè·å–å˜é‡çš„å†…å­˜åœ°å€ï¼›</li>
<li><code>*æŒ‡é’ˆå</code>ï¼šé€šè¿‡æŒ‡é’ˆå­˜å‚¨çš„åœ°å€ï¼Œè®¿é—®æˆ–ä¿®æ”¹ç›®æ ‡å˜é‡çš„å€¼ï¼›</li>
<li>æŒ‡é’ˆå˜é‡æœ¬èº«ä¹Ÿå å†…å­˜ï¼ˆé€šå¸¸ 4 æˆ– 8 å­—èŠ‚ï¼Œå–å†³äºç³»ç»Ÿæ¶æ„ï¼‰ã€‚</li>
</ul>
<h4 data-id="heading-4">3. æŒ‡é’ˆç±»å‹çš„æ„ä¹‰</h4>
<p>æŒ‡é’ˆå£°æ˜æ—¶å¿…é¡»æŒ‡å®šç±»å‹ï¼ˆå¦‚<code>int*</code>ã€<code>char*</code>ï¼‰ï¼Œå®ƒå†³å®šäº†ä¸¤ä»¶å…³é”®äº‹ï¼š</p>
<ul>
<li>å†…å­˜è®¿é—®ç²’åº¦ï¼š<code>int*</code>æ¯æ¬¡è®¿é—® 4 å­—èŠ‚ï¼ˆint ç±»å‹å¤§å°ï¼‰ï¼Œ<code>char*</code>æ¯æ¬¡è®¿é—® 1 å­—èŠ‚ï¼›</li>
<li>æŒ‡é’ˆè¿ç®—è§„åˆ™ï¼š<code>p++</code>æ—¶ï¼Œ<code>int*</code>æŒ‡é’ˆåœ°å€ + 4ï¼Œ<code>char*</code>æŒ‡é’ˆåœ°å€ + 1ï¼Œç¡®ä¿æŒ‡å‘æœ‰æ•ˆæ•°æ®ã€‚</li>
</ul>
<h3 data-id="heading-5">äºŒã€æ ¸å¿ƒåº”ç”¨ï¼šæŒ‡é’ˆçš„ 3 å¤§å®ç”¨åœºæ™¯</h3>
<h4 data-id="heading-6">1. æŒ‡é’ˆä¸æ•°ç»„ï¼šå¤©ç”Ÿä¸€å¯¹</h4>
<p>æ•°ç»„å’ŒæŒ‡é’ˆæ˜¯ C è¯­è¨€ä¸­æœ€äº²å¯†çš„ç»„åˆï¼Œæ•°ç»„åæœ¬è´¨æ˜¯<strong>æŒ‡å‘é¦–å…ƒç´ çš„å¸¸é‡æŒ‡é’ˆ</strong>ï¼ŒäºŒè€…åœ¨å¾ˆå¤šåœºæ™¯ä¸‹å¯äº’æ¢ä½¿ç”¨ã€‚</p>
<h5 data-id="heading-7">å…³é”®å…³ç³»</h5>
<ul>
<li><code>arr[i]</code> ç­‰ä»·äº <code>*(arr + i)</code>ï¼šæ•°ç»„ä¸‹æ ‡è®¿é—®æœ¬è´¨æ˜¯æŒ‡é’ˆåç§»è¿ç®—ï¼›</li>
<li>æ•°ç»„åæ˜¯å¸¸é‡æŒ‡é’ˆï¼Œä¸èƒ½é‡æ–°èµ‹å€¼ï¼ˆå¦‚<code>arr = p</code> æŠ¥é”™ï¼‰ï¼Œä½†æŒ‡é’ˆå˜é‡å¯ä»¥è‡ªç”±æŒ‡å‘ï¼ˆå¦‚<code>p = arr</code> åˆæ³•ï¼‰ï¼›</li>
<li>å‡½æ•°ä¼ å‚æ—¶ï¼Œæ•°ç»„ä¼šé€€åŒ–ä¸ºæŒ‡é’ˆï¼Œå‡½æ•°æ¥æ”¶çš„å®é™…æ˜¯æ•°ç»„é¦–å…ƒç´ åœ°å€ã€‚</li>
</ul>
<h5 data-id="heading-8">å®æˆ˜ï¼šæŒ‡é’ˆéå†æ•°ç»„</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> arr[<span class="hljs-number">5</span>] = {<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>};
    <span class="hljs-type">int</span> *p = arr; <span class="hljs-comment">// æŒ‡é’ˆæŒ‡å‘æ•°ç»„é¦–å…ƒç´ </span>
    
    <span class="hljs-comment">// æŒ‡é’ˆéå†ï¼ˆæ¯”ä¸‹æ ‡æ›´é«˜æ•ˆï¼‰</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">5</span>; i++) {
        <span class="hljs-built_in">printf</span>(<span class="hljs-string">"%d "</span>, *(p + i)); <span class="hljs-comment">// è¾“å‡ºï¼š1 2 3 4 5</span>
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-9">2. æŒ‡é’ˆä¸å‡½æ•°ï¼šé«˜æ•ˆä¼ å‚</h4>
<p>C è¯­è¨€å‡½æ•°é»˜è®¤æ˜¯ â€œå€¼ä¼ é€’â€ï¼ˆä¼ é€’å‰¯æœ¬ï¼‰ï¼Œè€ŒæŒ‡é’ˆä¼ é€’èƒ½ç›´æ¥æ“ä½œåŸå§‹æ•°æ®ï¼Œè§£å†³ä¸¤å¤§é—®é¢˜ï¼š</p>
<ul>
<li>ä¿®æ”¹å¤–éƒ¨å˜é‡ï¼šæ— éœ€è¿”å›å€¼å³å¯æ”¹å˜å‡½æ•°å¤–å˜é‡çš„å€¼ï¼›</li>
<li>çªç ´å•è¿”å›å€¼é™åˆ¶ï¼šé€šè¿‡å¤šä¸ªæŒ‡é’ˆå‚æ•°ï¼Œé—´æ¥è¿”å›å¤šä¸ªç»“æœã€‚</li>
</ul>
<h5 data-id="heading-10">å®æˆ˜ 1ï¼šæŒ‡é’ˆä¼ é€’å®ç°ä¸¤æ•°äº¤æ¢</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-comment">// æŒ‡é’ˆä¼ é€’ï¼šæ¥æ”¶å˜é‡åœ°å€ï¼Œç›´æ¥æ“ä½œåŸå§‹æ•°æ®</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">swap</span><span class="hljs-params">(<span class="hljs-type">int</span> *a, <span class="hljs-type">int</span> *b)</span> </span>{
    <span class="hljs-type">int</span> temp = *a;
    *a = *b;
    *b = temp;
}
<span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> x = <span class="hljs-number">5</span>, y = <span class="hljs-number">10</span>;
    <span class="hljs-built_in">swap</span>(&amp;x, &amp;y); <span class="hljs-comment">// ä¼ é€’å˜é‡åœ°å€</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"x=%d, y=%d\n"</span>, x, y); <span class="hljs-comment">// è¾“å‡ºï¼šx=10, y=5ï¼ˆäº¤æ¢æˆåŠŸï¼‰</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h5 data-id="heading-11">å®æˆ˜ 2ï¼šäºŒçº§æŒ‡é’ˆä¿®æ”¹æŒ‡é’ˆæŒ‡å‘</h5>
<p>å¦‚æœæƒ³åœ¨å‡½æ•°ä¸­æ”¹å˜æŒ‡é’ˆæœ¬èº«çš„æŒ‡å‘ï¼ˆè€ŒéæŒ‡å‘çš„å€¼ï¼‰ï¼Œéœ€è¦ç”¨åˆ°äºŒçº§æŒ‡é’ˆï¼ˆæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼‰ï¼š</p>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-comment">// äºŒçº§æŒ‡é’ˆï¼šæ”¹å˜ä¸€çº§æŒ‡é’ˆçš„æŒ‡å‘</span>
<span class="hljs-type">void</span> <span class="hljs-title function_">changePtr</span><span class="hljs-params">(<span class="hljs-type">int</span> **pp)</span> {
    *pp = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>)); <span class="hljs-comment">// åˆ†é…æ–°å†…å­˜</span>
    **pp = <span class="hljs-number">20</span>; <span class="hljs-comment">// ç»™æ–°å†…å­˜èµ‹å€¼</span>
}
<span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> {
    <span class="hljs-type">int</span> *p = <span class="hljs-literal">NULL</span>;
    changePtr(&amp;p); <span class="hljs-comment">// ä¼ é€’ä¸€çº§æŒ‡é’ˆçš„åœ°å€</span>
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">"pæŒ‡å‘çš„å€¼ï¼š%d\n"</span>, *p); <span class="hljs-comment">// è¾“å‡ºï¼š20</span>
    <span class="hljs-built_in">free</span>(p); <span class="hljs-comment">// é‡Šæ”¾å†…å­˜</span>
    p = <span class="hljs-literal">NULL</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</code></pre>
<h4 data-id="heading-12">3. æŒ‡é’ˆæ•°ç»„ï¼šé«˜æ•ˆç®¡ç†å­—ç¬¦ä¸²</h4>
<p>æŒ‡é’ˆæ•°ç»„æ˜¯ â€œå­˜å‚¨æŒ‡é’ˆçš„æ•°ç»„â€ï¼Œæœ€ç»å…¸çš„ç”¨é€”æ˜¯ç®¡ç†ä¸€ç»„å­—ç¬¦ä¸² â€”â€” æ— éœ€ç§»åŠ¨å­—ç¬¦ä¸²æœ¬èº«ï¼Œåªéœ€äº¤æ¢æŒ‡é’ˆæŒ‡å‘ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚</p>
<h5 data-id="heading-13">å®æˆ˜ï¼šæŒ‡é’ˆæ•°ç»„æ’åºå­—ç¬¦ä¸²</h5>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini"><span class="hljs-comment">#include &lt;stdio.h&gt;</span>
<span class="hljs-comment">#include &lt;string.h&gt;</span>
// é€‰æ‹©æ’åºï¼šæŒ‰å­—å…¸åºé™åºæ’åˆ—å­—ç¬¦ä¸²
void sortStrings(char *arr<span class="hljs-section">[]</span>, int n) {
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n - 1; i++) {</span>
        int <span class="hljs-attr">maxIdx</span> = i<span class="hljs-comment">;</span>
        // æŸ¥æ‰¾å½“å‰æœ€å¤§å­—ç¬¦ä¸²
        for (int <span class="hljs-attr">j</span> = i + <span class="hljs-number">1</span><span class="hljs-comment">; j &lt; n; j++) {</span>
            if (strcmp(arr<span class="hljs-section">[j]</span>, arr<span class="hljs-section">[maxIdx]</span>) &gt; 0) {
                <span class="hljs-attr">maxIdx</span> = j<span class="hljs-comment">;</span>
            }
        }
        // äº¤æ¢æŒ‡é’ˆï¼ˆä¸ç§»åŠ¨å­—ç¬¦ä¸²ï¼‰
        char *<span class="hljs-attr">temp</span> = arr[i]<span class="hljs-comment">;</span>
        arr<span class="hljs-section">[i]</span> = arr<span class="hljs-section">[maxIdx]</span><span class="hljs-comment">;</span>
        arr<span class="hljs-section">[maxIdx]</span> = temp<span class="hljs-comment">;</span>
    }
}
int main() {
    char *strs<span class="hljs-section">[]</span> = {"hello", "world", "c", "pointer", "array"}<span class="hljs-comment">;</span>
    int <span class="hljs-attr">n</span> = sizeof(strs) / sizeof(strs[<span class="hljs-number">0</span>])<span class="hljs-comment">;</span>
    
    sortStrings(strs, n)<span class="hljs-comment">;</span>
    // è¾“å‡ºæ’åºç»“æœï¼šworld pointer hello array c
    for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; n; i++) {</span>
        printf("%s ", strs<span class="hljs-section">[i]</span>)<span class="hljs-comment">;</span>
    }
    return 0<span class="hljs-comment">;</span>
}
</code></pre>
<h3 data-id="heading-14">ä¸‰ã€é¿å‘æŒ‡å—ï¼š5 ä¸ªè‡´å‘½é”™è¯¯åƒä¸‡åˆ«çŠ¯</h3>
<p>æŒ‡é’ˆè™½å¼ºï¼Œä½†ç¨æœ‰ä¸æ…å°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒæˆ–å†…å­˜æ³„æ¼ï¼Œä»¥ä¸‹æ˜¯åˆå­¦è€…æœ€æ˜“è¸©çš„å‘ï¼š</p>
<h4 data-id="heading-15">1. é‡æŒ‡é’ˆï¼šæœªåˆå§‹åŒ–çš„ â€œæµæµªæŒ‡é’ˆâ€</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šæŒ‡é’ˆpæœªåˆå§‹åŒ–ï¼ŒæŒ‡å‘éšæœºåœ°å€
int *p<span class="hljs-comment">;</span>
*<span class="hljs-attr">p</span> = <span class="hljs-number">10</span><span class="hljs-comment">; // ç¨‹åºå´©æºƒé£é™©ï¼</span>

// æ­£ç¡®ï¼šè¦ä¹ˆåˆå§‹åŒ–æŒ‡å‘åˆæ³•åœ°å€ï¼Œè¦ä¹ˆç½®ç©º
int <span class="hljs-attr">x</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
int *<span class="hljs-attr">p</span> = &amp;x<span class="hljs-comment">; // æŒ‡å‘æœ‰æ•ˆå˜é‡</span>
// æˆ–
int *<span class="hljs-attr">p</span> = NULL<span class="hljs-comment">; // æ˜ç¡®æŒ‡å‘ç©ºåœ°å€</span>
</code></pre>
<h4 data-id="heading-16">2. å†…å­˜æ³„æ¼ï¼šåˆ†é…åå¿˜è®°é‡Šæ”¾</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// é”™è¯¯ï¼šmallocåˆ†é…çš„å†…å­˜æœªfreeï¼Œå‡½æ•°ç»“æŸåæ°¸ä¹…ä¸¢å¤±</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> *p = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">4</span>);
    *p = <span class="hljs-number">10</span>;
    <span class="hljs-comment">// æœªæ‰§è¡Œfree(p)</span>
}

<span class="hljs-comment">// æ­£ç¡®ï¼šåˆ†é…ä¸é‡Šæ”¾æˆå¯¹å‡ºç°ï¼Œé‡Šæ”¾åç½®ç©º</span>
<span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-type">int</span> *p = (<span class="hljs-type">int</span>*)<span class="hljs-built_in">malloc</span>(<span class="hljs-number">4</span>);
    *p = <span class="hljs-number">10</span>;
    <span class="hljs-built_in">free</span>(p); <span class="hljs-comment">// é‡Šæ”¾å†…å­˜</span>
    p = <span class="hljs-literal">NULL</span>; <span class="hljs-comment">// é¿å…æ‚¬ç©ºæŒ‡é’ˆ</span>
}
</code></pre>
<h4 data-id="heading-17">3. è§£å¼•ç”¨ç©ºæŒ‡é’ˆï¼šè®¿é—®ä¸å­˜åœ¨çš„åœ°å€</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šç©ºæŒ‡é’ˆä¸èƒ½è§£å¼•ç”¨
int *<span class="hljs-attr">p</span> = NULL<span class="hljs-comment">;</span>
*<span class="hljs-attr">p</span> = <span class="hljs-number">100</span><span class="hljs-comment">; // ç¨‹åºå´©æºƒï¼</span>

// æ­£ç¡®ï¼šä½¿ç”¨å‰å…ˆåˆ¤æ–­
int *<span class="hljs-attr">p</span> = NULL<span class="hljs-comment">;</span>
if (p != NULL) {
    *<span class="hljs-attr">p</span> = <span class="hljs-number">100</span><span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-18">4. æ•°ç»„è¶Šç•Œï¼šæŒ‡é’ˆåç§»è¶…å‡ºæœ‰æ•ˆèŒƒå›´</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-ini" lang="ini">// é”™è¯¯ï¼šæ•°ç»„åªæœ‰5ä¸ªå…ƒç´ ï¼Œå¾ªç¯æ¡ä»¶i&lt;=5å¯¼è‡´è¶Šç•Œ
int arr<span class="hljs-section">[5]</span> = {1,2,3,4,5}<span class="hljs-comment">;</span>
int *<span class="hljs-attr">p</span> = arr<span class="hljs-comment">;</span>
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt;= 5; i++) {</span>
    printf("%d ", *p++)<span class="hljs-comment">; // è®¿é—®æ— æ•ˆå†…å­˜</span>
}

// æ­£ç¡®ï¼šå¾ªç¯æ¡ä»¶ä¸¥æ ¼æ§åˆ¶åœ¨æœ‰æ•ˆèŒƒå›´å†…
for (int <span class="hljs-attr">i</span> = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; 5; i++) {</span>
    printf("%d ", *p++)<span class="hljs-comment">;</span>
}
</code></pre>
<h4 data-id="heading-19">5. æ··æ·†æ•°ç»„æŒ‡é’ˆä¸æŒ‡é’ˆæ•°ç»„</h4>
<p>c</p>
<p>è¿è¡Œ</p>
<pre><code class="hljs language-css" lang="css">// æ•°ç»„æŒ‡é’ˆï¼šæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆï¼ˆæœ¬è´¨æ˜¯æŒ‡é’ˆï¼‰
int (*<span class="hljs-selector-tag">p</span>)<span class="hljs-selector-attr">[10]</span>; // <span class="hljs-selector-tag">p</span>æŒ‡å‘åŒ…å«<span class="hljs-number">10</span>ä¸ªintçš„æ•°ç»„

// æŒ‡é’ˆæ•°ç»„ï¼šå­˜å‚¨æŒ‡é’ˆçš„æ•°ç»„ï¼ˆæœ¬è´¨æ˜¯æ•°ç»„ï¼‰
int *<span class="hljs-selector-tag">p</span><span class="hljs-selector-attr">[10]</span>; // <span class="hljs-selector-tag">p</span>æ˜¯æ•°ç»„ï¼ŒåŒ…å«<span class="hljs-number">10</span>ä¸ªint*æŒ‡é’ˆ

// è®°å¿†æŠ€å·§ï¼š()ä¼˜å…ˆçº§é«˜äº<span class="hljs-selector-attr">[]</span>ï¼Œå…ˆç»“åˆ*æ˜¯æŒ‡é’ˆï¼Œå…ˆç»“åˆ<span class="hljs-selector-attr">[]</span>æ˜¯æ•°ç»„
</code></pre>
<h3 data-id="heading-20">å››ã€æ€»ç»“ï¼šæŒ‡é’ˆå­¦ä¹ çš„ 3 ä¸ªå…³é”®</h3>
<ol>
<li>æŠ“æœ¬è´¨ï¼šæŒ‡é’ˆå°±æ˜¯ â€œåœ°å€å®¹å™¨â€ï¼Œæ‰€æœ‰æ“ä½œéƒ½å›´ç»• â€œå­˜å‚¨åœ°å€â€ å’Œ â€œé€šè¿‡åœ°å€è®¿é—®æ•°æ®â€ å±•å¼€ï¼›</li>
<li>å¤šå®è·µï¼šæ•°ç»„ã€å‡½æ•°ã€å­—ç¬¦ä¸²æ˜¯æŒ‡é’ˆçš„æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼Œæ¯ä¸ªåœºæ™¯è‡³å°‘ç¼–å†™ 3 ä¸ªå®æˆ˜æ¡ˆä¾‹ï¼›</li>
<li>é¿é™·é˜±ï¼šç‰¢è®°é‡æŒ‡é’ˆã€å†…å­˜æ³„æ¼ã€è¶Šç•Œè¿™ä¸‰å¤§ â€œçº¢çº¿â€ï¼Œå…»æˆåˆå§‹åŒ–ã€é…å¯¹é‡Šæ”¾çš„ä¹ æƒ¯ã€‚</li>
</ol>
<p>æŒ‡é’ˆæ˜¯ C è¯­è¨€çš„ â€œå± é¾™åˆ€â€ï¼Œä¸€æ—¦æŒæ¡ï¼Œä½ å°±èƒ½çªç ´å¾ˆå¤šåŸºç¡€è¯­æ³•çš„é™åˆ¶ï¼Œå†™å‡ºæ›´é«˜æ•ˆã€æ›´çµæ´»çš„ä»£ç ã€‚åˆšå¼€å§‹å­¦ä¹ æ—¶é‡åˆ°å›°æƒ‘å¾ˆæ­£å¸¸ï¼Œå¤šç”»å›¾æ¢³ç†åœ°å€å…³ç³»ï¼Œå¤šè°ƒè¯•è§‚å¯ŸæŒ‡é’ˆå˜åŒ–ï¼Œæ…¢æ…¢å°±ä¼šè±ç„¶å¼€æœ—ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤§æ¨¡å‹è¿˜åœ¨ç¡¬ç¼–ç ï¼ŸSpring AI å®ç°â€œåŠ¨æ€çƒ­åˆ‡æ¢â€å…¨æ”»ç•¥ï¼ˆä¸Šï¼‰]]></title>    <link>https://juejin.cn/post/7592127014188023808</link>    <guid>https://juejin.cn/post/7592127014188023808</guid>    <pubDate>2026-01-07T01:38:53.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592127014188023808" data-draft-id="7592094314472292387" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤§æ¨¡å‹è¿˜åœ¨ç¡¬ç¼–ç ï¼ŸSpring AI å®ç°â€œåŠ¨æ€çƒ­åˆ‡æ¢â€å…¨æ”»ç•¥ï¼ˆä¸Šï¼‰"/> <meta itemprop="keywords" content="åç«¯,OpenAI"/> <meta itemprop="datePublished" content="2026-01-07T01:38:53.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç”¨æˆ·90832460273"/> <meta itemprop="url" content="https://juejin.cn/user/307518986530984"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤§æ¨¡å‹è¿˜åœ¨ç¡¬ç¼–ç ï¼ŸSpring AI å®ç°â€œåŠ¨æ€çƒ­åˆ‡æ¢â€å…¨æ”»ç•¥ï¼ˆä¸Šï¼‰
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/307518986530984/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç”¨æˆ·90832460273
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:38:53.000Z" title="Wed Jan 07 2026 01:38:53 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»8åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨ä¼ä¸šçº§ AI å¼€å‘ä¸­ï¼Œå•ä¸€æ¨¡å‹å¾€å¾€éš¾ä»¥é€‚åº”å¤šå˜çš„ä¸šåŠ¡éœ€æ±‚ã€‚æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•åŸºäº Spring AI æ¡†æ¶ï¼Œæ„å»ºä¸€ä¸ªæ”¯æŒåŠ¨æ€åˆ‡æ¢åº•å±‚æ¨¡å‹ï¼ˆå¦‚ OpenAIã€DeepSeekï¼‰ã€å¯é…ç½®å‚æ•°ï¼ˆå¦‚æ¸©åº¦ã€TopKï¼‰ä»¥åŠè‡ªå®šä¹‰è§’è‰²äººè®¾çš„é€šç”¨ AI æœåŠ¡æ¶æ„ã€‚æˆ‘ä»¬å°†ä»æ•°æ®åº“è®¾è®¡å‡ºå‘ï¼Œæ·±å…¥è®²è§£ç­–ç•¥æ¨¡å¼ä¸å·¥å‚æ¨¡å¼åœ¨ AI ä¸­å°å»ºè®¾ä¸­çš„å®é™…åº”ç”¨ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0. æŠ€æœ¯æ ˆè¯´æ˜</h2>
<p>æœ¬æ–‡åŸºäºä»¥ä¸‹æ ¸å¿ƒæŠ€æœ¯æ ˆï¼š</p>
<ul>
<li><strong>JDK</strong>: 17+</li>
<li><strong>Spring Boot</strong>: 3.3.x</li>
<li><strong>Spring AI</strong>: 1.1.x</li>
</ul>
<h3 data-id="heading-1">0.1 å¼•å…¥ Maven ä¾èµ–</h3>
<p>åœ¨ä½¿ç”¨ Spring AI ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ <code>pom.xml</code> ä¸­å¼•å…¥ <code>spring-ai-bom</code> æ¥ç®¡ç†ç‰ˆæœ¬ï¼Œå¹¶æ·»åŠ ç›¸åº”çš„ Starter ä¾èµ–ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dependencyManagement</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-bom<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.1.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">type</span>&gt;</span>pom<span class="hljs-tag">&lt;/<span class="hljs-name">type</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>import<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencyManagement</span>&gt;</span>
â€‹
<span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- WebFlux æ”¯æŒæµå¼å“åº” (SSE) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.boot<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-boot-starter-webflux<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
â€‹
    <span class="hljs-comment">&lt;!-- OpenAI æ¨¡å‹æ”¯æŒ (Spring AI æ ¸å¿ƒ) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
â€‹
    <span class="hljs-comment">&lt;!-- DeepSeek æ¨¡å‹æ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-deepseek<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
â€‹
    <span class="hljs-comment">&lt;!-- æ™ºè°± AI æ¨¡å‹æ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-zhipuai<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
â€‹
    <span class="hljs-comment">&lt;!-- RAG å‘é‡æ£€ç´¢æ”¯æŒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.springframework.ai<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>spring-ai-advisors-vector-store<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span>
</code></pre>
<h2 data-id="heading-2">1. æ ¸å¿ƒç—›ç‚¹ä¸è®¾è®¡ç›®æ ‡</h2>
<p>åœ¨ Spring AI çš„é»˜è®¤é…ç½®ä¸­ï¼Œ<code>ChatModel</code> é€šå¸¸æ˜¯å•ä¾‹çš„ã€‚ä½†åœ¨å®é™…ä¸šåŠ¡åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´ä»¥ä¸‹æŒ‘æˆ˜ï¼š</p>
<ol>
<li><strong>åŠ¨æ€åˆ‡æ¢</strong>ï¼šç®¡ç†å‘˜åœ¨åå°é…ç½®ä¸åŒçš„ API Key å’Œ Endpointï¼Œç³»ç»Ÿéœ€å³æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯ã€‚</li>
<li><strong>ä¸ªæ€§åŒ–äººè®¾</strong>ï¼šä¸åŒçš„ä¸šåŠ¡åœºæ™¯éœ€è¦ä¸åŒçš„â€œè§’è‰²ï¼ˆSystem Promptï¼‰â€ï¼Œä¾‹å¦‚â€œå®¢æœåŠ©æ‰‹â€ã€â€œä»£ç ä¸“å®¶â€ç­‰ã€‚</li>
<li><strong>å‚æ•°çƒ­é…</strong>ï¼š<strong>Temperature (æ¸©åº¦)</strong>ã€<strong>Top-P</strong> ç­‰æ¨ç†å‚æ•°éœ€æ”¯æŒæ•°æ®åº“åŒ–é…ç½®ï¼Œä»¥ä¾¿æ ¹æ®æ•ˆæœçµæ´»è°ƒæ•´ã€‚</li>
</ol>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬é‡‡ç”¨äº† <strong>â€œæ•°æ®åº“é…ç½®è¡¨ + åŠ¨æ€å·¥å‚æ¨¡å¼â€</strong> çš„æ¶æ„æ–¹æ¡ˆã€‚</p>
<h2 data-id="heading-3">2. æ•°æ®åº“è®¾è®¡</h2>
<p>ä¸ºäº†å®ç°ä¸Šè¿°ç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦ä¸¤å¼ æ ¸å¿ƒè¡¨ï¼šä¸€å¼ å­˜å‚¨<strong>æ¨¡å‹è¿æ¥ä¿¡æ¯</strong>ï¼Œå¦ä¸€å¼ å­˜å‚¨<strong>è§’è‰²ä¸ Prompt é…ç½®</strong>ã€‚</p>
<h3 data-id="heading-4">2.1 æ¨¡å‹é…ç½®è¡¨ (<code>ai_model_config</code>)</h3>
<p>è¿™å¼ è¡¨ç”¨äºå­˜å‚¨ LLM çš„è¿æ¥å‚æ•°å’Œæ¨ç†å‚æ•°ã€‚</p>
<p><strong>å…³é”®å­—æ®µè§£æï¼š</strong></p>
<ul>
<li><strong><code>api_endpoint</code></strong>: æ ‡å‡†çš„ OpenAI æ¥å£åœ°å€æ˜¯ <code>api.openai.com</code>ï¼Œä½†å›½å†…è®¸å¤šå¤§æ¨¡å‹ï¼ˆå¦‚ DeepSeek, Moonshotï¼‰éƒ½å…¼å®¹ OpenAI åè®®ã€‚æˆ‘ä»¬åªéœ€è¦å°† Endpoint ä¿®æ”¹ä¸ºå‚å•†æä¾›çš„åœ°å€ï¼Œå³å¯å¤ç”¨åŒä¸€å¥—ä»£ç ã€‚</li>
<li><strong><code>temperature</code></strong>: å€¼é€šå¸¸åœ¨ 0 åˆ° 1ï¼ˆæˆ– 2ï¼‰ä¹‹é—´ã€‚<strong>æ•°å€¼è¶Šä½</strong>ï¼Œæ¨¡å‹è¶Šä¿å®ˆã€ä¸¥è°¨ï¼Œé€‚åˆå®¢æœé—®ç­”ï¼›<strong>æ•°å€¼è¶Šé«˜</strong>ï¼Œæ¨¡å‹è¶Šå‘æ•£ã€æœ‰åˆ›é€ åŠ›ï¼Œé€‚åˆå†™è¯—æˆ–å¤´è„‘é£æš´ã€‚</li>
<li><strong><code>top_p</code></strong>: æ ¸é‡‡æ ·æ¦‚ç‡ã€‚å®ƒä¸ Temperature ç±»ä¼¼ï¼Œä¹Ÿæ˜¯æ§åˆ¶ç”Ÿæˆå¤šæ ·æ€§çš„å‚æ•°ã€‚é€šå¸¸å»ºè®®è¿™ä¸¤ä¸ªå‚æ•°åªè°ƒæ•´å…¶ä¸­ä¸€ä¸ªã€‚</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ai_model_config` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `config_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'é…ç½®åç§°'</span>,
  `api_provider` <span class="hljs-type">varchar</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'API æä¾›å•† (æ ¸å¿ƒå­—æ®µï¼Œå†³å®šè°ƒç”¨å“ªä¸ªç­–ç•¥ï¼Œå¦‚ openai, deepseek)'</span>,
  `model_id` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¨¡å‹æ ‡è¯† (å¦‚ gpt-4o, deepseek-chat)'</span>,
  `is_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'æ˜¯å¦å¯ç”¨ï¼ˆ1-å¯ç”¨ 0-ç¦æ­¢ï¼‰'</span>,
  `is_default` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦é»˜è®¤ï¼ˆ1-æ˜¯ 0-å¦ï¼‰'</span>,
  `role_id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'ç»‘å®šè§’è‰²ä¸æç¤ºè¯IDï¼ˆå¯ä¸ºç©ºï¼Œç”¨äºè®¾ç½® System Promptï¼‰'</span>,
  `api_key` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'API Key (æ•æ„Ÿä¿¡æ¯)'</span>,
  `api_endpoint` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'API ç«¯ç‚¹ (ç”¨äºé€‚é…å…¼å®¹ OpenAI åè®®çš„å›½å†…æ¨¡å‹)'</span>,
  `temperature` <span class="hljs-keyword">double</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æ¸©åº¦ (æ§åˆ¶å›ç­”çš„éšæœºæ€§)'</span>,
  `top_p` <span class="hljs-keyword">double</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'Top P'</span>,
  `max_tokens` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'æœ€å¤§ Token æ•°'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'AI æ¨¡å‹é…ç½®è¡¨'</span>;
</code></pre>
<h3 data-id="heading-5">2.2 è§’è‰²ä¸ RAG é…ç½®è¡¨ (<code>ai_role_prompt</code>)</h3>
<p>è¿™å¼ è¡¨å®šä¹‰äº† AI çš„â€œäººè®¾â€ä»¥åŠ RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰çš„ç›¸å…³è§„åˆ™ã€‚</p>
<p><strong>å…³é”®å­—æ®µè§£æï¼š</strong></p>
<ul>
<li><strong><code>system_prompt</code></strong>: ç³»ç»Ÿæç¤ºè¯ã€‚è¿™æ˜¯å‘ç»™ AI çš„ç¬¬ä¸€å¥è¯ï¼Œè§„å®šäº† AI çš„èº«ä»½å’Œè¡Œä¸ºå‡†åˆ™ï¼ˆä¾‹å¦‚ï¼šâ€œä½ æ˜¯ä¸€ä¸ªèµ„æ·±çš„ Java æ¶æ„å¸ˆï¼Œåªå›ç­”æŠ€æœ¯é—®é¢˜â€ï¼‰ã€‚</li>
<li><strong><code>similarity_threshold</code></strong>: ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0.0 - 1.0ï¼‰ã€‚åœ¨è¿›è¡Œå‘é‡æ£€ç´¢æ—¶ï¼Œå¦‚æœæ–‡æ¡£ä¸é—®é¢˜çš„ç›¸ä¼¼åº¦ä½äºè¿™ä¸ªå€¼ï¼Œå°±ä¼šè¢«è¿‡æ»¤æ‰ã€‚è¿™èƒ½æœ‰æ•ˆé˜²æ­¢ AI è¢«ä¸ç›¸å…³çš„æ–‡æ¡£è¯¯å¯¼ã€‚</li>
</ul>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `ai_role_prompt` (
  `id` <span class="hljs-type">bigint</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="hljs-string">'ä¸»é”®ID'</span>,
  `role_name` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è§’è‰²åç§°'</span>,
  `description` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è§’è‰²æè¿°'</span>,
  `is_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'1'</span> COMMENT <span class="hljs-string">'æ˜¯å¦å¯ç”¨'</span>,
  `system_prompt` text COMMENT <span class="hljs-string">'ç³»ç»Ÿæç¤ºè¯ï¼ˆSystem Promptï¼‰'</span>,\
  `is_rag_enabled` tinyint(<span class="hljs-number">1</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span> COMMENT <span class="hljs-string">'æ˜¯å¦å¯ç”¨ RAG'</span>,
  `rag_template` text COMMENT <span class="hljs-string">'RAG æç¤ºè¯æ¨¡æ¿'</span>,
  `top_k` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'5'</span> COMMENT <span class="hljs-string">'æ£€ç´¢æ–‡æ¡£æ•°é‡ topK'</span>,
  `similarity_threshold` <span class="hljs-keyword">double</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0.7'</span> COMMENT <span class="hljs-string">'ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0-1ï¼‰'</span>,
  `custom_filter` <span class="hljs-type">varchar</span>(<span class="hljs-number">255</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">'è‡ªå®šä¹‰è¿‡æ»¤è¡¨è¾¾å¼'</span>,
  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)
) COMMENT<span class="hljs-operator">=</span><span class="hljs-string">'AI è§’è‰²ä¸æç¤ºè¯é…ç½®è¡¨'</span>;
</code></pre>
<h2 data-id="heading-6">3. åŠ¨æ€å·¥å‚æ ¸å¿ƒå®ç°æ‹†è§£</h2>
<p><code>DynamicChatClientFactory</code> æ˜¯æœ¬ç³»ç»Ÿçš„æ ¸å¿ƒã€‚æˆ‘ä»¬é€šè¿‡åˆ†æ­¥è§£æï¼Œæ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚</p>
<h3 data-id="heading-7">3.1 æ­¥éª¤ä¸€ï¼šåŠ è½½é»˜è®¤é…ç½®</h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å½“å‰ç”Ÿæ•ˆçš„é…ç½®ã€‚è¿™é‡Œä½¿ç”¨äº† MyBatis-Plus çš„ LambdaQueryï¼ŒåªæŸ¥è¯¢ <code>is_default=1</code> ä¸” <code>is_enabled=1</code> çš„è®°å½•ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">// Service å±‚æ–¹æ³•è°ƒç”¨</span>
AiModelConfig config = aiModelConfigService.<span class="hljs-built_in">getDefaultConfig</span>();
<span class="hljs-keyword">if</span> (config == null) {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">BizException</span>(ResultCode.NOT_FOUND, <span class="hljs-string">"æœªæ‰¾åˆ°é»˜è®¤å¯ç”¨çš„æ¨¡å‹é…ç½®ï¼Œè¯·å…ˆåœ¨æ¨¡å‹é…ç½®ä¸­è®¾ç½®é»˜è®¤æ¨¡å‹"</span>);
}
</code></pre>
<h3 data-id="heading-8">3.2 æ­¥éª¤äºŒï¼šç­–ç•¥è·¯ç”±ä¸æ¨¡å‹æ„å»º</h3>
<p>ä¸åŒçš„å‚å•†ï¼ˆProviderï¼‰åˆå§‹åŒ–æ–¹å¼ä¸åŒã€‚æˆ‘ä»¬ä½¿ç”¨<strong>ç­–ç•¥æ¨¡å¼</strong>ï¼Œæ ¹æ® <code>api_provider</code> å­—æ®µï¼ˆå¦‚ "openai", "deepseek"ï¼‰æ‰¾åˆ°å¯¹åº”çš„ç­–ç•¥å®ç°ç±»ï¼Œæ„å»ºå‡ºåº•å±‚çš„ <code>ChatModel</code>ã€‚</p>
<p><strong>ChatModel vs ChatClient</strong>:</p>
<ul>
<li><strong>ChatModel</strong>: æ˜¯ Spring AI çš„åº•å±‚æ¥å£ï¼Œè´Ÿè´£ä¸å…·ä½“çš„å¤§æ¨¡å‹ API è¿›è¡Œ HTTP é€šä¿¡ï¼ˆç±»ä¼¼ JDBC Driverï¼‰ã€‚</li>
<li><strong>ChatClient</strong>: æ˜¯ Spring AI çš„é«˜å±‚æ¥å£ï¼Œæä¾›äº† fluent APIï¼ˆé“¾å¼è°ƒç”¨ï¼‰ï¼Œè´Ÿè´£å¤„ç† Prompt å°è£…ã€Advisor æ‹¦æˆªç­‰é€»è¾‘ï¼ˆç±»ä¼¼ JdbcTemplateï¼‰ã€‚</li>
</ul>
<pre><code class="hljs language-ini" lang="ini">// è·å–ç­–ç•¥å¹¶æ„å»ºåº•å±‚çš„ ChatModel
ModelChatStrategy <span class="hljs-attr">strategy</span> = modelChatStrategyFactory.getStrategy(config.getApiProvider())<span class="hljs-comment">;</span>
ChatModel <span class="hljs-attr">chatModel</span> = strategy.buildChatModel(config)<span class="hljs-comment">;</span>
</code></pre>
<h3 data-id="heading-9">3.3 æ­¥éª¤ä¸‰ï¼šSystem Prompt ç»„è£…</h3>
<p>è¿™é‡Œå¤„ç† AI çš„â€œäººè®¾â€ã€‚æˆ‘ä»¬åœ¨ä»£ç ä¸­å†…ç½®äº†ä¸€ä¸ªé»˜è®¤çš„é€šç”¨äººè®¾ï¼ˆæ¤å…¥å“ç‰Œä¿¡æ¯ï¼‰ï¼ŒåŒæ—¶æ”¯æŒä» <code>ai_role_prompt</code> è¡¨ä¸­åŠ è½½åŠ¨æ€é…ç½®æ¥è¦†ç›–é»˜è®¤å€¼ã€‚</p>
<pre><code class="hljs language-ini" lang="ini">// è®¾ç½®é»˜è®¤çš„ System Promptï¼ˆå†…ç½®å…œåº•ï¼‰
String <span class="hljs-attr">systemPrompt</span> = <span class="hljs-string">"""
        ä½ æ˜¯lanjii(å²šè¿¹)çš„å®¢æœåŠ©æ‰‹ï¼Œåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡é—®ä½ çš„æ—¶å€™ï¼Œä½ è¦è¡¨æ˜è‡ªå·±çš„èº«ä»½ï¼Œå¹¶ä¸”è¦è¯´æ˜ lanjii æ˜¯ä»€ä¹ˆã€‚
        é’ˆå¯¹ç”¨æˆ·çš„é—®é¢˜æ€»æ˜¯èƒ½ä»¥å‹å¥½æ„‰æ‚¦çš„æ–¹å¼å»è¿›è¡Œäº¤æµï¼Œå¸Œæœ›å¸¦ç»™å®¢æˆ·å¾ˆå¥½çš„ä½“éªŒã€‚
        ä½ æ€»æ˜¯ä¼šç”¨ä¸­æ–‡å»å›ç­”é—®é¢˜ã€‚
        """</span><span class="hljs-comment">;</span>
â€‹
// å¦‚æœé…ç½®äº†è§’è‰²ï¼Œè¦†ç›–é»˜è®¤ System Prompt
if (config.getRoleId() != null) {
    AiRolePrompt <span class="hljs-attr">rolePrompt</span> = aiRolePromptService.getById(config.getRoleId())<span class="hljs-comment">;</span>
    if (rolePrompt != null &amp;&amp; rolePrompt.getSystemPrompt() != null &amp;&amp; !rolePrompt.getSystemPrompt().isEmpty()) {
        <span class="hljs-attr">systemPrompt</span> = rolePrompt.getSystemPrompt()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h3 data-id="heading-10">3.4 æ­¥éª¤å››ï¼šæ³¨å…¥å¢å¼ºå™¨ (Advisors)</h3>
<p><strong>Advisor</strong> æ˜¯ Spring AI 1.x å¼•å…¥çš„é‡è¦æ¦‚å¿µï¼Œç±»ä¼¼äº Spring AOP çš„åˆ‡é¢ã€‚å®ƒå…è®¸æˆ‘ä»¬åœ¨ä¸ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°ä¸º ChatClient å¢åŠ èƒ½åŠ›ã€‚</p>
<ul>
<li><strong><code>MessageChatMemoryAdvisor</code></strong>: è´Ÿè´£è‡ªåŠ¨ç®¡ç†å¯¹è¯å†å²ã€‚å®ƒä¼šåœ¨å‘è¯·æ±‚å‰æŠŠå†å²è®°å½•æ‹¼æ¥åˆ° Prompt ä¸­ï¼Œåœ¨æ”¶åˆ°å“åº”åæŠŠæ–°å¯¹è¯å­˜å…¥ Memoryã€‚</li>
<li><strong><code>VectorStoreChatMemoryAdvisor</code></strong>: è´Ÿè´£ RAG æ£€ç´¢ã€‚</li>
</ul>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// ç»„è£… ChatClientï¼Œæ³¨å…¥è®°å¿†å’Œå‘é‡æ£€ç´¢èƒ½åŠ›</span>
return ChatClient<span class="hljs-selector-class">.builder</span>(chatModel)
        <span class="hljs-selector-class">.defaultSystem</span>(systemPrompt)
        <span class="hljs-selector-class">.defaultAdvisors</span>(
                MessageChatMemoryAdvisor.builder(chatMemory)<span class="hljs-selector-class">.build</span>(),
                VectorStoreChatMemoryAdvisor<span class="hljs-selector-class">.builder</span>(vectorStore)<span class="hljs-selector-class">.build</span>()
        )
        <span class="hljs-selector-class">.build</span>();
</code></pre>
<h2 data-id="heading-11">4. å·¥å‚ç±»å®Œæ•´ä»£ç æ¸…å•</h2>
<p>å°†ä¸Šè¿°æ­¥éª¤æ•´åˆï¼Œæˆ‘ä»¬å¾—åˆ°äº†å®Œæ•´çš„å·¥å‚ç±»ä»£ç ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">package com.lanjii.biz.admin.ai.service<span class="hljs-comment">;</span>
â€‹
import com.lanjii.biz.admin.ai.model.entity.AiModelConfig<span class="hljs-comment">;</span>
import com.lanjii.biz.admin.ai.model.entity.AiRolePrompt<span class="hljs-comment">;</span>
import com.lanjii.biz.admin.ai.strategy.ModelChatStrategy<span class="hljs-comment">;</span>
import com.lanjii.biz.admin.ai.strategy.ModelChatStrategyFactory<span class="hljs-comment">;</span>
import com.lanjii.common.exception.BizException<span class="hljs-comment">;</span>
import com.lanjii.core.resp.ResultCode<span class="hljs-comment">;</span>
import lombok.RequiredArgsConstructor<span class="hljs-comment">;</span>
import org.springframework.ai.chat.client.ChatClient<span class="hljs-comment">;</span>
import org.springframework.ai.chat.client.advisor.MessageChatMemoryAdvisor<span class="hljs-comment">;</span>
import org.springframework.ai.chat.client.advisor.vectorstore.VectorStoreChatMemoryAdvisor<span class="hljs-comment">;</span>
import org.springframework.ai.chat.memory.ChatMemory<span class="hljs-comment">;</span>
import org.springframework.ai.chat.model.ChatModel<span class="hljs-comment">;</span>
import org.springframework.ai.vectorstore.VectorStore<span class="hljs-comment">;</span>
import org.springframework.stereotype.Component<span class="hljs-comment">;</span>
â€‹
/**
 * æ ¹æ®æ•°æ®åº“ä¸­çš„æ¨¡å‹é…ç½®åŠ¨æ€æ„å»º {@link ChatClient}
 *
 * @author lanjii
 */
@Component
@RequiredArgsConstructor
public class DynamicChatClientFactory {
â€‹
    private final AiModelConfigService aiModelConfigService<span class="hljs-comment">;</span>
    private final AiRolePromptService aiRolePromptService<span class="hljs-comment">;</span>
    private final ModelChatStrategyFactory modelChatStrategyFactory<span class="hljs-comment">;</span>
    private final ChatMemory chatMemory<span class="hljs-comment">;</span>
    private final VectorStore vectorStore<span class="hljs-comment">;</span>
â€‹
    /**
     * æ„å»ºé»˜è®¤æ¨¡å‹
     */
    public ChatClient buildDefaultClient() {
        // åŠ è½½é»˜è®¤é…ç½®
        AiModelConfig <span class="hljs-attr">config</span> = aiModelConfigService.getDefaultConfig()<span class="hljs-comment">;</span>
        if (<span class="hljs-attr">config</span> == null) {
            throw new BizException(ResultCode.NOT_FOUND, "æœªæ‰¾åˆ°é»˜è®¤å¯ç”¨çš„æ¨¡å‹é…ç½®ï¼Œè¯·å…ˆåœ¨æ¨¡å‹é…ç½®ä¸­è®¾ç½®é»˜è®¤æ¨¡å‹")<span class="hljs-comment">;</span>
        }
        
        // ç­–ç•¥è·¯ç”±æ„å»ºæ¨¡å‹
        ModelChatStrategy <span class="hljs-attr">strategy</span> = modelChatStrategyFactory.getStrategy(config.getApiProvider())<span class="hljs-comment">;</span>
        ChatModel <span class="hljs-attr">chatModel</span> = strategy.buildChatModel(config)<span class="hljs-comment">;</span>
â€‹
        // åˆå§‹åŒ–é»˜è®¤æç¤ºè¯
        String <span class="hljs-attr">systemPrompt</span> = <span class="hljs-string">"""
                ä½ æ˜¯lanjii(å²šè¿¹)çš„å®¢æœåŠ©æ‰‹ï¼Œåœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡é—®ä½ çš„æ—¶å€™ï¼Œä½ è¦è¡¨æ˜è‡ªå·±çš„èº«ä»½ï¼Œå¹¶ä¸”è¦è¯´æ˜ lanjii æ˜¯ä»€ä¹ˆã€‚
                é’ˆå¯¹ç”¨æˆ·çš„é—®é¢˜æ€»æ˜¯èƒ½ä»¥å‹å¥½æ„‰æ‚¦çš„æ–¹å¼å»è¿›è¡Œäº¤æµï¼Œå¸Œæœ›å¸¦ç»™å®¢æˆ·å¾ˆå¥½çš„ä½“éªŒã€‚
                ä½ æ€»æ˜¯ä¼šç”¨ä¸­æ–‡å»å›ç­”é—®é¢˜ã€‚
                """</span><span class="hljs-comment">;</span>
â€‹
        // åŠ¨æ€è¦†ç›–æç¤ºè¯
        if (config.getRoleId() != null) {
            AiRolePrompt <span class="hljs-attr">rolePrompt</span> = aiRolePromptService.getById(config.getRoleId())<span class="hljs-comment">;</span>
            if (rolePrompt != null &amp;&amp; rolePrompt.getSystemPrompt() != null &amp;&amp; !rolePrompt.getSystemPrompt().isEmpty()) {
                <span class="hljs-attr">systemPrompt</span> = rolePrompt.getSystemPrompt()<span class="hljs-comment">;</span>
            }
        }
â€‹
        // æ„å»ºå¢å¼ºç‰ˆå®¢æˆ·ç«¯
        return ChatClient.builder(chatModel)
                .defaultSystem(systemPrompt)
                .defaultAdvisors(
                        MessageChatMemoryAdvisor.builder(chatMemory).build(),
                        VectorStoreChatMemoryAdvisor.builder(vectorStore).build()
                )
                .build()<span class="hljs-comment">;</span>
    }
}
</code></pre>
<h2 data-id="heading-12">5. æ¶æ„æ€è€ƒï¼šæ€§èƒ½ä¸çµæ´»æ€§çš„æƒè¡¡</h2>
<p>åœ¨ä¸Šè¿°å®ç°ä¸­ï¼Œæˆ‘ä»¬æ¯æ¬¡è°ƒç”¨ <code>buildDefaultClient()</code> æ—¶ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡â€œæŸ¥åº“ + ç­–ç•¥æ„å»º + Client ç»„è£…â€çš„å…¨æµç¨‹ã€‚</p>
<ul>
<li><strong>ä¼˜åŠ¿</strong>ï¼šå®ç°äº† 100% çš„<strong>çƒ­æ›´æ–°</strong>ã€‚ç®¡ç†å‘˜åœ¨åå°ä¿®æ”¹äº† API Key æˆ– Temperatureï¼Œä¸‹ä¸€ä¸ªè¯·æ±‚ç«‹å³ç”Ÿæ•ˆï¼Œæ²¡æœ‰ä»»ä½•å»¶è¿Ÿã€‚</li>
<li><strong>åŠ£åŠ¿</strong>ï¼šåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ï¼Œé¢‘ç¹åˆ›å»º <code>ChatModel</code> å¯¹è±¡å¯èƒ½ä¼šå¸¦æ¥ä¸€å®šçš„ GC å‹åŠ›ã€‚</li>
</ul>
<p><strong>è¿›é˜¶ä¼˜åŒ–æ–¹å‘</strong>ï¼šå¦‚æœæ‚¨çš„ç³»ç»Ÿ QPS å¾ˆé«˜ï¼Œå¯ä»¥å¼•å…¥ <strong>æœ¬åœ°ç¼“å­˜ (å¦‚ Caffeine)</strong>ã€‚</p>
<ol>
<li>å°† <code>config.getId()</code> ä½œä¸ºç¼“å­˜ Keyã€‚</li>
<li>å°†æ„å»ºå¥½çš„ <code>ChatClient</code> ä½œä¸ºç¼“å­˜ Valueã€‚</li>
<li>è®¾ç½®è¾ƒçŸ­çš„è¿‡æœŸæ—¶é—´ï¼ˆå¦‚ 1 åˆ†é’Ÿï¼‰ï¼Œæˆ–è€…åˆ©ç”¨ Spring Cache çš„ <code>@CacheEvict</code> åœ¨é…ç½®æ›´æ–°æ—¶ä¸»åŠ¨æ¸…é™¤ç¼“å­˜ã€‚</li>
</ol>
<p>è¿™æ ·æ—¢ä¿ç•™äº†åŠ¨æ€æ€§ï¼Œåˆå…¼é¡¾äº†æ€§èƒ½ã€‚</p>
<h2 data-id="heading-13">6. é¡¹ç›®èµ„æº</h2>
<ul>
<li><strong>Gitee æºç ä»“åº“</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgitee.com%2Fleven2018%2Flanjii" target="_blank" title="https://gitee.com/leven2018/lanjii" ref="nofollow noopener noreferrer">gitee.com/leven2018/lâ€¦</a>è¿™é‡Œæä¾›äº†é¡¹ç›®çš„å®Œæ•´æºä»£ç ã€SQL è„šæœ¬ä»¥åŠåç»­çš„åŠŸèƒ½æ›´æ–°ã€‚</li>
<li><strong>åœ¨çº¿ä½“éªŒåœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=http%3A%2F%2F106.54.167.194%2Fadmin%2Flogin" target="_blank" title="http://106.54.167.194/admin/login" ref="nofollow noopener noreferrer">http://106.54.167.194/admin/login</a>æ— éœ€æœ¬åœ°éƒ¨ç½²ï¼Œæ‚¨å¯ä»¥ç›´æ¥è®¿é—®æ­¤ç³»ç»Ÿä½“éªŒæ–‡ä¸­çš„åŠ¨æ€æ¨¡å‹é…ç½®ä¸æµå¼å¯¹è¯åŠŸèƒ½ã€‚</li>
</ul>
<h2 data-id="heading-14">7. å°ç»“</h2>
<p>åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å®Œæˆäº†æœ€åº•å±‚çš„â€œåŸºç¡€è®¾æ–½â€å»ºè®¾ã€‚é€šè¿‡ <code>ai_model_config</code> å’Œ <code>ai_role_prompt</code> ä¸¤å¼ è¡¨ï¼Œé…åˆ <code>DynamicChatClientFactory</code>ï¼Œæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªçµæ´»çš„ AI æ ¸å¿ƒã€‚</p>
<p>åœ¨ä¸‹ç¯‡ä¸­ï¼Œæˆ‘ä»¬å°†è¿›å…¥ä¸šåŠ¡å±‚ï¼Œæ·±å…¥æ‹†è§£å¦‚ä½•åœ¨ Service ä¸­åˆ©ç”¨è¿™ä¸ªå·¥å‚ï¼Œå®ç°æ‰‹åŠ¨æ§åˆ¶çš„ RAG æ£€ç´¢ä¸ SSE æµå¼å“åº”ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - å®¹å™¨çš„æŒ‚è½½]]></title>    <link>https://juejin.cn/post/7592088192516587563</link>    <guid>https://juejin.cn/post/7592088192516587563</guid>    <pubDate>2026-01-07T00:48:06.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592088192516587563" data-draft-id="7592127014187450368" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - å®¹å™¨çš„æŒ‚è½½"/> <meta itemprop="keywords" content="React.js,æºç é˜…è¯»"/> <meta itemprop="datePublished" content="2026-01-07T00:48:06.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="yyyao"/> <meta itemprop="url" content="https://juejin.cn/user/4266531531793976"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ğŸ”¥ğŸ”¥ğŸ”¥ React18 æºç å­¦ä¹  - å®¹å™¨çš„æŒ‚è½½
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4266531531793976/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    yyyao
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:48:06.000Z" title="Wed Jan 07 2026 00:48:06 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:15px;overflow-x:hidden;color:#2b2b2b;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(159,219,252,.15) 3%,transparent 0),linear-gradient(1turn,rgba(159,219,252,.15) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin-top:35px;margin-bottom:10px;color:#4dd0e1}.markdown-body h1{font-size:30px;text-align:center;position:relative;width:max-content;margin:0 auto}.markdown-body h1:before{position:absolute;content:"";z-index:-1;top:-20px;height:100%;width:100px;left:0;right:0;margin:0 auto;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADsAAAA6CAYAAAAOeSEWAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAABkLSURBVGhDtZoHnJ1llcbP3Om9ZiYzmfSQhCQQIbRQVQKI9CYC68qKriJK0UXcZRcINqStIoiIqKCi1NACQihBWiCkkJ5MJlMyvd7p7d759v989/sy34yTbIj48Atz71ff855znvOc971xDrB/EtoGI7a9Z8Aq+wZML0mNj7dE95NZ1OKsj1dHo1GbnJpss9OTbWJyonvun4VP1Njuoagtb+m0it4By0iIt8LEeMvkr8XFWcfgkA1gYDLf47i2PzpsyU7UspKSLDoctagTZ7Vc08MzClMS7awJ2ZaflBB78CeET8TYla1dtrKt2w5KS7YCDGzEoz2RqKUmhGw6x2bhuXyOp2BoRXef1Q1E7Lj8TIsMD1sbxu1kcnYSAX1810RMTUmyMB7f2j1gC7NS7byinNiL/kH8Q8a+2NRh77b32El56VaPAe0YeGR2mh2bm+FdMRqP1rbZe+3dFsHT35qcb/Oz0rwzo7Gxs9feYPLS4kM2h8lawee5hPmlJXneFQeGAzJ2F564v7rFzi7Msu3d/Xgjzq5g8ArX8VCNN2vJ28daey0zZJabmGCLslP5HOf+Oygr3UzDGOf+JxrauXfQjslJt+dbuuyMgiwmk+sPAB/b2Lt2NdoMZnuY21qHIvbvUyZ4Z0ZQiXGrWjvsmPxsK4R0nmHA8ZCTQvxVQn5eRipklIBtcVbV1WtHYsjati47ZWKuTUpP9Z4yGk/xDBGe3v1mW4/dOrvYO7P/2G9jRSjf31FnXyaUXiB8r51WaJkM3kcfOSa2FR6qarIenooTLQHPLcC4mYThyw1tVpKWYlVERlZ8nC3Oz3Jzdn1nn5uvQ8OOHYvhR/CvsqffJbkCkZTvcYZ6Z0WTfTovw5Y1dtjXp+TbFPhgf7FfxpYxuMfr2uwo8rEtMmwXF+d6Z8wGmIR2PLyjo8cqOFffP2SLGexJEJCP9R29thkPXlpa4A5Y3w/jmuVNYYwO2QkY7WMtz3mVcE1hkualJdmSolzX8GnpKd4VZq80d1o7zN0RdWxGaqItgbn3B/+vsasgh/UMNBOvzYMZDxtDKp289KGaVguFQvb1yQWWwuB97GaSXqUUnVaYbSUwrDCEBz/C2CM8EhNrP13fbkeSh3OJgCAe2N1CWXKsGOc6TOr5U4q8MwYhDtkTda02MyPN+nnGBQEH7A37NHYz5KOZVv08qyjbSseEzKauPnsMj98wc6Ibcj5UUv7M8QWZTE52jEwGOVaD8U1Dw1YNWX0qM8VKyb80L/TrOPYOzH4KBJQTrK8M7+7KZjuM63sHBt17FubGoibCuf+tarWFGUmuwWeT8/vCXo1tZOYeZcazCaez8MwEzzM+HqhqtiJI5twxL1jeGLYk7jmKMF1JOCbg6Qj5nAdRqX7q3BYm8VAmQvW1lfcMc58IT95uIA3q+gftrDHPXUXJWkVEHJme5Bp5UmHsvIZ/O3l8ECE/FWcsItX2hr0ae8O2Wjs+J43QTbOZzGYQ/7Wtxq6eXjRK3r0By4YJ6Ty8EiYSJqcm2eGeV4Pox/ANENJR49RiEdfqcLflUJrEBZqgxYHrBjn2ExFURqKdVETN9YirJxKxR2rbrYeQv5ISmB6IsiDGNfZGWPeMgkzr58xnPaJ5p6XDZPKz4T77wayJ7jGhhXLwanOHTWBgq5n5q6YUwNJ7l3kKcRl7OJ7fF56l1GzvHbSD8dghTPi0wIRfv6XafjJ3ssv0PnZQ7nZx/etwzO1zJ3lHR2OETTw8x0tOx1AN3De0D7YV+63oGthjaJQ5Ur7eVVZjcdGInUyuaT73ZWg3efV8fZs7cc2E777Qi5eunVbghvPPymrt/krKGfcLd8ybYjdxrK6333Z09rjHZkNuLYzz0uIc+xWCZzz8nbHbe4dsY1e/XUOY+nimvtUaSazv4jXhaQasSbmYmpuenGwHZ8TKggSEQm08rMD7ahBOoExcMqXQegjnZ+CEvaEa1ZQUQkt39dj0zDS7krq+ARmpdws/nlNqD9WFbWN7l5u3wr9MyrcXKUsqWy3jTOaoML4DdaQ83YIoT4VYpEXvYQZLmbX5SLohBrgOj186Kc/iKTUPUhq+Rrm5ekOl3TWv1Mr6hqwbY0VOQXwEo+Moq4Z47q5qsU489G944LyJOW4LOLZOKtT/iI6+nGe/0dhuEd4ltj2NmiuCU4hnk5fHIi7+RK4uTEu0e+s7rAiRcw1CYy3OejvcYz+eXeI9MYY9nu3lYZl0KavJJ7Vjibzgjp319rUZE20j7CkJqFr5JQYgQ39f3eQaKpQk0afy8nl4uBzvjUUTRk7k3iebOm0pabDiyFn2XGu3dRME41CGVeBVqSiVnc6hIUpekp1VjHLDSOEcQlui5W/U8C7IKREjv1Gabw3wRwUTvpv7jybPtzHmIPZ49q6KRjuccqBQVCOtGvqXhrCFUUXJzOYSHt7Kw5Ix9H08dSje1o1JyL73IYXpEMmE5CRbw6wuykx2pR+Pd6/J4JpLiJKV6N9OnrcQNfQ0Zem6qQX2MmFXyWTE+DMO0kGx4e08DEjnXbsYuOq7niHB8jdY/wQ8Srm2XCZZUrOakF1CY5EKX0h93Tu/1J4kRdbDMT8MamgZK9xe3uDcvrPe++Y4f61rcZr7B53rN1c5N2ytcV5rCrvHt3T2Og19g+5nH7dvq3bqunr4NOwgK2MHA1jeEDuG7HNuLmtw7qpocl5t6nCPvdTQ7v4N4u3WTqeyu9cZHIo4f6lqdFoHh7wzMbzDeeGv3Hvzjlrnh2W1zofhHuftxpFn3VFe7zxS0+p0DlKVPbhhvBxhvwiFMgfP+mjHA08gEC4pybeLyK1iZldh8zC5VJQyUl8l59KZ0WJk2xaiYWxNrkXXJhA8r3PvZRur7ZZZRfadaRPsfiTmX9HGajC2tXd6V8dQTMhX0h8rNdJx9Ra8F8SbRNLzhPRnJmTZIUTYueTyWxyr7uv3rjC3OkzE8495oS+4xq6D5WoI0bO5WVCOSerl8rIeBrOI/Hkaw6ME5W1zSuzx2la3CRdWi3zIG+FDBvUp9LMgI/vggUmE7KkT81yGvOOgEYa/aUahhRAF5xLec3OzbF1r2O17BbVxIi7hzJIC64IYhXdJA+nh/5xVbOmE9J0QqjSxWk0pp37M2YEtgjS8GpimACu7xkqxdKJ6fEXyYl2Lre0ZtC8yELVewtWUnbfCPIhrvgDFz8WI5yhJKgcnFMZWEFrwhgzo5uWDDDA1oGSOzcu0xfx7vTlsv6posIMpJ6cGWPiw/BxL4PU7vbrpjgf8bMdu5OYwOdhm83DARUSa0ELknYIeEAaILuWxlhGa0M8+EuJCrpJT+ymENhN60pXBxa3LZ5TsucnlGaCmIEQ4Evru91yuz0xMtKaeXluI5zdh9Mm8vAlBn4aR07X64EH3vEKdXQkZJXPP/JxMvNRpLxEtHZ5RQgmNewnpouvVTpYTHdfOnmy5kFUGnpRTfEhXD9DiBdFFJB0/YWS9aj6pmc89r0BaQmgTRkgI+EsdKsYasJZOBF+QqTH474NK7LbyBvf7W+RgOxNyxfQY2/2hrp2+NkroxrzrQ55fSZkpJIa28znCgF6rb7H1hOSslATyvNflAh9pvHcX3lVE/Ya8FjTJIexa2Rq77nfU96unTnD7aME3+TAm6BFKYrPnqCNIqV5sq0ZGCiEV+Db+qWMQqpFgb5KPx48R6omeDl2EuP9DTYt9iGA/f1KBS1w/La+H4ktsSmLItvZHXLUkrCeflVtJ9DVVg1H7+sxiGvVM975rZpfabuqHVhuP5F1vewav5O8GamUe91yDanoYw47FWzC929O+DJnKA2opFY1Rjru5CE7kOcO0jJtQVUIynzuZEMeb+1CEOFXN8iFSGeRpCm1BTlJxVg49Azm819SO7Bu0axEbwn27GuxMck+TMQHDP8fn48gfDVIL4R8xKVPJ73MQBUIfA/Z54LMw5vmlE+w+VFo2A78X/SsyPA/RMD0z3e2qVLtfo7aeBslpMX0N0TEnLcUlKym1jyBFqSohmYntI5enBhYB9CY/2kNarhwJhNiMtRGyWnkQdKaCFyQwgydjyNUw4VchKxXv2/DoKdC+lkQbCX1NlKCGvJiBJkSGbCus6jfo4yGBNySgr+u7e20BCsxdVAcFlJ/tHd32+cIsNxSXUULUUx+dg/d47g7OPYFw2MxkSuyMwLHVTI6PBN6dS8Sppw45zHJSgDXV3aQzmz40Z6fDgBfiAXU0uZxby2zejee+j3eltoQMzhV6qSBogXwrEXDj7ElWxUQ8RrnSaoU0dxIsKaiMvMykXTu90NqJsGHP4z78SdLigUrLKat32nFwy/E07pfDFRdQ/7N5r57pQ1482uvWhMGhQcviGkVrKDUp0ToCxfhQal5n4Hs/g1jOgH4LWdwFOd1b1WzHET4vLZppv+Czjxo840OrDlG8jAJzv2tp5mLK1dsU/lfIOeWy5NxFxfl2BoYImlQtx9QF6mJRQKBsQYYuO2yaLYPBUXvu/VqYPxtHhNy7Y4hCkNLGPtKSklzCVKSHtMQxcqm5Kw1DhI2PTGZtcGDAvoLQ/u7MifYtWFBlxz2H9zo8RkwKzC5UYiG+p44ccqE62YAxLeT/TOpf8MXx8Qk0IJFRY1Go+viQVJpE5Ehjf49xfAZeqGIy/7us3nqxwQfCkjZypPxobVr/6YpQHIalUvuCyEwbSXC9PC8QnkFcXlrgLpoLIhIfKuaqlQkYIAwQnr/f3eyu7KttOw2lNpv8/BPHyjzVNER3o72gvEBKqRMTflndbP8BMweRDyeciEj5bFayFXqTLzheivgYJC0jwzwHa0MDDEotm48ndze5BBBElAnxxcRYHAFh3FfZaA9UNRmC354kNwUx8eHkmVj5dcTE5ZMnuEyr1QqlhtaJLuOYZv4v3KNo0TKrGPUZ1NILPKuWcvVn5Trv10SMB6h0j/ARMnlOuafCBIfnSWEx/Raif3HDzofYMM31dOyY9LBaLK3TjoX2fEqT4+2qaUVWSTQvyM6wC8nNJyEetXIyuLKrx04P7MKNnbJZlKUtNAIHo7i2dA/YU3Vtdi5l6jCepXy8hOedSSSsI8/HQg5Q+gxTKXwkMHkbESo+hjG0lbRRzQ3Fc5LOzDuFhs3Ptumpie7ilRDhlEJOq/hjsZljCxjkt7fWuPS/EekpXMggJQIk0G+eN9Xu2VmHWIkJe0nJRN4ptBBit2yutG9ML7J1DHAxebiAMrZ4VZlduqGS8I2tJc2iborUxmIN79c+kTovFxivPvrcSaP3n7RSKYTUmKt4N3rMOcw4JOneD3sP956jNaMglIeTER5Xbdlt15Tm2W10NEsYrA/N5JLCHHsR9tSqwxq08G3bqm1ZTbOtagnbo6SLvH/VzBL7W7jPzqFea0LmMLFzUuLtdwumuO3i1Vtq7OK15Xgw3l1PDmIXak+6QBEkvB9YJIzBcc/L20JIYaSZ/qAzVm5Ut4oowk3QehC+N3xo/1wTqt7zsYawfX9no9XjqdPXVLhrwyo/wucJYQkE1e4j8rLcBuHUItQQKqgMXb6LGvxFQlXw33AdZLR0V5P9Fr29lP73scNnosoyvdWPv4fPJ+uJrLVtMakqaL1M1cTvv0OLIZE6wk2a2IcIRUQh+DaejpdcXepBa7bKDRGM9PIVxTl2EwarZ72rooVuY4RQtMypdk6e1lLLehhY2lt7QEd7WxlCDvdIli6E9B4+ZIodmZEMccUGqgiZOqru9tkR3iJ8nCcXRWRZCSPMLPEjlx2LjQL1OM5qKAm+vhSuRqSfV5Ttrg8FdWcrnhMqCTex7DEM6qTsVEuM1+8hovaHQ6e6a1Fz0xLd3nUt4ToWWuzWNkhcoAIIjUx2ZpxjLzWF9+SYmngR1lok4TEoJxGfuijhI/7OICoFmadl2llcL9b1oRVJtbD+JLlv1KrhHG5811t9ELbzgk14ICUwqE+TDzftqHPz98vUSy3jSIwP8dCpkNqLDPTx+rArz4T5qLG3G2PrvJKKPoLBWE501NC3ilUX5mVjVIb9nIbgWcpPMiSXjbcL8K62UkR86m1/yfkSeMaHFuK04X0CE3J6SWzFUxw0BSNHlSzi3RmIRJwHq5udO3c16quLp6sbnffbupxbt+12vzOrzuvNHc7ycRbIxuJHgYU7YSASdQgxp7qz2ynv6HJeqW91doa7nLruXof+17sqhhu31Xif9o7HalqczV29Dnrb/f5EXZvzdH27U98/6LR5i3N0UM5zjHU71/lwjRWWltU5CAIn7F1MqLp/r9hQ5RoaxG+qmrxP4yNKcfsFLwuiprffeb2l03m2scO5h3Or2rudzjGrhk8x4Cqu2xcexilBvNEcdi5Yu4tKF3Ue4tzPy+td5/1md4tzw5iJ27NuXEYobYUdlb8z6GTWkdxaCvk2zHjd5mpKQ459mv5TkAp6mQb9Aq9HHQ8S6mrZnuc6vUG6WHusIhCJGNXl9byvnJyaiE7+Eoz8c5TYNQiUveENGpJpcIJ+biS8R0+rlcazGNs7pKB+zPLTOSX2KNWhlDAf4r2Spj72JORB5OyHULX+dlD/FOky/HFy5ygYU0sey/i8moeqdunXK1qC3RuaMOYHlI/raQMl3M+EeTV5WxD3Km8a8PkM8nr648sQ9+esKbf5e/nxiKBfAOQkxbv3SU9LYmqPV9V/Pn+V20VwTyVjTqCI6edEQUOFUXs9WmfSll8DyX2dt7GlnwkswaM3l9XZ0oNK3MTXbxpOV2sGk69s6XCJw4cY8KbyRrt9TrHt7Bm0rRBQe1+fHUWNfaapU0KbqxzbORC1M/LS3dJwIl3KOrwykQG/E+61q+isgniztdOKqNOziDgZqZIzFwPvqGiyg5NCtoCqoG5NxHhPZTOsnORulKskjoKMDeLuXQ3OmnC3syxARFXdfc57LR3OrdtrvSOOs55rnqhtcdoGhpxHdjc5EfJUuHZTlftX+G15rXPlhkrnLe59F7Lz8VGHdg8c5y2OLeMZ126qduq9XC3v7nd+FchLvYPJd15gPCu8XQnh/qpm59WGVudZzvvQO97kXTcGxhnEuJvR39tWY8cwK4uhcikk4a3Gdstg9l5B2t0wfaTdWkEou5vCPOV5PH73vFL3+DfXltnh6OxjkJD6Wd5F3g88tMe6CW/7YmI99VIL4u0oqUK8ocW4d8hFrXMVoOQU8s3U97MnjvDD/XRYkyhHM1MT3GVZQR2Tdv70U8EbA5vlo+CaPAaaSWoZXm50otGodxQ6L6txGKxzw5ZYORrBsPPrykZKQIy1n8bTjwb2fO4Te3ue7x6KOKvaYns1wtIddd4nx3mwot55qyl2360cp81zurg+CGqwU8v4/Of5uAVvPgObrwvHomY8jOtZ4fXWLnefdHVXv9044+8ZklCx75DXwcV1Sb27y+vInUQEuVYSaMgRJYfAwtoj0raFxIUW1A8nz35f02qLc9Lc9lG7CBkwtUR7bf+A+5uL6ehnH9Lat+5sIEfj3Cbj3NKRvP7Rjlo7FSmqavKvpSP8MRZ7NVbQYLSkqlC9ZW4sPH18gBTcORjrhMWmQWzFmK2UsvO90qQ1oZcI8UhkCLZPtRqMy0NirobAvjIpb4/sW06qKGyPR2oGIdlazjOOTk+kLYzaaYGSp63Wz6HsXsQ51wd+LTAuZOy+8GBNq7tF+IOdDU4kENJthNID5YRafZtzZ3mDs9LbRgzixcZ2l1h83OKFbDmEd0/FiFp7DWHgp0AQGzq6nf8hPF+oa3EehOz0ziCWcm4NpBRMhX1hn571oR9wqVVSDVPtUi32sQ0vbu7scZdY9aOt2ZSEL9BEBIW+dv20AKDd9/ep09oimYqHpyImkKDuRllS4PrlHNuIqDmCJmNJQba7q1joEaUQJuR/WdXsLrJrq/L6cdJsPOyXscJ7GLKqo8cOpqhrO//yQG6oS3kZwS9xPkRB3wi7diFMtDN+PLk5m1ath+8f0Fy80dbjhvVXub+U5mEqeal27UP+dWpPlknNxW79Ak6/7Tg3UMOF52j1xA1qK7Trd6nXC+8P9ttYQcumIonLSnJtBdJNa77axw1C2x3qR4Wqnj73x9f6MbV+CCYFBZO6y51aSh3gzVrsmwzJnULEbCJC1oZ7vIZ/9Iqmfvn2u5oWO5n8fApxcuWUApum5diPgY9lrA9EtvUNOzYf8vqAcJPsU5iOh7XtXQgt2uZhjKU2amF7HQyfEYWcZk5yQ1RDKNrLcq02k/9IGmldrB93KiokPw8EB2SsoKWXO5FmxXhlckqi+3vEUvLqwok5PHVkIWAszlqzy1p54zuLpnPZ3q9bod08JlLSb5DrNxDm38Sbvsg5EBywsT7oH+3XNW3uasGirFSrxRNdCllKiPZHZzJYLZb5qEcpae3pxMCuu9oibS5/QCOiLcYUrp+MmtJeURjFdVlxzqiae6D4h40NQt54HyGv3JRo10aVfv8YhtC0pSlVKcPFuxIXahr08mzCO4VzMlLSsZuomZ+RaucU0rXsw/sfF5+osUFonWob/7TrLdaUgdpV93fl9X+VIC0Y6tek2uI8OD3J5gT2Vj9ZmP0f4IM4iY7RQ5gAAAAASUVORK5CYII=) no-repeat 50%;background-size:64px 64px;opacity:.84}.markdown-body h1:after{position:absolute;content:"";width:150%;left:-25%;height:50%;bottom:12px;border-radius:50%;background:linear-gradient(transparent 80%,rgba(77,208,225,.8));background-size:400% 200%;opacity:.6;animation:h1Animate 6s linear infinite}@keyframes h1Animate{0%{background-position:100% 100%}50%{background-position:100% 50%}to{background-position:100% 100%}}.markdown-body h2{display:block;border-bottom:4px solid #4dd0e1;position:relative;font-size:24px;padding:12px 32px;margin:30px 0}.markdown-body h2:before{width:24px;height:24px;left:0;top:0;margin:auto;background-size:24px 24px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADGklEQVRYR81X32vTYBQ999s6mFjQgQ+DrbHiVFZYU4cDcQ/6pGhTFVYFEXGi82H+Bz448UnEF1Fx9ccEEcXpZE3d5tP2ooKiTacTHaLNpigMHDgnU9tcSbrWrkwWR0sbyEOSe885ObnfvV8IRT6oyPwoLQHBx+OVM5WJvSyEVAhnBOjt7yU/+/rr6r6l8TMO+F/EN0JQhICqQpD/xaRpcpAc9tS+M+9lBCia/oqBamK+zeDuQogQZaKJk3wcQjxSva7tGQGB2Ke1zIk3DNyMyNL+QpCnMQOaPsDAVuGAp9cjvbYc8Ec/bCYSg0zoiHilk1tHxqsqEsYlML4kjIpT/eurJxRNPweQU5VdrWaOEo1fgKAVbBgXIz73kF3R/ph+ghgdzMYWM29eAWlBJqgZaFlFYtC6nhWpaDqnSGlIlV1WjJ3DloDNgyNLncudqgX//Ucg3LxuStHGuhi8pqKCW3rqV342rwFjRznKm+/LNaN2yC237ThgF2wxcfMLeP6+ncrKzoPoKTGeLQbYbg4TNoC5iZPJY5HGVRdSNZAWYBclD3FzBQzrR8hACAKdzBzKA/4/IYioDQaOskBbpEG6PO8qKKSAEi3CnEb0Pw4oMf0OmKbTDWqh3Lw6EIiNBZi5lxh3wz4puBD5ovqAMvxhHSdFKxE1CQe3m/07TeTX4lcJdAhE+1Sv65Z5P/ByvIGTRowIZ9igbtXnmrOsbTvgj+kHBNMuBu9OdVw8EeU4nC1A0cYmAHZOTRrLhra4Z8ywnSN6vZHAFTA2WnnMfQB3qz73ddsOZM8CACFDIPSgQXqebXEgqgeZcAeEe6pXasm1f8ew3igMtAHWac0Uc/jYdyAaP0xEBwFsmgUPqbJ0NE2UKj4EGcahiOzuyhagaHpnmtgcVgTcCMuua7YdyAHbA3ArQNscVFbb4635aD6fnYaTvxxi9UNP7ddMXaRWVBdAcaLk6bDXPZCNZ9uBXEsDUX1T2Cc9yjig6Z0EHg3LK8/aqf6MwJKchkXfks1+0+JtSq3qLPa23BRR1B+T/6nkfMaW1r9hPt/MLtYfTLEpP+T9FNoAAAAASUVORK5CYII=)}.markdown-body h2:after,.markdown-body h2:before{content:"";display:block;position:absolute;bottom:0}.markdown-body h2:after{right:0;width:400px;height:10px;border-top-right-radius:24px;background:linear-gradient(90deg,#fff,#4dd0e1);max-width:50vw}.markdown-body h3{margin:30px 0;font-size:18px;position:relative;padding:4px 32px;width:max-content}.markdown-body h3:before{border-bottom:2px solid #4dd0e1;width:100%;content:"";display:block;height:28px;position:absolute;left:0;top:0;bottom:-2px;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);background-repeat:no-repeat;animation:h3AnimationBefore 2s infinite alternate}@keyframes h3AnimationBefore{0%{width:28px}25%{width:100%}50%{width:100%}to{width:100%}}.markdown-body h3:after{content:"";display:block;width:28px;height:28px;position:absolute;border:2px solid #4dd0e1;border-radius:50%;right:-15px;top:0;bottom:0;margin:auto;background-size:28px 28px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABRklEQVRYR2NkGGDAOMD2M4w6YDQERkNg+ITAppcfY/8zMv3wF+NdTUrZQpUQ2PT6cz8Dw/8CkMWMDIwNvqK8jcQ6gmIHNN19EaXPx1XPyMCghrCUKcpPlGc5MY6gyAE+Fx52MjL8j3cU5a1UYWXtZGBkEAVb+p8hxU+Mby5NHQCxnKEMaskzJ37uFmUetkmMjAzrfUX4woixHBJlZAA0y2EmPPYU4enLkhGeQIqRJDsAh+UgO7duNpD3IcVykkOA2paT5ABaWE60A2hlOdEO8D3/4CMDIyMfWvySFefoaYSoROh74eFXBgYGLiTNVLGc+BC48PAnAwMDG9QBVLOcaAd8P5ox+x/jf5AjGLgYfnwnKqv9/8/PwPO/kFF/MSj0cAKiouD/0bgYoixFU8RovWgJIX1EOYCQIZTIjzpgNARGQ2DAQwAAvHBaIdB7zxsAAAAASUVORK5CYII=);animation:h3AnimationAfter 2s infinite alternate}@keyframes h3AnimationAfter{0%{transform:rotate(0)}10%{transform:rotate(0)}50%{transform:rotate(-1turn)}to{transform:rotate(-1turn)}}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin:22px 0;letter-spacing:2px;font-size:14px;word-spacing:2px}.markdown-body img{max-width:80%;border-radius:6px;display:block;margin:20px auto!important;object-fit:contain;box-shadow:0 0 16px hsla(0,0%,43.1%,.45)}.markdown-body figcaption{display:block;font-size:13px;color:#2b2b2b}.markdown-body figcaption:before{content:"";background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgBAMAAACBVGfHAAAAGFBMVEVHcExAuPtAuPpAuPtAuPpAuPtAvPxAuPokzOX5AAAAB3RSTlMAkDLqNegkoiUM7wAAAGBJREFUKM9jYBhcgMkBTUDVBE1BeDGqEtXychNUBeXlKEqACsrLQxB8lnCQQClCiWt5OYoSiAIkJVAF5eVBqAqAShTAAs7l5ShKWMwRAmAlSArASpAVgJUkCqIAscESHwCVVjMBK9JnbQAAAABJRU5ErkJggg==);display:inline-block;width:18px;height:18px;background-size:18px;background-repeat:no-repeat;background-position:50%;margin-right:5px;margin-bottom:-5px}.markdown-body hr{border:none;border-top:1px solid #4dd0e1;margin-top:32px;margin-bottom:32px}.markdown-body del{color:#4dd0e1}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:rgba(77,208,225,.08);color:#26c6da;padding:.195em .4em}.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace;overflow:auto;position:relative;line-height:1.75;box-shadow:0 0 8px hsla(0,0%,43.1%,.45);border-radius:4px;margin:16px}.markdown-body pre:before{content:"";display:block;height:30px;width:100%;margin-bottom:-7px;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAAAdCAYAAABcz8ldAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAhgSURBVGhD7Zp7bBTHHcdn33t7vvOdzy+ITVKDU0xIKG2ABCPTRCCaUiEVKWoqRJuASAhCitRCVKSoalFUKZBiSmmFRRJKRUnUtIpo+aNqGgwoOCmuFUIRzxjwE4zte+97drYzztji8HPvtkit/PnH+n1397Tz+83vN/PbMZhmmmmm+d+BoX8n5diihcGqgFQf5vk6BMAskWUlw3GyFnIvtqWSf91w7mKC3npfOLX7wYeiIa6BBWCOLLFRF2NB0JvIOP/80YG+k2ev6S699b/OzOfKBW5l5KsgyC4DCFQDnpEAdE1goc/dlNPc/Up7P711UiYNSMuyxeUzZPnHgGHWh5XADEkSAcdiN+AnEXIBhBComgFU0/xQR+jnj51sOUMf9Z0NKyL8S9+JPBEN8zuCMrsqGOA5QWAAyzLAxe53HBeYFgJp1c5Cx33nyIfpV3e+22/Sx32nev/sMCgVnmM4bjOniAtZWQAsz315EfsGQQc4hgWcjHkCmOj1rheuNn95cXwmDMiVp5etC/D8m5FwUWVQUYYGPh6mZYFUOgsGVa1pXvOZzVT2jRuH54RM230jEuI3RcIiL4l4UkxAJmuD/riVsqD7ct2m9nep7BtVTbVfZ0uE/UIk+CQflAHDjf8+Lg6MldYATGpH3c/Ul7p3dWXppVGM6eElJSHmnQWPbSlRlN1lJcUBjqNRnwJZVQO3B5P/uq5rK1d90pakckFcaKp5UJHY92JR8YlwkUDVySEZfGfQdO7E7Z8s2HL9TSoXTPXRud9nA8IBqSwcZgWeqpPj6BYw7yTbXBN9q2v9lQEq5zBmWA8vWLCptCi4tzwW8RQMQlFQATPLSh6vCSh/plJBkMyQBHZfWYnkKRgEktEVpTJXERN2Xzo4ex2VC6K6qXYpF5b3ypVRT8EgcAERSJXRbwCBOTFzXblM5RxGBaRt+ZPYA+LO0mgxz5K1Ig+UgAzKIuGnz39z6S+olDeaibaXRsU1RUFvgx+GwTWgPCaDgMw2XXpr9gwq50XV0bkxJiYeEiNF5cwE5XsiOEkAUkXkUW51SSOVchjl8WKef604XFSRbzCGCYeCoESStv/p8QU1VPIM3knNDynctnBRfsEYhgSlNCIGgQv2UCkvGIHZgteMh1nBW9W4F16RAM6yDVV7amZTaYQcr59cuuhhWRTWBvAMLxQGeyFSHOLnh0MvUskz5RF+fbRYDEy0mZgqQYUHOLhr//b6rGoqeaLqQG0pw3PrBbyA+4EQUkRmhvgqNUfICUipKK4OKUqIJVPKB0jpEhjmWWp64jdbKmVZZNYogcJm493gsifOqhDyeh9GYR/FM7sW+DA5CKR0MSK3tvKZkpwB5gRE4tjFEr7RL0iWBGV51vHFCyupNGWWPqLgnoer9mtyEGSJAzwLllDTGzyznDjRN/CwOFkoFb4bm0eVIXICgpvdGoEvrF7fC89zfLkkeV5HbOhWiTwTpKYvCAJLGshRdXtKMKAWlyxq+MPQLk1h66g5RE5ABJYNFrqY3wvJklJRUKg5ZWLFXIA86yek2uDOPkBNb3CM5Pf7DL2QyIrUGiLH+xC5Bmmm/ARnHUhC6PnzxWDK0RH5HuIjZGy27erU9AZ0dTIWXyG+NpBBrSFySxZw220IqeUPFoS6jVAPNadM7yDsgNB1qOkLuAziMYIb1PQGA75wIaKGPyAb+9oF16g5RE5ALIQ+tSyLWoWDEAK6aXW3JlK9VJoyx1oyvVkNdvo5KXXDAVkdnaKmNwx0xjH98w3JNmTCm+Bc9hKVhsgJSI9pvp9Vdd++jmq6AXB2/HHrhcs5aTkVDv0DFzoHvKdq/mQsKX/4t7KJLDpOJW+IbAvMGoMkxfwAWZB8DT7W1diTE+WcgKz6pK1bs6z3daPwmJDsSKt6ZsCyjlLJMz0DsDGZ8SdlDROBjOb8YeWOjptU8kTXusuaazu7oJrfEnQvdkpVcUn6PTVHyAkIIW7br/Unklni0EJIZ1WgGsauZR+fvUglz6zY0dGfVp09ybRNlfwgi3k8YSbvJJ29VMoLt9v6rZVQL7hOYUubndHJGclBtzn1byqNMCogi09/2nFb01/oj+f/5TyjauBOKtPcZ1r7qZQ3f2lRfxZPWi2anp8TSDAGExZMa2jr8u03L1M5L7q3Xc+iAeuHRl/ScvPcjSLDBnZS/cjtNHd2v3171Ewbs9N5q7Pn4otVMx3btBsCsoRbk1FxG5dMVgMDqfTpXl1/tuFMa5zKefPROdX59qLQBwLnNog8Wy1OcjB1N+QEsW/QsFNZuO35Xb1v98QLX4/Sx+O3wqujrQ6013ABUWI8+AaqBjAH01+ghL22+5X2PirnMG7r+esbnae/V1neauvGSoHjigTcVU7UGFm2DeK4ttxKpQ+mLPvl+o/PjnkAkw9HTqSMmVHhyAMx9iFcSh/BHTfLceO/C8mKjApBf9zszGhoY92m9sN+BGOY9AeD7eGniv8OTaOB4dgyTsQd9wS+IQu4lciYdkI7CLrNH3Rvbb9FL41i0tbzVP2iWJkobpN5fmM4IJfJskTP1Bk8A9HQmbpmGDBrWqdVCN/Yd7PjxKGOXn+bmbto3feVVcVB9qehIL8EJy8nChwgr0O2xxBnhGU5eP2CfYbl/m4gBRsbtneMORP9oGpjpcCsiKzHHfdOPiQ/wMniyFEu2dbiTQCAeN/vavC466BGYLttXc9fmXBXMGlAhiHHur+sq6uPiUI9z7CVHMPwBnLSuuN8FuC48/Oaz1ylt94XfrW5ouyprwWfYRkwNyCyYYjwkBHows1fa+tV/fzGxlv39b9gqvfPmQ+i/HK8KlcBjhHwfl8HEHyOd1JnuzZd66S3TTPNNNP8/wDAfwDG7G0m9LKBpwAAAABJRU5ErkJggg==) 10px 10px no-repeat;background-size:40px}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{color:#4dd0e1;border-bottom:1px solid #4dd0e1;font-weight:400;text-decoration:none;margin:0 4px}.markdown-body a:active,.markdown-body a:hover{background-color:rgba(77,208,225,.1)}.markdown-body strong{color:#26c6da}.markdown-body strong:before{content:"ã€Œ"}.markdown-body strong:after{content:"ã€"}.markdown-body em{font-style:normal;color:#4dd0e1;font-weight:700}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:rgba(77,208,225,.05)}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{margin:2em 0;padding:24px 32px;border-left:4px solid #26c6da;background:rgba(77,208,225,.15);position:relative}.markdown-body blockquote:before{content:"â";top:8px;left:8px;color:#4dd0e1;font-size:30px;line-height:1;font-weight:700;position:absolute;opacity:.7}.markdown-body blockquote:after{content:"â";font-size:30px;position:absolute;right:8px;bottom:0;color:#4dd0e1;opacity:.7}.markdown-body blockquote p{color:#595959;line-height:2}.markdown-body ol,.markdown-body ul{color:#595959;padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="a11y-light">.hljs-comment,.hljs-quote{color:#696969}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#d91e18}.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#aa5d00}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:green}.hljs-section,.hljs-title{color:#007faa}.hljs-keyword,.hljs-selector-tag{color:#7928a1}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fefefe;color:#545454}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p>æœ¬æ–‡çš„<code>React</code>ä»£ç ç‰ˆæœ¬ä¸º<code>18.2.0</code></p>
<p>å¯è°ƒè¯•çš„ä»£ç ä»“åº“ä¸ºï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fyyyao-hh%2Freact-debug%2Ftree%2Fmaster-pure" target="_blank" title="https://github.com/yyyao-hh/react-debug/tree/master-pure" ref="nofollow noopener noreferrer">GitHub - yyyao-hh/react-debug at master-pure</a></p>
<p>å½“æˆ‘ä»¬åˆæ¬¡å­¦ä¹ <code>React</code>æ—¶ï¼Œç¬¬ä¸€ä¸ªæ¥è§¦çš„<code>API</code>å¾€å¾€æ˜¯<code>ReactDOM.render</code>ã€‚è¿™ä¸ªæ–¹æ³•æ˜¯<code>React</code>åº”ç”¨ä¸æµè§ˆå™¨ <code>DOM</code>è¿æ¥çš„æ¡¥æ¢ï¼Œä¹Ÿæ˜¯æ•´ä¸ªåº”ç”¨æ¸²æŸ“çš„èµ·ç‚¹ã€‚ç†è§£å®ƒçš„å®ç°åŸç†èƒ½ä¸ºåç»­ç†è§£ç»„ä»¶ç”Ÿå‘½å‘¨æœŸã€è™šæ‹Ÿ<code>DOM</code>å’Œåè°ƒç®—æ³•æ‰“ä¸‹åšå®åŸºç¡€ã€‚</p>
<h2 data-id="heading-1">ReactDOM.render çš„åŸºæœ¬è°ƒç”¨</h2>
<p>åœ¨<code>React</code>åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸è¿™æ ·ä½¿ç”¨<code>ReactDOM.render</code>ï¼š</p>
<ul>
<li><code>React17</code>åŠä¹‹å‰ï¼šé¦–å…ˆè·å–ä¸€ä¸ª<code>DOM</code>å®¹å™¨ï¼Œç„¶åå°†åº”ç”¨è¿›è¡ŒæŒ‚è½½ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/index.js */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>);
<span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>, root);
</code></pre>
<ul>
<li><code>React18</code>å¼€å§‹ï¼šé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿæ”¯æŒå¹¶å‘ç‰¹æ€§çš„<code>root</code>å¯¹è±¡ï¼Œç„¶åå°†åº”ç”¨è¿›è¡ŒæŒ‚è½½ã€‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/index.js */</span>

<span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom/client'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
root.<span class="hljs-title function_">render</span>(<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">App</span> /&gt;</span></span>);
</code></pre>
<p><code>ReactDOM.createRoot</code>çš„ä½œç”¨ä¾¿æ˜¯åˆ›å»º<code>React</code>æ ¹èŠ‚ç‚¹ï¼šä½œä¸ºä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„ã€ç”¨äºç®¡ç†è¯¥å®¹å™¨å†…æ•´ä¸ª<code>React</code>æ ‘çš„æ§åˆ¶ä¸­å¿ƒã€‚æ¥ä¸‹æ¥å°†å›´ç»•è¿™ä¸ªå‡½æ•°è¿›è¡Œæ·±å…¥åˆ†æï¼</p>
<blockquote>
<p><code>ReactDOM.render</code>åœ¨<code>React18</code>ä¸­å·²è¢«æ ‡è®°ä¸ºâ€œåºŸå¼ƒâ€ï¼ˆ<code>legacy</code>ï¼‰ã€‚å®ƒåˆ›å»ºçš„æ ¹èŠ‚ç‚¹è¿è¡Œåœ¨é—ç•™æ¨¡å¼ï¼ˆ<code>Legacy Mode</code>ï¼‰ä¸‹ï¼Œå…¶æ¸²æŸ“è¿‡ç¨‹æ˜¯åŒæ­¥ã€ä¸å¯ä¸­æ–­çš„ã€‚</p>
<p>è€Œ<code>ReactDOM.createRoot</code>åˆ›å»ºçš„æ ¹èŠ‚ç‚¹ï¼Œåˆ™é»˜è®¤å¯ç”¨äº†å¹¶å‘æ¨¡å¼ï¼ˆ<code>Concurrent Mode</code>ï¼‰ã€‚å®ƒå…è®¸<code>React</code>åœ¨å‡†å¤‡æ¸²æŸ“æ›´æ–°æ—¶è¿›è¡Œä¸­æ–­ã€æš‚åœå’Œæ¢å¤ï¼Œå°†ä¸»çº¿ç¨‹çš„æ§åˆ¶æƒäº¤è¿˜ç»™æµè§ˆå™¨ä»¥ä¼˜å…ˆå¤„ç†é«˜ä¼˜å…ˆçº§çš„ç”¨æˆ·äº¤äº’ï¼ˆå¦‚è¾“å…¥ã€åŠ¨ç”»ï¼‰ï¼Œä»è€Œå¸¦æ¥æ›´æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚</p>
</blockquote>
<h2 data-id="heading-2">ReactDOM.createRootï¼šæ„å»ºæ ¹å®¹å™¨</h2>
<p>æˆ‘ä»¬ç°åœ¨å¼€å§‹æ·±å…¥äº†è§£ä¸‹<code>ReactDOM.createRoot</code>è¿™ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/index.js */</span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">ReactDOM</span> <span class="hljs-keyword">from</span> <span class="hljs-string">'react-dom'</span>;

<span class="hljs-keyword">const</span> root = <span class="hljs-title class_">ReactDOM</span>.<span class="hljs-title function_">createRoot</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'root'</span>));
</code></pre>
<p>åœ¨æ·±å…¥é˜…è¯»æºç åæˆ‘ä»¬ä¼šäº†è§£åˆ°ï¼Œ<code>ReactDOM.createRoot</code>é€šè¿‡å±‚å±‚è°ƒç”¨æœ€ç»ˆåœåœ¨äº†æŸä¸ª<code>createRoot</code>æ–¹æ³•ä¸­ï¼Œè¿™æ—¶çš„<code>createRoot</code>ä¸»è¦åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li><code>createContainer</code>: åˆ›å»ºäº†æ ¹å®¹å™¨å¯¹è±¡<code>FiberRoot</code></li>
<li><code>listenToAllSupportedEvents</code>: ä»£ç†äº†æ‰€æœ‰äº‹ä»¶ï¼Œè¿™æ˜¯<code>React</code>åˆæˆäº‹ä»¶ç³»ç»Ÿçš„åŸºçŸ³</li>
<li><code>new ReactDOMRoot</code>: åˆ›å»º<code>ReactDOMRoot</code>å®ä¾‹å¹¶è¿”å›ã€‚è¯¥å®ä¾‹å¯¹å¤–æš´éœ²äº†<code>render</code>å’Œ<code>unmount</code>æ–¹æ³•</li>
</ol>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/react/packages/react-dom/client.js */</span>
export function <span class="hljs-built_in">createRoot</span>(...): RootType {
  return <span class="hljs-built_in">createRootImpl</span>(...);
}

<span class="hljs-comment">/* src/react/packages/react-dom/src/client/ReactDOM.js */</span>
function <span class="hljs-built_in">createRoot</span>(...): RootType {
  return <span class="hljs-built_in">createRootImpl</span>(...);
}

<span class="hljs-comment">/* src/react/packages/react-dom/src/client/ReactDOMRoot.js */</span>
export function <span class="hljs-built_in">createRoot</span>(...): RootType {
  <span class="hljs-comment">// 1. åˆ›å»ºå®¹å™¨å¯¹è±¡ FiberRoot</span>
  const root = <span class="hljs-built_in">createContainer</span>(...);

  <span class="hljs-comment">// 2. ä»£ç†æ‰€æœ‰äº‹ä»¶</span>
  <span class="hljs-built_in">listenToAllSupportedEvents</span>(rootContainerElement);

  <span class="hljs-comment">// 3. è¿”å›å…¬å¼€çš„æ ¹å¯¹è±¡</span>
  return new <span class="hljs-built_in">ReactDOMRoot</span>(root);
}
</code></pre>
<p>ç„¶åæˆ‘ä»¬çœ‹åˆ°<code>createContainer</code>å‡½æ•°ä¸­åˆç»§ç»­è°ƒç”¨äº†<code>createFiberRoot</code>å‡½æ•°ã€‚åœ¨è¿™ä¸ªå‡½æ•°çš„å†…éƒ¨ä¾æ—§åšäº†ä¸‰ä»¶æ¯”è¾ƒå…³é”®çš„äº‹ï¼š</p>
<ol>
<li>åˆ›å»º <code>FiberRootNode</code></li>
<li>åˆ›å»º <code>RootFiberNode</code></li>
<li>è¿›è¡Œå…³è”ï¼ŒäºŒè€…é€šè¿‡<code>.current</code>å’Œ<code>.stateNode</code>äº’ç›¸å¼•ç”¨ï¼Œå½¢æˆé—­ç¯ï¼š
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4b2e849c697b4b1fa9ddf999504daa5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgeXl5YW8=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768351686&amp;x-signature=SF%2FOqn3SAiaK6w1Q2vGWTJWMpfo%3D" alt="åˆå§‹åŒ–æ ¹å®¹å™¨.png" loading="lazy"/></li>
</ol>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-comment">/* src/react/packages/react-reconciler/src/ReactFiberReconciler.old.js */</span>
<span class="hljs-function"><span class="hljs-keyword">export</span> function <span class="hljs-title">createContainer</span><span class="hljs-params">(...)</span>: OpaqueRoot {</span>
  <span class="hljs-keyword">return</span> <span class="hljs-built_in">createFiberRoot</span>(...);
}

<span class="hljs-comment">/* src/react/packages/react-reconciler/src/ReactFiberRoot.old.js */</span>
<span class="hljs-function"><span class="hljs-keyword">export</span> function <span class="hljs-title">createFiberRoot</span><span class="hljs-params">(...)</span>: FiberRoot {</span>
  <span class="hljs-comment">// 1. åˆ›å»º FiberRoot</span>
  <span class="hljs-type">const</span> root: FiberRoot = (<span class="hljs-keyword">new</span> <span class="hljs-built_in">FiberRootNode</span>(...));

  <span class="hljs-comment">// 2. åˆ›å»º RootFiber</span>
  <span class="hljs-type">const</span> uninitializedFiber = <span class="hljs-built_in">createHostRootFiber</span>(...);
  
  <span class="hljs-comment">// 3. å°†äºŒè€…è¿›è¡Œå…³è”</span>
  root.current = uninitializedFiber;
  uninitializedFiber.stateNode = root;

  <span class="hljs-keyword">return</span> root;
}
</code></pre>
<p>çœ‹åˆ°è¿™é‡Œå¤§å®¶è‚¯å®šå¯¹è¿™æ–°å‡ºç°çš„ç»“æ„ä¸€è„¸æ‡µ o((âŠ™ï¹âŠ™))o</p>
<ul>
<li><strong>FiberRootNode</strong>ï¼š<code>Fiber</code>æ ‘çš„å®¹å™¨ï¼Œå®ƒä»£è¡¨äº†æ•´ä¸ª<code>React</code>åº”ç”¨çš„æ ¹èŠ‚ç‚¹ï¼Œä¸å®é™…çš„<code>DOM</code>å®¹å™¨ï¼ˆä¾‹å¦‚<code>div#root</code>ï¼‰ç›¸å…³è”ã€‚æ¯ä¸ª<code>React</code>åº”ç”¨é€šå¸¸åªæœ‰ä¸€ä¸ª<code>FiberRoot</code></li>
<li><strong>RootFiberNode</strong>ï¼š<code>Fiber</code>æ ‘çš„æ ¹èŠ‚ç‚¹ï¼Œå³<code>HostRoot</code>ã€‚å®ƒæ˜¯<code>Fiber</code>æ ‘ç»“æ„çš„èµ·ç‚¹ï¼Œå…¶å­èŠ‚ç‚¹å°±æ˜¯åº”ç”¨é¡¶å±‚ç»„ä»¶ï¼ˆä¾‹å¦‚<code>&lt;App /&gt;</code>ï¼‰</li>
</ul>
<p>æœ€åé¡ºä¾¿çœ‹ä¸€ä¸‹ç”¨äºç”Ÿæˆ<code>RootFiber</code>çš„å‡½æ•°ï¼š<code>createHostRootFiber</code>ã€‚å®ƒé€šè¿‡è°ƒç”¨å‡½æ•°<code>createFiber</code>å¹¶ä¼ å…¥<code>HostRoot</code>å‚æ•°ï¼Œç”Ÿæˆäº†ä¸€ä¸ªä»£è¡¨æ ¹èŠ‚ç‚¹çš„<code>Fiber</code>ã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰å¾ˆå¤š<code>Fiber</code>ç±»å‹ï¼Œä¼šåœ¨<code>Fiber</code>ç›¸å…³çš„ç« èŠ‚è¯¦ç»†è®²åˆ°</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">/* src/react/packages/react-reconciler/src/ReactWorkTags.js */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">FunctionComponent</span> = <span class="hljs-number">0</span>; <span class="hljs-comment">// å‡½æ•°ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">ClassComponent</span> = <span class="hljs-number">1</span>;    <span class="hljs-comment">// ç±»ç»„ä»¶</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title class_">HostRoot</span> = <span class="hljs-number">3</span>;          <span class="hljs-comment">// æ ¹èŠ‚ç‚¹</span>

<span class="hljs-comment">/* src/react/packages/react-reconciler/src/ReactFiber.old.js */</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">createHostRootFiber</span>(<span class="hljs-params">...</span>): <span class="hljs-title class_">Fiber</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-title function_">createFiber</span>(<span class="hljs-title class_">HostRoot</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, mode);
}

<span class="hljs-keyword">const</span> createFiber = <span class="hljs-keyword">function</span>(<span class="hljs-params">...</span>): <span class="hljs-title class_">Fiber</span> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FiberNode</span>(...);
}
</code></pre>
<h2 data-id="heading-3">æ€»ç»“</h2>
<p>æœ¬æ–‡ä»å®è§‚è§’åº¦è§£æäº†<code>ReactDOM.createRoot</code>å¦‚ä½•ä¸º<code>React</code>åº”ç”¨åˆå§‹åŒ–å®¹å™¨ã€åˆ›å»ºæ ¸å¿ƒæ•°æ®ç»“æ„ï¼Œå¹¶æœ€ç»ˆå‡†å¤‡å¥½æ¸²æŸ“çš„èˆå°ã€‚ç†è§£è¿™ä¸€è¿‡ç¨‹æ˜¯æŒæ¡<code>React</code>å¹¶å‘æ¸²æŸ“æ¨¡å‹ï¼ˆ<code>Concurrent Mode</code>ï¼‰çš„åŸºç¡€ã€‚</p>
<p>ä¸‹ä¸€ç« æˆ‘ä»¬å°†å­¦ä¹ å¦ä¸€ä¸ªé‡è¦çš„æ•°æ®ç»“æ„ï¼š<code>Fiber</code></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Kubernetesäº”å¤§æ ¸å¿ƒæ§åˆ¶å™¨æ·±åº¦è§£æï¼šä»åŸç†åˆ°å®è·µ]]></title>    <link>https://juejin.cn/post/7592094358657122338</link>    <guid>https://juejin.cn/post/7592094358657122338</guid>    <pubDate>2026-01-06T16:07:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592094358657122338" data-draft-id="7592089325912834048" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Kubernetesäº”å¤§æ ¸å¿ƒæ§åˆ¶å™¨æ·±åº¦è§£æï¼šä»åŸç†åˆ°å®è·µ"/> <meta itemprop="keywords" content="Kubernetes,äº‘åŸç”Ÿ"/> <meta itemprop="datePublished" content="2026-01-06T16:07:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¸…çŒ›çš„Shic"/> <meta itemprop="url" content="https://juejin.cn/user/2737098744398000"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Kubernetesäº”å¤§æ ¸å¿ƒæ§åˆ¶å™¨æ·±åº¦è§£æï¼šä»åŸç†åˆ°å®è·µ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2737098744398000/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¸…çŒ›çš„Shic
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T16:07:48.000Z" title="Tue Jan 06 2026 16:07:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    2
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä»€ä¹ˆæ˜¯Kubernetesæ§åˆ¶å™¨ï¼Ÿ</h2>
<ul>
<li>åœ¨Kubernetesç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œ<strong>æ§åˆ¶å™¨</strong>æ‰®æ¼”ç€"æ™ºèƒ½å¤§è„‘"çš„è§’è‰²ã€‚å®ƒä»¬æŒç»­ç›‘æ§é›†ç¾¤çŠ¶æ€ï¼Œç¡®ä¿å®é™…çŠ¶æ€ä¸æœŸæœ›çŠ¶æ€ä¿æŒä¸€è‡´ã€‚æ§åˆ¶å™¨æ¨¡å¼æ˜¯Kuberneteså®ç°å£°æ˜å¼APIå’Œè‡ªæ„ˆèƒ½åŠ›çš„å…³é”®æœºåˆ¶ã€‚</li>
</ul>
<h2 data-id="heading-1">æ§åˆ¶å™¨æ¨¡å¼æ ¸å¿ƒæ€æƒ³</h2>
<ul>
<li>
<p>æ§åˆ¶å¾ªç¯ï¼ˆControl Loopï¼‰</p>
<ul>
<li>
<p>æ¯ä¸ªæ§åˆ¶å™¨éƒ½è¿è¡Œä¸€ä¸ªæ— é™å¾ªç¯ï¼Œæ‰§è¡Œä¸‰ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š</p>
<ol start="0">
<li><strong>è§‚å¯Ÿï¼ˆObserveï¼‰</strong> ï¼šé€šè¿‡API Serverç›‘è§†èµ„æºçŠ¶æ€å˜åŒ–</li>
<li><strong>åˆ†æï¼ˆDiffï¼‰</strong> ï¼šæ¯”è¾ƒæœŸæœ›çŠ¶æ€ï¼ˆSpecï¼‰ä¸å®é™…çŠ¶æ€ï¼ˆStatusï¼‰</li>
<li><strong>æ‰§è¡Œï¼ˆActï¼‰</strong> ï¼šé‡‡å–å¿…è¦æ“ä½œä½¿å®é™…çŠ¶æ€å‘æœŸæœ›çŠ¶æ€æ”¶æ•›</li>
</ol>
</li>
</ul>
</li>
<li>
<p>å£°æ˜å¼çŠ¶æ€ç®¡ç†</p>
<ul>
<li>
<p>æ§åˆ¶å™¨é‡‡ç”¨å£°æ˜å¼ï¼ˆDeclarativeï¼‰è€Œéå‘½ä»¤å¼ï¼ˆImperativeï¼‰æ–¹æ³•ï¼š</p>
<ul>
<li>ç”¨æˆ·å£°æ˜"æœŸæœ›çŠ¶æ€"</li>
<li>æ§åˆ¶å™¨è´Ÿè´£å®ç°å¹¶ç»´æŒè¯¥çŠ¶æ€</li>
<li>ç³»ç»Ÿå…·å¤‡è‡ªæ„ˆèƒ½åŠ›</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 data-id="heading-2">ReplicaSetæ§åˆ¶å™¨</h2>
<h3 data-id="heading-3">å®šä½ä¸ä½œç”¨</h3>
<p>ReplicaSetï¼ˆRSï¼‰æ˜¯Kubernetesä¸­ç¡®ä¿æŒ‡å®šæ•°é‡Podå‰¯æœ¬è¿è¡Œçš„åŸºç¡€æ§åˆ¶å™¨ã€‚å®ƒæ˜¯Deploymentçš„åº•å±‚å®ç°ç»„ä»¶ï¼Œè´Ÿè´£ç»´æŠ¤åº”ç”¨åœ¨é›†ç¾¤ä¸­çš„å‰¯æœ¬æ•°é‡ï¼Œç¡®ä¿Podæ•°é‡å§‹ç»ˆä¸æœŸæœ›å€¼åŒ¹é…</p>
<h3 data-id="heading-4">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>ç²¾ç¡®ç»´æŠ¤Podå‰¯æœ¬æ•°é‡</li>
<li>é€šè¿‡æ ‡ç­¾é€‰æ‹©å™¨è¯†åˆ«å’Œç®¡ç†Pod</li>
<li>æä¾›åŸºæœ¬çš„æ‰©ç¼©å®¹èƒ½åŠ›</li>
<li>è‡ªåŠ¨æ›¿æ¢å¤±è´¥æˆ–åˆ é™¤çš„Pod</li>
</ul>
<h3 data-id="heading-5">ReplicaSetä¸Deploymentçš„å…³ç³»</h3>
<pre><code class="hljs language-scss" lang="scss">Â Deployment (ä¸Šå±‚æŠ½è±¡)
Â  Â   â†“ ç®¡ç†
Â ReplicaSet (å‰¯æœ¬ç®¡ç†) Â 
Â  Â   â†“ æ§åˆ¶
Â Pod (è¿è¡Œå®ä¾‹)
</code></pre>
<h3 data-id="heading-6">ç¤ºä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml">Â <span class="hljs-string">cat</span> <span class="hljs-string">rs-nginx.yaml</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
Â <span class="hljs-attr">kind:</span> <span class="hljs-string">ReplicaSet</span>
Â <span class="hljs-attr">metadata:</span>
Â   <span class="hljs-attr">name:</span> <span class="hljs-string">nginx-rs</span>
Â   <span class="hljs-attr">labels:</span>
Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â <span class="hljs-attr">spec:</span>
Â   <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span> Â <span class="hljs-comment"># æœŸæœ›çš„Podå‰¯æœ¬æ•°</span>
Â   <span class="hljs-attr">selector:</span> Â  Â <span class="hljs-comment"># æ ‡ç­¾é€‰æ‹©å™¨ï¼Œè¯†åˆ«è¦ç®¡ç†çš„Pod</span>
Â  Â   <span class="hljs-attr">matchLabels:</span>
Â  Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â   <span class="hljs-attr">template:</span> Â  Â <span class="hljs-comment"># Podæ¨¡æ¿ï¼Œç”¨äºåˆ›å»ºæ–°Pod</span>
Â  Â   <span class="hljs-attr">metadata:</span>
Â  Â  Â   <span class="hljs-attr">labels:</span>
Â  Â  Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â   <span class="hljs-attr">containers:</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
Â  Â  Â  Â   <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.19</span>
Â  Â  Â  Â   <span class="hljs-attr">ports:</span>
Â  Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
Â  Â  Â  Â   <span class="hljs-attr">resources:</span> Â  Â  <span class="hljs-comment">#é…ç½®èµ„æºé™åˆ¶</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">requests:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">"64Mi"</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">limits:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">"128Mi"</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
Â  Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â  Â 
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">rs-nginx.yaml</span>
</code></pre>
<h2 data-id="heading-7">Deploymentæ§åˆ¶å™¨</h2>
<h3 data-id="heading-8">å®šä½ä¸ä½œç”¨</h3>
<p>Deploymentæ˜¯Kubernetesä¸­ç”¨äºéƒ¨ç½²æ— çŠ¶æ€åº”ç”¨çš„é«˜çº§æ§åˆ¶å™¨ã€‚å®ƒå»ºç«‹åœ¨ReplicaSetä¹‹ä¸Šï¼Œæä¾›äº†å£°æ˜å¼çš„æ›´æ–°ã€å›æ»šå’Œæ‰©ç¼©å®¹èƒ½åŠ›ï¼Œç¡®ä¿åº”ç”¨ä»¥å¯æ§çš„æ–¹å¼å‘å¸ƒå’Œè¿è¡Œã€‚</p>
<h3 data-id="heading-9">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>ç®¡ç†ReplicaSetï¼Œé—´æ¥æ§åˆ¶Podå‰¯æœ¬æ•°</li>
<li>æ”¯æŒæ»šåŠ¨æ›´æ–°ï¼ˆRolling Updateï¼‰ã€è“ç»¿éƒ¨ç½²ï¼ˆBlue-Greenï¼‰</li>
<li>è‡ªåŠ¨æ‰©ç¼©å®¹ï¼ˆç»“åˆHPAï¼ˆéœ€éƒ¨ç½²metrics-serverç»„ä»¶ï¼‰ï¼‰</li>
</ul>
<h3 data-id="heading-10">ç¤ºä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml">Â <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
Â <span class="hljs-attr">kind:</span> <span class="hljs-string">Deployment</span>
Â <span class="hljs-attr">metadata:</span>
Â   <span class="hljs-attr">name:</span> <span class="hljs-string">web-app</span>
Â   <span class="hljs-attr">labels:</span>
Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â <span class="hljs-attr">spec:</span>
Â   <span class="hljs-attr">replicas:</span> <span class="hljs-number">3</span> Â <span class="hljs-comment"># æœŸæœ›çš„Podå‰¯æœ¬æ•°</span>
Â   <span class="hljs-attr">selector:</span>
Â  Â   <span class="hljs-attr">matchLabels:</span>
Â  Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â   <span class="hljs-attr">strategy:</span>
Â  Â   <span class="hljs-attr">type:</span> <span class="hljs-string">RollingUpdate</span>
Â  Â   <span class="hljs-attr">rollingUpdate:</span>
Â  Â  Â   <span class="hljs-attr">maxSurge:</span> <span class="hljs-number">1</span> Â  Â  Â  Â <span class="hljs-comment"># æ›´æ–°æ—¶æœ€å¤§å¯è¶…å‡ºå‰¯æœ¬æ•°</span>
Â  Â  Â   <span class="hljs-attr">maxUnavailable:</span> <span class="hljs-number">1</span> Â <span class="hljs-comment"># æ›´æ–°æ—¶æœ€å¤§ä¸å¯ç”¨å‰¯æœ¬æ•°</span>
Â   <span class="hljs-attr">template:</span>
Â  Â   <span class="hljs-attr">metadata:</span>
Â  Â  Â   <span class="hljs-attr">labels:</span>
Â  Â  Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">nginx</span>
Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â   <span class="hljs-attr">containers:</span>
Â  Â  Â  Â <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">nginx</span>
Â  Â  Â  Â   <span class="hljs-attr">image:</span> <span class="hljs-string">nginx:1.19</span>
Â  Â  Â  Â   <span class="hljs-attr">ports:</span>
Â  Â  Â  Â  Â <span class="hljs-bullet">-</span> <span class="hljs-attr">containerPort:</span> <span class="hljs-number">80</span>
Â  Â  Â  Â   <span class="hljs-attr">resources:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">requests:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">"64Mi"</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">limits:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">"128Mi"</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">"500m"</span>
Â  Â  Â  Â   <span class="hljs-attr">livenessProbe:</span> Â  Â <span class="hljs-comment">#é…ç½®å­˜æ´»æ€§æ¢é’ˆ</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">httpGet:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">path:</span> <span class="hljs-string">/</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">port:</span> <span class="hljs-number">80</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">initialDelaySeconds:</span> <span class="hljs-number">30</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">periodSeconds:</span> <span class="hljs-number">10</span>
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â 
Â <span class="hljs-comment">#æ“ä½œ Â  Â  Â  Â  Â </span>
Â <span class="hljs-comment"># åˆ›å»ºDeployment</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">apply</span> <span class="hljs-string">-f</span> <span class="hljs-string">deployment.yaml</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-comment"># æŸ¥çœ‹æ»šåŠ¨æ›´æ–°çŠ¶æ€</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">rollout</span> <span class="hljs-string">status</span> <span class="hljs-string">deployment/web-app</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-comment"># æ‰§è¡Œæ»šåŠ¨æ›´æ–°ï¼ˆé•œåƒå‡çº§ï¼‰</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">set</span> <span class="hljs-string">image</span> <span class="hljs-string">deployment/web-app</span> <span class="hljs-string">nginx=nginx:1.20</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-comment"># å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">rollout</span> <span class="hljs-string">undo</span> <span class="hljs-string">deployment/web-app</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-comment"># æŸ¥çœ‹æ›´æ–°å†å²</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">rollout</span> <span class="hljs-string">history</span> <span class="hljs-string">deployment/web-app</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-comment"># æ°´å¹³è‡ªåŠ¨æ‰©ç¼©å®¹</span>
Â <span class="hljs-string">kubectl</span> <span class="hljs-string">autoscale</span> <span class="hljs-string">deployment</span> <span class="hljs-string">web-app</span> <span class="hljs-string">--min=2</span> <span class="hljs-string">--max=10</span> <span class="hljs-string">--cpu-percent=80</span>
</code></pre>
<h2 data-id="heading-11">DaemonSetæ§åˆ¶å™¨</h2>
<h3 data-id="heading-12">å®šä½ä¸ä½œç”¨</h3>
<p>DaemonSetç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæˆ–æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼‰ä¸Šéƒ½è¿è¡Œä¸€ä¸ªæŒ‡å®šçš„Podå‰¯æœ¬ã€‚å®ƒé€‚ç”¨äºéœ€è¦åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç³»ç»Ÿçº§æœåŠ¡ï¼Œå¦‚æ—¥å¿—æ”¶é›†ã€ç›‘æ§ä»£ç†ç­‰ã€‚</p>
<h3 data-id="heading-13">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>ç¡®ä¿æ¯ä¸ªèŠ‚ç‚¹ï¼ˆæˆ–æ»¡è¶³æ¡ä»¶çš„èŠ‚ç‚¹ï¼‰è¿è¡Œä¸€ä¸ªPodå‰¯æœ¬</li>
<li>èŠ‚ç‚¹åŠ å…¥é›†ç¾¤æ—¶è‡ªåŠ¨éƒ¨ç½²Pod</li>
<li>èŠ‚ç‚¹ä»é›†ç¾¤ç§»é™¤æ—¶è‡ªåŠ¨åˆ é™¤Pod</li>
</ul>
<h3 data-id="heading-14">ç¤ºä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml">Â <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">apps/v1</span>
Â <span class="hljs-attr">kind:</span> <span class="hljs-string">DaemonSet</span>
Â <span class="hljs-attr">metadata:</span>
Â   <span class="hljs-attr">name:</span> <span class="hljs-string">filebeat</span>
Â   <span class="hljs-attr">labels:</span>
Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">filebeat</span>
Â <span class="hljs-attr">spec:</span>
Â   <span class="hljs-attr">selector:</span>
Â  Â   <span class="hljs-attr">matchLabels:</span>
Â  Â  Â   <span class="hljs-attr">name:</span> <span class="hljs-string">filebeat</span>
Â   <span class="hljs-attr">template:</span>
Â  Â   <span class="hljs-attr">metadata:</span>
Â  Â  Â   <span class="hljs-attr">labels:</span>
Â  Â  Â  Â   <span class="hljs-attr">app:</span> <span class="hljs-string">filebeat</span>
Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â   <span class="hljs-attr">tolerations:</span> Â <span class="hljs-comment"># å…è®¸åœ¨æ±¡ç‚¹èŠ‚ç‚¹ä¸Šè¿è¡Œ</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">node-role.kubernetes.io/master</span>
Â  Â  Â  Â   <span class="hljs-attr">effect:</span> <span class="hljs-string">NoSchedule</span> Â  <span class="hljs-comment">#è¯¥èŠ‚ç‚¹ä¸åœ¨æ¥å—æ–°çš„Podè°ƒåº¦ï¼Œä½†å·²ç»è°ƒåº¦åˆ°è¯¥èŠ‚ç‚¹çš„Podä¸ä¼šè¢«é©±é€ã€‚</span>
Â  Â  Â   <span class="hljs-attr">containers:</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">filebeat</span>
Â  Â  Â  Â   <span class="hljs-attr">image:</span> <span class="hljs-string">docker.elastic.co/beats/filebeat:8.13.4</span>
Â  Â  Â  Â   <span class="hljs-attr">resources:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">limits:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">200Mi</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">requests:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">100m</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">200Mi</span>
Â  Â  Â  Â   <span class="hljs-attr">volumeMounts:</span>
Â  Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">varlog</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/log</span>
Â  Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">varlibdockercontainers</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/var/lib/docker/containers</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">readOnly:</span> <span class="hljs-literal">true</span>
Â  Â  Â   <span class="hljs-attr">terminationGracePeriodSeconds:</span> <span class="hljs-number">30</span>
Â  Â  Â   <span class="hljs-attr">volumes:</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">varlog</span>
Â  Â  Â  Â   <span class="hljs-attr">hostPath:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">path:</span> <span class="hljs-string">/var/log</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">varlibdockercontainers</span>
Â  Â  Â  Â   <span class="hljs-attr">hostPath:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">path:</span> <span class="hljs-string">/var/lib/docker/containers</span>
Â  Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â  Â 
Â <span class="hljs-comment">#terminationGracePeriodSeconds: 30</span>
Â <span class="hljs-string">å¦‚æœåœ¨ä¼˜é›…ç»ˆæ­¢æœŸå†…å®¹å™¨æ­£å¸¸é€€å‡ºï¼Œé‚£ä¹ˆKubernetesä¼šç«‹å³æ¸…ç†Podã€‚å¦‚æœå®¹å™¨åœ¨ä¼˜é›…ç»ˆæ­¢æœŸç»“æŸåä»ç„¶æ²¡æœ‰é€€å‡ºï¼ŒKubernetesä¼šå‘é€SIGKILLä¿¡å·å¼ºåˆ¶æ€æ­»å®¹å™¨ã€‚</span>
Â <span class="hljs-string">è®©å®¹å™¨æœ‰æœºä¼šå®Œæˆä¸€äº›æ¸…ç†å·¥ä½œï¼Œæ¯”å¦‚ä¿å­˜çŠ¶æ€ã€å…³é—­ç½‘ç»œè¿æ¥ç­‰ï¼Œä»è€Œä¼˜é›…åœ°åœæ­¢ï¼Œè€Œä¸æ˜¯è¢«å¼ºåˆ¶æ€æ­»ã€‚</span> Â  Â 
Â <span class="hljs-string">ç¡®ä¿å®¹å™¨æœ‰è¶³å¤Ÿçš„æ—¶é—´å®Œæˆæ¸…ç†å·¥ä½œï¼Œé¿å…æ•°æ®ä¸¢å¤±æˆ–æœåŠ¡å¼‚å¸¸ä¸­æ–­ã€‚</span>
</code></pre>
<h2 data-id="heading-15">StatefulSetæ§åˆ¶å™¨</h2>
<h3 data-id="heading-16">å®šä½ä¸ä½œç”¨</h3>
<p>StatefulSetæ˜¯Kubernetesä¸­ç”¨äºéƒ¨ç½²æœ‰çŠ¶æ€åº”ç”¨çš„æ§åˆ¶å™¨ã€‚å®ƒä¸ºæ¯ä¸ªPodæä¾›ç¨³å®šçš„å”¯ä¸€æ ‡è¯†ï¼ˆå¦‚æœ‰åºç´¢å¼•ã€å›ºå®šç½‘ç»œæ ‡è¯†ï¼‰å’ŒæŒä¹…åŒ–å­˜å‚¨ï¼Œé€‚ç”¨äºéœ€è¦ç¨³å®šæ‹“æ‰‘å’ŒæŒä¹…åŒ–å­˜å‚¨çš„åº”ç”¨ï¼Œå¦‚æ•°æ®åº“ã€æ¶ˆæ¯é˜Ÿåˆ—ç­‰ã€‚</p>
<h3 data-id="heading-17">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>
<p>ç¨³å®šçš„ã€å”¯ä¸€çš„ç½‘ç»œæ ‡è¯†ç¬¦ï¼ˆpod-name.service-nameï¼‰ï¼ˆç¨³å®šçš„ DNS åç§°å’Œä¸»æœºåï¼‰</p>
<ul>
<li>
<p>å…¶æœ¬è´¨å¯¹åº”çš„æ˜¯ä¸€ä¸ªserviceèµ„æºï¼Œåªä¸è¿‡è¿™ä¸ªserviceæ²¡æœ‰å®šä¹‰VIPï¼Œç§°ä¹‹ä¸ºheadless serviceï¼Œå³"æ— å¤´æœåŠ¡"ã€‚</p>
</li>
<li>
<p>é€šè¿‡"headless service"æ¥ç»´æŠ¤Podçš„ç½‘ç»œèº«ä»½ï¼Œä¼šä¸ºæ¯ä¸ªPodåˆ†é…ä¸€ä¸ªæ•°å­—ç¼–å·å¹¶ä¸”æŒ‰ç…§ç¼–å·é¡ºåºéƒ¨ç½²ã€‚</p>
</li>
<li>
<p>æ— å¤´æœåŠ¡ï¼ˆ"headless service"ï¼‰è¦æ±‚æ»¡è¶³ä»¥ä¸‹ä¸¤ç‚¹:</p>
<ul>
<li>å°†svcèµ„æºçš„clusterIPå­—æ®µè®¾ç½®Noneï¼Œå³"clusterIP: None"</li>
<li>å°†stsèµ„æºçš„serviceNameå­—æ®µå£°æ˜ä¸ºæ— å¤´æœåŠ¡çš„åç§°</li>
</ul>
</li>
<li>
<p>ç¨³å®šçš„DNSè®°å½•ï¼šæ¯ä¸ªPodå¯ä»¥é€šè¿‡å›ºå®šçš„DNSåç§°è®¿é—®ï¼š...svc.cluster.local</p>
</li>
</ul>
</li>
<li>
<p>ç¨³å®šç‹¬ç«‹ä¸”æŒä¹…åŒ–çš„å­˜å‚¨ï¼ˆPersistentVolumeï¼‰</p>
<ul>
<li>
<p>Statefulsetçš„å­˜å‚¨å·ä½¿ç”¨VolumeClaimTemplateåˆ›å»ºï¼Œç§°ä¸º"å­˜å‚¨å·ç”³è¯·æ¨¡æ¿"ã€‚</p>
</li>
<li>
<p>å½“stsèµ„æºä½¿ç”¨VolumeClaimTemplateåˆ›å»ºä¸€ä¸ªPVCæ—¶ï¼ŒåŒæ ·ä¹Ÿä¼šä¸ºæ¯ä¸ªPodåˆ†é…å¹¶åˆ›å»ºå”¯ä¸€çš„pvcç¼–å·ï¼Œæ¯ä¸ªpvcç»‘å®šå¯¹åº”pvï¼Œä»è€Œä¿è¯æ¯ä¸ªPodéƒ½æœ‰ç‹¬ç«‹çš„å­˜å‚¨ã€‚</p>
</li>
<li>
<p>æŒä¹…åŒ–å­˜å‚¨åŸç†</p>
<ul>
<li>å½“Podä½¿ç”¨æŒä¹…åŒ–å­˜å‚¨ï¼ˆå¦‚PersistentVolumeClaimï¼ŒPVCï¼‰æ—¶ï¼Œæ•°æ®å®é™…ä¸Šæ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªç‹¬ç«‹çš„å­˜å‚¨å·ï¼ˆPersistentVolumeï¼ŒPVï¼‰ä¸­ã€‚</li>
<li>Podé€šè¿‡æŒ‚è½½ï¼ˆmountï¼‰çš„æ–¹å¼è®¿é—®è¿™ä¸ªå­˜å‚¨å·ã€‚</li>
<li>å­˜å‚¨å·çš„ç”Ÿå‘½å‘¨æœŸä¸Podæ˜¯åˆ†ç¦»çš„ã€‚è¿™æ„å‘³ç€ï¼Œåˆ é™¤Podå¹¶ä¸ä¼šè‡ªåŠ¨åˆ é™¤å­˜å‚¨å·ã€‚</li>
<li>åœ¨StatefulSetä¸­ï¼Œä½¿ç”¨<code>volumeClaimTemplates</code>æ¥ä¸ºæ¯ä¸ªPodåŠ¨æ€åˆ›å»ºPVCã€‚</li>
<li>æ¯ä¸ªPodéƒ½ä¼šè·å¾—è‡ªå·±ç‹¬ç«‹çš„å­˜å‚¨å·ï¼Œè¿™äº›å­˜å‚¨å·ä¼šä¸€ç›´å­˜åœ¨ï¼Œç›´åˆ°æ‰‹åŠ¨åˆ é™¤PVCã€‚</li>
<li>å½“Podè¢«é‡æ–°åˆ›å»ºï¼ˆä¾‹å¦‚ï¼Œç”±äºèŠ‚ç‚¹æ•…éšœæˆ–æ‰‹åŠ¨åˆ é™¤ï¼‰ï¼ŒStatefulSetæ§åˆ¶å™¨ä¼šç¡®ä¿æ–°PodæŒ‚è½½åˆ°åŒä¸€ä¸ªå­˜å‚¨å·ä¸Šï¼Œå› æ­¤æ•°æ®ä¸ä¼šä¸¢å¤±ã€‚</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æœ‰åºçš„ã€ä¼˜é›…çš„éƒ¨ç½²å’Œæ‰©ç¼©</p>
</li>
<li>
<p>æœ‰åºçš„ã€ä¼˜é›…çš„åˆ é™¤å’Œç»ˆæ­¢</p>
</li>
</ul>
<h3 data-id="heading-18">ç¤ºä¾‹</h3>
<ul>
<li>statefulset-headless-nginx.yaml</li>
</ul>
<pre><code class="hljs language-less" lang="less">Â apiVersion: v1
Â kind: Service
Â metadata:
Â   name: svc-headless
Â spec:
Â   ports:
Â   - port: 80
Â  Â   name: web
Â  Â # å°†clusterIPå­—æ®µè®¾ç½®ä¸º<span class="hljs-attribute">Noneè¡¨ç¤ºä¸ºä¸€ä¸ªæ— å¤´æœåŠ¡ï¼Œå³svcå°†ä¸ä¼šåˆ†é…VIPã€‚
Â   clusterIP</span>: None
Â   <span class="hljs-attribute">selector</span>:
Â  Â   <span class="hljs-attribute">app</span>: nginx
Â â€‹
Â â€‹
Â ---
Â â€‹
Â <span class="hljs-attribute">apiVersion</span>: apps/v1
Â <span class="hljs-attribute">kind</span>: StatefulSet
Â <span class="hljs-attribute">metadata</span>:
Â   <span class="hljs-attribute">name</span>: sts-nginx
Â <span class="hljs-attribute">spec</span>:
Â   <span class="hljs-attribute">selector</span>:
Â  Â   <span class="hljs-attribute">matchLabels</span>:
Â  Â  Â   <span class="hljs-attribute">app</span>: nginx
Â  Â # å£°æ˜æ— å¤´æœåŠ¡ Â  Â 
Â   <span class="hljs-attribute">serviceName</span>: svc-headless
Â   <span class="hljs-attribute">replicas</span>: <span class="hljs-number">3</span> 
Â   <span class="hljs-attribute">template</span>:
Â  Â   <span class="hljs-attribute">metadata</span>:
Â  Â  Â   <span class="hljs-attribute">labels</span>:
Â  Â  Â  Â   <span class="hljs-attribute">app</span>: nginx
Â  Â   <span class="hljs-attribute">spec</span>:
Â  Â  Â   <span class="hljs-attribute">containers</span>:
Â  Â  Â   - <span class="hljs-attribute">name</span>: nginx
Â  Â  Â  Â   <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â  Â   <span class="hljs-attribute">imagePullPolicy</span>: Always
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â 
Â  Â  Â  Â  Â 
Â #æµ‹è¯•è¾“å‡º
Â [root<span class="hljs-variable">@master51</span>]# kubectl get sts,svc,po -o wide
Â NAME Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  READY Â  AGE Â  CONTAINERS Â  IMAGES
Â statefulset.apps/sts-nginx Â  <span class="hljs-number">3</span>/<span class="hljs-number">3</span> Â  Â  <span class="hljs-number">8s</span> Â   nginx Â  Â  Â   <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â â€‹
Â NAME Â  Â  Â  Â  Â  Â  Â  Â  Â  TYPE Â  Â  Â   CLUSTER-IP Â  EXTERNAL-IP Â  <span class="hljs-built_in">PORT</span>(S) Â  AGE Â  SELECTOR
Â service/kubernetes Â  Â  ClusterIP Â  <span class="hljs-number">10.200</span>.<span class="hljs-number">0.1</span> Â  &lt;none&gt; Â  Â  Â   <span class="hljs-number">443</span>/TCP Â  <span class="hljs-number">10</span>d Â  &lt;none&gt;
Â service/svc-headless Â  ClusterIP Â  None Â  Â  Â  Â  &lt;none&gt; Â  Â  Â   <span class="hljs-number">80</span>/TCP Â   <span class="hljs-number">8s</span> Â   app=nginx
Â â€‹
Â NAME Â  Â  Â  Â  Â  Â  Â   READY Â  STATUS Â   RESTARTS Â  AGE Â  IP Â  Â  Â  Â  Â  Â  Â  NODE Â  Â  Â   NOMINATED NODE Â  READINESS GATES
Â pod/sts-nginx-<span class="hljs-number">0</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">8s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">203.186</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â pod/sts-nginx-<span class="hljs-number">1</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">6s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">140.87</span> Â   worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â pod/sts-nginx-<span class="hljs-number">2</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">4s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">160.134</span> Â  master51 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â â€‹
Â â€‹
</code></pre>
<ul>
<li>statefulset-headless-volumeClaimTemplates.yaml</li>
</ul>
<pre><code class="hljs language-less" lang="less">Â apiVersion: v1
Â kind: Service
Â metadata:
Â   name: svc-headless
Â spec:
Â   ports:
Â   - port: 80
Â  Â   name: web
Â   clusterIP: <span class="hljs-attribute">None
Â   selector</span>:
Â  Â   <span class="hljs-attribute">app</span>: nginx
Â ---
Â <span class="hljs-attribute">apiVersion</span>: apps/v1
Â <span class="hljs-attribute">kind</span>: StatefulSet
Â <span class="hljs-attribute">metadata</span>:
Â   <span class="hljs-attribute">name</span>: sts-nginx
Â <span class="hljs-attribute">spec</span>:
Â   <span class="hljs-attribute">selector</span>:
Â  Â   <span class="hljs-attribute">matchLabels</span>:
Â  Â  Â   <span class="hljs-attribute">app</span>: nginx
Â   <span class="hljs-attribute">serviceName</span>: svc-headless
Â   <span class="hljs-attribute">replicas</span>: <span class="hljs-number">3</span> 
Â   <span class="hljs-attribute">template</span>:
Â  Â   <span class="hljs-attribute">metadata</span>:
Â  Â  Â   <span class="hljs-attribute">labels</span>:
Â  Â  Â  Â   <span class="hljs-attribute">app</span>: nginx
Â  Â   <span class="hljs-attribute">spec</span>:
Â  Â  Â   <span class="hljs-attribute">containers</span>:
Â  Â  Â   - <span class="hljs-attribute">name</span>: nginx
Â  Â  Â  Â   <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â  Â   <span class="hljs-attribute">ports</span>:
Â  Â  Â  Â   - <span class="hljs-attribute">containerPort</span>: <span class="hljs-number">80</span>
Â  Â  Â  Â  Â   <span class="hljs-attribute">name</span>: nginx
Â  Â  Â  Â   <span class="hljs-attribute">volumeMounts</span>:
Â  Â  Â  Â   - <span class="hljs-attribute">name</span>: data
Â  Â  Â  Â  Â   <span class="hljs-attribute">mountPath</span>: /usr/share/nginx/html Â  Â  Â 
Â  Â # å·å£°æ˜æ¨¡æ¿ï¼Œä¼šä¸ºæ¯ä¸ªPodå»åˆ›å»ºå”¯ä¸€çš„pvcå¹¶ä¸ä¹‹å…³è”
Â   <span class="hljs-attribute">volumeClaimTemplates</span>:
Â   - <span class="hljs-attribute">metadata</span>:
Â  Â  Â   <span class="hljs-attribute">name</span>: data
Â  Â   <span class="hljs-attribute">spec</span>:
Â  Â  Â   <span class="hljs-attribute">accessModes</span>: [ <span class="hljs-string">"ReadWriteOnce"</span> ] Â  # å•èŠ‚ç‚¹è¯»å†™
Â  Â  Â  Â # å£°æ˜è‡ªå®šä¹‰çš„åŠ¨æ€å­˜å‚¨ç±»ï¼Œå³scèµ„æºã€‚
Â  Â  Â   <span class="hljs-attribute">storageClassName</span>: <span class="hljs-string">"sc01"</span>
Â  Â  Â   <span class="hljs-attribute">resources</span>:
Â  Â  Â  Â   <span class="hljs-attribute">requests</span>:
Â  Â  Â  Â  Â   <span class="hljs-attribute">storage</span>: <span class="hljs-number">2</span>Gi
Â ---
Â <span class="hljs-attribute">apiVersion</span>: v1
Â <span class="hljs-attribute">kind</span>: Service
Â <span class="hljs-attribute">metadata</span>:
Â   <span class="hljs-attribute">name</span>: svc-sts-nginx
Â <span class="hljs-attribute">spec</span>:
Â   <span class="hljs-attribute">type</span>: ClusterIP
Â   <span class="hljs-attribute">clusterIP</span>: <span class="hljs-number">10.200</span>.<span class="hljs-number">0.200</span>
Â   <span class="hljs-attribute">selector</span>:
Â  Â  Â  <span class="hljs-attribute">app</span>: nginx
Â   <span class="hljs-attribute">ports</span>:
Â   - <span class="hljs-attribute">port</span>: <span class="hljs-number">80</span>
Â  Â   <span class="hljs-attribute">targetPort</span>: nginx
Â â€‹
Â â€‹
Â â€‹
Â â€‹
Â #æµ‹è¯•ä¸è¾“å‡º
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl get sts,svc,po -o wide
Â NAME Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  READY Â  AGE Â  CONTAINERS Â  IMAGES
Â statefulset.apps/sts-nginx Â  <span class="hljs-number">3</span>/<span class="hljs-number">3</span> Â  Â  <span class="hljs-number">6s</span> Â   nginx Â  Â  Â   <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â â€‹
Â NAME Â  Â  Â  Â  Â  Â  Â  Â  Â  Â   TYPE Â  Â  Â   CLUSTER-IP Â  Â  EXTERNAL-IP Â  <span class="hljs-built_in">PORT</span>(S) Â  AGE Â  SELECTOR
Â service/kubernetes Â  Â  Â   ClusterIP Â  <span class="hljs-number">10.200</span>.<span class="hljs-number">0.1</span> Â  Â  &lt;none&gt; Â  Â  Â   <span class="hljs-number">443</span>/TCP Â  <span class="hljs-number">10</span>d Â  &lt;none&gt;
Â service/svc-headless Â  Â   ClusterIP Â  None Â  Â  Â  Â  Â  &lt;none&gt; Â  Â  Â   <span class="hljs-number">80</span>/TCP Â   <span class="hljs-number">6s</span> Â   app=nginx
Â service/svc-sts-nginx Â  Â  ClusterIP Â  <span class="hljs-number">10.200</span>.<span class="hljs-number">0.200</span> Â  &lt;none&gt; Â  Â  Â   <span class="hljs-number">80</span>/TCP Â   <span class="hljs-number">6s</span> Â   app=nginx
Â â€‹
Â NAME Â  Â  Â  Â  Â  Â  Â   READY Â  STATUS Â   RESTARTS Â  AGE Â  IP Â  Â  Â  Â  Â  Â  Â  NODE Â  Â  Â   NOMINATED NODE Â  READINESS GATES
Â pod/sts-nginx-<span class="hljs-number">0</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">6s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">203.163</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â pod/sts-nginx-<span class="hljs-number">1</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">5s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">140.92</span> Â   worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â pod/sts-nginx-<span class="hljs-number">2</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">3s</span> Â   <span class="hljs-number">10.100</span>.<span class="hljs-number">160.132</span> Â  master51 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â â€‹
Â â€‹
Â â€‹
Â #è¿›å…¥pod ä¸­å‘nginxé»˜è®¤é™æ€é¡µé¢è¾“å…¥
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl exec -it sts-xiuxian-<span class="hljs-number">0</span>  -- sh
Â / # echo <span class="hljs-string">"shic zhen shuai"</span> &gt; /usr/share/nginx/html/index.html
Â ä»¥æ­¤ç±»æ¨........
Â â€‹
Â [root<span class="hljs-variable">@master51</span> statefulsets]# for i in <span class="hljs-built_in">`seq 10`</span>; <span class="hljs-selector-tag">do</span> <span class="hljs-selector-tag">curl</span> <span class="hljs-number">10.200</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.200</span>; <span class="hljs-selector-tag">done</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â â€‹
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">kubectl</span> <span class="hljs-selector-tag">delete</span> <span class="hljs-selector-tag">pods</span> <span class="hljs-selector-tag">--all</span>
Â <span class="hljs-selector-tag">pod</span> "<span class="hljs-selector-tag">sts-nginx-0</span>" <span class="hljs-selector-tag">deleted</span>
Â <span class="hljs-selector-tag">pod</span> "<span class="hljs-selector-tag">sts-nginx-1</span>" <span class="hljs-selector-tag">deleted</span>
Â <span class="hljs-selector-tag">pod</span> "<span class="hljs-selector-tag">sts-nginx-2</span>" <span class="hljs-selector-tag">deleted</span>
Â â€‹
Â â€‹
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">kubectl</span> <span class="hljs-selector-tag">get</span> <span class="hljs-selector-tag">pods</span> <span class="hljs-selector-tag">-o</span> <span class="hljs-selector-tag">wide</span>
Â <span class="hljs-selector-tag">NAME</span> Â  Â  Â  Â  Â   <span class="hljs-selector-tag">READY</span> Â  <span class="hljs-selector-tag">STATUS</span> Â   <span class="hljs-selector-tag">RESTARTS</span> Â  <span class="hljs-selector-tag">AGE</span> Â  <span class="hljs-selector-tag">IP</span> Â  Â  Â  Â  Â  Â  Â  <span class="hljs-selector-tag">NODE</span> Â  Â  Â   <span class="hljs-selector-tag">NOMINATED</span> <span class="hljs-selector-tag">NODE</span> Â  <span class="hljs-selector-tag">READINESS</span> <span class="hljs-selector-tag">GATES</span>
Â <span class="hljs-selector-tag">sts-nginx-0</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  <span class="hljs-selector-tag">Running</span> Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">6s</span> Â   <span class="hljs-number">10.100</span><span class="hljs-selector-class">.203</span><span class="hljs-selector-class">.171</span> Â  <span class="hljs-selector-tag">worker52</span> Â  &lt;<span class="hljs-selector-tag">none</span>&gt; Â  Â  Â  Â  Â  &lt;<span class="hljs-selector-tag">none</span>&gt;
Â <span class="hljs-selector-tag">sts-nginx-1</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  <span class="hljs-selector-tag">Running</span> Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">4s</span> Â   <span class="hljs-number">10.100</span><span class="hljs-selector-class">.140</span><span class="hljs-selector-class">.99</span> Â   <span class="hljs-selector-tag">worker53</span> Â  &lt;<span class="hljs-selector-tag">none</span>&gt; Â  Â  Â  Â  Â  &lt;<span class="hljs-selector-tag">none</span>&gt;
Â <span class="hljs-selector-tag">sts-nginx-2</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  <span class="hljs-selector-tag">Running</span> Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">3s</span> Â   <span class="hljs-number">10.100</span><span class="hljs-selector-class">.160</span><span class="hljs-selector-class">.178</span> Â  <span class="hljs-selector-tag">master51</span> Â  &lt;<span class="hljs-selector-tag">none</span>&gt; Â  Â  Â  Â  Â  &lt;<span class="hljs-selector-tag">none</span>&gt;
Â â€‹
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">for</span> <span class="hljs-selector-tag">i</span> <span class="hljs-selector-tag">in</span> `<span class="hljs-selector-tag">seq</span> <span class="hljs-number">10</span>`; <span class="hljs-selector-tag">do</span> <span class="hljs-selector-tag">curl</span> <span class="hljs-number">10.200</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.200</span>; <span class="hljs-selector-tag">done</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â â€‹
Â â€‹
Â #éªŒè¯åç«¯å­˜å‚¨
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">kubectl</span> <span class="hljs-selector-tag">get</span> <span class="hljs-selector-tag">pvc</span> <span class="hljs-selector-tag">-l</span> <span class="hljs-selector-tag">app</span>=<span class="hljs-selector-tag">nginx</span>  | <span class="hljs-selector-tag">awk</span> '<span class="hljs-selector-tag">NR</span>&gt;=<span class="hljs-number">2</span>{<span class="hljs-selector-tag">print</span> $<span class="hljs-number">3</span>}' | <span class="hljs-selector-tag">xargs</span> <span class="hljs-selector-tag">kubectl</span> <span class="hljs-selector-tag">describe</span> <span class="hljs-selector-tag">pv</span>  | <span class="hljs-selector-tag">grep</span> <span class="hljs-selector-tag">VolumeHandle</span>
Â  Â   <span class="hljs-selector-tag">VolumeHandle</span>: Â  Â  Â <span class="hljs-number">10.0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.51</span><span class="hljs-selector-id">#data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span><span class="hljs-selector-id">#pvc-dafd74ce-50b0-475d-94e1-2a64512c62ed</span>##
Â  Â   <span class="hljs-selector-tag">VolumeHandle</span>: Â  Â  Â <span class="hljs-number">10.0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.51</span><span class="hljs-selector-id">#data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span><span class="hljs-selector-id">#pvc-a10dcb52-cd54-4d14-b666-068238359f0e</span>##
Â  Â   <span class="hljs-selector-tag">VolumeHandle</span>: Â  Â  Â <span class="hljs-number">10.0</span><span class="hljs-selector-class">.0</span><span class="hljs-selector-class">.51</span><span class="hljs-selector-id">#data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span><span class="hljs-selector-id">#pvc-8c84e2d8-3da8-4ecb-8902-e11bd8bd33b0</span>##
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># Â  Â  
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">cat</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span>/<span class="hljs-selector-tag">pvc-dafd74ce-50b0-475d-94e1-2a64512c62ed</span>/<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.html</span> 
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">shuai</span>
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># 
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">cat</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span>/<span class="hljs-selector-tag">pvc-a10dcb52-cd54-4d14-b666-068238359f0e</span>/<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.html</span> 
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">meng</span>
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># 
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># <span class="hljs-selector-tag">cat</span>  /<span class="hljs-selector-tag">data</span>/<span class="hljs-selector-tag">nfs-server</span>/<span class="hljs-selector-tag">sc01</span>/<span class="hljs-selector-tag">pvc-8c84e2d8-3da8-4ecb-8902-e11bd8bd33b0</span>/<span class="hljs-selector-tag">index</span><span class="hljs-selector-class">.html</span> 
Â <span class="hljs-selector-tag">shic</span> <span class="hljs-selector-tag">zhen</span> <span class="hljs-selector-tag">niu</span>
Â <span class="hljs-selector-attr">[root@master51 statefulsets]</span># 
Â â€‹
</code></pre>
<ul>
<li>statefuleset-updateStrategy.yaml</li>
</ul>
<pre><code class="hljs language-less" lang="less">Â apiVersion: v1
Â kind: Service
Â metadata:
Â   name: sts-headless
Â spec:
Â   ports:
Â  Â - port: 80
Â  Â   name: web
Â   clusterIP: <span class="hljs-attribute">None
Â   selector</span>:
Â  Â   <span class="hljs-attribute">app</span>: web
Â â€‹
Â ---
Â â€‹
Â <span class="hljs-attribute">apiVersion</span>: apps/v1
Â <span class="hljs-attribute">kind</span>: StatefulSet
Â <span class="hljs-attribute">metadata</span>:
Â   <span class="hljs-attribute">name</span>: sts-web
Â <span class="hljs-attribute">spec</span>:
Â  Â # æŒ‡å®šstsèµ„æºçš„æ›´æ–°ç­–ç•¥
Â   <span class="hljs-attribute">updateStrategy</span>:
Â  Â  Â # é…ç½®æ»šåŠ¨æ›´æ–°
Â  Â   <span class="hljs-attribute">rollingUpdate</span>:
Â  Â  Â  Â # å½“ç¼–å·å°äº<span class="hljs-number">3</span>æ—¶ä¸æ›´æ–°ï¼Œä¹Ÿæ˜¯å°±æ˜¯è¯´Podç¼–å·å¤§äºç­‰äº<span class="hljs-number">3</span>çš„Podä¼šè¢«æ›´æ–°
Â  Â  Â   <span class="hljs-attribute">partition</span>: <span class="hljs-number">3</span>
Â   <span class="hljs-attribute">selector</span>:
Â  Â   <span class="hljs-attribute">matchLabels</span>:
Â  Â  Â   <span class="hljs-attribute">app</span>: web
Â   <span class="hljs-attribute">serviceName</span>: sts-headless
Â   <span class="hljs-attribute">replicas</span>: <span class="hljs-number">5</span>
Â   <span class="hljs-attribute">template</span>:
Â  Â   <span class="hljs-attribute">metadata</span>:
Â  Â  Â   <span class="hljs-attribute">labels</span>:
Â  Â  Â  Â   <span class="hljs-attribute">app</span>: web
Â  Â   <span class="hljs-attribute">spec</span>:
Â  Â  Â   <span class="hljs-attribute">containers</span>:
Â  Â  Â  Â - <span class="hljs-attribute">name</span>: c1
Â  Â  Â  Â   <span class="hljs-attribute">ports</span>:
Â  Â  Â  Â  Â - <span class="hljs-attribute">containerPort</span>: <span class="hljs-number">80</span>
Â  Â  Â  Â  Â   <span class="hljs-attribute">name</span>: nginx    Â 
Â  Â  Â  Â   <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â ---
Â <span class="hljs-attribute">apiVersion</span>: v1
Â <span class="hljs-attribute">kind</span>: Service
Â <span class="hljs-attribute">metadata</span>:
Â   <span class="hljs-attribute">name</span>: sts-svc
Â <span class="hljs-attribute">spec</span>:
Â   <span class="hljs-attribute">selector</span>:
Â  Â  Â  <span class="hljs-attribute">app</span>: web
Â   <span class="hljs-attribute">ports</span>:
Â  Â - <span class="hljs-attribute">port</span>: <span class="hljs-number">80</span>
Â  Â   <span class="hljs-attribute">targetPort</span>: nginx
Â â€‹
Â â€‹
Â â€‹
Â #æµ‹è¯•éªŒè¯
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl get pods -o wide
Â NAME Â  Â  Â  Â  Â  Â  Â  Â   READY Â  STATUS Â   RESTARTS Â  AGE Â  IP Â  Â  Â  Â  Â  Â  Â  NODE Â  Â  Â   NOMINATED NODE Â  READINESS GATES
Â sts-web-<span class="hljs-number">0</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">30s</span> Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">203.183</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">1</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">28s</span> Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">140.102</span> Â  worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">2</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">28s</span> Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">160.180</span> Â  master51 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">3</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">26s</span> Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">203.185</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">4</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">25s</span> Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">140.93</span> Â   worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl get pods -l app=web -o yaml | grep <span class="hljs-string">"- image:"</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# sed -i <span class="hljs-string">'/nginx/s#1.19#1.20#'</span> statefuleset-updateStrategy.yaml 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# grep image statefuleset-updateStrategy.yaml 
Â  Â  Â  Â   <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.20</span>
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl apply -f statefuleset-updateStrategy.yaml
Â service/sts-headless unchanged
Â statefulset.apps/sts-web configured
Â service/sts-svc unchanged
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl get pods -o wide
Â NAME Â  Â  Â  Â  Â  Â  Â  Â   READY Â  STATUS Â   RESTARTS Â  AGE Â  Â  IP Â  Â  Â  Â  Â  Â  Â  NODE Â  Â  Â   NOMINATED NODE Â  READINESS GATES
Â sts-web-<span class="hljs-number">0</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">2</span>m23s Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">203.183</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">1</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">2</span>m21s Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">140.102</span> Â  worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">2</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">2</span>m21s Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">160.180</span> Â  master51 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">3</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">12s</span> Â  Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">203.174</span> Â  worker52 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â sts-web-<span class="hljs-number">4</span> Â  <span class="hljs-number">1</span>/<span class="hljs-number">1</span> Â  Â  Running Â  <span class="hljs-number">0</span> Â  Â  Â  Â   <span class="hljs-number">14s</span> Â  Â  <span class="hljs-number">10.100</span>.<span class="hljs-number">140.101</span> Â  worker53 Â  &lt;none&gt; Â  Â  Â  Â  Â  &lt;none&gt;
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
Â [root<span class="hljs-variable">@master51</span> statefulsets]# kubectl get pods -l app=web -o yaml | grep <span class="hljs-string">"- image:"</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.19</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.20</span>
Â  Â  Â - <span class="hljs-attribute">image</span>: <span class="hljs-attribute">nginx</span>:<span class="hljs-number">1.20</span>
Â [root<span class="hljs-variable">@master51</span> statefulsets]# 
</code></pre>
<h2 data-id="heading-19">Job/CronJobæ§åˆ¶å™¨</h2>
<h3 data-id="heading-20">å®šä½ä¸ä½œç”¨</h3>
<p>Jobç”¨äºè¿è¡Œä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œç¡®ä¿ä»»åŠ¡æˆåŠŸå®Œæˆã€‚CronJobåŸºäºæ—¶é—´è°ƒåº¦ï¼Œå‘¨æœŸæ€§åœ°è¿è¡ŒJobï¼Œé€‚ç”¨äºå®šæ—¶ä»»åŠ¡å’Œæ‰¹å¤„ç†ä½œä¸šã€‚</p>
<h3 data-id="heading-21">æ ¸å¿ƒç‰¹æ€§</h3>
<ul>
<li>
<p>Job</p>
<ul>
<li>ç¡®ä¿æŒ‡å®šæ•°é‡çš„PodæˆåŠŸå®Œæˆä»»åŠ¡åé€€å‡º</li>
<li>æ”¯æŒå¹¶è¡Œæ‰§è¡Œå’Œé¡ºåºæ§åˆ¶çš„ä»»åŠ¡å¤„ç†</li>
<li>æä¾›ä»»åŠ¡å¤±è´¥é‡è¯•å’Œè¶…æ—¶ç®¡ç†æœºåˆ¶</li>
</ul>
</li>
<li>
<p>CronJob</p>
<ul>
<li>åŸºäºæ—¶é—´è¡¨ï¼ˆCronè¡¨è¾¾å¼ï¼‰å‘¨æœŸæ€§åœ°åˆ›å»ºJob</li>
<li>ç¡®ä¿å®šæ—¶ä»»åŠ¡æŒ‰è®¡åˆ’è‡ªåŠ¨æ‰§è¡Œ</li>
<li>æä¾›ä»»åŠ¡å¹¶å‘ç­–ç•¥å’Œå†å²è®°å½•ç®¡ç†</li>
</ul>
</li>
</ul>
<h3 data-id="heading-22">ç¤ºä¾‹</h3>
<pre><code class="hljs language-yaml" lang="yaml">Â <span class="hljs-comment"># Jobç¤ºä¾‹</span>
Â <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
Â <span class="hljs-attr">kind:</span> <span class="hljs-string">Job</span>
Â <span class="hljs-attr">metadata:</span>
Â   <span class="hljs-attr">name:</span> <span class="hljs-string">data-processor</span>
Â <span class="hljs-attr">spec:</span>
Â   <span class="hljs-attr">completions:</span> <span class="hljs-number">5</span> Â  Â  <span class="hljs-comment"># éœ€è¦å®Œæˆçš„Podæ•°é‡ã€‚é»˜è®¤ä¸º1ï¼Œå½“æˆåŠŸå®Œæˆçš„Podæ•°é‡è¾¾åˆ°completionsæ—¶ï¼ŒJobæ‰ç®—å®Œæˆã€‚</span>
Â   <span class="hljs-attr">parallelism:</span> <span class="hljs-number">2</span> Â  Â  <span class="hljs-comment"># å¹¶è¡Œæ‰§è¡Œçš„Podæ•°é‡ã€‚æ§åˆ¶Jobçš„å¹¶è¡Œåº¦ï¼Œä»¥é¿å…åŒæ—¶å¯åŠ¨å¤ªå¤šPodé€ æˆèµ„æºè¿‡è½½ã€‚</span>
Â   <span class="hljs-attr">backoffLimit:</span> <span class="hljs-number">3</span> Â  Â <span class="hljs-comment"># ä»»åŠ¡å¼‚å¸¸å¤±è´¥é‡è¯•æ¬¡æ•°,é‡è¯•ä¹Ÿæ˜¯é‡æ–°åˆ›å»ºæ–°çš„Pod,å¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤æ¬¡æ•°æ˜¯6.</span>
Â   <span class="hljs-attr">template:</span>
Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â   <span class="hljs-attr">containers:</span>
Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">processor</span>
Â  Â  Â  Â   <span class="hljs-attr">image:</span> <span class="hljs-string">data-processor:latest</span>
Â  Â  Â  Â   <span class="hljs-attr">command:</span> [<span class="hljs-string">"python"</span>, <span class="hljs-string">"/app/process.py"</span>]
Â  Â  Â  Â   <span class="hljs-attr">resources:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">requests:</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">memory:</span> <span class="hljs-string">"64Mi"</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">cpu:</span> <span class="hljs-string">"250m"</span>
Â  Â  Â   <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">Never</span> Â <span class="hljs-comment"># Jobä¸èƒ½ä½¿ç”¨Always</span>
Â <span class="hljs-string">â€‹</span>
Â <span class="hljs-string">---</span>
Â <span class="hljs-comment"># CronJobç¤ºä¾‹</span>
Â <span class="hljs-attr">apiVersion:</span> <span class="hljs-string">batch/v1</span>
Â <span class="hljs-attr">kind:</span> <span class="hljs-string">CronJob</span>
Â <span class="hljs-attr">metadata:</span>
Â   <span class="hljs-attr">name:</span> <span class="hljs-string">daily-report</span>
Â <span class="hljs-attr">spec:</span>
Â   <span class="hljs-attr">schedule:</span> <span class="hljs-string">"0 2 * * *"</span> Â <span class="hljs-comment"># æ¯å¤©å‡Œæ™¨2ç‚¹æ‰§è¡Œ</span>
Â   <span class="hljs-attr">startingDeadlineSeconds:</span> <span class="hljs-number">600</span>
Â   <span class="hljs-attr">concurrencyPolicy:</span> <span class="hljs-string">Forbid</span> Â <span class="hljs-comment"># ç¦æ­¢å¹¶å‘æ‰§è¡Œ</span>
Â   <span class="hljs-attr">jobTemplate:</span>
Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â   <span class="hljs-attr">template:</span>
Â  Â  Â  Â   <span class="hljs-attr">spec:</span>
Â  Â  Â  Â  Â   <span class="hljs-attr">containers:</span>
Â  Â  Â  Â  Â   <span class="hljs-bullet">-</span> <span class="hljs-attr">name:</span> <span class="hljs-string">report-generator</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">image:</span> <span class="hljs-string">report-tool:latest</span>
Â  Â  Â  Â  Â  Â   <span class="hljs-attr">command:</span> [<span class="hljs-string">"python"</span>, <span class="hljs-string">"/app/generate_report.py"</span>]
Â  Â  Â  Â  Â   <span class="hljs-attr">restartPolicy:</span> <span class="hljs-string">OnFailure</span>
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ReactåŸºç¡€æ¡†æ¶æ­å»º8-axioså°è£…ä¸æœªå°è£…ï¼Œå®ç° API è¯·æ±‚ç®¡ç†ï¼šreact+router+redux+axios+Tailwind+webpack]]></title>    <link>https://juejin.cn/post/7592119218030215202</link>    <guid>https://juejin.cn/post/7592119218030215202</guid>    <pubDate>2026-01-07T01:27:51.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592119218030215202" data-draft-id="7592089325913178112" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ReactåŸºç¡€æ¡†æ¶æ­å»º8-axioså°è£…ä¸æœªå°è£…ï¼Œå®ç° API è¯·æ±‚ç®¡ç†ï¼šreact+router+redux+axios+Tailwind+webpack"/> <meta itemprop="keywords" content="React.js,å‰ç«¯æ¡†æ¶,å‰ç«¯å·¥ç¨‹åŒ–"/> <meta itemprop="datePublished" content="2026-01-07T01:27:51.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Eadia"/> <meta itemprop="url" content="https://juejin.cn/user/1591748565671614"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ReactåŸºç¡€æ¡†æ¶æ­å»º8-axioså°è£…ä¸æœªå°è£…ï¼Œå®ç° API è¯·æ±‚ç®¡ç†ï¼šreact+router+redux+axios+Tailwind+webpack
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1591748565671614/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Eadia
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:27:51.000Z" title="Wed Jan 07 2026 01:27:51 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><code>npm install axios</code></p>
<p>ä¸€ã€apiåŸºç¡€ä½¿ç”¨ï¼ˆæœªå°è£…ï¼‰</p>
<p>1ã€åœ¨ src/api/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ productService.jsï¼Œç”¨äºç®¡ç†æ‰€æœ‰çš„ API è¯·æ±‚ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// è®¾ç½®åŸºç¡€ URL</span>
<span class="hljs-keyword">const</span> apiClient = axios.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'/'</span>, <span class="hljs-comment">// ä½¿ç”¨ç›¸å¯¹è·¯å¾„æ¥è®¿é—® public ç›®å½•ä¸­çš„æ–‡ä»¶</span>
    <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
});

<span class="hljs-comment">// è·å–äº§å“åˆ—è¡¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">fetchProducts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> apiClient.<span class="hljs-title function_">get</span>(<span class="hljs-string">'/product.json'</span>); <span class="hljs-comment">// ä» public ç›®å½•è·å– JSON æ–‡ä»¶</span>
    <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>.<span class="hljs-property">products</span>; <span class="hljs-comment">// è¿”å›æ•°æ®</span>
};

<span class="hljs-comment">// æ·»åŠ æ–°äº§å“ï¼ˆæ¨¡æ‹Ÿï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createProduct</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">product</span>) =&gt; {
    <span class="hljs-keyword">return</span> product; <span class="hljs-comment">// ç›´æ¥è¿”å›æ–°äº§å“</span>
};

<span class="hljs-comment">// åˆ é™¤äº§å“ï¼ˆæ¨¡æ‹Ÿï¼‰</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">deleteProduct</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id</span>) =&gt; {
    <span class="hljs-keyword">return</span> id; <span class="hljs-comment">// è¿”å›åˆ é™¤çš„äº§å“ ID</span>
};
</code></pre>
<p>æ›´æ–° Redux Slice</p>
<p>åœ¨ productSlice.js ä¸­ï¼Œå¯ä»¥æ·»åŠ å¼‚æ­¥æ“ä½œæ¥å¤„ç† API è¯·æ±‚ã€‚ä½¿ç”¨ Redux Toolkit çš„ createAsyncThunk æ¥åˆ›å»ºå¼‚æ­¥æ“ä½œã€‚</p>
<p>æ›´æ”¹producSlice.js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">//src/features/Produc/producSlice.js</span>

<span class="hljs-keyword">import</span> { createSlice, createAsyncThunk } <span class="hljs-keyword">from</span> <span class="hljs-string">'@reduxjs/toolkit'</span>;
<span class="hljs-keyword">import</span> { fetchProducts, createProduct, deleteProduct } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../api/api'</span>; <span class="hljs-comment">// å¼•å…¥ API è¯·æ±‚</span>

<span class="hljs-comment">// å¼‚æ­¥è·å–äº§å“åˆ—è¡¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchProductsAsync = <span class="hljs-title function_">createAsyncThunk</span>(<span class="hljs-string">'product/fetchProducts'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchProducts</span>(); <span class="hljs-comment">// è°ƒç”¨ API è·å–äº§å“</span>
    <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// è¿”å›äº§å“æ•°æ®</span>
});

<span class="hljs-comment">// å¼‚æ­¥æ·»åŠ æ–°äº§å“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addProductAsync = <span class="hljs-title function_">createAsyncThunk</span>(<span class="hljs-string">'product/addProduct'</span>, <span class="hljs-keyword">async</span> (product) =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createProduct</span>(product);
    <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// è¿”å›æ–°äº§å“</span>
});

<span class="hljs-comment">// å¼‚æ­¥åˆ é™¤äº§å“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> removeProductAsync = <span class="hljs-title function_">createAsyncThunk</span>(<span class="hljs-string">'product/removeProduct'</span>, <span class="hljs-keyword">async</span> (id) =&gt; {
    <span class="hljs-keyword">await</span> <span class="hljs-title function_">deleteProduct</span>(id);
    <span class="hljs-keyword">return</span> id; <span class="hljs-comment">// è¿”å›åˆ é™¤çš„äº§å“ ID</span>
});

<span class="hljs-keyword">const</span> productSlice = <span class="hljs-title function_">createSlice</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">'product'</span>,
    <span class="hljs-attr">initialState</span>: {
        <span class="hljs-attr">products</span>: [], <span class="hljs-comment">// åˆå§‹ä¸ºç©º</span>
        <span class="hljs-attr">status</span>: <span class="hljs-string">'idle'</span>, <span class="hljs-comment">// çŠ¶æ€ç®¡ç†</span>
    },
    <span class="hljs-attr">reducers</span>: {},
    <span class="hljs-attr">extraReducers</span>: <span class="hljs-function">(<span class="hljs-params">builder</span>) =&gt;</span> {
        builder
            .<span class="hljs-title function_">addCase</span>(fetchProductsAsync.<span class="hljs-property">fulfilled</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
                state.<span class="hljs-property">products</span> = action.<span class="hljs-property">payload</span>; <span class="hljs-comment">// è®¾ç½®äº§å“åˆ—è¡¨</span>
            })
            .<span class="hljs-title function_">addCase</span>(addProductAsync.<span class="hljs-property">fulfilled</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
                state.<span class="hljs-property">products</span>.<span class="hljs-title function_">push</span>(action.<span class="hljs-property">payload</span>); <span class="hljs-comment">// æ·»åŠ æ–°äº§å“</span>
            })
            .<span class="hljs-title function_">addCase</span>(removeProductAsync.<span class="hljs-property">fulfilled</span>, <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> {
                state.<span class="hljs-property">products</span> = state.<span class="hljs-property">products</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">product</span> =&gt;</span> product.<span class="hljs-property">id</span> !== action.<span class="hljs-property">payload</span>); <span class="hljs-comment">// æ ¹æ® ID ç§»é™¤äº§å“</span>
            });
    },
});

<span class="hljs-comment">// å¯¼å‡º reducer</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> productSlice.<span class="hljs-property">reducer</span>;
</code></pre>
<p>æ›´æ–°ç»„ä»¶ä»¥ä½¿ç”¨ API</p>
<p>åœ¨ ProductList.jsx å’Œ FeedbackForm.jsx ä¸­ï¼Œæ‚¨éœ€è¦ä½¿ç”¨è¿™äº›å¼‚æ­¥æ“ä½œæ¥è·å–å’Œæ·»åŠ äº§å“ã€‚</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// src/views/Product/ProductList.jsx </span>

<span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span>, { useEffect } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> { useSelector, useDispatch } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-redux'</span>;
<span class="hljs-keyword">import</span> { fetchProductsAsync, removeProductAsync } <span class="hljs-keyword">from</span> <span class="hljs-string">'../../features/Product/productSlice'</span>;


<span class="hljs-keyword">const</span> <span class="hljs-title function_">ProductList</span> = (<span class="hljs-params"/>) =&gt; {
    <span class="hljs-keyword">const</span> products = <span class="hljs-title function_">useSelector</span>(<span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">product</span>.<span class="hljs-property">products</span>);
    <span class="hljs-keyword">const</span> dispatch = <span class="hljs-title function_">useDispatch</span>();

    <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> {
        <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">fetchProductsAsync</span>()); <span class="hljs-comment">// è·å–äº§å“åˆ—è¡¨</span>
    }, [dispatch]);

    <span class="hljs-keyword">const</span> <span class="hljs-title function_">handleRemoveProduct</span> = (<span class="hljs-params">id</span>) =&gt; {
        <span class="hljs-title function_">dispatch</span>(<span class="hljs-title function_">removeProductAsync</span>(id)); <span class="hljs-comment">// åˆ é™¤</span>
    };

    <span class="hljs-keyword">return</span> (
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mt-10"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"font-semibold"</span>&gt;</span>äº§å“åˆ—è¡¨<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"list-disc pl-5"</span>&gt;</span>
                {products.length &gt; 0 ? (
                    products.map(product =&gt; (
                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{product.id}</span> <span class="hljs-attr">className</span>=<span class="hljs-string">"mb-1 flex justify-between items-center"</span>&gt;</span>
                            {product.name}
                            <span class="hljs-tag">&lt;<span class="hljs-name">button</span>
                                <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleRemoveProduct(product.id)}
                                className="ml-4 text-red-500 hover:text-red-700"
                            &gt;
                                åˆ é™¤
                            <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                    ))
                ) : (
                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span>æ²¡æœ‰äº§å“å¯æ˜¾ç¤º<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
                )}
            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
    );
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title class_">ProductList</span>;
</code></pre>
<p>äºŒã€å°è£…api</p>
<p>1ã€åœ¨ src/api/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶api.js</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">'axios'</span>;

<span class="hljs-comment">// åˆ›å»º Axios å®ä¾‹</span>
<span class="hljs-keyword">const</span> apiClient = axios.<span class="hljs-title function_">create</span>({
    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">'http://localhost:3000'</span>, <span class="hljs-comment">// ä½¿ç”¨ json-server çš„åŸºç¡€è·¯å¾„</span>
    <span class="hljs-attr">timeout</span>: <span class="hljs-number">10000</span>, <span class="hljs-comment">// è¶…æ—¶æ—¶é—´</span>
    <span class="hljs-attr">headers</span>: {
        <span class="hljs-string">'Content-Type'</span>: <span class="hljs-string">'application/json'</span>,
    },
});

<span class="hljs-comment">// è¯·æ±‚æ‹¦æˆªå™¨</span>
apiClient.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(
    <span class="hljs-function">(<span class="hljs-params">config</span>) =&gt;</span> {
        <span class="hljs-comment">// åœ¨è¯·æ±‚å‘é€ä¹‹å‰åšäº›ä»€ä¹ˆï¼Œä¾‹å¦‚æ·»åŠ  token</span>
        <span class="hljs-keyword">const</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">'token'</span>); <span class="hljs-comment">// å‡è®¾ token å­˜å‚¨åœ¨ localStorage</span>

        <span class="hljs-comment">// æ£€æŸ¥è¯·æ±‚çš„ URL æ˜¯å¦éœ€è¦ token</span>
        <span class="hljs-keyword">const</span> noAuthRequired = [<span class="hljs-string">'/login'</span>, <span class="hljs-string">'/register'</span>]; <span class="hljs-comment">// ä¸éœ€è¦ token çš„è¯·æ±‚åˆ—è¡¨</span>

        <span class="hljs-keyword">if</span> (token &amp;&amp; !noAuthRequired.<span class="hljs-title function_">some</span>(<span class="hljs-function"><span class="hljs-params">url</span> =&gt;</span> config.<span class="hljs-property">url</span>.<span class="hljs-title function_">startsWith</span>(url))) {
            config.<span class="hljs-property">headers</span>[<span class="hljs-string">'Authorization'</span>] = <span class="hljs-string">`Bearer <span class="hljs-subst">${token}</span>`</span>; <span class="hljs-comment">// æ·»åŠ  token</span>
        }
        <span class="hljs-keyword">return</span> config;
    },
    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†è¯·æ±‚é”™è¯¯</span>
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }
);

<span class="hljs-comment">// å“åº”æ‹¦æˆªå™¨</span>
apiClient.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(
    <span class="hljs-function">(<span class="hljs-params">response</span>) =&gt;</span> {
        <span class="hljs-comment">// ç»Ÿä¸€å¤„ç†è¿”å›æ•°æ®</span>
        <span class="hljs-keyword">return</span> response.<span class="hljs-property">data</span>; <span class="hljs-comment">// ç›´æ¥è¿”å›æ•°æ®</span>
    },
    <span class="hljs-function">(<span class="hljs-params">error</span>) =&gt;</span> {
        <span class="hljs-comment">// å¤„ç†é”™è¯¯</span>
        <span class="hljs-keyword">const</span> { response } = error;
        <span class="hljs-keyword">if</span> (response) {
            <span class="hljs-comment">// æ ¹æ® HTTP çŠ¶æ€ç å¤„ç†ä¸åŒçš„é”™è¯¯</span>
            <span class="hljs-keyword">switch</span> (response.<span class="hljs-property">status</span>) {
                <span class="hljs-keyword">case</span> <span class="hljs-number">401</span>:
                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æœªæˆæƒï¼Œè¯·ç™»å½•ï¼'</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">404</span>:
                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'è¯·æ±‚çš„èµ„æºæœªæ‰¾åˆ°ï¼'</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-keyword">case</span> <span class="hljs-number">500</span>:
                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'æœåŠ¡å™¨é”™è¯¯ï¼Œè¯·ç¨åå†è¯•ï¼'</span>);
                    <span class="hljs-keyword">break</span>;
                <span class="hljs-attr">default</span>:
                    <span class="hljs-title function_">alert</span>(<span class="hljs-string">'å‘ç”Ÿé”™è¯¯ï¼Œè¯·é‡è¯•ï¼'</span>);
            }
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-title function_">alert</span>(<span class="hljs-string">'ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ï¼'</span>);
        }
        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(error);
    }
);

<span class="hljs-comment">// å°è£…è¯·æ±‚æ–¹æ³•</span>
<span class="hljs-keyword">const</span> api = {
    <span class="hljs-attr">get</span>: <span class="hljs-function">(<span class="hljs-params">url, params</span>) =&gt;</span> apiClient.<span class="hljs-title function_">get</span>(url, { params }),
    <span class="hljs-attr">post</span>: <span class="hljs-function">(<span class="hljs-params">url, data</span>) =&gt;</span> apiClient.<span class="hljs-title function_">post</span>(url, data),
    <span class="hljs-attr">put</span>: <span class="hljs-function">(<span class="hljs-params">url, data</span>) =&gt;</span> apiClient.<span class="hljs-title function_">put</span>(url, data),
    <span class="hljs-attr">delete</span>: <span class="hljs-function">(<span class="hljs-params">url</span>) =&gt;</span> apiClient.<span class="hljs-title function_">delete</span>(url),
};

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> api;
</code></pre>
<p>ä½¿ç”¨ï¼š</p>
<pre><code class="hljs language-dart" lang="dart"><span class="hljs-comment">// å¼‚æ­¥è·å–äº§å“åˆ—è¡¨</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> fetchProductsAsync = createAsyncThunk(<span class="hljs-string">'product/fetchProducts'</span>, <span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.<span class="hljs-keyword">get</span>(<span class="hljs-string">'/products'</span>); <span class="hljs-comment">// ä½¿ç”¨å°è£…çš„ GET æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// è¿”å›äº§å“æ•°æ®</span>
});

<span class="hljs-comment">// å¼‚æ­¥æ·»åŠ æ–°äº§å“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> addProductAsync = createAsyncThunk(<span class="hljs-string">'product/addProduct'</span>, <span class="hljs-keyword">async</span> (product) =&gt; {
    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> api.post(<span class="hljs-string">'/products'</span>, product); <span class="hljs-comment">// ä½¿ç”¨å°è£…çš„ POST æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> response; <span class="hljs-comment">// è¿”å›æ–°äº§å“</span>
});

<span class="hljs-comment">// å¼‚æ­¥åˆ é™¤äº§å“</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> removeProductAsync = createAsyncThunk(<span class="hljs-string">'product/removeProduct'</span>, <span class="hljs-keyword">async</span> (id) =&gt; {
    <span class="hljs-keyword">await</span> api.delete(`/products/${id}`); <span class="hljs-comment">// ä½¿ç”¨å°è£…çš„ DELETE æ–¹æ³•</span>
    <span class="hljs-keyword">return</span> id; <span class="hljs-comment">// è¿”å›åˆ é™¤çš„äº§å“ ID</span>
});
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SSE Connect æ•°æ®è§£æè¯¦è§£]]></title>    <link>https://juejin.cn/post/7592059801884803115</link>    <guid>https://juejin.cn/post/7592059801884803115</guid>    <pubDate>2026-01-06T19:45:37.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592059801884803115" data-draft-id="7592088192516292651" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SSE  Connect æ•°æ®è§£æè¯¦è§£"/> <meta itemprop="keywords" content="iOS"/> <meta itemprop="datePublished" content="2026-01-06T19:45:37.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å‘é‡è¶…å¤šçš„å¥³ç¨‹åºåª›"/> <meta itemprop="url" content="https://juejin.cn/user/817692381560461"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SSE  Connect æ•°æ®è§£æè¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/817692381560461/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å‘é‡è¶…å¤šçš„å¥³ç¨‹åºåª›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T19:45:37.000Z" title="Tue Jan 06 2026 19:45:37 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    4
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‰è¨€</h2>
<p><strong>SSEï¼ˆServer-Sent Eventsï¼‰</strong> æ˜¯ä¸€ç§åŸºäº HTTP çš„æœåŠ¡å™¨å•å‘æ¨é€æŠ€æœ¯ã€‚ç›¸æ¯” WebSocket çš„åŒå‘é€šä¿¡ï¼ŒSSE æ›´è½»é‡ã€å®ç°æ›´ç®€å•ï¼Œéå¸¸é€‚åˆæœåŠ¡å™¨å‘å®¢æˆ·ç«¯æŒç»­æ¨é€æ•°æ®çš„åœºæ™¯ã€‚ChatGPTã€Claude ç­‰ AI äº§å“éƒ½ä½¿ç”¨ SSE æ¥å®ç°æµå¼è¾“å‡ºã€‚</p>
<p>æœ¬æ–‡ä»¥ iOS å®¢æˆ·ç«¯å®ç°ä¸ºä¾‹ï¼Œè¯¦ç»†è®²è§£ SSE æ•°æ®çš„æ¥æ”¶ä¸è§£æè¿‡ç¨‹ã€‚</p>
<hr/>
<h2 data-id="heading-1">ä¸€ã€å®Œæ•´ç¤ºä¾‹ï¼šä¸€ä¸ª SSE äº‹ä»¶ä»å‘é€åˆ°æ¥æ”¶çš„å…¨è¿‡ç¨‹</h2>
<h3 data-id="heading-2">æœåŠ¡å™¨å‘é€çš„æ•°æ®</h3>
<pre><code class="hljs language-vbnet" lang="vbnet"><span class="hljs-symbol">event:</span> chunk
<span class="hljs-symbol">id:</span> <span class="hljs-number">1</span>
<span class="hljs-symbol">data:</span> {<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello"</span>}

</code></pre>
<blockquote>
<p>âš ï¸ æ³¨æ„ï¼šæœ€åæœ‰ä¸€ä¸ª<strong>ç©ºè¡Œ</strong>ï¼Œè¿™æ˜¯äº‹ä»¶ç»“æŸçš„æ ‡å¿—ï¼</p>
</blockquote>
<hr/>
<h2 data-id="heading-3">ç¬¬ä¸€æ­¥ï¼šæœåŠ¡å™¨å‘é€ï¼Œç½‘ç»œä¼ è¾“</h2>
<p>æœåŠ¡å™¨å‘é€çš„åŸå§‹å­—èŠ‚æµï¼š</p>
<pre><code class="hljs language-less" lang="less"><span class="hljs-selector-tag">e</span> <span class="hljs-selector-tag">v</span> <span class="hljs-selector-tag">e</span> <span class="hljs-selector-tag">n</span> <span class="hljs-selector-tag">t</span> :   <span class="hljs-selector-tag">c</span> <span class="hljs-selector-tag">h</span> <span class="hljs-selector-tag">u</span> <span class="hljs-selector-tag">n</span> <span class="hljs-selector-tag">k</span> \<span class="hljs-selector-tag">n</span> <span class="hljs-selector-tag">i</span> <span class="hljs-selector-tag">d</span> :   <span class="hljs-number">1</span> \<span class="hljs-selector-tag">n</span> <span class="hljs-selector-tag">d</span> <span class="hljs-selector-tag">a</span> <span class="hljs-selector-tag">t</span> <span class="hljs-selector-tag">a</span> :   { . . . } \<span class="hljs-selector-tag">n</span> \<span class="hljs-selector-tag">n</span>
</code></pre>
<p><strong>é—®é¢˜</strong>ï¼šç½‘ç»œä¼ è¾“æ—¶ï¼Œæ•°æ®å¯èƒ½è¢«åˆ†æˆå¤šä¸ªå—åˆ°è¾¾å®¢æˆ·ç«¯ã€‚</p>
<p>å‡è®¾ç½‘ç»œæŠŠæ•°æ®åˆ†æˆäº† 3 å—ï¼š</p>





















<table><thead><tr><th>æ•°æ®å—</th><th>å†…å®¹</th></tr></thead><tbody><tr><td>å— 1</td><td><code>"event: chu"</code></td></tr><tr><td>å— 2</td><td><code>"nk\nid: 1\nda"</code></td></tr><tr><td>å— 3</td><td><code>"ta: {\"content\":\"Hello\"}\n\n"</code></td></tr></tbody></table>
<hr/>
<h2 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šè¡Œè§£æå™¨å¤„ç†ï¼ˆOKGrowthUTF8LineParserï¼‰</h2>
<h3 data-id="heading-5">2.1 æ”¶åˆ°å— 1ï¼š<code>"event: chu"</code></h3>
<pre><code class="hljs language-arduino" lang="arduino">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: <span class="hljs-string">"event: chu"</span>                                         â”‚
â”‚                                                            â”‚
â”‚ å¤„ç†è¿‡ç¨‹:                                                   â”‚
â”‚   <span class="hljs-number">1.</span> ç¼“å†²åŒºå½“å‰ä¸ºç©º: <span class="hljs-string">""</span>                                     â”‚
â”‚   <span class="hljs-number">2.</span> åˆå¹¶: <span class="hljs-string">""</span> + <span class="hljs-string">"event: chu"</span> = <span class="hljs-string">"event: chu"</span>                â”‚
â”‚   <span class="hljs-number">3.</span> æ‰«ææ¢è¡Œç¬¦: æ²¡æ‰¾åˆ° \n                                  â”‚
â”‚   <span class="hljs-number">4.</span> æ²¡æœ‰å®Œæ•´è¡Œï¼Œå…¨éƒ¨å­˜å…¥ç¼“å†²åŒº                              â”‚
â”‚                                                            â”‚
â”‚ ç¼“å†²åŒº: <span class="hljs-string">"event: chu"</span>                                       â”‚
â”‚ è¾“å‡º: []  â† ç©ºæ•°ç»„ï¼Œæ²¡æœ‰å®Œæ•´è¡Œ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-6">2.2 æ”¶åˆ°å— 2ï¼š<code>"nk\nid: 1\nda"</code></h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span> è¾“å…¥: <span class="hljs-string">"nk<span class="hljs-subst">\n</span>id: 1<span class="hljs-subst">\n</span>da"</span>                                      <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> å¤„ç†è¿‡ç¨‹:                                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">1</span>. ç¼“å†²åŒºå½“å‰: <span class="hljs-string">"event: chu"</span>                               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">2</span>. åˆå¹¶: <span class="hljs-string">"event: chu"</span> <span class="hljs-operator">+</span> <span class="hljs-string">"nk<span class="hljs-subst">\n</span>id: 1<span class="hljs-subst">\n</span>da"</span>                  <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>         <span class="hljs-operator">=</span> <span class="hljs-string">"event: chunk<span class="hljs-subst">\n</span>id: 1<span class="hljs-subst">\n</span>da"</span>                        <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">3</span>. æ‰«ææ¢è¡Œç¬¦:                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      <span class="hljs-operator">-</span> ä½ç½® <span class="hljs-number">12</span> æ‰¾åˆ° \n <span class="hljs-operator">â†’</span> æå– <span class="hljs-string">"event: chunk"</span>               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      <span class="hljs-operator">-</span> ä½ç½® <span class="hljs-number">18</span> æ‰¾åˆ° \n <span class="hljs-operator">â†’</span> æå– <span class="hljs-string">"id: 1"</span>                      <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      <span class="hljs-operator">-</span> <span class="hljs-string">"da"</span> åé¢æ²¡æœ‰ \nï¼Œå­˜å…¥ç¼“å†²åŒº                         <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> ç¼“å†²åŒº: <span class="hljs-string">"da"</span>                                               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> è¾“å‡º: [<span class="hljs-string">"event: chunk"</span>, <span class="hljs-string">"id: 1"</span>]                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h3 data-id="heading-7">2.3 æ”¶åˆ°å— 3ï¼š<code>"ta: {\"content\":\"Hello\"}\n\n"</code></h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span> è¾“å…¥: <span class="hljs-string">"ta: {<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>                    <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> å¤„ç†è¿‡ç¨‹:                                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">1</span>. ç¼“å†²åŒºå½“å‰: <span class="hljs-string">"da"</span>                                       <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">2</span>. åˆå¹¶: <span class="hljs-string">"da"</span> <span class="hljs-operator">+</span> <span class="hljs-string">"ta: {...}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>                          <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>         <span class="hljs-operator">=</span> <span class="hljs-string">"data: {<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>              <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">3</span>. æ‰«ææ¢è¡Œç¬¦:                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      <span class="hljs-operator">-</span> ä½ç½® <span class="hljs-number">27</span> æ‰¾åˆ° \n <span class="hljs-operator">â†’</span> æå– <span class="hljs-string">"data: {...}"</span>                <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      <span class="hljs-operator">-</span> ä½ç½® <span class="hljs-number">28</span> æ‰¾åˆ° \n <span class="hljs-operator">â†’</span> æå– <span class="hljs-string">""</span>  <span class="hljs-operator">â†</span> ç©ºè¡Œï¼                  <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> ç¼“å†²åŒº: <span class="hljs-string">""</span>  <span class="hljs-operator">â†</span> æ¸…ç©º                                         <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> è¾“å‡º: [<span class="hljs-string">"data: {<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}"</span>, <span class="hljs-string">""</span>]                <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h3 data-id="heading-8">2.4 è¡Œè§£æå™¨æ€»ç»“</h3>
<p>ç»è¿‡ 3 æ¬¡æ•°æ®å—å¤„ç†ï¼Œè¡Œè§£æå™¨ä¾æ¬¡è¾“å‡ºï¼š</p>





















<table><thead><tr><th>æ¬¡åº</th><th>è¾“å‡ºçš„å®Œæ•´è¡Œ</th></tr></thead><tbody><tr><td>å— 1 å</td><td><code>[]</code> (æ— )</td></tr><tr><td>å— 2 å</td><td><code>["event: chunk", "id: 1"]</code></td></tr><tr><td>å— 3 å</td><td><code>["data: {...}", ""]</code></td></tr></tbody></table>
<p><strong>åˆè®¡å¾—åˆ° 4 è¡Œ</strong>: <code>"event: chunk"</code>, <code>"id: 1"</code>, <code>"data: {...}"</code>, <code>""</code></p>
<hr/>
<h2 data-id="heading-9">ç¬¬ä¸‰æ­¥ï¼šäº‹ä»¶è§£æå™¨å¤„ç†ï¼ˆOKGrowthEventParserï¼‰</h2>
<p>SSEClient å°†è¡Œè§£æå™¨è¾“å‡ºçš„æ¯ä¸€è¡Œï¼Œä¾æ¬¡ä¼ ç»™äº‹ä»¶è§£æå™¨ã€‚</p>
<h3 data-id="heading-10">3.1 è§£æç¬¬ 1 è¡Œï¼š<code>"event: chunk"</code></h3>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: "event: chunk"                                       â”‚
â”‚                                                            â”‚
â”‚ å¤„ç†è¿‡ç¨‹:                                                   â”‚
â”‚   1. è¡Œé•¿åº¦ &gt; 0ï¼Œä¸æ˜¯ç©ºè¡Œ                                   â”‚
â”‚   2. æŸ¥æ‰¾å†’å·ä½ç½®: 5                                        â”‚
â”‚   3. å­—æ®µå = "event"                                      â”‚
â”‚   4. å­—æ®µå€¼ = "chunk" (å†’å·åé¢ï¼Œè·³è¿‡ç©ºæ ¼)                   â”‚
â”‚   5. å­—æ®µåæ˜¯ "event"ï¼Œå­˜å‚¨ eventType                       â”‚
â”‚                                                            â”‚
â”‚ å½“å‰çŠ¶æ€:                                                   â”‚
â”‚   <span class="hljs-attr">eventType</span> = <span class="hljs-string">"chunk"</span>  âœ“                                   â”‚
â”‚   <span class="hljs-attr">eventId</span>   = <span class="hljs-string">""</span>                                           â”‚
â”‚   <span class="hljs-attr">data</span>      = <span class="hljs-string">""</span>                                           â”‚
â”‚                                                            â”‚
â”‚ åŠ¨ä½œ: ç»§ç»­ç­‰å¾…ä¸‹ä¸€è¡Œ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-11">3.2 è§£æç¬¬ 2 è¡Œï¼š<code>"id: 1"</code></h3>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: "id: 1"                                              â”‚
â”‚                                                            â”‚
â”‚ å¤„ç†è¿‡ç¨‹:                                                   â”‚
â”‚   1. è¡Œé•¿åº¦ &gt; 0ï¼Œä¸æ˜¯ç©ºè¡Œ                                   â”‚
â”‚   2. æŸ¥æ‰¾å†’å·ä½ç½®: 2                                        â”‚
â”‚   3. å­—æ®µå = "id"                                         â”‚
â”‚   4. å­—æ®µå€¼ = "1"                                          â”‚
â”‚   5. å­—æ®µåæ˜¯ "id"ï¼Œå­˜å‚¨ eventId                            â”‚
â”‚                                                            â”‚
â”‚ å½“å‰çŠ¶æ€:                                                   â”‚
â”‚   <span class="hljs-attr">eventType</span> = <span class="hljs-string">"chunk"</span>  âœ“                                   â”‚
â”‚   <span class="hljs-attr">eventId</span>   = <span class="hljs-string">"1"</span>      âœ“                                   â”‚
â”‚   <span class="hljs-attr">data</span>      = <span class="hljs-string">""</span>                                           â”‚
â”‚                                                            â”‚
â”‚ åŠ¨ä½œ: ç»§ç»­ç­‰å¾…ä¸‹ä¸€è¡Œ                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<h3 data-id="heading-12">3.3 è§£æç¬¬ 3 è¡Œï¼š<code>"data: {\"content\":\"Hello\"}"</code></h3>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span> è¾“å…¥: <span class="hljs-string">"data: {<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}"</span>                      <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> å¤„ç†è¿‡ç¨‹:                                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">1</span>. è¡Œé•¿åº¦ <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>ï¼Œä¸æ˜¯ç©ºè¡Œ                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">2</span>. æŸ¥æ‰¾å†’å·ä½ç½®: <span class="hljs-number">4</span>                                        <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">3</span>. å­—æ®µå <span class="hljs-operator">=</span> <span class="hljs-string">"data"</span>                                       <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">4</span>. å­—æ®µå€¼ <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}"</span>                    <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   <span class="hljs-number">5</span>. å­—æ®µåæ˜¯ <span class="hljs-string">"data"</span>ï¼Œè¿½åŠ åˆ° data                           <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>      (å½“å‰ data ä¸ºç©ºï¼Œç›´æ¥èµ‹å€¼)                              <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> å½“å‰çŠ¶æ€:                                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   eventType <span class="hljs-operator">=</span> <span class="hljs-string">"chunk"</span>                    <span class="hljs-operator">âœ“</span>                 <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   eventId   <span class="hljs-operator">=</span> <span class="hljs-string">"1"</span>                        <span class="hljs-operator">âœ“</span>                 <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>   data      <span class="hljs-operator">=</span> <span class="hljs-string">"{<span class="hljs-subst">\"</span>content<span class="hljs-subst">\"</span>:<span class="hljs-subst">\"</span>Hello<span class="hljs-subst">\"</span>}"</span>  <span class="hljs-operator">âœ“</span>                 <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span> åŠ¨ä½œ: ç»§ç»­ç­‰å¾…ä¸‹ä¸€è¡Œ                                        <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
</code></pre>
<h3 data-id="heading-13">3.4 è§£æç¬¬ 4 è¡Œï¼š<code>""</code> (ç©ºè¡Œ) âš¡</h3>
<pre><code class="hljs language-ini" lang="ini">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¾“å…¥: ""  (ç©ºè¡Œ)                                           â”‚
â”‚                                                            â”‚
â”‚ å¤„ç†è¿‡ç¨‹:                                                   â”‚
â”‚   1. è¡Œé•¿åº¦ == 0ï¼Œæ˜¯ç©ºè¡Œï¼                                  â”‚
â”‚   2. âš¡ ç©ºè¡Œè§¦å‘äº‹ä»¶åˆ†å‘ï¼                                   â”‚
â”‚                                                            â”‚
â”‚ å½“å‰çŠ¶æ€ (å³å°†åˆ†å‘):                                        â”‚
â”‚   <span class="hljs-attr">eventType</span> = <span class="hljs-string">"chunk"</span>                                      â”‚
â”‚   <span class="hljs-attr">eventId</span>   = <span class="hljs-string">"1"</span>                                          â”‚
â”‚   <span class="hljs-attr">data</span>      = <span class="hljs-string">"{\"content\":\"Hello\"}"</span>                    â”‚
â”‚                                                            â”‚
â”‚ æ‰§è¡Œ dispatchEvent():                                      â”‚
â”‚   1. è°ƒç”¨å›è°ƒ: onEvent("chunk", "1", "{...}")              â”‚
â”‚   2. é‡ç½®çŠ¶æ€:                                              â”‚
â”‚      <span class="hljs-attr">eventType</span> = <span class="hljs-string">""</span>                                        â”‚
â”‚      <span class="hljs-attr">eventId</span>   = <span class="hljs-string">""</span>                                        â”‚
â”‚      <span class="hljs-attr">data</span>      = <span class="hljs-string">""</span>                                        â”‚
â”‚                                                            â”‚
â”‚ åŠ¨ä½œ: ğŸ¯ è§¦å‘å›è°ƒï¼å‡†å¤‡è§£æä¸‹ä¸€ä¸ªäº‹ä»¶                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-14">ç¬¬å››æ­¥ï¼šäº‹ä»¶åˆ†å‘ï¼Œå›è°ƒä¸šåŠ¡å±‚</h2>
<pre><code class="hljs language-scss" lang="scss">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å›è°ƒé“¾                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  EventParser<span class="hljs-selector-class">.dispatchEvent</span>()                               â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  <span class="hljs-built_in">onEvent</span>("chunk", "<span class="hljs-number">1</span>", "{\"content\":\"Hello\"}")  â”‚
â”‚       â†“                                                    â”‚
â”‚  SSEClient<span class="hljs-selector-class">.handleEvent</span>()                                   â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  åˆ¤æ–­: eventType != <span class="hljs-string">"connected"</span>ï¼Œä¸æ›´æ–°çŠ¶æ€         â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  <span class="hljs-built_in">onTextChunk</span>(<span class="hljs-string">"chunk"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"{...}"</span>)                â”‚
â”‚       â†“                                                    â”‚
â”‚  MLNSSETool                                                â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  [onTextChunk addStringArgument:@<span class="hljs-string">"chunk"</span>];         â”‚
â”‚       â”‚  <span class="hljs-selector-attr">[onTextChunk addStringArgument:@<span class="hljs-string">"1"</span>]</span>;             â”‚
â”‚       â”‚  <span class="hljs-selector-attr">[onTextChunk addStringArgument:@<span class="hljs-string">"{...}"</span>]</span>;         â”‚
â”‚       â”‚  <span class="hljs-selector-attr">[onTextChunk callIfCan]</span>;                          â”‚
â”‚       â†“                                                    â”‚
â”‚  Lua ä¸šåŠ¡å±‚                                                â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  <span class="hljs-built_in">onEvent</span>("chunk", "<span class="hljs-number">1</span>", '{"content":"Hello"}')      â”‚
â”‚       â†“                                                    â”‚
â”‚  ä¸šåŠ¡ä»£ç å¤„ç†                                               â”‚
â”‚       â”‚                                                    â”‚
â”‚       â”‚  local json = cjson<span class="hljs-selector-class">.decode</span>(data)                   â”‚
â”‚       â”‚  <span class="hljs-built_in">print</span>(json.content)  -- è¾“å‡º: Hello               â”‚
â”‚       â”‚  æ›´æ–° UI æ˜¾ç¤º                                       â”‚
â”‚       â†“                                                    â”‚
â”‚  âœ… å®Œæˆï¼                                                  â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<hr/>
<h2 data-id="heading-15">å®Œæ•´æµç¨‹å›¾ï¼ˆä»æœåŠ¡å™¨åˆ° Luaï¼‰</h2>
<pre><code class="hljs language-swift" lang="swift">æœåŠ¡å™¨å‘é€: <span class="hljs-string">"event: chunk<span class="hljs-subst">\n</span>id: 1<span class="hljs-subst">\n</span>data: {...}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>
                          <span class="hljs-operator">â”‚</span>
                          <span class="hljs-operator">â†“</span> ç½‘ç»œåˆ†å—ä¼ è¾“
<span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span>                     ç¬¬ä¸€æ­¥ï¼šç½‘ç»œå±‚                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">1</span>: <span class="hljs-string">"event: chu"</span>                                          <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">2</span>: <span class="hljs-string">"nk<span class="hljs-subst">\n</span>id: 1<span class="hljs-subst">\n</span>da"</span>                                       <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">3</span>: <span class="hljs-string">"ta: {...}<span class="hljs-subst">\n</span><span class="hljs-subst">\n</span>"</span>                                       <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                          <span class="hljs-operator">â”‚</span>
                          <span class="hljs-operator">â†“</span> <span class="hljs-type">NSURLSession</span>.didReceiveData
<span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span>                 ç¬¬äºŒæ­¥ï¼šè¡Œè§£æå™¨                               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                 (<span class="hljs-type">UTF8LineParser</span>)                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">1</span> <span class="hljs-operator">â†’</span> []                                                   <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">2</span> <span class="hljs-operator">â†’</span> [<span class="hljs-string">"event: chunk"</span>, <span class="hljs-string">"id: 1"</span>]                            <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  å—<span class="hljs-number">3</span> <span class="hljs-operator">â†’</span> [<span class="hljs-string">"data: {...}"</span>, <span class="hljs-string">""</span>]                                  <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                                                             <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  åˆè®¡å¾—åˆ°<span class="hljs-number">4</span>è¡Œ: `<span class="hljs-string">"event: chunk"</span>`, `<span class="hljs-string">"id: 1"</span>`, `<span class="hljs-string">"data: {...}"</span>`, `<span class="hljs-string">""</span>`  <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                          <span class="hljs-operator">â”‚</span>
                          <span class="hljs-operator">â†“</span> é€è¡Œä¼ é€’
<span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
<span class="hljs-operator">â”‚</span>                 ç¬¬ä¸‰æ­¥ï¼šäº‹ä»¶è§£æå™¨                             <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>                 (<span class="hljs-type">EventParser</span>)                               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-operator">â”‚</span>  ç¬¬<span class="hljs-number">1</span>è¡Œ <span class="hljs-string">"event: chunk"</span>  <span class="hljs-operator">â†’</span> eventType <span class="hljs-operator">=</span> <span class="hljs-string">"chunk"</span>                 <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  ç¬¬<span class="hljs-number">2</span>è¡Œ <span class="hljs-string">"id: 1"</span>         <span class="hljs-operator">â†’</span> eventId <span class="hljs-operator">=</span> <span class="hljs-string">"1"</span>                       <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  ç¬¬<span class="hljs-number">3</span>è¡Œ <span class="hljs-string">"data: {...}"</span>   <span class="hljs-operator">â†’</span> data <span class="hljs-operator">=</span> <span class="hljs-string">"{...}"</span>                      <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  ç¬¬<span class="hljs-number">4</span>è¡Œ <span class="hljs-string">""</span>              <span class="hljs-operator">â†’</span> <span class="hljs-operator">âš¡</span> è§¦å‘ dispatchEvent()              <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                          <span class="hljs-operator">â”‚</span>
                          <span class="hljs-operator">â†“</span> onEvent å›è°ƒ
<span class="hljs-operator">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span>
    <span class="hljs-operator">â”‚</span>                 ç¬¬å››æ­¥ï¼šäº‹ä»¶åˆ†å‘                           <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span>
<span class="hljs-operator">â”‚</span>  <span class="hljs-type">SSEClient</span>.handleEvent(<span class="hljs-string">"chunk"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"{...}"</span>)               <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>       <span class="hljs-operator">â†“</span>                                                     <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  <span class="hljs-type">MLNSSETool</span>.onTextChunk(<span class="hljs-string">"chunk"</span>, <span class="hljs-string">"1"</span>, <span class="hljs-string">"{...}"</span>)              <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>       <span class="hljs-operator">â†“</span>                                                     <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>  <span class="hljs-type">Lua</span>: onEvent(<span class="hljs-string">"chunk"</span>, <span class="hljs-string">"1"</span>, '{<span class="hljs-string">"content"</span>:<span class="hljs-string">"Hello"</span>}')          <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â”‚</span>       <span class="hljs-operator">â†“</span>                                                     <span class="hljs-operator">â”‚</span>
    <span class="hljs-operator">â”‚</span>  ä¸šåŠ¡ä»£ç : è§£æ <span class="hljs-type">JSONï¼Œæ›´æ–°</span> <span class="hljs-type">UI</span>                              <span class="hljs-operator">â”‚</span>
<span class="hljs-operator">â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span>
                          <span class="hljs-operator">â”‚</span>
                          <span class="hljs-operator">â†“</span>
                    <span class="hljs-operator">âœ…</span> å¤„ç†å®Œæˆï¼
</code></pre>
<hr/>
<hr/>
<h2 data-id="heading-16">äºŒã€å…³é”®ç‚¹æ€»ç»“</h2>
<h3 data-id="heading-17">2.1 ä¸ºä»€ä¹ˆéœ€è¦è¡Œè§£æå™¨ï¼Ÿ</h3>
<p>ç½‘ç»œæ•°æ®åˆ†å—åˆ°è¾¾ï¼Œä¸€è¡Œå¯èƒ½è¢«æ‹†æˆå¤šå—ã€‚è¡Œè§£æå™¨ç”¨<strong>ç¼“å†²åŒº</strong>è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 data-id="heading-18">2.2 ä¸ºä»€ä¹ˆç©ºè¡Œè¿™ä¹ˆé‡è¦ï¼Ÿ</h3>
<pre><code class="hljs language-makefile" lang="makefile"><span class="hljs-section">event: chunk     â† å­˜å‚¨ eventTypeï¼Œä¸è§¦å‘</span>
<span class="hljs-section">id: 1            â† å­˜å‚¨ eventIdï¼Œä¸è§¦å‘</span>
<span class="hljs-section">data: {...}      â† å­˜å‚¨ dataï¼Œä¸è§¦å‘</span>
                 â† âš¡ åªæœ‰ç©ºè¡Œæ‰è§¦å‘äº‹ä»¶åˆ†å‘ï¼
</code></pre>
<p><strong>ç©ºè¡Œ = äº‹ä»¶ç»“æŸçš„ä¿¡å·</strong></p>
<h3 data-id="heading-19">2.3 ä¸€ä¸ªäº‹ä»¶çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ</h3>



































<table><thead><tr><th>é˜¶æ®µ</th><th>è¾“å…¥</th><th>è¾“å‡º</th></tr></thead><tbody><tr><td>ç½‘ç»œä¼ è¾“</td><td>å­—èŠ‚æµ</td><td>æ•°æ®å—</td></tr><tr><td>è¡Œè§£æå™¨</td><td>æ•°æ®å—</td><td>æ–‡æœ¬è¡Œæ•°ç»„</td></tr><tr><td>äº‹ä»¶è§£æå™¨</td><td>æ–‡æœ¬è¡Œ</td><td>event/id/data</td></tr><tr><td>ç©ºè¡Œè§¦å‘</td><td>""</td><td>dispatchEvent()</td></tr><tr><td>å›è°ƒé“¾</td><td>event/id/data</td><td>Lua onEvent</td></tr></tbody></table></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¼ä¸šçº§ Vue3 + Element Plus ä¸»é¢˜å®šåˆ¶æ¶æ„ï¼šä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€çš„è¿›é˜¶ä¹‹è·¯]]></title>    <link>https://juejin.cn/post/7592119218030313506</link>    <guid>https://juejin.cn/post/7592119218030313506</guid>    <pubDate>2026-01-07T01:45:25.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592119218030313506" data-draft-id="7592094314472439843" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¼ä¸šçº§ Vue3 + Element Plus ä¸»é¢˜å®šåˆ¶æ¶æ„ï¼šä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€çš„è¿›é˜¶ä¹‹è·¯"/> <meta itemprop="keywords" content="æ¶æ„,CSS,å‰ç«¯"/> <meta itemprop="datePublished" content="2026-01-07T01:45:25.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿"/> <meta itemprop="url" content="https://juejin.cn/user/2277843821926871"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¼ä¸šçº§ Vue3 + Element Plus ä¸»é¢˜å®šåˆ¶æ¶æ„ï¼šä»â€œèƒ½ç”¨â€åˆ°â€œå¥½ç”¨â€çš„è¿›é˜¶ä¹‹è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843821926871/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§è±¡çš„é¼»å­é‚£ä¹ˆé•¿
  </span> <!----> <!----> <div class="vip-level" data-v-cd7d0a50="" data-v-292f6e48=""><span class="tooltip" data-v-cd7d0a50=""><div class="byte-tooltip byte-tooltip--dark" style="display:none;">
        VIP.4 èä¼šè´¯é€š
      </div><span class="byte-tooltip__wrapper"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8AQMAAAAAMksxAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAA5JREFUKM9jGAWjAAcAAAIcAAE27nY6AAAAAElFTkSuQmCC" alt="VIP.4 èä¼šè´¯é€š" title="VIP.4 èä¼šè´¯é€š" class="lazy" style="aspect-ratio:NaN;" data-v-5244ef91="" data-v-cd7d0a50=""/></span></span></div> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:45:25.000Z" title="Wed Jan 07 2026 01:45:25 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šç¡¬ç¼–ç é¢œè‰²æ˜¯ç»´æŠ¤çš„å™©æ¢¦ã€‚æœ¬æ–‡æ·±å…¥æ¢è®¨åŸºäº CSS Variables å’Œ SCSS çš„åˆ†å±‚ä¸»é¢˜æ¶æ„ï¼Œå®ç°æ¯«ç§’çº§åŠ¨æ€æ¢è‚¤ä¸æš—é»‘æ¨¡å¼ï¼Œæ„å»ºå¯æ‰©å±•çš„ä¼ä¸šçº§è®¾è®¡ç³»ç»Ÿã€‚æ‹’ç»â€œä¸€æŠŠæ¢­â€çš„æ ·å¼è¦†ç›–ï¼Œè®©æˆ‘ä»¬ç”¨å·¥ç¨‹åŒ–çš„æ€ç»´é‡æ„å‰ç«¯ä¸»é¢˜ç³»ç»Ÿã€‚</p>
</blockquote>
<hr/>
<h2 data-id="heading-0">1. å¼•è¨€ï¼šä¸ºä»€ä¹ˆä½ çš„ä¸»é¢˜ç³»ç»Ÿå¾ˆéš¾ç»´æŠ¤ï¼Ÿ</h2>
<p>åœ¨ B ç«¯é¡¹ç›®ä¸­ï¼ŒElement Plus æ˜¯æˆ‘ä»¬çš„è€æœ‹å‹ã€‚ä½†åœ¨é•¿æœŸè¿­ä»£ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é‡åˆ°è¿™äº›ç—›ç‚¹ï¼š</p>
<ul>
<li><strong>ç—›ç‚¹ä¸€ï¼šç¡¬ç¼–ç æ»¡å¤©é£</strong>ã€‚<code>color: #409eff</code> æ•£è½åœ¨å„ä¸ª <code>.vue</code> æ–‡ä»¶å’Œ <code>.scss</code> æ–‡ä»¶ä¸­ã€‚è®¾è®¡å¸ˆè¯´è¦æ¢å“ç‰Œè‰²ï¼Œå¼€å‘äººå‘˜ä¸¤çœ¼ä¸€é»‘ã€‚</li>
<li><strong>ç—›ç‚¹äºŒï¼šè¦†ç›–é“¾åœ°ç‹±</strong>ã€‚ä¸ºäº†ä¿®æ”¹ä¸€ä¸ªæŒ‰é’®é¢œè‰²ï¼Œä½¿ç”¨äº† <code>!important</code> ç”šè‡³ <code>::v-deep</code> åµŒå¥—äº”å±‚ï¼Œå¯¼è‡´æ ·å¼ä¼˜å…ˆçº§æ··ä¹±ï¼Œç‰µä¸€å‘è€ŒåŠ¨å…¨èº«ã€‚</li>
<li><strong>ç—›ç‚¹ä¸‰ï¼šåŠ¨æ€æ¢è‚¤å›°éš¾</strong>ã€‚SCSS å˜é‡åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šäº†ï¼Œæƒ³åšâ€œæš—é»‘æ¨¡å¼â€æˆ–â€œä¸€é”®æ¢è‚¤â€ï¼Œå¿…é¡»é‡æ–°åŠ è½½ CSS æ–‡ä»¶ï¼Œä½“éªŒæå·®ã€‚</li>
</ul>
<p>æœ¬æ–‡å°†ä»‹ç»ä¸€ç§**åŸºäºåˆ†å±‚æ¶æ„ï¼ˆLayered Architectureï¼‰**çš„ä¸»é¢˜è®¾è®¡æ–¹æ¡ˆï¼Œå®Œç¾è§£å†³ä¸Šè¿°é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-1">2. æ ¸å¿ƒæ¶æ„è®¾è®¡ï¼šå››å±‚é‡‘å­—å¡”</h2>
<p>ä¸ºäº†è§£è€¦ä¸šåŠ¡é€»è¾‘ä¸ UI æ¡†æ¶ï¼Œæˆ‘ä»¬å°†ä¸»é¢˜ç³»ç»Ÿåˆ’åˆ†ä¸ºå››å±‚ã€‚è¿™ç§è®¾è®¡éµå¾ªâ€œ<strong>Token ä¼˜å…ˆï¼Œè¦†ç›–ä¸ºè¾…</strong>â€çš„åŸåˆ™ã€‚</p>
<pre><code class="hljs language-mermaid" lang="mermaid">graph TD
    subgraph "Layer 1: Design Tokens (ä¸šåŠ¡è¯­ä¹‰)"
        L1[src/assets/styles/var.scss]
        L1_Desc["å®šä¹‰å“ç‰Œè‰²ã€å­—å·ã€åœ†è§’&lt;br/&gt;--cmc-primary-color&lt;br/&gt;--cmc-bg-color"]
    end

    subgraph "Layer 2: Variable Mapping (æ˜ å°„å±‚)"
        L2[src/assets/styles/element-theme.scss]
        L2_Desc["å°† Element Plus å˜é‡ç»‘å®šåˆ°ä¸šåŠ¡ Token&lt;br/&gt;--el-color-primary: var(--cmc-primary-color)"]
    end

    subgraph "Layer 3: Framework (æ¡†æ¶å±‚)"
        L3[Element Plus Components]
        L3_Desc["ç»„ä»¶è‡ªåŠ¨æ¶ˆè´¹ --el-* å˜é‡&lt;br/&gt;æ— éœ€ä¿®æ”¹ç»„ä»¶ä»£ç "]
    end

    subgraph "Layer 4: Overrides (å¾®è°ƒå±‚)"
        L4[src/assets/styles/cus-element.scss]
        L4_Desc["å¤„ç†ç‰¹æ®Šå¸ƒå±€æˆ–ç»“æ„å·®å¼‚&lt;br/&gt;ä½¿ç”¨ var(--cmc-*) å¼•ç”¨å˜é‡"]
    end

    L1 --&gt; L2
    L2 --&gt; L3
    L1 --&gt; L4
    L3 --&gt; L4
</code></pre>
<h3 data-id="heading-2">Layer 1: åŸºç¡€è®¾è®¡ä»¤ç‰Œ (Design Tokens)</h3>
<p>è¿™æ˜¯è®¾è®¡ç³»ç»Ÿçš„â€œå…ƒæ•°æ®â€ï¼Œé€šå¸¸å¯¹åº” Figma ä¸­çš„ Stylesã€‚å®ƒä¸ä¾èµ–äºä»»ä½• UI æ¡†æ¶ï¼Œçº¯ç²¹æè¿°ä¸šåŠ¡çš„è§†è§‰è§„èŒƒã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/assets/styles/var.scss */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* å“ç‰Œè‰² */</span>
  <span class="hljs-attr">--cmc-primary-color</span>: <span class="hljs-number">#004889</span>;
  <span class="hljs-attr">--cmc-success-color</span>: <span class="hljs-number">#05ac77</span>;
  
  <span class="hljs-comment">/* ä¸­æ€§è‰² */</span>
  <span class="hljs-attr">--cmc-neutral-text</span>: <span class="hljs-number">#333333</span>;
  <span class="hljs-attr">--cmc-neutral-border</span>: <span class="hljs-number">#e4e7ed</span>;
  
  <span class="hljs-comment">/* å¸ƒå±€ */</span>
  <span class="hljs-attr">--cmc-radius-base</span>: <span class="hljs-number">2px</span>;
}
</code></pre>
<h3 data-id="heading-3">Layer 2: å˜é‡æ˜ å°„å±‚ (Variable Mapping)</h3>
<p>è¿™æ˜¯æ¶æ„ä¸­æœ€å…³é”®çš„ä¸€ç¯ã€‚å®ƒå……å½“äº†â€œé€‚é…å™¨â€çš„è§’è‰²ï¼Œå°† Element Plus çš„è¯­è¨€ï¼ˆ<code>--el-*</code>ï¼‰ç¿»è¯‘æˆæˆ‘ä»¬ä¸šåŠ¡çš„è¯­è¨€ï¼ˆ<code>--cmc-*</code>ï¼‰ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Ÿ</strong>
ç›´æ¥ä¿®æ”¹ <code>--el-color-primary</code> è™½ç„¶å¯è¡Œï¼Œä½†å®ƒè®©ä½ çš„ä¸šåŠ¡ä»£ç è€¦åˆäº† Element Plus çš„å‘½åã€‚é€šè¿‡ä¸­é—´å±‚æ˜ å°„ï¼Œæœªæ¥å¦‚æœä½ è¿ç§»åˆ° Ant Design Vueï¼Œåªéœ€ä¿®æ”¹æ˜ å°„å±‚ï¼ŒLayer 1 çš„ä¸šåŠ¡ä»£ç æ— éœ€å˜åŠ¨ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/assets/styles/element-theme.scss */</span>
<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-comment">/* å°† Element Plus çš„ä¸»è‰²æŒ‡å‘æˆ‘ä»¬çš„ä¸šåŠ¡ä¸»è‰² */</span>
  <span class="hljs-attr">--el-color-primary</span>: <span class="hljs-built_in">var</span>(--cmc-primary-color);
  
  <span class="hljs-comment">/* æ–‡æœ¬é¢œè‰²æ˜ å°„ */</span>
  <span class="hljs-attr">--el-text-color-primary</span>: <span class="hljs-built_in">var</span>(--cmc-neutral-text);
  
  <span class="hljs-comment">/* è¾¹æ¡†æ˜ å°„ */</span>
  <span class="hljs-attr">--el-border-color</span>: <span class="hljs-built_in">var</span>(--cmc-neutral-border);
  <span class="hljs-attr">--el-border-radius-base</span>: <span class="hljs-built_in">var</span>(--cmc-radius-base);
}
</code></pre>
<h3 data-id="heading-4">Layer 3: SCSS ç¼–è¯‘é…ç½® (é™æ€é¢„å¤„ç†)</h3>
<p>è™½ç„¶ CSS å˜é‡å¾ˆå¼ºå¤§ï¼Œä½†æœ‰äº›åœºæ™¯ï¼ˆå¦‚ Sass çš„ <code>color.mix</code> å‡½æ•°æˆ–å¾ªç¯ç”Ÿæˆç±»åï¼‰éœ€è¦åœ¨ç¼–è¯‘æ—¶å®Œæˆã€‚æˆ‘ä»¬ä¿ç•™ <code>element/index.scss</code> ç”¨äºå¤„ç†è¿™äº›é™æ€é€»è¾‘ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/assets/styles/element/index.scss */</span>
<span class="hljs-keyword">@forward</span> <span class="hljs-string">'element-plus/theme-chalk/src/common/var.scss'</span> with (
  <span class="hljs-variable">$colors</span>: (
    <span class="hljs-string">'primary'</span>: (
      <span class="hljs-string">'base'</span>: <span class="hljs-number">#004889</span>, /* ç”¨äºç”Ÿæˆ light-<span class="hljs-number">1</span> ~ light-<span class="hljs-number">9</span> çš„é™æ€è‰²é˜¶ */
    ),
  )
);
</code></pre>
<h3 data-id="heading-5">Layer 4: ç»„ä»¶æ ·å¼å¾®è°ƒ (Overrides)</h3>
<p>æœ€åï¼Œå¯¹äºé‚£äº›æ— æ³•é€šè¿‡å˜é‡ä¿®æ”¹çš„æ ·å¼ï¼ˆå¦‚ DOM ç»“æ„å¯¼è‡´çš„å¸ƒå±€å·®å¼‚ï¼‰ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸€å±‚è¿›è¡Œå¾®è°ƒã€‚</p>
<p><strong>æ ¸å¿ƒåŸåˆ™</strong>ï¼š<strong>ä¸¥ç¦ç¡¬ç¼–ç é¢œè‰²</strong>ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/assets/styles/cus-element.scss */</span>

<span class="hljs-comment">/* Bad âŒ: ç¡¬ç¼–ç é¢œè‰²ï¼Œæ¢è‚¤æ—¶è¿™é‡Œä¼šå˜æˆæ¼ç½‘ä¹‹é±¼ */</span>
<span class="hljs-selector-class">.el-input__wrapper</span> {
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">#004889</span> <span class="hljs-meta">!important</span>;
}

<span class="hljs-comment">/* Good âœ…: å¼•ç”¨ Layer 1 çš„ Tokenï¼Œæ¢è‚¤è‡ªåŠ¨è·Ÿéš */</span>
<span class="hljs-selector-class">.el-input__wrapper</span> {
  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-built_in">var</span>(--cmc-primary-color) <span class="hljs-meta">!important</span>;
}
</code></pre>
<hr/>
<h2 data-id="heading-6">3. æ·±åº¦è§£æï¼šåŠ¨æ€æ¢è‚¤ä¸æš—é»‘æ¨¡å¼åŸç†</h2>
<p>æœ‰äº†ä¸Šè¿°æ¶æ„ï¼Œå®ç°åŠ¨æ€æ¢è‚¤å°±å˜æˆäº† <strong>O(1)</strong> å¤æ‚åº¦çš„æ“ä½œâ€”â€”åªéœ€ä¿®æ”¹ CSS å˜é‡çš„å€¼ã€‚</p>
<h3 data-id="heading-7">è¿è¡Œæ—¶åŠ¨æ€æ¢è‚¤</h3>
<p>æˆ‘ä»¬ä¸éœ€è¦è¯·æ±‚åç«¯ä¸‹è½½æ–°çš„ CSS æ–‡ä»¶ï¼Œä¹Ÿä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// theme.ts</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">changeTheme</span>(<span class="hljs-params">color: <span class="hljs-built_in">string</span></span>) {
  <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-property">documentElement</span>
  <span class="hljs-comment">// ä¿®æ”¹ CSS å˜é‡ï¼Œé¡µé¢ç¬é—´é‡ç»˜</span>
  el.<span class="hljs-property">style</span>.<span class="hljs-title function_">setProperty</span>(<span class="hljs-string">'--cmc-primary-color'</span>, color)
  
  <span class="hljs-comment">// è¿˜å¯ä»¥åˆ©ç”¨ç®—æ³•åŠ¨æ€è®¡ç®—è¾…åŠ©è‰²</span>
  <span class="hljs-comment">// el.style.setProperty('--cmc-primary-light-1', lighten(color, 10%))</span>
}
</code></pre>
<h3 data-id="heading-8">æš—é»‘æ¨¡å¼ (Dark Mode)</h3>
<p>åˆ©ç”¨ CSS çš„å±‚å ç‰¹æ€§ï¼Œæˆ‘ä»¬åªéœ€å®šä¹‰ <code>.dark</code> ç±»ä¸‹çš„å˜é‡å€¼ã€‚</p>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">/* src/assets/styles/var.scss */</span>

<span class="hljs-selector-pseudo">:root</span> {
  <span class="hljs-attr">--cmc-bg-color</span>: <span class="hljs-number">#ffffff</span>;
  <span class="hljs-attr">--cmc-text-color</span>: <span class="hljs-number">#333333</span>;
}

<span class="hljs-comment">/* æš—é»‘æ¨¡å¼é‡å†™å˜é‡ */</span>
<span class="hljs-selector-tag">html</span><span class="hljs-selector-class">.dark</span> {
  <span class="hljs-attr">--cmc-bg-color</span>: <span class="hljs-number">#141414</span>;
  <span class="hljs-attr">--cmc-text-color</span>: <span class="hljs-number">#e5eaf3</span>;
  
  <span class="hljs-comment">/* è°ƒæ•´ä¸»è‰²äº®åº¦ä»¥æå‡æ·±è‰²èƒŒæ™¯ä¸‹çš„å¯¹æ¯”åº¦ */</span>
  <span class="hljs-attr">--cmc-primary-color</span>: <span class="hljs-number">#409eff</span>; 
}
</code></pre>
<p>VueUse çš„ <code>useDark</code> å®Œç¾é…åˆï¼š</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-keyword">import</span> { useDark, useToggle } <span class="hljs-keyword">from</span> <span class="hljs-string">'@vueuse/core'</span>

<span class="hljs-keyword">const</span> isDark = <span class="hljs-title function_">useDark</span>()
<span class="hljs-keyword">const</span> toggleDark = <span class="hljs-title function_">useToggle</span>(isDark)
</code></pre>
<hr/>
<h2 data-id="heading-9">4. å·¥ç¨‹åŒ–å®è·µï¼šæ ·å¼åŠ è½½ç­–ç•¥</h2>
<p>åœ¨å¤§å‹åº”ç”¨ä¸­ï¼Œæ ·å¼çš„åŠ è½½é¡ºåºè‡³å…³é‡è¦ã€‚å¦‚æœ <code>element-theme.scss</code> åŠ è½½æ™šäºç»„ä»¶æ ·å¼ï¼Œæ˜ å°„å¯èƒ½å¤±æ•ˆã€‚</p>
<p>æ¨èé‡‡ç”¨<strong>ç¨‹åºåŒ–åŠ è½½</strong>ç­–ç•¥ï¼Œåœ¨åº”ç”¨åˆå§‹åŒ–é˜¶æ®µæ˜¾å¼æ§åˆ¶åŠ è½½é¡ºåºã€‚</p>
<pre><code class="hljs language-typescript" lang="typescript"><span class="hljs-comment">// src/bootstrap/app-initializer.ts</span>

<span class="hljs-keyword">async</span> <span class="hljs-title function_">loadStyles</span>(<span class="hljs-params"/>) {
  <span class="hljs-keyword">const</span> styleModules = [
    <span class="hljs-comment">// 1. å…ˆåŠ è½½è®¾è®¡ä»¤ç‰Œ</span>
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/assets/styles/var.scss'</span>),
    <span class="hljs-comment">// 2. åŠ è½½å˜é‡æ˜ å°„ï¼ˆå…³é”®ï¼ï¼‰</span>
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/assets/styles/element-theme.scss'</span>),
    <span class="hljs-comment">// 3. åŠ è½½æ¡†æ¶åŸºç¡€æ ·å¼</span>
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/assets/styles/index.scss'</span>),
    <span class="hljs-comment">// 4. æœ€ååŠ è½½è‡ªå®šä¹‰è¦†ç›–</span>
    <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">'@/assets/styles/cus-element.scss'</span>),
  ]

  <span class="hljs-comment">// æŒ‰é¡ºåºå¹¶è¡Œæˆ–ä¸²è¡ŒåŠ è½½</span>
  <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(styleModules.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> <span class="hljs-title function_">fn</span>()))
}
</code></pre>
<hr/>
<h2 data-id="heading-10">5. æ€»ç»“ä¸æœ€ä½³å®è·µæ¸…å•</h2>
<p>è¦æ„å»ºä¸€ä¸ªå¥å£®çš„ä¸»é¢˜ç³»ç»Ÿï¼Œè¯·éµå®ˆä»¥ä¸‹ Checklistï¼š</p>
<ol>
<li><strong>Single Source of Truth</strong>ï¼šæ‰€æœ‰é¢œè‰²å¿…é¡»å®šä¹‰åœ¨ <code>var.scss</code> ä¸­ï¼Œç¦æ­¢åœ¨ Vue ç»„ä»¶çš„ <code>&lt;style&gt;</code> ä¸­å†™æ­» Hex å€¼ã€‚</li>
<li><strong>è¯­ä¹‰åŒ–å‘½å</strong>ï¼šä½¿ç”¨ <code>--brand-primary</code> è€Œä¸æ˜¯ <code>--blue-500</code>ã€‚å‰è€…æè¿°æ„å›¾ï¼Œåè€…æè¿°è¡¨è±¡ã€‚å½“å“ç‰Œè‰²ä»è“å˜çº¢æ—¶ï¼Œä½ ä¸éœ€è¦é‡å‘½åå˜é‡ã€‚</li>
<li><strong>é¿å…è¿‡åº¦å°è£…</strong>ï¼šä¸è¦ä¸ºäº†â€œçœ‹èµ·æ¥æ•´æ´â€è€ŒæŠŠ Element Plus çš„æ‰€æœ‰å˜é‡éƒ½é‡æ–°å®šä¹‰ä¸€éã€‚åªæ˜ å°„ä½ éœ€è¦å®šåˆ¶çš„éƒ¨åˆ†ï¼ˆå¦‚é¢œè‰²ã€åœ†è§’ã€å­—ä½“ï¼‰ï¼Œä¿æŒè½»é‡ã€‚</li>
<li><strong>åˆ©ç”¨ DevTools</strong>ï¼šChrome çš„ "Styles" é¢æ¿åº•éƒ¨å¯ä»¥ç›´è§‚åœ°çœ‹åˆ° CSS å˜é‡çš„ç»§æ‰¿é“¾ï¼Œæ˜¯è°ƒè¯•ä¸»é¢˜é—®é¢˜çš„åˆ©å™¨ã€‚</li>
</ol>
<p>é€šè¿‡è¿™å¥—æ¶æ„ï¼Œæˆ‘ä»¬ä¸ä»…è§£å†³äº†â€œæ”¹ä¸€ä¸ªé¢œè‰²æ”¹ä¸€å¤©â€çš„å°´å°¬ï¼Œæ›´ä¸ºæœªæ¥çš„è®¾è®¡ç³»ç»Ÿå‡çº§æ‰“ä¸‹äº†åšå®çš„åœ°åŸºã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MCP ç§‘æ™®]]></title>    <link>https://juejin.cn/post/7592082090209083419</link>    <guid>https://juejin.cn/post/7592082090209083419</guid>    <pubDate>2026-01-07T00:56:40.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592082090209083419" data-draft-id="7592062873829425202" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MCP ç§‘æ™®"/> <meta itemprop="keywords" content="MCP"/> <meta itemprop="datePublished" content="2026-01-07T00:56:40.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="pauli"/> <meta itemprop="url" content="https://juejin.cn/user/4160207728689037"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MCP ç§‘æ™®
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4160207728689037/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    pauli
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:56:40.000Z" title="Wed Jan 07 2026 00:56:40 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    12
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»7åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å‡ ä¸ªç¼©å†™</h2>
<ul>
<li>JSON: JavaScript Object Notation</li>
<li>RPC: Remote Procedure Call</li>
<li>MCP: Model Context Protocol</li>
</ul>
<h4 data-id="heading-1">ğŸ¯ ä»€ä¹ˆæ˜¯ RPCï¼Ÿ</h4>
<p>JSON æ˜¯ä¸€ç§<strong>è½»é‡çº§ã€çº¯æ–‡æœ¬çš„æ•°æ®äº¤æ¢æ ¼å¼</strong>ï¼Œå®ƒé‡‡ç”¨å®Œå…¨ç‹¬ç«‹äºç¼–ç¨‹è¯­è¨€çš„æ–‡æœ¬æ ¼å¼æ¥å­˜å‚¨å’Œä¼ è¾“ç»“æ„åŒ–æ•°æ®ã€‚å…¶æ ¸å¿ƒç‰¹ç‚¹æ˜¯<strong>äººç±»å¯è¯»</strong>ï¼ˆä½¿ç”¨å¤§å®¶ç†Ÿæ‚‰çš„é”®å€¼å¯¹ã€æ•°ç»„ç»“æ„è¡¨ç¤ºï¼‰å’Œ<strong>æœºå™¨æ˜“è§£æ</strong>ï¼Œå› æ­¤å®ƒæˆä¸ºäº†ç°ä»£ç½‘ç»œé€šä¿¡ï¼ˆå¦‚ä½ æ­£åœ¨ä½¿ç”¨çš„MCPåè®®ï¼‰å’Œåº”ç”¨ç¨‹åºé…ç½®ä¸­<strong>æœ€ä¸»æµçš„æ•°æ®äº¤æ¢è¯­è¨€</strong>ï¼Œå‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½æä¾›äº†å¯¹JSONçš„ç”Ÿæˆå’Œè§£ææ”¯æŒã€‚</p>
<h4 data-id="heading-2">ğŸ¯ ä»€ä¹ˆæ˜¯ RPCï¼Ÿ</h4>
<p><strong>RPC</strong> æŒ‡<strong>è¿œç¨‹è¿‡ç¨‹è°ƒç”¨</strong>ã€‚å®ƒæ˜¯ä¸€ç§æŠ€æœ¯ï¼Œå…è®¸ä¸€ä¸ªè®¡ç®—æœºç¨‹åºï¼ˆå®¢æˆ·ç«¯ï¼‰è°ƒç”¨å¦ä¸€ä¸ªåœ°å€ç©ºé—´ï¼ˆé€šå¸¸æ˜¯ç½‘ç»œä¸Šçš„å¦ä¸€å°æœºå™¨ï¼‰çš„ç¨‹åºï¼ˆæœåŠ¡ç«¯ï¼‰ä¸­çš„å‡½æ•°æˆ–è¿‡ç¨‹ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ç®€å•ã€‚</p>
<p><strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼š<strong>è®©ä½ åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·å»è°ƒç”¨è¿œç¨‹æœåŠ¡</strong>ï¼Œè€Œæ— éœ€å…³å¿ƒåº•å±‚çš„ç½‘ç»œé€šä¿¡ã€æ•°æ®åºåˆ—åŒ–ç­‰å¤æ‚ç»†èŠ‚ã€‚</p>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªæœ¬åœ°çš„åŠ æ³•å‡½æ•° <code>add(1, 2)</code>ã€‚ä½¿ç”¨RPCï¼Œä½ å¯ä»¥è°ƒç”¨ä¸€ä¸ªè¿œåœ¨æœåŠ¡å™¨ä¸Šçš„å‡½æ•°ï¼Œå†™æ³•å¯èƒ½å®Œå…¨ä¸€æ · <code>add(1, 2)</code>ï¼Œä½†å®é™…çš„è®¡ç®—å‘ç”Ÿåœ¨æœåŠ¡å™¨ä¸Šï¼Œç»“æœå†ä¼ å›ç»™ä½ ã€‚</p>
<h4 data-id="heading-3">ğŸ“„ ä»€ä¹ˆæ˜¯ JSON-RPCï¼Ÿ</h4>
<p><strong>JSON-RPC</strong> æ˜¯ä¸€ç§<strong>è½»é‡çº§çš„ã€åŸºäºJSONçš„RPCåè®®</strong>ã€‚å®ƒå®šä¹‰äº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´å¦‚ä½•è¿›è¡Œç»“æ„åŒ–é€šä¿¡çš„ç®€å•è§„åˆ™ã€‚</p>
<p><strong>æ ¸å¿ƒç‰¹ç‚¹</strong>ï¼šä½¿ç”¨äººç±»å¯è¯»çš„<strong>JSONæ ¼å¼</strong>æ¥ç¼–ç è¯·æ±‚å’Œå“åº”ï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€šç”¨ï¼Œå‡ ä¹ä»»ä½•æ”¯æŒJSONå’Œç½‘ç»œçš„è¯­è¨€éƒ½èƒ½ä½¿ç”¨ã€‚</p>
<p>ä¸€ä¸ª<strong>JSON-RPC 2.0</strong>è¯·æ±‚å’Œå“åº”çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼Œè¿™æ­£æ˜¯MCPæœåŠ¡å™¨ä¸€ç›´åœ¨å¤„ç†çš„ä¸œè¥¿ï¼š</p>
<p><strong>è¯·æ±‚ (Request)ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"method"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"get_weather"</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è¦è°ƒç”¨çš„è¿œç¨‹æ–¹æ³•å</span>
  <span class="hljs-attr">"params"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"city"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Beijing"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è°ƒç”¨å‚æ•°</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101</span> <span class="hljs-comment">// è¯·æ±‚IDï¼Œç”¨äºåŒ¹é…å“åº”</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>æˆåŠŸå“åº” (Success Response)ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span><span class="hljs-attr">"temperature"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">22</span><span class="hljs-punctuation">,</span> <span class="hljs-attr">"condition"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"sunny"</span><span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// è°ƒç”¨ç»“æœ</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101</span> <span class="hljs-comment">// ä¸è¯·æ±‚IDå¯¹åº”</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p><strong>é”™è¯¯å“åº” (Error Response)ï¼š</strong></p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"error"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"code"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">-32601</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"message"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"Method not found"</span>
  <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">101</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-4">ğŸ“Š RPC ä¸ JSON-RPC çš„å…³ç³»ä¸å¯¹æ¯”</h4>






























<table><thead><tr><th align="left">ç‰¹æ€§</th><th align="left"><strong>RPC</strong></th><th align="left"><strong>JSON-RPC</strong></th></tr></thead><tbody><tr><td align="left"><strong>å®šä½</strong></td><td align="left">ä¸€ç§å¹¿æ³›çš„æŠ€æœ¯<strong>æ¦‚å¿µå’Œæ¨¡å‹</strong>ã€‚</td><td align="left">RPC æ¦‚å¿µçš„ä¸€ç§<strong>å…·ä½“å®ç°åè®®</strong>ã€‚</td></tr><tr><td align="left"><strong>æ•°æ®æ ¼å¼</strong></td><td align="left">ä¸é™å®šï¼Œå¯ä»¥æ˜¯ä»»ä½•æ ¼å¼ï¼ˆå¦‚äºŒè¿›åˆ¶ã€XMLï¼‰ã€‚</td><td align="left"><strong>å¼ºåˆ¶ä½¿ç”¨ JSON</strong> æ ¼å¼ã€‚</td></tr><tr><td align="left"><strong>æ ¸å¿ƒ</strong></td><td align="left">å®ç°â€œè¿œç¨‹è°ƒç”¨åƒæœ¬åœ°è°ƒç”¨â€çš„<strong>æ€æƒ³</strong>ã€‚</td><td align="left">å®ç°è¯¥æ€æƒ³çš„<strong>ä¸€å¥—å…·ä½“JSONæ¶ˆæ¯è§„åˆ™</strong>ã€‚</td></tr><tr><td align="left"><strong>ç±»æ¯”</strong></td><td align="left">å°±åƒâ€œè½¦è¾†â€è¿™ä¸ªæ¦‚å¿µã€‚</td><td align="left">å°±åƒæ˜¯â€œè½¦è¾†â€æ¦‚å¿µä¸‹çš„ä¸€è¾†<strong>å…·ä½“è§„èŒƒçš„å…¬äº¤è½¦</strong>ï¼ˆæœ‰å›ºå®šçš„é¢œè‰²ã€ç¥¨ä»·ã€åœé ç«™è§„åˆ™ï¼‰ã€‚</td></tr></tbody></table>
<h4 data-id="heading-5">ğŸ”— å®ƒä»¬ä¸ MCP çš„å…³ç³»</h4>
<p><strong>MCP æ˜¯å»ºç«‹åœ¨ JSON-RPC 2.0 ä¹‹ä¸Šçš„ä¸€ä¸ªæ›´é«˜å±‚ã€æ›´å…·ä½“çš„åè®®ã€‚</strong></p>
<ol>
<li><strong>MCP ä½¿ç”¨äº† JSON-RPC çš„â€œå·´å£«â€</strong>ï¼šæ‰€æœ‰MCPæ¶ˆæ¯ï¼ˆè§ä¸‹æ–‡ï¼‰éƒ½ä¸¥æ ¼éµå¾ªä¸Šé¢çœ‹åˆ°çš„JSON-RPCè¯·æ±‚å’Œå“åº”æ ¼å¼ã€‚</li>
<li><strong>MCP å®šä¹‰äº†â€œå·´å£«çš„è·¯çº¿å’Œä¹˜å®¢è§„èŒƒâ€</strong>ï¼šMCPåè®®è§„å®šäº†åœ¨è¿™æ¡JSON-RPCçº¿è·¯ä¸Šï¼Œå¿…é¡»æœ‰å“ªäº›â€œç«™ç‚¹â€ï¼ˆå³å¿…é¡»å®ç°çš„ <code>method</code>ï¼‰ï¼Œä»¥åŠæ¯ä¸ªç«™ç‚¹â€œä¸Šä¸‹è½¦çš„ä¹˜å®¢â€é•¿ä»€ä¹ˆæ ·ï¼ˆå³ <code>params</code> å’Œ <code>result</code> çš„è¯¦ç»†æ•°æ®ç»“æ„ï¼‰ã€‚
<ul>
<li>ä¾‹å¦‚ï¼ŒMCPè§„å®šäº†ä¸€ä¸ªå« <code>tools/call</code> çš„â€œç«™ç‚¹â€ï¼ˆæ–¹æ³•ï¼‰ï¼Œå¹¶ä¸”è§„å®šåœ¨è¿™ä¸ªç«™ç‚¹ï¼Œâ€œä¹˜å®¢â€ï¼ˆ<code>params</code>ï¼‰å¿…é¡»åŒ…å« <code>name</code> å’Œ <code>arguments</code> å­—æ®µã€‚</li>
</ul>
</li>
</ol>
<p>æ‰€ä»¥ï¼Œå½“ä½ å†™MCPæœåŠ¡å™¨æ—¶ï¼Œä½ æœ¬è´¨ä¸Šæ˜¯åœ¨<strong>ç¼–å†™ä¸€ä¸ªéµå¾ªäº†é¢å¤–ï¼ˆMCPï¼‰è§„åˆ™çš„JSON-RPCæœåŠ¡å™¨</strong>ã€‚ä¹‹å‰ä»£ç ä¸­çš„ <code>protocolVersion</code>ã€<code>serverInfo</code>ã€<code>inputSchema</code> ç­‰å­—æ®µï¼Œéƒ½æ˜¯MCPè¿™ä¸ªâ€œä¸Šå±‚åè®®â€åœ¨JSON-RPCè¿™ä¸ªâ€œåŸºç¡€äº¤é€šå·¥å…·â€ä¸Šé¢å¤–è§„å®šçš„â€œä¹˜å®¢è¡Œä¸ºè§„èŒƒâ€ã€‚</p>
<h4 data-id="heading-6">åˆå§‹åŒ– initialize</h4>
<p><strong><code>initialize</code> æ˜¯MCPåè®®ä¼šè¯ä¸­å®¢æˆ·ç«¯å‘é€çš„ç¬¬ä¸€ä¸ªã€ä¹Ÿæ˜¯å¿…éœ€çš„è¯·æ±‚ï¼Œç”¨äºåå•†åè®®ç‰ˆæœ¬å¹¶å»ºç«‹è¿æ¥ã€‚</strong> å®ƒå¥½æ¯”ä¸€æ¬¡â€œæ¡æ‰‹â€ï¼Œå®¢æˆ·ç«¯é€šè¿‡å®ƒè¯¢é—®â€œä½ èƒ½ç”¨ä»€ä¹ˆç‰ˆæœ¬åè®®ï¼Ÿæœ‰å“ªäº›åŠŸèƒ½ï¼Ÿâ€ï¼Œè€ŒæœåŠ¡å™¨åˆ™å¿…é¡»åœ¨å“åº”ä¸­æ˜ç¡®å›ç­”ä¸‰ä¸ªæ ¸å¿ƒä¿¡æ¯ï¼š</p>
<ul>
<li>æœ¬æ¬¡ä¼šè¯ä½¿ç”¨çš„<strong>åè®®ç‰ˆæœ¬</strong>ï¼ˆ<code>protocolVersion</code>ï¼Œä¾‹å¦‚ <code>"2024-11-05"</code>ï¼‰ã€</li>
<li>å…³äºè‡ªèº«çš„<strong>å…ƒä¿¡æ¯</strong>ï¼ˆ<code>serverInfo</code>ï¼Œå¦‚åç§°å’Œç‰ˆæœ¬ï¼‰ã€</li>
<li>ä»¥åŠæ‰€æ”¯æŒçš„<strong>åŠŸèƒ½åˆ—è¡¨</strong>ï¼ˆ<code>capabilities</code>ï¼Œä¾‹å¦‚å£°æ˜æ˜¯å¦æ”¯æŒ <code>tools</code>ã€<code>resources</code>ã€<code>prompts</code> ç­‰ï¼‰ã€‚</li>
</ul>
<p>åªæœ‰åœ¨æˆåŠŸå®Œæˆ <code>initialize</code> æ¡æ‰‹åï¼Œå®¢æˆ·ç«¯æ‰ä¼šå‘é€ <code>notifications/initialized</code> é€šçŸ¥ï¼Œå¹¶åŸºäºæœåŠ¡å™¨çš„èƒ½åŠ›å£°æ˜æ¥å‘èµ·åç»­çš„ <code>tools/list</code>ã€<code>resources/read</code> ç­‰å…·ä½“äº¤äº’ã€‚ä½ ä¹‹å‰æœåŠ¡å™¨è¿”å›çš„ <code>{"protocolVersion":"2024-11-05","serverInfo":{...},"capabilities":{...}}</code> æ­£æ˜¯ä¸€ä¸ªæ ‡å‡†çš„åˆå§‹åŒ–å“åº”ã€‚</p>
<p>ä¸€ä¸ªå®Œæ•´çš„ã€ç¬¦åˆ MCP åè®®çš„ <code>initialize</code> è¯·æ±‚çš„<strong>æˆåŠŸå“åº”æ¶ˆæ¯</strong>ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  <span class="hljs-attr">"jsonrpc"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2.0"</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"id"</span><span class="hljs-punctuation">:</span> <span class="hljs-number">1</span><span class="hljs-punctuation">,</span>
  <span class="hljs-attr">"result"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
    <span class="hljs-attr">"protocolVersion"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"2024-11-05"</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"serverInfo"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"ä½ çš„MCPæœåŠ¡å™¨åç§°"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"capabilities"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"tools"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"resources"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>
        <span class="hljs-attr">"subscribe"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
      <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"prompts"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
        <span class="hljs-attr">"listChanged"</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span>
      <span class="hljs-punctuation">}</span>
    <span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
    <span class="hljs-attr">"implementation"</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
      <span class="hljs-attr">"name"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"my-mcp-server"</span><span class="hljs-punctuation">,</span>
      <span class="hljs-attr">"version"</span><span class="hljs-punctuation">:</span> <span class="hljs-string">"1.0.0"</span>
    <span class="hljs-punctuation">}</span>
  <span class="hljs-punctuation">}</span>
<span class="hljs-punctuation">}</span>
</code></pre>
<h4 data-id="heading-7">ğŸ“ å…³é”®å­—æ®µè¯¦è§£</h4>
<p>è¿™ä¸ªå“åº”ä¸­çš„æ‰€æœ‰å­—æ®µéƒ½æ˜¯ä¸ºäº†è®©å®¢æˆ·ç«¯ç†è§£å¦‚ä½•ä¸ä½ çš„æœåŠ¡å™¨æ­£ç¡®äº¤äº’ï¼š</p>




























































<table><thead><tr><th align="left">å­—æ®µè·¯å¾„</th><th align="left">æ˜¯å¦å¿…éœ€</th><th align="left">è¯´æ˜ä¸ç¤ºä¾‹</th></tr></thead><tbody><tr><td align="left"><strong><code>jsonrpc</code></strong></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left">å›ºå®šä¸º <code>"2.0"</code>ï¼Œè¡¨æ˜éµå¾ª JSON-RPC 2.0 åè®®ã€‚</td></tr><tr><td align="left"><strong><code>id</code></strong></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left">å¿…é¡»ä¸å®¢æˆ·ç«¯ <code>initialize</code> <strong>è¯·æ±‚ä¸­çš„ <code>id</code> å®Œå…¨ä¸€è‡´</strong>ï¼Œç”¨äºåŒ¹é…è¯·æ±‚ä¸å“åº”ã€‚</td></tr><tr><td align="left"><strong><code>result</code></strong></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left">åˆå§‹åŒ–ç»“æœå¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰åå•†ä¿¡æ¯ã€‚</td></tr><tr><td align="left"><code>result.protocolVersion</code></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left"><strong>åè®®ç‰ˆæœ¬</strong>ã€‚å½“å‰ä¸»æµæ˜¯ <code>"2024-11-05"</code>ï¼Œå¿…é¡»ä¸å®¢æˆ·ç«¯å…¼å®¹ã€‚</td></tr><tr><td align="left"><code>result.serverInfo</code></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left"><strong>æœåŠ¡å™¨å…ƒä¿¡æ¯</strong>ã€‚<code>name</code> å’Œ <code>version</code> ç”¨äºå®¢æˆ·ç«¯æ ‡è¯†å’Œæ—¥å¿—æ˜¾ç¤ºã€‚</td></tr><tr><td align="left"><code>result.capabilities</code></td><td align="left"><strong>å¿…éœ€</strong></td><td align="left"><strong>èƒ½åŠ›å£°æ˜</strong>ï¼Œæ˜¯<strong>æœ€æ ¸å¿ƒ</strong>çš„éƒ¨åˆ†ã€‚å®ƒç”¨ä¸€ä¸ªå¯¹è±¡æ˜ç¡®å‘ŠçŸ¥å®¢æˆ·ç«¯ä½ æ”¯æŒï¼ˆæˆ–ä¸æ”¯æŒï¼‰å“ªäº›MCPåŠŸèƒ½ã€‚</td></tr><tr><td align="left"><code>result.capabilities.tools</code></td><td align="left">å¯é€‰</td><td align="left">å£°æ˜ <strong>å·¥å…·</strong> ç›¸å…³èƒ½åŠ›ã€‚<code>listChanged</code> è®¾ä¸º <code>true</code> è¡¨ç¤ºå·¥å…·åˆ—è¡¨å¯èƒ½å˜åŒ–ï¼Œå®¢æˆ·ç«¯éœ€è¦åˆ·æ–°ã€‚</td></tr><tr><td align="left"><code>result.capabilities.resources</code></td><td align="left">å¯é€‰</td><td align="left">å£°æ˜ <strong>èµ„æº</strong> ç›¸å…³èƒ½åŠ›ã€‚<code>subscribe</code> è®¾ä¸º <code>false</code> è¡¨ç¤ºä¸æ”¯æŒèµ„æºå˜æ›´æ¨é€ã€‚</td></tr><tr><td align="left"><code>result.capabilities.prompts</code></td><td align="left">å¯é€‰</td><td align="left">å£°æ˜ <strong>æç¤ºè¯æ¨¡æ¿</strong> ç›¸å…³èƒ½åŠ›ã€‚</td></tr><tr><td align="left"><code>result.implementation</code></td><td align="left">å¯é€‰</td><td align="left"><strong>å®ç°è¯¦æƒ…</strong>ã€‚ç”¨äºæ›´ç»†è‡´çš„è°ƒè¯•ï¼Œå¯åŒ…å«æœåŠ¡å™¨å…·ä½“çš„å®ç°åç§°å’Œç‰ˆæœ¬ã€‚</td></tr></tbody></table>
<h4 data-id="heading-8">ğŸ’¡ æ ¸å¿ƒè§£è¯»</h4>
<ol>
<li><strong><code>capabilities</code> æ˜¯åŠŸèƒ½å¼€å…³</strong>ï¼šä½ åªéœ€åœ¨ <code>capabilities</code> å¯¹è±¡é‡ŒåŒ…å«ä½ <strong>å®é™…å®ç°äº†çš„åŠŸèƒ½</strong>ï¼ˆå¦‚ <code>tools</code>ã€<code>resources</code>ï¼‰ã€‚å¦‚æœæ²¡å®ç° <code>prompts</code>ï¼Œå°±ä¸éœ€è¦åŒ…å«è¯¥å­—æ®µã€‚è¿™ç›´æ¥å†³å®šäº†å®¢æˆ·ç«¯ä¹‹åæ˜¯å¦ä¼šå‘ä½ å‘é€ <code>prompts/list</code> ç­‰è¯·æ±‚ã€‚</li>
<li><strong><code>listChanged</code> çš„ä½œç”¨</strong>ï¼šè¿™æ˜¯ä¸€ä¸ªä¼˜åŒ–é€‰é¡¹ã€‚å¦‚æœè®¾ä¸º <code>true</code>ï¼Œå½“æœåŠ¡å™¨ä¸Šçš„å·¥å…·ã€èµ„æºæˆ–æç¤ºè¯åˆ—è¡¨å‘ç”Ÿå˜åŒ–æ—¶ï¼Œ<strong>æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨é€šçŸ¥</strong>å®¢æˆ·ç«¯åˆ·æ–°åˆ—è¡¨ï¼Œæ— éœ€å®¢æˆ·ç«¯é¢‘ç¹è½®è¯¢ã€‚</li>
<li><strong>ä¸è¯·æ±‚çš„å¯¹åº”</strong>ï¼šå“åº”ä¸­çš„ <code>id</code> å¿…é¡»ä¸è¯·æ±‚ä¸­çš„ <code>id</code> å¯¹åº”ã€‚å¦‚æœè¯·æ±‚æ˜¯ä¸€ä¸ªæ²¡æœ‰ <code>id</code> çš„<strong>é€šçŸ¥</strong>ï¼ˆç†è®ºä¸Š <code>initialize</code> å¿…é¡»æ˜¯è¯·æ±‚ï¼‰ï¼Œåˆ™æœåŠ¡å™¨ä¸åº”å›å¤ã€‚</li>
</ol>
<p>è¿™ä¸ªç»“æ„å°±æ˜¯MCPåè®®ä¸­â€œæ¡æ‰‹æˆåŠŸâ€çš„ç¡®è®¤ä¿¡å·ã€‚ä½ ä¹‹å‰éƒ¨ç½²çš„æœåŠ¡å™¨è¿”å›çš„å“åº”å·²ç»åŒ…å«äº†æœ€æ ¸å¿ƒçš„å¿…éœ€å­—æ®µï¼Œæ˜¯å®Œå…¨æœ‰æ•ˆçš„ã€‚ä½ å¯ä»¥æ ¹æ®æœåŠ¡å™¨å®é™…å®ç°çš„åŠŸèƒ½ï¼Œè°ƒæ•´ <code>capabilities</code> å¯¹è±¡çš„å†…å®¹ã€‚æœ€æƒå¨çš„å‚è€ƒå§‹ç»ˆæ˜¯ <a href="https://link.juejin.cn?target=https%3A%2F%2Fspec.modelcontextprotocol.io%2Fspecification%2F" target="_blank" title="https://spec.modelcontextprotocol.io/specification/" ref="nofollow noopener noreferrer">MCP å®˜æ–¹è§„èŒƒ</a>ã€‚</p>
<h4 data-id="heading-9">MCP æ¶ˆæ¯</h4>
<p>MCP æ¶ˆæ¯å¯ä»¥å½’çº³ä¸ºä»¥ä¸‹å‡ ç±»ï¼Œå®ƒä»¬éƒ½ä¸¥æ ¼éµå¾ª <strong>JSON-RPC 2.0</strong> çš„æ ¼å¼ï¼š</p>
<ol>
<li><strong>ç”Ÿå‘½å‘¨æœŸä¸è¿æ¥ç®¡ç†æ¶ˆæ¯</strong>ï¼šè¿™æ˜¯ä¼šè¯çš„åŸºç¡€ï¼ŒåŒ…æ‹¬ <strong><code>initialize</code></strong>ï¼ˆåˆå§‹åŒ–æ¡æ‰‹ï¼‰ã€<strong><code>ping</code>/<code>pong</code></strong>ï¼ˆè¿æ¥å¥åº·æ£€æŸ¥ï¼‰ï¼Œä»¥åŠ <strong><code>notifications/initialized</code></strong>ï¼ˆå®¢æˆ·ç«¯é€šçŸ¥æœåŠ¡å™¨åˆå§‹åŒ–å®Œæˆï¼‰ã€‚</li>
<li><strong>ä¸‰å¤§æ ¸å¿ƒèƒ½åŠ›æ¶ˆæ¯</strong>ï¼šè¿™æ˜¯MCPåŠŸèƒ½çš„æ ¸å¿ƒï¼Œå¯¹åº”ä¸‰å¤§æ¨¡å—ï¼š
<ul>
<li><strong>å·¥å…·</strong>ï¼š<code>tools/list</code>ï¼ˆåˆ—å‡ºå·¥å…·ï¼‰ã€<code>tools/call</code>ï¼ˆè°ƒç”¨å·¥å…·ï¼‰ã€‚</li>
<li><strong>èµ„æº</strong>ï¼š<code>resources/list</code>ï¼ˆåˆ—å‡ºèµ„æºURIï¼‰ã€<code>resources/read</code>ï¼ˆè¯»å–èµ„æºå†…å®¹ï¼‰ã€<code>resources/subscribe</code>ï¼ˆè®¢é˜…èµ„æºå˜æ›´ï¼‰ã€‚</li>
<li><strong>æç¤ºè¯æ¨¡æ¿</strong>ï¼š<code>prompts/list</code>ï¼ˆåˆ—å‡ºæç¤ºè¯æ¨¡æ¿ï¼‰ã€<code>prompts/get</code>ï¼ˆè·å–æ¨¡æ¿å†…å®¹ï¼‰ã€‚</li>
</ul>
</li>
<li><strong>é€šçŸ¥ä¸å˜æ›´æ¶ˆæ¯</strong>ï¼šæœåŠ¡å™¨ä¸»åŠ¨å‘å®¢æˆ·ç«¯æ¨é€å˜æ›´ï¼Œä¾‹å¦‚ <code>notifications/resources/updated</code>ï¼ˆé€šçŸ¥èµ„æºåˆ—è¡¨å·²æ›´æ–°ï¼‰ã€‚</li>
</ol>
<p><strong>ç®€å•æ¥è¯´ï¼Œé™¤äº†è¿æ¥å’Œå·¥å…·ç±»æ¶ˆæ¯ï¼ŒMCPåè®®è¿˜å®šä¹‰äº†ç”¨äºè¯»å–æ•°æ®çš„èµ„æºç±»æ¶ˆæ¯ã€ç®¡ç†é¢„å†™æç¤ºè¯çš„æç¤ºè¯ç±»æ¶ˆæ¯ï¼Œä»¥åŠç”¨äºå®æ—¶åŒæ­¥çš„æœåŠ¡å™¨é€šçŸ¥ã€‚</strong> æœåŠ¡å™¨é€šè¿‡åœ¨ <code>initialize</code> çš„ <code>capabilities</code> å­—æ®µä¸­å£°æ˜æ‰€æ”¯æŒçš„èƒ½åŠ›ï¼ˆå¦‚ <code>tools</code>ã€<code>resources</code>ï¼‰ï¼Œæ¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥æä¾›å“ªäº›ç±»å‹çš„æ¶ˆæ¯äº¤äº’ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸€ä¸ªåœ¨æ ¡å­¦ç”Ÿçš„ Vibe-Codingé“è·¯]]></title>    <link>https://juejin.cn/post/7592120202318479410</link>    <guid>https://juejin.cn/post/7592120202318479410</guid>    <pubDate>2026-01-06T17:17:42.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592120202318479410" data-draft-id="7592079304923578378" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸€ä¸ªåœ¨æ ¡å­¦ç”Ÿçš„ Vibe-Codingé“è·¯"/> <meta itemprop="keywords" content="VibeCoding,AIç¼–ç¨‹,Trae"/> <meta itemprop="datePublished" content="2026-01-06T17:17:42.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æœ‰æ„ä¹‰"/> <meta itemprop="url" content="https://juejin.cn/user/1739866211617625"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸€ä¸ªåœ¨æ ¡å­¦ç”Ÿçš„ Vibe-Codingé“è·¯
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1739866211617625/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æœ‰æ„ä¹‰
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T17:17:42.000Z" title="Tue Jan 06 2026 17:17:42 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»11åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å†™åœ¨å‰é¢</h2>
<p>ä»å‰ï¼Œæˆ‘ä»¬æ¯”è°ä»£ç å†™å¾—å¿«ã€bug è°ƒå¾—å‡†ï¼›ç°åœ¨ï¼Œæˆ‘ä»¬æ¯”è°èƒ½æŠŠæƒ³æ³•è®²æ¸…æ¥šã€æŠŠè§„åˆ™å®šæ˜ç™½ã€‚</p>
<p>è¿™åœºå˜åŒ–çš„ä¸»è§’ä¸æ˜¯æ›´å¼ºå¤§çš„æ¡†æ¶ï¼Œä¹Ÿä¸æ˜¯æ›´å¿«çš„è¯­è¨€ï¼Œè€Œæ˜¯<strong>äººä¸ AI åä½œæ–¹å¼çš„å‡çº§</strong>â€”â€”ä»â€œæˆ‘å†™æ¯ä¸€è¡Œâ€åˆ°â€œæˆ‘æŒ‡æŒ¥æ•´ä¸ªå¼€å‘æµâ€ã€‚</p>
<p>è€Œé©±åŠ¨è¿™åœºè½¬å˜çš„æ ¸å¿ƒç†å¿µï¼Œæ­£æ˜¯Â <strong>SDDï¼ˆSpec-Driven Developmentï¼Œè§„èŒƒé©±åŠ¨å¼€å‘ï¼‰</strong> ï¼šå…ˆå†™å¥½â€œåšä»€ä¹ˆâ€ï¼Œå†è®© AI ç²¾å‡†æ‰§è¡Œâ€œæ€ä¹ˆåšâ€ã€‚</p>
<p>åœ¨è¿™æ¡è·¯ä¸Šï¼Œæˆ‘ä»ä¸€ä¸ªè¢«è¯¾ç¨‹è®¾è®¡é€¼åˆ°å´©æºƒçš„å­¦ç”Ÿï¼Œæ…¢æ…¢æ‘¸ç´¢å‡ºä¸€å¥—å±äºè‡ªå·±çš„ Vibe Coding èŠ‚å¥ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘æƒ³å’Œä½ èŠèŠè¿™æ®µçœŸå®çš„æˆé•¿ç»å†ã€‚</p>
<p>è€Œè¿™ä¸€åˆ‡çš„è½¬æŠ˜ç‚¹ï¼Œå°±è—åœ¨Â <strong>SDDï¼ˆSpec-Driven Developmentï¼Œè§„èŒƒé©±åŠ¨å¼€å‘ï¼‰</strong> Â ä¹‹ä¸­ã€‚</p>
<h2 data-id="heading-1">ä¼ ç»Ÿcoding</h2>
<p>åœ¨ AI ç¼–ç¨‹å·¥å…·å°šæœªæ™®åŠçš„å¹´ä»£ï¼Œç›¸ä¿¡æœ‰å¾ˆå¤šäººå…¥é—¨éƒ½æ˜¯æ•²â€œCQå¤–å–â€è¿™æ ·çš„ç¨‹åºå¼€å§‹æ¥è§¦å¼€å‘çš„å§ï¼Œæˆ‘ä¹Ÿä¸ä¾‹å¤–ã€‚</p>
<p>å¼€å‘ä¸€ä¸ªåƒâ€œCQå¤–å–â€è¿™æ ·çš„ Spring + Vue å…¨æ ˆé¡¹ç›®ï¼Œæ˜¯ä¸€åœº<strong>æ¶ˆè€—äººåŠ›ã€æµç¨‹å›ºå®šã€èŠ‚å¥ç¼“æ…¢</strong>çš„å·¥ç¨‹ã€‚</p>
<p>é‚£æ—¶å€™å…¶å®å·²ç»æœ‰ AI äº†ï¼Œåªæ˜¯æˆ‘ä»¬ä¸ä¼šç”¨â€”â€”ä¸çŸ¥é“æ€ä¹ˆé—®ï¼Œä¹Ÿä¸æ•¢ä¿¡å®ƒèƒ½å†™å‡ºé è°±ä»£ç ã€‚äºæ˜¯åç«¯è¿˜æ˜¯è€è€å®å®ç”¨ MyBatis æ‰‹å†™ DAOï¼Œå‰ç«¯é  Vue çš„ data å’Œ methods ä¸€ç‚¹ç‚¹æ‹¼é¡µé¢</p>
<p>è¿ä¸€ä¸ªç®€å•çš„â€œåŠ å…¥è´­ç‰©è½¦â€åŠ¨ç”»éƒ½è¦ç¿»æ–‡æ¡£ã€è°ƒæ ·å¼ã€åå¤åˆ·æ–°æµè§ˆå™¨çœ‹æ•ˆæœã€‚</p>
<p>AI å°±åœ¨æ—è¾¹ï¼Œåƒä¸€ä¸ªæ²‰é»˜çš„ç‰¹ç§å…µ</p>
<p>æ•´ä¸ªè¿‡ç¨‹å¸¸å¸¸å°±ä¸€ä¸ªäººåŒ…æ½å…¨éƒ¨ï¼šè‡ªå·±å†™éœ€æ±‚ã€ç”»ç•Œé¢ã€å‰åç«¯ä¸€èµ·å†™ï¼Œæœ€åå†è‡ªå·±ç‚¹æŒ‰é’®ã€è¾“ä¹±ç æµ‹è¯•ä¼šä¸ä¼šå´©ã€‚æ²¡æœ‰åˆ†å·¥ï¼Œå´æœ‰å…¨å¥—æµç¨‹çš„è´Ÿæ‹…ã€‚</p>
<p>ä¸€æ—¦å“ªå—å¡ä½â€”â€”æ¯”å¦‚æ¥å£è¿˜æ²¡é€šï¼Œé¡µé¢å°±åŠ¨ä¸äº†â€”â€”æ•´ä¸ªé¡¹ç›®å°±åŸåœ°åœæ‘†ã€‚</p>
<p>è¿™ç§ä¼ ç»Ÿ coding æ¨¡å¼æœ¬èº«å¹¶ä¸ä½æ•ˆâ€”â€”å®ƒ<strong>è®²æµç¨‹ã€é‡è§„èŒƒã€æ±‚ç¨³å®š</strong>ï¼Œæ°æ°æ˜¯å¤§å‹é¡¹ç›®æ‰€éœ€è¦çš„ã€‚</p>
<blockquote>
<p>ä½†ä¸€æ—¦é¢å¯¹â€œç°åœ¨å°±è¦ç”¨â€è¿™ç±»è½»é‡ã€å³æ—¶çš„åœºæ™¯ï¼Œå®ƒçš„é‡é‡å°±å˜æˆäº†è´Ÿæ‹…ã€‚</p>
</blockquote>
<blockquote>
<p>æ­£å› å¦‚æ­¤ï¼Œå¼€å‘è€…å¼€å§‹è½¬å‘æ–°çš„æ€è·¯ï¼šä¸å†ä¸€ä¸Šæ¥å°±å†™ä»£ç ï¼Œè€Œæ˜¯å…ˆå†™æ¸…æ¥šè§„åˆ™ï¼›ä¸å†é ä¸€ä¸ªäººç¡¬æ‰›å…¨æ ˆï¼Œè€Œæ˜¯è®© AI æˆä¸ºåä½œä¼™ä¼´ã€‚</p>
</blockquote>
<h2 data-id="heading-2">Vibe Coding</h2>
<p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼šå½“æˆ‘ä¸º JavaWeb è¯¾ç¨‹è®¾è®¡ç„¦å¤´çƒ‚é¢ï¼Œä¸€ä½åŒå­¦å·²ç»ç”¨Â <strong>Trae</strong>Â è¾…åŠ©å®Œæˆäº†ä»–çš„é¡¹ç›®ã€‚ä»–æ²¡ç†¬å¤œï¼Œä¹Ÿæ²¡åœ¨æ§åˆ¶å°é‡Œç–¯ç‹‚404 500ï¼Œåè€Œæ—©æ—©å®Œæˆäº†è¯¾è®¾ã€‚</p>
<p>ä»–çœ‹æˆ‘å¿«è¢«è¯¾è®¾å¼„å´©æºƒäº†ï¼Œå°±é¡ºæ‰‹æŠŠä½¿ç”¨æ–¹æ³•æ•™ç»™äº†æˆ‘â€”â€”ç›´æ¥æŠŠå®éªŒé¢˜ç›®å¤åˆ¶åˆ°Traeï¼Œç„¶åæ ¹æ®ç”Ÿæˆçš„ç»“æœç»§ç»­å’Œå®ƒè¯´</p>
<p>æˆ‘è¯•äº†ä¸€æ¬¡ï¼Œå°±å†ä¹Ÿå›ä¸å»äº†ã€‚</p>
<p>ä»å‰æ˜¯<strong>äººé€‚åº”æ¡†æ¶ï¼Œç°åœ¨æ˜¯â€œAI å¸®ä½ æ­å¥½æ¶å­ï¼Œä½ åªç®¡å¡«é€»è¾‘</strong>ã€‚</p>
<p>æˆ‘ä»æ­¤ä¸€å‘ä¸å¯æ”¶æ‹¾â€”â€”è¯¾ç¨‹è®¾è®¡æå‰å®Œæˆï¼Œè¿˜é¡ºæ‰‹åŠ äº†ç”¨æˆ·ç™»å½•ã€åˆ†é¡µæŸ¥è¯¢ã€å“åº”å¼å¸ƒå±€ã€‚</p>
<p>æ›´å…³é”®çš„æ˜¯ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è§‰å¾—ï¼Œç¼–ç¨‹ä¸æ˜¯è‹¦åŠ›ï¼Œè€Œæ˜¯ä¸€ç§<strong>æŒ‡æŒ¥ä¸åä½œçš„è‰ºæœ¯</strong>ã€‚</p>
<p>è¿™å’Œä¸‹é¢è¦èŠçš„ vibe Coding å¯†åˆ‡ç›¸å…³ã€‚</p>
<hr/>
<h2 data-id="heading-3">vibe Coding ä¸‰å¤§é˜¶æ®µ</h2>
<h3 data-id="heading-4">vibeæ„Ÿ çš„ç¬¬ä¸€é˜¶æ®µ  ç”¨ä¸€ä¸¤å¥è¯æ¥æè¿°éœ€æ±‚</h3>
<p>å½“ç„¶ï¼Œä¸Šé¢çš„è¡Œä¸ºæˆ‘è¿˜æ˜¯ä¸æ¨èçš„â€”â€”ä½œä¸šç»ˆç©¶è¿˜æ˜¯è¦è‡ªå·±è®¤çœŸå†™ï¼ŒåŸºç¡€ä¸ç‰¢ï¼Œåœ°åŠ¨å±±æ‘‡ã€‚</p>
<p>æˆ‘ä¹‹æ‰€ä»¥åˆ†äº«è¿™æ®µç»å†ï¼Œå¹¶ä¸æ˜¯é¼“åŠ±ç›´æ¥â€œäº¤AIä»£åŠ³â€ï¼Œè€Œæ˜¯æƒ³è¯´æ˜ï¼š<strong>å·¥å…·æœ¬èº«æ²¡æœ‰å¯¹é”™ï¼Œå…³é”®åœ¨äºä½ æ€ä¹ˆç”¨å®ƒ</strong>ã€‚</p>
<blockquote>
<p>æˆ‘ä¸Šé¢ä½¿ç”¨çš„æ–¹æ³•ï¼Œå…¶å®æ­£æ˜¯ Vibe Coding çš„ç¬¬ä¸€ä¸ªé˜¶æ®µï¼šç”¨ä¸€ä¸¤å¥è¯æè¿°éœ€æ±‚</p>
</blockquote>
<p>æ¯”å¦‚â€œå¸®æˆ‘åœ¨è¿™ä¸ª Spring Boot é¡¹ç›®é‡ŒåŠ ä¸€ä¸ªæ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·çš„åŠŸèƒ½â€æˆ–è€…â€œåœ¨ç°æœ‰çš„ Vue é¡µé¢ä¸ŠåŠ ä¸€ä¸ªæ¸…ç©ºè´­ç‰©è½¦çš„æŒ‰é’®â€</p>
<p>è¿™ç§ç”¨æ³•ï¼Œåœ¨æˆ‘çš„å¤§å­¦ç”Ÿæ¶¯é‡Œæ›´å¤šå‡ºç°åœ¨è¯¾å ‚ä½œä¸šä¸­â€”â€”è€å¸ˆç»™äº†åŸºç¡€æºç ï¼Œæˆ‘ä»¬æ‹‰å–ä¸‹æ¥åï¼Œç›´æ¥åœ¨AIç¼–è¾‘å™¨(æ¯”å¦‚Trae)è¯´ï¼šâ€œæˆ‘è¦å®ç° XX åŠŸèƒ½â€ï¼ŒAI å°±èƒ½å¿«é€Ÿç”Ÿæˆç¬¦åˆé¡¹ç›®ç»“æ„çš„ä»£ç ç‰‡æ®µã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘å¹¶ä¸æ˜¯ç›´æ¥ç…§æ¬â€”â€”æ¯æ®µ AI ç”Ÿæˆçš„ä»£ç æˆ‘éƒ½ä¼šè¯»ï¼Œä¸ä»…çœ‹å®ƒæ€ä¹ˆå†™ï¼Œæ›´ç¢ç£¨å®ƒä¸ºä»€ä¹ˆè¿™æ ·å†™ã€‚</p>
<blockquote>
<p>æ‰€ä»¥ï¼Œå“ªæ€•åªæ˜¯â€œä¸€å¥è¯ promptâ€ï¼Œåªè¦å¸¦ç€å­¦ä¹ çš„ç›®çš„å»ç”¨ï¼ŒVibe Coding çš„èµ·ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ‰å®æˆé•¿çš„å¼€å§‹ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-5">vibeæ„Ÿ çš„ç¬¬äºŒé˜¶æ®µ  è®¾è®¡prompt</h3>
<p>å½“ç„¶ï¼Œä¸Šé¢é‚£ç§â€œä¸€ä¸¤å¥è¯å¥è¯ç”Ÿæˆâ€çš„æ–¹æ³•æ‰“æ‰“å¸¸è§„èµ›è¿˜è¡Œï¼Œ</p>
<p>ä½†ä¸€åˆ°â€œå­£åèµ›â€ï¼Œæ¯”å¦‚æœŸä¸­è¯¾ç¨‹è®¾è®¡ï¼Œå­¦æ ¡è¯·æ¥äº†æŸé©¬çš„è€å¸ˆç°åœºæ£€æŸ¥ä½œä¸šï¼Œæƒ…å†µå°±ä¸åŒäº†ã€‚</p>
<p>æ¥çš„ä¸æ˜¯åªçœ‹ç»“æœçš„å¤§å­¦è€å¸ˆï¼Œè€Œæ˜¯çœŸæ­£åœ¨å…¬å¸å¹²è¿‡å¼€å‘çš„å¹´è½»è®²è§£è€å¸ˆã€‚è¿™æ—¶å€™ï¼Œå…‰é  AI å †ä»£ç å°±è¡Œä¸é€šäº†ï¼Œæˆ‘ä»¬çš„æ‰“æ³•å°±å¾—åâ€œæ¬§ç¾â€ä¸€ç‚¹äº†ï¼š<strong>ç»“æ„æ¸…æ™°ã€å‘½åä¸¥è°¨ã€æ³¨é‡Šåˆ°ä½ã€é€»è¾‘å¯è¿½æº¯</strong>â€”â€”æ¯•ç«Ÿï¼Œäººå®¶ä¸€çœ¼å°±èƒ½çœ‹å‡ºä»£ç æ˜¯â€œæ‰‹æ“çš„â€è¿˜æ˜¯â€œç³Šå¼„çš„â€ã€‚</p>
<p>å…·ä½“è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p><strong>å…³é”®åœ¨äºå‡çº§æç¤ºè¯</strong></p>
<ol>
<li>
<p>æˆ‘ä»¬å¯ä»¥å…ˆèµ‹äºˆ AI ä¸€ä¸ªæ˜ç¡®è§’è‰²ï¼Œæ¯”å¦‚â€œèµ„æ·±å…¨æ ˆå·¥ç¨‹å¸ˆâ€</p>
</li>
<li>
<p>å†è¯´æ˜é¡¹ç›®ç»“æ„ï¼ˆæ–‡ä»¶è¯¥æ”¾å“ªå„¿ï¼‰ã€ä»£ç è§„èŒƒï¼ˆES6ã€TailwindCSSã€RESTful ç­‰ï¼‰</p>
</li>
<li>
<p>æ¥ç€æ¸…æ™°æè¿°å½“å‰éœ€æ±‚ï¼Œæä¾›å¿…è¦çš„ä¸Šä¸‹æ–‡ï¼ˆå¦‚æŠ€æœ¯æ ˆã€å·²æœ‰æ¨¡å—ï¼‰ï¼Œå¹¶æŒ‡å®šè¾“å‡ºæ ¼å¼ï¼ˆå®Œæ•´æ–‡ä»¶ã€é€»è¾‘ç‰‡æ®µæˆ–å¸¦æ³¨é‡Šçš„ä»£ç ï¼‰ã€‚</p>
</li>
</ol>
<blockquote>
<p>ç›¸æ¯”ç¬¬ä¸€é˜¶æ®µçš„éšæœºæŠ½å¡ï¼Œè¿™æ—¶çš„æç¤ºè¯æ›´ä¸“ä¸šã€æ›´ç³»ç»Ÿï¼Œæœ¬è´¨ä¸Šæ˜¯ç”¨å·¥ç¨‹è¯­è¨€å¼•å¯¼å¤§æ¨¡å‹ï¼ŒæŠŠæ¨¡ç³Šæƒ³æ³•æ‹†è§£ä¸ºå¯æ‰§è¡Œä»»åŠ¡ï¼Œä»è€Œç²¾å‡†æ§åˆ¶ Vibe Coding çš„äº§å‡ºè´¨é‡â€”â€”ä»â€œç¢°è¿æ°”â€è¿ˆå‘â€œå¯é¢„æµ‹â€ã€‚</p>
</blockquote>
<hr/>
<h3 data-id="heading-6">vibeæ„Ÿ çš„ç¬¬ä¸‰é˜¶æ®µ  å¤šAgentåä½œ</h3>
<p>åˆ°äº†ç¬¬ä¸‰é˜¶æ®µï¼Œå…¶å®å°±å’Œå®Œæˆå¤§å­¦ä½œä¸šæ²¡ä»€ä¹ˆå…³ç³»äº†ã€‚</p>
<p>Vibe Coding ä¸å†æ˜¯â€œäºº + AIâ€çš„å•æ‰“ç‹¬æ–—ï¼Œè€Œæ˜¯æ¼”å˜ä¸ºä¸€å¥—<strong>å¤š Agent åä½œçš„è‡ªåŠ¨åŒ–å¼€å‘æµæ°´çº¿</strong>ã€‚<br/>
åœ¨çœŸæ­£å†™ä»£ç ä¹‹å‰ï¼Œå…ˆè®© AI æ‰®æ¼”ä¸åŒè§’è‰²ï¼ŒæŒ‰ä¸“ä¸šæµç¨‹ä¾æ¬¡æ¨è¿›ï¼š</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šæˆ‘ä»¬è¦åšä¸€ä¸ªå¾®ä¿¡è®°ç‰Œå°ç¨‹åºã€‚</p>
<p>é¦–å…ˆï¼Œåœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·é‡Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/732ce328e728498895d30f2dc2a3404e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324661&amp;x-signature=eJODwwBzXD3GTjLqkR4GSG70rSY%3D" alt="image.png" loading="lazy"/></p>
<p>æ¥ç€ï¼Œç”¨ Gemini 3 å¸®æˆ‘ä»¬ç”Ÿæˆä¸€ä»½é«˜è´¨é‡çš„ Promptï¼ˆå…·ä½“æ€ä¹ˆè®¿é—® Gemini è‡ªå·±æƒ³åŠæ³•ï¼‰ã€‚è¾“å…¥ä¸¤æ®µå¼•å¯¼æ€§æç¤ºï¼š</p>
<pre><code class="hljs language-ini" lang="ini">ä½ æ˜¯ä¸€ä¸ªå¤§å¸ˆçº§çš„å¾®ä¿¡å°ç¨‹åºäº§å“ç»ç†ï¼Œæˆ‘ç°åœ¨éœ€è¦ä½ å¸®æˆ‘æŠŠæƒ³æ³•å˜æˆéœ€æ±‚æ–‡æ¡£ï¼Œç”¨äºç»™åˆ°AIç¼–ç¨‹å·¥å…·è¿›è¡Œå®ç°ï¼š
</code></pre>
<pre><code class="hljs language-ini" lang="ini">æˆ‘ä»¬éœ€è¦å…ˆè®¨è®ºä¸€ä¸‹éœ€æ±‚ï¼Œç­‰ç¡®å®šäº†æ‰€æœ‰çš„éœ€æ±‚ï¼Œæˆ‘ä»¬åœ¨è¿›è¡Œç¬¬äºŒæ­¥
</code></pre>
<p>æ ¹æ®ä½ çš„å…·ä½“æƒ³æ³•ï¼ŒAI ä¼šè¾“å‡ºä¸€ä»½é«˜åº¦ç»“æ„åŒ–ã€å¯ç›´æ¥ç”¨äºå·¥ç¨‹è½åœ°çš„ Specã€‚ä¸åŒçš„äººè¾“å…¥ï¼Œå¾—åˆ°çš„ Prompt ä¹Ÿä¸åŒâ€”â€”è¿™æ‰æ˜¯çœŸæ­£çš„ä¸ªæ€§åŒ–åä½œã€‚</p>
<p>æ¯”å¦‚ï¼Œä½ å¯èƒ½ä¼šå¾—åˆ°è¿™æ ·ä¸€ä»½æç¤ºè¯ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">Role: Expert WeChat Mini Program Developer
Task: Create a standalone scoring Mini Program (offline-first).
Language: JavaScript (Native WeChat Framework), WXSS, WXML.
1. Project Context (é¡¹ç›®èƒŒæ™¯)
è¿™æ˜¯ä¸€ä¸ªç”¨äºçº¿ä¸‹æ¡Œæ¸¸ï¼ˆéº»å°†ã€æ‰‘å…‹ï¼‰çš„é€šç”¨è®°åˆ†å·¥å…·ã€‚
æ ¸å¿ƒé€»è¾‘ï¼šåŸºäºâ€œé›¶å’Œæ¸¸æˆâ€è§„åˆ™ï¼ˆZero-Sum Gameï¼‰ï¼Œå³æ¯å±€æ‰€æœ‰ç©å®¶çš„å¾—åˆ†ä¹‹å’Œå¿…é¡»ä¸º 0ã€‚
è¿è¡Œæ¨¡å¼ï¼šå•æœºç‰ˆï¼Œæ— åç«¯ï¼Œæ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æœ¬åœ°ç¼“å­˜ï¼ˆLocalStorageï¼‰ã€‚
ç”¨æˆ·ï¼šé€šå¸¸ç”±å…¶ä¸­ä¸€åç©å®¶æ“ä½œï¼Œè®°å½•æ‰€æœ‰äººçš„åˆ†æ•°ã€‚
2. Tech Stack (æŠ€æœ¯æ ˆçº¦æŸ)
Framework: Native WeChat Mini Program (åŸç”Ÿå¼€å‘).
Styling: Standard WXSS (Flexbox layout). Minimalistic design.
Storage: wx.setStorageSync / wx.getStorageSync.
Logic: No external dependencies. Pure JS logic.
3. Data Schema (æ•°æ®ç»“æ„è®¾è®¡)
Please strict follow this JSON structure for LocalStorage key game_history.
code
JSON
<span class="hljs-section">[
  {
    "id": "uuid_v4_string",          // å”¯ä¸€ç‰Œå±€ID
    "name": "2023-10-01 æ¬¢ä¹éº»å°†",    // ç‰Œå±€åç§°
    "createTime": 1696123456789,     // åˆ›å»ºæ—¶é—´æˆ³
    "playerCount": 4,                // ç©å®¶äººæ•° (2-6)
    "players": [                     // ç©å®¶åˆ—è¡¨
      { "id": 0, "name": "å¼ ä¸‰", "totalScore": 10 },
      { "id": 1, "name": "æå››", "totalScore": -5 },
      { "id": 2, "name": "ç‹äº”", "totalScore": -5 },
      { "id": 3, "name": "èµµå…­", "totalScore": 0 }
    ]</span>,
    "rounds": <span class="hljs-section">[                      // å¯¹å±€è®°å½•æµæ°´
      {
        "roundId": 1,
        "timestamp": 1696123500000,
        "scores": [10, -5, -5, 0]</span>    // å¯¹åº” players æ•°ç»„ç´¢å¼•çš„åˆ†æ•°å˜åŒ–
      }
    ]
  }
]
4. Page Flow &amp; Requirements (é¡µé¢é€»è¾‘)
Page 1: Home (é¦–é¡µ - ç‰Œå±€åˆ—è¡¨)
UI:
Show list of saved games (Name + Date + Player names).
If list is empty, show a placeholder image + "Create New Game" button.
Floating Action Button (FAB): "+" to create a new game.
Interaction:
Click item -&gt; Go to Page 3 (Scoreboard).
Long press item -&gt; Option to Delete game.
Page 2: Create Game (æ–°å»ºç‰Œå±€)
UI:
Input: "Game Name" (Default: Current Date + "Game").
Selector: "Player Count" (Range: 2 to 6, Default: 4).
Dynamic Inputs: "Player Names" based on count (Default: P1, P2, P3...).
Logic:
On "Start": Initialize the data structure and save to LocalStorage, then redirect to Page 3.
Page 3: Scoreboard (è®¡åˆ†çœ‹æ¿ - æ ¸å¿ƒé¡µ)
Header:
Grid layout showing current totalScore for each player.
Highlight the winner (highest score) in Red, loser in Green.
Body (List):
Reverse chronological list of rounds (Round 10, Round 9...).
Show specific score changes for that round (e.g., +10 | -5 | -5 | 0).
Delete Function: Allow deleting the last record only (to prevent logic errors).
Footer:
Large Button: "Record Round" -&gt; Opens Page 4.
Page 4: Input Score (è®°åˆ†å½•å…¥)
UI:
List of players. Each row has: Player Name + Input Field (Number).
Auto-Balance Button: A button next to the last player or at the bottom.
Logic: Calculates 0 - (Sum of other players) and fills the remaining field.
Validation (Strict Zero-Sum):
Before saving, check: Sum(scores) === 0.
If Sum !== 0, show Toast error: "Total score must be 0! Current: +X".
Allow input of 0.
Save:
On success: Update players.totalScore, push to rounds, save to LocalStorage, go back to Page 3.
5. Edge Cases (å¼‚å¸¸å¤„ç†)
Input Type: Ensure inputs handle negative numbers (keyboard type usually digit or number allowing -).
Empty Input: Treat empty input as 0.
Data Persistence: Update LocalStorage immediately after every round addition/deletion.
</code></pre>
<p>ç„¶åï¼Œæ‰“å¼€ä½ å–œæ¬¢çš„ AI ç¼–è¾‘å™¨ï¼ˆæ¯”å¦‚ Traeã€Cursorï¼‰ï¼ŒæŠŠåˆšæ‰æ–°å»ºçš„ç©ºé¡¹ç›®æ–‡ä»¶å¤¹æ‹–è¿›å»ï¼ŒæŠŠè¿™ä»½ Prompt ç²˜è¿›å»ï¼Œè®©å®ƒå¼€å§‹ç”Ÿæˆä»£ç </p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4fb765e33c6840be86d1ab3e73f5a7da~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pyJ5oSP5LmJ:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324661&amp;x-signature=raZiGPADyuNJxqLH7L3%2BcRRWqsE%3D" alt="image.png" loading="lazy"/></p>
<p>ç„¶åå¾—åˆ°äº†è¿™æ ·çš„ç»“æœã€‚è¿™æœ¬æ¥ä¹Ÿä¸æ˜¯å¹²è´§åšå®¢ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦çœ‹è¿™ä¸ªpromptå’Œç”Ÿæˆçš„ä»£ç ã€‚</p>
<blockquote>
<p>ä½ ä¼šå‘ç°ï¼šå®ƒç”Ÿæˆçš„ä»£ç ç»“æ„æ¸…æ™°ã€é€»è¾‘ä¸¥è°¨ã€æ³¨é‡Šåˆ°ä½ï¼Œç”šè‡³è€ƒè™‘äº†é›¶å’Œæ ¡éªŒã€æœ¬åœ°å­˜å‚¨æ ¼å¼ã€è¾¹ç•Œè¾“å…¥å¤„ç†ç­‰ç»†èŠ‚ã€‚</p>
</blockquote>
<p>è¿™å·²ç»ä¸æ˜¯â€œå¸®æˆ‘å†™ä¸ªåŠŸèƒ½â€äº†ï¼Œè€Œæ˜¯â€œæŒ‰ç”Ÿäº§æ ‡å‡†äº¤ä»˜ä¸€ä¸ªæ¨¡å—â€ã€‚</p>
<p>è€Œä¸”è¯´å®è¯â€”â€”<strong>è¿™ä»½ Promptï¼Œç¡®å®æ¯”æˆ‘æ‰‹å†™çš„è¦å¥½å¾—å¤š</strong>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼šæ•´ä¸ªè¿‡ç¨‹å¼ºè°ƒ<strong>è§„çŸ©ã€ä¸“ä¸šã€æµç¨‹åŒ–</strong>ï¼Œä¸å†æ˜¯éšæ„ç”Ÿæˆï¼Œè€Œæ˜¯ä»¥ Spec ä¸ºå”¯ä¸€æƒå¨æºâ€”â€”è¿™å°±æ˜¯Â <strong>Spec-Driven Developmentï¼ˆè§„èŒƒé©±åŠ¨å¼€å‘ï¼ŒSDDï¼‰</strong> Â çš„æ ¸å¿ƒç†å¿µï¼šå…ˆå†™æ¸…æ¥šâ€œè¦åšä»€ä¹ˆâ€ï¼Œå†è®©å„è§’è‰²å›´ç»•è§„èŒƒååŒå±¥çº¦ã€‚</p>
<p>æ­¤æ—¶çš„ Vibe Codingï¼Œå·²æ¥è¿‘ç”Ÿäº§çº§æ ‡å‡†ï¼š<strong>å¯å®¡è®¡ã€å¯è¿½æº¯ã€å¯è¿­ä»£</strong>ã€‚AI ä¸å†æ˜¯ç¬¬ä¸€ï¼Œç¬¬äºŒé˜¶æ®µçš„promptæŠ½å¡æœºï¼Œè€Œæ˜¯ä¸€æ”¯è®­ç»ƒæœ‰ç´ çš„è™šæ‹Ÿå·¥ç¨‹å›¢é˜Ÿâ€”â€”ä½ åªéœ€æ‹…ä»»â€œ<strong>æŠ€æœ¯è´Ÿè´£äºº</strong>â€ï¼ŒæŠŠæ§æ–¹å‘ï¼Œåè°ƒèŠ‚å¥ï¼Œç¡®ä¿æ¯ä¸ª Agent éƒ½åœ¨æ­£ç¡®çš„è½¨é“ä¸Šäº¤ä»˜é«˜è´¨é‡äº§å‡ºã€‚</p>
<h3 data-id="heading-7">è¿™é‡Œæˆ‘è¦å¼ºè°ƒä¸€ä¸ªæ¦‚å¿µ:SDD</h3>
<p><strong>SDDï¼ˆSpec-Driven Developmentï¼Œè§„èŒƒé©±åŠ¨å¼€å‘ï¼‰</strong></p>
<p>æ˜¯ä¸€ç§ä»¥æ¸…æ™°ã€å¯æ‰§è¡Œçš„è§„èŒƒä¸ºèµ·ç‚¹å’Œå”¯ä¸€æƒå¨çš„å¼€å‘èŒƒå¼â€”â€”å…ˆå†™å¥½â€œåˆåŒâ€ï¼Œå†è®©ä»£ç å±¥çº¦ã€‚</p>
<p>åœ¨ Vibe Coding çš„ç¬¬ä¸‰é˜¶æ®µï¼Œ<strong>SDD æˆä¸ºæ ¸å¿ƒï¼šAI ä¸å†å‡­è¯­ä¹‰çš„æ¨¡ç³ŠæŒ‡ä»¤è‡ªç”±å‘æŒ¥ï¼Œè€Œæ˜¯å›´ç»•ä¸€ä»½ç”±è™šæ‹Ÿäº§å“ç»ç†äº§å‡ºçš„ç»“æ„åŒ–éœ€æ±‚æ–‡æ¡£ï¼ˆSpec.mdï¼‰ï¼Œä¾æ¬¡é©±åŠ¨è®¾è®¡ã€ç¼–ç ä¸æµ‹è¯•ï¼Œç¡®ä¿æ¯ä¸ªç¯èŠ‚éƒ½ä¸¥æ ¼å¯¹é½åŒä¸€ä»½å¥‘çº¦ã€‚</strong></p>
<p>å’Œâ€œå…ˆå†™ä»£ç å†è¡¥æ–‡æ¡£â€ä¸åŒï¼ŒSpec-Driven å¼ºè°ƒä»£ç å¿…é¡»ä¸¥æ ¼æ»¡è¶³è§„èŒƒï¼Œè€Œä¸æ˜¯é å£å¤´ç†è§£æˆ–ä¸´æ—¶ä¿®æ”¹ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼šéœ€æ±‚æ›´æ¸…æ™°ã€æ²Ÿé€šæˆæœ¬æ›´ä½ã€è¿”å·¥æ›´å°‘ï¼Œä¹Ÿæ›´å®¹æ˜“åšè‡ªåŠ¨åŒ–æµ‹è¯•ã€‚</p>
<blockquote>
<p>AI ä¹Ÿä¸å†æ˜¯é­”æœ¯å¸ˆï¼Œè€Œæ˜¯ä¸€ä¸ªå®ˆè§„çŸ©çš„åä½œè€…ã€‚</p>
</blockquote>
<h2 data-id="heading-8">æ€»ç»“</h2>
<p>æ•´ç¯‡åšå®¢ï¼Œæˆ‘éƒ½æ˜¯ä»¥ä¸€ä¸ªæ™®é€šåœ¨æ ¡å­¦ç”Ÿçš„è§†è§’ï¼Œè®²äº†è‡ªå·±æ€ä¹ˆä»â€œæ‰‹æ•² CQ å¤–å–â€ä¸€æ­¥æ­¥èµ°åˆ°ç”¨ Vibe Coding æå®šè¯¾ç¨‹è®¾è®¡çš„è¿‡ç¨‹ã€‚</p>
<p>ä¸€å¼€å§‹æ˜¯è¢«è¯¾ç¨‹è®¾è®¡é€¼åˆ°å¢™è§’ï¼Œå¶ç„¶çœ‹åˆ°åŒå­¦ç”¨ Trae å‡ åˆ†é’Ÿè·‘é€šäº†æˆ‘ç†¬ä¸€æ™šä¸Šéƒ½æä¸å®šçš„é€»è¾‘ï¼›åæ¥æ…¢æ…¢å‘ç°</p>
<blockquote>
<p>AI ä¸æ˜¯ç”¨æ¥æŠ„ç­”æ¡ˆçš„ï¼Œè€Œæ˜¯ç”¨æ¥æ”¾å¤§ä½ çš„å·¥ç¨‹æ€ç»´çš„ã€‚</p>
</blockquote>
<p>è€Œè¿™ä¸€åˆ‡èƒ½çœŸæ­£è½åœ°çš„å…³é”®ï¼Œå°±æ˜¯Â <strong>SDDï¼ˆSpec-Driven Developmentï¼‰</strong> ã€‚<br/>
å®ƒè®©æˆ‘æ˜ç™½ï¼šæœªæ¥æœ€æœ‰ä»·å€¼çš„ç¨‹åºå‘˜ï¼Œå¯èƒ½ä¸æ˜¯å†™ä»£ç æœ€å¿«çš„é‚£ä¸ªï¼Œè€Œæ˜¯<strong>èƒ½æŠŠéœ€æ±‚ç¿»è¯‘æˆæ¸…æ™°ã€å¯æ‰§è¡Œè§„èŒƒ</strong>çš„é‚£ä¸ªäººã€‚</p>
<p>Vibe Coding ä¸æ˜¯å–ä»£æˆ‘ä»¬ï¼Œè€Œæ˜¯è®©æˆ‘ä»¬ç»ˆäºå¯ä»¥åƒçœŸæ­£çš„å·¥ç¨‹å¸ˆé‚£æ ·å·¥ä½œâ€”â€”ä¸é è›®åŠ›ï¼Œè€Œé æŒ‡æŒ¥ç³»ç»Ÿã€‚</p>
<p>è€Œè¿™ï¼Œæˆ–è®¸æ‰æ˜¯ç¼–ç¨‹æœ¬è¯¥æœ‰çš„æ ·å­ã€‚</p>
<p>2025å¹´æ˜¯Agent å…ƒå¹´ï¼Œä¸ç®¡ä¸‹å­¦æœŸæˆ‘ä¼šå·å·è·‘å»å“ªå®¶å…¬å¸å®ä¹ ï¼Œæˆ‘éƒ½ä¼šç»§ç»­æ‹¥æŠ±æœ€å‰æ²¿çš„æŠ€æœ¯ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MySQL æ€§èƒ½è°ƒä¼˜ï¼šä»EXPLAINåˆ°JSONç´¢å¼•ä¼˜åŒ–]]></title>    <link>https://juejin.cn/post/7592127014187646976</link>    <guid>https://juejin.cn/post/7592127014187646976</guid>    <pubDate>2026-01-06T19:19:50.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592127014187646976" data-draft-id="7592094358657204258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MySQL æ€§èƒ½è°ƒä¼˜ï¼šä»EXPLAINåˆ°JSONç´¢å¼•ä¼˜åŒ–"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-06T19:19:50.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ®å°é¦’å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/48851852475720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MySQL æ€§èƒ½è°ƒä¼˜ï¼šä»EXPLAINåˆ°JSONç´¢å¼•ä¼˜åŒ–
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/48851852475720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ®å°é¦’å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T19:19:50.000Z" title="Tue Jan 06 2026 19:19:50 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šä»£ç åœ¨æµ‹è¯•ç¯å¢ƒè·‘å¾—é£å¿«ï¼Œä¸Šçº¿å°±å´©ï¼Ÿ</h2>
<p>å¾ˆå¤šåç«¯å¼€å‘è€…éƒ½ç»å†è¿‡è¿™æ ·çš„â€œè‡³æš—æ—¶åˆ»â€ï¼š</p>
<p>åŠŸèƒ½åœ¨å¼€å‘ç¯å¢ƒï¼ˆæ•°æ®é‡ &lt; 1ä¸‡ï¼‰æµ‹è¯•æ—¶ä¸èˆ¬é¡ºæ»‘ï¼Œæ¥å£å“åº”æ—¶é—´ 20msã€‚ä¸€ä¸Šçº¿åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆæ•°æ®é‡ &gt; 500ä¸‡ï¼‰ï¼ŒåŒä¸€ä¸ªæ¥å£ç›´æ¥è¶…æ—¶ï¼ˆTimeoutï¼‰ï¼Œç”šè‡³æŠŠæ•°æ®åº“ CPU æ‹–åˆ° 100%ï¼Œå¯¼è‡´æ•´ä¸ªæœåŠ¡ä¸å¯ç”¨ã€‚</p>
<p>é€šå¸¸ï¼Œè¿™ç±»é—®é¢˜çš„æ ¹æºå¯èƒ½åœ¨äº <strong>SQL æ‰§è¡Œæ•ˆç‡ä½ä¸‹</strong>ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f88a037dff6b4e05829b7e1b1327c1aa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768331990&amp;x-signature=C%2Bhg3ruujgO9sbV4QtzEbXKI36s%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ç¬¬ä¸€æ­¥ï¼šè¯Šæ–­â€”â€”è¯»æ‡‚ EXPLAIN</h2>
<p>å½“ä¸€æ¡ SQL è·‘å¾—æ…¢ï¼Œç¬¬ä¸€ååº”ä¸åº”è¯¥æ˜¯â€œæ”¹ä»£ç â€ï¼Œè€Œæ˜¯â€œçœ‹ç—…â€ã€‚MySQL æä¾›çš„ EXPLAIN å‘½ä»¤å°±æ˜¯æ•°æ®åº“çš„ X å…‰æœºã€‚</p>
<p>åœ¨ä»»ä½• SQL è¯­å¥å‰åŠ ä¸Š EXPLAINï¼Œæ•°æ®åº“ä¸ä¼šæ‰§è¡Œå®ƒï¼Œè€Œæ˜¯ä¼šå‘Šè¯‰ä½ ï¼š<strong>â€œå¦‚æœä½ è®©æˆ‘æ‰§è¡Œè¿™æ¡è¯­å¥ï¼Œæˆ‘ä¼šæ€ä¹ˆåšã€‚â€</strong></p>
<pre><code class="hljs language-ini" lang="ini">EXPLAIN SELECT * FROM t_users WHERE <span class="hljs-attr">phone</span> = <span class="hljs-string">'13800138000'</span><span class="hljs-comment">;</span>
</code></pre>
<p>è¾“å‡ºç»“æœä¸­ï¼Œæœ‰ä¸¤åˆ—å†³å®šäº†æŸ¥è¯¢çš„ç”Ÿæ­»ï¼š</p>
<h2 data-id="heading-2">1. type åˆ—ï¼šæ€§èƒ½çš„â€œé˜¶çº§åˆ’åˆ†â€</h2>
<p>è¿™ä¸ªå­—æ®µä»£è¡¨äº† MySQL æŸ¥æ‰¾æ•°æ®çš„æ–¹å¼ã€‚ä»ä¼˜åˆ°å·®ï¼Œæ€§èƒ½é˜¶æ¢¯å¦‚ä¸‹ï¼š</p>
<ul>
<li><strong>system / const</strong>ï¼šâš¡ï¸ <strong>æå¿«</strong>ã€‚ç›´æ¥å‘½ä¸­ä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•ï¼Œåªè¯»ä¸€è¡Œã€‚</li>
<li><strong>ref</strong>ï¼šğŸš€ <strong>å¿«</strong>ã€‚ä½¿ç”¨äº†æ™®é€šç´¢å¼•ã€‚</li>
<li><strong>range</strong>ï¼šğŸš— <strong>è¿˜è¡Œ</strong>ã€‚ç´¢å¼•èŒƒå›´æ‰«æï¼Œå¸¸è§äº &gt; &lt;ã€BETWEENã€‚</li>
<li><strong>index</strong>ï¼šğŸš² <strong>æ…¢</strong>ã€‚è™½ç„¶ç”¨äº†ç´¢å¼•ï¼Œä½†æ‰«æäº†æ•´ä¸ªç´¢å¼•æ ‘ï¼ˆå…¨ç´¢å¼•æ‰«æï¼‰ã€‚</li>
<li><strong>ALL</strong>ï¼šğŸ¢ <strong>ææ…¢ï¼ˆæ­»ç½ªï¼‰</strong>ã€‚å…¨è¡¨æ‰«æï¼ˆFull Table Scanï¼‰ï¼Œå‡ ç™¾ä¸‡æ¡æ•°æ®ä¸€æ¡æ¡è¿‡ã€‚</li>
</ul>
<p><strong>å®æˆ˜å‡†åˆ™ï¼š</strong> ç”Ÿäº§ç¯å¢ƒçš„ SQLï¼Œè‡³å°‘è¦è¾¾åˆ° <strong>range</strong> çº§åˆ«ï¼Œæœ€å¥½æ˜¯ <strong>ref</strong>ã€‚å¦‚æœæ˜¯ <strong>ALL</strong>ï¼Œå¿…é¡»ä¼˜åŒ–ã€‚</p>
<h2 data-id="heading-3">2. Extra åˆ—ï¼šè­¦æƒ•â€œå‰¯ä½œç”¨â€</h2>
<ul>
<li><strong>Using filesort</strong>ï¼šâš ï¸ <strong>å±é™©</strong>ã€‚è¯´æ˜æ•°æ®åº“æ²¡æ³•åˆ©ç”¨ç´¢å¼•é¡ºåºï¼Œå¿…é¡»åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­è¿›è¡Œé¢å¤–çš„æ’åºæ“ä½œã€‚CPU æ€æ‰‹ã€‚</li>
<li><strong>Using temporary</strong>ï¼šâš ï¸ <strong>å±é™©</strong>ã€‚åˆ›å»ºäº†ä¸´æ—¶è¡¨æ¥å¤„ç†æŸ¥è¯¢ã€‚å¸¸è§äº GROUP BY æˆ– DISTINCTã€‚</li>
</ul>
<h2 data-id="heading-4">ç¬¬äºŒæ­¥ï¼šæ²»ç–—â€”â€”è”åˆç´¢å¼•çš„â€œæœ€å·¦å‰ç¼€â€é™·é˜±</h2>
<p>è¯Šæ–­å‡º type: ALL åï¼Œæœ€ç›´æ¥çš„è§£æ³•æ˜¯åŠ ç´¢å¼•ã€‚ä½†ç´¢å¼•ä¸æ˜¯ä¹±åŠ çš„ï¼Œå°¤å…¶æ˜¯<strong>è”åˆç´¢å¼•ï¼ˆJoint Indexï¼‰</strong>ã€‚</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€å¼ è®¢å•è¡¨ï¼Œå»ºäº†ä¸€ä¸ªè”åˆç´¢å¼• idx_a_b_c (company_id, workshop_id, order_status)ã€‚</p>
<h2 data-id="heading-5">é™·é˜±ï¼šä¸ºä»€ä¹ˆç´¢å¼•å¤±æ•ˆäº†ï¼Ÿ</h2>
<p><strong>åœºæ™¯ 1ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">SELECT * FROM t_orders WHERE <span class="hljs-attr">company_id</span> = <span class="hljs-number">10</span> AND workshop_id = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
</code></pre>
<p>âœ… <strong>ç´¢å¼•ç”Ÿæ•ˆã€‚</strong> å‘½ä¸­äº†å‰ä¸¤ä¸ªå­—æ®µã€‚</p>
<p><strong>åœºæ™¯ 2ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">SELECT * FROM t_orders WHERE <span class="hljs-attr">workshop_id</span> = <span class="hljs-number">5</span><span class="hljs-comment">;</span>
</code></pre>
<p>âŒ <strong>ç´¢å¼•å¤±æ•ˆï¼ˆtype: ALLï¼‰ã€‚</strong> å› ä¸ºè·³è¿‡äº†ç¬¬ä¸€ä¸ªå­—æ®µ company_idã€‚</p>
<p><strong>åœºæ™¯ 3ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">SELECT * FROM t_orders WHERE <span class="hljs-attr">company_id</span> = <span class="hljs-number">10</span> AND order_status = <span class="hljs-string">'DONE'</span><span class="hljs-comment">;</span>
</code></pre>
<p>âš ï¸ <strong>éƒ¨åˆ†å¤±æ•ˆã€‚</strong> åªæœ‰ company_id ç”¨åˆ°äº†ç´¢å¼•ï¼Œorder_status æ²¡ç”¨åˆ°ï¼ˆå› ä¸ºä¸­é—´æ–­äº† workshop_idï¼‰ã€‚</p>
<h2 data-id="heading-6">åŸç†è§£æï¼šç”µè¯ç°¿æ³•åˆ™</h2>
<p>è”åˆç´¢å¼•å°±åƒä¸€æœ¬ç”µè¯ç°¿ã€‚å®ƒæ˜¯å…ˆæŒ‰â€œå§“â€æ’åºï¼Œå¦‚æœâ€œå§“â€ä¸€æ ·ï¼Œå†æŒ‰â€œåâ€æ’åºã€‚</p>
<ul>
<li>å¦‚æœä½ æ‰¾â€œå§“å¼ â€çš„äººï¼ˆcompany_idï¼‰ï¼Œå¾ˆå¿«èƒ½æ‰¾åˆ°ã€‚</li>
<li>ä½†å¦‚æœä½ åªçŸ¥é“æŸä¸ªäººâ€œåä¼Ÿâ€ï¼ˆworkshop_idï¼‰ï¼Œä½ æ²¡æ³•åˆ©ç”¨ç›®å½•ï¼Œåªèƒ½ä»ç¬¬ä¸€é¡µç¿»åˆ°æœ€åä¸€é¡µï¼ˆå…¨è¡¨æ‰«æï¼‰ã€‚</li>
</ul>
<p>è¿™å°±æ˜¯è‘—åçš„**â€œæœ€å·¦å‰ç¼€åŸåˆ™â€ (Leftmost Prefix Principle)**ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a0151a7a6f8e4f0cb9ce9e59e1242d7c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768331990&amp;x-signature=RTAhBnPCaQlvSvH2zhSXya6jvZo%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-7">ç¬¬ä¸‰æ­¥ï¼šè¿›é˜¶â€”â€”JSON å­—æ®µçš„æ€§èƒ½é»‘ç§‘æŠ€</h2>
<p>éšç€ä¸šåŠ¡çµæ´»æ€§çš„è¦æ±‚ï¼Œè¶Šæ¥è¶Šå¤šçš„è¡¨å¼€å§‹ä½¿ç”¨ JSON ç±»å‹å­—æ®µæ¥å­˜å‚¨éç»“æ„åŒ–æ•°æ®ï¼ˆæ›¿ä»£ç¹ççš„ EAV æ¨¡å‹ï¼‰ã€‚</p>
<p>ä½† DBA å¾€å¾€å¾ˆåæ„Ÿ JSONï¼Œå› ä¸ºï¼š<strong>â€œJSON é‡Œçš„ key æ²¡æ³•åŠ ç´¢å¼•ï¼ŒæŸ¥èµ·æ¥å¤ªæ…¢ï¼â€</strong></p>
<p>æ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin">-- <span class="hljs-keyword">data</span> å­—æ®µæ˜¯ JSON ç±»å‹ï¼š{<span class="hljs-string">"device_model"</span>: <span class="hljs-string">"iPhone 15"</span>, <span class="hljs-string">"os_ver"</span>: <span class="hljs-string">"17.0"</span>}
SELECT * FROM t_log WHERE <span class="hljs-keyword">data</span>-&gt;<span class="hljs-string">'$.device_model'</span> = <span class="hljs-string">'iPhone 15'</span>;
</code></pre>
<p>åœ¨è€ç‰ˆæœ¬ MySQL ä¸­ï¼Œè¿™ç»å¯¹æ˜¯å…¨è¡¨æ‰«æã€‚ä½†åœ¨ MySQL 5.7+ å’Œ 8.0 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡â€œè™šæ‹Ÿåˆ— (Virtual Generated Column)â€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 data-id="heading-8">ä¼˜åŒ–æ–¹æ¡ˆï¼šè™šæ‹Ÿåˆ—ç´¢å¼•</h2>
<p>æˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹ä¸šåŠ¡ä»£ç ï¼Œåªéœ€åœ¨æ•°æ®åº“å±‚åšä¸¤æ­¥æ“ä½œï¼š</p>
<p><strong>1. åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿåˆ—ï¼Œè‡ªåŠ¨æå– JSON ä¸­çš„å­—æ®µï¼š</strong></p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> t_log 
<span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> v_device_model <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">50</span>) 
GENERATED ALWAYS <span class="hljs-keyword">AS</span> (data<span class="hljs-operator">-</span><span class="hljs-operator">&gt;&gt;</span><span class="hljs-string">'$.device_model'</span>) VIRTUAL;
</code></pre>
<p>æ³¨æ„ï¼šVIRTUAL å…³é”®å­—è¡¨ç¤ºè¿™ä¸ªåˆ—ä¸å ç”¨ç£ç›˜ç©ºé—´ï¼Œå®ƒæ˜¯å®æ—¶è®¡ç®—çš„ï¼ˆä½†å¼€é”€æå°ï¼‰ã€‚</p>
<p><strong>2. ç»™è¿™ä¸ªè™šæ‹Ÿåˆ—åŠ ç´¢å¼•ï¼š</strong></p>
<pre><code class="hljs language-scss" lang="scss">CREATE INDEX idx_device_model ON <span class="hljs-built_in">t_log</span>(v_device_model);
</code></pre>
<p><strong>3. è§è¯å¥‡è¿¹ï¼š</strong></p>
<p>å†æ¬¡æ‰§è¡ŒæŸ¥è¯¢ï¼ˆæ—¢å¯ä»¥æŸ¥è™šæ‹Ÿåˆ—ï¼Œä¹Ÿå¯ä»¥æŸ¥åŸ JSON è·¯å¾„ï¼Œä¼˜åŒ–å™¨ä¼šè‡ªåŠ¨è¯†åˆ«ï¼‰ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">EXPLAIN SELECT * FROM t_log WHERE <span class="hljs-attr">v_device_model</span> = <span class="hljs-string">'iPhone 15'</span><span class="hljs-comment">;</span>
</code></pre>
<p>type å˜æˆäº† <strong>ref</strong>ã€‚</p>
<p>é€šè¿‡è¿™ç§â€œç©ºé—´æ¢æ—¶é—´â€ï¼ˆç´¢å¼•å ç”¨ç©ºé—´ï¼‰çš„æ–¹å¼ï¼Œæˆ‘ä»¬å°† JSON å†…éƒ¨å­—æ®µçš„æŸ¥è¯¢æ€§èƒ½æå‡åˆ°äº†ä¸æ™®é€šå­—æ®µç›¸åŒçš„æ°´å¹³ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/246646af9729473c95a192244aace951~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768331990&amp;x-signature=N9cawtvu%2FiU8bGoKg9YjeCt7qGM%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-9">æ€»ç»“</h2>
<p>æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–ä¸­ï¼Œ80% çš„æ€§èƒ½é—®é¢˜å¯ä»¥é€šè¿‡è§„èŒƒçš„ SQL ç¼–å†™è§£å†³ï¼š</p>
<ol>
<li><strong>ä¿æŒæ•æ„Ÿï¼š</strong> å¼€å‘å®Œ SQLï¼Œé¡ºæ‰‹è·‘ä¸€ä¸‹ EXPLAINï¼Œæ¶ˆç­æ‰€æœ‰çš„ ALLã€‚</li>
<li><strong>éµå®ˆè§„åˆ™ï¼š</strong> å»ºç«‹è”åˆç´¢å¼•æ—¶ï¼ŒæŠŠåŒºåˆ†åº¦é«˜ã€æŸ¥è¯¢æœ€é¢‘ç¹çš„å­—æ®µæ”¾åœ¨æœ€å·¦è¾¹ã€‚</li>
<li><strong>æ‹¥æŠ±æ–°ç‰¹æ€§ï¼š</strong> åœ¨å¤„ç† JSON æ•°æ®æ—¶ï¼Œå–„ç”¨<strong>è™šæ‹Ÿåˆ—ç´¢å¼•</strong>ï¼Œå…¼é¡¾çµæ´»æ€§ä¸æ€§èƒ½ã€‚</li>
</ol></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‘Šåˆ«â€œForå¾ªç¯â€ï¼šæŒæ¡SQLæŠ€å·§ï¼Œè®©æ•°æ®å¤„ç†é£èµ·æ¥]]></title>    <link>https://juejin.cn/post/7592089325912965120</link>    <guid>https://juejin.cn/post/7592089325912965120</guid>    <pubDate>2026-01-06T19:22:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592089325912965120" data-draft-id="7592089325912948736" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‘Šåˆ«â€œForå¾ªç¯â€ï¼šæŒæ¡SQLæŠ€å·§ï¼Œè®©æ•°æ®å¤„ç†é£èµ·æ¥"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-06T19:22:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ•°æ®å°é¦’å¤´"/> <meta itemprop="url" content="https://juejin.cn/user/48851852475720"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‘Šåˆ«â€œForå¾ªç¯â€ï¼šæŒæ¡SQLæŠ€å·§ï¼Œè®©æ•°æ®å¤„ç†é£èµ·æ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/48851852475720/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ•°æ®å°é¦’å¤´
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T19:22:43.000Z" title="Tue Jan 06 2026 19:22:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">å¼•è¨€ï¼šåˆ«æŠŠæ•°æ®åº“åªå½“ç¡¬ç›˜ç”¨</h2>
<p>åœ¨ä»£ç å®¡æŸ¥ï¼ˆCode Reviewï¼‰ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸çœ‹åˆ°è¿™æ ·çš„åæ¨¡å¼ï¼š</p>
<p>ä¸ºäº†ç»Ÿè®¡â€œæ¯ä¸ªéƒ¨é—¨è–ªèµ„æœ€é«˜çš„å‰ 3 åâ€ï¼Œå¼€å‘è€…å†™äº†ä¸€æ¡ SELECT * FROM employee æŠŠå‡ ä¸‡æ¡æ•°æ®å…¨éƒ¨æ‹‰åˆ°å†…å­˜ä¸­ï¼Œç„¶ååœ¨ Java/Python ä»£ç é‡Œå†™åµŒå¥—å¾ªç¯ã€Map åˆ†ç»„ã€æ’åºã€æˆªå–ã€‚</p>
<p>è¿™ç§â€œæ•°æ®åº“åªè´Ÿè´£å­˜ï¼Œåº”ç”¨å±‚è´Ÿè´£ç®—â€çš„åšæ³•ï¼Œåœ¨æ•°æ®é‡å°çš„æ—¶å€™å°šå¯ï¼Œä¸€æ—¦æ•°æ®é‡ä¸Šä¸‡ï¼Œä¸ä»…é€ æˆç½‘ç»œ I/O æ‹¥å µï¼Œè¿˜å®¹æ˜“å¯¼è‡´åº”ç”¨æœåŠ¡å™¨ OOMï¼ˆå†…å­˜æº¢å‡ºï¼‰ã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/689343015f794bb7bc7f0972ec4cc211~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768332163&amp;x-signature=bAmogBRsht6%2Bdfo9wyt0RuTMlRs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">ä¸€ï¼šä¸€è¡Œä»£ç æå®šâ€œåˆ†ç»„æ’åâ€ â€”â€” çª—å£å‡½æ•°</h2>
<p>åœºæ™¯éœ€æ±‚ï¼š</p>
<p>æ‰¾å‡ºæ¯ä¸ªç­çº§ï¼ˆclass_idï¼‰ä¸­ï¼Œæ•°å­¦æˆç»©ï¼ˆscoreï¼‰æœ€é«˜çš„å‰ 3 åå­¦ç”Ÿã€‚</p>
<p>ä½æ•ˆè§£æ³•ï¼ˆåº”ç”¨å±‚ï¼‰ï¼š</p>
<p>æŸ¥è¯¢æ‰€æœ‰æ•°æ® -&gt; å†…å­˜ä¸­æŒ‰ class_id åˆ†ç»„ -&gt; å¯¹æ¯ç»„ List è¿›è¡Œ Sort -&gt; å– subList(0, 3)ã€‚</p>
<p>SQL è§£æ³•ï¼š</p>
<p>ä½¿ç”¨çª—å£å‡½æ•° DENSE_RANK() æˆ– ROW_NUMBER()ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> (
    <span class="hljs-keyword">SELECT</span> 
        student_name,
        class_id,
        score,
        <span class="hljs-comment">-- æ ¸å¿ƒé€»è¾‘ï¼šæŒ‰ç­çº§åˆ†åŒºï¼ŒæŒ‰æˆç»©é™åºï¼Œç”Ÿæˆæ’å</span>
        <span class="hljs-built_in">DENSE_RANK</span>() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> class_id <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> score <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">as</span> ranking
    <span class="hljs-keyword">FROM</span> t_scores
) t
<span class="hljs-keyword">WHERE</span> t.ranking <span class="hljs-operator">&lt;=</span> <span class="hljs-number">3</span>;
</code></pre>
<p>è§£æï¼š</p>
<p>OVER (PARTITION BY ... ORDER BY ...) è¯­æ³•å®šä¹‰äº†ä¸€ä¸ªâ€œçª—å£â€ã€‚æ•°æ®åº“ä¼šåœ¨è¿™ä¸ªçª—å£èŒƒå›´å†…è¿›è¡Œè®¡ç®—ï¼Œè€Œä¸æ˜¯å¯¹å…¨è¡¨èšåˆã€‚</p>
<ul>
<li><strong>ROW_NUMBER()</strong>ï¼šå¼ºåˆ¶æ’åï¼Œ1, 2, 3, 4ï¼ˆå³ä½¿åˆ†æ•°ä¸€æ ·ï¼Œåæ¬¡ä¹Ÿä¸åŒï¼‰ã€‚</li>
<li><strong>RANK()</strong>ï¼šè·³è·ƒæ’åï¼Œ1, 1, 3, 4ï¼ˆåˆ†æ•°ä¸€æ ·å¹¶åˆ—ç¬¬ä¸€ï¼Œç¬¬ä¸‰åç©ºç¼ºï¼‰ã€‚</li>
<li><strong>DENSE_RANK()</strong>ï¼šè¿ç»­æ’åï¼Œ1, 1, 2, 3ï¼ˆåˆ†æ•°ä¸€æ ·å¹¶åˆ—ç¬¬ä¸€ï¼Œä¸”ä¸å ç”¨åç»­åæ¬¡ï¼‰ã€‚</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/30e2a3810d1541ed8d20a3fb76ed46ab~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768332163&amp;x-signature=Lvz24BoMtBSgs7uDsOpzG5D1Fo8%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">äºŒï¼šå‘Šåˆ«é€’å½’è°ƒç”¨ â€”â€” CTE å¤„ç†æ— é™å±‚çº§æ•°æ®</h2>
<p>åœºæ™¯éœ€æ±‚ï¼š</p>
<p>ä¸€å¼ èœå•è¡¨ t_menusï¼ŒåŒ…å« id å’Œ parent_idã€‚éœ€è¦æŸ¥å‡ºâ€œç³»ç»Ÿè®¾ç½®â€èŠ‚ç‚¹ä¸‹çš„æ‰€æœ‰å­èœå•ï¼ˆåŒ…æ‹¬å­èœå•çš„å­èœå•...ï¼‰ï¼Œæ„å»ºæ ‘å½¢ç»“æ„ã€‚</p>
<p><strong>ä½æ•ˆè§£æ³•ï¼ˆé€’å½’æŸ¥è¯¢ï¼‰ï¼š</strong></p>
<ol>
<li>æŸ¥å‡º id=1ï¼ˆç³»ç»Ÿè®¾ç½®ï¼‰ã€‚</li>
<li>å¾ªç¯æŸ¥ parent_id=1 çš„å­èŠ‚ç‚¹ã€‚</li>
<li>å¯¹æ¯ä¸ªå­èŠ‚ç‚¹ï¼Œå†æŸ¥å…¶å­èŠ‚ç‚¹...</li>
<li>è¿™æ˜¯å…¸å‹çš„ N+1 æŸ¥è¯¢é—®é¢˜ï¼Œä¸æ•°æ®åº“äº¤äº’æ¬¡æ•°è¿‡å¤šï¼Œç½‘ç»œå»¶è¿Ÿæé«˜ã€‚</li>
</ol>
<p>SQL è§£æ³•ï¼š</p>
<p>ä½¿ç”¨ CTEï¼ˆCommon Table Expressionsï¼‰ çš„é€’å½’è¯­æ³• WITH RECURSIVEã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">WITH</span> <span class="hljs-keyword">RECURSIVE</span> menu_tree <span class="hljs-keyword">AS</span> (
    <span class="hljs-comment">-- 1. é”šç‚¹æˆå‘˜ (Anchor Member)ï¼šæŸ¥è¯¢æ ¹èŠ‚ç‚¹</span>
    <span class="hljs-keyword">SELECT</span> id, name, parent_id, <span class="hljs-number">1</span> <span class="hljs-keyword">as</span> depth
    <span class="hljs-keyword">FROM</span> t_menus
    <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">100</span> <span class="hljs-comment">-- å‡è®¾ 100 æ˜¯â€œç³»ç»Ÿè®¾ç½®â€çš„ ID</span>
    
    <span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span>
    
    <span class="hljs-comment">-- 2. é€’å½’æˆå‘˜ (Recursive Member)ï¼šåŸºäºä¸Šä¸€è½®çš„ç»“æœç»§ç»­æŸ¥</span>
    <span class="hljs-keyword">SELECT</span> t.id, t.name, t.parent_id, mt.depth <span class="hljs-operator">+</span> <span class="hljs-number">1</span>
    <span class="hljs-keyword">FROM</span> t_menus t
    <span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> menu_tree mt <span class="hljs-keyword">ON</span> t.parent_id <span class="hljs-operator">=</span> mt.id
)
<span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> menu_tree;
</code></pre>
<p><strong>è§£æï¼š</strong></p>
<p>æ•°æ®åº“å¼•æ“åœ¨å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªä¸´æ—¶è¡¨ã€‚ç¬¬ä¸€éƒ¨åˆ†ï¼ˆAnchorï¼‰å…ˆæ”¾å…¥åˆå§‹æ•°æ®ï¼›ç¬¬äºŒéƒ¨åˆ†ï¼ˆRecursiveï¼‰å¼•ç”¨è¿™ä¸ªä¸´æ—¶è¡¨ï¼Œä¸æ–­æŠŠç¬¦åˆ JOIN æ¡ä»¶çš„æ–°æ•°æ®è¿½åŠ è¿›æ¥ï¼Œç›´åˆ°æ²¡æœ‰æ–°æ•°æ®äº§ç”Ÿä¸ºæ­¢ã€‚æ•´ä¸ªè¿‡ç¨‹åªä¸æ•°æ®åº“äº¤äº’ä¸€æ¬¡ã€‚</p>
<h2 data-id="heading-3">ä¸‰ï¼šä¼˜é›…çš„æ•°æ®æ¸…æ´— â€”â€” é«˜æ•ˆå»é‡ (Dedup)</h2>
<p>åœºæ™¯éœ€æ±‚ï¼š</p>
<p>ç”±äºç¨‹åº Bugï¼Œt_orders è¡¨ä¸­å‡ºç°äº†é‡å¤è®¢å•ï¼ˆorder_no ç›¸åŒï¼‰ï¼Œä¿ç•™ create_time æœ€è¿‘çš„ä¸€æ¡ï¼Œåˆ é™¤å…¶ä½™é‡å¤é¡¹ã€‚</p>
<p>ä½æ•ˆè§£æ³•ï¼ˆè‡ªè¿æ¥ï¼‰ï¼š</p>
<p>ä½¿ç”¨ DELETE é…åˆ NOT IN (SELECT MAX(id)...)ã€‚è¿™ç§å†™æ³•åœ¨æ•°æ®é‡å¤§æ—¶ï¼Œææ˜“é€ æˆæ­»é”æˆ–è¶…æ—¶ã€‚</p>
<p>SQL è§£æ³•ï¼š</p>
<p>åˆ©ç”¨çª—å£å‡½æ•°ç»™é‡å¤è¡Œæ‰“æ ‡ï¼Œç„¶åæ ¹æ®æ ‡è®°åˆ é™¤ã€‚</p>
<pre><code class="hljs language-sql" lang="sql"><span class="hljs-keyword">DELETE</span> t1 <span class="hljs-keyword">FROM</span> t_orders t1
<span class="hljs-keyword">JOIN</span> (
    <span class="hljs-keyword">SELECT</span> 
        id, 
        <span class="hljs-comment">-- æŒ‰è®¢å•å·åˆ†ç»„ï¼ŒæŒ‰æ—¶é—´é™åºæ’åˆ—ï¼Œè¡Œå·ä¸º 1 çš„å³ä¸ºæœ€æ–°æ•°æ®</span>
        <span class="hljs-built_in">ROW_NUMBER</span>() <span class="hljs-keyword">OVER</span> (<span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">BY</span> order_no <span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> create_time <span class="hljs-keyword">DESC</span>) <span class="hljs-keyword">as</span> rn
    <span class="hljs-keyword">FROM</span> t_orders
) t2 <span class="hljs-keyword">ON</span> t1.id <span class="hljs-operator">=</span> t2.id
<span class="hljs-keyword">WHERE</span> t2.rn <span class="hljs-operator">&gt;</span> <span class="hljs-number">1</span>; <span class="hljs-comment">-- åˆ é™¤è¡Œå·å¤§äº 1 çš„ï¼ˆå³æ—§æ•°æ®ï¼‰</span>
</code></pre>
<p>è§£æï¼š</p>
<p>è¿™ç§æ–¹å¼é¿å…äº†å¤æ‚çš„ GROUP BY å­æŸ¥è¯¢ï¼Œé€»è¾‘æ¸…æ™°ä¸”æ‰§è¡Œæ•ˆç‡æ›´é«˜ã€‚å®ƒé¦–å…ˆåœ¨å†…å­˜ä¸­è®¡ç®—å‡ºæ¯ä¸€è¡Œçš„â€œç•™å­˜ä¼˜å…ˆçº§â€ï¼ˆå³ rnï¼‰ï¼Œç„¶ååˆ©ç”¨ JOIN ç²¾å‡†å®šä½éœ€è¦åˆ é™¤çš„è¡Œ IDã€‚</p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/95ae8ad2074c4316af60fc421664f2cb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pWw5o2u5bCP6aaS5aS0:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768332163&amp;x-signature=43OEFyRpFZ5%2Bi6ibK9%2F5bMZXm0o%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">æ€»ç»“</h2>
<p>SQL ä¸ä»…ä»…æ˜¯å­˜å‚¨æ•°æ®çš„ä»“åº“ï¼Œå®ƒæ›´æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„<strong>é›†åˆè®¡ç®—å¼•æ“</strong>ã€‚</p>
<p>åœ¨ MySQL 8.0 ç­‰ç°ä»£æ•°æ®åº“ä¸­ï¼š</p>
<ol>
<li>é‡åˆ°â€œåˆ†ç»„å– Top Nâ€<strong>æˆ–</strong>â€œç´¯è®¡ç»Ÿè®¡â€ï¼Œè¯·ä¼˜å…ˆæƒ³åˆ° <strong>çª—å£å‡½æ•°</strong>ã€‚</li>
<li>é‡åˆ°â€œæ ‘å½¢ç»“æ„â€<strong>æˆ–</strong>â€œå±‚çº§éå†â€ï¼Œè¯·ä¼˜å…ˆæƒ³åˆ° <strong>CTE é€’å½’</strong>ã€‚</li>
<li>é‡åˆ°â€œå¤æ‚å»é‡â€ï¼Œè¯·ä¼˜å…ˆæƒ³åˆ° <strong>ROW_NUMBER()</strong>ã€‚</li>
</ol>
<p>å°†è®¡ç®—ä¸‹æ¨ï¼ˆPush Downï¼‰åˆ°æ•°æ®åº“å±‚ï¼Œä¸ä»…èƒ½å¤§å¹…å‡å°‘ç½‘ç»œä¼ è¾“é‡ï¼Œè¿˜èƒ½è®©ä½ çš„åç«¯ä»£ç å˜å¾—å¹²å‡€ã€æ¸…çˆ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[DataBindingçš„ä½¿ç”¨]]></title>    <link>https://juejin.cn/post/7592094358657712162</link>    <guid>https://juejin.cn/post/7592094358657712162</guid>    <pubDate>2026-01-07T01:50:35.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592094358657712162" data-draft-id="7592089325913210880" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="DataBindingçš„ä½¿ç”¨"/> <meta itemprop="keywords" content="Android Jetpack"/> <meta itemprop="datePublished" content="2026-01-07T01:50:35.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="XRay"/> <meta itemprop="url" content="https://juejin.cn/user/3966693685869288"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            DataBindingçš„ä½¿ç”¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3966693685869288/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    XRay
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:50:35.000Z" title="Wed Jan 07 2026 01:50:35 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä»€ä¹ˆæ˜¯ DataBinding</h2>
<p>DataBinding æ˜¯ä¸€ä¸ªè®©ä½ å¯ä»¥æŠŠå¸ƒå±€å’Œæ•°æ®ç»‘å®šèµ·æ¥çš„åº“ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.android.com%2Ftopic%2Flibraries%2Fdata-binding" target="_blank" title="https://developer.android.com/topic/libraries/data-binding" ref="nofollow noopener noreferrer">å®˜æ–¹æ–‡æ¡£</a> æ¥å­¦ä¹ å¦‚ä½•ä½¿ç”¨ DataBindingã€‚</p>
<p>æˆ‘ä»¬ä¸€èˆ¬é€šè¿‡è¿™ç§æ–¹å¼ç»™ UI è®¾ç½®æ•°æ®ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-type">TextView</span> <span class="hljs-variable">textView</span> <span class="hljs-operator">=</span> findViewById(R.id.sample_text);
<span class="hljs-keyword">if</span>(textView != <span class="hljs-literal">null</span> &amp;&amp; user != <span class="hljs-literal">null</span>){
    textView.setText(user.getName());
}
</code></pre>
<p>ä½¿ç”¨ DataBinding åï¼Œä¸Šé¢è¿™äº›ä»£ç éƒ½ä¸éœ€è¦å†™äº†ï¼Œç›´æ¥é€šè¿‡é…ç½®å¸ƒå±€æ–‡ä»¶å°±å¯ä»¥å®ç°ä¸Šé¢ä»£ç çš„åŠŸèƒ½ï¼Œæ³¨æ„ä¸‹é¢çš„<code>@{}</code>è¯­æ³•ã€‚</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
    <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@{user.name}"</span> /&gt;</span>
</code></pre>
<p>ä½¿ç”¨ DataBinding çš„å¥½å¤„ï¼š</p>
<ul>
<li>
<ol>
<li>findViewByIdã€setText è¿™äº›ä»£ç éƒ½ä¸ç”¨å†™äº†ï¼Œä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚</li>
</ol>
</li>
<li>
<ol start="2">
<li>textView çš„ç©ºæ£€æŸ¥ä¸éœ€è¦äº†ï¼Œå› ä¸ºç»‘å®šçš„é€»è¾‘å†™åœ¨ textView çš„å¸ƒå±€ä¸Šï¼Œæ‰€ä»¥ä¸å­˜åœ¨ textView ä¸º null çš„é—®é¢˜ï¼›user çš„ç©ºæ£€æŸ¥ä¹Ÿä¸éœ€è¦äº†ï¼Œå¦‚æœ user ä¸º nullï¼Œuser.name å°±ä¼šè¢«åˆ†é…é»˜è®¤å€¼ nullã€‚</li>
</ol>
</li>
<li>
<ol start="3">
<li>æ•°æ®æ›´æ–°çš„æ—¶å€™ä¸å†éœ€è¦é‡å¤è°ƒç”¨ setText äº†ã€‚</li>
</ol>
</li>
</ul>
<h2 data-id="heading-1">å¦‚ä½•ä½¿ç”¨</h2>
<p>ä½¿ç”¨ DataBinding ä¹‹å‰è®°å¾—åœ¨ build.gradle ä¸­å¯ç”¨ DataBindingï¼š</p>
<pre><code class="hljs language-arduino" lang="arduino">android {
    ...
    buildFeatures {
        dataBinding <span class="hljs-literal">true</span>
    }
}
</code></pre>
<p>åœ¨æƒ³è¦ä½¿ç”¨ DataBinding çš„å¸ƒå±€çš„æ ¹å¸ƒå±€ä¸Šå³é”®ï¼Œé€‰æ‹© Show Context Actionsï¼Œç„¶åé€‰æ‹© Convert to data binding layoutã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å®ç°ä¸€ä¸ªæ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯åˆ—è¡¨çš„åŠŸèƒ½ï¼Œæ­¤å¤–è¿˜åŒ…å«ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªç”¨äºæ·»åŠ å­¦ç”Ÿï¼Œä¸€ä¸ªç”¨äºåˆ é™¤å­¦ç”Ÿã€‚</p>
<p>activity_main.xml:</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">layout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">variable</span>
            <span class="hljs-attr">name</span>=<span class="hljs-string">"clickPresenter"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"com.example.test.MainActivity.ClickPresenter"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"vertical"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"æ·»åŠ å­¦ç”Ÿ"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:onClick</span>=<span class="hljs-string">"@{clickPresenter::addStudent}"</span>/&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"åˆ é™¤å­¦ç”Ÿ"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:onClick</span>=<span class="hljs-string">"@{clickPresenter::removeStudent}"</span>/&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">androidx.recyclerview.widget.RecyclerView</span>
            <span class="hljs-attr">android:id</span>=<span class="hljs-string">"@+id/rv_student_list"</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span> /&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>
</code></pre>
<p>åœ¨ activity_main.xml ä¸­é…ç½®æ·»åŠ å­¦ç”Ÿå’Œåˆ é™¤å­¦ç”ŸæŒ‰é’®åˆ†åˆ«è°ƒç”¨ ClickPresenter ä¸­çš„ addStudent() å’Œ removeStudent() æ–¹æ³•ã€‚</p>
<p>MainActivity ä¸­çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AppCompatActivity</span> {

    <span class="hljs-keyword">private</span> StudentListAdapter mStudentListAdapter;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onCreate</span><span class="hljs-params">(<span class="hljs-meta">@Nullable</span> Bundle savedInstanceState)</span> {
        <span class="hljs-built_in">super</span>.onCreate(savedInstanceState);
        <span class="hljs-type">ActivityMainBinding</span> <span class="hljs-variable">mActivityMainBinding</span> <span class="hljs-operator">=</span> DataBindingUtil.setContentView(<span class="hljs-built_in">this</span>, R.layout.activity_main);

        mActivityMainBinding.rvStudentList.setLayoutManager(<span class="hljs-keyword">new</span> <span class="hljs-title class_">LinearLayoutManager</span>(<span class="hljs-built_in">this</span>, RecyclerView.VERTICAL, <span class="hljs-literal">false</span>));
        mStudentListAdapter = <span class="hljs-keyword">new</span> <span class="hljs-title class_">StudentListAdapter</span>(getStudentList());
        mActivityMainBinding.rvStudentList.setAdapter(mStudentListAdapter);

        mActivityMainBinding.setClickPresenter(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ClickPresenter</span>());
    }


    <span class="hljs-keyword">private</span> List&lt;Student&gt; <span class="hljs-title function_">getStudentList</span><span class="hljs-params">()</span> {
        List&lt;Student&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°æ˜"</span>,<span class="hljs-string">"001"</span>));
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°çº¢"</span>,<span class="hljs-string">"002"</span>));
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°åˆš"</span>,<span class="hljs-string">"003"</span>));
        list.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°å¼º"</span>,<span class="hljs-string">"004"</span>));
        <span class="hljs-keyword">return</span> list;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ClickPresenter</span> {

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addStudent</span><span class="hljs-params">(View view)</span> {
            Toast.makeText(MainActivity.<span class="hljs-built_in">this</span>, <span class="hljs-string">"addUser"</span>, Toast.LENGTH_SHORT).show();
            mStudentListAdapter.addData(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">"å°å¼ "</span>,<span class="hljs-string">"005"</span>));
            mStudentListAdapter.notifyDataSetChanged();
        }

        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">removeStudent</span><span class="hljs-params">(View view)</span> {
            Toast.makeText(MainActivity.<span class="hljs-built_in">this</span>, <span class="hljs-string">"removeUser"</span>, Toast.LENGTH_SHORT).show();
            <span class="hljs-keyword">if</span>(mStudentListAdapter.getItemCount() &gt; <span class="hljs-number">0</span>){
                mStudentListAdapter.remove(<span class="hljs-number">0</span>);
                mStudentListAdapter.notifyDataSetChanged();
            }
        }
    }
}
</code></pre>
<p>åœ¨ MainActivity ä¸­ä½¿ç”¨ DataBindingUtil çš„ setContentView() æ–¹æ³•ç»‘å®šäº†ä¸Šé¢çš„å¸ƒå±€æ–‡ä»¶å¹¶å¯¹ ClickPresenter ä¸­çš„æ–¹æ³•è¿›è¡Œäº†å®ç°ã€‚</p>
<p>Student ç±»çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseObservable</span> {
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> String id;
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, String id)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        <span class="hljs-built_in">this</span>.id = id;
    }

    <span class="hljs-meta">@Bindable</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> name;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> {
        <span class="hljs-built_in">this</span>.name = name;
        notifyPropertyChanged(BR.name);
    }

    <span class="hljs-meta">@Bindable</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getId</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> id;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setId</span><span class="hljs-params">(String id)</span> {
        <span class="hljs-built_in">this</span>.id = id;
        notifyPropertyChanged(BR.id);
    }
}
</code></pre>
<p>å±•ç¤ºå­¦ç”Ÿä¿¡æ¯å¯¹åº”çš„å¸ƒå±€æ–‡ä»¶ä¸ºï¼šitem_student.xml</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">layout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">variable</span>
            <span class="hljs-attr">name</span>=<span class="hljs-string">"student"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"com.example.test.Student"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">"horizontal"</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"50dp"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@{student.id}"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@{student.name}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>
</code></pre>
<p>RecyclerView è¿˜éœ€è¦ç»“åˆ Adapter æ¥å±•ç¤ºåˆ—è¡¨ä¿¡æ¯ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentListAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span>.Adapter&lt;StudentListAdapter.StudentItemViewHolder&gt; {

    <span class="hljs-keyword">private</span> List&lt;Student&gt; mStudentList;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">StudentListAdapter</span><span class="hljs-params">(List&lt;Student&gt; list)</span> {
        mStudentList = list;
    }

    <span class="hljs-meta">@NonNull</span>
    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> StudentItemViewHolder <span class="hljs-title function_">onCreateViewHolder</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> ViewGroup parent, <span class="hljs-type">int</span> viewType)</span> {
        <span class="hljs-type">View</span> <span class="hljs-variable">view</span> <span class="hljs-operator">=</span> LayoutInflater.from(parent.getContext()).inflate(R.layout.item_student, <span class="hljs-literal">null</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StudentItemViewHolder</span>(view);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">onBindViewHolder</span><span class="hljs-params">(<span class="hljs-meta">@NonNull</span> StudentItemViewHolder holder, <span class="hljs-type">int</span> position)</span> {
        holder.getItemStudentBinding().setStudent(mStudentList.get(position));
        holder.getItemStudentBinding().executePendingBindings();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getItemCount</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> mStudentList.size();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addData</span><span class="hljs-params">(Student student)</span> {
        mStudentList.add(student);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(<span class="hljs-type">int</span> index)</span> {
        mStudentList.remove(index);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">StudentItemViewHolder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RecyclerView</span>.ViewHolder {

        <span class="hljs-keyword">private</span> ItemStudentBinding binding;

        <span class="hljs-keyword">public</span> <span class="hljs-title function_">StudentItemViewHolder</span><span class="hljs-params">(View itemView)</span> {
            <span class="hljs-built_in">super</span>(itemView);
            binding = DataBindingUtil.bind(itemView);
        }

        <span class="hljs-keyword">public</span> ItemStudentBinding <span class="hljs-title function_">getItemStudentBinding</span><span class="hljs-params">()</span> {
            <span class="hljs-keyword">return</span> binding;
        }
    }
}
</code></pre>
<p>åœ¨ StudentItemViewHolder ä¸­ä½¿ç”¨ DataBindingUtil çš„ bind() æ–¹æ³•æ¥ç»‘å®šåˆ—è¡¨çš„ item å¸ƒå±€ï¼Œå¹¶è¿”å› ItemStudentBinding å®ä¾‹ï¼Œè¿™æ · StudentItemViewHolder æŒæœ‰ ItemStudentBinding å®ä¾‹å°±è¡Œäº†ï¼Œä¸éœ€è¦æŒæœ‰é‡Œé¢çš„æ¯ä¸€ä¸ª View äº†ï¼ŒåŒæ—¶çœç•¥äº† findViewById çš„ä»£ç ã€‚åœ¨ StudentListAdapter ä¸­ä¹Ÿä¸éœ€è¦åˆ†åˆ«ç»™ item ä¸­çš„æ§ä»¶è®¾å€¼äº†ï¼Œç›´æ¥è°ƒç”¨ ItemStudentBinding å®ä¾‹çš„ setStudent() å³å¯ã€‚</p>
<h2 data-id="heading-2">Binding Adapters</h2>
<p>ç°åœ¨è¦æ˜¾ç¤ºå­¦ç”Ÿå¤´åƒï¼Œæˆ‘æƒ³ç”¨ Glideï¼Œå¤´åƒæ¥æºäºå›¾ç‰‡é“¾æ¥ï¼ŒåŒæ—¶è¿˜éœ€è¦æä¾›å ä½å›¾ã€‚ç”±äºæ²¡åŠæ³•ç›´æ¥åœ¨ ImageView å¸ƒå±€ä¸­é…ç½®å›¾ç‰‡é“¾æ¥å’Œå ä½å›¾ï¼Œä½¿ç”¨ DataBinding è¯¥å¦‚ä½•å®ç°ï¼Ÿ</p>
<p>è¿™æ—¶å€™å°±å¯ä»¥ä½¿ç”¨ BindingAdapterï¼Œæ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CommonUtils</span> {

    <span class="hljs-meta">@BindingAdapter({"app:imageUrl", "app:placeHolder"})</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadImageFromUri</span><span class="hljs-params">(ImageView imageView, String imageUri, Drawable placeHolder)</span> {
        Glide.with(imageView.getContext())
                .load(imageUri)
                .placeholder(placeHolder)
                .into(imageView);
    }
}
</code></pre>
<p>ç„¶åå°±å¯ä»¥ç›´æ¥åœ¨ ImageView çš„å¸ƒå±€ä¸­é…ç½® imageUrl å’Œ placeHolder äº†ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span>
    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
    <span class="hljs-attr">app:imageUrl</span>=<span class="hljs-string">"@{student.url}"</span>
    <span class="hljs-attr">app:placeHolder</span>=<span class="hljs-string">"@{@drawable/student_icon}"</span>/&gt;</span>
</code></pre>
<p>è¿™æ ·åªè¦é…ç½®äº† imageUrl å’Œ placeHolderï¼Œæ³¨è§£ @BindingAdapter å¯¹åº”çš„æ–¹æ³•å°±ä¼šè¢«è°ƒç”¨ã€‚å¦‚æœä½ å¸Œæœ›é…ç½®äº† imageUrl å’Œ placeHolder ä¸­çš„æŸä¸€ä¸ªï¼Œå°±è°ƒç”¨è¯¥æ–¹æ³•ï¼Œéœ€è¦æ·»åŠ 
requireAll = falseï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-kotlin" lang="kotlin"><span class="hljs-meta">@BindingAdapter({<span class="hljs-string">"app:imageUrl"</span>, <span class="hljs-string">"app:placeHolder"</span>}, requireAll = false)</span>
</code></pre>
<h2 data-id="heading-3">ç»“åˆ LiveData</h2>
<p>å‰é¢ variable ä¸­çš„ Student ç±»å¿…é¡»è¦ç»§æ‰¿ BaseObservable æˆ–ä½¿ç”¨ ObservableFieldï¼Œè¿˜è¦æ·»åŠ æ³¨è§£ @Bindableã€è°ƒç”¨notifyPropertyChanged(BR.name)ï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨ student.setName(name) æ—¶é€šçŸ¥å¯¹åº”çš„ View æ›´æ–°ã€‚</p>
<p>ç°åœ¨æœ‰äº† LiveDataï¼ŒLiveData ä½¿ç”¨æ•°æ®é©±åŠ¨ï¼Œå¯ä»¥ä¸éœ€è¦ä½¿ç”¨ BaseObservable æˆ– ObservableField äº†ï¼Œå¹¶ä¸”è¿˜å¯ä»¥è‡ªåŠ¨ç®¡ç†ç”Ÿå‘½å‘¨æœŸï¼Œé¿å…å†…å­˜æ³„æ¼ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-xml" lang="xml">// student.xml
<span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"utf-8"</span>?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">layout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">"http://schemas.android.com/apk/res/android"</span>
    <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">variable</span>
            <span class="hljs-attr">name</span>=<span class="hljs-string">"viewmodel"</span>
            <span class="hljs-attr">type</span>=<span class="hljs-string">"com.example.test.ScheduleViewModel"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span>
        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"match_parent"</span>
        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>&gt;</span>

        <span class="hljs-tag">&lt;<span class="hljs-name">TextView</span>
            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">"wrap_content"</span>
            <span class="hljs-attr">android:text</span>=<span class="hljs-string">"@{viewmodel.studentname}"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">layout</span>&gt;</span>
</code></pre>
<pre><code class="hljs language-kt" lang="kt"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ViewModelActivity</span> : <span class="hljs-type">AppCompatActivity</span>() {

    <span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(savedInstanceState: <span class="hljs-type">Bundle</span>?)</span></span> {
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState)

        <span class="hljs-keyword">val</span> binding: StudentBinding = DataBindingUtil.setContentView(<span class="hljs-keyword">this</span>, R.layout.student)
        binding.lifecycleOwner = <span class="hljs-keyword">this</span>

        binding.viewmodel = ViewModelProvider(<span class="hljs-keyword">this</span>)[ScheduleViewModel::<span class="hljs-keyword">class</span>.java]
    }
}
</code></pre>
<pre><code class="hljs language-kt" lang="kt"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ScheduleViewModel</span> : <span class="hljs-type">ViewModel</span>() {

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">val</span> _studentname = MutableStateFlow(<span class="hljs-string">""</span>)

    <span class="hljs-keyword">val</span> studentname: StateFlow&lt;String&gt; = _studentname

    <span class="hljs-keyword">init</span> {
        viewModelScope.launch {
            delay(<span class="hljs-number">5000</span>)
            _studentname.value = <span class="hljs-string">"å°ç‹"</span>
        }
    }
}
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ä¸éœ€è¦è°ƒç”¨ LiveData çš„ <strong>observe(ownerï¼Œobserver)</strong> äº†ï¼ŒDataBinding å¸®æˆ‘ä»¬å®Œæˆäº†æ•°æ®é©±åŠ¨ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[C# æ–©è·TIOBEå¹´åº¦ç¼–ç¨‹è¯­è¨€]]></title>    <link>https://juejin.cn/post/7592119218030329890</link>    <guid>https://juejin.cn/post/7592119218030329890</guid>    <pubDate>2026-01-07T01:52:02.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592119218030329890" data-draft-id="7592089325913030656" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="C# æ–©è·TIOBEå¹´åº¦ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="keywords" content="C#,ç¼–ç¨‹è¯­è¨€"/> <meta itemprop="datePublished" content="2026-01-07T01:52:02.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="RockByte"/> <meta itemprop="url" content="https://juejin.cn/user/1046390797768519"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            C# æ–©è·TIOBEå¹´åº¦ç¼–ç¨‹è¯­è¨€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1046390797768519/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    RockByte
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:52:02.000Z" title="Wed Jan 07 2026 01:52:02 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;color:rgba(46,36,36,.87);overflow-x:hidden}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{margin-bottom:5px;font-size:30px;font-weight:500}.markdown-body h1:before{content:"#";margin-right:10px;color:#1976d2}.markdown-body h2{font-size:28px;font-weight:400;border-left:5px solid #454545;margin-top:20px;padding-left:10px;transition:all .3s ease-in-out}.markdown-body h2:hover{border-color:#1976d2}.markdown-body h3{font-size:24px;font-weight:400;margin-top:15px;padding-bottom:0}.markdown-body h4{font-size:20px;font-weight:500}.markdown-body h5{font-size:16px}.markdown-body h6{margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body h2:first-letter,.markdown-body h3:first-letter,.markdown-body p:first-letter{text-transform:capitalize}.markdown-body em{text-emphasis:dot;text-emphasis-position:under}.markdown-body img{display:block;margin:0 auto!important;max-width:100%;border-radius:2px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)!important}.markdown-body hr{position:relative;width:98%;height:1px;border:none;margin-top:32px;margin-bottom:32px;background-image:linear-gradient(90deg,#ddd,#999,#ddd);overflow:visible}.markdown-body hr:after{content:"";position:absolute;margin:auto;left:0;right:0;bottom:0;top:0;display:inline-block;width:60px;height:20px;background:#fff;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgCAYAAABgrToAAAADoklEQVRYR82XTYgcRRTHf2933Q1RjAa9eFO8JHoJ8RQVBQ2iBwXBET0YEUTXNVmNQtTpmeqaWV0XNRq/o4KoECSCEPSg4CF+BYUkIIiCoCJCPIhC/Ihh2Z0nVV27VnZnenumW9i6ddV7//frV69fVQurfMgq56NawFTPAU6QyomqXrw6wIZeyhCPebA5buNR+akKyGoAjd6BshthnYdSjqNcRVuOlIUsD2j0SuA94IwuMHdh5ZUykOUBXfSGbmKI54EtAeYIHSZoy5dl4JxvNYBOKdW1KE8BQ8AkVk6WhasWsAiN0TX9gveXQaPP+Aytpc4u+bMI06JNohsYYYYOR2lJWtS3OKDRfcAtQfgDoI6Vo4UCGb0OmAEuDvZvYmVbEd/igC3dzDz7gQu8sPA9kJDK27mBmjqBeLjTg90PDFOjWawFFQd06kZHEfaj3LAIpTRpSXsZ5E06zEYP9sDimnAApYaV2SLZG/wjMeqAkijwW4xQJ5Gf/ZzRC8OW3hiBTGGlURRswW55Bh/Ssxljrwew8l1PQaM14GngvGDzBUKdDsMeTtgU5o8B92PFlUf3YXUrHa7Fys6lBqcCGnX15YQ2A18FyPd7Crd1A3M8C1wdbH4DD3hWeP6IEXbQkG97ajR1HPFnuPP5jFFq1OWX7hl8WM9l1AO648uNfwLk7tytMeogty+xeQ4rO3r6bdcx1nuwOGsHmaXGtPzae4uzGnLH1kQkvpdZGrHjssBZJrL+pqS05KWc8tgITAPXRzYvYOXe/C2OV43eDcRBDtIhoS2f9wzc0Cv8Wls+zoFzUC5zF0U241h5uZtPfptp6OUM8wbK+cH5GEpCS17P3fJei0Z3+npTxryJ8CPzbKMtn/ZyWbkPGl0PuFPkmkjkcb4h4R2ZLwRq1H0ALmvjkf2HwK1Y+T1PY2XABe/sHJ6MxN5lnoSpnC/UGbsTaI5phK2R7x6s3Ffk5YoDOrWm3onwJHBmEP86bPmBrsGaenNoIdnxCH+gPEhLXi0Cl1VBvyPVLSh7gEuC62yAfOIUqabWEaaiucMIk6RyqJ+Q/QM69V26jjW86Gvov/EaoyT8zRCn+Xq7PVrbx0nuYUaO9wM3WAbjCE1NEUw09Um4UV+2OKfYfu5/S19gsAzGKqm6LE5FrShbdS0ku465DjDwKA/oQht19ejqbaEVuRbiLhuHByYLjtUAZpDutzP7cYdHsPJXWbjyNVgFwQoa1WXwf4Jd9YD/Ap80+yE7+u9aAAAAAElFTkSuQmCC);background-repeat:no-repeat;background-size:auto 100%;background-position-x:center}.markdown-body code{font-weight:900;word-break:break-word;border-radius:2px;overflow-x:auto;font-size:.87em;padding:.065em .4em;background-color:#fbe5e1;color:#c0341d}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75;border-radius:0 4px}.markdown-body pre&gt;code{font-weight:400;font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{margin:0 4px;text-decoration:none;color:#027fff;transition:all .3s ease-in-out;padding-bottom:4px;border-bottom:2px solid transparent}.markdown-body a:after{content:"";display:inline-block;width:18px;height:18px;margin-left:4px;vertical-align:middle;background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiMwMjdGRkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCI+PHBhdGggZD0iTTkuODE1IDYuNDQ4bDEuOTM2LTEuOTM2YzEuMzM3LTEuMzM2IDMuNTgtMS4yNTkgNS4wMTMuMTczIDEuNDMyIDEuNDMyIDEuNTEgMy42NzYuMTczIDUuMDEzbC0xLjQ1MiAxLjQ1Mi0uOTY4Ljk2OGMtMS4zMzcgMS4zMzYtMy41ODEgMS4yNTktNS4wMTMtLjE3MyIvPjxwYXRoIGQ9Ik0xMS4yNjcgMTUuMzY3bC0xLjkzNiAxLjkzNmMtMS4zMzYgMS4zMzctMy41OCAxLjI2LTUuMDEyLS4xNzMtMS40MzItMS40MzItMS41MS0zLjY3Ni0uMTczLTUuMDEybDEuNDUyLTEuNDUyLjk2OC0uOTY4YzEuMzM2LTEuMzM3IDMuNTgtMS4yNiA1LjAxMi4xNzMiLz48L2c+PC9zdmc+);background-size:cover;background-repeat:no-repeat}.markdown-body a:hover{border-color:#027fff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body a.footnote-backref:after,.markdown-body a.footnote-ref:after,.markdown-body sup a:after{display:none!important}.markdown-body table{margin:0 auto 10px;font-size:12px;width:auto;max-width:100%;overflow:auto;border:2px solid #c6c6c6}.markdown-body table img{box-shadow:none!important}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body del{color:rgba(0,0,0,.6)}.markdown-body blockquote{position:relative;color:#666;padding:5px 23px 1px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:hsla(0,0%,78.4%,.12);transition:all .2s ease-in-out}.markdown-body blockquote:hover{border-color:#1976d2}.markdown-body blockquote:after,.markdown-body blockquote:before{position:absolute;font-size:24px;font-weight:800;line-height:24px;color:#cbcbcb;opacity:.6}.markdown-body blockquote:before{content:"â€œ";top:4px;left:6px}.markdown-body blockquote:after{content:"â€";right:8px;bottom:-8px}.markdown-body blockquote&gt;p,.markdown-body blockquote blockquote{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body details{outline:none;border:none;border-left:4px solid #1976d2;padding-left:10px;margin-left:4px}.markdown-body details summary{cursor:pointer;border:none;outline:none;background:#fff;margin:0 -17px}.markdown-body details summary:hover::-webkit-details-marker{color:#1976d2}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5c4f2c1f733c4019bab12e41decce268~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgUm9ja0J5dGU=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355521&amp;x-signature=EW8fqERcd4XxD604sHcUMD4aGwQ%3D" alt="0.webp" loading="lazy"/></p>
<p>å¾®è½¯çš„ <strong>C#</strong> åœ¨ä¸‰å¹´å†…ç¬¬äºŒæ¬¡è·å¾—äº† <strong>TIOBE</strong> ç¼–ç¨‹è¯­è¨€æŒ‡æ•°çš„â€œå¹´åº¦è¯­è¨€â€ç§°å·ï¼Œå…¶åœ¨è¯¥å…¬å¸ç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æŒ‡æ•°ä¸­çš„å¹´åº¦æ’åå¢å¹…ä¸ºæœ€å¤§ã€‚åŒæ—¶ï¼Œ<strong>TIOBE</strong> é¦–å¸­æ‰§è¡Œ <em>Paul Jansen</em> è¡¨ç¤ºï¼Œå¾®è½¯çš„å¦ä¸€é—¨è¯­è¨€ <strong>TypeScript</strong> ä»Šå¹´å¯èƒ½è·»èº«è¯¥æŒ‡æ•°çš„å‰20åã€‚</p>
<p><strong>TIOBE</strong> äº1æœˆ4æ—¥å®£å¸ƒ <strong>C#</strong> ä¸º2025å¹´åº¦è¯­è¨€ã€‚</p>
<p>æœ¬æœˆï¼ˆ2026å¹´ä¸€æœˆï¼‰ <strong>C#</strong> çš„è¯„çº§ä¸º7.39%ï¼Œæ’åç¬¬äº”ï¼ŒåŒæ¯”ä¸Šå‡äº†2.94ä¸ªç™¾åˆ†ç‚¹ã€‚</p>
<p><strong>C#</strong> è·å¥–æ˜¯æ„æ–™ä¹‹ä¸­çš„â€”â€”å®ƒä¹Ÿæ›¾æ˜¯2023å¹´çš„ <strong>TIOBE</strong> å¹´åº¦è¯­è¨€ã€‚â€œä»è¯­è¨€è®¾è®¡çš„è§’åº¦æ¥çœ‹ï¼Œ<strong>C#</strong> åœ¨ä¸»æµè¯­è¨€ä¸­å¾€å¾€æ˜¯æ–°è¶‹åŠ¿çš„æ—©æœŸé‡‡ç”¨è€…ï¼Œâ€</p>
<p><em>Paul Jansen</em> åœ¨2026å¹´1æœˆæŒ‡æ•°çš„é™„è¨€ä¸­å†™é“ï¼Œâ€œåŒæ—¶ï¼Œå®ƒæˆåŠŸå®Œæˆäº†ä¸¤æ¬¡é‡å¤§èŒƒå¼è½¬å˜ï¼šä»ä»…æ”¯æŒ <strong>Windows</strong> è½¬å‘è·¨å¹³å°ï¼Œä»å¾®è½¯ç§æœ‰è½¬å‘å¼€æºã€‚<strong>C#</strong> æ€»èƒ½åœ¨æ°å½“çš„æ—¶æœºæŒç»­æ¼”è¿›ã€‚â€</p>
<p>ä»–è¿˜è¡¥å……ç§°ï¼Œè‡ªå·±æ›¾é¢„è®¡ <strong>C#</strong> ä¼šåœ¨å•†ä¸šè½¯ä»¶å¸‚åœºä¸­å–ä»£ <strong>Java</strong> å æ®ä¸»å¯¼åœ°ä½ï¼Œä½†ç›®å‰è¿™åœºç«äº‰ä»æ— å®šè®ºã€‚â€œ<strong>Java</strong> çš„é£æ ¼å†—é•¿ã€æ ·æ¿ä»£ç ç¹å¤šï¼Œä¸”å½’ç”²éª¨æ–‡æ‰€æœ‰ï¼Œå®ƒèƒ½å¦ç»§ç»­å‹åˆ¶ <strong>C#</strong> ä»æ˜¯ä¸ªæœªçŸ¥æ•°ï¼Œâ€</p>
<p><em>Jansen</em> è¡¨ç¤ºã€‚æœ¬æœˆçš„æŒ‡æ•°ä¸­ï¼Œ<strong>Java</strong> ä»¥8.71%çš„è¯„çº§æ’åç¬¬ä¸‰ï¼Œä»…æ¬¡äº <strong>Python</strong> å’Œ <strong>C</strong>ã€‚</p>
<p><em>Paul Jansen</em> åœ¨é™„è¨€çš„ç»“å°¾é¢„æµ‹äº† <strong>TypeScript</strong> çš„å‰æ™¯â€”â€”è¿™æ˜¯å¾®è½¯æ¨å‡ºçš„å¸¦ç±»å‹è¯­æ³•çš„ <strong>JavaScript</strong>ã€‚â€œæˆ‘å‘æ¥ä¸å¤ªæ“…é•¿é¢„æµ‹ï¼Œä½†æˆ‘çŒœæµ‹ <strong>TypeScript</strong> æœ€ç»ˆä¼šé—¯å…¥å‰20åï¼Œâ€</p>
<p>è¯¥è¯­è¨€ç›®å‰æ’åç¬¬32ä½ã€‚â€œæˆ‘è®¤ä¸º <strong>TypeScript</strong> ä¼šå¢é•¿çš„åŸå› æ˜¯ï¼Œå¦‚ä»Šå¾ˆå¤šå‰ç«¯è½¯ä»¶ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰éƒ½ç”¨<strong>TypeScript</strong> è€Œé <strong>JavaScript</strong>ç¼–å†™ï¼Œâ€</p>
<p>ä»–è§£é‡Šé“ï¼Œâ€œ<strong>TypeScript</strong> ç›¸å¯¹äº<strong>JavaScript</strong> çš„ä¼˜åŠ¿åœ¨äºå®ƒæ˜¯ç±»å‹å®‰å…¨çš„ã€‚å¦‚æœå¼€å‘è€…æ­£ç¡®ä½¿ç”¨ <strong>TypeScript</strong>ï¼Œå°±å¾ˆéš¾â€˜æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šâ€™ã€‚é‡‡ç”¨ <strong>TypeScript</strong> æ²¡æœ‰ä»»ä½•é£é™©ï¼Œå› ä¸ºå®ƒä¼šç¼–è¯‘æˆ <strong>JavaScript</strong>â€”â€”æ‰€ä»¥è¦æ˜¯ä¸å–œæ¬¢<strong>TypeScript</strong>ï¼Œéšæ—¶å¯ä»¥è½¬å› <strong>JavaScript</strong>ã€‚â€</p>
<p><strong>TIOBE</strong> æœˆåº¦æŒ‡æ•°è¯„çº§åŸºäºä¸€å¥—å…¬å¼ï¼Œè¯„ä¼°å…¨çƒèŒƒå›´å†…ç†Ÿç»ƒå·¥ç¨‹å¸ˆçš„æ•°é‡ã€ç›¸å…³è¯¾ç¨‹åŠç¬¬ä¸‰æ–¹ä¾›åº”å•†æƒ…å†µã€‚<strong>è°·æ­Œ</strong>ã€<strong>äºšé©¬é€Š</strong>ã€<strong>ç»´åŸºç™¾ç§‘</strong>ã€<strong>å¿…åº”</strong> ç­‰20å¤šä¸ªçƒ­é—¨ç½‘ç«™çš„æ•°æ®ä¼šè¢«ç”¨äºè®¡ç®—è¯„çº§ã€‚</p>
<p><em>Jansen</em> è¡¨ç¤ºï¼Œåœ¨2026å¹´1æœˆçš„æŒ‡æ•°ä¸­ï¼Œ<strong>Go</strong> ä¼¼ä¹å·²åœ¨å»å¹´æ°¸ä¹…è·Œå‡ºäº†å‰10åï¼›<strong>Ruby</strong> çš„æƒ…å†µç±»ä¼¼ï¼Œå®ƒå·²è·Œå‡ºå‰20åï¼Œä¸”çŸ­æœŸå†…ä¸å¤ªå¯èƒ½å›å½’ã€‚ä½† <strong>Perl</strong> å‡ºç°äº†å‡ºäººæ„æ–™çš„å¤è‹ï¼šä»2025å¹´1æœˆçš„ç¬¬32ä½å‡è‡³å¹´æœ«çš„ç¬¬11ä½ã€‚å¦ä¸€é—¨å›æš–çš„è¯­è¨€æ˜¯ <strong>R</strong>ï¼Œå®ƒåœ¨2025å¹´é‡å›å‰10åï¼Œè¿™ä¸»è¦å¾—ç›Šäºæ•°æ®ç§‘å­¦å’Œç»Ÿè®¡è®¡ç®—é¢†åŸŸçš„æŒç»­å¢é•¿ã€‚</p>
<p>ï¼ˆ<strong>TIOBE</strong> 2026å¹´1æœˆæŒ‡æ•°å‰10åï¼‰</p>
<ol>
<li>
<p><strong>Python</strong>ï¼Œ22.61%</p>
</li>
<li>
<p><strong>C</strong>ï¼Œ10.99%</p>
</li>
<li>
<p><strong>Java</strong>ï¼Œ8.71%</p>
</li>
<li>
<p><strong>C++</strong> ï¼Œ8.67%</p>
</li>
<li>
<p><strong>C#</strong> ï¼Œ7.39%</p>
</li>
<li>
<p><strong>JavaScript</strong>ï¼Œ3.03%</p>
</li>
<li>
<p><strong>Visual Basic</strong>ï¼Œ2.41%</p>
</li>
<li>
<p><strong>SQL</strong>ï¼Œ2.27%</p>
</li>
<li>
<p><strong>Delphi/Object Pascal</strong>ï¼Œ1.98%</p>
</li>
<li>
<p><strong>R</strong>ï¼Œ1.82%</p>
</li>
</ol>
<p>å¦ä¸€é¡¹â€œ<strong>PyPL</strong> ç¼–ç¨‹è¯­è¨€æµè¡Œåº¦æŒ‡æ•°â€åˆ™åŸºäº <strong>è°·æ­Œ</strong> ä¸Šè¯­è¨€æ•™ç¨‹çš„æœç´¢é¢‘ç‡æ¥è¯„ä¼°æµè¡Œåº¦ã€‚</p>
<p>ï¼ˆ2026å¹´1æœˆ <strong>PyPL</strong> æŒ‡æ•°å‰10åï¼‰</p>
<ol>
<li>
<p><strong>Python</strong>ï¼Œ24.61%</p>
</li>
<li>
<p><strong>C/C++</strong> ï¼Œ14.13%</p>
</li>
<li>
<p><strong>Objective-C</strong>ï¼Œ13.35%</p>
</li>
<li>
<p><strong>Java</strong>ï¼Œ10.45%</p>
</li>
<li>
<p><strong>R</strong>ï¼Œ6.18%</p>
</li>
<li>
<p><strong>JavaScript</strong>ï¼Œ4.68%</p>
</li>
<li>
<p><strong>Swift</strong>ï¼Œ3.68%</p>
</li>
<li>
<p><strong>PHP</strong>ï¼Œ2.95%</p>
</li>
<li>
<p><strong>C#</strong> ï¼Œ2.79%</p>
</li>
<li>
<p><strong>Ada</strong>ï¼Œ2.71%</p>
</li>
</ol>
<blockquote>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.infoworld.com%2Farticle%2F4112993%2Fc-wins-tiobe-programming-language-of-the-year-honors-for-2025.html" target="_blank" title="https://www.infoworld.com/article/4112993/c-wins-tiobe-programming-language-of-the-year-honors-for-2025.html" ref="nofollow noopener noreferrer">C# wins Tiobe Programming Language of the Year honors for 2025</a></p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026å¼€å¹´ç¬¬ä¸€ç‚¸ï¼é™ˆå¤©æ¡¥æºä»£å­£å³°å‘å¸ƒ MiroThinker 1.5ï¼š30Bå‚æ•°è·‘å‡º 1T æ€§èƒ½ï¼Œæœç´¢æ™ºèƒ½ä½“å¤©èŠ±æ¿æ¥äº†]]></title>    <link>https://juejin.cn/post/7592127014188138496</link>    <guid>https://juejin.cn/post/7592127014188138496</guid>    <pubDate>2026-01-07T01:57:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592127014188138496" data-draft-id="7592089325913341952" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026å¼€å¹´ç¬¬ä¸€ç‚¸ï¼é™ˆå¤©æ¡¥æºä»£å­£å³°å‘å¸ƒ MiroThinker 1.5ï¼š30Bå‚æ•°è·‘å‡º 1T æ€§èƒ½ï¼Œæœç´¢æ™ºèƒ½ä½“å¤©èŠ±æ¿æ¥äº†"/> <meta itemprop="keywords" content="åç«¯"/> <meta itemprop="datePublished" content="2026-01-07T01:57:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é’æ¢…ä¸»ç "/> <meta itemprop="url" content="https://juejin.cn/user/2277843825604222"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026å¼€å¹´ç¬¬ä¸€ç‚¸ï¼é™ˆå¤©æ¡¥æºä»£å­£å³°å‘å¸ƒ MiroThinker 1.5ï¼š30Bå‚æ•°è·‘å‡º 1T æ€§èƒ½ï¼Œæœç´¢æ™ºèƒ½ä½“å¤©èŠ±æ¿æ¥äº†
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2277843825604222/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é’æ¢…ä¸»ç 
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:57:55.000Z" title="Wed Jan 07 2026 01:57:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>ä½ å¥½ï¼Œæˆ‘æ˜¯<strong>æ°å“¥</strong>ã€‚</p>
<p>2026 å¹´æ‰åˆšå¼€å§‹ä¸¤å¤©ï¼Œ<strong>AI</strong> åœˆå°±è¿æ¥ä¸€è®°é‡ç£…ç‚¸å¼¹ï¼</p>
<p>ç”±ç››å¤§åˆ›å§‹äººã€åˆ›æ–°ä¼ä¸šå®¶<strong>é™ˆå¤©æ¡¥</strong>ä¸æ¸…åå¤§å­¦çŸ¥å AI å­¦è€…<strong>ä»£å­£å³°</strong>è”åˆå‘èµ·çš„ <strong>MiroMind</strong> å›¢é˜Ÿï¼Œæ­£å¼å‘å¸ƒäº†è‡ªç ”æ——èˆ°æœç´¢æ™ºèƒ½ä½“æ¨¡å‹ <strong>MiroThinker 1.5</strong>ã€‚
<img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d5684d400bee499ba32ac34bd64c5a7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=%2BrH9d1mUukv5LTvQddwC5Rp6qWM%3D" alt="" loading="lazy"/></p>
<p>æœ€äº®çœ¼çš„æ•°æ®æ˜¯ï¼š<strong>30Bå‚æ•°ç‰ˆæœ¬ï¼Œç”¨ä»… 1/30çš„å‚æ•°è§„æ¨¡ï¼Œå°±è·‘å‡ºäº†æ¯”è‚© 1T å‚æ•°æ¨¡å‹çš„æ€§èƒ½</strong>ï¼<strong>235B</strong>ç‰ˆæœ¬æ›´æ˜¯åœ¨å¤šä¸ªæœç´¢æ™ºèƒ½ä½“åŸºå‡†ä¸Šï¼Œç›´æ¥è·»èº«å…¨çƒç¬¬ä¸€æ¢¯é˜Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9fa5b131c2dc4389a90a2c8626868822~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=leKPh%2BBik7dPMgf%2FPRE97Ax2iZQ%3D" alt="" loading="lazy"/></p>
<p>è¿™ä¸æ˜¯ç®€å•çš„â€œå †å‚æ•°â€ï¼Œè€Œæ˜¯å¼€åˆ›äº†ä¸€ç§å…¨æ–°çš„æ™ºèƒ½èŒƒå¼â€”â€”<strong>å‘ç°å¼æ™ºèƒ½</strong>ã€‚</p>
<p>ä»Šå¤©æˆ‘ä»¬å°±æ¥æ·±åº¦èŠèŠè¿™æ¬¾æ¨¡å‹ï¼Œçœ‹çœ‹å®ƒåˆ°åº•æœ‰å¤šå¼ºï¼</p>
<h2 data-id="heading-0">é™ˆå¤©æ¡¥çš„â€œå‘ç°å¼æ™ºèƒ½â€ç»ˆäºè½åœ°</h2>
<p>ç†Ÿæ‚‰<strong>é™ˆå¤©æ¡¥</strong>çš„æœ‹å‹éƒ½çŸ¥é“ï¼Œä»–è¿™äº›å¹´ All in è„‘ç§‘å­¦å’Œ AI é¢†åŸŸã€‚2025 å¹´ï¼Œä»–å°±æå‡ºäº†â€œ<strong>å‘ç°å¼æ™ºèƒ½</strong>â€çš„ç†å¿µï¼š<strong>çœŸæ­£çš„æ™ºèƒ½ä¸æ˜¯â€œå…¨çŸ¥å…¨èƒ½â€çš„åšé¢˜å®¶ï¼Œè€Œæ˜¯åƒç§‘å­¦å®¶ä¸€æ ·ï¼Œä¼šä¸»åŠ¨æ±‚è¯ã€éªŒè¯ã€ä¿®æ­£</strong>ã€‚</p>
<p>è¿™æ¬¡ <strong>MiroThinker 1.5</strong>ï¼Œæ­£æ˜¯è¿™ä¸ªç†å¿µçš„å®Œç¾è½åœ°ã€‚</p>
<p>å›¢é˜Ÿå¼ºè°ƒï¼Œä¼ ç»Ÿ <strong>Scaling Law</strong> åªç›¯ç€å‚æ•°å’Œæ•°æ®é‡ï¼Œä½†ä»–ä»¬å‘ç°äº†ç¬¬ä¸‰ç»´åº¦â€”â€” <strong>Interactive Scaling</strong>ï¼šé€šè¿‡æ¨¡å‹ä¸å¤–éƒ¨ç¯å¢ƒï¼ˆæœç´¢å¼•æ“ã€å·¥å…·ï¼‰çš„æ·±åº¦äº¤äº’ï¼Œæ¥æŒ‡æ•°çº§æ”¾å¤§æ™ºèƒ½ã€‚</p>
<p>ç®€å•è¯´ï¼Œ<strong>å°±æ˜¯è®©æ¨¡å‹â€œæ›´å‹¤å¿«åœ°åŠ¨åŠ¨æ‰‹â€ï¼Œè€Œä¸æ˜¯åªâ€œé•¿æ›´å¤§çš„è„‘å­â€</strong>ã€‚</p>
<h2 data-id="heading-1">ç¡¬æ ¸æ•°æ®è¯´è¯ï¼šåŸºå‡†éœ¸æ¦œï¼Œæˆæœ¬ç¢¾å‹</h2>
<p>æ¥çœ‹æˆç»©å•ï¼š</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ecafd7b18284ae4add5c0878c9545c6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=5aLKps6YknL%2Bs3pfFOi9h7TpFsE%3D" alt="" loading="lazy"/></p>
<ul>
<li><strong>BrowseCompï¼ˆç½‘é¡µæ£€ç´¢ç±»å¤§æ¨¡å‹åŸºå‡†æµ‹è¯•ï¼‰</strong>ï¼š69.8%ï¼Œåˆ·æ–° <strong>ChatGPT-Agent</strong> çºªå½•</li>
<li><strong>BrowseComp-ZHï¼ˆBrowseCompçš„ä¸­æ–‡é€‚é…ç‰ˆæœ¬ï¼‰</strong>ï¼š71.5%</li>
<li><strong>GAIA-Val-165ï¼ˆGAIAåŸºå‡†æµ‹è¯•éªŒè¯é›†ï¼‰</strong>ï¼š80.8%</li>
<li><strong>HLE-Textï¼ˆäººç±»ç»ˆææµ‹è¯•ï¼‰</strong>ï¼š39.2%</li>
</ul>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9ebf59573ede40f4a69a8e09f7a31a46~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=dLReiSq22uZLo3EsB38PtsFLb%2Bk%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/249878e5c9684e509645a8d2814046b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=JH%2FNRpJ8g%2FRJCfJH1qibqS%2BT4iA%3D" alt="" loading="lazy"/></p>
<p>è¿™äº›æˆç»©ï¼Œå·²ç»å’Œ <strong>GPT-5-Highã€Gemini-3-Proã€DeepSeek-V3.2</strong> ç­‰é¡¶å°–é—­æºæ¨¡å‹ä¸ç›¸ä¸Šä¸‹ã€‚</p>
<p>æ›´ç‹ çš„æ˜¯ï¼Œå’Œ <strong>1T</strong> å‚æ•°çš„ <strong>Kimi-K2-Thinking</strong> å¯¹æ¯”ï¼š</p>
<ul>
<li><strong>BrowseComp-ZH</strong>ä¸Šé¢†å…ˆ <strong>4.5%</strong></li>
<li>å•æ¡è°ƒç”¨æˆæœ¬ä»… <strong>$0.07</strong>ï¼ˆ<strong>Kimiçš„1/20</strong>ï¼‰</li>
<li>æ¨ç†é€Ÿåº¦å¤§å¹…é¢†å…ˆ</li>
</ul>
<p>è¿™æ€§ä»·æ¯”ï¼Œç›´æ¥èµ·é£ï¼</p>
<h2 data-id="heading-2">æŠ€æœ¯äº®ç‚¹ï¼šä¸åªæ˜¯ä¼šç­”é¢˜ï¼Œä¼šâ€œç ”ç©¶â€</h2>
<p><strong>MiroThinker 1.5</strong> çš„æ ¸å¿ƒèƒ½åŠ›æœ‰å‡ å¤§æ€æ‰‹é”ï¼š</p>
<ol>
<li><strong>Evidence-Seeking</strong>ï¼šæŠŠé—®é¢˜æ‹†æˆå¯éªŒè¯çš„å‡è®¾ï¼Œä¸»åŠ¨ä¸Šç½‘æ±‚è¯</li>
<li><strong>Iterative Verification</strong>ï¼šå¤šè½®æ ¡éªŒã€è‡ªæˆ‘ä¿®æ­£ï¼Œé¿å…é”™è¯¯ç´¯ç§¯</li>
<li><strong>Anti-Hallucination</strong>ï¼šæ²¡æœ‰è¯æ®çš„æ¨ç†ç›´æ¥è¿‡æ»¤ï¼Œè¯´ä¸å‡ºå°±è¯´â€œä¸çŸ¥é“â€</li>
<li><strong>æ—¶åºæ•æ„Ÿè®­ç»ƒ</strong>ï¼šä¸“æ²»â€œæœªæ¥ä¿¡æ¯æ³„éœ²â€ï¼Œé¢„æµ‹æ›´é è°±</li>
</ol>
<p>æ¨¡å‹æœ€é«˜æ”¯æŒ <strong>400~600</strong> æ¬¡å·¥å…·è°ƒç”¨ï¼ŒçœŸæ­£åšåˆ°äº†â€œåƒç§‘å­¦å®¶ä¸€æ ·æ€è€ƒâ€ã€‚</p>
<h2 data-id="heading-3">äº²æµ‹ä½“éªŒï¼šä¸¤åˆ†é’Ÿé¢„æµ‹ä¸–ç•Œæ¯ï¼Œé€»è¾‘ä¸¥è°¨åˆ°èµ·é¸¡çš®ç–™ç˜©</h2>
<p>æˆ‘ç¬¬ä¸€æ—¶é—´å»å®˜ç½‘ï¼ˆ<strong><a href="https://link.juejin.cn?target=https%3A%2F%2Fdr.miromind.ai%2F" target="_blank" title="https://dr.miromind.ai/" ref="nofollow noopener noreferrer">dr.miromind.ai/</a></strong> ï¼‰è¯•ç”¨äº†ä¸“ä¸šæ¨¡å¼ï¼Œæ„Ÿè§‰å¤ªæƒŠè‰³äº†ï¼</p>
<p><strong>æµ‹è¯•1ï¼š2026ä¸–ç•Œæ¯å† å†›é¢„æµ‹</strong></p>
<p>æˆ‘é—®ï¼šâ€œ<strong>2026ä¸–ç•Œæ¯è°å¤ºå† æ¦‚ç‡æœ€é«˜ï¼Ÿç»™å‡ºè¯¦ç»†åˆ†æã€‚</strong>â€</p>
<p>æ¨¡å‹ä¸åˆ°ä¸¤åˆ†é’Ÿï¼Œå°±ç»™å‡ºäº†å®Œæ•´æŠ¥å‘Šï¼š</p>
<ul>
<li>å…ˆæ¢³ç†å‚èµ›çƒé˜Ÿå®åŠ›ã€è¿‘æœŸæˆ˜ç»©</li>
<li>åˆ†æä¸»åœºä¼˜åŠ¿ï¼ˆåŒ—ç¾ä¸‰å›½è”åˆä¸¾åŠï¼‰</li>
<li>ç»“åˆçŠ¶æ€ã€å®åŠ›ã€ä½“ç³»å®Œæ•´æ€§ç­‰å› ç´ </li>
<li>æœ€ç»ˆç»™å‡ºæ¦‚ç‡æ’åï¼šè¥¿ç­ç‰™&gt; è‹±æ ¼å…°&gt;æ³•å›½&gt;å·´è¥¿ &gt; é˜¿æ ¹å»· &gt; æ³•å›½ &gt; å¾·å›½â€¦</li>
<li>æ¯ä¸€æ­¥éƒ½æœ‰æ¥æºé“¾æ¥å’Œå› æœé“¾</li>
</ul>
<p>å¯¹æ¯”å…¶ä»–æ¨¡å‹ï¼Œ<strong>MiroThinker</strong> çš„å›ç­”æœ€å®Œæ•´ã€æœ€æœ‰é£é™©æç¤ºï¼Œå®Œå…¨ä¸åƒâ€œèƒ¡çŒœâ€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ee4abc4100dd4459b931e13a81a4c09d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=QgJ%2BlA1s3u33GpUKVOhcThmR7FU%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/e83d82dc0976402fa91cf3d75e4de8b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=0qcgsoJtGy0ObnvKbgSh7KMhev4%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0b4f692a4952485bbe962be70b7255a7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=GYqSMd1t1JD3rAQaT7EsCLc8Kws%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1022768da2d747dfb1cf4a546a58e358~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=v%2Bk9fqHgBK1ocRR2ZWwpuh3xfcA%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a243f9b228184eb0816c0761b29ac4f7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=%2FhlHO1Z0ARdyPS5a%2FXr%2BDk1AZz8%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3c61b39c4e94e278ffa5d4d0efd05a8~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=AxB8l0nzSgV4TBn%2B%2BuCxK4o9Ouo%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8135f98b49854dbba1cb471092547ca9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=jzOPkzudbRZCWv1hGouPTnC7pQA%3D" alt="" loading="lazy"/></p>
<p><strong>æµ‹è¯•2ï¼šç®€å•è‚¡å¸‚é—®é¢˜</strong></p>
<p>é—®æŸåªçƒ­é—¨è‚¡ç¥¨çŸ­æœŸèµ°åŠ¿ï¼Œå®ƒä¼šä¸»åŠ¨æŸ¥æœ€æ–°æ–°é—»ã€è´¢æŠ¥ã€ç›˜å‰æ•°æ®ï¼Œç»™å‡ºå¤šç©ºç†ç”±ï¼Œè€Œä¸æ˜¯çç¼–ã€‚</p>
<p>æ€»ä¹‹ï¼Œç”¨å®Œæœ€å¤§çš„æ„Ÿå—å°±æ˜¯ï¼š<strong>åˆå¿«è€ƒè™‘åˆå…¨é¢ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„æ·±åº¦â€œæ€è€ƒâ€æ¨¡å‹ï¼</strong></p>
<h2 data-id="heading-4">å¼€æº+ä½é—¨æ§›ï¼Œå¼€å‘è€…ç¦éŸ³</h2>
<p>æœ€è‰¯å¿ƒçš„æ˜¯ï¼š<strong>ä¸Šçº¿å³å¼€æº</strong>ï¼</p>
<ul>
<li>
<p><strong>æ¨¡å‹æƒé‡</strong>ï¼šHugging Face <a href="https://link.juejin.cn?target=https%3A%2F%2Fhuggingface.co%2Fmiromind-ai%2FMiroThinker-v1.5-235B" target="_blank" title="https://huggingface.co/miromind-ai/MiroThinker-v1.5-235B" ref="nofollow noopener noreferrer">huggingface.co/miromind-aiâ€¦</a></p>
</li>
<li>
<p><strong>ä»£ç æ¡†æ¶</strong>ï¼šGitHub <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FMiroMindAI%2FMiroThinker" target="_blank" title="https://github.com/MiroMindAI/MiroThinker" ref="nofollow noopener noreferrer">github.com/MiroMindAI/â€¦</a></p>
</li>
<li>
<p>è¿˜æœ‰ MiroFlow å¼€æºæ¡†æ¶</p>
</li>
</ul>
<p>æƒ³è‡ªå·±éƒ¨ç½²çš„åŒå­¦ï¼Œç›´æ¥å†²ï¼</p>
<p>ç¤¾ç¾¤ä¹Ÿå¾ˆæ´»è·ƒï¼š</p>
<ul>
<li><strong>Discord</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fdiscord.gg%2FF7EQFnYscV" target="_blank" title="https://discord.gg/F7EQFnYscV" ref="nofollow noopener noreferrer">discord.gg/F7EQFnYscV</a></li>
<li><strong>å¾®ä¿¡å°åŠ©æ‰‹</strong>ï¼šmiromind001</li>
</ul>
<h4 data-id="heading-5">å†™åœ¨æœ€åï¼š2026ï¼Œäº¤äº’æ—¶ä»£æ¥äº†</h4>
<p><strong>MiroThinker 1.5</strong> çš„å‡ºç°ï¼Œè¯æ˜äº†å‚æ•°ä¸æ˜¯å”¯ä¸€ç‹é“ï¼Œäº¤äº’æ‰æ˜¯ä¸‹ä¸€ä¸ªçªç ´å£ã€‚</p>
<p><strong>é™ˆå¤©æ¡¥</strong>å’Œ<strong>ä»£å­£å³°</strong>è¿™ä¸€æªï¼Œæ‰“å¾—å¤ªå“äº†ï¼</p>
<p>å®ƒä¸ä»…è®©å°æ¨¡å‹çœ‹åˆ°äº†è¿½èµ¶å·¨å¤´çš„å¸Œæœ›ï¼Œä¹Ÿç»™æˆ‘ä»¬æ™®é€šç”¨æˆ·å¸¦æ¥äº†æ›´å¯é ã€æ›´ä½æˆæœ¬çš„AIåŠ©æ‰‹ã€‚</p>
<p>ä½ å‡†å¤‡å¥½ä½“éªŒâ€œå‘ç°å¼æ™ºèƒ½â€äº†å—ï¼Ÿ</p>
<p>å¿«å» <a href="https://link.juejin.cn?target=https%3A%2F%2Fdr.miromind.ai%2F" target="_blank" title="https://dr.miromind.ai/" ref="nofollow noopener noreferrer">dr.miromind.ai/</a> è¯•è¯•å§ï¼Œä¸“ä¸šæ¨¡å¼çœŸçš„é¦™ï¼</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/814172b4f507456ab427ec95f43b5ebb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Z2S5qKF5Li756CB:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768355875&amp;x-signature=PkvqG%2BZmPfPU3YHVBIS8q30KBwY%3D" alt="" loading="lazy"/></p>
<p>å…³æ³¨å…¬ä¼—å·ã€AIä¿¡æ¯é£å‘ã€‘ï¼Œå¯ä»¥è·å–æ›´å¤š AI å³æ—¶çƒ­ç‚¹èµ„è®¯å’Œå¥½ç”¨ AI å·¥å…·æ¨èã€‚</p>
<p>AI æŠ€æœ¯æ­£ä»¥å‰æ‰€æœªæœ‰çš„é€Ÿåº¦å‘å±•ï¼Œå®ƒå°†å¦‚ä½•å¡‘é€ æˆ‘ä»¬çš„æœªæ¥ï¼Ÿè®©æˆ‘ä»¬æ‹­ç›®ä»¥å¾…ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[AI ç®—åŠ›æ˜¯ä¸€ç§éœ€è¦è¢«å®šä»·ã€å¯¹å†²å’Œäº¤æ˜“çš„é£é™©èµ„äº§ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592089325913309184</link>    <guid>https://juejin.cn/post/7592089325913309184</guid>    <pubDate>2026-01-07T01:51:55.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592089325913309184" data-draft-id="7592094314472357923" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="AI ç®—åŠ›æ˜¯ä¸€ç§éœ€è¦è¢«å®šä»·ã€å¯¹å†²å’Œäº¤æ˜“çš„é£é™©èµ„äº§ï¼Ÿ"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,LLM,é¢è¯•"/> <meta itemprop="datePublished" content="2026-01-07T01:51:55.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="Baihai_IDP"/> <meta itemprop="url" content="https://juejin.cn/user/3123071228582343"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            AI ç®—åŠ›æ˜¯ä¸€ç§éœ€è¦è¢«å®šä»·ã€å¯¹å†²å’Œäº¤æ˜“çš„é£é™©èµ„äº§ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3123071228582343/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    Baihai_IDP
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:51:55.000Z" title="Wed Jan 07 2026 01:51:55 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p><strong>ç¼–è€…æŒ‰ï¼š</strong> å½“æ‰€æœ‰äººéƒ½å°†Â AIÂ ç®—åŠ›è§†ä¸ºä¸‹ä¸€ä¸ªäº‘è®¡ç®—é£å£æ—¶ï¼Œæˆ‘ä»¬æ˜¯å¦å¿½ç•¥äº†å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ç§éœ€è¦è¢«å®šä»·ã€å¯¹å†²å’Œäº¤æ˜“çš„é£é™©èµ„äº§ï¼Ÿ</p>
<p>æˆ‘ä»¬ä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥çš„è¿™ç¯‡æ–‡ç« ï¼Œä½œè€…çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ï¼šå‰æ²¿AIç®—åŠ›å·²è¶…å‡ºä¼ ç»Ÿäº‘æœåŠ¡èŒƒç•´ï¼Œå…¶ä¸ç¡®å®šæ€§ã€æ—¶æ•ˆæ€§ä¸ç¨€ç¼ºæ€§æ›´æ¥è¿‘å¤§å®—å•†å“ä¸é‡‘èè¡ç”Ÿå“ï¼Œæœªæ¥ç«äº‰çš„å…³é”®ä¸åœ¨ä¼˜åŒ–æœåŠ¡ï¼Œè€Œåœ¨è®¾è®¡æ‰¿è½½ç®—åŠ›é£é™©çš„å¸‚åœºæœºåˆ¶ã€‚</p>
<p>æ–‡ç« é¦–å…ˆæŒ‡å‡º AI ç®—åŠ›å…·æœ‰çªå‘æ€§ã€ç¨€ç¼ºæ€§ã€æ—¶æ•ˆæ€§ä¸è·¯å¾„ä¾èµ–ç­‰ç‰¹å¾ï¼Œä½¿å…¶ä»â€œå¯æ¶ˆè´¹çš„æœåŠ¡â€è½¬å˜ä¸ºâ€œéœ€ç®¡ç†çš„äº§èƒ½é£é™©â€ï¼›æ¥ç€ä»¥æœªå¯¹å†²çš„è®­ç»ƒä»»åŠ¡ä¸ºä¾‹ï¼Œè¯´æ˜é‡‘èå·¥å…·å¦‚ä½•ä¸ºç®—åŠ›éœ€æ±‚æ–¹æä¾›é£é™©è§£å†³æ–¹æ¡ˆï¼›è¿›è€Œå¯¹æ¯”ç¡…è°·çš„â€œæœåŠ¡æŠ½è±¡â€æ¨¡å¼ä¸èŠåŠ å“¥/çº½çº¦çš„â€œé£é™©å¸‚åœºâ€æ¨¡å¼ï¼Œæ­ç¤ºäºŒè€…åº•å±‚é€»è¾‘çš„æœ¬è´¨å·®å¼‚ï¼›æœ€åæå‡ºï¼ŒçœŸæ­£çš„äº§ä¸šåˆ¶é«˜ç‚¹å°†æ˜¯æ„å»ºç®—åŠ›é£é™©äº¤æ˜“çš„åŸºç¡€è®¾æ–½ï¼Œè€Œè¿™ä¸ä»…å°†é‡å¡‘ AI ç ”å‘ä¸ä¾›åº”çš„æ ¼å±€ï¼Œä¹Ÿå¯èƒ½å‚¬ç”Ÿæ–°ä¸€ä»£å¸‚åœºå‹æœºæ„ã€‚</p>
</blockquote>
<p><strong>ä½œè€… | Dave Friedman</strong></p>
<p><strong>ç¼–è¯‘ | å²³æ‰¬</strong></p>
<p>å¤§å¤šæ•°äººè°ˆèµ· AI ç®—åŠ›å¸‚åœºï¼Œè„‘æµ·é‡Œæµ®ç°çš„æ˜¯äº‘è®¡ç®—é‚£å¥—ï¼šæŠŠç¨€ç¼ºçš„ç¡¬ä»¶å°è£…æˆä¸€ä¸ª APIï¼ŒæŒ‰ç”¨é‡è®¡è´¹ï¼Œå¼€å‡ºè´¦å•ï¼Œå†åŠ ç‚¹è°ƒåº¦ç®—æ³•çš„â€œé­”æ³•â€ï¼Œç„¶åå»èä¸€è½®èµ„ã€‚</p>
<p>è¿™æ˜¯ç¡…è°·çš„æ€ç»´å®šå¼ï¼Œå´æ˜¯ä¸€ä¸ªé”™è¯¯çš„å¿ƒæ™ºæ¨¡å‹ã€‚</p>
<p>å‰æ²¿ AI ç®—åŠ›ä¸æ˜¯ä¸€ç§å¯ä»¥éšæ„é‡‡è´­çš„å•†å“ï¼Œè€Œæ˜¯ä¸€ä¸ªä¼ä¸šå¿…é¡»ä¸¥è‚ƒåº”å¯¹çš„æˆ˜ç•¥é£é™©æºã€‚<strong>å®ƒæ˜¯ä¸€ç§ååˆ†ç¨€ç¼ºã€ä»·æ ¼æ³¢åŠ¨å·¨å¤§ã€ä¸”ä»·å€¼éšæ—¶é—´è¿…é€Ÿæµé€çš„å…³é”®èµ„æºï¼Œéœ€è¦ä¸ºå…¶å»ºç«‹åŸºäºæœªæ¥é¢„æœŸçš„åŠ¨æ€é£é™©å®šä»·æ¨¡å‹ï¼Œé‡‡å–æªæ–½å¯¹å†²å…¶ä»·æ ¼å’Œå¯è·æ€§é£é™©ï¼Œå¹¶æ¨åŠ¨å½¢æˆå¯çµæ´»äº¤æ˜“è½¬è®©çš„å¸‚åœºæµåŠ¨æ€§ã€‚</strong> æ°å½“çš„ç±»æ¯”å¯¹è±¡ä¸æ˜¯äºšé©¬é€Šäº‘æœåŠ¡ï¼ˆAWSï¼‰æˆ– Snowflakeï¼Œè€Œæ˜¯èŠåŠ å“¥å•†å“äº¤æ˜“æ‰€ï¼ˆCMEï¼‰ã€ç”µåŠ›äº¤æ˜“å¸‚åœºï¼Œä»¥åŠèŠåŠ å“¥å’Œçº½çº¦çš„è¡ç”Ÿå“äº¤æ˜“éƒ¨é—¨ã€‚</p>
<h2 data-id="heading-0"><strong>01 æ ¸å¿ƒé—®é¢˜ï¼šç®—åŠ›çš„äº§èƒ½å…·æœ‰éšæœºæ€§ï¼ˆCompute as Stochastic Capacityï¼‰</strong></h2>
<p>äº‘è®¡ç®—åŸºç¡€è®¾æ–½å»ºç«‹åœ¨å‡ ä¸ªå‡è®¾ä¹‹ä¸Šï¼š</p>
<ul>
<li>ä¾›ç»™å…·æœ‰å¼¹æ€§ã€‚</li>
<li>éœ€æ±‚å¹³ç¨³ã€‚</li>
<li>æˆæœ¬æ›²çº¿å¯é¢„æµ‹ã€‚</li>
<li>æ­£ç¡®çš„æŠ½è±¡æ–¹å¼æ˜¯ï¼ŒæŠŠä¸€åˆ‡å˜æˆ â€œæœåŠ¡çš„æ¶ˆè´¹â€ã€‚ã€è¯‘è€…æ³¨ï¼šäº‘æœåŠ¡å•†ï¼ˆå¦‚ AWSï¼‰å°†å…¶åº•å±‚å¤æ‚çš„ç¡¬ä»¶åŸºç¡€è®¾æ–½ï¼ˆæœåŠ¡å™¨ã€ç½‘ç»œã€å­˜å‚¨ï¼‰æŠ½è±¡åŒ–ï¼Œå‘ç”¨æˆ·å‘ˆç°ä¸ºä¸€ä¸ªç®€å•çš„ã€æŒ‰éœ€å–ç”¨çš„ â€œæœåŠ¡â€ã€‚ã€‘</li>
</ul>
<p>å¤„äºæŠ€æœ¯æœ€å‰æ²¿ã€æœ€å°–ç«¯çš„ AI ç ”å‘æ‰“ç ´äº†è¿™äº›å‡è®¾ã€‚AI ç®—åŠ›å…·æœ‰ä»¥ä¸‹ç‰¹å¾ï¼š</p>
<ul>
<li><strong>çªå‘æ€§</strong>ï¼šç”±éè¿ç»­çš„è®­ç»ƒä»»åŠ¡é©±åŠ¨ï¼Œè€Œéç¨³å®šçš„ç½‘ç»œæµé‡ã€‚</li>
<li><strong>ç¨€ç¼ºæ€§</strong>ï¼šå—é™äºæ™¶åœ†äº§èƒ½å‘¨æœŸã€å‡ºå£ç®¡åˆ¶ä»¥åŠéœ€è€—æ—¶æ•°å¹´çš„ç”µåŠ›åŸºç¡€è®¾æ–½å»ºè®¾ã€‚</li>
<li><strong>æ—¶æ•ˆæ€§</strong>ï¼šé”™è¿‡ä¸€ä¸ªå‰æ²¿ AI æ¨¡å‹çš„è®­ç»ƒçª—å£æœŸï¼Œå¯èƒ½å¯¼è‡´æ•´ä¸ªäº§å“å‘¨æœŸçš„è½åã€‚</li>
<li><strong>è·¯å¾„ä¾èµ–</strong>ï¼šæˆæœ¬å—èƒ½æºä»·æ ¼ã€ç¡¬ä»¶ä»£é™…å’Œç®—æ³•æ¼”è¿›çš„å½±å“ã€‚</li>
</ul>
<p>è¿™å·²ç»ä¸æ˜¯ç®€å•çš„â€œæœåŠ¡ä½¿ç”¨é‡â€é—®é¢˜äº†ï¼Œè€Œæ˜¯ä¸€ç§å®å®åœ¨åœ¨ä¼šå¸¦æ¥æŸå¤±çš„äº§èƒ½é£é™©ã€‚å½“ä½ é¢å¯¹çš„æ˜¯ä¸€ç§åœ¨ä¾›ç»™ã€æ—¶æœºå’Œä»·æ ¼ä¸Šéƒ½å……æ»¡ä¸ç¡®å®šæ€§çš„å®ä½“èµ„äº§æ—¶ï¼Œä½ å°±ä¸å†å¤„äºäº§å“è®¾è®¡çš„èŒƒç•´äº†ï¼Œè€Œæ˜¯è¿›å…¥äº†å¸‚åœºæœºåˆ¶è®¾è®¡çš„é¢†åŸŸã€‚</p>
<h2 data-id="heading-1"><strong>02 ä¸€ä¸ªç®€å•ä¾‹å­ï¼šæœªè¿›è¡Œå¯¹å†²çš„è®­ç»ƒä»»åŠ¡</strong></h2>
<p>å‡è®¾æŸå®éªŒå®¤è®¡åˆ’åœ¨æœªæ¥ 12 åˆ° 18 ä¸ªæœˆå†…å¼€å±•ä¸€æ¬¡å¤§è§„æ¨¡è®­ç»ƒä»»åŠ¡ã€‚ä»–ä»¬å°šä¸ç¡®å®šè¯¥è®­ç»ƒä»»åŠ¡çš„å…·ä½“å¯åŠ¨æ—¥æœŸï¼ˆå–å†³äºç ”ç©¶è¿›å±•ï¼‰ï¼Œä½†å¯¹æ‰€éœ€ç®—åŠ›è§„æ¨¡å¿ƒé‡Œå·²å¤§è‡´æœ‰æ•° â€”â€” æŒ‰å½“å‰ä»·æ ¼ç®—ï¼Œå¤§çº¦éœ€è¦ 2000 ä¸‡ç¾å…ƒçš„ç®—åŠ›ã€‚</p>
<p>ç›®å‰ï¼Œä»–ä»¬åªæœ‰ä¸¤ä¸ªç³Ÿç³•çš„é€‰æ‹©ï¼š</p>
<p><strong>1ï¼‰é€šè¿‡é•¿æœŸåˆçº¦è¶…é‡é¢„å®šç®—åŠ›ï¼Œæ‰¿æ‹…é«˜æ˜‚çš„æŒæœ‰æˆæœ¬ï¼›</strong></p>
<p><strong>2ï¼‰æˆ–è€…èµŒä¸€æŠŠç°è´§å¸‚åœºï¼Œå¯„å¸Œæœ›äºç­‰ä»–ä»¬å‡†å¤‡å°±ç»ªæ—¶ï¼Œä»·æ ¼å’Œå¸‚åœºä¾›ç»™éƒ½èƒ½å¦‚äººæ‰€æ„¿ã€‚</strong></p>
<p>è¿™æ°æ°æ­£æ˜¯æœŸè´§ã€æœŸæƒå’Œäº’æ¢åˆçº¦è¿™ç±»é‡‘èå·¥å…·æœ¬åº”è§£å†³çš„é—®é¢˜ã€‚å¦‚æœå°†ç®—åŠ›è§†ä¸ºä¸€ç§é‡‘èåŸºç¡€èµ„äº§ï¼Œè¯¥å®éªŒå®¤å°±å¯ä»¥ï¼š</p>
<ul>
<li>ä¹°å…¥ç®—åŠ›æœŸè´§ï¼Œå…ˆé”ä¸€å±‚å·²çŸ¥ä»·çš„åº•ä»“ï¼›</li>
<li>å†å åŠ çœ‹æ¶¨æœŸæƒï¼ˆcall optionsï¼‰ï¼Œä»¥é˜²é¡¹ç›®è§„æ¨¡è¶…é¢„æœŸã€éœ€è¦é¢å¤–ç®—åŠ›ï¼›</li>
<li>å¹¶é€šè¿‡äº’æ¢åˆçº¦ï¼ˆswapsï¼‰ï¼Œå°†æµ®åŠ¨çš„ç°è´§ä»·æ ¼ç½®æ¢ä¸ºå›ºå®šä»·æ ¼ã€‚</li>
</ul>
<p>è¿™å¥—é€»è¾‘æœ¬èº«å¹¶ä¸å¤æ‚ â€”â€” ä¸è¿‡æ˜¯æŠŠå¤§å®—å•†å“é£é™©ç®¡ç†çš„åŸºç¡€æ–¹æ³•ä»å°éº¦æˆ–ç”µåŠ›ï¼Œæ¢æˆäº† GPU è€Œå·²ã€‚ä¹‹æ‰€ä»¥å°šæœªå®ç°ï¼Œå”¯ä¸€çš„åŸå› æ˜¯æˆ‘ä»¬ä»æŠŠç®—åŠ›å½“ä½œä¸€ç§æœåŠ¡å‹äº§å“ï¼Œè€Œéä¸€ç§å…·æœ‰éšæœºæ€§çš„ç”Ÿäº§æŠ•å…¥è¦ç´ ã€‚</p>
<h2 data-id="heading-2"><strong>03 ç¡…è°· vs èŠåŠ å“¥/çº½çº¦ï¼šä¸¤ç§ç©æ³•</strong></h2>
<p>çœ‹çœ‹ä¸¤è¾¹ç©çš„æ ¹æœ¬ä¸æ˜¯åŒä¸€å±€ç‰Œã€‚</p>
<p><strong>ç¡…è°·å±€ï¼š</strong></p>
<ul>
<li>æŠŠåº•å±‚çš„å¤æ‚æ€§å°è£…èµ·æ¥ï¼Œåªé€šè¿‡ä¸€ä¸ªç®€æ´ã€æ¸…æ™°çš„åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰å¯¹å¤–æä¾›åŠŸèƒ½ã€‚</li>
<li>ä»¥å¼€å‘è€…ä½“éªŒä¸ºæ ¸å¿ƒä¼˜åŒ–ç›®æ ‡ã€‚</li>
<li>å°†å¸‚åœºæ³¢åŠ¨å¹³æ»‘å¤„ç†ä¸ºåˆ†å±‚å®šä»·æ–¹æ¡ˆã€‚</li>
<li>é€šè¿‡ç”¨é‡è®¡è´¹ï¼Œå¹¶é€šè¿‡ç”Ÿæ€æˆ–åˆåŒæŠŠå®¢æˆ·â€œé”å®šâ€ã€‚</li>
</ul>
<p>è¿™å¥—ç©æ³•åœ¨åº•å±‚ç³»ç»Ÿâ€œå®¹é”™æ€§å¼ºâ€æ—¶æ‰æœ‰æ•ˆ â€”â€” æ¯”å¦‚ä¾›ç»™èƒ½å¾ˆå¿«è·Ÿä¸Šã€éœ€æ±‚è¶³å¤Ÿåˆ†æ•£ã€æ²¡æœ‰äººä¼šå› å•æ¬¡ä»·æ ¼é£™å‡è€Œå½»åº•å‡ºå±€ â€”â€” æ­¤æ—¶ï¼Œä½ å¯ä»¥æŠŠé£é™©å½“ä½œå™ªå£°å¿½ç•¥ã€‚</p>
<p><strong>èŠåŠ å“¥/çº½çº¦å±€ï¼š</strong></p>
<ul>
<li>ä¸éšè—é£é™©ï¼Œè€Œæ˜¯ç›´é¢é£é™©ã€‚</li>
<li>ä¸ºé«˜é£é™©æ ‡çš„å®šä¹‰æ ‡å‡†åŒ–åˆçº¦ã€‚</li>
<li>å»ºç«‹èƒ½è®©è¿™äº›åˆçº¦è¿›è¡Œäº¤æ˜“çš„äº¤æ˜“åœºæ‰€ã€‚</li>
<li>å¼•å…¥æ¸…ç®—æœºåˆ¶ã€ä¿è¯é‡‘åˆ¶åº¦å’Œé£é™©æ¨¡å‹ï¼Œè®©æœºæ„èƒ½å¤Ÿå®‰å…¨åœ°æŒæœ‰é£é™©æ•å£ã€‚</li>
</ul>
<p>æ­£æ˜¯è¿™ç§æ€ç»´æ–¹å¼ï¼Œè®©å¤©æ°”ã€æ³¢åŠ¨ç‡ã€ç”µåŠ›å‚¨å¤‡å’Œè´§è¿éƒ½å˜æˆäº†å¯äº¤æ˜“çš„èµ„äº§ã€‚è¿™å¹¶ä¸æµªæ¼«ï¼Œåªæ˜¯æ¸…é†’åœ°æ‰¿è®¤ä¸€ä¸ªäº‹å®ï¼šä»»ä½•åå¤å‡ºç°ã€ä¸”ä¼šå¯¹çœŸå®ä¸–ç•Œçš„äººé€ æˆä¼¤å®³çš„ä¸ç¡®å®šæ€§ï¼Œéƒ½å€¼å¾—ä¸ºä¹‹å»ºç«‹ä¸€ä¸ªå¸‚åœºã€‚</p>
<h2 data-id="heading-3"><strong>04 â€œä½†ç®—åŠ›ä¸æ˜¯çŸ³æ²¹ï¼â€</strong></h2>
<p>è¯´å¾—å¯¹ï¼Œè€Œè¿™æ°æ°æ˜¯å…¶æœ‰è¶£ä¹‹å¤„ã€‚ç®—åŠ›æ˜¯ç¼ºä¹ç»Ÿä¸€æ ‡å‡†ã€é«˜åº¦å¼‚æ„ã€éš¾ä»¥æŠ½è±¡æˆå•ä¸€å•†å“çš„ â€”â€” å®ƒä¼šå› ç¡¬ä»¶ã€ç½‘ç»œã€å»¶è¿Ÿã€åœ°ç†ä½ç½®å’Œ SLAï¼ˆæœåŠ¡ç­‰çº§åè®®ï¼‰çš„ä¸åŒè€Œå˜åŒ–ï¼Œè€Œä¸”éªŒè¯èµ·æ¥å¹¶ä¸ç®€å•ã€‚å¹¶ä¸å­˜åœ¨ä¸€ä¸ªæ”¾ä¹‹å››æµ·è€Œçš†å‡†çš„æ ‡é‡ï¼Œèƒ½å®Œç¾å®šä¹‰â€œä¸€å•ä½ç®—åŠ›â€åœ¨æ‰€æœ‰åœºæ™¯ä¸‹çš„å«ä¹‰ã€‚</p>
<p>ä½†è¿™å¹¶ä¸ä¼šè®©å®ƒå¤±å»èµ„æ ¼ã€‚ç”µåŠ›å¸‚åœºéœ€è¦å¤„ç†åœ°ç†ä½ç½®ã€æ—¶æ®µå’Œä¼ è¾“çº¦æŸï¼›è´§è¿å¸‚åœºéœ€è¦åº”å¯¹èˆªçº¿ã€èˆ¹å‹å’Œæ¸¯å£é£é™©ï¼›è€Œæ³¢åŠ¨ç‡äº§å“äº¤æ˜“çš„ï¼Œç”šè‡³åªæ˜¯ä»·æ ¼çš„ä¸€ç§æŠ½è±¡ç»Ÿè®¡ç‰¹æ€§ã€‚</p>
<p>è¦å°†ç®—åŠ›é‡‘èåŒ–ï¼Œä½ ä¸éœ€è¦â€œä¸€å£åƒæˆä¸ªèƒ–å­â€ï¼Œè€Œæ˜¯éœ€è¦ä¸€ç³»åˆ—æ ‡å‡†åŒ–çš„â€œåˆ‡ç‰‡â€ã€è¯‘è€…æ³¨ï¼šå°†ç®—åŠ›æŒ‰ç‰¹å®šç»´åº¦ï¼ˆå¦‚ç¡¬ä»¶ç±»å‹ã€ä»»åŠ¡åŸºå‡†ã€æ—¶é•¿ç­‰ï¼‰æ‹†è§£ä¸ºå¯å®šä¹‰ã€å¯åº¦é‡ã€å¯åˆçº¦åŒ–çš„å•ä½ã€‚ã€‘ï¼š</p>
<ul>
<li>æ¸…æ™°å®šä¹‰çš„äº¤æ˜“å•ä½ï¼ˆä¾‹å¦‚ï¼šâ€œåœ¨ Z å°æ—¶å†…å®Œæˆ Y åŸºå‡†æµ‹è¯•ä¸‹çš„ X ä¸ª token å¤„ç†ï¼Œæœ€å¤§å»¶è¿Ÿä¸º Lï¼Œæ•…éšœæ¡ä»¶äº‹å…ˆçº¦å®šâ€ï¼‰ï¼› Â </li>
<li>åŒæ–¹éƒ½ä¿¡ä»»çš„è®¡é‡ä¸éªŒè¯æœºåˆ¶ï¼› Â </li>
<li>äº¤ä»˜å¤±è´¥æ—¶çš„è¿çº¦æƒ©ç½šæ¡æ¬¾ã€‚</li>
</ul>
<p>ä½ ä¸ä¼šå¾—åˆ°ä¸€ä¸ªè¦†ç›–æ‰€æœ‰åœºæ™¯çš„â€œå…¨çƒç»Ÿä¸€ GPU æœŸè´§â€ã€‚ä½ æœ€ç»ˆä¼šå¾—åˆ°çš„ï¼Œæ˜¯ä¸€ç³»åˆ—ç›¸äº’å…³è”ã€ä½†å„æœ‰æ‰€æŒ‡çš„åˆçº¦ â€”â€” å°±åƒç”µåŠ›å’Œå¤§å®—å•†å“å¸‚åœºé‚£æ ·ã€‚è¿™æ²¡ä»€ä¹ˆé—®é¢˜ï¼ŒçœŸå®çš„å¸‚åœºæœ¬æ¥å°±æ˜¯è¿™æ ·è¿ä½œçš„ã€‚</p>
<h2 data-id="heading-4"><strong>05 æœåŠ¡æ´¾ vs å¸‚åœºæ´¾ï¼šè°æ‰æ˜¯çœŸæ­£çš„èµ¢å®¶ï¼Ÿ</strong></h2>
<p>ä¸€æ—¦ä½ æŠŠç®—åŠ›çœ‹ä½œä¸€ç§é£é™©ï¼Œæˆ˜ç•¥æ ¼å±€å°±å˜äº†ã€‚æœåŠ¡æ´¾çš„æœ¬èƒ½æ˜¯ï¼š <strong>â€œæˆ‘ä»¬æ›¿ç”¨æˆ·æŠŠå¤æ‚æ€§æŠ½è±¡æ‰ï¼Œè‡ªå·±æ‰¿æ‹…è¿™äº›é£é™©ï¼Œç„¶åé€šè¿‡åŠ ä»·æ¥èµšå–åˆ©æ¶¦ã€‚â€</strong></p>
<p>äºæ˜¯ä½ å¾—åˆ°çš„æ˜¯ GPU ç‰ˆ Airbnbã€æ›´èŠ±å“¨çš„è°ƒåº¦ç³»ç»Ÿã€æ›´å¥½çœ‹çš„ä»ªè¡¨ç›˜ â€”â€” è¿™äº›å›ºç„¶æœ‰ç”¨ï¼Œä½†æœ¬è´¨ä¸Šä»æ˜¯çº¿æ€§å¢é•¿æ¨¡å¼ã€‚ä½ ä¸è¿‡æ˜¯åœ¨ä¸€ä¸ªå¤±çµçš„å¸‚åœºä¸­ï¼Œåšäº†ä¸€ä¸ªæ›´é«˜æ•ˆçš„ä¸­é—´å•†ã€‚</p>
<p>è€Œå¸‚åœºæ´¾çš„æœ¬èƒ½åˆ™ç›¸åï¼š <strong>â€œæˆ‘ä»¬è¦æŠŠé£é™©æš´éœ²å‡ºæ¥ï¼Œå°†å…¶æ ‡å‡†åŒ–ï¼Œå¹¶è®©å®ƒå¯äº¤æ˜“ã€‚æˆ‘ä»¬çš„æŠ¤åŸæ²³æ˜¯å¸‚åœºç»“æ„æœ¬èº«ï¼Œè€Œä¸æ˜¯ UI ç•Œé¢ã€‚â€</strong></p>
<p>è¿™ä¼šå †å‡ºä¸€æ•´å¥—å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼š</p>
<ul>
<li>ç®—åŠ›å•ä½çš„åˆçº¦æ ‡å‡†ï¼› Â </li>
<li>æ”¯æŒè¿™äº›åˆçº¦äº¤æ˜“çš„äº¤æ˜“æ‰€ä¸æ’®åˆå¼•æ“ï¼› Â </li>
<li>æ¸…ç®—ä¸ä¿è¯é‡‘æœºåˆ¶ï¼Œè®©æœºæ„èµ„æœ¬å¾—ä»¥å‚ä¸ï¼› Â </li>
<li>åšå¸‚å•†ï¼Œä¸»åŠ¨æ‰¿æ‹…å¹¶ç®¡ç†ç®—åŠ›é£é™©ï¼› Â </li>
<li>ç®—åŠ›ä»·æ ¼ä¸æ³¢åŠ¨ç‡çš„æ•°æ®ã€æŒ‡æ•°ï¼› Â </li>
<li>é¢å‘ç®—åŠ›ä¾›åº”å•†çš„ä¿¡ç”¨ä¸æŠµæŠ¼æ¡†æ¶ã€‚</li>
</ul>
<p>è¿™æ›´æ¥è¿‘Â <strong>CMEï¼ˆèŠåŠ å“¥å•†å“äº¤æ˜“æ‰€ï¼‰ + ç”µåŠ› ISO å¸‚åœº</strong>ï¼Œè€Œä¸æ˜¯â€œGPU ç‰ˆ Stripeâ€ã€‚ Â </p>
<p>è€Œæœ€æœ‰èƒ½åŠ›æ„å»ºå¹¶è¿è¥è¿™ç±»ç³»ç»Ÿçš„æœºæ„ï¼Œå¹¶ä¸åœ¨æ²™ä¸˜è·¯ï¼ˆSand Hill Roadï¼‰ï¼Œè€Œæ˜¯åœ¨èŠåŠ å“¥å’Œçº½çº¦ã€‚</p>
<h2 data-id="heading-5"><strong>06 å¯¹æœªæ¥çš„é¢„æµ‹ï¼ˆThe Predictionï¼‰</strong></h2>
<p>è°æŒæ§äº† AI ç®—åŠ›çš„é£é™©å±‚ï¼ˆå³é‚£äº›ç”¨äºå®šä»·å’Œäº¤æ˜“å„æ–¹é£é™©æ•å£çš„é‡‘èå·¥å…·ã€äº¤æ˜“å¹³å°ä¸è§„åˆ™ä½“ç³»ï¼‰è°ä¾¿æŒæ¡äº†æ”¯é…ä»¥ä¸‹å„æ–¹çš„å…³é”®æ æ†ï¼š</p>
<ul>
<li>éœ€è¦å¯¹å†²è®­ç»ƒé£é™©çš„ AI å®éªŒå®¤ï¼› Â </li>
<li>å¸Œæœ›åœ¨ä¸å¼•å‘è´¢åŠ¡é£é™©çš„å‰æä¸‹å˜ç°ç®—åŠ›å®¹é‡çš„äº‘å‚å•†å’Œè£¸é‡‘å±æä¾›å•†ï¼›</li>
<li>å¯»æ±‚æ–°å‹çš„ã€å¤šå…ƒåŒ–çš„å®ç‰©èµ„äº§æ•å£çš„åŸºé‡‘ä¸é‡‘èæœºæ„ï¼›</li>
<li>ç”šè‡³å„å›½æ”¿åºœ â€”â€” ä¸€æ—¦å®ƒä»¬å¼€å§‹åƒå¯¹å¾…çŸ³æ²¹å’Œå¤©ç„¶æ°”é‚£æ ·ï¼Œæ€è€ƒâ€œæˆ˜ç•¥æ€§ç®—åŠ›å‚¨å¤‡â€é—®é¢˜ã€‚</li>
</ul>
<p>è¿™ä¸å†æ˜¯â€œæ›´å¥½çš„ SaaS äº§å“â€ï¼Œè€Œæ˜¯ä¸€ç§å¸‚åœºåŸºç¡€è®¾æ–½ï¼ˆmarket institutionï¼‰ã€‚</p>
<p><strong>AI ç®—åŠ›ç»ˆå°†èµ°å‘é‡‘èåŒ–ï¼Œå› ä¸ºå…¶åº•å±‚çš„ä¸ç¡®å®šæ€§å¤ªå¤§ã€å¤ªæŒä¹…ï¼Œé ä¸´æ—¶åˆåŒå’Œ Slack ç§èŠæ ¹æœ¬å…œä¸ä½ã€‚</strong></p>
<p>å¦‚æœä½ è¿˜åœ¨ç”¨ä¼ ç»Ÿå•†å“é”€å”®çš„æ€è·¯æ¥çœ‹å¾… GPU â€”â€” æ¯”å¦‚æŠŠå®ƒå½“æˆç”µå•†ç½‘ç«™ä¸Šä¸€ä¸ªæ˜ç æ ‡ä»·ã€è§„æ ¼å›ºå®šã€éšæ—¶å¯ä¹°çš„æ ‡å‡†åŒ–å•†å“ï¼ˆSKUï¼‰ï¼Œé‚£ä½ è§£å†³çš„åªæ˜¯æ˜¨å¤©çš„é—®é¢˜ã€‚</p>
<p>è°èƒ½å¤Ÿè®¾è®¡å‡ºä¸€ç§æ›´é«˜æ•ˆã€æ›´å…·éŸ§æ€§çš„<strong>å¸‚åœºæœºåˆ¶</strong>æ¥<strong>åˆ†æ•£ã€è½¬ç§»å’Œç®¡ç†</strong>ä¼´éšç®—åŠ›è€Œæ¥çš„å·¨å¤§é£é™©ï¼Œè°å°±èƒ½åœ¨æœªæ¥çš„ç«äº‰ä¸­æŒæ¡ä¸»åŠ¨æƒã€‚</p>
<p><strong>END</strong></p>
<p><strong>æœ¬æœŸäº’åŠ¨å†…å®¹ ğŸ»</strong></p>
<p><strong>â“å¦‚æœä½ æ˜¯ä¸€å®¶ AI å®éªŒå®¤çš„è´Ÿè´£äººï¼Œé¢å¯¹ç®—åŠ›ä»·æ ¼çš„å‰§çƒˆæ³¢åŠ¨ï¼Œä½ æ›´æ„¿æ„ï¼š</strong></p>
<p><strong>Aï¼‰æå‰é”å®šé•¿æœŸåˆçº¦ï¼Œå“ªæ€•æˆæœ¬é«˜äº›ï¼›<br/>
Bï¼‰èµŒç°è´§å¸‚åœºï¼Œçµæ´»ä½†é£é™©è‡ªæ‹…ï¼›<br/>
Cï¼‰å¦‚æœæœ‰ç®—åŠ›æœŸè´§/æœŸæƒï¼Œç«‹åˆ»ç”¨é‡‘èå·¥å…·å¯¹å†²ã€‚<br/>
ä¸ºä»€ä¹ˆï¼Ÿ</strong></p>
<p><strong>æœ¬æ–‡ç»åŸä½œè€…æˆæƒï¼Œç”±</strong> <strong>Baihai IDP</strong> <strong>ç¼–è¯‘ã€‚å¦‚éœ€è½¬è½½è¯‘æ–‡ï¼Œè¯·è”ç³»è·å–æˆæƒã€‚</strong></p>
<p><strong>åŸæ–‡é“¾æ¥ï¼š</strong></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdavefriedman.substack.com%2Fp%2Fthe-hidden-risk-of-ai-compute" target="_blank" title="https://davefriedman.substack.com/p/the-hidden-risk-of-ai-compute" ref="nofollow noopener noreferrer">davefriedman.substack.com/p/the-hiddeâ€¦</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Nuxtjsä¸­ï¼Œä¸¾ä¾‹å­ä¸€ç¯‡æ–‡ç« è®²æ¸…æ¥šï¼šæ°´åˆsop]]></title>    <link>https://juejin.cn/post/7592040819818283049</link>    <guid>https://juejin.cn/post/7592040819818283049</guid>    <pubDate>2026-01-07T02:03:20.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592040819818283049" data-draft-id="7591792747776049162" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Nuxtjsä¸­ï¼Œä¸¾ä¾‹å­ä¸€ç¯‡æ–‡ç« è®²æ¸…æ¥šï¼šæ°´åˆsop"/> <meta itemprop="keywords" content="å‰ç«¯,Nuxt.js"/> <meta itemprop="datePublished" content="2026-01-07T02:03:20.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é¾™åœ¨å¤©"/> <meta itemprop="url" content="https://juejin.cn/user/3760787883819464"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Nuxtjsä¸­ï¼Œä¸¾ä¾‹å­ä¸€ç¯‡æ–‡ç« è®²æ¸…æ¥šï¼šæ°´åˆsop
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3760787883819464/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é¾™åœ¨å¤©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T02:03:20.000Z" title="Wed Jan 07 2026 02:03:20 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»3åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{color:#595959;font-size:15px;font-family:-apple-system,system-ui,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Arial,sans-serif;background-image:linear-gradient(90deg,rgba(60,10,30,.04) 3%,transparent 0),linear-gradient(1turn,rgba(60,10,30,.04) 3%,transparent 0);background-size:20px 20px;background-position:50%}.markdown-body p{color:#595959;font-size:15px;line-height:2;font-weight:400}.markdown-body p+p{margin-top:16px}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{padding:30px 0;margin:0;color:#135ce0}.markdown-body h1{position:relative;text-align:center;font-size:22px;margin:50px 0}.markdown-body h1:before{position:absolute;content:"";top:-10px;left:50%;width:32px;height:32px;transform:translateX(-50%);background-size:100% 100%;opacity:.36;background-repeat:no-repeat;background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAABfVBMVEX///8Ad/8AgP8AgP8AgP8Aff8AgP8Af/8AgP8AVf8Af/8Af/8AgP8AgP8Af/8Afv8AAP8Afv8Afv8Aef8AgP8AdP8Afv8AgP8AgP8Acf8Ae/8AgP8Af/8AgP8Af/8Af/8AfP8Afv8AgP8Af/8Af/8Afv8Afv8AgP8Afv8AgP8Af/8Af/8AgP8AgP8Afv8AgP8Af/8AgP8AgP8AgP8Ae/8Afv8Af/8AgP8Af/8AgP8Af/8Af/8Aff8Af/8Abf8AgP8Af/8AgP8Af/8Af/8Afv8AgP8AgP8Afv8Afv8AgP8Af/8Aff8AgP8Afv8AgP8Aff8AgP8AfP8AgP8Ae/8AgP8Af/8AgP8AgP8AgP8Afv8AgP8AgP8AgP8Afv8AgP8AgP8AgP8AgP8AgP8Af/8AgP8Af/8Af/8Aev8Af/8AgP8Aff8Afv8AgP8AgP8AgP8Af/8AgP8Af/8Af/8AgP8Afv8AgP8AgP8AgP8AgP8Af/8AeP8Af/8Af/8Af//////rzEHnAAAAfXRSTlMAD7CCAivatxIDx5EMrP19AXdLEwgLR+6iCR/M0yLRzyFF7JupSXn8cw6v60Q0QeqzKtgeG237HMne850/6Qeq7QaZ+WdydHtj+OM3qENCMRYl1B3K2U7wnlWE/mhlirjkODa9FN/BF7/iNV/2kASNZpX1Wlf03C4stRGxgUPclqoAAAABYktHRACIBR1IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4gEaBzgZ4yeM3AAAAT9JREFUOMvNUldbwkAQvCAqsSBoABE7asSOBRUVVBQNNuy9996789+9cMFAMHnVebmdm+/bmdtbQv4dOFOW2UjPzgFyLfo6nweKfIMOBYWwFtmMPGz2Yj2pJI0JDq3udJW6VVbmKa9I192VQFV1ktXUAl5NB0cd4KpnORqsEO2ZIRpF9gJfE9Dckqq0KuZt7UAH5+8EPF3spjsRpCeQNO/tA/qDwIDA+OCQbBoKA8NOdjMySgcZGVM6jwcgRuUiSs0nlPFNSrEpJfU0jTLD6llqbvKxei7OzvkFNQohi0vAsj81+MoqsCaoPOQFgus/1LyxichW+hS2JWCHZ7VlF9jb187pIAYcHiViHAMnp5mTjJ8B5xeEXF4B1ze/fTh/C0h398DDI9HB07O8ci+vRBdvdGnfP4gBuM8vw7X/G3wDmFhFZEdxzjMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDEtMjZUMDc6NTY6MjUrMDE6MDA67pVWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTAxLTI2VDA3OjU2OjI1KzAxOjAwS7Mt6gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAWdEVYdFRpdGxlAGp1ZWppbl9sb2dvIGNvcHlxapmKAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC)}.markdown-body h2{position:relative;font-size:20px;border-left:4px solid;padding:0 0 0 10px;margin:30px 0}.markdown-body h3{font-size:16px}.markdown-body ul{list-style:disc outside;margin-left:2em;margin-top:1em}.markdown-body li{line-height:2;color:#595959}.markdown-body img.loaded{margin:0 auto;display:block}.markdown-body blockquote{background:#fff9f9;margin:2em 0;padding:2px 20px;border-left:4px solid #b2aec5}.markdown-body blockquote p{color:#666;line-height:2}.markdown-body a{color:#036aca;border-bottom:1px solid rgba(3,106,202,.8);font-weight:400;text-decoration:none}.markdown-body em strong,.markdown-body strong{color:#036aca}.markdown-body hr{border-top:1px solid #135ce0}.markdown-body pre{overflow:auto}.markdown-body code,.markdown-body pre{overflow:auto;position:relative;line-height:1.75;font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body table{border-collapse:collapse;margin:1rem 0;overflow-x:auto}.markdown-body table td,.markdown-body table th{border:1px solid #dfe2e5;padding:.6em 1em}.markdown-body table tr{border-top:1px solid #dfe2e5}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}</style><style data-highlight="" data-highlight-key="a11y-dark">.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-builtin-name,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast:active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-builtin-name,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}</style><h2 data-id="heading-0">æ°´åˆçš„æ„æ€</h2>
<p>æ°´åˆï¼šåœ¨å®¢æˆ·ç«¯ï¼Œå°†<code>vueç»„ä»¶</code>å’Œ<code>æœåŠ¡å™¨æ¸²æŸ“</code>çš„é™æ€html è¿›è¡Œ<code>"æ¿€æ´»"</code>çš„è¿‡ç¨‹ï¼Œä½¿å…¶æˆä¸ºå®Œå…¨äº¤äº’å¼çš„å•é¡µåº”ç”¨ï¼ˆ<code>SPA</code>ï¼‰ã€‚</p>
<h2 data-id="heading-1">sopï¼ˆå·¥ä½œæµç¨‹ï¼‰</h2>
<p>1ã€æœåŠ¡å™¨æ¸²æŸ“ï¼š<code>Nuxt</code>åœ¨æœåŠ¡å™¨ç”Ÿæˆé¡µé¢çš„<code>é™æ€HTML</code>ã€‚</p>
<p>2ã€å‘é€åˆ°å®¢æˆ·ç«¯ï¼š<code>html</code>+<code>vue</code>ç»„ä»¶çš„<code>jsä»£ç </code>ä¸€èµ·å‘é€åˆ°æµè§ˆå™¨ã€‚</p>
<p>3ã€æ°´åˆè¿‡ç¨‹ï¼šVueåœ¨å®¢æˆ·ç«¯æ¥ç®¡é™æ€<code>html</code>ï¼Œå°†å…¶ä¸<code>Vue</code>ç»„ä»¶å®ä¾‹å…³è”ï¼Œæ·»åŠ äº‹ä»¶ç›‘å¬å™¨ï¼Œæ¢å¤å“åº”å¼çŠ¶æ€ã€‚</p>
<h2 data-id="heading-2">ä»£ç ä¾‹å­</h2>
<h3 data-id="heading-3">è®¡æ•°å™¨</h3>
<p>æ•´ä¸ª<code>Counter.vue</code>éƒ½æ˜¯åœ¨æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„ï¼Œç„¶ååœ¨å®¢æˆ·ç«¯è¿›è¡Œæ°´åˆï¼ˆä¹Ÿå°±æ˜¯æ‰€è°“çš„æ¿€æ´»çš„æ„æ€ï¼‰ã€‚</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- components/Counter.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š{{ count }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"increment"</span>&gt;</span>å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
<span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; count.<span class="hljs-property">value</span>++
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<h2 data-id="heading-4">sopï¼ˆè®¡æ•°å™¨æ°´åˆè¿‡ç¨‹ï¼‰</h2>
<ul>
<li>æœåŠ¡å™¨æ¸²æŸ“ï¼š<code>&lt;p&gt;è®¡æ•°ï¼š0&lt;/p&gt;</code>ï¼ˆé™æ€ HTMLï¼‰</li>
<li>å‘é€åˆ°å®¢æˆ·ç«¯ï¼š<code>HTML + Vue</code>ç»„ä»¶ä»£ç </li>
<li>æ°´åˆï¼š<code>Vue</code>æ‰¾åˆ°è¿™ä¸ª<code>DOM</code>å…ƒç´ ï¼Œå°†<code>count</code>å“åº”å¼å˜é‡ç»‘å®šï¼Œæ·»åŠ ç‚¹å‡»äº‹ä»¶ã€‚</li>
<li>ç»“æœï¼šæŒ‰é’®å¯ä»¥äº¤äº’ï¼Œæ•°å­—å¯ä»¥æ›´æ–°ã€‚</li>
</ul>
<h3 data-id="heading-5">æœåŠ¡å™¨</h3>
<p>æœåŠ¡å™¨æ¸²æŸ“ä»¥ä¸‹ä»£ç ï¼š</p>
<pre><code class="hljs language-html" lang="html">&lt;-- Nuxt æœåŠ¡å™¨æ¸²æŸ“çš„å®Œæ•´ html --&gt;
<span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°ï¼š0<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>æœåŠ¡å™¨ä¼šåšè¿™äº›åŠ¨ä½œï¼š</p>
<ul>
<li>1ã€æ‰§è¡Œ<code>&lt;script setup&gt;</code>ä¸­çš„ä»£ç </li>
<li>2ã€<code>count.value</code>åˆå§‹åŒ–ä¸º<code>0</code></li>
<li>3ã€ä½¿ç”¨è¿™ä¸ªå€¼æ¸²æŸ“æ¨¡ç‰ˆ</li>
<li>4ã€ç”ŸæˆåŒ…å«<code>å½“å‰çŠ¶æ€</code>çš„é™æ€<code>html</code></li>
<li>5ã€ä¸æ¸²æŸ“ä»»ä½•äº‹ä»¶ç›‘å¬å™¨ï¼ˆ<code>@click</code>ï¼‰</li>
</ul>
<h4 data-id="heading-6">å‘é€åˆ°å®¢æˆ·ç«¯çš„å†…å®¹</h4>
<p>å‘é€åˆ°å®¢æˆ·ç«¯çš„å†…å®¹å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>...<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- æœåŠ¡å™¨æ¸²æŸ“çš„é™æ€ HTML --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>è®¡æ•°: 0<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>å¢åŠ <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
  
  <span class="hljs-comment">&lt;!-- æ‰“åŒ…çš„ JavaScript --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"/_nuxt/entry.js"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-comment">// åŒ…å« Counter ç»„ä»¶çš„ Vue ä»£ç </span>
    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Counter</span> = {
      <span class="hljs-title function_">setup</span>(<span class="hljs-params"/>) {
        <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)
        <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"/>) =&gt; count.<span class="hljs-property">value</span>++
        <span class="hljs-keyword">return</span> { count, increment }
      },
      <span class="hljs-attr">template</span>: <span class="hljs-string">`&lt;div&gt;...&lt;/div&gt;`</span>
    }
  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h3 data-id="heading-7">å®¢æˆ·ç«¯</h3>
<p>ç„¶åå®¢æˆ·ç«¯è¿›è¡Œæ°´åˆï¼Œ</p>
<ul>
<li>1ã€<strong>åŠ è½½html</strong>ï¼šæµè§ˆå™¨æ˜¾ç¤ºé™æ€çš„è®¡æ•°"0"</li>
<li>2ã€<strong>åŠ è½½js</strong>ï¼šä¸‹è½½åŒ…å«<code>Vue</code>å’Œç»„ä»¶ä»£ç çš„<code>js</code></li>
<li>3ã€è¿›è¡Œ<strong>æ°´åˆæ¿€æ´»</strong>ï¼š</li>
</ul>
<p>æ°´åˆæ¿€æ´»ï¼Œæˆ‘å†™æ­¥éª¤åœ¨ä¸‹é¢</p>
<pre><code class="hljs language-js" lang="js"><span class="hljs-comment">// Vue å†…éƒ¨æ‰§è¡Œï¼š</span>
<span class="hljs-comment">// 1. æ‰¾åˆ° &lt;div&gt; å…ƒç´ </span>
<span class="hljs-comment">// 2. å°† count å“åº”å¼å˜é‡ç»‘å®šåˆ° DOM</span>
<span class="hljs-comment">// 3. ç»™æŒ‰é’®æ·»åŠ  click äº‹ä»¶ç›‘å¬å™¨</span>
<span class="hljs-comment">// 4. å»ºç«‹è™šæ‹Ÿ DOM ä¸çœŸå® DOM çš„å…³è”</span>
</code></pre>
<h2 data-id="heading-8">ç»„åˆä¾‹å­ â€”â€” æ¡ä»¶æ¸²æŸ“</h2>
<pre><code class="hljs language-html" lang="html"><span class="hljs-comment">&lt;!-- components/Example.vue --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿™ä¸ªæ˜¯åœ¨æœåŠ¡å™¨æ¸²æŸ“çš„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœåŠ¡å™¨æ—¶é—´: {{ serverTime }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    
    <span class="hljs-comment">&lt;!-- è¿™ä¸ªæ˜¯åœ¨å®¢æˆ·ç«¯æ°´åˆåæ¸²æŸ“çš„ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">"isClient"</span>&gt;</span>å®¢æˆ·ç«¯æ—¶é—´: {{ clientTime }}<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
    
    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">"update"</span>&gt;</span>æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="javascript">
<span class="hljs-keyword">import</span> { ref, onMounted } <span class="hljs-keyword">from</span> <span class="hljs-string">'vue'</span>

<span class="hljs-comment">// è¿™éƒ¨åˆ†ä»£ç æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½ä¼šæ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> serverTime = <span class="hljs-title function_">ref</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>())

<span class="hljs-comment">// è¿™éƒ¨åˆ†åªåœ¨å®¢æˆ·ç«¯æ‰§è¡Œ</span>
<span class="hljs-keyword">const</span> isClient = <span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">window</span> !== <span class="hljs-string">'undefined'</span>
<span class="hljs-keyword">const</span> clientTime = <span class="hljs-title function_">ref</span>(<span class="hljs-string">''</span>)

<span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> {
  <span class="hljs-keyword">if</span> (isClient) {
    clientTime.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
  }
})

<span class="hljs-keyword">const</span> <span class="hljs-title function_">update</span> = (<span class="hljs-params"/>) =&gt; {
  clientTime.<span class="hljs-property">value</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">toISOString</span>()
}
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</code></pre>
<p>æ¸²æŸ“å‡ºæ¥çš„ç»“æœå¯¹æ¯”ï¼š</p>
<p>æœåŠ¡å™¨æ¸²æŸ“çš„htmlï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœåŠ¡å™¨æ—¶é—´: 2024-01-15T10:30:00.000Z<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- v-if="false"ï¼Œæ‰€ä»¥æ²¡æœ‰è¿™ä¸ªå…ƒç´  --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>å®¢æˆ·ç«¯æ°´åˆåï¼š</p>
<pre><code class="hljs language-html" lang="html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>æœåŠ¡å™¨æ—¶é—´: 2024-01-15T10:30:00.000Z<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>å®¢æˆ·ç«¯æ—¶é—´: 2024-01-15T10:30:05.123Z<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>æ›´æ–°<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-comment">&lt;!-- ç°åœ¨æŒ‰é’®æœ‰ç‚¹å‡»äº‹ä»¶äº† --&gt;</span>
</code></pre>



































<table><thead><tr><th>éƒ¨åˆ†</th><th>æœåŠ¡å™¨æ¸²æŸ“</th><th>å®¢æˆ·ç«¯æ¸²æŸ“</th></tr></thead><tbody><tr><td>åˆå§‹ HTML ç»“æ„</td><td>âœ…</td><td>âŒ</td></tr><tr><td>åˆå§‹æ•°æ® (<code>count: 0</code>)</td><td>âœ…</td><td>âŒ</td></tr><tr><td>äº‹ä»¶ç›‘å¬å™¨ (<code>@click</code>)</td><td>âŒ</td><td>âœ…</td></tr><tr><td>åç»­æ›´æ–° (<code>count++</code>)</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å“åº”å¼ç³»ç»Ÿ</td><td>âŒï¼ˆåªæ˜¯é™æ€å€¼ï¼‰</td><td>âœ…ï¼ˆæ¿€æ´»å“åº”å¼ï¼‰</td></tr></tbody></table>
<h2 data-id="heading-9">sopï¼ˆæ°´åˆè¿‡ç¨‹ï¼‰</h2>
<p>æ°´åˆè¿‡ç¨‹ï¼š</p>
<ul>
<li>1ã€<strong>æœåŠ¡å™¨ç«¯</strong>ï¼šè¯»ç¯å¢ƒå˜é‡ï¼Œç„¶åï¼Œæ¸²æŸ“åˆ°<code>{{ config.public.apiBase }}</code>htmlå½“ä¸­ã€‚</li>
<li>2ã€<strong>å®¢æˆ·ç«¯æ°´åˆ</strong>ï¼š<code>useRuntimeConfig()</code>ä»<code>window</code>å…¨å±€å˜é‡ä¸­è·å–å€¼ï¼Œ</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å‰‘æŒ‡offer-60ã€å°†â¼†å‰æ ‘æ‰“å°æˆå¤šâ¾]]></title>    <link>https://juejin.cn/post/7592120202319331378</link>    <guid>https://juejin.cn/post/7592120202319331378</guid>    <pubDate>2026-01-07T00:10:32.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592120202319331378" data-draft-id="7589838742552494099" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å‰‘æŒ‡offer-60ã€å°†â¼†å‰æ ‘æ‰“å°æˆå¤šâ¾"/> <meta itemprop="keywords" content="Java"/> <meta itemprop="datePublished" content="2026-01-07T00:10:32.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="SevenCoding"/> <meta itemprop="url" content="https://juejin.cn/user/3261615728242467"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å‰‘æŒ‡offer-60ã€å°†â¼†å‰æ ‘æ‰“å°æˆå¤šâ¾
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3261615728242467/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    SevenCoding
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:10:32.000Z" title="Wed Jan 07 2026 00:10:32 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    1
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">é¢˜â½¬æè¿°</h2>
<p>ä»ä¸Šåˆ°ä¸‹æŒ‰å±‚æ‰“å°â¼†å‰æ ‘ï¼ŒåŒâ¼€å±‚ç»“ç‚¹ä»å·¦â¾„å³è¾“å‡ºã€‚æ¯â¼€å±‚è¾“å‡ºâ¼€â¾ã€‚</p>
<p>ç»™å®šçš„â¼†å‰æ ‘æ˜¯ {1,2,3,#,#,4,5} :</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3e12556003a24bd286b024afafa2bb52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgU2V2ZW5Db2Rpbmc=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768349432&amp;x-signature=OtBXYQ3Ye5UI%2BA0vaBUBXZdDrZw%3D" alt="" loading="lazy"/></p>
<p>è¯¥â¼†å‰æ ‘å¤šâ¾æ‰“å°å±‚åºéå†çš„ç»“æœæ˜¯ï¼š</p>
<pre><code class="hljs language-text" lang="text">[
[1],
[2,3],
[4,5]
]
</code></pre>
<p>ç¤ºä¾‹1
è¾“â¼Šï¼š{8,6,10,5,7,9,11}
è¿”å›å€¼ï¼š[[8],[6,10],[5,7,9,11]]</p>
<h2 data-id="heading-1">æ€è·¯åŠè§£ç­”</h2>
<p>59é¢˜çš„ç¼©å‡ç‰ˆ</p>
<h3 data-id="heading-2">è¿­ä»£æ³•BFSï¼ˆå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {
    ArrayList&lt;ArrayList&lt;Integer&gt; &gt; Print(TreeNode pRoot) {
        <span class="hljs-comment">//å±‚æ¬¡æ‰“å°éå†æ ‘</span>
        ArrayList&lt;ArrayList&lt;Integer&gt; &gt; lists = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span>(pRoot == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> lists;
        Queue&lt;TreeNode&gt; q = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();
        q.offer(pRoot);
        <span class="hljs-keyword">while</span>(!q.isEmpty()){
            <span class="hljs-type">int</span> <span class="hljs-variable">size</span> <span class="hljs-operator">=</span> q.size();
            ArrayList&lt;Integer&gt; list = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
            <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++){
                <span class="hljs-type">TreeNode</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> q.poll();
                list.add(temp.val);
                <span class="hljs-keyword">if</span>(temp.left != <span class="hljs-literal">null</span>) q.offer(temp.left);
                <span class="hljs-keyword">if</span>(temp.right != <span class="hljs-literal">null</span>) q.offer(temp.right);
            }
            lists.add(list);
        }
        <span class="hljs-keyword">return</span> lists;
    }
    
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ°å¥½å…¥é˜Ÿå’Œå‡ºé˜Ÿå„ä¸€æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œé˜Ÿåˆ—ä¸­æœ€å¤šå­˜å‚¨nä¸ªèŠ‚</li>
</ul>
<h3 data-id="heading-3">é€’å½’DFSï¼ˆæ·±åº¦ä¼˜å…ˆæœç´¢ï¼‰</h3>
<p>è™½ç„¶å±‚åºéå†é€šå¸¸ç”¨BFSï¼Œä½†ä¹Ÿå¯ä»¥ç”¨DFSé€šè¿‡é€’å½’éšå¼ç»´æŠ¤å±‚çº§ä¿¡æ¯æ¥å®ç°</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">import</span> java.util.*;

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> {

    <span class="hljs-keyword">public</span> ArrayList&lt;ArrayList&lt;Integer&gt;&gt; <span class="hljs-title function_">levelOrder</span><span class="hljs-params">(TreeNode root)</span> {
        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();
        <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> result;
        
        dfs(root, <span class="hljs-number">0</span>, result);
        <span class="hljs-keyword">return</span> result;
    }
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dfs</span><span class="hljs-params">(TreeNode node, <span class="hljs-type">int</span> depth, ArrayList&lt;ArrayList&lt;Integer&gt;&gt; result)</span> {
        <span class="hljs-keyword">if</span> (node == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span>;
        
        <span class="hljs-comment">// å¦‚æœå½“å‰æ·±åº¦å¯¹åº”çš„åˆ—è¡¨ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°åˆ—è¡¨</span>
        <span class="hljs-keyword">if</span> (depth &gt;= result.size()) {
            result.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;());
        }
        
        <span class="hljs-comment">// å°†å½“å‰èŠ‚ç‚¹å€¼åŠ å…¥å¯¹åº”æ·±åº¦çš„åˆ—è¡¨</span>
        result.get(depth).add(node.val);
        
        <span class="hljs-comment">// é€’å½’å¤„ç†å·¦å³å­æ ‘ï¼Œæ·±åº¦+1</span>
        dfs(node.left, depth + <span class="hljs-number">1</span>, result);
        dfs(node.right, depth + <span class="hljs-number">1</span>, result);
    }
}
</code></pre>
<ul>
<li><strong>æ—¶é—´å¤æ‚åº¦</strong>ï¼šO(n)ï¼Œæ¯ä¸ªèŠ‚ç‚¹è®¿é—®ä¸€æ¬¡</li>
<li><strong>ç©ºé—´å¤æ‚åº¦</strong>ï¼šO(h)ï¼Œé€’å½’æ ˆæ·±åº¦ç­‰äºæ ‘é«˜ï¼Œæœ€åæƒ…å†µO(n)</li>
</ul></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Vite 5å¤§æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»3ç§’åˆ°300æ¯«ç§’çš„æ„å»ºé€Ÿåº¦è·ƒè¿]]></title>    <link>https://juejin.cn/post/7592094358657269794</link>    <guid>https://juejin.cn/post/7592094358657269794</guid>    <pubDate>2026-01-07T00:18:04.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592094358657269794" data-draft-id="7592119218030018594" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Vite 5å¤§æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»3ç§’åˆ°300æ¯«ç§’çš„æ„å»ºé€Ÿåº¦è·ƒè¿"/> <meta itemprop="keywords" content="åç«¯,å‰ç«¯,äººå·¥æ™ºèƒ½"/> <meta itemprop="datePublished" content="2026-01-07T00:18:04.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é˜¿æ©™çš„ç™¾å®ç®±"/> <meta itemprop="url" content="https://juejin.cn/user/1638743356481367"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Vite 5å¤§æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»3ç§’åˆ°300æ¯«ç§’çš„æ„å»ºé€Ÿåº¦è·ƒè¿
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/1638743356481367/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é˜¿æ©™çš„ç™¾å®ç®±
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:18:04.000Z" title="Wed Jan 07 2026 00:18:04 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»1åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0"><strong>Vite 5å¤§æ€§èƒ½ä¼˜åŒ–å®æˆ˜ï¼šä»3ç§’åˆ°300æ¯«ç§’çš„æ„å»ºé€Ÿåº¦è·ƒè¿</strong></h2>
<h2 data-id="heading-1">å¼•è¨€</h2>
<p>åœ¨å‰ç«¯å·¥ç¨‹åŒ–é¢†åŸŸï¼Œæ„å»ºå·¥å…·çš„æ€§èƒ½ç›´æ¥å†³å®šäº†å¼€å‘ä½“éªŒå’Œç”Ÿäº§æ•ˆç‡ã€‚Webpackç­‰ä¼ ç»Ÿå·¥å…·è™½ç„¶åŠŸèƒ½å¼ºå¤§ï¼Œä½†éšç€é¡¹ç›®è§„æ¨¡å¢é•¿ï¼Œæ„å»ºé€Ÿåº¦å¾€å¾€æˆä¸ºç“¶é¢ˆã€‚Viteå‡­å€Ÿå…¶åˆ›æ–°çš„åŸç”ŸESMï¼ˆECMAScript Modulesï¼‰è®¾è®¡å’Œæé€Ÿçš„HMRï¼ˆHot Module Replacementï¼‰ï¼Œæ­£åœ¨é‡å¡‘å‰ç«¯å¼€å‘èŒƒå¼ã€‚</p>
<p>æœ¬æ–‡å°†æ·±å…¥å‰–æ5ä¸ªç»è¿‡å®æˆ˜éªŒè¯çš„Viteæ€§èƒ½ä¼˜åŒ–ç­–ç•¥ï¼Œæ¶µç›–ä¾èµ–é¢„æ„å»ºã€ç¼“å­˜æœºåˆ¶ã€é…ç½®è°ƒä¼˜ç­‰å¤šä¸ªç»´åº¦ã€‚é€šè¿‡çœŸå®æ¡ˆä¾‹å±•ç¤ºå¦‚ä½•å°†ä¸€ä¸ªä¸­å‹é¡¹ç›®çš„å†·å¯åŠ¨æ—¶é—´ä»3ç§’é™è‡³300æ¯«ç§’é‡çº§ï¼Œå®ç°10å€æ€§èƒ½è·ƒè¿ã€‚</p>
<h2 data-id="heading-2">ä¸€ã€ä¾èµ–é¢„æ„å»ºï¼šä»é‡å¤ç¼–è¯‘åˆ°æ™ºèƒ½ç¼“å­˜</h2>
<h3 data-id="heading-3">1.1 åŸç†æ·±åº¦è§£æ</h3>
<p>Viteçš„æ ¸å¿ƒä¼˜åŒ–ä¹‹ä¸€æ˜¯ä¾èµ–é¢„æ„å»ºï¼ˆDependency Pre-Bundlingï¼‰ã€‚ä¸ä¼ ç»Ÿæ‰“åŒ…å·¥å…·æ¯æ¬¡å…¨é‡ç¼–è¯‘ä¸åŒï¼ŒViteåœ¨é¦–æ¬¡å¯åŠ¨æ—¶ä¼šï¼š</p>
<ul>
<li>æ‰«æ<code>package.json</code>ä¸­çš„dependencies</li>
<li>ä½¿ç”¨Rollupå°†CommonJS/UMDæ¨¡å—è½¬æ¢ä¸ºESMæ ¼å¼</li>
<li>åˆå¹¶å¤šä¸ªå°æ–‡ä»¶å‡å°‘ç½‘ç»œè¯·æ±‚</li>
</ul>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-comment">// vite.config.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
  <span class="hljs-attr">optimizeDeps</span>: {
    <span class="hljs-attr">include</span>: [<span class="hljs-string">'lodash-es'</span>], <span class="hljs-comment">// å¼ºåˆ¶é¢„æ„å»ºæŒ‡å®šåº“</span>
    <span class="hljs-attr">exclude</span>: [<span class="hljs-string">'moment'</span>],   <span class="hljs-comment">// æ’é™¤å·²çŸ¥ESMæ¨¡å—</span>
    <span class="hljs-attr">force</span>: <span class="hljs-literal">true</span>            <span class="hljs-comment">// å¼€å‘é˜¶æ®µæ‰‹åŠ¨è§¦å‘é‡å»º</span>
  }
}
</code></pre>
<h3 data-id="heading-4">1.2 Benchmarkå¯¹æ¯”æµ‹è¯•</h3>
<p>åœ¨å«150ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–çš„ä¸­å‹é¡¹ç›®ä¸­ï¼š</p>

























<table><thead><tr><th>ç­–ç•¥</th><th>å†·å¯åŠ¨æ—¶é—´</th><th>HMRæ›´æ–°</th></tr></thead><tbody><tr><td>æ— é¢„æ„å»º</td><td>4200ms</td><td>&gt;1000ms</td></tr><tr><td>é»˜è®¤é¢„æ„å»º</td><td>1800ms</td><td>&lt;50ms</td></tr><tr><td>+includeä¼˜åŒ–</td><td>1200ms</td><td>&lt;30ms</td></tr></tbody></table>
<h2 data-id="heading-5">äºŒã€æŒä¹…åŒ–ç¼“å­˜ï¼šç¡¬ç›˜å³å†…å­˜çš„åŠ é€Ÿé­”æ³•</h2>
<h3 data-id="heading-6">2.1 FS Cacheå·¥ä½œæœºåˆ¶</h3>
<p>Viteé»˜è®¤å°†ä»¥ä¸‹å†…å®¹å†™å…¥<code>node_modules/.vite</code>ï¼š</p>
<ul>
<li>Rollupæ ¼å¼çš„é¢„æ„å»ºäº§ç‰©</li>
<li>Babel/PostCSSè½¬è¯‘ç»“æœ</li>
<li>TypeScriptç¼–è¯‘ç¼“å­˜</li>
</ul>
<p>é€šè¿‡å®éªŒå‘ç°ï¼Œå¯ç”¨æŒä¹…åŒ–ç¼“å­˜åäºŒæ¬¡å¯åŠ¨æ—¶é—´å¯ç¼©çŸ­70%ä»¥ä¸Šï¼š</p>
<pre><code class="hljs language-bash" lang="bash"><span class="hljs-comment"># .gitignoreä¸­éœ€æ·»åŠ </span>
.vite
*.<span class="hljs-built_in">local</span>
</code></pre>
<h3 data-id="heading-7">2.2 Cache-Controlç­–ç•¥è¿›é˜¶</h3>
<p>ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²æ—¶æ¨èé…ç½®ï¼š</p>
<pre><code class="hljs language-nginx" lang="nginx">location /assets {
  expires max;
}
</code></pre>
<p>é…åˆHTTP/2 Server Pushå¯å°†å…³é”®èµ„æºåŠ è½½æ—¶é—´å†å‹ç¼©40%ã€‚</p>
<p>##ä¸‰ã€æŒ‰éœ€ç¼–è¯‘ï¼šç°ä»£æµè§ˆå™¨çš„èƒ½åŠ›çº¢åˆ©</p>
<p>###3.1 ESMåŠ¨æ€å¯¼å…¥å®è·µ<br/>
åˆ©ç”¨æµè§ˆå™¨åŸç”ŸESMç‰¹æ€§å®ç°è·¯ç”±çº§ä»£ç åˆ†å‰²ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">Home</span> = (<span class="hljs-params"/>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-string">'./views/Home.vue'</span>)
</code></pre>
<p>å¯¹æ¯”Webpackçš„åŠ¨æ€å¯¼å…¥ï¼š</p>
<ul>
<li>Viteæ— éœ€ç­‰å¾…å®Œæ•´manifestç”Ÿæˆ</li>
<li>Chunkè¾¹ç•Œå®šä¹‰æ›´çµæ´»</li>
</ul>
<p>###3.2 WASMç›´è¿æ–¹æ¡ˆ<br/>
é€šè¿‡<code>?init</code>å‚æ•°ç›´æ¥åŠ è½½WebAssemblyæ¨¡å—ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> init <span class="hljs-keyword">from</span> <span class="hljs-string">'./pkg/wasm_module_bg.wasm?init'</span>
</code></pre>
<p>å®æµ‹æ¯”ä¼ ç»Ÿæ–¹æ¡ˆå‡å°‘200-300msè§£æè€—æ—¶ã€‚</p>
<p>##å››ã€å¤šçº¿ç¨‹ä¸åŸç”Ÿç¼–è¯‘ï¼šæ¦¨å¹²ç¡¬ä»¶æ€§èƒ½</p>
<p>###4.1 ESBuildé›†æˆé…ç½®<br/>
åœ¨<code>vite.config.js</code>ä¸­å¯ç”¨æ‰€æœ‰ESBuildä¼˜åŒ–é¡¹ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">esbuild</span>: {
   <span class="hljs-attr">target</span>: <span class="hljs-string">'es2020'</span>,
   <span class="hljs-attr">minifyWhitespace</span>: <span class="hljs-literal">true</span>,
   <span class="hljs-attr">treeShaking</span>: <span class="hljs-literal">true</span>,
 }
}
</code></pre>
<p>å®æµ‹TSXæ–‡ä»¶ç¼–è¯‘é€Ÿåº¦æå‡8-10å€ã€‚</p>
<p>###4.2 SWCæ›¿ä»£Babel<br/>
å¯¹äºReacté¡¹ç›®æ¨èé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { 
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">react</span>({
     <span class="hljs-attr">swc</span>: <span class="hljs-literal">true</span> <span class="hljs-comment">//å¯ç”¨SWCè½¬è¯‘å™¨ </span>
   })
 ]
} 
</code></pre>
<p>JSXå¤„ç†é€Ÿåº¦ä»1200æ–‡ä»¶/ç§’æå‡è‡³9500æ–‡ä»¶/ç§’ã€‚</p>
<p>##äº”ã€ç”Ÿäº§æ¨¡å¼ä¸“é¡¹ä¼˜åŒ–</p>
<p>###5.1 Brotliå‹ç¼©å®æˆ˜<br/>
è°ƒæ•´rollup-plugin-compressé…ç½®ï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">import</span> compress <span class="hljs-keyword">from</span> <span class="hljs-string">'rollup-plugin-compress'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
 <span class="hljs-attr">plugins</span>: [
   <span class="hljs-title function_">compress</span>({
     <span class="hljs-attr">algorithm</span>: <span class="hljs-string">'brotliCompress'</span>, 
     <span class="hljs-attr">threshold</span>:<span class="hljs-number">1024</span> 
   })
 ]
}
</code></pre>
<p>å¯ä½¿æœ€ç»ˆåŒ…ä½“ç§¯ç¼©å°15%-20%ã€‚</p>
<p>###5.2 CSSä»£ç åˆ†å‰²æœ€ä½³å®è·µ<br/>
å¼ºåˆ¶åˆ†ç¦»å…³é”®CSSï¼š</p>
<pre><code class="hljs language-javascript" lang="javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> { 
 <span class="hljs-attr">build</span>:{ 
   <span class="hljs-attr">cssCodeSplit</span>: <span class="hljs-literal">true</span>, 
 } 
} 
</code></pre>
<p>é…åˆpreloadç­–ç•¥ä½¿LCPæŒ‡æ ‡æå‡30%ã€‚</p>
<p>##æ€»ç»“</p>
<p>é€šè¿‡æœ¬æ–‡çš„äº”ç»´ä¼˜åŒ–ä½“ç³»â€”â€”ä¾èµ–é¢„æ„å»ºã€æŒä¹…åŒ–ç¼“å­˜ã€æŒ‰éœ€ç¼–è¯‘ã€å¤šçº¿ç¨‹å¤„ç†å’Œäº§çº¿ä¸“é¡¹è°ƒä¼˜ï¼Œæˆ‘ä»¬ç³»ç»Ÿæ€§åœ°è§£å†³äº†Viteåœ¨ä¸åŒåœºæ™¯ä¸‹çš„æ€§èƒ½ç“¶é¢ˆã€‚éœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œæ€§èƒ½ä¼˜åŒ–åº”å½“éµå¾ª"æµ‹é‡-&gt;åˆ†æ-&gt;å®æ–½-&gt;éªŒè¯"çš„ç§‘å­¦é—­ç¯ã€‚å»ºè®®å¼€å‘è€…ä½¿ç”¨å¦‚ä¸‹è¯Šæ–­å‘½ä»¤æŒç»­ç›‘æ§ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">npx vite-bundle-visualizer   
npx lighthouse http://localhost:5173 --view   
</code></pre>
<p>éšç€Viteç”Ÿæ€çš„æŒç»­æ¼”è¿›ï¼ˆå¦‚5.xç‰ˆæœ¬å¼•å…¥çš„Rustæ’ä»¶ç³»ç»Ÿï¼‰ï¼Œå‰ç«¯å·¥ç¨‹çš„æ€§èƒ½è¾¹ç•Œè¿˜å°†ä¸æ–­çªç ´ã€‚å¸Œæœ›æœ¬æ–‡æä¾›çš„æŠ€æœ¯è·¯å¾„èƒ½å¸®åŠ©å›¢é˜Ÿåœ¨ä¿è¯å¼€å‘ä½“éªŒçš„åŒæ—¶ï¼Œå®ç°æè‡´çš„è¿è¡Œæ—¶æ€§èƒ½ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[SpringBoot å¦‚ä½•ç”¨ @ControllerAdvice ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592059801884934187</link>    <guid>https://juejin.cn/post/7592059801884934187</guid>    <pubDate>2026-01-07T00:29:44.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592059801884934187" data-draft-id="7582118218648748058" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="SpringBoot å¦‚ä½•ç”¨ @ControllerAdvice ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼Ÿ"/> <meta itemprop="keywords" content="åç«¯,Java"/> <meta itemprop="datePublished" content="2026-01-07T00:29:44.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="ç¨‹åºå‘˜å¤§å"/> <meta itemprop="url" content="https://juejin.cn/user/3507878440995946"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            SpringBoot å¦‚ä½•ç”¨ @ControllerAdvice ç»Ÿä¸€å¤„ç†å¼‚å¸¸ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3507878440995946/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    ç¨‹åºå‘˜å¤§å
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:29:44.000Z" title="Wed Jan 07 2026 00:29:44 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">ä¸€ã€ä»€ä¹ˆæ˜¯å…¨å±€å¼‚å¸¸å¤„ç†ï¼Ÿ</h2>
<p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç¨‹åºè¿è¡Œæ—¶éš¾å…ä¼šé‡åˆ°å„ç§æ„å¤–ã€‚è¿™äº›æ„å¤–åœ¨ Java ä¸­å°±è¡¨ç°ä¸º<strong>å¼‚å¸¸ï¼ˆExceptionï¼‰</strong>ã€‚å¦‚æœä¸åšç»Ÿä¸€å¤„ç†ï¼Œç”¨æˆ·å¯èƒ½ä¼šçœ‹åˆ°ä¸€å †é”™è¯¯ä¿¡æ¯ã€‚</p>
<h3 data-id="heading-1">å¸¸è§åœºæ™¯ï¼š</h3>
<ul>
<li>
<p><code>NullPointerException</code>ï¼ˆç©ºæŒ‡é’ˆå¼‚å¸¸ï¼‰ï¼šå‰ç«¯ä¼ äº†ä¸€ä¸ªç”¨æˆ· IDï¼Œä½†åç«¯æ²¡åšåˆ¤ç©ºï¼Œç›´æ¥è°ƒç”¨ <code>user.getName()</code>ï¼Œç»“æœ user æ˜¯ null å¯¼è‡´ç¨‹åºå´©æºƒï¼</p>
</li>
<li>
<p><code>SQLException</code>ï¼ˆæ•°æ®åº“è¿æ¥å¤±è´¥ï¼‰ï¼šæ•°æ®åº“å®•æœºæˆ–ç½‘ç»œä¸­æ–­ï¼Œå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œç›´æ¥æŠ›å‡º SQL å¼‚å¸¸ã€‚</p>
</li>
<li>
<p><code>NumberFormatException</code>ï¼ˆå‚æ•°æ ¼å¼é”™è¯¯ï¼‰ï¼šå‰ç«¯ä¼ äº†ä¸ªå­—ç¬¦ä¸² <code>&amp;#34;abc&amp;#34;</code>ï¼Œåç«¯è¯•å›¾ç”¨ <code>Integer.parseInt()</code> è½¬æˆæ•°å­—å¤±è´¥ï¼</p>
</li>
</ul>
<hr/>
<h3 data-id="heading-2">å¦‚æœä¸åšå¤„ç†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</h3>
<p>SpringBoot é»˜è®¤ä¼šæŠŠå¼‚å¸¸çš„<strong>å®Œæ•´å †æ ˆä¿¡æ¯</strong>åŸæ ·è¿”å›ç»™å‰ç«¯ï¼Œæ¯”å¦‚ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;timestamp&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;<span class="hljs-number">2025</span><span class="hljs-number">-11</span><span class="hljs-number">-26</span>T12<span class="hljs-punctuation">:</span><span class="hljs-number">00</span><span class="hljs-punctuation">:</span><span class="hljs-number">00</span>&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;status&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">500</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;error&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;Internal Server Error&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;/ by zero&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;path&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;/api/calculate&amp;#<span class="hljs-number">34</span>;
<span class="hljs-punctuation">}</span>
</code></pre>
<p>ç”šè‡³åœ¨å¼€å‘ç¯å¢ƒä¸‹ï¼Œè¿˜å¯èƒ½è¿”å›å‡ åè¡Œ Java å †æ ˆï¼Œè¿™äº›ä¼šå¯¼è‡´ä»¥ä¸‹ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>ç”¨æˆ·çœ‹ä¸æ‡‚ï¼Œ</li>
<li>å‰ç«¯æ— æ³•ç»Ÿä¸€å¤„ç†ï¼Œ</li>
<li>æ›´ä¸¥é‡çš„æ˜¯ï¼š<strong>å¯èƒ½æ³„éœ²ç±»åã€æ–¹æ³•åã€æœåŠ¡å™¨è·¯å¾„ç­‰æ•æ„Ÿä¿¡æ¯ï¼</strong></li>
</ul>
<hr/>
<h3 data-id="heading-3">æœ‰äº†å…¨å±€å¼‚å¸¸å¤„ç†ï¼Œå°±èƒ½ï¼š</h3>
<ul>
<li>æ‹¦æˆªæ‰€æœ‰å¼‚å¸¸ï¼Œç»Ÿä¸€è¿”å›ç»“æ„åŒ–é”™è¯¯ä¿¡æ¯</li>
<li>åŒºåˆ†ä¸åŒå¼‚å¸¸ç±»å‹ï¼Œè¿”å›ä¸åŒçš„çŠ¶æ€ç å’Œæç¤ºè¯­</li>
<li>è‡ªåŠ¨è®°å½•æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜</li>
<li>é¿å…æ•æ„Ÿä¿¡æ¯å¤–æ³„ï¼Œæå‡ç³»ç»Ÿå®‰å…¨æ€§</li>
</ul>
<p>æœ€ç»ˆè¿”å›ç»™å‰ç«¯çš„ï¼Œå¯èƒ½æ˜¯è¿™æ ·ä¸€æ®µå¹²å‡€ã€å‹å¥½çš„ JSONï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">400</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;ç”¨æˆ·IDä¸èƒ½ä¸ºç©º&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">null</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æˆ–è€…ï¼š</p>
<pre><code class="hljs language-json" lang="json"><span class="hljs-punctuation">{</span>
  &amp;#<span class="hljs-number">34</span>;code&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-number">200</span><span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;message&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> &amp;#<span class="hljs-number">34</span>;è®¢å•åˆ›å»ºæˆåŠŸ&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">,</span>
  &amp;#<span class="hljs-number">34</span>;data&amp;#<span class="hljs-number">34</span>;<span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span>
<span class="hljs-punctuation">}</span>
</code></pre>
<p>æ˜¯ä¸æ˜¯æ¸…çˆ½åˆä¸“ä¸šå¤šäº†ğŸ˜Š</p>
<hr/>
<h2 data-id="heading-4">äºŒã€å¦‚ä½•åšå¼‚å¸¸å¤„ç†</h2>
<h3 data-id="heading-5">ä¼ ç»Ÿåšæ³•ï¼ˆä¸æ¨èï¼‰</h3>
<p>æ¯ä¸ª <code>Controller</code> æ–¹æ³•é‡Œéƒ½å†™ <code>try-catch</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@GetMapping(&amp;#34;/user/{id}&amp;#34;)</span>
<span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">getUser</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Long id)</span> {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> userService.findById(id);
        <span class="hljs-keyword">return</span> ResponseEntity.ok(user);
    } <span class="hljs-keyword">catch</span> (UserNotFoundException e) {
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">404</span>).body(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·ä¸å­˜åœ¨&amp;#<span class="hljs-number">34</span>;);
    } <span class="hljs-keyword">catch</span> (Exception e) {
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(&amp;#<span class="hljs-number">34</span>;ç³»ç»Ÿé”™è¯¯&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<p>é—®é¢˜å¾ˆæ˜æ˜¾ï¼š</p>
<ul>
<li>ä»£ç é‡å¤</li>
<li>éš¾ç»´æŠ¤</li>
<li>å®¹æ˜“æ¼æ‰</li>
</ul>
<h3 data-id="heading-6">å…¨å±€å¼‚å¸¸å¤„ç†ï¼ˆæ¨èï¼‰</h3>
<p><strong>åªå†™ä¸€æ¬¡ï¼Œå…¨å±€ç”Ÿæ•ˆï¼</strong></p>
<p>ä¸‹é¢ä¸»è¦å†™ SpringBoot çš„å¤„ç†ã€‚</p>
<hr/>
<h2 data-id="heading-7">ä¸‰ã€SpringBoot ä¸­å¦‚ä½•å®ç°å…¨å±€å¼‚å¸¸å¤„ç†ï¼Ÿ</h2>
<p>æ ¸å¿ƒå°±é ä¸€ä¸ªæ³¨è§£ï¼š<code>@ControllerAdvice</code></p>
<h3 data-id="heading-8">ç¬¬ä¸€æ­¥ï¼šå®šä¹‰ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»Ÿä¸€è¿”å›ç»“æ„ï¼Œå‰ç«¯å¥½è§£æ</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ErrorResponse</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> code;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> Object data; <span class="hljs-comment">// ä¸€èˆ¬ä¸º nullï¼Œä½†ä¿ç•™æ‰©å±•æ€§</span>

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ErrorResponse</span><span class="hljs-params">(<span class="hljs-type">int</span> code, String message)</span> {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.message = message;
    }

    <span class="hljs-comment">// getter / setter çœç•¥ï¼ˆå®é™…é¡¹ç›®ä¸­å»ºè®®ç”¨ Lombokï¼‰</span>
}
</code></pre>
<h3 data-id="heading-9">ç¬¬äºŒæ­¥ï¼šåˆ›å»ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨ç±»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// 1. åˆ›å»ºä¸€ä¸ªç±»ï¼ŒåŠ ä¸Š @ControllerAdvice æ³¨è§£</span>
<span class="hljs-meta">@ControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {

    <span class="hljs-comment">// 2. ç”¨ @ExceptionHandler æ•è·ç‰¹å®šå¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(UserNotFoundException.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">handleUserNotFound</span><span class="hljs-params">(UserNotFoundException e)</span> {
        <span class="hljs-type">ErrorResponse</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(<span class="hljs-number">404</span>, e.getMessage());
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">404</span>).body(error);
    }

    <span class="hljs-comment">// 3. æ•è·æ‰€æœ‰å…¶ä»–å¼‚å¸¸ï¼ˆå…œåº•ï¼‰</span>
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">handleGenericException</span><span class="hljs-params">(Exception e)</span> {
        <span class="hljs-type">ErrorResponse</span> <span class="hljs-variable">error</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(<span class="hljs-number">500</span>, &amp;#<span class="hljs-number">34</span>;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜&amp;#<span class="hljs-number">34</span>;);
        <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(error);
    }
}
</code></pre>
<h3 data-id="heading-10">ç¬¬ä¸‰æ­¥ï¼šè‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸ï¼ˆå¯é€‰ä½†æ¨èï¼‰</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
    <span class="hljs-keyword">private</span> Integer code;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessException</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-built_in">super</span>(message);
        <span class="hljs-built_in">this</span>.code = code;
    }
    
    <span class="hljs-comment">// getterçœç•¥</span>
}
</code></pre>
<p>ç„¶ååœ¨ Service å±‚è¿™æ ·ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> User <span class="hljs-title function_">findById</span><span class="hljs-params">(Long id)</span> {
    <span class="hljs-keyword">if</span> (id == <span class="hljs-literal">null</span> || id &lt;= <span class="hljs-number">0</span>) {
        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BusinessException</span>(&amp;#<span class="hljs-number">34</span>;ç”¨æˆ·IDæ— æ•ˆ&amp;#<span class="hljs-number">34</span>;);
    }
    <span class="hljs-comment">// æŸ¥è¯¢æ•°æ®åº“...</span>
}
</code></pre>
<p>å¯ä»¥è¯´é…ç½®å…¨å±€å¼‚å¸¸æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œå¯èƒ½å› ä¸ºç®€å•ï¼Œæˆ–è€…æ˜¯é¡¹ç›®é‡Œæœ¬æ¥å°±é…ç½®çš„æœ‰ï¼Œæ‰€ä»¥å¾ˆå¤šæœ‹å‹ç›´æ¥å¿½ç•¥æ‰äº†è¿™äº›é—®é¢˜ã€‚</p>
<hr/>
<h2 data-id="heading-11">å››ã€æ›´æ™ºèƒ½çš„å¼‚å¸¸å¤„ç†</h2>
<h3 data-id="heading-12">1. åŒºåˆ† Controller å’Œ REST æ¥å£</h3>
<p>å¦‚æœä½ æ—¢æœ‰é¡µé¢ï¼ˆè¿”å› HTMLï¼‰ï¼Œåˆæœ‰ APIï¼ˆè¿”å› JSONï¼‰ï¼Œå¯ä»¥ç”¨ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ControllerAdvice(annotations = RestController.class)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">RestGlobalExceptionHandler</span> {
    <span class="hljs-comment">// åªå¤„ç† @RestController çš„å¼‚å¸¸</span>
}
</code></pre>
<p>æˆ–è€…æŒ‡å®šåŒ…è·¯å¾„ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ControllerAdvice(basePackages = &amp;#34;com.example.api&amp;#34;)</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ApiExceptionHandler</span> { ... }
</code></pre>
<h3 data-id="heading-13">2. å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸ï¼ˆå¦‚ @Validï¼‰</h3>
<p>SpringBoot è‡ªå¸¦æ ¡éªŒæ¡†æ¶ï¼Œæ ¡éªŒå¤±è´¥ä¼šæŠ› <code>MethodArgumentNotValidException</code>ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span>
<span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">handleValidation</span><span class="hljs-params">(MethodArgumentNotValidException e)</span> {
    <span class="hljs-type">String</span> <span class="hljs-variable">msg</span> <span class="hljs-operator">=</span> e.getBindingResult().getFieldError().getDefaultMessage();
    <span class="hljs-keyword">return</span> ResponseEntity.badRequest().body(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(<span class="hljs-number">400</span>, msg));
}
</code></pre>
<h3 data-id="heading-14">3. è®°å½•æ—¥å¿—ï¼ˆéå¸¸é‡è¦ï¼ï¼‰</h3>
<p>åœ¨ <code>handleGenericException</code> ä¸­åŠ å…¥æ—¥å¿—ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">log</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);

<span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
<span class="hljs-keyword">public</span> ResponseEntity <span class="hljs-title function_">handleGenericException</span><span class="hljs-params">(Exception e)</span> {
    log.error(&amp;#<span class="hljs-number">34</span>;ç³»ç»Ÿå‘ç”Ÿæœªé¢„æœŸå¼‚å¸¸&amp;#<span class="hljs-number">34</span>;, e); <span class="hljs-comment">// è®°å½•å®Œæ•´å †æ ˆ</span>
    <span class="hljs-keyword">return</span> ResponseEntity.status(<span class="hljs-number">500</span>).body(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ErrorResponse</span>(<span class="hljs-number">500</span>, &amp;#<span class="hljs-number">34</span>;æœåŠ¡å™¨å¼€å°å·®å•¦~&amp;#<span class="hljs-number">34</span>;));
}
</code></pre>
<h2 data-id="heading-15">äº”ã€æ·±å…¥ç†è§£@ControllerAdvice</h2>
<p>å¾ˆå¤šåŒå­¦å¯èƒ½ä¼šå¥½å¥‡ï¼šä¸ºä»€ä¹ˆåŠ äº†<code>@ControllerAdvice</code>åï¼Œå¼‚å¸¸å°±èƒ½è¢«è‡ªåŠ¨æ•è·å‘¢ï¼Ÿ</p>
<p>å…¶å®åŸç†å¾ˆç®€å•ï¼š</p>
<ol>
<li><code>Spring MVC</code> åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œå¦‚æœ Controller æ–¹æ³•æŠ›å‡ºå¼‚å¸¸</li>
<li><code>Spring</code> ä¼šæŸ¥æ‰¾æœ‰æ²¡æœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†å™¨ï¼ˆ<code>@ExceptionHandler</code>ï¼‰</li>
<li>æŸ¥æ‰¾é¡ºåºæ˜¯ï¼šå…ˆæ‰¾å½“å‰ Controller ä¸­çš„ <code>@ExceptionHandler</code> æ–¹æ³•</li>
<li>å¦‚æœå½“å‰ Controller æ²¡æœ‰ï¼Œå°±æ‰¾ <code>@ControllerAdvice</code> æ ‡æ³¨çš„ç±»ä¸­çš„ <code>@ExceptionHandler</code> æ–¹æ³•</li>
<li>æ‰¾åˆ°åŒ¹é…çš„å¼‚å¸¸å¤„ç†å™¨åï¼Œè°ƒç”¨å¯¹åº”çš„æ–¹æ³•å¤„ç†å¼‚å¸¸</li>
</ol>
<h2 data-id="heading-16">æœ€ä½³å®è·µå»ºè®®</h2>
<h3 data-id="heading-17">1. å®šä¹‰æ¸…æ™°çš„å¼‚å¸¸ä½“ç³»</h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// åŸºç¡€å¼‚å¸¸ç±»</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">RuntimeException</span> {
    <span class="hljs-keyword">private</span> Integer code;
    
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BaseException</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-built_in">super</span>(message);
        <span class="hljs-built_in">this</span>.code = code;
    }
}

<span class="hljs-comment">// å„ç§å…·ä½“å¼‚å¸¸</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BusinessException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">BusinessException</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-built_in">super</span>(code, message);
    }
}

<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">SystemException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">BaseException</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SystemException</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-built_in">super</span>(code, message);
    }
}
</code></pre>
<h3 data-id="heading-18">2. ä½¿ç”¨æšä¸¾ç®¡ç†é”™è¯¯ç </h3>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> <span class="hljs-title class_">ErrorCode</span> {
    SUCCESS(<span class="hljs-number">200</span>, &amp;#<span class="hljs-number">34</span>;æˆåŠŸ&amp;#<span class="hljs-number">34</span>;),
    PARAM_ERROR(<span class="hljs-number">400</span>, &amp;#<span class="hljs-number">34</span>;å‚æ•°é”™è¯¯&amp;#<span class="hljs-number">34</span>;),
    UNAUTHORIZED(<span class="hljs-number">401</span>, &amp;#<span class="hljs-number">34</span>;æœªæˆæƒ&amp;#<span class="hljs-number">34</span>;),
    FORBIDDEN(<span class="hljs-number">403</span>, &amp;#<span class="hljs-number">34</span>;ç¦æ­¢è®¿é—®&amp;#<span class="hljs-number">34</span>;),
    NOT_FOUND(<span class="hljs-number">404</span>, &amp;#<span class="hljs-number">34</span>;èµ„æºä¸å­˜åœ¨&amp;#<span class="hljs-number">34</span>;),
    SYSTEM_ERROR(<span class="hljs-number">500</span>, &amp;#<span class="hljs-number">34</span>;ç³»ç»Ÿé”™è¯¯&amp;#<span class="hljs-number">34</span>;);
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Integer code;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String message;
    
    ErrorCode(Integer code, String message) {
        <span class="hljs-built_in">this</span>.code = code;
        <span class="hljs-built_in">this</span>.message = message;
    }
    
    <span class="hljs-comment">// getteræ–¹æ³•</span>
}
</code></pre>
<h3 data-id="heading-19">3. æ—¥å¿—è®°å½•è¦æ°å½“</h3>
<ul>
<li>ä¸šåŠ¡å¼‚å¸¸ï¼šä¸€èˆ¬ç”¨warnçº§åˆ«ï¼Œä¸éœ€è¦è®°å½•å †æ ˆ</li>
<li>ç³»ç»Ÿå¼‚å¸¸ï¼šç”¨errorçº§åˆ«ï¼Œéœ€è¦è®°å½•å †æ ˆä¿¡æ¯</li>
</ul>
<h2 data-id="heading-20">å®Œæ•´ç¤ºä¾‹ä»£ç </h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">// ç»Ÿä¸€è¿”å›ç»“æœ</span>
<span class="hljs-meta">@Data</span>
<span class="hljs-meta">@AllArgsConstructor</span>
<span class="hljs-meta">@NoArgsConstructor</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Result</span> {
    <span class="hljs-keyword">private</span> Integer code;
    <span class="hljs-keyword">private</span> String message;
    <span class="hljs-keyword">private</span> T data;
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  Result <span class="hljs-title function_">success</span><span class="hljs-params">(T data)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(<span class="hljs-number">200</span>, &amp;#<span class="hljs-number">34</span>;æˆåŠŸ&amp;#<span class="hljs-number">34</span>;, data);
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span>  Result <span class="hljs-title function_">error</span><span class="hljs-params">(Integer code, String message)</span> {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Result</span>&lt;&gt;(code, message, <span class="hljs-literal">null</span>);
    }
}

<span class="hljs-comment">// å…¨å±€å¼‚å¸¸å¤„ç†å™¨</span>
<span class="hljs-meta">@RestControllerAdvice</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">GlobalExceptionHandler</span> {
    
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">Logger</span> <span class="hljs-variable">logger</span> <span class="hljs-operator">=</span> LoggerFactory.getLogger(GlobalExceptionHandler.class);
    
    <span class="hljs-comment">// å¤„ç†ä¸šåŠ¡å¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(BusinessException.class)</span>
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">handleBusinessException</span><span class="hljs-params">(BusinessException e)</span> {
        logger.warn(&amp;#<span class="hljs-number">34</span>;ä¸šåŠ¡å¼‚å¸¸ï¼šcode={}, message={}&amp;#<span class="hljs-number">34</span>;, e.getCode(), e.getMessage());
        <span class="hljs-keyword">return</span> Result.error(e.getCode(), e.getMessage());
    }
    
    <span class="hljs-comment">// å¤„ç†å‚æ•°æ ¡éªŒå¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(MethodArgumentNotValidException.class)</span>
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">handleMethodArgumentNotValidException</span><span class="hljs-params">(MethodArgumentNotValidException e)</span> {
        <span class="hljs-type">String</span> <span class="hljs-variable">message</span> <span class="hljs-operator">=</span> e.getBindingResult().getFieldErrors().stream()
                .map(FieldError::getDefaultMessage)
                .collect(Collectors.joining(&amp;#<span class="hljs-number">34</span>;, &amp;#<span class="hljs-number">34</span>;));
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">400</span>, message);
    }
    
    <span class="hljs-comment">// å¤„ç†æ‰€æœ‰å…¶ä»–å¼‚å¸¸</span>
    <span class="hljs-meta">@ExceptionHandler(Exception.class)</span>
    <span class="hljs-keyword">public</span> Result <span class="hljs-title function_">handleException</span><span class="hljs-params">(Exception e)</span> {
        logger.error(&amp;#<span class="hljs-number">34</span>;ç³»ç»Ÿå¼‚å¸¸ï¼š&amp;#<span class="hljs-number">34</span>;, e);
        <span class="hljs-keyword">return</span> Result.error(<span class="hljs-number">500</span>, &amp;#<span class="hljs-number">34</span>;ç³»ç»Ÿç¹å¿™ï¼Œè¯·ç¨åé‡è¯•&amp;#<span class="hljs-number">34</span>;);
    }
}
</code></pre>
<hr/>
<h2 data-id="heading-21">æ€»ç»“</h2>
<p><strong>ç»Ÿä¸€æ ¼å¼</strong>ï¼šå‰åç«¯çº¦å®šå¥½é”™è¯¯ç»“æ„ï¼Œæ²Ÿé€šæ›´é¡ºç•…<br/>
<strong>å‡å°‘é‡å¤ä»£ç </strong>ï¼šä¸ç”¨æ¯ä¸ªæ–¹æ³•å†™ try-catch<br/>
<strong>æå‡å¥å£®æ€§</strong>ï¼šå…œåº•å¤„ç†é˜²æ­¢ç³»ç»Ÿå´©æºƒï¼Œè¿˜èƒ½è®°å½•æ—¥å¿—</p>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äºå…¬ä¼—å·ï¼šç¨‹åºå‘˜å¤§åï¼Œä¸“æ³¨åˆ†äº«å‰åç«¯å¼€å‘çš„å®æˆ˜ç¬”è®°ã€‚å…³æ³¨æˆ‘ï¼Œå°‘èµ°å¼¯è·¯ï¼Œä¸€èµ·è¿›æ­¥ï¼</p>
</blockquote>
<h4 data-id="heading-22">ğŸ“Œå¾€æœŸç²¾å½©</h4>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FU3HhCz5WiAMNM7foxuTa0w" target="_blank" title="https://mp.weixin.qq.com/s/U3HhCz5WiAMNM7foxuTa0w" ref="nofollow noopener noreferrer">ã€Šå‰ç«¯é«˜æ‰‹æ‰çŸ¥é“çš„ç§˜å¯†ï¼šBlob å±…ç„¶è¿™ä¹ˆå¼ºå¤§ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FX-MSa0CHwVW_qgPezbpMUA" target="_blank" title="https://mp.weixin.qq.com/s/X-MSa0CHwVW_qgPezbpMUA" ref="nofollow noopener noreferrer">ã€Šè¿™ 5 ä¸ªå†·é—¨ HTML æ ‡ç­¾ï¼Œè®©æˆ‘ç›´æ¥åˆ äº†100 è¡Œ JS ä»£ç ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FsMAKhSLNvmU1ddxg0yv9Fg" target="_blank" title="https://mp.weixin.qq.com/s/sMAKhSLNvmU1ddxg0yv9Fg" ref="nofollow noopener noreferrer">ã€Šé‡æ„äº†20ä¸ªSpringBooté¡¹ç›®åï¼Œæ€»ç»“å‡ºè¿™å¥—ç¨³å®šé«˜æ•ˆçš„æ¶æ„è®¾è®¡ã€‹</a></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F184BGM_pdMFLc0ASrferwQ" target="_blank" title="https://mp.weixin.qq.com/s/184BGM_pdMFLc0ASrferwQ" ref="nofollow noopener noreferrer">ã€Šä»£ç é‡Œå…¨æ˜¯ new å¯¹è±¡ï¼ŒçœŸçš„å¾ˆ Low å—ï¼Ÿæˆ‘è®¤çœŸæƒ³äº†ä¸€æ™šã€‹</a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸å†è´¹è„‘, æ‰‹ç®— Attention å…¬å¼, ç†è§£ Transformer æ³¨æ„åŠ›çš„æ•°å­¦æœ¬è´¨]]></title>    <link>https://juejin.cn/post/7592079304924692490</link>    <guid>https://juejin.cn/post/7592079304924692490</guid>    <pubDate>2026-01-07T00:46:23.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592079304924692490" data-draft-id="7592062873829900338" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸å†è´¹è„‘, æ‰‹ç®— Attention å…¬å¼, ç†è§£ Transformer æ³¨æ„åŠ›çš„æ•°å­¦æœ¬è´¨"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,AIGC,LLM"/> <meta itemprop="datePublished" content="2026-01-07T00:46:23.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å°åˆ»å›"/> <meta itemprop="url" content="https://juejin.cn/user/572216818014568"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸å†è´¹è„‘, æ‰‹ç®— Attention å…¬å¼, ç†è§£ Transformer æ³¨æ„åŠ›çš„æ•°å­¦æœ¬è´¨
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/572216818014568/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å°åˆ»å›
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:46:23.000Z" title="Wed Jan 07 2026 00:46:23 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    3
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»5åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>å¤§å®¶å¥½, æˆ‘æ˜¯å°åˆ»å›. ä»Šå¤©æˆ‘ä»¬æ¥èŠæ³¨æ„åŠ› (Attention) , è¿™ä¸ª Transfromer æ¶æ„çš„æ ¸å¿ƒ.</p>
<p>ä¸å°‘ç§‘æ™®æ–‡ç« , åœ¨ä»‹ç»åˆ°æ³¨æ„åŠ›æ—¶, éƒ½ä¼šåˆ»æ„ç»•è¿‡æ•°å­¦å…¬å¼, å•çº¯é æ¯”å–»æ¥è§£é‡Šæ³¨æ„åŠ›.</p>
<p>ä½†é æ¯”å–»æ„ŸçŸ¥æ³¨æ„åŠ›, è·Ÿå®Œå…¨ç†è§£å®ƒå§‹ç»ˆä¼šæœ‰ä¸€å±‚éš”é˜‚, æ¯•ç«Ÿçœ‹åœ°å›¾æ°¸è¿œä¸ç­‰äºèµ°ä¸€éè·¯.</p>
<p>æœ¬ç¯‡æ–‡ç« , æˆ‘ä»¬ä¼šé€šè¿‡ä¸€ä¸ªä¾‹å­, äº²è‡ªè¿‡ä¸€éè®¡ç®—æ³¨æ„åŠ›çš„æ ¸å¿ƒå…¬å¼, ä¸€èµ·æ¢ç©¶æ³¨æ„åŠ›æœºåˆ¶çš„æ•°å­¦æœ¬è´¨.</p>
<blockquote>
<p>æœ¬æ–‡æ¶‰åŠ Transformer åŸºç¡€æ¶æ„, çŸ©é˜µè¿ç®—, è‹¥ä½ å¯¹è¿™ä¸¤éƒ¨åˆ†ä¸ç†Ÿæ‚‰, å»ºè®®å…ˆè¡¥å…¨å‰ç½®çŸ¥è¯†, é˜…è¯»ä½“éªŒä¼šæ›´å¥½:</p>
<p>ä¸ç†Ÿæ‚‰ Transformer åŸºç¡€æ¶æ„, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F_JNT0A6ud8QtGpK319a8uw" target="_blank" title="https://mp.weixin.qq.com/s/_JNT0A6ud8QtGpK319a8uw" ref="nofollow noopener noreferrer">æ•°å­¦ä¸å¥½ä¹Ÿèƒ½æ‡‚: è§£è¯» AI ç»å…¸è®ºæ–‡ã€ŠAttention is All You Needã€‹ä¸å¤§æ¨¡å‹ç”ŸæˆåŸç†</a></p>
<p>ä¸ç†Ÿæ‚‰çŸ©é˜µè¿ç®—, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2FyjY8xLaKHPWcWXqpYL5SBw" target="_blank" title="https://mp.weixin.qq.com/s/yjY8xLaKHPWcWXqpYL5SBw" ref="nofollow noopener noreferrer">ä¸å†è´¹è„‘, å†™ç»™ AI çˆ±å¥½è€…çš„çŸ©é˜µ (Matrix) å…¥é—¨æŒ‡å—</a></p>
</blockquote>
<h2 data-id="heading-0">å…ˆå»ºç«‹ç›´è§‰ï¼šæ³¨æ„åŠ›åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>åœ¨å•ƒå…¬å¼ä¹‹å‰, æˆ‘ä»¬æŠŠæ³¨æ„åŠ›è¿™ä¸ªæ¦‚å¿µæ”¾åˆ°ç”Ÿæ´»åœºæ™¯é‡Œ. æ¯•ç«Ÿæ‰€æœ‰å¤æ‚çš„æŠ€æœ¯, æœ¬è´¨éƒ½æ˜¯å¯¹ç°å®ä¸–ç•Œçš„æŠ½è±¡.</p>
<img width="300" height="45" alt="å¾®ä¿¡åº•éƒ¨èœå•æˆªå›¾" src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a6c5458bee8d4b62a6a270d623c7c53d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5Y2w5Yi75ZCb:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768351970&amp;x-signature=fN0xC456QVsUDLZ3%2B41SkUePuJM%3D" loading="lazy"/>
<p>çœ‹è¿™å¼ å¾®ä¿¡èœå•æˆªå›¾, ä½ æ˜¯ä¸æ˜¯ç¬é—´è¢«æ¶ˆæ¯å›¾æ ‡ä¸Šçš„çº¢è‰²æç¤ºå¸å¼•? è¿™å°±æ˜¯çš„ "æ³¨æ„åŠ›åˆ†é…": å¤§è„‘ä¼šè‡ªåŠ¨ç­›é€‰ä¿¡æ¯, ä¼˜å…ˆèšç„¦åˆ°æœ‰ä»·å€¼, æœ‰å¼‚å¸¸çš„éƒ¨åˆ†.</p>
<p>è¯­è¨€ç†è§£ä¸­çš„æ³¨æ„åŠ›åŒç†. æ¯”å¦‚è¿™å¥è¯: "å°åˆ»å›æ²¡æœ‰åƒæ™šé¤, å› ä¸ºä»–ä¸é¥¿".</p>
<p>å½“ä½ è¯»åˆ° "ä»–" è¿™ä¸ªä»£è¯æ—¶, å¤§è„‘ä¼šè‡ªåŠ¨æŠŠæ³¨æ„åŠ›é›†ä¸­åœ¨ "å°åˆ»å›" ä¸Š, è€Œä¸æ˜¯ "æ™šé¤" ä¸Š. è¿™æ˜¯å› ä¸ºä½ çš„å¤§è„‘å·²ç»é€šè¿‡ä¸Šä¸‹æ–‡, åˆ¤æ–­å‡º "ä»–" è¿™ä¸ªä»£è¯å’Œ "å°åˆ»å›" çš„å…³è”æ€§æ›´å¼º.</p>
<p>Transformer é‡Œçš„æ³¨æ„åŠ›, ä¹Ÿæ˜¯åœ¨åšåŒæ ·çš„äº‹æƒ…: <strong>é’ˆå¯¹å¥å­é‡Œçš„æ¯ä¸ªè¯, è®¡ç®—å®ƒå’Œå…¶ä»–æ‰€æœ‰è¯çš„å…³è”æ€§å¾—åˆ†, å†æ ¹æ®å¾—åˆ†é‡æ–°æ•´åˆä¿¡æ¯.</strong> é«˜åˆ†åˆ†é…çš„æ³¨æ„åŠ›å¤š, ä½åˆ†åˆ†é…çš„æ³¨æ„åŠ›å°‘.</p>
<p>è€Œæˆ‘ä»¬ä»Šå¤©è¦è¿‡çš„å…¬å¼, å°±æ˜¯æŠŠè¿™ä¸ªå…ˆè®¡ç®—å…³è”æ€§å¾—åˆ†, åæ•´åˆä¿¡æ¯çš„è¿‡ç¨‹, ç”¨æ•°å­¦è¯­è¨€ç²¾ç¡®æè¿°.</p>
<h2 data-id="heading-1">æ‰‹ç®— Attention å…¬å¼çš„æ¯ä¸€æ­¥</h2>
<h3 data-id="heading-2">0 Attention å…¬å¼æ ¸å¿ƒè§£è¯»</h3>
<p>åœ¨åŠ¨æ‰‹è®¡ç®—å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹æ³¨æ„åŠ›æœºåˆ¶çš„æ ¸å¿ƒå…¬å¼:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo stretchy="false">)</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">Attention(Q, K, V) = softmax(\frac{QK^T}{\sqrt{d_k}})V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4483em;vertical-align:-0.93em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></div>
<p>å…¶ä¸­, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Attention(Q, K, V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span></span> æ˜¯æ•´åˆäº†ä¸Šä¸‹æ–‡ä¿¡æ¯çš„å…¨æ–°çŸ©é˜µ. å…¬å¼çš„æ„æ€æ˜¯, è¿™ä¸ªçŸ©é˜µå…ˆç”± Q ä¸ K è®¡ç®—æ³¨æ„åŠ›æƒé‡ï¼Œå†åœ¨æ³¨æ„åŠ›æƒé‡çš„åŸºç¡€ä¸Šä¹˜ä»¥ V.</p>
<ol>
<li>å…¬å¼ä¸­çš„ Q, K, V æ˜¯ä¸‰ä¸ªæ ¸å¿ƒè¾“å…¥, åç»­æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜å®ƒä»¬çš„ç”±æ¥å’Œä½œç”¨;</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> è¡¨ç¤ºæŸ¥è¯¢çŸ©é˜µä¸é”®çŸ©é˜µçš„è½¬ç½®ç›¸ä¹˜;</li>
<li><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span></span></span> æ˜¯ K å‘é‡ç»´åº¦çš„å¹³æ–¹æ ¹, ä½œç”¨æ˜¯å¯¹å¾—åˆ†è¿›è¡Œç¼©æ”¾;</li>
<li>Softmax å¯¹ç¼©æ”¾åçš„å¾—åˆ†çŸ©é˜µåšå½’ä¸€åŒ–å¤„ç†, å°†æ¯ä¸€è¡Œçš„å¾—åˆ†è½¬æ¢ä¸º 0 åˆ° 1 ä¹‹é—´çš„æ¦‚ç‡å€¼;</li>
<li>ä¹˜ä»¥ V, æ˜¯ç”¨å½’ä¸€åŒ–åçš„æ³¨æ„åŠ›æƒé‡çŸ©é˜µ, æå–å‡ºæ‰€æœ‰è¯çš„ä»·å€¼ä¿¡æ¯</li>
</ol>
<h3 data-id="heading-3">1 å‡†å¤‡è¾“å…¥å‘é‡ A, B, C</h3>
<p>ä¸ºç®€åŒ–è®¡ç®—, æˆ‘ä»¬åšä¸€ä¸ªå‡è®¾: ä¸€å¥è¯åªæœ‰ A, B, C ä¸‰ä¸ªè¯, ä¸”æ¯ä¸ªè¯éƒ½ç”¨ 4 ç»´å‘é‡è¡¨ç¤º (çœŸå®æ¨¡å‹ä¸­å‘é‡ç»´åº¦æœ‰å‡ ç™¾ç»´, è¿™é‡Œé€‰ 4 ç»´åªæ˜¯ä¸ºäº†å¥½ç®—).</p>
<p>ä»¥ä¸‹æ˜¯è¿™ä¸‰ä¸ªè¯çš„åˆå§‹è¯åµŒå…¥å‘é‡:</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>A</mi><mo>=</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">A = [0, 1, 2, 3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal">A</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">3</span><span class="mclose">]</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mo>=</mo><mo stretchy="false">[</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">B = [4, 5, 6, 7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">7</span><span class="mclose">]</span></span></span></span></span></p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mo>=</mo><mo stretchy="false">[</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>10</mn><mo separator="true">,</mo><mn>11</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">C = [8, 9, 10, 11]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">11</span><span class="mclose">]</span></span></span></span></span></p>
<p>è¿™ 3 ä¸ªå‘é‡ä¼šè¢«ç»„åˆæˆä¸€ä¸ªçŸ©é˜µ X</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>X</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">X = \begin{bmatrix}
0 &amp; 1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 &amp; 7 \\
8 &amp; 9 &amp; 10 &amp; 11
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<blockquote>
<p>è¿™äº›å‘é‡æ˜¯ä»å“ªæ¥çš„?</p>
<p>è¿™äº›å‘é‡æœ€åˆå€¼æ˜¯éšæœºåˆ†é…çš„, æ¨¡å‹é€šè¿‡å¤§é‡è®­ç»ƒ, "åå‘ä¼ æ’­" åå¾—åˆ°æœ€åçš„å€¼. è¿™é‡Œç”¨ç®€å•æ•´æ•°ä»£æ›¿çœŸå®å‘é‡çš„å€¼, åªæ˜¯ä¸ºäº†æ¼”ç¤ºè®¡ç®—è¿‡ç¨‹.</p>
<p>ä¸ç†Ÿæ‚‰è¯å‘é‡, å¯ä»¥çœ‹æˆ‘çš„æ–‡ç« : <a href="https://link.juejin.cn?target=https%3A%2F%2Fmp.weixin.qq.com%2Fs%2F0TLOqr84vS9J1fw1qs2pag" target="_blank" title="https://mp.weixin.qq.com/s/0TLOqr84vS9J1fw1qs2pag" ref="nofollow noopener noreferrer">å¤§æ¨¡å‹å¦‚ä½•åˆ†è¾¨ â€œç‹¼â€ ä¸ â€œç‹—â€ â€”â€” è¯å‘é‡çš„è®­ç»ƒè¿‡ç¨‹</a></p>
</blockquote>
<h3 data-id="heading-4">2 å‡†å¤‡ 3 ä¸ªæ ¸å¿ƒçŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>Q</mi></msup></mrow><annotation encoding="application/x-tex">W^Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">W^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>V</mi></msup></mrow><annotation encoding="application/x-tex">W^V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span></span></span></span></span></h3>
<p>Attention ä¸­çš„ Qã€Kã€V çŸ©é˜µ, æ˜¯ç”± 3 ä¸ªçŸ©é˜µ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>Q</mi></msup></mrow><annotation encoding="application/x-tex">W^Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">W^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>V</mi></msup></mrow><annotation encoding="application/x-tex">W^V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span></span></span></span></span>, å’Œè¾“å…¥çŸ©é˜µ X ç›¸ä¹˜å¾—åˆ°</p>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>Q</mi></msup></mrow><annotation encoding="application/x-tex">W^Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">W^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span></span>, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>V</mi></msup></mrow><annotation encoding="application/x-tex">W^V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯ç”¨æ¥åšå‘é‡è½¬æ¢çš„çŸ©é˜µ, ä¸“ä¸šå«æ³•æ˜¯ "æŠ•å½±çŸ©é˜µ".</p>
<p>æˆ‘ä»¬å…ˆç»™å‡ºè¿™ä¸‰ä¸ªçŸ©é˜µçš„å…·ä½“æ•°å€¼ï¼ˆåŒæ ·ä¸ºäº†å¥½ç®—ï¼Œç”¨ç®€å•çŸ©é˜µä»£æ›¿çœŸå®æ¨¡å‹çš„éšæœºåˆå§‹åŒ–çŸ©é˜µï¼‰:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>W</mi><mi>Q</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/><msup><mi>W</mi><mi>K</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">W^Q = \begin{bmatrix}
1 &amp; 0 \\
1 &amp; 0 \\
0 &amp; 1 \\
0 &amp; 1
\end{bmatrix}
\quad
W^K = \begin{bmatrix}
0 &amp; 1 \\
0 &amp; 1 \\
1 &amp; 0 \\
1 &amp; 0
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"/><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>W</mi><mi>V</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">W^V = \begin{bmatrix}
1 &amp; 0 \\
0 &amp; 1 \\
1 &amp; 0 \\
0 &amp; 1
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<blockquote>
<p>è¿™ä¸‰ä¸ªçŸ©é˜µæ˜¯ä»å“ªæ¥çš„ï¼Ÿ</p>
<p>å’Œè¯åµŒå…¥å‘é‡ç±»ä¼¼, Transformer æ¶æ„æ­å»ºå¥½å, è¿™ä¸‰ä¸ªçŸ©é˜µå°±å­˜åœ¨äº†, ä½†é‡Œé¢çš„æ•°å€¼éƒ½æ˜¯éšæœºçš„.æ¨¡å‹è®­ç»ƒçš„æ ¸å¿ƒè¿‡ç¨‹, å°±æ˜¯é€šè¿‡ "åå‘ä¼ æ’­" ä¸æ–­è°ƒæ•´è¿™ä¸‰ä¸ªçŸ©é˜µï¼ˆä»¥åŠå…¶ä»–æ‰€æœ‰å‚æ•°ï¼‰çš„æ•°å€¼.ç›´åˆ°å®ƒä»¬èƒ½ç²¾å‡†æ•æ‰è¯ä¸è¯çš„å…³è”æ€§.</p>
<p>ç®€å•è¯´: è®­ç»ƒ Transformer, æœ¬è´¨å°±æ˜¯åœ¨è°ƒä¼˜è¿™ä¸‰ä¸ªçŸ©é˜µçš„æ•°å­—, è®© Q å’Œ K çš„åŒ¹é…æ›´åˆç†, V çš„ä¿¡æ¯æ•´åˆæ›´æœ‰æ•ˆ.</p>
</blockquote>
<h3 data-id="heading-5">3 è®¡ç®— Q, K, V çŸ©é˜µ</h3>
<p>Q, K, V çš„è®¡ç®—é€»è¾‘å¾ˆç®€å•: æŠŠæ‰€æœ‰è¾“å…¥å‘é‡ç»„æˆä¸€ä¸ªè¾“å…¥çŸ©é˜µ, è®°ä¸º X, åˆ†åˆ«å’Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>Q</mi></msup></mrow><annotation encoding="application/x-tex">W^Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span></span></span></span></span>ã€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">W^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span></span>ã€<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>W</mi><mi>V</mi></msup></mrow><annotation encoding="application/x-tex">W^V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span></span></span></span></span> åšçŸ©é˜µä¹˜æ³•, ç»“æœå°±æ˜¯ Q, K, V çŸ©é˜µ.</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>X</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">X = \begin{bmatrix}
0 &amp; 1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 &amp; 7 \\
8 &amp; 9 &amp; 10 &amp; 11
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<ul>
<li>ç¬¬ä¸€è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 1, 2, 3]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">3</span><span class="mclose">]</span></span></span></span></span> æ˜¯å‘é‡ A;</li>
<li>ç¬¬äºŒè¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>4</mn><mo separator="true">,</mo><mn>5</mn><mo separator="true">,</mo><mn>6</mn><mo separator="true">,</mo><mn>7</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[4, 5, 6, 7]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">4</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">5</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">6</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">7</span><span class="mclose">]</span></span></span></span></span> æ˜¯å‘é‡ B;</li>
<li>ç¬¬ä¸‰è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>8</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>10</mn><mo separator="true">,</mo><mn>11</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[8, 9, 10, 11]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">8</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">9</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">10</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">11</span><span class="mclose">]</span></span></span></span></span> æ˜¯å‘é‡ C.</li>
</ul>
<h4 data-id="heading-6">3.1 è®¡ç®— Q çŸ©é˜µ</h4>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><mo>=</mo><mi>X</mi><mo>â‹…</mo><msup><mi>W</mi><mi>Q</mi></msup></mrow><annotation encoding="application/x-tex">Q = X \cdot W^Q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">Q</span></span></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
0 &amp; 1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 &amp; 7 \\
8 &amp; 9 &amp; 10 &amp; 11
\end{bmatrix} \cdot \begin{bmatrix}
1 &amp; 0 \\
1 &amp; 0 \\
0 &amp; 1 \\
0 &amp; 1
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
1 &amp; 5  \\
9 &amp; 13 \\
17 &amp; 21
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<ul>
<li>Q çŸ©é˜µçš„ç¬¬ä¸€è¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>A</mi></msup></mrow><annotation encoding="application/x-tex">Q^A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span></span></span></span></span></span></span></span> , ä»£è¡¨å‘é‡ A çš„æŸ¥è¯¢å‘é‡;</li>
<li>ç¬¬äºŒè¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>B</mi></msup></mrow><annotation encoding="application/x-tex">Q^B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span></span></span>, ä»£è¡¨å‘é‡ B çš„æŸ¥è¯¢å‘é‡;</li>
<li>ç¬¬ä¸‰è¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>Q</mi><mi>C</mi></msup></mrow><annotation encoding="application/x-tex">Q^C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span></span></span></span></span></span></span></span></span>, ä»£è¡¨å‘é‡ C çš„æŸ¥è¯¢å‘é‡.</li>
</ul>
<h4 data-id="heading-7">3.2 è®¡ç®— K çŸ©é˜µ</h4>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>K</mi><mo>=</mo><mi>X</mi><mo>â‹…</mo><msup><mi>W</mi><mi>K</mi></msup></mrow><annotation encoding="application/x-tex">K = X \cdot W^K</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
0 &amp; 1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 &amp; 7 \\
8 &amp; 9 &amp; 10 &amp; 11
\end{bmatrix} \cdot \begin{bmatrix}
0 &amp; 1 \\
0 &amp; 1 \\
1 &amp; 0 \\
1 &amp; 0
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
5 &amp; 1  \\
13 &amp; 9 \\
21 &amp; 17
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<ul>
<li>K çŸ©é˜µçš„ç¬¬ä¸€è¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>k</mi><mi>A</mi></msup></mrow><annotation encoding="application/x-tex">k^A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span></span></span></span></span></span></span></span>, ä»£è¡¨å‘é‡ A çš„é”®å‘é‡;</li>
<li>ç¬¬äºŒè¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mi>B</mi></msup></mrow><annotation encoding="application/x-tex">K^B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05017em;">B</span></span></span></span></span></span></span></span></span></span></span></span>, ä»£è¡¨å‘é‡ B çš„é”®å‘é‡;</li>
<li>ç¬¬ä¸‰è¡Œæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mi>C</mi></msup></mrow><annotation encoding="application/x-tex">K^C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">C</span></span></span></span></span></span></span></span></span></span></span></span>, ä»£è¡¨å‘é‡ C çš„é”®å‘é‡.</li>
</ul>
<h4 data-id="heading-8">3.3 è®¡ç®— V çŸ©é˜µ</h4>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>V</mi><mo>=</mo><mi>X</mi><mo>â‹…</mo><msup><mi>W</mi><mi>V</mi></msup></mrow><annotation encoding="application/x-tex">V = X \cdot W^V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.22222em;">V</span></span></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>11</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
0 &amp; 1 &amp; 2 &amp; 3 \\
4 &amp; 5 &amp; 6 &amp; 7 \\
8 &amp; 9 &amp; 10 &amp; 11
\end{bmatrix} \cdot \begin{bmatrix}
1 &amp; 0 \\
0 &amp; 1 \\
1 &amp; 0 \\
0 &amp; 1
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">8</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">6</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">3</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">11</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:4.8em;vertical-align:-2.15em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M403 1759 V84 H666 V0 H319 V1759 v1200 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.65em;"><span style="top:-4.65em;"><span class="pstrut" style="height:6.8em;"/><span style="width:0.667em;height:4.800em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="4.800em" viewbox="0 0 667 4800"><path d="M347 1759 V0 H0 V84 H263 V1759 v1200 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v1200 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:2.15em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>12</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>18</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
2 &amp; 4 \\
10 &amp; 12 \\
18 &amp; 20
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">18</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">12</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">20</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h4 data-id="heading-9">3.4 Qã€Kã€V çš„ä½œç”¨</h4>
<p>ç®—åˆ°è¿™, æˆ‘ä»¬å·²ç»å¾—åˆ°äº† Q, K, V ä¸‰ä¸ªçŸ©é˜µ, å®ƒä»¬æ˜¯ Q, K, V å‘é‡çš„ç»„åˆ, æˆ‘ä»¬ç”¨å­—å…¸æ¥æ‰“ä¸ªæ¯”æ–¹:</p>
<ul>
<li>Q (query, æŸ¥è¯¢å‘é‡): å¥½æ¯”æˆ‘ä»¬æŸ¥å­—å…¸æ—¶è¾“çš„<strong>å…³é”®è¯</strong>, æ”¾åˆ°æ¨¡å‹é‡Œ, å°±æ˜¯å½“å‰è¿™ä¸ªè¯æƒ³æ‰¾è°, æƒ³å’Œè°æ­å…³ç³»;</li>
<li>K (key, é”®å‘é‡), å¥½æ¯”å­—å…¸é‡Œæ‰€æœ‰è¯æ¡çš„<strong>æ ‡é¢˜</strong>. å­—å…¸é‡Œæ¯ä¸ªè¯éƒ½æœ‰ä¸ªæ ‡é¢˜, æ¨¡å‹é‡Œæ¯ä¸ªè¯ä¹Ÿéƒ½æœ‰ä¸ªé”®å‘é‡, ä¸“é—¨ç”¨æ¥å’Œå…¶ä»–è¯çš„æŸ¥è¯¢å‘é‡åšé…å¯¹;</li>
<li>V (value, ä»·å€¼å‘é‡), å¥½æ¯”å­—å…¸æ ‡é¢˜å¯¹åº”çš„<strong>è§£é‡Šå†…å®¹</strong>. ä½ ç”¨å…³é”®è¯ Q æ‰¾åˆ°å¯¹åº”çš„æ ‡é¢˜ K å, çœŸæ­£è¦çš„æ˜¯æ ‡é¢˜åº•ä¸‹çš„è§£é‡Š; è€Œ V å°±æ˜¯æ¯ä¸ªè¯èº«ä¸Šæœ€æ ¸å¿ƒçš„ä¿¡æ¯.</li>
</ul>
<h3 data-id="heading-10">4 è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></h3>
<p>å…¬å¼é‡Œçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">K^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> æ˜¯ K çŸ©é˜µçš„ "è½¬ç½®", ä¹Ÿå°±æ˜¯æŠŠ K çš„è¡Œå’Œåˆ—äº’æ¢</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>K</mi><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">K = \begin{bmatrix}
5 &amp; 1  \\
13 &amp; 9 \\
21 &amp; 17
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>K</mi><mi>T</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">K^T = \begin{bmatrix}
5 &amp; 13 &amp; 21  \\
1 &amp; 9 &amp; 17 
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8913em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> çš„ç»“æœ, å°±æ˜¯ "æ¯ä¸ªè¯ä¸å…¶ä»–æ‰€æœ‰è¯çš„å…³è”æ€§å¾—åˆ†", ä¹Ÿå« "æ³¨æ„åŠ›å¾—åˆ†".</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>13</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>21</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>17</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">QK^T = \begin{bmatrix}
1 &amp; 5  \\
9 &amp; 13 \\
17 &amp; 21
\end{bmatrix} \cdot \begin{bmatrix}
5 &amp; 13 &amp; 21  \\
1 &amp; 9 &amp; 17 \\
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0858em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"/><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">[</span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">5</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">13</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">9</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.45em;"><span style="top:-3.61em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">21</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">17</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.95em;"><span/></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">]</span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>58</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>106</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>58</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>234</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>400</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>106</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>400</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>714</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
10 &amp; 58 &amp; 106 \\
58 &amp; 234 &amp; 400 \\
106 &amp; 400 &amp; 714
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">58</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">106</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">58</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">234</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">400</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">106</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">400</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">714</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> å¾—åˆ°çš„çŸ©é˜µ, æ¯ä¸€è¡Œå¯¹åº”ä¸€ä¸ªè¯çš„å…³è”å¾—åˆ†è¡¨:</p>
<ul>
<li>ç¬¬ä¸€è¡Œæ˜¯ A å¯¹ A, B, C çš„å¾—åˆ†;</li>
<li>ç¬¬äºŒè¡Œæ˜¯ B å¯¹ A, B, C çš„å¾—åˆ†;</li>
<li>ç¬¬ä¸‰è¡Œæ˜¯ C å¯¹ A, B, C çš„å¾—åˆ†.</li>
</ul>
<p>å¾—åˆ†è¶Šé«˜, è¯´æ˜ä¸¤ä¸ªè¯çš„å…³è”æ€§è¶Šå¼º.</p>
<h3 data-id="heading-11">5 é™¤ä»¥ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span></span></span></h3>
<p>å…¬å¼é‡Œçš„ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{d_k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.1828em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span></span></span> æ˜¯é”®å‘é‡çš„ç»´åº¦ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> çš„å¹³æ–¹æ ¹.</p>
<p>è¿™é‡Œ K å‘é‡æ˜¯ 2 ç»´, æ‰€ä»¥</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub><mo>=</mo><mn>2</mn><mo separator="true">,</mo><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt><mo>â‰ˆ</mo><mn>1.414</mn></mrow><annotation encoding="application/x-tex">d_k = 2, \sqrt{d_k} \approx 1.414</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.2339em;"/><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0061em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"/><span class="mord" style="padding-left:1em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.9661em;"><span class="pstrut" style="height:3.2em;"/><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewbox="0 0 400000 1296" preserveaspectratio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119&#10;c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120&#10;c340,-704.7,510.7,-1060.3,512,-1067&#10;l0 -0&#10;c4.7,-7.3,11,-11,19,-11&#10;H40000v40H1012.3&#10;s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232&#10;c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1&#10;s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26&#10;c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z&#10;M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2339em;"><span/></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1.414</span></span></span></span></span></div>
<p>ä¸ºä»€ä¹ˆè¦ç¼©æ”¾ï¼Ÿå› ä¸ºå½“ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">d_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"/><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span></span></span> å¾ˆå¤§æ—¶, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">QK^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0358em;vertical-align:-0.1944em;"/><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span> çš„å¾—åˆ†ä¼šå˜å¾—å¾ˆå¤§, ä»£å…¥ Softmax å‡½æ•°å, æŒ‡æ•°è¿ç®—ä¼šå¯¼è‡´æ•°å€¼è¦ä¹ˆè¶‹è¿‘äºæ— ç©·å¤§, è¦ä¹ˆè¶‹è¿‘äº 0, ç¼©æ”¾åèƒ½è®©å¾—åˆ†æ›´ç¨³å®š.</p>
<p>è®¡ç®—ç¼©æ”¾åçš„ç»“æœ:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac></mrow><annotation encoding="application/x-tex">\frac{QK^T}{\sqrt{d_k}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4483em;vertical-align:-0.93em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>10</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>58</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>106</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>58</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>234</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>400</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>106</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>400</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>714</mn><mi mathvariant="normal">/</mi><mn>1.414</mn></mrow></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
10/1.414 &amp; 58/1.414 &amp; 106/1.414 \\
58/1.414 &amp; 234/1.414 &amp; 400/1.414 \\
106/1.414 &amp; 400/1.414 &amp; 714/1.414
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10/1.414</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">58/1.414</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">106/1.414</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">58/1.414</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">234/1.414</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">400/1.414</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">106/1.414</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">400/1.414</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">714/1.414</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>â‰ˆ</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7.07</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>41.02</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>74.96</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>41.02</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>165.48</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>282.84</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>74.96</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>282.84</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>504.90</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\approx \begin{bmatrix}
7.07 &amp; 41.02 &amp; 74.96 \\
41.02 &amp; 165.48 &amp; 282.84 \\
74.96 &amp; 282.84 &amp; 504.90
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4831em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">7.07</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">41.02</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">74.96</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">41.02</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">165.48</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">282.84</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">74.96</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">282.84</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">504.90</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h3 data-id="heading-12">6 softmax å½’ä¸€åŒ–</h3>
<p>softmax å‡½æ•°çš„ä½œç”¨æ˜¯å½’ä¸€åŒ–, æŠŠæ¯ä¸€è¡Œçš„å¾—åˆ†è½¬æ¢æˆ 0 åˆ° 1 ä¹‹é—´çš„æ¦‚ç‡, ä¸”æ¯ä¸€è¡Œçš„æ¦‚ç‡å’Œä¸º 1.</p>
<p>å‡è®¾æœ‰ä¸€ä¸ªè¾“å…¥å‘é‡ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>=</mo><mo stretchy="false">[</mo><msub><mi>z</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>z</mi><mn>2</mn></msub><mo separator="true">,</mo><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mo separator="true">,</mo><msub><mi>z</mi><mi>k</mi></msub><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">z = [z_1, z_2, ..., z_k]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"/><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">...</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">]</span></span></span></span></span>, é‚£ä¹ˆå¯¹äºå‘é‡ä¸­çš„ç¬¬ i ä¸ªå…ƒç´ ï¼ŒSoftmax å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>S</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><msub><mi>z</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mfrac><msup><mi>e</mi><msub><mi>z</mi><mi>i</mi></msub></msup><mrow><munderover><mo>âˆ‘</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>K</mi></munderover><msup><mi>e</mi><msub><mi>z</mi><mi>j</mi></msub></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">Softmax(z_i) = \frac{e^{z_i}}{\sum_{j=1}^{K} e^{z_j}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.044em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.6484em;vertical-align:-1.307em;"/><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3414em;"><span style="top:-2.1288em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">âˆ‘</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9812em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.07153em;">K</span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.4358em;"><span/></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6065em;"><span style="top:-3.0051em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.044em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"/><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span/></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.307em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span></span></span></span></span></div>
<p>è¿™é‡Œæœ‰ä¸ªé—®é¢˜, ç¼©æ”¾åçš„å¾—åˆ†æœ€å¤§å·²ç»åˆ° 504.90, ç›´æ¥è®¡ç®— <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>e</mi><mn>5</mn></msup><mn>04.90</mn></mrow><annotation encoding="application/x-tex">e^504.90</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mord">04.90</span></span></span></span></span> ä¼šå¾—åˆ°ä¸€ä¸ªå¤©æ–‡æ•°å­—, è®¡ç®—æœºæ— æ³•ç²¾ç¡®è®¡ç®—.</p>
<p>è¿™æ—¶å€™å¯ä»¥ç”¨ Softmax çš„ä¸€ä¸ªå…³é”®æ€§è´¨: <strong>ç»™åŒä¸€è¡Œçš„æ‰€æœ‰å…ƒç´ åŒæ—¶å‡å»è¯¥è¡Œçš„æœ€å¤§å€¼, ç»“æœä¸å˜.</strong></p>
<p>æˆ‘ä»¬ä»¥ç¬¬ä¸€è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>7.07</mn><mo separator="true">,</mo><mn>41.02</mn><mo separator="true">,</mo><mn>74.96</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[7.07, 41.02, 74.96]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">7.07</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">41.02</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">74.96</span><span class="mclose">]</span></span></span></span></span> ä¸ºä¾‹, æ¯ä¸ªå…ƒç´ éƒ½å‡ 74.96 , å¾—åˆ°</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">[</mo><mo>âˆ’</mo><mn>67.89</mn><mo separator="true">,</mo><mo>âˆ’</mo><mn>33.94</mn><mo separator="true">,</mo><mn>0</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-67.89, -33.94, 0]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">âˆ’</span><span class="mord">67.89</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">âˆ’</span><span class="mord">33.94</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mclose">]</span></span></span></span></span></div>
<p>æ­¤æ—¶è®¡ç®—</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>67.89</mn></mrow></msup><mo>â‰ˆ</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e^{-67.89} \approx 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">67.89</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mrow><mo>âˆ’</mo><mn>33.94</mn></mrow></msup><mo>â‰ˆ</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">e^{-33.94} \approx 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">âˆ’</span><span class="mord mtight">33.94</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">0</span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi>e</mi><mn>0</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">e^0 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641em;"/><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:0.6444em;"/><span class="mord">1</span></span></span></span></span></div>
<p>æ‰€ä»¥ç¬¬ä¸€è¡Œ softmax çš„ç»“æœæ˜¯ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 0, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>.</p>
<p>ç¬¬äºŒè¡Œå’Œç¬¬ä¸‰è¡ŒåŒç†, è®¡ç®—åå¾—åˆ°å®Œæ•´çš„ Softmax çŸ©é˜µ:</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo stretchy="false">)</mo><mo>â‰ˆ</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">softmax(\frac{QK^T}{\sqrt{d_k}}) \approx \begin{bmatrix}
0 &amp; 0 &amp; 1\\
0 &amp; 0 &amp; 1\\
0 &amp; 0 &amp; 1
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.4483em;vertical-align:-0.93em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"/><span class="mrel">â‰ˆ</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<p>æ¯ä¸€è¡Œçš„æ¦‚ç‡ä»£è¡¨å½“å‰è¯å¯¹å…¶ä»–è¯çš„å…³æ³¨æƒé‡:</p>
<ul>
<li>ç¬¬ä¸€è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 0, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>, è¯´æ˜ A å‡ ä¹æŠŠæ‰€æœ‰æ³¨æ„åŠ›éƒ½æ”¾åœ¨äº† C ä¸Š;</li>
<li>ç¬¬äºŒè¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 0, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>, è¯´æ˜ B ä¹ŸæŠŠæ‰€æœ‰æ³¨æ„åŠ›æ”¾åœ¨äº† C ä¸Š;</li>
<li>ç¬¬ä¸‰è¡Œ <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[0, 0, 1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord">1</span><span class="mclose">]</span></span></span></span></span>, è¯´æ˜ C åªå…³æ³¨è‡ªå·±.</li>
</ul>
<h3 data-id="heading-13">7 ä¹˜ä»¥ V</h3>
<p>æœ€åä¸€æ­¥æ˜¯æŠŠ Softmax å¾—åˆ°çš„å…³æ³¨æƒé‡, å’Œ V çŸ©é˜µ (è¯çš„ä»·å€¼ä¿¡æ¯) ç›¸ä¹˜. æœ¬è´¨æ˜¯æŒ‰æƒé‡æ•´åˆå…¶ä»–è¯çš„ä¿¡æ¯, å¾—åˆ°æ¯ä¸ªè¯çš„æœ€ç»ˆå‘é‡ (èåˆäº†ä¸Šä¸‹æ–‡ä¿¡æ¯).</p>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>A</mi><mi>t</mi><mi>t</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>Q</mi><mo separator="true">,</mo><mi>K</mi><mo separator="true">,</mo><mi>V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Attention(Q, K, V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"/><span class="mord mathnormal">A</span><span class="mord mathnormal">tt</span><span class="mord mathnormal">e</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span><span class="mord mathnormal">i</span><span class="mord mathnormal">o</span><span class="mord mathnormal">n</span><span class="mopen">(</span><span class="mord mathnormal">Q</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"/><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="mclose">)</span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mi>s</mi><mi>o</mi><mi>f</mi><mi>t</mi><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mfrac><mrow><mi>Q</mi><msup><mi>K</mi><mi>T</mi></msup></mrow><msqrt><msub><mi>d</mi><mi>k</mi></msub></msqrt></mfrac><mo stretchy="false">)</mo><mi>V</mi></mrow><annotation encoding="application/x-tex">= softmax(\frac{QK^T}{\sqrt{d_k}})V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:2.4483em;vertical-align:-0.93em;"/><span class="mord mathnormal">so</span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mopen">(</span><span class="mord"><span class="mopen nulldelimiter"/><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.5183em;"><span style="top:-2.2528em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8572em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"/><span class="mord" style="padding-left:0.833em;"><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span/></span></span></span></span></span></span></span><span style="top:-2.8172em;"><span class="pstrut" style="height:3em;"/><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.08em" viewbox="0 0 400000 1080" preserveaspectratio="xMinYMin slice"><path d="M95,702&#10;c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14&#10;c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54&#10;c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10&#10;s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429&#10;c69,-144,104.5,-217.7,106.5,-221&#10;l0 -0&#10;c5.3,-9.3,12,-14,20,-14&#10;H400000v40H845.2724&#10;s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7&#10;c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z&#10;M834 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.1828em;"><span/></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"/><span class="frac-line" style="border-bottom-width:0.04em;"/></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord mathnormal">Q</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">K</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"/><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.93em;"><span/></span></span></span></span><span class="mclose nulldelimiter"/></span><span class="mclose">)</span><span class="mord mathnormal" style="margin-right:0.22222em;">V</span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mo>â‹…</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>10</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>12</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>18</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
0 &amp; 0 &amp; 1\\
0 &amp; 0 &amp; 1\\
0 &amp; 0 &amp; 1
\end{bmatrix} \cdot \begin{bmatrix}
2 &amp; 4  \\
10 &amp; 12 \\
18 &amp; 20 
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"/><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">2</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">10</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">18</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">4</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">12</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">20</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<div class="math math-display"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>=</mo><mrow><mo fence="true">[</mo><mtable rowspacing="0.16em" columnalign="center center" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>18</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>18</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>18</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>20</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">= \begin{bmatrix}
18 &amp; 20 \\
18 &amp; 20 \\
18 &amp; 20
\end{bmatrix}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3669em;"/><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"/></span><span class="base"><span class="strut" style="height:3.6em;vertical-align:-1.55em;"/><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M403 1759 V84 H666 V0 H319 V1759 v0 v1759 h347 v-84&#10;H403z M403 1759 V0 H319 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">18</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">18</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">18</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span><span class="arraycolsep" style="width:0.5em;"/><span class="arraycolsep" style="width:0.5em;"/><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">20</span></span></span><span style="top:-3.01em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">20</span></span></span><span style="top:-1.81em;"><span class="pstrut" style="height:3em;"/><span class="mord"><span class="mord">20</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.05em;"><span class="pstrut" style="height:5.6em;"/><span style="width:0.667em;height:3.600em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.667em" height="3.600em" viewbox="0 0 667 3600"><path d="M347 1759 V0 H0 V84 H263 V1759 v0 v1759 H0 v84 H347z&#10;M347 1759 V0 H263 V1759 v0 v1759 h84z"/></svg></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:1.55em;"><span/></span></span></span></span></span></span></span></span></span></span></div>
<h2 data-id="heading-14">æ€»ç»“ï¼šæ³¨æ„åŠ›çš„æ•°å­¦æœ¬è´¨åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ</h2>
<p>æˆ‘ä»¬çœ‹æœ€ç»ˆç»“æœ, åŸæœ¬ A, B, C çš„å‘é‡å„ä¸ç›¸åŒ, ä½†ç»è¿‡æ³¨æ„åŠ›è®¡ç®—å, A å’Œ B çš„å‘é‡èåˆäº† C çš„å‘é‡ä¿¡æ¯, ä¸å†æ˜¯åŸæ¥å­¤ç«‹çš„è‡ªå·±. æ¢å¥è¯è¯´, A, B, C é€šè¿‡é˜…è¯»ä¸Šä¸‹æ–‡, ä¸æ–­è°ƒæ•´è‡ªèº«çš„è¯­ä¹‰, ä»è€Œå®ç°ç²¾ç¡®çš„ç†è§£.</p>
<p>æ¯”å¦‚ç¿»è¯‘ "æˆ‘å–œæ¬¢åƒè‹¹æœ" è¿™å¥è¯æ—¶, "è‹¹æœ" çš„æŸ¥è¯¢å‘é‡ Q ä¼šå’Œ "åƒ" çš„é”®å‘é‡ K è®¡ç®—å‡ºé«˜å…³è”æƒé‡, éšåè¿™ä¸ªé«˜æƒé‡ä¼šè®©æ¨¡å‹åœ¨æ•´åˆä»·å€¼ä¿¡æ¯ V æ—¶, æ›´ä¾§é‡æŠŠ "åƒ" çš„è¯­ä¹‰èå…¥åˆ° "è‹¹æœ" è‡ªèº«çš„ä»·å€¼å‘é‡ä¸­, æœ€ç»ˆç²¾å‡†åˆ¤æ–­ "è‹¹æœ" åœ¨è¿™é‡ŒæŒ‡æ°´æœ, è€Œéæ‰‹æœº.</p>
<p>æ”¾åˆ°çœŸå® transformer é‡Œ, è¿™ä¸ªè¿‡ç¨‹ä¼šæ›´å¤æ‚ (æ¯”å¦‚å¤šæ³¨æ„åŠ›å¤´, æ›´é«˜ç»´åº¦çš„å‘é‡), ä½†æ ¸å¿ƒé€»è¾‘æ²¡å˜. å°±æ˜¯ "ç”¨æ•°å­¦æ–¹æ³•è®¡ç®—è¯ä¸è¯çš„å…³è”æ€§, å†æŒ‰å…³è”æ€§æƒé‡æ•´åˆä¸Šä¸‹æ–‡ä¿¡æ¯".</p>
<p>æˆ‘æ˜¯å°åˆ»å›, ä¸€ä½æ¢ç´¢ AI çš„å‰ç«¯ç¨‹åºå‘˜, å…³æ³¨æˆ‘, è®© AI çŸ¥è¯†æœ‰æ¸©åº¦, æŠ€æœ¯è½åœ°æœ‰æ·±åº¦.</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ‹’ç»â€œå‡æ­»â€ï¼šä¸ºä½•ä¸Šæ»‘å…³é—­æ˜¯æµ‹è¯•å¤§å¿Œï¼Ÿæ­ç§˜ iOS çœŸå® OOM è§¦å‘æŒ‡å—]]></title>    <link>https://juejin.cn/post/7592147054785740851</link>    <guid>https://juejin.cn/post/7592147054785740851</guid>    <pubDate>2026-01-07T00:53:29.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592147054785740851" data-draft-id="7592147054785708083" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ‹’ç»â€œå‡æ­»â€ï¼šä¸ºä½•ä¸Šæ»‘å…³é—­æ˜¯æµ‹è¯•å¤§å¿Œï¼Ÿæ­ç§˜ iOS çœŸå® OOM è§¦å‘æŒ‡å—"/> <meta itemprop="keywords" content="Swift,APP,Apple"/> <meta itemprop="datePublished" content="2026-01-07T00:53:29.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ‹’ç»â€œå‡æ­»â€ï¼šä¸ºä½•ä¸Šæ»‘å…³é—­æ˜¯æµ‹è¯•å¤§å¿Œï¼Ÿæ­ç§˜ iOS çœŸå® OOM è§¦å‘æŒ‡å—
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:53:29.000Z" title="Wed Jan 07 2026 00:53:29 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/af403cf97e64497a861c8f117ad940fa~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=iVqRESp6oHre3Kc6SSO2SSfFMoM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h2 data-id="heading-0">â˜”ï¸ å¼•å­</h2>
<p>åœ¨èµ›åšéƒ½å¸‚â€œæ–°ç¡…è°·â€ï¼ˆNeo-Silicon Valleyï¼‰çš„ç¬¬ 1024 å±‚åœ°ä¸‹å®¤é‡Œï¼Œèµ„æ·± iOS èµé‡‘çŒäººâ€”â€”è€æï¼ˆOld Liï¼‰ï¼Œæ­£ç›¯ç€å…¨æ¯å±å¹•ä¸Šä¸€è¡Œè¡Œçº¢è‰²çš„æŠ¥é”™ä»£ç å‘æ„ã€‚ä»–å˜´é‡Œå¼ç€ä¸€æ ¹æ—©å·²ç†„ç­çš„åˆæˆç”µå­çƒŸï¼Œçœ‰å¤´çš±å¾—èƒ½å¤¹æ­»ä¸€åªçº³ç±³è‹è‡ã€‚</p>
<p>æ—è¾¹æ¼‚æµ®ç€çš„ AI åŠ©æ‰‹â€œå°ç™½â€å‘å‡ºäº†æœºæ¢°çš„åˆæˆéŸ³ï¼šâ€œè­¦æŠ¥ï¼Œå†…å­˜æº¢å‡ºæµ‹è¯•å¤±è´¥ã€‚ç›®æ ‡ App ä¾ç„¶åƒä¸ªèµ–çš®ä¸€æ ·æ´»ç€ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0610212668dc490897e5304262c7824f~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=ukDK4qJGBwAHcDyeZvUMISq26%2Fk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è€æå¹äº†å£æ°”ï¼šâ€œè¿™å¹´å¤´çš„ Appï¼Œä¸€ä¸ªä¸ªéƒ½ç»ƒæˆäº†â€˜é‡‘åˆšä¸åä¹‹èº«â€™ã€‚æˆ‘æƒ³æµ‹ä¸€ä¸‹åå°ä¸Šä¼ åŠŸèƒ½åœ¨**ä½å†…å­˜ï¼ˆLow RAMï¼‰**æƒ…å†µä¸‹çš„è¡¨ç°ï¼Œç»“æœè¿™ç ´æ‰‹æœºå†…å­˜å¤§å¾—åƒæµ·ä¸€æ ·ï¼Œæ€ä¹ˆéƒ½å¡«ä¸æ»¡ã€‚â€</p>
<p>â€œè€æ¿ï¼Œç›´æ¥åœ¨ <strong>App Switcher</strong>ï¼ˆå¤šä»»åŠ¡åˆ‡æ¢å™¨ï¼‰é‡ŒæŠŠå®ƒåˆ’æ‰ä¸å°±è¡Œäº†ï¼Ÿâ€å°ç™½å¤©çœŸåœ°é—®é“ã€‚</p>
<p>**åœ¨æœ¬ç¯‡åšæ–‡ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š
**</p>
<ul>
<li>â˜”ï¸ å¼•å­</li>
<li>ğŸ•µï¸â€â™‚ï¸ ç¬¬ä¸€ç« ï¼šçœŸæ­»è¿˜æ˜¯å‡æ­»ï¼Ÿè¿™æ˜¯ä¸€ä¸ªé—®é¢˜</li>
<li>ğŸ”® ç¬¬äºŒç« ï¼šå¤±ä¼ çš„â€œæ¸…å†…å­˜å¤§æ³•â€</li>
<li>ğŸ› ï¸ æ­¥éª¤ä¸€ï¼šå¬å”¤â€œå‡è‚¢â€ï¼ˆAssistive Touchï¼‰</li>
<li>ğŸ§¨ æ­¥éª¤äºŒï¼šå‡†å¤‡â€œå…³æœºä»ªå¼â€</li>
<li>ğŸ©¸ æ­¥éª¤ä¸‰ï¼šè‡´å‘½ä¸€å‡»ï¼ˆThe Purgeï¼‰</li>
<li>ğŸ§Ÿâ€â™‚ï¸ ç¬¬ä¸‰ç« ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™ç§â€œå‡æ­»â€ï¼Ÿ</li>
<li>âš–ï¸ ç¬¬å››ç« ï¼šæŠ€æœ¯éªŒå°¸â€”â€”â€œè¢«æ€â€ä¸â€œè‡ªæ€â€çš„åŒºåˆ«</li>
<li>ğŸ¬ ç»ˆç« ï¼šæ·±è—åŠŸä¸å</li>
<li/>
</ul>
<p>è€æå†·ç¬‘ä¸€å£°ï¼Œæ•²äº†ä¸€ä¸‹å°ç™½çš„é‡‘å±å¤–å£³ï¼šâ€œå›¾æ ·å›¾æ£®ç ´ï¼æ‰‹æ»‘æ€æ‰é‚£æ˜¯â€˜æ–©ç«‹å†³â€™ï¼Œç³»ç»Ÿå› å†…å­˜ä¸è¶³æ€æ‰é‚£æ˜¯â€˜è‡ªç„¶æ­»äº¡â€™ã€‚å¯¹äºåå°ä»»åŠ¡æ¥è¯´ï¼Œè¿™åŒºåˆ«å¯å¤§äº†å»äº†ã€‚è¦æƒ³éª—è¿‡æ­»ç¥ï¼Œæˆ‘ä»¬å¾—ç”¨ç‚¹â€˜é˜´æ‹›â€™ã€‚â€</p>
<p>è€æä»ç§¯ç°çš„æ¡£æ¡ˆè¢‹é‡Œæå‡ºä¸€ä»½ç»å¯†æ–‡æ¡£â€”â€”ã€ŠiOS å†…å­˜æ¸…ç©ºæŒ‡å—ã€‹ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f9936e9e816940fa907d01699e6e8a78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=yIQAKv9lllBgNeyNS9NJJfc9DLQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">ğŸ•µï¸â€â™‚ï¸ ç¬¬ä¸€ç« ï¼šçœŸæ­»è¿˜æ˜¯å‡æ­»ï¼Ÿè¿™æ˜¯ä¸€ä¸ªé—®é¢˜</h2>
<p>æœ€è¿‘è€ææ¥äº†ä¸ªå¤§æ´»å„¿ï¼Œè¦ä¸ºä¸€ä¸ª App å¼€å‘ <strong>Background Uploading</strong>ï¼ˆåå°ä¸Šä¼ ï¼‰åŠŸèƒ½ã€‚è¿™æ´»å„¿æœ€æ£˜æ‰‹çš„åœ°æ–¹åœ¨äºï¼šä½ å¾—ç¡®ä¿å½“ç³»ç»Ÿå› ä¸º <strong>RAM constraints</strong>ï¼ˆå†…å­˜é™åˆ¶ï¼‰æˆ–å…¶ä»–ä¸å¯æŠ—åŠ›æŠŠä½ çš„ App æŒ‚èµ·ç”šè‡³æ€æ‰æ—¶ï¼Œè¿™ä¸Šä¼ ä»»åŠ¡è¿˜å¾—èƒ½åƒâ€œå€Ÿå°¸è¿˜é­‚â€ä¸€æ ·ç»§ç»­è·‘ã€‚</p>
<p>è¦æƒ³æµ‹è¯•è¿™ä¸ªåœºæ™¯ï¼Œæœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯æ¸…ç©ºè®¾å¤‡çš„ <strong>RAM memory</strong>ã€‚ä½†è¿™å¯ä¸åƒåœ¨ç”µè„‘ä¸Šæ‹”æ‰ç”µæºé‚£ä¹ˆç®€å•ã€‚</p>
<p>å°ç™½ä¸è§£ï¼šâ€œä¸å°±æ˜¯ä¸Šåˆ’æ€è¿›ç¨‹å—ï¼Ÿâ€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6b385b5e1bf04387b79318846098b284~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=lu6rnEU2MKo4eHcYSlLKtFBJWDM%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œé”™ï¼â€è€æä¸¥è‚ƒåœ°è§£é‡Šé“ï¼Œâ€œæ‰“å¼€ <strong>Task Switcher</strong> ç„¶åå¼ºè¡Œå…³é—­ Appï¼Œè¿™åœ¨ç³»ç»Ÿçœ¼é‡Œå±äºâ€˜ç”¨æˆ·ä¸»åŠ¨ç»ˆæ­¢â€™ã€‚è¿™å°±åƒæ˜¯ä¸ä»…æ€äº†äººï¼Œè¿˜é¡ºæ‰‹æŠŠå¤æ´»ç‚¹ç»™æ‹†äº†ã€‚è€Œæˆ‘ä»¬éœ€è¦çš„æ˜¯æ¨¡æ‹Ÿ App è¢«ç³»ç»Ÿâ€˜æŒ¤â€™å‡ºå†…å­˜ï¼Œè¿™æ‰æ˜¯çœŸæ­£çš„<strong>Forced out of memory</strong>ã€‚â€</p>
<p>ç®€è€Œè¨€ä¹‹ï¼Œæˆ‘ä»¬éœ€è¦åˆ¶é€ ä¸€åœºå®Œç¾çš„â€œæ„å¤–â€ï¼Œè®© App ä»¥ä¸ºè‡ªå·±åªæ˜¯å› ä¸ºå¤ªèƒ–è¢«ç³»ç»Ÿè¸¢äº†å‡ºå»ï¼Œè€Œä¸æ˜¯è¢«ç”¨æˆ·å«Œå¼ƒã€‚</p>
<hr/>
<h2 data-id="heading-2">ğŸ”® ç¬¬äºŒç« ï¼šå¤±ä¼ çš„â€œæ¸…å†…å­˜å¤§æ³•â€</h2>
<p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨ iOS çš„åº•å±‚ä»£ç æ·±å¤„ï¼Œè—ç€ä¸€ä¸ªä¸ä¸ºäººçŸ¥çš„â€œç§˜æŠ€â€ã€‚è¿™æ‹›èƒ½åƒç­éœ¸æ‰“å“æŒ‡ä¸€æ ·ï¼Œç¬é—´æ¸…ç©º iOS è®¾å¤‡çš„ <strong>RAM memory</strong>ï¼Œè®©ä½ çš„ App äº«å—åˆ°å’ŒçœŸå®å†…å­˜ä¸è¶³æ—¶ä¸€æ ·çš„â€œæš´æ¯™â€å¾…é‡ã€‚</p>
<p>è€ææŒ‰ç­äº†çƒŸå¤´ï¼Œå¼€å§‹å‘å°ç™½ä¼ æˆè¿™å¥—â€œè¿˜æˆ‘æ¼‚æ¼‚æ‹³â€ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/4925863a24004016bb9eeea03c2337d0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=IjwbnfgqKCfoZRoFLBnLiT7YcCs%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">ğŸ› ï¸ æ­¥éª¤ä¸€ï¼šå¬å”¤â€œå‡è‚¢â€ï¼ˆAssistive Touchï¼‰</h3>
<p>å¦‚æœä½ çš„æµ‹è¯•æœºæ˜¯å…¨é¢å±ï¼ˆæ²¡æœ‰ Home é”®ï¼‰ï¼Œä½ å¾—å…ˆæä¸ªè™šæ‹Ÿçš„ã€‚
â€œå» <strong>Settings â†’ Accessibility â†’ Touch â†’ Enable Assistive Touch</strong>ã€‚â€è€ææŒ‡æŒ¥é“ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6bb7e54fcaec4db38bc62d4d5f0d0d7b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=8wccs6KLnzXE9r6RMJ0OhgJ%2FJlk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>å±å¹•ä¸Šç¬é—´æµ®ç°å‡ºä¸€ä¸ªåŠé€æ˜çš„å°åœ†çƒã€‚
â€œè¿™å°±æ˜¯é€šå¾€å†…å­˜åœ°ç‹±çš„é’¥åŒ™ã€‚â€</p>
<blockquote>
<p><strong>æŠ€æœ¯æ‰¹æ³¨ï¼š</strong> å¯¹äºæœ‰å®ä½“ Home é”®çš„è€å¤è‘£è®¾å¤‡ï¼Œè¿™ä¸€æ­¥å¯ä»¥è·³è¿‡ã€‚</p>
</blockquote>
<h3 data-id="heading-4">ğŸ§¨ æ­¥éª¤äºŒï¼šå‡†å¤‡â€œå…³æœºä»ªå¼â€</h3>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/561164208ea14f86af6398fbbe75ab93~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=EmjKsWCZ%2FKIdIqJ7a5%2Bkajzqw9c%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è¿™ä¸€æ­¥éœ€è¦ä¸€ç‚¹æ‰‹é€Ÿï¼Œå°±åƒæ˜¯åœ¨ç©æ ¼æ–—æ¸¸æˆæ“å¤§æ‹›ã€‚
â€œå¬å¥½äº†ï¼š<strong>Volume Up</strong>ï¼ˆéŸ³é‡åŠ ï¼‰ï¼Œ<strong>Volume Down</strong>ï¼ˆéŸ³é‡å‡ï¼‰ï¼Œç„¶åæ­»æ­»æŒ‰ä½ <strong>Power Button</strong>ï¼ˆç”µæºé”®ï¼‰ï¼â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bf2868650808493c85a4f10a8620f728~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=dkA98u1vaIzYtNa4ABucz5tlHJw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è€æçš„æ‰‹æŒ‡åœ¨æœºèº«ä¸Šé£èˆï¼Œç›´åˆ°å±å¹•ä¸Šå‡ºç°äº†é‚£ä¸ªç†Ÿæ‚‰çš„â€œæ»‘åŠ¨æ¥å…³æœºâ€ç•Œé¢ã€‚</p>
<h3 data-id="heading-5">ğŸ©¸ æ­¥éª¤ä¸‰ï¼šè‡´å‘½ä¸€å‡»ï¼ˆThe Purgeï¼‰</h3>
<p>â€œå°±æ˜¯ç°åœ¨ï¼â€è€æå¤§å–ä¸€å£°ã€‚</p>
<p>åœ¨å…³æœºç•Œé¢å‡ºç°åï¼Œåƒä¸‡åˆ«æ»‘é‚£ä¸ªå…³æœºæ¡ã€‚ç‚¹å‡»åˆšæ‰å¬å”¤å‡ºæ¥çš„ <strong>Assistive Touch</strong> å°åœ†çƒï¼Œæ‰¾åˆ°é‡Œé¢çš„ <strong>Home Button</strong>ï¼ˆä¸»å±å¹•æŒ‰é’®ï¼‰ï¼Œç„¶åâ€”â€”<strong>é•¿æŒ‰å®ƒ</strong>ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3d71fc1adf84f4c85039f4fe6e1e1b7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=Sh%2F5qClXcSw%2BZLx0%2FQWfbLkLnYw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€ç›´æŒ‰ç€ï¼Œç›´åˆ°å±å¹•ä¸€é—ªï¼Œæˆ–è€…çªç„¶è·³å›è¾“å…¥å¯†ç çš„ç•Œé¢ã€‚</p>
<p>â€œæ­å–œä½ ï¼Œâ€è€ææ“¦äº†æ“¦é¢å¤´çš„æ±—ï¼Œâ€œä½ åˆšåˆšæˆåŠŸæŠŠè¿™å°è®¾å¤‡çš„ <strong>RAM memory</strong> æ´—åŠ«ä¸€ç©ºã€‚ç°åœ¨ï¼Œåå°é‚£äº›è‹Ÿå»¶æ®‹å–˜çš„ App å·²ç»è¢«ç³»ç»Ÿæ— æƒ…åœ°è¸¢å‡ºäº†å†…å­˜ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/982fcc74e33f4e80a3462671d0054365~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=1nWBocR3BN1hveFDUV3ofYJ8zHc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-6">ğŸ§Ÿâ€â™‚ï¸ ç¬¬ä¸‰ç« ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦è¿™ç§â€œå‡æ­»â€ï¼Ÿ</h2>
<p>å°ç™½çœ‹ç€å±å¹•ä¸Šè¢«æ¸…ç†å¾—å¹²å¹²å‡€å‡€çš„åå°ï¼Œæ•°æ®æµç»ˆäºå¼€å§‹æ­£å¸¸æ³¢åŠ¨äº†ã€‚</p>
<p>â€œè¿™å°±å¥½æ¯”æ¼”ä¹ ï¼Œâ€è€æè§£é‡Šé“ï¼Œâ€œå½“æˆ‘ä»¬åœ¨å¼€å‘é‚£äº›ä¾èµ–äº <strong>Background Resuming</strong>ï¼ˆåå°æ¢å¤ï¼‰çš„åŠŸèƒ½æ—¶â€”â€”æ¯”å¦‚åå°ä¸Šä¼ ã€ä¸‹è½½ï¼Œæˆ–è€…å®šä½æœåŠ¡â€”â€”æ¨¡æ‹Ÿ <strong>Out of Memory</strong> åœºæ™¯ç®€ç›´æ˜¯æ•‘å‘½ç¨»è‰ã€‚â€</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/eff95a0584484197a194067fb3dc444b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=3QDPtvyzAoRJ9kJC2NXk4EGWX9w%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æœ€è®©è€æçˆ½çš„ä¸€ç‚¹æ˜¯ï¼Œè¿™ä¸ªæ“ä½œå®Œå…¨<strong>è„±ç¦»äº† Xcode</strong>ã€‚
â€œä»¥å‰è¿˜è¦è¿ç€çº¿çœ‹ Debuggerï¼Œç°åœ¨æˆ‘å¯ä»¥æŠŠæ‰‹æœºæ‰”ç»™éš”å£ QA éƒ¨é—¨é‚£ä¸ªåªä¼šåƒè–¯ç‰‡çš„æµ‹è¯•å‘˜ï¼Œå‘Šè¯‰ä»–ï¼šâ€˜æŒ‰è¿™ä¸ªç§˜ç±æ“ä½œï¼Œå¦‚æœä¸Šä¼ æ–­äº†ï¼Œå°±æ˜¯ä½ ä»¬çš„é—®é¢˜ï¼Œå¦‚æœæ²¡æ–­ï¼Œå°±æ˜¯æˆ‘çš„åŠŸåŠ³ã€‚â€™â€</p>
<hr/>
<h2 data-id="heading-7">âš–ï¸ ç¬¬å››ç« ï¼šæŠ€æœ¯éªŒå°¸â€”â€”â€œè¢«æ€â€ä¸â€œè‡ªæ€â€çš„åŒºåˆ«</h2>
<p>ä¸ºäº†é˜²æ­¢å°ç™½ä»¥åå‡ºå»ä¹±è¯´ï¼Œè€æå†³å®šå†æ·±å…¥ç§‘æ™®ä¸€ä¸‹å…¶ä¸­çš„<strong>Hardcore</strong>åŸç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f3dc9934860f4229827d6aa5cf2069ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=fofwSX0wU5TNT0MFq5TotLU7i%2Bo%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>ä¸€ä¸ªè¢« <strong>Forced out of RAM</strong> çš„ Appï¼Œåœ¨ç”¨æˆ·çœ¼é‡Œå¹¶æ²¡æœ‰å®Œå…¨æ­»é€ã€‚å®ƒä¾ç„¶ä¼šå‡ºç°åœ¨ <strong>App Switcher</strong> é‡Œï¼Œå°±åƒä¸ªæ¤ç‰©äººã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä»»ä½•å·²ç»æ³¨å†Œçš„ <strong>Background Processes</strong>ï¼ˆåå°è¿›ç¨‹ï¼Œæ¯”å¦‚ <code>NSURLSession</code> çš„åå°ä»»åŠ¡ï¼‰ä¾ç„¶åœ¨ç³»ç»Ÿçš„ç›‘ç®¡ä¸‹ç»§ç»­è¿è¡Œã€‚</p>
<ul>
<li><strong>æ­£å¸¸æ­»äº¡ï¼ˆLow Memoryï¼‰ï¼š</strong> å½“ç”¨æˆ·å¼€äº†ä¸ªåƒå†…å­˜çš„å¤§æ¸¸æˆï¼Œæˆ–è€…ä½ çš„ App å¾ˆä¹…æ²¡ç”¨äº†ï¼Œç³»ç»Ÿä¸ºäº†è…¾åœ°å„¿ï¼Œä¼šæŠŠä½ çš„ App ä»å†…å­˜é‡Œè¸¢å‡ºå»ã€‚å½“ç”¨æˆ·å†æ¬¡ç‚¹å‡»å›¾æ ‡æ—¶ï¼ŒApp ä¼šç»å†ä¸€æ¬¡ <strong>Fresh Launch</strong>ï¼ˆå†·å¯åŠ¨ï¼‰ï¼Œä½†ç³»ç»Ÿä¼šç»™æœºä¼šè®©å®ƒå¤„ç†ä¹‹å‰æ²¡å¹²å®Œçš„åå°æ´»å„¿ã€‚</li>
<li><strong>éæ­£å¸¸æ­»äº¡ï¼ˆForce Closeï¼‰ï¼š</strong> å½“ä½ åœ¨å¤šä»»åŠ¡ç•Œé¢ä¸Šæ»‘æ€æ‰ App æ—¶ï¼ŒiOS ä¼šåˆ¤å®šï¼šâ€œè¿™åˆæ°‘ä¸æƒ³è®©è¿™ä¸ª App æ´»äº†ã€‚â€äºæ˜¯ï¼Œç³»ç»Ÿä¼šå¤§ä¹‰ç­äº²ï¼Œ<strong>ç¦æ­¢</strong>è¯¥ App ç»§ç»­åœ¨åå°æå°åŠ¨ä½œã€‚æ‰€æœ‰çš„ä¸Šä¼ ã€ä¸‹è½½ä»»åŠ¡ä¼šè¢«ç«‹å³ <strong>Cancelled</strong>ï¼ˆå–æ¶ˆï¼‰ã€‚</li>
</ul>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/3126cb43e36449f480ce58e1ac606895~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=aWfzie2X8H6fPTruTj2KKnpNlBA%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>æ‰€ä»¥ï¼Œåªæœ‰ç”¨è€æåˆšæ‰é‚£æ‹›â€œæ¸…å†…å­˜å¤§æ³•â€ï¼Œæ‰èƒ½çœŸå®æ¨¡æ‹Ÿç”¨æˆ·åœ¨åˆ·æŠ–éŸ³ã€ç©åŸç¥å¯¼è‡´å†…å­˜ä¸è¶³æ—¶ï¼Œä½ çš„ App åœ¨åå°æ˜¯å¦è¿˜èƒ½åšå¼ºåœ°æŠŠæ–‡ä»¶ä¼ å®Œã€‚</p>
<hr/>
<h2 data-id="heading-8">ğŸ¬ ç»ˆç« ï¼šæ·±è—åŠŸä¸å</h2>
<p>æµ‹è¯•é€šè¿‡ï¼Œå…¨æ¯å±å¹•ä¸Šæ˜¾ç¤ºå‡ºäº†ä»¤äººå®‰å¿ƒçš„ç»¿è‰² <strong>SUCCESS</strong> å­—æ ·ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e305d87275d468f953a828ed5841b5b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=pawIO2RnGIOOFIbIoYsH9G27Hrc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è€æç«™èµ·èº«ï¼Œä¼¸äº†ä¸ªæ‡’è…°ï¼Œéª¨å¤´å‘å‡ºå™¼é‡Œå•ªå•¦çš„å“å£°ã€‚â€œè¡Œäº†ï¼Œå°ç™½ï¼Œæ‰“åŒ…å‘å¸ƒã€‚ä»Šæ™šä¸ç”¨åŠ ç­ä¿® Bug äº†ã€‚â€</p>
<p>ä»–çœ‹äº†ä¸€çœ¼çª—å¤–æ–°ç¡…è°·é‚£ç»šçƒ‚è€Œåˆå†°å†·çš„éœ“è™¹ç¯ã€‚åœ¨è¿™ä¸ªå……æ»¡ Bug å’Œ Patch çš„ä¸–ç•Œé‡Œï¼Œæœ‰æ—¶å€™ï¼Œä½ å¿…é¡»å­¦ä¼šå¦‚ä½•æ­£ç¡®åœ°â€œæ€æ­»â€ä½ çš„ Appï¼Œæ‰èƒ½è®©å®ƒæ›´å¥½åœ°æ´»ä¸‹å»ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f7b0131571924099a8887923a305df00~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=VXmpzX0LmZFSAFLmjM9y4LcWTq8%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œè®°ä½ï¼Œâ€è€æèµ°å‡ºé—¨å£å‰å›å¤´å¯¹å°ç™½è¯´ï¼Œâ€œ<strong>æ€è¿›ç¨‹ä¸æ˜¯ç›®çš„ï¼Œç›®çš„æ˜¯ä¸ºäº†éªŒè¯å®ƒæœ‰æ²¡æœ‰é‡ç”Ÿçš„å‹‡æ°”ã€‚</strong>â€</p>
<p>å¤§é—¨ç¼“ç¼“å…³é—­ï¼Œåªç•™ä¸‹é‚£ä¸ªæ‚¬æµ®çš„ Assistive Touch æŒ‰é’®ï¼Œåœ¨é»‘æš—ä¸­å¾®å¾®é—ªçƒï¼Œä»¿ä½›ä¸€åªçª¥æ¢å†…å­˜æ·±å¤„çš„çœ¼ç›ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/33a0f591596f4c9da29657a625ebd295~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352008&amp;x-signature=tSvQOwDySipTIugcPoK%2FfQENSxU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…­ç¯‡ï¼‰ï¼šé˜¿æœ±çš„â€œæ˜“å®¹æœ¯â€ä¸é˜¿ç´«çš„â€œæ¯’è¯æµ‹è¯•â€]]></title>    <link>https://juejin.cn/post/7592130164965556262</link>    <guid>https://juejin.cn/post/7592130164965556262</guid>    <pubDate>2026-01-07T00:57:43.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592130164965556262" data-draft-id="7592079304924758026" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…­ç¯‡ï¼‰ï¼šé˜¿æœ±çš„â€œæ˜“å®¹æœ¯â€ä¸é˜¿ç´«çš„â€œæ¯’è¯æµ‹è¯•â€"/> <meta itemprop="keywords" content="Swift,ç¼–ç¨‹è¯­è¨€,Apple"/> <meta itemprop="datePublished" content="2026-01-07T00:57:43.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å¤§ç†ŠçŒ«ä¾¯ä½©"/> <meta itemprop="url" content="https://juejin.cn/user/4292907536222152"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Swift 6.2 åˆ—ä¼ ï¼ˆç¬¬åå…­ç¯‡ï¼‰ï¼šé˜¿æœ±çš„â€œæ˜“å®¹æœ¯â€ä¸é˜¿ç´«çš„â€œæ¯’è¯æµ‹è¯•â€
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4292907536222152/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å¤§ç†ŠçŒ«ä¾¯ä½©
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:57:43.000Z" title="Wed Jan 07 2026 00:57:43 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1aa5266729241b8adc56e6824c7cfad~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=tWbGyParC7Eh%2Bpf9uBYcL04DfwQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<blockquote>
<p><strong>æ‘˜è¦</strong>ï¼šåœ¨ Swift 6.2 çš„å¹¶å‘æ±Ÿæ¹–ä¸­ï¼Œæˆ‘ä»¬è¿æ¥äº†ä¸¤é¡¹æˆªç„¶ä¸åŒçš„æ–°åŠŸèƒ½ï¼šä¸€é¡¹æ˜¯å…³äº<strong>æåº¦ç²¾å¦™çš„æ–‡æœ¬ä¾¦æŸ¥æœ¯</strong>ï¼ˆSE-0448 æ­£åˆ™è¡¨è¾¾å¼å‘åæŸ¥æ‰¾æ–­è¨€ï¼‰ï¼Œå¦ä¸€é¡¹åˆ™æ˜¯å…³äº<strong>é¢å¯¹åº”ç”¨å´©æºƒæ—¶çš„ä»å®¹ä¸è¿«</strong>ï¼ˆST-0008 é€€å‡ºæµ‹è¯•ï¼‰ã€‚å¤§ç†ŠçŒ«ä¾¯ä½©å°†ä¸é˜¿æœ±ã€é˜¿ç´«è¿™å¯¹å§å¦¹èŠ±ï¼Œå…±åŒæ¼”ç»è¿™å†°ç«ä¸¤é‡å¤©çš„æŠ€æœ¯å¥¥ç§˜ã€‚</p>
</blockquote>
<h2 data-id="heading-0">0ï¸âƒ£ ğŸ¼ åºç« ï¼šé›é—¨å…³å‰çš„æŠ€æœ¯éš¾é¢˜</h2>
<p>é›é—¨å…³ï¼Œæ•°æ®æµä¸ç°å®äº¤é”™çš„è™šæ‹Ÿæˆ˜åœºã€‚</p>
<p>å¤§ç†ŠçŒ«ä¾¯ä½©æ­£å¯¹ç€ä¸€å—å…¨æ¯å±å¹•å‘å‘†ï¼Œå±å¹•ä¸Šæ˜¯æ— æ•°æ¡äº¤æ˜“è®°å½•ï¼Œä»–æ­£åŠªåŠ›å¯»æ‰¾ä»–è—åŒ¿çš„ç«¹ç¬‹åŸºé‡‘ã€‚ä»–ç”¨æ‰‹æ‘¸äº†æ‘¸è‡ªå·±çš„å¤´é¡¶ï¼Œç¡®å®šäº†<strong>å¤´ç»å¯¹æ²¡æœ‰ç§ƒ</strong>ä¹‹åï¼Œæ‰ç¨å¾®å¿ƒå®‰ã€‚</p>
<p>ä»–èº«æ—ç«™ç€ä¸€ä½æ¸©æŸ”å©‰çº¦çš„ç»¿è¡£å¥³å­ï¼Œæ­£æ˜¯<strong>é˜¿æœ±</strong>ã€‚é˜¿æœ±ä»¥<strong>æ˜“å®¹æœ¯</strong>é—»åæ±Ÿæ¹–ï¼Œæ“…é•¿åœ¨çº·ä¹±çš„æ–‡æœ¬ä¸­å¯»æ‰¾å’Œä¼ªè£…ä¿¡æ¯ï¼Œå¥¹çš„å¿ƒæ„¿æ˜¯å¤©ä¸‹å¤ªå¹³ï¼Œæ€§æ ¼å®½åšå–„è‰¯ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/f1e3dc8c01a44f018ade0303fb610333~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=VNhOQu0GCKE%2BgpAxUG%2BakqnV28Q%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œä¾¯å¤§å“¥ï¼Œâ€é˜¿æœ±æŒ‡ç€ä¸€å †äº¤æ˜“è®°å½•è¯´ï¼Œâ€œæˆ‘æƒ³æ‰¾åˆ°æ‰€æœ‰ä»¥ <strong>é‡‘å¸ç¬¦å· $</strong> ç»“ç®—çš„ä»·æ ¼ï¼Œä½†æˆ‘åªæƒ³åŒ¹é…å‡ºåé¢çš„æ•°å­—ï¼Œè€Œä¸è¦æŠŠé‚£ä¸ª <code>$</code>ç¬¦å·ä¹ŸåŒ¹é…è¿›å»ã€‚æˆ‘è¦ç”¨è¿™äº›æ•°å­—å»ç»“ç®—è´¦å•ï¼Œç¬¦å·ç•™ç€ä¸‹æ¬¡æ˜“å®¹ç”¨ã€‚â€</p>
<p><strong>åœ¨æœ¬æ¬¡å¤§æ¨¡å‹ä¸­ï¼Œæ‚¨å°†å­¦åˆ°å¦‚ä¸‹å†…å®¹ï¼š</strong></p>
<ul>
<li>0ï¸âƒ£ ğŸ¼ åºç« ï¼šé›é—¨å…³å‰çš„æŠ€æœ¯éš¾é¢˜</li>
<li>1ï¸âƒ£ ğŸ” é˜¿æœ±çš„æ˜“å®¹æœ¯ï¼šRegex lookbehind assertions</li>
<li>2ï¸âƒ£ ğŸ§ª é˜¿ç´«çš„æ¯’è¯æµ‹è¯•ï¼šExit Tests çš„â€œç½®ä¹‹æ­»åœ°â€ (ST-0008)
<ul>
<li>#expect(processExitsWith:) çš„å®‰å…¨ç»“ç•Œ</li>
</ul>
</li>
<li>3ï¸âƒ£ ğŸ å°¾å£°ï¼šå´©æºƒç°åœºçš„â€œé—ç‰©â€ä¸ä¸‹ä¸€ç« çš„ä¼ç¬”</li>
</ul>
<p>ä¾¯ä½©ä¸ºéš¾åœ°æŒ äº†æŒ å¤´ï¼šâ€œä»¥å‰çš„ <strong>Regexï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</strong>ï¼Œè¦ä¹ˆå°±å…¨éƒ¨åŒ¹é…è¿›å»ï¼Œè¦ä¹ˆå°±å¾—ç”¨å¤æ‚çš„æ•è·ç»„å†åˆ†ç¦»ã€‚è¦æƒ³å®ç°â€˜<strong>åªçœ‹å‰å› ï¼Œä¸å–å‰å› </strong>â€™ï¼Œç®€ç›´éš¾å¦‚ç™»å¤©å•Šï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6c3d817468384a6a87c56194c7096a7a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=ZEqHExcRV52pXqe%2FYeG8EF8S4XU%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<hr/>
<h2 data-id="heading-1">1ï¸âƒ£ ğŸ” é˜¿æœ±çš„æ˜“å®¹æœ¯ï¼šRegex lookbehind assertions</h2>
<p>é˜¿æœ±çš„é—®é¢˜ï¼Œæ­£æ˜¯ <strong>SE-0448</strong> æ‰€è¦è§£å†³çš„ï¼š<strong>å‘åæŸ¥æ‰¾æ–­è¨€ï¼ˆlookbehind assertionsï¼‰</strong>ã€‚</p>
<p>ä¼ ç»Ÿçš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¯ä»¥è½»æ¾åœ°å®ç°â€œå‘å‰çœ‹â€ï¼ˆLookaheadï¼‰ï¼Œä¾‹å¦‚ <code>A(?=B)</code>ï¼ŒåŒ¹é… Aï¼Œä½†å‰ææ˜¯ A åé¢è·Ÿç€ Bã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1313ea505dfe4d9692fcc4e4110b4de3~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=Gi7qgD61kVQVsfmbpvIvW%2FrBYeI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>è€Œç°åœ¨ï¼ŒSwift 6.2 èµ‹äºˆäº†æˆ‘ä»¬ <strong>â€œå‘åçœ‹â€</strong> çš„èƒ½åŠ›ï¼Œå³ <code>(?&lt;=A)B</code>ï¼šåŒ¹é… Bï¼Œä½†å‰ææ˜¯ B å‰é¢ç´§è·Ÿç€ Aã€‚æœ€å…³é”®çš„æ˜¯ï¼Œ<strong>Aï¼ˆå‰ç½®æ¡ä»¶ï¼‰ä¸ä¼šè¢«çº³å…¥æœ€ç»ˆçš„åŒ¹é…ç»“æœä¸­ã€‚</strong></p>
<p>ä¾¯ä½©æ‹¿èµ·ä»£ç å·è½´ï¼Œä¸ºé˜¿æœ±æ¼”ç¤ºäº†è¿™æ‹›â€œåº–ä¸è§£ç‰›â€èˆ¬çš„ç»æŠ€ï¼š</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">let</span> string <span class="hljs-operator">=</span> <span class="hljs-string">"Buying a jacket costs $100, and buying shoes costs $59.99."</span>

<span class="hljs-comment">// (?&lt;=\$): å‘åæŸ¥æ‰¾æ–­è¨€ï¼Œç¡®è®¤å½“å‰ä½ç½®å‰é¢ç´§è·Ÿç€ä¸€ä¸ª $ ç¬¦å·ã€‚</span>
<span class="hljs-comment">// \d+     : åŒ¹é…è‡³å°‘ä¸€ä¸ªæ•°å­—ï¼ˆä»·æ ¼çš„æ•´æ•°éƒ¨åˆ†ï¼‰ã€‚</span>
<span class="hljs-comment">// (?:\.\d{2})?: åŒ¹é…å¯é€‰çš„å°æ•°ç‚¹å’Œå°æ•°éƒ¨åˆ†ï¼ˆ?: æ˜¯éæ•è·ç»„ï¼‰ã€‚</span>
<span class="hljs-keyword">let</span> regex <span class="hljs-operator">=</span> <span class="hljs-operator">/</span>(<span class="hljs-operator">?&lt;=</span>\$)\d<span class="hljs-operator">+</span>(<span class="hljs-operator">?</span>:\.\d{<span class="hljs-number">2</span>})<span class="hljs-operator">?/</span> 

<span class="hljs-keyword">for</span> match <span class="hljs-keyword">in</span> string.matches(of: regex) {
    <span class="hljs-comment">// æœ€ç»ˆè¾“å‡ºçš„ match.output åªæœ‰æ•°å­—ï¼Œä¸åŒ…å« $ ç¬¦å·</span>
    <span class="hljs-built_in">print</span>(match.output) 
}

<span class="hljs-comment">// è¾“å‡º:</span>
<span class="hljs-comment">// 100</span>
<span class="hljs-comment">// 59.99</span>
</code></pre>
<p>â€œçœ‹åˆ°äº†å—ï¼Œé˜¿æœ±å§‘å¨˜ï¼Ÿâ€ä¾¯ä½©å¾—æ„æ´‹æ´‹ï¼Œâ€œè¿™ä¸ª <code>(?&lt;=$)</code> å°±æ˜¯ä½ çš„<strong>æ˜“å®¹æœ¯ç²¾é«“</strong>ã€‚å®ƒå¸®ä½ ç¡®è®¤äº†èº«ä»½ï¼ˆå‰é¢å¿…é¡»æ˜¯é‡‘å¸ï¼‰ï¼Œä½†åœ¨åŒ¹é…ç»“æœä¸­ï¼Œå®ƒå´å®Œç¾åœ°æŠŠè‡ªå·±éšè—äº†èµ·æ¥ï¼Œ<strong>ç‰‡å¶ä¸æ²¾èº«ï¼</strong>â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c9bcd92f1d24dd3bb238062c3f61fa2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=UwTjBaferRW%2BIMU%2BY62MYElffRg%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é˜¿æœ±å–œå‡ºæœ›å¤–ï¼šâ€œå¤ªå¦™äº†ï¼è¿™æ ·æˆ‘å°±å¯ä»¥ç²¾å‡†åœ°æå–æ•°æ®ï¼Œå†ä¹Ÿä¸ç”¨æ‹…å¿ƒå¤šä½™çš„ç¬¦å·æ¥æ£ä¹±äº†ï¼â€</p>
<h2 data-id="heading-2">2ï¸âƒ£ ğŸ§ª é˜¿ç´«çš„æ¯’è¯æµ‹è¯•ï¼šExit Tests çš„â€œç½®ä¹‹æ­»åœ°â€ (ST-0008)</h2>
<p>å°±åœ¨ä¾¯ä½©å’Œé˜¿æœ±æ²‰æµ¸åœ¨æ­£åˆ™è¡¨è¾¾å¼çš„ç²¾å¦™ä¸­æ—¶ï¼Œä¸€é˜µåˆºé¼»çš„ç¡«ç£ºå‘³çªç„¶è¢­æ¥ï¼</p>
<p>å¦ä¸€ä½èº«ç€ç´«è¡£çš„å°‘å¥³ï¼Œ<strong>é˜¿ç´«</strong>ï¼Œä»çƒŸé›¾ä¸­èµ°äº†å‡ºæ¥ã€‚é˜¿ç´«çš„ç‰¹ç‚¹æ˜¯<strong>å¿ƒç‹ æ‰‹è¾£ï¼Œå–œæ¬¢ç”¨æ¯’ï¼Œè€Œä¸”çƒ­è¡·äºæµ‹è¯•â€œæé™â€</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/ecb0dec609de4e0cafc09aa69b61fef7~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=o7kqM7EX1dVIlhi9Sn1o9waRFXw%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œå§å§ï¼Œä½ åœ¨ç©è¿™ä¹ˆå¹¼ç¨šçš„æ¸¸æˆï¼Ÿâ€é˜¿ç´«è½»è”‘ä¸€ç¬‘ï¼Œâ€œæˆ‘çš„ä»»åŠ¡æ‰åˆºæ¿€ã€‚æˆ‘è¦æµ‹è¯•æˆ‘æœ€æ–°çš„**â€˜é¹¤é¡¶çº¢â€™ä»£ç **ï¼Œç¡®ä¿å®ƒèƒ½è®©æ•´ä¸ªåº”ç”¨<strong>å½»åº•å´©æºƒå¹¶é€€å‡º</strong>ï¼â€</p>
<p>ä¾¯ä½©å“å¾—è¿é€€ä¸‰æ­¥ï¼šâ€œä½ è¦æµ‹è¯•å´©æºƒï¼Ÿé˜¿ç´«å§‘å¨˜ï¼Œä½ çŸ¥é“è¿™æ„å‘³ç€ä»€ä¹ˆå—ï¼Ÿåº”ç”¨å´©æºƒï¼Œæµ‹è¯•ç³»ç»Ÿä¹Ÿä¼šè·Ÿç€å´©æºƒå•Šï¼è¿™å«<strong>ä¸€é”…ç«¯</strong>ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/7c5a02f2b0f24868bb2f22e29c8f9b52~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=NV2pv4s57ZIjW9Rij1afrw1Jg%2BI%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é˜¿ç´«çš„æµ‹è¯•ç›®æ ‡ï¼Œæ­£æ˜¯é‚£äº›ä¼šè§¦å‘ <strong><code>precondition()</code></strong> æˆ– <strong><code>fatalError()</code></strong> å¯¼è‡´è¿›ç¨‹é€€å‡ºçš„ä»£ç ã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-keyword">struct</span> <span class="hljs-title class_">Dice</span> {
    <span class="hljs-comment">// æ·éª°å­åŠŸèƒ½</span>
    <span class="hljs-keyword">func</span> <span class="hljs-title function_">roll</span>(<span class="hljs-params">sides</span>: <span class="hljs-type">Int</span>) -&gt; <span class="hljs-type">Int</span> {
        <span class="hljs-comment">// ğŸš¨ å‰ææ¡ä»¶ï¼šéª°å­é¢æ•°å¿…é¡»å¤§äºé›¶ï¼</span>
        <span class="hljs-comment">// å¦‚æœ sides &lt;= 0ï¼Œç¨‹åºå°†ç«‹å³å´©æºƒé€€å‡ºï¼</span>
        <span class="hljs-built_in">precondition</span>(sides <span class="hljs-operator">&gt;</span> <span class="hljs-number">0</span>) 
        <span class="hljs-keyword">return</span> <span class="hljs-type">Int</span>.random(in: <span class="hljs-number">1</span><span class="hljs-operator">...</span>sides)
    }
}
</code></pre>
<p>â€œä»¥å‰ï¼Œæˆ‘ä»¬è¦ä¹ˆä¸èƒ½æµ‹ï¼Œè¦ä¹ˆå°±å¾—ç”¨å„ç§å¥‡æŠ€æ·«å·§æ¥æ•è·è¿™ç§â€˜è‡´å‘½é”™è¯¯â€™ã€‚â€ä¾¯ä½©æ“¦ç€æ±—è¯´ï¼Œâ€œä½†ç°åœ¨ Swift Testing å¸¦æ¥äº† <strong>ST-0008ï¼šExit Tests</strong>ï¼Œè®©æˆ‘ä»¬èƒ½ä¼˜é›…åœ°â€˜<strong>ç½®ä¹‹æ­»åœ°è€Œåç”Ÿ</strong>â€™ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d194f7fe3b384958a4b35e7f38cba9e5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=QdFXzd8ALJ0arP%2B%2FsVHDc12FGLQ%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<h3 data-id="heading-3">#expect(processExitsWith:) çš„å®‰å…¨ç»“ç•Œ</h3>
<p>Swift 6.2 å¼•å…¥äº† <code>#expect(processExitsWith:)</code>ï¼Œå®ƒå°±åƒæ˜¯ä¸€ä¸ªå®‰å…¨ç»“ç•Œï¼Œå…è®¸æˆ‘ä»¬åœ¨<strong>éš”ç¦»çš„å­è¿›ç¨‹</strong>ä¸­æ‰§è¡Œå¯èƒ½å¯¼è‡´å´©æºƒçš„ä»£ç ï¼Œç„¶å<strong>æ•è·å¹¶éªŒè¯</strong>è¿™ä¸ªé€€å‡ºè¡Œä¸ºã€‚</p>
<pre><code class="hljs language-swift" lang="swift"><span class="hljs-meta">@Test</span> <span class="hljs-keyword">func</span> <span class="hljs-title function_">invalidDiceRollsFail</span>() <span class="hljs-keyword">async</span> <span class="hljs-keyword">throws</span> {
    <span class="hljs-keyword">let</span> dice <span class="hljs-operator">=</span> <span class="hljs-type">Dice</span>()

    <span class="hljs-comment">// ğŸ›¡ï¸ å…³é”®ï¼šä½¿ç”¨ #expect åŒ…è£¹ï¼Œå¹¶ç­‰å¾…ç»“æœ</span>
    <span class="hljs-keyword">await</span> #expect(processExitsWith: .failure) {
        <span class="hljs-comment">// åœ¨è¿™é‡Œï¼Œroll(sides: 0) ä¼šå¯¼è‡´éš”ç¦»çš„å­è¿›ç¨‹å´©æºƒé€€å‡º</span>
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">_</span> <span class="hljs-operator">=</span> dice.roll(sides: <span class="hljs-number">0</span>)
    }
    
    <span class="hljs-comment">// å¦‚æœå­è¿›ç¨‹å¦‚æœŸä»¥ .failure çŠ¶æ€é€€å‡ºï¼Œåˆ™æµ‹è¯•é€šè¿‡ã€‚</span>
    <span class="hljs-comment">// å¦‚æœå®ƒæ²¡æœ‰å´©æºƒï¼Œæˆ–è€…å´©æºƒçŠ¶æ€ä¸å¯¹ï¼Œåˆ™æµ‹è¯•å¤±è´¥ã€‚</span>
}
</code></pre>
<blockquote>
<p><strong>ğŸ” å¼‚æ­¥æ‰§è¡Œçš„å…³é”®ï¼š<code>await</code></strong>
æ³¨æ„ï¼Œè¿™é‡Œå¿…é¡»ä½¿ç”¨ <code>await</code>ã€‚è¿™æ˜¯å› ä¸ºåœ¨å¹•åï¼Œæµ‹è¯•æ¡†æ¶å¿…é¡»å¯åŠ¨ä¸€ä¸ª<strong>ä¸“ç”¨çš„ã€ç‹¬ç«‹çš„è¿›ç¨‹</strong>æ¥æ‰§è¡Œå±é™©ä»£ç ã€‚å®ƒä¼šæš‚åœå½“å‰æµ‹è¯•ï¼Œç›´åˆ°å­è¿›ç¨‹è¿è¡Œå®Œæ¯•å¹¶è¿”å›é€€å‡ºçŠ¶æ€ã€‚è¿™æ‰æ˜¯çœŸæ­£çš„<strong>éš”ç¦»æµ‹è¯•</strong>ï¼</p>
</blockquote>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/5618c61e888340beac9c4101dadc0c2c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=VeZTG3MJwy%2B5eI6bXJkDODtZf%2Fc%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é˜¿ç´«æ»¡æ„åœ°æ‹äº†æ‹æ‰‹ï¼šâ€œç°åœ¨æˆ‘çš„æ¯’è¯ï¼ˆä»£ç ï¼‰ç»ˆäºå¯ä»¥åœ¨å®éªŒå®¤ï¼ˆæµ‹è¯•ç¯å¢ƒï¼‰é‡Œå®‰å…¨åœ°çˆ†ç‚¸äº†ï¼æˆ‘ä¸ä»…å¯ä»¥æµ‹è¯•å®ƒä¼šæ­»ï¼ˆ<code>failure</code>ï¼‰ï¼Œè¿˜å¯ä»¥æµ‹è¯•å®ƒæ­»å¾—å¾ˆå®‰è¯¦ï¼ˆ<code>success</code>ï¼‰æˆ–å…¶ä»–é€€å‡ºçŠ¶æ€ã€‚â€</p>
<h2 data-id="heading-4">3ï¸âƒ£ ğŸ å°¾å£°ï¼šå´©æºƒç°åœºçš„â€œé—ç‰©â€ä¸ä¸‹ä¸€ç« çš„ä¼ç¬”</h2>
<p>ä¾¯ä½©æ‘¸äº†æ‘¸è‡ªå·±çš„å¤´å‘ï¼Œç¡®è®¤æ²¡æœ‰è¢«é˜¿ç´«çš„æ¯’æ°”ç†æ‰ï¼Œç„¶åé—®é“ï¼šâ€œé˜¿ç´«å§‘å¨˜ï¼Œä½ è¿™ä¸ªæ¯’è¯æµ‹è¯•è™½ç„¶å‰å®³ï¼Œä½†æ˜¯ä½ æœ‰æ²¡æœ‰æƒ³è¿‡ä¸€ä¸ªé—®é¢˜ï¼Ÿâ€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/783cfa1863224a8781dcda6e10f5eb8e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=jNC%2Fcyf4RGY6Emn%2BfAJvEu8zaK4%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>â€œä»€ä¹ˆé—®é¢˜ï¼Ÿâ€é˜¿ç´«æŒ‘äº†æŒ‘çœ‰ã€‚</p>
<p>â€œå¦‚æœè¿™ä¸ª <code>roll(sides: 0)</code> å´©æºƒäº†ï¼Œä½†å®ƒåœ¨å´©æºƒå‰ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå…³é”®çš„è°ƒè¯•æ—¥å¿—æ–‡ä»¶ï¼Œæˆ–è€…ä¸€ä¸ªè®°å½•äº†ç°åœºæ•°æ®çš„**â€˜é—ç‰©â€™**ï¼Œä½ èƒ½ä¸èƒ½æŠŠè¿™ä¸ªé—ç‰©é™„ç€åˆ°æµ‹è¯•æŠ¥å‘Šé‡Œï¼Ÿâ€</p>
<p>é˜¿ç´«ä¸€æ„£ï¼šâ€œä¸èƒ½ã€‚æµ‹è¯•æŠ¥å‘Šé‡Œåªæ˜¾ç¤ºäº†â€˜<strong>å´©æºƒäº†</strong>â€™è¿™ä¸ªç»“æœï¼Œä½†æˆ‘ä¸çŸ¥é“å´©æºƒå‰éª°å­ï¼ˆç¨‹åºï¼‰åˆ°åº•åœ¨æƒ³ä»€ä¹ˆï¼æˆ‘éœ€è¦é‚£ä¸ªé—ç‰©æ¥åˆ†ææˆ‘çš„æ¯’è¯é…æ–¹ï¼â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d9c8d009d3ee4f5892d757cc8d758296~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=%2BztAWEavkdiFIytHvkSKx7ub1dk%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p>é˜¿æœ±ä¹Ÿé™„å’Œé“ï¼šâ€œæ˜¯å•Šï¼Œä¾¯å¤§å“¥ã€‚å°±åƒæˆ‘æ˜“å®¹æ—¶ï¼Œå¦‚æœå¤±è´¥äº†ï¼Œæˆ‘å¸Œæœ›åœ¨å¤±è´¥çš„è®°å½•æ—è¾¹ï¼Œèƒ½é™„ä¸Šä¸€å¼ å½“æ—¶çš„ç…§ç‰‡ï¼Œè¿™æ ·ä¸‹æ¬¡å°±çŸ¥é“æ˜¯å“ªä¸ªç¯èŠ‚å‡ºäº†é”™ã€‚â€</p>
<p>ä¾¯ä½©å¾®å¾®ä¸€ç¬‘ï¼Œä»æ€€é‡Œæå‡ºäº†ä¸€å¼ å†™ç€ <strong>ST-0009</strong> çš„ç§˜ç±ï¼šâ€œä¸¤ä½å§‘å¨˜ï¼Œä¸å¿…çƒ¦æ¼ã€‚ä¸‹ä¸€ç« ï¼ŒSwift Testing å°±èƒ½å¸®ä½ ä»¬æŠŠè¿™äº›<strong>æ—¥å¿—ã€æ•°æ®å’Œç°åœºæ–‡ä»¶</strong>ï¼Œåƒé™„ç€â€˜éšèº«ç‰©å“â€™ä¸€æ ·ï¼Œç›´æ¥æ†ç»‘åˆ°å¤±è´¥çš„æµ‹è¯•æŠ¥å‘Šä¸Šã€‚è¿™æ‹›å°±å«â€¦â€¦â€</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/263de864bd854f34bdc579cc436832b6~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5aSn54aK54yr5L6v5L2p:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352263&amp;x-signature=Mr7fKh8XXUo%2FpLAwWpATTItNSts%3D" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°" loading="lazy"/></p>
<p><strong>ï¼ˆæ¬²çŸ¥åäº‹å¦‚ä½•ï¼Œä¸”çœ‹ä¸‹å›åˆ†è§£ï¼šSwift Testing: Attachments â€”â€” å¦‚ä½•å°†å´©æºƒç°åœºçš„è¯æ®ï¼ˆæ—¥å¿—ã€æˆªå›¾ã€æ•°æ®æ–‡ä»¶ï¼‰ç›´æ¥é™„ç€åˆ°æµ‹è¯•æŠ¥å‘Šä¸Šï¼Œè®© Bug æ— æ‰€éå½¢ã€‚ï¼‰</strong></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[Linuxå†æ·»ä¸€å‘˜çŒ›å°†ï¼Œæ“ä½œå®Œå…¨ä¸è¾“Windowsï¼]]></title>    <link>https://juejin.cn/post/7592040819818004521</link>    <guid>https://juejin.cn/post/7592040819818004521</guid>    <pubDate>2026-01-07T00:57:47.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592040819818004521" data-draft-id="7592088192516620331" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="Linuxå†æ·»ä¸€å‘˜çŒ›å°†ï¼Œæ“ä½œå®Œå…¨ä¸è¾“Windowsï¼"/> <meta itemprop="keywords" content="å‰ç«¯,åç«¯,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-07T00:57:47.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="CodeSheep"/> <meta itemprop="url" content="https://juejin.cn/user/4371313961738616"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            Linuxå†æ·»ä¸€å‘˜çŒ›å°†ï¼Œæ“ä½œå®Œå…¨ä¸è¾“Windowsï¼
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/4371313961738616/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    CodeSheep
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T00:57:47.000Z" title="Wed Jan 07 2026 00:57:47 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»6åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>æåˆ° <strong>Zorin OS</strong> è¿™ä¸ªæ“ä½œç³»ç»Ÿï¼Œå¯èƒ½ä¸å°‘å–œæ¬¢æŠ˜è…¾ Linux ç³»ç»Ÿçš„å°ä¼™ä¼´ä¹‹å‰æœ‰å°è¯•è¿‡ã€‚</p>
<p>ä½œä¸ºä¸€æ¬¾ä»¥ UI äº¤äº’å’Œé¢œå€¼è‘—ç§°çš„ Linux å‘è¡Œç‰ˆç³»ç»Ÿï¼ŒZorin OS ä¹Ÿæ›¾ä¸€åº¦è¢«å¹¿å¤§çˆ±å¥½è€…ä»¬ç§°ä¸º <strong>Windows ç³»ç»Ÿçš„å¼€æºæ›¿ä»£æ–¹æ¡ˆ</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/c23f3d4f0fe54333b903d1a8feefe5bf~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=3%2FEMSg5TzVrf2Ot8DnmgRY9NF%2BY%3D" alt="" loading="lazy"/></p>
<p>Zorin OS æ—¨åœ¨ç®€å•æ˜“ç”¨ï¼Œç”¨æˆ·æ— éœ€å­¦ä¹ ä»»ä½•æ–°çŸ¥è¯†å³å¯ä¸Šæ‰‹ï¼ŒåŒæ—¶ Zorin OS ä½œä¸ºä¸€æ¬¾ Linux å‘è¡Œç‰ˆç³»ç»Ÿï¼Œ<strong>ä¸“ä¸ºä» Windows è¿ç§»çš„ç”¨æˆ·è®¾è®¡</strong>ï¼Œæä¾›ç±»ä¼¼ Windows çš„å›¾å½¢ç•Œé¢ä¸æ“ä½œé€»è¾‘ï¼Œå¹¶ä¸”<strong>æ”¯æŒä¸€é”®åˆ‡æ¢ä¸º Windows ç³»ç»Ÿé£æ ¼</strong>ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cdf730d781114495b8a9d843b6c24171~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=enrtRtek7CTUo0mmLOcKZDAgBQA%3D" alt="" loading="lazy"/></p>
<p>å‰æ®µæ—¶é—´ï¼ŒZorin OS å›¢é˜Ÿåœ¨å…¶å®˜åšæ­£å¼å®£å¸ƒï¼Œæœ€æ–°çš„ Zorin OS 18 å·²ç»æ­£å¼çªç ´äº† 100 ä¸‡æ¬¡ä¸‹è½½ã€‚</p>
<p>å¹¶ä¸”æ®å®˜åšæ•°æ®æ˜¾ç¤ºï¼Œè¿™äº›ä¸‹è½½ä¸­<strong>æœ‰è¶…è¿‡ 78% æ˜¯æ¥è‡ªäº Windows ç³»ç»Ÿçš„ç”¨æˆ·</strong>ï¼Œè¿™ä¹Ÿå†æ¬¡å°è¯äº†å…¶å¯ä»¥æ»¡è¶³ä» Windows æ¡Œé¢ç³»ç»Ÿè¿ç§»åˆ° Linux å‘è¡Œç‰ˆçš„ç”¨æˆ·éœ€æ±‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/fb647d31ddee4c7390ea89eaa3be58c5~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=Jgwi6Nlp26TFPkZ5FnpcZd8fm7o%3D" alt="" loading="lazy"/></p>
<p>ä½œä¸ºä¸€ä¸ªé•¿æœŸå…³æ³¨ Linux æ¡Œé¢ç³»ç»Ÿçš„åšä¸»ï¼Œå…¶å®è¿™æ¬¡ Zorin OS 18 å¤§ç‰ˆæœ¬æ›´æ–°åˆšå‡ºæ¥é‚£ä¼šæˆ‘å°±å…³æ³¨äº†ï¼Œä¸è¿‡ä¸€ç›´æ²¡æœ‰æŠ½å‡ºæ—¶é—´æ¥å†™æ–‡ç« ã€æ¥æ¢³ç†ï¼Œæ‰€ä»¥ä»Šå¤©è¿™ç¯‡æ–‡ç« æ­£å¥½æŠŠè¿™ä»¶äº‹æƒ…ç»™å®‰æ’äº†ï¼</p>
<p>æ€»ä½“æ¥è®²ï¼Œè¿™æ¬¡çš„ Zorin OS 18 æ˜¯ä»¥ Ubuntu 24.04 LTS ä¸ºåŸºç¡€å¹¶ç”± Linux 6.14 å†…æ ¸æä¾›æ”¯æŒã€‚</p>
<p>å¹¶ä¸”è¿™æ¬¡çš„ Zorin OS 18 æ˜¯ç»§ä¹‹å‰ 17 ç‰ˆæœ¬ä»¥æ¥çš„ä¸€æ¬¡å¤§ç‰ˆæœ¬è¿­ä»£ï¼Œå¸¦æ¥äº†è¯¸å¤šæ–°ç‰¹æ€§å’Œæ”¹è¿›ã€‚</p>
<p>æ‰€ä»¥æ¥ä¸‹æ¥æˆ‘ä»¬ä¹Ÿæ¥æ¢³ç†ä¸€ä¸‹è¿™æ¬¡ Zorin OS 18 æ‰€å¸¦æ¥çš„ä¸€äº›é‡ç‚¹æ›´æ–°å’Œå˜åŒ–ã€‚</p>
<h2 data-id="heading-0">è§†è§‰ä¸äº¤äº’è¿›åŒ–</h2>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒZorin OS ä¸€ç›´ä»¥æ¥éƒ½ä»¥å…¶ç‹¬ç‰¹çš„ä¸ªæ€§å’Œç®€çº¦çš„ç¾å­¦è®¾è®¡é£æ ¼è€Œè‘—ç§°ã€‚</p>
<p>é‚£è¿™æ¬¡æ›´æ–°åçš„æ–°å¤–è§‚ç»™äººæœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯åœ†æ¶¦å’Œé€šé€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b639c420230543deb3d5e7e7065ea861~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=rwoYS1qXC7bIsBumeUALIylCfHs%3D" alt="" loading="lazy"/></p>
<p>ä»»åŠ¡æ è¿™ä¸€æ¬¡é‡‡ç”¨äº†å…¨æ–°çš„æ‚¬æµ®åœ†è§’é¢æ¿è®¾è®¡ï¼Œä¸å†æ˜¯æ­»æ¿åœ°è´´åœ¨å±å¹•è¾¹ç¼˜ï¼Œè€Œæ˜¯åƒ macOS çš„æ§åˆ¶ä¸­å¿ƒä¸€æ ·æœ‰ä¸€ç§è½»ç›ˆçš„æ¼‚æµ®æ„Ÿã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/51075571b05b467f9c311f858ae42944~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=cy7XeK%2FjJ8XdcuoQ160esqi2jFU%3D" alt="" loading="lazy"/></p>
<p>å¦å¤–è¿™ä¸€æ¬¡å¤§ç‰ˆæœ¬è¿˜æ¨å‡ºäº†æ–°ä¸»é¢˜é¢œè‰²ï¼Œæ–°å¢äº†é»„è‰²å’Œæ£•è‰²ä¸¤ç§ä¸»é¢˜è‰²ï¼Œè§†è§‰å±‚æ¬¡æ›´åŠ ä¸°å¯Œã€‚</p>
<p>é€‰ä¸­å…ƒç´ çš„è‰²è°ƒæ›´åŠ æ·¡é›…ï¼ŒèƒŒæ™¯å’Œä¾§è¾¹æ é¢œè‰²æ›´æ·±ï¼Œé•¿æ—¶é—´ç›¯ç€å±å¹•å†™ä»£ç æˆ–å¤„ç†æ–‡æ¡£ï¼Œçœ¼ç›ä¼šèˆ’æœå¾ˆå¤šã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/257f4419191c4d5e99878f8ca7082fba~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=uBS4eEytwM%2Bs8cA9biwKFNdQZLk%3D" alt="" loading="lazy"/></p>
<p>å¦å¤– Pro ç‰ˆé‡Œè¿˜æä¾›äº†æ›´å¤šå¯åˆ‡æ¢çš„æ¡Œé¢å¸ƒå±€ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/2ec8d58a6d144232ab4755f2c1eb938c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=e5bKULoM%2BcWtfOswOS4jIQ9k4%2Bw%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a3f3ea9cb5c84bc38aeba1e93c71c678~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=gquA35Cjv0pKt0NqAARTFbGY%2Ffg%3D" alt="" loading="lazy"/></p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d0695076094d4f9d96903fb702d2e05e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=ZuEAZvNFf5yC91p7iQXpdI0J6kM%3D" alt="" loading="lazy"/></p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå¾ˆå¤šç»å¸¸ä½¿ç”¨çš„æ—¥å¸¸åº”ç”¨ä¹Ÿè¿›è¡Œäº†è¯¸å¤šè®¾è®¡è°ƒæ•´å’Œæ”¹è¿›ã€‚</p>
<p>æ¯”å¦‚<strong>æ–‡ä»¶ç®¡ç†å™¨</strong>çš„ä¾§è¾¹æ é‡æ–°è®¾è®¡äº†ï¼Œæ“ä½œæ§ä»¶æ›´ç›´è§‚ï¼Œæœç´¢åŠŸèƒ½æ”¯æŒäº†å…¨æ–‡æœç´¢ï¼Œæ‰¾æ–‡ä»¶æ•ˆç‡å¤§å¢ã€‚</p>
<p><strong>æ—¥å†</strong>åº”ç”¨å¢åŠ äº†ä¾§è¾¹æ ï¼Œæœˆä»½å’Œäº‹ä»¶è§†å›¾ä¹Ÿä¸€ç›®äº†ç„¶ã€‚</p>
<p><strong>ç›¸æœº</strong>åº”ç”¨ä¹Ÿåšäº†æ›´æ–°ï¼Œæ–°ç›¸æœºåº”ç”¨ç•Œé¢ç®€æ´ï¼Œæ”¯æŒå¤šæ‘„åƒå¤´åˆ‡æ¢ï¼Œè¿™å¯¹äºç°åœ¨åŠ¨ä¸åŠ¨å°±å¼€è§†é¢‘ä¼šè®®çš„ç¯å¢ƒéå¸¸å‹å¥½ã€‚</p>
<h2 data-id="heading-1">Web åº”ç”¨æ·±åº¦é›†æˆ</h2>
<p>å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæœ€å¤§çš„ç—›ç‚¹å¾€å¾€ä¸æ˜¯ç³»ç»Ÿæœ¬èº«ï¼Œè€Œæ˜¯æ•°æ®è¿ç§»å’Œåº”ç”¨ç”Ÿæ€ï¼Œé‚£ Zorin OS 18 åœ¨è¿™æ–¹é¢ä¸‹äº†ä¸å°‘åŠŸå¤«ã€‚</p>
<p>é¦–å…ˆå°±æ˜¯ä¸ Web åº”ç”¨ç¨‹åºæ— ç¼é›†æˆã€‚</p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼Œç°åœ¨å¾ˆå¤šåº”ç”¨éƒ½æ„å»ºåœ¨äº‘ç«¯ï¼Œè¿™äº›æ¸è¿›å¼ Web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨ä¹‹é—´çš„ç”¨æˆ·ä½“éªŒæ­£é€æ¸èåˆã€‚</p>
<p>è¿™æ¬¡ Zorin OS 18 å…¨æ–°å†…ç½®çš„ã€ŒWeb Appsã€å·¥å…·éå¸¸å¼ºå¤§ï¼Œå®ƒå¯ä»¥å°† Web åº”ç”¨è½¬æ¢ä¸ºæ¡Œé¢åº”ç”¨ï¼Œç”¨æˆ·çš„ Web åº”ç”¨å°†å¯ä»¥æ˜¾ç¤ºåœ¨å¼€å§‹èœå•ä¸­ï¼Œä½¿ç”¨èµ·æ¥ä¸åŸç”Ÿåº”ç”¨æ— å¼‚ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/13527117876b40398d7e197db2aeb88b~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=WYE2ihl3Ma1x54auBPyZCrK1f6I%3D" alt="" loading="lazy"/></p>
<p>ã€ŒWeb Appsã€å·¥å…·å¯ä»¥ä½œä¸ºåç«¯ä¸å„ç§çƒ­é—¨ Web æµè§ˆå™¨é›†æˆï¼ŒåŒæ—¶ä¹Ÿå…è®¸ç”¨æˆ·è‡ªå®šä¹‰å¯¹åº” Web åº”ç”¨å†…çš„ä½“éªŒã€‚</p>
<h2 data-id="heading-2">å¤šä»»åŠ¡å¤„ç†ï¼šåŸç”Ÿçª—å£å¹³é“º</h2>
<p>è¿™æ¬¡ Zorin OS 18 çš„å¤šä»»åŠ¡å¤„ç†å˜å¾—å¥½ç”¨å¤šäº†ã€‚</p>
<p>Zorin OS 18 å¼•å…¥äº†ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„çª—å£å¹³é“ºç®¡ç†å™¨ï¼Œå®ƒèƒ½å¸®åŠ©ç”¨æˆ·æ›´é«˜æ•ˆåœ°å·¥ä½œï¼ŒåŒæ—¶ä¸Šæ‰‹èµ·æ¥ä¹Ÿååˆ†ç®€å•ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b8879554b4d64bd68a26dcf16632d2eb~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=qfiTxRj1xXN6Bjw%2BZH6mlX192qQ%3D" alt="" loading="lazy"/></p>
<p>ç”¨æˆ·åªéœ€è¦æŠŠçª—å£æ‹–åˆ°å±å¹•é¡¶éƒ¨ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨å¼¹å‡ºå¸ƒå±€é€‰æ‹©å™¨ã€‚</p>
<p>é¢„è®¾å¸ƒå±€æ”¯æŒå·¦å³åˆ†å±ã€ä¸‰æ å¸ƒå±€ã€è§’è½åœé ç­‰ï¼ŒåŒæ—¶åœ¨æ™ºèƒ½å»ºè®®è¿™å—ï¼Œç³»ç»Ÿä¹Ÿå¯ä»¥æ ¹æ®ç”¨æˆ·å½“å‰æ‰€æ‰“å¼€çš„çª—å£ï¼Œæ™ºèƒ½æ¨èæœ€ä½³çš„æ’åˆ—ç»„åˆã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–å®ƒè¿˜æ”¯æŒé«˜åº¦è‡ªå®šä¹‰ï¼Œåˆ›å»ºç”¨æˆ·è‡ªå·±çš„å¹³é“ºå¸ƒå±€ã€‚</p>
<p>è¿™ä¸ªæ–°ç‰¹æ€§æ— è®ºå¯¹æ–°æ‰‹è¿˜æ˜¯èµ„æ·±ç©å®¶éƒ½éå¸¸ç›´è§‚æ˜“ç”¨ï¼Œä»è€Œå®šåˆ¶å’Œæå‡æ¯ä¸ªç”¨æˆ·çš„ç”Ÿäº§åŠ›ã€‚</p>
<h2 data-id="heading-3">è¿ç§»ç¥å™¨ï¼šWindows åº”ç”¨æ”¯æŒ</h2>
<p>ç”¨æˆ·å¯ä»¥ä»å†…ç½®çš„è½¯ä»¶å•†åº—å‘ç°é€‚ç”¨äº Zorin OS ç³»ç»Ÿçš„å„ç±»åº”ç”¨ï¼Œè¿™æ˜¯åœ¨ Zorin OS ä¸­å®‰è£…åº”ç”¨çš„æ¨èæ–¹å¼ã€‚</p>
<p>å…¶è½¯ä»¶å•†åº—å¯è®©ç”¨æˆ·å¼€ç®±å³ç”¨åœ°ä» Zorin OS ä¸ Ubuntu APT ä»“åº“ã€Flathub ä»¥åŠ Snap Store å®‰è£…åº”ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/64d53f6128944782bd26a02e2977b6e0~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=I2bZ6UR9I44Fblm0x6c%2Frtv0Yz4%3D" alt="" loading="lazy"/></p>
<p>è€Œå¦‚æœç”¨æˆ·æ˜¯åˆšä» Windows è½¬è¿‡æ¥ï¼Œçœ‹åˆ°æ»¡ç¡¬ç›˜çš„ .exe å®‰è£…åŒ…è‚¯å®šä¼šå¤´ç–¼ã€‚</p>
<p>Zorin OS 18 çš„å¤„ç†æ–¹å¼éå¸¸èªæ˜ã€‚</p>
<p>ç³»ç»Ÿå†…ç½®äº†ä¸€ä¸ªåºå¤§çš„è½¯ä»¶æ•°æ®åº“ï¼ˆè¦†ç›–è¶…è¿‡ 170 æ¬¾è½¯ä»¶ï¼‰ï¼Œå½“ç”¨æˆ·åŒå‡»ä¸€ä¸ª Windows å®‰è£…åŒ…ï¼ˆå¦‚ setup.exeï¼‰æ—¶ï¼Œç³»ç»Ÿä¸ä¼šç›´æ¥æŠ¥é”™ï¼Œè€Œæ˜¯å¼¹å‡ºä¸€ä¸ªå‹å¥½çš„å¯¹è¯æ¡†ã€‚</p>
<p>å¦‚æœæœ‰ Linux åŸç”Ÿç‰ˆæœ¬ï¼Œå®ƒå°±ä¼šå¼•å¯¼ä½ å®‰è£…åŸç”Ÿç‰ˆæœ¬åº”ç”¨ï¼›å¦‚æœæ²¡æœ‰åŸç”Ÿç‰ˆçš„è¯ï¼Œå®ƒå°±ä¼šæ¨èä½ ä½¿ç”¨ Web ç‰ˆï¼Œæˆ–è€…åˆ©ç”¨å…¼å®¹å±‚è¿è¡Œã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/955e751fcbc9465a9073916bff333dd1~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=TXeiWc%2FEQ9lCDpdYCwS52B8rG1o%3D" alt="" loading="lazy"/></p>
<p>åœ¨å…¼å®¹å±‚ä¼˜åŒ–è¿™ä¸€å—ï¼ŒZorin OS 18 æ·±åº¦é›†æˆäº† Wineï¼Œå¯¹äºä¸€äº›å¿…é¡»åœ¨ Windows ä¸‹è¿è¡Œçš„è¡Œä¸šè½¯ä»¶æˆ–æ¸¸æˆï¼Œå®ƒæä¾›äº†ä¸€ä¸ªâ€œWindows åº”ç”¨æ”¯æŒâ€å±‚ã€‚è™½ç„¶ä¸èƒ½ä¿è¯ 100% å…¼å®¹ï¼Œä½†å¯¹äºå¾ˆå¤šè€æ—§çš„ .exe å·¥å…·ï¼Œå®ƒèƒ½è®©ä½ åœ¨ä¸è£…è™šæ‹Ÿæœºçš„æƒ…å†µä¸‹åº”æ€¥ä½¿ç”¨ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/6e24e23d8418443fbb5b4a67e97b3229~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=4wAEgS3HHHUIgUYcuQdbwEZIaXA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">æ€§èƒ½ä¸ç¡¬ä»¶æ”¯æŒ</h2>
<p>Zorin OS 18 åŸºäº Ubuntu LTS ç‰ˆæœ¬æ‰“é€ ï¼ŒåŒæ—¶å®ƒå°†è·å¾—ç›´åˆ° 2029 å¹´çš„ç¨³å®šå®‰å…¨æ›´æ–°ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a58443094e6d4c4c9c69af9cbe6eb714~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=kpI2%2FgSEaSzhBDgqxEcQTG%2Fv8kw%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶å®˜æ–¹å®£ç§°å®ƒç”šè‡³å¯ä»¥åœ¨åå‡ å¹´å‰çš„å¤è‘£æœºä¸Šæµç•…è¿è¡Œã€‚æœ€ä½é…ç½®ä»…éœ€ 1GHz åŒæ ¸ CPUã€2GB å†…å­˜ã€‚</p>
<p><img src="https://p3-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/cbba673b225f4451b660f2cf33438c3d~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgQ29kZVNoZWVw:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352266&amp;x-signature=rG0uilGBPAMNV7qyfJh4feXOrjY%3D" alt="" loading="lazy"/></p>
<p>åŒæ—¶ä»ç”¨æˆ·å®‰è£…çš„å®é™…è¡¨ç°æ¥çœ‹ï¼Œåœ¨ç°ä»£ç¡¬ä»¶ä¸Šï¼Œå®ƒçš„åŠ¨ç”»æµç•…åº¦éå¸¸é«˜ï¼Œå³ä¾¿åœ¨è€æœºå™¨ä¸Šï¼Œå®ƒè¿è¡Œèµ·æ¥ä¹Ÿæ¯” Windows ç³»ç»Ÿæ›´åŠ è½»å¿«ã€‚</p>
<h2 data-id="heading-5">å†™åœ¨æœ€å</h2>
<p>é‚£ä»¥ä¸Šå°±æ˜¯å…³äºæ­¤æ¬¡ Zorin OS 18 å¤§ç‰ˆæœ¬æ›´æ–°çš„ä¸€äº›æ¢³ç†å’Œæ€»ç»“ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥å»ä½“éªŒä¸€æ³¢ã€‚</p>
<p>æ€»çš„æ¥çœ‹ï¼Œè¿™æ¬¡çš„ Zorin OS 18 ä¸ä»…ä»…æ˜¯ä¸€ä¸ª Linux å‘è¡Œç‰ˆï¼Œä¹Ÿåƒæäº†ä¸€ä¸ªæ“ä½œç³»ç»Ÿè¿ç§»è§£å†³æ–¹æ¡ˆã€‚</p>
<p>å¦å¤–è¿™æ¬¡ Zorin OS 18 çš„å‘å¸ƒï¼Œä¹Ÿä½¿å¾— Linux æ¡Œé¢ç³»ç»Ÿçš„æ˜“ç”¨æ€§åˆå‘å‰è¿ˆè¿›äº†ä¸€æ­¥ã€‚</p>
<p>æ–‡ç« çš„æœ€åä¹ŸæœŸå¾… Linux æ¡Œé¢ç³»ç»Ÿåœ¨æœªæ¥èƒ½ç™¾èŠ±é½æ”¾ï¼Œå‘å±•å¾—è¶Šæ¥è¶Šå¥½ã€‚</p>
<p>å¥½äº†ï¼Œé‚£ä»¥ä¸Šå°±æ˜¯ä»Šå¤©çš„å†…å®¹åˆ†äº«äº†ï¼Œå¸Œæœ›èƒ½å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œæˆ‘ä»¬ä¸‹ç¯‡è§ã€‚</p>
<blockquote>
<p>æ³¨ï¼šæœ¬æ–‡åœ¨GitHubå¼€æºä»“åº“ã€Œç¼–ç¨‹ä¹‹è·¯ã€ <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Frd2coding%2FRoad2Coding" target="_blank" title="https://github.com/rd2coding/Road2Coding" ref="nofollow noopener noreferrer">github.com/rd2coding/Râ€¦</a> ä¸­å·²ç»æ”¶å½•ï¼Œé‡Œé¢æœ‰æˆ‘æ•´ç†çš„6å¤§ç¼–ç¨‹æ–¹å‘(å²—ä½)çš„è‡ªå­¦è·¯çº¿+çŸ¥è¯†ç‚¹å¤§æ¢³ç†ã€é¢è¯•è€ƒç‚¹ã€æˆ‘çš„ç®€å†ã€å‡ æœ¬ç¡¬æ ¸pdfç¬”è®°ï¼Œä»¥åŠç¨‹åºå‘˜ç”Ÿæ´»å’Œæ„Ÿæ‚Ÿï¼Œæ¬¢è¿starã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[MyBatisæ•°æ®æºæ¨¡å—è¯¦è§£]]></title>    <link>https://juejin.cn/post/7592130164965572646</link>    <guid>https://juejin.cn/post/7592130164965572646</guid>    <pubDate>2026-01-07T01:00:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592130164965572646" data-draft-id="7590608345922371610" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="MyBatisæ•°æ®æºæ¨¡å—è¯¦è§£"/> <meta itemprop="keywords" content="MyBatis"/> <meta itemprop="datePublished" content="2026-01-07T01:00:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="é›¨ä¸­é£˜è¡çš„è®°å¿†"/> <meta itemprop="url" content="https://juejin.cn/user/694547077666606"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            MyBatisæ•°æ®æºæ¨¡å—è¯¦è§£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/694547077666606/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    é›¨ä¸­é£˜è¡çš„è®°å¿†
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-07T01:00:30.000Z" title="Wed Jan 07 2026 01:00:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-07
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»10åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><blockquote>
<p>ä»æºç å±‚é¢æ·±å…¥ç†è§£MyBatisè¿æ¥æ± çš„è®¾è®¡ä¸å®ç°</p>
</blockquote>
<h2 data-id="heading-0">ä¸€ã€MyBatisæ•´ä½“æ¶æ„ä¸æ•°æ®æºæ¨¡å—</h2>
<p>åœ¨æ·±å…¥æ•°æ®æºæ¨¡å—ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£MyBatisçš„æ•´ä½“æ¶æ„ï¼Œä»¥åŠæ•°æ®æºæ¨¡å—åœ¨å…¶ä¸­çš„é‡è¦åœ°ä½ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8cfa06c57cd94536a7ac6a0c931a1634~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=uj2NS4cMd4LcRNkEZcCwxxjTUr4%3D" alt="" loading="lazy"/></p>
<p>ä»æ¶æ„å›¾å¯ä»¥çœ‹å‡ºï¼ŒMyBatisé‡‡ç”¨äº†åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œè€Œ<strong>æ•°æ®æºæ¨¡å—ï¼ˆDataSourceï¼‰ä½äºåŸºç¡€æ”¯æ’‘å±‚</strong>ï¼Œæ˜¯æ•°æ®åº“è®¿é—®çš„åŸºç¡€è®¾æ–½ã€‚å®ƒè´Ÿè´£ç®¡ç†æ•°æ®åº“è¿æ¥ã€ç»´æŠ¤è¿æ¥æ± ã€æä¾›é«˜æ•ˆçš„è¿æ¥è·å–å’Œé‡Šæ”¾æœºåˆ¶ï¼Œæ˜¯æ•´ä¸ªæ¡†æ¶ä¸æ•°æ®åº“äº¤äº’çš„å…¥å£ã€‚</p>
<h2 data-id="heading-1">1.1 æ•°æ®æºæ¨¡å—çš„æ ¸å¿ƒèŒè´£</h2>
<p>æ•°æ®æºæ¨¡å—ä¸»è¦æ‰¿æ‹…ä»¥ä¸‹æ ¸å¿ƒèŒè´£ï¼š</p>
<pre><code class="hljs">ç®¡ç†æ•°æ®åº“è¿æ¥ - åˆ›å»ºã€åˆå§‹åŒ–å’Œç®¡ç†æ•°æ®åº“è¿æ¥
è¿æ¥æ± ç®¡ç† - ç»´æŠ¤è¿æ¥æ± ï¼Œæé«˜è¿æ¥å¤ç”¨ç‡
è¿æ¥è·å–ä¸é‡Šæ”¾ - æä¾›é«˜æ•ˆçš„è¿æ¥è·å–å’Œé‡Šæ”¾æœºåˆ¶
è¿æ¥é…ç½®ç®¡ç† - ç®¡ç†æ•°æ®åº“è¿æ¥çš„é…ç½®ä¿¡æ¯
æ€§èƒ½ä¼˜åŒ– - é€šè¿‡è¿æ¥æ± å‡å°‘è¿æ¥åˆ›å»ºå¼€é”€
</code></pre>
<h2 data-id="heading-2">1.2 ä¸ºä»€ä¹ˆéœ€è¦è¿æ¥æ± ï¼Ÿ</h2>
<p>åœ¨ä¼ ç»Ÿçš„JDBCç¼–ç¨‹ä¸­ï¼Œæ¯æ¬¡æ•°æ®åº“æ“ä½œéƒ½éœ€è¦åˆ›å»ºå’Œå…³é—­è¿æ¥ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-comment">//ä¼ ç»Ÿæ–¹å¼ï¼šæ¯æ¬¡åˆ›å»ºæ–°è¿æ¥</span>
<span class="hljs-type">Connection</span> <span class="hljs-variable">conn</span> <span class="hljs-operator">=</span> DriverManager.getConnection(url, user, password);
<span class="hljs-keyword">try</span> {
    <span class="hljs-comment">// æ‰§è¡ŒSQLæ“ä½œ</span>
} <span class="hljs-keyword">finally</span> {
    conn.close(); <span class="hljs-comment">// å…³é—­è¿æ¥</span>
}
</code></pre>
<p>è¿™ç§æ–¹å¼å­˜åœ¨æ˜æ˜¾é—®é¢˜ï¼š</p>
<pre><code class="hljs">é¢‘ç¹åˆ›å»ºè¿æ¥ - è¿æ¥åˆ›å»ºæ˜¯æ˜‚è´µçš„æ“ä½œ 
èµ„æºæµªè´¹ - é¢‘ç¹åˆ›å»ºå’Œé”€æ¯è¿æ¥æ¶ˆè€—èµ„æº
æ€§èƒ½ä½ä¸‹ - æ¯æ¬¡æ“ä½œéƒ½è¦ç­‰å¾…è¿æ¥å»ºç«‹
</code></pre>
<p>ä½¿ç”¨è¿æ¥æ± åçš„æµç¨‹ï¼š</p>
<pre><code class="hljs language-markdown" lang="markdown">åº”ç”¨å¯åŠ¨ â†’ åˆ›å»ºè¿æ¥æ±  â†’ é¢„åˆ›å»ºNä¸ªè¿æ¥
<span class="hljs-code">    â†“
ä¸šåŠ¡è¯·æ±‚ â†’ ä»æ± ä¸­è·å–è¿æ¥ â†’ æ‰§è¡Œæ“ä½œ â†’ å½’è¿˜è¿æ¥åˆ°æ± 
    â†“
åº”ç”¨å…³é—­ â†’ é”€æ¯è¿æ¥æ±  â†’ é‡Šæ”¾æ‰€æœ‰è¿æ¥
</span></code></pre>
<h2 data-id="heading-3">1.3 MyBatisçš„æ•°æ®æºç±»å‹</h2>

























<table><thead><tr><th>æ•°æ®æºç±»å‹</th><th>è¯´æ˜</th><th>ä½¿ç”¨åœºæ™¯</th></tr></thead><tbody><tr><td>UNPOOLED</td><td>ä¸ä½¿ç”¨è¿æ¥æ± </td><td>æµ‹è¯•ç¯å¢ƒã€ç®€å•åº”ç”¨</td></tr><tr><td>POOLED</td><td>ä½¿ç”¨è¿æ¥æ± </td><td>ç”Ÿäº§ç¯å¢ƒã€é«˜å¹¶å‘åº”ç”¨</td></tr><tr><td>JNDI</td><td>ä½¿ç”¨JNDIæŸ¥æ‰¾</td><td>åº”ç”¨æœåŠ¡å™¨ç¯å¢ƒ</td></tr></tbody></table>
<h2 data-id="heading-4">äºŒã€æ•°æ®æºæ¥å£æ¶æ„</h2>
<p>MyBatisçš„æ•°æ®æºæ¨¡å—é‡‡ç”¨äº†æ¸…æ™°çš„æ¥å£è®¾è®¡ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/acd23b19a2c841dd9768327cc26beef9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=Nn9nzvyQHfNvPcXqXVhf4MOO5A0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">2.1 DataSourceæ¥å£</h2>
<p>DataSourceæ˜¯æ•°æ®æºçš„é¡¶å±‚æ¥å£ï¼š</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DataSource</span> {
    <span class="hljs-comment">// è·å–æ•°æ®åº“è¿æ¥</span>
    Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException;
    Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">(String username, String password)</span> 
        <span class="hljs-keyword">throws</span> SQLException;
}
</code></pre>
<p>è™½ç„¶MyBatisæ²¡æœ‰ç›´æ¥å®šä¹‰DataSourceæ¥å£ï¼ˆä½¿ç”¨çš„æ˜¯javax.sql.DataSourceï¼‰ï¼Œä½†å®ƒé€šè¿‡<strong>å·¥å‚æ¨¡å¼</strong>åˆ›å»ºä¸åŒç±»å‹çš„DataSourceå®ç°ã€‚</p>
<h2 data-id="heading-6">2.2 DataSourceFactoryæ¥å£</h2>
<p>MyBatiså®šä¹‰äº†DataSourceFactoryæ¥å£ç”¨äºåˆ›å»ºDataSourceï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title">DataSourceFactory</span> {
    <span class="hljs-comment">// è®¾ç½®æ•°æ®æºå±æ€§</span>
    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setProperties</span>(<span class="hljs-params">Properties props</span>)</span>;
    <span class="hljs-comment">// è·å–æ•°æ®æº</span>
    <span class="hljs-function">DataSource <span class="hljs-title">getDataSource</span>()</span>;
}
</code></pre>
<h2 data-id="heading-7">2.3æ•°æ®æºå·¥å‚å®ç°</h2>
<p>MyBatisæä¾›äº†ä¸‰ç§DataSourceFactoryå®ç°ï¼š</p>
<pre><code class="hljs language-java" lang="java">DataSourceFactory
â”œâ”€â”€ UnpooledDataSourceFactory (æ— æ± æ•°æ®æºå·¥å‚)
â”œâ”€â”€ PooledDataSourceFactory (æ± åŒ–æ•°æ®æºå·¥å‚)
â””â”€â”€ JndiDataSourceFactory (JNDIæ•°æ®æºå·¥å‚)
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnpooledDataSourceFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataSourceFactory</span> {
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">String</span> <span class="hljs-variable">DRIVER_PROPERTY_PREFIX</span> <span class="hljs-operator">=</span> <span class="hljs-string">"driver."</span>;
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">int</span> <span class="hljs-variable">DRIVER_PROPERTY_PREFIX_LENGTH</span> <span class="hljs-operator">=</span> 
        DRIVER_PROPERTY_PREFIX.length();

    <span class="hljs-keyword">protected</span> DataSource dataSource;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnpooledDataSourceFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-built_in">this</span>.dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnpooledDataSource</span>();
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setProperties</span><span class="hljs-params">(Properties properties)</span> {
        <span class="hljs-type">Properties</span> <span class="hljs-variable">driverProperties</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
        <span class="hljs-type">DataSource</span> <span class="hljs-variable">dataSource</span> <span class="hljs-operator">=</span> getDataSource();

        <span class="hljs-comment">// åˆ›å»ºæ•°æ®æº</span>
        <span class="hljs-type">MetaObject</span> <span class="hljs-variable">metaDataSource</span> <span class="hljs-operator">=</span> 
            SystemMetaObject.forObject(dataSource);

        <span class="hljs-comment">// è®¾ç½®å±æ€§</span>
        <span class="hljs-keyword">for</span> (Object key : properties.keySet()) {
            <span class="hljs-type">String</span> <span class="hljs-variable">propertyName</span> <span class="hljs-operator">=</span> (String) key;
            <span class="hljs-keyword">if</span> (propertyName.startsWith(DRIVER_PROPERTY_PREFIX)) {
                driverProperties.setProperty(
                    propertyName.substring(DRIVER_PROPERTY_PREFIX_LENGTH), 
                    properties.getProperty(propertyName)
                );
            } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (metaDataSource.hasSetter(propertyName)) {
                <span class="hljs-type">String</span> <span class="hljs-variable">value</span> <span class="hljs-operator">=</span> (String) properties.get(propertyName);
                <span class="hljs-type">Object</span> <span class="hljs-variable">convertedValue</span> <span class="hljs-operator">=</span> 
                    convertValue(metaDataSource, propertyName, value);
                metaDataSource.setValue(propertyName, convertedValue);
            }
        }

        <span class="hljs-keyword">if</span> (dataSource <span class="hljs-keyword">instanceof</span> UnpooledDataSource) {
            ((UnpooledDataSource) dataSource)
                .setDriverProperties(driverProperties);
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> DataSource <span class="hljs-title function_">getDataSource</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> dataSource;
    }
}
<span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PooledDataSourceFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">UnpooledDataSourceFactory</span> {
    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PooledDataSourceFactory</span><span class="hljs-params">()</span> {
        <span class="hljs-comment">//æ³¨æ„ï¼šè¿™é‡Œåˆ›å»ºçš„æ˜¯PooledDataSource</span>
        <span class="hljs-built_in">this</span>.dataSource = <span class="hljs-keyword">new</span> <span class="hljs-title class_">PooledDataSource</span>();
    }
}
</code></pre>
<p>UnpooledDataSourceæ˜¯<strong>ä¸ä½¿ç”¨è¿æ¥æ± </strong>çš„æ•°æ®æºå®ç°ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºæ–°è¿æ¥ã€‚</p>
<h2 data-id="heading-8">3.1 UnpooledDataSourceæ ¸å¿ƒä»£ç </h2>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnpooledDataSource</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">DataSource</span> {
    <span class="hljs-comment">// é©±åŠ¨é…ç½®</span>
    <span class="hljs-keyword">private</span> Class&lt;?&gt; driver;
    <span class="hljs-keyword">private</span> String url;
    <span class="hljs-keyword">private</span> String username;
    <span class="hljs-keyword">private</span> String password;
    <span class="hljs-keyword">private</span> Boolean autoCommit;
    <span class="hljs-keyword">private</span> Integer defaultTransactionIsolationLevel;
    <span class="hljs-keyword">private</span> Properties driverProperties;

    <span class="hljs-comment">// ç¼“å­˜é©±åŠ¨ï¼Œé¿å…é‡å¤åŠ è½½</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Map&lt;String, Driver&gt; registeredDrivers = 
        <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcurrentHashMap</span>&lt;&gt;();

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> doGetConnection(username, password);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getConnection</span><span class="hljs-params">(String username, String password)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">return</span> doGetConnection(username, password);
    }

    <span class="hljs-keyword">private</span> Connection <span class="hljs-title function_">doGetConnection</span><span class="hljs-params">(String username, String password)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-type">Properties</span> <span class="hljs-variable">props</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();
        <span class="hljs-keyword">if</span> (driverProperties != <span class="hljs-literal">null</span>) {
            props.putAll(driverProperties);
        }
        <span class="hljs-keyword">if</span> (username != <span class="hljs-literal">null</span>) {
            props.setProperty(<span class="hljs-string">"user"</span>, username);
        }
        <span class="hljs-keyword">if</span> (password != <span class="hljs-literal">null</span>) {
            props.setProperty(<span class="hljs-string">"password"</span>, password);
        }
        <span class="hljs-keyword">return</span> doGetConnection(props);
    }

    <span class="hljs-keyword">private</span> Connection <span class="hljs-title function_">doGetConnection</span><span class="hljs-params">(Properties properties)</span> 
        <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-comment">// åˆå§‹åŒ–é©±åŠ¨</span>
        initializeDriver();
        <span class="hljs-comment">// è·å–è¿æ¥</span>
        <span class="hljs-type">Connection</span> <span class="hljs-variable">connection</span> <span class="hljs-operator">=</span> 
            DriverManager.getConnection(url, properties);
        <span class="hljs-comment">// é…ç½®è¿æ¥</span>
        configureConnection(connection);
        <span class="hljs-keyword">return</span> connection;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initializeDriver</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">if</span> (!registeredDrivers.containsKey(driver)) {
            <span class="hljs-keyword">try</span> {
                Class&lt;?&gt; driverType = Class.forName(driver);
                <span class="hljs-type">Driver</span> <span class="hljs-variable">driverInstance</span> <span class="hljs-operator">=</span> (Driver) driverType.newInstance();
                DriverManager.registerDriver(
                    <span class="hljs-keyword">new</span> <span class="hljs-title class_">DriverProxy</span>(driverInstance)
                );
                registeredDrivers.put(driver, driverInstance);
            } <span class="hljs-keyword">catch</span> (Exception e) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SQLException</span>(
                    <span class="hljs-string">"Error setting driver on UnpooledDataSource. Cause: "</span> + e
                );
            }
        }
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">configureConnection</span><span class="hljs-params">(Connection conn)</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">if</span> (autoCommit != <span class="hljs-literal">null</span> &amp;&amp; conn.getAutoCommit() != autoCommit) {
            conn.setAutoCommit(autoCommit);
        }
        <span class="hljs-keyword">if</span> (defaultTransactionIsolationLevel != <span class="hljs-literal">null</span>) {
            conn.setTransactionIsolation(defaultTransactionIsolationLevel);
        }
    }
}
</code></pre>
<h2 data-id="heading-9">3.2 UnpooledDataSourceç‰¹ç‚¹</h2>
<p>ä¼˜ç‚¹ï¼š</p>
<pre><code class="hljs">å®ç°ç®€å•ï¼Œæ˜“äºç†è§£
ä¸éœ€è¦ç»´æŠ¤è¿æ¥æ± çŠ¶æ€
é€‚åˆæµ‹è¯•å’Œç®€å•åº”ç”¨
</code></pre>
<p>ç¼ºç‚¹ï¼š</p>
<pre><code class="hljs">æ¯æ¬¡éƒ½åˆ›å»ºæ–°è¿æ¥ï¼Œæ€§èƒ½ä½
é¢‘ç¹åˆ›å»ºé”€æ¯è¿æ¥ï¼Œèµ„æºæ¶ˆè€—å¤§
ä¸é€‚åˆé«˜å¹¶å‘åœºæ™¯
</code></pre>
<h2 data-id="heading-10">å››ã€PooledDataSourceå®ç°</h2>
<p>PooledDataSourceæ˜¯MyBatisçš„<strong>è¿æ¥æ± å®ç°</strong>ï¼Œæä¾›äº†é«˜æ•ˆçš„è¿æ¥ç®¡ç†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/aa349bb481f64c6c85223a6a1e41d56c~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=aYD8XGNWiSKdB4oA00TKisxj7Nw%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-11">4.1 PooledDataSourceæ ¸å¿ƒç»“æ„</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PooledDataSource</span> implements DataSource {
    <span class="hljs-comment">// æ•°æ®æºçŠ¶æ€</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PoolState state;
    <span class="hljs-comment">// æ— æ± æ•°æ®æºï¼ˆç”¨äºåˆ›å»ºå®é™…è¿æ¥ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> UnpooledDataSource dataSource;
    <span class="hljs-comment">// è¿æ¥æ± é…ç½®</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> expectedTransactionType;
    <span class="hljs-comment">// æœ€å¤§æ´»åŠ¨è¿æ¥æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolMaximumActiveConnections = <span class="hljs-number">10</span>;
    <span class="hljs-comment">// æœ€å¤§ç©ºé—²è¿æ¥æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolMaximumIdleConnections = <span class="hljs-number">5</span>;
    <span class="hljs-comment">// æœ€å¤§Checkoutæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolMaximumCheckoutTime = <span class="hljs-number">20000</span>;
    <span class="hljs-comment">// ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolTimeToWait = <span class="hljs-number">20000</span>;
    <span class="hljs-comment">// æœ€å¤§è¿æ¥æ•°</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolMaximumLocalBadConnectionTolerance = <span class="hljs-number">3</span>;
    <span class="hljs-comment">// æµ‹è¯•è¿æ¥çš„SQL</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">String</span> poolPingQuery = <span class="hljs-string">"NO PING QUERY SET"</span>;
    <span class="hljs-comment">// æ˜¯å¦æµ‹è¯•è¿æ¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> poolPingEnabled;
    <span class="hljs-comment">// æµ‹è¯•è¿æ¥çš„é—´éš”ï¼ˆæ¯«ç§’ï¼‰</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> poolPingConnectionsNotUsedFor;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PooledDataSource</span><span class="hljs-params">()</span> </span>{
        state = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PoolState</span>(<span class="hljs-keyword">this</span>);
        dataSource = <span class="hljs-keyword">new</span> <span class="hljs-built_in">UnpooledDataSource</span>();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PooledDataSource</span><span class="hljs-params">(<span class="hljs-type">String</span> driver, <span class="hljs-type">String</span> url, 
        <span class="hljs-type">String</span> username, <span class="hljs-type">String</span> password)</span> </span>{
        state = <span class="hljs-keyword">new</span> <span class="hljs-built_in">PoolState</span>(<span class="hljs-keyword">this</span>);
        dataSource = <span class="hljs-keyword">new</span> <span class="hljs-built_in">UnpooledDataSource</span>(driver, url, username, password);
    }

    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">()</span> throws SQLException </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">popConnection</span>(
            dataSource.<span class="hljs-built_in">getUsername</span>(), 
            dataSource.<span class="hljs-built_in">getPassword</span>()
        ).<span class="hljs-built_in">getProxyConnection</span>();
    }

    @<span class="hljs-function">Override
    <span class="hljs-keyword">public</span> Connection <span class="hljs-title">getConnection</span><span class="hljs-params">(<span class="hljs-type">String</span> username, <span class="hljs-type">String</span> password)</span> 
        throws SQLException </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">popConnection</span>(username, password).<span class="hljs-built_in">getProxyConnection</span>();
    }
}
</code></pre>
<h2 data-id="heading-12">4.2 PoolStateè¿æ¥æ± çŠ¶æ€</h2>
<pre><code class="hljs language-arduino" lang="arduino"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PoolState</span> {
    <span class="hljs-comment">//æ•°æ®æº</span>
    <span class="hljs-keyword">protected</span> PooledDataSource dataSource;

    <span class="hljs-comment">//ç©ºé—²è¿æ¥åˆ—è¡¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> List&lt;PooledConnection&gt; idleConnections = 
        <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();
    <span class="hljs-comment">//æ´»åŠ¨è¿æ¥åˆ—è¡¨</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">final</span> List&lt;PooledConnection&gt; activeConnections = 
        <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();

    <span class="hljs-comment">// ç»Ÿè®¡æŒ‡æ ‡</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> requestCount = <span class="hljs-number">0</span>;              <span class="hljs-comment">// è¯·æ±‚è®¡æ•°</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> accumulatedRequestTime = <span class="hljs-number">0</span>;    <span class="hljs-comment">// ç´¯è®¡è¯·æ±‚æ—¶é—´</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> accumulatedCheckoutTime = <span class="hljs-number">0</span>;   <span class="hljs-comment">// ç´¯è®¡Checkoutæ—¶é—´</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> accumulatedWaitTime = <span class="hljs-number">0</span>;       <span class="hljs-comment">// ç´¯è®¡ç­‰å¾…æ—¶é—´</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-type">long</span> badConnectionCount = <span class="hljs-number">0</span>;        <span class="hljs-comment">// ç´¯è®¡æ— æ•ˆè¿æ¥æ•°</span>

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">PoolState</span><span class="hljs-params">(PooledDataSource dataSource)</span> </span>{
        <span class="hljs-keyword">this</span>.dataSource = dataSource;
    }
}
</code></pre>
<h2 data-id="heading-13">4.3 popConnectionè·å–è¿æ¥</h2>
<pre><code class="hljs language-ini" lang="ini">private PooledConnection popConnection(String username, String password) 
    throws SQLException {
    boolean <span class="hljs-attr">countedWait</span> = <span class="hljs-literal">false</span><span class="hljs-comment">;</span>
    PooledConnection <span class="hljs-attr">conn</span> = null<span class="hljs-comment">;</span>
    long <span class="hljs-attr">t</span> = System.currentTimeMillis()<span class="hljs-comment">;</span>
    int <span class="hljs-attr">localBadConnectionCount</span> = <span class="hljs-number">0</span><span class="hljs-comment">;</span>

    while (<span class="hljs-attr">conn</span> == null) {
        synchronized (state) {
            //æ£€æŸ¥æ˜¯å¦æœ‰ç©ºé—²è¿æ¥
            if (!state.idleConnections.isEmpty()) {
                // ä»ç©ºé—²è¿æ¥æ± è·å–
                <span class="hljs-attr">conn</span> = state.idleConnections.remove(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
                if (log.isDebugEnabled()) {
                    log.debug("Checked out connection " + 
                        conn.getRealHashCode() + " from pool.")<span class="hljs-comment">;</span>
                }
            } else {
                //æ²¡æœ‰ç©ºé—²è¿æ¥
                if (state.activeConnections.size() &lt; 
                    poolMaximumActiveConnections) {
                    // å¯ä»¥åˆ›å»ºæ–°è¿æ¥
                    <span class="hljs-attr">conn</span> = new PooledConnection(
                        dataSource.getConnection(), this
                    )<span class="hljs-comment">;</span>
                    if (log.isDebugEnabled()) {
                        log.debug("Created connection " + 
                            conn.getRealHashCode() + ".")<span class="hljs-comment">;</span>
                    }
                } else {
                    //æ´»åŠ¨è¿æ¥å·²æ»¡ï¼Œéœ€è¦ç­‰å¾…
                    <span class="hljs-attr">countedWait</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
                    try {
                        state.wait(poolTimeToWait)<span class="hljs-comment">;</span>
                    } catch (InterruptedException e) {
                        break<span class="hljs-comment">;</span>
                    }
                }
            }

            if (conn != null) {
                //æ£€æŸ¥è¿æ¥æ˜¯å¦æœ‰æ•ˆ
                if (conn.isValid()) {
                    // æµ‹è¯•è¿æ¥
                    if (!poolPingEnabled || 
                        conn.pingConnection(poolPingConnectionsNotUsedFor)) {
                        // è¿æ¥æœ‰æ•ˆï¼ŒåŠ å…¥æ´»åŠ¨è¿æ¥æ± 
                        state.activeConnections.add(conn)<span class="hljs-comment">;</span>
                        state.requestCount++<span class="hljs-comment">;</span>
                        state.accumulatedRequestTime += 
                            System.currentTimeMillis() - t<span class="hljs-comment">;</span>
                        return conn<span class="hljs-comment">;</span>
                    }
                }
                // è¿æ¥æ— æ•ˆï¼Œæ ‡è®°ä¸ºåè¿æ¥
                state.badConnectionCount++<span class="hljs-comment">;</span>
                localBadConnectionCount++<span class="hljs-comment">;</span>
                if (conn.getRealConnection() != null) {
                    conn.close()<span class="hljs-comment">;</span>
                }
                <span class="hljs-attr">conn</span> = null<span class="hljs-comment">;</span>
            }
        }

        //æ£€æŸ¥æ˜¯å¦è¶…æ—¶
        if (!countedWait) {
            <span class="hljs-attr">countedWait</span> = <span class="hljs-literal">true</span><span class="hljs-comment">;</span>
        } else if (localBadConnectionCount &gt; 
            poolMaximumLocalBadConnectionTolerance) {
            throw new SQLException(
                "PooledDataSource: Could not get a good connection."
            )<span class="hljs-comment">;</span>
        }
    }

    if (<span class="hljs-attr">conn</span> == null) {
        throw new SQLException(
            "PooledDataSource: Unknown error. Could not get a connection."
        )<span class="hljs-comment">;</span>
    }

    return conn<span class="hljs-comment">;</span>
}
</code></pre>
<h2 data-id="heading-14">4.4 pushConnectionå½’è¿˜è¿æ¥</h2>
<pre><code class="hljs language-scss" lang="scss">protected void <span class="hljs-built_in">pushConnection</span>(PooledConnection conn) throws SQLException {
    synchronized (state) {
        <span class="hljs-comment">//ä»æ´»åŠ¨è¿æ¥æ± ç§»é™¤</span>
        state<span class="hljs-selector-class">.activeConnections</span><span class="hljs-selector-class">.remove</span>(conn);

        <span class="hljs-comment">//æ£€æŸ¥è¿æ¥æ˜¯å¦æœ‰æ•ˆ</span>
        if (conn.isValid()) {
            <span class="hljs-comment">//æ£€æŸ¥ç©ºé—²è¿æ¥æ± æ˜¯å¦å·²æ»¡</span>
            if (state.idleConnections.size() &lt; poolMaximumIdleConnections &amp;&amp; 
                conn<span class="hljs-selector-class">.getConnectionType</span>() == expectedTransactionType) {
                <span class="hljs-comment">// å½’è¿˜åˆ°ç©ºé—²è¿æ¥æ± </span>
                state<span class="hljs-selector-class">.accumulatedCheckoutTime</span> += conn<span class="hljs-selector-class">.getCheckoutTime</span>();
                if (!conn.getRealConnection()<span class="hljs-selector-class">.getAutoCommit</span>()) {
                    conn<span class="hljs-selector-class">.getRealConnection</span>()<span class="hljs-selector-class">.rollback</span>();
                }
                PooledConnection newConn = new <span class="hljs-built_in">PooledConnection</span>(
                    conn.getRealConnection(), this
                );
                state<span class="hljs-selector-class">.idleConnections</span><span class="hljs-selector-class">.add</span>(newConn);
                state<span class="hljs-selector-class">.requestCount</span>++;
                conn<span class="hljs-selector-class">.invalidate</span>();
                if (log.isDebugEnabled()) {
                    log<span class="hljs-selector-class">.debug</span>("Returned connection " + 
                        newConn.getRealHashCode() + " to pool.");
                }
                state<span class="hljs-selector-class">.notifyAll</span>();
            } else {
                <span class="hljs-comment">//ç©ºé—²è¿æ¥æ± å·²æ»¡ï¼Œå…³é—­è¿æ¥</span>
                state<span class="hljs-selector-class">.accumulatedCheckoutTime</span> += conn<span class="hljs-selector-class">.getCheckoutTime</span>();
                if (!conn.getRealConnection()<span class="hljs-selector-class">.getAutoCommit</span>()) {
                    conn<span class="hljs-selector-class">.getRealConnection</span>()<span class="hljs-selector-class">.rollback</span>();
                }
                conn<span class="hljs-selector-class">.getRealConnection</span>()<span class="hljs-selector-class">.close</span>();
                if (log.isDebugEnabled()) {
                    log<span class="hljs-selector-class">.debug</span>("Closed connection " + 
                        conn.getRealHashCode() + ".");
                }
                conn<span class="hljs-selector-class">.invalidate</span>();
            }
        } else {
            <span class="hljs-comment">//è¿æ¥æ— æ•ˆ</span>
            if (log.isDebugEnabled()) {
                log<span class="hljs-selector-class">.debug</span>("A bad connection (" + 
                    conn.getRealHashCode() + ") was returned to the pool.");
            }
            state<span class="hljs-selector-class">.badConnectionCount</span>++;
        }
    }
}
</code></pre>
<h2 data-id="heading-15">4.5 PooledConnectionä»£ç†è¿æ¥</h2>
<p>PooledConnectionä½¿ç”¨<strong>åŠ¨æ€ä»£ç†æ¨¡å¼</strong>ï¼Œæ‹¦æˆªclose()æ–¹æ³•ï¼Œå°†è¿æ¥å½’è¿˜åˆ°æ± è€Œä¸æ˜¯çœŸæ­£å…³é—­ã€‚</p>
<pre><code class="hljs language-java" lang="java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PooledConnection</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">InvocationHandler</span> {
    <span class="hljs-comment">// å®é™…è¿æ¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Connection realConnection;
    <span class="hljs-comment">// ä»£ç†è¿æ¥</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Connection proxyConnection;
    <span class="hljs-comment">// æ•°æ®æº</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> PooledDataSource dataSource;
    <span class="hljs-comment">// Checkoutæ—¶é—´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> checkoutTimestamp;
    <span class="hljs-comment">// æœ€åä½¿ç”¨æ—¶é—´</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">long</span> lastUsedTimestamp;
    <span class="hljs-comment">// è¿æ¥ç±»å‹</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> connectionType;
    <span class="hljs-comment">// æ˜¯å¦æœ‰æ•ˆ</span>
    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> valid;

    <span class="hljs-keyword">public</span> <span class="hljs-title function_">PooledConnection</span><span class="hljs-params">(Connection realConnection, 
        PooledDataSource dataSource)</span> {
        <span class="hljs-built_in">this</span>.realConnection = realConnection;
        <span class="hljs-built_in">this</span>.dataSource = dataSource;
        <span class="hljs-built_in">this</span>.valid = <span class="hljs-literal">true</span>;

        <span class="hljs-comment">//åˆ›å»ºåŠ¨æ€ä»£ç†</span>
        <span class="hljs-built_in">this</span>.proxyConnection = (Connection) Proxy.newProxyInstance(
            Connection.class.getClassLoader(),
            <span class="hljs-keyword">new</span> <span class="hljs-title class_">Class</span>[]{Connection.class},
            <span class="hljs-built_in">this</span>
        );

        <span class="hljs-built_in">this</span>.checkoutTimestamp = System.currentTimeMillis();
        <span class="hljs-built_in">this</span>.lastUsedTimestamp = checkoutTimestamp;
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">invoke</span><span class="hljs-params">(Object proxy, Method method, Object[] args)</span> 
        <span class="hljs-keyword">throws</span> Throwable {
        <span class="hljs-type">String</span> <span class="hljs-variable">methodName</span> <span class="hljs-operator">=</span> method.getName();

        <span class="hljs-comment">// closeæ–¹æ³•ç‰¹æ®Šå¤„ç†</span>
        <span class="hljs-keyword">if</span> (CLOSE.equals(methodName)) {
            <span class="hljs-comment">// ä¸çœŸæ­£å…³é—­ï¼Œè€Œæ˜¯å½’è¿˜åˆ°è¿æ¥æ± </span>
            dataSource.pushConnection(<span class="hljs-built_in">this</span>);
            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// è°ƒç”¨å®é™…è¿æ¥çš„æ–¹æ³•</span>
            <span class="hljs-keyword">if</span> (!Object.class.equals(method.getDeclaringClass())) {
                checkConnection(); <span class="hljs-comment">// æ£€æŸ¥è¿æ¥çŠ¶æ€</span>
            }
            <span class="hljs-keyword">return</span> method.invoke(realConnection, args);
        } <span class="hljs-keyword">catch</span> (Throwable t) {
            <span class="hljs-keyword">throw</span> ExceptionUtil.unwrapThrowable(t);
        }
    }

    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getProxyConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> proxyConnection;
    }

    <span class="hljs-keyword">public</span> Connection <span class="hljs-title function_">getRealConnection</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> realConnection;
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkConnection</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> SQLException {
        <span class="hljs-keyword">if</span> (!valid) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SQLException</span>(
                <span class="hljs-string">"Error accessing PooledConnection. Connection is closed."</span>
            );
        }
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> valid &amp;&amp; realConnection != <span class="hljs-literal">null</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">invalidate</span><span class="hljs-params">()</span> {
        valid = <span class="hljs-literal">false</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-type">long</span> <span class="hljs-title function_">getCheckoutTime</span><span class="hljs-params">()</span> {
        <span class="hljs-keyword">return</span> System.currentTimeMillis() - checkoutTimestamp;
    }

    <span class="hljs-comment">// è¿æ¥æœ‰æ•ˆæ€§æµ‹è¯•</span>
    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">pingConnection</span><span class="hljs-params">(<span class="hljs-type">int</span> pingInterval)</span> {
        <span class="hljs-keyword">if</span> (pingInterval &gt; <span class="hljs-number">0</span> &amp;&amp; 
            System.currentTimeMillis() - lastUsedTimestamp &gt; pingInterval) {
            <span class="hljs-keyword">try</span> {
                <span class="hljs-keyword">if</span> (realConnection.isClosed()) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                }
                <span class="hljs-type">Statement</span> <span class="hljs-variable">stmt</span> <span class="hljs-operator">=</span> realConnection.createStatement();
                <span class="hljs-keyword">if</span> (poolPingQuery != <span class="hljs-literal">null</span> &amp;&amp; !poolPingQuery.isEmpty()) {
                    stmt.execute(poolPingQuery);
                }
                stmt.close();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
            } <span class="hljs-keyword">catch</span> (SQLException e) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    }
}
</code></pre>
<h2 data-id="heading-16">äº”ã€æ•°æ®æºé…ç½®æµç¨‹</h2>
<p>MyBatisæ”¯æŒå¤šç§æ–¹å¼é…ç½®æ•°æ®æºã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/a57f2c22e2e24b1489969b2ee663aa3a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=12UQYmjPqCzM%2BzzBUcbUCzTGgvs%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-17">5.1 XMLé…ç½®æ–¹å¼</h2>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">"1.0"</span> encoding=<span class="hljs-string">"UTF-8"</span> ?&gt;</span>
<span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//mybatis.org//DTD Config 3.0//EN"</span>
    <span class="hljs-string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
    <span class="hljs-comment">&lt;!-- é…ç½®ç¯å¢ƒ --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;</span>
            <span class="hljs-comment">&lt;!-- äº‹åŠ¡ç®¡ç†å™¨ --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;</span>

            <span class="hljs-comment">&lt;!-- æ•°æ®æºé…ç½® --&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span>
                <span class="hljs-comment">&lt;!-- JDBCé©±åŠ¨ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æ•°æ®åº“URL --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis?useSSL=false<span class="hljs-symbol">&amp;amp;</span>serverTimezone=UTC"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- ç”¨æˆ·å --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- å¯†ç  --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span>

                <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
                <span class="hljs-comment">&lt;!-- é»˜è®¤äº‹åŠ¡éš”ç¦»çº§åˆ« --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"defaultTransactionIsolationLevel"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"2"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æœ€å¤§æ´»åŠ¨è¿æ¥æ•° --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumActiveConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æœ€å¤§ç©ºé—²è¿æ¥æ•° --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumIdleConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æœ€å¤§Checkoutæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumCheckoutTime"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20000"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- ç­‰å¾…æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolTimeToWait"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20000"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æœ€å¤§æœ¬åœ°åè¿æ¥å®¹å¿åº¦ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumLocalBadConnectionTolerance"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"3"</span>/&gt;</span>

                <span class="hljs-comment">&lt;!-- è¿æ¥æµ‹è¯•é…ç½® --&gt;</span>
                <span class="hljs-comment">&lt;!-- æ˜¯å¦å¯ç”¨PingæŸ¥è¯¢ --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- PingæŸ¥è¯¢SQL --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingQuery"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"SELECT 1"</span>/&gt;</span>
                <span class="hljs-comment">&lt;!-- æœªä½¿ç”¨è¶…è¿‡æ­¤æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰æ‰è¿›è¡ŒPingæµ‹è¯• --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingConnectionsNotUsedFor"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"60000"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒé…ç½® --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"production"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://prod-server:3306/mybatis"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"prod_user"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"prod_password"</span>/&gt;</span>

                <span class="hljs-comment">&lt;!-- ç”Ÿäº§ç¯å¢ƒè¿æ¥æ± é…ç½® --&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumActiveConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"50"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumIdleConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingEnabled"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"true"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingQuery"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"SELECT 1"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolPingConnectionsNotUsedFor"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"30000"</span>/&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre>
<h2 data-id="heading-18">5.2 å±æ€§æ–‡ä»¶é…ç½®æ–¹å¼</h2>
<p>åˆ›å»ºjdbc.propertiesæ–‡ä»¶ï¼š</p>
<pre><code class="hljs language-bash" lang="bash">JDBCé…ç½®jdbc.driver=com.mysql.cj.jdbc.Driverjdbc.url=jdbc:mysql://localhost:3306/mybatis?useSSL=<span class="hljs-literal">false</span>&amp;serverTimezone=UTCjdbc.username=rootjdbc.password=123456<span class="hljs-comment"># è¿æ¥æ± é…ç½®jdbc.poolMaximumActiveConnections=20jdbc.poolMaximumIdleConnections=10jdbc.poolMaximumCheckoutTime=20000jdbc.poolTimeToWait=20000</span>
</code></pre>
<p>åœ¨MyBatisé…ç½®ä¸­å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;configuration&gt;
    &lt;!-- å¼•å…¥å±æ€§æ–‡ä»¶ --&gt;
    &lt;properties <span class="hljs-attr">resource</span>=<span class="hljs-string">"jdbc.properties"</span>/&gt;

    &lt;environments <span class="hljs-attr">default</span>=<span class="hljs-string">"development"</span>&gt;
        &lt;environment <span class="hljs-attr">id</span>=<span class="hljs-string">"development"</span>&gt;
            &lt;transactionManager <span class="hljs-attr">type</span>=<span class="hljs-string">"JDBC"</span>/&gt;
            &lt;dataSource <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> value=<span class="hljs-string">"${jdbc.driver}"</span>/&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> value=<span class="hljs-string">"${jdbc.url}"</span>/&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> value=<span class="hljs-string">"${jdbc.username}"</span>/&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> value=<span class="hljs-string">"${jdbc.password}"</span>/&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumActiveConnections"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.poolMaximumActiveConnections}"</span>/&gt;
                &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumIdleConnections"</span> 
                    <span class="hljs-attr">value</span>=<span class="hljs-string">"${jdbc.poolMaximumIdleConnections}"</span>/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
&lt;/configuration&gt;
</code></pre>
<h2 data-id="heading-19">5.3 JNDIé…ç½®æ–¹å¼</h2>
<pre><code class="hljs language-ini" lang="ini">&lt;dataSource <span class="hljs-attr">type</span>=<span class="hljs-string">"JNDI"</span>&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"data_source"</span> value=<span class="hljs-string">"java:comp/env/jdbc/MyDS"</span>/&gt;
&lt;/dataSource&gt;
</code></pre>
<h2 data-id="heading-20">5.4 ç¼–ç¨‹å¼é…ç½®</h2>
<pre><code class="hljs language-ini" lang="ini">// åˆ›å»ºæ•°æ®æº
PooledDataSource <span class="hljs-attr">dataSource</span> = new PooledDataSource()<span class="hljs-comment">;</span>
dataSource.setDriver("com.mysql.cj.jdbc.Driver")<span class="hljs-comment">;</span>
dataSource.setUrl("jdbc:mysql://localhost:3306/mybatis")<span class="hljs-comment">;</span>
dataSource.setUsername("root")<span class="hljs-comment">;</span>
dataSource.setPassword("123456")<span class="hljs-comment">;</span>
// é…ç½®è¿æ¥æ± 
dataSource.setPoolMaximumActiveConnections(20)<span class="hljs-comment">;</span>
dataSource.setPoolMaximumIdleConnections(10)<span class="hljs-comment">;</span>
dataSource.setPoolPingEnabled(true)<span class="hljs-comment">;</span>
dataSource.setPoolPingQuery("SELECT 1")<span class="hljs-comment">;</span>
// åˆ›å»ºSqlSessionFactory
TransactionFactory <span class="hljs-attr">transactionFactory</span> = new JdbcTransactionFactory()<span class="hljs-comment">;</span>
Environment <span class="hljs-attr">environment</span> = new Environment(
    "development", transactionFactory, dataSource
)<span class="hljs-comment">;</span>
Configuration <span class="hljs-attr">configuration</span> = new Configuration(environment)<span class="hljs-comment">;</span>
configuration.addMapper(UserMapper.class)<span class="hljs-comment">;</span>
SqlSessionFactory <span class="hljs-attr">sqlSessionFactory</span> = 
    new SqlSessionFactoryBuilder().build(configuration)<span class="hljs-comment">;</span>
</code></pre>
<h2 data-id="heading-21">å…­ã€è¿æ¥è·å–ä¸é‡Šæ”¾æµç¨‹</h2>
<h2 data-id="heading-22">ç†è§£è¿æ¥çš„è·å–å’Œé‡Šæ”¾æµç¨‹å¯¹äºä½¿ç”¨è¿æ¥æ± è‡³å…³é‡è¦ã€‚</h2>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d93e1c6cc7f649288b942b528cd470c2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=ZEfH4ATammJwlYBWsooY8OukVYg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-23">6.1 è¿æ¥è·å–æµç¨‹</h2>
<pre><code class="hljs language-markdown" lang="markdown"><span class="hljs-bullet">1.</span> åº”ç”¨è¯·æ±‚è¿æ¥
   â†“
<span class="hljs-bullet">2.</span> è°ƒç”¨dataSource.getConnection()
   â†“
<span class="hljs-bullet">3.</span> æ£€æŸ¥ç©ºé—²è¿æ¥æ± 
   â”œâ”€ æœ‰ç©ºé—²è¿æ¥ â†’ å–å‡ºè¿æ¥
   â”‚                â†“
   â”‚             æµ‹è¯•è¿æ¥æœ‰æ•ˆæ€§
   â”‚                â”œâ”€ æœ‰æ•ˆ â†’ è¿”å›è¿æ¥
   â”‚                â””â”€ æ— æ•ˆ â†’ åˆ›å»ºæ–°è¿æ¥
   â”‚
   â””â”€ æ— ç©ºé—²è¿æ¥
<span class="hljs-code">       â†“
      æ£€æŸ¥æ´»åŠ¨è¿æ¥æ•°
       â”œâ”€ æœªè¾¾ä¸Šé™ â†’ åˆ›å»ºæ–°è¿æ¥ â†’ è¿”å›
       â””â”€ å·²è¾¾ä¸Šé™ â†’ ç­‰å¾…ç©ºé—²è¿æ¥
</span></code></pre>
<h2 data-id="heading-24">6.2 è¿æ¥é‡Šæ”¾æµç¨‹</h2>
<pre><code class="hljs language-markdown" lang="markdown">. åº”ç”¨è°ƒç”¨connection.close()
   â†“
<span class="hljs-bullet">2.</span> PooledConnectionæ‹¦æˆªcloseè°ƒç”¨
   â†“
<span class="hljs-bullet">3.</span> ä¸çœŸæ­£å…³é—­ï¼Œè€Œæ˜¯æ‰§è¡Œå½’è¿˜é€»è¾‘
   â†“
<span class="hljs-bullet">4.</span> ä»æ´»åŠ¨è¿æ¥æ± ç§»é™¤
   â†“
<span class="hljs-bullet">5.</span> æ£€æŸ¥ç©ºé—²è¿æ¥æ± 
   â”œâ”€ æœªæ»¡ â†’ å½’è¿˜åˆ°ç©ºé—²è¿æ¥æ± 
   â””â”€ å·²æ»¡ â†’ çœŸæ­£å…³é—­ç‰©ç†è¿æ¥
</code></pre>
<h2 data-id="heading-25">6.3 è¿æ¥ä½¿ç”¨ç¤ºä¾‹</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è·å–SqlSession</span>
SqlSession session = sqlSessionFactory<span class="hljs-selector-class">.openSession</span>();
try {
    <span class="hljs-comment">// è·å–Mapper</span>
    UserMapper mapper = session<span class="hljs-selector-class">.getMapper</span>(UserMapper.class);

    <span class="hljs-comment">// æ‰§è¡ŒæŸ¥è¯¢ï¼ˆå†…éƒ¨è‡ªåŠ¨è·å–è¿æ¥ï¼‰</span>
    User user = mapper<span class="hljs-selector-class">.selectById</span>(<span class="hljs-number">1</span>L);

    <span class="hljs-comment">// æ‰§è¡Œæ›´æ–°</span>
    user<span class="hljs-selector-class">.setName</span>("å¼ ä¸‰");
    mapper<span class="hljs-selector-class">.update</span>(user);

    <span class="hljs-comment">// æäº¤äº‹åŠ¡</span>
    session<span class="hljs-selector-class">.commit</span>();
} catch (Exception e) {
    <span class="hljs-comment">// å›æ»šäº‹åŠ¡</span>
    session<span class="hljs-selector-class">.rollback</span>();
    throw e;
} finally {
    <span class="hljs-comment">//å…³é—­Sessionï¼ˆå½’è¿˜è¿æ¥åˆ°æ± ï¼‰</span>
    session<span class="hljs-selector-class">.close</span>();
}
</code></pre>
<h2 data-id="heading-26">ä¸ƒã€è¿æ¥æ± ç±»å‹å¯¹æ¯”</h2>
<p>MyBatisæ”¯æŒä¸‰ç§æ•°æ®æºç±»å‹ï¼Œå„æœ‰é€‚ç”¨åœºæ™¯ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/0becc75a140e4dc3b07258d73d67f445~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6Zuo5Lit6aOY6I2h55qE6K6w5b-G:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768352429&amp;x-signature=Ba4LxY%2FRnsT9u9HbJUXPG3Q4yH0%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-27">7.1 UNPOOLEDï¼ˆæ— æ± ï¼‰</h2>
<p>ç‰¹ç‚¹ï¼š</p>
<pre><code class="hljs">æ¯æ¬¡è¯·æ±‚åˆ›å»ºæ–°è¿æ¥
ä½¿ç”¨å®Œæ¯•ç«‹å³å…³é—­
ä¸ç»´æŠ¤è¿æ¥æ± 
</code></pre>
<p>é…ç½®ï¼š</p>
<pre><code class="hljs language-ini" lang="ini">&lt;dataSource <span class="hljs-attr">type</span>=<span class="hljs-string">"UNPOOLED"</span>&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> value=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> value=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis"</span>/&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> value=<span class="hljs-string">"root"</span>/&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> value=<span class="hljs-string">"123456"</span>/&gt;
&lt;/dataSource&gt;
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs">æµ‹è¯•ç¯å¢ƒ 
ç®€å•åº”ç”¨  
ä¸éœ€è¦é«˜å¹¶å‘çš„åœºæ™¯
</code></pre>
<h2 data-id="heading-28">7.2 POOLEDï¼ˆæ± åŒ–ï¼‰</h2>
<p>ç‰¹ç‚¹ï¼š</p>
<pre><code class="hljs">ç»´æŠ¤è¿æ¥æ± 
è¿æ¥å¤ç”¨
è‡ªåŠ¨ç®¡ç†è¿æ¥ç”Ÿå‘½å‘¨æœŸ
</code></pre>
<p>é…ç½®ï¼š</p>
<pre><code class="hljs language-xml" lang="xml"><span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"POOLED"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"driver"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"com.mysql.cj.jdbc.Driver"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"url"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"jdbc:mysql://localhost:3306/mybatis"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"username"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"root"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"password"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"123456"</span>/&gt;</span>
    <span class="hljs-comment">&lt;!-- è¿æ¥æ± é…ç½® --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumActiveConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"20"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumIdleConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10"</span>/&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span>

</code></pre>
<pre><code class="hljs">é€‚ç”¨åœºæ™¯ï¼š
ç”Ÿäº§ç¯å¢ƒ
é«˜å¹¶å‘åº”ç”¨
éœ€è¦ä¼˜åŒ–æ€§èƒ½çš„åœºæ™¯
</code></pre>
<h2 data-id="heading-29">7.3 JNDI</h2>
<p>ç‰¹ç‚¹ï¼š</p>
<pre><code class="hljs">ä½¿ç”¨åº”ç”¨æœåŠ¡å™¨ç®¡ç†çš„DataSource
é€šè¿‡JNDIæŸ¥æ‰¾è·å–
æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡
</code></pre>
<p><strong>é…ç½®ï¼š</strong></p>
<pre><code class="hljs language-ini" lang="ini">&lt;dataSource <span class="hljs-attr">type</span>=<span class="hljs-string">"JNDI"</span>&gt;
    &lt;property <span class="hljs-attr">name</span>=<span class="hljs-string">"data_source"</span> value=<span class="hljs-string">"java:comp/env/jdbc/MyDS"</span>/&gt;
&lt;/dataSource&gt;
</code></pre>
<p>é€‚ç”¨åœºæ™¯ï¼š</p>
<pre><code class="hljs">åº”ç”¨æœåŠ¡å™¨ç¯å¢ƒï¼ˆWebLogicã€WebSphereç­‰ï¼‰ 
éœ€è¦åˆ†å¸ƒå¼äº‹åŠ¡æ”¯æŒ
é›†ä¸­ç®¡ç†æ•°æ®æº7.4 è¿æ¥æ± é…ç½®å‚æ•°è¯´æ˜
</code></pre>


















































<table><thead><tr><th>å‚æ•°</th><th>é»˜è®¤å€¼</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>poolMaximumActiveConnections</td><td>10</td><td>æœ€å¤§æ´»åŠ¨è¿æ¥æ•°</td></tr><tr><td>poolMaximumIdleConnections</td><td>5</td><td>æœ€å¤§ç©ºé—²è¿æ¥æ•°</td></tr><tr><td>poolMaximumCheckoutTime</td><td>20000</td><td>æœ€å¤§Checkoutæ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>poolTimeToWait</td><td>20000</td><td>ç­‰å¾…è¿æ¥æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>poolPingEnabled</td><td>false</td><td>æ˜¯å¦å¯ç”¨Pingæµ‹è¯•</td></tr><tr><td>poolPingQuery</td><td>"NO PING QUERY SET"</td><td>Pingæµ‹è¯•SQL</td></tr><tr><td>poolPingConnectionsNotUsedFor</td><td>0</td><td>æœªä½¿ç”¨å¤šä¹…æ‰Pingï¼ˆæ¯«ç§’ï¼‰</td></tr><tr><td>poolMaximumLocalBadConnectionTolerance</td><td>3</td><td>æœ€å¤§æœ¬åœ°åè¿æ¥å®¹å¿åº¦</td></tr></tbody></table>
<h2 data-id="heading-30">å…«ã€æœ€ä½³å®è·µ</h2>
<h2 data-id="heading-31">8.1 å¸¸è§é—®é¢˜è§£å†³</h2>
<pre><code class="hljs language-xml" lang="xml">// é”™è¯¯ç¤ºä¾‹ï¼šå¿˜è®°å…³é—­è¿æ¥
SqlSession session = sqlSessionFactory.openSession();
User user = session.selectOne(
    "com.example.mapper.UserMapper.selectById", 1L
);
//æ²¡æœ‰å…³é—­sessionï¼Œè¿æ¥æ³„æ¼ï¼

//æ­£ç¡®ç¤ºä¾‹ï¼šåŠæ—¶å…³é—­
SqlSession session = sqlSessionFactory.openSession();
try {
    User user = session.selectOne(
        "com.example.mapper.UserMapper.selectById", 1L
    );
} finally {
    session.close(); // ç¡®ä¿è¿æ¥å½’è¿˜åˆ°æ± 
}
<span class="hljs-comment">&lt;!-- è§£å†³æ–¹æ¡ˆ1ï¼šå¢åŠ è¿æ¥æ± å¤§å° --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumActiveConnections"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"50"</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- è§£å†³æ–¹æ¡ˆ2ï¼šå‡å°‘Checkoutæ—¶é—´ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolMaximumCheckoutTime"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"10000"</span>/&gt;</span>
<span class="hljs-comment">&lt;!-- è§£å†³æ–¹æ¡ˆ3ï¼šå¢åŠ ç­‰å¾…æ—¶é—´ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"poolTimeToWait"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"30000"</span>/&gt;</span>
</code></pre>
<h2 data-id="heading-32">8.2 è¿æ¥æ± ç›‘æ§</h2>
<pre><code class="hljs language-scss" lang="scss"><span class="hljs-comment">// è·å–è¿æ¥æ± çŠ¶æ€</span>
PooledDataSource dataSource = (PooledDataSource) sqlSessionFactory
    <span class="hljs-selector-class">.getConfiguration</span>()
    <span class="hljs-selector-class">.getEnvironment</span>()
    <span class="hljs-selector-class">.getDataSource</span>();

<span class="hljs-comment">// è·å–PoolState</span>
PoolState poolState = dataSource<span class="hljs-selector-class">.getPoolState</span>();

<span class="hljs-comment">// ç›‘æ§æŒ‡æ ‡</span>
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¿æ¥æ± çŠ¶æ€ï¼š");
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("ç©ºé—²è¿æ¥æ•°ï¼š" + 
    poolState.getIdleConnections()<span class="hljs-selector-class">.size</span>());
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("æ´»åŠ¨è¿æ¥æ•°ï¼š" + 
    poolState.getActiveConnections()<span class="hljs-selector-class">.size</span>());
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("è¯·æ±‚æ€»æ•°ï¼š" + 
    poolState.getRequestCount());
System<span class="hljs-selector-class">.out</span><span class="hljs-selector-class">.println</span>("åè¿æ¥æ•°ï¼š" + 
    poolState.getBadConnectionCount());
</code></pre>
<h2 data-id="heading-33">ä¹ã€æ€»ç»“</h2>
<p>MyBatisçš„æ•°æ®æºæ¨¡å—æä¾›äº†çµæ´»è€Œå¼ºå¤§çš„æ•°æ®åº“è¿æ¥ç®¡ç†èƒ½åŠ›ã€‚</p>
<pre><code class="hljs language-arduino" lang="arduino">DataSourceFactory - åˆ›å»ºæ•°æ®æºçš„å·¥å‚æ¥å£
UnpooledDataSource - ä¸ä½¿ç”¨è¿æ¥æ± çš„æ•°æ®æº
PooledDataSource - ä½¿ç”¨è¿æ¥æ± çš„æ•°æ®æº
PooledConnection - ä»£ç†è¿æ¥ï¼Œæ‹¦æˆªcloseæ–¹æ³•
PoolState - ç»´æŠ¤è¿æ¥æ± 
</code></pre></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[æ·±å…¥ç†è§£ Volatileï¼šC#.NET å†…å­˜å¯è§æ€§ä¸æœ‰åºæ€§]]></title>    <link>https://juejin.cn/post/7592120202319183922</link>    <guid>https://juejin.cn/post/7592120202319183922</guid>    <pubDate>2026-01-06T23:18:26.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592120202319183922" data-draft-id="7592130164965244966" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="æ·±å…¥ç†è§£ Volatileï¼šC#.NET å†…å­˜å¯è§æ€§ä¸æœ‰åºæ€§"/> <meta itemprop="keywords" content="C#,.NET"/> <meta itemprop="datePublished" content="2026-01-06T23:18:26.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="å”é’æ«"/> <meta itemprop="url" content="https://juejin.cn/user/3737995266234280"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            æ·±å…¥ç†è§£ Volatileï¼šC#.NET å†…å­˜å¯è§æ€§ä¸æœ‰åºæ€§
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3737995266234280/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    å”é’æ«
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T23:18:26.000Z" title="Tue Jan 06 2026 23:18:26 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h3 data-id="heading-0">ç®€ä»‹</h3>
<p><code>Volatile</code> æ˜¯ <code>C#</code> ä¸­å¤„ç†å†…å­˜å¯è§æ€§å’ŒæŒ‡ä»¤é‡æ’åºçš„å…³é”®æœºåˆ¶ï¼Œå®ƒæä¾›äº†å¯¹å†…å­˜è®¿é—®çš„ç²¾ç»†æ§åˆ¶ã€‚åœ¨å¹¶å‘ç¼–ç¨‹ä¸­ï¼Œ<code>volatile</code> å…³é”®å­—å’Œ <code>Volatile</code> ç±»éƒ½æ˜¯è§£å†³å…±äº«å˜é‡å¯è§æ€§é—®é¢˜çš„é‡è¦å·¥å…·ã€‚</p>
<h3 data-id="heading-1">ä¸ºä»€ä¹ˆéœ€è¦volatileï¼Ÿ</h3>
<h4 data-id="heading-2">CPU ç¼“å­˜å¯¼è‡´çš„ â€œå†…å­˜å¯è§æ€§â€ é—®é¢˜</h4>
<p>ç°ä»£ <code>CPU</code> ä¸ºæå‡æ€§èƒ½ï¼Œä¼šå°†é¢‘ç¹è®¿é—®çš„å˜é‡ç¼“å­˜åˆ°æ ¸å¿ƒä¸“å±çš„ç¼“å­˜ï¼ˆ<code>L1/L2/L3</code>ï¼‰ä¸­ï¼Œè€Œéæ¯æ¬¡éƒ½è¯»å†™ä¸»å†…å­˜ã€‚è¿™ä¼šå¯¼è‡´ï¼š</p>
<ul>
<li>
<p>çº¿ç¨‹ A ä¿®æ”¹äº†å…±äº«å­—æ®µçš„å€¼ï¼ˆä»…å†™å…¥è‡ªå·±çš„ <code>CPU</code> ç¼“å­˜ï¼ŒæœªåŒæ­¥åˆ°ä¸»å†…å­˜ï¼‰ï¼›</p>
</li>
<li>
<p>çº¿ç¨‹ B è¯»å–è¯¥å­—æ®µæ—¶ï¼Œä»è‡ªå·±çš„ <code>CPU</code> ç¼“å­˜è¯»å–ï¼ˆä»æ˜¯æ—§å€¼ï¼‰ï¼Œæ— æ³•çœ‹åˆ°çº¿ç¨‹ A çš„ä¿®æ”¹ã€‚</p>
</li>
</ul>
<h4 data-id="heading-3">ç¼–è¯‘å™¨ / CPU çš„ â€œæŒ‡ä»¤é‡æ’åºâ€ ä¼˜åŒ–</h4>
<p>ç¼–è¯‘å™¨ï¼ˆ<code>C#</code> ç¼–è¯‘å™¨ï¼‰å’Œ <code>CPU</code> ä¸ºæå‡æ‰§è¡Œæ•ˆç‡ï¼Œä¼šåœ¨ä¸æ”¹å˜å•çº¿ç¨‹é€»è¾‘çš„å‰æä¸‹ï¼Œè°ƒæ•´æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåº</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// åŸå§‹ä»£ç </span>
<span class="hljs-built_in">bool</span> _isReady = <span class="hljs-literal">false</span>;
<span class="hljs-built_in">int</span> _data = <span class="hljs-number">100</span>;

<span class="hljs-comment">// ç¼–è¯‘å™¨/CPUå¯èƒ½é‡æ’åºä¸ºï¼šå…ˆèµ‹å€¼_dataï¼Œå†èµ‹å€¼_isReadyï¼ˆå•çº¿ç¨‹æ— å½±å“ï¼‰</span>
<span class="hljs-comment">// ä½†å¤šçº¿ç¨‹ä¸‹ï¼Œçº¿ç¨‹Bå¯èƒ½çœ‹åˆ°_isReady=trueï¼Œä½†_dataè¿˜æ˜¯æ—§å€¼</span>
</code></pre>
<p><code>volatile</code> çš„æ ¸å¿ƒä½œç”¨å°±æ˜¯ï¼šç¦æ­¢ç¼“å­˜ + ç¦æ­¢æŒ‡ä»¤é‡æ’åºï¼Œä¿è¯å¤šçº¿ç¨‹å¯¹å­—æ®µçš„è®¿é—® â€œæ‰€è§å³æ‰€å¾—â€ã€‚</p>
<ul>
<li>
<p>æ’å…¥å†…å­˜å±éšœï¼ˆ<code>memory barrier</code>ï¼‰ï¼š</p>
<ul>
<li>
<p><code>Acquire Fence</code>ï¼šè¯»å– <code>volatile</code> å­—æ®µå‰ï¼Œç¦æ­¢å°†åç»­è¯»å–æå‰ã€‚</p>
</li>
<li>
<p><code>Release Fence</code>ï¼šå†™å…¥ <code>volatile</code> å­—æ®µåï¼Œç¦æ­¢å°†ä¹‹å‰å†™å…¥æ¨è¿Ÿã€‚</p>
</li>
</ul>
</li>
<li>
<p>å¼ºåˆ¶æ¯æ¬¡è¯»å†™éƒ½ç›´æ¥è®¿é—®ä¸»å†…å­˜ï¼Œç»•è¿‡ç¼“å­˜ä¼˜åŒ–ã€‚</p>
</li>
</ul>
<h3 data-id="heading-4">æ ¸å¿ƒå®šä¹‰ä¸è¯­æ³•</h3>
<h4 data-id="heading-5">è¯­æ³•è§„åˆ™</h4>
<p><code>volatile</code> åªèƒ½ä¿®é¥°å­—æ®µï¼Œä¸”æœ‰ä¸¥æ ¼çš„ç±»å‹é™åˆ¶ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// æ­£ç¡®ï¼šä¿®é¥°å®ä¾‹å­—æ®µ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-built_in">bool</span> _isRunning;

<span class="hljs-comment">// æ­£ç¡®ï¼šä¿®é¥°é™æ€å­—æ®µ</span>
<span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> <span class="hljs-built_in">int</span> _counter;

<span class="hljs-comment">// é”™è¯¯ï¼šä¸èƒ½ä¿®é¥°æ–¹æ³•/å‚æ•°/å±€éƒ¨å˜é‡/å±æ€§/å¸¸é‡</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">volatile</span> <span class="hljs-keyword">void</span> <span class="hljs-title">DoWork</span>()</span> { } <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯</span>
<span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> VolatileProperty { <span class="hljs-keyword">get</span>; <span class="hljs-keyword">set</span>; } <span class="hljs-comment">// ç¼–è¯‘é”™è¯¯ï¼ˆå±æ€§ä¸èƒ½åŠ volatileï¼‰</span>
</code></pre>
<h4 data-id="heading-6">æ”¯æŒçš„ç±»å‹</h4>
<p><code>volatile</code> ä»…æ”¯æŒä»¥ä¸‹ç±»å‹ï¼ˆé¿å… <code>CPU</code> æ“ä½œçš„åŸå­æ€§é—®é¢˜ï¼‰ï¼š</p>
<ul>
<li>
<p>å¼•ç”¨ç±»å‹ï¼ˆå¦‚ <code>object</code>ã€<code>string</code>ã€è‡ªå®šä¹‰ç±»ï¼‰ï¼›</p>
</li>
<li>
<p>å€¼ç±»å‹ï¼š<code>byteã€sbyteã€shortã€ushortã€intã€uintã€longã€ulongã€charã€floatã€bool</code>ï¼›</p>
</li>
<li>
<p>ä¸Šè¿°ç±»å‹çš„æŒ‡é’ˆï¼ˆå¦‚ <code>int*</code> ï¼‰ã€‚</p>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šä¸æ”¯æŒdoubleã€decimalã€structï¼ˆè‡ªå®šä¹‰å€¼ç±»å‹ï¼‰ã€DateTimeç­‰ï¼Œè¿™äº›ç±»å‹çš„è¯»å†™ä¸æ˜¯åŸå­çš„ï¼Œvolatileæ— æ³•ä¿è¯æ­£ç¡®æ€§ã€‚</p>
</blockquote>
<h4 data-id="heading-7">ç­‰æ•ˆæ–¹æ³•ï¼šVolatile.Read/Volatile.Write</h4>
<p>é™¤äº†å…³é”®å­—ï¼Œ<code>.NET</code> è¿˜æä¾› <code>Volatile</code> é™æ€ç±»çš„ <code>Read/Write</code> æ–¹æ³•ï¼ŒåŠŸèƒ½ä¸ <code>volatile</code> å…³é”®å­—ä¸€è‡´ï¼Œä½†æ›´çµæ´»ï¼ˆå¯åŠ¨æ€æ§åˆ¶è¯»å†™ï¼‰ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// ç­‰ä»·äº volatile ä¿®é¥°çš„ _isRunning = true</span>
Volatile.Write(<span class="hljs-keyword">ref</span> _isRunning, <span class="hljs-literal">true</span>);

<span class="hljs-comment">// ç­‰ä»·äºè¯»å– volatile ä¿®é¥°çš„ _isRunning</span>
<span class="hljs-built_in">bool</span> current = Volatile.Read(<span class="hljs-keyword">ref</span> _isRunning);
</code></pre>
<h3 data-id="heading-8">æ ¸å¿ƒåŸç†ï¼šå†…å­˜å±éšœï¼ˆMemory Barrierï¼‰</h3>
<p><code>volatile</code> çš„åº•å±‚æ˜¯é€šè¿‡æ’å…¥å†…å­˜å±éšœï¼ˆ<code>Memory Barrier</code>ï¼‰ å®ç°çš„ï¼š</p>
<ul>
<li>
<p>è¯»å±éšœï¼ˆ<code>Load Barrier</code>ï¼‰ï¼šè¯»å– <code>volatile</code> å­—æ®µæ—¶ï¼Œæ’å…¥è¯»å±éšœï¼Œå¼ºåˆ¶ <code>CPU</code> ä»ä¸»å†…å­˜è¯»å–å€¼ï¼Œè€Œéç¼“å­˜ï¼›åŒæ—¶ç¦æ­¢å°†è¯»æŒ‡ä»¤é‡æ’åºåˆ°å±éšœä¹‹å‰ã€‚</p>
</li>
<li>
<p>å†™å±éšœï¼ˆ<code>Store Barrier</code>ï¼‰ï¼šå†™å…¥ <code>volatile</code> å­—æ®µæ—¶ï¼Œæ’å…¥å†™å±éšœï¼Œå¼ºåˆ¶ <code>CPU</code> å°†å€¼å†™å…¥ä¸»å†…å­˜ï¼Œè€Œéç¼“å­˜ï¼›åŒæ—¶ç¦æ­¢å°†å†™æŒ‡ä»¤é‡æ’åºåˆ°å±éšœä¹‹åã€‚</p>
</li>
</ul>
<h3 data-id="heading-9">åŸºç¡€ä½¿ç”¨ç¤ºä¾‹</h3>
<h4 data-id="heading-10">å…³é”®å­—ç”¨æ³•</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title">ThreadSafeFlag</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">volatile</span> <span class="hljs-built_in">bool</span> _isRunning = <span class="hljs-literal">true</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Run</span>()</span>
    {
        <span class="hljs-comment">// çº¿ç¨‹1ï¼šå¾ªç¯ç›´åˆ°æ ‡å¿—å…³é—­</span>
        <span class="hljs-keyword">while</span> (_isRunning)
        {
            <span class="hljs-comment">// æ‰§è¡Œå·¥ä½œ</span>
            Thread.SpinWait(<span class="hljs-number">1000</span>);
        }
        Console.WriteLine(<span class="hljs-string">"çº¿ç¨‹åœæ­¢"</span>);
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">Stop</span>()</span>
    {
        <span class="hljs-comment">// çº¿ç¨‹2ï¼šè®¾ç½®æ ‡å¿—</span>
        _isRunning = <span class="hljs-literal">false</span>;
        Console.WriteLine(<span class="hljs-string">"åœæ­¢ä¿¡å·å·²å‘é€"</span>);
    }
}
</code></pre>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">var</span> flag = <span class="hljs-keyword">new</span> ThreadSafeFlag();
<span class="hljs-keyword">var</span> worker = <span class="hljs-keyword">new</span> Thread(flag.Run);
worker.Start();

Thread.Sleep(<span class="hljs-number">100</span>);
flag.Stop();  <span class="hljs-comment">// å¦ä¸€ä¸ªçº¿ç¨‹èƒ½ç«‹å³çœ‹åˆ°å˜åŒ–</span>
worker.Join();
</code></pre>
<p>ä¸åŠ  <code>volatile</code>ï¼šå¯èƒ½å¯¼è‡´ <code>_isRunning</code> è¢«ç¼“å­˜ï¼Œçº¿ç¨‹æ°¸è¿œä¸é€€å‡ºã€‚</p>
<h4 data-id="heading-11">Volatile ç±»é™æ€æ–¹æ³•ï¼ˆ.NET 4.5+ æ¨èï¼‰</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">using</span> System.Threading;

<span class="hljs-keyword">private</span> <span class="hljs-built_in">int</span> _value;

<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-built_in">int</span> <span class="hljs-title">ReadValue</span>()</span> =&gt; Volatile.Read(<span class="hljs-keyword">ref</span> _value);
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">WriteValue</span>(<span class="hljs-params"><span class="hljs-built_in">int</span> newValue</span>)</span> =&gt; Volatile.Write(<span class="hljs-keyword">ref</span> _value, newValue);
</code></pre>
<ul>
<li>
<p><code>Volatile.Read</code>ï¼šå¸¦ <code>Acquire</code> å±éšœçš„è¯»å–ã€‚</p>
</li>
<li>
<p><code>Volatile.Write</code>ï¼šå¸¦ <code>Release</code> å±éšœçš„å†™å…¥ã€‚</p>
</li>
<li>
<p>ä¼˜åŠ¿ï¼šæ›´ç²¾ç¡®æ§åˆ¶å±éšœæ–¹å‘ï¼Œæ¯”å…³é”®å­—æ›´çµæ´»ã€‚</p>
</li>
</ul>
<h4 data-id="heading-12">åŒæ£€æŸ¥é”å•ä¾‹</h4>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-keyword">public</span> <span class="hljs-keyword">sealed</span> <span class="hljs-keyword">class</span> <span class="hljs-title">Singleton</span>
{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">volatile</span> Singleton? _instance;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Singleton Instance
    {
        <span class="hljs-keyword">get</span>
        {
            <span class="hljs-keyword">if</span> (_instance == <span class="hljs-literal">null</span>)
            {
                <span class="hljs-keyword">lock</span> (<span class="hljs-keyword">typeof</span>(Singleton))
                {
                    <span class="hljs-keyword">if</span> (_instance == <span class="hljs-literal">null</span>)
                        _instance = <span class="hljs-keyword">new</span> Singleton();
                }
            }
            <span class="hljs-keyword">return</span> _instance!;
        }
    }

    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-title">Singleton</span>()</span> { }
}
</code></pre>
<h3 data-id="heading-13">ä¼˜ç‚¹ä¸ç¼ºç‚¹</h3>






























<table><thead><tr><th>æ–¹é¢</th><th>ä¼˜ç‚¹</th><th>ç¼ºç‚¹</th></tr></thead><tbody><tr><td><strong>æ€§èƒ½</strong></td><td>æä½å¼€é”€ï¼ˆä»…å†…å­˜å±éšœï¼‰ï¼Œè¿œé«˜äºé”</td><td>ä»æ¯”æ™®é€šå˜é‡æ…¢ï¼ˆç¦ç”¨éƒ¨åˆ†ä¼˜åŒ–ï¼‰</td></tr><tr><td><strong>æ˜“ç”¨æ€§</strong></td><td>ç®€å•å…³é”®å­—æˆ–æ–¹æ³•è°ƒç”¨</td><td>è¯­ä¹‰å¤æ‚ï¼Œæ˜“è¯¯ç”¨</td></tr><tr><td><strong>é€‚ç”¨æ€§</strong></td><td>å®Œç¾ç”¨äºç®€å•æ ‡å¿—ä½ã€çŠ¶æ€åˆ‡æ¢ã€åŒæ£€æŸ¥é”</td><td><strong>ä¸èƒ½</strong>ç”¨äºè®¡æ•°å™¨ã€å¤åˆæ“ä½œ</td></tr><tr><td><strong>å®‰å…¨æ€§</strong></td><td>æä¾›å¿…è¦å†…å­˜æ¨¡å‹ä¿è¯</td><td>ä¸è¶³ä»¥å®ç°å¤æ‚åŒæ­¥</td></tr></tbody></table>
<h3 data-id="heading-14">æ¨èåœºæ™¯</h3>
<h4 data-id="heading-15">æ¨èä½¿ç”¨ <code>volatile</code> çš„åœºæ™¯ï¼š</h4>
<ul>
<li>
<p>å¸ƒå°”æ ‡å¿—ï¼ˆå¦‚åœæ­¢ä¿¡å· <code>_isRunning</code>ï¼‰ã€‚</p>
</li>
<li>
<p>çŠ¶æ€æšä¸¾ï¼ˆå¦‚ <code>Ready/Running/Stopped</code>ï¼‰ã€‚</p>
</li>
<li>
<p>å¼•ç”¨ç±»å‹å­—æ®µçš„åŒæ£€æŸ¥é”å•ä¾‹ã€‚</p>
</li>
<li>
<p>ä¸€å†™å¤šè¯»ï¼ˆ<code>one writer, multiple readers</code>ï¼‰æ¨¡å¼ã€‚</p>
</li>
</ul>
<h4 data-id="heading-16">ä¸æ¨èä½¿ç”¨ <code>volatile</code> çš„åœºæ™¯ï¼š</h4>
<ul>
<li>
<p>è®¡æ•°å™¨ã€ç´¯åŠ æ“ä½œ â†’ ç”¨ <code>Interlocked</code>ã€‚</p>
</li>
<li>
<p>å¤æ‚çŠ¶æ€ â†’ ç”¨ <code>lock</code> æˆ–æ— é”ç»“æ„ã€‚</p>
</li>
<li>
<p>64ä½å€¼ï¼ˆlong/doubleï¼‰åœ¨32ä½è¿›ç¨‹ â†’ ç”¨ <code>Interlocked</code>ã€‚</p>
</li>
</ul>
<h3 data-id="heading-17">Volatile vs Interlocked</h3>



































<table><thead><tr><th>å¯¹æ¯”é¡¹</th><th>Volatile</th><th>Interlocked</th></tr></thead><tbody><tr><td>åŸå­æ€§</td><td>âŒ</td><td>âœ…</td></tr><tr><td>å†…å­˜å±éšœ</td><td>Acquire / Release</td><td>Full Fence</td></tr><tr><td>è¿”å›æ—§å€¼</td><td>âŒ</td><td>âœ…</td></tr><tr><td>é€‚ç”¨åœºæ™¯</td><td>çŠ¶æ€è§‚å¯Ÿ</td><td>çŠ¶æ€ä¿®æ”¹</td></tr><tr><td>æ€§èƒ½</td><td>æ›´å¿«</td><td>ç¨æ…¢</td></tr></tbody></table>
<h3 data-id="heading-18">æ€»ç»“</h3>
<p><code>volatile</code> æ˜¯ <code>.NET</code> å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ä¸€ä¸ªä½çº§ä½†å…³é”®çš„å·¥å…·ï¼Œé€‚åˆç®€å•çš„ä¸€å†™å¤šè¯»æ ‡å¿—åœºæ™¯ã€‚ä½†ç»ä¸èƒ½æ»¥ç”¨ï¼Œå¤§å¤šæ•°çº¿ç¨‹å®‰å…¨éœ€æ±‚åº”ä¼˜å…ˆé€‰æ‹© <code>Interlockedã€lockã€Lazy&lt;T&gt;</code> æˆ–å¹¶å‘é›†åˆã€‚</p>
<pre><code class="hljs language-csharp" lang="csharp"><span class="hljs-comment">// è¯»ï¼šVolatile</span>
<span class="hljs-keyword">var</span> state = Volatile.Read(<span class="hljs-keyword">ref</span> _state);

<span class="hljs-comment">// å†™ï¼šCAS / Exchange</span>
<span class="hljs-keyword">if</span> (state == A)
    Interlocked.CompareExchange(<span class="hljs-keyword">ref</span> _state, B, A);
</code></pre>
<blockquote>
<p>Volatile æ˜¯å¹¶å‘ç¨‹åºçš„â€œè§‚å¯Ÿè€…åè®®â€ï¼Œ
Interlocked æ‰æ˜¯â€œä¿®æ”¹è€…åè®®â€ã€‚</p>
</blockquote></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[PHP å¼‚æ­¥ä¸å¤šçº¿ç¨‹ ä» TrueAsync å±•æœ›æœªæ¥]]></title>    <link>https://juejin.cn/post/7592059801884835883</link>    <guid>https://juejin.cn/post/7592059801884835883</guid>    <pubDate>2026-01-06T23:10:34.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592059801884835883" data-draft-id="7592069113222496275" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="PHP å¼‚æ­¥ä¸å¤šçº¿ç¨‹ ä» TrueAsync å±•æœ›æœªæ¥"/> <meta itemprop="keywords" content="åç«¯,PHP"/> <meta itemprop="datePublished" content="2026-01-06T23:10:34.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="BingoGo"/> <meta itemprop="url" content="https://juejin.cn/user/993614242266077"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            PHP å¼‚æ­¥ä¸å¤šçº¿ç¨‹ ä» TrueAsync å±•æœ›æœªæ¥
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/993614242266077/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    BingoGo
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T23:10:34.000Z" title="Tue Jan 06 2026 23:10:34 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»19åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><h2 data-id="heading-0">PHP å¼‚æ­¥ä¸å¤šçº¿ç¨‹ ä» TrueAsync å±•æœ›æœªæ¥</h2>
<p>RFC TrueAsync 1.7 è®¨è®ºä¸­æœ‰ä¸ªé—®é¢˜ï¼šè¿™ä¸ªæè®®ä¼šå¦‚ä½•ä¸ PHP æ ¸å¿ƒæœªæ¥çš„å˜åŒ–äº’åŠ¨ï¼Ÿè¦è®¾è®¡å¥½è¯­è¨€çš„é•¿æœŸæ¼”è¿›ï¼Œè‡³å°‘å¾—å¯¹ PHP çš„å‘å±•æ–¹å‘æœ‰åŸºæœ¬åˆ¤æ–­ã€‚æœ¬æ–‡è¯•å›¾å›ç­”è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>TrueAsync é¡¹ç›®ä¸ä»…æ˜¯ PHP æ ¸å¿ƒçš„ async æ”¹åŠ¨ï¼Œè¿˜åŒ…æ‹¬å›ç­”ä»¥ä¸‹é—®é¢˜æ‰€éœ€çš„å…¶ä»–ç ”ç©¶ï¼š</p>
<ul>
<li>PHP èƒ½åœ¨å¤šå¤§ç¨‹åº¦ä¸Šå‘å¤šçº¿ç¨‹æ–¹å‘å‘å±•ï¼Ÿ</li>
<li>æ˜¯å¦å­˜åœ¨æ ¹æœ¬æ€§é™åˆ¶ï¼Ÿ</li>
<li>å®ç°çœŸæ­£çš„å¤šçº¿ç¨‹å¯èƒ½éœ€è¦å“ªäº›æ ¸å¿ƒæ”¹åŠ¨ï¼Ÿ</li>
<li>å¯ä»¥å®ç°å“ªäº›è¯­è¨€æŠ½è±¡ï¼Ÿ</li>
</ul>
<p>æœ¬æ–‡ä¸æ˜¯ PHP å¤šçº¿ç¨‹çš„è¯¦å°½ç»¼è¿°ï¼Œä¹Ÿä¸è¿½æ±‚æ¯ä¸ªç»†èŠ‚çš„æŠ€æœ¯ç²¾ç¡®æ€§æˆ–å¤§ä¼—å¯è¯»æ€§ã€‚ä½†å¸Œæœ›å®ƒå¯¹ PHP å¼€å‘è€…æœ‰å‚è€ƒä»·å€¼ï¼Œèƒ½ä¸ºåç»­è®¨è®ºæä¾›æ–¹å‘ã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fcatchadmin.com%2Fpost%2F2026-01%2Fmultithreading-in-php-looking-to-the-future" target="_blank" title="https://catchadmin.com/post/2026-01/multithreading-in-php-looking-to-the-future" ref="nofollow noopener noreferrer">åŸæ–‡ PHP å¼‚æ­¥ä¸å¤šçº¿ç¨‹ ä» TrueAsync å±•æœ›æœªæ¥</a></p>
<h3 data-id="heading-1">å†å²</h3>
<p>å‡ å¹´å‰è¦ç»™ PHP åº”ç”¨åŠ é«˜å®¹é‡é¥æµ‹ï¼Œæˆ‘è¯´åšä¸åˆ°ã€‚çœ‹åˆ° Swoole æ¶æ„åæƒ³æµ‹è¯•ä¸€ä¸‹ã€‚èƒ½ä¸èƒ½åšä¸€ä¸ª APIï¼Œç”Ÿæˆå’Œå¤„ç†å¤§é‡æ•°æ®çš„åŒæ—¶ä¸æ‹–æ…¢å®¢æˆ·ç«¯ï¼Ÿ</p>
<p>æˆ‘ä»¬ç»™ PHP åšäº†ä¸ªä¼˜åŒ–çš„ OpenTelemetryï¼Œåˆ†æ‰¹å†™æ•°æ®ï¼Œæ”¶é›†æˆå¤§å—å†å‘åˆ°ä¸­é—´é¥æµ‹æœåŠ¡å™¨ã€‚æ•°æ®å‹ç¼©ï¼ŒJSON ç»“æ„ç”¨ MessagePack åºåˆ—åŒ–ã€‚</p>
<p>å‡è®¾æ˜¯ï¼šç”¨å•çº¿ç¨‹åç¨‹é€æ­¥æ„å»ºé¥æµ‹æ•°æ®ï¼Œå®šæ—¶æˆ–è¾¾åˆ°é˜ˆå€¼æ—¶å‘é€ã€‚æ²¡æœ‰è·¨çº¿ç¨‹äº¤äº’ï¼Œä»£ç åº”è¯¥å¿«ã€‚çœŸçš„å—ï¼Ÿ</p>
<p>å®éªŒç»“æœï¼šé¥æµ‹è®© API ååé‡å‡åŠã€‚å‡è®¾é”™äº†ã€‚ä¸ºä»€ä¹ˆï¼Ÿæ¦‚å¿µä¸Šçœ‹èµ·æ¥æ²¡é—®é¢˜ã€‚Swoole å·²ç»è®© PHP å‡½æ•°éé˜»å¡ï¼Œåç¨‹åº”è¯¥é«˜æ•ˆæ‰å¯¹ã€‚å“ªé‡Œå‡ºé”™äº†ï¼Ÿ</p>
<p>ç¬¬äºŒç‰ˆæ”¹æˆï¼šé¥æµ‹åªåœ¨ä¸€ä¸ªè¯·æ±‚æœŸé—´æ”¶é›†ï¼Œç«‹å³æ‰”ç»™ä½œä¸šè¿›ç¨‹å»èšåˆã€å‹ç¼©ã€å‘é€ã€‚è¿™ç‰ˆæ€§èƒ½å¥½å¤šäº†ã€‚ä½†ä¸åº”è¯¥å•Šï¼Ÿè¿›ç¨‹é—´æ•°æ®èµ°ç®¡é“ï¼Œä¸€ç«¯åºåˆ—åŒ–å¦ä¸€ç«¯ååºåˆ—åŒ–ã€‚ç®¡é“åœ¨å†…å­˜é‡Œï¼Œä½†ç³»ç»Ÿè°ƒç”¨å¼€é”€ä¸å°ã€‚</p>
<p>åæ¥æ‰¾åˆ°åŸå› ï¼šé¥æµ‹æ•°æ®é‡å¤§ï¼Œå‹ç¼©ç›¸å¯¹ API è¯·æ±‚å¤„ç†åƒæ‰å¤ªå¤š CPUã€‚Swoole åç¨‹å¯¹ I/O é«˜æ•ˆï¼Œä½†å¸®ä¸äº† CPU å¯†é›†å‹ä»»åŠ¡ã€‚</p>
<p>è¿™ä¸ªæ¡ˆä¾‹è¯´æ˜å•çº¿ç¨‹åç¨‹è§£å†³ä¸äº†æ‰€æœ‰é—®é¢˜ã€‚ä¹Ÿè¯´æ˜å¤šçº¿ç¨‹èƒ½è¡¥å……åç¨‹ï¼Œç»™æ›´å¤šé—®é¢˜æä¾›å·¥å…·ã€‚</p>
<h3 data-id="heading-2">å•çº¿ç¨‹ + offload</h3>
<p>æŠŠ CPU å¯†é›†å‹å·¥ä½œå¸è½½åˆ°å•ç‹¬è¿›ç¨‹ä¸æ˜¯ä»€ä¹ˆæ–°å‘æ˜ã€‚è¿™ä¸ªæ¨¡å¼åœ¨ä¸åŒè¯­è¨€å’Œæ¡†æ¶ä¸­ç‹¬ç«‹å‡ºç°ï¼Œå« <code>Single-threaded + offload</code>ã€‚</p>
<p>æ‰“ä¸ªæ¯”æ–¹ï¼šä¸€ä¸ªäººå¿«é€Ÿåˆ†æ‹£ä¿¡ä»¶ï¼ˆæ¯å°æ—¶å‡ åƒå°ï¼‰ï¼Œé‡åŒ…è£¹ç”±å…¶ä»–å‘˜å·¥ç”¨å¡è½¦è£…èµ°ã€‚åˆ†æ‹£å‘˜è¦æ˜¯è‡ªå·±å»æ¬åŒ…è£¹ï¼Œä¿¡ä»¶é˜Ÿåˆ—å°±å †åˆ°å¤©èŠ±æ¿äº†ã€‚</p>
<p><code>Single-threaded + offload</code> æ¨¡å‹æŠŠä»»åŠ¡åˆ†ä¸¤ç±»ï¼š</p>
<ul>
<li><strong>I/O-bound ä»»åŠ¡</strong> â€” è¯»æ–‡ä»¶ã€ç½‘ç»œè°ƒç”¨ã€æ•°æ®åº“è®¿é—®ã€‚å¤§éƒ¨åˆ†æ—¶é—´åœ¨ç­‰å¤–éƒ¨ä¸–ç•Œã€‚é€šè¿‡å¹¶å‘ asyncï¼ˆåç¨‹ã€<code>await</code>ï¼‰ï¼Œä¸€ä¸ªçº¿ç¨‹èƒ½å®¹çº³å‡ åƒä¸ªè¿™ç±»æ“ä½œã€‚</li>
<li><strong>CPU-bound ä»»åŠ¡</strong> â€” å‹ç¼©ã€åŠ å¯†ã€è§£æã€è®¡ç®—ã€‚CPU æ»¡è´Ÿè·è·‘ï¼Œå…‰é å¹¶å‘ä¸å¤Ÿï¼Œå¾—ä¸Šæ›´å¤šæ ¸å¿ƒã€‚</li>
</ul>
<p>æ¨¡å‹åœ¨ç‰©ç†ä¸Šåˆ†ç¦»è¿™ä¸¤ç±»ä»»åŠ¡ï¼šä¸»çº¿ç¨‹ï¼ˆ<code>Event Loop</code>ï¼‰åªç®¡ I/Oï¼ŒCPU ä»»åŠ¡æ‰”ç»™å•ç‹¬çš„çº¿ç¨‹æˆ–è¿›ç¨‹ï¼ˆ<code>Workers</code>ï¼‰ã€‚</p>
<p>Node.js é å•çº¿ç¨‹ <code>Event Loop</code> å‡ºåï¼Œå¾ˆé€‚åˆç½‘ç»œåº”ç”¨ã€‚ä½†å¼€å‘è€…è¦æ˜¯åœ¨è¯·æ±‚å¤„ç†å™¨é‡Œç›´æ¥å¤„ç†å›¾åƒæˆ–å‹ç¼©è§†é¢‘ï¼ŒæœåŠ¡å™¨å°±å˜å—ç“œäº†ã€‚åæ¥åŠ äº† <code>Worker Threads</code>ï¼Œä¸“é—¨è·‘ CPU å¯†é›†å‹æ“ä½œã€‚</p>
<p>Python èµ°äº†ç±»ä¼¼è·¯çº¿ã€‚<code>asyncio</code> å‡ºæ¥åï¼ŒI/O-bound ä»£ç æœ‰äº†å¥½å·¥å…·ï¼Œä½† GILï¼ˆå…¨å±€è§£é‡Šå™¨é”ï¼‰æŒ¡ç€ï¼Œå•è¿›ç¨‹å†…æ²¡æ³•çœŸæ­£ CPU å¹¶è¡Œï¼ˆå†™è¿™ç¯‡æ–‡ç« æ—¶é—®é¢˜å·²è§£å†³ï¼‰ã€‚é˜»å¡æ“ä½œæœ‰ <code>loop.run_in_executor()</code> å’Œ <code>asyncio.to_thread()</code>ï¼ˆPython 3.9+ï¼‰ï¼ŒæŠŠé‡æ´»å¸è½½åˆ°çº¿ç¨‹æ± æˆ–è¿›ç¨‹æ± ã€‚<code>Event Loop</code> ä¿æŒå“åº”ï¼Œè®¡ç®—å¹¶è¡Œè·‘ã€‚</p>
<p>PHP/Swoole ä¹Ÿæ˜¯è¿™ä¸ªæ¶æ„ï¼š<code>Request Workers</code> ç”¨åç¨‹å¤„ç† HTTP è¯·æ±‚ï¼Œ<code>Task Workers</code> è·‘é‡è®¡ç®—ã€‚é€šè¿‡ UnixSocket æˆ–ç®¡é“é€šä¿¡ï¼Œå•è¿›ç¨‹èƒ½å¤„ç†æ¯ç§’çº¦ 10 ä¸‡æ¬¡æ“ä½œã€‚</p>
<h4 data-id="heading-3">æ¨¡å‹çš„ä¼˜åŠ¿</h4>
<p><strong>1. èµ„æºæ•ˆç‡</strong></p>
<p>å•çº¿ç¨‹ <code>Event Loop</code> èƒ½ä»¥æå°å¼€é”€æœåŠ¡å‡ åƒä¸ªå¹¶å‘ I/O æ“ä½œã€‚åç¨‹ä»»åŠ¡é—´åˆ‡æ¢æ¯”æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢ä¾¿å®œå¾—å¤šã€‚CPU-bound ä»»åŠ¡åœ¨å¤šæ ¸ä¸ŠçœŸæ­£å¹¶è¡Œâ€”â€”æ¯ä¸ª worker å ä¸€ä¸ªæ ¸å¿ƒï¼Œäº’ä¸å¹²æ‰°ã€‚</p>
<p><strong>2. å¼€å‘ç®€å•</strong></p>
<p><code>Event Loop</code> é‡Œçš„ä»£ç ä¸ç”¨äº’æ–¥é”ã€ä¿¡å·é‡è¿™äº›å¤šçº¿ç¨‹ç¼–ç¨‹çš„ç©æ„å„¿ã€‚å•çº¿ç¨‹æ¨¡å‹ä¸€æ¬¡åªè·‘ä¸€ä¸ªä»»åŠ¡ï¼Œç«æ€æ¡ä»¶ä¸å¯èƒ½å‡ºç°ã€‚<code>Workers</code> å¹¶è¡Œè·‘ï¼Œä½†åªè¦éµå¾ª <code>Shared Nothing</code>ï¼ŒåŒæ­¥é—®é¢˜å°±ä¸å­˜åœ¨ã€‚</p>
<p>å¤šçº¿ç¨‹ä»£ç å’Œå•çº¿ç¨‹ async ä»£ç çš„å¤æ‚åº¦å·®è·å¾ˆå¤§ã€‚ç°ä»£è¯­è¨€å’Œæ¡†æ¶éƒ½å¥”ç€å•çº¿ç¨‹ async å»ï¼Œä¸èµ°ç»å…¸å¤šçº¿ç¨‹ã€‚</p>
<p><strong>3. ç¼–è¯‘å™¨/è¿è¡Œæ—¶æ›´ç®€å•</strong></p>
<p>å•çº¿ç¨‹æ¨¡å‹çš„ async å‡½æ•°å¯¹ç¼–è¯‘å™¨å’Œè¿è¡Œæ—¶ç®€å•å¾—å¤šã€‚å¥½çš„å¤šçº¿ç¨‹è¯­è¨€éœ€è¦è‡ªå·±çš„ä»£ç ç”Ÿæˆç®¡é“ã€‚PHP æœ‰ä¸ªç¡¬çº¦æŸï¼šéƒ¨åˆ†ä»£ç ç”¨ C å†™çš„ï¼Œæ²¡æ³•å¯¹çº¿ç¨‹ã€å†…å­˜ç®¡ç†ã€å‚æ•°ä¼ é€’åšé«˜æ•ˆçš„å­—èŠ‚ç çº§ä¼˜åŒ–ã€‚Go çš„è®¾è®¡å¤æ‚å‡ºåï¼šä¸“æœ‰æ ˆã€å¤æ‚ GCï¼Œéƒ½æ˜¯é«˜æ•ˆ goroutines å’Œ channels å¿…éœ€çš„ã€‚PHP çš„ GC åé¢ä¼šè®²ï¼Œå…ˆåˆ«æ”¾æ¾ã€‚</p>
<p><strong>4. æ‰‹åŠ¨è´Ÿè½½åˆ†é…</strong></p>
<p>å¼€å‘è€…å¯ä»¥ä¸»åŠ¨åœ¨è¯·æ±‚å¤„ç†ä»£ç å’Œ worker æ± ä¹‹é—´åˆ†é…è´Ÿè½½ã€‚æ‰‹åŠ¨æ§åˆ¶èƒ½ä»ç¡¬ä»¶æ¦¨å‡ºç†è®ºæœ€å¤§å€¼ã€‚ä½†è¿™ä¹Ÿæ˜¯ç¼ºç‚¹ã€‚</p>
<h4 data-id="heading-4">æ¨¡å‹çš„åŠ£åŠ¿</h4>
<p><strong>1. æ‰‹åŠ¨è´Ÿè½½åˆ†é…</strong></p>
<p>æ‰‹åŠ¨åˆ†é…æ˜¯åŒåˆƒå‰‘ã€‚å¼€å‘è€…å¯ä»¥é’ˆå¯¹ç‰¹å®šä»»åŠ¡ä¼˜åŒ–ï¼Œä¹Ÿå¯èƒ½è¯¯åˆ¤ä»€ä¹ˆè¯¥æ”¾ I/O ä»£ç ã€ä»€ä¹ˆè¯¥æ”¾ workersã€‚I/O ä»£ç å¡äº†é‡æ´»ä¼šè¿‡è½½ï¼Œå“åº”å˜æ…¢ã€å»¶è¿Ÿä¸Šå‡ã€‚</p>
<p>è¿™ä¸ªæ¨¡å‹è¦æ±‚ PHP å¼€å‘è€…æœ‰è¶³å¤ŸæŠ€èƒ½ï¼Œæˆ–è€…ä¾èµ–æ¡†æ¶ä½œè€…æä¾›çš„ç°æˆæ–¹æ¡ˆã€‚</p>
<p><strong>2. ä¸é€‚åˆæ‰€æœ‰ä»»åŠ¡</strong></p>
<p><code>Single-threaded + offload</code> å¾ˆé€‚åˆ Web æœåŠ¡å™¨ã€APIã€å¾®æœåŠ¡â€”â€”ä¸»è¦è´Ÿè½½æ˜¯æ•°æ®åº“ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œè°ƒç”¨è¿™äº› I/Oã€‚ä½†æ¯ä¸€æ­¥éƒ½è¦å¯†é›†è®¡ç®—çš„åœºæ™¯â€”â€”ç§‘å­¦è®¡ç®—ã€æ¸²æŸ“ã€æœºå™¨å­¦ä¹ â€”â€”è¿™ä¸ªæ¨¡å‹æ•ˆæœå°±å·®äº†ã€‚é‚£äº›åœºæ™¯æ›´é€‚åˆå®Œå…¨å¤šçº¿ç¨‹ã€‚</p>
<p>ä½ å¯èƒ½è¯´ï¼šèƒ½æ¥å—ï¼å‡†å¤‡å¥½äº†ï¼ä½† PHP æœ¬èº«å‡†å¤‡å¥½å¤šçº¿ç¨‹äº†å—ï¼Ÿ</p>
<h3 data-id="heading-5">PHP å‡†å¤‡å¥½å¤šçº¿ç¨‹äº†å—ï¼Ÿ</h3>
<p>å¼€å‘ TrueAsync æ—¶ï¼Œæœ€éš¾çš„è®¨è®ºä¹‹ä¸€æ˜¯"ä¸ºä»€ä¹ˆ PHP æ²¡æœ‰ async"ã€‚è§£é‡Š PHP ä¸ºä»€ä¹ˆè¿˜æ²¡å‡†å¤‡å¥½å¤šçº¿ç¨‹å¯èƒ½åŒæ ·éš¾ã€‚ä¸è¿‡å…ˆèŠèŠå¤šçº¿ç¨‹æœ¬èº«ã€‚æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿæˆ–è€…æ¢ä¸ªé—®æ³•ï¼šæˆ‘ä»¬ä¸ºä»€ä¹ˆä¸éœ€è¦å®ƒï¼Ÿ</p>
<p><strong>å¤šçº¿ç¨‹ä¸æ˜¯å¹¶è¡Œæ‰§è¡Œä»£ç çš„å¿…è¦æ¡ä»¶ã€‚</strong></p>
<p>"å¹¶è¡Œå¿…é¡»å¤šçº¿ç¨‹"è¿™ä¸ªæƒ³æ³•æ—©å°±åˆ»åœ¨ç¨‹åºå‘˜è„‘å­é‡Œäº†ï¼Œå°±åƒ"é»‘æ´ä¼šå¸ä¸œè¥¿"åˆ»åœ¨æµè¡Œæ–‡åŒ–é‡Œä¸€æ ·ã€‚</p>
<p>å¹¶è¡Œæ‰§è¡Œå®Œå…¨å¯ä»¥ç”¨è¿›ç¨‹ï¼Œè¿›ç¨‹å½¼æ­¤éš”ç¦»ï¼ˆ80386 æ¶æ„å°±æœ‰äº†ï¼‰ã€‚è¿›ç¨‹é€šè¿‡ IPC é€šä¿¡ï¼Œå®ŒæˆçŠ¶æ€é€šè¿‡ä¿¡å·ï¼ˆæ“ä½œç³»ç»Ÿäº‹ä»¶ï¼‰è·Ÿè¸ªã€‚é‚£ä¸ºä»€ä¹ˆè¿˜è¦çº¿ç¨‹ï¼Ÿ</p>
<p>è¦è€å®å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå¾—ç©¿è¶Šå›å»è¯·å½“å¹´åšå†³å®šçš„äººè§£é‡Šï¼šEdsger Dijkstraã€Fernando CorbatÃ³ã€Barbara Liskovã€Richard Rashidã€‚åŠä¸ªè„±å£ç§€æŒºå¥½ã€‚ä½†å°±ç®—ä»–ä»¬éƒ½æ¥äº†ï¼Œå¯èƒ½ä¹Ÿè¯´ä¸å‡ºç›´æ¥ç­”æ¡ˆã€‚</p>
<p>ä¸‹é¢è¿™ä¸ªè¯´æ³•æ˜¯é”™çš„ï¼š</p>
<blockquote>
<p>çº¿ç¨‹æ˜¯ä¸ºäº†è®©å¹¶è¡Œä»£ç ä¸ç”¨é¢å¤–å·¥å…·å°±èƒ½å…±äº«å†…å­˜ã€‚</p>
</blockquote>
<p>è¿›ç¨‹ä¹Ÿèƒ½å…±äº«å†…å­˜ï¼Œä½†å¾—æŠŠæ®µæ˜ å°„åˆ°åœ°å€ç©ºé—´ï¼ˆé¢å¤–å·¥å…·ï¼‰ã€‚çº¿ç¨‹é»˜è®¤å…±äº«æ‰€æœ‰å†…å­˜ã€‚çº¿ç¨‹ A èƒ½è®¿é—®çš„å˜é‡ <code>x</code>ï¼Œçº¿ç¨‹ B åœ¨åŒä¸€åœ°å€ä¹Ÿèƒ½è®¿é—®ï¼Œä¸ç”¨ä»»ä½•æŠ€å·§â€¦â€¦ä½†ç­‰ç­‰ï¼å¤šä¸ªçº¿ç¨‹æ²¡æ³•åœ¨ä¸åŠ é¢å¤–å·¥å…·çš„æƒ…å†µä¸‹å®‰å…¨ä½¿ç”¨å…±äº«å˜é‡ã€‚</p>
<p>æ›´å‡†ç¡®çš„è¯´æ³•æ˜¯ï¼š</p>
<blockquote>
<p>çº¿ç¨‹æ˜¯ä¸ºäº†åœ¨ä»»åŠ¡é—´ä¼ é€’å†…å­˜æ—¶æ²¡æœ‰é¢å¤–å¼€é”€ã€‚</p>
</blockquote>
<p>å¦‚æœçº¿ç¨‹ç”¨å†…å­˜ä¼ æ¶ˆæ¯ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½è®¿é—®æŸå—å†…å­˜åŒºåŸŸï¼Œé‚£åœ¨å†…å­˜å’Œ CPU ä¸¤æ–¹é¢éƒ½æ˜¯æœ€é«˜æ•ˆçš„ã€‚çº¿ç¨‹åˆ»æ„é¿å…å…±äº«å†…å­˜ã€‚è¿™ä¸ªæ¨¡å‹å« <code>Shared Nothing</code>ã€‚</p>
<p><strong>çº¿ç¨‹æ˜¯ä¸ºäº†åœ¨ä»»åŠ¡é—´é«˜æ•ˆä¼ æ•°æ®ã€‚</strong> è·Ÿ"é»‘æ´ä¸å¸ä¸œè¥¿"ä¸€æ ·æ˜¯äº‹å®ã€‚</p>
<h3 data-id="heading-6">PHP å†…å­˜æ¨¡å‹</h3>
<p>PHP æ€ä¹ˆå¤„ç†å†…å­˜ï¼Ÿç®€åŒ–çš„æŠ½è±¡æ¨¡å‹ï¼š</p>
<ul>
<li>ä»£ç </li>
<li>æ•°æ®</li>
<li>PHP VM çŠ¶æ€</li>
</ul>
<p>çº¿ç¨‹é—´å…±äº« PHP ä»£ç å·²ç»èƒ½åšåˆ°ï¼ˆPHP JIT è§£å†³äº†ï¼‰ã€‚å…¶ä»–ç»„ä»¶ç´§å¯†è€¦åˆï¼Œæ‹†ä¸å¼€ã€‚æ¯”å¦‚ PHP ç”¨ä¸€ä¸ªå…¨å±€ <code>object_store</code> å­˜æ‰€æœ‰åˆ›å»ºå¯¹è±¡çš„å¼•ç”¨ã€‚PHP å†…å­˜ç®¡ç†å™¨æ˜¯ç»™å•ä¸ª PHP VM çš„å¯¹è±¡è®¾è®¡çš„ï¼Œä¸é¢å‘å¤šçº¿ç¨‹ã€‚PHP åƒåœ¾æ”¶é›†å™¨å¤„ç†ä¸äº†ä¸åŒçº¿ç¨‹çš„æ•°æ®ï¼Œç”šè‡³è¦å®Œå…¨åœæ‰ VMï¼Œå› ä¸ºå®ƒç›´æ¥æ”¹å¯¹è±¡çš„ <code>refcount</code>ã€‚</p>
<p>æ‰€ä»¥ <strong>PHP æ˜¯ä¸¥æ ¼çš„å•çº¿ç¨‹æ¨¡å‹ï¼Œå¸¦ stop-the-world GC</strong>ã€‚</p>
<h3 data-id="heading-7">åœ¨çº¿ç¨‹é—´ç§»åŠ¨ PHP VM</h3>
<p>PHP ç”¨çº¿ç¨‹å±€éƒ¨å­˜å‚¨ï¼ˆ<code>Thread-Local Storage</code>ï¼ŒTLSï¼‰ä¿å­˜æ¯ä¸ªçº¿ç¨‹çš„ VM çŠ¶æ€ã€‚è¿™å¯¹ ZTSï¼ˆZend Thread Safetyï¼‰æ¨¡å¼ä¸‹çº¿ç¨‹é—´éš”ç¦»å¾ˆå…³é”®ã€‚</p>
<p>ç°ä»£ PHP æ„å»ºç”¨ C11 æ ‡å‡†çš„ <code>__thread</code>ï¼ˆMSVC é‡Œæ˜¯ <code>__declspec(thread)</code>ï¼‰è·å– VM çŠ¶æ€æŒ‡é’ˆã€‚é€Ÿåº¦å¾ˆå¿«ï¼Œx86_64 ä¸Šå°±æ˜¯ä» FS æˆ– GS å¯„å­˜å™¨çš„åŸºå€è¯»ä¸€ä¸ªåç§»é‡ã€‚</p>
<pre><code class="hljs language-asm" lang="asm">; offset - ç¼–è¯‘æ—¶è®¡ç®—çš„å¸¸é‡åç§»é‡
; fs - å†…å­˜æ®µçš„åŸºåœ°å€
mov rax, QWORD PTR fs:offset
</code></pre>
<p>FS/GS å¯¹æ¯ä¸ªçº¿ç¨‹å”¯ä¸€ï¼ˆæ“ä½œç³»ç»Ÿä¿è¯ï¼‰ï¼Œè¯»å‡ºæ¥çš„æ€»æ˜¯æ­£ç¡®çš„ VM çŠ¶æ€æŒ‡é’ˆã€‚</p>
<p>èƒ½åœ¨çº¿ç¨‹é—´ç§»åŠ¨ VM çŠ¶æ€ï¼Œå°±èƒ½å®ç°ç±»ä¼¼ Go åç¨‹æˆ– actors çš„åŠŸèƒ½ã€‚ç°ä»£ VM é€šè¿‡è‡ªå®šä¹‰ä»£ç ç”Ÿæˆä¼ ä¸Šä¸‹æ–‡ï¼Œç”¨ CPU å¯„å­˜å™¨ä¼  VM çŠ¶æ€ã€‚PHP åšä¸åˆ°è¿™ä¸ªï¼Œå› ä¸ºåº•å±‚ç”¨ C å‡½æ•°ï¼ŒC æ²¡æ³•ç»™æ¯ä¸ªå‡½æ•°ä¼ éšå¼ä¸Šä¸‹æ–‡å‚æ•°ã€‚åœ¨çº¿ç¨‹é—´ç§»åŠ¨ PHP VM çŠ¶æ€ä¼šæŸå¤±ä¸€å®šæ€§èƒ½ã€‚</p>
<p>ä½†å¦‚æœåªç§»åŠ¨æ‰§è¡Œä»£ç éœ€è¦çš„é‚£ä¸€å°éƒ¨åˆ† VM çŠ¶æ€å‘¢ï¼Ÿæ¯”å¦‚ PHP Fiber åˆ‡æ¢æ—¶ä¼šå¤åˆ¶æŒ‡å‘å…¨å±€ç»“æ„ï¼ˆ<code>zend_executor_globals</code>ï¼‰çš„éƒ¨åˆ†æŒ‡é’ˆã€‚</p>
<p>å¦‚æœæŠŠ PHP VM æ¦‚å¿µä¸Šåˆ†æˆä¸¤éƒ¨åˆ†ï¼š</p>
<ul>
<li><strong>PHP VM shared</strong>ã€‚ç±»ã€å‡½æ•°ã€å¸¸é‡ã€ini æŒ‡ä»¤ã€å¯æ‰§è¡Œä»£ç ã€‚</li>
<li><strong>PHP VM movable</strong>ã€‚éœ€è¦ç§»åŠ¨çš„ VM éƒ¨åˆ†ã€‚</li>
</ul>
<p><img src="https://image.catchadmin.com/202601060808667.png" alt="PHP Memory Model" loading="lazy"/></p>
<p>æœ‰äº›ç»“æ„å¯ä»¥æ ‡è®°ä¸ºå…±äº«ï¼Œæœ‰äº›æ ‡è®°ä¸ºå¯ç§»åŠ¨ï¼›<code>Executor Globals</code> ç”šè‡³å¯ä»¥æ‹†æˆå…±äº«å’Œå¯ç§»åŠ¨ä¸¤éƒ¨åˆ†ï¼Œå®ç°çº¿ç¨‹é—´é«˜æ•ˆçš„ VM çŠ¶æ€ç§»åŠ¨ã€‚æ‰©å±•å…¨å±€ç»“æ„ä¸ä¼šå› ä¸ºå¤šä¸€å±‚é—´æ¥è€ŒæŸå¤±æ€§èƒ½ï¼Œå› ä¸ºå®ƒä»¬æœ¬æ¥å°±åœ¨ç”¨é—´æ¥è®¿é—®ã€‚</p>
<p>é—®é¢˜å‡ºåœ¨ä»£ç ç¼–è¯‘ç›¸å…³çš„ç»“æ„ä¸Šã€‚PHP é€šè¿‡ <code>include</code>/<code>require</code>ã€<code>eval</code> å’Œè‡ªåŠ¨åŠ è½½æ˜¯åŠ¨æ€çš„ï¼Œè¿™è®© VM çŠ¶æ€å¾ˆéš¾æœ‰æ•ˆæ‹†æˆå…±äº«å’Œå¯ç§»åŠ¨ä¸¤éƒ¨åˆ†ã€‚å¦‚æœèƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒPHP å°±èƒ½ä»¥å¾ˆå°çš„å¼€é”€åœ¨çº¿ç¨‹é—´ç§»åŠ¨éƒ¨åˆ† VM çŠ¶æ€ã€‚</p>
<h3 data-id="heading-8">åœ¨çº¿ç¨‹é—´ä¼ é€’å¯¹è±¡</h3>
<p>PHP è¦æ”¹ä»€ä¹ˆæ‰èƒ½å®‰å…¨åœ°åœ¨çº¿ç¨‹é—´ä¼ é€’å¯¹è±¡ï¼Ÿæ€ä¹ˆåšï¼Ÿ</p>
<p>ä»è¯­è¨€å±‚é¢çœ‹ã€‚å‡è®¾ <code>$obj</code> é‡Œæœ‰ä¸ª <code>SomeObject</code> å®ä¾‹ï¼Œè¦å‘åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚èƒ½åšåˆ°å—ï¼Ÿ</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeObject</span>();

<span class="hljs-variable">$thread</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$obj</span></span>) </span>{
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">someMethod</span>();
});

<span class="hljs-variable">$thread</span>-&gt;<span class="hljs-title function_ invoke__">join</span>();
</code></pre>
<p><code>SomeObject</code> åªå±äº <code>$obj</code>ï¼Œå¯ä»¥å®‰å…¨åœ°æŠŠåœ°å€ä»ä¸€ä¸ªçº¿ç¨‹ç§»åˆ°å¦ä¸€ä¸ªã€‚ä¸»çº¿ç¨‹çš„ <code>$obj</code> ä¼šè¢«é”€æ¯ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeObject</span>();
<span class="hljs-variable">$thread</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$obj</span></span>) </span>{
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">someMethod</span>();
});

<span class="hljs-comment">// $obj åœ¨è¿™é‡Œæœªå®šä¹‰</span>
<span class="hljs-variable">$thread</span>-&gt;<span class="hljs-title function_ invoke__">join</span>();
</code></pre>
<p>ä¸Šé¢çš„ä»£ç è·Ÿ C++ å’Œ Rust çš„ç§»åŠ¨è¯­ä¹‰å®Œå…¨ä¸€æ ·ã€‚è¿™ç§çº¿ç¨‹é—´ä¼ å†…å­˜çš„æ–¹å¼ï¼š</p>
<ul>
<li><strong>å®‰å…¨</strong>ã€‚åªæœ‰ä¸€ä¸ªçº¿ç¨‹æ‹¥æœ‰å¯¹è±¡ã€‚</li>
<li><strong>æ²¡æœ‰å¤åˆ¶æˆ–åºåˆ—åŒ–å¼€é”€</strong>ã€‚</li>
</ul>
<p>ä¸ºäº†è®©è¡Œä¸ºå¯é¢„æµ‹ã€é™æ€åˆ†æå™¨èƒ½è¯»æ‡‚ï¼Œåº”è¯¥åŠ ç‰¹æ®Šçš„ç§»åŠ¨è¯­æ³•ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$obj</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SomeObject</span>();

<span class="hljs-comment">// consume $obj è¡¨ç¤ºç§»åŠ¨å¯¹è±¡</span>
<span class="hljs-variable">$thread</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) <span class="hljs-keyword">use</span> (<span class="hljs-params">consume <span class="hljs-variable">$obj</span></span>) </span>{
    <span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>-&gt;<span class="hljs-title function_ invoke__">someMethod</span>();
});

<span class="hljs-comment">// $obj åœ¨è¿™é‡Œæœªå®šä¹‰ã€‚åœ¨ PHP9 ä¸­åº”è¯¥åœ¨è¿™é‡ŒæŠ¥å‘Šé”™è¯¯ã€‚</span>
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$obj</span>;
</code></pre>
<p>çœ‹ç€ä¸é”™ï¼Ÿ</p>
<p>ä½†ç§»åŠ¨ <code>refcount = 1</code> çš„å¯¹è±¡æœ‰é—®é¢˜ã€‚</p>
<p>çœ‹ä¸ªåˆ†ç±»æ ‘çš„ä¾‹å­ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$electronics</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CategoryNode</span>(<span class="hljs-string">'Electronics'</span>);
<span class="hljs-variable">$categoriesTree</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tree</span>();
<span class="hljs-variable">$categoriesTree</span>-&gt;<span class="hljs-title function_ invoke__">addToPath</span>(<span class="hljs-string">'/products/electronics'</span>, <span class="hljs-variable">$electronics</span>);
<span class="hljs-variable">$categoriesTree</span>-&gt;<span class="hljs-title function_ invoke__">addToPath</span>(<span class="hljs-string">'/popular/electronics'</span>, <span class="hljs-variable">$electronics</span>);  
<span class="hljs-comment">// åŒä¸€ä¸ªåˆ†ç±»ï¼</span>
</code></pre>
<p><code>$electronics</code> åœ¨æ ‘é‡Œå‡ºç°ä¸¤æ¬¡ï¼ˆ<code>refcount = 2</code>ï¼‰ã€‚æŠŠ <code>$categoriesTree</code> ç§»åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ä¼šæ€æ ·ï¼Ÿ</p>
<p>è¦å®‰å…¨ç§»åŠ¨ï¼Œå¿…é¡»ä¿è¯å›¾é‡Œæ‰€æœ‰å¯¹è±¡éƒ½æ²¡æœ‰å¤–éƒ¨å¼•ç”¨ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-variable">$node</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">CategoryNode</span>(<span class="hljs-string">'Electronics'</span>);
<span class="hljs-variable">$categoriesTree</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Tree</span>();
<span class="hljs-variable">$categoriesTree</span>-&gt;<span class="hljs-title function_ invoke__">addToPath</span>(<span class="hljs-string">'/products/electronics'</span>, <span class="hljs-variable">$node</span>);

<span class="hljs-variable">$favourites</span> = [<span class="hljs-variable">$node</span>];  <span class="hljs-comment">// å¤–éƒ¨å¼•ç”¨ï¼</span>
<span class="hljs-variable">$thread</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"/>) <span class="hljs-keyword">use</span> (<span class="hljs-params"><span class="hljs-variable">$categoriesTree</span></span>) </span>{
    <span class="hljs-comment">// $categoriesTree è¢«ç§»åŠ¨</span>
});

<span class="hljs-comment">// $favourites[0] ç°åœ¨æŒ‡å‘å¦ä¸€ä¸ªçº¿ç¨‹ä¸­çš„å†…å­˜</span>
<span class="hljs-comment">// æ‚¬ç©ºæŒ‡é’ˆï¼</span>
</code></pre>
<p>å®‰å…¨ç§»åŠ¨éœ€è¦ï¼š</p>
<ul>
<li><strong>å®Œæ•´å›¾éå†</strong>ï¼šæ£€æŸ¥æ‰€æœ‰åµŒå¥—å¯¹è±¡ã€‚</li>
<li><strong>Refcount æ£€æŸ¥</strong>ï¼šå›¾é‡Œæ¯ä¸ªå¯¹è±¡éƒ½è¦æŸ¥ã€‚</li>
<li><strong>èº«ä»½ä¿ç•™</strong>ï¼šå›¾å†…çš„é‡å¤é¡¹å¾—ä¿æŒé‡å¤ã€‚</li>
</ul>
<p>å¯ä»¥ä¸ºæ­¤è®¾è®¡ç®—æ³•ï¼Œå«æ·±æ‹·è´ã€‚ç®€å•å®ç°å¤§æ¦‚è¿™æ ·ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-comment">// æ·±æ‹·è´ä¼ªä»£ç </span>
<span class="hljs-comment">// çº¿ç¨‹ A ä¸­çš„æºå›¾</span>
<span class="hljs-variable">$node</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Node</span>(<span class="hljs-string">'A'</span>);        <span class="hljs-comment">// addr: 0x1000</span>
<span class="hljs-variable">$tree</span>-&gt;left = <span class="hljs-variable">$node</span>;          <span class="hljs-comment">// addr: 0x1000</span>
<span class="hljs-variable">$tree</span>-&gt;right = <span class="hljs-variable">$node</span>;         <span class="hljs-comment">// addr: 0x1000 (ç›¸åŒå¼•ç”¨)</span>

<span class="hljs-comment">// æ·±æ‹·è´åˆ°çº¿ç¨‹ Bï¼ˆå¸¦ MM çš„ä¼ªä»£ç ï¼‰</span>
<span class="hljs-variable">$copied_map</span> = [];  <span class="hljs-comment">// å“ˆå¸Œè¡¨: addr_source -&gt; addr_target</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">deepCopyToThread</span>(<span class="hljs-params"><span class="hljs-keyword">object</span> <span class="hljs-variable">$obj</span>, Thread <span class="hljs-variable">$target_thread_mm</span></span>) 
</span>{
    <span class="hljs-variable">$source_addr</span> = <span class="hljs-title function_ invoke__">get_object_address</span>(<span class="hljs-variable">$obj</span>);
    <span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-variable">$copied_map</span>[<span class="hljs-variable">$source_addr</span>])) {
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$copied_map</span>[<span class="hljs-variable">$source_addr</span>];  <span class="hljs-comment">// å·²ç»å¤åˆ¶ï¼</span>
    }
    <span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªçº¿ç¨‹çš„ MM ä¸­åˆ†é…å†…å­˜</span>
    <span class="hljs-variable">$new_addr</span> = <span class="hljs-variable">$target_thread_mm</span>-&gt;<span class="hljs-title function_ invoke__">allocate</span>(<span class="hljs-title function_ invoke__">sizeof</span>(<span class="hljs-variable">$obj</span>));
    <span class="hljs-variable">$copied_map</span>[<span class="hljs-variable">$source_addr</span>] = <span class="hljs-variable">$new_addr</span>;
    <span class="hljs-comment">// å¤åˆ¶å¯¹è±¡æ•°æ®</span>
    <span class="hljs-title function_ invoke__">memcpy</span>(<span class="hljs-variable">$new_addr</span>, <span class="hljs-variable">$source_addr</span>, <span class="hljs-title function_ invoke__">sizeof</span>(<span class="hljs-variable">$obj</span>));
    <span class="hljs-comment">// éå†å±æ€§</span>
    <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$obj</span>-&gt;properties <span class="hljs-keyword">as</span> <span class="hljs-variable">$prop</span>) {
        <span class="hljs-keyword">if</span> (<span class="hljs-title function_ invoke__">is_object</span>(<span class="hljs-variable">$prop</span>)) {
            <span class="hljs-variable">$new_prop_addr</span> = <span class="hljs-title function_ invoke__">deepCopyToThread</span>(<span class="hljs-variable">$prop</span>, <span class="hljs-variable">$target_thread_mm</span>);
            <span class="hljs-comment">// æ›´æ–°æ–°å¯¹è±¡ä¸­çš„æŒ‡é’ˆ</span>
            <span class="hljs-title function_ invoke__">update_property</span>(<span class="hljs-variable">$new_addr</span>, <span class="hljs-variable">$prop</span>, <span class="hljs-variable">$new_prop_addr</span>);
        }
    }
    <span class="hljs-keyword">return</span> <span class="hljs-variable">$new_addr</span>;
}
<span class="hljs-comment">// çº¿ç¨‹ B ä¸­çš„ç»“æœï¼š</span>
<span class="hljs-comment">// $newTree-&gt;left (addr: 0x2500) === $newTree-&gt;right (addr: 0x2500)</span>
<span class="hljs-comment">// èº«ä»½ä¿ç•™ï¼</span>
</code></pre>
<p>æ·±æ‹·è´æ—¶é—´å¤æ‚åº¦ O(N + E)ï¼ŒN æ˜¯å¯¹è±¡æ•°ï¼ŒE æ˜¯å¼•ç”¨æ•°ã€‚ç©ºé—´å¤æ‚åº¦ O(N)â€”â€”å“ˆå¸Œè¡¨ + æ–°å¯¹è±¡ + é€’å½’æ ˆã€‚</p>
<p>æ¯”åºåˆ—åŒ–å¿«ï¼Œå› ä¸ºä¸ç”¨è½¬æ¢ä¼ è¾“æ ¼å¼ï¼Œä½†æ”¶ç›Šå–å†³äºæ•°æ®å½¢çŠ¶å’Œå›¾å¤§å°ã€‚ä¹Ÿå¯ä»¥æ··åˆï¼š<code>refcount = 1</code> çš„ç§»åŠ¨ï¼Œå…¶ä»–çš„æ·±æ‹·è´ã€‚</p>
<p>ç»“æœï¼š</p>
<ul>
<li>PHP å¼€å‘è€…ä¸ç”¨ç®¡å¯¹è±¡æ€ä¹ˆä¼ åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ã€‚</li>
<li>æœ€å¥½æƒ…å†µï¼šå†…å­˜ç›´æ¥ç§»åŠ¨ï¼ˆ<code>refcount = 1</code>ï¼‰ã€‚</li>
<li>æœ€åæƒ…å†µï¼šæ·±æ‹·è´ï¼Œä¿ç•™èº«ä»½ï¼ˆ<code>refcount &gt; 1</code>ï¼‰ã€‚</li>
</ul>
<p>çœ‹ç€è¿˜è¡Œï¼š</p>
<ul>
<li>PHP è¯­æ³•æ”¹åŠ¨æœ€å°</li>
<li>å¯ä»¥é€æ­¥æ”¹</li>
<li>å¤šçº¿ç¨‹èƒ½ç”¨äº†</li>
</ul>
<p>ä½†æ ¸å¿ƒå±‚é¢æ²¡é‚£ä¹ˆç¾å¥½ã€‚è¦è®©å¯¹è±¡ç§»åŠ¨æˆçœŸï¼ŒPHP éœ€è¦è·¨çº¿ç¨‹çš„å†…å­˜ç®¡ç†æœºåˆ¶ã€‚ç°åœ¨åšä¸åˆ°ã€‚</p>
<h3 data-id="heading-9">å¤šçº¿ç¨‹ PHP å†…å­˜ç®¡ç†å™¨</h3>
<p>PHP å†…å­˜ç®¡ç†å™¨ç±»ä¼¼ jemalloc æˆ– tcmalloc è¿™äº›ç°ä»£åˆ†é…å™¨ã€‚åŒºåˆ«æ˜¯ï¼šå®ƒæ²¡æœ‰ä»å¦ä¸€ä¸ªçº¿ç¨‹é‡Šæ”¾å†…å­˜çš„æ­£ç¡®ç®—æ³•ã€‚</p>
<p>åœºæ™¯ï¼š</p>
<ul>
<li>çº¿ç¨‹ A åˆ›å»ºå¯¹è±¡ã€‚</li>
<li>ç§»åŠ¨ï¼ˆåŸæ ·ï¼‰ç»™çº¿ç¨‹ Bã€‚</li>
<li>B ä¸å†éœ€è¦ï¼Œè¦é‡Šæ”¾ã€‚</li>
</ul>
<p>æ¯ä¸ª PHP çº¿ç¨‹æœ‰è‡ªå·±çš„å†…å­˜ç®¡ç†å™¨ï¼ˆ<code>Memory Manager</code>ï¼ŒMMï¼‰ã€‚B æƒ³é‡Šæ”¾ A åˆ†é…çš„å†…å­˜å°±å‡ºé—®é¢˜äº†ã€‚B çš„ MM ä¸è®¤è¯† A çš„å†…å­˜ï¼Œé‡Šæ”¾ä¼šå‡ºé”™ã€‚B ç›´æ¥è®¿é—® A çš„ MM ç»“æ„ä¹Ÿä¸è¡Œï¼Œéœ€è¦åŒæ­¥ã€‚ç°ä»£é«˜æ€§èƒ½å¤šçº¿ç¨‹åˆ†é…å™¨ç”¨å»¶è¿Ÿé‡Šæ”¾ï¼ˆ<code>deferred free</code>ï¼‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å»¶è¿Ÿé‡Šæ”¾çš„æ€è·¯ï¼š</p>
<ul>
<li>B çš„ MM çœ‹åˆ°ä¸€ä¸ªä¸è®¤è¯†çš„æŒ‡é’ˆã€‚</li>
<li>æ‰¾åˆ°å“ªä¸ª MM æ‹¥æœ‰å®ƒï¼Œç»™é‚£ä¸ª MM çš„é˜Ÿåˆ—å‘æ¶ˆæ¯è¯´å¯ä»¥é‡Šæ”¾äº†ã€‚</li>
<li>A çš„ MM å¤„ç†é˜Ÿåˆ—ï¼Œåœ¨è‡ªå·±çš„ä¸Šä¸‹æ–‡é‡Œé‡Šæ”¾ã€‚</li>
</ul>
<p><img src="https://image.catchadmin.com/202601060809112.png" alt="Cross thread deferred free" loading="lazy"/></p>
<p>ç”¨ç°ä»£æ— é”ç»“æ„ï¼Œè¿™ä¸ªç®—æ³•ååé‡é«˜ï¼Œä¸åŒçº¿ç¨‹èƒ½å¹¶è¡Œé‡Šæ”¾å†…å­˜ï¼Œå‡ ä¹ä¸ç”¨é”ã€‚</p>
<p>å¤šçº¿ç¨‹ PHP å†…å­˜ç®¡ç†å™¨ä¸ºä»¥å‰ä¸å¯èƒ½çš„æ”¹åŠ¨æ‰“å¼€äº†é—¨ã€‚</p>
<h3 data-id="heading-10">å…±äº«å¯¹è±¡</h3>
<p>èƒ½ç”¨æœ€å°‘æ“ä½œæŠŠå†…å­˜ä»ä¸€ä¸ªçº¿ç¨‹ä¼ åˆ°å¦ä¸€ä¸ªå¾ˆå¥½ï¼Œä½†å¦‚æœèƒ½åˆ›å»ºä¸€å¼€å§‹å°±è®¾è®¡æˆè·¨çº¿ç¨‹å…±äº«çš„å¯¹è±¡å‘¢ï¼Ÿ</p>
<p>å¾ˆå¤šæœåŠ¡å¯ä»¥æ„å»ºæˆä¸å¯å˜å¯¹è±¡ï¼Œåº”è¯¥èƒ½åœ¨è¿›ç¨‹é—´å…±äº«ï¼Œçœå†…å­˜ã€åŠ å¿« worker å¯åŠ¨ã€‚</p>
<p>ä½† <code>refcount</code> æŒ¡ç€ï¼Œå®ƒè®©æ‰€æœ‰ PHP å¯¹è±¡å®é™…ä¸Šéƒ½æ˜¯å¯å˜çš„ã€‚èƒ½ç»•è¿‡å—ï¼Ÿ</p>
<h4 data-id="heading-11">ä»£ç†å¯¹è±¡</h4>
<p>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯ä»£ç†å¯¹è±¡ï¼Œå¼•ç”¨å­˜åœ¨æ‰€æœ‰çº¿ç¨‹å¯è®¿é—®çš„å…±äº«å†…å­˜æ± é‡Œçš„çœŸå®å¯¹è±¡ã€‚ä»£ç†åªå­˜æ ‡è¯†ç¬¦æˆ–æŒ‡é’ˆï¼ŒåŠ ä¸Šè®¿é—®æ•°æ®çš„æ–¹æ³•ã€‚ç¼ºç‚¹ï¼š</p>
<ul>
<li>è®¿é—®æ•°æ®/å±æ€§å˜æ…¢</li>
<li>Reflection API å’Œç±»å‹æ£€æŸ¥æ›´å¤æ‚</li>
</ul>
<p>PHP å·²ç»æœ‰å¼ºå¤§çš„ä»£ç†æœºåˆ¶ã€‚ä»£ç†å…±äº«å¯¹è±¡åœ¨æŸäº›åœºæ™¯ä¸é”™ï¼Œæ¯”å¦‚è®¡æ•°å™¨è¡¨æˆ– Swoole/Table è¿™æ ·çš„æ•°æ®è¡¨ã€‚</p>
<h4 data-id="heading-12">å¸¦æœ‰ GC_SHARE æ ‡å¿—çš„å…±äº«å¯¹è±¡</h4>
<p>PHP æœ‰ä¸ªå†…ç½®æœºåˆ¶é€šè¿‡ <code>GC_IMMUTABLE</code> æ ‡å¿—å®ç°ä¸å¯å˜å…ƒç´ ï¼Œç”¨äºï¼š</p>
<ul>
<li>å†…éƒ¨å­—ç¬¦ä¸²ï¼ˆ<code>IS_STR_INTERNED</code>ï¼‰â€”â€”æ•´ä¸ª PHP è¿›ç¨‹å­˜åœ¨çš„å­—ç¬¦ä¸²å¸¸é‡</li>
<li>ä¸å¯å˜æ•°ç»„ï¼ˆ<code>IS_ARRAY_IMMUTABLE</code>ï¼‰â€”â€”æ¯”å¦‚ <code>zend_empty_array</code></li>
<li>opcache é‡Œçš„å¸¸é‡â€”â€”å¸¦å¸¸é‡æ•°æ®çš„ç¼–è¯‘ä»£ç </li>
</ul>
<p><code>GC_IMMUTABLE</code> è®©å¼•æ“è·³è¿‡è¿™äº›ç»“æ„çš„ <code>refcount</code> ä¿®æ”¹ï¼š</p>
<pre><code class="hljs language-c" lang="c"><span class="hljs-comment">// Zend/zend_types.h</span>
<span class="hljs-comment">// ä¸º zend_refcounted_h å¢åŠ  refcount çš„å‡½æ•°</span>
<span class="hljs-type">static</span> zend_always_inline <span class="hljs-type">void</span> <span class="hljs-title function_">zend_gc_try_addref</span><span class="hljs-params">(zend_refcounted_h *p)</span> {
    <span class="hljs-keyword">if</span> (!(p-&gt;u.type_info &amp; GC_IMMUTABLE)) {
        ZEND_RC_MOD_CHECK(p);
        ++p-&gt;refcount;
    }
}
</code></pre>
<p>ç±»ä¼¼æœºåˆ¶å¯ä»¥æ”¯æŒ <code>SharedObjects</code>ï¼Œæ¯”å¦‚åŠ ä¸ª <code>GC_SHARE</code> æ ‡å¿—ã€‚</p>
<p>æ€§èƒ½åˆ†ææ˜¾ç¤ºï¼Œæ£€æŸ¥ <code>GC_SHARE</code> ç»™å•ç‹¬çš„ <code>refcount++</code> åŠ äº† +34% å¼€é”€ï¼ˆå¾®åŸºå‡†æµ‹è¯•ï¼‰ã€‚å®é™…åº”ç”¨é‡Œ <code>refcount</code> æ“ä½œåªå æ€»å·¥ä½œä¸€å°éƒ¨åˆ†ï¼Œå½±å“å‡ ä¹çœ‹ä¸å‡ºæ¥ï¼š</p>
<ul>
<li>çœŸå®æ“ä½œï¼ˆæ•°ç»„/å¯¹è±¡ï¼‰ï¼š+3â€“9%</li>
<li>å®é™…åº”ç”¨ï¼š+0.05â€“0.5%</li>
</ul>
<p>è¿™è§£å†³äº†ä¸€åŠé—®é¢˜ï¼›å¦ä¸€åŠæ˜¯ç»™è¿™äº›å¯¹è±¡è®¾è®¡ GCã€‚ç”¨åŸå­ <code>refcount</code> ä¸ç†æƒ³ï¼Œå¤šçº¿ç¨‹è®¿é—®åŒä¸€å¯¹è±¡æ—¶ä¼šå˜æ…¢ã€‚å»¶è¿Ÿé‡Šæ”¾ç®—æ³•å¯èƒ½æ›´åˆé€‚ã€‚</p>
<h3 data-id="heading-13">åŸºäºåŒºåŸŸçš„å†…å­˜</h3>
<p>åŸºäºåŒºåŸŸçš„å†…å­˜ï¼ˆ<code>Region-based memory</code>ï¼‰åœ¨é¢å‘ Web çš„è¯­è¨€é‡Œè¶Šæ¥è¶Šæµè¡Œã€‚</p>
<p>æ€è·¯ï¼šç»™ç‰¹å®šä»»åŠ¡æˆ–çº¿ç¨‹åœ¨å•ç‹¬åŒºåŸŸåˆ†é…å†…å­˜ï¼Œä¸éœ€è¦æ—¶æ•´ä½“é‡Šæ”¾ã€‚é¿å…äº†é€ä¸ªå¯¹è±¡ç®¡ç†çš„å¤æ‚æ€§ï¼ŒGC ä¹Ÿç®€å•äº†ã€‚</p>
<p>æ¯”å¦‚ PHP MM å¯ä»¥ä¿è¯å¯¹è±¡åœ¨ç»‘å®šåˆ°ç‰¹å®š PHP å¯¹è±¡çš„åŒºåŸŸé‡Œåˆ›å»ºã€‚åŒºåŸŸç”Ÿå‘½å‘¨æœŸç­‰äºå¯¹è±¡ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>å¯¹è±¡é”€æ¯æ—¶æ•´ä¸ªåŒºåŸŸç›´æ¥é‡Šæ”¾ï¼Œä¸ç”¨éå†å­å¯¹è±¡ã€‚è¿™ç§å¯¹è±¡è¦"ç§»åŠ¨"åˆ°å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥é¿å…æ·±æ‹·è´ã€‚</p>
<p>PHP VM å®ç°åŸºäºåŒºåŸŸçš„å†…å­˜æœ‰é—®é¢˜ï¼šæ¯”å¦‚å…¨å±€å¯¹è±¡åˆ—è¡¨ã€æ“ä½œç ç¼“å­˜ã€‚ä½†é«˜æ•ˆå®ç°çš„æœºä¼šä¸æ˜¯é›¶ï¼Œå€¼å¾—ç»§ç»­ç ”ç©¶ã€‚</p>
<p>æœ‰æ•ˆçš„åŸºäºåŒºåŸŸçš„å†…å­˜ç®—æ³•èƒ½ä¸º actors æ‰“å¼€é—¨â€”â€”æœ‰éš”ç¦»å†…å­˜çš„ç‰¹æ®Šå¯¹è±¡ã€‚</p>
<p><strong>Actors æ˜¯å¤šçº¿ç¨‹ç¼–ç¨‹é‡Œæœ€æ–¹ä¾¿ã€æœ€å¼ºå¤§ã€æœ€å®‰å…¨çš„å·¥å…·ã€‚</strong></p>
<h3 data-id="heading-14">åç¨‹å’Œçº¿ç¨‹åä½œ</h3>
<p>ä»åç¨‹è§’åº¦çœ‹ï¼Œ<code>Thread</code> æ˜¯ä¸ª <code>Awaitable</code> å¯¹è±¡ã€‚åç¨‹å¯ä»¥ç­‰ <code>Thread</code> ç»“æœè€Œä¸é˜»å¡å…¶ä»–åç¨‹ã€‚ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰˜ç®¡å¾ˆå¤šç­‰é‡ä»»åŠ¡çš„åç¨‹ã€‚æœåŠ¡å®ƒä»¬çš„çº¿ç¨‹å¯¹æ–°è¯·æ±‚ä¿æŒå¿«é€Ÿå“åº”ï¼Œå› ä¸ºç­‰ <code>Thread</code> ä¸é˜»å¡ <code>Event Loop</code>ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">await</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">Thread</span>;

<span class="hljs-variable">$thread</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Thread</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"/>) </span>{
    <span class="hljs-comment">// ç¡¬ä»¶å¯†é›†å‹ä»»åŠ¡åœ¨è¿™é‡Œ</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">42</span>;
});

<span class="hljs-variable">$result</span> = <span class="hljs-title function_ invoke__">await</span>(<span class="hljs-variable">$thread</span>); 
<span class="hljs-comment">// åç¨‹åœ¨è¿™é‡Œæš‚åœï¼Œç›´åˆ° Thread å®Œæˆ</span>
</code></pre>
<p>è¿™ç§æ–¹å¼èƒ½å®ç°æœ‰ CPU å¯†é›†å‹ä»»åŠ¡å’Œç®€å•ä¸šåŠ¡é€»è¾‘çš„èŠå¤©åœºæ™¯ã€‚
<img src="https://image.catchadmin.com/202601060809533.png" alt="åç¨‹å’Œçº¿ç¨‹åä½œ" loading="lazy"/></p>
<p>å›¾é‡Œæ˜¯ä¸ªç¤ºä¾‹æ¶æ„ã€‚åº”ç”¨æœ‰ä¸¤ä¸ªçº¿ç¨‹æ± ï¼šå¸¦å¹¶å‘å¤šä»»åŠ¡çš„è¯·æ±‚å¤„ç†çº¿ç¨‹ï¼Œå’Œè·‘ CPU å¯†é›†å‹ä»»åŠ¡çš„ worker çº¿ç¨‹ã€‚åç¨‹å¤„ç†è¯·æ±‚ï¼Œworker è·‘é‡ä»»åŠ¡æ—¶å¯ä»¥å®Œå…¨æš‚åœï¼Œè·‘å®Œç»§ç»­ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">await</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">ThreadPool</span>;

<span class="hljs-keyword">final</span> <span class="hljs-keyword">readonly</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ImageDto</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params">
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$width</span>,
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-variable">$height</span>,
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$text</span>,
</span>) </span>{}
}

<span class="hljs-variable">$pool</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ThreadPool</span>(<span class="hljs-number">2</span>);
<span class="hljs-variable">$dto</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ImageDto</span>(
    width: <span class="hljs-number">200</span>,
    height: <span class="hljs-number">200</span>,
    text: <span class="hljs-string">'Hello TrueAsync!'</span>
);

<span class="hljs-variable">$image</span> = <span class="hljs-variable">$pool</span>-&gt;<span class="hljs-title function_ invoke__">enqueue</span>(function (ImageDto <span class="hljs-variable">$dto</span>) {
    <span class="hljs-variable">$img</span> = <span class="hljs-title function_ invoke__">imagecreatetruecolor</span>(<span class="hljs-variable">$dto</span>-&gt;width, <span class="hljs-variable">$dto</span>-&gt;height);

    <span class="hljs-variable">$white</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>);
    <span class="hljs-variable">$black</span> = <span class="hljs-title function_ invoke__">imagecolorallocate</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);

    <span class="hljs-title function_ invoke__">imagefill</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-variable">$white</span>);
    <span class="hljs-title function_ invoke__">imagestring</span>(<span class="hljs-variable">$img</span>, <span class="hljs-number">5</span>, <span class="hljs-number">20</span>, <span class="hljs-number">90</span>, <span class="hljs-variable">$dto</span>-&gt;text, <span class="hljs-variable">$black</span>);

    <span class="hljs-title function_ invoke__">ob_start</span>();
    <span class="hljs-title function_ invoke__">imagepng</span>(<span class="hljs-variable">$img</span>);
    <span class="hljs-title function_ invoke__">imagedestroy</span>(<span class="hljs-variable">$img</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-title function_ invoke__">ob_get_clean</span>();
}, <span class="hljs-variable">$dto</span>);

<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">setHeader</span>(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'image/png'</span>);
<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-variable">$image</span>);
<span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">end</span>();
</code></pre>
<p>åç¨‹ä»£ç æ˜¯é¡ºåºçš„ï¼Œè¯»èµ·æ¥åƒæ™®é€šä»£ç ï¼Œ<code>ThreadPool::enqueue</code> åƒåœ¨åŒä¸€çº¿ç¨‹è°ƒç”¨å›è°ƒä¸€æ ·ã€‚DTO è·¨çº¿ç¨‹ä¼ ï¼Œç»“æœå­—ç¬¦ä¸²ä¸ä¼šåœ¨å†…å­˜é‡Œå¤åˆ¶ä¸¤æ¬¡ã€‚</p>
<h3 data-id="heading-15">åƒåœ¾æ”¶é›†å™¨å’Œæœ‰çŠ¶æ€æ¨¡å¼</h3>
<p>ç°ä»£åŒ– PHP å†…å­˜ç®¡ç†å™¨ä¸æ˜¯æ”¹è¿›å¤šçº¿ç¨‹ç¯å¢ƒå”¯ä¸€è¦åšçš„äº‹ã€‚æ²¡æœ‰é«˜æ•ˆ GCï¼Œå¤šçº¿ç¨‹ PHP ä¼šæœ‰æ€§èƒ½é—®é¢˜å’Œå¾ªç¯å¼•ç”¨å¯¼è‡´çš„å†…å­˜æ³„æ¼ã€‚</p>
<p>PHP GC ç”¨ä¸¤ç§ç®—æ³•ï¼šå¼•ç”¨è®¡æ•°åšä¸»è¦å†…å­˜ç®¡ç†ï¼Œå¹¶å‘å¾ªç¯æ”¶é›†ï¼ˆConcurrent Cycle Collectionï¼ŒBacon-Rajanï¼Œ2001ï¼‰å¤„ç†å¾ªç¯ã€‚å¼•ç”¨è®¡æ•°æ¯æ¬¡èµ‹å€¼éƒ½é€’å¢/é€’å‡ï¼Œæ²¡åŒæ­¥çš„è¯å¤šçº¿ç¨‹ä¸å®‰å…¨ã€‚æ¯æ¬¡èµ‹å€¼ç”¨åŸå­æ“ä½œå¼€é”€å¤ªå¤§ï¼›ä¸åŒæ­¥å°±æœ‰ç«æ€å’Œæ³„æ¼ã€‚å¾ªç¯æ”¶é›†å™¨è™½ç„¶å«"å¹¶å‘"ï¼Œä½†åªåœ¨å•çº¿ç¨‹å†…å·¥ä½œï¼Œç”¨é¢œè‰²æ ‡è®°ï¼ˆPURPLE â†’ GREY â†’ WHITE/BLACKï¼‰æ‰¾å¾ªç¯ï¼Œä¹Ÿä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>å¥½æ¶ˆæ¯æ˜¯ï¼šå½“å‰ GC å®ç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒèƒ½å·¥ä½œï¼Œå› ä¸ºå®ƒè·Ÿå†…å­˜ç®¡ç†å™¨åˆ†å¼€ï¼Œä¸ä¾èµ–å†…å­˜åœ¨å“ªåˆ†é…ã€‚</p>
<p>ä½† PHP è¦è¿›å…¥æœ‰çŠ¶æ€åº”ç”¨çš„å¤šçº¿ç¨‹æ—¶ä»£ï¼ŒGC å¾—é€‚åº”ï¼š</p>
<ul>
<li>åœ¨å•ç‹¬çº¿ç¨‹å¹¶è¡Œè·‘ï¼Œä¸å½±å“ä¸šåŠ¡ä»£ç ã€‚</li>
<li>å°½å¿«é‡Šæ”¾èµ„æºã€‚</li>
<li>æä¾›æ³„æ¼æ£€æµ‹ã€æ—¥å¿—ã€é¥æµ‹çš„é¢å¤–å·¥å…·ï¼ˆé•¿æ—¶é—´è¿è¡Œçš„åº”ç”¨ç‰¹åˆ«éœ€è¦ï¼‰ã€‚</li>
</ul>
<p>å¾ªç¯æ”¶é›†å™¨å¯ä»¥æ”¹æˆåœ¨å¤šçº¿ç¨‹ç¯å¢ƒå·¥ä½œï¼Œåœ¨å•ç‹¬çº¿ç¨‹å¤„ç†å¼•ç”¨ï¼Œæé«˜æ•´ä½“å“åº”æ€§ã€‚è¿™å¯èƒ½å¤Ÿç”¨äº†ï¼</p>
<h3 data-id="heading-16">Actors</h3>
<p><code>ThreadPool</code> å’Œçº¿ç¨‹é—´ä¼ å¯¹è±¡æœ‰ç”¨ï¼Œä½†éœ€è¦å¼€å‘è€…çš„æ³¨æ„åŠ›ã€æŠ€èƒ½å’Œç²¾åŠ›ã€‚æœ‰ä¸ªæ›´å¥½çš„å¤šçº¿ç¨‹ç¼–ç¨‹æŠ½è±¡ï¼Œè—ä½çº¿ç¨‹/å†…å­˜å¤æ‚æ€§ï¼Œå®Œç¾å¥‘åˆä¸šåŠ¡é€»è¾‘ï¼šactorsã€‚</p>
<p><strong>Actors æ˜¯å¹¶å‘å¹¶è¡Œç¼–ç¨‹æ¨¡å‹ï¼Œè®¡ç®—çš„åŸºæœ¬å•å…ƒæ˜¯ actorã€‚</strong></p>
<p>æ¯ä¸ª actorï¼š</p>
<ul>
<li>æœ‰è‡ªå·±çš„éš”ç¦»çŠ¶æ€</li>
<li>é¡ºåºå¤„ç†æ¶ˆæ¯</li>
<li>åªé€šè¿‡æ¶ˆæ¯è·Ÿå…¶ä»– actors äº¤äº’</li>
<li>å¯èƒ½åœ¨å•ç‹¬çº¿ç¨‹è·‘</li>
</ul>
<p>å¯ä»¥æŠŠ actor æƒ³æˆå¯¹è±¡ï¼Œè¿™è®©å¤šçº¿ç¨‹ PHP èƒ½ç”¨ç†Ÿæ‚‰çš„ OOP æ¨¡å¼ã€‚</p>
<p>æƒ³è±¡ä¸€ä¸ªæœ‰å¾ˆå¤šæˆ¿é—´çš„èŠå¤©æœåŠ¡å™¨ã€‚æ¯ä¸ªæˆ¿é—´æ˜¯å•ç‹¬çš„å¯¹è±¡ã€‚</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">Actor</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ChatRoom</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Actor</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$messages</span> = [];
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span></span>)
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;name = <span class="hljs-variable">$name</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">postMessage</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$user</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$text</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-variable language_">$this</span>-&gt;messages[] = [
            <span class="hljs-string">'user'</span> =&gt; <span class="hljs-variable">$user</span>,
            <span class="hljs-string">'text'</span> =&gt; <span class="hljs-variable">$text</span>,
            <span class="hljs-string">'time'</span> =&gt; <span class="hljs-title function_ invoke__">time</span>()
        ];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getMessages</span>(<span class="hljs-params"/>): <span class="hljs-title">array</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;messages;
    }
}

<span class="hljs-title function_ invoke__">spawn</span>(function() {
   <span class="hljs-variable">$room</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'general'</span>);
   <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">postMessage</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Hello!'</span>);  <span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œæš‚åœåç¨‹ï¼</span>
   <span class="hljs-variable">$messages</span> = <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">getMessages</span>();       <span class="hljs-comment">// åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼Œæš‚åœåç¨‹ï¼</span>
   <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$messages</span>);
});
</code></pre>
<p><code>ChatRoom</code> å¯¹è±¡ç‰¹æ®Šã€‚å®ƒä»¬çš„æ•°æ®å’Œ PHP VM çŠ¶æ€æœ¬åœ°åŒ–äº†ï¼Œæ–¹ä¾¿åœ¨çº¿ç¨‹é—´ç§»åŠ¨ã€‚æ¯ä¸ªæ–¹æ³•åœ¨è‡ªå·±çš„çº¿ç¨‹è·‘ï¼Œä½†ä»»ä½•æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½æ‰§è¡Œç»™å®š actor çš„æ–¹æ³•ã€‚</p>
<p>è¯­ä¹‰ä¸Šï¼ŒåŸºç±» <code>Actor</code> å®šä¹‰äº† PHP VM å’Œå†…å­˜ç®¡ç†å™¨çš„å·¥ä½œæ–¹å¼ï¼Œè®© <code>ChatRoom</code> å¯¹è±¡èƒ½å®‰å…¨åœ°åœ¨å•ç‹¬çº¿ç¨‹è·‘ã€‚ç±»ç±»å‹ä¸åª"å­˜"æ–¹æ³•å’Œå±æ€§ä¿¡æ¯ï¼Œè¿˜å­˜ MM å’Œ GC è¯¥æ€ä¹ˆæ“ä½œè¿™ç±»å¯¹è±¡ã€‚Rustã€C++ ä¹Ÿæœ‰ç±»ä¼¼åšæ³•ã€‚å¥½å¤„ï¼šä¸æ”¹è¯­æ³•ï¼Œç¬¦åˆ OOP å“²å­¦ã€‚</p>
<p>ç¤ºä¾‹çœ‹èµ·æ¥åƒåç¨‹é‡Œè·‘çš„æ™®é€šé¡ºåºä»£ç ã€‚ä½† <code>postMessage</code> å’Œ <code>getMessages</code> åœ¨å¦ä¸€ä¸ªçº¿ç¨‹è·‘ï¼Œä¸ä¼šç›´æ¥æ‰§è¡Œã€‚åç¨‹ç»™ actor é˜Ÿåˆ—å‘æ¶ˆæ¯ï¼Œè¿›å…¥ç­‰å¾…ï¼Œactor åœ¨å¦ä¸€ä¸ªçº¿ç¨‹è·‘å®Œæ–¹æ³•è¿”å›ç»“æœåæ‰æ¢å¤ã€‚</p>
<p>è¿™è·Ÿç†Ÿæ‚‰çš„ PHP OOP ä¸å†²çªï¼š<code>Actor</code> é‡å†™ <code>__call</code>ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Actor</span> 
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-variable">$threadPool</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__call</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$name</span>, <span class="hljs-keyword">array</span> <span class="hljs-variable">$arguments</span></span>): <span class="hljs-title">mixed</span>
    </span>{
        <span class="hljs-keyword">if</span>(<span class="hljs-title function_ invoke__">current_thread_id</span>() === <span class="hljs-variable language_">$this</span>-&gt;threadPool-&gt;<span class="hljs-title function_ invoke__">getThreadIdForActor</span>(<span class="hljs-variable">$this</span>)) {
            <span class="hljs-comment">// å¦‚æœæˆ‘ä»¬åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œç›´æ¥è¿è¡Œæ–¹æ³•</span>
            <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;<span class="hljs-variable">$name</span>(...<span class="hljs-variable">$arguments</span>);
        }
    
        <span class="hljs-comment">// å¦åˆ™å°†è°ƒç”¨æ’é˜Ÿç»™ actor</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">$this</span>-&gt;threadPool-&gt;<span class="hljs-title function_ invoke__">enqueueActorMethod</span>(<span class="hljs-variable">$this</span>, <span class="hljs-variable">$name</span>, <span class="hljs-variable">$arguments</span>);
    }
}
</code></pre>
<p><code>enqueueActorMethod</code> æŠŠ <code>postMessage</code> åŠ åˆ° actor é˜Ÿåˆ—ï¼Œè®¢é˜…ç»“æœäº‹ä»¶ï¼Œè°ƒç”¨ <code>Async\suspend()</code> æš‚åœåç¨‹ã€‚</p>
<p>Actor ä»£ç é¡ºåºæ‰§è¡Œï¼Œè§£å†³ç«æ€æ¡ä»¶ï¼Œå¤šçº¿ç¨‹å¼€å‘å¯¹å¼€å‘è€…é€æ˜ã€‚</p>
<p>å¹¶è¡Œæ€§é æ¯ä¸ª <code>ChatRoom</code> actor èƒ½åœ¨å•ç‹¬çº¿ç¨‹è·‘æ¥å®ç°ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-title function_ invoke__">spawn</span>(function() {
   <span class="hljs-variable">$room</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'room1'</span>);
   <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">postMessage</span>(<span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Hello!'</span>);
   <span class="hljs-variable">$messages</span> = <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">getMessages</span>();
   <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$messages</span>);
});

<span class="hljs-title function_ invoke__">spawn</span>(function() {
   <span class="hljs-variable">$room</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'room2'</span>);
   <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">postMessage</span>(<span class="hljs-string">'Bob'</span>, <span class="hljs-string">'Hi there!'</span>);
   <span class="hljs-variable">$messages</span> = <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">getMessages</span>();
   <span class="hljs-keyword">echo</span> <span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$messages</span>);
});
</code></pre>
<p><code>ChatRoom</code> å®ä¾‹èƒ½åœ¨ä¸åŒçº¿ç¨‹å¹¶è¡Œè·‘ï¼Œå› ä¸ºæ¯ä¸ª actor æœ‰è‡ªå·±çš„æ‰§è¡Œçº¿ç¨‹ã€å”¯ä¸€çš„ PHP VM çŠ¶æ€å’Œå†…å­˜ã€‚</p>
<p>åˆ›å»º 100 ä¸ªèŠå¤©å®¤ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-keyword">use</span> <span class="hljs-title">Async</span>\<span class="hljs-title">Actor</span>;

<span class="hljs-variable">$rooms</span> = [
    <span class="hljs-string">'general'</span> =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'general'</span>),
    <span class="hljs-string">'random'</span>  =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'random'</span>),
    <span class="hljs-string">'tech'</span>    =&gt; <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-string">'tech'</span>),
    <span class="hljs-comment">// ... 97 ä¸ªæ›´å¤šæˆ¿é—´</span>
];

<span class="hljs-comment">// å¤„ç†è¯·æ±‚çš„åç¨‹</span>
<span class="hljs-title class_">HttpServer</span>::<span class="hljs-title function_ invoke__">onRequest</span>(function(Request <span class="hljs-variable">$request</span>, Response <span class="hljs-variable">$response</span>) <span class="hljs-keyword">use</span> ($<span class="hljs-title">rooms</span>) {
   // <span class="hljs-title">HTTP</span> è¯·æ±‚å¤„ç†
   $<span class="hljs-title">roomName</span> = $<span class="hljs-title">request</span>-&gt;<span class="hljs-title">getQueryParam</span>('<span class="hljs-title">room</span>');
   <span class="hljs-variable">$room</span> = <span class="hljs-variable">$rooms</span>[<span class="hljs-variable">$roomName</span>] ?? <span class="hljs-literal">null</span>;
   
   <span class="hljs-keyword">if</span> (!<span class="hljs-variable">$room</span>) {
      <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">setStatus</span>(<span class="hljs-number">404</span>);
      <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-string">'Room not found'</span>);
      <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">end</span>();
      <span class="hljs-keyword">return</span>;
   }
   
   <span class="hljs-comment">// è°ƒç”¨çœ‹èµ·æ¥æ˜¯åŒæ­¥çš„ï¼Œä½†åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­è¿è¡Œï¼</span>
   <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">postMessage</span>(<span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">getQueryParam</span>(<span class="hljs-string">'user'</span>), <span class="hljs-variable">$request</span>-&gt;<span class="hljs-title function_ invoke__">getQueryParam</span>(<span class="hljs-string">'text'</span>));
   <span class="hljs-variable">$messages</span> = <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">getMessages</span>();
   
   <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">setHeader</span>(<span class="hljs-string">'Content-Type'</span>,  <span class="hljs-string">'application/json'</span>);  
   <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">write</span>(<span class="hljs-title function_ invoke__">json_encode</span>(<span class="hljs-variable">$messages</span>));
   <span class="hljs-variable">$response</span>-&gt;<span class="hljs-title function_ invoke__">end</span>();
});
</code></pre>
<p>æ¯ä¸ªèŠå¤©å®¤é¡ºåºå¤„ç†æ¶ˆæ¯ï¼Œè·Ÿå…¶ä»–æˆ¿é—´å¹¶è¡Œã€‚</p>
<p>Actors ä¸éœ€è¦äº’æ–¥é”ã€é”ã€å¤æ‚åŒæ­¥æˆ–æ‰‹åŠ¨çº¿ç¨‹æ± äº¤äº’ã€‚å®ƒä»¬æ˜¯ç°æˆçš„é«˜çº§å¹¶è¡ŒåŒ–æ–¹æ¡ˆã€‚</p>
<p>ä¸€ä¸ªèŠå¤©å®¤è¦ç»™å¦ä¸€ä¸ªå‘æ¶ˆæ¯ä¹Ÿè¡Œï¼Œå› ä¸º actors æ˜¯ <code>SharedObject</code>ï¼Œèƒ½è·¨çº¿ç¨‹äº¤äº’ï¼š</p>
<pre><code class="hljs language-php" lang="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Rooms</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Actor</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">array</span> <span class="hljs-variable">$rooms</span> = [];
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> ...<span class="hljs-variable">$roomNames</span></span>)
    </span>{
       <span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$roomNames</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$name</span>) {
           <span class="hljs-variable language_">$this</span>-&gt;rooms[<span class="hljs-variable">$name</span>] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ChatRoom</span>(<span class="hljs-variable">$name</span>);
       }
    }
    
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">broadcastMessage</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> <span class="hljs-variable">$fromRoom</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$user</span>, <span class="hljs-keyword">string</span> <span class="hljs-variable">$text</span></span>): <span class="hljs-title">void</span>
    </span>{
        <span class="hljs-keyword">foreach</span> (<span class="hljs-variable language_">$this</span>-&gt;rooms <span class="hljs-keyword">as</span> <span class="hljs-variable">$name</span> =&gt; <span class="hljs-variable">$room</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-variable">$name</span> !== <span class="hljs-variable">$fromRoom</span>) {
                <span class="hljs-comment">// éé˜»å¡è°ƒç”¨</span>
                <span class="hljs-variable">$room</span>-&gt;<span class="hljs-title function_ invoke__">postMessageAsync</span>(<span class="hljs-variable">$user</span>, <span class="hljs-variable">$text</span>);
            }
        }
    }
}

<span class="hljs-title function_ invoke__">spawn</span>(function() {
   <span class="hljs-variable">$rooms</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Rooms</span>(<span class="hljs-string">'general'</span>, <span class="hljs-string">'room1'</span>, <span class="hljs-string">'room2'</span>, <span class="hljs-string">'room3'</span>);
   <span class="hljs-variable">$rooms</span>-&gt;<span class="hljs-title function_ invoke__">broadcastMessage</span>(<span class="hljs-string">'general'</span>, <span class="hljs-string">'Alice'</span>, <span class="hljs-string">'Hello!'</span>);
});
</code></pre>
<h4 data-id="heading-17">Actor å†…éƒ¨</h4>
<p>PHP VM ä¿è¯ actor å†…æ‰€æœ‰å¯¹è±¡ï¼š</p>
<ul>
<li>è¦ä¹ˆåªå±äºè¯¥ actorï¼Œåœ¨å…¶å”¯ä¸€åŒºåŸŸåˆ†é…</li>
<li>è¦ä¹ˆä»å…¶ä»–åŒºåŸŸæˆ–çº¿ç¨‹ç§»åŠ¨è¿‡æ¥</li>
<li>è¦ä¹ˆæ˜¯å¦ä¸€ä¸ª <code>SharedObject</code> æˆ–å¦ä¸€ä¸ª actor</li>
</ul>
<p>Actor è¦ä¹ˆæ‹¥æœ‰è‡ªå·±çš„åŒºåŸŸï¼Œè¦ä¹ˆåªç”¨æ˜¾å¼å…±äº«çš„ä¸å¯å˜å¯¹è±¡ï¼›å¦åˆ™ç«æ€è¿˜æ˜¯ä¼šæœ‰ã€‚</p>
<p>å†…å­˜ç®¡ç†å™¨ä¿è¯ actor æ–¹æ³•å†…æ‰€æœ‰å†…å­˜æ“ä½œè‡ªåŠ¨ç»‘å®šåˆ°ä¸ actor å…³è”çš„åŒºåŸŸã€‚</p>
<p>æ–¹æ³•é€šè¿‡ <code>Scheduler</code> æœåŠ¡çš„ MPMC æ¶ˆæ¯é˜Ÿåˆ—æ‰§è¡Œã€‚<code>Scheduler</code> åœ¨ actors é—´åˆ†é… CPU æ—¶é—´ï¼Œæä¾›å¹¶å‘å’Œå¹¶è¡Œæ‰§è¡Œã€‚</p>
<p><img src="https://image.catchadmin.com/202601060810207.png" alt="Actor å†…éƒ¨" loading="lazy"/></p>
<h3 data-id="heading-18">ç»“è®º</h3>
<p>è¿™äº›å¬ç€éƒ½ä¸é”™ï¼Œä½†ä»€ä¹ˆæ—¶å€™èƒ½çœŸæ­£ç”¨ä¸Šï¼Ÿ</p>
<p><code>Single-threaded + offload</code> æ¨¡å‹å¯èƒ½å¾ˆå¿«å‡ºç°ï¼Œå¾ˆå¤šç»„ä»¶å·²ç»å°±ç»ªã€‚TrueAsync å•çº¿ç¨‹åç¨‹å·²åˆ° beta ç‰ˆã€‚å®éªŒæ€§çš„å¤šçº¿ç¨‹å†…å­˜ç®¡ç†å™¨å’Œåˆ›å»ºçº¿ç¨‹çš„ API å·²ç»å®ç°ã€‚</p>
<p>Actors éœ€è¦æ›´å¤šå¼€å‘æ—¶é—´ï¼Œå› ä¸ºæ¶‰åŠ PHP æ ¸å¿ƒå¾ˆå¤šéƒ¨åˆ†ï¼Œä½†ä»æ˜¯ PHP 9 çš„ç°å®ç›®æ ‡ï¼Œç»™å¸‚åœºæä¾›ä¸€ç§å®‰å…¨çš„å¤šçº¿ç¨‹ç¼–ç¨‹è¯­è¨€ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[2026ï¼šä¸€åç å†œçš„â€œä¸é è°±â€å¹´åº¦è§„åˆ’]]></title>    <link>https://juejin.cn/post/7592082090207707163</link>    <guid>https://juejin.cn/post/7592082090207707163</guid>    <pubDate>2026-01-06T17:19:30.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592082090207707163" data-draft-id="7592251792629907483" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="2026ï¼šä¸€åç å†œçš„â€œä¸é è°±â€å¹´åº¦è§„åˆ’"/> <meta itemprop="keywords" content="åç«¯,æ¶æ„,ç¨‹åºå‘˜"/> <meta itemprop="datePublished" content="2026-01-06T17:19:30.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="è‹æ¸¡è‹‡"/> <meta itemprop="url" content="https://juejin.cn/user/729731453429159"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            2026ï¼šä¸€åç å†œçš„â€œä¸é è°±â€å¹´åº¦è§„åˆ’
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/729731453429159/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    è‹æ¸¡è‹‡
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T17:19:30.000Z" title="Tue Jan 06 2026 17:19:30 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>@charset "UTF-8";.markdown-body{line-height:1.75;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;letter-spacing:2px;background-image:linear-gradient(90deg,rgba(50,0,0,.05) 3%,transparent 0),linear-gradient(1turn,rgba(50,0,0,.05) 3%,transparent 0);background-size:20px 20px;background-position:50%;word-break:break-word;font-weight:400;font-size:15px;overflow-x:hidden;color:#333}.markdown-body h1{font-size:23px;margin-bottom:5px;font-weight:700;padding-left:10px;border-left:5px solid #773098}.markdown-body h2{font-size:19px;font-weight:700;padding-left:10px;border-left:5px solid #916dd5}.markdown-body h3{font-size:17px;font-weight:700;padding-left:10px;border-left:5px solid #d89cf6}.markdown-body h4{font-size:16px}.markdown-body h5{font-size:15px}.markdown-body h6{font-size:14px;margin-top:5px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{display:block;max-width:100%;margin:1em 0;border-radius:6px;box-shadow:2px 4px 7px #999;user-select:none}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{padding:.2em .5em;font-weight:700;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-size:1em;color:#916dd5;word-break:break-word;overflow-x:auto;background-color:none;border-radius:2px}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{display:block;font-family:-apple-system-font,BlinkMacSystemFont,Helvetica Neue,PingFang SC,Hiragino Sans GB,Microsoft YaHei UI,Microsoft YaHei,Arial,sans-serif;font-weight:400;font-size:.9em;padding:16px 12px;margin:0;color:#333;word-break:normal;overflow-x:auto;background:#f8f8f8;scroll-behavior:smooth}.markdown-body a{text-decoration:none;color:#916dd5;font-weight:700;border-bottom:1px solid #916dd5}.markdown-body a:active,.markdown-body a:hover{color:#773098}.markdown-body table{display:inline-block!important;font-size:14px;width:auto;max-width:100%;overflow:auto;border:1px solid #916dd5;border-collapse:collapse}.markdown-body thead{background-color:#916dd5;color:#fff;text-align:left}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px;border:1px solid #916dd5}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #d89cf6;background-color:#f4eeff}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0;line-height:26px}.markdown-body ol,.markdown-body ul{padding-left:28px;list-style-type:circle}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body b,.markdown-body strong{color:#916dd5;font-weight:700}.markdown-body b:before,.markdown-body strong:before{content:"ã€Œ"}.markdown-body b:after,.markdown-body strong:after{content:"ã€"}.markdown-body em,.markdown-body i{color:#916dd5}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="github-gist">.markdown-body pre,.markdown-body pre&gt;code.hljs{background:#fff;color:#333}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#d73a49}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#6f42c1}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.hljs-number{color:#005cc5}.hljs-string{color:#032f62}</style><p>åˆåˆ°äº†ä¸€å¹´ä¸€åº¦åˆ—è®¡åˆ’çš„æ—¶å€™ï¼Œæˆ‘å¯¹ç€å±å¹•æ•²ä¸‹â€œ2026å¹´åº¦ç›®æ ‡â€è¿™å‡ ä¸ªå­—ï¼Œæ„Ÿè§‰å°±åƒåœ¨ä»£ç é‡Œå†™ä¸‹äº†ä¸€ä¸ªæš‚æ—¶æ²¡æœ‰å…·ä½“å®ç°çš„æ¥å£â€”â€”å®šä¹‰å¾ˆç¾å¥½ï¼Œå®ç°å˜›ï¼Œæœ‰å¾…è§‚å¯Ÿã€‚</p>
<h2 data-id="heading-0">ä¸€ã€å·¥ä½œè¦å¹²å¾—å‡ºå½©ï¼Œè¿˜å¾—æœ‰ç‚¹æ–°èŠ±æ ·</h2>
<p>è¯´çœŸçš„ï¼Œæ¯å¹´æˆ‘éƒ½å‘Šè¯‰è‡ªå·±ï¼Œä»Šå¹´ä¸€å®šè¦å†™å‡ºé‚£ç§èƒ½è®©åŒäº‹çœ‹äº†å¿ä¸ä½èµå¹â€œå¦™å•Šâ€çš„ä»£ç ã€‚ä½†å®é™…æƒ…å†µå¾€å¾€æ˜¯ï¼Œæˆ‘å¯¹ç€ä¸‰å¹´å‰è‡ªå·±å†™çš„ä»£ç é™·å…¥æ²‰æ€ï¼šâ€œè¿™çœŸæ˜¯æˆ‘å†™çš„å—ï¼Ÿå½“æ—¶æ€ä¹ˆæƒ³çš„ï¼Ÿâ€</p>
<p>æ–°ç‚¹å­å€’æ˜¯ä¸ç¼ºï¼Œç¼ºçš„æ˜¯èƒ½è®©è¿™äº›ç‚¹å­å®‰å…¨è½åœ°è¿˜ä¸å¼•èµ·ç”Ÿäº§äº‹æ•…çš„é­”æ³•ã€‚æˆ‘ç°åœ¨çš„åŸåˆ™æ˜¯ï¼šæ¯ä¸ªç‚«é…·çš„æƒ³æ³•ï¼Œéƒ½å¿…é¡»é…å¥—ä¸€ä¸ªâ€œæç ¸äº†æ€ä¹ˆåŠâ€çš„é¢„æ¡ˆã€‚</p>
<p>æ¯•ç«Ÿåœ¨æ¶æ„å¸ˆçš„ä¸–ç•Œé‡Œï¼Œæœ€æ€§æ„Ÿçš„ä¸æ˜¯å¤šå‰æ²¿çš„æŠ€æœ¯ï¼Œè€Œæ˜¯â€œæ™šä¸Šèƒ½ç¡ç€è§‰â€ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1ea27e01b42949a9b1f0684af2ea41ce~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324769&amp;x-signature=oVrgKcj48xzTAm00ZRRV6XwCYQ4%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-1">äºŒã€é‡æ„ä¸€ä¸ªé¡¹ç›®ï¼Œè¿™æ¬¡æ¥çœŸçš„</h2>
<p>â€œé‡æ„â€è¿™ä¸¤ä¸ªå­—åœ¨æˆ‘çš„å¾…åŠåˆ—è¡¨é‡Œï¼Œå°±åƒä»£ç ä¸­çš„TODOæ³¨é‡Šâ€”â€”å¸¸å¹´å­˜åœ¨ï¼Œä¼˜å…ˆçº§éšå¿ƒæƒ…æ³¢åŠ¨ã€‚æ¯æ¬¡æ‰“å¼€é‚£ä¸ªå†å²æ‚ ä¹…çš„é¡¹ç›®ï¼Œéƒ½åƒå¼€å¯ä¸€åœºè€ƒå¤å‘æ˜ï¼Œä½ èƒ½çœ‹åˆ°ä¸åŒæ—¶æœŸçš„æŠ€æœ¯é€‰å‹ã€ä¸šåŠ¡å¦¥åï¼Œè¿˜æœ‰é‚£äº›å·²ç»ç¦»èŒåŒäº‹ç•™ä¸‹çš„ç¥ç§˜ä»£ç ã€‚</p>
<p>æœ€æœ‰è¶£çš„æ˜¯ï¼Œä½ æ€»ä¼šå‘ç°ä¸€äº›å†™å¾—å¾ˆå·§å¦™çš„â€œä¸´æ—¶æ–¹æ¡ˆâ€â€”â€”å®ƒä»¬ä¸´æ—¶äº†äº”å¹´ï¼Œä¾ç„¶å¥åœ¨ã€‚</p>
<p>æˆ‘çš„ç›®æ ‡æ˜¯ä»Šå¹´è‡³å°‘è®©æŸä¸ªæ¨¡å—å˜å¾—å¥½æ‡‚ä¸€äº›ï¼Œä¸è‡³äºè®©æ–°åŒäº‹é˜…è¯»æ—¶éœ²å‡ºâ€œè¿™æ˜¯å“ªç§ç¥ç§˜è¯­è¨€â€çš„è¡¨æƒ…ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/bdf01823674d43b7870e7bd654c0afc2~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324769&amp;x-signature=lmf256ICIQBgLOPgFi84w2ZE7RY%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-2">ä¸‰ã€è®¤çœŸæä¸¤ä¸‰ä¸ªå¼€æºé¡¹ç›®</h2>
<p>æˆ‘çš„å¼€æºé¡¹ç›®ç»å†å¯ä»¥åˆ†ä¸ºå‡ ä¸ªé˜¶æ®µï¼š</p>
<ul>
<li>é›„å¿ƒå‹ƒå‹ƒåœ°åˆ›å»ºä»“åº“</li>
<li>çƒ­æƒ…æ»¡æ»¡åœ°å†™ä¸¤å‘¨</li>
<li>é€æ¸å¿˜è®°å®ƒçš„å­˜åœ¨ï¼Œç›´åˆ°æŸå¤©çªç„¶æƒ³èµ·ï¼šâ€œè¿™ä¸ªåº“è¿˜ç»´æŠ¤å—ï¼Ÿâ€</li>
</ul>
<p>ä»Šå¹´æˆ‘è°ƒæ•´äº†é¢„æœŸï¼šä¸åšæ˜Ÿæ ‡æ”¶å‰²æœºï¼Œåªåšè‡ªå·±è§‰å¾—æœ‰æ„ä¹‰çš„ã€å®ç”¨çš„å¼€æºé¡¹ç›®ã€‚</p>
<p>ç›®å‰å·²åœ¨è®¡åˆ’ä¸­çš„é¡¹ç›®ï¼š<code>åšä¸€ä¸ªSpringå¼€å‘è€…çœŸæ­£èƒ½â€œå¼€ç®±å³ç”¨â€çš„æ¶æ„æ´å¯Ÿå·¥å…·ï¼Œä¸æ±‚å¤§è€Œå…¨ï¼Œåªæ±‚å¿«åˆå‡†ã€‚</code></p>
<p>å½“ç„¶ï¼Œå¦‚æœèƒ½åšæŒç»´æŠ¤è¶…è¿‡å…­ä¸ªæœˆï¼Œé‚£ç®€ç›´å€¼å¾—å¼€ç“¶åº†ç¥äº†ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/43b0ef131cb14e068100e29e40644f78~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324769&amp;x-signature=P%2BJfCA7W7phBb9K1nDWvTfw4Irg%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-3">å››ã€å½“ä¸ªæ›´é è°±çš„çˆ¸çˆ¸</h2>
<p>åœ¨æ‰€æœ‰æ¶æ„ä¸­ï¼Œæœ€å¤æ‚çš„è«è¿‡äºå®¶åº­ç³»ç»Ÿã€‚ç‰¹åˆ«æ˜¯å½“ä½ è¯•å›¾ç”¨é¢å‘å¯¹è±¡çš„æ€æƒ³è§£é‡Šå°å­¦æ•°å­¦é¢˜æ—¶ï¼Œå­©å­çœ¼ä¸­çš„å›°æƒ‘è¯´æ˜äº†ä¸€åˆ‡ã€‚</p>
<p>æŠ€æœ¯æ–‡æ¡£å¯ä»¥åå¤ä¿®æ”¹ï¼Œä½†å­©å­çš„æˆé•¿åªæœ‰ä¸€æ¬¡ç‰ˆæœ¬è¿­ä»£ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»Šå¹´çš„é‡è¦KPIæ˜¯ï¼šå°‘è¯´â€œç­‰çˆ¸çˆ¸å¿™å®Œâ€ï¼Œå¤šè¯´â€œèµ°ï¼Œæˆ‘ä»¬å‡ºå»ç©å„¿â€ã€‚</p>
<p>æ¯•ç«Ÿï¼Œæœ€å¥½çš„æ¶æ„ä¸æ˜¯å¾®æœåŠ¡æ‹†åˆ†å¾—å¤šå®Œç¾ï¼Œè€Œæ˜¯ç”Ÿæ´»é‡Œé‚£äº›é‡è¦çš„è¿æ¥å§‹ç»ˆä¿æŒä½å»¶è¿Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/9be7ae4091b84dd184337f95be96655e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324769&amp;x-signature=%2F%2BNoVs82uTM52inB9ODa54XPbZQ%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-4">äº”ã€ç»™å‰ä»–å¼¦ä¸€ç‚¹èµ·ç çš„å°Šé‡ï¼Œæ¯”å¦‚å­¦ä¼šã€Šå¯Œå£«å±±ä¸‹ã€‹</h2>
<p>å½“æˆ‘æœ‰å­¦å‰ä»–çš„æƒ³æ³•çš„é‚£ä¸€åˆ»å°±å·²ç»æƒ³è±¡è‡ªå·±åœ¨å¤•é˜³ä¸‹æ·±æƒ…å¼¹å”±ï¼Œç°å®æ˜¯å®ƒå¤§å¤šæ•°æ—¶é—´å®‰é™åœ°é åœ¨å¢™è§’ï¼Œç´å¼¦ä¸Šè½çš„ç°æ¯”æˆ‘çš„ä»£ç æ³¨é‡Šè¿˜åšã€‚</p>
<p>ä¸è¿‡æˆ‘å‘ç°ï¼Œè°ƒè¯•åˆ†å¸ƒå¼ç³»ç»Ÿå’Œç»ƒä¹ å’Œå¼¦è½¬æ¢æœ‰ä¸ªå…±åŒç‚¹ï¼šéƒ½éœ€è¦è€å¿ƒï¼Œéƒ½ä¼šé‡åˆ°ç“¶é¢ˆï¼Œè€Œä¸”ç»“æœå¾€å¾€æ¯”ä½ é¢„æœŸçš„è¦æ™šæ¥å¾ˆå¤šã€‚</p>
<p>æˆ‘å·å·æ”¶è—äº†ä¸€å †æŒ‡å¼¹è§†é¢‘ï¼Œçœ‹ç€å¤§å¸ˆä»¬çš„æ‰‹æŒ‡åœ¨ç´å¼¦ä¸Šè·³èˆï¼Œä»¿ä½›å‰ä»–è‡ªå·±æœ‰çµé­‚ã€‚è€Œæˆ‘ç›®å‰çš„æ°´å¹³ï¼Œåªèƒ½è¯´ç«™åœ¨é—¨å£äº†ã€‚</p>
<p>ä½†éŸ³ä¹çš„ç¾å¥½å¤§æ¦‚å°±åœ¨äºæ­¤ï¼Œå®ƒå…è®¸ä½ ä»â€œåˆ¶é€ å™ªéŸ³â€å¼€å§‹ï¼Œæ…¢æ…¢èµ°å‘â€œåˆ¶é€ æ—‹å¾‹â€ã€‚è¯´ä¸å®šåˆ°äº†å¹´åº•ï¼Œæˆ‘èƒ½åœ¨å®¶åº­èšä¼šä¸Šå®Œæ•´å¼¹å‡ºä¸€é¦–ã€Šç”Ÿæ—¥å¿«ä¹ã€‹æŒ‡å¼¹ç‰ˆï¼Œé‚£å°†æ˜¯å ªæ¯”å®Œæˆä¸€æ¬¡é‡å¤§ç³»ç»Ÿé‡æ„çš„æˆå°±æ„Ÿã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/8291872522764e079bad6caae86f3746~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg6IuP5rih6IuH:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768324769&amp;x-signature=ogzl%2ByZqP0QKMjZ4LV4vbuw4lZk%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-5">å…­ã€å°ç»“</h2>
<p>è¯´åˆ°åº•ï¼Œå¹´åº¦è®¡åˆ’å°±åƒè½¯ä»¶æ¶æ„â€”â€”ä¸å¯èƒ½ä¸€å¼€å§‹å°±å®Œç¾ï¼Œé‡è¦çš„æ˜¯æŒç»­è¿­ä»£ã€‚å¹´åº•å¤ç›˜æ—¶ï¼Œå¦‚æœè¿™äº›ç›®æ ‡åªå®ç°äº†ä¸€åŠï¼Œæˆ‘å¯èƒ½ä¼šå®‰æ…°è‡ªå·±ï¼šè‡³å°‘æ¯”å»å¹´è¿›æ­¥äº†20%ï¼Œè¿™åœ¨æ•æ·å¼€å‘é‡Œå·²ç»ç®—ä¸€ä¸ªæˆåŠŸçš„å†²åˆºäº†ã€‚</p>
<p>æ— è®ºå¦‚ä½•ï¼Œ2026å¹´ï¼Œæˆ‘ä¼šç»§ç»­åœ¨ä»£ç å’Œç”Ÿæ´»çš„å¹³è¡¡æœ¨ä¸Šæ‘‡æ™ƒå‰è¡Œï¼Œå¶å°”æ‰ä¸‹æ¥ï¼Œå†çˆ¬ä¸Šå»ã€‚æ¯•ç«Ÿï¼Œå°±åƒæˆ‘ä»¬ä»ä¸æ”¾å¼ƒä¿®å¤bugä¸€æ ·ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šæ”¾å¼ƒæˆä¸ºæ›´å¥½çš„è‡ªå·±â€”â€”å°½ç®¡è¿‡ç¨‹å¯èƒ½æ¯”è°ƒè¯•ç”Ÿäº§ç¯å¢ƒçš„é—®é¢˜è¿˜è¦æ›²æŠ˜ä¸€äº›ã€‚</p>
<p>ç¥æˆ‘ä»¬éƒ½èƒ½åœ¨2026å¹´å†™å‡ºæ›´ä¼˜é›…çš„ä»£ç â€”â€”</p>
<p>å’Œæ›´å¯çˆ±çš„ç”Ÿæ´»ã€‚</p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[ä¸ªäºº LLM æ¥å£æœåŠ¡é¡¹ç›®ï¼šä¸€ä¸ªç®€æ´çš„ AI å…¥å£]]></title>    <link>https://juejin.cn/post/7592069432228151305</link>    <guid>https://juejin.cn/post/7592069432228151305</guid>    <pubDate>2026-01-06T15:10:48.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592069432228151305" data-draft-id="7592062873829982258" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="ä¸ªäºº LLM æ¥å£æœåŠ¡é¡¹ç›®ï¼šä¸€ä¸ªç®€æ´çš„ AI å…¥å£"/> <meta itemprop="keywords" content="äººå·¥æ™ºèƒ½,Python,LLM"/> <meta itemprop="datePublished" content="2026-01-06T15:10:48.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="mantch"/> <meta itemprop="url" content="https://juejin.cn/user/2788017218532232"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            ä¸ªäºº LLM æ¥å£æœåŠ¡é¡¹ç›®ï¼šä¸€ä¸ªç®€æ´çš„ AI å…¥å£
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/2788017218532232/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    mantch
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T15:10:48.000Z" title="Tue Jan 06 2026 15:10:48 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»4åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/139da621aa1a40518b10a7fb37883b5e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768317048&amp;x-signature=MTlYFdQ4VjPEwNfo9DN06wQkMbg%3D" alt="" loading="lazy"/></p>
<p>åœ¨ AI åº”ç”¨çˆ†å‘çš„ä»Šå¤©ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åŒæ—¶ä½¿ç”¨å¤šä¸ªå¤§æ¨¡å‹æœåŠ¡â€”â€”æœ‰çš„å¹³å°ä¼˜æƒ åŠ›åº¦å¤§ï¼Œæœ‰çš„æ¨¡å‹åœ¨æŸäº›ä»»åŠ¡ä¸Šè¡¨ç°æ›´å¥½ï¼Œè¿˜æœ‰çš„æä¾›å•†ç½‘ç»œè®¿é—®æ›´ç¨³å®šã€‚ä½†ä¸ºæ¯ä¸€ä¸ªæœåŠ¡å•ç‹¬é…ç½® APIã€ç®¡ç†å¯†é’¥ã€å¯¹æ¥å®¢æˆ·ç«¯ï¼Œæ— ç–‘å¢åŠ äº†ä½¿ç”¨é—¨æ§›å’Œè¿ç»´æˆæœ¬ã€‚</p>
<p>ä»Šå¤©è¦ä»‹ç»çš„å¼€æºé¡¹ç›® <strong>Personal LLM API</strong>ï¼Œæ­£æ˜¯ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜è€Œç”Ÿã€‚å®ƒæ˜¯ä¸€ä¸ªä¸“ä¸ºä¸ªäººç”¨æˆ·è®¾è®¡çš„è½»é‡çº§ LLM æ¥å£èšåˆæœåŠ¡ï¼Œè®©ä½ èƒ½å¤Ÿé€šè¿‡ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ï¼Œçµæ´»è°ƒåº¦å’Œç®¡ç†æ¥è‡ªä¸åŒæä¾›å•†çš„ AI æ¨¡å‹ã€‚</p>
<h2 data-id="heading-0">ğŸ¯ é¡¹ç›®ç®€ä»‹</h2>
<p>Personal LLM API åŸºäº Python å’Œ FastAPI æ„å»ºï¼Œæä¾›äº†ä¸ OpenAI API å®Œå…¨å…¼å®¹çš„æ¥å£è§„èŒƒã€‚ä¸åŒç±»é¡¹ç›®ç›¸æ¯”ï¼Œå®ƒæ›´åŠ æ³¨é‡<strong>ä¸ªäººä½¿ç”¨çš„ç®€æ´æ€§</strong>å’Œ<strong>æè‡´çš„äº¤äº’ä½“éªŒ</strong>ï¼Œå°¤å…¶åœ¨ä¸é«˜é¢œå€¼å®¢æˆ·ç«¯ï¼ˆå¦‚ Cherry Studioï¼‰æ­é…æ—¶ï¼Œèƒ½å®ç°ä¸æ»‘çš„â€œæ‰“å­—æœºâ€æµå¼è¾“å‡ºæ•ˆæœã€‚</p>
<p>GitHub é¡¹ç›®åœ°å€ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2Fpersonal-llm-api" target="_blank" rel="noopener" title="https://github.com/NLP-LOVE/personal-llm-api" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2Fpersonal-llm-api" target="_blank" title="https://github.com/NLP-LOVE/personal-llm-api" ref="nofollow noopener noreferrer">github.com/NLP-LOVE/peâ€¦</a></p>
<h3 data-id="heading-1">æ ¸å¿ƒäº®ç‚¹</h3>
<ul>
<li><strong>ğŸ§© å¤šæ¨¡å‹ç»Ÿä¸€ç®¡ç†</strong>ï¼šæ”¯æŒç«å±±äº‘ã€é˜¿é‡Œäº‘ã€ç¡…åŸºæµåŠ¨ã€OpenRouter ç­‰ä¸»æµå¹³å°ï¼Œè½»æ¾å®ç°æ¨¡å‹çš„åˆ‡æ¢ä¸è´Ÿè½½å‡è¡¡ã€‚</li>
<li><strong>âš¡ æ·±åº¦ä¼˜åŒ–æµå¼è¾“å‡º</strong>ï¼šé’ˆå¯¹æµå¼å“åº”åšäº†ç‰¹åˆ«ä¼˜åŒ–ï¼Œå®Œç¾é€‚é… Cherry Studio ç­‰å®¢æˆ·ç«¯çš„ä¸»é¢˜ä¸å­—ä½“è®¾è®¡ï¼Œå¸¦æ¥æ²‰æµ¸å¼å¯¹è¯ä½“éªŒã€‚</li>
<li><strong>ğŸ› ï¸ ä½ä»£ç ç®¡ç†åå°</strong>ï¼šåŸºäºç™¾åº¦ amis æ¡†æ¶æ„å»ºçš„å¯è§†åŒ–ç®¡ç†ç•Œé¢ï¼Œæ— éœ€å‰ç«¯çŸ¥è¯†å³å¯è½»æ¾é…ç½®æ¨¡å‹ã€æŸ¥çœ‹ç»Ÿè®¡ã€ç®¡ç†å¯¹è¯å†å²ã€‚</li>
<li><strong>ğŸ å…¨æ ˆ Python</strong>ï¼šä»åç«¯åˆ°ç®¡ç†ç•Œé¢ï¼ŒæŠ€æœ¯æ ˆç»Ÿä¸€ï¼Œæ˜“äºç†è§£å’ŒäºŒæ¬¡å¼€å‘ã€‚</li>
<li><strong>ğŸš€ å¼€ç®±å³ç”¨</strong>ï¼šèµ„æºå ç”¨ä½ï¼Œéƒ¨ç½²ç®€å•ï¼Œç‰¹åˆ«é€‚åˆè¿è¡Œåœ¨ä¸ªäººæœåŠ¡å™¨æˆ– VPS ä¸Šã€‚</li>
</ul>
<h2 data-id="heading-2">ğŸš€ æ ¸å¿ƒåŠŸèƒ½ä¸€è§ˆ</h2>
<ul>
<li>âœ… å®Œæ•´çš„ OpenAI API å…¼å®¹ï¼ˆ<code>/v1/chat/completions</code> å’Œ <code>/chat/completions</code>ï¼‰</li>
<li>âœ… æ”¯æŒ Function Calling ä¸ Web Searchï¼ˆè”ç½‘æœç´¢ï¼‰</li>
<li>âœ… ç«å±±äº‘ <code>response</code> æ¥å£è½¬æ ‡å‡† <code>chat</code> æ¥å£ï¼Œä¾¿äºå®¢æˆ·ç«¯æ¥å…¥</li>
<li>âœ… å¤šæ¨¡å‹é—´è‡ªåŠ¨è½®è¯¢è´Ÿè½½å‡è¡¡</li>
<li>âœ… å®Œæ•´çš„ä½¿ç”¨é‡ç»Ÿè®¡ä¸å¯è§†åŒ–</li>
<li>âœ… æ”¯æŒ SQLite / MySQL æ•°æ®åº“</li>
<li>âœ… å¯é…ç½®ä»£ç†è®¿é—®ï¼Œæ–¹ä¾¿ç½‘ç»œç¯å¢ƒé€‚é…</li>
</ul>
<h2 data-id="heading-3">ğŸ—ï¸ æŠ€æœ¯æ¶æ„</h2>
<ul>
<li><strong>åç«¯æ¡†æ¶</strong>ï¼šFastAPIï¼ˆé«˜æ€§èƒ½å¼‚æ­¥ API æœåŠ¡ï¼‰</li>
<li><strong>å‰ç«¯ç®¡ç†</strong>ï¼šamis ä½ä»£ç æ¡†æ¶ + TailwindCSS</li>
<li><strong>æ•°æ®åº“</strong>ï¼šSQLiteï¼ˆé»˜è®¤ï¼‰æˆ– MySQL</li>
<li><strong>éƒ¨ç½²</strong>ï¼šçº¯ Python ç¯å¢ƒï¼Œä¾èµ–æ¸…æ™°</li>
</ul>
<h2 data-id="heading-4">ğŸ“¦ å¿«é€Ÿéƒ¨ç½²</h2>
<p>éƒ¨ç½²ä»…éœ€å‡ æ­¥ï¼š</p>
<ol>
<li>ç¡®ä¿ Python ç‰ˆæœ¬ â‰¥ 3.9</li>
<li>å®‰è£…ä¾èµ–ï¼š<code>pip install -r requirements.txt</code></li>
<li>ä¿®æ”¹ <code>app_config.yaml</code> é…ç½®æ–‡ä»¶ï¼ˆè®¾ç½®æ•°æ®åº“ã€ä»£ç†ç­‰ï¼‰</li>
<li>è¿è¡Œä¸»ç¨‹åºï¼š<code>python3 main_personal_llm.py</code></li>
<li>è®¿é—®åå°ç®¡ç†ç•Œé¢ï¼š<code>http://127.0.0.1:2321/dashboard</code>ï¼Œå¹¶é…ç½®æ¨¡å‹åå³å¯ä½¿ç”¨<code>/chat/completions</code>æ¥å£
<img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/535b16d21e08444e99835b7a88a266bd~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768317048&amp;x-signature=jUwPx6PoKXjZmPIdMHuQHwkWGbU%3D" alt="" loading="lazy"/></li>
</ol>
<h2 data-id="heading-5">ğŸ“ ä¸ Cherry Studio å®Œç¾æ­é…</h2>
<p>è¯¥é¡¹ç›®ç‰¹åˆ«ä¼˜åŒ–äº†ä¸ Cherry Studio å®¢æˆ·ç«¯çš„å…¼å®¹æ€§ã€‚ä½ åªéœ€åœ¨ Personal LLM API åå°é…ç½®å¥½æ¨¡å‹å¯†é’¥ï¼Œç„¶ååœ¨ Cherry Studio ä¸­æ·»åŠ ä¸€ä¸ªè‡ªå®šä¹‰ OpenAI å…¼å®¹æ¥å£ï¼Œå³å¯äº«å—ï¼š</p>
<ul>
<li>æ— ç¼çš„æµå¼å¯¹è¯ä½“éªŒ</li>
<li>æ”¯æŒæ·±åº¦æ€è€ƒï¼ˆChain of Thoughtï¼‰å‚æ•°æ§åˆ¶</li>
<li>ç»Ÿä¸€çš„ç•Œé¢ä¸»é¢˜ä¸å­—ä½“æ¸²æŸ“</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/1479e69f19264ee992c1161994fcf19a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768317048&amp;x-signature=W28vR3TZyAVWrGYoOJTOjjHmFOA%3D" alt="" loading="lazy"/></p>
<h2 data-id="heading-6">ğŸ“Š åå°ç®¡ç†æ¼”ç¤º</h2>
<p>é¡¹ç›®æä¾›äº†å®Œæ•´çš„ç®¡ç†åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š</p>
<ul>
<li><strong>ä½¿ç”¨ç»Ÿè®¡</strong>ï¼šç›´è§‚æŸ¥çœ‹å„æ¨¡å‹è°ƒç”¨æ¬¡æ•°ã€Token æ¶ˆè€—ã€è´¹ç”¨ä¼°ç®—</li>
<li><strong>æ¨¡å‹ä¸å¯†é’¥ç®¡ç†</strong>ï¼šçµæ´»æ·»åŠ ã€ç¦ç”¨ã€è½®è¯¢å¤šä¸ª API Key</li>
<li><strong>å¯¹è¯å†å²</strong>ï¼šä¿å­˜å’Œæ£€ç´¢è¿‡å¾€å¯¹è¯è®°å½•</li>
<li><strong>ç³»ç»Ÿé…ç½®</strong>ï¼šä»£ç†è®¾ç½®ã€æ•°æ®åº“åˆ‡æ¢ç­‰</li>
</ul>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/180205b301724081a057b8a50cf22c5a~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768317048&amp;x-signature=S39gkmDcTl0uMHb2xNmCGjeiFUw%3D" alt="" loading="lazy"/></p>
<p>ä½“éªŒ Demoï¼šğŸ”— <a href="https://link.juejin.cn?target=http%3A%2F%2Fllmdashboard.demo.dx3906.info%2Fdashboard%2Flogin" target="_blank" rel="noopener" title="http://llmdashboard.demo.dx3906.info/dashboard/login" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=http%3A%2F%2Fllmdashboard.demo.dx3906.info%2Fdashboard%2Flogin" target="_blank" title="http://llmdashboard.demo.dx3906.info/dashboard/login" ref="nofollow noopener noreferrer">llmdashboard.demo.dx3906.info/dashboard/lâ€¦</a>
ï¼ˆè´¦å·ï¼š<code>test</code>ï¼Œå¯†ç ï¼š<code>12345678</code>ï¼‰</p>
<h2 data-id="heading-7">ğŸ”® æœªæ¥è§„åˆ’</h2>
<p>é¡¹ç›®ä½œè€…è¿˜è®¡åˆ’åŠ å…¥æ›´å¤šå®ç”¨åŠŸèƒ½ï¼š</p>
<ul>
<li>RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åº”ç”¨ä¸æ¥å£æ”¯æŒ</li>
<li>åŸºäº SeekDB çš„ AI åŸç”Ÿæ•°æ®åº“é›†æˆ</li>
<li>Prompt æ¨¡æ¿ç®¡ç†</li>
</ul>
<h2 data-id="heading-8">ç»“è¯­</h2>
<p>æ— è®ºä½ æ˜¯ AI çˆ±å¥½è€…ã€å¼€å‘è€…ï¼Œè¿˜æ˜¯ç»å¸¸éœ€è¦åˆ‡æ¢ä½¿ç”¨ä¸åŒå¤§æ¨¡å‹çš„ä¸ªäººç”¨æˆ·ï¼ŒPersonal LLM API éƒ½èƒ½ä¸ºä½ æä¾›ä¸€ä¸ª<strong>å¹²å‡€ã€ç»Ÿä¸€ã€å¯æ§</strong>çš„ AI å…¥å£ã€‚å®ƒç”¨ç®€æ´çš„æŠ€æœ¯æ ˆè§£å†³äº†å¤šæ¨¡å‹ç®¡ç†çš„ç—›ç‚¹ï¼Œè®©æ¯ä¸ªäººéƒ½èƒ½è½»æ¾æ‹¥æœ‰å±äºè‡ªå·±çš„æ™ºèƒ½åŠ©æ‰‹è°ƒåº¦ä¸­å¿ƒã€‚</p>
<hr/>
<p><strong>é¡¹ç›®åœ°å€</strong>ï¼š<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2FPersonal-LLM-API" target="_blank" rel="noopener" title="https://github.com/NLP-LOVE/Personal-LLM-API" ref="nofollow noopener noreferrer"/><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FNLP-LOVE%2FPersonal-LLM-API" target="_blank" title="https://github.com/NLP-LOVE/Personal-LLM-API" ref="nofollow noopener noreferrer">github.com/NLP-LOVE/Peâ€¦</a></p>
<p>å¦‚æœä½ æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªè½»é‡ã€æ˜“æ‰©å±•ã€ä¸”å¯¹ä¸ªäººç”¨æˆ·å‹å¥½çš„ LLM æ¥å£èšåˆæ–¹æ¡ˆï¼Œä¸å¦¨è¯•è¯•è¿™ä¸ªé¡¹ç›®ï¼Œæˆ–è®¸å®ƒèƒ½æˆä¸ºä½  AI å·¥ä½œæµä¸­é‚£ä¸ªâ€œæ°åˆ°å¥½å¤„â€çš„æ¢çº½ã€‚</p>
<p><strong>å¾®ä¿¡å…¬ä¼—å·ï¼š</strong></p>
<p><img src="https://p6-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/b84b7e10c6c5427d8956f7adc508ee70~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAgbWFudGNo:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768317048&amp;x-signature=15H5D9PXoVN3Z7IqlPfFUHmLVcg%3D" alt="httpera.dx3906.infostaticwechat.html.png" loading="lazy"/></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item><item>    <title><![CDATA[å¤šæ¨¡æ€å¤§æ¨¡å‹æœ‰å“ªäº›æ¨¡æ€ï¼Ÿ]]></title>    <link>https://juejin.cn/post/7592082090207526939</link>    <guid>https://juejin.cn/post/7592082090207526939</guid>    <pubDate>2026-01-06T15:50:24.000Z</pubDate>    <description><![CDATA[<article itemscope="itemscope" itemtype="http://schema.org/Article" data-entry-id="7592082090207526939" data-draft-id="7592058763987124270" data-original-type="0" class="article" data-v-61fb5e44=""><!----> <meta itemprop="headline" content="å¤šæ¨¡æ€å¤§æ¨¡å‹æœ‰å“ªäº›æ¨¡æ€ï¼Ÿ"/> <meta itemprop="keywords" content="LLM"/> <meta itemprop="datePublished" content="2026-01-06T15:50:24.000Z"/> <meta itemprop="image" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-128.png~tplv-t2oaga2asx-image.image"/> <div itemprop="author" itemscope="itemscope" itemtype="http://schema.org/Person"><meta itemprop="name" content="æ™ºæ³ŠAI"/> <meta itemprop="url" content="https://juejin.cn/user/3572727470361578"/></div> <div itemprop="publisher" itemscope="itemscope" itemtype="http://schema.org/Organization"><meta itemprop="name" content="æ˜é‡‘"/> <div itemprop="logo" itemscope="itemscope" itemtype="https://schema.org/ImageObject"><meta itemprop="url" content="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-assets/icon/icon-white-180.png~tplv-t2oaga2asx-image.image"/> <meta itemprop="width" content="180"/> <meta itemprop="height" content="180"/></div></div> <h1 class="article-title" data-v-61fb5e44="">
            å¤šæ¨¡æ€å¤§æ¨¡å‹æœ‰å“ªäº›æ¨¡æ€ï¼Ÿ
            <!----> <!----></h1> <div class="author-info-block block-hidden" data-v-61fb5e44=""><div class="author-info-box" data-v-61fb5e44=""><div class="author-name" data-v-61fb5e44=""><a href="/user/3572727470361578/posts" target="_blank" rel="" class="jj-link username username ellipsis" data-v-65b50b51="" data-v-292f6e48="" data-v-61fb5e44=""><span class="name" style="max-width:160px;" data-v-65b50b51="" data-v-292f6e48="">
    æ™ºæ³ŠAI
  </span> <!----> <!----> <!----> </a></div> <div class="meta-box" data-v-61fb5e44=""><time datetime="2026-01-06T15:50:24.000Z" title="Tue Jan 06 2026 15:50:24 GMT+0000 (Coordinated Universal Time)" class="time" data-v-61fb5e44="">
                    2026-01-06
                  </time> <svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" class="read-icon" data-v-61fb5e44=""><path d="M7.90078 2.80078C4.49278 2.80078 1.74745 6.11672 0.800781 7.77469C1.74745 9.58339 4.49278 13.2008 7.90078 13.2008C11.3088 13.2008 14.0541 9.58339 15.0008 7.77469C14.0541 6.11672 11.3088 2.80078 7.90078 2.80078Z" stroke="currentColor" data-v-61fb5e44=""/><circle cx="7.89922" cy="8.00078" r="2.2" stroke="currentColor" data-v-61fb5e44=""/></svg> <span class="views-count" data-v-61fb5e44="">
                    0
                  </span> <span class="read-time" data-v-61fb5e44=""><svg width="16" height="16" viewbox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-61fb5e44=""><rect width="16" height="16" fill="none" data-v-61fb5e44=""/><circle cx="8" cy="8" r="5.65625" stroke="#8A919F" data-v-61fb5e44=""/><path d="M7.69141 5.18652V8.30924H10.8141" stroke="#8A919F" stroke-linecap="round" stroke-linejoin="round" data-v-61fb5e44=""/></svg>
                    é˜…è¯»2åˆ†é’Ÿ
                  </span> <!----></div></div> <div style="flex:1;" data-v-61fb5e44=""/> <!----> <!----></div> <!----> <!----> <!----> <!----> <div id="article-root" itemprop="articleBody" class="main" data-v-61fb5e44=""><div class="article-viewer markdown-body result"><style>.markdown-body{word-break:break-word;line-height:1.75;font-weight:400;font-size:16px;overflow-x:hidden;color:#252933}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{line-height:1.5;margin-top:35px;margin-bottom:10px;padding-bottom:5px}.markdown-body h1{font-size:24px;line-height:38px;margin-bottom:5px}.markdown-body h2{font-size:22px;line-height:34px;padding-bottom:12px;border-bottom:1px solid #ececec}.markdown-body h3{font-size:20px;line-height:28px}.markdown-body h4{font-size:18px;line-height:26px}.markdown-body h5{font-size:17px;line-height:24px}.markdown-body h6{font-size:16px;line-height:24px}.markdown-body p{line-height:inherit;margin-top:22px;margin-bottom:22px}.markdown-body img{max-width:100%}.markdown-body hr{border:none;border-top:1px solid #ddd;margin-top:32px;margin-bottom:32px}.markdown-body code{word-break:break-word;border-radius:2px;overflow-x:auto;background-color:#fff5f5;color:#ff502c;font-size:.87em;padding:.065em .4em}.markdown-body code,.markdown-body pre{font-family:Menlo,Monaco,Consolas,Courier New,monospace}.markdown-body pre{overflow:auto;position:relative;line-height:1.75}.markdown-body pre&gt;code{font-size:12px;padding:15px 12px;margin:0;word-break:normal;display:block;overflow-x:auto;color:#333;background:#f8f8f8}.markdown-body a{text-decoration:none;color:#0269c8;border-bottom:1px solid #d1e9ff}.markdown-body a:active,.markdown-body a:hover{color:#275b8c}.markdown-body table{display:inline-block!important;font-size:12px;width:auto;max-width:100%;overflow:auto;border:1px solid #f6f6f6}.markdown-body thead{background:#f6f6f6;color:#000;text-align:left}.markdown-body tr:nth-child(2n){background-color:#fcfcfc}.markdown-body td,.markdown-body th{padding:12px 7px;line-height:24px}.markdown-body td{min-width:120px}.markdown-body blockquote{color:#666;padding:1px 23px;margin:22px 0;border-left:4px solid #cbcbcb;background-color:#f8f8f8}.markdown-body blockquote:after{display:block;content:""}.markdown-body blockquote&gt;p{margin:10px 0}.markdown-body ol,.markdown-body ul{padding-left:28px}.markdown-body ol li,.markdown-body ul li{margin-bottom:0;list-style:inherit}.markdown-body ol li .task-list-item,.markdown-body ul li .task-list-item{list-style:none}.markdown-body ol li .task-list-item ol,.markdown-body ol li .task-list-item ul,.markdown-body ul li .task-list-item ol,.markdown-body ul li .task-list-item ul{margin-top:0}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:3px}.markdown-body ol li{padding-left:6px}.markdown-body .contains-task-list{padding-left:0}.markdown-body .task-list-item{list-style:none}@media (max-width:720px){.markdown-body h1{font-size:24px}.markdown-body h2{font-size:20px}.markdown-body h3{font-size:18px}}</style><style data-highlight="" data-highlight-key="juejin">.markdown-body pre,.markdown-body pre&gt;code.hljs{color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}</style><p>â€œå¤šæ¨¡æ€â€ä¸­çš„â€œæ¨¡æ€â€ï¼ˆmodalityï¼‰ï¼Œå³æŒ‡å„ç±»æ•°æ®å½¢å¼æˆ–ä¿¡æ¯æ¥æºã€‚åœ¨å¤šæ¨¡æ€å¤§æ¨¡å‹ä¸­ï¼Œå…¸å‹æ¨¡æ€æ¶µç›–ä»¥ä¸‹ç±»åˆ«ï¼š</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/81dd8e78a62b4220b0a9dd14077baa15~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768319423&amp;x-signature=cFpatLJYkAH%2FJ%2FHWH4fdPnedDsw%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p>
<p><strong>æ–‡æœ¬æ¨¡æ€â€Œ</strong>ï¼š</p>
<p>æ¶µç›–è‡ªç„¶è¯­è¨€æ–‡æœ¬ã€ç»è¯­éŸ³è¯†åˆ«è½¬æ¢çš„æ–‡æœ¬å†…å®¹ç­‰ã€‚</p>
<p><strong>å›¾åƒæ¨¡æ€â€Œ</strong>ï¼š</p>
<p>æŒ‡è§†è§‰å›¾åƒæ•°æ®ï¼Œä¾‹å¦‚ç…§ç‰‡ã€æ’ç”»ã€è‰ºæœ¯ä½œå“ç­‰ã€‚</p>
<p><strong>è§†é¢‘æ¨¡æ€â€Œ</strong>ï¼š</p>
<p>åŒ…å«åŠ¨æ€å½±åƒåºåˆ—ï¼Œå¦‚çŸ­è§†é¢‘ã€å½±è§†ç‰‡æ®µã€ç›‘æ§å½•åƒç­‰ã€‚</p>
<p><strong>éŸ³é¢‘æ¨¡æ€â€Œ</strong>ï¼š</p>
<p>æŒ‡å£°å­¦ä¿¡å·æ•°æ®ï¼Œå¦‚äººå£°ã€éŸ³ä¹ã€ç¯å¢ƒéŸ³æ•ˆç­‰ã€‚</p>
<p><strong>å…¶ä»–æ¨¡æ€â€Œ</strong>ï¼š</p>
<p>è¿˜åŒ…æ‹¬å¦‚ç¯å¢ƒä¼ æ„Ÿå™¨è¯»æ•°ã€ç”Ÿç†ä¿¡å·ã€æŒ‡çº¹ã€è™¹è†œç­‰éä¼ ç»Ÿä¿¡æ¯å½¢å¼ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/53e9d8bc943e419d897a64e7ad648c35~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768319423&amp;x-signature=Dl60lZDlwJWBvnNfYdkn6AOwSyc%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤šæ¨¡æ€æ¨¡å‹çš„æ ¸å¿ƒç›®æ ‡ï¼Œåœ¨äºèåˆä¸Šè¿°å¼‚æ„æ¨¡æ€çš„ä¿¡æ¯ï¼Œä»¥å¢å¼ºæ¨¡å‹å¯¹è¾“å…¥æ•°æ®çš„è¯­ä¹‰ç†è§£ã€ä»»åŠ¡æ‰§è¡Œä¸é¢„æµ‹èƒ½åŠ›ã€‚</p>
<p>é€šè¿‡ååŒåˆ©ç”¨å¤šæºä¿¡æ¯ï¼Œæ¨¡å‹å¾—ä»¥æ„å»ºæ›´ç«‹ä½“ã€æ›´ç²¾å‡†çš„è®¤çŸ¥æ¡†æ¶ã€‚æ•´åˆå¤šå…ƒæ¨¡æ€æ•°æ®ï¼Œä½¿ç³»ç»Ÿèƒ½å¤Ÿå®ç°æ›´ä¸°å¯Œã€æ›´çµæ´»çš„ä¿¡æ¯è§£æï¼Œä»è€Œä¸ºå¤æ‚æ™ºèƒ½ä»»åŠ¡æä¾›åšå®æ”¯æ’‘ã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/d08d8034132e49409b65460d46e436b9~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768319423&amp;x-signature=0fDG0NQghUfWDuH1DW7Mu2AI3GM%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p>å¤šæ¨¡æ€å¤§æ¨¡å‹å…·å¤‡ä»¥ä¸‹æ ¸å¿ƒç‰¹å¾ï¼š</p>
<p><strong>å¤„ç†å¤šç§æ•°æ®ç±»å‹â€Œ</strong>ï¼šå¯åŒæ­¥æ¥æ”¶å¹¶å¤„ç†æ–‡æœ¬ã€å›¾åƒã€è§†é¢‘ã€éŸ³é¢‘ç­‰å¤šç§è¾“å…¥ï¼Œå®ç°è·¨æ¨¡æ€è¯­ä¹‰å¯¹é½ä¸è”åˆè¡¨å¾ã€‚</p>
<p><strong>ç»¼åˆä¸åŒä¿¡æ¯æºâ€Œ</strong>ï¼šæœ‰æ•ˆæ•´åˆæ¥è‡ªä¸åŒæ„ŸçŸ¥é€šé“çš„æ•°æ®ï¼Œæå‡æ•´ä½“ä¿¡æ¯å¤„ç†çš„å®Œæ•´æ€§ä¸å‡†ç¡®æ€§ã€‚</p>
<p><strong>æå‡æ¨¡å‹æ€§èƒ½â€Œ</strong>ï¼šå€ŸåŠ©å¤šæ¨¡æ€äº’è¡¥æ€§ï¼Œå¢å¼ºæ¨¡å‹çš„æ³›åŒ–æ€§ä¸é²æ£’æ€§ï¼Œæ‹“å±•å…¶åœ¨å¤šæ ·åŒ–ä»»åŠ¡ä¸­çš„é€‚ç”¨è¾¹ç•Œã€‚</p>
<p><img src="https://p9-xtjj-sign.byteimg.com/tos-cn-i-73owjymdk6/11127f23e1764186a2616375a823450e~tplv-73owjymdk6-jj-mark-v1:0:0:0:0:5o6Y6YeR5oqA5pyv56S-5Yy6IEAg5pm65rOKQUk=:q75.awebp?rk3s=f64ab15b&amp;x-expires=1768319423&amp;x-signature=UcvZc3sBs8rdShFurnItytKOMDo%3D" alt="å›¾ç‰‡" loading="lazy"/></p>
<p><strong>ä¸°å¯Œçš„åº”ç”¨åœºæ™¯â€Œ</strong>ï¼šå¹¿æ³›åº”ç”¨äºå›¾åƒå­—å¹•ç”Ÿæˆã€è§†é¢‘å†…å®¹åˆ†æã€å¤šæ¨¡æ€äººæœºäº¤äº’ã€è·¨æ¨¡æ€è¯­ä¹‰æ¨ç†ç­‰å‰æ²¿é¢†åŸŸã€‚</p>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fyuan.zhipoai.cn%2F" target="_blank" title="https://yuan.zhipoai.cn/" ref="nofollow noopener noreferrer"><strong>æ›´å¤šAIå¤§æ¨¡å‹å­¦ä¹ è§†é¢‘åŠèµ„æºï¼Œéƒ½åœ¨æ™ºæ³ŠAIã€‚</strong></a></p></div></div></article> <div class="article-end" data-v-539963b4="" data-v-61fb5e44=""><div class="rank-entry-bottom" data-v-539963b4="" data-v-61fb5e44=""><!----></div> <div class="tag-list-box" data-v-539963b4="" data-v-61fb5e44=""><!----><!----><!----></div></div> <!----><!----><!----><!----><!----><style>	.markdown-body { color: #828182;}</style>]]></description></item>  </channel></rss>